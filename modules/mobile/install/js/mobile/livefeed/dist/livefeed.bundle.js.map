{"version":3,"file":"livefeed.bundle.js","sources":["../src/balloonnotifier.js","../src/notificationbar.js","../src/database.js","../src/publicationqueue.js","../src/feed.js"],"sourcesContent":["import {Loc} from \"main.core\";\nimport {Instance} from \"./feed\";\n\nclass BalloonNotifier\n{\n\tconstructor()\n\t{\n\t\tthis.classes = {\n\t\t\tshow: 'lenta-notifier-shown'\n\t\t};\n\t\tthis.nodeIdList = {\n\t\t\tnotifier: 'lenta_notifier',\n\t\t\tnotifierCounter: 'lenta_notifier_cnt',\n\t\t\tnotifierCounterTitle: 'lenta_notifier_cnt_title',\n\t\t\trefreshNeeded: 'lenta_notifier_2'\n\t\t};\n\t}\n\n\tgetNotifierNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifier);\n\t}\n\tgetNotifierCounterNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounter);\n\t}\n\tgetNotifierCounterTitleNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.notifierCounterTitle);\n\t}\n\tgetRefreshNeededNode()\n\t{\n\t\treturn document.getElementById(this.nodeIdList.refreshNeeded);\n\t}\n\n\tshowRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededBlock = this.getRefreshNeededNode();\n\t\tif (refreshNeededBlock)\n\t\t{\n\t\t\trefreshNeededBlock.classList.add(this.classes.show);\n\t\t}\n\t}\n\n\thideRefreshNeededNotifier()\n\t{\n\t\tconst refreshNeededNode = this.getRefreshNeededNode();\n\t\tif (refreshNeededNode)\n\t\t{\n\t\t\trefreshNeededNode.classList.remove(this.classes.show);\n\t\t}\n\t}\n\n\tshowNotifier(params)\n\t{\n\t\tlet cnt = parseInt(params.counterValue);\n\n\t\tconst\n\t\t\tcnt_cent = cnt % 100,\n\t\t\treminder = cnt % 10;\n\n\t\tlet suffix = '';\n\n\t\tif (\n\t\t\tcnt_cent >= 10\n\t\t\t&& cnt_cent < 15\n\t\t)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 0)\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\t\telse if (reminder == 1)\n\t\t{\n\t\t\tsuffix = 1;\n\t\t}\n\t\telse if (\n\t\t\treminder == 2\n\t\t\t|| reminder == 3\n\t\t\t|| reminder == 4\n\t\t)\n\t\t{\n\t\t\tsuffix = 2;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = 3;\n\t\t}\n\n\t\tif (Instance.getRefreshNeeded())\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = (cnt ? cnt + '+' : '');\n\t\t\tthis.hideRefreshNeededNotifier();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getNotifierCounterNode().innerHTML = cnt || '';\n\t\t}\n\n\t\tthis.getNotifierCounterTitleNode().innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_COUNTER_TITLE_' + suffix);\n\t\tthis.getNotifierNode().classList.add(this.classes.show);\n\t}\n\n\thideNotifier()\n\t{\n\t\tconst notifierNode = this.getNotifierNode();\n\t\tif (notifierNode)\n\t\t{\n\t\t\tnotifierNode.classList.remove(this.classes.show);\n\t\t}\n\t};\n}\n\nexport {\n\tBalloonNotifier\n}","import {Loc} from \"main.core\";\n\nclass NotificationBar\n{\n\tconstructor()\n\t{\n\t\tthis.repo = [];\n\t\tthis.color = {\n\t\t\tbackground: {\n\t\t\t\terror: '#affb0000',\n\t\t\t\tinfo: '#3a3735'\n\t\t\t},\n\t\t\ttext: {\n\t\t\t\terror: '#ffffff',\n\t\t\t\tinfo: '#ffffff'\n\t\t\t}\n\t\t}\n\t}\n\n\thideAll()\n\t{\n\t\tthis.repo = this.repo.filter(notifyBar => {\n\t\t\treturn notifyBar;\n\t\t});\n\t\tthis.repo.forEach(notifyBar => {\n\t\t\tnotifyBar.hide();\n\t\t});\n\t}\n\n\tshowError(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.error,\n\t\t\t\ttextColor: this.color.text.error,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 30000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true),\n\t\t\t\tonTap: params.onTap ? params.onTap : () => {},\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n\n\tshowInfo(params)\n\t{\n\t\tconst bar = new BXMobileApp.UI.NotificationBar({\n\t\t\t\tmessage: params.text ? params.text : '',\n\t\t\t\tcolor: this.color.background.info,\n\t\t\t\ttextColor: this.color.text.info,\n\t\t\t\tuseLoader: (params.useLoader ? !!params.useLoader : false),\n\t\t\t\tgroupId: (params.groupId ? params.groupId : ''),\n\t\t\t\tmaxLines: (params.maxLines ? params.maxLines : false),\n\t\t\t\talign: (params.textAlign ? params.textAlign : 'center'),\n\t\t\t\tisGlobal: (params.isGlobal ? !!params.isGlobal : true),\n\t\t\t\tuseCloseButton: (params.useCloseButton ? !!params.useCloseButton : true),\n\t\t\t\tautoHideTimeout: (params.autoHideTimeout ? params.autoHideTimeout : 1000),\n\t\t\t\thideOnTap: (params.hideOnTap ? !!params.hideOnTap : true)\n\t\t\t}, (params.id ? params.id : parseInt(Math.random() * 100000)));\n\n\t\tthis.repo.push(bar);\n\t\tbar.show();\n\t}\n}\n\nexport {\n\tNotificationBar\n}","import {Type} from \"main.core\";\n\nclass Database\n{\n\tconstructor(params)\n\t{\n\t\tthis.tableName = null;\n\t\tthis.keyName = null;\n\n\t\tthis.setTableName(Type.isPlainObject(params) && Type.isStringFilled(params.tableName) ? params.tableName : 'b_default');\n\t\tthis.setKeyName(Type.isPlainObject(params) && Type.isStringFilled(params.keyName) ? params.keyName : 'post_unsent');\n\t}\n\n\tsetTableName(value)\n\t{\n\t\tthis.tableName = value;\n\t}\n\tgetTableName()\n\t{\n\t\treturn this.tableName;\n\t}\n\n\tsetKeyName(value)\n\t{\n\t\tthis.keyName = value;\n\t}\n\tgetKeyName()\n\t{\n\t\treturn this.keyName;\n\t}\n\n\tcheck(callback)\n\t{\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tapp.db.createTable({\n\t\t\ttableName: this.getTableName(),\n\t\t\tfields: [\n\t\t\t\t{\n\t\t\t\t\tname: 'KEY',\n\t\t\t\t\tunique: true\n\t\t\t\t},\n\t\t\t\t'VALUE'\n\t\t\t],\n\t\t\tsuccess: (res) => { callback.success(); },\n\t\t\tfail: (e) => { callback.fail() }\n\t\t});\n\t}\n\n\tdelete(groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.deleteRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {},\n\t\t\t\t\tfail: (e) => {}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {}\n\t\t});\n\t}\n\n\tsave(data, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tfor (let x in data)\n\t\t{\n\t\t\tif (!data.hasOwnProperty(x))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (x === 'sessid')\n\t\t\t{\n\t\t\t\tdelete data[x];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.getRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tlet text = JSON.stringify(data);\n\n\t\t\t\t\t\tif (res.items.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapp.db.updateRows({\n\t\t\t\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\t\t\t\tupdateFields: {\n\t\t\t\t\t\t\t\t\tVALUE: text\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tapp.db.addRow({\n\t\t\t\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\t\t\t\tinsertFields: {\n\t\t\t\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : ''),\n\t\t\t\t\t\t\t\t\tVALUE: text\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tfail: (e) => {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => {}\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => {\n\t\t\t}\n\t\t});\n\t}\n\n\tload(callback, groupId)\n\t{\n\t\tif (parseInt(groupId) <= 0)\n\t\t{\n\t\t\tgroupId = false;\n\t\t}\n\n\t\tif (!Type.isObject(app.db))\n\t\t{\n\t\t\tcallback.onEmpty();\n\t\t\treturn null;\n\t\t}\n\n\t\tthis.check({\n\t\t\tsuccess: () => {\n\t\t\t\tapp.db.getRows({\n\t\t\t\t\ttableName: this.getTableName(),\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\tKEY: this.getKeyName() + (groupId ? '_' + groupId : '')\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tres.items.length > 0\n\t\t\t\t\t\t\t&& res.items[0].VALUE.length > 0\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar result = JSON.parse(res.items[0].VALUE);\n\t\t\t\t\t\t\tif (Type.isPlainObject(result))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcallback.onLoad(result);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallback.onEmpty();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: (e) => { callback.onEmpty(); }\n\t\t\t\t});\n\t\t\t},\n\t\t\tfail: () => { callback.onEmpty(); }\n\t\t});\n\t}\n}\n\nexport {\n\tDatabase\n}","import {Tag, Dom, Loc, Type} from \"main.core\";\nimport {Instance} from \"./feed\";\nimport {Event} from \"main.core.events\";\n\nclass PublicationQueue extends Event.EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.repo = {};\n\n\t\tthis.nodeId = {\n\t\t\tcontainer: 'post-balloon-container'\n\t\t};\n\n\t\tthis.class = {\n\t\t\tballoonHidden: 'post-balloon-hidden',\n\t\t\tballoonFixed: 'post-balloon-box-fixed',\n\t\t\tballoonPublished: 'post-balloon-done',\n\t\t\tballoonShow: 'post-balloon-show',\n\t\t\tballoonHide: 'post-balloon-hide'\n\t\t};\n\n\t\tthis.timeout = {\n\t\t\tshow: 750\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterSetItem', this.afterSetItem.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\n\t\tthis.setEventNamespace('BX.Mobile.Livefeed');\n\t\tthis.subscribe('onFeedReady', this.onFeedLoaded.bind(this));\n\t\tthis.subscribe('onPostInserted', this.onPostInserted.bind(this));\n\n\t\tEvent.bind(document, 'scroll', this.onScroll.bind(this));\n\t}\n\n\tonScroll()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (window.pageYOffset > 0)\n\t\t{\n\t\t\tcontainerNode.classList.add(this.class.balloonFixed);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontainerNode.classList.remove(this.class.balloonFixed);\n\t\t}\n\t}\n\n\tonFeedLoaded()\n\t{\n\t\tapp.exec('getStorageValue', {\n\t\t\tstorageId: 'livefeed',\n\t\t\tkey: 'publicationQueue',\n\t\t\tcallback: (queue) =>\n\t\t\t{\n\t\t\t\tqueue = (Type.isPlainObject(queue) ? queue : JSON.parse(queue));\n\n\t\t\t\tif (!Type.isPlainObject(queue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (let key in queue)\n\t\t\t\t{\n\t\t\t\t\tif (!queue.hasOwnProperty(key))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addToTray(key, {});\n\t\t\t\t}\n\n\t\t\t\tthis.drawList();\n\t\t\t}\n\t\t});\n\t}\n\n\tonPostInserted(event)\n\t{\n\t\tthis.removeFromTray(event.data.key);\n\t}\n\n\taddToTray(key, params)\n\t{\n\t\tthis.repo[key] = params;\n\t\tthis.repo[key].node = this.drawItem();\n\t\tthis.repo[key].node.classList.add(this.class.balloonShow);\n\t}\n\tremoveFromTray(key, params)\n\t{\n\t\tthis.hideItem(key);\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.repo[key])\n\t\t\t{\n\t\t\t\tdelete this.repo[key];\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\taddSuccess(key)\n\t{\n\t\tif (\n\t\t\tthis.repo[key]\n\t\t\t&& this.repo[key].node\n\t\t)\n\t\t{\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonHidden);\n\t\t\tthis.repo[key].node.classList.remove(this.class.balloonShow);\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonPublished);\n\t\t\tthis.repo[key].node.lastElementChild.innerHTML = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_SUCCESS_TITLE');\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.removeFromTray(key);\n\t\t}, 5000);\n\t}\n\n\tdrawItem()\n\t{\n\t\tconst\n\t\t\ttitle = Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_QUEUE_ITEM_TITLE');\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"post-balloon-hidden post-balloon post-balloon-active\"><span class=\"post-balloon-icon\"></span><span class=\"post-balloon-text\">${title}</span></div>\n\t\t\t`;\n\t}\n\n\thideItem(key, params)\n\t{\n\t\tif (this.repo[key])\n\t\t{\n\t\t\tthis.repo[key].node.classList.add(this.class.balloonHide);\n\t\t}\n\t}\n\n\tdrawList()\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.container);\n\n\t\tif (!Type.isDomNode(containerNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(containerNode);\n\n\t\tfor (let key in this.repo)\n\t\t{\n\t\t\tif (\n\t\t\t\t!this.repo.hasOwnProperty(key)\n\t\t\t\t|| !Type.isDomNode(this.repo[key].node)\n\t\t\t)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tDom.append(this.repo[key].node, containerNode);\n\t\t}\n\t}\n\n\tafterSetItem(params)\n\t{\n\t\tconst\n\t\t\tkey = params.key ? params.key : '',\n\t\t\tpageId = params.pageId ? params.pageId : '',\n\t\t\tcontentType = params.contentType ? params.contentType : '';\n\n\t\tif (\n\t\t\tpageId != Instance.getPageId()\n\t\t\t|| !key\n\t\t\t|| !Type.isStringFilled(contentType)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (contentType == 'post')\n\t\t{\n\t\t\tthis.addToTray(key, {\n\t\t\t\tkey: key\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.drawList();\n\t\t\t}, this.timeout.show);\n\t\t}\n\t}\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.addSuccess(key);\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.addSuccess(key);\n\t\tthis.drawList();\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tkey = params.key ? params.key : '';\n\n\t\tthis.removeFromTray(key, {\n\t\t\tkey: key\n\t\t});\n\t\tthis.drawList();\n\t}\n}\n\nexport {\n\tPublicationQueue\n}","import {BalloonNotifier} from \"./balloonnotifier\";\nimport {NotificationBar} from \"./notificationbar\";\nimport {Database} from \"./database\";\nimport {PublicationQueue} from \"./publicationqueue\";\nimport {Dom, Tag, Loc, Type, ajax, Runtime} from \"main.core\";\nimport {Event} from \"main.core.events\";\nimport \"mobile.imageviewer\";\nimport {Utils} from \"mobile.utils\";\n\nclass Feed\n{\n\tconstructor()\n\t{\n\t\tthis.pageId = null;\n\t\tthis.refreshNeeded = false;\n\t\tthis.refreshStarted = false;\n\t\tthis.options = {};\n\t\tthis.nodeId = {\n\t\t\tfeedContainer: 'lenta_wrapper'\n\t\t};\n\t\tthis.class = {\n\t\t\tpostNewContainerTransformNew: 'lenta-item-new-cont',\n\t\t\tpostNewContainerTransform: 'lenta-item-transform-cont',\n\t\t\tpostLazyLoadCheck:  'lenta-item-lazyload-check',\n\t\t\tpost: 'lenta-item',\n\t\t\tpostItemTopWrap: 'post-item-top-wrap',\n\t\t\tpostItemTop: 'post-item-top',\n\t\t\tpostItemPostBlock: 'post-item-post-block',\n\t\t\tpostItemAttachedFileWrap: 'post-item-attached-disk-file-wrap',\n\t\t\tpostItemInformWrap: 'post-item-inform-wrap',\n\t\t\tpostItemInformWrapTree: 'post-item-inform-wrap-tree'\n\t\t};\n\n\t\tthis.newPostContainer = null;\n\t\tthis.maxScroll = 0;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAdd', this.afterPostAdd.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostAddError', this.afterPostAddError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdate', this.afterPostUpdate.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed.PublicationQueue::afterPostUpdateError', this.afterPostUpdateError.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::showLoader', this.showLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::hideLoader', this.hideLoader.bind(this));\n\t\tBXMobileApp.addCustomEvent('Livefeed::scrollTop', this.scrollTop.bind(this));\n\n\t\tEvent.EventEmitter.subscribe('BX.LazyLoad:ImageLoaded', this.onLazyLoadImageLoaded.bind(this));\n\t}\n\n\tsetPageId(value)\n\t{\n\t\tthis.pageId = value;\n\t}\n\tgetPageId()\n\t{\n\t\treturn this.pageId;\n\t};\n\n\tsetOptions(optionsList)\n\t{\n\t\tfor (let key in optionsList)\n\t\t{\n\t\t\tif (!optionsList.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.options[key] = optionsList[key];\n\t\t}\n\t}\n\tgetOption(key, defaultValue)\n\t{\n\t\tif (Type.isUndefined(defaultValue))\n\t\t{\n\t\t\tdefaultValue = null;\n\t\t}\n\n\t\tif (!Type.isStringFilled(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (!Type.isUndefined(this.options[key]) ? this.options[key] : defaultValue);\n\t}\n\n\tsetRefreshNeeded(value)\n\t{\n\t\tthis.refreshNeeded = value;\n\t}\n\tgetRefreshNeeded()\n\t{\n\t\treturn this.refreshNeeded;\n\t};\n\n\tsetRefreshStarted(value)\n\t{\n\t\tthis.refreshStarted = value;\n\t}\n\tgetRefreshStarted()\n\t{\n\t\treturn this.refreshStarted;\n\t};\n\n\tsetNewPostContainer(value)\n\t{\n\t\tthis.newPostContainer = value;\n\t};\n\tgetNewPostContainer()\n\t{\n\t\treturn this.newPostContainer;\n\t};\n\n\tsetMaxScroll(value)\n\t{\n\t\tthis.maxScroll = value;\n\t};\n\tgetMaxScroll()\n\t{\n\t\treturn this.maxScroll;\n\t};\n\n\tafterPostAdd(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tpostId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0),\n\t\t\tcontext = (typeof params.context != 'undefined' ? params.context : ''),\n\t\t\tpageId = (typeof params.pageId != 'undefined' ? params.pageId : ''),\n\t\t\tgroupId = (typeof params.groupId != 'undefined' ? params.groupId : null);\n\n\t\tif (pageId !== this.pageId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDatabaseUnsentPostInstance.delete(groupId);\n\n\t\tif (postId <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'add'\n\t\t});\n\t}\n\n\tafterPostUpdate(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tcontext = (typeof params.context != 'undefined' ? params.context : ''),\n\t\t\tpageId = (typeof params.pageId != 'undefined' ? params.pageId : ''),\n\t\t\tpostId = (typeof params.postId != 'undefined' ? parseInt(params.postId) : 0);\n\n\t\tthis.getEntryContent({\n\t\t\tentityType: 'BLOG_POST',\n\t\t\tentityId: postId,\n\t\t\tqueueKey: params.key,\n\t\t\taction: 'update'\n\t\t});\n\t}\n\n\tafterPostAddError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tcontext = (Type.isStringFilled(params.context) ? params.context : ''),\n\t\t\tgroupId = (params.groupId ? params.groupId : '');\n\n\t\tvar selectedDestinations = {\n\t\t\ta_users: [],\n\t\t\tb_groups: []\n\t\t};\n\n\t\toMSL.buildSelectedDestinations(\n\t\t\tparams.postData,\n\t\t\tselectedDestinations\n\t\t);\n\n\t\toMSL.setPostFormParams({\n\t\t\tselectedRecipients: selectedDestinations\n\t\t});\n\n\t\toMSL.setPostFormParams({\n\t\t\tmessageText: params.postData.POST_MESSAGE\n\t\t});\n\n\t\tDatabaseUnsentPostInstance.save(params.postData, groupId);\n\n\t\tparams.callback = () => {\n\t\t\tapp.exec('showPostForm', oMSL.showNewPostForm());\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tafterPostUpdateError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tcontext = (Type.isStringFilled(params.context) ? params.context : '');\n\n\t\tparams.callback = () => {\n\t\t\toMSL.editBlogPost({\n\t\t\t\tpost_id: parseInt(params.postId)\n\t\t\t});\n\t\t};\n\t\tthis.showPostError(params);\n\t}\n\n\tshowPostError(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tparams.callback = (Type.isFunction(params.callback) ? params.callback : () => {});\n\n\t\tconst\n\t\t\terrorText = (Type.isStringFilled(params.errorText) ? params.errorText : false);\n\n\t\tNotificationBarInstance.showError({\n\t\t\ttext: (errorText ? errorText : Loc.getMessage('MOBILE_EXT_LIVEFEED_PUBLICATION_ERROR')),\n\t\t\tonTap: (notificationParams) => {\n\t\t\t\tparams.callback(notificationParams);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowLoader(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tapp.showPopupLoader({text: (\n\t\t\t\tType.isStringFilled(params.text)\n\t\t\t\t\t? params.text\n\t\t\t\t\t: ''\n\t\t\t)});\n\t}\n\n\thideLoader()\n\t{\n\t\tapp.hidePopupLoader();\n\t}\n\n\tscrollTop(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tif (\n\t\t\tparams.pageId\n\t\t\t&& this.pageId !== null\n\t\t\t&& params.pageId != this.pageId\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\twindow.scrollTo(0, 0);\n\t};\n\n\tgetEntryContent(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tconst\n\t\t\tlogId = (params.logId ? parseInt(params.logId) : 0),\n\t\t\tBMAjaxWrapper = new MobileAjaxWrapper;\n\n\t\tif (\n\t\t\tlogId <= 0\n\t\t\t&& !(\n\t\t\t\tType.isStringFilled(params.entityType)\n\t\t\t\t&& parseInt(params.entityId) > 0\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBMAjaxWrapper.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryContent', {\n\t\t\tmode: 'class',\n\t\t\tsignedParameters: this.getOption('signedParameters', {}),\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tlogId: (parseInt(params.logId) > 0 ? parseInt(params.logId) : 0),\n\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0),\n\t\t\t\t\tsiteTemplateId: BX.message('MOBILE_EXT_LIVEFEED_SITE_TEMPLATE_ID')\n\t\t\t\t}\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (logId <= 0)\n\t\t\t{\n\t\t\t\tBMAjaxWrapper.runComponentAction('bitrix:mobile.socialnetwork.log.ex', 'getEntryLogId', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tentityType: (Type.isStringFilled(params.entityType) ? params.entityType : ''),\n\t\t\t\t\t\t\tentityId: (parseInt(params.entityId) > 0 ? parseInt(params.entityId) : 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}).then((responseLogId) => {\n\t\t\t\t\tif (responseLogId.data.logId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.insertPost({\n\t\t\t\t\t\t\tlogId: responseLogId.data.logId,\n\t\t\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\t\t\taction: params.action\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.insertPost({\n\t\t\t\t\tlogId: logId,\n\t\t\t\t\tcontent: response.data.html,\n\t\t\t\t\tpostId: params.postId,\n\t\t\t\t\tqueueKey: params.queueKey,\n\t\t\t\t\taction: params.action\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\tprocessDetailBlock(postContainer, contentWrapper, selector)\n\t{\n\t\tif (\n\t\t\t!postContainer\n\t\t\t|| !contentWrapper\n\t\t)\n\t\t{\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tconst\n\t\t\tcontent = contentWrapper.querySelector(selector),\n\t\t\tcontainer = postContainer.querySelector(selector);\n\n\t\tif (container && content)\n\t\t{\n\t\t\treturn Runtime.html(container, content.innerHTML);\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\tinsertPost(params)\n\t{\n\t\tconst\n\t\t\tcontainerNode = document.getElementById(this.nodeId.feedContainer),\n\t\t\tcontent = params.content,\n\t\t\tlogId = params.logId,\n\t\t\tqueueKey = params.queueKey,\n\t\t\taction = params.action;\n\n\t\tif (\n\t\t\t!Type.isDomNode(containerNode)\n\t\t\t|| !Type.isStringFilled(content)\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === 'update')\n\t\t{\n\t\t\tlet postContainer = document.getElementById('lenta_item_' + logId);\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\tpostContainer = document.getElementById('lenta_item');\n\t\t\t}\n\n\t\t\tif (!postContainer)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst matches = this.pageId.match(/^detail_(\\d+)/i);\n\t\t\tif (\n\t\t\t\tmatches\n\t\t\t\t&& logId != matches[1]\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst contentWrapper = postContainer.appendChild(document.createElement('div'));\n\t\t\tcontentWrapper.style.display = 'none';\n\t\t\tRuntime.html(contentWrapper, content);\n\n\t\t\tif (postContainer.id === 'lenta_item') // empty detail\n\t\t\t{\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemTop}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemPostBlock}`).then(() => {\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemAttachedFileWrap}`).then(() => {\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrap}`);\n\t\t\t\tthis.processDetailBlock(postContainer, contentWrapper, `.${this.class.postItemInformWrapTree}`);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tpostContainer = postContainer.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tconst contentPostItemTopWrap = contentWrapper.querySelector(`div.${this.class.postItemTopWrap}`);\n\n\t\t\t\tRuntime.html(postContainer, contentPostItemTopWrap.innerHTML).then(() => {\n\t\t\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tcontentWrapper.remove();\n\t\t}\n\t\telse if (action === 'add')\n\t\t{\n\t\t\tthis.setNewPostContainer(Tag.render`<div class=\"${this.class.postNewContainerTransformNew} ${this.class.postLazyLoadCheck}\" ontransitionend=\"${this.handleInsertPostTransitionEnd.bind(this)}\"></div>`);\n\t\t\tDom.prepend(this.getNewPostContainer(), containerNode);\n\t\t\tUtils.htmlWithInlineJS(this.getNewPostContainer(), content).then(() => {\n\t\t\t\tconst\n\t\t\t\t\tpostNode = this.getNewPostContainer().querySelector(`div.${this.class.post}`);\n\n\t\t\t\tDom.style(this.getNewPostContainer(), 'height', `${postNode.scrollHeight + 15/*margin-bottom*/}px`);\n\t\t\t});\n\t\t}\n\n\t\tPublicationQueueInstance.emit('onPostInserted', new Event.BaseEvent({\n\t\t\tdata: {\n\t\t\t\tkey: queueKey\n\t\t\t}\n\t\t}));\n\t}\n\n\thandleInsertPostTransitionEnd(event)\n\t{\n\t\tif (event.propertyName === 'height')\n\t\t{\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransformNew);\n\t\t\tthis.getNewPostContainer().classList.remove(this.class.postNewContainerTransform);\n\t\t\tDom.style(this.getNewPostContainer(), 'height', null);\n\n\t\t\tthis.recalcMaxScroll();\n\t\t\tBitrixMobile.LazyLoad.showImages();\n\t\t}\n\t}\n\n\tonLazyLoadImageLoaded(event)\n\t{\n\t\tthis.recalcMaxScroll();\n\n\t\tconst [ imageNode ] = event.getData();\n\t\tif (imageNode)\n\t\t{\n\t\t\tconst postCheckNode = imageNode.closest('.' + this.class.postLazyLoadCheck);\n\t\t\tif (postCheckNode)\n\t\t\t{\n\t\t\t\tconst\n\t\t\t\t\tpostNode = postCheckNode.querySelector(`div.${this.class.post}`);\n\n\t\t\t\tif (postNode)\n\t\t\t\t{\n\t\t\t\t\tpostCheckNode.classList.add(this.class.postNewContainerTransform);\n\t\t\t\t\tDom.style(postCheckNode, 'height', `${postNode.scrollHeight}px`);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tpostCheckNode.classList.remove(this.class.postNewContainerTransform);\n\t\t\t\t\t\tDom.style(postCheckNode, 'height', null);\n\t\t\t\t\t}, 500);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcMaxScroll()\n\t{\n\t\tthis.setMaxScroll(document.documentElement.scrollHeight - window.innerHeight - 190);\n\t}\n}\n\n\nconst\n\tInstance = new Feed(),\n\tBalloonNotifierInstance = new BalloonNotifier(),\n\tNotificationBarInstance = new NotificationBar(),\n\tDatabaseUnsentPostInstance = new Database(),\n\tPublicationQueueInstance = new PublicationQueue();\n\nexport {\n\tInstance,\n\tBalloonNotifierInstance,\n\tNotificationBarInstance,\n\tDatabaseUnsentPostInstance,\n\tPublicationQueueInstance\n};"],"names":["BalloonNotifier","classes","show","nodeIdList","notifier","notifierCounter","notifierCounterTitle","refreshNeeded","document","getElementById","refreshNeededBlock","getRefreshNeededNode","classList","add","refreshNeededNode","remove","params","cnt","parseInt","counterValue","cnt_cent","reminder","suffix","Instance","getRefreshNeeded","getNotifierCounterNode","innerHTML","hideRefreshNeededNotifier","getNotifierCounterTitleNode","Loc","getMessage","getNotifierNode","notifierNode","NotificationBar","repo","color","background","error","info","text","filter","notifyBar","forEach","hide","bar","BXMobileApp","UI","message","textColor","useLoader","groupId","align","textAlign","autoHideTimeout","hideOnTap","onTap","id","Math","random","push","maxLines","isGlobal","useCloseButton","Database","tableName","keyName","setTableName","Type","isPlainObject","isStringFilled","setKeyName","value","callback","isObject","app","db","createTable","getTableName","fields","name","unique","success","res","fail","e","check","deleteRows","KEY","getKeyName","data","x","hasOwnProperty","getRows","JSON","stringify","items","length","updateRows","updateFields","VALUE","addRow","insertFields","onEmpty","result","parse","onLoad","PublicationQueue","nodeId","container","class","balloonHidden","balloonFixed","balloonPublished","balloonShow","balloonHide","timeout","init","addCustomEvent","afterSetItem","bind","afterPostAdd","afterPostAddError","afterPostUpdate","afterPostUpdateError","setEventNamespace","subscribe","onFeedLoaded","onPostInserted","Event","onScroll","containerNode","isDomNode","window","pageYOffset","exec","storageId","key","queue","addToTray","drawList","event","removeFromTray","node","drawItem","hideItem","setTimeout","lastElementChild","title","Tag","render","Dom","clean","append","pageId","contentType","getPageId","addSuccess","EventEmitter","Feed","refreshStarted","options","feedContainer","postNewContainerTransformNew","postNewContainerTransform","postLazyLoadCheck","post","postItemTopWrap","postItemTop","postItemPostBlock","postItemAttachedFileWrap","postItemInformWrap","postItemInformWrapTree","newPostContainer","maxScroll","showLoader","hideLoader","scrollTop","onLazyLoadImageLoaded","optionsList","defaultValue","isUndefined","postId","context","DatabaseUnsentPostInstance","delete","getEntryContent","entityType","entityId","queueKey","action","selectedDestinations","a_users","b_groups","oMSL","buildSelectedDestinations","postData","setPostFormParams","selectedRecipients","messageText","POST_MESSAGE","save","showNewPostForm","showPostError","editBlogPost","post_id","isFunction","errorText","NotificationBarInstance","showError","notificationParams","showPopupLoader","hidePopupLoader","scrollTo","logId","BMAjaxWrapper","MobileAjaxWrapper","runComponentAction","mode","signedParameters","getOption","siteTemplateId","BX","then","response","responseLogId","insertPost","content","html","postContainer","contentWrapper","selector","Promise","reject","querySelector","Runtime","matches","match","appendChild","createElement","style","display","processDetailBlock","BitrixMobile","LazyLoad","showImages","contentPostItemTopWrap","setNewPostContainer","handleInsertPostTransitionEnd","prepend","getNewPostContainer","Utils","htmlWithInlineJS","postNode","scrollHeight","PublicationQueueInstance","emit","BaseEvent","propertyName","recalcMaxScroll","getData","imageNode","postCheckNode","closest","setMaxScroll","documentElement","innerHeight","BalloonNotifierInstance"],"mappings":"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"}