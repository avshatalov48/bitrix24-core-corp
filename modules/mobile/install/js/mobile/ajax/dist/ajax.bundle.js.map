{"version":3,"file":"ajax.bundle.js","sources":["../src/ajax.js"],"sourcesContent":["import {Loc, Type, ajax, Event} from \"main.core\";\n\nclass Ajax\n{\n\tconstructor()\n\t{\n\t\tthis.type = null;\n\t\tthis.method = null;\n\t\tthis.url = null;\n\t\tthis.callback = () => {};\n\t\tthis.failure_callback = () => {};\n\t\tthis.progress_callback = null;\n\t\tthis.loadstart_callback = null;\n\t\tthis.loadend_callback = null;\n\t\tthis.offline = null;\n\t\tthis.processData = null;\n\t\tthis.xhr = null;\n\t\tthis.data = null;\n\t\tthis.headers = null;\n\t\tthis.aborted = null;\n\t\tthis.formData = null;\n\t}\n\n\tstatic wrap(params)\n\t{\n\t\tconst instance = new Ajax();\n\t\treturn instance.instanceWrap(params);\n\t}\n\n\tinstanceWrap(params)\n\t{\n\t\tthis.init(params);\n\n\t\tthis.xhr = ajax({\n\t\t\ttimeout: 30,\n\t\t\tstart: this.start,\n\t\t\tpreparePost: this.preparePost,\n\t\t\tmethod: this.method,\n\t\t\tdataType: this.type,\n\t\t\turl: this.url,\n\t\t\tdata: this.data,\n\t\t\theaders: this.headers,\n\t\t\tprocessData: this.processData,\n\t\t\tonsuccess: (response) => {\n\t\t\t\tlet failed = false;\n\n\t\t\t\tif (this.xhr.status === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.failure_callback();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (this.type == 'json')\n\t\t\t\t{\n\t\t\t\t\tfailed = (\n\t\t\t\t\t\tType.isPlainObject(response)\n\t\t\t\t\t\t&& !Type.isNull(response)\n\t\t\t\t\t\t&& Type.isStringFilled(response.status)\n\t\t\t\t\t\t&& response.status === 'failed'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (this.type == 'html')\n\t\t\t\t{\n\t\t\t\t\tfailed = (response == '{\"status\":\"failed\"}');\n\t\t\t\t}\n\n\t\t\t\tif (failed)\n\t\t\t\t{\n\t\t\t\t\tif (!this.aborted)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.repeatRequest();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.callback(response);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonfailure: (errorCode, requestStatus) => {\n\t\t\t\tif (\n\t\t\t\t\tType.isStringFilled(errorCode)\n\t\t\t\t\t&& errorCode === 'status'\n\t\t\t\t\t&& typeof requestStatus !== 'undefined'\n\t\t\t\t\t&& requestStatus == 401\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.repeatRequest();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.failure_callback();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bindHandlers();\n\n\t\tEvent.bind(this.xhr, 'abort', () => {\n\t\t\tthis.aborted = true;\n\t\t});\n\n\t\treturn this.xhr;\n\t};\n\n\tinit(params)\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tthis.type = (params.type !== 'json' ? 'html' : 'json');\n\t\tthis.method = (params.method !== 'POST' ? 'GET' : 'POST');\n\t\tthis.url = params.url;\n\t\tthis.data = params.data;\n\t\tthis.headers = (typeof params.headers !== 'undefined' ? params.headers : []);\n\t\tthis.processData = (Type.isBoolean(params.processData) ? params.processData : true);\n\t\tthis.start = params.start;\n\t\tthis.preparePost = params.preparePost;\n\t\tthis.callback = params.callback;\n\n\t\tif (Type.isFunction(params.callback_failure))\n\t\t{\n\t\t\tthis.failure_callback = params.callback_failure;\n\t\t}\n\t\tif (Type.isFunction(params.callback_progress))\n\t\t{\n\t\t\tthis.progress_callback = params.callback_progress;\n\t\t}\n\t\tif (Type.isFunction(params.callback_loadstart))\n\t\t{\n\t\t\tthis.loadstart_callback = params.callback_loadstart;\n\t\t}\n\t\tif (Type.isFunction(params.callback_loadend))\n\t\t{\n\t\t\tthis.loadend_callback = params.callback_loadend;\n\t\t}\n\t\tif (typeof params.formData !== 'undefined')\n\t\t{\n\t\t\tthis.formData = params.formData;\n\t\t}\n\t}\n\n\tstatic runComponentAction(component, action, config, callbacks)\n\t{\n\t\tconst instance = new Ajax();\n\t\treturn instance.instanceRunComponentAction(component, action, config, callbacks);\n\t}\n\n\tinstanceRunComponentAction(component, action, config, callbacks)\n\t{\n\t\tif (!Type.isPlainObject(callbacks))\n\t\t{\n\t\t\tcallbacks = {};\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconfig.onrequeststart = (requestXhr) => {\n\t\t\t\tthis.xhr = requestXhr;\n\t\t\t};\n\n\t\t\tajax.runComponentAction(component, action, config).then((response) => {\n\t\t\t\tif (Type.isFunction(callbacks.success))\n\t\t\t\t{\n\t\t\t\t\tcallbacks.success(response);\n\t\t\t\t}\n\t\t\t\tresolve(response);\n\t\t\t}, (response) => {\n\t\t\t\tif (this.xhr.status == 401)\n\t\t\t\t{\n\t\t\t\t\tthis.repeatComponentAction(component, action, config, callbacks);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t{\n\t\t\t\t\t\tcallbacks.failure(response);\n\t\t\t\t\t}\n\t\t\t\t\treject(response)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindHandlers();\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\trepeatComponentAction(component, action, config, callbacks)\n\t{\n\t\tif (!Type.isPlainObject(callbacks))\n\t\t{\n\t\t\tcallbacks = {};\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapp.BasicAuth({\n\t\t\t\tsuccess: (auth_data) => {\n\t\t\t\t\tajax.runComponentAction(component, action, config).then((response) => {\n\t\t\t\t\t\tif (Type.isFunction(callbacks.success))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallbacks.success(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}, (response) => {\n\t\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallbacks.failure(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfailture: () => {\n\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t{\n\t\t\t\t\t\tcallbacks.failure();\n\t\t\t\t\t}\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic runAction(action, config, callbacks)\n\t{\n\t\tconst instance = new Ajax();\n\t\treturn instance.instanceRunAction(action, config, callbacks);\n\t}\n\n\tinstanceRunAction(action, config, callbacks)\n\t{\n\t\tif (!Type.isPlainObject(callbacks))\n\t\t{\n\t\t\tcallbacks = {};\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconfig.onrequeststart = (requestXhr) => {\n\t\t\t\tthis.xhr = requestXhr;\n\t\t\t};\n\n\t\t\tajax.runAction(action, config).then((response) => {\n\t\t\t\tif (Type.isFunction(callbacks.success))\n\t\t\t\t{\n\t\t\t\t\tcallbacks.success(response);\n\t\t\t\t}\n\t\t\t\tresolve(response);\n\t\t\t}, (response) => {\n\t\t\t\tif (this.xhr.status == 401)\n\t\t\t\t{\n\t\t\t\t\treturn this.repeatAction(action, config, callbacks);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t{\n\t\t\t\t\t\tcallbacks.failure(response);\n\t\t\t\t\t}\n\t\t\t\t\treject(response)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindHandlers();\n\t\t});\n\t}\n\n\trepeatAction(action, config, callbacks)\n\t{\n\t\tif (!Type.isPlainObject(callbacks))\n\t\t{\n\t\t\tcallbacks = {};\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tapp.BasicAuth({\n\t\t\t\tsuccess: (auth_data) => {\n\t\t\t\t\tajax.runAction(action, config).then((response) => {\n\t\t\t\t\t\tif (Type.isFunction(callbacks.success))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallbacks.success(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}, (response) => {\n\t\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcallbacks.failure(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tfailture: () => {\n\t\t\t\t\tif (Type.isFunction(callbacks.failure))\n\t\t\t\t\t{\n\t\t\t\t\t\tcallbacks.failure();\n\t\t\t\t\t}\n\t\t\t\t\treject();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\trepeatRequest()\n\t{\n\t\tapp.BasicAuth({\n\t\t\tsuccess: (auth_data) => {\n\t\t\t\tthis.data.sessid = auth_data.sessid_md5;\n\n\t\t\t\tif (\n\t\t\t\t\tthis.formData !== null\n\t\t\t\t\t&& this.formData.get('sessid') !== null\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.formData.set('sessid', auth_data.sessid_md5);\n\t\t\t\t}\n\n\t\t\t\tthis.xhr = ajax({\n\t\t\t\t\ttimeout: 30,\n\t\t\t\t\tpreparePost: this.preparePost,\n\t\t\t\t\tstart: this.start,\n\t\t\t\t\tmethod: this.method,\n\t\t\t\t\tdataType: this.type,\n\t\t\t\t\turl: this.url,\n\t\t\t\t\tdata: this.data,\n\t\t\t\t\tonsuccess: (response_ii) => {\n\t\t\t\t\t\tlet failed = false;\n\n\t\t\t\t\t\tif (this.xhr.status === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfailed = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.type === 'json')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfailed = (\n\t\t\t\t\t\t\t\tType.isPlainObject(response_ii)\n\t\t\t\t\t\t\t\t&& Type.isStringFilled(response_ii.status)\n\t\t\t\t\t\t\t\t&& response_ii.status === 'failed'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (this.type === 'html')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfailed = (response_ii == '{\"status\":\"failed\"}');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (failed)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.failure_callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.callback(response_ii);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonfailure: (response) => {\n\t\t\t\t\t\tthis.failure_callback();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (\n\t\t\t\t\t!this.start\n\t\t\t\t\t&& this.formData !== null\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.xhr.send(this.formData);\n\t\t\t\t}\n\t\t\t},\n\t\t\tfailture: () => {\n\t\t\t\tthis.failure_callback();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tbindHandlers()\n\t{\n\t\tif (Type.isFunction(this.progress_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'progress', this.progress_callback);\n\t\t}\n\t\tif (Type.isFunction(this.load_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'load', this.load_callback);\n\t\t}\n\t\tif (Type.isFunction(this.loadstart_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'loadstart', this.loadstart_callback);\n\t\t}\n\t\tif (Type.isFunction(this.loadend_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'loadend', this.loadend_callback);\n\t\t}\n\t\tif (Type.isFunction(this.error_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'error', this.error_callback);\n\t\t}\n\t\tif (Type.isFunction(this.abort_callback))\n\t\t{\n\t\t\tEvent.bind(this.xhr, 'abort', this.abort_callback);\n\t\t}\n\t}\n}\n\nexport {Ajax};"],"names":["Ajax","type","method","url","callback","failure_callback","progress_callback","loadstart_callback","loadend_callback","offline","processData","xhr","data","headers","aborted","formData","params","init","ajax","timeout","start","preparePost","dataType","onsuccess","response","failed","status","Type","isPlainObject","isNull","isStringFilled","repeatRequest","onfailure","errorCode","requestStatus","bindHandlers","Event","bind","isBoolean","isFunction","callback_failure","callback_progress","callback_loadstart","callback_loadend","component","action","config","callbacks","Promise","resolve","reject","onrequeststart","requestXhr","runComponentAction","then","success","repeatComponentAction","failure","app","BasicAuth","auth_data","failture","runAction","repeatAction","sessid","sessid_md5","get","set","response_ii","send","load_callback","error_callback","abort_callback","instance","instanceWrap","instanceRunComponentAction","instanceRunAction"],"mappings":";;;;KAEMA;CAEL,kBACA;CAAA;CACC,SAAKC,IAAL,GAAY,IAAZ;CACA,SAAKC,MAAL,GAAc,IAAd;CACA,SAAKC,GAAL,GAAW,IAAX;;CACA,SAAKC,QAAL,GAAgB,YAAM,EAAtB;;CACA,SAAKC,gBAAL,GAAwB,YAAM,EAA9B;;CACA,SAAKC,iBAAL,GAAyB,IAAzB;CACA,SAAKC,kBAAL,GAA0B,IAA1B;CACA,SAAKC,gBAAL,GAAwB,IAAxB;CACA,SAAKC,OAAL,GAAe,IAAf;CACA,SAAKC,WAAL,GAAmB,IAAnB;CACA,SAAKC,GAAL,GAAW,IAAX;CACA,SAAKC,IAAL,GAAY,IAAZ;CACA,SAAKC,OAAL,GAAe,IAAf;CACA,SAAKC,OAAL,GAAe,IAAf;CACA,SAAKC,QAAL,GAAgB,IAAhB;CACA;;;;kCAQYC,QACb;CAAA;;CACC,WAAKC,IAAL,CAAUD,MAAV;CAEA,WAAKL,GAAL,GAAWO,cAAI,CAAC;CACfC,QAAAA,OAAO,EAAE,EADM;CAEfC,QAAAA,KAAK,EAAE,KAAKA,KAFG;CAGfC,QAAAA,WAAW,EAAE,KAAKA,WAHH;CAIfnB,QAAAA,MAAM,EAAE,KAAKA,MAJE;CAKfoB,QAAAA,QAAQ,EAAE,KAAKrB,IALA;CAMfE,QAAAA,GAAG,EAAE,KAAKA,GANK;CAOfS,QAAAA,IAAI,EAAE,KAAKA,IAPI;CAQfC,QAAAA,OAAO,EAAE,KAAKA,OARC;CASfH,QAAAA,WAAW,EAAE,KAAKA,WATH;CAUfa,QAAAA,SAAS,EAAE,mBAACC,QAAD,EAAc;CACxB,cAAIC,MAAM,GAAG,KAAb;;CAEA,cAAI,KAAI,CAACd,GAAL,CAASe,MAAT,KAAoB,CAAxB,EACA;CACC,YAAA,KAAI,CAACrB,gBAAL;;CACA;CACA,WAJD,MAKK,IAAI,KAAI,CAACJ,IAAL,IAAa,MAAjB,EACL;CACCwB,YAAAA,MAAM,GACLE,cAAI,CAACC,aAAL,CAAmBJ,QAAnB,KACG,CAACG,cAAI,CAACE,MAAL,CAAYL,QAAZ,CADJ,IAEGG,cAAI,CAACG,cAAL,CAAoBN,QAAQ,CAACE,MAA7B,CAFH,IAGGF,QAAQ,CAACE,MAAT,KAAoB,QAJxB;CAMA,WARI,MASA,IAAI,KAAI,CAACzB,IAAL,IAAa,MAAjB,EACL;CACCwB,YAAAA,MAAM,GAAID,QAAQ,IAAI,qBAAtB;CACA;;CAED,cAAIC,MAAJ,EACA;CACC,gBAAI,CAAC,KAAI,CAACX,OAAV,EACA;CACC,cAAA,KAAI,CAACiB,aAAL;CACA;CACD,WAND,MAQA;CACC,YAAA,KAAI,CAAC3B,QAAL,CAAcoB,QAAd;CACA;CACD,SA3Cc;CA4CfQ,QAAAA,SAAS,EAAE,mBAACC,SAAD,EAAYC,aAAZ,EAA8B;CACxC,cACCP,cAAI,CAACG,cAAL,CAAoBG,SAApB,KACGA,SAAS,KAAK,QADjB,IAEG,OAAOC,aAAP,KAAyB,WAF5B,IAGGA,aAAa,IAAI,GAJrB,EAMA;CACC,YAAA,KAAI,CAACH,aAAL;CACA,WARD,MAUA;CACC,YAAA,KAAI,CAAC1B,gBAAL;CACA;CACD;CA1Dc,OAAD,CAAf;CA6DA,WAAK8B,YAAL;CAEAC,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,OAArB,EAA8B,YAAM;CACnC,QAAA,KAAI,CAACG,OAAL,GAAe,IAAf;CACA,OAFD;CAIA,aAAO,KAAKH,GAAZ;CACA;;;0BAEIK,QACL;CACC,UAAI,CAACW,cAAI,CAACC,aAAL,CAAmBZ,MAAnB,CAAL,EACA;CACCA,QAAAA,MAAM,GAAG,EAAT;CACA;;CAED,WAAKf,IAAL,GAAae,MAAM,CAACf,IAAP,KAAgB,MAAhB,GAAyB,MAAzB,GAAkC,MAA/C;CACA,WAAKC,MAAL,GAAec,MAAM,CAACd,MAAP,KAAkB,MAAlB,GAA2B,KAA3B,GAAmC,MAAlD;CACA,WAAKC,GAAL,GAAWa,MAAM,CAACb,GAAlB;CACA,WAAKS,IAAL,GAAYI,MAAM,CAACJ,IAAnB;CACA,WAAKC,OAAL,GAAgB,OAAOG,MAAM,CAACH,OAAd,KAA0B,WAA1B,GAAwCG,MAAM,CAACH,OAA/C,GAAyD,EAAzE;CACA,WAAKH,WAAL,GAAoBiB,cAAI,CAACW,SAAL,CAAetB,MAAM,CAACN,WAAtB,IAAqCM,MAAM,CAACN,WAA5C,GAA0D,IAA9E;CACA,WAAKU,KAAL,GAAaJ,MAAM,CAACI,KAApB;CACA,WAAKC,WAAL,GAAmBL,MAAM,CAACK,WAA1B;CACA,WAAKjB,QAAL,GAAgBY,MAAM,CAACZ,QAAvB;;CAEA,UAAIuB,cAAI,CAACY,UAAL,CAAgBvB,MAAM,CAACwB,gBAAvB,CAAJ,EACA;CACC,aAAKnC,gBAAL,GAAwBW,MAAM,CAACwB,gBAA/B;CACA;;CACD,UAAIb,cAAI,CAACY,UAAL,CAAgBvB,MAAM,CAACyB,iBAAvB,CAAJ,EACA;CACC,aAAKnC,iBAAL,GAAyBU,MAAM,CAACyB,iBAAhC;CACA;;CACD,UAAId,cAAI,CAACY,UAAL,CAAgBvB,MAAM,CAAC0B,kBAAvB,CAAJ,EACA;CACC,aAAKnC,kBAAL,GAA0BS,MAAM,CAAC0B,kBAAjC;CACA;;CACD,UAAIf,cAAI,CAACY,UAAL,CAAgBvB,MAAM,CAAC2B,gBAAvB,CAAJ,EACA;CACC,aAAKnC,gBAAL,GAAwBQ,MAAM,CAAC2B,gBAA/B;CACA;;CACD,UAAI,OAAO3B,MAAM,CAACD,QAAd,KAA2B,WAA/B,EACA;CACC,aAAKA,QAAL,GAAgBC,MAAM,CAACD,QAAvB;CACA;CACD;;;gDAQ0B6B,WAAWC,QAAQC,QAAQC,WACtD;CAAA;;CACC,UAAI,CAACpB,cAAI,CAACC,aAAL,CAAmBmB,SAAnB,CAAL,EACA;CACCA,QAAAA,SAAS,GAAG,EAAZ;CACA;;CAED,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCJ,QAAAA,MAAM,CAACK,cAAP,GAAwB,UAACC,UAAD,EAAgB;CACvC,UAAA,MAAI,CAACzC,GAAL,GAAWyC,UAAX;CACA,SAFD;;CAIAlC,QAAAA,cAAI,CAACmC,kBAAL,CAAwBT,SAAxB,EAAmCC,MAAnC,EAA2CC,MAA3C,EAAmDQ,IAAnD,CAAwD,UAAC9B,QAAD,EAAc;CACrE,cAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACQ,OAA1B,CAAJ,EACA;CACCR,YAAAA,SAAS,CAACQ,OAAV,CAAkB/B,QAAlB;CACA;;CACDyB,UAAAA,OAAO,CAACzB,QAAD,CAAP;CACA,SAND,EAMG,UAACA,QAAD,EAAc;CAChB,cAAI,MAAI,CAACb,GAAL,CAASe,MAAT,IAAmB,GAAvB,EACA;CACC,YAAA,MAAI,CAAC8B,qBAAL,CAA2BZ,SAA3B,EAAsCC,MAAtC,EAA8CC,MAA9C,EAAsDC,SAAtD;CACA,WAHD,MAKA;CACC,gBAAIpB,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,cAAAA,SAAS,CAACU,OAAV,CAAkBjC,QAAlB;CACA;;CACD0B,YAAAA,MAAM,CAAC1B,QAAD,CAAN;CACA;CACD,SAnBD;;CAqBA,QAAA,MAAI,CAACW,YAAL;CACA,OA3BM,CAAP;CA4BA;CAED;CACD;CACA;;;;2CACuBS,WAAWC,QAAQC,QAAQC,WACjD;CACC,UAAI,CAACpB,cAAI,CAACC,aAAL,CAAmBmB,SAAnB,CAAL,EACA;CACCA,QAAAA,SAAS,GAAG,EAAZ;CACA;;CAED,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCQ,QAAAA,GAAG,CAACC,SAAJ,CAAc;CACbJ,UAAAA,OAAO,EAAE,iBAACK,SAAD,EAAe;CACvB1C,YAAAA,cAAI,CAACmC,kBAAL,CAAwBT,SAAxB,EAAmCC,MAAnC,EAA2CC,MAA3C,EAAmDQ,IAAnD,CAAwD,UAAC9B,QAAD,EAAc;CACrE,kBAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACQ,OAA1B,CAAJ,EACA;CACCR,gBAAAA,SAAS,CAACQ,OAAV,CAAkB/B,QAAlB;CACA;;CACDyB,cAAAA,OAAO,CAACzB,QAAD,CAAP;CACA,aAND,EAMG,UAACA,QAAD,EAAc;CAChB,kBAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,gBAAAA,SAAS,CAACU,OAAV,CAAkBjC,QAAlB;CACA;;CACD0B,cAAAA,MAAM,CAAC1B,QAAD,CAAN;CACA,aAZD;CAaA,WAfY;CAgBbqC,UAAAA,QAAQ,EAAE,oBAAM;CACf,gBAAIlC,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,cAAAA,SAAS,CAACU,OAAV;CACA;;CACDP,YAAAA,MAAM;CACN;CAtBY,SAAd;CAwBA,OAzBM,CAAP;CA0BA;;;uCAQiBL,QAAQC,QAAQC,WAClC;CAAA;;CACC,UAAI,CAACpB,cAAI,CAACC,aAAL,CAAmBmB,SAAnB,CAAL,EACA;CACCA,QAAAA,SAAS,GAAG,EAAZ;CACA;;CAED,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCJ,QAAAA,MAAM,CAACK,cAAP,GAAwB,UAACC,UAAD,EAAgB;CACvC,UAAA,MAAI,CAACzC,GAAL,GAAWyC,UAAX;CACA,SAFD;;CAIAlC,QAAAA,cAAI,CAAC4C,SAAL,CAAejB,MAAf,EAAuBC,MAAvB,EAA+BQ,IAA/B,CAAoC,UAAC9B,QAAD,EAAc;CACjD,cAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACQ,OAA1B,CAAJ,EACA;CACCR,YAAAA,SAAS,CAACQ,OAAV,CAAkB/B,QAAlB;CACA;;CACDyB,UAAAA,OAAO,CAACzB,QAAD,CAAP;CACA,SAND,EAMG,UAACA,QAAD,EAAc;CAChB,cAAI,MAAI,CAACb,GAAL,CAASe,MAAT,IAAmB,GAAvB,EACA;CACC,mBAAO,MAAI,CAACqC,YAAL,CAAkBlB,MAAlB,EAA0BC,MAA1B,EAAkCC,SAAlC,CAAP;CACA,WAHD,MAKA;CACC,gBAAIpB,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,cAAAA,SAAS,CAACU,OAAV,CAAkBjC,QAAlB;CACA;;CACD0B,YAAAA,MAAM,CAAC1B,QAAD,CAAN;CACA;CACD,SAnBD;;CAqBA,QAAA,MAAI,CAACW,YAAL;CACA,OA3BM,CAAP;CA4BA;;;kCAEYU,QAAQC,QAAQC,WAC7B;CACC,UAAI,CAACpB,cAAI,CAACC,aAAL,CAAmBmB,SAAnB,CAAL,EACA;CACCA,QAAAA,SAAS,GAAG,EAAZ;CACA;;CAED,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCQ,QAAAA,GAAG,CAACC,SAAJ,CAAc;CACbJ,UAAAA,OAAO,EAAE,iBAACK,SAAD,EAAe;CACvB1C,YAAAA,cAAI,CAAC4C,SAAL,CAAejB,MAAf,EAAuBC,MAAvB,EAA+BQ,IAA/B,CAAoC,UAAC9B,QAAD,EAAc;CACjD,kBAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACQ,OAA1B,CAAJ,EACA;CACCR,gBAAAA,SAAS,CAACQ,OAAV,CAAkB/B,QAAlB;CACA;;CACDyB,cAAAA,OAAO,CAACzB,QAAD,CAAP;CACA,aAND,EAMG,UAACA,QAAD,EAAc;CAChB,kBAAIG,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,gBAAAA,SAAS,CAACU,OAAV,CAAkBjC,QAAlB;CACA;;CACD0B,cAAAA,MAAM,CAAC1B,QAAD,CAAN;CACA,aAZD;CAaA,WAfY;CAgBbqC,UAAAA,QAAQ,EAAE,oBAAM;CACf,gBAAIlC,cAAI,CAACY,UAAL,CAAgBQ,SAAS,CAACU,OAA1B,CAAJ,EACA;CACCV,cAAAA,SAAS,CAACU,OAAV;CACA;;CACDP,YAAAA,MAAM;CACN;CAtBY,SAAd;CAwBA,OAzBM,CAAP;CA0BA;;;qCAGD;CAAA;;CACCQ,MAAAA,GAAG,CAACC,SAAJ,CAAc;CACbJ,QAAAA,OAAO,EAAE,iBAACK,SAAD,EAAe;CACvB,UAAA,MAAI,CAAChD,IAAL,CAAUoD,MAAV,GAAmBJ,SAAS,CAACK,UAA7B;;CAEA,cACC,MAAI,CAAClD,QAAL,KAAkB,IAAlB,IACG,MAAI,CAACA,QAAL,CAAcmD,GAAd,CAAkB,QAAlB,MAAgC,IAFpC,EAIA;CACC,YAAA,MAAI,CAACnD,QAAL,CAAcoD,GAAd,CAAkB,QAAlB,EAA4BP,SAAS,CAACK,UAAtC;CACA;;CAED,UAAA,MAAI,CAACtD,GAAL,GAAWO,cAAI,CAAC;CACfC,YAAAA,OAAO,EAAE,EADM;CAEfE,YAAAA,WAAW,EAAE,MAAI,CAACA,WAFH;CAGfD,YAAAA,KAAK,EAAE,MAAI,CAACA,KAHG;CAIflB,YAAAA,MAAM,EAAE,MAAI,CAACA,MAJE;CAKfoB,YAAAA,QAAQ,EAAE,MAAI,CAACrB,IALA;CAMfE,YAAAA,GAAG,EAAE,MAAI,CAACA,GANK;CAOfS,YAAAA,IAAI,EAAE,MAAI,CAACA,IAPI;CAQfW,YAAAA,SAAS,EAAE,mBAAC6C,WAAD,EAAiB;CAC3B,kBAAI3C,MAAM,GAAG,KAAb;;CAEA,kBAAI,MAAI,CAACd,GAAL,CAASe,MAAT,KAAoB,CAAxB,EACA;CACCD,gBAAAA,MAAM,GAAG,IAAT;CACA,eAHD,MAIK,IAAI,MAAI,CAACxB,IAAL,KAAc,MAAlB,EACL;CACCwB,gBAAAA,MAAM,GACLE,cAAI,CAACC,aAAL,CAAmBwC,WAAnB,KACGzC,cAAI,CAACG,cAAL,CAAoBsC,WAAW,CAAC1C,MAAhC,CADH,IAEG0C,WAAW,CAAC1C,MAAZ,KAAuB,QAH3B;CAKA,eAPI,MAQA,IAAI,MAAI,CAACzB,IAAL,KAAc,MAAlB,EACL;CACCwB,gBAAAA,MAAM,GAAI2C,WAAW,IAAI,qBAAzB;CACA;;CAED,kBAAI3C,MAAJ,EACA;CACC,gBAAA,MAAI,CAACpB,gBAAL;CACA,eAHD,MAKA;CACC,gBAAA,MAAI,CAACD,QAAL,CAAcgE,WAAd;CACA;CACD,aApCc;CAqCfpC,YAAAA,SAAS,EAAE,mBAACR,QAAD,EAAc;CACxB,cAAA,MAAI,CAACnB,gBAAL;CACA;CAvCc,WAAD,CAAf;;CA0CA,cACC,CAAC,MAAI,CAACe,KAAN,IACG,MAAI,CAACL,QAAL,KAAkB,IAFtB,EAIA;CACC,YAAA,MAAI,CAACJ,GAAL,CAAS0D,IAAT,CAAc,MAAI,CAACtD,QAAnB;CACA;CACD,SA7DY;CA8Db8C,QAAAA,QAAQ,EAAE,oBAAM;CACf,UAAA,MAAI,CAACxD,gBAAL;CACA;CAhEY,OAAd;CAkEA;CAED;CACD;CACA;;;;oCAEC;CACC,UAAIsB,cAAI,CAACY,UAAL,CAAgB,KAAKjC,iBAArB,CAAJ,EACA;CACC8B,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,UAArB,EAAiC,KAAKL,iBAAtC;CACA;;CACD,UAAIqB,cAAI,CAACY,UAAL,CAAgB,KAAK+B,aAArB,CAAJ,EACA;CACClC,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,MAArB,EAA6B,KAAK2D,aAAlC;CACA;;CACD,UAAI3C,cAAI,CAACY,UAAL,CAAgB,KAAKhC,kBAArB,CAAJ,EACA;CACC6B,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,WAArB,EAAkC,KAAKJ,kBAAvC;CACA;;CACD,UAAIoB,cAAI,CAACY,UAAL,CAAgB,KAAK/B,gBAArB,CAAJ,EACA;CACC4B,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,SAArB,EAAgC,KAAKH,gBAArC;CACA;;CACD,UAAImB,cAAI,CAACY,UAAL,CAAgB,KAAKgC,cAArB,CAAJ,EACA;CACCnC,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,OAArB,EAA8B,KAAK4D,cAAnC;CACA;;CACD,UAAI5C,cAAI,CAACY,UAAL,CAAgB,KAAKiC,cAArB,CAAJ,EACA;CACCpC,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAK1B,GAAhB,EAAqB,OAArB,EAA8B,KAAK6D,cAAnC;CACA;CACD;;;0BAzXWxD,QACZ;CACC,UAAMyD,QAAQ,GAAG,IAAIzE,IAAJ,EAAjB;CACA,aAAOyE,QAAQ,CAACC,YAAT,CAAsB1D,MAAtB,CAAP;CACA;;;wCAmHyB4B,WAAWC,QAAQC,QAAQC,WACrD;CACC,UAAM0B,QAAQ,GAAG,IAAIzE,IAAJ,EAAjB;CACA,aAAOyE,QAAQ,CAACE,0BAAT,CAAoC/B,SAApC,EAA+CC,MAA/C,EAAuDC,MAAvD,EAA+DC,SAA/D,CAAP;CACA;;;+BA6EgBF,QAAQC,QAAQC,WACjC;CACC,UAAM0B,QAAQ,GAAG,IAAIzE,IAAJ,EAAjB;CACA,aAAOyE,QAAQ,CAACG,iBAAT,CAA2B/B,MAA3B,EAAmCC,MAAnC,EAA2CC,SAA3C,CAAP;CACA;;;;;;;;;;;"}