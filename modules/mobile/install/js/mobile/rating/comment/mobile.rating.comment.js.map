{"version":3,"file":"mobile.rating.comment.js","sources":["src/likecomments.js","src/index.js"],"sourcesContent":["import { Type, Dom, Loc, Uri, ajax } from 'main.core';\n\nexport class MobileCommentsRatingLike\n{\n\tstatic repo = new Map();\n\n\tconstructor(likeId, entityTypeId, entityId, available)\n\t{\n\t\tthis.likeId = likeId;\n\t\tthis.entityTypeId = entityTypeId;\n\t\tthis.entityId = entityId;\n\t\tthis.available = (available === 'Y');\n\t\tthis.likeTimeout = false;\n\t\tthis.enabled = this.init();\n\n\t\tMobileCommentsRatingLike.setInstance(\n\t\t\tlikeId,\n\t\t\tthis\n\t\t);\n\t}\n\n\tstatic setInstance(likeId: string, likeInstance)\n\t{\n\t\tthis.repo.set(likeId, likeInstance);\n\t\twindow.BXRLC[likeId] = likeInstance;\n\t}\n\n\tstatic getById(likeId: string)\n\t{\n\t\treturn this.getInstance(likeId);\n\t}\n\n\tstatic getInstance(likeId: string)\n\t{\n\t\treturn this.repo.get(likeId);\n\t}\n\n\tstatic List(likeId: string)\n\t{\n\t\tconst instance = this.getInstance(likeId);\n\t\tif (!instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.list();\n\t}\n\n\tinit()\n\t{\n\t\tthis.box = BX('bx-ilike-button-' + this.likeId);\n\t\tif (!this.box)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tBXMobileApp.addCustomEvent('onPull-main', (data) => {\n\t\t\tif (data.command !== 'rating_vote')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar p = data.params;\n\t\t\tif (((p.USER_ID + '') != (BX.message('USER_ID') + '')) &&\n\t\t\t\tthis.entityTypeId == p.ENTITY_TYPE_ID && this.entityId == p.ENTITY_ID)\n\t\t\t{\n\t\t\t\tthis.someoneVote((p.TYPE == 'ADD'), p.TOTAL_POSITIVE_VOTES);\n\t\t\t}\n\t\t});\n\n\t\tthis.voted = BX.hasClass(this.box, 'post-comment-likes-liked');\n\t\tBX.bind(this.box, 'click', BX.proxy(this.vote, this));\n\n\t\tthis.countText = BX('bx-ilike-count-' + this.likeId);\n\t\tBX.bind(this.countText, 'click', BX.proxy(this.list, this));\n\n\t\treturn true;\n\t}\n\n\tvote(e)\n\t{\n\t\tclearTimeout(this.likeTimeout);\n\t\tif (BX.type.isBoolean(e) && this.voted == e)\n\t\t\treturn false;\n\n\t\tvar counterValue = BX.type.isNotEmptyString(this.countText.innerHTML) ? parseInt(this.countText.innerHTML) : 0,\n\t\t\tnewValue;\n\n\t\tnewValue = this.voted = (BX.type.isBoolean(e) ? e : !this.voted);\n\n\t\tif (this.voted)\n\t\t{\n\t\t\tthis.countText.innerHTML = counterValue + 1;\n\t\t\tBX.addClass(this.box, 'post-comment-likes-liked');\n\t\t\tBX.removeClass(this.box, 'post-comment-likes');\n\n\t\t\tvar likeNode = BX.clone(this.box);\n\t\t\tvar box = this.box;\n\n\t\t\tBX.adjust(box.parentNode, { style: { position: 'relative' } });\n\t\t\tBX.adjust(likeNode, {\n\t\t\t\tattrs: {\n\t\t\t\t\tid: 'bx-ilike-button-animation'\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tminWidth: 0\n\t\t\t\t} });\n\t\t\tBX.adjust(box, { style: { visibility: 'hidden' } });\n\n\t\t\tbox.parentNode.insertBefore(likeNode, box);\n\n\t\t\tnew BX.easing({\n\t\t\t\tduration: 120,\n\t\t\t\tstart: { scale: 100 },\n\t\t\t\tfinish: { scale: 130 },\n\t\t\t\ttransition : BX.easing.transitions.quad,\n\t\t\t\tstep: function(state) {\n\t\t\t\t\tlikeNode.style.transform = \"scale(\" + state.scale / 100 + \")\";\n\t\t\t\t},\n\t\t\t\tcomplete: function() {\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 120,\n\t\t\t\t\t\tstart: { scale: 130 },\n\t\t\t\t\t\tfinish: { scale: 100 },\n\t\t\t\t\t\ttransition : BX.easing.transitions.quad,\n\t\t\t\t\t\tstep: function(state) {\n\t\t\t\t\t\t\tlikeNode.style.transform = \"scale(\" + state.scale / 100 + \")\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: function() {\n\t\t\t\t\t\t\tlikeNode.parentNode.removeChild(likeNode);\n\t\t\t\t\t\t\tBX.adjust(box, { style: { visibility: 'visible' } });\n\t\t\t\t\t\t\tBX.adjust(box.parentNode, { style: { position: 'static' } });\n\t\t\t\t\t\t}\n\t\t\t\t\t}).animate();\n\t\t\t\t}\n\t\t\t}).animate();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.countText.innerHTML = counterValue - 1;\n\t\t\tBX.addClass(this.box, 'post-comment-likes');\n\t\t\tBX.removeClass(this.box, 'post-comment-likes-liked');\n\t\t}\n\t\tif (BX.type.isBoolean(e))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.likeTimeout = setTimeout(BX.proxy(function() { this.send(newValue); }, this), 1000);\n\t\t\tBX.eventCancelBubble(e);\n\t\t\treturn BX.PreventDefault(e);\n\t\t}\n\t}\n\n\tsend(voteAction)\n\t{\n\t\tvar BMAjaxWrapper = new window.MobileAjaxWrapper();\n\t\tBMAjaxWrapper.Wrap({\n\t\t\ttype: 'json',\n\t\t\tmethod: 'POST',\n\t\t\turl: BX.message('SITE_DIR') + 'mobile/ajax.php?mobile_action=like',\n\t\t\tdata: {\n\t\t\t\tRATING_VOTE: 'Y',\n\t\t\t\tRATING_VOTE_TYPE_ID: this.entityTypeId,\n\t\t\t\tRATING_VOTE_ENTITY_ID: this.entityId,\n\t\t\t\tRATING_VOTE_ACTION: (voteAction === true ? 'plus' : 'cancel'),\n\t\t\t\tsessid: BX.bitrix_sessid()\n\t\t\t},\n\t\t\tcallback: BX.proxy(function(data) {\n\t\t\t\tif (\n\t\t\t\t\ttypeof data != 'undefined'\n\t\t\t\t\t&& typeof data.action != 'undefined'\n\t\t\t\t\t&& typeof data.items_all != 'undefined'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.vote((data.action == 'plus'));\n\t\t\t\t\tthis.countText.innerHTML = data.items_all;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tthis.vote(!voteAction);\n\t\t\t}, this),\n\t\t\tcallback_failure: BX.proxy(function() { this.vote(!voteAction); }, this)\n\t\t});\n\t}\n\n\tsomeoneVote(vote, votes)\n\t{\n\t\tthis.countText.innerHTML = votes;\n\t\tif (votes > 1 || (votes == 1 && !this.voted))\n\t\t{\n\t\t\tBX.addClass(this.box, 'post-comment-liked');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(this.box, 'post-comment-liked');\n\t\t}\n\t}\n\n\tlist(e)\n\t{\n\t\tif (window[\"app\"])\n\t\t{\n\t\t\tvar pathToUserProfile = (\n\t\t\t\tBX.message('RVPathToUserProfile')\n\t\t\t\t\t? BX.message('RVPathToUserProfile')\n\t\t\t\t\t: BX.message('RVCPathToUserProfile')\n\t\t\t);\n\n\t\t\twindow.app.openTable({\n\t\t\t\tcallback: function() {},\n\t\t\t\turl: (BX.message('MobileSiteDir') ? BX.message('MobileSiteDir') : '/') + 'mobile/index.php?mobile_action=get_likes&RATING_VOTE_TYPE_ID=' + this.entityTypeId + '&RATING_VOTE_ENTITY_ID=' + this.entityId + '&URL=' + pathToUserProfile,\n\t\t\t\tmarkmode: false,\n\t\t\t\tshowtitle: false,\n\t\t\t\tmodal: false,\n\t\t\t\tcache: false,\n\t\t\t\toutsection: false,\n\t\t\t\tcancelname: BX.message('RVCListBack')\n\t\t\t});\n\t\t}\n\t\treturn BX.PreventDefault(e);\n\t}\n\n\n\n}\n","import { Type } from 'main.core';\n\nimport { MobileCommentsRatingLike } from './likecomments.js';\n\nif (Type.isUndefined(window.BXRLC))\n{\n\twindow.BXRLC = {};\n}\n\nwindow.RatingLikeComments = MobileCommentsRatingLike;\n\nif (\n\t!Type.isUndefined(window.RatingLikeCommentsQueue)\n\t&& window.RatingLikeCommentsQueue.length > 0\n)\n{\n\tlet f;\n\twhile (\n\t\t(f = window.RatingLikeCommentsQueue.pop())\n\t\t&& f\n\t)\n\t{\n\t\tf();\n\t}\n\tdelete window.RatingLikeCommentsQueue;\n}\n"],"names":["MobileCommentsRatingLike","likeId","entityTypeId","entityId","available","likeTimeout","enabled","init","setInstance","box","BX","BXMobileApp","addCustomEvent","data","command","p","params","USER_ID","message","ENTITY_TYPE_ID","ENTITY_ID","someoneVote","TYPE","TOTAL_POSITIVE_VOTES","voted","hasClass","bind","proxy","vote","countText","list","e","clearTimeout","type","isBoolean","counterValue","isNotEmptyString","innerHTML","parseInt","newValue","addClass","removeClass","likeNode","clone","adjust","parentNode","style","position","attrs","id","minWidth","visibility","insertBefore","easing","duration","start","scale","finish","transition","transitions","quad","step","state","transform","complete","removeChild","animate","setTimeout","send","eventCancelBubble","PreventDefault","voteAction","BMAjaxWrapper","window","MobileAjaxWrapper","Wrap","method","url","RATING_VOTE","RATING_VOTE_TYPE_ID","RATING_VOTE_ENTITY_ID","RATING_VOTE_ACTION","sessid","bitrix_sessid","callback","action","items_all","callback_failure","votes","pathToUserProfile","app","openTable","markmode","showtitle","modal","cache","outsection","cancelname","likeInstance","repo","set","BXRLC","getInstance","get","instance","Map","Type","isUndefined","RatingLikeComments","RatingLikeCommentsQueue","length","f","pop"],"mappings":"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"}