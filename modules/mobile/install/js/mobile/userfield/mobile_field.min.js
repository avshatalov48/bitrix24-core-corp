(function(){var t=window.BX;var e={fieldNames:[],getInstance:function t(){return this}};t.namespace("BX.Mobile.Field");t.Mobile.Field.prototype={init:function(i){this.gridId=i["gridId"]||"";this.formId=i["formId"]||"";this.formats=i["formats"]||null;this.restrictedMode=i["restrictedMode"];this.name=i["name"]||null;this.repo={formId:{},gridId:{}};if(this.gridId!=""){this.repo["gridId"][this.gridId]=this}if(this.formId!=""){this.repo["formId"][this.formId]=this}this.apply=t.delegate(this.apply,this);var o=i["nodes"]||[],n,s,r=this.initFf(n,arguments);this.bindElements(o,i,r);t.addCustomEvent("onAddMobileUfField",t.delegate(function(i,o){var n=t(i);var s=e.getInstance();var r=n.getAttribute("name");if(!s.fieldNames.includes(r)){s.fieldNames.push(r);if(o==="BX.Mobile.Field.Datetime"){new t.Mobile.Field.Datetime({name:"BX.Mobile.Field.Datetime",nodes:[t(i)],restrictedMode:true,formId:this.formId,gridId:this.gridId})}else if(o==="BX.Mobile.Field.Date"){new t.Mobile.Field.Date({name:"BX.Mobile.Field.Date",nodes:[t(i)],restrictedMode:true,formId:this.formId,gridId:this.gridId})}else if(o==="BX.Mobile.Field.Money"){new t.Mobile.Field.Money({name:"BX.Mobile.Field.Money",nodes:[t(i)],restrictedMode:true,formId:this.formId,gridId:this.gridId})}}},this))},bindElements:function(e,i,o){while((node=e.pop())&&node){if((obj=this.bindElement(t(node)))&&obj){if(i["restrictedMode"]){t.addCustomEvent(obj,"onChange",this.apply)}t.addCustomEvent(obj,"onChange",o)}}},initFf:function(e,i){return t.proxy(function(e,o){var n=[this,o,e];for(var s=2;s<i.length;s++){n.push(i[s])}t.onCustomEvent(this,"onChange",n);window.BXMobileApp.Events.postToComponent("onMobileGridFormDataChange",this.getParamsForMobilePostEvent(o,e),"tasks.view")},this)},cancel:function(e){if(e){t.PreventDefault(e)}t.onCustomEvent(this,"onCancel",[this,t(this.formId)]);return false},click:function(e){if(e){t.PreventDefault(e)}this.save();return false},apply:function(e,i,o){var n={submit:true};t.onCustomEvent(this,"onSubmitForm",[this,t(this.formId),i,n]);window.BXMobileApp.onCustomEvent("onSubmitForm",[this.gridId,this.formId,i?i.id:null],true);if(n.submit!==false){this.submit(true)}},save:function(){var e={submit:true};t.onCustomEvent(this,"onSubmitForm",[this,t(this.formId),null,e]);window.BXMobileApp.onCustomEvent("onSubmitForm",[this.gridId,this.formId,null],true);if(e.submit!==false){this.submit(false)}},submit:function(e){if(!t(this.formId)){return}var i={restricted:"Y",method:t(this.formId).getAttribute("method"),onsuccess:t.proxy(function(){t.onCustomEvent(this,"onSubmitAjaxSuccess",[this,arguments[0]])},this),onfailure:t.proxy(function(){t.onCustomEvent(this,"onSubmitAjaxFailure",[this,arguments[0]])},this),onprogress:t.proxy(function(){t.onCustomEvent(this,"onSubmitAjaxProgress",[this,arguments])},this)};if(e){t.onCustomEvent(this,"onBeforeSubmitAjax",[this,i])}else{i["restricted"]="N";i["onsuccess"]=t.proxy(function(){BXMobileApp.UI.Page.LoadingScreen.hide();t.onCustomEvent(this,"onSubmitFormSuccess",[this,arguments[0]])},this);i["onfailure"]=t.proxy(function(){BXMobileApp.UI.Page.LoadingScreen.hide();t.onCustomEvent(this,"onSubmitFormFailure",[this,arguments[0]])},this);i["onprogress"]=t.proxy(function(){t.onCustomEvent(this,"onSubmitFormProgress",[this,arguments])},this);t.onCustomEvent(this,"onBeforeSubmitForm",[this,i]);BXMobileApp.UI.Page.LoadingScreen.show()}var o=t(this.formId).elements["save"];if(!t(o)){o=t.create("INPUT",{attrs:{type:"hidden",name:"save"}});t(this.formId).appendChild(o)}o.value="Y";t.ajax.submitAjax(t(this.formId),i)},getParamsForMobilePostEvent:function(t,e){return{formId:this.formId,gridId:this.gridId,nodeId:t.id,nodeName:t.name,nodeValue:t.value}}}})();
//# sourceMappingURL=mobile_field.map.js