(function(){if(window.BX.MobileUI)return;window.BX.MobileUI={events:{MOBILE_UI_TEXT_FIELD_SET_PARAMS:"mobile.ui/textfield/setdefaultparams"},TextField:{__generateParams:function(e){var t=BX.message("USER_ID");var i={smileButton:{},useImageButton:true,mentionDataSource:{outsection:false,url:"/mobile/index.php?mobile_action=get_user_list&use_name_format=Y"},attachFileSettings:{resize:{quality:40,destinationType:1,sourceType:1,targetWidth:1e3,targetHeight:1e3,encodingType:0,mediaType:0,allowsEdit:true,correctOrientation:"YES",saveToPhotoAlbum:"NO",popoverOptions:"NO",cameraDirection:0},maxAttachedFilesCount:10},attachButton:{items:[{id:"disk",name:BX.message("MUI_B24DISK"),dataSource:{multiple:"NO",url:"/mobile/?mobile_action=disk_folder_list&type=user&path=/&entityId="+t,TABLE_SETTINGS:{searchField:true,showtitle:true,modal:"YES",name:BX.message("MUI_CHOOSE_FILE_TITLE")}}},{id:"mediateka",name:BX.message("MUI_CHOOSE_PHOTO")},{id:"camera",name:BX.message("MUI_CAMERA_ROLL")}]}};if(e["text"]){i.text=e["text"]}if(e["placeholder"]){i.placeholder=e["placeholder"]}if(e["useSmiles"]&&e["useSmiles"]!=true){i.smileButton=""}if(e["useMentions"]&&e["useMentions"]!=true){i.mentionDataSource={}}if(e["onPlusPressed"]&&typeof e["onPlusPressed"]=="function"){delete i["attachButton"];i["plusAction"]=e["onPlusPressed"]}else if(e["useFilePanel"]&&e["useFilePanel"]!=true){delete i["attachButton"]}else{if(e["attachOptions"]){i["attachFileSettings"]["resize"]=e["attachOptions"]}if(e["attachUseBase64"]&&e["attachUseBase64"]==true){i["attachFileSettings"]["sendLocalFileMethod"]="base64"}if(e["attachSources"]){i["attachFileSettings"]["items"]=e["attachSources"]}}if(typeof(e["onSend"]=="function")){if(!i["attachFileSettings"]["sendLocalFileMethod"]){i.action=function(t){if(t.attachedFiles&&t.attachedFiles.length>0){t.attachedFiles=t.attachedFiles.map(function(e){e["disk"]=typeof e["dataAttributes"]!="undefined";if(!e["disk"]){e["base64"]="fakebase64"}return e})}e["onSend"](t)}}else{i.action=e["onSend"]}}if(typeof(e["onEvent"]=="function")){i.callback=e["onEvent"]}return i},setDefaultParams:function(e){BX.MobileUI.TextField.defaultParams=BX.MobileUI.TextField.__generateParams(e);BX.onCustomEvent(BX.MobileUI.events.MOBILE_UI_TEXT_FIELD_SET_PARAMS,[BX.MobileUI.TextField.defaultParams])},show:function(e){var t={};if(typeof e!="undefined"){t=BX.MobileUI.TextField.__generateParams(e)}else{if(typeof BX.MobileUI.TextField.defaultParams!="undefined"){t=BX.MobileUI.TextField.defaultParams}}BXMPage.TextPanel.show(t)}},createLoader:function(){var e={show:function(e){if(e){this.setText(e)}if(!this.view.parentNode){this.overlay.style.top=document.body.scrollTop+"px";this.view.style.top=document.body.scrollTop+screen.height/2-100+"px";document.body.appendChild(this.overlay);document.body.appendChild(this.view);document.body.addEventListener("touchmove",this._prevent)}return this},hide:function(){if(this.view.parentNode){e.view.parentNode.removeChild(this.overlay);e.view.parentNode.removeChild(this.view);document.body.removeEventListener("touchmove",this._prevent)}},_prevent:function(e){e.preventDefault()},onCancel:function(){return true},view:null,textView:null,setText:function(e){this.textView.innerHTML=e}};var t=function(){if(e.onCancel()){e.hide()}};var i=BX.create("TABLE",{props:{className:"mobile-iu-loader-wrap"},children:[BX.create("TR",{children:[BX.create("TD",{attrs:{height:"50px",style:"vertical-align:bottom;text-align: center"},children:[BX.create("DIV",{props:{className:"mobile-ui-loader"}})]})]}),BX.create("TR",{children:[BX.create("TD",{attrs:{height:"30px",style:"vertical-align:center;text-align: center"},children:[e.textView=BX.create("DIV",{props:{className:"mobile-ui-loader-message"}})]})]}),BX.create("TR",{children:[BX.create("TD",{props:{},attrs:{height:"50px",style:"text-align: center"},children:[BX.create("BUTTON",{html:BX.message("MUI_CANCEL"),events:{click:t}})]})]})]});e.view=i;e.overlay=BX.create("DIV",{props:{className:"mobile-iu-loader-overlay"}});return e},bottomPanel:function(){var e=function(e){BX.bind(e,"touchstart",function(){BX.addClass(e,"bottom_button_active")});BX.bind(e,"touchend",function(){BX.removeClass(e,"bottom_button_active")})};var t={holderContainer:null,holder:BX.create("DIV",{props:{className:"bottom_button_holder"}}),node:BX.create("DIV",{props:{className:"bottom-panel"}}),buttons:[],setButtons:function(t){this.clear();for(var i=0;i<t.length;i++){if(i>0){this.node.appendChild(BX.create("DIV",{props:{className:"bottom-panel-delimiter"}}))}this.buttons.push(BX.create("DIV",{html:t[i].name,events:{click:t[i].callback}}));if(t[i].className){BX.addClass(this.buttons[this.buttons.length-1],t[i].className)}e(this.buttons[this.buttons.length-1]);FastClick.attach(this.buttons[this.buttons.length-1]);BX.addClass(this.buttons[this.buttons.length-1],"bottom_button");this.node.appendChild(this.buttons[this.buttons.length-1])}document.body.appendChild(this.node);var n=this.holderContainer!=null?this.holderContainer:document.body;if(!this.holder.parentNode){n.appendChild(this.holder)}},clear:function(){if(this.node&&this.node.parentNode){this.node.parentNode.removeChild(this.node);while(this.node.firstChild){this.node.removeChild(this.node.firstChild)}}if(this.holder.parentNode){this.holder.parentNode.removeChild(this.holder)}}};return t}(),addCopyableDialog:function(e,t,i,n){BX.MobileApp.Gesture.addLongTapListener(e,function(o){var a=BX.findParent(o,{className:t},e);if(!a)return false;var s;if(i){var l=BX.findChild(a,{className:i},true);if(l){s=l}}else{s=a}if(!s){return false}BX.addClass(a,"long-tap-activate");new BXMobileApp.UI.ActionSheet({buttons:[{title:BX.message("MUI_COPY"),callback:function(){var e=null;if(typeof n==="function"){e=n(s)}else{e=s.innerHTML}if(e!==null){app.exec("copyToClipboard",{text:e});new BXMobileApp.UI.NotificationBar({message:BX.message("MUI_TEXT_COPIED"),color:"#3a3735",textColor:"#ffffff",groupId:"clipboard",maxLines:1,align:"center",isGlobal:true,useCloseButton:true,autoHideTimeout:1e3,hideOnTap:true},"copy").show()}}}]},"copydialog").show();app.exec("callVibration");setTimeout(function(){BX.removeClass(a,"long-tap-activate")},1e3)})},addLivefeedLongTapHandler:function(e,t){BX.MobileApp.Gesture.addLongTapListener(e,function(i){var n=null;if(typeof BXRL!="undefined"&&BXRL.render!="undefined"&&BX.type.isNotEmptyString(t.likeNodeClass)){if(BX.hasClass(i,t.likeNodeClass)){n=i}else{n=BX.findParent(i,{className:t.likeNodeClass},e)}if(n){var o=n.getAttribute("data-rating-vote-id");if(BX.type.isNotEmptyString(o)){app.exec("callVibration");BXRL.render.showReactionsPopup({bindElement:n,likeId:o})}}}if(!n){var a=BX.findParent(i,{className:t.copyItemClass},e);if(!a){return false}var s;if(BX.type.isNotEmptyString(t.copyTextClass)){var l=BX.findChild(a,{className:t.copyTextClass},true);if(l){s=l}}else{s=a}if(!s){return false}BX.addClass(a,"long-tap-activate");new BXMobileApp.UI.ActionSheet({buttons:[{title:BX.message("MUI_COPY"),callback:function(){var e=BX.MobileTools.getTextBlock(s);if(e!==null){app.exec("copyToClipboard",{text:e});new BXMobileApp.UI.NotificationBar({message:BX.message("MUI_TEXT_COPIED"),color:"#3a3735",textColor:"#ffffff",groupId:"clipboard",maxLines:1,align:"center",isGlobal:true,useCloseButton:true,autoHideTimeout:1e3,hideOnTap:true},"copy").show()}}}]},"copydialog").show();app.exec("callVibration");setTimeout(function(){BX.removeClass(a,"long-tap-activate")},1e3)}})},List:new function(){var e=function(e){var t=null;if(e.objectId){t=new function e(t,i){this.internalId=t;this.id=i;this.showMenu=function(e,t){window.BX.MobileUI.List.instance.exec("showMenu",{title:t,items:e,internalId:this.internalId})}}(e.objectId.internalId,e.objectId.id)}BX.onCustomEvent("onMobileList"+(typeof e.objectId.id!="undefined"?"_"+e.objectId.id:""),[e.eventName,e.params,t])};this.Events={ON_ITEM_MORE_CHOOSED:"onOverflowListChoose",ON_MENU_ITEM_CHOOSED:"onOverflowListMenuChoose"};this.show=function(e,t){e.id=t;if(app.enableInVersion(20)){window.BX.MobileUI.List.instance.exec("show",e)}else{new BXMobileApp.UI.Table(e).show()}};this.addListener=function(e,t){BX.addCustomEvent("onMobileList"+(typeof t!="undefined"?"_"+t:""),e)};this.instance=new BXCordovaPlugin("ListCordovaPlugin");this.instance.exec("init",{eventListener:BX.proxy(e,this),jsCallbackProvider:"window.BX.MobileUI.List.instance"})}}})();
//# sourceMappingURL=mobile_ui.map.js