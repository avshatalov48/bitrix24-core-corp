this.BX=this.BX||{};(function(e,i,t){"use strict";var a=function(){function e(t){var a=this;babelHelpers.classCallCheck(this,e);var o=t.imagesNode&&i.Type.isDomNode(t.imagesNode)?t.imagesNode:null,r=t.moreFilesNode&&i.Type.isDomNode(t.moreFilesNode)?t.moreFilesNode:null,s=t.toggleViewNode&&i.Type.isDomNode(t.toggleViewNode)?t.toggleViewNode:null,n=t.imagesIdList&&i.Type.isArray(t.imagesIdList)?t.imagesIdList:[];this.signedParameters=t.signedParameters&&i.Type.isStringFilled(t.signedParameters)?t.signedParameters:"";if(n.length>0){BitrixMobile.LazyLoad.registerImages(n,typeof oMSL!="undefined"?oMSL.checkVisibility:false)}if(o){this.initViewer(o)}if(r){i.Event.bind(r,"click",function(e){a.showMoreDiskFiles(e.currentTarget);e.preventDefault()})}if(s){i.Event.bind(s,"click",function(e){var i=e.currentTarget.getAttribute("data-bx-view-type"),t=e.currentTarget.closest(".disk-ui-file-container");if(t){a.toggleViewType({viewType:i,container:t})}e.preventDefault()})}}babelHelpers.createClass(e,[{key:"initViewer",value:function e(a){if(!i.Type.isDomNode(a)){return}t.MobileImageViewer.viewImageBind(a,"img[data-bx-image]")}},{key:"showMoreDiskFiles",value:function e(t){if(!i.Type.isDomNode(t)){return}var a=t.closest(".post-item-attached-file-wrap");if(a){var o=a.querySelectorAll(".post-item-attached-file"),r=a.querySelector(".post-item-attached-file-more");for(var s=0;s<o.length;s++){o[s].classList.remove("post-item-attached-file-hidden")}if(r){r.parentNode.removeChild(r)}}}},{key:"toggleViewType",value:function e(t){var a=new MobileAjaxWrapper,o=t.container&&i.Type.isDomNode(t.container)?t.container:null;if(!o){return}app.showPopupLoader({text:""});a.runComponentAction("bitrix:disk.uf.file","toggleViewType",{mode:"class",signedParameters:this.signedParameters,data:{params:{viewType:t.viewType}}}).then(function(e){app.hidePopupLoader();i.Dom.clean(o);i.Runtime.html(o,e.data.html).then(function(){BitrixMobile.LazyLoad.showImages()})},function(){app.hidePopupLoader()})}}]);return e}();e.DiskFile=a})(this.BX.Mobile=this.BX.Mobile||{},BX,BX);
//# sourceMappingURL=diskfile.bundle.map.js