this.BX=this.BX||{};(function(e,i,t,o){"use strict";var a=function(){function e(t){var o=this;babelHelpers.classCallCheck(this,e);var a=t.imagesNode&&i.Type.isDomNode(t.imagesNode)?t.imagesNode:null,r=t.moreFilesNode&&i.Type.isDomNode(t.moreFilesNode)?t.moreFilesNode:null,s=t.toggleViewNode&&i.Type.isDomNode(t.toggleViewNode)?t.toggleViewNode:null,n=t.imagesIdList&&i.Type.isArray(t.imagesIdList)?t.imagesIdList:[];this.signedParameters=t.signedParameters&&i.Type.isStringFilled(t.signedParameters)?t.signedParameters:"";if(n.length>0){BitrixMobile.LazyLoad.registerImages(n,typeof oMSL!="undefined"?oMSL.checkVisibility:false)}if(a){this.initViewer(a)}if(r){i.Event.bind(r,"click",function(e){o.showMoreDiskFiles(e.currentTarget);e.preventDefault()})}if(s){i.Event.bind(s,"click",function(e){var i=e.currentTarget.getAttribute("data-bx-view-type"),t=e.currentTarget.closest(".disk-ui-file-container");if(t){o.toggleViewType({viewType:i,container:t})}e.preventDefault()})}}babelHelpers.createClass(e,[{key:"initViewer",value:function e(o){if(!i.Type.isDomNode(o)){return}t.MobileImageViewer.viewImageBind(o,"img[data-bx-image]")}},{key:"showMoreDiskFiles",value:function e(t){if(!i.Type.isDomNode(t)){return}var o=t.closest(".post-item-attached-file-wrap");if(o){var a=o.querySelectorAll(".post-item-attached-file"),r=o.querySelector(".post-item-attached-file-more");for(var s=0;s<a.length;s++){a[s].classList.remove("post-item-attached-file-hidden")}if(r){r.parentNode.removeChild(r)}}}},{key:"toggleViewType",value:function e(t){var a=t.container&&i.Type.isDomNode(t.container)?t.container:null;if(!a){return}app.showPopupLoader({text:""});o.Ajax.runComponentAction("bitrix:disk.uf.file","toggleViewType",{mode:"class",signedParameters:this.signedParameters,data:{params:{viewType:t.viewType}}}).then(function(e){app.hidePopupLoader();i.Dom.clean(a);i.Runtime.html(a,e.data.html).then(function(){BitrixMobile.LazyLoad.showImages()})},function(){app.hidePopupLoader()})}}]);return e}();e.DiskFile=a})(this.BX.Mobile=this.BX.Mobile||{},BX,BX,BX.Mobile);
//# sourceMappingURL=diskfile.bundle.map.js