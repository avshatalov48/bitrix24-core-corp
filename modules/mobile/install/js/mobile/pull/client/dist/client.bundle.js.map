{"version":3,"file":"client.bundle.js","sources":["../src/client.js"],"sourcesContent":["/**\n * Bitrix Mobile App\n * Pull client\n *\n * @package bitrix\n * @subpackage mobile\n * @copyright 2001-2019 Bitrix\n */\n\n/**\n * After modify this script, copy to:\n * mobile/install/mobileapp/mobile/extensions/bitrix/pull/client/events/extension.js\n */\n\n// start common code\n\nvar PullStatus = {\n\tOnline: 'online',\n\tOffline: 'offline',\n\tConnecting: 'connect'\n};\n\nvar SubscriptionType = {\n\tServer: 'server',\n\tClient: 'client',\n\tOnline: 'online',\n\tStatus: 'status',\n\tRevision: 'revision'\n};\n\nvar CloseReasons = {\n\tNORMAL_CLOSURE : 1000,\n\tSERVER_DIE : 1001,\n\tCONFIG_REPLACED : 3000,\n\tCHANNEL_EXPIRED : 3001,\n\tSERVER_RESTARTED : 3002,\n\tCONFIG_EXPIRED : 3003,\n\tMANUAL : 3004,\n};\n\nclass PullEvents\n{\n\tconstructor()\n\t{\n\t\tthis._subscribers = {};\n\t\tthis._eventListener = {};\n\n\t\tthis.context = 'client';\n\t}\n\n\t/**\n\t * Creates a subscription to incoming messages.\n\t *\n\t * @param {Object} params\n\t * @param {string} [params.type] Subscription type (for possible values see SubscriptionType).\n\t * @param {string} [params.command] command\n\t * @param {string} [params.moduleId] Name of the module.\n\t * @param {Function} params.callback Function, that will be called for incoming messages.\n\t * @returns {Function} - Unsubscribe callback function\n\t */\n\tsubscribe(params = {})\n\t{\n\t\tif (!params)\n\t\t{\n\t\t\tconsole.error(Utils.getDateForLog() + ': Pull.subscribe: params for subscribe function is invalid. ');\n\t\t\treturn function(){}\n\t\t}\n\n\t\tif (!Utils.isPlainObject(params))\n\t\t{\n\t\t\treturn this.attachCommandHandler(params);\n\t\t}\n\n\t\tparams.type = params.type || SubscriptionType.Server;\n\n\t\tlet eventName = '';\n\t\tlet eventType = params.type;\n\n\t\tif (\n\t\t\teventType === SubscriptionType.Server\n\t\t\t|| eventType === SubscriptionType.Client\n\t\t\t|| eventType === SubscriptionType.Online\n\t\t)\n\t\t{\n\t\t\tif (eventType === SubscriptionType.Server)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullEvent-\" + params.moduleId: \"onPull-\" + params.moduleId;\n\t\t\t}\n\t\t\telse if (eventType === SubscriptionType.Client)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullClientEvent-\" + params.moduleId: \"onPullClient-\" + params.moduleId;\n\t\t\t}\n\t\t\telse if (eventType === SubscriptionType.Online)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullOnlineEvent\": 'onPullOnline';\n\t\t\t}\n\n\t\t\tif (eventName && !this._eventListener[eventName])\n\t\t\t{\n\t\t\t\tthis._eventListener[eventName] = true;\n\n\t\t\t\tif (typeof env !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tBX.addCustomEvent(eventName, (command, params, extra, moduleId) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (eventType === SubscriptionType.Online)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmoduleId = 'online';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tmoduleId : moduleId,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcommand,\n\t\t\t\t\t\t\t\tparams: Utils.clone(params),\n\t\t\t\t\t\t\t\textra: Utils.clone(extra)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.receiveComponentEvent(eventName, data =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (eventType === SubscriptionType.Online)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.module_id = 'online';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tmoduleId : data.module_id,\n\t\t\t\t\t\t\tdata: Utils.clone(data)\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (eventType === SubscriptionType.Status)\n\t\t{\n\t\t\teventName = 'onPullStatus';\n\n\t\t\tif (eventName && !this._eventListener[eventName])\n\t\t\t{\n\t\t\t\tthis._eventListener[eventName] = true;\n\n\t\t\t\tif (typeof env !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tBX.addCustomEvent(eventName, (status) => {\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tdata: {status}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.receiveComponentEvent(eventName, data => {\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tdata: Utils.clone(data)\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t *  Dont modify following code, copy from pull/install/js/pull/client/pull.client.js: 'subscribe'\n\t\t */\n\t\tparams.command = params.command || null;\n\n\t\tif (params.type === SubscriptionType.Server || params.type === SubscriptionType.Client)\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = {};\n\t\t\t}\n\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId] = {\n\t\t\t\t\t'callbacks': [],\n\t\t\t\t\t'commands': {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (params.command)\n\t\t\t{\n\t\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]['commands'][params.command]) === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command] = [];\n\t\t\t\t}\n\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command].push(params.callback);\n\n\t\t\t\treturn function () {\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command] = this._subscribers[params.type][params.moduleId]['commands'][params.command].filter(function(element) {\n\t\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t\t});\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'].push(params.callback);\n\n\t\t\t\treturn function () {\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'] = this._subscribers[params.type][params.moduleId]['callbacks'].filter(function(element) {\n\t\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t\t});\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = [];\n\t\t\t}\n\n\t\t\tthis._subscribers[params.type].push(params.callback);\n\n\t\t\treturn function () {\n\t\t\t\tthis._subscribers[params.type] = this._subscribers[params.type].filter(function(element) {\n\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t});\n\t\t\t}.bind(this);\n\t\t}\n\t};\n\n\textendWatch(tagId, force = false)\n\t{\n\t\tthis.postComponentEvent(\"onPullExtendWatch\", {id: tagId, force});\n\t\treturn true;\n\t}\n\n\tclearWatch(tagId)\n\t{\n\t\tthis.postComponentEvent(\"onPullClearWatch\", {id: tagId});\n\t\treturn true;\n\t}\n\n\tcapturePullEvent(debugFlag = true)\n\t{\n\t\tif (this.debug === null)\n\t\t{\n\t\t\tconsole.warn('PullEvents.capturePullEvent: only commands from subscribed modules are logged.')\n\t\t}\n\n\t\tthis.debug = !!debugFlag;\n\n\t\tconsole.log('PullEvents.capturePullEvent: logger turn '+(this.debug? 'on': 'off'))\n\t}\n\n\tgetDebugInfo()\n\t{\n\t\tthis.postComponentEvent(\"onPullGetDebugInfo\");\n\n\t\tif (!this._eventListener[\"onPullGetDebugInfoResult\"])\n\t\t{\n\t\t\tthis._eventListener[\"onPullGetDebugInfoResult\"] = true;\n\t\t\tthis.receiveComponentEvent(\"onPullGetDebugInfoResult\", data => {\n\t\t\t\tif (typeof data === 'string')\n\t\t\t\t{\n\t\t\t\t\tconsole.info(data)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.info(data.text);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param eventName\n\t * @param callback\n\t */\n\treceiveComponentEvent(eventName, callback)\n\t{\n\t\tif (typeof BXMobileApp !== 'undefined' && typeof BXMobileApp.addCustomEvent !== 'undefined')\n\t\t{\n\t\t\tBXMobileApp.addCustomEvent(eventName, callback);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addCustomEvent(eventName, callback);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param name\n\t * @param params\n\t */\n\tpostComponentEvent(name, params = {})\n\t{\n\t\tif (typeof BX.postComponentEvent !== 'undefined')\n\t\t{\n\t\t\tBX.postComponentEvent(name, [params], \"communication\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof window.app !== 'undefined'\n\t\t\t\t&& typeof window.app.enableInVersion !== 'undefined'\n\t\t\t\t&& typeof BXMobileApp !== 'undefined'\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (window.app.enableInVersion(25))\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.Events.postToComponent(name, params, \"communication\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent(name, params, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param handler\n\t * @returns {Function}\n\t */\n\tattachCommandHandler(handler)\n\t{\n\t\t/**\n\t\t *  Dont modify this method, this is copy from pull/install/js/pull/client/pull.client.js: 'attachCommandHandler'\n\t\t */\n\t\tif (typeof handler.getModuleId !== 'function' || typeof handler.getModuleId() !== 'string')\n\t\t{\n\t\t\tconsole.error(Utils.getDateForLog() + ': Pull.attachCommandHandler: result of handler.getModuleId() is not a string.');\n\t\t\treturn function(){}\n\t\t}\n\n\t\tvar type = SubscriptionType.Server;\n\t\tif (typeof handler.getSubscriptionType === 'function')\n\t\t{\n\t\t\ttype = handler.getSubscriptionType();\n\t\t}\n\n\t\tthis.subscribe({\n\t\t\ttype: type,\n\t\t\tmoduleId: handler.getModuleId(),\n\t\t\tcallback: function(data)\n\t\t\t{\n\t\t\t\tvar method = null;\n\n\t\t\t\tif (typeof handler.getMap === 'function')\n\t\t\t\t{\n\t\t\t\t\tlet mapping = handler.getMap();\n\t\t\t\t\tif (mapping && typeof mapping === 'object')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof mapping[data.command] === 'function')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod = mapping[data.command].bind(handler)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof mapping[data.command] === 'string' && typeof handler[mapping[data.command]] === 'function')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod = handler[mapping[data.command]].bind(handler);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!method)\n\t\t\t\t{\n\t\t\t\t\tvar methodName = 'handle'+data.command.charAt(0).toUpperCase() + data.command.slice(1);\n\t\t\t\t\tif (typeof handler[methodName] === 'function')\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod = handler[methodName].bind(handler);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (method)\n\t\t\t\t{\n\t\t\t\t\tif (this.debug && this.context !== 'master')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn(Utils.getDateForLog() + ': Pull.attachCommandHandler: receive command', data);\n\t\t\t\t\t}\n\t\t\t\t\tmethod(data.params, data.extra, data.command);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t});\n\t};\n\n\t/**\n\t * @private\n\t *\n\t * @param params\n\t * @returns {boolean}\n\t */\n\temit(params)\n\t{\n\t\t/**\n\t\t *  Dont modify this method, this is copy from pull/install/js/pull/client/pull.client.js: 'emit'\n\t\t */\n\t\tparams = params || {};\n\n\t\tif (params.type === SubscriptionType.Server || params.type === SubscriptionType.Client)\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = {};\n\t\t\t}\n\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId] = {\n\t\t\t\t\t'callbacks': [],\n\t\t\t\t\t'commands': {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this._subscribers[params.type][params.moduleId]['callbacks'].length > 0)\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'].forEach(function(callback){\n\t\t\t\t\tcallback(params.data, {type: params.type, moduleId: params.moduleId});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.data.command]\n\t\t\t\t&& this._subscribers[params.type][params.moduleId]['commands'][params.data.command].length > 0)\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.data.command].forEach(function(callback){\n\t\t\t\t\tcallback(params.data.params, params.data.extra, params.data.command, {type: params.type, moduleId: params.moduleId});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = [];\n\t\t\t}\n\n\t\t\tif (this._subscribers[params.type].length <= 0)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis._subscribers[params.type].forEach(function(callback){\n\t\t\t\tcallback(params.data, {type: params.type});\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nvar Utils =\n{\n\tisArray(item)\n\t{\n\t\treturn item && Object.prototype.toString.call(item) === \"[object Array]\";\n\t},\n\tisDomNode: function(item) {\n\t\treturn item && typeof (item) == \"object\" && \"nodeType\" in item;\n\t},\n\tisDate: function(item) {\n\t\treturn item && Object.prototype.toString.call(item) === \"[object Date]\";\n\t},\n\tclone(obj, bCopyObj)\n\t{\n\t\tlet _obj, i, l;\n\t\tif (bCopyObj !== false)\n\t\t\tbCopyObj = true;\n\n\t\tif (obj === null)\n\t\t\treturn null;\n\n\t\tif (this.isDomNode(obj))\n\t\t{\n\t\t\t_obj = obj.cloneNode(bCopyObj);\n\t\t}\n\t\telse if (typeof obj == 'object')\n\t\t{\n\t\t\tif (this.isArray(obj))\n\t\t\t{\n\t\t\t\t_obj = [];\n\t\t\t\tfor (i=0,l=obj.length;i<l;i++)\n\t\t\t\t{\n\t\t\t\t\tif (typeof obj[i] == \"object\" && bCopyObj)\n\t\t\t\t\t\t_obj[i] = this.clone(obj[i], bCopyObj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_obj =  {};\n\t\t\t\tif (obj.constructor)\n\t\t\t\t{\n\t\t\t\t\tif (this.isDate(obj))\n\t\t\t\t\t\t_obj = new Date(obj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj = new obj.constructor();\n\t\t\t\t}\n\n\t\t\t\tfor (i in obj)\n\t\t\t\t{\n\t\t\t\t\tif (!obj.hasOwnProperty(i))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof obj[i] == \"object\" && bCopyObj)\n\t\t\t\t\t\t_obj[i] = this.clone(obj[i], bCopyObj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_obj = obj;\n\t\t}\n\n\t\treturn _obj;\n\t},\n\tisPlainObject(item)\n\t{\n\t\tif(!item || typeof(item) !== \"object\" || item.nodeType)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet hasProp = Object.prototype.hasOwnProperty;\n\t\ttry\n\t\t{\n\t\t\tif (item.constructor && !hasProp.call(item, \"constructor\") && !hasProp.call(item.constructor.prototype, \"isPrototypeOf\") )\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet key;\n\t\tfor (key in item)\n\t\t{\n\t\t}\n\t\treturn typeof(key) === \"undefined\" || hasProp.call(item, key);\n\t},\n\tlpad(str, length, chr)\n\t{\n\t\tstr = str.toString();\n\t\tchr = chr || ' ';\n\n\t\tif(str.length > length)\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\tlet result = '';\n\t\tfor(var i = 0; i < length - str.length; i++)\n\t\t{\n\t\t\tresult += chr;\n\t\t}\n\n\t\treturn result + str;\n\t},\n\tgetDateForLog()\n\t{\n\t\tlet d = new Date();\n\t\treturn d.getFullYear() + \"-\" + Utils.lpad(d.getMonth(), 2, '0') + \"-\" + Utils.lpad(d.getDate(), 2, '0') + \" \" + Utils.lpad(d.getHours(), 2, '0') + \":\" + Utils.lpad(d.getMinutes(), 2, '0');\n\t},\n};\n\n// end common code\n\nvar PULL = new PullEvents;\n\nPullEvents.PullStatus = PullStatus;\nPullEvents.SubscriptionType = SubscriptionType;\nPullEvents.CloseReasons = CloseReasons;\n\nexport {PULL, PullEvents as PullClient, PullEvents}"],"names":["PullStatus","Online","Offline","Connecting","SubscriptionType","Server","Client","Status","Revision","CloseReasons","NORMAL_CLOSURE","SERVER_DIE","CONFIG_REPLACED","CHANNEL_EXPIRED","SERVER_RESTARTED","CONFIG_EXPIRED","MANUAL","PullEvents","_subscribers","_eventListener","context","params","console","error","Utils","getDateForLog","isPlainObject","attachCommandHandler","type","eventName","eventType","env","moduleId","BX","addCustomEvent","command","extra","emit","data","clone","receiveComponentEvent","module_id","status","push","callback","filter","element","bind","tagId","force","postComponentEvent","id","debugFlag","debug","warn","log","info","text","BXMobileApp","name","window","app","enableInVersion","Events","postToComponent","onCustomEvent","handler","getModuleId","getSubscriptionType","subscribe","method","getMap","mapping","methodName","charAt","toUpperCase","slice","length","forEach","isArray","item","Object","prototype","toString","call","isDomNode","isDate","obj","bCopyObj","_obj","i","l","cloneNode","constructor","Date","hasOwnProperty","nodeType","hasProp","e","key","lpad","str","chr","result","d","getFullYear","getMonth","getDate","getHours","getMinutes","PULL"],"mappings":";;;CAAA;;;;;;;;;CASA;;;;CAKA;CAEA,IAAIA,UAAU,GAAG;CAChBC,EAAAA,MAAM,EAAE,QADQ;CAEhBC,EAAAA,OAAO,EAAE,SAFO;CAGhBC,EAAAA,UAAU,EAAE;CAHI,CAAjB;CAMA,IAAIC,gBAAgB,GAAG;CACtBC,EAAAA,MAAM,EAAE,QADc;CAEtBC,EAAAA,MAAM,EAAE,QAFc;CAGtBL,EAAAA,MAAM,EAAE,QAHc;CAItBM,EAAAA,MAAM,EAAE,QAJc;CAKtBC,EAAAA,QAAQ,EAAE;CALY,CAAvB;CAQA,IAAIC,YAAY,GAAG;CAClBC,EAAAA,cAAc,EAAG,IADC;CAElBC,EAAAA,UAAU,EAAG,IAFK;CAGlBC,EAAAA,eAAe,EAAG,IAHA;CAIlBC,EAAAA,eAAe,EAAG,IAJA;CAKlBC,EAAAA,gBAAgB,EAAG,IALD;CAMlBC,EAAAA,cAAc,EAAG,IANC;CAOlBC,EAAAA,MAAM,EAAG;CAPS,CAAnB;;KAUMC;;;CAEL,wBACA;CAAA;CACC,SAAKC,YAAL,GAAoB,EAApB;CACA,SAAKC,cAAL,GAAsB,EAAtB;CAEA,SAAKC,OAAL,GAAe,QAAf;CACA;CAED;;;;;;;;;;;;;;iCAWA;CAAA;;CAAA,UADUC,MACV,uEADmB,EACnB;;CACC,UAAI,CAACA,MAAL,EACA;CACCC,QAAAA,OAAO,CAACC,KAAR,CAAcC,KAAK,CAACC,aAAN,KAAwB,8DAAtC;CACA,eAAO,YAAU,EAAjB;CACA;;CAED,UAAI,CAACD,KAAK,CAACE,aAAN,CAAoBL,MAApB,CAAL,EACA;CACC,eAAO,KAAKM,oBAAL,CAA0BN,MAA1B,CAAP;CACA;;CAEDA,MAAAA,MAAM,CAACO,IAAP,GAAcP,MAAM,CAACO,IAAP,IAAexB,gBAAgB,CAACC,MAA9C;CAEA,UAAIwB,SAAS,GAAG,EAAhB;CACA,UAAIC,SAAS,GAAGT,MAAM,CAACO,IAAvB;;CAEA,UACCE,SAAS,KAAK1B,gBAAgB,CAACC,MAA/B,IACGyB,SAAS,KAAK1B,gBAAgB,CAACE,MADlC,IAEGwB,SAAS,KAAK1B,gBAAgB,CAACH,MAHnC,EAKA;CACC,YAAI6B,SAAS,KAAK1B,gBAAgB,CAACC,MAAnC,EACA;CACCwB,UAAAA,SAAS,GAAG,OAAOE,GAAP,KAAe,WAAf,GAA4B,iBAAiBV,MAAM,CAACW,QAApD,GAA8D,YAAYX,MAAM,CAACW,QAA7F;CACA,SAHD,MAIK,IAAIF,SAAS,KAAK1B,gBAAgB,CAACE,MAAnC,EACL;CACCuB,UAAAA,SAAS,GAAG,OAAOE,GAAP,KAAe,WAAf,GAA4B,uBAAuBV,MAAM,CAACW,QAA1D,GAAoE,kBAAkBX,MAAM,CAACW,QAAzG;CACA,SAHI,MAIA,IAAIF,SAAS,KAAK1B,gBAAgB,CAACH,MAAnC,EACL;CACC4B,UAAAA,SAAS,GAAG,OAAOE,GAAP,KAAe,WAAf,GAA4B,mBAA5B,GAAiD,cAA7D;CACA;;CAED,YAAIF,SAAS,IAAI,CAAC,KAAKV,cAAL,CAAoBU,SAApB,CAAlB,EACA;CACC,eAAKV,cAAL,CAAoBU,SAApB,IAAiC,IAAjC;;CAEA,cAAI,OAAOE,GAAP,KAAe,WAAnB,EACA;CACCE,YAAAA,EAAE,CAACC,cAAH,CAAkBL,SAAlB,EAA6B,UAACM,OAAD,EAAUd,MAAV,EAAkBe,KAAlB,EAAyBJ,QAAzB,EAC7B;CACC,kBAAIF,SAAS,KAAK1B,gBAAgB,CAACH,MAAnC,EACA;CACC+B,gBAAAA,QAAQ,GAAG,QAAX;CACA;;CACD,cAAA,KAAI,CAACK,IAAL,CAAU;CACTT,gBAAAA,IAAI,EAAGE,SADE;CAETE,gBAAAA,QAAQ,EAAGA,QAFF;CAGTM,gBAAAA,IAAI,EAAE;CACLH,kBAAAA,OAAO,EAAPA,OADK;CAELd,kBAAAA,MAAM,EAAEG,KAAK,CAACe,KAAN,CAAYlB,MAAZ,CAFH;CAGLe,kBAAAA,KAAK,EAAEZ,KAAK,CAACe,KAAN,CAAYH,KAAZ;CAHF;CAHG,eAAV;CASA,aAfD;CAgBA,WAlBD,MAoBA;CACC,iBAAKI,qBAAL,CAA2BX,SAA3B,EAAsC,UAAAS,IAAI,EAC1C;CACC,kBAAIR,SAAS,KAAK1B,gBAAgB,CAACH,MAAnC,EACA;CACCqC,gBAAAA,IAAI,CAACG,SAAL,GAAiB,QAAjB;CACA;;CACD,cAAA,KAAI,CAACJ,IAAL,CAAU;CACTT,gBAAAA,IAAI,EAAGE,SADE;CAETE,gBAAAA,QAAQ,EAAGM,IAAI,CAACG,SAFP;CAGTH,gBAAAA,IAAI,EAAEd,KAAK,CAACe,KAAN,CAAYD,IAAZ;CAHG,eAAV;CAKA,aAXD;CAYA;CACD;CACD,OA1DD,MA2DK,IAAIR,SAAS,KAAK1B,gBAAgB,CAACG,MAAnC,EACL;CACCsB,QAAAA,SAAS,GAAG,cAAZ;;CAEA,YAAIA,SAAS,IAAI,CAAC,KAAKV,cAAL,CAAoBU,SAApB,CAAlB,EACA;CACC,eAAKV,cAAL,CAAoBU,SAApB,IAAiC,IAAjC;;CAEA,cAAI,OAAOE,GAAP,KAAe,WAAnB,EACA;CACCE,YAAAA,EAAE,CAACC,cAAH,CAAkBL,SAAlB,EAA6B,UAACa,MAAD,EAAY;CACxC,cAAA,KAAI,CAACL,IAAL,CAAU;CACTT,gBAAAA,IAAI,EAAGE,SADE;CAETQ,gBAAAA,IAAI,EAAE;CAACI,kBAAAA,MAAM,EAANA;CAAD;CAFG,eAAV;CAIA,aALD;CAMA,WARD,MAUA;CACC,iBAAKF,qBAAL,CAA2BX,SAA3B,EAAsC,UAAAS,IAAI,EAAI;CAC7C,cAAA,KAAI,CAACD,IAAL,CAAU;CACTT,gBAAAA,IAAI,EAAGE,SADE;CAETQ,gBAAAA,IAAI,EAAEd,KAAK,CAACe,KAAN,CAAYD,IAAZ;CAFG,eAAV;CAIA,aALD;CAMA;CACD;CACD;CAGD;;;;;CAGAjB,MAAAA,MAAM,CAACc,OAAP,GAAiBd,MAAM,CAACc,OAAP,IAAkB,IAAnC;;CAEA,UAAId,MAAM,CAACO,IAAP,KAAgBxB,gBAAgB,CAACC,MAAjC,IAA2CgB,MAAM,CAACO,IAAP,KAAgBxB,gBAAgB,CAACE,MAAhF,EACA;CACC,YAAI,OAAQ,KAAKY,YAAL,CAAkBG,MAAM,CAACO,IAAzB,CAAR,KAA4C,WAAhD,EACA;CACC,eAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,IAAiC,EAAjC;CACA;;CACD,YAAI,OAAQ,KAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,CAAR,KAA6D,WAAjE,EACA;CACC,eAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,IAAkD;CACjD,yBAAa,EADoC;CAEjD,wBAAY;CAFqC,WAAlD;CAIA;;CAED,YAAIX,MAAM,CAACc,OAAX,EACA;CACC,cAAI,OAAQ,KAAKjB,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACc,OAAnE,CAAR,KAAyF,WAA7F,EACA;CACC,iBAAKjB,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACc,OAAnE,IAA8E,EAA9E;CACA;;CAED,eAAKjB,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACc,OAAnE,EAA4EQ,IAA5E,CAAiFtB,MAAM,CAACuB,QAAxF;;CAEA,iBAAO,YAAY;CAClB,iBAAK1B,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACc,OAAnE,IAA8E,KAAKjB,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACc,OAAnE,EAA4EU,MAA5E,CAAmF,UAASC,OAAT,EAAkB;CAClL,qBAAOA,OAAO,KAAKzB,MAAM,CAACuB,QAA1B;CACA,aAF6E,CAA9E;CAGA,WAJM,CAILG,IAJK,CAIA,IAJA,CAAP;CAKA,SAdD,MAgBA;CACC,eAAK7B,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,WAAhD,EAA6DW,IAA7D,CAAkEtB,MAAM,CAACuB,QAAzE;;CAEA,iBAAO,YAAY;CAClB,iBAAK1B,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,WAAhD,IAA+D,KAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,WAAhD,EAA6Da,MAA7D,CAAoE,UAASC,OAAT,EAAkB;CACpJ,qBAAOA,OAAO,KAAKzB,MAAM,CAACuB,QAA1B;CACA,aAF8D,CAA/D;CAGA,WAJM,CAILG,IAJK,CAIA,IAJA,CAAP;CAKA;CACD,OAvCD,MAyCA;CACC,YAAI,OAAQ,KAAK7B,YAAL,CAAkBG,MAAM,CAACO,IAAzB,CAAR,KAA4C,WAAhD,EACA;CACC,eAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,IAAiC,EAAjC;CACA;;CAED,aAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+Be,IAA/B,CAAoCtB,MAAM,CAACuB,QAA3C;;CAEA,eAAO,YAAY;CAClB,eAAK1B,YAAL,CAAkBG,MAAM,CAACO,IAAzB,IAAiC,KAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BiB,MAA/B,CAAsC,UAASC,OAAT,EAAkB;CACxF,mBAAOA,OAAO,KAAKzB,MAAM,CAACuB,QAA1B;CACA,WAFgC,CAAjC;CAGA,SAJM,CAILG,IAJK,CAIA,IAJA,CAAP;CAKA;CACD;;;iCAEWC,OACZ;CAAA,UADmBC,KACnB,uEAD2B,KAC3B;CACC,WAAKC,kBAAL,CAAwB,mBAAxB,EAA6C;CAACC,QAAAA,EAAE,EAAEH,KAAL;CAAYC,QAAAA,KAAK,EAALA;CAAZ,OAA7C;CACA,aAAO,IAAP;CACA;;;gCAEUD,OACX;CACC,WAAKE,kBAAL,CAAwB,kBAAxB,EAA4C;CAACC,QAAAA,EAAE,EAAEH;CAAL,OAA5C;CACA,aAAO,IAAP;CACA;;;wCAGD;CAAA,UADiBI,SACjB,uEAD6B,IAC7B;;CACC,UAAI,KAAKC,KAAL,KAAe,IAAnB,EACA;CACC/B,QAAAA,OAAO,CAACgC,IAAR,CAAa,gFAAb;CACA;;CAED,WAAKD,KAAL,GAAa,CAAC,CAACD,SAAf;CAEA9B,MAAAA,OAAO,CAACiC,GAAR,CAAY,+CAA6C,KAAKF,KAAL,GAAY,IAAZ,GAAkB,KAA/D,CAAZ;CACA;;;oCAGD;CACC,WAAKH,kBAAL,CAAwB,oBAAxB;;CAEA,UAAI,CAAC,KAAK/B,cAAL,CAAoB,0BAApB,CAAL,EACA;CACC,aAAKA,cAAL,CAAoB,0BAApB,IAAkD,IAAlD;CACA,aAAKqB,qBAAL,CAA2B,0BAA3B,EAAuD,UAAAF,IAAI,EAAI;CAC9D,cAAI,OAAOA,IAAP,KAAgB,QAApB,EACA;CACChB,YAAAA,OAAO,CAACkC,IAAR,CAAalB,IAAb;CACA,WAHD,MAKA;CACChB,YAAAA,OAAO,CAACkC,IAAR,CAAalB,IAAI,CAACmB,IAAlB;CACA;CACD,SATD;CAUA;CACD;CAED;;;;;;;;;2CAMsB5B,WAAWe,UACjC;CACC,UAAI,OAAOc,WAAP,KAAuB,WAAvB,IAAsC,OAAOA,WAAW,CAACxB,cAAnB,KAAsC,WAAhF,EACA;CACCwB,QAAAA,WAAW,CAACxB,cAAZ,CAA2BL,SAA3B,EAAsCe,QAAtC;CACA,OAHD,MAKA;CACCX,QAAAA,EAAE,CAACC,cAAH,CAAkBL,SAAlB,EAA6Be,QAA7B;CACA;CACD;CAED;;;;;;;;;wCAMmBe,MACnB;CAAA,UADyBtC,MACzB,uEADkC,EAClC;;CACC,UAAI,OAAOY,EAAE,CAACiB,kBAAV,KAAiC,WAArC,EACA;CACCjB,QAAAA,EAAE,CAACiB,kBAAH,CAAsBS,IAAtB,EAA4B,CAACtC,MAAD,CAA5B,EAAsC,eAAtC;CACA,OAHD,MAKA;CACC,YACC,OAAOuC,MAAM,CAACC,GAAd,KAAsB,WAAtB,IACG,OAAOD,MAAM,CAACC,GAAP,CAAWC,eAAlB,KAAsC,WADzC,IAEG,OAAOJ,WAAP,KAAuB,WAH3B,EAKA;CACC,cAAIE,MAAM,CAACC,GAAP,CAAWC,eAAX,CAA2B,EAA3B,CAAJ,EACA;CACCJ,YAAAA,WAAW,CAACK,MAAZ,CAAmBC,eAAnB,CAAmCL,IAAnC,EAAyCtC,MAAzC,EAAiD,eAAjD;CACA,WAHD,MAKA;CACCqC,YAAAA,WAAW,CAACO,aAAZ,CAA0BN,IAA1B,EAAgCtC,MAAhC,EAAwC,IAAxC;CACA;CACD;CACD;CACD;CAED;;;;;;;;;0CAMqB6C,SACrB;CACC;;;CAGA,UAAI,OAAOA,OAAO,CAACC,WAAf,KAA+B,UAA/B,IAA6C,OAAOD,OAAO,CAACC,WAAR,EAAP,KAAiC,QAAlF,EACA;CACC7C,QAAAA,OAAO,CAACC,KAAR,CAAcC,KAAK,CAACC,aAAN,KAAwB,+EAAtC;CACA,eAAO,YAAU,EAAjB;CACA;;CAED,UAAIG,IAAI,GAAGxB,gBAAgB,CAACC,MAA5B;;CACA,UAAI,OAAO6D,OAAO,CAACE,mBAAf,KAAuC,UAA3C,EACA;CACCxC,QAAAA,IAAI,GAAGsC,OAAO,CAACE,mBAAR,EAAP;CACA;;CAED,WAAKC,SAAL,CAAe;CACdzC,QAAAA,IAAI,EAAEA,IADQ;CAEdI,QAAAA,QAAQ,EAAEkC,OAAO,CAACC,WAAR,EAFI;CAGdvB,QAAAA,QAAQ,EAAE,UAASN,IAAT,EACV;CACC,cAAIgC,MAAM,GAAG,IAAb;;CAEA,cAAI,OAAOJ,OAAO,CAACK,MAAf,KAA0B,UAA9B,EACA;CACC,gBAAIC,OAAO,GAAGN,OAAO,CAACK,MAAR,EAAd;;CACA,gBAAIC,OAAO,IAAI,oBAAOA,OAAP,MAAmB,QAAlC,EACA;CACC,kBAAI,OAAOA,OAAO,CAAClC,IAAI,CAACH,OAAN,CAAd,KAAiC,UAArC,EACA;CACCmC,gBAAAA,MAAM,GAAGE,OAAO,CAAClC,IAAI,CAACH,OAAN,CAAP,CAAsBY,IAAtB,CAA2BmB,OAA3B,CAAT;CACA,eAHD,MAIK,IAAI,OAAOM,OAAO,CAAClC,IAAI,CAACH,OAAN,CAAd,KAAiC,QAAjC,IAA6C,OAAO+B,OAAO,CAACM,OAAO,CAAClC,IAAI,CAACH,OAAN,CAAR,CAAd,KAA0C,UAA3F,EACL;CACCmC,gBAAAA,MAAM,GAAGJ,OAAO,CAACM,OAAO,CAAClC,IAAI,CAACH,OAAN,CAAR,CAAP,CAA+BY,IAA/B,CAAoCmB,OAApC,CAAT;CACA;CACD;CACD;;CAED,cAAI,CAACI,MAAL,EACA;CACC,gBAAIG,UAAU,GAAG,WAASnC,IAAI,CAACH,OAAL,CAAauC,MAAb,CAAoB,CAApB,EAAuBC,WAAvB,EAAT,GAAgDrC,IAAI,CAACH,OAAL,CAAayC,KAAb,CAAmB,CAAnB,CAAjE;;CACA,gBAAI,OAAOV,OAAO,CAACO,UAAD,CAAd,KAA+B,UAAnC,EACA;CACCH,cAAAA,MAAM,GAAGJ,OAAO,CAACO,UAAD,CAAP,CAAoB1B,IAApB,CAAyBmB,OAAzB,CAAT;CACA;CACD;;CAED,cAAII,MAAJ,EACA;CACC,gBAAI,KAAKjB,KAAL,IAAc,KAAKjC,OAAL,KAAiB,QAAnC,EACA;CACCE,cAAAA,OAAO,CAACgC,IAAR,CAAa9B,KAAK,CAACC,aAAN,KAAwB,8CAArC,EAAqFa,IAArF;CACA;;CACDgC,YAAAA,MAAM,CAAChC,IAAI,CAACjB,MAAN,EAAciB,IAAI,CAACF,KAAnB,EAA0BE,IAAI,CAACH,OAA/B,CAAN;CACA;CACD,SArCS,CAqCRY,IArCQ,CAqCH,IArCG;CAHI,OAAf;CA0CA;;;;CAED;;;;;;0BAMK1B,QACL;CACC;;;CAGAA,MAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;;CAEA,UAAIA,MAAM,CAACO,IAAP,KAAgBxB,gBAAgB,CAACC,MAAjC,IAA2CgB,MAAM,CAACO,IAAP,KAAgBxB,gBAAgB,CAACE,MAAhF,EACA;CACC,YAAI,OAAQ,KAAKY,YAAL,CAAkBG,MAAM,CAACO,IAAzB,CAAR,KAA4C,WAAhD,EACA;CACC,eAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,IAAiC,EAAjC;CACA;;CACD,YAAI,OAAQ,KAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,CAAR,KAA6D,WAAjE,EACA;CACC,eAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,IAAkD;CACjD,yBAAa,EADoC;CAEjD,wBAAY;CAFqC,WAAlD;CAIA;;CAED,YAAI,KAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,WAAhD,EAA6D6C,MAA7D,GAAsE,CAA1E,EACA;CACC,eAAK3D,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,WAAhD,EAA6D8C,OAA7D,CAAqE,UAASlC,QAAT,EAAkB;CACtFA,YAAAA,QAAQ,CAACvB,MAAM,CAACiB,IAAR,EAAc;CAACV,cAAAA,IAAI,EAAEP,MAAM,CAACO,IAAd;CAAoBI,cAAAA,QAAQ,EAAEX,MAAM,CAACW;CAArC,aAAd,CAAR;CACA,WAFD;CAGA;;CAED,YACC,KAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACiB,IAAP,CAAYH,OAAxE,KACG,KAAKjB,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACiB,IAAP,CAAYH,OAAxE,EAAiF0C,MAAjF,GAA0F,CAF9F,EAGA;CACC,eAAK3D,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BP,MAAM,CAACW,QAAtC,EAAgD,UAAhD,EAA4DX,MAAM,CAACiB,IAAP,CAAYH,OAAxE,EAAiF2C,OAAjF,CAAyF,UAASlC,QAAT,EAAkB;CAC1GA,YAAAA,QAAQ,CAACvB,MAAM,CAACiB,IAAP,CAAYjB,MAAb,EAAqBA,MAAM,CAACiB,IAAP,CAAYF,KAAjC,EAAwCf,MAAM,CAACiB,IAAP,CAAYH,OAApD,EAA6D;CAACP,cAAAA,IAAI,EAAEP,MAAM,CAACO,IAAd;CAAoBI,cAAAA,QAAQ,EAAEX,MAAM,CAACW;CAArC,aAA7D,CAAR;CACA,WAFD;CAGA;;CAED,eAAO,IAAP;CACA,OA/BD,MAiCA;CACC,YAAI,OAAQ,KAAKd,YAAL,CAAkBG,MAAM,CAACO,IAAzB,CAAR,KAA4C,WAAhD,EACA;CACC,eAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,IAAiC,EAAjC;CACA;;CAED,YAAI,KAAKV,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BiD,MAA/B,IAAyC,CAA7C,EACA;CACC,iBAAO,IAAP;CACA;;CAED,aAAK3D,YAAL,CAAkBG,MAAM,CAACO,IAAzB,EAA+BkD,OAA/B,CAAuC,UAASlC,QAAT,EAAkB;CACxDA,UAAAA,QAAQ,CAACvB,MAAM,CAACiB,IAAR,EAAc;CAACV,YAAAA,IAAI,EAAEP,MAAM,CAACO;CAAd,WAAd,CAAR;CACA,SAFD;;CAIA,eAAO,IAAP;CACA;CACD;;;;;CAGF,IAAIJ,KAAK,GACT;CACCuD,EAAAA,OADD,mBACSC,IADT,EAEC;CACC,WAAOA,IAAI,IAAIC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,IAA/B,MAAyC,gBAAxD;CACA,GAJF;CAKCK,EAAAA,SAAS,EAAE,mBAASL,IAAT,EAAe;CACzB,WAAOA,IAAI,IAAI,oBAAQA,IAAR,KAAiB,QAAzB,IAAqC,cAAcA,IAA1D;CACA,GAPF;CAQCM,EAAAA,MAAM,EAAE,gBAASN,IAAT,EAAe;CACtB,WAAOA,IAAI,IAAIC,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,IAA/B,MAAyC,eAAxD;CACA,GAVF;CAWCzC,EAAAA,KAXD,iBAWOgD,GAXP,EAWYC,QAXZ,EAYC;CACC,QAAIC,IAAJ,EAAUC,CAAV,EAAaC,CAAb;;CACA,QAAIH,QAAQ,KAAK,KAAjB,EACCA,QAAQ,GAAG,IAAX;CAED,QAAID,GAAG,KAAK,IAAZ,EACC,OAAO,IAAP;;CAED,QAAI,KAAKF,SAAL,CAAeE,GAAf,CAAJ,EACA;CACCE,MAAAA,IAAI,GAAGF,GAAG,CAACK,SAAJ,CAAcJ,QAAd,CAAP;CACA,KAHD,MAIK,IAAI,oBAAOD,GAAP,KAAc,QAAlB,EACL;CACC,UAAI,KAAKR,OAAL,CAAaQ,GAAb,CAAJ,EACA;CACCE,QAAAA,IAAI,GAAG,EAAP;;CACA,aAAKC,CAAC,GAAC,CAAF,EAAIC,CAAC,GAACJ,GAAG,CAACV,MAAf,EAAsBa,CAAC,GAACC,CAAxB,EAA0BD,CAAC,EAA3B,EACA;CACC,cAAI,oBAAOH,GAAG,CAACG,CAAD,CAAV,KAAiB,QAAjB,IAA6BF,QAAjC,EACCC,IAAI,CAACC,CAAD,CAAJ,GAAU,KAAKnD,KAAL,CAAWgD,GAAG,CAACG,CAAD,CAAd,EAAmBF,QAAnB,CAAV,CADD,KAGCC,IAAI,CAACC,CAAD,CAAJ,GAAUH,GAAG,CAACG,CAAD,CAAb;CACD;CACD,OAVD,MAYA;CACCD,QAAAA,IAAI,GAAI,EAAR;;CACA,YAAIF,GAAG,CAACM,WAAR,EACA;CACC,cAAI,KAAKP,MAAL,CAAYC,GAAZ,CAAJ,EACCE,IAAI,GAAG,IAAIK,IAAJ,CAASP,GAAT,CAAP,CADD,KAGCE,IAAI,GAAG,IAAIF,GAAG,CAACM,WAAR,EAAP;CACD;;CAED,aAAKH,CAAL,IAAUH,GAAV,EACA;CACC,cAAI,CAACA,GAAG,CAACQ,cAAJ,CAAmBL,CAAnB,CAAL,EACA;CACC;CACA;;CACD,cAAI,oBAAOH,GAAG,CAACG,CAAD,CAAV,KAAiB,QAAjB,IAA6BF,QAAjC,EACCC,IAAI,CAACC,CAAD,CAAJ,GAAU,KAAKnD,KAAL,CAAWgD,GAAG,CAACG,CAAD,CAAd,EAAmBF,QAAnB,CAAV,CADD,KAGCC,IAAI,CAACC,CAAD,CAAJ,GAAUH,GAAG,CAACG,CAAD,CAAb;CACD;CACD;CAED,KArCI,MAuCL;CACCD,MAAAA,IAAI,GAAGF,GAAP;CACA;;CAED,WAAOE,IAAP;CACA,GApEF;CAqEC/D,EAAAA,aArED,yBAqEesD,IArEf,EAsEC;CACC,QAAG,CAACA,IAAD,IAAS,oBAAOA,IAAP,MAAiB,QAA1B,IAAsCA,IAAI,CAACgB,QAA9C,EACA;CACC,aAAO,KAAP;CACA;;CAED,QAAIC,OAAO,GAAGhB,MAAM,CAACC,SAAP,CAAiBa,cAA/B;;CACA,QACA;CACC,UAAIf,IAAI,CAACa,WAAL,IAAoB,CAACI,OAAO,CAACb,IAAR,CAAaJ,IAAb,EAAmB,aAAnB,CAArB,IAA0D,CAACiB,OAAO,CAACb,IAAR,CAAaJ,IAAI,CAACa,WAAL,CAAiBX,SAA9B,EAAyC,eAAzC,CAA/D,EACA;CACC,eAAO,KAAP;CACA;CACD,KAND,CAOA,OAAOgB,CAAP,EACA;CACC,aAAO,KAAP;CACA;;CAED,QAAIC,GAAJ;;CACA,SAAKA,GAAL,IAAYnB,IAAZ,EACA;;CAEA,WAAO,OAAOmB,GAAP,KAAgB,WAAhB,IAA+BF,OAAO,CAACb,IAAR,CAAaJ,IAAb,EAAmBmB,GAAnB,CAAtC;CACA,GA9FF;CA+FCC,EAAAA,IA/FD,gBA+FMC,GA/FN,EA+FWxB,MA/FX,EA+FmByB,GA/FnB,EAgGC;CACCD,IAAAA,GAAG,GAAGA,GAAG,CAAClB,QAAJ,EAAN;CACAmB,IAAAA,GAAG,GAAGA,GAAG,IAAI,GAAb;;CAEA,QAAGD,GAAG,CAACxB,MAAJ,GAAaA,MAAhB,EACA;CACC,aAAOwB,GAAP;CACA;;CAED,QAAIE,MAAM,GAAG,EAAb;;CACA,SAAI,IAAIb,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGb,MAAM,GAAGwB,GAAG,CAACxB,MAAhC,EAAwCa,CAAC,EAAzC,EACA;CACCa,MAAAA,MAAM,IAAID,GAAV;CACA;;CAED,WAAOC,MAAM,GAAGF,GAAhB;CACA,GAhHF;CAiHC5E,EAAAA,aAjHD,2BAkHC;CACC,QAAI+E,CAAC,GAAG,IAAIV,IAAJ,EAAR;CACA,WAAOU,CAAC,CAACC,WAAF,KAAkB,GAAlB,GAAwBjF,KAAK,CAAC4E,IAAN,CAAWI,CAAC,CAACE,QAAF,EAAX,EAAyB,CAAzB,EAA4B,GAA5B,CAAxB,GAA2D,GAA3D,GAAiElF,KAAK,CAAC4E,IAAN,CAAWI,CAAC,CAACG,OAAF,EAAX,EAAwB,CAAxB,EAA2B,GAA3B,CAAjE,GAAmG,GAAnG,GAAyGnF,KAAK,CAAC4E,IAAN,CAAWI,CAAC,CAACI,QAAF,EAAX,EAAyB,CAAzB,EAA4B,GAA5B,CAAzG,GAA4I,GAA5I,GAAkJpF,KAAK,CAAC4E,IAAN,CAAWI,CAAC,CAACK,UAAF,EAAX,EAA2B,CAA3B,EAA8B,GAA9B,CAAzJ;CACA;CArHF,CADA;;AA2HA,KAAIC,IAAI,GAAG,IAAI7F,UAAJ,EAAX;CAEAA,UAAU,CAACjB,UAAX,GAAwBA,UAAxB;CACAiB,UAAU,CAACb,gBAAX,GAA8BA,gBAA9B;CACAa,UAAU,CAACR,YAAX,GAA0BA,YAA1B;;;;;;;;;;"}