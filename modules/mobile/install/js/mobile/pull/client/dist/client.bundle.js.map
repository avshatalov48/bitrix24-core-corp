{"version":3,"file":"client.bundle.js","sources":["../src/client.js"],"sourcesContent":["/**\n * Bitrix Mobile App\n * Pull client\n *\n * @package bitrix\n * @subpackage mobile\n * @copyright 2001-2019 Bitrix\n */\n\n/**\n * After modify this script, copy to:\n * mobile/install/mobileapp/mobile/extensions/bitrix/pull/client/events/extension.js\n */\n\n// start common code\n\nvar PullStatus = {\n\tOnline: 'online',\n\tOffline: 'offline',\n\tConnecting: 'connect'\n};\n\nvar SubscriptionType = {\n\tServer: 'server',\n\tClient: 'client',\n\tOnline: 'online',\n\tStatus: 'status',\n\tRevision: 'revision'\n};\n\nvar CloseReasons = {\n\tNORMAL_CLOSURE : 1000,\n\tSERVER_DIE : 1001,\n\tCONFIG_REPLACED : 3000,\n\tCHANNEL_EXPIRED : 3001,\n\tSERVER_RESTARTED : 3002,\n\tCONFIG_EXPIRED : 3003,\n\tMANUAL : 3004,\n};\n\nclass PullEvents\n{\n\tconstructor()\n\t{\n\t\tthis._subscribers = {};\n\t\tthis._eventListener = {};\n\n\t\tthis.context = 'client';\n\t}\n\n\t/**\n\t * Creates a subscription to incoming messages.\n\t *\n\t * @param {Object} params\n\t * @param {string} [params.type] Subscription type (for possible values see SubscriptionType).\n\t * @param {string} [params.command] command\n\t * @param {string} [params.moduleId] Name of the module.\n\t * @param {Function} params.callback Function, that will be called for incoming messages.\n\t * @returns {Function} - Unsubscribe callback function\n\t */\n\tsubscribe(params = {})\n\t{\n\t\tif (!params)\n\t\t{\n\t\t\tconsole.error(Utils.getDateForLog() + ': Pull.subscribe: params for subscribe function is invalid. ');\n\t\t\treturn function(){}\n\t\t}\n\n\t\tif (!Utils.isPlainObject(params))\n\t\t{\n\t\t\treturn this.attachCommandHandler(params);\n\t\t}\n\n\t\tparams.type = params.type || SubscriptionType.Server;\n\n\t\tlet eventName = '';\n\t\tlet eventType = params.type;\n\n\t\tif (\n\t\t\teventType === SubscriptionType.Server\n\t\t\t|| eventType === SubscriptionType.Client\n\t\t\t|| eventType === SubscriptionType.Online\n\t\t)\n\t\t{\n\t\t\tif (eventType === SubscriptionType.Server)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullEvent-\" + params.moduleId: \"onPull-\" + params.moduleId;\n\t\t\t}\n\t\t\telse if (eventType === SubscriptionType.Client)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullClientEvent-\" + params.moduleId: \"onPullClient-\" + params.moduleId;\n\t\t\t}\n\t\t\telse if (eventType === SubscriptionType.Online)\n\t\t\t{\n\t\t\t\teventName = typeof env !== 'undefined'? \"onPullOnlineEvent\": 'onPullOnline';\n\t\t\t}\n\n\t\t\tif (eventName && !this._eventListener[eventName])\n\t\t\t{\n\t\t\t\tthis._eventListener[eventName] = true;\n\n\t\t\t\tif (typeof env !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tBX.addCustomEvent(eventName, (command, params, extra, moduleId) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (eventType === SubscriptionType.Online)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmoduleId = 'online';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tmoduleId : moduleId,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tcommand,\n\t\t\t\t\t\t\t\tparams: Utils.clone(params),\n\t\t\t\t\t\t\t\textra: Utils.clone(extra)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.receiveComponentEvent(eventName, data =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (eventType === SubscriptionType.Online)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.module_id = 'online';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tmoduleId : data.module_id,\n\t\t\t\t\t\t\tdata: Utils.clone(data)\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (eventType === SubscriptionType.Status)\n\t\t{\n\t\t\teventName = 'onPullStatus';\n\n\t\t\tif (eventName && !this._eventListener[eventName])\n\t\t\t{\n\t\t\t\tthis._eventListener[eventName] = true;\n\n\t\t\t\tif (typeof env !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tBX.addCustomEvent(eventName, (status) => {\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tdata: {status}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.receiveComponentEvent(eventName, data => {\n\t\t\t\t\t\tthis.emit({\n\t\t\t\t\t\t\ttype : eventType,\n\t\t\t\t\t\t\tdata: Utils.clone(data)\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t/**\n\t\t *  Dont modify following code, copy from pull/install/js/pull/client/pull.client.js: 'subscribe'\n\t\t */\n\t\tparams.command = params.command || null;\n\n\t\tif (params.type === SubscriptionType.Server || params.type === SubscriptionType.Client)\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = {};\n\t\t\t}\n\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId] = {\n\t\t\t\t\t'callbacks': [],\n\t\t\t\t\t'commands': {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (params.command)\n\t\t\t{\n\t\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]['commands'][params.command]) === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command] = [];\n\t\t\t\t}\n\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command].push(params.callback);\n\n\t\t\t\treturn function () {\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.command] = this._subscribers[params.type][params.moduleId]['commands'][params.command].filter(function(element) {\n\t\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t\t});\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'].push(params.callback);\n\n\t\t\t\treturn function () {\n\t\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'] = this._subscribers[params.type][params.moduleId]['callbacks'].filter(function(element) {\n\t\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t\t});\n\t\t\t\t}.bind(this);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = [];\n\t\t\t}\n\n\t\t\tthis._subscribers[params.type].push(params.callback);\n\n\t\t\treturn function () {\n\t\t\t\tthis._subscribers[params.type] = this._subscribers[params.type].filter(function(element) {\n\t\t\t\t\treturn element !== params.callback;\n\t\t\t\t});\n\t\t\t}.bind(this);\n\t\t}\n\t};\n\n\textendWatch(tagId, force = false)\n\t{\n\t\tthis.postComponentEvent(\"onPullExtendWatch\", {id: tagId, force});\n\t\treturn true;\n\t}\n\n\tclearWatch(tagId)\n\t{\n\t\tthis.postComponentEvent(\"onPullClearWatch\", {id: tagId});\n\t\treturn true;\n\t}\n\n\tcapturePullEvent(debugFlag = true)\n\t{\n\t\tif (this.debug === null)\n\t\t{\n\t\t\tconsole.warn('PullEvents.capturePullEvent: only commands from subscribed modules are logged.')\n\t\t}\n\n\t\tthis.debug = !!debugFlag;\n\n\t\tconsole.log('PullEvents.capturePullEvent: logger turn '+(this.debug? 'on': 'off'))\n\t}\n\n\tgetDebugInfo()\n\t{\n\t\tthis.postComponentEvent(\"onPullGetDebugInfo\");\n\n\t\tif (!this._eventListener[\"onPullGetDebugInfoResult\"])\n\t\t{\n\t\t\tthis._eventListener[\"onPullGetDebugInfoResult\"] = true;\n\t\t\tthis.receiveComponentEvent(\"onPullGetDebugInfoResult\", data => {\n\t\t\t\tif (typeof data === 'string')\n\t\t\t\t{\n\t\t\t\t\tconsole.info(data)\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.info(data.text);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param eventName\n\t * @param callback\n\t */\n\treceiveComponentEvent(eventName, callback)\n\t{\n\t\tif (typeof BXMobileApp !== 'undefined' && typeof BXMobileApp.addCustomEvent !== 'undefined')\n\t\t{\n\t\t\tBXMobileApp.addCustomEvent(eventName, callback);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addCustomEvent(eventName, callback);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param name\n\t * @param params\n\t */\n\tpostComponentEvent(name, params = {})\n\t{\n\t\tif (typeof BX.postComponentEvent !== 'undefined')\n\t\t{\n\t\t\tBX.postComponentEvent(name, [params], \"communication\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof window.app !== 'undefined'\n\t\t\t\t&& typeof window.app.enableInVersion !== 'undefined'\n\t\t\t\t&& typeof BXMobileApp !== 'undefined'\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (window.app.enableInVersion(25))\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.Events.postToComponent(name, params, \"communication\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBXMobileApp.onCustomEvent(name, params, true);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t *\n\t * @param handler\n\t * @returns {Function}\n\t */\n\tattachCommandHandler(handler)\n\t{\n\t\t/**\n\t\t *  Dont modify this method, this is copy from pull/install/js/pull/client/pull.client.js: 'attachCommandHandler'\n\t\t */\n\t\tif (typeof handler.getModuleId !== 'function' || typeof handler.getModuleId() !== 'string')\n\t\t{\n\t\t\tconsole.error(Utils.getDateForLog() + ': Pull.attachCommandHandler: result of handler.getModuleId() is not a string.');\n\t\t\treturn function(){}\n\t\t}\n\n\t\tvar type = SubscriptionType.Server;\n\t\tif (typeof handler.getSubscriptionType === 'function')\n\t\t{\n\t\t\ttype = handler.getSubscriptionType();\n\t\t}\n\n\t\tthis.subscribe({\n\t\t\ttype: type,\n\t\t\tmoduleId: handler.getModuleId(),\n\t\t\tcallback: function(data)\n\t\t\t{\n\t\t\t\tvar method = null;\n\n\t\t\t\tif (typeof handler.getMap === 'function')\n\t\t\t\t{\n\t\t\t\t\tlet mapping = handler.getMap();\n\t\t\t\t\tif (mapping && typeof mapping === 'object')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof mapping[data.command] === 'function')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod = mapping[data.command].bind(handler)\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof mapping[data.command] === 'string' && typeof handler[mapping[data.command]] === 'function')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmethod = handler[mapping[data.command]].bind(handler);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!method)\n\t\t\t\t{\n\t\t\t\t\tvar methodName = 'handle'+data.command.charAt(0).toUpperCase() + data.command.slice(1);\n\t\t\t\t\tif (typeof handler[methodName] === 'function')\n\t\t\t\t\t{\n\t\t\t\t\t\tmethod = handler[methodName].bind(handler);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (method)\n\t\t\t\t{\n\t\t\t\t\tif (this.debug && this.context !== 'master')\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.warn(Utils.getDateForLog() + ': Pull.attachCommandHandler: receive command', data);\n\t\t\t\t\t}\n\t\t\t\t\tmethod(data.params, data.extra, data.command);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t});\n\t};\n\n\t/**\n\t * @private\n\t *\n\t * @param params\n\t * @returns {boolean}\n\t */\n\temit(params)\n\t{\n\t\t/**\n\t\t *  Dont modify this method, this is copy from pull/install/js/pull/client/pull.client.js: 'emit'\n\t\t */\n\t\tparams = params || {};\n\n\t\tif (params.type === SubscriptionType.Server || params.type === SubscriptionType.Client)\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = {};\n\t\t\t}\n\t\t\tif (typeof (this._subscribers[params.type][params.moduleId]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId] = {\n\t\t\t\t\t'callbacks': [],\n\t\t\t\t\t'commands': {},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (this._subscribers[params.type][params.moduleId]['callbacks'].length > 0)\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['callbacks'].forEach(function(callback){\n\t\t\t\t\tcallback(params.data, {type: params.type, moduleId: params.moduleId});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.data.command]\n\t\t\t\t&& this._subscribers[params.type][params.moduleId]['commands'][params.data.command].length > 0)\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type][params.moduleId]['commands'][params.data.command].forEach(function(callback){\n\t\t\t\t\tcallback(params.data.params, params.data.extra, params.data.command, {type: params.type, moduleId: params.moduleId});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof (this._subscribers[params.type]) === 'undefined')\n\t\t\t{\n\t\t\t\tthis._subscribers[params.type] = [];\n\t\t\t}\n\n\t\t\tif (this._subscribers[params.type].length <= 0)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis._subscribers[params.type].forEach(function(callback){\n\t\t\t\tcallback(params.data, {type: params.type});\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nvar Utils =\n{\n\tisArray(item)\n\t{\n\t\treturn item && Object.prototype.toString.call(item) === \"[object Array]\";\n\t},\n\tisDomNode: function(item) {\n\t\treturn item && typeof (item) == \"object\" && \"nodeType\" in item;\n\t},\n\tisDate: function(item) {\n\t\treturn item && Object.prototype.toString.call(item) === \"[object Date]\";\n\t},\n\tclone(obj, bCopyObj)\n\t{\n\t\tlet _obj, i, l;\n\t\tif (bCopyObj !== false)\n\t\t\tbCopyObj = true;\n\n\t\tif (obj === null)\n\t\t\treturn null;\n\n\t\tif (this.isDomNode(obj))\n\t\t{\n\t\t\t_obj = obj.cloneNode(bCopyObj);\n\t\t}\n\t\telse if (typeof obj == 'object')\n\t\t{\n\t\t\tif (this.isArray(obj))\n\t\t\t{\n\t\t\t\t_obj = [];\n\t\t\t\tfor (i=0,l=obj.length;i<l;i++)\n\t\t\t\t{\n\t\t\t\t\tif (typeof obj[i] == \"object\" && bCopyObj)\n\t\t\t\t\t\t_obj[i] = this.clone(obj[i], bCopyObj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t_obj =  {};\n\t\t\t\tif (obj.constructor)\n\t\t\t\t{\n\t\t\t\t\tif (this.isDate(obj))\n\t\t\t\t\t\t_obj = new Date(obj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj = new obj.constructor();\n\t\t\t\t}\n\n\t\t\t\tfor (i in obj)\n\t\t\t\t{\n\t\t\t\t\tif (!obj.hasOwnProperty(i))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof obj[i] == \"object\" && bCopyObj)\n\t\t\t\t\t\t_obj[i] = this.clone(obj[i], bCopyObj);\n\t\t\t\t\telse\n\t\t\t\t\t\t_obj[i] = obj[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\telse\n\t\t{\n\t\t\t_obj = obj;\n\t\t}\n\n\t\treturn _obj;\n\t},\n\tisPlainObject(item)\n\t{\n\t\tif(!item || typeof(item) !== \"object\" || item.nodeType)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet hasProp = Object.prototype.hasOwnProperty;\n\t\ttry\n\t\t{\n\t\t\tif (item.constructor && !hasProp.call(item, \"constructor\") && !hasProp.call(item.constructor.prototype, \"isPrototypeOf\") )\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet key;\n\t\tfor (key in item)\n\t\t{\n\t\t}\n\t\treturn typeof(key) === \"undefined\" || hasProp.call(item, key);\n\t},\n\tlpad(str, length, chr)\n\t{\n\t\tstr = str.toString();\n\t\tchr = chr || ' ';\n\n\t\tif(str.length > length)\n\t\t{\n\t\t\treturn str;\n\t\t}\n\n\t\tlet result = '';\n\t\tfor(var i = 0; i < length - str.length; i++)\n\t\t{\n\t\t\tresult += chr;\n\t\t}\n\n\t\treturn result + str;\n\t},\n\tgetDateForLog()\n\t{\n\t\tlet d = new Date();\n\t\treturn d.getFullYear() + \"-\" + Utils.lpad(d.getMonth(), 2, '0') + \"-\" + Utils.lpad(d.getDate(), 2, '0') + \" \" + Utils.lpad(d.getHours(), 2, '0') + \":\" + Utils.lpad(d.getMinutes(), 2, '0');\n\t},\n};\n\n// end common code\n\nvar PULL = new PullEvents;\n\nPullEvents.PullStatus = PullStatus;\nPullEvents.SubscriptionType = SubscriptionType;\nPullEvents.CloseReasons = CloseReasons;\n\nexport {PULL, PullEvents as PullClient, PullEvents}"],"names":["PullStatus","Online","Offline","Connecting","SubscriptionType","Server","Client","Status","Revision","CloseReasons","NORMAL_CLOSURE","SERVER_DIE","CONFIG_REPLACED","CHANNEL_EXPIRED","SERVER_RESTARTED","CONFIG_EXPIRED","MANUAL","PullEvents","_subscribers","_eventListener","context","params","console","error","Utils","getDateForLog","isPlainObject","attachCommandHandler","type","eventName","eventType","env","moduleId","BX","addCustomEvent","command","extra","emit","data","clone","receiveComponentEvent","module_id","status","push","callback","filter","element","bind","tagId","force","postComponentEvent","id","debugFlag","debug","warn","log","info","text","BXMobileApp","name","window","app","enableInVersion","Events","postToComponent","onCustomEvent","handler","getModuleId","getSubscriptionType","subscribe","method","getMap","mapping","methodName","charAt","toUpperCase","slice","length","forEach","isArray","item","Object","prototype","toString","call","isDomNode","isDate","obj","bCopyObj","_obj","i","l","cloneNode","constructor","Date","hasOwnProperty","nodeType","hasProp","e","key","lpad","str","chr","result","d","getFullYear","getMonth","getDate","getHours","getMinutes","PULL"],"mappings":"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"}