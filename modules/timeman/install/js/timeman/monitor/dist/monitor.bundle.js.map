{"version":3,"file":"monitor.bundle.js","sources":["../src/model/utils/code.js","../src/model/utils/time.js","../src/lib/logger.js","../src/lib/debug.js","../src/lib/action-timer.js","../src/lib/notification.js","../src/model/monitor.js","../src/model/entity.js","../src/eventhandler.js","../src/sender.js","../src/lib/commandhandler.js","../src/monitor.js"],"sourcesContent":["import {md5} from 'main.md5';\nimport {sha1} from 'main.sha1';\n\nexport class Code\n{\n\tstatic createPublic(...params)\n\t{\n\t\treturn md5(params.join(''));\n\t}\n\n\tstatic createPrivate(...params)\n\t{\n\t\treturn sha1(params.join(''));\n\t}\n\n\tstatic createSecret()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPrivate(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark(),\n\t\t\t+Date.now(),\n\t\t);\n\t}\n\n\tstatic getDesktopCode()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPublic(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark()\n\t\t);\n\t}\n}","export class Time\n{\n\tstatic calculateInEntityOnADate(state, entity, date)\n\t{\n\t\treturn state.history\n\t\t\t.filter(entry => (\n\t\t\t\tentry.privateCode === entity.privateCode\n\t\t\t\t&& entry.dateLog === date\n\t\t\t))\n\t\t\t.map(Time.calculateInEntry)\n\t\t\t.reduce((sum, time) => sum + time, 0);\n\t}\n\n\tstatic calculateInEntry(entry)\n\t{\n\t\tconst time = entry.time\n\t\t\t.map(interval => {\n\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t})\n\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\treturn Math.round(time / 1000);\n\t}\n\n\tstatic formatDateToTime(date: Date)\n\t{\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst hour = date.getHours();\n\t\tconst min = addZero(date.getMinutes());\n\n\t\treturn hour + ':' + min;\n\t}\n\n\tstatic msToSec(ms)\n\t{\n\t\treturn ms / 1000;\n\t}\n}","import {Type} from 'main.core';\nimport {Monitor} from '../monitor';\n\nclass Logger\n{\n\tconstructor()\n\t{\n\t\tthis.storageKey = 'bx-timeman-monitor-logger-enabled';\n\t\tthis.enabled = null;\n\t}\n\n\tstart()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.storageKey, 'Y');\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tstop()\n\t{\n\t\tthis.enabled = false;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.removeItem(this.storageKey);\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tisEnabled()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.enabled === null)\n\t\t{\n\t\t\tif (typeof window.localStorage !== 'undefined')\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tthis.enabled = window.localStorage.getItem(this.storageKey) === 'Y';\n\t\t\t\t}\n\t\t\t\tcatch(e) {}\n\t\t\t}\n\t\t}\n\n\t\treturn this.enabled === true;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.log(...params);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.info(...params);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.warn(...params);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tconsole.error(...params);\n\t}\n\n\ttrace(...params)\n\t{\n\t\tconsole.trace(...params);\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};","import {Loc} from 'main.core';\n\nclass Debug\n{\n\tconstructor()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn this.enabled;\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = true;\n\t}\n\n\tdisable()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = this.getLogMessage(...params);\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', text.substr(3));\n\t}\n\n\tspace()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', ' ');\n\t}\n\n\tgetLogMessage()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = '';\n\n\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tif(arguments[i] instanceof Error)\n\t\t\t{\n\t\t\t\ttext = arguments[i].message + \"\\n\" + arguments[i].stack\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | '+(typeof(arguments[i]) == 'object'? JSON.stringify(arguments[i]): arguments[i]);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | (circular structure)';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn text;\n\t}\n}\n\nlet debug = new Debug();\n\nexport {debug as Debug};","class ActionTimer\n{\n\tconstructor()\n\t{\n\t\tthis.actionsCollection = {};\n\t}\n\n\tstart(key)\n\t{\n\t\tthis.actionsCollection[key] = {};\n\t\tthis.actionsCollection[key].start = Date.now();\n\t}\n\n\tfinish(key)\n\t{\n\t\tif (\n\t\t\t!this.actionsCollection[key]\n\t\t\t|| !this.actionsCollection[key].start\n\t\t\t|| this.actionsCollection[key].finish\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.actionsCollection[key].finish = Date.now();\n\t}\n\n\tgetDuration(key)\n\t{\n\t\tif (\n\t\t\t!this.actionsCollection[key]\n\t\t\t|| !this.actionsCollection[key].start\n\t\t\t|| !this.actionsCollection[key].finish\n\t\t)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst timeInSeconds = (this.actionsCollection[key].finish - this.actionsCollection[key].start) / 1000;\n\n\t\treturn `ACTION: ${key}, TIME: ${timeInSeconds.toFixed(2)}s`;\n\t}\n}\n\nlet actionTimer = new ActionTimer();\n\nexport {actionTimer as ActionTimer};","import {Type} from 'main.core';\n\nexport class Notification\n{\n\tconstructor(title, text, callback)\n\t{\n\t\tthis.title = title.toString();\n\t\tthis.text = text.toString();\n\n\t\tif (Type.isFunction(callback))\n\t\t{\n\t\t\tthis.callback = callback;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tshow()\n\t{\n\t\tBXIM.playSound('newMessage1');\n\n\t\tconst messageTemplate = BXIM.notify.createNotify({\n\t\t\tid: 0, type: 4,\n\t\t\tdate: new Date(),\n\t\t\tparams: {},\n\t\t\ttitle: this.title,\n\t\t\ttext: this.text,\n\t\t}, true);\n\n\t\tconst messageJs = `\n\t\t\tvar notify = BX.findChildByClassName(document.body, \"bx-notifier-item\");\n\t\t\t\n\t\t\tnotify.style.cursor = \"pointer\";\n\t\t\t\n\t\t\tBX.bind(notify, \"click\", function() {\n\t\t\t\tBX.desktop.onCustomEvent(\"main\", \"bxImClickPwtMessage\", []);\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(BX.findChildByClassName(notify, \"bx-notifier-item-delete\"), \"click\", function(event) { \n\t\t\t\tBX.desktop.windowCommand(\"close\"); \n\t\t\t\tBX.MessengerCommon.preventDefault(event); \n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(notify, \"contextmenu\", function() {\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t`;\n\n\t\tBXIM.desktop.openNewMessage('pwt' + (new Date), messageTemplate, messageJs);\n\n\t\tBX.desktop.addCustomEvent('bxImClickPwtMessage', () => this.click());\n\t}\n\n\tclick()\n\t{\n\t\tif (Type.isFunction(this.callback))\n\t\t{\n\t\t\tthis.callback();\n\t\t}\n\n\t\tBX.desktop.removeCustomEvents('bxImClickPwtMessage');\n\t}\n}","import {Loc, Type} from 'main.core';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {EntityType, EntityGroup} from 'timeman.const';\nimport {Code} from './utils/code';\nimport {Time} from './utils/time';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {ActionTimer} from '../lib/action-timer';\nimport {DateFormatter} from 'timeman.dateformatter';\nimport {Notification} from \"../lib/notification\";\n\nexport class MonitorModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'monitor';\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 1000;\n\t}\n\n\tgetLoadTimeout()\n\t{\n\t\treturn false;\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tconfig: {\n\t\t\t\tsecret: Code.createSecret(),\n\t\t\t\tdesktopCode: Code.getDesktopCode(),\n\t\t\t\totherTime: this.getVariable('config.otherTime', 1800000),\n\t\t\t\tshortAbsenceTime: this.getVariable('config.shortAbsenceTime', 1800000),\n\t\t\t\tpausedUntil: null,\n\t\t\t\tlastSuccessfulSendDate: null,\n\t\t\t\tlastRemindDate: null,\n\t\t\t\tgrantingPermissionDate: null,\n\t\t\t\tdeferredGrantingPermissionShowDate: null,\n\t\t\t},\n\t\t\treportState: {\n\t\t\t\tdateLog: this.getDateLog(),\n\t\t\t\tcomments: [],\n\t\t\t},\n\t\t\tpersonal: [],\n\t\t\tstrictlyWorking: [],\n\t\t\tentity: [],\n\t\t\thistory: [],\n\t\t\tsentQueue: [],\n\t\t};\n\t}\n\n\tgetEntityState()\n\t{\n\t\treturn {\n\t\t\ttype: EntityType.unknown,\n\t\t\ttitle: '',\n\t\t\tpublicCode: '',\n\t\t\tprivateCode: '',\n\t\t\tcomments: [],\n\t\t\textra: {},\n\t\t};\n\t}\n\n\tgetHistoryState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tprivateCode: '',\n\t\t\ttime: [{\n\t\t\t\tstart: new Date(),\n\t\t\t\tpreFinish: null,\n\t\t\t\tfinish: null\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetSentQueueState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tcomment: '',\n\t\t\thistoryPackage: [],\n\t\t\tchartPackage: [],\n\t\t\tdesktopCode: '',\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (Type.isString(payload))\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date(payload);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t\t\t&& payload.length === 10\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('setDateLog', payload);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trefreshDateLog: (store) =>\n\t\t\t{\n\t\t\t\tif (Type.isArrayFilled(store.state.history))\n\t\t\t\t{\n\t\t\t\t\tlet firstHistoryEntryDateLog = store.state.history[0].dateLog;\n\t\t\t\t\tthis.getActions().setDateLog(store, firstHistoryEntryDateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = this.getDateLog();\n\t\t\t\t\tthis.getActions().setDateLog(store, dateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${dateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${dateLog}`);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('setLastRemindDate', date);\n\t\t\t},\n\n\t\t\tgrantPermission: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('setGrantingPermissionDate', new Date());\n\t\t\t},\n\n\t\t\tshowGrantingPermissionLater: (store) =>\n\t\t\t{\n\t\t\t\tlet date = new Date();\n\t\t\t\tdate.setDate(date.getDate() + 1);\n\n\t\t\t\tlet formattedDate = MonitorModel.prototype.formatDateLog(date);\n\n\t\t\t\tstore.commit('setDeferredGrantingPermissionShowDate', formattedDate);\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (store, date) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setLastSuccessfulSendDate', date);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\taddPersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addPersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\tremovePersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removePersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addToStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeFromStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStrictlyWorking');\n\t\t\t},\n\n\t\t\tclearPersonal: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPersonal');\n\t\t\t},\n\n\t\t\taddEntity: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validateEntity({...payload});\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type !== EntityType.absence\n\t\t\t\t\t&& result.type !== EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, store.state.config.secret);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tconst timestamp = +date;\n\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title, timestamp);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, timestamp, store.state.config.secret);\n\n\t\t\t\t\tif (result.type === EntityType.absence)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.extra = {\n\t\t\t\t\t\t\ttimeStart: date,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tresult.title +=\n\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t+ Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE_FROM_TIME')\n\t\t\t\t\t\t\t+ ' '\n\t\t\t\t\t\t\t+ Time.formatDateToTime(result.extra.timeStart)\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('addEntity', {\n\t\t\t\t\t...this.getEntityState(),\n\t\t\t\t\t...result,\n\t\t\t\t});\n\n\t\t\t\tif (!store.state.strictlyWorking.find(privateCode => privateCode === result.privateCode))\n\t\t\t\t{\n\t\t\t\t\tconst isBitrix24Cp = (\n\t\t\t\t\t\tresult.type === EntityType.site\n\t\t\t\t\t\t&& result.title === location.host\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isBitrix24Desktop = (\n\t\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t\t&& payload.isBitrix24Desktop\n\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tisBitrix24Cp\n\t\t\t\t\t\t|| isBitrix24Desktop\n\t\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('addToStrictlyWorking', result.privateCode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeEntityByPrivateCode', payload);\n\t\t\t},\n\n\t\t\tclearEntities: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearEntities');\n\t\t\t},\n\n\t\t\taddHistory: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\n\t\t\t\tconst result = this.validateHistory({...payload});\n\n\t\t\t\tlet entity;\n\t\t\t\tlet privateCode;\n\t\t\t\tlet historyEntry = null;\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t|| result.type === EntityType.site\n\t\t\t\t\t|| result.type === EntityType.unknown\n\t\t\t\t\t|| result.type === EntityType.incognito\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getEntityByTitle(store, result.title);\n\t\t\t\t\tprivateCode = (entity ? entity.privateCode : null);\n\n\t\t\t\t\tif (!privateCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tprivateCode = this.getActions().addEntity(store, payload).privateCode;\n\t\t\t\t\t}\n\n\t\t\t\t\thistoryEntry = (entity && entity.type === EntityType.site)\n\t\t\t\t\t\t? this.getHistoryEntryBySiteUrl(store, result.siteUrl)\n\t\t\t\t\t\t: this.getHistoryEntryByPrivateCode(store, privateCode);\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tresult.type === EntityType.absence\n\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getActions().addEntity(store, payload);\n\t\t\t\t\tprivateCode = entity.privateCode;\n\t\t\t\t}\n\n\t\t\t\tconst logEntity = {\n\t\t\t\t\ttype: result.type,\n\t\t\t\t\ttitle: result.title,\n\t\t\t\t};\n\n\t\t\t\tif (!historyEntry)\n\t\t\t\t{\n\t\t\t\t\tdelete result.title;\n\n\t\t\t\t\tstore.commit('addHistory', {\n\t\t\t\t\t\t...this.getHistoryState(),\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tprivateCode,\n\t\t\t\t\t});\n\n\t\t\t\t\tActionTimer.finish('CATCH_ENTITY');\n\t\t\t\t\tDebug.log('Caught new:', logEntity, ActionTimer.getDuration('CATCH_ENTITY'));\n\t\t\t\t\tLogger.log('Caught new:', logEntity, ActionTimer.getDuration('CATCH_ENTITY'));\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.type !== EntityType.custom)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('startIntervalForHistoryEntry', historyEntry);\n\t\t\t\t}\n\n\t\t\t\tlet lastRemindDate = store.state.config.lastRemindDate;\n\t\t\t\tlet canShowReminder = new Date(lastRemindDate) < new Date(this.getDateLog());\n\t\t\t\tlet isHistorySent = this.getGetters().isHistorySent(store.state);\n\n\t\t\t\tif (!lastRemindDate || (canShowReminder && !isHistorySent))\n\t\t\t\t{\n\t\t\t\t\tif (this.getGetters().getWorkingTimeForToday(store.state) >= 32400) //9 hour in seconds\n\t\t\t\t\t{\n\t\t\t\t\t\tnew Notification(\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TITLE'),\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TEXT'),\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t\t\t\t\tBX.desktop.changeTab('im');\n\t\t\t\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).show();\n\n\t\t\t\t\t\tstore.commit('setLastRemindDate', this.getDateLog());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tActionTimer.finish('CATCH_ENTITY');\n\t\t\t\tDebug.log('Caught:', logEntity, ActionTimer.getDuration('CATCH_ENTITY'));\n\t\t\t\tLogger.log('Caught:', logEntity, ActionTimer.getDuration('CATCH_ENTITY'));\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('preFinishLastInterval');\n\t\t\t},\n\n\t\t\tfinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\t\t\t},\n\n\t\t\tclearHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearHistory');\n\t\t\t},\n\n\t\t\tcreateSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tif (store.state.history.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet sentQueue = this.collectSentQueue(store);\n\t\t\t\tlet reportComment = store.state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === store.state.reportState.dateLog);\n\n\t\t\t\tlet result = this.validateSentQueue({\n\t\t\t\t\tdateLog: store.state.reportState.dateLog,\n\t\t\t\t\tcomment: reportComment ? reportComment.text : '',\n\t\t\t\t\thistoryPackage: sentQueue.history,\n\t\t\t\t\tchartPackage: sentQueue.chart,\n\t\t\t\t\tdesktopCode: store.state.config.desktopCode,\n\t\t\t\t});\n\n\t\t\t\tstore.commit('createSentQueue', {\n\t\t\t\t\t...this.getSentQueueState(),\n\t\t\t\t\t...result\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tclearSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearSentQueue');\n\t\t\t},\n\n\t\t\tclearSentHistory: (store) =>\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = store.state.config.lastSuccessfulSendDate;\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (new Date(this.getDateLog()) > new Date(lastSuccessfulSendDate))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(lastSuccessfulSendDate));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(date));\n\t\t\t},\n\n\t\t\tsetComment: (store, payload) =>\n\t\t\t{\n\t\t\t\tconst entity = store.state.entity.find(entity => entity.privateCode === payload.privateCode);\n\n\t\t\t\tif (entity && (Type.isString(payload.comment) || Type.isNumber(payload.comment)))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setComment', {\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tcomment: payload.comment.toString()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetPausedUntil: (store, dateTime) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(dateTime)\n\t\t\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t\t\t&& dateTime > new Date()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setPausedUntil', dateTime);\n\n\t\t\t\t\tLogger.warn('Monitor paused until ', dateTime.toString());\n\t\t\t\t\tDebug.log('Monitor paused until ', dateTime.toString());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearPausedUntil: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPausedUntil');\n\t\t\t},\n\n\t\t\tsetReportComment: (store, comment) =>\n\t\t\t{\n\t\t\t\tstore.commit('setReportComment', comment.toString());\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('processUnfinishedEvents');\n\t\t\t},\n\n\t\t\tmigrateHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('migrateHistory');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.reportState.dateLog = payload;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastSuccessfulSendDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastRemindDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetGrantingPermissionDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.grantingPermissionDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetDeferredGrantingPermissionShowDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.deferredGrantingPermissionShowDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddPersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremovePersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(publicCode => publicCode !== payload)\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (state) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPersonal: (state) =>\n\t\t\t{\n\t\t\t\tstate.personal = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddEntity: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity = state.entity.filter(entity => entity.privateCode !== payload);\n\t\t\t\tstate.history = state.history.filter(entry => entry.privateCode !== payload);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(privateCode => privateCode !== payload);\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearEntities: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddHistory: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.history.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tstartIntervalForHistoryEntry: (state, historyEntry) =>\n\t\t\t{\n\t\t\t\thistoryEntry.time.push({\n\t\t\t\t\tstart: new Date(),\n\t\t\t\t\tfinish: null\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tfinishLastInterval: (state) => {\n\t\t\t\tlet shouldRemoveTransitionInterval = false;\n\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.finish = new Date();\n\t\t\t\t\t\t\ttime.preFinish = null;\n\n\t\t\t\t\t\t\tif (new Date(time.start).getDate() !== time.finish.getDate())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshouldRemoveTransitionInterval = true;\n\t\t\t\t\t\t\t\ttime.markedForDeletion = true;\n\n\t\t\t\t\t\t\t\tLogger.warn('Interval marked for deletion');\n\t\t\t\t\t\t\t\tDebug.log('Interval marked for deletion');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (entry.type !== EntityType.absence)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn time;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\t\t\tstate.entity\n\t\t\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t\t\t.forEach(entity => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tstate.personal.push(entity.privateCode);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t}).filter(interval => !interval.markedForDeletion);\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tif (shouldRemoveTransitionInterval)\n\t\t\t\t{\n\t\t\t\t\tstate.history = state.history.filter(entry => Type.isArrayFilled(entry.time));\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.preFinish = new Date();\n\t\t\t\t\t\t\tLogger.log('Last interval for ', entry.privateCode, ' preFinished');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t})\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tcreateSentQueue: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearSentQueue: (state) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history\n\t\t\t\t\t.filter(entry => new Date(entry.dateLog) > date);\n\n\t\t\t\tconst getCodesToStore = privateCode => {\n\n\t\t\t\t\tconst entity = state.entity.find(entity => entity.privateCode === privateCode);\n\n\t\t\t\t\tif (Type.isObject(entity) && entity.hasOwnProperty('type'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entity.type !== EntityType.absence)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst isInUnsentHistory = state.history.find(entry => entry.privateCode === privateCode);\n\t\t\t\t\t\tif (isInUnsentHistory)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLogger.warn(`${entity.title} has been removed from personal`);\n\t\t\t\t\t\tDebug.log(`${entity.title} has been removed from personal`);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.personal = state.personal.filter(getCodesToStore);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(getCodesToStore);\n\n\t\t\t\tif (Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\tlet privateCodesToStore = [];\n\n\t\t\t\t\tstate.history.forEach(entry => {\n\t\t\t\t\t\tif (!privateCodesToStore.includes(entry.privateCode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprivateCodesToStore.push(entry.privateCode);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tstate.entity = state.entity\n\t\t\t\t\t\t.filter(entity => privateCodesToStore.includes(entity.privateCode));\n\n\t\t\t\t\tstate.entity = state.entity.map(entity => {\n\t\t\t\t\t\tentity.comments = entity.comments.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.entity = [];\n\t\t\t\t}\n\n\t\t\t\tstate.sentQueue = [];\n\t\t\t\tstate.reportState.comments = state.reportState.comments\n\t\t\t\t\t.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\tLogger.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\t\t\t\tDebug.space();\n\t\t\t\tDebug.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetComment: (state, payload) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = payload.entity.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = payload.comment;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpayload.entity.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext: payload.comment\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetReportComment: (state, text) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = state.reportState.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetPausedUntil: (state, dateTime) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = dateTime;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPausedUntil: (state) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = null;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (state) =>\n\t\t\t{\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(interval => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tinterval.finish === null\n\t\t\t\t\t\t\t&& interval.preFinish !== null\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinterval.finish = interval.preFinish;\n\t\t\t\t\t\t\tinterval.preFinish = null;\n\n\t\t\t\t\t\t\tLogger.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\n\t\t\t\t\tentry.time = entry.time.filter(time => {\n\t\t\t\t\t\tif (time.finish != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.log('Unfinished interval has been removed');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval has been removed');\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tmigrateHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity.map(entity => {\n\t\t\t\t\tif (!entity.hasOwnProperty('comments'))\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.comments = [];\n\n\t\t\t\t\t\tif (entity.comment)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentity.comments.push({\n\t\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\t\ttext: entity.comment,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete entity.comment;\n\n\t\t\t\t\treturn entity;\n\t\t\t\t});\n\n\t\t\t\tif (!state.reportState.hasOwnProperty('comments'))\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments = [];\n\n\t\t\t\t\tif (state.reportState.comment)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\ttext: state.reportState.comment,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete state.reportState.comment;\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetWorkingEntities(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0);\n\n\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\tconst others = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tconst otherCodes = others.map(entity => entity.privateCode);\n\t\t\t\tconst shortAbsenceCodes = shortAbsence.map(entity => entity.privateCode);\n\t\t\t\tconst excludeCodes = otherCodes.concat(shortAbsenceCodes);\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.filter(entity => !excludeCodes.includes(entity.privateCode))\n\t\t\t\t\t.sort((currentEntity, nextEntity) => nextEntity.time - currentEntity.time);\n\n\t\t\t\tif (Type.isArrayFilled(others))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.other.title,\n\t\t\t\t\t\ttime: Time.msToSec(state.config.otherTime) - otherTimeRest,\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.otherTime),\n\t\t\t\t\t\thint: EntityGroup.other.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.other.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(shortAbsence))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.absence.title,\n\t\t\t\t\t\ttime: shortAbsence.reduce((sum, entity) => sum + entity.time, 0),\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.shortAbsenceTime),\n\t\t\t\t\t\thint: EntityGroup.absence.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.absence.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn workingEntities;\n\t\t\t},\n\t\t\tgetPersonalEntities(state)\n\t\t\t{\n\t\t\t\tlet personalEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn personalEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0)\n\t\t\t\t\t.sort((a, b) => b.time - a.time);\n\t\t\t},\n\t\t\tgetSiteDetailByPrivateCode: state => privateCode => {\n\t\t\t\tconst history = BX.util.objectClone(state.history);\n\n\t\t\t\tlet entries = history.filter(entry => (\n\t\t\t\t\tentry.privateCode === privateCode\n\t\t\t\t\t&& entry.dateLog === state.reportState.dateLog\n\t\t\t\t));\n\n\t\t\t\tentries.map(entry => {\n\t\t\t\t\tentry.time = Time.calculateInEntry(entry);\n\t\t\t\t});\n\n\t\t\t\treturn entries;\n\t\t\t},\n\t\t\tgetChartData(state)\n\t\t\t{\n\t\t\t\tlet segments = [];\n\n\t\t\t\tconst reportDate = new Date(state.reportState.dateLog);\n\t\t\t\tconst emptyChart = [{\n\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t),\n\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t23,\n\t\t\t\t\t\t59\n\t\t\t\t\t),\n\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\tclickable: true,\n\t\t\t\t\tclickableHint: Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT'),\n\t\t\t\t\tstretchable: true,\n\t\t\t\t}];\n\n\t\t\t\tif (!Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tlet history = state.history.filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tlet type;\n\t\t\t\t\tif (state.personal.includes(entry.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\ttype = EntityGroup.personal.value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (entry.type === EntityType.custom)\n\t\t\t\t\t{\n\t\t\t\t\t\ttype = EntityGroup.workingCustom.value;\n\t\t\t\t\t}\n\t\t\t\t\telse if (entry.type === EntityType.absence)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst entity = state.entity.find(entity => entity.privateCode === entry.privateCode);\n\t\t\t\t\t\tconst comment = MonitorModel.prototype.getCommentByEntity(state, entity);\n\n\t\t\t\t\t\ttype = comment ? EntityGroup.workingCustom.value : EntityGroup.working.value;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttype = EntityGroup.working.value;\n\t\t\t\t\t}\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tif (!Type.isArrayFilled(segments))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//fill the voids with inactive intervals\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//collapse intervals shorter than a minute\n\t\t\t\tsegments = segments.filter(interval => interval.finish - interval.start >= minute);\n\n\t\t\t\tlet chartData = [];\n\t\t\t\tlet lastSegmentType = null;\n\n\t\t\t\t//create data for the graph from intervals\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((segment, index) => {\n\t\t\t\t\t\tif (index > 0 && segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.start;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (segment.type !== lastSegmentType)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlastSegmentType = segment.type;\n\n\t\t\t\t\t\t\tchartData.push({\n\t\t\t\t\t\t\t\tstart: segment.start,\n\t\t\t\t\t\t\t\tfinish: segment.finish,\n\t\t\t\t\t\t\t\ttype: segment.type,\n\t\t\t\t\t\t\t\tclickable: (\n\t\t\t\t\t\t\t\t\tsegment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t&& segment.start < new Date()\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tclickableHint: segment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t? Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT')\n\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.finish;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn chartData;\n\t\t\t},\n\t\t\tgetOverChartData: state => selectedPrivateCode => {\n\t\t\t\tlet selectedCodes = [];\n\n\t\t\t\tlet workingEntities = [];\n\t\t\t\tif (\n\t\t\t\t\tselectedPrivateCode === EntityGroup.other.value\n\t\t\t\t\t|| selectedPrivateCode === EntityGroup.absence.value\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tworkingEntities = state.entity\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(entity => entity.time > 0);\n\t\t\t\t}\n\n\t\t\t\tif (selectedPrivateCode === EntityGroup.other.value)\n\t\t\t\t{\n\t\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\t\tconst others = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tothers.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse if (selectedPrivateCode === EntityGroup.absence.value)\n\t\t\t\t{\n\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tshortAbsence.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tselectedCodes = [selectedPrivateCode];\n\t\t\t\t}\n\n\t\t\t\tlet segments = [];\n\n\t\t\t\tlet history = BX.util.objectClone(state.history).filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.display = (selectedCodes.includes(entry.privateCode) ? 'selected' : 'transparent');\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish, display: entry.display });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn segments;\n\t\t\t},\n\t\t\tisHistorySent(state)\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = state.config.lastSuccessfulSendDate;\n\n\t\t\t\tlet hasUnsentHistory = (\n\t\t\t\t\tType.isArrayFilled(state.history)\n\t\t\t\t\t&& new Date(state.history[0].dateLog) < new Date(MonitorModel.prototype.getDateLog())\n\t\t\t\t);\n\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn !hasUnsentHistory;\n\t\t\t\t}\n\n\t\t\t\tlastSuccessfulSendDate = new Date(lastSuccessfulSendDate);\n\t\t\t\tlastSuccessfulSendDate.setHours(0);\n\t\t\t\tlastSuccessfulSendDate.setMinutes(0);\n\t\t\t\tlastSuccessfulSendDate.setSeconds(0);\n\t\t\t\tlastSuccessfulSendDate.setMilliseconds(0);\n\n\t\t\t\tlet currentDate = new Date();\n\t\t\t\tcurrentDate.setHours(0);\n\t\t\t\tcurrentDate.setMinutes(0);\n\t\t\t\tcurrentDate.setSeconds(0);\n\t\t\t\tcurrentDate.setMilliseconds(0);\n\n\t\t\t\treturn currentDate - lastSuccessfulSendDate <= 86400000\n\t\t\t\t\t|| !hasUnsentHistory;\n\t\t\t},\n\t\t\tgetWorkingTimeForToday(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, MonitorModel.prototype.getDateLog()),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.reduce((sum, entity) => sum + entity.time, 0);\n\t\t\t},\n\t\t\tgetReportComment(state)\n\t\t\t{\n\t\t\t\tlet reportComment = state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\treturn reportComment ? reportComment.text : '';\n\t\t\t},\n\t\t\thasActivityOtherThanBitrix24(state)\n\t\t\t{\n\t\t\t\tlet hasActivity = false;\n\n\t\t\t\tlet appSiteEntities = state.entity\n\t\t\t\t\t.filter(entity => entity.type === EntityType.app || entity.type === EntityType.site);\n\n\t\t\t\tif (Type.isArrayFilled(appSiteEntities) && appSiteEntities.length > 1)\n\t\t\t\t{\n\t\t\t\t\thasActivity = true;\n\t\t\t\t}\n\n\t\t\t\treturn hasActivity;\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidatePersonal(personal = '')\n\t{\n\t\tlet result = '';\n\n\t\tif (personal && (Type.isString(personal) || Type.isNumber(personal)))\n\t\t{\n\t\t\tresult = personal.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateEntity(entity = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(entity) && entity)\n\t\t{\n\t\t\tif (Type.isString(entity.type))\n\t\t\t{\n\t\t\t\tresult.type = entity.type;\n\t\t\t}\n\n\t\t\tif (Type.isString(entity.title) || Type.isNumber(entity.title))\n\t\t\t{\n\t\t\t\tresult.title = entity.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(entity.comments))\n\t\t\t{\n\t\t\t\tresult.comments = entity.comments;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateHistory(historyEntry= {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(historyEntry) && historyEntry)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isString(historyEntry.dateLog)\n\t\t\t\t&& Type.isDate(new Date(historyEntry.dateLog))\n\t\t\t\t&& !isNaN(new Date(historyEntry.dateLog))\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.dateLog = historyEntry.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.title) || Type.isNumber(historyEntry.title))\n\t\t\t{\n\t\t\t\tresult.title = historyEntry.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.type) && EntityType.hasOwnProperty(historyEntry.type))\n\t\t\t{\n\t\t\t\tresult.type = historyEntry.type;\n\n\t\t\t\tif (historyEntry.type === EntityType.site)\n\t\t\t\t{\n\t\t\t\t\tresult.siteUrl = historyEntry.siteUrl;\n\t\t\t\t\tresult.siteTitle = historyEntry.siteTitle.toString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(historyEntry.time))\n\t\t\t{\n\t\t\t\tresult.time = historyEntry.time;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateSentQueue(sentQueueItem = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(sentQueueItem) && sentQueueItem)\n\t\t{\n\t\t\tif (Type.isString(sentQueueItem.dateLog))\n\t\t\t{\n\t\t\t\tresult.dateLog = sentQueueItem.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.historyPackage))\n\t\t\t{\n\t\t\t\tresult.historyPackage = sentQueueItem.historyPackage;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.chartPackage))\n\t\t\t{\n\t\t\t\tresult.chartPackage = sentQueueItem.chartPackage;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.desktopCode))\n\t\t\t{\n\t\t\t\tresult.desktopCode = sentQueueItem.desktopCode;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.comment))\n\t\t\t{\n\t\t\t\tresult.comment = sentQueueItem.comment;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetHistoryEntryByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.privateCode === privateCode\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetHistoryEntryBySiteUrl(store, siteUrl)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.siteUrl === siteUrl\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetEntityByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.entity.find(entity => entity.privateCode === privateCode);\n\t}\n\n\tgetEntityByTitle(store, title)\n\t{\n\t\treturn store.state.entity.find(entity => entity.title === title);\n\t}\n\n\tgetCommentByEntity(state, entity)\n\t{\n\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\treturn comment ? comment.text : '';\n\t}\n\n\tgetDateLog()\n\t{\n\t\treturn this.formatDateLog(new Date());\n\t}\n\n\tformatDateLog(date)\n\t{\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst year = date.getFullYear();\n\t\tconst month = addZero(date.getMonth() + 1);\n\t\tconst day = addZero(date.getDate());\n\n\t\treturn year + '-' + month + '-' + day;\n\t}\n\n\tcollectSentQueue(store)\n\t{\n\t\tlet history = BX.util.objectClone(this.getGetters().getWorkingEntities(store.state));\n\n\t\thistory = history.map(entry => {\n\t\t\tif (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.other.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.other;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.other);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.other);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.absence.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.absenceShort;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absenceShort);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absenceShort);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (entry.type === EntityType.absence)\n\t\t\t{\n\t\t\t\tif (entry.extra.hasOwnProperty('timeStart'))\n\t\t\t\t{\n\t\t\t\t\tentry.timeStart = entry.extra.timeStart;\n\t\t\t\t}\n\n\t\t\t\tentry.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absence);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absence);\n\t\t\t}\n\n\t\t\tdelete entry.extra;\n\t\t\tdelete entry.hint;\n\n\t\t\treturn entry;\n\t\t});\n\n\t\tLogger.log('History to send:', history);\n\t\tDebug.space();\n\t\tDebug.log('History to send:', history);\n\n\t\tlet chart = this.getGetters().getChartData(store.state).map(interval => {\n\t\t\treturn {\n\t\t\t\ttype: interval.type,\n\t\t\t\tstart: interval.start,\n\t\t\t\tfinish: interval.finish,\n\t\t\t}\n\t\t});\n\n\t\tLogger.log('ChartData to send:', chart);\n\n\t\treturn {\n\t\t\thistory,\n\t\t\tchart,\n\t\t};\n\t}\n}\n","import {EntityType} from 'timeman.const';\nimport {Loc} from 'main.core';\n\nexport class Entity\n{\n\tconstructor(params = {})\n\t{\n\t\tswitch (params.type)\n\t\t{\n\t\t\tcase EntityType.site:\n\t\t\t\tthis.createSite(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.app:\n\t\t\t\tthis.createApp(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.absence:\n\t\t\t\tthis.createAbsence();\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.unknown:\n\t\t\t\tthis.createUnknown(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.incognito:\n\t\t\t\tthis.createIncognito();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tcreateSite(params)\n\t{\n\t\tthis.type = EntityType.site;\n\n\t\tlet host;\n\t\ttry\n\t\t{\n\t\t\thost = new URL(params.url).host;\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\thost = params.url;\n\t\t}\n\n\t\tif (host === '')\n\t\t{\n\t\t\tlet hostFragments = params.url.split('/');\n\n\t\t\thost = hostFragments[hostFragments.length - 1] !== ''\n\t\t\t\t? hostFragments[hostFragments.length - 1]\n\t\t\t\t: params.url;\n\t\t}\n\t\telse if (host.split('.')[0] === 'www')\n\t\t{\n\t\t\thost = host.substring(4);\n\t\t}\n\n\t\tthis.title = host.toString();\n\t\tthis.siteUrl = params.url.toString();\n\t\tthis.siteTitle = params.title.toString();\n\t}\n\n\tcreateApp(params)\n\t{\n\t\tthis.type = EntityType.app;\n\t\tthis.title = params.name.toString();\n\n\t\tif (params.isBitrix24Desktop)\n\t\t{\n\t\t\tthis.isBitrix24Desktop = params.isBitrix24Desktop;\n\t\t}\n\t}\n\n\tcreateAbsence()\n\t{\n\t\tthis.type = EntityType.absence;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t}\n\n\tcreateUnknown(params)\n\t{\n\t\tthis.type = EntityType.unknown;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_UNKNOWN');\n\n\t\tthis.pureName = params.name;\n\t\tthis.pureTitle = params.title;\n\t}\n\n\tcreateIncognito()\n\t{\n\t\tthis.type = EntityType.incognito;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_INCOGNITO');\n\t}\n}","import {Logger} from './lib/logger';\nimport {Debug} from \"./lib/debug\";\nimport {ActionTimer} from './lib/action-timer';\nimport {Entity} from './model/entity';\nimport {EntityType} from 'timeman.const';\nimport {Loc} from 'main.core';\n\nclass EventHandler\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\t}\n\n\tcatch(process, name, title, url)\n\t{\n\t\tif (!this.enabled || !process)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tActionTimer.start('CATCH_ENTITY');\n\n\t\tconst type = this.getEntityTypeByEvent({process, name, title, url});\n\n\t\tlet isBitrix24Desktop = false;\n\t\tif (type === EntityType.app)\n\t\t{\n\t\t\tif (['Bitrix24.exe', 'Bitrix24'].includes(this.getNameByProcess(process)))\n\t\t\t{\n\t\t\t\tisBitrix24Desktop = true;\n\t\t\t}\n\t\t}\n\n\t\tif (type !== EntityType.absence)\n\t\t{\n\t\t\tif (type === EntityType.app)\n\t\t\t{\n\t\t\t\tswitch (name)\n\t\t\t\t{\n\t\t\t\t\tcase 'Application Frame Host':\n\t\t\t\t\t\tname = title\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'StartMenuExperienceHost':\n\t\t\t\t\tcase 'Search application':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_START_ALIAS');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Windows Shell Experience Host':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_NOTIFICATIONS_ALIAS');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (name === '')\n\t\t\t{\n\t\t\t\tname = this.getNameByProcess(process);\n\t\t\t}\n\n\t\t\tif (!this.isNewEvent(name, url))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname,\n\t\t\t\turl\n\t\t\t};\n\t\t}\n\n\t\tthis.store.dispatch('monitor/addHistory', new Entity({type, name, title, url, isBitrix24Desktop}));\n\t}\n\n\tcatchAbsence(away)\n\t{\n\t\tif (away)\n\t\t{\n\t\t\tthis.store.dispatch(\n\t\t\t\t'monitor/addHistory',\n\t\t\t\tnew Entity({\n\t\t\t\t\ttype: EntityType.absence\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname: EntityType.absence,\n\t\t\t\turl: null\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isWorkingDayStarted() && this.isTrackerGetActiveAppAvailable())\n\t\t\t{\n\t\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t\t}\n\t\t}\n\t}\n\n\tcatchAppClose()\n\t{\n\t\tLogger.warn('Application shutdown recognized. The last interval is finished.');\n\t\tDebug.log('Application shutdown recognized. The last interval is finished.');\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\t}\n\n\tgetEntityTypeByEvent(event)\n\t{\n\t\tlet type = EntityType.unknown;\n\n\t\tif (event.url === 'unknown')\n\t\t{\n\t\t\ttype = EntityType.unknown;\n\t\t}\n\t\telse if (event.url === 'incognito')\n\t\t{\n\t\t\ttype = EntityType.incognito;\n\t\t}\n\t\telse if (event.url)\n\t\t{\n\t\t\ttype = EntityType.site\n\t\t}\n\t\telse if (event.process !== '')\n\t\t{\n\t\t\ttype = EntityType.app\n\t\t}\n\n\t\treturn type;\n\t}\n\n\tgetNameByProcess(process)\n\t{\n\t\tconst separator = (process.includes('/') ? '/' : '\\\\');\n\t\tconst path = process.split(separator);\n\n\t\treturn path[path.length - 1];\n\t}\n\n\tisNewEvent(name, url)\n\t{\n\t\tif (this.url === '')\n\t\t{\n\t\t\tif (this.lastCaught.name === name)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.lastCaught.name === name && this.lastCaught.url === url)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisTrackerGetActiveAppAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 56);\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserApp',\n\t\t\t(process, name, title, url) => this.catch(process, name, title, url)\n\t\t);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXExitApplication',\n\t\t\tthis.catchAppClose.bind(this)\n\t\t);\n\n\t\tif (this.isTrackerGetActiveAppAvailable())\n\t\t{\n\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t}\n\n\t\tthis.preFinishInterval = setInterval(\n\t\t\t() => this.store.dispatch('monitor/preFinishLastInterval'),\n\t\t\t60000\n\t\t);\n\n\t\tLogger.log('EventHandler started');\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\n\t\tLogger.log('EventHandler stopped');\n\t}\n}\n\nconst eventHandler = new EventHandler();\n\nexport {eventHandler as EventHandler};","import {Loc, Type} from 'main.core';\nimport {Monitor} from './monitor';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {UI} from 'ui.notification';\n\nclass Sender\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.attempt = 0;\n\t\tthis.resendTimeout = 5000;\n\t\tthis.resendTimeoutId = null;\n\t}\n\n\tsend()\n\t{\n\t\tLogger.warn('Trying to send history...');\n\n\t\tBX.ajax.runAction('bitrix:timeman.api.monitor.recordhistory', {\n\t\t\tdata: {\n\t\t\t\thistory: JSON.stringify(this.getSentQueue()),\n\t\t\t}\n\t\t})\n\t\t\t.then(result =>\n\t\t\t{\n\t\t\t\tDebug.log('History sent');\n\n\t\t\t\tif (result.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tLogger.warn('SUCCESS!');\n\n\t\t\t\t\tthis.attempt = 0;\n\n\t\t\t\t\tthis.afterSuccessSend();\n\n\t\t\t\t\tif (result.data.enabled === Monitor.getStatusDisabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tLogger.warn('Disabled after server response');\n\t\t\t\t\t\tDebug.log('Disabled after server response');\n\n\t\t\t\t\t\tMonitor.disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tLogger.error('ERROR!');\n\t\t\t\t\tthis.attempt++\n\t\t\t\t\tthis.startSendingTimer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() =>\n\t\t\t{\n\t\t\t\tLogger.error('CONNECTION ERROR!');\n\n\t\t\t\tthis.attempt++\n\t\t\t\tthis.startSendingTimer();\n\t\t\t});\n\t}\n\n\tstartSendingTimer()\n\t{\n\t\tthis.resendTimeoutId = setTimeout(this.send.bind(this), this.getSendingDelay());\n\t\tLogger.log(`Next send in ${this.getSendingDelay() / 1000} seconds...`);\n\t}\n\n\tgetSendingDelay()\n\t{\n\t\treturn (this.attempt === 0 ? this.resendTimeout : this.resendTimeout * this.attempt);\n\t}\n\n\tgetSentQueue()\n\t{\n\t\treturn this.store.state.monitor.sentQueue;\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t\tthis.attempt = 0;\n\n\t\tif (Type.isArrayFilled(this.getSentQueue()))\n\t\t{\n\t\t\tLogger.log('Preparing to send old history...');\n\t\t\tthis.startSendingTimer();\n\t\t}\n\n\t\tLogger.log(\"Sender started\");\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\t\tthis.attempt = 0;\n\n\t\tclearTimeout(this.resendTimeoutId);\n\t\tLogger.log(\"Sender stopped\");\n\t}\n\n\tafterSuccessSend()\n\t{\n\t\tLogger.warn('History sent');\n\t\tDebug.space();\n\t\tDebug.log('History sent');\n\n\t\tthis.store.dispatch(\n\t\t\t'monitor/setLastSuccessfulSendDate',\n\t\t\tnew Date(this.store.state.monitor.reportState.dateLog)\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.store.dispatch('monitor/clearSentHistory')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.store.dispatch('monitor/refreshDateLog');\n\t\t\t\t\t\tthis.store.dispatch('monitor/clearSentQueue');\n\n\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SENT'),\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nconst sender = new Sender();\n\nexport {sender as Sender};","import {Monitor} from \"../monitor\";\nimport {Logger} from './logger';\nimport {Debug} from './debug';\n\nexport class CommandHandler\n{\n\tconstructor(options = {})\n\t{\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'timeman';\n\t}\n\n\thandleChangeMonitorEnabled(params)\n\t{\n\t\tif (params.enabled === Monitor.getStatusEnabled())\n\t\t{\n\t\t\tLogger.warn('Enabled via API');\n\t\t\tDebug.log('Enabled via API');\n\n\t\t\tlocation.reload();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMonitor.stop();\n\t\t\tMonitor.disable();\n\n\t\t\tLogger.warn('Disabled via API');\n\t\t\tDebug.log('Disabled via API');\n\t\t}\n\t}\n\n\thandleChangeMonitorDebugEnabled(params)\n\t{\n\t\tif (params.enabled)\n\t\t{\n\t\t\tDebug.enable();\n\n\t\t\tLogger.warn('Debug mode enabled via API');\n\t\t\tDebug.log('Debug mode enabled via API');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Debug mode disabled via API');\n\t\t\tDebug.log('Debug mode disabled via API');\n\n\t\t\tDebug.disable();\n\t\t}\n\t}\n}","import {VuexBuilder} from \"ui.vue.vuex\";\nimport {MonitorModel} from './model/monitor';\nimport {EventHandler} from './eventhandler';\nimport {Sender} from './sender';\nimport {MonitorReport} from 'timeman.monitor-report';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport {PULL as Pull} from 'pull.client';\nimport {CommandHandler} from './lib/commandhandler';\nimport {Loc, Type} from 'main.core';\n\nclass Monitor\n{\n\tinit(options)\n\t{\n\t\tthis.enabled = options.enabled;\n\t\tthis.playTimeout = null;\n\t\tthis.isAway = false;\n\t\tthis.vuex = {};\n\n\t\tthis.defaultStorageConfig = {\n\t\t\tconfig: {\n\t\t\t\totherTime: options.otherTime,\n\t\t\t\tshortAbsenceTime: options.shortAbsenceTime,\n\t\t\t}\n\t\t};\n\n\t\tthis.dateFormat = options.dateFormat;\n\t\tthis.timeFormat = options.timeFormat;\n\n\t\tif (options.debugEnabled)\n\t\t{\n\t\t\tDebug.enable();\n\t\t}\n\n\t\tDebug.space();\n\t\tDebug.log('Desktop launched!');\n\n\t\tif (this.isEnabled() && Logger.isEnabled())\n\t\t{\n\t\t\tBXDesktopSystem.LogInfo = function() {};\n\t\t\tLogger.start();\n\t\t}\n\n\t\tDebug.log(`Enabled: ${this.enabled}`);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.initApp();\n\t\t}\n\n\t\tPull.subscribe(new CommandHandler());\n\t}\n\n\tinitApp()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew VuexBuilder()\n\t\t\t.addModel(\n\t\t\t\tMonitorModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables(this.defaultStorageConfig)\n\t\t\t\t\t.useDatabase(true)\n\t\t\t)\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'timeman-pwt',\n\t\t\t\ttype: VuexBuilder.DatabaseType.indexedDb,\n\t\t\t\tsiteId: Loc.getMessage('SITE_ID'),\n\t\t\t\tuserId: Loc.getMessage('USER_ID')\n\t\t\t})\n\t\t\t.build()\n\t\t\t.then(builder => {\n\t\t\t\tthis.vuex.store = builder.store;\n\n\t\t\t\tthis.getStorage().dispatch('monitor/processUnfinishedEvents')\n\t\t\t\t\t.then(() => this.initTracker(this.getStorage()));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconst errorMessage = \"PWT: Storage initialization error\";\n\n\t\t\t\tLogger.error(errorMessage);\n\t\t\t\tDebug.log(errorMessage);\n\t\t\t})\n\t\t;\n\t}\n\n\tinitTracker(store)\n\t{\n\t\tDateFormatter.init(this.dateFormat);\n\t\tTimeFormatter.init(this.timeFormat);\n\n\t\tEventHandler.init(store);\n\t\tSender.init(store);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserAway',\n\t\t\t(away) => this.onAway(away)\n\t\t);\n\n\t\tBX.MessengerWindow.addTab({\n\t\t\tid: 'timeman-pwt',\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE'),\n\t\t\torder: 540,\n\t\t\ttarget: false,\n\t\t\tevents: {\n\t\t\t\topen: () => this.openReport()\n\t\t\t}\n\t\t});\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXProtocolUrl',\n\t\t\tcommand => {\n\t\t\t\tif (command === 'timemanpwt')\n\t\t\t\t{\n\t\t\t\t\tif (!BX.MessengerCommon.isDesktop())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt', true);\n\t\t\t\t\tBX.desktop.setActiveWindow();\n\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.launch();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Monitor is disabled');\n\t\t}\n\t}\n\n\tlaunch()\n\t{\n\t\tif (this.isAway)\n\t\t{\n\t\t\tLogger.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\t\t\tDebug.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getStorage().state.monitor.config.grantingPermissionDate)\n\t\t{\n\t\t\tLogger.log('History access not provided. Monitor is not started.');\n\t\t\tDebug.log('History access not provided. Monitor is not started.');\n\n\t\t\tif (this.shouldShowGrantingPermissionWindow())\n\t\t\t{\n\t\t\t\tthis.openReport();\n\t\t\t\tBXDesktopWindow.ExecuteCommand('show.active');\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/migrateHistory').then(() => {\n\t\t\tthis.getStorage().dispatch('monitor/clearSentHistory').then(() => {\n\t\t\t\tthis.getStorage().dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\tif (this.isPaused())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isPauseRelevant())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\t\t\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\t\t\t\t\tthis.setPlayTimeout();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.clearPausedUntil().then(() => this.start());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.start();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstart()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is disabled!\");\n\t\t\tDebug.log(\"Can't start, monitor is disabled!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isPaused())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tDebug.log('Monitor started');\n\t\tDebug.space();\n\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events started');\n\t\t\tBXDesktopSystem.TrackerStart();\n\t\t}\n\n\t\tEventHandler.start();\n\t\tSender.start();\n\n\t\tLogger.warn('Monitor started');\n\t}\n\n\tstop()\n\t{\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events stopped');\n\t\t\tBXDesktopSystem.TrackerStop();\n\t\t}\n\n\t\tEventHandler.stop();\n\t\tSender.stop();\n\n\t\tLogger.warn('Monitor stopped');\n\t\tDebug.log('Monitor stopped');\n\t}\n\n\tpause()\n\t{\n\t\tthis.stop();\n\t\tthis.setPlayTimeout();\n\t}\n\n\tonAway(away)\n\t{\n\t\tif (!this.isEnabled() || this.isPaused())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (away && !this.isAway)\n\t\t{\n\t\t\tthis.isAway = true;\n\n\t\t\tLogger.warn('User AWAY');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User AWAY');\n\n\t\t\tthis.stop();\n\n\t\t\tEventHandler.catchAbsence(away);\n\t\t}\n\t\telse if (!away && this.isAway)\n\t\t{\n\t\t\tthis.isAway = false;\n\n\t\t\tLogger.warn('User RETURNED, continue monitoring...');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User RETURNED, continue monitoring...');\n\n\t\t\tthis.launch();\n\t\t}\n\t}\n\n\tsend()\n\t{\n\t\tif (!this.vuex.hasOwnProperty('store'))\n\t\t{\n\t\t\tLogger.warn('Unable to send report. Store is not initialized.');\n\t\t\tDebug.log('Unable to send report. Store is not initialized.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/createSentQueue').then(() => Sender.send());\n\t}\n\n\topenReport()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMonitorReport.open(this.getStorage());\n\t}\n\n\topenReportPreview()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMonitorReport.openPreview(this.getStorage());\n\t}\n\n\tgetPausedUntilTime()\n\t{\n\t\treturn this.getStorage().state.monitor.config.pausedUntil;\n\t}\n\n\tclearPausedUntil()\n\t{\n\t\treturn this.getStorage().dispatch('monitor/clearPausedUntil');\n\t}\n\n\tisPaused()\n\t{\n\t\treturn !!this.getPausedUntilTime();\n\t}\n\n\tisPauseRelevant()\n\t{\n\t\treturn this.getPausedUntilTime() - new Date() > 0;\n\t}\n\n\tsetPlayTimeout()\n\t{\n\t\tLogger.warn(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\t\tDebug.log(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\n\t\tclearTimeout(this.playTimeout);\n\n\t\tthis.playTimeout = setTimeout(\n\t\t\t() => this.clearPausedUntil().then(() => this.launch()),\n\t\t\tthis.getPausedUntilTime() - new Date()\n\t\t);\n\t}\n\n\tpauseUntil(dateTime: Date)\n\t{\n\t\tif (\n\t\t\tType.isDate(dateTime)\n\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t&& dateTime > new Date()\n\t\t)\n\t\t{\n\t\t\tthis.getStorage().dispatch('monitor/setPausedUntil', dateTime).then(() => this.pause());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow Error('Pause must be set as a date in the future');\n\t\t}\n\t}\n\n\tshouldShowGrantingPermissionWindow()\n\t{\n\t\tlet config = this.getStorage().state.monitor.config;\n\t\tif (!config)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (config.grantingPermissionDate !== null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet deferredGrantingPermissionShowDate = config.deferredGrantingPermissionShowDate;\n\t\tif (deferredGrantingPermissionShowDate === null)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn new Date(MonitorModel.prototype.getDateLog()) >= new Date(deferredGrantingPermissionShowDate);\n\t}\n\n\tshowGrantingPermissionLater()\n\t{\n\t\treturn this.getStorage().dispatch('monitor/showGrantingPermissionLater');\n\t}\n\n\tplay()\n\t{\n\t\tclearTimeout(this.playTimeout);\n\t\tthis.playTimeout = null;\n\t\tthis.clearPausedUntil().then(() => this.launch());\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn (this.enabled === this.getStatusEnabled())\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = this.getStatusEnabled();\n\t}\n\n\tdisable()\n\t{\n\t\tthis.stop();\n\n\t\tBX.MessengerWindow.hideTab('timeman-pwt');\n\t\tthis.vuex = {};\n\n\t\tthis.enabled = this.getStatusDisabled();\n\t}\n\n\tgetStatusEnabled()\n\t{\n\t\treturn 'Y';\n\t}\n\n\tgetStatusDisabled()\n\t{\n\t\treturn 'N';\n\t}\n\n\tisTrackerEventsApiAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 55);\n\t}\n\n\tgetStorage()\n\t{\n\t\treturn (this.vuex.hasOwnProperty('store') ? this.vuex.store : null);\n\t}\n}\n\nconst monitor = new Monitor();\n\nexport {monitor as Monitor};\n"],"names":["Code","params","md5","join","sha1","BXDesktopSystem","createPrivate","UserAccount","UserOsMark","Date","now","createPublic","Time","state","entity","date","history","filter","entry","privateCode","dateLog","map","calculateInEntry","reduce","sum","time","interval","finish","start","Math","round","addZero","num","hour","getHours","min","getMinutes","ms","Logger","storageKey","enabled","Monitor","isEnabled","window","localStorage","setItem","e","removeItem","getItem","console","log","info","warn","error","trace","logger","Debug","text","getLogMessage","BX","desktop","Loc","getMessage","substr","i","arguments","length","Error","message","stack","JSON","stringify","debug","ActionTimer","actionsCollection","key","timeInSeconds","toFixed","actionTimer","Notification","title","callback","toString","Type","isFunction","BXIM","playSound","messageTemplate","notify","createNotify","id","type","messageJs","openNewMessage","addCustomEvent","click","removeCustomEvents","MonitorModel","config","secret","createSecret","desktopCode","getDesktopCode","otherTime","getVariable","shortAbsenceTime","pausedUntil","lastSuccessfulSendDate","lastRemindDate","grantingPermissionDate","deferredGrantingPermissionShowDate","reportState","getDateLog","comments","personal","strictlyWorking","sentQueue","EntityType","unknown","publicCode","extra","preFinish","comment","historyPackage","chartPackage","setDateLog","store","payload","isString","isDate","isNaN","commit","refreshDateLog","isArrayFilled","firstHistoryEntryDateLog","getActions","setLastRemindDate","grantPermission","showGrantingPermissionLater","setDate","getDate","formattedDate","prototype","formatDateLog","setLastSuccessfulSendDate","addPersonal","validatePersonal","removePersonal","addToStrictlyWorking","removeFromStrictlyWorking","clearStrictlyWorking","clearPersonal","addEntity","result","validateEntity","absence","custom","timestamp","timeStart","formatDateToTime","getEntityState","find","isBitrix24Cp","site","location","host","isBitrix24Desktop","app","removeEntityByPrivateCode","clearEntities","addHistory","validateHistory","historyEntry","incognito","getEntityByTitle","getHistoryEntryBySiteUrl","siteUrl","getHistoryEntryByPrivateCode","logEntity","getHistoryState","getDuration","canShowReminder","isHistorySent","getGetters","getWorkingTimeForToday","windowCommand","changeTab","MessengerWindow","show","preFinishLastInterval","finishLastInterval","clearHistory","createSentQueue","collectSentQueue","reportComment","validateSentQueue","chart","getSentQueueState","clearSentQueue","clearSentHistory","clearStorageBeforeDate","setComment","isNumber","setPausedUntil","dateTime","getTime","clearPausedUntil","setReportComment","processUnfinishedEvents","migrateHistory","setGrantingPermissionDate","setDeferredGrantingPermissionShowDate","push","startIntervalForHistoryEntry","shouldRemoveTransitionInterval","markedForDeletion","shortAbsenceTimeRest","msToSec","includes","calculateInEntityOnADate","sort","currentEntity","nextEntity","forEach","getCommentByEntity","trim","getCodesToStore","isObject","hasOwnProperty","isInUnsentHistory","privateCodesToStore","DateFormatter","space","getWorkingEntities","workingEntities","workingEntity","hint","EntityGroup","otherTimeRest","others","shortAbsence","otherCodes","shortAbsenceCodes","excludeCodes","concat","group","other","allowedTime","value","getPersonalEntities","personalEntities","a","b","getSiteDetailByPrivateCode","util","objectClone","entries","getChartData","segments","reportDate","emptyChart","getFullYear","getMonth","inactive","clickable","clickableHint","stretchable","minute","workingCustom","working","currentSegment","nextSegment","firstSegmentFrom","unshift","index","setMinutes","lastSegmentTo","chartData","lastSegmentType","segment","getOverChartData","selectedPrivateCode","selectedCodes","display","hasUnsentHistory","setHours","setSeconds","setMilliseconds","currentDate","getReportComment","hasActivityOtherThanBitrix24","hasActivity","appSiteEntities","siteTitle","sentQueueItem","year","month","day","items","absenceShort","VuexBuilderModel","Entity","createSite","createApp","createAbsence","createUnknown","createIncognito","URL","url","err","hostFragments","split","substring","name","pureName","pureTitle","EventHandler","preFinishInterval","lastCaught","process","getEntityTypeByEvent","getNameByProcess","isNewEvent","dispatch","away","isWorkingDayStarted","isTrackerGetActiveAppAvailable","TrackerGetActiveApp","event","separator","path","getApiVersion","catch","catchAppClose","bind","setInterval","eventHandler","Sender","attempt","resendTimeout","resendTimeoutId","ajax","runAction","data","getSentQueue","then","status","afterSuccessSend","getStatusDisabled","disable","startSendingTimer","setTimeout","send","getSendingDelay","monitor","clearTimeout","SidePanel","Instance","close","UI","Center","content","autoHideDelay","sender","CommandHandler","getStatusEnabled","reload","stop","enable","options","playTimeout","isAway","vuex","defaultStorageConfig","dateFormat","timeFormat","debugEnabled","LogInfo","initApp","Pull","subscribe","VuexBuilder","addModel","create","setVariables","useDatabase","setDatabaseConfig","DatabaseType","indexedDb","siteId","userId","build","builder","getStorage","initTracker","errorMessage","init","TimeFormatter","onAway","addTab","order","target","events","open","openReport","command","MessengerCommon","isDesktop","setActiveWindow","launch","shouldShowGrantingPermissionWindow","BXDesktopWindow","ExecuteCommand","isPaused","isPauseRelevant","setPlayTimeout","isTrackerEventsApiAvailable","TrackerStart","TrackerStop","catchAbsence","MonitorReport","openPreview","getPausedUntilTime","pause","hideTab"],"mappings":";;;;KAGaA,IAAb;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,mCAGC;CAAA,wCADuBC,MACvB;CADuBA,QAAAA,MACvB;CAAA;;CACC,aAAOC,YAAG,CAACD,MAAM,CAACE,IAAP,CAAY,EAAZ,CAAD,CAAV;CACA;CALF;CAAA;CAAA,oCAQC;CAAA,yCADwBF,MACxB;CADwBA,QAAAA,MACxB;CAAA;;CACC,aAAOG,cAAI,CAACH,MAAM,CAACE,IAAP,CAAY,EAAZ,CAAD,CAAX;CACA;CAVF;CAAA;CAAA,mCAaC;CACC,UAAI,OAAOE,eAAP,KAA2B,WAA/B,EACA;CACC,eAAO,IAAP;CACA;;CAED,aAAOL,IAAI,CAACM,aAAL,CACND,eAAe,CAACE,WAAhB,EADM,EAENF,eAAe,CAACG,UAAhB,EAFM,EAGN,CAACC,IAAI,CAACC,GAAL,EAHK,CAAP;CAKA;CAxBF;CAAA;CAAA,qCA2BC;CACC,UAAI,OAAOL,eAAP,KAA2B,WAA/B,EACA;CACC,eAAO,IAAP;CACA;;CAED,aAAOL,IAAI,CAACW,YAAL,CACNN,eAAe,CAACE,WAAhB,EADM,EAENF,eAAe,CAACG,UAAhB,EAFM,CAAP;CAIA;CArCF;CAAA;CAAA;;KCHaI,IAAb;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,6CAEiCC,KAFjC,EAEwCC,MAFxC,EAEgDC,IAFhD,EAGC;CACC,aAAOF,KAAK,CAACG,OAAN,CACLC,MADK,CACE,UAAAC,KAAK;CAAA,eACZA,KAAK,CAACC,WAAN,KAAsBL,MAAM,CAACK,WAA7B,IACGD,KAAK,CAACE,OAAN,KAAkBL,IAFT;CAAA,OADP,EAKLM,GALK,CAKDT,IAAI,CAACU,gBALJ,EAMLC,MANK,CAME,UAACC,GAAD,EAAMC,IAAN;CAAA,eAAeD,GAAG,GAAGC,IAArB;CAAA,OANF,EAM6B,CAN7B,CAAP;CAOA;CAXF;CAAA;CAAA,qCAayBP,KAbzB,EAcC;CACC,UAAMO,IAAI,GAAGP,KAAK,CAACO,IAAN,CACXJ,GADW,CACP,UAAAK,QAAQ,EAAI;CAChB,YAAMC,MAAM,GAAGD,QAAQ,CAACC,MAAT,GAAkB,IAAIlB,IAAJ,CAASiB,QAAQ,CAACC,MAAlB,CAAlB,GAA8C,IAAIlB,IAAJ,EAA7D;CAEA,eAAOkB,MAAM,GAAG,IAAIlB,IAAJ,CAASiB,QAAQ,CAACE,KAAlB,CAAhB;CACA,OALW,EAMXL,MANW,CAMJ,UAACC,GAAD,EAAME,QAAN;CAAA,eAAmBF,GAAG,GAAGE,QAAzB;CAAA,OANI,EAM+B,CAN/B,CAAb;CAQA,aAAOG,IAAI,CAACC,KAAL,CAAWL,IAAI,GAAG,IAAlB,CAAP;CACA;CAxBF;CAAA;CAAA,qCA0ByBV,IA1BzB,EA2BC;CACC,UAAMgB,OAAO,GAAG,SAAVA,OAAU,CAAAC,GAAG;CAAA,eAAKA,GAAG,IAAI,CAAP,IAAYA,GAAG,IAAI,CAApB,GAAyB,MAAMA,GAA/B,GAAqCA,GAAzC;CAAA,OAAnB;;CAEA,UAAMC,IAAI,GAAGlB,IAAI,CAACmB,QAAL,EAAb;CACA,UAAMC,GAAG,GAAGJ,OAAO,CAAChB,IAAI,CAACqB,UAAL,EAAD,CAAnB;CAEA,aAAOH,IAAI,GAAG,GAAP,GAAaE,GAApB;CACA;CAlCF;CAAA;CAAA,4BAoCgBE,EApChB,EAqCC;CACC,aAAOA,EAAE,GAAG,IAAZ;CACA;CAvCF;CAAA;CAAA;;KCGMC;CAEL,oBACA;CAAA;CACC,SAAKC,UAAL,GAAkB,mCAAlB;CACA,SAAKC,OAAL,GAAe,IAAf;CACA;;;;6BAGD;CACC,UAAI,CAACC,OAAO,CAACC,SAAR,EAAL,EACA;CACC;CACA;;CAED,WAAKF,OAAL,GAAe,IAAf;;CAEA,UAAI,OAAOG,MAAM,CAACC,YAAd,KAA+B,WAAnC,EACA;CACC,YACA;CACCD,UAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,KAAKN,UAAjC,EAA6C,GAA7C;CACA,SAHD,CAIA,OAAMO,CAAN,EAAS;CACT;;CAED,aAAO,KAAKN,OAAZ;CACA;;;4BAGD;CACC,WAAKA,OAAL,GAAe,KAAf;;CAEA,UAAI,OAAOG,MAAM,CAACC,YAAd,KAA+B,WAAnC,EACA;CACC,YACA;CACCD,UAAAA,MAAM,CAACC,YAAP,CAAoBG,UAApB,CAA+B,KAAKR,UAApC;CACA,SAHD,CAIA,OAAMO,CAAN,EAAS;CACT;;CAED,aAAO,KAAKN,OAAZ;CACA;;;iCAGD;CACC,UAAI,CAACC,OAAO,CAACC,SAAR,EAAL,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAI,KAAKF,OAAL,KAAiB,IAArB,EACA;CACC,YAAI,OAAOG,MAAM,CAACC,YAAd,KAA+B,WAAnC,EACA;CACC,cACA;CACC,iBAAKJ,OAAL,GAAeG,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,KAAKT,UAAjC,MAAiD,GAAhE;CACA,WAHD,CAIA,OAAMO,CAAN,EAAS;CACT;CACD;;CAED,aAAO,KAAKN,OAAL,KAAiB,IAAxB;CACA;;;2BAGD;CACC,UAAI,KAAKE,SAAL,EAAJ,EACA;CAAA;;CACC,oBAAAO,OAAO,EAACC,GAAR;CACA;CACD;;;4BAGD;CACC,UAAI,KAAKR,SAAL,EAAJ,EACA;CAAA;;CACC,qBAAAO,OAAO,EAACE,IAAR;CACA;CACD;;;4BAGD;CACC,UAAI,KAAKT,SAAL,EAAJ,EACA;CAAA;;CACC,qBAAAO,OAAO,EAACG,IAAR;CACA;CACD;;;6BAGD;CAAA;;CACC,mBAAAH,OAAO,EAACI,KAAR;CACA;;;6BAGD;CAAA;;CACC,mBAAAJ,OAAO,EAACK,KAAR;CACA;;;;;CAGF,IAAIC,MAAM,GAAG,IAAIjB,MAAJ,EAAb;;KCvGMkB;CAEL,mBACA;CAAA;CACC,SAAKhB,OAAL,GAAe,KAAf;CACA;;;;iCAGD;CACC,aAAO,KAAKA,OAAZ;CACA;;;8BAGD;CACC,WAAKA,OAAL,GAAe,IAAf;CACA;;;+BAGD;CACC,WAAKA,OAAL,GAAe,KAAf;CACA;;;2BAGD;CACC,UAAI,CAAC,KAAKE,SAAL,EAAL,EACA;CACC;CACA;;CAED,UAAIe,IAAI,GAAG,KAAKC,aAAL,uBAAX;CAEAC,MAAAA,EAAE,CAACC,OAAH,CAAWV,GAAX,CAAeW,aAAG,CAACC,UAAJ,CAAe,SAAf,IAA4B,cAA3C,EAA2DL,IAAI,CAACM,MAAL,CAAY,CAAZ,CAA3D;CACA;;;6BAGD;CACC,UAAI,CAAC,KAAKrB,SAAL,EAAL,EACA;CACC;CACA;;CAEDiB,MAAAA,EAAE,CAACC,OAAH,CAAWV,GAAX,CAAeW,aAAG,CAACC,UAAJ,CAAe,SAAf,IAA4B,cAA3C,EAA2D,GAA3D;CACA;;;qCAGD;CACC,UAAI,CAAC,KAAKpB,SAAL,EAAL,EACA;CACC;CACA;;CAED,UAAIe,IAAI,GAAG,EAAX;;CAEA,WAAK,IAAIO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGC,SAAS,CAACC,MAA9B,EAAsCF,CAAC,EAAvC,EACA;CACC,YAAGC,SAAS,CAACD,CAAD,CAAT,YAAwBG,KAA3B,EACA;CACCV,UAAAA,IAAI,GAAGQ,SAAS,CAACD,CAAD,CAAT,CAAaI,OAAb,GAAuB,IAAvB,GAA8BH,SAAS,CAACD,CAAD,CAAT,CAAaK,KAAlD;CACA,SAHD,MAKA;CACC,cACA;CACCZ,YAAAA,IAAI,GAAGA,IAAI,GAAC,KAAL,IAAY,oBAAOQ,SAAS,CAACD,CAAD,CAAhB,KAAwB,QAAxB,GAAkCM,IAAI,CAACC,SAAL,CAAeN,SAAS,CAACD,CAAD,CAAxB,CAAlC,GAAgEC,SAAS,CAACD,CAAD,CAArF,CAAP;CACA,WAHD,CAIA,OAAOlB,CAAP,EACA;CACCW,YAAAA,IAAI,GAAGA,IAAI,GAAC,yBAAZ;CACA;CACD;CACD;;CAED,aAAOA,IAAP;CACA;;;;;CAGF,IAAIe,KAAK,GAAG,IAAIhB,KAAJ,EAAZ;;KC9EMiB;CAEL,yBACA;CAAA;CACC,SAAKC,iBAAL,GAAyB,EAAzB;CACA;;;;2BAEKC,KACN;CACC,WAAKD,iBAAL,CAAuBC,GAAvB,IAA8B,EAA9B;CACA,WAAKD,iBAAL,CAAuBC,GAAvB,EAA4B/C,KAA5B,GAAoCnB,IAAI,CAACC,GAAL,EAApC;CACA;;;4BAEMiE,KACP;CACC,UACC,CAAC,KAAKD,iBAAL,CAAuBC,GAAvB,CAAD,IACG,CAAC,KAAKD,iBAAL,CAAuBC,GAAvB,EAA4B/C,KADhC,IAEG,KAAK8C,iBAAL,CAAuBC,GAAvB,EAA4BhD,MAHhC,EAKA;CACC;CACA;;CAED,WAAK+C,iBAAL,CAAuBC,GAAvB,EAA4BhD,MAA5B,GAAqClB,IAAI,CAACC,GAAL,EAArC;CACA;;;iCAEWiE,KACZ;CACC,UACC,CAAC,KAAKD,iBAAL,CAAuBC,GAAvB,CAAD,IACG,CAAC,KAAKD,iBAAL,CAAuBC,GAAvB,EAA4B/C,KADhC,IAEG,CAAC,KAAK8C,iBAAL,CAAuBC,GAAvB,EAA4BhD,MAHjC,EAKA;CACC;CACA;;CAED,UAAMiD,aAAa,GAAG,CAAC,KAAKF,iBAAL,CAAuBC,GAAvB,EAA4BhD,MAA5B,GAAqC,KAAK+C,iBAAL,CAAuBC,GAAvB,EAA4B/C,KAAlE,IAA2E,IAAjG;CAEA,+BAAkB+C,GAAlB,qBAAgCC,aAAa,CAACC,OAAd,CAAsB,CAAtB,CAAhC;CACA;;;;;CAGF,IAAIC,WAAW,GAAG,IAAIL,WAAJ,EAAlB;;KC1CaM,YAAb;CAEC,wBAAYC,KAAZ,EAAmBvB,IAAnB,EAAyBwB,QAAzB,EACA;CAAA;CACC,SAAKD,KAAL,GAAaA,KAAK,CAACE,QAAN,EAAb;CACA,SAAKzB,IAAL,GAAYA,IAAI,CAACyB,QAAL,EAAZ;;CAEA,QAAIC,cAAI,CAACC,UAAL,CAAgBH,QAAhB,CAAJ,EACA;CACC,WAAKA,QAAL,GAAgBA,QAAhB;CACA;;CAED,WAAO,IAAP;CACA;;CAbF;CAAA;CAAA,2BAgBC;CAAA;;CACCI,MAAAA,IAAI,CAACC,SAAL,CAAe,aAAf;CAEA,UAAMC,eAAe,GAAGF,IAAI,CAACG,MAAL,CAAYC,YAAZ,CAAyB;CAChDC,QAAAA,EAAE,EAAE,CAD4C;CACzCC,QAAAA,IAAI,EAAE,CADmC;CAEhD5E,QAAAA,IAAI,EAAE,IAAIN,IAAJ,EAF0C;CAGhDR,QAAAA,MAAM,EAAE,EAHwC;CAIhD+E,QAAAA,KAAK,EAAE,KAAKA,KAJoC;CAKhDvB,QAAAA,IAAI,EAAE,KAAKA;CALqC,OAAzB,EAMrB,IANqB,CAAxB;CAQA,UAAMmC,SAAS,8pBAAf;CAoBAP,MAAAA,IAAI,CAACzB,OAAL,CAAaiC,cAAb,CAA4B,QAAS,IAAIpF,IAAJ,EAArC,EAAgD8E,eAAhD,EAAiEK,SAAjE;CAEAjC,MAAAA,EAAE,CAACC,OAAH,CAAWkC,cAAX,CAA0B,qBAA1B,EAAiD;CAAA,eAAM,KAAI,CAACC,KAAL,EAAN;CAAA,OAAjD;CACA;CAlDF;CAAA;CAAA,4BAqDC;CACC,UAAIZ,cAAI,CAACC,UAAL,CAAgB,KAAKH,QAArB,CAAJ,EACA;CACC,aAAKA,QAAL;CACA;;CAEDtB,MAAAA,EAAE,CAACC,OAAH,CAAWoC,kBAAX,CAA8B,qBAA9B;CACA;CA5DF;CAAA;CAAA;;KCSaC,YAAb;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,8BAGC;CACC,aAAO,SAAP;CACA;CALF;CAAA;CAAA,qCAQC;CACC,aAAO,IAAP;CACA;CAVF;CAAA;CAAA,qCAaC;CACC,aAAO,KAAP;CACA;CAfF;CAAA;CAAA,+BAkBC;CACC,aAAO;CACNC,QAAAA,MAAM,EAAE;CACPC,UAAAA,MAAM,EAAEnG,IAAI,CAACoG,YAAL,EADD;CAEPC,UAAAA,WAAW,EAAErG,IAAI,CAACsG,cAAL,EAFN;CAGPC,UAAAA,SAAS,EAAE,KAAKC,WAAL,CAAiB,kBAAjB,EAAqC,OAArC,CAHJ;CAIPC,UAAAA,gBAAgB,EAAE,KAAKD,WAAL,CAAiB,yBAAjB,EAA4C,OAA5C,CAJX;CAKPE,UAAAA,WAAW,EAAE,IALN;CAMPC,UAAAA,sBAAsB,EAAE,IANjB;CAOPC,UAAAA,cAAc,EAAE,IAPT;CAQPC,UAAAA,sBAAsB,EAAE,IARjB;CASPC,UAAAA,kCAAkC,EAAE;CAT7B,SADF;CAYNC,QAAAA,WAAW,EAAE;CACZ3F,UAAAA,OAAO,EAAE,KAAK4F,UAAL,EADG;CAEZC,UAAAA,QAAQ,EAAE;CAFE,SAZP;CAgBNC,QAAAA,QAAQ,EAAE,EAhBJ;CAiBNC,QAAAA,eAAe,EAAE,EAjBX;CAkBNrG,QAAAA,MAAM,EAAE,EAlBF;CAmBNE,QAAAA,OAAO,EAAE,EAnBH;CAoBNoG,QAAAA,SAAS,EAAE;CApBL,OAAP;CAsBA;CAzCF;CAAA;CAAA,qCA4CC;CACC,aAAO;CACNzB,QAAAA,IAAI,EAAE0B,wBAAU,CAACC,OADX;CAENtC,QAAAA,KAAK,EAAE,EAFD;CAGNuC,QAAAA,UAAU,EAAE,EAHN;CAINpG,QAAAA,WAAW,EAAE,EAJP;CAKN8F,QAAAA,QAAQ,EAAE,EALJ;CAMNO,QAAAA,KAAK,EAAE;CAND,OAAP;CAQA;CArDF;CAAA;CAAA,sCAwDC;CACC,aAAO;CACNpG,QAAAA,OAAO,EAAE,KAAK4F,UAAL,EADH;CAEN7F,QAAAA,WAAW,EAAE,EAFP;CAGNM,QAAAA,IAAI,EAAE,CAAC;CACNG,UAAAA,KAAK,EAAE,IAAInB,IAAJ,EADD;CAENgH,UAAAA,SAAS,EAAE,IAFL;CAGN9F,UAAAA,MAAM,EAAE;CAHF,SAAD;CAHA,OAAP;CASA;CAlEF;CAAA;CAAA,wCAqEC;CACC,aAAO;CACNP,QAAAA,OAAO,EAAE,KAAK4F,UAAL,EADH;CAENU,QAAAA,OAAO,EAAE,EAFH;CAGNC,QAAAA,cAAc,EAAE,EAHV;CAINC,QAAAA,YAAY,EAAE,EAJR;CAKNvB,QAAAA,WAAW,EAAE;CALP,OAAP;CAOA;CA7EF;CAAA;CAAA,iCAgFC;CAAA;;CACC,aAAO;CACNwB,QAAAA,UAAU,EAAE,oBAACC,KAAD,EAAQC,OAAR,EACZ;CACC,cAAI5C,cAAI,CAAC6C,QAAL,CAAcD,OAAd,CAAJ,EACA;CACC,gBAAMhH,IAAI,GAAG,IAAIN,IAAJ,CAASsH,OAAT,CAAb;;CAEA,gBACC5C,cAAI,CAAC8C,MAAL,CAAYlH,IAAZ,KACG,CAACmH,KAAK,CAACnH,IAAD,CADT,IAEGgH,OAAO,CAAC7D,MAAR,KAAmB,EAHvB,EAKA;CACC4D,cAAAA,KAAK,CAACK,MAAN,CAAa,YAAb,EAA2BJ,OAA3B;CACA;CACD;CACD,SAhBK;CAkBNK,QAAAA,cAAc,EAAE,wBAACN,KAAD,EAChB;CACC,cAAI3C,cAAI,CAACkD,aAAL,CAAmBP,KAAK,CAACjH,KAAN,CAAYG,OAA/B,CAAJ,EACA;CACC,gBAAIsH,wBAAwB,GAAGR,KAAK,CAACjH,KAAN,CAAYG,OAAZ,CAAoB,CAApB,EAAuBI,OAAtD;;CACA,YAAA,KAAI,CAACmH,UAAL,GAAkBV,UAAlB,CAA6BC,KAA7B,EAAoCQ,wBAApC;;CAEAhG,YAAAA,MAAM,CAACY,GAAP,kCAAqCoF,wBAArC;CACA9E,YAAAA,KAAK,CAACN,GAAN,kCAAoCoF,wBAApC;CACA,WAPD,MASA;CACC,gBAAIlH,OAAO,GAAG,KAAI,CAAC4F,UAAL,EAAd;;CACA,YAAA,KAAI,CAACuB,UAAL,GAAkBV,UAAlB,CAA6BC,KAA7B,EAAoC1G,OAApC;;CAEAkB,YAAAA,MAAM,CAACY,GAAP,kCAAqC9B,OAArC;CACAoC,YAAAA,KAAK,CAACN,GAAN,kCAAoC9B,OAApC;CACA;CACD,SApCK;CAsCNoH,QAAAA,iBAAiB,EAAE,2BAACV,KAAD,EAAQ/G,IAAR,EACnB;CACC+G,UAAAA,KAAK,CAACK,MAAN,CAAa,mBAAb,EAAkCpH,IAAlC;CACA,SAzCK;CA2CN0H,QAAAA,eAAe,EAAE,yBAACX,KAAD,EACjB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,2BAAb,EAA0C,IAAI1H,IAAJ,EAA1C;CACA,SA9CK;CAgDNiI,QAAAA,2BAA2B,EAAE,qCAACZ,KAAD,EAC7B;CACC,cAAI/G,IAAI,GAAG,IAAIN,IAAJ,EAAX;CACAM,UAAAA,IAAI,CAAC4H,OAAL,CAAa5H,IAAI,CAAC6H,OAAL,KAAiB,CAA9B;CAEA,cAAIC,aAAa,GAAG5C,YAAY,CAAC6C,SAAb,CAAuBC,aAAvB,CAAqChI,IAArC,CAApB;CAEA+G,UAAAA,KAAK,CAACK,MAAN,CAAa,uCAAb,EAAsDU,aAAtD;CACA,SAxDK;CA0DNG,QAAAA,yBAAyB,EAAE,mCAAClB,KAAD,EAAQ/G,IAAR,EAC3B;CACC,cACCoE,cAAI,CAAC8C,MAAL,CAAYlH,IAAZ,KACG,CAACmH,KAAK,CAACnH,IAAD,CAFV,EAIA;CACC+G,YAAAA,KAAK,CAACK,MAAN,CAAa,2BAAb,EAA0CpH,IAA1C;CACA;CACD,SAnEK;CAqENkI,QAAAA,WAAW,EAAE,qBAACnB,KAAD,EAAQ3G,WAAR,EACb;CACC2G,UAAAA,KAAK,CAACK,MAAN,CAAa,aAAb,EAA4B,KAAI,CAACe,gBAAL,CAAsB/H,WAAtB,CAA5B;CACA,SAxEK;CA0ENgI,QAAAA,cAAc,EAAE,wBAACrB,KAAD,EAAQ3G,WAAR,EAChB;CACC2G,UAAAA,KAAK,CAACK,MAAN,CAAa,gBAAb,EAA+B,KAAI,CAACe,gBAAL,CAAsB/H,WAAtB,CAA/B;CACA,SA7EK;CA+ENiI,QAAAA,oBAAoB,EAAE,8BAACtB,KAAD,EAAQ3G,WAAR,EACtB;CACC2G,UAAAA,KAAK,CAACK,MAAN,CAAa,sBAAb,EAAqChH,WAArC;CACA,SAlFK;CAoFNkI,QAAAA,yBAAyB,EAAE,mCAACvB,KAAD,EAAQ3G,WAAR,EAC3B;CACC2G,UAAAA,KAAK,CAACK,MAAN,CAAa,2BAAb,EAA0ChH,WAA1C;CACA,SAvFK;CAyFNmI,QAAAA,oBAAoB,EAAE,8BAACxB,KAAD,EACtB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,sBAAb;CACA,SA5FK;CA8FNoB,QAAAA,aAAa,EAAE,uBAACzB,KAAD,EACf;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,eAAb;CACA,SAjGK;CAmGNqB,QAAAA,SAAS,EAAE,mBAAC1B,KAAD,EAAQC,OAAR,EACX;CACC,cAAI0B,MAAM,GAAG,KAAI,CAACC,cAAL,+BAAwB3B,OAAxB,EAAb;;CAEA,cACC0B,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACsC,OAA3B,IACGF,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACuC,MAF/B,EAIA;CACCH,YAAAA,MAAM,CAAClC,UAAP,GAAoBvH,IAAI,CAACW,YAAL,CAAkB8I,MAAM,CAACzE,KAAzB,CAApB;CACAyE,YAAAA,MAAM,CAACtI,WAAP,GAAqBnB,IAAI,CAACM,aAAL,CAAmBmJ,MAAM,CAACzE,KAA1B,EAAiC8C,KAAK,CAACjH,KAAN,CAAYqF,MAAZ,CAAmBC,MAApD,CAArB;CACA,WAPD,MASA;CACC,gBAAMpF,IAAI,GAAG,IAAIN,IAAJ,EAAb;CACA,gBAAMoJ,SAAS,GAAG,CAAC9I,IAAnB;CAEA0I,YAAAA,MAAM,CAAClC,UAAP,GAAoBvH,IAAI,CAACW,YAAL,CAAkB8I,MAAM,CAACzE,KAAzB,EAAgC6E,SAAhC,CAApB;CACAJ,YAAAA,MAAM,CAACtI,WAAP,GAAqBnB,IAAI,CAACM,aAAL,CAAmBmJ,MAAM,CAACzE,KAA1B,EAAiC6E,SAAjC,EAA4C/B,KAAK,CAACjH,KAAN,CAAYqF,MAAZ,CAAmBC,MAA/D,CAArB;;CAEA,gBAAIsD,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACsC,OAA/B,EACA;CACCF,cAAAA,MAAM,CAACjC,KAAP,GAAe;CACdsC,gBAAAA,SAAS,EAAE/I;CADG,eAAf;CAGA0I,cAAAA,MAAM,CAACzE,KAAP,IACC,MACEnB,aAAG,CAACC,UAAJ,CAAe,sCAAf,CADF,GAEE,GAFF,GAGElD,IAAI,CAACmJ,gBAAL,CAAsBN,MAAM,CAACjC,KAAP,CAAasC,SAAnC,CAJH;CAMA;CACD;;CAEDhC,UAAAA,KAAK,CAACK,MAAN,CAAa,WAAb,gCACI,KAAI,CAAC6B,cAAL,EADJ,EAEIP,MAFJ;;CAKA,cAAI,CAAC3B,KAAK,CAACjH,KAAN,CAAYsG,eAAZ,CAA4B8C,IAA5B,CAAiC,UAAA9I,WAAW;CAAA,mBAAIA,WAAW,KAAKsI,MAAM,CAACtI,WAA3B;CAAA,WAA5C,CAAL,EACA;CACC,gBAAM+I,YAAY,GACjBT,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAAC8C,IAA3B,IACGV,MAAM,CAACzE,KAAP,KAAiBoF,QAAQ,CAACC,IAF9B;CAKA,gBAAMC,iBAAiB,GACtBb,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACkD,GAA3B,IACGxC,OAAO,CAACuC,iBAFZ;;CAKA,gBACCJ,YAAY,IACTI,iBADH,IAEGb,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACuC,MAH/B,EAKA;CACC9B,cAAAA,KAAK,CAACK,MAAN,CAAa,sBAAb,EAAqCsB,MAAM,CAACtI,WAA5C;CACA;CACD;;CAED,iBAAOsI,MAAP;CACA,SAjKK;CAmKNe,QAAAA,yBAAyB,EAAE,mCAAC1C,KAAD,EAAQC,OAAR,EAC3B;CACCD,UAAAA,KAAK,CAACK,MAAN,CAAa,2BAAb,EAA0CJ,OAA1C;CACA,SAtKK;CAwKN0C,QAAAA,aAAa,EAAE,uBAAC3C,KAAD,EACf;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,eAAb;CACA,SA3KK;CA6KNuC,QAAAA,UAAU,EAAE,oBAAC5C,KAAD,EAAQC,OAAR,EACZ;CACCD,UAAAA,KAAK,CAACK,MAAN,CAAa,oBAAb;;CAEA,cAAMsB,MAAM,GAAG,KAAI,CAACkB,eAAL,+BAAyB5C,OAAzB,EAAf;;CAEA,cAAIjH,MAAJ;CACA,cAAIK,WAAJ;CACA,cAAIyJ,YAAY,GAAG,IAAnB;;CAEA,cACCnB,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACkD,GAA3B,IACGd,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAAC8C,IAD9B,IAEGV,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACC,OAF9B,IAGGmC,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACwD,SAJ/B,EAMA;CACC/J,YAAAA,MAAM,GAAG,KAAI,CAACgK,gBAAL,CAAsBhD,KAAtB,EAA6B2B,MAAM,CAACzE,KAApC,CAAT;CACA7D,YAAAA,WAAW,GAAIL,MAAM,GAAGA,MAAM,CAACK,WAAV,GAAwB,IAA7C;;CAEA,gBAAI,CAACA,WAAL,EACA;CACCA,cAAAA,WAAW,GAAG,KAAI,CAACoH,UAAL,GAAkBiB,SAAlB,CAA4B1B,KAA5B,EAAmCC,OAAnC,EAA4C5G,WAA1D;CACA;;CAEDyJ,YAAAA,YAAY,GAAI9J,MAAM,IAAIA,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAAC8C,IAAtC,GACZ,KAAI,CAACY,wBAAL,CAA8BjD,KAA9B,EAAqC2B,MAAM,CAACuB,OAA5C,CADY,GAEZ,KAAI,CAACC,4BAAL,CAAkCnD,KAAlC,EAAyC3G,WAAzC,CAFH;CAGA,WAlBD,MAmBK,IACJsI,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACsC,OAA3B,IACGF,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACuC,MAF1B,EAIL;CACC9I,YAAAA,MAAM,GAAG,KAAI,CAACyH,UAAL,GAAkBiB,SAAlB,CAA4B1B,KAA5B,EAAmCC,OAAnC,CAAT;CACA5G,YAAAA,WAAW,GAAGL,MAAM,CAACK,WAArB;CACA;;CAED,cAAM+J,SAAS,GAAG;CACjBvF,YAAAA,IAAI,EAAE8D,MAAM,CAAC9D,IADI;CAEjBX,YAAAA,KAAK,EAAEyE,MAAM,CAACzE;CAFG,WAAlB;;CAKA,cAAI,CAAC4F,YAAL,EACA;CACC,mBAAOnB,MAAM,CAACzE,KAAd;CAEA8C,YAAAA,KAAK,CAACK,MAAN,CAAa,YAAb,gCACI,KAAI,CAACgD,eAAL,EADJ,EAEI1B,MAFJ;CAGCtI,cAAAA,WAAW,EAAXA;CAHD;CAMAsD,YAAAA,WAAW,CAAC9C,MAAZ,CAAmB,cAAnB;CACA6B,YAAAA,KAAK,CAACN,GAAN,CAAU,aAAV,EAAyBgI,SAAzB,EAAoCzG,WAAW,CAAC2G,WAAZ,CAAwB,cAAxB,CAApC;CACA9I,YAAAA,MAAM,CAACY,GAAP,CAAW,aAAX,EAA0BgI,SAA1B,EAAqCzG,WAAW,CAAC2G,WAAZ,CAAwB,cAAxB,CAArC;CAEA;CACA;;CAED,cAAI3B,MAAM,CAAC9D,IAAP,KAAgB0B,wBAAU,CAACuC,MAA/B,EACA;CACC9B,YAAAA,KAAK,CAACK,MAAN,CAAa,8BAAb,EAA6CyC,YAA7C;CACA;;CAED,cAAIhE,cAAc,GAAGkB,KAAK,CAACjH,KAAN,CAAYqF,MAAZ,CAAmBU,cAAxC;CACA,cAAIyE,eAAe,GAAG,IAAI5K,IAAJ,CAASmG,cAAT,IAA2B,IAAInG,IAAJ,CAAS,KAAI,CAACuG,UAAL,EAAT,CAAjD;;CACA,cAAIsE,aAAa,GAAG,KAAI,CAACC,UAAL,GAAkBD,aAAlB,CAAgCxD,KAAK,CAACjH,KAAtC,CAApB;;CAEA,cAAI,CAAC+F,cAAD,IAAoByE,eAAe,IAAI,CAACC,aAA5C,EACA;CACC,gBAAI,KAAI,CAACC,UAAL,GAAkBC,sBAAlB,CAAyC1D,KAAK,CAACjH,KAA/C,KAAyD,KAA7D;CACA;CACC,oBAAIkE,YAAJ,CACClB,aAAG,CAACC,UAAJ,CAAe,gDAAf,CADD,EAECD,aAAG,CAACC,UAAJ,CAAe,+CAAf,CAFD,EAGC,YAAM;CACLH,kBAAAA,EAAE,CAACC,OAAH,CAAW6H,aAAX,CAAyB,MAAzB;CACA9H,kBAAAA,EAAE,CAACC,OAAH,CAAW8H,SAAX,CAAqB,IAArB;CACA/H,kBAAAA,EAAE,CAACgI,eAAH,CAAmBD,SAAnB,CAA6B,aAA7B;CACA,iBAPF,EAQEE,IARF;CAUA9D,gBAAAA,KAAK,CAACK,MAAN,CAAa,mBAAb,EAAkC,KAAI,CAACnB,UAAL,EAAlC;CACA;CACD;;CAEDvC,UAAAA,WAAW,CAAC9C,MAAZ,CAAmB,cAAnB;CACA6B,UAAAA,KAAK,CAACN,GAAN,CAAU,SAAV,EAAqBgI,SAArB,EAAgCzG,WAAW,CAAC2G,WAAZ,CAAwB,cAAxB,CAAhC;CACA9I,UAAAA,MAAM,CAACY,GAAP,CAAW,SAAX,EAAsBgI,SAAtB,EAAiCzG,WAAW,CAAC2G,WAAZ,CAAwB,cAAxB,CAAjC;CACA,SAvQK;CAyQNS,QAAAA,qBAAqB,EAAE,+BAAC/D,KAAD,EACvB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,uBAAb;CACA,SA5QK;CA8QN2D,QAAAA,kBAAkB,EAAE,4BAAChE,KAAD,EACpB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,oBAAb;CACA,SAjRK;CAmRN4D,QAAAA,YAAY,EAAE,sBAACjE,KAAD,EACd;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,cAAb;CACA,SAtRK;CAwRN6D,QAAAA,eAAe,EAAE,yBAAClE,KAAD,EACjB;CACC,cAAIA,KAAK,CAACjH,KAAN,CAAYG,OAAZ,CAAoBkD,MAApB,KAA+B,CAAnC,EACA;CACC;CACA;;CAED,cAAIkD,SAAS,GAAG,KAAI,CAAC6E,gBAAL,CAAsBnE,KAAtB,CAAhB;;CACA,cAAIoE,aAAa,GAAGpE,KAAK,CAACjH,KAAN,CAAYkG,WAAZ,CAAwBE,QAAxB,CAClBgD,IADkB,CACb,UAAAvC,OAAO;CAAA,mBAAIA,OAAO,CAACtG,OAAR,KAAoB0G,KAAK,CAACjH,KAAN,CAAYkG,WAAZ,CAAwB3F,OAAhD;CAAA,WADM,CAApB;;CAGA,cAAIqI,MAAM,GAAG,KAAI,CAAC0C,iBAAL,CAAuB;CACnC/K,YAAAA,OAAO,EAAE0G,KAAK,CAACjH,KAAN,CAAYkG,WAAZ,CAAwB3F,OADE;CAEnCsG,YAAAA,OAAO,EAAEwE,aAAa,GAAGA,aAAa,CAACzI,IAAjB,GAAwB,EAFX;CAGnCkE,YAAAA,cAAc,EAAEP,SAAS,CAACpG,OAHS;CAInC4G,YAAAA,YAAY,EAAER,SAAS,CAACgF,KAJW;CAKnC/F,YAAAA,WAAW,EAAEyB,KAAK,CAACjH,KAAN,CAAYqF,MAAZ,CAAmBG;CALG,WAAvB,CAAb;;CAQAyB,UAAAA,KAAK,CAACK,MAAN,CAAa,iBAAb,gCACI,KAAI,CAACkE,iBAAL,EADJ,EAEI5C,MAFJ;CAIA,SA/SK;CAiTN6C,QAAAA,cAAc,EAAE,wBAACxE,KAAD,EAChB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,gBAAb;CACA,SApTK;CAsTNoE,QAAAA,gBAAgB,EAAE,0BAACzE,KAAD,EAClB;CACC,cAAInB,sBAAsB,GAAGmB,KAAK,CAACjH,KAAN,CAAYqF,MAAZ,CAAmBS,sBAAhD;;CACA,cAAI,CAACA,sBAAL,EACA;CACC;CACA;;CAED,cAAI,IAAIlG,IAAJ,CAAS,KAAI,CAACuG,UAAL,EAAT,IAA8B,IAAIvG,IAAJ,CAASkG,sBAAT,CAAlC,EACA;CACCmB,YAAAA,KAAK,CAACK,MAAN,CAAa,wBAAb,EAAuC,IAAI1H,IAAJ,CAASkG,sBAAT,CAAvC;CACA;CACD,SAlUK;CAoUN6F,QAAAA,sBAAsB,EAAE,gCAAC1E,KAAD,EAAQ/G,IAAR,EACxB;CACC+G,UAAAA,KAAK,CAACK,MAAN,CAAa,wBAAb,EAAuC,IAAI1H,IAAJ,CAASM,IAAT,CAAvC;CACA,SAvUK;CAyUN0L,QAAAA,UAAU,EAAE,oBAAC3E,KAAD,EAAQC,OAAR,EACZ;CACC,cAAMjH,MAAM,GAAGgH,KAAK,CAACjH,KAAN,CAAYC,MAAZ,CAAmBmJ,IAAnB,CAAwB,UAAAnJ,MAAM;CAAA,mBAAIA,MAAM,CAACK,WAAP,KAAuB4G,OAAO,CAAC5G,WAAnC;CAAA,WAA9B,CAAf;;CAEA,cAAIL,MAAM,KAAKqE,cAAI,CAAC6C,QAAL,CAAcD,OAAO,CAACL,OAAtB,KAAkCvC,cAAI,CAACuH,QAAL,CAAc3E,OAAO,CAACL,OAAtB,CAAvC,CAAV,EACA;CACCI,YAAAA,KAAK,CAACK,MAAN,CAAa,YAAb,EAA2B;CAC1BrH,cAAAA,MAAM,EAANA,MAD0B;CAE1B4G,cAAAA,OAAO,EAAEK,OAAO,CAACL,OAAR,CAAgBxC,QAAhB;CAFiB,aAA3B;CAIA;CACD,SApVK;CAsVNyH,QAAAA,cAAc,EAAE,wBAAC7E,KAAD,EAAQ8E,QAAR,EAChB;CACC,cACCzH,cAAI,CAAC8C,MAAL,CAAY2E,QAAZ,KACGzH,cAAI,CAACuH,QAAL,CAAcE,QAAQ,CAACC,OAAT,EAAd,CADH,IAEGD,QAAQ,GAAG,IAAInM,IAAJ,EAHf,EAKA;CACCqH,YAAAA,KAAK,CAACK,MAAN,CAAa,gBAAb,EAA+ByE,QAA/B;CAEAtK,YAAAA,MAAM,CAACc,IAAP,CAAY,uBAAZ,EAAqCwJ,QAAQ,CAAC1H,QAAT,EAArC;CACA1B,YAAAA,KAAK,CAACN,GAAN,CAAU,uBAAV,EAAmC0J,QAAQ,CAAC1H,QAAT,EAAnC;CACA;CACD,SAnWK;CAqWN4H,QAAAA,gBAAgB,EAAE,0BAAChF,KAAD,EAClB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,kBAAb;CACA,SAxWK;CA0WN4E,QAAAA,gBAAgB,EAAE,0BAACjF,KAAD,EAAQJ,OAAR,EAClB;CACCI,UAAAA,KAAK,CAACK,MAAN,CAAa,kBAAb,EAAiCT,OAAO,CAACxC,QAAR,EAAjC;CACA,SA7WK;CA+WN8H,QAAAA,uBAAuB,EAAE,iCAAClF,KAAD,EACzB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,yBAAb;CACA,SAlXK;CAoXN8E,QAAAA,cAAc,EAAE,wBAACnF,KAAD,EAChB;CACCA,UAAAA,KAAK,CAACK,MAAN,CAAa,gBAAb;CACA;CAvXK,OAAP;CAyXA;CA1cF;CAAA;CAAA,mCA6cC;CAAA;;CACC,aAAO;CACNN,QAAAA,UAAU,EAAE,oBAAChH,KAAD,EAAQkH,OAAR,EACZ;CACClH,UAAAA,KAAK,CAACkG,WAAN,CAAkB3F,OAAlB,GAA4B2G,OAA5B;CAEA,kHAAgBlH,KAAhB;CACA,SANK;CAQNmI,QAAAA,yBAAyB,EAAE,mCAACnI,KAAD,EAAQE,IAAR,EAC3B;CACCF,UAAAA,KAAK,CAACqF,MAAN,CAAaS,sBAAb,GAAsC5F,IAAtC;CAEA,kHAAgBF,KAAhB;CACA,SAbK;CAeN2H,QAAAA,iBAAiB,EAAE,2BAAC3H,KAAD,EAAQE,IAAR,EACnB;CACCF,UAAAA,KAAK,CAACqF,MAAN,CAAaU,cAAb,GAA8B7F,IAA9B;CAEA,kHAAgBF,KAAhB;CACA,SApBK;CAsBNqM,QAAAA,yBAAyB,EAAE,mCAACrM,KAAD,EAAQE,IAAR,EAC3B;CACCF,UAAAA,KAAK,CAACqF,MAAN,CAAaW,sBAAb,GAAsC9F,IAAtC;CAEA,kHAAgBF,KAAhB;CACA,SA3BK;CA6BNsM,QAAAA,qCAAqC,EAAE,+CAACtM,KAAD,EAAQE,IAAR,EACvC;CACCF,UAAAA,KAAK,CAACqF,MAAN,CAAaY,kCAAb,GAAkD/F,IAAlD;CAEA,kHAAgBF,KAAhB;CACA,SAlCK;CAoCNoI,QAAAA,WAAW,EAAE,qBAACpI,KAAD,EAAQkH,OAAR,EACb;CACClH,UAAAA,KAAK,CAACqG,QAAN,CAAekG,IAAf,CAAoBrF,OAApB;CAEA,kHAAgBlH,KAAhB;CACA,SAzCK;CA2CNsI,QAAAA,cAAc,EAAE,wBAACtI,KAAD,EAAQkH,OAAR,EAChB;CACClH,UAAAA,KAAK,CAACqG,QAAN,GAAiBrG,KAAK,CAACqG,QAAN,CAAejG,MAAf,CAAsB,UAAAE,WAAW;CAAA,mBAAIA,WAAW,KAAK4G,OAApB;CAAA,WAAjC,CAAjB;CAEA,kHAAgBlH,KAAhB;CACA,SAhDK;CAkDNuI,QAAAA,oBAAoB,EAAE,8BAACvI,KAAD,EAAQkH,OAAR,EACtB;CACClH,UAAAA,KAAK,CAACsG,eAAN,CAAsBiG,IAAtB,CAA2BrF,OAA3B;CAEA,kHAAgBlH,KAAhB;CACA,SAvDK;CAyDNwI,QAAAA,yBAAyB,EAAE,mCAACxI,KAAD,EAAQkH,OAAR,EAC3B;CACClH,UAAAA,KAAK,CAACsG,eAAN,GAAwBtG,KAAK,CAACsG,eAAN,CAAsBlG,MAAtB,CAA6B,UAAAsG,UAAU;CAAA,mBAAIA,UAAU,KAAKQ,OAAnB;CAAA,WAAvC,CAAxB;CAEA,kHAAgBlH,KAAhB;CACA,SA9DK;CAgENyI,QAAAA,oBAAoB,EAAE,8BAACzI,KAAD,EACtB;CACCA,UAAAA,KAAK,CAACsG,eAAN,GAAwB,EAAxB;CAEA,kHAAgBtG,KAAhB;CACA,SArEK;CAuEN0I,QAAAA,aAAa,EAAE,uBAAC1I,KAAD,EACf;CACCA,UAAAA,KAAK,CAACqG,QAAN,GAAiB,EAAjB;CAEA,kHAAgBrG,KAAhB;CACA,SA5EK;CA8EN2I,QAAAA,SAAS,EAAE,mBAAC3I,KAAD,EAAQkH,OAAR,EACX;CACClH,UAAAA,KAAK,CAACC,MAAN,CAAasM,IAAb,CAAkBrF,OAAlB;CAEA,kHAAgBlH,KAAhB;CACA,SAnFK;CAqFN2J,QAAAA,yBAAyB,EAAE,mCAAC3J,KAAD,EAAQkH,OAAR,EAC3B;CACClH,UAAAA,KAAK,CAACC,MAAN,GAAeD,KAAK,CAACC,MAAN,CAAaG,MAAb,CAAoB,UAAAH,MAAM;CAAA,mBAAIA,MAAM,CAACK,WAAP,KAAuB4G,OAA3B;CAAA,WAA1B,CAAf;CACAlH,UAAAA,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqB,UAAAC,KAAK;CAAA,mBAAIA,KAAK,CAACC,WAAN,KAAsB4G,OAA1B;CAAA,WAA1B,CAAhB;CACAlH,UAAAA,KAAK,CAACsG,eAAN,GAAwBtG,KAAK,CAACsG,eAAN,CAAsBlG,MAAtB,CAA6B,UAAAE,WAAW;CAAA,mBAAIA,WAAW,KAAK4G,OAApB;CAAA,WAAxC,CAAxB;CACAlH,UAAAA,KAAK,CAACqG,QAAN,GAAiBrG,KAAK,CAACqG,QAAN,CAAejG,MAAf,CAAsB,UAAAE,WAAW;CAAA,mBAAIA,WAAW,KAAK4G,OAApB;CAAA,WAAjC,CAAjB;CAEA,kHAAgBlH,KAAhB;CACA,SA7FK;CA+FN4J,QAAAA,aAAa,EAAE,uBAAC5J,KAAD,EACf;CACCA,UAAAA,KAAK,CAACC,MAAN,GAAe,EAAf;CAEA,kHAAgBD,KAAhB;CACA,SApGK;CAsGN6J,QAAAA,UAAU,EAAE,oBAAC7J,KAAD,EAAQkH,OAAR,EACZ;CACClH,UAAAA,KAAK,CAACG,OAAN,CAAcoM,IAAd,CAAmBrF,OAAnB;CAEA,kHAAgBlH,KAAhB;CACA,SA3GK;CA6GNwM,QAAAA,4BAA4B,EAAE,sCAACxM,KAAD,EAAQ+J,YAAR,EAC9B;CACCA,UAAAA,YAAY,CAACnJ,IAAb,CAAkB2L,IAAlB,CAAuB;CACtBxL,YAAAA,KAAK,EAAE,IAAInB,IAAJ,EADe;CAEtBkB,YAAAA,MAAM,EAAE;CAFc,WAAvB;CAKA,kHAAgBd,KAAhB;CACA,SArHK;CAuHNiL,QAAAA,kBAAkB,EAAE,4BAACjL,KAAD,EAAW;CAC9B,cAAIyM,8BAA8B,GAAG,KAArC;CAEAzM,UAAAA,KAAK,CAACG,OAAN,CAAcK,GAAd,CAAkB,UAAAH,KAAK,EAAI;CAC1BA,YAAAA,KAAK,CAACO,IAAN,GAAaP,KAAK,CAACO,IAAN,CAAWJ,GAAX,CAAe,UAAAI,IAAI,EAAI;CACnC,kBAAIA,IAAI,CAACE,MAAL,KAAgB,IAApB,EACA;CACCF,gBAAAA,IAAI,CAACE,MAAL,GAAc,IAAIlB,IAAJ,EAAd;CACAgB,gBAAAA,IAAI,CAACgG,SAAL,GAAiB,IAAjB;;CAEA,oBAAI,IAAIhH,IAAJ,CAASgB,IAAI,CAACG,KAAd,EAAqBgH,OAArB,OAAmCnH,IAAI,CAACE,MAAL,CAAYiH,OAAZ,EAAvC,EACA;CACC0E,kBAAAA,8BAA8B,GAAG,IAAjC;CACA7L,kBAAAA,IAAI,CAAC8L,iBAAL,GAAyB,IAAzB;CAEAjL,kBAAAA,MAAM,CAACc,IAAP,CAAY,8BAAZ;CACAI,kBAAAA,KAAK,CAACN,GAAN,CAAU,8BAAV;CACA;;CAED,oBAAIhC,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACsC,OAA9B,EACA;CACC,yBAAOlI,IAAP;CACA;;CAED,oBAAI+L,oBAAoB,GAAG5M,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaO,gBAA1B,CAA3B;CAEA5F,gBAAAA,KAAK,CAACC,MAAN,CACEG,MADF,CACS,UAAAH,MAAM,EAAI;CACjB,sBAAI,CAACD,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwB5M,MAAM,CAACK,WAA/B,CAAL,EACA;CACC,2BAAOL,MAAP;CACA;CACD,iBANF,EAOEO,GAPF,CAOM,UAAAP,MAAM,EAAI;CACd,uDACIA,MADJ;CAECW,oBAAAA,IAAI,EAAEb,IAAI,CAAC+M,wBAAL,CAA8B9M,KAA9B,EAAqCC,MAArC,EAA6CD,KAAK,CAACkG,WAAN,CAAkB3F,OAA/D;CAFP;CAIA,iBAZF,EAaEwM,IAbF,CAaO,UAACC,aAAD,EAAgBC,UAAhB;CAAA,yBAA+BD,aAAa,CAACpM,IAAd,GAAqBqM,UAAU,CAACrM,IAA/D;CAAA,iBAbP,EAcEsM,OAdF,CAcU,UAAAjN,MAAM,EAAI;CAClB,sBACCD,KAAK,CAACsG,eAAN,CAAsBuG,QAAtB,CAA+B5M,MAAM,CAACK,WAAtC,KACGL,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAF/B,EAIA;CACC;CACA;;CAED,sBAAI1D,YAAY,CAAC6C,SAAb,CAAuBkF,kBAAvB,CAA0CnN,KAA1C,EAAiDC,MAAjD,EAAyDmN,IAAzD,OAAoE,EAAxE,EACA;CACC,wBAAIT,oBAAoB,GAAG1M,MAAM,CAACW,IAA9B,IAAsC,CAA1C,EACA;CACC+L,sBAAAA,oBAAoB,IAAI1M,MAAM,CAACW,IAA/B;CACA;CACA;;CAEDZ,oBAAAA,KAAK,CAACqG,QAAN,CAAekG,IAAf,CAAoBtM,MAAM,CAACK,WAA3B;CACA;CACD,iBAjCF;CAkCA;;CAED,qBAAOM,IAAP;CACA,aA3DY,EA2DVR,MA3DU,CA2DH,UAAAS,QAAQ;CAAA,qBAAI,CAACA,QAAQ,CAAC6L,iBAAd;CAAA,aA3DL,CAAb;CA6DA,mBAAOrM,KAAP;CACA,WA/DD;;CAiEA,cAAIoM,8BAAJ,EACA;CACCzM,YAAAA,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqB,UAAAC,KAAK;CAAA,qBAAIiE,cAAI,CAACkD,aAAL,CAAmBnH,KAAK,CAACO,IAAzB,CAAJ;CAAA,aAA1B,CAAhB;CACA;;CAED,kHAAgBZ,KAAhB;CACA,SAjMK;CAmMNgL,QAAAA,qBAAqB,EAAE,+BAAChL,KAAD,EACvB;CACCA,UAAAA,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAACG,OAAN,CAAcK,GAAd,CAAkB,UAAAH,KAAK,EAAI;CAC1CA,YAAAA,KAAK,CAACO,IAAN,GAAaP,KAAK,CAACO,IAAN,CAAWJ,GAAX,CAAe,UAAAI,IAAI,EAAI;CACnC,kBAAIA,IAAI,CAACE,MAAL,KAAgB,IAApB,EACA;CACCF,gBAAAA,IAAI,CAACgG,SAAL,GAAiB,IAAIhH,IAAJ,EAAjB;CACA6B,gBAAAA,MAAM,CAACY,GAAP,CAAW,oBAAX,EAAiChC,KAAK,CAACC,WAAvC,EAAoD,cAApD;CACA;;CAED,qBAAOM,IAAP;CACA,aARY,CAAb;CAUA,mBAAOP,KAAP;CACA,WAZe,CAAhB;CAcA,kHAAgBL,KAAhB;CACA,SApNK;CAsNNkL,QAAAA,YAAY,EAAE,sBAAClL,KAAD,EACd;CACCA,UAAAA,KAAK,CAACG,OAAN,GAAgB,EAAhB;CAEA,kHAAgBH,KAAhB;CACA,SA3NK;CA6NNmL,QAAAA,eAAe,EAAE,yBAACnL,KAAD,EAAQkH,OAAR,EACjB;CACClH,UAAAA,KAAK,CAACuG,SAAN,CAAgBgG,IAAhB,CAAqBrF,OAArB;CAEA,kHAAgBlH,KAAhB;CACA,SAlOK;CAoONyL,QAAAA,cAAc,EAAE,wBAACzL,KAAD,EAChB;CACCA,UAAAA,KAAK,CAACuG,SAAN,GAAkB,EAAlB;CAEA,kHAAgBvG,KAAhB;CACA,SAzOK;CA2ON2L,QAAAA,sBAAsB,EAAE,gCAAC3L,KAAD,EAAQE,IAAR,EACxB;CACCF,UAAAA,KAAK,CAACG,OAAN,GAAgBH,KAAK,CAACG,OAAN,CACdC,MADc,CACP,UAAAC,KAAK;CAAA,mBAAI,IAAIT,IAAJ,CAASS,KAAK,CAACE,OAAf,IAA0BL,IAA9B;CAAA,WADE,CAAhB;;CAGA,cAAMmN,eAAe,GAAG,SAAlBA,eAAkB,CAAA/M,WAAW,EAAI;CAEtC,gBAAML,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAamJ,IAAb,CAAkB,UAAAnJ,MAAM;CAAA,qBAAIA,MAAM,CAACK,WAAP,KAAuBA,WAA3B;CAAA,aAAxB,CAAf;;CAEA,gBAAIgE,cAAI,CAACgJ,QAAL,CAAcrN,MAAd,KAAyBA,MAAM,CAACsN,cAAP,CAAsB,MAAtB,CAA7B,EACA;CACC,kBAAItN,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAA/B,EACA;CACC,uBAAO,IAAP;CACA;;CAED,kBAAM0E,iBAAiB,GAAGxN,KAAK,CAACG,OAAN,CAAciJ,IAAd,CAAmB,UAAA/I,KAAK;CAAA,uBAAIA,KAAK,CAACC,WAAN,KAAsBA,WAA1B;CAAA,eAAxB,CAA1B;;CACA,kBAAIkN,iBAAJ,EACA;CACC,uBAAO,IAAP;CACA;;CAED/L,cAAAA,MAAM,CAACc,IAAP,WAAetC,MAAM,CAACkE,KAAtB;CACAxB,cAAAA,KAAK,CAACN,GAAN,WAAapC,MAAM,CAACkE,KAApB;CACA;;CAED,mBAAO,KAAP;CACA,WAtBD;;CAwBAnE,UAAAA,KAAK,CAACqG,QAAN,GAAiBrG,KAAK,CAACqG,QAAN,CAAejG,MAAf,CAAsBiN,eAAtB,CAAjB;CACArN,UAAAA,KAAK,CAACsG,eAAN,GAAwBtG,KAAK,CAACsG,eAAN,CAAsBlG,MAAtB,CAA6BiN,eAA7B,CAAxB;;CAEA,cAAI/I,cAAI,CAACkD,aAAL,CAAmBxH,KAAK,CAACG,OAAzB,CAAJ,EACA;CACC,gBAAIsN,mBAAmB,GAAG,EAA1B;CAEAzN,YAAAA,KAAK,CAACG,OAAN,CAAc+M,OAAd,CAAsB,UAAA7M,KAAK,EAAI;CAC9B,kBAAI,CAACoN,mBAAmB,CAACZ,QAApB,CAA6BxM,KAAK,CAACC,WAAnC,CAAL,EACA;CACCmN,gBAAAA,mBAAmB,CAAClB,IAApB,CAAyBlM,KAAK,CAACC,WAA/B;CACA;CACD,aALD;CAOAN,YAAAA,KAAK,CAACC,MAAN,GAAeD,KAAK,CAACC,MAAN,CACbG,MADa,CACN,UAAAH,MAAM;CAAA,qBAAIwN,mBAAmB,CAACZ,QAApB,CAA6B5M,MAAM,CAACK,WAApC,CAAJ;CAAA,aADA,CAAf;CAGAN,YAAAA,KAAK,CAACC,MAAN,GAAeD,KAAK,CAACC,MAAN,CAAaO,GAAb,CAAiB,UAAAP,MAAM,EAAI;CACzCA,cAAAA,MAAM,CAACmG,QAAP,GAAkBnG,MAAM,CAACmG,QAAP,CAAgBhG,MAAhB,CAAuB,UAAAyG,OAAO;CAAA,uBAAI,IAAIjH,IAAJ,CAASiH,OAAO,CAACtG,OAAjB,IAA4BL,IAAhC;CAAA,eAA9B,CAAlB;CAEA,qBAAOD,MAAP;CACA,aAJc,CAAf;CAKA,WAnBD,MAqBA;CACCD,YAAAA,KAAK,CAACC,MAAN,GAAe,EAAf;CACA;;CAEDD,UAAAA,KAAK,CAACuG,SAAN,GAAkB,EAAlB;CACAvG,UAAAA,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,GAA6BpG,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,CAC3BhG,MAD2B,CACpB,UAAAyG,OAAO;CAAA,mBAAI,IAAIjH,IAAJ,CAASiH,OAAO,CAACtG,OAAjB,IAA4BL,IAAhC;CAAA,WADa,CAA7B;CAGAuB,UAAAA,MAAM,CAACY,GAAP,gCAAmCqL,mCAAa,CAACrJ,QAAd,CAAuBnE,IAAvB,CAAnC;CACAyC,UAAAA,KAAK,CAACgL,KAAN;CACAhL,UAAAA,KAAK,CAACN,GAAN,gCAAkCqL,mCAAa,CAACrJ,QAAd,CAAuBnE,IAAvB,CAAlC;CAEA,kHAAgBF,KAAhB;CACA,SA7SK;CA+SN4L,QAAAA,UAAU,EAAE,oBAAC5L,KAAD,EAAQkH,OAAR,EACZ;CACC,cAAM3G,OAAO,GAAGP,KAAK,CAACkG,WAAN,CAAkB3F,OAAlC;CAEA,cAAIsG,OAAO,GAAGK,OAAO,CAACjH,MAAR,CAAemG,QAAf,CAAwBgD,IAAxB,CAA6B,UAAAvC,OAAO;CAAA,mBAAIA,OAAO,CAACtG,OAAR,KAAoBA,OAAxB;CAAA,WAApC,CAAd;;CACA,cAAIsG,OAAJ,EACA;CACCA,YAAAA,OAAO,CAACjE,IAAR,GAAesE,OAAO,CAACL,OAAvB;CACA,WAHD,MAKA;CACCK,YAAAA,OAAO,CAACjH,MAAR,CAAemG,QAAf,CAAwBmG,IAAxB,CAA6B;CAC5BhM,cAAAA,OAAO,EAAPA,OAD4B;CAE5BqC,cAAAA,IAAI,EAAEsE,OAAO,CAACL;CAFc,aAA7B;CAIA;;CAED,kHAAgB7G,KAAhB;CACA,SAjUK;CAmUNkM,QAAAA,gBAAgB,EAAE,0BAAClM,KAAD,EAAQ4C,IAAR,EAClB;CACC,cAAMrC,OAAO,GAAGP,KAAK,CAACkG,WAAN,CAAkB3F,OAAlC;CAEA,cAAIsG,OAAO,GAAG7G,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,CAA2BgD,IAA3B,CAAgC,UAAAvC,OAAO;CAAA,mBAAIA,OAAO,CAACtG,OAAR,KAAoBA,OAAxB;CAAA,WAAvC,CAAd;;CACA,cAAIsG,OAAJ,EACA;CACCA,YAAAA,OAAO,CAACjE,IAAR,GAAeA,IAAf;CACA,WAHD,MAKA;CACC5C,YAAAA,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,CAA2BmG,IAA3B,CAAgC;CAC/BhM,cAAAA,OAAO,EAAPA,OAD+B;CAE/BqC,cAAAA,IAAI,EAAJA;CAF+B,aAAhC;CAIA;;CAED,kHAAgB5C,KAAhB;CACA,SArVK;CAuVN8L,QAAAA,cAAc,EAAE,wBAAC9L,KAAD,EAAQ+L,QAAR,EAChB;CACC/L,UAAAA,KAAK,CAACqF,MAAN,CAAaQ,WAAb,GAA2BkG,QAA3B;CAEA,kHAAgB/L,KAAhB;CACA,SA5VK;CA8VNiM,QAAAA,gBAAgB,EAAE,0BAACjM,KAAD,EAClB;CACCA,UAAAA,KAAK,CAACqF,MAAN,CAAaQ,WAAb,GAA2B,IAA3B;CAEA,kHAAgB7F,KAAhB;CACA,SAnWK;CAqWNmM,QAAAA,uBAAuB,EAAE,iCAACnM,KAAD,EACzB;CACCA,UAAAA,KAAK,CAACG,OAAN,CAAcK,GAAd,CAAkB,UAAAH,KAAK,EAAI;CAC1BA,YAAAA,KAAK,CAACO,IAAN,GAAaP,KAAK,CAACO,IAAN,CAAWJ,GAAX,CAAe,UAAAK,QAAQ,EAAI;CACvC,kBACCA,QAAQ,CAACC,MAAT,KAAoB,IAApB,IACGD,QAAQ,CAAC+F,SAAT,KAAuB,IAF3B,EAIA;CACC/F,gBAAAA,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAAC+F,SAA3B;CACA/F,gBAAAA,QAAQ,CAAC+F,SAAT,GAAqB,IAArB;CAEAnF,gBAAAA,MAAM,CAACY,GAAP,CAAW,oDAAX;CACAM,gBAAAA,KAAK,CAACgL,KAAN;CACAhL,gBAAAA,KAAK,CAACN,GAAN,CAAU,oDAAV;CACA;;CAED,qBAAOxB,QAAP;CACA,aAfY,CAAb;CAiBAR,YAAAA,KAAK,CAACO,IAAN,GAAaP,KAAK,CAACO,IAAN,CAAWR,MAAX,CAAkB,UAAAQ,IAAI,EAAI;CACtC,kBAAIA,IAAI,CAACE,MAAL,IAAe,IAAnB,EACA;CACC,uBAAO,IAAP;CACA,eAHD,MAKA;CACCW,gBAAAA,MAAM,CAACY,GAAP,CAAW,sCAAX;CACAM,gBAAAA,KAAK,CAACgL,KAAN;CACAhL,gBAAAA,KAAK,CAACN,GAAN,CAAU,sCAAV;CAEA,uBAAO,KAAP;CACA;CACD,aAbY,CAAb;CAeA,mBAAOhC,KAAP;CACA,WAlCD;CAoCA,kHAAgBL,KAAhB;CACA,SA5YK;CA8YNoM,QAAAA,cAAc,EAAE,wBAACpM,KAAD,EAChB;CACCA,UAAAA,KAAK,CAACC,MAAN,CAAaO,GAAb,CAAiB,UAAAP,MAAM,EAAI;CAC1B,gBAAI,CAACA,MAAM,CAACsN,cAAP,CAAsB,UAAtB,CAAL,EACA;CACCtN,cAAAA,MAAM,CAACmG,QAAP,GAAkB,EAAlB;;CAEA,kBAAInG,MAAM,CAAC4G,OAAX,EACA;CACC5G,gBAAAA,MAAM,CAACmG,QAAP,CAAgBmG,IAAhB,CAAqB;CACpBhM,kBAAAA,OAAO,EAAEP,KAAK,CAACkG,WAAN,CAAkB3F,OADP;CAEpBqC,kBAAAA,IAAI,EAAE3C,MAAM,CAAC4G;CAFO,iBAArB;CAIA;CACD;;CAED,mBAAO5G,MAAM,CAAC4G,OAAd;CAEA,mBAAO5G,MAAP;CACA,WAjBD;;CAmBA,cAAI,CAACD,KAAK,CAACkG,WAAN,CAAkBqH,cAAlB,CAAiC,UAAjC,CAAL,EACA;CACCvN,YAAAA,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,GAA6B,EAA7B;;CAEA,gBAAIpG,KAAK,CAACkG,WAAN,CAAkBW,OAAtB,EACA;CACC7G,cAAAA,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,CAA2BmG,IAA3B,CAAgC;CAC/BhM,gBAAAA,OAAO,EAAEP,KAAK,CAACkG,WAAN,CAAkB3F,OADI;CAE/BqC,gBAAAA,IAAI,EAAE5C,KAAK,CAACkG,WAAN,CAAkBW;CAFO,eAAhC;CAIA;;CAED,mBAAO7G,KAAK,CAACkG,WAAN,CAAkBW,OAAzB;CACA;;CAED,kHAAgB7G,KAAhB;CACA;CAnbK,OAAP;CAqbA;CAn4BF;CAAA;CAAA,iCAs4BC;CACC,aAAO;CACN4N,QAAAA,kBADM,8BACa5N,KADb,EAEN;CACC,cAAI6N,eAAe,GAAG7N,KAAK,CAACC,MAAN,CAAaG,MAAb,CAAoB,UAAAH,MAAM,EAAI;CACnD,gBAAI,CAACD,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwB5M,MAAM,CAACK,WAA/B,CAAL,EACA;CACC,qBAAOL,MAAP;CACA;CACD,WALqB,CAAtB;CAOA4N,UAAAA,eAAe,GAAGA,eAAe,CAC/BrN,GADgB,CACZ,UAAAP,MAAM,EAAI;CACd,gBAAM4G,OAAO,GAAG5G,MAAM,CAACmG,QAAP,CAAgBgD,IAAhB,CAAqB,UAAAvC,OAAO;CAAA,qBAAIA,OAAO,CAACtG,OAAR,KAAoBP,KAAK,CAACkG,WAAN,CAAkB3F,OAA1C;CAAA,aAA5B,CAAhB;CAEA,gBAAMuN,aAAa,iCACf7N,MADe;CAElBW,cAAAA,IAAI,EAAEb,IAAI,CAAC+M,wBAAL,CAA8B9M,KAA9B,EAAqCC,MAArC,EAA6CD,KAAK,CAACkG,WAAN,CAAkB3F,OAA/D,CAFY;CAGlBsG,cAAAA,OAAO,EAAEA,OAAO,GAAGA,OAAO,CAACjE,IAAX,GAAkB;CAHhB,cAAnB;;CAMA,gBAAIkL,aAAa,CAAChJ,IAAd,KAAuB0B,wBAAU,CAACC,OAAtC,EACA;CACCqH,cAAAA,aAAa,CAACC,IAAd,GAAqBC,yBAAW,CAACvH,OAAZ,CAAoBsH,IAAzC;CACA;;CAED,mBAAOD,aAAP;CACA,WAhBgB,EAiBhB1N,MAjBgB,CAiBT,UAAAH,MAAM;CAAA,mBAAIA,MAAM,CAACW,IAAP,GAAc,CAAlB;CAAA,WAjBG,CAAlB;CAmBA,cAAIqN,aAAa,GAAGlO,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaK,SAA1B,CAApB;CACA,cAAMwI,MAAM,GAAGL,eAAe,CAC5Bd,IADa,CACR,UAACC,aAAD,EAAgBC,UAAhB;CAAA,mBAA+BD,aAAa,CAACpM,IAAd,GAAqBqM,UAAU,CAACrM,IAA/D;CAAA,WADQ,EAEbR,MAFa,CAEN,UAAAH,MAAM,EAAI;CACjB,gBACCD,KAAK,CAACsG,eAAN,CAAsBuG,QAAtB,CAA+B5M,MAAM,CAACK,WAAtC,KACGL,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAF/B,EAIA;CACC,qBAAO,KAAP;CACA;;CAED,gBAAImF,aAAa,GAAGhO,MAAM,CAACW,IAAvB,IAA+B,CAAnC,EACA;CACCqN,cAAAA,aAAa,IAAIhO,MAAM,CAACW,IAAxB;CAEA,qBAAO,IAAP;CACA,aALD,MAOA;CACC,qBAAO,KAAP;CACA;CACD,WArBa,CAAf;CAuBA,cAAI+L,oBAAoB,GAAG5M,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaO,gBAA1B,CAA3B;CAEA,cAAMuI,YAAY,GAAGN,eAAe,CAClCd,IADmB,CACd,UAACC,aAAD,EAAgBC,UAAhB;CAAA,mBAA+BD,aAAa,CAACpM,IAAd,GAAqBqM,UAAU,CAACrM,IAA/D;CAAA,WADc,EAEnBR,MAFmB,CAEZ,UAAAH,MAAM,EAAI;CACjB,gBACCD,KAAK,CAACsG,eAAN,CAAsBuG,QAAtB,CAA+B5M,MAAM,CAACK,WAAtC,KACGL,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAF/B,EAIA;CACC,qBAAO,KAAP;CACA;;CAED,gBAAI1D,YAAY,CAAC6C,SAAb,CAAuBkF,kBAAvB,CAA0CnN,KAA1C,EAAiDC,MAAjD,EAAyDmN,IAAzD,OAAoE,EAAxE,EACA;CACC,kBAAIT,oBAAoB,GAAG1M,MAAM,CAACW,IAA9B,IAAsC,CAA1C,EACA;CACC+L,gBAAAA,oBAAoB,IAAI1M,MAAM,CAACW,IAA/B;CAEA,uBAAO,IAAP;CACA;;CAED,qBAAO,KAAP;CACA;CACD,WAtBmB,CAArB;CAwBA,cAAMwN,UAAU,GAAGF,MAAM,CAAC1N,GAAP,CAAW,UAAAP,MAAM;CAAA,mBAAIA,MAAM,CAACK,WAAX;CAAA,WAAjB,CAAnB;CACA,cAAM+N,iBAAiB,GAAGF,YAAY,CAAC3N,GAAb,CAAiB,UAAAP,MAAM;CAAA,mBAAIA,MAAM,CAACK,WAAX;CAAA,WAAvB,CAA1B;CACA,cAAMgO,YAAY,GAAGF,UAAU,CAACG,MAAX,CAAkBF,iBAAlB,CAArB;CAEAR,UAAAA,eAAe,GAAGA,eAAe,CAC/BzN,MADgB,CACT,UAAAH,MAAM;CAAA,mBAAI,CAACqO,YAAY,CAACzB,QAAb,CAAsB5M,MAAM,CAACK,WAA7B,CAAL;CAAA,WADG,EAEhByM,IAFgB,CAEX,UAACC,aAAD,EAAgBC,UAAhB;CAAA,mBAA+BA,UAAU,CAACrM,IAAX,GAAkBoM,aAAa,CAACpM,IAA/D;CAAA,WAFW,CAAlB;;CAIA,cAAI0D,cAAI,CAACkD,aAAL,CAAmB0G,MAAnB,CAAJ,EACA;CACCL,YAAAA,eAAe,CAACtB,IAAhB,CAAqB;CACpBzH,cAAAA,IAAI,EAAE0B,wBAAU,CAACgI,KADG;CAEpBrK,cAAAA,KAAK,EAAE6J,yBAAW,CAACS,KAAZ,CAAkBtK,KAFL;CAGpBvD,cAAAA,IAAI,EAAEb,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaK,SAA1B,IAAuCuI,aAHzB;CAIpBS,cAAAA,WAAW,EAAE3O,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaK,SAA1B,CAJO;CAKpBqI,cAAAA,IAAI,EAAEC,yBAAW,CAACS,KAAZ,CAAkBV,IALJ;CAMpBzN,cAAAA,WAAW,EAAE0N,yBAAW,CAACS,KAAZ,CAAkBE;CANX,aAArB;CAQA;;CAED,cAAIrK,cAAI,CAACkD,aAAL,CAAmB2G,YAAnB,CAAJ,EACA;CACCN,YAAAA,eAAe,CAACtB,IAAhB,CAAqB;CACpBzH,cAAAA,IAAI,EAAE0B,wBAAU,CAACgI,KADG;CAEpBrK,cAAAA,KAAK,EAAE6J,yBAAW,CAAClF,OAAZ,CAAoB3E,KAFP;CAGpBvD,cAAAA,IAAI,EAAEuN,YAAY,CAACzN,MAAb,CAAoB,UAACC,GAAD,EAAMV,MAAN;CAAA,uBAAiBU,GAAG,GAAGV,MAAM,CAACW,IAA9B;CAAA,eAApB,EAAwD,CAAxD,CAHc;CAIpB8N,cAAAA,WAAW,EAAE3O,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaO,gBAA1B,CAJO;CAKpBmI,cAAAA,IAAI,EAAEC,yBAAW,CAAClF,OAAZ,CAAoBiF,IALN;CAMpBzN,cAAAA,WAAW,EAAE0N,yBAAW,CAAClF,OAAZ,CAAoB6F;CANb,aAArB;CAQA;;CAED,iBAAOd,eAAP;CACA,SAhHK;CAiHNe,QAAAA,mBAjHM,+BAiHc5O,KAjHd,EAkHN;CACC,cAAI6O,gBAAgB,GAAG7O,KAAK,CAACC,MAAN,CAAaG,MAAb,CAAoB,UAAAH,MAAM,EAAI;CACpD,gBAAID,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwB5M,MAAM,CAACK,WAA/B,CAAJ,EACA;CACC,qBAAOL,MAAP;CACA;CACD,WALsB,CAAvB;CAOA,iBAAO4O,gBAAgB,CACrBrO,GADK,CACD,UAAAP,MAAM,EAAI;CACd,gBAAM4G,OAAO,GAAG5G,MAAM,CAACmG,QAAP,CAAgBgD,IAAhB,CAAqB,UAAAvC,OAAO;CAAA,qBAAIA,OAAO,CAACtG,OAAR,KAAoBP,KAAK,CAACkG,WAAN,CAAkB3F,OAA1C;CAAA,aAA5B,CAAhB;CAEA,iDACIN,MADJ;CAECW,cAAAA,IAAI,EAAEb,IAAI,CAAC+M,wBAAL,CAA8B9M,KAA9B,EAAqCC,MAArC,EAA6CD,KAAK,CAACkG,WAAN,CAAkB3F,OAA/D,CAFP;CAGCsG,cAAAA,OAAO,EAAEA,OAAO,GAAGA,OAAO,CAACjE,IAAX,GAAkB;CAHnC;CAKA,WATK,EAULxC,MAVK,CAUE,UAAAH,MAAM;CAAA,mBAAIA,MAAM,CAACW,IAAP,GAAc,CAAlB;CAAA,WAVR,EAWLmM,IAXK,CAWA,UAAC+B,CAAD,EAAIC,CAAJ;CAAA,mBAAUA,CAAC,CAACnO,IAAF,GAASkO,CAAC,CAAClO,IAArB;CAAA,WAXA,CAAP;CAYA,SAtIK;CAuINoO,QAAAA,0BAA0B,EAAE,oCAAAhP,KAAK;CAAA,iBAAI,UAAAM,WAAW,EAAI;CACnD,gBAAMH,OAAO,GAAG2C,EAAE,CAACmM,IAAH,CAAQC,WAAR,CAAoBlP,KAAK,CAACG,OAA1B,CAAhB;CAEA,gBAAIgP,OAAO,GAAGhP,OAAO,CAACC,MAAR,CAAe,UAAAC,KAAK;CAAA,qBACjCA,KAAK,CAACC,WAAN,KAAsBA,WAAtB,IACGD,KAAK,CAACE,OAAN,KAAkBP,KAAK,CAACkG,WAAN,CAAkB3F,OAFN;CAAA,aAApB,CAAd;CAKA4O,YAAAA,OAAO,CAAC3O,GAAR,CAAY,UAAAH,KAAK,EAAI;CACpBA,cAAAA,KAAK,CAACO,IAAN,GAAab,IAAI,CAACU,gBAAL,CAAsBJ,KAAtB,CAAb;CACA,aAFD;CAIA,mBAAO8O,OAAP;CACA,WAbgC;CAAA,SAvI3B;CAqJNC,QAAAA,YArJM,wBAqJOpP,KArJP,EAsJN;CACC,cAAIqP,QAAQ,GAAG,EAAf;CAEA,cAAMC,UAAU,GAAG,IAAI1P,IAAJ,CAASI,KAAK,CAACkG,WAAN,CAAkB3F,OAA3B,CAAnB;CACA,cAAMgP,UAAU,GAAG,CAAC;CACnBxO,YAAAA,KAAK,EAAE,IAAInB,IAAJ,CACN0P,UAAU,CAACE,WAAX,EADM,EAENF,UAAU,CAACG,QAAX,EAFM,EAGNH,UAAU,CAACvH,OAAX,EAHM,EAIN,CAJM,EAKN,CALM,CADY;CAQnBjH,YAAAA,MAAM,EAAE,IAAIlB,IAAJ,CACP0P,UAAU,CAACE,WAAX,EADO,EAEPF,UAAU,CAACG,QAAX,EAFO,EAGPH,UAAU,CAACvH,OAAX,EAHO,EAIP,EAJO,EAKP,EALO,CARW;CAenBjD,YAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAfR;CAgBnBgB,YAAAA,SAAS,EAAE,IAhBQ;CAiBnBC,YAAAA,aAAa,EAAE5M,aAAG,CAACC,UAAJ,CAAe,4CAAf,CAjBI;CAkBnB4M,YAAAA,WAAW,EAAE;CAlBM,WAAD,CAAnB;;CAqBA,cAAI,CAACvL,cAAI,CAACkD,aAAL,CAAmBxH,KAAK,CAACG,OAAzB,CAAL,EACA;CACC,mBAAOoP,UAAP;CACA;;CAED,cAAIpP,OAAO,GAAGH,KAAK,CAACG,OAAN,CAAcC,MAAd,CAAqB,UAAAC,KAAK;CAAA,mBAAIA,KAAK,CAACE,OAAN,KAAkBP,KAAK,CAACkG,WAAN,CAAkB3F,OAAxC;CAAA,WAA1B,CAAd;CACA,cAAMuP,MAAM,GAAG,KAAf,CA/BD;;CAkCC3P,UAAAA,OAAO,CAAC+M,OAAR,CAAgB,UAAA7M,KAAK,EAAI;CACxB,gBAAIyE,IAAJ;;CACA,gBAAI9E,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwBxM,KAAK,CAACC,WAA9B,CAAJ,EACA;CACCwE,cAAAA,IAAI,GAAGkJ,yBAAW,CAAC3H,QAAZ,CAAqBsI,KAA5B;CACA,aAHD,MAIK,IAAItO,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACuC,MAA9B,EACL;CACCjE,cAAAA,IAAI,GAAGkJ,yBAAW,CAAC+B,aAAZ,CAA0BpB,KAAjC;CACA,aAHI,MAIA,IAAItO,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACsC,OAA9B,EACL;CACC,kBAAM7I,MAAM,GAAGD,KAAK,CAACC,MAAN,CAAamJ,IAAb,CAAkB,UAAAnJ,MAAM;CAAA,uBAAIA,MAAM,CAACK,WAAP,KAAuBD,KAAK,CAACC,WAAjC;CAAA,eAAxB,CAAf;CACA,kBAAMuG,OAAO,GAAGzB,YAAY,CAAC6C,SAAb,CAAuBkF,kBAAvB,CAA0CnN,KAA1C,EAAiDC,MAAjD,CAAhB;CAEA6E,cAAAA,IAAI,GAAG+B,OAAO,GAAGmH,yBAAW,CAAC+B,aAAZ,CAA0BpB,KAA7B,GAAqCX,yBAAW,CAACgC,OAAZ,CAAoBrB,KAAvE;CACA,aANI,MAQL;CACC7J,cAAAA,IAAI,GAAGkJ,yBAAW,CAACgC,OAAZ,CAAoBrB,KAA3B;CACA;;CAEDtO,YAAAA,KAAK,CAACO,IAAN,CAAWsM,OAAX,CAAmB,UAAArM,QAAQ,EAAI;CAC9B,kBAAME,KAAK,GAAG,IAAInB,IAAJ,CAASiB,QAAQ,CAACE,KAAlB,CAAd;CACA,kBAAMD,MAAM,GAAGD,QAAQ,CAACC,MAAT,GAAkB,IAAIlB,IAAJ,CAASiB,QAAQ,CAACC,MAAlB,CAAlB,GAA8C,IAAIlB,IAAJ,EAA7D;CAEAyP,cAAAA,QAAQ,CAAC9C,IAAT,CAAc;CAAEzH,gBAAAA,IAAI,EAAJA,IAAF;CAAQ/D,gBAAAA,KAAK,EAALA,KAAR;CAAeD,gBAAAA,MAAM,EAANA;CAAf,eAAd;CACA,aALD;CAMA,WA5BD;;CA8BA,cAAI,CAACwD,cAAI,CAACkD,aAAL,CAAmB6H,QAAnB,CAAL,EACA;CACC,mBAAOE,UAAP;CACA;;CAEDF,UAAAA,QAAQ,GAAGA,QAAQ,CACjBtC,IADS,CACJ,UAACkD,cAAD,EAAiBC,WAAjB;CAAA,mBAAiCD,cAAc,CAAClP,KAAf,GAAuBmP,WAAW,CAACnP,KAApE;CAAA,WADI,CAAX,CArED;CA2EC;;CACA,cAAIoP,gBAAgB,GAAGd,QAAQ,CAAC,CAAD,CAAR,CAAYtO,KAAnC;;CACA,cAAIoP,gBAAgB,CAAC9O,QAAjB,KAA8B8O,gBAAgB,CAAC5O,UAAjB,EAA9B,GAA8D,CAAlE,EACA;CACC8N,YAAAA,QAAQ,CAACe,OAAT,CAAiB;CAChBrP,cAAAA,KAAK,EAAE,IAAInB,IAAJ,CACNuQ,gBAAgB,CAACX,WAAjB,EADM,EAENW,gBAAgB,CAACV,QAAjB,EAFM,EAGNU,gBAAgB,CAACpI,OAAjB,EAHM,EAIN,CAJM,EAKN,CALM,CADS;CAQhBjH,cAAAA,MAAM,EAAEqP,gBARQ;CAShBrL,cAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf;CATX,aAAjB;CAWA,WA1FF;;;CA6FCU,UAAAA,QAAQ,CACNnC,OADF,CACU,UAACrM,QAAD,EAAWwP,KAAX,EAAqB;CAC7B,gBACCA,KAAK,GAAG,CAAR,IACGxP,QAAQ,CAACE,KAAT,GAAiBsO,QAAQ,CAACgB,KAAK,GAAG,CAAT,CAAR,CAAoBvP,MAArC,IAA+CgP,MAAM,GAAG,CAF5D,EAIA;CACC,kBAAM/O,KAAK,GAAGsO,QAAQ,CAACgB,KAAK,GAAG,CAAT,CAAR,CAAoBvP,MAAlC;CACA,kBAAMA,MAAM,GAAGD,QAAQ,CAACE,KAAxB;CAEAA,cAAAA,KAAK,CAACuP,UAAN,CAAiBvP,KAAK,CAACQ,UAAN,KAAqB,CAAtC;CACAT,cAAAA,MAAM,CAACwP,UAAP,CAAkBxP,MAAM,CAACS,UAAP,KAAsB,CAAxC;CAEA8N,cAAAA,QAAQ,CAAC9C,IAAT,CAAc;CACbxL,gBAAAA,KAAK,EAALA,KADa;CAEbD,gBAAAA,MAAM,EAANA,MAFa;CAGbgE,gBAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf;CAHd,eAAd;CAKA;CACD,WAnBF;CAsBAU,UAAAA,QAAQ,GAAGA,QAAQ,CACjBtC,IADS,CACJ,UAACkD,cAAD,EAAiBC,WAAjB;CAAA,mBAAiCD,cAAc,CAAClP,KAAf,GAAuBmP,WAAW,CAACnP,KAApE;CAAA,WADI,CAAX,CAnHD;;CAwHC,cAAIwP,aAAa,GAAGlB,QAAQ,CAACA,QAAQ,CAAChM,MAAT,GAAkB,CAAnB,CAAR,CAA8BvC,MAAlD;;CACA,cAAIyP,aAAa,CAAClP,QAAd,KAA2BkP,aAAa,CAAChP,UAAd,EAA3B,GAAwD,EAA5D,EACA;CACCgP,YAAAA,aAAa,CAACD,UAAd,CAAyBC,aAAa,CAAChP,UAAd,KAA6B,CAAtD;CAEA8N,YAAAA,QAAQ,CAAC9C,IAAT,CAAc;CACbxL,cAAAA,KAAK,EAAEwP,aADM;CAEbzP,cAAAA,MAAM,EAAE,IAAIlB,IAAJ,CACP2Q,aAAa,CAACf,WAAd,EADO,EAEPe,aAAa,CAACd,QAAd,EAFO,EAGPc,aAAa,CAACxI,OAAd,EAHO,EAIP,EAJO,EAKP,EALO,CAFK;CASbjD,cAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf;CATd,aAAd;CAWA,WAxIF;;;CA2ICU,UAAAA,QAAQ,GAAGA,QAAQ,CAACjP,MAAT,CAAgB,UAAAS,QAAQ;CAAA,mBAAIA,QAAQ,CAACC,MAAT,GAAkBD,QAAQ,CAACE,KAA3B,IAAoC+O,MAAxC;CAAA,WAAxB,CAAX;CAEA,cAAIU,SAAS,GAAG,EAAhB;CACA,cAAIC,eAAe,GAAG,IAAtB,CA9ID;;CAiJCpB,UAAAA,QAAQ,CACNnC,OADF,CACU,UAACwD,OAAD,EAAUL,KAAV,EAAoB;CAC5B,gBAAIA,KAAK,GAAG,CAAR,IAAaK,OAAO,CAAC5L,IAAR,KAAiBkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAAvD,EACA;CACC6B,cAAAA,SAAS,CAACA,SAAS,CAACnN,MAAV,GAAmB,CAApB,CAAT,CAAgCvC,MAAhC,GAAyC4P,OAAO,CAAC3P,KAAjD;CACA;;CAED,gBAAI2P,OAAO,CAAC5L,IAAR,KAAiB2L,eAArB,EACA;CACCA,cAAAA,eAAe,GAAGC,OAAO,CAAC5L,IAA1B;CAEA0L,cAAAA,SAAS,CAACjE,IAAV,CAAe;CACdxL,gBAAAA,KAAK,EAAE2P,OAAO,CAAC3P,KADD;CAEdD,gBAAAA,MAAM,EAAE4P,OAAO,CAAC5P,MAFF;CAGdgE,gBAAAA,IAAI,EAAE4L,OAAO,CAAC5L,IAHA;CAId6K,gBAAAA,SAAS,EACRe,OAAO,CAAC5L,IAAR,KAAiBkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAAtC,IACG+B,OAAO,CAAC3P,KAAR,GAAgB,IAAInB,IAAJ,EANN;CAQdgQ,gBAAAA,aAAa,EAAEc,OAAO,CAAC5L,IAAR,KAAiBkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAAtC,GACZ3L,aAAG,CAACC,UAAJ,CAAe,4CAAf,CADY,GAEZ;CAVW,eAAf;CAYA,aAhBD,MAiBK,IAAIyN,OAAO,CAAC5L,IAAR,KAAiBkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAA1C,EACL;CACC6B,cAAAA,SAAS,CAACA,SAAS,CAACnN,MAAV,GAAmB,CAApB,CAAT,CAAgCvC,MAAhC,GAAyC4P,OAAO,CAAC5P,MAAjD;CACA;CACD,WA5BF;CA+BA,iBAAO0P,SAAP;CACA,SAvUK;CAwUNG,QAAAA,gBAAgB,EAAE,0BAAA3Q,KAAK;CAAA,iBAAI,UAAA4Q,mBAAmB,EAAI;CACjD,gBAAIC,aAAa,GAAG,EAApB;CAEA,gBAAIhD,eAAe,GAAG,EAAtB;;CACA,gBACC+C,mBAAmB,KAAK5C,yBAAW,CAACS,KAAZ,CAAkBE,KAA1C,IACGiC,mBAAmB,KAAK5C,yBAAW,CAAClF,OAAZ,CAAoB6F,KAFhD,EAIA;CACCd,cAAAA,eAAe,GAAG7N,KAAK,CAACC,MAAN,CAChBG,MADgB,CACT,UAAAH,MAAM,EAAI;CACjB,oBAAI,CAACD,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwB5M,MAAM,CAACK,WAA/B,CAAL,EACA;CACC,yBAAOL,MAAP;CACA;CACD,eANgB,EAOhBO,GAPgB,CAOZ,UAAAP,MAAM,EAAI;CACd,oBAAM6N,aAAa,iCACf7N,MADe;CAElBW,kBAAAA,IAAI,EAAEb,IAAI,CAAC+M,wBAAL,CAA8B9M,KAA9B,EAAqCC,MAArC,EAA6CD,KAAK,CAACkG,WAAN,CAAkB3F,OAA/D;CAFY,kBAAnB;;CAKA,oBAAIuN,aAAa,CAAChJ,IAAd,KAAuB0B,wBAAU,CAACC,OAAtC,EACA;CACCqH,kBAAAA,aAAa,CAACC,IAAd,GAAqBC,yBAAW,CAACvH,OAAZ,CAAoBsH,IAAzC;CACA;;CAED,uBAAOD,aAAP;CACA,eAnBgB,EAoBhB1N,MApBgB,CAoBT,UAAAH,MAAM;CAAA,uBAAIA,MAAM,CAACW,IAAP,GAAc,CAAlB;CAAA,eApBG,CAAlB;CAqBA;;CAED,gBAAIgQ,mBAAmB,KAAK5C,yBAAW,CAACS,KAAZ,CAAkBE,KAA9C,EACA;CACC,kBAAIV,aAAa,GAAGlO,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaK,SAA1B,CAApB;CACA,kBAAMwI,MAAM,GAAGL,eAAe,CAC5Bd,IADa,CACR,UAACC,aAAD,EAAgBC,UAAhB;CAAA,uBAA+BD,aAAa,CAACpM,IAAd,GAAqBqM,UAAU,CAACrM,IAA/D;CAAA,eADQ,EAEbR,MAFa,CAEN,UAAAH,MAAM,EAAI;CACjB,oBACCD,KAAK,CAACsG,eAAN,CAAsBuG,QAAtB,CAA+B5M,MAAM,CAACK,WAAtC,KACGL,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAF/B,EAIA;CACC,yBAAO,KAAP;CACA;;CAED,oBAAImF,aAAa,GAAGhO,MAAM,CAACW,IAAvB,IAA+B,CAAnC,EACA;CACCqN,kBAAAA,aAAa,IAAIhO,MAAM,CAACW,IAAxB;CAEA,yBAAO,IAAP;CACA,iBALD,MAOA;CACC,yBAAO,KAAP;CACA;CACD,eArBa,CAAf;CAuBAsN,cAAAA,MAAM,CAAChB,OAAP,CAAe,UAAAjN,MAAM;CAAA,uBAAI4Q,aAAa,CAACtE,IAAd,CAAmBtM,MAAM,CAACK,WAA1B,CAAJ;CAAA,eAArB;CACA,aA3BD,MA4BK,IAAIsQ,mBAAmB,KAAK5C,yBAAW,CAAClF,OAAZ,CAAoB6F,KAAhD,EACL;CACC,kBAAIhC,oBAAoB,GAAG5M,IAAI,CAAC6M,OAAL,CAAa5M,KAAK,CAACqF,MAAN,CAAaO,gBAA1B,CAA3B;CAEA,kBAAMuI,YAAY,GAAGN,eAAe,CAClCd,IADmB,CACd,UAACC,aAAD,EAAgBC,UAAhB;CAAA,uBAA+BD,aAAa,CAACpM,IAAd,GAAqBqM,UAAU,CAACrM,IAA/D;CAAA,eADc,EAEnBR,MAFmB,CAEZ,UAAAH,MAAM,EAAI;CACjB,oBACCD,KAAK,CAACsG,eAAN,CAAsBuG,QAAtB,CAA+B5M,MAAM,CAACK,WAAtC,KACGL,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACsC,OAF/B,EAIA;CACC,yBAAO,KAAP;CACA;;CAED,oBAAI1D,YAAY,CAAC6C,SAAb,CAAuBkF,kBAAvB,CAA0CnN,KAA1C,EAAiDC,MAAjD,EAAyDmN,IAAzD,OAAoE,EAAxE,EACA;CACC,sBAAIT,oBAAoB,GAAG1M,MAAM,CAACW,IAA9B,IAAsC,CAA1C,EACA;CACC+L,oBAAAA,oBAAoB,IAAI1M,MAAM,CAACW,IAA/B;CAEA,2BAAO,IAAP;CACA;;CAED,yBAAO,KAAP;CACA;CACD,eAtBmB,CAArB;CAwBAuN,cAAAA,YAAY,CAACjB,OAAb,CAAqB,UAAAjN,MAAM;CAAA,uBAAI4Q,aAAa,CAACtE,IAAd,CAAmBtM,MAAM,CAACK,WAA1B,CAAJ;CAAA,eAA3B;CACA,aA7BI,MA+BL;CACCuQ,cAAAA,aAAa,GAAG,CAACD,mBAAD,CAAhB;CACA;;CAED,gBAAIvB,QAAQ,GAAG,EAAf;CAEA,gBAAIlP,OAAO,GAAG2C,EAAE,CAACmM,IAAH,CAAQC,WAAR,CAAoBlP,KAAK,CAACG,OAA1B,EAAmCC,MAAnC,CAA0C,UAAAC,KAAK;CAAA,qBAAIA,KAAK,CAACE,OAAN,KAAkBP,KAAK,CAACkG,WAAN,CAAkB3F,OAAxC;CAAA,aAA/C,CAAd;CACA,gBAAMuP,MAAM,GAAG,KAAf,CAlGiD;;CAqGjD3P,YAAAA,OAAO,CAAC+M,OAAR,CAAgB,UAAA7M,KAAK,EAAI;CACxB,kBAAMyE,IAAI,GAAG9E,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwBxM,KAAK,CAACC,WAA9B,IACV0N,yBAAW,CAAC3H,QAAZ,CAAqBsI,KADX,GAEVX,yBAAW,CAACgC,OAAZ,CAAoBrB,KAFvB;CAKAtO,cAAAA,KAAK,CAACyQ,OAAN,GAAiBD,aAAa,CAAChE,QAAd,CAAuBxM,KAAK,CAACC,WAA7B,IAA4C,UAA5C,GAAyD,aAA1E;CAEAD,cAAAA,KAAK,CAACO,IAAN,CAAWsM,OAAX,CAAmB,UAAArM,QAAQ,EAAI;CAC9B,oBAAME,KAAK,GAAG,IAAInB,IAAJ,CAASiB,QAAQ,CAACE,KAAlB,CAAd;CACA,oBAAMD,MAAM,GAAGD,QAAQ,CAACC,MAAT,GAAkB,IAAIlB,IAAJ,CAASiB,QAAQ,CAACC,MAAlB,CAAlB,GAA8C,IAAIlB,IAAJ,EAA7D;CAEAyP,gBAAAA,QAAQ,CAAC9C,IAAT,CAAc;CAAEzH,kBAAAA,IAAI,EAAJA,IAAF;CAAQ/D,kBAAAA,KAAK,EAALA,KAAR;CAAeD,kBAAAA,MAAM,EAANA,MAAf;CAAuBgQ,kBAAAA,OAAO,EAAEzQ,KAAK,CAACyQ;CAAtC,iBAAd;CACA,eALD;CAMA,aAdD;CAgBAzB,YAAAA,QAAQ,GAAGA,QAAQ,CACjBtC,IADS,CACJ,UAACkD,cAAD,EAAiBC,WAAjB;CAAA,qBAAiCD,cAAc,CAAClP,KAAf,GAAuBmP,WAAW,CAACnP,KAApE;CAAA,aADI,CAAX,CArHiD;;CA0HjD,gBAAIoP,gBAAgB,GAAGd,QAAQ,CAAC,CAAD,CAAR,CAAYtO,KAAnC;;CACA,gBAAIoP,gBAAgB,CAAC9O,QAAjB,KAA8B8O,gBAAgB,CAAC5O,UAAjB,EAA9B,GAA8D,CAAlE,EACA;CACC8N,cAAAA,QAAQ,CAACe,OAAT,CAAiB;CAChBrP,gBAAAA,KAAK,EAAE,IAAInB,IAAJ,CACNuQ,gBAAgB,CAACX,WAAjB,EADM,EAENW,gBAAgB,CAACV,QAAjB,EAFM,EAGNU,gBAAgB,CAACpI,OAAjB,EAHM,EAIN,CAJM,EAKN,CALM,CADS;CAQhBjH,gBAAAA,MAAM,EAAEqP,gBARQ;CAShBrL,gBAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KATX;CAUhBmC,gBAAAA,OAAO,EAAE;CAVO,eAAjB;CAYA,aAzIgD;;;CA4IjDzB,YAAAA,QAAQ,CACNnC,OADF,CACU,UAACrM,QAAD,EAAWwP,KAAX,EAAqB;CAC7B,kBACCA,KAAK,GAAG,CAAR,IACGxP,QAAQ,CAACE,KAAT,GAAiBsO,QAAQ,CAACgB,KAAK,GAAG,CAAT,CAAR,CAAoBvP,MAArC,IAA+CgP,MAAM,GAAG,CAF5D,EAIA;CACC,oBAAM/O,KAAK,GAAGsO,QAAQ,CAACgB,KAAK,GAAG,CAAT,CAAR,CAAoBvP,MAAlC;CACA,oBAAMA,MAAM,GAAGD,QAAQ,CAACE,KAAxB;CAEAA,gBAAAA,KAAK,CAACuP,UAAN,CAAiBvP,KAAK,CAACQ,UAAN,KAAqB,CAAtC;CACAT,gBAAAA,MAAM,CAACwP,UAAP,CAAkBxP,MAAM,CAACS,UAAP,KAAsB,CAAxC;CAEA8N,gBAAAA,QAAQ,CAAC9C,IAAT,CAAc;CACbxL,kBAAAA,KAAK,EAALA,KADa;CAEbD,kBAAAA,MAAM,EAANA,MAFa;CAGbgE,kBAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KAHd;CAIbmC,kBAAAA,OAAO,EAAE;CAJI,iBAAd;CAMA;CACD,aApBF;CAuBAzB,YAAAA,QAAQ,GAAGA,QAAQ,CACjBtC,IADS,CACJ,UAACkD,cAAD,EAAiBC,WAAjB;CAAA,qBAAiCD,cAAc,CAAClP,KAAf,GAAuBmP,WAAW,CAACnP,KAApE;CAAA,aADI,CAAX,CAnKiD;;CAwKjD,gBAAIwP,aAAa,GAAGlB,QAAQ,CAACA,QAAQ,CAAChM,MAAT,GAAkB,CAAnB,CAAR,CAA8BvC,MAAlD;;CACA,gBAAIyP,aAAa,CAAClP,QAAd,KAA2BkP,aAAa,CAAChP,UAAd,EAA3B,GAAwD,EAA5D,EACA;CACCgP,cAAAA,aAAa,CAACD,UAAd,CAAyBC,aAAa,CAAChP,UAAd,KAA6B,CAAtD;CAEA8N,cAAAA,QAAQ,CAAC9C,IAAT,CAAc;CACbxL,gBAAAA,KAAK,EAAEwP,aADM;CAEbzP,gBAAAA,MAAM,EAAE,IAAIlB,IAAJ,CACP2Q,aAAa,CAACf,WAAd,EADO,EAEPe,aAAa,CAACd,QAAd,EAFO,EAGPc,aAAa,CAACxI,OAAd,EAHO,EAIP,EAJO,EAKP,EALO,CAFK;CASbjD,gBAAAA,IAAI,EAAEkJ,yBAAW,CAAC0B,QAAZ,CAAqBf,KATd;CAUbmC,gBAAAA,OAAO,EAAE;CAVI,eAAd;CAYA;;CAED,mBAAOzB,QAAP;CACA,WA5LsB;CAAA,SAxUjB;CAqgBN5E,QAAAA,aArgBM,yBAqgBQzK,KArgBR,EAsgBN;CACC,cAAI8F,sBAAsB,GAAG9F,KAAK,CAACqF,MAAN,CAAaS,sBAA1C;CAEA,cAAIiL,gBAAgB,GACnBzM,cAAI,CAACkD,aAAL,CAAmBxH,KAAK,CAACG,OAAzB,KACG,IAAIP,IAAJ,CAASI,KAAK,CAACG,OAAN,CAAc,CAAd,EAAiBI,OAA1B,IAAqC,IAAIX,IAAJ,CAASwF,YAAY,CAAC6C,SAAb,CAAuB9B,UAAvB,EAAT,CAFzC;;CAKA,cAAI,CAACL,sBAAL,EACA;CACC,mBAAO,CAACiL,gBAAR;CACA;;CAEDjL,UAAAA,sBAAsB,GAAG,IAAIlG,IAAJ,CAASkG,sBAAT,CAAzB;CACAA,UAAAA,sBAAsB,CAACkL,QAAvB,CAAgC,CAAhC;CACAlL,UAAAA,sBAAsB,CAACwK,UAAvB,CAAkC,CAAlC;CACAxK,UAAAA,sBAAsB,CAACmL,UAAvB,CAAkC,CAAlC;CACAnL,UAAAA,sBAAsB,CAACoL,eAAvB,CAAuC,CAAvC;CAEA,cAAIC,WAAW,GAAG,IAAIvR,IAAJ,EAAlB;CACAuR,UAAAA,WAAW,CAACH,QAAZ,CAAqB,CAArB;CACAG,UAAAA,WAAW,CAACb,UAAZ,CAAuB,CAAvB;CACAa,UAAAA,WAAW,CAACF,UAAZ,CAAuB,CAAvB;CACAE,UAAAA,WAAW,CAACD,eAAZ,CAA4B,CAA5B;CAEA,iBAAOC,WAAW,GAAGrL,sBAAd,IAAwC,QAAxC,IACH,CAACiL,gBADL;CAEA,SAjiBK;CAkiBNpG,QAAAA,sBAliBM,kCAkiBiB3K,KAliBjB,EAmiBN;CACC,cAAI6N,eAAe,GAAG7N,KAAK,CAACC,MAAN,CAAaG,MAAb,CAAoB,UAAAH,MAAM,EAAI;CACnD,gBAAI,CAACD,KAAK,CAACqG,QAAN,CAAewG,QAAf,CAAwB5M,MAAM,CAACK,WAA/B,CAAL,EACA;CACC,qBAAOL,MAAP;CACA;CACD,WALqB,CAAtB;CAOA,iBAAO4N,eAAe,CACpBrN,GADK,CACD,UAAAP,MAAM,EAAI;CACd,iDACIA,MADJ;CAECW,cAAAA,IAAI,EAAEb,IAAI,CAAC+M,wBAAL,CAA8B9M,KAA9B,EAAqCC,MAArC,EAA6CmF,YAAY,CAAC6C,SAAb,CAAuB9B,UAAvB,EAA7C;CAFP;CAIA,WANK,EAOLzF,MAPK,CAOE,UAACC,GAAD,EAAMV,MAAN;CAAA,mBAAiBU,GAAG,GAAGV,MAAM,CAACW,IAA9B;CAAA,WAPF,EAOsC,CAPtC,CAAP;CAQA,SAnjBK;CAojBNwQ,QAAAA,gBApjBM,4BAojBWpR,KApjBX,EAqjBN;CACC,cAAIqL,aAAa,GAAGrL,KAAK,CAACkG,WAAN,CAAkBE,QAAlB,CAClBgD,IADkB,CACb,UAAAvC,OAAO;CAAA,mBAAIA,OAAO,CAACtG,OAAR,KAAoBP,KAAK,CAACkG,WAAN,CAAkB3F,OAA1C;CAAA,WADM,CAApB;CAGA,iBAAO8K,aAAa,GAAGA,aAAa,CAACzI,IAAjB,GAAwB,EAA5C;CACA,SA1jBK;CA2jBNyO,QAAAA,4BA3jBM,wCA2jBuBrR,KA3jBvB,EA4jBN;CACC,cAAIsR,WAAW,GAAG,KAAlB;CAEA,cAAIC,eAAe,GAAGvR,KAAK,CAACC,MAAN,CACpBG,MADoB,CACb,UAAAH,MAAM;CAAA,mBAAIA,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAACkD,GAA3B,IAAkCzJ,MAAM,CAAC6E,IAAP,KAAgB0B,wBAAU,CAAC8C,IAAjE;CAAA,WADO,CAAtB;;CAGA,cAAIhF,cAAI,CAACkD,aAAL,CAAmB+J,eAAnB,KAAuCA,eAAe,CAAClO,MAAhB,GAAyB,CAApE,EACA;CACCiO,YAAAA,WAAW,GAAG,IAAd;CACA;;CAED,iBAAOA,WAAP;CACA;CAxkBK,OAAP;CA0kBA;CAj9CF;CAAA;CAAA,uCAo9CC;CAAA,UADiBjL,QACjB,uEAD4B,EAC5B;CACC,UAAIuC,MAAM,GAAG,EAAb;;CAEA,UAAIvC,QAAQ,KAAK/B,cAAI,CAAC6C,QAAL,CAAcd,QAAd,KAA2B/B,cAAI,CAACuH,QAAL,CAAcxF,QAAd,CAAhC,CAAZ,EACA;CACCuC,QAAAA,MAAM,GAAGvC,QAAQ,CAAChC,QAAT,EAAT;CACA;;CAED,aAAOuE,MAAP;CACA;CA79CF;CAAA;CAAA,qCAg+CC;CAAA,UADe3I,MACf,uEADwB,EACxB;CACC,UAAI2I,MAAM,GAAG,EAAb;;CAEA,UAAItE,cAAI,CAACgJ,QAAL,CAAcrN,MAAd,KAAyBA,MAA7B,EACA;CACC,YAAIqE,cAAI,CAAC6C,QAAL,CAAclH,MAAM,CAAC6E,IAArB,CAAJ,EACA;CACC8D,UAAAA,MAAM,CAAC9D,IAAP,GAAc7E,MAAM,CAAC6E,IAArB;CACA;;CAED,YAAIR,cAAI,CAAC6C,QAAL,CAAclH,MAAM,CAACkE,KAArB,KAA+BG,cAAI,CAACuH,QAAL,CAAc5L,MAAM,CAACkE,KAArB,CAAnC,EACA;CACCyE,UAAAA,MAAM,CAACzE,KAAP,GAAelE,MAAM,CAACkE,KAAP,CAAaE,QAAb,EAAf;CACA;;CAED,YAAIC,cAAI,CAACkD,aAAL,CAAmBvH,MAAM,CAACmG,QAA1B,CAAJ,EACA;CACCwC,UAAAA,MAAM,CAACxC,QAAP,GAAkBnG,MAAM,CAACmG,QAAzB;CACA;CACD;;CAED,aAAOwC,MAAP;CACA;CAt/CF;CAAA;CAAA,sCAy/CC;CAAA,UADgBmB,YAChB,uEAD8B,EAC9B;CACC,UAAInB,MAAM,GAAG,EAAb;;CAEA,UAAItE,cAAI,CAACgJ,QAAL,CAAcvD,YAAd,KAA+BA,YAAnC,EACA;CACC,YACCzF,cAAI,CAAC6C,QAAL,CAAc4C,YAAY,CAACxJ,OAA3B,KACG+D,cAAI,CAAC8C,MAAL,CAAY,IAAIxH,IAAJ,CAASmK,YAAY,CAACxJ,OAAtB,CAAZ,CADH,IAEG,CAAC8G,KAAK,CAAC,IAAIzH,IAAJ,CAASmK,YAAY,CAACxJ,OAAtB,CAAD,CAHV,EAKA;CACCqI,UAAAA,MAAM,CAACrI,OAAP,GAAiBwJ,YAAY,CAACxJ,OAA9B;CACA;;CAED,YAAI+D,cAAI,CAAC6C,QAAL,CAAc4C,YAAY,CAAC5F,KAA3B,KAAqCG,cAAI,CAACuH,QAAL,CAAc9B,YAAY,CAAC5F,KAA3B,CAAzC,EACA;CACCyE,UAAAA,MAAM,CAACzE,KAAP,GAAe4F,YAAY,CAAC5F,KAAb,CAAmBE,QAAnB,EAAf;CACA;;CAED,YAAIC,cAAI,CAAC6C,QAAL,CAAc4C,YAAY,CAACjF,IAA3B,KAAoC0B,wBAAU,CAAC+G,cAAX,CAA0BxD,YAAY,CAACjF,IAAvC,CAAxC,EACA;CACC8D,UAAAA,MAAM,CAAC9D,IAAP,GAAciF,YAAY,CAACjF,IAA3B;;CAEA,cAAIiF,YAAY,CAACjF,IAAb,KAAsB0B,wBAAU,CAAC8C,IAArC,EACA;CACCV,YAAAA,MAAM,CAACuB,OAAP,GAAiBJ,YAAY,CAACI,OAA9B;CACAvB,YAAAA,MAAM,CAAC4I,SAAP,GAAmBzH,YAAY,CAACyH,SAAb,CAAuBnN,QAAvB,EAAnB;CACA;CACD;;CAED,YAAIC,cAAI,CAACkD,aAAL,CAAmBuC,YAAY,CAACnJ,IAAhC,CAAJ,EACA;CACCgI,UAAAA,MAAM,CAAChI,IAAP,GAAcmJ,YAAY,CAACnJ,IAA3B;CACA;CACD;;CAED,aAAOgI,MAAP;CACA;CA9hDF;CAAA;CAAA,wCAiiDC;CAAA,UADkB6I,aAClB,uEADkC,EAClC;CACC,UAAI7I,MAAM,GAAG,EAAb;;CAEA,UAAItE,cAAI,CAACgJ,QAAL,CAAcmE,aAAd,KAAgCA,aAApC,EACA;CACC,YAAInN,cAAI,CAAC6C,QAAL,CAAcsK,aAAa,CAAClR,OAA5B,CAAJ,EACA;CACCqI,UAAAA,MAAM,CAACrI,OAAP,GAAiBkR,aAAa,CAAClR,OAA/B;CACA;;CAED,YAAI+D,cAAI,CAACkD,aAAL,CAAmBiK,aAAa,CAAC3K,cAAjC,CAAJ,EACA;CACC8B,UAAAA,MAAM,CAAC9B,cAAP,GAAwB2K,aAAa,CAAC3K,cAAtC;CACA;;CAED,YAAIxC,cAAI,CAACkD,aAAL,CAAmBiK,aAAa,CAAC1K,YAAjC,CAAJ,EACA;CACC6B,UAAAA,MAAM,CAAC7B,YAAP,GAAsB0K,aAAa,CAAC1K,YAApC;CACA;;CAED,YAAIzC,cAAI,CAAC6C,QAAL,CAAcsK,aAAa,CAACjM,WAA5B,CAAJ,EACA;CACCoD,UAAAA,MAAM,CAACpD,WAAP,GAAqBiM,aAAa,CAACjM,WAAnC;CACA;;CAED,YAAIlB,cAAI,CAAC6C,QAAL,CAAcsK,aAAa,CAAC5K,OAA5B,CAAJ,EACA;CACC+B,UAAAA,MAAM,CAAC/B,OAAP,GAAiB4K,aAAa,CAAC5K,OAA/B;CACA;CACD;;CAED,aAAO+B,MAAP;CACA;CAjkDF;CAAA;CAAA,iDAmkD8B3B,KAnkD9B,EAmkDqC3G,WAnkDrC,EAokDC;CAAA;;CACC,aAAO2G,KAAK,CAACjH,KAAN,CAAYG,OAAZ,CAAoBiJ,IAApB,CAAyB,UAAA/I,KAAK;CAAA,eACpCA,KAAK,CAACC,WAAN,KAAsBA,WAAtB,IACGD,KAAK,CAACE,OAAN,KAAkB,MAAI,CAAC4F,UAAL,EAFe;CAAA,OAA9B,CAAP;CAIA;CAzkDF;CAAA;CAAA,6CA2kD0Bc,KA3kD1B,EA2kDiCkD,OA3kDjC,EA4kDC;CAAA;;CACC,aAAOlD,KAAK,CAACjH,KAAN,CAAYG,OAAZ,CAAoBiJ,IAApB,CAAyB,UAAA/I,KAAK;CAAA,eACpCA,KAAK,CAAC8J,OAAN,KAAkBA,OAAlB,IACG9J,KAAK,CAACE,OAAN,KAAkB,MAAI,CAAC4F,UAAL,EAFe;CAAA,OAA9B,CAAP;CAIA;CAjlDF;CAAA;CAAA,2CAmlDwBc,KAnlDxB,EAmlD+B3G,WAnlD/B,EAolDC;CACC,aAAO2G,KAAK,CAACjH,KAAN,CAAYC,MAAZ,CAAmBmJ,IAAnB,CAAwB,UAAAnJ,MAAM;CAAA,eAAIA,MAAM,CAACK,WAAP,KAAuBA,WAA3B;CAAA,OAA9B,CAAP;CACA;CAtlDF;CAAA;CAAA,qCAwlDkB2G,KAxlDlB,EAwlDyB9C,KAxlDzB,EAylDC;CACC,aAAO8C,KAAK,CAACjH,KAAN,CAAYC,MAAZ,CAAmBmJ,IAAnB,CAAwB,UAAAnJ,MAAM;CAAA,eAAIA,MAAM,CAACkE,KAAP,KAAiBA,KAArB;CAAA,OAA9B,CAAP;CACA;CA3lDF;CAAA;CAAA,uCA6lDoBnE,KA7lDpB,EA6lD2BC,MA7lD3B,EA8lDC;CACC,UAAM4G,OAAO,GAAG5G,MAAM,CAACmG,QAAP,CAAgBgD,IAAhB,CAAqB,UAAAvC,OAAO;CAAA,eAAIA,OAAO,CAACtG,OAAR,KAAoBP,KAAK,CAACkG,WAAN,CAAkB3F,OAA1C;CAAA,OAA5B,CAAhB;CAEA,aAAOsG,OAAO,GAAGA,OAAO,CAACjE,IAAX,GAAkB,EAAhC;CACA;CAlmDF;CAAA;CAAA,iCAqmDC;CACC,aAAO,KAAKsF,aAAL,CAAmB,IAAItI,IAAJ,EAAnB,CAAP;CACA;CAvmDF;CAAA;CAAA,kCAymDeM,IAzmDf,EA0mDC;CACC,UAAMgB,OAAO,GAAG,SAAVA,OAAU,CAAAC,GAAG;CAAA,eAAKA,GAAG,IAAI,CAAP,IAAYA,GAAG,IAAI,CAApB,GAAyB,MAAMA,GAA/B,GAAqCA,GAAzC;CAAA,OAAnB;;CAEA,UAAMuQ,IAAI,GAAGxR,IAAI,CAACsP,WAAL,EAAb;CACA,UAAMmC,KAAK,GAAGzQ,OAAO,CAAChB,IAAI,CAACuP,QAAL,KAAkB,CAAnB,CAArB;CACA,UAAMmC,GAAG,GAAG1Q,OAAO,CAAChB,IAAI,CAAC6H,OAAL,EAAD,CAAnB;CAEA,aAAO2J,IAAI,GAAG,GAAP,GAAaC,KAAb,GAAqB,GAArB,GAA2BC,GAAlC;CACA;CAlnDF;CAAA;CAAA,qCAonDkB3K,KApnDlB,EAqnDC;CACC,UAAI9G,OAAO,GAAG2C,EAAE,CAACmM,IAAH,CAAQC,WAAR,CAAoB,KAAKxE,UAAL,GAAkBkD,kBAAlB,CAAqC3G,KAAK,CAACjH,KAA3C,CAApB,CAAd;CAEAG,MAAAA,OAAO,GAAGA,OAAO,CAACK,GAAR,CAAY,UAAAH,KAAK,EAAI;CAC9B,YACCA,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACgI,KAA1B,IACGnO,KAAK,CAAC8D,KAAN,KAAgB6J,yBAAW,CAACS,KAAZ,CAAkBtK,KAFtC,EAIA;CACC9D,UAAAA,KAAK,CAACyE,IAAN,GAAa0B,wBAAU,CAACiI,KAAxB;CACApO,UAAAA,KAAK,CAACqG,UAAN,GAAmBvH,IAAI,CAACW,YAAL,CAAkB0G,wBAAU,CAACiI,KAA7B,CAAnB;CACApO,UAAAA,KAAK,CAACC,WAAN,GAAoBnB,IAAI,CAACM,aAAL,CAAmB+G,wBAAU,CAACiI,KAA9B,CAApB;CAEA,iBAAOpO,KAAK,CAACwR,KAAb;CACA,SAVD,MAWK,IACJxR,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACgI,KAA1B,IACGnO,KAAK,CAAC8D,KAAN,KAAgB6J,yBAAW,CAAClF,OAAZ,CAAoB3E,KAFnC,EAIL;CACC9D,UAAAA,KAAK,CAACyE,IAAN,GAAa0B,wBAAU,CAACsL,YAAxB;CACAzR,UAAAA,KAAK,CAACqG,UAAN,GAAmBvH,IAAI,CAACW,YAAL,CAAkB0G,wBAAU,CAACsL,YAA7B,CAAnB;CACAzR,UAAAA,KAAK,CAACC,WAAN,GAAoBnB,IAAI,CAACM,aAAL,CAAmB+G,wBAAU,CAACsL,YAA9B,CAApB;CAEA,iBAAOzR,KAAK,CAACwR,KAAb;CACA,SAVI,MAWA,IAAIxR,KAAK,CAACyE,IAAN,KAAe0B,wBAAU,CAACsC,OAA9B,EACL;CACC,cAAIzI,KAAK,CAACsG,KAAN,CAAY4G,cAAZ,CAA2B,WAA3B,CAAJ,EACA;CACClN,YAAAA,KAAK,CAAC4I,SAAN,GAAkB5I,KAAK,CAACsG,KAAN,CAAYsC,SAA9B;CACA;;CAED5I,UAAAA,KAAK,CAAC8D,KAAN,GAAcnB,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAAd;CACA5C,UAAAA,KAAK,CAACqG,UAAN,GAAmBvH,IAAI,CAACW,YAAL,CAAkB0G,wBAAU,CAACsC,OAA7B,CAAnB;CACAzI,UAAAA,KAAK,CAACC,WAAN,GAAoBnB,IAAI,CAACM,aAAL,CAAmB+G,wBAAU,CAACsC,OAA9B,CAApB;CACA;;CAED,eAAOzI,KAAK,CAACsG,KAAb;CACA,eAAOtG,KAAK,CAAC0N,IAAb;CAEA,eAAO1N,KAAP;CACA,OAvCS,CAAV;CAyCAoB,MAAAA,MAAM,CAACY,GAAP,CAAW,kBAAX,EAA+BlC,OAA/B;CACAwC,MAAAA,KAAK,CAACgL,KAAN;CACAhL,MAAAA,KAAK,CAACN,GAAN,CAAU,kBAAV,EAA8BlC,OAA9B;CAEA,UAAIoL,KAAK,GAAG,KAAKb,UAAL,GAAkB0E,YAAlB,CAA+BnI,KAAK,CAACjH,KAArC,EAA4CQ,GAA5C,CAAgD,UAAAK,QAAQ,EAAI;CACvE,eAAO;CACNiE,UAAAA,IAAI,EAAEjE,QAAQ,CAACiE,IADT;CAEN/D,UAAAA,KAAK,EAAEF,QAAQ,CAACE,KAFV;CAGND,UAAAA,MAAM,EAAED,QAAQ,CAACC;CAHX,SAAP;CAKA,OANW,CAAZ;CAQAW,MAAAA,MAAM,CAACY,GAAP,CAAW,oBAAX,EAAiCkJ,KAAjC;CAEA,aAAO;CACNpL,QAAAA,OAAO,EAAPA,OADM;CAENoL,QAAAA,KAAK,EAALA;CAFM,OAAP;CAIA;CAnrDF;CAAA;CAAA,EAAkCwG,4BAAlC;;KCRaC,MAAb;CAEC,oBACA;CAAA,QADY5S,MACZ,uEADqB,EACrB;CAAA;;CACC,YAAQA,MAAM,CAAC0F,IAAf;CAEC,WAAK0B,wBAAU,CAAC8C,IAAhB;CACC,aAAK2I,UAAL,CAAgB7S,MAAhB;CACA;;CAED,WAAKoH,wBAAU,CAACkD,GAAhB;CACC,aAAKwI,SAAL,CAAe9S,MAAf;CACA;;CAED,WAAKoH,wBAAU,CAACsC,OAAhB;CACC,aAAKqJ,aAAL;CACA;;CAED,WAAK3L,wBAAU,CAACC,OAAhB;CACC,aAAK2L,aAAL,CAAmBhT,MAAnB;CACA;;CAED,WAAKoH,wBAAU,CAACwD,SAAhB;CACC,aAAKqI,eAAL;CACA;CApBF;CAsBA;;CA1BF;CAAA;CAAA,+BA4BYjT,MA5BZ,EA6BC;CACC,WAAK0F,IAAL,GAAY0B,wBAAU,CAAC8C,IAAvB;CAEA,UAAIE,IAAJ;;CACA,UACA;CACCA,QAAAA,IAAI,GAAG,IAAI8I,GAAJ,CAAQlT,MAAM,CAACmT,GAAf,EAAoB/I,IAA3B;CACA,OAHD,CAIA,OAAOgJ,GAAP,EACA;CACChJ,QAAAA,IAAI,GAAGpK,MAAM,CAACmT,GAAd;CACA;;CAED,UAAI/I,IAAI,KAAK,EAAb,EACA;CACC,YAAIiJ,aAAa,GAAGrT,MAAM,CAACmT,GAAP,CAAWG,KAAX,CAAiB,GAAjB,CAApB;CAEAlJ,QAAAA,IAAI,GAAGiJ,aAAa,CAACA,aAAa,CAACpP,MAAd,GAAuB,CAAxB,CAAb,KAA4C,EAA5C,GACJoP,aAAa,CAACA,aAAa,CAACpP,MAAd,GAAuB,CAAxB,CADT,GAEJjE,MAAM,CAACmT,GAFV;CAGA,OAPD,MAQK,IAAI/I,IAAI,CAACkJ,KAAL,CAAW,GAAX,EAAgB,CAAhB,MAAuB,KAA3B,EACL;CACClJ,QAAAA,IAAI,GAAGA,IAAI,CAACmJ,SAAL,CAAe,CAAf,CAAP;CACA;;CAED,WAAKxO,KAAL,GAAaqF,IAAI,CAACnF,QAAL,EAAb;CACA,WAAK8F,OAAL,GAAe/K,MAAM,CAACmT,GAAP,CAAWlO,QAAX,EAAf;CACA,WAAKmN,SAAL,GAAiBpS,MAAM,CAAC+E,KAAP,CAAaE,QAAb,EAAjB;CACA;CA1DF;CAAA;CAAA,8BA4DWjF,MA5DX,EA6DC;CACC,WAAK0F,IAAL,GAAY0B,wBAAU,CAACkD,GAAvB;CACA,WAAKvF,KAAL,GAAa/E,MAAM,CAACwT,IAAP,CAAYvO,QAAZ,EAAb;;CAEA,UAAIjF,MAAM,CAACqK,iBAAX,EACA;CACC,aAAKA,iBAAL,GAAyBrK,MAAM,CAACqK,iBAAhC;CACA;CACD;CArEF;CAAA;CAAA,oCAwEC;CACC,WAAK3E,IAAL,GAAY0B,wBAAU,CAACsC,OAAvB;CACA,WAAK3E,KAAL,GAAanB,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAAb;CACA;CA3EF;CAAA;CAAA,kCA6Ee7D,MA7Ef,EA8EC;CACC,WAAK0F,IAAL,GAAY0B,wBAAU,CAACC,OAAvB;CACA,WAAKtC,KAAL,GAAanB,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAAb;CAEA,WAAK4P,QAAL,GAAgBzT,MAAM,CAACwT,IAAvB;CACA,WAAKE,SAAL,GAAiB1T,MAAM,CAAC+E,KAAxB;CACA;CApFF;CAAA;CAAA,sCAuFC;CACC,WAAKW,IAAL,GAAY0B,wBAAU,CAACwD,SAAvB;CACA,WAAK7F,KAAL,GAAanB,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAAb;CACA;CA1FF;CAAA;CAAA;;KCIM8P;;;;;;;0BAEA9L,OACL;CACC,WAAKtF,OAAL,GAAe,KAAf;CACA,WAAKsF,KAAL,GAAaA,KAAb;CAEA,WAAK+L,iBAAL,GAAyB,IAAzB;CAEA,WAAKC,UAAL,GAAkB;CACjBL,QAAAA,IAAI,EAAE,IADW;CAEjBL,QAAAA,GAAG,EAAE;CAFY,OAAlB;CAIA;;;4BAEKW,SAASN,MAAMzO,OAAOoO,KAC5B;CACC,UAAI,CAAC,KAAK5Q,OAAN,IAAiB,CAACuR,OAAtB,EACA;CACC;CACA;;CAEDtP,MAAAA,WAAW,CAAC7C,KAAZ,CAAkB,cAAlB;CAEA,UAAM+D,IAAI,GAAG,KAAKqO,oBAAL,CAA0B;CAACD,QAAAA,OAAO,EAAPA,OAAD;CAAUN,QAAAA,IAAI,EAAJA,IAAV;CAAgBzO,QAAAA,KAAK,EAALA,KAAhB;CAAuBoO,QAAAA,GAAG,EAAHA;CAAvB,OAA1B,CAAb;CAEA,UAAI9I,iBAAiB,GAAG,KAAxB;;CACA,UAAI3E,IAAI,KAAK0B,wBAAU,CAACkD,GAAxB,EACA;CACC,YAAI,CAAC,cAAD,EAAiB,UAAjB,EAA6BmD,QAA7B,CAAsC,KAAKuG,gBAAL,CAAsBF,OAAtB,CAAtC,CAAJ,EACA;CACCzJ,UAAAA,iBAAiB,GAAG,IAApB;CACA;CACD;;CAED,UAAI3E,IAAI,KAAK0B,wBAAU,CAACsC,OAAxB,EACA;CACC,YAAIhE,IAAI,KAAK0B,wBAAU,CAACkD,GAAxB,EACA;CACC,kBAAQkJ,IAAR;CAEC,iBAAK,wBAAL;CACCA,cAAAA,IAAI,GAAGzO,KAAP;CACA;;CAED,iBAAK,yBAAL;CACA,iBAAK,oBAAL;CACCyO,cAAAA,IAAI,GAAG5P,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAAP;CACA;;CAED,iBAAK,+BAAL;CACC2P,cAAAA,IAAI,GAAG5P,aAAG,CAACC,UAAJ,CAAe,yCAAf,CAAP;CACA;CAbF;CAeA;;CAED,YAAI2P,IAAI,KAAK,EAAb,EACA;CACCA,UAAAA,IAAI,GAAG,KAAKQ,gBAAL,CAAsBF,OAAtB,CAAP;CACA;;CAED,YAAI,CAAC,KAAKG,UAAL,CAAgBT,IAAhB,EAAsBL,GAAtB,CAAL,EACA;CACC;CACA;;CAED,aAAKU,UAAL,GAAkB;CACjBL,UAAAA,IAAI,EAAJA,IADiB;CAEjBL,UAAAA,GAAG,EAAHA;CAFiB,SAAlB;CAIA;;CAED,WAAKtL,KAAL,CAAWqM,QAAX,CAAoB,oBAApB,EAA0C,IAAItB,MAAJ,CAAW;CAAClN,QAAAA,IAAI,EAAJA,IAAD;CAAO8N,QAAAA,IAAI,EAAJA,IAAP;CAAazO,QAAAA,KAAK,EAALA,KAAb;CAAoBoO,QAAAA,GAAG,EAAHA,GAApB;CAAyB9I,QAAAA,iBAAiB,EAAjBA;CAAzB,OAAX,CAA1C;CACA;;;kCAEY8J,MACb;CACC,UAAIA,IAAJ,EACA;CACC,aAAKtM,KAAL,CAAWqM,QAAX,CACC,oBADD,EAEC,IAAItB,MAAJ,CAAW;CACVlN,UAAAA,IAAI,EAAE0B,wBAAU,CAACsC;CADP,SAAX,CAFD;CAOA,aAAKmK,UAAL,GAAkB;CACjBL,UAAAA,IAAI,EAAEpM,wBAAU,CAACsC,OADA;CAEjByJ,UAAAA,GAAG,EAAE;CAFY,SAAlB;CAIA,OAbD,MAeA;CACC,YAAI,KAAKiB,mBAAL,MAA8B,KAAKC,8BAAL,EAAlC,EACA;CACCjU,UAAAA,eAAe,CAACkU,mBAAhB;CACA;CACD;CACD;;;qCAGD;CACCjS,MAAAA,MAAM,CAACc,IAAP,CAAY,iEAAZ;CACAI,MAAAA,KAAK,CAACN,GAAN,CAAU,iEAAV;CAEA,WAAK4E,KAAL,CAAWqM,QAAX,CAAoB,4BAApB;CACA;;;0CAEoBK,OACrB;CACC,UAAI7O,IAAI,GAAG0B,wBAAU,CAACC,OAAtB;;CAEA,UAAIkN,KAAK,CAACpB,GAAN,KAAc,SAAlB,EACA;CACCzN,QAAAA,IAAI,GAAG0B,wBAAU,CAACC,OAAlB;CACA,OAHD,MAIK,IAAIkN,KAAK,CAACpB,GAAN,KAAc,WAAlB,EACL;CACCzN,QAAAA,IAAI,GAAG0B,wBAAU,CAACwD,SAAlB;CACA,OAHI,MAIA,IAAI2J,KAAK,CAACpB,GAAV,EACL;CACCzN,QAAAA,IAAI,GAAG0B,wBAAU,CAAC8C,IAAlB;CACA,OAHI,MAIA,IAAIqK,KAAK,CAACT,OAAN,KAAkB,EAAtB,EACL;CACCpO,QAAAA,IAAI,GAAG0B,wBAAU,CAACkD,GAAlB;CACA;;CAED,aAAO5E,IAAP;CACA;;;sCAEgBoO,SACjB;CACC,UAAMU,SAAS,GAAIV,OAAO,CAACrG,QAAR,CAAiB,GAAjB,IAAwB,GAAxB,GAA8B,IAAjD;CACA,UAAMgH,IAAI,GAAGX,OAAO,CAACR,KAAR,CAAckB,SAAd,CAAb;CAEA,aAAOC,IAAI,CAACA,IAAI,CAACxQ,MAAL,GAAc,CAAf,CAAX;CACA;;;gCAEUuP,MAAML,KACjB;CACC,UAAI,KAAKA,GAAL,KAAa,EAAjB,EACA;CACC,YAAI,KAAKU,UAAL,CAAgBL,IAAhB,KAAyBA,IAA7B,EACA;CACC,iBAAO,KAAP;CACA;CACD,OAND,MAQA;CACC,YAAI,KAAKK,UAAL,CAAgBL,IAAhB,KAAyBA,IAAzB,IAAiC,KAAKK,UAAL,CAAgBV,GAAhB,KAAwBA,GAA7D,EACA;CACC,iBAAO,KAAP;CACA;CACD;;CAED,aAAO,IAAP;CACA;;;sDAGD;CACC,aAAQzP,EAAE,CAACC,OAAH,CAAW+Q,aAAX,MAA8B,EAAtC;CACA;;;6BAGD;CAAA;;CACC,UAAI,KAAKnS,OAAT,EACA;CACCF,QAAAA,MAAM,CAACc,IAAP,CAAY,8BAAZ;CACA;CACA;;CAED,WAAKZ,OAAL,GAAe,IAAf;CAEAmB,MAAAA,EAAE,CAACC,OAAH,CAAWkC,cAAX,CACC,WADD,EAEC,UAACiO,OAAD,EAAUN,IAAV,EAAgBzO,KAAhB,EAAuBoO,GAAvB;CAAA,eAA+B,KAAI,CAACwB,KAAL,CAAWb,OAAX,EAAoBN,IAApB,EAA0BzO,KAA1B,EAAiCoO,GAAjC,CAA/B;CAAA,OAFD;CAKAzP,MAAAA,EAAE,CAACC,OAAH,CAAWkC,cAAX,CACC,mBADD,EAEC,KAAK+O,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAFD;;CAKA,UAAI,KAAKR,8BAAL,EAAJ,EACA;CACCjU,QAAAA,eAAe,CAACkU,mBAAhB;CACA;;CAED,WAAKV,iBAAL,GAAyBkB,WAAW,CACnC;CAAA,eAAM,KAAI,CAACjN,KAAL,CAAWqM,QAAX,CAAoB,+BAApB,CAAN;CAAA,OADmC,EAEnC,KAFmC,CAApC;CAKA7R,MAAAA,MAAM,CAACY,GAAP,CAAW,sBAAX;CACA;;;4BAGD;CACC,UAAI,CAAC,KAAKV,OAAV,EACA;CACCF,QAAAA,MAAM,CAACc,IAAP,CAAY,8BAAZ;CACA;CACA;;CAED,WAAKZ,OAAL,GAAe,KAAf;CAEA,WAAKsR,UAAL,GAAkB;CACjBL,QAAAA,IAAI,EAAE,IADW;CAEjBL,QAAAA,GAAG,EAAE;CAFY,OAAlB;CAKA,WAAKS,iBAAL,GAAyB,IAAzB;CAEA,WAAK/L,KAAL,CAAWqM,QAAX,CAAoB,4BAApB;CAEA7R,MAAAA,MAAM,CAACY,GAAP,CAAW,sBAAX;CACA;;;;;CAGF,IAAM8R,YAAY,GAAG,IAAIpB,YAAJ,EAArB;;KC9NMqB;;;;;;;0BAEAnN,OACL;CACC,WAAKtF,OAAL,GAAe,KAAf;CACA,WAAKsF,KAAL,GAAaA,KAAb;CAEA,WAAKoN,OAAL,GAAe,CAAf;CACA,WAAKC,aAAL,GAAqB,IAArB;CACA,WAAKC,eAAL,GAAuB,IAAvB;CACA;;;4BAGD;CAAA;;CACC9S,MAAAA,MAAM,CAACc,IAAP,CAAY,2BAAZ;CAEAO,MAAAA,EAAE,CAAC0R,IAAH,CAAQC,SAAR,CAAkB,0CAAlB,EAA8D;CAC7DC,QAAAA,IAAI,EAAE;CACLvU,UAAAA,OAAO,EAAEsD,IAAI,CAACC,SAAL,CAAe,KAAKiR,YAAL,EAAf;CADJ;CADuD,OAA9D,EAKEC,IALF,CAKO,UAAAhM,MAAM,EACZ;CACCjG,QAAAA,KAAK,CAACN,GAAN,CAAU,cAAV;;CAEA,YAAIuG,MAAM,CAACiM,MAAP,KAAkB,SAAtB,EACA;CACCpT,UAAAA,MAAM,CAACc,IAAP,CAAY,UAAZ;CAEA,UAAA,KAAI,CAAC8R,OAAL,GAAe,CAAf;;CAEA,UAAA,KAAI,CAACS,gBAAL;;CAEA,cAAIlM,MAAM,CAAC8L,IAAP,CAAY/S,OAAZ,KAAwBC,OAAO,CAACmT,iBAAR,EAA5B,EACA;CACCtT,YAAAA,MAAM,CAACc,IAAP,CAAY,gCAAZ;CACAI,YAAAA,KAAK,CAACN,GAAN,CAAU,gCAAV;CAEAT,YAAAA,OAAO,CAACoT,OAAR;CACA;CACD,SAfD,MAiBA;CACCvT,UAAAA,MAAM,CAACe,KAAP,CAAa,QAAb;CACA,UAAA,KAAI,CAAC6R,OAAL;;CACA,UAAA,KAAI,CAACY,iBAAL;CACA;CACD,OA/BF,EAgCElB,KAhCF,CAgCQ,YACP;CACCtS,QAAAA,MAAM,CAACe,KAAP,CAAa,mBAAb;CAEA,QAAA,KAAI,CAAC6R,OAAL;;CACA,QAAA,KAAI,CAACY,iBAAL;CACA,OAtCF;CAuCA;;;yCAGD;CACC,WAAKV,eAAL,GAAuBW,UAAU,CAAC,KAAKC,IAAL,CAAUlB,IAAV,CAAe,IAAf,CAAD,EAAuB,KAAKmB,eAAL,EAAvB,CAAjC;CACA3T,MAAAA,MAAM,CAACY,GAAP,wBAA2B,KAAK+S,eAAL,KAAyB,IAApD;CACA;;;uCAGD;CACC,aAAQ,KAAKf,OAAL,KAAiB,CAAjB,GAAqB,KAAKC,aAA1B,GAA0C,KAAKA,aAAL,GAAqB,KAAKD,OAA5E;CACA;;;oCAGD;CACC,aAAO,KAAKpN,KAAL,CAAWjH,KAAX,CAAiBqV,OAAjB,CAAyB9O,SAAhC;CACA;;;6BAGD;CACC,UAAI,KAAK5E,OAAT,EACA;CACCF,QAAAA,MAAM,CAACc,IAAP,CAAY,wBAAZ;CACA;CACA;;CAED,WAAKZ,OAAL,GAAe,IAAf;CACA,WAAK0S,OAAL,GAAe,CAAf;;CAEA,UAAI/P,cAAI,CAACkD,aAAL,CAAmB,KAAKmN,YAAL,EAAnB,CAAJ,EACA;CACClT,QAAAA,MAAM,CAACY,GAAP,CAAW,kCAAX;CACA,aAAK4S,iBAAL;CACA;;CAEDxT,MAAAA,MAAM,CAACY,GAAP,CAAW,gBAAX;CACA;;;4BAGD;CACC,UAAI,CAAC,KAAKV,OAAV,EACA;CACCF,QAAAA,MAAM,CAACc,IAAP,CAAY,wBAAZ;CACA;CACA;;CAED,WAAKZ,OAAL,GAAe,KAAf;CACA,WAAK0S,OAAL,GAAe,CAAf;CAEAiB,MAAAA,YAAY,CAAC,KAAKf,eAAN,CAAZ;CACA9S,MAAAA,MAAM,CAACY,GAAP,CAAW,gBAAX;CACA;;;wCAGD;CAAA;;CACCZ,MAAAA,MAAM,CAACc,IAAP,CAAY,cAAZ;CACAI,MAAAA,KAAK,CAACgL,KAAN;CACAhL,MAAAA,KAAK,CAACN,GAAN,CAAU,cAAV;CAEA,WAAK4E,KAAL,CAAWqM,QAAX,CACC,mCADD,EAEC,IAAI1T,IAAJ,CAAS,KAAKqH,KAAL,CAAWjH,KAAX,CAAiBqV,OAAjB,CAAyBnP,WAAzB,CAAqC3F,OAA9C,CAFD,EAIEqU,IAJF,CAIO,YAAM;CACX,QAAA,MAAI,CAAC3N,KAAL,CAAWqM,QAAX,CAAoB,0BAApB,EACEsB,IADF,CACO,YAAM;CACX,UAAA,MAAI,CAAC3N,KAAL,CAAWqM,QAAX,CAAoB,wBAApB;;CACA,UAAA,MAAI,CAACrM,KAAL,CAAWqM,QAAX,CAAoB,wBAApB;;CAEAxQ,UAAAA,EAAE,CAACyS,SAAH,CAAaC,QAAb,CAAsBC,KAAtB;CAEAC,UAAAA,kBAAE,CAACxR,YAAH,CAAgByR,MAAhB,CAAuBhR,MAAvB,CAA8B;CAC7BiR,YAAAA,OAAO,EAAE5S,aAAG,CAACC,UAAJ,CAAe,6CAAf,CADoB;CAE7B4S,YAAAA,aAAa,EAAE;CAFc,WAA9B;CAIA,SAXF;CAYA,OAjBF;CAmBA;;;;;CAGF,IAAMC,MAAM,GAAG,IAAI1B,MAAJ,EAAf;;KC1Ia2B,cAAb;CAEC,4BACA;AAAA,CAAA;CACC;;CAJF;CAAA;CAAA,kCAOC;CACC,aAAO,SAAP;CACA;CATF;CAAA;CAAA,+CAW4B3W,MAX5B,EAYC;CACC,UAAIA,MAAM,CAACuC,OAAP,KAAmBC,OAAO,CAACoU,gBAAR,EAAvB,EACA;CACCvU,QAAAA,MAAM,CAACc,IAAP,CAAY,iBAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,iBAAV;CAEAkH,QAAAA,QAAQ,CAAC0M,MAAT;CACA,OAND,MAQA;CACCrU,QAAAA,OAAO,CAACsU,IAAR;CACAtU,QAAAA,OAAO,CAACoT,OAAR;CAEAvT,QAAAA,MAAM,CAACc,IAAP,CAAY,kBAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,kBAAV;CACA;CACD;CA5BF;CAAA;CAAA,oDA8BiCjD,MA9BjC,EA+BC;CACC,UAAIA,MAAM,CAACuC,OAAX,EACA;CACCgB,QAAAA,KAAK,CAACwT,MAAN;CAEA1U,QAAAA,MAAM,CAACc,IAAP,CAAY,4BAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,4BAAV;CACA,OAND,MAQA;CACCZ,QAAAA,MAAM,CAACc,IAAP,CAAY,6BAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,6BAAV;CAEAM,QAAAA,KAAK,CAACqS,OAAN;CACA;CACD;CA9CF;CAAA;CAAA;;KCUMpT;;;;;;;0BAEAwU,SACL;CACC,WAAKzU,OAAL,GAAeyU,OAAO,CAACzU,OAAvB;CACA,WAAK0U,WAAL,GAAmB,IAAnB;CACA,WAAKC,MAAL,GAAc,KAAd;CACA,WAAKC,IAAL,GAAY,EAAZ;CAEA,WAAKC,oBAAL,GAA4B;CAC3BnR,QAAAA,MAAM,EAAE;CACPK,UAAAA,SAAS,EAAE0Q,OAAO,CAAC1Q,SADZ;CAEPE,UAAAA,gBAAgB,EAAEwQ,OAAO,CAACxQ;CAFnB;CADmB,OAA5B;CAOA,WAAK6Q,UAAL,GAAkBL,OAAO,CAACK,UAA1B;CACA,WAAKC,UAAL,GAAkBN,OAAO,CAACM,UAA1B;;CAEA,UAAIN,OAAO,CAACO,YAAZ,EACA;CACChU,QAAAA,KAAK,CAACwT,MAAN;CACA;;CAEDxT,MAAAA,KAAK,CAACgL,KAAN;CACAhL,MAAAA,KAAK,CAACN,GAAN,CAAU,mBAAV;;CAEA,UAAI,KAAKR,SAAL,MAAoBJ,MAAM,CAACI,SAAP,EAAxB,EACA;CACCrC,QAAAA,eAAe,CAACoX,OAAhB,GAA0B,YAAW,EAArC;;CACAnV,QAAAA,MAAM,CAACV,KAAP;CACA;;CAED4B,MAAAA,KAAK,CAACN,GAAN,oBAAsB,KAAKV,OAA3B;;CAEA,UAAI,KAAKE,SAAL,EAAJ,EACA;CACC,aAAKgV,OAAL;CACA;;CAEDC,MAAAA,gBAAI,CAACC,SAAL,CAAe,IAAIhB,cAAJ,EAAf;CACA;;;+BAGD;CAAA;;CACC,UAAI,CAAC,KAAKlU,SAAL,EAAL,EACA;CACC;CACA;;CAED,UAAImV,uBAAJ,GACEC,QADF,CAEE7R,YAAY,CACV8R,MADF,GAEEC,YAFF,CAEe,KAAKX,oBAFpB,EAGEY,WAHF,CAGc,IAHd,CAFF,EAOEC,iBAPF,CAOoB;CAClBzE,QAAAA,IAAI,EAAE,aADY;CAElB9N,QAAAA,IAAI,EAAEkS,uBAAW,CAACM,YAAZ,CAAyBC,SAFb;CAGlBC,QAAAA,MAAM,EAAExU,aAAG,CAACC,UAAJ,CAAe,SAAf,CAHU;CAIlBwU,QAAAA,MAAM,EAAEzU,aAAG,CAACC,UAAJ,CAAe,SAAf;CAJU,OAPpB,EAaEyU,KAbF,GAcE9C,IAdF,CAcO,UAAA+C,OAAO,EAAI;CAChB,QAAA,KAAI,CAACpB,IAAL,CAAUtP,KAAV,GAAkB0Q,OAAO,CAAC1Q,KAA1B;;CAEA,QAAA,KAAI,CAAC2Q,UAAL,GAAkBtE,QAAlB,CAA2B,iCAA3B,EACEsB,IADF,CACO;CAAA,iBAAM,KAAI,CAACiD,WAAL,CAAiB,KAAI,CAACD,UAAL,EAAjB,CAAN;CAAA,SADP;CAEA,OAnBF,EAoBE7D,KApBF,CAoBQ,YAAM;CACZ,YAAM+D,YAAY,GAAG,mCAArB;CAEArW,QAAAA,MAAM,CAACe,KAAP,CAAasV,YAAb;CACAnV,QAAAA,KAAK,CAACN,GAAN,CAAUyV,YAAV;CACA,OAzBF;CA2BA;;;iCAEW7Q,OACZ;CAAA;;CACCyG,MAAAA,mCAAa,CAACqK,IAAd,CAAmB,KAAKtB,UAAxB;CACAuB,MAAAA,mCAAa,CAACD,IAAd,CAAmB,KAAKrB,UAAxB;CAEA3D,MAAAA,YAAY,CAACgF,IAAb,CAAkB9Q,KAAlB;CACAmN,MAAAA,MAAM,CAAC2D,IAAP,CAAY9Q,KAAZ;CAEAnE,MAAAA,EAAE,CAACC,OAAH,CAAWkC,cAAX,CACC,YADD,EAEC,UAACsO,IAAD;CAAA,eAAU,MAAI,CAAC0E,MAAL,CAAY1E,IAAZ,CAAV;CAAA,OAFD;CAKAzQ,MAAAA,EAAE,CAACgI,eAAH,CAAmBoN,MAAnB,CAA0B;CACzBrT,QAAAA,EAAE,EAAE,aADqB;CAEzBV,QAAAA,KAAK,EAAEnB,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAFkB;CAGzBkV,QAAAA,KAAK,EAAE,GAHkB;CAIzBC,QAAAA,MAAM,EAAE,KAJiB;CAKzBC,QAAAA,MAAM,EAAE;CACPC,UAAAA,IAAI,EAAE;CAAA,mBAAM,MAAI,CAACC,UAAL,EAAN;CAAA;CADC;CALiB,OAA1B;CAUAzV,MAAAA,EAAE,CAACC,OAAH,CAAWkC,cAAX,CACC,eADD,EAEC,UAAAuT,OAAO,EAAI;CACV,YAAIA,OAAO,KAAK,YAAhB,EACA;CACC,cAAI,CAAC1V,EAAE,CAAC2V,eAAH,CAAmBC,SAAnB,EAAL,EACA;CACC,mBAAO,KAAP;CACA;;CAED5V,UAAAA,EAAE,CAACgI,eAAH,CAAmBD,SAAnB,CAA6B,aAA7B,EAA4C,IAA5C;CACA/H,UAAAA,EAAE,CAACC,OAAH,CAAW4V,eAAX;CACA7V,UAAAA,EAAE,CAACC,OAAH,CAAW6H,aAAX,CAAyB,MAAzB;CACA;CACD,OAdF;;CAiBA,UAAI,KAAK/I,SAAL,EAAJ,EACA;CACC,aAAK+W,MAAL;CACA,OAHD,MAKA;CACCnX,QAAAA,MAAM,CAACc,IAAP,CAAY,qBAAZ;CACA;CACD;;;8BAGD;CAAA;;CACC,UAAI,KAAK+T,MAAT,EACA;CACC7U,QAAAA,MAAM,CAACY,GAAP,CAAW,mFAAX;CACAM,QAAAA,KAAK,CAACN,GAAN,CAAU,mFAAV;CAEA;CACA;;CAED,UAAI,CAAC,KAAKuV,UAAL,GAAkB5X,KAAlB,CAAwBqV,OAAxB,CAAgChQ,MAAhC,CAAuCW,sBAA5C,EACA;CACCvE,QAAAA,MAAM,CAACY,GAAP,CAAW,sDAAX;CACAM,QAAAA,KAAK,CAACN,GAAN,CAAU,sDAAV;;CAEA,YAAI,KAAKwW,kCAAL,EAAJ,EACA;CACC,eAAKN,UAAL;CACAO,UAAAA,eAAe,CAACC,cAAhB,CAA+B,aAA/B;CACA;;CAED;CACA;;CAED,WAAKnB,UAAL,GAAkBtE,QAAlB,CAA2B,wBAA3B,EAAqDsB,IAArD,CAA0D,YAAM;CAC/D,QAAA,MAAI,CAACgD,UAAL,GAAkBtE,QAAlB,CAA2B,0BAA3B,EAAuDsB,IAAvD,CAA4D,YAAM;CACjE,UAAA,MAAI,CAACgD,UAAL,GAAkBtE,QAAlB,CAA2B,wBAA3B,EAAqDsB,IAArD,CAA0D,YAAM;CAC/D,gBAAI,MAAI,CAACoE,QAAL,EAAJ,EACA;CACC,kBAAI,MAAI,CAACC,eAAL,EAAJ,EACA;CACCxX,gBAAAA,MAAM,CAACc,IAAP,CAAY,iCAAZ;CACAI,gBAAAA,KAAK,CAACN,GAAN,CAAU,iCAAV;;CAEA,gBAAA,MAAI,CAAC6W,cAAL;;CACA;CACA;;CAED,cAAA,MAAI,CAACjN,gBAAL,GAAwB2I,IAAxB,CAA6B;CAAA,uBAAM,MAAI,CAAC7T,KAAL,EAAN;CAAA,eAA7B;;CACA;CACA;;CAED,YAAA,MAAI,CAACA,KAAL;CACA,WAjBD;CAkBA,SAnBD;CAoBA,OArBD;CAsBA;;;6BAGD;CACC,UAAI,CAAC,KAAKc,SAAL,EAAL,EACA;CACCJ,QAAAA,MAAM,CAACc,IAAP,CAAY,mCAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,mCAAV;CAEA;CACA;;CAED,UAAI,KAAK2W,QAAL,EAAJ,EACA;CACCvX,QAAAA,MAAM,CAACc,IAAP,CAAY,iCAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,iCAAV;CAEA;CACA;;CAEDM,MAAAA,KAAK,CAACN,GAAN,CAAU,iBAAV;CACAM,MAAAA,KAAK,CAACgL,KAAN;;CAEA,UAAI,KAAKwL,2BAAL,EAAJ,EACA;CACC1X,QAAAA,MAAM,CAACY,GAAP,CAAW,gBAAX;CACA7C,QAAAA,eAAe,CAAC4Z,YAAhB;CACA;;CAEDrG,MAAAA,YAAY,CAAChS,KAAb;CACAqT,MAAAA,MAAM,CAACrT,KAAP;CAEAU,MAAAA,MAAM,CAACc,IAAP,CAAY,iBAAZ;CACA;;;4BAGD;CACC,UAAI,KAAK4W,2BAAL,EAAJ,EACA;CACC1X,QAAAA,MAAM,CAACY,GAAP,CAAW,gBAAX;CACA7C,QAAAA,eAAe,CAAC6Z,WAAhB;CACA;;CAEDtG,MAAAA,YAAY,CAACmD,IAAb;CACA9B,MAAAA,MAAM,CAAC8B,IAAP;CAEAzU,MAAAA,MAAM,CAACc,IAAP,CAAY,iBAAZ;CACAI,MAAAA,KAAK,CAACN,GAAN,CAAU,iBAAV;CACA;;;6BAGD;CACC,WAAK6T,IAAL;CACA,WAAKgD,cAAL;CACA;;;4BAEM3F,MACP;CACC,UAAI,CAAC,KAAK1R,SAAL,EAAD,IAAqB,KAAKmX,QAAL,EAAzB,EACA;CACC;CACA;;CAED,UAAIzF,IAAI,IAAI,CAAC,KAAK+C,MAAlB,EACA;CACC,aAAKA,MAAL,GAAc,IAAd;CAEA7U,QAAAA,MAAM,CAACc,IAAP,CAAY,WAAZ;CACAI,QAAAA,KAAK,CAACgL,KAAN;CACAhL,QAAAA,KAAK,CAACN,GAAN,CAAU,WAAV;CAEA,aAAK6T,IAAL;CAEAnD,QAAAA,YAAY,CAACuG,YAAb,CAA0B/F,IAA1B;CACA,OAXD,MAYK,IAAI,CAACA,IAAD,IAAS,KAAK+C,MAAlB,EACL;CACC,aAAKA,MAAL,GAAc,KAAd;CAEA7U,QAAAA,MAAM,CAACc,IAAP,CAAY,uCAAZ;CACAI,QAAAA,KAAK,CAACgL,KAAN;CACAhL,QAAAA,KAAK,CAACN,GAAN,CAAU,uCAAV;CAEA,aAAKuW,MAAL;CACA;CACD;;;4BAGD;CACC,UAAI,CAAC,KAAKrC,IAAL,CAAUhJ,cAAV,CAAyB,OAAzB,CAAL,EACA;CACC9L,QAAAA,MAAM,CAACc,IAAP,CAAY,kDAAZ;CACAI,QAAAA,KAAK,CAACN,GAAN,CAAU,kDAAV;CAEA;CACA;;CAED,WAAKuV,UAAL,GAAkBtE,QAAlB,CAA2B,yBAA3B,EAAsDsB,IAAtD,CAA2D;CAAA,eAAMR,MAAM,CAACe,IAAP,EAAN;CAAA,OAA3D;CACA;;;kCAGD;CACC,UAAI,CAAC,KAAKtT,SAAL,EAAL,EACA;CACC;CACA;;CAED0X,MAAAA,mCAAa,CAACjB,IAAd,CAAmB,KAAKV,UAAL,EAAnB;CACA;;;yCAGD;CACC,UAAI,CAAC,KAAK/V,SAAL,EAAL,EACA;CACC;CACA;;CAED0X,MAAAA,mCAAa,CAACC,WAAd,CAA0B,KAAK5B,UAAL,EAA1B;CACA;;;0CAGD;CACC,aAAO,KAAKA,UAAL,GAAkB5X,KAAlB,CAAwBqV,OAAxB,CAAgChQ,MAAhC,CAAuCQ,WAA9C;CACA;;;wCAGD;CACC,aAAO,KAAK+R,UAAL,GAAkBtE,QAAlB,CAA2B,0BAA3B,CAAP;CACA;;;gCAGD;CACC,aAAO,CAAC,CAAC,KAAKmG,kBAAL,EAAT;CACA;;;uCAGD;CACC,aAAO,KAAKA,kBAAL,KAA4B,IAAI7Z,IAAJ,EAA5B,GAAyC,CAAhD;CACA;;;sCAGD;CAAA;;CACC6B,MAAAA,MAAM,CAACc,IAAP,wCAA4C,KAAKkX,kBAAL,GAA0BpV,QAA1B,EAA5C;CACA1B,MAAAA,KAAK,CAACN,GAAN,wCAA0C,KAAKoX,kBAAL,GAA0BpV,QAA1B,EAA1C;CAEAiR,MAAAA,YAAY,CAAC,KAAKe,WAAN,CAAZ;CAEA,WAAKA,WAAL,GAAmBnB,UAAU,CAC5B;CAAA,eAAM,MAAI,CAACjJ,gBAAL,GAAwB2I,IAAxB,CAA6B;CAAA,iBAAM,MAAI,CAACgE,MAAL,EAAN;CAAA,SAA7B,CAAN;CAAA,OAD4B,EAE5B,KAAKa,kBAAL,KAA4B,IAAI7Z,IAAJ,EAFA,CAA7B;CAIA;;;gCAEUmM,UACX;CAAA;;CACC,UACCzH,cAAI,CAAC8C,MAAL,CAAY2E,QAAZ,KACGzH,cAAI,CAACuH,QAAL,CAAcE,QAAQ,CAACC,OAAT,EAAd,CADH,IAEGD,QAAQ,GAAG,IAAInM,IAAJ,EAHf,EAKA;CACC,aAAKgY,UAAL,GAAkBtE,QAAlB,CAA2B,wBAA3B,EAAqDvH,QAArD,EAA+D6I,IAA/D,CAAoE;CAAA,iBAAM,MAAI,CAAC8E,KAAL,EAAN;CAAA,SAApE;CACA,OAPD,MASA;CACC,cAAMpW,KAAK,CAAC,2CAAD,CAAX;CACA;CACD;;;0DAGD;CACC,UAAI+B,MAAM,GAAG,KAAKuS,UAAL,GAAkB5X,KAAlB,CAAwBqV,OAAxB,CAAgChQ,MAA7C;;CACA,UAAI,CAACA,MAAL,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAIA,MAAM,CAACW,sBAAP,KAAkC,IAAtC,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAIC,kCAAkC,GAAGZ,MAAM,CAACY,kCAAhD;;CACA,UAAIA,kCAAkC,KAAK,IAA3C,EACA;CACC,eAAO,IAAP;CACA;;CAED,aAAO,IAAIrG,IAAJ,CAASwF,YAAY,CAAC6C,SAAb,CAAuB9B,UAAvB,EAAT,KAAiD,IAAIvG,IAAJ,CAASqG,kCAAT,CAAxD;CACA;;;mDAGD;CACC,aAAO,KAAK2R,UAAL,GAAkBtE,QAAlB,CAA2B,qCAA3B,CAAP;CACA;;;4BAGD;CAAA;;CACCgC,MAAAA,YAAY,CAAC,KAAKe,WAAN,CAAZ;CACA,WAAKA,WAAL,GAAmB,IAAnB;CACA,WAAKpK,gBAAL,GAAwB2I,IAAxB,CAA6B;CAAA,eAAM,MAAI,CAACgE,MAAL,EAAN;CAAA,OAA7B;CACA;;;iCAGD;CACC,aAAQ,KAAKjX,OAAL,KAAiB,KAAKqU,gBAAL,EAAzB;CACA;;;8BAGD;CACC,WAAKrU,OAAL,GAAe,KAAKqU,gBAAL,EAAf;CACA;;;+BAGD;CACC,WAAKE,IAAL;CAEApT,MAAAA,EAAE,CAACgI,eAAH,CAAmB6O,OAAnB,CAA2B,aAA3B;CACA,WAAKpD,IAAL,GAAY,EAAZ;CAEA,WAAK5U,OAAL,GAAe,KAAKoT,iBAAL,EAAf;CACA;;;wCAGD;CACC,aAAO,GAAP;CACA;;;yCAGD;CACC,aAAO,GAAP;CACA;;;mDAGD;CACC,aAAQjS,EAAE,CAACC,OAAH,CAAW+Q,aAAX,MAA8B,EAAtC;CACA;;;kCAGD;CACC,aAAQ,KAAKyC,IAAL,CAAUhJ,cAAV,CAAyB,OAAzB,IAAoC,KAAKgJ,IAAL,CAAUtP,KAA9C,GAAsD,IAA9D;CACA;;;;;AAGF,KAAMoO,OAAO,GAAG,IAAIzT,OAAJ,EAAhB;;;;;;;;"}