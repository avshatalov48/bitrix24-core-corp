{"version":3,"file":"monitor.bundle.js","sources":["../src/model/utils/code.js","../src/model/utils/time.js","../src/lib/logger.js","../src/lib/debug.js","../src/model/monitor.js","../src/model/entity.js","../src/eventhandler.js","../src/sender.js","../src/report/control/control.js","../src/report/popup/addintervalpopup/addintervalpopup.js","../src/report/popup/selectintervalpopup/interval/interval.js","../src/report/popup/selectintervalpopup/selectIntervalpopup.js","../src/report/mixin/time.js","../src/report/group/item/item.js","../src/report/group/group.js","../src/report/consent/windows/windows.js","../src/report/consent/mac/mac.js","../src/report/consent/consent.js","../src/report/timeline/timeline.js","../src/report/report.js","../src/lib/commandhandler.js","../src/monitor.js"],"sourcesContent":["import {md5} from 'main.md5';\nimport {sha1} from 'main.sha1';\n\nexport class Code\n{\n\tstatic createPublic(...params)\n\t{\n\t\treturn md5(params.join(''));\n\t}\n\n\tstatic createPrivate(...params)\n\t{\n\t\treturn sha1(params.join(''));\n\t}\n\n\tstatic createSecret()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPrivate(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark(),\n\t\t\t+Date.now(),\n\t\t);\n\t}\n\n\tstatic getDesktopCode()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPublic(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark()\n\t\t);\n\t}\n}","export class Time\n{\n\tstatic calculateInEntity(state, entity)\n\t{\n\t\treturn state.history\n\t\t\t.filter(entry => entry.privateCode === entity.privateCode)\n\t\t\t.map(Time.calculateInEntry)\n\t\t\t.reduce((sum, time) => sum + time, 0)\n\t}\n\n\tstatic calculateInEntry(entry)\n\t{\n\t\tconst time = entry.time\n\t\t\t.map(interval => {\n\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t})\n\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\treturn Math.round(time / 1000);\n\t}\n\n\tstatic formatDateToTime(date: Date)\n\t{\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst hour = date.getHours();\n\t\tconst min = addZero(date.getMinutes());\n\n\t\treturn hour + ':' + min;\n\t}\n\n\tstatic msToSec(ms)\n\t{\n\t\treturn ms / 1000;\n\t}\n}","import {Type} from 'main.core';\nimport {Monitor} from '../monitor';\n\nclass Logger\n{\n\tconstructor()\n\t{\n\t\tthis.storageKey = 'bx-timeman-monitor-logger-enabled';\n\t\tthis.enabled = null;\n\t}\n\n\tstart()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.storageKey, 'Y');\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tstop()\n\t{\n\t\tthis.enabled = false;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.removeItem(this.storageKey);\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tisEnabled()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.enabled === null)\n\t\t{\n\t\t\tif (typeof window.localStorage !== 'undefined')\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tthis.enabled = window.localStorage.getItem(this.storageKey) === 'Y';\n\t\t\t\t}\n\t\t\t\tcatch(e) {}\n\t\t\t}\n\t\t}\n\n\t\treturn this.enabled === true;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.log(...params);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.info(...params);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.warn(...params);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tconsole.error(...params);\n\t}\n\n\ttrace(...params)\n\t{\n\t\tconsole.trace(...params);\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};","import {Loc} from 'main.core';\n\nclass Debug\n{\n\tconstructor()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn this.enabled;\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = true;\n\t}\n\n\tdisable()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = this.getLogMessage(...params);\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', text.substr(3));\n\t}\n\n\tspace()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', ' ');\n\t}\n\n\tgetLogMessage()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = '';\n\n\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tif(arguments[i] instanceof Error)\n\t\t\t{\n\t\t\t\ttext = arguments[i].message + \"\\n\" + arguments[i].stack\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | '+(typeof(arguments[i]) == 'object'? JSON.stringify(arguments[i]): arguments[i]);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | (circular structure)';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn text;\n\t}\n}\n\nlet debug = new Debug();\n\nexport {debug as Debug};","import {Loc, Type} from 'main.core';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {EntityType, EntityGroup} from 'timeman.const';\nimport {Code} from './utils/code';\nimport {Time} from './utils/time';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\n\nexport class MonitorModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'monitor';\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 1000;\n\t}\n\n\tgetLoadTimeout()\n\t{\n\t\treturn false;\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tconfig: {\n\t\t\t\tsecret: Code.createSecret(),\n\t\t\t\tdesktopCode: Code.getDesktopCode(),\n\t\t\t\totherTime: this.getVariable('config.otherTime', 1800000),\n\t\t\t\tshortAbsenceTime: this.getVariable('config.shortAbsenceTime', 1800000),\n\t\t\t},\n\t\t\treportState: {\n\t\t\t\tdateLog: this.getDateLog(),\n\t\t\t},\n\t\t\tpersonal: [],\n\t\t\tstrictlyWorking: [],\n\t\t\tentity: [],\n\t\t\thistory: [],\n\t\t\tsentQueue: [],\n\t\t};\n\t}\n\n\tgetEntityState()\n\t{\n\t\treturn {\n\t\t\ttype: EntityType.unknown,\n\t\t\ttitle: '',\n\t\t\tpublicCode: '',\n\t\t\tprivateCode: '',\n\t\t\tcomment: '',\n\t\t\textra: {},\n\t\t};\n\t}\n\n\tgetHistoryState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tprivateCode: '',\n\t\t\ttime: [{\n\t\t\t\tstart: new Date(),\n\t\t\t\tpreFinish: null,\n\t\t\t\tfinish: null\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetSentQueueState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\thistoryPackage: [],\n\t\t\tchartPackage: [],\n\t\t\tdesktopCode: '',\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tsetDateLog(store, payload)\n\t\t\t{\n\t\t\t\tif (Type.isString(payload))\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date(payload);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t\t\t&& payload.length === 10\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('setDateLog', payload);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\taddPersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addPersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\tremovePersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removePersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addToStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeFromStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStrictlyWorking');\n\t\t\t},\n\n\t\t\tclearPersonal: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPersonal');\n\t\t\t},\n\n\t\t\taddEntity: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validateEntity({...payload});\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type !== EntityType.absence\n\t\t\t\t\t&& result.type !== EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, store.state.config.secret);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tconst timestamp = +date;\n\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title, timestamp);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, timestamp, store.state.config.secret);\n\n\t\t\t\t\tif (result.type === EntityType.absence)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.extra = {\n\t\t\t\t\t\t\ttimeStart: date,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tresult.title +=\n\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t+ Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE_FROM_TIME')\n\t\t\t\t\t\t\t+ ' '\n\t\t\t\t\t\t\t+ Time.formatDateToTime(result.extra.timeStart)\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('addEntity', {\n\t\t\t\t\t...this.getEntityState(),\n\t\t\t\t\t...result,\n\t\t\t\t});\n\n\t\t\t\tif (!store.state.strictlyWorking.find(privateCode => privateCode === result.privateCode))\n\t\t\t\t{\n\t\t\t\t\tconst isBitrix24Cp = (\n\t\t\t\t\t\tresult.type === EntityType.site\n\t\t\t\t\t\t&& result.title === location.host\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isBitrix24Desktop = (\n\t\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t\t&& payload.isBitrix24Desktop\n\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tisBitrix24Cp\n\t\t\t\t\t\t|| isBitrix24Desktop\n\t\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('addToStrictlyWorking', result.privateCode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeEntityByPrivateCode', payload);\n\t\t\t},\n\n\t\t\tclearEntities: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearEntities');\n\t\t\t},\n\n\t\t\taddHistory: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\n\t\t\t\tconst result = this.validateHistory({...payload});\n\n\t\t\t\tlet entity;\n\t\t\t\tlet privateCode;\n\t\t\t\tlet historyEntry = null;\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t|| result.type === EntityType.site\n\t\t\t\t\t|| result.type === EntityType.unknown\n\t\t\t\t\t|| result.type === EntityType.incognito\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getEntityByTitle(store, result.title);\n\t\t\t\t\tprivateCode = (entity ? entity.privateCode : null);\n\n\t\t\t\t\tif (!privateCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tprivateCode = this.getActions().addEntity(store, payload).privateCode;\n\t\t\t\t\t}\n\n\t\t\t\t\thistoryEntry = (entity && entity.type === EntityType.site)\n\t\t\t\t\t\t? this.getHistoryEntryBySiteUrl(store, result.siteUrl)\n\t\t\t\t\t\t: this.getHistoryEntryByPrivateCode(store, privateCode);\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tresult.type === EntityType.absence\n\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getActions().addEntity(store, payload);\n\t\t\t\t\tprivateCode = entity.privateCode;\n\t\t\t\t}\n\n\t\t\t\tif (!historyEntry)\n\t\t\t\t{\n\t\t\t\t\tdelete result.title;\n\n\t\t\t\t\tstore.commit('addHistory', {\n\t\t\t\t\t\t...this.getHistoryState(),\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tprivateCode,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.type !== EntityType.custom)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('startIntervalForHistoryEntry', historyEntry);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('preFinishLastInterval');\n\t\t\t},\n\n\t\t\tfinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\t\t\t},\n\n\t\t\tclearHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearHistory');\n\t\t\t},\n\n\t\t\tcreateSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tif (store.state.history.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet sentQueue = this.collectSentQueue(store);\n\n\t\t\t\tlet result = this.validateSentQueue({\n\t\t\t\t\tdateLog: store.state.reportState.dateLog,\n\t\t\t\t\thistoryPackage: sentQueue.history,\n\t\t\t\t\tchartPackage: sentQueue.chart,\n\t\t\t\t\tdesktopCode: store.state.config.desktopCode,\n\t\t\t\t});\n\n\t\t\t\tstore.commit('createSentQueue', {\n\t\t\t\t\t...this.getSentQueueState(),\n\t\t\t\t\t...result\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tclearSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearSentQueue');\n\t\t\t},\n\n\t\t\tclearStorage: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStorage');\n\t\t\t},\n\n\t\t\tsetComment: (store, payload) =>\n\t\t\t{\n\t\t\t\tconst entity = store.state.entity.find(entity => entity.privateCode === payload.privateCode);\n\n\t\t\t\tif (entity && (Type.isString(payload.comment) || Type.isNumber(payload.comment)))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setComment', {\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tcomment: payload.comment.toString()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('processUnfinishedEvents');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.reportState.dateLog = payload;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddPersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremovePersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(publicCode => publicCode !== payload)\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (state) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPersonal: (state) =>\n\t\t\t{\n\t\t\t\tstate.personal = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddEntity: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity = state.entity.filter(entity => entity.privateCode !== payload);\n\t\t\t\tstate.history = state.history.filter(entry => entry.privateCode !== payload);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(privateCode => privateCode !== payload);\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearEntities: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddHistory: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.history.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tstartIntervalForHistoryEntry: (state, historyEntry) =>\n\t\t\t{\n\t\t\t\thistoryEntry.time.push({\n\t\t\t\t\tstart: new Date(),\n\t\t\t\t\tfinish: null\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tfinishLastInterval: (state) =>\n\t\t\t{\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.finish = new Date();\n\t\t\t\t\t\t\ttime.preFinish = null;\n\n\t\t\t\t\t\t\tif (entry.type !== EntityType.absence)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn time;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\t\t\tstate.entity\n\t\t\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode)) {\n\t\t\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\t\t\ttime: Time.calculateInEntity(state, entity),\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t\t\t.forEach(entity => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (entity.comment.trim() === '') {\n\t\t\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0) {\n\t\t\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tstate.personal.push(entity.privateCode);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t})\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.preFinish = new Date();\n\t\t\t\t\t\t\tLogger.log('Last interval for ', entry.privateCode, ' preFinished');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t})\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tcreateSentQueue: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearSentQueue: (state) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStorage: (state) =>\n\t\t\t{\n\t\t\t\tconst getCodesToStore = privateCode => {\n\n\t\t\t\t\tconst entity = state.entity.find(entity => entity.privateCode === privateCode);\n\n\t\t\t\t\tif (Type.isObject(entity) && entity.hasOwnProperty('type'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entity.type !== EntityType.absence)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.personal = state.personal.filter(getCodesToStore);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(getCodesToStore);\n\n\t\t\t\tstate.entity = [];\n\t\t\t\tstate.history = [];\n\t\t\t\tstate.sentQueue = [];\n\n\t\t\t\tLogger.log('Local storage cleared');\n\t\t\t\tDebug.space();\n\t\t\t\tDebug.log('Local storage cleared');\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetComment: (state, payload) =>\n\t\t\t{\n\t\t\t\tpayload.entity.comment = payload.comment;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (state) =>\n\t\t\t{\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(interval => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tinterval.finish === null\n\t\t\t\t\t\t\t&& interval.preFinish !== null\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinterval.finish = interval.preFinish;\n\t\t\t\t\t\t\tinterval.preFinish = null;\n\n\t\t\t\t\t\t\tLogger.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\n\t\t\t\t\tentry.time = entry.time.filter(time => {\n\t\t\t\t\t\tif (time.finish != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.log('Unfinished interval has been removed');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval has been removed');\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetWorkingEntities(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tworkingEntities = workingEntities.map(entity => {\n\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t...entity,\n\t\t\t\t\t\ttime: Time.calculateInEntity(state, entity),\n\t\t\t\t\t}\n\n\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t{\n\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn workingEntity;\n\t\t\t\t});\n\n\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\tconst others = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (entity.comment.trim() === '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tconst otherCodes = others.map(entity => entity.privateCode);\n\t\t\t\tconst shortAbsenceCodes = shortAbsence.map(entity => entity.privateCode);\n\t\t\t\tconst excludeCodes = otherCodes.concat(shortAbsenceCodes);\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.filter(entity => !excludeCodes.includes(entity.privateCode))\n\t\t\t\t\t.sort((currentEntity, nextEntity) => nextEntity.time - currentEntity.time);\n\n\t\t\t\tif (Type.isArrayFilled(others))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.other.title,\n\t\t\t\t\t\ttime: Time.msToSec(state.config.otherTime) - otherTimeRest,\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.otherTime),\n\t\t\t\t\t\thint: EntityGroup.other.hint,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(shortAbsence))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.absence.title,\n\t\t\t\t\t\ttime: shortAbsence.reduce((sum, entity) => sum + entity.time, 0),\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.shortAbsenceTime),\n\t\t\t\t\t\thint: EntityGroup.absence.hint,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn workingEntities;\n\t\t\t},\n\t\t\tgetPersonalEntities(state)\n\t\t\t{\n\t\t\t\tlet personalEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn personalEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntity(state, entity),\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.sort((a, b) => b.time - a.time);\n\t\t\t},\n\t\t\tgetSiteDetailByPrivateCode: state => privateCode => {\n\t\t\t\tconst history = BX.util.objectClone(state.history);\n\n\t\t\t\tlet entries = history.filter(entry => entry.privateCode === privateCode);\n\n\t\t\t\tentries.map(entry => {\n\t\t\t\t\tentry.time = Time.calculateInEntry(entry);\n\t\t\t\t});\n\n\t\t\t\treturn entries;\n\t\t\t},\n\t\t\tgetChartData(state)\n\t\t\t{\n\t\t\t\tlet segments = [];\n\n\t\t\t\tconst reportDate = new Date(state.reportState.dateLog);\n\t\t\t\tconst emptyChart = [{\n\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t),\n\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t23,\n\t\t\t\t\t\t59\n\t\t\t\t\t),\n\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\tclickable: true,\n\t\t\t\t\tclickableHint: Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT'),\n\t\t\t\t\tstretchable: true,\n\t\t\t\t}];\n\n\t\t\t\tif (!Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tconst history = BX.util.objectClone(state.history);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tif (!Type.isArrayFilled(segments))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//fill the voids with inactive intervals\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//collapse intervals shorter than a minute\n\t\t\t\tsegments = segments.filter(interval => interval.finish - interval.start >= minute);\n\n\t\t\t\tlet chartData = [];\n\t\t\t\tlet lastSegmentType = null;\n\n\t\t\t\t//create data for the graph from intervals\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((segment, index) => {\n\t\t\t\t\t\tif (index > 0 && segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.start;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (segment.type !== lastSegmentType)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlastSegmentType = segment.type;\n\n\t\t\t\t\t\t\tchartData.push({\n\t\t\t\t\t\t\t\tstart: segment.start,\n\t\t\t\t\t\t\t\tfinish: segment.finish,\n\t\t\t\t\t\t\t\ttype: segment.type,\n\t\t\t\t\t\t\t\tclickable: (\n\t\t\t\t\t\t\t\t\t\tsegment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t\t&& segment.start < new Date()\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tclickableHint: segment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t? Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT')\n\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.finish;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn chartData;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidatePersonal(personal = '')\n\t{\n\t\tlet result = '';\n\n\t\tif (personal && (Type.isString(personal) || Type.isNumber(personal)))\n\t\t{\n\t\t\tresult = personal.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateEntity(entity = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(entity) && entity)\n\t\t{\n\t\t\tif (Type.isString(entity.type))\n\t\t\t{\n\t\t\t\tresult.type = entity.type;\n\t\t\t}\n\n\t\t\tif (Type.isString(entity.title) || Type.isNumber(entity.title))\n\t\t\t{\n\t\t\t\tresult.title = entity.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isString(entity.comment) || Type.isNumber(entity.comment))\n\t\t\t{\n\t\t\t\tresult.comment = entity.comment.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateHistory(historyEntry= {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(historyEntry) && historyEntry)\n\t\t{\n\t\t\tif (Type.isString(historyEntry.title) || Type.isNumber(historyEntry.title))\n\t\t\t{\n\t\t\t\tresult.title = historyEntry.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.type) && EntityType.hasOwnProperty(historyEntry.type))\n\t\t\t{\n\t\t\t\tresult.type = historyEntry.type;\n\n\t\t\t\tif (historyEntry.type === EntityType.site)\n\t\t\t\t{\n\t\t\t\t\tresult.siteUrl = historyEntry.siteUrl;\n\t\t\t\t\tresult.siteTitle = historyEntry.siteTitle.toString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(historyEntry.time))\n\t\t\t{\n\t\t\t\tresult.time = historyEntry.time;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateSentQueue(sentQueueItem = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(sentQueueItem) && sentQueueItem)\n\t\t{\n\t\t\tif (Type.isString(sentQueueItem.dateLog))\n\t\t\t{\n\t\t\t\tresult.dateLog = sentQueueItem.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.historyPackage))\n\t\t\t{\n\t\t\t\tresult.historyPackage = sentQueueItem.historyPackage;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.chartPackage))\n\t\t\t{\n\t\t\t\tresult.chartPackage = sentQueueItem.chartPackage;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.desktopCode))\n\t\t\t{\n\t\t\t\tresult.desktopCode = sentQueueItem.desktopCode;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetHistoryEntryByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.history.find(entry => entry.privateCode === privateCode);\n\t}\n\n\tgetHistoryEntryBySiteUrl(store, siteUrl)\n\t{\n\t\treturn store.state.history.find(entry => entry.siteUrl === siteUrl);\n\t}\n\n\tgetEntityByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.entity.find(entity => entity.privateCode === privateCode);\n\t}\n\n\tgetEntityByTitle(store, title)\n\t{\n\t\treturn store.state.entity.find(entity => entity.title === title);\n\t}\n\n\tgetDateLog()\n\t{\n\t\tconst date = new Date();\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst year = date.getFullYear();\n\t\tconst month = addZero(date.getMonth() + 1);\n\t\tconst day = addZero(date.getDate());\n\n\t\treturn year + '-' + month + '-' + day;\n\t}\n\n\tcollectSentQueue(store)\n\t{\n\t\tlet history = BX.util.objectClone(this.getGetters().getWorkingEntities(store.state));\n\n\t\thistory = history.map(entry => {\n\t\t\tif (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.other.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.other;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.other);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.other);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.absence.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.absenceShort;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absenceShort);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absenceShort);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (entry.type === EntityType.absence)\n\t\t\t{\n\t\t\t\tif (entry.extra.hasOwnProperty('timeStart'))\n\t\t\t\t{\n\t\t\t\t\tentry.timeStart = entry.extra.timeStart;\n\t\t\t\t}\n\n\t\t\t\tentry.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absence);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absence);\n\t\t\t}\n\n\t\t\tdelete entry.extra;\n\n\t\t\treturn entry;\n\t\t});\n\n\t\tLogger.log('History to send:', history);\n\t\tDebug.space();\n\t\tDebug.log('History to send:', history);\n\n\t\tlet chart = this.getGetters().getChartData(store.state).map(interval => {\n\t\t\treturn {\n\t\t\t\ttype: interval.type,\n\t\t\t\tstart: interval.start,\n\t\t\t\tfinish: interval.finish,\n\t\t\t}\n\t\t});\n\n\t\tLogger.log('ChartData to send:', chart);\n\n\t\treturn {\n\t\t\thistory,\n\t\t\tchart,\n\t\t};\n\t}\n}","import {EntityType} from 'timeman.const';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {Loc} from 'main.core';\n\nexport class Entity\n{\n\tconstructor(params = {})\n\t{\n\t\tswitch (params.type)\n\t\t{\n\t\t\tcase EntityType.site:\n\t\t\t\tthis.createSite(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.app:\n\t\t\t\tthis.createApp(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.absence:\n\t\t\t\tthis.createAbsence();\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.unknown:\n\t\t\t\tthis.createUnknown();\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.incognito:\n\t\t\t\tthis.createIncognito();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLogger.log('Caught:', this);\n\t\tDebug.log('Caught:', this);\n\t}\n\n\tcreateSite(params)\n\t{\n\t\tthis.type = EntityType.site;\n\n\t\tlet host;\n\t\ttry\n\t\t{\n\t\t\thost = new URL(params.url).host;\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\thost = params.url;\n\t\t}\n\n\t\tif (host === '')\n\t\t{\n\t\t\tlet hostFragments = params.url.split('/');\n\n\t\t\thost = hostFragments[hostFragments.length - 1] !== ''\n\t\t\t\t? hostFragments[hostFragments.length - 1]\n\t\t\t\t: params.url;\n\t\t}\n\t\telse if (host.split('.')[0] === 'www')\n\t\t{\n\t\t\thost = host.substring(4);\n\t\t}\n\n\t\tthis.title = host.toString();\n\t\tthis.siteUrl = params.url.toString();\n\t\tthis.siteTitle = params.title.toString();\n\t}\n\n\tcreateApp(params)\n\t{\n\t\tthis.type = EntityType.app;\n\t\tthis.title = params.name.toString();\n\n\t\tif (params.isBitrix24Desktop)\n\t\t{\n\t\t\tthis.isBitrix24Desktop = params.isBitrix24Desktop;\n\t\t}\n\t}\n\n\tcreateAbsence()\n\t{\n\t\tthis.type = EntityType.absence;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t}\n\n\tcreateUnknown()\n\t{\n\t\tthis.type = EntityType.unknown;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_UNKNOWN');\n\t}\n\n\tcreateIncognito()\n\t{\n\t\tthis.type = EntityType.incognito;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_INCOGNITO');\n\t}\n}","import {Logger} from './lib/logger';\nimport {Debug} from \"./lib/debug\";\nimport {Entity} from './model/entity';\nimport {EntityType} from 'timeman.const';\nimport {Loc} from 'main.core';\n\nclass EventHandler\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\t}\n\n\tcatch(process, name, title, url)\n\t{\n\t\tif (!this.enabled || !process)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.getEntityTypeByEvent({process, name, title, url});\n\n\t\tlet isBitrix24Desktop = false;\n\t\tif (type === EntityType.app)\n\t\t{\n\t\t\tif (['Bitrix24.exe', 'Bitrix24'].includes(this.getNameByProcess(process)))\n\t\t\t{\n\t\t\t\tisBitrix24Desktop = true;\n\t\t\t}\n\t\t}\n\n\t\tif (type !== EntityType.absence)\n\t\t{\n\t\t\tif (type === EntityType.app)\n\t\t\t{\n\t\t\t\tswitch (name)\n\t\t\t\t{\n\t\t\t\t\tcase 'Application Frame Host':\n\t\t\t\t\t\tname = title\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'StartMenuExperienceHost':\n\t\t\t\t\tcase 'Search application':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_START_ALIAS');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Windows Shell Experience Host':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_NOTIFICATIONS_ALIAS');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (name === '')\n\t\t\t{\n\t\t\t\tname = this.getNameByProcess(process);\n\t\t\t}\n\n\t\t\tif (!this.isNewEvent(name, url))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname,\n\t\t\t\turl\n\t\t\t};\n\t\t}\n\n\t\tthis.store.dispatch('monitor/addHistory', new Entity({type, name, title, url, isBitrix24Desktop}));\n\t}\n\n\tcatchAbsence(away)\n\t{\n\t\tif (away)\n\t\t{\n\t\t\tthis.store.dispatch(\n\t\t\t\t'monitor/addHistory',\n\t\t\t\tnew Entity({\n\t\t\t\t\ttype: EntityType.absence\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname: EntityType.absence,\n\t\t\t\turl: null\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isWorkingDayStarted() && this.isTrackerGetActiveAppAvailable())\n\t\t\t{\n\t\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t\t}\n\t\t}\n\t}\n\n\tcatchAppClose()\n\t{\n\t\tLogger.warn('Application shutdown recognized. The last interval is finished.');\n\t\tDebug.log('Application shutdown recognized. The last interval is finished.');\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\t}\n\n\tgetEntityTypeByEvent(event)\n\t{\n\t\tlet type = EntityType.unknown;\n\n\t\tif (event.url === 'unknown')\n\t\t{\n\t\t\ttype = EntityType.unknown;\n\t\t}\n\t\telse if (event.url === 'incognito')\n\t\t{\n\t\t\ttype = EntityType.incognito;\n\t\t}\n\t\telse if (event.url)\n\t\t{\n\t\t\ttype = EntityType.site\n\t\t}\n\t\telse if (event.process !== '')\n\t\t{\n\t\t\ttype = EntityType.app\n\t\t}\n\n\t\treturn type;\n\t}\n\n\tgetNameByProcess(process)\n\t{\n\t\tconst separator = (process.includes('/') ? '/' : '\\\\');\n\t\tconst path = process.split(separator);\n\n\t\treturn path[path.length - 1];\n\t}\n\n\tisNewEvent(name, url)\n\t{\n\t\tif (this.url === '')\n\t\t{\n\t\t\tif (this.lastCaught.name === name)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.lastCaught.name === name && this.lastCaught.url === url)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisTrackerGetActiveAppAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 56);\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserApp',\n\t\t\t(process, name, title, url) => this.catch(process, name, title, url)\n\t\t);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXExitApplication',\n\t\t\tthis.catchAppClose\n\t\t);\n\n\t\tif (this.isTrackerGetActiveAppAvailable())\n\t\t{\n\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t}\n\n\t\tthis.preFinishInterval = setInterval(\n\t\t\t() => this.store.dispatch('monitor/preFinishLastInterval'),\n\t\t\t60000\n\t\t);\n\n\t\tLogger.log('EventHandler started');\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\n\t\tLogger.log('EventHandler stopped');\n\t}\n}\n\nconst eventHandler = new EventHandler();\n\nexport {eventHandler as EventHandler};","import {Loc, Type} from 'main.core';\nimport {Monitor} from './monitor';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {UI} from 'ui.notification';\nimport {MonitorModel} from './model/monitor';\n\nclass Sender\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.attempt = 0;\n\t\tthis.resendTimeout = 5000;\n\t\tthis.resendTimeoutId = null;\n\t}\n\n\tsend()\n\t{\n\t\tLogger.warn('Trying to send history...');\n\n\t\tBX.ajax.runAction('bitrix:timeman.api.monitor.recordhistory', {\n\t\t\tdata: {\n\t\t\t\thistory: JSON.stringify(this.getSentQueue()),\n\t\t\t}\n\t\t})\n\t\t\t.then(result =>\n\t\t\t{\n\t\t\t\tDebug.log('History sent');\n\n\t\t\t\tif (result.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tLogger.warn('SUCCESS!');\n\n\t\t\t\t\tthis.attempt = 0;\n\n\t\t\t\t\tthis.afterSuccessSend();\n\n\t\t\t\t\tif (result.data.state === Monitor.getStateStop())\n\t\t\t\t\t{\n\t\t\t\t\t\tLogger.warn('Stopped after server response');\n\t\t\t\t\t\tDebug.log('Stopped after server response');\n\n\t\t\t\t\t\tMonitor.setState(result.data.state);\n\t\t\t\t\t\tMonitor.stop();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (result.data.enabled === Monitor.getStatusDisabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tLogger.warn('Disabled after server response');\n\t\t\t\t\t\tDebug.log('Disabled after server response');\n\n\t\t\t\t\t\tMonitor.disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tLogger.error('ERROR!');\n\t\t\t\t\tthis.attempt++\n\t\t\t\t\tthis.startSendingTimer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() =>\n\t\t\t{\n\t\t\t\tLogger.error('CONNECTION ERROR!');\n\n\t\t\t\tthis.attempt++\n\t\t\t\tthis.startSendingTimer();\n\t\t\t});\n\t}\n\n\tstartSendingTimer()\n\t{\n\t\tthis.resendTimeoutId = setTimeout(this.send.bind(this), this.getSendingDelay());\n\t\tLogger.log(`Next send in ${this.getSendingDelay() / 1000} seconds...`);\n\t}\n\n\tgetSendingDelay()\n\t{\n\t\treturn (this.attempt === 0 ? this.resendTimeout : this.resendTimeout * this.attempt);\n\t}\n\n\tgetSentQueue()\n\t{\n\t\treturn this.store.state.monitor.sentQueue;\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t\tthis.attempt = 0;\n\n\t\tif (Type.isArrayFilled(this.getSentQueue()))\n\t\t{\n\t\t\tLogger.log('Preparing to send old history...');\n\t\t\tthis.startSendingTimer();\n\t\t}\n\n\t\tLogger.log(\"Sender started\");\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\t\tthis.attempt = 0;\n\n\t\tclearTimeout(this.resendTimeoutId);\n\t\tLogger.log(\"Sender stopped\");\n\t}\n\n\tafterSuccessSend()\n\t{\n\t\tlet currentDateLog = new Date(MonitorModel.prototype.getDateLog());\n\t\tlet reportDateLog = new Date(this.store.state.monitor.reportState.dateLog);\n\n\t\tLogger.warn('History sent');\n\t\tDebug.space();\n\t\tDebug.log('History sent');\n\n\t\tMonitor.isHistorySent = true;\n\n\t\tBX.SidePanel.Instance.close();\n\n\t\tif (currentDateLog > reportDateLog)\n\t\t{\n\t\t\tLogger.warn('The next day came. Clearing the history and changing the date of the report.');\n\t\t\tDebug.log('The next day came. Clearing the history and changing the date of the report.');\n\n\t\t\tthis.store.dispatch('monitor/clearStorage')\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.store.dispatch('monitor/setDateLog', MonitorModel.prototype.getDateLog());\n\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_STORAGE_CLEARED'),\n\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\tposition: 'bottom-right',\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('History has been sent, report date has not changed.');\n\t\t\tDebug.log('History has been sent, report date has not changed.');\n\n\t\t\tthis.store.dispatch('monitor/clearSentQueue');\n\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SENT'),\n\t\t\t\tautoHideDelay: 5000,\n\t\t\t\tposition: 'bottom-right',\n\t\t\t});\n\t\t}\n\t}\n}\n\nconst sender = new Sender();\n\nexport {sender as Sender};","import {BitrixVue} from \"ui.vue\";\nimport {DayState} from \"timeman.const\";\nimport {MonitorModel} from \"../../model/monitor\";\nimport {PULL as Pull, PullClient} from \"pull.client\";\nimport {ZIndexManager} from \"main.core\";\n\nimport \"ui.icons\";\n\nexport const Control = BitrixVue.localComponent('bx-timeman-monitor-report-control', {\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tstatus: DayState.unknown,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tDayState: () => DayState,\n\t},\n\tmounted()\n\t{\n\t\tthis.getDayStatus();\n\n\t\tPull.subscribe({\n\t\t\ttype: PullClient.SubscriptionType.Server,\n\t\t\tmoduleId: 'timeman',\n\t\t\tcommand: 'changeDayState',\n\t\t\tcallback: (params, extra, command) => {\n\t\t\t\tthis.getDayStatus();\n\t\t\t}\n\t\t});\n\t},\n\tmethods:\n\t{\n\t\tgetDayStatus()\n\t\t{\n\t\t\tthis.callRestMethod('timeman.status', {}, this.setStatusByResult);\n\t\t},\n\t\tcloseDay()\n\t\t{\n\t\t\t//tmp hack to close day in desktop app via old popup and link this to a component update.\n\n\t\t\tlet dayControl = BX('tm-component-pwt-day-control');\n\t\t\tif (dayControl)\n\t\t\t{\n\t\t\t\tdayControl.style.display = 'block';\n\t\t\t\tdayControl.style.position = 'absolute';\n\t\t\t\tdayControl.style.left = 'calc(100vw - 115px)';\n\t\t\t\tdayControl.style.top = 0;\n\t\t\t}\n\n\t\t\tlet callPopup = BX('bx_tm');\n\n\t\t\tif (!dayControl && callPopup)\n\t\t\t{\n\t\t\t\tcallPopup.style.position = 'absolute';\n\t\t\t\tcallPopup.style.left = 'calc(100vw - 115px)';\n\t\t\t\tcallPopup.style.top = 0;\n\t\t\t}\n\n\t\t\tif (callPopup)\n\t\t\t{\n\t\t\t\tcallPopup.click();\n\n\t\t\t\tlet popup = BX('tm-popup');\n\n\t\t\t\tif (!ZIndexManager.getComponent(popup))\n\t\t\t\t{\n\t\t\t\t\tZIndexManager.register(popup);\n\t\t\t\t}\n\n\t\t\t\tZIndexManager.bringToFront(popup);\n\t\t\t}\n\n\t\t\t//this.callRestMethod('timeman.close', {}, this.setStatusByResult);\n\t\t},\n\t\topenDayAndSendHistory()\n\t\t{\n\t\t\tBX.Timeman.Monitor.send();\n\n\t\t\tthis.callRestMethod('timeman.open', {}, this.setStatusByResult);\n\t\t},\n\t\tcallRestMethod(method, params, callback)\n\t\t{\n\t\t\tthis.$Bitrix.RestClient.get().callMethod(method, params, callback)\n\t\t},\n\t\tsetStatusByResult(result)\n\t\t{\n\t\t\tif(!result.error())\n\t\t\t{\n\t\t\t\tthis.status = result.data().STATUS\n\t\t\t}\n\t\t},\n\t\tcloseReport()\n\t\t{\n\t\t\tBX.SidePanel.Instance.close();\n\t\t},\n\t\tisAllowedToStartDayAndSendHistory()\n\t\t{\n\t\t\tlet currentDateLog = new Date(MonitorModel.prototype.getDateLog());\n\t\t\tlet reportDateLog = new Date(this.$store.state.monitor.reportState.dateLog);\n\t\t\tlet isHistorySent = BX.Timeman.Monitor.isHistorySent;\n\n\t\t\tif (currentDateLog > reportDateLog && !isHistorySent)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-day-control-wrap\">\n\t\t\t<button\n\t\t\t\tv-if=\"this.status === DayState.unknown\"\n\t\t\t\tclass=\"ui-btn ui-btn-default ui-btn-wait ui-btn-disabled\"\n\t\t\t\tstyle=\"width: 130px\"\n\t\t\t/>\n\n\t\t\t<button\n\t\t\t\tv-if=\"\n\t\t\t\t\t\tthis.status === DayState.opened\n\t\t\t\t\t\t|| this.status === DayState.paused\n\t\t\t\t\t\t|| this.status === DayState.expired\n\t\t\t\t\t\"\n\t\t\t\t@click=\"closeDay\"\n\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-stop\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SEND_BUTTON') }}\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tv-if=\"\n\t\t\t\t\tthis.status === DayState.closed\n\t\t\t\t\t&& this.isAllowedToStartDayAndSendHistory()\n\t\t\t\t\"\n\t\t\t\t@click=\"openDayAndSendHistory\"\n\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-start\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_OPEN_SEND_BUTTON') }}\n\t\t\t</button>\n\n\t\t\t<button\n\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t@click=\"closeReport\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t</button>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {EntityType} from \"timeman.const\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {Type} from \"main.core\";\n\nimport \"ui.icons\";\nimport \"../popup.css\";\nimport \"ui.forms\";\nimport \"ui.layout-form\";\n\nexport const AddIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-addinterval', {\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tprops:\n\t{\n\t\tminStart: Date,\n\t\tmaxFinish: Date,\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tstart: this.getTime(this.minStart),\n\t\t\tfinish: this.getTime(this.maxFinish),\n\t\t\tcomment: '',\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.minStart.setSeconds(0);\n\t\tthis.minStart.setMilliseconds(0);\n\n\t\tthis.maxFinish.setSeconds(0);\n\t\tthis.maxFinish.setMilliseconds(0);\n\n\t\tif (this.createDateFromTimeString(this.finish) > this.saveMaxFinish)\n\t\t{\n\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tType: () => Type,\n\t\tsaveMaxFinish()\n\t\t{\n\t\t\tlet safeMaxFinish = this.maxFinish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeMaxFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeMaxFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeMaxFinish;\n\t\t},\n\t\tcanAddInterval()\n\t\t{\n\t\t\tif (this.title.trim() === '' || !this.start || !this.finish)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tconst isStartError = (start < this.minStart);\n\t\t\tconst isFinishError = (finish > this.saveMaxFinish);\n\t\t\tconst isIntervalsConfusedError = (start > finish);\n\n\t\t\treturn !(\n\t\t\t\tisStartError\n\t\t\t\t|| isFinishError\n\t\t\t\t|| isIntervalsConfusedError\n\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\taddInterval()\n\t\t{\n\t\t\tif(!this.canAddInterval)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tthis.$store.dispatch('monitor/addHistory', {\n\t\t\t\ttitle: this.title,\n\t\t\t\ttype: EntityType.custom,\n\t\t\t\tcomment: this.comment,\n\t\t\t\ttime: [{\n\t\t\t\t\tstart,\n\t\t\t\t\tpreFinish: null,\n\t\t\t\t\tfinish,\n\t\t\t\t}],\n\t\t\t});\n\n\t\t\tthis.addIntervalPopupClose();\n\t\t},\n\t\taddIntervalPopupClose()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupClose');\n\t\t},\n\t\taddIntervalPopupHide()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupHide');\n\t\t},\n\t\tinputStart(value)\n\t\t{\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\tif (start < this.minStart || value === '')\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (start < this.minStart)\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\t\tif (start >= finish || start >= this.getTime(this.saveMaxFinish))\n\t\t\t\t{\n\t\t\t\t\tstart.setHours(this.saveMaxFinish.getHours());\n\t\t\t\t\tstart.setMinutes(this.saveMaxFinish.getMinutes() - 1);\n\n\t\t\t\t\tthis.start = this.getTime(start);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.start = value;\n\t\t},\n\t\tinputFinish(value)\n\t\t{\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tif (finish > this.saveMaxFinish || value === '')\n\t\t\t{\n\t\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.start)\n\t\t\t{\n\t\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\t\tif (finish <= start || finish <= this.getTime(this.minStart))\n\t\t\t\t{\n\t\t\t\t\tfinish.setHours(start.getHours());\n\t\t\t\t\tfinish.setMinutes(start.getMinutes() + 1);\n\n\t\t\t\t\tthis.finish = this.getTime(finish);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.finish = value;\n\t\t},\n\t\tgetTime(date)\n\t\t{\n\t\t\tif (!Type.isDate(date))\n\t\t\t{\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\t\tconst hour = addZero(date.getHours());\n\t\t\tconst min = addZero(date.getMinutes());\n\n\t\t\treturn hour + ':' + min;\n\t\t},\n\t\tcreateDateFromTimeString(time)\n\t\t{\n\t\t\tconst baseDate = this.minStart;\n\n\t\t\tconst year = baseDate.getFullYear();\n\t\t\tconst month = baseDate.getMonth();\n\t\t\tconst day = baseDate.getDate();\n\n\t\t\tconst hourMin = time.split(':');\n\n\t\t\treturn new Date(\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t\tday,\n\t\t\t\thourMin[0],\n\t\t\t\thourMin[1],\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-wrap\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t  \n\t\t\t\t\t\t<div class=\"ui-form\">\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n                                      {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_TITLE') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_START') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIN_START_HINT')\n\t\t\t\t\t\t\t\t\t\t  \t\t\t.replace('#TIME#', TimeFormatter.toShort(minStart))\n\t\t\t\t\t\t\t\t\t\t  \t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"start\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputStart($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_FINISH') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MAX_FINISH_HINT')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', TimeFormatter.toShort(saveMaxFinish))\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"finish\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputFinish($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_COMMENT') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-no-resize\">\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"addInterval\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'ui-btn',\n\t\t\t\t\t\t\t\t'ui-btn-md',\n\t\t\t\t\t\t\t\t'ui-btn-primary',\n\t\t\t\t\t\t\t\t!canAddInterval ? 'ui-btn-disabled' : ''\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ADD_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"addIntervalPopupHide\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport \"./interval.css\"\n\nexport const Interval = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup-interval', {\n\tprops: {\n\t\tstart: Date,\n\t\tfinish: Date,\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tsafeFinish()\n\t\t{\n\t\t\tlet safeFinish = this.finish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeFinish;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tintervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', {\n\t\t\t\tstart: this.start,\n\t\t\t\tfinish: this.safeFinish,\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup-interval\">\n\t\t\t<div\n\t\t\t\t@click=\"intervalSelected\"\n                class=\"bx-timeman-monitor-report-popup-item\"\n\t\t\t>\n\t\t\t  <div class=\"bx-timeman-monitor-report-popup-title\">\n                {{ TimeFormatter.toShort(start) }} - {{ TimeFormatter.toShort(safeFinish) }}\n\t\t\t  </div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Interval} from \"./interval/interval\";\nimport {EntityGroup} from \"timeman.const\";\n\nimport \"ui.icons\";\nimport \"ui.alerts\";\nimport \"../popup.css\";\n\nexport const SelectIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup', {\n\tcomponents:\n\t{\n\t\tInterval,\n\t},\n\tcomputed:\n\t{\n\t\tinactiveIntervals()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData']\n\t\t\t\t.filter(interval =>\n\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tselectIntervalPopupCloseClick()\n\t\t{\n\t\t\tthis.$emit('selectIntervalPopupCloseClick');\n\t\t},\n\t\tonIntervalSelected(event)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', event)\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-monitor-report-popup\n\t\t\t\t\t\tpopup-window \n\t\t\t\t\t\tpopup-window-with-titlebar \n\t\t\t\t\t\tui-message-box \n\t\t\t\t\t\tui-message-box-medium-buttons \n\t\t\t\t\t\tpopup-window-fixed-width \n\t\t\t\t\t\tpopup-window-fixed-height\n\t\t\t\t\t\" \n\t\t\t\t\tstyle=\"padding: 0\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_SELECT_INTERVAL') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-report-popup-items-container\">\n\t\t\t\t\t\t\t<Interval\n\t\t\t\t\t\t\t\tv-for=\"interval of inactiveIntervals\"\n\t\t\t\t\t\t\t\t:key=\"interval.start.toString()\"\n\t\t\t\t\t\t\t\t:start=\"interval.start\"\n\t\t\t\t\t\t\t\t:finish=\"interval.finish\"\n\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"selectIntervalPopupCloseClick\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","export const Time = {\n\tcomputed:\n\t{\n\t\tfullTime()\n\t\t{\n\t\t\treturn this.workingTime + this.personalTime;\n\t\t},\n\t\tworkingTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getWorkingEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tpersonalTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getPersonalEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tinactiveTime()\n\t\t{\n\t\t\treturn 86400 - (this.workingTime + this.personalTime);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tformatSeconds(seconds)\n\t\t{\n\t\t\tif (seconds < 1)\n\t\t\t{\n\t\t\t\treturn 0 + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t\t}\n\t\t\telse if (seconds < 60)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_LESS_THAN_MINUTE');\n\t\t\t}\n\n\t\t\tlet hours = Math.floor(seconds / 3600);\n\t\t\tlet minutes = Math.round(seconds / 60 % 60);\n\n\t\t\tif (minutes === 60)\n\t\t\t{\n\t\t\t\thours += 1;\n\t\t\t\tminutes = 0;\n\t\t\t}\n\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thours = hours + ' ' +  this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_HOUR_SHORT');\n\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\tminutes = minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\n\t\t\t\t\treturn hours + ' ' + minutes;\n\t\t\t\t}\n\n\t\t\t\treturn hours;\n\t\t\t}\n\n\t\t\treturn minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t},\n\t\tcalculateEntryTime(entry)\n\t\t{\n\t\t\tconst time = entry.time\n\t\t\t\t.map(interval => {\n\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t\t})\n\t\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\t\treturn Math.round(time / 1000);\n\t\t},\n\t\tgetEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\treturn this.monitor.entity.find(entity => entity.privateCode === privateCode);\n\t\t}\n\t}\n};","import {Vuex} from 'ui.vuex';\nimport {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport \"ui.icons\";\nimport \"ui.vue.components.hint\";\n\nimport \"./item.css\"\n\nexport const Item = BitrixVue.localComponent('bx-timeman-monitor-report-group-item', {\n\tmixins: [Time],\n\tprops: [\n\t\t'readOnly',\n\t\t'group',\n\t\t'privateCode',\n\t\t'type',\n\t\t'title',\n\t\t'time',\n\t\t'allowedTime',\n\t\t'comment',\n\t\t'hint',\n\t],\n\tdata: function() {\n\t\treturn {\n\t\t\taction: '',\n\t\t\thintOptions: {\n\t\t\t\ttargetContainer: document.body\n\t\t\t}\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getSiteDetailByPrivateCode',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t},\n\tmethods:\n\t{\n\t\taddPersonal(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/addPersonal', privateCode);\n\t\t},\n\t\tremovePersonal(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/removePersonal', this.privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/removePersonal', privateCode);\n\t\t},\n\t\taddToStrictlyWorking(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveFromStrictlyWorking(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeFromStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeEntityByPrivateCode', privateCode);\n\t\t},\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.$emit('commentClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\ttime: this.time,\n\t\t\t\t\tcomment: this.comment,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t},\n\t\t\t\tonSaveComment: this.action,\n\t\t\t});\n\t\t},\n\t\tonDetailClick(event)\n\t\t{\n\t\t\tthis.$emit('detailClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tdetail: this.getSiteDetailByPrivateCode(this.privateCode),\n\t\t\t\t\ttime: this.time,\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-item-wrap\">\n\t\t\t<div class=\"bx-monitor-group-item\">\n\t\t\t\t<template v-if=\"type !== EntityType.group\">\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-if=\"type === EntityType.absence\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title': comment, \n\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title-small': !comment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"comment\">\n\t\t\t\t\t\t\t\t\t{{ comment }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t<template v-if=\"type !== EntityType.site || readOnly\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\t\t\t@click=\"onDetailClick\" \n\t\t\t\t\t\t\t\t\t\thref=\"#\" \n\t\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-site-title\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"group === EntityGroup.working.value\" \n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t  'ui-icon-service-imessage': comment, \n\t\t\t\t\t\t\t\t  'ui-icon-service-light-imessage': !comment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i \n\t\t\t\t\t\t\t\t\t@click=\"onCommentClick\" \n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: comment ? EntityGroup.working.primaryColor : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t{{ time }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"group === EntityGroup.personal.value && !readOnly\"\n\t\t\t\t\t\t@click=\"removePersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_WORKING') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tgroup === EntityGroup.working.value \n\t\t\t\t\t\t\t&& (type !== EntityType.unknown && type !== EntityType.custom) \n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"addPersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\" \t\t\t\t\t\t\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_PERSONAL') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\ttype === EntityType.custom\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"removeEntityByPrivateCode(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-danger-light ui-btn-round bx-monitor-group-btn-right\" \t\t\t\t\t\t\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_REMOVE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-full\">\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-menu\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t\t{{ time }} / {{ allowedTime }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Vuex} from 'ui.vuex';\nimport {Time} from \"../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport {Item} from './item/item';\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PopupManager} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport \"ui.icons\";\n\nimport \"./group.css\";\n\nexport const Group = BitrixVue.localComponent('bx-timeman-monitor-report-group', {\n\tcomponents:\n\t{\n\t\tItem,\n\t\tMountingPortal\n\t},\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tmixins: [Time],\n\tprops: ['group', 'readOnly'],\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tpopupInstance: null,\n\t\t\tpopupIdSelector: !!this.readOnly ? '#bx-timeman-pwt-popup-preview' :  '#bx-timeman-pwt-popup-editor',\n\t\t\tpopupContent: {\n\t\t\t\tprivateCode: '',\n\t\t\t\ttitle: '',\n\t\t\t\ttime: '',\n\t\t\t\tcomment: '',\n\t\t\t\tdetail: '',\n\t\t\t\ttype: '',\n\t\t\t\tonSaveComment: '',\n\t\t\t},\n\t\t\tcomment: '',\n\t\t\tisCommentPopup: false,\n\t\t\tisDetailPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getWorkingEntities',\n\t\t\t'getPersonalEntities',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t\tdisplayedGroup()\n\t\t{\n\t\t\tif (this.EntityGroup.getValues().includes(this.group))\n\t\t\t{\n\t\t\t\treturn this.EntityGroup[this.group];\n\t\t\t}\n\t\t},\n\t\titems()\n\t\t{\n\t\t\tswitch(this.displayedGroup.value)\n\t\t\t{\n\t\t\t\tcase EntityGroup.working.value:\n\t\t\t\t\treturn this.getWorkingEntities;\n\n\t\t\t\tcase EntityGroup.personal.value:\n\t\t\t\t\treturn this.getPersonalEntities;\n\t\t\t}\n\t\t},\n\t\ttime()\n\t\t{\n\t\t\tswitch(this.displayedGroup.value)\n\t\t\t{\n\t\t\t\tcase EntityGroup.working.value:\n\t\t\t\t\treturn this.workingTime;\n\n\t\t\t\tcase EntityGroup.personal.value:\n\t\t\t\t\treturn this.personalTime;\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.isCommentPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.type = event.content.type;\n\t\t\tthis.popupContent.onSaveComment = event.onSaveComment;\n\t\t\tthis.comment = event.content.comment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonDetailClick(event: BaseEvent)\n\t\t{\n\t\t\tthis.isDetailPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.detail = event.content.detail;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isDetailPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tsaveComment(privateCode)\n\t\t{\n\t\t\tif (this.comment.trim() === '' && this.popupContent.type === EntityType.absence)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/setComment', {\n\t\t\t\tprivateCode,\n\t\t\t\tcomment: this.comment\n\t\t\t});\n\n\t\t\tif (typeof this.popupContent.onSaveComment === 'function')\n\t\t\t{\n\t\t\t\tthis.popupContent.onSaveComment();\n\t\t\t}\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\taddNewLineToComment()\n\t\t{\n\t\t\tthis.comment += '\\n';\n\t\t},\n\t\tselectIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('selectIntervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\t\t  \n\t\t<div class=\"bx-timeman-monitor-report-group-wrap\">\t\t\t\n\t\t\t<div class=\"bx-monitor-group\">\t\t\t\t  \n\t\t\t\t<div class=\"bx-monitor-group-header\" v-bind:style=\"{ background: displayedGroup.secondaryColor }\">\n\t\t\t\t\t<div class=\"bx-monitor-group-title-container\">\n                      \t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title\">\n\t\t\t\t\t\t\t\t{{ displayedGroup.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-subtitle\">\n\t\t\t\t\t\t\t\t  {{ formatSeconds(time) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"(\n\t\t\t\t\t\t\t    this.displayedGroup.value === EntityGroup.working.value\n\t\t\t\t\t\t\t    && !readOnly\n\t\t\t\t\t\t\t)\"\n\t\t\t\t\t\t\t@click=\"selectIntervalClick\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light ui-btn-round bx-monitor-group-btn-add\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ '+ ' + $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_ADD') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!readOnly\" class=\"bx-monitor-group-subtitle-wrap\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-hint\">\n\t\t\t\t\t\t\t{{ displayedGroup.hint }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-monitor-group-content\" v-bind:style=\"{ background: displayedGroup.lightColor }\">\n\t\t\t\t\t<transition-group name=\"bx-monitor-group-item\" class=\"bx-monitor-group-content-wrap\">\n\t\t\t\t\t\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tv-for=\"item of items\"\n\t\t\t\t\t\t\t:key=\"item.privateCode ? item.privateCode : item.title\"\n\t\t\t\t\t\t\t:group=\"displayedGroup.value\"\n\t\t\t\t\t\t\t:privateCode=\"item.privateCode\"\n\t\t\t\t\t\t\t:type=\"item.type\"\n\t\t\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t\t\t:comment=\"item.comment\"\n\t\t\t\t\t\t\t:time=\"formatSeconds(item.time)\"\n\t\t\t\t\t\t\t:allowedTime=\"item.allowedTime ? formatSeconds(item.allowedTime) : null\"\n\t\t\t\t\t\t\t:readOnly=\"!!readOnly\"\n\t\t\t\t\t\t\t:hint=\"item.hint !== '' ? item.hint : null\"\n\t\t\t\t\t\t\t@commentClick=\"onCommentClick\"\n\t\t\t\t\t\t\t@detailClick=\"onDetailClick\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<mounting-portal :mount-to=\"popupIdSelector\" append v-if=\"popupInstance\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-wrap\">\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t\t\t{{ popupContent.title }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t\t\t{{ popupContent.time }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-input\"\n\t\t\t\t\t\t\t\tid=\"bx-timeman-monitor-popup-input-comment\"\n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup\"\n\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_ITEM_COMMENT')\"\n\t\t\t\t\t\t\t\t@keydown.enter.prevent.exact=\"saveComment(popupContent.privateCode)\"\n\t\t\t\t\t\t\t\t@keyup.shift.enter.exact=\"addNewLineToComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div v-if=\"isDetailPopup\" class=\"bx-timeman-monitor-popup-items-container\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tv-for=\"detailItem in popupContent.detail\" \n\t\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteTitle }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" :href=\"detailItem.siteUrl\" class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteUrl }}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-time\">\n\t\t\t\t\t\t\t\t\t\t{{ formatSeconds(detailItem.time) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup\" \n\t\t\t\t\t\t\t\t@click=\"saveComment(popupContent.privateCode)\" \n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-primary\"\n\t\t\t\t\t\t\t\t:class=\"{'ui-btn-disabled': (comment.trim() === '' && popupContent.type === EntityType.absence)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_OK') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button @click=\"popupInstance.destroy()\" class=\"ui-btn ui-btn-md ui-btn-light\">\n\t\t\t\t\t\t\t\t<span v-if=\"isCommentPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CANCEL') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isDetailPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CLOSE') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</mounting-portal>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nexport const Windows = BitrixVue.localComponent('bx-timeman-monitor-report-consent-windows', {\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent-windows\">\n\t\t\t<div class=\"ui-form bx-timeman-monitor-report-consent-form\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">Windows</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nexport const Mac = BitrixVue.localComponent('bx-timeman-monitor-report-consent-mac', {\n\t// language=Vue\n\ttemplate: `\n      <div class=\"bx-timeman-monitor-report-consent-mac\">\n\t\t  Mac\n      </div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Windows} from \"./windows/windows\";\nimport {Mac} from \"./mac/mac\";\n\nimport \"./consent.css\";\n\nexport const Consent = BitrixVue.localComponent('bx-timeman-monitor-report-consent', {\n\tcomponents:\n\t{\n\t\tWindows,\n\t\tMac,\n\t},\n\tcomputed:\n\t{\n\t\tisWindows()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac() && !this.isLinux());\n\t\t},\n\t\tisMac()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent\">\n\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t<div class=\"pwt-report-content\">\n                  \t<div class=\"\">\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-logo-container\">\n\t\t\t\t\t\t<svg class=\"bx-timeman-monitor-report-consent-logo\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Windows v-if=\"isWindows\"/>\n\t\t\t\t\t<Mac v-else-if=\"isMac\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n      </div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"timeman.component.timeline\";\nimport {EntityGroup} from \"timeman.const\";\nimport {Time} from \"../mixin/time\";\nimport {Type} from \"main.core\"\n\nimport \"./timeline.css\";\n\nexport const Timeline = BitrixVue.localComponent('bx-timeman-monitor-report-timeline', {\n\tprops: {\n\t\treadOnly: Boolean,\n\t},\n\tmixins: [Time],\n\tcomputed:\n\t{\n\t\tEntityGroup: () => EntityGroup,\n\t\tType: () => Type,\n\t\tchartData()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData'];\n\t\t},\n\t\tlegendData()\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttype: EntityGroup.working.value,\n\t\t\t\t\ttitle: EntityGroup.working.title + ': ' + this.formatSeconds(this.workingTime),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttype: EntityGroup.personal.value,\n\t\t\t\t\ttitle: EntityGroup.personal.title + ': ' + this.formatSeconds(this.personalTime),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t<bx-timeman-component-timeline\n\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t:chart=\"chartData\"\n\t\t\t\t:legend=\"legendData\"\n\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\t\t</div>\n\t`\n});","import {Type} from 'main.core';\nimport {Loc, Runtime, Tag} from 'main.core';\nimport {BitrixVue} from 'ui.vue';\nimport {EntityGroup} from 'timeman.const';\nimport {Control} from \"./control/control\";\nimport {AddIntervalPopup} from \"./popup/addintervalpopup/addintervalpopup\"\nimport {SelectIntervalPopup} from \"./popup/selectintervalpopup/selectIntervalpopup\"\nimport {Group} from \"./group/group\";\nimport {Consent} from \"./consent/consent\";\nimport {Timeline} from \"./timeline/timeline\";\nimport {MonitorModel} from \"../model/monitor\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {Loader} from 'main.loader';\n\nimport './report.css';\n\nclass Report\n{\n\tloadComponents()\n\t{\n\t\treturn Runtime.loadExtension([\n\t\t\t'ui.pinner',\n\t\t\t'ui.alerts',\n\t\t\t'timeman.component.day-control',\n\t\t]);\n\t}\n\n\topen(store)\n\t{\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 960,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tevents: {\n\t\t\t\tonOpen: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createEditor(store),\n\t\t\t\tonClose: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDestroy: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateEditor(store)\n\t{\n\t\tthis.loadComponents().then(() => this.createEditorApp(store));\n\t}\n\n\topenPreview(store)\n\t{\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-preview\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonLoad: () => this.createPreview(store),\n\t\t\t}\n\t\t});\n\t}\n\n\tcreatePreview(store)\n\t{\n\t\tthis.loadComponents().then(() => this.createPreviewApp(store));\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateEditorApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tAddIntervalPopup,\n\t\t\t\tSelectIntervalPopup,\n\t\t\t\tConsent,\n\t\t\t},\n\t\t\tstore,\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tnewInterval: null,\n\t\t\t\t\tshowSelectInternalPopup: false,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\tconst sentQueue = this.$store.state.monitor.sentQueue;\n\t\t\t\t\tconst sentQueueDateLog = Type.isArrayFilled(sentQueue) ? sentQueue[0].dateLog : '';\n\n\t\t\t\t\tconst history = this.$store.state.monitor.history;\n\t\t\t\t\tconst historyDateLog = Type.isArrayFilled(history) ? history[0].dateLog : '';\n\n\t\t\t\t\tif (Type.isStringFilled(sentQueueDateLog))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn DateFormatter.toLong(sentQueueDateLog);\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isStringFilled(historyDateLog))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn DateFormatter.toLong(historyDateLog);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn DateFormatter.toLong(new Date());\n\t\t\t\t},\n\t\t\t\tisAllowedToStartDay()\n\t\t\t\t{\n\t\t\t\t\tlet currentDateLog = new Date(MonitorModel.prototype.getDateLog());\n\t\t\t\t\tlet reportDateLog = new Date(this.$store.state.monitor.reportState.dateLog);\n\t\t\t\t\tlet isHistorySent = BX.Timeman.Monitor.isHistorySent;\n\n\t\t\t\t\tif (currentDateLog > reportDateLog && !isHistorySent)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tisPermissionGranted()\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tonIntervalClick(event)\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = event;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupHide()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = true;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalPopupCloseClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t<Consent v-if=\"!isPermissionGranted\"/>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"!isAllowedToStartDay\"\n\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-md ui-alert-danger ui-alert-icon-danger\">\n\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_NOT_SENT') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t@selectIntervalClick=\"onSelectIntervalClick\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.personal.value\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\tpwt-report-button-panel-wrapper \n\t\t\t\t\t\t\t\tui-pinner \n\t\t\t\t\t\t\t\tui-pinner-bottom \n\t\t\t\t\t\t\t\tui-pinner-full-width\" \n\t\t\t\t\t\t\tstyle=\"z-index: 0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t<bx-timeman-component-day-control\n\t\t\t\t\t\t\t\t\tv-if=\"isAllowedToStartDay\"\n\t\t\t\t\t\t\t\t\t:isButtonCloseHidden=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\" \n\t\t\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t\t\t\tonclick=\"BX.Timeman.Monitor.openReportPreview()\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-editor\" class=\"bx-timeman-pwt-popup\">\n\t\t\t\t\t\t\t<SelectIntervalPopup\n\t\t\t\t\t\t\t\tv-if=\"showSelectInternalPopup\"\n\t\t\t\t\t\t\t\t@selectIntervalPopupCloseClick=\"onSelectIntervalPopupCloseClick\"\n\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalClick\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<AddIntervalPopup\n\t\t\t\t\t\t\t\tv-if=\"newInterval\"\n\t\t\t\t\t\t\t\t:minStart=\"newInterval.start\"\n\t\t\t\t\t\t\t\t:maxFinish=\"newInterval.finish\"\n\t\t\t\t\t\t\t\t@addIntervalPopupClose=\"onAddIntervalPopupClose\"\n\t\t\t\t\t\t\t\t@addIntervalPopupHide=\"onAddIntervalPopupHide\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n                    </template>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n\n\tcreatePreviewApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tControl,\n\t\t\t},\n\t\t\tstore,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\tconst sentQueue = this.$store.state.monitor.sentQueue;\n\t\t\t\t\tconst sentQueueDateLog = Type.isArrayFilled(sentQueue) ? sentQueue[0].dateLog : '';\n\n\t\t\t\t\tconst history = this.$store.state.monitor.history;\n\t\t\t\t\tconst historyDateLog = Type.isArrayFilled(history) ? history[0].dateLog : '';\n\n\t\t\t\t\tif (Type.isStringFilled(sentQueueDateLog))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn DateFormatter.toLong(sentQueueDateLog);\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isStringFilled(historyDateLog))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn DateFormatter.toLong(historyDateLog);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn DateFormatter.toLong(new Date());\n\t\t\t\t}\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t<Control/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-preview\" class=\"bx-timeman-pwt-popup\"/>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst report = new Report();\n\nexport {report as Report};","import {Monitor} from \"../monitor\";\nimport {Logger} from './logger';\nimport {Debug} from './debug';\n\nexport class CommandHandler\n{\n\tconstructor(options = {})\n\t{\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'timeman';\n\t}\n\n\thandleChangeDayState(params)\n\t{\n\t\tMonitor.setState(params.state);\n\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\tLogger.warn('Ignore day state, monitor is disabled!');\n\t\t\tDebug.log('Ignore day state, monitor is disabled!');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (params.state === Monitor.getStateStart())\n\t\t{\n\t\t\tMonitor.start();\n\t\t}\n\t\telse if (params.state === Monitor.getStateStop())\n\t\t{\n\t\t\tMonitor.stop();\n\t\t}\n\t}\n\n\thandleChangeMonitorEnabled(params)\n\t{\n\t\tif (params.enabled === Monitor.getStatusEnabled())\n\t\t{\n\t\t\tLogger.warn('Enabled via API');\n\t\t\tDebug.log('Enabled via API');\n\n\t\t\tlocation.reload();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMonitor.stop();\n\t\t\tMonitor.disable();\n\n\t\t\tLogger.warn('Disabled via API');\n\t\t\tDebug.log('Disabled via API');\n\t\t}\n\t}\n\n\thandleChangeMonitorDebugEnabled(params)\n\t{\n\t\tif (params.enabled)\n\t\t{\n\t\t\tDebug.enable();\n\n\t\t\tLogger.warn('Debug mode enabled via API');\n\t\t\tDebug.log('Debug mode enabled via API');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Debug mode disabled via API');\n\t\t\tDebug.log('Debug mode disabled via API');\n\n\t\t\tDebug.disable();\n\t\t}\n\t}\n}","import {VuexBuilder} from \"ui.vue.vuex\";\nimport {MonitorModel} from './model/monitor';\nimport {EventHandler} from './eventhandler';\nimport {Sender} from './sender';\nimport {Report} from './report/report';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport {PULL as Pull} from 'pull.client';\nimport {CommandHandler} from './lib/commandhandler';\nimport {Loc} from 'main.core';\n\nclass Monitor\n{\n\tinit(options)\n\t{\n\t\tthis.enabled = options.enabled;\n\t\tthis.state = options.state;\n\t\tthis.isHistorySent = options.isHistorySent;\n\t\tthis.isAway = false;\n\t\tthis.isAppInit = false;\n\t\tthis.vuex = {};\n\n\t\tthis.defaultStorageConfig = {\n\t\t\tconfig: {\n\t\t\t\totherTime: options.otherTime,\n\t\t\t\tshortAbsenceTime: options.shortAbsenceTime,\n\t\t\t}\n\t\t};\n\n\t\tthis.dateFormat = options.dateFormat;\n\t\tthis.timeFormat = options.timeFormat;\n\n\t\tif (options.debugEnabled)\n\t\t{\n\t\t\tDebug.enable();\n\t\t}\n\n\t\tDebug.space();\n\t\tDebug.log('Desktop launched!');\n\n\t\tif (this.isEnabled() && Logger.isEnabled())\n\t\t{\n\t\t\tBXDesktopSystem.LogInfo = function() {};\n\t\t\tLogger.start();\n\t\t}\n\n\t\tDebug.log(`Enabled: ${this.enabled}`);\n\n\t\tLogger.warn('History sent status: ', this.isHistorySent);\n\t\tDebug.log(`History sent status: ${this.isHistorySent}`);\n\n\t\tthis.removeDeprecatedStorage();\n\n\t\tthis.initApp();\n\n\t\tPull.subscribe(new CommandHandler());\n\t}\n\n\tinitApp()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tthis.initStorage()\n\t\t\t\t.then(builder => {\n\t\t\t\t\tthis.vuex.store = builder.store;\n\t\t\t\t\tthis.vuex.models = builder.models;\n\t\t\t\t\tthis.vuex.builder = builder.builder;\n\n\t\t\t\t\tthis.vuex.store.dispatch('monitor/processUnfinishedEvents').then(() => {\n\t\t\t\t\t\tthis.initTracker(this.getStorage());\n\n\t\t\t\t\t\tthis.isAppInit = true;\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tconst errorMessage = \"PWT: Storage initialization error\";\n\n\t\t\t\t\tLogger.error(errorMessage);\n\t\t\t\t\tDebug.log(errorMessage);\n\n\t\t\t\t\treject();\n\t\t\t\t});\n\t\t});\n\t}\n\n\tinitStorage()\n\t{\n\t\treturn new VuexBuilder()\n\t\t\t.addModel(\n\t\t\t\tMonitorModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables(this.defaultStorageConfig)\n\t\t\t\t\t.useDatabase(true)\n\t\t\t)\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'timeman-pwt',\n\t\t\t\ttype: VuexBuilder.DatabaseType.indexedDb,\n\t\t\t\tsiteId: Loc.getMessage('SITE_ID'),\n\t\t\t\tuserId: Loc.getMessage('USER_ID')\n\t\t\t})\n\t\t\t.build();\n\t}\n\n\tgetStorage()\n\t{\n\t\treturn (this.vuex.hasOwnProperty('store') ? this.vuex.store : null);\n\t}\n\n\tinitTracker(store)\n\t{\n\t\tDateFormatter.init(this.dateFormat);\n\t\tTimeFormatter.init(this.timeFormat);\n\n\t\tEventHandler.init(store);\n\t\tSender.init(store);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserAway',\n\t\t\t(away) => this.onAway(away)\n\t\t);\n\n\t\tBX.MessengerWindow.addTab({\n\t\t\tid: 'timeman-pwt',\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE'),\n\t\t\torder: 540,\n\t\t\ttarget: false,\n\t\t\tevents: {\n\t\t\t\topen: () => this.openReport()\n\t\t\t}\n\t\t});\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXProtocolUrl',\n\t\t\tcommand => {\n\t\t\t\tif (command === 'timemanpwt')\n\t\t\t\t{\n\t\t\t\t\tif (!BX.MessengerCommon.isDesktop())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt', true);\n\t\t\t\t\tBX.desktop.setActiveWindow();\n\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.afterTrackerInit();\n\n\t\t\tif (this.isWorkingDayStarted())\n\t\t\t{\n\t\t\t\tthis.start();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tLogger.warn('Monitor: Zzz...');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Monitor is disabled');\n\t\t}\n\t}\n\n\topenReport()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tReport.open(this.getStorage());\n\t}\n\n\topenReportPreview()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tReport.openPreview(this.getStorage());\n\t}\n\n\tstart()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is disabled!\");\n\t\t\tDebug.log(\"Can't start, monitor is disabled!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isWorkingDayStarted())\n\t\t{\n\t\t\tLogger.warn(\"Can't start monitor, working day is stopped!\");\n\t\t\tDebug.log(\"Can't start monitor, working day is stopped!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isAppInit)\n\t\t{\n\t\t\tthis.initApp().then(() => this.startTracker());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.startTracker();\n\t\t}\n\t}\n\n\tstartTracker()\n\t{\n\t\tif (!this.isAppInit)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDebug.log('Monitor started');\n\t\tDebug.space();\n\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events started');\n\t\t\tBXDesktopSystem.TrackerStart();\n\t\t}\n\n\t\tthis.afterTrackerInit();\n\n\t\tBX.ajax.runAction('bitrix:timeman.api.monitor.setStatusWaitingData')\n\t\t\t.then(() => {\n\t\t\t\tthis.isHistorySent = false;\n\t\t\t});\n\n\t\tEventHandler.start();\n\t\tSender.start();\n\n\t\tLogger.warn('Monitor started');\n\t}\n\n\tstop()\n\t{\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events stopped');\n\t\t\tBXDesktopSystem.TrackerStop();\n\t\t}\n\n\t\tEventHandler.stop();\n\t\tSender.stop();\n\n\t\tLogger.warn('Monitor stopped');\n\t\tDebug.log('Monitor stopped');\n\t}\n\n\tisTrackerEventsApiAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 55);\n\t}\n\n\tonAway(away)\n\t{\n\t\tif (!this.isEnabled() || !this.isWorkingDayStarted())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (away && !this.isAway)\n\t\t{\n\t\t\tthis.isAway = true;\n\n\t\t\tLogger.warn('User AWAY');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User AWAY');\n\n\t\t\tthis.stop();\n\n\t\t\tEventHandler.catchAbsence(away);\n\t\t}\n\t\telse if (!away && this.isAway)\n\t\t{\n\t\t\tthis.isAway = false;\n\n\t\t\tLogger.warn('User RETURNED, continue monitoring...');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User RETURNED, continue monitoring...');\n\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\tsend()\n\t{\n\t\tif (!this.vuex.hasOwnProperty('store'))\n\t\t{\n\t\t\tLogger.warn('Unable to send report. Store is not initialized.');\n\t\t\tDebug.log('Unable to send report. Store is not initialized.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.vuex.store.dispatch('monitor/createSentQueue').then(() => Sender.send());\n\t}\n\n\tisWorkingDayStarted()\n\t{\n\t\treturn (this.getState() === this.getStateStart())\n\t}\n\n\tsetState(state)\n\t{\n\t\tthis.state = state;\n\t}\n\n\tgetState()\n\t{\n\t\treturn this.state;\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn (this.enabled === this.getStatusEnabled())\n\t}\n\n\tisInactive()\n\t{\n\t\treturn !(\n\t\t\tthis.isEnabled()\n\t\t\t|| this.getStorage() !== null\n\t\t\t|| this.isAppInit\n\t\t);\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = this.getStatusEnabled();\n\t}\n\n\tdisable()\n\t{\n\t\tthis.stop();\n\n\t\tBX.MessengerWindow.hideTab('timeman-pwt');\n\t\tthis.isAppInit = false;\n\t\tthis.vuex = {};\n\n\t\tthis.enabled = this.getStatusDisabled();\n\t}\n\n\tgetStatusEnabled()\n\t{\n\t\treturn 'Y';\n\t}\n\n\tgetStatusDisabled()\n\t{\n\t\treturn 'N';\n\t}\n\n\tgetStateStart()\n\t{\n\t\treturn 'start';\n\t}\n\n\tgetStateStop()\n\t{\n\t\treturn 'stop';\n\t}\n\n\tremoveDeprecatedStorage()\n\t{\n\t\tif (BX.desktop.getLocalConfig('bx_timeman_monitor_history'))\n\t\t{\n\t\t\tBX.desktop.removeLocalConfig('bx_timeman_monitor_history');\n\n\t\t\tLogger.log(`Deprecated storage has been cleared`);\n\t\t\tDebug.log(`Deprecated storage has been cleared`);\n\t\t}\n\t}\n\n\tafterTrackerInit()\n\t{\n\t\tlet currentDateLog = new Date(MonitorModel.prototype.getDateLog());\n\t\tlet reportDateLog = new Date(this.vuex.store.state.monitor.reportState.dateLog);\n\n\t\tif (\n\t\t\tcurrentDateLog > reportDateLog\n\t\t\t&& this.isHistorySent\n\t\t)\n\t\t{\n\t\t\tLogger.warn('The next day came. Clearing the history and changing the date of the report.');\n\t\t\tDebug.space();\n\t\t\tDebug.log('The next day came. Clearing the history and changing the date of the report.');\n\n\t\t\tthis.vuex.store.dispatch('monitor/clearStorage')\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.vuex.store.dispatch('monitor/setDateLog', MonitorModel.prototype.getDateLog());\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nconst monitor = new Monitor();\n\nexport {monitor as Monitor};"],"names":["Code","params","md5","join","sha1","BXDesktopSystem","createPrivate","UserAccount","UserOsMark","Date","now","createPublic","Time","state","entity","history","filter","entry","privateCode","map","calculateInEntry","reduce","sum","time","interval","finish","start","Math","round","date","addZero","num","hour","getHours","min","getMinutes","ms","Logger","storageKey","enabled","Monitor","isEnabled","window","localStorage","setItem","e","removeItem","getItem","console","log","info","warn","error","trace","logger","Debug","text","getLogMessage","BX","desktop","Loc","getMessage","substr","i","arguments","length","Error","message","stack","JSON","stringify","debug","MonitorModel","config","secret","createSecret","desktopCode","getDesktopCode","otherTime","getVariable","shortAbsenceTime","reportState","dateLog","getDateLog","personal","strictlyWorking","sentQueue","type","EntityType","unknown","title","publicCode","comment","extra","preFinish","historyPackage","chartPackage","setDateLog","store","payload","Type","isString","isDate","isNaN","commit","addPersonal","validatePersonal","removePersonal","addToStrictlyWorking","removeFromStrictlyWorking","clearStrictlyWorking","clearPersonal","addEntity","result","validateEntity","absence","custom","timestamp","timeStart","formatDateToTime","getEntityState","find","isBitrix24Cp","site","location","host","isBitrix24Desktop","app","removeEntityByPrivateCode","clearEntities","addHistory","validateHistory","historyEntry","incognito","getEntityByTitle","getActions","getHistoryEntryBySiteUrl","siteUrl","getHistoryEntryByPrivateCode","getHistoryState","preFinishLastInterval","finishLastInterval","clearHistory","createSentQueue","collectSentQueue","validateSentQueue","chart","getSentQueueState","clearSentQueue","clearStorage","setComment","isNumber","toString","processUnfinishedEvents","push","startIntervalForHistoryEntry","shortAbsenceTimeRest","msToSec","includes","calculateInEntity","sort","currentEntity","nextEntity","forEach","trim","getCodesToStore","isObject","hasOwnProperty","space","getWorkingEntities","workingEntities","workingEntity","hint","EntityGroup","otherTimeRest","others","shortAbsence","otherCodes","shortAbsenceCodes","excludeCodes","concat","isArrayFilled","group","other","allowedTime","getPersonalEntities","personalEntities","a","b","getSiteDetailByPrivateCode","util","objectClone","entries","getChartData","segments","reportDate","emptyChart","getFullYear","getMonth","getDate","inactive","value","clickable","clickableHint","stretchable","minute","working","currentSegment","nextSegment","firstSegmentFrom","unshift","index","setMinutes","lastSegmentTo","chartData","lastSegmentType","segment","siteTitle","sentQueueItem","year","month","day","getGetters","items","absenceShort","VuexBuilderModel","Entity","createSite","createApp","createAbsence","createUnknown","createIncognito","URL","url","err","hostFragments","split","substring","name","EventHandler","preFinishInterval","lastCaught","process","getEntityTypeByEvent","getNameByProcess","isNewEvent","dispatch","away","isWorkingDayStarted","isTrackerGetActiveAppAvailable","TrackerGetActiveApp","event","separator","path","getApiVersion","addCustomEvent","catch","catchAppClose","setInterval","eventHandler","Sender","attempt","resendTimeout","resendTimeoutId","ajax","runAction","data","getSentQueue","then","status","afterSuccessSend","getStateStop","setState","stop","getStatusDisabled","disable","startSendingTimer","setTimeout","send","bind","getSendingDelay","monitor","clearTimeout","currentDateLog","prototype","reportDateLog","isHistorySent","SidePanel","Instance","close","UI","Notification","Center","notify","content","autoHideDelay","position","sender","Control","BitrixVue","localComponent","DayState","computed","mounted","getDayStatus","Pull","subscribe","PullClient","SubscriptionType","Server","moduleId","command","callback","methods","callRestMethod","setStatusByResult","closeDay","dayControl","style","display","left","top","callPopup","click","popup","ZIndexManager","getComponent","register","bringToFront","openDayAndSendHistory","Timeman","method","$Bitrix","RestClient","get","callMethod","STATUS","closeReport","isAllowedToStartDayAndSendHistory","$store","template","AddIntervalPopup","directives","inserted","element","focus","props","minStart","maxFinish","getTime","created","setSeconds","setMilliseconds","createDateFromTimeString","saveMaxFinish","TimeFormatter","safeMaxFinish","currentDateTime","canAddInterval","isStartError","isFinishError","isIntervalsConfusedError","addInterval","addIntervalPopupClose","$emit","addIntervalPopupHide","inputStart","setHours","inputFinish","baseDate","hourMin","Interval","safeFinish","intervalSelected","SelectIntervalPopup","components","inactiveIntervals","getters","selectIntervalPopupCloseClick","onIntervalSelected","fullTime","workingTime","personalTime","inactiveTime","formatSeconds","seconds","hours","floor","minutes","calculateEntryTime","getEntityByPrivateCode","Item","mixins","action","hintOptions","targetContainer","document","body","Vuex","mapGetters","mapState","onCommentClick","onSaveComment","onDetailClick","detail","Group","MountingPortal","popupInstance","popupIdSelector","readOnly","popupContent","isCommentPopup","isDetailPopup","displayedGroup","getValues","destroy","PopupManager","create","id","autoHide","closeByEsc","bindOptions","events","onPopupDestroy","$nextTick","saveComment","addNewLineToComment","selectIntervalClick","Windows","Mac","Consent","isWindows","navigator","userAgent","toLowerCase","isMac","isLinux","Timeline","Boolean","legendData","onIntervalClick","Report","Runtime","loadExtension","open","contentCallback","getAppPlaceholder","animationDuration","width","onOpen","isFunction","BXIM","setPreventEsc","onLoad","createEditor","onClose","onDestroy","loadComponents","createEditorApp","label","createPreview","createPreviewApp","Tag","render","newInterval","showSelectInternalPopup","sentQueueDateLog","historyDateLog","isStringFilled","DateFormatter","toLong","isAllowedToStartDay","isPermissionGranted","onAddIntervalPopupHide","onAddIntervalPopupClose","onSelectIntervalClick","onSelectIntervalPopupCloseClick","mount","report","CommandHandler","getStateStart","getStatusEnabled","reload","enable","options","isAway","isAppInit","vuex","defaultStorageConfig","dateFormat","timeFormat","debugEnabled","LogInfo","removeDeprecatedStorage","initApp","Promise","resolve","reject","initStorage","builder","models","initTracker","getStorage","errorMessage","VuexBuilder","addModel","setVariables","useDatabase","setDatabaseConfig","DatabaseType","indexedDb","siteId","userId","build","init","onAway","MessengerWindow","addTab","order","target","openReport","MessengerCommon","isDesktop","changeTab","setActiveWindow","windowCommand","afterTrackerInit","openPreview","startTracker","isTrackerEventsApiAvailable","TrackerStart","TrackerStop","catchAbsence","getState","hideTab","getLocalConfig","removeLocalConfig"],"mappings":"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"}