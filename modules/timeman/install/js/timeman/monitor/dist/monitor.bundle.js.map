{"version":3,"file":"monitor.bundle.js","sources":["../src/model/utils/code.js","../src/model/utils/time.js","../src/lib/logger.js","../src/lib/debug.js","../src/lib/notification.js","../src/model/monitor.js","../src/model/entity.js","../src/eventhandler.js","../src/sender.js","../src/lib/commandhandler.js","../src/monitor.js"],"sourcesContent":["import {md5} from 'main.md5';\nimport {sha1} from 'main.sha1';\n\nexport class Code\n{\n\tstatic createPublic(...params)\n\t{\n\t\treturn md5(params.join(''));\n\t}\n\n\tstatic createPrivate(...params)\n\t{\n\t\treturn sha1(params.join(''));\n\t}\n\n\tstatic createSecret()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPrivate(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark(),\n\t\t\t+Date.now(),\n\t\t);\n\t}\n\n\tstatic getDesktopCode()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPublic(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark()\n\t\t);\n\t}\n}","export class Time\n{\n\tstatic calculateInEntityOnADate(state, entity, date)\n\t{\n\t\treturn state.history\n\t\t\t.filter(entry => (\n\t\t\t\tentry.privateCode === entity.privateCode\n\t\t\t\t&& entry.dateLog === date\n\t\t\t))\n\t\t\t.map(Time.calculateInEntry)\n\t\t\t.reduce((sum, time) => sum + time, 0);\n\t}\n\n\tstatic calculateInEntry(entry)\n\t{\n\t\tconst time = entry.time\n\t\t\t.map(interval => {\n\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t})\n\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\treturn Math.round(time / 1000);\n\t}\n\n\tstatic formatDateToTime(date: Date)\n\t{\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst hour = date.getHours();\n\t\tconst min = addZero(date.getMinutes());\n\n\t\treturn hour + ':' + min;\n\t}\n\n\tstatic msToSec(ms)\n\t{\n\t\treturn ms / 1000;\n\t}\n}","import {Type} from 'main.core';\nimport {Monitor} from '../monitor';\n\nclass Logger\n{\n\tconstructor()\n\t{\n\t\tthis.storageKey = 'bx-timeman-monitor-logger-enabled';\n\t\tthis.enabled = null;\n\t}\n\n\tstart()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.storageKey, 'Y');\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tstop()\n\t{\n\t\tthis.enabled = false;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.removeItem(this.storageKey);\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tisEnabled()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.enabled === null)\n\t\t{\n\t\t\tif (typeof window.localStorage !== 'undefined')\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tthis.enabled = window.localStorage.getItem(this.storageKey) === 'Y';\n\t\t\t\t}\n\t\t\t\tcatch(e) {}\n\t\t\t}\n\t\t}\n\n\t\treturn this.enabled === true;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.log(...params);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.info(...params);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.warn(...params);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tconsole.error(...params);\n\t}\n\n\ttrace(...params)\n\t{\n\t\tconsole.trace(...params);\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};","import {Loc} from 'main.core';\n\nclass Debug\n{\n\tconstructor()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn this.enabled;\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = true;\n\t}\n\n\tdisable()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = this.getLogMessage(...params);\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', text.substr(3));\n\t}\n\n\tspace()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', ' ');\n\t}\n\n\tgetLogMessage()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = '';\n\n\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tif(arguments[i] instanceof Error)\n\t\t\t{\n\t\t\t\ttext = arguments[i].message + \"\\n\" + arguments[i].stack\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | '+(typeof(arguments[i]) == 'object'? JSON.stringify(arguments[i]): arguments[i]);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | (circular structure)';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn text;\n\t}\n}\n\nlet debug = new Debug();\n\nexport {debug as Debug};","import {Type} from 'main.core';\n\nexport class Notification\n{\n\tconstructor(title, text, callback)\n\t{\n\t\tthis.title = title.toString();\n\t\tthis.text = text.toString();\n\n\t\tif (Type.isFunction(callback))\n\t\t{\n\t\t\tthis.callback = callback;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tshow()\n\t{\n\t\tBXIM.playSound('newMessage1');\n\n\t\tconst messageTemplate = BXIM.notify.createNotify({\n\t\t\tid: 0, type: 4,\n\t\t\tdate: new Date(),\n\t\t\tparams: {},\n\t\t\ttitle: this.title,\n\t\t\ttext: this.text,\n\t\t}, true);\n\n\t\tconst messageJs = `\n\t\t\tvar notify = BX.findChildByClassName(document.body, \"bx-notifier-item\");\n\t\t\t\n\t\t\tnotify.style.cursor = \"pointer\";\n\t\t\t\n\t\t\tBX.bind(notify, \"click\", function() {\n\t\t\t\tBX.desktop.onCustomEvent(\"main\", \"bxImClickPwtMessage\", []);\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(BX.findChildByClassName(notify, \"bx-notifier-item-delete\"), \"click\", function(event) { \n\t\t\t\tBX.desktop.windowCommand(\"close\"); \n\t\t\t\tBX.MessengerCommon.preventDefault(event); \n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(notify, \"contextmenu\", function() {\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t`;\n\n\t\tBXIM.desktop.openNewMessage('pwt' + (new Date), messageTemplate, messageJs);\n\n\t\tBX.desktop.addCustomEvent('bxImClickPwtMessage', () => this.click());\n\t}\n\n\tclick()\n\t{\n\t\tif (Type.isFunction(this.callback))\n\t\t{\n\t\t\tthis.callback();\n\t\t}\n\n\t\tBX.desktop.removeCustomEvents('bxImClickPwtMessage');\n\t}\n}","import {Loc, Type} from 'main.core';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {EntityType, EntityGroup} from 'timeman.const';\nimport {Code} from './utils/code';\nimport {Time} from './utils/time';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {DateFormatter} from 'timeman.dateformatter';\nimport {Notification} from \"../lib/notification\";\n\nexport class MonitorModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'monitor';\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 1000;\n\t}\n\n\tgetLoadTimeout()\n\t{\n\t\treturn false;\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tconfig: {\n\t\t\t\tsecret: Code.createSecret(),\n\t\t\t\tdesktopCode: Code.getDesktopCode(),\n\t\t\t\totherTime: this.getVariable('config.otherTime', 1800000),\n\t\t\t\tshortAbsenceTime: this.getVariable('config.shortAbsenceTime', 1800000),\n\t\t\t\tpausedUntil: null,\n\t\t\t\tlastSuccessfulSendDate: null,\n\t\t\t\tlastRemindDate: null,\n\t\t\t\tgrantingPermissionDate: null,\n\t\t\t},\n\t\t\treportState: {\n\t\t\t\tdateLog: this.getDateLog(),\n\t\t\t\tcomments: [],\n\t\t\t},\n\t\t\tpersonal: [],\n\t\t\tstrictlyWorking: [],\n\t\t\tentity: [],\n\t\t\thistory: [],\n\t\t\tsentQueue: [],\n\t\t};\n\t}\n\n\tgetEntityState()\n\t{\n\t\treturn {\n\t\t\ttype: EntityType.unknown,\n\t\t\ttitle: '',\n\t\t\tpublicCode: '',\n\t\t\tprivateCode: '',\n\t\t\tcomments: [],\n\t\t\textra: {},\n\t\t};\n\t}\n\n\tgetHistoryState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tprivateCode: '',\n\t\t\ttime: [{\n\t\t\t\tstart: new Date(),\n\t\t\t\tpreFinish: null,\n\t\t\t\tfinish: null\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetSentQueueState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tcomment: '',\n\t\t\thistoryPackage: [],\n\t\t\tchartPackage: [],\n\t\t\tdesktopCode: '',\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (Type.isString(payload))\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date(payload);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t\t\t&& payload.length === 10\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('setDateLog', payload);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trefreshDateLog: (store) =>\n\t\t\t{\n\t\t\t\tif (Type.isArrayFilled(store.state.history))\n\t\t\t\t{\n\t\t\t\t\tlet firstHistoryEntryDateLog = store.state.history[0].dateLog;\n\t\t\t\t\tthis.getActions().setDateLog(store, firstHistoryEntryDateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = this.getDateLog();\n\t\t\t\t\tthis.getActions().setDateLog(store, dateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${dateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${dateLog}`);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('setLastRemindDate', date);\n\t\t\t},\n\n\t\t\tgrantPermission: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('setGrantingPermissionDate', new Date());\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (store, date) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setLastSuccessfulSendDate', date);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\taddPersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addPersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\tremovePersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removePersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addToStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeFromStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStrictlyWorking');\n\t\t\t},\n\n\t\t\tclearPersonal: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPersonal');\n\t\t\t},\n\n\t\t\taddEntity: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validateEntity({...payload});\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type !== EntityType.absence\n\t\t\t\t\t&& result.type !== EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, store.state.config.secret);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tconst timestamp = +date;\n\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title, timestamp);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, timestamp, store.state.config.secret);\n\n\t\t\t\t\tif (result.type === EntityType.absence)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.extra = {\n\t\t\t\t\t\t\ttimeStart: date,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tresult.title +=\n\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t+ Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE_FROM_TIME')\n\t\t\t\t\t\t\t+ ' '\n\t\t\t\t\t\t\t+ Time.formatDateToTime(result.extra.timeStart)\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('addEntity', {\n\t\t\t\t\t...this.getEntityState(),\n\t\t\t\t\t...result,\n\t\t\t\t});\n\n\t\t\t\tif (!store.state.strictlyWorking.find(privateCode => privateCode === result.privateCode))\n\t\t\t\t{\n\t\t\t\t\tconst isBitrix24Cp = (\n\t\t\t\t\t\tresult.type === EntityType.site\n\t\t\t\t\t\t&& result.title === location.host\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isBitrix24Desktop = (\n\t\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t\t&& payload.isBitrix24Desktop\n\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tisBitrix24Cp\n\t\t\t\t\t\t|| isBitrix24Desktop\n\t\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('addToStrictlyWorking', result.privateCode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeEntityByPrivateCode', payload);\n\t\t\t},\n\n\t\t\tclearEntities: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearEntities');\n\t\t\t},\n\n\t\t\taddHistory: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\n\t\t\t\tconst result = this.validateHistory({...payload});\n\n\t\t\t\tlet entity;\n\t\t\t\tlet privateCode;\n\t\t\t\tlet historyEntry = null;\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t|| result.type === EntityType.site\n\t\t\t\t\t|| result.type === EntityType.unknown\n\t\t\t\t\t|| result.type === EntityType.incognito\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getEntityByTitle(store, result.title);\n\t\t\t\t\tprivateCode = (entity ? entity.privateCode : null);\n\n\t\t\t\t\tif (!privateCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tprivateCode = this.getActions().addEntity(store, payload).privateCode;\n\t\t\t\t\t}\n\n\t\t\t\t\thistoryEntry = (entity && entity.type === EntityType.site)\n\t\t\t\t\t\t? this.getHistoryEntryBySiteUrl(store, result.siteUrl)\n\t\t\t\t\t\t: this.getHistoryEntryByPrivateCode(store, privateCode);\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tresult.type === EntityType.absence\n\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getActions().addEntity(store, payload);\n\t\t\t\t\tprivateCode = entity.privateCode;\n\t\t\t\t}\n\n\t\t\t\tif (!historyEntry)\n\t\t\t\t{\n\t\t\t\t\tdelete result.title;\n\n\t\t\t\t\tstore.commit('addHistory', {\n\t\t\t\t\t\t...this.getHistoryState(),\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tprivateCode,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.type !== EntityType.custom)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('startIntervalForHistoryEntry', historyEntry);\n\t\t\t\t}\n\n\t\t\t\tlet lastRemindDate = store.state.config.lastRemindDate;\n\t\t\t\tlet canShowReminder = new Date(lastRemindDate) < new Date(this.getDateLog());\n\t\t\t\tlet isHistorySent = this.getGetters().isHistorySent(store.state);\n\n\t\t\t\tif (!lastRemindDate || (canShowReminder && !isHistorySent))\n\t\t\t\t{\n\t\t\t\t\tif (this.getGetters().getWorkingTimeForToday(store.state) >= 32400) //9 hour in seconds\n\t\t\t\t\t{\n\t\t\t\t\t\tnew Notification(\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TITLE'),\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TEXT'),\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t\t\t\t\tBX.desktop.changeTab('im');\n\t\t\t\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).show();\n\n\t\t\t\t\t\tstore.commit('setLastRemindDate', this.getDateLog());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('preFinishLastInterval');\n\t\t\t},\n\n\t\t\tfinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\t\t\t},\n\n\t\t\tclearHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearHistory');\n\t\t\t},\n\n\t\t\tcreateSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tif (store.state.history.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet sentQueue = this.collectSentQueue(store);\n\t\t\t\tlet reportComment = store.state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === store.state.reportState.dateLog);\n\n\t\t\t\tlet result = this.validateSentQueue({\n\t\t\t\t\tdateLog: store.state.reportState.dateLog,\n\t\t\t\t\tcomment: reportComment ? reportComment.text : '',\n\t\t\t\t\thistoryPackage: sentQueue.history,\n\t\t\t\t\tchartPackage: sentQueue.chart,\n\t\t\t\t\tdesktopCode: store.state.config.desktopCode,\n\t\t\t\t});\n\n\t\t\t\tstore.commit('createSentQueue', {\n\t\t\t\t\t...this.getSentQueueState(),\n\t\t\t\t\t...result\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tclearSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearSentQueue');\n\t\t\t},\n\n\t\t\tclearSentHistory: (store) =>\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = store.state.config.lastSuccessfulSendDate;\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (new Date(this.getDateLog()) > new Date(lastSuccessfulSendDate))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(lastSuccessfulSendDate));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(date));\n\t\t\t},\n\n\t\t\tsetComment: (store, payload) =>\n\t\t\t{\n\t\t\t\tconst entity = store.state.entity.find(entity => entity.privateCode === payload.privateCode);\n\n\t\t\t\tif (entity && (Type.isString(payload.comment) || Type.isNumber(payload.comment)))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setComment', {\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tcomment: payload.comment.toString()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetPausedUntil: (store, dateTime) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(dateTime)\n\t\t\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t\t\t&& dateTime > new Date()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setPausedUntil', dateTime);\n\n\t\t\t\t\tLogger.warn('Monitor paused until ', dateTime.toString());\n\t\t\t\t\tDebug.log('Monitor paused until ', dateTime.toString());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearPausedUntil: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPausedUntil');\n\t\t\t},\n\n\t\t\tsetReportComment: (store, comment) =>\n\t\t\t{\n\t\t\t\tstore.commit('setReportComment', comment.toString());\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('processUnfinishedEvents');\n\t\t\t},\n\n\t\t\tmigrateHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('migrateHistory');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.reportState.dateLog = payload;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastSuccessfulSendDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastRemindDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetGrantingPermissionDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.grantingPermissionDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddPersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremovePersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(publicCode => publicCode !== payload)\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (state) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPersonal: (state) =>\n\t\t\t{\n\t\t\t\tstate.personal = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddEntity: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity = state.entity.filter(entity => entity.privateCode !== payload);\n\t\t\t\tstate.history = state.history.filter(entry => entry.privateCode !== payload);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(privateCode => privateCode !== payload);\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearEntities: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddHistory: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.history.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tstartIntervalForHistoryEntry: (state, historyEntry) =>\n\t\t\t{\n\t\t\t\thistoryEntry.time.push({\n\t\t\t\t\tstart: new Date(),\n\t\t\t\t\tfinish: null\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tfinishLastInterval: (state) => {\n\t\t\t\tlet shouldRemoveTransitionInterval = false;\n\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.finish = new Date();\n\t\t\t\t\t\t\ttime.preFinish = null;\n\n\t\t\t\t\t\t\tif (new Date(time.start).getDate() !== time.finish.getDate())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshouldRemoveTransitionInterval = true;\n\t\t\t\t\t\t\t\ttime.markedForDeletion = true;\n\n\t\t\t\t\t\t\t\tLogger.warn('Interval marked for deletion');\n\t\t\t\t\t\t\t\tDebug.log('Interval marked for deletion');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (entry.type !== EntityType.absence)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn time;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\t\t\tstate.entity\n\t\t\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t\t\t.forEach(entity => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tstate.personal.push(entity.privateCode);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t}).filter(interval => !interval.markedForDeletion);\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tif (shouldRemoveTransitionInterval)\n\t\t\t\t{\n\t\t\t\t\tstate.history = state.history.filter(entry => Type.isArrayFilled(entry.time));\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.preFinish = new Date();\n\t\t\t\t\t\t\tLogger.log('Last interval for ', entry.privateCode, ' preFinished');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t})\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tcreateSentQueue: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearSentQueue: (state) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history\n\t\t\t\t\t.filter(entry => new Date(entry.dateLog) > date);\n\n\t\t\t\tconst getCodesToStore = privateCode => {\n\n\t\t\t\t\tconst entity = state.entity.find(entity => entity.privateCode === privateCode);\n\n\t\t\t\t\tif (Type.isObject(entity) && entity.hasOwnProperty('type'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entity.type !== EntityType.absence)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst isInUnsentHistory = state.history.find(entry => entry.privateCode === privateCode);\n\t\t\t\t\t\tif (isInUnsentHistory)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLogger.warn(`${entity.title} has been removed from personal`);\n\t\t\t\t\t\tDebug.log(`${entity.title} has been removed from personal`);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.personal = state.personal.filter(getCodesToStore);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(getCodesToStore);\n\n\t\t\t\tif (Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\tlet privateCodesToStore = [];\n\n\t\t\t\t\tstate.history.forEach(entry => {\n\t\t\t\t\t\tif (!privateCodesToStore.includes(entry.privateCode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprivateCodesToStore.push(entry.privateCode);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tstate.entity = state.entity\n\t\t\t\t\t\t.filter(entity => privateCodesToStore.includes(entity.privateCode));\n\n\t\t\t\t\tstate.entity = state.entity.map(entity => {\n\t\t\t\t\t\tentity.comments = entity.comments.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.entity = [];\n\t\t\t\t}\n\n\t\t\t\tstate.sentQueue = [];\n\t\t\t\tstate.reportState.comments = state.reportState.comments\n\t\t\t\t\t.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\tLogger.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\t\t\t\tDebug.space();\n\t\t\t\tDebug.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetComment: (state, payload) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = payload.entity.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = payload.comment;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpayload.entity.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext: payload.comment\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetReportComment: (state, text) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = state.reportState.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetPausedUntil: (state, dateTime) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = dateTime;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPausedUntil: (state) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = null;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (state) =>\n\t\t\t{\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(interval => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tinterval.finish === null\n\t\t\t\t\t\t\t&& interval.preFinish !== null\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinterval.finish = interval.preFinish;\n\t\t\t\t\t\t\tinterval.preFinish = null;\n\n\t\t\t\t\t\t\tLogger.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\n\t\t\t\t\tentry.time = entry.time.filter(time => {\n\t\t\t\t\t\tif (time.finish != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.log('Unfinished interval has been removed');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval has been removed');\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tmigrateHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity.map(entity => {\n\t\t\t\t\tif (!entity.hasOwnProperty('comments'))\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.comments = [];\n\n\t\t\t\t\t\tif (entity.comment)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentity.comments.push({\n\t\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\t\ttext: entity.comment,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete entity.comment;\n\n\t\t\t\t\treturn entity;\n\t\t\t\t});\n\n\t\t\t\tif (!state.reportState.hasOwnProperty('comments'))\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments = [];\n\n\t\t\t\t\tif (state.reportState.comment)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\ttext: state.reportState.comment,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete state.reportState.comment;\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetWorkingEntities(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0);\n\n\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\tconst others = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tconst otherCodes = others.map(entity => entity.privateCode);\n\t\t\t\tconst shortAbsenceCodes = shortAbsence.map(entity => entity.privateCode);\n\t\t\t\tconst excludeCodes = otherCodes.concat(shortAbsenceCodes);\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.filter(entity => !excludeCodes.includes(entity.privateCode))\n\t\t\t\t\t.sort((currentEntity, nextEntity) => nextEntity.time - currentEntity.time);\n\n\t\t\t\tif (Type.isArrayFilled(others))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.other.title,\n\t\t\t\t\t\ttime: Time.msToSec(state.config.otherTime) - otherTimeRest,\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.otherTime),\n\t\t\t\t\t\thint: EntityGroup.other.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.other.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(shortAbsence))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.absence.title,\n\t\t\t\t\t\ttime: shortAbsence.reduce((sum, entity) => sum + entity.time, 0),\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.shortAbsenceTime),\n\t\t\t\t\t\thint: EntityGroup.absence.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.absence.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn workingEntities;\n\t\t\t},\n\t\t\tgetPersonalEntities(state)\n\t\t\t{\n\t\t\t\tlet personalEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn personalEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0)\n\t\t\t\t\t.sort((a, b) => b.time - a.time);\n\t\t\t},\n\t\t\tgetSiteDetailByPrivateCode: state => privateCode => {\n\t\t\t\tconst history = BX.util.objectClone(state.history);\n\n\t\t\t\tlet entries = history.filter(entry => (\n\t\t\t\t\tentry.privateCode === privateCode\n\t\t\t\t\t&& entry.dateLog === state.reportState.dateLog\n\t\t\t\t));\n\n\t\t\t\tentries.map(entry => {\n\t\t\t\t\tentry.time = Time.calculateInEntry(entry);\n\t\t\t\t});\n\n\t\t\t\treturn entries;\n\t\t\t},\n\t\t\tgetChartData(state)\n\t\t\t{\n\t\t\t\tlet segments = [];\n\n\t\t\t\tconst reportDate = new Date(state.reportState.dateLog);\n\t\t\t\tconst emptyChart = [{\n\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t),\n\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t23,\n\t\t\t\t\t\t59\n\t\t\t\t\t),\n\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\tclickable: true,\n\t\t\t\t\tclickableHint: Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT'),\n\t\t\t\t\tstretchable: true,\n\t\t\t\t}];\n\n\t\t\t\tif (!Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tlet history = state.history.filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tif (!Type.isArrayFilled(segments))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//fill the voids with inactive intervals\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//collapse intervals shorter than a minute\n\t\t\t\tsegments = segments.filter(interval => interval.finish - interval.start >= minute);\n\n\t\t\t\tlet chartData = [];\n\t\t\t\tlet lastSegmentType = null;\n\n\t\t\t\t//create data for the graph from intervals\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((segment, index) => {\n\t\t\t\t\t\tif (index > 0 && segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.start;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (segment.type !== lastSegmentType)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlastSegmentType = segment.type;\n\n\t\t\t\t\t\t\tchartData.push({\n\t\t\t\t\t\t\t\tstart: segment.start,\n\t\t\t\t\t\t\t\tfinish: segment.finish,\n\t\t\t\t\t\t\t\ttype: segment.type,\n\t\t\t\t\t\t\t\tclickable: (\n\t\t\t\t\t\t\t\t\t\tsegment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t\t&& segment.start < new Date()\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tclickableHint: segment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t? Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT')\n\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.finish;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn chartData;\n\t\t\t},\n\t\t\tgetOverChartData: state => selectedPrivateCode =>\n\t\t\t{\n\t\t\t\tlet selectedCodes = [];\n\n\t\t\t\tlet workingEntities = [];\n\t\t\t\tif (\n\t\t\t\t\tselectedPrivateCode === EntityGroup.other.value\n\t\t\t\t\t|| selectedPrivateCode === EntityGroup.absence.value\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tworkingEntities = state.entity\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(entity => entity.time > 0);\n\t\t\t\t}\n\n\t\t\t\tif (selectedPrivateCode === EntityGroup.other.value)\n\t\t\t\t{\n\t\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\t\tconst others = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tothers.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse if (selectedPrivateCode === EntityGroup.absence.value)\n\t\t\t\t{\n\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tshortAbsence.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tselectedCodes = [selectedPrivateCode];\n\t\t\t\t}\n\n\t\t\t\tlet segments = [];\n\n\t\t\t\tlet history = BX.util.objectClone(state.history).filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.display = (selectedCodes.includes(entry.privateCode) ? 'selected' : 'transparent');\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish, display: entry.display });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn segments;\n\t\t\t},\n\t\t\tisHistorySent(state)\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = state.config.lastSuccessfulSendDate;\n\n\t\t\t\tlet hasUnsentHistory = (\n\t\t\t\t\tType.isArrayFilled(state.history)\n\t\t\t\t\t&& new Date(state.history[0].dateLog) < new Date(MonitorModel.prototype.getDateLog())\n\t\t\t\t);\n\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn !hasUnsentHistory;\n\t\t\t\t}\n\n\t\t\t\tlastSuccessfulSendDate = new Date(lastSuccessfulSendDate);\n\t\t\t\tlastSuccessfulSendDate.setHours(0);\n\t\t\t\tlastSuccessfulSendDate.setMinutes(0);\n\t\t\t\tlastSuccessfulSendDate.setSeconds(0);\n\t\t\t\tlastSuccessfulSendDate.setMilliseconds(0);\n\n\t\t\t\tlet currentDate = new Date();\n\t\t\t\tcurrentDate.setHours(0);\n\t\t\t\tcurrentDate.setMinutes(0);\n\t\t\t\tcurrentDate.setSeconds(0);\n\t\t\t\tcurrentDate.setMilliseconds(0);\n\n\t\t\t\treturn currentDate - lastSuccessfulSendDate <= 86400000\n\t\t\t\t\t|| !hasUnsentHistory;\n\t\t\t},\n\t\t\tgetWorkingTimeForToday(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, MonitorModel.prototype.getDateLog()),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.reduce((sum, entity) => sum + entity.time, 0);\n\t\t\t},\n\t\t\tgetReportComment(state)\n\t\t\t{\n\t\t\t\tlet reportComment = state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\treturn reportComment ? reportComment.text : '';\n\t\t\t},\n\t\t\thasActivityOtherThanBitrix24(state)\n\t\t\t{\n\t\t\t\tlet hasActivity = false;\n\n\t\t\t\tlet appSiteEntities = state.entity\n\t\t\t\t\t.filter(entity => entity.type === EntityType.app || entity.type === EntityType.site);\n\n\t\t\t\tif (Type.isArrayFilled(appSiteEntities) && appSiteEntities.length > 1)\n\t\t\t\t{\n\t\t\t\t\thasActivity = true;\n\t\t\t\t}\n\n\t\t\t\treturn hasActivity;\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidatePersonal(personal = '')\n\t{\n\t\tlet result = '';\n\n\t\tif (personal && (Type.isString(personal) || Type.isNumber(personal)))\n\t\t{\n\t\t\tresult = personal.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateEntity(entity = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(entity) && entity)\n\t\t{\n\t\t\tif (Type.isString(entity.type))\n\t\t\t{\n\t\t\t\tresult.type = entity.type;\n\t\t\t}\n\n\t\t\tif (Type.isString(entity.title) || Type.isNumber(entity.title))\n\t\t\t{\n\t\t\t\tresult.title = entity.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(entity.comments))\n\t\t\t{\n\t\t\t\tresult.comments = entity.comments;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateHistory(historyEntry= {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(historyEntry) && historyEntry)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isString(historyEntry.dateLog)\n\t\t\t\t&& Type.isDate(new Date(historyEntry.dateLog))\n\t\t\t\t&& !isNaN(new Date(historyEntry.dateLog))\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.dateLog = historyEntry.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.title) || Type.isNumber(historyEntry.title))\n\t\t\t{\n\t\t\t\tresult.title = historyEntry.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.type) && EntityType.hasOwnProperty(historyEntry.type))\n\t\t\t{\n\t\t\t\tresult.type = historyEntry.type;\n\n\t\t\t\tif (historyEntry.type === EntityType.site)\n\t\t\t\t{\n\t\t\t\t\tresult.siteUrl = historyEntry.siteUrl;\n\t\t\t\t\tresult.siteTitle = historyEntry.siteTitle.toString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(historyEntry.time))\n\t\t\t{\n\t\t\t\tresult.time = historyEntry.time;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateSentQueue(sentQueueItem = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(sentQueueItem) && sentQueueItem)\n\t\t{\n\t\t\tif (Type.isString(sentQueueItem.dateLog))\n\t\t\t{\n\t\t\t\tresult.dateLog = sentQueueItem.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.historyPackage))\n\t\t\t{\n\t\t\t\tresult.historyPackage = sentQueueItem.historyPackage;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.chartPackage))\n\t\t\t{\n\t\t\t\tresult.chartPackage = sentQueueItem.chartPackage;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.desktopCode))\n\t\t\t{\n\t\t\t\tresult.desktopCode = sentQueueItem.desktopCode;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.comment))\n\t\t\t{\n\t\t\t\tresult.comment = sentQueueItem.comment;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetHistoryEntryByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.privateCode === privateCode\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetHistoryEntryBySiteUrl(store, siteUrl)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.siteUrl === siteUrl\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetEntityByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.entity.find(entity => entity.privateCode === privateCode);\n\t}\n\n\tgetEntityByTitle(store, title)\n\t{\n\t\treturn store.state.entity.find(entity => entity.title === title);\n\t}\n\n\tgetCommentByEntity(state, entity)\n\t{\n\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\treturn comment ? comment.text : '';\n\t}\n\n\tgetDateLog()\n\t{\n\t\tconst date = new Date();\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst year = date.getFullYear();\n\t\tconst month = addZero(date.getMonth() + 1);\n\t\tconst day = addZero(date.getDate());\n\n\t\treturn year + '-' + month + '-' + day;\n\t}\n\n\tcollectSentQueue(store)\n\t{\n\t\tlet history = BX.util.objectClone(this.getGetters().getWorkingEntities(store.state));\n\n\t\thistory = history.map(entry => {\n\t\t\tif (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.other.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.other;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.other);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.other);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.absence.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.absenceShort;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absenceShort);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absenceShort);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (entry.type === EntityType.absence)\n\t\t\t{\n\t\t\t\tif (entry.extra.hasOwnProperty('timeStart'))\n\t\t\t\t{\n\t\t\t\t\tentry.timeStart = entry.extra.timeStart;\n\t\t\t\t}\n\n\t\t\t\tentry.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absence);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absence);\n\t\t\t}\n\n\t\t\tdelete entry.extra;\n\t\t\tdelete entry.hint;\n\n\t\t\treturn entry;\n\t\t});\n\n\t\tLogger.log('History to send:', history);\n\t\tDebug.space();\n\t\tDebug.log('History to send:', history);\n\n\t\tlet chart = this.getGetters().getChartData(store.state).map(interval => {\n\t\t\treturn {\n\t\t\t\ttype: interval.type,\n\t\t\t\tstart: interval.start,\n\t\t\t\tfinish: interval.finish,\n\t\t\t}\n\t\t});\n\n\t\tLogger.log('ChartData to send:', chart);\n\n\t\treturn {\n\t\t\thistory,\n\t\t\tchart,\n\t\t};\n\t}\n}","import {EntityType} from 'timeman.const';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {Loc} from 'main.core';\n\nexport class Entity\n{\n\tconstructor(params = {})\n\t{\n\t\tswitch (params.type)\n\t\t{\n\t\t\tcase EntityType.site:\n\t\t\t\tthis.createSite(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.app:\n\t\t\t\tthis.createApp(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.absence:\n\t\t\t\tthis.createAbsence();\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.unknown:\n\t\t\t\tthis.createUnknown(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.incognito:\n\t\t\t\tthis.createIncognito();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLogger.log('Caught:', this);\n\t\tDebug.log('Caught:', this);\n\t}\n\n\tcreateSite(params)\n\t{\n\t\tthis.type = EntityType.site;\n\n\t\tlet host;\n\t\ttry\n\t\t{\n\t\t\thost = new URL(params.url).host;\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\thost = params.url;\n\t\t}\n\n\t\tif (host === '')\n\t\t{\n\t\t\tlet hostFragments = params.url.split('/');\n\n\t\t\thost = hostFragments[hostFragments.length - 1] !== ''\n\t\t\t\t? hostFragments[hostFragments.length - 1]\n\t\t\t\t: params.url;\n\t\t}\n\t\telse if (host.split('.')[0] === 'www')\n\t\t{\n\t\t\thost = host.substring(4);\n\t\t}\n\n\t\tthis.title = host.toString();\n\t\tthis.siteUrl = params.url.toString();\n\t\tthis.siteTitle = params.title.toString();\n\t}\n\n\tcreateApp(params)\n\t{\n\t\tthis.type = EntityType.app;\n\t\tthis.title = params.name.toString();\n\n\t\tif (params.isBitrix24Desktop)\n\t\t{\n\t\t\tthis.isBitrix24Desktop = params.isBitrix24Desktop;\n\t\t}\n\t}\n\n\tcreateAbsence()\n\t{\n\t\tthis.type = EntityType.absence;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t}\n\n\tcreateUnknown(params)\n\t{\n\t\tthis.type = EntityType.unknown;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_UNKNOWN');\n\n\t\tthis.pureName = params.name;\n\t\tthis.pureTitle = params.title;\n\t}\n\n\tcreateIncognito()\n\t{\n\t\tthis.type = EntityType.incognito;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_INCOGNITO');\n\t}\n}","import {Logger} from './lib/logger';\nimport {Debug} from \"./lib/debug\";\nimport {Entity} from './model/entity';\nimport {EntityType} from 'timeman.const';\nimport {Loc} from 'main.core';\n\nclass EventHandler\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\t}\n\n\tcatch(process, name, title, url)\n\t{\n\t\tif (!this.enabled || !process)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.getEntityTypeByEvent({process, name, title, url});\n\n\t\tlet isBitrix24Desktop = false;\n\t\tif (type === EntityType.app)\n\t\t{\n\t\t\tif (['Bitrix24.exe', 'Bitrix24'].includes(this.getNameByProcess(process)))\n\t\t\t{\n\t\t\t\tisBitrix24Desktop = true;\n\t\t\t}\n\t\t}\n\n\t\tif (type !== EntityType.absence)\n\t\t{\n\t\t\tif (type === EntityType.app)\n\t\t\t{\n\t\t\t\tswitch (name)\n\t\t\t\t{\n\t\t\t\t\tcase 'Application Frame Host':\n\t\t\t\t\t\tname = title\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'StartMenuExperienceHost':\n\t\t\t\t\tcase 'Search application':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_START_ALIAS');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Windows Shell Experience Host':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_NOTIFICATIONS_ALIAS');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (name === '')\n\t\t\t{\n\t\t\t\tname = this.getNameByProcess(process);\n\t\t\t}\n\n\t\t\tif (!this.isNewEvent(name, url))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname,\n\t\t\t\turl\n\t\t\t};\n\t\t}\n\n\t\tthis.store.dispatch('monitor/addHistory', new Entity({type, name, title, url, isBitrix24Desktop}));\n\t}\n\n\tcatchAbsence(away)\n\t{\n\t\tif (away)\n\t\t{\n\t\t\tthis.store.dispatch(\n\t\t\t\t'monitor/addHistory',\n\t\t\t\tnew Entity({\n\t\t\t\t\ttype: EntityType.absence\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname: EntityType.absence,\n\t\t\t\turl: null\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isWorkingDayStarted() && this.isTrackerGetActiveAppAvailable())\n\t\t\t{\n\t\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t\t}\n\t\t}\n\t}\n\n\tcatchAppClose()\n\t{\n\t\tLogger.warn('Application shutdown recognized. The last interval is finished.');\n\t\tDebug.log('Application shutdown recognized. The last interval is finished.');\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\t}\n\n\tgetEntityTypeByEvent(event)\n\t{\n\t\tlet type = EntityType.unknown;\n\n\t\tif (event.url === 'unknown')\n\t\t{\n\t\t\ttype = EntityType.unknown;\n\t\t}\n\t\telse if (event.url === 'incognito')\n\t\t{\n\t\t\ttype = EntityType.incognito;\n\t\t}\n\t\telse if (event.url)\n\t\t{\n\t\t\ttype = EntityType.site\n\t\t}\n\t\telse if (event.process !== '')\n\t\t{\n\t\t\ttype = EntityType.app\n\t\t}\n\n\t\treturn type;\n\t}\n\n\tgetNameByProcess(process)\n\t{\n\t\tconst separator = (process.includes('/') ? '/' : '\\\\');\n\t\tconst path = process.split(separator);\n\n\t\treturn path[path.length - 1];\n\t}\n\n\tisNewEvent(name, url)\n\t{\n\t\tif (this.url === '')\n\t\t{\n\t\t\tif (this.lastCaught.name === name)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.lastCaught.name === name && this.lastCaught.url === url)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisTrackerGetActiveAppAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 56);\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserApp',\n\t\t\t(process, name, title, url) => this.catch(process, name, title, url)\n\t\t);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXExitApplication',\n\t\t\tthis.catchAppClose\n\t\t);\n\n\t\tif (this.isTrackerGetActiveAppAvailable())\n\t\t{\n\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t}\n\n\t\tthis.preFinishInterval = setInterval(\n\t\t\t() => this.store.dispatch('monitor/preFinishLastInterval'),\n\t\t\t60000\n\t\t);\n\n\t\tLogger.log('EventHandler started');\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\n\t\tLogger.log('EventHandler stopped');\n\t}\n}\n\nconst eventHandler = new EventHandler();\n\nexport {eventHandler as EventHandler};","import {Loc, Type} from 'main.core';\nimport {Monitor} from './monitor';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {UI} from 'ui.notification';\n\nclass Sender\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.attempt = 0;\n\t\tthis.resendTimeout = 5000;\n\t\tthis.resendTimeoutId = null;\n\t}\n\n\tsend()\n\t{\n\t\tLogger.warn('Trying to send history...');\n\n\t\tBX.ajax.runAction('bitrix:timeman.api.monitor.recordhistory', {\n\t\t\tdata: {\n\t\t\t\thistory: JSON.stringify(this.getSentQueue()),\n\t\t\t}\n\t\t})\n\t\t\t.then(result =>\n\t\t\t{\n\t\t\t\tDebug.log('History sent');\n\n\t\t\t\tif (result.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tLogger.warn('SUCCESS!');\n\n\t\t\t\t\tthis.attempt = 0;\n\n\t\t\t\t\tthis.afterSuccessSend();\n\n\t\t\t\t\tif (result.data.enabled === Monitor.getStatusDisabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tLogger.warn('Disabled after server response');\n\t\t\t\t\t\tDebug.log('Disabled after server response');\n\n\t\t\t\t\t\tMonitor.disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tLogger.error('ERROR!');\n\t\t\t\t\tthis.attempt++\n\t\t\t\t\tthis.startSendingTimer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() =>\n\t\t\t{\n\t\t\t\tLogger.error('CONNECTION ERROR!');\n\n\t\t\t\tthis.attempt++\n\t\t\t\tthis.startSendingTimer();\n\t\t\t});\n\t}\n\n\tstartSendingTimer()\n\t{\n\t\tthis.resendTimeoutId = setTimeout(this.send.bind(this), this.getSendingDelay());\n\t\tLogger.log(`Next send in ${this.getSendingDelay() / 1000} seconds...`);\n\t}\n\n\tgetSendingDelay()\n\t{\n\t\treturn (this.attempt === 0 ? this.resendTimeout : this.resendTimeout * this.attempt);\n\t}\n\n\tgetSentQueue()\n\t{\n\t\treturn this.store.state.monitor.sentQueue;\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t\tthis.attempt = 0;\n\n\t\tif (Type.isArrayFilled(this.getSentQueue()))\n\t\t{\n\t\t\tLogger.log('Preparing to send old history...');\n\t\t\tthis.startSendingTimer();\n\t\t}\n\n\t\tLogger.log(\"Sender started\");\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\t\tthis.attempt = 0;\n\n\t\tclearTimeout(this.resendTimeoutId);\n\t\tLogger.log(\"Sender stopped\");\n\t}\n\n\tafterSuccessSend()\n\t{\n\t\tLogger.warn('History sent');\n\t\tDebug.space();\n\t\tDebug.log('History sent');\n\n\t\tthis.store.dispatch(\n\t\t\t'monitor/setLastSuccessfulSendDate',\n\t\t\tnew Date(this.store.state.monitor.reportState.dateLog)\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.store.dispatch('monitor/clearSentHistory')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.store.dispatch('monitor/refreshDateLog');\n\t\t\t\t\t\tthis.store.dispatch('monitor/clearSentQueue');\n\n\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SENT'),\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nconst sender = new Sender();\n\nexport {sender as Sender};","import {Monitor} from \"../monitor\";\nimport {Logger} from './logger';\nimport {Debug} from './debug';\n\nexport class CommandHandler\n{\n\tconstructor(options = {})\n\t{\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'timeman';\n\t}\n\n\thandleChangeMonitorEnabled(params)\n\t{\n\t\tif (params.enabled === Monitor.getStatusEnabled())\n\t\t{\n\t\t\tLogger.warn('Enabled via API');\n\t\t\tDebug.log('Enabled via API');\n\n\t\t\tlocation.reload();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMonitor.stop();\n\t\t\tMonitor.disable();\n\n\t\t\tLogger.warn('Disabled via API');\n\t\t\tDebug.log('Disabled via API');\n\t\t}\n\t}\n\n\thandleChangeMonitorDebugEnabled(params)\n\t{\n\t\tif (params.enabled)\n\t\t{\n\t\t\tDebug.enable();\n\n\t\t\tLogger.warn('Debug mode enabled via API');\n\t\t\tDebug.log('Debug mode enabled via API');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Debug mode disabled via API');\n\t\t\tDebug.log('Debug mode disabled via API');\n\n\t\t\tDebug.disable();\n\t\t}\n\t}\n}","import {VuexBuilder} from \"ui.vue.vuex\";\nimport {MonitorModel} from './model/monitor';\nimport {EventHandler} from './eventhandler';\nimport {Sender} from './sender';\nimport {MonitorReport} from 'timeman.monitor-report';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport {PULL as Pull} from 'pull.client';\nimport {CommandHandler} from './lib/commandhandler';\nimport {Loc, Type} from 'main.core';\n\nclass Monitor\n{\n\tinit(options)\n\t{\n\t\tthis.enabled = options.enabled;\n\t\tthis.playTimeout = null;\n\t\tthis.isAway = false;\n\t\tthis.vuex = {};\n\n\t\tthis.defaultStorageConfig = {\n\t\t\tconfig: {\n\t\t\t\totherTime: options.otherTime,\n\t\t\t\tshortAbsenceTime: options.shortAbsenceTime,\n\t\t\t}\n\t\t};\n\n\t\tthis.dateFormat = options.dateFormat;\n\t\tthis.timeFormat = options.timeFormat;\n\n\t\tif (options.debugEnabled)\n\t\t{\n\t\t\tDebug.enable();\n\t\t}\n\n\t\tDebug.space();\n\t\tDebug.log('Desktop launched!');\n\n\t\tif (this.isEnabled() && Logger.isEnabled())\n\t\t{\n\t\t\tBXDesktopSystem.LogInfo = function() {};\n\t\t\tLogger.start();\n\t\t}\n\n\t\tDebug.log(`Enabled: ${this.enabled}`);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.initApp();\n\t\t}\n\n\t\tPull.subscribe(new CommandHandler());\n\t}\n\n\tinitApp()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew VuexBuilder()\n\t\t\t.addModel(\n\t\t\t\tMonitorModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables(this.defaultStorageConfig)\n\t\t\t\t\t.useDatabase(true)\n\t\t\t)\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'timeman-pwt',\n\t\t\t\ttype: VuexBuilder.DatabaseType.indexedDb,\n\t\t\t\tsiteId: Loc.getMessage('SITE_ID'),\n\t\t\t\tuserId: Loc.getMessage('USER_ID')\n\t\t\t})\n\t\t\t.build()\n\t\t\t.then(builder => {\n\t\t\t\tthis.vuex.store = builder.store;\n\n\t\t\t\tthis.getStorage().dispatch('monitor/processUnfinishedEvents')\n\t\t\t\t\t.then(() => this.initTracker(this.getStorage()));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconst errorMessage = \"PWT: Storage initialization error\";\n\n\t\t\t\tLogger.error(errorMessage);\n\t\t\t\tDebug.log(errorMessage);\n\t\t\t})\n\t\t;\n\t}\n\n\tinitTracker(store)\n\t{\n\t\tDateFormatter.init(this.dateFormat);\n\t\tTimeFormatter.init(this.timeFormat);\n\n\t\tEventHandler.init(store);\n\t\tSender.init(store);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserAway',\n\t\t\t(away) => this.onAway(away)\n\t\t);\n\n\t\tBX.MessengerWindow.addTab({\n\t\t\tid: 'timeman-pwt',\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE'),\n\t\t\torder: 540,\n\t\t\ttarget: false,\n\t\t\tevents: {\n\t\t\t\topen: () => this.openReport()\n\t\t\t}\n\t\t});\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXProtocolUrl',\n\t\t\tcommand => {\n\t\t\t\tif (command === 'timemanpwt')\n\t\t\t\t{\n\t\t\t\t\tif (!BX.MessengerCommon.isDesktop())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt', true);\n\t\t\t\t\tBX.desktop.setActiveWindow();\n\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.launch();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Monitor is disabled');\n\t\t}\n\t}\n\n\tlaunch()\n\t{\n\t\tif (this.isAway)\n\t\t{\n\t\t\tLogger.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\t\t\tDebug.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getStorage().state.monitor.config.grantingPermissionDate)\n\t\t{\n\t\t\tLogger.log('History access not provided. Monitor is not started.');\n\t\t\tDebug.log('History access not provided. Monitor is not started.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/migrateHistory').then(() => {\n\t\t\tthis.getStorage().dispatch('monitor/clearSentHistory').then(() => {\n\t\t\t\tthis.getStorage().dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\tif (this.isPaused())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isPauseRelevant())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\t\t\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\t\t\t\t\tthis.setPlayTimeout();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.clearPausedUntil().then(() => this.start());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.start();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstart()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is disabled!\");\n\t\t\tDebug.log(\"Can't start, monitor is disabled!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isPaused())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tDebug.log('Monitor started');\n\t\tDebug.space();\n\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events started');\n\t\t\tBXDesktopSystem.TrackerStart();\n\t\t}\n\n\t\tEventHandler.start();\n\t\tSender.start();\n\n\t\tLogger.warn('Monitor started');\n\t}\n\n\tstop()\n\t{\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events stopped');\n\t\t\tBXDesktopSystem.TrackerStop();\n\t\t}\n\n\t\tEventHandler.stop();\n\t\tSender.stop();\n\n\t\tLogger.warn('Monitor stopped');\n\t\tDebug.log('Monitor stopped');\n\t}\n\n\tpause()\n\t{\n\t\tthis.stop();\n\t\tthis.setPlayTimeout();\n\t}\n\n\tonAway(away)\n\t{\n\t\tif (!this.isEnabled() || this.isPaused())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (away && !this.isAway)\n\t\t{\n\t\t\tthis.isAway = true;\n\n\t\t\tLogger.warn('User AWAY');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User AWAY');\n\n\t\t\tthis.stop();\n\n\t\t\tEventHandler.catchAbsence(away);\n\t\t}\n\t\telse if (!away && this.isAway)\n\t\t{\n\t\t\tthis.isAway = false;\n\n\t\t\tLogger.warn('User RETURNED, continue monitoring...');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User RETURNED, continue monitoring...');\n\n\t\t\tthis.launch();\n\t\t}\n\t}\n\n\tsend()\n\t{\n\t\tif (!this.vuex.hasOwnProperty('store'))\n\t\t{\n\t\t\tLogger.warn('Unable to send report. Store is not initialized.');\n\t\t\tDebug.log('Unable to send report. Store is not initialized.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/createSentQueue').then(() => Sender.send());\n\t}\n\n\topenReport()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMonitorReport.open(this.getStorage());\n\t}\n\n\topenReportPreview()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tMonitorReport.openPreview(this.getStorage());\n\t}\n\n\tgetPausedUntilTime()\n\t{\n\t\treturn this.getStorage().state.monitor.config.pausedUntil;\n\t}\n\n\tclearPausedUntil()\n\t{\n\t\treturn this.getStorage().dispatch('monitor/clearPausedUntil');\n\t}\n\n\tisPaused()\n\t{\n\t\treturn !!this.getPausedUntilTime();\n\t}\n\n\tisPauseRelevant()\n\t{\n\t\treturn this.getPausedUntilTime() - new Date() > 0;\n\t}\n\n\tsetPlayTimeout()\n\t{\n\t\tLogger.warn(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\t\tDebug.log(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\n\t\tthis.playTimeout = setTimeout(\n\t\t\t() => this.clearPausedUntil().then(() => this.launch()),\n\t\t\tthis.getPausedUntilTime() - new Date()\n\t\t);\n\t}\n\n\tpauseUntil(dateTime: Date)\n\t{\n\t\tif (\n\t\t\tType.isDate(dateTime)\n\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t&& dateTime > new Date()\n\t\t)\n\t\t{\n\t\t\tthis.getStorage().dispatch('monitor/setPausedUntil', dateTime).then(() => this.pause());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow Error('Pause must be set as a date in the future');\n\t\t}\n\t}\n\n\tplay()\n\t{\n\t\tthis.playTimeout = null;\n\t\tthis.clearPausedUntil().then(() => this.launch());\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn (this.enabled === this.getStatusEnabled())\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = this.getStatusEnabled();\n\t}\n\n\tdisable()\n\t{\n\t\tthis.stop();\n\n\t\tBX.MessengerWindow.hideTab('timeman-pwt');\n\t\tthis.vuex = {};\n\n\t\tthis.enabled = this.getStatusDisabled();\n\t}\n\n\tgetStatusEnabled()\n\t{\n\t\treturn 'Y';\n\t}\n\n\tgetStatusDisabled()\n\t{\n\t\treturn 'N';\n\t}\n\n\tisTrackerEventsApiAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 55);\n\t}\n\n\tgetStorage()\n\t{\n\t\treturn (this.vuex.hasOwnProperty('store') ? this.vuex.store : null);\n\t}\n}\n\nconst monitor = new Monitor();\n\nexport {monitor as Monitor};"],"names":["Code","params","md5","join","sha1","BXDesktopSystem","createPrivate","UserAccount","UserOsMark","Date","now","createPublic","Time","state","entity","date","history","filter","entry","privateCode","dateLog","map","calculateInEntry","reduce","sum","time","interval","finish","start","Math","round","addZero","num","hour","getHours","min","getMinutes","ms","Logger","storageKey","enabled","Monitor","isEnabled","window","localStorage","setItem","e","removeItem","getItem","console","log","info","warn","error","trace","logger","Debug","text","getLogMessage","BX","desktop","Loc","getMessage","substr","i","arguments","length","Error","message","stack","JSON","stringify","debug","Notification","title","callback","toString","Type","isFunction","BXIM","playSound","messageTemplate","notify","createNotify","id","type","messageJs","openNewMessage","addCustomEvent","click","removeCustomEvents","MonitorModel","config","secret","createSecret","desktopCode","getDesktopCode","otherTime","getVariable","shortAbsenceTime","pausedUntil","lastSuccessfulSendDate","lastRemindDate","grantingPermissionDate","reportState","getDateLog","comments","personal","strictlyWorking","sentQueue","EntityType","unknown","publicCode","extra","preFinish","comment","historyPackage","chartPackage","setDateLog","store","payload","isString","isDate","isNaN","commit","refreshDateLog","isArrayFilled","firstHistoryEntryDateLog","getActions","setLastRemindDate","grantPermission","setLastSuccessfulSendDate","addPersonal","validatePersonal","removePersonal","addToStrictlyWorking","removeFromStrictlyWorking","clearStrictlyWorking","clearPersonal","addEntity","result","validateEntity","absence","custom","timestamp","timeStart","formatDateToTime","getEntityState","find","isBitrix24Cp","site","location","host","isBitrix24Desktop","app","removeEntityByPrivateCode","clearEntities","addHistory","validateHistory","historyEntry","incognito","getEntityByTitle","getHistoryEntryBySiteUrl","siteUrl","getHistoryEntryByPrivateCode","getHistoryState","canShowReminder","isHistorySent","getGetters","getWorkingTimeForToday","windowCommand","changeTab","MessengerWindow","show","preFinishLastInterval","finishLastInterval","clearHistory","createSentQueue","collectSentQueue","reportComment","validateSentQueue","chart","getSentQueueState","clearSentQueue","clearSentHistory","clearStorageBeforeDate","setComment","isNumber","setPausedUntil","dateTime","getTime","clearPausedUntil","setReportComment","processUnfinishedEvents","migrateHistory","setGrantingPermissionDate","push","startIntervalForHistoryEntry","shouldRemoveTransitionInterval","getDate","markedForDeletion","shortAbsenceTimeRest","msToSec","includes","calculateInEntityOnADate","sort","currentEntity","nextEntity","forEach","prototype","getCommentByEntity","trim","getCodesToStore","isObject","hasOwnProperty","isInUnsentHistory","privateCodesToStore","DateFormatter","space","getWorkingEntities","workingEntities","workingEntity","hint","EntityGroup","otherTimeRest","others","shortAbsence","otherCodes","shortAbsenceCodes","excludeCodes","concat","group","other","allowedTime","value","getPersonalEntities","personalEntities","a","b","getSiteDetailByPrivateCode","util","objectClone","entries","getChartData","segments","reportDate","emptyChart","getFullYear","getMonth","inactive","clickable","clickableHint","stretchable","minute","working","currentSegment","nextSegment","firstSegmentFrom","unshift","index","setMinutes","lastSegmentTo","chartData","lastSegmentType","segment","getOverChartData","selectedPrivateCode","selectedCodes","display","hasUnsentHistory","setHours","setSeconds","setMilliseconds","currentDate","getReportComment","hasActivityOtherThanBitrix24","hasActivity","appSiteEntities","siteTitle","sentQueueItem","year","month","day","items","absenceShort","VuexBuilderModel","Entity","createSite","createApp","createAbsence","createUnknown","createIncognito","URL","url","err","hostFragments","split","substring","name","pureName","pureTitle","EventHandler","preFinishInterval","lastCaught","process","getEntityTypeByEvent","getNameByProcess","isNewEvent","dispatch","away","isWorkingDayStarted","isTrackerGetActiveAppAvailable","TrackerGetActiveApp","event","separator","path","getApiVersion","catch","catchAppClose","setInterval","eventHandler","Sender","attempt","resendTimeout","resendTimeoutId","ajax","runAction","data","getSentQueue","then","status","afterSuccessSend","getStatusDisabled","disable","startSendingTimer","setTimeout","send","bind","getSendingDelay","monitor","clearTimeout","SidePanel","Instance","close","UI","Center","content","autoHideDelay","sender","CommandHandler","getStatusEnabled","reload","stop","enable","options","playTimeout","isAway","vuex","defaultStorageConfig","dateFormat","timeFormat","debugEnabled","LogInfo","initApp","Pull","subscribe","VuexBuilder","addModel","create","setVariables","useDatabase","setDatabaseConfig","DatabaseType","indexedDb","siteId","userId","build","builder","getStorage","initTracker","errorMessage","init","TimeFormatter","onAway","addTab","order","target","events","open","openReport","command","MessengerCommon","isDesktop","setActiveWindow","launch","isPaused","isPauseRelevant","setPlayTimeout","isTrackerEventsApiAvailable","TrackerStart","TrackerStop","catchAbsence","MonitorReport","openPreview","getPausedUntilTime","pause","hideTab"],"mappings":"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"}