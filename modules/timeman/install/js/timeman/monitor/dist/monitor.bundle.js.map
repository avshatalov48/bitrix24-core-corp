{"version":3,"file":"monitor.bundle.js","sources":["../src/model/utils/code.js","../src/model/utils/time.js","../src/lib/logger.js","../src/lib/debug.js","../src/lib/notification.js","../src/model/monitor.js","../src/model/entity.js","../src/eventhandler.js","../src/sender.js","../src/report/popup/addintervalpopup/addintervalpopup.js","../src/report/popup/selectintervalpopup/interval/interval.js","../src/report/popup/selectintervalpopup/selectIntervalpopup.js","../src/report/mixin/time.js","../src/report/group/item/item.js","../src/report/group/group.js","../src/report/consent/windows/windows.js","../src/report/consent/mac/mac.js","../src/report/consent/consent.js","../src/report/timeline/timeline.js","../src/report/popup/pausepopup/pausepopup.js","../src/report/popup/confirmpopup/confirmpopup.js","../src/report/report.js","../src/lib/commandhandler.js","../src/monitor.js"],"sourcesContent":["import {md5} from 'main.md5';\nimport {sha1} from 'main.sha1';\n\nexport class Code\n{\n\tstatic createPublic(...params)\n\t{\n\t\treturn md5(params.join(''));\n\t}\n\n\tstatic createPrivate(...params)\n\t{\n\t\treturn sha1(params.join(''));\n\t}\n\n\tstatic createSecret()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPrivate(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark(),\n\t\t\t+Date.now(),\n\t\t);\n\t}\n\n\tstatic getDesktopCode()\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Code.createPublic(\n\t\t\tBXDesktopSystem.UserAccount(),\n\t\t\tBXDesktopSystem.UserOsMark()\n\t\t);\n\t}\n}","export class Time\n{\n\tstatic calculateInEntityOnADate(state, entity, date)\n\t{\n\t\treturn state.history\n\t\t\t.filter(entry => (\n\t\t\t\tentry.privateCode === entity.privateCode\n\t\t\t\t&& entry.dateLog === date\n\t\t\t))\n\t\t\t.map(Time.calculateInEntry)\n\t\t\t.reduce((sum, time) => sum + time, 0);\n\t}\n\n\tstatic calculateInEntry(entry)\n\t{\n\t\tconst time = entry.time\n\t\t\t.map(interval => {\n\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t})\n\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\treturn Math.round(time / 1000);\n\t}\n\n\tstatic formatDateToTime(date: Date)\n\t{\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst hour = date.getHours();\n\t\tconst min = addZero(date.getMinutes());\n\n\t\treturn hour + ':' + min;\n\t}\n\n\tstatic msToSec(ms)\n\t{\n\t\treturn ms / 1000;\n\t}\n}","import {Type} from 'main.core';\nimport {Monitor} from '../monitor';\n\nclass Logger\n{\n\tconstructor()\n\t{\n\t\tthis.storageKey = 'bx-timeman-monitor-logger-enabled';\n\t\tthis.enabled = null;\n\t}\n\n\tstart()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.setItem(this.storageKey, 'Y');\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tstop()\n\t{\n\t\tthis.enabled = false;\n\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\twindow.localStorage.removeItem(this.storageKey);\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\n\t\treturn this.enabled;\n\t}\n\n\tisEnabled()\n\t{\n\t\tif (!Monitor.isEnabled())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.enabled === null)\n\t\t{\n\t\t\tif (typeof window.localStorage !== 'undefined')\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tthis.enabled = window.localStorage.getItem(this.storageKey) === 'Y';\n\t\t\t\t}\n\t\t\t\tcatch(e) {}\n\t\t\t}\n\t\t}\n\n\t\treturn this.enabled === true;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.log(...params);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.info(...params);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tconsole.warn(...params);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tconsole.error(...params);\n\t}\n\n\ttrace(...params)\n\t{\n\t\tconsole.trace(...params);\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};","import {Loc} from 'main.core';\n\nclass Debug\n{\n\tconstructor()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn this.enabled;\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = true;\n\t}\n\n\tdisable()\n\t{\n\t\tthis.enabled = false;\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = this.getLogMessage(...params);\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', text.substr(3));\n\t}\n\n\tspace()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.desktop.log(Loc.getMessage('USER_ID') + '.monitor.log', ' ');\n\t}\n\n\tgetLogMessage()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet text = '';\n\n\t\tfor (let i = 0; i < arguments.length; i++)\n\t\t{\n\t\t\tif(arguments[i] instanceof Error)\n\t\t\t{\n\t\t\t\ttext = arguments[i].message + \"\\n\" + arguments[i].stack\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | '+(typeof(arguments[i]) == 'object'? JSON.stringify(arguments[i]): arguments[i]);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\ttext = text+' | (circular structure)';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn text;\n\t}\n}\n\nlet debug = new Debug();\n\nexport {debug as Debug};","import {Type} from 'main.core';\n\nexport class Notification\n{\n\tconstructor(title, text, callback)\n\t{\n\t\tthis.title = title.toString();\n\t\tthis.text = text.toString();\n\n\t\tif (Type.isFunction(callback))\n\t\t{\n\t\t\tthis.callback = callback;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tshow()\n\t{\n\t\tBXIM.playSound('newMessage1');\n\n\t\tconst messageTemplate = BXIM.notify.createNotify({\n\t\t\tid: 0, type: 4,\n\t\t\tdate: new Date(),\n\t\t\tparams: {},\n\t\t\ttitle: this.title,\n\t\t\ttext: this.text,\n\t\t}, true);\n\n\t\tconst messageJs = `\n\t\t\tvar notify = BX.findChildByClassName(document.body, \"bx-notifier-item\");\n\t\t\t\n\t\t\tnotify.style.cursor = \"pointer\";\n\t\t\t\n\t\t\tBX.bind(notify, \"click\", function() {\n\t\t\t\tBX.desktop.onCustomEvent(\"main\", \"bxImClickPwtMessage\", []);\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(BX.findChildByClassName(notify, \"bx-notifier-item-delete\"), \"click\", function(event) { \n\t\t\t\tBX.desktop.windowCommand(\"close\"); \n\t\t\t\tBX.MessengerCommon.preventDefault(event); \n\t\t\t});\n\t\t\t\n\t\t\tBX.bind(notify, \"contextmenu\", function() {\n\t\t\t\tBX.desktop.windowCommand(\"close\")\n\t\t\t});\n\t\t`;\n\n\t\tBXIM.desktop.openNewMessage('pwt' + (new Date), messageTemplate, messageJs);\n\n\t\tBX.desktop.addCustomEvent('bxImClickPwtMessage', () => this.click());\n\t}\n\n\tclick()\n\t{\n\t\tif (Type.isFunction(this.callback))\n\t\t{\n\t\t\tthis.callback();\n\t\t}\n\n\t\tBX.desktop.removeCustomEvents('bxImClickPwtMessage');\n\t}\n}","import {Loc, Type} from 'main.core';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {EntityType, EntityGroup} from 'timeman.const';\nimport {Code} from './utils/code';\nimport {Time} from './utils/time';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {DateFormatter} from 'timeman.dateformatter';\nimport {Notification} from \"../lib/notification\";\n\nexport class MonitorModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'monitor';\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 1000;\n\t}\n\n\tgetLoadTimeout()\n\t{\n\t\treturn false;\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tconfig: {\n\t\t\t\tsecret: Code.createSecret(),\n\t\t\t\tdesktopCode: Code.getDesktopCode(),\n\t\t\t\totherTime: this.getVariable('config.otherTime', 1800000),\n\t\t\t\tshortAbsenceTime: this.getVariable('config.shortAbsenceTime', 1800000),\n\t\t\t\tpausedUntil: null,\n\t\t\t\tlastSuccessfulSendDate: null,\n\t\t\t\tlastRemindDate: null,\n\t\t\t},\n\t\t\treportState: {\n\t\t\t\tdateLog: this.getDateLog(),\n\t\t\t\tcomments: [],\n\t\t\t},\n\t\t\tpersonal: [],\n\t\t\tstrictlyWorking: [],\n\t\t\tentity: [],\n\t\t\thistory: [],\n\t\t\tsentQueue: [],\n\t\t};\n\t}\n\n\tgetEntityState()\n\t{\n\t\treturn {\n\t\t\ttype: EntityType.unknown,\n\t\t\ttitle: '',\n\t\t\tpublicCode: '',\n\t\t\tprivateCode: '',\n\t\t\tcomments: [],\n\t\t\textra: {},\n\t\t};\n\t}\n\n\tgetHistoryState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tprivateCode: '',\n\t\t\ttime: [{\n\t\t\t\tstart: new Date(),\n\t\t\t\tpreFinish: null,\n\t\t\t\tfinish: null\n\t\t\t}]\n\t\t};\n\t}\n\n\tgetSentQueueState()\n\t{\n\t\treturn {\n\t\t\tdateLog: this.getDateLog(),\n\t\t\tcomment: '',\n\t\t\thistoryPackage: [],\n\t\t\tchartPackage: [],\n\t\t\tdesktopCode: '',\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (Type.isString(payload))\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date(payload);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t\t\t&& payload.length === 10\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('setDateLog', payload);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\trefreshDateLog: (store) =>\n\t\t\t{\n\t\t\t\tif (Type.isArrayFilled(store.state.history))\n\t\t\t\t{\n\t\t\t\t\tlet firstHistoryEntryDateLog = store.state.history[0].dateLog;\n\t\t\t\t\tthis.getActions().setDateLog(store, firstHistoryEntryDateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${firstHistoryEntryDateLog}`);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = this.getDateLog();\n\t\t\t\t\tthis.getActions().setDateLog(store, dateLog);\n\n\t\t\t\t\tLogger.log(`Report date is set for ${dateLog}`);\n\t\t\t\t\tDebug.log(`Report date is set for ${dateLog}`);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('setLastRemindDate', date);\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (store, date) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(date)\n\t\t\t\t\t&& !isNaN(date)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setLastSuccessfulSendDate', date);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\taddPersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addPersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\tremovePersonal: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removePersonal', this.validatePersonal(privateCode));\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('addToStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (store, privateCode) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeFromStrictlyWorking', privateCode);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStrictlyWorking');\n\t\t\t},\n\n\t\t\tclearPersonal: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPersonal');\n\t\t\t},\n\n\t\t\taddEntity: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validateEntity({...payload});\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type !== EntityType.absence\n\t\t\t\t\t&& result.type !== EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, store.state.config.secret);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst date = new Date();\n\t\t\t\t\tconst timestamp = +date;\n\n\t\t\t\t\tresult.publicCode = Code.createPublic(result.title, timestamp);\n\t\t\t\t\tresult.privateCode = Code.createPrivate(result.title, timestamp, store.state.config.secret);\n\n\t\t\t\t\tif (result.type === EntityType.absence)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.extra = {\n\t\t\t\t\t\t\ttimeStart: date,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tresult.title +=\n\t\t\t\t\t\t\t' '\n\t\t\t\t\t\t\t+ Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE_FROM_TIME')\n\t\t\t\t\t\t\t+ ' '\n\t\t\t\t\t\t\t+ Time.formatDateToTime(result.extra.timeStart)\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('addEntity', {\n\t\t\t\t\t...this.getEntityState(),\n\t\t\t\t\t...result,\n\t\t\t\t});\n\n\t\t\t\tif (!store.state.strictlyWorking.find(privateCode => privateCode === result.privateCode))\n\t\t\t\t{\n\t\t\t\t\tconst isBitrix24Cp = (\n\t\t\t\t\t\tresult.type === EntityType.site\n\t\t\t\t\t\t&& result.title === location.host\n\t\t\t\t\t);\n\n\t\t\t\t\tconst isBitrix24Desktop = (\n\t\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t\t&& payload.isBitrix24Desktop\n\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tisBitrix24Cp\n\t\t\t\t\t\t|| isBitrix24Desktop\n\t\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('addToStrictlyWorking', result.privateCode);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('removeEntityByPrivateCode', payload);\n\t\t\t},\n\n\t\t\tclearEntities: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearEntities');\n\t\t\t},\n\n\t\t\taddHistory: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\n\t\t\t\tconst result = this.validateHistory({...payload});\n\n\t\t\t\tlet entity;\n\t\t\t\tlet privateCode;\n\t\t\t\tlet historyEntry = null;\n\n\t\t\t\tif (\n\t\t\t\t\tresult.type === EntityType.app\n\t\t\t\t\t|| result.type === EntityType.site\n\t\t\t\t\t|| result.type === EntityType.unknown\n\t\t\t\t\t|| result.type === EntityType.incognito\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getEntityByTitle(store, result.title);\n\t\t\t\t\tprivateCode = (entity ? entity.privateCode : null);\n\n\t\t\t\t\tif (!privateCode)\n\t\t\t\t\t{\n\t\t\t\t\t\tprivateCode = this.getActions().addEntity(store, payload).privateCode;\n\t\t\t\t\t}\n\n\t\t\t\t\thistoryEntry = (entity && entity.type === EntityType.site)\n\t\t\t\t\t\t? this.getHistoryEntryBySiteUrl(store, result.siteUrl)\n\t\t\t\t\t\t: this.getHistoryEntryByPrivateCode(store, privateCode);\n\t\t\t\t}\n\t\t\t\telse if (\n\t\t\t\t\tresult.type === EntityType.absence\n\t\t\t\t\t|| result.type === EntityType.custom\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tentity = this.getActions().addEntity(store, payload);\n\t\t\t\t\tprivateCode = entity.privateCode;\n\t\t\t\t}\n\n\t\t\t\tif (!historyEntry)\n\t\t\t\t{\n\t\t\t\t\tdelete result.title;\n\n\t\t\t\t\tstore.commit('addHistory', {\n\t\t\t\t\t\t...this.getHistoryState(),\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tprivateCode,\n\t\t\t\t\t});\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (result.type !== EntityType.custom)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('startIntervalForHistoryEntry', historyEntry);\n\t\t\t\t}\n\n\t\t\t\tlet lastRemindDate = store.state.config.lastRemindDate;\n\t\t\t\tlet canShowReminder = new Date(lastRemindDate) < new Date(this.getDateLog());\n\t\t\t\tlet isHistorySent = this.getGetters().isHistorySent(store.state);\n\n\t\t\t\tif (!lastRemindDate || (canShowReminder && !isHistorySent))\n\t\t\t\t{\n\t\t\t\t\tif (this.getGetters().getWorkingTimeForToday(store.state) >= 32400) //9 hour in seconds\n\t\t\t\t\t{\n\t\t\t\t\t\tnew Notification(\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TITLE'),\n\t\t\t\t\t\t\tLoc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REMINDER_TEXT'),\n\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t\t\t\t\tBX.desktop.changeTab('im');\n\t\t\t\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t).show();\n\n\t\t\t\t\t\tstore.commit('setLastRemindDate', this.getDateLog());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('preFinishLastInterval');\n\t\t\t},\n\n\t\t\tfinishLastInterval: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('finishLastInterval');\n\t\t\t},\n\n\t\t\tclearHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearHistory');\n\t\t\t},\n\n\t\t\tcreateSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tif (store.state.history.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet sentQueue = this.collectSentQueue(store);\n\t\t\t\tlet reportComment = store.state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === store.state.reportState.dateLog);\n\n\t\t\t\tlet result = this.validateSentQueue({\n\t\t\t\t\tdateLog: store.state.reportState.dateLog,\n\t\t\t\t\tcomment: reportComment ? reportComment.text : '',\n\t\t\t\t\thistoryPackage: sentQueue.history,\n\t\t\t\t\tchartPackage: sentQueue.chart,\n\t\t\t\t\tdesktopCode: store.state.config.desktopCode,\n\t\t\t\t});\n\n\t\t\t\tstore.commit('createSentQueue', {\n\t\t\t\t\t...this.getSentQueueState(),\n\t\t\t\t\t...result\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tclearSentQueue: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearSentQueue');\n\t\t\t},\n\n\t\t\tclearSentHistory: (store) =>\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = store.state.config.lastSuccessfulSendDate;\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (new Date(this.getDateLog()) > new Date(lastSuccessfulSendDate))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(lastSuccessfulSendDate));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (store, date) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearStorageBeforeDate', new Date(date));\n\t\t\t},\n\n\t\t\tsetComment: (store, payload) =>\n\t\t\t{\n\t\t\t\tconst entity = store.state.entity.find(entity => entity.privateCode === payload.privateCode);\n\n\t\t\t\tif (entity && (Type.isString(payload.comment) || Type.isNumber(payload.comment)))\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setComment', {\n\t\t\t\t\t\tentity,\n\t\t\t\t\t\tcomment: payload.comment.toString()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsetPausedUntil: (store, dateTime) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tType.isDate(dateTime)\n\t\t\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t\t\t&& dateTime > new Date()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tstore.commit('setPausedUntil', dateTime);\n\n\t\t\t\t\tLogger.warn('Monitor paused until ', dateTime.toString());\n\t\t\t\t\tDebug.log('Monitor paused until ', dateTime.toString());\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearPausedUntil: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('clearPausedUntil');\n\t\t\t},\n\n\t\t\tsetReportComment: (store, comment) =>\n\t\t\t{\n\t\t\t\tstore.commit('setReportComment', comment.toString());\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('processUnfinishedEvents');\n\t\t\t},\n\n\t\t\tmigrateHistory: (store) =>\n\t\t\t{\n\t\t\t\tstore.commit('migrateHistory');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tsetDateLog: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.reportState.dateLog = payload;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastSuccessfulSendDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastSuccessfulSendDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetLastRemindDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.config.lastRemindDate = date;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddPersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremovePersonal: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddToStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveFromStrictlyWorking: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(publicCode => publicCode !== payload)\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStrictlyWorking: (state) =>\n\t\t\t{\n\t\t\t\tstate.strictlyWorking = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPersonal: (state) =>\n\t\t\t{\n\t\t\t\tstate.personal = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddEntity: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tremoveEntityByPrivateCode: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.entity = state.entity.filter(entity => entity.privateCode !== payload);\n\t\t\t\tstate.history = state.history.filter(entry => entry.privateCode !== payload);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(privateCode => privateCode !== payload);\n\t\t\t\tstate.personal = state.personal.filter(privateCode => privateCode !== payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearEntities: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\taddHistory: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.history.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tstartIntervalForHistoryEntry: (state, historyEntry) =>\n\t\t\t{\n\t\t\t\thistoryEntry.time.push({\n\t\t\t\t\tstart: new Date(),\n\t\t\t\t\tfinish: null\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tfinishLastInterval: (state) => {\n\t\t\t\tlet shouldRemoveTransitionInterval = false;\n\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.finish = new Date();\n\t\t\t\t\t\t\ttime.preFinish = null;\n\n\t\t\t\t\t\t\tif (new Date(time.start).getDate() !== time.finish.getDate())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshouldRemoveTransitionInterval = true;\n\t\t\t\t\t\t\t\ttime.markedForDeletion = true;\n\n\t\t\t\t\t\t\t\tLogger.warn('Interval marked for deletion');\n\t\t\t\t\t\t\t\tDebug.log('Interval marked for deletion');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (entry.type !== EntityType.absence)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn time;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\t\t\tstate.entity\n\t\t\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t\t\t.forEach(entity => {\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\t\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tstate.personal.push(entity.privateCode);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t}).filter(interval => !interval.markedForDeletion);\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tif (shouldRemoveTransitionInterval)\n\t\t\t\t{\n\t\t\t\t\tstate.history = state.history.filter(entry => Type.isArrayFilled(entry.time));\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tpreFinishLastInterval: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(time => {\n\t\t\t\t\t\tif (time.finish === null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttime.preFinish = new Date();\n\t\t\t\t\t\t\tLogger.log('Last interval for ', entry.privateCode, ' preFinished');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn time;\n\t\t\t\t\t})\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.history = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tcreateSentQueue: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue.push(payload);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearSentQueue: (state) =>\n\t\t\t{\n\t\t\t\tstate.sentQueue = [];\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearStorageBeforeDate: (state, date) =>\n\t\t\t{\n\t\t\t\tstate.history = state.history\n\t\t\t\t\t.filter(entry => new Date(entry.dateLog) > date);\n\n\t\t\t\tconst getCodesToStore = privateCode => {\n\n\t\t\t\t\tconst entity = state.entity.find(entity => entity.privateCode === privateCode);\n\n\t\t\t\t\tif (Type.isObject(entity) && entity.hasOwnProperty('type'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entity.type !== EntityType.absence)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst isInUnsentHistory = state.history.find(entry => entry.privateCode === privateCode);\n\t\t\t\t\t\tif (isInUnsentHistory)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tLogger.warn(`${entity.title} has been removed from personal`);\n\t\t\t\t\t\tDebug.log(`${entity.title} has been removed from personal`);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.personal = state.personal.filter(getCodesToStore);\n\t\t\t\tstate.strictlyWorking = state.strictlyWorking.filter(getCodesToStore);\n\n\t\t\t\tif (Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\tlet privateCodesToStore = [];\n\n\t\t\t\t\tstate.history.forEach(entry => {\n\t\t\t\t\t\tif (!privateCodesToStore.includes(entry.privateCode))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprivateCodesToStore.push(entry.privateCode);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tstate.entity = state.entity\n\t\t\t\t\t\t.filter(entity => privateCodesToStore.includes(entity.privateCode));\n\n\t\t\t\t\tstate.entity = state.entity.map(entity => {\n\t\t\t\t\t\tentity.comments = entity.comments.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.entity = [];\n\t\t\t\t}\n\n\t\t\t\tstate.sentQueue = [];\n\t\t\t\tstate.reportState.comments = state.reportState.comments\n\t\t\t\t\t.filter(comment => new Date(comment.dateLog) > date);\n\n\t\t\t\tLogger.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\t\t\t\tDebug.space();\n\t\t\t\tDebug.log(`Local history before ${DateFormatter.toString(date)} cleared`);\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetComment: (state, payload) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = payload.entity.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = payload.comment;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpayload.entity.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext: payload.comment\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetReportComment: (state, text) =>\n\t\t\t{\n\t\t\t\tconst dateLog = state.reportState.dateLog;\n\n\t\t\t\tlet comment = state.reportState.comments.find(comment => comment.dateLog === dateLog);\n\t\t\t\tif (comment)\n\t\t\t\t{\n\t\t\t\t\tcomment.text = text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\tdateLog,\n\t\t\t\t\t\ttext\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tsetPausedUntil: (state, dateTime) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = dateTime;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tclearPausedUntil: (state) =>\n\t\t\t{\n\t\t\t\tstate.config.pausedUntil = null;\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tprocessUnfinishedEvents: (state) =>\n\t\t\t{\n\t\t\t\tstate.history.map(entry => {\n\t\t\t\t\tentry.time = entry.time.map(interval => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tinterval.finish === null\n\t\t\t\t\t\t\t&& interval.preFinish !== null\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinterval.finish = interval.preFinish;\n\t\t\t\t\t\t\tinterval.preFinish = null;\n\n\t\t\t\t\t\t\tLogger.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval closed based on preFinish time');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\n\t\t\t\t\tentry.time = entry.time.filter(time => {\n\t\t\t\t\t\tif (time.finish != null)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.log('Unfinished interval has been removed');\n\t\t\t\t\t\t\tDebug.space();\n\t\t\t\t\t\t\tDebug.log('Unfinished interval has been removed');\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\treturn entry;\n\t\t\t\t});\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\n\t\t\tmigrateHistory: (state) =>\n\t\t\t{\n\t\t\t\tstate.entity.map(entity => {\n\t\t\t\t\tif (!entity.hasOwnProperty('comments'))\n\t\t\t\t\t{\n\t\t\t\t\t\tentity.comments = [];\n\n\t\t\t\t\t\tif (entity.comment)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentity.comments.push({\n\t\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\t\ttext: entity.comment,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete entity.comment;\n\n\t\t\t\t\treturn entity;\n\t\t\t\t});\n\n\t\t\t\tif (!state.reportState.hasOwnProperty('comments'))\n\t\t\t\t{\n\t\t\t\t\tstate.reportState.comments = [];\n\n\t\t\t\t\tif (state.reportState.comment)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.reportState.comments.push({\n\t\t\t\t\t\t\tdateLog: state.reportState.dateLog,\n\t\t\t\t\t\t\ttext: state.reportState.comment,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete state.reportState.comment;\n\t\t\t\t}\n\n\t\t\t\tsuper.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetWorkingEntities(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0);\n\n\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\tconst others = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tconst otherCodes = others.map(entity => entity.privateCode);\n\t\t\t\tconst shortAbsenceCodes = shortAbsence.map(entity => entity.privateCode);\n\t\t\t\tconst excludeCodes = otherCodes.concat(shortAbsenceCodes);\n\n\t\t\t\tworkingEntities = workingEntities\n\t\t\t\t\t.filter(entity => !excludeCodes.includes(entity.privateCode))\n\t\t\t\t\t.sort((currentEntity, nextEntity) => nextEntity.time - currentEntity.time);\n\n\t\t\t\tif (Type.isArrayFilled(others))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.other.title,\n\t\t\t\t\t\ttime: Time.msToSec(state.config.otherTime) - otherTimeRest,\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.otherTime),\n\t\t\t\t\t\thint: EntityGroup.other.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.other.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(shortAbsence))\n\t\t\t\t{\n\t\t\t\t\tworkingEntities.push({\n\t\t\t\t\t\ttype: EntityType.group,\n\t\t\t\t\t\ttitle: EntityGroup.absence.title,\n\t\t\t\t\t\ttime: shortAbsence.reduce((sum, entity) => sum + entity.time, 0),\n\t\t\t\t\t\tallowedTime: Time.msToSec(state.config.shortAbsenceTime),\n\t\t\t\t\t\thint: EntityGroup.absence.hint,\n\t\t\t\t\t\tprivateCode: EntityGroup.absence.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn workingEntities;\n\t\t\t},\n\t\t\tgetPersonalEntities(state)\n\t\t\t{\n\t\t\t\tlet personalEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn personalEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\tcomment: comment ? comment.text : '',\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.filter(entity => entity.time > 0)\n\t\t\t\t\t.sort((a, b) => b.time - a.time);\n\t\t\t},\n\t\t\tgetSiteDetailByPrivateCode: state => privateCode => {\n\t\t\t\tconst history = BX.util.objectClone(state.history);\n\n\t\t\t\tlet entries = history.filter(entry => (\n\t\t\t\t\tentry.privateCode === privateCode\n\t\t\t\t\t&& entry.dateLog === state.reportState.dateLog\n\t\t\t\t));\n\n\t\t\t\tentries.map(entry => {\n\t\t\t\t\tentry.time = Time.calculateInEntry(entry);\n\t\t\t\t});\n\n\t\t\t\treturn entries;\n\t\t\t},\n\t\t\tgetChartData(state)\n\t\t\t{\n\t\t\t\tlet segments = [];\n\n\t\t\t\tconst reportDate = new Date(state.reportState.dateLog);\n\t\t\t\tconst emptyChart = [{\n\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t0,\n\t\t\t\t\t\t0\n\t\t\t\t\t),\n\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\treportDate.getFullYear(),\n\t\t\t\t\t\treportDate.getMonth(),\n\t\t\t\t\t\treportDate.getDate(),\n\t\t\t\t\t\t23,\n\t\t\t\t\t\t59\n\t\t\t\t\t),\n\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\tclickable: true,\n\t\t\t\t\tclickableHint: Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT'),\n\t\t\t\t\tstretchable: true,\n\t\t\t\t}];\n\n\t\t\t\tif (!Type.isArrayFilled(state.history))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tlet history = state.history.filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tif (!Type.isArrayFilled(segments))\n\t\t\t\t{\n\t\t\t\t\treturn emptyChart;\n\t\t\t\t}\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//fill the voids with inactive intervals\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//collapse intervals shorter than a minute\n\t\t\t\tsegments = segments.filter(interval => interval.finish - interval.start >= minute);\n\n\t\t\t\tlet chartData = [];\n\t\t\t\tlet lastSegmentType = null;\n\n\t\t\t\t//create data for the graph from intervals\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((segment, index) => {\n\t\t\t\t\t\tif (index > 0 && segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.start;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (segment.type !== lastSegmentType)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlastSegmentType = segment.type;\n\n\t\t\t\t\t\t\tchartData.push({\n\t\t\t\t\t\t\t\tstart: segment.start,\n\t\t\t\t\t\t\t\tfinish: segment.finish,\n\t\t\t\t\t\t\t\ttype: segment.type,\n\t\t\t\t\t\t\t\tclickable: (\n\t\t\t\t\t\t\t\t\t\tsegment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t\t&& segment.start < new Date()\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tclickableHint: segment.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t\t\t? Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT')\n\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (segment.type !== EntityGroup.inactive.value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tchartData[chartData.length - 1].finish = segment.finish;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\treturn chartData;\n\t\t\t},\n\t\t\tgetOverChartData: state => selectedPrivateCode =>\n\t\t\t{\n\t\t\t\tlet selectedCodes = [];\n\n\t\t\t\tlet workingEntities = [];\n\t\t\t\tif (\n\t\t\t\t\tselectedPrivateCode === EntityGroup.other.value\n\t\t\t\t\t|| selectedPrivateCode === EntityGroup.absence.value\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tworkingEntities = state.entity\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn entity;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\t\tconst workingEntity = {\n\t\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, state.reportState.dateLog),\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (workingEntity.type === EntityType.unknown)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tworkingEntity.hint = EntityGroup.unknown.hint;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn workingEntity;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.filter(entity => entity.time > 0);\n\t\t\t\t}\n\n\t\t\t\tif (selectedPrivateCode === EntityGroup.other.value)\n\t\t\t\t{\n\t\t\t\t\tlet otherTimeRest = Time.msToSec(state.config.otherTime);\n\t\t\t\t\tconst others = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type === EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (otherTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\totherTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tothers.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse if (selectedPrivateCode === EntityGroup.absence.value)\n\t\t\t\t{\n\t\t\t\t\tlet shortAbsenceTimeRest = Time.msToSec(state.config.shortAbsenceTime);\n\n\t\t\t\t\tconst shortAbsence = workingEntities\n\t\t\t\t\t\t.sort((currentEntity, nextEntity) => currentEntity.time - nextEntity.time)\n\t\t\t\t\t\t.filter(entity => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tstate.strictlyWorking.includes(entity.privateCode)\n\t\t\t\t\t\t\t\t|| entity.type !== EntityType.absence\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (MonitorModel.prototype.getCommentByEntity(state, entity).trim() === '')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (shortAbsenceTimeRest - entity.time >= 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tshortAbsenceTimeRest -= entity.time;\n\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\tshortAbsence.forEach(entity => selectedCodes.push(entity.privateCode));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tselectedCodes = [selectedPrivateCode];\n\t\t\t\t}\n\n\t\t\t\tlet segments = [];\n\n\t\t\t\tlet history = BX.util.objectClone(state.history).filter(entry => entry.dateLog === state.reportState.dateLog);\n\t\t\t\tconst minute = 60000;\n\n\t\t\t\t//collecting real intervals\n\t\t\t\thistory.forEach(entry => {\n\t\t\t\t\tconst type = state.personal.includes(entry.privateCode)\n\t\t\t\t\t\t? EntityGroup.personal.value\n\t\t\t\t\t\t: EntityGroup.working.value\n\t\t\t\t\t;\n\n\t\t\t\t\tentry.display = (selectedCodes.includes(entry.privateCode) ? 'selected' : 'transparent');\n\n\t\t\t\t\tentry.time.forEach(interval => {\n\t\t\t\t\t\tconst start = new Date(interval.start);\n\t\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\t\tsegments.push({ type, start, finish, display: entry.display });\n\t\t\t\t\t})\n\t\t\t\t});\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the leftmost interval\n\t\t\t\tlet firstSegmentFrom = segments[0].start;\n\t\t\t\tif (firstSegmentFrom.getHours() + firstSegmentFrom.getMinutes() > 0)\n\t\t\t\t{\n\t\t\t\t\tsegments.unshift({\n\t\t\t\t\t\tstart: new Date(\n\t\t\t\t\t\t\tfirstSegmentFrom.getFullYear(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getMonth(),\n\t\t\t\t\t\t\tfirstSegmentFrom.getDate(),\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\t0\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfinish: firstSegmentFrom,\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//create inactive intervals throughout the day\n\t\t\t\tsegments\n\t\t\t\t\t.forEach((interval, index) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > 0\n\t\t\t\t\t\t\t&& interval.start - segments[index - 1].finish >= minute * 3\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst start = segments[index - 1].finish;\n\t\t\t\t\t\t\tconst finish = interval.start;\n\n\t\t\t\t\t\t\tstart.setMinutes(start.getMinutes() + 1);\n\t\t\t\t\t\t\tfinish.setMinutes(finish.getMinutes() - 1);\n\n\t\t\t\t\t\t\tsegments.push({\n\t\t\t\t\t\t\t\tstart,\n\t\t\t\t\t\t\t\tfinish,\n\t\t\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tsegments = segments\n\t\t\t\t\t.sort((currentSegment, nextSegment) => currentSegment.start - nextSegment.start)\n\t\t\t\t;\n\n\t\t\t\t//create the rightmost interval\n\t\t\t\tlet lastSegmentTo = segments[segments.length - 1].finish;\n\t\t\t\tif (lastSegmentTo.getHours() + lastSegmentTo.getMinutes() < 82)\n\t\t\t\t{\n\t\t\t\t\tlastSegmentTo.setMinutes(lastSegmentTo.getMinutes() + 1);\n\n\t\t\t\t\tsegments.push({\n\t\t\t\t\t\tstart: lastSegmentTo,\n\t\t\t\t\t\tfinish: new Date(\n\t\t\t\t\t\t\tlastSegmentTo.getFullYear(),\n\t\t\t\t\t\t\tlastSegmentTo.getMonth(),\n\t\t\t\t\t\t\tlastSegmentTo.getDate(),\n\t\t\t\t\t\t\t23,\n\t\t\t\t\t\t\t59\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttype: EntityGroup.inactive.value,\n\t\t\t\t\t\tdisplay: 'transparent',\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn segments;\n\t\t\t},\n\t\t\tisHistorySent(state)\n\t\t\t{\n\t\t\t\tlet lastSuccessfulSendDate = state.config.lastSuccessfulSendDate;\n\n\t\t\t\tlet hasUnsentHistory = (\n\t\t\t\t\tType.isArrayFilled(state.history)\n\t\t\t\t\t&& new Date(state.history[0].dateLog) < new Date(MonitorModel.prototype.getDateLog())\n\t\t\t\t);\n\n\t\t\t\tif (!lastSuccessfulSendDate)\n\t\t\t\t{\n\t\t\t\t\treturn !hasUnsentHistory;\n\t\t\t\t}\n\n\t\t\t\tlastSuccessfulSendDate = new Date(lastSuccessfulSendDate);\n\t\t\t\tlastSuccessfulSendDate.setHours(0);\n\t\t\t\tlastSuccessfulSendDate.setMinutes(0);\n\t\t\t\tlastSuccessfulSendDate.setSeconds(0);\n\t\t\t\tlastSuccessfulSendDate.setMilliseconds(0);\n\n\t\t\t\tlet currentDate = new Date();\n\t\t\t\tcurrentDate.setHours(0);\n\t\t\t\tcurrentDate.setMinutes(0);\n\t\t\t\tcurrentDate.setSeconds(0);\n\t\t\t\tcurrentDate.setMilliseconds(0);\n\n\t\t\t\treturn currentDate - lastSuccessfulSendDate <= 86400000\n\t\t\t\t\t|| !hasUnsentHistory;\n\t\t\t},\n\t\t\tgetWorkingTimeForToday(state)\n\t\t\t{\n\t\t\t\tlet workingEntities = state.entity.filter(entity => {\n\t\t\t\t\tif (!state.personal.includes(entity.privateCode))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn entity;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn workingEntities\n\t\t\t\t\t.map(entity => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t...entity,\n\t\t\t\t\t\t\ttime: Time.calculateInEntityOnADate(state, entity, MonitorModel.prototype.getDateLog()),\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.reduce((sum, entity) => sum + entity.time, 0);\n\t\t\t},\n\t\t\tgetReportComment(state)\n\t\t\t{\n\t\t\t\tlet reportComment = state.reportState.comments\n\t\t\t\t\t.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\t\t\treturn reportComment ? reportComment.text : '';\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidatePersonal(personal = '')\n\t{\n\t\tlet result = '';\n\n\t\tif (personal && (Type.isString(personal) || Type.isNumber(personal)))\n\t\t{\n\t\t\tresult = personal.toString();\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateEntity(entity = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(entity) && entity)\n\t\t{\n\t\t\tif (Type.isString(entity.type))\n\t\t\t{\n\t\t\t\tresult.type = entity.type;\n\t\t\t}\n\n\t\t\tif (Type.isString(entity.title) || Type.isNumber(entity.title))\n\t\t\t{\n\t\t\t\tresult.title = entity.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(entity.comments))\n\t\t\t{\n\t\t\t\tresult.comments = entity.comments;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateHistory(historyEntry= {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(historyEntry) && historyEntry)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isString(historyEntry.dateLog)\n\t\t\t\t&& Type.isDate(new Date(historyEntry.dateLog))\n\t\t\t\t&& !isNaN(new Date(historyEntry.dateLog))\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.dateLog = historyEntry.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.title) || Type.isNumber(historyEntry.title))\n\t\t\t{\n\t\t\t\tresult.title = historyEntry.title.toString();\n\t\t\t}\n\n\t\t\tif (Type.isString(historyEntry.type) && EntityType.hasOwnProperty(historyEntry.type))\n\t\t\t{\n\t\t\t\tresult.type = historyEntry.type;\n\n\t\t\t\tif (historyEntry.type === EntityType.site)\n\t\t\t\t{\n\t\t\t\t\tresult.siteUrl = historyEntry.siteUrl;\n\t\t\t\t\tresult.siteTitle = historyEntry.siteTitle.toString();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(historyEntry.time))\n\t\t\t{\n\t\t\t\tresult.time = historyEntry.time;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateSentQueue(sentQueueItem = {})\n\t{\n\t\tlet result = {};\n\n\t\tif (Type.isObject(sentQueueItem) && sentQueueItem)\n\t\t{\n\t\t\tif (Type.isString(sentQueueItem.dateLog))\n\t\t\t{\n\t\t\t\tresult.dateLog = sentQueueItem.dateLog;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.historyPackage))\n\t\t\t{\n\t\t\t\tresult.historyPackage = sentQueueItem.historyPackage;\n\t\t\t}\n\n\t\t\tif (Type.isArrayFilled(sentQueueItem.chartPackage))\n\t\t\t{\n\t\t\t\tresult.chartPackage = sentQueueItem.chartPackage;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.desktopCode))\n\t\t\t{\n\t\t\t\tresult.desktopCode = sentQueueItem.desktopCode;\n\t\t\t}\n\n\t\t\tif (Type.isString(sentQueueItem.comment))\n\t\t\t{\n\t\t\t\tresult.comment = sentQueueItem.comment;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetHistoryEntryByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.privateCode === privateCode\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetHistoryEntryBySiteUrl(store, siteUrl)\n\t{\n\t\treturn store.state.history.find(entry => (\n\t\t\tentry.siteUrl === siteUrl\n\t\t\t&& entry.dateLog === this.getDateLog()\n\t\t));\n\t}\n\n\tgetEntityByPrivateCode(store, privateCode)\n\t{\n\t\treturn store.state.entity.find(entity => entity.privateCode === privateCode);\n\t}\n\n\tgetEntityByTitle(store, title)\n\t{\n\t\treturn store.state.entity.find(entity => entity.title === title);\n\t}\n\n\tgetCommentByEntity(state, entity)\n\t{\n\t\tconst comment = entity.comments.find(comment => comment.dateLog === state.reportState.dateLog);\n\n\t\treturn comment ? comment.text : '';\n\t}\n\n\tgetDateLog()\n\t{\n\t\tconst date = new Date();\n\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\tconst year = date.getFullYear();\n\t\tconst month = addZero(date.getMonth() + 1);\n\t\tconst day = addZero(date.getDate());\n\n\t\treturn year + '-' + month + '-' + day;\n\t}\n\n\tcollectSentQueue(store)\n\t{\n\t\tlet history = BX.util.objectClone(this.getGetters().getWorkingEntities(store.state));\n\n\t\thistory = history.map(entry => {\n\t\t\tif (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.other.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.other;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.other);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.other);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tentry.type === EntityType.group\n\t\t\t\t&& entry.title === EntityGroup.absence.title\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.type = EntityType.absenceShort;\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absenceShort);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absenceShort);\n\n\t\t\t\tdelete entry.items;\n\t\t\t}\n\t\t\telse if (entry.type === EntityType.absence)\n\t\t\t{\n\t\t\t\tif (entry.extra.hasOwnProperty('timeStart'))\n\t\t\t\t{\n\t\t\t\t\tentry.timeStart = entry.extra.timeStart;\n\t\t\t\t}\n\n\t\t\t\tentry.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t\t\t\tentry.publicCode = Code.createPublic(EntityType.absence);\n\t\t\t\tentry.privateCode = Code.createPrivate(EntityType.absence);\n\t\t\t}\n\n\t\t\tdelete entry.extra;\n\t\t\tdelete entry.hint;\n\n\t\t\treturn entry;\n\t\t});\n\n\t\tLogger.log('History to send:', history);\n\t\tDebug.space();\n\t\tDebug.log('History to send:', history);\n\n\t\tlet chart = this.getGetters().getChartData(store.state).map(interval => {\n\t\t\treturn {\n\t\t\t\ttype: interval.type,\n\t\t\t\tstart: interval.start,\n\t\t\t\tfinish: interval.finish,\n\t\t\t}\n\t\t});\n\n\t\tLogger.log('ChartData to send:', chart);\n\n\t\treturn {\n\t\t\thistory,\n\t\t\tchart,\n\t\t};\n\t}\n}","import {EntityType} from 'timeman.const';\nimport {Logger} from '../lib/logger';\nimport {Debug} from '../lib/debug';\nimport {Loc} from 'main.core';\n\nexport class Entity\n{\n\tconstructor(params = {})\n\t{\n\t\tswitch (params.type)\n\t\t{\n\t\t\tcase EntityType.site:\n\t\t\t\tthis.createSite(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.app:\n\t\t\t\tthis.createApp(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.absence:\n\t\t\t\tthis.createAbsence();\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.unknown:\n\t\t\t\tthis.createUnknown(params);\n\t\t\t\tbreak;\n\n\t\t\tcase EntityType.incognito:\n\t\t\t\tthis.createIncognito();\n\t\t\t\tbreak;\n\t\t}\n\n\t\tLogger.log('Caught:', this);\n\t\tDebug.log('Caught:', this);\n\t}\n\n\tcreateSite(params)\n\t{\n\t\tthis.type = EntityType.site;\n\n\t\tlet host;\n\t\ttry\n\t\t{\n\t\t\thost = new URL(params.url).host;\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\thost = params.url;\n\t\t}\n\n\t\tif (host === '')\n\t\t{\n\t\t\tlet hostFragments = params.url.split('/');\n\n\t\t\thost = hostFragments[hostFragments.length - 1] !== ''\n\t\t\t\t? hostFragments[hostFragments.length - 1]\n\t\t\t\t: params.url;\n\t\t}\n\t\telse if (host.split('.')[0] === 'www')\n\t\t{\n\t\t\thost = host.substring(4);\n\t\t}\n\n\t\tthis.title = host.toString();\n\t\tthis.siteUrl = params.url.toString();\n\t\tthis.siteTitle = params.title.toString();\n\t}\n\n\tcreateApp(params)\n\t{\n\t\tthis.type = EntityType.app;\n\t\tthis.title = params.name.toString();\n\n\t\tif (params.isBitrix24Desktop)\n\t\t{\n\t\t\tthis.isBitrix24Desktop = params.isBitrix24Desktop;\n\t\t}\n\t}\n\n\tcreateAbsence()\n\t{\n\t\tthis.type = EntityType.absence;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE');\n\t}\n\n\tcreateUnknown(params)\n\t{\n\t\tthis.type = EntityType.unknown;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_UNKNOWN');\n\n\t\tthis.pureName = params.name;\n\t\tthis.pureTitle = params.title;\n\t}\n\n\tcreateIncognito()\n\t{\n\t\tthis.type = EntityType.incognito;\n\t\tthis.title = Loc.getMessage('TIMEMAN_PWT_REPORT_INCOGNITO');\n\t}\n}","import {Logger} from './lib/logger';\nimport {Debug} from \"./lib/debug\";\nimport {Entity} from './model/entity';\nimport {EntityType} from 'timeman.const';\nimport {Loc} from 'main.core';\n\nclass EventHandler\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\t}\n\n\tcatch(process, name, title, url)\n\t{\n\t\tif (!this.enabled || !process)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst type = this.getEntityTypeByEvent({process, name, title, url});\n\n\t\tlet isBitrix24Desktop = false;\n\t\tif (type === EntityType.app)\n\t\t{\n\t\t\tif (['Bitrix24.exe', 'Bitrix24'].includes(this.getNameByProcess(process)))\n\t\t\t{\n\t\t\t\tisBitrix24Desktop = true;\n\t\t\t}\n\t\t}\n\n\t\tif (type !== EntityType.absence)\n\t\t{\n\t\t\tif (type === EntityType.app)\n\t\t\t{\n\t\t\t\tswitch (name)\n\t\t\t\t{\n\t\t\t\t\tcase 'Application Frame Host':\n\t\t\t\t\t\tname = title\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'StartMenuExperienceHost':\n\t\t\t\t\tcase 'Search application':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_START_ALIAS');\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Windows Shell Experience Host':\n\t\t\t\t\t\tname = Loc.getMessage('TIMEMAN_PWT_WINDOWS_NOTIFICATIONS_ALIAS');\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (name === '')\n\t\t\t{\n\t\t\t\tname = this.getNameByProcess(process);\n\t\t\t}\n\n\t\t\tif (!this.isNewEvent(name, url))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname,\n\t\t\t\turl\n\t\t\t};\n\t\t}\n\n\t\tthis.store.dispatch('monitor/addHistory', new Entity({type, name, title, url, isBitrix24Desktop}));\n\t}\n\n\tcatchAbsence(away)\n\t{\n\t\tif (away)\n\t\t{\n\t\t\tthis.store.dispatch(\n\t\t\t\t'monitor/addHistory',\n\t\t\t\tnew Entity({\n\t\t\t\t\ttype: EntityType.absence\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.lastCaught = {\n\t\t\t\tname: EntityType.absence,\n\t\t\t\turl: null\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isWorkingDayStarted() && this.isTrackerGetActiveAppAvailable())\n\t\t\t{\n\t\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t\t}\n\t\t}\n\t}\n\n\tcatchAppClose()\n\t{\n\t\tLogger.warn('Application shutdown recognized. The last interval is finished.');\n\t\tDebug.log('Application shutdown recognized. The last interval is finished.');\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\t}\n\n\tgetEntityTypeByEvent(event)\n\t{\n\t\tlet type = EntityType.unknown;\n\n\t\tif (event.url === 'unknown')\n\t\t{\n\t\t\ttype = EntityType.unknown;\n\t\t}\n\t\telse if (event.url === 'incognito')\n\t\t{\n\t\t\ttype = EntityType.incognito;\n\t\t}\n\t\telse if (event.url)\n\t\t{\n\t\t\ttype = EntityType.site\n\t\t}\n\t\telse if (event.process !== '')\n\t\t{\n\t\t\ttype = EntityType.app\n\t\t}\n\n\t\treturn type;\n\t}\n\n\tgetNameByProcess(process)\n\t{\n\t\tconst separator = (process.includes('/') ? '/' : '\\\\');\n\t\tconst path = process.split(separator);\n\n\t\treturn path[path.length - 1];\n\t}\n\n\tisNewEvent(name, url)\n\t{\n\t\tif (this.url === '')\n\t\t{\n\t\t\tif (this.lastCaught.name === name)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.lastCaught.name === name && this.lastCaught.url === url)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisTrackerGetActiveAppAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 56);\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserApp',\n\t\t\t(process, name, title, url) => this.catch(process, name, title, url)\n\t\t);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXExitApplication',\n\t\t\tthis.catchAppClose\n\t\t);\n\n\t\tif (this.isTrackerGetActiveAppAvailable())\n\t\t{\n\t\t\tBXDesktopSystem.TrackerGetActiveApp();\n\t\t}\n\n\t\tthis.preFinishInterval = setInterval(\n\t\t\t() => this.store.dispatch('monitor/preFinishLastInterval'),\n\t\t\t60000\n\t\t);\n\n\t\tLogger.log('EventHandler started');\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('EventHandler already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\n\t\tthis.lastCaught = {\n\t\t\tname: null,\n\t\t\turl: null\n\t\t}\n\n\t\tthis.preFinishInterval = null;\n\n\t\tthis.store.dispatch('monitor/finishLastInterval');\n\n\t\tLogger.log('EventHandler stopped');\n\t}\n}\n\nconst eventHandler = new EventHandler();\n\nexport {eventHandler as EventHandler};","import {Loc, Type} from 'main.core';\nimport {Monitor} from './monitor';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {UI} from 'ui.notification';\n\nclass Sender\n{\n\tinit(store)\n\t{\n\t\tthis.enabled = false;\n\t\tthis.store = store;\n\n\t\tthis.attempt = 0;\n\t\tthis.resendTimeout = 5000;\n\t\tthis.resendTimeoutId = null;\n\t}\n\n\tsend()\n\t{\n\t\tLogger.warn('Trying to send history...');\n\n\t\tBX.ajax.runAction('bitrix:timeman.api.monitor.recordhistory', {\n\t\t\tdata: {\n\t\t\t\thistory: JSON.stringify(this.getSentQueue()),\n\t\t\t}\n\t\t})\n\t\t\t.then(result =>\n\t\t\t{\n\t\t\t\tDebug.log('History sent');\n\n\t\t\t\tif (result.status === 'success')\n\t\t\t\t{\n\t\t\t\t\tLogger.warn('SUCCESS!');\n\n\t\t\t\t\tthis.attempt = 0;\n\n\t\t\t\t\tthis.afterSuccessSend();\n\n\t\t\t\t\tif (result.data.enabled === Monitor.getStatusDisabled())\n\t\t\t\t\t{\n\t\t\t\t\t\tLogger.warn('Disabled after server response');\n\t\t\t\t\t\tDebug.log('Disabled after server response');\n\n\t\t\t\t\t\tMonitor.disable();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tLogger.error('ERROR!');\n\t\t\t\t\tthis.attempt++\n\t\t\t\t\tthis.startSendingTimer();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() =>\n\t\t\t{\n\t\t\t\tLogger.error('CONNECTION ERROR!');\n\n\t\t\t\tthis.attempt++\n\t\t\t\tthis.startSendingTimer();\n\t\t\t});\n\t}\n\n\tstartSendingTimer()\n\t{\n\t\tthis.resendTimeoutId = setTimeout(this.send.bind(this), this.getSendingDelay());\n\t\tLogger.log(`Next send in ${this.getSendingDelay() / 1000} seconds...`);\n\t}\n\n\tgetSendingDelay()\n\t{\n\t\treturn (this.attempt === 0 ? this.resendTimeout : this.resendTimeout * this.attempt);\n\t}\n\n\tgetSentQueue()\n\t{\n\t\treturn this.store.state.monitor.sentQueue;\n\t}\n\n\tstart()\n\t{\n\t\tif (this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already started');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t\tthis.attempt = 0;\n\n\t\tif (Type.isArrayFilled(this.getSentQueue()))\n\t\t{\n\t\t\tLogger.log('Preparing to send old history...');\n\t\t\tthis.startSendingTimer();\n\t\t}\n\n\t\tLogger.log(\"Sender started\");\n\t}\n\n\tstop()\n\t{\n\t\tif (!this.enabled)\n\t\t{\n\t\t\tLogger.warn('Sender already stopped');\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = false;\n\t\tthis.attempt = 0;\n\n\t\tclearTimeout(this.resendTimeoutId);\n\t\tLogger.log(\"Sender stopped\");\n\t}\n\n\tafterSuccessSend()\n\t{\n\t\tLogger.warn('History sent');\n\t\tDebug.space();\n\t\tDebug.log('History sent');\n\n\t\tthis.store.dispatch(\n\t\t\t'monitor/setLastSuccessfulSendDate',\n\t\t\tnew Date(this.store.state.monitor.reportState.dateLog)\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.store.dispatch('monitor/clearSentHistory')\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.store.dispatch('monitor/refreshDateLog');\n\t\t\t\t\t\tthis.store.dispatch('monitor/clearSentQueue');\n\n\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\n\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SENT'),\n\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n}\n\nconst sender = new Sender();\n\nexport {sender as Sender};","import {BitrixVue} from \"ui.vue\";\nimport {EntityType} from \"timeman.const\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {Type} from \"main.core\";\n\nimport \"ui.icons\";\nimport \"../popup.css\";\nimport \"ui.forms\";\nimport \"ui.layout-form\";\n\nexport const AddIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-addinterval', {\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tprops:\n\t{\n\t\tminStart: Date,\n\t\tmaxFinish: Date,\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tstart: this.getTime(this.minStart),\n\t\t\tfinish: this.getTime(this.maxFinish),\n\t\t\tcomment: '',\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.minStart.setSeconds(0);\n\t\tthis.minStart.setMilliseconds(0);\n\n\t\tthis.maxFinish.setSeconds(0);\n\t\tthis.maxFinish.setMilliseconds(0);\n\n\t\tif (this.createDateFromTimeString(this.finish) > this.saveMaxFinish)\n\t\t{\n\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tDateFormatter: () => DateFormatter,\n\t\tType: () => Type,\n\t\tsaveMaxFinish()\n\t\t{\n\t\t\tlet safeMaxFinish = this.maxFinish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeMaxFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeMaxFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeMaxFinish;\n\t\t},\n\t\tcanAddInterval()\n\t\t{\n\t\t\tif (this.title.trim() === '' || !this.start || !this.finish)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tconst isStartError = (start < this.minStart);\n\t\t\tconst isFinishError = (finish > this.saveMaxFinish);\n\t\t\tconst isIntervalsConfusedError = (start > finish);\n\n\t\t\treturn !(\n\t\t\t\tisStartError\n\t\t\t\t|| isFinishError\n\t\t\t\t|| isIntervalsConfusedError\n\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\taddInterval()\n\t\t{\n\t\t\tif(!this.canAddInterval)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tthis.$store.dispatch('monitor/addHistory', {\n\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\ttitle: this.title,\n\t\t\t\ttype: EntityType.custom,\n\t\t\t\tcomments: [{\n\t\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\t\ttext: this.comment\n\t\t\t\t}],\n\t\t\t\ttime: [{\n\t\t\t\t\tstart,\n\t\t\t\t\tpreFinish: null,\n\t\t\t\t\tfinish,\n\t\t\t\t}],\n\t\t\t});\n\n\t\t\tthis.addIntervalPopupClose();\n\t\t},\n\t\taddIntervalPopupClose()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupClose');\n\t\t},\n\t\taddIntervalPopupHide()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupHide');\n\t\t},\n\t\tinputStart(value)\n\t\t{\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\tif (start < this.minStart || value === '')\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (start < this.minStart)\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\t\tif (start >= finish || start >= this.getTime(this.saveMaxFinish))\n\t\t\t\t{\n\t\t\t\t\tstart.setHours(this.saveMaxFinish.getHours());\n\t\t\t\t\tstart.setMinutes(this.saveMaxFinish.getMinutes() - 1);\n\n\t\t\t\t\tthis.start = this.getTime(start);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.start = value;\n\t\t},\n\t\tinputFinish(value)\n\t\t{\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tif (finish > this.saveMaxFinish || value === '')\n\t\t\t{\n\t\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.start)\n\t\t\t{\n\t\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\t\tif (finish <= start || finish <= this.getTime(this.minStart))\n\t\t\t\t{\n\t\t\t\t\tfinish.setHours(start.getHours());\n\t\t\t\t\tfinish.setMinutes(start.getMinutes() + 1);\n\n\t\t\t\t\tthis.finish = this.getTime(finish);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.finish = value;\n\t\t},\n\t\tgetTime(date)\n\t\t{\n\t\t\tif (!Type.isDate(date))\n\t\t\t{\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\t\tconst hour = addZero(date.getHours());\n\t\t\tconst min = addZero(date.getMinutes());\n\n\t\t\treturn hour + ':' + min;\n\t\t},\n\t\tcreateDateFromTimeString(time)\n\t\t{\n\t\t\tconst baseDate = this.minStart;\n\n\t\t\tconst year = baseDate.getFullYear();\n\t\t\tconst month = baseDate.getMonth();\n\t\t\tconst day = baseDate.getDate();\n\n\t\t\tconst hourMin = time.split(':');\n\n\t\t\treturn new Date(\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t\tday,\n\t\t\t\thourMin[0],\n\t\t\t\thourMin[1],\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-wrap\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t  \n\t\t\t\t\t\t<div class=\"ui-form\">\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n                                      {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_TITLE') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_START') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIN_START_HINT')\n\t\t\t\t\t\t\t\t\t\t  \t\t\t.replace('#TIME#', TimeFormatter.toShort(minStart))\n\t\t\t\t\t\t\t\t\t\t  \t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"start\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputStart($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_FINISH') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MAX_FINISH_HINT')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', TimeFormatter.toShort(saveMaxFinish))\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"finish\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputFinish($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_COMMENT') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-no-resize\">\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"addInterval\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'ui-btn',\n\t\t\t\t\t\t\t\t'ui-btn-md',\n\t\t\t\t\t\t\t\t'ui-btn-primary',\n\t\t\t\t\t\t\t\t!canAddInterval ? 'ui-btn-disabled' : ''\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ADD_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"addIntervalPopupHide\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport \"./interval.css\"\n\nexport const Interval = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup-interval', {\n\tprops: {\n\t\tstart: Date,\n\t\tfinish: Date,\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tsafeFinish()\n\t\t{\n\t\t\tlet safeFinish = this.finish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeFinish;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tintervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', {\n\t\t\t\tstart: this.start,\n\t\t\t\tfinish: this.safeFinish,\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup-interval\">\n\t\t\t<div\n\t\t\t\t@click=\"intervalSelected\"\n                class=\"bx-timeman-monitor-report-popup-item\"\n\t\t\t>\n\t\t\t  <div class=\"bx-timeman-monitor-report-popup-title\">\n                {{ TimeFormatter.toShort(start) }} - {{ TimeFormatter.toShort(safeFinish) }}\n\t\t\t  </div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Interval} from \"./interval/interval\";\nimport {EntityGroup} from \"timeman.const\";\n\nimport \"ui.icons\";\nimport \"ui.alerts\";\nimport \"../popup.css\";\n\nexport const SelectIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup', {\n\tcomponents:\n\t{\n\t\tInterval,\n\t},\n\tcomputed:\n\t{\n\t\tinactiveIntervals()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData']\n\t\t\t\t.filter(interval =>\n\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tselectIntervalPopupCloseClick()\n\t\t{\n\t\t\tthis.$emit('selectIntervalPopupCloseClick');\n\t\t},\n\t\tonIntervalSelected(event)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', event)\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-monitor-report-popup\n\t\t\t\t\t\tpopup-window \n\t\t\t\t\t\tpopup-window-with-titlebar \n\t\t\t\t\t\tui-message-box \n\t\t\t\t\t\tui-message-box-medium-buttons \n\t\t\t\t\t\tpopup-window-fixed-width \n\t\t\t\t\t\tpopup-window-fixed-height\n\t\t\t\t\t\" \n\t\t\t\t\tstyle=\"padding: 0\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_SELECT_INTERVAL') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-report-popup-items-container\">\n\t\t\t\t\t\t\t<Interval\n\t\t\t\t\t\t\t\tv-for=\"interval of inactiveIntervals\"\n\t\t\t\t\t\t\t\t:key=\"interval.start.toString()\"\n\t\t\t\t\t\t\t\t:start=\"interval.start\"\n\t\t\t\t\t\t\t\t:finish=\"interval.finish\"\n\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"selectIntervalPopupCloseClick\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","export const Time = {\n\tcomputed:\n\t{\n\t\tfullTime()\n\t\t{\n\t\t\treturn this.workingTime + this.personalTime;\n\t\t},\n\t\tworkingTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getWorkingEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tpersonalTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getPersonalEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tinactiveTime()\n\t\t{\n\t\t\treturn 86400 - (this.workingTime + this.personalTime);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tformatSeconds(seconds)\n\t\t{\n\t\t\tif (seconds < 1)\n\t\t\t{\n\t\t\t\treturn 0 + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t\t}\n\t\t\telse if (seconds < 60)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_LESS_THAN_MINUTE');\n\t\t\t}\n\n\t\t\tlet hours = Math.floor(seconds / 3600);\n\t\t\tlet minutes = Math.round(seconds / 60 % 60);\n\n\t\t\tif (minutes === 60)\n\t\t\t{\n\t\t\t\thours += 1;\n\t\t\t\tminutes = 0;\n\t\t\t}\n\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thours = hours + ' ' +  this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_HOUR_SHORT');\n\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\tminutes = minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\n\t\t\t\t\treturn hours + ' ' + minutes;\n\t\t\t\t}\n\n\t\t\t\treturn hours;\n\t\t\t}\n\n\t\t\treturn minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t},\n\t\tcalculateEntryTime(entry)\n\t\t{\n\t\t\tconst time = entry.time\n\t\t\t\t.map(interval => {\n\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t\t})\n\t\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\t\treturn Math.round(time / 1000);\n\t\t},\n\t\tgetEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\treturn this.monitor.entity.find(entity => entity.privateCode === privateCode);\n\t\t}\n\t}\n};","import {Vuex} from 'ui.vuex';\nimport {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport \"ui.icons\";\nimport \"ui.vue.components.hint\";\n\nimport \"./item.css\"\n\nexport const Item = BitrixVue.localComponent('bx-timeman-monitor-report-group-item', {\n\tmixins: [Time],\n\tprops: [\n\t\t'readOnly',\n\t\t'group',\n\t\t'privateCode',\n\t\t'type',\n\t\t'title',\n\t\t'time',\n\t\t'allowedTime',\n\t\t'comment',\n\t\t'hint',\n\t],\n\tdata: function() {\n\t\treturn {\n\t\t\taction: '',\n\t\t\thintOptions: {\n\t\t\t\ttargetContainer: document.body\n\t\t\t},\n\t\t\tselected: false,\n\t\t\tselectIntervalTimeout: null,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getSiteDetailByPrivateCode',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t},\n\tmethods:\n\t{\n\t\taddPersonal(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/addPersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\tremovePersonal(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/removePersonal', this.privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/removePersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\taddToStrictlyWorking(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveFromStrictlyWorking(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeFromStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeEntityByPrivateCode', privateCode);\n\t\t},\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.$emit('commentClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\ttime: this.time,\n\t\t\t\t\tcomment: this.comment,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t},\n\t\t\t\tonSaveComment: this.action,\n\t\t\t});\n\t\t},\n\t\tonDetailClick(event)\n\t\t{\n\t\t\tthis.$emit('detailClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tdetail: this.getSiteDetailByPrivateCode(this.privateCode),\n\t\t\t\t\ttime: this.time,\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonIntervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', this.privateCode);\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\tthis.selected = true;\n\t\t\t}, 500);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\tthis.selected = false;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-item-wrap\">\n\t\t\t<div\n\t\t\t\t:class=\"[\n            \t\t'bx-monitor-group-item',\n\t\t\t\t\tthis.selected ? 'bx-monitor-group-item-' + this.group + '-selected' : ''\n\t\t\t\t]\"\n\t\t\t\t@mouseenter=\"onIntervalSelected\"\n\t\t\t\t@mouseleave=\"onIntervalUnselected\"\n\t\t\t>\n\t\t\t\t<template v-if=\"type !== EntityType.group\">\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t \t<template v-if=\"type === EntityType.absence\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-away\"\n                                    v-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE'), \n\t\t\t\t\t\t\t\t\t\tpopupOptions: hintOptions,\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"type === EntityType.absence\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title': comment, \n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title-small': !comment \n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-if=\"comment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">{{ comment }}</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-subtitle\">{{ title }}</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"type === EntityType.custom\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tclass=\"ui-icon ui-icon-common-user bx-monitor-group-item-icon\"\n\t\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CUSTOM_HINT'), \n\t\t\t\t\t\t\t\t\t\tpopupOptions: hintOptions,\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div v-else class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t<template v-if=\"type !== EntityType.site || readOnly\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\t\t\t@click=\"onDetailClick\" \n\t\t\t\t\t\t\t\t\t\thref=\"#\" \n\t\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-site-title\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"group === EntityGroup.working.value\" \n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t  'ui-icon-service-imessage': comment, \n\t\t\t\t\t\t\t\t  'ui-icon-service-light-imessage': !comment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i \n\t\t\t\t\t\t\t\t\t@click=\"onCommentClick\" \n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: comment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t{{ time }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"group === EntityGroup.personal.value && !readOnly\"\n\t\t\t\t\t\t@click=\"removePersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_WORKING') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tgroup === EntityGroup.working.value \n\t\t\t\t\t\t\t&& (type !== EntityType.unknown && type !== EntityType.custom) \n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"addPersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\" \t\t\t\t\t\t\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_PERSONAL') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\ttype === EntityType.custom\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"removeEntityByPrivateCode(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-danger-light ui-btn-round bx-monitor-group-btn-right\" \t\t\t\t\t\t\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_REMOVE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-full\">\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-menu\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t\t{{ time }} / {{ allowedTime }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Vuex} from 'ui.vuex';\nimport {Time} from \"../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport {Item} from './item/item';\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PopupManager} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport \"ui.icons\";\n\nimport \"./group.css\";\n\nexport const Group = BitrixVue.localComponent('bx-timeman-monitor-report-group', {\n\tcomponents:\n\t{\n\t\tItem,\n\t\tMountingPortal\n\t},\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tmixins: [Time],\n\tprops: ['group', 'readOnly'],\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tpopupInstance: null,\n\t\t\tpopupIdSelector: !!this.readOnly ? '#bx-timeman-pwt-popup-preview' :  '#bx-timeman-pwt-popup-editor',\n\t\t\tpopupContent: {\n\t\t\t\tprivateCode: '',\n\t\t\t\ttitle: '',\n\t\t\t\ttime: '',\n\t\t\t\tcomment: '',\n\t\t\t\tdetail: '',\n\t\t\t\ttype: '',\n\t\t\t\tonSaveComment: '',\n\t\t\t},\n\t\t\tcomment: '',\n\t\t\tisCommentPopup: false,\n\t\t\tisDetailPopup: false,\n\t\t\tisReportCommentPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getWorkingEntities',\n\t\t\t'getPersonalEntities',\n\t\t\t'getReportComment',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t\tdisplayedGroup()\n\t\t{\n\t\t\tif (this.EntityGroup.getValues().includes(this.group))\n\t\t\t{\n\t\t\t\treturn this.EntityGroup[this.group];\n\t\t\t}\n\t\t},\n\t\titems()\n\t\t{\n\t\t\tswitch(this.displayedGroup.value)\n\t\t\t{\n\t\t\t\tcase EntityGroup.working.value:\n\t\t\t\t\treturn this.getWorkingEntities;\n\n\t\t\t\tcase EntityGroup.personal.value:\n\t\t\t\t\treturn this.getPersonalEntities;\n\t\t\t}\n\t\t},\n\t\ttime()\n\t\t{\n\t\t\tswitch(this.displayedGroup.value)\n\t\t\t{\n\t\t\t\tcase EntityGroup.working.value:\n\t\t\t\t\treturn this.workingTime;\n\n\t\t\t\tcase EntityGroup.personal.value:\n\t\t\t\t\treturn this.personalTime;\n\t\t\t}\n\t\t},\n\t\treportComment()\n\t\t{\n\t\t\treturn this.getReportComment;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.isCommentPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.type = event.content.type;\n\t\t\tthis.popupContent.onSaveComment = event.onSaveComment;\n\t\t\tthis.comment = event.content.comment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonReportCommentClick()\n\t\t{\n\t\t\tthis.isReportCommentPopup = true;\n\t\t\tthis.popupContent.title = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_REPORT_COMMENT');\n\t\t\tthis.comment = this.reportComment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isReportCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonDetailClick(event: BaseEvent)\n\t\t{\n\t\t\tthis.isDetailPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.detail = event.content.detail;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isDetailPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tsaveComment(privateCode)\n\t\t{\n\t\t\tif (this.comment.trim() === '' && this.popupContent.type === EntityType.absence)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/setComment', {\n\t\t\t\tprivateCode,\n\t\t\t\tcomment: this.comment\n\t\t\t});\n\n\t\t\tif (typeof this.popupContent.onSaveComment === 'function')\n\t\t\t{\n\t\t\t\tthis.popupContent.onSaveComment();\n\t\t\t}\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\tsaveReportComment()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/setReportComment', this.comment);\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\taddNewLineToComment()\n\t\t{\n\t\t\tthis.comment += '\\n';\n\t\t},\n\t\tselectIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('selectIntervalClick', event);\n\t\t},\n\t\tonIntervalSelected(privateCode)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', privateCode);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\t\t  \n\t\t<div class=\"bx-timeman-monitor-report-group-wrap\">\t\t\t\n\t\t\t<div class=\"bx-monitor-group\">\t\t\t\t  \n\t\t\t\t<div class=\"bx-monitor-group-header\" v-bind:style=\"{ background: displayedGroup.secondaryColor }\">\n\t\t\t\t\t<div class=\"bx-monitor-group-title-container\">\n                      \t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title\">\n\t\t\t\t\t\t\t\t{{ displayedGroup.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-subtitle\">\n\t\t\t\t\t\t\t\t  {{ formatSeconds(time) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"this.displayedGroup.value === EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t@click=\"onReportCommentClick\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'ui-icon-service-imessage': reportComment, \n\t\t\t\t\t\t\t\t\t'ui-icon-service-light-imessage': !reportComment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i \n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: reportComment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"(\n\t\t\t\t\t\t\t    this.displayedGroup.value === EntityGroup.working.value\n\t\t\t\t\t\t\t    && !readOnly\n\t\t\t\t\t\t\t)\"\n\t\t\t\t\t\t\t@click=\"selectIntervalClick\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light ui-btn-round bx-monitor-group-btn-add\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ '+ ' + $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_ADD') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!readOnly\" class=\"bx-monitor-group-subtitle-wrap\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-hint\">\n\t\t\t\t\t\t\t{{ displayedGroup.hint }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-monitor-group-content\" v-bind:style=\"{ background: displayedGroup.lightColor }\">\n\t\t\t\t\t<transition-group name=\"bx-monitor-group-item\" class=\"bx-monitor-group-content-wrap\">\n\t\t\t\t\t\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tv-for=\"item of items\"\n\t\t\t\t\t\t\t:key=\"item.privateCode ? item.privateCode : item.title\"\n\t\t\t\t\t\t\t:group=\"displayedGroup.value\"\n\t\t\t\t\t\t\t:privateCode=\"item.privateCode\"\n\t\t\t\t\t\t\t:type=\"item.type\"\n\t\t\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t\t\t:comment=\"item.comment\"\n\t\t\t\t\t\t\t:time=\"formatSeconds(item.time)\"\n\t\t\t\t\t\t\t:allowedTime=\"item.allowedTime ? formatSeconds(item.allowedTime) : null\"\n\t\t\t\t\t\t\t:readOnly=\"!!readOnly\"\n\t\t\t\t\t\t\t:hint=\"item.hint !== '' ? item.hint : null\"\n\t\t\t\t\t\t\t@commentClick=\"onCommentClick\"\n\t\t\t\t\t\t\t@detailClick=\"onDetailClick\"\n\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t@intervalUnselected=\"onIntervalUnselected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<mounting-portal :mount-to=\"popupIdSelector\" append v-if=\"popupInstance\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-wrap\">\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t\t\t{{ popupContent.title }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isDetailPopup\" \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ popupContent.time }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-input\"\n\t\t\t\t\t\t\t\tid=\"bx-timeman-monitor-popup-input-comment\"\n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\"\n\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_ITEM_COMMENT')\"\n\t\t\t\t\t\t\t\t@keydown.enter.prevent.exact=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t@keyup.shift.enter.exact=\"addNewLineToComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div v-if=\"isDetailPopup\" class=\"bx-timeman-monitor-popup-items-container\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tv-for=\"detailItem in popupContent.detail\" \n\t\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteTitle }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" :href=\"detailItem.siteUrl\" class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteUrl }}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-time\">\n\t\t\t\t\t\t\t\t\t\t{{ formatSeconds(detailItem.time) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\" \n\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-primary\"\n\t\t\t\t\t\t\t\t:class=\"{'ui-btn-disabled': (comment.trim() === '' && popupContent.type === EntityType.absence)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_OK') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button @click=\"popupInstance.destroy()\" class=\"ui-btn ui-btn-md ui-btn-light\">\n\t\t\t\t\t\t\t\t<span v-if=\"isCommentPopup || isReportCommentPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CANCEL') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isDetailPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CLOSE') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</mounting-portal>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nexport const Windows = BitrixVue.localComponent('bx-timeman-monitor-report-consent-windows', {\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent-windows\">\n\t\t\t<div class=\"ui-form bx-timeman-monitor-report-consent-form\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">Windows</div>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nexport const Mac = BitrixVue.localComponent('bx-timeman-monitor-report-consent-mac', {\n\t// language=Vue\n\ttemplate: `\n      <div class=\"bx-timeman-monitor-report-consent-mac\">\n\t\t  Mac\n      </div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Windows} from \"./windows/windows\";\nimport {Mac} from \"./mac/mac\";\n\nimport \"./consent.css\";\n\nexport const Consent = BitrixVue.localComponent('bx-timeman-monitor-report-consent', {\n\tcomponents:\n\t{\n\t\tWindows,\n\t\tMac,\n\t},\n\tcomputed:\n\t{\n\t\tisWindows()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac() && !this.isLinux());\n\t\t},\n\t\tisMac()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent\">\n\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t<div class=\"pwt-report-content\">\n                  \t<div class=\"\">\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-logo-container\">\n\t\t\t\t\t\t<svg class=\"bx-timeman-monitor-report-consent-logo\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Windows v-if=\"isWindows\"/>\n\t\t\t\t\t<Mac v-else-if=\"isMac\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n      </div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"timeman.component.timeline\";\nimport {EntityGroup} from \"timeman.const\";\nimport {Time} from \"../mixin/time\";\nimport {Type} from \"main.core\"\n\nimport \"./timeline.css\";\n\nexport const Timeline = BitrixVue.localComponent('bx-timeman-monitor-report-timeline', {\n\tprops: {\n\t\treadOnly: Boolean,\n\t\tselectedPrivateCode: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t}\n\t},\n\tmixins: [Time],\n\tcomputed:\n\t{\n\t\tEntityGroup: () => EntityGroup,\n\t\tType: () => Type,\n\t\tchartData()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData'];\n\t\t},\n\t\toverChartData()\n\t\t{\n\t\t\tif (this.selectedPrivateCode)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['monitor/getOverChartData'](this.selectedPrivateCode);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t},\n\t\tlegendData()\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttype: EntityGroup.working.value,\n\t\t\t\t\ttitle: EntityGroup.working.title + ': ' + this.formatSeconds(this.workingTime),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttype: EntityGroup.personal.value,\n\t\t\t\t\ttitle: EntityGroup.personal.title + ': ' + this.formatSeconds(this.personalTime),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t<bx-timeman-component-timeline\n\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t:chart=\"chartData\"\n\t\t\t\t:overChart=\"overChartData\"\n\t\t\t\t:legend=\"legendData\"\n\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./pausepopup.css\";\n\nexport const PausePopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-pause', {\n\tprops: {\n\t\tpopupInstance: Object\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\thourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 1);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tfourHourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 4);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tdayPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setDate(pauseUntilTime.getDate() + 1);\n\t\t\tpauseUntilTime.setHours(0);\n\t\t\tpauseUntilTime.setMinutes(0);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tpause(dateTime)\n\t\t{\n\t\t\tthis.$emit('monitorPause', dateTime);\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-pause\">\n\t\t\t<button @click=\"hourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_ONE_HOUR_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"fourHourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_FOUR_HOURS_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"dayPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_UNTIL_TOMORROW_BUTTON') }}\n\t\t\t</button>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./confirmpopup.css\";\n\nexport const ConfirmPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-confirm', {\n\tprops: {\n\t\tpopupInstance: Object,\n\t\ttitle: String,\n\t\ttext: String,\n\t\tbuttonOkTitle: String,\n\t\tbuttonCancelTitle: String,\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\tok()\n\t\t{\n\t\t\tthis.$emit('okClick');\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$emit('cancelClick');\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-confirm\">\n\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t{{ text }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t<button @click=\"ok\" class=\"ui-btn ui-btn-success\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonOkTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button @click=\"close\" class=\"ui-btn ui-btn-light\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonCancelTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {Type} from 'main.core';\nimport {Loc, Runtime, Tag} from 'main.core';\nimport {BitrixVue} from 'ui.vue';\nimport {EntityGroup} from 'timeman.const';\nimport {AddIntervalPopup} from \"./popup/addintervalpopup/addintervalpopup\"\nimport {SelectIntervalPopup} from \"./popup/selectintervalpopup/selectIntervalpopup\"\nimport {Group} from \"./group/group\";\nimport {Consent} from \"./consent/consent\";\nimport {Timeline} from \"./timeline/timeline\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {Monitor} from \"../monitor\";\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PausePopup} from \"./popup/pausepopup/pausepopup\";\nimport {ConfirmPopup} from \"./popup/confirmpopup/confirmpopup\";\nimport {UI} from 'ui.notification';\nimport {Logger} from \"../lib/logger\";\nimport {Debug} from \"../lib/debug\";\n\nimport {PopupManager} from \"main.popup\";\nimport {Loader} from 'main.loader';\n\nimport './report.css';\n\nclass Report\n{\n\tloadComponents()\n\t{\n\t\treturn Runtime.loadExtension([\n\t\t\t'ui.pinner',\n\t\t\t'ui.alerts',\n\t\t]);\n\t}\n\n\topen(store)\n\t{\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 960,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tevents: {\n\t\t\t\tonOpen: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createEditor(store),\n\t\t\t\tonCloseComplete: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateEditor(store)\n\t{\n\t\tthis.loadComponents().then(() => this.createEditorApp(store));\n\t}\n\n\topenPreview(store)\n\t{\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-preview\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonLoad: () => this.createPreview(store),\n\t\t\t}\n\t\t});\n\t}\n\n\tcreatePreview(store)\n\t{\n\t\tthis.loadComponents().then(() => this.createPreviewApp(store));\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateEditorApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tAddIntervalPopup,\n\t\t\t\tSelectIntervalPopup,\n\t\t\t\tConsent,\n\t\t\t\tMountingPortal,\n\t\t\t\tPausePopup,\n\t\t\t\tConfirmPopup,\n\t\t\t},\n\t\t\tstore,\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tnewInterval: null,\n\t\t\t\t\tshowSelectInternalPopup: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t\tpopupId: null,\n\t\t\t\t\tshowPlayAlert: false,\n\t\t\t\t\tselectedPrivateCode: null,\n\t\t\t\t\tselectIntervalTimeout: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tTimeFormatter: () => TimeFormatter,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t\tisHistorySent()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.getters['monitor/isHistorySent'];\n\t\t\t\t},\n\t\t\t\tisPermissionGranted()\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\tisPaused()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t},\n\t\t\t\tpausedUntil()\n\t\t\t\t{\n\t\t\t\t\tlet pausedUntil = this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t\tif (!pausedUntil)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pausedUntil.getDay() - new Date().getDay() !== 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_TOMORROW');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn TimeFormatter.toShort(pausedUntil);\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tonIntervalClick(event)\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = event;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupHide()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = true;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalPopupCloseClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tpauseClick(event)\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-editor-pause-popup',\n\t\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\t\tclassName: 'bx-timeman-pwt-pause-popup',\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\tlightShadow : true,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tangle: {},\n\t\t\t\t\t\tbindOptions: {position: 'top'},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: () => this.popupInstance.destroy(),\n\t\t\t\t\t\t\tonPopupDestroy: () => this.popupInstance = null\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-editor-pause-popup`;\n\t\t\t\t\tthis.popupId = 'PausePopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tpause(dateTime)\n\t\t\t\t{\n\t\t\t\t\tMonitor.pauseUntil(dateTime);\n\t\t\t\t},\n\t\t\t\tplay()\n\t\t\t\t{\n\t\t\t\t\tMonitor.play();\n\n\t\t\t\t\tthis.showPlayAlert = true;\n\t\t\t\t\tsetTimeout(() => this.showPlayAlert = false, 1000)\n\t\t\t\t},\n\t\t\t\topenReportPreview()\n\t\t\t\t{\n\t\t\t\t\tMonitor.openReportPreview();\n\t\t\t\t},\n\t\t\t\tselectInterval(privateCode)\n\t\t\t\t{\n\t\t\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.selectedPrivateCode = privateCode;\n\t\t\t\t\t}, 500);\n\t\t\t\t},\n\t\t\t\tunselectInterval()\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\t\t\tthis.selectedPrivateCode = null;\n\t\t\t\t},\n\t\t\t\topenSkipConfirm()\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-skip-report-confirm-popup',\n\t\t\t\t\t\ttargetContainer: BX('pwt-report-container-editor'),\n\t\t\t\t\t\tautoHide: false,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-skip-report-confirm-popup`;\n\t\t\t\t\tthis.popupId = 'SkipReportPopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tskipReport()\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('monitor/clearStorageBeforeDate', this.$store.state.monitor.reportState.dateLog)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tLogger.warn(`Report for ${this.$store.state.monitor.reportState.dateLog} deleted by user`);\n\t\t\t\t\t\t\tDebug.log(`Report for ${this.$store.state.monitor.reportState.dateLog} deleted by user`);\n\n\t\t\t\t\t\t\tconst notifyText = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIPPED')\n\t\t\t\t\t\t\t\t.replace('#DATE#', this.dateLog);\n\n\t\t\t\t\t\t\tthis.$store.dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: notifyText,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-editor\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<Consent v-if=\"!isPermissionGranted\"/>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t \t<transition-group\n\t\t\t\t\t\t\t\tname=\"bx-timeman-pwt-report\"\n\t\t\t\t\t\t\t\ttag=\"div\"\n\t\t\t\t\t\t\t\tclass=\"pwt-report-content-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:key=\"'reportNotSentAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-md ui-alert-danger ui-alert-icon-danger\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_NOT_SENT')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#DATE#', dateLog)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t:key=\"'pauseAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"isPaused || showPlayAlert\"\n\t\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t\t'pwt-report-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert-md',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-warning ui-alert-icon-warning': isPaused, \n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-success ui-alert-icon-info' : showPlayAlert,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span v-if=\"isPaused\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PAUSE_UNTIL_TIME')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', pausedUntil)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-if=\"showPlayAlert\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"isPaused\"\n\t\t\t\t\t\t\t\t\t\t@click=\"play\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-xs \n\t\t\t\t\t\t\t\t\t\t\tui-btn-success-dark\n\t\t\t\t\t\t\t\t\t\t\tui-btn-round \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-start\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-group-btn-right\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-alert-btn-right\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div> \n\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-header'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t\t:selectedPrivateCode=\"selectedPrivateCode\"\n\t\t\t\t\t\t\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-content'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t\t@selectIntervalClick=\"onSelectIntervalClick\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.personal.value\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</transition-group>\n\t\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\tpwt-report-button-panel-wrapper \n\t\t\t\t\t\t\t\t\tui-pinner \n\t\t\t\t\t\t\t\t\tui-pinner-bottom \n\t\t\t\t\t\t\t\t\tui-pinner-full-width\" \n\t\t\t\t\t\t\t\tstyle=\"z-index: 0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-page\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openReportPreview\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tid=\"timeman-pwt-button-pause\"\n\t\t\t\t\t\t\t\t\t\t@click=\"pauseClick\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-light-border \n\t\t\t\t\t\t\t\t\t\t\tui-btn-dropdown \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-pause\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openSkipConfirm\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-remove\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<mounting-portal \n\t\t\t\t\t\t\t\t\t\t:mount-to=\"popupIdSelector\" \n\t\t\t\t\t\t\t\t\t\tappend \n\t\t\t\t\t\t\t\t\t\tv-if=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PausePopup\n                                            v-if=\"popupId === 'PausePopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\" \n\t\t\t\t\t\t\t\t\t\t\t@monitorPause=\"pause\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<ConfirmPopup\n                                            v-if=\"popupId === 'SkipReportPopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TITLE')\"\n\t\t\t\t\t\t\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TEXT')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonOkTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_CONFIRM_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonCancelTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t@okClick=\"skipReport\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</mounting-portal>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\n\t\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-editor\" class=\"bx-timeman-pwt-popup\">\n\t\t\t\t\t\t\t\t<SelectIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"showSelectInternalPopup\"\n\t\t\t\t\t\t\t\t\t@selectIntervalPopupCloseClick=\"onSelectIntervalPopupCloseClick\"\n\t\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<AddIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"newInterval\"\n\t\t\t\t\t\t\t\t\t:minStart=\"newInterval.start\"\n\t\t\t\t\t\t\t\t\t:maxFinish=\"newInterval.finish\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupClose=\"onAddIntervalPopupClose\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupHide=\"onAddIntervalPopupHide\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n\n\tcreatePreviewApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tMountingPortal,\n\t\t\t},\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tpopupIdSelector: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tstore,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tsendReport()\n\t\t\t\t{\n\t\t\t\t\tMonitor.send();\n\t\t\t\t},\n\t\t\t\tclose()\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-preview\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendReport\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-share\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SEND_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-preview\" class=\"bx-timeman-pwt-popup\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst report = new Report();\n\nexport {report as Report};","import {Monitor} from \"../monitor\";\nimport {Logger} from './logger';\nimport {Debug} from './debug';\n\nexport class CommandHandler\n{\n\tconstructor(options = {})\n\t{\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'timeman';\n\t}\n\n\thandleChangeMonitorEnabled(params)\n\t{\n\t\tif (params.enabled === Monitor.getStatusEnabled())\n\t\t{\n\t\t\tLogger.warn('Enabled via API');\n\t\t\tDebug.log('Enabled via API');\n\n\t\t\tlocation.reload();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tMonitor.stop();\n\t\t\tMonitor.disable();\n\n\t\t\tLogger.warn('Disabled via API');\n\t\t\tDebug.log('Disabled via API');\n\t\t}\n\t}\n\n\thandleChangeMonitorDebugEnabled(params)\n\t{\n\t\tif (params.enabled)\n\t\t{\n\t\t\tDebug.enable();\n\n\t\t\tLogger.warn('Debug mode enabled via API');\n\t\t\tDebug.log('Debug mode enabled via API');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Debug mode disabled via API');\n\t\t\tDebug.log('Debug mode disabled via API');\n\n\t\t\tDebug.disable();\n\t\t}\n\t}\n}","import {VuexBuilder} from \"ui.vue.vuex\";\nimport {MonitorModel} from './model/monitor';\nimport {EventHandler} from './eventhandler';\nimport {Sender} from './sender';\nimport {Report} from './report/report';\nimport {Logger} from './lib/logger';\nimport {Debug} from './lib/debug';\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport {PULL as Pull} from 'pull.client';\nimport {CommandHandler} from './lib/commandhandler';\nimport {Loc, Type} from 'main.core';\n\nclass Monitor\n{\n\tinit(options)\n\t{\n\t\tthis.enabled = options.enabled;\n\t\tthis.playTimeout = null;\n\t\tthis.isAway = false;\n\t\tthis.vuex = {};\n\n\t\tthis.defaultStorageConfig = {\n\t\t\tconfig: {\n\t\t\t\totherTime: options.otherTime,\n\t\t\t\tshortAbsenceTime: options.shortAbsenceTime,\n\t\t\t}\n\t\t};\n\n\t\tthis.dateFormat = options.dateFormat;\n\t\tthis.timeFormat = options.timeFormat;\n\n\t\tif (options.debugEnabled)\n\t\t{\n\t\t\tDebug.enable();\n\t\t}\n\n\t\tDebug.space();\n\t\tDebug.log('Desktop launched!');\n\n\t\tif (this.isEnabled() && Logger.isEnabled())\n\t\t{\n\t\t\tBXDesktopSystem.LogInfo = function() {};\n\t\t\tLogger.start();\n\t\t}\n\n\t\tDebug.log(`Enabled: ${this.enabled}`);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.initApp();\n\t\t}\n\n\t\tPull.subscribe(new CommandHandler());\n\t}\n\n\tinitApp()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew VuexBuilder()\n\t\t\t.addModel(\n\t\t\t\tMonitorModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables(this.defaultStorageConfig)\n\t\t\t\t\t.useDatabase(true)\n\t\t\t)\n\t\t\t.setDatabaseConfig({\n\t\t\t\tname: 'timeman-pwt',\n\t\t\t\ttype: VuexBuilder.DatabaseType.indexedDb,\n\t\t\t\tsiteId: Loc.getMessage('SITE_ID'),\n\t\t\t\tuserId: Loc.getMessage('USER_ID')\n\t\t\t})\n\t\t\t.build()\n\t\t\t.then(builder => {\n\t\t\t\tthis.vuex.store = builder.store;\n\n\t\t\t\tthis.getStorage().dispatch('monitor/processUnfinishedEvents')\n\t\t\t\t\t.then(() => this.initTracker(this.getStorage()));\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconst errorMessage = \"PWT: Storage initialization error\";\n\n\t\t\t\tLogger.error(errorMessage);\n\t\t\t\tDebug.log(errorMessage);\n\t\t\t})\n\t\t;\n\t}\n\n\tinitTracker(store)\n\t{\n\t\tDateFormatter.init(this.dateFormat);\n\t\tTimeFormatter.init(this.timeFormat);\n\n\t\tEventHandler.init(store);\n\t\tSender.init(store);\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXUserAway',\n\t\t\t(away) => this.onAway(away)\n\t\t);\n\n\t\tBX.MessengerWindow.addTab({\n\t\t\tid: 'timeman-pwt',\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE'),\n\t\t\torder: 540,\n\t\t\ttarget: false,\n\t\t\tevents: {\n\t\t\t\topen: () => this.openReport()\n\t\t\t}\n\t\t});\n\n\t\tBX.desktop.addCustomEvent(\n\t\t\t'BXProtocolUrl',\n\t\t\tcommand => {\n\t\t\t\tif (command === 'timemanpwt')\n\t\t\t\t{\n\t\t\t\t\tif (!BX.MessengerCommon.isDesktop())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.MessengerWindow.changeTab('timeman-pwt', true);\n\t\t\t\t\tBX.desktop.setActiveWindow();\n\t\t\t\t\tBX.desktop.windowCommand(\"show\");\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tif (this.isEnabled())\n\t\t{\n\t\t\tthis.launch();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tLogger.warn('Monitor is disabled');\n\t\t}\n\t}\n\n\tlaunch()\n\t{\n\t\tif (this.isAway)\n\t\t{\n\t\t\tLogger.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\t\t\tDebug.log('Pause is over, but computer is in sleep mode. Waiting for the return of the user.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/migrateHistory').then(() => {\n\t\t\tthis.getStorage().dispatch('monitor/clearSentHistory').then(() => {\n\t\t\t\tthis.getStorage().dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\tif (this.isPaused())\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.isPauseRelevant())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\t\t\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\t\t\t\t\tthis.setPlayTimeout();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.clearPausedUntil().then(() => this.start());\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.start();\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tstart()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is disabled!\");\n\t\t\tDebug.log(\"Can't start, monitor is disabled!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isPaused())\n\t\t{\n\t\t\tLogger.warn(\"Can't start, monitor is paused!\");\n\t\t\tDebug.log(\"Can't start, monitor is paused!\");\n\n\t\t\treturn;\n\t\t}\n\n\t\tDebug.log('Monitor started');\n\t\tDebug.space();\n\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events started');\n\t\t\tBXDesktopSystem.TrackerStart();\n\t\t}\n\n\t\tEventHandler.start();\n\t\tSender.start();\n\n\t\tLogger.warn('Monitor started');\n\t}\n\n\tstop()\n\t{\n\t\tif (this.isTrackerEventsApiAvailable())\n\t\t{\n\t\t\tLogger.log('Events stopped');\n\t\t\tBXDesktopSystem.TrackerStop();\n\t\t}\n\n\t\tEventHandler.stop();\n\t\tSender.stop();\n\n\t\tLogger.warn('Monitor stopped');\n\t\tDebug.log('Monitor stopped');\n\t}\n\n\tpause()\n\t{\n\t\tthis.stop();\n\t\tthis.setPlayTimeout();\n\t}\n\n\tonAway(away)\n\t{\n\t\tif (!this.isEnabled() || this.isPaused())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (away && !this.isAway)\n\t\t{\n\t\t\tthis.isAway = true;\n\n\t\t\tLogger.warn('User AWAY');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User AWAY');\n\n\t\t\tthis.stop();\n\n\t\t\tEventHandler.catchAbsence(away);\n\t\t}\n\t\telse if (!away && this.isAway)\n\t\t{\n\t\t\tthis.isAway = false;\n\n\t\t\tLogger.warn('User RETURNED, continue monitoring...');\n\t\t\tDebug.space();\n\t\t\tDebug.log('User RETURNED, continue monitoring...');\n\n\t\t\tthis.launch();\n\t\t}\n\t}\n\n\tsend()\n\t{\n\t\tif (!this.vuex.hasOwnProperty('store'))\n\t\t{\n\t\t\tLogger.warn('Unable to send report. Store is not initialized.');\n\t\t\tDebug.log('Unable to send report. Store is not initialized.');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getStorage().dispatch('monitor/createSentQueue').then(() => Sender.send());\n\t}\n\n\topenReport()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tReport.open(this.getStorage());\n\t}\n\n\topenReportPreview()\n\t{\n\t\tif (!this.isEnabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tReport.openPreview(this.getStorage());\n\t}\n\n\tgetPausedUntilTime()\n\t{\n\t\treturn this.getStorage().state.monitor.config.pausedUntil;\n\t}\n\n\tclearPausedUntil()\n\t{\n\t\treturn this.getStorage().dispatch('monitor/clearPausedUntil');\n\t}\n\n\tisPaused()\n\t{\n\t\treturn !!this.getPausedUntilTime();\n\t}\n\n\tisPauseRelevant()\n\t{\n\t\treturn this.getPausedUntilTime() - new Date() > 0;\n\t}\n\n\tsetPlayTimeout()\n\t{\n\t\tLogger.warn(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\t\tDebug.log(`Monitor will be turned on at ${this.getPausedUntilTime().toString()}`);\n\n\t\tthis.playTimeout = setTimeout(\n\t\t\t() => this.clearPausedUntil().then(() => this.launch()),\n\t\t\tthis.getPausedUntilTime() - new Date()\n\t\t);\n\t}\n\n\tpauseUntil(dateTime: Date)\n\t{\n\t\tif (\n\t\t\tType.isDate(dateTime)\n\t\t\t&& Type.isNumber(dateTime.getTime())\n\t\t\t&& dateTime > new Date()\n\t\t)\n\t\t{\n\t\t\tthis.getStorage().dispatch('monitor/setPausedUntil', dateTime).then(() => this.pause());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow Error('Pause must be set as a date in the future');\n\t\t}\n\t}\n\n\tplay()\n\t{\n\t\tthis.playTimeout = null;\n\t\tthis.clearPausedUntil().then(() => this.launch());\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn (this.enabled === this.getStatusEnabled())\n\t}\n\n\tenable()\n\t{\n\t\tthis.enabled = this.getStatusEnabled();\n\t}\n\n\tdisable()\n\t{\n\t\tthis.stop();\n\n\t\tBX.MessengerWindow.hideTab('timeman-pwt');\n\t\tthis.vuex = {};\n\n\t\tthis.enabled = this.getStatusDisabled();\n\t}\n\n\tgetStatusEnabled()\n\t{\n\t\treturn 'Y';\n\t}\n\n\tgetStatusDisabled()\n\t{\n\t\treturn 'N';\n\t}\n\n\tisTrackerEventsApiAvailable()\n\t{\n\t\treturn (BX.desktop.getApiVersion() >= 55);\n\t}\n\n\tgetStorage()\n\t{\n\t\treturn (this.vuex.hasOwnProperty('store') ? this.vuex.store : null);\n\t}\n}\n\nconst monitor = new Monitor();\n\nexport {monitor as Monitor};"],"names":["Code","params","md5","join","sha1","BXDesktopSystem","createPrivate","UserAccount","UserOsMark","Date","now","createPublic","Time","state","entity","date","history","filter","entry","privateCode","dateLog","map","calculateInEntry","reduce","sum","time","interval","finish","start","Math","round","addZero","num","hour","getHours","min","getMinutes","ms","Logger","storageKey","enabled","Monitor","isEnabled","window","localStorage","setItem","e","removeItem","getItem","console","log","info","warn","error","trace","logger","Debug","text","getLogMessage","BX","desktop","Loc","getMessage","substr","i","arguments","length","Error","message","stack","JSON","stringify","debug","Notification","title","callback","toString","Type","isFunction","BXIM","playSound","messageTemplate","notify","createNotify","id","type","messageJs","openNewMessage","addCustomEvent","click","removeCustomEvents","MonitorModel","config","secret","createSecret","desktopCode","getDesktopCode","otherTime","getVariable","shortAbsenceTime","pausedUntil","lastSuccessfulSendDate","lastRemindDate","reportState","getDateLog","comments","personal","strictlyWorking","sentQueue","EntityType","unknown","publicCode","extra","preFinish","comment","historyPackage","chartPackage","setDateLog","store","payload","isString","isDate","isNaN","commit","refreshDateLog","isArrayFilled","firstHistoryEntryDateLog","getActions","setLastRemindDate","setLastSuccessfulSendDate","addPersonal","validatePersonal","removePersonal","addToStrictlyWorking","removeFromStrictlyWorking","clearStrictlyWorking","clearPersonal","addEntity","result","validateEntity","absence","custom","timestamp","timeStart","formatDateToTime","getEntityState","find","isBitrix24Cp","site","location","host","isBitrix24Desktop","app","removeEntityByPrivateCode","clearEntities","addHistory","validateHistory","historyEntry","incognito","getEntityByTitle","getHistoryEntryBySiteUrl","siteUrl","getHistoryEntryByPrivateCode","getHistoryState","canShowReminder","isHistorySent","getGetters","getWorkingTimeForToday","windowCommand","changeTab","MessengerWindow","show","preFinishLastInterval","finishLastInterval","clearHistory","createSentQueue","collectSentQueue","reportComment","validateSentQueue","chart","getSentQueueState","clearSentQueue","clearSentHistory","clearStorageBeforeDate","setComment","isNumber","setPausedUntil","dateTime","getTime","clearPausedUntil","setReportComment","processUnfinishedEvents","migrateHistory","push","startIntervalForHistoryEntry","shouldRemoveTransitionInterval","getDate","markedForDeletion","shortAbsenceTimeRest","msToSec","includes","calculateInEntityOnADate","sort","currentEntity","nextEntity","forEach","prototype","getCommentByEntity","trim","getCodesToStore","isObject","hasOwnProperty","isInUnsentHistory","privateCodesToStore","DateFormatter","space","getWorkingEntities","workingEntities","workingEntity","hint","EntityGroup","otherTimeRest","others","shortAbsence","otherCodes","shortAbsenceCodes","excludeCodes","concat","group","other","allowedTime","value","getPersonalEntities","personalEntities","a","b","getSiteDetailByPrivateCode","util","objectClone","entries","getChartData","segments","reportDate","emptyChart","getFullYear","getMonth","inactive","clickable","clickableHint","stretchable","minute","working","currentSegment","nextSegment","firstSegmentFrom","unshift","index","setMinutes","lastSegmentTo","chartData","lastSegmentType","segment","getOverChartData","selectedPrivateCode","selectedCodes","display","hasUnsentHistory","setHours","setSeconds","setMilliseconds","currentDate","getReportComment","siteTitle","sentQueueItem","year","month","day","items","absenceShort","VuexBuilderModel","Entity","createSite","createApp","createAbsence","createUnknown","createIncognito","URL","url","err","hostFragments","split","substring","name","pureName","pureTitle","EventHandler","preFinishInterval","lastCaught","process","getEntityTypeByEvent","getNameByProcess","isNewEvent","dispatch","away","isWorkingDayStarted","isTrackerGetActiveAppAvailable","TrackerGetActiveApp","event","separator","path","getApiVersion","catch","catchAppClose","setInterval","eventHandler","Sender","attempt","resendTimeout","resendTimeoutId","ajax","runAction","data","getSentQueue","then","status","afterSuccessSend","getStatusDisabled","disable","startSendingTimer","setTimeout","send","bind","getSendingDelay","monitor","clearTimeout","SidePanel","Instance","close","UI","Center","content","autoHideDelay","sender","AddIntervalPopup","BitrixVue","localComponent","directives","inserted","element","focus","props","minStart","maxFinish","created","createDateFromTimeString","saveMaxFinish","computed","TimeFormatter","safeMaxFinish","currentDateTime","canAddInterval","isStartError","isFinishError","isIntervalsConfusedError","methods","addInterval","$store","addIntervalPopupClose","$emit","addIntervalPopupHide","inputStart","inputFinish","baseDate","hourMin","template","Interval","safeFinish","intervalSelected","SelectIntervalPopup","components","inactiveIntervals","getters","selectIntervalPopupCloseClick","onIntervalSelected","fullTime","workingTime","personalTime","inactiveTime","formatSeconds","seconds","$Bitrix","hours","floor","minutes","calculateEntryTime","getEntityByPrivateCode","Item","mixins","action","hintOptions","targetContainer","document","body","selected","selectIntervalTimeout","Vuex","mapGetters","mapState","onIntervalUnselected","onCommentClick","onSaveComment","onDetailClick","detail","readOnly","Group","MountingPortal","popupInstance","popupIdSelector","popupContent","isCommentPopup","isDetailPopup","isReportCommentPopup","displayedGroup","getValues","destroy","popup","PopupManager","create","autoHide","closeByEsc","bindOptions","position","events","onPopupDestroy","$nextTick","onReportCommentClick","saveComment","saveReportComment","addNewLineToComment","selectIntervalClick","Windows","Mac","Consent","isWindows","navigator","userAgent","toLowerCase","isMac","isLinux","Timeline","Boolean","String","default","overChartData","legendData","onIntervalClick","PausePopup","Object","mounted","beforeDestroy","hourPause","pauseUntilTime","pause","fourHourPause","dayPause","setDate","ConfirmPopup","buttonOkTitle","buttonCancelTitle","ok","Report","Runtime","loadExtension","open","contentCallback","getAppPlaceholder","animationDuration","width","onOpen","setPreventEsc","onLoad","createEditor","onCloseComplete","loadComponents","createEditorApp","label","createPreview","createPreviewApp","Tag","render","newInterval","showSelectInternalPopup","popupId","showPlayAlert","toLong","isPermissionGranted","isPaused","getDay","toShort","onAddIntervalPopupHide","onAddIntervalPopupClose","onSelectIntervalClick","onSelectIntervalPopupCloseClick","pauseClick","className","bindElement","target","lightShadow","offsetTop","offsetLeft","angle","onPopupClose","pauseUntil","play","openReportPreview","selectInterval","unselectInterval","openSkipConfirm","overlay","skipReport","notifyText","replace","mount","sendReport","report","CommandHandler","getStatusEnabled","reload","stop","enable","options","playTimeout","isAway","vuex","defaultStorageConfig","dateFormat","timeFormat","debugEnabled","LogInfo","initApp","Pull","subscribe","VuexBuilder","addModel","setVariables","useDatabase","setDatabaseConfig","DatabaseType","indexedDb","siteId","userId","build","builder","getStorage","initTracker","errorMessage","init","onAway","addTab","order","openReport","command","MessengerCommon","isDesktop","setActiveWindow","launch","isPauseRelevant","setPlayTimeout","isTrackerEventsApiAvailable","TrackerStart","TrackerStop","catchAbsence","openPreview","getPausedUntilTime","hideTab"],"mappings":"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"}