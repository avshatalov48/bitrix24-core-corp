{"version":3,"file":"monitor-report.bundle.js","sources":["../src/popup/addintervalpopup/addintervalpopup.js","../src/popup/selectintervalpopup/interval/interval.js","../src/popup/selectintervalpopup/selectIntervalpopup.js","../src/mixin/time.js","../src/group/item/item.js","../src/group/group.js","../src/consent/consent.js","../src/timeline/timeline.js","../src/popup/pausepopup/pausepopup.js","../src/popup/confirmpopup/confirmpopup.js","../src/report/viewer/viewer.js","../src/monitor-report.js"],"sourcesContent":["import {BitrixVue} from \"ui.vue\";\nimport {EntityType} from \"timeman.const\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {Type} from \"main.core\";\n\nimport 'ui.design-tokens';\nimport \"ui.icons\";\nimport \"../popup.css\";\nimport \"ui.forms\";\nimport \"ui.layout-form\";\n\nexport const AddIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-addinterval', {\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tprops:\n\t{\n\t\tminStart: Date,\n\t\tmaxFinish: Date,\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tstart: this.getTime(this.minStart),\n\t\t\tfinish: this.getTime(this.maxFinish),\n\t\t\tcomment: '',\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.minStart.setSeconds(0);\n\t\tthis.minStart.setMilliseconds(0);\n\n\t\tthis.maxFinish.setSeconds(0);\n\t\tthis.maxFinish.setMilliseconds(0);\n\n\t\tif (this.createDateFromTimeString(this.finish) > this.saveMaxFinish)\n\t\t{\n\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tDateFormatter: () => DateFormatter,\n\t\tType: () => Type,\n\t\tsaveMaxFinish()\n\t\t{\n\t\t\tlet safeMaxFinish = this.maxFinish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeMaxFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeMaxFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeMaxFinish;\n\t\t},\n\t\tcanAddInterval()\n\t\t{\n\t\t\tif (this.title.trim() === '' || !this.start || !this.finish)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tconst isStartError = (start < this.minStart);\n\t\t\tconst isFinishError = (finish > this.saveMaxFinish);\n\t\t\tconst isIntervalsConfusedError = (start > finish);\n\n\t\t\treturn !(\n\t\t\t\tisStartError\n\t\t\t\t|| isFinishError\n\t\t\t\t|| isIntervalsConfusedError\n\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\taddInterval()\n\t\t{\n\t\t\tif(!this.canAddInterval)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tthis.$store.dispatch('monitor/addHistory', {\n\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\ttitle: this.title,\n\t\t\t\ttype: EntityType.custom,\n\t\t\t\tcomments: [{\n\t\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\t\ttext: this.comment\n\t\t\t\t}],\n\t\t\t\ttime: [{\n\t\t\t\t\tstart,\n\t\t\t\t\tpreFinish: null,\n\t\t\t\t\tfinish,\n\t\t\t\t}],\n\t\t\t});\n\n\t\t\tthis.addIntervalPopupClose();\n\t\t},\n\t\taddIntervalPopupClose()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupClose');\n\t\t},\n\t\taddIntervalPopupHide()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupHide');\n\t\t},\n\t\tinputStart(value)\n\t\t{\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\tif (start < this.minStart || value === '')\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (start < this.minStart)\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\t\tif (start >= finish || start >= this.getTime(this.saveMaxFinish))\n\t\t\t\t{\n\t\t\t\t\tstart.setHours(this.saveMaxFinish.getHours());\n\t\t\t\t\tstart.setMinutes(this.saveMaxFinish.getMinutes() - 1);\n\n\t\t\t\t\tthis.start = this.getTime(start);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.start = value;\n\t\t},\n\t\tinputFinish(value)\n\t\t{\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tif (finish > this.saveMaxFinish || value === '')\n\t\t\t{\n\t\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.start)\n\t\t\t{\n\t\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\t\tif (finish <= start || finish <= this.getTime(this.minStart))\n\t\t\t\t{\n\t\t\t\t\tfinish.setHours(start.getHours());\n\t\t\t\t\tfinish.setMinutes(start.getMinutes() + 1);\n\n\t\t\t\t\tthis.finish = this.getTime(finish);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.finish = value;\n\t\t},\n\t\tgetTime(date)\n\t\t{\n\t\t\tif (!Type.isDate(date))\n\t\t\t{\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\t\tconst hour = addZero(date.getHours());\n\t\t\tconst min = addZero(date.getMinutes());\n\n\t\t\treturn hour + ':' + min;\n\t\t},\n\t\tcreateDateFromTimeString(time)\n\t\t{\n\t\t\tconst baseDate = this.minStart;\n\n\t\t\tconst year = baseDate.getFullYear();\n\t\t\tconst month = baseDate.getMonth();\n\t\t\tconst day = baseDate.getDate();\n\n\t\t\tconst hourMin = time.split(':');\n\n\t\t\treturn new Date(\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t\tday,\n\t\t\t\thourMin[0],\n\t\t\t\thourMin[1],\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-wrap\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t  \n\t\t\t\t\t\t<div class=\"ui-form\">\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_TITLE') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_START') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIN_START_HINT')\n\t\t\t\t\t\t\t\t\t\t  \t\t\t.replace('#TIME#', TimeFormatter.toShort(minStart))\n\t\t\t\t\t\t\t\t\t\t  \t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"start\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputStart($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_FINISH') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MAX_FINISH_HINT')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', TimeFormatter.toShort(saveMaxFinish))\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"finish\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputFinish($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_COMMENT') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-no-resize\">\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"addInterval\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'ui-btn',\n\t\t\t\t\t\t\t\t'ui-btn-md',\n\t\t\t\t\t\t\t\t'ui-btn-primary',\n\t\t\t\t\t\t\t\t!canAddInterval ? 'ui-btn-disabled' : ''\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ADD_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"addIntervalPopupHide\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport \"./interval.css\"\n\nexport const Interval = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup-interval', {\n\tprops: {\n\t\tstart: Date,\n\t\tfinish: Date,\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tsafeFinish()\n\t\t{\n\t\t\tlet safeFinish = this.finish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeFinish;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tintervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', {\n\t\t\t\tstart: this.start,\n\t\t\t\tfinish: this.safeFinish,\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup-interval\">\n\t\t\t<div\n\t\t\t\t@click=\"intervalSelected\"\n                class=\"bx-timeman-monitor-report-popup-item\"\n\t\t\t>\n\t\t\t  <div class=\"bx-timeman-monitor-report-popup-title\">\n                {{ TimeFormatter.toShort(start) }} - {{ TimeFormatter.toShort(safeFinish) }}\n\t\t\t  </div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Interval} from \"./interval/interval\";\nimport {EntityGroup} from \"timeman.const\";\n\nimport 'ui.design-tokens';\nimport \"ui.icons\";\nimport \"ui.alerts\";\nimport \"../popup.css\";\n\nexport const SelectIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup', {\n\tcomponents:\n\t{\n\t\tInterval,\n\t},\n\tcomputed:\n\t{\n\t\tinactiveIntervals()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData']\n\t\t\t\t.filter(interval =>\n\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tselectIntervalPopupCloseClick()\n\t\t{\n\t\t\tthis.$emit('selectIntervalPopupCloseClick');\n\t\t},\n\t\tonIntervalSelected(event)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', event)\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-monitor-report-popup\n\t\t\t\t\t\tpopup-window \n\t\t\t\t\t\tpopup-window-with-titlebar \n\t\t\t\t\t\tui-message-box \n\t\t\t\t\t\tui-message-box-medium-buttons \n\t\t\t\t\t\tpopup-window-fixed-width \n\t\t\t\t\t\tpopup-window-fixed-height\n\t\t\t\t\t\" \n\t\t\t\t\tstyle=\"padding: 0\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_SELECT_INTERVAL') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-report-popup-items-container\">\n\t\t\t\t\t\t\t<Interval\n\t\t\t\t\t\t\t\tv-for=\"interval of inactiveIntervals\"\n\t\t\t\t\t\t\t\t:key=\"interval.start.toString()\"\n\t\t\t\t\t\t\t\t:start=\"interval.start\"\n\t\t\t\t\t\t\t\t:finish=\"interval.finish\"\n\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"selectIntervalPopupCloseClick\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","export const Time = {\n\tcomputed:\n\t{\n\t\tfullTime()\n\t\t{\n\t\t\treturn this.workingTime + this.personalTime;\n\t\t},\n\t\tworkingTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getWorkingEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tpersonalTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getPersonalEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tinactiveTime()\n\t\t{\n\t\t\treturn 86400 - (this.workingTime + this.personalTime);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tformatSeconds(seconds)\n\t\t{\n\t\t\tif (seconds < 1)\n\t\t\t{\n\t\t\t\treturn 0 + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t\t}\n\t\t\telse if (seconds < 60)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_LESS_THAN_MINUTE');\n\t\t\t}\n\n\t\t\tlet hours = Math.floor(seconds / 3600);\n\t\t\tlet minutes = Math.round(seconds / 60 % 60);\n\n\t\t\tif (minutes === 60)\n\t\t\t{\n\t\t\t\thours += 1;\n\t\t\t\tminutes = 0;\n\t\t\t}\n\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thours = hours + ' ' +  this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_HOUR_SHORT');\n\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\tminutes = minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\n\t\t\t\t\treturn hours + ' ' + minutes;\n\t\t\t\t}\n\n\t\t\t\treturn hours;\n\t\t\t}\n\n\t\t\treturn minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t},\n\t\tcalculateEntryTime(entry)\n\t\t{\n\t\t\tconst time = entry.time\n\t\t\t\t.map(interval => {\n\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t\t})\n\t\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\t\treturn Math.round(time / 1000);\n\t\t},\n\t\tgetEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\treturn this.monitor.entity.find(entity => entity.privateCode === privateCode);\n\t\t}\n\t}\n};","import {Vuex} from 'ui.vuex';\nimport {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport \"ui.icons\";\nimport \"ui.vue.components.hint\";\n\nimport \"./item.css\"\n\nexport const Item = BitrixVue.localComponent('bx-timeman-monitor-report-group-item', {\n\tmixins: [Time],\n\tprops: [\n\t\t'readOnly',\n\t\t'group',\n\t\t'privateCode',\n\t\t'type',\n\t\t'title',\n\t\t'time',\n\t\t'allowedTime',\n\t\t'comment',\n\t\t'hint',\n\t],\n\tdata: function() {\n\t\treturn {\n\t\t\taction: '',\n\t\t\thintOptions: {\n\t\t\t\ttargetContainer: document.body\n\t\t\t},\n\t\t\tselected: false,\n\t\t\tselectIntervalTimeout: null,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getSiteDetailByPrivateCode',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t},\n\tmethods:\n\t{\n\t\taddPersonal(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/addPersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\tremovePersonal(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/removePersonal', this.privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/removePersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\taddToStrictlyWorking(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveFromStrictlyWorking(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeFromStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeEntityByPrivateCode', privateCode);\n\t\t},\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.$emit('commentClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\ttime: this.time,\n\t\t\t\t\tcomment: this.comment,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t},\n\t\t\t\tonSaveComment: this.action,\n\t\t\t});\n\t\t},\n\t\tonDetailClick(event)\n\t\t{\n\t\t\tthis.$emit('detailClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tdetail: this.getSiteDetailByPrivateCode(this.privateCode),\n\t\t\t\t\ttime: this.time,\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonIntervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', this.privateCode);\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\tthis.selected = true;\n\t\t\t}, 500);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\tthis.selected = false;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-item-wrap\">\n\t\t\t<div\n\t\t\t\t:class=\"[\n            \t\t'bx-monitor-group-item',\n\t\t\t\t\tthis.selected ? 'bx-monitor-group-item-' + this.group + '-selected' : ''\n\t\t\t\t]\"\n\t\t\t\t@mouseenter=\"onIntervalSelected\"\n\t\t\t\t@mouseleave=\"onIntervalUnselected\"\n\t\t\t>\n\t\t\t\t<template\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\ttype !== EntityType.group\n\t\t\t\t\t\t&& type !== EntityType.absenceShort\n\t\t\t\t\t\t&& type !== EntityType.other\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t \t<template v-if=\"type === EntityType.absence\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-away\"\n\t\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE'),\n\t\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t\thintOptions,\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-absence-hint',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"type === EntityType.absence\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title': comment,\n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title-small': !comment\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-if=\"comment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">{{ comment }}</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-subtitle\">{{ title }}</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"type === EntityType.custom\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"ui-icon ui-icon-common-user bx-monitor-group-item-icon\"\n\t\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CUSTOM_HINT'),\n\t\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t\thintOptions,\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-custom-hint',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div v-else class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t<template v-if=\"type !== EntityType.site || readOnly\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t@click=\"onDetailClick\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-site-title\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if=\"group === EntityGroup.working.value && !readOnly\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t  'ui-icon-service-imessage': comment,\n\t\t\t\t\t\t\t\t  'ui-icon-service-light-imessage': !comment\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t@click=\"onCommentClick\"\n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: comment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"group === EntityGroup.working.value && readOnly && comment\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-comment\"\n\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\ttext: comment,\n\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t...hintOptions,\n\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-comment',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t{{ time }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"group === EntityGroup.personal.value && !readOnly\"\n\t\t\t\t\t\t@click=\"removePersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_WORKING') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tgroup === EntityGroup.working.value\n\t\t\t\t\t\t\t&& (type !== EntityType.unknown && type !== EntityType.custom)\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"addPersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_PERSONAL') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\ttype === EntityType.custom\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"removeEntityByPrivateCode(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-danger-light ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_REMOVE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-full\">\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-menu\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t\t{{ time }} / {{ allowedTime }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport {Item} from './item/item';\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PopupManager} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport \"ui.icons\";\n\nimport \"ui.design-tokens\";\nimport \"ui.fonts.opensans\";\nimport \"./group.css\";\n\n\nexport const Group = BitrixVue.localComponent('bx-timeman-monitor-report-group', {\n\tcomponents:\n\t{\n\t\tItem,\n\t\tMountingPortal\n\t},\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tmixins: [Time],\n\tprops: [\n\t\t'group',\n\t\t'items',\n\t\t'time',\n\t\t'reportComment',\n\t\t'readOnly',\n\t\t'hasIntervalsToAdd',\n\t],\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tpopupInstance: null,\n\t\t\tpopupIdSelector: !!this.readOnly ? '#bx-timeman-pwt-popup-preview' :  '#bx-timeman-pwt-popup-editor',\n\t\t\tpopupContent: {\n\t\t\t\tprivateCode: '',\n\t\t\t\ttitle: '',\n\t\t\t\ttime: '',\n\t\t\t\tcomment: '',\n\t\t\t\tdetail: '',\n\t\t\t\ttype: '',\n\t\t\t\tonSaveComment: '',\n\t\t\t},\n\t\t\tcomment: '',\n\t\t\tisCommentPopup: false,\n\t\t\tisDetailPopup: false,\n\t\t\tisReportCommentPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t\tdisplayedGroup()\n\t\t{\n\t\t\tif (this.EntityGroup.getValues().includes(this.group))\n\t\t\t{\n\t\t\t\treturn this.EntityGroup[this.group];\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.isCommentPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.type = event.content.type;\n\t\t\tthis.popupContent.onSaveComment = event.onSaveComment;\n\t\t\tthis.comment = event.content.comment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonReportCommentClick()\n\t\t{\n\t\t\tthis.isReportCommentPopup = true;\n\t\t\tthis.popupContent.title = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_REPORT_COMMENT');\n\t\t\tthis.comment = this.reportComment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isReportCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonDetailClick(event: BaseEvent)\n\t\t{\n\t\t\tthis.isDetailPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.detail = event.content.detail;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isDetailPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tsaveComment(privateCode)\n\t\t{\n\t\t\tif (this.comment.trim() === '' && this.popupContent.type === EntityType.absence)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/setComment', {\n\t\t\t\tprivateCode,\n\t\t\t\tcomment: this.comment\n\t\t\t});\n\n\t\t\tif (typeof this.popupContent.onSaveComment === 'function')\n\t\t\t{\n\t\t\t\tthis.popupContent.onSaveComment();\n\t\t\t}\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\tsaveReportComment()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/setReportComment', this.comment);\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\taddNewLineToComment()\n\t\t{\n\t\t\tthis.comment += '\\n';\n\t\t},\n\t\tselectIntervalClick(event)\n\t\t{\n\t\t\tif (!this.hasIntervalsToAdd)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('selectIntervalClick', event);\n\t\t},\n\t\tonIntervalSelected(privateCode)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', privateCode);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\t\t  \n\t\t<div class=\"bx-timeman-monitor-report-group-wrap\">\t\t\t\n\t\t\t<div class=\"bx-monitor-group\">\t\t\t\t  \n\t\t\t\t<div class=\"bx-monitor-group-header\" v-bind:style=\"{ background: displayedGroup.secondaryColor }\">\n\t\t\t\t\t<div class=\"bx-monitor-group-title-container\">\n                      \t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title\">\n\t\t\t\t\t\t\t\t{{ displayedGroup.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-subtitle\">\n\t\t\t\t\t\t\t\t  {{ formatSeconds(time) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"this.displayedGroup.value === EntityGroup.working.value && !readOnly\"\n\t\t\t\t\t\t\t\t@click=\"onReportCommentClick\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'ui-icon-service-imessage': reportComment, \n\t\t\t\t\t\t\t\t\t'ui-icon-service-light-imessage': !reportComment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i \n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: reportComment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"\n\t\t\t\t\t\t\t\t\tthis.displayedGroup.value === EntityGroup.working.value \n\t\t\t\t\t\t\t\t\t&& readOnly \n\t\t\t\t\t\t\t\t\t&& reportComment\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-comment\"\n\t\t\t\t\t\t\t\tv-bx-hint=\"reportComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"(\n\t\t\t\t\t\t\t\tthis.displayedGroup.value === EntityGroup.working.value\n\t\t\t\t\t\t\t\t&& !readOnly \n\t\t\t\t\t\t\t)\"\n\t\t\t\t\t\t\t@click=\"selectIntervalClick\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'bx-monitor-group-btn-add': true,\n\t\t\t\t\t\t\t\t'ui-btn': true, \n\t\t\t\t\t\t\t\t'ui-btn-xs': true, \n\t\t\t\t\t\t\t\t'ui-btn-round': true, \n\t\t\t\t\t\t\t\t'ui-btn-light': hasIntervalsToAdd, \n\t\t\t\t\t\t\t\t'ui-btn-disabled': !hasIntervalsToAdd, \n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ '+ ' + $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_ADD') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!readOnly\" class=\"bx-monitor-group-subtitle-wrap\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-hint\">\n\t\t\t\t\t\t\t{{ displayedGroup.hint }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-monitor-group-content\" v-bind:style=\"{ background: displayedGroup.lightColor }\">\n\t\t\t\t\t<transition-group name=\"bx-monitor-group-item\" class=\"bx-monitor-group-content-wrap\">\n\t\t\t\t\t\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tv-for=\"item of items\"\n\t\t\t\t\t\t\t:key=\"item.privateCode ? item.privateCode : item.title\"\n\t\t\t\t\t\t\t:group=\"displayedGroup.value\"\n\t\t\t\t\t\t\t:privateCode=\"item.privateCode\"\n\t\t\t\t\t\t\t:type=\"item.type\"\n\t\t\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t\t\t:comment=\"item.comment\"\n\t\t\t\t\t\t\t:time=\"formatSeconds(item.time)\"\n\t\t\t\t\t\t\t:allowedTime=\"item.allowedTime ? formatSeconds(item.allowedTime) : null\"\n\t\t\t\t\t\t\t:readOnly=\"!!readOnly\"\n\t\t\t\t\t\t\t:hint=\"item.hint !== '' ? item.hint : null\"\n\t\t\t\t\t\t\t@commentClick=\"onCommentClick\"\n\t\t\t\t\t\t\t@detailClick=\"onDetailClick\"\n\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t@intervalUnselected=\"onIntervalUnselected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<mounting-portal :mount-to=\"popupIdSelector\" append v-if=\"popupInstance\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-wrap\">\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t\t\t{{ popupContent.title }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isDetailPopup\" \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ popupContent.time }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-input\"\n\t\t\t\t\t\t\t\tid=\"bx-timeman-monitor-popup-input-comment\"\n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\"\n\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_ITEM_COMMENT')\"\n\t\t\t\t\t\t\t\t@keydown.enter.prevent.exact=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t@keyup.shift.enter.exact=\"addNewLineToComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div v-if=\"isDetailPopup\" class=\"bx-timeman-monitor-popup-items-container\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tv-for=\"detailItem in popupContent.detail\" \n\t\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteTitle }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" :href=\"detailItem.siteUrl\" class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteUrl }}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-time\">\n\t\t\t\t\t\t\t\t\t\t{{ formatSeconds(detailItem.time) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\" \n\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-primary\"\n\t\t\t\t\t\t\t\t:class=\"{'ui-btn-disabled': (comment.trim() === '' && popupContent.type === EntityType.absence)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_OK') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button @click=\"popupInstance.destroy()\" class=\"ui-btn ui-btn-md ui-btn-light\">\n\t\t\t\t\t\t\t\t<span v-if=\"isCommentPopup || isReportCommentPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CANCEL') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isDetailPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CLOSE') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</mounting-portal>\n\t\t</div>\n\t`\n});","import { BitrixVue } from \"ui.vue\";\n\nimport \"./consent.css\";\n\nexport const Consent = BitrixVue.localComponent('bx-timeman-monitor-report-consent', {\n\tcomputed:\n\t{\n\t\tisWindows()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac && !this.isLinux);\n\t\t},\n\t\tisMac()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t},\n\t\tisLinux()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgrantPermissionMac()\n\t\t{\n\t\t\t//If no native permission window has appeared before, this method will cause it to appear\n\t\t\tBXDesktopSystem.ListScreenMedia(() => {});\n\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermissionWindows()\n\t\t{\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermissionLinux()\n\t\t{\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermission()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/grantPermission').then(() => {\n\t\t\t\tBX.Timeman.Monitor.launch();\n\t\t\t});\n\t\t},\n\t\topenPermissionHelp()\n\t\t{\n\t\t\tthis.openHelpdesk('13857358');\n\t\t},\n\t\topenHelpdesk(code)\n\t\t{\n\t\t\tif(top.BX.Helper)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show('redirect=detail&code=' + code);\n\t\t\t}\n\t\t},\n\t\tshowGrantingPermissionLater()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/showGrantingPermissionLater').then(() => {\n\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent\">\n\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-logo-container\">\n\t\t\t\t\t\t<svg class=\"bx-timeman-monitor-report-consent-logo\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-description\">\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_1') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_2') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_3') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_4') }}</p>\n\t\t\t\t\t\t<p v-if=\"isMac\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_DESCRIPTION_MAC') + ' ' }}\n\t\t\t\t\t\t\t<span @click=\"openPermissionHelp\" class=\"bx-timeman-monitor-report-consent-link\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_DESCRIPTION_MAC_DETAIL') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"isMac\"\n\t\t\t\t\t\t\t@click=\"grantPermissionMac\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-else-if=\"isWindows\"\n\t\t\t\t\t\t\t@click=\"grantPermissionWindows\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-else-if=\"isLinux\"\n\t\t\t\t\t\t\t@click=\"grantPermissionLinux\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"showGrantingPermissionLater\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_LATER') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"timeman.component.timeline\";\nimport {EntityGroup} from \"timeman.const\";\nimport {Time} from \"../mixin/time\";\nimport {Type} from \"main.core\"\n\nimport \"./timeline.css\";\n\nexport const Timeline = BitrixVue.localComponent('bx-timeman-monitor-report-timeline', {\n\tprops: {\n\t\treadOnly: Boolean,\n\t\tselectedPrivateCode: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t}\n\t},\n\tmixins: [Time],\n\tcomputed:\n\t{\n\t\tEntityGroup: () => EntityGroup,\n\t\tType: () => Type,\n\t\tchartData()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData'];\n\t\t},\n\t\toverChartData()\n\t\t{\n\t\t\tif (this.selectedPrivateCode)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['monitor/getOverChartData'](this.selectedPrivateCode);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t},\n\t\tlegendData()\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttype: EntityGroup.working.value,\n\t\t\t\t\ttitle: EntityGroup.working.title + ': ' + this.formatSeconds(this.workingTime),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttype: EntityGroup.personal.value,\n\t\t\t\t\ttitle: EntityGroup.personal.title + ': ' + this.formatSeconds(this.personalTime),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t<bx-timeman-component-timeline\n\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t:chart=\"chartData\"\n\t\t\t\t:overChart=\"overChartData\"\n\t\t\t\t:legend=\"legendData\"\n\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./pausepopup.css\";\n\nexport const PausePopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-pause', {\n\tprops: {\n\t\tpopupInstance: Object\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\thourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 1);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tfourHourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 4);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tdayPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setDate(pauseUntilTime.getDate() + 1);\n\t\t\tpauseUntilTime.setHours(0);\n\t\t\tpauseUntilTime.setMinutes(0);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tpause(dateTime)\n\t\t{\n\t\t\tthis.$emit('monitorPause', dateTime);\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-pause\">\n\t\t\t<button @click=\"hourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_ONE_HOUR_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"fourHourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_FOUR_HOURS_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"dayPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_UNTIL_TOMORROW_BUTTON') }}\n\t\t\t</button>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./confirmpopup.css\";\n\nexport const ConfirmPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-confirm', {\n\tprops: {\n\t\tpopupInstance: Object,\n\t\ttitle: String,\n\t\ttext: String,\n\t\tbuttonOkTitle: String,\n\t\tbuttonCancelTitle: String,\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\tok()\n\t\t{\n\t\t\tthis.$emit('okClick');\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$emit('cancelClick');\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-confirm\">\n\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t{{ text }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t<button @click=\"ok\" class=\"ui-btn ui-btn-success\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonOkTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button @click=\"close\" class=\"ui-btn ui-btn-light\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonCancelTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {Loc, Tag, Type} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Timeline} from \"../../timeline/timeline\";\nimport {Group} from \"../../group/group\";\nimport {EntityGroup} from \"timeman.const\";\nimport {DateFormatter} from \"timeman.dateformatter\";\n\nimport \"./viewer.css\";\n\nclass Viewer\n{\n\topen(event)\n\t{\n\t\tthis.report = null;\n\n\t\tlet data = event.currentTarget.dataset;\n\n\t\tlet userId = data.user;\n\t\tlet dateLog = data.date;\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-viewer\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\tcacheable: false,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_SLIDER_TITLE'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tcontentClassName: 'pwt-report-viewer-side-panel-content-container',\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.loadReport(userId, dateLog)\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.report = response.data;\n\n\t\t\t\t\t\t\t\tif (!DateFormatter.isInit())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tDateFormatter.init(this.report.info.date.format);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.createApp(this.report);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(response => {\n\t\t\t\t\t\t\tif(response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.errors.forEach(error => {\n\t\t\t\t\t\t\t\t\tconsole.error(error.message);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tloadReport(userId, dateLog)\n\t{\n\t\treturn BX.ajax.runAction('bitrix:timeman.api.monitor.getdayreport', {\n\t\t\tdata: {\n\t\t\t\tuserId,\n\t\t\t\tdateLog\n\t\t\t}\n\t\t});\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateApp(report)\n\t{\n\t\tlet reports = {};\n\n\t\tlet dateLog = report.info.date.value;\n\t\treports[dateLog] = report;\n\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t},\n\t\t\tdata: function () {\n\t\t\t\treturn {\n\t\t\t\t\tdateLog,\n\t\t\t\t\treports,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tType: () => Type,\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tDateFormatter: () => DateFormatter,\n\t\t\t\treport()\n\t\t\t\t{\n\t\t\t\t\treturn this.reports[this.dateLog];\n\t\t\t\t},\n\t\t\t\tdate()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.date.value;\n\t\t\t\t},\n\t\t\t\tuserId()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.id;\n\t\t\t\t},\n\t\t\t\tuserName()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.fullName;\n\t\t\t\t},\n\t\t\t\tuserIcon()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.icon;\n\t\t\t\t},\n\t\t\t\tuserLink()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.link;\n\t\t\t\t},\n\t\t\t\treportComment()\n\t\t\t\t{\n\t\t\t\t\tif (!Type.isArrayFilled(this.report.info.reportComment))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.info.reportComment[0].TEXT;\n\t\t\t\t},\n\t\t\t\tchartData()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.timeline === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.timeline.data.map(interval => {\n\t\t\t\t\t\tinterval.start = new Date(interval.start);\n\t\t\t\t\t\tinterval.finish = new Date(interval.finish);\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tworkingEntities()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.report === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.report.data;\n\t\t\t\t},\n\t\t\t\tworkingTime()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.report === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.report.data.reduce((sum, entity) => sum + entity.time, 0);\n\t\t\t\t},\n\t\t\t\tcanShowRightEar()\n\t\t\t\t{\n\t\t\t\t\treturn !(this.dateLog === DateFormatter.toString(new Date()))\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tgetPreviousReport()\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = new Date(this.date);\n\t\t\t\t\tdateLog.setDate(dateLog.getDate() - 1);\n\n\t\t\t\t\tthis.getReport(DateFormatter.toString(dateLog));\n\t\t\t\t},\n\t\t\t\tgetNextReport()\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = new Date(this.date);\n\t\t\t\t\tdateLog.setDate(dateLog.getDate() + 1);\n\n\t\t\t\t\tthis.getReport(DateFormatter.toString(dateLog));\n\t\t\t\t},\n\t\t\t\tgetReport(dateLog)\n\t\t\t\t{\n\t\t\t\t\tif (this.reports[dateLog])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.dateLog = dateLog;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadReport(this.userId, dateLog)\n\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet dateLog = response.data.info.date.value;\n\n\t\t\t\t\t\t\t\t\tthis.reports[dateLog] = response.data;\n\n\t\t\t\t\t\t\t\t\tthis.dateLog = dateLog;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(response => {\n\t\t\t\t\t\t\t\tif(response.errors)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresponse.errors.forEach(error => {\n\t\t\t\t\t\t\t\t\t\tconsole.error(error.message);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tloadReport(userId, dateLog)\n\t\t\t\t{\n\t\t\t\t\treturn BX.ajax.runAction('bitrix:timeman.api.monitor.getdayreport', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tdateLog\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-viewer\" class=\"pwt-report-container pwt-report-container-viewer\">\n\t\t\t\t\t<div class=\"pwt-report pwt-report-viewer\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user pwt-report-content-header-user-icon\">\n\t\t\t\t\t\t\t\t\t<i v-if=\"userIcon\" :style=\"{backgroundImage: 'url(' + encodeURI(userIcon) + ')'}\"></i>\n\t\t\t\t\t\t\t\t\t<i v-else-if=\"!userIcon\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a class=\"pwt-report-content-header-title\" :href=\"userLink\">\n\t\t\t\t\t\t\t\t\t{{ userName }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, \n\t\t\t\t\t\t\t\t\t\t{{ DateFormatter.toLong(date) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t\t\t\t\t\t\t<bx-timeman-component-timeline\n\t\t\t\t\t\t\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t\t\t\t\t\t\t:chart=\"chartData\"\n\t\t\t\t\t\t\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-viewer-single-group\">\n\t\t\t\t\t\t\t\t\t<Group\n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t:items=\"workingEntities\"\n\t\t\t\t\t\t\t\t\t\t:time=\"workingTime\"\n\t\t\t\t\t\t\t\t\t\t:reportComment=\"reportComment\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"pwt-report-viewer-ears\">\n\t\t\t\t\t\t<div\n                            @click=\"getPreviousReport\"\n\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\tpwt-report-viewer-ear \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-left \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-show\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-if=\"canShowRightEar\"\n\t\t\t\t\t\t\t@click=\"getNextReport\"\n\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\tpwt-report-viewer-ear \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-right \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-show\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst viewer = new Viewer();\n\nexport {viewer as Viewer};","import {Type} from \"main.core\";\nimport {Loc, Tag} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Vuex} from \"ui.vuex\";\nimport {EntityGroup} from \"timeman.const\";\nimport {AddIntervalPopup} from \"./popup/addintervalpopup/addintervalpopup\"\nimport {SelectIntervalPopup} from \"./popup/selectintervalpopup/selectIntervalpopup\"\nimport {Group} from \"./group/group\";\nimport {Consent} from \"./consent/consent\";\nimport {Timeline} from \"./timeline/timeline\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {Monitor} from \"timeman.monitor\";\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PausePopup} from \"./popup/pausepopup/pausepopup\";\nimport {ConfirmPopup} from \"./popup/confirmpopup/confirmpopup\";\nimport {UI} from 'ui.notification';\nimport {Viewer} from \"./report/viewer/viewer\";\nimport {Time} from \"./mixin/time\";\n\nimport {PopupManager} from \"main.popup\";\nimport {Loader} from \"main.loader\";\n\nimport \"ui.pinner\";\nimport \"ui.alerts\";\n\nimport \"ui.design-tokens\";\nimport \"./monitor-report.css\";\n\nclass MonitorReport\n{\n\topen(store)\n\t{\n\t\tif (this.isReportOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 960,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tevents: {\n\t\t\t\tonOpen: () =>\n\t\t\t\t{\n\t\t\t\t\tif (!BXIM || !BXIM.desktop)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\tthis.isReportOpen = true;\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createEditor(store),\n\t\t\t\tonCloseComplete: () =>\n\t\t\t\t{\n\t\t\t\t\tthis.isReportOpen = false;\n\n\t\t\t\t\tif (Monitor.shouldShowGrantingPermissionWindow())\n\t\t\t\t\t{\n\t\t\t\t\t\tMonitor.showGrantingPermissionLater();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!BXIM || !BXIM.desktop)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateEditor(store)\n\t{\n\t\tthis.createEditorApp(store);\n\t}\n\n\topenPreview(store)\n\t{\n\t\tif (this.isReportPreviewOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-preview\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\tthis.isReportPreviewOpen = true;\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createPreview(store),\n\t\t\t\tonCloseComplete: () => {\n\t\t\t\t\tthis.isReportPreviewOpen = false;\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreatePreview(store)\n\t{\n\t\tthis.createPreviewApp(store);\n\t}\n\n\topenViewer(event)\n\t{\n\t\tViewer.open(event);\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateEditorApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tAddIntervalPopup,\n\t\t\t\tSelectIntervalPopup,\n\t\t\t\tConsent,\n\t\t\t\tMountingPortal,\n\t\t\t\tPausePopup,\n\t\t\t\tConfirmPopup,\n\t\t\t},\n\t\t\tstore,\n\t\t\tmixins: [Time],\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tnewInterval: null,\n\t\t\t\t\tshowSelectInternalPopup: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t\tpopupId: null,\n\t\t\t\t\tshowPlayAlert: false,\n\t\t\t\t\tselectedPrivateCode: null,\n\t\t\t\t\tselectIntervalTimeout: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\t...Vuex.mapGetters('monitor',[\n\t\t\t\t\t'getWorkingEntities',\n\t\t\t\t\t'getPersonalEntities',\n\t\t\t\t\t'getReportComment',\n\t\t\t\t\t'hasActivityOtherThanBitrix24'\n\t\t\t\t]),\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tTimeFormatter: () => TimeFormatter,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t\tisHistorySent()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.getters['monitor/isHistorySent'];\n\t\t\t\t},\n\t\t\t\tisPermissionGranted()\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.state.monitor.config.grantingPermissionDate !== null;\n\t\t\t\t},\n\t\t\t\tisPaused()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t},\n\t\t\t\tpausedUntil()\n\t\t\t\t{\n\t\t\t\t\tlet pausedUntil = this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t\tif (!pausedUntil)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pausedUntil.getDay() - new Date().getDay() !== 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_TOMORROW');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn TimeFormatter.toShort(pausedUntil);\n\t\t\t\t},\n\t\t\t\tisWindows()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac && !this.isLinux);\n\t\t\t\t},\n\t\t\t\tisMac()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t\t\t},\n\t\t\t\tisLinux()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t\t\t\t},\n\t\t\t\thasActivity()\n\t\t\t\t{\n\t\t\t\t\tif (this.isMac)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.hasActivityOtherThanBitrix24;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\thasIntervalsToAdd()\n\t\t\t\t{\n\t\t\t\t\treturn Type.isArrayFilled(this.$store.getters['monitor/getChartData']\n\t\t\t\t\t\t.filter(interval =>\n\t\t\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tonIntervalClick(event)\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = event;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupHide()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = true;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalPopupCloseClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tpauseClick(event)\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-editor-pause-popup',\n\t\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\t\tclassName: 'bx-timeman-pwt-pause-popup',\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\tlightShadow : true,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tangle: {},\n\t\t\t\t\t\tbindOptions: {position: 'top'},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: () => this.popupInstance.destroy(),\n\t\t\t\t\t\t\tonPopupDestroy: () => this.popupInstance = null\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-editor-pause-popup`;\n\t\t\t\t\tthis.popupId = 'PausePopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tpause(dateTime)\n\t\t\t\t{\n\t\t\t\t\tMonitor.pauseUntil(dateTime);\n\t\t\t\t},\n\t\t\t\tplay()\n\t\t\t\t{\n\t\t\t\t\tMonitor.play();\n\n\t\t\t\t\tthis.showPlayAlert = true;\n\t\t\t\t\tsetTimeout(() => this.showPlayAlert = false, 1000)\n\t\t\t\t},\n\t\t\t\topenReportPreview()\n\t\t\t\t{\n\t\t\t\t\tMonitor.openReportPreview();\n\t\t\t\t},\n\t\t\t\tselectInterval(privateCode)\n\t\t\t\t{\n\t\t\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.selectedPrivateCode = privateCode;\n\t\t\t\t\t}, 500);\n\t\t\t\t},\n\t\t\t\tunselectInterval()\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\t\t\tthis.selectedPrivateCode = null;\n\t\t\t\t},\n\t\t\t\topenPermissionHelp()\n\t\t\t\t{\n\t\t\t\t\tthis.openHelpdesk('13857358');\n\t\t\t\t},\n\t\t\t\topenSkipConfirm()\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-skip-report-confirm-popup',\n\t\t\t\t\t\ttargetContainer: BX('pwt-report-container-editor'),\n\t\t\t\t\t\tautoHide: false,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-skip-report-confirm-popup`;\n\t\t\t\t\tthis.popupId = 'SkipReportPopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tskipReport()\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('monitor/clearStorageBeforeDate', this.$store.state.monitor.reportState.dateLog)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tconst notifyText = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIPPED')\n\t\t\t\t\t\t\t\t.replace('#DATE#', this.dateLog);\n\n\t\t\t\t\t\t\tthis.$store.dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: notifyText,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\topenPwtHelp()\n\t\t\t\t{\n\t\t\t\t\t// if (this.isMac)\n\t\t\t\t\t// {\n\t\t\t\t\t// \tthis.openHelpdesk('');\n\t\t\t\t\t// \treturn;\n\t\t\t\t\t// }\n\t\t\t\t\t//\n\t\t\t\t\t// if (this.isWindows)\n\t\t\t\t\t// {\n\t\t\t\t\t// \tthis.openHelpdesk('');\n\t\t\t\t\t// \treturn;\n\t\t\t\t\t// }\n\n\t\t\t\t\tthis.openPermissionHelp();\n\t\t\t\t},\n\t\t\t\topenHelpdesk(code)\n\t\t\t\t{\n\t\t\t\t\tif(top.BX.Helper)\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=' + code);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-editor\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<Consent v-if=\"!isPermissionGranted\"/>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-header-buttons-container\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openPwtHelp\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_HELP_BUTTON_TITLE') }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t \t<transition-group\n\t\t\t\t\t\t\t\tname=\"bx-timeman-pwt-report\"\n\t\t\t\t\t\t\t\ttag=\"div\"\n\t\t\t\t\t\t\t\tclass=\"pwt-report-content-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:key=\"'reportNotSentAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-md ui-alert-danger ui-alert-icon-danger\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_NOT_SENT')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#DATE#', dateLog)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t:key=\"'pauseAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"isPaused || showPlayAlert\"\n\t\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t\t'pwt-report-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert-md',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-warning ui-alert-icon-warning': isPaused, \n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-success ui-alert-icon-info' : showPlayAlert,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span v-if=\"isPaused\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PAUSE_UNTIL_TIME')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', pausedUntil)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-if=\"showPlayAlert\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"isPaused\"\n\t\t\t\t\t\t\t\t\t\t@click=\"play\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-xs \n\t\t\t\t\t\t\t\t\t\t\tui-btn-success-dark\n\t\t\t\t\t\t\t\t\t\t\tui-btn-round \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-start\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-group-btn-right\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-alert-btn-right\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:key=\"'activityAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"!hasActivity\"\n\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-icon-info ui-alert-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_MAC_INACTIVE_ALERT') }}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert-link\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"openPermissionHelp\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_MAC_HELP_DETAIL') }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-header'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t\t:selectedPrivateCode=\"selectedPrivateCode\"\n\t\t\t\t\t\t\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-content'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t\t:items=\"getWorkingEntities\"\n\t\t\t\t\t\t\t\t\t\t\t:time=\"workingTime\"\n\t\t\t\t\t\t\t\t\t\t\t:reportComment=\"getReportComment\"\n\t\t\t\t\t\t\t\t\t\t\t:hasIntervalsToAdd=\"hasIntervalsToAdd\"\n\t\t\t\t\t\t\t\t\t\t\t@selectIntervalClick=\"onSelectIntervalClick\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.personal.value\"\n\t\t\t\t\t\t\t\t\t\t\t:items=\"getPersonalEntities\"\n\t\t\t\t\t\t\t\t\t\t\t:time=\"personalTime\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</transition-group>\n\t\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\tpwt-report-button-panel-wrapper \n\t\t\t\t\t\t\t\t\tui-pinner \n\t\t\t\t\t\t\t\t\tui-pinner-bottom \n\t\t\t\t\t\t\t\t\tui-pinner-full-width\" \n\t\t\t\t\t\t\t\tstyle=\"z-index: 0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-page\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openReportPreview\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tid=\"timeman-pwt-button-pause\"\n\t\t\t\t\t\t\t\t\t\t@click=\"pauseClick\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-light-border \n\t\t\t\t\t\t\t\t\t\t\tui-btn-dropdown \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-pause\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openSkipConfirm\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-remove\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<mounting-portal \n\t\t\t\t\t\t\t\t\t\t:mount-to=\"popupIdSelector\" \n\t\t\t\t\t\t\t\t\t\tappend \n\t\t\t\t\t\t\t\t\t\tv-if=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PausePopup\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"popupId === 'PausePopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\" \n\t\t\t\t\t\t\t\t\t\t\t@monitorPause=\"pause\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<ConfirmPopup\n                                            v-if=\"popupId === 'SkipReportPopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TITLE')\"\n\t\t\t\t\t\t\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TEXT')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonOkTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_CONFIRM_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonCancelTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t@okClick=\"skipReport\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</mounting-portal>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\n\t\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-editor\" class=\"bx-timeman-pwt-popup\">\n\t\t\t\t\t\t\t\t<SelectIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"showSelectInternalPopup\"\n\t\t\t\t\t\t\t\t\t@selectIntervalPopupCloseClick=\"onSelectIntervalPopupCloseClick\"\n\t\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<AddIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"newInterval\"\n\t\t\t\t\t\t\t\t\t:minStart=\"newInterval.start\"\n\t\t\t\t\t\t\t\t\t:maxFinish=\"newInterval.finish\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupClose=\"onAddIntervalPopupClose\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupHide=\"onAddIntervalPopupHide\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n\n\tcreatePreviewApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tMountingPortal,\n\t\t\t},\n\t\t\tmixins: [Time],\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tpopupIdSelector: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tstore,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\t...Vuex.mapGetters('monitor',[\n\t\t\t\t\t'getWorkingEntities',\n\t\t\t\t\t'getReportComment',\n\t\t\t\t]),\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tsendReport()\n\t\t\t\t{\n\t\t\t\t\tMonitor.send();\n\t\t\t\t},\n\t\t\t\tclose()\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-preview\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t:items=\"this.getWorkingEntities\"\n\t\t\t\t\t\t\t\t\t\t:time=\"this.workingTime\"\n\t\t\t\t\t\t\t\t\t\t:reportComment=\"this.getReportComment\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendReport\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-share\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SEND_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-preview\" class=\"bx-timeman-pwt-popup\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst monitorReport = new MonitorReport();\n\nexport {monitorReport as MonitorReport};"],"names":["AddIntervalPopup","BitrixVue","localComponent","directives","inserted","element","focus","props","minStart","Date","maxFinish","data","title","start","getTime","finish","comment","created","setSeconds","setMilliseconds","createDateFromTimeString","saveMaxFinish","computed","TimeFormatter","DateFormatter","Type","safeMaxFinish","currentDateTime","canAddInterval","trim","isStartError","isFinishError","isIntervalsConfusedError","methods","addInterval","$store","dispatch","dateLog","toString","type","EntityType","custom","comments","text","time","preFinish","addIntervalPopupClose","$emit","addIntervalPopupHide","inputStart","value","setHours","getHours","setMinutes","getMinutes","inputFinish","date","isDate","addZero","num","hour","min","baseDate","year","getFullYear","month","getMonth","day","getDate","hourMin","split","template","Interval","safeFinish","intervalSelected","SelectIntervalPopup","components","inactiveIntervals","getters","filter","interval","EntityGroup","inactive","selectIntervalPopupCloseClick","onIntervalSelected","event","Time","fullTime","workingTime","personalTime","reduce","sum","entry","inactiveTime","formatSeconds","seconds","$Bitrix","Loc","getMessage","hours","Math","floor","minutes","round","calculateEntryTime","map","getEntityByPrivateCode","privateCode","monitor","entity","find","Item","mixins","action","hintOptions","targetContainer","document","body","selected","selectIntervalTimeout","Vuex","mapGetters","mapState","state","addPersonal","onIntervalUnselected","removePersonal","absence","onCommentClick","addToStrictlyWorking","removeFromStrictlyWorking","removeEntityByPrivateCode","group","content","onSaveComment","onDetailClick","detail","getSiteDetailByPrivateCode","readOnly","setTimeout","clearTimeout","Group","MountingPortal","popupInstance","popupIdSelector","popupContent","isCommentPopup","isDetailPopup","isReportCommentPopup","displayedGroup","getValues","includes","destroy","popup","PopupManager","create","id","autoHide","closeByEsc","bindOptions","position","events","onPopupDestroy","$nextTick","onReportCommentClick","reportComment","saveComment","saveReportComment","addNewLineToComment","selectIntervalClick","hasIntervalsToAdd","Consent","isWindows","navigator","userAgent","toLowerCase","isMac","isLinux","grantPermissionMac","BXDesktopSystem","ListScreenMedia","grantPermission","grantPermissionWindows","grantPermissionLinux","then","BX","Timeman","Monitor","launch","openPermissionHelp","openHelpdesk","code","top","Helper","show","showGrantingPermissionLater","SidePanel","Instance","close","Timeline","Boolean","selectedPrivateCode","String","chartData","overChartData","legendData","working","personal","onIntervalClick","PausePopup","Object","mounted","beforeDestroy","hourPause","pauseUntilTime","pause","fourHourPause","dayPause","setDate","dateTime","ConfirmPopup","buttonOkTitle","buttonCancelTitle","ok","Viewer","report","currentTarget","dataset","userId","user","open","contentCallback","getAppPlaceholder","animationDuration","width","cacheable","label","contentClassName","onLoad","loadReport","response","status","isInit","init","info","format","createApp","errors","forEach","error","console","message","ajax","runAction","Tag","render","reports","userName","fullName","userIcon","icon","userLink","link","isArrayFilled","TEXT","timeline","workingEntities","canShowRightEar","getPreviousReport","getReport","getNextReport","mount","viewer","MonitorReport","store","isReportOpen","onOpen","BXIM","desktop","isFunction","setPreventEsc","onOpenComplete","createEditor","onCloseComplete","shouldShowGrantingPermissionWindow","createEditorApp","isReportPreviewOpen","createPreview","createPreviewApp","newInterval","showSelectInternalPopup","popupId","showPlayAlert","toLong","reportState","isHistorySent","isPermissionGranted","config","grantingPermissionDate","isPaused","pausedUntil","getDay","toShort","hasActivity","hasActivityOtherThanBitrix24","onAddIntervalPopupHide","onAddIntervalPopupClose","onSelectIntervalClick","onSelectIntervalPopupCloseClick","pauseClick","className","bindElement","target","lightShadow","offsetTop","offsetLeft","angle","onPopupClose","pauseUntil","play","openReportPreview","selectInterval","unselectInterval","openSkipConfirm","overlay","skipReport","notifyText","replace","UI","Notification","Center","notify","autoHideDelay","openPwtHelp","sendReport","send","monitorReport"],"mappings":"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"}