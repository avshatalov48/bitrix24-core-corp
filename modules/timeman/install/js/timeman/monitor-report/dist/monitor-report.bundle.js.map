{"version":3,"file":"monitor-report.bundle.js","sources":["../src/popup/addintervalpopup/addintervalpopup.js","../src/popup/selectintervalpopup/interval/interval.js","../src/popup/selectintervalpopup/selectIntervalpopup.js","../src/mixin/time.js","../src/group/item/item.js","../src/group/group.js","../src/consent/consent.js","../src/timeline/timeline.js","../src/popup/pausepopup/pausepopup.js","../src/popup/confirmpopup/confirmpopup.js","../src/report/viewer/viewer.js","../src/monitor-report.js"],"sourcesContent":["import {BitrixVue} from \"ui.vue\";\nimport {EntityType} from \"timeman.const\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {Type} from \"main.core\";\n\nimport 'ui.design-tokens';\nimport \"ui.icons\";\nimport \"../popup.css\";\nimport \"ui.forms\";\nimport \"ui.layout-form\";\n\nexport const AddIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-addinterval', {\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tprops:\n\t{\n\t\tminStart: Date,\n\t\tmaxFinish: Date,\n\t},\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tstart: this.getTime(this.minStart),\n\t\t\tfinish: this.getTime(this.maxFinish),\n\t\t\tcomment: '',\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.minStart.setSeconds(0);\n\t\tthis.minStart.setMilliseconds(0);\n\n\t\tthis.maxFinish.setSeconds(0);\n\t\tthis.maxFinish.setMilliseconds(0);\n\n\t\tif (this.createDateFromTimeString(this.finish) > this.saveMaxFinish)\n\t\t{\n\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tDateFormatter: () => DateFormatter,\n\t\tType: () => Type,\n\t\tsaveMaxFinish()\n\t\t{\n\t\t\tlet safeMaxFinish = this.maxFinish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeMaxFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeMaxFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeMaxFinish;\n\t\t},\n\t\tcanAddInterval()\n\t\t{\n\t\t\tif (this.title.trim() === '' || !this.start || !this.finish)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tconst isStartError = (start < this.minStart);\n\t\t\tconst isFinishError = (finish > this.saveMaxFinish);\n\t\t\tconst isIntervalsConfusedError = (start > finish);\n\n\t\t\treturn !(\n\t\t\t\tisStartError\n\t\t\t\t|| isFinishError\n\t\t\t\t|| isIntervalsConfusedError\n\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\taddInterval()\n\t\t{\n\t\t\tif(!this.canAddInterval)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tthis.$store.dispatch('monitor/addHistory', {\n\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\ttitle: this.title,\n\t\t\t\ttype: EntityType.custom,\n\t\t\t\tcomments: [{\n\t\t\t\t\tdateLog: DateFormatter.toString(start),\n\t\t\t\t\ttext: this.comment\n\t\t\t\t}],\n\t\t\t\ttime: [{\n\t\t\t\t\tstart,\n\t\t\t\t\tpreFinish: null,\n\t\t\t\t\tfinish,\n\t\t\t\t}],\n\t\t\t});\n\n\t\t\tthis.addIntervalPopupClose();\n\t\t},\n\t\taddIntervalPopupClose()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupClose');\n\t\t},\n\t\taddIntervalPopupHide()\n\t\t{\n\t\t\tthis.$emit('addIntervalPopupHide');\n\t\t},\n\t\tinputStart(value)\n\t\t{\n\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\tif (start < this.minStart || value === '')\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (start < this.minStart)\n\t\t\t{\n\t\t\t\tthis.start = this.getTime(this.minStart);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.finish)\n\t\t\t{\n\t\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\t\tif (start >= finish || start >= this.getTime(this.saveMaxFinish))\n\t\t\t\t{\n\t\t\t\t\tstart.setHours(this.saveMaxFinish.getHours());\n\t\t\t\t\tstart.setMinutes(this.saveMaxFinish.getMinutes() - 1);\n\n\t\t\t\t\tthis.start = this.getTime(start);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.start = value;\n\t\t},\n\t\tinputFinish(value)\n\t\t{\n\t\t\tconst finish = this.createDateFromTimeString(this.finish);\n\n\t\t\tif (finish > this.saveMaxFinish || value === '')\n\t\t\t{\n\t\t\t\tthis.finish = this.getTime(this.saveMaxFinish);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.start)\n\t\t\t{\n\t\t\t\tconst start = this.createDateFromTimeString(this.start);\n\n\t\t\t\tif (finish <= start || finish <= this.getTime(this.minStart))\n\t\t\t\t{\n\t\t\t\t\tfinish.setHours(start.getHours());\n\t\t\t\t\tfinish.setMinutes(start.getMinutes() + 1);\n\n\t\t\t\t\tthis.finish = this.getTime(finish);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.finish = value;\n\t\t},\n\t\tgetTime(date)\n\t\t{\n\t\t\tif (!Type.isDate(date))\n\t\t\t{\n\t\t\t\tdate = new Date(date);\n\t\t\t}\n\n\t\t\tconst addZero = num => (num >= 0 && num <= 9) ? '0' + num : num;\n\n\t\t\tconst hour = addZero(date.getHours());\n\t\t\tconst min = addZero(date.getMinutes());\n\n\t\t\treturn hour + ':' + min;\n\t\t},\n\t\tcreateDateFromTimeString(time)\n\t\t{\n\t\t\tconst baseDate = this.minStart;\n\n\t\t\tconst year = baseDate.getFullYear();\n\t\t\tconst month = baseDate.getMonth();\n\t\t\tconst day = baseDate.getDate();\n\n\t\t\tconst hourMin = time.split(':');\n\n\t\t\treturn new Date(\n\t\t\t\tyear,\n\t\t\t\tmonth,\n\t\t\t\tday,\n\t\t\t\thourMin[0],\n\t\t\t\thourMin[1],\n\t\t\t\t0,\n\t\t\t\t0\n\t\t\t);\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-wrap\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_CLICKABLE_HINT') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t  \n\t\t\t\t\t\t<div class=\"ui-form\">\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_TITLE') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_START') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIN_START_HINT')\n\t\t\t\t\t\t\t\t\t\t  \t\t\t.replace('#TIME#', TimeFormatter.toShort(minStart))\n\t\t\t\t\t\t\t\t\t\t  \t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"start\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputStart($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_FINISH') }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t\t{{\n\t\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MAX_FINISH_HINT')\n\t\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', TimeFormatter.toShort(saveMaxFinish))\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-time\">\n\t\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"finish\"\n\t\t\t\t\t\t\t\t\t\t\t\tv-on:blur=\"inputFinish($event.target.value)\"\n\t\t\t\t\t\t\t\t\t\t\t\ttype=\"time\" \n\t\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"padding-right: 4px !important;\"\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_COMMENT') }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-no-resize\">\n\t\t\t\t\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"addInterval\"\n\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t'ui-btn',\n\t\t\t\t\t\t\t\t'ui-btn-md',\n\t\t\t\t\t\t\t\t'ui-btn-primary',\n\t\t\t\t\t\t\t\t!canAddInterval ? 'ui-btn-disabled' : ''\n\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ADD_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"addIntervalPopupHide\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t </button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\n\nimport \"./interval.css\"\n\nexport const Interval = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup-interval', {\n\tprops: {\n\t\tstart: Date,\n\t\tfinish: Date,\n\t},\n\tcomputed:\n\t{\n\t\tTimeFormatter: () => TimeFormatter,\n\t\tsafeFinish()\n\t\t{\n\t\t\tlet safeFinish = this.finish;\n\n\t\t\tconst currentDateTime = new Date();\n\t\t\tcurrentDateTime.setSeconds(0);\n\t\t\tcurrentDateTime.setMilliseconds(0);\n\n\t\t\tif (safeFinish > currentDateTime)\n\t\t\t{\n\t\t\t\tsafeFinish = currentDateTime;\n\t\t\t}\n\n\t\t\treturn safeFinish;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tintervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', {\n\t\t\t\tstart: this.start,\n\t\t\t\tfinish: this.safeFinish,\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup-interval\">\n\t\t\t<div\n\t\t\t\t@click=\"intervalSelected\"\n                class=\"bx-timeman-monitor-report-popup-item\"\n\t\t\t>\n\t\t\t  <div class=\"bx-timeman-monitor-report-popup-title\">\n                {{ TimeFormatter.toShort(start) }} - {{ TimeFormatter.toShort(safeFinish) }}\n\t\t\t  </div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport {Interval} from \"./interval/interval\";\nimport {EntityGroup} from \"timeman.const\";\n\nimport 'ui.design-tokens';\nimport \"ui.icons\";\nimport \"ui.alerts\";\nimport \"../popup.css\";\n\nexport const SelectIntervalPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-selectintervalpopup', {\n\tcomponents:\n\t{\n\t\tInterval,\n\t},\n\tcomputed:\n\t{\n\t\tinactiveIntervals()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData']\n\t\t\t\t.filter(interval =>\n\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tselectIntervalPopupCloseClick()\n\t\t{\n\t\t\tthis.$emit('selectIntervalPopupCloseClick');\n\t\t},\n\t\tonIntervalSelected(event)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', event)\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-selectintervalpopup\">\n\t\t\t<div class=\"bx-timeman-monitor-report-popup-wrap\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-monitor-report-popup\n\t\t\t\t\t\tpopup-window \n\t\t\t\t\t\tpopup-window-with-titlebar \n\t\t\t\t\t\tui-message-box \n\t\t\t\t\t\tui-message-box-medium-buttons \n\t\t\t\t\t\tpopup-window-fixed-width \n\t\t\t\t\t\tpopup-window-fixed-height\n\t\t\t\t\t\" \n\t\t\t\t\tstyle=\"padding: 0\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"popup-window-titlebar\">\n\t\t\t\t\t\t<span class=\"popup-window-titlebar-text\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_INTERVAL_SELECT_INTERVAL') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\tpopup-window-content\n\t\t\t\t\t\t\tbx-timeman-monitor-popup-window-content\n\t\t\t\t\t\t\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\toverflow: auto; \n\t\t\t\t\t\t\tbackground: transparent;\n\t\t\t\t\t\t\twidth: 440px;\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-report-popup-items-container\">\n\t\t\t\t\t\t\t<Interval\n\t\t\t\t\t\t\t\tv-for=\"interval of inactiveIntervals\"\n\t\t\t\t\t\t\t\t:key=\"interval.start.toString()\"\n\t\t\t\t\t\t\t\t:start=\"interval.start\"\n\t\t\t\t\t\t\t\t:finish=\"interval.finish\"\n\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t@click=\"selectIntervalPopupCloseClick\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-light\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","export const Time = {\n\tcomputed:\n\t{\n\t\tfullTime()\n\t\t{\n\t\t\treturn this.workingTime + this.personalTime;\n\t\t},\n\t\tworkingTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getWorkingEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tpersonalTime()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getPersonalEntities'].reduce((sum, entry) => sum + entry.time, 0);\n\t\t},\n\t\tinactiveTime()\n\t\t{\n\t\t\treturn 86400 - (this.workingTime + this.personalTime);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tformatSeconds(seconds)\n\t\t{\n\t\t\tif (seconds < 1)\n\t\t\t{\n\t\t\t\treturn 0 + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t\t}\n\t\t\telse if (seconds < 60)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_LESS_THAN_MINUTE');\n\t\t\t}\n\n\t\t\tlet hours = Math.floor(seconds / 3600);\n\t\t\tlet minutes = Math.round(seconds / 60 % 60);\n\n\t\t\tif (minutes === 60)\n\t\t\t{\n\t\t\t\thours += 1;\n\t\t\t\tminutes = 0;\n\t\t\t}\n\n\t\t\tif (hours > 0)\n\t\t\t{\n\t\t\t\thours = hours + ' ' +  this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_HOUR_SHORT');\n\n\t\t\t\tif (minutes > 0)\n\t\t\t\t{\n\t\t\t\t\tminutes = minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\n\t\t\t\t\treturn hours + ' ' + minutes;\n\t\t\t\t}\n\n\t\t\t\treturn hours;\n\t\t\t}\n\n\t\t\treturn minutes + ' ' + this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_MIXIN_TIME_MINUTES_SHORT');\n\t\t},\n\t\tcalculateEntryTime(entry)\n\t\t{\n\t\t\tconst time = entry.time\n\t\t\t\t.map(interval => {\n\t\t\t\t\tconst finish = interval.finish ? new Date(interval.finish) : new Date();\n\n\t\t\t\t\treturn finish - new Date(interval.start);\n\t\t\t\t})\n\t\t\t\t.reduce((sum, interval) => sum + interval, 0);\n\n\t\t\treturn Math.round(time / 1000);\n\t\t},\n\t\tgetEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\treturn this.monitor.entity.find(entity => entity.privateCode === privateCode);\n\t\t}\n\t}\n};","import {Vuex} from 'ui.vuex';\nimport {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport \"ui.icons\";\nimport \"ui.vue.components.hint\";\n\nimport \"./item.css\"\n\nexport const Item = BitrixVue.localComponent('bx-timeman-monitor-report-group-item', {\n\tmixins: [Time],\n\tprops: [\n\t\t'readOnly',\n\t\t'group',\n\t\t'privateCode',\n\t\t'type',\n\t\t'title',\n\t\t'time',\n\t\t'allowedTime',\n\t\t'comment',\n\t\t'hint',\n\t],\n\tdata: function() {\n\t\treturn {\n\t\t\taction: '',\n\t\t\thintOptions: {\n\t\t\t\ttargetContainer: document.body\n\t\t\t},\n\t\t\tselected: false,\n\t\t\tselectIntervalTimeout: null,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\t...Vuex.mapGetters('monitor',[\n\t\t\t'getSiteDetailByPrivateCode',\n\t\t]),\n\t\t...Vuex.mapState({\n\t\t\tmonitor: state => state.monitor,\n\t\t}),\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t},\n\tmethods:\n\t{\n\t\taddPersonal(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/addPersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\tremovePersonal(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/removePersonal', this.privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/removePersonal', privateCode);\n\t\t\tthis.onIntervalUnselected();\n\t\t},\n\t\taddToStrictlyWorking(privateCode)\n\t\t{\n\t\t\tif (this.type === EntityType.absence && this.comment.trim() === '')\n\t\t\t{\n\t\t\t\tthis.action = () => this.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t\t\tthis.onCommentClick();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/addToStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveFromStrictlyWorking(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeFromStrictlyWorking', privateCode);\n\t\t},\n\t\tremoveEntityByPrivateCode(privateCode)\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/removeEntityByPrivateCode', privateCode);\n\t\t},\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.$emit('commentClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\ttime: this.time,\n\t\t\t\t\tcomment: this.comment,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t},\n\t\t\t\tonSaveComment: this.action,\n\t\t\t});\n\t\t},\n\t\tonDetailClick(event)\n\t\t{\n\t\t\tthis.$emit('detailClick', {\n\t\t\t\tevent,\n\t\t\t\tgroup: this.group,\n\t\t\t\tcontent: {\n\t\t\t\t\tprivateCode: this.privateCode,\n\t\t\t\t\ttitle: this.title,\n\t\t\t\t\tdetail: this.getSiteDetailByPrivateCode(this.privateCode),\n\t\t\t\t\ttime: this.time,\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tonIntervalSelected()\n\t\t{\n\t\t\tthis.$emit('intervalSelected', this.privateCode);\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\tthis.selected = true;\n\t\t\t}, 500);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\n\t\t\tif (this.readOnly)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\tthis.selected = false;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-monitor-group-item-wrap\">\n\t\t\t<div\n\t\t\t\t:class=\"[\n            \t\t'bx-monitor-group-item',\n\t\t\t\t\tthis.selected ? 'bx-monitor-group-item-' + this.group + '-selected' : ''\n\t\t\t\t]\"\n\t\t\t\t@mouseenter=\"onIntervalSelected\"\n\t\t\t\t@mouseleave=\"onIntervalUnselected\"\n\t\t\t>\n\t\t\t\t<template\n\t\t\t\t\tv-if=\"\n\t\t\t\t\t\ttype !== EntityType.group\n\t\t\t\t\t\t&& type !== EntityType.absenceShort\n\t\t\t\t\t\t&& type !== EntityType.other\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t \t<template v-if=\"type === EntityType.absence\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-away\"\n\t\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ABSENCE'),\n\t\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t\thintOptions,\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-absence-hint',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tv-if=\"type === EntityType.absence\"\n\t\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title': comment,\n\t\t\t\t\t\t\t\t\t  'bx-monitor-group-item-title-small': !comment\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<template v-if=\"comment\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">{{ comment }}</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-subtitle\">{{ title }}</div>\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else-if=\"type === EntityType.custom\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"ui-icon ui-icon-common-user bx-monitor-group-item-icon\"\n\t\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\t\ttext: $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CUSTOM_HINT'),\n\t\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t\thintOptions,\n\t\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-custom-hint',\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<i/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<div v-else class=\"bx-monitor-group-item-title\">\n\t\t\t\t\t\t\t\t<template v-if=\"type !== EntityType.site || readOnly\">\n\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t@click=\"onDetailClick\"\n\t\t\t\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-site-title\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if=\"group === EntityGroup.working.value && !readOnly\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t  'ui-icon-service-imessage': comment,\n\t\t\t\t\t\t\t\t  'ui-icon-service-light-imessage': !comment\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t@click=\"onCommentClick\"\n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: comment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"group === EntityGroup.working.value && readOnly && comment\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-comment\"\n\t\t\t\t\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\t\t\t\t\ttext: comment,\n\t\t\t\t\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\t\t\t\t\t...hintOptions,\n\t\t\t\t\t\t\t\t\t\tid: 'bx-vue-hint-monitor-comment',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t{{ time }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"group === EntityGroup.personal.value && !readOnly\"\n\t\t\t\t\t\t@click=\"removePersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_WORKING') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tgroup === EntityGroup.working.value\n\t\t\t\t\t\t\t&& (type !== EntityType.unknown && type !== EntityType.custom)\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"addPersonal(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-light-border ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_TO_PERSONAL') }}\n\t\t\t\t\t</button>\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\ttype === EntityType.custom\n\t\t\t\t\t\t\t&& !readOnly\n\t\t\t\t\t\t\"\n\t\t\t\t\t\t@click=\"removeEntityByPrivateCode(privateCode)\"\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-xs ui-btn-danger-light ui-btn-round bx-monitor-group-btn-right\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_REMOVE') }}\n\t\t\t\t\t</button>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-monitor-group-item-container\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-container\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-title-full\">\n\t\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<bx-hint v-if=\"hint\" :text=\"hint\" :popupOptions=\"hintOptions\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-monitor-group-item-menu\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-item-time\">\n\t\t\t\t\t\t\t\t{{ time }} / {{ allowedTime }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n});\n","import {BitrixVue} from \"ui.vue\";\nimport {Time} from \"../mixin/time\";\nimport {EntityType, EntityGroup} from \"timeman.const\";\nimport {Item} from './item/item';\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PopupManager} from 'main.popup';\nimport {MessageBox} from 'ui.dialogs.messagebox';\n\nimport \"ui.icons\";\n\nimport \"ui.design-tokens\";\nimport \"ui.fonts.opensans\";\nimport \"./group.css\";\n\n\nexport const Group = BitrixVue.localComponent('bx-timeman-monitor-report-group', {\n\tcomponents:\n\t{\n\t\tItem,\n\t\tMountingPortal\n\t},\n\tdirectives:\n\t{\n\t\t'bx-focus':\n\t\t{\n\t\t\tinserted(element)\n\t\t\t{\n\t\t\t\telement.focus()\n\t\t\t}\n\t\t}\n\t},\n\tmixins: [Time],\n\tprops: [\n\t\t'group',\n\t\t'items',\n\t\t'time',\n\t\t'reportComment',\n\t\t'readOnly',\n\t\t'hasIntervalsToAdd',\n\t],\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tpopupInstance: null,\n\t\t\tpopupIdSelector: !!this.readOnly ? '#bx-timeman-pwt-popup-preview' :  '#bx-timeman-pwt-popup-editor',\n\t\t\tpopupContent: {\n\t\t\t\tprivateCode: '',\n\t\t\t\ttitle: '',\n\t\t\t\ttime: '',\n\t\t\t\tcomment: '',\n\t\t\t\tdetail: '',\n\t\t\t\ttype: '',\n\t\t\t\tonSaveComment: '',\n\t\t\t},\n\t\t\tcomment: '',\n\t\t\tisCommentPopup: false,\n\t\t\tisDetailPopup: false,\n\t\t\tisReportCommentPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tEntityType: () => EntityType,\n\t\tEntityGroup: () => EntityGroup,\n\t\tdisplayedGroup()\n\t\t{\n\t\t\tif (this.EntityGroup.getValues().includes(this.group))\n\t\t\t{\n\t\t\t\treturn this.EntityGroup[this.group];\n\t\t\t}\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCommentClick(event)\n\t\t{\n\t\t\tthis.isCommentPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.type = event.content.type;\n\t\t\tthis.popupContent.onSaveComment = event.onSaveComment;\n\t\t\tthis.comment = event.content.comment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonReportCommentClick()\n\t\t{\n\t\t\tthis.isReportCommentPopup = true;\n\t\t\tthis.popupContent.title = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_REPORT_COMMENT');\n\t\t\tthis.comment = this.reportComment;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isReportCommentPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tonDetailClick(event: BaseEvent)\n\t\t{\n\t\t\tthis.isDetailPopup = true;\n\t\t\tthis.popupContent.privateCode = event.content.privateCode;\n\t\t\tthis.popupContent.title = event.content.title;\n\t\t\tthis.popupContent.time = event.content.time;\n\t\t\tthis.popupContent.detail = event.content.detail;\n\n\t\t\tif (this.popupInstance !== null)\n\t\t\t{\n\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\tthis.popupInstance = null;\n\t\t\t}\n\n\t\t\tconst popup = PopupManager.create({\n\t\t\t\tid: \"bx-timeman-pwt-external-data\",\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tbindOptions: {position: \"top\"},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isDetailPopup = false;\n\t\t\t\t\t\tthis.popupInstance = null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\n\t\t\t//little hack for correct open several popups in a row.\n\t\t\tthis.$nextTick(() => this.popupInstance = popup);\n\t\t},\n\t\tsaveComment(privateCode)\n\t\t{\n\t\t\tif (this.comment.trim() === '' && this.popupContent.type === EntityType.absence)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$store.dispatch('monitor/setComment', {\n\t\t\t\tprivateCode,\n\t\t\t\tcomment: this.comment\n\t\t\t});\n\n\t\t\tif (typeof this.popupContent.onSaveComment === 'function')\n\t\t\t{\n\t\t\t\tthis.popupContent.onSaveComment();\n\t\t\t}\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\tsaveReportComment()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/setReportComment', this.comment);\n\n\t\t\tthis.popupInstance.destroy();\n\t\t},\n\t\taddNewLineToComment()\n\t\t{\n\t\t\tthis.comment += '\\n';\n\t\t},\n\t\tselectIntervalClick(event)\n\t\t{\n\t\t\tif (!this.hasIntervalsToAdd)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('selectIntervalClick', event);\n\t\t},\n\t\tonIntervalSelected(privateCode)\n\t\t{\n\t\t\tthis.$emit('intervalSelected', privateCode);\n\t\t},\n\t\tonIntervalUnselected()\n\t\t{\n\t\t\tthis.$emit('intervalUnselected');\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\t\t  \n\t\t<div class=\"bx-timeman-monitor-report-group-wrap\">\t\t\t\n\t\t\t<div class=\"bx-monitor-group\">\t\t\t\t  \n\t\t\t\t<div class=\"bx-monitor-group-header\" v-bind:style=\"{ background: displayedGroup.secondaryColor }\">\n\t\t\t\t\t<div class=\"bx-monitor-group-title-container\">\n                      \t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title\">\n\t\t\t\t\t\t\t\t{{ displayedGroup.title }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-monitor-group-title-wrap\">\n\t\t\t\t\t\t\t\t<div class=\"bx-monitor-group-subtitle\">\n\t\t\t\t\t\t\t\t  {{ formatSeconds(time) }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"this.displayedGroup.value === EntityGroup.working.value && !readOnly\"\n\t\t\t\t\t\t\t\t@click=\"onReportCommentClick\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-button-comment ui-icon ui-icon-xs\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'ui-icon-service-imessage': reportComment, \n\t\t\t\t\t\t\t\t\t'ui-icon-service-light-imessage': !reportComment \n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i \n\t\t\t\t\t\t\t\t\t:style=\"{\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: reportComment ? '#77c18d' : 'transparent'\n\t\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tv-else-if=\"\n\t\t\t\t\t\t\t\t\tthis.displayedGroup.value === EntityGroup.working.value \n\t\t\t\t\t\t\t\t\t&& readOnly \n\t\t\t\t\t\t\t\t\t&& reportComment\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"bx-monitor-group-item-icon bx-monitor-group-item-icon-comment\"\n\t\t\t\t\t\t\t\tv-bx-hint=\"reportComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"(\n\t\t\t\t\t\t\t\tthis.displayedGroup.value === EntityGroup.working.value\n\t\t\t\t\t\t\t\t&& !readOnly \n\t\t\t\t\t\t\t)\"\n\t\t\t\t\t\t\t@click=\"selectIntervalClick\"\n\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t'bx-monitor-group-btn-add': true,\n\t\t\t\t\t\t\t\t'ui-btn': true, \n\t\t\t\t\t\t\t\t'ui-btn-xs': true, \n\t\t\t\t\t\t\t\t'ui-btn-round': true, \n\t\t\t\t\t\t\t\t'ui-btn-light': hasIntervalsToAdd, \n\t\t\t\t\t\t\t\t'ui-btn-disabled': !hasIntervalsToAdd, \n\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t{{ '+ ' + $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_ADD') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!readOnly\" class=\"bx-monitor-group-subtitle-wrap\">\n\t\t\t\t\t\t<div class=\"bx-monitor-group-hint\">\n\t\t\t\t\t\t\t{{ displayedGroup.hint }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-monitor-group-content\" v-bind:style=\"{ background: displayedGroup.lightColor }\">\n\t\t\t\t\t<transition-group name=\"bx-monitor-group-item\" class=\"bx-monitor-group-content-wrap\">\n\t\t\t\t\t\n\t\t\t\t\t\t<Item\n\t\t\t\t\t\t\tv-for=\"item of items\"\n\t\t\t\t\t\t\t:key=\"item.privateCode ? item.privateCode : item.title\"\n\t\t\t\t\t\t\t:group=\"displayedGroup.value\"\n\t\t\t\t\t\t\t:privateCode=\"item.privateCode\"\n\t\t\t\t\t\t\t:type=\"item.type\"\n\t\t\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t\t\t:comment=\"item.comment\"\n\t\t\t\t\t\t\t:time=\"formatSeconds(item.time)\"\n\t\t\t\t\t\t\t:allowedTime=\"item.allowedTime ? formatSeconds(item.allowedTime) : null\"\n\t\t\t\t\t\t\t:readOnly=\"!!readOnly\"\n\t\t\t\t\t\t\t:hint=\"item.hint !== '' ? item.hint : null\"\n\t\t\t\t\t\t\t@commentClick=\"onCommentClick\"\n\t\t\t\t\t\t\t@detailClick=\"onDetailClick\"\n\t\t\t\t\t\t\t@intervalSelected=\"onIntervalSelected\"\n\t\t\t\t\t\t\t@intervalUnselected=\"onIntervalUnselected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t  \n\t\t\t\t\t</transition-group>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<mounting-portal :mount-to=\"popupIdSelector\" append v-if=\"popupInstance\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-wrap\">\t\t\t\t\t\n\t\t\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t\t\t{{ popupContent.title }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isDetailPopup\" \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ popupContent.time }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t\t\t<textarea \n\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-input\"\n\t\t\t\t\t\t\t\tid=\"bx-timeman-monitor-popup-input-comment\"\n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\"\n\t\t\t\t\t\t\t\tv-model=\"comment\"\n\t\t\t\t\t\t\t\tv-bx-focus\n\t\t\t\t\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_ITEM_COMMENT')\"\n\t\t\t\t\t\t\t\t@keydown.enter.prevent.exact=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t@keyup.shift.enter.exact=\"addNewLineToComment\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<div v-if=\"isDetailPopup\" class=\"bx-timeman-monitor-popup-items-container\">\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\tv-for=\"detailItem in popupContent.detail\" \n\t\t\t\t\t\t\t\t\tclass=\"bx-timeman-monitor-popup-item\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteTitle }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t<a target=\"_blank\" :href=\"detailItem.siteUrl\" class=\"bx-timeman-monitor-popup-content-title\">\n\t\t\t\t\t\t\t\t\t\t\t\t{{ detailItem.siteUrl }}\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"bx-timeman-monitor-popup-time\">\n\t\t\t\t\t\t\t\t\t\t{{ formatSeconds(detailItem.time) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\tv-if=\"isCommentPopup || isReportCommentPopup\" \n\t\t\t\t\t\t\t\t@click=\"\n\t\t\t\t\t\t\t\t\tisCommentPopup \n\t\t\t\t\t\t\t\t\t\t? saveComment(popupContent.privateCode) \n\t\t\t\t\t\t\t\t\t\t: saveReportComment()\n\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-md ui-btn-primary\"\n\t\t\t\t\t\t\t\t:class=\"{'ui-btn-disabled': (comment.trim() === '' && popupContent.type === EntityType.absence)}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_OK') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button @click=\"popupInstance.destroy()\" class=\"ui-btn ui-btn-md ui-btn-light\">\n\t\t\t\t\t\t\t\t<span v-if=\"isCommentPopup || isReportCommentPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CANCEL') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span v-if=\"isDetailPopup\" class=\"ui-btn-text\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_GROUP_BUTTON_CLOSE') }}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</mounting-portal>\n\t\t</div>\n\t`\n});","import { BitrixVue } from \"ui.vue\";\n\nimport \"./consent.css\";\n\nexport const Consent = BitrixVue.localComponent('bx-timeman-monitor-report-consent', {\n\tcomputed:\n\t{\n\t\tisWindows()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac && !this.isLinux);\n\t\t},\n\t\tisMac()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t},\n\t\tisLinux()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgrantPermissionMac()\n\t\t{\n\t\t\t//If no native permission window has appeared before, this method will cause it to appear\n\t\t\tBXDesktopSystem.ListScreenMedia(() => {});\n\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermissionWindows()\n\t\t{\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermissionLinux()\n\t\t{\n\t\t\tthis.grantPermission();\n\t\t},\n\t\tgrantPermission()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/grantPermission').then(() => {\n\t\t\t\tBX.Timeman.Monitor.launch();\n\t\t\t});\n\t\t},\n\t\topenPermissionHelp()\n\t\t{\n\t\t\tthis.openHelpdesk('13857358');\n\t\t},\n\t\topenHelpdesk(code)\n\t\t{\n\t\t\tif(top.BX.Helper)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show('redirect=detail&code=' + code);\n\t\t\t}\n\t\t},\n\t\tshowGrantingPermissionLater()\n\t\t{\n\t\t\tthis.$store.dispatch('monitor/showGrantingPermissionLater').then(() => {\n\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t});\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-consent\">\n\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-logo-container\">\n\t\t\t\t\t\t<svg class=\"bx-timeman-monitor-report-consent-logo\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-timeman-monitor-report-consent-description\">\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_1') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_2') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_3') }}</p>\n\t\t\t\t\t\t<p>{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PRODUCT_DESCRIPTION_4') }}</p>\n\t\t\t\t\t\t<p v-if=\"isMac\">\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_DESCRIPTION_MAC') + ' ' }}\n\t\t\t\t\t\t\t<span @click=\"openPermissionHelp\" class=\"bx-timeman-monitor-report-consent-link\">\n\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_DESCRIPTION_MAC_DETAIL') }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-if=\"isMac\"\n\t\t\t\t\t\t\t@click=\"grantPermissionMac\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-else-if=\"isWindows\"\n\t\t\t\t\t\t\t@click=\"grantPermissionWindows\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tv-else-if=\"isLinux\"\n\t\t\t\t\t\t\t@click=\"grantPermissionLinux\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t@click=\"showGrantingPermissionLater\"\n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 16px;\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CONSENT_PROVIDE_LATER') }}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"timeman.component.timeline\";\nimport {EntityGroup} from \"timeman.const\";\nimport {Time} from \"../mixin/time\";\nimport {Type} from \"main.core\"\n\nimport \"./timeline.css\";\n\nexport const Timeline = BitrixVue.localComponent('bx-timeman-monitor-report-timeline', {\n\tprops: {\n\t\treadOnly: Boolean,\n\t\tselectedPrivateCode: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t}\n\t},\n\tmixins: [Time],\n\tcomputed:\n\t{\n\t\tEntityGroup: () => EntityGroup,\n\t\tType: () => Type,\n\t\tchartData()\n\t\t{\n\t\t\treturn this.$store.getters['monitor/getChartData'];\n\t\t},\n\t\toverChartData()\n\t\t{\n\t\t\tif (this.selectedPrivateCode)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['monitor/getOverChartData'](this.selectedPrivateCode);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t},\n\t\tlegendData()\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 1,\n\t\t\t\t\ttype: EntityGroup.working.value,\n\t\t\t\t\ttitle: EntityGroup.working.title + ': ' + this.formatSeconds(this.workingTime),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 2,\n\t\t\t\t\ttype: EntityGroup.personal.value,\n\t\t\t\t\ttitle: EntityGroup.personal.title + ': ' + this.formatSeconds(this.personalTime),\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t<bx-timeman-component-timeline\n\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t:chart=\"chartData\"\n\t\t\t\t:overChart=\"overChartData\"\n\t\t\t\t:legend=\"legendData\"\n\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./pausepopup.css\";\n\nexport const PausePopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-pause', {\n\tprops: {\n\t\tpopupInstance: Object\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\thourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 1);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tfourHourPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setHours(pauseUntilTime.getHours() + 4);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tdayPause()\n\t\t{\n\t\t\tlet pauseUntilTime = new Date();\n\t\t\tpauseUntilTime.setDate(pauseUntilTime.getDate() + 1);\n\t\t\tpauseUntilTime.setHours(0);\n\t\t\tpauseUntilTime.setMinutes(0);\n\t\t\tpauseUntilTime.setSeconds(0);\n\t\t\tpauseUntilTime.setMilliseconds(0);\n\n\t\t\tthis.pause(pauseUntilTime);\n\t\t\tthis.close();\n\t\t},\n\t\tpause(dateTime)\n\t\t{\n\t\t\tthis.$emit('monitorPause', dateTime);\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-pause\">\n\t\t\t<button @click=\"hourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_ONE_HOUR_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"fourHourPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_FOUR_HOURS_BUTTON') }}\n\t\t\t</button>\n\t\t\t<button @click=\"dayPause\" class=\"ui-btn ui-btn-light ui-btn-no-caps bx-timeman-pwt-popup-pause-btn\">\n\t\t\t  {{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_UNTIL_TOMORROW_BUTTON') }}\n\t\t\t</button>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\n\nimport \"./confirmpopup.css\";\n\nexport const ConfirmPopup = BitrixVue.localComponent('bx-timeman-monitor-report-popup-confirm', {\n\tprops: {\n\t\tpopupInstance: Object,\n\t\ttitle: String,\n\t\ttext: String,\n\t\tbuttonOkTitle: String,\n\t\tbuttonCancelTitle: String,\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.close();\n\t},\n\tmethods: {\n\t\tok()\n\t\t{\n\t\t\tthis.$emit('okClick');\n\t\t\tthis.close();\n\t\t},\n\t\tclose()\n\t\t{\n\t\t\tthis.$emit('cancelClick');\n\t\t\tthis.popupInstance.destroy();\n\t\t}\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-monitor-report-popup-confirm\">\n\t\t\t<div class=\"popup-window popup-window-with-titlebar ui-message-box ui-message-box-medium-buttons popup-window-fixed-width popup-window-fixed-height\" style=\"padding: 0\">\n\t\t\t\t<div class=\"bx-timeman-monitor-popup-title popup-window-titlebar\">\n\t\t\t\t\t<span class=\"bx-timeman-monitor-popup--titlebar-text popup-window-titlebar-text\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-content\" style=\"overflow: auto; background: transparent;\">\n\t\t\t\t\t{{ text }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-window-buttons\">\n\t\t\t\t\t<button @click=\"ok\" class=\"ui-btn ui-btn-success\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonOkTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<button @click=\"close\" class=\"ui-btn ui-btn-light\">\n\t\t\t\t\t\t<span class=\"ui-btn-text\">\n\t\t\t\t\t\t\t{{ buttonCancelTitle }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {Loc, Tag, Type} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Timeline} from \"../../timeline/timeline\";\nimport {Group} from \"../../group/group\";\nimport {EntityGroup} from \"timeman.const\";\nimport {DateFormatter} from \"timeman.dateformatter\";\n\nimport \"./viewer.css\";\n\nclass Viewer\n{\n\topen(event)\n\t{\n\t\tthis.report = null;\n\n\t\tlet data = event.currentTarget.dataset;\n\n\t\tlet userId = data.user;\n\t\tlet dateLog = data.date;\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-viewer\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\tcacheable: false,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_SLIDER_TITLE'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tcontentClassName: 'pwt-report-viewer-side-panel-content-container',\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.loadReport(userId, dateLog)\n\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.report = response.data;\n\n\t\t\t\t\t\t\t\tif (!DateFormatter.isInit())\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tDateFormatter.init(this.report.info.date.format);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.createApp(this.report);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(response => {\n\t\t\t\t\t\t\tif(response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.errors.forEach(error => {\n\t\t\t\t\t\t\t\t\tconsole.error(error.message);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tloadReport(userId, dateLog)\n\t{\n\t\treturn BX.ajax.runAction('bitrix:timeman.api.monitor.getdayreport', {\n\t\t\tdata: {\n\t\t\t\tuserId,\n\t\t\t\tdateLog\n\t\t\t}\n\t\t});\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateApp(report)\n\t{\n\t\tlet reports = {};\n\n\t\tlet dateLog = report.info.date.value;\n\t\treports[dateLog] = report;\n\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t},\n\t\t\tdata: function () {\n\t\t\t\treturn {\n\t\t\t\t\tdateLog,\n\t\t\t\t\treports,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tType: () => Type,\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tDateFormatter: () => DateFormatter,\n\t\t\t\treport()\n\t\t\t\t{\n\t\t\t\t\treturn this.reports[this.dateLog];\n\t\t\t\t},\n\t\t\t\tdate()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.date.value;\n\t\t\t\t},\n\t\t\t\tuserId()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.id;\n\t\t\t\t},\n\t\t\t\tuserName()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.fullName;\n\t\t\t\t},\n\t\t\t\tuserIcon()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.icon;\n\t\t\t\t},\n\t\t\t\tuserLink()\n\t\t\t\t{\n\t\t\t\t\treturn this.report.info.user.link;\n\t\t\t\t},\n\t\t\t\treportComment()\n\t\t\t\t{\n\t\t\t\t\tif (!Type.isArrayFilled(this.report.info.reportComment))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.info.reportComment[0].TEXT;\n\t\t\t\t},\n\t\t\t\tchartData()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.timeline === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.timeline.data.map(interval => {\n\t\t\t\t\t\tinterval.start = new Date(interval.start);\n\t\t\t\t\t\tinterval.finish = new Date(interval.finish);\n\n\t\t\t\t\t\treturn interval;\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tworkingEntities()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.report === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.report.data;\n\t\t\t\t},\n\t\t\t\tworkingTime()\n\t\t\t\t{\n\t\t\t\t\tif (this.report.report === null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.report.report.data.reduce((sum, entity) => sum + entity.time, 0);\n\t\t\t\t},\n\t\t\t\tcanShowRightEar()\n\t\t\t\t{\n\t\t\t\t\treturn !(this.dateLog === DateFormatter.toString(new Date()))\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tgetPreviousReport()\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = new Date(this.date);\n\t\t\t\t\tdateLog.setDate(dateLog.getDate() - 1);\n\n\t\t\t\t\tthis.getReport(DateFormatter.toString(dateLog));\n\t\t\t\t},\n\t\t\t\tgetNextReport()\n\t\t\t\t{\n\t\t\t\t\tlet dateLog = new Date(this.date);\n\t\t\t\t\tdateLog.setDate(dateLog.getDate() + 1);\n\n\t\t\t\t\tthis.getReport(DateFormatter.toString(dateLog));\n\t\t\t\t},\n\t\t\t\tgetReport(dateLog)\n\t\t\t\t{\n\t\t\t\t\tif (this.reports[dateLog])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.dateLog = dateLog;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadReport(this.userId, dateLog)\n\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\tif (response.status === 'success')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlet dateLog = response.data.info.date.value;\n\n\t\t\t\t\t\t\t\t\tthis.reports[dateLog] = response.data;\n\n\t\t\t\t\t\t\t\t\tthis.dateLog = dateLog;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(response => {\n\t\t\t\t\t\t\t\tif(response.errors)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresponse.errors.forEach(error => {\n\t\t\t\t\t\t\t\t\t\tconsole.error(error.message);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tloadReport(userId, dateLog)\n\t\t\t\t{\n\t\t\t\t\treturn BX.ajax.runAction('bitrix:timeman.api.monitor.getdayreport', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\tdateLog\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-viewer\" class=\"pwt-report-container pwt-report-container-viewer\">\n\t\t\t\t\t<div class=\"pwt-report pwt-report-viewer\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user pwt-report-content-header-user-icon\">\n\t\t\t\t\t\t\t\t\t<i v-if=\"userIcon\" :style=\"{backgroundImage: 'url(' + encodeURI(userIcon) + ')'}\"></i>\n\t\t\t\t\t\t\t\t\t<i v-else-if=\"!userIcon\"></i>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<a class=\"pwt-report-content-header-title\" :href=\"userLink\">\n\t\t\t\t\t\t\t\t\t{{ userName }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, \n\t\t\t\t\t\t\t\t\t\t{{ DateFormatter.toLong(date) }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-timeman-component-monitor-timeline\">\n\t\t\t\t\t\t\t\t\t<bx-timeman-component-timeline\n\t\t\t\t\t\t\t\t\t\tv-if=\"Type.isArrayFilled(chartData)\"\n\t\t\t\t\t\t\t\t\t\t:chart=\"chartData\"\n\t\t\t\t\t\t\t\t\t\t:fixedSizeType=\"EntityGroup.inactive.value\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-viewer-single-group\">\n\t\t\t\t\t\t\t\t\t<Group\n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t:items=\"workingEntities\"\n\t\t\t\t\t\t\t\t\t\t:time=\"workingTime\"\n\t\t\t\t\t\t\t\t\t\t:reportComment=\"reportComment\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"pwt-report-viewer-ears\">\n\t\t\t\t\t\t<div\n                            @click=\"getPreviousReport\"\n\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\tpwt-report-viewer-ear \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-left \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-show\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-if=\"canShowRightEar\"\n\t\t\t\t\t\t\t@click=\"getNextReport\"\n\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\tpwt-report-viewer-ear \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-right \n\t\t\t\t\t\t\t\tpwt-report-viewer-ear-show\n\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst viewer = new Viewer();\n\nexport {viewer as Viewer};","import {Type} from \"main.core\";\nimport {Loc, Tag} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Vuex} from \"ui.vuex\";\nimport {EntityGroup} from \"timeman.const\";\nimport {AddIntervalPopup} from \"./popup/addintervalpopup/addintervalpopup\"\nimport {SelectIntervalPopup} from \"./popup/selectintervalpopup/selectIntervalpopup\"\nimport {Group} from \"./group/group\";\nimport {Consent} from \"./consent/consent\";\nimport {Timeline} from \"./timeline/timeline\";\nimport {DateFormatter} from \"timeman.dateformatter\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport {Monitor} from \"timeman.monitor\";\nimport {MountingPortal} from 'ui.vue.portal';\nimport {PausePopup} from \"./popup/pausepopup/pausepopup\";\nimport {ConfirmPopup} from \"./popup/confirmpopup/confirmpopup\";\nimport {UI} from 'ui.notification';\nimport {Viewer} from \"./report/viewer/viewer\";\nimport {Time} from \"./mixin/time\";\n\nimport {PopupManager} from \"main.popup\";\nimport {Loader} from \"main.loader\";\n\nimport \"ui.pinner\";\nimport \"ui.alerts\";\n\nimport \"ui.design-tokens\";\nimport \"./monitor-report.css\";\n\nclass MonitorReport\n{\n\topen(store)\n\t{\n\t\tif (this.isReportOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 960,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tevents: {\n\t\t\t\tonOpen: () =>\n\t\t\t\t{\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(true);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\tthis.isReportOpen = true;\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createEditor(store),\n\t\t\t\tonCloseComplete: () =>\n\t\t\t\t{\n\t\t\t\t\tthis.isReportOpen = false;\n\n\t\t\t\t\tif (Monitor.shouldShowGrantingPermissionWindow())\n\t\t\t\t\t{\n\t\t\t\t\t\tMonitor.showGrantingPermissionLater();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isFunction(BXIM.desktop.setPreventEsc))\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.desktop.setPreventEsc(false);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateEditor(store)\n\t{\n\t\tthis.createEditorApp(store);\n\t}\n\n\topenPreview(store)\n\t{\n\t\tif (this.isReportPreviewOpen)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\"timeman:pwt-report-preview\", {\n\t\t\tcontentCallback: () => this.getAppPlaceholder(),\n\t\t\tanimationDuration: 200,\n\t\t\twidth: 750,\n\t\t\tcloseByEsc: true,\n\t\t\ttitle: Loc.getMessage('TIMEMAN_PWT_REPORT_DAY'),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_LABEL'),\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonOpenComplete: () => {\n\t\t\t\t\tthis.isReportPreviewOpen = true;\n\t\t\t\t},\n\t\t\t\tonLoad: () => this.createPreview(store),\n\t\t\t\tonCloseComplete: () => {\n\t\t\t\t\tthis.isReportPreviewOpen = false;\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\tcreatePreview(store)\n\t{\n\t\tthis.createPreviewApp(store);\n\t}\n\n\topenViewer(event)\n\t{\n\t\tViewer.open(event);\n\t}\n\n\tgetAppPlaceholder()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div id=\"pwt\">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"main-ui-loader main-ui-show\" \n\t\t\t\t\t\t\tstyle=\"width: 110px; height: 110px;\" \n\t\t\t\t\t\t\tdata-is-shown=\"true\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<svg class=\"main-ui-loader-svg\" viewBox=\"25 25 50 50\">\n\t\t\t\t\t\t\t\t<circle \n\t\t\t\t\t\t\t\t\tclass=\"main-ui-loader-svg-circle\" \n\t\t\t\t\t\t\t\t\tcx=\"50\" \n\t\t\t\t\t\t\t\t\tcy=\"50\" \n\t\t\t\t\t\t\t\t\tr=\"20\" \n\t\t\t\t\t\t\t\t\tfill=\"none\" \n\t\t\t\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t`;\n\t}\n\n\tcreateEditorApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tAddIntervalPopup,\n\t\t\t\tSelectIntervalPopup,\n\t\t\t\tConsent,\n\t\t\t\tMountingPortal,\n\t\t\t\tPausePopup,\n\t\t\t\tConfirmPopup,\n\t\t\t},\n\t\t\tstore,\n\t\t\tmixins: [Time],\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tnewInterval: null,\n\t\t\t\t\tshowSelectInternalPopup: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t\tpopupId: null,\n\t\t\t\t\tshowPlayAlert: false,\n\t\t\t\t\tselectedPrivateCode: null,\n\t\t\t\t\tselectIntervalTimeout: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\t...Vuex.mapGetters('monitor',[\n\t\t\t\t\t'getWorkingEntities',\n\t\t\t\t\t'getPersonalEntities',\n\t\t\t\t\t'getReportComment',\n\t\t\t\t\t'hasActivityOtherThanBitrix24'\n\t\t\t\t]),\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tTimeFormatter: () => TimeFormatter,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t\tisHistorySent()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.getters['monitor/isHistorySent'];\n\t\t\t\t},\n\t\t\t\tisPermissionGranted()\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.state.monitor.config.grantingPermissionDate !== null;\n\t\t\t\t},\n\t\t\t\tisPaused()\n\t\t\t\t{\n\t\t\t\t\treturn !!this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t},\n\t\t\t\tpausedUntil()\n\t\t\t\t{\n\t\t\t\t\tlet pausedUntil = this.$store.state.monitor.config.pausedUntil;\n\t\t\t\t\tif (!pausedUntil)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pausedUntil.getDay() - new Date().getDay() !== 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_TOMORROW');\n\t\t\t\t\t}\n\n\t\t\t\t\treturn TimeFormatter.toShort(pausedUntil);\n\t\t\t\t},\n\t\t\t\tisWindows()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac && !this.isLinux);\n\t\t\t\t},\n\t\t\t\tisMac()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t\t\t},\n\t\t\t\tisLinux()\n\t\t\t\t{\n\t\t\t\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t\t\t\t},\n\t\t\t\thasActivity()\n\t\t\t\t{\n\t\t\t\t\tif (this.isMac)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.hasActivityOtherThanBitrix24;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\thasIntervalsToAdd()\n\t\t\t\t{\n\t\t\t\t\treturn Type.isArrayFilled(this.$store.getters['monitor/getChartData']\n\t\t\t\t\t\t.filter(interval =>\n\t\t\t\t\t\t\tinterval.type === EntityGroup.inactive.value\n\t\t\t\t\t\t\t&& interval.start < new Date()\n\t\t\t\t\t\t));\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tonIntervalClick(event)\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = event;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupHide()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t},\n\t\t\t\tonAddIntervalPopupClose()\n\t\t\t\t{\n\t\t\t\t\tthis.newInterval = null;\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = true;\n\t\t\t\t},\n\t\t\t\tonSelectIntervalPopupCloseClick()\n\t\t\t\t{\n\t\t\t\t\tthis.showSelectInternalPopup = false;\n\t\t\t\t},\n\t\t\t\tpauseClick(event)\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-editor-pause-popup',\n\t\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\t\tclassName: 'bx-timeman-pwt-pause-popup',\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\tlightShadow : true,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t\toffsetLeft: 10,\n\t\t\t\t\t\tautoHide: true,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\tangle: {},\n\t\t\t\t\t\tbindOptions: {position: 'top'},\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: () => this.popupInstance.destroy(),\n\t\t\t\t\t\t\tonPopupDestroy: () => this.popupInstance = null\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-editor-pause-popup`;\n\t\t\t\t\tthis.popupId = 'PausePopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tpause(dateTime)\n\t\t\t\t{\n\t\t\t\t\tMonitor.pauseUntil(dateTime);\n\t\t\t\t},\n\t\t\t\tplay()\n\t\t\t\t{\n\t\t\t\t\tMonitor.play();\n\n\t\t\t\t\tthis.showPlayAlert = true;\n\t\t\t\t\tsetTimeout(() => this.showPlayAlert = false, 1000)\n\t\t\t\t},\n\t\t\t\topenReportPreview()\n\t\t\t\t{\n\t\t\t\t\tMonitor.openReportPreview();\n\t\t\t\t},\n\t\t\t\tselectInterval(privateCode)\n\t\t\t\t{\n\t\t\t\t\tthis.selectIntervalTimeout = setTimeout(() => {\n\t\t\t\t\t\tthis.selectedPrivateCode = privateCode;\n\t\t\t\t\t}, 500);\n\t\t\t\t},\n\t\t\t\tunselectInterval()\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.selectIntervalTimeout);\n\n\t\t\t\t\tthis.selectedPrivateCode = null;\n\t\t\t\t},\n\t\t\t\topenPermissionHelp()\n\t\t\t\t{\n\t\t\t\t\tthis.openHelpdesk('13857358');\n\t\t\t\t},\n\t\t\t\topenSkipConfirm()\n\t\t\t\t{\n\t\t\t\t\tif (this.popupInstance != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popupInstance.destroy();\n\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst popup = PopupManager.create({\n\t\t\t\t\t\tid: 'bx-timeman-pwt-skip-report-confirm-popup',\n\t\t\t\t\t\ttargetContainer: BX('pwt-report-container-editor'),\n\t\t\t\t\t\tautoHide: false,\n\t\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\t\toverlay: true,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupDestroy: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.popupInstance = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.popupIdSelector = `#bx-timeman-pwt-skip-report-confirm-popup`;\n\t\t\t\t\tthis.popupId = 'SkipReportPopup';\n\n\t\t\t\t\t//little hack for correct open several popups in a row.\n\t\t\t\t\tthis.$nextTick(() => {this.popupInstance = popup});\n\t\t\t\t},\n\t\t\t\tskipReport()\n\t\t\t\t{\n\t\t\t\t\tthis.$store.dispatch('monitor/clearStorageBeforeDate', this.$store.state.monitor.reportState.dateLog)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tconst notifyText = this.$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIPPED')\n\t\t\t\t\t\t\t\t.replace('#DATE#', this.dateLog);\n\n\t\t\t\t\t\t\tthis.$store.dispatch('monitor/refreshDateLog').then(() => {\n\t\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\t\tcontent: notifyText,\n\t\t\t\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\topenPwtHelp()\n\t\t\t\t{\n\t\t\t\t\t// if (this.isMac)\n\t\t\t\t\t// {\n\t\t\t\t\t// \tthis.openHelpdesk('');\n\t\t\t\t\t// \treturn;\n\t\t\t\t\t// }\n\t\t\t\t\t//\n\t\t\t\t\t// if (this.isWindows)\n\t\t\t\t\t// {\n\t\t\t\t\t// \tthis.openHelpdesk('');\n\t\t\t\t\t// \treturn;\n\t\t\t\t\t// }\n\n\t\t\t\t\tthis.openPermissionHelp();\n\t\t\t\t},\n\t\t\t\topenHelpdesk(code)\n\t\t\t\t{\n\t\t\t\t\tif(top.BX.Helper)\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.Helper.show('redirect=detail&code=' + code);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-editor\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<Consent v-if=\"!isPermissionGranted\"/>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<div class=\"pwt-report-header-container\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-header-buttons-container\">\n\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openPwtHelp\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_HELP_BUTTON_TITLE') }}\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t \t<transition-group\n\t\t\t\t\t\t\t\tname=\"bx-timeman-pwt-report\"\n\t\t\t\t\t\t\t\ttag=\"div\"\n\t\t\t\t\t\t\t\tclass=\"pwt-report-content-container\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:key=\"'reportNotSentAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-md ui-alert-danger ui-alert-icon-danger\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_NOT_SENT')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#DATE#', dateLog)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\t\t:key=\"'pauseAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"isPaused || showPlayAlert\"\n\t\t\t\t\t\t\t\t\t:class=\"[\n\t\t\t\t\t\t\t\t\t\t'pwt-report-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert',\n\t\t\t\t\t\t\t\t\t\t'ui-alert-md',\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-warning ui-alert-icon-warning': isPaused, \n\t\t\t\t\t\t\t\t\t\t\t'ui-alert-success ui-alert-icon-info' : showPlayAlert,\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t]\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span v-if=\"isPaused\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ \n\t\t\t\t\t\t\t\t\t\t\t$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PAUSE_UNTIL_TIME')\n\t\t\t\t\t\t\t\t\t\t\t\t.replace('#TIME#', pausedUntil)\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span v-if=\"showPlayAlert\" class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_ALERT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"isPaused\"\n\t\t\t\t\t\t\t\t\t\t@click=\"play\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-xs \n\t\t\t\t\t\t\t\t\t\t\tui-btn-success-dark\n\t\t\t\t\t\t\t\t\t\t\tui-btn-round \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-start\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-group-btn-right\n\t\t\t\t\t\t\t\t\t\t\tbx-monitor-alert-btn-right\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PLAY') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:key=\"'activityAlert'\"\n\t\t\t\t\t\t\t\t\tv-if=\"!hasActivity\"\n\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert ui-alert ui-alert-icon-info ui-alert-md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span class=\"ui-alert-message\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_MAC_INACTIVE_ALERT') }}\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\tclass=\"pwt-report-alert-link\"\n\t\t\t\t\t\t\t\t\t\t\t@click=\"openPermissionHelp\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_VIEWER_MAC_HELP_DETAIL') }}\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-header'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t\t:selectedPrivateCode=\"selectedPrivateCode\"\n\t\t\t\t\t\t\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content\" :key=\"'report-content'\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t\t:items=\"getWorkingEntities\"\n\t\t\t\t\t\t\t\t\t\t\t:time=\"workingTime\"\n\t\t\t\t\t\t\t\t\t\t\t:reportComment=\"getReportComment\"\n\t\t\t\t\t\t\t\t\t\t\t:hasIntervalsToAdd=\"hasIntervalsToAdd\"\n\t\t\t\t\t\t\t\t\t\t\t@selectIntervalClick=\"onSelectIntervalClick\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.personal.value\"\n\t\t\t\t\t\t\t\t\t\t\t:items=\"getPersonalEntities\"\n\t\t\t\t\t\t\t\t\t\t\t:time=\"personalTime\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalSelected=\"selectInterval\"\n\t\t\t\t\t\t\t\t\t\t\t@intervalUnselected=\"unselectInterval\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</transition-group>\n\t\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\tpwt-report-button-panel-wrapper \n\t\t\t\t\t\t\t\t\tui-pinner \n\t\t\t\t\t\t\t\t\tui-pinner-bottom \n\t\t\t\t\t\t\t\t\tui-pinner-full-width\" \n\t\t\t\t\t\t\t\tstyle=\"z-index: 0\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t\t<button \n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-page\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openReportPreview\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tid=\"timeman-pwt-button-pause\"\n\t\t\t\t\t\t\t\t\t\t@click=\"pauseClick\"\n\t\t\t\t\t\t\t\t\t\tclass=\"\n\t\t\t\t\t\t\t\t\t\t\tui-btn \n\t\t\t\t\t\t\t\t\t\t\tui-btn-light-border \n\t\t\t\t\t\t\t\t\t\t\tui-btn-dropdown \n\t\t\t\t\t\t\t\t\t\t\tui-btn-icon-pause\n\t\t\t\t\t\t\t\t\t\t\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PAUSE_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tv-if=\"!isHistorySent\"\n\t\t\t\t\t\t\t\t\t\t@click=\"openSkipConfirm\"\n\t\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-remove\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_BUTTON') }}\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<mounting-portal \n\t\t\t\t\t\t\t\t\t\t:mount-to=\"popupIdSelector\" \n\t\t\t\t\t\t\t\t\t\tappend \n\t\t\t\t\t\t\t\t\t\tv-if=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<PausePopup\n\t\t\t\t\t\t\t\t\t\t\tv-if=\"popupId === 'PausePopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\" \n\t\t\t\t\t\t\t\t\t\t\t@monitorPause=\"pause\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<ConfirmPopup\n                                            v-if=\"popupId === 'SkipReportPopup'\"\n\t\t\t\t\t\t\t\t\t\t\t:popupInstance=\"popupInstance\"\n\t\t\t\t\t\t\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TITLE')\"\n\t\t\t\t\t\t\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_NOTIFICATION_REPORT_SKIP_POPUP_TEXT')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonOkTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SKIP_CONFIRM_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t:buttonCancelTitle=\"$Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON')\"\n\t\t\t\t\t\t\t\t\t\t\t@okClick=\"skipReport\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</mounting-portal>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\n\t\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-editor\" class=\"bx-timeman-pwt-popup\">\n\t\t\t\t\t\t\t\t<SelectIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"showSelectInternalPopup\"\n\t\t\t\t\t\t\t\t\t@selectIntervalPopupCloseClick=\"onSelectIntervalPopupCloseClick\"\n\t\t\t\t\t\t\t\t\t@intervalSelected=\"onIntervalClick\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<AddIntervalPopup\n\t\t\t\t\t\t\t\t\tv-if=\"newInterval\"\n\t\t\t\t\t\t\t\t\t:minStart=\"newInterval.start\"\n\t\t\t\t\t\t\t\t\t:maxFinish=\"newInterval.finish\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupClose=\"onAddIntervalPopupClose\"\n\t\t\t\t\t\t\t\t\t@addIntervalPopupHide=\"onAddIntervalPopupHide\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n\n\tcreatePreviewApp(store)\n\t{\n\t\tBitrixVue.createApp({\n\t\t\tcomponents:\n\t\t\t{\n\t\t\t\tTimeline,\n\t\t\t\tGroup,\n\t\t\t\tMountingPortal,\n\t\t\t},\n\t\t\tmixins: [Time],\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tpopupIdSelector: false,\n\t\t\t\t\tpopupInstance: null,\n\t\t\t\t}\n\t\t\t},\n\t\t\tstore,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\t...Vuex.mapGetters('monitor',[\n\t\t\t\t\t'getWorkingEntities',\n\t\t\t\t\t'getReportComment',\n\t\t\t\t]),\n\t\t\t\tEntityGroup: () => EntityGroup,\n\t\t\t\tdateLog()\n\t\t\t\t{\n\t\t\t\t\treturn DateFormatter.toLong(new Date(this.$store.state.monitor.reportState.dateLog));\n\t\t\t\t},\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tsendReport()\n\t\t\t\t{\n\t\t\t\t\tMonitor.send();\n\t\t\t\t},\n\t\t\t\tclose()\n\t\t\t\t{\n\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t},\n\t\t\t},\n\t\t\t// language=Vue\n\t\t\ttemplate: `\n\t\t\t\t<div id=\"pwt-report-container-preview\" class=\"pwt-report-container\">\n\t\t\t\t\t<div class=\"pwt-report\">\n\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_PREVIEW_SLIDER_TITLE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-content-container\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header\">\n\t\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-header-title\">\n\t\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_WORKDAY') }}, {{ dateLog }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<Timeline\n\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"pwt-report-content\">\n\t\t\t\t\t\t\t\t<div class=\"pwt-report-content-groups\">\n\t\t\t\t\t\t\t\t\t<Group \n\t\t\t\t\t\t\t\t\t\t:group=\"EntityGroup.working.value\"\n\t\t\t\t\t\t\t\t\t\t:items=\"this.getWorkingEntities\"\n\t\t\t\t\t\t\t\t\t\t:time=\"this.workingTime\"\n\t\t\t\t\t\t\t\t\t\t:reportComment=\"this.getReportComment\"\n\t\t\t\t\t\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"pwt-report-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\" style=\"z-index: 0\">\n\t\t\t\t\t\t\t<div class=\"pwt-report-button-panel\">\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"sendReport\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-share\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_SEND_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t@click=\"close\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-light-border\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_PWT_REPORT_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div id=\"bx-timeman-pwt-popup-preview\" class=\"bx-timeman-pwt-popup\"/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}).mount('#pwt');\n\t}\n}\n\nconst monitorReport = new MonitorReport();\n\nexport {monitorReport as MonitorReport};"],"names":["AddIntervalPopup","BitrixVue","localComponent","directives","inserted","element","focus","props","minStart","Date","maxFinish","data","title","start","getTime","finish","comment","created","setSeconds","setMilliseconds","createDateFromTimeString","saveMaxFinish","computed","TimeFormatter","DateFormatter","Type","safeMaxFinish","currentDateTime","canAddInterval","trim","isStartError","isFinishError","isIntervalsConfusedError","methods","addInterval","$store","dispatch","dateLog","toString","type","EntityType","custom","comments","text","time","preFinish","addIntervalPopupClose","$emit","addIntervalPopupHide","inputStart","value","setHours","getHours","setMinutes","getMinutes","inputFinish","date","isDate","addZero","num","hour","min","baseDate","year","getFullYear","month","getMonth","day","getDate","hourMin","split","template","Interval","safeFinish","intervalSelected","SelectIntervalPopup","components","inactiveIntervals","getters","filter","interval","EntityGroup","inactive","selectIntervalPopupCloseClick","onIntervalSelected","event","Time","fullTime","workingTime","personalTime","reduce","sum","entry","inactiveTime","formatSeconds","seconds","$Bitrix","Loc","getMessage","hours","Math","floor","minutes","round","calculateEntryTime","map","getEntityByPrivateCode","privateCode","monitor","entity","find","Item","mixins","action","hintOptions","targetContainer","document","body","selected","selectIntervalTimeout","Vuex","mapGetters","mapState","state","addPersonal","onIntervalUnselected","removePersonal","absence","onCommentClick","addToStrictlyWorking","removeFromStrictlyWorking","removeEntityByPrivateCode","group","content","onSaveComment","onDetailClick","detail","getSiteDetailByPrivateCode","readOnly","setTimeout","clearTimeout","Group","MountingPortal","popupInstance","popupIdSelector","popupContent","isCommentPopup","isDetailPopup","isReportCommentPopup","displayedGroup","getValues","includes","destroy","popup","PopupManager","create","id","autoHide","closeByEsc","bindOptions","position","events","onPopupDestroy","$nextTick","onReportCommentClick","reportComment","saveComment","saveReportComment","addNewLineToComment","selectIntervalClick","hasIntervalsToAdd","Consent","isWindows","navigator","userAgent","toLowerCase","isMac","isLinux","grantPermissionMac","BXDesktopSystem","ListScreenMedia","grantPermission","grantPermissionWindows","grantPermissionLinux","then","BX","Timeman","Monitor","launch","openPermissionHelp","openHelpdesk","code","top","Helper","show","showGrantingPermissionLater","SidePanel","Instance","close","Timeline","Boolean","selectedPrivateCode","String","chartData","overChartData","legendData","working","personal","onIntervalClick","PausePopup","Object","mounted","beforeDestroy","hourPause","pauseUntilTime","pause","fourHourPause","dayPause","setDate","dateTime","ConfirmPopup","buttonOkTitle","buttonCancelTitle","ok","Viewer","report","currentTarget","dataset","userId","user","open","contentCallback","getAppPlaceholder","animationDuration","width","cacheable","label","contentClassName","onLoad","loadReport","response","status","isInit","init","info","format","createApp","errors","forEach","error","console","message","ajax","runAction","Tag","render","reports","userName","fullName","userIcon","icon","userLink","link","isArrayFilled","TEXT","timeline","workingEntities","canShowRightEar","getPreviousReport","getReport","getNextReport","mount","viewer","MonitorReport","store","isReportOpen","onOpen","isFunction","BXIM","desktop","setPreventEsc","onOpenComplete","createEditor","onCloseComplete","shouldShowGrantingPermissionWindow","createEditorApp","isReportPreviewOpen","createPreview","createPreviewApp","newInterval","showSelectInternalPopup","popupId","showPlayAlert","toLong","reportState","isHistorySent","isPermissionGranted","config","grantingPermissionDate","isPaused","pausedUntil","getDay","toShort","hasActivity","hasActivityOtherThanBitrix24","onAddIntervalPopupHide","onAddIntervalPopupClose","onSelectIntervalClick","onSelectIntervalPopupCloseClick","pauseClick","className","bindElement","target","lightShadow","offsetTop","offsetLeft","angle","onPopupClose","pauseUntil","play","openReportPreview","selectInterval","unselectInterval","openSkipConfirm","overlay","skipReport","notifyText","replace","UI","Notification","Center","notify","autoHideDelay","openPwtHelp","sendReport","send","monitorReport"],"mappings":"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"}