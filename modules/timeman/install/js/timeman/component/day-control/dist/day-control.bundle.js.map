{"version":3,"file":"day-control.bundle.js","sources":["../src/day-control.js"],"sourcesContent":["import {Vue} from \"ui.vue\";\nimport {DayState} from 'timeman.const';\nimport {PULL as Pull, PullClient} from 'pull.client';\n\nVue.component('bx-timeman-component-day-control', {\n\tprops: ['isButtonCloseHidden'],\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tstatus: DayState.unknown,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tDayState: () => DayState,\n\t},\n\tmounted()\n\t{\n\t\tthis.getDayStatus();\n\n\t\tPull.subscribe({\n\t\t\ttype: PullClient.SubscriptionType.Server,\n\t\t\tmoduleId: 'timeman',\n\t\t\tcommand: 'changeDayState',\n\t\t\tcallback: (params, extra, command) => {\n\t\t\t\tthis.getDayStatus();\n\t\t\t}\n\t\t});\n\t},\n\tmethods:\n\t{\n\t\tgetDayStatus()\n\t\t{\n\t\t\tthis.callRestMethod('timeman.status', {}, this.setStatusByResult);\n\t\t},\n\t\topenDay()\n\t\t{\n\t\t\tthis.callRestMethod('timeman.open', {}, this.setStatusByResult);\n\t\t},\n\t\tpauseDay()\n\t\t{\n\t\t\tthis.callRestMethod('timeman.pause', {}, this.setStatusByResult);\n\t\t},\n\t\tcloseDay()\n\t\t{\n\t\t\tthis.callRestMethod('timeman.close', {}, this.setStatusByResult);\n\t\t},\n\t\tcallRestMethod(method, params, callback)\n\t\t{\n\t\t\tthis.$Bitrix.RestClient.get().callMethod(method, params, callback)\n\t\t},\n\t\tsetStatusByResult(result)\n\t\t{\n\t\t\tif(!result.error())\n\t\t\t{\n\t\t\t\tthis.status = result.data().STATUS\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-day-control-wrap\">\n\t\t\t<button\n\t\t\t\tv-if=\"this.status === DayState.unknown\"\n\t\t\t\tclass=\"ui-btn ui-btn-default ui-btn-wait ui-btn-disabled\"\n\t\t\t\tstyle=\"width: 130px\"\n\t\t\t/>\n\t\t\t\n\t\t\t<button \n\t\t\t\tv-if=\"this.status === DayState.closed\" \n\t\t\t\t@click=\"openDay\"\n\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-icon-start\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_REOPEN') }}\n\t\t\t</button>\n\t\t\t\n\t\t\t<template v-if=\"this.status === DayState.opened\">\n\t\t\t\t<button\n\t\t\t\t\t@click=\"pauseDay\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-icon-pause tm-btn-pause\"\n\t\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_PAUSE') }}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"!isButtonCloseHidden\"\n\t\t\t\t\t@click=\"closeDay\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-stop\"\n\t\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_FINISH') }}\n\t\t\t\t</button>\n\t\t\t</template>\n\t\t\t\n\t\t\t<template v-if=\"this.status === DayState.paused\">\n\t\t\t\t<button\n\t\t\t\t\t@click=\"openDay\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-icon-start tm-btn-start\"\n\t\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_RESUME') }}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"!isButtonCloseHidden\"\n\t\t\t\t\t@click=\"closeDay\"\n\t\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-stop\"\n\t\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_FINISH') }}\n\t\t\t\t</button>\n\t\t\t</template>\n\t\t\t\n\t\t\t<button\n\t\t\t\tv-if=\"this.status === DayState.expired && !isButtonCloseHidden\"\n\t\t\t\t@click=\"closeDay\"\n\t\t\t\tclass=\"ui-btn ui-btn-danger ui-btn-icon-stop\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('TIMEMAN_DAY_CONTROL_REPORT_DAY_FINISH') }}\n\t\t\t</button>\n\t\t</div>\n\t`\n});"],"names":["Vue","component","props","data","status","DayState","unknown","computed","mounted","getDayStatus","Pull","subscribe","type","PullClient","SubscriptionType","Server","moduleId","command","callback","params","extra","methods","callRestMethod","setStatusByResult","openDay","pauseDay","closeDay","method","$Bitrix","RestClient","get","callMethod","result","error","STATUS","template"],"mappings":";;;;;AAIAA,WAAG,CAACC,SAAJ,CAAc,kCAAd,EAAkD;CACjDC,EAAAA,KAAK,EAAE,CAAC,qBAAD,CAD0C;CAEjDC,EAAAA,IAAI,EAAE,gBACN;CACC,WAAO;CACNC,MAAAA,MAAM,EAAEC,sBAAQ,CAACC;CADX,KAAP;CAGA,GAPgD;CAQjDC,EAAAA,QAAQ,EACR;CACCF,IAAAA,QAAQ,EAAE;CAAA,aAAMA,sBAAN;CAAA;CADX,GATiD;CAYjDG,EAAAA,OAZiD,qBAajD;CAAA;;CACC,SAAKC,YAAL;CAEAC,IAAAA,gBAAI,CAACC,SAAL,CAAe;CACdC,MAAAA,IAAI,EAAEC,sBAAU,CAACC,gBAAX,CAA4BC,MADpB;CAEdC,MAAAA,QAAQ,EAAE,SAFI;CAGdC,MAAAA,OAAO,EAAE,gBAHK;CAIdC,MAAAA,QAAQ,EAAE,kBAACC,MAAD,EAASC,KAAT,EAAgBH,OAAhB,EAA4B;CACrC,QAAA,KAAI,CAACR,YAAL;CACA;CANa,KAAf;CAQA,GAxBgD;CAyBjDY,EAAAA,OAAO,EACP;CACCZ,IAAAA,YADD,0BAEC;CACC,WAAKa,cAAL,CAAoB,gBAApB,EAAsC,EAAtC,EAA0C,KAAKC,iBAA/C;CACA,KAJF;CAKCC,IAAAA,OALD,qBAMC;CACC,WAAKF,cAAL,CAAoB,cAApB,EAAoC,EAApC,EAAwC,KAAKC,iBAA7C;CACA,KARF;CASCE,IAAAA,QATD,sBAUC;CACC,WAAKH,cAAL,CAAoB,eAApB,EAAqC,EAArC,EAAyC,KAAKC,iBAA9C;CACA,KAZF;CAaCG,IAAAA,QAbD,sBAcC;CACC,WAAKJ,cAAL,CAAoB,eAApB,EAAqC,EAArC,EAAyC,KAAKC,iBAA9C;CACA,KAhBF;CAiBCD,IAAAA,cAjBD,0BAiBgBK,MAjBhB,EAiBwBR,MAjBxB,EAiBgCD,QAjBhC,EAkBC;CACC,WAAKU,OAAL,CAAaC,UAAb,CAAwBC,GAAxB,GAA8BC,UAA9B,CAAyCJ,MAAzC,EAAiDR,MAAjD,EAAyDD,QAAzD;CACA,KApBF;CAqBCK,IAAAA,iBArBD,6BAqBmBS,MArBnB,EAsBC;CACC,UAAG,CAACA,MAAM,CAACC,KAAP,EAAJ,EACA;CACC,aAAK7B,MAAL,GAAc4B,MAAM,CAAC7B,IAAP,GAAc+B,MAA5B;CACA;CACD;CA3BF,GA1BiD;CAuDjD;CACAC,EAAAA,QAAQ;CAxDyC,CAAlD;;;;"}