{"version":3,"file":"timeline.bundle.js","sources":["../src/chart/interval/interval.js","../src/chart/chart.js","../src/legend/item/item.js","../src/legend/legend.js","../src/timeline.js"],"sourcesContent":["import {BitrixVue} from \"ui.vue\";\nimport {TimeFormatter} from \"timeman.timeformatter\";\nimport \"ui.vue.components.hint\";\nimport \"./interval.css\";\n\nexport const Interval = BitrixVue.localComponent('bx-timeman-component-timeline-chart-interval',{\n\tprops: {\n\t\ttype: String,\n\t\tstart: Date,\n\t\tfinish: Date,\n\t\tsize: Number,\n\t\tfixedSize: Boolean,\n\t\tshowStartMarker: Boolean,\n\t\tshowFinishMarker: Boolean,\n\t\tclickable: Boolean,\n\t\thint: String,\n\t\tisFirst: Boolean,\n\t\tisLast: Boolean,\n\t\tdisplay: String,\n\t},\n\tcomputed:\n\t{\n\t\tintervalItemClass()\n\t\t{\n\t\t\treturn [\n\t\t\t\t'bx-timeman-component-timeline-chart-interval-item',\n\t\t\t\tthis.type ? 'bx-timeman-component-timeline-chart-interval-item-' + this.type : '',\n\t\t\t\tthis.clickable ? 'bx-timeman-component-timeline-chart-interval-item-clickable' : '',\n\t\t\t\tthis.isFirst && !(this.isFirst && this.isLast) ? 'bx-timeman-component-timeline-chart-interval-first' : '',\n\t\t\t\tthis.isLast && !(this.isFirst && this.isLast) ? 'bx-timeman-component-timeline-chart-interval-last' : '',\n\t\t\t\tthis.isFirst && this.isLast ? 'bx-timeman-component-timeline-chart-interval-round' : '',\n\t\t\t\tthis.display ? 'bx-timeman-component-timeline-chart-interval-item-' + this.display : '',\n\t\t\t]\n\t\t},\n\t\tintervalInlineStyle()\n\t\t{\n\t\t\tconst style = {};\n\n\t\t\tif (this.fixedSize)\n\t\t\t{\n\t\t\t\tstyle.width = '50px';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tstyle.width = this.size + '%';\n\t\t\t}\n\n\t\t\treturn style;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\ttoShortTime(time)\n\t\t{\n\t\t\tif (TimeFormatter.isInit())\n\t\t\t{\n\t\t\t\treturn TimeFormatter.toShort(time);\n\t\t\t}\n\n\t\t\treturn BX.date.format('H:i', time);\n\t\t},\n\t\tintervalClick()\n\t\t{\n\t\t\tthis.$emit('intervalClick', {\n\t\t\t\ttype: this.type,\n\t\t\t\tstart: this.start,\n\t\t\t\tfinish: this.finish,\n\t\t\t});\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"bx-timeman-component-timeline-chart-interval\"\n\t\t\t:style=\"intervalInlineStyle\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"clickable && hint\"\n\t\t\t\tv-bx-hint=\"{\n\t\t\t\t\ttext: hint, \n\t\t\t\t\tposition: 'top'\n\t\t\t\t}\"\n\t\t\t\t:class=\"intervalItemClass\"\n\t\t\t\t@click=\"intervalClick\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\t:class=\"intervalItemClass\"\n\t\t\t/>\n\t\t\t\n\t\t\t<div\n\t\t\t\tclass=\"bx-timeman-component-timeline-chart-interval-marker-container\"\n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tv-if=\"showStartMarker\"\n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker \n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker-start\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-timeman-component-timeline-chart-interval-marker-line\"/>\n\t\t\t\t\t<div class=\"bx-timeman-component-timeline-chart-interval-marker-title\">\n\t\t\t\t\t\t{{ toShortTime(start) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"showFinishMarker\"\n\t\t\t\t\tclass=\"\n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker \n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker-finish\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-timeman-component-timeline-chart-interval-marker-line\"/>\n\t\t\t\t\t<div class=\"bx-timeman-component-timeline-chart-interval-marker-title\">\n\t\t\t\t\t\t{{ toShortTime(finish) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"./chart.css\";\n\nimport {Interval} from \"./interval/interval\";\n\nexport const Chart = BitrixVue.localComponent('bx-timeman-component-timeline-chart',{\n\tcomponents:\n\t{\n\t\tInterval,\n\t},\n\tprops: {\n\t\tintervals: Array,\n\t\tfixedSizeType: String,\n\t\treadOnly: Boolean,\n\t\tshowMarkers: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisOverChart: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tprocessedIntervals()\n\t\t{\n\t\t\tconst oneHour = 3600000;\n\n\t\t\tlet intervals = this.intervals.map(interval => {\n\t\t\t\tinterval.time = interval.finish - interval.start;\n\n\t\t\t\treturn interval;\n\t\t\t})\n\n\t\t\tconst totalTime = intervals\n\t\t\t\t.reduce((sum, interval) => sum + interval.time, 0)\n\t\t\t;\n\n\t\t\tconst totalDynamicTime = totalTime - intervals\n\t\t\t\t.filter(interval => interval.type === this.fixedSizeType\n\t\t\t\t\t&& interval.time > oneHour\n\t\t\t\t\t&& !interval.stretchable\n\t\t\t\t)\n\t\t\t\t.reduce((sum, interval) => sum + interval.time, 0)\n\t\t\t;\n\n\t\t\tlet lastStartMarkerTime = null;\n\n\t\t\tintervals = intervals.map((interval, index, pureIntervals) => {\n\t\t\t\tif (index === 0)\n\t\t\t\t{\n\t\t\t\t\tinterval.showStartMarker = true;\n\t\t\t\t\tlastStartMarkerTime = interval.start;\n\t\t\t\t}\n\t\t\t\telse if (interval.start - lastStartMarkerTime >= oneHour)\n\t\t\t\t{\n\t\t\t\t\tinterval.showStartMarker = true;\n\t\t\t\t\tlastStartMarkerTime = interval.start;\n\t\t\t\t}\n\n\t\t\t\tinterval.showFinishMarker = (\n\t\t\t\t\tindex === pureIntervals.length - 1\n\t\t\t\t);\n\n\t\t\t\tinterval.fixedSize = (\n\t\t\t\t\tinterval.type === this.fixedSizeType\n\t\t\t\t\t&& interval.time > oneHour\n\t\t\t\t\t&& !interval.stretchable\n\t\t\t\t);\n\n\t\t\t\tif (!interval.fixedSize)\n\t\t\t\t{\n\t\t\t\t\tinterval.size = 100 / (totalDynamicTime / interval.time);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tinterval.size = null;\n\t\t\t\t}\n\n\t\t\t\treturn interval;\n\t\t\t});\n\n\t\t\tintervals[0].isFirst = true;\n\t\t\tintervals[intervals.length - 1].isLast = true;\n\n\t\t\t//to avoid collisions with the start marker of the last interval, which is always displayed\n\t\t\tif (intervals.length > 3)\n\t\t\t{\n\t\t\t\tintervals[intervals.length - 1].showStartMarker = true;\n\n\t\t\t\tfor (let i = intervals.length - 2; i > 0; i--)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tintervals[i].showStartMarker\n\t\t\t\t\t\t&& intervals[intervals.length - 1].start - intervals[i].start < oneHour\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tintervals[i].showStartMarker = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (intervals.length === 3)\n\t\t\t{\n\t\t\t\tintervals[intervals.length - 1].showStartMarker = true;\n\t\t\t\tintervals[intervals.length - 2].showStartMarker = true;\n\t\t\t}\n\n\t\t\t//to avoid collisions between markers of the last interval\n\t\t\tif (intervals[intervals.length - 1].finish - intervals[intervals.length - 1].start <= oneHour)\n\t\t\t{\n\t\t\t\tintervals[intervals.length - 1].showStartMarker = false;\n\t\t\t}\n\n\t\t\treturn intervals;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div \n\t\t\t:class=\"{\n\t\t\t\t'bx-timeman-component-timeline-chart': !this.isOverChart,\n\t\t\t\t'bx-timeman-component-timeline-over-chart': this.isOverChart,\n\t\t  \t}\"\n\t\t>\n\t\t\t<div class=\"bx-timeman-component-timeline-chart-outline\">\n\t\t\t\t<div class=\"bx-timeman-component-timeline-chart-outline-background\"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<transition-group \n\t\t\t\tname=\"bx-timeman-component-timeline-chart\"\n\t\t\t\tclass=\"bx-timeman-component-timeline-chart-container\"\n\t\t\t\ttag=\"div\"\n\t\t\t>\n\n\t\t\t<Interval\n\t\t\t\tv-for=\"interval of processedIntervals\"\n\t\t\t\t:key=\"interval.start.getTime()\"\n\t\t\t\t:type=\"interval.type\"\n\t\t\t\t:start=\"interval.start\"\n\t\t\t\t:finish=\"interval.finish\"\n\t\t\t\t:showStartMarker=\"showMarkers ? interval.showStartMarker: false\"\n\t\t\t\t:showFinishMarker=\"showMarkers ? interval.showFinishMarker: false\"\n\t\t\t\t:clickable=\"!readOnly ? interval.clickable : false\"\n\t\t\t\t:hint=\"!readOnly ? interval.clickableHint : null\"\n\t\t\t\t:fixedSize=\"interval.fixedSize\"\n\t\t\t\t:size=\"interval.size\"\n\t\t\t\t:isFirst=\"interval.isFirst\"\n\t\t\t\t:isLast=\"interval.isLast\"\n\t\t\t\t:display=\"interval.display\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\n\t\t\t</transition-group>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"./item.css\";\n\nexport const Item = BitrixVue.localComponent('bx-timeman-component-timeline-legend-item',{\n\tprops: [\n\t\t'type',\n\t\t'title',\n\t],\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-timeline-legend-item\">\n\t\t\t<div \n\t\t\t\t:class=\"[ \n\t\t\t\t\t'bx-timeman-component-timeline-legend-item-marker',\n\t\t\t\t\ttype ? 'bx-timeman-component-timeline-legend-item-marker-' + type : '',\n\t\t\t\t]\"\n\t\t\t/>\n\t\t\t<div class=\"bx-timeman-component-timeline-legend-item-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t`\n});","import {BitrixVue} from \"ui.vue\";\nimport \"./legend.css\";\nimport {Item} from \"./item/item\";\n\nexport const Legend = BitrixVue.localComponent('bx-timeman-component-timeline-legend',{\n\tcomponents:\n\t{\n\t\tItem\n\t},\n\tprops: ['items'],\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-timeline-legend\">\n\t\t\t<transition-group \n\t\t\t\tname=\"bx-timeman-component-timeline-legend\"\n\t\t\t\tclass=\"bx-timeman-component-timeline-legend-container\"\n\t\t\t>\n\n\t\t\t\t<Item\n\t\t\t\t\tv-for=\"item of items\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:type=\"item.type\"\n\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t/>\n\n\t\t\t</transition-group>\n\t\t</div>\n\t`\n});","import {Vue} from \"ui.vue\";\nimport {Type} from \"main.core\";\nimport \"./timeline.css\";\nimport {Chart} from \"./chart/chart\";\nimport {Legend} from \"./legend/legend\";\n\nVue.component('bx-timeman-component-timeline', {\n\tcomponents:\n\t{\n\t\tChart,\n\t\tLegend\n\t},\n\tprops: {\n\t\tchart: Array,\n\t\tlegend: Array,\n\t\tfixedSizeType: String,\n\t\treadOnly: Boolean,\n\t\toverChart: Array,\n\t},\n\tcomputed:\n\t{\n\t\tType: () => Type,\n\t},\n\tmethods:\n\t{\n\t\tonIntervalClick(event)\n\t\t{\n\t\t\tthis.$emit('intervalClick', event);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-timeman-component-timeline\">\n\t\t\t<Chart\n\t\t\t\t:intervals=\"chart\"\n\t\t\t\t:fixedSizeType=\"fixedSizeType\"\n\t\t\t\t:readOnly=\"readOnly\"\n\t\t\t\t@intervalClick=\"onIntervalClick\"\n\t\t\t/>\n\t\t\t\n\t\t\t<Legend\n\t\t\t\t:items=\"legend\"\n\t\t\t/>\n\n\t\t\t<transition appear name=\"bx-timeman-component-timeline-fade\">\n\t\t\t\t<Chart\n\t\t\t\t\tv-if=\"Type.isArrayFilled(overChart)\"\n\t\t\t\t\t:intervals=\"overChart\"\n\t\t\t\t\t:fixedSizeType=\"fixedSizeType\"\n\t\t\t\t\t:readOnly=\"true\"\n\t\t\t\t\t:showMarkers=\"false\"\n\t\t\t\t\t:isOverChart=\"true\"\n\t\t\t\t/>\n\t\t\t</transition>\n\t\t</div>\n\t`\n});"],"names":["Interval","BitrixVue","localComponent","props","type","String","start","Date","finish","size","Number","fixedSize","Boolean","showStartMarker","showFinishMarker","clickable","hint","isFirst","isLast","display","computed","intervalItemClass","intervalInlineStyle","style","width","methods","toShortTime","time","TimeFormatter","isInit","toShort","BX","date","format","intervalClick","$emit","template","Chart","components","intervals","Array","fixedSizeType","readOnly","showMarkers","default","isOverChart","processedIntervals","oneHour","map","interval","totalTime","reduce","sum","totalDynamicTime","filter","stretchable","lastStartMarkerTime","index","pureIntervals","length","i","onIntervalClick","event","Item","Legend","Vue","component","chart","legend","overChart","Type"],"mappings":"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"}