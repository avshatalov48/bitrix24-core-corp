this.BX=this.BX||{};this.BX.Timeman=this.BX.Timeman||{};(function(t,e,n,i,a,r){"use strict";var l=r.BitrixVue.localComponent("bx-timeman-component-timeline-chart-interval",{props:{type:String,start:Date,finish:Date,finishAlias:String,size:Number,fixedSize:Boolean,showStartMarker:Boolean,showFinishMarker:Boolean,clickable:Boolean,hint:String,isFirst:Boolean,isLast:Boolean,display:String},computed:{intervalItemClass:function t(){return["bx-timeman-component-timeline-chart-interval-item",this.type?"bx-timeman-component-timeline-chart-interval-item-"+this.type:"",this.clickable?"bx-timeman-component-timeline-chart-interval-item-clickable":"",this.isFirst&&!(this.isFirst&&this.isLast)?"bx-timeman-component-timeline-chart-interval-first":"",this.isLast&&!(this.isFirst&&this.isLast)?"bx-timeman-component-timeline-chart-interval-last":"",this.isFirst&&this.isLast?"bx-timeman-component-timeline-chart-interval-round":"",this.display?"bx-timeman-component-timeline-chart-interval-item-"+this.display:""]},intervalInlineStyle:function t(){var e={};if(this.fixedSize){e.width="50px"}else{e.width=this.size+"%"}return e}},methods:{toShortTime:function t(e){if(i.TimeFormatter.isInit()){return i.TimeFormatter.toShort(e)}return BX.date.format("H:i",e)},intervalClick:function t(){this.$emit("intervalClick",{type:this.type,start:this.start,finish:this.finish})}},template:'\n\t\t<div \n\t\t\tclass="bx-timeman-component-timeline-chart-interval"\n\t\t\t:style="intervalInlineStyle"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if="clickable && hint"\n\t\t\t\tv-bx-hint="{\n\t\t\t\t\ttext: hint, \n\t\t\t\t\tposition: \'top\'\n\t\t\t\t}"\n\t\t\t\t:class="intervalItemClass"\n\t\t\t\t@click="intervalClick"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\t:class="intervalItemClass"\n\t\t\t/>\n\t\t\t\n\t\t\t<div\n\t\t\t\tclass="bx-timeman-component-timeline-chart-interval-marker-container"\n\t\t\t>\n\t\t\t\t<div \n\t\t\t\t\tv-if="showStartMarker"\n\t\t\t\t\tclass="\n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker \n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker-start\n\t\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<div class="bx-timeman-component-timeline-chart-interval-marker-line"/>\n\t\t\t\t\t<div class="bx-timeman-component-timeline-chart-interval-marker-title">\n\t\t\t\t\t\t{{ toShortTime(start) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if="showFinishMarker"\n\t\t\t\t\tclass="\n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker \n\t\t\t\t\t\tbx-timeman-component-timeline-chart-interval-marker-finish\n\t\t\t\t\t"\n\t\t\t\t>\n\t\t\t\t\t<div class="bx-timeman-component-timeline-chart-interval-marker-line"/>\n\t\t\t\t\t<div class="bx-timeman-component-timeline-chart-interval-marker-title">\n\t\t\t\t\t\t{{ finishAlias ? finishAlias : toShortTime(finish) }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'});var s=r.BitrixVue.localComponent("bx-timeman-component-timeline-chart",{components:{Interval:l},props:{intervals:Array,fixedSizeType:String,readOnly:Boolean,showMarkers:{type:Boolean,default:true},isOverChart:{type:Boolean,default:false}},computed:{processedIntervals:function t(){var e=this;var n=36e5;var i=this.intervals.map((function(t){t.time=t.finish-t.start;return t}));var a=i.reduce((function(t,e){return t+e.time}),0);var r=a-i.filter((function(t){return t.type===e.fixedSizeType&&t.time>n&&!t.stretchable})).reduce((function(t,e){return t+e.time}),0);var l=null;i=i.map((function(t,i,a){if(i===0){t.showStartMarker=true;l=t.start}else if(t.start-l>=n){t.showStartMarker=true;l=t.start}t.showFinishMarker=i===a.length-1;t.fixedSize=t.type===e.fixedSizeType&&t.time>n&&!t.stretchable;if(!t.fixedSize){t.size=100/(r/t.time)}else{t.size=null}return t}));i[0].isFirst=true;i[i.length-1].isLast=true;if(i[i.length-1].finish.getHours()===23&&i[i.length-1].finish.getMinutes()===59){i[i.length-1].finishAlias="24:00"}if(i.length>3){i[i.length-1].showStartMarker=true;for(var s=i.length-2;s>0;s--){if(i[s].showStartMarker&&i[i.length-1].start-i[s].start<n){i[s].showStartMarker=false;break}}}else if(i.length===3){i[i.length-1].showStartMarker=true;i[i.length-2].showStartMarker=true}if(i[i.length-1].finish-i[i.length-1].start<=n){i[i.length-1].showStartMarker=false}return i}},methods:{onIntervalClick:function t(e){this.$emit("intervalClick",e)}},template:'\n\t\t<div \n\t\t\t:class="{\n\t\t\t\t\'bx-timeman-component-timeline-chart\': !this.isOverChart,\n\t\t\t\t\'bx-timeman-component-timeline-over-chart\': this.isOverChart,\n\t\t  \t}"\n\t\t>\n\t\t\t<div class="bx-timeman-component-timeline-chart-outline">\n\t\t\t\t<div class="bx-timeman-component-timeline-chart-outline-background"/>\n\t\t\t</div>\n\t\t\t\n\t\t\t<transition-group \n\t\t\t\tname="bx-timeman-component-timeline-chart"\n\t\t\t\tclass="bx-timeman-component-timeline-chart-container"\n\t\t\t\ttag="div"\n\t\t\t>\n\n\t\t\t<Interval\n\t\t\t\tv-for="interval of processedIntervals"\n\t\t\t\t:key="interval.start.getTime()"\n\t\t\t\t:type="interval.type"\n\t\t\t\t:start="interval.start"\n\t\t\t\t:finish="interval.finish"\n\t\t\t\t:finishAlias="interval.finishAlias ? interval.finishAlias : null"\n\t\t\t\t:showStartMarker="showMarkers ? interval.showStartMarker: false"\n\t\t\t\t:showFinishMarker="showMarkers ? interval.showFinishMarker: false"\n\t\t\t\t:clickable="!readOnly ? interval.clickable : false"\n\t\t\t\t:hint="!readOnly ? interval.clickableHint : null"\n\t\t\t\t:fixedSize="interval.fixedSize"\n\t\t\t\t:size="interval.size"\n\t\t\t\t:isFirst="interval.isFirst"\n\t\t\t\t:isLast="interval.isLast"\n\t\t\t\t:display="interval.display"\n\t\t\t\t@intervalClick="onIntervalClick"\n\t\t\t/>\n\n\t\t\t</transition-group>\n\t\t</div>\n\t'});var m=r.BitrixVue.localComponent("bx-timeman-component-timeline-legend-item",{props:["type","title"],template:"\n\t\t<div class=\"bx-timeman-component-timeline-legend-item\">\n\t\t\t<div \n\t\t\t\t:class=\"[ \n\t\t\t\t\t'bx-timeman-component-timeline-legend-item-marker',\n\t\t\t\t\ttype ? 'bx-timeman-component-timeline-legend-item-marker-' + type : '',\n\t\t\t\t]\"\n\t\t\t/>\n\t\t\t<div class=\"bx-timeman-component-timeline-legend-item-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t"});var o=r.BitrixVue.localComponent("bx-timeman-component-timeline-legend",{components:{Item:m},props:["items"],template:'\n\t\t<div class="bx-timeman-component-timeline-legend">\n\t\t\t<transition-group \n\t\t\t\tname="bx-timeman-component-timeline-legend"\n\t\t\t\tclass="bx-timeman-component-timeline-legend-container"\n\t\t\t>\n\n\t\t\t\t<Item\n\t\t\t\t\tv-for="item of items"\n\t\t\t\t\t:key="item.id"\n\t\t\t\t\t:type="item.type"\n\t\t\t\t\t:title="item.title"\n\t\t\t\t/>\n\n\t\t\t</transition-group>\n\t\t</div>\n\t'});r.Vue.component("bx-timeman-component-timeline",{components:{Chart:s,Legend:o},props:{chart:Array,legend:Array,fixedSizeType:String,readOnly:Boolean,overChart:Array},computed:{Type:function t(){return e.Type}},methods:{onIntervalClick:function t(e){this.$emit("intervalClick",e)}},template:'\n\t\t<div class="bx-timeman-component-timeline">\n\t\t\t<Chart\n\t\t\t\t:intervals="chart"\n\t\t\t\t:fixedSizeType="fixedSizeType"\n\t\t\t\t:readOnly="readOnly"\n\t\t\t\t@intervalClick="onIntervalClick"\n\t\t\t/>\n\t\t\t\n\t\t\t<Legend\n\t\t\t\t:items="legend"\n\t\t\t/>\n\n\t\t\t<transition appear name="bx-timeman-component-timeline-fade">\n\t\t\t\t<Chart\n\t\t\t\t\tv-if="Type.isArrayFilled(overChart)"\n\t\t\t\t\t:intervals="overChart"\n\t\t\t\t\t:fixedSizeType="fixedSizeType"\n\t\t\t\t\t:readOnly="true"\n\t\t\t\t\t:showMarkers="false"\n\t\t\t\t\t:isOverChart="true"\n\t\t\t\t/>\n\t\t\t</transition>\n\t\t</div>\n\t'})})(this.BX.Timeman.Component=this.BX.Timeman.Component||{},BX,BX,BX.Timeman,window,BX);
//# sourceMappingURL=timeline.bundle.map.js