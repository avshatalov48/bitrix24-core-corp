(function(){BX.namespace("BX.Timeman.Component.Popup");BX.Timeman.Component.Popup.DurationPicker=function(t){BX.Timeman.Component.BaseComponent.apply(this,arguments);this.durationPopupToggle=t.durationPopupToggle?t.durationPopupToggle:t.selectOneByRole(t.durationPopupToggleSelector);this.durationInput=t.durationInput?t.durationInput:t.durationInputSelector?t.selectOneByRole(t.durationInputSelector):this.durationPopupToggle;this.addEventHandlers()};BX.Timeman.Component.Popup.DurationPicker.prototype={__proto__:BX.Timeman.Component.BaseComponent.prototype,constructor:BX.Timeman.Component.Popup.DurationPicker,addEventHandlers:function(){BX.bind(this.durationPopupToggle,"click",BX.delegate(this.onDurationPopupToggleClick,this))},onDurationPopupToggleClick:function(t){this.durationPopup=this.buildBreakTimePopup(t);var e=BX.create("span",{props:{className:"timeman-schedule-form-title-break-duration-parts-wrapper"},children:[this.buildDurationPopupInput(BX.message("TIMEMAN_SHIFT_EDIT_POPUP_FORMAT_HOUR"),"hour"),this.buildDurationPopupInput(BX.message("TIMEMAN_SHIFT_EDIT_POPUP_FORMAT_MINUTE"),"min")]});this.durationPopup.setContent(e);this.durationPopup.show()},buildDurationPopupInput:function(t,e){var n="";var a=/([0-9].):([0-9].)/;if(e==="hour"){n=this.durationInput.value.search(a)!==-1?this.durationInput.value.match(a)[1]:"00"}else{n=this.durationInput.value.search(a)!==-1?this.durationInput.value.match(a)[2]:"00"}return BX.create("span",{props:{className:""},children:[BX.create("input",{attrs:{value:n},props:{className:"timeman-schedule-form-title-input"+" timeman-schedule-form-title-input-break-duration-part",type:"number"},dataset:{type:e},events:{input:BX.proxy(this.onDurationUpdate,this),change:BX.proxy(this.onDurationUpdate,this)}}),BX.create("span",{text:t})]})},onDurationUpdate:function(t){var e=t.currentTarget.dataset.type==="hour"?24:59;if(!t.currentTarget.value||(parseInt(t.currentTarget.value)<0||parseInt(t.currentTarget.value)>e)){t.currentTarget.value="00"}if(t.currentTarget.value.length>2){if(t.currentTarget.value.length===3){t.currentTarget.value=t.currentTarget.value.slice(1)}else{t.currentTarget.value="00"}}t.currentTarget.value=t.currentTarget.value.padStart(2,"0");var n=/([0-9-].):([0-9-].)/g;var a=t.currentTarget.value.padStart(2,"0");if(t.currentTarget.dataset.type==="hour"){a=a+":$2"}else{a="$1:"+a}this.durationInput.value=this.durationInput.value.replace(n,a);this.durationInput.value=this.durationInput.value.replace(/--/,"00");if(this.durationPopupToggle&&this.durationPopupToggle.textContent){this.durationPopupToggle.textContent=this.durationInput.value}var u=new Event("updateValue");this.durationInput.dispatchEvent(u)},buildBreakTimePopup:function(t){return new BX.PopupWindow("timeman-break-time-"+Math.random(),t.currentTarget,{titleBar:BX.message("TIMEMAN_SHIFT_EDIT_POPUP_PICK_TIME_TITLE"),autoHide:true,bindElement:t.currentTarget,closeByEsc:true,angle:true,contentColor:"white",contentNoPaddings:true,buttons:[new BX.PopupWindowButton({text:BX.message("TIMEMAN_SHIFT_EDIT_BTN_SET_TITLE"),className:"popup-window-button-blue",events:{click:BX.delegate(function(){this.durationPopup.close()},this)}})]})}}})();
//# sourceMappingURL=duration-picker.map.js