{"version":3,"file":"index.bundle.js","sources":["../src/components/separator.js","../src/components/person-item.js","../src/components/user-item.js","../src/components/more-option.js","../src/components/line.js","../src/components/column-title.js","../src/types.js","../src/components/counter.js","../src/components/state-screen.js","../src/components/search-bar.js","../src/components/page.js","../src/components/loader.js","../src/components/toolbar.js","../src/app.js","../src/mapper.js"],"sourcesContent":["import 'ui.icon-set.actions';\n\nimport '../styles/separator.css';\n\nexport const Separator = {\n\tname: 'Separator',\n\n\tprops: {\n\t\thasLink: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean,\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tstyleObject(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--ui-icon-set__icon-color': this.hasLink ? '#FFC34D' : '#D5D7DB',\n\t\t\t};\n\t\t},\n\t\ticonClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--arrow-right': this.hasLink,\n\t\t\t\t'--delete-hyperlink': !this.hasLink,\n\t\t\t\t'--color-orange': this.hasLink && this.mode === 'direct',\n\t\t\t\t'--color-blue': this.hasLink && this.mode === 'reverse',\n\t\t\t};\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-hcmlink-separator__container\" ref=\"container\">\n\t\t\t<div\n\t\t\t\tclass=\"ui-icon-set hr-hcmlink-separator__container-icon\"\n\t\t\t\t:class=\"iconClasses\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\nimport { Loc, Dom, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport 'ui.icon-set.actions';\n\nimport '../styles/employee-item.css';\n\nexport const PersonItem = {\n\tname: 'PersonItem',\n\n\tprops: {\n\t\tconfig: {\n\t\t\trequired: true,\n\t\t\ttype: {\n\t\t\t\tcompanyId: Number,\n\t\t\t\tmode: String,\n\t\t\t\tisHideInfoAlert: Boolean,\n\t\t\t},\n\t\t},\n\t\tmappedUserIds: {\n\t\t\trequired: true,\n\t\t\ttype: Array,\n\t\t},\n\t\tsuggestId: {\n\t\t\trequired: false,\n\t\t\ttype: [Number, null],\n\t\t},\n\t},\n\n\tdata(): Object {\n\t\treturn {\n\t\t\tisBorderedEmployee: this.config.mode === 'direct',\n\t\t};\n\t},\n\n\temits: [\n\t\t'addEntity',\n\t\t'removeEntity',\n\t],\n\n\tmounted(): void\n\t{\n\t\tconst selector = this.config.mode === 'direct'\n\t\t\t? this.getPersonTagSelector()\n\t\t\t: this.getUserTagSelector()\n\t\t;\n\n\t\tselector.renderTo(this.$refs.container);\n\t},\n\n\tmethods: {\n\t\tgetUserTagSelector(): TagSelector\n\t\t{\n\t\t\tlet preselectedItem = [];\n\t\t\tif (Type.isNumber(this.suggestId))\n\t\t\t{\n\t\t\t\tpreselectedItem = ['user', this.suggestId];\n\t\t\t\tthis.$emit('addEntity', { id: this.suggestId });\n\t\t\t}\n\n\t\t\tconst selector = new TagSelector({\n\t\t\t\tmultiple: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonTagRemove: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.handleItemRemove(tag);\n\t\t\t\t\t},\n\t\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.handleItemSelect(tag);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taddButtonCaption: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SELECTOR_BUTTON_CAPTION'),\n\t\t\t\tshowCreateButton: false,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'hcmlink-user-dialog',\n\t\t\t\t\twidth: 380,\n\t\t\t\t\tsearchOptions: {\n\t\t\t\t\t\tallowCreateItem: false,\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t'!userId': this.mappedUserIds,\n\t\t\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t\t\t\tnameTemplate: '#LAST_NAME# #NAME# #SECOND_NAME#',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tpreselectedItems: [preselectedItem],\n\t\t\t\t\ttabs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_DIALOG_TAB_TITLE_USER'),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\trecentTabOptions: {\n\t\t\t\t\t\tvisible: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tDom.addClass(selector.getOuterContainer(), 'hr-hcmlink-item-employee__user-container');\n\n\t\t\treturn selector;\n\t\t},\n\n\t\tgetPersonTagSelector(): TagSelector\n\t\t{\n\t\t\tlet preselectedItem = [];\n\t\t\tif (Type.isNumber(this.suggestId))\n\t\t\t{\n\t\t\t\tpreselectedItem = ['hcmlink-person-data', this.suggestId];\n\t\t\t\tthis.$emit('addEntity', { id: this.suggestId });\n\t\t\t}\n\n\t\t\tconst selector = new TagSelector({\n\t\t\t\tmultiple: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonTagRemove: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.handleItemRemove(tag);\n\t\t\t\t\t},\n\t\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.handleItemSelect(tag);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\taddButtonCaption: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SELECTOR_BUTTON_CAPTION'),\n\t\t\t\tshowCreateButton: false,\n\t\t\t\ttagTextColor: '#333',\n\t\t\t\ttagBgColor: '#FFF1D6',\n\t\t\t\ttagFontWeight: '400',\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'hcmlink-person-dialog',\n\t\t\t\t\tenableSearch: true,\n\t\t\t\t\twidth: 380,\n\t\t\t\t\tsearchOptions: {\n\t\t\t\t\t\tallowCreateItem: false,\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'hcmlink-person-data',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tcompanyId: this.config.companyId,\n\t\t\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t\t\t\tnameTemplate: '#LAST_NAME# #FIRST_NAME# #PATRONYMIC_NAME#',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\t\tenableSearch: true,\n\t\t\t\t\t\t\tsearchFields: [\n\t\t\t\t\t\t\t\t{ name: 'snils' },\n\t\t\t\t\t\t\t\t{ name: 'subtitle', searchable: false, system: true },\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tpreselectedItems: [preselectedItem],\n\t\t\t\t\ttabs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'persons',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_DIALOG_TAB_TITLE_PERSON'),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\trecentTabOptions: {\n\t\t\t\t\t\tvisible: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tDom.addClass(selector.getOuterContainer(), 'hr-hcmlink-item-employee__person-container');\n\n\t\t\treturn selector;\n\t\t},\n\n\t\thandleItemRemove(tag)\n\t\t{\n\t\t\tthis.$emit('removeEntity', { id: tag.id });\n\t\t},\n\n\t\thandleItemSelect(tag)\n\t\t{\n\t\t\tthis.$emit('addEntity', { id: tag.id });\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"hr-hcmlink-item-employee__container\"\n\t\t\tref=\"container\"\n\t\t></div>\n\t`,\n};\n","import { AvatarRound } from 'ui.avatar';\n\nimport '../styles/user-item.css';\n\nexport const UserItem = {\n\tname: 'UserItem',\n\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tmounted(): void\n\t{\n\t\tif (this.mode === 'direct')\n\t\t{\n\t\t\tthis.getUserAvatarEntity().renderTo(this.$refs.avatarContainer);\n\t\t}\n\t},\n\n\tmethods: {\n\t\tgetUserAvatarEntity(): AvatarRound {\n\t\t\treturn new AvatarRound({\n\t\t\t\tsize: 36,\n\t\t\t\tuserName: this.item.name,\n\t\t\t\tbaseColor: '#FF7C78',\n\t\t\t\tuserpicPath: this.item.avatarLink,\n\t\t\t});\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tdisplayName(): string {\n\t\t\treturn this.item.fullName ?? this.item.name;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"hr-hcmlink-item-user__container\"\n\t\t\t:class=\"{'hr-hcmlink-item-user__container_person': mode === 'reverse'}\"\n\t\t\tref=\"container\"\n\t\t>\n\t\t\t<div v-if=\"this.mode === 'direct'\" class=\"hr-hcmlink-item-user__avatar\" ref=\"avatarContainer\"></div>\n\t\t\t<div class=\"hr-hcmlink-item-user_info\">\n\t\t\t\t<div class=\"hr-hcmlink-item-user__info-name\" :title=\"displayName\">{{ displayName }}</div>\n\t\t\t\t<div class=\"hr-hcmlink-item-user__info-position\" :title=\"item.position\">{{ item.position }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Main, Icon } from 'ui.icon-set.api.core';\nimport { PopupMenu } from 'main.popup';\nimport 'ui.icon-set.actions';\n\nexport const MoreOptions = {\n\tname: 'MoreOption',\n\n\tmethods: {\n\t\tshowMenu() {\n\t\t\tconst popupMenu = PopupMenu.create({\n\t\t\t\tid: 'humanresources-mapper-menu-line-option',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'first',\n\t\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\t\titem.menuWindow.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: 'second',\n\t\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\t\titem.menuWindow.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tpopupMenu.show();\n\t\t},\n\t},\n\n\tmounted()\n\t{\n\t\tnew Icon({\n\t\t\ticon: Main.MORE_INFORMATION,\n\t\t\tsize: 24,\n\t\t\tcolor: getComputedStyle(document.body).getPropertyValue('--ui-color-palette-gray-30'),\n\t\t}).renderTo(this.$refs.container);\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-hcmlink-more-options__container\">\n\t\t\t<span \n\t\t\t\tref=\"container\"\n\t\t\t\t@click=\"showMenu\"\n\t\t\t></span>\n\t\t</div>\n\t`,\n};\n","import { Separator } from './separator';\nimport { PersonItem } from './person-item';\nimport { UserItem } from './user-item';\nimport { MoreOptions } from './more-option';\nimport '../styles/line.css';\n\nexport const Line = {\n\tname: 'Line',\n\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tmappedUserIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tconfig: {\n\t\t\trequired: true,\n\t\t\ttype: {\n\t\t\t\tcompanyId: Number,\n\t\t\t\tmode: String,\n\t\t\t\tisHideInfoAlert: Boolean,\n\t\t\t},\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\thasLink: false,\n\t\t};\n\t},\n\n\temits:\n\t[\n\t\t'createLink',\n\t\t'removeLink',\n\t],\n\n\tcomponents: {\n\t\tPersonItem,\n\t\tUserItem,\n\t\tSeparator,\n\t\tMoreOptions,\n\t},\n\n\tmethods: {\n\t\tonAddEntity(options): void\n\t\t{\n\t\t\tif (this.config.mode === 'direct')\n\t\t\t{\n\t\t\t\tthis.$emit('createLink', { userId: this.item.id, personId: options.id });\n\t\t\t\tthis.hasLink = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('createLink', { userId: options.id, personId: this.item.id });\n\t\t\t\tthis.hasLink = true;\n\t\t\t}\n\t\t},\n\t\tonRemoveEntity(options): void\n\t\t{\n\t\t\tconst userId = this.config.mode === 'direct' ? this.item.id : options.id;\n\n\t\t\tthis.$emit('removeLink', { userId });\n\t\t\tthis.hasLink = false;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-hcmlink-sync__line-container\">\n\t\t\t<div class=\"hr-hcmlink-sync__line-left-container\">\n\t\t\t\t<UserItem\n\t\t\t\t\t:item=item\n\t\t\t\t    :mode=\"config.mode\"\n\t\t\t\t></UserItem>\n\t\t\t\t<Separator\n\t\t\t\t\t:hasLink=hasLink\n\t\t\t\t\t:mode=\"config.mode\"\n\t\t\t\t></Separator>\n\t\t\t</div>\n\t\t\t<div class=\"hr-hcmlink-sync__line-right-container\" :class=\"this.config.mode === 'direct' ? '--person' : '--user'\">\n\t\t\t\t<PersonItem\n\t\t\t\t\t:config=config\n\t\t\t\t\t:suggestId=\"item.suggestId\"\n\t\t\t\t\t:mappedUserIds=mappedUserIds\n\t\t\t\t\t@addEntity=\"onAddEntity\"\n\t\t\t\t\t@removeEntity=\"onRemoveEntity\"\n\t\t\t\t></PersonItem>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const ColumnTitle = {\n\tname: 'ColumnTitle',\n\n\tprops: {\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<template v-if=\"mode === 'direct'\">\n\t\t\t<div class=\"hr-hcmlink-sync__column-title-container\">\n\t\t\t\t<div>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_COLUMN_TITLE_BITRIX') }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_COLUMN_TITLE_ZUP') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<div class=\"hr-hcmlink-sync__column-title-container\">\n\t\t\t\t<div>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_COLUMN_TITLE_ZUP') }}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_COLUMN_TITLE_BITRIX') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t`,\n};","export const EventList = Object.freeze({\n\tHR_DATA_MAPPER_FOOTER_DISPLAY: 'hr-data-mapper-footer-display',\n\tHR_DATA_MAPPER_FORCE_SYNC: 'hr-data-mapper-force-sync',\n\tHR_DATA_MAPPER_DATA_WAS_SAVED: 'hr-data-mapper-data-was-saved',\n\tHR_DATA_MAPPER_CLEAR_SEARCH_INPUT: 'hr-data-mapper-clear-search-input',\n});\n\nexport const Status = Object.freeze({\n\tdone: 'done',\n\tpending: 'pending',\n\tloading: 'loading',\n\tsalaryDone: 'salaryDone',\n\tsearchNotFound: 'searchNotFound',\n});\n","import { Loc, Text } from 'main.core';\nimport { DateFormatter, DateTemplate } from 'im.v2.lib.date-formatter';\nimport { EventEmitter } from 'main.core.events';\nimport { EventList } from '../types';\n\nimport '../styles/counter.css';\n\nexport const Counter = {\n\tname: 'Counter',\n\n\tprops: {\n\t\tcountAllPersonsForMap: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tcountMappedPersons: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tcountUnmappedPersons: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\tlastJobFinishedAt: {\n\t\t\trequired: false,\n\t\t\ttype: Date,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tleftCounterPhrase(): string\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_PAGE_UNMAPPED_TITLE_MSGVER_1', {\n\t\t\t\t'[SPAN]': '<span class=\"hr-hcmlink-sync__counter_count-accent\">',\n\t\t\t\t'[/SPAN]': '</span>',\n\t\t\t\t'#COUNT#': Text.encode(this.countUnmappedPersons),\n\t\t\t});\n\t\t},\n\t\tformatDate(): string\n\t\t{\n\t\t\tif (this.lastJobFinishedAt)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_COUNTER_RIGHT', {\n\t\t\t\t\t'#FORMATTED_DATE#': DateFormatter.formatByTemplate(this.lastJobFinishedAt, DateTemplate.messageReadStatus),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_COUNTER_RIGHT', {\n\t\t\t\t'#FORMATTED_DATE#': Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_COUNTER_RIGHT_DATE_NEVER'),\n\t\t\t});\n\t\t},\n\t},\n\n\tmethods: {\n\t\tforceSync(): void\n\t\t{\n\t\t\tEventEmitter.emit(EventList.HR_DATA_MAPPER_FORCE_SYNC);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div v-html=\"leftCounterPhrase\" class=\"hr-hcmlink-sync__toolbar-bubble hr-hcmlink-sync__counter_container-left\"/>\n\t\t<div class=\"hr-hcmlink-sync__toolbar-bubble hr-hcmlink-sync__counter_container-right\">\n\t\t\t<div class=\"hr-hcmlink-sync__toolbar-format-date\">{{formatDate}}</div>\n\t\t\t<div class=\"hr-hcmlink-sync__toolbar-separator\"></div>\n\t\t\t<div \n\t\t\t\tclass=\"hr-hcmlink-sync__toolbar-update-button\"\n\t\t\t\t@click=\"forceSync\"\n\t\t\t>\n\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_COUNTER_RIGHT_UPDATE_BUTTON') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport { Status } from '../types';\n\nimport '../styles/state-screen.css';\n\nexport const StateScreen = {\n\tname: 'StateScreen',\n\n\tprops: {\n\t\tstatus: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\tisBlock: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t},\n\n\temits: ['completeMapping', 'abortSync'],\n\n\tmounted(): void\n\t{\n\t\tthis.getCloseButton().renderTo(this.$refs.buttonContainer);\n\t\tthis.getAbortSyncButton().renderTo(this.$refs.abortSyncButtonContainer);\n\t},\n\n\tmethods: {\n\t\tgetCloseButton(): Button\n\t\t{\n\t\t\tconst text = this.status === Status.done\n\t\t\t\t? Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_BUTTON_CLOSE')\n\t\t\t\t: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_BUTTON_SALARY_CLOSE')\n\t\t\t;\n\n\t\t\treturn new Button({\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tround: true,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\ttext,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.$emit('completeMapping');\n\t\t\t\t\tBX.SidePanel.Instance.getTopSlider().close();\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\n\t\tgetAbortSyncButton(): Button\n\t\t{\n\t\t\treturn new Button({\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tround: true,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\ttext: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_ABORT_LOAD_BUTTON'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.$emit('abortSync');\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t},\n\n\tcomputed: {\n\t\ttitle(): string {\n\t\t\tswitch (this.status)\n\t\t\t{\n\t\t\t\tcase Status.loading:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_LOADING');\n\t\t\t\tcase Status.pending:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_PENDING');\n\t\t\t\tcase Status.done:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_DONE');\n\t\t\t\tcase Status.salaryDone:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_SALARY_DONE');\n\t\t\t\tcase Status.searchNotFound:\n\t\t\t\t\treturn this.mode === 'direct'\n\t\t\t\t\t\t? Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_SEARCH_NOT_FOUND_DIRECT')\n\t\t\t\t\t\t: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_TITLE_STATUS_SEARCH_NOT_FOUND_REVERSE');\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\tdescription(): string {\n\t\t\tswitch (this.status)\n\t\t\t{\n\t\t\t\tcase Status.loading:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_DESCRIPTION_STATUS_LOADING');\n\t\t\t\tcase Status.pending:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_DESCRIPTION_STATUS_PENDING_MSGVER_1');\n\t\t\t\tcase Status.done:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_DESCRIPTION_STATUS_DONE');\n\t\t\t\tcase Status.salaryDone:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_DESCRIPTION_STATUS_SALARY_DONE');\n\t\t\t\tcase Status.searchNotFound:\n\t\t\t\t\treturn Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_STATE_DESCRIPTION_STATUS_SEARCH_NOT_FOUND');\n\t\t\t\tdefault: return '';\n\t\t\t}\n\t\t},\n\n\t\tstateClassList(): Object {\n\t\t\treturn {\n\t\t\t\t'--done': this.isDoneState,\n\t\t\t\t'--pending': this.isPendingState,\n\t\t\t\t'--search-not-found': this.status === Status.searchNotFound,\n\t\t\t\t'--block': this.isBlock,\n\t\t\t\t'--flex': !this.isBlock,\n\t\t\t};\n\t\t},\n\n\t\tisDoneState(): boolean {\n\t\t\treturn [Status.done, Status.salaryDone].includes(this.status);\n\t\t},\n\n\t\tisPendingState(): boolean {\n\t\t\treturn [Status.pending, Status.loading].includes(this.status);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-hcmlink-mapping-person__state-screen\" :class=\"stateClassList\">\n\t\t\t<div class=\"hr-hcmlink-mapping-person__state-screen_icon\"></div>\n\t\t\t<div \n\t\t\t\tclass=\"hr-hcmlink-mapping-person__state-screen_title\"\n\t\t\t\tv-html=\"title\"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tclass=\"hr-hcmlink-mapping-person__state-screen_desc\"\n\t\t\t\tv-html=\"description\"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<div \n\t\t\t\tv-if=\"isDoneState\"\n\t\t\t\tclass=\"hr-hcmlink-mapping-person__state-screen_close-button\" ref=\"closeButtonContainer\"\n\t\t\t></div>\n\t\t\t<div \n\t\t\t\tv-if=\"status === 'pending'\"\n\t\t\t\tclass=\"hr-hcmlink-mapping-person__state-screen_abort-sync-button\" ref=\"abortSyncButtonContainer\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import { BIcon, Set } from 'ui.icon-set.api.vue';\nimport { EventList } from '../types';\n\nimport '../styles/search-bar.css';\n\nexport const SearchBar = {\n\tname: 'SearchBar',\n\n\tprops: {\n\t\tplaceholder: {\n\t\t\trequired: false,\n\t\t\ttype: String,\n\t\t},\n\t\t// how many milliseconds passes before emitting 'onSearch' event after input\n\t\tdebounceWait: {\n\t\t\trequired: false,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tBIcon,\n\t},\n\n\tdirectives: {\n\t\tfocus: {\n\t\t\tmounted(el)\n\t\t\t{\n\t\t\t\tel.focus();\n\t\t\t},\n\t\t},\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowSearchBar: false,\n\t\t\tsearchQuery: '',\n\t\t\tdebounceTimer: null,\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.subscribe(EventList.HR_DATA_MAPPER_DATA_WAS_SAVED, this.clearInput);\n\t\tthis.$Bitrix.eventEmitter.subscribe(EventList.HR_DATA_MAPPER_CLEAR_SEARCH_INPUT, this.clearInput);\n\t},\n\n\tunmounted(): void\n\t{\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(EventList.HR_DATA_MAPPER_DATA_WAS_SAVED, this.clearInput);\n\t\tthis.$Bitrix.eventEmitter.unsubscribe(EventList.HR_DATA_MAPPER_CLEAR_SEARCH_INPUT, this.clearInput);\n\t},\n\n\temits: [\n\t\t'search',\n\t],\n\n\tcomputed: {\n\t\tIconSet(): typeof Set\n\t\t{\n\t\t\treturn Set;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonBlur(): void\n\t\t{\n\t\t\tif (this.searchQuery.length === 0)\n\t\t\t{\n\t\t\t\tthis.searchQuery = '';\n\t\t\t\tthis.hideSearchbar();\n\t\t\t}\n\t\t},\n\t\tclearInput(): void\n\t\t{\n\t\t\tthis.searchQuery = '';\n\t\t},\n\n\t\ttoggleSearchbar(): void\n\t\t{\n\t\t\tif (this.showSearchBar)\n\t\t\t{\n\t\t\t\tthis.showSearchBar = false;\n\t\t\t\tthis.searchQuery = '';\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showSearchBar = true;\n\t\t},\n\n\t\tonAfterEnter(): void\n\t\t{\n\t\t\tif (this.$refs.searchNameInput)\n\t\t\t{\n\t\t\t\tthis.$refs.searchNameInput.focus();\n\t\t\t}\n\t\t},\n\n\t\thideSearchbar(): void\n\t\t{\n\t\t\tthis.showSearchBar = false;\n\t\t},\n\n\t\tclearSearch(): void\n\t\t{\n\t\t\tif (this.$refs.searchNameInput)\n\t\t\t{\n\t\t\t\tthis.searchQuery = '';\n\t\t\t\tthis.$refs.searchNameInput.focus();\n\t\t\t}\n\t\t},\n\t},\n\n\twatch: {\n\t\tsearchQuery(query): void {\n\t\t\tif (this.debounceTimer)\n\t\t\t{\n\t\t\t\tclearTimeout(this.debounceTimer);\n\t\t\t}\n\t\t\tthis.debounceTimer = setTimeout(() => {\n\t\t\t\tthis.$emit('search', query);\n\t\t\t}, this.debounceWait);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"hr-hcmlink-sync__content-search-container\"\n\t\t>\n\t\t\t<transition\n\t\t\t\tname=\"hr-hcmlink-sync__search-transition\"\n\t\t\t\t@after-enter=\"onAfterEnter\"\n\t\t\t\tmode=\"out-in\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-hcmlink-sync__content-search-block__search\"\n\t\t\t\t\t@click=\"toggleSearchbar\"\n\t\t\t\t\tkey=\"searchIcon\"\n\t\t\t\t\tv-if=\"!showSearchBar\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon :name=\"IconSet.SEARCH_2\" :size=\"24\" class=\"hr-hcmlink-sync__search-icon\"></BIcon>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-hcmlink-sync__content-search-block__search-bar\"\n\t\t\t\t\tkey=\"searchBar\"\n\t\t\t\t\tv-else\n\t\t\t\t>\n\t\t\t\t\t<input\n\t\t\t\t\t\tref=\"searchNameInput\"\n\t\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\t\tv-focus\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:placeholder=\"!searchQuery ? placeholder : ''\"\n\t\t\t\t\t\tclass=\"hr-hcmlink-sync__content-search-block__search-input\"\n\t\t\t\t\t\t@blur=\"onBlur\"\n\t\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\t@click=\"clearSearch\"\n\t\t\t\t\t\tclass=\"hr-hcmlink-sync__content-search-block__search-reset\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"hr-hcmlink-sync__content-search-block__search-cursor\"></div>\n\t\t\t\t\t\t<BIcon\n\t\t\t\t\t\t\t:name=\"IconSet.CROSS_30\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\tcolor=\"#959ca4\"\n\t\t\t\t\t\t></BIcon>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</transition>\n\t\t</div>\n\t`,\n};\n","import { Alert } from 'ui.alerts';\nimport { Line } from './line';\nimport { ColumnTitle } from './column-title';\nimport { Counter } from './counter';\nimport { Event, Loc, Tag } from 'main.core';\nimport { StateScreen } from './state-screen';\nimport { SearchBar } from './search-bar';\n\nimport '../styles/page.css';\n\nconst HELPDESK_CODE = '23343056';\n\nexport const Page = {\n\tname: 'Page',\n\n\tprops: {\n\t\tcollection: {\n\t\t\trequired: true,\n\t\t\ttype: Array,\n\t\t},\n\t\tmappedUserIds: {\n\t\t\trequired: true,\n\t\t\ttype: Array,\n\t\t},\n\t\tconfig: {\n\t\t\trequired: true,\n\t\t\ttype: {\n\t\t\t\tcompanyId: Number,\n\t\t\t\tisHideInfoAlert: Boolean,\n\t\t\t\tmode: 'direct' | 'reverse',\n\t\t\t},\n\t\t},\n\t\tsearchActive: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean,\n\t\t},\n\t\tdataLoading: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tLine,\n\t\tColumnTitle,\n\t\tCounter,\n\t\tStateScreen,\n\t\tSearchBar,\n\t},\n\n\temits:\n\t[\n\t\t'createLink',\n\t\t'removeLink',\n\t\t'closeAlert',\n\t\t'search',\n\t],\n\n\tmounted(): void\n\t{\n\t\tif (!this.config.isHideInfoAlert)\n\t\t{\n\t\t\tthis.createAlert();\n\t\t}\n\t},\n\n\tcomputed:\n\t{\n\t\tisSearchResultEmpty(): boolean\n\t\t{\n\t\t\treturn this.collection.length === 0 && this.searchActive;\n\t\t},\n\t\tsearchPlaceholder(): string\n\t\t{\n\t\t\treturn this.config.mode === 'direct'\n\t\t\t\t? Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_USERS_SEARCH_PLACEHOLDER_DIRECT')\n\t\t\t\t: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_USERS_SEARCH_PLACEHOLDER_REVERSE');\n\t\t},\n\t},\n\n\tmethods: {\n\t\tcreateAlert(): void\n\t\t{\n\t\t\tconst moreButton = Tag.render`<span class=\"hr-hcmlink-mapping-alert-container__more-button\">${Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SHOW_MORE_BUTTON')}</span>`;\n\t\t\tconst alert = new Alert({\n\t\t\t\ttext: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_ALERT_INFO'),\n\t\t\t\tcolor: Alert.Color.PRIMARY,\n\t\t\t\tsize: Alert.Size.MD,\n\t\t\t\tcloseBtn: true,\n\t\t\t\tanimated: true,\n\t\t\t\tcustomClass: 'hr-hcmlink-mapping-alert-container',\n\t\t\t\tafterMessageHtml: moreButton,\n\t\t\t});\n\n\t\t\talert.renderTo(this.$refs.alertContainer);\n\n\t\t\tEvent.bind(alert.getCloseBtn(), 'click', this.onCloseAlertButton);\n\t\t\tEvent.bind(moreButton, 'click', this.showDocumentation);\n\t\t},\n\t\tshowDocumentation(event): void\n\t\t{\n\t\t\tif (top.BX.Helper)\n\t\t\t{\n\t\t\t\tevent.preventDefault();\n\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${HELPDESK_CODE}`);\n\t\t\t}\n\t\t},\n\t\tonCloseAlertButton(): void\n\t\t{\n\t\t\tthis.$emit('closeAlert');\n\t\t},\n\t\tonCreateLink(options): void\n\t\t{\n\t\t\tthis.$emit('createLink', options);\n\t\t},\n\t\tonRemoveLink(options): void\n\t\t{\n\t\t\tthis.$emit('removeLink', options);\n\t\t},\n\t\tonSearchPersonName(query): void\n\t\t{\n\t\t\tthis.$emit('search', query);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"hr-hcmlink-sync__page-subtitle-box\"\n\t\t\t:class=\"{'--alert-hidden': config.isHideInfoAlert}\"\n\t\t>\n\t\t\t<div class=\"hr-hcmlink-sync__page-subtitle\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_DIALOG_PAGE_TITLE') }}\n\t\t\t</div>\n\t\t\t<div class=\"hr-hcmlink-sync__search-container\">\n\t\t\t\t<SearchBar\n\t\t\t\t\t:placeholder=\"searchPlaceholder\"\n\t\t\t\t\t:debounceWait=\"500\"\n\t\t\t\t\t@search=\"onSearchPersonName\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tref=\"alertContainer\"\n\t\t\tclass=\"hr-hcmlink-mapping-alert\"\n\t\t\t:class=\"{'--hide': config.isHideInfoAlert}\"\n\t\t></div>\n\t\t<div  v-if=\"isSearchResultEmpty\" class=\"hr-hcmlink-mapping-page-state-container\">\n\t\t\t<StateScreen\n\t\t\t\tstatus=\"searchNotFound\"\n\t\t\t\t:isBlock=\"true\"\n\t\t\t\t:mode=config.mode\n\t\t\t></StateScreen>\n\t\t</div>\n\t\t<div v-if=\"!isSearchResultEmpty && !dataLoading\" class=\"hr-hcmlink-mapping-page-container\" ref=\"container\">\n\t\t\t<div class=\"hr-hcmlink-mapping-page-container__wrapper\">\n\t\t\t\t<ColumnTitle\n\t\t\t\t\t:mode=config.mode\n\t\t\t\t></ColumnTitle>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"item in collection\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t>\n\t\t\t\t\t<Line\n\t\t\t\t\t\t:item=item\n\t\t\t\t\t\t:config=config\n\t\t\t\t\t\t:mappedUserIds=mappedUserIds\n\t\t\t\t\t\t@createLink=\"onCreateLink\"\n\t\t\t\t\t\t@removeLink=\"onRemoveLink\"\n\t\t\t\t\t></Line>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"hr-hcmlink-mapping-page-person-wrapper hr-hcmlink-mapping-page-person-wrapper_right\"\n\t\t\t\t ref=\"person_wrapper\" :class=\"[this.config.mode === 'direct' ? '--person' : '--user']\"></div>\n\t\t\t<div class=\"hr-hcmlink-mapping-page-person-wrapper hr-hcmlink-mapping-page-person-wrapper_left\"\n\t\t\t\t ref=\"person_wrapper\" :class=\"[this.config.mode === 'direct' ? '--user' : '--person']\"></div>\n\t\t</div>\n\t`,\n};\n","import { Runtime } from 'main.core';\n\nexport const Loader = {\n\tname: 'Loader',\n\tprops: {\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 70,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: '#2fc6f6',\n\t\t},\n\t\toffset: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tmode: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.loader = null;\n\t},\n\tasync mounted(): void\n\t{\n\t\t// eslint-disable-next-line no-shadow\n\t\tconst { Loader } = await Runtime.loadExtension('main.loader');\n\t\tthis.loader = new Loader({\n\t\t\ttarget: this.$refs.container,\n\t\t\tsize: this.size,\n\t\t\tcolor: this.color,\n\t\t\toffset: this.offset,\n\t\t\tmode: this.mode,\n\t\t});\n\n\t\tthis.loader.show();\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.loader)\n\t\t{\n\t\t\tthis.loader.destroy();\n\t\t\tthis.loader = null;\n\t\t}\n\t},\n\ttemplate: '<span ref=\"container\"></span>',\n};\n","import { Counter } from './counter';\nimport { Loc } from 'main.core';\n\nimport '../styles/toolbar.css';\n\nexport const Toolbar = {\n\tname: 'Toolbar',\n\n\tcomponents: {\n\t\tCounter,\n\t},\n\n\temits: [\n\t\t'search',\n\t],\n\n\tprops: {\n\t\tshowCounters: {\n\t\t\trequired: true,\n\t\t\ttype: Boolean,\n\t\t},\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\tcountAllPersonsForMap: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tcountMappedPersons: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tcountUnmappedPersons: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tlastJobFinishedAt: {\n\t\t\trequired: false,\n\t\t\ttype: Date,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomputed: {\n\t\tsearchPlaceholder(): string\n\t\t{\n\t\t\treturn this.mode === 'direct'\n\t\t\t\t? Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_USERS_SEARCH_PLACEHOLDER_DIRECT')\n\t\t\t\t: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_USERS_SEARCH_PLACEHOLDER_REVERSE');\n\t\t},\n\t\tmappedPercent(): Number\n\t\t{\n\t\t\treturn Math.round(this.countMappedPersons / (this.countMappedPersons + this.countUnmappedPersons) * 100);\n\t\t},\n\t\tisDone(): boolean\n\t\t{\n\t\t\treturn this.mappedPercent === 100;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonSearchPersonName(query): void\n\t\t{\n\t\t\tthis.$emit('search', query);\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-hcmlink-sync__toolbar-row\">\n\t\t\t<div class=\"hr-hcmlink-sync__title-wrapper\">\n\t\t\t\t<div class=\"hr-hcmlink-sync__title-box\">\n\t\t\t\t\t<span class=\"hr-hcmlink-sync__title-item\">${Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_TITLE')}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"hr-hcmlink-sync__search-container\">\n\t\t\t\t<div v-if=\"showCounters\"\n\t\t\t\t\tclass=\"hr-hcmlink-sync__toolbar-bubble hr-hcmlink-sync__toolbar-bubble-right\"\n\t\t\t\t\t:class=\"[isDone ? '--done' : '--not-done']\"\n\t\t\t\t>\n\t\t\t\t\t{{\n\t\t\t\t\t\t$Bitrix.Loc.getMessage(\n\t\t\t\t\t\t\t'HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_PAGE_MAPPED_TITLE',\n\t\t\t\t\t\t\t{ '#PERCENT#': mappedPercent }\n\t\t\t\t\t\t)\n\t\t\t\t\t}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"showCounters\" class=\"hr-hcmlink-sync__toolbar-row hr-hcmlink-sync__toolbar-row-counter\">\n\t\t\t<Counter\n\t\t\t\t:countAllPersonsForMap=countAllPersonsForMap\n\t\t\t\t:countMappedPersons=countMappedPersons\n\t\t\t\t:countUnmappedPersons=countUnmappedPersons\n\t\t\t\t:lastJobFinishedAt=lastJobFinishedAt\n\t\t\t\t:mode=mode\n\t\t\t></Counter>\n\t\t</div>\n\t`,\n};\n","import { Page } from './components/page';\nimport { Loader } from './components/loader';\nimport { StateScreen } from './components/state-screen';\nimport { EventList, Status } from './types';\nimport { Api } from 'humanresources.hcmlink.api';\nimport { Toolbar } from './components/toolbar';\n\nimport { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport './styles/mapper.css';\n\nexport const HumanresourcesHcmlinkMapper = {\n\tname: 'HumanresourcesHcmlinkMapper',\n\n\tprops: {\n\t\tcompanyId: {\n\t\t\trequired: true,\n\t\t\ttype: Number,\n\t\t},\n\t\tmode: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\tuserIdCollection: {\n\t\t\trequired: true,\n\t\t\ttype: Array,\n\t\t},\n\t\ttoolbarContainer: {\n\t\t\trequired: true,\n\t\t\ttype: String,\n\t\t},\n\t\tapi: {\n\t\t\trequired: true,\n\t\t\ttype: Api,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tPage,\n\t\tLoader,\n\t\tStateScreen,\n\t\tToolbar,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tloading: false,\n\t\t\tisHideInfoAlert: true,\n\t\t\tpageCount: 0,\n\t\t\tmappingEntityCollection: [],\n\t\t\tuserMappingSet: {},\n\t\t\tisJobResolved: false,\n\t\t\tisDone: false,\n\t\t\tcountAllPersonsForMap: 0,\n\t\t\tcountMappedPersons: 0,\n\t\t\tcountUnmappedPersons: 0,\n\t\t\tisReadyToolbar: false,\n\t\t\tmappedUserIds: [],\n\t\t\tsearchName: null,\n\t\t\tsearchActive: false,\n\t\t\tlastJobFinishedAt: null,\n\t\t};\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.jobId = null;\n\t\tthis.updateJobStatusInterval = null;\n\t\tthis.forceSyncPointer = this.forceSync.bind(this); // for correct sub/unsub\n\t\tthis.pullUnsubscrubeCallback = null; // BX.PULL unsubscribe function\n\n\t\tthis.createUpdateEmployeeListJob();\n\n\t\tEventEmitter.subscribe(EventList.HR_DATA_MAPPER_FORCE_SYNC, this.forceSyncPointer);\n\t},\n\n\tcomputed: {\n\t\tisJobPending(): boolean {\n\t\t\treturn !this.isJobResolved && !this.isDone;\n\t\t},\n\t\tisMappingReady(): boolean {\n\t\t\treturn this.isJobResolved && !this.isDone;\n\t\t},\n\t\tisMappingDone(): boolean {\n\t\t\treturn this.isJobResolved && this.isDone;\n\t\t},\n\t\tisSearchEmpty(): boolean {\n\t\t\treturn this.mappingEntityCollection.length === 0 && Boolean(this.searchName);\n\t\t},\n\t\tcompletedStatus(): string\n\t\t{\n\t\t\treturn this.mode === 'direct' ? Status.done : Status.salaryDone;\n\t\t},\n\t},\n\n\twatch: {\n\t\tpageCount(): void\n\t\t{\n\t\t\tthis.loadConfig();\n\t\t},\n\t\tisMappingReady(value): void\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.footerDisplay(true);\n\t\t\t}\n\t\t},\n\t\tisMappingDone(value): void\n\t\t{\n\t\t\tif (value)\n\t\t\t{\n\t\t\t\tthis.footerDisplay(false);\n\t\t\t}\n\t\t},\n\t\tisSearchEmpty(value): void\n\t\t{\n\t\t\tthis.footerDisplay(!value);\n\t\t},\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.countAllPersonsForMap = this.userIdCollection.length;\n\t\tthis.$nextTick(() => {\n\t\t\tthis.isReadyToolbar = true;\n\t\t});\n\t},\n\n\tunmounted(): void\n\t{\n\t\tthis.clearJobListeners();\n\t\tEventEmitter.unsubscribe(EventList.HR_DATA_MAPPER_FORCE_SYNC, this.forceSyncPointer);\n\t},\n\n\tmethods: {\n\t\t// <editor-fold desc=\"External functions. Called by Mapper\">\n\t\tprepareNextUsers(): void\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit(EventList.HR_DATA_MAPPER_DATA_WAS_SAVED);\n\t\t\tthis.searchName = null;\n\t\t\tthis.userMappingSet = {};\n\t\t\tthis.pageCount++;\n\t\t},\n\t\tgetUserMappingSet(): Set\n\t\t{\n\t\t\treturn this.userMappingSet;\n\t\t},\n\t\t// </editor-fold>\n\t\tonCreateLink(options): void\n\t\t{\n\t\t\tthis.userMappingSet[options.userId] = options;\n\t\t},\n\t\tonRemoveLink(options): void\n\t\t{\n\t\t\tif (this.userMappingSet[options.userId] !== undefined)\n\t\t\t{\n\t\t\t\tdelete this.userMappingSet[options.userId];\n\t\t\t}\n\t\t},\n\t\tonCloseAlert(): void\n\t\t{\n\t\t\tthis.api.closeInfoAlert();\n\t\t},\n\t\tonCompleteMapping(): void\n\t\t{\n\t\t\tthis.api.createCompleteMappingEmployeeListJob({\n\t\t\t\tcompanyId: this.companyId,\n\t\t\t});\n\t\t},\n\t\tonSearchPersonName(query): void\n\t\t{\n\t\t\tif (!this.isDone && query !== this.searchName)\n\t\t\t{\n\t\t\t\tthis.searchName = query || null;\n\t\t\t\tthis.userMappingSet = {};\n\t\t\t\tthis.searchActive = Boolean(query);\n\t\t\t\tthis.loadConfig();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * On abort sync from state screen\n\t\t *\n\t\t * @returns {Promise<void>}\n\t\t */\n\t\tasync onAbortSync(): Promise<void>\n\t\t{\n\t\t\tthis.loading = true;\n\t\t\tconst jobData = await this.api.getLastJob({ companyId: this.companyId });\n\t\t\tawait this.syncJobDone(jobData);\n\t\t},\n\t\tasync loadConfig(): Promise<void>\n\t\t{\n\t\t\tthis.loading = true;\n\n\t\t\tconst {\n\t\t\t\titems,\n\t\t\t\tcountMappedPersons,\n\t\t\t\tcountUnmappedPersons,\n\t\t\t\tisHideInfoAlert,\n\t\t\t\tmappedUserIds,\n\t\t\t} = await this.api.loadMapperConfig({\n\t\t\t\tcompanyId: this.companyId,\n\t\t\t\tuserIds: this.userIdCollection,\n\t\t\t\tmode: this.mode,\n\t\t\t\tsearchName: this.searchName,\n\t\t\t});\n\n\t\t\tthis.isHideInfoAlert = isHideInfoAlert;\n\t\t\tthis.countUnmappedPersons = countUnmappedPersons;\n\t\t\tthis.countMappedPersons = countMappedPersons;\n\t\t\tthis.mappingEntityCollection = Type.isArray(items) ? items : [];\n\t\t\tthis.mappedUserIds = mappedUserIds;\n\n\t\t\tthis.isDone = this.mappingEntityCollection.length === 0 && !this.searchName;\n\n\t\t\tthis.loading = false;\n\t\t},\n\t\tasync forceSync(): void\n\t\t{\n\t\t\tthis.$Bitrix.eventEmitter.emit(EventList.HR_DATA_MAPPER_CLEAR_SEARCH_INPUT);\n\t\t\tthis.searchName = null;\n\t\t\tthis.footerDisplay(false);\n\t\t\tthis.isJobResolved = false;\n\t\t\tthis.isDone = false;\n\n\t\t\tawait this.api.cancelJob({ jobId: this.jobId, companyId: this.companyId });\n\t\t\tthis.createUpdateEmployeeListJob(true);\n\t\t},\n\t\tasync syncJobDone(jobData: Object)\n\t\t{\n\t\t\tthis.clearJobListeners();\n\t\t\tthis.lastJobFinishedAt = jobData.finishedAt ? new Date(jobData.finishedAt) : null;\n\t\t\tawait this.loadConfig();\n\t\t\tthis.isJobResolved = true;\n\t\t},\n\t\tasync createUpdateEmployeeListJob(isForced = false): Promise<void>\n\t\t{\n\t\t\tthis.footerDisplay(false);\n\t\t\tthis.isJobResolved = false;\n\n\t\t\tconst data = await this.api.createUpdateEmployeeListJob({\n\t\t\t\tcompanyId: this.companyId,\n\t\t\t\tisForced,\n\t\t\t});\n\t\t\tthis.jobId = data.jobId;\n\n\t\t\tif (data.status === 3)\n\t\t\t{\n\t\t\t\t// if we got a job with status 'DONE', load data immediately\n\t\t\t\tawait this.syncJobDone(data);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.clearJobListeners();\n\n\t\t\tthis.updateJobStatusInterval = setInterval(this.updateJobStatus.bind(this), 30000);\n\n\t\t\tif (BX.PULL)\n\t\t\t{\n\t\t\t\tthis.pullUnsubscrubeCallback = BX.PULL.subscribe({\n\t\t\t\t\ttype: BX.PullClient.SubscriptionType.Server,\n\t\t\t\t\tmoduleId: 'humanresources',\n\t\t\t\t\tcommand: 'external_employee_list_updated',\n\t\t\t\t\tcallback: async function(params: { jobId: number, status: string }): Promise<void> {\n\t\t\t\t\t\tif ((params.jobId === this.jobId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tawait this.processJobStatus(params);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t});\n\t\t\t\tBX.PULL.extendWatch('humanresources_person_mapping');\n\t\t\t}\n\t\t},\n\t\tasync updateJobStatus(): Promise<void>\n\t\t{\n\t\t\tconst { params } = await this.api.getJobStatus({ jobId: this.jobId });\n\n\t\t\tawait this.processJobStatus(params);\n\t\t},\n\t\tfooterDisplay(show: boolean): void\n\t\t{\n\t\t\tEventEmitter.emit(EventList.HR_DATA_MAPPER_FOOTER_DISPLAY, show);\n\t\t},\n\t\tasync processJobStatus(params)\n\t\t{\n\t\t\tif (params.status === 3)\n\t\t\t{\n\t\t\t\t// load data if job is complete\n\t\t\t\tawait this.syncJobDone(params);\n\t\t\t}\n\t\t\telse if (params.status === 5 || params.status === 4)\n\t\t\t{\n\t\t\t\t// make a new job if last job was canceled or expired\n\t\t\t\tthis.clearJobListeners();\n\t\t\t\tthis.jobId = null;\n\t\t\t\tthis.createUpdateEmployeeListJob();\n\t\t\t}\n\t\t},\n\t\tclearJobListeners()\n\t\t{\n\t\t\tclearInterval(this.updateJobStatusInterval);\n\t\t\tif (this.pullUnsubscrubeCallback)\n\t\t\t{\n\t\t\t\tthis.pullUnsubscrubeCallback();\n\t\t\t}\n\t\t\tthis.pullUnsubscrubeCallback = null;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<Teleport v-if=\"isReadyToolbar\" :to=\"toolbarContainer\">\n\t\t\t<Toolbar\n\t\t\t\t:showCounters=\"isJobResolved\"\n\t\t\t\t:countAllPersonsForMap=countAllPersonsForMap\n\t\t\t\t:countMappedPersons=countMappedPersons\n\t\t\t\t:countUnmappedPersons=countUnmappedPersons\n\t\t\t\t:lastJobFinishedAt=lastJobFinishedAt\n\t\t\t\t:mode=mode\n\t\t\t/>\n\t\t</Teleport>\n\t\t<template v-if=\"isJobPending\">\n\t\t\t<StateScreen\n\t\t\t\t:status=\"loading ? 'loading' : 'pending'\"\n\t\t\t\t:mode=mode\n\t\t\t\t@abortSync=\"onAbortSync\"\n\t\t\t></StateScreen>\n\t\t</template>\n\t\t<template v-if=\"isMappingReady\">\n\t\t\t<Loader v-if=\"loading\"></Loader>\n\t\t\t<Page\n\t\t\t\t:dataLoading=loading\n\t\t\t\t:collection=mappingEntityCollection\n\t\t\t\t:mappedUserIds=mappedUserIds\n\t\t\t\t:searchActive=searchActive\n\t\t\t\t:config=\"{ mode, isHideInfoAlert, companyId }\"\n\t\t\t\t@createLink=\"onCreateLink\"\n\t\t\t\t@removeLink=\"onRemoveLink\"\n\t\t\t\t@closeAlert=\"onCloseAlert\"\n\t\t\t\t@search=\"onSearchPersonName\"\n\t\t\t></Page>\n\t\t</template>\n\t\t<template v-if=\"isMappingDone\">\n\t\t\t<StateScreen\n\t\t\t\t:status=completedStatus\n\t\t\t\t:mode=mode\n\t\t\t\t@completeMapping='onCompleteMapping'\n\t\t\t></StateScreen>\n\t\t</template>\n\t`,\n};\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { Api } from 'humanresources.hcmlink.api';\nimport { Dom, Loc, Type } from 'main.core';\nimport { HumanresourcesHcmlinkMapper } from './app';\nimport { EventList } from './types';\nimport { Layout } from 'ui.sidepanel.layout';\n\ntype MapperOptions = {\n\tcompanyId: number,\n\tuserIds: ?Set,\n\tmode: 'direct' | 'reverse',\n};\n\n/**\n * An entry point of data-mapper\n */\nexport class Mapper\n{\n\t#container: HTMLElement;\n\tlayout: Layout;\n\t#application: VueCreateAppResult | null = null;\n\tapi: Api;\n\toptions: MapperOptions;\n\tfooterDisplayPointer: function;\n\n\tstatic MODE_DIRECT = 'direct';\n\tstatic MODE_REVERSE = 'reverse';\n\n\tconstructor(options: MapperOptions)\n\t{\n\t\tthis.api = new Api();\n\t\tthis.options = options;\n\t\tthis.footerDisplayPointer = this.footerDisplay.bind(this); // for correct sub/unsub\n\n\t\tif (Type.isNil(this.options.userIds))\n\t\t{\n\t\t\tthis.options.userIds = new Set();\n\t\t}\n\t}\n\n\tstatic openSlider(\n\t\toptions: MapperOptions,\n\t\tsliderOptions: { onCloseHandler: () => void },\n\t): void\n\t{\n\t\tlet closure = null;\n\t\tBX.SidePanel.Instance.open('humanresources:mapper', {\n\t\t\twidth: 800,\n\t\t\tloader: 'default-loader',\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn top.BX.Runtime.loadExtension('humanresources.hcmlink.data-mapper').then((exports) => {\n\t\t\t\t\tclosure = new exports.Mapper(options);\n\n\t\t\t\t\treturn closure.getLayout();\n\t\t\t\t});\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tsliderOptions?.onCloseHandler();\n\t\t\t\t\tclosure.unmount();\n\t\t\t\t},\n\t\t\t\tonLoad: () => {\n\t\t\t\t\t// Here we need to get rid of title to replace the entire toolbar with our own markup\n\t\t\t\t\t// Why we just don't pass the title at all? If we don't pass it, then toolbar will not render too\n\t\t\t\t\tDom.remove(closure.layout.getContainer().querySelector('.ui-sidepanel-layout-title'));\n\t\t\t\t\t// Add a class to differentiate this layout from other layouts\n\t\t\t\t\tDom.addClass(closure.layout.getContainer().querySelector('.ui-sidepanel-layout-header'), 'hr-hcmlink-sync__toolbar');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\trenderTo(container: HTMLElement)\n\t{\n\t\tDom.append(this.render(), container);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#container = document.createElement('div');\n\t\tif (this.#application === null)\n\t\t{\n\t\t\tthis.#application = BitrixVue.createApp(HumanresourcesHcmlinkMapper, {\n\t\t\t\tcompanyId: this.options.companyId,\n\t\t\t\tmode: this.options.mode,\n\t\t\t\tuserIdCollection: [...this.options.userIds],\n\t\t\t\ttoolbarContainer: '.hr-hcmlink-sync__toolbar .ui-sidepanel-layout-toolbar',\n\t\t\t\tapi: this.api,\n\t\t\t});\n\t\t\tEventEmitter.subscribe(EventList.HR_DATA_MAPPER_FOOTER_DISPLAY, this.footerDisplayPointer);\n\t\t\tDom.style(this.#container, 'height', '100%');\n\t\t\tthis.component = this.#application.mount(this.#container);\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tunmount(): void\n\t{\n\t\tEventEmitter.unsubscribe(EventList.HR_DATA_MAPPER_FOOTER_DISPLAY, this.footerDisplayPointer);\n\t\tthis.#application.unmount();\n\t}\n\n\tasync getLayout(): Promise<any>\n\t{\n\t\tconst getContentLayout = function(): HTMLElement {\n\t\t\treturn this.render();\n\t\t}.bind(this);\n\n\t\tconst saveAction = async function(): Promise<any> {\n\t\t\tconst collection = Object.values(this.component.getUserMappingSet());\n\n\t\t\treturn this.api.saveMapping({\n\t\t\t\tcollection,\n\t\t\t\tcompanyId: this.options.companyId,\n\t\t\t});\n\t\t}.bind(this);\n\n\t\tconst prepareNextUsers = async function(): Promise<any> {\n\t\t\tthis.component.prepareNextUsers();\n\t\t}.bind(this);\n\n\t\tthis.layout = await Layout.createLayout({\n\t\t\textensions: [\n\t\t\t\t'humanresources.hcmlink.data-mapper',\n\t\t\t\t'ui.entity-selector',\n\t\t\t\t'ui.icon-set.actions',\n\t\t\t\t'ui.select',\n\t\t\t\t'popup',\n\t\t\t],\n\t\t\ttitle: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_SLIDER_TITLE'),\n\t\t\ttoolbar()\n\t\t\t{\n\t\t\t\t// We need to pass at least empty array for ui-sidepanel-layout-toolbar to appear\n\t\t\t\treturn [];\n\t\t\t},\n\t\t\tcontent(): HTMLElement\n\t\t\t{\n\t\t\t\treturn getContentLayout();\n\t\t\t},\n\t\t\tbuttons({ cancelButton, SaveButton }): Array\n\t\t\t{\n\t\t\t\treturn [\n\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\ttext: Loc.getMessage('HUMANRESOURCES_HCMLINK_MAPPER_BUTTON_SAVE_AND_CONTINUE'),\n\t\t\t\t\t\tasync onclick() {\n\t\t\t\t\t\t\tconst result = await saveAction();\n\t\t\t\t\t\t\tif (result)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tawait prepareNextUsers();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tround: true,\n\t\t\t\t\t}),\n\t\t\t\t\tcancelButton,\n\t\t\t\t];\n\t\t\t},\n\t\t});\n\n\t\treturn this.layout.render();\n\t}\n\n\tfooterDisplay(showEvent: BaseEvent): void\n\t{\n\t\tif (!this.layout)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.layout.getFooterContainer())\n\t\t{\n\t\t\tDom.style(this.layout.getFooterContainer(), 'display', showEvent.data ? 'block' : 'none');\n\t\t}\n\n\t\tconst footerAnchor = this.layout.getContainer()?.getElementsByClassName('ui-sidepanel-layout-footer-anchor')[0];\n\t\tif (footerAnchor)\n\t\t{\n\t\t\tDom.style(footerAnchor, 'display', showEvent.data ? 'block' : 'none');\n\t\t}\n\t}\n}\n"],"names":["Separator","name","props","hasLink","required","type","Boolean","mode","String","computed","styleObject","iconClasses","template","PersonItem","config","companyId","Number","isHideInfoAlert","mappedUserIds","Array","suggestId","data","isBorderedEmployee","emits","mounted","selector","getPersonTagSelector","getUserTagSelector","renderTo","$refs","container","methods","preselectedItem","Type","isNumber","$emit","id","TagSelector","multiple","events","onTagRemove","event","tag","getData","handleItemRemove","onTagAdd","handleItemSelect","addButtonCaption","Loc","getMessage","showCreateButton","dialogOptions","width","searchOptions","allowCreateItem","entities","options","inviteEmployeeLink","intranetUsersOnly","nameTemplate","preselectedItems","tabs","title","recentTabOptions","visible","Dom","addClass","getOuterContainer","tagTextColor","tagBgColor","tagFontWeight","enableSearch","dynamicLoad","dynamicSearch","searchFields","searchable","system","UserItem","item","Object","getUserAvatarEntity","avatarContainer","AvatarRound","size","userName","baseColor","userpicPath","avatarLink","displayName","fullName","MoreOptions","showMenu","popupMenu","PopupMenu","create","autoHide","bindElement","items","text","onclick","menuWindow","close","show","Icon","icon","Main","MORE_INFORMATION","color","getComputedStyle","document","body","getPropertyValue","Line","components","onAddEntity","userId","personId","onRemoveEntity","ColumnTitle","EventList","freeze","HR_DATA_MAPPER_FOOTER_DISPLAY","HR_DATA_MAPPER_FORCE_SYNC","HR_DATA_MAPPER_DATA_WAS_SAVED","HR_DATA_MAPPER_CLEAR_SEARCH_INPUT","Status","done","pending","loading","salaryDone","searchNotFound","Counter","countAllPersonsForMap","countMappedPersons","countUnmappedPersons","lastJobFinishedAt","Date","default","leftCounterPhrase","Text","encode","formatDate","DateFormatter","formatByTemplate","DateTemplate","messageReadStatus","forceSync","EventEmitter","emit","StateScreen","status","isBlock","getCloseButton","buttonContainer","getAbortSyncButton","abortSyncButtonContainer","Button","Color","LIGHT_BORDER","round","Size","LARGE","BX","SidePanel","Instance","getTopSlider","description","stateClassList","isDoneState","isPendingState","includes","SearchBar","placeholder","debounceWait","BIcon","directives","focus","el","showSearchBar","searchQuery","debounceTimer","$Bitrix","eventEmitter","subscribe","clearInput","unmounted","unsubscribe","IconSet","Set","onBlur","length","hideSearchbar","toggleSearchbar","onAfterEnter","searchNameInput","clearSearch","watch","query","clearTimeout","setTimeout","HELPDESK_CODE","Page","collection","searchActive","dataLoading","createAlert","isSearchResultEmpty","searchPlaceholder","moreButton","Tag","render","alert","Alert","PRIMARY","MD","closeBtn","animated","customClass","afterMessageHtml","alertContainer","Event","bind","getCloseBtn","onCloseAlertButton","showDocumentation","top","Helper","preventDefault","onCreateLink","onRemoveLink","onSearchPersonName","Loader","offset","created","loader","Runtime","loadExtension","target","beforeUnmount","destroy","Toolbar","showCounters","mappedPercent","Math","isDone","HumanresourcesHcmlinkMapper","userIdCollection","toolbarContainer","api","Api","pageCount","mappingEntityCollection","userMappingSet","isJobResolved","isReadyToolbar","searchName","jobId","updateJobStatusInterval","forceSyncPointer","pullUnsubscrubeCallback","createUpdateEmployeeListJob","isJobPending","isMappingReady","isMappingDone","isSearchEmpty","completedStatus","loadConfig","value","footerDisplay","$nextTick","clearJobListeners","prepareNextUsers","getUserMappingSet","undefined","onCloseAlert","closeInfoAlert","onCompleteMapping","createCompleteMappingEmployeeListJob","onAbortSync","jobData","getLastJob","syncJobDone","loadMapperConfig","userIds","isArray","cancelJob","finishedAt","isForced","setInterval","updateJobStatus","PULL","PullClient","SubscriptionType","Server","moduleId","command","callback","params","processJobStatus","extendWatch","getJobStatus","clearInterval","Mapper","constructor","footerDisplayPointer","isNil","openSlider","sliderOptions","closure","open","cacheable","contentCallback","then","exports","getLayout","onClose","onCloseHandler","unmount","onLoad","remove","layout","getContainer","querySelector","append","createElement","BitrixVue","createApp","style","component","mount","getContentLayout","saveAction","values","saveMapping","Layout","createLayout","extensions","toolbar","content","buttons","cancelButton","SaveButton","result","showEvent","getFooterContainer","footerAnchor","getElementsByClassName","MODE_DIRECT","MODE_REVERSE"],"mappings":"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"}