{"version":3,"file":"index.bundle.js","sources":["../src/company-config.js"],"sourcesContent":["import { Api } from 'humanresources.hcmlink.api';\nimport { Tag, Loc, Dom, Text } from 'main.core';\nimport { Layout } from 'ui.sidepanel.layout';\n\nimport './style.css';\n\ntype Options = {\n\tcompanyId: Number,\n\ttitle: String,\n}\n\nexport class HcmlinkCompanyConfig\n{\n\t#api: Api;\n\t#options: Options;\n\t#companyConfig: Array = [];\n\t#loadConfigPromise: Promise;\n\n\tconstructor(options: Options)\n\t{\n\t\tthis.#api = new Api();\n\t\tthis.#options = options;\n\n\t\tthis.#load();\n\t}\n\n\tasync #load(): Promise\n\t{\n\t\tif (this.#loadConfigPromise)\n\t\t{\n\t\t\treturn this.#loadConfigPromise;\n\t\t}\n\n\t\tthis.#loadConfigPromise = this.#api.loadCompanyConfig({ companyId: this.#options.companyId });\n\n\t\treturn this.#loadConfigPromise;\n\t}\n\n\tstatic openSlider(\n\t\toptions: Options,\n\t\tsliderOptions: { onCloseHandler: () => void },\n\t): void\n\t{\n\t\tconst companyId = options.companyId;\n\t\tBX.SidePanel.Instance.open(`humanresources:hcmlink-company-config-${companyId}`, {\n\t\t\twidth: 800,\n\t\t\tloader: 'default-loader',\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn top.BX.Runtime.loadExtension('humanresources.hcmlink.company-config').then((exports) => {\n\t\t\t\t\treturn (new exports.HcmlinkCompanyConfig(options)).getLayout();\n\t\t\t\t});\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: sliderOptions?.onCloseHandler ?? (() => {}),\n\t\t\t},\n\t\t});\n\t}\n\n\tasync getLayout(): Promise\n\t{\n\t\tconst data = await this.#load();\n\t\tthis.#companyConfig = data.config;\n\n\t\treturn Layout.createContent({\n\t\t\ttitle: this.#options.title,\n\t\t\tcontent: () => {\n\t\t\t\treturn this.#getContent();\n\t\t\t},\n\t\t\tbuttons(): Array<Button> {\n\t\t\t\treturn [];\n\t\t\t},\n\t\t});\n\t}\n\n\t#getContent(): HTMLDivElement\n\t{\n\t\tconst body = this.#getBody();\n\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<h2 class=\"hr-hcmlink-company-config-header\">${Loc.getMessage('HUMANRESOURCES_HCMLINK_COMPANY_CONFIG_SLIDER_TITLE')}</h2>\n\t\t\t\t${body}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getBody(): HTMLDivElement\n\t{\n\t\tconst bodyContainer = Tag.render`<div class=\"hr-hcmlink-company-config-container\"></div>`;\n\t\tthis.#companyConfig.forEach((item) => Dom.append(this.#getElementNode(item), bodyContainer));\n\n\t\treturn bodyContainer;\n\t}\n\n\t#getElementNode(item: Object): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"hr-hcmlink-company-config-container__element\">\n\t\t\t\t<div class=\"hr-hcmlink-company-config-container__label\">${Text.encode(item.title)}</div>\n\t\t\t\t<div class=\"hr-hcmlink-company-config-container__value\">${Text.encode(item.value)}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n"],"names":["HcmlinkCompanyConfig","constructor","options","Api","openSlider","sliderOptions","companyId","BX","SidePanel","Instance","open","width","loader","cacheable","contentCallback","top","Runtime","loadExtension","then","exports","getLayout","events","onClose","onCloseHandler","data","config","Layout","createContent","title","content","buttons","loadCompanyConfig","body","Tag","render","Loc","getMessage","bodyContainer","forEach","item","Dom","append","Text","encode","value"],"mappings":";;;;;;;;;;AAAA,CAIqB;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAOrB,CAAO,MAAMA,oBAAoB,CACjC;GAMCC,WAAW,CAACC,OAAgB,EAC5B;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAJwB;;KAAE;OAAA;OAAA;;KAKzB,4CAAI,gBAAQ,IAAIC,8BAAG,EAAE;KACrB,4CAAI,wBAAYD,OAAO;KAEvB,4CAAI;;GAeL,OAAOE,UAAU,CAChBF,OAAgB,EAChBG,aAA6C,EAE9C;KAAA;KACC,MAAMC,SAAS,GAAGJ,OAAO,CAACI,SAAS;KACnCC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAE,yCAAwCJ,SAAU,EAAC,EAAE;OAChFK,KAAK,EAAE,GAAG;OACVC,MAAM,EAAE,gBAAgB;OACxBC,SAAS,EAAE,KAAK;OAChBC,eAAe,EAAE,MAAM;SACtB,OAAOC,GAAG,CAACR,EAAE,CAACS,OAAO,CAACC,aAAa,CAAC,uCAAuC,CAAC,CAACC,IAAI,CAAEC,OAAO,IAAK;WAC9F,OAAQ,IAAIA,OAAO,CAACnB,oBAAoB,CAACE,OAAO,CAAC,CAAEkB,SAAS,EAAE;UAC9D,CAAC;QACF;OACDC,MAAM,EAAE;SACPC,OAAO,2BAAEjB,aAAa,oBAAbA,aAAa,CAAEkB,cAAc,oCAAK,MAAM;;MAElD,CAAC;;GAGH,MAAMH,SAAS,GACf;KACC,MAAMI,IAAI,GAAG,8CAAM,IAAI,iBAAQ;KAC/B,4CAAI,oCAAkBA,IAAI,CAACC,MAAM;KAEjC,OAAOC,0BAAM,CAACC,aAAa,CAAC;OAC3BC,KAAK,EAAE,4CAAI,sBAAUA,KAAK;OAC1BC,OAAO,EAAE,MAAM;SACd,+CAAO,IAAI;QACX;OACDC,OAAO,GAAkB;SACxB,OAAO,EAAE;;MAEV,CAAC;;CAgCJ;CAAC,wBA7EA;GACC,4CAAI,IAAI,2CACR;KACC,+CAAO,IAAI;;GAGZ,4CAAI,4CAAsB,4CAAI,cAAMC,iBAAiB,CAAC;KAAEzB,SAAS,EAAE,4CAAI,sBAAUA;IAAW,CAAC;GAE7F,+CAAO,IAAI;CACZ;CAAC,wBAwCD;GACC,MAAM0B,IAAI,2CAAG,IAAI,uBAAW;GAE5B,OAAOC,aAAG,CAACC,MAAM,cAAC;;mDAE6B,CAAuE;MACpH,CAAO;;GAET,GAHiDC,aAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC,EACjHJ,IAAI;CAGT;CAAC,qBAGD;GACC,MAAMK,aAAa,GAAGJ,aAAG,CAACC,MAAM,gBAAC,yDAAuD,EAAC;GACzF,4CAAI,kCAAgBI,OAAO,CAAEC,IAAI,IAAKC,aAAG,CAACC,MAAM,yCAAC,IAAI,oCAAiBF,IAAI,GAAGF,aAAa,CAAC,CAAC;GAE5F,OAAOA,aAAa;CACrB;CAAC,0BAEeE,IAAY,EAC5B;GACC,OAAON,aAAG,CAACC,MAAM,gBAAC;;8DAEwC,CAA0B;8DAC1B,CAA0B;;GAEpF,GAH4DQ,cAAI,CAACC,MAAM,CAACJ,IAAI,CAACX,KAAK,CAAC,EACvBc,cAAI,CAACC,MAAM,CAACJ,IAAI,CAACK,KAAK,CAAC;CAGpF;;;;;;;;"}