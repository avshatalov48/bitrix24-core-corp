this.BX=this.BX||{};this.BX.Humanresources=this.BX.Humanresources||{};(function(t,e,n,i,o){"use strict";const s="#popup-window-content-";const a={name:"BasePopup",emits:["close"],props:{id:{type:String,required:true},config:{type:Object,required:false,default:{}}},computed:{popupContainer(){return`${s}${this.id}`}},created(){this.instance=this.getPopupInstance();this.instance.show()},mounted(){this.instance.adjustPosition({forceBindPosition:true,position:this.getPopupConfig().bindOptions.position})},beforeUnmount(){if(!this.instance){return}this.closePopup()},methods:{getPopupInstance(){if(!this.instance){var t;(t=e.PopupManager.getPopupById(this.id))==null?void 0:t.destroy();const n=this.getPopupConfig();this.instance=new e.Popup(n);if(this.config.angleOffset){this.instance.setAngle({offset:this.config.angleOffset})}}return this.instance},getDefaultConfig(){return{id:this.id,className:"hr-structure-components-base-popup",autoHide:true,animation:"fading-slide",bindOptions:{position:"bottom"},cacheable:false,events:{onPopupClose:()=>this.closePopup(),onPopupShow:async()=>{const t=this.instance.getPopupContainer();await Promise.resolve();const{top:e}=t.getBoundingClientRect();const n=e+t.offsetHeight-document.body.offsetHeight;if(n>0){const e=5;this.instance.setMaxHeight(t.offsetHeight-n-e)}}}}},getPopupConfig(){var t,e;const n=this.getDefaultConfig();const i={};const s=n.className;if(this.config.className){i.className=`${s} ${this.config.className}`}const a=(t=this.config.offsetTop)!=null?t:n.offsetTop;if(((e=this.config.bindOptions)==null?void 0:e.position)==="top"&&o.Type.isNumber(this.config.offsetTop)){i.offsetTop=a-10}return{...n,...this.config,...i}},closePopup(){this.$emit("close");this.instance.destroy();this.instance=null},enableAutoHide(){this.getPopupInstance().setAutoHide(true)},disableAutoHide(){this.getPopupInstance().setAutoHide(false)},adjustPosition(){this.getPopupInstance().adjustPosition({forceBindPosition:true,position:this.getPopupConfig().bindOptions.position})}},template:`\n\t\t<Teleport :to="popupContainer">\n\t\t\t<slot\n\t\t\t\t:adjustPosition="adjustPosition"\n\t\t\t\t:enableAutoHide="enableAutoHide"\n\t\t\t\t:disableAutoHide="disableAutoHide"\n\t\t\t\t:closePopup="closePopup"\n\t\t\t></slot>\n\t\t</Teleport>\n\t`};const r={props:{id:{type:String,required:true},bindElement:{type:HTMLElement,required:true},items:{type:Array,required:true,default:[]},titleBar:{type:String,required:false}}};const u={name:"BaseActionMenu",mixins:[r],props:{width:{type:Number,required:false,default:260},delimiter:{type:Boolean,required:false,default:true},angleOffset:{type:Number,required:false,default:0},titleBar:{type:String,required:false},className:{type:String,required:false}},emits:["action","close"],components:{BasePopup:a},computed:{popupConfig(){const t={width:this.width,bindElement:this.bindElement,borderRadius:12,contentNoPaddings:true,contentPadding:0,padding:0,offsetTop:4};if(this.angleOffset>=0){t.angleOffset=this.angleOffset}if(this.titleBar){t.titleBar=this.titleBar}if(this.className){t.className=this.className}return t}},methods:{onItemClick(t,e,n){var i;t.stopPropagation();if((i=e.disabled)!=null?i:false){return}this.$emit("action",e.id);n()},close(){this.$emit("close")}},template:`\n\t\t<BasePopup\n\t\t\t:config="popupConfig"\n\t\t\tv-slot="{closePopup}"\n\t\t\t:id="id"\n\t\t\t@close="close"\n\t\t>\n\t\t\t<div class="hr-structure-components-action-menu-container">\n\t\t\t<template v-for="(item, index) in items">\n\t\t\t\t<div\n\t\t\t\t\tclass="hr-structure-components-action-menu-item-wrapper"\n\t\t\t\t\t:class="{ '--disabled': item.disabled ?? false }"\n\t\t\t\t\t@click="onItemClick($event, item, closePopup)"\n\t\t\t\t>\n\t\t\t\t\t<slot :item="item"></slot>\n\t\t\t\t</div>\n\t\t\t\t<span v-if="delimiter && index < items.length - 1"\n\t\t\t\t\tclass="hr-structure-action-popup-menu-item-delimiter"\n\t\t\t\t></span>\n\t\t\t</template>\n\t\t\t</div>\n\t\t</BasePopup>\n\t`};const c={name:"RouteActionMenuItem",components:{BIcon:n.BIcon},props:{id:{type:String,required:true},title:{type:String,required:true},description:{type:String,required:false,default:""},imageClass:{type:String,required:false,default:""},bIcon:{type:Object,required:false,default:null}},methods:{capitalizedText(t){return t.charAt(0).toUpperCase()+t.slice(1)}},template:`\n\t\t<div class="hr-structure-route-action-popup-menu-item">\n\t\t\t<div class="hr-structure-route-action-popup-menu-item__content">\n\t\t\t\t<BIcon\n\t\t\t\t\tv-if="bIcon"\n\t\t\t\t\t:name="bIcon.name"\n\t\t\t\t\t:size="bIcon.size || 20"\n\t\t\t\t\t:color="bIcon.color || 'black'"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if="!bIcon && imageClass"\n\t\t\t\t\tclass="hr-structure-route-action-popup-menu-item__content-icon-container"\n\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="hr-structure-route-action-popup-menu-item__content-icon"\n\t\t\t\t\t\t:class="imageClass"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class="hr-structure-route-action-popup-menu-item__content-text-container">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="hr-structure-route-action-popup-menu-item__content-title"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ capitalizedText(this.title) }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="hr-structure-route-action-popup-menu-item__content-description">{{ capitalizedText(this.description) }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const l={name:"RouteActionMenu",mixins:[r],components:{BaseActionMenu:u,RouteActionMenuItem:c},template:`\n\t\t<BaseActionMenu\n\t\t\t:id="id"\n\t\t\t:items="items"\n\t\t\t:bindElement="bindElement"\n\t\t\t:width="260"\n\t\t\tv-slot="{item}"\n\t\t\t@close="this.$emit('close')"\n\t\t>\n\t\t\t<RouteActionMenuItem\n\t\t\t\t:id="item.id"\n\t\t\t\t:title="item.title"\n\t\t\t\t:description="item.description"\n\t\t\t\t:imageClass="item.imageClass"\n\t\t\t\t:bIcon="item.bIcon"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`};const p=new Set(["red"]);const d={name:"ActionMenuItem",props:{id:{type:String,required:true},title:{type:String,required:true},imageClass:{type:String,required:false,default:""},color:{type:String,required:false,default:""}},computed:{colorClass(){if(p.has(this.color)){return`--${this.color}`}return""}},template:`\n\t\t<div class="hr-structure-action-popup-menu-item">\n\t\t\t<div class="hr-structure-action-popup-menu-item__content">\n\t\t\t\t<div\n\t\t\t\t\tclass="hr-structure-action-popup-menu-item__content-title"\n\t\t\t\t\t:class="[imageClass, colorClass]"\n\t\t\t\t>\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const m={name:"ActionMenu",mixins:[r],components:{BaseActionMenu:u,ActionMenuItem:d},template:`\n\t\t<BaseActionMenu\n\t\t\t:id="id"\n\t\t\t:items="items"\n\t\t\t:bindElement="bindElement"\n\t\t\t:width="260"\n\t\t\t:delimiter="false"\n\t\t\tv-slot="{item}"\n\t\t\t@close="this.$emit('close')"\n\t\t>\n\t\t\t<ActionMenuItem\n\t\t\t\t:id="item.id"\n\t\t\t\t:title="item.title"\n\t\t\t\t:imageClass="item.imageClass"\n\t\t\t\t:color="item.color"\n\t\t\t\t@click="this.$emit('action', item.id)"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`};const f={name:"UserActionMenuItem",components:{BIcon:n.BIcon},props:{id:{type:Number,required:true},name:{type:String,required:true},avatar:{type:String,required:false,default:null},workPosition:{type:String,required:false,default:null}},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)}},template:`\n\t\t<div class="hr-structure-route-action-popup-menu-item">\n\t\t\t<div class="hr-structure-route-action-popup-menu-item__content">\n\t\t\t\t<img\n\t\t\t\t\t:src="!this.avatar ? '/bitrix/js/humanresources/company-structure/org-chart/src/images/default-user.svg' : encodeURI(this.avatar)"\n\t\t\t\t\tclass="humanresources-tree__node_avatar --head"\n\t\t\t\t \talt=""\n\t\t\t\t/>\n\t\t\t\t<div class="hr-structure-route-action-popup-menu-item__content-text-container">\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass="humanresources-tree__node_head-name"\n\t\t\t\t\t\t:title="this.name"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ this.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class="humanresources-tree__node_head-position">{{ this.workPosition }}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const h={name:"UserListActionMenu",mixins:[r],components:{BaseActionMenu:u,UserActionMenuItem:f},methods:{openUserUrl(t){if(!t){return}i.SidePanel.Instance.open(t,{cacheable:false})}},template:`\n\t\t<BaseActionMenu \n\t\t\t:id="id"\n\t\t\tclassName="hr-user-list-action-menu"\n\t\t\t:items="items" \n\t\t\t:bindElement="bindElement"\n\t\t\t:width="260"\n\t\t\t:delimiter="false"\n\t\t\t:titleBar="titleBar"\n\t\t\t:angleOffset="35"\n\t\t\tv-slot="{item}"\n\t\t\t@close="this.$emit('close')"\n\t\t>\n\t\t\t<UserActionMenuItem\n\t\t\t\t:id="item.id" \n\t\t\t\t:name="item.name"\n\t\t\t\t:avatar="item.avatar"\n\t\t\t\t:workPosition="item.workPosition"\n\t\t\t\t:color="item.color"\n\t\t\t\t@click="this.openUserUrl(item.url)"\n\t\t\t/>\n\t\t</BaseActionMenu>\n\t`};const g={name:"DefaultPopupLayout",template:`\n\t\t<div\n\t\t\tv-if="$slots.content"\n\t\t\tclass="hr-default-popup-layout__content"\n\t\t>\n\t\t\t<slot name="content"></slot>\n\t\t</div>\n\t`};let v=t=>t,b;const B={name:"ConfirmationPopup",emits:["close","action"],components:{BasePopup:a,DefaultLayoutPopup:g},props:{title:{type:String,required:false,default:null},withoutTitleBar:{type:Boolean,required:false,default:false},description:{type:String,required:false},onlyConfirmButtonMode:{type:Boolean,required:false,default:false},confirmBtnText:{type:String,required:false,default:null},showActionButtonLoader:{type:Boolean,required:false,default:false},lockActionButton:{type:Boolean,required:false,default:false},cancelBtnText:{type:String,required:false,default:null},bindElement:{type:HTMLElement,required:false,default:null},width:{type:Number,required:false,default:300}},methods:{loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)},closeAction(){if(this.showActionButtonLoader){return}this.$emit("close")},performAction(){if(this.lockActionButton||this.showActionButtonLoader){return}this.$emit("action")},getTitleBar(){var t;const{root:e,closeButton:n}=o.Tag.render(b||(b=v`
				<div class="hr-confirmation-popup__title-bar">
					<span class="hr-confirmation-popup__title-bar-text">
						${0}
					</span>
					<div
						class="ui-icon-set --cross-25 hr-confirmation-popup__title-bar-close-button"
						ref="closeButton"
					>
					</div>
				</div>
			`),(t=this.title)!=null?t:"");o.Event.bind(n,"click",(()=>{this.closeAction()}));return{content:e}}},computed:{popupConfig(){return{width:this.width,bindElement:this.bindElement,borderRadius:12,overlay:this.bindElement===null?{opacity:40}:false,contentNoPaddings:true,contentPadding:0,padding:0,className:"hr_structure_confirmation_popup",autoHide:false,draggable:true,titleBar:this.withoutTitleBar?null:this.getTitleBar()}}},template:`\n\t\t<BasePopup\n\t\t\t:id="'id'"\n\t\t\t:config="popupConfig"\n\t\t>\n\t\t\t<template v-slot="{ closePopup }">\n\t\t\t\t<DefaultLayoutPopup>\n\t\t\t\t\t<template v-slot:content>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass="hr-confirmation-popup__content-container"\n\t\t\t\t\t\t\t:class="{ '--without-title-bar': withoutTitleBar }"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div v-if="$slots.content">\n\t\t\t\t\t\t\t\t<slot name="content"></slot>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else class="hr-confirmation-popup__content-text">\n\t\t\t\t\t\t\t\t{{ description }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="hr-confirmation-popup__buttons-container">\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round"\n\t\t\t\t\t\t\t\t:class="{ 'ui-btn-wait': showActionButtonLoader, 'ui-btn-disabled': lockActionButton }"\n\t\t\t\t\t\t\t\t@click="performAction"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ confirmBtnText ?? '' }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tv-if="!onlyConfirmButtonMode"\n\t\t\t\t\t\t\t\tclass="ui-btn ui-btn-light-border ui-btn-round"\n\t\t\t\t\t\t\t\t@click="closeAction"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ cancelBtnText ?? loc('HUMANRESOURCES_COMPANY_STRUCTURE_STRUCTURE_COMPONENTS_POPUP_CONFIRMATION_POPUP_CANCEL_BUTTON') }}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</DefaultLayoutPopup>\n\t\t\t</template>\n\t\t</BasePopup>\n\t`};const P={mounted(t){let e=null;o.Event.bind(t,"mouseenter",(()=>{if(t.scrollWidth===t.offsetWidth){return}e=o.Reflection.getClass("BX.UI.Hint").createInstance({popupParameters:{cacheable:false,angle:{offset:0},offsetLeft:t.getBoundingClientRect().width/2}});e.show(t,o.Text.encode(t.textContent))}));o.Event.bind(t,"mouseleave",(()=>{var t;(t=e)==null?void 0:t.hide()}))}};t.BasePopup=a;t.BaseActionMenu=u;t.RouteActionMenu=l;t.ActionMenu=m;t.UserListActionMenu=h;t.ConfirmationPopup=B;t.Hint=P})(this.BX.Humanresources.CompanyStructure=this.BX.Humanresources.CompanyStructure||{},BX.Main,BX.UI.IconSet,BX,BX);
//# sourceMappingURL=structure-components.bundle.map.js