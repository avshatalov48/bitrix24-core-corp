{"version":3,"file":"utils.bundle.js","sources":["../src/user-item.js","../src/color.js","../src/refresh-departments.js"],"sourcesContent":["import { memberRoles } from 'humanresources.company-structure.api';\n\ntype UserData = {\n\tid: number,\n\tavatar: ?string,\n\tname: string,\n\tworkPosition: ?string,\n\trole: string,\n};\n\nexport const getUserStoreItemByDialogItem = (item, role): UserData => {\n\tconst { id, avatar, title, customData } = item;\n\tconst link = item.getLink();\n\tconst workPosition = customData.get('position') ?? '';\n\n\treturn {\n\t\tid,\n\t\tavatar,\n\t\tname: title.text,\n\t\tworkPosition,\n\t\trole,\n\t\turl: link,\n\t};\n};\n\nexport const moveUserStoreToAnotherDepartment = (departments, nodeId, userId, targetNodeId, role) => {\n\tconst department = departments.get(nodeId);\n\tif (!department)\n\t{\n\t\treturn;\n\t}\n\n\tlet user = null;\n\tdepartment.userCount -= 1;\n\tif (role === memberRoles.employee)\n\t{\n\t\tuser = department.employees.find((employee) => employee.id === userId);\n\t\tdepartment.employees = department.employees.filter((employee) => employee.id !== userId);\n\t}\n\telse\n\t{\n\t\tuser = department.heads.find((head) => head.id === userId);\n\t\tdepartment.heads = department.heads.filter((head) => head.id !== userId);\n\t}\n\n\tif (!user)\n\t{\n\t\treturn;\n\t}\n\n\tconst targetDepartment = departments.get(targetNodeId);\n\tif (!targetDepartment)\n\t{\n\t\treturn;\n\t}\n\n\ttargetDepartment.userCount += 1;\n\tuser.role = memberRoles.employee;\n\tif (!targetDepartment.employees)\n\t{\n\t\treturn;\n\t}\n\ttargetDepartment.employees.push(user);\n};\n\nexport const removeUserFromStore = (departments, nodeId, userId, role) => {\n\tconst department = departments.get(nodeId);\n\tif (!department)\n\t{\n\t\treturn;\n\t}\n\n\tdepartment.userCount -= 1;\n\tif (role === memberRoles.employee)\n\t{\n\t\tdepartment.employees = department.employees.filter((employee) => employee.id !== userId);\n\n\t\treturn;\n\t}\n\n\tdepartment.heads = department.heads.filter((head) => head.id !== userId);\n};","const optionColor = Object.freeze({\n\tpaletteBlue50: {\n\t\ttokenClass: '--ui-color-palette-blue-50',\n\t\tcolor: '#2FC6F6',\n\t},\n\tpaletteGreen55: {\n\t\ttokenClass: '--ui-color-palette-green-55',\n\t\tcolor: '#95C500',\n\t},\n\tpaletteRed40: {\n\t\ttokenClass: '--ui-color-palette-red-40',\n\t\tcolor: '#FF9A97',\n\t},\n\taccentAqua: {\n\t\ttokenClass: '--ui-color-accent-aqua',\n\t\tcolor: '#55D0E0',\n\t},\n\taccentTurquoise: {\n\t\ttokenClass: '--ui-color-accent-turquoise',\n\t\tcolor: '#05b5ab',\n\t},\n\tpaletteOrange40: {\n\t\ttokenClass: '--ui-color-palette-orange-40',\n\t\tcolor: '#FFC34D',\n\t},\n\tlightBlue: {\n\t\ttokenClass: '--ui-color-accent-light-blue',\n\t\tcolor: '#559be6',\n\t},\n});\n\nexport const getColorCode = (colorKey) => {\n\tconst colorOption = optionColor[colorKey];\n\tif (colorOption)\n\t{\n\t\treturn getComputedStyle(document.body).getPropertyValue(colorOption.tokenClass) || colorOption.color;\n\t}\n\n\treturn null;\n};","import { getData } from 'humanresources.company-structure.api';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\n\nexport const refreshDepartments = async (nodeIds: number[]) => {\n\tconst chartStore = useChartStore();\n\tconst departments = await getData('humanresources.api.Structure.Node.getByIds', { nodeIds });\n\n\tObject.keys(departments).forEach((id) => {\n\t\tconst department = departments[id];\n\t\tconst existingDepartment = chartStore.departments.get(Number(id)) || {};\n\n\t\tchartStore.departments.set(Number(id), {\n\t\t\t...existingDepartment,\n\t\t\theads: department.heads,\n\t\t\tuserCount: department.userCount,\n\t\t\tpage: 0,\n\t\t\tshouldUpdateList: true,\n\t\t\temployees: [],\n\t\t});\n\t});\n};\n"],"names":["getUserStoreItemByDialogItem","item","role","id","avatar","title","customData","link","getLink","workPosition","get","name","text","url","moveUserStoreToAnotherDepartment","departments","nodeId","userId","targetNodeId","department","user","userCount","memberRoles","employee","employees","find","filter","heads","head","targetDepartment","push","removeUserFromStore","optionColor","Object","freeze","paletteBlue50","tokenClass","color","paletteGreen55","paletteRed40","accentAqua","accentTurquoise","paletteOrange40","lightBlue","getColorCode","colorKey","colorOption","getComputedStyle","document","body","getPropertyValue","refreshDepartments","nodeIds","chartStore","useChartStore","getData","keys","forEach","existingDepartment","Number","set","page","shouldUpdateList"],"mappings":"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"}