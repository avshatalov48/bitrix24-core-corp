{"version":3,"file":"user-management-dialog.bundle.js","sources":["../src/actions.js","../src/api.js","../src/consts.js","../src/footer.js","../src/header.js","../src/dialog.js"],"sourcesContent":["import { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { memberRoles } from 'humanresources.company-structure.api';\n\nexport const UserManagementDialogActions = {\n\tgetDepartmentName: (nodeId: number): string => {\n\t\tconst { departments } = useChartStore();\n\t\tconst targetDepartment = departments.get(nodeId);\n\t\tif (!targetDepartment)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn targetDepartment.name;\n\t},\n\tmoveUsersToDepartment: (\n\t\tnodeId: number,\n\t\tusers: Array,\n\t\tuserCount: number,\n\t\tupdatedDepartmentIds: number[],\n\t): void => {\n\t\tconst store = useChartStore();\n\t\tconst targetDepartment = store.departments.get(nodeId);\n\t\tif (!targetDepartment)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst newMemberUserIds = new Set(users.map((user) => user.id));\n\t\tconst employees = (targetDepartment.employees ?? []).filter((user) => !newMemberUserIds.has(user.id));\n\t\tconst headsUserIds = new Set(targetDepartment.heads.map((head) => head.id));\n\t\tconst newUsers = users.filter((user) => !headsUserIds.has(user.id));\n\t\temployees.push(...newUsers);\n\t\ttargetDepartment.employees = employees;\n\t\ttargetDepartment.userCount = userCount;\n\n\t\tif (updatedDepartmentIds.length > 0)\n\t\t{\n\t\t\tvoid store.refreshDepartments(updatedDepartmentIds);\n\t\t}\n\t},\n\taddUsersToDepartment: (\n\t\tnodeId: number,\n\t\tusers: Array,\n\t\tuserCount: number,\n\t\trole: string,\n\t): void => {\n\t\tconst store = useChartStore();\n\t\tconst targetDepartment = store.departments.get(nodeId);\n\t\tif (!targetDepartment)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst newMemberUserIds = new Set(users.map((user) => user.id));\n\t\tif (newMemberUserIds.has(store.userId))\n\t\t{\n\t\t\tstore.changeCurrentDepartment(0, targetDepartment.id);\n\t\t}\n\t\tconst heads = (targetDepartment.heads ?? []).filter((user) => !newMemberUserIds.has(user.id));\n\n\t\tconst employees = (targetDepartment.employees ?? []).filter((user) => !newMemberUserIds.has(user.id));\n\t\t(role === memberRoles.employee ? employees : heads).push(...users);\n\n\t\ttargetDepartment.heads = heads;\n\t\ttargetDepartment.employees = employees;\n\t\ttargetDepartment.userCount = userCount;\n\t},\n};\n","import { postData } from 'humanresources.company-structure.api';\n\nexport const UserManagementDialogAPI = {\n\tmoveUsersToDepartment: (nodeId: number, userIds: number[]): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.moveUserListToDepartment', {\n\t\t\tnodeId,\n\t\t\tuserIds,\n\t\t});\n\t},\n\taddUsersToDepartment: (nodeId: number, userIds: number[], role: string): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.addUserMember', {\n\t\t\tnodeId,\n\t\t\tuserIds,\n\t\t\troleXmlId: role,\n\t\t});\n\t},\n};\n","export const allowedDialogTypes = [\n\t'add',\n\t'move',\n];\n","import { Dom, Event, Tag, Loc, Type, Text } from 'main.core';\nimport { BaseFooter, type FooterOptions, type ItemOptions, type Tab } from 'ui.entity-selector';\nimport { getUserDataBySelectorItem } from 'humanresources.company-structure.utils';\nimport { memberRoles } from 'humanresources.company-structure.api';\nimport type { BaseEvent } from 'main.core.events';\nimport { UI } from 'ui.notification';\nimport { UserManagementDialogActions } from './actions';\nimport { UserManagementDialogAPI } from './api';\nimport { allowedDialogTypes } from './consts';\n\nconst disabledButtonClass = 'ui-btn-disabled';\n\nexport class BaseUserManagementDialogFooter extends BaseFooter\n{\n\tnodeId: number;\n\tconfirmButtonText: ?string;\n\ttype: string;\n\trole: string;\n\n\tconstructor(tab: Tab, options: FooterOptions)\n\t{\n\t\tsuper(tab, options);\n\n\t\tthis.nodeId = this.getOption('nodeId');\n\t\tif (!Type.isInteger(this.nodeId))\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid argument 'nodeId'. An integer value was expected.\");\n\t\t}\n\n\t\tthis.role = this.getOption('role') ?? memberRoles.employee;\n\t\tconst type = this.getOption('type') ?? '';\n\t\tif (Type.isString(type) && allowedDialogTypes.includes(type))\n\t\t{\n\t\t\tthis.type = type;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(`Invalid argument 'type'. Expected one of: ${allowedDialogTypes.join(', ')}`);\n\t\t}\n\n\t\tthis.#setConfirmButtonText();\n\n\t\tconst selectedItems = this.getDialog().getSelectedItems();\n\t\tthis.userCount = selectedItems.length;\n\t\tthis.users = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tthis.#onUserToggle(item);\n\t\t});\n\n\t\tthis.getDialog().subscribe('Item:onSelect', this.#handleOnTagAdd.bind(this));\n\t\tthis.getDialog().subscribe('Item:onDeselect', this.#handleOnTagRemove.bind(this));\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst { footer, footerAddButton, footerCloseButton } = Tag.render`\n\t\t\t<div ref=\"footer\" class=\"hr-user-management-dialog__footer\">\n\t\t\t\t<button ref=\"footerAddButton\" class=\"ui-btn ui-btn ui-btn-sm ui-btn-primary ${this.users.length === 0 ? disabledButtonClass : ''} ui-btn-round hr-user-management-dialog__footer-btn-width\">\n\t\t\t\t\t${this.confirmButtonText ?? ''}\n\t\t\t\t</button>\n\t\t\t\t<button ref=\"footerCloseButton\" class=\"ui-btn ui-btn ui-btn-sm ui-btn-light-border ui-btn-round hr-user-management-dialog__footer-btn-width\">\n\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_CANCEL_BUTTON')}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.footerAddButton = footerAddButton;\n\t\tEvent.bind(footerCloseButton, 'click', (event) => {\n\t\t\tthis.dialog.hide();\n\t\t});\n\n\t\tEvent.bind(footerAddButton, 'click', (event) => {\n\t\t\tconst users = this.dialog.getSelectedItems();\n\t\t\tconst userIds = users.map((item: Item): void => item.getId());\n\n\t\t\tif (userIds.length > 0)\n\t\t\t{\n\t\t\t\tDom.addClass(footerAddButton, 'ui-btn-wait');\n\t\t\t\tthis.action(userIds);\n\t\t\t}\n\t\t});\n\n\t\treturn footer;\n\t}\n\n\tdestroyDialog(): void\n\t{\n\t\tthis.isInProcess = false;\n\t\tthis.getDialog().destroy();\n\t}\n\n\t#handleOnTagAdd(event: BaseEvent): void\n\t{\n\t\tconst { item } = event.getData();\n\t\tthis.#onUserToggle(item);\n\t}\n\n\t#handleOnTagRemove(event: BaseEvent): void\n\t{\n\t\tconst { item } = event.getData();\n\t\tthis.#onUserToggle(item, false);\n\t}\n\n\t#onUserToggle(item: ItemOptions, isSelected: boolean = true): void\n\t{\n\t\tif (!isSelected)\n\t\t{\n\t\t\tthis.users = this.users.filter((user) => user.id !== item.id);\n\t\t\tthis.userCount -= 1;\n\t\t\tthis.#toggleAddButton();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst userData = getUserDataBySelectorItem(item, this.role);\n\t\tthis.users = [...this.users, userData];\n\t\tthis.userCount += 1;\n\t\tthis.#toggleAddButton();\n\t}\n\n\t#toggleAddButton(): void\n\t{\n\t\tif (this.userCount === 0)\n\t\t{\n\t\t\tDom.addClass(this.footerAddButton, disabledButtonClass);\n\n\t\t\treturn;\n\t\t}\n\n\t\tDom.removeClass(this.footerAddButton, disabledButtonClass);\n\t}\n\n\t#setConfirmButtonText(): void\n\t{\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tthis.confirmButtonText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_CONFIRM_BUTTON');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tthis.confirmButtonText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_CONFIRM_BUTTON');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.confirmButtonText = '';\n\t}\n\n\tasync action(userIds: number[]): void\n\t{\n\t\tif (!this.userCount || this.isInProcess)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isInProcess = true;\n\t\tconst departmentUserIds = this.type === 'move' ? { [memberRoles.employee]: userIds } : userIds;\n\n\t\tconst data = await this.#saveUsers(departmentUserIds).catch(() => {});\n\t\tif (!data)\n\t\t{\n\t\t\tthis.destroyDialog();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tUserManagementDialogActions.addUsersToDepartment(\n\t\t\t\tthis.nodeId,\n\t\t\t\tthis.users,\n\t\t\t\tdata.userCount ?? 0,\n\t\t\t\tthis.role ?? memberRoles.employee,\n\t\t\t);\n\t\t}\n\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tUserManagementDialogActions.moveUsersToDepartment(\n\t\t\t\tthis.nodeId,\n\t\t\t\tthis.users,\n\t\t\t\tdata.userCount ?? 0,\n\t\t\t\tdata.updatedDepartmentIds ?? [],\n\t\t\t);\n\t\t}\n\n\t\tconst notificationCode = this.getNotificationMessageCode();\n\t\tif (notificationCode)\n\t\t{\n\t\t\tthis.showNotification(notificationCode);\n\t\t}\n\t\tthis.destroyDialog();\n\t}\n\n\t#saveUsers(departmentUserIds: Array): Promise<void>\n\t{\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\treturn UserManagementDialogAPI.moveUsersToDepartment(this.nodeId, departmentUserIds);\n\t\t}\n\n\t\treturn UserManagementDialogAPI.addUsersToDepartment(this.nodeId, departmentUserIds, this.role);\n\t}\n\n\tshowNotification(messageCode: string): void\n\t{\n\t\tconst departmentName = UserManagementDialogActions.getDepartmentName(this.nodeId);\n\n\t\tUI.Notification.Center.notify({\n\t\t\tcontent: Text.encode(Loc.getMessage(\n\t\t\t\tmessageCode,\n\t\t\t\t{\n\t\t\t\t\t'#DEPARTMENT#': departmentName,\n\t\t\t\t},\n\t\t\t)),\n\t\t\tautoHideDelay: 2000,\n\t\t});\n\t}\n\n\tgetNotificationMessageCode(): ?string\n\t{\n\t\tif (this.type === 'add')\n\t\t{\n\t\t\tif (this.users.length > 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_ADD_EMPLOYEES_MESSAGE');\n\t\t\t}\n\n\t\t\tif (this.users.length === 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_USER_ADD_EMPLOYEE_MESSAGE');\n\t\t\t}\n\t\t}\n\n\t\tif (this.type === 'move')\n\t\t{\n\t\t\tif (this.users.length > 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_MOVE_EMPLOYEES_MESSAGE');\n\t\t\t}\n\n\t\t\tif (this.users.length === 1)\n\t\t\t{\n\t\t\t\tthis.showNotification('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_MOVE_EMPLOYEE_MESSAGE');\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","import { Dom, Event, Tag, Loc, Text } from 'main.core';\nimport { BaseHeader, type Dialog, type Tab, type HeadOptions } from 'ui.entity-selector';\nimport { Menu, PopupManager } from 'main.popup';\nimport { BaseUserManagementDialogFooter } from './footer';\nimport { memberRoles } from 'humanresources.company-structure.api';\n\nexport class BaseUserManagementDialogHeader extends BaseHeader\n{\n\ttitle: string;\n\tdescription: string;\n\trole: string;\n\n\tconstructor(context: Dialog | Tab, options: HeadOptions)\n\t{\n\t\tsuper(context, options);\n\n\t\tthis.tiltle = Text.encode(this.getOption('title') ?? '');\n\t\tthis.description = Text.encode(this.getOption('description') ?? '');\n\t\tthis.role = this.getOption('role') ?? memberRoles.employee;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst { header, headerCloseButton } = Tag.render`\n\t\t\t<div ref=\"header\" class=\"hr-user-management-dialog__header\">\n\t\t\t\t<div ref=\"headerCloseButton\" class=\"hr-user-management-dialog__header-close_button\"></div>\n\t\t\t\t<span class=\"hr-user-management-dialog__header-title\">\n\t\t\t\t\t${this.tiltle}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(headerCloseButton, 'click', () => {\n\t\t\tthis.getDialog().hide();\n\t\t});\n\n\t\tthis.header = header;\n\t\tif (this.role === memberRoles.employee)\n\t\t{\n\t\t\tconst employeeAddSubtitle = Tag.render`\n\t\t\t\t<span class=\"hr-user-management-dialog__header-description\">\n\t\t\t\t\t${this.description}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t\tDom.append(employeeAddSubtitle, this.header);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#addRoleSwitcher();\n\t\t}\n\n\t\treturn header;\n\t}\n\n\t#addRoleSwitcher(): void\n\t{\n\t\tconst { roleSwitcherContainer, roleSwitcher } = Tag.render`\n\t\t\t<div ref=\"roleSwitcherContainer\" class=\"hr-user-management-dialog__role_switcher-container\">\n\t\t\t\t<span class=\"hr-user-management-dialog__role_switcher_title\">\n\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ROLE_PICKER_TEXT')}\n\t\t\t\t\t</span>\n\t\t\t\t<div ref=\"roleSwitcher\" class=\"hr-user-management-dialog__role_switcher\">\n\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_HEAD_ROLE_TITLE')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(roleSwitcherContainer, this.header);\n\t\tthis.roleSwitcher = roleSwitcher;\n\n\t\tEvent.bind(this.roleSwitcher, 'click', () => {\n\t\t\tthis.#toggleRoleSwitcherMenu();\n\t\t});\n\t}\n\n\t#toggleRoleSwitcherMenu(): void\n\t{\n\t\tconst roleSwitcherId = `${this.getDialog().id}-role-switcher`;\n\t\tconst oldRoleSwitcherMenu = PopupManager.getPopupById(roleSwitcherId);\n\t\tif (oldRoleSwitcherMenu)\n\t\t{\n\t\t\toldRoleSwitcherMenu.destroy();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst roleSwitcherMenu = new Menu({\n\t\t\tid: roleSwitcherId,\n\t\t\tbindElement: this.roleSwitcher,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tmaxWidth: 263,\n\t\t\tevents: {\n\t\t\t\tonPopupDestroy: () => {\n\t\t\t\t\tDom.removeClass(this.roleSwitcher, '--focused');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tconst menuItems = [\n\t\t\t{\n\t\t\t\thtml: Tag.render`\n\t\t\t\t\t<div \n\t\t\t\t\t\tdata-test-id=\"hr-company-structure_user-management-dialog__role-switcher-head\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_HEAD_ROLE_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roleSwitcher.innerText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_HEAD_ROLE_TITLE');\n\t\t\t\t\tthis.#changeRole(memberRoles.head);\n\t\t\t\t\troleSwitcherMenu.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: Tag.render`\n\t\t\t\t\t<div \n\t\t\t\t\t\tdata-test-id=\"hr-company-structure_user-management-dialog__role-switcher-deputy\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_DEPUTY_ROLE_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roleSwitcher.innerText = Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_DEPUTY_ROLE_TITLE');\n\t\t\t\t\tthis.#changeRole(memberRoles.deputyHead);\n\t\t\t\t\troleSwitcherMenu.destroy();\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\t\tmenuItems.forEach((menuItem) => roleSwitcherMenu.addMenuItem(menuItem));\n\n\t\tif (roleSwitcherMenu.isShown)\n\t\t{\n\t\t\troleSwitcherMenu.destroy();\n\n\t\t\treturn;\n\t\t}\n\n\t\troleSwitcherMenu.show();\n\t\tDom.addClass(this.roleSwitcher, '--focused');\n\t}\n\n\t#changeRole(role: string): void\n\t{\n\t\tconst currentFooterOptions = this.getDialog().getFooter().getOptions();\n\t\tcurrentFooterOptions.role = role;\n\t\tthis.getDialog().setFooter(BaseUserManagementDialogFooter, currentFooterOptions);\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport { Dialog } from 'ui.entity-selector';\nimport type { UserManagementDialogConfiguration } from './types';\nimport { BaseUserManagementDialogHeader } from './header';\nimport { BaseUserManagementDialogFooter } from './footer';\nimport { memberRoles } from 'humanresources.company-structure.api';\nimport { allowedDialogTypes } from './consts';\nimport './style.css';\n\nconst dialogId = 'hr-user-management-dialog';\n\nexport class UserManagementDialog\n{\n\t#dialog: Dialog;\n\t#nodeId: number;\n\t#type: string;\n\t#role: string;\n\n\tconstructor(options: UserManagementDialogConfiguration)\n\t{\n\t\tif (Type.isInteger(options.nodeId))\n\t\t{\n\t\t\tthis.#nodeId = options.nodeId;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(\"Invalid argument 'nodeId'. An integer value was expected.\");\n\t\t}\n\n\t\tif (Type.isString(options.type) && allowedDialogTypes.includes(options.type))\n\t\t{\n\t\t\tthis.#type = options.type;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new TypeError(`Invalid argument 'type'. Expected one of: ${allowedDialogTypes.join(', ')}`);\n\t\t}\n\n\t\tif (Object.values(memberRoles).includes(options.role))\n\t\t{\n\t\t\tthis.#role = options.role;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#role = memberRoles.employee;\n\t\t}\n\n\t\tthis.id = `${dialogId}-${this.#type}`;\n\t\tthis.title = this.#getTitleByTypeAndRole(this.#type, this.#role);\n\t\tthis.description = this.#getDescriptionByTypeAndRole(this.#type, this.#role);\n\t\tthis.#createDialog();\n\t}\n\n\tstatic openDialog(options: UserManagementDialogConfiguration): void\n\t{\n\t\tconst instance = new UserManagementDialog(options);\n\t\tinstance.show();\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#dialog.show();\n\t}\n\n\t#createDialog(): void\n\t{\n\t\tthis.#dialog = new Dialog({\n\t\t\tid: this.id,\n\t\t\twidth: 400,\n\t\t\theight: 511,\n\t\t\tmultiple: true,\n\t\t\tcacheable: false,\n\t\t\tdropdownMode: true,\n\t\t\tcompactView: false,\n\t\t\tenableSearch: true,\n\t\t\tshowAvatars: true,\n\t\t\tautoHide: false,\n\t\t\theader: BaseUserManagementDialogHeader,\n\t\t\theaderOptions: {\n\t\t\t\ttitle: this.title,\n\t\t\t\trole: this.#role,\n\t\t\t\tdescription: this.description,\n\t\t\t},\n\t\t\tfooter: BaseUserManagementDialogFooter,\n\t\t\tfooterOptions: {\n\t\t\t\tnodeId: this.#nodeId,\n\t\t\t\trole: this.#role,\n\t\t\t\ttype: this.#type,\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\toverlay: { opacity: 40 },\n\t\t\t},\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t\tinviteEmployeeLink: false,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#getTitleByTypeAndRole(type: string, role: string): string\n\t{\n\t\tif (type === 'move' && role === memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_TITLE');\n\t\t}\n\n\t\tif (type === 'add' && role === memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_EMPLOYEE_TITLE');\n\t\t}\n\n\t\tif (type === 'add' && role === memberRoles.head)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_HEAD_TITLE');\n\t\t}\n\n\t\treturn '';\n\t}\n\n\t#getDescriptionByTypeAndRole(type: string, role: string): string\n\t{\n\t\tif (type === 'move' && role === memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_MOVE_USER_FROM_DESCRIPTION');\n\t\t}\n\n\t\tif (type === 'add' && role === memberRoles.employee)\n\t\t{\n\t\t\treturn Loc.getMessage('HUMANRESOURCES_COMPANY_STRUCTURE_USER_MANAGEMENT_DIALOG_ADD_EMPLOYEE_DESCRIPTION');\n\t\t}\n\n\t\treturn '';\n\t}\n}\n"],"names":["UserManagementDialogActions","getDepartmentName","nodeId","departments","useChartStore","targetDepartment","get","name","moveUsersToDepartment","users","userCount","updatedDepartmentIds","store","newMemberUserIds","Set","map","user","id","employees","filter","has","headsUserIds","heads","head","newUsers","push","length","refreshDepartments","addUsersToDepartment","role","userId","changeCurrentDepartment","memberRoles","employee","UserManagementDialogAPI","userIds","postData","roleXmlId","allowedDialogTypes","disabledButtonClass","BaseUserManagementDialogFooter","BaseFooter","constructor","tab","options","getOption","Type","isInteger","TypeError","type","isString","includes","join","selectedItems","getDialog","getSelectedItems","forEach","item","subscribe","bind","render","footer","footerAddButton","footerCloseButton","Tag","confirmButtonText","Loc","getMessage","Event","event","dialog","hide","getId","Dom","addClass","action","destroyDialog","isInProcess","destroy","departmentUserIds","data","catch","notificationCode","getNotificationMessageCode","showNotification","messageCode","departmentName","UI","Notification","Center","notify","content","Text","encode","autoHideDelay","getData","isSelected","userData","getUserDataBySelectorItem","removeClass","BaseUserManagementDialogHeader","BaseHeader","context","tiltle","description","header","headerCloseButton","employeeAddSubtitle","append","roleSwitcherContainer","roleSwitcher","roleSwitcherId","oldRoleSwitcherMenu","PopupManager","getPopupById","roleSwitcherMenu","Menu","bindElement","autoHide","closeByEsc","maxWidth","events","onPopupDestroy","menuItems","html","onclick","innerText","deputyHead","menuItem","addMenuItem","isShown","show","currentFooterOptions","getFooter","getOptions","setFooter","dialogId","UserManagementDialog","Object","values","title","openDialog","instance","Dialog","width","height","multiple","cacheable","dropdownMode","compactView","enableSearch","showAvatars","headerOptions","footerOptions","popupOptions","overlay","opacity","entities","intranetUsersOnly","inviteEmployeeLink"],"mappings":"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"}