{"version":3,"file":"department-content.bundle.js","sources":["../src/api.js","../src/actions.js","../src/components/users/list/item/move-user-action-popup.js","../src/components/users/list/item/action-button.js","../src/components/users/list/item/item.js","../src/components/users/list/list.js","../src/components/users/list/list-action-button.js","../src/components/users/empty-state-types.js","../src/components/users/empty-state-container.js","../src/components/users/tab.js","../src/components/chat/tab.js","../src/components/department-content.js"],"sourcesContent":["import { getData, postData } from 'humanresources.company-structure.api';\n\nexport const DepartmentAPI = {\n\tgetPagedEmployees: (id: Number, page: Number, countPerPage: Number) => {\n\t\treturn getData('humanresources.api.Structure.Node.Member.Employee.list', { nodeId: id, page, countPerPage });\n\t},\n\tremoveUserFromDepartment: (nodeId: number, userId: number): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.deleteUser', {\n\t\t\tnodeId,\n\t\t\tuserId,\n\t\t});\n\t},\n\tmoveUserToDepartment: (nodeId: number, userId: number, targetNodeId: number,): Promise<void> => {\n\t\treturn postData('humanresources.api.Structure.Node.Member.moveUser', {\n\t\t\tnodeId,\n\t\t\tuserId,\n\t\t\ttargetNodeId,\n\t\t});\n\t},\n\tisUserInMultipleDepartments: (userId: number): Promise<void> => {\n\t\treturn getData('humanresources.api.User.isUserInMultipleDepartments', {\n\t\t\tuserId,\n\t\t});\n\t},\n\tgetUserInfo: (nodeId: number, userId: number): Promise<void> => {\n\t\treturn getData('humanresources.api.User.getInfoByUserMember', {\n\t\t\tnodeId,\n\t\t\tuserId,\n\t\t});\n\t},\n\tfindMemberByQuery: (nodeId: number, query: string): Promise<void> => {\n\t\treturn getData('humanresources.api.Structure.Node.Member.find', {\n\t\t\tnodeId,\n\t\t\tquery,\n\t\t});\n\t},\n};\n","import { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { memberRoles } from 'humanresources.company-structure.api';\n\nexport const DepartmentContentActions = {\n\tmoveUserToDepartment: (departmentId, userId, targetDepartmentId, role): void => {\n\t\tconst store = useChartStore();\n\t\tconst department = store.departments.get(departmentId);\n\t\tconst targetDepartment = store.departments.get(targetDepartmentId);\n\n\t\tif (!department || !targetDepartment)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = role === memberRoles.employee\n\t\t\t? department.employees?.find((employee) => employee.id === userId)\n\t\t\t: department.heads.find((head) => head.id === userId)\n\t\t;\n\t\tif (!user)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tdepartment.userCount -= 1;\n\t\tif (role === memberRoles.employee)\n\t\t{\n\t\t\tdepartment.employees = department.employees.filter((employee) => employee.id !== userId);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdepartment.heads = department.heads.filter((head) => head.id !== userId);\n\t\t}\n\n\t\ttargetDepartment.userCount += 1;\n\t\tif (userId === store.userId)\n\t\t{\n\t\t\tstore.changeCurrentDepartment(departmentId, targetDepartmentId);\n\t\t}\n\n\t\tuser.role = memberRoles.employee;\n\t\tif (!targetDepartment.employees)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\ttargetDepartment.employees.push(user);\n\t},\n\tremoveUserFromDepartment: (departmentId, userId, role): void => {\n\t\tconst store = useChartStore();\n\t\tconst department = store.departments.get(departmentId);\n\t\tif (!department)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (userId === store.userId)\n\t\t{\n\t\t\tstore.changeCurrentDepartment(departmentId);\n\t\t}\n\n\t\tdepartment.userCount -= 1;\n\t\tif (role === memberRoles.employee)\n\t\t{\n\t\t\tdepartment.employees = department.employees.filter((employee) => employee.id !== userId);\n\n\t\t\treturn;\n\t\t}\n\n\t\tdepartment.heads = department.heads.filter((head) => head.id !== userId);\n\t},\n\tupdateEmployees: (departmentId: number, employees: Array): void => {\n\t\tconst { departments } = useChartStore();\n\t\tconst department = departments.get(departmentId);\n\n\t\tif (!department)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tdepartments.set(departmentId, { ...department, employees });\n\t},\n\tupdateEmployeeListOptions: (\n\t\tdepartmentId: number,\n\t\toptions: { page?: number, shouldUpdateList?: boolean, isListUpdated?: boolean }\n\t): void => {\n\t\tconst { departments } = useChartStore();\n\t\tconst department = departments.get(departmentId);\n\n\t\tif (!department)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tdepartment.employeeListOptions = {\n\t\t\t...department.employeeListOptions,\n\t\t\t...options,\n\t\t};\n\n\t\tdepartments.set(departmentId, department);\n\t},\n};\n","import { memberRoles } from 'humanresources.company-structure.api';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\nimport { ConfirmationPopup } from 'humanresources.company-structure.structure-components';\nimport { Text } from 'main.core';\nimport { TagSelector } from 'ui.entity-selector';\nimport { UI } from 'ui.notification';\nimport { mapState } from 'ui.vue3.pinia';\nimport { DepartmentContentActions } from '../../../../actions';\nimport { DepartmentAPI } from '../../../../api';\n\nimport './styles/move-user-action-popup.css';\n\nexport const MoveUserActionPopup = {\n\tname: 'MoveUserActionPopup',\n\tcomponents: { ConfirmationPopup },\n\temits: ['close', 'action'],\n\n\tprops: {\n\t\tparentId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tuser: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.permissionChecker = PermissionChecker.getInstance();\n\n\t\tif (!this.permissionChecker)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.action = PermissionActions.employeeAddToDepartment;\n\t\tthis.selectedDepartmentId = 0;\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tshowMoveUserActionLoader: false,\n\t\t\tlockMoveUserActionButton: false,\n\t\t\tshowUserAlreadyBelongsToDepartmentPopup: false,\n\t\t\taccessDenied: false,\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tconst departmentContainer = this.$refs['department-selector'];\n\t\tthis.departmentSelector = this.getTagSelector(departmentContainer);\n\t\tthis.departmentSelector.renderTo(departmentContainer);\n\t},\n\n\tcomputed: {\n\t\t...mapState(useChartStore, ['departments', 'focusedNode']),\n\t\tgetMoveUserActionPhrase(): string\n\t\t{\n\t\t\tconst departmentName = Text.encode(this.departments.get(this.focusedNode).name ?? '');\n\t\t\tconst userName = Text.encode(this.user.name ?? '');\n\n\t\t\treturn this.loc(\n\t\t\t\t'HUMANRESOURCES_DEPARTMENT_CONTENT_TAB_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_REMOVE_USER_DESCRIPTION',\n\t\t\t\t{\n\t\t\t\t\t'#USER_NAME#': userName,\n\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t},\n\t\t\t)\n\t\t\t\t.replace(\n\t\t\t\t\t'[link]',\n\t\t\t\t\t`<a class=\"hr-department-detail-content__move-user-department-user-link\" href=\"${this.user.url}\">`,\n\t\t\t\t)\n\t\t\t\t.replace('[/link]', '</a>')\n\t\t\t;\n\t\t},\n\t\tgetUserAlreadyBelongsToDepartmentPopupPhrase(): string\n\t\t{\n\t\t\tconst departmentName = Text.encode(this.departments.get(this.selectedParentDepartment ?? 0).name ?? '');\n\t\t\tconst userName = Text.encode(this.user.name ?? '');\n\n\t\t\tlet phrase = this.loc(\n\t\t\t\t'HUMANRESOURCES_DEPARTMENT_CONTENT_TAB_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_TO_DEPARTMENT_DESCRIPTION',\n\t\t\t\t{\n\t\t\t\t\t'#USER_NAME#': userName,\n\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t},\n\t\t\t);\n\t\t\tphrase = phrase.replace('[link]', `<a class=\"hr-department-detail-content__move-user-department-user-link\" href=\"${this.user.url}\">`);\n\t\t\tphrase = phrase.replace('[/link]', '</a>');\n\n\t\t\treturn phrase;\n\t\t},\n\t\tmemberRoles(): typeof memberRoles\n\t\t{\n\t\t\treturn memberRoles;\n\t\t},\n\t},\n\n\tmethods: {\n\t\tgetTagSelector(): TagSelector\n\t\t{\n\t\t\treturn new TagSelector({\n\t\t\t\tevents: {\n\t\t\t\t\tonTagAdd: (event: BaseEvent) => {\n\t\t\t\t\t\tthis.accessDenied = false;\n\t\t\t\t\t\tconst { tag } = event.data;\n\t\t\t\t\t\tthis.selectedParentDepartment = tag.id;\n\t\t\t\t\t\tif (PermissionChecker.hasPermission(this.action, tag.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.lockMoveUserActionButton = false;\n\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.accessDenied = true;\n\t\t\t\t\t\tthis.lockMoveUserActionButton = true;\n\t\t\t\t\t},\n\t\t\t\t\tonTagRemove: () => {\n\t\t\t\t\t\tthis.lockMoveUserActionButton = true;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmultiple: false,\n\t\t\t\tdialogOptions: {\n\t\t\t\t\twidth: 425,\n\t\t\t\t\theight: 350,\n\t\t\t\t\tdropdownMode: true,\n\t\t\t\t\thideOnDeselect: true,\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'structure-node',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tpreselectedItems: [['structure-node', this.parentId]],\n\t\t\t\t},\n\t\t\t\ttagBgColor: '#ade7e4',\n\t\t\t\ttagTextColor: '#207976',\n\t\t\t\ttagFontWeight: '700',\n\t\t\t\ttagAvatar: '/bitrix/js/humanresources/entity-selector/src/images/department.svg',\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tasync confirmMoveUser(): Promise<void>\n\t\t{\n\t\t\tthis.showMoveUserActionLoader = true;\n\t\t\tconst departmentId = this.focusedNode;\n\t\t\tconst userId = this.user.id;\n\t\t\tconst targetNodeId = this.selectedParentDepartment;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait DepartmentAPI.moveUserToDepartment(\n\t\t\t\t\tdepartmentId,\n\t\t\t\t\tuserId,\n\t\t\t\t\ttargetNodeId,\n\t\t\t\t);\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tthis.showMoveUserActionLoader = false;\n\n\t\t\t\tconst code = error.code ?? 0;\n\n\t\t\t\tif (code === 'MEMBER_ALREADY_BELONGS_TO_NODE')\n\t\t\t\t{\n\t\t\t\t\tthis.showUserAlreadyBelongsToDepartmentPopup = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_ERROR'),\n\t\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t\t});\n\t\t\t\t\tthis.$emit('close');\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst departmentName = Text.encode(this.departments.get(targetNodeId)?.name ?? '');\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc(\n\t\t\t\t\t'HUMANRESOURCES_DEPARTMENT_CONTENT_TAB_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_SUCCESS_MESSAGE',\n\t\t\t\t\t{\n\t\t\t\t\t\t'#DEPARTMENT_NAME#': departmentName,\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\tautoHideDelay: 2000,\n\t\t\t});\n\n\t\t\tDepartmentContentActions.moveUserToDepartment(\n\t\t\t\tdepartmentId,\n\t\t\t\tuserId,\n\t\t\t\ttargetNodeId,\n\t\t\t\tthis.user.role ?? memberRoles.employee,\n\t\t\t);\n\n\t\t\tthis.$emit('action');\n\t\t\tthis.showMoveUserActionLoader = false;\n\t\t},\n\t\tcloseAction(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tcloseUserAlreadyBelongsToDepartmentPopup(): void\n\t\t{\n\t\t\tthis.showUserAlreadyBelongsToDepartmentPopup = false;\n\t\t\tthis.closeAction();\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<ConfirmationPopup\n\t\t\t@action=\"confirmMoveUser\"\n\t\t\t@close=\"closeAction\"\n\t\t\t:showActionButtonLoader=\"showMoveUserActionLoader\"\n\t\t\t:lockActionButton=\"lockMoveUserActionButton\"\n\t\t\t:title=\"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_CONFIRM_TITLE')\"\n\t\t\t:confirmBtnText = \"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_CONFIRM_BUTTON')\"\n\t\t\t:width=\"364\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<div class=\"hr-department-detail-content__user-action-text-container\">\n\t\t\t\t\t<div v-html=\"getMoveUserActionPhrase\"/>\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{{loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_POPUP_ACTION_SELECT_DEPARTMENT_DESCRIPTION')}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-department-detail-content__move-user-department-selector\" ref=\"department-selector\"></div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department-selector\"\n\t\t\t\t\tref=\"department-selector\"\n\t\t\t\t\t:class=\"{ 'ui-ctl-warning': accessDenied }\"\n\t\t\t\t/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"accessDenied\"\n\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department_item-error\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"ui-icon-set --warning\"></div>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"hr-department-detail-content__move-user-department_item-error-message\"\n\t\t\t\t\t>\n\t\t\t\t\t\t\t{{loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_PERMISSION_ERROR')}}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</ConfirmationPopup>\n\t\t<ConfirmationPopup\n\t\t\t@action=\"closeUserAlreadyBelongsToDepartmentPopup\"\n\t\t\t@close=\"closeUserAlreadyBelongsToDepartmentPopup\"\n\t\t\tv-if=\"showUserAlreadyBelongsToDepartmentPopup\"\n\t\t\t:withoutTitleBar = true\n\t\t\t:onlyConfirmButtonMode = true\n\t\t\t:confirmBtnText = \"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_ALREADY_BELONGS_TO_DEPARTMENT_CLOSE_BUTTON')\"\n\t\t\t:width=\"300\"\n\t\t>\n\t\t\t<template v-slot:content>\n\t\t\t\t<div class=\"hr-department-detail-content__user-action-text-container\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"hr-department-detail-content__user-belongs-to-department-text-container\"\n\t\t\t\t\t\tv-html=\"getUserAlreadyBelongsToDepartmentPopupPhrase\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-department-detail-content__move-user-department-selector\" ref=\"department-selector\"></div>\n\t\t\t</template>\n\t\t</ConfirmationPopup>\n\t`,\n};\n","import { RouteActionMenu, ConfirmationPopup } from 'humanresources.company-structure.structure-components';\nimport { Main } from 'ui.icon-set.api.core';\nimport { DepartmentAPI } from '../../../../api';\nimport { DepartmentContentActions } from '../../../../actions';\nimport { memberRoles } from 'humanresources.company-structure.api';\nimport { getColorCode } from 'humanresources.company-structure.utils';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { mapState } from 'ui.vue3.pinia';\nimport { MoveUserActionPopup } from './move-user-action-popup';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\nimport { UI } from 'ui.notification';\n\nimport './styles/action-button.css';\n\nconst MenuOption = Object.freeze({\n\tremoveUserFromDepartment: 'removeUserFromDepartment',\n\tmoveUserToAnotherDepartment: 'moveUserToAnotherDepartment',\n\tfireUserFromCompany: 'fireUserFromCompany',\n});\n\nexport const UserListItemActionButton = {\n\tname: 'userList',\n\n\tprops: {\n\t\tuser: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdepartmentId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents: {\n\t\tRouteActionMenu,\n\t\tConfirmationPopup,\n\t\tMoveUserActionPopup,\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmenuVisible: {},\n\t\t\tshowRemoveUserConfirmationPopup: false,\n\t\t\tshowRemoveUserConfirmationActionLoader: false,\n\t\t\tshowMoveUserPopup: false,\n\t\t};\n\t},\n\n\tmethods: {\n\t\ttoggleMenu(userId)\n\t\t{\n\t\t\tthis.menuVisible[userId] = !this.menuVisible[userId];\n\t\t},\n\t\tloc(phraseCode: string, replacements: { [p: string]: string } = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonActionMenuItemClick(actionId: string): void\n\t\t{\n\t\t\tif (actionId === MenuOption.removeUserFromDepartment)\n\t\t\t{\n\t\t\t\tthis.showRemoveUserConfirmationPopup = true;\n\t\t\t}\n\n\t\t\tif (actionId === MenuOption.moveUserToAnotherDepartment)\n\t\t\t{\n\t\t\t\tthis.showMoveUserPopup = true;\n\t\t\t}\n\t\t},\n\t\tasync removeUser(): Promise<void>\n\t\t{\n\t\t\tthis.showRemoveUserConfirmationActionLoader = true;\n\t\t\tconst userId = this.user.id;\n\t\t\tconst isUserInMultipleDepartments = await DepartmentAPI.isUserInMultipleDepartments(userId);\n\t\t\tconst departmentId = this.focusedNode;\n\t\t\tthis.showRemoveUserConfirmationActionLoader = false;\n\t\t\tthis.showRemoveUserConfirmationPopup = false;\n\n\t\t\ttry\n\t\t\t{\n\t\t\t\tawait DepartmentAPI.removeUserFromDepartment(departmentId, userId);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_ERROR'),\n\t\t\t\t\tautoHideDelay: 2000,\n\t\t\t\t});\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst role = this.user.role;\n\t\t\tif (isUserInMultipleDepartments)\n\t\t\t{\n\t\t\t\tDepartmentContentActions.removeUserFromDepartment(departmentId, userId, role);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst rootDepartment = [...this.departments.values()].find((department) => department.parentId === 0);\n\t\t\tif (!rootDepartment)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDepartmentContentActions.moveUserToDepartment(\n\t\t\t\tdepartmentId,\n\t\t\t\tuserId,\n\t\t\t\trootDepartment.id,\n\t\t\t\trole,\n\t\t\t);\n\t\t},\n\t\tcancelRemoveUser(): void\n\t\t{\n\t\t\tthis.showRemoveUserConfirmationPopup = false;\n\t\t},\n\t\thandleMoveUserAction(): void\n\t\t{\n\t\t\tthis.showMoveUserPopup = false;\n\t\t},\n\t\thandleMoveUserClose(): void\n\t\t{\n\t\t\tthis.showMoveUserPopup = false;\n\t\t},\n\t\tgetMemberKeyByValue(value: string): string\n\t\t{\n\t\t\treturn Object.keys(memberRoles).find((key) => memberRoles[key] === value) || '';\n\t\t},\n\t},\n\n\tcreated(): void\n\t{\n\t\tconst permissionChecker = PermissionChecker.getInstance();\n\n\t\tconst menuItems = [\n\t\t\t{\n\t\t\t\tid: MenuOption.moveUserToAnotherDepartment,\n\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_TITLE'),\n\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_MOVE_TO_ANOTHER_DEPARTMENT_SUBTITLE'),\n\t\t\t\tbIcon: {\n\t\t\t\t\tname: Main.PERSON_ARROW_LEFT_1,\n\t\t\t\t\tsize: 20,\n\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t},\n\t\t\t\tpermission: {\n\t\t\t\t\taction: PermissionActions.employeeAddToDepartment,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: MenuOption.removeUserFromDepartment,\n\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_TITLE'),\n\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_SUBTITLE'),\n\t\t\t\tbIcon: {\n\t\t\t\t\tname: Main.TRASH_BIN,\n\t\t\t\t\tsize: 20,\n\t\t\t\t\tcolor: getColorCode('paletteRed40'),\n\t\t\t\t},\n\t\t\t\tpermission: {\n\t\t\t\t\taction: PermissionActions.employeeRemoveFromDepartment,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: MenuOption.fireUserFromCompany,\n\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_FIRE_FROM_COMPANY_TITLE'),\n\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_FIRE_FROM_COMPANY_SUBTITLE'),\n\t\t\t\tbIcon: {\n\t\t\t\t\tname: Main.PERSONS_DENY,\n\t\t\t\t\tsize: 20,\n\t\t\t\t\tcolor: getColorCode('paletteRed40'),\n\t\t\t\t},\n\t\t\t\tpermission: {\n\t\t\t\t\taction: PermissionActions.employeeFire,\n\t\t\t\t},\n\t\t\t},\n\t\t];\n\n\t\tthis.menuItems = menuItems.filter((item) => {\n\t\t\tif (!item.permission)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn permissionChecker.hasPermission(item.permission.action, this.departmentId);\n\t\t});\n\t},\n\n\tcomputed: {\n\t\t...mapState(useChartStore, ['focusedNode', 'departments']),\n\t\tmemberRoles(): typeof memberRoles\n\t\t{\n\t\t\treturn memberRoles;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<button \n\t\t\tv-if=\"menuItems.length\"\n\t\t\tclass=\"ui-icon-set --more hr-department-detail-content__user-action-btn\"\n\t\t\t:class=\"{ '--focused': menuVisible[user.id] }\"\n\t\t\t@click.stop=\"toggleMenu(user.id)\"\n\t\t\tref=\"actionUserButton\"\n\t\t\t:data-id=\"'hr-department-detail-content__'+ getMemberKeyByValue(user.role) + '-list_user-' + user.id + '-action-btn'\"\n\t\t/>\n\t\t<RouteActionMenu\n\t\t\tv-if=\"menuVisible[user.id]\"\n\t\t\t:id=\"'tree-node-department-menu-' + user.id\"\n\t\t\t:items=\"menuItems\"\n\t\t\t:width=\"302\"\n\t\t\t:bindElement=\"$refs.actionUserButton\"\n\t\t\t@action=\"onActionMenuItemClick\"\n\t\t\t@close=\"menuVisible[user.id] = false\"\n\t\t/>\n\t\t<ConfirmationPopup\n\t\t\tref=\"removeUserConfirmationPopup\"\n\t\t\tv-if=\"showRemoveUserConfirmationPopup\"\n\t\t\t:showActionButtonLoader=\"showRemoveUserConfirmationActionLoader\"\n\t\t\t:title=\"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_POPUP_TITLE')\"\n\t\t\t:description=\"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_POPUP_DESCRIPTION')\"\n\t\t\t:confirmBtnText = \"loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_USER_ACTION_MENU_REMOVE_FROM_DEPARTMENT_POPUP_CONFIRM_BUTTON')\"\n\t\t\t@action=\"removeUser\"\n\t\t\t@close=\"cancelRemoveUser\"\n\t\t/>\n\t\t<MoveUserActionPopup\n\t\t\tv-if=\"showMoveUserPopup\"\n\t\t\t:parentId=\"focusedNode\"\n\t\t\t:user=\"user\"\n\t\t\t@action=\"handleMoveUserAction\"\n\t\t\t@close=\"handleMoveUserClose\"\n\t\t/>\n\t`,\n};\n","import { memberRoles } from 'humanresources.company-structure.api';\nimport { UserListItemActionButton } from './action-button';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { SidePanel } from 'main.sidepanel';\nimport { mapState } from 'ui.vue3.pinia';\n\nimport 'ui.tooltip';\nimport './styles/item.css';\n\nexport const UserListItem = {\n\tname: 'userList',\n\n\tprops: {\n\t\tuser: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedUserId: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomponents: { UserListItemActionButton },\n\n\tcomputed: {\n\t\tmemberRoles(): typeof memberRoles\n\t\t{\n\t\t\treturn memberRoles;\n\t\t},\n\t\tdefaultAvatar(): string\n\t\t{\n\t\t\treturn '/bitrix/js/humanresources/company-structure/org-chart/src/images/default-user.svg';\n\t\t},\n\t\t...mapState(useChartStore, ['focusedNode']),\n\t},\n\n\tmethods: {\n\t\tloc(phraseCode: string, replacements: { [p: string]: string } = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\thandleUserClick(item): void\n\t\t{\n\t\t\tSidePanel.Instance.open(item.url, {\n\t\t\t\tcacheable: false,\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div \n\t\t\t:key=\"user.id\"\n\t\t\tclass=\"hr-department-detail-content__user-container\"\n\t\t\t:class=\"{ '--searched': user.id === selectedUserId }\"\n\t\t\t:data-id=\"'hr-department-detail-content__user-' + user.id + '-item'\"\n\t\t>\n\t\t\t<div class=\"hr-department-detail-content__user-avatar-container\" @click=\"handleUserClick(user)\">\n\t\t\t\t<img \n\t\t\t\t\tclass=\"hr-department-detail-content__user-avatar-img\"\n\t\t\t\t\t:src=\"user.avatar ? encodeURI(user.avatar) : defaultAvatar\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"user.role === memberRoles.head\" class=\"hr-department-detail-content__user-avatar-overlay\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"hr-department-detail-content-user__text-container\">\n\t\t\t\t<div class=\"hr-department-detail-content__user-title\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"hr-department-detail-content__user-name\" \n\t\t\t\t\t\t@click=\"handleUserClick(user)\"\n\t\t\t\t\t\t:bx-tooltip-user-id=\"user.id\"\n\t\t\t\t\t\t:data-id=\"'hr-department-detail-content__user-' + user.id + '-item-name'\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ user.name }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"user.badgeText\" class=\"hr-department-detail-content-user__name-badge\">{{ user.badgeText }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tclass=\"hr-department-detail-content__user-subtitle\" \n\t\t\t\t\t:class=\"{ '--without-work-position': !user.subtitle }\"\n\t\t\t\t>\n\t\t\t\t\t{{ (user.subtitle?.length ?? 0) > 0 ? user.subtitle : this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_LIST_DEFAULT_WORK_POSITION') }}\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"user.isInvited\" class=\"hr-department-detail-content-user__item-badge\">\n\t\t\t\t\t{{ this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_LIST_INVITED_BADGE_TEXT') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<UserListItemActionButton\n\t\t\t\t:user=\"user\"\n\t\t\t\t:departmentId=\"focusedNode\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { RouteActionMenu } from 'humanresources.company-structure.structure-components';\nimport { UserListItem } from './item/item';\n\nimport 'ui.icon-set.main';\nimport './styles/list.css';\n\nexport const UserList = {\n\tname: 'userList',\n\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tselectedUserId: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\n\tcomponents: { RouteActionMenu, UserListItem },\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdraggedEmployee: null,\n\t\t\tdraggedIndex: null,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tonDragStart(item, targetElement)\n\t\t{\n\t\t\tthis.$emit('dragstart', item, targetElement);\n\t\t},\n\t\tonDrop(item, targetIndex)\n\t\t{\n\t\t\tthis.$emit('drop', item, targetIndex);\n\t\t},\n\t\tupdateEmployeeRole(employee, newRole)\n\t\t{\n\t\t\temployee.role = newRole;\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"hr-department-detail-content__user-list-container\"\n\t\t>\n\t\t\t<UserListItem\n\t\t\t\tv-for=\"user in items\"\n\t\t\t\t:user=\"user\"\n\t\t\t\t:selectedUserId=\"selectedUserId\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { mapState } from 'ui.vue3.pinia';\nimport { getColorCode } from 'humanresources.company-structure.utils';\nimport { RouteActionMenu } from 'humanresources.company-structure.structure-components';\nimport { CRM, Main } from 'ui.icon-set.api.core';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\n\nimport 'ui.icon-set.crm';\nimport './styles/list-action-button.css';\n\nconst MenuOption = Object.freeze({\n\taddToDepartment: 'addToDepartment',\n\teditDepartmentUsers: 'editDepartmentUsers',\n});\n\nexport const UserListActionButton = {\n\tname: 'userListActionButton',\n\temits: ['addToDepartment', 'editDepartmentUsers'],\n\n\tprops:\n\t{\n\t\trole: {\n\t\t\ttype: String,\n\t\t\tdefault: 'employee',\n\t\t},\n\t\tdepartmentId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents:\n\t\t{\n\t\t\tRouteActionMenu,\n\t\t},\n\n\tcreated()\n\t{\n\t\tthis.permissionChecker = PermissionChecker.getInstance();\n\t\tthis.menuItems = this.getMenuItems();\n\t},\n\n\twatch:\n\t{\n\t\tdepartmentId()\n\t\t{\n\t\t\tthis.menuItems = this.getMenuItems();\n\t\t},\n\t},\n\n\tcomputed:\n\t\t{\n\t\t\t...mapState(useChartStore, ['focusedNode']),\n\t\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmenuVisible: false,\n\t\t};\n\t},\n\n\tmethods: {\n\t\tloc(phraseCode: string, replacements: { [p: string]: string } = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonActionMenuItemClick(actionId: string): void\n\t\t{\n\t\t\tthis.$emit(actionId);\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\tif (!this.permissionChecker)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tlet menuItems = [\n\t\t\t\t{\n\t\t\t\t\tid: MenuOption.addToDepartment,\n\t\t\t\t\tbIcon: {\n\t\t\t\t\t\tname: CRM.PERSON_PLUS_2,\n\t\t\t\t\t\tsize: 20,\n\t\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t\t},\n\t\t\t\t\tpermission: {\n\t\t\t\t\t\taction: PermissionActions.employeeAddToDepartment,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuOption.editDepartmentUsers,\n\t\t\t\t\tbIcon: {\n\t\t\t\t\t\tname: Main.EDIT_MENU,\n\t\t\t\t\t\tsize: 20,\n\t\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t\t},\n\t\t\t\t\tpermission: {\n\t\t\t\t\t\taction: PermissionActions.employeeAddToDepartment,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tconst menuItemText = {\n\t\t\t\t[MenuOption.addToDepartment]: {\n\t\t\t\t\thead: {\n\t\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_ADD_HEAD_TITLE'),\n\t\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_ADD_HEAD_SUBTITLE'),\n\t\t\t\t\t},\n\t\t\t\t\temployee: {\n\t\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_ADD_EMPLOYEE_TITLE'),\n\t\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_ADD_EMPLOYEE_SUBTITLE'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t[MenuOption.editDepartmentUsers]: {\n\t\t\t\t\thead: {\n\t\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_EDIT_HEAD_TITLE'),\n\t\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_EDIT_HEAD_SUBTITLE'),\n\t\t\t\t\t},\n\t\t\t\t\temployee: {\n\t\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_EDIT_EMPLOYEE_TITLE'),\n\t\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_MEMBER_ACTION_MENU_EDIT_EMPLOYEE_SUBTITLE'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tmenuItems = menuItems.map((item) => ({\n\t\t\t\t...item,\n\t\t\t\t...menuItemText[item.id][this.role],\n\t\t\t}));\n\n\t\t\treturn menuItems.filter((item) => {\n\t\t\t\tif (!item.permission)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn this.permissionChecker.hasPermission(item.permission.action, this.departmentId);\n\t\t\t});\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<button\n\t\t\tv-if=\"menuItems.length\"\n\t\t\tclass=\"hr-department-detail-content__list-header-button\"\n\t\t\t:class=\"{ '--focused': menuVisible }\"\n\t\t\t:ref=\"'actionMenuButton' + role\"\n\t\t\t@click.stop=\"menuVisible = true\"\n\t\t\t:data-ld=\"'hr-department-detail-content__' + role + '_list-header-button'\"\n\t\t>\n\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_LIST_ACTION_BUTTON_TITLE') }}\n\t\t</button>\n\t\t<RouteActionMenu\n\t\t\tv-if=\"menuVisible\"\n\t\t\t:id=\"'tree-node-department-menu-' + role + '-' + focusedNode\"\n\t\t\t:items=\"menuItems\"\n\t\t\t:width=\"302\"\n\t\t\t:bindElement=\"$refs['actionMenuButton' + role]\"\n\t\t\t@action=\"onActionMenuItemClick\"\n\t\t\t@close=\"menuVisible = false\"\n\t\t/>\n\t`,\n};\n","export const emptyStateTypes = {\n\tNO_MEMBERS_WITH_ADD_PERMISSION: 'NO_MEMBERS_WITH_ADD_PERMISSION',\n\tNO_MEMBERS_WITHOUT_ADD_PERMISSION: 'NO_MEMBERS_WITHOUT_ADD_PERMISSION',\n\tNO_SEARCHED_USERS_RESULTS: 'NO_SEARCHED_USERS_RESULTS',\n};\n","import { emptyStateTypes } from './empty-state-types';\nimport { CRM, Main } from 'ui.icon-set.api.core';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { mapState } from 'ui.vue3.pinia';\nimport { getColorCode } from 'humanresources.company-structure.utils';\nimport { RouteActionMenu } from 'humanresources.company-structure.structure-components';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\n\nimport 'ui.icon-set.crm';\nimport 'ui.icon-set.main';\nimport './styles/empty-state-container.css';\n\nconst MenuOption = Object.freeze({\n\tmoveUser: 'moveUser',\n\tuserInvite: 'userInvite',\n\taddToDepartment: 'addToDepartment',\n});\n\nexport const EmptyStateContainer = {\n\tname: 'emptyStateContainer',\n\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdepartmentId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\n\tcomponents:\n\t{\n\t\tRouteActionMenu,\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.permissionChecker = PermissionChecker.getInstance();\n\t\tthis.menuItems = this.getMenuItems();\n\t},\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tmenuVisible: false,\n\t\t};\n\t},\n\n\tcomputed: {\n\t\tshowAddButtons(): boolean\n\t\t{\n\t\t\treturn this.type === emptyStateTypes.NO_MEMBERS_WITH_ADD_PERMISSION;\n\t\t},\n\t\t...mapState(useChartStore, ['focusedNode']),\n\t},\n\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\temptyStateIconClass(): ?string\n\t\t{\n\t\t\tif (this.type === emptyStateTypes.NO_SEARCHED_USERS_RESULTS)\n\t\t\t{\n\t\t\t\treturn '--user-not-found';\n\t\t\t}\n\n\t\t\tif (this.type === emptyStateTypes.NO_MEMBERS_WITH_ADD_PERMISSION)\n\t\t\t{\n\t\t\t\treturn '--with-add-permission';\n\t\t\t}\n\n\t\t\tif (this.type === emptyStateTypes.NO_MEMBERS_WITHOUT_ADD_PERMISSION)\n\t\t\t{\n\t\t\t\treturn '--without-add-permission';\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\temptyStateTitle(): ?string\n\t\t{\n\t\t\tif (this.type === emptyStateTypes.NO_SEARCHED_USERS_RESULTS)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_SEARCHED_EMPLOYEES_TITLE');\n\t\t\t}\n\n\t\t\tif (this.type === emptyStateTypes.NO_MEMBERS_WITH_ADD_PERMISSION)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_EMPLOYEES_ADD_USER_TITLE');\n\t\t\t}\n\n\t\t\tif (this.type === emptyStateTypes.NO_MEMBERS_WITHOUT_ADD_PERMISSION)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_EMPLOYEES_TITLE');\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\temptyStateDescription(): ?string\n\t\t{\n\t\t\tif (this.type === emptyStateTypes.NO_SEARCHED_USERS_RESULTS)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_SEARCHED_EMPLOYEES_SUBTITLE');\n\t\t\t}\n\n\t\t\tif (this.type === emptyStateTypes.NO_MEMBERS_WITH_ADD_PERMISSION)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_EMPLOYEES_ADD_USER_SUBTITLE');\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tonActionMenuItemClick(actionId: string): void\n\t\t{\n\t\t\tthis.$emit(actionId, { type: 'employee', bindElement: this.$refs.actionMenuButton });\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\tif (!this.permissionChecker)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: MenuOption.moveUser,\n\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_MOVE_EMPLOYEE_TITLE'),\n\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_MOVE_EMPLOYEE_SUBTITLE'),\n\t\t\t\t\tbIcon: {\n\t\t\t\t\t\tname: Main.PERSON_ARROW_LEFT_1,\n\t\t\t\t\t\tsize: 20,\n\t\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t\t},\n\t\t\t\t\tpermission: { action: PermissionActions.employeeAddToDepartment },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuOption.userInvite,\n\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_INVITE_EMPLOYEE_TITLE'),\n\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_INVITE_EMPLOYEE_SUBTITLE'),\n\t\t\t\t\tbIcon: {\n\t\t\t\t\t\tname: Main.PERSON_LETTER,\n\t\t\t\t\t\tsize: 20,\n\t\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t\t},\n\t\t\t\t\tpermission: { action: PermissionActions.inviteToDepartment },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuOption.addToDepartment,\n\t\t\t\t\ttitle: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_ADD_EMPLOYEE_TITLE'),\n\t\t\t\t\tdescription: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_DETAIL_CONTENT_EDIT_MENU_ADD_EMPLOYEE_SUBTITLE'),\n\t\t\t\t\tbIcon: {\n\t\t\t\t\t\tname: CRM.PERSON_PLUS_2,\n\t\t\t\t\t\tsize: 20,\n\t\t\t\t\t\tcolor: getColorCode('paletteBlue50'),\n\t\t\t\t\t},\n\t\t\t\t\tpermission: { action: PermissionActions.employeeAddToDepartment },\n\t\t\t\t},\n\t\t\t].filter((item) => {\n\t\t\t\tif (!item.permission)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn this.permissionChecker.hasPermission(item.permission.action, this.focusedNode);\n\t\t\t});\n\t\t},\n\t},\n\n\twatch:\n\t{\n\t\tdepartmentId()\n\t\t{\n\t\t\tthis.menuItems = this.getMenuItems();\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-department-detail-content__tab-container --empty\">\n\t\t\t<div :class=\"['hr-department-detail-content__tab-entity-icon', this.emptyStateIconClass()]\"></div>\n\t\t\t<div class=\"hr-department-detail-content__tab-entity-content\">\n\t\t\t\t<span class=\"hr-department-detail-content__empty-tab-entity-title\">\n\t\t\t\t\t{{ this.emptyStateTitle() }}\n\t\t\t\t</span>\n\t\t\t\t<span class=\"hr-department-detail-content__empty-tab-entity-subtitle\">\n\t\t\t\t\t{{ this.emptyStateDescription() }}\n\t\t\t\t</span>\n\t\t\t\t<div v-if=\"showAddButtons\" class=\"hr-department-detail-content__empty-tab-entity-buttons-container\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"hr-add-employee-empty-tab-entity-btn ui-btn ui-btn ui-btn-sm ui-btn-primary ui-btn-round\"\n\t\t\t\t\t\tref=\"actionMenuButton\"\n\t\t\t\t\t\t@click.stop=\"menuVisible = true\"\n\t\t\t\t\t\tdata-id=\"hr-department-detail-content__user-empty-tab_add-user-button\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"hr-add-employee-empty-tab-entity-btn-text\">{{loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPTY_EMPLOYEES_ADD_USER_ADD_BUTTON')}}</span>\n\t\t\t\t\t</button>\n\t\t\t\t\t<RouteActionMenu\n\t\t\t\t\t\tv-if=\"menuVisible\"\n\t\t\t\t\t\t:id=\"'empty-state-department-detail-add-menu-' + focusedNode\"\n\t\t\t\t\t\t:items=\"menuItems\"\n\t\t\t\t\t\t:width=\"302\"\n\t\t\t\t\t\t:bindElement=\"$refs['actionMenuButton']\"\n\t\t\t\t\t\t@action=\"onActionMenuItemClick\"\n\t\t\t\t\t\t@close=\"menuVisible = false\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { DepartmentAPI } from '../../api';\nimport { UserList } from './list/list';\nimport { UserListActionButton } from './list/list-action-button';\nimport { EmptyStateContainer } from './empty-state-container';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { mapState, mapWritableState } from 'ui.vue3.pinia';\nimport { memberRoles } from 'humanresources.company-structure.api';\nimport { PermissionActions, PermissionChecker } from 'humanresources.company-structure.permission-checker';\nimport { UserManagementDialog } from 'humanresources.company-structure.user-management-dialog';\nimport { emptyStateTypes } from './empty-state-types';\nimport { DepartmentContentActions } from '../../actions';\n\nimport 'ui.buttons';\nimport './styles/tab.css';\n\ntype addToDepartmentOptions = {\n\ttype: ?string,\n};\n\ntype DepartmentUsersStatus = {\n\tdepartmentId: number;\n\tloaded: boolean;\n};\n\nexport const UsersTab = {\n\tname: 'usersTab',\n\n\temits: ['editDepartmentUsers', 'showDetailLoader', 'hideDetailLoader'],\n\n\tcomponents: { UserList, UserListActionButton, EmptyStateContainer },\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tselectedUserId: null,\n\t\t\tneedToScroll: false,\n\t\t\thasFocus: false,\n\t\t};\n\t},\n\n\tcreated(): void\n\t{\n\t\tthis.loadEmployeesAction();\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.tabContainer = this.$refs['tab-container'];\n\t},\n\n\tcomputed: {\n\t\theads(): Array\n\t\t{\n\t\t\treturn this.departments.get(this.focusedNode).heads ?? [];\n\t\t},\n\t\theadCount(): number\n\t\t{\n\t\t\treturn this.heads.length ?? 0;\n\t\t},\n\t\tformattedHeads(): Array\n\t\t{\n\t\t\treturn this.heads.map((head) => ({\n\t\t\t\t...head,\n\t\t\t\tsubtitle: head.workPosition,\n\t\t\t\tbadgeText: this.getBadgeText(head.role),\n\t\t\t})).sort((a, b) => {\n\t\t\t\tconst roleOrder = {\n\t\t\t\t\t[memberRoles.head]: 1,\n\t\t\t\t\t[memberRoles.deputyHead]: 2,\n\t\t\t\t};\n\n\t\t\t\tconst roleA = roleOrder[a.role] || 3;\n\t\t\t\tconst roleB = roleOrder[b.role] || 3;\n\n\t\t\t\treturn roleA - roleB;\n\t\t\t});\n\t\t},\n\t\tfilteredHeads(): Array\n\t\t{\n\t\t\treturn this.formattedHeads.filter(\n\t\t\t\t(head) => head.name.toLowerCase().includes(this.searchQuery.toLowerCase())\n\t\t\t\t\t|| head.workPosition.toLowerCase().includes(this.searchQuery.toLowerCase()),\n\t\t\t);\n\t\t},\n\t\temployeeCount(): number\n\t\t{\n\t\t\tconst memberCount = this.departments.get(this.focusedNode).userCount ?? 0;\n\n\t\t\treturn memberCount - (this.headCount ?? 0);\n\t\t},\n\t\tformattedEmployees(): Array\n\t\t{\n\t\t\treturn this.employees.map((employee) => ({\n\t\t\t\t...employee,\n\t\t\t\tsubtitle: employee.workPosition,\n\t\t\t})).reverse();\n\t\t},\n\t\tfilteredEmployees(): Array\n\t\t{\n\t\t\treturn this.formattedEmployees.filter(\n\t\t\t\t(employee) => employee.name.toLowerCase().includes(this.searchQuery.toLowerCase())\n\t\t\t\t\t|| employee.workPosition?.toLowerCase().includes(this.searchQuery.toLowerCase()),\n\t\t\t);\n\t\t},\n\t\tmemberCount(): number\n\t\t{\n\t\t\treturn this.departments.get(this.focusedNode).userCount ?? 0;\n\t\t},\n\t\t...mapState(useChartStore, ['focusedNode', 'departments', 'searchedUserId']),\n\t\t...mapWritableState(useChartStore, ['searchedUserId']),\n\t\temployees(): Array\n\t\t{\n\t\t\treturn this.departments.get(this.focusedNode)?.employees ?? [];\n\t\t},\n\t\tshowEmptyState(): boolean\n\t\t{\n\t\t\tif (!this.memberCount)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn this.filteredHeads.length === 0 && this.filteredEmployees.length === 0;\n\t\t},\n\t\temptyStateType(): ?string\n\t\t{\n\t\t\tif (!this.memberCount && this.canAddUsers)\n\t\t\t{\n\t\t\t\treturn emptyStateTypes.NO_MEMBERS_WITH_ADD_PERMISSION;\n\t\t\t}\n\n\t\t\tif (!this.memberCount)\n\t\t\t{\n\t\t\t\treturn emptyStateTypes.NO_MEMBERS_WITHOUT_ADD_PERMISSION;\n\t\t\t}\n\n\t\t\tif (this.filteredHeads.length === 0 && this.filteredEmployees.length === 0)\n\t\t\t{\n\t\t\t\treturn emptyStateTypes.NO_SEARCHED_USERS_RESULTS;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tshowSearchBar(): boolean\n\t\t{\n\t\t\treturn this.memberCount > 0;\n\t\t},\n\t\tcanAddUsers(): boolean\n\t\t{\n\t\t\tconst permissionChecker = PermissionChecker.getInstance();\n\t\t\tif (!permissionChecker)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst nodeId = this.focusedNode;\n\n\t\t\treturn permissionChecker.hasPermission(PermissionActions.employeeAddToDepartment, nodeId);\n\t\t},\n\t\theadListEmptyStateTitle(): string\n\t\t{\n\t\t\tif (this.canAddUsers)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_HEAD_EMPTY_LIST_ITEM_TITLE');\n\t\t\t}\n\n\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_HEAD_EMPTY_LIST_ITEM_TITLE_WITHOUT_ADD_PERMISSION');\n\t\t},\n\t\temployeesListEmptyStateTitle(): string\n\t\t{\n\t\t\tif (this.canAddUsers)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_EMPLOYEE_EMPTY_LIST_ITEM_TITLE');\n\t\t\t}\n\n\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_EMPLOYEE_EMPTY_LIST_ITEM_TITLE_WITHOUT_ADD_PERMISSION');\n\t\t},\n\t\tshouldUpdateList(): boolean\n\t\t{\n\t\t\treturn this.departments.get(this.focusedNode).employeeListOptions?.shouldUpdateList ?? true;\n\t\t},\n\t\tdepartmentUsersStatus(): DepartmentUsersStatus\n\t\t{\n\t\t\tconst department = this.departments.get(this.focusedNode);\n\t\t\tif (department?.heads && department.employees)\n\t\t\t{\n\t\t\t\treturn { departmentId: this.focusedNode, loaded: true };\n\t\t\t}\n\n\t\t\treturn { departmentId: this.focusedNode, loaded: false };\n\t\t},\n\t},\n\n\tmethods: {\n\t\tonDragStart(targetElement)\n\t\t{\n\t\t\tif (!targetElement.id)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.draggedEmployee = targetElement;\n\t\t},\n\t\tonDropToEmployee(targetIndex)\n\t\t{\n\t\t\t// @todo send order or new member to backend\n\t\t\tif (this.draggedEmployee)\n\t\t\t{\n\t\t\t\tif (this.draggedEmployee.role)\n\t\t\t\t{\n\t\t\t\t\tconst movedEmployee = { ...this.draggedEmployee };\n\t\t\t\t\tdelete movedEmployee.role;\n\t\t\t\t\tdelete movedEmployee.badgeText;\n\n\t\t\t\t\tconst index = this.heads.findIndex((head) => head.id === this.draggedEmployee.id);\n\t\t\t\t\tthis.heads.splice(index, 1);\n\t\t\t\t\tthis.employees.splice(targetIndex.id, 0, movedEmployee);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst index = this.employees.findIndex((employee) => employee && employee.id === this.draggedEmployee.id);\n\t\t\t\t\tconst movedEmployee = this.employees.splice(index, 1)[0];\n\t\t\t\t\tthis.employees.splice(targetIndex.id, 0, movedEmployee);\n\t\t\t\t}\n\n\t\t\t\tthis.draggedEmployee = null;\n\t\t\t\tthis.draggedIndex = null;\n\t\t\t}\n\t\t},\n\t\tonDropToHead(targetElement)\n\t\t{\n\t\t\tif (this.draggedEmployee)\n\t\t\t{\n\t\t\t\tif (this.draggedEmployee.role === 'MEMBER_HEAD')\n\t\t\t\t{\n\t\t\t\t\tconst index = this.heads.findIndex((head) => head.id === this.draggedEmployee.id);\n\t\t\t\t\tconst movedHead = this.heads.splice(index, 1)[0];\n\t\t\t\t\tthis.heads.splice(targetElement.id, 0, movedHead);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst movedHead = { ...this.draggedEmployee, role: 'MEMBER_HEAD' };\n\n\t\t\t\t\tconst index = this.employees.findIndex((employee) => employee && employee.id === this.draggedEmployee.id);\n\t\t\t\t\tthis.employees.splice(index, 1);\n\n\t\t\t\t\tthis.heads.splice(targetElement.id, 0, movedHead);\n\t\t\t\t}\n\n\t\t\t\tthis.draggedEmployee = null;\n\t\t\t\tthis.draggedIndex = null;\n\t\t\t}\n\t\t},\n\t\tloc(phraseCode, replacements = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tgetBadgeText(role): ?string\n\t\t{\n\t\t\tif (role === memberRoles.head)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPLOYEES_HEAD_BADGE');\n\t\t\t}\n\n\t\t\tif (role === memberRoles.deputyHead)\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_EMPLOYEES_DEPUTY_HEAD_BADGE');\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\tupdateList(event): void\n\t\t{\n\t\t\tconst employeesList = event.target;\n\t\t\tconst scrollPosition = employeesList.scrollTop + employeesList.clientHeight;\n\n\t\t\tif (employeesList.scrollHeight - scrollPosition < 40)\n\t\t\t{\n\t\t\t\tthis.loadEmployeesAction();\n\t\t\t}\n\t\t},\n\t\taddToDepartment(options: addToDepartmentOptions = {}): void\n\t\t{\n\t\t\tconst nodeId = this.focusedNode;\n\t\t\tconst role = options.type === 'head' ? memberRoles.head : memberRoles.employee;\n\t\t\tUserManagementDialog.openDialog({\n\t\t\t\tnodeId,\n\t\t\t\ttype: 'add',\n\t\t\t\trole,\n\t\t\t});\n\t\t},\n\t\tuserInvite(): void\n\t\t{\n\t\t\tconst departmentToInvite = this.departments.get(this.focusedNode).accessCode.slice(1);\n\n\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t'/bitrix/services/main/ajax.php?action=getSliderContent'\n\t\t\t\t+ '&c=bitrix%3Aintranet.invitation&mode=ajax'\n\t\t\t\t+ `&departments[]=${departmentToInvite}&firstInvitationBlock=invite-with-group-dp`,\n\t\t\t\t{ cacheable: false, allowChangeHistory: false, width: 1100 },\n\t\t\t);\n\t\t},\n\t\tmoveUser(): void\n\t\t{\n\t\t\tconst nodeId = this.focusedNode;\n\t\t\tUserManagementDialog.openDialog({\n\t\t\t\tnodeId,\n\t\t\t\ttype: 'move',\n\t\t\t});\n\t\t},\n\t\teditDepartmentUsers(): void\n\t\t{\n\t\t\tthis.$emit('editDepartmentUsers');\n\t\t},\n\t\tasync loadEmployeesAction(): void\n\t\t{\n\t\t\tconst nodeId = this.focusedNode;\n\n\t\t\tif (!this.departments.get(nodeId))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst employeeListOptions = this.departments.get(nodeId).employeeListOptions ?? {};\n\n\t\t\temployeeListOptions.page = employeeListOptions.page ?? 0;\n\t\t\temployeeListOptions.shouldUpdateList = employeeListOptions.shouldUpdateList ?? true;\n\t\t\temployeeListOptions.isListUpdated = employeeListOptions.isListUpdated ?? false;\n\t\t\tDepartmentContentActions.updateEmployeeListOptions(nodeId, employeeListOptions);\n\n\t\t\tif (\n\t\t\t\temployeeListOptions.isListUpdated\n\t\t\t\t|| !employeeListOptions.shouldUpdateList\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!employeeListOptions.isListUpdated\n\t\t\t\t&& employeeListOptions.page === 0\n\t\t\t\t&& employeeListOptions.shouldUpdateList === true\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.$emit('showDetailLoader');\n\t\t\t}\n\n\t\t\temployeeListOptions.isListUpdated = true;\n\t\t\temployeeListOptions.page += 1;\n\t\t\tDepartmentContentActions.updateEmployeeListOptions(nodeId, employeeListOptions);\n\n\t\t\tlet loadedEmployees = await DepartmentAPI.getPagedEmployees(nodeId, employeeListOptions.page, 25);\n\n\t\t\tif (!loadedEmployees)\n\t\t\t{\n\t\t\t\temployeeListOptions.shouldUpdateList = false;\n\t\t\t\temployeeListOptions.isListUpdated = false;\n\t\t\t\tDepartmentContentActions.updateEmployeeListOptions(nodeId, employeeListOptions);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tloadedEmployees = loadedEmployees.map((user) => {\n\t\t\t\treturn { ...user, role: memberRoles.employee };\n\t\t\t});\n\n\t\t\tconst employees = this.departments.get(nodeId)?.employees ?? [];\n\t\t\tconst employeeIds = new Set(employees.map((employee) => employee.id));\n\n\t\t\tconst newEmployees = loadedEmployees.reverse().filter((employee) => !employeeIds.has(employee.id));\n\t\t\temployees.unshift(...newEmployees);\n\t\t\temployeeListOptions.shouldUpdateList = newEmployees.length === 25;\n\t\t\temployeeListOptions.isListUpdated = false;\n\n\t\t\tDepartmentContentActions.updateEmployeeListOptions(nodeId, employeeListOptions);\n\t\t\tDepartmentContentActions.updateEmployees(nodeId, employees);\n\t\t\tif (this.departmentUsersStatus.loaded)\n\t\t\t{\n\t\t\t\tthis.$emit('hideDetailLoader');\n\t\t\t}\n\n\t\t\tif (this.needToScroll)\n\t\t\t{\n\t\t\t\tthis.scrollToUser();\n\t\t\t}\n\t\t},\n\t\tasync scrollToUser(): void\n\t\t{\n\t\t\tconst userId = this.needToFocusUserId;\n\t\t\tthis.needToFocusUserId = null;\n\t\t\tthis.needToScroll = false;\n\t\t\tconst selectors = `.hr-department-detail-content__user-container[data-id=\"hr-department-detail-content__user-${userId}-item\"]`;\n\t\t\tlet element = this.tabContainer.querySelector(selectors);\n\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\tlet user = null;\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tuser = await DepartmentAPI.getUserInfo(this.focusedNode, userId);\n\t\t\t\t}\n\t\t\t\tcatch\n\t\t\t\t{ /* empty */ }\n\n\t\t\t\tconst department = this.departments.get(this.focusedNode);\n\t\t\t\tif (!user || !department)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (user.role === memberRoles.head || user.role === memberRoles.deputyHead)\n\t\t\t\t{\n\t\t\t\t\tdepartment.heads = department.heads ?? [];\n\t\t\t\t\tif (!department.heads.some((head) => head.id === user.id))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdepartment.employees = department.employees ?? [];\n\t\t\t\t\tif (!department.employees.some((employee) => employee.id === user.id))\n\t\t\t\t\t{\n\t\t\t\t\t\tdepartment.employees.push(user);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait this.$nextTick(() => {\n\t\t\t\t\telement = this.tabContainer.querySelector(selectors);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\telement.scrollIntoView({ behavior: 'smooth', block: 'center' });\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.selectedUserId = userId;\n\t\t\t}, 750);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.searchedUserId === userId)\n\t\t\t\t{\n\t\t\t\t\tthis.selectedUserId = null;\n\t\t\t\t\tthis.searchedUserId = null;\n\t\t\t\t}\n\t\t\t}, 4000);\n\t\t},\n\t\tasync searchMembers(query)\n\t\t{\n\t\t\tif (query.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.findQueryResult = this.findQueryResult || {};\n\t\t\tthis.findQueryResult[this.focusedNode] = this.findQueryResult[this.focusedNode] || {\n\t\t\t\tsuccess: [],\n\t\t\t\tfailure: [],\n\t\t\t};\n\n\t\t\tconst nodeResults = this.findQueryResult[this.focusedNode];\n\n\t\t\tif (nodeResults.failure.some((failedQuery) => query.startsWith(failedQuery)))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (nodeResults.success.includes(query) || nodeResults.failure.includes(query))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst founded = await DepartmentAPI.findMemberByQuery(this.focusedNode, query);\n\n\t\t\tif (founded.length === 0)\n\t\t\t{\n\t\t\t\tnodeResults.failure.push(query);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst department = this.departments.get(this.focusedNode);\n\t\t\tconst newMembers = founded.filter((found) => !department.heads.some((head) => head.id === found.id)\n\t\t\t\t&& !department.employees.some((employee) => employee.id === found.id));\n\n\t\t\tdepartment.employees.push(...newMembers);\n\t\t\tnodeResults.success.push(query);\n\t\t},\n\t\tonBlur(): void\n\t\t{\n\t\t\tif (this.searchQuery.length === 0)\n\t\t\t{\n\t\t\t\tthis.hasFocus = false;\n\t\t\t}\n\t\t},\n\t\tclearInput(): void\n\t\t{\n\t\t\tthis.searchQuery = '';\n\t\t\tthis.hasFocus = false;\n\t\t},\n\t},\n\n\twatch: {\n\t\tfocusedNode(newId): void\n\t\t{\n\t\t\tconst department = this.departments.get(newId) || {};\n\t\t\tif (!department.employeeListOptions || Object.keys(department.employeeListOptions).length === 0)\n\t\t\t{\n\t\t\t\tconst employeeListOptions = {\n\t\t\t\t\tpage: 0,\n\t\t\t\t\tshouldUpdateList: true,\n\t\t\t\t\tisListUpdated: false,\n\t\t\t\t};\n\t\t\t\tDepartmentContentActions.updateEmployeeListOptions(newId, employeeListOptions);\n\t\t\t\tthis.departments.set(newId, department);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tdepartment.employeeListOptions.page === 0\n\t\t\t\t&& department.employeeListOptions.isListUpdated === false\n\t\t\t\t&& department.employeeListOptions.shouldUpdateList === true\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.loadEmployeesAction();\n\t\t\t}\n\n\t\t\tthis.isDescriptionExpanded = false;\n\t\t\tthis.searchQuery = '';\n\t\t},\n\t\tsearchedUserId: {\n\t\t\thandler(userId): void\n\t\t\t{\n\t\t\t\tif (!userId)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.needToFocusUserId = userId;\n\t\t\t\tif (this.isListUpdated)\n\t\t\t\t{\n\t\t\t\t\tthis.needToScroll = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.scrollToUser();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\timmediate: true,\n\t\t},\n\t\tasync searchQuery(newQuery) {\n\t\t\tawait this.searchMembers(newQuery);\n\t\t},\n\t\tdepartmentUsersStatus(usersStatus: DepartmentUsersStatus, prevUsersStatus: DepartmentUsersStatus): void\n\t\t{\n\t\t\tconst { departmentId, loaded } = usersStatus;\n\t\t\tconst { departmentId: prevDepartmentId, loaded: prevLoaded } = prevUsersStatus;\n\t\t\tif (departmentId === prevDepartmentId && loaded === prevLoaded)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (loaded)\n\t\t\t{\n\t\t\t\tthis.$emit('hideDetailLoader');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.$emit('showDetailLoader');\n\t\t\t\tthis.loadEmployeesAction();\n\t\t\t}\n\t\t},\n\n\t},\n\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"hr-department-detail-content__tab-container\"\n\t\t\tref=\"tab-container\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"showSearchBar\"\n\t\t\t\tclass=\"hr-department-detail-content__content-search\"\n\t\t\t\t:class=\"{'--focused': hasFocus}\"\n\t\t\t>\n\t\t\t\t<div class=\"hr-department-detail-content__content-search-icon\"/>\n\t\t\t\t<input\n\t\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\t\tclass=\"hr-department-detail-content__content-search-input\"\n\t\t\t\t\t:placeholder=\"!hasFocus ? loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_SEARCH_PLACEHOLDER') : ''\"\n\t\t\t\t\t@focus=\"hasFocus = true\"\n\t\t\t\t\t@blur=\"onBlur\"\n\t\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"hr-department-detail-content__content-search-close-button ui-icon-set --cross-circle-50\"\n\t\t\t\t\t:class=\"{'--hide': !hasFocus}\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 24px; --ui-icon-set__icon-color: #2FC6F6;\"\n\t\t\t\t\t@click=\"clearInput\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<EmptyStateContainer\n\t\t\t\tv-if=\"emptyStateType\"\n\t\t\t\t:type=\"emptyStateType\"\n\t\t\t\t:departmentId=\"focusedNode\"\n\t\t\t\t@addToDepartment=\"addToDepartment\"\n\t\t\t\t@userInvite=\"userInvite\"\n\t\t\t\t@moveUser=\"moveUser\"\n\t\t\t/>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t\tv-on=\"shouldUpdateList ? { scroll: updateList } : {}\"\n\t\t\t\tclass=\"hr-department-detail-content__lists-container\"\n\t\t\t>\n\t\t\t\t<div class=\"hr-department-detail-content__list --head\">\n\t\t\t\t\t<div class=\"hr-department-detail-content__list-header-container\">\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__list-title\">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_HEAD_LIST_TITLE') }}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"hr-department-detail-content__list-count\"\n\t\t\t\t\t\t\t\tdata-id=\"hr-department-detail-content__head_list-count\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ headCount }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UserListActionButton\n\t\t\t\t\t\t\trole=\"head\"\n\t\t\t\t\t\t\t@addToDepartment=\"addToDepartment({ type: 'head' })\"\n\t\t\t\t\t\t\t@editDepartmentUsers=\"editDepartmentUsers\"\n\t\t\t\t\t\t\t:departmentId=\"focusedNode\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!headCount\" :class=\"['hr-department-detail-content__empty-list-item', { '--with-add': canAddUsers }]\">\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-user-list-item-image\"/>\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-list-item-content\">\n\t\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-list-item-title\">\n\t\t\t\t\t\t\t\t{{ headListEmptyStateTitle }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<UserList\n\t\t\t\t\t\t:items=\"filteredHeads\"\n\t\t\t\t\t\t@dragstart=\"onDragStart\"\n\t\t\t\t\t\t@drop=\"onDropToHead\"\n\t\t\t\t\t\t:selectedUserId=\"selectedUserId\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-department-detail-content__list --employee\">\n\t\t\t\t\t<div class=\"hr-department-detail-content__list-header-container\">\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__list-title\">\n\t\t\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_EMPLOYEE_LIST_TITLE') }}\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass=\"hr-department-detail-content__list-count\"\n\t\t\t\t\t\t\t\tdata-id=\"hr-department-detail-content__employee_list-count\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{ employeeCount }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<UserListActionButton\n\t\t\t\t\t\t\trole=\"employee\"\n\t\t\t\t\t\t\t@addToDepartment=\"addToDepartment({ type: 'employee' })\"\n\t\t\t\t\t\t\t@editDepartmentUsers=\"editDepartmentUsers\"\n\t\t\t\t\t\t\t:departmentId=\"focusedNode\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"!employeeCount\" :class=\"['hr-department-detail-content__empty-list-item', { '--with-add': canAddUsers }]\">\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-user-list-item-image\"/>\n\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-list-item-content\">\n\t\t\t\t\t\t\t<div class=\"hr-department-detail-content__empty-list-item-title\">\n\t\t\t\t\t\t\t\t{{ employeesListEmptyStateTitle }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<UserList\n\t\t\t\t\t\t:items=\"filteredEmployees\"\n\t\t\t\t\t\t@dragstart=\"onDragStart\"\n\t\t\t\t\t\t@drop=\"onDropToEmployee\"\n\t\t\t\t\t\t:selectedUserId=\"selectedUserId\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './styles/tab.css';\n\nexport const ChatTab = {\n\tname: 'chatTab',\n\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\n\tcomputed:\n\t{\n\t\tunavailableChatList(): Array<{ text: string; }>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{ text: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_TAB_CONTENT_UNAVAILABLE_CHATS_LIST_ITEM_1') },\n\t\t\t\t{ text: this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_TAB_CONTENT_UNAVAILABLE_CHATS_LIST_ITEM_2') },\n\t\t\t];\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-department-detail-content__tab-container --empty\">\n\t\t\t<div class=\"hr-department-detail-content__tab-entity-icon --chat --default\"></div>\n\t\t\t<div class=\"hr-department-detail-content__tab-entity-content\">\n\t\t\t\t<div class=\"hr-department-detail-content__empty-tab-entity-title\">\n\t\t\t\t\t{{ loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_TAB_CONTENT_UNAVAILABLE_CHATS_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"hr-department-detail-content__empty-tab-entity-list\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"item in unavailableChatList\"\n\t\t\t\t\t\tclass=\"hr-department-detail-content__empty-tab-entity-item --check\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ item.text }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { UsersTab } from './users/tab';\nimport { ChatTab } from './chat/tab';\nimport { useChartStore } from 'humanresources.company-structure.chart-store';\nimport { mapState } from 'ui.vue3.pinia';\n\nimport '../style.css';\n\nexport const DepartmentContent = {\n\tname: 'departmentContent',\n\n\tcomponents: { UsersTab, ChatTab },\n\n\temits: ['showDetailLoader', 'hideDetailLoader', 'editEmployee'],\n\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tactiveTab: 'usersTab',\n\t\t\ttabs: [\n\t\t\t\t{ name: 'usersTab', component: 'usersTab', id: 'users-tab' },\n\t\t\t\t{ name: 'chatTab', component: 'ChatTab', id: 'chats-tab', soon: true },\n\t\t\t],\n\t\t\tisDescriptionOverflowed: false,\n\t\t\tisDescriptionExpanded: false,\n\t\t};\n\t},\n\n\tmounted(): void\n\t{\n\t\tthis.isDescriptionOverflowed = this.checkDescriptionOverflowed();\n\t},\n\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tselectTab(tabName): void\n\t\t{\n\t\t\tthis.activeTab = tabName;\n\t\t},\n\t\tgetTabLabel(name: string): string\n\t\t{\n\t\t\tif (name === 'usersTab')\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_USERS_TITLE');\n\t\t\t}\n\n\t\t\tif (name === 'chatTab')\n\t\t\t{\n\t\t\t\treturn this.loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_CHATS_TITLE');\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\ttoggleDescriptionExpand(): void\n\t\t{\n\t\t\tthis.isDescriptionExpanded = !this.isDescriptionExpanded;\n\t\t},\n\t\tcheckDescriptionOverflowed(): boolean\n\t\t{\n\t\t\tconst descriptionContainer = this.$refs.descriptionContainer ?? null;\n\t\t\tif (descriptionContainer)\n\t\t\t{\n\t\t\t\treturn descriptionContainer.scrollWidth > descriptionContainer.clientWidth;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\thideDetailLoader(): boolean\n\t\t{\n\t\t\tthis.$emit('hideDetailLoader');\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isDescriptionOverflowed = this.checkDescriptionOverflowed();\n\t\t\t});\n\t\t},\n\t},\n\n\tcomputed: {\n\t\t...mapState(useChartStore, ['focusedNode', 'departments']),\n\t\tactiveTabComponent(): EmployeeTab | ChatTab | null\n\t\t{\n\t\t\tconst activeTab = this.tabs.find((tab) => tab.name === this.activeTab);\n\n\t\t\treturn activeTab ? activeTab.component : null;\n\t\t},\n\t\tcount(): Number\n\t\t{\n\t\t\treturn this.departments.get(this.focusedNode)?.userCount ?? 0;\n\t\t},\n\t\ttabArray(): Array\n\t\t{\n\t\t\treturn this.tabs.map((tab) => {\n\t\t\t\tif (tab.name === 'usersTab')\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...tab,\n\t\t\t\t\t\tcount: this.count,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn tab;\n\t\t\t});\n\t\t},\n\t\tdescription(): ?string\n\t\t{\n\t\t\tconst department = this.departments.get(this.focusedNode);\n\t\t\tif (!department.description)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn department.description;\n\t\t},\n\t},\n\n\twatch: {\n\t\tdescription(): void\n\t\t{\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.isDescriptionOverflowed = this.checkDescriptionOverflowed();\n\t\t\t});\n\t\t},\n\t\tfocusedNode(): void\n\t\t{\n\t\t\tthis.isDescriptionExpanded = false;\n\t\t\tthis.selectTab('usersTab');\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"hr-department-detail-content hr-department-detail-content__scope\">\n\t\t\t<div\n\t\t\t\tref=\"descriptionContainer\"\n\t\t\t\tv-show=\"description\"\n\t\t\t\t:class=\"[\n\t\t\t\t\t'hr-department-detail-content-description',\n\t\t\t\t\t{ '--expanded': isDescriptionExpanded },\n\t\t\t\t\t{ '--overflowed': isDescriptionOverflowed},\n\t\t\t\t]\"\n\t\t\t\tv-on=\"isDescriptionOverflowed ? { click: toggleDescriptionExpand } : {}\"\n\t\t\t>\n\t\t\t\t{{ description }}\n\t\t\t</div>\n\t\t\t<div class=\"hr-department-detail-content__tab-list\">\n\t\t\t\t<button\n\t\t\t\t\tv-for=\"tab in tabArray\"\n\t\t\t\t\t:key=\"tab.name\"\n\t\t\t\t\tclass=\"hr-department-detail-content__tab-item\"\n\t\t\t\t\t:class=\"[{'--active-tab' : activeTab === tab.name}, {'--soon' : tab.soon}]\"\n\t\t\t\t\t:data-title=\"tab.soon ? loc('HUMANRESOURCES_COMPANY_STRUCTURE_DEPARTMENT_CONTENT_TAB_BADGE_SOON') : null\"\n\t\t\t\t\t@click=\"selectTab(tab.name)\"\n\t\t\t\t\t:data-id=\"tab.id ? 'hr-department-detail-content__' + tab.id + '_button' : null\"\n\t\t\t\t>\n\t\t\t\t\t{{ this.getTabLabel(tab.name) }}\n\t\t\t\t\t<span\n\t\t\t\t\t\tv-if=\"!tab.soon\"\n\t\t\t\t\t\tclass=\"hr-department-detail-content__tab-count\"\n\t\t\t\t\t\t:data-id=\"tab.id ? 'hr-department-detail-content__' + tab.id + '_counter' : null\"\n\t\t\t\t\t>{{ tab.count }}\n\t\t\t\t\t</span>\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<component\n\t\t\t\t:is=\"activeTabComponent\"\n\t\t\t\t@editDepartmentUsers=\"$emit('editEmployee')\"\n\t\t\t\t@showDetailLoader=\"$emit('showDetailLoader')\"\n\t\t\t\t@hideDetailLoader=\"hideDetailLoader\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n"],"names":["DepartmentAPI","getPagedEmployees","id","page","countPerPage","getData","nodeId","removeUserFromDepartment","userId","postData","moveUserToDepartment","targetNodeId","isUserInMultipleDepartments","getUserInfo","findMemberByQuery","query","DepartmentContentActions","departmentId","targetDepartmentId","role","store","useChartStore","department","departments","get","targetDepartment","user","memberRoles","employee","employees","find","heads","head","userCount","filter","changeCurrentDepartment","push","updateEmployees","set","updateEmployeeListOptions","options","employeeListOptions","MoveUserActionPopup","name","components","ConfirmationPopup","emits","props","parentId","type","Number","required","Object","created","permissionChecker","PermissionChecker","getInstance","action","PermissionActions","employeeAddToDepartment","selectedDepartmentId","data","showMoveUserActionLoader","lockMoveUserActionButton","showUserAlreadyBelongsToDepartmentPopup","accessDenied","mounted","departmentContainer","$refs","departmentSelector","getTagSelector","renderTo","computed","mapState","getMoveUserActionPhrase","departmentName","Text","encode","focusedNode","userName","loc","replace","url","getUserAlreadyBelongsToDepartmentPopupPhrase","selectedParentDepartment","phrase","methods","TagSelector","events","onTagAdd","event","tag","hasPermission","onTagRemove","multiple","dialogOptions","width","height","dropdownMode","hideOnDeselect","entities","selectMode","preselectedItems","tagBgColor","tagTextColor","tagFontWeight","tagAvatar","phraseCode","replacements","$Bitrix","Loc","getMessage","confirmMoveUser","error","code","UI","Notification","Center","notify","content","autoHideDelay","$emit","closeAction","closeUserAlreadyBelongsToDepartmentPopup","template","MenuOption","freeze","moveUserToAnotherDepartment","fireUserFromCompany","UserListItemActionButton","RouteActionMenu","menuVisible","showRemoveUserConfirmationPopup","showRemoveUserConfirmationActionLoader","showMoveUserPopup","toggleMenu","onActionMenuItemClick","actionId","removeUser","rootDepartment","values","cancelRemoveUser","handleMoveUserAction","handleMoveUserClose","getMemberKeyByValue","value","keys","key","menuItems","title","description","bIcon","Main","PERSON_ARROW_LEFT_1","size","color","getColorCode","permission","TRASH_BIN","employeeRemoveFromDepartment","PERSONS_DENY","employeeFire","item","UserListItem","selectedUserId","default","defaultAvatar","handleUserClick","SidePanel","Instance","open","cacheable","UserList","items","Array","draggedEmployee","draggedIndex","onDragStart","targetElement","onDrop","targetIndex","updateEmployeeRole","newRole","addToDepartment","editDepartmentUsers","UserListActionButton","String","getMenuItems","watch","CRM","PERSON_PLUS_2","EDIT_MENU","menuItemText","map","emptyStateTypes","NO_MEMBERS_WITH_ADD_PERMISSION","NO_MEMBERS_WITHOUT_ADD_PERMISSION","NO_SEARCHED_USERS_RESULTS","moveUser","userInvite","EmptyStateContainer","showAddButtons","emptyStateIconClass","emptyStateTitle","emptyStateDescription","bindElement","actionMenuButton","PERSON_LETTER","inviteToDepartment","UsersTab","searchQuery","needToScroll","hasFocus","loadEmployeesAction","tabContainer","headCount","length","formattedHeads","subtitle","workPosition","badgeText","getBadgeText","sort","a","b","roleOrder","deputyHead","roleA","roleB","filteredHeads","toLowerCase","includes","employeeCount","memberCount","formattedEmployees","reverse","filteredEmployees","mapWritableState","showEmptyState","emptyStateType","canAddUsers","showSearchBar","headListEmptyStateTitle","employeesListEmptyStateTitle","shouldUpdateList","departmentUsersStatus","loaded","onDropToEmployee","movedEmployee","index","findIndex","splice","onDropToHead","movedHead","updateList","employeesList","target","scrollPosition","scrollTop","clientHeight","scrollHeight","UserManagementDialog","openDialog","departmentToInvite","accessCode","slice","BX","allowChangeHistory","isListUpdated","loadedEmployees","employeeIds","Set","newEmployees","has","unshift","scrollToUser","needToFocusUserId","selectors","element","querySelector","some","$nextTick","scrollIntoView","behavior","block","setTimeout","searchedUserId","searchMembers","findQueryResult","success","failure","nodeResults","failedQuery","startsWith","founded","newMembers","found","onBlur","clearInput","newId","isDescriptionExpanded","handler","immediate","newQuery","usersStatus","prevUsersStatus","prevDepartmentId","prevLoaded","ChatTab","unavailableChatList","text","DepartmentContent","activeTab","tabs","component","soon","isDescriptionOverflowed","checkDescriptionOverflowed","selectTab","tabName","getTabLabel","toggleDescriptionExpand","descriptionContainer","scrollWidth","clientWidth","hideDetailLoader","activeTabComponent","tab","count","tabArray"],"mappings":"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"}