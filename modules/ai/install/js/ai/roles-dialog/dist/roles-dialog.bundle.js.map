{"version":3,"file":"roles-dialog.bundle.js","sources":["../src/roles-dialog-loader-popup.js","../src/roles-dialog-error-popup.js","../src/roles-dialog-analytics.js","../src/components/roles-dialog-group-list-footer.js","../src/components/roles-dialog-header-with-hint.js","../src/components/roles-dialog-group-list-header.js","../src/components/roles-dialog-content-header.js","../src/components/roles-dialog-role-item-avatar.js","../src/components/roles-dialog-label-new.js","../src/components/roles-dialog-role-item.js","../src/components/roles-dialog-group-item.js","../src/components/roles-dialog-search-stub.js","../src/components/roles-dialog-empty-group-stub.js","../src/components/roles-dialog-roles-library.js","../src/roles-dialog.js"],"sourcesContent":["import { Tag } from 'main.core';\nimport { Popup } from 'main.popup';\nimport './css/roles-dialog-loader-popup.css';\nimport './css/roles-dialog-skeleton.css';\n\nexport class RolesDialogLoaderPopup\n{\n\t#popup: Popup;\n\n\tshow(): void\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\tthis.#initPopup();\n\t\t}\n\n\t\tthis.#popup.show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#popup?.close();\n\t}\n\n\t#initPopup(): void\n\t{\n\t\tthis.#popup = new Popup({\n\t\t\tcontent: this.#renderContent(),\n\t\t\tresizable: true,\n\t\t\twidth: 881,\n\t\t\theight: 621,\n\t\t\tpadding: 0,\n\t\t\tcontentPadding: 0,\n\t\t\tborderRadius: '10px 10px 4px 4px',\n\t\t\tclassName: 'ai_roles-dialog_popup',\n\t\t\tanimation: true,\n\t\t\tcacheable: false,\n\t\t});\n\t}\n\n\t#renderContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__roles-dialog_loader-popup-inner\">\n\t\t\t\t${this.#renderPopupTitleBar()}\n\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content\">\n\t\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content-left\">\n\t\t\t\t\t\t<div style=\"width: 145px; height: 10px; margin-bottom: 22px; margin-left: 12px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 119px; margin-bottom: 14px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 54px;\">\n\t\t\t\t\t\t\t<div class=\"rec --color-ai\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ai__roles-dialog_loader-popup-content-right\">\n\t\t\t\t\t<div style=\"width: 101px; height: 10px; margin-bottom: 22px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 75px; margin-bottom: 8px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%; height: 75px;\">\n\t\t\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderPopupTitleBar(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__roles-dialog_loader-popup-title-bar\">\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"width: 152px; height: 16px;\"\n\t\t\t\t\tclass=\"ai__roles-dialog_loader-popup-title-bar-left\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tstyle=\"width: 98px; height: 16px;\"\n\t\t\t\t\tclass=\"ai__roles-dialog_loader-popup-title-bar-left\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"rec\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Tag, Loc } from 'main.core';\nimport { Popup, CloseIconSize } from 'main.popup';\nimport { Icon, Main } from 'ui.icon-set.api.core';\n\nimport './css/roles-dialog-error-popup.css';\n\nexport function showRolesDialogErrorPopup()\n{\n\tconst popup = new Popup({\n\t\tcontent: renderPopupContent(),\n\t\tresizable: false,\n\t\twidth: 881,\n\t\theight: 621,\n\t\tpadding: 0,\n\t\tcontentPadding: 0,\n\t\tborderRadius: '10px 10px 4px 4px',\n\t\tclassName: 'ai_roles-dialog_popup',\n\t\tanimation: true,\n\t\tcacheable: false,\n\t\tautoHide: true,\n\t\tcloseByEsc: true,\n\t\tcloseIcon: true,\n\t\tcloseIconSize: CloseIconSize.LARGE,\n\t});\n\n\tpopup.show();\n}\n\nfunction renderPopupContent(): HTMLElement\n{\n\treturn Tag.render`\n\t\t<div class=\"ai__roles-dialog_error-popup-inner\">\n\t\t\t<div class=\"ai__roles-dialog_error-popup-content\">\n\t\t\t\t<div class=\"ai__roles-dialog_error-popup-content-warning-icon\">\n\t\t\t\t\t${renderWarningIcon()}\n\t\t\t\t</div>\n\t\t\t\t<p class=\"ai__roles-dialog_error-popup-content-error-text\">\n\t\t\t\t\t${Loc.getMessage('AI_COPILOT_ROLES_ERROR_TEXT')}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t</div>\n\t`;\n}\n\nfunction renderWarningIcon(): HTMLElement\n{\n\tconst warningIconColor = 'rgba(176, 149, 220, 0.4)';\n\n\tconst warningIcon = new Icon({\n\t\ticon: Main.WARNING,\n\t\tsize: 56,\n\t\tcolor: warningIconColor,\n\t});\n\n\treturn warningIcon.render();\n}\n","import { Runtime, Text } from 'main.core';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\ntype RolesDialogAnalyticsOptions = {\n\tcSection: string;\n}\n\nconst RolesDialogAnalyticsEvent = Object.freeze({\n\tOPEN: 'open',\n\tCLOSE: 'close',\n\tSAVE: 'save',\n\tSEARCH: 'search',\n\tFEEDBACK: 'feedback',\n\tSELECT: 'save',\n});\n\nconst RolesDialogAnalyticsEventStatus = Object.freeze({\n\tSUCCESS: 'success',\n\tERROR: 'error',\n});\n\nexport class RolesDialogAnalytics\n{\n\t#cSection: string;\n\n\tconstructor(options: RolesDialogAnalyticsOptions)\n\t{\n\t\tthis.#cSection = this.#formatCSectionParam(options.cSection);\n\t}\n\n\tsendOpenLabel(isSuccess: boolean, role?: string): void\n\t{\n\t\tconst status = isSuccess ? RolesDialogAnalyticsEventStatus.SUCCESS : RolesDialogAnalyticsEventStatus.ERROR;\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\tstatus,\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.OPEN,\n\t\t});\n\t}\n\n\tsendCloseLabel(role?: string): void\n\t{\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.CLOSE,\n\t\t});\n\t}\n\n\tsendSelectLabel(role: string): void\n\t{\n\t\tconst extraParams = role ? { p1: { name: 'role', value: role } } : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.SELECT,\n\t\t});\n\t}\n\n\tsendSearchLabel(search: string): void\n\t{\n\t\tconst extraParams: SendLabelExtraParams = search\n\t\t\t? {\n\t\t\t\tp1: {\n\t\t\t\t\tname: 'search',\n\t\t\t\t\tvalue: search,\n\t\t\t\t},\n\t\t\t} : {};\n\n\t\tthis.#sendLabel({\n\t\t\textraParams,\n\t\t\tevent: RolesDialogAnalyticsEvent.SEARCH,\n\t\t});\n\t}\n\n\tsendFeedBackLabel(): void\n\t{\n\t\tthis.#sendLabel({\n\t\t\tevent: RolesDialogAnalyticsEvent.FEEDBACK,\n\t\t});\n\t}\n\n\tasync #sendLabel(params: SendLabelParams): void\n\t{\n\t\tconst status = params.status || RolesDialogAnalyticsEventStatus.SUCCESS;\n\t\tconst event = params.event;\n\t\tconst extraParams: SendLabelExtraParams = params.extraParams || {};\n\n\t\ttry\n\t\t{\n\t\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\t\tconst sendDataOptions: AnalyticsOptions = {\n\t\t\t\tevent,\n\t\t\t\tstatus,\n\t\t\t\t...this.#getCommonParameters(),\n\t\t\t\t...this.#getFormattedExtraParams(extraParams),\n\t\t\t};\n\n\t\t\tsendData(sendDataOptions);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error('AI: RolesDialog: Can\\'t send analytics', e);\n\t\t}\n\t}\n\n\t#getCommonParameters(): CommonParameters\n\t{\n\t\treturn {\n\t\t\ttool: 'ai',\n\t\t\tcategory: 'roles_picker',\n\t\t\tc_section: this.#cSection,\n\t\t};\n\t}\n\n\t#getFormattedExtraParams(extraParams: SendLabelExtraParams): SendLabelExtraParams\n\t{\n\t\tconst formattedExtraParams = {};\n\n\t\tObject.entries(extraParams).forEach(([paramKey, param]) => {\n\t\t\tformattedExtraParams[paramKey] = `${Text.toCamelCase(param.name)}_${Text.toCamelCase(param.value)}`;\n\t\t});\n\n\t\treturn formattedExtraParams;\n\t}\n\n\t#formatCSectionParam(cSection: string): string\n\t{\n\t\treturn cSection\n\t\t\t.replaceAll('-', '_')\n\t\t\t.split('_')\n\t\t\t.map((stringPart: string) => {\n\t\t\t\tif (Number.isNaN(parseInt(stringPart, 10)))\n\t\t\t\t{\n\t\t\t\t\treturn stringPart;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})\n\t\t\t.filter((stringPart: string) => stringPart)\n\t\t\t.join('_');\n\t}\n}\n\ntype CommonParameters = {\n\ttool: string;\n\tcategory: string;\n\tc_section: string;\n}\n\ntype SendLabelParams = {\n\tstatus?: string;\n\tevent: string;\n\textraParams?: SendLabelExtraParams;\n}\n\ntype SendLabelExtraParams = {\n\tp1?: ExtraParam;\n\tp2?: ExtraParam;\n\tp3?: ExtraParam;\n\tp4?: ExtraParam;\n\tp5?: ExtraParam;\n}\n\ntype ExtraParam = {\n\tname: string;\n\tvalue: string;\n}\n","import { EventEmitter } from 'main.core.events';\nimport '../css/roles-dialog-group-list-footer.css';\n\nexport const RolesDialogGroupListFooterEvents = {\n\tCHOOSE_STANDARD_ROLE: 'AI.RolesDialog.GroupListFooter:ChooseStandardRole',\n};\n\nexport const RolesDialogGroupListFooter = {\n\tmethods: {\n\t\thandleClick(): void {\n\t\t\tEventEmitter.emit(document, RolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<button @click=\"handleClick\" class=\"ai__roles-dialog_standard-group-btn\">\n\t\t\t<span class=\"ai__roles-dialog_standard-group-btn-text\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_USE_STANDARD_ROLE') }}\n\t\t\t</span>\n\t\t</button>\n\t`,\n};\n","import { Hint } from 'ui.vue3.components.hint';\n\nimport '../css/roles-dialog-header-with-hint.css';\n\nexport const RolesDialogHeaderWithHint = {\n\tcomponents: {\n\t\tHint,\n\t},\n\tprops: {\n\t\theader: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\thint: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_header-with-hint\">\n\t\t\t<span class=\"ai__roles-dialog_header-with-hint-text\">\n\t\t\t\t{{ header }}\n\t\t\t</span>\n\t\t\t<span\n\t\t\t\tv-if=\"hint\"\n\t\t\t\tclass=\"ai__roles-dialog_header-with-hint-text-hint\"\n\t\t\t>\n\t\t\t\t<Hint :text=\"hint\" />\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","import { RolesDialogHeaderWithHint } from './roles-dialog-header-with-hint';\n\nimport '../css/roles-dialog-group-list-header.css';\n\nexport const RolesDialogGroupListHeader = {\n\tcomponents: {\n\t\tRolesDialogHeaderWithHint,\n\t},\n\tcomputed: {\n\t\ttext(): string {\n\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_GROUP_LIST_HEADER_2');\n\t\t},\n\t\thint(): string {\n\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_GROUP_LIST_HEADER_HINT_2');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_group-list-header\">\n\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t:header=\"text\"\n\t\t\t\t:hint=\"hint\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Runtime } from 'main.core';\nimport type { States as StatesType } from 'ui.entity-catalog';\nimport { mapWritableState } from 'ui.vue3.pinia';\nimport type { RolesDialogAnalytics } from '../roles-dialog-analytics';\nimport { RolesDialogHeaderWithHint } from './roles-dialog-header-with-hint';\n\nimport '../css/roles-dialog-content-header.css';\n\nexport function getRolesDialogContentHeader(States: StatesType, analytic: RolesDialogAnalytics): Object\n{\n\tconst sendSearchAnalyticLabel = (searchQuery: ?string) => {\n\t\tanalytic.sendSearchLabel(searchQuery);\n\t};\n\n\tconst debouncedSendSearchAnalyticLabel: Function = Runtime.debounce(sendSearchAnalyticLabel, 800);\n\n\treturn {\n\t\tcomponents: {\n\t\t\tRolesDialogHeaderWithHint,\n\t\t},\n\t\tcomputed: {\n\t\t\t...mapWritableState(States.useGlobalState, {\n\t\t\t\tsearchQuery: 'searchQuery',\n\t\t\t\tsearching: 'searchApplied',\n\t\t\t}),\n\t\t\theader(): string {\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_MAIN_CONTENT_HEADER');\n\t\t\t},\n\t\t\thint(): string {\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_MAIN_CONTENT_HEADER_HINT');\n\t\t\t},\n\t\t},\n\t\twatch: {\n\t\t\tsearchQuery() {\n\t\t\t\tif (this.searching)\n\t\t\t\t{\n\t\t\t\t\tdebouncedSendSearchAnalyticLabel(this.searchQuery);\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<div class=\"ai__roles-dialog_main-content-header\">\n\t\t\t\t<RolesDialogHeaderWithHint\n\t\t\t\t\t:header=\"header\"\n\t\t\t\t\t:hint=\"hint\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t`,\n\t};\n}\n","import { Main } from 'ui.icon-set.api.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\n\nexport const RolesDialogRoleItemAvatar = {\n\tname: 'RolesDialogRoleItemAvatar',\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tdata(): { isAvatarLoaded: boolean | null } {\n\t\treturn {\n\t\t\tisAvatarLoaded: null,\n\t\t};\n\t},\n\tprops: {\n\t\tavatar: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t\tavatarAlt: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tcomputed: {\n\t\ticonSize(): number {\n\t\t\treturn 24;\n\t\t},\n\t\ticonColor(): string {\n\t\t\treturn getComputedStyle(document.body).getPropertyValue('--ui-color-background-primary') || '#fff';\n\t\t},\n\t\tfallbackIcon(): string {\n\t\t\treturn Main.COPILOT_AI;\n\t\t},\n\t},\n\tmethods: {\n\t\tonImageLoad(): void {\n\t\t\tthis.isAvatarLoaded = true;\n\t\t},\n\t\tonImageLoadError(): void {\n\t\t\tthis.isAvatarLoaded = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ai__roles-dialog_role-image-wrapper\"\n\t\t>\n\t\t\t<div\n\t\t\t\tv-if=\"icon\"\n\t\t\t\tclass=\"ai__roles-dialog_role-image-icon\"\n\t\t\t>\n\t\t\t\t<BIcon\n\t\t\t\t\t:name=\"icon\"\n\t\t\t\t\t:size=\"iconSize\"\n\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-else\n\t\t\t>\n\t\t\t\t<transition name=\"ai-roles-dialog-icon-fade\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-show=\"isAvatarLoaded\"\n\t\t\t\t\t\tclass=\"ai__roles-dialog_role-image\"\n\t\t\t\t\t\t:src=\"avatar\"\n\t\t\t\t\t\t:alt=\"avatarAlt\"\n\t\t\t\t\t\t@error=\"onImageLoadError\"\n\t\t\t\t\t\t@load=\"onImageLoad\"\n\t\t\t\t\t/>\n\t\t\t\t</transition>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isAvatarLoaded === null || isAvatarLoaded === false\"\n\t\t\t\t\t:class=\"{'ai__roles-dialog_role-image-icon': true, '--loading': isAvatarLoaded === null}\"\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"fallbackIcon\"\n\t\t\t\t\t\t:size=\"iconSize\"\n\t\t\t\t\t\t:color=\"iconColor\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Label, LabelColor, LabelSize } from 'ui.label';\n\nexport const RolesDialogLabelNew = {\n\tprops: {\n\t\tinverted: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tlabelHTML(): string {\n\t\t\tconst labelColor = this.inverted ? LabelColor.COPILOT_LIGHT_REVERSE : LabelColor.COPILOT_LIGHT;\n\n\t\t\tconst label = new Label({\n\t\t\t\tcolor: labelColor,\n\t\t\t\tsize: LabelSize.SM,\n\t\t\t\ttext: 'NEW',\n\t\t\t\tfill: true,\n\t\t\t});\n\n\t\t\treturn label.render().outerHTML;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div ref=\"label\" class=\"ai__roles-dialog_label\" v-html=\"labelHTML\"></div>\n\t`,\n};\n","import { Type, Text } from 'main.core';\nimport { Main, Animated } from 'ui.icon-set.api.core';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { mapWritableState } from 'ui.vue3.pinia';\nimport { type States as StatesType } from 'ui.entity-catalog';\nimport { RolesDialogRoleItemAvatar } from './roles-dialog-role-item-avatar';\nimport { RolesDialogLabelNew } from './roles-dialog-label-new';\n\nimport 'ui.icon-set.animated';\nimport '../css/roles-dialog-role-item.css';\n\nimport type { RolesDialogItemData } from '../roles-dialog';\n\n// eslint-disable-next-line max-lines-per-function\nexport function getRolesDialogRoleItemWithStates(States: StatesType): Object\n{\n\treturn {\n\t\tname: 'RolesDialogRoleItem',\n\t\tcomponents: {\n\t\t\tBIcon,\n\t\t\tRolesDialogRoleItemAvatar,\n\t\t\tRolesDialogLabelNew,\n\t\t},\n\t\tdata(): { isFavourite: boolean, isProcessingRoleFavourite: boolean } {\n\t\t\treturn {\n\t\t\t\tisFavourite: this.itemData.itemData.customData.isFavourite,\n\t\t\t\tisProcessingRoleFavourite: false,\n\t\t\t};\n\t\t},\n\t\tprops: ['itemData'],\n\t\tcomputed: {\n\t\t\t...mapWritableState(States.useGlobalState, {\n\t\t\t\tsearching: 'searchApplied',\n\t\t\t\tsearchQuery: 'searchQuery',\n\t\t\t}),\n\t\t\titem(): RolesDialogItemData {\n\t\t\t\treturn this.itemData.itemData;\n\t\t\t},\n\t\t\tsubtitle(): string {\n\t\t\t\tconst subtitle = Text.encode(this.item.subtitle);\n\n\t\t\t\tif (this.searching && this.searchQuery !== '')\n\t\t\t\t{\n\t\t\t\t\treturn subtitle.replaceAll(new RegExp(this.searchQuery, 'gi'), (match) => `<mark>${match}</mark>`);\n\t\t\t\t}\n\n\t\t\t\treturn subtitle;\n\t\t\t},\n\t\t\ttitle(): string {\n\t\t\t\tconst title = Text.encode(this.item.title);\n\n\t\t\t\tif (this.searching && this.searchQuery !== '')\n\t\t\t\t{\n\t\t\t\t\treturn title.replaceAll(new RegExp(this.searchQuery, 'gi'), (match) => `<mark>${match}</mark>`);\n\t\t\t\t}\n\n\t\t\t\treturn title;\n\t\t\t},\n\t\t\tisSelected(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.selected);\n\t\t\t},\n\t\t\tisNew(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.isNew);\n\t\t\t},\n\t\t\tisInfoItem(): boolean {\n\t\t\t\treturn Boolean(this.item.customData?.isInfoItem);\n\t\t\t},\n\t\t\tclassName(): Object {\n\t\t\t\treturn {\n\t\t\t\t\t'ai__roles-dialog_role-item': true,\n\t\t\t\t\t'--selected': this.isSelected,\n\t\t\t\t};\n\t\t\t},\n\t\t\tisRoleCanBeFavourite(): boolean {\n\t\t\t\treturn this.item.customData.canBeFavourite === true;\n\t\t\t},\n\t\t\tfavouriteLabelIconData(): { name: string, color: string, size: number } {\n\t\t\t\tconst iconName = this.isProcessingRoleFavourite\n\t\t\t\t\t? Animated.LOADER_WAIT\n\t\t\t\t\t: Main.BOOKMARK_1\n\t\t\t\t;\n\n\t\t\t\treturn {\n\t\t\t\t\tname: iconName,\n\t\t\t\t\tsize: 24,\n\t\t\t\t};\n\t\t\t},\n\t\t\tfavouriteLabelTitle(): string {\n\t\t\t\treturn this.isFavourite\n\t\t\t\t\t? this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE')\n\t\t\t\t\t: this.$Bitrix.Loc.getMessage('AI_COPILOT_ROLES_ADD_TO_FAVOURITE')\n\t\t\t\t;\n\t\t\t},\n\t\t\tfavouriteLabelClassname(): Object {\n\t\t\t\treturn {\n\t\t\t\t\t'ai__roles-dialog_role-item-favourite-label': true,\n\t\t\t\t\t'--active': this.isFavourite,\n\t\t\t\t\t'--loading': this.isProcessingRoleFavourite,\n\t\t\t\t};\n\t\t\t},\n\t\t\tinfoIcon(): string {\n\t\t\t\treturn Main.INFO;\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\tselectRole(): void {\n\t\t\t\tif (Type.isFunction(this.item.button.action))\n\t\t\t\t{\n\t\t\t\t\tthis.item.button.action();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttoggleFavourite(): void {\n\t\t\t\tif (this.isProcessingRoleFavourite)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlet isRequestFinished = false;\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (isRequestFinished === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.isProcessingRoleFavourite = true;\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\n\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\tthis.item.customData.actions.toggleFavourite(!this.isFavourite)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.isFavourite = !this.isFavourite;\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tthis.isProcessingRoleFavourite = false;\n\t\t\t\t\t\tisRequestFinished = true;\n\t\t\t\t\t});\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<article @click=\"selectRole\" :class=\"className\">\n\t\t\t\t<RolesDialogRoleItemAvatar\n\t\t\t\t\t:avatar=\"item.customData.avatar\"\n\t\t\t\t\t:avatar-alt=\"item.title\"\n\t\t\t\t\t:icon=\"isInfoItem ? infoIcon : null\"\n\t\t\t\t/>\n\t\t\t\t<div class=\"ai__roles-dialog_role-item-info\">\n\t\t\t\t\t<div class=\"ai__roles-dialog_role-item-title-wrapper\">\n\t\t\t\t\t\t<div class=\"ai__roles-dialog_role-item-title\" v-html=\"title\"></div>\n\t\t\t\t\t\t<div class=\"ai__roles-dialog_role-item-label\">\n\t\t\t\t\t\t\t<RolesDialogLabelNew v-if=\"isNew\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p class=\"ai__roles-dialog_role-item-description\" v-html=\"subtitle\"></p>\n\t\t\t\t</div>\n\t\t\t\t<button\n\t\t\t\t\tv-if=\"isRoleCanBeFavourite\"\n\t\t\t\t\t:class=\"favouriteLabelClassname\"\n\t\t\t\t\t:title=\"favouriteLabelTitle\"\n\t\t\t\t\t@click.stop.prevent=\"toggleFavourite\"\n\t\t\t\t\t@mousedown.stop\n\t\t\t\t>\n\t\t\t\t\t<BIcon\n\t\t\t\t\t\t:name=\"favouriteLabelIconData.name\"\n\t\t\t\t\t\t:size=\"favouriteLabelIconData.size\"\n\t\t\t\t\t/>\n\t\t\t\t</button>\n\t\t\t</article>\n\t\t`,\n\t};\n}\n","import { RolesDialogGroupData } from '../roles-dialog';\nimport { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions } from 'ui.icon-set.api.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport '../css/roles-dialog-group-item.css';\n\nimport { RolesDialogLabelNew } from './roles-dialog-label-new';\n\nexport const RolesDialogGroupItem = {\n\tcomponents: {\n\t\tBIcon,\n\t\tRolesDialogLabelNew,\n\t},\n\tprops: ['groupData'],\n\tcomputed: {\n\t\tgroup(): RolesDialogGroupData {\n\t\t\treturn this.groupData.groupData;\n\t\t},\n\t\tisNew(): boolean {\n\t\t\treturn this.group.customData.isNew;\n\t\t},\n\t\tisSelected(): boolean {\n\t\t\treturn this.group.selected;\n\t\t},\n\t\thandleClick(): ?Function\n\t\t{\n\t\t\tif (this.group.selected)\n\t\t\t{\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn this.groupData.handleClick;\n\t\t},\n\t\tgroupItemClassname(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ai__roles-dialog_group-item': true,\n\t\t\t\t'--selected': this.isSelected,\n\t\t\t};\n\t\t},\n\t\tchevronRightIconName(): string\n\t\t{\n\t\t\treturn Actions.CHEVRON_RIGHT;\n\t\t},\n\t},\n\tcreated() {\n\t\tif (this.groupData.groupData.id === 'recents')\n\t\t{\n\t\t\tEventEmitter.subscribe('update-complete', this.onUpdate);\n\t\t}\n\t},\n\tbeforeDestroy() {\n\t\tif (this.groupData.groupData.id === 'recents')\n\t\t{\n\t\tEventEmitter.unsubscribe('update-complete', this.onUpdate);\n\t\t}\n\t},\n\tmethods: {\n\t\tonUpdate() {\n\t\t\tthis.groupData.handleClick();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div @click=\"handleClick\" class=\"ai__roles-dialog_group-item-wrapper\">\n\t\t\t<div :class=\"groupItemClassname\">\n\t\t\t\t<div class=\"ai__roles-dialog_group-item-inner\">\n\t\t\t\t<div class=\"ai__roles-dialog_group-item-title-wrapper\">\n\t\t\t\t\t<span class=\"ai__roles-dialog_group-item-title\">\n\t\t\t\t\t\t{{ group.name }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"ai__roles-dialog_group-item-label-new\">\n\t\t\t\t\t\t<RolesDialogLabelNew\n\t\t\t\t\t\t\tv-if=\"isNew\"\n\t\t\t\t\t\t\t:inverted=\"isSelected\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t<b-icon :size=\"16\" :name=\"chevronRightIconName\"></b-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport '../css/roles-dialog-search-stub.css';\nimport { EventEmitter } from 'main.core.events';\n\nexport const RolesDialogSearchStubEvents = {\n\tCHOOSE_STANDARD_ROLE: 'AI.RolesDialog.RolesDialogSearchStub:ChooseStandardRole',\n};\n\nconst textWithLink = Loc.getMessage('AI_COPILOT_ROLES_SEARCH_NO_RESULT_3', {\n\t'#LINK#': '<span @click.prevent=\"selectUniversalRole\">',\n\t'#/LINK#': '</span>',\n});\n\nexport const RolesDialogSearchStub = {\n\tmethods: {\n\t\tselectUniversalRole(): void {\n\t\t\tEventEmitter.emit(document, RolesDialogSearchStubEvents.CHOOSE_STANDARD_ROLE);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ai__roles-dialog_search-stub\">\n\t\t\t<div class=\"ai__roles-dialog_search-stub-content\">\n\t\t\t\t<div class=\"ai__roles-dialog_search-stub-image\"></div>\n\t\t\t\t<h3 class=\"ai__roles-dialog_search-stub-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_SEARCH_NO_RESULT_TITLE') }}\n\t\t\t\t</h3>\n\t\t\t\t<div class=\"ai__roles-dialog_search-stub-text\">\n\t\t\t\t\t${textWithLink}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { mapWritableState } from 'ui.vue3.pinia';\n\nimport '../css/roles-dialog-empty-group-stub.css';\nimport { type RolesDialogGroupDataEmptyStub } from '../roles-dialog';\nimport { Loc, Event, Runtime } from 'main.core';\nimport type { AnalyticsOptions } from 'ui.analytics';\n\nconst customDescription = Loc.getMessage('AI_COPILOT_ROLES_EMPTY_CUSTOM_GROUP', {\n\t'#LINK#': '<a @click.prevent=\"openRolesLibrary\" href=\"#\">',\n\t'#/LINK#': '</a>',\n});\n\nexport const getRolesDialogEmptyGroupStubWithStates = (States) => {\n\treturn {\n\t\tcomputed: {\n\t\t\t...mapWritableState(States.useGlobalState, {\n\t\t\t\tcurrentGroup: 'currentGroup',\n\t\t\t}),\n\t\t\temptyStubData(): RolesDialogGroupDataEmptyStub {\n\t\t\t\treturn this.currentGroup.customData.emptyStubData;\n\t\t\t},\n\t\t\tgroupCode(): string {\n\t\t\t\treturn this.currentGroup.id;\n\t\t\t},\n\t\t\ttitle(): string {\n\t\t\t\treturn this.emptyStubData.title;\n\t\t\t},\n\t\t\tdescription(): string {\n\t\t\t\treturn this.emptyStubData.description;\n\t\t\t},\n\t\t},\n\t\tmethods: {\n\t\t\tasync sendAnalytics(): void\n\t\t\t{\n\t\t\t\ttry\n\t\t\t\t{\n\t\t\t\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\t\t\t\tconst sendDataOptions: AnalyticsOptions = {\n\t\t\t\t\t\tevent: 'open_list',\n\t\t\t\t\t\tstatus: 'success',\n\t\t\t\t\t\ttool: 'ai',\n\t\t\t\t\t\tcategory: 'roles_saving',\n\t\t\t\t\t\tc_section: 'roles_picker',\n\t\t\t\t\t};\n\n\t\t\t\t\tsendData(sendDataOptions);\n\t\t\t\t}\n\t\t\t\tcatch (e)\n\t\t\t\t{\n\t\t\t\t\tconsole.error('AI: RolesDialog: Can\\'t send analytics', e);\n\t\t\t\t}\n\t\t\t},\n\t\t\topenRolesLibrary() {\n\t\t\t\tif (BX.SidePanel)\n\t\t\t\t{\n\t\t\t\t\tthis.sendAnalytics();\n\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t'/bitrix/components/bitrix/ai.role.library.grid/slider.php',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonCloseStart: () => {\n\t\t\t\t\t\t\t\t\tEvent.EventEmitter.emit('update');\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.location.href = '/bitrix/components/bitrix/ai.prompt.library.grid/slider.php';\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<div class=\"ai__roles-dialog_empty-group-stub\">\n\t\t\t\t<div class=\"ai__roles-dialog_empty-group-stub-content\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ai__roles-dialog_empty-group-stub-image\"\n\t\t\t\t\t\t:class=\"'--' + groupCode\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<h3 class=\"ai__roles-dialog_empty-group-stub-title\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</h3>\n\t\t\t\t\t<div v-if=\"groupCode !== 'customs'\" class=\"ai__roles-dialog_empty-group-stub-text\">\n\t\t\t\t\t\t{{ description }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else class=\"ai__roles-dialog_empty-group-stub-text\">\n\t\t\t\t\t\t${customDescription}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`,\n\t};\n};\n","import { BIcon } from 'ui.icon-set.api.vue';\nimport { Actions, Main } from 'ui.icon-set.api.core';\nimport { Runtime, Event } from 'main.core';\nimport type { AnalyticsOptions } from 'ui.analytics';\nimport '../css/roles-dialog-roles-library.css';\n\nexport const RolesDialogRolesLibrary = {\n\tcomponents: {\n\t\tBIcon,\n\t},\n\tcomputed: {\n\t\tchevronRightIconName(): string\n\t\t{\n\t\t\treturn Actions.CHEVRON_RIGHT;\n\t\t},\n\t\trolesLibraryIconName(): string\n\t\t{\n\t\t\treturn Main.ROLES_LIBRARY;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync sendAnalytics(): void\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tconst { sendData } = await Runtime.loadExtension('ui.analytics');\n\n\t\t\t\tconst sendDataOptions: AnalyticsOptions = {\n\t\t\t\t\tevent: 'open_list',\n\t\t\t\t\tstatus: 'success',\n\t\t\t\t\ttool: 'ai',\n\t\t\t\t\tcategory: 'roles_saving',\n\t\t\t\t\tc_section: 'roles_picker',\n\t\t\t\t};\n\n\t\t\t\tsendData(sendDataOptions);\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tconsole.error('AI: RolesDialog: Can\\'t send analytics', e);\n\t\t\t}\n\t\t},\n\n\t\thandleClick(): ?Function\n\t\t{\n\t\t\tif (BX.SidePanel)\n\t\t\t{\n\t\t\t\tthis.sendAnalytics();\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t'/bitrix/components/bitrix/ai.role.library.grid/slider.php',\n\t\t\t\t\t{\n\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonCloseStart: () => {\n\t\t\t\t\t\t\t\tEvent.EventEmitter.emit('update');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.location.href = '/bitrix/components/bitrix/ai.prompt.library.grid/slider.php';\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div @click=\"handleClick\" class=\"ai__roles-dialog_roles-library-wrapper\">\n\t\t\t<div class=\"ai__roles-dialog_roles-library\">\n\t\t\t\t<div class=\"ai__roles-dialog_roles-library-inner\">\n\t\t\t\t<div class=\"ai__roles-dialog_roles-library-title-wrapper\">\n\t\t\t\t\t<b-icon :size=\"32\" :name=\"rolesLibraryIconName\"></b-icon>\n\t\t\t\t\t<span class=\"ai__roles-dialog_roles-library-title\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('AI_COPILOT_ROLES_LIBRARY_TITLE') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"ai__roles-dialog_roles-library-label-new\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\t<b-icon :size=\"16\" :name=\"chevronRightIconName\"></b-icon>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Engine, type Role, RoleIndustry } from 'ai.engine';\nimport { Type, Loc, BaseError, Runtime, Text } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { UI } from 'ui.notification';\nimport { type EntityCatalog as EntityCatalogClass, type ItemData, type GroupData } from 'ui.entity-catalog';\nimport { RolesDialogLoaderPopup } from './roles-dialog-loader-popup';\nimport { showRolesDialogErrorPopup } from './roles-dialog-error-popup';\nimport { RolesDialogAnalytics } from './roles-dialog-analytics';\n\nimport { RolesDialogGroupListFooter, RolesDialogGroupListFooterEvents } from './components/roles-dialog-group-list-footer';\nimport { RolesDialogGroupListHeader } from './components/roles-dialog-group-list-header';\nimport { getRolesDialogContentHeader } from './components/roles-dialog-content-header';\nimport { getRolesDialogRoleItemWithStates } from './components/roles-dialog-role-item';\nimport { RolesDialogGroupItem } from './components/roles-dialog-group-item';\nimport { RolesDialogSearchStub, RolesDialogSearchStubEvents } from './components/roles-dialog-search-stub';\nimport { getRolesDialogEmptyGroupStubWithStates } from './components/roles-dialog-empty-group-stub';\nimport { RolesDialogRolesLibrary } from './components/roles-dialog-roles-library';\n\nimport './css/roles-dialog.css';\n\nexport type RolesDialogOptions = {\n\tmoduleId: string;\n\tcontextId: string;\n\tselectedRoleCode?: string;\n\ttitle?: string;\n}\n\nexport const RolesDialogEvents = {\n\tHIDE: 'hide',\n\tSELECT_ROLE: 'select-role',\n};\n\nexport type SelectRoleEventDataType = {\n\trole: Role;\n}\n\nexport type RolesDialogItemData = ItemData | {\n\tcustomData: {\n\t\tselected: boolean;\n\t\tisInfoItem: boolean;\n\t\tavatar?: string;\n\t\tisNew: boolean;\n\t\tcanBeFavourite?: boolean;\n\t\tisFavourite?: boolean;\n\t\tactions?: RolesDialogItemDataCustomActions;\n\t}\n}\n\ntype RolesDialogItemDataCustomActions = {\n\ttoggleFavourite?: (makeItFavourite: boolean) => void;\n}\n\nexport type RolesDialogGroupData = GroupData | {\n\tcustomData: {\n\t\tisNew: boolean;\n\t\temptyStubData: RolesDialogGroupDataEmptyStub,\n\t},\n}\n\nexport type RolesDialogGroupDataEmptyStub = {\n\ttitle: string;\n\tdescription: string;\n}\n\nconst RECOMMENDED_GROUP_CODE = 'recommended';\nconst RECENT_GROUP_CODE = 'recents';\nconst FAVOURITE_GROUP_CODE = 'favorites';\nconst CUSTOM_GROUP_CODE = 'customs';\n\nexport class RolesDialog extends EventEmitter\n{\n\t#entityCatalog: EntityCatalogClass;\n\t#engine: Engine;\n\t#analytic: RolesDialogAnalytics;\n\t#roles: Role[];\n\t#recentRoles: Role[];\n\t#favouriteRoles: Role[];\n\t#customRoles: Role[];\n\t#defaultRoleCode: string;\n\t#industries: RoleIndustry[];\n\t#selectedDefaultRoleHandler: Function | null;\n\t#reloadDialogHandler: Function | null;\n\t#selectedRoleCode: ?string;\n\t#universalRole: Role;\n\t#title: ?string;\n\t#moduleId: string;\n\t#contextId: string;\n\n\tconstructor(options: RolesDialogOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('AI.RolesDialog');\n\n\t\tthis.#validateOptions(options);\n\n\t\tthis.#title = options.title || '';\n\t\tif (options.engine)\n\t\t{\n\t\t\tthis.#engine = options.engine;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#engine = new Engine({});\n\t\t}\n\n\t\tthis.#moduleId = options.moduleId;\n\t\tthis.#contextId = options.contextId;\n\n\t\tthis.#engine.setModuleId(options.moduleId);\n\t\tthis.#engine.setContextId(options.contextId);\n\n\t\tthis.#selectedRoleCode = Type.isString(options.selectedRoleCode) ? options.selectedRoleCode : '';\n\n\t\tthis.#analytic = new RolesDialogAnalytics({\n\t\t\tcSection: `${this.#moduleId}_${this.#contextId}`,\n\t\t});\n\t}\n\n\t#validateOptions(options: RolesDialogOptions)\n\t{\n\t\tif (Type.isStringFilled(options.moduleId) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: moduleId is required option and must be string');\n\t\t}\n\n\t\tif (Type.isStringFilled(options.contextId) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: contextId is required option and must be string');\n\t\t}\n\n\t\tif (options.selectedRoleCode !== undefined && Type.isString(options.selectedRoleCode) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: selectedRoleCode must be string');\n\t\t}\n\n\t\tif (options.title && Type.isString(options.title) === false)\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: title must be string');\n\t\t}\n\n\t\tif (options.engine && !(options.engine instanceof Engine))\n\t\t{\n\t\t\tthrow new BaseError('AI.RolesDialog: engine option must be instance of Engine');\n\t\t}\n\t}\n\n\tsetSelectedRoleCode(code: string): void\n\t{\n\t\tthis.#selectedRoleCode = code;\n\n\t\tif (this.#entityCatalog)\n\t\t{\n\t\t\tthis.#entityCatalog.setGroups(this.#getItemGroupsFromIndustries());\n\t\t\tthis.#entityCatalog.setItems(this.#getItemsData());\n\t\t}\n\t}\n\n\tasync show(): Promise<void>\n\t{\n\t\tif (this.#entityCatalog)\n\t\t{\n\t\t\tthis.#entityCatalog.show();\n\n\t\t\tthis.#analytic.sendOpenLabel(true, this.#selectedRoleCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.#showAfterInit();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#entityCatalog?.close();\n\t}\n\n\tasync #showAfterInit(): Promise<void>\n\t{\n\t\tconst loader = new RolesDialogLoaderPopup();\n\t\tlet isShowLoader = true;\n\n\t\tsetTimeout(() => {\n\t\t\tif (isShowLoader)\n\t\t\t{\n\t\t\t\tloader.show();\n\t\t\t}\n\t\t}, 300);\n\n\t\ttry\n\t\t{\n\t\t\tawait this.#init();\n\n\t\t\tthis.#analytic.sendOpenLabel(true, this.#selectedRoleCode);\n\n\t\t\tthis.#entityCatalog.show();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tshowRolesDialogErrorPopup();\n\t\t\tthis.#analytic.sendOpenLabel(false, this.#selectedRoleCode);\n\t\t\tconsole.error(e);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tisShowLoader = false;\n\t\t\tloader.hide();\n\t\t}\n\t}\n\n\t#subscribeEvents(): void\n\t{\n\t\tthis.#selectedDefaultRoleHandler = this.#selectDefaultRole.bind(this);\n\n\t\tEventEmitter.subscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogSearchStubEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\n\t\tthis.#reloadDialogHandler = this.#reloadDialog.bind(this);\n\n\t\tEventEmitter.subscribe(\n\t\t\t'update',\n\t\t\tthis.#reloadDialogHandler,\n\t\t);\n\t}\n\n\tasync #reloadDialog() {\n\t\tconst loader = new RolesDialogLoaderPopup();\n\t\tlet isShowLoader = true;\n\n\t\tsetTimeout(() => {\n\t\t\tif (isShowLoader)\n\t\t\t{\n\t\t\t\tloader.show();\n\t\t\t}\n\t\t}, 300);\n\t\ttry\n\t\t{\n\t\t\tthis.#entityCatalog.setItems([]);\n\t\t\tthis.#entityCatalog.setGroups([]);\n\t\t\tawait this.#loadData();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tshowRolesDialogErrorPopup();\n\t\t\tconsole.error(e);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tisShowLoader = false;\n\t\t\tloader.hide();\n\t\t\tthis.#entityCatalog.setItems(this.#getItemsData());\n\t\t\tthis.#entityCatalog.setGroups(this.#getItemGroupsFromIndustries());\n\t\t\tEventEmitter.emit('update-complete');\n\t\t}\n\t}\n\n\t#unsubscribeEvents(): void\n\t{\n\t\tEventEmitter.unsubscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogGroupListFooterEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\n\t\tEventEmitter.unsubscribe(\n\t\t\tdocument,\n\t\t\tRolesDialogSearchStubEvents.CHOOSE_STANDARD_ROLE,\n\t\t\tthis.#selectedDefaultRoleHandler,\n\t\t);\n\n\t\tEventEmitter.unsubscribe(\n\t\t\t'update',\n\t\t\tthis.#reloadDialogHandler,\n\t\t);\n\t}\n\n\t#selectRole(role: Role): void\n\t{\n\t\tconst event: BaseEvent<SelectRoleEventDataType> = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\trole,\n\t\t\t},\n\t\t});\n\n\t\tthis.setSelectedRoleCode(role.code);\n\t\tthis.#analytic.sendSelectLabel(this.#selectedRoleCode);\n\n\t\tthis.emit(RolesDialogEvents.SELECT_ROLE, event);\n\t}\n\n\t#selectDefaultRole(): void\n\t{\n\t\tthis.setSelectedRoleCode(this.#defaultRoleCode);\n\n\t\tconst event: BaseEvent<SelectRoleEventDataType> = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\trole: this.#universalRole,\n\t\t\t},\n\t\t});\n\n\t\tthis.emit(RolesDialogEvents.SELECT_ROLE, event);\n\n\t\tthis.#entityCatalog.close();\n\t}\n\n\tasync #init(): Promise<void>\n\t{\n\t\tawait this.#loadData();\n\n\t\tawait this.#initEntityCatalog();\n\t}\n\n\tasync #initEntityCatalog(): void\n\t{\n\t\tconst { EntityCatalog, States } = await Runtime.loadExtension('ui.entity-catalog');\n\n\t\tthis.#entityCatalog = new EntityCatalog({\n\t\t\ttitle: this.#title,\n\t\t\tshowSearch: true,\n\t\t\tshowEmptyGroups: true,\n\t\t\tcustomComponents: {\n\t\t\t\tRolesDialogContentHeader: getRolesDialogContentHeader(States, this.#analytic),\n\t\t\t\tRolesDialogRoleItem: getRolesDialogRoleItemWithStates(States),\n\t\t\t\tRolesDialogGroupListHeader,\n\t\t\t\tRolesDialogGroupItem,\n\t\t\t\tRolesDialogGroupListFooter,\n\t\t\t\tRolesDialogSearchStub,\n\t\t\t\tRolesDialogEmptyGroupStub: getRolesDialogEmptyGroupStubWithStates(States),\n\t\t\t\tRolesDialogRolesLibrary,\n\t\t\t},\n\t\t\tpopupOptions: {\n\t\t\t\tclassName: 'ai_roles-dialog_popup ui-entity-catalog__scope',\n\t\t\t\tresizable: false,\n\t\t\t\twidth: 852,\n\t\t\t\theight: 510,\n\t\t\t\tanimation: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tthis.#subscribeEvents();\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.emit(RolesDialogEvents.HIDE);\n\t\t\t\t\t\tthis.#unsubscribeEvents();\n\t\t\t\t\t\tthis.#analytic.sendCloseLabel(this.#selectedRoleCode);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tslots: this.#getSlots(EntityCatalog),\n\t\t\tgroups: this.#getItemGroupsFromIndustries(),\n\t\t\titems: this.#getItemsData(),\n\t\t});\n\t}\n\n\t#getSlots(EntityCatalog: EntityCatalogClass): Object {\n\t\tconst slots = {\n\t\t\t[EntityCatalog.SLOT_MAIN_CONTENT_HEADER]: '<RolesDialogContentHeader />',\n\t\t\t[EntityCatalog.SLOT_MAIN_CONTENT_ITEM]: '<RolesDialogRoleItem :itemData=\"itemSlotProps\" />',\n\t\t\t[EntityCatalog.SLOT_GROUP]: '<RolesDialogGroupItem :groupData=\"groupSlotProps\" />',\n\t\t\t[EntityCatalog.SLOT_GROUP_LIST_HEADER]: '<RolesDialogGroupListHeader />',\n\t\t\t[EntityCatalog.SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB]: '<RolesDialogEmptyGroupStub />',\n\t\t\t[EntityCatalog.SLOT_GROUP_LIST_FOOTER]: '<RolesDialogRolesLibrary />',\n\t\t};\n\n\t\tif (EntityCatalog.SLOT_MAIN_CONTENT_SEARCH_STUB)\n\t\t{\n\t\t\tslots[EntityCatalog.SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB] = '<RolesDialogSearchStub />';\n\t\t\tslots[EntityCatalog.SLOT_MAIN_CONTENT_SEARCH_STUB] = '<RolesDialogSearchStub />';\n\t\t}\n\n\t\treturn slots;\n\t}\n\n\t#getInfoItemData(): RolesDialogItemData\n\t{\n\t\treturn {\n\t\t\tid: 'info-item-data',\n\t\t\ttitle: Loc.getMessage('AI_COPILOT_ROLES_HELP_ITEM_TITLE'),\n\t\t\tsubtitle: Loc.getMessage('AI_COPILOT_ROLES_HELP_ITEM_DESCRIPTION'),\n\t\t\tgroupIds: this.#getAllIndustryCodesWithExcludes([FAVOURITE_GROUP_CODE, CUSTOM_GROUP_CODE]),\n\t\t\tcustomData: {\n\t\t\t\tisInfoItem: true,\n\t\t\t},\n\t\t\tbutton: {\n\t\t\t\taction: async () => {\n\t\t\t\t\tawait Runtime.loadExtension('ui.feedback.form');\n\t\t\t\t\tconst id = Math.round(Math.random() * 1000);\n\t\t\t\t\tBX.UI.Feedback.Form.open({\n\n\t\t\t\t\t\tid: `ai.roles-dialog.feedback-form_${id}`,\n\t\t\t\t\t\tpresets: {\n\t\t\t\t\t\t\tsender_page: `${this.#moduleId}_${this.#contextId}`,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tforms: [{\n\t\t\t\t\t\t\tzones: ['es'],\n\t\t\t\t\t\t\tid: 738,\n\t\t\t\t\t\t\tlang: 'es',\n\t\t\t\t\t\t\tsec: '77ui4p',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['en'],\n\t\t\t\t\t\t\tid: 740,\n\t\t\t\t\t\t\tlang: 'en',\n\t\t\t\t\t\t\tsec: 'obza3e',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['de'],\n\t\t\t\t\t\t\tid: 742,\n\t\t\t\t\t\t\tlang: 'de',\n\t\t\t\t\t\t\tsec: 'vqqxgr',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['com.br'],\n\t\t\t\t\t\t\tid: 744,\n\t\t\t\t\t\t\tlang: 'com.br',\n\t\t\t\t\t\t\tsec: 'nz3zig',\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tzones: ['ru', 'by', 'kz'],\n\t\t\t\t\t\t\tid: 746,\n\t\t\t\t\t\t\tlang: 'ru',\n\t\t\t\t\t\t\tsec: 'we50kv',\n\t\t\t\t\t\t}],\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.#analytic.sendFeedBackLabel();\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getAllIndustryCodesWithExcludes(excludesCodes: string[]): string[]\n\t{\n\t\tconst excludes = new Set(excludesCodes);\n\n\t\treturn this.#industries\n\t\t\t.map((industry) => {\n\t\t\t\treturn industry.code;\n\t\t\t})\n\t\t\t.filter((industryCode: string) => {\n\t\t\t\treturn excludes.has(industryCode) === false;\n\t\t\t});\n\t}\n\n\tasync #loadData(): void\n\t{\n\t\tconst result = await this.#engine.getRolesDialogData();\n\n\t\tthis.#universalRole = result.data.universalRole;\n\t\tthis.#defaultRoleCode = this.#universalRole.code;\n\n\t\tthis.#industries = result.data.items.map((roleIndustry) => {\n\t\t\tconst { code, name, isNew } = roleIndustry;\n\n\t\t\treturn {\n\t\t\t\tcode,\n\t\t\t\tname,\n\t\t\t\tisNew,\n\t\t\t};\n\t\t});\n\n\t\tthis.#industries.unshift(\n\t\t\tthis.#getRecentRoleIndustry(),\n\t\t\tthis.#getFavouriteRoleIndustry(),\n\t\t\tthis.#getCustomRoleIndustry(),\n\t\t\tthis.#getRecommendedRoleIndustry(),\n\t\t);\n\n\t\tthis.#roles = result.data.items.reduce((roles: Role[], roleIndustry) => {\n\t\t\tconst industryRoles = roleIndustry.roles;\n\n\t\t\treturn [...roles, ...industryRoles];\n\t\t}, []);\n\n\t\tthis.#recentRoles = result.data.recents;\n\t\tthis.#favouriteRoles = result.data.favorites;\n\t\tthis.#customRoles = result.data.customs;\n\n\t\tthis.#roles = [...this.#roles, ...this.#customRoles];\n\n\t\tthis.#selectedRoleCode = this.#selectedRoleCode || null;\n\t}\n\n\t#getRecommendedRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: RECOMMENDED_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_RECOMMENDED_GROUP'),\n\t\t};\n\t}\n\n\t#getRecentRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: RECENT_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_RECENT_GROUP'),\n\t\t};\n\t}\n\n\t#getFavouriteRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: FAVOURITE_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_FAVOURITE_GROUP'),\n\t\t};\n\t}\n\n\t#getCustomRoleIndustry(): RoleIndustry\n\t{\n\t\treturn {\n\t\t\tcode: CUSTOM_GROUP_CODE,\n\t\t\tname: Loc.getMessage('AI_COPILOT_ROLES_CUSTOM_GROUP'),\n\t\t};\n\t}\n\n\t#getItemsData(): RolesDialogItemData[]\n\t{\n\t\tlet selectedRole = null;\n\n\t\tconst items: RolesDialogItemData[] = this.#roles.map((role): RolesDialogItemData => {\n\t\t\tconst groupIds = [role.industryCode];\n\n\t\t\tif (role.isRecommended)\n\t\t\t{\n\t\t\t\tgroupIds.push(RECOMMENDED_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (this.#recentRoles.findIndex((recentRole) => recentRole.code === role.code) > -1)\n\t\t\t{\n\t\t\t\tgroupIds.push(RECENT_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (this.#favouriteRoles.findIndex((favouriteRole) => favouriteRole.code === role.code) > -1)\n\t\t\t{\n\t\t\t\tgroupIds.push(FAVOURITE_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (this.#customRoles.findIndex((customRole) => customRole.code === role.code) > -1)\n\t\t\t{\n\t\t\t\tgroupIds.push(CUSTOM_GROUP_CODE);\n\t\t\t}\n\n\t\t\tif (role.code === this.#selectedRoleCode)\n\t\t\t{\n\t\t\t\tselectedRole = this.#getItemDataFromRole(role, groupIds);\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn this.#getItemDataFromRole(role, groupIds);\n\t\t}).filter((role) => role);\n\n\t\tconst itemsSortedByNewness = items.sort((role) => {\n\t\t\treturn role.customData.isNew ? -1 : 1;\n\t\t});\n\n\t\tconst universalRoleItem = this.#getUniversalRoleItemData();\n\n\t\treturn [\n\t\t\tuniversalRoleItem,\n\t\t\tselectedRole,\n\t\t\t...itemsSortedByNewness,\n\t\t\tthis.#getInfoItemData(),\n\t\t].filter((role) => role);\n\t}\n\n\t#getUniversalRoleItemData(): ItemData\n\t{\n\t\tconst role = this.#universalRole;\n\t\tconst groupIds = [...this.#getAllIndustryCodesWithExcludes([FAVOURITE_GROUP_CODE, CUSTOM_GROUP_CODE])];\n\n\t\treturn this.#getItemDataFromRole(role, groupIds);\n\t}\n\n\t#getItemGroupsFromIndustries(): [[RolesDialogGroupData[]]]\n\t{\n\t\tconst selectedGroupIndex = this.#getSelectedGroupIndex();\n\n\t\tconst groups = this.#industries.map((industry, index): RolesDialogGroupData => {\n\t\t\tconst isSelectedRole = index === selectedGroupIndex;\n\n\t\t\tif (industry.code === RECENT_GROUP_CODE)\n\t\t\t{\n\t\t\t\treturn this.#getRecentItemGroupData(isSelectedRole);\n\t\t\t}\n\n\t\t\tif (industry.code === FAVOURITE_GROUP_CODE)\n\t\t\t{\n\t\t\t\treturn this.#getFavouriteItemGroupData(isSelectedRole);\n\t\t\t}\n\n\t\t\tif (industry.code === CUSTOM_GROUP_CODE)\n\t\t\t{\n\t\t\t\treturn this.#getCustomItemGroupData(isSelectedRole);\n\t\t\t}\n\n\t\t\treturn this.#getItemGroupDataFromIndustry(industry, isSelectedRole);\n\t\t});\n\n\t\treturn [\n\t\t\t[\n\t\t\t\t...groups,\n\t\t\t],\n\t\t];\n\t}\n\n\t#getItemGroupDataFromIndustry(industry: RoleIndustry, isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\tid: industry.code,\n\t\t\tname: industry.name,\n\t\t\tselected: isSelected,\n\t\t\tcustomData: {\n\t\t\t\tisNew: industry.isNew,\n\t\t\t},\n\t\t};\n\t}\n\n\t#getRecentItemGroupData(isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\t...this.#getItemGroupDataFromIndustry(this.#getRecentRoleIndustry(), isSelected),\n\t\t\tcompare: (item1, item2) => {\n\t\t\t\treturn this.#compareRecentItems(item1, item2);\n\t\t\t},\n\t\t};\n\t}\n\n\t#compareRecentItems(item1: RolesDialogItemData, item2: RolesDialogItemData): number\n\t{\n\t\tconst item1Index = this.#recentRoles.findIndex((rr) => item1.id === rr.code) + 1;\n\t\tconst item2Index = this.#recentRoles.findIndex((rr) => item2.id === rr.code) + 1;\n\n\t\tif (item1.id === this.#getInfoItemData().id)\n\t\t{\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn item1Index - item2Index;\n\t}\n\n\t#getFavouriteItemGroupData(isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\t...this.#getItemGroupDataFromIndustry(this.#getFavouriteRoleIndustry(), isSelected),\n\t\t\tcompare: (item1, item2) => {\n\t\t\t\treturn this.#compareFavouriteItems(item1, item2);\n\t\t\t},\n\t\t\tcustomData: {\n\t\t\t\temptyStubData: {\n\t\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_ROLES_EMPTY_FAVOURITE_GROUP_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('AI_COPILOT_ROLES_EMPTY_FAVOURITE_GROUP'),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getCustomItemGroupData(isSelected: boolean = false): RolesDialogGroupData\n\t{\n\t\treturn {\n\t\t\t...this.#getItemGroupDataFromIndustry(this.#getCustomRoleIndustry(), isSelected),\n\n\t\t\tcustomData: {\n\t\t\t\temptyStubData: {\n\t\t\t\t\ttitle: Loc.getMessage('AI_COPILOT_ROLES_EMPTY_CUSTOM_GROUP_TITLE'),\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#compareFavouriteItems(item1: RolesDialogItemData, item2: RolesDialogItemData): number\n\t{\n\t\tconst item1Index = this.#favouriteRoles.findIndex((rr) => item1.id === rr.code) + 1;\n\t\tconst item2Index = this.#favouriteRoles.findIndex((rr) => item2.id === rr.code) + 1;\n\n\t\treturn item1Index - item2Index;\n\t}\n\n\t#getItemDataFromRole(role: Role, groupIds: string[] = []): RolesDialogItemData\n\t{\n\t\tconst isRoleInFavouriteList = this.#isRoleInFavouriteList(role.code);\n\n\t\treturn {\n\t\t\tgroupIds,\n\t\t\tid: role.code,\n\t\t\tname: role.name,\n\t\t\ttitle: role.name,\n\t\t\tsubtitle: role.description,\n\t\t\tdescription: role.description,\n\t\t\tbutton: {\n\t\t\t\ttext: Loc.getMessage('AI_COPILOT_ROLES_USE_ROLE_BTN'),\n\t\t\t\taction: () => {\n\t\t\t\t\tthis.#selectRole(role);\n\t\t\t\t\tthis.#entityCatalog.close();\n\t\t\t\t},\n\t\t\t},\n\t\t\tcustomData: {\n\t\t\t\tselected: role.code === this.#selectedRoleCode,\n\t\t\t\tavatar: role.avatar.medium,\n\t\t\t\tisNew: role.isNew,\n\t\t\t\tisFavourite: isRoleInFavouriteList,\n\t\t\t\tcanBeFavourite: role.code !== this.#universalRole.code,\n\t\t\t\tactions: {\n\t\t\t\t\ttoggleFavourite: (makeItFavourite: boolean) => {\n\t\t\t\t\t\tconst roleCode = role.code;\n\n\t\t\t\t\t\treturn this.#toggleRoleFavourite(roleCode, makeItFavourite);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n\n\t#getSelectedGroupIndex(): number\n\t{\n\t\tconst selectedGroupIndex = this.#industries.findIndex((industry) => {\n\t\t\treturn this.#isSelectedIndustry(industry);\n\t\t});\n\n\t\treturn selectedGroupIndex > -1 ? selectedGroupIndex : 0;\n\t}\n\n\t#isSelectedIndustry(industry: RoleIndustry): boolean\n\t{\n\t\tconst items = this.#getItemsData();\n\n\t\tconst selectedItem: RolesDialogItemData | undefined = items.find((item) => {\n\t\t\treturn item.id === this.#selectedRoleCode;\n\t\t});\n\n\t\treturn selectedItem?.groupIds.includes(industry.code) || false;\n\t}\n\n\t#isRoleInFavouriteList(roleCode: string): boolean\n\t{\n\t\treturn this.#favouriteRoles.some((role) => {\n\t\t\treturn role.code === roleCode;\n\t\t});\n\t}\n\n\tasync #toggleRoleFavourite(roleCode: string, makeFavourite: boolean): Promise<any>\n\t{\n\t\tconst role = roleCode === this.#universalRole.code\n\t\t\t? this.#universalRole\n\t\t\t: this.#roles.find((currentRole: Role) => currentRole.code === roleCode)\n\t\t;\n\n\t\tif (!role && roleCode !== this.#universalRole.code)\n\t\t{\n\t\t\tconst failedMessage = makeFavourite\n\t\t\t\t? Loc.getMessage('AI_COPILOT_ROLES_ADD_TO_FAVOURITE_ACTION_FAILED')\n\t\t\t\t: Loc.getMessage('AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_ACTION_FAILED')\n\t\t\t;\n\n\t\t\tUI.Notification.Center.notify({\n\t\t\t\tcontent: failedMessage,\n\t\t\t});\n\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tif (makeFavourite)\n\t\t{\n\t\t\treturn this.#addRoleToFavouriteList(role.code, role.name);\n\t\t}\n\n\t\treturn this.#removeRoleFromFavouriteList(role.code, role.name);\n\t}\n\n\tasync #addRoleToFavouriteList(roleCode: string, roleName: string): Promise\n\t{\n\t\treturn this.#engine.addRoleToFavouriteList(roleCode)\n\t\t\t.then((res) => {\n\t\t\t\tthis.#favouriteRoles = res.data.items;\n\n\t\t\t\tthis.#entityCatalog.setItems(this.#getItemsData());\n\t\t\t\tthis.#entityCatalog.setGroups(this.#getItemGroupsFromIndustries());\n\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('AI_COPILOT_ROLES_ADD_TO_FAVOURITE_NOTIFICATION_SUCCESS', {\n\t\t\t\t\t\t'#ROLE#': Text.encode(roleName),\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('AI_COPILOT_ROLES_ADD_TO_FAVOURITE_ACTION_FAILED'),\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tasync #removeRoleFromFavouriteList(roleCode: string, roleName: string): Promise\n\t{\n\t\treturn this.#engine.removeRoleFromFavouriteList(roleCode)\n\t\t\t.then((res) => {\n\t\t\t\tthis.#favouriteRoles = res.data.items;\n\t\t\t\tthis.#entityCatalog.setItems(this.#getItemsData());\n\t\t\t\tthis.#entityCatalog.setGroups(this.#getItemGroupsFromIndustries());\n\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_NOTIFICATION_SUCCESS', {\n\t\t\t\t\t\t'#ROLE#': Text.encode(roleName),\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.error(err);\n\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('AI_COPILOT_ROLES_REMOVE_FROM_FAVOURITE_ACTION_FAILED'),\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n"],"names":["RolesDialogLoaderPopup","show","hide","close","Popup","content","resizable","width","height","padding","contentPadding","borderRadius","className","animation","cacheable","Tag","render","showRolesDialogErrorPopup","popup","renderPopupContent","autoHide","closeByEsc","closeIcon","closeIconSize","CloseIconSize","LARGE","renderWarningIcon","Loc","getMessage","warningIconColor","warningIcon","Icon","icon","Main","WARNING","size","color","RolesDialogAnalyticsEvent","Object","freeze","OPEN","CLOSE","SAVE","SEARCH","FEEDBACK","SELECT","RolesDialogAnalyticsEventStatus","SUCCESS","ERROR","RolesDialogAnalytics","constructor","options","cSection","sendOpenLabel","isSuccess","role","status","extraParams","p1","name","value","event","sendCloseLabel","sendSelectLabel","sendSearchLabel","search","sendFeedBackLabel","params","sendData","Runtime","loadExtension","sendDataOptions","e","console","error","tool","category","c_section","formattedExtraParams","entries","forEach","paramKey","param","Text","toCamelCase","replaceAll","split","map","stringPart","Number","isNaN","parseInt","filter","join","RolesDialogGroupListFooterEvents","CHOOSE_STANDARD_ROLE","RolesDialogGroupListFooter","methods","handleClick","EventEmitter","emit","document","template","RolesDialogHeaderWithHint","components","Hint","props","header","type","String","required","default","hint","RolesDialogGroupListHeader","computed","text","$Bitrix","getRolesDialogContentHeader","States","analytic","sendSearchAnalyticLabel","searchQuery","debouncedSendSearchAnalyticLabel","debounce","mapWritableState","useGlobalState","searching","watch","RolesDialogRoleItemAvatar","BIcon","data","isAvatarLoaded","avatar","avatarAlt","iconSize","iconColor","getComputedStyle","body","getPropertyValue","fallbackIcon","COPILOT_AI","onImageLoad","onImageLoadError","RolesDialogLabelNew","inverted","Boolean","labelHTML","labelColor","LabelColor","COPILOT_LIGHT_REVERSE","COPILOT_LIGHT","label","Label","LabelSize","SM","fill","outerHTML","getRolesDialogRoleItemWithStates","isFavourite","itemData","customData","isProcessingRoleFavourite","item","subtitle","encode","RegExp","match","title","isSelected","selected","isNew","isInfoItem","isRoleCanBeFavourite","canBeFavourite","favouriteLabelIconData","iconName","Animated","LOADER_WAIT","BOOKMARK_1","favouriteLabelTitle","favouriteLabelClassname","infoIcon","INFO","selectRole","Type","isFunction","button","action","toggleFavourite","isRequestFinished","setTimeout","actions","then","finally","RolesDialogGroupItem","group","groupData","undefined","groupItemClassname","chevronRightIconName","Actions","CHEVRON_RIGHT","created","id","subscribe","onUpdate","beforeDestroy","unsubscribe","RolesDialogSearchStubEvents","textWithLink","RolesDialogSearchStub","selectUniversalRole","customDescription","getRolesDialogEmptyGroupStubWithStates","currentGroup","emptyStubData","groupCode","description","sendAnalytics","openRolesLibrary","BX","SidePanel","Instance","open","events","onCloseStart","Event","window","location","href","RolesDialogRolesLibrary","rolesLibraryIconName","ROLES_LIBRARY","RolesDialogEvents","HIDE","SELECT_ROLE","RECOMMENDED_GROUP_CODE","RECENT_GROUP_CODE","FAVOURITE_GROUP_CODE","CUSTOM_GROUP_CODE","RolesDialog","setEventNamespace","engine","Engine","moduleId","contextId","setModuleId","setContextId","isString","selectedRoleCode","setSelectedRoleCode","code","setGroups","setItems","isStringFilled","BaseError","loader","isShowLoader","bind","BaseEvent","EntityCatalog","showSearch","showEmptyGroups","customComponents","RolesDialogContentHeader","RolesDialogRoleItem","RolesDialogEmptyGroupStub","popupOptions","onPopupShow","onPopupClose","slots","groups","items","SLOT_MAIN_CONTENT_HEADER","SLOT_MAIN_CONTENT_ITEM","SLOT_GROUP","SLOT_GROUP_LIST_HEADER","SLOT_MAIN_CONTENT_EMPTY_GROUP_STUB","SLOT_GROUP_LIST_FOOTER","SLOT_MAIN_CONTENT_SEARCH_STUB","SLOT_MAIN_CONTENT_NO_SELECTED_GROUP_STUB","groupIds","Math","round","random","UI","Feedback","Form","presets","sender_page","forms","zones","lang","sec","excludesCodes","excludes","Set","industry","industryCode","has","result","getRolesDialogData","universalRole","roleIndustry","unshift","reduce","roles","industryRoles","recents","favorites","customs","selectedRole","isRecommended","push","findIndex","recentRole","favouriteRole","customRole","itemsSortedByNewness","sort","universalRoleItem","selectedGroupIndex","index","isSelectedRole","compare","item1","item2","item1Index","rr","item2Index","isRoleInFavouriteList","medium","makeItFavourite","roleCode","selectedItem","find","includes","some","makeFavourite","currentRole","failedMessage","Notification","Center","notify","Promise","reject","roleName","addRoleToFavouriteList","res","catch","err","removeRoleFromFavouriteList"],"mappings":"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"}