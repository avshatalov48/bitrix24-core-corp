this.BX=this.BX||{};(function(e,s,a,l,t,i,r,o,n,b,c,d,p,v,u,h,P,L,F,H){"use strict";async function B(e){try{const s=await f(e);return s.checkAgreement()}catch(e){console.error(e);return true}}async function f(e){try{const{CopilotAgreement:s}=await F.Runtime.loadExtension("ai.copilot-agreement");return new s(e)}catch(e){console.error(e);return null}}const y=Object.freeze({text:"text_operations",image:"image_operations",readonly:"read_operations",promptSaving:"prompt_saving"});const m=Object.freeze({textNew:"create_new",textReply:"reply_context",textEdit:"edit_context",imageNew:"create_image"});const g=Object.freeze({fromText:"from_text",fromAudio:"audio_used",fromTextAndAudio:"from_text+audio_used"});const _=Object.freeze({editorButton:"editor_button",spaceButton:"space_button",popupButton:"popup_button",readonlyCommon:"common",readonlyQuote:"quote"});const w=Object.freeze({open:"open",generate:"generate",success:"success",error:"error",saveResult:"save",cancelResult:"cancel",editResult:"edit",copyResult:"copy_text",openPromptsLibrary:"open_list"});var O=babelHelpers.classPrivateFieldLooseKey("tool");var C=babelHelpers.classPrivateFieldLooseKey("category");var E=babelHelpers.classPrivateFieldLooseKey("event");var I=babelHelpers.classPrivateFieldLooseKey("type");var x=babelHelpers.classPrivateFieldLooseKey("c_section");var j=babelHelpers.classPrivateFieldLooseKey("c_sub_section");var T=babelHelpers.classPrivateFieldLooseKey("c_element");var K=babelHelpers.classPrivateFieldLooseKey("params");var M=babelHelpers.classPrivateFieldLooseKey("setCategory");var k=babelHelpers.classPrivateFieldLooseKey("setType");var A=babelHelpers.classPrivateFieldLooseKey("setContextSubSection");var S=babelHelpers.classPrivateFieldLooseKey("setContextElement");var R=babelHelpers.classPrivateFieldLooseKey("sendData");var N=babelHelpers.classPrivateFieldLooseKey("getData");class D{constructor(){Object.defineProperty(this,N,{value:z});Object.defineProperty(this,R,{value:X});Object.defineProperty(this,S,{value:U});Object.defineProperty(this,A,{value:G});Object.defineProperty(this,k,{value:W});Object.defineProperty(this,M,{value:$});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:void 0});Object.defineProperty(this,E,{writable:true,value:void 0});Object.defineProperty(this,I,{writable:true,value:void 0});Object.defineProperty(this,x,{writable:true,value:void 0});Object.defineProperty(this,j,{writable:true,value:void 0});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,K,{writable:true,value:[]});babelHelpers.classPrivateFieldLooseBase(this,O)[O]="AI";babelHelpers.classPrivateFieldLooseBase(this,C)[C]=""}getCategory(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}getType(){return babelHelpers.classPrivateFieldLooseBase(this,I)[I]}getCSection(){return babelHelpers.classPrivateFieldLooseBase(this,x)[x]}getCSubSection(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j]}getCElement(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T]}setCategoryText(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](y.text)}setCategoryReadonly(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](y.readonly)}setCategoryImage(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](y.image)}setCategoryPromptSaving(){return babelHelpers.classPrivateFieldLooseBase(this,M)[M](y.promptSaving)}setTypeTextNew(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](m.textNew)}setTypeTextReply(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](m.textReply)}setTypeTextEdit(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](m.textEdit)}setTypeImageNew(){return babelHelpers.classPrivateFieldLooseBase(this,k)[k](m.imageNew)}setContextSection(e){if(e.length>0){babelHelpers.classPrivateFieldLooseBase(this,x)[x]=e}return this}setContextTypeFromText(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.fromText)}setContextTypeFromAudio(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.fromAudio)}setContextTypeFromTextAndAudio(){return babelHelpers.classPrivateFieldLooseBase(this,A)[A](g.fromTextAndAudio)}setContextElementEditorButton(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S](_.editorButton)}setContextElementSpaceButton(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S](_.spaceButton)}setContextElementReadonlyCommon(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S](_.readonlyCommon)}setContextElementReadonlyQuote(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S](_.readonlyQuote)}setContextElementPopupButton(){return babelHelpers.classPrivateFieldLooseBase(this,S)[S](_.popupButton)}setP1(e,s){babelHelpers.classPrivateFieldLooseBase(this,K)[K][0]={name:e,value:s};return this}setP2(e,s){babelHelpers.classPrivateFieldLooseBase(this,K)[K][1]={name:e,value:s};return this}setP3(e,s){babelHelpers.classPrivateFieldLooseBase(this,K)[K][2]={name:e,value:s};return this}setP4(e,s){babelHelpers.classPrivateFieldLooseBase(this,K)[K][3]={name:e,value:s};return this}setP5(e,s){babelHelpers.classPrivateFieldLooseBase(this,K)[K][4]={name:e,value:s};return this}sendEventOpen(e){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.open;return babelHelpers.classPrivateFieldLooseBase(this,R)[R](e)}sendEventGenerate(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.generate;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventSuccess(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.success;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventError(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.error;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventSave(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.saveResult;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventCancel(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.cancelResult;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventOpenPromptLibrary(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.openPromptsLibrary;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventCopyResult(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.copyResult;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}sendEventEditResult(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]=w.editResult;return babelHelpers.classPrivateFieldLooseBase(this,R)[R]()}}function $(e){if(Object.values(y).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,C)[C]=e}return this}function W(e){if(Object.values(m).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,I)[I]=e}return this}function G(e){if(Object.values(g).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,j)[j]=e}return this}function U(e){if(Object.values(_).includes(e)){babelHelpers.classPrivateFieldLooseBase(this,T)[T]=e}return this}function X(e){let s=babelHelpers.classPrivateFieldLooseBase(this,N)[N]();if(!s){return}if(e){s={...s,status:e}}F.Runtime.loadExtension("ui.analytics").then((({sendData:e})=>{e(s)})).catch((()=>{console.error("AI: Copilot: can't load ui.analytics")}))}function z(){if(!babelHelpers.classPrivateFieldLooseBase(this,O)[O]||!babelHelpers.classPrivateFieldLooseBase(this,C)[C]||!babelHelpers.classPrivateFieldLooseBase(this,E)[E]){return null}const e={tool:babelHelpers.classPrivateFieldLooseBase(this,O)[O],category:babelHelpers.classPrivateFieldLooseBase(this,C)[C],event:babelHelpers.classPrivateFieldLooseBase(this,E)[E]};if(babelHelpers.classPrivateFieldLooseBase(this,I)[I]){e.type=babelHelpers.classPrivateFieldLooseBase(this,I)[I]}if(babelHelpers.classPrivateFieldLooseBase(this,x)[x]){e.c_section=babelHelpers.classPrivateFieldLooseBase(this,x)[x]}if(babelHelpers.classPrivateFieldLooseBase(this,j)[j]){e.c_sub_section=babelHelpers.classPrivateFieldLooseBase(this,j)[j]}if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]){e.c_element=babelHelpers.classPrivateFieldLooseBase(this,T)[T]}if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]&&F.Type.isArray(babelHelpers.classPrivateFieldLooseBase(this,K)[K])){babelHelpers.classPrivateFieldLooseBase(this,K)[K].forEach(((s,a)=>{if(!(s!=null&&s.value)||!(s!=null&&s.name)){return}const{name:l,value:t}=s;const i=`p${a+1}`;e[i]=`${F.Text.toCamelCase(l)}_${F.Text.toCamelCase(t)}`}))}return e}const V="--highlight";const q=Object.freeze({highlightMenuItem:"highlightMenuItem",clearHighlight:"clearHighlight"});var Q=babelHelpers.classPrivateFieldLooseKey("menu");var Y=babelHelpers.classPrivateFieldLooseKey("openMenu");var J=babelHelpers.classPrivateFieldLooseKey("highlightedMenuItem");var Z=babelHelpers.classPrivateFieldLooseKey("clearHighlightAfterType");var ee=babelHelpers.classPrivateFieldLooseKey("highlightFirstItemAfterShow");var se=babelHelpers.classPrivateFieldLooseKey("canGoOutFromTop");var ae=babelHelpers.classPrivateFieldLooseKey("keyDownHandler");var le=babelHelpers.classPrivateFieldLooseKey("menuItemMouseEnterHandler");var te=babelHelpers.classPrivateFieldLooseKey("menuItemMouseLeaveHandler");var ie=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnShowHandler");var re=babelHelpers.classPrivateFieldLooseKey("menuItemSubmenuOnCloseHandler");var oe=babelHelpers.classPrivateFieldLooseKey("observeMenuChanges");var ne=babelHelpers.classPrivateFieldLooseKey("handleKeyDown");var be=babelHelpers.classPrivateFieldLooseKey("handleEnterKey");var ce=babelHelpers.classPrivateFieldLooseKey("handleArrowUpKey");var de=babelHelpers.classPrivateFieldLooseKey("handleArrowDownKey");var pe=babelHelpers.classPrivateFieldLooseKey("handleArrowLeftKey");var ve=babelHelpers.classPrivateFieldLooseKey("handleArrowRightKey");var ue=babelHelpers.classPrivateFieldLooseKey("showActiveItemSubmenuIfExist");var he=babelHelpers.classPrivateFieldLooseKey("handleMenuItemEvents");var Pe=babelHelpers.classPrivateFieldLooseKey("unsubscribeMenuItemEvents");var Le=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseEnter");var Fe=babelHelpers.classPrivateFieldLooseKey("handleMenuItemMouseLeave");var He=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnShow");var Be=babelHelpers.classPrivateFieldLooseKey("handleMenuItemSubmenuOnClose");var fe=babelHelpers.classPrivateFieldLooseKey("highlightMenuItem");var ye=babelHelpers.classPrivateFieldLooseKey("getMenuItemBeforeHighlighted");var me=babelHelpers.classPrivateFieldLooseKey("getMenuItemAfterHighlighted");var ge=babelHelpers.classPrivateFieldLooseKey("getHighlightedMenuItemPosition");var _e=babelHelpers.classPrivateFieldLooseKey("clearMenuItemHighlight");var we=babelHelpers.classPrivateFieldLooseKey("clearHighlight");var Oe=babelHelpers.classPrivateFieldLooseKey("scrollToActiveElem");class Ce extends h.EventEmitter{constructor(e){super();Object.defineProperty(this,Oe,{value:qe});Object.defineProperty(this,we,{value:Ve});Object.defineProperty(this,_e,{value:ze});Object.defineProperty(this,ge,{value:Xe});Object.defineProperty(this,me,{value:Ue});Object.defineProperty(this,ye,{value:Ge});Object.defineProperty(this,fe,{value:We});Object.defineProperty(this,Be,{value:$e});Object.defineProperty(this,He,{value:De});Object.defineProperty(this,Fe,{value:Ne});Object.defineProperty(this,Le,{value:Re});Object.defineProperty(this,Pe,{value:Se});Object.defineProperty(this,he,{value:Ae});Object.defineProperty(this,ue,{value:ke});Object.defineProperty(this,ve,{value:Me});Object.defineProperty(this,pe,{value:Ke});Object.defineProperty(this,de,{value:Te});Object.defineProperty(this,ce,{value:je});Object.defineProperty(this,be,{value:xe});Object.defineProperty(this,ne,{value:Ie});Object.defineProperty(this,oe,{value:Ee});Object.defineProperty(this,Q,{writable:true,value:void 0});Object.defineProperty(this,Y,{writable:true,value:void 0});Object.defineProperty(this,J,{writable:true,value:null});Object.defineProperty(this,Z,{writable:true,value:false});Object.defineProperty(this,ee,{writable:true,value:false});Object.defineProperty(this,se,{writable:true,value:false});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,le,{writable:true,value:void 0});Object.defineProperty(this,te,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});Object.defineProperty(this,re,{writable:true,value:void 0});this.setEventNamespace("AI:KeyboardMenu");babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]=e.menu;babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]=e.clearHighlightAfterType;babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]=e.highlightFirstItemAfterShow;babelHelpers.classPrivateFieldLooseBase(this,se)[se]=e.canGoOutFromTop;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=babelHelpers.classPrivateFieldLooseBase(this,ne)[ne].bind(this);babelHelpers.classPrivateFieldLooseBase(this,le)[le]=babelHelpers.classPrivateFieldLooseBase(this,Le)[Le].bind(this);babelHelpers.classPrivateFieldLooseBase(this,te)[te]=babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe].bind(this);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=babelHelpers.classPrivateFieldLooseBase(this,He)[He].bind(this);babelHelpers.classPrivateFieldLooseBase(this,re)[re]=babelHelpers.classPrivateFieldLooseBase(this,Be)[Be].bind(this);const s=babelHelpers.classPrivateFieldLooseBase(this,he)[he].bind(this);babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getPopupWindow().subscribeFromOptions({onAfterShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q];F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getPopupWindow().getPopupContainer(),"--keyboard-control");if(babelHelpers.classPrivateFieldLooseBase(this,ee)[ee]){this.highlightFirstItem();F.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae])}},onAfterClose:()=>{F.Event.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]);babelHelpers.classPrivateFieldLooseBase(this,we)[we]()},onPopupFirstShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuItems().forEach((e=>{s(e)}));babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]()}})}enableArrows(){F.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae])}disableArrows(){F.Event.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae])}getMenu(){return babelHelpers.classPrivateFieldLooseBase(this,Q)[Q]}highlightFirstItem(){const e=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuItems().find((e=>e.delimiter!==true));babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e)}}function Ee(){const e=new MutationObserver((e=>{e.some((e=>{if(e.type==="childList"){babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe](e);babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)}));return true}return false}))}));const s={childList:true,subtree:true};e.observe(babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuContainer(),s)}function Ie(e){var s,a;if((s=babelHelpers.classPrivateFieldLooseBase(this,Q)[Q])!=null&&(a=s.getPopupWindow())!=null&&a.isShown()&&babelHelpers.classPrivateFieldLooseBase(this,Q)[Q].getMenuItems().length>0){switch(e.key){case"Enter":return babelHelpers.classPrivateFieldLooseBase(this,be)[be]();case"ArrowUp":return babelHelpers.classPrivateFieldLooseBase(this,ce)[ce](e);case"ArrowDown":return babelHelpers.classPrivateFieldLooseBase(this,de)[de](e);case"ArrowRight":return babelHelpers.classPrivateFieldLooseBase(this,ve)[ve](e);case"ArrowLeft":return babelHelpers.classPrivateFieldLooseBase(this,pe)[pe](e);default:if(babelHelpers.classPrivateFieldLooseBase(this,Z)[Z]){babelHelpers.classPrivateFieldLooseBase(this,we)[we](true)}}}}function xe(){if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]&&babelHelpers.classPrivateFieldLooseBase(this,J)[J].href){babelHelpers.classPrivateFieldLooseBase(this,J)[J].getContainer().click()}else if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]&&F.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,J)[J].onclick)){babelHelpers.classPrivateFieldLooseBase(this,J)[J].onclick(null,babelHelpers.classPrivateFieldLooseBase(this,J)[J])}}function je(e){var s,a;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,J)[J])==null?void 0:s.closeSubMenu();const l=babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();if(babelHelpers.classPrivateFieldLooseBase(this,se)[se]&&l===null&&((a=babelHelpers.classPrivateFieldLooseBase(this,J)[J])==null?void 0:a.getMenuWindow().getParentMenuItem())===null){babelHelpers.classPrivateFieldLooseBase(this,we)[we]();return}babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](l)}function Te(e){var s;e.preventDefault();(s=babelHelpers.classPrivateFieldLooseBase(this,J)[J])==null?void 0:s.closeSubMenu();const a=babelHelpers.classPrivateFieldLooseBase(this,me)[me]();babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](a)}function Ke(e){e.preventDefault();if(!babelHelpers.classPrivateFieldLooseBase(this,J)[J]){return}const s=babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow().getParentMenuItem();if(s){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](s);s.closeSubMenu()}}function Me(e){e.preventDefault();babelHelpers.classPrivateFieldLooseBase(this,ue)[ue]()}function ke(){var e;if((e=babelHelpers.classPrivateFieldLooseBase(this,J)[J])!=null&&e.hasSubMenu()){babelHelpers.classPrivateFieldLooseBase(this,J)[J].showSubMenu();const e=babelHelpers.classPrivateFieldLooseBase(this,J)[J].getSubMenu();babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e.getMenuItems()[0])}}function Ae(e){e.subscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,le)[le]);e.subscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,te)[te]);e.subscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]);e.subscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,re)[re])}function Se(e){e.unsubscribe("onMouseEnter",babelHelpers.classPrivateFieldLooseBase(this,le)[le]);e.unsubscribe("onMouseLeave",babelHelpers.classPrivateFieldLooseBase(this,te)[te]);e.unsubscribe("SubMenu:onShow",babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]);e.unsubscribe("SubMenu:onClose",babelHelpers.classPrivateFieldLooseBase(this,re)[re])}function Re(e){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](e.getTarget());F.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,ae)[ae])}function Ne(){babelHelpers.classPrivateFieldLooseBase(this,we)[we]()}function De(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=s.getSubMenu();F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getPopupWindow().getPopupContainer(),"--keyboard-control");s.getSubMenu().getMenuItems().forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,he)[he](e)}))}function $e(e){const s=e.getTarget();babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=s.getMenuWindow()}function We(e){var s;if(!e){return}F.Dom.removeClass((s=babelHelpers.classPrivateFieldLooseBase(this,J)[J])==null?void 0:s.getContainer(),V);F.Dom.addClass(e==null?void 0:e.getContainer(),V);babelHelpers.classPrivateFieldLooseBase(this,J)[J]=e;babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]();this.emit(q.highlightMenuItem)}function Ge(){var e;if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]===null){return babelHelpers.classPrivateFieldLooseBase(this,Y)[Y].getMenuItems()[0]}const s=babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]();const a=babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow().getMenuItems();if((e=a[s-1])!=null&&e.delimiter){return a[s-2]||null}return a[s-1]||null}function Ue(){var e,s,a;if(babelHelpers.classPrivateFieldLooseBase(this,J)[J]===null){var l;const e=(l=babelHelpers.classPrivateFieldLooseBase(this,Y)[Y])==null?void 0:l.getMenuItems();return e.find((e=>e.delimiter===false))}const t=babelHelpers.classPrivateFieldLooseBase(this,ge)[ge]();const i=(e=babelHelpers.classPrivateFieldLooseBase(this,J)[J])==null?void 0:(s=e.getMenuWindow())==null?void 0:s.getMenuItems();if((a=i[t+1])!=null&&a.delimiter){return i[t+2]||null}return i[t+1]||null}function Xe(){const e=babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow();return e.getMenuItemPosition(babelHelpers.classPrivateFieldLooseBase(this,J)[J].getId())}function ze(e){F.Dom.removeClass(e==null?void 0:e.getContainer(),V)}function Ve(e=false){if(!babelHelpers.classPrivateFieldLooseBase(this,J)[J]){return}babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](babelHelpers.classPrivateFieldLooseBase(this,J)[J]);if(e&&babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow().getParentMenuItem()){babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow().getParentMenuItem().closeSubMenu()}babelHelpers.classPrivateFieldLooseBase(this,J)[J]=null;this.emit(q.clearHighlight)}function qe(){const e=babelHelpers.classPrivateFieldLooseBase(this,J)[J];const s=babelHelpers.classPrivateFieldLooseBase(this,J)[J].getMenuWindow().getPopupWindow().getContentContainer();const a=F.Dom.getRelativePosition(s,e.getContainer());if(-a.y<0){s.scrollTop-=s.offsetHeight}else if(-a.y+10>a.height){s.scrollTop+=s.offsetHeight}}let Qe=e=>e,Ye,Je,Ze,es,ss,as,ls;const ts=Object.freeze({select:"select",open:"open",close:"close",clearHighlight:"clearHighlight",highlightMenuItem:"highlightMenuItem"});var is=babelHelpers.classPrivateFieldLooseKey("keyboardMenu");var rs=babelHelpers.classPrivateFieldLooseKey("menuItems");var os=babelHelpers.classPrivateFieldLooseKey("cacheable");var ns=babelHelpers.classPrivateFieldLooseKey("keyboardControlOptions");var bs=babelHelpers.classPrivateFieldLooseKey("forceTop");var cs=babelHelpers.classPrivateFieldLooseKey("autoHide");var ds=babelHelpers.classPrivateFieldLooseKey("angle");var ps=babelHelpers.classPrivateFieldLooseKey("bordered");var vs=babelHelpers.classPrivateFieldLooseKey("roleInfo");var us=babelHelpers.classPrivateFieldLooseKey("currentRole");var hs=babelHelpers.classPrivateFieldLooseKey("roleInfoContainer");var Ps=babelHelpers.classPrivateFieldLooseKey("loader");var Ls=babelHelpers.classPrivateFieldLooseKey("removeMenuItemsExceptRoleItem");var Fs=babelHelpers.classPrivateFieldLooseKey("addMenuItems");var Hs=babelHelpers.classPrivateFieldLooseKey("closeAllSubmenus");var Bs=babelHelpers.classPrivateFieldLooseKey("getMenu");var fs=babelHelpers.classPrivateFieldLooseKey("initKeyboardMenu");var ys=babelHelpers.classPrivateFieldLooseKey("isMenuVisible");var ms=babelHelpers.classPrivateFieldLooseKey("scrollForMenuVisibility");var gs=babelHelpers.classPrivateFieldLooseKey("getMenuItems");var _s=babelHelpers.classPrivateFieldLooseKey("getMenuItem");var ws=babelHelpers.classPrivateFieldLooseKey("isSeparatorMenuItem");var Os=babelHelpers.classPrivateFieldLooseKey("getAbilityMenuItem");var Cs=babelHelpers.classPrivateFieldLooseKey("renderFavouriteLabel");var Es=babelHelpers.classPrivateFieldLooseKey("getRoleMenuItem");var Is=babelHelpers.classPrivateFieldLooseKey("getRoleMenuItemHtml");var xs=babelHelpers.classPrivateFieldLooseKey("renderAbilityMenuItemIcon");var js=babelHelpers.classPrivateFieldLooseKey("getCheckIcon");var Ts=babelHelpers.classPrivateFieldLooseKey("getMenuItemClassname");var Ks=babelHelpers.classPrivateFieldLooseKey("handleMenuItemClick");var Ms=babelHelpers.classPrivateFieldLooseKey("showMenuItemLoader");var ks=babelHelpers.classPrivateFieldLooseKey("destroyMenuItemLoader");var As=babelHelpers.classPrivateFieldLooseKey("getSectionSeparatorMenuItem");var Ss=babelHelpers.classPrivateFieldLooseKey("renderSeparatorMenuItemNewLabel");var Rs=babelHelpers.classPrivateFieldLooseKey("renderSeparatorMenuItemLabel");var Ns=babelHelpers.classPrivateFieldLooseKey("initRoleInfoFromOptions");class Ds extends h.EventEmitter{constructor(e){var s,a;super(e);Object.defineProperty(this,Ns,{value:da});Object.defineProperty(this,Rs,{value:ca});Object.defineProperty(this,Ss,{value:ba});Object.defineProperty(this,As,{value:na});Object.defineProperty(this,ks,{value:oa});Object.defineProperty(this,Ms,{value:ra});Object.defineProperty(this,Ks,{value:ia});Object.defineProperty(this,Ts,{value:ta});Object.defineProperty(this,js,{value:la});Object.defineProperty(this,xs,{value:aa});Object.defineProperty(this,Is,{value:sa});Object.defineProperty(this,Es,{value:ea});Object.defineProperty(this,Cs,{value:Zs});Object.defineProperty(this,Os,{value:Js});Object.defineProperty(this,ws,{value:Ys});Object.defineProperty(this,_s,{value:Qs});Object.defineProperty(this,gs,{value:qs});Object.defineProperty(this,ms,{value:Vs});Object.defineProperty(this,ys,{value:zs});Object.defineProperty(this,fs,{value:Xs});Object.defineProperty(this,Bs,{value:Us});Object.defineProperty(this,Hs,{value:Gs});Object.defineProperty(this,Fs,{value:Ws});Object.defineProperty(this,Ls,{value:$s});Object.defineProperty(this,is,{writable:true,value:void 0});Object.defineProperty(this,rs,{writable:true,value:void 0});Object.defineProperty(this,os,{writable:true,value:void 0});Object.defineProperty(this,ns,{writable:true,value:void 0});Object.defineProperty(this,bs,{writable:true,value:true});Object.defineProperty(this,cs,{writable:true,value:false});Object.defineProperty(this,ds,{writable:true,value:void 0});Object.defineProperty(this,ps,{writable:true,value:true});Object.defineProperty(this,vs,{writable:true,value:void 0});Object.defineProperty(this,us,{writable:true,value:void 0});Object.defineProperty(this,hs,{writable:true,value:void 0});Object.defineProperty(this,Ps,{writable:true,value:void 0});this.setEventNamespace("AI.Copilot.Menu");babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]=e.items;babelHelpers.classPrivateFieldLooseBase(this,os)[os]=(s=e.cacheable)!=null?s:true;babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]=e.forceTop===undefined?babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]:e.forceTop===true;babelHelpers.classPrivateFieldLooseBase(this,cs)[cs]=e.autoHide===true;babelHelpers.classPrivateFieldLooseBase(this,ds)[ds]=e.angle;babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]=(a=e.bordered)!=null?a:babelHelpers.classPrivateFieldLooseBase(this,ps)[ps];babelHelpers.classPrivateFieldLooseBase(this,Ns)[Ns](e.roleInfo);if(e.keyboardControlOptions){babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]=e.keyboardControlOptions}else{babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]={canGoOutFromTop:true,highlightFirstItemAfterShow:false,clearHighlightAfterType:false}}}open(){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().show();this.adjustPosition();this.emit(ts.open)}show(){var e,s,a;F.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border",null);(s=this.getPopup())==null?void 0:s.setMaxWidth(null);(a=this.getPopup())==null?void 0:a.setMinWidth(258);this.adjustPosition();this.enableArrowsKey()}close(){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().close();babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]();this.emit(ts.close)}hide(){var e,s,a;F.Dom.style((e=this.getPopup())==null?void 0:e.getPopupContainer(),"border","none");(s=this.getPopup())==null?void 0:s.setMaxWidth(0);(a=this.getPopup())==null?void 0:a.setMinWidth(0);this.adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,Hs)[Hs]();this.disableArrowsKey()}contains(e){for(const l of babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems()){var s,a;const t=(s=l.getSubMenu())==null?void 0:s.getPopupWindow();if(t!=null&&(a=t.getPopupContainer())!=null&&a.contains(e)){return true}}return this.getPopup().getPopupContainer().contains(e)}isShown(){var e,s,a;return(e=babelHelpers.classPrivateFieldLooseBase(this,is)[is])==null?void 0:(s=e.getMenu())==null?void 0:(a=s.getPopupWindow())==null?void 0:a.isShown()}setBindElement(e,s){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().setBindElement(e);babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().setOffset({offsetLeft:s==null?void 0:s.left,offsetTop:s==null?void 0:s.top});babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().adjustPosition()}getPopup(){return babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow()}adjustPosition(){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().adjustPosition({forceBindPosition:true,forceTop:babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]})}replaceMenuItemSubmenu(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems().find((s=>e.code===s.getId()));s.destroySubMenu();s._items=babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](e.children,true);s.addSubMenu(babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](e.children,true))}enableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,is)[is])==null?void 0:e.enableArrows()}disableArrowsKey(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,is)[is])==null?void 0:e.disableArrows()}markMenuItemSelected(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItem(e);const a=s.getContainer().querySelector(".ai__copilot-menu_item");F.Dom.addClass(a,"--selected")}unmarkMenuItemSelected(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItem(e);const a=s.getContainer().querySelector(".ai__copilot-menu_item");F.Dom.removeClass(a,"--selected")}updateRoleInfo(e){babelHelpers.classPrivateFieldLooseBase(this,us)[us].avatar=e.avatar;babelHelpers.classPrivateFieldLooseBase(this,us)[us].name=e.name}setItemIsFavourite(e,s){var a;const l=(a=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItem(e))==null?void 0:a.getContainer();if(!l){return}const t=l.querySelector(".ai__copilot-menu_item-favourite");if(!t){return}F.Dom.replace(t,babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs](e,s))}insertItemBefore(e,s){const a=babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](s,false);babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().addMenuItem(a,e)}insertItemAfterRole(e){const s=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItemPosition("role-item");const a=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems()[s+1];this.insertItemBefore(a.getId(),e)}insertItemAfter(e,s){const a=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems()[babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItemPosition(e)+1];this.insertItemBefore(a.getId(),s)}removeItem(e){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().removeMenuItem(e)}setLoader(){var e;const s=(e=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow())==null?void 0:e.getPopupContainer();if(!s){return}const a=F.Tag.render(Ye||(Ye=Qe`<div class="ai__copilot-menu-popup_fade"></div>`));F.Dom.append(a,s);babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=new r.Loader({size:55,target:s,color:getComputedStyle(document.body).getPropertyValue("--ui-color-copilot-primary")||"#8e52ec"});babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].show()}removeLoader(){var e;const s=(e=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow())==null?void 0:e.getPopupContainer();if(!s){return}const a=s.querySelector(".ai__copilot-menu-popup_fade");F.Dom.remove(a);babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps].destroy();babelHelpers.classPrivateFieldLooseBase(this,Ps)[Ps]=null}updateMenuItemsExceptRoleItem(e){babelHelpers.classPrivateFieldLooseBase(this,Ls)[Ls]();babelHelpers.classPrivateFieldLooseBase(this,Fs)[Fs](e)}}function $s(){const e=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems();e.forEach((e=>{const s=e.getId();if(s==="role-item"){return}requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().removeMenuItem(s)}))}))}function Ws(e){const s=babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](e);s.forEach((e=>{requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().addMenuItem(e)}))}))}function Gs(){babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getMenuItems().forEach((e=>{e.closeSubMenu()}))}function Us(){if(!babelHelpers.classPrivateFieldLooseBase(this,is)[is]){babelHelpers.classPrivateFieldLooseBase(this,fs)[fs]()}return babelHelpers.classPrivateFieldLooseBase(this,is)[is].getMenu()}function Xs(){const e=new P.Menu({minWidth:258,maxHeight:372,angle:babelHelpers.classPrivateFieldLooseBase(this,ds)[ds],closeByEsc:false,closeIcon:false,items:babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](babelHelpers.classPrivateFieldLooseBase(this,rs)[rs]),toFrontOnShow:true,autoHide:babelHelpers.classPrivateFieldLooseBase(this,cs)[cs],className:`ai__copilot-scope ai__copilot-menu-popup ${babelHelpers.classPrivateFieldLooseBase(this,ps)[ps]?"--bordered":""}`,cacheable:babelHelpers.classPrivateFieldLooseBase(this,os)[os],events:{onPopupClose:e=>{this.emit(ts.close);F.Dom.style(e.getPopupContainer(),"border","none")},onPopupAfterClose:e=>{F.Dom.style(e.getPopupContainer(),"border",null)},onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,bs)[bs]&&babelHelpers.classPrivateFieldLooseBase(this,ys)[ys]()===false){babelHelpers.classPrivateFieldLooseBase(this,ms)[ms]()}}}});const s=new Ce({menu:e,...babelHelpers.classPrivateFieldLooseBase(this,ns)[ns]});s.subscribe(q.clearHighlight,(()=>{this.emit(ts.clearHighlight)}));s.subscribe(q.highlightMenuItem,(()=>{this.emit(ts.highlightMenuItem)}));babelHelpers.classPrivateFieldLooseBase(this,is)[is]=s}function zs(){const e=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().getPopupContainer();const s=e.getBoundingClientRect();return s.bottom<window.innerHeight}function Vs(){const e=babelHelpers.classPrivateFieldLooseBase(this,Bs)[Bs]().getPopupWindow().getPopupContainer();const s=F.Dom.getPosition(e);window.scrollTo({top:s.bottom+20-window.innerHeight,behavior:"smooth"});if(s.bottom>document.body.scrollHeight){F.Dom.style(document.body,"min-height",`${s.bottom}px`)}}function qs(e,s=false){if(!e){return[]}const a=e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,_s)[_s](e,s)));if(babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]&&s===false){a.unshift(babelHelpers.classPrivateFieldLooseBase(this,Es)[Es]())}return a}function Qs(e,s){return babelHelpers.classPrivateFieldLooseBase(this,ws)[ws](e)?babelHelpers.classPrivateFieldLooseBase(this,As)[As](e):babelHelpers.classPrivateFieldLooseBase(this,Os)[Os](e,s)}function Ys(e){return e.separator}function Js(e,s=false){const a=babelHelpers.classPrivateFieldLooseBase(this,xs)[xs](e);const l=babelHelpers.classPrivateFieldLooseBase(this,js)[js]();const t=e.icon?F.Tag.render(Je||(Je=Qe`<div class="ai__copilot-menu_item-icon">${0}</div>`),a):null;const r=e.labelText?new i.Label({text:e.labelText,color:i.LabelColor.PRIMARY,fill:true,size:i.LabelSize.SM}).render():null;const o=r?F.Tag.render(`<div>${r}</div>`):null;const n=F.Type.isBoolean(e.isFavourite)?babelHelpers.classPrivateFieldLooseBase(this,Cs)[Cs](e.code,e.isFavourite):null;const b=F.Tag.render(Ze||(Ze=Qe`
			<div class="${0}">
				<div class="ai__copilot-menu_item-left">
					${0}
					<div class="ai__copilot-menu_item-text">${0}</div>
				</div>
				<div class="ai__copilot-menu_item-right">
					${0}
					<div class="ai__copilot-menu_item-check">
						${0}
					</div>
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ts)[Ts](e,s,e.selected),t,F.Text.encode(e.text),n,l.render(),o);return{html:b,id:e.id||"",text:e.text,href:e.href,className:`menu-popup-no-icon ${e.arrow?"menu-popup-item-submenu":""}`,onclick:babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](e.command).bind(this),items:babelHelpers.classPrivateFieldLooseBase(this,gs)[gs](e.children,true),cacheable:false,disabled:e.disabled}}function Zs(e,s=false){const a=new L.Icon({icon:L.Main.BOOKMARK_1,size:24});const l=`ai__copilot-menu_item-favourite ${s?"--is-favourite":""}`;const t=s?F.Loc.getMessage("AI_COPILOT_REMOVE_PROMPT_FROM_FAVOURITE"):F.Loc.getMessage("AI_COPILOT_ADD_PROMPT_TO_FAVOURITE");const i=F.Tag.render(es||(es=Qe`
			<div title="${0}" class="${0}">
				${0}
			</div>
		`),t,l,a.render());F.bind(i,"click",(a=>{a.preventDefault();a.stopImmediatePropagation();const l=!s;this.emit("set-favourite",{promptCode:e,isFavourite:l})}));return i}function ea(){return{id:"role-item",html:babelHelpers.classPrivateFieldLooseBase(this,Is)[Is](),className:`menu-popup-no-icon ${babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].onclick?"menu-popup-item-submenu":""} --role-item`,onclick:babelHelpers.classPrivateFieldLooseBase(this,Ks)[Ks](babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].onclick).bind(this)}}function sa(){if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]){return babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]}const{name:e,avatar:s}=babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].role;const a=babelHelpers.classPrivateFieldLooseBase(this,vs)[vs].subtitle;babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]=F.Tag.render(ss||(ss=Qe`
			<div class="ai__copilot-menu_item">
				<div class="ai__copilot-menu_role">
					<div class="ai__copilot-menu_role-left">
						<img class="ai__copilot-menu_role-avatar" src="${0}" alt="">
					</div>
					<div class="ai__copilot-menu_role-right">
						<span
							class="ai__copilot-menu_role-title"
							title="${0}"
						>
							${0}
						</span>
						<span class="ai__copilot-menu_role-subtitle">${0}</span>
					</div>
				</div>
			</div>
		`),s.small,e,e,a);return babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]}function aa(e){let s=null;if(e.icon){try{const a=new L.Icon({size:24,icon:e.icon||undefined});s=a.render()}catch{s=null}}return s}function la(){const e=getComputedStyle(document.body).getPropertyValue("--ui-color-link-primary-base");return new L.Icon({icon:L.Main.CHECK,size:18,color:e})}function ta(e,s){let a=["ai__copilot-menu_item"];if(s){a=[...a,"--no-icon"]}if(e.notHighlight){a=[...a,"--system"]}if(e.highlightText){a=[...a,"--highlight-text"]}if(e.selected){a=[...a,"--selected"]}if(e.isShowFavouriteIconOnHover){a=[...a,"--favourite-icon-on-hover"]}return a.join(" ")}function ia(e){return async(s,a)=>{var l,t;if(a!=null&&a.hasSubMenu()){return}(l=a.getMenuWindow())==null?void 0:(t=l.getParentMenuItem())==null?void 0:t.closeSubMenu();if(a.href){return}babelHelpers.classPrivateFieldLooseBase(this,Ms)[Ms](a);if(F.Type.isFunction(e)){await e(s,a,this)}else{await(e==null?void 0:e.execute())}babelHelpers.classPrivateFieldLooseBase(this,ks)[ks](a)}}function ra(e){const s=18;const a=getComputedStyle(document.body.querySelector(".ai__copilot-scope")).getPropertyValue("--ai__copilot_color-main");const l=F.Tag.render(as||(as=Qe`<div class="ai__copilot-menu_item-loader"></div>`));const t=e.getContainer().querySelector(".ai__copilot-menu_item-right");F.Dom.addClass(e.getContainer(),"menu-popup-item-loading");F.Dom.append(l,t);const i=new r.Loader({size:s,target:l,color:a});i.show()}function oa(e){const s=e.getContainer().querySelector(".ai__copilot-menu_item-loader");F.Dom.removeClass(e.getContainer(),"menu-popup-item-loading");F.Dom.remove(s)}function na(e){return{id:e.code||e.title||"",text:e.title,title:e.title,delimiter:true,html:e.title?`\n\t\t\t\t\t<span>${e.title}</span>\n\t\t\t\t\t${e.isNew?babelHelpers.classPrivateFieldLooseBase(this,Ss)[Ss]().outerHTML:""}\n\t\t\t\t`:undefined}}function ba(){return babelHelpers.classPrivateFieldLooseBase(this,Rs)[Rs](F.Loc.getMessage("AI_COPILOT_MENU_ITEM_LABEL_NEW"))}function ca(e){const s=new i.Label({text:e,color:i.Label.Color.PRIMARY,size:i.Label.Size.SM,fill:true});return F.Tag.render(ls||(ls=Qe`<span class="ai__copilot-menu_delimiter-label">${0}</span>`),s.render().outerHTML)}function da(e){if(e){babelHelpers.classPrivateFieldLooseBase(this,vs)[vs]=e;babelHelpers.classPrivateFieldLooseBase(this,us)[us]=new Proxy(e.role,{set:(e,s,a)=>{if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]&&s==="name"){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector(".ai__copilot-menu_role-title");F.Dom.attr(e,"title",a);e.innerText=a}if(babelHelpers.classPrivateFieldLooseBase(this,hs)[hs]&&s==="avatar"){const e=babelHelpers.classPrivateFieldLooseBase(this,hs)[hs].querySelector(".ai__copilot-menu_role-avatar");e.src=a.small}return Reflect.set(e,s,a)}})}}class pa{execute(){throw new Error("You must implement this method.")}}class va extends h.EventEmitter{constructor(e){var s;super();this.id="";this.setEventNamespace("AI.CopilotMenuItem");if(e.id){this.id=e.id}this.code=e.code;this.text=e.text;this.icon=e.icon;this.href=e.href;this.children=(s=e.children)!=null?s:[];this.onClick=e.onClick;this.disabled=e.disabled}getOptions(){return{id:this.id,code:this.code,text:this.text,icon:this.icon,href:this.href,command:this.onClick,disabled:this.disabled,children:this.children.map((e=>{if(e instanceof va){return e.getOptions()}return e}))}}}let ua=e=>e,ha;var Pa=babelHelpers.classPrivateFieldLooseKey("container");var La=babelHelpers.classPrivateFieldLooseKey("rawResult");class Fa{constructor(){Object.defineProperty(this,Pa,{writable:true,value:void 0});Object.defineProperty(this,La,{writable:true,value:void 0})}render(){babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa]=F.Tag.render(ha||(ha=ua`<div class="ai__copilot-result"></div>`));babelHelpers.classPrivateFieldLooseBase(this,La)[La]="";return babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa]}addResult(e){babelHelpers.classPrivateFieldLooseBase(this,La)[La]=e;babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa].innerHTML+=String(F.Text.encode(e).replaceAll(/(\r\n|\r|\n)/g,"<br>"))}clearResult(){babelHelpers.classPrivateFieldLooseBase(this,La)[La]="";babelHelpers.classPrivateFieldLooseBase(this,Pa)[Pa].innerHTML=""}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,La)[La]}}let Ha=e=>e,Ba;const fa=e=>{const s=e.target;const a=e.text;return new P.Popup({content:F.Tag.render(Ba||(Ba=Ha`<div style="padding-right: 20px;">${0}</div>`),a),darkMode:true,borderRadius:"4px",animation:"fading-slide",autoHide:true,events:{onPopupShow:ya(s)}})};const ya=e=>s=>{const a=F.Dom.getPosition(e);const l=F.Dom.getPosition(s.getPopupContainer());const t=P.Popup.getOption("angleLeftOffset");s.setAngle({offset:l.width/2-a.width/2-4});s.setBindElement({left:a.left-l.width/2+a.width/2+t,top:a.bottom});s.adjustPosition({forceBindPosition:true,forceLeft:true,forceTop:true})};var ma=babelHelpers.classPrivateFieldLooseKey("popup");class ga{constructor(e){Object.defineProperty(this,ma,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,ma)[ma]=fa(e)}static addHintOnTargetHover(e){const s=fa(e);const a=e.target;F.Event.bind(a,"mouseenter",(()=>{s.show()}));F.Event.bind(a,"mouseleave",(()=>{s.close()}))}show(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ma)[ma])==null?void 0:e.show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,ma)[ma])==null?void 0:e.close()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,ma)[ma])==null?void 0:e.isShown())}}function _a(e,s){const a=document.createRange();a.selectNode(e);a.setStart(e,0);let l=0;const t=[e];while(t.length>0){const e=t.pop();if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.length;if(l+t>=s){a.setStart(e,s-l);a.setEnd(e,s-l);return a}l+=t}else if(e.childNodes&&e.childNodes.length>0){for(let s=e.childNodes.length-1;s>=0;s--){t.push(e.childNodes[s])}}}a.setStart(e,e.childNodes.length);a.setEnd(e,e.childNodes.length);return a}function wa(e,s){const a=_a(e,s);const l=window.getSelection();l.removeAllRanges();l.addRange(a)}function Oa(e){const s=window.getSelection();const a=s.getRangeAt(0);const l=a.cloneRange();l.selectNodeContents(e);l.setEnd(a.endContainer,a.endOffset);return l.toString().length}let Ca=e=>e,Ea;var Ia=babelHelpers.classPrivateFieldLooseKey("container");var xa=babelHelpers.classPrivateFieldLooseKey("observeRemovingStrongTagAfterDeletingBracket");var ja=babelHelpers.classPrivateFieldLooseKey("handlePasteEvent");var Ta=babelHelpers.classPrivateFieldLooseKey("handleInputEvent");class Ka extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Ta,{value:Aa});Object.defineProperty(this,ja,{value:ka});Object.defineProperty(this,xa,{value:Ma});Object.defineProperty(this,Ia,{writable:true,value:void 0});this.value="";this.setEventNamespace("AI.CopilotInputFieldTextarea")}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]}render(){babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]=F.Tag.render(Ea||(Ea=Ca`
			<div
				class="ai__copilot_input"
				contenteditable="true"></div>
		`));const e=new MutationObserver(babelHelpers.classPrivateFieldLooseBase(this,xa)[xa].bind(this));e.observe(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],{childList:true,subtree:true,characterDataOldValue:true});F.bind(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],"input",babelHelpers.classPrivateFieldLooseBase(this,Ta)[Ta].bind(this));F.bind(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],"paste",babelHelpers.classPrivateFieldLooseBase(this,ja)[ja].bind(this));F.bind(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],"focus",(e=>{this.emit("focus")}));return babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]}set value(e){if(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia]){babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia].innerText=e}}get value(){return babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia].innerText}get disabled(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia])==null?void 0:e.getAttribute("contenteditable"))==="false"}set disabled(e){if(e===false){F.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],"contenteditable",true)}else{F.Dom.attr(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],"contenteditable",false)}}focus(e){var s;const a=e?0:999;(s=babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia])==null?void 0:s.focus();this.setCursorPosition(a)}getComputedStyle(){return getComputedStyle(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia])}addClass(e){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],e)}removeClass(e){F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],e)}setStyle(e,s){F.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],e,s)}get scrollHeight(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia])==null?void 0:e.scrollHeight)||0}isCursorInTheEnd(){const e=this.getCursorPosition();const s=babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia].innerText.length;return e>=s}getCursorPosition(){return Oa(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia])}setCursorPosition(e){wa(babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia],e)}setHtmlContent(e){babelHelpers.classPrivateFieldLooseBase(this,Ia)[Ia].innerHTML=e;this.focus();this.emit("input",this.value)}}function Ma(e){for(const a of e){var s;if(((s=a.target.parentElement)==null?void 0:s.tagName)!=="STRONG"){continue}const e=a.target.nodeValue||"";const l=[...e].indexOf("[");const t=[...e].indexOf("]");if(t===-1||l===-1){const e=this.getCursorPosition();a.target.parentElement.replaceWith(...a.target.parentElement.childNodes);this.setCursorPosition(e)}}}function ka(e){e.preventDefault();const s=e.clipboardData.getData("text/plain");document.execCommand("insertText",false,s)}function Aa(e){var s;if(e.inputType==="deleteContentBackward"||e.inputType==="deleteWordBackward"||e.inputType==="deleteContentForward"){this.emit("input",this.value);return}const a=window.getSelection();const l=this.getCursorPosition();if(((s=a.anchorNode.parentElement)==null?void 0:s.tagName)==="STRONG"&&a.focusOffset===a.anchorNode.length&&a.anchorNode.textContent.at(0)==="["){let s=a.anchorNode.parentElement.nextSibling;if(!s||s.nodeName==="BR"){s=document.createTextNode(" ");F.Dom.insertAfter(s,a.anchorNode.parentElement)}a.anchorNode.textContent=a.anchorNode.textContent.slice(0,-e.data.length);s.textContent=e.data+s.textContent;this.setCursorPosition(l);e.preventDefault();e.stopPropagation();return}this.emit("input",this.value)}var Sa="18";var Ra="5.9.6";var Na=60;var Da=0;var $a=539;var Wa=210;var Ga=210;var Ua=0;var Xa=[];var za=[{nm:"[FRAME] 18 - Null / left-star - Null / left-star / right-star - Null / right-star / round - Null / round / Ellipse 2 - Null / Ellipse 2 - Stroke",fr:60,id:"lo8h9rmzawnjrpxsxm9",layers:[{ty:3,ddd:0,ind:4,hd:false,nm:"18 - Null",ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[0,0]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:3,ddd:0,ind:5,hd:false,nm:"left-star - Null",parent:4,ks:{a:{a:0,k:[37.7244,37.5291]},o:{a:0,k:100},p:{a:0,k:[95.78874400000001,95.16759099999999]},r:{a:0,k:0},s:{a:0,k:[101,101]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:6,hd:false,nm:"left-star",parent:5,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:25.89,s:[{c:true,v:[[39.4485,.9376],[36.0004,.9376],[29.4602,18.5122],[18.5993,29.3117],[.9248,35.8149],[.9248,39.2435],[18.5994,45.7467],[29.4603,56.5462],[36.0005,74.1208],[39.4486,74.1208],[45.9888,56.5462],[56.8497,45.7467],[74.5243,39.2435],[74.5243,35.8149],[56.8498,29.3117],[45.9889,18.5122],[39.4485,.9376]],i:[[0,0],[.5922,-1.5914],[0,0],[5.0318,-1.8514],[0,0],[-1.6004,-.5889],[0,0],[-1.8619,-5.0033],[0,0],[-.5922,1.5914],[0,0],[-5.0318,1.8514],[0,0],[1.6004,.5889],[0,0],[1.8619,5.0033],[0,0]],o:[[-.5922199999999975,-1.5914],[0,0],[-1.8619200000000014,5.003299999999999],[0,0],[-1.60045,.58887],[0,0],[5.031760000000002,1.851390000000002],[0,0],[.5922199999999975,1.591399999999993],[0,0],[1.8619199999999978,-5.003300000000003],[0,0],[1.600449999999995,-.58887],[0,0],[-5.031770000000002,-1.8513899999999985],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:145.224,s:[{c:true,v:[[38.4952,21.1678],[36.9535,21.1678],[34.0294,29.026],[29.1734,33.8548],[21.271,36.7626],[21.271,38.2956],[29.1734,41.2034],[34.0294,46.0322],[36.9536,53.8904],[38.4953,53.8904],[41.4194,46.0322],[46.2754,41.2034],[54.1778,38.2956],[54.1778,36.7626],[46.2754,33.8548],[41.4194,29.026],[38.4952,21.1678]],i:[[0,0],[.2648,-.7116],[0,0],[2.2497,-.8278],[0,0],[-.7156,-.2633],[0,0],[-.8325,-2.2371],[0,0],[-.2648,.7116],[0,0],[-2.2497,.8278],[0,0],[.7156,.2633],[0,0],[.8325,2.2371],[0,0]],o:[[-.26478999999999786,-.7115700000000018],[0,0],[-.8324799999999968,2.2371499999999997],[0,0],[-.7155699999999996,.263300000000001],[0,0],[2.2497299999999996,.8278200000000027],[0,0],[.26478999999999786,.7115700000000018],[0,0],[.8324799999999968,-2.2371499999999997],[0,0],[.7155699999999996,-.263300000000001],[0,0],[-2.2497299999999996,-.8278200000000027],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:245.88,s:[{c:true,v:[[39.3124,3.8283],[36.1365,3.8283],[30.1127,20.0145],[20.1092,29.9608],[3.83,35.9502],[3.83,39.1079],[20.1092,45.0973],[30.1127,55.0436],[36.1366,71.2297],[39.3125,71.2297],[45.3363,55.0435],[55.3398,45.0972],[71.619,39.1078],[71.619,35.9501],[55.3398,29.9607],[45.3363,20.0144],[39.3124,3.8283]],i:[[0,0],[.5455,-1.4657],[0,0],[4.6345,-1.7051],[0,0],[-1.4741,-.5423],[0,0],[-1.7149,-4.608],[0,0],[-.5455,1.4657],[0,0],[-4.6345,1.7051],[0,0],[1.4741,.5423],[0,0],[1.7149,4.608],[0,0]],o:[[-.5454700000000017,-1.4656800000000003],[0,0],[-1.714929999999999,4.608029999999999],[0,0],[-1.4741,.542349999999999],[0,0],[4.634520000000002,1.705129999999997],[0,0],[.5454700000000017,1.465680000000006],[0,0],[1.7149300000000025,-4.608029999999999],[0,0],[1.4740999999999929,-.542349999999999],[0,0],[-4.634520000000002,-1.7051300000000005],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:356.178,s:[{c:true,v:[[38.4728,21.6471],[36.9761,21.6471],[34.1372,29.2751],[29.4227,33.9624],[21.7506,36.785],[21.7506,38.2731],[29.4228,41.0957],[34.1373,45.7831],[36.9763,53.4111],[38.4731,53.4111],[41.3121,45.7831],[46.0266,41.0958],[53.6988,38.2732],[53.6988,36.7851],[46.0266,33.9625],[41.3121,29.2751],[38.4728,21.6471]],i:[[0,0],[.2571,-.6907],[0,0],[2.1842,-.8036],[0,0],[-.6947,-.2556],[0,0],[-.8082,-2.1716],[0,0],[-.2571,.6907],[0,0],[-2.1842,.8036],[0,0],[.6947,.2556],[0,0],[.8082,2.1716],[0,0]],o:[[-.2570699999999988,-.6907199999999989],[0,0],[-.8082199999999986,2.1716000000000015],[0,0],[-.6947200000000002,.255589999999998],[0,0],[2.1841800000000013,.8035700000000006],[0,0],[.2570699999999988,.6907199999999989],[0,0],[.8082199999999986,-2.171599999999998],[0,0],[.6947199999999967,-.255589999999998],[0,0],[-2.184179999999998,-.8035700000000006],[0,0],[0,0]]}],o:{x:[.3],y:[0]},i:{x:[1],y:[1]}},{t:474.312,s:[{c:true,v:[[39.4485,.9397],[36.0004,.9397],[29.4602,18.5132],[18.5993,29.3121],[.9248,35.8149],[.9248,39.2433],[18.5994,45.7461],[29.4603,56.545],[36.0005,74.1185],[39.4486,74.1185],[45.9888,56.545],[56.8497,45.7462],[74.5243,39.2434],[74.5243,35.815],[56.8498,29.3122],[45.9889,18.5133],[39.4485,.9397]],i:[[0,0],[.5922,-1.5913],[0,0],[5.0318,-1.8513],[0,0],[-1.6004,-.5888],[0,0],[-1.8619,-5.003],[0,0],[-.5922,1.5913],[0,0],[-5.0318,1.8513],[0,0],[1.6004,.5888],[0,0],[1.8619,5.003],[0,0]],o:[[-.5922199999999975,-1.59131],[0,0],[-1.8619200000000014,5.00301],[0,0],[-1.60045,.5888399999999976],[0,0],[5.031760000000002,1.8512800000000027],[0,0],[.5922199999999975,1.591310000000007],[0,0],[1.8619199999999978,-5.003],[0,0],[1.600449999999995,-.5888399999999976],[0,0],[-5.031770000000002,-1.8512799999999991],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:7,hd:false,nm:"right-star - Null",parent:4,ks:{a:{a:0,k:[21.7973,21.6844]},o:{a:0,k:100},p:{a:0,k:[128.4094,121.8898]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:8,hd:false,nm:"right-star",parent:7,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:1,k:[{t:66.27,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:156.072,s:[{c:true,v:[[23.2285,-8.7091],[20.3661,-8.7091],[14.9369,5.8887],[5.9209,14.8589],[-8.7513,20.2606],[-8.7513,23.1084],[5.9209,28.5101],[14.9369,37.4804],[20.3661,52.0782],[23.2285,52.0782],[28.6577,37.4805],[37.6737,28.5103],[52.3459,23.1086],[52.3459,20.2608],[37.6737,14.8591],[28.6577,5.8889],[23.2285,-8.7091]],i:[[0,0],[.4916,-1.3218],[0,0],[4.177,-1.5378],[0,0],[-1.3286,-.4891],[0,0],[-1.5456,-4.1558],[0,0],[-.4916,1.3218],[0,0],[-4.177,1.5378],[0,0],[1.3286,.4891],[0,0],[1.5456,4.1558],[0,0]],o:[[-.49162000000000106,-1.32184],[0,0],[-1.5456400000000006,4.155840000000001],[0,0],[-1.3285900000000002,.4891299999999994],[0,0],[4.17703,1.5378000000000007],[0,0],[.49162000000000106,1.3218499999999977],[0,0],[1.5456399999999988,-4.155839999999998],[0,0],[1.3285699999999991,-.4891299999999994],[0,0],[-4.177030000000002,-1.5378000000000007],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:283.854,s:[{c:true,v:[[22.5686,5.3037],[21.026,5.3037],[18.1001,13.1712],[13.2413,18.0057],[5.3343,20.9169],[5.3343,22.4517],[13.2413,25.3629],[18.1001,30.1974],[21.026,38.0649],[22.5686,38.0649],[25.4945,30.1974],[30.3533,25.3629],[38.2603,22.4517],[38.2603,20.9169],[30.3533,18.0057],[25.4945,13.1712],[22.5686,5.3037]],i:[[0,0],[.2649,-.7124],[0,0],[2.251,-.8288],[0,0],[-.716,-.2636],[0,0],[-.833,-2.2398],[0,0],[-.2649,.7124],[0,0],[-2.251,.8288],[0,0],[.716,.2636],[0,0],[.833,2.2398],[0,0]],o:[[-.2649399999999993,-.7124100000000002],[0,0],[-.8329599999999999,2.2398000000000007],[0,0],[-.7159899999999997,.2636199999999995],[0,0],[2.251050000000001,.8288000000000011],[0,0],[.2649399999999993,.7124099999999984],[0,0],[.8329599999999999,-2.239799999999999],[0,0],[.7159800000000018,-.2636199999999995],[0,0],[-2.2510499999999993,-.8288000000000011],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:379.08,s:[{c:true,v:[[23.233,-8.8011],[20.3615,-8.8011],[14.9151,5.8409],[5.8706,14.8383],[-8.8481,20.2563],[-8.8481,23.1128],[5.8706,28.5308],[14.9152,37.5282],[20.3616,52.1701],[23.2331,52.1701],[28.6795,37.5282],[37.7241,28.5308],[52.4428,23.1128],[52.4428,20.2563],[37.7241,14.8383],[28.6795,5.8409],[23.233,-8.8011]],i:[[0,0],[.4932,-1.3258],[0,0],[4.1903,-1.5425],[0,0],[-1.3328,-.4906],[0,0],[-1.5505,-4.1684],[0,0],[-.4932,1.3259],[0,0],[-4.1903,1.5425],[0,0],[1.3328,.4906],[0,0],[1.5505,4.1684],[0,0]],o:[[-.49317999999999884,-1.3258399999999995],[0,0],[-1.5505399999999998,4.16842],[0,0],[-1.3328000000000007,.4906100000000002],[0,0],[4.19027,1.5424499999999988],[0,0],[.49317999999999884,1.3258500000000026],[0,0],[1.5505400000000016,-4.168419999999998],[0,0],[1.3327799999999996,-.4906100000000002],[0,0],[-4.190269999999998,-1.5424500000000005],[0,0],[0,0]]}],o:{x:[0],y:[0]},i:{x:[0],y:[1]}},{t:472.04999999999995,s:[{c:true,v:[[22.6367,3.8608],[20.958,3.8608],[17.774,12.4213],[12.4865,17.6817],[3.8818,20.8494],[3.8818,22.5195],[12.4865,25.6872],[17.774,30.9476],[20.958,39.5081],[22.6367,39.5081],[25.8207,30.9476],[31.1083,25.6872],[39.713,22.5195],[39.713,20.8495],[31.1083,17.6818],[25.8208,12.4214],[22.6367,3.8608]],i:[[0,0],[.2883,-.7752],[0,0],[2.4497,-.9018],[0,0],[-.7792,-.2868],[0,0],[-.9065,-2.4371],[0,0],[-.2883,.7752],[0,0],[-2.4497,.9018],[0,0],[.7792,.2868],[0,0],[.9065,2.4371],[0,0]],o:[[-.2883199999999988,-.7751600000000001],[0,0],[-.9064599999999992,2.4370899999999995],[0,0],[-.7791700000000001,.28684000000000154],[0,0],[2.4496800000000007,.9018100000000011],[0,0],[.2883199999999988,.7751700000000028],[0,0],[.9064599999999992,-2.4370900000000013],[0,0],[.7791599999999974,-.28684000000000154],[0,0],[-2.4496800000000007,-.9018100000000011],[0,0],[0,0]]}]}]}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[1,1,1,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:9,hd:false,nm:"round - Null",parent:4,ks:{a:{a:0,k:[0,0]},o:{a:0,k:100},p:{a:0,k:[42.3225,39.1459]},r:{a:0,k:0},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ty:4,ddd:0,ind:10,hd:false,nm:"round",parent:9,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[65.2256,129.7757],[130.4512,64.8878],[65.2256,-1e-4],[0,64.8878],[65.2256,129.7757],[65.2256,129.7757]],i:[[0,0],[0,35.8366],[36.0231,0],[0,-35.8366],[-36.0231,0],[0,0]],o:[[36.023129999999995,0],[0,-35.83657],[-36.02312,0],[0,35.836569999999995],[0,0],[0,0]]}}},{ty:"fl",o:{a:0,k:100},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},nm:"Fill",hd:false,r:2},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]},{ty:3,ddd:0,ind:11,hd:false,nm:"Ellipse 2 - Null",parent:4,ks:{a:{a:0,k:[91.5,91.5]},o:{a:0,k:100},p:{a:0,k:[106.27800025906815,104.90813283170486]},r:{a:1,k:[{t:107.532,s:[-179],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:227.298,s:[-70],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:360.204,s:[-104.87],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:442.95000000000005,s:[17.67],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:537,s:[181]}]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0}},st:0,ip:0,op:540,bm:0,sr:1},{ddd:0,ind:12,hd:false,nm:"Ellipse 2 - Stroke",parent:11,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},st:0,ip:0,op:540,bm:0,sr:1,ty:4,shapes:[{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"sh",nm:"Path",hd:false,ks:{a:0,k:{c:true,v:[[183,91.5],[91.5,183],[0,91.5],[91.5,0],[183,91.5],[183,91.5]],i:[[0,0],[50.5355,0],[0,50.5355],[-50.5355,0],[0,-50.5355],[0,0]],o:[[0,50.53550000000001],[-50.5355,0],[0,-50.5355],[50.53550000000001,0],[0,0],[0,0]]}}},{ty:"st",o:{a:0,k:100},w:{a:0,k:22},c:{a:0,k:[.5764705882352941,.3568627450980392,.9254901960784314,1]},ml:4,lc:2,lj:2,nm:"Stroke",hd:false,d:[{n:"o",nm:"Offset",v:{a:0,k:60}},{n:"d",nm:"Dash",v:{a:1,k:[{t:6.702,s:[277],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:155.184,s:[133.4122],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:226.644,s:[133.4122],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:294.36600000000004,s:[133],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:460.524,s:[155],o:{x:[.42],y:[0]},i:{x:[.58],y:[1]}},{t:531.972,s:[277]}]}},{n:"g",nm:"Gap",v:{a:1,k:[{t:6.6,s:[90],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:117.576,s:[80],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:226.644,s:[86],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:320.694,s:[56],o:{x:[.5],y:[.35]},i:{x:[.15],y:[1]}},{t:399.072,s:[56],o:{x:[.5071],y:[.0048]},i:{x:[.15],y:[1]}},{t:507.528,s:[90]}]}}]},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]},{ty:"tm",s:{a:0,k:0},e:{a:0,k:100},o:{a:0,k:0},m:1},{ty:"gr",nm:"Group",hd:false,np:3,it:[{ty:"rc",nm:"Rectangle",hd:false,p:{a:0,k:[102.5,102.5]},s:{a:0,k:[410,410]},r:{a:0,k:0}},{ty:"fl",o:{a:0,k:0},c:{a:0,k:[0,1,0,1]},nm:"Fill",hd:false,r:1},{ty:"tr",a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}}]}]}]}];var Va=[{ddd:0,ind:1,ty:0,nm:"18",refId:"lo8h9rmzawnjrpxsxm9",sr:1,ks:{a:{a:0,k:[0,0]},p:{a:0,k:[0,0]},s:{a:0,k:[100,100]},sk:{a:0,k:0},sa:{a:0,k:0},r:{a:0,k:0},o:{a:0,k:100}},ao:0,w:210,h:210,ip:0,op:540,st:0,hd:false,bm:0}];var qa={a:"",d:"",tc:"",g:"Aninix"};var Qa={nm:Sa,v:Ra,fr:Na,ip:Da,op:$a,w:Wa,h:Ga,ddd:Ua,markers:Xa,assets:za,layers:Va,meta:qa};let Ya=e=>e,Ja,Za,el;var sl=babelHelpers.classPrivateFieldLooseKey("container");var al=babelHelpers.classPrivateFieldLooseKey("stopRecordingButton");var ll=babelHelpers.classPrivateFieldLooseKey("startRecordingButton");var tl=babelHelpers.classPrivateFieldLooseKey("disabled");var il=babelHelpers.classPrivateFieldLooseKey("initContainer");var rl=babelHelpers.classPrivateFieldLooseKey("renderStartRecordingButton");var ol=babelHelpers.classPrivateFieldLooseKey("renderStopRecordingButton");var nl=babelHelpers.classPrivateFieldLooseKey("enableStartRecordingButton");var bl=babelHelpers.classPrivateFieldLooseKey("disableStartRecordingButton");var cl=babelHelpers.classPrivateFieldLooseKey("enableStopRecordingButton");var dl=babelHelpers.classPrivateFieldLooseKey("disableStopRecordingButton");class pl extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,dl,{value:Hl});Object.defineProperty(this,cl,{value:Fl});Object.defineProperty(this,bl,{value:Ll});Object.defineProperty(this,nl,{value:Pl});Object.defineProperty(this,ol,{value:hl});Object.defineProperty(this,rl,{value:ul});Object.defineProperty(this,il,{value:vl});Object.defineProperty(this,sl,{writable:true,value:void 0});Object.defineProperty(this,al,{writable:true,value:void 0});Object.defineProperty(this,ll,{writable:true,value:void 0});Object.defineProperty(this,tl,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:VoiceButton");babelHelpers.classPrivateFieldLooseBase(this,tl)[tl]=false;babelHelpers.classPrivateFieldLooseBase(this,sl)[sl]=null}start(){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,sl)[sl],"--recording")}stop(){F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,sl)[sl],"--recording")}enable(){babelHelpers.classPrivateFieldLooseBase(this,tl)[tl]=false;babelHelpers.classPrivateFieldLooseBase(this,nl)[nl]();babelHelpers.classPrivateFieldLooseBase(this,cl)[cl]()}disable(){babelHelpers.classPrivateFieldLooseBase(this,tl)[tl]=true;babelHelpers.classPrivateFieldLooseBase(this,bl)[bl]();babelHelpers.classPrivateFieldLooseBase(this,dl)[dl]()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,tl)[tl]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,sl)[sl]){babelHelpers.classPrivateFieldLooseBase(this,il)[il]()}return babelHelpers.classPrivateFieldLooseBase(this,sl)[sl]}render(){return this.getContainer()}}function vl(){babelHelpers.classPrivateFieldLooseBase(this,sl)[sl]=F.Tag.render(Ja||(Ja=Ya`
			<div class="ai__copilot-voice-input-btn-container">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,rl)[rl](),babelHelpers.classPrivateFieldLooseBase(this,ol)[ol]())}function ul(){const e=new L.Icon({icon:L.Main.MICROPHONE_ON,size:20});babelHelpers.classPrivateFieldLooseBase(this,ll)[ll]=F.Tag.render(Za||(Za=Ya`
			<button
				class="ai__copilot-voice-input-btn --start"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,ll)[ll].disabled=babelHelpers.classPrivateFieldLooseBase(this,tl)[tl];F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ll)[ll],"click",(()=>{this.emit("start")}));return babelHelpers.classPrivateFieldLooseBase(this,ll)[ll]}function hl(){const e=new L.Icon({icon:L.Actions.STOP,size:17,color:getComputedStyle(document.body).getPropertyValue("--ui-color-on-primary")});babelHelpers.classPrivateFieldLooseBase(this,al)[al]=F.Tag.render(el||(el=Ya`
			<button
				class="ai__copilot-voice-input-btn --stop"
			>
				${0}
			</button>
		`),e.render());babelHelpers.classPrivateFieldLooseBase(this,al)[al].disabled=babelHelpers.classPrivateFieldLooseBase(this,tl)[tl];F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,al)[al],"click",(()=>{this.emit("stop")}));return babelHelpers.classPrivateFieldLooseBase(this,al)[al]}function Pl(){if(babelHelpers.classPrivateFieldLooseBase(this,ll)[ll]){babelHelpers.classPrivateFieldLooseBase(this,ll)[ll].disabled=false}}function Ll(){if(babelHelpers.classPrivateFieldLooseBase(this,ll)[ll]){babelHelpers.classPrivateFieldLooseBase(this,ll)[ll].disabled=true}}function Fl(){if(babelHelpers.classPrivateFieldLooseBase(this,al)[al]){babelHelpers.classPrivateFieldLooseBase(this,al)[al].disabled=false}}function Hl(){if(babelHelpers.classPrivateFieldLooseBase(this,al)[al]){babelHelpers.classPrivateFieldLooseBase(this,al)[al].disabled=true}}let Bl=e=>e,fl,yl,ml,gl,_l;var wl=babelHelpers.classPrivateFieldLooseKey("errors");var Ol=babelHelpers.classPrivateFieldLooseKey("detailedErrorInfoPopup");var Cl=babelHelpers.classPrivateFieldLooseKey("initDetailerErrorInfoPopup");var El=babelHelpers.classPrivateFieldLooseKey("getDetailedErrorInfoPopupContent");class Il{constructor(e){Object.defineProperty(this,El,{value:jl});Object.defineProperty(this,Cl,{value:xl});Object.defineProperty(this,wl,{writable:true,value:void 0});Object.defineProperty(this,Ol,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,wl)[wl]=e.errors}render(){var e;let s=babelHelpers.classPrivateFieldLooseBase(this,wl)[wl][babelHelpers.classPrivateFieldLooseBase(this,wl)[wl].length-1].message;const a=babelHelpers.classPrivateFieldLooseBase(this,wl)[wl][babelHelpers.classPrivateFieldLooseBase(this,wl)[wl].length-1].code;let l=null;if(((e=babelHelpers.classPrivateFieldLooseBase(this,wl)[wl][0])==null?void 0:e.code)==="AI_ENGINE_ERROR_OTHER"){var t,i;s=F.Loc.getMessage("AI_COPILOT_ERROR_OTHER");s=s.replace("[feedback_form]",'<span class="ai__copilot_input-field-error-detail">');s=s.replace("[/feedback_form]","</span>");l=F.Tag.render(fl||(fl=Bl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s);F.Event.bind(l.getElementsByClassName("ai__copilot_input-field-error-detail")[0],"click",(t=babelHelpers.classPrivateFieldLooseBase(this,wl)[wl][0])==null?void 0:(i=t.customData)==null?void 0:i.clickHandler)}else if(top.BX&&top.BX.Helper&&a==="AI_ENGINE_ERROR_PROVIDER"){s=F.Loc.getMessage("AI_COPILOT_ERROR_PROVIDER");s=s.replace("[link]",'<span class="ai__copilot_input-field-error-detail">');s=s.replace("[/link]","</span>");l=F.Tag.render(yl||(yl=Bl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s);F.Event.bind(l.getElementsByClassName("ai__copilot_input-field-error-detail")[0],"click",(e=>{top.BX.Helper.show("redirect=detail&code=20267044")}))}else{l=F.Tag.render(ml||(ml=Bl`
				<div class="ai__copilot_input-field-error">
					${0}
				</div>
			`),s)}return F.Tag.render(gl||(gl=Bl`
			<div class="ai__copilot_input-field-error">
				<span class="ai__copilot_input-field-error-title">
					${0}
				</span>
			</div>
		`),l)}setErrors(e){babelHelpers.classPrivateFieldLooseBase(this,wl)[wl]=e}getErrors(){return babelHelpers.classPrivateFieldLooseBase(this,wl)[wl]}}function xl(){if(babelHelpers.classPrivateFieldLooseBase(this,Ol)[Ol]){return}babelHelpers.classPrivateFieldLooseBase(this,Ol)[Ol]=new P.Popup({id:"ai__copilot_error-popup",content:babelHelpers.classPrivateFieldLooseBase(this,El)[El](),darkMode:true,maxWidth:300,autoHide:true,closeByEsc:true,closeIcon:true,cacheable:true})}function jl(){return F.Tag.render(_l||(_l=Bl`
			<div class="ai__copilot_error-popup-content">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,wl)[wl][babelHelpers.classPrivateFieldLooseBase(this,wl)[wl].length-1].message)}let Tl=e=>e,Kl;const Ml=Object.freeze({});var kl=babelHelpers.classPrivateFieldLooseKey("container");var Al=babelHelpers.classPrivateFieldLooseKey("readonly");var Sl=babelHelpers.classPrivateFieldLooseKey("useForImages");var Rl=babelHelpers.classPrivateFieldLooseKey("updatePlaceholder");var Nl=babelHelpers.classPrivateFieldLooseKey("getPlaceholderText");class Dl extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Nl,{value:Wl});Object.defineProperty(this,Rl,{value:$l});Object.defineProperty(this,kl,{writable:true,value:void 0});Object.defineProperty(this,Al,{writable:true,value:false});Object.defineProperty(this,Sl,{writable:true,value:false});this.setEventNamespace("AI.Copilot.InputPlaceholder");babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]=e.readonly===true}render(){babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]=this.getContainer();return babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]){const e=babelHelpers.classPrivateFieldLooseBase(this,Nl)[Nl]();babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]=F.Tag.render(Kl||(Kl=Tl`
				<div class="ai_copilot_placeholder">
					<span>${0}</span>
				</div>
			`),e)}return babelHelpers.classPrivateFieldLooseBase(this,kl)[kl]}setUseForImages(e){babelHelpers.classPrivateFieldLooseBase(this,Sl)[Sl]=e;babelHelpers.classPrivateFieldLooseBase(this,Rl)[Rl]()}}function $l(){babelHelpers.classPrivateFieldLooseBase(this,kl)[kl].querySelector("span").innerText=babelHelpers.classPrivateFieldLooseBase(this,Nl)[Nl]()}function Wl(){if(babelHelpers.classPrivateFieldLooseBase(this,Al)[Al]){return F.Loc.getMessage("AI_COPILOT_SELECT_COMMAND_BELOW")}if(babelHelpers.classPrivateFieldLooseBase(this,Sl)[Sl]){return F.Loc.getMessage("AI_COPILOT_IMAGE_INPUT_START_PLACEHOLDER")}return F.Loc.getMessage("AI_COPILOT_INPUT_START_PLACEHOLDER")}let Gl=e=>e,Ul,Xl,zl;const Vl=Object.freeze({submit:"submit"});var ql=babelHelpers.classPrivateFieldLooseKey("submitBtn");var Ql=babelHelpers.classPrivateFieldLooseKey("container");var Yl=babelHelpers.classPrivateFieldLooseKey("renderHotKeyTag");var Jl=babelHelpers.classPrivateFieldLooseKey("renderSubmitBtn");class Zl extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,Jl,{value:st});Object.defineProperty(this,Yl,{value:et});Object.defineProperty(this,ql,{writable:true,value:void 0});Object.defineProperty(this,Ql,{writable:true,value:void 0});this.setEventNamespace("AI:Copilot:SubmitBtn")}render(){babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]=F.Tag.render(Ul||(Ul=Gl`
			<div
				class="ai__copilot_input-submit-btn-container"
			>
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Yl)[Yl](),babelHelpers.classPrivateFieldLooseBase(this,Jl)[Jl]());return babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql]}disable(){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,ql)[ql].disabled=true}enable(){F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ql)[Ql],"--disabled");babelHelpers.classPrivateFieldLooseBase(this,ql)[ql].disabled=false}}function et(){const e=new L.Icon({size:20,icon:L.Actions.ARROW_TOP_2});return F.Tag.render(Xl||(Xl=Gl`
			<div class="ai__copilot_input-submit-hotkey">
				<div class="ai__copilot_input-submit-hotkey-icon">
					${0}
				</div>
				<div class="ai__copilot_input-submit-hotkey-text">Enter</div>
			</div>
		`),e.render())}function st(){const e=new L.Icon({size:18,icon:L.Actions.ARROW_TOP,color:"#fff"});babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]=F.Tag.render(zl||(zl=Gl`
			<button class="ai__copilot_input-submit-btn">
				${0}
			</button>
		`),e.render());F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ql)[ql],"click",(e=>{this.emit(Vl.submit);e.preventDefault()}));return babelHelpers.classPrivateFieldLooseBase(this,ql)[ql]}let at=e=>e,lt,tt,it,rt,ot,nt,bt;const ct=Object.freeze({submit:"submit",cancelLoading:"cancelLoading",focus:"focus",input:"input",goOutFromBottom:"goOutFromBottom",startRecording:"startRecording",stopRecording:"stopRecording",adjustHeight:"adjustHeight",containerClick:"containerClick"});var dt=babelHelpers.classPrivateFieldLooseKey("textarea");var pt=babelHelpers.classPrivateFieldLooseKey("container");var vt=babelHelpers.classPrivateFieldLooseKey("isLoading");var ut=babelHelpers.classPrivateFieldLooseKey("placeholder");var ht=babelHelpers.classPrivateFieldLooseKey("loaderTextContainer");var Pt=babelHelpers.classPrivateFieldLooseKey("errorContainer");var Lt=babelHelpers.classPrivateFieldLooseKey("inputError");var Ft=babelHelpers.classPrivateFieldLooseKey("textareaOldValue");var Ht=babelHelpers.classPrivateFieldLooseKey("disableEnterAndArrows");var Bt=babelHelpers.classPrivateFieldLooseKey("copilotLottieAnimation");var ft=babelHelpers.classPrivateFieldLooseKey("lottieIconContainer");var yt=babelHelpers.classPrivateFieldLooseKey("speechConverter");var mt=babelHelpers.classPrivateFieldLooseKey("submitBtn");var gt=babelHelpers.classPrivateFieldLooseKey("voiceButton");var _t=babelHelpers.classPrivateFieldLooseKey("readonly");var wt=babelHelpers.classPrivateFieldLooseKey("useForImages");var Ot=babelHelpers.classPrivateFieldLooseKey("isGoOutFromBottomEnabled");var Ct=babelHelpers.classPrivateFieldLooseKey("usedVoiceRecord");var Et=babelHelpers.classPrivateFieldLooseKey("usedTextInput");var It=babelHelpers.classPrivateFieldLooseKey("setErrorIcon");var xt=babelHelpers.classPrivateFieldLooseKey("setInputIcon");var jt=babelHelpers.classPrivateFieldLooseKey("setIcon");var Tt=babelHelpers.classPrivateFieldLooseKey("getIconContainer");var Kt=babelHelpers.classPrivateFieldLooseKey("renderLoader");var Mt=babelHelpers.classPrivateFieldLooseKey("renderErrorContainer");var kt=babelHelpers.classPrivateFieldLooseKey("renderTextArea");var At=babelHelpers.classPrivateFieldLooseKey("handleKeyDownEvent");var St=babelHelpers.classPrivateFieldLooseKey("isArrowKey");var Rt=babelHelpers.classPrivateFieldLooseKey("handleEnterKeyDownEvent");var Nt=babelHelpers.classPrivateFieldLooseKey("handleArrowKeyDownEvent");var Dt=babelHelpers.classPrivateFieldLooseKey("isCursorInTextareaEnd");var $t=babelHelpers.classPrivateFieldLooseKey("renderPlaceholder");var Wt=babelHelpers.classPrivateFieldLooseKey("updateContainerClassname");var Gt=babelHelpers.classPrivateFieldLooseKey("renderInputIcon");var Ut=babelHelpers.classPrivateFieldLooseKey("getLottieIconContainer");var Xt=babelHelpers.classPrivateFieldLooseKey("renderErrorIcon");var zt=babelHelpers.classPrivateFieldLooseKey("renderSubmitButton");var Vt=babelHelpers.classPrivateFieldLooseKey("initVoiceButton");var qt=babelHelpers.classPrivateFieldLooseKey("initDisabledVoiceButton");var Qt=babelHelpers.classPrivateFieldLooseKey("initEnabledVoiceButton");var Yt=babelHelpers.classPrivateFieldLooseKey("initSubmitButton");var Jt=babelHelpers.classPrivateFieldLooseKey("initSpeechConverter");var Zt=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStartEvent");var ei=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterErrorEvent");var si=babelHelpers.classPrivateFieldLooseKey("showErrorHintForVoiceButton");var ai=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterResultEvent");var li=babelHelpers.classPrivateFieldLooseKey("handleSpeechConverterStopEvent");var ti=babelHelpers.classPrivateFieldLooseKey("setTextareaValue");var ii=babelHelpers.classPrivateFieldLooseKey("adjustTextareaHeight");class ri extends h.EventEmitter{constructor(e={}){super(e);Object.defineProperty(this,ii,{value:ki});Object.defineProperty(this,ti,{value:Mi});Object.defineProperty(this,li,{value:Ki});Object.defineProperty(this,ai,{value:Ti});Object.defineProperty(this,si,{value:ji});Object.defineProperty(this,ei,{value:xi});Object.defineProperty(this,Zt,{value:Ii});Object.defineProperty(this,Jt,{value:Ei});Object.defineProperty(this,Yt,{value:Ci});Object.defineProperty(this,Qt,{value:Oi});Object.defineProperty(this,qt,{value:wi});Object.defineProperty(this,Vt,{value:_i});Object.defineProperty(this,zt,{value:gi});Object.defineProperty(this,Xt,{value:mi});Object.defineProperty(this,Ut,{value:yi});Object.defineProperty(this,Gt,{value:fi});Object.defineProperty(this,Wt,{value:Bi});Object.defineProperty(this,$t,{value:Hi});Object.defineProperty(this,Dt,{value:Fi});Object.defineProperty(this,Nt,{value:Li});Object.defineProperty(this,Rt,{value:Pi});Object.defineProperty(this,St,{value:hi});Object.defineProperty(this,At,{value:ui});Object.defineProperty(this,kt,{value:vi});Object.defineProperty(this,Mt,{value:pi});Object.defineProperty(this,Kt,{value:di});Object.defineProperty(this,Tt,{value:ci});Object.defineProperty(this,jt,{value:bi});Object.defineProperty(this,xt,{value:ni});Object.defineProperty(this,It,{value:oi});Object.defineProperty(this,dt,{writable:true,value:void 0});Object.defineProperty(this,pt,{writable:true,value:void 0});Object.defineProperty(this,vt,{writable:true,value:void 0});Object.defineProperty(this,ut,{writable:true,value:void 0});Object.defineProperty(this,ht,{writable:true,value:void 0});Object.defineProperty(this,Pt,{writable:true,value:void 0});Object.defineProperty(this,Lt,{writable:true,value:void 0});Object.defineProperty(this,Ft,{writable:true,value:""});Object.defineProperty(this,Ht,{writable:true,value:false});Object.defineProperty(this,Bt,{writable:true,value:null});Object.defineProperty(this,ft,{writable:true,value:void 0});Object.defineProperty(this,yt,{writable:true,value:null});Object.defineProperty(this,mt,{writable:true,value:null});Object.defineProperty(this,gt,{writable:true,value:null});Object.defineProperty(this,_t,{writable:true,value:false});Object.defineProperty(this,wt,{writable:true,value:false});Object.defineProperty(this,Ot,{writable:true,value:true});Object.defineProperty(this,Ct,{writable:true,value:void 0});Object.defineProperty(this,Et,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=false;babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]=null;babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=null;babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=null;babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]=null;babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]=false;babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]=false;this.setEventNamespace("AI.Copilot.Input")}render(){babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]=F.Tag.render(lt||(lt=at`
			<div class="ai__copilot_input-field">
				<div ref="icon" class="ai__copilot_input-field-icon">
					${0}
				</div>
				${0}
				<div class="ai__copilot_input-field-content">
					${0}
					${0}
					${0}
				</div>
				${0}
				<div class="ai__copilot_input-field-baas-point"></div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt](),babelHelpers.classPrivateFieldLooseBase(this,Kt)[Kt](),babelHelpers.classPrivateFieldLooseBase(this,kt)[kt](),babelHelpers.classPrivateFieldLooseBase(this,$t)[$t](),babelHelpers.classPrivateFieldLooseBase(this,Mt)[Mt](),babelHelpers.classPrivateFieldLooseBase(this,zt)[zt]());F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,pt)[pt].root,"click",(()=>{this.emit(ct.containerClick)}));babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]();return babelHelpers.classPrivateFieldLooseBase(this,pt)[pt].root}usedTextInput(){return babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]}usedVoiceRecord(){return babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]}setValue(e){babelHelpers.classPrivateFieldLooseBase(this,ti)[ti](e)}getValue(){return babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value}focus(e){if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].focus(e);babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=false}}getContainer(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,pt)[pt])==null?void 0:e.root}clear(){var e;babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]("",false);(e=babelHelpers.classPrivateFieldLooseBase(this,gt)[gt])==null?void 0:e.enable()}startGenerating(){babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].play();this.clearErrors();this.enable();babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=true;babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=true;babelHelpers.classPrivateFieldLooseBase(this,ti)[ti]("",false);F.Dom.addClass(this.getContainer(),"--loading");F.Dom.removeClass(this.getContainer(),"--error")}finishGenerating(){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]=false;babelHelpers.classPrivateFieldLooseBase(this,ti)[ti](babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft],false);F.Dom.removeClass(this.getContainer(),"--loading");setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt].stop()}),550)}stopRecording(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,yt)[yt])==null?void 0:e.stop()}setErrors(e){F.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]);if(babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]){babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].setErrors(e)}else{babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]=new Il({errors:e})}babelHelpers.classPrivateFieldLooseBase(this,It)[It]();F.Dom.addClass(this.getContainer(),"--error");const s=babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].render();F.Dom.append(s,babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]);babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=true;requestAnimationFrame((()=>{babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]()}))}adjustHeight(){babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]()}clearErrors(){if(babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]&&babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].getErrors().length>0){babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].setErrors([]);F.Dom.removeClass(this.getContainer(),"--error");babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,xt)[xt]()}babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]()}enableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=false}disableEnterAndArrows(){babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=true}disable(){F.Dom.addClass(this.getContainer(),"--disabled");babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=true;F.Dom.style(this.getContainer(),"opacity",.7);this.disableEnterAndArrows()}enable(){F.Dom.removeClass(this.getContainer(),"--disabled");babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=false;F.Dom.style(this.getContainer(),"opacity",1);this.enableEnterAndArrows()}isDisabled(){return babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled}setUseForImages(e){babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]=e;babelHelpers.classPrivateFieldLooseBase(this,ut)[ut].setUseForImages(e);if(e){babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]=false;babelHelpers.classPrivateFieldLooseBase(this,ht)[ht].innerText=F.Loc.getMessage("AI_COPILOT_INPUT_IMAGE_LOADER_TEXT")}else{babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]=true;babelHelpers.classPrivateFieldLooseBase(this,ht)[ht].innerText=F.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT")}}setHtmlContent(e){let s=F.Text.encode(e);s=s.replaceAll("[","<strong>[");s=s.replaceAll("]","]</strong>");s=s.replaceAll("\n","<br />");babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].setHtmlContent(s)}}function oi(){babelHelpers.classPrivateFieldLooseBase(this,jt)[jt](babelHelpers.classPrivateFieldLooseBase(this,Xt)[Xt]())}function ni(){babelHelpers.classPrivateFieldLooseBase(this,jt)[jt](babelHelpers.classPrivateFieldLooseBase(this,Gt)[Gt]())}function bi(e){if(e.className===babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]().firstElementChild.className){return}F.Event.bindOnce(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt](),"transitionend",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]().innerHTML="";F.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt]());F.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt](),"opacity",1)}));F.Dom.style(babelHelpers.classPrivateFieldLooseBase(this,Tt)[Tt](),"opacity",0)}function ci(){return babelHelpers.classPrivateFieldLooseBase(this,pt)[pt].icon}function di(){const e=F.Tag.render(tt||(tt=at`
			<button class="ai__copilot_loader-cancel-btn">
				${0}
			</button>
		`),F.Loc.getMessage("AI_COPILOT_INPUT_LOADER_CANCEL"));F.Event.bind(e,"click",(()=>{this.emit(ct.cancelLoading)}));const s=F.Tag.render(it||(it=at`
			<div class="ai__copilot_loader">
				<div class="ai__copilot_loader-left">
					<div ref="loaderText" class="ai__copilot_loader-text">${0}</div>
					<div class="ai__copilot_loader-dot dot-flashing"></div>
				</div>
				${0}
			</div>
		`),F.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT"),e);babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]=s.loaderText;return s.root}function pi(){babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]=F.Tag.render(rt||(rt=at`
			<div class="ai__copilot_input-field-error-container"></div>
		`));return babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]}function vi(){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt]=new Ka({});babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].subscribe("focus",(()=>{this.emit(ct.focus)}));babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].subscribe("input",(e=>{const s=e.getData();babelHelpers.classPrivateFieldLooseBase(this,ti)[ti](s);if(babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]&&babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].isRecording()===false){babelHelpers.classPrivateFieldLooseBase(this,Et)[Et]=true;if(s){babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].disable()}else{babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].enable()}}}));const e=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].render();F.Event.bind(e,"keydown",babelHelpers.classPrivateFieldLooseBase(this,At)[At].bind(this));const s=new MutationObserver((s=>{s.forEach((s=>{if(s.type==="attributes"&&s.attributeName==="disabled"){if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled===true){F.Dom.style(e,"z-index",-1)}else{F.Dom.style(e,"z-index",1)}}}))}));s.observe(e,{attributes:true});return e}function ui(e){if((e.key==="Enter"||babelHelpers.classPrivateFieldLooseBase(this,St)[St](e.key))&&babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]){e.preventDefault();return false}if(e.key==="Enter"){return babelHelpers.classPrivateFieldLooseBase(this,Rt)[Rt](e)}if(babelHelpers.classPrivateFieldLooseBase(this,St)[St](e.key)){return babelHelpers.classPrivateFieldLooseBase(this,Nt)[Nt](e)}babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=false;return true}function hi(e){return e==="ArrowDown"||e==="ArrowUp"||e==="ArrowLeft"||e==="ArrowRight"}function Pi(e){if(e.key==="Enter"&&!e.shiftKey&&!e.altKey&&!e.ctrlKey&&!e.repeat&&!babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]&&!babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled){this.emit(ct.submit);e.preventDefault();return false}return true}function Li(e){if(e.key==="ArrowDown"&&babelHelpers.classPrivateFieldLooseBase(this,Dt)[Dt]()&&babelHelpers.classPrivateFieldLooseBase(this,Ot)[Ot]){babelHelpers.classPrivateFieldLooseBase(this,Ht)[Ht]=true;this.emit(ct.goOutFromBottom);return false}return true}function Fi(){return babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].isCursorInTheEnd()}function Hi(){babelHelpers.classPrivateFieldLooseBase(this,ut)[ut]=new Dl({readonly:babelHelpers.classPrivateFieldLooseBase(this,_t)[_t],useForImages:babelHelpers.classPrivateFieldLooseBase(this,wt)[wt]});F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,ut)[ut].getContainer(),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]===false){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].focus()}}));return babelHelpers.classPrivateFieldLooseBase(this,ut)[ut].render()}function Bi(){if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value.length===0){F.Dom.addClass(this.getContainer(),"--show-placeholder")}else{F.Dom.removeClass(this.getContainer(),"--show-placeholder")}}function fi(){return F.Tag.render(ot||(ot=at`
			<div class="" style="width: 24px; height: 24px; position: relative;">
				<div class="ai__copilot_static-icon-wrapper">
					<div class="ai__copilot_static-icon"></div>
				</div>
				<div class="ai__copilot_loading-icon-wrapper">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ut)[Ut]())}function yi(){if(!babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]){const e=21;babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]=F.Tag.render(nt||(nt=at`
				<div class="" style="width: ${0}px; height: ${0}px;"></div>
			`),e,e);babelHelpers.classPrivateFieldLooseBase(this,Bt)[Bt]=p.Lottie.loadAnimation({container:babelHelpers.classPrivateFieldLooseBase(this,ft)[ft],renderer:"svg",animationData:Qa,autoplay:false})}return babelHelpers.classPrivateFieldLooseBase(this,ft)[ft]}function mi(){const e=new L.Icon({icon:L.Main.WARNING,size:24});return e.render()}function gi(){if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]){return null}babelHelpers.classPrivateFieldLooseBase(this,Vt)[Vt]();babelHelpers.classPrivateFieldLooseBase(this,Yt)[Yt]();return F.Tag.render(bt||(bt=at`
			<div class="ai__copilot_input-submit-block">
				${0}
				<div class="ai__copilot_input-submit-block-voice-btn">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].render(),babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].render())}function _i(){babelHelpers.classPrivateFieldLooseBase(this,gt)[gt]=new pl;if(o.SpeechConverter.isBrowserSupport()===false){babelHelpers.classPrivateFieldLooseBase(this,qt)[qt]()}else{babelHelpers.classPrivateFieldLooseBase(this,Qt)[Qt]()}}function wi(){babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].disable();ga.addHintOnTargetHover({target:babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].getContainer(),text:F.Loc.getMessage("AI_COPILOT_VOICE_INPUT_NOT_SUPPORT")})}function Oi(){babelHelpers.classPrivateFieldLooseBase(this,Jt)[Jt]();F.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].getContainer(),"click",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].isDisabled()||babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].isRecording()){return}babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].start()}));babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].subscribe("stop",(()=>{babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].stop();if(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value){babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].disable()}babelHelpers.classPrivateFieldLooseBase(this,Ct)[Ct]=true}))}function Ci(){babelHelpers.classPrivateFieldLooseBase(this,mt)[mt]=new Zl;babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].subscribe(Vl.submit,(()=>{this.emit(ct.submit)}))}function Ei(){if(o.SpeechConverter.isBrowserSupport()===false){return}babelHelpers.classPrivateFieldLooseBase(this,yt)[yt]=new o.SpeechConverter;babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].subscribe(o.speechConverterEvents.start,babelHelpers.classPrivateFieldLooseBase(this,Zt)[Zt].bind(this));babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].subscribe(o.speechConverterEvents.error,babelHelpers.classPrivateFieldLooseBase(this,ei)[ei].bind(this));babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].subscribe(o.speechConverterEvents.result,babelHelpers.classPrivateFieldLooseBase(this,ai)[ai].bind(this));babelHelpers.classPrivateFieldLooseBase(this,yt)[yt].subscribe(o.speechConverterEvents.stop,babelHelpers.classPrivateFieldLooseBase(this,li)[li].bind(this))}function Ii(){babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].start();babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=true;babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].addClass("--recording");this.emit(ct.startRecording);babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].disable()}function xi(e){const{error:s}=e.getData();if(s==="aborted"){return}if(s==="not-allowed"){babelHelpers.classPrivateFieldLooseBase(this,si)[si](F.Loc.getMessage("AI_COPILOT_VOICE_INPUT_MICRO_NOT_ALLOWED"))}else{babelHelpers.classPrivateFieldLooseBase(this,si)[si](F.Loc.getMessage("AI_COPILOT_VOICE_INPUT_UNKNOWN_ERROR"))}}function ji(e){const s=new ga({text:e,target:babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].getContainer()});s.show();setTimeout((()=>{s.hide()}),1500)}function Ti(e){this.setValue(e.getData().text);babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value=e.getData().text}function Ki(){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].removeClass("--recording");babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].disabled=false;babelHelpers.classPrivateFieldLooseBase(this,gt)[gt].stop();babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].focus();this.emit(ct.stopRecording);babelHelpers.classPrivateFieldLooseBase(this,mt)[mt].enable()}function Mi(e,s=true){babelHelpers.classPrivateFieldLooseBase(this,Ft)[Ft]=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value;babelHelpers.classPrivateFieldLooseBase(this,ii)[ii]();babelHelpers.classPrivateFieldLooseBase(this,Wt)[Wt]();if(s){this.emit(ct.input,new h.BaseEvent({data:e}))}}function ki(){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].setStyle("height","auto");const e=parseInt(babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].getComputedStyle().getPropertyValue("padding-bottom"),10);const s=F.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Pt)[Pt]).height;const a=F.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,ut)[ut].getContainer()).height;const l=babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].scrollHeight;const t=l-e>40;if(t){babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].addClass("--with-padding-bottom")}else{babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].removeClass("--with-padding-bottom")}if(babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]){const e=F.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,ht)[ht]).height;babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].setStyle("height",`${e}px`)}else{let e=babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt]&&babelHelpers.classPrivateFieldLooseBase(this,Lt)[Lt].getErrors().length>0?s:babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].scrollHeight;if(a>e&&!babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].value){e=a}babelHelpers.classPrivateFieldLooseBase(this,dt)[dt].setStyle("height",`${e}px`)}this.emit(ct.adjustHeight)}let Ai=e=>e,Si,Ri;var Ni=babelHelpers.classPrivateFieldLooseKey("container");var Di=babelHelpers.classPrivateFieldLooseKey("renderReadMoreLink");class $i{constructor(){Object.defineProperty(this,Di,{value:Wi});Object.defineProperty(this,Ni,{writable:true,value:null})}render(e=false){const s=new L.Icon({color:getComputedStyle(document.body).getPropertyValue("--ui-color-base-40"),size:22,icon:L.Main.WARNING});babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]=F.Tag.render(Si||(Si=Ai`
			<div class="ai__copilot_waning-field ${0}">
				<span class="ai__copilot_waning-field-icon">
					${0}
				</span>
				<span class="ai__copilot_waning-field-text">
					${0}
				</span>
				${0}
			</div>
		`),e?"--expanded":"",s.render(),F.Loc.getMessage("AI_COPILOT_RESULT_WARNING"),babelHelpers.classPrivateFieldLooseBase(this,Di)[Di]());return babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni]}getInfoSliderContainer(){var e;return(e=top.BX.Helper.getSlider())==null?void 0:e.getContainer()}expand(){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni],"--expanded")}collapse(){F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,Ni)[Ni],"--expanded")}}function Wi(){const e=F.Tag.render(Ri||(Ri=Ai`
			<span class="ai__copilot_waning-field-link">
				${0}
			</span>
		`),F.Loc.getMessage("AI_COPILOT_RESULT_WARNING_MORE"));F.Event.bind(e,"click",(()=>{const e=20412666;if(top.BX&&top.BX.Helper){top.BX.Helper.show(`redirect=detail&code=${e}`)}}));return e}let Gi=e=>e,Ui;const Xi=Object.freeze({TEXT:"text",IMAGE:"image",TEXT_AND_IMAGE:"text-and-image"});const zi={START_INIT:"start-init",FINISH_INIT:"finish-init",FAILED_INIT:"failed-init",HIDE:"hide",IMAGE_SAVE:"save-image",TEXT_SAVE:"save",IMAGE_PLACE_ABOVE:"place-image-above",IMAGE_PLACE_UNDER:"place-image-under",IMAGE_CANCEL:"cancel-image",TEXT_CANCEL:"cancel",IMAGE_COMPLETION_RESULT:"image-completion-result",TEXT_COMPLETION_RESULT:"text-completion-result",TEXT_PLACE_BELOW:"add_below"};const Vi=new F.Cache.MemoryCache;async function qi(e){return Vi.remember(e,(()=>F.Runtime.loadExtension(e)))}var Qi=babelHelpers.classPrivateFieldLooseKey("copilotPopup");var Yi=babelHelpers.classPrivateFieldLooseKey("inputField");var Ji=babelHelpers.classPrivateFieldLooseKey("resultField");var Zi=babelHelpers.classPrivateFieldLooseKey("engine");var er=babelHelpers.classPrivateFieldLooseKey("preventAutoHide");var sr=babelHelpers.classPrivateFieldLooseKey("autoHide");var ar=babelHelpers.classPrivateFieldLooseKey("container");var lr=babelHelpers.classPrivateFieldLooseKey("warningField");var tr=babelHelpers.classPrivateFieldLooseKey("copilotBanner");var ir=babelHelpers.classPrivateFieldLooseKey("copilotAgreementWasApplied");var rr=babelHelpers.classPrivateFieldLooseKey("copilotImageController");var or=babelHelpers.classPrivateFieldLooseKey("copilotTextController");var nr=babelHelpers.classPrivateFieldLooseKey("readonly");var br=babelHelpers.classPrivateFieldLooseKey("category");var cr=babelHelpers.classPrivateFieldLooseKey("selectedText");var dr=babelHelpers.classPrivateFieldLooseKey("context");var pr=babelHelpers.classPrivateFieldLooseKey("analytics");var vr=babelHelpers.classPrivateFieldLooseKey("useText");var ur=babelHelpers.classPrivateFieldLooseKey("useImage");var hr=babelHelpers.classPrivateFieldLooseKey("showResultInCopilot");var Pr=babelHelpers.classPrivateFieldLooseKey("windowResizeHandler");var Lr=babelHelpers.classPrivateFieldLooseKey("staticEulaRestrictCallback");var Fr=babelHelpers.classPrivateFieldLooseKey("getBaasPopup");var Hr=babelHelpers.classPrivateFieldLooseKey("initCopilotPopup");var Br=babelHelpers.classPrivateFieldLooseKey("showCopilotAfterCopilotBanner");var fr=babelHelpers.classPrivateFieldLooseKey("initEngine");var yr=babelHelpers.classPrivateFieldLooseKey("initCopilotImageController");var mr=babelHelpers.classPrivateFieldLooseKey("initCopilotTextController");var gr=babelHelpers.classPrivateFieldLooseKey("initCopilotTextControllerMenu");var _r=babelHelpers.classPrivateFieldLooseKey("getOpenMenu");var wr=babelHelpers.classPrivateFieldLooseKey("mouseDownHandler");var Or=babelHelpers.classPrivateFieldLooseKey("autoHideHandler");var Cr=babelHelpers.classPrivateFieldLooseKey("hideMenus");var Er=babelHelpers.classPrivateFieldLooseKey("adjustMenus");var Ir=babelHelpers.classPrivateFieldLooseKey("getAnalytics");var xr=babelHelpers.classPrivateFieldLooseKey("initAnalyticForText");var jr=babelHelpers.classPrivateFieldLooseKey("initAnalyticForReadOnly");var Tr=babelHelpers.classPrivateFieldLooseKey("showCopilotAfterApplyAgreement");class Kr extends h.EventEmitter{static async checkEulaRestrict(){var e;const s=await qi("bitrix24.license.feature");if(!(s!=null&&s.Feature)){return false}const a=F.Type.isFunction((e=babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr])==null?void 0:e.then);const l=babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr]===null;if(l||a){try{if(l){babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr]=s.Feature.checkEulaRestrictions("ai_available_by_version")}await babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr];babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr]=false;return false}catch(e){if(e.callback){babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr]=e.callback;return true}console.error(e);return false}}return F.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr])}constructor(e){var s;super(e);Object.defineProperty(this,Tr,{value:Qr});Object.defineProperty(this,jr,{value:qr});Object.defineProperty(this,xr,{value:Vr});Object.defineProperty(this,Ir,{value:zr});Object.defineProperty(this,Er,{value:Xr});Object.defineProperty(this,Cr,{value:Ur});Object.defineProperty(this,Or,{value:Gr});Object.defineProperty(this,wr,{value:Wr});Object.defineProperty(this,_r,{value:$r});Object.defineProperty(this,gr,{value:Dr});Object.defineProperty(this,mr,{value:Nr});Object.defineProperty(this,yr,{value:Rr});Object.defineProperty(this,fr,{value:Sr});Object.defineProperty(this,Br,{value:Ar});Object.defineProperty(this,Hr,{value:kr});Object.defineProperty(this,Fr,{value:Mr});Object.defineProperty(this,Qi,{writable:true,value:void 0});Object.defineProperty(this,Yi,{writable:true,value:void 0});Object.defineProperty(this,Ji,{writable:true,value:void 0});Object.defineProperty(this,Zi,{writable:true,value:void 0});Object.defineProperty(this,er,{writable:true,value:void 0});Object.defineProperty(this,sr,{writable:true,value:void 0});Object.defineProperty(this,ar,{writable:true,value:null});Object.defineProperty(this,lr,{writable:true,value:null});Object.defineProperty(this,tr,{writable:true,value:void 0});Object.defineProperty(this,ir,{writable:true,value:void 0});Object.defineProperty(this,rr,{writable:true,value:void 0});Object.defineProperty(this,or,{writable:true,value:void 0});Object.defineProperty(this,nr,{writable:true,value:void 0});Object.defineProperty(this,br,{writable:true,value:void 0});Object.defineProperty(this,cr,{writable:true,value:void 0});Object.defineProperty(this,dr,{writable:true,value:void 0});Object.defineProperty(this,pr,{writable:true,value:void 0});Object.defineProperty(this,vr,{writable:true,value:void 0});Object.defineProperty(this,ur,{writable:true,value:void 0});Object.defineProperty(this,hr,{writable:true,value:void 0});Object.defineProperty(this,Pr,{writable:true,value:void 0});this.setEventNamespace("AI.Copilot");babelHelpers.classPrivateFieldLooseBase(this,br)[br]=e.category;babelHelpers.classPrivateFieldLooseBase(this,cr)[cr]=e.selectedText;babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]=e.readonly===true;babelHelpers.classPrivateFieldLooseBase(this,dr)[dr]=e.context;babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]=F.Type.isBoolean(e.useText)?e.useText:true;babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]=e.useImage===true;babelHelpers.classPrivateFieldLooseBase(this,hr)[hr]=e.showResultInCopilot;babelHelpers.classPrivateFieldLooseBase(this,fr)[fr]({category:e.category,contextId:e.contextId,moduleId:e.moduleId,contextParameters:e.contextParameters,extraMarkers:e.extraMarkers});babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi]=new ri({readonly:e.readonly===true});babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji]=new Fa;babelHelpers.classPrivateFieldLooseBase(this,lr)[lr]=new $i;babelHelpers.classPrivateFieldLooseBase(this,sr)[sr]=(s=e.autoHide)!=null?s:false;babelHelpers.classPrivateFieldLooseBase(this,er)[er]=F.Type.isFunction(e.preventAutoHide)?e.preventAutoHide:()=>false}render(){babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]=F.Tag.render(Ui||(Ui=Gi`
			<div class="ai__copilot ai__copilot-scope">
				${0}
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji].render(),babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].render(),babelHelpers.classPrivateFieldLooseBase(this,lr)[lr].render());return babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]}async init(){this.emit(zi.START_INIT);try{if(F.Extension.getSettings("ai.copilot").isRestrictByEula){await Kr.checkEulaRestrict()}if(babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]){await babelHelpers.classPrivateFieldLooseBase(this,mr)[mr]({readonly:babelHelpers.classPrivateFieldLooseBase(this,nr)[nr],category:babelHelpers.classPrivateFieldLooseBase(this,br)[br],selectedText:babelHelpers.classPrivateFieldLooseBase(this,cr)[cr],context:babelHelpers.classPrivateFieldLooseBase(this,dr)[dr],addImageMenuItem:babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]});await babelHelpers.classPrivateFieldLooseBase(this,gr)[gr]();if(babelHelpers.classPrivateFieldLooseBase(this,or)[or].isFirstLaunch()){const{AppsInstallerBanner:e}=await F.Runtime.loadExtension("ai.copilot-banner");babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]=new e({})}}else{await babelHelpers.classPrivateFieldLooseBase(this,yr)[yr]()}this.emit(zi.FINISH_INIT)}catch(e){console.error(e);this.emit(zi.FAILED_INIT)}}show(e){var s;if(this.isInitFinished()===false){console.error("AI.Copilot: The copilot cannot be opened until initialization is complete.");return}if(babelHelpers.classPrivateFieldLooseBase(this,or)[or]&&babelHelpers.classPrivateFieldLooseBase(this,or)[or].isPromptsLoaded()===false){console.error("AI.Copilot: Prompts were not loaded!");return}if(babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]){babelHelpers.classPrivateFieldLooseBase(this,Br)[Br](e);return}if(F.Extension.getSettings("ai.copilot").get("isShowAgreementPopup")&&!babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]){babelHelpers.classPrivateFieldLooseBase(this,Tr)[Tr](e);return}if(F.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr])){babelHelpers.classPrivateFieldLooseBase(Kr,Lr)[Lr]();babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](true).sendEventOpen("error_agreement");return}if(!babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi]){F.Event.bind(document,"mousedown",babelHelpers.classPrivateFieldLooseBase(this,wr)[wr].bind(this))}(s=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:s.destroy();babelHelpers.classPrivateFieldLooseBase(this,Hr)[Hr]({width:e.width,bindElement:e.bindElement});babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].show();if(babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]){var a,l;(a=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:a.setCopilotContainer(babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]);(l=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:l.start();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].setUseForImages(false)}else{babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].setCopilotContainer(babelHelpers.classPrivateFieldLooseBase(this,ar)[ar]);babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].start();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].setUseForImages(true)}babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](true).sendEventOpen("success");babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].focus();babelHelpers.classPrivateFieldLooseBase(this,Er)[Er]()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:e.close()}isShown(){var e,s;return(e=(s=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:s.isShown())!=null?e:false}isInitFinished(){if(babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:e.isInitFinished())}return true}adjustWidth(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:s.setWidth(e)}adjust(e){var s;if(!babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi]||(s=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])!=null&&s.isDestroyed()){return}if(e.hide){var a,l,t;(a=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:a.setMaxWidth(0);(l=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:l.setMinWidth(0);babelHelpers.classPrivateFieldLooseBase(this,Cr)[Cr]();this.adjustPosition(e.position);(t=babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]())==null?void 0:t.close()}else{var i,r,o,n,b;(i=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:i.setMaxWidth(null);(r=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi])==null?void 0:r.setMinWidth(null);this.adjustPosition(e.position);babelHelpers.classPrivateFieldLooseBase(this,Er)[Er]();(o=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:o.showMenu();(n=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:n.showMenu();(b=babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]())==null?void 0:b.adjustPosition()}}adjustPosition(e){var s;if(!babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi]){return}if(e){babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].setBindElement(e)}babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].adjustPosition({forceBindPosition:true});(s=babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]())==null?void 0:s.adjustPosition({forceBindPosition:true,forceTop:true});babelHelpers.classPrivateFieldLooseBase(this,Er)[Er]()}setSelectedText(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:s.setSelectedText(e)}setContext(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:s.setContext(e)}setContextParameters(e){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].setContextParameters(e)}setExtraMarkers(e){var a,l;const t={...e,original_message:undefined,user_message:undefined};const i=((a=babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi])==null?void 0:a.getPayload())||new s.Text;i.setMarkers({...i.getMarkers(),...t});babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].setPayload(i);(l=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:l.setExtraMarkers(e)}getPosition(){var e;return{inputField:F.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].getPopupContainer()),menu:F.Dom.getPosition((e=babelHelpers.classPrivateFieldLooseBase(this,_r)[_r]())==null?void 0:e.getPopupContainer())}}}function Mr(){return P.PopupManager.getPopups().find((e=>e.getId().includes("baas")))}function kr(e){babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi]=new P.Popup({className:"ai__copilot_input-popup",bindElement:e.bindElement,content:this.render(),padding:0,width:e.width,contentNoPaddings:true,borderRadius:"0px",autoHide:babelHelpers.classPrivateFieldLooseBase(this,sr)[sr],closeByEsc:true,cacheable:false,autoHideHandler:e=>babelHelpers.classPrivateFieldLooseBase(this,Or)[Or](e),events:{onPopupClose:()=>{var e,s,a;F.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,ar)[ar],"--error");(e=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:e.finish();(s=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:s.finish();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].stopRecording();(a=babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]())==null?void 0:a.close();this.emit(zi.HIDE);F.Event.unbind(window,"resize",babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr])},onPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr]=()=>babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].adjustHeight();F.Event.bind(window,"resize",babelHelpers.classPrivateFieldLooseBase(this,Pr)[Pr]);babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].clearErrors()}}})}function Ar(e){babelHelpers.classPrivateFieldLooseBase(this,tr)[tr].show();babelHelpers.classPrivateFieldLooseBase(this,tr)[tr].subscribe("action-finish-success",(()=>{Kr.showBanner=false;babelHelpers.classPrivateFieldLooseBase(this,tr)[tr]=null;babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].setBannerLaunched();setTimeout((()=>{this.show(e)}),300)}))}function Sr(e){babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi]=new s.Engine;babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].setModuleId(e.moduleId).setContextId(e.contextId).setContextParameters(e.contextParameters).setParameters({promptCategory:e.category});this.setExtraMarkers(e.extraMarkers)}async function Rr(){const{CopilotImageController:e}=await qi("ai.copilot.copilot-image-controller");babelHelpers.classPrivateFieldLooseBase(this,rr)[rr]=new e({inputField:babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi],engine:babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi],copilotContainer:babelHelpers.classPrivateFieldLooseBase(this,ar)[ar],copilotInputEvents:ct,copilotMenu:Ds,popupWithoutBackBtn:babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]&&babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]===false,useInsertAboveAndUnderMenuItems:babelHelpers.classPrivateFieldLooseBase(this,vr)[vr],analytics:babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](true)});await babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].init();babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("back",(()=>{babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].finish();babelHelpers.classPrivateFieldLooseBase(this,or)[or].start();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].setUseForImages(false)}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("close",(()=>{babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].finish();this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("save",(e=>{this.emit(zi.IMAGE_SAVE,new h.BaseEvent({data:{imageUrl:e.getData().imageUrl}}))}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("place-above",(()=>{this.emit(zi.IMAGE_PLACE_ABOVE)}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("place-under",(()=>{this.emit(zi.IMAGE_PLACE_UNDER)}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("cancel",(()=>{this.emit(zi.IMAGE_CANCEL)}));babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].subscribe("completion-result",(e=>{this.emit(zi.IMAGE_COMPLETION_RESULT,new h.BaseEvent({data:{imageUrl:e.getData().imageUrl}}))}))}async function Nr(e){const{CopilotTextController:s}=await F.Runtime.loadExtension("ai.copilot.copilot-text-controller");babelHelpers.classPrivateFieldLooseBase(this,or)[or]=new s({engine:babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi],inputField:babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi],readonly:e.readonly,category:e.category,selectedText:e.selectedText,context:e.context,addImageMenuItem:e.addImageMenuItem,warningField:babelHelpers.classPrivateFieldLooseBase(this,lr)[lr],resultField:babelHelpers.classPrivateFieldLooseBase(this,Ji)[Ji],copilotInputEvents:ct,copilotMenu:Ds,copilotMenuEvents:ts,analytics:babelHelpers.classPrivateFieldLooseBase(this,Ir)[Ir](),showResultInCopilot:babelHelpers.classPrivateFieldLooseBase(this,hr)[hr]});babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("aiResult",(e=>{this.emit("aiResult",{result:e.getData().result});this.emit(zi.TEXT_COMPLETION_RESULT,{result:e.getData().result})}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("prompt-master-show",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].setClosingByEsc(false)}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("prompt-master-destroy",(()=>{babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].setClosingByEsc(true)}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("close",(()=>{babelHelpers.classPrivateFieldLooseBase(this,or)[or].finish();this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("save",(e=>{this.emit(zi.TEXT_SAVE,{...e.getData()})}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("add_below",(e=>{this.emit(zi.TEXT_PLACE_BELOW,{...e.getData()})}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("show-image-configurator",(async()=>{await babelHelpers.classPrivateFieldLooseBase(this,yr)[yr]();babelHelpers.classPrivateFieldLooseBase(this,or)[or].finish();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].setUseForImages(true);babelHelpers.classPrivateFieldLooseBase(this,rr)[rr].start();babelHelpers.classPrivateFieldLooseBase(this,Yi)[Yi].focus()}));babelHelpers.classPrivateFieldLooseBase(this,or)[or].subscribe("cancel",(()=>{this.emit(zi.TEXT_CANCEL)}))}async function Dr(){await babelHelpers.classPrivateFieldLooseBase(this,or)[or].init()}function $r(){var e,s,a;return((e=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:(s=e.getOpenMenu())==null?void 0:s.getPopup())||((a=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:a.getOpenMenuPopup())}function Wr(e){var s;this.wasMouseDownOnSelf=(s=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].getPopupContainer())==null?void 0:s.contains(e.target)}function Gr(e){var s,a,l,t;const i=e.target;const r=babelHelpers.classPrivateFieldLooseBase(this,Qi)[Qi].getPopupContainer().contains(i);const o=(s=babelHelpers.classPrivateFieldLooseBase(this,lr)[lr].getInfoSliderContainer())==null?void 0:s.contains(i);const n=babelHelpers.classPrivateFieldLooseBase(this,er)[er](e);const b=Boolean(e.target.closest(".side-panel"));const c=Boolean(e.target.closest(".ai_roles-dialog_popup"));const d=Boolean(e.target.closest(".ai__prompt-master-popup"));const p=Boolean(e.target.closest(".popup-window-overlay"));const v=Boolean(e.target.closest(".popup-window"));const u=Boolean((a=babelHelpers.classPrivateFieldLooseBase(this,Fr)[Fr]())==null?void 0:a.getPopupContainer().contains(i));const h=Boolean(e.target.closest(".ui-notification-balloon"));const P=!r&&!((l=babelHelpers.classPrivateFieldLooseBase(this,or)[or])!=null&&l.isContainsElem(i))&&!((t=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])!=null&&t.isContainsTarget(i))&&!n&&!this.wasMouseDownOnSelf&&!o&&!b&&!c&&!d&&!v&&!u&&!p&&!h;if(P){this.hide()}this.wasMouseDownOnSelf=false;return false}function Ur(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:e.hideAllMenus();(s=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:s.hideAllMenus()}function Xr(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,or)[or])==null?void 0:e.adjustMenusPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,rr)[rr])==null?void 0:s.adjustMenusPosition()}function zr(e=false){if(!babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]||e){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]=new D;babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setContextSection(babelHelpers.classPrivateFieldLooseBase(this,br)[br]);if(babelHelpers.classPrivateFieldLooseBase(this,vr)[vr]){if(babelHelpers.classPrivateFieldLooseBase(this,nr)[nr]){babelHelpers.classPrivateFieldLooseBase(this,jr)[jr]()}else{babelHelpers.classPrivateFieldLooseBase(this,xr)[xr]()}}else if(babelHelpers.classPrivateFieldLooseBase(this,ur)[ur]){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setCategoryImage()}}return babelHelpers.classPrivateFieldLooseBase(this,pr)[pr]}function Vr(){var e,s;babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setCategoryText();if(!babelHelpers.classPrivateFieldLooseBase(this,or)[or]){return}if(!((e=babelHelpers.classPrivateFieldLooseBase(this,or)[or].getSelectedText())!=null&&e.trim())&&!((s=babelHelpers.classPrivateFieldLooseBase(this,or)[or].getContext())!=null&&s.trim())){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setTypeTextNew()}else if(babelHelpers.classPrivateFieldLooseBase(this,or)[or].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setTypeTextEdit()}else{babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setTypeTextReply()}if(babelHelpers.classPrivateFieldLooseBase(this,or)[or].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setContextElementPopupButton()}else{babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setContextElementSpaceButton()}}function qr(){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setCategoryReadonly();if(!babelHelpers.classPrivateFieldLooseBase(this,or)[or]){return}if(babelHelpers.classPrivateFieldLooseBase(this,or)[or].getSelectedText()){babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setContextElementReadonlyQuote()}else{babelHelpers.classPrivateFieldLooseBase(this,pr)[pr].setContextElementReadonlyCommon()}}async function Qr(e){babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]=await B({moduleId:babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].getModuleId(),contextId:babelHelpers.classPrivateFieldLooseBase(this,Zi)[Zi].getContextId(),events:{onAccept:()=>{babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]=true;this.show(e)},onCancel:()=>{babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]=false;babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]=undefined}}});if(babelHelpers.classPrivateFieldLooseBase(this,ir)[ir]){this.show(e)}}Object.defineProperty(Kr,Lr,{writable:true,value:null});Kr.showBanner=null;class Yr{constructor(e){this.copilotTextController=e==null?void 0:e.copilotTextController}}var Jr=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var Zr=babelHelpers.classPrivateFieldLooseKey("inputField");var eo=babelHelpers.classPrivateFieldLooseKey("inputField");var so=babelHelpers.classPrivateFieldLooseKey("copilotContainer");var ao=babelHelpers.classPrivateFieldLooseKey("commandCode");var lo=babelHelpers.classPrivateFieldLooseKey("commandCode");var to=babelHelpers.classPrivateFieldLooseKey("prompts");var io=babelHelpers.classPrivateFieldLooseKey("category");var ro=babelHelpers.classPrivateFieldLooseKey("isBeforeGeneration");var oo=babelHelpers.classPrivateFieldLooseKey("openFeedbackForm");class no extends Yr{constructor(e){super(e);Object.defineProperty(this,oo,{value:bo});Object.defineProperty(this,io,{writable:true,value:void 0});Object.defineProperty(this,ro,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,io)[io]=e.category;babelHelpers.classPrivateFieldLooseBase(this,ro)[ro]=e.isBeforeGeneration}async execute(){await babelHelpers.classPrivateFieldLooseBase(this,oo)[oo]()}}async function bo(){var e,s,a,l,t;const i=`${babelHelpers.classPrivateFieldLooseBase(this,io)[io]},${babelHelpers.classPrivateFieldLooseBase(this,ro)[ro]?"before":"after"}`;let r=null;if(babelHelpers.classPrivateFieldLooseBase(this,ro)[ro]===false){r=await this.copilotTextController.getDataForFeedbackForm()}const o=((e=r)==null?void 0:(s=e.context_messages)==null?void 0:s.length)>0?JSON.stringify((a=r)==null?void 0:a.context_messages):undefined;const n=(l=(t=r)==null?void 0:t.author_message)!=null?l:undefined;const b=Math.round(Math.random()*1e3);F.Runtime.loadExtension(["ui.feedback.form"]).then((()=>{var e,s,a,l,t,c,d,p;BX.UI.Feedback.Form.open({id:`ai.copilot.feedback-${b}`,forms:[{zones:["es"],id:684,lang:"es",sec:"svvq1x"},{zones:["en"],id:686,lang:"en",sec:"tjwodz"},{zones:["de"],id:688,lang:"de",sec:"nrwksg"},{zones:["com.br"],id:690,lang:"com.br",sec:"kpte6m"},{zones:["ru","by","kz"],id:692,lang:"ru",sec:"jbujn0"}],presets:{sender_page:i,prompt_code:(e=r)==null?void 0:(s=e.prompt)==null?void 0:s.code,user_message:(a=r)==null?void 0:a.user_message,original_message:(l=r)==null?void 0:l.original_message,author_message:n,context_messages:o,last_result0:(t=r)==null?void 0:(c=t.current_result)==null?void 0:c[1],language:F.Loc.getMessage("LANGUAGE_ID"),cp_answer:(d=r)==null?void 0:(p=d.current_result)==null?void 0:p[0]}})})).catch((e=>{console.err(e)}))}var co=babelHelpers.classPrivateFieldLooseKey("engineCode");let po=e=>e,vo,uo;const ho={SAVE:"save",CANCEL:"cancel",CHANGE_REQUEST:"change-request",CLOSE:"close"};var Po=babelHelpers.classPrivateFieldLooseKey("popup");var Lo=babelHelpers.classPrivateFieldLooseKey("bindElement");var Fo=babelHelpers.classPrivateFieldLooseKey("resultContainer");var Ho=babelHelpers.classPrivateFieldLooseKey("resultText");var Bo=babelHelpers.classPrivateFieldLooseKey("resultMenu");var fo=babelHelpers.classPrivateFieldLooseKey("additionalResultMenuItems");var yo=babelHelpers.classPrivateFieldLooseKey("engine");var mo=babelHelpers.classPrivateFieldLooseKey("analytics");var go=babelHelpers.classPrivateFieldLooseKey("initPopup");var _o=babelHelpers.classPrivateFieldLooseKey("initResultMenu");var wo=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var Oo=babelHelpers.classPrivateFieldLooseKey("renderResultContainer");class Co extends h.EventEmitter{constructor(e){super();Object.defineProperty(this,Oo,{value:jo});Object.defineProperty(this,wo,{value:xo});Object.defineProperty(this,_o,{value:Io});Object.defineProperty(this,go,{value:Eo});Object.defineProperty(this,Po,{writable:true,value:null});Object.defineProperty(this,Lo,{writable:true,value:void 0});Object.defineProperty(this,Fo,{writable:true,value:void 0});Object.defineProperty(this,Ho,{writable:true,value:""});Object.defineProperty(this,Bo,{writable:true,value:void 0});Object.defineProperty(this,fo,{writable:true,value:[]});Object.defineProperty(this,yo,{writable:true,value:void 0});Object.defineProperty(this,mo,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotReadonly:ResultPopup");babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,fo)[fo]=e.additionalResultMenuItems.map((e=>({...e,command:()=>{e.command(babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho])}})));babelHelpers.classPrivateFieldLooseBase(this,mo)[mo]=e.analytics;babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]=e.engine}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,Po)[Po]){babelHelpers.classPrivateFieldLooseBase(this,go)[go]();babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].setOffset({offsetTop:6})}if(!babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo]){babelHelpers.classPrivateFieldLooseBase(this,_o)[_o]()}babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].show();babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Po)[Po].getPopupContainer(),{top:4});babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo].open()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,Po)[Po])==null?void 0:e.isShown())}adjustPosition(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Po)[Po])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo])==null?void 0:s.adjustPosition()}destroy(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Po)[Po])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,Po)[Po]=null;(s=babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo])==null?void 0:s.close();babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo]=null;babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo]=null}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Po)[Po])==null?void 0:s.setBindElement(e);this.adjustPosition()}getResult(){return babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]}setResult(e){babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]=e;if(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo]){babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].innerText=e}}}function Eo(){babelHelpers.classPrivateFieldLooseBase(this,Po)[Po]=new P.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,wo)[wo](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,Lo)[Lo],cacheable:false,className:"ai__copilot-scope ai__copilot-context-menu__result-popup",width:530,closeIcon:true,closeIconSize:"large",events:{onPopupShow:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].scrollHeight>babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo].offsetHeight){F.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo],"--with-scroll")}},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo].close();this.emit(ho.CLOSE)},onPopupAfterClose:()=>{this.destroy()}}})}function Io(){babelHelpers.classPrivateFieldLooseBase(this,Bo)[Bo]=new v.CopilotMenu({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo],cacheable:false,forceTop:false,items:[new u.ChangeRequestMenuItem({icon:null,onClick:()=>{this.emit(ho.CHANGE_REQUEST);babelHelpers.classPrivateFieldLooseBase(this,mo)[mo].sendEventCancel()}}).getOptions(),{separator:true},new u.CopyResultMenuItem({getText:()=>{babelHelpers.classPrivateFieldLooseBase(this,mo)[mo].sendEventCopyResult();return babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]}}).getOptions(),...babelHelpers.classPrivateFieldLooseBase(this,fo)[fo],{separator:true},new u.FeedbackMenuItem({icon:null,isBeforeGeneration:false,engine:babelHelpers.classPrivateFieldLooseBase(this,yo)[yo]}).getOptions()]})}function xo(){const e=new $i;return F.Tag.render(vo||(vo=po`
			<div class="ai__copilot-context-menu__result-popup-content">
				${0}
				<div class="ai__copilot-context-menu_result-popup-warning">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Oo)[Oo](),e.render(true))}function jo(){babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo]=F.Tag.render(uo||(uo=po`
			<div class="ai__copilot-context-menu__result-popup-text">${0}</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,Ho)[Ho]);return babelHelpers.classPrivateFieldLooseBase(this,Fo)[Fo]}let To=e=>e,Ko,Mo,ko;const Ao={CANCEL:"cancel"};var So=babelHelpers.classPrivateFieldLooseKey("popup");var Ro=babelHelpers.classPrivateFieldLooseKey("bindElement");var No=babelHelpers.classPrivateFieldLooseKey("lottieLoaderIcon");var Do=babelHelpers.classPrivateFieldLooseKey("initPopup");var $o=babelHelpers.classPrivateFieldLooseKey("getPopupContent");class Wo extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,$o,{value:Uo});Object.defineProperty(this,Do,{value:Go});Object.defineProperty(this,So,{writable:true,value:null});Object.defineProperty(this,Ro,{writable:true,value:void 0});Object.defineProperty(this,No,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotContextMenu:Loader");babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro]=e.bindElement}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,So)[So]){babelHelpers.classPrivateFieldLooseBase(this,Do)[Do]();babelHelpers.classPrivateFieldLooseBase(this,So)[So].setOffset({offsetTop:6})}babelHelpers.classPrivateFieldLooseBase(this,So)[So].show()}destroy(){babelHelpers.classPrivateFieldLooseBase(this,So)[So].destroy();babelHelpers.classPrivateFieldLooseBase(this,So)[So]=null}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,So)[So])==null?void 0:e.isShown())}adjustPosition(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,So)[So])==null?void 0:e.adjustPosition()}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,So)[So])==null?void 0:s.setBindElement(e);this.adjustPosition()}}function Go(){babelHelpers.classPrivateFieldLooseBase(this,So)[So]=new P.Popup({content:babelHelpers.classPrivateFieldLooseBase(this,$o)[$o](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,Ro)[Ro],cacheable:false,minWidth:282,minHeight:42,padding:6,className:"ai__copilot-scope ai__copilot-context-menu_loader-popup",events:{onPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,No)[No].play()},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,No)[No].stop()}}})}function Uo(){const e=21.5;const s=F.Tag.render(Ko||(Ko=To`
			<div class="" style="width: ${0}px; height: ${0}px;"></div>
		`),e,e);babelHelpers.classPrivateFieldLooseBase(this,No)[No]=p.Lottie.loadAnimation({container:s,renderer:"svg",animationData:Qa,autoplay:false});const a=F.Tag.render(Mo||(Mo=To`
			<button style="opacity: 1;" class="ai__copilot_loader-cancel-btn">
				${0}
			</button>
		`),F.Loc.getMessage("AI_COPILOT_INPUT_LOADER_CANCEL"));F.Event.bind(a,"click",(()=>{this.emit(Ao.CANCEL)}));return F.Tag.render(ko||(ko=To`
			<div class="ai__copilot-context-menu-loader-content">
				<div class="ai__copilot_loader-left">
					<div class="ai__copilot-context-menu-loader-icon">
						${0}
					</div>
					<div class="ai__copilot-context-menu-loader-text-with-dots">
						<span class="ai__copilot_loader-text">${0}</span>
						<div class="ai__copilot-context-menu-loader_dots">
							<div class="dot-flashing"></div>
						</div>
					</div>
				</div>
				${0}
			</div>
		`),s,F.Loc.getMessage("AI_COPILOT_INPUT_LOADER_TEXT"),a)}let Xo=e=>e,zo;const Vo={CANCEL:"cancel",REPEAT:"repeat",CHANGE_REQUEST:"change-request"};var qo=babelHelpers.classPrivateFieldLooseKey("error");var Qo=babelHelpers.classPrivateFieldLooseKey("bindElement");var Yo=babelHelpers.classPrivateFieldLooseKey("popup");var Jo=babelHelpers.classPrivateFieldLooseKey("menu");var Zo=babelHelpers.classPrivateFieldLooseKey("errorField");var en=babelHelpers.classPrivateFieldLooseKey("initPopup");var sn=babelHelpers.classPrivateFieldLooseKey("getPopupContent");var an=babelHelpers.classPrivateFieldLooseKey("showMenu");var ln=babelHelpers.classPrivateFieldLooseKey("hideMenu");var tn=babelHelpers.classPrivateFieldLooseKey("initMenu");var rn=babelHelpers.classPrivateFieldLooseKey("getMenuItems");class on extends h.EventEmitter{constructor(e){super(e);Object.defineProperty(this,rn,{value:vn});Object.defineProperty(this,tn,{value:pn});Object.defineProperty(this,ln,{value:dn});Object.defineProperty(this,an,{value:cn});Object.defineProperty(this,sn,{value:bn});Object.defineProperty(this,en,{value:nn});Object.defineProperty(this,qo,{writable:true,value:void 0});Object.defineProperty(this,Qo,{writable:true,value:void 0});Object.defineProperty(this,Yo,{writable:true,value:void 0});Object.defineProperty(this,Jo,{writable:true,value:void 0});Object.defineProperty(this,Zo,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotContextMenu:ErrorPopup");babelHelpers.classPrivateFieldLooseBase(this,Qo)[Qo]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,qo)[qo]=e.error;babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo]=new Il({errors:[babelHelpers.classPrivateFieldLooseBase(this,qo)[qo]]})}setError(e){babelHelpers.classPrivateFieldLooseBase(this,qo)[qo]=e;babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo].setErrors([babelHelpers.classPrivateFieldLooseBase(this,qo)[qo]])}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo]){babelHelpers.classPrivateFieldLooseBase(this,en)[en]()}babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo].show()}destroy(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo]=null}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo])==null?void 0:e.isShown())}adjustPosition(){var e,s;(e=babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo])==null?void 0:s.adjustPosition()}setBindElement(e){var s;(s=babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo])==null?void 0:s.setBindElement(e);this.adjustPosition()}}function nn(){if(babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo]){return}babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo]=new P.Popup({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Qo)[Qo],content:babelHelpers.classPrivateFieldLooseBase(this,sn)[sn](),className:"ai__copilot-scope ai__copilot-context-menu_error-popup",maxWidth:600,minHeight:42,padding:6,events:{onAfterPopupShow:()=>{babelHelpers.classPrivateFieldLooseBase(this,an)[an]()},onPopupClose:()=>{babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]()},onPopupDestroy:()=>{babelHelpers.classPrivateFieldLooseBase(this,ln)[ln]()}}});babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo].setOffset({offsetTop:6})}function bn(){const e=new L.Icon({icon:L.Main.WARNING,color:getComputedStyle(document.body).getPropertyValue("--ui-color-text-alert"),size:24});return F.Tag.render(zo||(zo=Xo`
			<div class="ai__copilot-context-menu-error-content">
				<div class="ai__copilot-context-menu-error-content-icon">
					${0}
				</div>
				<div class="ai__copilot-context-menu-error-content-text">
					${0}
				</div>
			</div>
		`),e.render(),babelHelpers.classPrivateFieldLooseBase(this,Zo)[Zo].render())}function cn(){if(!babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo]){babelHelpers.classPrivateFieldLooseBase(this,tn)[tn]()}babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo].getPopupContainer(),{top:6});babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo].open();babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo].show()}function dn(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo])==null?void 0:e.close();babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo]=null}function pn(){babelHelpers.classPrivateFieldLooseBase(this,Jo)[Jo]=new v.CopilotMenu({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Yo)[Yo].getPopupContainer(),items:babelHelpers.classPrivateFieldLooseBase(this,rn)[rn](),cacheable:false,forceTop:false})}function vn(){return[new u.RepeatCopilotMenuItem({icon:null,onClick:()=>{this.emit(Vo.REPEAT)}}).getOptions(),new u.ChangeRequestMenuItem({icon:null,onClick:()=>{this.emit(Vo.CHANGE_REQUEST)}}).getOptions(),new u.CancelCopilotMenuItem({icon:null,onClick:()=>{this.emit(Vo.CANCEL)}}).getOptions()]}var un=babelHelpers.classPrivateFieldLooseKey("staticEulaRestrictCallback");class hn{static async init(){var e;const s=await qi("bitrix24.license.feature");if(!(s!=null&&s.Feature)){return false}const a=F.Type.isFunction((e=babelHelpers.classPrivateFieldLooseBase(hn,un)[un])==null?void 0:e.then);const l=babelHelpers.classPrivateFieldLooseBase(hn,un)[un]===null;if(l||a){try{if(l){babelHelpers.classPrivateFieldLooseBase(hn,un)[un]=s.Feature.checkEulaRestrictions("ai_available_by_version")}await babelHelpers.classPrivateFieldLooseBase(hn,un)[un];babelHelpers.classPrivateFieldLooseBase(hn,un)[un]=false;return false}catch(e){if(e.callback){babelHelpers.classPrivateFieldLooseBase(hn,un)[un]=e.callback;return true}console.error(e);return false}}return F.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(hn,un)[un])}static checkRestricted(){if(F.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(hn,un)[un])){babelHelpers.classPrivateFieldLooseBase(hn,un)[un]();return true}return false}}Object.defineProperty(hn,un,{writable:true,value:void 0});var Pn=babelHelpers.classPrivateFieldLooseKey("bindElement");var Ln=babelHelpers.classPrivateFieldLooseKey("copilotTextControllerEngine");var Fn=babelHelpers.classPrivateFieldLooseKey("context");var Hn=babelHelpers.classPrivateFieldLooseKey("selectedText");var Bn=babelHelpers.classPrivateFieldLooseKey("generalMenu");var fn=babelHelpers.classPrivateFieldLooseKey("resultPopup");var yn=babelHelpers.classPrivateFieldLooseKey("loaderPopup");var mn=babelHelpers.classPrivateFieldLooseKey("errorPopup");var gn=babelHelpers.classPrivateFieldLooseKey("extraResultMenuItems");var _n=babelHelpers.classPrivateFieldLooseKey("angle");var wn=babelHelpers.classPrivateFieldLooseKey("initEngineOptions");var On=babelHelpers.classPrivateFieldLooseKey("copilotBanner");var Cn=babelHelpers.classPrivateFieldLooseKey("isNeedToShowCopilotBanner");var En=babelHelpers.classPrivateFieldLooseKey("isShowCopilotAgreementPopup");var In=babelHelpers.classPrivateFieldLooseKey("showAfterCopilotBanner");var xn=babelHelpers.classPrivateFieldLooseKey("completions");var jn=babelHelpers.classPrivateFieldLooseKey("handleCompletionsError");var Tn=babelHelpers.classPrivateFieldLooseKey("getAnalyticParametersForCompletions");var Kn=babelHelpers.classPrivateFieldLooseKey("initEngine");var Mn=babelHelpers.classPrivateFieldLooseKey("getGeneralMenuItems");var kn=babelHelpers.classPrivateFieldLooseKey("getPromptMenuItemFromPrompt");var An=babelHelpers.classPrivateFieldLooseKey("getProviderMenuItems");var Sn=babelHelpers.classPrivateFieldLooseKey("showResultPopup");var Rn=babelHelpers.classPrivateFieldLooseKey("setResultPopupText");var Nn=babelHelpers.classPrivateFieldLooseKey("initResultPopup");var Dn=babelHelpers.classPrivateFieldLooseKey("initLoaderPopup");var $n=babelHelpers.classPrivateFieldLooseKey("showLoaderPopup");var Wn=babelHelpers.classPrivateFieldLooseKey("hideLoaderPopup");var Gn=babelHelpers.classPrivateFieldLooseKey("showGeneralMenu");var Un=babelHelpers.classPrivateFieldLooseKey("destroyGeneralMenu");var Xn=babelHelpers.classPrivateFieldLooseKey("initGeneralMenu");var zn=babelHelpers.classPrivateFieldLooseKey("getGeneralMenuAngleOptions");var Vn=babelHelpers.classPrivateFieldLooseKey("showErrorPopup");var qn=babelHelpers.classPrivateFieldLooseKey("destroyErrorPopup");var Qn=babelHelpers.classPrivateFieldLooseKey("initErrorPopup");var Yn=babelHelpers.classPrivateFieldLooseKey("validateOptions");var Jn=babelHelpers.classPrivateFieldLooseKey("validateContextOption");var Zn=babelHelpers.classPrivateFieldLooseKey("getAnalytics");class eb extends h.EventEmitter{constructor(e){var s;super(e);Object.defineProperty(this,Zn,{value:wb});Object.defineProperty(this,Jn,{value:_b});Object.defineProperty(this,Yn,{value:gb});Object.defineProperty(this,Qn,{value:mb});Object.defineProperty(this,qn,{value:yb});Object.defineProperty(this,Vn,{value:fb});Object.defineProperty(this,zn,{value:Bb});Object.defineProperty(this,Xn,{value:Hb});Object.defineProperty(this,Un,{value:Fb});Object.defineProperty(this,Gn,{value:Lb});Object.defineProperty(this,Wn,{value:Pb});Object.defineProperty(this,$n,{value:hb});Object.defineProperty(this,Dn,{value:ub});Object.defineProperty(this,Nn,{value:vb});Object.defineProperty(this,Rn,{value:pb});Object.defineProperty(this,Sn,{value:db});Object.defineProperty(this,An,{value:cb});Object.defineProperty(this,kn,{value:bb});Object.defineProperty(this,Mn,{value:nb});Object.defineProperty(this,Kn,{value:ob});Object.defineProperty(this,Tn,{value:rb});Object.defineProperty(this,jn,{value:ib});Object.defineProperty(this,xn,{value:tb});Object.defineProperty(this,In,{value:lb});Object.defineProperty(this,En,{value:ab});Object.defineProperty(this,Cn,{value:sb});Object.defineProperty(this,Pn,{writable:true,value:void 0});Object.defineProperty(this,Ln,{writable:true,value:void 0});Object.defineProperty(this,Fn,{writable:true,value:void 0});Object.defineProperty(this,Hn,{writable:true,value:void 0});Object.defineProperty(this,Bn,{writable:true,value:void 0});Object.defineProperty(this,fn,{writable:true,value:void 0});Object.defineProperty(this,yn,{writable:true,value:void 0});Object.defineProperty(this,mn,{writable:true,value:void 0});Object.defineProperty(this,gn,{writable:true,value:void 0});Object.defineProperty(this,_n,{writable:true,value:void 0});Object.defineProperty(this,wn,{writable:true,value:void 0});this.setEventNamespace("AI.CopilotReadonly");babelHelpers.classPrivateFieldLooseBase(this,Yn)[Yn](e);babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]=e.bindElement;babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]=e.context||"";babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]=e.selectedText||"";babelHelpers.classPrivateFieldLooseBase(this,gn)[gn]=(s=e.extraResultMenuItems)!=null?s:[];babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]=e.angle===true;babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]={moduleId:e.moduleId,contextId:e.contextId,category:e.category,contextParameters:e.contextParameters}}async init(){if(F.Extension.getSettings("ai.copilot").isRestrictByEula){await hn.init()}try{await babelHelpers.classPrivateFieldLooseBase(this,Kn)[Kn](babelHelpers.classPrivateFieldLooseBase(this,wn)[wn]);babelHelpers.classPrivateFieldLooseBase(this,Xn)[Xn]();if(babelHelpers.classPrivateFieldLooseBase(this,Cn)[Cn]()){const{AppsInstallerBanner:e}=await F.Runtime.loadExtension("ai.copilot-banner");babelHelpers.classPrivateFieldLooseBase(eb,On)[On]=new e({})}}catch(e){console.error("Init error",e);throw e}}getResultText(){var e;return((e=babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])==null?void 0:e.getResult())||null}show(){const e=hn.checkRestricted();if(e){babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]().sendEventOpen("error_agreement");return}if(babelHelpers.classPrivateFieldLooseBase(eb,On)[On]){babelHelpers.classPrivateFieldLooseBase(this,In)[In]();return}if(babelHelpers.classPrivateFieldLooseBase(this,En)[En]()){const e=babelHelpers.classPrivateFieldLooseBase(this,wn)[wn].moduleId;const s=babelHelpers.classPrivateFieldLooseBase(this,wn)[wn].contextId;B({moduleId:e,contextId:s,events:{onAccept:()=>{babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]();babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]().sendEventOpen("success")}}}).then((e=>{if(e){babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]();babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]().sendEventOpen("success")}}));return}babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]();babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]().sendEventOpen("success")}hide(){var e;babelHelpers.classPrivateFieldLooseBase(this,Un)[Un]();(e=babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])==null?void 0:e.destroy();babelHelpers.classPrivateFieldLooseBase(this,qn)[qn]()}isShown(){var e,s,a,l;return((e=babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn])==null?void 0:e.isShown())||((s=babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])==null?void 0:s.isShown())||((a=babelHelpers.classPrivateFieldLooseBase(this,yn)[yn])==null?void 0:a.isShown())||((l=babelHelpers.classPrivateFieldLooseBase(this,mn)[mn])==null?void 0:l.isShown())}adjustPosition(){var e,s,a,l;(e=babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn])==null?void 0:e.adjustPosition();(s=babelHelpers.classPrivateFieldLooseBase(this,mn)[mn])==null?void 0:s.adjustPosition();(a=babelHelpers.classPrivateFieldLooseBase(this,yn)[yn])==null?void 0:a.adjustPosition();(l=babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])==null?void 0:l.adjustPosition()}setContext(e){var s;babelHelpers.classPrivateFieldLooseBase(this,Jn)[Jn](e);babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]=e||"";(s=babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln])==null?void 0:s.setContext(babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn])}setSelectedText(e){var s;babelHelpers.classPrivateFieldLooseBase(this,Jn)[Jn](e);babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]=e||"";(s=babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln])==null?void 0:s.setContext(babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn])}setBindElement(e){var s,a,l,t;babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]=e;(s=babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn])==null?void 0:s.setBindElement(e);(a=babelHelpers.classPrivateFieldLooseBase(this,mn)[mn])==null?void 0:a.setBindElement(e);(l=babelHelpers.classPrivateFieldLooseBase(this,fn)[fn])==null?void 0:l.setBindElement(e);(t=babelHelpers.classPrivateFieldLooseBase(this,yn)[yn])==null?void 0:t.setBindElement(e)}}function sb(){return babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].isCopilotFirstLaunch()&&babelHelpers.classPrivateFieldLooseBase(eb,On)[On]===undefined}function ab(){var e;return(e=F.Extension.getSettings("ai.copilot").isShowAgreementPopup)!=null?e:false}function lb(){babelHelpers.classPrivateFieldLooseBase(eb,On)[On].show();babelHelpers.classPrivateFieldLooseBase(eb,On)[On].subscribe("action-finish-success",(()=>{babelHelpers.classPrivateFieldLooseBase(eb,On)[On]=null;babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setCopilotBannerLaunchedFlag();setTimeout((()=>{this.show()}),300)}))}async function tb(){try{babelHelpers.classPrivateFieldLooseBase(this,Un)[Un]();babelHelpers.classPrivateFieldLooseBase(this,$n)[$n]();babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setAnalyticParameters(babelHelpers.classPrivateFieldLooseBase(this,Tn)[Tn]());const e=await babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].completions();if(e){babelHelpers.classPrivateFieldLooseBase(this,Rn)[Rn](e);babelHelpers.classPrivateFieldLooseBase(this,Wn)[Wn]();babelHelpers.classPrivateFieldLooseBase(this,Sn)[Sn]()}}catch(e){babelHelpers.classPrivateFieldLooseBase(this,jn)[jn](e)}}function ib(e){babelHelpers.classPrivateFieldLooseBase(this,Wn)[Wn]();const s=e.getCode();switch(s){case"AI_ENGINE_ERROR_OTHER":{e.setMessage(F.Loc.getMessage("AI_COPILOT_ERROR_OTHER"));const s=new no({category:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getCategory(),isBeforeGeneration:false,copilotTextController:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln]});e.setCustomData({clickHandler:()=>s.execute(),clickableText:F.Loc.getMessage("AI_COPILOT_ERROR_CONTACT_US")});babelHelpers.classPrivateFieldLooseBase(this,Vn)[Vn](e);break}case"LIMIT_IS_EXCEEDED_BAAS":{babelHelpers.classPrivateFieldLooseBase(this,Vn)[Vn](e);break}case"LIMIT_IS_EXCEEDED_MONTHLY":case"LIMIT_IS_EXCEEDED_DAILY":case"SERVICE_IS_NOT_AVAILABLE_BY_TARIFF":{this.hide();break}default:{if(F.Type.isStringFilled(e.getCode())===false){e.setCode("undefined")}babelHelpers.classPrivateFieldLooseBase(this,Vn)[Vn](e)}}requestAnimationFrame((()=>{H.AjaxErrorHandler.handleTextGenerateError({baasOptions:{bindElement:babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn],context:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getContextId(),useAngle:true},errorCode:e.getCode()})}))}function rb(){const e=babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]();return{category:e.getCategory(),type:e.getType(),c_sub_section:e.getCSubSection(),c_element:e.getCElement()}}async function ob(e){const{CopilotTextControllerEngine:s}=await F.Runtime.loadExtension("ai.copilot.copilot-text-controller");babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln]=new s({moduleId:e.moduleId,contextParameters:e.contextParameters,contextId:e.contextId,category:e.category});babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setContext(babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]||babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]);await babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].init()}function nb(){const e=babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getPrompts().slice(1);const s=e.map((e=>babelHelpers.classPrivateFieldLooseBase(this,kn)[kn](e)));return[...s,{separator:true},new u.OpenCopilotMenuItem({children:babelHelpers.classPrivateFieldLooseBase(this,An)[An]()}).getOptions(),(new u.AboutCopilotMenuItem).getOptions(),new u.FeedbackMenuItem({engine:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln],isBeforeGeneration:true}).getOptions()]}function bb(e){const s=e.children||[];const a=new va({code:e.code,text:e.title,icon:e.icon,onClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setCommandCode(e.code);babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setContext(babelHelpers.classPrivateFieldLooseBase(this,Hn)[Hn]||babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]);babelHelpers.classPrivateFieldLooseBase(this,xn)[xn]()},children:s.map((e=>babelHelpers.classPrivateFieldLooseBase(this,kn)[kn](e)))});if(e.separator){return{separator:true,section:e.section,title:e.title}}return a.getOptions()}function cb(){var e;const s=babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getEngines().map((e=>new u.ProviderMenuItem({code:e.code,text:e.title,selected:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getSelectedEngineCode()===e.code,onClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].setSelectedEngineCode(e.code);babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].replaceMenuItemSubmenu(new u.OpenCopilotMenuItem({children:babelHelpers.classPrivateFieldLooseBase(this,An)[An]()}).getOptions())}})));const a=[...s,{separator:true},new u.ConnectModelMenuItem,new u.MarketMenuItem];if((e=babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getPermissions())!=null&&e.can_edit_settings){a.push(new u.SettingsMenuItem)}return a}function db(){if(!babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]){babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn]()}babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].show()}function pb(e){if(!babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]){babelHelpers.classPrivateFieldLooseBase(this,Nn)[Nn]()}babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].setResult(e)}function vb(){babelHelpers.classPrivateFieldLooseBase(this,fn)[fn]=new Co({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn],additionalResultMenuItems:babelHelpers.classPrivateFieldLooseBase(this,gn)[gn],engine:babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln],analytics:babelHelpers.classPrivateFieldLooseBase(this,Zn)[Zn]()});babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].subscribe(ho.SAVE,(()=>{babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].destroy();babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].destroy();babelHelpers.classPrivateFieldLooseBase(this,Un)[Un]()}));babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].subscribe(ho.CANCEL,(()=>{this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].subscribe(ho.CHANGE_REQUEST,(()=>{babelHelpers.classPrivateFieldLooseBase(this,fn)[fn].destroy();babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]()}))}function ub(){babelHelpers.classPrivateFieldLooseBase(this,yn)[yn]=new Wo({bindElement:babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]});babelHelpers.classPrivateFieldLooseBase(this,yn)[yn].subscribe(Ao.CANCEL,(()=>{babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].cancelCompletion();babelHelpers.classPrivateFieldLooseBase(this,yn)[yn].destroy();babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]()}))}function hb(){if(!babelHelpers.classPrivateFieldLooseBase(this,yn)[yn]){babelHelpers.classPrivateFieldLooseBase(this,Dn)[Dn]()}babelHelpers.classPrivateFieldLooseBase(this,yn)[yn].show()}function Pb(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,yn)[yn])==null?void 0:e.destroy()}function Lb(){if(!babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]){babelHelpers.classPrivateFieldLooseBase(this,Xn)[Xn]()}babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].setBindElement(babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]);babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].adjustPosition();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].open()}function Fb(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn])==null?void 0:e.close();babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=null}function Hb(){babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=new Ds({items:babelHelpers.classPrivateFieldLooseBase(this,Mn)[Mn](),bindElement:babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn],cacheable:false,autoHide:true,forceTop:false,angle:babelHelpers.classPrivateFieldLooseBase(this,zn)[zn](),bordered:false});babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn].subscribe(ts.close,(()=>{babelHelpers.classPrivateFieldLooseBase(this,Bn)[Bn]=null}))}function Bb(){if(!babelHelpers.classPrivateFieldLooseBase(this,_n)[_n]){return null}if(F.Type.isElementNode(babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn])){return{offset:F.Dom.getPosition(babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]).width,position:"top"}}if(F.Type.isObject(babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn])){return{position:"top"}}return null}function fb(e){if(!babelHelpers.classPrivateFieldLooseBase(this,mn)[mn]){babelHelpers.classPrivateFieldLooseBase(this,Qn)[Qn](e)}babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].setError(e);babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].show()}function yb(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,mn)[mn])==null?void 0:e.destroy()}function mb(e){babelHelpers.classPrivateFieldLooseBase(this,mn)[mn]=new on({error:e,bindElement:babelHelpers.classPrivateFieldLooseBase(this,Pn)[Pn]});babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].subscribe(Vo.CANCEL,(()=>{this.hide()}));babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].subscribe(Vo.CHANGE_REQUEST,(()=>{babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].destroy();babelHelpers.classPrivateFieldLooseBase(this,Gn)[Gn]()}));babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].subscribe(Vo.REPEAT,(()=>{babelHelpers.classPrivateFieldLooseBase(this,mn)[mn].destroy();babelHelpers.classPrivateFieldLooseBase(this,xn)[xn]()}))}function gb(e){if(F.Type.isObject(e)===false){throw new F.BaseError("AI.CopilotContextMenu: options is required for constructor.")}if(F.Type.isStringFilled(e.moduleId)===false){throw new F.BaseError("AI.CopilotContextMenu: moduleId is required option and must be string.")}if(F.Type.isStringFilled(e.category)===false){throw new F.BaseError("AI.CopilotContextMenu: category is required option and must be string.")}if(F.Type.isStringFilled(e.contextId)===false){throw new F.BaseError("AI.CopilotContextMenu: contextId is required option and must be string")}babelHelpers.classPrivateFieldLooseBase(this,Jn)[Jn](e.context);if(e.angle&&F.Type.isBoolean(e.angle)===false){throw new F.BaseError("AI.CopilotContextMenu: angle option must be boolean")}}function _b(e){if(e&&F.Type.isString(e)===false){throw new F.BaseError("AI.CopilotContextMenu: context option must be string")}}function wb(){const e=(new D).setCategoryReadonly().setP1("prompt",babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getCommandCode()).setP2("provider",babelHelpers.classPrivateFieldLooseBase(this,Ln)[Ln].getSelectedEngineCode());if(babelHelpers.classPrivateFieldLooseBase(this,Fn)[Fn]){e.setContextElementReadonlyCommon()}else{e.setContextElementReadonlyQuote()}return e}Object.defineProperty(eb,On,{writable:true,value:void 0});e.Copilot=Kr;e.CopilotMode=Xi;e.CopilotEvents=zi;e.CopilotInput=ri;e.CopilotInputEvents=ct;e.CopilotMenu=Ds;e.CopilotMenuEvents=ts;e.CopilotMenuCommand=pa;e.CopilotResult=Fa;e.CopilotContextMenu=eb})(this.BX.AI=this.BX.AI||{},BX.AI,BX,BX,BX,BX.UI,BX,BX.AI,BX,BX,BX,BX.UI.Feedback,BX.UI,BX.AI,BX.AI,BX.Event,BX.Main,BX.UI.IconSet,BX,BX.AI);
//# sourceMappingURL=copilot.bundle.map.js