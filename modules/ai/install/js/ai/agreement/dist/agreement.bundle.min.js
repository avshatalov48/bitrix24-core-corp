this.BX=this.BX||{};(function(e,s,t,a,l){"use strict";let i=e=>e,r;var o=babelHelpers.classPrivateFieldLooseKey("popup");var c=babelHelpers.classPrivateFieldLooseKey("title");var b=babelHelpers.classPrivateFieldLooseKey("content");var n=babelHelpers.classPrivateFieldLooseKey("onApply");var p=babelHelpers.classPrivateFieldLooseKey("createPopup");var d=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");class v{constructor(e){Object.defineProperty(this,d,{value:P});Object.defineProperty(this,p,{value:h});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e.content||"";babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e.title||"";babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e.onApply}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,o)[o]){babelHelpers.classPrivateFieldLooseBase(this,o)[o]=babelHelpers.classPrivateFieldLooseBase(this,p)[p]();babelHelpers.classPrivateFieldLooseBase(this,o)[o].show()}babelHelpers.classPrivateFieldLooseBase(this,o)[o].show()}hide(){if(babelHelpers.classPrivateFieldLooseBase(this,o)[o]){babelHelpers.classPrivateFieldLooseBase(this,o)[o].close()}}}function h(){const e=window.innerHeight-60;return new t.Popup({closeIcon:true,maxWidth:800,maxHeight:e,disableScroll:true,titleBar:babelHelpers.classPrivateFieldLooseBase(this,c)[c],content:babelHelpers.classPrivateFieldLooseBase(this,d)[d](),overlay:true,cacheable:false,className:"ai__copilot-agreement_popup",contentColor:getComputedStyle(document.body).getPropertyValue("--ui-color-base-02"),buttons:[new a.Button({text:l.Loc.getMessage("AI_AGREEMENT_ACCEPT"),color:a.Button.Color.SUCCESS,onclick:e=>{if(l.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,n)[n])){e.setState(a.Button.State.CLOCKING);if(l.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,n)[n])){babelHelpers.classPrivateFieldLooseBase(this,n)[n]().then((()=>{this.hide();e.setState(null)})).catch((s=>{console.error(s);e.setState(null)}))}}}})]})}function P(){return l.Tag.render(r||(r=i`
			<div class="ai__picker_agreement">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,b)[b])}var u=babelHelpers.classPrivateFieldLooseKey("engine");var L=babelHelpers.classPrivateFieldLooseKey("agreement");var H=babelHelpers.classPrivateFieldLooseKey("type");var B=babelHelpers.classPrivateFieldLooseKey("engineCode");var F=babelHelpers.classPrivateFieldLooseKey("acceptAgreement");class y{constructor(e){Object.defineProperty(this,F,{value:g});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e.agreement;babelHelpers.classPrivateFieldLooseBase(this,u)[u]=e.engine;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=e.type;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=e.engineCode}showAgreementPopup(e){const s=babelHelpers.classPrivateFieldLooseBase(this,L)[L];const t=new v({title:s.title,content:s.text,onApply:()=>new Promise(((t,a)=>{babelHelpers.classPrivateFieldLooseBase(this,F)[F]().then((()=>{s.accepted=true;e();t()})).catch((()=>{BX.UI.Notification.Center.notify({content:l.Loc.getMessage("AI_COPILOT_AGREE_WITH_TERMS_SERVER_ERROR")});a()}))}))});t.show()}}function g(){if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]==="text"){return babelHelpers.classPrivateFieldLooseBase(this,u)[u].acceptTextAgreement(babelHelpers.classPrivateFieldLooseBase(this,B)[B])}if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]==="image"){return babelHelpers.classPrivateFieldLooseBase(this,u)[u].acceptImageAgreement(babelHelpers.classPrivateFieldLooseBase(this,B)[B])}throw new Error('AI: Agreement: acceptAgreement: Type can be "text" or "image"')}e.Agreement=y})(this.BX.AI=this.BX.AI||{},BX.AI,BX.Main,BX.UI,BX);
//# sourceMappingURL=agreement.bundle.map.js