{"version":3,"file":"copilot-banner.bundle.js","sources":["../src/copilot-banner.js","../src/apps-installer-banner.js"],"sourcesContent":["import { bind, Extension, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Popup } from 'main.popup';\nimport { Icon, Main as MainIconSet } from 'ui.icon-set.api.core';\nimport 'ui.hint';\n\nimport './css/copilot-banner.css';\n\nexport const CopilotBannerEvents = Object.freeze({\n\tactionStart: 'action-start',\n\tactionFinishSuccess: 'action-finish-success',\n\tactionFinishFailed: 'action-finish-failed',\n});\n\nexport type CopilotBannerOptions = {\n\tisWestZone: boolean;\n\tbuttonClickHandler: Function;\n}\n\nexport class CopilotBanner extends EventEmitter\n{\n\t#popup: Popup = null;\n\t#isWestZone: boolean;\n\t#buttonClickHandler: Function;\n\n\tconstructor(options: CopilotBannerOptions)\n\t{\n\t\tsuper(options);\n\n\t\tconst settings = Extension.getSettings('ai.copilot-banner');\n\n\t\tthis.#isWestZone = settings.get('isWestZone');\n\t\tthis.#buttonClickHandler = options.buttonClickHandler ?? (() => {});\n\n\t\tthis.setEventNamespace('AI:CopilotBanner');\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#getPopup().show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#getPopup().close();\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\tif (!this.#popup)\n\t\t{\n\t\t\treturn this.#createPopup();\n\t\t}\n\n\t\treturn this.#popup;\n\t}\n\n\t#createPopup(): Popup\n\t{\n\t\tthis.#popup = new Popup({\n\t\t\tmaxWidth: 854,\n\t\t\tminWidth: 700,\n\t\t\tminHeight: 520,\n\t\t\tcontent: this.#renderPopupContent(),\n\t\t\tpadding: 0,\n\t\t\tborderRadius: '18px',\n\t\t\toverlay: {\n\t\t\t\tbackgroundColor: '#000',\n\t\t\t\topacity: 70,\n\t\t\t},\n\t\t\tanimation: 'fading',\n\t\t\tdisableScroll: false,\n\t\t\tclassName: 'ai__copilot-banner_popup',\n\t\t});\n\n\t\treturn this.#popup;\n\t}\n\n\t#renderPopupContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-banner_content\">\n\t\t\t\t${this.#renderCopilotBannerIcon()}\n\t\t\t\t<div class=\"ai__copilot-banner_content-inner\">\n\t\t\t\t\t<div class=\"ai__copilot-banner_starlight\"></div>\n\t\t\t\t\t${this.#renderPlatesByZone()}\n\t\t\t\t\t<div class=\"ai__copilot-banner_main\">\n\t\t\t\t\t\t<p class=\"ai__copilot-banner_text\">${this.#getTextWithAccents('AI_COPILOT_BANNER_TEXT_1')}</p>\n\t\t\t\t\t\t<p class=\"ai__copilot-banner_text\">${this.#getTextWithAccents('AI_COPILOT_BANNER_TEXT_2')}</p>\n\t\t\t\t\t\t<p class=\"ai__copilot-banner_text\">${this.#getTextWithAccents('AI_COPILOT_BANNER_TEXT_3')}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<footer class=\"ai__copilot-banner_footer\">\n\t\t\t\t\t<div class=\"ai__copilot-banner_footer-text\">\n\t\t\t\t\t\t${this.#renderTitle()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#renderButton()}\n\t\t\t\t</footer>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderPlatesByZone(): HTMLElement\n\t{\n\t\tif (this.#isWestZone)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ai__copilot-banner_plates\">\n\t\t\t\t\t<div class=\"ai__copilot-banner_plate --google\"></div>\n\t\t\t\t\t<div class=\"ai__copilot-banner_plate --open-ai\"></div>\n\t\t\t\t\t<div class=\"ai__copilot-banner_plate --market\"></div>\n\t\t\t\t\t<div class=\"ai__copilot-banner_plate --meta\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-banner_plates\">\n\t\t\t\t<div class=\"ai__copilot-banner_plate --ygpt\"></div>\n\t\t\t\t<div class=\"ai__copilot-banner_plate --its\"></div>\n\t\t\t\t<div class=\"ai__copilot-banner_plate --market\"></div>\n\t\t\t\t<div class=\"ai__copilot-banner_plate --giga-chat\"></div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderCopilotBannerIcon(): HTMLElement\n\t{\n\t\tconst icon = new Icon({\n\t\t\tsize: 88,\n\t\t\tcolor: '#fff',\n\t\t\ticon: MainIconSet.COPILOT_AI,\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ai__copilot-banner_icon-wrapper\">\n\t\t\t\t<div class=\"ai__copilot-banner_icon-bg\"></div>\n\t\t\t\t${icon.render()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getTextWithAccents(phraseCode: string): string\n\t{\n\t\treturn Loc.getMessage(phraseCode, {\n\t\t\t'#accent#': '<span class=\"--accent\">',\n\t\t\t'#/accent#': '</span>',\n\t\t});\n\t}\n\n\t#renderTitle(): HTMLElement\n\t{\n\t\tconst titleText = Loc.getMessage(\n\t\t\t'AI_COPILOT_BANNER_TITLE',\n\t\t\t{\n\t\t\t\t'#hint-start#': '<span class=\"ai__copilot-banner_title-hint\">',\n\t\t\t\t'#hint-end#': '</span>',\n\t\t\t},\n\t\t);\n\n\t\tconst title = Tag.render`\n\t\t\t<h4 class=\"ai__copilot-banner_title\">\n\t\t\t\t${titleText}\n\t\t\t</h4>\n\t\t`;\n\n\t\tconst titlePartWithHint = title.querySelector('.ai__copilot-banner_title-hint');\n\n\t\tconst hintContent = `<div>${Loc.getMessage('AI_COPILOT_BANNER_TITLE_HINT')}</div>`;\n\n\t\tconst hint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\tclassName: 'ai__copilot-banner-hint-popup',\n\t\t\t\tborderRadius: '3px',\n\t\t\t},\n\t\t});\n\n\t\tbind(titlePartWithHint, 'mouseenter', () => {\n\t\t\thint.show(titlePartWithHint, hintContent, true);\n\t\t});\n\n\t\tbind(titlePartWithHint, 'mouseleave', () => {\n\t\t\thint.hide(titlePartWithHint);\n\t\t});\n\n\t\treturn title;\n\t}\n\n\t#renderButton(): HTMLElement\n\t{\n\t\tconst btn = Tag.render`\n\t\t\t<button class=\"ai__copilot-banner_btn\">\n\t\t\t\t${Loc.getMessage('AI_COPILOT_START_USING_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\n\t\tbind(btn, 'click', this.#handleButtonClick.bind(this));\n\n\t\treturn btn;\n\t}\n\n\tasync #handleButtonClick(): void\n\t{\n\t\tthis.emit(CopilotBannerEvents.actionStart);\n\t\ttry\n\t\t{\n\t\t\tawait this.#buttonClickHandler();\n\t\t\tthis.emit(CopilotBannerEvents.actionFinishSuccess);\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tconsole.error(e);\n\t\t\tthis.emit(CopilotBannerEvents.actionFinishFailed);\n\t\t}\n\t\tfinally\n\t\t{\n\t\t\tthis.hide();\n\t\t}\n\t}\n}\n","import { CopilotBanner, CopilotBannerEvents, type CopilotBannerOptions } from './copilot-banner';\nimport { EventEmitter } from 'main.core.events';\n\nexport type AppsInstallerBannerOptions = {\n\tcopilotBannerOptions: CopilotBannerOptions;\n}\n\nexport const AppsInstallerBannerEvents = Object.freeze({\n\t...CopilotBannerEvents,\n});\n\nexport class AppsInstallerBanner extends EventEmitter\n{\n\t#copilotBanner: CopilotBanner;\n\t#copilotBannerOptions: CopilotBannerOptions;\n\n\tconstructor(options: AppsInstallerBannerOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('AI:AppsInstallerBanner');\n\n\t\tthis.#copilotBannerOptions = options.copilotBannerOptions ?? {};\n\t\tthis.#copilotBanner = new CopilotBanner({\n\t\t\t...this.#copilotBannerOptions,\n\t\t\tbuttonClickHandler: this.#installApp.bind(this),\n\t\t});\n\n\t\tthis.#copilotBanner.subscribe(CopilotBannerEvents.actionStart, () => {\n\t\t\tthis.emit(AppsInstallerBannerEvents.actionStart);\n\t\t});\n\n\t\tthis.#copilotBanner.subscribe(CopilotBannerEvents.actionFinishSuccess, () => {\n\t\t\tthis.emit(AppsInstallerBannerEvents.actionFinishSuccess);\n\t\t});\n\n\t\tthis.#copilotBanner.subscribe(CopilotBannerEvents.actionFinishFailed, () => {\n\t\t\tthis.emit(AppsInstallerBannerEvents.actionFinishFailed);\n\t\t});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#copilotBanner.show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#copilotBanner.hide();\n\t}\n\n\tasync #installApp(): Promise<void>\n\t{\n\t\t// eslint-disable-next-line no-useless-return\n\t\treturn;\n\t}\n}\n"],"names":["CopilotBannerEvents","Object","freeze","actionStart","actionFinishSuccess","actionFinishFailed","CopilotBanner","EventEmitter","constructor","options","settings","Extension","getSettings","get","buttonClickHandler","setEventNamespace","show","hide","close","Popup","maxWidth","minWidth","minHeight","content","padding","borderRadius","overlay","backgroundColor","opacity","animation","disableScroll","className","Tag","render","icon","Icon","size","color","MainIconSet","COPILOT_AI","phraseCode","Loc","getMessage","titleText","title","titlePartWithHint","querySelector","hintContent","hint","BX","UI","Hint","createInstance","popupParameters","bind","btn","emit","e","console","error","AppsInstallerBannerEvents","AppsInstallerBanner","copilotBannerOptions","subscribe"],"mappings":"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"}