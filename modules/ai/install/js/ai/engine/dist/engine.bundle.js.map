{"version":3,"file":"engine.bundle.js","sources":["../src/payload/basepayload.js","../src/payload/textpayload.js","../src/engine.js"],"sourcesContent":["export type BasePayloadMarkers = {\n\t[key: string]: string\n}\n\nexport class Base\n{\n\tpayload: any = null;\n\tmarkers: {[key: string]: string} = {};\n\n\tconstructor(payload: any)\n\t{\n\t\tthis.payload = payload;\n\t}\n\n\tsetMarkers(markers: BasePayloadMarkers): this\n\t{\n\t\tthis.markers = markers;\n\n\t\treturn this;\n\t}\n\n\tgetMarkers(): BasePayloadMarkers\n\t{\n\t\treturn this.markers;\n\t}\n\n\t/**\n\t * Returns data in pretty style.\n\t *\n\t * @return {*}\n\t */\n\tgetPrettifiedData(): any\n\t{\n\t\treturn this.payload;\n\t}\n\n\t/**\n\t * Returns data in raw style.\n\t *\n\t * @return {*}\n\t */\n\tgetRawData(): any\n\t{\n\t\treturn this.payload;\n\t}\n}\n","import { Base, type BasePayloadMarkers } from './basepayload';\n\ntype TextPayloadPromptCommand = {\n\tcode: string;\n}\n\ntype TextPayload = {\n\tprompt: TextPayloadPromptCommand | string;\n\tengineCode?: string;\n\troleCode?: string;\n}\n\ntype TextPayloadMarkers = {\n\toriginal_message?: string,\n\tuser_message?: string;\n} & BasePayloadMarkers;\n\nexport class Text extends Base\n{\n\tpayload: TextPayload;\n\n\t/**\n\t *\n\t * @param {TextPayload} payload\n\t */\n\t// eslint-disable-next-line no-useless-constructor\n\tconstructor(payload: TextPayload) {\n\t\tsuper(payload);\n\t}\n\n\tsetMarkers(markers: TextPayloadMarkers): this {\n\t\treturn super.setMarkers(markers);\n\t}\n\n\tgetMarkers(): TextPayloadMarkers {\n\t\treturn super.getMarkers();\n\t}\n\n\tgetPrettifiedData(): TextPayload\n\t{\n\t\treturn super.getPrettifiedData();\n\t}\n\n\tgetRawData(): TextPayload\n\t{\n\t\treturn super.getRawData();\n\t}\n}\n","import { ajax, Http, Loc, addCustomEvent, type AjaxResponse } from 'main.core';\n\nimport { Base as PayloadBase } from './payload/basepayload';\nimport { Text as PayloadText } from './payload/textpayload';\n\nexport const Base: PayloadBase = PayloadBase;\nexport const Text: PayloadText = PayloadText;\n\nexport class Engine\n{\n\tstatic textCompletionsUrl \t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.text.completions';\n\tstatic imageCompletionsUrl \t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.image.completions';\n\tstatic textAcceptationUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.text.acceptation';\n\tstatic textFeedbackDataUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.text.getFeedbackData';\n\tstatic imageAcceptationUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.image.acceptation';\n\tstatic saveImageUrl\t\t\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.image.save';\n\tstatic getToolingUrl\t\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.tooling.get';\n\tstatic getImageToolingUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.image.getTooling';\n\tstatic getImageParamsUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.image.getParams';\n\tstatic installKitUrl\t\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.tooling.installKit';\n\tstatic getRolesListUrl\t\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.role.list';\n\tstatic getRolesDialogDataUrl\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.role.picker';\n\tstatic addRoleToFavouriteListUrl\t\t= '/bitrix/services/main/ajax.php?action=ai.api.role.addfavorite';\n\tstatic removeRoleFromFavouriteListUrl\t= '/bitrix/services/main/ajax.php?action=ai.api.role.removefavorite';\n\tstatic acceptAgreementUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.agreement.accept';\n\tstatic checkAgreementUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.agreement.check';\n\tstatic setBannerLaunchedUrl\t\t\t\t= '/bitrix/services/main/ajax.php?action=ai.api.tooling.setLaunched';\n\n\t#moduleId: string;\n\t#contextId: string;\n\t#contextParameters: any;\n\t#payload: PayloadBase;\n\t#historyState: boolean = false;\n\t/**\n\t * -1 - no grouped, 0 - first item of group\n\t * @type {?number}\n\t */\n\t#historyGroupId: ?number = -1;\n\t#parameters: {[key: string]: string} = {};\n\t#analyticParameters: { [key: string]: string } = {};\n\n\t/**\n\t * Sets Payload for Engine.\n\t *\n\t * @param {PayloadBase} payload\n\t * @return {Engine}\n\t */\n\tsetPayload(payload: PayloadBase): this\n\t{\n\t\tthis.#payload = payload;\n\n\t\treturn this;\n\t}\n\n\tgetPayload(): PayloadBase | undefined\n\t{\n\t\treturn this.#payload;\n\t}\n\n\t/**\n\t * Sets allowed (by core) parameters for Engine.\n\t *\n\t * @param {{[key: string]: string}} parameters\n\t * @return {Engine}\n\t */\n\tsetParameters(parameters: {[key: string]: string}): this\n\t{\n\t\tthis.#parameters = parameters;\n\n\t\treturn this;\n\t}\n\n\tsetAnalyticParameters(parameters: {[key: string]: string}): this\n\t{\n\t\tthis.#analyticParameters = parameters;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Sets current module id. Its should be Bitrix's module.\n\t *\n\t * @param {string} moduleId\n\t * @return {Engine}\n\t */\n\tsetModuleId(moduleId: string): this\n\t{\n\t\tthis.#moduleId = moduleId;\n\n\t\treturn this;\n\t}\n\n\tgetModuleId(): string\n\t{\n\t\treturn this.#moduleId;\n\t}\n\n\t/**\n\t * Sets current context id. Its may be just a string unique within the moduleId.\n\t *\n\t * @param {string} contextId\n\t * @return {Engine}\n\t */\n\tsetContextId(contextId: string): this\n\t{\n\t\tthis.#contextId = contextId;\n\n\t\treturn this;\n\t}\n\n\tgetContextId(): string\n\t{\n\t\treturn this.#contextId;\n\t}\n\n\tsetContextParameters(contextParameters: any): this\n\t{\n\t\tthis.#contextParameters = contextParameters;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Write or not history, in depend on $state.\n\t *\n\t * @param {boolean} state\n\t * @return {Engine}\n\t */\n\tsetHistoryState(state: boolean): this\n\t{\n\t\tthis.#historyState = state;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Set group ID for save history.\n\t * -1 - no grouped, 0 - first item of group\n\t * @param id\n\t * @return {Engine}\n\t */\n\tsetHistoryGroupId(id: ?number): this\n\t{\n\t\tthis.#historyGroupId = id;\n\n\t\treturn this;\n\t}\n\n\tsetBannerLaunched(): Promise<void>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\treturn this.#send(Engine.setBannerLaunchedUrl, {\n\t\t\tparameters: this.#parameters,\n\t\t});\n\t}\n\n\tasync checkAgreement(): Promise<AjaxResponse<boolean>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\treturn this.#send(Engine.checkAgreementUrl, {\n\t\t\tparameters: this.#parameters,\n\t\t\tagreementCode: 'AI_BOX_AGREEMENT',\n\t\t});\n\t}\n\n\tacceptAgreement(): Promise<AjaxResponse<boolean>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\treturn this.#send(Engine.acceptAgreementUrl, {\n\t\t\tparameters: this.#parameters,\n\t\t\tagreementCode: 'AI_BOX_AGREEMENT',\n\t\t});\n\t}\n\n\t/**\n\t * Makes request for text completions.\n\t *\n\t * @return {Promise}\n\t */\n\ttextCompletions(): Promise<CompletionsResponse>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\treturn this.#send(Engine.textCompletionsUrl, {\n\t\t\tprompt: this.#payload.getRawData().prompt,\n\t\t\tengineCode: this.#payload.getRawData().engineCode,\n\t\t\troleCode: this.#payload.getRawData()?.roleCode,\n\t\t\tmarkers: this.#payload.getMarkers(),\n\t\t\tparameters: this.#parameters,\n\t\t});\n\t}\n\n\t/**\n\t * Makes request for image completions.\n\t *\n\t * @return {Promise}\n\t */\n\timageCompletions(): Promise<CompletionsResponse>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\treturn this.#send(Engine.imageCompletionsUrl, {\n\t\t\tprompt: this.#payload.getRawData().prompt,\n\t\t\tengineCode: this.#payload.getRawData().engineCode,\n\t\t\tmarkers: this.#payload.getMarkers(),\n\t\t\tparameters: this.#parameters,\n\t\t});\n\t}\n\n\tgetTooling(category: string): Promise<GetToolingResponse>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tthis.#parameters.category = this.#parameters.promptCategory;\n\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t\tcategory: this.#parameters.promptCategory,\n\t\t\tmoduleId: this.#moduleId,\n\t\t\tcontext: this.#contextId,\n\t\t};\n\n\t\treturn ajax.runAction('ai.prompt.getPromptsForUser', {\n\t\t\tdata: Http.Data.convertObjectToFormData(data),\n\t\t\tmethod: 'POST',\n\t\t\tstart: false,\n\t\t\tpreparePost: false,\n\t\t});\n\t}\n\n\tgetImagePickerTooling(): Promise<AjaxResponse>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t\tcategory: 'image',\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.getToolingUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\tgetImageCopilotTooling(): Promise<AjaxResponse<GetImageCopilotToolingResponseData>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.getImageToolingUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\tgetImageEngineParams(engineCode: string): Promise<AjaxResponse<ImageCopilotParams>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tengineCode,\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.getImageParamsUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\tasync getRolesDialogData(): Promise<AjaxResponse<GetRolesDialogDataResponseData>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.getRolesDialogDataUrl, data);\n\t}\n\n\tasync getRoles(): Promise<AjaxResponse<RoleIndustryItems>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.getRolesListUrl, data);\n\t}\n\n\tasync addRoleToFavouriteList(roleCode: string): Promise<AjaxResponse<RoleIndustryItems>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\troleCode,\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.addRoleToFavouriteListUrl, data);\n\t}\n\n\tasync removeRoleFromFavouriteList(roleCode: string): Promise<AjaxResponse<RoleIndustryItems>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\troleCode,\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.removeRoleFromFavouriteListUrl, data);\n\t}\n\n\tinstallKit(code: string): Promise<void>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tcode,\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.installKitUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\t/**\n\t * Send user's acceptation of agreement.\n\t *\n\t * @return {Promise<string>}\n\t */\n\tacceptImageAgreement(engineCode: string): Promise<EngineRequestResponse<boolean>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tengineCode,\n\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.imageAcceptationUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\tacceptTextAgreement(engineCode: string): Promise<EngineRequestResponse<boolean>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tengineCode,\n\t\t\tsessid: Loc.getMessage('bitrix_sessid'),\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl: Engine.textAcceptationUrl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: reject,\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\tsaveImage(imageUrl: string): Promise<EngineRequestResponse<number>>\n\t{\n\t\tthis.#addSystemParameters();\n\n\t\tconst data = {\n\t\t\tpictureUrl: imageUrl,\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.saveImageUrl, data);\n\t}\n\n\tgetFeedbackData(): Promise<GetFeedbackContextDataResponse>\n\t{\n\t\tconst data = {\n\t\t\tparameters: this.#parameters,\n\t\t};\n\n\t\treturn this.#send(Engine.textFeedbackDataUrl, data);\n\t}\n\n\t/**\n\t * Adds additional system parameters.\n\t */\n\t#addSystemParameters(): void\n\t{\n\t\tthis.#parameters.bx_module = this.#moduleId;\n\t\tthis.#parameters.bx_context = this.#contextId;\n\t\tthis.#parameters.bx_context_parameters = this.#contextParameters;\n\t\tthis.#parameters.bx_history = this.#historyState;\n\t\tthis.#parameters.bx_history_group_id = this.#historyGroupId;\n\t\tthis.#parameters.bx_analytic = this.#analyticParameters;\n\t}\n\n\t/**\n\t * Registers pull listener if response from the Controller is a queue's hash.\n\t *\n\t * @param {string} queueHash\n\t * @param {() => {}} resolve\n\t * @param {() => {}} reject\n\t */\n\t#registerPullListener(queueHash: string, resolve: () => {}, reject: () => {}): void\n\t{\n\t\taddCustomEvent('onPullEvent-ai', (command, params) => {\n\t\t\tconst { hash, data, error } = params;\n\t\t\tif (command === 'onQueueJobExecute' && hash === queueHash)\n\t\t\t{\n\t\t\t\tresolve({ data });\n\t\t\t}\n\t\t\telse if (command === 'onQueueJobFail' && hash === queueHash)\n\t\t\t{\n\t\t\t\treject({ errors: [error] });\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Makes request to the Controller.\n\t *\n\t * @param {string} url\n\t * @param {Object} data\n\t * @return {Promise}\n\t */\n\t#send(url: string, data: Object): Promise\n\t{\n\t\tif (this.#isOffline())\n\t\t{\n\t\t\treturn Promise.reject(new Error(Loc.getMessage('AI_ENGINE_INTERNET_PROBLEM')));\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst fd = Http.Data.convertObjectToFormData(data);\n\t\t\tconst xhr = ajax({\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\turl,\n\t\t\t\tdata: fd,\n\t\t\t\tstart: false,\n\t\t\t\tpreparePost: false,\n\t\t\t\tonsuccess: (response) => {\n\t\t\t\t\tif (response.status === 'error')\n\t\t\t\t\t{\n\t\t\t\t\t\treject(response);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst queueHash = response.data?.queue;\n\t\t\t\t\t\tif (queueHash)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#registerPullListener(queueHash, resolve, reject);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonfailure: (res, resData) => {\n\t\t\t\t\tif (res === 'processing' && resData?.bProactive === true)\n\t\t\t\t\t{\n\t\t\t\t\t\treject(resData.data);\n\t\t\t\t\t}\n\n\t\t\t\t\treject(res);\n\t\t\t\t},\n\t\t\t});\n\n\t\t\txhr.send(fd);\n\t\t});\n\t}\n\n\t#isOffline(): boolean\n\t{\n\t\treturn !window.navigator.onLine;\n\t}\n}\n\nexport type GetToolingResponse = EngineRequestResponse<GetToolingResultData>;\nexport type CompletionsResponse = EngineRequestResponse<CompletionsResultData>;\nexport type GetFeedbackContextDataResponse = EngineRequestResponse<FeedbackContextResultData>;\n\ntype EngineRequestResponse<T> = {\n\tdata: T;\n\tstatus: 'success' | 'error';\n\terrors: [];\n}\n\nexport type GetToolingResultData = {\n\tengines: EngineInfo[];\n\thistory: History;\n\tpromptsFavorite: Prompt[] | null;\n\tpromptsOther: Prompt[] | null;\n\tpromptsSystem: Prompt[] | null;\n\tkits: Kit[];\n\tfirst_launch: boolean;\n\tpermissions: Permissions;\n\trole: Role;\n}\n\ntype Permissions = {\n\tcan_edit_settings: boolean;\n}\n\ntype Kit = {\n\tcode: string;\n\tinstalled: boolean;\n\tinstall_started: boolean;\n}\n\nexport type EngineInfo = {\n\tagreement: EngineInfoAgreement;\n\tcode: string;\n\ttitle: string;\n\texpired: boolean;\n\tinTariff: boolean;\n\tpartner: boolean;\n\tqueue: boolean;\n\tselected: boolean;\n}\n\ntype EngineInfoAgreement = {\n\taccepted: boolean;\n\ttext: string;\n\ttitle: string;\n}\n\ntype History = {\n\tcapacity: number;\n\titems: HistoryItem[];\n}\n\ntype HistoryItem = {\n\tdata: string;\n\tdate: string;\n\tengineCode: string;\n\tid: number;\n\tpayload: string;\n};\n\nexport type Prompt = PromptCommand | PromptCommandSeparator;\n\ntype PromptCommandSeparator = {\n\tsection: string;\n\tseparator: true;\n\ttitle: string;\n}\n\ntype PromptCommand = {\n\ticon: string;\n\tcode: string;\n\ttitle: string;\n\trequired: PromptCommandRequired;\n\tchildren: Prompt;\n\ttext: string;\n\ttype: PromptCommandType;\n\tisFavorite: boolean;\n}\n\ntype PromptCommandType = null | 'default' | 'simpleTemplate';\n\ntype PromptCommandRequired = {\n\tcontext_message: boolean;\n\tuser_message: boolean;\n}\n\ntype CompletionsResultData = {\n\tlast: HistoryItem;\n\tqueue: boolean | null;\n\tresult: string;\n};\n\ntype FeedbackContextResultData = {\n\tcontext_messages: Array;\n\toriginal_message: string | null;\n}\n\nexport type GetRolesDialogDataResponseData = {\n\titems: RoleIndustry[];\n\trecents: Role[];\n\tfavorites: Role[];\n\tuniversalRole: Role[];\n}\n\nexport type RoleIndustryItems = {\n\titems: RoleIndustry[];\n}\n\nexport type RoleIndustry = {\n\tcode: string;\n\tname: string;\n\troles: Role[];\n\tisNew: boolean;\n}\n\nexport type Role = {\n\tavatar: RoleAvatar;\n\tcode: string;\n\tindustryCode: string;\n\tname: string;\n\tdescription: string;\n\tisRecommended: boolean;\n\tisNew: boolean;\n}\n\ntype RoleAvatar = {\n\tsmall: string;\n\tmedium: string;\n\tlarge: string;\n}\n\nexport type GetImageCopilotToolingResponseData = {\n\tengines: EngineInfo[];\n\tfirst_launch: boolean;\n\tparams: ImageCopilotParams;\n\tportal_zone: string;\n}\n\nexport type ImageCopilotParams = {\n\tformats: ImageCopilotFormat[];\n\tstyles: ImageCopilotStyle[];\n}\n\nexport type ImageCopilotFormat = {\n\tcode: string;\n\tname: string;\n}\n\nexport type ImageCopilotStyle = {\n\tcode: string;\n\tname: string;\n\tpreview: string;\n}\n"],"names":["Base","payload","markers","Text","PayloadBase","PayloadText","Engine","parameters","moduleId","contextId","contextParameters","state","id","setBannerLaunchedUrl","checkAgreementUrl","agreementCode","acceptAgreementUrl","textCompletionsUrl","prompt","getRawData","engineCode","roleCode","getMarkers","imageCompletionsUrl","category","promptCategory","data","context","ajax","runAction","Http","Data","convertObjectToFormData","method","start","preparePost","Promise","resolve","reject","fd","xhr","dataType","url","getToolingUrl","onsuccess","response","status","onfailure","send","getImageToolingUrl","getImageParamsUrl","getRolesDialogDataUrl","getRolesListUrl","addRoleToFavouriteListUrl","removeRoleFromFavouriteListUrl","code","installKitUrl","sessid","Loc","getMessage","imageAcceptationUrl","textAcceptationUrl","imageUrl","pictureUrl","saveImageUrl","textFeedbackDataUrl","bx_module","bx_context","bx_context_parameters","bx_history","bx_history_group_id","bx_analytic","queueHash","addCustomEvent","command","params","hash","error","errors","Error","queue","res","resData","bProactive","window","navigator","onLine"],"mappings":";;;;;KAIaA,IAAI;GAKhB,cAAYC,OAAY,EACxB;KAAA;KAAA,6CAJe,IAAI;KAAA,6CACgB,EAAE;KAIpC,IAAI,CAACA,OAAO,GAAGA,OAAO;;GACtB;KAAA;KAAA,2BAEUC,OAA2B,EACtC;OACC,IAAI,CAACA,OAAO,GAAGA,OAAO;OAEtB,OAAO,IAAI;;;KACX;KAAA,6BAGD;OACC,OAAO,IAAI,CAACA,OAAO;;;CAIrB;CACA;CACA;CACA;;KAJC;KAAA,oCAMA;OACC,OAAO,IAAI,CAACD,OAAO;;;CAIrB;CACA;CACA;CACA;;KAJC;KAAA,6BAMA;OACC,OAAO,IAAI,CAACA,OAAO;;;GACnB;CAAA;;KC3BWE,IAAI;GAAA;;CAKjB;CACA;CACA;;GAEC,cAAYF,OAAoB,EAAE;KAAA;KAAA,iGAC3BA,OAAO;;GACb;KAAA;KAAA,2BAEUC,OAA2B,EAAQ;OAC7C,oGAAwBA,OAAO;;;KAC/B;KAAA,6BAEgC;OAChC;;;KACA;KAAA,oCAGD;OACC;;;KACA;KAAA,6BAGD;OACC;;;GACA;CAAA,EA7BwBF,IAAI;;;CChB9B;CAAA;CAAA;CAAA;AADA,KAKaA,MAAiB,GAAGI;AACjC,KAAaD,MAAiB,GAAGE;CAAY;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAE7C,KAAaC,MAAM;GAAA;KAAA;KAAA;KAAA;KAAA;KAAA;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAwBO;;KAAK;OAAA;OAAA,OAKH,CAAC;;KAAC;OAAA;OAAA,OACU;;KAAE;OAAA;OAAA,OACQ;;;GAAE;KAAA;;CAGpD;CACA;CACA;CACA;CACA;KALC,2BAMWL,OAAoB,EAC/B;OACC,sCAAI,YAAYA,OAAO;OAEvB,OAAO,IAAI;;;KACX;KAAA,6BAGD;OACC,yCAAO,IAAI;;;CAIb;CACA;CACA;CACA;CACA;;KALC;KAAA,8BAMcM,UAAmC,EACjD;OACC,sCAAI,eAAeA,UAAU;OAE7B,OAAO,IAAI;;;KACX;KAAA,sCAEqBA,UAAmC,EACzD;OACC,sCAAI,uBAAuBA,UAAU;OAErC,OAAO,IAAI;;;CAIb;CACA;CACA;CACA;CACA;;KALC;KAAA,4BAMYC,QAAgB,EAC5B;OACC,sCAAI,aAAaA,QAAQ;OAEzB,OAAO,IAAI;;;KACX;KAAA,8BAGD;OACC,yCAAO,IAAI;;;CAIb;CACA;CACA;CACA;CACA;;KALC;KAAA,6BAMaC,SAAiB,EAC9B;OACC,sCAAI,cAAcA,SAAS;OAE3B,OAAO,IAAI;;;KACX;KAAA,+BAGD;OACC,yCAAO,IAAI;;;KACX;KAAA,qCAEoBC,iBAAsB,EAC3C;OACC,sCAAI,sBAAsBA,iBAAiB;OAE3C,OAAO,IAAI;;;CAIb;CACA;CACA;CACA;CACA;;KALC;KAAA,gCAMgBC,KAAc,EAC9B;OACC,sCAAI,iBAAiBA,KAAK;OAE1B,OAAO,IAAI;;;CAIb;CACA;CACA;CACA;CACA;;KALC;KAAA,kCAMkBC,EAAW,EAC7B;OACC,sCAAI,mBAAmBA,EAAE;OAEzB,OAAO,IAAI;;;KACX;KAAA,oCAGD;OACC,2BAAI,oDAAJ,IAAI;OAEJ,8BAAO,IAAI,sBAAJ,IAAI,EAAON,MAAM,CAACO,oBAAoB,EAAE;SAC9CN,UAAU,oCAAE,IAAI;QAChB;;;KACD;KAAA;OAAA;SAAA;WAAA;aAAA;eAIA,2BAAI,oDAAJ,IAAI;eAAwB,wDAErB,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAACQ,iBAAiB,EAAE;iBAC3CP,UAAU,oCAAE,IAAI,cAAY;iBAC5BQ,aAAa,EAAE;gBACf;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA,kCAIF;OACC,2BAAI,oDAAJ,IAAI;OAEJ,8BAAO,IAAI,sBAAJ,IAAI,EAAOT,MAAM,CAACU,kBAAkB,EAAE;SAC5CT,UAAU,oCAAE,IAAI,cAAY;SAC5BQ,aAAa,EAAE;QACf;;;CAIH;CACA;CACA;CACA;;KAJC;KAAA,kCAMA;OAAA;OACC,2BAAI,oDAAJ,IAAI;OAEJ,8BAAO,IAAI,sBAAJ,IAAI,EAAOT,MAAM,CAACW,kBAAkB,EAAE;SAC5CC,MAAM,EAAE,sCAAI,YAAUC,UAAU,EAAE,CAACD,MAAM;SACzCE,UAAU,EAAE,sCAAI,YAAUD,UAAU,EAAE,CAACC,UAAU;SACjDC,QAAQ,2BAAE,sCAAI,YAAUF,UAAU,EAAE,0DAA1B,sBAA4BE,QAAQ;SAC9CnB,OAAO,EAAE,sCAAI,YAAUoB,UAAU,EAAE;SACnCf,UAAU,oCAAE,IAAI;QAChB;;;CAIH;CACA;CACA;CACA;;KAJC;KAAA,mCAMA;OACC,2BAAI,oDAAJ,IAAI;OAEJ,8BAAO,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAACiB,mBAAmB,EAAE;SAC7CL,MAAM,EAAE,sCAAI,YAAUC,UAAU,EAAE,CAACD,MAAM;SACzCE,UAAU,EAAE,sCAAI,YAAUD,UAAU,EAAE,CAACC,UAAU;SACjDlB,OAAO,EAAE,sCAAI,YAAUoB,UAAU,EAAE;SACnCf,UAAU,oCAAE,IAAI;QAChB;;;KACD;KAAA,2BAEUiB,QAAgB,EAC3B;OACC,2BAAI,oDAAJ,IAAI;OAEJ,sCAAI,eAAaA,QAAQ,GAAG,sCAAI,eAAaC,cAAc;OAE3D,IAAMC,IAAI,GAAG;SACZnB,UAAU,oCAAE,IAAI,cAAY;SAC5BiB,QAAQ,EAAE,sCAAI,eAAaC,cAAc;SACzCjB,QAAQ,oCAAE,IAAI,YAAU;SACxBmB,OAAO,oCAAE,IAAI;QACb;OAED,OAAOC,cAAI,CAACC,SAAS,CAAC,6BAA6B,EAAE;SACpDH,IAAI,EAAEI,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAC7CO,MAAM,EAAE,MAAM;SACdC,KAAK,EAAE,KAAK;SACZC,WAAW,EAAE;QACb,CAAC;;;KACF;KAAA,wCAGD;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMT,IAAI,GAAG;SACZnB,UAAU,oCAAE,IAAI,cAAY;SAC5BiB,QAAQ,EAAE;QACV;OAED,OAAO,IAAIY,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAACqC,aAAa;WACzBjB,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;KACF;KAAA,yCAGD;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMb,IAAI,GAAG;SACZnB,UAAU,oCAAE,IAAI;QAChB;OAED,OAAO,IAAI6B,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAAC2C,kBAAkB;WAC9BvB,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;KACF;KAAA,qCAEoBnB,UAAkB,EACvC;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMM,IAAI,GAAG;SACZN,UAAU,EAAVA,UAAU;SACVb,UAAU,oCAAE,IAAI;QAChB;OAED,OAAO,IAAI6B,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAAC4C,iBAAiB;WAC7BxB,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;KACF;KAAA;OAAA;SAAA;SAAA;WAAA;aAAA;eAIA,2BAAI,oDAAJ,IAAI;eAEEb,IAAI,GAAG;iBACZnB,UAAU,oCAAE,IAAI;gBAChB;eAAA,yDAEM,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAAC6C,qBAAqB,EAAEzB,IAAI;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA;OAAA;SAAA;SAAA;WAAA;aAAA;eAKpD,2BAAI,oDAAJ,IAAI;eAEEA,IAAI,GAAG;iBACZnB,UAAU,oCAAE,IAAI;gBAChB;eAAA,yDAEM,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAAC8C,eAAe,EAAE1B,IAAI;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA;OAAA,uHAGlBL,QAAgB;SAAA;SAAA;WAAA;aAAA;eAE5C,2BAAI,oDAAJ,IAAI;eAEEK,IAAI,GAAG;iBACZL,QAAQ,EAARA,QAAQ;iBACRd,UAAU,oCAAE,IAAI;gBAChB;eAAA,yDAEM,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAAC+C,yBAAyB,EAAE3B,IAAI;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA;OAAA,4HAGvBL,QAAgB;SAAA;SAAA;WAAA;aAAA;eAEjD,2BAAI,oDAAJ,IAAI;eAEEK,IAAI,GAAG;iBACZL,QAAQ,EAARA,QAAQ;iBACRd,UAAU,oCAAE,IAAI;gBAChB;eAAA,yDAEM,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAACgD,8BAA8B,EAAE5B,IAAI;aAAA;aAAA;eAAA;;;;OAAA;SAAA;;OAAA;;;KAAA;KAAA,2BAGnD6B,IAAY,EACvB;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAM7B,IAAI,GAAG;SACZ6B,IAAI,EAAJA,IAAI;SACJhD,UAAU,oCAAE,IAAI;QAChB;OAED,OAAO,IAAI6B,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAACkD,aAAa;WACzB9B,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;CAIJ;CACA;CACA;CACA;;KAJC;KAAA,qCAKqBnB,UAAkB,EACvC;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMM,IAAI,GAAG;SACZN,UAAU,EAAVA,UAAU;SACVqC,MAAM,EAAEC,aAAG,CAACC,UAAU,CAAC,eAAe,CAAC;SACvCpD,UAAU,oCAAE,IAAI;QAChB;OAED,OAAO,IAAI6B,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAACsD,mBAAmB;WAC/BlC,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;KACF;KAAA,oCAEmBnB,UAAkB,EACtC;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMM,IAAI,GAAG;SACZN,UAAU,EAAVA,UAAU;SACVqC,MAAM,EAAEC,aAAG,CAACC,UAAU,CAAC,eAAe,CAAC;SACvCpD,UAAU,oCAAE,IAAI;QAChB;OAED,OAAO,IAAI6B,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;SAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;WAChBK,MAAM,EAAE,MAAM;WACdQ,QAAQ,EAAE,MAAM;WAChBC,GAAG,EAAEpC,MAAM,CAACuD,kBAAkB;WAC9BnC,IAAI,EAAEa,EAAE;WACRL,KAAK,EAAE,KAAK;WACZC,WAAW,EAAE,KAAK;WAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;aACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;eACCR,MAAM,CAACO,QAAQ,CAAC;cAChB,MAED;eACCR,OAAO,CAACQ,QAAQ,CAAC;;YAElB;WACDE,SAAS,EAAET;UACX,CAAC;SAEFE,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;QACZ,CAAC;;;KACF;KAAA,0BAESuB,QAAgB,EAC1B;OACC,2BAAI,oDAAJ,IAAI;OAEJ,IAAMpC,IAAI,GAAG;SACZqC,UAAU,EAAED,QAAQ;SACpBvD,UAAU,oCAAE,IAAI;QAChB;OAED,8BAAO,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAAC0D,YAAY,EAAEtC,IAAI;;;KAC3C;KAAA,kCAGD;OACC,IAAMA,IAAI,GAAG;SACZnB,UAAU,oCAAE,IAAI;QAChB;OAED,8BAAO,IAAI,sBAAJ,IAAI,EAAOD,MAAM,CAAC2D,mBAAmB,EAAEvC,IAAI;;;CAIpD;CACA;;GAFC;CAAA;CA8FA,iCA1FA;GACC,sCAAI,eAAawC,SAAS,qCAAG,IAAI,YAAU;GAC3C,sCAAI,eAAaC,UAAU,qCAAG,IAAI,aAAW;GAC7C,sCAAI,eAAaC,qBAAqB,qCAAG,IAAI,qBAAmB;GAChE,sCAAI,eAAaC,UAAU,qCAAG,IAAI,gBAAc;GAChD,sCAAI,eAAaC,mBAAmB,qCAAG,IAAI,kBAAgB;GAC3D,sCAAI,eAAaC,WAAW,qCAAG,IAAI,sBAAoB;CACxD;CAAC,gCASqBC,SAAiB,EAAEnC,OAAiB,EAAEC,MAAgB,EAC5E;GACCmC,wBAAc,CAAC,gBAAgB,EAAE,UAACC,OAAO,EAAEC,MAAM,EAAK;KACrD,IAAQC,IAAI,GAAkBD,MAAM,CAA5BC,IAAI;OAAElD,IAAI,GAAYiD,MAAM,CAAtBjD,IAAI;OAAEmD,KAAK,GAAKF,MAAM,CAAhBE,KAAK;KACzB,IAAIH,OAAO,KAAK,mBAAmB,IAAIE,IAAI,KAAKJ,SAAS,EACzD;OACCnC,OAAO,CAAC;SAAEX,IAAI,EAAJA;QAAM,CAAC;MACjB,MACI,IAAIgD,OAAO,KAAK,gBAAgB,IAAIE,IAAI,KAAKJ,SAAS,EAC3D;OACClC,MAAM,CAAC;SAAEwC,MAAM,EAAE,CAACD,KAAK;QAAG,CAAC;;IAE5B,CAAC;CACH;CAAC,gBASKnC,GAAW,EAAEhB,IAAY,EAC/B;GAAA;GACC,2BAAI,IAAI,gCAAJ,IAAI,GACR;KACC,OAAOU,OAAO,CAACE,MAAM,CAAC,IAAIyC,KAAK,CAACrB,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAAC,CAAC;;GAG/E,OAAO,IAAIvB,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;KACvC,IAAMC,EAAE,GAAGT,cAAI,CAACC,IAAI,CAACC,uBAAuB,CAACN,IAAI,CAAC;KAClD,IAAMc,GAAG,GAAGZ,cAAI,CAAC;OAChBK,MAAM,EAAE,MAAM;OACdQ,QAAQ,EAAE,MAAM;OAChBC,GAAG,EAAHA,GAAG;OACHhB,IAAI,EAAEa,EAAE;OACRL,KAAK,EAAE,KAAK;OACZC,WAAW,EAAE,KAAK;OAClBS,SAAS,EAAE,mBAACC,QAAQ,EAAK;SACxB,IAAIA,QAAQ,CAACC,MAAM,KAAK,OAAO,EAC/B;WACCR,MAAM,CAACO,QAAQ,CAAC;UAChB,MAED;WAAA;WACC,IAAM2B,SAAS,qBAAG3B,QAAQ,CAACnB,IAAI,mDAAb,eAAesD,KAAK;WACtC,IAAIR,SAAS,EACb;aACC,4BAAI,sDAAJ,KAAI,EAAuBA,SAAS,EAAEnC,OAAO,EAAEC,MAAM;YACrD,MAED;aACCD,OAAO,CAACQ,QAAQ,CAAC;;;QAGnB;OACDE,SAAS,EAAE,mBAACkC,GAAG,EAAEC,OAAO,EAAK;SAC5B,IAAID,GAAG,KAAK,YAAY,IAAI,CAAAC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEC,UAAU,MAAK,IAAI,EACxD;WACC7C,MAAM,CAAC4C,OAAO,CAACxD,IAAI,CAAC;;SAGrBY,MAAM,CAAC2C,GAAG,CAAC;;MAEZ,CAAC;KAEFzC,GAAG,CAACQ,IAAI,CAACT,EAAE,CAAC;IACZ,CAAC;CACH;CAAC,uBAGD;GACC,OAAO,CAAC6C,MAAM,CAACC,SAAS,CAACC,MAAM;CAChC;CAAC,4BAzlBWhF,MAAM,wBAEc,+DAA+D;CAAA,4BAFnFA,MAAM,yBAGe,gEAAgE;CAAA,4BAHrFA,MAAM,wBAIa,+DAA+D;CAAA,4BAJlFA,MAAM,yBAKc,mEAAmE;CAAA,4BALvFA,MAAM,yBAMc,gEAAgE;CAAA,4BANpFA,MAAM,kBAOS,yDAAyD;CAAA,4BAPxEA,MAAM,mBAQS,0DAA0D;CAAA,4BARzEA,MAAM,wBASa,+DAA+D;CAAA,4BATlFA,MAAM,uBAUY,8DAA8D;CAAA,4BAVhFA,MAAM,mBAWS,iEAAiE;CAAA,4BAXhFA,MAAM,qBAYW,wDAAwD;CAAA,4BAZzEA,MAAM,2BAae,0DAA0D;CAAA,4BAb/EA,MAAM,+BAckB,+DAA+D;CAAA,4BAdvFA,MAAM,oCAesB,kEAAkE;CAAA,4BAf9FA,MAAM,wBAgBa,+DAA+D;CAAA,4BAhBlFA,MAAM,uBAiBY,8DAA8D;CAAA,4BAjBhFA,MAAM,0BAkBe,kEAAkE;;;;;;;;;;"}