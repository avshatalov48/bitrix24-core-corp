{"version":3,"file":"copilot-promo-popup.bundle.js","sources":["../src/copilot-promo-popup-presets.js","../src/copilot-promo-popup.js"],"sourcesContent":["import { Loc } from 'main.core';\n\ntype CopilotPromoPopupPresetConfig = {\n\tvideoSrc: {\n\t\tru: string;\n\t\ten: string;\n\t};\n\ttitle: string;\n\ttext: string;\n}\n\nexport type CopilotPromoPopupPresets = {\n\t[presetId: string]: CopilotPromoPopupPresetConfig;\n}\n\nexport const CopilotPromoPopupPresetData: CopilotPromoPopupPresets = Object.freeze({\n\ttask: {\n\t\tvideoSrc: {\n\t\t\ten: '/bitrix/js/ai/copilot-promo-popup/videos/en/tasks.webm',\n\t\t\tru: '/bitrix/js/ai/copilot-promo-popup/videos/ru/tasks.webm',\n\t\t},\n\t\ttitle: 'CoPilot',\n\t\ttext: getTextWithReplaceAccent('COPILOT_PROMO_POPUP_TASKS_TEXT'),\n\t},\n\tliveFeedEditor: {\n\t\tvideoSrc: {\n\t\t\ten: '/bitrix/js/ai/copilot-promo-popup/videos/en/liveFeedEditor.webm',\n\t\t\tru: '/bitrix/js/ai/copilot-promo-popup/videos/ru/liveFeedEditor.webm',\n\t\t},\n\t\ttitle: 'CoPilot',\n\t\ttext: getTextWithReplaceAccent('COPILOT_PROMO_POPUP_LIVEFEED_EDITOR_TEXT'),\n\t},\n\tchat: {\n\t\tvideoSrc: {\n\t\t\ten: '/bitrix/js/ai/copilot-promo-popup/videos/en/chat.webm',\n\t\t\tru: '/bitrix/js/ai/copilot-promo-popup/videos/ru/chat.webm',\n\t\t},\n\t\ttitle: 'CoPilot',\n\t\ttext: getTextWithReplaceAccent('COPILOT_PROMO_POPUP_CHATS_TEXT'),\n\t},\n});\n\nfunction getTextWithReplaceAccent(messageCode: string): string\n{\n\treturn Loc.getMessage(messageCode, {\n\t\t'#ACCENT#': '<span style=\"color: var(--ui-color-copilot-primary);\">',\n\t\t'#/ACCENT#': '</span>',\n\t});\n}\n","import { Extension, Type } from 'main.core';\nimport {\n\tPromoVideoPopup,\n\tPromoVideoPopupTargetOptions,\n\tPromoVideoPopupAngleOptions,\n\tPromoVideoPopupOffset,\n\tAnglePosition,\n\tPromoVideoPopupEvents,\n} from 'ui.promo-video-popup';\nimport { Button } from 'ui.buttons';\nimport { Main as MainIconSet } from 'ui.icon-set.api.core';\n\nimport 'ui.icon-set.main';\n\nimport { CopilotPromoPopupPresetData } from './copilot-promo-popup-presets';\n\nexport type CopilotPromoPopupCreateOptions = {\n\tpresetId: string;\n\ttargetOptions: PromoVideoPopupTargetOptions;\n\tangleOptions: PromoVideoPopupAngleOptions;\n\toffset: PromoVideoPopupOffset;\n}\n\nexport class CopilotPromoPopup\n{\n\tstatic AnglePosition = AnglePosition;\n\n\tstatic Preset = Object.freeze({\n\t\tTASK: 'task',\n\t\tLIVE_FEED_EDITOR: 'liveFeedEditor',\n\t\tCHAT: 'chat',\n\t});\n\n\tstatic PromoVideoPopupEvents = PromoVideoPopupEvents;\n\n\tstatic getWidth(): number\n\t{\n\t\treturn PromoVideoPopup.getWidth();\n\t}\n\n\tstatic createByPresetId(options: CopilotPromoPopupCreateOptions): PromoVideoPopup\n\t{\n\t\tCopilotPromoPopup.#checkPreset(options.presetId);\n\n\t\tconst presetId = options.presetId;\n\t\tconst preset = CopilotPromoPopupPresetData[presetId];\n\n\t\tconst promoVideoPopup = new PromoVideoPopup({\n\t\t\ttargetOptions: options.targetOptions,\n\t\t\tvideoSrc: preset.videoSrc[CopilotPromoPopup.#getVideoLang()],\n\t\t\ttitle: preset.title,\n\t\t\ttext: preset.text,\n\t\t\ticon: MainIconSet.COPILOT_AI,\n\t\t\tangleOptions: options.angleOptions,\n\t\t\toffset: options.offset,\n\t\t\tcolors: {\n\t\t\t\ttitle: getComputedStyle(document.body).getPropertyValue('--ui-color-copilot-secondary'),\n\t\t\t\ticonBackground: getComputedStyle(document.body).getPropertyValue('--ui-color-copilot-primary'),\n\t\t\t\tbutton: Button.Color.AI,\n\t\t\t},\n\t\t});\n\n\t\tpromoVideoPopup.subscribe(PromoVideoPopupEvents.ACCEPT, () => {\n\t\t\tpromoVideoPopup.hide();\n\t\t});\n\n\t\treturn promoVideoPopup;\n\t}\n\n\tstatic #checkPreset(presetId: string): void\n\t{\n\t\tif (Type.isStringFilled(presetId) === false)\n\t\t{\n\t\t\tthrow new Error('AI.CopilotPromoPopup: presetId is required option and must be the string');\n\t\t}\n\n\t\tif (CopilotPromoPopup.#isPresetExist(presetId) === false)\n\t\t{\n\t\t\tthrow new Error(`AI.CopilotPromoPopup: preset with id '${presetId}' doesn't exist`);\n\t\t}\n\t}\n\n\tstatic #isPresetExist(presetId: string): boolean\n\t{\n\t\treturn Boolean(CopilotPromoPopupPresetData[presetId]);\n\t}\n\n\tstatic #getVideoLang(): 'ru' | 'en'\n\t{\n\t\treturn CopilotPromoPopup.#isWestZone() ? 'en' : 'ru';\n\t}\n\n\tstatic #isWestZone(): boolean\n\t{\n\t\treturn Extension.getSettings('ai.copilot-promo-popup').isWestZone;\n\t}\n}\n"],"names":["CopilotPromoPopupPresetData","Object","freeze","task","videoSrc","en","ru","title","text","getTextWithReplaceAccent","liveFeedEditor","chat","messageCode","Loc","getMessage","CopilotPromoPopup","getWidth","PromoVideoPopup","createByPresetId","options","presetId","preset","promoVideoPopup","targetOptions","icon","MainIconSet","COPILOT_AI","angleOptions","offset","colors","getComputedStyle","document","body","getPropertyValue","iconBackground","button","Button","Color","AI","subscribe","PromoVideoPopupEvents","ACCEPT","hide","Type","isStringFilled","Error","Boolean","Extension","getSettings","isWestZone","AnglePosition","Preset","TASK","LIVE_FEED_EDITOR","CHAT"],"mappings":"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"}