{"version":3,"file":"selectorfield.bundle.js","sources":["../src/selectorfield.js"],"sourcesContent":["import { Selector } from 'ui.form-elements.view';\nimport { Dom, Event, Tag, Loc, Runtime } from 'main.core';\nimport { SelectorFieldItemOption, SelectorFieldOptions } from 'types.js';\nimport './css/main.css';\n\nexport class SelectorField extends Selector\n{\n\t#items: [SelectorFieldItemOption] = [];\n\t#additionalItems: [] = [];\n\t#hintTitleElement: HTMLElement;\n\t#hintDescElement: HTMLElement;\n\t#inputNode: HTMLElement;\n\n\tstatic timeTransition = 300;\n\tstatic defaultTopPosition = '45px';\n\tstatic extraHeightOffset = 70;\n\tstatic popupOffset = 5;\n\n\tconstructor(params: SelectorFieldOptions)\n\t{\n\t\tsuper(params);\n\t\tthis.#items = params.items;\n\t\tthis.#additionalItems = params.additionalItems || [];\n\t\tthis.#items = this.#items.map(item => {\n\t\t\tconst newItem = item;\n\t\t\tnewItem.recommended = (params.recommendedItems || []).includes(item.value);\n\n\t\t\treturn newItem;\n\t\t});\n\n\t\tthis.#hintTitleElement = Tag.render`<div class=\"ui-section__title\"></div>`;\n\t\tthis.#hintDescElement = Tag.render`<div class=\"ui-section__description\"></div>`;\n\t\tthis.#inputNode = this.#buildSelector();\n\t}\n\n\trenderContentField(): HTMLElement\n\t{\n\t\tconst disableClass = this.isEnable() ? '' : 'ui-ctl-disabled';\n\t\tconst lockElement = this.isEnable() ? null : this.renderLockElement();\n\n\t\treturn Tag.render`\n\t\t\t<div id=\"${this.getId()}\" class=\"ui-section__field-selector \">\n\t\t\t\t<div class=\"ui-section__field-container\">\n\t\t\t\t\t<div class=\"ui-section__field-label_box\">\n\t\t\t\t\t\t<label class=\"ui-section__field-label\" for=\"${this.getName()}\">${this.getLabel()}</label> \n\t\t\t\t\t\t${lockElement}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-section__field-inline-box\">\n\t\t\t\t\t\t<div class=\"ui-section__field\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown ${disableClass}\">\n\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t\t\t\t\t${this.getInputNode()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div class=\"ui-section__hint\">\n\t\t\t\t\t\t\t${this.#hintTitleElement}\n\t\t\t\t\t\t\t${this.#hintDescElement}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetInputNode(): HTMLElement\n\t{\n\t\treturn this.#inputNode;\n\t}\n\n\t#buildSelector(): HTMLElement\n\t{\n\t\tconst selectInput = Tag.render`\n\t\t\t<input type=\"hidden\" class=\"select-input\" name=\"${this.getName()}\" value=\"${this.#getCurrentValue()}\"/>\n\t\t`;\n\t\tconst selector = Tag.render`\n\t\t\t<div class=\"select\" id=\"${this.getName()}\" data-state=\"\">\n\t\t\t\t${selectInput}\n\t\t\t\t<div class=\"select-title\">${this.#getCurrentName()}</div>\n\t\t\t\t<div class=\"select-content\"></div>\n\t\t\t</div>\n\t\t`;\n\t\tconst selectContentItems = this.#getContentItems();\n\t\tconst selectContent = selector.querySelector('.select-content');\n\t\tif (selectContent && selectContentItems)\n\t\t{\n\t\t\tselectContentItems.forEach((option) => {\n\t\t\t\tselectContent.append(option);\n\t\t\t});\n\t\t}\n\n\t\tthis.#titleBindEvents(selector);\n\t\tthis.#labelBindEvents(selector);\n\n\t\treturn selector;\n\t}\n\n\t#getContentItems(): []\n\t{\n\t\tconst selectContentItems = [];\n\t\tfor (const { value, name, selected, recommended } of this.#items)\n\t\t{\n\t\t\tlet selectedClass = '';\n\t\t\tif (selected === true)\n\t\t\t{\n\t\t\t\tselectedClass = 'selected';\n\t\t\t}\n\n\t\t\tconst recommendedLabel =\n\t\t\t\trecommended\n\t\t\t\t\t? Tag.render`\n\t\t\t\t\t\t<span class=\"select-label-recommended\">\n\t\t\t\t\t\t\t${Loc.getMessage('AI_SELECTORFIELD_RECOMMENDED_LABEL')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`\n\t\t\t\t\t: ''\n\t\t\t;\n\n\t\t\tconst contentItemLabel = Tag.render`\n\t\t\t\t<div class=\"select-label-container ${selectedClass}\">\n\t\t\t\t\t<label class=\"select-label\" value=\"${value}\">${name}</label>\n\t\t\t\t\t${recommendedLabel}\n\t\t\t\t\t<span class=\"select-label-icon ui-icon-set --check\"></span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tselectContentItems.push(contentItemLabel);\n\t\t}\n\n\t\tconst loadedIconSets = [];\n\t\tfor (const { type, link, text, icon } of this.#additionalItems)\n\t\t{\n\t\t\tif (type === 'link')\n\t\t\t{\n\t\t\t\tconst set = icon.set || 'ui.icon-set.main';\n\t\t\t\tif (!loadedIconSets.includes(set))\n\t\t\t\t{\n\t\t\t\t\tRuntime.loadExtension(set);\n\t\t\t\t\tloadedIconSets.push(set);\n\t\t\t\t}\n\t\t\t\tconst contentItemLink = Tag.render`\n\t\t\t\t\t<div class=\"select-link-container\">\n\t\t\t\t\t\t<span class=\"select-link-icon ui-icon-set ${icon.code}\"></span>\n\t\t\t\t\t\t<a class=\"select-link\" href=\"${link}\">${text}</a>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tselectContentItems.push(contentItemLink);\n\t\t\t}\n\t\t}\n\n\t\treturn selectContentItems;\n\t}\n\n\t#getCurrentName(): string\n\t{\n\t\tlet count = 0;\n\t\tlet currentName = '';\n\t\tfor (const { name, selected } of this.#items)\n\t\t{\n\t\t\tif (count === 0 || selected === true)\n\t\t\t{\n\t\t\t\tcurrentName = name;\n\t\t\t}\n\t\t\tcount++;\n\t\t}\n\n\t\treturn currentName;\n\t}\n\n\t#getCurrentValue(): string\n\t{\n\t\tlet count = 0;\n\t\tlet currentValue = '';\n\t\tfor (const { value, selected } of this.#items)\n\t\t{\n\t\t\tif (count === 0 || selected === true)\n\t\t\t{\n\t\t\t\tcurrentValue = value;\n\t\t\t}\n\t\t\tcount++;\n\t\t}\n\n\t\treturn currentValue;\n\t}\n\n\t#titleBindEvents(selector): void\n\t{\n\t\tconst selectTitle = selector.querySelector('.select-title');\n\t\tif (!selectTitle)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(selectTitle, 'click', () => this.#toggleSelect(selector));\n\t}\n\n\t#toggleSelect(selector)\n\t{\n\t\tthis.#closeOtherSelects(selector);\n\n\t\tconst selectContent = selector.querySelector('.select-content');\n\t\tconst isActive = selector.getAttribute('data-state') === 'active';\n\n\t\tif (isActive)\n\t\t{\n\t\t\tthis.#closeSelect(selector, selectContent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#openSelect(selector, selectContent);\n\t\t}\n\t}\n\n\t#closeOtherSelects(currentSelector)\n\t{\n\t\tdocument.querySelectorAll('.select').forEach((selectField) => {\n\t\t\tif (currentSelector !== selectField)\n\t\t\t{\n\t\t\t\tselectField.setAttribute('data-state', '');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tconst selectContent = selectField.querySelector('.select-content');\n\t\t\t\t\tthis.#prepareSelectContent(selectContent);\n\t\t\t\t}, SelectorField.timeTransition);\n\t\t\t}\n\t\t});\n\t}\n\n\t#closeSelect(selector, selectContent)\n\t{\n\t\tselector.setAttribute('data-state', '');\n\t\tsetTimeout(() => {\n\t\t\tthis.#prepareSelectContent(selectContent);\n\t\t}, SelectorField.timeTransition);\n\t}\n\n\t#openSelect(selector, selectContent)\n\t{\n\t\tconst posSelectContent = selectContent.getBoundingClientRect();\n\t\tconst heightToBottom = window.innerHeight - (posSelectContent.top + posSelectContent.height);\n\n\t\tif (heightToBottom > SelectorField.extraHeightOffset)\n\t\t{\n\t\t\tthis.#prepareSelectContent(selectContent);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(selectContent, 'select-content-reverse');\n\t\t\tconst valueTop = posSelectContent.height + SelectorField.popupOffset;\n\t\t\tDom.style(selectContent, 'top', `-${valueTop}px`);\n\t\t}\n\t\tselector.setAttribute('data-state', 'active');\n\t}\n\n\t#labelBindEvents(selector): void\n\t{\n\t\tconst selectLabels = selector.querySelectorAll('.select-label-container .select-label');\n\t\tconst selectTitle = selector.querySelector('.select-title');\n\t\tconst selectInput = selector.querySelector('.select-input');\n\t\tif (selectLabels && selectTitle && selectInput)\n\t\t{\n\t\t\tfor (const label of selectLabels)\n\t\t\t{\n\t\t\t\tconst labelContainer = label.parentNode;\n\t\t\t\tEvent.bind(labelContainer, 'click', () => {\n\t\t\t\t\tselector.setAttribute('data-state', '');\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tconst selectContent = selector.querySelector('.select-content');\n\t\t\t\t\t\tthis.#prepareSelectContent(selectContent);\n\t\t\t\t\t}, SelectorField.timeTransition);\n\n\t\t\t\t\tif (!Dom.hasClass(label.parentNode, 'selected'))\n\t\t\t\t\t{\n\t\t\t\t\t\tselectTitle.textContent = label.textContent;\n\t\t\t\t\t\tselectInput.setAttribute('value', label.getAttribute('value'));\n\t\t\t\t\t\tBX.UI.ButtonPanel.show();\n\t\t\t\t\t\tconst selectedItem = selector.querySelector('.select-label-container.selected');\n\t\t\t\t\t\tif (selectedItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(selectedItem, 'selected');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDom.addClass(label.parentNode, 'selected');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\t#prepareSelectContent(element)\n\t{\n\t\tDom.removeClass(element, 'select-content-reverse');\n\t\tDom.style(element, 'top', SelectorField.defaultTopPosition);\n\t}\n}\n"],"names":["SelectorField","Selector","constructor","params","items","additionalItems","map","item","newItem","recommended","recommendedItems","includes","value","Tag","render","renderContentField","disableClass","isEnable","lockElement","renderLockElement","getId","getName","getLabel","getInputNode","selectInput","selector","selectContentItems","selectContent","querySelector","forEach","option","append","name","selected","selectedClass","recommendedLabel","Loc","getMessage","contentItemLabel","push","loadedIconSets","type","link","text","icon","set","Runtime","loadExtension","contentItemLink","code","count","currentName","currentValue","selectTitle","Event","bind","isActive","getAttribute","currentSelector","document","querySelectorAll","selectField","setAttribute","setTimeout","timeTransition","posSelectContent","getBoundingClientRect","heightToBottom","window","innerHeight","top","height","extraHeightOffset","Dom","addClass","valueTop","popupOffset","style","selectLabels","label","labelContainer","parentNode","hasClass","textContent","BX","UI","ButtonPanel","show","selectedItem","removeClass","element","defaultTopPosition"],"mappings":"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"}