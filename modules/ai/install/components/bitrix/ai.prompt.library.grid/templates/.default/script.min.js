this.BX=this.BX||{};this.BX.AI=this.BX.AI||{};this.BX.AI.SharePrompt=this.BX.AI.SharePrompt||{};(function(e,t,r,n,a,i,o){"use strict";var l,s;var c=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"render",value:function e(t){var n=t.map((function(e){var t=new r.Label({text:e.name,fill:true,color:r.Label.Color.LIGHT});return i.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(["<li>","</li>"])),t.render())}));return i.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<ul class="ai__categories-popup_list">',"</ul>"])),n)}}]);return e}();var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"render",value:function e(){}}]);return e}();var p;function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function e(t,r,n){return t[r]=n}}function c(e,t,r,a){var i=t&&t.prototype instanceof f?t:f,o=Object.create(i.prototype),l=new E(a||[]);return n(o,"_invoke",{value:P(e,r,l)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function f(){}function d(){}function v(){}var b={};s(b,i,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(L([])));y&&y!==t&&r.call(y,i)&&(b=y);var m=v.prototype=f.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function a(n,i,o,l){var s=u(e[n],e,i);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==babelHelpers["typeof"](p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,l)}))}l(s.arg)}var i;n(this,"_invoke",{value:function e(r,n){function o(){return new t((function(e,t){a(r,n,e,t)}))}return i=i?i.then(o,o):o()}})}function P(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return R()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var l=O(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function L(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:R}}function R(){return{value:undefined,done:!0}}return d.prototype=v,n(m,"constructor",{value:v,configurable:!0}),n(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new _(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(m),s(m,l,"Generator"),s(m,i,(function(){return this})),s(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=L,E.prototype={constructor:E,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(I),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function a(e,r){return l.type="throw",l.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function e(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(l)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),I(n),p}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:L(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),p}},e}function f(e){return d.apply(this,arguments)}function d(){d=babelHelpers.asyncToGenerator(h().mark((function e(t){return h().wrap((function e(r){while(1)switch(r.prev=r.next){case 0:i.Runtime.loadExtension("ui.notification").then((function(e){var r=e.BX;r.UI.Notification.Center.notify({content:t})}))["catch"]((function(){if(i.Type.isElementNode(t)){alert(t.innerText)}else{alert(t)}}));case 1:case"end":return r.stop()}}),e)})));return d.apply(this,arguments)}function v(e,t){if(!t||!e){return e}var r=t.toLowerCase();var n=new RegExp(r,"gi");return e.replace(n,(function(e){return"<mark>".concat(e,"</mark>")}))}function b(e){return i.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['<span style="word-break: break-word;">',"</span>"])),e)}var g,y,m,w;function _(e,t){P(e,t);t.add(e)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function O(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var T=new WeakSet;var I=new WeakSet;var E=function(e){babelHelpers.inherits(t,e);function t(){var e;var r;babelHelpers.classCallCheck(this,t);for(var n=arguments.length,a=new Array(n),i=0;i<n;i++){a[i]=arguments[i]}r=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(t)).call.apply(e,[this].concat(a)));_(babelHelpers.assertThisInitialized(r),I);_(babelHelpers.assertThisInitialized(r),T);return r}babelHelpers.createClass(t,[{key:"render",value:function e(t,r){var n=this;var a=r||null;var o=t.map((function(e){var t=i.Text.encode(e.name);var r=v(t,a);return i.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<li class="ai__prompt-library-grid-shares-popup_shares-list-item">\n\t\t\t\t\t<div class="ai__prompt-library-grid-shares-popup_shares-list-item-avatar">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ai__prompt-library-grid-shares-popup_shares-list-item-title">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t"])),O(n,T,L).call(n,e),r)}));return i.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['<ul class="ai__prompt-library-grid-shares-popup_shares-list">',"</ul>"])),o)}}]);return t}(u);function L(e){if(i.Type.isStringFilled(e.img)){return i.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['<img src="','" alt="','" />'])),e.img,e.name)}return O(this,I,R).call(this,e.name)}function R(e){if(!e){return""}var t=e.split(" ").slice(0,2).map((function(e){return e[0].toUpperCase()})).join("");return i.Tag.render(w||(w=babelHelpers.taggedTemplateLiteral(['<span class="ai__prompt-library-grid-shares-popup_shares-list-item-initials">',"</span>"])),t)}var C,S;function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t){M(e,t);t.add(e)}function H(e,t,r){M(e,t);t.set(e,r)}function M(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function F(e,t,r){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return r}var G=new WeakMap;var D=new WeakMap;var N=new WeakMap;var j=new WeakMap;var B=new WeakMap;var U=new WeakMap;var Y=new WeakMap;var X=new WeakMap;var W=new WeakMap;var V=new WeakMap;var z=new WeakSet;var q=new WeakSet;var K=new WeakSet;var Q=new WeakSet;var J=new WeakSet;var Z=function(){function e(t){babelHelpers.classCallCheck(this,e);k(this,J);k(this,Q);k(this,K);k(this,q);k(this,z);H(this,G,{writable:true,value:null});H(this,D,{writable:true,value:void 0});H(this,N,{writable:true,value:false});H(this,j,{writable:true,value:null});H(this,B,{writable:true,value:[]});H(this,U,{writable:true,value:void 0});H(this,Y,{writable:true,value:void 0});H(this,X,{writable:true,value:void 0});H(this,W,{writable:true,value:""});H(this,V,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,G,t.bindElement);babelHelpers.classPrivateFieldSet(this,U,t.listRenderer);babelHelpers.classPrivateFieldSet(this,Y,t.events||{});babelHelpers.classPrivateFieldSet(this,V,t.filter||null);babelHelpers.classPrivateFieldSet(this,X,t.useSearch===true)}babelHelpers.createClass(e,[{key:"show",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,j)){F(this,z,$).call(this)}babelHelpers.classPrivateFieldGet(this,j).show();if(babelHelpers.classPrivateFieldGet(this,N)){var t=getComputedStyle(document.body).getPropertyValue("--ui-color-copilot-primary");var r=new a.Loader({target:babelHelpers.classPrivateFieldGet(this,D),size:30,color:t});r.show(babelHelpers.classPrivateFieldGet(this,D).root)}}},{key:"hide",value:function e(){var t;(t=babelHelpers.classPrivateFieldGet(this,j))===null||t===void 0?void 0:t.destroy();babelHelpers.classPrivateFieldSet(this,j,null);babelHelpers.classPrivateFieldSet(this,D,null)}},{key:"isShown",value:function e(){var t;return Boolean((t=babelHelpers.classPrivateFieldGet(this,j))===null||t===void 0?void 0:t.isShown())}},{key:"setLoading",value:function e(t){babelHelpers.classPrivateFieldSet(this,N,t)}},{key:"setList",value:function e(t){babelHelpers.classPrivateFieldSet(this,B,t);if(babelHelpers.classPrivateFieldGet(this,j)){babelHelpers.classPrivateFieldGet(this,j).setContent(F(this,q,ee).call(this))}}}]);return e}();function $(){babelHelpers.classPrivateFieldSet(this,j,new n.Popup({bindElement:babelHelpers.classPrivateFieldGet(this,G),cacheable:false,className:"ai__share-prompt-library-grid_popup-with-more-info",angle:{position:"top"},autoHide:true,closeByEsc:true,content:F(this,q,ee).call(this),width:285,minHeight:190,maxHeight:300,padding:16,contentPadding:0,events:A({},babelHelpers.classPrivateFieldGet(this,Y))}))}function ee(){var e=babelHelpers.classPrivateFieldGet(this,X)?"--with-search":"";babelHelpers.classPrivateFieldSet(this,D,i.Tag.render(C||(C=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ai__prompt-library_info-popup">\n\t\t\t\t','\n\t\t\t\t<div class="ai__prompt-library_info-popup_list ','" ref="listContainer">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t<div>\n\t\t"])),F(this,J,ne).call(this),e,F(this,K,te).call(this)));return babelHelpers.classPrivateFieldGet(this,D).root}function te(){var e=this;var t=babelHelpers.classPrivateFieldGet(this,B).filter((function(t){if(babelHelpers.classPrivateFieldGet(e,V)){return babelHelpers.classPrivateFieldGet(e,V).call(e,t,babelHelpers.classPrivateFieldGet(e,W))}return true}));return babelHelpers.classPrivateFieldGet(this,U).render(t,babelHelpers.classPrivateFieldGet(this,W))}function re(){if(babelHelpers.classPrivateFieldGet(this,D).listContainer){babelHelpers.classPrivateFieldGet(this,D).listContainer.innerHTML="";i.Dom.append(F(this,K,te).call(this),babelHelpers.classPrivateFieldGet(this,D).listContainer)}}function ne(){var e=this;if(babelHelpers.classPrivateFieldGet(this,X)===false){return null}var t=i.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ai__prompt-library_info-popup_search">\n\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-before-icon ui-ctl-after-icon">\n\t\t\t\t\t<div class="ui-ctl-before ui-ctl-icon-search"></div>\n\t\t\t\t\t<button ref="clear" class="ui-ctl-after ui-ctl-icon-clear"></button>\n\t\t\t\t\t<input ref="input" type="text" class="ui-ctl-element">\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])));i.bind(t.clear,"click",(function(){t.input.value="";babelHelpers.classPrivateFieldSet(e,W,"");F(e,Q,re).call(e)}));i.bind(t.input,"input",(function(t){babelHelpers.classPrivateFieldSet(e,W,t.target.value);F(e,Q,re).call(e)}));return t.root}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ie(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function oe(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */oe=function t(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function s(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function e(t,r,n){return t[r]=n}}function c(e,t,r,a){var i=t&&t.prototype instanceof h?t:h,o=Object.create(i.prototype),l=new I(a||[]);return n(o,"_invoke",{value:_(e,r,l)}),o}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var p={};function h(){}function f(){}function d(){}var v={};s(v,i,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(E([])));g&&g!==t&&r.call(g,i)&&(v=g);var y=d.prototype=h.prototype=Object.create(v);function m(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function a(n,i,o,l){var s=u(e[n],e,i);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"==babelHelpers["typeof"](p)&&r.call(p,"__await")?t.resolve(p.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(p).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,l)}))}l(s.arg)}var i;n(this,"_invoke",{value:function e(r,n){function o(){return new t((function(e,t){a(r,n,e,t)}))}return i=i?i.then(o,o):o()}})}function _(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return L()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var l=P(o,r);if(l){if(l===p)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(e,t,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function P(e,t){var r=t.method,n=e.iterator[r];if(undefined===n)return t.delegate=null,"throw"===r&&e.iterator["return"]&&(t.method="return",t.arg=undefined,P(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=u(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,p;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,p):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function E(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=undefined,t.done=!0,t};return a.next=a}}return{next:L}}function L(){return{value:undefined,done:!0}}return f.prototype=d,n(y,"constructor",{value:d,configurable:!0}),n(d,"constructor",{value:f,configurable:!0}),f.displayName=s(d,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,s(e,l,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},m(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new w(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},m(y),s(y,l,"Generator"),s(y,i,(function(){return this})),s(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=E,I.prototype={constructor:I,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var n=this;function a(e,r){return l.type="throw",l.arg=t,n.next=e,r&&(n.method="next",n.arg=undefined),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function e(t,n){for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=n,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(l)},complete:function e(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),p}},catch:function e(t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===t){var a=n.completion;if("throw"===a.type){var i=a.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function e(t,r,n){return this.delegate={iterator:E(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),p}},e}function le(e,t,r,n){fe(e,t);ue(r,"set");se(e,r,n);return n}function se(e,t,r){if(t.set){t.set.call(e,r)}else{if(!t.writable){throw new TypeError("attempted to set read only private field")}t.value=r}}function ce(e,t,r){fe(e,t);ue(r,"get");return pe(e,r)}function ue(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function pe(e,t){if(t.get){return t.get.call(e)}return t.value}function he(e,t,r){fe(e,t);return r}function fe(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}var de=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"fetchPromptCategories",value:function(){var e=babelHelpers.asyncToGenerator(oe().mark((function e(t){var r,n;return oe().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:r=new FormData;r.append("promptCode",t);a.next=4;return i.ajax.runAction("ai.prompt.getCategoriesForPrompt",{data:r});case 4:n=a.sent;return a.abrupt("return",n.data.list);case 6:case"end":return a.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"handleClickOnDeletePromptSwitcher",value:function t(r,n,a){r.preventDefault();r.stopPropagation();he(this,e,Pe).call(this,"toggle-deleted",{promptCode:n,needDeleted:1,page:he(this,e,_e).call(this)},(function(){f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_HIDE",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")}))}))}},{key:"handleClickOnUndoDeletePromptSwitcher",value:function t(r,n,a){r.preventDefault();r.stopPropagation();he(this,e,Pe).call(this,"toggle-deleted",{promptCode:n,needDeleted:0,page:he(this,e,_e).call(this)},(function(){f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_SHOW",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")}))}))}},{key:"handleClickOnActivatePromptMenuItem",value:function t(r,n,a){r.preventDefault();r.stopImmediatePropagation();he(this,e,Pe).call(this,"toggle-active",{promptCode:n,needActivate:1,page:he(this,e,_e).call(this)},(function(){f(b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_ACTIVATE",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")})))}))}},{key:"handleClickOnDeactivatePromptMenuItem",value:function t(r,n,a){r.preventDefault();r.stopImmediatePropagation();he(this,e,Pe).call(this,"toggle-active",{promptCode:n,needActivate:0,page:he(this,e,_e).call(this)},(function(){f(b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_DEACTIVATE",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")})))}))}},{key:"handleClickOnSharesCell",value:function(){var t=babelHelpers.asyncToGenerator(oe().mark((function t(r,n){var a=this;var o,l,s;return oe().wrap((function t(c){while(1)switch(c.prev=c.next){case 0:n.preventDefault();n.stopImmediatePropagation();if(!ce(this,e,Ie)){c.next=5;break}ce(this,e,Ie).hide();return c.abrupt("return");case 5:le(this,e,Ie,new Z({bindElement:n.target,listRenderer:new E,events:{onPopupDestroy:function t(){le(a,e,Ie,null)}},filter:function e(t,r){return t.name.toLowerCase().includes(r===null||r===void 0?void 0:r.toLowerCase())},useSearch:true}));c.prev=6;ce(this,e,Ie).setLoading(true);ce(this,e,Ie).show();o=new FormData;o.append("promptCode",r);c.next=13;return i.ajax.runAction("ai.prompt.getShareForPrompt",{data:o});case 13:l=c.sent;s=l.data.list;ce(this,e,Ie).setList(s.slice(5));c.next=24;break;case 18:c.prev=18;c.t0=c["catch"](6);console.error(c.t0);c.next=23;return f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_SHOW_PROMPT_USERS_ERROR"));case 23:ce(this,e,Ie).hide();case 24:c.prev=24;ce(this,e,Ie).setLoading(false);return c.finish(24);case 27:case"end":return c.stop()}}),t,this,[[6,18,24,27]])})));function r(e,r){return t.apply(this,arguments)}return r}()},{key:"handleClickOnCategoriesCell",value:function t(r,n,a){r.preventDefault();r.stopImmediatePropagation();var i=r.target;if(ce(e,e,Te)){ce(e,e,Te).hide();return}le(e,e,Te,new Z({bindElement:i,listRenderer:new c,events:{onPopupDestroy:function t(){le(e,e,Te,null)}}}));ce(e,e,Te).setLoading(true);ce(e,e,Te).show();e.fetchPromptCategories(n).then((function(t){var r=t.findIndex((function(e){return e.code===a}));t.splice(r,1);le(e,e,Ee,t);ce(e,e,Te).setLoading(false);ce(e,e,Te).setList(ce(e,e,Ee))}))["catch"]((function(t){console.error(t);ce(e,e,Te).setLoading(false);ce(e,e,Te).setList([])}));ce(e,e,Te).show()}},{key:"handleClickOnPromptName",value:function(){var e=babelHelpers.asyncToGenerator(oe().mark((function e(t,r){return oe().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:t.preventDefault();t.stopImmediatePropagation();this.editPrompt(r);case 3:case"end":return n.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"editPrompt",value:function(){var t=babelHelpers.asyncToGenerator(oe().mark((function t(r){var n,a,o,l,s,c,u,p,h,d;return oe().wrap((function t(v){while(1)switch(v.prev=v.next){case 0:ce(this,e,Oe).getLoader().show();ce(this,e,Oe).tableFade();n=new FormData;n.append("promptCode",r);a=i.ajax.runAction("ai.prompt.getPromptByCodeForUpdate",{method:"POST",data:n});o=i.Runtime.loadExtension("ai.prompt-master");v.prev=6;v.next=9;return Promise.all([a,o]);case 9:l=v.sent;s=l[0];c=l[1].PromptMasterPopup;u=l[1].PromptMasterPopupEvents;p=s.data.prompt;h={masterOptions:{code:p.code,prompt:p.prompt,type:p.type,name:p.translate,icon:p.icon,categories:Object.values(p.categories),accessCodes:p.accessCodes,authorId:p.authorId}};d=new c(ie(ie({},h),{},{popupEvents:{onPopupDestroy:function t(){d.unsubscribe(u.SAVE_SUCCESS,ce(e,e,Le))}},analyticFields:{c_section:"list"}}));le(e,e,Le,he(e,e,ye).bind(e));d.subscribe(u.SAVE_SUCCESS,ce(e,e,Le));d.show();v.next=25;break;case 21:v.prev=21;v.t0=v["catch"](6);console.error(v.t0);f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_ACTION_OPEN_EDIT_MASTER_ERROR"));case 25:v.prev=25;ce(this,e,Oe).getLoader().hide();ce(this,e,Oe).tableUnfade();return v.finish(25);case 29:case"end":return v.stop()}}),t,this,[[6,21,25,29]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"handleClickOnCreatePromptButton",value:function(){var t=babelHelpers.asyncToGenerator(oe().mark((function t(r){var n,a,o,l;return oe().wrap((function t(s){while(1)switch(s.prev=s.next){case 0:s.prev=0;r.setClocking(true);s.next=4;return i.Runtime.loadExtension("ai.prompt-master");case 4:n=s.sent;a=n.PromptMasterPopup;o=n.PromptMasterPopupEvents;l=new a({popupEvents:{onPopupDestroy:function t(){l.unsubscribe(o.SAVE_SUCCESS,ce(e,e,Le))}},analyticFields:{c_section:"list"}});le(e,e,Le,he(e,e,ye).bind(e));l.subscribe(o.SAVE_SUCCESS,ce(e,e,Le));l.show();s.next=17;break;case 13:s.prev=13;s.t0=s["catch"](0);console.error(s.t0);f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_PROMPT_MASTER_OPEN_ERROR"));case 17:s.prev=17;r.setClocking(false);return s.finish(17);case 20:case"end":return s.stop()}}),t,null,[[0,13,17,20]])})));function r(e){return t.apply(this,arguments)}return r}()},{key:"handleClickOnPromptIsFavouriteLabel",value:function t(r,n,a,o){r.preventDefault();r.stopImmediatePropagation();he(this,e,Pe).call(this,"toggle-favourite",{promptCode:n,favourite:a,page:he(this,e,_e).call(this)},(function(){var e=a==="true"?b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_FAVOURITE_ADD",{"#NAME#":"<b>".concat(i.Text.encode(o),"</b>")})):b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_FAVOURITE_REMOVE",{"#NAME#":"<b>".concat(i.Text.encode(o),"</b>")}));f(e)}))}},{key:"togglePromptFavourite",value:function t(r,n,a){he(this,e,Pe).call(this,"toggle-favourite",{promptCode:r,favourite:n,page:he(this,e,_e).call(this)},(function(){var e=n==="true"?b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_FAVOURITE_ADD",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")})):b(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_FAVOURITE_REMOVE",{"#NAME#":"<b>".concat(i.Text.encode(a),"</b>")}));f(e)}))}},{key:"applyMultipleAction",value:function t(){var r=ce(this,e,Oe).getActionsPanel().getPanel().querySelector("#action-menu span").dataset.value;var n=r.replaceAll('"',"");var a=he(this,e,ve).call(this,n);he(this,e,Pe).call(this,n,{selectedSharePromptsCodes:ce(this,e,Oe).getRows().getSelectedIds(),page:he(this,e,_e).call(this)},(function(){f(a)}))}},{key:"init",value:function t(r){var n,a=this;var l=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(l){he(this,e,me).call(this)}le(this,e,Oe,(n=BX.Main.gridManager.getById(r))===null||n===void 0?void 0:n.instance);i.bind(ce(this,e,Oe).getScrollContainer(),"scroll",(function(){var t,r;(t=ce(a,e,Te))===null||t===void 0?void 0:t.hide();(r=ce(a,e,Ie))===null||r===void 0?void 0:r.hide()}));he(e,e,ge).call(e);he(e,e,be).call(e);i.Event.EventEmitter.subscribe("Grid::updated",(function(){he(e,e,ge).call(e);he(e,e,be).call(e);BX.UI.Hint.init(BX("main-grid-table"))}));i.Event.EventEmitter.subscribe("BX.Main.Filter:apply",(function(){o.sendData({tool:"ai",category:"prompt_saving",event:"use_filter",c_section:"list",status:"success"})}));BX.UI.Hint.init(BX("main-grid-table"))}}]);return e}();function ve(e){switch(e){case"multiple-activate":{return i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_MASS_ACTIVATE")}case"multiple-deactivate":{return i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_MASS_DEACTIVATE")}case"multiple-show-for-me":{return i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_MASS_SHOW")}case"multiple-hide-from-me":{return i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_MASS_HIDE")}default:{return i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_MASS_ACTION_DEFAULT")}}}function be(){var e=ce(this,de,Oe).getActionsPanel();if(!e){return}var t=new MutationObserver((function(){he(de,de,ge).call(de)}));var r=e.getControls()[0];t.observe(r,{childList:false,subtree:true,characterDataOldValue:false,attributes:true,attributeOldValue:true,attributeFilter:["data-value"],characterData:false})}function ge(){var e=ce(this,de,Oe).getActionsPanel();if(!e){return}var t=e.getValues();var r=e.getPanel().querySelector("#apply_button_control.ui-btn");var n=t["action-menu"];if(n==='"select-action"'||n==="select-action"){i.Dom.addClass(r,"ui-btn-disabled");i.Dom.addClass(r,"ai__prompt-library-grid_share-initials")}else{i.Dom.removeClass(r,"ui-btn-disabled");i.Dom.removeClass(r,"ai__prompt-library-grid_share-initials")}}function ye(e){he(this,de,Pe).call(this,"edit-prompt",{page:he(this,de,_e).call(this)},(function(){f(i.Loc.getMessage("PROMPT_LIBRARY_GRID_NOTIFICATION_PROMPT_SAVE_SUCCESS",{"#NAME#":"<b>".concat(i.Text.encode(e.getData().promptTitle),"</b>")}))}))}function me(){return we.apply(this,arguments)}function we(){we=babelHelpers.asyncToGenerator(oe().mark((function e(){var t,r,n,a,o;return oe().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:t=i.Runtime.loadExtension("ui.tour");r=i.Runtime.loadExtension("ui.banner-dispatcher");l.next=4;return Promise.all([t,r]);case 4:n=l.sent;a=n[0].Guide;o=n[1].BannerDispatcher;o.critical.toQueue((function(e){var t=new a({id:"share-prompt-grid-create-prompt-hint",simpleMode:true,overlay:false,onEvents:true,autoSave:true,steps:[{target:".ui-btn.ui-btn-success",title:i.Loc.getMessage("PROMPT_LIBRARY_GRID_TOUR_TITLE"),text:i.Loc.getMessage("PROMPT_LIBRARY_GRID_TOUR_DESCRIPTION")}]});i.Event.EventEmitter.subscribe("UI.Tour.Guide:onFinish",(function(){t.save();e()}));t.start()}));case 8:case"end":return l.stop()}}),e)})));return we.apply(this,arguments)}function _e(){var e=document.body.querySelector(".main-ui-pagination-page.main-ui-pagination-active");return Number.parseInt(e===null||e===void 0?void 0:e.innerText,10)||1}function Pe(e,t,r){var n=ie(babelHelpers.defineProperty({},ce(this,de,Oe).getActionKey(),e),t);ce(this,de,Oe).reloadTable("POST",n,r)}var Oe={writable:true,value:void 0};var Te={writable:true,value:null};var Ie={writable:true,value:null};var Ee={writable:true,value:[]};var Le={writable:true,value:null};e.Controller=de})(this.BX.AI.SharePrompt.Library=this.BX.AI.SharePrompt.Library||{},BX.Event,BX.UI,BX.Main,BX,BX,BX.UI.Analytics);
//# sourceMappingURL=script.map.js