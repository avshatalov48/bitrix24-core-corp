{"version":3,"file":"invitation-input.bundle.js","sources":["../src/provider/invitation-to-group.js","../src/provider/invitation-provider.js","../src/invitation-input.js"],"sourcesContent":["import { ajax } from 'main.core';\nimport { InvitationProvider } from './invitation-provider';\n\nexport class InvitationToGroup extends InvitationProvider\n{\n\t#groupId: number;\n\t#users: Object;\n\n\tconstructor(groupId: number, users: Object)\n\t{\n\t\tsuper();\n\t\tthis.#groupId = groupId;\n\t\tthis.#users = users;\n\t}\n\n\tinvite(): Promise\n\t{\n\t\treturn ajax.runAction('intranet.invite.inviteUsersToCollab', {\n\t\t\tdata: {\n\t\t\t\tcollabId: this.#groupId,\n\t\t\t\tusers: this.#users,\n\t\t\t},\n\t\t});\n\t}\n}\n","export class InvitationProvider\n{\n\tinvite(): Promise\n\t{\n\t\tthrow new Error('Implement the method \"invite\" in the child class');\n\t}\n}\n","import { Cache, Dom, Tag, Validation, Loc, Extension } from 'main.core';\nimport { MemoryCache } from 'main.core.cache';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport './style.css';\nimport type { InvitationProvider } from './provider/invitation-provider';\nimport { InvitationToGroup } from './provider/invitation-to-group';\n\nexport class InvitationInput extends EventEmitter\n{\n\t#cache: MemoryCache = new Cache.MemoryCache();\n\t#invalidPhoneNumbersTagIds: Array<string> = [];\n\t#isReadySendInvitation: boolean = false;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.InvitationInput');\n\t}\n\n\tgetTagSelector(): TagSelector\n\t{\n\t\treturn this.#cache.remember('tagSelector', () => {\n\t\t\treturn new TagSelector({\n\t\t\t\tid: `intranet-invitation-input-${Math.random(4)}`,\n\t\t\t\tshowTextBox: true,\n\t\t\t\tshowAddButton: false,\n\t\t\t\tplaceholder: this.#getDefaultPlaceholder(),\n\t\t\t\ttagTextColor: '#1E8D36',\n\t\t\t\ttagBgColor: '#D4FDB0',\n\t\t\t\ttagMaxWidth: 200,\n\t\t\t\tevents: {\n\t\t\t\t\tonAfterTagRemove: this.#onAfterTagRemove.bind(this),\n\t\t\t\t\tonBeforeTagAdd: this.#onBeforeTagAdd.bind(this),\n\t\t\t\t\tonEnter: this.#onEnter.bind(this),\n\t\t\t\t\tonBlur: this.#onBlur.bind(this),\n\t\t\t\t\tonInput: this.#onInput.bind(this),\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tisReadySendInvitation(): boolean\n\t{\n\t\treturn this.#isReadySendInvitation;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('node', () => {\n\t\t\tthis.getTagSelector().renderTo(this.getWrapper());\n\t\t\tthis.getTagSelector().focusTextBox();\n\n\t\t\treturn this.getWrapper();\n\t\t});\n\t}\n\n\trenderTo(node: HTMLElement): void\n\t{\n\t\tDom.append(this.render(), node);\n\t}\n\n\tgetWrapper(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('wrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-wrapper\">\n\t\t\t`;\n\t\t});\n\t}\n\n\tinviteToGroup(groupId: number): Promise\n\t{\n\t\tconst invitationProvider = new InvitationToGroup(groupId, this.#getPreparedUserList());\n\n\t\treturn this.#invite(invitationProvider);\n\t}\n\n\t#invite(invitationProvider: InvitationProvider): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.#removeErrorBlock();\n\n\t\t\tif (this.#getErrorTags().length > 0)\n\t\t\t{\n\t\t\t\tthis.#addErrorBlockByMessage(this.#getDefaultValidationMessage());\n\t\t\t\treject(this.#getDefaultValidationMessage());\n\t\t\t}\n\t\t\telse if (this.getTagSelector().getTags().length === 0)\n\t\t\t{\n\t\t\t\tthis.#addErrorBlockByMessage(this.#getEmptyValidationMessage());\n\t\t\t\treject(this.#getEmptyValidationMessage());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tinvitationProvider.invite().then(() => {\n\t\t\t\t\tthis.getTagSelector().removeTags();\n\t\t\t\t\tthis.#setUnreadySaveState();\n\t\t\t\t\tresolve();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tthis.#addErrorBlockByMessage(response.errors[0].message);\n\t\t\t\t\treject(response.errors[0].message);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t#getPreparedUserList(): Array\n\t{\n\t\tthis.#removeErrorBlock();\n\t\tconst selector = this.getTagSelector();\n\t\tconst tags = selector.getTags();\n\t\tconst users = [];\n\n\t\ttags.forEach((tag) => {\n\t\t\tif (tag.getEntityType() === 'email')\n\t\t\t{\n\t\t\t\tusers.push({\n\t\t\t\t\temail: tag.getTitle(),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttag.getEntityType() === 'phone'\n\t\t\t\t&& this.#isInvitationByPhoneAvailable()\n\t\t\t\t&& !this.#invalidPhoneNumbersTagIds.includes(tag.getId())\n\t\t\t)\n\t\t\t{\n\t\t\t\tusers.push({\n\t\t\t\t\tphone: tag.getTitle(),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn users;\n\t}\n\n\t#getErrorTags(): Array\n\t{\n\t\tconst selector = this.getTagSelector();\n\t\tconst tags = selector.getTags();\n\t\tconst errorTags = [];\n\n\t\ttags.forEach((tag) => {\n\t\t\tif (tag.getEntityType() === 'error')\n\t\t\t{\n\t\t\t\terrorTags.push(tag);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttag.getEntityType() === 'phone'\n\t\t\t\t&& this.#isInvitationByPhoneAvailable()\n\t\t\t\t&& this.#invalidPhoneNumbersTagIds.includes(tag.getId())\n\t\t\t)\n\t\t\t{\n\t\t\t\terrorTags.push(tag);\n\t\t\t}\n\t\t});\n\n\t\treturn errorTags;\n\t}\n\n\t#setReadySaveState(): void\n\t{\n\t\tthis.emit('onReadySave');\n\t\tthis.#isReadySendInvitation = true;\n\t}\n\n\t#setUnreadySaveState(): void\n\t{\n\t\tthis.emit('onUnreadySave');\n\t\tthis.#isReadySendInvitation = false;\n\t}\n\n\t#isInvitationByPhoneAvailable(): boolean\n\t{\n\t\tconst settings = Extension.getSettings('intranet.invitation-input');\n\n\t\treturn Boolean(settings?.isInvitationByPhoneAvailable);\n\t}\n\n\t#getPhoneParser(): BX.PhoneNumberParser\n\t{\n\t\treturn BX.PhoneNumberParser.getInstance();\n\t}\n\n\t#getDefaultPlaceholder(): string\n\t{\n\t\tif (this.#isInvitationByPhoneAvailable())\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_PLACEHOLDER_WITH_PHONE');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_PLACEHOLDER');\n\t}\n\n\t#getDefaultValidationMessage(): string\n\t{\n\t\tif (this.#isInvitationByPhoneAvailable())\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_VALIDATION_MESSAGE_WITH_PHONE');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_VALIDATION_MESSAGE');\n\t}\n\n\t#getEmptyValidationMessage(): string\n\t{\n\t\tif (this.#isInvitationByPhoneAvailable())\n\t\t{\n\t\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_EMPTY_MESSAGE_WITH_PHONE');\n\t\t}\n\n\t\treturn Loc.getMessage('INTRANET_INVITATION_INPUT_EMPTY_MESSAGE');\n\t}\n\n\t#onAfterTagRemove(event: BaseEvent): void\n\t{\n\t\tconst selector = event.getTarget();\n\n\t\tconst tags = selector.getTags();\n\t\tconst errorTags = tags.filter((item) => item.getEntityType() === 'error');\n\n\t\tif (errorTags.length === 0)\n\t\t{\n\t\t\tthis.#removeErrorBlock();\n\t\t}\n\n\t\tif (tags.length === 0)\n\t\t{\n\t\t\tthis.#setUnreadySaveState();\n\t\t}\n\t\telse if (errorTags.length === 0)\n\t\t{\n\t\t\tthis.#setReadySaveState();\n\t\t}\n\t}\n\n\t#onBeforeTagAdd(event: BaseEvent): void\n\t{\n\t\tconst { tag } = event.getData();\n\t\tconst textBox = event.target.getTextBox();\n\t\ttextBox.placeholder = '';\n\t\tthis.#setReadySaveState();\n\n\t\tif (tag.getEntityType() === 'error')\n\t\t{\n\t\t\tthis.#setErrorStateForTag(tag);\n\t\t}\n\n\t\tif (tag.getEntityType() === 'phone')\n\t\t{\n\t\t\tthis.#getPhoneParser().parse(tag.getTitle()).then((result) => {\n\t\t\t\tif (result.valid)\n\t\t\t\t{\n\t\t\t\t\ttag.setTitle(result.rawNumber);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#setErrorStateForTag(tag);\n\t\t\t\t\tthis.#invalidPhoneNumbersTagIds.push(tag.getId());\n\t\t\t\t}\n\t\t\t\ttag.render();\n\t\t\t}).catch(() => {});\n\t\t}\n\t}\n\n\t#setErrorStateForTag(tag): void\n\t{\n\t\ttag.setTextColor('#E92F2A');\n\t\ttag.setBgColor('#FFDCDB');\n\t}\n\n\t#onEnter(event: BaseEvent): void\n\t{\n\t\tconst selector = event.getTarget();\n\t\tconst value = selector.getTextBoxValue();\n\n\t\tif (value && !/^\\s*$/.test(value))\n\t\t{\n\t\t\tthis.#addTagByValue(value);\n\t\t}\n\t}\n\n\t#onBlur(event: BaseEvent): void\n\t{\n\t\tthis.#onEnter(event);\n\t}\n\n\t#onInput(event: BaseEvent): void\n\t{\n\t\tthis.#setReadySaveState();\n\t\tconst selector = event.target;\n\t\tconst inputEvent = event.getData().event;\n\t\tconst specialSymbols = [' ', ','];\n\t\tlet value = selector.getTextBoxValue();\n\n\t\tconst index = specialSymbols.indexOf(inputEvent.data);\n\n\t\tif (index === -1)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst symbol = specialSymbols[index];\n\n\t\tif (value.endsWith(symbol))\n\t\t{\n\t\t\tvalue = value.slice(0, -1);\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tthis.#addTagByValue(value);\n\t\t}\n\t}\n\n\t#getEntityTypeByValue(value: string): string\n\t{\n\t\tconst isPhone = this.#isInvitationByPhoneAvailable() ? this.#isPhone(value) : false;\n\t\tconst isEmail = Validation.isEmail(value) && /^[^@]+@[^@]+\\.[^@]+$/.test(value);\n\n\t\tif (isEmail)\n\t\t{\n\t\t\treturn 'email';\n\t\t}\n\n\t\tif (isPhone)\n\t\t{\n\t\t\treturn 'phone';\n\t\t}\n\n\t\treturn 'error';\n\t}\n\n\t#addTagByValue(value: string): void\n\t{\n\t\tconst selector = this.getTagSelector();\n\t\tconst parsedValues = this.#parseValue(value);\n\n\t\tparsedValues.forEach((part) => {\n\t\t\tselector.addTag({\n\t\t\t\tid: part,\n\t\t\t\ttitle: part,\n\t\t\t\tentityId: 'invitation-tag',\n\t\t\t\tentityType: this.#getEntityTypeByValue(part),\n\t\t\t});\n\t\t});\n\t\tselector.clearTextBox();\n\t}\n\n\t#parseValue(value: string): Array<string>\n\t{\n\t\tconst parts = value.split(/[\\s,]+/);\n\n\t\treturn parts.filter((part) => part.length > 0);\n\t}\n\n\t#isPhone(value: string): boolean\n\t{\n\t\treturn BX.PhoneNumber.getValidNumberRegex().test(value);\n\t}\n\n\t#addErrorBlockByMessage(message: string): void\n\t{\n\t\tif (this.getWrapper().querySelector('.intranet-invitation-input-error__wrapper'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst errorBlock = this.#createErrorBlockByMessage(message);\n\t\tthis.getWrapper().append(errorBlock);\n\t\tthis.#setUnreadySaveState();\n\n\t\tif (!Dom.hasClass(this.getTagSelector().getOuterContainer(), '--error'))\n\t\t{\n\t\t\tDom.addClass(this.getTagSelector().getOuterContainer(), '--error');\n\t\t}\n\t}\n\n\t#removeErrorBlock(): void\n\t{\n\t\tconst errorBlock = this.getWrapper()\n\t\t\t.querySelector('.intranet-invitation-input-error__wrapper');\n\n\t\tif (errorBlock)\n\t\t{\n\t\t\terrorBlock.remove();\n\t\t}\n\n\t\tif (Dom.hasClass(this.getTagSelector().getOuterContainer(), '--error'))\n\t\t{\n\t\t\tDom.removeClass(this.getTagSelector().getOuterContainer(), '--error');\n\t\t}\n\t}\n\n\t#createErrorBlockByMessage(message: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"intranet-invitation-input-error__wrapper\">\n\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t<span class=\"intranet-invitation-input-error__text\">${message}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n"],"names":["InvitationToGroup","invite","Error","constructor","groupId","users","super","Object","writable","value","babelHelpers","ajax","runAction","data","collabId","this","InvitationInput","EventEmitter","Cache","MemoryCache","setEventNamespace","getTagSelector","remember","TagSelector","id","Math","random","showTextBox","showAddButton","placeholder","tagTextColor","tagBgColor","tagMaxWidth","events","onAfterTagRemove","bind","onBeforeTagAdd","onEnter","onBlur","onInput","isReadySendInvitation","render","renderTo","getWrapper","focusTextBox","node","Dom","append","Tag","inviteToGroup","invitationProvider","Promise","resolve","reject","length","getTags","then","removeTags","catch","response","errors","message","tags","forEach","tag","getEntityType","push","email","getTitle","includes","getId","phone","errorTags","emit","settings","Extension","getSettings","Boolean","isInvitationByPhoneAvailable","BX","PhoneNumberParser","getInstance","Loc","getMessage","event","getTarget","filter","item","getData","target","getTextBox","parse","result","valid","setTitle","rawNumber","setTextColor","setBgColor","getTextBoxValue","test","selector","inputEvent","specialSymbols","index","indexOf","symbol","endsWith","slice","isPhone","Validation","isEmail","part","addTag","title","entityId","entityType","clearTextBox","split","PhoneNumber","getValidNumberRegex","querySelector","errorBlock","hasClass","getOuterContainer","addClass","remove","removeClass"],"mappings":"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"}