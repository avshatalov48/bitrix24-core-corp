{"version":3,"file":"grid.bundle.js","sources":["../src/field/base-field.js","../src/field/photo-field.js","../src/field/full-name-field.js","../src/field/employee-field.js","../src/grid-manager.js","../src/field/activity-field.js","../src/field/department-field.js","../src/group-actions/base-action.js","../src/group-actions/fire-action.js","../src/group-actions/delete-action.js","../src/group-actions/confirm-action.js","../src/group-actions/decline-action.js","../src/group-actions/reinvite-action.js","../src/group-actions/create-chat-action.js","../src/group-actions/change-department-action.js","../src/group-actions/group-action-factory.js","../src/panel.js"],"sourcesContent":["import { Dom } from 'main.core';\n\nexport class BaseField\n{\n\t#fieldId: string;\n\t#gridId: ?string;\n\n\tconstructor(params: {\n\t\tfieldId: string,\n\t\tgridId: string,\n\t}) {\n\t\tthis.#fieldId = params.fieldId;\n\t\tthis.#gridId = params.gridId ?? null;\n\t}\n\n\tgetGridId(): string\n\t{\n\t\treturn this.#gridId;\n\t}\n\n\tgetFieldId(): string\n\t{\n\t\treturn this.#fieldId;\n\t}\n\n\tgetGrid(): any | null\n\t{\n\t\tlet grid = null;\n\n\t\tif (this.#gridId)\n\t\t{\n\t\t\tgrid = BX.Main.gridManager.getById(this.#gridId);\n\t\t}\n\n\t\treturn grid?.instance;\n\t}\n\n\tgetFieldNode(): HTMLElement\n\t{\n\t\treturn document.getElementById(this.getFieldId());\n\t}\n\n\tappendToFieldNode(element: HTMLElement): void\n\t{\n\t\tDom.append(element, this.getFieldNode());\n\t}\n}","import { BaseField } from './base-field';\nimport { Dom, Tag } from 'main.core';\n\nexport type PhotoFieldType = {\n\tphotoUrl: string,\n\tisInvited: boolean,\n\tisConfirmed: boolean,\n}\n\nexport class PhotoField extends BaseField\n{\n\trender(params: PhotoFieldType): void\n\t{\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_user-photo');\n\n\t\tif (params.photoUrl)\n\t\t{\n\t\t\tDom.style(this.getFieldNode(), { 'background-image': `url(\"${params.photoUrl}\")` });\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst iconClass = (params.isInvited || (!params.isConfirmed && params.isInvited))\n\t\t\t\t? '--person-clock'\n\t\t\t\t: '--person';\n\n\t\t\tconst photo = Tag.render`\n\t\t\t\t<div class=\"ui-icon-set ${iconClass}\" style=\"--ui-icon-set__icon-size: 35px; --ui-icon-set__icon-color: #fff;\"></div>\n\t\t\t`;\n\n\t\t\tDom.append(photo, this.getFieldNode());\n\t\t}\n\t}\n}","import { BaseField } from './base-field';\nimport { Dom, Tag, Loc, Text } from 'main.core';\nimport { Label, LabelColor } from 'ui.label';\n\nexport type FullNameFieldType = {\n\tfullName: string,\n\tprofileLink: string,\n\tisConfirmed: boolean,\n\tisAdmin: boolean,\n\tisExtranet: boolean,\n\tposition: ?string,\n\tisInvited: boolean,\n\tphotoUrl: string,\n\tisIntegrator: boolean,\n}\n\nexport class FullNameField extends BaseField\n{\n\trender(params: FullNameFieldType): void\n\t{\n\t\tconst fullNameContainer = Tag.render`\n\t\t\t<div class=\"user-grid_full-name-container\">${this.#getFullNameLink(params.fullName, params.profileLink)}</div>\n\t\t`;\n\n\t\tif (params.position)\n\t\t{\n\t\t\tDom.append(this.#getPositionContainer(Text.encode(params.position)), fullNameContainer);\n\t\t}\n\n\t\tif (!params.isInvited && params.isConfirmed)\n\t\t{\n\t\t\tif (params.isIntegrator)\n\t\t\t{\n\t\t\t\tDom.append(this.#getIntegratorBalloonContainer(), fullNameContainer);\n\t\t\t}\n\t\t\telse if (params.isAdmin)\n\t\t\t{\n\t\t\t\tDom.append(this.#getAdminBalloonContainer(), fullNameContainer);\n\t\t\t}\n\t\t\telse if (params.isExtranet)\n\t\t\t{\n\t\t\t\tDom.append(this.#getExtranetBalloonContainer(), fullNameContainer);\n\t\t\t}\n\t\t}\n\t\telse if (params.isInvited && !params.isConfirmed)\n\t\t{\n\t\t\tDom.append(this.#getInviteNotConfirmedContainer(), fullNameContainer);\n\t\t}\n\t\telse if (params.isInvited)\n\t\t{\n\t\t\tDom.append(this.#getInviteNotAcceptedContainer(), fullNameContainer);\n\t\t}\n\n\t\tthis.appendToFieldNode(fullNameContainer);\n\t}\n\n\t#getFullNameLink(fullName: string, profileLink: string): HTMLElement\n\t{\n\t\treturn Tag.render`<a class=\"user-grid_full-name-label\" href=\"${profileLink}\">${fullName}</a>`;\n\t}\n\n\t#getInviteNotAcceptedContainer(): HTMLElement\n\t{\n\t\tconst label = new Label({\n\t\t\ttext: Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_INVITATION_NOT_ACCEPTED'),\n\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\tfill: true,\n\t\t\tsize: Label.Size.MD,\n\t\t\tcustomClass: 'user-grid_label',\n\t\t});\n\n\t\treturn label.render();\n\t}\n\n\t#getInviteNotConfirmedContainer(): HTMLElement\n\t{\n\t\tconst label = new Label({\n\t\t\ttext: Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_NOT_CONFIRMED'),\n\t\t\tcolor: LabelColor.YELLOW,\n\t\t\tfill: true,\n\t\t\tsize: Label.Size.MD,\n\t\t\tcustomClass: 'user-grid_label',\n\t\t});\n\n\t\treturn label.render();\n\t}\n\n\t#getPositionContainer(position: string): HTMLElement\n\t{\n\t\treturn Tag.render`<div class=\"user-grid_position-label\">${position}</div>`;\n\t}\n\n\t#getIntegratorBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --integrator\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_INTEGRATOR')}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getAdminBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --admin\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_ADMIN')}\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#getExtranetBalloonContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"user-grid_role-label --extranet\">\n\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_EXTRANET')}\n\t\t\t</span>\n\t\t`;\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Tag, Text, Dom } from 'main.core';\nimport { PhotoField } from './photo-field';\nimport { FullNameField } from './full-name-field';\n\nexport type EmployeeFieldType = {\n\tfullName: string,\n\tprofileLink: string,\n\tisConfirmed: boolean,\n\tisAdmin: boolean,\n\tposition: ?string,\n\tisInvited: boolean,\n\tisIntegrator: boolean,\n}\n\nexport class EmployeeField extends BaseField\n{\n\trender(params: EmployeeFieldType): void\n\t{\n\t\tconst photoFieldId = Text.getRandom(6);\n\t\tconst fullNameFieldId = Text.getRandom(6);\n\t\tthis.appendToFieldNode(Tag.render`<span id=\"${photoFieldId}\"></span>`);\n\t\tthis.appendToFieldNode(Tag.render`<span class=\"user-grid_full-name-wrapper\" id=\"${fullNameFieldId}\"></span>`);\n\n\t\t(new PhotoField({ fieldId: photoFieldId })).render(params);\n\t\t(new FullNameField({ fieldId: fullNameFieldId })).render(params);\n\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_employee-card-container');\n\t}\n}","import { Type, Loc } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { ErrorCollection } from 'ui.form-elements.field';\nimport { Popup } from 'main.popup';\n\nexport type SetSortType = {\n\tmenuId: ?string,\n\tgridId: string,\n\tsortBy: string,\n\torder: 'ASC' | 'DESC',\n}\n\nexport type SetFilterType = {\n\tgridId: string,\n\tfilter: Object,\n}\n\nexport class GridManager\n{\n\tstatic instances: Array<GridManager> = [];\n\t#grid: BX.Main.grid;\n\n\tconstructor(gridId: string)\n\t{\n\t\tthis.#grid = BX.Main.gridManager.getById(gridId)?.instance;\n\t}\n\n\tstatic getInstance(gridId: string): GridManager\n\t{\n\t\tif (!this.instances[gridId])\n\t\t{\n\t\t\tthis.instances[gridId] = new GridManager(gridId);\n\t\t}\n\n\t\treturn this.instances[gridId];\n\t}\n\n\tstatic setSort(options: SetSortType): void\n\t{\n\t\tconst grid = BX.Main.gridManager.getById(options.gridId)?.instance;\n\n\t\tif (Type.isObject(grid))\n\t\t{\n\t\t\tgrid.tableFade();\n\t\t\tgrid.getUserOptions().setSort(options.sortBy, options.order, () => {\n\t\t\t\tgrid.reload();\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic setFilter(options: SetFilterType): void\n\t{\n\t\tconst grid = BX.Main.gridManager.getById(options.gridId)?.instance;\n\t\tconst filter = BX.Main.filterManager.getById(options.gridId);\n\n\t\tif (Type.isObject(grid) && Type.isObject(filter))\n\t\t{\n\t\t\tfilter.getApi().extendFilter(options.filter);\n\t\t}\n\t}\n\n\tstatic reinviteCloudAction(data): Promise\n\t{\n\t\treturn BX.ajax.runAction('intranet.invite.reinviteWithChangeContact', {\n\t\t\tdata: data,\n\t\t}).then((response) => {\n\t\t\tif (response.data.result)\n\t\t\t{\n\t\t\t\tconst InviteAccessPopup = new BX.PopupWindow({\n\t\t\t\t\tcontent: `<p>${Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_SUCCESS')}</p>`,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t});\n\n\t\t\t\tInviteAccessPopup.show();\n\t\t\t}\n\n\t\t\treturn response;\n\t\t}, (response) => {\n\t\t\tconst errors = response.errors.map(error => error.message);\n\t\t\tErrorCollection.showSystemError(errors.join('<br>'));\n\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tstatic reinviteAction(userId, isExtranetUser): Promise\n\t{\n\t\treturn BX.ajax.runAction('intranet.controller.invite.reinvite', {\n\t\t\tdata: {\n\t\t\t\tparams: {\n\t\t\t\t\tuserId,\n\t\t\t\t\textranet: (isExtranetUser ? 'Y' : 'N'),\n\t\t\t\t},\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tif (response.data.result)\n\t\t\t{\n\t\t\t\tconst InviteAccessPopup = new BX.PopupWindow({\n\t\t\t\t\tcontent: `<p>${Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_SUCCESS')}</p>`,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t});\n\n\t\t\t\tInviteAccessPopup.show();\n\t\t\t}\n\n\t\t\treturn response;\n\t\t});\n\t}\n\n\tgetGrid():  BX.Main.grid\n\t{\n\t\treturn this.#grid;\n\t}\n\n\tconfirmAction(params: {\n\t\tuserId: number,\n\t\tisAccept: boolean,\n\t}): void\n\t{\n\t\tif (params.userId)\n\t\t{\n\t\t\tthis.confirmUser(params.isAccept ? 'confirm' : 'decline', () => {\n\t\t\t\tconst row = this.#grid.getRows().getById(params.userId);\n\t\t\t\trow?.stateLoad();\n\t\t\t\tBX.ajax.runAction('intranet.controller.invite.confirmUserRequest', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t\tisAccept: params.isAccept ? 'Y' : 'N',\n\t\t\t\t\t},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\trow?.update();\n\t\t\t\t}).catch((err) => {\n\t\t\t\t\trow?.stateUnload();\n\n\t\t\t\t\tif (!params.isAccept)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.activityAction({\n\t\t\t\t\t\t\tuserId: params.userId,\n\t\t\t\t\t\t\taction: 'deactivateInvited',\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tactivityAction(params: {\n\t\tuserId: number,\n\t\taction: string,\n\t}): void\n\t{\n\t\tconst userId = params.userId ?? null;\n\t\tconst action = params.action ?? null;\n\n\t\tif (userId)\n\t\t{\n\t\t\tthis.confirmUser(action, () => {\n\t\t\t\tconst row = this.#grid.getRows().getById(params.userId);\n\t\t\t\trow?.stateLoad();\n\t\t\t\tBX.ajax.runComponentAction('bitrix:intranet.user.list', 'setActivity', {\n\t\t\t\t\tmode: 'class',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tparams: {\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}).then(() => {\n\t\t\t\t\trow?.update();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\trow?.stateUnload();\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tBX.type.isNotEmptyObject(response)\n\t\t\t\t\t\t&& BX.type.isArray(response.errors)\n\t\t\t\t\t\t&& action === 'delete'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.activityAction({\n\t\t\t\t\t\t\taction: 'deactivateInvited',\n\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tconfirmUser(action: ?string, callBack: function)\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: this.getConfirmTitle(action) ?? '',\n\t\t\tmessage: this.getConfirmMessage(action) ?? '',\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: this.getConfirmButtonText(action),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tcallBack();\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetConfirmTitle(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_RESTORE_TITLE');\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_TITLE');\n\t\t\tcase 'delete':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_TITLE');\n\t\t\tcase 'deactivate':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_TITLE');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_TITLE');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_TITLE');\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetConfirmMessage(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_MESSAGE');\n\t\t\tcase 'delete':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_MESSAGE');\n\t\t\tcase 'deactivate':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_MESSAGE');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_MESSAGE');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_MESSAGE');\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetConfirmButtonText(action: ?string): ?string\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'restore':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_RESTORE_BUTTON');\n\t\t\tcase 'confirm':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_CONFIRM_BUTTON');\n\t\t\tcase 'delete':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DELETE_BUTTON');\n\t\t\tcase 'deactivate':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_BUTTON');\n\t\t\tcase 'deactivateInvited':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON');\n\t\t\tcase 'decline':\n\t\t\t\treturn Loc.getMessage('INTRANET_USER_LIST_ACTION_DECLINE_BUTTON');\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Loc, Tag, Dom } from 'main.core';\nimport { GridManager } from '../grid-manager';\nimport 'ui.cnt';\nimport { ReinvitePopup, FormType } from 'intranet.reinvite';\n\nexport type ActivityFieldType = {\n\tgridId: string,\n\tuserId: number,\n\taction: string,\n\tenabled: boolean,\n\temail: ?string,\n\tphoneNumber: ?string,\n\tisExtranet: boolean,\n\tisCloud: boolean,\n}\n\nexport class ActivityField extends BaseField\n{\n\trender(params: ActivityFieldType): void\n\t{\n\t\tlet title = '';\n\t\tlet color = '';\n\n\t\tswitch (params.action ?? 'invite')\n\t\t{\n\t\t\tcase 'accept':\n\t\t\t\ttitle = Loc.getMessage('INTRANET_JS_CONTROL_BUTTON_ACCEPT_ENTER');\n\t\t\t\tcolor = BX.UI.Button.Color.PRIMARY;\n\t\t\t\tbreak;\n\t\t\tcase 'invite':\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('INTRANET_JS_CONTROL_BUTTON_INVITE_AGAIN');\n\t\t\t\tcolor = BX.UI.Button.Color.LIGHT_BORDER;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst counter = Tag.render`\n\t\t\t<div class=\"ui-counter user-grid_invitation-counter\">\n\t\t\t\t<div class=\"ui-counter-inner\">1</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(counter, this.getFieldNode());\n\n\t\tconst button = new BX.UI.Button({\n\t\t\ttext: title,\n\t\t\tcolor,\n\t\t\tnoCaps: true,\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\ttag: BX.UI.Button.Tag.INPUT,\n\t\t\tround: true,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#onClick(params, button);\n\t\t\t},\n\t\t});\n\n\t\tbutton.renderTo(this.getFieldNode());\n\t}\n\n\t#updateData(data): void\n\t{\n\t\tconst row = GridManager.getInstance(this.gridId).getGrid()?.getRows().getById(this.userId);\n\t\trow?.stateLoad();\n\t\tGridManager.reinviteCloudAction(data).then((response) => {\n\t\t\trow?.update();\n\t\t\trow?.stateUnload();\n\t\t});\n\t}\n\n\t#onClick(params: ActivityFieldType, button: BX.UI.Button): void\n\t{\n\t\tif (!params.enabled)\n\t\t{\n\t\t\tconst popup = BX.PopupWindowManager.create(\n\t\t\t\t'intranet-user-grid-invitation-disabled',\n\t\t\t\tnull,\n\t\t\t\t{\n\t\t\t\t\tdarkMode: true,\n\t\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_LIST_ACTION_REINVITE_DISABLED'),\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tangle: true,\n\t\t\t\t\toffsetLeft: 40,\n\t\t\t\t\tmaxWidth: 300,\n\t\t\t\t\toverlay: false,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t},\n\t\t\t);\n\t\t\tpopup.setBindElement(button.getContainer());\n\t\t\tpopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#actionFactory(params.action).call(this, params, button);\n\t\t}\n\t}\n\n\t#actionFactory(action: string): function\n\t{\n\t\tswitch (action)\n\t\t{\n\t\t\tcase 'accept':\n\t\t\t\treturn this.#acceptAction;\n\t\t\t\tbreak;\n\t\t\tcase 'invite':\n\t\t\t\treturn this.#inviteAction;\n\t\t\tdefault:\n\t\t\t\treturn this.#inviteAction;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t#inviteAction(params, button): void\n\t{\n\t\tif (params.isCloud === true)\n\t\t{\n\t\t\tconst reinvitePopup = new ReinvitePopup({\n\t\t\t\tuserId: params.userId,\n\t\t\t\ttransport: this.#updateData.bind(params), //callback,\n\t\t\t\tformType: params.email ? FormType.EMAIL : FormType.PHONE,\n\t\t\t\tbindElement: button.getContainer(),\n\t\t\t\tinputValue: params.email ?? params.phoneNumber ?? '',\n\t\t\t});\n\t\t\t//This is a hack. When the row is updated, a new button is created.\n\t\t\treinvitePopup.getPopup().setBindElement(button.getContainer());\n\t\t\treinvitePopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbutton.setWaiting(true);\n\t\t\tGridManager.reinviteAction(params.userId, params.isExtranet).then(() => {\n\t\t\t\tbutton.setWaiting(false);\n\t\t\t});\n\t\t}\n\t}\n\n\t#acceptAction(params, button): void\n\t{\n\t\tGridManager.getInstance(params.gridId).confirmAction({\n\t\t\tisAccept: true,\n\t\t\tuserId: params.userId,\n\t\t});\n\t}\n}\n","import { BaseField } from './base-field';\nimport { Tag, Dom, Loc } from 'main.core';\nimport 'ui.icon-set.main';\nimport { Dialog } from 'ui.entity-selector';\nimport { GridManager } from '../grid-manager';\n\nexport type DepartmentFieldType = {\n\tdepartments: Object,\n\tcanEdit: boolean,\n\tselectedDepartment: number,\n}\n\nexport class DepartmentField extends BaseField\n{\n\trender(params: DepartmentFieldType): void\n\t{\n\t\tDom.addClass(this.getFieldNode(), 'user-grid_department-container');\n\n\t\tif (params.departments.length === 0 && params.canEdit)\n\t\t{\n\t\t\t// TODO: add department button\n\t\t\treturn;\n\t\t\tconst onclick = () => {\n\t\t\t\tconst dialog = new Dialog({\n\t\t\t\t\twidth: 300,\n\t\t\t\t\theight: 300,\n\t\t\t\t\ttargetNode: addButton,\n\t\t\t\t\tcompactView: true,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\n\t\t\t\tdialog.show();\n\t\t\t};\n\n\t\t\tconst addButton = Tag.render`\n\t\t\t\t<div class=\"user-grid_department-btn\" onclick=\"${onclick}\">\n\t\t\t\t\t<div class=\"user-grid_department-icon-container\">\n\t\t\t\t\t\t<div class=\"ui-icon-set --plus-30\" style=\"--ui-icon-set__icon-size: 18px; --ui-icon-set__icon-color: #2fc6f6;\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"user-grid_department-name-container\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_JS_CONTROL_BALLOON_ADD_DEPARTMENT')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.appendToFieldNode(addButton);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tObject.values(params.departments).forEach((department) => {\n\t\t\t\tconst isSelected = department.id === params.selectedDepartment;\n\t\t\t\tconst onclick = () => {\n\t\t\t\t\tGridManager.setFilter({\n\t\t\t\t\t\tgridId: this.getGridId(),\n\t\t\t\t\t\tfilter: {\n\t\t\t\t\t\t\tDEPARTMENT: isSelected ? '' : department.id,\n\t\t\t\t\t\t\tDEPARTMENT_label: isSelected ? '' : department.name,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\tconst button = Tag.render`\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"user-grid_department-btn ${isSelected ? '--selected' : ''}\"\n\t\t\t\t\t\tonclick=\"${onclick}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"user-grid_department-name-container\">\n\t\t\t\t\t\t\t${department.name}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tif (isSelected)\n\t\t\t\t{\n\t\t\t\t\tDom.append(Tag.render`\n\t\t\t\t\t\t<div class=\"user-grid_department-btn-remove ui-icon-set --cross-60\"></div>\n\t\t\t\t\t`, button);\n\t\t\t\t}\n\n\t\t\t\tthis.appendToFieldNode(button);\n\t\t\t});\n\t\t}\n\t}\n}\n","import { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport type BaseActionType = {\n\tgrid: ?BX.Main.grid,\n\tfilter: Array,\n\tselectedUsers: ?Array,\n\tshowPopups: ?boolean,\n\tisCloud: ?boolean,\n};\n\n/**\n * @abstract\n */\nexport class BaseAction\n{\n\t/**\n\t * @abstract\n\t */\n\tstatic getActionId(): string\n\t{\n\t\tthrow new Error('not implemented');\n\t}\n\n\t/**\n\t * @abstract\n\t */\n\tgetAjaxMethod(): string\n\t{\n\t\tthrow new Error('not implemented');\n\t}\n\n\tconstructor(params: BaseActionType)\n\t{\n\t\tthis.grid = params.grid;\n\t\tthis.userFilter = params.filter;\n\t\tthis.selectedUsers = params.selectedUsers;\n\t\tthis.showPopups = params.showPopups ?? true;\n\t\tthis.isCloud = params.isCloud;\n\t}\n\n\texecute(): void\n\t{\n\t\tconst confirmationPopup = this.showPopups\n\t\t\t? this.getConfirmationPopup()\n\t\t\t: null;\n\n\t\tif (confirmationPopup)\n\t\t{\n\t\t\tconfirmationPopup.setOkCallback(() => {\n\t\t\t\tthis.sendActionRequest();\n\t\t\t\tconfirmationPopup.close();\n\t\t\t});\n\t\t\tconfirmationPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sendActionRequest();\n\t\t}\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn null;\n\t}\n\n\tsendActionRequest(): void\n\t{\n\t\tthis.grid.tableFade();\n\t\tconst selectedRows = this.selectedUsers ?? this.grid.getRows().getSelectedIds();\n\t\tconst isSelectedAllRows = this.grid.getRows().isAllSelected() ? 'Y' : 'N';\n\n\t\tBX.ajax.runAction(this.getAjaxMethod(), {\n\t\t\tdata: {\n\t\t\t\tfields: {\n\t\t\t\t\tuserIds: selectedRows,\n\t\t\t\t\tisSelectedAllRows,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((result) => this.handleSuccess(result))\n\t\t\t.catch((result) => this.handleError(result));\n\t}\n\n\thandleSuccess(result: Result): void\n\t{\n\t\tthis.grid.reload();\n\n\t\tif (this.showPopups)\n\t\t{\n\t\t\tconst { skippedActiveUsers, skippedFiredUsers } = result.data;\n\n\t\t\tif (skippedActiveUsers && Object.keys(skippedActiveUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showActiveUsersPopup(skippedActiveUsers);\n\t\t\t}\n\t\t\telse if (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleError(result: Result): void\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tthis.unselectRows(this.grid);\n\t\tconsole.error(result);\n\n\t\tif (this.showPopups && result.errors && result.errors.length > 0)\n\t\t{\n\t\t\tconst errorMessage = result.errors.map((item) => {\n\t\t\t\treturn item.message;\n\t\t\t}).join(', ');\n\t\t\tMessageBox.show({\n\t\t\t\tmessage: errorMessage,\n\t\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\t\tonYes: (messageBox) => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage(this.getSkippedUsersTitleCode()),\n\t\t\tmessage: this.getMessageWithProfileNames(this.getSkippedUsersMessageCode(), activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetMessageWithProfileNames(messageCode: string, users: Array): string\n\t{\n\t\tconst maxDisplayCount = 5;\n\t\tconst userValues = Object.values(users);\n\t\tconst displayedNames = userValues.slice(0, maxDisplayCount).map((user) => user.fullName);\n\t\tconst remainingCount = userValues.length - maxDisplayCount;\n\t\tconst namesString = displayedNames.join(', ');\n\n\t\tif (displayedNames.length < 2 && remainingCount < 1)\n\t\t{\n\t\t\treturn Loc.getMessage(`${messageCode}_SINGLE`, {\n\t\t\t\t'#USER#': namesString,\n\t\t\t});\n\t\t}\n\n\t\tif (remainingCount > 0)\n\t\t{\n\t\t\treturn Loc.getMessage(`${messageCode}_REMAINING`, {\n\t\t\t\t'#USER_LIST#': namesString,\n\t\t\t\t'#USER_REMAINING#': remainingCount,\n\t\t\t});\n\t\t}\n\n\t\treturn Loc.getMessage(messageCode, {\n\t\t\t'#USER_LIST#': namesString,\n\t\t});\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn '';\n\t}\n\n\tunselectRows(grid: BX.Main.grid): void\n\t{\n\t\tgrid.getRows().unselectAll();\n\t\tgrid.updateCounterDisplayed();\n\t\tgrid.updateCounterSelected();\n\t\tgrid.disableActionsPanel();\n\t\tBX.onCustomEvent(window, 'Grid::allRowsUnselected', []);\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport class FireAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'fire';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_FIRE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupFire';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_FIRE_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\nimport { FireAction } from './fire-action';\n\nexport class DeleteAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'delete';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupDelete';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array)\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE', activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new FireAction({\n\t\t\t\t\tselectedUsers: Object.keys(activeUsers),\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t\tonNo: () => {\n\t\t\t\tthis.grid.reload();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\n\nexport class ConfirmAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'confirm';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\thandleSuccess(result: Result): void\n\t{\n\t\tthis.grid.reload();\n\n\t\tif (this.showPopups)\n\t\t{\n\t\t\tconst { skippedFiredUsers } = result.data;\n\n\t\t\tif (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t\t{\n\t\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupConfirm';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { Loc } from 'main.core';\nimport {FireAction} from \"./fire-action\";\n\nexport class DeclineAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'decline';\n\t}\n\n\tgetConfirmationPopup(): ?MessageBox\n\t{\n\t\treturn new MessageBox({\n\t\t\tmessage: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE'),\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE_TITLE'),\n\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\tokCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DECLINE_MESSAGE_BUTTON'),\n\t\t});\n\t}\n\n\tshowActiveUsersPopup(activeUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_DELETE_SKIPPED_MESSAGE', activeUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_DEACTIVATE_INVITED_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new FireAction({\n\t\t\t\t\tselectedUsers: Object.keys(activeUsers),\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupDecline';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Loc } from 'main.core';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport { ConfirmAction } from './confirm-action';\n\nexport class ReinviteAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'reInvite';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupReInvite';\n\t}\n\n\thandleSuccess(result)\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tconst { skippedActiveUsers, skippedFiredUsers, skippedWaitingUsers } = result.data;\n\n\t\tif (skippedActiveUsers && Object.keys(skippedActiveUsers).length > 0)\n\t\t{\n\t\t\tthis.showActiveUsersPopup(skippedActiveUsers);\n\t\t}\n\t\telse if (skippedWaitingUsers && Object.keys(skippedWaitingUsers).length > 0)\n\t\t{\n\t\t\tthis.showWaitingUsersPopup(skippedWaitingUsers);\n\t\t}\n\t\telse if (skippedFiredUsers && Object.keys(skippedFiredUsers).length > 0)\n\t\t{\n\t\t\tthis.showFiredUsersPopup(skippedFiredUsers);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_REINVITE_SUCCESS'),\n\t\t\t\tautoHide: true,\n\t\t\t\tposition: 'bottom-right',\n\t\t\t\tcategory: 'menu-self-item-popup',\n\t\t\t\tautoHideDelay: 3000,\n\t\t\t});\n\t\t}\n\n\t\tthis.unselectRows(this.grid);\n\t}\n\n\tshowWaitingUsersPopup(waitingUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ALREADY_ACCEPT_INVITE_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ALREADY_ACCEPT_INVITE_MESSAGE', waitingUsers),\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_MESSAGE_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t\t(new ConfirmAction({\n\t\t\t\t\tgrid: this.grid,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tselectedUsers: Object.keys(waitingUsers),\n\t\t\t\t\tshowPopups: false,\n\t\t\t\t})).execute();\n\t\t\t},\n\t\t});\n\t}\n\n\tshowFiredUsersPopup(firedUsers: Array): void\n\t{\n\t\tMessageBox.show({\n\t\t\ttitle: Loc.getMessage('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_TITLE'),\n\t\t\tmessage: this.getMessageWithProfileNames('INTRANET_USER_LIST_GROUP_ACTION_ACCEPT_FIRED_MESSAGE', firedUsers),\n\t\t\tbuttons: MessageBoxButtons.YES,\n\t\t\tyesCaption: Loc.getMessage('INTRANET_USER_LIST_ACTION_UNDERSTOOD_BUTTON'),\n\t\t\tonYes: (messageBox) => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_MESSAGE';\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_CONFIRM_SKIPPED_TITLE';\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Messenger } from 'im.public';\n\nexport class CreateChatAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'createChat';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.createChat';\n\t}\n\n\thandleSuccess(result)\n\t{\n\t\tthis.grid.tableUnfade();\n\t\tconst chatId = result.data;\n\t\tMessenger.openChat(`chat${chatId}`);\n\t\tthis.unselectRows(this.grid);\n\t}\n}\n","import { BaseAction } from './base-action';\nimport { Dialog } from 'ui.entity-selector';\nimport { Tag } from 'main.core';\n\nexport class ChangeDepartmentAction extends BaseAction\n{\n\tstatic getActionId(): string\n\t{\n\t\treturn 'changeDepartment';\n\t}\n\n\tgetAjaxMethod(): string\n\t{\n\t\treturn 'intranet.controller.user.userlist.groupChangeDepartment';\n\t}\n\n\texecute(): void\n\t{\n\t\tconst saveButton = new BX.UI.SaveButton({\n\t\t\tonclick: () => {\n\t\t\t\tconst selectedIds = dialog.getSelectedItems().map((item) => item.id);\n\t\t\t\tdialog.hide();\n\n\t\t\t\tif (selectedIds.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.sendChangeDepartmentRequest(selectedIds);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unselectRows(this.grid);\n\t\t\t\t}\n\t\t\t},\n\t\t\tsize: BX.UI.Button.Size.SMALL,\n\t\t});\n\t\tconst cancelButton = new BX.UI.CancelButton({\n\t\t\tonclick: () => {\n\t\t\t\tdialog.hide();\n\t\t\t},\n\t\t\tsize: BX.UI.Button.Size.SMALL,\n\t\t});\n\t\tconst footer = Tag.render`<span></span>`;\n\t\tsaveButton.renderTo(footer);\n\t\tcancelButton.renderTo(footer);\n\n\t\tconst dialog = new Dialog({\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tcompactView: true,\n\t\t\tmultiple: true,\n\t\t\tfooter,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'department',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: 'departmentsOnly',\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tdialog.show();\n\t}\n\n\tsendChangeDepartmentRequest(departmentIds: Array): void\n\t{\n\t\tthis.grid.tableFade();\n\t\tconst selectedRows = this.selectedUsers ?? this.grid.getRows().getSelectedIds();\n\t\tconst isSelectedAllRows = this.grid.getRows().isAllSelected() ? 'Y' : 'N';\n\n\t\tBX.ajax.runAction(this.getAjaxMethod(), {\n\t\t\tdata: {\n\t\t\t\tfields: {\n\t\t\t\t\tuserIds: selectedRows,\n\t\t\t\t\tisSelectedAllRows,\n\t\t\t\t\tfilter: this.userFilter,\n\t\t\t\t\tdepartmentIds,\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t\t\t.then((result) => this.handleSuccess(result))\n\t\t\t.catch((result) => this.handleError(result));\n\t}\n\n\tgetSkippedUsersTitleCode(): string\n\t{\n\t\treturn 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_TITLE';\n\t}\n\n\tgetSkippedUsersMessageCode(): string\n\t{\n\t\treturn this.isCloud\n\t\t\t? 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_MESSAGE_CLOUD'\n\t\t\t: 'INTRANET_USER_LIST_GROUP_ACTION_EXTRANET_CHANGE_DEPARTMENT_MESSAGE';\n\t}\n}\n","import { DeleteAction } from './delete-action';\nimport { FireAction } from './fire-action';\nimport { ConfirmAction } from './confirm-action';\nimport { DeclineAction } from './decline-action';\nimport { ReinviteAction } from './reinvite-action';\nimport { CreateChatAction } from './create-chat-action';\nimport { ChangeDepartmentAction } from './change-department-action';\nimport { BaseAction, BaseActionType } from './base-action';\n\nconst ACTIONS = [\n\tDeleteAction,\n\tFireAction,\n\tConfirmAction,\n\tDeclineAction,\n\tReinviteAction,\n\tCreateChatAction,\n\tChangeDepartmentAction,\n];\n\nexport class ActionFactory\n{\n\tstatic createAction(actionId: string, params: BaseActionType): BaseAction\n\t{\n\t\tconst ActionClass = ACTIONS.find((action) => action.getActionId() === actionId);\n\n\t\tif (!ActionClass)\n\t\t{\n\t\t\tthrow new Error(`Unknown actionId: ${actionId}`);\n\t\t}\n\n\t\treturn new ActionClass(params);\n\t}\n}\n","import { ActionFactory } from './group-actions/group-action-factory';\n\nexport type ActionParamsType = {\n\tactionId: string,\n\tgridId: string,\n\tfilter: Array,\n\tisCloud: boolean,\n}\n\nexport class Panel\n{\n\tstatic executeAction(params: ActionParamsType) {\n\t\ttry\n\t\t{\n\t\t\tconst action = ActionFactory.createAction(params.actionId, {\n\t\t\t\tgrid: BX.Main.gridManager.getById(params.gridId)?.instance,\n\t\t\t\tfilter: params.filter,\n\t\t\t\tisCloud: params.isCloud,\n\t\t\t});\n\t\t\taction.execute();\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Error executing action:', error);\n\t\t}\n\t}\n}"],"names":["BaseField","params","fieldId","gridId","grid","BX","Main","gridManager","getById","instance","document","getElementById","getFieldId","element","Dom","append","getFieldNode","PhotoField","addClass","photoUrl","style","iconClass","isInvited","isConfirmed","photo","Tag","render","FullNameField","fullNameContainer","fullName","profileLink","position","Text","encode","isIntegrator","isAdmin","isExtranet","appendToFieldNode","label","Label","text","Loc","getMessage","color","LabelColor","LIGHT_BLUE","fill","size","Size","MD","customClass","YELLOW","EmployeeField","photoFieldId","getRandom","fullNameFieldId","GridManager","_classPrivateFieldInitSpec","userId","confirmUser","isAccept","row","getRows","stateLoad","ajax","runAction","data","then","response","update","err","stateUnload","activityAction","action","runComponentAction","mode","type","isNotEmptyObject","isArray","errors","callBack","MessageBox","show","title","getConfirmTitle","message","getConfirmMessage","buttons","MessageBoxButtons","YES_CANCEL","yesCaption","getConfirmButtonText","onYes","messageBox","close","instances","options","Type","isObject","tableFade","getUserOptions","setSort","sortBy","order","reload","filter","filterManager","getApi","extendFilter","result","InviteAccessPopup","PopupWindow","content","autoHide","map","error","ErrorCollection","showSystemError","join","isExtranetUser","extranet","ActivityField","_classPrivateMethodInitSpec","UI","Button","Color","PRIMARY","LIGHT_BORDER","counter","button","noCaps","EXTRA_SMALL","tag","INPUT","round","onclick","_classPrivateMethodGet","renderTo","getInstance","getGrid","reinviteCloudAction","enabled","popup","PopupWindowManager","create","darkMode","closeByEsc","angle","offsetLeft","maxWidth","overlay","setBindElement","getContainer","call","isCloud","reinvitePopup","ReinvitePopup","transport","bind","formType","email","FormType","EMAIL","PHONE","bindElement","inputValue","phoneNumber","getPopup","setWaiting","reinviteAction","confirmAction","DepartmentField","departments","length","canEdit","dialog","Dialog","width","height","targetNode","addButton","compactView","multiple","entities","id","selectMode","allowSelectRootDepartment","Object","values","forEach","department","isSelected","selectedDepartment","setFilter","getGridId","DEPARTMENT","DEPARTMENT_label","name","BaseAction","Error","userFilter","selectedUsers","showPopups","confirmationPopup","getConfirmationPopup","setOkCallback","sendActionRequest","selectedRows","getSelectedIds","isSelectedAllRows","isAllSelected","getAjaxMethod","fields","userIds","handleSuccess","handleError","skippedActiveUsers","skippedFiredUsers","keys","showActiveUsersPopup","showFiredUsersPopup","tableUnfade","unselectRows","console","errorMessage","item","YES","activeUsers","getSkippedUsersTitleCode","getMessageWithProfileNames","getSkippedUsersMessageCode","firedUsers","messageCode","users","maxDisplayCount","userValues","displayedNames","slice","user","remainingCount","namesString","unselectAll","updateCounterDisplayed","updateCounterSelected","disableActionsPanel","onCustomEvent","window","FireAction","OK_CANCEL","okCaption","DeleteAction","execute","onNo","ConfirmAction","DeclineAction","ReinviteAction","skippedWaitingUsers","showWaitingUsersPopup","Notification","Center","notify","category","autoHideDelay","waitingUsers","CreateChatAction","chatId","Messenger","openChat","ChangeDepartmentAction","saveButton","SaveButton","selectedIds","getSelectedItems","hide","sendChangeDepartmentRequest","SMALL","cancelButton","CancelButton","footer","dropdownMode","enableSearch","departmentIds","ACTIONS","ActionFactory","actionId","ActionClass","find","getActionId","Panel","createAction"],"mappings":"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"}