{"version":3,"file":"script.js","sources":["src/self-item.js","src/standart-item.js","src/all-item.js","src/preset.js","src/counters.js","src/item-warning.js","src/index.js"],"sourcesContent":["import {Type, Event, Loc} from 'main.core';\n\nexport class SelfItem\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tshowSelfItemPopup(bindElement, itemInfo)\n\t{\n\t\tvar isEditMode = false;\n\t\tif (typeof itemInfo === \"object\" && itemInfo)\n\t\t{\n\t\t\tisEditMode = true;\n\t\t}\n\n\t\tvar popupContent = BX.create(\"form\", {\n\t\t\tattrs: {\n\t\t\t\tname: \"menuAddToFavoriteForm\"\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tfor: \"menuPageToFavoriteName\",\n\t\t\t\t\t\tclassName: \"menu-form-label\"\n\t\t\t\t\t},\n\t\t\t\t\thtml: BX.message(\"MENU_ITEM_NAME\")\n\t\t\t\t}),\n\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tvalue: isEditMode ? itemInfo.text : \"\",//document.title,\n\t\t\t\t\t\tname: \"menuPageToFavoriteName\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\tclassName: \"menu-form-input\"\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"br\"), BX.create(\"br\"),\n\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tfor: \"menuPageToFavoriteLink\",\n\t\t\t\t\t\tclassName: \"menu-form-label\"\n\t\t\t\t\t},\n\t\t\t\t\thtml: BX.message(\"MENU_ITEM_LINK\")\n\t\t\t\t}),\n\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tvalue: isEditMode ? itemInfo.link : \"\",//document.location.pathname,\n\t\t\t\t\t\tname: \"menuPageToFavoriteLink\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\tclassName: \"menu-form-input\"\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"br\"), BX.create(\"br\"),\n\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tvalue: \"\",\n\t\t\t\t\t\tname: \"menuOpenInNewPage\",\n\t\t\t\t\t\ttype: \"checkbox\",\n\t\t\t\t\t\tchecked: !isEditMode || itemInfo.openInNewPage ? \"checked\" : \"\",\n\t\t\t\t\t\tid: \"menuOpenInNewPage\"\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tfor: \"menuOpenInNewPage\",\n\t\t\t\t\t\tclassName: \"menu-form-label\"\n\t\t\t\t\t},\n\t\t\t\t\thtml: BX.message(\"MENU_OPEN_IN_NEW_PAGE\")\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tif (isEditMode)\n\t\t{\n\t\t\tpopupContent.appendChild(BX.create(\"input\", {\n\t\t\t\tattrs: {\n\t\t\t\t\tname: \"menuItemId\",\n\t\t\t\t\ttype: \"hidden\",\n\t\t\t\t\tvalue: itemInfo.id\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\tvar button;\n\t\tBX.PopupWindowManager.create(\"menu-self-item-popup\", bindElement, {\n\t\t\tcloseIcon: true,\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\t//overlay : { opacity : 20 },\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\ttitleBar: isEditMode ? BX.message(\"MENU_EDIT_SELF_PAGE\") : BX.message(\"MENU_ADD_SELF_PAGE\"),\n\t\t\tcontent: popupContent,\n\t\t\tbuttons: [\n\t\t\t\t(button = new BX.PopupWindowButton({\n\t\t\t\t\ttext: isEditMode ? BX.message(\"MENU_SAVE_BUTTON\") : BX.message(\"MENU_ADD_BUTTON\"),\n\t\t\t\t\tclassName: 'popup-window-button-create',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar form = document.forms[\"menuAddToFavoriteForm\"];\n\t\t\t\t\t\t\tvar textField = form.elements[\"menuPageToFavoriteName\"];\n\t\t\t\t\t\t\tvar linkField = form.elements[\"menuPageToFavoriteLink\"];\n\t\t\t\t\t\t\tvar openNewTab = form.elements[\"menuOpenInNewPage\"].checked;\n\n\t\t\t\t\t\t\tvar text = BX.util.trim(textField.value);\n\t\t\t\t\t\t\tvar link = this.parent.refineUrl(linkField.value);\n\n\t\t\t\t\t\t\tif (!text || !link)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (!link)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.addClass(linkField, \"menu-form-input-error\");\n\t\t\t\t\t\t\t\t\tlinkField.focus();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (!text)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.addClass(textField, \"menu-form-input-error\");\n\t\t\t\t\t\t\t\t\ttextField.focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.addClass(button.buttonNode, \"popup-window-button-wait\");\n\n\t\t\t\t\t\t\t\tBX.removeClass(textField, \"menu-form-input-error\");\n\t\t\t\t\t\t\t\tBX.removeClass(linkField, \"menu-form-input-error\");\n\n\t\t\t\t\t\t\t\tvar itemNewInfo = {\n\t\t\t\t\t\t\t\t\ttext: text,\n\t\t\t\t\t\t\t\t\tlink: link,\n\t\t\t\t\t\t\t\t\topenInNewPage: openNewTab ? \"Y\" : \"N\"\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (isEditMode)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titemNewInfo.id = itemInfo.id;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.saveSelfItem(\n\t\t\t\t\t\t\t\t\tisEditMode ? \"edit\" : \"add\",\n\t\t\t\t\t\t\t\t\titemNewInfo\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t})),\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: BX.message('MENU_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: function ()\n\t\t\t\t{\n\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().destroy();\n\t\t\t\t},\n\n\t\t\t\tonPopupShow: function ()\n\t\t\t\t{\n\t\t\t\t\tvar form = document.forms[\"menuAddToFavoriteForm\"];\n\t\t\t\t\tvar text = form.elements[\"menuPageToFavoriteName\"];\n\t\t\t\t\ttext && setTimeout(function ()\n\t\t\t\t\t{\n\t\t\t\t\t\ttext.focus();\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\tsaveSelfItem(mode, itemData)\n\t{\n\t\tBX.ajax.runAction(`intranet.leftmenu.${mode === \"edit\" ? \"update\" : \"add\"}SelfItem`, {\n\t\t\tdata: {\n\t\t\t\titemData: itemData\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tanalyticsLabel: 'selfItem'\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tvar itemParams = {\n\t\t\t\ttext: itemData.text,\n\t\t\t\tlink: itemData.link,\n\t\t\t\ttype: \"self\",\n\t\t\t\topenInNewPage: itemData.openInNewPage === \"Y\" ? \"Y\" : \"N\"\n\t\t\t};\n\n\t\t\tif (mode === \"add\" && response.data.hasOwnProperty(\"itemId\"))\n\t\t\t{\n\t\t\t\titemParams.id = response.data.itemId;\n\t\t\t\tthis.parent.generateItemHtml(itemParams);\n\t\t\t}\n\t\t\telse if (mode === \"edit\")\n\t\t\t{\n\t\t\t\titemParams.id = itemData.id;\n\t\t\t\tthis.parent.updateItemHtml(itemParams);\n\t\t\t}\n\n\t\t\tBX.PopupWindowManager.getCurrentPopup().destroy();\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showConfirmWindow({\n\t\t\t\talertMode: true,\n\t\t\t\ttitleBar: BX.message(\"MENU_ERROR_OCCURRED\"),\n\t\t\t\tcontent: response.errors[0].message\n\t\t\t});\n\t\t});\n\t}\n\n\tdeleteSelfItem(itemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + itemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tif (itemNode.getAttribute(\"data-delete-perm\") === \"A\") //delete from all\n\t\t{\n\t\t\tthis.parent.allItemObj.deleteItemFromAll(itemId);\n\t\t}\n\n\t\tBX.ajax.runAction('intranet.leftmenu.deleteSelfItem', {\n\t\t\tdata: {\n\t\t\t\tmenuItemId: itemId\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tBX.remove(itemNode);\n\t\t}, (response) => {\n\t\t\tthis.parent.showError(itemNode);\n\t\t});\n\t}\n}","export class StandartItem\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\taddStandardItem(params)\n\t{\n\t\tvar itemInfo = params.itemInfo;\n\t\tvar startX = params.startX;\n\t\tvar startY = params.startY;\n\t\tvar useAnimation = (!params.context || params.context === top.window);\n\n\t\tvar isCurrentPage = false;\n\n\t\tif (typeof itemInfo !== \"object\")\n\t\t{\n\t\t\tisCurrentPage = true;\n\n\t\t\tthis.parent.checkCurrentPageInTopMenu();\n\n\t\t\tif (this.parent.isCurrentPageStandard && BX.type.isDomNode(this.parent.topMenuSelectedNode))\n\t\t\t{\n\t\t\t\tvar menuNodeCoord = this.parent.topMenuSelectedNode.getBoundingClientRect();\n\t\t\t\tstartX = menuNodeCoord.left;\n\t\t\t\tstartY = menuNodeCoord.top;\n\n\t\t\t\titemInfo = {\n\t\t\t\t\tid: this.parent.topItemSelectedObj.DATA_ID,\n\t\t\t\t\ttext: this.parent.topItemSelectedObj.TEXT,\n\t\t\t\t\tlink: BX.type.isNotEmptyString(this.parent.currentPagePath) ? this.parent.currentPagePath : this.parent.topItemSelectedObj.URL,\n\t\t\t\t\tcounterId: this.parent.topItemSelectedObj.COUNTER_ID,\n\t\t\t\t\tcounterValue: this.parent.topItemSelectedObj.COUNTER,\n\t\t\t\t\tisStandardItem: true,\n\t\t\t\t\tsubLink: this.parent.topItemSelectedObj.SUB_LINK\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar pageTitle = BX.type.isNotEmptyString(params.pageTitle) ? params.pageTitle : document.getElementById('pagetitle').innerText;\n\t\t\t\tvar pageLink = '';\n\n\t\t\t\tif (BX.type.isNotEmptyString(params.pageLink))\n\t\t\t\t{\n\t\t\t\t\tpageLink = params.pageLink;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tpageLink = BX.type.isNotEmptyString(this.parent.currentPagePath) ? this.parent.currentPagePath : document.location.pathname + document.location.search;\n\t\t\t\t}\n\n\t\t\t\titemInfo = {\n\t\t\t\t\ttext: pageTitle,\n\t\t\t\t\tlink: pageLink,\n\t\t\t\t\tisStandardItem: false\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tif (!startX || !startY)\n\t\t{\n\t\t\tvar titleCoord = BX(\"pagetitle\").getBoundingClientRect();\n\t\t\tstartX = titleCoord.left;\n\t\t\tstartY = titleCoord.top;\n\t\t}\n\n\t\tBX.ajax.runAction('intranet.leftmenu.addStandartItem', {\n\t\t\tdata: {\n\t\t\t\titemData: itemInfo\n\t\t\t},\n\t\t}).then((response) => {\n\n\t\t\tif (response.data.hasOwnProperty(\"itemId\"))\n\t\t\t{\n\t\t\t\titemInfo.id = response.data.itemId;\n\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemAdded\", [itemInfo, this]);\n\n\t\t\t\tthis.animateTopItemToLeft(itemInfo, startX, startY, useAnimation);\n\n\t\t\t\tthis.onStandardItemChangedSuccess({\n\t\t\t\t\tisCurrentPage: isCurrentPage,\n\t\t\t\t\tisActive: true,\n\t\t\t\t\tcontext: params.context,\n\t\t\t\t});\n\n\t\t\t\tthis.parent.isCurrentPageInLeftMenu = true;\n\t\t\t}\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showConfirmWindow({\n\t\t\t\talertMode: true,\n\t\t\t\ttitleBar: BX.message(\"MENU_ERROR_OCCURRED\"),\n\t\t\t\tcontent: response.errors[0].message\n\t\t\t});\n\t\t});\n\t}\n\n\tdeleteStandardItem(params)\n\t{\n\t\tvar itemId = params.itemId;\n\t\tvar useAnimation = (!params.context || params.context === top.window);\n\n\t\tvar itemData = {};\n\t\tthis.parent.checkCurrentPageInTopMenu();\n\n\t\tif (itemId && BX.type.isDomNode(BX(\"bx_left_menu_\" + itemId)))\n\t\t{\n\t\t\titemData = {\n\t\t\t\tid: itemId\n\t\t\t};\n\t\t}\n\t\telse if (this.parent.isCurrentPageStandard && this.parent.topItemSelectedObj.DATA_ID)\n\t\t{\n\t\t\titemData = {\n\t\t\t\tid: this.parent.topItemSelectedObj.DATA_ID\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\titemData = {\n\t\t\t\tlink: (BX.type.isNotEmptyString(params.pageLink) ? params.pageLink : document.location.pathname + document.location.search),\n\t\t\t};\n\t\t}\n\n\t\tBX.ajax.runAction('intranet.leftmenu.deleteStandartItem', {\n\t\t\tdata: {\n\t\t\t\titemData: itemData,\n\t\t\t},\n\t\t}).then((response) => {\n\n\t\t\tif (response.data.hasOwnProperty(\"itemId\"))\n\t\t\t{\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [response.data, this]);\n\n\t\t\t\tvar itemNode = BX(\"bx_left_menu_\" + response.data.itemId);\n\t\t\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\t\t\treturn;\n\n\t\t\t\tif (itemNode.getAttribute(\"data-delete-perm\") === \"A\") //delete from all\n\t\t\t\t{\n\t\t\t\t\tthis.parent.allItemObj.deleteItemFromAll(response.data.itemId);\n\t\t\t\t}\n\n\t\t\t\tthis.onStandardItemChangedSuccess({\n\t\t\t\t\tisCurrentPage: !itemId,\n\t\t\t\t\tisActive: false,\n\t\t\t\t\tcontext: params.context,\n\t\t\t\t});\n\n\t\t\t\tthis.animateTopItemFromLeft(\"bx_left_menu_\" + response.data.itemId, useAnimation);\n\n\t\t\t\tthis.isCurrentPageInLeftMenu = false;\n\t\t\t}\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showConfirmWindow({\n\t\t\t\talertMode: true,\n\t\t\t\ttitleBar: BX.message(\"MENU_ERROR_OCCURRED\"),\n\t\t\t\tcontent: response.errors[0].message\n\t\t\t});\n\t\t});\n\t}\n\n\tupdateStandardItem(itemInfo)\n\t{\n\t\tBX.ajax.runAction('intranet.leftmenu.updateStandartItem', {\n\t\t\tdata: {\n\t\t\t\titemText: itemInfo.text,\n\t\t\t\titemId: itemInfo.id,\n\t\t\t},\n\t\t}).then((response) => {\n\n\t\t\tthis.parent.updateItemHtml(itemInfo);\n\t\t\tBX.PopupWindowManager.getCurrentPopup().destroy();\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showConfirmWindow({\n\t\t\t\talertMode: true,\n\t\t\t\ttitleBar: BX.message(\"MENU_ERROR_OCCURRED\"),\n\t\t\t\tcontent: response.errors[0].message\n\t\t\t});\n\t\t});\n\t}\n\n\tshowStandardEditItemPopup(bindElement, itemInfo)\n\t{\n\t\tvar isEditMode = false;\n\t\tif (typeof itemInfo === \"object\" && itemInfo)\n\t\t{\n\t\t\tisEditMode = true;\n\t\t}\n\n\t\tvar popupContent = BX.create(\"form\", {\n\t\t\tattrs: {\n\t\t\t\tname: \"menuAddToFavoriteForm\"\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tfor: \"menuPageToFavoriteName\",\n\t\t\t\t\t\tclassName: \"menu-form-label\"\n\t\t\t\t\t},\n\t\t\t\t\thtml: BX.message(\"MENU_ITEM_NAME\")\n\t\t\t\t}),\n\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tvalue: isEditMode ? itemInfo.text : \"\",//document.title,\n\t\t\t\t\t\tname: \"menuPageToFavoriteName\",\n\t\t\t\t\t\ttype: \"text\",\n\t\t\t\t\t\tclassName: \"menu-form-input\"\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tname: \"menuItemId\",\n\t\t\t\t\t\ttype: \"hidden\",\n\t\t\t\t\t\tvalue: itemInfo.id\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tBX.PopupWindowManager.create(\"menu-standard-item-popup-edit\", bindElement, {\n\t\t\tcloseIcon: true,\n\t\t\toffsetTop: 1,\n\t\t\t//overlay : { opacity : 20 },\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\ttitleBar: BX.message(\"MENU_RENAME_ITEM\"),\n\t\t\tcontent: popupContent,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext: BX.message(\"MENU_SAVE_BUTTON\"),\n\t\t\t\t\tclassName: 'popup-window-button-create',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar form = document.forms[\"menuAddToFavoriteForm\"];\n\t\t\t\t\t\t\tvar textField = form.elements[\"menuPageToFavoriteName\"];\n\t\t\t\t\t\t\tvar text = BX.util.trim(textField.value);\n\t\t\t\t\t\t\tif (!text)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.addClass(textField, \"menu-form-input-error\");\n\t\t\t\t\t\t\t\ttextField.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.removeClass(textField, \"menu-form-input-error\");\n\n\t\t\t\t\t\t\t\tvar itemNewInfo = {\n\t\t\t\t\t\t\t\t\ttext: text,\n\t\t\t\t\t\t\t\t\tid: itemInfo.id\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tthis.updateStandardItem(itemNewInfo/*, this.onSelfItemSave.bind(this)*/);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: BX.message('MENU_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: function ()\n\t\t\t\t{\n\t\t\t\t\tBX.PopupWindowManager.getCurrentPopup().destroy();\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\tonStandardItemChangedSuccess(params)\n\t{\n\t\tif (params.isCurrentPage)\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\tisActive: params.isActive,\n\t\t\t\tcontext: params.context,\n\t\t\t}]);\n\t\t}\n\t}\n\n\tanimateTopItemToLeft(itemInfo, startX, startY, useAnimation)\n\t{\n\t\tif (typeof itemInfo !== \"object\")\n\t\t\treturn;\n\n\t\tvar topMenuNode = BX.create(\"div\", {\n\t\t\ttext: itemInfo.text,\n\t\t\tattrs: {\n\t\t\t\tstyle: \"position: absolute; z-index: 1000;\"\n\t\t\t}\n\t\t});\n\t\ttopMenuNode.style.top = startY + 25 + \"px\";\n\n\t\tdocument.body.appendChild(topMenuNode);\n\n\t\tvar finishY = this.parent.menuItemsBlock.getBoundingClientRect().bottom;\n\t\tif (this.parent.areMoreItemsShowed())\n\t\t{\n\t\t\tfinishY -= BX(\"left-menu-hidden-items-list\").offsetHeight;\n\t\t}\n\n\t\tif (!useAnimation)\n\t\t{\n\t\t\tBX.remove(topMenuNode);\n\t\t\titemInfo.type = \"standard\";\n\t\t\tthis.isCurrentPageInLeftMenu = true;\n\t\t\tthis.parent.generateItemHtml(itemInfo);\n\t\t\tthis.parent.saveItemsSort({analyticsLabel: 'standartItem'});\n\n\t\t\treturn;\n\t\t}\n\n\t\t(new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {left: startX},\n\t\t\tfinish: {left: 30},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state)\n\t\t\t{\n\t\t\t\ttopMenuNode.style.left = state.left + \"px\";\n\t\t\t},\n\t\t\tcomplete: BX.proxy(function ()\n\t\t\t{\n\t\t\t\t(new BX.easing({\n\t\t\t\t\tduration: 500,\n\t\t\t\t\tstart: {top: startY + 25},\n\t\t\t\t\tfinish: {top: finishY},\n\t\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\t\tstep: function (state)\n\t\t\t\t\t{\n\t\t\t\t\t\ttopMenuNode.style.top = state.top + \"px\";\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: BX.proxy(function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.remove(topMenuNode);\n\t\t\t\t\t\titemInfo.type = \"standard\";\n\t\t\t\t\t\tthis.isCurrentPageInLeftMenu = true;\n\t\t\t\t\t\tthis.parent.generateItemHtml(itemInfo);\n\t\t\t\t\t\tthis.parent.saveItemsSort({analyticsLabel: 'standartItem'});\n\n\t\t\t\t\t}, this)\n\t\t\t\t})).animate();\n\t\t\t}, this)\n\t\t})).animate();\n\t}\n\n\tanimateTopItemFromLeft(itemId, useAnimation)\n\t{\n\t\tif (!BX.type.isDomNode(BX(itemId)))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!useAnimation)\n\t\t{\n\t\t\tBX.remove(BX(itemId));\n\t\t\tthis.isCurrentPageInLeftMenu = false;\n\t\t\tthis.parent.saveItemsSort({analyticsLabel: 'standartItem'});\n\n\t\t\treturn;\n\t\t}\n\n\t\t(new BX.easing({\n\t\t\tduration: 700,\n\t\t\tstart: {left: BX(itemId).offsetLeft, opacity: 1},\n\t\t\tfinish: {left: 400, opacity: 0},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state)\n\t\t\t{\n\t\t\t\tBX(itemId).style.paddingLeft = state.left + \"px\";\n\t\t\t\tBX(itemId).style.opacity = state.opacity;\n\t\t\t},\n\t\t\tcomplete: BX.proxy(function ()\n\t\t\t{\n\t\t\t\tBX.remove(BX(itemId));\n\t\t\t\tthis.parent.isCurrentPageInLeftMenu = false;\n\t\t\t\tthis.parent.saveItemsSort({analyticsLabel: 'standartItem'});\n\t\t\t}, this)\n\t\t})).animate();\n\t}\n}","export class AllItem\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\taddItemToAll(menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tvar itemLink = itemNode.getAttribute(\"data-link\"),\n\t\t\titemTextNode = itemNode.querySelector(\"[data-role='item-text']\"),\n\t\t\titemText = itemTextNode.innerText,\n\t\t\titemCounterId = itemNode.getAttribute(\"data-counter-id\"),\n\t\t\titemLinkNode = BX.findChild(itemNode, {tagName: \"a\"}, true, false),\n\t\t\topenInNewPage = BX.type.isDomNode(itemLinkNode) && itemLinkNode.hasAttribute(\"target\") && itemLinkNode.getAttribute(\"target\") === \"_blank\";\n\n\t\tBX.ajax.runAction('intranet.leftmenu.addItemToAll', {\n\t\t\tdata: {\n\t\t\t\titemInfo: {\n\t\t\t\t\tid: menuItemId,\n\t\t\t\t\tlink: itemLink,\n\t\t\t\t\ttext: itemText,\n\t\t\t\t\tcounterId: itemCounterId,\n\t\t\t\t\topenInNewPage: openInNewPage ? \"Y\" : \"N\"\n\t\t\t\t}\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\titemNode.setAttribute(\"data-delete-perm\", \"A\");\n\t\t\tthis.parent.showMessage(itemNode, BX.message(\"MENU_ITEM_WAS_ADDED_TO_ALL\"));\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showError(itemNode);\n\t\t});\n\t}\n\n\tdeleteItemFromAll(menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tBX.ajax.runAction('intranet.leftmenu.deleteItemFromAll', {\n\t\t\tdata: {\n\t\t\t\tmenu_item_id: menuItemId\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\titemNode.setAttribute(\"data-delete-perm\", \"Y\");\n\t\t\tthis.parent.showMessage(itemNode, BX.message(\"MENU_ITEM_WAS_DELETED_FROM_ALL\"));\n\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showError(itemNode);\n\t\t});\n\t}\n\n\tdeleteCustomItemFromAll(menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tvar itemType = itemNode.getAttribute(\"data-type\");\n\n\t\tif (itemType !== \"custom\")\n\t\t\treturn;\n\n\t\tBX.ajax.runAction('intranet.leftmenu.deleteCustomItemFromAll', {\n\t\t\tdata: {\n\t\t\t\tmenu_item_id: menuItemId\n\t\t\t}\n\t\t}).then((response) => {\n\n\t\t\tBX.remove(itemNode);\n\t\t}, (response) => {\n\n\t\t\tthis.parent.showError(itemNode);\n\t\t});\n\t}\n}","export class Preset\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tinitPreset()\n\t{\n\t\tvar container = BX(\"left-menu-preset-popup\");\n\n\t\tif (!BX.type.isDomNode(container))\n\t\t\treturn;\n\n\t\tthis.presetItems = container.getElementsByClassName(\"js-left-menu-preset-item\");\n\t\tif (typeof this.presetItems == \"object\")\n\t\t{\n\t\t\tfor (var i = 0; i < this.presetItems.length; i++)\n\t\t\t{\n\t\t\t\tBX.bind(this.presetItems[i], \"click\", BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tthis.selectPreset(BX.proxy_context);\n\t\t\t\t}, this));\n\t\t\t}\n\n\t\t}\n\t}\n\n\tselectPreset(selectedNode)\n\t{\n\t\tfor (var i = 0; i < this.presetItems.length; i++)\n\t\t{\n\t\t\tBX.removeClass(this.presetItems[i], \"left-menu-popup-selected\");\n\t\t}\n\n\t\tif (BX.type.isDomNode(selectedNode))\n\t\t{\n\t\t\tBX.addClass(selectedNode, \"left-menu-popup-selected\");\n\t\t}\n\t}\n\n\tshowPresetPopupFunction(mode)\n\t{\n\t\tBX.ready(function ()\n\t\t{\n\t\t\tvar button = null;\n\t\t\tBX.PopupWindowManager.create(\"menu-preset-popup\", null, {\n\t\t\t\tcloseIcon: false,\n\t\t\t\toffsetTop: 1,\n\t\t\t\toverlay: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontentColor: \"white\",\n\t\t\t\tdraggable: {restrict: true},\n\t\t\t\tcloseByEsc: false,\n\t\t\t\tcontent: BX(\"left-menu-preset-popup\"),\n\t\t\t\tbuttons: [\n\t\t\t\t\t(button = new BX.PopupWindowButton({\n\t\t\t\t\t\ttext: BX.message(\"MENU_CONFIRM_BUTTON\"),\n\t\t\t\t\t\tclassName: \"popup-window-button-create\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: BX.proxy(function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (BX.hasClass(button.buttonNode, \"popup-window-button-wait\"))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.addClass(button.buttonNode, \"popup-window-button-wait\");\n\n\t\t\t\t\t\t\t\tvar form = document.forms[\"left-menu-preset-form\"];\n\t\t\t\t\t\t\t\tvar currentPreset = \"\";\n\t\t\t\t\t\t\t\tif (form)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tvar presets = form.elements[\"presetType\"];\n\t\t\t\t\t\t\t\t\tfor (var i = 0; i < presets.length; i++)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tif (presets[i].checked)\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tcurrentPreset = presets[i].value;\n\t\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tBX.ajax.runAction('intranet.leftmenu.setPreset', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tpreset: currentPreset,\n\t\t\t\t\t\t\t\t\t\tmode: mode == \"global\" ? \"global\" : \"personal\"\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\t\t\t\tanalyticsLabel: currentPreset + (mode == \"global\" ? \"&analyticsFirst=y\" : \"\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).then((response) => {\n\n\t\t\t\t\t\t\t\t\tif (response.data.hasOwnProperty(\"url\"))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.href = response.data.url;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}, (response) => {\n\n\t\t\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t}\n\t\t\t\t\t})),\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext: BX.message('MENU_DELAY_BUTTON'),\n\t\t\t\t\t\t// className: \"popup-window-button-link-cancel\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: BX.proxy(function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.ajax.runAction('intranet.leftmenu.delaySetPreset', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\t\t\t\tanalyticsLabel: (mode == \"global\" ? \"&analyticsFirst=y\" : \"\")\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).then((response) => {\n\n\t\t\t\t\t\t\t\t}, (response) => {\n\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tBX.proxy_context.popupWindow.close();\n\t\t\t\t\t\t\t\tif(this.showImportConfiguration)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.parent.showImportConfigurationSlider();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}).show();\n\n\t\t\tthis.initPreset();\n\t\t}.bind(this));\n\t}\n\n\tshowCustomPresetPopup()\n\t{\n\t\tvar content = BX.create(\"form\", {\n\t\t\tattrs: {id: \"customPresetForm\", style: \"min-width: 350px\"},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"div\", {\n\t\t\t\t\tattrs: {style: \"margin: 15px 0 15px 9px;\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\t\t\tattrs: {type: \"radio\", name: \"customPresetSettings\", id: \"customPresetCurrentUser\", value: \"currentUser\"}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\t\t\tattrs: {for: \"customPresetCurrentUser\"},\n\t\t\t\t\t\t\thtml: BX.message(\"MENU_CUSTOM_PRESET_CURRENT_USER\")\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tBX.create(\"div\", {\n\t\t\t\t\tattrs: {style: \"margin: 0 0 38px 9px;\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"input\", {\n\t\t\t\t\t\t\tattrs: {type: \"radio\", name: \"customPresetSettings\", id: \"customPresetNewUser\", value: \"newUser\", checked: \"checked\"}\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tBX.create(\"label\", {\n\t\t\t\t\t\t\tattrs: {for: \"customPresetNewUser\"},\n\t\t\t\t\t\t\thtml: BX.message(\"MENU_CUSTOM_PRESET_NEW_USER\")\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tBX.create(\"hr\", {attrs: {\n\t\t\t\t\t\tstyle: \"background-color: #edeef0; border: none; color:  #edeef0; height: 1px;\"\n\t\t\t\t\t}})\n\t\t\t]\n\t\t});\n\n\t\tvar showMenuItems = [],\n\t\t\thideMenuItems = [],\n\t\t\tcustomItems = [],\n\t\t\tfirstItemLink = \"\";\n\n\t\tvar items = BX.findChildren(this.parent.menuContainer, {className: \"menu-item-block\"}, true);\n\n\t\tfor (var i = 0; i < items.length; i++)\n\t\t{\n\t\t\tif (i == 0)\n\t\t\t{\n\t\t\t\tfirstItemLink = items[i].getAttribute(\"data-link\");\n\t\t\t}\n\n\t\t\tif (items[i].getAttribute(\"data-status\") == \"show\")\n\t\t\t{\n\t\t\t\tshowMenuItems.push(items[i].getAttribute(\"data-id\"));\n\t\t\t}\n\t\t\telse if (items[i].getAttribute(\"data-status\") == \"hide\")\n\t\t\t{\n\t\t\t\thideMenuItems.push(items[i].getAttribute(\"data-id\"));\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\titems[i].getAttribute(\"data-type\") == \"self\"\n\t\t\t\t|| items[i].getAttribute(\"data-type\") == \"standard\"\n\t\t\t\t|| items[i].getAttribute(\"data-type\") == \"custom\"\n\t\t\t)\n\t\t\t{\n\t\t\t\tvar textNode = items[i].querySelector(\"[data-role='item-text']\");\n\t\t\t\tvar item = {\n\t\t\t\t\tID: items[i].getAttribute(\"data-id\"),\n\t\t\t\t\tLINK: items[i].getAttribute(\"data-link\"),\n\t\t\t\t\tTEXT: BX.util.htmlspecialcharsback(textNode.innerHTML)\n\t\t\t\t};\n\t\t\t\tif (items[i].getAttribute(\"data-new-page\") == \"Y\")\n\t\t\t\t{\n\t\t\t\t\titem.NEW_PAGE = \"Y\";\n\t\t\t\t}\n\t\t\t\tcustomItems.push(item);\n\t\t\t}\n\t\t}\n\n\t\tthis.menuItemsCustomSort = {\"show\": showMenuItems, \"hide\": hideMenuItems};\n\n\t\tvar button;\n\t\tBX.PopupWindowManager.create(\"menu-custom-preset-popup\", null, {\n\t\t\tcloseIcon: true,\n\t\t\toffsetTop: 1,\n\t\t\toverlay: true,\n\t\t\tcontentColor : \"white\",\n\t\t\tcontentNoPaddings : true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\ttitleBar: BX.message(\"MENU_CUSTOM_PRESET_POPUP_TITLE\"),\n\t\t\tcontent: content,\n\t\t\tbuttons: [\n\t\t\t\t(button = new BX.PopupWindowButton({\n\t\t\t\t\ttext: BX.message(\"MENU_SAVE_BUTTON\"),\n\t\t\t\t\tclassName: \"popup-window-button-create\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (BX.hasClass(button.buttonNode, \"popup-window-button-wait\"))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tBX.addClass(button.buttonNode, \"popup-window-button-wait\");\n\n\t\t\t\t\t\t\tvar form = BX(\"customPresetForm\");\n\t\t\t\t\t\t\tif (BX.type.isDomNode(form))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tvar userSetting = form.elements[\"customPresetSettings\"].value;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tBX.ajax.runAction('intranet.leftmenu.saveCustomPreset', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tuserApply: userSetting,\n\t\t\t\t\t\t\t\t\titemsSort: this.menuItemsCustomSort,\n\t\t\t\t\t\t\t\t\tcustomItems: customItems,\n\t\t\t\t\t\t\t\t\tfirstItemLink: firstItemLink\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\t\t\tanalyticsLabel: 'customPreset'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).then((response) => {\n\n\t\t\t\t\t\t\t\tBX.removeClass(button.buttonNode, \"popup-window-button-wait\");\n\t\t\t\t\t\t\t\tBX.PopupWindowManager._currentPopup.close();\n\t\t\t\t\t\t\t\tthis.parent.customPresetExists = true;\n\n\t\t\t\t\t\t\t\tBX.PopupWindowManager.create(\"menu-custom-preset-success-popup\", null, {\n\t\t\t\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\t\t\t\tcontentColor : \"white\",\n\t\t\t\t\t\t\t\t\ttitleBar: BX.message(\"MENU_CUSTOM_PRESET_POPUP_TITLE\"),\n\t\t\t\t\t\t\t\t\tcontent: BX.message(\"MENU_CUSTOM_PRESET_SUCCESS\")\n\t\t\t\t\t\t\t\t}).show();\n\n\t\t\t\t\t\t\t}, (response) => {\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}, this),\n\t\t\t\t\t\tclose: function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})),\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext: BX.message('MENU_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t]\n\t\t}).show();\n\t}\n}","export class Counters\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.allCountersInMenu = {};\n\t\tthis.livefeedCounter = {\n\t\t\tdecrementStack: 0,\n\t\t\tvalue: 0\n\t\t};\n\t\tthis.hiddenCounters = params.hiddenCounters || [];\n\t\tthis.allCounters = params.allCounters || {};\n\t}\n\n\tupdateCounters(counters, send)\n\t{\n\t\tsend = send !== false;\n\n\t\tvar valueToShow = 0;\n\n\t\tfor (var id in counters)\n\t\t{\n\t\t\tif (!counters.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tthis.allCounters[id] = counters[id];\n\n\t\t\tvar counter = BX(id === \"**\" ? \"menu-counter-live-feed\" : \"menu-counter-\" + id.toLowerCase(), true);\n\t\t\tif (counter)\n\t\t\t{\n\t\t\t\tif (id === \"**\")\n\t\t\t\t{\n\t\t\t\t\tthis.livefeedCounter.value = counters[id];\n\n\t\t\t\t\tif (counters[id] <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.livefeedCounter.decrementStack = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvalueToShow = this.livefeedCounter.value - this.livefeedCounter.decrementStack;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tvalueToShow = counters[id];\n\t\t\t\t}\n\n\t\t\t\tthis.allCountersInMenu[id] = valueToShow;\n\n\t\t\t\tif (valueToShow > 0)\n\t\t\t\t{\n\t\t\t\t\tcounter.innerHTML = valueToShow > 99 ? \"99+\" : valueToShow;\n\t\t\t\t\tBX.addClass(counter.parentNode.parentNode.parentNode, \"menu-item-with-index\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBX.removeClass(counter.parentNode.parentNode.parentNode, \"menu-item-with-index\");\n\n\t\t\t\t\tif (valueToShow < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tvar warning = BX('menu-counter-warning-'+id.toLowerCase());\n\t\t\t\t\t\tif (warning)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twarning.style.display = 'inline-block';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (send)\n\t\t\t\t{\n\t\t\t\t\tBX.localStorage.set('lmc-'+id, counters[id], 5);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar sumHiddenCounters = 0;\n\t\tfor (var i = 0, l = this.hiddenCounters.length; i < l; i++)\n\t\t{\n\t\t\tif (this.allCounters[this.hiddenCounters[i]])\n\t\t\t{\n\t\t\t\tsumHiddenCounters += (+this.allCounters[this.hiddenCounters[i]]);\n\t\t\t}\n\t\t}\n\n\t\tif (BX.type.isDomNode(BX(\"menu-hidden-counter\")))\n\t\t{\n\t\t\tif (sumHiddenCounters > 0)\n\t\t\t{\n\t\t\t\tBX.removeClass(BX(\"menu-hidden-counter\"), \"menu-hidden-counter\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.addClass(BX(\"menu-hidden-counter\"), \"menu-hidden-counter\");\n\t\t\t}\n\n\t\t\tBX(\"menu-hidden-counter\").innerHTML = sumHiddenCounters > 99 ? \"99+\" : sumHiddenCounters;\n\t\t}\n\n\t\tthis.updateDesktopCounter();\n\t}\n\n\tupdateDesktopCounter()\n\t{\n\t\tif (typeof BXIM === \"undefined\")\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar countersSum = 0;\n\n\t\tfor (var counterId in this.allCountersInMenu)\n\t\t{\n\t\t\tif (counterId !== \"im-message\")\n\t\t\t{\n\t\t\t\tcountersSum += parseInt(this.allCountersInMenu[counterId]);\n\t\t\t}\n\t\t}\n\n\t\tif (countersSum < 0)\n\t\t{\n\t\t\tcountersSum = 0;\n\t\t}\n\t\telse if (countersSum > 99)\n\t\t{\n\t\t\tcountersSum = \"99\";\n\t\t}\n\n\t\tBXIM.desktop.setBrowserIconBadge(countersSum);\n\t}\n\n\tdecrementCounter(node, iDecrement)\n\t{\n\t\tif (!node)\n\t\t\treturn;\n\n\t\tiDecrement = parseInt(iDecrement);\n\n\t\tif (node.id == 'menu-counter-live-feed')\n\t\t{\n\t\t\tthis.livefeedCounter.decrementStack += iDecrement;\n\t\t\tvar counterValue = this.livefeedCounter.value - this.livefeedCounter.decrementStack;\n\n\t\t\tif (counterValue > 0)\n\t\t\t{\n\t\t\t\tnode.innerHTML = counterValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.removeClass(node.parentNode.parentNode.parentNode, \"menu-item-with-index\");\n\t\t\t}\n\t\t}\n\t}\n\n\trecountHiddenCounters()\n\t{\n\t\tvar curSumCounters = 0;\n\t\tvar hiddenItems = BX.findChildren(BX(\"left-menu-hidden-items-list\"), {className: \"menu-item-block\"}, true);\n\t\tthis.hiddenCounters = [];\n\n\t\tif (hiddenItems)\n\t\t{\n\t\t\tfor (var i = 0, l = hiddenItems.length; i < l; i++)\n\t\t\t{\n\t\t\t\tvar curCounter = hiddenItems[i].getAttribute(\"data-counter-id\");\n\t\t\t\tthis.hiddenCounters.push(curCounter);\n\n\t\t\t\tif (this.allCounters[curCounter])\n\t\t\t\t{\n\t\t\t\t\tcurSumCounters += Number(this.allCounters[curCounter]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (curSumCounters > 0)\n\t\t{\n\t\t\tBX.removeClass(BX(\"menu-hidden-counter\"), \"menu-hidden-counter\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addClass(BX(\"menu-hidden-counter\"), \"menu-hidden-counter\");\n\t\t}\n\n\t\tBX(\"menu-hidden-counter\").innerHTML = curSumCounters > 99 ? \"99+\" : curSumCounters;\n\t}\n}","export class ItemWarning\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tshowItemWarning(options)\n\t{\n\t\toptions = BX.type.isPlainObject(options) ? options : {};\n\n\t\tvar itemId = BX.type.isNotEmptyString(options.itemId) ? options.itemId : \"\";\n\t\tvar itemNode = BX(\"bx_left_menu_\" + itemId);\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.removeItemWarning(itemId);\n\n\t\tvar warningNode = BX.create(\n\t\t\t'a',\n\t\t\t{\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: \"menu-post-warn-icon\"\n\t\t\t\t},\n\t\t\t\tattrs: {\n\t\t\t\t\ttitle: BX.type.isNotEmptyString(options.title) ? options.title : \"\",\n\t\t\t\t},\n\t\t\t\tevents: BX.type.isNotEmptyObject(options.events) ? options.events : {}\n\t\t\t}\n\t\t);\n\n\t\tvar link = itemNode.querySelector(\".menu-item-link\");\n\t\tif (link)\n\t\t{\n\t\t\tBX.addClass(itemNode, \"menu-item-warning-state\");\n\t\t\tlink.appendChild(warningNode);\n\t\t}\n\t}\n\n\tremoveItemWarning(itemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + itemId);\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar warningNode = itemNode.querySelector(\".menu-post-warn-icon\");\n\t\tif (warningNode)\n\t\t{\n\t\t\tBX.remove(warningNode);\n\t\t}\n\n\t\tBX.removeClass(itemNode, \"menu-item-warning-state\");\n\t}\n}","import {Reflection} from \"main.core\";\nimport {SelfItem} from './self-item';\nimport {StandartItem} from './standart-item';\nimport {AllItem} from './all-item';\nimport {Preset} from './preset';\nimport {Counters} from './counters';\nimport {ItemWarning} from './item-warning';\n\nconst namespace = Reflection.namespace('BX.Intranet');\n\nclass LeftMenu\n{\n\tconstructor(params)\n\t{\n\t\tparams = typeof params === \"object\" ? params : {};\n\n\t\tthis.ajaxPath = params.ajaxPath || null;\n\t\tthis.isAdmin = params.isAdmin === \"Y\";\n\t\tthis.isBitrix24 = params.isBitrix24 === \"Y\";\n\t\tthis.siteId = params.siteId || null;\n\t\tthis.siteDir = params.siteDir || null;\n\t\tthis.isExtranet = params.isExtranet === \"Y\";\n\t\tthis.isCompositeMode = params.isCompositeMode === true;\n\t\tthis.isCollapsedMode = params.isCollapsedMode === true;\n\t\tthis.activeItemsId = [];\n\t\tthis.isCurrentPageInLeftMenu = false;\n\t\tthis.currentPagePath = null;\n\t\tthis.menuSelectedNode = null;\n\t\tthis.showPresetPopup = params.showPresetPopup === \"Y\";\n\t\tthis.showImportConfiguration = params.showImportConfiguration === \"Y\";\n\t\tthis.urlImportConfiguration = params.urlImportConfiguration || '';\n\t\tthis.isCustomPresetAvailable = params.isCustomPresetAvailable === \"Y\";\n\t\tthis.customPresetExists = params.customPresetExists === \"Y\";\n\t\tthis.isCurrentPageStandard = false;\n\t\tthis.topMenuSelectedNode = null;\n\t\tthis.topItemSelectedObj = null;\n\t\tthis.isPublicConverted = params.isPublicConverted === \"Y\";\n\t\tthis.lastScrollOffset = 0;\n\n\t\tthis.logoMaskNeeded = null;\n\t\tthis.islogoMaskMode = false;\n\t\tthis.isScrollMode = false;\n\t\tthis.scrollModeThreshold = 20;\n\n\t\tthis.menuContainer = document.getElementById(\"menu-items-block\");\n\n\t\tif (!this.menuContainer)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.templateHeaderHeight = null;\n\t\tthis.menuHeader = this.menuContainer.querySelector(\".menu-items-header\");\n\t\tthis.menuBody = this.menuContainer.querySelector(\".menu-items-body\");\n\t\tthis.menuMoreButton = this.menuContainer.querySelector(\".menu-favorites-more-btn\");\n\t\tthis.menuItemsBlock = this.menuContainer.querySelector(\".menu-items\");\n\n\t\tthis.inviteEmployeesBox = this.menuContainer.querySelector(\".menu-invite-employees\");\n\t\tthis.licenseBox = this.menuContainer.querySelector(\".menu-license-all-container\");\n\n\t\tthis.settingsBox = this.menuContainer.querySelector(\".menu-settings-btn\");\n\t\tthis.settingsIconBox = this.settingsBox.querySelector(\".menu-settings-icon-box\");\n\t\tthis.settingsBtnText = this.settingsBox.querySelector(\".menu-settings-btn-text\");\n\t\tthis.settingsSaveBtn = this.menuContainer.querySelector(\".menu-settings-save-btn\");\n\n\t\tthis.timeout = {};\n\n\t\tthis.highlight(document.location.pathname + document.location.search);\n\t\tthis.makeTextIcons();\n\n\t\tthis.handleMenuItemMouseEnter = this.handleMenuItemMouseEnter.bind(this);\n\t\tthis.handleMenuItemMouseClick = this.handleMenuItemMouseClick.bind(this);\n\n\t\tthis.templateHeaderHeight = null;\n\n\t\tthis.fixedAdminPanelHeight = 0;\n\t\tthis.adminPanel = BX(\"bx-panel\");\n\t\tthis.adminPanelHeight = null;\n\n\t\tif (this.adminPanel)\n\t\t{\n\t\t\tvar adminPanelState = BX.getClass(\"BX.admin.panel.state\");\n\t\t\tif (adminPanelState && adminPanelState.fixed)\n\t\t\t{\n\t\t\t\tthis.fixedAdminPanelHeight = this.getAdminPanelHeight();\n\t\t\t}\n\n\t\t\tBX.addCustomEvent(\"onTopPanelCollapse\", this.handleAdminPanelCollapse.bind(this));\n\t\t\tBX.addCustomEvent(\"onTopPanelFix\", this.handleAdminPanelFix.bind(this));\n\n\t\t\tthis.adjustAdminPanel();\n\t\t}\n\n\t\tdocument.addEventListener(\"scroll\", this.handleDocumentScroll.bind(this));\n\n\t\tthis.slidingModeTimeoutId = null;\n\t\tBX.bind(this.menuContainer, \"dblclick\", this.handleMenuDoubleClick.bind(this));\n\t\tBX.bind(this.menuContainer, \"mouseenter\", this.handleMenuMouseEnter.bind(this));\n\t\tBX.bind(this.menuContainer, \"mouseleave\", this.handleMenuMouseLeave.bind(this));\n\t\tBX.bind(this.menuContainer, \"transitionend\", this.handleSlidingTransitionEnd.bind(this));\n\n\t\tthis.isMenuMouseEnterBlocked = false;\n\t\tthis.isMenuMouseLeaveBlocked = false;\n\n\t\tthis.mainTable = document.querySelector(\".bx-layout-table\");\n\n\t\tthis.header = document.querySelector(\"#header\");\n\t\tthis.headerBurger = this.header.querySelector(\".menu-switcher\");\n\t\tthis.headerLogo = this.header.querySelector(\".logo\");\n\t\tthis.headerLogoBlock = this.header.querySelector(\".header-logo-block\");\n\t\tthis.headerSettings = this.header.querySelector(\".header-logo-block-settings\");\n\n\t\tthis.menuHeaderLogo = this.menuHeader.querySelector(\".logo\");\n\t\tthis.menuHeaderBurger = this.menuHeader.querySelector(\".menu-switcher\");\n\t\tthis.menuHeaderTitle = this.menuHeader.querySelector(\".menu-items-header-title\");\n\n\t\tif (this.headerSettings)\n\t\t{\n\t\t\tBX.bind(this.headerLogoBlock, \"mouseenter\", this.handleHeaderLogoMouserEnter.bind(this));\n\t\t\tBX.bind(this.headerLogoBlock, \"mouseleave\", this.handleHeaderLogoMouserLeave.bind(this));\n\t\t\tBX.bind(this.menuHeader, \"mouseenter\", this.handleHeaderLogoMouserEnter.bind(this));\n\t\t\tBX.bind(this.menuHeader, \"mouseleave\", this.handleHeaderLogoMouserLeave.bind(this));\n\t\t}\n\n\t\tBX.bind(this.menuHeaderBurger, \"click\", this.handleBurgerClick.bind(this));\n\t\tBX.bind(this.menuHeaderTitle, \"click\", this.handleBurgerClick.bind(this, true));\n\n\t\tthis.siteMapItem = this.menuContainer.querySelector(\".menu-sitemap-btn\");\n\t\tif (this.siteMapItem)\n\t\t{\n\t\t\tBX.bind(this.siteMapItem, \"click\", this.handleSiteMapClick.bind(this));\n\t\t\tBX.bind(this.siteMapItem, \"click\", this.handleMenuItemMouseClick);\n\t\t\tBX.bind(this.siteMapItem, \"mouseenter\", this.handleMenuItemMouseEnter);\n\t\t}\n\n\t\tthis.upButton = this.menuContainer.querySelector(\".menu-btn-arrow-up\");\n\t\tBX.bind(this.upButton, \"click\", this.handleUpButtonClick.bind(this));\n\t\tBX.bind(this.upButton, \"mouseenter\", this.handleUpButtonMouseEnter.bind(this));\n\t\tBX.bind(this.upButton, \"mouseleave\", this.handleUpButtonMouseLeave.bind(this));\n\n\t\tBX.bind(BX(\"left-menu-hidden-separator\"), \"click\", BX.proxy(this.showHideMoreItems, this));\n\t\tBX.bind(this.menuMoreButton, \"click\", BX.proxy(this.showHideMoreItems, this));\n\n\n\t\tBX.bind(this.settingsBox, \"mouseenter\", this.handleMenuItemMouseEnter);\n\t\tBX.bind(this.settingsBox, \"click\", this.showSettingsPopup.bind(this));\n\t\tBX.bind(this.settingsBox, \"click\", this.handleMenuItemMouseClick);\n\t\tBX.bind(this.settingsSaveBtn, \"click\", function() {\n\t\t\tthis.applyEditMode();\n\t\t}.bind(this));\n\n\t\tif (this.inviteEmployeesBox)\n\t\t{\n\t\t\tBX.bind(this.inviteEmployeesBox, \"mouseenter\", this.handleMenuItemMouseEnter);\n\t\t}\n\n\t\tif (this.licenseBox)\n\t\t{\n\t\t\tBX.bind(this.licenseBox, \"mouseenter\", this.handleMenuItemMouseEnter);\n\t\t}\n\n\t\t//drag&drop\n\t\tjsDD.Enable();\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\tvar items = this.menuItemsBlock.getElementsByClassName(\"menu-item-block\");\n\t\t\tfor (var i = 0; i < items.length; i++)\n\t\t\t{\n\t\t\t\titems[i].onbxdragstart = BX.proxy(this.menuItemDragStart, this);\n\t\t\t\titems[i].onbxdrag = BX.proxy(this.menuItemDragMove, this);\n\t\t\t\titems[i].onbxdragstop = BX.proxy(this.menuItemDragStop, this);\n\t\t\t\titems[i].onbxdraghover = BX.proxy(this.menuItemDragHover, this);\n\t\t\t\tjsDD.registerDest(items[i], 100);\n\t\t\t\tjsDD.registerObject(items[i]);\n\n\t\t\t\tBX.bind(items[i], \"mouseenter\", this.handleMenuItemMouseEnter);\n\t\t\t\tBX.bind(items[i], \"click\", this.handleMenuItemMouseClick);\n\t\t\t}\n\t\t}\n\n\t\tthis.selfItemObj = new SelfItem(this);\n\t\tthis.standartItemObj = new StandartItem(this);\n\t\tthis.allItemObj = new AllItem(this);\n\t\tthis.presetObj = new Preset(this);\n\t\tthis.countersObj = new Counters(this, {\n\t\t\tallCounters: params.allCounters,\n\t\t\thiddenCounters: params.hiddenCounters,\n\t\t});\n\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onOpen\", this.handleGroupPanelOpen.bind(this));\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onClose\", this.handleGroupPanelClose.bind(this));\n\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onFirstItemChange\", BX.proxy(function (firstPageLink, firstNode)\n\t\t{\n\t\t\tthis.onTopMenuFirstItemChange(firstPageLink, firstNode);\n\t\t}, this));\n\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onHideLastVisibleItem\", BX.proxy(function (bindElement)\n\t\t{\n\t\t\tthis.showMessage(bindElement, BX.message(\"MENU_TOP_ITEM_LAST_HIDDEN\"));\n\t\t}, this));\n\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onBeforeCreateEditMenu\", function (contextMenu, dataItem, topMenu)\n\t\t{\n\t\t\tvar isItemInLeftMenu = BX.type.isDomNode(BX(\"bx_left_menu_\" + dataItem.DATA_ID));\n\t\t\tcontextMenu.addMenuItem({\n\t\t\t\ttext: BX.message(isItemInLeftMenu ? \"MENU_DELETE_FROM_LEFT_MENU\" : \"MENU_ADD_TO_LEFT_MENU\"),\n\t\t\t\tonclick: function (event, item)\n\t\t\t\t{\n\t\t\t\t\tvar itemInfo = {\n\t\t\t\t\t\tid: dataItem.DATA_ID,\n\t\t\t\t\t\ttext: BX.util.htmlspecialcharsback(dataItem.TEXT),\n\t\t\t\t\t\tsubLink: dataItem.SUB_LINK,\n\t\t\t\t\t\tcounterId: dataItem.COUNTER_ID,\n\t\t\t\t\t\tcounterValue: dataItem.COUNTER\n\t\t\t\t\t};\n\n\t\t\t\t\tvar link = document.createElement(\"a\");\n\t\t\t\t\tlink.href = dataItem.URL;\n\t\t\t\t\titemInfo.link = BX.util.htmlspecialcharsback(link.pathname + link.search);\n\n\t\t\t\t\t//IE11 omits slash in the pathname\n\t\t\t\t\titemInfo.link = itemInfo.link[0] !== \"/\" ? \"/\" + itemInfo.link : itemInfo.link;\n\n\t\t\t\t\tif (isItemInLeftMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.standartItemObj.deleteStandardItem({\n\t\t\t\t\t\t\titemId: dataItem.DATA_ID,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tvar startX = \"\",\n\t\t\t\t\t\t\tstartY = \"\";\n\n\t\t\t\t\t\tif (BX.type.isDomNode(dataItem.NODE))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar menuNodeCoord = dataItem.NODE.getBoundingClientRect();\n\t\t\t\t\t\t\tstartX = menuNodeCoord.left;\n\t\t\t\t\t\t\tstartY = menuNodeCoord.top;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.standartItemObj.addStandardItem({\n\t\t\t\t\t\t\titemInfo: itemInfo,\n\t\t\t\t\t\t\tstartX: startX,\n\t\t\t\t\t\t\tstartY: startY,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tBX.PopupMenu.destroy(contextMenu.id);\n\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}.bind(this));\n\n\t\ttop.BX.addCustomEvent('UI.Toolbar:onRequestMenuItemData', function(params) {\n\t\t\tthis.onRequestMenuItemData(params);\n\t\t}.bind(this));\n\n\t\tBX.addCustomEvent('UI.Toolbar:onStarClick', function(params) {\n\t\t\tthis.onToolbarStarClick(params);\n\t\t}.bind(this));\n\n\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onBeforeResetMenu\", function (promises) {\n\t\t\tpromises.push(function ()\n\t\t\t{\n\t\t\t\tvar p = new BX.Promise();\n\n\t\t\t\tBX.ajax.runAction('intranet.leftmenu.clearCache', {\n\t\t\t\t\tdata: {},\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tp.fulfill();\n\t\t\t\t}, (response) => {\n\t\t\t\t\tp.reject(\"Error: \" +  response.errors[0].message);\n\t\t\t\t});\n\n\t\t\t\treturn p;\n\t\t\t}.bind(this));\n\t\t}.bind(this));\n\n\t\tif (this.showPresetPopup)\n\t\t{\n\t\t\tthis.presetObj.showPresetPopupFunction(\"global\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(this.showImportConfiguration)\n\t\t\t{\n\t\t\t\tthis.showImportConfigurationSlider();\n\t\t\t}\n\t\t}\n\n\t\tthis.menuSelectedNode = BX.findChild(this.menuContainer, {className: \"menu-item-active\"}, true, false);\n\t\tif (BX.type.isDomNode(this.menuSelectedNode))\n\t\t{\n\t\t\tvar leftMenuSelectedUrl = this.menuSelectedNode.getAttribute(\"data-link\");\n\t\t}\n\n\t\tvar currentPath = document.location.pathname;\n\t\tvar currentFullPath = document.location.pathname + document.location.search;\n\n\t\tif (leftMenuSelectedUrl === currentPath || leftMenuSelectedUrl === currentFullPath)\n\t\t{\n\t\t\tthis.isCurrentPageInLeftMenu = true;\n\t\t}\n\n\t\t//Emulate document scroll because init() can be invoked after page load scroll (a hard reload with script at the bottom).\n\t\tthis.handleDocumentScroll();\n\n\t\treturn true;\n\t}\n\n\tisEditMode()\n\t{\n\t\treturn BX.hasClass(this.menuContainer, 'menu-favorites-editable');\n\t}\n\n\tisCollapsed()\n\t{\n\t\treturn this.isCollapsedMode;\n\t}\n\n\tswitchToEditMode()\n\t{\n\t\tif (this.isEditMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.toggle(true);\n\n\t\tBX.addClass(this.menuContainer, \"menu-favorites-editable\");\n\n\t\tvar activeItems = this.menuContainer.querySelectorAll(\".menu-item-active\");\n\t\tfor (var i = 0; i < activeItems.length; i++)\n\t\t{\n\t\t\tBX.removeClass(activeItems[i], \"menu-item-active\");\n\t\t\tthis.activeItemsId.push(activeItems[i].id);\n\t\t}\n\t}\n\n\tapplyEditMode()\n\t{\n\t\tif (!this.isEditMode())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.removeClass(this.menuContainer, \"menu-favorites-editable\");\n\n\t\tfor (var key in this.activeItemsId)\n\t\t{\n\t\t\tBX.addClass(BX(this.activeItemsId[key]), \"menu-item-active\");\n\t\t}\n\n\t\tthis.activeItemsId = [];\n\t}\n\n\tareMoreItemsShowed()\n\t{\n\t\treturn BX.hasClass(BX('left-menu-hidden-items-block'), 'menu-item-favorites-more-open') ? true : false;\n\t}\n\n\tanimateShowingHiddenItems()\n\t{\n\t\tvar hiddenBlock = BX(\"left-menu-hidden-items-block\");\n\n\t\tif (!BX.hasClass(hiddenBlock, \"menu-item-favorites-more-open\"))\n\t\t{\n\t\t\thiddenBlock.style.height = \"0px\";\n\t\t\thiddenBlock.style.opacity = 0;\n\t\t\tanimation(true, hiddenBlock, hiddenBlock.scrollHeight);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tanimation(false, hiddenBlock, hiddenBlock.offsetHeight);\n\t\t}\n\n\t\tfunction animation(opening, hiddenBlock, maxHeight)\n\t\t{\n\t\t\thiddenBlock.style.overflow = \"hidden\";\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 200,\n\t\t\t\tstart: {opacity: opening ? 0 : 100, height: opening ? 0 : maxHeight},\n\t\t\t\tfinish: {opacity: opening ? 100 : 0, height: opening ? maxHeight : 0},\n\t\t\t\ttransition: BX.easing.transitions.linear,\n\t\t\t\tstep: function (state)\n\t\t\t\t{\n\t\t\t\t\thiddenBlock.style.opacity = state.opacity / 100;\n\t\t\t\t\thiddenBlock.style.height = state.height + \"px\";\n\n\t\t\t\t},\n\t\t\t\tcomplete: function ()\n\t\t\t\t{\n\t\t\t\t\tBX.toggleClass(BX('left-menu-hidden-items-block'), 'menu-item-favorites-more-open');\n\t\t\t\t\thiddenBlock.style.overflow = \"\";\n\t\t\t\t\thiddenBlock.style.height = \"\";\n\t\t\t\t}\n\n\t\t\t})).animate();\n\t\t}\n\t}\n\n\tshowHideMoreItems(animate)\n\t{\n\t\tif (this.isEditMode())\n\t\t\treturn;\n\n\t\tif (animate !== false)\n\t\t{\n\t\t\tthis.animateShowingHiddenItems();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.toggleClass(BX('left-menu-hidden-items-block'), 'menu-item-favorites-more-open');\n\t\t}\n\n\t\tBX.toggleClass(this.menuMoreButton, 'menu-favorites-more-btn-open');\n\n\t\tvar moreBtnText = BX(\"menu-more-btn-text\");\n\t\tif (moreBtnText)\n\t\t{\n\t\t\tif (moreBtnText.innerHTML === BX.message(\"more_items_hide\"))\n\t\t\t{\n\t\t\t\tmoreBtnText.innerHTML =  BX.message(\"more_items_show\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmoreBtnText.innerHTML = BX.message(\"more_items_hide\");\n\t\t\t}\n\t\t}\n\t}\n\n\topenMenuPopup(bindElement, menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tvar contextMenuItems = [];\n\t\tvar itemDeletePerm = itemNode.getAttribute(\"data-delete-perm\");\n\t\tvar itemType = itemNode.getAttribute(\"data-type\");\n\n\t\t//hide item\n\t\tif (itemNode.getAttribute(\"data-status\") === \"show\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"hide_item\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\t\t\t\t\tthis.hideItem(menuItemId);\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t}\n\n\t\t//show item\n\t\tif (itemNode.getAttribute(\"data-status\") === \"hide\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"show_item\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\t\t\t\t\tthis.showItem(menuItemId);\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t}\n\n\t\t//set main page\n\t\tif (!this.isExtranet && itemType !== \"self\" && BX.previousSibling(itemNode).id != \"left-menu-empty-item\" && this.isPublicConverted)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_SET_MAIN_PAGE\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\t\t\t\t\tthis.setMainPage(menuItemId);\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t}\n\n\t\tif (itemType === \"self\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_DELETE_SELF_ITEM\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\n\t\t\t\t\tthis.showConfirmWindow({\n\t\t\t\t\t\tid: \"left-menu-delete-self-item\",\n\t\t\t\t\t\ttitleBar: BX.message(\"MENU_DELETE_SELF_ITEM\"),\n\t\t\t\t\t\tokButtonText: BX.message(\"MENU_DELETE\"),\n\t\t\t\t\t\tcontent: BX.message(\"MENU_DELETE_SELF_ITEM_CONFIRM\"),\n\t\t\t\t\t\tonsuccess: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.selfItemObj.deleteSelfItem(menuItemId);\n\t\t\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t\t\t}, this),\n\t\t\t\t\t\tonfailure: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t});\n\n\t\t\t\t}, this)\n\t\t\t});\n\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_EDIT_ITEM\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\t\t\t\t\tvar linkNode = BX.findChild(itemNode, {tagName: \"a\"}, true, false);\n\n\t\t\t\t\tvar itemInfo = {\n\t\t\t\t\t\tid: menuItemId,\n\t\t\t\t\t\ttext: itemNode.querySelector(\"[data-role='item-text']\").innerText,\n\t\t\t\t\t\tlink: itemNode.getAttribute(\"data-link\"),\n\t\t\t\t\t\topenInNewPage: linkNode.getAttribute(\"target\") == \"_blank\"\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.selfItemObj.showSelfItemPopup(bindElement, itemInfo);\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t}\n\n\t\tif (itemType === \"standard\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_RENAME_ITEM\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar itemInfo = {\n\t\t\t\t\t\tid: menuItemId,\n\t\t\t\t\t\ttext: itemNode.querySelector(\"[data-role='item-text']\").innerText\n\t\t\t\t\t};\n\t\t\t\t\tthis.standartItemObj.showStandardEditItemPopup(bindElement, itemInfo);\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_REMOVE_STANDARD_ITEM\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tvar currentContext = BX.proxy_context;\n\t\t\t\t\tcurrentContext.popupWindow.close();\n\t\t\t\t\tthis.standartItemObj.deleteStandardItem({\n\t\t\t\t\t\titemId: menuItemId,\n\t\t\t\t\t});\n\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t}, this)\n\t\t\t});\n\t\t}\n\n\t\tif (this.isAdmin)\n\t\t{\n\t\t\t//add to favorite all\n\t\t\tif (itemDeletePerm === \"Y\")\n\t\t\t{\n\t\t\t\tcontextMenuItems.push({\n\t\t\t\t\ttext: BX.message(\"MENU_ADD_ITEM_TO_ALL\"),\n\t\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.allItemObj.addItemToAll(menuItemId);\n\t\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t\t}, this)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t//delete from favorite all\n\t\t\tif (itemDeletePerm === \"A\")\n\t\t\t{\n\t\t\t\tif (itemType === \"custom\")\n\t\t\t\t{\n\t\t\t\t\tcontextMenuItems.push({\n\t\t\t\t\t\ttext: BX.message(\"MENU_DELETE_CUSTOM_ITEM_FROM_ALL\"),\n\t\t\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.allItemObj.deleteCustomItemFromAll(menuItemId);\n\t\t\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcontextMenuItems.push({\n\t\t\t\t\t\ttext: BX.message(\"MENU_DELETE_ITEM_FROM_ALL\"),\n\t\t\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.allItemObj.deleteItemFromAll(menuItemId);\n\t\t\t\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set rights for apps\n\t\t\t//if (itemNode.getAttribute(\"data-app-id\"))\n\t\t\t//\tcontextMenuItems.push({text : BX.message(\"set_rights\"), className : \"menu-popup-no-icon\", onclick : function() {this.popupWindow.close(); self.setRights(menuItemId); BX.PopupMenu.destroy(\"popup_\"+menuItemId);}});\n\t\t}\n\n\t\tcontextMenuItems.push({\n\t\t\ttext: this.isEditMode() ? BX.message(\"MENU_EDIT_READY_FULL\") : BX.message(\"MENU_SETTINGS_MODE\"),\n\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\tonclick: BX.proxy(function ()\n\t\t\t{\n\t\t\t\tBX.PopupMenu.destroy(\"popup_\" + menuItemId);\n\t\t\t\tthis.isEditMode() ? this.applyEditMode() : this.switchToEditMode();\n\t\t\t}, this)\n\t\t});\n\n\t\tBX.PopupMenu.show({\n\t\t\tid: \"popup_\" + menuItemId,\n\t\t\tbindElement: bindElement,\n\t\t\titems: contextMenuItems,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 12,\n\t\t\tangle: true,\n\t\t\tevents: {\n\t\t\t\tonPopupShow: function() {\n\t\t\t\t\tthis.isMenuMouseLeaveBlocked = true;\n\t\t\t\t\tBX.addClass(itemNode, \"menu-item-block-hover\");\n\t\t\t\t}.bind(this),\n\n\t\t\t\tonPopupClose: function() {\n\t\t\t\t\tthis.isMenuMouseLeaveBlocked = false;\n\t\t\t\t\tBX.removeClass(itemNode, \"menu-item-block-hover\");\n\t\t\t\t}.bind(this),\n\n\t\t\t\tonPopupDestroy: function() {\n\t\t\t\t\tthis.isMenuMouseLeaveBlocked = false;\n\t\t\t\t\tBX.removeClass(itemNode, \"menu-item-block-hover\");\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t});\n\t}\n\n\tshowSettingsPopup(event)\n\t{\n\t\tvar menuId = \"leftMenuSettingsPopup\";\n\t\tif (BX.PopupMenu.getMenuById(menuId))\n\t\t{\n\t\t\tBX.PopupMenu.destroy(menuId);\n\t\t\treturn;\n\t\t}\n\n\t\tvar self = this;\n\n\t\tvar itemType = \"default\";\n\t\tif (BX.type.isDomNode(this.menuSelectedNode))\n\t\t{\n\t\t\titemType = this.menuSelectedNode.getAttribute(\"data-type\");\n\t\t}\n\n\t\tif (this.isCurrentPageInLeftMenu && itemType === \"default\")\n\t\t{\n\t\t\titemPageToLeftMenu = {\n\t\t\t\ttext: BX.message(this.isCurrentPageInLeftMenu ? \"MENU_DELETE_PAGE_FROM_LEFT_MENU\" : \"MENU_ADD_PAGE_TO_LEFT_MENU\"),\n\t\t\t\tclassName: \"menu-popup-no-icon menu-popup-disable-text\"\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar itemPageToLeftMenu = {\n\t\t\t\ttext: BX.message(this.isCurrentPageInLeftMenu ? \"MENU_DELETE_PAGE_FROM_LEFT_MENU\" : \"MENU_ADD_PAGE_TO_LEFT_MENU\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tBX.proxy_context.popupWindow.close();\n\t\t\t\t\tif (this.isCurrentPageInLeftMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.standartItemObj.deleteStandardItem({});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.standartItemObj.addStandardItem({});\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t};\n\t\t}\n\n\t\tvar menuItems = [\n\t\t\t{\n\t\t\t\ttext: BX.message(\"SORT_ITEMS\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: function ()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tself.switchToEditMode();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: this.isCollapsedMode ? BX.message(\"MENU_EXPAND\") : BX.message(\"MENU_COLLAPSE\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tBX.proxy_context.popupWindow.close();\n\t\t\t\t\tthis.toggle();\n\t\t\t\t}, this)\n\t\t\t},\n\t\t\titemPageToLeftMenu,\n\t\t\t{\n\t\t\t\ttext: BX.message(\"MENU_ADD_SELF_PAGE\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tBX.proxy_context.popupWindow.close();\n\t\t\t\t\tthis.selfItemObj.showSelfItemPopup(this.settingsBox);\n\t\t\t\t}, this)\n\t\t\t}\n\t\t];\n\n\t\tif (!this.isExtranet)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: BX.message(\"MENU_SET_DEFAULT2\"),\n\t\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\t\tonclick: function ()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tself.setDefaultMenu(true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tmenuItems.push({\n\t\t\ttext: BX.message(\"MENU_SET_DEFAULT\"),\n\t\t\tclassName: \"menu-popup-no-icon\",\n\t\t\tonclick: function ()\n\t\t\t{\n\t\t\t\tthis.popupWindow.close();\n\t\t\t\tself.setDefaultMenu();\n\t\t\t}\n\t\t});\n\n\t\t//custom preset\n\t\tif (this.isAdmin)\n\t\t{\n\t\t\tvar itemText = BX.message(\"MENU_SAVE_CUSTOM_PRESET\");\n\t\t\tvar showLock = !this.isCustomPresetAvailable;\n\n\t\t\tif (showLock)\n\t\t\t{\n\t\t\t\titemText+= \"<span class='menu-lock-icon'></span>\";\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\thtml: itemText,\n\t\t\t\tclassName: \"menu-popup-no-icon\" + (showLock ? ' menu-popup-disable-text' : ''),\n\t\t\t\tonclick: function ()\n\t\t\t\t{\n\t\t\t\t\tthis.popupWindow.close();\n\t\t\t\t\tif (showLock)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_office_menu_to_all');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tself.presetObj.showCustomPresetPopup();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tBX.PopupMenu.show(menuId, this.settingsBox, menuItems,\n\t\t\t{\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 50,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: function() {\n\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked = true;\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tonPopupClose: function() {\n\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked = false;\n\t\t\t\t\t\tthis.switchToSlidingMode(false);\n\t\t\t\t\t\tBX.PopupMenu.destroy(menuId);\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\tonPopupDestroy: function() {\n\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked = false;\n\t\t\t\t\t\tthis.switchToSlidingMode(false);\n\t\t\t\t\t}.bind(this),\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tshowMessage(bindElement, message, position)\n\t{\n\t\tvar popup = BX.PopupWindowManager.create(\"left-menu-message\", bindElement, {\n\t\t\tcontent: '<div class=\"left-menu-message-popup\">' + message + '</div>',\n\t\t\tdarkMode: true,\n\t\t\toffsetTop: position === \"right\" ? -45 : 2,\n\t\t\toffsetLeft: position === \"right\" ? 215 : 0,\n\t\t\tangle: position === \"right\" ? {position: \"left\"} : true,\n\t\t\tevents: {\n\t\t\t\tonPopupClose: function ()\n\t\t\t\t{\n\t\t\t\t\tif (popup)\n\t\t\t\t\t{\n\t\t\t\t\t\tpopup.destroy();\n\t\t\t\t\t\tpopup = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tautoHide: true\n\t\t});\n\n\t\tpopup.show();\n\n\t\tsetTimeout(function ()\n\t\t{\n\t\t\tif (popup)\n\t\t\t{\n\t\t\t\tpopup.destroy();\n\t\t\t\tpopup = null;\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\tshowError(bindElement)\n\t{\n\t\tthis.showMessage(bindElement, BX.message('edit_error'));\n\t}\n\n\t/*setRights =  function(menuItemId)\n\t {\n\t BX.rest.Marketplace.setRights(BX(menuItemId).getAttribute(\"data-app-id\"), this.siteId);\n\t };*/\n\n\tonTopMenuFirstItemChange(firstPageLink, firstNode)\n\t{\n\t\tif (!firstPageLink)\n\t\t\treturn;\n\n\t\tvar topMenuId = firstNode.getAttribute(\"data-top-menu-id\");\n\t\tvar leftMenuNode = this.menuItemsBlock.querySelector(\"[data-top-menu-id='\" + topMenuId + \"']\");\n\t\tif (BX.type.isDomNode(leftMenuNode))\n\t\t{\n\t\t\tleftMenuNode.setAttribute(\"data-link\", firstPageLink);\n\n\t\t\tvar leftMenuLink = BX.findChild(leftMenuNode, {tagName: \"a\", className: \"menu-item-link\"}, true, false);\n\t\t\tif (leftMenuLink)\n\t\t\t{\n\t\t\t\tleftMenuLink.setAttribute(\"href\", firstPageLink);\n\t\t\t}\n\t\t}\n\n\t\tif (BX.type.isDomNode(firstNode))\n\t\t{\n\t\t\tthis.showMessage(firstNode, BX.message(\"MENU_ITEM_MAIN_SECTION_PAGE\"));\n\t\t}\n\n\t\tif (BX.type.isDomNode(leftMenuNode) && BX.previousSibling(leftMenuNode) === BX(\"left-menu-empty-item\"))\n\t\t{\n\t\t\tBX.ajax.runAction('intranet.leftmenu.setFirstPage', {\n\t\t\t\tdata: {\n\t\t\t\t\tfirstPageUrl: firstPageLink\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.ajax.runAction('intranet.leftmenu.clearCache', {\n\t\t\t\tdata: {},\n\t\t\t});\n\t\t}\n\t}\n\n\trefineUrl(url)\n\t{\n\t\turl = BX.util.trim(url);\n\t\tif (!BX.type.isNotEmptyString(url))\n\t\t{\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (!url.match(/^https?:\\/\\//i) && !url.match(/^\\//i))\n\t\t{\n\t\t\t//for external links like \"google.com\" (without a protocol)\n\t\t\turl = \"http://\" + url;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar link = document.createElement(\"a\");\n\t\t\tlink.href = url;\n\n\t\t\tif (document.location.host === link.host)\n\t\t\t{\n\t\t\t\t// http://portal.com/path/ => /path/\n\t\t\t\turl = link.pathname + link.search + link.hash;\n\t\t\t}\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tupdateCounters(counters, send)\n\t{\n\t\tthis.countersObj.updateCounters(counters, send);\n\t}\n\n\tdecrementCounter(node, iDecrement)\n\t{\n\t\tthis.countersObj.decrementCounter(node, iDecrement);\n\t}\n\n\tcheckMoreButton(status)\n\t{\n\t\tvar btn = this.menuMoreButton;\n\t\tif (status === true || status === false)\n\t\t{\n\t\t\tif (status)\n\t\t\t{\n\t\t\t\tBX.removeClass(btn, \"menu-favorites-more-btn-hidden\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.addClass(btn, \"menu-favorites-more-btn-hidden\");\n\t\t\t}\n\n\t\t\treturn status;\n\t\t}\n\n\t\tvar hiddenItems = BX(\"left-menu-hidden-items-list\").getElementsByClassName(\"menu-item-block\");\n\t\tif (hiddenItems.length > 0)\n\t\t{\n\t\t\tBX.removeClass(btn, \"menu-favorites-more-btn-hidden\");\n\t\t\treturn true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.addClass(btn, \"menu-favorites-more-btn-hidden\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\thideItem(menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\titemNode.setAttribute(\"data-status\", \"hide\");\n\t\tBX(\"left-menu-hidden-items-list\").appendChild(itemNode);\n\n\t\tthis.checkMoreButton(true);\n\n\t\tif (itemNode.getAttribute(\"data-counter-id\"))\n\t\t{\n\t\t\tthis.countersObj.recountHiddenCounters();\n\t\t}\n\n\t\tthis.saveItemsSort({\n\t\t\tanalyticsLabel: 'hideItem',\n\t\t\titemId: menuItemId\n\t\t});\n\t}\n\n\tshowItem(menuItemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + menuItemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\titemNode.setAttribute(\"data-status\", \"show\");\n\t\t\tthis.menuItemsBlock.insertBefore(itemNode, BX(\"left-menu-hidden-items-block\"));\n\t\t}\n\n\t\tthis.checkMoreButton();\n\n\t\tif (itemNode.getAttribute(\"data-counter-id\"))\n\t\t{\n\t\t\tthis.countersObj.recountHiddenCounters();\n\t\t}\n\n\t\tthis.saveItemsSort({\n\t\t\tanalyticsLabel: 'showItem',\n\t\t\titemId: menuItemId\n\t\t});\n\t}\n\n\tsaveItemsSort(analyticsLabel)\n\t{\n\t\tvar showMenuItems = [],\n\t\t\thideMenuItems = [],\n\t\t\tfirstItemLink = \"\";\n\n\t\tvar items = BX.findChildren(this.menuContainer, {className: \"menu-item-block\"}, true);\n\n\t\tfor (var i = 0; i < items.length; i++)\n\t\t{\n\t\t\tif (i === 0)\n\t\t\t{\n\t\t\t\tfirstItemLink = items[i].getAttribute(\"data-link\");\n\t\t\t}\n\n\t\t\tif (items[i].getAttribute(\"data-status\") === \"show\")\n\t\t\t{\n\t\t\t\tshowMenuItems.push(items[i].getAttribute(\"data-id\"));\n\t\t\t}\n\t\t\telse if (items[i].getAttribute(\"data-status\") === \"hide\")\n\t\t\t{\n\t\t\t\thideMenuItems.push(items[i].getAttribute(\"data-id\"));\n\t\t\t}\n\t\t}\n\n\t\tvar menuItems = {\"show\": showMenuItems, \"hide\": hideMenuItems};\n\n\t\tBX.ajax.runAction('intranet.leftmenu.saveItemsSort', {\n\t\t\tdata: {\n\t\t\t\titems: menuItems,\n\t\t\t\tfirstItemLink: firstItemLink\n\t\t\t},\n\t\t\tanalyticsLabel: analyticsLabel\n\t\t});\n\t}\n\n\tshowItemWarning(options)\n\t{\n\t\tif (!this.itemWarningObj)\n\t\t{\n\t\t\tthis.itemWarningObj = new ItemWarning(this);\n\t\t}\n\n\t\tthis.itemWarningObj.showItemWarning(options);\n\t}\n\n\tremoveItemWarning(itemId)\n\t{\n\t\tif (!this.itemWarningObj)\n\t\t{\n\t\t\tthis.itemWarningObj = new ItemWarning(this);\n\t\t}\n\n\t\tthis.itemWarningObj.removeItemWarning(itemId);\n\t}\n\n\tgenerateItemHtml(itemParams)\n\t{\n\t\tif (!(typeof itemParams == \"object\" && itemParams))\n\t\t\treturn;\n\n\t\tvar itemChildren = [\n\t\t\tBX.create(\"span\", {\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"menu-item-icon-box\",\n\t\t\t\t},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\tclassName: \"menu-item-icon\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttext: this.getShortName(itemParams.text)\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t}),\n\t\t\tBX.create(\"span\", {\n\t\t\t\ttext: itemParams.text,\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"menu-item-link-text\",\n\t\t\t\t\t\"data-role\": \"item-text\"\n\t\t\t\t}\n\t\t\t})\n\t\t];\n\n\t\tvar isCounterExisted = BX.type.isNotEmptyString(itemParams.counterId);\n\t\tif (isCounterExisted)\n\t\t{\n\t\t\titemChildren.push(BX.create(\"span\", {\n\t\t\t\tattrs: {className: \"menu-item-index-wrap\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\tclassName: \"menu-item-index\",\n\t\t\t\t\t\t\tid: \"menu-counter-\" + itemParams.counterId\n\t\t\t\t\t\t},\n\t\t\t\t\t\thtml: itemParams.counterValue\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t}));\n\t\t}\n\n\t\tvar self = this;\n\t\tconst anchorAttributes = {\n\t\t\thref: itemParams.link,\n\t\t\tclassName: \"menu-item-link\",\n\t\t\ttarget: (itemParams.openInNewPage === \"Y\" ? \"_blank\" : \"\"),\n\t\t};\n\t\tif (itemParams.link.indexOf(BX.message('SITE_DIR') + 'workgroups/group/') === 0)\n\t\t{\n\t\t\tanchorAttributes[\"data-slider-ignore-autobinding\"] = true;\n\t\t}\n\t\tvar newItemNode = BX.create(\"li\", {\n\t\t\tattrs: {\n\t\t\t\tclassName: \"menu-item-block menu-item-no-icon-state \"\n\t\t\t\t\t\t\t+ (isCounterExisted && itemParams.counterValue ? \" menu-item-with-index\" : \"\"),\n\t\t\t\tid: \"bx_left_menu_\" + itemParams.id,\n\t\t\t\t\"data-type\": itemParams.type === \"standard\" ? \"standard\" : \"self\",\n\t\t\t\t\"data-delete-perm\": \"Y\",\n\t\t\t\t\"data-id\": itemParams.id,\n\t\t\t\t\"data-link\": itemParams.link,\n\t\t\t\t\"data-status\": \"show\",\n\t\t\t\t\"data-new-page\" : itemParams.openInNewPage === \"Y\" ? \"Y\" : \"N\"\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\tattrs: {className: \"menu-fav-editable-btn menu-favorites-btn\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\t\t\tattrs: {className: \"menu-favorites-btn-icon\"}\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"click\": BX.proxy(function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.openMenuPopup(BX.proxy_context, itemParams.id);\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\tattrs: {className: \"menu-favorites-btn menu-favorites-draggable\"},\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\t\t\tattrs: {className: \"menu-fav-draggable-icon\"}\n\t\t\t\t\t\t})\n\t\t\t\t\t],\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"onmousedown\": function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.addClass(this.parentNode, 'menu-item-draggable');\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"onmouseup\": function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.removeClass(this.parentNode, 'menu-item-draggable');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tBX.create(\"a\", {\n\t\t\t\t\tattrs: anchorAttributes,\n\t\t\t\t\tchildren: itemChildren\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\tthis.menuItemsBlock.insertBefore(newItemNode, BX('left-menu-hidden-items-block'));\n\t\t}\n\n\t\tnewItemNode.onbxdragstart = BX.proxy(this.menuItemDragStart, this);\n\t\tnewItemNode.onbxdrag = BX.proxy(this.menuItemDragMove, this);\n\t\tnewItemNode.onbxdragstop = BX.proxy(this.menuItemDragStop, this);\n\t\tnewItemNode.onbxdraghover = BX.proxy(this.menuItemDragHover, this);\n\t\tjsDD.registerDest(newItemNode, 100);\n\t\tjsDD.registerObject(newItemNode);\n\t}\n\n\tupdateItemHtml(itemParams)\n\t{\n\t\tif (!(typeof itemParams == \"object\" && itemParams))\n\t\t\treturn;\n\n\t\tvar itemNode = BX(\"bx_left_menu_\" + itemParams.id);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tif (itemParams.link)\n\t\t{\n\t\t\titemNode.setAttribute(\"data-link\", itemParams.link);\n\t\t\tvar linkNode = BX.findChild(itemNode, {tagName: \"a\"}, true, false);\n\t\t\tif (BX.type.isDomNode(linkNode))\n\t\t\t{\n\t\t\t\tlinkNode.setAttribute(\"href\", itemParams.link);\n\t\t\t\tif (itemParams.hasOwnProperty(\"openInNewPage\"))\n\t\t\t\t{\n\t\t\t\t\tlinkNode.setAttribute(\"target\", itemParams.openInNewPage == \"Y\" ? \"_blank\" : \"\");\n\t\t\t\t\titemNode.setAttribute(\"data-new-page\", itemParams.openInNewPage == \"Y\" ? \"Y\" : \"N\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (itemParams.text)\n\t\t{\n\t\t\tvar textNode = itemNode.querySelector(\"[data-role='item-text']\");\n\t\t\tif (BX.type.isDomNode(textNode))\n\t\t\t{\n\t\t\t\ttextNode.textContent = itemParams.text;\n\t\t\t\tvar icon = itemNode.querySelector(\".menu-item-icon\");\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.textContent = this.getShortName(textNode.textContent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetMainPage(itemId)\n\t{\n\t\tvar itemNode = BX(\"bx_left_menu_\" + itemId);\n\n\t\tif (!BX.type.isDomNode(itemNode))\n\t\t\treturn;\n\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\tif (itemNode.getAttribute(\"data-status\") == \"hide\")\n\t\t\t{\n\t\t\t\titemNode.setAttribute(\"data-status\", \"show\");\n\t\t\t}\n\n\t\t\tvar startTop = itemNode.offsetTop;\n\t\t\tvar dragElement = BX.create(\"div\", {\n\t\t\t\tattrs: {className: \"menu-draggable-wrap\"},\n\t\t\t\tstyle: {top: startTop}\n\t\t\t});\n\n\t\t\tvar insertBeforeElement = itemNode.nextElementSibling;\n\t\t\tif (insertBeforeElement)\n\t\t\t{\n\t\t\t\titemNode.parentNode.insertBefore(dragElement, insertBeforeElement);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\titemNode.parentNode.appendChild(dragElement);\n\t\t\t}\n\n\t\t\tdragElement.appendChild(itemNode);\n\n\t\t\tBX.addClass(itemNode, \"menu-item-draggable\");\n\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {top: startTop},\n\t\t\t\tfinish: {top: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state)\n\t\t\t\t{\n\t\t\t\t\tdragElement.style.top = state.top + \"px\";\n\t\t\t\t},\n\t\t\t\tcomplete: BX.proxy(function ()\n\t\t\t\t{\n\t\t\t\t\tthis.menuItemsBlock.insertBefore(itemNode, BX(\"left-menu-empty-item\").nextSibling);\n\t\t\t\t\tBX.removeClass(itemNode, \"menu-item-draggable\");\n\t\t\t\t\tBX.remove(dragElement);\n\n\t\t\t\t\tthis.saveItemsSort({\n\t\t\t\t\t\tanalyticsLabel: 'mainPage',\n\t\t\t\t\t\titemId: itemId\n\t\t\t\t\t});\n\t\t\t\t}, this)\n\t\t\t})).animate();\n\t\t}\n\t}\n\n\tshowConfirmWindow(options)\n\t{\n\t\toptions = options || {};\n\t\tvar id = BX.type.isNotEmptyString(options.id) ? options.id : BX.util.getRandomString();\n\n\t\tvar popup = BX.PopupWindowManager.create(id, null, {\n\t\t\tcontent: '<div class=\"left-menu-confirm-popup\">' +\n\t\t\t(BX.type.isNotEmptyString(options.content) ? options.content : \"\") +\n\t\t\t'</div>',\n\t\t\ttitleBar: BX.type.isNotEmptyString(options.titleBar) ? options.titleBar : false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tdraggable: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\ttext: BX.type.isNotEmptyString(options.okButtonText) ?\n\t\t\t\t\t\toptions.okButtonText :\n\t\t\t\t\t\t\"OK\",\n\t\t\t\t\tclassName: \"popup-window-button-create\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\tif (BX.type.isFunction(options.onsuccess))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\toptions.onsuccess();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\n\t\t\t\toptions.alertMode !== true ?\n\t\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\t\ttext: BX.type.isNotEmptyString(options.cancelButtonText) ?\n\t\t\t\t\t\t\toptions.cancelButtonText :\n\t\t\t\t\t\t\tBX.message(\"MENU_CANCEL\"),\n\t\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (BX.type.isFunction(options.onfailure))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\toptions.onfailure();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tthis.popupWindow.destroy();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}) : null\n\t\t\t]\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\tsetDefaultMenu(showPresetPopup)\n\t{\n\t\tif (this.isExtranet || showPresetPopup !== true)\n\t\t{\n\t\t\tif (!confirm(BX.message(\"MENU_SET_DEFAULT_CONFIRM\")))\n\t\t\t\treturn;\n\n\t\t\tBX.ajax.runAction('intranet.leftmenu.setDefaultMenu', {\n\t\t\t\tdata: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t'defaultMenu': 'Y'\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tdocument.location.reload();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.presetObj.showPresetPopupFunction(\"personal\");\n\t\t}\n\t}\n\n\t/* drag&drop starting*/\n\tmenuItemDragStart()\n\t{\n\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onDragStart\");\n\t\tvar dragElement = BX.proxy_context;\n\n\t\t//drag&drop\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\tvar items = this.menuItemsBlock.getElementsByClassName(\"menu-item-block\");\n\t\t\tfor (var i = 0; i < items.length; i++) // hack for few drag&drops on page\n\t\t\t{\n\t\t\t\tjsDD.registerDest(items[i], 100);\n\t\t\t\tjsDD.registerObject(items[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (dragElement.getAttribute(\"data-type\") === \"self\")\n\t\t{\n\t\t\tjsDD.unregisterDest(BX(\"left-menu-empty-item\"));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tjsDD.registerDest(BX(\"left-menu-empty-item\"), 100);\n\t\t}\n\n\t\tjsDD.registerDest(BX(\"left-menu-hidden-empty-item\"), 100);\n\t\tjsDD.registerDest(BX(\"left-menu-hidden-separator\"), 100);\n\n\t\tif (!this.isEditMode())\n\t\t{\n\t\t\tthis.areMoreItemsShowedState = this.areMoreItemsShowed();\n\t\t\tif (!this.areMoreItemsShowedState)\n\t\t\t{\n\t\t\t\tthis.showHideMoreItems();\n\t\t\t}\n\t\t}\n\n\t\tthis.itemHeight = dragElement.offsetHeight;\n\n\t\tBX.addClass(dragElement, \"menu-item-draggable\");\n\t\tBX.addClass(this.menuContainer, \"menu-drag-mode\");\n\n\t\tthis.itemDomBlank = dragElement.parentNode.insertBefore(BX.create('div', {style: {height: '0px'}}), dragElement); //remember original item place\n\t\tthis.itemMoveBlank = BX.create('div', {style: {height: this.itemHeight + 'px'}}); //empty div\n\n\t\tthis.draggableBlock = BX.create('div', {             //div to move\n\t\t\tattrs: {className: \"menu-draggable-wrap\"},\n\t\t\tchildren: [dragElement]\n\t\t});\n\n\t\tthis.menuItemsBlockCoord = BX.pos(this.menuItemsBlock);\n\t\tthis.menuItemsBlock.style.position = 'relative';\n\t\tthis.menuItemsBlock.appendChild(this.draggableBlock);\n\t}\n\n\tmenuItemDragMove(x, y)\n\t{\n\t\ty -= this.menuItemsBlockCoord.top;\n\t\tvar menuItemsBlockHeight = this.menuItemsBlock.offsetHeight;\n\n\t\tif (y < 0)\n\t\t\ty = 0;\n\n\t\tif (y > menuItemsBlockHeight - this.itemHeight)\n\t\t\ty = menuItemsBlockHeight - this.itemHeight;\n\n\t\tthis.draggableBlock.style.top = y - 5 + 'px';\n\t}\n\n\tmenuItemDragHover(dest, x, y)\n\t{\n\t\tvar dragElement = BX.proxy_context;\n\n\t\tif (dest == dragElement)\n\t\t{\n\t\t\tthis.itemDomBlank.parentNode.insertBefore(this.itemMoveBlank, this.itemDomBlank);\n\t\t}\n\t\telse if(\n\t\t\t(\n\t\t\t\tdragElement.getAttribute(\"data-type\") == \"self\"\n\t\t\t\t|| dragElement.getAttribute(\"data-disable-first-item\") == \"Y\"\n\t\t\t)\n\t\t\t&& dest.id === \"left-menu-empty-item\"\n\t\t)\n\t\t{\n\t\t\treturn; // self-item cannot be moved on the first place\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (BX.findParent(dest, {className: \"menu-items\"}))  //li is hovered\n\t\t\t{\n\t\t\t\tif (BX.nextSibling(dest))\n\t\t\t\t\tdest.parentNode.insertBefore(this.itemMoveBlank, BX.nextSibling(dest));\n\t\t\t\telse\n\t\t\t\t\tdest.parentNode.appendChild(this.itemMoveBlank);\n\t\t\t}\n\t\t}\n\t}\n\n\tmenuItemDragStop()\n\t{\n\t\tvar dragElement = BX.proxy_context;\n\n\t\tBX.removeClass(this.menuContainer, \"menu-drag-mode\");\n\t\tBX.removeClass(dragElement, \"menu-item-draggable\");\n\n\t\tvar firstItem = BX.findChild(this.menuContainer, {className: \"menu-item-block\"}, true, false);\n\t\tif (BX.type.isDomNode(firstItem) && firstItem.getAttribute(\"data-type\") == \"self\")\n\t\t{\n\t\t\tthis.showMessage(firstItem, BX.message(\"MENU_SELF_ITEM_FIRST_ERROR\"), \"right\");\n\t\t\tthis.menuItemsBlock.replaceChild(dragElement, this.itemDomBlank);\n\t\t}\n\t\telse if (firstItem.getAttribute(\"data-disable-first-item\") == \"Y\")\n\t\t{\n\t\t\tthis.showMessage(firstItem, BX.message(\"MENU_FIRST_ITEM_ERROR\"), \"right\");\n\t\t\tthis.menuItemsBlock.replaceChild(dragElement, this.itemDomBlank);\n\t\t}\n\t\telse if (this.itemMoveBlank && BX.findParent(this.itemMoveBlank, {className: \"menu-items\"}))\n\t\t{\n\t\t\tthis.itemMoveBlank.parentNode.replaceChild(dragElement, this.itemMoveBlank);\n\n\t\t\tif (dragElement.parentNode.id == \"left-menu-hidden-items-list\")\n\t\t\t{\n\t\t\t\tif (dragElement.getAttribute(\"data-status\") == \"show\" && dragElement.getAttribute(\"data-counter-id\"))\n\t\t\t\t{\n\t\t\t\t\tthis.countersObj.recountHiddenCounters();\n\t\t\t\t}\n\n\t\t\t\tdragElement.setAttribute(\"data-status\", \"hide\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (dragElement.getAttribute(\"data-status\") == \"hide\" && dragElement.getAttribute(\"data-counter-id\"))\n\t\t\t\t{\n\t\t\t\t\tthis.countersObj.recountHiddenCounters();\n\t\t\t\t}\n\t\t\t\tdragElement.setAttribute(\"data-status\", \"show\");\n\t\t\t}\n\n\t\t\tvar analyticsLabel = {analyticsLabel: 'sortItem'};\n\n\t\t\tvar prevItem = BX.previousSibling(dragElement);\n\t\t\tif (BX.type.isDomNode(prevItem) && prevItem.id == \"left-menu-empty-item\" && !this.isExtranet)\n\t\t\t{\n\t\t\t\tthis.showMessage(dragElement, BX.message(\"MENU_ITEM_MAIN_PAGE\"), \"right\");\n\t\t\t\tanalyticsLabel = {\n\t\t\t\t\tanalyticsLabel: 'mainPage',\n\t\t\t\t\titemId: dragElement.getAttribute(\"data-id\")\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.checkMoreButton();\n\t\t\tthis.saveItemsSort(analyticsLabel);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuItemsBlock.replaceChild(dragElement, this.itemDomBlank);\n\t\t}\n\n\t\tBX.remove(this.draggableBlock);\n\t\tBX.remove(this.itemDomBlank);\n\t\tBX.remove(this.itemMoveBlank);\n\n\t\tjsDD.enableDest(dragElement);\n\t\tthis.menuItemsBlock.style.position = 'static';\n\n\t\tif (!this.isEditMode() && !this.areMoreItemsShowedState)\n\t\t{\n\t\t\tthis.showHideMoreItems();\n\t\t}\n\n\t\tthis.draggableBlock = null;\n\t\tthis.menuItemsBlockCoord = null;\n\t\tthis.itemDomBlank = null;\n\t\tthis.itemMoveBlank = null;\n\t\tthis.areMoreItemsShowedState = null;\n\n\t\tjsDD.refreshDestArea();\n\t}\n\t/* drag&drop finishing*/\n\n\tclearCompositeCache()\n\t{\n\t\tBX.ajax.runAction('intranet.leftmenu.clearCache', {\n\t\t\tdata: {},\n\t\t});\n\t}\n\n\tadjustAdminPanel()\n\t{\n\t\tif (!this.adminPanel)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar rect = this.adminPanel.getBoundingClientRect();\n\n\t\tif (rect.bottom > 0)\n\t\t{\n\t\t\tthis.menuContainer.style.top = Math.max(rect.bottom, this.fixedAdminPanelHeight) + \"px\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuContainer.style.top = Math.max(0, this.fixedAdminPanelHeight) + \"px\";\n\t\t}\n\n\t\t/*if (this.isCollapsed())\n\t\t{\n\t\t\tif (this.lastObserverEntries && this.lastObserverEntries[0].isIntersecting)\n\t\t\t{\n\t\t\t\tthis.menuContainer.style.top =\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\tthis.lastObserverEntries[0].boundingClientRect.bottom - this.getTemplateHeaderHeight(),\n\t\t\t\t\t\tthis.fixedAdminPanelHeight\n\t\t\t\t\t) + \"px\"\n\t\t\t\t;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.menuContainer.style.top = Math.max(0, this.fixedAdminPanelHeight) + \"px\";\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.lastObserverEntries && this.lastObserverEntries[0].isIntersecting)\n\t\t\t{\n\t\t\t\tthis.menuContainer.style.top =\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\tthis.lastObserverEntries[0].boundingClientRect.bottom,\n\t\t\t\t\t\tthis.fixedAdminPanelHeight + this.getTopPadding()\n\t\t\t\t\t) + \"px\"\n\t\t\t\t;\n\n\t\t\t\tthis.menuContainer.style.removeProperty(\"padding-top\");\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.menuContainer.style.top =\n\t\t\t\t\tMath.max(\n\t\t\t\t\t\t0,\n\t\t\t\t\t\tthis.fixedAdminPanelHeight > 0 ? this.fixedAdminPanelHeight + this.getTopPadding() : 0\n\t\t\t\t\t) + \"px\"\n\t\t\t\t;\n\n\t\t\t\tif (this.fixedAdminPanelHeight === 0)\n\t\t\t\t{\n\t\t\t\t\tthis.menuContainer.style.paddingTop = this.getTopPadding() + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}*/\n\t}\n\n\thandleBurgerClick(open)\n\t{\n\t\tthis.menuHeaderBurger.classList.add(\"menu-switcher-hover\");\n\n\t\tthis.toggle(open, function() {\n\n\t\t\tthis.isMenuMouseEnterBlocked = true;\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.menuHeaderBurger.classList.remove(\"menu-switcher-hover\");\n\n\t\t\t\tthis.isMenuMouseEnterBlocked = false;\n\n\t\t\t}.bind(this), 100);\n\n\t\t}.bind(this));\n\t}\n\n\thandleMenuMouseEnter(event)\n\t{\n\t\tif (!this.isCollapsed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isMenuMouseEnterBlocked)\n\t\t{\n\t\t\tif (this.slidingModeTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\t\t}\n\n\t\t\tthis.slidingModeTimeoutId = setTimeout(function() {\n\t\t\t\tthis.slidingModeTimeoutId = null;\n\t\t\t\tthis.switchToSlidingMode(true);\n\t\t\t}.bind(this), 400);\n\t\t}\n\t}\n\n\thandleMenuMouseLeave(event)\n\t{\n\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\tthis.slidingModeTimeoutId = null;\n\n\t\tif (!this.isMenuMouseLeaveBlocked)\n\t\t{\n\t\t\tthis.switchToSlidingMode(false);\n\t\t}\n\t}\n\n\thandleMenuDoubleClick(event)\n\t{\n\t\tif (event.target === this.menuBody)\n\t\t{\n\t\t\tthis.toggle();\n\t\t}\n\t}\n\n\thandleHeaderLogoMouserEnter(event)\n\t{\n\t\tBX.addClass(this.headerSettings, \"header-logo-block-settings-show\");\n\t}\n\n\thandleHeaderLogoMouserLeave(event)\n\t{\n\t\tif (!this.headerSettings.hasAttribute(\"data-rename-portal\"))\n\t\t{\n\t\t\tBX.removeClass(this.headerSettings, \"header-logo-block-settings-show\");\n\t\t}\n\t}\n\n\thandleAdminPanelCollapse(isCollapsed)\n\t{\n\t\tthis.adminPanelHeight = null;\n\n\t\tif (BX.admin.panel.isFixed())\n\t\t{\n\t\t\tthis.fixedAdminPanelHeight = this.getAdminPanelHeight();\n\t\t}\n\n\t\tthis.adjustAdminPanel();\n\t}\n\n\thandleAdminPanelFix(isFixed)\n\t{\n\t\tif (isFixed)\n\t\t{\n\t\t\tthis.fixedAdminPanelHeight = this.getAdminPanelHeight();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fixedAdminPanelHeight = 0;\n\t\t}\n\n\t\tthis.adjustAdminPanel();\n\t}\n\n\thandleSiteMapClick()\n\t{\n\t\tthis.switchToSlidingMode(false);\n\n\t\tBX.SidePanel.Instance.open(\"bitrix24-sitemap\", {\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: function() {\n\t\t\t\tvar promise = new BX.Promise();\n\n\t\t\t\tpromise.fulfill(BX(\"sitemap\").innerHTML);\n\n\t\t\t\treturn promise;\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUpButtonClick()\n\t{\n\t\tthis.isMenuMouseEnterBlocked = true;\n\n\t\tif (this.isUpButtonReversed())\n\t\t{\n\t\t\twindow.scrollTo(0, this.lastScrollOffset);\n\t\t\tthis.lastScrollOffset = 0;\n\t\t\tthis.unreverseUpButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.lastScrollOffset = window.pageYOffset;\n\t\t\twindow.scrollTo(0, 0);\n\t\t\tthis.reverseUpButton();\n\t\t}\n\n\t\tsetTimeout(function() {\n\t\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\t\tthis.slidingModeTimeoutId = null;\n\t\t\tthis.isMenuMouseEnterBlocked = false;\n\t\t}.bind(this), 100);\n\t}\n\n\thandleUpButtonMouseEnter()\n\t{\n\t\tthis.isMenuMouseEnterBlocked = true;\n\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\tthis.slidingModeTimeoutId = null;\n\t}\n\n\thandleUpButtonMouseLeave()\n\t{\n\t\tthis.isMenuMouseEnterBlocked = false;\n\t}\n\n\thandleMenuItemMouseEnter(event)\n\t{\n\t\tthis.handleMenuMouseEnter(event);\n\t}\n\n\thandleMenuItemMouseClick(event)\n\t{\n\t\tif (this.isCollapsed())\n\t\t{\n\t\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\t\tthis.slidingModeTimeoutId = null;\n\t\t}\n\t}\n\n\thandleDocumentScroll()\n\t{\n\t\tthis.adjustAdminPanel();\n\t\tthis.applyScrollMode();\n\n\t\tif (window.pageYOffset > document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.showUpButton();\n\n\t\t\tif (this.isUpButtonReversed())\n\t\t\t{\n\t\t\t\tthis.unreverseUpButton();\n\t\t\t\tthis.lastScrollOffset = 0;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!this.isUpButtonReversed())\n\t\t\t{\n\t\t\t\tthis.hideUpButton();\n\t\t\t}\n\t\t}\n\n\t\tif (window.pageXOffset > 0)\n\t\t{\n\t\t\tthis.menuContainer.style.left = -window.pageXOffset + \"px\";\n\t\t\tthis.upButton.style.left = -window.pageXOffset + (this.isCollapsed() ? 0 : 172) + \"px\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuContainer.style.removeProperty(\"left\");\n\t\t\tthis.upButton.style.removeProperty(\"left\");\n\t\t}\n\t}\n\n\thandleGroupPanelOpen()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked = true;\n\t}\n\n\thandleGroupPanelClose()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked = false;\n\t}\n\n\tshowUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-active\");\n\t}\n\n\thideUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-active\");\n\t}\n\n\treverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-reverse\");\n\t}\n\n\tunreverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-reverse\");\n\t}\n\n\tisUpButtonReversed()\n\t{\n\t\treturn this.menuContainer.classList.contains(\"menu-up-button-reverse\");\n\t}\n\n\tisDefaultTheme()\n\t{\n\t\treturn document.body.classList.contains(\"bitrix24-default-theme\");\n\t}\n\n\tgetTopPadding()\n\t{\n\t\treturn this.isDefaultTheme() ? 0 : 9;\n\t}\n\n\tgetAdminPanelHeight()\n\t{\n\t\tif (this.adminPanelHeight !== null)\n\t\t{\n\t\t\treturn this.adminPanelHeight;\n\t\t}\n\n\t\tif (this.adminPanel)\n\t\t{\n\t\t\tthis.adminPanelHeight = this.adminPanel.offsetHeight;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.adminPanelHeight = 0;\n\t\t}\n\n\t\treturn this.adminPanelHeight;\n\t}\n\n\tgetTemplateHeaderHeight()\n\t{\n\t\tif (this.templateHeaderHeight === null)\n\t\t{\n\t\t\tvar header = BX(\"header\");\n\t\t\tif (header)\n\t\t\t{\n\t\t\t\tthis.templateHeaderHeight = header.offsetHeight;\n\t\t\t}\n\t\t}\n\n\t\treturn this.templateHeaderHeight ? this.templateHeaderHeight : 0;\n\t}\n\n\tswitchToSlidingMode(enable, immediately)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tif (this.slidingModeTimeoutId)\n\t\t\t{\n\t\t\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\t\t\tthis.slidingModeTimeoutId = null;\n\t\t\t}\n\n\t\t\tif (BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t\t{\n\t\t\t\tif (immediately !== true)\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-closing-mode\");\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-mode menu-sliding-opening-mode\");\n\t\t\t}\n\t\t}\n\t\telse if (this.isCollapsedMode && !BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-closing-mode\");\n\n\t\t\tif (immediately !== true)\n\t\t\t{\n\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-opening-mode\");\n\t\t\t}\n\n\t\t\tBX.addClass(this.mainTable, \"menu-sliding-mode\");\n\t\t}\n\t}\n\n\thandleSlidingTransitionEnd(event)\n\t{\n\t\tif (event.target === this.menuContainer)\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-opening-mode menu-sliding-closing-mode\");\n\t\t}\n\t}\n\n\tswitchToScrollMode(enable)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tif (this.isScrollMode === true)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.mainTable, \"menu-scroll-mode\");\n\t\t\t\tthis.isScrollMode = false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isScrollMode === false)\n\t\t\t{\n\t\t\t\tBX.addClass(this.mainTable, \"menu-scroll-mode\");\n\t\t\t\tthis.isScrollMode = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tswitchToLogoMaskMode(enable)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tif (this.islogoMaskMode === true)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.mainTable, \"menu-logo-mask-mode\");\n\t\t\t\tthis.islogoMaskMode = false;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.islogoMaskMode === false)\n\t\t\t{\n\t\t\t\tBX.addClass(this.mainTable, \"menu-logo-mask-mode\");\n\t\t\t\tthis.islogoMaskMode = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tapplyScrollMode()\n\t{\n\t\tif (this.isLogoMaskNeeded())\n\t\t{\n\t\t\tthis.switchToLogoMaskMode(true);\n\t\t}\n\n\t\tvar threshold = this.scrollModeThreshold;\n\t\tif (this.fixedAdminPanelHeight === 0 && this.adminPanel)\n\t\t{\n\t\t\tthreshold += this.getAdminPanelHeight()\n\t\t}\n\n\t\tif (window.pageYOffset > threshold)\n\t\t{\n\t\t\tthis.switchToScrollMode(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.switchToScrollMode(false);\n\t\t}\n\t}\n\n\tisLogoMaskNeeded()\n\t{\n\t\tif (this.logoMaskNeeded === null)\n\t\t{\n\t\t\tif (this.menuHeaderLogo.querySelector(\".logo-image-container\"))\n\t\t\t{\n\t\t\t\tthis.logoMaskNeeded = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar logo = this.menuHeaderLogo;\n\t\t\t\tif (logo.offsetWidth === 0)\n\t\t\t\t{\n\t\t\t\t\tlogo = this.headerLogo;\n\t\t\t\t}\n\n\t\t\t\tthis.logoMaskNeeded = logo.offsetWidth > 200;\n\t\t\t}\n\t\t}\n\n\t\treturn this.logoMaskNeeded;\n\t}\n\n\ttoggle(flag, fn) {\n\n\t\tvar leftColumn = BX(\"layout-left-column\");\n\t\tif (!leftColumn)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar isOpen = !BX.hasClass(this.mainTable, \"menu-collapsed-mode\");\n\n\t\tif ((flag === true && isOpen) || (flag === false && !isOpen) || BX.hasClass(this.mainTable, \"menu-animation-mode\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isEditMode())\n\t\t{\n\t\t \tthis.applyEditMode();\n\t\t}\n\n\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuToggle\", [flag, this]);\n\n\t\tvar logoImageContainer = this.menuHeader.querySelector(\".logo-image-container\");\n\t\tif (logoImageContainer)\n\t\t{\n\t\t\tvar logoWidth = this.header.querySelector(\".logo-image-container\").offsetWidth;\n\t\t\tif (logoWidth > 0)\n\t\t\t{\n\t\t\t\tlogoImageContainer.style.width = logoWidth + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.isMenuMouseEnterBlocked = true;\n\t\tthis.switchToSlidingMode(false, true);\n\t\tthis.applyScrollMode();\n\n\t\tleftColumn.style.overflow = \"hidden\";\n\t\tBX.addClass(\n\t\t\tthis.mainTable,\n\t\t\t\"menu-animation-mode \" + (isOpen ? \"menu-animation-closing-mode\" : \"menu-animation-opening-mode\")\n\t\t);\n\n\t\tvar menuLinks = [].slice.call(leftColumn.querySelectorAll('.menu-item-link'));\n\t\tvar menuMoreBtn = leftColumn.querySelector('.menu-collapsed-more-btn');\n\t\tvar menuMoreBtnDefault = leftColumn.querySelector('.menu-default-more-btn');\n\n\t\tvar menuSitemapIcon = leftColumn.querySelector('.menu-sitemap-icon-box');\n\t\tvar menuSitemapText = leftColumn.querySelector('.menu-sitemap-btn-text');\n\n\t\tvar menuEmployeesText = leftColumn.querySelector('.menu-invite-employees-text');\n\t\tvar menuEmployeesIcon = leftColumn.querySelector('.menu-invite-icon-box');\n\n\t\tvar licenseContainer = leftColumn.querySelector('.menu-license-all-container');\n\t\tvar licenseBtn = leftColumn.querySelector('.menu-license-all-default');\n\n\t\tif (licenseBtn) {\n\t\t\tvar licenseHeight = licenseBtn.offsetHeight;\n\t\t}\n\n\t\tvar licenseCollapsedBtn = leftColumn.querySelector('.menu-license-all-collapsed');\n\n\t\tvar menuTextDivider = leftColumn.querySelector('.menu-item-separator');\n\t\tvar menuMoreCounter = leftColumn.querySelector('.menu-item-index-more');\n\n\t\tvar pageHeader = this.mainTable.querySelector(\".page-header\");\n\t\tvar imBar = document.getElementById(\"bx-im-bar\");\n\t\tvar imBarWidth = imBar ? imBar.offsetWidth : 0;\n\n\t\t(new BX.easing({\n\t\t\tduration: 300,\n\t\t\tstart: {\n\t\t\t\ttranslateIcon: isOpen ? -100 : 0,\n\t\t\t\ttranslateText: isOpen ? 0 : -100,\n\t\t\t\ttranslateMoreBtn: isOpen ? 0 : -84,\n\t\t\t\ttranslateLicenseBtn: isOpen ? 0 : -100,\n\t\t\t\theightLicenseBtn: isOpen ? licenseHeight : 40,\n\t\t\t\tburgerMenuWidth: isOpen ? 33 : 66,\n\t\t\t\tsidebarWidth: isOpen ? 240 : 66, /* these values are duplicated in style.css as well */\n\t\t\t\topacity: isOpen ? 100 : 0,\n\t\t\t\topacityRevert: isOpen ? 0 : 100\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\ttranslateIcon: isOpen ? 0 : -100,\n\t\t\t\ttranslateText: isOpen ? -100 : -18,\n\t\t\t\ttranslateMoreBtn: isOpen ? -84 : 0,\n\t\t\t\ttranslateLicenseBtn: isOpen ? -100 : 0,\n\t\t\t\theightLicenseBtn: isOpen ? 40 : licenseHeight,\n\t\t\t\tburgerMenuWidth: isOpen ? 66 : 33,\n\t\t\t\tsidebarWidth: isOpen ? 66 : 240,\n\t\t\t\topacity: isOpen ? 0 : 100,\n\t\t\t\topacityRevert: isOpen ? 100 : 0\n\t\t\t},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state)\n\t\t\t{\n\t\t\t\tleftColumn.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuContainer.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuHeaderBurger.style.width = state.burgerMenuWidth + \"px\";\n\t\t\t\tthis.headerBurger.style.width = state.burgerMenuWidth + \"px\";\n\n\t\t\t\t//Change this formula in template_style.css as well\n\t\t\t\tif (pageHeader)\n\t\t\t\t{\n\t\t\t\t\tpageHeader.style.maxWidth = \"calc(100vw - \" + state.sidebarWidth + \"px - \" + imBarWidth + \"px)\";\n\t\t\t\t}\n\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\t//Closing Mode\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.settingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tthis.settingsIconBox.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tthis.settingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\tthis.settingsBtnText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuMoreCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (licenseContainer)\n\t\t\t\t\t{\n\t\t\t\t\t\tlicenseBtn.style.transform = \"translateX(\" + state.translateLicenseBtn + \"px)\";\n\t\t\t\t\t\tlicenseBtn.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tlicenseBtn.style.height = state.heightLicenseBtn + \"px\";\n\n\t\t\t\t\t\tlicenseCollapsedBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tlicenseCollapsedBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\t\tmenuCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t//Opening Mode\n\t\t\t\t\tmenuTextDivider.style.opacity = 0;\n\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.settingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tthis.settingsIconBox.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tthis.settingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\tthis.settingsBtnText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (licenseContainer)\n\t\t\t\t\t{\n\t\t\t\t\t\tlicenseBtn.style.transform = \"translateX(\" + state.translateLicenseBtn + \"px)\";\n\t\t\t\t\t\tlicenseBtn.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tlicenseBtn.style.height = state.heightLicenseBtn + \"px\";\n\n\t\t\t\t\t\tlicenseCollapsedBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tlicenseCollapsedBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tmenuLinkText.style.display = \"inline-block\";\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this),\n\t\t\tcomplete: function ()\n\t\t\t{\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = true;\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-collapsed-mode\");\n\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = false;\n\t\t\t\t\tBX.removeClass(this.mainTable, \"menu-collapsed-mode\");\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(\n\t\t\t\t\tthis.mainTable,\n\t\t\t\t\t\"menu-animation-mode menu-animation-opening-mode menu-animation-closing-mode\"\n\t\t\t\t);\n\n\t\t\t\tvar containers = [\n\t\t\t\t\tleftColumn,\n\t\t\t\t\tmenuTextDivider,\n\t\t\t\t\tthis.menuHeaderBurger,\n\t\t\t\t\tthis.headerBurger,\n\t\t\t\t\tthis.settingsIconBox,\n\t\t\t\t\tthis.settingsBtnText,\n\t\t\t\t\tmenuMoreBtnDefault,\n\t\t\t\t\tmenuMoreBtn,\n\t\t\t\t\tlogoImageContainer,\n\t\t\t\t\tmenuSitemapIcon,\n\t\t\t\t\tmenuSitemapText,\n\t\t\t\t\tmenuEmployeesIcon,\n\t\t\t\t\tmenuEmployeesText,\n\t\t\t\t\tmenuMoreCounter,\n\t\t\t\t\tlicenseBtn,\n\t\t\t\t\tlicenseCollapsedBtn,\n\t\t\t\t\tthis.menuContainer,\n\t\t\t\t\tpageHeader\n\t\t\t\t];\n\n\t\t\t\tcontainers.forEach(function(container) {\n\t\t\t\t\tif (container)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainer.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\n\t\t\t\t\titem.style.cssText = \"\";\n\t\t\t\t\tmenuLinkText.style.cssText = \"\";\n\t\t\t\t\tmenuIcon.style.cssText = \"\";\n\n\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuCounter.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.isMenuMouseEnterBlocked = false;\n\t\t\t\tthis.adjustAdminPanel();\n\n\t\t\t\tif (BX.type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tfn();\n\t\t\t\t}\n\n\t\t\t\tvar action = isOpen ? \"collapseMenu\" : \"expandMenu\";\n\n\t\t\t\tBX.ajax.runAction(`intranet.leftmenu.${action}`, {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tanalyticsLabel: action\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this)\n\t\t})).animate();\n\t}\n\n\thighlight(currentUrl)\n\t{\n\t\tif (!BX.type.isNotEmptyString(currentUrl) || !this.menuContainer)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tvar items = this.menuContainer.getElementsByTagName(\"li\");\n\t\tvar curSelectedItem = -1;\n\t\tvar curSelectedLen = -1;\n\t\tvar curSelectedPriority = -1;\n\t\tvar curSelectedUrl = null;\n\n\t\tfor (var i = 0, length = items.length; i < length; i++)\n\t\t{\n\t\t\tvar itemLinks = [];\n\t\t\tvar dataLink = items[i].getAttribute(\"data-link\");\n\t\t\tif (BX.type.isNotEmptyString(dataLink))\n\t\t\t{\n\t\t\t\t/*\n\t\t\t\tCustom items have more priority than standard items.\n\t\t\t\tExample:\n\t\t\t\t\tCalendar (standard item)\n\t\t\t\t\t\tdata-link=\"/company/personal/user/1/calendar/\"\n\t\t\t\t\t\tdata-all-links=\"/company/personal/user/1/calendar/,/calendar/\n\n\t\t\t\t\tCompany Calendar (custom item)\n\t\t\t\t \t\tdata-link=\"/calendar/\"\n\n\t\t\t\tWe've got two items with the identical link /calendar/'.\n\t\t\t\t*/\n\n\t\t\t\tvar itemType = items[i].getAttribute(\"data-type\");\n\t\t\t\titemLinks.push({\n\t\t\t\t\tpriority: BX.util.in_array(itemType, [\"standard\", \"admin\"]) ? 3 : 2,\n\t\t\t\t\turl: dataLink\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar dataLinks = items[i].getAttribute(\"data-all-links\");\n\t\t\tif (BX.type.isNotEmptyString(dataLinks))\n\t\t\t{\n\t\t\t\tdataLinks.split(\",\").forEach(function(link) {\n\t\t\t\t\tlink = BX.util.trim(link);\n\t\t\t\t\tif (BX.type.isNotEmptyString(link))\n\t\t\t\t\t{\n\t\t\t\t\t\titemLinks.push({\n\t\t\t\t\t\t\tpriority: 1,\n\t\t\t\t\t\t\turl: link\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfor (var j = 0, l = itemLinks.length; j < l; j++)\n\t\t\t{\n\t\t\t\tvar itemLink = itemLinks[j].url;\n\t\t\t\tvar itemPriority = itemLinks[j].priority;\n\n\t\t\t\tvar isItemSelected = this.isItemSelected(itemLink, currentUrl);\n\t\t\t\tif (isItemSelected)\n\t\t\t\t{\n\t\t\t\t\tvar newLength = itemLink.length;\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewLength > curSelectedLen ||\n\t\t\t\t\t\t(newLength === curSelectedLen && itemPriority > curSelectedPriority)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurSelectedItem = i;\n\t\t\t\t\t\tcurSelectedUrl = itemLink;\n\t\t\t\t\t\tcurSelectedLen = newLength;\n\t\t\t\t\t\tcurSelectedPriority = itemPriority;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (curSelectedItem < 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvar li = items[curSelectedItem];\n\t\tBX.addClass(li, \"menu-item-active\");\n\n\t\t//Show hidden item\n\t\tvar moreItem = li.parentNode.parentNode;\n\t\tif (\n\t\t\tBX.hasClass(moreItem, \"menu-item-favorites-more\") && !BX.hasClass(moreItem, \"menu-item-favorites-more-open\")\n\t\t)\n\t\t{\n\t\t\tthis.showHideMoreItems(false);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tmakeTextIcons()\n\t{\n\t\tvar items = this.menuContainer.getElementsByTagName(\"li\");\n\n\t\tfor (var i = 0, length = items.length; i < length; i++)\n\t\t{\n\t\t\tvar item = items[i];\n\t\t\tvar hasIcon = !item.classList.contains(\"menu-item-no-icon-state\");\n\t\t\tif (hasIcon)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar icon = item.querySelector(\".menu-item-icon\");\n\t\t\tvar text = item.querySelector(\".menu-item-link-text\");\n\n\t\t\tif (icon && text)\n\t\t\t{\n\t\t\t\ticon.textContent = this.getShortName(text.textContent);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetShortName(name)\n\t{\n\t\tif (!BX.type.isString(name) || !BX.type.isNotEmptyString(name.trim()))\n\t\t{\n\t\t\treturn \"...\";\n\t\t}\n\n\t\tvar shortName = \"\";\n\t\tname = name.replace(/['`\".,:;~|{}*^$#@&+\\-=?!()[\\]<>\\n\\r]+/g, \"\").trim();\n\t\tif (!BX.type.isNotEmptyString(name))\n\t\t{\n\t\t\tshortName = name.substring(0, 2);\n\t\t}\n\t\telse if (name.length === 2)\n\t\t{\n\t\t\tshortName = name;\n\t\t}\n\n\t\tvar words = name.split(/[\\s,]+/);\n\t\tif (words.length <= 1)\n\t\t{\n\t\t\tshortName = name.substring(0, 1);\n\t\t}\n\t\telse if (words.length === 2)\n\t\t{\n\t\t\tshortName = words[0].substring(0, 1) + words[1].substring(0, 1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvar firstWord = words[0];\n\t\t\tvar secondWord = words[1];\n\n\t\t\tfor (var i = 1; i < words.length; i++)\n\t\t\t{\n\t\t\t\tif (words[i].length > 3)\n\t\t\t\t{\n\t\t\t\t\tsecondWord = words[i];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tshortName = firstWord.substring(0, 1) + secondWord.substring(0, 1);\n\t\t}\n\n\t\treturn shortName.toUpperCase();\n\t}\n\n\tgetSelectedItem(currentUrl, allLinks)\n\t{\n\t\tif (!BX.type.isNotEmptyString(currentUrl) || !this.menuContainer)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tvar items = this.menuContainer.getElementsByTagName(\"li\");\n\t\tvar curSelectedItem = -1;\n\t\tvar curSelectedLen = -1;\n\t\tvar curSelectedUrl = null;\n\n\t\tfor (var i = 0, length = items.length; i < length; i++)\n\t\t{\n\t\t\tvar itemLinks = [];\n\n\t\t\tif (allLinks)\n\t\t\t{\n\t\t\t\tvar dataLinks = items[i].getAttribute(\"data-all-links\");\n\t\t\t\tif (BX.type.isNotEmptyString(dataLinks))\n\t\t\t\t{\n\t\t\t\t\titemLinks = itemLinks.concat(dataLinks.split(\",\"));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar dataLink = items[i].getAttribute(\"data-link\");\n\t\t\t\tif (BX.type.isNotEmptyString(dataLink))\n\t\t\t\t{\n\t\t\t\t\titemLinks.push(dataLink);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var j = 0, l = itemLinks.length; j < l; j++)\n\t\t\t{\n\t\t\t\tvar itemLink = itemLinks[j];\n\t\t\t\tif (!BX.type.isNotEmptyString(itemLink))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tvar isItemSelected = this.isItemSelected(itemLink, currentUrl);\n\t\t\t\tif (isItemSelected)\n\t\t\t\t{\n\t\t\t\t\tvar newLength = itemLink.length;\n\t\t\t\t\tif (newLength > curSelectedLen)\n\t\t\t\t\t{\n\t\t\t\t\t\tcurSelectedItem = i;\n\t\t\t\t\t\tcurSelectedUrl = itemLinks[j];\n\t\t\t\t\t\tcurSelectedLen = newLength;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn curSelectedItem >= 0 ? items[curSelectedItem] : null;\n\n\t}\n\n\tisItemSelected(url, currentUrl)\n\t{\n\t\tvar originalCurrentUrl = currentUrl;\n\t\tvar questionPos = currentUrl.indexOf(\"?\");\n\t\tif (questionPos !== -1)\n\t\t{\n\t\t\tcurrentUrl = currentUrl.substring(0, questionPos);\n\t\t}\n\n\t\tvar currentUrlWithIndex = this.getUrlWithIndex(currentUrl);\n\t\turl = url.replace(/(\\/index\\.php)($|\\?)/, \"$2\");\n\n\t\tif (currentUrl.indexOf(url) === 0 || currentUrlWithIndex.indexOf(url) === 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tquestionPos = url.indexOf(\"?\");\n\t\tif (questionPos === -1)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tvar refinedUrl = url.substring(0, questionPos);\n\t\tif (refinedUrl !== currentUrl && refinedUrl !== currentUrlWithIndex)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tvar success = true;\n\t\tvar params = this.getUrlParams(url);\n\t\tvar globals = this.getUrlParams(originalCurrentUrl);\n\n\t\tfor (var varName in params)\n\t\t{\n\t\t\tif (!params.hasOwnProperty(varName))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar varValues = params[varName];\n\t\t\tvar globalValues = typeof(globals[varName]) !== \"undefined\" ? globals[varName] : [];\n\t\t\tfor (var i = 0; i < varValues.length; i++)\n\t\t\t{\n\t\t\t\tvar varValue = varValues[i];\n\t\t\t\tif (!BX.util.in_array(varValue, globalValues))\n\t\t\t\t{\n\t\t\t\t\tsuccess = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn success;\n\t}\n\n\tgetUrlParams(url)\n\t{\n\t\tvar params = {};\n\t\tvar questionPos = url.indexOf(\"?\");\n\t\tif (questionPos === -1)\n\t\t{\n\t\t\treturn params;\n\t\t}\n\n\t\tvar tokens = url.substring(questionPos + 1).split(\"&\");\n\n\t\tfor (var i = 0; i < tokens.length; i++)\n\t\t{\n\t\t\tvar token = tokens[i];\n\t\t\tvar eqPos = token.indexOf(\"=\");\n\n\t\t\tif (eqPos === 0)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar varName = eqPos === -1 ? token : token.substring(0, eqPos);\n\t\t\tvarName = varName.replace(\"[]\", \"\");\n\t\t\tvar varValue = eqPos === -1 ? \"\" : token.substring(eqPos + 1);\n\n\t\t\tif (params[varName])\n\t\t\t{\n\t\t\t\tparams[varName].push(varValue);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparams[varName] = [varValue];\n\t\t\t}\n\n\t\t}\n\n\t\treturn params;\n\t}\n\n\tgetUrlWithIndex(url)\n\t{\n\t\tif (!BX.type.isNotEmptyString(url))\n\t\t{\n\t\t\turl = \"\";\n\t\t}\n\n\t\tvar questionPos = url.indexOf(\"?\");\n\t\tvar queryString = questionPos >= 0 ? \"?\" + url.substring(questionPos + 1) : \"\";\n\t\tvar path = questionPos >= 0 ? url.substring(0, questionPos) : url;\n\n\t\tif (path.match(/\\.php$/))\n\t\t{\n\t\t\treturn url;\n\t\t}\n\n\t\tif (path.slice(-1) !== \"/\")\n\t\t{\n\t\t\tpath += \"/\";\n\t\t}\n\n\t\treturn path + \"index.php\" + queryString;\n\t}\n\n\tcheckCurrentPageInTopMenu()\n\t{\n\t\tvar currentFullPath = document.location.pathname + document.location.search;\n\n\t\tif (BX.Main && BX.Main.interfaceButtonsManager)\n\t\t{\n\t\t\tvar menuCollection = BX.Main.interfaceButtonsManager.getObjects();\n\t\t\tvar menuIds = Object.keys(menuCollection);\n\n\t\t\tif (menuIds[0])\n\t\t\t{\n\t\t\t\tvar menu = menuCollection[menuIds[0]];\n\t\t\t\tthis.topItemSelectedObj = menu.getActive();\n\n\t\t\t\tif (typeof this.topItemSelectedObj === \"object\" && this.topItemSelectedObj)\n\t\t\t\t{\n\t\t\t\t\tif (this.topItemSelectedObj.hasOwnProperty(\"NODE\"))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.topMenuSelectedNode = this.topItemSelectedObj.NODE;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar link = document.createElement(\"a\");\n\t\t\t\t\tlink.href = this.topItemSelectedObj.URL;\n\n\t\t\t\t\t//IE11 omits slash in the pathname\n\t\t\t\t\tvar path = link.pathname[0] !== \"/\" ? \"/\" + link.pathname : link.pathname;\n\n\t\t\t\t\tthis.topItemSelectedObj.URL = BX.util.htmlspecialcharsback(path + link.search);\n\t\t\t\t\tthis.topItemSelectedObj.TEXT = BX.util.htmlspecialcharsback(this.topItemSelectedObj.TEXT);\n\n\t\t\t\t\tthis.isCurrentPageStandard =\n\t\t\t\t\t\tthis.topItemSelectedObj.URL === currentFullPath &&\n\t\t\t\t\t\tthis.topItemSelectedObj.URL.indexOf(\"workgroups\") === -1\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.isCurrentPageStandard;\n\t}\n\n\tcheckLinkInMenu(link)\n\t{\n\t\tif (!BX.type.isNotEmptyString(link))\n\t\t\treturn;\n\n\t\tif (BX.type.isDomNode(this.menuItemsBlock))\n\t\t{\n\t\t\tvar items = this.menuItemsBlock.getElementsByClassName(\"menu-item-block\");\n\t\t\tfor (var i = 0; i < items.length; i++)\n\t\t\t{\n\t\t\t\tif (items[i].getAttribute(\"data-link\") == link)\n\t\t\t\t\treturn items[i];\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetStructureForHelper()\n\t{\n\t\tvar items = {menu: {}};\n\t\tif (BX.type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tvar types = [\"show\", \"hide\"];\n\t\t\tfor (var type in types)\n\t\t\t{\n\t\t\t\tvar curItems = this.menuContainer.querySelectorAll(\"[data-status='\" + types[type] + \"']\");\n\t\t\t\tif (curItems)\n\t\t\t\t{\n\t\t\t\t\tvar curItemsId = [];\n\t\t\t\t\tfor (var i = 0, l = curItems.length; i < l; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (curItems[i].getAttribute(\"data-type\") != \"default\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcurItemsId.push(curItems[i].getAttribute(\"data-id\"));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titems[types[type]] = curItemsId;\n\t\t\t}\n\t\t}\n\n\t\treturn items;\n\t}\n\n\t/**\n\t *\n\t * @returns {boolean}\n\t */\n\n\tinitPagetitleStar()\n\t{\n\t\tthis.checkCurrentPageInTopMenu();\n\t\treturn true;\n\t}\n\n\tonRequestMenuItemData(params)\n\t{\n\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onSendMenuItemData', [{\n\t\t\tcurrentPageInMenu: this.checkLinkInMenu(params.currentFullPath),\n\t\t\tcontext: params.context,\n\t\t}]);\n\t}\n\n\tonToolbarStarClick(params)\n\t{\n\t\tif (params.isActive)\n\t\t{\n\t\t\tthis.standartItemObj.deleteStandardItem({\n\t\t\t\tcontext: params.context,\n\t\t\t\tpageLink: params.pageLink,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.standartItemObj.addStandardItem({\n\t\t\t\tcontext: params.context,\n\t\t\t\tpageTitle: params.pageTitle,\n\t\t\t\tpageLink: params.pageLink,\n\t\t\t});\n\t\t}\n\t}\n\n\tshowImportConfigurationSlider()\n\t{\n\t\tif(this.urlImportConfiguration !== '')\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(this.urlImportConfiguration);\n\t\t}\n\t}\n\n\tshowLoader()\n\t{\n\t\tvar loader = BX.create(\"div\", {html: '<div style=\"display: block\" class=\"intranet-loader-container\"> <svg class=\"intranet-loader-circular\" viewBox=\"25 25 50 50\"> <circle class=\"intranet-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\" /> </svg> </div>'});\n\t\tdocument.body.appendChild(loader);\n\t}\n}\n\nnamespace.LeftMenu = LeftMenu;\n\n\n\n"],"names":["SelfItem","parent","bindElement","itemInfo","isEditMode","popupContent","BX","create","attrs","name","children","for","className","html","message","value","text","type","link","checked","openInNewPage","id","appendChild","button","PopupWindowManager","closeIcon","offsetTop","offsetLeft","lightShadow","draggable","restrict","closeByEsc","titleBar","content","buttons","PopupWindowButton","events","click","proxy","form","document","forms","textField","elements","linkField","openNewTab","util","trim","refineUrl","addClass","focus","buttonNode","removeClass","itemNewInfo","saveSelfItem","PopupWindowButtonLink","popupWindow","close","onPopupClose","getCurrentPopup","destroy","onPopupShow","setTimeout","show","mode","itemData","ajax","runAction","data","analyticsLabel","then","response","itemParams","hasOwnProperty","itemId","generateItemHtml","updateItemHtml","showConfirmWindow","alertMode","errors","itemNode","isDomNode","getAttribute","allItemObj","deleteItemFromAll","menuItemId","remove","showError","StandartItem","params","startX","startY","useAnimation","context","top","window","isCurrentPage","checkCurrentPageInTopMenu","isCurrentPageStandard","topMenuSelectedNode","menuNodeCoord","getBoundingClientRect","left","topItemSelectedObj","DATA_ID","TEXT","isNotEmptyString","currentPagePath","URL","counterId","COUNTER_ID","counterValue","COUNTER","isStandardItem","subLink","SUB_LINK","pageTitle","getElementById","innerText","pageLink","location","pathname","search","titleCoord","onCustomEvent","animateTopItemToLeft","onStandardItemChangedSuccess","isActive","isCurrentPageInLeftMenu","animateTopItemFromLeft","itemText","updateStandardItem","topMenuNode","style","body","finishY","menuItemsBlock","bottom","areMoreItemsShowed","offsetHeight","saveItemsSort","easing","duration","start","finish","transition","makeEaseOut","transitions","quart","step","state","complete","animate","opacity","paddingLeft","AllItem","itemLink","itemTextNode","querySelector","itemCounterId","itemLinkNode","findChild","tagName","hasAttribute","setAttribute","showMessage","menu_item_id","itemType","Preset","container","presetItems","getElementsByClassName","i","length","bind","selectPreset","proxy_context","selectedNode","ready","overlay","contentColor","hasClass","currentPreset","presets","preset","href","url","reload","showImportConfiguration","showImportConfigurationSlider","initPreset","showMenuItems","hideMenuItems","customItems","firstItemLink","items","findChildren","menuContainer","push","textNode","item","ID","LINK","htmlspecialcharsback","innerHTML","NEW_PAGE","menuItemsCustomSort","contentNoPaddings","userSetting","userApply","itemsSort","_currentPopup","customPresetExists","Counters","allCountersInMenu","livefeedCounter","decrementStack","hiddenCounters","allCounters","counters","send","valueToShow","counter","toLowerCase","parentNode","warning","display","localStorage","set","sumHiddenCounters","l","updateDesktopCounter","BXIM","countersSum","parseInt","desktop","setBrowserIconBadge","node","iDecrement","curSumCounters","hiddenItems","curCounter","Number","ItemWarning","options","isPlainObject","removeItemWarning","warningNode","props","title","isNotEmptyObject","namespace","Reflection","LeftMenu","ajaxPath","isAdmin","isBitrix24","siteId","siteDir","isExtranet","isCompositeMode","isCollapsedMode","activeItemsId","menuSelectedNode","showPresetPopup","urlImportConfiguration","isCustomPresetAvailable","isPublicConverted","lastScrollOffset","logoMaskNeeded","islogoMaskMode","isScrollMode","scrollModeThreshold","templateHeaderHeight","menuHeader","menuBody","menuMoreButton","inviteEmployeesBox","licenseBox","settingsBox","settingsIconBox","settingsBtnText","settingsSaveBtn","timeout","highlight","makeTextIcons","handleMenuItemMouseEnter","handleMenuItemMouseClick","fixedAdminPanelHeight","adminPanel","adminPanelHeight","adminPanelState","getClass","fixed","getAdminPanelHeight","addCustomEvent","handleAdminPanelCollapse","handleAdminPanelFix","adjustAdminPanel","addEventListener","handleDocumentScroll","slidingModeTimeoutId","handleMenuDoubleClick","handleMenuMouseEnter","handleMenuMouseLeave","handleSlidingTransitionEnd","isMenuMouseEnterBlocked","isMenuMouseLeaveBlocked","mainTable","header","headerBurger","headerLogo","headerLogoBlock","headerSettings","menuHeaderLogo","menuHeaderBurger","menuHeaderTitle","handleHeaderLogoMouserEnter","handleHeaderLogoMouserLeave","handleBurgerClick","siteMapItem","handleSiteMapClick","upButton","handleUpButtonClick","handleUpButtonMouseEnter","handleUpButtonMouseLeave","showHideMoreItems","showSettingsPopup","applyEditMode","jsDD","Enable","onbxdragstart","menuItemDragStart","onbxdrag","menuItemDragMove","onbxdragstop","menuItemDragStop","onbxdraghover","menuItemDragHover","registerDest","registerObject","selfItemObj","standartItemObj","presetObj","countersObj","handleGroupPanelOpen","handleGroupPanelClose","firstPageLink","firstNode","onTopMenuFirstItemChange","contextMenu","dataItem","topMenu","isItemInLeftMenu","addMenuItem","onclick","event","createElement","deleteStandardItem","NODE","addStandardItem","PopupMenu","onRequestMenuItemData","onToolbarStarClick","promises","p","Promise","fulfill","reject","showPresetPopupFunction","leftMenuSelectedUrl","currentPath","currentFullPath","toggle","activeItems","querySelectorAll","key","hiddenBlock","height","animation","scrollHeight","opening","maxHeight","overflow","linear","toggleClass","animateShowingHiddenItems","moreBtnText","contextMenuItems","itemDeletePerm","currentContext","hideItem","showItem","previousSibling","setMainPage","okButtonText","onsuccess","deleteSelfItem","onfailure","linkNode","showSelfItemPopup","showStandardEditItemPopup","addItemToAll","deleteCustomItemFromAll","switchToEditMode","angle","onPopupDestroy","menuId","getMenuById","self","itemPageToLeftMenu","menuItems","setDefaultMenu","showLock","UI","InfoHelper","showCustomPresetPopup","switchToSlidingMode","position","popup","darkMode","autoHide","topMenuId","leftMenuNode","leftMenuLink","firstPageUrl","match","host","hash","updateCounters","decrementCounter","status","btn","checkMoreButton","recountHiddenCounters","insertBefore","itemWarningObj","showItemWarning","itemChildren","getShortName","isCounterExisted","anchorAttributes","target","indexOf","newItemNode","openMenuPopup","textContent","icon","startTop","dragElement","insertBeforeElement","nextElementSibling","nextSibling","getRandomString","isFunction","cancelButtonText","confirm","unregisterDest","areMoreItemsShowedState","itemHeight","itemDomBlank","itemMoveBlank","draggableBlock","menuItemsBlockCoord","pos","x","y","menuItemsBlockHeight","dest","findParent","firstItem","replaceChild","prevItem","enableDest","refreshDestArea","rect","Math","max","open","classList","add","isCollapsed","clearTimeout","admin","panel","isFixed","SidePanel","Instance","cacheable","contentCallback","promise","isUpButtonReversed","scrollTo","unreverseUpButton","pageYOffset","reverseUpButton","applyScrollMode","documentElement","clientHeight","showUpButton","hideUpButton","pageXOffset","removeProperty","contains","isDefaultTheme","enable","immediately","isLogoMaskNeeded","switchToLogoMaskMode","threshold","switchToScrollMode","logo","offsetWidth","flag","fn","leftColumn","isOpen","logoImageContainer","logoWidth","width","menuLinks","slice","call","menuMoreBtn","menuMoreBtnDefault","menuSitemapIcon","menuSitemapText","menuEmployeesText","menuEmployeesIcon","licenseContainer","licenseBtn","licenseHeight","licenseCollapsedBtn","menuTextDivider","menuMoreCounter","pageHeader","imBar","imBarWidth","translateIcon","translateText","translateMoreBtn","translateLicenseBtn","heightLicenseBtn","burgerMenuWidth","sidebarWidth","opacityRevert","maxWidth","transform","forEach","menuIcon","menuLinkText","menuCounter","createEvent","initEvent","dispatchEvent","containers","cssText","action","currentUrl","getElementsByTagName","curSelectedItem","curSelectedLen","curSelectedPriority","itemLinks","dataLink","priority","in_array","dataLinks","split","j","itemPriority","isItemSelected","newLength","curSelectedUrl","li","moreItem","hasIcon","isString","shortName","replace","substring","words","firstWord","secondWord","toUpperCase","allLinks","concat","originalCurrentUrl","questionPos","currentUrlWithIndex","getUrlWithIndex","refinedUrl","success","getUrlParams","globals","varName","varValues","globalValues","varValue","tokens","token","eqPos","queryString","path","Main","interfaceButtonsManager","menuCollection","getObjects","menuIds","Object","keys","menu","getActive","types","curItems","curItemsId","currentPageInMenu","checkLinkInMenu","loader"],"mappings":"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"}