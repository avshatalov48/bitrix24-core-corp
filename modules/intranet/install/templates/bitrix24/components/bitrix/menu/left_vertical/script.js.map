{"version":3,"file":"script.js","sources":["src/options.js","src/controllers/default-controller.js","src/controllers/preset-custom-controller.js","src/utils/admin-panel.js","src/utils.js","src/controllers/preset-default-controller.js","src/controllers/settings-controller.js","src/backend.js","src/items/item.js","src/items/item-user-favorites.js","src/items/item-user-self.js","src/items/item-admin-shared.js","src/items/item-admin-custom.js","src/items/item-system.js","src/items/item-group.js","src/items/item-group-system.js","src/items/index.js","src/items/item-active.js","src/controllers/items-controller.js","src/controllers/item-director.js","src/menu.js"],"sourcesContent":["import {Type} from 'main.core';\n\nexport default class Options {\n\tstatic version = '2021.10';\n\tstatic eventNameSpace = 'BX.Intranet.LeftMenu:';\n\tstatic eventName(name) {\n\t\treturn ['BX.Intranet.LeftMenu:', ...(Type.isStringFilled(name) ? [name] : name)].join(':')\n\t}\n\n\tstatic isExtranet = false;\n\tstatic isAdmin = false;\n\tstatic isCustomPresetRestricted = false;\n}","import {Loc} from 'main.core';\nimport {Menu, MenuItem} from 'main.popup';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport Options from '../options';\n\nexport default class DefaultController\n{\n\tcontainer;\n\t#popup = null;\n\n\tconstructor(\n\t\tcontainer, {\n\t\t\tevents\n\t\t}\n\t)\n\t{\n\t\tthis.container = container;\n\t\tif (events)\n\t\t{\n\t\t\tArray\n\t\t\t\t.from(Object.keys(events))\n\t\t\t\t.forEach((key) => {\n\t\t\t\t\tEventEmitter.subscribe(this, Options.eventName(key), events[key])\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tgetContainer(): ?Element\n\t{\n\t\treturn this.container;\n\t}\n\n\tcreatePopup(): Popup\n\t{\n\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.#popup;\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#popup === null)\n\t\t{\n\t\t\tthis.#popup = this.createPopup(...arguments);\n\t\t\tEventEmitter.subscribe(this.#popup, 'onClose', () => {\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onClose'));\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this.#popup, 'onShow', () => {\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onShow'));\n\t\t\t});\n\t\t\tEventEmitter.subscribe(this.#popup, 'onDestroy', () => {\n\t\t\t\tthis.#popup = null;\n\t\t\t});\n\t\t}\n\t\tthis.#popup.show()\n\t}\n\n\thide()\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\tthis.#popup.close();\n\t\t}\n\t}\n}","import {Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager} from 'main.popup';\nimport DefaultController from './default-controller';\nimport Options from \"../options\";\nimport {CancelButton, SaveButton} from 'ui.buttons';\n\nexport default class PresetCustomController extends DefaultController\n{\n\tisReady: boolean = true;\n\n\tcreatePopup()\n\t{\n\t\tconst form = Tag.render`\n\t\t\t<form id=\"customPresetForm\" style=\"min-width: 350px;\">\n\t\t\t\t<div style=\"margin: 15px 0 15px 9px;\">\n\t\t\t\t\t<input type=\"radio\" name=\"userScope\" id=\"customPresetCurrentUser\" value=\"currentUser\">\n\t\t\t\t\t<label for=\"customPresetCurrentUser\">${Loc.getMessage(\"MENU_CUSTOM_PRESET_CURRENT_USER\")}</label>\n\t\t\t\t</div>\n\t\t\t\t<div style=\"margin: 0 0 38px 9px;\">\n\t\t\t\t\t<input type=\"radio\" name=\"userScope\" id=\"customPresetNewUser\" value=\"newUser\" checked>\n\t\t\t\t\t<label for=\"customPresetNewUser\">${Loc.getMessage(\"MENU_CUSTOM_PRESET_NEW_USER\")}</label>\n\t\t\t\t</div>\n\t\t\t\t<hr style=\"background-color: #edeef0; border: none; color:  #edeef0; height: 1px;\">\n\t\t\t</form>`\n\t\t;\n\n\t\tlet button;\n\t\treturn PopupManager.create(\n\t\t\tthis.constructor.toString(), null, {\n\t\t\toverlay: true,\n\t\t\tcontentColor : \"white\",\n\t\t\tcontentNoPaddings : true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\ttitleBar: Loc.getMessage(\"MENU_CUSTOM_PRESET_POPUP_TITLE\"),\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: form,\n\t\t\tbuttons: [\n\t\t\t\t(button = new SaveButton({ onclick: () => {\n\t\t\t\t\tif (this.isReady === false)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\tthis.isReady = false;\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsSet'), form.elements[\"userScope\"].value === 'newUser')\n\t\t\t\t\t\t.forEach((promise) => {\n\t\t\t\t\t\t\tpromise\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\t\tPopupManager.create(\"menu-custom-preset-success-popup\", null, {\n\t\t\t\t\t\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\t\t\t\t\t\tcontentColor : \"white\",\n\t\t\t\t\t\t\t\t\t\ttitleBar: Loc.getMessage(\"MENU_CUSTOM_PRESET_POPUP_TITLE\"),\n\t\t\t\t\t\t\t\t\t\tcontent: Loc.getMessage(\"MENU_CUSTOM_PRESET_SUCCESS\")\n\t\t\t\t\t\t\t\t\t}).show();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\tconsole.log('Error!!')\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}})),\n\t\t\t\tnew CancelButton({ onclick: () => { this.hide();} }),\n\t\t\t]\n\t\t});\n\t}\n}","import {EventEmitter} from 'main.core.events';\nimport Options from \"../options\";\nexport default class AdminPanel\n{\n\tstatic #instance: AdminPanel = null;\n\tcontainer: Element;\n\n\tconstructor()\n\t{\n\t\tthis.container = BX(\"bx-panel\");\n\t\tif (this.container)\n\t\t{\n\t\t\tthis.bindEvents();\n\t\t}\n\t}\n\n\tbindEvents()\n\t{\n\t\tBX.addCustomEvent(\"onTopPanelCollapse\", function(isCollapsed)\n\t\t{\n\t\t\tEventEmitter.emit(this, Options.eventName('onPanelHasChanged'), this.top);\n\t\t}.bind(this));\n\n\t\tBX.addCustomEvent(\"onTopPanelFix\", function() {\n\t\t\tEventEmitter.emit(this, Options.eventName('onPanelHasChanged'), this.top);\n\t\t}.bind(this));\n\t}\n\n\tget height(): number\n\t{\n\t\treturn this.container ? this.container.offsetHeight : 0;\n\t}\n\n\tget fixedHeight(): number\n\t{\n\t\tconst adminPanelState = BX.getClass(\"BX.admin.panel.state\");\n\t\tif (adminPanelState && adminPanelState.fixed)\n\t\t{\n\t\t\treturn this.height;\n\t\t}\n\t\treturn 0;\n\t}\n\n\tget top()\n\t{\n\t\tif (this.container)\n\t\t{\n\t\t\tconst rect = this.container.getBoundingClientRect();\n\n\t\t\tif (rect.bottom > 0)\n\t\t\t{\n\t\t\t\treturn Math.max(rect.bottom, this.fixedHeight);\n\t\t\t}\n\t\t\treturn Math.max(0, this.fixedHeight);\n\t\t}\n\t\treturn 0;\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new AdminPanel();\n\t\t}\n\t\treturn this.#instance;\n\t}\n}","import {Loc, Uri} from 'main.core';\nimport AdminPanel from \"./utils/admin-panel\";\n\nexport default class Utils {\n\tstatic #curPage = null;\n\tstatic #curUri = null;\n\n\tstatic getCurPage(): ?String\n\t{\n\t\tif (this.#curPage === null)\n\t\t{\n\t\t\tthis.#curPage = document.location.pathname + document.location.search;\n\t\t}\n\t\treturn this.#curPage === '' ? null : this.#curPage;\n\t}\n\n\tstatic getCurUri(): Uri\n\t{\n\t\tif (this.#curUri === null)\n\t\t{\n\t\t\tthis.#curUri = new Uri(document.location.href);\n\t\t}\n\t\treturn this.#curUri;\n\t}\n\n\tstatic catchError(response) {\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: [Loc.getMessage(\"MENU_ERROR_OCCURRED\"),\n\t\t\t\t(response.errors ? ': ' + response.errors[0].message : '')].join(' '),\n\t\t\tposition: 'bottom-left',\n\t\t\tcategory: 'menu-self-item-popup',\n\t\t\tautoHideDelay: 3000\n\t\t});\n\t}\n\tstatic refineUrl(url)\n\t{\n\t\turl = String(url).trim();\n\t\tif (url !== '')\n\t\t{\n\t\t\tif (!url.match(/^https?:\\/\\//i) && !url.match(/^\\//i))\n\t\t\t{\n\t\t\t\t//for external links like \"google.com\" (without a protocol)\n\t\t\t\turl = \"http://\" + url;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar link = document.createElement(\"a\");\n\t\t\t\tlink.href = url;\n\n\t\t\t\tif (document.location.host === link.host)\n\t\t\t\t{\n\t\t\t\t\t// http://portal.com/path/ => /path/\n\t\t\t\t\turl = link.pathname + link.search + link.hash;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn url;\n\t}\n\n\tstatic get adminPanel(): AdminPanel\n\t{\n\t\treturn AdminPanel.getInstance();\n\t}\n}","import {Loc, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager} from 'main.popup';\nimport DefaultController from './default-controller';\nimport Options from \"../options\";\nimport Utils from \"../utils\";\nimport {CancelButton, CreateButton} from 'ui.buttons';\n\nexport default class PresetDefaultController extends DefaultController\n{\n\tisReady: boolean = true;\n\n\tcreatePopup(mode): Popup\n\t{\n\t\tlet button;\n\t\tconst content = document.querySelector('#left-menu-preset-popup').cloneNode(true);\n\t\treturn PopupManager.create(\n\t\t\tthis.constructor.name.toString(), null, {\n\t\t\toverlay: true,\n\t\t\tcontentColor : \"white\",\n\t\t\tcontentNoPaddings : true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: content,\n\t\t\tevents: {\n\t\t\t\tonFirstShow: () => {\n\t\t\t\t\t[...content.querySelectorAll('.js-left-menu-preset-item')]\n\t\t\t\t\t\t.forEach((node) => {\n\t\t\t\t\t\t\tnode.addEventListener('click', () => {\n\t\t\t\t\t\t\t\t[...content.querySelectorAll('.js-left-menu-preset-item')]\n\t\t\t\t\t\t\t\t\t.forEach((otherNode) => {\n\t\t\t\t\t\t\t\t\t\totherNode.classList[otherNode === node ? 'add' : 'remove']('left-menu-popup-selected');\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}\n\t\t\t},\n\t\t\tbuttons: [\n\t\t\t\t(button = new CreateButton({\n\t\t\t\t\ttext: Loc.getMessage('MENU_CONFIRM_BUTTON'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\tif (button.isWaiting())\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tbutton.setWaiting(true);\n\n\t\t\t\t\tlet currentPreset = \"\";\n\t\t\t\t\tif (document.forms[\"left-menu-preset-form\"])\n\t\t\t\t\t{\n\t\t\t\t\t\t[...document.forms[\"left-menu-preset-form\"]\n\t\t\t\t\t\t\t.elements[\"presetType\"]]\n\t\t\t\t\t\t\t.forEach((node) => {\n\t\t\t\t\t\t\t\tif (node.checked)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcurrentPreset = node.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsSet'),\n\t\t\t\t\t\t{presetId: currentPreset, mode})\n\t\t\t\t\t\t.forEach((promise) => {\n\t\t\t\t\t\t\tpromise\n\t\t\t\t\t\t\t\t.then((response) => {\n\t\t\t\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\t\tif (response.data.hasOwnProperty(\"url\"))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.href = response.data.url;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(Utils.catchError)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t}})),\n\t\t\t\tnew CancelButton({\n\t\t\t\t\ttext: Loc.getMessage('MENU_DELAY_BUTTON'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsPostponed'), {mode});\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t} }),\n\t\t\t]\n\t\t});\n\t}\n}","import {Loc} from 'main.core';\nimport {Menu, MenuItem} from 'main.popup';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport Options from '../options';\nimport DefaultController from './default-controller';\n\nexport default class SettingsController extends DefaultController\n{\n\tmenuId = 'leftMenuSettingsPopup';\n\n\tcreatePopup()\n\t{\n\t\tconst menu = new Menu({\n\t\t\tbindElement: this.container,\n\t\t\titems: this.getItems(),\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\t// cacheable: false,\n\t\t});\n\t\treturn menu.getPopupWindow();\n\t}\n\n\tgetItems(): Array\n\t{\n\t\tconst menuItems = [];\n\t\tArray.from(...EventEmitter.emit(this,\n\t\t\tOptions.eventName('onGettingSettingMenuItems'),\n\t\t)).forEach(({text, html, onclick, className}) => {\n\t\t\tif (!text && !html)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tmenuItems.push(Object.assign(html ? {\n\t\t\t\thtml: html\n\t\t\t} : {\n\t\t\t\ttext : text}, {\n\t\t\t\tclassName: [\"menu-popup-no-icon\", className ?? ''].join(' '),\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\tonclick(event, item);\n\t\t\t\t}\n\t\t\t}));\n\t\t});\n\t\treturn menuItems;\n\t}\n}","import {ajax, Loc} from 'main.core';\nimport Options from './options';\n\nexport default class Backend {\n\n\tstatic toggleMenu(collapse) {\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn ajax.runAction(`intranet.leftmenu.${collapse ? \"collapseMenu\" : \"expandMenu\"}`, {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: { leftmenu: {action: collapse ? \"collapseMenu\" : \"expandMenu\"} }\n\t\t});\n\t}\n\n\tstatic saveSelfItemMenu(itemData) {\n\t\tconst action =  itemData.id > 0 ? \"update\" : \"add\";\n\t\treturn ajax.runAction(`intranet.leftmenu.${action}SelfItem`, {\n\t\t\tdata: {itemData: itemData },\n\t\t\tanalyticsLabel: { leftmenu: {action: 'selfItemAddOrUpdate'} }\n\t\t});\n\t}\n\n\tstatic deleteSelfITem(id) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteSelfItem', {\n\t\t\tdata: {menuItemId: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'selfItemDelete'}}\n\t\t});\n\t}\n\n\tstatic addFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.addStandartItem', {\n\t\t\tdata: { itemData: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemAdd'}}\n\t\t});\n\t}\n\n\tstatic deleteFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteStandartItem', {\n\t\t\tdata: { itemData: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemDelete'}}\n\t\t});\n\t}\n\n\tstatic updateFavoritesItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.updateStandartItem', {\n\t\t\tdata: {\n\t\t\t\titemText: itemData.text,\n\t\t\t\titemId: itemData.id,\n\t\t\t},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'standardItemUpdate'}}\n\t\t})\n\t}\n\tstatic addAdminSharedItemMenu(itemData) {\n\t\treturn ajax.runAction('intranet.leftmenu.addItemToAll', {\n\t\t\tdata: { itemInfo: itemData },\n\t\t\tanalyticsLabel: {leftmenu: {action: 'adminItemAdd'}}\n\t\t});\n\t}\n\n\tstatic deleteAdminSharedItemMenu(id) {\n\t\treturn ajax.runAction('intranet.leftmenu.deleteItemFromAll', {\n\t\t\tdata: { menu_item_id: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'adminItemDelete'}}\n\t\t});\n\t}\n\n\tstatic saveItemsSort(menuItems, firstItemLink, analyticsLabel)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.saveItemsSort', {\n\t\t\tdata: {\n\t\t\t\titems: menuItems,\n\t\t\t\tfirstItemLink: firstItemLink,\n\t\t\t\tversion: Options.version\n\t\t\t},\n\t\t\tanalyticsLabel: {leftmenu: analyticsLabel}\n\t\t});\n\t}\n\n\tstatic setFirstPage(firstPageLink)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setFirstPage', {\n\t\t\tdata: {firstPageUrl: firstPageLink},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'mainPageIsSet'}}\n\t\t})\n\t}\n\n\tstatic setDefaultPreset()\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setDefaultMenu', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'defaultMenuIsSet'}}\n\t\t});\n\t}\n\n\tstatic setCustomPreset(forNewUsersOnly, itemsSort, customItems, firstItemLink)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.saveCustomPreset', {\n\t\t\tdata: {\n\t\t\t\tuserApply: forNewUsersOnly === true ? 'newUser' : 'currentUser',\n\t\t\t\titemsSort: itemsSort,\n\t\t\t\tcustomItems: customItems,\n\t\t\t\tfirstItemLink: firstItemLink,\n\t\t\t\tversion: Options.version\n\t\t\t},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'customPresetIsSet'} }\n\t\t});\n\t}\n\n\tstatic deleteCustomItem(id)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.deleteCustomItemFromAll', {\n\t\t\tdata: {menu_item_id: id},\n\t\t\tanalyticsLabel: {leftmenu: {action: 'customItemDelete'}}\n\t\t});\n\t}\n\n\tstatic setSystemPreset(mode, presetId)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.setPreset', {\n\t\t\tdata: {\n\t\t\t\tpreset: presetId,\n\t\t\t\tmode: mode === 'global' ? 'global' : 'personal'\n\t\t\t},\n\t\t\tanalyticsLabel: {\n\t\t\t\tleftmenu: {\n\t\t\t\t\taction: 'systemPresetIsSet',\n\t\t\t\t\tpresetId: presetId,\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tanalyticsFirst: mode === 'global' ? 'y' : 'n'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic postponeSystemPreset(mode)\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.delaySetPreset', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {\n\t\t\t\tleftmenu: {\n\t\t\t\t\taction: 'systemPresetIsPostponed',\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tanalyticsFirst: mode === 'global' ? 'y' : 'n'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic clearCache()\n\t{\n\t\treturn ajax.runAction('intranet.leftmenu.clearCache', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'clearCache'} }\n\t\t});\n\t}\n\n\tstatic expandGroup(id)\n\t{\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn ajax.runAction('intranet.leftmenu.expandMenuGroup', {\n\t\t\tdata: {id},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'expandMenuGroup' }}\n\t\t});\n\t}\n\n\tstatic collapseGroup(id)\n\t{\n\t\tif (Loc.getMessage('USER_ID') <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn ajax.runAction('intranet.leftmenu.collapseMenuGroup', {\n\t\t\tdata: {id},\n\t\t\tanalyticsLabel: { leftmenu: {action: 'collapseMenuGroup' }}\n\t\t});\n\t}\n}","import {Event, Uri, Type, Loc, Text, Tag} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager, Menu, MenuItem} from 'main.popup';\nimport Options from \"../options\";\nimport Utils from \"../utils\";\nimport {SaveButton, CancelButton} from 'ui.buttons';\n\nexport default class Item\n{\n\tstatic code = 'abstract';\n\n\tparentContainer: Element;\n\tcontainer: Element;\n\tlinks = [];\n\tisDraggable = true;\n\tstorage: Array = [];\n\n\tconstructor(parentContainer, container)\n\t{\n\t\tthis.parentContainer = parentContainer;\n\t\tthis.container = container;\n\t\tthis.init();\n\n\t\tthis.onDeleteAsFavorites = this.onDeleteAsFavorites.bind(this);\n\t\tsetTimeout(() => {\n\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\t\tEventEmitter.incrementMaxListeners(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'));\n\t\t\tEventEmitter.subscribe(this, Options.eventName('onItemDelete'), this.destroy.bind(this));\n\t\t}, 0);\n\t\tthis.showError = this.showError.bind(this);\n\t\tthis.showMessage = this.showMessage.bind(this);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.container.dataset.id;\n\t}\n\n\tgetCode(): string\n\t{\n\t\treturn this.constructor.code;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.container.querySelector(\"[data-role='item-text']\").textContent;\n\t}\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tdelete()\n\t{\n\t\t// Just do it.\n\t}\n\n\tinit()\n\t{\n\t\tthis.links = [];\n\t\tif (\n\t\t\tthis.container.hasAttribute('data-link')\n\t\t\t&& Type.isStringFilled(this.container.getAttribute(\"data-link\"))\n\t\t)\n\t\t{\n\t\t\tthis.links.push(\n\t\t\t\tthis.container.getAttribute(\"data-link\")\n\t\t\t);\n\t\t}\n\n\t\tif (this.container\n\t\t\t.hasAttribute(\"data-all-links\"))\n\t\t{\n\t\t\tthis.container\n\t\t\t\t.getAttribute(\"data-all-links\")\n\t\t\t\t.split(\",\")\n\t\t\t\t.forEach((link) => {\n\t\t\t\t\tlink = String(link).trim();\n\t\t\t\t\tif (Type.isStringFilled(link))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.links.push(\n\t\t\t\t\t\t\tlink\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\tthis.makeTextIcons();\n\t\tthis.storage = this.container.dataset.storage.split(',');\n\t}\n\n\tupdate({link, openInNewPage, text})\n\t{\n\t\topenInNewPage = (openInNewPage === 'Y' ? 'Y' : 'N');\n\n\t\tif (this.container.hasAttribute('data-link'))\n\t\t{\n\t\t\tthis.container.setAttribute('data-link', Text.encode(link));\n\t\t\tthis.container.setAttribute('data-new-page', openInNewPage);\n\t\t}\n\n\t\tconst linkNode = this.container.querySelector('a');\n\t\tif (linkNode)\n\t\t{\n\t\t\tlinkNode.setAttribute('href', Text.encode(link));\n\t\t\tlinkNode.setAttribute('target', openInNewPage === 'Y' ? '_blank' : '_self');\n\t\t}\n\t\tthis.container.querySelector(\"[data-role='item-text']\").innerHTML = Text.encode(text);\n\t\tthis.init();\n\t}\n\n\tdestroy()\n\t{\n\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\tEventEmitter.decrementMaxListeners(EventEmitter.GLOBAL_TARGET, 'onItemDeleteAsFavorites');\n\t}\n\n\tgetSimilarToUrl(currentUri: Uri): Array\n\t{\n\t\tconst result = [];\n\n\t\tthis.links.forEach((link, index) => {\n\t\t\tif (areUrlsEqual(link, currentUri))\n\t\t\t{\n\t\t\t\tresult.push({\n\t\t\t\t\tpriority: index > 0 ? 0 : 1, // main link is in higher priority\n\t\t\t\t\turl: link\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\t\treturn result;\n\t}\n\n\tmakeTextIcons()\n\t{\n\t\tif (!this.container.classList.contains(\"menu-item-no-icon-state\"))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst icon = this.container.querySelector(\".menu-item-icon\");\n\t\tconst text = this.container.querySelector(\".menu-item-link-text\");\n\n\t\tif (icon && text)\n\t\t{\n\t\t\ticon.textContent = getShortName(text.textContent);\n\t\t}\n\t}\n\n\tgetCounterValue(): ?number\n\t{\n\t\tconst node = this.container.querySelector('[data-role=\"counter\"]');\n\t\tif (!node)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn parseInt(node.dataset.counterValue);\n\t}\n\n\tupdateCounter(counterValue)\n\t{\n\t\tconst node = this.container.querySelector('[data-role=\"counter\"]');\n\t\tif (!node)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst oldValue = parseInt(node.dataset.counterValue) || 0;\n\t\tnode.dataset.counterValue = counterValue;\n\n\t\tif (counterValue > 0)\n\t\t{\n\t\t\tnode.innerHTML = (counterValue > 99 ? '99+' : counterValue);\n\t\t\tthis.container.classList.add('menu-item-with-index');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.innerHTML = '';\n\t\t\tthis.container.classList.remove('menu-item-with-index');\n\t\t\tif (counterValue < 0) // TODO need to know what it means\n\t\t\t{\n\t\t\t\tconst warning = BX('menu-counter-warning-' + this.getId());\n\t\t\t\tif (warning)\n\t\t\t\t{\n\t\t\t\t\twarning.style.display = 'inline-block';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {oldValue, newValue: counterValue};\n\t}\n\n\tmarkAsActive()\n\t{\n\t\tconsole.error('This action is only for the group');\n\t}\n\n\tshowWarning(title, events)\n\t{\n\t\tthis.removeWarning();\n\t\tconst link = this.container.querySelector(\"a.menu-item-link\");\n\t\tif (!link)\n\t\t{\n\t\t\treturn\n\t\t}\n\t\ttitle = title ? Text.encode(title) : '';\n\t\tconst node = Tag.render`<a class=\"menu-post-warn-icon\" title=\"${title}\"></a>`;\n\t\tif (events)\n\t\t{\n\t\t\tObject.keys(events).forEach((key) => {\n\t\t\t\tEvent.bind(node, key, events[key]);\n\t\t\t});\n\t\t}\n\t\tthis.container.classList.add(\"menu-item-warning-state\");\n\t\tlink.appendChild(node);\n\t}\n\n\tremoveWarning()\n\t{\n\t\tif (!this.container.classList.contains('menu-item-warning-state'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.container.classList.remove('menu-item-warning-state');\n\t\tlet node;\n\t\twhile (node = this.container.querySelector(\"a.menu-post-warn-icon\"))\n\t\t{\n\t\t\tnode.parentNode.removeChild(node);\n\t\t}\n\t}\n\n\tshowMessagePopup;\n\tshowMessage(message)\n\t{\n\t\tif (this.showMessagePopup)\n\t\t{\n\t\t\tthis.showMessagePopup.close();\n\t\t}\n\t\tthis.showMessagePopup = PopupManager.create(\"left-menu-message\", this.container,\n\t\t\t{\n\t\t\t\tcontent: '<div class=\"left-menu-message-popup\">' + message + '</div>',\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: 2,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => { this.showMessagePopup = null;}\n\t\t\t\t},\n\t\t\t\tautoHide: true\n\t\t\t});\n\n\t\tthis.showMessagePopup.show();\n\n\t\tsetTimeout(() => { if (this.showMessagePopup) {this.showMessagePopup.close()} }, 3000);\n\t}\n\n\tshowError(response)\n\t{\n\t\tconst errors = [];\n\t\tif (response.errors)\n\t\t{\n\t\t\terrors.push(response.errors[0].message);\n\t\t}\n\t\telse if (response instanceof TypeError)\n\t\t{\n\t\t\terrors.push(response.message);\n\t\t}\n\n\t\tconst message = [Loc.getMessage(\"MENU_ERROR_OCCURRED\"), ...errors].join(' ');\n\t\tthis.showMessage(message);\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\treturn [];\n\t}\n\n\tgetEditFields(): Object\n\t{\n\t\treturn {id: this.getId(), text: this.getName()};\n\t}\n\n\tonDeleteAsFavorites({data})\n\t{\n\t\tif (String(data.id) === String(this.getId()))\n\t\t{\n\t\t\tif (this.getCode() === 'standard'/* instanceof ItemUserFavorites*/)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {\n\t\t\t\t\titem: this,\n\t\t\t\t\tanimate: true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.storage = [...this.storage].filter((v) => {return v !== 'standard'});\n\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t}\n\t\t\tEventEmitter.unsubscribe(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), this.onDeleteAsFavorites);\n\t\t\tEventEmitter.decrementMaxListeners(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'));\n\t\t\t}\n\t}\n\n\tstatic detect(node)\n\t{\n\t\treturn node.getAttribute(\"data-role\") !== 'group' &&\n\t\t\tnode.getAttribute(\"data-type\") === this.code;\n\t}\n\n\tstatic createNode({id, text, link, openInNewPage, counterId, counterValue, topMenuId})\n\t{\n\t\tid = Text.encode(id);\n\t\ttext = Text.encode(text);\n\t\tlink = Text.encode(link);\n\t\tcounterId = counterId ? Text.encode(counterId) : '';\n\t\tcounterValue = counterValue ? parseInt(counterValue) : 0;\n\t\topenInNewPage = openInNewPage === 'Y' ? 'Y' : 'N';\n\t\treturn Tag.render`<li \n\t\t\tid=\"bx_left_menu_${id}\" \n\t\t\tdata-status=\"show\" \n\t\t\tdata-id=\"${id}\" \n\t\t\tdata-role=\"item\"\n\t\t\tdata-storage=\"\" \n\t\t\tdata-counter-id=\"${counterId}\" \n\t\t\tdata-link=\"${link}\" \n\t\t\tdata-all-links=\"\" \n\t\t\tdata-type=\"${this.code}\" \n\t\t\tdata-delete-perm=\"Y\" \n\t\t\t${topMenuId ? `data-top-menu-id=\"${Text.encode(topMenuId)}\"` : \"\"}\n\t\t\tdata-new-page=\"${openInNewPage}\" \n\t\t\tclass=\"menu-item-block menu-item-no-icon-state\">\n\t\t\t\t<span class=\"menu-favorites-btn menu-favorites-draggable\">\n\t\t\t\t\t<span class=\"menu-fav-draggable-icon\"></span>\n\t\t\t\t</span>\n\t\t\t\t<a class=\"menu-item-link\" data-slider-ignore-autobinding=\"true\" href=\"${link}\" target=\"${openInNewPage === 'Y' ? '_blank' : '_self'}\">\n\t\t\t\t\t<span class=\"menu-item-icon-box\">\n\t\t\t\t\t\t<span class=\"menu-item-icon\">W</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"menu-item-link-text \" data-role=\"item-text\">${text}</span>\n\t\t\t\t\t${counterId ? \n\t\t\t\t\t`<span class=\"menu-item-index-wrap\">\n\t\t\t\t\t\t<span data-role=\"counter\"\n\t\t\t\t\t\t\tdata-counter-value=\"${counterValue}\" class=\"menu-item-index\" id=\"menu-counter-${counterId}\">${counterValue}</span>\n\t\t\t\t\t</span>` : '' }\n\t\t\t\t</a>\n\t\t\t\t<span data-role=\"item-edit-control\" class=\"menu-fav-editable-btn menu-favorites-btn\">\n\t\t\t\t\t<span class=\"menu-favorites-btn-icon\"></span>\n\t\t\t\t</span>\n\t\t\t</li>`;\n\t}\n\n\t//region Edition for siblings\n\tstatic backendSaveItem(itemInfo): Promise\n\t{\n\t\tthrow 'Function backendSaveItem must be replaced';\n\t}\n\tstatic popup: Popup;\n\tstatic showUpdate(item: Item)\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.showForm(item.container, item.getEditFields(), resolve, reject);\n\t\t});\n\t}\n\tstatic checkForm(form: HTMLFormElement): boolean\n\t{\n\t\tif (String(form.elements[\"text\"].value).trim().length <= 0)\n\t\t{\n\t\t\tform.elements[\"text\"].classList.add('menu-form-input-error');\n\t\t\tform.elements[\"text\"].focus();\n\t\t\treturn false;\n\t\t}\n\t\tif (form.elements[\"link\"])\n\t\t{\n\t\t\tif (String(form.elements[\"link\"].value).trim().length <= 0 ||\n\t\t\t\tUtils.refineUrl(form.elements[\"link\"].value).length <= 0)\n\t\t\t{\n\t\t\t\tform.elements[\"link\"].classList.add('menu-form-input-error');\n\t\t\t\tform.elements[\"link\"].focus();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tform.elements[\"link\"].value = Utils.refineUrl(form.elements[\"link\"].value);\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tstatic showForm(bindElement, itemInfo, resolve, reject)\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tconst isEditMode = itemInfo.id !== '';\n\t\tconst form = Tag.render`\n<form name=\"menuAddToFavoriteForm\">\n\t<input type=\"hidden\" name=\"id\" value=\"${Text.encode(itemInfo.id || '')}\">\n\t<label for=\"menuPageToFavoriteName\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_ITEM_NAME\")}</label>\n\t<input name=\"text\" type=\"text\" id=\"menuPageToFavoriteName\" class=\"menu-form-input\" value=\"${Text.encode(itemInfo.text || '')}\" >\n\t${itemInfo['link'] !== undefined ? `<br><br>\n\t<label for=\"menuPageToFavoriteLink\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_ITEM_LINK\")}</label>\n\t<input name=\"link\" id=\"menuPageToFavoriteLink\" type=\"text\" class=\"menu-form-input\" value=\"${Text.encode(itemInfo.link)}\" >` : ''}\n\t${itemInfo['openInNewPage'] !== undefined ? `<br><br>\n\t<input name=\"openInNewPage\" id=\"menuOpenInNewPage\" type=\"checkbox\" value=\"Y\" ${itemInfo.openInNewPage === 'Y' ? 'checked' : ''} >\n\t<label for=\"menuOpenInNewPage\" class=\"menu-form-label\">${Loc.getMessage(\"MENU_OPEN_IN_NEW_PAGE\")}</label>` : ''}\n</form>`;\n\t\tObject.keys(itemInfo)\n\t\t\t.forEach((key) => {\n\t\t\t\tif (['id', 'text', 'link', 'openInNewPage'].indexOf(key) < 0)\n\t\t\t\t{\n\t\t\t\t\tconst name = Text.encode(key);\n\t\t\t\t\tconst value = Text.encode(itemInfo[key]);\n\t\t\t\t\tform.appendChild(\n\t\t\t\t\t\tTag.render`<input type=\"hidden\" name=\"${name}\" value=\"${value}\">`\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tthis.popup = PopupManager.create('menu-self-item-popup', bindElement, {\n\t\t\tclassName: 'menu-self-item-popup',\n\t\t\ttitleBar: (itemInfo['link'] === undefined ? Loc.getMessage(\"MENU_RENAME_ITEM\") : (\n\t\t\t\tisEditMode ? Loc.getMessage(\"MENU_EDIT_SELF_PAGE\") : Loc.getMessage(\"MENU_ADD_SELF_PAGE\")\n\t\t\t)),\n\t\t\toffsetTop: 1,\n\t\t\toffsetLeft: 20,\n\t\t\tcacheable: false,\n\t\t\tcloseIcon: true,\n\t\t\tlightShadow: true,\n\t\t\tdraggable: {restrict: true},\n\t\t\tcloseByEsc: true,\n\t\t\tcontent: form,\n\t\t\tbuttons: [\n\t\t\t\tnew SaveButton({ onclick: () => {\n\t\t\t\t\t\tif (this.checkForm(form))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst itemInfoToSave = {};\n\t\t\t\t\t\t\t[...form.elements].forEach((node) => {\n\t\t\t\t\t\t\t\titemInfoToSave[node.name] = node.value;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (form.elements['openInNewPage'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemInfoToSave['openInNewPage'] = form.elements[\"openInNewPage\"].checked ? 'Y' : 'N';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis\n\t\t\t\t\t\t\t\t.backendSaveItem(itemInfoToSave)\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\tresolve(itemInfoToSave);\n\t\t\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(Utils.catchError);\n\t\t\t\t\t\t}\n\t\t\t\t\t} } ),\n\t\t\t\tnew CancelButton({ onclick: () => { this.popup.close();} }),\n\t\t\t]\n\t\t});\n\t\tthis.popup.show();\n\t}\n\t//endregion\n}\n\nfunction areUrlsEqual(url, currentUri: Uri)\n{\n\tconst checkedUri = new Uri(url);\n\tconst checkedUrlBrief = checkedUri.getPath().replace('/index.php', '').replace('/index.html', '');\n\n\tconst currentUrlBrief = currentUri.getPath().replace('/index.php', '').replace('/index.html', '');\n\n\tif (\n\t\tcheckedUri.getHost() !== ''\n\t\t&&\n\t\tcheckedUri.getHost() !== currentUri.getHost()\n\t)\n\t{\n\t\treturn false;\n\t}\n\tif (currentUrlBrief.indexOf(checkedUrlBrief) !== 0)\n\t{\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction getShortName(name)\n{\n\tif (!Type.isStringFilled(name))\n\t{\n\t\treturn \"...\";\n\t}\n\n\tname = name.replace(/['`\".,:;~|{}*^$#@&+\\-=?!()[\\]<>\\n\\r]+/g, \"\").trim();\n\tif (name.length <= 0)\n\t{\n\t\treturn '...';\n\t}\n\n\tlet shortName;\n\tlet words = name.split(/[\\s,]+/);\n\tif (words.length <= 1)\n\t{\n\t\tshortName = name.substring(0, 1);\n\t}\n\telse if (words.length === 2)\n\t{\n\t\tshortName = words[0].substring(0, 1) + words[1].substring(0, 1);\n\t}\n\telse\n\t{\n\t\tlet firstWord = words[0];\n\t\tlet secondWord = words[1];\n\n\t\tfor (let i = 1; i < words.length; i++)\n\t\t{\n\t\t\tif (words[i].length > 3)\n\t\t\t{\n\t\t\t\tsecondWord = words[i];\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tshortName = firstWord.substring(0, 1) + secondWord.substring(0, 1);\n\t}\n\n\treturn shortName.toUpperCase();\n}\n","import {Loc, Text, Tag} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {PopupManager} from 'main.popup'\nimport Item from './item';\nimport Utils from '../utils';\nimport Backend from '../backend';\nimport Options from \"../options\";\nimport ItemAdminShared from \"./item-admin-shared\";\n\nexport default class ItemUserFavorites extends Item\n{\n\tstatic code = 'standard';\n\tstatic #currentPageInTopMenu = null;\n\n\tcanDelete(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tdelete()\n\t{\n\t\tBackend\n\t\t\t.deleteFavoritesItemMenu({id: this.getId(), storage: this.storage})\n\t\t\t.then(() => {\n\t\t\t\tthis.destroy();\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t\tconst context = this.getSimilarToUrl(\n\t\t\t\t\tUtils.getCurUri()\n\t\t\t\t).length > 0 ? window : {'doesnotmatter': ''};\n\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [{id: this.getId()}, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: false,\n\t\t\t\t\tcontext: context\n\t\t\t\t}]);\n\t\t\t});\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst contextMenuItems = [];\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_RENAME_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError);\n\t\t\t}\n\t\t});\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_REMOVE_STANDARD_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.delete();\n\t\t\t}\n\t\t});\n\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_ITEM_TO_ALL\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tconst itemLinkNode = this.container.querySelector('a');\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.addAdminSharedItemMenu({\n\t\t\t\t\t\t\tid: this.getId(),\n\t\t\t\t\t\t\tlink: this.links[0],\n\t\t\t\t\t\t\ttext: this.getName(),\n\t\t\t\t\t\t\tcounterId: this.container.dataset.counterId,\n\t\t\t\t\t\t\topenInNewPage: itemLinkNode && itemLinkNode.getAttribute(\"target\") === \"_blank\" ? \"Y\" : \"N\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_ADDED_TO_ALL'));\n\t\t\t\t\t\t\tthis.container.dataset.type = ItemAdminShared.code;\n\t\t\t\t\t\t\tthis.storage.push(ItemUserFavorites.code);\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n\n\tstatic backendSaveItem(itemInfoToSave): Promise\n\t{\n\t\treturn Backend.updateFavoritesItemMenu(itemInfoToSave);\n\t}\n\n\tstatic getActiveTopMenuItem()\n\t{\n\t\tif (this.#currentPageInTopMenu)\n\t\t{\n\t\t\treturn this.#currentPageInTopMenu;\n\t\t}\n\n\t\tif (!BX.Main\n\t\t\t|| !BX.Main.interfaceButtonsManager)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst firstTopMenuInstance = Array.from(\n\t\t\tObject.values(\n\t\t\t\tBX.Main.interfaceButtonsManager\n\t\t\t\t\t.getObjects()\n\t\t\t)\n\t\t).shift();\n\n\t\tif (firstTopMenuInstance)\n\t\t{\n\t\t\tconst topMenuItem = firstTopMenuInstance.getActive();\n\n\t\t\tif (topMenuItem && typeof topMenuItem === \"object\")\n\t\t\t{\n\t\t\t\tconst link = document.createElement(\"a\");\n\t\t\t\tlink.href = topMenuItem['URL'];\n\t\t\t\t//IE11 omits slash in the pathname\n\t\t\t\tconst path = link.pathname[0] !== \"/\" ? (\"/\" + link.pathname) : link.pathname;\n\n\t\t\t\tthis.#currentPageInTopMenu = {\n\t\t\t\t\tID: topMenuItem['ID'] || null,\n\t\t\t\t\tNODE: topMenuItem['NODE'] || null,\n\t\t\t\t\tURL: path + link.search,\n\t\t\t\t\tTEXT: topMenuItem['TEXT'],\n\t\t\t\t\tDATA_ID: topMenuItem['DATA_ID'],\n\t\t\t\t\tCOUNTER_ID: topMenuItem['COUNTER_ID'],\n\t\t\t\t\tCOUNTER: topMenuItem['COUNTER'],\n\t\t\t\t\tSUB_LINK: topMenuItem['SUB_LINK'],\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn this.#currentPageInTopMenu;\n\t}\n\n\tstatic isCurrentPageStandard(topMenuPoint): boolean\n\t{\n\t\tif (topMenuPoint && topMenuPoint['URL'])\n\t\t{\n\t\t\tconst currentFullPath = document.location.pathname + document.location.search;\n\t\t\treturn topMenuPoint.URL === currentFullPath && topMenuPoint.URL.indexOf('workgroups') < 0;\n\t\t}\n\t\treturn false;\n\t}\n\n\tstatic saveCurrentPage({pageTitle, pageLink})\n\t{\n\t\tconst topMenuPoint = this.getActiveTopMenuItem();\n\t\tlet itemInfo, startX, startY;\n\n\t\tif (topMenuPoint\n\t\t\t&& topMenuPoint.NODE\n\t\t\t&& this.isCurrentPageStandard(topMenuPoint)\n\t\t\t&& (pageLink === Utils.getCurPage() || pageLink === topMenuPoint.URL || !pageLink)\n\t\t)\n\t\t{\n\t\t\tconst menuNodeCoord = topMenuPoint.NODE.getBoundingClientRect();\n\t\t\tstartX = menuNodeCoord.left;\n\t\t\tstartY = menuNodeCoord.top;\n\n\t\t\titemInfo = {\n\t\t\t\tid: topMenuPoint.DATA_ID,\n\t\t\t\ttext: pageTitle || topMenuPoint.TEXT,\n\t\t\t\tlink: Utils.getCurPage() || topMenuPoint.URL,\n\t\t\t\tcounterId: topMenuPoint.COUNTER_ID,\n\t\t\t\tcounterValue: topMenuPoint.COUNTER,\n\t\t\t\tisStandardItem: true,\n\t\t\t\tsubLink: topMenuPoint.SUB_LINK\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\titemInfo = {\n\t\t\t\ttext: pageTitle || document.getElementById('pagetitle').innerText,\n\t\t\t\tlink: pageLink || Utils.getCurPage(),\n\t\t\t\tisStandardItem: pageLink === Utils.getCurPage()\n\t\t\t};\n\t\t\tconst titleCoord = BX(\"pagetitle\").getBoundingClientRect();\n\t\t\tstartX = titleCoord.left;\n\t\t\tstartY = titleCoord.top\n\t\t}\n\n\t\treturn Backend\n\t\t\t.addFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data: {itemId}}) => {\n\t\t\t\titemInfo.id = itemId;\n\t\t\t\titemInfo.topMenuId = itemInfo.id;\n\t\t\t\treturn {node: this.createNode(itemInfo), animateFromPoint: {startX, startY}, itemInfo: itemInfo};\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic deleteCurrentPage({pageLink})\n\t{\n\t\tconst topPoint = this.getActiveTopMenuItem();\n\n\t\tvar itemInfo = {}, startX, startY;\n\n\t\tif (topPoint && this.isCurrentPageStandard(topPoint))\n\t\t{\n\t\t\titemInfo['id'] = topPoint.DATA_ID;\n\n\t\t\tconst menuNodeCoord = topPoint.NODE.getBoundingClientRect();\n\t\t\tstartX = menuNodeCoord.left;\n\t\t\tstartY = menuNodeCoord.top;\n\t\t}\n\t\telse\n\t\t{\n\t\t\titemInfo['link'] = pageLink || Utils.getCurPage();\n\t\t\tconst titleCoord = BX(\"pagetitle\").getBoundingClientRect();\n\t\t\tstartX = titleCoord.left;\n\t\t\tstartY = titleCoord.top\n\t\t}\n\t\treturn Backend\n\t\t\t.deleteFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data}) => {\n\t\t\t\tif (!itemInfo.id && data && data['itemId'])\n\t\t\t\t{\n\t\t\t\t\titemInfo.id = data['itemId'];\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), {id: itemInfo.id});\n\t\t\t\treturn {itemInfo: itemInfo, animateToPoint: {startX, startY}};\n\t\t\t});\n\t}\n\n\tstatic saveStandardPage({DATA_ID, TEXT, SUB_LINK, COUNTER_ID, COUNTER, NODE, URL})\n\t{\n\t\tconst itemInfo = {\n\t\t\tid: DATA_ID,\n\t\t\ttext: TEXT,\n\t\t\tlink: URL,\n\t\t\tsubLink: SUB_LINK,\n\t\t\tcounterId: COUNTER_ID,\n\t\t\tcounterValue: COUNTER\n\t\t};\n\n\t\tconst pos = NODE.getBoundingClientRect();\n\t\tconst startX = pos.left;\n\t\tconst startY = pos.top\n\t\treturn Backend\n\t\t\t.addFavoritesItemMenu(itemInfo)\n\t\t\t.then(({data: {itemId}}) => {\n\t\t\t\titemInfo.id = itemId;\n\t\t\t\titemInfo.topMenuId = itemInfo.id;\n\n\t\t\t\tconst topPoint = this.getActiveTopMenuItem();\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemAdded\", [itemInfo, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: true,\n\t\t\t\t\tcontext: topPoint && topPoint.DATA_ID === DATA_ID ? window : null,\n\t\t\t\t}]);\n\n\t\t\t\treturn {node: this.createNode(itemInfo), animateFromPoint: {startX, startY}};\n\t\t\t})\n\t\t;\n\t}\n\n\tstatic deleteStandardPage({DATA_ID})\n\t{\n\t\tconst itemInfo = {id: DATA_ID};\n\t\treturn Backend\n\t\t\t.deleteFavoritesItemMenu(itemInfo)\n\t\t\t.then(() => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, Options.eventName('onItemDeleteAsFavorites'), {id: itemInfo.id});\n\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [itemInfo, this]);\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\tisActive: false,\n\t\t\t\t}]);\n\t\t\t\treturn {itemInfo: itemInfo};\n\t\t\t});\n\t}\n}\n","import {Loc, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport {MessageBox} from 'ui.dialogs.messagebox';\nimport ItemUserFavorites from \"./item-user-favorites\";\nimport ItemAdminShared from \"./item-admin-shared\";\n\nexport default class ItemUserSelf extends Item\n{\n\tstatic code = 'self';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tdelete()\n\t{\n\t\treturn Backend\n\t\t\t.deleteSelfITem(this.getId())\n\t\t\t.then(() => {\n\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t})\n\t\t\t.catch(this.showError)\n\t\t;\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst contextMenuItems = [];\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_EDIT_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError);\n\t\t\t}\n\t\t});\n\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage('MENU_DELETE_SELF_ITEM'),\n\t\t\tonclick: () => {\n\t\t\t\tMessageBox.confirm(\n\t\t\t\t\tLoc.getMessage('MENU_DELETE_SELF_ITEM_CONFIRM'),\n\t\t\t\t\tLoc.getMessage('MENU_DELETE_SELF_ITEM'),\n\t\t\t\t\t(messageBox) => {\n\t\t\t\t\t\tthis.delete();\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t\tLoc.getMessage('MENU_DELETE'),\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_ITEM_TO_ALL\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tconst itemLinkNode = this.container.querySelector('a');\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.addAdminSharedItemMenu({\n\t\t\t\t\t\t\tid: this.getId(),\n\t\t\t\t\t\t\tlink: this.links[0],\n\t\t\t\t\t\t\ttext: this.getName(),\n\t\t\t\t\t\t\tcounterId: this.container.dataset.counterId,\n\t\t\t\t\t\t\topenInNewPage: itemLinkNode && itemLinkNode.getAttribute(\"target\") === \"_blank\" ? \"Y\" : \"N\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_ADDED_TO_ALL'));\n\t\t\t\t\t\t\tthis.container.dataset.type = ItemAdminShared.code;\n\t\t\t\t\t\t\tthis.storage.push(ItemUserSelf.code);\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n\n\tgetEditFields(): Object\n\t{\n\t\treturn {id: this.getId(), text: this.getName(), link: this.links[0],  openInNewPage: this.container.getAttribute('data-new-page')};\n\t}\n\n\tstatic backendSaveItem(itemInfo): Promise\n\t{\n\t\treturn Backend.saveSelfItemMenu(itemInfo)\n\t\t\t.then(({data}) => {\n\t\t\t\tif (data && data['itemId'])\n\t\t\t\t{\n\t\t\t\t\titemInfo.id = data['itemId'];\n\t\t\t\t}\n\t\t\t\treturn itemInfo;\n\t\t\t});\n\t}\n\n\tstatic showAdd(bindElement)\n\t{\n\t\treturn new Promise((resolve1, reject2) => {\n\t\t\tthis.showForm(\n\t\t\t\tbindElement,\n\t\t\t\t{id: 0, name: '', link: '', openInNewPage: 'Y'},\n\t\t\t\tresolve1, reject2\n\t\t\t)\n\t\t})\n\t\t.then((itemInfo) => {\n\t\t\treturn {node: this.createNode(itemInfo)}\n\t\t});\n\t}\n}\n\n","import {Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport ItemUserFavorites from \"./item-user-favorites\";\nimport ItemUserSelf from \"./item-user-self\";\nimport Utils from \"../utils\";\n\nexport default class ItemAdminShared extends Item\n{\n\tstatic code = 'admin';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn this.container.dataset.deletePerm === 'Y';\n\t}\n\n\tdelete()\n\t{\n\t\tBackend\n\t\t\t.deleteAdminSharedItemMenu(this.getId())\n\t\t\t.then(() => {\n\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t}\n\t\t\t\tif (this.storage.indexOf(ItemUserSelf.code) >= 0)\n\t\t\t\t{\n\t\t\t\t\tBackend.deleteSelfITem(this.getId());\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t})\n\t\t\t.catch(this.showError)\n\t\t;\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tif (!this.canDelete())\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tconst contextMenuItems = [];\n/*\t\tcontextMenuItems.push({\n\t\t\ttext: Loc.getMessage(\"MENU_RENAME_ITEM\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.constructor\n\t\t\t\t\t.showUpdate(this)\n\t\t\t\t\t.then(this.update.bind(this))\n\t\t\t\t\t.catch(this.showError.bind(this));\n\t\t\t}\n\t\t});\n*/\n\n\t\tif (this.storage.filter((value) => {return value === ItemUserFavorites.code || value === ItemUserSelf.code;}).length > 0)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_REMOVE_STANDARD_ITEM'),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage('MENU_DELETE_CUSTOM_ITEM_FROM_ALL'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tBackend\n\t\t\t\t\t\t.deleteAdminSharedItemMenu(this.getId())\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.showMessage(Loc.getMessage('MENU_ITEM_WAS_DELETED_FROM_ALL'));\n\t\t\t\t\t\t\tconst codeToConvert = this.storage.indexOf(ItemUserSelf.code) >= 0 ? ItemUserSelf.code : ItemUserFavorites.code;\n\t\t\t\t\t\t\tthis.container.dataset.type = codeToConvert;\n\t\t\t\t\t\t\tthis.container.dataset.storage = this.storage.filter((v) => {return v !== codeToConvert}).join(',');\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemConvert'), this);\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.catch(this.showError);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_CUSTOM_ITEM_FROM_ALL\"),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t}\n\t\treturn contextMenuItems;\n\t}\n}","import {Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport Item from './item';\nimport Backend from \"../backend\";\nimport Options from \"../options\";\nimport ItemUserFavorites from \"./item-user-favorites\";\n\nexport default class ItemAdminCustom extends Item\n{\n\tstatic code = 'custom';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn this.container.dataset.deletePerm === 'Y';\n\t}\n\n\tdelete()\n\t{\n\t\tif (this.canDelete())\n\t\t{\n\t\t\tBackend\n\t\t\t\t.deleteCustomItem(this.getId())\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.storage.indexOf(ItemUserFavorites.code) >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tBackend.deleteFavoritesItemMenu({id: this.getId()});\n\t\t\t\t\t}\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onItemDelete'), {animate: true});\n\t\t\t\t})\n\t\t\t\t.catch(this.showError)\n\t\t\t;\n\t\t}\n\t}\n\n\tgetDropDownActions(): Array\n\t{\n\t\tconst actions = [];\n\t\tif (this.canDelete())\n\t\t{\n\t\t\tactions.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_ITEM_FROM_ALL\"),\n\t\t\t\tonclick: this.delete.bind(this)\n\t\t\t});\n\t\t}\n\t\treturn actions;\n\t}\n}","import {Uri, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.event';\nimport Item from './item';\n\nexport default class ItemSystem extends Item\n{\n\tstatic code = 'default';\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n}\n","import Item from './item';\nimport Backend from '../backend';\nimport {Dom} from \"main.core\";\n\nexport default class ItemGroup extends Item\n{\n\tstatic code = 'group';\n\tgroupContainer: Element;\n\n\tconstructor()\n\t{\n\t\tsuper(...arguments);\n\t\tthis.container.addEventListener('click', this.toggleAndSave.bind(this), true);\n\t\tthis.container.addEventListener('mouseleave', () => {\n\t\t\tDom.removeClass(this.container, 'menu-item-group-actioned');\n\t\t});\n\t\tthis.groupContainer = this.container.parentNode.querySelector(`[data-group-id=\"${this.getId()}\"]`);\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t{\n\t\t\tthis.groupContainer.style.display = 'none';\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.updateCounter();\n\t\t}, 0);\n\t}\n\n\ttoggleAndSave(event)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t{\n\t\t\tBackend.expandGroup(this.getId());\n\t\t\tthis\n\t\t\t\t.expand()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.container.setAttribute('data-collapse-mode', 'expanded');\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBackend.collapseGroup(this.getId());\n\t\t\tthis\n\t\t\t\t.collapse()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.container.setAttribute('data-collapse-mode', 'collapsed');\n\t\t\t\t});\n\t\t}\n\t\treturn false;\n\t}\n\n\tcheckAndCorrect(): ItemGroup\n\t{\n\t\tconst groupContainer = this.groupContainer;\n\n\t\tif (groupContainer.parentNode === this.container)\n\t\t{\n\t\t\tDom.insertAfter(groupContainer, this.container);\n\t\t}\n\t\t[...groupContainer\n\t\t\t.querySelectorAll(`.menu-item-block`)\n\t\t].forEach((node) => {\n\t\t\tnode.setAttribute('data-status', this.container.getAttribute(\"data-status\"));\n\t\t});\n\t\treturn this;\n\t}\n\n\t#collapsingAnimation;\n\tcollapse(hideGroupContainer): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst groupContainer = this.groupContainer;\n\n\t\t\tif (this.#collapsingAnimation)\n\t\t\t{\n\t\t\t\tthis.#collapsingAnimation.stop();\n\t\t\t}\n\n\t\t\tgroupContainer.style.overflow = 'hidden';\n\t\t\tDom.addClass(this.container, 'menu-item-group-collapsing');\n\t\t\tDom.addClass(this.container, 'menu-item-group-actioned');\n\t\t\tDom.addClass(groupContainer, 'menu-item-group-collapsing');\n\t\t\tconst slideParams = {\n\t\t\t\theight: groupContainer.offsetHeight,\n\t\t\t\tdisplay: groupContainer.style.display\n\t\t\t};\n\n\t\t\tthis.#collapsingAnimation = (new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {height: slideParams.height, opacity: 100},\n\t\t\t\tfinish: {height: 0, opacity: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tgroupContainer.style.height = state.height + 'px';\n\t\t\t\t\tgroupContainer.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tgroupContainer.style.display = 'none';\n\t\t\t\t\tgroupContainer.style.opacity = 'auto';\n\t\t\t\t\tgroupContainer.style.height = 'auto';\n\n\t\t\t\t\tif (this.container.getAttribute('data-contains-active-item') === 'Y')\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.container, 'menu-item-active');\n\t\t\t\t\t}\n\t\t\t\t\tDom.removeClass(this.container, 'menu-item-group-collapsing');\n\t\t\t\t\tDom.removeClass(groupContainer, 'menu-item-group-collapsing');\n\t\t\t\t\tthis.#collapsingAnimation = null;\n\t\t\t\t\tif (hideGroupContainer === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.container.appendChild(groupContainer);\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.#collapsingAnimation.animate();\n\t\t});\n\t}\n\n\texpand(checkAttribute): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst container = this.container;\n\t\t\tconst groupContainer = this.groupContainer;\n\n\t\t\tif (checkAttribute === true\n\t\t\t\t&& container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t{\n\t\t\t\treturn resolve();\n\t\t\t}\n\t\t\tconst contentHeight = groupContainer.querySelectorAll('li').length * container.offsetHeight;\n\t\t\tDom.addClass(container, 'menu-item-group-expanding');\n\t\t\tDom.addClass(container, 'menu-item-group-actioned');\n\t\t\tDom.addClass(groupContainer, 'menu-item-group-expanding');\n\n\t\t\tif (groupContainer.parentNode === this.container)\n\t\t\t{\n\t\t\t\tDom.insertAfter(groupContainer, this.container);\n\t\t\t}\n\n\t\t\tgroupContainer.style.display = 'block';\n\t\t\tthis.#collapsingAnimation = (new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {height: 0, opacity: 0},\n\t\t\t\tfinish: {height: contentHeight, opacity: 100},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tgroupContainer.style.height = state.height + 'px';\n\t\t\t\t\tgroupContainer.style.opacity = state.opacity / 100;\n\t\t\t\t},\n\t\t\t\tcomplete: function () {\n\t\t\t\t\tDom.removeClass(container, 'menu-item-group-expanding menu-item-active');\n\t\t\t\t\tDom.removeClass(groupContainer, 'menu-item-group-expanding');\n\t\t\t\t\tgroupContainer.style.height = 'auto';\n\t\t\t\t\tgroupContainer.style.opacity = 'auto';\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.#collapsingAnimation.animate();\n\t\t});\n\t}\n\n\tcanDelete(): boolean\n\t{\n\t\treturn false;\n\t}\n\n\tupdateCounter()\n\t{\n\t\tlet counterValue = 0;\n\t\t[...this.container\n\t\t\t.parentNode\n\t\t\t.querySelector(`[data-group-id=\"${this.getId()}\"]`)\n\t\t\t.querySelectorAll('[data-role=\"counter\"]')]\n\t\t\t.forEach((node) => {\n\t\t\t\tcounterValue += parseInt(node.dataset.counterValue);\n\t\t\t});\n\t\tconst node = this.container.querySelector('[data-role=\"counter\"]');\n\n\t\tif (counterValue > 0)\n\t\t{\n\t\t\tnode.innerHTML = (counterValue > 99 ? '99+' : counterValue);\n\t\t\tthis.container.classList.add('menu-item-with-index');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.innerHTML = '';\n\t\t\tthis.container.classList.remove('menu-item-with-index');\n\t\t}\n\t}\n\n\tmarkAsActive()\n\t{\n\t\tthis.container.setAttribute('data-contains-active-item', 'Y');\n\t\tif (this.container.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\tDom.addClass(this.container, 'menu-item-active');\n\t}\n\n\tmarkAsInactive()\n\t{\n\t\tthis.container.removeAttribute('data-contains-active-item');\n\t\tDom.removeClass(this.container, 'menu-item-active');\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.container.getAttribute('data-contains-active-item') === 'Y';\n\t}\n\n\tstatic detect(node)\n\t{\n\t\treturn node.getAttribute(\"data-role\") === 'group' &&\n\t\t\tnode.getAttribute(\"data-type\") === this.code;\n\t}\n}\n","import {Uri, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.event';\nimport ItemGroup from './item-group';\n\nexport default class ItemGroupSystem extends ItemGroup\n{\n\tconstructor() {\n\t\tsuper(...arguments);\n\n\t\tthis.container\n\t\t\t.querySelector('[data-role=\"item-edit-control\"]')\n\t\t\t.style.display = 'none';\n\t}\n\tstatic code = 'system_group';\n}\n","import Item from './item';\nimport ItemAdminShared from './item-admin-shared';\nimport ItemAdminCustom from './item-admin-custom';\nimport ItemUserFavorites from './item-user-favorites';\nimport ItemUserSelf from './item-user-self';\nimport ItemSystem from './item-system';\nimport ItemGroup from './item-group';\nimport ItemGroupSystem from './item-group-system';\n\nconst itemMappings = [\n\tItem,\n\tItemAdminShared,\n\tItemUserFavorites,\n\tItemAdminCustom,\n\tItemUserSelf,\n\tItemSystem,\n\tItemGroup,\n\tItemGroupSystem,\n];\n\nexport default function getItem(itemData): Item\n{\n\tlet itemClassName = Item;\n\titemMappings.forEach((itemClass) => {\n\t\tif (itemClass.detect(itemData))\n\t\t{\n\t\t\titemClassName = itemClass;\n\t\t}\n\t});\n\treturn itemClassName;\n}","import {Runtime, Uri} from 'main.core';\nimport Item from './item'\nimport ItemSystem from './item-system'\ntype ActiveLink = {\n\tpriority: number,\n\turl: string,\n\turi: Uri\n};\nexport default class ItemActive\n{\n\titem: ?Item;\n\t#link: ?ActiveLink;\n\t#actualLink: Uri;\n\n\tconstructor()\n\t{\n\t\tthis.highlight = Runtime.debounce(this.highlight, 200, this);\n\t\tthis.#actualLink = new Uri(window.location.href);\n\t}\n\n\tcheckAndSet(item: Item, links: Array): boolean\n\t{\n\t\t/*\n\t\tCustom items have more priority than standard items.\n\t\tExample:\n\t\t\tCalendar (standard item)\n\t\t\t\tdata-link=\"/company/personal/user/1/calendar/\"\n\t\t\t\tdata-all-links=\"/company/personal/user/1/calendar/,/calendar/\n\n\t\t\tCompany Calendar (custom item)\n\t\t\t\t data-link=\"/calendar/\"\n\n\t\tWe've got two items with the identical link /calendar/'.\n\t\t*/\n\t\tif (item === this.item)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet theMostOfTheLinks = this.#link;\n\t\tlinks.forEach((link) => {\n\t\t\tconst linkUri = new Uri(link.url);\n\t\t\tlet changeActiveItem = false;\n\t\t\tif (!theMostOfTheLinks\n\t\t\t\t||\n\t\t\t\ttheMostOfTheLinks.uri.getPath().length < linkUri.getPath().length)\n\t\t\t{\n\t\t\t\tchangeActiveItem = true;\n\t\t\t}\n\t\t\telse if (theMostOfTheLinks.uri.getPath().length === linkUri.getPath().length)\n\t\t\t{\n\t\t\t\tconst actualParams = this.#actualLink.getQueryParams();\n\t\t\t\tconst maxCount = Object.keys(actualParams).length;\n\t\t\t\tconst theMostOfTheLinkServiceData = {\n\t\t\t\t\tparams: theMostOfTheLinks.uri.getQueryParams(),\n\t\t\t\t\tmismatches: maxCount\n\t\t\t\t};\n\t\t\t\tconst comparedLinkParams = {\n\t\t\t\t\tparams: linkUri.getQueryParams(),\n\t\t\t\t\tmismatches: maxCount\n\t\t\t\t};\n\t\t\t\tArray.from(\n\t\t\t\t\tObject.keys(actualParams)\n\t\t\t\t).forEach((key) => {\n\t\t\t\t\tif (String(actualParams[key]) === String(theMostOfTheLinkServiceData.params[key]))\n\t\t\t\t\t{\n\t\t\t\t\t\ttheMostOfTheLinkServiceData.mismatches--;\n\t\t\t\t\t}\n\t\t\t\t\tif (String(actualParams[key]) === String(comparedLinkParams.params[key]))\n\t\t\t\t\t{\n\t\t\t\t\t\tcomparedLinkParams.mismatches--;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (link.priority > 0 && item instanceof ItemSystem)\n\t\t\t\t{\n\t\t\t\t\tlink.priority += 1;\n\t\t\t\t}\n\n\t\t\t\tif (theMostOfTheLinkServiceData.mismatches > comparedLinkParams.mismatches\n\t\t\t\t\t|| theMostOfTheLinks.priority < link.priority)\n\t\t\t\t{\n\t\t\t\t\tchangeActiveItem = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (changeActiveItem)\n\t\t\t{\n\t\t\t\ttheMostOfTheLinks = {\n\t\t\t\t\tpriority: link.priority,\n\t\t\t\t\turl: link.url,\n\t\t\t\t\turi: linkUri,\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tif (theMostOfTheLinks !== this.#link)\n\t\t{\n\t\t\tif (this.item)\n\t\t\t{\n\t\t\t\tthis.unhighlight(this.item);\n\t\t\t}\n\t\t\tthis.#link = theMostOfTheLinks;\n\t\t\tthis.item = item;\n\n\t\t\tthis.highlight();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tcheckAndUnset(item: Item)\n\t{\n\t\tif (item instanceof Item && item === this.item)\n\t\t{\n\t\t\tthis.unhighlight(this.item);\n\t\t\tthis.item = null;\n\t\t\tthis.#link = null;\n\t\t}\n\t}\n\n\thighlight()\n\t{\n\t\tif (this.item)\n\t\t{\n\t\t\tthis.item.container.classList.add('menu-item-active');\n\n\t\t\tlet parent = this.item.container.closest('[data-role=\"group-content\"]');\n\t\t\tlet parentContainer;\n\t\t\twhile (parent)\n\t\t\t{\n\t\t\t\tparentContainer = parent.parentNode.querySelector(`[data-id=\"${parent.getAttribute('data-group-id')}\"]`);\n\t\t\t\tif (parentContainer)\n\t\t\t\t{\n\t\t\t\t\tparentContainer.setAttribute('data-contains-active-item', 'Y');\n\t\t\t\t\tif (parentContainer.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t\t\t{\n\t\t\t\t\t\tparentContainer.classList.add('menu-item-active');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tparent = parent.closest('[data-relo=\"group-content\"]');\n\t\t\t}\n\t\t}\n\t}\n\n\tunhighlight(item: ?Item): ?Item\n\t{\n\t\tif (!(item instanceof Item))\n\t\t{\n\t\t\titem = this.item;\n\t\t}\n\t\tif (item instanceof Item)\n\t\t{\n\t\t\titem.container.classList.remove('menu-item-active');\n\t\t\tlet parent = item.container.closest('[data-role=\"group-content\"]');\n\t\t\tlet parentContainer;\n\t\t\twhile (parent)\n\t\t\t{\n\t\t\t\tparentContainer = parent.parentNode.querySelector(`[data-id=\"${parent.getAttribute('data-group-id')}\"]`);\n\t\t\t\tif (parentContainer)\n\t\t\t\t{\n\t\t\t\t\tparentContainer.removeAttribute('data-contains-active-item');\n\t\t\t\t\tparentContainer.classList.remove('menu-item-active');\n\t\t\t\t}\n\t\t\t\tparent = parent.closest('[data-relo=\"group-content\"]');\n\t\t\t}\n\t\t\treturn item;\n\t\t}\n\t\treturn null;\n\t}\n}\n","import {Loc, Type, Dom, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport getItem from '../items/index';\nimport Item from '../items/item';\nimport ItemActive from '../items/item-active';\nimport ItemUserSelf from '../items/item-user-self';\nimport ItemUserFavorites from '../items/item-user-favorites';\nimport Options from \"../options\";\nimport DefaultController from \"./default-controller\";\nimport Utils from \"../utils\";\nimport Backend from \"../backend\";\nimport ItemAdminCustom from \"../items/item-admin-custom\";\nimport {Menu, MenuItem} from 'main.popup';\nimport ItemGroup from \"../items/item-group\";\n\nexport default class ItemsController extends DefaultController{\n\tparentContainer: Element;\n\tcontainer: Element;\n\thiddenContainer: Element;\n\titems: Map = new Map();\n\t#activeItem: ItemActive = new ItemActive;\n\t#isEditMode = false;\n\n\tconstructor(container, {events})\n\t{\n\t\tsuper(container, {events});\n\t\tthis.parentContainer = container;\n\t\tthis.container = container.querySelector(\".menu-items\");\n\n\t\tthis.hiddenContainer = container\n\t\t\t.querySelector('#left-menu-hidden-items-block');\n\n\t\tcontainer\n\t\t\t.querySelectorAll('li.menu-item-block')\n\t\t\t.forEach(this.registerItem.bind(this))\n\t\t;\n\t\tcontainer\n\t\t\t.querySelector('#left-menu-hidden-separator')\n\t\t\t.addEventListener('click', this.toggleHiddenContainer.bind(this))\n\t\t;\n\n\t\tif (this.getActiveItem()\n\t\t\t&& this.getActiveItem().container\n\t\t\t\t.getAttribute('data-status') === 'hide'\n\t\t)\n\t\t{\n\t\t\tthis.#showHiddenContainer(true);\n\t\t}\n\t}\n\n\tregisterItem(node): Item\n\t{\n\t\tconst itemClass = getItem(node);\n\t\tconst item = new itemClass(this.container, node);\n\t\tthis.items.set(item.getId(), item);\n\t\tthis.#registerDND(item);\n\n\t\tif (this.#activeItem.checkAndSet(\n\t\t\titem,\n\t\t\titem.getSimilarToUrl(\n\t\t\t\tUtils.getCurUri()\n\t\t\t)\n\t\t) === true)\n\t\t{\n\t\t\tlet parentItem = this.#getParentItemFor(item);\n\t\t\twhile (parentItem)\n\t\t\t{\n\t\t\t\tparentItem.markAsActive();\n\t\t\t\tparentItem = this.#getParentItemFor(parentItem);\n\t\t\t}\n\t\t}\n\n\t\tEventEmitter.subscribe(item, Options.eventName('onItemDelete'), ({data}) => {this.deleteItem(item, data)});\n\t\tEventEmitter.subscribe(item, Options.eventName('onItemConvert'), ({data}) => {this.convertItem(item, data)});\n\n\t\t[...item.container.querySelectorAll('a')]\n\t\t\t.forEach((node) => {\n\t\t\t\tnode.addEventListener('click', (event) => {\n\t\t\t\t\tif (this.#isEditMode === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}, true)\n\t\t\t})\n\t\t;\n\t\titem.container\n\t\t\t.querySelector('[data-role=\"item-edit-control\"]')\n\t\t\t.addEventListener('click', (event) => {\n\t\t\t\tthis.openItemMenu(item, event.target)\n\t\t\t});\n\t\treturn item;\n\t}\n\n\tunregisterItem(item: Item)\n\t{\n\t\tif (!this.items.has(item.getId()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.items.delete(item.getId());\n\n\t\tthis.#activeItem.checkAndUnset(\n\t\t\titem,\n\t\t\titem.getSimilarToUrl(\n\t\t\t\tUtils.getCurUri()\n\t\t\t)\n\t\t);\n\n\t\tEventEmitter.unsubscribeAll(item, Options.eventName('onItemDelete'));\n\t\tEventEmitter.unsubscribeAll(item, Options.eventName('onItemConvert'));\n\t\titem.container.parentNode.replaceChild(item.container.cloneNode(true), item.container);\n\t}\n\n\tget isEditMode()\n\t{\n\t\treturn this.#isEditMode;\n\t}\n\n\tswitchToEditMode()\n\t{\n\t\tif (this.#isEditMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isEditMode = true;\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('EditMode'),\n\t\t);\n\t}\n\n\tswitchToViewMode()\n\t{\n\t\tif (!this.#isEditMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isEditMode = false;\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('ViewMode'),\n\t\t);\n\t}\n\n\tisHiddenContainerVisible()\n\t{\n\t\treturn this.hiddenContainer.classList.contains('menu-item-favorites-more-open');\n\t}\n\n\ttoggleHiddenContainer(animate)\n\t{\n\t\tif (this.hiddenContainer.classList.contains('menu-item-favorites-more-open'))\n\t\t{\n\t\t\tthis.#hideHiddenContainer(animate);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#showHiddenContainer(animate);\n\t\t}\n\t}\n\n\t#showHiddenContainer(animate)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onHiddenBlockIsVisible')\n\t\t);\n\t\tif (animate === false)\n\t\t{\n\t\t\treturn this.hiddenContainer.classList.add('menu-item-favorites-more-open');\n\t\t}\n\n\t\tthis.hiddenContainer.style.height = \"0px\";\n\t\tthis.hiddenContainer.style.opacity = 0;\n\t\tthis.#animation(true, this.hiddenContainer, this.hiddenContainer.scrollHeight);\n\t}\n\n\t#hideHiddenContainer(animate)\n\t{\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onHiddenBlockIsHidden')\n\t\t);\n\t\tif (animate === false)\n\t\t{\n\t\t\treturn this.hiddenContainer.classList.remove('menu-item-favorites-more-open');\n\t\t}\n\t\tthis.#animation(false, this.hiddenContainer, this.hiddenContainer.offsetHeight);\n\t}\n\n\t#animation(opening, hiddenBlock, maxHeight)\n\t{\n\t\thiddenBlock.style.overflow = \"hidden\";\n\t\t(new BX.easing({\n\t\t\tduration: 200,\n\t\t\tstart: {opacity: opening ? 0 : 100, height: opening ? 0 : maxHeight},\n\t\t\tfinish: {opacity: opening ? 100 : 0, height: opening ? maxHeight : 0},\n\t\t\ttransition: BX.easing.transitions.linear,\n\t\t\tstep: function (state) {\n\t\t\t\thiddenBlock.style.opacity = state.opacity / 100;\n\t\t\t\thiddenBlock.style.height = state.height + \"px\";\n\t\t\t},\n\t\t\tcomplete: function () {\n\t\t\t\tif (opening)\n\t\t\t\t{\n\t\t\t\t\thiddenBlock.classList.add('menu-item-favorites-more-open');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thiddenBlock.classList.remove('menu-item-favorites-more-open');\n\t\t\t\t}\n\t\t\t\thiddenBlock.style.opacity = \"\";\n\t\t\t\thiddenBlock.style.overflow = \"\";\n\t\t\t\thiddenBlock.style.height = \"\";\n\t\t\t}\n\n\t\t})).animate();\n\t}\n\n\tsetItemAsAMainPage(item: Item)\n\t{\n\t\tconst node = item.container;\n\t\tnode.setAttribute(\"data-status\", \"show\");\n\t\tconst startTop = node.offsetTop;\n\t\tconst dragElement = Dom.create(\"div\", {\n\t\t\tattrs: {className: \"menu-draggable-wrap\"},\n\t\t\tstyle: {top: startTop}\n\t\t});\n\n\t\tconst insertBeforeElement = node.nextElementSibling;\n\t\tif (insertBeforeElement)\n\t\t{\n\t\t\tnode.parentNode.insertBefore(dragElement, insertBeforeElement);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnode.parentNode.appendChild(dragElement);\n\t\t}\n\n\t\tdragElement.appendChild(node);\n\n\t\tDom.addClass(node, \"menu-item-draggable\");\n\n\t\t(new BX.easing({\n\t\t\tduration: 500,\n\t\t\tstart: {top: startTop},\n\t\t\tfinish: {top: 0},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state) { dragElement.style.top = state.top + \"px\"; },\n\t\t\tcomplete: () => {\n\t\t\t\tthis.container.insertBefore(node, BX(\"left-menu-empty-item\").nextSibling);\n\t\t\t\tDom.removeClass(node, \"menu-item-draggable\");\n\t\t\t\tDom.remove(dragElement);\n\t\t\t\tthis.#saveItemsSort({\n\t\t\t\t\taction: 'mainPageIsSet',\n\t\t\t\t\titemId: item.getId()\n\t\t\t\t});\n\t\t\t}\n\t\t})).animate();\n\t}\n\n\tshowItem(item: Item)\n\t{\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tconst container = this.container;\n\n\t\titem.container.setAttribute('data-status', 'show');\n\t\tif (this.#canChangePaternity(item))\n\t\t{\n\t\t\tcontainer.appendChild(item.container);\n\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t}\n\t\telse if (oldParent)\n\t\t{\n\t\t\tcontainer.appendChild(oldParent.container);\n\t\t\toldParent.container.setAttribute('data-status', 'show');\n\t\t\tcontainer.appendChild(oldParent.groupContainer);\n\t\t}\n\n\t\tif (this.hiddenContainer.querySelector('.menu-item-block') === null)\n\t\t{\n\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsEmpty'));\n\t\t\tthis.#hideHiddenContainer(false);\n\t\t}\n\n\t\tthis.#recalculateCounters(item);\n\t\tthis.#saveItemsSort({\n\t\t\taction: 'showItem',\n\t\t\titemId: item.getId()\n\t\t});\n\t}\n\n\thideItem(item: Item)\n\t{\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tconst container = this.hiddenContainer.querySelector('#left-menu-hidden-items-list');\n\t\tconst emitEvent = container.querySelector('.menu-item-block') === null;\n\n\t\titem.container.setAttribute('data-status', 'hide');\n\t\tif (this.#canChangePaternity(item))\n\t\t{\n\t\t\tcontainer.appendChild(item.container);\n\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t}\n\t\telse if (oldParent)\n\t\t{\n\t\t\tcontainer.appendChild(oldParent.container);\n\t\t\toldParent.container.setAttribute('data-status', 'hide');\n\t\t\tcontainer.appendChild(oldParent.groupContainer);\n\t\t}\n\n\t\tif (emitEvent)\n\t\t{\n\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsNotEmpty'));\n\t\t}\n\n\t\tthis.#recalculateCounters(item);\n\n\t\tthis.#saveItemsSort({\n\t\t\taction: 'hideItem',\n\t\t\titemId: item.getId()\n\t\t});\n\t}\n\n\t#recalculateCounters(item: Item)\n\t{\n\t\tlet counterValue = 0;\n\t\tif (item.container.querySelector('[data-role=\"counter\"]'))\n\t\t{\n\t\t\tcounterValue = item.container.querySelector('[data-role=\"counter\"]').dataset.counterValue;\n\t\t}\n\t\tif (counterValue <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t[...this.items.entries()]\n\t\t\t.forEach(([id, itemGroup]) => {\n\t\t\t\tif (itemGroup instanceof ItemGroup)\n\t\t\t\t{\n\t\t\t\t\titemGroup.updateCounter();\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tlet hiddenCounterValue = 0;\n\t\t[...this.parentContainer\n\t\t\t.querySelectorAll(`.menu-item-block[data-status=\"hide\"][data-role='item']`)\n\t\t].forEach((node) => {\n\t\t\t\tconst counterNode = node.querySelector('[data-role=\"counter\"]');\n\t\t\t\tif (counterNode)\n\t\t\t\t{\n\t\t\t\t\thiddenCounterValue += parseInt(counterNode.dataset.counterValue);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tconst hiddenCounterNode = this.parentContainer.querySelector('#menu-hidden-counter');\n\t\thiddenCounterNode.dataset.counterValue = Math.max(0, hiddenCounterValue);\n\t\tif (hiddenCounterNode.dataset.counterValue > 0)\n\t\t{\n\t\t\thiddenCounterNode.classList.remove('menu-hidden-counter');\n\t\t\thiddenCounterNode.innerHTML = hiddenCounterNode.dataset.counterValue > 99 ? '99+' : hiddenCounterNode.dataset.counterValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\thiddenCounterNode.classList.add('menu-hidden-counter');\n\t\t\thiddenCounterNode.innerHTML = '';\n\t\t}\n\t}\n\n\t#refreshActivity(item: Item, oldParent:? ItemGroup)\n\t{\n\t\tif (this.getActiveItem() !== item)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst newParent = this.#getParentItemFor(item);\n\n\t\tif (oldParent !== newParent)\n\t\t{\n\t\t\tif (oldParent instanceof ItemGroup)\n\t\t\t{\n\t\t\t\toldParent.markAsInactive();\n\t\t\t}\n\t\t\tif (newParent instanceof ItemGroup)\n\t\t\t{\n\t\t\t\tnewParent.markAsActive();\n\t\t\t}\n\t\t}\n\t}\n\n\t#updateCountersLastValue = null\n\tupdateCounters(counters, send)\n\t{\n\t\tconst countersDynamic = {};\n\t\tsend = send !== false;\n\t\t[...Object.entries(counters)]\n\t\t\t.forEach(([counterId, counterValue]) => {\n\t\t\t\t[...this.#getItemsByCounterId(counterId)]\n\t\t\t\t\t.forEach((item) => {\n\t\t\t\t\t\tconst {oldValue, newValue} = item.updateCounter(counterValue);\n\t\t\t\t\t\tconst state = item.container.getAttribute('data-status');\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(counterId.indexOf('crm_') < 0 || counterId.indexOf('crm_all') >= 0)\n\t\t\t\t\t\t\t&&\n\t\t\t\t\t\t\t(counterId.indexOf('tasks_') < 0 || counterId.indexOf('tasks_total') >= 0)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcountersDynamic[state] = countersDynamic[state] || 0;\n\t\t\t\t\t\t\tcountersDynamic[state] += (newValue - oldValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet parentItem = this.#getParentItemFor(item);\n\t\t\t\t\t\twhile (parentItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparentItem.updateCounter();\n\t\t\t\t\t\t\tparentItem = this.#getParentItemFor(parentItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t;\n\n\t\t\t\tif (send)\n\t\t\t\t{\n\t\t\t\t\tBX.localStorage.set('lmc-' + counterId, counterValue, 5);\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\n\t\tif (countersDynamic['hide'] !== undefined && countersDynamic['hide'] !== 0)\n\t\t{\n\t\t\tconst hiddenCounterNode = this.parentContainer.querySelector('#menu-hidden-counter');\n\t\t\thiddenCounterNode.dataset.counterValue = Math.max(0, Number(hiddenCounterNode.dataset.counterValue) + Number(countersDynamic['hide']));\n\t\t\tif (hiddenCounterNode.dataset.counterValue > 0)\n\t\t\t{\n\t\t\t\thiddenCounterNode.classList.remove('menu-hidden-counter');\n\t\t\t\thiddenCounterNode.innerHTML = hiddenCounterNode.dataset.counterValue > 99 ? '99+' : hiddenCounterNode.dataset.counterValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thiddenCounterNode.classList.add('menu-hidden-counter');\n\t\t\t\thiddenCounterNode.innerHTML = '';\n\t\t\t}\n\t\t}\n\n\t\tif (typeof BXIM !== 'undefined')\n\t\t{\n\t\t\tif (this.#updateCountersLastValue === null)\n\t\t\t{\n\t\t\t\tthis.#updateCountersLastValue = 0;\n\t\t\t\t[...this.items.entries()]\n\t\t\t\t\t.forEach(([id, item]) => {\n\t\t\t\t\t\tif (item instanceof ItemGroup)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst res = item.getCounterValue();\n\n\t\t\t\t\t\tif (res > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet counterId = 'doesNotMatter';\n\t\t\t\t\t\t\tif (id.indexOf('menu_crm') >= 0 || id.indexOf('menu_tasks') >= 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst counterNode = item.container.querySelector('[data-role=\"counter\"]');\n\t\t\t\t\t\t\t\tif (counterNode)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcounterId = counterNode.id;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcounterId === 'doesNotMatter'\n\t\t\t\t\t\t\t\t|| counterId.indexOf('crm_all') >= 0\n\t\t\t\t\t\t\t\t|| counterId.indexOf('tasks_total') >= 0\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.#updateCountersLastValue += res;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#updateCountersLastValue += (countersDynamic['show'] !== undefined ? countersDynamic['show'] : 0);\n\t\t\t\tthis.#updateCountersLastValue += (countersDynamic['hide'] !== undefined ? countersDynamic['hide'] : 0);\n\t\t\t}\n\t\t\tconst visibleValue = (this.#updateCountersLastValue > 99 ? '99+' : (\n\t\t\t\tthis.#updateCountersLastValue < 0 ? '0' : this.#updateCountersLastValue\n\t\t\t));\n\t\t\tBXIM.desktop.setBrowserIconBadge(visibleValue);\n\t\t}\n\t}\n\n\tdecrementCounter(counters)\n\t{\n\t\t[...Object.entries(counters)]\n\t\t\t.forEach(([counterId, counterValue]) => {\n\t\t\t\tconst item = this.#getItemsByCounterId(counterId).shift();\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tconst value = item.getCounterValue();\n\t\t\t\t\tcounters[counterId] = value > counterValue ? (value - counterValue) : 0;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tdelete counters[counterId];\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t\tthis.updateCounters(counters, false);\n\t}\n\n\t#getItemsByCounterId(counterId: string)\n\t{\n\t\tconst result = [];\n\t\t[...this.items.values()]\n\t\t\t.forEach((item: Item) => {\n\t\t\t\tconst node = item.container.querySelector('[data-role=\"counter\"]');\n\t\t\t\tif (node && node.id.indexOf(counterId) >= 0)\n\t\t\t\t{\n\t\t\t\t\tresult.push(item);\n\t\t\t\t}\n\t\t\t});\n\t\treturn result;\n\t}\n\n\t#getItemsToSave()\n\t{\n\t\tconst saveSortItems = {\n\t\t\tshow: [],\n\t\t\thide: [],\n\t\t};\n\t\tconst customItems = [];\n\n\t\tlet firstItemLink = null;\n\t\t['show', 'hide']\n\t\t\t.forEach((state) => {\n\t\t\t\tlet items = saveSortItems[state];\n\t\t\t\tlet currentGroupId = null;\n\t\t\t\tconst chain = [];\n\n\t\t\t\tArray.from(\n\t\t\t\t\tthis.parentContainer\n\t\t\t\t\t\t.querySelectorAll(`.menu-item-block[data-status=\"${state}\"]`)\n\t\t\t\t).forEach((node) =>\n\t\t\t\t{\n\t\t\t\t\tif (node.dataset.role === 'group')\n\t\t\t\t\t{\n\t\t\t\t\t\tconst groupId = node.parentNode.hasAttribute('data-group-id') ?\n\t\t\t\t\t\t\tnode.parentNode.getAttribute('data-group-id') : null;\n\t\t\t\t\t\titems = saveSortItems[state];\n\t\t\t\t\t\tlet groupItem\n\t\t\t\t\t\twhile (groupItem = chain.pop())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (groupItem['group_id'] === groupId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tchain.push(groupItem);\n\t\t\t\t\t\t\t\titems = groupItem.items;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\tgroup_id: node.dataset.id,\n\t\t\t\t\t\t\titems: []\n\t\t\t\t\t\t};\n\t\t\t\t\t\titems.push(item);\n\t\t\t\t\t\tchain.push(item);\n\t\t\t\t\t\titems = item.items;\n\t\t\t\t\t\tcurrentGroupId = node.dataset.id;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tif ([ItemAdminCustom.code, ItemUserSelf.code, ItemUserFavorites.code]\n\t\t\t\t\t\t\t.indexOf(node.getAttribute('data-type')) >= 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst item = {\n\t\t\t\t\t\t\t\tID: node.getAttribute('data-id'),\n\t\t\t\t\t\t\t\tLINK: node.getAttribute('data-link'),\n\t\t\t\t\t\t\t\tTEXT: Text.decode(node.querySelector(\"[data-role='item-text']\").innerHTML)\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (node.getAttribute(\"data-new-page\") === \"Y\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem.NEW_PAGE = \"Y\";\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcustomItems.push(item);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (firstItemLink === null && Type.isStringFilled(node.getAttribute(\"data-link\")))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfirstItemLink = node.getAttribute(\"data-link\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (node.closest(`[data-group-id=\"${currentGroupId}\"][data-role=\"group-content\"]`))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\titems.push(node.dataset.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst groupId = node.parentNode.hasAttribute('data-group-id') ?\n\t\t\t\t\t\t\t\tnode.parentNode.getAttribute('data-group-id') : null;\n\t\t\t\t\t\t\titems = saveSortItems[state];\n\t\t\t\t\t\t\tlet groupItem\n\t\t\t\t\t\t\twhile (groupItem = chain.pop())\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (groupItem['group_id'] === groupId)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tchain.push(groupItem);\n\t\t\t\t\t\t\t\t\titems = groupItem.items;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\titems.push(node.dataset.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t})\n\t\t;\n\t\treturn {saveSortItems, firstItemLink, customItems};\n\t}\n\n\t#saveItemsSort(analyticsLabel)\n\t{\n\t\tconst {saveSortItems, firstItemLink} = this.#getItemsToSave();\n\t\tBackend.saveItemsSort(saveSortItems, firstItemLink, analyticsLabel || {action: 'sortItem'});\n\t}\n\n\taddItem({node, animateFromPoint})\n\t{\n\t\tif (!(node instanceof Element))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst styleValue = node.style.display;\n\t\tif (animateFromPoint)\n\t\t{\n\t\t\tnode.dataset.styleDisplay = node.style.display;\n\t\t\tnode.style.display = 'none';\n\t\t}\n\t\tif (this.items.has(node.dataset.id) && node.dataset.type === ItemUserFavorites.code)\n\t\t{\n\t\t\tconst item = this.items.get(node.dataset.id);\n\t\t\titem.storage.push(ItemUserFavorites.code);\n\t\t\titem.container.dataset.storage = item.storage.join(',');\n\t\t\tnode = item.container;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.container.appendChild(node);\n\t\t\tthis.registerItem(node);\n\t\t\tthis.#saveItemsSort();\n\t\t}\n\n\t\tif (animateFromPoint)\n\t\t{\n\t\t\tthis\n\t\t\t\t.#animateTopItemToLeft(node, animateFromPoint)\n\t\t\t\t.then(() => {\n\t\t\t\t\tnode.style.display = node.dataset.styleDisplay;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\tupdateItem(data)\n\t{\n\t\tlet {id} = data;\n\t\tif (this.items.has(id))\n\t\t{\n\t\t\tthis.items\n\t\t\t\t.get(id)\n\t\t\t\t.update(data)\n\t\t\t;\n\t\t}\n\t}\n\n\tdeleteItem(item: Item, {animate})\n\t{\n\t\tthis.items.delete(item.getId());\n\t\tthis.#activeItem.checkAndUnset(item);\n\n\t\tif (item instanceof ItemUserFavorites || animate)\n\t\t{\n\t\t\tthis\n\t\t\t\t.#animateTopItemFromLeft(item.container)\n\t\t\t\t.then(() => {\n\t\t\t\t\titem.container.parentNode.removeChild(item.container);\n\t\t\t\t\tthis.#saveItemsSort();\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse if (item.container)\n\t\t{\n\t\t\titem.container.parentNode.removeChild(item.container);\n\t\t\tthis.#saveItemsSort();\n\t\t}\n\t}\n\n\tconvertItem(item: Item)\n\t{\n\t\tthis.unregisterItem(item);\n\t\tthis.registerItem(this.parentContainer.querySelector(`li.menu-item-block[data-id=\"${item.getId()}\"]`));\n\t}\n\n\tgetActiveItem(): ?Item\n\t{\n\t\treturn this.#activeItem.item;\n\t}\n\n\t#getParentItemFor(item: Item): ?ItemGroup\n\t{\n\t\tif (!(item instanceof Item))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tconst parentContainer = item.container.closest('[data-role=\"group-content\"]');\n\t\tif (parentContainer && this.items.has(parentContainer.getAttribute('data-group-id')))\n\t\t{\n\t\t\treturn this.items.get(parentContainer.getAttribute('data-group-id'));\n\t\t}\n\t\treturn null;\n\t}\n\n\t#canChangePaternity(item: Item): boolean\n\t{\n\t\tif (item instanceof ItemGroup)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tconst oldParent = this.#getParentItemFor(item);\n\t\tif (oldParent instanceof ItemGroup\n\t\t\t&& item.container.parentNode.querySelectorAll('li.menu-item-block').length <= 1\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\texport()\n\t{\n\t\treturn this.#getItemsToSave();\n\t}\n\n\t//region DropdownActions\n\t#openItemMenuPopup;\n\topenItemMenu(item: Item, target)\n\t{\n\t\tif (this.#openItemMenuPopup)\n\t\t{\n\t\t\tthis.#openItemMenuPopup.close();\n\t\t}\n\t\tconst contextMenuItems = [];\n\t\t// region hide/show item\n\t\tif (item.container.getAttribute(\"data-status\") === \"show\")\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"hide_item\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.hideItem(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"show_item\"),\n\t\t\t\tonclick: (target, contextMenuItem) => {\n\t\t\t\t\tthis.showItem(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//endregion\n\n\t\t//region set as main page\n\t\tif (\n\t\t\t!Options.isExtranet\n\t\t\t&& !(item instanceof ItemUserSelf)\n\t\t\t&& !(item instanceof ItemGroup)\n\t\t\t&& this.container.querySelector('li.menu-item-block[data-role=\"item\"]') !== item.container\n\t\t)\n\t\t{\n\t\t\tcontextMenuItems.push({\n\t\t\t\ttext: Loc.getMessage(\"MENU_SET_MAIN_PAGE\"),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.setItemAsAMainPage(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t//endregion\n\n\t\titem\n\t\t\t.getDropDownActions()\n\t\t\t.forEach((actionItem) => {\n\t\t\t\tcontextMenuItems.push(actionItem);\n\t\t\t});\n\n\t\tcontextMenuItems.push({\n\t\t\ttext: this.#isEditMode ? Loc.getMessage(\"MENU_EDIT_READY_FULL\") : Loc.getMessage(\"MENU_SETTINGS_MODE\"),\n\t\t\tonclick: () => {\n\t\t\t\tthis.#isEditMode ? this.switchToViewMode() : this.switchToEditMode();\n\t\t\t}\n\t\t});\n\n\t\tcontextMenuItems.forEach((item) => {\n\t\t\titem['className'] = [\"menu-popup-no-icon\", item['className'] ?? ''].join(' ');\n\t\t\tconst {onclick} = item;\n\t\t\titem['onclick'] = (event, item) => {\n\t\t\t\titem.getMenuWindow().close();\n\t\t\t\tonclick.call(event, item);\n\t\t\t};\n\t\t});\n\t\tthis.#openItemMenuPopup = new Menu({\n\t\t\tbindElement: target,\n\t\t\titems: contextMenuItems,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 12,\n\t\t\tangle: true,\n\t\t\tevents: {\n\t\t\t\tonClose: () => {\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onClose'));\n\t\t\t\t\titem.container.classList.remove('menu-item-block-hover');\n\t\t\t\t\tthis.#openItemMenuPopup = null;\n\t\t\t\t},\n\t\t\t\tonShow: () => {\n\t\t\t\t\titem.container.classList.add('menu-item-block-hover');\n\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onShow'));\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t\tthis.#openItemMenuPopup.show();\n\t}\n\t//endregion\n\n\t//region Visible sliding\n\t#animateTopItemToLeft(node, animateFromPoint)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tlet {startX, startY} = animateFromPoint;\n\t\t\tconst topMenuNode = document.createElement('DIV');\n\t\t\ttopMenuNode.style = `position: absolute; z-index: 1000; top: ${startY + 25}px;`\n\n\t\t\tconst cloneNode = node.cloneNode(true);\n\t\t\tcloneNode.style.display = node.dataset.styleDisplay;\n\t\t\tdocument.body.appendChild(topMenuNode);\n\t\t\ttopMenuNode.appendChild(cloneNode);\n\n\t\t\tlet finishY = this.hiddenContainer.getBoundingClientRect().top;\n\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 500,\n\t\t\t\tstart: {left: startX},\n\t\t\t\tfinish: {left: 30},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\ttopMenuNode.style.left = state.left + \"px\";\n\t\t\t\t},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\t(new BX.easing({\n\t\t\t\t\t\tduration: 500,\n\t\t\t\t\t\tstart: {top: startY + 25},\n\t\t\t\t\t\tfinish: {top: finishY},\n\t\t\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\t\t\tstep: function (state) {\n\t\t\t\t\t\t\ttopMenuNode.style.top = state.top + \"px\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcomplete: () => {\n\t\t\t\t\t\t\tDom.remove(topMenuNode);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t})).animate();\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t});\n\t}\n\t#animateTopItemFromLeft(node)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t(new BX.easing({\n\t\t\t\tduration: 700,\n\t\t\t\tstart: {left: node.offsetLeft, opacity: 1},\n\t\t\t\tfinish: {left: 400, opacity: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: function (state) {\n\t\t\t\t\tnode.style.paddingLeft = state.left + \"px\";\n\t\t\t\t\tnode.style.opacity = state.opacity;\n\t\t\t\t},\n\t\t\t\tcomplete: function () {\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t})).animate();\n\t\t});\n\t}\n\t//endregion\n\n\t/* region D&D */\n\t#registerDND(item)\n\t{\n\t\t//drag&drop\n\t\tjsDD.Enable();\n\t\titem.container.onbxdragstart = this.#menuItemDragStart.bind(this, item);\n\t\titem.container.onbxdrag = (x, y) => { this.#menuItemDragMove(/*item,*/ x, y); };\n\t\titem.container.onbxdraghover = (dest, x, y) => { this.#menuItemDragHover(/*item, */dest, x, y); };\n\t\titem.container.onbxdragstop = this.#menuItemDragStop.bind(this, item);\n\t\tjsDD.registerObject(item.container);\n\t}\n\n\t#menuItemDragStart(item)\n\t{\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Bitrix24.LeftMenuClass:onDragStart');\n\n\t\tif (!(item instanceof ItemGroup)\n\t\t\t&& item.container.parentNode.querySelectorAll('li.menu-item-block').length <= 1\n\t\t\t&& this.#getParentItemFor(item) !== null\n\t\t)\n\t\t{\n\t\t\titem = this.#getParentItemFor(item);\n\t\t}\n\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onDragModeOn')\n\t\t);\n\n\t\tthis.dnd = {\n\t\t\tcontainer: this.container.parentNode,\n\t\t\titemDomBlank: Dom.create('div', {\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'none',\n\t\t\t\t\t// border: '2px solid navy'\n\t\t\t\t}}),\n\t\t\titemMoveBlank: Dom.create('div', {\n\t\t\t\tstyle: {\n\t\t\t\t\theight: item.container.offsetHeight + 'px',\n\t\t\t\t\t// border: '2px solid red',\n\t\t\t\t}}\n\t\t\t),\n\t\t\tdraggableBlock: Dom.create('div', {             //div to move\n\t\t\t\tattrs: {\n\t\t\t\t\tclassName: \"menu-draggable-wrap\",\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: [(\n\t\t\t\t\t\titem.container.offsetTop - item.container.offsetHeight\n\t\t\t\t\t), 'px'].join(''),\n\t\t\t\t\t// border: '2px solid black'\n\t\t\t\t}\n\t\t\t}),\n\t\t\titem: item,\n\t\t\toldParent: this.#getParentItemFor(item),\n\t\t\tisHiddenContainerVisible: this.isHiddenContainerVisible()\n\t\t}\n\n\t\tthis.#showHiddenContainer(false);\n\n\t\tconst registerItems = () => {\n\t\t\t[...this.parentContainer\n\t\t\t\t.querySelectorAll('li.menu-item-block')]\n\t\t\t\t.forEach((node) => {\n\t\t\t\t\tif (item instanceof ItemGroup\n\t\t\t\t\t\t&& this.#getParentItemFor(\n\t\t\t\t\t\t\tthis.items.get(node.getAttribute('data-id'))\n\t\t\t\t\t\t) !== null)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tjsDD.registerDest(node, 100);\n\t\t\t\t});\n\n\t\t\tconst firstNode = this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-empty-item\");\n\t\t\tif (item instanceof ItemUserSelf)\n\t\t\t{\n\t\t\t\tjsDD.unregisterDest(firstNode);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tjsDD.registerDest(firstNode, 100);\n\t\t\t}\n\t\t\tjsDD.registerDest(this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-hidden-empty-item\"), 100);\n\t\t\tjsDD.registerDest(this.parentContainer\n\t\t\t\t.querySelector(\"#left-menu-hidden-separator\"), 100);\n\t\t};\n\n\t\tif (item instanceof ItemGroup)\n\t\t{\n\t\t\titem\n\t\t\t\t.collapse(true)\n\t\t\t\t.then(() => {\n\t\t\t\t\tif (this.dnd)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.dnd.pos = BX.pos(this.container.parentNode);\n\t\t\t\t\t\tregisterItems();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tregisterItems();\n\t\t}\n\n\t\tconst dragElement = item.container;\n\t\tDom.addClass(this.dnd.container, \"menu-drag-mode\")\n\t\tDom.addClass(dragElement, \"menu-item-draggable\");\n\t\tdragElement\n\t\t\t.parentNode\n\t\t\t.insertBefore(this.dnd.itemDomBlank, dragElement); //remember original item place\n\t\tdragElement\n\t\t\t.parentNode\n\t\t\t.insertBefore(this.dnd.itemMoveBlank, dragElement); //empty div\n\t\tthis.dnd.draggableBlock.appendChild(item.container);\n\n\t\tthis.dnd.container.style.position = 'relative';\n\t\tthis.dnd.container.appendChild(this.dnd.draggableBlock);\n\t\tthis.dnd.pos = BX.pos(this.container.parentNode);\n\t}\n\n\t#menuItemDragMove(/*item,*/ x, y)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tvar menuItemsBlockHeight = this.dnd.pos.height;\n\t\ty = Math.max(0, y - this.dnd.pos.top);\n\t\tthis.dnd.draggableBlock.style.top = [\n\t\t\tMath.min(menuItemsBlockHeight - item.container.offsetHeight, y) - 5,\n\t\t\t'px'\n\t\t].join('');\n\t}\n\n\t#menuItemDragHover(/*item, */dest, x, y)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tconst dragElement = item.container;\n\n\t\tif (dest === dragElement)\n\t\t{\n\t\t\tthis.dnd.itemDomBlank\n\t\t\t\t.parentNode.insertBefore(this.dnd.itemMoveBlank, this.dnd.itemDomBlank);\n\t\t\treturn;\n\t\t}\n\n\t\tif (dest.id === \"left-menu-empty-item\" &&\n\t\t\t(\n\t\t\t\tdragElement.getAttribute(\"data-type\") === \"self\"\n\t\t\t\t|| dragElement.getAttribute(\"data-disable-first-item\") === \"Y\"\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\treturn; // self-item cannot be moved on the first place\n\t\t}\n\n\t\tif (dest.getAttribute('data-role') === 'group')\n\t\t{\n\t\t\tconst groupHolder = dest.parentNode.querySelector(`[data-group-id=\"${dest.getAttribute('data-id')}\"]`);\n\t\t\tif (dest.getAttribute('data-collapse-mode') === 'collapsed')\n\t\t\t{\n\t\t\t\tDom.insertAfter(this.dnd.itemMoveBlank, groupHolder);\n\t\t\t}\n\t\t\telse if (item instanceof ItemGroup)\n\t\t\t{\n\t\t\t\tDom.insertBefore(this.dnd.itemMoveBlank, dest);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.prepend(this.dnd.itemMoveBlank, groupHolder.querySelector('ul'));\n\t\t\t}\n\t\t}\n\t\telse if (this.dnd.container.contains(dest))\n\t\t{\n\t\t\tlet itemPlaceHolder = dest;\n\t\t\tif (item instanceof ItemGroup &&\n\t\t\t\tdest.closest('[data-role=\"group-content\"]'))\n\t\t\t{\n\t\t\t\titemPlaceHolder = dest.closest('[data-role=\"group-content\"]');\n\t\t\t}\n\t\t\tDom.insertAfter(this.dnd.itemMoveBlank, itemPlaceHolder);\n\t\t}\n\t}\n\n\t#menuItemDragStop(/*item*/)\n\t{\n\t\tconst item = this.dnd.item;\n\t\tconst oldParent = this.dnd.oldParent;\n\n\t\tconst dragElement = item.container;\n\n\t\tDom.removeClass(this.dnd.container, \"menu-drag-mode\");\n\t\tDom.removeClass(dragElement, \"menu-item-draggable\");\n\t\tthis.dnd.container.style.position = '';\n\n\t\tlet error = null;\n\t\tlet onHiddenBlockIsEmptyEmitted = false;\n\t\tif (this.parentContainer.querySelector('.menu-item-block') === item.container)\n\t\t{\n\t\t\tif (item instanceof ItemUserSelf)\n\t\t\t{\n\t\t\t\terror = Loc.getMessage('MENU_SELF_ITEM_FIRST_ERROR');\n\t\t\t}\n\t\t\telse if (item.container.getAttribute(\"data-disable-first-item\") === \"Y\")\n\t\t\t{\n\t\t\t\terror = Loc.getMessage(\"MENU_FIRST_ITEM_ERROR\");\n\t\t\t}\n\t\t}\n\t\tif (error !== null)\n\t\t{\n\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t\titem.showMessage(error);\n\t\t}\n\t\telse if (!this.dnd.container.contains(this.dnd.itemMoveBlank))\n\t\t{\n\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttry {\n\t\t\t\tthis.dnd.itemMoveBlank.parentNode.replaceChild(dragElement, this.dnd.itemMoveBlank);\n\n\t\t\t\tif (this.hiddenContainer.contains(dragElement))\n\t\t\t\t{\n\t\t\t\t\titem.container.setAttribute(\"data-status\", \"hide\");\n\t\t\t\t\tif (this.dnd.itemDomBlank.closest('#left-menu-hidden-items-block') === null\n\t\t\t\t\t\t&& this.hiddenContainer.querySelectorAll('.menu-item-block').length === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsNotEmpty'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\titem.container.setAttribute(\"data-status\", \"show\");\n\t\t\t\t\tif (this.hiddenContainer.querySelectorAll('.menu-item-block').length <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tonHiddenBlockIsEmptyEmitted = true;\n\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onHiddenBlockIsEmpty'));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (item instanceof ItemGroup)\n\t\t\t\t{\n\t\t\t\t\titem\n\t\t\t\t\t\t.checkAndCorrect()\n\t\t\t\t\t\t.expand(true);\n\t\t\t\t}\n\t\t\t\tthis.#refreshActivity(item, oldParent);\n\t\t\t\tthis.#recalculateCounters(item);\n\n\t\t\t\tconst analyticsLabel = {action: 'sortItem'};\n\t\t\t\tif (this.parentContainer.querySelector('.menu-item-block') === item.container\n\t\t\t\t\t&& !this.isExtranet)\n\t\t\t\t{\n\t\t\t\t\titem.showMessage(Loc.getMessage(\"MENU_ITEM_MAIN_PAGE\"));\n\t\t\t\t\tanalyticsLabel.action = 'mainPage';\n\t\t\t\t\tanalyticsLabel.itemId = item.getId();\n\t\t\t\t}\n\t\t\t\tthis.#saveItemsSort(analyticsLabel);\n\t\t\t}\n\t\t\tcatch(e)\n\t\t\t{\n\t\t\t\tthis.dnd.itemDomBlank.parentNode.replaceChild(dragElement, this.dnd.itemDomBlank);\n\t\t\t}\n\t\t}\n\n\t\tDom.remove(this.dnd.draggableBlock);\n\t\tDom.remove(this.dnd.itemDomBlank);\n\t\tDom.remove(this.dnd.itemMoveBlank);\n\n\t\tjsDD.enableDest(dragElement);\n\t\tthis.container.style.position = 'static';\n\t\tif (!this.dnd.isHiddenContainerVisible || onHiddenBlockIsEmptyEmitted === true)\n\t\t{\n\t\t\tthis.#hideHiddenContainer(false);\n\t\t}\n\t\tdelete this.dnd;\n\n\t\t[...this.parentContainer\n\t\t\t.querySelectorAll('li.menu-item-block')]\n\t\t\t.forEach((node) => {\n\t\t\t\tjsDD.registerDest(node);\n\t\t\t});\n\t\tconst firstNode = this.parentContainer\n\t\t\t.querySelector(\"#left-menu-empty-item\");\n\t\tjsDD.unregisterDest(firstNode);\n\t\tjsDD.unregisterDest(this.parentContainer\n\t\t\t.querySelector(\"#left-menu-hidden-empty-item\"));\n\t\tjsDD.unregisterDest(this.parentContainer\n\t\t\t.querySelector(\"#left-menu-hidden-separator\"));\n\t\tjsDD.refreshDestArea();\n\t\tEventEmitter.emit(\n\t\t\tthis,\n\t\t\tOptions.eventName('onDragModeOff')\n\t\t);\n\t}\n\t/*endregion*/\n}","import {Text, Tag, Loc} from 'main.core';\nimport {PopupManager, Popup} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nimport Backend from '../backend';\nimport Options from '../options';\nimport DefaultController from './default-controller';\nimport ItemUserSelf from '../items/item-user-self';\nimport ItemUserFavorites from \"../items/item-user-favorites\";\nimport Utils from \"../utils\";\n\nexport default class ItemDirector extends DefaultController\n{\n\n\tconstructor(container, params)\n\t{\n\t\tsuper(container, params);\n\t}\n\n\tsaveCurrentPage(page: ?Object)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.saveCurrentPage(page)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(\n\t\t\t\t\tthis,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tsaveStandardPage(topItem)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.saveStandardPage(topItem)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(\n\t\t\t\t\tthis,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tdeleteCurrentPage({pageLink})\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.deleteCurrentPage({pageLink})\n\t\t\t.then((data) => {\n\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenDeleted'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tdeleteStandardPage(topItem)\n\t{\n\t\treturn ItemUserFavorites\n\t\t\t.deleteStandardPage(topItem)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenDeleted'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch(Utils.catchError);\n\t}\n\n\tshowAddToSelf(bindElement)\n\t{\n\t\tItemUserSelf\n\t\t\t.showAdd(bindElement)\n\t\t\t.then((data) => {\n\t\t\t\tEventEmitter.emit(this,\n\t\t\t\t\tOptions.eventName('onItemHasBeenAdded'),\n\t\t\t\t\tdata\n\t\t\t\t);\n\t\t\t}).catch(Utils.catchError);\n\t}\n}\n","import {Cache, Loc, ajax, Type, Dom} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {PopupManager, MenuItem} from 'main.popup';\nimport PresetCustomController from './controllers/preset-custom-controller';\nimport PresetDefaultController from './controllers/preset-default-controller';\nimport SettingsController from './controllers/settings-controller';\nimport Options from './options';\nimport Backend from './backend';\nimport ItemsController from './controllers/items-controller'\nimport ItemDirector from './controllers/item-director'\nimport Item from \"./items/item\";\nimport ItemSystem from \"./items/item-system\";\nimport Utils from './utils';\nimport ItemUserFavorites from \"./items/item-user-favorites\";\nimport {MessageBox, MessageBoxButtons} from 'ui.dialogs.messagebox';\n\nexport default class Menu\n{\n\t//region containers\n\tmenuContainer;\n\tmenuHeader;\n\tmenuBody;\n\theader;\n\theaderBurger;\n\theaderSettings;\n\tmainTable;\n\tupButton;\n\tmenuMoreButton;\n\t//endregion\n\n\tcache = new Cache.MemoryCache();\n\n\tscrollModeThreshold = 20;//\n\tlastScrollOffset = 0;\n\tslidingModeTimeoutId = 0;\n\n\ttopMenuSelectedNode = null;//\n\ttopItemSelectedObj = null;\n\n\tisMenuMouseEnterBlocked = false;\n\tisMenuMouseLeaveBlocked = [];\n\tisCollapsedMode = false;\n\n\tconstructor(params)\n\t{\n\t\t//TODO     html\n\t\tthis.menuContainer = document.getElementById(\"menu-items-block\");\n\t\tif (!this.menuContainer)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tparams = typeof params === \"object\" ? params : {};\n\n\t\tOptions.isExtranet = params.isExtranet === 'Y';\n\t\tOptions.isAdmin = params.isAdmin;\n\t\tOptions.isCustomPresetRestricted = params.isCustomPresetAvailable !== 'Y';\n\n\t\tthis.isCollapsedMode = params.isCollapsedMode;\n\n\t\tthis.initAndBindNodes();\n\t\tthis.bindEvents();\n\t\tthis.getItemsController();\n\t\t//Emulate document scroll because init() can be invoked after page load scroll (a hard reload with script at the bottom).\n\t\tthis.handleDocumentScroll();\n\t}\n\n\tinitAndBindNodes()\n\t{\n\t\tthis.menuContainer.addEventListener(\"dblclick\", this.handleMenuDoubleClick.bind(this));\n\t\tthis.menuContainer.addEventListener(\"mouseenter\", this.handleMenuMouseEnter.bind(this));\n\t\tthis.menuContainer.addEventListener(\"mouseleave\", this.handleMenuMouseLeave.bind(this));\n\t\tthis.menuContainer.addEventListener(\"transitionend\", this.handleSlidingTransitionEnd.bind(this));\n\n\t\tthis.menuHeader = this.menuContainer.querySelector(\".menu-items-header\");\n\t\tthis.menuBody = this.menuContainer.querySelector(\".menu-items-body\");\n\t\tthis.menuItemsBlock = this.menuContainer.querySelector(\".menu-items\");\n\n\t\tthis.header = document.querySelector(\"#header\");\n\t\tthis.headerBurger = this.header.querySelector(\".menu-switcher\");\n\n\t\tconst headerLogoBlock = this.header.querySelector(\".header-logo-block\");\n\t\tthis.headerSettings = this.header.querySelector(\".header-logo-block-settings\");\n\t\tif (this.headerSettings)\n\t\t{\n\t\t\theaderLogoBlock.addEventListener(\"mouseenter\", this.handleHeaderLogoMouserEnter.bind(this));\n\t\t\theaderLogoBlock.addEventListener(\"mouseleave\", this.handleHeaderLogoMouserLeave.bind(this));\n\t\t\tthis.menuHeader.addEventListener(\"mouseenter\", this.handleHeaderLogoMouserEnter.bind(this));\n\t\t\tthis.menuHeader.addEventListener(\"mouseleave\", this.handleHeaderLogoMouserLeave.bind(this));\n\t\t}\n\t\tdocument.addEventListener(\"scroll\", this.handleDocumentScroll.bind(this));\n\n\t\tthis.mainTable = document.querySelector(\".bx-layout-table\");\n\t\tthis.menuHeaderBurger = this.menuHeader.querySelector(\".menu-switcher\");\n\t\tthis.menuHeaderBurger\n\t\t\t.addEventListener('click', this.handleBurgerClick.bind(this));\n\t\tthis.menuHeader.querySelector(\".menu-items-header-title\")\n\t\t\t.addEventListener('click', this.handleBurgerClick.bind(this, true));\n\n\t\tthis.upButton = this.menuContainer.querySelector(\".menu-btn-arrow-up\");\n\t\tthis.upButton.addEventListener(\"click\", this.handleUpButtonClick.bind(this));\n\t\tthis.menuMoreButton = this.menuContainer.querySelector(\".menu-favorites-more-btn\");\n\t\tthis.menuMoreButton.addEventListener(\"click\", this.handleShowHiddenClick.bind(this));\n\n\t\tconst siteMapItem = this.menuContainer.querySelector(\".menu-sitemap-btn\");\n\t\tif (siteMapItem)\n\t\t{\n\t\t\tsiteMapItem.addEventListener('click', this.handleSiteMapClick.bind(this));\n\t\t}\n\n\t\tconst settingsSaveBtn = this.menuContainer.querySelector(\".menu-settings-save-btn\")\n\t\tif (settingsSaveBtn)\n\t\t{\n\t\t\tsettingsSaveBtn.addEventListener('click', this.handleViewMode.bind(this));\n\t\t}\n\t\tthis.menuContainer.querySelector(\".menu-settings-btn\").addEventListener('click', () => {\n\t\t\tthis.getSettingsController().show();\n\t\t})\n\t}\n\n\t// region Controllers\n\tgetItemsController(): ItemsController\n\t{\n\t\treturn this.cache.remember('itemsController', () => {\n\t\t\treturn new ItemsController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tEditMode: () => {\n\t\t\t\t\t\t\tthis.toggle(true);\n\t\t\t\t\t\t\tthis.menuContainer.classList.add('menu-items-edit-mode');\n\t\t\t\t\t\t\tthis.menuContainer.classList.remove('menu-items-view-mode');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tViewMode: () => {\n\t\t\t\t\t\t\tthis.toggle(true);\n\t\t\t\t\t\t\tthis.menuContainer.classList.add('menu-items-view-mode');\n\t\t\t\t\t\t\tthis.menuContainer.classList.remove('menu-items-edit-mode');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDragModeOn: ({target}) => {\n\t\t\t\t\t\t\tthis.switchToSlidingMode(true);\n\t\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked.push('drag');\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDragModeOff: ({target}) => {\n\t\t\t\t\t\t\tthis.isMenuMouseLeaveBlocked.pop();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonHiddenBlockIsVisible: this.onHiddenBlockIsVisible.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsHidden: this.onHiddenBlockIsHidden.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsEmpty: this.onHiddenBlockIsEmpty.bind(this),\n\t\t\t\t\t\tonHiddenBlockIsNotEmpty: this.onHiddenBlockIsNotEmpty.bind(this),\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('items'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetItemDirector(): ItemDirector\n\t{\n\t\treturn this.cache.remember('itemsCreator', () => {\n\t\t\treturn new ItemDirector(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonItemHasBeenAdded: ({data}) => {\n\t\t\t\t\t\t\tthis.getItemsController().addItem(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSettingsController(): SettingsController\n\t{\n\t\treturn this.cache.remember('presetController', () => {\n\t\t\treturn new SettingsController(\n\t\t\t\tthis.menuContainer.querySelector(\".menu-settings-btn\"),\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonGettingSettingMenuItems: this.onGettingSettingMenuItems.bind(this),\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('settings'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetCustomPresetController(): PresetCustomController\n\t{\n\t\treturn this.cache.remember('customPresetController', () => {\n\t\t\treturn new PresetCustomController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPresetIsSet: ({data}) => {\n\t\t\t\t\t\t\tconst {saveSortItems, firstItemLink, customItems} = this.getItemsController().export();\n\t\t\t\t\t\t\treturn Backend.setCustomPreset(data, saveSortItems, customItems, firstItemLink)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('presets'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tgetDefaultPresetController(): PresetDefaultController\n\t{\n\t\treturn this.cache.remember('defaultPresetController', () => {\n\t\t\treturn new PresetDefaultController(\n\t\t\t\tthis.menuContainer,\n\t\t\t\t{\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPresetIsSet: ({data: {mode, presetId}}) => {\n\t\t\t\t\t\t\treturn Backend.setSystemPreset(mode, presetId);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonPresetIsPostponed: ({data: {mode}}) => {\n\t\t\t\t\t\t\tconst result =  Backend.postponeSystemPreset(mode);\n\t\t\t\t\t\t\tEventEmitter.emit(this, Options.eventName('onPresetIsPostponed'));\n\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t}\n/*\n\t\t\t\t\t\tonShow: () => { this.isMenuMouseLeaveBlocked.push('presets-default'); },\n\t\t\t\t\t\tonClose: () => { this.isMenuMouseLeaveBlocked.pop(); },\n*/\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\t//endregion\n\n\tbindEvents()\n\t{\n\t\t//just to hold opened menu in collapsing mode when groups are shown\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onOpen\", this.handleGroupPanelOpen.bind(this));\n\t\tBX.addCustomEvent(\"BX.Bitrix24.GroupPanel:onClose\", this.handleGroupPanelClose.bind(this));\n\n\t\t//region Top menu integration\n\t\tBX.addCustomEvent('BX.Main.InterfaceButtons:onFirstItemChange', (firstPageLink, firstNode) => {\n\t\t\tif (!firstPageLink || !Type.isDomNode(firstNode))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst topMenuId = firstNode.getAttribute(\"data-top-menu-id\");\n\t\t\tconst leftMenuNode = this.menuBody.querySelector(`[data-top-menu-id=\"${topMenuId}\"]`);\n\t\t\tif (leftMenuNode)\n\t\t\t{\n\t\t\t\tleftMenuNode.setAttribute(\"data-link\", firstPageLink);\n\t\t\t\tconst leftMenuLink = leftMenuNode.querySelector('a.menu-item-link');\n\t\t\t\tif (leftMenuLink)\n\t\t\t\t{\n\t\t\t\t\tleftMenuLink.setAttribute(\"href\", firstPageLink);\n\t\t\t\t}\n\n\t\t\t\tif (leftMenuNode.previousElementSibling === this.menuContainer.querySelector('#left-menu-empty-item'))\n\t\t\t\t{\n\t\t\t\t\tBackend.setFirstPage(firstPageLink);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tBackend.clearCache();\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.showMessage(firstNode, Loc.getMessage('MENU_ITEM_MAIN_SECTION_PAGE'));\n\t\t});\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onHideLastVisibleItem\", (bindElement) => {\n\t\t\tthis.showMessage(bindElement, Loc.getMessage(\"MENU_TOP_ITEM_LAST_HIDDEN\"));\n\t\t});\n\t\t//when we edit top menu item\n\t\tBX.addCustomEvent(\"BX.Main.InterfaceButtons:onBeforeCreateEditMenu\", (contextMenu, dataItem, topMenu) => {\n\t\t\tlet item = this.#getLeftMenuItemByTopMenuItem(dataItem);\n\t\t\tif (!item && dataItem && Type.isStringFilled(dataItem.URL) && !dataItem.URL.match(/javascript:/))\n\t\t\t{\n\t\t\t\tcontextMenu.addMenuItem({\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_TO_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.saveStandardPage(dataItem)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (item instanceof ItemUserFavorites)\n\t\t\t{\n\t\t\t\tcontextMenu.addMenuItem({\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_FROM_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.deleteStandardPage(dataItem)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t//endregion\n\t\t//service event for UI.Toolbar\n\t\ttop.BX.addCustomEvent('UI.Toolbar:onRequestMenuItemData', ({currentFullPath, context}) => {\n\t\t\tif (Type.isStringFilled(currentFullPath))\n\t\t\t{\n\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onSendMenuItemData', [{\n\t\t\t\t\tcurrentPageInMenu: this.menuContainer.querySelector(`.menu-item-block[data-link=\"${currentFullPath}\"]`),\n\t\t\t\t\tcontext: context,\n\t\t\t\t}]);\n\t\t\t}\n\t\t});\n\t\t//When clicked on a start Favorites like\n\t\tEventEmitter.subscribe('UI.Toolbar:onStarClick', ({compatData: [params]}) => {\n\t\t\tif (params.isActive)\n\t\t\t{\n\t\t\t\tthis.getItemDirector().deleteCurrentPage({\n\t\t\t\t\tcontext: params.context,\n\t\t\t\t\tpageLink: params.pageLink,\n\t\t\t\t}).then(({itemInfo}) => {\n\t\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemDeleted\", [itemInfo, this]);\n\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\t\tisActive: false,\n\t\t\t\t\t\tcontext: params.context,\n\t\t\t\t\t}]);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t.saveCurrentPage({\n\t\t\t\t\tpageTitle: params.pageTitle,\n\t\t\t\t\tpageLink: params.pageLink,\n\t\t\t\t}).then(({itemInfo}) => {\n\t\t\t\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuItemAdded\", [itemInfo, this]);\n\t\t\t\t\tBX.onCustomEvent('BX.Bitrix24.LeftMenuClass:onStandardItemChangedSuccess', [{\n\t\t\t\t\t\tisActive: true,\n\t\t\t\t\t\tcontext: params.context,\n\t\t\t\t\t}]);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\tEventEmitter.subscribe('BX.Main.InterfaceButtons:onBeforeResetMenu', ({compatData: [promises]}) => {\n\t\t\tpromises.push(() => {\n\t\t\t\tconst p = new BX.Promise();\n\t\t\t\tBackend\n\t\t\t\t\t.clearCache()\n\t\t\t\t\t.then(\n\t\t\t\t\t\t() => { p.fulfill();},\n\t\t\t\t\t\t(response) => { p.reject(\"Error: \" +  response.errors[0].message);}\n\t\t\t\t\t)\n\t\t\t\t;\n\t\t\t\treturn p;\n\t\t\t});\n\t\t});\n\t}\n\n\tisEditMode()\n\t{\n\t\treturn this.getItemsController().isEditMode;\n\t}\n\n\tisCollapsed()\n\t{\n\t\treturn this.isCollapsedMode;\n\t}\n\n\tshowMessage(bindElement, message, position)\n\t{\n\t\tvar popup = PopupManager.create(\n\t\t\t\"left-menu-message\",\n\t\t\tbindElement,\n\t\t\t{\n\t\t\t\tcontent: '<div class=\"left-menu-message-popup\">' + message + '</div>',\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: position === \"right\" ? -45 : 2,\n\t\t\t\toffsetLeft: position === \"right\" ? 215 : 0,\n\t\t\t\tangle: position === \"right\" ? {position: \"left\"} : true,\n\t\t\t\tcacheable: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonDestroy: function () {\n\t\t\t\t\t\tpopup = null;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t})\n\t\t;\n\n\t\tpopup.show();\n\n\t\tsetTimeout(function ()\n\t\t{\n\t\t\tif (popup)\n\t\t\t{\n\t\t\t\tpopup.close();\n\t\t\t\tpopup = null;\n\t\t\t}\n\t\t}, 3000);\n\t}\n\n\tshowError(bindElement)\n\t{\n\t\tthis.showMessage(bindElement, Loc.getMessage('edit_error'));\n\t}\n\n\tshowGlobalPreset()\n\t{\n\t\tthis.getDefaultPresetController().show('global');\n\t}\n\n\thandleShowHiddenClick()\n\t{\n\t\tthis.getItemsController().toggleHiddenContainer(true);\n\t}\n\n\tonHiddenBlockIsVisible()\n\t{\n\t\tDom.addClass(this.menuMoreButton, 'menu-favorites-more-btn-open');\n\t\tthis.menuMoreButton.querySelector(\"#menu-more-btn-text\").innerHTML = Loc.getMessage(\"more_items_hide\");\n\t}\n\n\tonHiddenBlockIsHidden()\n\t{\n\t\tDom.removeClass(this.menuMoreButton, 'menu-favorites-more-btn-open');\n\t\tthis.menuMoreButton.querySelector(\"#menu-more-btn-text\").innerHTML = Loc.getMessage(\"more_items_show\");\n\t}\n\n\tonHiddenBlockIsEmpty()\n\t{\n\t\tDom.addClass(this.menuMoreButton, 'menu-favorites-more-btn-hidden');\n\t}\n\n\tonHiddenBlockIsNotEmpty()\n\t{\n\t\tDom.removeClass(this.menuMoreButton, 'menu-favorites-more-btn-hidden');\n\t}\n\n\tsetDefaultMenu()\n\t{\n\t\tMessageBox.show({\n\t\t\tmessage: Loc.getMessage('MENU_SET_DEFAULT_CONFIRM'),\n\t\t\tonYes: (messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tBackend\n\t\t\t\t\t.setDefaultPreset()\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t},\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL\n\t\t});\n\t}\n\n\tclearCompositeCache()\n\t{\n\t\tajax.runAction('intranet.leftmenu.clearCache', {data: {}});\n\t}\n\n\t#getLeftMenuItemByTopMenuItem({DATA_ID, NODE}): ?Item\n\t{\n\t\tlet item = this.getItemsController().items.get(DATA_ID);\n\t\tif (!item)\n\t\t{\n\t\t\tconst topMenuId = NODE.getAttribute('data-top-menu-id');\n\t\t\tif (NODE === NODE.parentNode.querySelector('[data-top-menu-id]'))\n\t\t\t{\n\t\t\t\tconst leftMenuNode = this.menuItemsBlock.querySelector(`[data-top-menu-id=\"${topMenuId}\"]`);\n\t\t\t\tif (leftMenuNode)\n\t\t\t\t{\n\t\t\t\t\titem = this.getItemsController().items.get(leftMenuNode.getAttribute('data-id'));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn item ?? null;\n\t}\n\t// region Events servicing functions\n\tonGettingSettingMenuItems()\n\t{\n\t\tconst topPoint = ItemUserFavorites.getActiveTopMenuItem();\n\t\tlet menuItemWithAddingToFavorites = null;\n\t\tif (topPoint)\n\t\t{\n\t\t\tconst node = this.menuContainer.querySelector(`.menu-item-block[data-link=\"${topPoint['URL']}\"]`);\n\t\t\tif (!node)\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_ADD_TO_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.saveStandardPage(topPoint)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if (node.getAttribute('data-type') === ItemUserFavorites.code)\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage(\"MENU_DELETE_FROM_LEFT_MENU\"),\n\t\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\t\tthis.getItemDirector()\n\t\t\t\t\t\t\t.deleteStandardPage(topPoint)\n\t\t\t\t\t\t;\n\t\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItemWithAddingToFavorites = {\n\t\t\t\t\ttext: Loc.getMessage('MENU_DELETE_PAGE_FROM_LEFT_MENU'),\n\t\t\t\t\tclassName: 'menu-popup-disable-text',\n\t\t\t\t\tonclick: () => { }\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\n\t\tconst menuItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SORT_ITEMS'),\n\t\t\t\tonclick: () => { this.getItemsController().switchToEditMode();}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: this.isCollapsed() ? Loc.getMessage('MENU_EXPAND') : Loc.getMessage('MENU_COLLAPSE'),\n\t\t\t\tonclick: (event, item: MenuItem) => {\n\t\t\t\t\tthis.toggle();\n\t\t\t\t\titem.getMenuWindow().destroy();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmenuItemWithAddingToFavorites,\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('MENU_ADD_SELF_PAGE'),\n\t\t\t\tonclick: (event, item: MenuItem) => {\n\t\t\t\t\tthis\n\t\t\t\t\t\t.getItemDirector()\n\t\t\t\t\t\t.showAddToSelf(\n\t\t\t\t\t\t\tthis.getSettingsController().getContainer()\n\t\t\t\t\t\t)\n\t\t\t\t\t;\n\t\t\t\t},\n\t\t\t},\n\t\t\tOptions.isExtranet ? null : {\n\t\t\t\ttext: Loc.getMessage('MENU_SET_DEFAULT2'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.getDefaultPresetController().show('personal')\n\t\t\t\t}\n\t\t\t},\n\t\t\tOptions.isExtranet ? null : {\n\t\t\t\ttext: Loc.getMessage('MENU_SET_DEFAULT'),\n\t\t\t\tonclick: this.setDefaultMenu.bind(this)\n\t\t\t}\n\t\t];\n\t\t//custom preset\n\t\tif (Options.isAdmin)\n\t\t{\n\t\t\tlet itemText = Loc.getMessage('MENU_SAVE_CUSTOM_PRESET');\n\n\t\t\tif (Options.isCustomPresetRestricted)\n\t\t\t{\n\t\t\t\titemText+= \"<span class='menu-lock-icon'></span>\";\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\thtml: itemText,\n\t\t\t\tclassName: (Options.isCustomPresetRestricted ? ' menu-popup-disable-text' : ''),\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tif (Options.isCustomPresetRestricted)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.InfoHelper.show('limit_office_menu_to_all');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.getCustomPresetController().show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn menuItems.filter((value) => {return value !== null;})\n\t}\n\n\t// endregion\n\n\thandleSiteMapClick()\n\t{\n\t\tthis.switchToSlidingMode(false);\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t(Loc.getMessage('SITE_DIR') || '/') + 'sitemap/',\n\t\t\t{\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tcustomLeftBoundary: 0\n\t\t\t}\n\t\t);\n\t}\n\n\t// region Sliding functions\n\tblockSliding()\n\t{\n\t\tthis.stopSliding()\n\t\tthis.isMenuMouseEnterBlocked = true;\n\t}\n\n\treleaseSliding()\n\t{\n\t\tthis.isMenuMouseEnterBlocked = false;\n\t}\n\n\tstopSliding()\n\t{\n\t\tclearTimeout(this.slidingModeTimeoutId);\n\t\tthis.slidingModeTimeoutId = 0;\n\t}\n\n\tstartSliding()\n\t{\n\t\tthis.stopSliding();\n\t\tif (this.isMenuMouseEnterBlocked === true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.slidingModeTimeoutId = setTimeout(function() {\n\t\t\tthis.slidingModeTimeoutId = 0;\n\t\t\tthis.switchToSlidingMode(true);\n\t\t}.bind(this), 400);\n\t}\n\n\thandleBurgerClick(open)\n\t{\n\t\tthis.getItemsController().switchToViewMode();\n\n\t\tthis.menuHeaderBurger.classList.add(\"menu-switcher-hover\");\n\n\t\tthis.toggle(open, function() {\n\n\t\t\tthis.blockSliding();\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.menuHeaderBurger.classList.remove(\"menu-switcher-hover\");\n\n\t\t\t\tthis.releaseSliding();\n\n\t\t\t}.bind(this), 100);\n\n\t\t}.bind(this));\n\t}\n\n\thandleMenuMouseEnter(event)\n\t{\n\t\tif (!this.isCollapsed())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.startSliding();\n\t}\n\n\thandleMenuMouseLeave(event)\n\t{\n\t\tthis.stopSliding();\n\t\tif (this.isMenuMouseLeaveBlocked.length <= 0)\n\t\t{\n\t\t\tthis.switchToSlidingMode(false);\n\t\t}\n\t}\n\n\thandleMenuDoubleClick(event)\n\t{\n\t\tif (event.target === this.menuBody)\n\t\t{\n\t\t\tthis.toggle();\n\t\t}\n\t}\n\n\thandleHeaderLogoMouserEnter(event)\n\t{\n\t\tBX.addClass(this.headerSettings, \"header-logo-block-settings-show\");\n\t}\n\n\thandleHeaderLogoMouserLeave(event)\n\t{\n\t\tif (!this.headerSettings.hasAttribute(\"data-rename-portal\"))\n\t\t{\n\t\t\tBX.removeClass(this.headerSettings, \"header-logo-block-settings-show\");\n\t\t}\n\t}\n\n\thandleUpButtonClick()\n\t{\n\t\tthis.blockSliding();\n\n\t\tif (this.isUpButtonReversed())\n\t\t{\n\t\t\twindow.scrollTo(0, this.lastScrollOffset);\n\t\t\tthis.lastScrollOffset = 0;\n\t\t\tthis.unreverseUpButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.lastScrollOffset = window.pageYOffset;\n\t\t\twindow.scrollTo(0, 0);\n\t\t\tthis.reverseUpButton();\n\t\t}\n\n\t\tsetTimeout(this.releaseSliding.bind(this), 100);\n\t}\n\n\thandleUpButtonMouseLeave()\n\t{\n\t\tthis.releaseSliding();\n\t}\n\n\thandleDocumentScroll()\n\t{\n\t\tthis.#adjustAdminPanel();\n\t\tthis.applyScrollMode();\n\n\t\tif (window.pageYOffset > document.documentElement.clientHeight)\n\t\t{\n\t\t\tthis.showUpButton();\n\n\t\t\tif (this.isUpButtonReversed())\n\t\t\t{\n\t\t\t\tthis.unreverseUpButton();\n\t\t\t\tthis.lastScrollOffset = 0;\n\t\t\t}\n\t\t}\n\t\telse if (!this.isUpButtonReversed())\n\t\t{\n\t\t\tthis.hideUpButton();\n\t\t}\n\n\t\tif (window.pageXOffset > 0)\n\t\t{\n\t\t\tthis.menuContainer.style.left = -window.pageXOffset + \"px\";\n\t\t\tthis.upButton.style.left = -window.pageXOffset + (this.isCollapsed() ? 0 : 172) + \"px\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.menuContainer.style.removeProperty(\"left\");\n\t\t\tthis.upButton.style.removeProperty(\"left\");\n\t\t}\n\t}\n\n\tswitchToSlidingMode(enable, immediately)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tthis.stopSliding();\n\n\t\t\tif (BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t\t{\n\t\t\t\tif (immediately !== true)\n\t\t\t\t{\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-closing-mode\");\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-mode menu-sliding-opening-mode\");\n\t\t\t}\n\t\t}\n\t\telse if (this.isCollapsedMode && !BX.hasClass(this.mainTable, \"menu-sliding-mode\"))\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-closing-mode\");\n\n\t\t\tif (immediately !== true)\n\t\t\t{\n\t\t\t\tBX.addClass(this.mainTable, \"menu-sliding-opening-mode\");\n\t\t\t}\n\n\t\t\tBX.addClass(this.mainTable, \"menu-sliding-mode\");\n\t\t}\n\t}\n\n\thandleSlidingTransitionEnd(event)\n\t{\n\t\tif (event.target === this.menuContainer)\n\t\t{\n\t\t\tBX.removeClass(this.mainTable, \"menu-sliding-opening-mode menu-sliding-closing-mode\");\n\t\t}\n\t}\n\n\tswitchToScrollMode(enable)\n\t{\n\t\tif (enable === false)\n\t\t{\n\t\t\tthis.mainTable.classList.remove('menu-scroll-mode');\n\t\t}\n\t\telse if (!this.mainTable.classList.contains('menu-scroll-mode'))\n\t\t{\n\t\t\tthis.mainTable.classList.add('menu-scroll-mode');\n\t\t}\n\t}\n\n\t//region logo\n\t#isLogoMaskNeeded(): boolean\n\t{\n\t\treturn this.cache.remember('isLogoMaskNeeded', () => {\n\t\t\tconst menuHeaderLogo = this.menuHeader.querySelector(\".logo\");\n\t\t\tlet result = false;\n\t\t\tif (menuHeaderLogo && !menuHeaderLogo.querySelector(\".logo-image-container\"))\n\t\t\t{\n\t\t\t\tlet widthMeasure = menuHeaderLogo.offsetWidth === 0 ?\n\t\t\t\t\t(this.header.querySelector(\".logo\") ?\n\t\t\t\t\t\tthis.header.querySelector(\".logo\").offsetWidth : 0)\n\t\t\t\t\t: menuHeaderLogo.offsetWidth\n\t\t\t\t;\n\n\t\t\t\tresult = widthMeasure > 200;\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tswitchToLogoMaskMode(enable)\n\t{\n\t\tif (!this.#isLogoMaskNeeded())\n\t\t{\n\t\t\treturn\n\t\t}\n\t\tif (enable === false)\n\t\t{\n\t\t\tthis.mainTable.classList.remove('menu-logo-mask-mode');\n\t\t}\n\t\telse if (!this.mainTable.classList.contains('menu-logo-mask-mode'))\n\t\t{\n\t\t\tthis.mainTable.classList.add('menu-logo-mask-mode');\n\t\t}\n\t}\n\t//endregion\n\n\ttoggle(flag, fn)\n\t{\n\t\tlet leftColumn = BX(\"layout-left-column\");\n\t\tif (!leftColumn)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst isOpen = !this.mainTable.classList.contains('menu-collapsed-mode');\n\n\t\tif (flag === isOpen || this.mainTable.classList.contains('menu-animation-mode'))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.onCustomEvent(\"BX.Bitrix24.LeftMenuClass:onMenuToggle\", [flag, this]);\n\n\t\tvar logoImageContainer = this.menuHeader.querySelector(\".logo-image-container\");\n\t\tif (logoImageContainer)\n\t\t{\n\t\t\tvar logoWidth = this.header.querySelector(\".logo-image-container\").offsetWidth;\n\t\t\tif (logoWidth > 0)\n\t\t\t{\n\t\t\t\tlogoImageContainer.style.width = logoWidth + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.blockSliding();\n\t\tthis.switchToSlidingMode(false, true);\n\t\tthis.applyScrollMode();\n\n\t\tleftColumn.style.overflow = \"hidden\";\n\t\tthis.mainTable.classList.add(\"menu-animation-mode\", (isOpen ? \"menu-animation-closing-mode\" : \"menu-animation-opening-mode\"));\n\n\t\tvar menuLinks = [].slice.call(leftColumn.querySelectorAll('.menu-item-link'));\n\t\tvar menuMoreBtn = leftColumn.querySelector('.menu-collapsed-more-btn');\n\t\tvar menuMoreBtnDefault = leftColumn.querySelector('.menu-default-more-btn');\n\n\t\tvar menuSitemapIcon = leftColumn.querySelector('.menu-sitemap-icon-box');\n\t\tvar menuSitemapText = leftColumn.querySelector('.menu-sitemap-btn-text');\n\n\t\tvar menuEmployeesText = leftColumn.querySelector('.menu-invite-employees-text');\n\t\tvar menuEmployeesIcon = leftColumn.querySelector('.menu-invite-icon-box');\n\n\t\tvar licenseContainer = leftColumn.querySelector('.menu-license-all-container');\n\t\tvar licenseBtn = leftColumn.querySelector('.menu-license-all-default');\n\t\tvar licenseHeight = licenseBtn ? licenseBtn.offsetHeight : 0;\n\t\tvar licenseCollapsedBtn = leftColumn.querySelector('.menu-license-all-collapsed');\n\n\t\tconst settingsIconBox = this.menuContainer.querySelector(\".menu-settings-icon-box\");\n\t\tconst settingsBtnText = this.menuContainer.querySelector(\".menu-settings-btn-text\");\n\n\t\tvar menuTextDivider = leftColumn.querySelector('.menu-item-separator');\n\t\tvar menuMoreCounter = leftColumn.querySelector('.menu-item-index-more');\n\n\t\tvar pageHeader = this.mainTable.querySelector(\".page-header\");\n\t\tvar imBar = document.getElementById(\"bx-im-bar\");\n\t\tvar imBarWidth = imBar ? imBar.offsetWidth : 0;\n\n\t\t(new BX.easing({\n\t\t\tduration: 300,\n\t\t\tstart: {\n\t\t\t\ttranslateIcon: isOpen ? -100 : 0,\n\t\t\t\ttranslateText: isOpen ? 0 : -100,\n\t\t\t\ttranslateMoreBtn: isOpen ? 0 : -84,\n\t\t\t\ttranslateLicenseBtn: isOpen ? 0 : -100,\n\t\t\t\theightLicenseBtn: isOpen ? licenseHeight : 40,\n\t\t\t\tburgerMenuWidth: isOpen ? 33 : 66,\n\t\t\t\tsidebarWidth: isOpen ? 240 : 66, /* these values are duplicated in style.css as well */\n\t\t\t\topacity: isOpen ? 100 : 0,\n\t\t\t\topacityRevert: isOpen ? 0 : 100\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\ttranslateIcon: isOpen ? 0 : -100,\n\t\t\t\ttranslateText: isOpen ? -100 : -18,\n\t\t\t\ttranslateMoreBtn: isOpen ? -84 : 0,\n\t\t\t\ttranslateLicenseBtn: isOpen ? -100 : 0,\n\t\t\t\theightLicenseBtn: isOpen ? 40 : licenseHeight,\n\t\t\t\tburgerMenuWidth: isOpen ? 66 : 33,\n\t\t\t\tsidebarWidth: isOpen ? 66 : 240,\n\t\t\t\topacity: isOpen ? 0 : 100,\n\t\t\t\topacityRevert: isOpen ? 100 : 0\n\t\t\t},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: function (state)\n\t\t\t{\n\t\t\t\tleftColumn.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuContainer.style.width = state.sidebarWidth + \"px\";\n\t\t\t\tthis.menuHeaderBurger.style.width = state.burgerMenuWidth + \"px\";\n\t\t\t\tthis.headerBurger.style.width = state.burgerMenuWidth + \"px\";\n\n\t\t\t\t//Change this formula in template_style.css as well\n\t\t\t\tif (pageHeader)\n\t\t\t\t{\n\t\t\t\t\tpageHeader.style.maxWidth = \"calc(100vw - \" + state.sidebarWidth + \"px - \" + imBarWidth + \"px)\";\n\t\t\t\t}\n\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\t//Closing Mode\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tsettingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tsettingsIconBox.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tsettingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\tsettingsBtnText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuMoreCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (licenseContainer)\n\t\t\t\t\t{\n\t\t\t\t\t\tlicenseBtn.style.transform = \"translateX(\" + state.translateLicenseBtn + \"px)\";\n\t\t\t\t\t\tlicenseBtn.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tlicenseBtn.style.height = state.heightLicenseBtn + \"px\";\n\n\t\t\t\t\t\tlicenseCollapsedBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tlicenseCollapsedBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuArrow.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t\tmenuArrow.style.opacity = state.opacity / 100;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\t\tmenuCounter.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t//Opening Mode\n\t\t\t\t\tmenuTextDivider.style.opacity = 0;\n\n\t\t\t\t\tif (menuSitemapIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuSitemapIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuSitemapText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuSitemapText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuSitemapText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesIcon)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuEmployeesIcon.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuEmployeesText)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuEmployeesText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuEmployeesText.style.opacity = state.opacity / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tsettingsIconBox.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tsettingsIconBox.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tsettingsBtnText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\tsettingsBtnText.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tmenuMoreBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\tmenuMoreBtn.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\tmenuMoreBtnDefault.style.transform = \"translateX(\" + state.translateMoreBtn + \"px)\";\n\t\t\t\t\tmenuMoreBtnDefault.style.opacity = state.opacity / 100;\n\n\t\t\t\t\tif (menuMoreCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuMoreCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (licenseContainer)\n\t\t\t\t\t{\n\t\t\t\t\t\tlicenseBtn.style.transform = \"translateX(\" + state.translateLicenseBtn + \"px)\";\n\t\t\t\t\t\tlicenseBtn.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tlicenseBtn.style.height = state.heightLicenseBtn + \"px\";\n\n\t\t\t\t\t\tlicenseCollapsedBtn.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tlicenseCollapsedBtn.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t}\n\n\t\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\t\tmenuLinkText.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\tmenuLinkText.style.opacity = state.opacity / 100;\n\t\t\t\t\t\tmenuLinkText.style.display = \"inline-block\";\n\n\t\t\t\t\t\tmenuIcon.style.transform = \"translateX(\" + state.translateIcon + \"px)\";\n\t\t\t\t\t\tmenuIcon.style.opacity = state.opacityRevert / 100;\n\n\t\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuArrow.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t\t// menuArrow.style.opacity = state.opacityRevert / 100;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmenuCounter.style.transform = \"translateX(\" + state.translateText + \"px)\";\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this),\n\t\t\tcomplete: function ()\n\t\t\t{\n\t\t\t\tif (isOpen)\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = true;\n\t\t\t\t\tBX.addClass(this.mainTable, \"menu-collapsed-mode\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.isCollapsedMode = false;\n\t\t\t\t\tBX.removeClass(this.mainTable, \"menu-collapsed-mode\");\n\t\t\t\t}\n\n\t\t\t\tBX.removeClass(\n\t\t\t\t\tthis.mainTable,\n\t\t\t\t\t\"menu-animation-mode menu-animation-opening-mode menu-animation-closing-mode\"\n\t\t\t\t);\n\n\t\t\t\tvar containers = [\n\t\t\t\t\tleftColumn,\n\t\t\t\t\tmenuTextDivider,\n\t\t\t\t\tthis.menuHeaderBurger,\n\t\t\t\t\tthis.headerBurger,\n\t\t\t\t\tsettingsIconBox,\n\t\t\t\t\tsettingsBtnText,\n\t\t\t\t\tmenuMoreBtnDefault,\n\t\t\t\t\tmenuMoreBtn,\n\t\t\t\t\tlogoImageContainer,\n\t\t\t\t\tmenuSitemapIcon,\n\t\t\t\t\tmenuSitemapText,\n\t\t\t\t\tmenuEmployeesIcon,\n\t\t\t\t\tmenuEmployeesText,\n\t\t\t\t\tmenuMoreCounter,\n\t\t\t\t\tlicenseBtn,\n\t\t\t\t\tlicenseCollapsedBtn,\n\t\t\t\t\tthis.menuContainer,\n\t\t\t\t\tpageHeader\n\t\t\t\t];\n\n\t\t\t\tcontainers.forEach(function(container) {\n\t\t\t\t\tif (container)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontainer.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tmenuLinks.forEach(function(item) {\n\t\t\t\t\tvar menuIcon = item.querySelector(\".menu-item-icon-box\");\n\t\t\t\t\tvar menuLinkText = item.querySelector(\".menu-item-link-text\");\n\t\t\t\t\tvar menuCounter = item.querySelector(\".menu-item-index\");\n\t\t\t\t\tvar menuArrow = item.querySelector('.menu-item-link-arrow');\n\n\t\t\t\t\titem.style.cssText = \"\";\n\t\t\t\t\tmenuLinkText.style.cssText = \"\";\n\t\t\t\t\tmenuIcon.style.cssText = \"\";\n\n\t\t\t\t\tif (menuArrow)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuArrow.style.cssText = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\tif (menuCounter)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuCounter.style.cssText = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.releaseSliding();\n\t\t\t\tthis.#adjustAdminPanel();\n\n\t\t\t\tif (BX.type.isFunction(fn))\n\t\t\t\t{\n\t\t\t\t\tfn();\n\t\t\t\t}\n\n\t\t\t\tBackend.toggleMenu(isOpen);\n\n\t\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\t\tevent.initEvent(\"resize\", true, true);\n\t\t\t\twindow.dispatchEvent(event);\n\n\t\t\t}.bind(this)\n\t\t})).animate();\n\t}\n\t//endregion\n\n\thandleViewMode()\n\t{\n\t\tthis.getItemsController().switchToViewMode();\n\t}\n\n\tapplyScrollMode()\n\t{\n\t\tthis.switchToLogoMaskMode(true);\n\t\tconst threshold = this.scrollModeThreshold + Utils.adminPanel.height;\n\t\tthis.switchToScrollMode(window.pageYOffset > threshold);\n\t}\n\n\thandleGroupPanelOpen()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked.push('group');\n\t}\n\n\thandleGroupPanelClose()\n\t{\n\t\tthis.isMenuMouseLeaveBlocked.pop();\n\t}\n\n\tshowUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-active\");\n\t}\n\n\thideUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-active\");\n\t}\n\n\treverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.add(\"menu-up-button-reverse\");\n\t}\n\n\tunreverseUpButton()\n\t{\n\t\tthis.menuContainer.classList.remove(\"menu-up-button-reverse\");\n\t}\n\n\tisUpButtonReversed()\n\t{\n\t\treturn this.menuContainer.classList.contains(\"menu-up-button-reverse\");\n\t}\n\n\tisDefaultTheme()\n\t{\n\t\treturn document.body.classList.contains(\"bitrix24-default-theme\");\n\t}\n\n\tgetTopPadding()\n\t{\n\t\treturn this.isDefaultTheme() ? 0 : 9;\n\t}\n\n\t// region Public functions\n\tinitPagetitleStar(): boolean\n\t{\n\t\treturn ItemUserFavorites.isCurrentPageStandard(\n\t\t\tItemUserFavorites.getActiveTopMenuItem()\n\t\t);\n\t}\n\n\tgetStructureForHelper()\n\t{\n\t\tconst items = {menu: {}};\n\t\t[\"show\", \"hide\"].forEach((state) => {\n\t\t\tArray.from(this.menuContainer\n\t\t\t\t.querySelectorAll(`[data-status=\"${state}\"][data-type=\"${ItemSystem.code}\"]`)\n\t\t\t)\n\t\t\t.forEach((node) => {\n\t\t\t\titems[state] = items[state] || [];\n\t\t\t\titems[state].push(node.getAttribute(\"data-id\"))\n\t\t\t});\n\t\t});\n\t\treturn items;\n\t}\n\n\tshowItemWarning({itemId, title, events})\n\t{\n\t\tif (this.getItemsController().items.has(itemId))\n\t\t{\n\t\t\tthis.getItemsController().items.get(itemId).showWarning(title, events);\n\t\t}\n\t}\n\n\tremoveItemWarning(itemId)\n\t{\n\t\tif (this.getItemsController().items.has(itemId))\n\t\t{\n\t\t\tthis.getItemsController().items.get(itemId).removeWarning();\n\t\t}\n\t}\n\n\t#specialLiveFeedDecrement = 0;\n\tdecrementCounter(node, iDecrement)\n\t{\n\t\tif (!node || node.id !== 'menu-counter-live-feed')\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#specialLiveFeedDecrement += parseInt(iDecrement);\n\t\tthis.getItemsController().decrementCounter({\n\t\t\t'live-feed' : parseInt(iDecrement)\n\t\t});\n\t}\n\n\tupdateCounters(counters, send)\n\t{\n\t\tif (!counters)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (counters['**'] !== undefined)\n\t\t{\n\t\t\tcounters['live-feed'] = counters['**'];\n\t\t\tdelete counters['**'];\n\t\t}\n\t\tif (counters['live-feed'])\n\t\t{\n\t\t\tif (counters['live-feed'] <= 0)\n\t\t\t{\n\t\t\t\tthis.#specialLiveFeedDecrement = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcounters['live-feed'] -= this.#specialLiveFeedDecrement;\n\t\t\t}\n\t\t}\n\t\tthis.getItemsController().updateCounters(counters, send);\n\t}\n\t//endregion\n\n\t#adjustAdminPanel()\n\t{\n\t\tif (!this['menuAdjustAdminPanel'])\n\t\t{\n\t\t\tthis['menuAdjustAdminPanel'] = ({data}) => {\n\t\t\t\tthis.menuContainer.style.top = [data, 'px'].join('');\n\t\t\t}\n\t\t\tEventEmitter.subscribe(Utils.adminPanel,\n\t\t\t\tOptions.eventName('onPanelHasChanged'),\n\t\t\t\tthis['menuAdjustAdminPanel']\n\t\t\t);\n\t\t}\n\t\tthis.menuContainer.style.top = [Utils.adminPanel.top, 'px'].join('');\n\t}\n}\n"],"names":["Options","name","Type","isStringFilled","join","DefaultController","container","events","Array","from","Object","keys","forEach","key","EventEmitter","subscribe","eventName","createPopup","arguments","emit","show","close","PresetCustomController","form","Tag","render","Loc","getMessage","button","PopupManager","create","constructor","toString","overlay","contentColor","contentNoPaddings","lightShadow","draggable","restrict","closeByEsc","titleBar","offsetTop","offsetLeft","cacheable","closeIcon","content","buttons","SaveButton","onclick","isReady","setWaiting","elements","value","promise","then","hide","console","log","CancelButton","AdminPanel","BX","bindEvents","addCustomEvent","isCollapsed","top","bind","offsetHeight","adminPanelState","getClass","fixed","height","rect","getBoundingClientRect","bottom","Math","max","fixedHeight","Utils","_classStaticPrivateFieldSpecGet","document","location","pathname","search","Uri","href","response","UI","Notification","Center","notify","errors","message","position","category","autoHideDelay","url","String","trim","match","link","createElement","host","hash","getInstance","PresetDefaultController","mode","querySelector","cloneNode","onFirstShow","querySelectorAll","node","addEventListener","otherNode","classList","CreateButton","text","isWaiting","currentPreset","forms","checked","presetId","data","hasOwnProperty","reload","catchError","SettingsController","menu","Menu","bindElement","items","getItems","angle","getPopupWindow","menuItems","html","className","push","assign","event","item","getMenuWindow","Backend","collapse","ajax","runAction","analyticsLabel","leftmenu","action","itemData","id","menuItemId","itemText","itemId","itemInfo","menu_item_id","firstItemLink","version","firstPageLink","firstPageUrl","forNewUsersOnly","itemsSort","customItems","userApply","preset","analyticsFirst","Item","parentContainer","init","onDeleteAsFavorites","setTimeout","GLOBAL_TARGET","incrementMaxListeners","destroy","showError","showMessage","dataset","code","textContent","links","hasAttribute","getAttribute","split","makeTextIcons","storage","openInNewPage","setAttribute","Text","encode","linkNode","innerHTML","unsubscribe","decrementMaxListeners","currentUri","result","index","areUrlsEqual","priority","contains","icon","getShortName","parseInt","counterValue","oldValue","add","remove","warning","getId","style","display","newValue","error","title","removeWarning","Event","appendChild","parentNode","removeChild","showMessagePopup","darkMode","onClose","autoHide","TypeError","getName","getCode","animate","filter","v","counterId","topMenuId","Promise","resolve","reject","showForm","getEditFields","length","focus","refineUrl","popup","isEditMode","undefined","indexOf","checkForm","itemInfoToSave","backendSaveItem","checkedUri","checkedUrlBrief","getPath","replace","currentUrlBrief","getHost","shortName","words","substring","firstWord","secondWord","i","toUpperCase","ItemUserFavorites","deleteFavoritesItemMenu","context","getSimilarToUrl","getCurUri","window","onCustomEvent","isActive","contextMenuItems","showUpdate","update","isAdmin","itemLinkNode","addAdminSharedItemMenu","type","ItemAdminShared","updateFavoritesItemMenu","Main","interfaceButtonsManager","firstTopMenuInstance","values","getObjects","shift","topMenuItem","getActive","path","ID","NODE","URL","TEXT","DATA_ID","COUNTER_ID","COUNTER","SUB_LINK","topMenuPoint","currentFullPath","pageTitle","pageLink","getActiveTopMenuItem","startX","startY","isCurrentPageStandard","getCurPage","menuNodeCoord","left","isStandardItem","subLink","getElementById","innerText","titleCoord","addFavoritesItemMenu","createNode","animateFromPoint","topPoint","animateToPoint","pos","ItemUserSelf","deleteSelfITem","MessageBox","confirm","messageBox","saveSelfItemMenu","resolve1","reject2","deletePerm","deleteAdminSharedItemMenu","canDelete","codeToConvert","ItemAdminCustom","deleteCustomItem","actions","ItemSystem","ItemGroup","toggleAndSave","Dom","removeClass","groupContainer","updateCounter","preventDefault","stopPropagation","expandGroup","expand","collapseGroup","insertAfter","hideGroupContainer","stop","overflow","addClass","slideParams","easing","duration","start","opacity","finish","transition","makeEaseOut","transitions","quart","step","state","complete","checkAttribute","contentHeight","removeAttribute","ItemGroupSystem","itemMappings","getItem","itemClassName","itemClass","detect","ItemActive","highlight","Runtime","debounce","theMostOfTheLinks","linkUri","changeActiveItem","uri","actualParams","getQueryParams","maxCount","theMostOfTheLinkServiceData","params","mismatches","comparedLinkParams","unhighlight","parent","closest","ItemsController","Map","hiddenContainer","registerItem","toggleHiddenContainer","getActiveItem","set","checkAndSet","parentItem","markAsActive","deleteItem","convertItem","openItemMenu","target","has","checkAndUnset","unsubscribeAll","replaceChild","startTop","dragElement","attrs","insertBeforeElement","nextElementSibling","insertBefore","nextSibling","oldParent","emitEvent","counters","send","countersDynamic","entries","localStorage","hiddenCounterNode","Number","BXIM","res","getCounterValue","counterNode","visibleValue","desktop","setBrowserIconBadge","updateCounters","Element","styleValue","styleDisplay","get","unregisterItem","hideItem","contextMenuItem","showItem","isExtranet","setItemAsAMainPage","getDropDownActions","actionItem","switchToViewMode","switchToEditMode","call","onShow","scrollHeight","opening","hiddenBlock","maxHeight","linear","itemGroup","hiddenCounterValue","newParent","markAsInactive","saveSortItems","currentGroupId","chain","role","groupId","groupItem","pop","group_id","LINK","decode","NEW_PAGE","saveItemsSort","topMenuNode","body","finishY","paddingLeft","jsDD","Enable","onbxdragstart","onbxdrag","x","y","onbxdraghover","dest","onbxdragstop","registerObject","dnd","itemDomBlank","itemMoveBlank","draggableBlock","isHiddenContainerVisible","registerItems","registerDest","firstNode","unregisterDest","menuItemsBlockHeight","min","groupHolder","prepend","itemPlaceHolder","onHiddenBlockIsEmptyEmitted","checkAndCorrect","e","enableDest","refreshDestArea","ItemDirector","page","saveCurrentPage","topItem","saveStandardPage","deleteCurrentPage","deleteStandardPage","showAdd","Cache","MemoryCache","menuContainer","isCustomPresetRestricted","isCustomPresetAvailable","isCollapsedMode","initAndBindNodes","getItemsController","handleDocumentScroll","handleMenuDoubleClick","handleMenuMouseEnter","handleMenuMouseLeave","handleSlidingTransitionEnd","menuHeader","menuBody","menuItemsBlock","header","headerBurger","headerLogoBlock","headerSettings","handleHeaderLogoMouserEnter","handleHeaderLogoMouserLeave","mainTable","menuHeaderBurger","handleBurgerClick","upButton","handleUpButtonClick","menuMoreButton","handleShowHiddenClick","siteMapItem","handleSiteMapClick","settingsSaveBtn","handleViewMode","getSettingsController","cache","remember","EditMode","toggle","ViewMode","onDragModeOn","switchToSlidingMode","isMenuMouseLeaveBlocked","onDragModeOff","onHiddenBlockIsVisible","onHiddenBlockIsHidden","onHiddenBlockIsEmpty","onHiddenBlockIsNotEmpty","onItemHasBeenAdded","addItem","onGettingSettingMenuItems","onPresetIsSet","setCustomPreset","setSystemPreset","onPresetIsPostponed","postponeSystemPreset","handleGroupPanelOpen","handleGroupPanelClose","isDomNode","leftMenuNode","leftMenuLink","previousElementSibling","setFirstPage","clearCache","contextMenu","dataItem","topMenu","addMenuItem","getItemDirector","currentPageInMenu","compatData","promises","p","fulfill","onDestroy","getDefaultPresetController","onYes","setDefaultPreset","MessageBoxButtons","YES_CANCEL","menuItemWithAddingToFavorites","showAddToSelf","getContainer","setDefaultMenu","InfoHelper","getCustomPresetController","SidePanel","Instance","open","allowChangeHistory","customLeftBoundary","stopSliding","isMenuMouseEnterBlocked","clearTimeout","slidingModeTimeoutId","blockSliding","releaseSliding","startSliding","isUpButtonReversed","scrollTo","lastScrollOffset","unreverseUpButton","pageYOffset","reverseUpButton","applyScrollMode","documentElement","clientHeight","showUpButton","hideUpButton","pageXOffset","removeProperty","enable","immediately","hasClass","flag","fn","leftColumn","isOpen","logoImageContainer","logoWidth","offsetWidth","width","menuLinks","slice","menuMoreBtn","menuMoreBtnDefault","menuSitemapIcon","menuSitemapText","menuEmployeesText","menuEmployeesIcon","licenseContainer","licenseBtn","licenseHeight","licenseCollapsedBtn","settingsIconBox","settingsBtnText","menuTextDivider","menuMoreCounter","pageHeader","imBar","imBarWidth","translateIcon","translateText","translateMoreBtn","translateLicenseBtn","heightLicenseBtn","burgerMenuWidth","sidebarWidth","opacityRevert","maxWidth","transform","menuIcon","menuLinkText","menuCounter","menuArrow","createEvent","initEvent","dispatchEvent","containers","cssText","isFunction","toggleMenu","switchToLogoMaskMode","threshold","scrollModeThreshold","adminPanel","switchToScrollMode","isDefaultTheme","showWarning","iDecrement","decrementCounter","menuHeaderLogo","widthMeasure"],"mappings":"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"}