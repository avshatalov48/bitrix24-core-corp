this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(e,t){"use strict";var o=function(){function e(t){var o=this;babelHelpers.classCallCheck(this,e);this.ajaxPath=t.ajaxPath;if(BX("configLogoPostForm")&&BX("configLogoPostForm").client_logo){BX.bind(BX("configLogoPostForm").client_logo,"change",(function(){o.LogoChange()}))}if(BX("configDeleteLogo")){BX.bind(BX("configDeleteLogo"),"click",(function(){o.LogoDelete(BX("configDeleteLogo"))}))}if(BX("configLogoRetinaPostForm")&&BX("configLogoRetinaPostForm").client_logo_retina){BX.bind(BX("configLogoRetinaPostForm").client_logo_retina,"change",(function(){o.LogoChange("retina")}))}if(BX("configDeleteLogoretina")){BX.bind(BX("configDeleteLogoretina"),"click",(function(){o.LogoDelete(BX("configDeleteLogoretina"),"retina")}))}}babelHelpers.createClass(e,[{key:"LogoChange",value:function e(t){t=t=="retina"?"retina":"";BX("configWaitLogo"+t).style.display="inline-block";BX.ajax.submit(BX(t=="retina"?"configLogoRetinaPostForm":"configLogoPostForm"),(function(e){try{var o=JSON.parse(e);if(o.error){BX("config_logo_error_block").style.display="block";var n=BX.findChild(BX("config_logo_error_block"),{class:"content-edit-form-notice-text"},true,false);n.innerHTML="<span class='content-edit-form-notice-icon'></span>"+o.error}else if(o.path){BX("config_logo_error_block").style.display="none";BX("configImgLogo"+t).src=o.path;BX("configBlockLogo"+t).style.display="inline-block";BX("configDeleteLogo"+t).style.display="inline-block"}BX("configWaitLogo"+t).style.display="none"}catch(e){BX("configWaitLogo"+t).style.display="none";return false}}))}},{key:"LogoDelete",value:function e(t,o){o=o=="retina"?"retina":"";if(confirm(BX.message("LogoDeleteConfirm"))){BX("configWaitLogo"+o).style.display="inline-block";BX.ajax.post(this.ajaxPath,{client_delete_logo:"Y",sessid:BX.bitrix_sessid(),mode:o},(function(){BX("configBlockLogo"+o).style.display="none";t.style.display="none";BX("config_error_block").style.display="none";BX("configWaitLogo"+o).style.display="none"}))}}}]);return e}();var n=function(){function e(o){var n=this;babelHelpers.classCallCheck(this,e);this.cultureList=o.cultureList;this.selectorNode=document.querySelector("[data-role='culture-selector']");this.shortDateNode=document.querySelector("[data-role='culture-short-date-format']");this.longDateNode=document.querySelector("[data-role='culture-long-date-format']");if(t.Type.isDomNode(this.selectorNode)){t.Event.bind(this.selectorNode,"change",(function(){n.changeFormatExample(n.selectorNode.value)}))}}babelHelpers.createClass(e,[{key:"changeFormatExample",value:function e(o){if(!t.Type.isDomNode(this.shortDateNode)||!t.Type.isDomNode(this.longDateNode)){return}this.shortDateNode.textContent=this.cultureList[o].SHORT_DATE_FORMAT;this.longDateNode.textContent=this.cultureList[o].LONG_DATE_FORMAT}}]);return e}();function i(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\tclass="access-delete" \n\t\t\t\t\t\t\t\ttitle="','" \n\t\t\t\t\t\t\t\thref="javascript:void(0);"\n\t\t\t\t\t\t\t\tonclick="','"\n\t\t\t\t\t\t\t></a>\t\t\n\t\t\t\t\t\t']);i=function t(){return e};return e}function a(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t\t<input type="text" name="ip_access_rights_','[]" size="30"\n\t\t\t\t\t\t\t\tonclick="','"\n\t\t\t\t\t\t\t>\t\n\t\t\t\t\t\t']);a=function t(){return e};return e}var s=t.Reflection.namespace("BX.Intranet.Configs");var r=function(){function e(t){babelHelpers.classCallCheck(this,e);this.arCurIpRights=t;var o=document.querySelectorAll("[data-role='ip-right-delete']");o.forEach(function(e){BX.bind(e,"click",function(){this.DeleteIpAccessRow(e)}.bind(this))}.bind(this))}babelHelpers.createClass(e,[{key:"DeleteIpAccessRow",value:function e(t){var o=t.parentNode.parentNode;BX.remove(t.parentNode);var n=BX.findChildren(o,{tagName:"div"},true);if(n.length<=0){var i=o.parentNode.getAttribute("data-bx-right");var a=[];for(var s=0;s<this.arCurIpRights.length;s++){if(this.arCurIpRights[s]!=i)a.push(this.arCurIpRights[s])}this.arCurIpRights=a;BX.remove(o.parentNode)}}},{key:"ShowIpAccessPopup",value:function e(o){var n=this;o=o||[];BX.Access.Init({other:{disabled:false,disabled_g2:true,disabled_cr:true},groups:{disabled:true},socnetgroups:{disabled:true}});var s={};for(var r=0;r<o.length;r++){s[o[r]]=true}BX.Access.SetSelected(s);BX.Access.ShowForm({callback:function e(o){var s=false;for(var r in o){s=BX.Access.GetProviderName(r);var l=function e(){var l=function e(t){n.addInputForIp(d)};var d=t.Tag.render(a(),c,l);var u=function e(t){n.DeleteIpAccessRow(f)};var f=t.Tag.render(i(),BX.message("SLToAllDel"),u);var g=BX.create("tr",{attrs:{"data-bx-right":c},children:[BX.create("td",{html:(s.length>0?s+": ":"")+BX.util.htmlspecialchars(o[r][c].name)+"&nbsp;",props:{className:"content-edit-form-field-name"}}),BX.create("td",{props:{className:"content-edit-form-field-input",colspan:2},children:[BX.create("div",{children:[d,f]})]})]});BX("ip_add_right_button").parentNode.insertBefore(g,BX("ip_add_right_button"));n.arCurIpRights.push(c)};for(var c in o[r]){l()}}}})}},{key:"addInputForIp",value:function e(t){var o=this;var n=t.parentNode;if(BX.nextSibling(n))return;var i=BX.clone(n);var a=BX.firstChild(i);a.value="";a.onclick=function(){o.addInputForIp(a)};var s=BX.nextSibling(a);s.onclick=function(){o.DeleteIpAccessRow(s)};n.parentNode.appendChild(i)}}]);return e}();s.IpSettingsClass=r;var l=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);this.ajaxPath=t.ajaxPath||"";this.addressFormatList=t.addressFormatList||{};this.cultureList=t.cultureList||{};new o(this);new n(this);var a=BX("allow_livefeed_toall");var s=BX("DEFAULT_all");if(a&&s){BX.bind(a,"click",BX.delegate((function(e){s.style.display=this.checked?"":"none"}),a))}var r=BX("RIGHTS_all");if(a&&r){BX.bind(a,"click",BX.delegate((function(e){r.style.display=this.checked?"":"none"}),a))}var l=BX("allow_general_chat_toall");var c=BX("chat_rights_all");if(l&&c){BX.bind(l,"click",(function(){c.style.display=this.checked?"":"none"}))}var d=BX("general_chat_can_post_select");if(d){BX.bind(d,"change",(function(){if(d.value=="MANAGER"){c.style.display=""}else{c.style.display="none"}}))}var u=BX("mp_allow_user_install");var f=BX("mp_user_install");if(u&&f){BX.bind(u,"click",(function(){f.style.display=this.checked?"":"none"}))}var g=BX("location_address_format_select");if(g){BX.bind(g,"change",(function(){var e=BX("location_address_format_description");e.innerHTML=i.addressFormatList[g.value]}))}if(BX.type.isDomNode(BX("smtp_use_auth"))){BX.bind(BX("smtp_use_auth"),"change",BX.proxy((function(){this.showHideSmtpAuth()}),this))}}babelHelpers.createClass(e,[{key:"submitForm",value:function e(t){BX.addClass(t,"webform-button-wait webform-button-active");BX.submit(BX("configPostForm"))}},{key:"otpSwitchOffInfo",value:function e(t){if(!t.checked){BX.PopupWindowManager.create("otpSwitchOffInfo",t,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_SECURITY_SWITCH_OFF_INFO")+"</div>"}).show()}}},{key:"onGdprChange",value:function e(t){var o=document.querySelectorAll("[data-role='gdpr-data']");for(var n=0;n<o.length;n++){o[n].style.visibility=t.checked?"visible":"collapse"}}},{key:"adminOtpIsRequiredInfo",value:function e(t){BX.PopupWindowManager.create("adminOtpIsRequiredInfo",t,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_ADMIN_IS_REQUIRED_INFO")+"</div>"}).show()}},{key:"showDiskExtendedFullTextInfo",value:function e(t,o){t.stopPropagation;t.preventDefault();BX.PopupWindowManager.create("diskExtendedFullTextInfo",o,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_DISK_EXTENDED_FULLTEXT_INFO")+"</div>"}).show()}},{key:"geoDataSwitch",value:function e(t){if(t.checked){t.checked=false;BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:BX.message("CONFIG_COLLECT_GEO_DATA_CONFIRM").length>400?640:480,title:BX.message("CONFIG_COLLECT_GEO_DATA"),message:BX.message("CONFIG_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:BX.message("CONFIG_COLLECT_GEO_DATA_OK"),onOk:function e(){t.checked=true;return true}})}}}]);return e}();s.Functions=l})(this.BX.Intranet.Configs=this.BX.Intranet.Configs||{},BX);
//# sourceMappingURL=script.map.js