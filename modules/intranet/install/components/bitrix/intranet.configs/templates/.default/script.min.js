BX.namespace("BX.Bitrix24.Configs");BX.Bitrix24.Configs.LogoClass=function(){var e=function(e){this.ajaxPath=e};e.prototype.LogoChange=function(e){e=e=="retina"?"retina":"";BX("configWaitLogo"+e).style.display="inline-block";BX.ajax.submit(BX(e=="retina"?"configLogoRetinaPostForm":"configLogoPostForm"),function(o){try{var t=JSON.parse(o);if(t.error){BX("config_logo_error_block").style.display="block";var i=BX.findChild(BX("config_logo_error_block"),{class:"content-edit-form-notice-text"},true,false);i.innerHTML="<span class='content-edit-form-notice-icon'></span>"+t.error}else if(t.path){BX("config_logo_error_block").style.display="none";if(e!="retina"){BX("logo_24_img").src=t.path}else{BX("logo_24_img").srcset=t.path+" 2x"}BX("logo_24_text").style.display="none";BX("logo_24_img").style.display="block";BX("configImgLogo"+e).src=t.path;BX("configBlockLogo"+e).style.display="inline-block";BX("configDeleteLogo"+e).style.display="inline-block"}BX("configWaitLogo"+e).style.display="none"}catch(o){BX("configWaitLogo"+e).style.display="none";return false}})};e.prototype.LogoDelete=function(e,o){o=o=="retina"?"retina":"";if(confirm(BX.message("LogoDeleteConfirm"))){BX("configWaitLogo"+o).style.display="inline-block";BX.ajax.post(this.ajaxPath,{client_delete_logo:"Y",sessid:BX.bitrix_sessid(),mode:o},function(){if(o!="retina"){BX("logo_24_img").src=""}else{BX("logo_24_img").srcset=""}if(!BX("logo_24_img").getAttribute("src")&&!BX("logo_24_img").getAttribute("srcset")){BX("logo_24_img").style.display="none";BX("logo_24_text").style.display="block"}BX("configBlockLogo"+o).style.display="none";e.style.display="none";BX("config_error_block").style.display="none";BX("configWaitLogo"+o).style.display="none"})}};return e}();BX.Bitrix24.Configs.IpSettingsClass=function(){var e=function(e){this.arCurIpRights=e};e.prototype.DeleteIpAccessRow=function(e){var o=e.parentNode.parentNode;BX.remove(e.parentNode);var t=BX.findChildren(o,{tagName:"div"},true);if(t.length<=0){var i=o.parentNode.getAttribute("data-bx-right");var n=[];for(var s=0;s<this.arCurIpRights.length;s++)if(this.arCurIpRights[s]!=i)n.push(this.arCurIpRights[s]);this.arCurIpRights=n;BX.remove(o.parentNode)}};e.prototype.ShowIpAccessPopup=function(e){var o=this;e=e||[];BX.Access.Init({other:{disabled:false,disabled_g2:true,disabled_cr:true},groups:{disabled:true},socnetgroups:{disabled:true}});var t={};for(var i=0;i<e.length;i++)t[e[i]]=true;BX.Access.SetSelected(t);BX.Access.ShowForm({callback:function(e){var t=false;for(var i in e){t=BX.Access.GetProviderName(i);for(var n in e[i]){var s=BX.create("tr",{attrs:{"data-bx-right":n},children:[BX.create("td",{html:(t.length>0?t+": ":"")+e[i][n].name+"&nbsp;",props:{className:"content-edit-form-field-name"}}),BX.create("td",{props:{className:"content-edit-form-field-input",colspan:2},children:[BX.create("div",{children:[BX.create("input",{attrs:{type:"text",name:"ip_access_rights_"+n+"[]",size:"30"},props:{},events:{click:function(){o.addInputForIp(this)}}}),BX.create("a",{attrs:{href:"javascript:void(0);",title:BX.message("SLToAllDel")},props:{className:"access-delete"},events:{click:function(){o.DeleteIpAccessRow(this)}}})]})]})]});BX("ip_add_right_button").parentNode.insertBefore(s,BX("ip_add_right_button"));o.arCurIpRights.push(n)}}}})};e.prototype.addInputForIp=function(e){var o=this;var t=e.parentNode;if(BX.nextSibling(t))return;var i=BX.clone(t);var n=BX.firstChild(i);n.value="";n.onclick=function(){o.addInputForIp(this)};BX.nextSibling(n).onclick=function(){o.DeleteIpAccessRow(this)};t.parentNode.appendChild(i)};return e}();BX.Bitrix24.Configs.Functions={init:function(){var e=BX("allow_livefeed_toall");var o=BX("DEFAULT_all");if(e&&o){BX.bind(e,"click",BX.delegate(function(e){o.style.display=this.checked?"":"none"},e))}var t=BX("RIGHTS_all");if(e&&t){BX.bind(e,"click",BX.delegate(function(e){t.style.display=this.checked?"":"none"},e))}if(BX("configLogoPostForm")&&BX("configLogoPostForm").client_logo){BX.bind(BX("configLogoPostForm").client_logo,"change",function(){B24ConfigsLogo.LogoChange()})}if(BX("configDeleteLogo")){BX.bind(BX("configDeleteLogo"),"click",function(){B24ConfigsLogo.LogoDelete(this)})}if(BX("configLogoRetinaPostForm")&&BX("configLogoRetinaPostForm").client_logo_retina){BX.bind(BX("configLogoRetinaPostForm").client_logo_retina,"change",function(){B24ConfigsLogo.LogoChange("retina")})}if(BX("configDeleteLogoretina")){BX.bind(BX("configDeleteLogoretina"),"click",function(){B24ConfigsLogo.LogoDelete(this,"retina")})}var i=BX("allow_general_chat_toall");var n=BX("chat_rights_all");if(i&&n){BX.bind(i,"click",function(){n.style.display=this.checked?"":"none"})}var s=BX("mp_allow_user_install");var a=BX("mp_user_install");if(s&&a){BX.bind(s,"click",function(){a.style.display=this.checked?"":"none"})}if(BX.type.isDomNode(BX("smtp_use_auth"))){BX.bind(BX("smtp_use_auth"),"change",BX.proxy(function(){this.showHideSmtpAuth()},this))}},submitForm:function(e){BX.addClass(e,"webform-button-wait webform-button-active");BX.submit(BX("configPostForm"))},otpSwitchOffInfo:function(e){if(!e.checked){BX.PopupWindowManager.create("otpSwitchOffInfo",e,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_SECURITY_SWITCH_OFF_INFO")+"</div>"}).show()}},onGdprChange:function(e){var o=document.querySelectorAll("[data-role='gdpr-data']");for(var t=0;t<o.length;t++){o[t].style.visibility=e.checked?"visible":"collapse"}},adminOtpIsRequiredInfo:function(e){BX.PopupWindowManager.create("adminOtpIsRequiredInfo",e,{autoHide:true,offsetLeft:-100,offsetTop:15,overlay:false,draggable:{restrict:true},closeByEsc:true,closeIcon:{right:"12px",top:"10px"},content:'<div style="padding: 15px; width: 300px; font-size: 13px">'+BX.message("CONFIG_OTP_ADMIN_IS_REQUIRED_INFO")+"</div>"}).show()}};
//# sourceMappingURL=script.map.js