function JCEmployeeSelectControl(t){var e=this;this.arParams=t;this.arEmployeesData={};this.multiple=this.arParams.MULTIPLE;if(null!=t.VALUE)this.SetValue(t.VALUE);this.div=null;this._onkeypress=function(t){if(null==t)t=window.event;if(null==t)return;if(t.keyCode==27)e.CloseDialog()};var i=this.multiple?[]:0;this.SetValue=function(t){if(this.multiple){if(typeof t=="string"||typeof t=="object"&&t.constructor==String)t=t.split(",");if(typeof t=="object"){i=[];for(var e=0;e<t.length;e++){var s=parseInt(t[e]);if(!isNaN(s))i[i.length]=s}}return typeof i=="object"}else{i=parseInt(t);return!isNaN(i)}};this.GetValue=function(t){if(this.multiple){if(null==t)t=false;if(t){if(null!=i)return i.join(",")}return i}else{return parseInt(i)}}}JCEmployeeSelectControl.prototype.OnSelect=function(){if(null!=this.arParams.ONSELECT){var t=this.GetValue();if(this.arParams.GET_FULL_INFO){if(!this.multiple){t=this.arEmployeesData[t];t.NAME=t.NAME.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&")}else{var e=[];for(var i=0;i<t.length;i++){var s=this.arEmployeesData[t[i]];s.NAME=s.NAME.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&amp;/g,"&");e[e.length]=s}t=e}this.arParams.ONSELECT(t)}else{this.arParams.ONSELECT(t)}}};JCEmployeeSelectControl.prototype.Show=function(t){if(null!=this.div)return;var e=this;if(null==t)t={};if(null==t.id)t.id="employee_select_control";if(null==t.className)t.className="";this.arParams.WIN=t;CHttpRequest.Action=function(t){e._ShowWindow(t)};var i="/bitrix/components/bitrix/intranet.user.search/ajax.php?lang="+this.arParams.LANGUAGE_ID+"&win_id="+this.arParams.WIN.id+"&SITE_ID="+this.arParams.SITE_ID+"&IS_EXTRANET="+this.arParams.IS_EXTRANET+"&sessid="+this.arParams.SESSID+"&nt="+this.arParams.NAME_TEMPLATE;var s=this.GetValue(true);if((this.multiple?s.length:s)>0)i+="&value="+s;if(this.multiple)i+="&multiple=Y";ShowWaitWindow();CHttpRequest.Send(i)};JCEmployeeSelectControl.prototype._ShowWindow=function(t){CloseWaitWindow();var e=this;this.div=document.body.appendChild(document.createElement("DIV"));this.div.id=this.arParams.WIN.id;this.div.className="settings-float-form"+(this.arParams.WIN&&this.arParams.WIN.className?" "+this.arParams.WIN.className:"");this.div.style.position="absolute";this.div.style.zIndex="2200";if(!!BX.WindowManager&&!!BX.WindowManager.Get()){this.div.style.zIndex=BX.WindowManager.GetZIndex()}this.div.innerHTML=t;this.div.__object=this;var i=BX.GetWindowSize();var s=parseInt(i.scrollLeft+i.innerWidth/2-this.div.offsetWidth/2);var a=parseInt(i.scrollTop+i.innerHeight/2-this.div.offsetHeight/2);jsFloatDiv.Show(this.div,s,a,false,false);jsUtils.onCustomEvent("onEmployeeSearchShow",{div:this.div});BX.bind(document,"keypress",this._onkeypress)};JCEmployeeSelectControl.prototype.CloseDialog=function(){BX.unbind(document,"keypress",this._onkeypress);jsUtils.onCustomEvent("onEmployeeSearchClose",{div:this.div});jsFloatDiv.Close(this.div);this.div.parentNode.removeChild(this.div);this.div=null};
//# sourceMappingURL=script.map.js