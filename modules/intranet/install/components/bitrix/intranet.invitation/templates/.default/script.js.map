{"version":3,"file":"script.js","sources":["src/submit.js","src/self-register.js","src/phone.js","src/row.js","src/selector.js","src/form.js"],"sourcesContent":["import {Type, Validation, Loc, Dom, Event} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Submit extends EventEmitter\n{\n\tconstructor(parent)\n\t{\n\t\tsuper();\n\t\tthis.parent = parent;\n\t\tthis.setEventNamespace(\"BX.Intranet.Invitation.Submit\");\n\t\tthis.parent.subscribe(\"onButtonClick\", (event) => {});\n\t}\n\n\tparseEmailAndPhone(form)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet errorInputData = [];\n\t\tlet items = [];\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{4,22}\\d$/;\n\t\tconst rows = Array.prototype.slice.call(form.querySelectorAll(\".js-form-row\"));\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (!phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\"PHONE\": phoneValue,\n\t\t\t\t\t\t\t\"PHONE_COUNTRY\": phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t\"EMAIL\": emailValue,\n\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n\n\tgetGroupAndDepartmentData(requestData)\n\t{\n\t\tconst selector = this.parent.selector;\n\t\tconst selectorItems = selector.getItems();\n\n\t\tif (selectorItems[\"departments\"].length > 0)\n\t\t{\n\t\t\trequestData[\"UF_DEPARTMENT\"] = selectorItems[\"departments\"];\n\t\t}\n\n\t\tif (selectorItems[\"projects\"].length > 0)\n\t\t{\n\t\t\trequestData[\"SONET_GROUPS_CODE\"] = selectorItems[\"projects\"];\n\t\t}\n\t}\n\n\tsubmitInvite()\n\t{\n\t\tconst inviteForm = this.parent.contentBlocks[\"invite\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', ')}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tconst requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tthis.sendAction(\"invite\", requestData);\n\t}\n\n\tsubmitInviteWithGroupDp()\n\t{\n\t\tconst inviteWithGroupDpForm = this.parent.contentBlocks[\"invite-with-group-dp\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteWithGroupDpForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tthis.sendAction(\"inviteWithGroupDp\", requestData);\n\t}\n\n\tsubmitSelf()\n\t{\n\t\tconst selfForm = this.parent.contentBlocks[\"self\"].querySelector(\"form\");\n\t\tlet obRequestData = {\n\t\t\t\"allow_register\": selfForm[\"allow_register\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_confirm\": selfForm[\"allow_register_confirm\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_secret\": selfForm[\"allow_register_secret\"].value,\n\t\t\t\"allow_register_whitelist\": selfForm[\"allow_register_whitelist\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"self\", obRequestData);\n\t}\n\n\tsubmitExtranet()\n\t{\n\t\tconst extranetForm = this.parent.contentBlocks[\"extranet\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(extranetForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tthis.sendAction(\"extranet\", requestData);\n\t}\n\n\tsubmitIntegrator()\n\t{\n\t\tconst integratorForm = this.parent.contentBlocks[\"integrator\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"integrator_email\": integratorForm[\"integrator_email\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"inviteIntegrator\", obRequestData);\n\t}\n\n\tsubmitMassInvite()\n\t{\n\t\tconst massInviteForm = this.parent.contentBlocks[\"mass-invite\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"ITEMS\": massInviteForm[\"mass_invite_emails\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"massInvite\", obRequestData);\n\t}\n\n\tsubmitAdd()\n\t{\n\t\tconst addForm = this.parent.contentBlocks[\"add\"].querySelector(\"form\");\n\n\t\tlet requestData = {\n\t\t\t\"ADD_EMAIL\": addForm[\"ADD_EMAIL\"].value,\n\t\t\t\"ADD_NAME\": addForm[\"ADD_NAME\"].value,\n\t\t\t\"ADD_LAST_NAME\": addForm[\"ADD_LAST_NAME\"].value,\n\t\t\t\"ADD_POSITION\": addForm[\"ADD_POSITION\"].value,\n\t\t\t\"ADD_SEND_PASSWORD\": (\n\t\t\t\taddForm[\"ADD_SEND_PASSWORD\"]\n\t\t\t\t&& !!addForm[\"ADD_SEND_PASSWORD\"].checked\n\t\t\t\t\t? addForm[\"ADD_SEND_PASSWORD\"].value\n\t\t\t\t\t: \"N\"\n\t\t\t),\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tthis.sendAction(\"add\", requestData);\n\t}\n\n\tsendAction(action, requestData)\n\t{\n\t\tthis.disableSubmitButton(true);\n\t\trequestData[\"userOptions\"] = this.parent.userOptions;\n\n\t\tBX.ajax.runComponentAction(this.parent.componentName, action, {\n\t\t\tsignedParameters: this.parent.signedParameters,\n\t\t\tmode: \"ajax\",\n\t\t\tdata: requestData\n\t\t}).then(function (response) {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (action === \"self\")\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showSuccessMessage(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.parent.changeContent(\"success\");\n\t\t\t\t\tthis.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}.bind(this), function (response) {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data == \"user_limit\")\n\t\t\t{\n\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\"featureID\",\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TITLE\"),\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TEXT\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.parent.showErrorMessage(response.errors[0].message);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\tdisableSubmitButton(isDisable)\n\t{\n\t\tconst button = this.parent.button;\n\n\t\tif (!Type.isDomNode(button) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tDom.addClass(button, \"ui-btn-wait\");\n\t\t\tbutton.style.cursor = \"auto\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(button, \"ui-btn-wait\");\n\t\t\tbutton.style.cursor = \"pointer\";\n\t\t}\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, \"BX.Intranet.Invitation:onAdd\", { users: users });\n\t}\n}","import {Event, Type, Dom, Text, Loc} from \"main.core\";\n\nexport class SelfRegister\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tif (Type.isDomNode(this.parent.contentBlocks[\"self\"]))\n\t\t{\n\t\t\tthis.selfBlock = this.parent.contentBlocks[\"self\"];\n\t\t\tthis.bindActions();\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.selfBlock.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click', BX.delegate(() => {\n\t\t\t\tthis.regenerateSecret(this.parent.regenerateUrlBase);\n\t\t\t}, this));\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.selfBlock.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', BX.delegate(() => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t}, this));\n\t\t}\n\n\t\tconst selfToggleSettingsButton = this.selfBlock.querySelector(\"[data-role='selfToggleSettingsButton']\");\n\t\tif (Type.isDomNode(selfToggleSettingsButton))\n\t\t{\n\t\t\tEvent.bind(selfToggleSettingsButton, 'change', () => {\n\t\t\t\tthis.toggleSettings(selfToggleSettingsButton);\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret(registerUrl)\n\t{\n\t\tconst value = Text.getRandom(8);\n\n\t\tconst allowRegisterSecretNode = this.selfBlock.querySelector(\"[data-role='allowRegisterSecret']\");\n\t\tif (Type.isDomNode(allowRegisterSecretNode))\n\t\t{\n\t\t\tallowRegisterSecretNode.value = value || '';\n\t\t}\n\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode) && registerUrl)\n\t\t{\n\t\t\tallowRegisterUrlNode.value = registerUrl + (value || 'yes');\n\t\t}\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode))\n\t\t{\n\t\t\tBX.clipboard.copy(allowRegisterUrlNode.value);\n\t\t\tthis.showHintPopup(Loc.getMessage(\"BX24_INVITE_DIALOG_COPY_URL\"), allowRegisterUrlNode);\n\n\t\t\tBX.ajax.runAction('intranet.controller.invite.copyregisterurl', {\n\t\t\t\tdata: {}\n\t\t\t}).then(function (response) {}, function (response) {});\n\t\t}\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: function () {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this), 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\ttoggleSettings(inputElement)\n\t{\n\t\tconst controlBlock = this.selfBlock.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tif (!Dom.hasClass(controlBlock, 'disallow-registration'))\n\t\t\t{\n\t\t\t\tconst switcher = controlBlock.querySelector(\"[data-role='self-switcher']\");\n\t\t\t\tthis.showHintPopup(Loc.getMessage(\"INTRANET_INVITE_DIALOG_SELF_OFF_HINT\"), switcher);\n\t\t\t}\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.selfBlock.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}","import {Dom, Type, Tag, Event} from \"main.core\";\n\nexport class Phone\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif(this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute(\"data-num\");\n\n\t\tif (inputNode.parentNode.querySelector(\"#phone_number_\" + num))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = \"57px\";\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tlet changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tinputNode.parentNode.querySelector('#phone_number_' + i).value = e.value;\n\t\t\t\tinputNode.parentNode.querySelector('#phone_country_' + i).value = e.country;\n\t\t\t}\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(\"[data-role='phone_flag_\"+ num +\"']\"),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode)\n\t\t});\n\n\t\t//for ctrl+v paste\n\t\tsetTimeout(() => {\n\t\t\tif (!inputNode.parentNode.querySelector('#phone_number_' + num).value)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].getCountry()\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}","import {Event, Type, Dom, Tag, Loc} from \"main.core\";\nimport {Phone} from \"./phone\";\n\nexport class Row\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.inputNum = 0;\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tthis.rowsContainer = this.contentBlock.querySelector(\"[data-role='rows-container']\");\n\t\t\tthis.bindActions();\n\t\t}\n\n\t\tif (this.parent.isInvitationBySmsAvailable)\n\t\t{\n\t\t\tthis.phoneObj = new Phone(this);\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst moreButton = this.contentBlock.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.renderInputRow();\n\t\t\t});\n\t\t}\n\n\t\tconst massInviteButton = this.contentBlock.querySelector(\"[data-role='invite-mass']\");\n\t\tif (Type.isDomNode(massInviteButton))\n\t\t{\n\t\t\tEvent.unbindAll(massInviteButton);\n\t\t\tEvent.bind(massInviteButton, 'click', () => {\n\t\t\t\tconst massMenuNode = document.querySelector(\"[data-role='menu-mass-invite']\");\n\t\t\t\tif (Type.isDomNode(massMenuNode))\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(massMenuNode, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t}\n\n\tbindPhoneChecker(element)\n\t{\n\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = Array.prototype.slice.call(element.querySelectorAll(\".js-email-phone-input\"));\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach(element => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = Array.prototype.slice.call(container.querySelectorAll(\"input\"));\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tlet closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value !== \"\" ? \"block\" : \"none\");\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnode.value = \"\";\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tconst phoneBlock = node.parentNode.querySelector(\"[data-role='phone-block']\");\n\t\t\t\t\tif (Type.isDomNode(phoneBlock))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newInput = Tag.render`\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"EMAIL[]\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t\t/>`;\n\n\t\t\t\t\t\tDom.replace(node, newInput);\n\t\t\t\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\t\t\t\tthis.bindPhoneChecker(newInput.parentNode);\n\t\t\t\t\t\tDom.remove(phoneBlock);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', \"none\");\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInviteInputs(numRows = 3)\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tfor (let i = 0; i < numRows; i++)\n\t\t{\n\t\t\tthis.renderInputRow(i === 0);\n\t\t}\n\t}\n\n\trenderInputRow(showTitles = false)\n\t{\n\t\tlet emailTitle, nameTitle, lastNameTitle;\n\n\t\tif (showTitles)\n\t\t{\n\t\t\temailTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT\")}\n\t\t\t\t</div>`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? emailTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t\tthis.bindPhoneChecker(element);\n\t}\n\n\trenderRegisterInputs()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_EMAIL_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_POSITION_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n\n\trenderIntegratorInput()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n}","import {Type, Dom} from \"main.core\";\nimport {TagSelector} from 'ui.entity-selector';\n\nexport class Selector\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.options = params.options;\n\t\tthis.entities = [];\n\n\t\tthis.prepareOptions();\n\t}\n\n\tprepareOptions()\n\t{\n\t\tfor (let type in this.options)\n\t\t{\n\t\t\tif (!this.options.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"department\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tthis.entities.push({\n\t\t\t\t\tid: \"department\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: \"departmentsOnly\",\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (type === \"project\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tlet optionValue = {\n\t\t\t\t\tid: \"project\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tfillRecentTab: true\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (this.options[type] === \"extranet\")\n\t\t\t\t{\n\t\t\t\t\toptionValue[\"options\"][\"extranet\"] = true;\n\t\t\t\t}\n\t\t\t\tthis.entities.push(optionValue);\n\t\t\t}\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tthis.tagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tentities: this.entities\n\t\t\t},\n\t\t\tcontext: 'INTRANET_INVITATION'\n\t\t});\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tDom.clean(this.contentBlock);\n\t\t\tthis.tagSelector.renderTo(this.contentBlock);\n\t\t}\n\t}\n\n\tgetItems()\n\t{\n\t\tlet departments = [];\n\t\tlet projects = [];\n\t\tconst tagSelectorItems = this.tagSelector.getDialog().getSelectedItems();\n\n\t\ttagSelectorItems.forEach(item => {\n\t\t\tconst id = parseInt(item.getId());\n\t\t\tconst type = item.getEntityId();\n\n\t\t\tif (type === \"department\")\n\t\t\t{\n\t\t\t\tdepartments.push(id);\n\t\t\t}\n\t\t\telse if (type === \"project\")\n\t\t\t{\n\t\t\t\tprojects.push(id);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdepartments: departments,\n\t\t\tprojects: projects\n\t\t};\n\t}\n}","import {Type, Dom, Event, Loc} from 'main.core';\nimport {Submit} from './submit';\nimport {SelfRegister} from './self-register';\nimport {Row} from \"./row\";\nimport {Selector} from \"./selector\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.componentName = params.componentName;\n\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.contentBlocks = {};\n\t\tthis.userOptions = params.userOptions;\n\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === \"Y\";\n\t\tthis.isCloud = params.isCloud === \"Y\";\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === \"Y\";\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === \"Y\";\n\t\tthis.regenerateUrlBase = params.regenerateUrlBase;\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tconst blocks = Array.prototype.slice.call(\n\t\t\t\tthis.contentContainer.querySelectorAll(\".js-intranet-invitation-block\")\n\t\t\t);\n\t\t\t(blocks || []).forEach((block) => {\n\t\t\t\tlet blockType = block.getAttribute(\"data-role\");\n\t\t\t\tblockType = blockType.replace(\"-block\", \"\");\n\t\t\t\tthis.contentBlocks[blockType] = block;\n\t\t\t});\n\n\t\t\tthis.errorMessageBlock = this.contentContainer.querySelector(\"[data-role='error-message']\");\n\t\t\tthis.successMessageBlock = this.contentContainer.querySelector(\"[data-role='success-message']\");\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tthis.button = document.querySelector(\"#intranet-invitation-btn\");\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.menuItems = Array.prototype.slice.call(this.menuContainer.querySelectorAll(\"a\"));\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.changeContent(this.menuItems[0].getAttribute('data-action'));\n\t\t}\n\n\t\tthis.submit = new Submit(this);\n\t\tthis.submit.subscribe('onInputError', (event) => {\n\t\t\tthis.showErrorMessage(event.data.error);\n\t\t});\n\n\t\tif (this.isCloud)\n\t\t{\n\t\t\tthis.selfRegister = new SelfRegister(this);\n\t\t}\n\n\t\tthis.arrowBox = document.querySelector('.invite-wrap-decal-arrow');\n\t\tif (Type.isDomNode(this.arrowBox))\n\t\t{\n\t\t\tthis.arrowRect = this.arrowBox.getBoundingClientRect();\n\t\t\tthis.arrowHeight = this.arrowRect.height;\n\t\t\tthis.setSetupArrow();\n\t\t}\n\t}\n\n\trenderSelector(params)\n\t{\n\t\tthis.selector = new Selector(this, params);\n\t\tthis.selector.render();\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tthis.hideErrorMessage();\n\t\tthis.hideSuccessMessage();\n\n\t\tif (action.length > 0)\n\t\t{\n\t\t\tfor (let type in this.contentBlocks)\n\t\t\t{\n\t\t\t\tlet block = this.contentBlocks[type];\n\n\t\t\t\tif (type === action)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-hidden');\n\t\t\t\t\tDom.addClass(block, 'invite-block-shown');\n\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t};\n\t\t\t\t\tconst row = new Row(this, params);\n\n\t\t\t\t\tif (action === 'invite')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(5);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'invite-with-group-dp')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'extranet')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: false,\n\t\t\t\t\t\t\t\tproject: \"extranet\",\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"add\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderRegisterInputs();\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"integrator\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderIntegratorInput();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-shown');\n\t\t\t\t\tDom.addClass(block, 'invite-block-hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.changeButton(action);\n\t\t}\n\t}\n\n\tchangeButton(action)\n\t{\n\t\tEvent.unbindAll(this.button, 'click');\n\n\t\tif (!this.isCreatorEmailConfirmed)\n\t\t{\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.showErrorMessage(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === \"invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"mass-invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitMassInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"invite-with-group-dp\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInviteWithGroupDp();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"add\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitAdd();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"self\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitSelf();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"integrator\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitIntegrator();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"extranet\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitExtranet();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"success\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tBX.fireEvent(this.menuItems[0], 'click');\n\t\t\t});\n\t\t}\n\t}\n\n\tshowSuccessMessage(successText)\n\t{\n\t\tthis.hideErrorMessage();\n\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.successMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(successText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideSuccessMessage()\n\t{\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tshowErrorMessage(errorText)\n\t{\n\t\tthis.hideSuccessMessage();\n\n\t\tif (Type.isDomNode(this.errorMessageBlock) && errorText)\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.errorMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(errorText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideErrorMessage()\n\t{\n\t\tif (Type.isDomNode(this.errorMessageBlock))\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tgetSetupArrow()\n\t{\n\t\tthis.body = document.querySelector('.invite-body');\n\t\tthis.panelConfirmBtn = document.getElementById('intranet-invitation-btn');\n\t\tthis.sliderContent = document.querySelector('.ui-page-slider-workarea');\n\t\tthis.sliderHeader = document.querySelector('.ui-side-panel-wrap-title-wrap');\n\t\tthis.buttonPanel = document.querySelector('.ui-button-panel');\n\t\tthis.inviteButton = document.querySelector('.invite-form-buttons');\n\n\t\tthis.sliderHeaderHeight = this.sliderHeader.getBoundingClientRect().height;\n\t\tthis.buttonPanelRect = this.buttonPanel.getBoundingClientRect();\n\t\tthis.panelRect = this.panelConfirmBtn.getBoundingClientRect();\n\t\tthis.btnWidth = Math.ceil(this.panelRect.width);\n\t\tthis.arrowWidth = Math.ceil(this.arrowRect.width);\n\t\tthis.delta = (this.btnWidth - this.arrowWidth) / 2;\n\t\tthis.sliderContentRect = this.sliderContent.getBoundingClientRect();\n\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t}\n\n\tupdateArrow()\n\t{\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\t}\n\n\tsetSetupArrow()\n\t{\n\t\tthis.getSetupArrow();\n\t\tthis.arrowBox.style.left = (this.panelRect.left - this.delta) + 'px';\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\n\t\twindow.addEventListener('resize', function() {\n\t\t\tthis.arrowBox.style.left = (this.panelRect.left - this.delta) + 'px';\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\n\t\tthis.inviteButton.addEventListener('click', function() {\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\t}\n}\n"],"names":["Submit","parent","setEventNamespace","subscribe","event","form","Type","isDomNode","errorInputData","items","phoneExp","rows","Array","prototype","slice","call","querySelectorAll","forEach","row","emailInput","querySelector","phoneInput","nameInput","lastNameInput","emailValue","value","trim","isInvitationBySmsAvailable","phoneValue","test","String","toLowerCase","push","phoneCountryInput","Validation","isEmail","requestData","selector","selectorItems","getItems","length","inviteForm","contentBlocks","parseEmailAndPhone","Event","BaseEvent","data","error","Loc","getMessage","join","emit","sendAction","inviteWithGroupDpForm","showErrorMessage","getGroupAndDepartmentData","selfForm","obRequestData","checked","extranetForm","integratorForm","massInviteForm","addForm","action","disableSubmitButton","userOptions","BX","ajax","runComponentAction","componentName","signedParameters","mode","then","response","showSuccessMessage","changeContent","sendSuccessEvent","bind","B24","licenseInfoPopup","show","message","errors","isDisable","button","isBoolean","Dom","addClass","style","cursor","removeClass","users","SidePanel","Instance","postMessageAll","window","EventEmitter","SelfRegister","selfBlock","bindActions","regenerateButton","delegate","regenerateSecret","regenerateUrlBase","copyRegisterUrlButton","copyRegisterUrl","selfToggleSettingsButton","toggleSettings","registerUrl","Text","getRandom","allowRegisterSecretNode","allowRegisterUrlNode","clipboard","copy","showHintPopup","runAction","bindNode","PopupWindow","content","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onAfterPopupShow","setTimeout","close","inputElement","controlBlock","hasClass","switcher","toggleClass","settingsBlock","Phone","count","index","maxCount","inputStack","inputNode","num","getAttribute","parentNode","element","Tag","render","paddingLeft","append","flagNode","showCountrySelector","changeCallback","i","e","country","PhoneNumber","Input","node","flagSize","onChange","getValue","getCountry","_onFlagClick","Row","params","contentBlock","inputNum","rowsContainer","phoneObj","moreButton","unbindAll","renderInputRow","massInviteButton","massMenuNode","document","fireEvent","renderPhoneRow","inputNodes","checkPhoneInput","container","nextElementSibling","preventDefault","phoneBlock","newInput","replace","bindCloseIcons","bindPhoneChecker","remove","numRows","clean","showTitles","emailTitle","nameTitle","lastNameTitle","Selector","options","entities","prepareOptions","type","hasOwnProperty","id","selectMode","allowSelectRootDepartment","optionValue","fillRecentTab","tagSelector","TagSelector","dialogOptions","context","renderTo","departments","projects","tagSelectorItems","getDialog","getSelectedItems","item","parseInt","getId","getEntityId","Form","formParams","isPlainObject","menuContainer","menuContainerNode","contentContainer","contentContainerNode","isExtranetInstalled","isCloud","isCreatorEmailConfirmed","blocks","block","blockType","errorMessageBlock","successMessageBlock","UI","Hint","init","menuItems","submit","selfRegister","arrowBox","arrowRect","getBoundingClientRect","arrowHeight","height","setSetupArrow","hideErrorMessage","hideSuccessMessage","renderInviteInputs","selectorParams","department","project","renderSelector","renderRegisterInputs","renderIntegratorInput","changeButton","innerText","submitInvite","submitMassInvite","submitInviteWithGroupDp","submitAdd","submitSelf","submitIntegrator","submitExtranet","successText","display","alert","innerHTML","util","htmlspecialchars","errorText","body","panelConfirmBtn","getElementById","sliderContent","sliderHeader","buttonPanel","inviteButton","sliderHeaderHeight","buttonPanelRect","panelRect","btnWidth","Math","ceil","width","arrowWidth","delta","sliderContentRect","bodyHeight","contentHeight","classList","add","getSetupArrow","left","addEventListener","updateArrow"],"mappings":"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"}