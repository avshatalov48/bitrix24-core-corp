{"version":3,"file":"script.js","sources":["src/submit.js","src/self-register.js","src/phone.js","src/row.js","src/selector.js","src/active-directory.js","src/form.js"],"sourcesContent":["import {Type, Validation, Loc, Dom, Event} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Submit extends EventEmitter\n{\n\tconstructor(parent)\n\t{\n\t\tsuper();\n\t\tthis.parent = parent;\n\t\tthis.setEventNamespace(\"BX.Intranet.Invitation.Submit\");\n\t\tthis.parent.subscribe(\"onButtonClick\", (event) => {});\n\t}\n\n\tparseEmailAndPhone(form)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet errorInputData = [];\n\t\tlet items = [];\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{4,22}\\d$/;\n\t\tconst rows = Array.prototype.slice.call(form.querySelectorAll(\".js-form-row\"));\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (!phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\"PHONE\": phoneValue,\n\t\t\t\t\t\t\t\"PHONE_COUNTRY\": phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t\"EMAIL\": emailValue,\n\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n\n\tgetGroupAndDepartmentData(requestData)\n\t{\n\t\tconst selector = this.parent.selector;\n\t\tconst selectorItems = selector.getItems();\n\n\t\tif (selectorItems[\"departments\"].length > 0)\n\t\t{\n\t\t\trequestData[\"UF_DEPARTMENT\"] = selectorItems[\"departments\"];\n\t\t}\n\n\t\tif (selectorItems[\"projects\"].length > 0)\n\t\t{\n\t\t\trequestData[\"SONET_GROUPS_CODE\"] = selectorItems[\"projects\"];\n\t\t}\n\t}\n\n\tsubmitInvite()\n\t{\n\t\tconst inviteForm = this.parent.contentBlocks[\"invite\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', ')}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tconst requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"invite\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"invite\", requestData, analyticsLabel);\n\t}\n\n\tsubmitInviteWithGroupDp()\n\t{\n\t\tconst inviteWithGroupDpForm = this.parent.contentBlocks[\"invite-with-group-dp\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteWithGroupDpForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"withGroupOrDepartment\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"inviteWithGroupDp\", requestData, analyticsLabel);\n\t}\n\n\tsubmitSelf()\n\t{\n\t\tconst selfForm = this.parent.contentBlocks[\"self\"].querySelector(\"form\");\n\t\tlet obRequestData = {\n\t\t\t\"allow_register\": selfForm[\"allow_register\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_confirm\": selfForm[\"allow_register_confirm\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_secret\": selfForm[\"allow_register_secret\"].value,\n\t\t\t\"allow_register_whitelist\": selfForm[\"allow_register_whitelist\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"self\", obRequestData);\n\t}\n\n\tsubmitExtranet()\n\t{\n\t\tconst extranetForm = this.parent.contentBlocks[\"extranet\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(extranetForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {\n\t\t\t\terror: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}\n\t\t\t});\n\t\t\tthis.emit(\"onInputError\", event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"extranet\",\n\t\t\t\"INVITATION_COUNT\": items.length\n\t\t};\n\n\t\tthis.sendAction(\"extranet\", requestData, analyticsLabel);\n\t}\n\n\tsubmitIntegrator()\n\t{\n\t\tconst integratorForm = this.parent.contentBlocks[\"integrator\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"integrator_email\": integratorForm[\"integrator_email\"].value,\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"integrator\"\n\t\t};\n\n\t\tthis.sendAction(\"inviteIntegrator\", obRequestData, analyticsLabel);\n\t}\n\n\tsubmitMassInvite()\n\t{\n\t\tconst massInviteForm = this.parent.contentBlocks[\"mass-invite\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"ITEMS\": massInviteForm[\"mass_invite_emails\"].value\n\t\t};\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"mass\"\n\t\t};\n\t\tthis.sendAction(\"massInvite\", obRequestData, analyticsLabel);\n\t}\n\n\tsubmitAdd()\n\t{\n\t\tconst addForm = this.parent.contentBlocks[\"add\"].querySelector(\"form\");\n\n\t\tlet requestData = {\n\t\t\t\"ADD_EMAIL\": addForm[\"ADD_EMAIL\"].value,\n\t\t\t\"ADD_NAME\": addForm[\"ADD_NAME\"].value,\n\t\t\t\"ADD_LAST_NAME\": addForm[\"ADD_LAST_NAME\"].value,\n\t\t\t\"ADD_POSITION\": addForm[\"ADD_POSITION\"].value,\n\t\t\t\"ADD_SEND_PASSWORD\": (\n\t\t\t\taddForm[\"ADD_SEND_PASSWORD\"]\n\t\t\t\t&& !!addForm[\"ADD_SEND_PASSWORD\"].checked\n\t\t\t\t\t? addForm[\"ADD_SEND_PASSWORD\"].value\n\t\t\t\t\t: \"N\"\n\t\t\t),\n\t\t};\n\t\tthis.getGroupAndDepartmentData(requestData);\n\n\t\tconst analyticsLabel = {\n\t\t\t\"INVITATION_TYPE\": \"add\"\n\t\t};\n\t\tthis.sendAction(\"add\", requestData, analyticsLabel);\n\t}\n\n\tsendAction(action, requestData, analyticsLabel)\n\t{\n\t\tthis.disableSubmitButton(true);\n\t\trequestData[\"userOptions\"] = this.parent.userOptions;\n\n\t\tBX.ajax.runComponentAction(this.parent.componentName, action, {\n\t\t\tsignedParameters: this.parent.signedParameters,\n\t\t\tmode: \"ajax\",\n\t\t\tdata: requestData,\n\t\t\tanalyticsLabel: analyticsLabel\n\t\t}).then((response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (action === \"self\")\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showSuccessMessage(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.parent.changeContent(\"success\");\n\t\t\t\t\tthis.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}, (response) => {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data == \"user_limit\")\n\t\t\t{\n\t\t\t\tB24.licenseInfoPopup.show(\n\t\t\t\t\t\"featureID\",\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TITLE\"),\n\t\t\t\t\tBX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TEXT\")\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.parent.showErrorMessage(response.errors[0].message);\n\t\t\t}\n\t\t});\n\t}\n\n\tdisableSubmitButton(isDisable)\n\t{\n\t\tconst button = this.parent.button;\n\n\t\tif (!Type.isDomNode(button) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tDom.addClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(button, [\"ui-btn-wait\", \"invite-cursor-auto\"]);\n\t\t}\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, \"BX.Intranet.Invitation:onAdd\", { users: users });\n\t}\n}","import {Event, Type, Dom, Text, Loc} from \"main.core\";\n\nexport class SelfRegister\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tif (Type.isDomNode(this.parent.contentBlocks[\"self\"]))\n\t\t{\n\t\t\tthis.selfBlock = this.parent.contentBlocks[\"self\"];\n\t\t\tthis.bindActions();\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.selfBlock.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click',() => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.regenerateSecret(this.parent.regenerateUrlBase);\n\t\t\t});\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.selfBlock.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', () => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t});\n\t\t}\n\n\t\tconst selfToggleSettingsButton = this.selfBlock.querySelector(\"[data-role='selfToggleSettingsButton']\");\n\t\tif (Type.isDomNode(selfToggleSettingsButton))\n\t\t{\n\t\t\tEvent.bind(selfToggleSettingsButton, 'change', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.toggleSettings(selfToggleSettingsButton);\n\t\t\t});\n\t\t}\n\n\t\tconst allowRegisterConfirm = this.selfBlock.querySelector(\"[data-role='allowRegisterConfirm']\");\n\t\tif (Type.isDomNode(allowRegisterConfirm))\n\t\t{\n\t\t\tEvent.bind(allowRegisterConfirm, 'change', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t\tthis.toggleWhiteList(allowRegisterConfirm);\n\t\t\t});\n\t\t}\n\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tEvent.bind(selfWhiteList, 'input', () => {\n\t\t\t\tthis.parent.activateButton();\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret(registerUrl)\n\t{\n\t\tconst value = Text.getRandom(8);\n\n\t\tconst allowRegisterSecretNode = this.selfBlock.querySelector(\"[data-role='allowRegisterSecret']\");\n\t\tif (Type.isDomNode(allowRegisterSecretNode))\n\t\t{\n\t\t\tallowRegisterSecretNode.value = value || '';\n\t\t}\n\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode) && registerUrl)\n\t\t{\n\t\t\tallowRegisterUrlNode.value = registerUrl + (value || 'yes');\n\t\t}\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode))\n\t\t{\n\t\t\tBX.clipboard.copy(allowRegisterUrlNode.value);\n\t\t\tthis.showHintPopup(Loc.getMessage(\"BX24_INVITE_DIALOG_COPY_URL\"), allowRegisterUrlNode);\n\n\t\t\tBX.ajax.runAction('intranet.controller.invite.copyregisterurl', {\n\t\t\t\tdata: {}\n\t\t\t}).then(function (response) {}, function (response) {});\n\t\t}\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: function () {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this), 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\ttoggleSettings(inputElement)\n\t{\n\t\tconst controlBlock = this.selfBlock.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tif (!Dom.hasClass(controlBlock, 'disallow-registration'))\n\t\t\t{\n\t\t\t\tconst switcher = controlBlock.querySelector(\"[data-role='self-switcher']\");\n\t\t\t\tthis.showHintPopup(Loc.getMessage(\"INTRANET_INVITE_DIALOG_SELF_OFF_HINT\"), switcher);\n\t\t\t}\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.selfBlock.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n\n\ttoggleWhiteList(inputElement)\n\t{\n\t\tconst selfWhiteList = this.selfBlock.querySelector(\"[data-role='selfWhiteList']\");\n\t\tif (Type.isDomNode(selfWhiteList))\n\t\t{\n\t\t\tDom.style(selfWhiteList, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}","import {Dom, Type, Tag, Event} from \"main.core\";\n\nexport class Phone\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif(this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute(\"data-num\");\n\n\t\tif (inputNode.parentNode.querySelector(\"#phone_number_\" + num))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = \"57px\";\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tlet changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tinputNode.parentNode.querySelector('#phone_number_' + i).value = e.value;\n\t\t\t\tinputNode.parentNode.querySelector('#phone_country_' + i).value = e.country;\n\t\t\t}\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(\"[data-role='phone_flag_\"+ num +\"']\"),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode)\n\t\t});\n\n\t\t//for ctrl+v paste\n\t\tsetTimeout(() => {\n\t\t\tif (!inputNode.parentNode.querySelector('#phone_number_' + num).value)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].getCountry()\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}","import {Event, Type, Dom, Tag, Loc} from \"main.core\";\nimport {Phone} from \"./phone\";\n\nexport class Row\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.inputNum = 0;\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tthis.rowsContainer = this.contentBlock.querySelector(\"[data-role='rows-container']\");\n\t\t\tthis.bindActions();\n\t\t}\n\n\t\tif (this.parent.isInvitationBySmsAvailable)\n\t\t{\n\t\t\tthis.phoneObj = new Phone(this);\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst moreButton = this.contentBlock.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.renderInputRow();\n\t\t\t});\n\t\t}\n\n\t\tconst massInviteButton = this.contentBlock.querySelector(\"[data-role='invite-mass']\");\n\t\tif (Type.isDomNode(massInviteButton))\n\t\t{\n\t\t\tEvent.unbindAll(massInviteButton);\n\t\t\tEvent.bind(massInviteButton, 'click', () => {\n\t\t\t\tconst massMenuNode = document.querySelector(\"[data-role='menu-mass-invite']\");\n\t\t\t\tif (Type.isDomNode(massMenuNode))\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(massMenuNode, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t}\n\n\tbindPhoneChecker(element)\n\t{\n\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = Array.prototype.slice.call(element.querySelectorAll(\".js-email-phone-input\"));\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach(element => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = Array.prototype.slice.call(container.querySelectorAll(\"input\"));\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tlet closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value !== \"\" ? \"block\" : \"none\");\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnode.value = \"\";\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tconst phoneBlock = node.parentNode.querySelector(\"[data-role='phone-block']\");\n\t\t\t\t\tif (Type.isDomNode(phoneBlock))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newInput = Tag.render`\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"EMAIL[]\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t\t/>`;\n\n\t\t\t\t\t\tDom.replace(node, newInput);\n\t\t\t\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\t\t\t\tthis.bindPhoneChecker(newInput.parentNode);\n\t\t\t\t\t\tDom.remove(phoneBlock);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', \"none\");\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInviteInputs(numRows = 3)\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tfor (let i = 0; i < numRows; i++)\n\t\t{\n\t\t\tthis.renderInputRow(i === 0);\n\t\t}\n\t}\n\n\trenderInputRow(showTitles = false)\n\t{\n\t\tlet emailTitle, nameTitle, lastNameTitle;\n\n\t\tif (showTitles)\n\t\t{\n\t\t\temailTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT\")}\n\t\t\t\t</div>`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? emailTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t\tthis.bindPhoneChecker(element);\n\t}\n\n\trenderRegisterInputs()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_EMAIL_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_POSITION_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n\n\trenderIntegratorInput()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n}","import {Type, Dom} from \"main.core\";\nimport {TagSelector} from 'ui.entity-selector';\n\nexport class Selector\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.options = params.options;\n\t\tthis.entities = [];\n\n\t\tthis.prepareOptions();\n\t}\n\n\tprepareOptions()\n\t{\n\t\tfor (let type in this.options)\n\t\t{\n\t\t\tif (!this.options.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (type === \"department\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tthis.entities.push({\n\t\t\t\t\tid: \"department\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: \"departmentsOnly\",\n\t\t\t\t\t\tallowOnlyUserDepartments: !(!!this.options[\"isAdmin\"] && this.options[\"isAdmin\"] === true),\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (type === \"project\" && !!this.options[type])\n\t\t\t{\n\t\t\t\tlet optionValue = {\n\t\t\t\t\tid: \"project\",\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tfillRecentTab: true\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tif (this.options[type] === \"extranet\")\n\t\t\t\t{\n\t\t\t\t\toptionValue[\"options\"][\"extranet\"] = true;\n\t\t\t\t}\n\t\t\t\tthis.entities.push(optionValue);\n\t\t\t}\n\t\t}\n\t}\n\n\trender()\n\t{\n\t\tconst preselectedItems = [];\n\n\t\tif (\n\t\t\tthis.options.hasOwnProperty('projectId')\n\t\t\t&& this.options.projectId > 0\n\t\t)\n\t\t{\n\t\t\tpreselectedItems.push(['project', this.options.projectId])\n\t\t}\n\n\t\tthis.tagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tpreselectedItems: preselectedItems,\n\t\t\t\tentities: this.entities,\n\t\t\t\tcontext: 'INTRANET_INVITATION'\n\t\t\t}\n\t\t});\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tDom.clean(this.contentBlock);\n\t\t\tthis.tagSelector.renderTo(this.contentBlock);\n\t\t}\n\t}\n\n\tgetItems()\n\t{\n\t\tlet departments = [];\n\t\tlet projects = [];\n\t\tconst tagSelectorItems = this.tagSelector.getDialog().getSelectedItems();\n\n\t\ttagSelectorItems.forEach(item => {\n\t\t\tconst id = parseInt(item.getId());\n\t\t\tconst type = item.getEntityId();\n\n\t\t\tif (type === \"department\")\n\t\t\t{\n\t\t\t\tdepartments.push(id);\n\t\t\t}\n\t\t\telse if (type === \"project\")\n\t\t\t{\n\t\t\t\tprojects.push(id);\n\t\t\t}\n\t\t});\n\n\t\treturn {\n\t\t\tdepartments: departments,\n\t\t\tprojects: projects\n\t\t};\n\t}\n}","export class ActiveDirectory\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\t}\n\n\tshowForm()\n\t{\n\t\tBX.UI.Feedback.Form.open(\n\t\t\t{\n\t\t\t\tid: 'intranet-active-directory',\n\t\t\t\tdefaultForm: {id: 309, sec: 'fbc0n3'}\n\t\t\t}\n\t\t);\n\t}\n}","import {Type, Dom, Event, Loc} from 'main.core';\nimport {Submit} from './submit';\nimport {SelfRegister} from './self-register';\nimport {Row} from \"./row\";\nimport {Selector} from \"./selector\";\nimport {EventEmitter} from \"main.core.events\";\nimport {ActiveDirectory} from \"./active-directory\";\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.componentName = params.componentName;\n\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.contentBlocks = {};\n\t\tthis.userOptions = params.userOptions;\n\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === \"Y\";\n\t\tthis.isCloud = params.isCloud === \"Y\";\n\t\tthis.isAdmin = params.isAdmin === \"Y\";\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === \"Y\";\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === \"Y\";\n\t\tthis.regenerateUrlBase = params.regenerateUrlBase;\n\t\tthis.firstInvitationBlock = params.firstInvitationBlock;\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tconst blocks = Array.prototype.slice.call(\n\t\t\t\tthis.contentContainer.querySelectorAll(\".js-intranet-invitation-block\")\n\t\t\t);\n\t\t\t(blocks || []).forEach((block) => {\n\t\t\t\tlet blockType = block.getAttribute(\"data-role\");\n\t\t\t\tblockType = blockType.replace(\"-block\", \"\");\n\t\t\t\tthis.contentBlocks[blockType] = block;\n\t\t\t});\n\n\t\t\tthis.errorMessageBlock = this.contentContainer.querySelector(\"[data-role='error-message']\");\n\t\t\tthis.successMessageBlock = this.contentContainer.querySelector(\"[data-role='success-message']\");\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tthis.button = document.querySelector(\"#intranet-invitation-btn\");\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.menuItems = Array.prototype.slice.call(this.menuContainer.querySelectorAll(\"a\"));\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\t});\n\n\t\t\t\tif (item.getAttribute('data-action') === this.firstInvitationBlock)\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(item, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.submit = new Submit(this);\n\t\tthis.submit.subscribe('onInputError', (event) => {\n\t\t\tthis.showErrorMessage(event.data.error);\n\t\t});\n\n\t\tif (this.isCloud)\n\t\t{\n\t\t\tthis.selfRegister = new SelfRegister(this);\n\t\t}\n\n\t\tthis.arrowBox = document.querySelector('.invite-wrap-decal-arrow');\n\t\tif (Type.isDomNode(this.arrowBox))\n\t\t{\n\t\t\tthis.arrowRect = this.arrowBox.getBoundingClientRect();\n\t\t\tthis.arrowHeight = this.arrowRect.height;\n\t\t\tthis.setSetupArrow();\n\t\t}\n\t}\n\n\trenderSelector(params)\n\t{\n\t\tthis.selector = new Selector(this, params);\n\t\tthis.selector.render();\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tthis.hideErrorMessage();\n\t\tthis.hideSuccessMessage();\n\n\t\tif (action.length > 0)\n\t\t{\n\t\t\tif (action === 'active-directory')\n\t\t\t{\n\t\t\t\tif (!this.activeDirectory)\n\t\t\t\t{\n\t\t\t\t\tthis.activeDirectory = new ActiveDirectory(this);\n\t\t\t\t}\n\n\t\t\t\tthis.activeDirectory.showForm();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst projectId = (\n\t\t\t\tthis.userOptions.hasOwnProperty('groupId')\n\t\t\t\t\t? parseInt(this.userOptions.groupId, 10)\n\t\t\t\t\t: 0\n\t\t\t);\n\n\t\t\tfor (let type in this.contentBlocks)\n\t\t\t{\n\t\t\t\tlet block = this.contentBlocks[type];\n\n\t\t\t\tif (type === action)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-hidden');\n\t\t\t\t\tDom.addClass(block, 'invite-block-shown');\n\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t};\n\t\t\t\t\tconst row = new Row(this, params);\n\n\t\t\t\t\tif (action === 'invite')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(5);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'invite-with-group-dp')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'extranet')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: false,\n\t\t\t\t\t\t\t\tproject: \"extranet\",\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"add\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderRegisterInputs();\n\n\t\t\t\t\t\tconst selectorParams = {\n\t\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t\t\t\t.querySelector(\"[data-role='entity-selector-container']\"),\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdepartment: true,\n\t\t\t\t\t\t\t\tproject: true,\n\t\t\t\t\t\t\t\tprojectId: projectId,\n\t\t\t\t\t\t\t\tisAdmin: this.isAdmin,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tthis.renderSelector(selectorParams);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"integrator\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderIntegratorInput();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-shown');\n\t\t\t\t\tDom.addClass(block, 'invite-block-hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.changeButton(action);\n\t\t}\n\t}\n\n\tchangeButton(action)\n\t{\n\t\tEvent.unbindAll(this.button, 'click');\n\n\t\tif (!this.isCreatorEmailConfirmed)\n\t\t{\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.showErrorMessage(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activateButton();\n\n\t\tif (action === \"invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"mass-invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitMassInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"invite-with-group-dp\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInviteWithGroupDp();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"add\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitAdd();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"self\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\t\t\tthis.disableButton();\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tif (this.isButtonActive())\n\t\t\t\t{\n\t\t\t\t\tthis.submit.submitSelf();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse if (action === \"integrator\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitIntegrator();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"extranet\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitExtranet();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"success\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tBX.fireEvent(this.menuItems[0], 'click');\n\t\t\t});\n\t\t}\n\t}\n\n\tdisableButton()\n\t{\n\t\tDom.addClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tactivateButton()\n\t{\n\t\tDom.removeClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tisButtonActive()\n\t{\n\t\treturn !Dom.hasClass(this.button, \"ui-btn-disabled\");\n\t}\n\n\tshowSuccessMessage(successText)\n\t{\n\t\tthis.hideErrorMessage();\n\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.successMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(successText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideSuccessMessage()\n\t{\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tshowErrorMessage(errorText)\n\t{\n\t\tthis.hideSuccessMessage();\n\n\t\tif (Type.isDomNode(this.errorMessageBlock) && errorText)\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.errorMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(errorText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideErrorMessage()\n\t{\n\t\tif (Type.isDomNode(this.errorMessageBlock))\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tgetSetupArrow()\n\t{\n\t\tthis.body = document.querySelector('.invite-body');\n\t\tthis.panelConfirmBtn = document.getElementById('intranet-invitation-btn');\n\t\tthis.sliderContent = document.querySelector('.ui-page-slider-workarea');\n\t\tthis.sliderHeader = document.querySelector('.ui-side-panel-wrap-title-wrap');\n\t\tthis.buttonPanel = document.querySelector('.ui-button-panel');\n\t\tthis.inviteButton = document.querySelector('.invite-form-buttons');\n\n\t\tthis.sliderHeaderHeight = this.sliderHeader.getBoundingClientRect().height;\n\t\tthis.buttonPanelRect = this.buttonPanel.getBoundingClientRect();\n\t\tthis.panelRect = this.panelConfirmBtn.getBoundingClientRect();\n\t\tthis.btnWidth = Math.ceil(this.panelRect.width);\n\t\tthis.arrowWidth = Math.ceil(this.arrowRect.width);\n\t\tthis.delta = (this.btnWidth - this.arrowWidth) / 2;\n\t\tthis.sliderContentRect = this.sliderContent.getBoundingClientRect();\n\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t}\n\n\tupdateArrow()\n\t{\n\t\tthis.bodyHeight = this.body.getBoundingClientRect().height - this.buttonPanelRect.height + this.sliderHeaderHeight;\n\t\tthis.contentHeight = this.arrowHeight + this.sliderContentRect.height + this.buttonPanelRect.height + this.sliderHeaderHeight - 65;\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\t}\n\n\tsetSetupArrow()\n\t{\n\t\tthis.getSetupArrow();\n\t\tthis.arrowBox.style.left = (this.panelRect.left - this.delta) + 'px';\n\t\tthis.contentHeight > this.bodyHeight ? this.body.classList.add('js-intranet-invitation-arrow-hide') : this.body.classList.remove('js-intranet-invitation-arrow-hide');\n\n\t\twindow.addEventListener('resize', function() {\n\t\t\tthis.arrowBox.style.left = (this.panelRect.left - this.delta) + 'px';\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\n\t\tthis.inviteButton.addEventListener('click', function() {\n\t\t\tthis.getSetupArrow();\n\t\t\tthis.updateArrow();\n\t\t}.bind(this))\n\t}\n}\n"],"names":["Submit","parent","setEventNamespace","subscribe","event","form","Type","isDomNode","errorInputData","items","phoneExp","rows","Array","prototype","slice","call","querySelectorAll","forEach","row","emailInput","querySelector","phoneInput","nameInput","lastNameInput","emailValue","value","trim","isInvitationBySmsAvailable","phoneValue","test","String","toLowerCase","push","phoneCountryInput","Validation","isEmail","requestData","selector","selectorItems","getItems","length","inviteForm","contentBlocks","parseEmailAndPhone","Event","BaseEvent","data","error","Loc","getMessage","join","emit","analyticsLabel","sendAction","inviteWithGroupDpForm","showErrorMessage","getGroupAndDepartmentData","selfForm","obRequestData","checked","extranetForm","integratorForm","massInviteForm","addForm","action","disableSubmitButton","userOptions","BX","ajax","runComponentAction","componentName","signedParameters","mode","then","response","showSuccessMessage","changeContent","sendSuccessEvent","B24","licenseInfoPopup","show","message","errors","isDisable","button","isBoolean","Dom","addClass","removeClass","users","SidePanel","Instance","postMessageAll","window","EventEmitter","SelfRegister","selfBlock","bindActions","regenerateButton","bind","activateButton","regenerateSecret","regenerateUrlBase","copyRegisterUrlButton","copyRegisterUrl","selfToggleSettingsButton","toggleSettings","allowRegisterConfirm","toggleWhiteList","selfWhiteList","registerUrl","Text","getRandom","allowRegisterSecretNode","allowRegisterUrlNode","clipboard","copy","showHintPopup","runAction","bindNode","PopupWindow","content","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onAfterPopupShow","setTimeout","close","inputElement","controlBlock","hasClass","switcher","toggleClass","settingsBlock","style","Phone","count","index","maxCount","inputStack","inputNode","num","getAttribute","parentNode","element","Tag","render","paddingLeft","append","flagNode","showCountrySelector","changeCallback","i","e","country","PhoneNumber","Input","node","flagSize","onChange","getValue","getCountry","_onFlagClick","Row","params","contentBlock","inputNum","rowsContainer","phoneObj","moreButton","unbindAll","renderInputRow","massInviteButton","massMenuNode","document","fireEvent","renderPhoneRow","inputNodes","checkPhoneInput","container","nextElementSibling","preventDefault","phoneBlock","newInput","replace","bindCloseIcons","bindPhoneChecker","remove","numRows","clean","showTitles","emailTitle","nameTitle","lastNameTitle","Selector","options","entities","prepareOptions","type","hasOwnProperty","id","selectMode","allowOnlyUserDepartments","allowSelectRootDepartment","optionValue","fillRecentTab","preselectedItems","projectId","tagSelector","TagSelector","dialogOptions","context","renderTo","departments","projects","tagSelectorItems","getDialog","getSelectedItems","item","parseInt","getId","getEntityId","ActiveDirectory","UI","Feedback","Form","open","defaultForm","sec","formParams","isPlainObject","menuContainer","menuContainerNode","contentContainer","contentContainerNode","isExtranetInstalled","isCloud","isAdmin","isCreatorEmailConfirmed","firstInvitationBlock","blocks","block","blockType","errorMessageBlock","successMessageBlock","Hint","init","menuItems","submit","selfRegister","arrowBox","arrowRect","getBoundingClientRect","arrowHeight","height","setSetupArrow","hideErrorMessage","hideSuccessMessage","activeDirectory","showForm","groupId","renderInviteInputs","selectorParams","department","project","renderSelector","renderRegisterInputs","renderIntegratorInput","changeButton","innerText","submitInvite","submitMassInvite","submitInviteWithGroupDp","submitAdd","disableButton","isButtonActive","submitSelf","submitIntegrator","submitExtranet","successText","display","alert","innerHTML","util","htmlspecialchars","errorText","body","panelConfirmBtn","getElementById","sliderContent","sliderHeader","buttonPanel","inviteButton","sliderHeaderHeight","buttonPanelRect","panelRect","btnWidth","Math","ceil","width","arrowWidth","delta","sliderContentRect","bodyHeight","contentHeight","classList","add","getSetupArrow","left","addEventListener","updateArrow"],"mappings":"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"}