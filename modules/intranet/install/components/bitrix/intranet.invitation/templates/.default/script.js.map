{"version":3,"file":"script.js","sources":["src/submit.js","src/self-register.js","src/phone.js","src/row.js","src/form.js"],"sourcesContent":["import {Type, Validation, Loc, Dom, Event} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Submit extends EventEmitter\n{\n\tconstructor(parent)\n\t{\n\t\tsuper();\n\t\tthis.parent = parent;\n\t\tthis.setEventNamespace('BX.Intranet.Invitation.Submit');\n\n\t\tthis.parent.subscribe('onButtonClick', (event) => {\n\n\t\t});\n\t}\n\n\tparseEmailAndPhone(form)\n\t{\n\t\tif (!Type.isDomNode(form))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet errorInputData = [];\n\t\tlet items = [];\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{4,22}\\d$/;\n\t\tconst rows = form.querySelectorAll(\".js-form-row\");\n\n\t\t(rows || []).forEach((row) => {\n\t\t\tconst emailInput = row.querySelector(\"input[name='EMAIL[]']\");\n\t\t\tconst phoneInput = row.querySelector(\"input[name='PHONE[]']\");\n\t\t\tconst nameInput = row.querySelector(\"input[name='NAME[]']\");\n\t\t\tconst lastNameInput = row.querySelector(\"input[name='LAST_NAME[]']\");\n\t\t\tconst emailValue = emailInput.value.trim();\n\n\t\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(phoneInput))\n\t\t\t{\n\t\t\t\tconst phoneValue = phoneInput.value.trim();\n\t\t\t\tif (phoneValue)\n\t\t\t\t{\n\t\t\t\t\tif (!phoneExp.test(String(phoneValue).toLowerCase()))\n\t\t\t\t\t{\n\t\t\t\t\t\terrorInputData.push(phoneValue);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst phoneCountryInput = row.querySelector(\"input[name='PHONE_COUNTRY[]']\");\n\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\"PHONE\": phoneValue,\n\t\t\t\t\t\t\t\"PHONE_COUNTRY\": phoneCountryInput.value.trim(),\n\t\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (emailValue)\n\t\t\t{\n\t\t\t\tif (Validation.isEmail(emailValue))\n\t\t\t\t{\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t\"EMAIL\": emailValue,\n\t\t\t\t\t\t\"NAME\": nameInput.value,\n\t\t\t\t\t\t\"LAST_NAME\": lastNameInput.value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\terrorInputData.push(emailValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn [items, errorInputData];\n\t}\n\n\tprepareGroupAndDepartmentData(inputs, form)\n\t{\n\t\tlet groups = [];\n\t\tlet departments = [];\n\n\t\tfunction checkValue(element)\n\t\t{\n\t\t\tconst value = element.value;\n\n\t\t\tif (value.match(/^SG(\\d+)$/))\n\t\t\t{\n\t\t\t\tgroups.push(value);\n\t\t\t}\n\t\t\telse if (value.match(/^DR(\\d+)$/))\n\t\t\t{\n\t\t\t\tdepartments.push(parseInt(value.replace('DR', '')));\n\t\t\t}\n\t\t\telse if (value.match(/^D(\\d+)$/))\n\t\t\t{\n\t\t\t\tdepartments.push(parseInt(value.replace('D', '')));\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0, len = inputs.length; i < len; i++)\n\t\t{\n\t\t\tif (Type.isArrayLike(inputs[i])) //check RadioNodeList\n\t\t\t{\n\t\t\t\tinputs[i].forEach(element => {\n\t\t\t\t\tcheckValue(element);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcheckValue(inputs[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn {groups: groups, departments: departments};\n\t}\n\n\tsubmitInvite()\n\t{\n\t\tconst inviteForm = this.parent.contentBlocks[\"invite\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', ')}});\n\t\t\tthis.emit('onInputError', event);\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit('onInputError', event);\n\t\t\treturn;\n\t\t}\n\n\t\tconst requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tthis.sendAction(\"invite\", requestData);\n\t}\n\n\tsubmitInviteWithGroupDp()\n\t{\n\t\tconst inviteWithGroupDpForm = this.parent.contentBlocks[\"invite-with-group-dp\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(inviteWithGroupDpForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit('onInputError', event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tif (!Type.isUndefined(inviteWithGroupDpForm[\"GROUP_AND_DEPARTMENT[]\"]))\n\t\t{\n\t\t\tlet arGroupsAndDepartmentInput;\n\n\t\t\tif (typeof inviteWithGroupDpForm[\"GROUP_AND_DEPARTMENT[]\"].value == 'undefined')\n\t\t\t{\n\t\t\t\tarGroupsAndDepartmentInput = inviteWithGroupDpForm[\"GROUP_AND_DEPARTMENT[]\"];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tarGroupsAndDepartmentInput = [\n\t\t\t\t\tinviteWithGroupDpForm[\"GROUP_AND_DEPARTMENT[]\"]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tlet groupsAndDepartmentId = this.prepareGroupAndDepartmentData(arGroupsAndDepartmentInput, inviteWithGroupDpForm);\n\n\t\t\tif (Type.isArray(groupsAndDepartmentId[\"groups\"]))\n\t\t\t{\n\t\t\t\trequestData[\"SONET_GROUPS_CODE\"] = groupsAndDepartmentId[\"groups\"];\n\t\t\t}\n\n\t\t\tif (Type.isArray(groupsAndDepartmentId[\"departments\"]))\n\t\t\t{\n\t\t\t\trequestData[\"UF_DEPARTMENT\"] = groupsAndDepartmentId[\"departments\"];\n\t\t\t}\n\t\t}\n\n\t\tthis.sendAction(\"inviteWithGroupDp\", requestData);\n\t}\n\n\tsubmitSelf()\n\t{\n\t\tconst selfForm = this.parent.contentBlocks[\"self\"].querySelector(\"form\");\n\t\tlet obRequestData = {\n\t\t\t\"allow_register\": selfForm[\"allow_register\"].checked ? \"Y\" : \"N\",\n\t\t\t'allow_register_confirm': selfForm[\"allow_register_confirm\"].checked ? \"Y\" : \"N\",\n\t\t\t\"allow_register_secret\": selfForm[\"allow_register_secret\"].value,\n\t\t\t\"allow_register_whitelist\": selfForm[\"allow_register_whitelist\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"self\", obRequestData);\n\t}\n\n\tsubmitExtranet()\n\t{\n\t\tconst extranetForm = this.parent.contentBlocks[\"extranet\"].querySelector(\"form\");\n\t\tlet [items, errorInputData] = [...this.parseEmailAndPhone(extranetForm)];\n\n\t\tif (errorInputData.length > 0)\n\t\t{\n\t\t\tthis.parent.showErrorMessage(Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_VALIDATE_ERROR\") + \": \" + errorInputData.join(', '));\n\t\t\treturn;\n\t\t}\n\n\t\tif (items.length <= 0)\n\t\t{\n\t\t\tconst event = new Event.BaseEvent({data: {error: Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_EMPTY_ERROR\")}});\n\t\t\tthis.emit('onInputError', event);\n\t\t\treturn;\n\t\t}\n\n\t\tlet requestData = {\n\t\t\t\"ITEMS\": items\n\t\t};\n\n\t\tif (!Type.isUndefined(extranetForm[\"GROUP_AND_DEPARTMENT[]\"]))\n\t\t{\n\t\t\tlet arGroupsInput;\n\n\t\t\tif (typeof extranetForm[\"GROUP_AND_DEPARTMENT[]\"].value == 'undefined')\n\t\t\t{\n\t\t\t\tarGroupsInput = extranetForm[\"GROUP_AND_DEPARTMENT[]\"];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tarGroupsInput = [\n\t\t\t\t\textranetForm[\"GROUP_AND_DEPARTMENT[]\"]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tlet groupsAndDepartmentId = this.prepareGroupAndDepartmentData(arGroupsInput, extranetForm);\n\n\t\t\tif (Type.isArray(groupsAndDepartmentId[\"groups\"]))\n\t\t\t{\n\t\t\t\trequestData[\"SONET_GROUPS_CODE\"] = groupsAndDepartmentId[\"groups\"];\n\t\t\t}\n\t\t}\n\n\t\tthis.sendAction(\"extranet\", requestData);\n\t}\n\n\tsubmitIntegrator()\n\t{\n\t\tconst integratorForm = this.parent.contentBlocks[\"integrator\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"integrator_email\": integratorForm[\"integrator_email\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"inviteIntegrator\", obRequestData);\n\t}\n\n\tsubmitMassInvite()\n\t{\n\t\tconst massInviteForm = this.parent.contentBlocks[\"mass-invite\"].querySelector(\"form\");\n\n\t\tconst obRequestData = {\n\t\t\t\"ITEMS\": massInviteForm[\"mass_invite_emails\"].value,\n\t\t};\n\n\t\tthis.sendAction(\"massInvite\", obRequestData);\n\t}\n\n\tsubmitAdd()\n\t{\n\t\tconst addForm = this.parent.contentBlocks[\"add\"].querySelector(\"form\");\n\n\t\tlet requestData = {\n\t\t\t\"ADD_EMAIL\": addForm[\"ADD_EMAIL\"].value,\n\t\t\t\"ADD_NAME\": addForm[\"ADD_NAME\"].value,\n\t\t\t\"ADD_LAST_NAME\": addForm[\"ADD_LAST_NAME\"].value,\n\t\t\t\"ADD_POSITION\": addForm[\"ADD_POSITION\"].value,\n\t\t\t\"ADD_SEND_PASSWORD\": (\n\t\t\t\taddForm[\"ADD_SEND_PASSWORD\"]\n\t\t\t\t&& !!addForm[\"ADD_SEND_PASSWORD\"].checked\n\t\t\t\t\t? addForm[\"ADD_SEND_PASSWORD\"].value\n\t\t\t\t\t: \"N\"\n\t\t\t),\n\t\t};\n\n\t\tif (!Type.isUndefined(addForm[\"GROUP_AND_DEPARTMENT[]\"]))\n\t\t{\n\t\t\tlet arGroupsAndDepartmentInput;\n\n\t\t\tif (typeof addForm[\"GROUP_AND_DEPARTMENT[]\"].value == 'undefined')\n\t\t\t{\n\t\t\t\tarGroupsAndDepartmentInput = addForm[\"GROUP_AND_DEPARTMENT[]\"];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tarGroupsAndDepartmentInput = [\n\t\t\t\t\taddForm[\"GROUP_AND_DEPARTMENT[]\"]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tlet groupsAndDepartmentId = this.prepareGroupAndDepartmentData(arGroupsAndDepartmentInput, addForm);\n\n\t\t\tif (Type.isArray(groupsAndDepartmentId[\"groups\"]))\n\t\t\t{\n\t\t\t\trequestData[\"SONET_GROUPS_CODE\"] = groupsAndDepartmentId[\"groups\"];\n\t\t\t}\n\n\t\t\tif (Type.isArray(groupsAndDepartmentId[\"departments\"]))\n\t\t\t{\n\t\t\t\trequestData[\"DEPARTMENT_ID\"] = groupsAndDepartmentId[\"departments\"];\n\t\t\t}\n\t\t}\n\n\t\tthis.sendAction(\"add\", requestData);\n\t}\n\n\tsendAction(action, requestData)\n\t{\n\t\tthis.disableSubmitButton(true);\n\t\trequestData[\"userOptions\"] = this.parent.userOptions;\n\n\t\tBX.ajax.runComponentAction(this.parent.componentName, action, {\n\t\t\tsignedParameters: this.parent.signedParameters,\n\t\t\tmode: 'ajax',\n\t\t\tdata: requestData\n\t\t}).then(function (response) {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data)\n\t\t\t{\n\t\t\t\tif (action === \"self\")\n\t\t\t\t{\n\t\t\t\t\tthis.parent.showSuccessMessage(response.data);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.parent.changeContent(\"success\");\n\t\t\t\t\tthis.sendSuccessEvent(response.data);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}.bind(this), function (response) {\n\n\t\t\tthis.disableSubmitButton(false);\n\n\t\t\tif (response.data == \"user_limit\")\n\t\t\t{\n\t\t\t\tB24.licenseInfoPopup.show('featureID', BX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TITLE\"), BX.message(\"BX24_INVITE_DIALOG_USERS_LIMIT_TEXT\"));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.parent.showErrorMessage(response.errors[0].message);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\tdisableSubmitButton(isDisable)\n\t{\n\t\tconst button = this.parent.button;\n\n\t\tif (!Type.isDomNode(button) || !Type.isBoolean(isDisable))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (isDisable)\n\t\t{\n\t\t\tDom.addClass(button, \"ui-btn-wait\");\n\t\t\tbutton.style.cursor = 'auto';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(button, \"ui-btn-wait\");\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t}\n\t}\n\n\tsendSuccessEvent(users)\n\t{\n\t\tBX.SidePanel.Instance.postMessageAll(window, 'BX.Intranet.Invitation:onAdd', { users: users });\n\t}\n}","import {Event, Type, Dom, Text, Loc} from \"main.core\";\n\nexport class SelfRegister\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tif (Type.isDomNode(this.parent.contentBlocks[\"self\"]))\n\t\t{\n\t\t\tthis.selfBlock = this.parent.contentBlocks[\"self\"];\n\t\t\tthis.bindActions();\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst regenerateButton = this.selfBlock.querySelector(\"[data-role='selfRegenerateSecretButton']\");\n\t\tif (Type.isDomNode(regenerateButton))\n\t\t{\n\t\t\tEvent.bind(regenerateButton, 'click', BX.delegate(() => {\n\t\t\t\tthis.regenerateSecret(this.parent.regenerateUrlBase);\n\t\t\t}, this));\n\t\t}\n\n\t\tconst copyRegisterUrlButton = this.selfBlock.querySelector(\"[data-role='copyRegisterUrlButton']\");\n\t\tif (Type.isDomNode(copyRegisterUrlButton))\n\t\t{\n\t\t\tEvent.bind(copyRegisterUrlButton, 'click', BX.delegate(() => {\n\t\t\t\tthis.copyRegisterUrl();\n\t\t\t}, this));\n\t\t}\n\n\t\tconst selfToggleSettingsButton = this.selfBlock.querySelector(\"[data-role='selfToggleSettingsButton']\");\n\t\tif (Type.isDomNode(selfToggleSettingsButton))\n\t\t{\n\t\t\tEvent.bind(selfToggleSettingsButton, 'change', () => {\n\t\t\t\tthis.toggleSettings(selfToggleSettingsButton);\n\t\t\t});\n\t\t}\n\t}\n\n\tregenerateSecret(registerUrl)\n\t{\n\t\tconst value = Text.getRandom(8);\n\n\t\tconst allowRegisterSecretNode = this.selfBlock.querySelector(\"[data-role='allowRegisterSecret']\");\n\t\tif (Type.isDomNode(allowRegisterSecretNode))\n\t\t{\n\t\t\tallowRegisterSecretNode.value = value || '';\n\t\t}\n\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode) && registerUrl)\n\t\t{\n\t\t\tallowRegisterUrlNode.value = registerUrl + (value || 'yes');\n\t\t}\n\t}\n\n\tcopyRegisterUrl()\n\t{\n\t\tconst allowRegisterUrlNode = this.selfBlock.querySelector(\"[data-role='allowRegisterUrl']\");\n\t\tif (Type.isDomNode(allowRegisterUrlNode))\n\t\t{\n\t\t\tBX.clipboard.copy(allowRegisterUrlNode.value);\n\t\t\tthis.showHintPopup(Loc.getMessage(\"BX24_INVITE_DIALOG_COPY_URL\"), allowRegisterUrlNode);\n\n\t\t\tBX.ajax.runAction('intranet.controller.invite.copyregisterurl', {\n\t\t\t\tdata: {}\n\t\t\t}).then(function (response) {}, function (response) {});\n\t\t}\n\t}\n\n\tshowHintPopup(message, bindNode)\n\t{\n\t\tif (!Type.isDomNode(bindNode) || !message)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew BX.PopupWindow('inviteHint' + Text.getRandom(8), bindNode, {\n\t\t\tcontent: message,\n\t\t\tzIndex: 15000,\n\t\t\tangle: true,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 50,\n\t\t\tcloseIcon: false,\n\t\t\tautoHide: true,\n\t\t\tdarkMode: true,\n\t\t\toverlay: false,\n\t\t\tmaxWidth: 400,\n\t\t\tevents: {\n\t\t\t\tonAfterPopupShow: function () {\n\t\t\t\t\tsetTimeout(function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this), 4000);\n\t\t\t\t}\n\t\t\t}\n\t\t}).show();\n\t}\n\n\ttoggleSettings(inputElement)\n\t{\n\t\tconst controlBlock = this.selfBlock.querySelector(\".js-invite-dialog-fast-reg-control-container\");\n\t\tif (Type.isDomNode(controlBlock))\n\t\t{\n\t\t\tif (!Dom.hasClass(controlBlock, 'disallow-registration'))\n\t\t\t{\n\t\t\t\tconst switcher = controlBlock.querySelector(\"[data-role='self-switcher']\");\n\t\t\t\tthis.showHintPopup(Loc.getMessage(\"INTRANET_INVITE_DIALOG_SELF_OFF_HINT\"), switcher);\n\t\t\t}\n\t\t\tDom.toggleClass(controlBlock, 'disallow-registration');\n\t\t}\n\n\t\tconst settingsBlock = this.selfBlock.querySelector(\"[data-role='selfSettingsBlock']\");\n\t\tif (Type.isDomNode(settingsBlock))\n\t\t{\n\t\t\tDom.style(settingsBlock, 'display', inputElement.checked ? 'block' : 'none');\n\t\t}\n\t}\n}","import {Dom, Type, Tag, Event} from \"main.core\";\n\nexport class Phone\n{\n\tconstructor(parent)\n\t{\n\t\tthis.parent = parent;\n\n\t\tthis.count = 0;\n\t\tthis.index = 0;\n\t\tthis.maxCount = 5;\n\t\tthis.inputStack = [];\n\t}\n\n\trenderPhoneRow(inputNode)\n\t{\n\t\tif(this.count >= this.maxCount)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Type.isDomNode(inputNode))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst num = inputNode.getAttribute(\"data-num\");\n\n\t\tif (inputNode.parentNode.querySelector(\"#phone_number_\" + num))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<span style=\"z-index: 3;\" class=\"ui-ctl-before\" data-role=\"phone-block\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE_COUNTRY[]\" id=\"phone_country_${num}\" value=\"\">\n\t\t\t\t<input type=\"hidden\" name=\"PHONE[]\" id=\"phone_number_${num}\" value=\"\">\n\t\t\t\t<div class=\"invite-dialog-phone-flag-block\" data-role=\"flag\">\n\t\t\t\t\t<span data-role=\"phone_flag_${num}\" style=\"pointer-events: none;\"></span>\n\t\t\t\t</div>\n\t\t\t\t<input class=\"invite-dialog-phone-input\" type=\"hidden\" id=\"phone_input_${num}\" value=\"\">&nbsp;\n\t\t\t</span>\n\t\t`;\n\n\t\tinputNode.style.paddingLeft = \"57px\";\n\t\tDom.append(element, inputNode.parentNode);\n\n\t\tconst flagNode = inputNode.parentNode.querySelector(\"[data-role='flag']\");\n\t\tif (Type.isDomNode(flagNode))\n\t\t{\n\t\t\tEvent.bind(inputNode.parentNode.querySelector(\"[data-role='flag']\"), 'click', () => {\n\t\t\t\tthis.showCountrySelector(num);\n\t\t\t});\n\t\t}\n\n\t\tlet changeCallback = function(i, inputNode)\n\t\t{\n\t\t\treturn function(e)\n\t\t\t{\n\t\t\t\tinputNode.parentNode.querySelector('#phone_number_' + i).value = e.value;\n\t\t\t\tinputNode.parentNode.querySelector('#phone_country_' + i).value = e.country;\n\t\t\t}\n\t\t};\n\n\t\tthis.inputStack[num] = new BX.PhoneNumber.Input({\n\t\t\tnode: inputNode,\n\t\t\tflagNode: inputNode.parentNode.querySelector(\"[data-role='phone_flag_\"+ num +\"']\"),\n\t\t\tflagSize: 16,\n\t\t\tonChange: changeCallback(num, inputNode)\n\t\t});\n\n\t\t//for ctrl+v paste\n\t\tsetTimeout(() => {\n\t\t\tif (!inputNode.parentNode.querySelector('#phone_number_' + num).value)\n\t\t\t{\n\t\t\t\tchangeCallback(num, inputNode)({\n\t\t\t\t\tvalue: this.inputStack[num].getValue(),\n\t\t\t\t\tcountry: this.inputStack[num].getCountry()\n\t\t\t\t});\n\t\t\t}\n\t\t}, 100);\n\t}\n\n\tshowCountrySelector(i)\n\t{\n\t\tthis.inputStack[i]._onFlagClick();\n\t}\n}","import {Event, Type, Dom, Tag, Loc} from \"main.core\";\nimport {Phone} from \"./phone\";\n\nexport class Row\n{\n\tconstructor(parent, params)\n\t{\n\t\tthis.parent = parent;\n\t\tthis.contentBlock = params.contentBlock;\n\t\tthis.inputNum = 0;\n\n\t\tif (Type.isDomNode(this.contentBlock))\n\t\t{\n\t\t\tthis.rowsContainer = this.contentBlock.querySelector(\"[data-role='rows-container']\");\n\t\t\tthis.bindActions();\n\t\t}\n\n\t\tif (this.parent.isInvitationBySmsAvailable)\n\t\t{\n\t\t\tthis.phoneObj = new Phone(this);\n\t\t}\n\t}\n\n\tbindActions()\n\t{\n\t\tconst moreButton = this.contentBlock.querySelector(\"[data-role='invite-more']\");\n\t\tif (Type.isDomNode(moreButton))\n\t\t{\n\t\t\tEvent.unbindAll(moreButton);\n\t\t\tEvent.bind(moreButton, 'click', () => {\n\t\t\t\tthis.renderInputRow();\n\t\t\t});\n\t\t}\n\n\t\tconst massInviteButton = this.contentBlock.querySelector(\"[data-role='invite-mass']\");\n\t\tif (Type.isDomNode(massInviteButton))\n\t\t{\n\t\t\tEvent.unbindAll(massInviteButton);\n\t\t\tEvent.bind(massInviteButton, 'click', () => {\n\t\t\t\tconst massMenuNode = document.querySelector(\"[data-role='menu-mass-invite']\");\n\t\t\t\tif (Type.isDomNode(massMenuNode))\n\t\t\t\t{\n\t\t\t\t\tBX.fireEvent(massMenuNode, 'click');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcheckPhoneInput(element)\n\t{\n\t\tconst phoneExp = /^[\\d+][\\d\\(\\)\\ -]{2,14}\\d$/;\n\n\t\tif (element.value && phoneExp.test(String(element.value).toLowerCase()))\n\t\t{\n\t\t\tthis.phoneObj.renderPhoneRow(element);\n\t\t}\n\t}\n\n\tbindPhoneChecker(element)\n\t{\n\t\tif (this.parent.isInvitationBySmsAvailable && Type.isDomNode(element))\n\t\t{\n\t\t\tconst inputNodes = element.querySelectorAll(\".js-email-phone-input\");\n\t\t\tif (inputNodes)\n\t\t\t{\n\t\t\t\tinputNodes.forEach(element => {\n\t\t\t\t\tEvent.bind(element, 'input', () => {\n\t\t\t\t\t\tthis.checkPhoneInput(element);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tbindCloseIcons(container)\n\t{\n\t\tconst inputNodes = container.querySelectorAll(\"input\");\n\n\t\t(inputNodes || []).forEach((node) => {\n\t\t\tlet closeIcon = node.nextElementSibling;\n\n\t\t\tEvent.bind(node, 'input', () => {\n\t\t\t\tDom.style(closeIcon, 'display', node.value !== \"\" ? \"block\" : \"none\");\n\t\t\t});\n\n\t\t\tEvent.bind(closeIcon, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tnode.value = \"\";\n\n\t\t\t\tif (Type.isDomNode(node.parentNode))\n\t\t\t\t{\n\t\t\t\t\tconst phoneBlock = node.parentNode.querySelector(\"[data-role='phone-block']\");\n\t\t\t\t\tif (Type.isDomNode(phoneBlock))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst newInput = Tag.render`\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tname=\"EMAIL[]\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\t\tdata-num=\"${node.getAttribute('data-num')}\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\"\n\t\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t\t/>`;\n\n\t\t\t\t\t\tDom.replace(node, newInput);\n\t\t\t\t\t\tthis.bindCloseIcons(newInput.parentNode);\n\t\t\t\t\t\tthis.bindPhoneChecker(newInput.parentNode);\n\t\t\t\t\t\tDom.remove(phoneBlock);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tDom.style(closeIcon, 'display', \"none\");\n\t\t\t});\n\t\t});\n\t}\n\n\trenderInviteInputs(numRows = 3)\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tfor (let i = 0; i < numRows; i++)\n\t\t{\n\t\t\tthis.renderInputRow(i === 0);\n\t\t}\n\t}\n\n\trenderInputRow(showTitles = false)\n\t{\n\t\tlet emailTitle, nameTitle, lastNameTitle;\n\n\t\tif (showTitles)\n\t\t{\n\t\t\temailTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT\")}\n\t\t\t\t</div>`;\n\n\t\t\tnameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t\tlastNameTitle = `\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}\n\t\t\t\t</div>`;\n\n\t\t}\n\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row js-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? emailTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\tname=\"EMAIL[]\" \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tdata-num=\"${this.inputNum++}\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element js-email-phone-input\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage('INTRANET_INVITE_DIALOG_EMAIL_OR_PHONE_INPUT')}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? nameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t${showTitles ? lastNameTitle: ''}\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input name=\"LAST_NAME[]\" type=\"text\" class=\"ui-ctl-element\" placeholder=\"${Loc.getMessage('BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE')}\">\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t\tthis.bindPhoneChecker(element);\n\t}\n\n\trenderRegisterInputs()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_NAME\" id=\"ADD_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_LAST_NAME_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_LAST_NAME\" id=\"ADD_LAST_NAME\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_EMAIL_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_EMAIL\" id=\"ADD_EMAIL\" class=\"ui-ctl-element\" maxlength=\"50\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"BX24_INVITE_DIALOG_ADD_POSITION_TITLE\")}</div>\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t\t<input type=\"text\" name=\"ADD_POSITION\" id=\"ADD_POSITION\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t\t</div>\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n\n\trenderIntegratorInput()\n\t{\n\t\tDom.clean(this.rowsContainer);\n\t\tconst element = Tag.render`\n\t\t\t<div class=\"invite-form-row\">\n\t\t\t\t<div class=\"invite-form-col\">\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox ui-ctl-block ui-ctl-after-icon\">\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\tclass=\"ui-ctl-element\" \n\t\t\t\t\t\t\tvalue=\"\" \n\t\t\t\t\t\t\tmaxlength=\"50\"\n\t\t\t\t\t\t\tname=\"integrator_email\" \n\t\t\t\t\t\t\tid=\"integrator_email\" \n\t\t\t\t\t\t\tplaceholder=\"${Loc.getMessage(\"INTRANET_INVITE_DIALOG_INTEGRATOR_EMAIL\")}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<button class=\"ui-ctl-after ui-ctl-icon-clear\" style=\"display: none\"></button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(element, this.rowsContainer);\n\t\tthis.bindCloseIcons(element);\n\t}\n}","import {Type, Dom, Event, Loc} from 'main.core';\nimport {Submit} from './submit';\nimport {SelfRegister} from './self-register';\nimport {Row} from \"./row\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport default class Form extends EventEmitter\n{\n\tconstructor(formParams)\n\t{\n\t\tsuper();\n\n\t\tconst params = Type.isPlainObject(formParams) ? formParams : {};\n\n\t\tthis.signedParameters = params.signedParameters;\n\t\tthis.componentName = params.componentName;\n\n\t\tthis.menuContainer = params.menuContainerNode;\n\t\tthis.contentContainer = params.contentContainerNode;\n\t\tthis.contentBlocks = {};\n\t\tthis.userOptions = params.userOptions;\n\n\t\tthis.isExtranetInstalled = params.isExtranetInstalled === \"Y\";\n\t\tthis.isCloud = params.isCloud === \"Y\";\n\t\tthis.isInvitationBySmsAvailable = params.isInvitationBySmsAvailable === \"Y\";\n\t\tthis.isCreatorEmailConfirmed = params.isCreatorEmailConfirmed === \"Y\";\n\t\tthis.regenerateUrlBase = params.regenerateUrlBase;\n\n\t\tif (Type.isDomNode(this.contentContainer))\n\t\t{\n\t\t\tconst blocks = this.contentContainer.querySelectorAll(\".js-intranet-invitation-block\");\n\t\t\t(blocks || []).forEach((block) => {\n\t\t\t\tlet blockType = block.getAttribute(\"data-role\");\n\t\t\t\tblockType = blockType.replace(\"-block\", \"\");\n\t\t\t\tthis.contentBlocks[blockType] = block;\n\t\t\t});\n\n\t\t\tthis.errorMessageBlock = this.contentContainer.querySelector(\"[data-role='error-message']\");\n\t\t\tthis.successMessageBlock = this.contentContainer.querySelector(\"[data-role='success-message']\");\n\n\t\t\tBX.UI.Hint.init(this.contentContainer);\n\t\t}\n\n\t\tthis.button = document.querySelector(\"#intranet-invitation-btn\");\n\n\t\tif (Type.isDomNode(this.menuContainer))\n\t\t{\n\t\t\tthis.menuItems = this.menuContainer.querySelectorAll(\"a\");\n\n\t\t\t(this.menuItems || []).forEach((item) => {\n\t\t\t\tEvent.bind(item, 'click', () => {\n\t\t\t\t\tthis.changeContent(item.getAttribute('data-action'));\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.changeContent(this.menuItems[0].getAttribute('data-action'));\n\t\t}\n\n\t\tthis.submit = new Submit(this);\n\t\tthis.submit.subscribe('onInputError', (event) => {\n\t\t\tthis.showErrorMessage(event.data.error);\n\t\t});\n\n\t\tif (this.isCloud)\n\t\t{\n\t\t\tthis.selfRegister = new SelfRegister(this);\n\t\t}\n\t}\n\n\tchangeContent(action)\n\t{\n\t\tthis.hideErrorMessage();\n\t\tthis.hideSuccessMessage();\n\n\t\tif (action.length > 0)\n\t\t{\n\t\t\tfor (let type in this.contentBlocks)\n\t\t\t{\n\t\t\t\tlet block = this.contentBlocks[type];\n\n\t\t\t\tif (type === action)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-hidden');\n\t\t\t\t\tDom.addClass(block, 'invite-block-shown');\n\n\t\t\t\t\tconst params = {\n\t\t\t\t\t\tcontentBlock: this.contentBlocks[action]\n\t\t\t\t\t};\n\t\t\t\t\tconst row = new Row(this, params);\n\n\t\t\t\t\tif (action === 'invite')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(5);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'invite-with-group-dp')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === 'extranet')\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderInviteInputs(3);\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"add\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderRegisterInputs();\n\t\t\t\t\t}\n\t\t\t\t\telse if (action === \"integrator\")\n\t\t\t\t\t{\n\t\t\t\t\t\trow.renderIntegratorInput();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(block, 'invite-block-shown');\n\t\t\t\t\tDom.addClass(block, 'invite-block-hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.changeButton(action);\n\t\t}\n\t}\n\n\tchangeButton(action)\n\t{\n\t\tEvent.unbindAll(this.button, 'click');\n\n\t\tif (!this.isCreatorEmailConfirmed)\n\t\t{\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.showErrorMessage(Loc.getMessage('INTRANET_INVITE_DIALOG_CONFIRM_CREATOR_EMAIL_ERROR'));\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (action === \"invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"mass-invite\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitMassInvite();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"invite-with-group-dp\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click',() => {\n\t\t\t\tthis.submit.submitInviteWithGroupDp();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"add\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_ADD');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitAdd();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"self\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_SAVE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitSelf();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"integrator\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitIntegrator();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"extranet\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tthis.submit.submitExtranet();\n\t\t\t});\n\t\t}\n\t\telse if (action === \"success\")\n\t\t{\n\t\t\tthis.button.innerText = Loc.getMessage('BX24_INVITE_DIALOG_ACTION_INVITE_MORE');\n\n\t\t\tEvent.bind(this.button, 'click', () => {\n\t\t\t\tBX.fireEvent(this.menuItems[0], 'click');\n\t\t\t});\n\t\t}\n\t}\n\n\tshowSuccessMessage(successText)\n\t{\n\t\tthis.hideErrorMessage();\n\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.successMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(successText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideSuccessMessage()\n\t{\n\t\tif (Type.isDomNode(this.successMessageBlock))\n\t\t{\n\t\t\tthis.successMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n\n\tshowErrorMessage(errorText)\n\t{\n\t\tthis.hideSuccessMessage();\n\n\t\tif (Type.isDomNode(this.errorMessageBlock) && errorText)\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"block\";\n\t\t\tconst alert = this.errorMessageBlock.querySelector(\".ui-alert-message\");\n\t\t\tif (Type.isDomNode(alert))\n\t\t\t{\n\t\t\t\talert.innerHTML = BX.util.htmlspecialchars(errorText);\n\t\t\t}\n\t\t}\n\t}\n\n\thideErrorMessage()\n\t{\n\t\tif (Type.isDomNode(this.errorMessageBlock))\n\t\t{\n\t\t\tthis.errorMessageBlock.style.display = \"none\";\n\t\t}\n\t}\n}"],"names":["Submit","parent","setEventNamespace","subscribe","event","form","Type","isDomNode","errorInputData","items","phoneExp","rows","querySelectorAll","forEach","row","emailInput","querySelector","phoneInput","nameInput","lastNameInput","emailValue","value","trim","isInvitationBySmsAvailable","phoneValue","test","String","toLowerCase","push","phoneCountryInput","Validation","isEmail","inputs","groups","departments","checkValue","element","match","parseInt","replace","i","len","length","isArrayLike","inviteForm","contentBlocks","parseEmailAndPhone","Event","BaseEvent","data","error","Loc","getMessage","join","emit","requestData","sendAction","inviteWithGroupDpForm","showErrorMessage","isUndefined","arGroupsAndDepartmentInput","groupsAndDepartmentId","prepareGroupAndDepartmentData","isArray","selfForm","obRequestData","checked","extranetForm","arGroupsInput","integratorForm","massInviteForm","addForm","action","disableSubmitButton","userOptions","BX","ajax","runComponentAction","componentName","signedParameters","mode","then","response","showSuccessMessage","changeContent","sendSuccessEvent","bind","B24","licenseInfoPopup","show","message","errors","isDisable","button","isBoolean","Dom","addClass","style","cursor","removeClass","users","SidePanel","Instance","postMessageAll","window","EventEmitter","SelfRegister","selfBlock","bindActions","regenerateButton","delegate","regenerateSecret","regenerateUrlBase","copyRegisterUrlButton","copyRegisterUrl","selfToggleSettingsButton","toggleSettings","registerUrl","Text","getRandom","allowRegisterSecretNode","allowRegisterUrlNode","clipboard","copy","showHintPopup","runAction","bindNode","PopupWindow","content","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onAfterPopupShow","setTimeout","close","inputElement","controlBlock","hasClass","switcher","toggleClass","settingsBlock","Phone","count","index","maxCount","inputStack","inputNode","num","getAttribute","parentNode","Tag","render","paddingLeft","append","flagNode","showCountrySelector","changeCallback","e","country","PhoneNumber","Input","node","flagSize","onChange","getValue","getCountry","_onFlagClick","Row","params","contentBlock","inputNum","rowsContainer","phoneObj","moreButton","unbindAll","renderInputRow","massInviteButton","massMenuNode","document","fireEvent","renderPhoneRow","inputNodes","checkPhoneInput","container","nextElementSibling","preventDefault","phoneBlock","newInput","bindCloseIcons","bindPhoneChecker","remove","numRows","clean","showTitles","emailTitle","nameTitle","lastNameTitle","Form","formParams","isPlainObject","menuContainer","menuContainerNode","contentContainer","contentContainerNode","isExtranetInstalled","isCloud","isCreatorEmailConfirmed","blocks","block","blockType","errorMessageBlock","successMessageBlock","UI","Hint","init","menuItems","item","submit","selfRegister","hideErrorMessage","hideSuccessMessage","type","renderInviteInputs","renderRegisterInputs","renderIntegratorInput","changeButton","innerText","submitInvite","submitMassInvite","submitInviteWithGroupDp","submitAdd","submitSelf","submitIntegrator","submitExtranet","successText","display","alert","innerHTML","util","htmlspecialchars","errorText"],"mappings":"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"}