this.BX=this.BX||{};this.BX.Intranet=this.BX.Intranet||{};(function(t,e,n,i,s){"use strict";var o={props:{size:{type:Number,default:85}},template:"\n\t\t<div></div>\n\t",mounted:function t(){this.loader=new n.Loader({target:this.$el,size:this.size});this.loader.show()},beforeDestroy:function t(){this.loader.destroy()}};var a={props:["invitationLink","structureLink","users","isInvitationAvailable"],computed:{localize:function t(e){return i.Vue.getFilteredPhrases("INTRANET_INVITATION_WIDGET_")}},methods:{showInvitationSlider:function t(){if(this.isInvitationAvailable){BX.SidePanel.Instance.open(this.invitationLink,{cacheable:false,allowChangeHistory:false,width:1100});s.Event.EventEmitter.emit("BX.Intranet.InvitationWidget:showInvitationSlider")}else{this.showHintPopup(BX.message("INTRANET_INVITATION_WIDGET_DISABLED_TEXT"),document.querySelector("[data-role='invitationPopupButton']"))}},showHintPopup:function t(e,n){if(!s.Type.isDomNode(n)||!e){return}new BX.PopupWindow("inviteHint"+s.Text.getRandom(8),n,{content:e,zIndex:15e3,angle:true,offsetTop:0,offsetLeft:50,closeIcon:false,autoHide:true,darkMode:true,overlay:false,maxWidth:400,events:{onAfterPopupShow:function t(){setTimeout(function(){this.close()}.bind(this),4e3)}}}).show()},sendAnalytics:function t(e){BX.ajax.runAction("intranet.invitationwidget.analyticsLabel",{data:{},analyticsLabel:{helperCode:e,headerPopup:"Y"}}).then(function(t){},function(t){})},showInvitationHelper:function t(){var e="limit_why_team_invites";BX.UI.InfoHelper.show(e);this.sendAnalytics(e)}},template:'\n\t\t<div class="license-widget license-widget--invite">\n\t\t\t<div class="license-widget-item license-widget-item--main">\n\t\t\t\t<div class="license-widget-inner">\n\t\t\t\t\t<div class="license-widget-item-icon license-widget-item-icon--invite"></div>\n\t\t\t\t\t<div class="license-widget-item-content">\n\t\t\t\t\t\t<div class="license-widget-item-name">\n\t\t\t\t\t\t\t<span>{{ localize.INTRANET_INVITATION_WIDGET_INVITE_EMPLOYEE }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="license-widget-item-link">\n\t\t\t\t\t\t\t<span class="license-widget-item-link-text" @click="showInvitationHelper">\n\t\t\t\t\t\t\t\t{{ localize.INTRANET_INVITATION_WIDGET_DESC }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<a \n\t\t\t\t\tdata-role="invitationPopupButton"\n\t\t\t\t\tclass="license-widget-item-btn license-widget-item-btn--invite"\n\t\t\t\t\t@click="showInvitationSlider" \n\t\t\t\t> \n\t\t\t\t\t{{ localize.INTRANET_INVITATION_WIDGET_INVITE }} \n\t\t\t\t</a>\t\n\t\t\t</div>\n\t\t\t\n\t\t\t<div class="license-widget-block">\n\t\t\t\t<div class="license-widget-item license-widget-item--company license-widget-item--active">\n\t\t\t\t\t<div class="license-widget-item-logo"></div>\n\t\t\t\t\t<div class="license-widget-item-content">\n\t\t\t\t\t\t<div class="license-widget-item-name">\n\t\t\t\t\t\t\t<span>{{ localize.INTRANET_INVITATION_WIDGET_STRUCTURE }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a :href="structureLink" class="license-widget-item-btn"> \n\t\t\t\t\t\t\t{{ localize.INTRANET_INVITATION_WIDGET_EDIT }} \n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<div \n\t\t\t\t\tclass="license-widget-item license-widget-item--emp"\n\t\t\t\t\t:class="{ \'license-widget-item--emp-alert\' : users.isLimit }"\n\t\t\t\t>\n\t\t\t\t\t<div class="license-widget-inner">\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass="license-widget-item-progress"\n\t\t\t\t\t\t\t:class="[\n\t\t\t\t\t\t\t\tusers.isLimit \n\t\t\t\t\t\t\t\t? \'license-widget-item-progress--crit\' \n\t\t\t\t\t\t\t\t: \'license-widget-item-progress--full\'\n\t\t\t\t\t\t\t]"\n\t\t\t\t\t\t></div>\n\t\t\t\t\t\t<div class="license-widget-item-content">\n\t\t\t\t\t\t\t<div class="license-widget-item-name">\n\t\t\t\t\t\t\t\t<span>{{ localize.INTRANET_INVITATION_WIDGET_EMPLOYEES }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="license-widget-item-num">\n\t\t\t\t\t\t\t\t{{ users.currentUserCountMessage }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\x3c!--<div class="license-widget-item-menu"></div>--\x3e\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="license-widget-item-detail">\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-if="users.maxUserCount == 0" \n\t\t\t\t\t\t\tkey="employeeCount"\n\t\t\t\t\t\t\tclass="license-widget-item-link-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ localize.INTRANET_INVITATION_WIDGET_EMPLOYEES_NO_LIMIT }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-else-if="users.isLimit"\n\t\t\t\t\t\t\tkey="employeeCount" \n\t\t\t\t\t\t\tclass="license-widget-item-link-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ localize.INTRANET_INVITATION_WIDGET_EMPLOYEES_LIMIT }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-else-if="!users.isLimit" \n\t\t\t\t\t\t\tkey="employeeCount"\n\t\t\t\t\t\t\tclass="license-widget-item-link-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ users.leftCountMessage }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t'};var l={components:{LoaderComponent:o,ContentComponent:a},data:function t(){return{loaded:false,loading:true,invitationLink:"",structureLink:"",isInvitationAvailable:true,users:[]}},mounted:function t(){this.getData()},methods:{getData:function t(){var e=this;BX.ajax.runAction("intranet.invitationwidget.getData",{data:{},analyticsLabel:{headerPopup:"Y"}}).then(function(t){e.invitationLink=t.data.invitationLink;e.structureLink=t.data.structureLink;e.isInvitationAvailable=t.data.isInvitationAvailable;e.users=t.data.users;e.loaded=true;e.loading=false},function(t){})}},template:'\n\t\t<div>\n\t\t\t<LoaderComponent v-if="loading" :size="100" />\n\t\t\t<ContentComponent \n\t\t\t\tv-if="!loading && loaded"\n\t\t\t\t:invitationLink="invitationLink"\n\t\t\t\t:structureLink="structureLink"\n\t\t\t\t:isInvitationAvailable="isInvitationAvailable"\n\t\t\t\t:users="users"\n\t\t\t>\n\t\t\t</ContentComponent>\n\t\t</div>\n\t'};var u=s.Reflection.namespace("BX.Intranet");var c=new WeakMap;var r=function(){function t(e){var n=this;babelHelpers.classCallCheck(this,t);c.set(this,{writable:true,value:void 0});this.node=e.wrapper;this.enterTimeout=null;this.leaveTimeout=null;this.popupLeaveTimeout=null;this.renderButton();s.Event.EventEmitter.subscribe("BX.Intranet.InvitationWidget:showInvitationSlider",function(t){n.closePopup()})}babelHelpers.createClass(t,[{key:"renderButton",value:function t(){var e=this;babelHelpers.classPrivateFieldSet(this,c,i.Vue.create({el:this.node,data:function t(){return{}},computed:{localize:function t(e){return i.Vue.getFilteredPhrases("INTRANET_INVITATION_WIDGET_")}},methods:{onMouseOver:function t(n){clearTimeout(e.enterTimeout);e.enterTimeout=setTimeout(function(){e.enterTimeout=null;e.initPopup(n.target)},500)},onMouseOut:function t(){if(e.enterTimeout!==null){clearTimeout(e.enterTimeout);e.enterTimeout=null;return}e.leaveTimeout=setTimeout(function(){e.closePopup()},500)},togglePopup:function t(){if(e.popup){if(e.popup.isShown()){e.closePopup()}else{e.popup.show()}}}},template:'\n\t\t\t\t<button \n\t\t\t\t\tclass="ui-btn ui-btn-round license-btn license-btn-primary" \n\t\t\t\t\t@mouseover="onMouseOver"\n\t\t\t\t\t@mouseout="onMouseOut"\n\t\t\t\t\t@click="togglePopup"\n\t\t\t\t>{{ localize.INTRANET_INVITATION_WIDGET_INVITE }}</button>\n\t\t\t'}))}},{key:"initPopup",value:function t(n){if(!this.popup){this.popup=new e.Popup({autoHide:true,closeByEsc:true,contentPadding:0,padding:0,minWidth:350,minHeight:220,offsetLeft:-150,animation:{showClassName:"popup-with-radius-show",closeClassName:"popup-with-radius-close",closeAnimationType:"animation"},className:"popup-with-radius",contentBackground:"rgba(0,0,0,0)",angle:{position:"top",offset:235},bindElement:n,content:this.renderPopupContent()});this.initEvents()}this.popup.show()}},{key:"initEvents",value:function t(){var e=this;this.popup.getPopupContainer().addEventListener("mouseenter",function(){clearTimeout(e.enterTimeout);clearTimeout(e.leaveTimeout);clearTimeout(e.popupLeaveTimeout)});this.popup.getPopupContainer().addEventListener("mouseleave",function(t){e.popupLeaveTimeout=setTimeout(function(){e.closePopup()},500)})}},{key:"renderPopupContent",value:function t(){var e=i.Vue.create({el:document.createElement("div"),components:{PopupWrapperComponent:l},computed:{localize:function t(e){return i.Vue.getFilteredPhrases("INTRANET_INVITATION_WIDGET_")}},template:"<PopupWrapperComponent/>"});return e.$el}},{key:"closePopup",value:function t(){if(this.popup){this.popup.close()}}}]);return t}();u.InvitationWidget=r})(this.BX.Intranet.LicenseWidget=this.BX.Intranet.LicenseWidget||{},BX.Main,BX,BX,BX);
//# sourceMappingURL=script.map.js