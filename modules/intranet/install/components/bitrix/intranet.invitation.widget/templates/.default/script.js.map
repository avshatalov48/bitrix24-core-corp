{"version":3,"file":"script.js","sources":["src/analytics.js","src/contents/content.js","src/contents/invitation.js","src/contents/structure.js","src/contents/employees.js","src/contents/extranet.js","src/contents/collab.js","src/contents/user-online.js","src/popup.js","src/widget.js"],"sourcesContent":["import { sendData } from 'ui.analytics';\n\nexport class Analytics\n{\n\tstatic TOOLS = 'headerPopup';\n\tstatic TOOLS_LEGACY = 'Invitation';\n\tstatic CATEGORY_INVITATION = 'invitation';\n\tstatic CATEGORY_INVITATION_LEGACY = 'invitation';\n\tstatic EVENT_NAME_LEGACY = 'drawer_open';\n\tstatic SECTION_POPUP = 'headerPopup';\n\tstatic EVENT_SHOW = 'show';\n\tstatic EVENT_OPEN_SLIDER_INVITATION = 'drawer_open';\n\tstatic EVENT_OPEN_STRUCTURE = 'vis_structure_open';\n\tstatic EVENT_OPEN_USER_LIST = 'company_open';\n\tstatic EVENT_OPEN_SLIDER_EXTRANET_INVITATION = 'extranetinvitation_open';\n\tstatic isAdmin: boolean = false;\n\n\tstatic send(event: string): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.TOOLS,\n\t\t\tcategory: Analytics.CATEGORY_INVITATION,\n\t\t\tevent: event,\n\t\t\tp1: Analytics.isAdmin ? 'isAdmin_Y' : 'isAdmin_N',\n\t\t});\n\t}\n\n\tstatic sendCreateCollab(): void\n\t{\n\t\tsendData({\n\t\t\ttool: 'im',\n\t\t\tcategory: 'collab',\n\t\t\tevent: 'click_create_new',\n\t\t\tc_section: Analytics.SECTION_POPUP,\n\t\t\tp2: 'user_intranet', // widget is available only for intranet users\n\t\t});\n\t}\n}\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ajax, Cache, Text } from 'main.core';\nimport { ConfigContent } from '../types/content';\nimport { Popup } from 'main.popup';\nimport { Analytics } from '../analytics';\n\nexport class Content extends EventEmitter\n{\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options: Object)\n\t{\n\t\tsuper();\n\t\tthis.setOptions(options);\n\t\tthis.analytics = new Analytics();\n\t}\n\n\tsetOptions(options: Object): void\n\t{\n\t\tthis.cache.set('options', { ...options });\n\t}\n\n\tgetOptions(): Object\n\t{\n\t\treturn this.cache.get('options', {});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tshowInfoHelper(articleCode: string): void\n\t{\n\t\tBX.UI.InfoHelper.show(articleCode);\n\t\tthis.sendAnalytics(articleCode);\n\t}\n\n\tsendAnalytics(code: string): void\n\t{\n\t\tajax.runAction('intranet.invitationwidget.analyticsLabel', {\n\t\t\tdata: {},\n\t\t\tanalyticsLabel: {\n\t\t\t\thelperCode: code,\n\t\t\t\theaderPopup: 'Y'\n\t\t\t}\n\t\t});\n\t}\n\n\tgetHintPopup(text: string, element: HTMLElement, type: string): Popup\n\t{\n\t\treturn this.cache.remember(type, () => {\n\t\t\treturn new Popup(`bx-hint-${Text.getRandom()}`, element, {\n\t\t\t\tcontent: text,\n\t\t\t\tclassName: 'bx-invitation-warning',\n\t\t\t\tzIndex: 15000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 40,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tdarkMode: true,\n\t\t\t\toverlay: false,\n\t\t\t\tmaxWidth: 300,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: (event) => {\n\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:show', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tpopup: event.target,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t\tconst timeout = setTimeout(() => {\n\t\t\t\t\t\t\tevent.target.close();\n\t\t\t\t\t\t}, 4000)\n\t\t\t\t\t\tEventEmitter.subscribeOnce(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:close', () => {\n\t\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:close');\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshowHintPopup(text: string, element: HTMLElement, type: string): void\n\t{\n\t\tthis.getHintPopup(text, element, type).toggle();\n\t}\n\n\tshowInvitationPlace(text: string, element: HTMLElement, type: string): void\n\t{\n\t\tif (this.getOptions().isAdmin)\n\t\t{\n\t\t\tthis.showInvitationSlider(type);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.getOptions().isInvitationAvailable)\n\t\t\t{\n\t\t\t\tthis.showInvitationSlider(type);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showHintPopup(text, element, 'hint-' + type);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowInvitationSlider(type: string): void\n\t{\n\t\tlet link = this.getOptions().invitationLink;\n\n\t\tif (type === 'extranet')\n\t\t{\n\t\t\tlink = `${link}&firstInvitationBlock=extranet`;\n\t\t\tAnalytics.send(Analytics.EVENT_OPEN_SLIDER_EXTRANET_INVITATION);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tAnalytics.send(Analytics.EVENT_OPEN_SLIDER_INVITATION);\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\tlink,\n\t\t\t{ cacheable: false, allowChangeHistory: false, width: 1100 }\n\t\t);\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t}\n\t}\n}\n","import { Content } from \"./content\";\nimport { Tag, Loc } from \"main.core\";\nimport type { InvitationContentOptions } from \"../types/options\";\nimport type { ConfigContent } from \"../types/content\";\n\nexport class InvitationContent extends Content\n{\n\tconstructor(options: InvitationContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.InvitationContent');\n\t\tthis.setOptions(options);\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tbackgroundColor: '#14bfd5',\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst showInvitationSlider = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.showInvitationPlace(\n\t\t\t\t\tLoc.getMessage('INTRANET_INVITATION_WIDGET_DISABLED_TEXT'),\n\t\t\t\t\te.target,\n\t\t\t\t\t'default-invitation'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst showInvitationHelper = () => {\n\t\t\t\tthis.showInfoHelper('limit_why_team_invites');\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-invite\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-invite-main\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-inner\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-icon intranet-invitation-widget-item-icon--invite\"></div>\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE_EMPLOYEE')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-link\">\n\t\t\t\t\t\t\t\t\t\t<span onclick=\"${showInvitationHelper}\" class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_DESC')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<a onclick=\"${showInvitationSlider}\" class=\"intranet-invitation-widget-item-btn intranet-invitation-widget-item-btn--invite\"> \n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { Content } from './content';\nimport { Counter } from 'ui.cnt';\nimport { Tag, Loc, Type, Dom } from 'main.core';\nimport { Analytics } from '../analytics';\nimport type { StructureContentOptions } from '../types/options';\nimport type { ConfigContent } from '../types/content';\nimport { EventEmitter } from 'main.core.events';\n\nexport class StructureContent extends Content\n{\n\tconstructor(options: StructureContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.StructureContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\tthis.#showCounter();\n\n\t\tif (this.getOptions().shouldShowStructureCounter)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce('HR.company-structure:first-popup-showed', this.#onFirstWatchNewStructure.bind(this));\n\t\t}\n\n\t\treturn {\n\t\t\thtml: this.getLayout(),\n\t\t\tflex: 3,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst onclick = () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_OPEN_STRUCTURE);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--company intranet-invitation-widget-item--active\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-logo\"></div>\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_STRUCTURE')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a onclick=\"${onclick}\" href=\"${this.getOptions().link}\" class=\"intranet-invitation-widget-item-btn\"> \n\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EDIT')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('counter-wrapper', () => {\n\t\t\treturn this.getLayout().querySelector('.intranet-invitation-widget-item-name');\n\t\t});\n\t}\n\n\t#showCounter(): void\n\t{\n\t\tif (this.#getCounterValue() > 0)\n\t\t{\n\t\t\tDom.addClass(this.#getCounter().getContainer(), 'invitation-structure-counter');\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\treturn this.cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: this.#getCounterValue(),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCounterValue(): number\n\t{\n\t\treturn (this.getOptions().shouldShowStructureCounter) ? 1 : 0;\n\t}\n\n\t#onFirstWatchNewStructure(): void\n\t{\n\t\tconst value = this.#getCounter().value;\n\t\tif (!Type.isNumber(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getOptions().shouldShowStructureCounter)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getOptions().shouldShowStructureCounter = false;\n\t\tthis.#getCounter().destroy();\n\t\tthis.cache.delete('counter');\n\t}\n}\n","import { Counter } from 'ui.cnt';\nimport { Content } from \"./content\";\nimport { Analytics } from '../analytics';\nimport { Tag, Loc, ajax, Text, Type } from 'main.core';\nimport type { EmployeesContentOptions } from \"../types/options\";\nimport type { ConfigContent } from \"../types/content\";\nimport { Menu } from \"main.popup\";\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class EmployeesContent extends Content\n{\n\t#rightType: string;\n\n\tconstructor(options: EmployeesContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.EmployeesContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getOptions().awaitData.then((response) => {\n\t\t\t\tthis.setOptions({\n\t\t\t\t\t...response.data.users,\n\t\t\t\t\t...this.getOptions(),\n\t\t\t\t});\n\t\t\t\tthis.#showCounter();\n\n\t\t\t\treturn this.getLayout();\n\t\t\t}),\n\t\t\tflex: 5,\n\t\t\tsizeLoader: 55,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--emp ${this.getOptions().isLimit ? 'intranet-invitation-widget-item--emp-alert' : null}\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-inner\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-progress ${this.getOptions().isLimit ? 'intranet-invitation-widget-item-progress--crit' : 'intranet-invitation-widget-item-progress--full'}\"/>\n\t\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-employees\">\n\t\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t\t\t<span style=\"margin-right: 2px;\">\n\t\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES')}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-num\">\n\t\t\t\t\t\t\t\t\t\t${this.getOptions().currentUserCountMessage}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getDetail()}\n\t\t\t\t\t\t\t${this.getOptions().isAdmin ? this.getSelectorRights() : null}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#showCounter(): void\n\t{\n\t\tif (this.getOptions().invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tBX.addCustomEvent('onPullEvent-main', this.#onReceiveCounterValue.bind(this));\n\t}\n\n\t#onReceiveCounterValue(command, params): void\n\t{\n\t\tif (command === 'user_counter' && params[BX.message('SITE_ID')])\n\t\t{\n\t\t\tconst counters = BX.clone(params[BX.message('SITE_ID')]);\n\t\t\tconst value = counters[this.getOptions().counterId];\n\n\t\t\tif (!Type.isNumber(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.getOptions().invitationCounter = value;\n\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\tthis.cache.delete('counter');\n\t\t\t}\n\t\t}\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\treturn this.cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: Number(this.getOptions().invitationCounter),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.cache.remember('counter-wrapper', () => {\n\t\t\treturn this.getLayout().querySelector('.intranet-invitation-widget-item-name');\n\t\t});\n\t}\n\n\tgetDetail(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('detail', () => {\n\t\t\tlet content = '';\n\n\t\t\tif (Number(this.getOptions().maxUserCount) === 0)\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES_NO_LIMIT');\n\t\t\t}\n\t\t\telse if (this.getOptions().isLimit)\n\t\t\t{\n\t\t\t\tcontent = Loc.getMessage('INTRANET_INVITATION_WIDGET_EMPLOYEES_LIMIT');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcontent = this.getOptions().leftCountMessage;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div onclick=\"${this.showUserList()}\" class=\"intranet-invitation-widget-item-detail\">\n\t\t\t\t\t<span class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t${content}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshowUserList(): Function\n\t{\n\t\treturn this.cache.remember('showUserList', () => {\n\t\t\treturn () => {\n\t\t\t\tAnalytics.send(Analytics.EVENT_OPEN_USER_LIST);\n\t\t\t\tdocument.location.href = '/company/';\n\t\t\t};\n\t\t});\n\t}\n\n\tgetSelectorRights(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('selector-rights', () => {\n\t\t\tconst showMenu = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.getRightsMenu(e.target).toggle();\n\t\t\t}\n\n\t\t\tconst button = Tag.render`\n\t\t\t\t<div onclick=\"${showMenu}\" class=\"intranet-invitation-widget-item-menu\"></div>\n\t\t\t`;\n\n\t\t\tthis.subscribe('right-selected', (event) => {\n\t\t\t\tconst menu = this.getRightsMenu(button);\n\t\t\t\tmenu.close();\n\t\t\t\tmenu.destroy();\n\t\t\t\tif (event.data.type)\n\t\t\t\t{\n\t\t\t\t\tthis.cache.delete('menu-rights');\n\t\t\t\t\tthis.#rightType = event.data.type;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn button;\n\t\t});\n\t}\n\n\tgetRightsMenu(element: HTMLElement): Menu\n\t{\n\t\treturn this.cache.remember('menu-rights', () => {\n\t\t\treturn new Menu(`menu-rights-${Text.getRandom()}`, element, this.getMenuRightsItems(), {\n\t\t\t\tautoHide: true,\n\t\t\t\toffsetLeft: 10,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tangle: true,\n\t\t\t\tclassName: 'license-right-popup-men',\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tthis.getEventNamespace() + ':showRightMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: (popup) => {\n\t\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\tthis.getEventNamespace() + ':closeRightMenu',\n\t\t\t\t\t\t\tnew BaseEvent({\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tpopup: popup,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t\tonPopupFirstShow: (popup) => {\n\t\t\t\t\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'SidePanel.Slider:onOpenStart', () => {\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tgetMenuRightsItems(): Array\n\t{\n\t\tif (!this.#rightType)\n\t\t{\n\t\t\tthis.#rightType = this.getOptions().rightType;\n\t\t}\n\n\t\treturn [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('INTRANET_INVITATION_WIDGET_SETTING_ALL_INVITE'),\n\t\t\t\tclassName: this.#rightType === 'all' ? 'menu-popup-item-accept' : '',\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveInvitationRightSetting('all').then(() => {\n\t\t\t\t\t\tthis.emit('right-selected', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'all'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('INTRANET_INVITATION_WIDGET_SETTING_ADMIN_INVITE'),\n\t\t\t\tclassName: this.#rightType === 'admin' ? 'menu-popup-item-accept' : '',\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.saveInvitationRightSetting('admin').then(() => {\n\t\t\t\t\t\tthis.emit('right-selected', new BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\ttype: 'admin'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\tsaveInvitationRightSetting(type): Promise\n\t{\n\t\treturn ajax.runAction(\"intranet.invitationwidget.saveInvitationRight\", {\n\t\t\tdata: {\n\t\t\t\ttype: type\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import { Content } from \"./content\";\nimport { Tag, Loc } from \"main.core\";\nimport type { ConfigContent } from \"../types/content\";\nimport type { ExtranetContentOptions } from \"../types/options\";\n\nexport class ExtranetContent extends Content\n{\n\tarticleCode: string = \"6770709\";\n\n\tconstructor(options: ExtranetContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.ExtranetContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getOptions().awaitData.then((response) => {\n\t\t\t\tthis.setOptions({\n\t\t\t\t\t...response.data.users,\n\t\t\t\t\t...this.getOptions(),\n\t\t\t\t});\n\t\t\t\treturn this.getLayout();\n\t\t\t}),\n\t\t\tminHeight: '55px',\n\t\t\tsizeLoader: 37,\n\t\t\tmarginBottom: 24,\n\t\t\tsecondary: true,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst showInvitationSlider = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tthis.showInvitationPlace(\n\t\t\t\t\tLoc.getMessage('INTRANET_INVITATION_WIDGET_DISABLED_TEXT'),\n\t\t\t\t\te.target,\n\t\t\t\t\t'extranet'\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst showExtranetHelper = () => {\n\t\t\t\tBX.Helper.show(`redirect=detail&code=${this.articleCode}`);\n\t\t\t\tthis.sendAnalytics(this.articleCode);\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"${this.getWrapperClass()}\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-icon intranet-invitation-widget-item-icon--ext\"></div>\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EXTRANET')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-link\">\n\t\t\t\t\t\t\t\t<span onclick=\"${showExtranetHelper}\" class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_EXTRANET_DESC')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.getCountUserMessage()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button onclick=\"${showInvitationSlider}\" class=\"intranet-invitation-widget-item-btn\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_INVITE')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWrapperClass(): string\n\t{\n\t\treturn this.cache.remember('wrapper-class', () => {\n\t\t\tconst baseClass = 'intranet-invitation-widget-item intranet-invitation-widget-item--wide';\n\n\t\t\tif (this.getOptions().currentExtranetUserCount > 0)\n\t\t\t{\n\t\t\t\treturn baseClass + ' intranet-invitation-widget-item--active';\n\t\t\t}\n\n\t\t\treturn baseClass;\n\t\t});\n\t}\n\n\tgetCountUserMessage(): ?HTMLDivElement\n\t{\n\t\treturn this.cache.remember('count-user-message', () => {\n\t\t\tif (this.getOptions().currentExtranetUserCount > 0)\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"intranet-invitation-widget-item-ext-users\">\n\t\t\t\t\t\t${this.getOptions().currentExtranetUserCountMessage}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t});\n\t}\n}\n","import { Content } from './content';\nimport { Tag, Loc } from 'main.core';\nimport type { ConfigContent } from '../types/content';\nimport type { CollabContentOptions } from '../types/options';\nimport { Analytics } from '../analytics';\n\nexport class CollabContent extends Content\n{\n\tarticleCode: string = '22706764';\n\t#openChat: ?func;\n\n\tconstructor(options: CollabContentOptions) {\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.CollabContent');\n\t}\n\n\tgetConfig(): ConfigContent\n\t{\n\t\treturn {\n\t\t\thtml: this.getOptions().awaitData.then((response) => {\n\t\t\t\tconst { Messenger, CreatableChat } = response;\n\t\t\t\tthis.#openChat = () => {\n\t\t\t\t\tMessenger.openChatCreation(CreatableChat.collab);\n\t\t\t\t\tAnalytics.sendCreateCollab();\n\t\t\t\t};\n\n\t\t\t\treturn this.getLayout();\n\t\t\t}),\n\t\t\tminHeight: '55px',\n\t\t\tsizeLoader: 37,\n\t\t\tmarginBottom: 24,\n\t\t\tsecondary: true,\n\t\t};\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst showInvitationSlider = (e) => {\n\t\t\t\tthis.#openChat();\n\t\t\t\te.stopPropagation();\n\t\t\t};\n\n\t\t\tconst showCollabHelper = () => {\n\t\t\t\tBX.Helper.show(`redirect=detail&code=${this.articleCode}`);\n\t\t\t\tthis.sendAnalytics(this.articleCode);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"${this.getWrapperClass()}\">\n\t\t\t\t\t<div class=\"intranet-invitation-widget-content\">\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-icon intranet-invitation-widget-item-icon--collab\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --collab\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-content\">\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-name\">\n\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_COLLAB')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"intranet-invitation-widget-item-link\">\n\t\t\t\t\t\t\t\t<span onclick=\"${showCollabHelper}\" class=\"intranet-invitation-widget-item-link-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_COLLAB_DESC')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<button onclick=\"${showInvitationSlider}\" class=\"intranet-invitation-widget-item-btn intranet-invitation-widget-item-btn--collab\">\n\t\t\t\t\t\t${Loc.getMessage('INTRANET_INVITATION_WIDGET_COLLAB_CREATE')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWrapperClass(): string\n\t{\n\t\treturn this.cache.remember('wrapper-class', () => {\n\t\t\treturn 'intranet-invitation-widget-item intranet-invitation-widget-item--wide intranet-invitation-widget-item--collab';\n\t\t});\n\t}\n}\n","import { Content } from \"./content\";\nimport { Tag, ajax, Runtime, Dom } from \"main.core\";\nimport { Loader } from \"main.loader\";\n\nexport class UserOnlineContent extends Content\n{\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 45,\n\t\t\t});\n\t\t})\n\t}\n\n\tgetComponentContent(): HTMLElement {\n\t\treturn this.cache.remember('component-content', () => {\n\t\t\tconst contentContainer = Tag.render`\n\t\t\t\t<div data-role=\"invitation-widget-ustat-online\" class=\"invitation-widget-ustat-online\"/>\n\t\t\t`;\n\t\t\tDom.style(contentContainer, 'min-height', '70px');\n\n\t\t\tthis.getLoader().show(contentContainer);\n\n\t\t\tajax.runAction(\"intranet.invitationwidget.getUserOnlineComponent\").then((response) => {\n\t\t\t\tthis.getLoader().hide();\n\t\t\t\tconst assets = response.data.assets;\n\t\t\t\tBX.load([...assets['css'], ...assets['js']], () => {\n\t\t\t\t\tRuntime.html(null, [...assets['string']].join('\\n'), {useAdjacentHTML: true})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tRuntime.html(contentContainer, response.data.html).then(() => {\n\t\t\t\t\t\t\t\tthis.getLoader().destroy();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn contentContainer;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"intranet-invitation-widget-item intranet-invitation-widget-item--wide intranet-invitation-widget-item--no-padding\">\n\t\t\t\t\t${this.getComponentContent()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { Cache, ajax, Event, Runtime } from 'main.core';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport type { ConfigContent } from './types/content';\nimport type { InvitationPopupOptions } from './types/options';\nimport { InvitationContent } from './contents/invitation';\nimport { StructureContent } from './contents/structure';\nimport { EmployeesContent } from './contents/employees';\nimport { ExtranetContent } from './contents/extranet';\nimport { CollabContent } from './contents/collab';\nimport { UserOnlineContent } from './contents/user-online';\n\nexport class InvitationPopup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: InvitationPopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget.Popup');\n\t\tthis.setOptions(options)\n\t\tthis.#setEventHandler();\n\t}\n\n\tsetOptions(options: InvitationPopupOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): InvitationPopupOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.getPopup().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.getPopup().close();\n\t}\n\n\t#getAwaitData(): Promise\n\t{\n\t\treturn this.#cache.remember('await-data', () => {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tajax.runAction(\"intranet.invitationwidget.getData\", {\n\t\t\t\t\tdata: {},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\theaderPopup: \"Y\"\n\t\t\t\t\t}\n\t\t\t\t}).then(resolve).catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopup(): PopupComponentsMaker\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new PopupComponentsMaker({\n\t\t\t\tid: 'invitation-popup',\n\t\t\t\ttarget: this.getOptions().target,\n\t\t\t\twidth: 350,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t});\n\t\t});\n\t}\n\n\t//This is the method for popup content configuration\n\t#getContent(): Array<ConfigContent>\n\t{\n\t\treturn this.#cache.remember('content', () => {\n\t\t\treturn [\n\t\t\t\tthis.#getInvitationContent().getConfig(),\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\tthis.#getStructureContent().getConfig(),\n\t\t\t\t\t\tthis.#getEmployeesContent().getConfig(),\n\t\t\t\t\t],\n\t\t\t\t\tmarginBottom: 24,\n\t\t\t\t},\n\t\t\t\tthis.getOptions().isExtranetAvailable ? this.#getExtranetContent().getConfig() : null,\n\t\t\t\tthis.getOptions().isCollabAvailable ? this.#getCollabContent().getConfig() : null,\n\t\t\t\tthis.#getUserOnlineContent().getConfig(),\n\t\t\t];\n\t\t});\n\t}\n\n\t//region Get Content\n\t#getInvitationContent(): InvitationContent\n\t{\n\t\treturn this.#cache.remember('invitation-content', () => {\n\t\t\treturn new InvitationContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tinvitationLink: this.getOptions().params.invitationLink,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getStructureContent(): StructureContent\n\t{\n\t\treturn this.#cache.remember('structure-content', () => {\n\t\t\treturn new StructureContent({\n\t\t\t\tlink: this.getOptions().params.structureLink,\n\t\t\t\tshouldShowStructureCounter: this.getOptions().params.shouldShowStructureCounter,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getEmployeesContent(): EmployeesContent\n\t{\n\t\treturn this.#cache.remember('employees-content', () => {\n\t\t\treturn new EmployeesContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tawaitData: this.#getAwaitData(),\n\t\t\t\tinvitationCounter: this.getOptions().params.invitationCounter,\n\t\t\t\tcounterId: this.getOptions().params.counterId,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getExtranetContent(): ExtranetContent\n\t{\n\t\treturn this.#cache.remember('extranet-content', () => {\n\t\t\treturn new ExtranetContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tawaitData: this.#getAwaitData(),\n\t\t\t\tinvitationLink: this.getOptions().params.invitationLink,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCollabContent(): CollabContent\n\t{\n\t\treturn this.#cache.remember('collab-content', () => {\n\t\t\treturn new CollabContent({\n\t\t\t\tisAdmin: this.getOptions().isAdmin,\n\t\t\t\tawaitData: Runtime.loadExtension('im.public', 'im.v2.component.content.chat-forms.forms'),\n\t\t\t});\n\t\t});\n\t}\n\n\t#getUserOnlineContent(): UserOnlineContent\n\t{\n\t\treturn this.#cache.remember('user-online-content', () => {\n\t\t\treturn new UserOnlineContent;\n\t\t});\n\t}\n\t//endregion\n\n\t#getPopupContainer(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('popup-container', () => {\n\t\t\treturn this.getPopup().getPopup().getPopupContainer();\n\t\t});\n\t}\n\n\t#setEventHandler()\n\t{\n\t\tconst autoHideHandler = (event) => {\n\t\t\tif (event.data.popup)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tEvent.bind(this.#getPopupContainer(), 'click', () => {\n\t\t\t\t\t\tevent.data.popup.close();\n\t\t\t\t\t});\n\t\t\t\t}, 100);\n\t\t\t}\n\t\t}\n\n\t\tconst close = () => {\n\t\t\tthis.close();\n\t\t}\n\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.EmployeesContent:showRightMenu', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.InvitationWidget.HintPopup:show', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Intranet.UstatOnline:showPopup', autoHideHandler);\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'SidePanel.Slider:onOpenStart', close);\n\t}\n}","import { EventEmitter } from 'main.core.events';\nimport { Cache, Event, Type } from 'main.core';\nimport { Counter } from 'ui.cnt';\nimport { Analytics } from './analytics';\nimport type { InvitationWidgetOptions } from './types/options';\nimport { InvitationPopup } from \"./popup\";\n\nexport class InvitationWidget extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: InvitationWidgetOptions) {\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.InvitationWidget');\n\t\tthis.setOptions(options);\n\t\tAnalytics.isAdmin = this.getOptions().isCurrentUserAdmin;\n\t\tEvent.bind(this.getOptions().button, 'click', () => {\n\t\t\tAnalytics.send(Analytics.EVENT_SHOW);\n\t\t\tthis.#getPopup().show();\n\t\t});\n\t\tEventEmitter.subscribe(EventEmitter.GLOBAL_TARGET, 'BX.Bitrix24.NotifyPanel:showInvitationWidget', () => {\n\t\t\tthis.#getPopup().show();\n\t\t});\n\t\tthis.#showCounter();\n\t}\n\n\tsetOptions(options: InvitationWidgetOptions): void\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\tgetOptions(): InvitationWidgetOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#showCounter(): void\n\t{\n\t\tif (this.getOptions().invitationCounter > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\n\t\tBX.addCustomEvent('onPullEvent-main', this.#onReceiveCounterValue.bind(this));\n\t\tif (this.getOptions().shouldShowStructureCounter)\n\t\t{\n\t\t\tEventEmitter.subscribeOnce('HR.company-structure:first-popup-showed', this.#onFirstWatchNewStructure.bind(this));\n\t\t}\n\t}\n\n\t#onReceiveCounterValue(command, params): void\n\t{\n\t\tif (command === 'user_counter' && params[BX.message('SITE_ID')])\n\t\t{\n\t\t\tconst counters = BX.clone(params[BX.message('SITE_ID')]);\n\t\t\tlet value = counters[this.getOptions().counterId];\n\n\t\t\tif (!Type.isNumber(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.getOptions().shouldShowStructureCounter)\n\t\t\t{\n\t\t\t\tvalue++;\n\t\t\t}\n\n\t\t\tthis.#getCounter().update(value);\n\t\t\tthis.getOptions().invitationCounter = value;\n\n\t\t\tif (value > 0)\n\t\t\t{\n\t\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#getCounter().destroy();\n\t\t\t\tthis.#cache.delete('counter');\n\t\t\t}\n\t\t}\n\t}\n\n\t#getCounterWrapper(): HTMLElement\n\t{\n\t\treturn this.#cache.remember('counter-wrapper', () => {\n\t\t\treturn this.getOptions().button.querySelector('.invitation-widget-counter');\n\t\t});\n\t}\n\n\t#getCounter(): Counter\n\t{\n\t\treturn this.#cache.remember('counter', () => {\n\t\t\treturn new Counter({\n\t\t\t\tvalue: this.#getCounterValue(),\n\t\t\t\tcolor: Counter.Color.DANGER,\n\t\t\t});\n\t\t});\n\t}\n\n\t#getPopup(): InvitationPopup\n\t{\n\t\treturn this.#cache.remember('popup', () => {\n\t\t\treturn new InvitationPopup({\n\t\t\t\tisAdmin: this.getOptions().isCurrentUserAdmin,\n\t\t\t\ttarget: this.getOptions().button,\n\t\t\t\tisExtranetAvailable: this.getOptions().isExtranetAvailable,\n\t\t\t\tisCollabAvailable: this.getOptions().isCollabAvailable,\n\t\t\t\tisInvitationAvailable: this.getOptions().isInvitationAvailable,\n\t\t\t\tparams: {\n\t\t\t\t\tstructureLink: this.getOptions().structureLink,\n\t\t\t\t\tinvitationLink: this.getOptions().invitationLink,\n\t\t\t\t\tinvitationCounter: this.getOptions().invitationCounter,\n\t\t\t\t\tcounterId: this.getOptions().counterId,\n\t\t\t\t\tshouldShowStructureCounter: this.getOptions().shouldShowStructureCounter,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#getCounterValue(): number\n\t{\n\t\tlet counterValue = Number(this.getOptions().invitationCounter);\n\t\tif (this.getOptions().shouldShowStructureCounter ?? false)\n\t\t{\n\t\t\tcounterValue++;\n\t\t}\n\n\t\treturn counterValue;\n\t}\n\n\t#onFirstWatchNewStructure(): void\n\t{\n\t\tlet value = this.#getCounter().value;\n\n\t\tif (!Type.isNumber(value))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.getOptions().shouldShowStructureCounter)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tvalue--;\n\t\tthis.getOptions().shouldShowStructureCounter = false;\n\t\tthis.#getCounter().update(value);\n\t\tthis.getOptions().invitationCounter = value;\n\n\t\tif (value > 0)\n\t\t{\n\t\t\tthis.#getCounter().renderTo(this.#getCounterWrapper());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#getCounter().destroy();\n\t\t\tthis.#cache.delete('counter');\n\t\t}\n\t}\n}\n"],"names":["Analytics","event","sendData","tool","TOOLS","category","CATEGORY_INVITATION","p1","isAdmin","c_section","SECTION_POPUP","p2","Content","options","Cache","MemoryCache","setOptions","analytics","cache","set","get","Error","articleCode","BX","UI","InfoHelper","show","sendAnalytics","code","ajax","runAction","data","analyticsLabel","helperCode","headerPopup","text","element","type","remember","Popup","Text","getRandom","content","className","zIndex","angle","offsetTop","offsetLeft","closeIcon","autoHide","darkMode","overlay","maxWidth","events","onShow","EventEmitter","emit","GLOBAL_TARGET","BaseEvent","popup","target","timeout","setTimeout","close","subscribeOnce","clearTimeout","onClose","getHintPopup","toggle","getOptions","showInvitationSlider","isInvitationAvailable","showHintPopup","link","invitationLink","send","EVENT_OPEN_SLIDER_EXTRANET_INVITATION","EVENT_OPEN_SLIDER_INVITATION","SidePanel","Instance","open","cacheable","allowChangeHistory","width","html","getLayout","InvitationContent","setEventNamespace","backgroundColor","e","stopPropagation","showInvitationPlace","Loc","getMessage","showInvitationHelper","showInfoHelper","Tag","render","StructureContent","shouldShowStructureCounter","bind","flex","onclick","EVENT_OPEN_STRUCTURE","querySelector","Dom","addClass","getContainer","renderTo","Counter","value","color","Color","DANGER","Type","isNumber","destroy","EmployeesContent","_classPrivateMethodInitSpec","awaitData","then","response","users","_classPrivateMethodGet","sizeLoader","isLimit","showUserList","currentUserCountMessage","getDetail","getSelectorRights","Number","maxUserCount","leftCountMessage","EVENT_OPEN_USER_LIST","document","location","href","showMenu","getRightsMenu","button","subscribe","menu","Menu","getMenuRightsItems","onPopupShow","getEventNamespace","onPopupClose","onPopupFirstShow","rightType","saveInvitationRightSetting","invitationCounter","addCustomEvent","command","params","message","counters","clone","counterId","update","ExtranetContent","minHeight","marginBottom","secondary","showExtranetHelper","Helper","getWrapperClass","getCountUserMessage","baseClass","currentExtranetUserCount","currentExtranetUserCountMessage","CollabContent","_classPrivateFieldInitSpec","Messenger","CreatableChat","openChatCreation","collab","sendCreateCollab","showCollabHelper","UserOnlineContent","Loader","size","contentContainer","style","getLoader","hide","assets","load","Runtime","join","useAdjacentHTML","getComponentContent","InvitationPopup","getPopup","PopupComponentsMaker","id","Promise","resolve","reject","getConfig","isExtranetAvailable","isCollabAvailable","structureLink","loadExtension","getPopupContainer","autoHideHandler","Event","InvitationWidget","isCurrentUserAdmin","EVENT_SHOW","counterValue"],"mappings":"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"}