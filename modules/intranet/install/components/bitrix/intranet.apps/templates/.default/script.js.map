{"version":3,"file":"script.js","sources":["src/index.js"],"sourcesContent":["import {Type, Loc, Dom, ajax} from 'main.core';\nimport {PopupManager} from 'main.popup';\n\nimport {CreateButton} from 'ui.buttons';\n\nclass AppsWidget\n{\n\tconstructor(params)\n\t{\n\t\tthis.popup = null;\n\t\tthis.personalMobile = (Type.isStringFilled(params.personalMobile) ? params.personalMobile : '');\n\n\t\tthis.initAppsInstall();\n\t}\n\n\tinitAppsInstall()\n\t{\n\t\tconst androidIcon = document.querySelector(\"[data-role='profile-android-app']\");\n\t\tif (Type.isDomNode(androidIcon))\n\t\t{\n\t\t\tandroidIcon.addEventListener('click', () => {\n\t\t\t\tthis.showSmsPopup(this.personalMobile);\n\t\t\t});\n\t\t}\n\n\t\tconst iosIcon = document.querySelector(\"[data-role='profile-ios-app']\");\n\t\tif (Type.isDomNode(iosIcon))\n\t\t{\n\t\t\tiosIcon.addEventListener('click', () => {\n\t\t\t\tthis.showSmsPopup(this.personalMobile);\n\t\t\t});\n\t\t}\n\t}\n\n\tshowSmsPopup(personalMobile)\n\t{\n\t\tthis.popup = PopupManager.create({\n\t\t\tid: 'intranet-apps-widget-sms-popup',\n\t\t\tclassName: 'intranet-apps-widget-popup',\n\t\t\ttitleBar: Loc.getMessage('INTRANET_APPS_WIDGET_INSTALL'),\n\t\t\tcacheable: false,\n\t\t\tmaxWidth: 450,\n\t\t\tcontentColor: 'white',\n\t\t\tcontent:\n\t\t\t\tDom.create('div', {\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'intranet-apps-widget-popup-title',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: Loc.getMessage('INTRANET_APPS_WIDGET_PHONE'),\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'ui-ctl ui-ctl-textbox ui-ctl-wa',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tDom.create('input', {\n\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\tvalue: personalMobile,\n\t\t\t\t\t\t\t\t\t\tclassName: 'ui-ctl-element',\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\tinput: (event) => {\n\t\t\t\t\t\t\t\t\t\t\tpersonalMobile = event.target.value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tDom.create('div', {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tclassName: 'intranet-apps-widget-popup-text',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\thtml: Loc.getMessage('INTRANET_APPS_WIDGET_INSTALL_TEXT'),\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcloseIcon: true,\n\t\t\t\tcontentPadding: 10,\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew CreateButton({\n\t\t\t\t\t\ttext: Loc.getMessage('INTRANET_APPS_WIDGET_SEND'),\n\t\t\t\t\t\tclassName: 'ui-btn-primary',\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: (button) => {\n\t\t\t\t\t\t\t\tbutton.setWaiting();\n\t\t\t\t\t\t\t\tconst popup = button.context;\n\n\t\t\t\t\t\t\t\tajax.runAction('intranet.controller.sms.sendsmsforapp', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tphone: personalMobile,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.show()\n\t}\n}\n\nexport {\n\tAppsWidget,\n}\n"],"names":["AppsWidget","params","popup","personalMobile","Type","isStringFilled","initAppsInstall","androidIcon","document","querySelector","isDomNode","addEventListener","showSmsPopup","iosIcon","PopupManager","create","id","className","titleBar","Loc","getMessage","cacheable","maxWidth","contentColor","content","Dom","children","props","html","value","type","events","input","event","target","closeIcon","contentPadding","buttons","CreateButton","text","click","button","setWaiting","context","ajax","runAction","data","phone","then","close","show"],"mappings":"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"}