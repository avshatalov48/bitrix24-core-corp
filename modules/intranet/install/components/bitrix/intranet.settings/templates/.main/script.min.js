this.BX=this.BX||{};(function(e,t,i,a,n,s,l,r,o,c,d,_,u,T,v,g,p,E,b,h,I,S){"use strict";function N(e,t,i){f(e,t);t.set(e,i)}function f(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var w=new WeakMap;var m=new WeakMap;var L=new WeakMap;var A=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.classCallCheck(this,e);N(this,w,{writable:true,value:[]});N(this,m,{writable:true,value:"settings"});N(this,L,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,L,t)}babelHelpers.createClass(e,[{key:"addEvent",value:function e(t,i){if(babelHelpers.classPrivateFieldGet(this,L).isBitrix24){babelHelpers.classPrivateFieldGet(this,w)[t]=i}}},{key:"send",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,L).isBitrix24){return}if(Object.keys(babelHelpers.classPrivateFieldGet(this,w)).length>0){I.ajax.runComponentAction("bitrix:intranet.settings","analytic",{mode:"class",data:{data:babelHelpers.classPrivateFieldGet(this,w)}}).then((function(){}))}babelHelpers.classPrivateFieldSet(this,w,[])}},{key:"addEventOpenSettings",value:function e(){var i,a,n,s;var l={event:P.OPEN,tool:babelHelpers.classPrivateFieldGet(this,m),category:"slider",p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,c_section:(a=(n=babelHelpers.classPrivateFieldGet(this,L))===null||n===void 0?void 0:n.analyticContext)!==null&&a!==void 0?a:"",c_element:(s=babelHelpers.classPrivateFieldGet(this,L))===null||s===void 0?void 0:s.locationName};t.sendData(l)}},{key:"addEventOpenTariffSelector",value:function e(t){var i;var a={event:"open_tariff",tool:babelHelpers.classPrivateFieldGet(this,m),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};this.addEvent(t+"_open_tariff",a)}},{key:"addEventOpenHint",value:function e(t){var i;var a={event:"open_hint",tool:babelHelpers.classPrivateFieldGet(this,m),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};this.addEvent(t+"_open_hint",a)}},{key:"addEventStartPagePage",value:function e(i){var a;var n={event:P.START_PAGE,tool:babelHelpers.classPrivateFieldGet(this,m),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(n)}},{key:"addEventChangePage",value:function e(i){var a;var n={event:P.VIEW,tool:babelHelpers.classPrivateFieldGet(this,m),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(n)}},{key:"addEventToggleTools",value:function e(t,i){var a,n;var s="onoff_tools";var l={event:s,tool:babelHelpers.classPrivateFieldGet(this,m),category:"tools",type:t,c_element:(a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.locationName,p1:((n=babelHelpers.classPrivateFieldGet(this,L))===null||n===void 0?void 0:n.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:i?C.ON:C.OFF};this.addEvent("tools"+t+"_"+s,l)}},{key:"addEventToggle2fa",value:function e(t){var i;var a="2fa_onoff";var n={event:a,tool:babelHelpers.classPrivateFieldGet(this,m),category:"security",p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:t?C.ON:C.OFF};this.addEvent("security_"+a,n)}},{key:"addEventConfigPortal",value:function e(t){var i={event:t,tool:babelHelpers.classPrivateFieldGet(this,m),category:"portal"};this.addEvent("portal_"+t,i)}},{key:"addEventConfigEmployee",value:function e(t,i){var a;var n={event:t,tool:babelHelpers.classPrivateFieldGet(this,m),category:"employee",p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:i?C.ON:C.OFF};this.addEvent("employee_"+t,n)}},{key:"addEventConfigConfiguration",value:function e(t,i){var a;var n={event:t,tool:babelHelpers.classPrivateFieldGet(this,m),category:"configuration",p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN,p2:i?C.ON:C.OFF};this.addEvent("configuration_"+t,n)}},{key:"addEventConfigRequisite",value:function e(i){var a,n;var s={event:i,tool:babelHelpers.classPrivateFieldGet(this,m),category:"requisite",c_element:(a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.locationName,p1:((n=babelHelpers.classPrivateFieldGet(this,L))===null||n===void 0?void 0:n.isAdmin)!==false?R.ADMIN:R.NOT_ADMIN};t.sendData(s)}}]);return e}();var H=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(H,"TOOLS","tools");babelHelpers.defineProperty(H,"SECURITY","security");babelHelpers.defineProperty(H,"AI","ai");babelHelpers.defineProperty(H,"PORTAL","portal");babelHelpers.defineProperty(H,"EMPLOYEE","employee");babelHelpers.defineProperty(H,"COMMUNICATION","communication");babelHelpers.defineProperty(H,"REQUISITE","requisite");babelHelpers.defineProperty(H,"SCHEDULE","schedule");babelHelpers.defineProperty(H,"CONFIGURATION","configuration");var P=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(P,"OPEN","open_setting");babelHelpers.defineProperty(P,"START_PAGE","start_page");babelHelpers.defineProperty(P,"VIEW","view");babelHelpers.defineProperty(P,"TFA","2fa_onoff");babelHelpers.defineProperty(P,"CHANGE_PORTAL_NAME","change_portal_name");babelHelpers.defineProperty(P,"CHANGE_PORTAL_LOGO","change_portal_logo");babelHelpers.defineProperty(P,"CHANGE_PORTAL_SITE","change_portal_site");babelHelpers.defineProperty(P,"CHANGE_PORTAL_THEME","change_portal_theme");babelHelpers.defineProperty(P,"CHANGE_MARKET","change_market");babelHelpers.defineProperty(P,"CHANGE_PAY_TARIFF","change_pay_tariff");babelHelpers.defineProperty(P,"CREATE_CARD","create_vizitka");babelHelpers.defineProperty(P,"EDIT_CARD","edit_vizitka");babelHelpers.defineProperty(P,"COPY_LINK_CARD","copylink_vizitka");babelHelpers.defineProperty(P,"OPEN_ADD_COMPANY","open_add_company");babelHelpers.defineProperty(P,"CHANGE_QUICK_REG","change_quick_reg");babelHelpers.defineProperty(P,"CHANGE_REG_ALL","change_reg_all");babelHelpers.defineProperty(P,"CHANGE_EXTRANET_INVITE","change_extranet_invite");var R=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(R,"ADMIN","isAdmin_Y");babelHelpers.defineProperty(R,"NOT_ADMIN","isAdmin_N");var C=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(C,"ON","turn_on");babelHelpers.defineProperty(C,"OFF","turn_off");function O(e,t){M(e,t);t.add(e)}function y(e,t,i){M(e,t);t.set(e,i)}function M(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function G(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var F=new WeakMap;var k=new WeakMap;var D=new WeakMap;var B=new WeakMap;var V=new WeakMap;var U=new WeakSet;var W=new WeakSet;var z=new WeakSet;var x=new WeakSet;var Y=new WeakSet;var X=new WeakSet;var K=new WeakSet;var j=new WeakSet;var q=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));O(babelHelpers.assertThisInitialized(e),j);O(babelHelpers.assertThisInitialized(e),K);O(babelHelpers.assertThisInitialized(e),X);O(babelHelpers.assertThisInitialized(e),Y);O(babelHelpers.assertThisInitialized(e),x);O(babelHelpers.assertThisInitialized(e),z);O(babelHelpers.assertThisInitialized(e),W);O(babelHelpers.assertThisInitialized(e),U);y(babelHelpers.assertThisInitialized(e),F,{writable:true,value:void 0});y(babelHelpers.assertThisInitialized(e),k,{writable:true,value:void 0});y(babelHelpers.assertThisInitialized(e),D,{writable:true,value:void 0});y(babelHelpers.assertThisInitialized(e),B,{writable:true,value:void 0});y(babelHelpers.assertThisInitialized(e),V,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_TOOLS");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"tools"}},{key:"appendSections",value:function e(t){var i=new T.Row({content:this.getDescription().getContainer()});new h.SettingsRow({row:i,parent:G(this,x,J).call(this)});if(this.hasValue("tools")){G(this,U,Q).call(this)}G(this,x,J).call(this).renderTo(t)}},{key:"getDescription",value:function e(){var t="\n\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213196\')">\n\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return new BX.UI.Alert({text:t,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}}]);return t}(h.BaseSettingsPage);function Q(){var e=this;var t=this.getValue("tools");var i=[];Object.keys(t).forEach((function(n){var s;i.push(t[n].menuId);var l=t[n];var r=l.subgroups;var o=[];if(Object.keys(r).length>0){o=G(e,W,$).call(e,r,l)}var c=new a.SwitcherNested({id:l.code,title:l.name,link:l["settings-path"],infoHelperCode:l["infohelper-slider"],linkTitle:(s=l["settings-title"])!==null&&s!==void 0?s:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),isChecked:l.enabled,mainInputName:l.code,isOpen:false,items:o,isDefault:l["default"],helpMessage:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":l.name})});var d=new h.SettingsSection({section:c});I.Dom.style(d.getSectionView().render(),"margin-bottom","8px");I.Dom.attr(d.getSectionView().render(),"data-menu-id",l.menuId);G(e,K,ee).call(e).append(d.getSectionView().render());new h.SettingsRow({row:G(e,K,ee).call(e),parent:G(e,x,J).call(e),child:d})}))}function $(e,t){var i=this;var n=[];Object.keys(e).forEach((function(s){var l,r,o;var c=e[s];if(I.Type.isNull(c.name)||I.Type.isNull(c.code)||I.Type.isNull(c.enabled)){return}var d=new a.SwitcherNestedItem({title:c.name,id:c.code,inputName:c.code,isChecked:c.enabled,settingsPath:c["settings_path"],settingsTitle:(l=c["settings_title"])!==null&&l!==void 0?l:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),infoHelperCode:c["infohelper-slider"],isDefault:(r=(o=c["default"])!==null&&o!==void 0?o:c.disabled)!==null&&r!==void 0?r:false,helpMessage:c.disabled?I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":c.name}):c["default"]?I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL",{"#TOOL#":t.name}):""});if(c.disabled){I.Dom.style(d.getSwitcher().getNode(),{opacity:"0.4"})}else{S.EventEmitter.subscribe(d.getSwitcher(),"toggled",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventToggleTools(c.code,d.getSwitcher().isChecked())}))}if(c.code==="tool_subgroup_team_work_instant_messenger"){I.Event.bind(d.getSwitcher().getNode(),"click",(function(){if(!d.getSwitcher().isChecked()){G(i,j,te).call(i,c.code,d.getSwitcher().getNode(),I.Loc.getMessage("INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER")).show()}}))}n.push(d)}));return n}function Z(){if(babelHelpers.classPrivateFieldGet(this,B)){return babelHelpers.classPrivateFieldGet(this,B)}babelHelpers.classPrivateFieldSet(this,B,new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_TOOLS_SHOW"),titleIconClasses:"ui-icon-set --service",isOpen:true,canCollapse:false}));return babelHelpers.classPrivateFieldGet(this,B)}function J(){if(babelHelpers.classPrivateFieldGet(this,V)){return babelHelpers.classPrivateFieldGet(this,V)}babelHelpers.classPrivateFieldSet(this,V,new h.SettingsSection({section:G(this,z,Z).call(this),parent:this}));return babelHelpers.classPrivateFieldGet(this,V)}function ee(){if(babelHelpers.classPrivateFieldGet(this,k)){return babelHelpers.classPrivateFieldGet(this,k)}babelHelpers.classPrivateFieldSet(this,k,new T.Row({}));return babelHelpers.classPrivateFieldGet(this,k)}function te(e,t,i){return BX.PopupWindowManager.create(e,t,{content:i,darkMode:true,autoHide:true,angle:true,offsetLeft:14,bindOptions:{position:"bottom"},closeByEsc:true})}function ie(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ae(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function ae(e,t){if(!e)return;if(typeof e==="string")return ne(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ne(e,t)}function ne(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function se(e,t){le(e,t);t.add(e)}function le(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function re(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var oe=new WeakSet;var ce=new WeakSet;var de=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));se(babelHelpers.assertThisInitialized(e),ce);se(babelHelpers.assertThisInitialized(e),oe);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX");return e}babelHelpers.createClass(t,[{key:"onSuccessDataFetched",value:function e(i){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onSuccessDataFetched",this).call(this,i);if(this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24")){this.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE");this.render().querySelector(".intranet-settings__page-header_desc").innerText=this.descriptionPage}}},{key:"getType",value:function e(){return"employee"}},{key:"appendSections",value:function e(t){var i=re(this,oe,_e).call(this);i.renderTo(t);var a=re(this,ce,ue).call(this);a.renderTo(t)}}]);return t}(h.BaseSettingsPage);function _e(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PROFILE"),titleIconClasses:"ui-icon-set --person"});var t=new h.SettingsSection({section:e,parent:this});if(this.hasValue("NAME_FORMATS")){var i=false;var a=this.getValue("NAME_FORMATS").current;var n=ie(this.getValue("NAME_FORMATS").values),s;try{for(n.s();!(s=n.n()).done;){var l=s.value;if(l.selected===true){i=true}}}catch(e){n.e(e)}finally{n.f()}this.getValue("NAME_FORMATS").values.push({value:"other",name:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_OPTION_OTHER"),selected:!i});var r=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT"),name:this.getValue("NAME_FORMATS").name+"_selector",items:this.getValue("NAME_FORMATS").values,hints:this.getValue("NAME_FORMATS").hints,current:this.getValue("NAME_FORMATS").current});var o=new h.SettingsField({fieldView:r});new h.SettingsRow({child:o,parent:t});var c=new v.TextInput({inputName:this.getValue("NAME_FORMATS").name,label:"",value:a});o=new h.SettingsField({fieldView:c});var d=new T.Row({isHidden:true});new h.SettingsRow({row:d,parent:t,child:o});if(!i){d.show()}r.getInputNode().addEventListener("change",(function(e){if(e.target.value==="other"){d.show()}else{c.getInputNode().value=r.getInputNode().value;d.hide()}}))}if(this.hasValue("PHONE_NUMBER_DEFAULT_COUNTRY")){var _=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COUNTRY_PHONE_NUMBER"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_NUMBER_FORMAT"),name:this.getValue("PHONE_NUMBER_DEFAULT_COUNTRY").name,items:this.getValue("PHONE_NUMBER_DEFAULT_COUNTRY").values,hints:this.getValue("PHONE_NUMBER_DEFAULT_COUNTRY").hints,current:this.getValue("PHONE_NUMBER_DEFAULT_COUNTRY").current});de.addToSectionHelper(_,t)}if(this.hasValue("LOCATION_ADDRESS_FORMAT_LIST")){var u=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ADDRESS_FORMAT"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_ADDRESS_FORMAT"),name:this.getValue("LOCATION_ADDRESS_FORMAT_LIST").name,items:this.getValue("LOCATION_ADDRESS_FORMAT_LIST").values,hints:this.getValue("LOCATION_ADDRESS_FORMAT_LIST").hints,current:this.getValue("LOCATION_ADDRESS_FORMAT_LIST").current});var g=new T.Row({separator:this.hasValue("show_year_for_female")?"bottom":null,className:"--block"});de.addToSectionHelper(u,t,g)}if(this.hasValue("show_year_for_female")){var p=new v.InlineChecker({inputName:"show_year_for_female",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_BIRTH_YEAR"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_BIRTH_YEAR"),hintOn:this.getValue("show_year_for_female").hintOn,hintOff:this.getValue("show_year_for_female").hintOff,checked:this.getValue("show_year_for_female").current==="Y"});de.addToSectionHelper(p,t)}return t}function ue(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_INVITE"),titleIconClasses:"ui-icon-set --person-plus",isOpen:false});var i=new h.SettingsSection({section:t,parent:this});if(this.hasValue("allow_register")){var a=new v.Checker({inputName:"allow_register",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_FAST_REG"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_FAST_REQ_ON"),checked:this.getValue("allow_register")==="Y",helpDesk:"redirect=detail&code=17726876"});var n=new T.Row({separator:"bottom"});S.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(P.CHANGE_QUICK_REG,a.isChecked())}));de.addToSectionHelper(a,i,n)}if(this.hasValue("allow_invite_users")){var s=new v.Checker({inputName:"allow_invite_users",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_USERS_TO_INVITE"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_USERS_TO_INVITE_ON"),checked:this.getValue("allow_invite_users")==="Y"});var l=new T.Row({separator:"bottom"});S.EventEmitter.subscribe(s.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(P.CHANGE_REG_ALL,s.isChecked())}));de.addToSectionHelper(s,i,l)}if(this.hasValue("show_fired_employees")){var r=new v.Checker({inputName:"show_fired_employees",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_QUIT_EMPLOYEE"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_QUIT_EMPLOYEE_ON"),checked:this.getValue("show_fired_employees")==="Y"});var o=new T.Row({separator:"bottom"});de.addToSectionHelper(r,i,o)}if(this.hasValue("general_chat_message_join")){var c=new v.Checker({inputName:"general_chat_message_join",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_MESSAGE_NEW_EMPLOYEE"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_MESSAGE_NEW_EMPLOYEE_ON"),checked:this.getValue("general_chat_message_join")==="Y"});var d=new T.Row({separator:"bottom"});de.addToSectionHelper(c,i,d)}if(this.hasValue("allow_new_user_lf")){var _=new v.Checker({inputName:"allow_new_user_lf",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_MESSAGE_NEW_EMPLOYEE_LF"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_MESSAGE_NEW_EMPLOYEE_LF_ON"),checked:this.getValue("allow_new_user_lf")==="Y"});var u=new T.Row({separator:"bottom"});de.addToSectionHelper(_,i,u)}if(this.hasValue("feature_extranet")){var g=new v.Checker({inputName:"feature_extranet",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_EXTRANET"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_EXTRANET_ON"),checked:this.getValue("feature_extranet")==="Y",helpDesk:"redirect=detail&code=17983050"});S.EventEmitter.subscribe(g.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(P.CHANGE_EXTRANET_INVITE,g.isChecked())}));de.addToSectionHelper(g,i)}return i}var Te;function ve(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ge(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function ge(e,t){if(!e)return;if(typeof e==="string")return pe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pe(e,t)}function pe(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ee(e,t,i){be(e,t);t.set(e,i)}function be(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var he=new WeakMap;var Ie=new WeakMap;var Se=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classCallCheck(this,e);Ee(this,he,{writable:true,value:void 0});Ee(this,Ie,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Ie,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,he)){return babelHelpers.classPrivateFieldGet(this,he)}babelHelpers.classPrivateFieldSet(this,he,I.Tag.render(Te||(Te=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__button_bar"></div>']))));var t=ve(babelHelpers.classPrivateFieldGet(this,Ie)),i;try{for(t.s();!(i=t.n()).done;){var a=i.value;I.Dom.append(a.getContainer(),babelHelpers.classPrivateFieldGet(this,he))}}catch(e){t.e(e)}finally{t.f()}return babelHelpers.classPrivateFieldGet(this,he)}},{key:"getButtons",value:function e(){return babelHelpers.classPrivateFieldGet(this,Ie)}},{key:"addButton",value:function e(t){babelHelpers.classPrivateFieldGet(this,Ie).push(t);I.Dom.append(t.getContainer(),this.render())}}]);return e}();function Ne(e,t,i){fe(e,t);t.set(e,i)}function fe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var we=new WeakMap;var me=function(){function e(){babelHelpers.classCallCheck(this,e);Ne(this,we,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,we,new n.Button({className:"landing-button-trigger",round:true,noCaps:true,size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LIGHT_BORDER}))}babelHelpers.createClass(e,[{key:"setState",value:function e(t){t.apply(babelHelpers.classPrivateFieldGet(this,we))}},{key:"getButton",value:function e(){return babelHelpers.classPrivateFieldGet(this,we)}}]);return e}();var Le=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"apply",value:function e(t){}}]);return e}();var Ae=new WeakMap;var He=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ne(babelHelpers.assertThisInitialized(i),Ae,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ae,e);return i}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT"));t.setDropdown(false);t.bindEvent("click",(function(){i.openNewTab(babelHelpers.classPrivateFieldGet(i,Ae).edit_url)}))}},{key:"openNewTab",value:function e(t){window.open(t,"_blank").focus()}}]);return t}(Le);var Pe=new WeakMap;var Re=new WeakMap;var Ce=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ne(babelHelpers.assertThisInitialized(a),Pe,{writable:true,value:void 0});Ne(babelHelpers.assertThisInitialized(a),Re,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Pe,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Re,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"));t.setDropdown(true);t.unbindEvent("click");t.setColor(BX.UI.Button.Color.PRIMARY);t.setMenu(babelHelpers.classPrivateFieldGet(this,Re).call(this,babelHelpers.classPrivateFieldGet(this,Pe)))}}]);return t}(Le);var Oe=new WeakMap;var ye=new WeakMap;var Me=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ne(babelHelpers.assertThisInitialized(a),Oe,{writable:true,value:void 0});Ne(babelHelpers.assertThisInitialized(a),ye,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Oe,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ye,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_CREATE"));t.setDropdown(false);t.bindEvent("click",(function(e){if(t.getState()===n.ButtonState.WAITING){return}t.setState(n.ButtonState.WAITING);babelHelpers.classPrivateFieldGet(i,Oe).call(i).then((function(e){var a=e.data;t.setState(null);t.unbindEvent("click");if(a.is_public){new Ce(a,babelHelpers.classPrivateFieldGet(i,ye)).apply(t)}else{var n=new He(a);n.apply(t);n.openNewTab(a.edit_url)}}),(function(e){t.setState(null);h.ErrorCollection.showSystemError(e.errors[0].message)}))}))}}]);return t}(Le);var Ge,Fe;function ke(e,t,i){De(e,t);t.set(e,i)}function De(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Be=new WeakMap;var Ve=new WeakMap;var Ue=new WeakMap;var We=function(){function e(t){babelHelpers.classCallCheck(this,e);ke(this,Be,{writable:true,value:void 0});ke(this,Ve,{writable:true,value:void 0});ke(this,Ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Be,t)}babelHelpers.createClass(e,[{key:"qrRender",value:function e(){var t=I.Tag.render(Ge||(Ge=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__qr_image-container"></div>'])));new QRCode(t,{text:babelHelpers.classPrivateFieldGet(this,Be).public_url,width:106,height:106});return t}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ue)){return babelHelpers.classPrivateFieldGet(this,Ue)}var i=function e(){window.open(babelHelpers.classPrivateFieldGet(t,Be).edit_url,"_blank").focus()};babelHelpers.classPrivateFieldSet(this,Ue,I.Tag.render(Fe||(Fe=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req-info-container">\n\t\t\t<div class="intranet-settings__req-info-inner">\n\t\t\t\t<div class="intranet-settings__qr_container">','</div>\n\t\t\t\t<div class="intranet-settings__qr_description-block">\n\t\t\t\t\t<div class="intranet-settings__qr_help-text">\n\t\t\t\t\t\t<h4 class="intranet-settings__qr_title">','</h4>\n\t\t\t\t\t\t<p class="intranet-settings__qr_text">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__qr_button">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="intranet-settings__qr_editor_box" onclick="','">\n\t\t\t\t<div class="intranet-settings__qr_editor_icon">\n\t\t\t\t\t<div class="ui-icon-set --paint-1"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="intranet-settings__qr_editor_name">','</div>\n\t\t\t\t<div class="ui-icon-set --expand intranet-settings__qr_editor_btn"></div>\n\t\t\t</div>\n\t\t</div>'])),this.qrRender(),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT",{"#SITE_URL#":babelHelpers.classPrivateFieldGet(this,Be).public_url}),this.getCopyButton().getContainer(),i,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT_LANDING")));return babelHelpers.classPrivateFieldGet(this,Ue)}},{key:"getCopyButton",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ve)){return babelHelpers.classPrivateFieldGet(this,Ve)}babelHelpers.classPrivateFieldSet(this,Ve,new n.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK"),round:true,noCaps:true,className:"landing-copy-button",size:BX.UI.Button.Size.EXTRA_SMALL,color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){if(BX.clipboard.copy(babelHelpers.classPrivateFieldGet(t,Be).public_url)){top.BX.UI.Notification.Center.notify({content:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED"),autoHide:true})}}}}));return babelHelpers.classPrivateFieldGet(this,Ve)}}]);return e}();function ze(e,t){Ye(e,t);t.add(e)}function xe(e,t,i){Ye(e,t);t.set(e,i)}function Ye(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Xe(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ke=new WeakMap;var je=new WeakMap;var qe=new WeakSet;var Qe=new WeakSet;var $e=function(){function e(t,i){babelHelpers.classCallCheck(this,e);ze(this,Qe);ze(this,qe);xe(this,Ke,{writable:true,value:void 0});xe(this,je,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Ke,t);this.landingData=i;babelHelpers.classPrivateFieldSet(this,je,Xe(this,qe,Ze))}babelHelpers.createClass(e,[{key:"setMenuRenderer",value:function e(t){babelHelpers.classPrivateFieldSet(this,je,t)}},{key:"create",value:function e(){var t=this;var i=new me;var a;if(babelHelpers.classPrivateFieldGet(this,Ke).is_connected&&!babelHelpers.classPrivateFieldGet(this,Ke).is_public){a=new He(babelHelpers.classPrivateFieldGet(this,Ke))}else if(babelHelpers.classPrivateFieldGet(this,Ke).is_connected&&babelHelpers.classPrivateFieldGet(this,Ke).is_public){a=new Ce(babelHelpers.classPrivateFieldGet(this,Ke),babelHelpers.classPrivateFieldGet(this,je).bind(this))}else{a=new Me((function(){return Xe(t,Qe,Je).call(t)}),babelHelpers.classPrivateFieldGet(this,je).bind(this))}i.setState(a);return i.getButton()}}]);return e}();function Ze(e){return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:new We(e).render(),className:"intranet-settings__qr_popup_item"}]}}function Je(){return I.ajax.runComponentAction("bitrix:intranet.settings","getLanding",{mode:"class",data:{companyId:this.landingData.company_id,requisiteId:this.landingData.requisite_id,bankRequisiteId:this.landingData.bank_requisite_id}})}var et,tt,it;function at(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=nt(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function nt(e,t){if(!e)return;if(typeof e==="string")return st(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return st(e,t)}function st(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function lt(e,t){ot(e,t);t.add(e)}function rt(e,t,i){ot(e,t);t.set(e,i)}function ot(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ct(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var dt=new WeakMap;var _t=new WeakMap;var ut=new WeakMap;var Tt=new WeakMap;var vt=new WeakSet;var gt=function(){function e(t){babelHelpers.classCallCheck(this,e);lt(this,vt);rt(this,dt,{writable:true,value:void 0});rt(this,_t,{writable:true,value:void 0});rt(this,ut,{writable:true,value:void 0});rt(this,Tt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,dt,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,_t)){return babelHelpers.classPrivateFieldGet(this,_t)}babelHelpers.classPrivateFieldSet(this,_t,I.Tag.render(et||(et=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req_background">\n\t\t\t<div class="intranet-settings__req-card_wrapper">\n\t\t\t\t<div class="intranet-settings__header">\n\t\t\t\t\t<div class="intranet-settings__title"> <span class="ui-section__title-icon ui-icon-set --city"></span> <span>','</span></div>\n\t\t\t\t\t<div class="intranet-settings__contact_bar"> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,dt).company.TITLE,ct(this,vt,pt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,dt).phone)?babelHelpers.classPrivateFieldGet(this,dt).phone:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE")),ct(this,vt,pt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,dt).email)?babelHelpers.classPrivateFieldGet(this,dt).email:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL")),ct(this,vt,pt).call(this,I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,dt).site)?babelHelpers.classPrivateFieldGet(this,dt).site:I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE")),this.requisiteFieldsRender(),this.getButtonsBar().render()));return babelHelpers.classPrivateFieldGet(this,_t)}},{key:"getCompanyUrl",value:function e(){if(babelHelpers.classPrivateFieldGet(this,dt).company.ID===0){return"/crm/company/details/0/?mycompany=y&TITLE="+babelHelpers.classPrivateFieldGet(this,dt).company.TITLE}else{return"/crm/company/details/"+babelHelpers.classPrivateFieldGet(this,dt).company.ID+"/"}}},{key:"requisiteFieldsRender",value:function e(){if(babelHelpers.classPrivateFieldGet(this,ut)){return babelHelpers.classPrivateFieldGet(this,ut)}var t=babelHelpers.classPrivateFieldGet(this,dt).fields;babelHelpers.classPrivateFieldSet(this,ut,I.Tag.render(tt||(tt=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__req-table_wrap"></div>']))));var i=at(t),a;try{for(i.s();!(a=i.n()).done;){var n=a.value;var s=I.Tag.render(it||(it=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__req-table_row">\n\t\t\t\t\t<div class="intranet-settings__table-cell">','</div>\n\t\t\t\t\t<div class="intranet-settings__table-cell">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),n.TITLE,I.Type.isStringFilled(n.VALUE)?ct(this,vt,pt).call(this,n.VALUE):ct(this,vt,pt).call(this,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")));I.Dom.append(s,babelHelpers.classPrivateFieldGet(this,ut))}}catch(e){i.e(e)}finally{i.f()}return babelHelpers.classPrivateFieldGet(this,ut)}},{key:"getButtonsBar",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Tt)){return babelHelpers.classPrivateFieldGet(this,Tt)}babelHelpers.classPrivateFieldSet(this,Tt,new Se);return babelHelpers.classPrivateFieldGet(this,Tt)}},{key:"setButtonBar",value:function e(t){babelHelpers.classPrivateFieldSet(this,Tt,t)}}]);return e}();function pt(e){return I.Dom.create("a",{text:e,attrs:{href:this.getCompanyUrl()}})}var Et,bt;function ht(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=It(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function It(e,t){if(!e)return;if(typeof e==="string")return St(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return St(e,t)}function St(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var Nt=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_REQUISITE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE");top.BX.addCustomEvent("onLocalStorageSet",(function(t){var i;var a=(i=t===null||t===void 0?void 0:t.key)!==null&&i!==void 0?i:null;if(a==="onCrmEntityUpdate"||a==="onCrmEntityCreate"){e.reload()}}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"requisite"}},{key:"appendSections",value:function e(t){var i=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_REQUISITE"),titleIconClasses:"ui-icon-set --suitcase",isOpen:true,canCollapse:false});var a=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213326\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var n=new T.Row({content:a.getContainer()});i.append(n.render());if(this.hasValue("COMPANY")){var s=this.getValue("COMPANY");var l=this.getValue("REQUISITES");var r=this.getValue("PHONES");var o=this.getValue("SITES");var c=this.getValue("EMAILS");var d=this.getValue("LANDINGS");var _=this.getValue("LANDINGS_DATA");if(!I.Type.isArray(s)||s.length<=0){var u=new T.Row({content:this.cardRender({company:{ID:0,TITLE:this.getValue("BITRIX_TITLE")},fields:this.getValue("EMPTY_REQUISITE"),phone:[],email:[],site:[]})});i.append(u.render())}var v=ht(s),g;try{for(v.s();!(g=v.n()).done;){var p=g.value;var E=!I.Type.isNil(l[p.ID])?l[p.ID]:this.getValue("EMPTY_REQUISITE");var b=new T.Row({content:this.cardRender({company:p,fields:E,phone:!I.Type.isNil(r[p.ID])?r[p.ID]:[],email:!I.Type.isNil(c[p.ID])?c[p.ID]:[],site:!I.Type.isNil(o[p.ID])?o[p.ID]:[],landing:!I.Type.isNil(d[p.ID])?d[p.ID]:[],landingData:!I.Type.isNil(_[p.ID])?_[p.ID]:[]})});i.append(b.render())}}catch(e){v.e(e)}finally{v.f()}}i.append(this.addCompanyLinkRender());i.renderTo(t)}},{key:"addCompanyLinkRender",value:function e(){var t=this;var i=I.Tag.render(Et||(Et=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="ui-section__link" \n\t\t\t\t\thref="/crm/company/details/0/?mycompany=y" target="_blank">\n\t\t\t\t',"\n\t\t\t\t</a>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY"));I.Event.bind(i,"click",(function(e){var i;(i=t.getAnalytic())===null||i===void 0?void 0:i.addEventConfigRequisite(P.OPEN_ADD_COMPANY)}));return I.Tag.render(bt||(bt=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__mt-16 ui-section__link_box">',"</div>"])),i)}},{key:"cardRender",value:function e(t){var i=this;var a=new gt(t);var n=new Se;if(t.company.ID>0){var s=new $e(t.landing,t.landingData);s.setMenuRenderer((function(e){var t=new We(e);I.Event.bind(t.getCopyButton().getContainer(),"click",(function(e){var t;(t=i.getAnalytic())===null||t===void 0?void 0:t.addEventConfigRequisite(P.COPY_LINK_CARD)}));return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:t.render(),className:"intranet-settings__qr_popup_item"}]}}));var l=s.create();if(I.Dom.hasClass(l.getContainer(),"landing-button-trigger")){I.Event.bind(l.getContainer(),"click",(function(e){if(t.landing.is_connected&&!t.landing.is_public){var a;(a=i.getAnalytic())===null||a===void 0?void 0:a.addEventConfigRequisite(P.EDIT_CARD)}else if(!t.landing.is_connected&&!t.landing.is_public){var n;(n=i.getAnalytic())===null||n===void 0?void 0:n.addEventConfigRequisite(P.CREATE_CARD)}}))}n.addButton(l)}a.setButtonBar(n);return a.render()}}]);return t}(h.BaseSettingsPage);var ft,wt,mt,Lt;function At(e,t){Ht(e,t);t.add(e)}function Ht(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Pt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Rt=new WeakSet;var Ct=new WeakSet;var Ot=new WeakSet;var yt=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));At(babelHelpers.assertThisInitialized(e),Ot);At(babelHelpers.assertThisInitialized(e),Ct);At(babelHelpers.assertThisInitialized(e),Rt);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"communication"}},{key:"appendSections",value:function e(t){var i=Pt(this,Rt,Mt).call(this);i.renderTo(t);var a=Pt(this,Ct,Gt).call(this);a.renderTo(t);var n=Pt(this,Ot,Ft).call(this);n.renderTo(t)}}]);return t}(h.BaseSettingsPage);function Mt(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_NEWS_FEED"),titleIconClasses:"ui-icon-set --feed-bold"});var t=new h.SettingsSection({section:e,parent:this});if(this.hasValue("allow_livefeed_toall")){var i=new v.Checker({inputName:"allow_livefeed_toall",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_POST_FEED"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_POST_FEED_ON"),checked:this.getValue("allow_livefeed_toall")==="Y",hideSeparator:true});yt.addToSectionHelper(i,t);var a=new v.UserSelector({inputName:"livefeed_toall_rights[]",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),values:Object.values(this.getValue("arToAllRights")),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});var n=new T.Row({content:a.render(),isHidden:!i.isChecked(),className:"ui-section__subrow",separator:"bottom"});yt.addToSectionHelper(a,t,n);S.EventEmitter.subscribe(i.switcher,"toggled",(function(){if(i.isChecked()){n.show()}else{n.hide()}}))}if(this.hasValue("default_livefeed_toall")){var s=new v.Checker({inputName:"default_livefeed_toall",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_PUBLISH_TO_ALL_DEFAULT"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_PUBLISH_TO_ALL_DEFAULT_ON"),checked:this.getValue("default_livefeed_toall")==="Y"});yt.addToSectionHelper(s,t)}if(this.hasValue("ratingTextLikeY")){var l,r;var o=new v.TextInputInline({inputName:(l=this.getValue("ratingTextLikeY"))===null||l===void 0?void 0:l.name,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE"),value:(r=this.getValue("ratingTextLikeY"))===null||r===void 0?void 0:r.value,valueColor:this.hasValue("ratingTextLikeY"),hintDesc:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE")});yt.addToSectionHelper(o,t)}return t}function Gt(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_CHATS"),titleIconClasses:"ui-icon-set --chats-1",isOpen:false});var t=new h.SettingsSection({section:e,parent:this});if(this.hasValue("general_chat_can_post")){var i;var a=new v.Checker({inputName:"allow_post_general_chat",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_POST_GEN_CHAT"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_POST_GEN_CHAT_ON"),checked:this.getValue("allow_post_general_chat")==="Y",helpDesk:"redirect=detail&code=18213254"});var n=new h.SettingsField({fieldView:a});var s=new h.SettingsRow({parent:t,child:n});var l=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_POST_GEN_CHAT_LIST"),name:this.getValue("general_chat_can_post").name,items:this.getValue("general_chat_can_post").values,current:this.getValue("general_chat_can_post").current});n=new h.SettingsField({fieldView:l});var r=new T.Row({isHidden:!a.isChecked(),className:"ui-section__subrow"});var o=new h.SettingsRow({row:r,parent:s,child:n});var c=new T.Row({content:l.render()});new h.SettingsRow({row:c,parent:o,child:n});var d=new v.UserSelector({inputName:"imchat_toall_rights[]",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),enableAll:false,values:Object.values((i=this.getValue("generalChatManagersList"))!==null&&i!==void 0?i:[]),encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":"U"+t.id}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});n=new h.SettingsField({fieldView:d});var _=new T.Row({content:d.render(),isHidden:this.getValue("general_chat_can_post").current!=="MANAGER"});new h.SettingsRow({row:_,parent:o,child:n});S.EventEmitter.subscribe(a.switcher,"toggled",(function(){if(a.isChecked()){r.show()}else{r.hide()}}));l.getInputNode().addEventListener("change",(function(e){if(e.target.value==="MANAGER"){_.show()}else{_.hide()}}))}if(this.hasValue("general_chat_message_leave")){var u=new v.Checker({inputName:"general_chat_message_leave",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_LEAVE_MESSAGE"),checked:this.getValue("general_chat_message_leave")==="Y"});yt.addToSectionHelper(u,t)}if(this.hasValue("general_chat_message_admin_rights")){var g=new v.Checker({inputName:"general_chat_message_admin_rights",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_ADMIN_MESSAGE"),checked:this.getValue("general_chat_message_admin_rights")==="Y"});yt.addToSectionHelper(g,t)}if(this.hasValue("url_preview_enable")){var p=new v.Checker({inputName:"url_preview_enable",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_URL_PREVIEW"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_URL_PREVIEW_ON"),checked:this.getValue("url_preview_enable")==="Y"});yt.addToSectionHelper(p,t)}if(this.hasValue("create_overdue_chats")){var E=new v.Checker({inputName:"create_overdue_chats",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CREATE_OVERDUE_CHATS"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_OVERDUE_CHATS_ON"),checked:this.getValue("create_overdue_chats")==="Y",helpDesk:"redirect=detail&code=18213270"});yt.addToSectionHelper(E,t)}return t}function Ft(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_DISK"),titleIconClasses:"ui-icon-set --disk",isOpen:false});var i=new h.SettingsSection({section:t,parent:this});if(this.hasValue("DISK_VIEWER_SERVICE")){var a=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_FILE_VIEWER"),name:this.getValue("DISK_VIEWER_SERVICE").name,items:this.getValue("DISK_VIEWER_SERVICE").values,current:this.getValue("DISK_VIEWER_SERVICE").current});yt.addToSectionHelper(a,i)}if(this.hasValue("DISK_LIMIT_PER_FILE")){var n=I.Tag.render(ft||(ft=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var s=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT"),hintTitle:this.getValue("DISK_LIMIT_PER_FILE").hintTitle,name:this.getValue("DISK_LIMIT_PER_FILE").name,items:this.getValue("DISK_LIMIT_PER_FILE").values,hints:this.getValue("DISK_LIMIT_PER_FILE").hints,current:this.getValue("DISK_LIMIT_PER_FILE").current,isEnable:this.getValue("DISK_LIMIT_PER_FILE").is_enable,bannerCode:"limit_max_entries_in_document_history",helpDesk:"redirect=detail&code=18869612",helpMessageProvider:this.helpMessageProviderFactory(n)});var l=new T.Row({separator:"bottom",className:"--block"});if(!this.getValue("DISK_LIMIT_PER_FILE").is_enable){I.Event.bind(s.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DISK_LIMIT_PER_FILE").name)}));I.Event.bind(n.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DISK_LIMIT_PER_FILE").name)}))}yt.addToSectionHelper(s,i,l)}if(this.hasValue("disk_allow_edit_object_in_uf")){var r=new v.Checker({inputName:"disk_allow_edit_object_in_uf",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_EDIT_DOC"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_EDIT_DOC_ON"),checked:this.getValue("disk_allow_edit_object_in_uf")==="Y"});yt.addToSectionHelper(r,i)}if(this.hasValue("disk_allow_autoconnect_shared_objects")){var o=new v.Checker({inputName:"disk_allow_autoconnect_shared_objects",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_AUTO_CONNECT_DISK"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_AUTO_CONNECT_DISK_ON"),checked:this.getValue("disk_allow_autoconnect_shared_objects")==="Y",helpDesk:"redirect=detail&code=18213280"});yt.addToSectionHelper(o,i)}if(this.hasValue("disk_allow_use_external_link")){var c=I.Tag.render(wt||(wt=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var d=new v.Checker({inputName:"disk_allow_use_external_link",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_PUBLIC_LINK_ON"),checked:this.getValue("disk_allow_use_external_link").value==="Y",isEnable:this.getValue("disk_allow_use_external_link").is_enable,bannerCode:"limit_admin_share_link",helpDesk:"redirect=detail&code=5390599",helpMessageProvider:this.helpMessageProviderFactory(c)});if(!this.getValue("disk_allow_use_external_link").is_enable){S.EventEmitter.subscribe(d.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_external_link")}));I.Event.bind(c.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("enable_pub_link")}))}yt.addToSectionHelper(d,i)}if(this.hasValue("disk_object_lock_enabled")){var _=I.Tag.render(mt||(mt=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var u=new v.Checker({inputName:"disk_object_lock_enabled",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_BLOCK_DOC_ON"),checked:this.getValue("disk_object_lock_enabled").value==="Y",isEnable:this.getValue("disk_object_lock_enabled").is_enable,bannerCode:"limit_document_lock",helpMessageProvider:this.helpMessageProviderFactory(_),helpDesk:"redirect=detail&code=2301293"});if(!this.getValue("disk_object_lock_enabled").is_enable){S.EventEmitter.subscribe(u.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_object_lock_enabled")}));I.Event.bind(_.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_object_lock_enabled")}))}yt.addToSectionHelper(u,i)}if(this.hasValue("disk_allow_use_extended_fulltext")){var g=I.Tag.render(Lt||(Lt=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var p=new v.Checker({inputName:"disk_allow_use_extended_fulltext",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_SEARCH_DOC_ON"),checked:this.getValue("disk_allow_use_extended_fulltext").value==="Y",isEnable:this.getValue("disk_allow_use_extended_fulltext").is_enable,bannerCode:"limit_in_text_search",helpDesk:"redirect=detail&code=18213348",helpMessageProvider:this.helpMessageProviderFactory(g)});if(!this.getValue("disk_allow_use_extended_fulltext").is_enable){S.EventEmitter.subscribe(p.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_extended_fulltext")}));I.Event.bind(g.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_allow_use_extended_fulltext")}))}yt.addToSectionHelper(p,i)}return i}var kt;function Dt(e,t){Vt(e,t);t.add(e)}function Bt(e,t,i){Vt(e,t);t.set(e,i)}function Vt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ut(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Wt=new WeakMap;var zt=new WeakMap;var xt=new WeakMap;var Yt=new WeakMap;var Xt=new WeakMap;var Kt=new WeakMap;var jt=new WeakSet;var qt=new WeakSet;var Qt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Dt(babelHelpers.assertThisInitialized(i),qt);Dt(babelHelpers.assertThisInitialized(i),jt);Bt(babelHelpers.assertThisInitialized(i),Wt,{writable:true,value:void 0});Bt(babelHelpers.assertThisInitialized(i),zt,{writable:true,value:void 0});Bt(babelHelpers.assertThisInitialized(i),xt,{writable:true,value:void 0});Bt(babelHelpers.assertThisInitialized(i),Yt,{writable:true,value:void 0});Bt(babelHelpers.assertThisInitialized(i),Xt,{writable:true,value:10});Bt(babelHelpers.assertThisInitialized(i),Kt,{writable:true,value:void 0});i.setParentElement(e.parent);i.setEventNamespace("BX.Intranet.Settings");var a=e.siteTitleOptions;i.options={title:a.title,canUserEditTitle:a.canUserEditTitle,logo24:a.logo24,canUserEditLogo24:a.canUserEditLogo24};Ut(babelHelpers.assertThisInitialized(i),jt,$t).call(babelHelpers.assertThisInitialized(i),a);Ut(babelHelpers.assertThisInitialized(i),qt,Zt).call(babelHelpers.assertThisInitialized(i),a);return i}babelHelpers.createClass(t,[{key:"getFieldView",value:function e(){return babelHelpers.classPrivateFieldGet(this,zt)}},{key:"cancel",value:function e(){}},{key:"startInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Yt)>0){return}babelHelpers.classPrivateFieldSet(this,Yt,setInterval(this.monitorInput.bind(this),500))}},{key:"stopInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Yt)>0){clearInterval(babelHelpers.classPrivateFieldGet(this,Yt));babelHelpers.classPrivateFieldSet(this,Yt,null)}}},{key:"monitorInput",value:function e(){var t;var i=babelHelpers.classPrivateFieldGet(this,zt).getInputNode().value;if(babelHelpers.classPrivateFieldGet(this,Kt)!==i){babelHelpers.classPrivateFieldSet(this,Xt,10);babelHelpers.classPrivateFieldSet(this,Kt,i);S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{title:i}}))}else if(babelHelpers.classPrivateFieldSet(this,Xt,(t=babelHelpers.classPrivateFieldGet(this,Xt),--t))<=0){this.stopInputMonitoring()}}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Wt)){return babelHelpers.classPrivateFieldGet(this,Wt)}I.Event.bind(babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),"focus",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),"keydown",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),"click",this.startInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),"blur",this.stopInputMonitoring.bind(this));I.Event.bind(babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),"blur",this.stopInputMonitoring.bind(this));babelHelpers.classPrivateFieldGet(this,xt).subscribe("change",(function(e){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,t.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo24:e.getData()===true?"24":""}}))}));return I.Tag.render(kt||(kt=babelHelpers.taggedTemplateLiteral(['\n\t\t<div id="','" class="ui-section__field-selector --no-border --no-margin --align-center">\n\t\t\t<div class="ui-section__field-container">\n\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="ui-section__hint">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,zt).getId(),babelHelpers.classPrivateFieldGet(this,zt).getName(),babelHelpers.classPrivateFieldGet(this,zt).getLabel(),babelHelpers.classPrivateFieldGet(this,zt).getInputNode(),babelHelpers.classPrivateFieldGet(this,xt).render())}}]);return t}(h.BaseSettingsElement);function $t(e){babelHelpers.classPrivateFieldSet(this,zt,new v.TextInput({value:e.title,placeholder:e.title,label:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL"),id:"siteTitle",inputName:"title",isEnable:true}));babelHelpers.classPrivateFieldGet(this,zt).setEventNamespace(this.getEventNamespace())}function Zt(e){babelHelpers.classPrivateFieldSet(this,xt,new v.Checker({id:"siteLogo24",inputName:"logo24",title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24"),size:"extra-small",isEnable:e.canUserEditLogo24,checked:e.logo24!=="",value:"Y",bannerCode:"limit_admin_logo24"}));babelHelpers.classPrivateFieldGet(this,xt).setEventNamespace(this.getEventNamespace())}var Jt,ei,ti;function ii(e,t,i){ai(e,t);t.set(e,i)}function ai(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ni=new WeakMap;var si=new WeakMap;var li=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);var a=e.siteDomainOptions;e.fieldView=new v.TextInput({value:a.subDomainName,placeholder:a.subDomainName,label:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME3"),id:"subDomainName",inputName:"subDomainName",isEnable:true});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ii(babelHelpers.assertThisInitialized(i),ni,{writable:true,value:void 0});ii(babelHelpers.assertThisInitialized(i),si,{writable:true,value:void 0});i.setParentElement(e.parent);i.getFieldView().setEventNamespace(i.getEventNamespace());i.getFieldView().getInputNode().setAttribute("autocomplete","off");var n=null;I.Event.bind(i.getFieldView().getInputNode(),"input",(function(){clearTimeout(n);n=setTimeout((function(){i.validateInput()}),1e3)}));i.options={hostname:a.hostname,subDomainName:a.subDomainName,mainDomainName:a.mainDomainName,isRenameable:a.isRenameable,occupiedDomains:a.occupiedDomains};i.options.mainDomainName=[".",i.options.mainDomainName].join("").replace("..",".");return i}babelHelpers.createClass(t,[{key:"validateInput",value:function e(){var t=this.getFieldView().getInputNode().value;t=t.trim();if(t.length<3||t.length>60){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR")])}else if(!/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,58})[a-zA-Z0-9])$/.test(t)){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR")])}else if(this.options.occupiedDomains.includes(t)){this.getFieldView().setErrors([I.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR")])}else{this.getFieldView().cleanError()}}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,ni)){return babelHelpers.classPrivateFieldGet(this,ni)}if(this.options.isRenameable!==true){var i=I.Tag.render(Jt||(Jt=babelHelpers.taggedTemplateLiteral(['<div class="settings-tools-description-link">',"</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_COPY"));BX.clipboard.bindCopyClick(i,{text:function e(){return t.options.hostname}});babelHelpers.classPrivateFieldSet(this,ni,I.Tag.render(ei||(ei=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div>\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<div class="ui-section__field-label">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t<div class="intranet-settings__domain_name">',"</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME4"),I.Text.encode(this.options.hostname),i))}else{babelHelpers.classPrivateFieldSet(this,ni,I.Tag.render(ti||(ti=babelHelpers.taggedTemplateLiteral(['<div id="','" class="ui-section__field-selector --no-border">\n\t\t\t\t<div class="ui-section__field-container">\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t\t<div class="intarnet-settings__domain_inline-field">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intarnet-settings__domain_name">',"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),this.getFieldView().getId(),this.getFieldView().getName(),this.getFieldView().getLabel(),this.getFieldView().getInputNode(),I.Text.encode(this.options.mainDomainName),this.getFieldView().renderErrors()))}return babelHelpers.classPrivateFieldGet(this,ni)}}]);return t}(h.SettingsField);function ri(e,t){var i=e.querySelector('[data-role="logo"]');var a=e.querySelector('[data-role="title"]');var n=e.querySelector('[data-role="logo24"]');if(!i.hasAttribute("data-prev-display")){i.dataset.prevDisplay=i.style.display;a.dataset.prevDisplay=a.style.display;n.dataset.prevDisplay=n.style.display}if(I.Type.isUndefined(t.title)!==true){a.innerHTML=I.Text.encode(I.Type.isStringFilled(t.title)?t.title:"Bitrix")}if(I.Type.isUndefined(t.logo24)!==true){if(I.Type.isStringFilled(t.logo24)){delete n.dataset.visibility;if(i.style.display==="none"){n.style.removeProperty("display")}}else{n.dataset.visibility="hidden";n.style.display="none"}}if(I.Type.isUndefined(t.logo)!==true){if(I.Type.isPlainObject(t.logo)){i.style.backgroundImage='url("'+encodeURI(t.logo.src)+'")';i.style.removeProperty("display");a.style.display="none";n.style.display="none"}else{i.style.display="none";a.style.removeProperty("display");if(n.dataset.visibility!=="hidden"){n.style.removeProperty("display")}else{n.style.display="none"}}}}function oi(e,t){var i=I.Type.isPlainObject(t)?t:{};var a=String(i.id).indexOf("dark:")===0?"dark":"light";I.Dom.removeClass(e,"--light --dark");I.Dom.addClass(e,"--"+a);if(I.Type.isStringFilled(i.previewImage)){e.style.backgroundImage='url("'+i.previewImage+'")';e.style.backgroundSize="cover"}else{e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.background="none"}if(I.Type.isStringFilled(i.previewColor)){e.style.backgroundColor=i.previewColor}}var ci,di,_i;function ui(e,t){vi(e,t);t.add(e)}function Ti(e,t,i){vi(e,t);t.set(e,i)}function vi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function gi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var pi=new WeakMap;var Ei=new WeakSet;var bi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"themeId",isEnable:e.allowSetDefaultTheme,bannerCode:"limit_office_background_to_all"}));ui(babelHelpers.assertThisInitialized(i),Ei);Ti(babelHelpers.assertThisInitialized(i),pi,{writable:true,value:void 0});gi(babelHelpers.assertThisInitialized(i),Ei,hi).call(babelHelpers.assertThisInitialized(i),e);i.applyTheme();return i}babelHelpers.createClass(t,[{key:"applyTheme",value:function e(t){var i=t?babelHelpers.classPrivateFieldGet(this,pi).getItemNode(t):null;var a=i?babelHelpers.classPrivateFieldGet(this,pi).getTheme(i.dataset.themeId):babelHelpers.classPrivateFieldGet(this,pi).getAppliedTheme();this.applyPortalThemePreview(a);if(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:ThemePicker:Change",a);this.showSaveButton()}}},{key:"applyPortalThemePreview",value:function e(t){var i=this.render().querySelector('[data-role="preview"]');oi(i,t);this.getInputNode().value=I.Type.isPlainObject(t)?t["id"]:""}},{key:"showSaveButton",value:function e(){this.getInputNode().disabled=false;this.getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getValue",value:function e(){return this.getInputNode().value}},{key:"getInputNode",value:function e(){return this.render().querySelector('input[name="themeId"]')}},{key:"applyPortalSettings",value:function e(){}},{key:"renderContentField",value:function e(){var t=this;document.querySelector(".ui-side-panel-content").style.overflow="hidden";var i=I.Tag.render(ci||(ci=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-theme-settings">\n\t\t\t<div class="ui-section__row theme-dialog-preview">\n\t\t\t\t<section data-role="preview" style="background-color: #0a51ae;" class="intranet-settings__main-widget_section --preview">\n\t\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header --with-logo">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_left">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_right">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline --space-between">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --square"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside --right-side">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class="ui-section__row theme-dialog-content" data-role="theme-container"></div>\n\t\t\t<input type="hidden" name="themeId" value="" disabled>\n\t\t</div>\n\t\t'])));var a=I.Tag.render(di||(di=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__theme-btn_box">\n\t\t\t\t<div class="intranet-settings__theme-btn" onclick="','">',"</div>\n\t\t\t</div>\n\t\t"])),this.handleNewThemeButtonClick.bind(this),I.Loc.getMessage("INTRANET_SETTINGS_THEME_UPLOAD_BTN"));var n=i.querySelector('div[data-role="theme-container"]');Array.from(babelHelpers.classPrivateFieldGet(this,pi).getThemes()).forEach((function(e){var i=babelHelpers.classPrivateFieldGet(t,pi).createItem(e);if(babelHelpers.classPrivateFieldGet(t,pi).canSetDefaultTheme()!==true){I.Event.unbindAll(i,"click");if(e["default"]!==true){I.Dom.addClass(i,"--restricted");i.appendChild(I.Tag.render(_i||(_i=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__theme_lock_box">',"</div>"])),t.renderLockElement()));I.Event.bind(i,"click",t.showBanner.bind(t))}}if(e["default"]===true){i.setAttribute("data-role","ui-ears-active")}n.appendChild(i)}));new r.Ears({container:n,noScrollbar:false}).init();i.appendChild(a);return i}},{key:"handleNewThemeButtonClick",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,pi).canSetDefaultTheme()!==true){return this.showBanner()}babelHelpers.classPrivateFieldGet(this,pi).getNewThemeDialog().show()}},{key:"handleLockButtonClick",value:function e(){if(BX.getClass("BX.UI.InfoHelper")){BX.UI.InfoHelper.show("limit_office_background_to_all")}}}]);return t}(v.BaseField);function hi(e){var t=this;babelHelpers.classPrivateFieldSet(this,pi,new BX.Intranet.Bitrix24.ThemePicker(e));babelHelpers.classPrivateFieldGet(this,pi).setThemes(e.themes);babelHelpers.classPrivateFieldGet(this,pi).setBaseThemes(e.baseThemes);babelHelpers.classPrivateFieldGet(this,pi).applyThemeAssets=function(){};babelHelpers.classPrivateFieldGet(this,pi).getContentContainer=function(){return t.render().querySelector('div[data-role="theme-container"]')};var i=babelHelpers.classPrivateFieldGet(this,pi).handleRemoveBtnClick.bind(babelHelpers.classPrivateFieldGet(this,pi));babelHelpers.classPrivateFieldGet(this,pi).handleRemoveBtnClick=function(e){var a=babelHelpers.classPrivateFieldGet(t,pi).getItemNode(e);if(!a){return}i(e);t.applyPortalThemePreview(babelHelpers.classPrivateFieldGet(t,pi).getTheme(babelHelpers.classPrivateFieldGet(t,pi).getThemeId()));t.showSaveButton()};var a=babelHelpers.classPrivateFieldGet(this,pi).handleItemClick.bind(babelHelpers.classPrivateFieldGet(this,pi));babelHelpers.classPrivateFieldGet(this,pi).handleItemClick=function(e){a(e);t.applyTheme(e)};var n=babelHelpers.classPrivateFieldGet(this,pi).addItem.bind(babelHelpers.classPrivateFieldGet(this,pi));babelHelpers.classPrivateFieldGet(this,pi).addItem=function(e){n(e);t.applyPortalThemePreview(e);t.showSaveButton()}}var Ii=new WeakMap;var Si=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new bi(e.themePickerSettings);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Ti(babelHelpers.assertThisInitialized(i),Ii,{writable:true,value:void 0});if(e.portalSettings){i.setEventNamespace("BX.Intranet.Settings");ri(i.getFieldView().render(),e.portalSettings);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,i.getEventNamespace()+":Portal:Change",(function(e){ri(i.getFieldView().render(),e.getData())}))}return i}return t}(h.SettingsField);var Ni,fi;function wi(e,t){Li(e,t);t.add(e)}function mi(e,t,i){Li(e,t);t.set(e,i)}function Li(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ai(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Hi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"logo",isEnable:e.isEnable,defaultValue:"default",bannerCode:"limit_admin_logo",helpDeskCode:123,helpMessageProvider:function e(){}}));i.getInputNode().type="hidden";i.getInputNode().disabled=true;return i}babelHelpers.createClass(t,[{key:"renderContentField",value:function e(){return this.getInputNode()}}]);return t}(v.TextInput);var Pi=new WeakMap;var Ri=new WeakMap;var Ci=new WeakMap;var Oi=new WeakMap;var yi=new WeakMap;var Mi=new WeakSet;var Gi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new Hi({isEnable:e.canUserEditLogo});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));wi(babelHelpers.assertThisInitialized(i),Mi);mi(babelHelpers.assertThisInitialized(i),Pi,{writable:true,value:void 0});mi(babelHelpers.assertThisInitialized(i),Ri,{writable:true,value:void 0});mi(babelHelpers.assertThisInitialized(i),Ci,{writable:true,value:void 0});mi(babelHelpers.assertThisInitialized(i),Oi,{writable:true,value:void 0});mi(babelHelpers.assertThisInitialized(i),yi,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ci,e.siteLogoOptions);i.setEventNamespace("BX.Intranet.Settings");return i}babelHelpers.createClass(t,[{key:"initUploader",value:function e(t){var i=this;var a=t.TileWidget,n=t.StackWidget,s=t.StackWidgetSize;var l={maxFileCount:1,acceptOnlyImages:true,multiple:false,acceptedFileTypes:["image/png"],events:{onError:function e(t){console.error("File Uploader onError",t.getData().error)},"File:onError":this.onFileError.bind(this),"File:onAdd":this.onLogoAdd.bind(this),"File:onRemove":this.onLogoRemove.bind(this),onBeforeFilesAdd:this.getFieldView().isEnable()?function(){}:function(e){i.getFieldView().showBanner();e.preventDefault()}},allowReplaceSingle:true,hiddenFieldName:"logo_file",hiddenFieldsContainer:Ai(this,Mi,Fi).call(this),assignAsFile:true,imageResizeWidth:444,imageResizeHeight:110,imageResizeMode:"contain",imageResizeMimeType:"image/png",imagePreviewWidth:444,imagePreviewHeight:110,imagePreviewResizeMode:"contain",files:babelHelpers.classPrivateFieldGet(this,Ci)?[[1,{serverFileId:babelHelpers.classPrivateFieldGet(this,Ci).id,serverId:babelHelpers.classPrivateFieldGet(this,Ci).id,type:"image/png",width:babelHelpers.classPrivateFieldGet(this,Ci).width,height:babelHelpers.classPrivateFieldGet(this,Ci).height,treatImageAsFile:true,downloadUrl:babelHelpers.classPrivateFieldGet(this,Ci).src,serverPreviewUrl:babelHelpers.classPrivateFieldGet(this,Ci).src,serverPreviewWidth:babelHelpers.classPrivateFieldGet(this,Ci).width,serverPreviewHeight:babelHelpers.classPrivateFieldGet(this,Ci).height,src:babelHelpers.classPrivateFieldGet(this,Ci).src,preload:true}]]:null};babelHelpers.classPrivateFieldSet(this,Ri,new n(l,{size:s.LARGE}));return this}},{key:"onFileError",value:function e(t){console.error("File Error",t.getData().error);S.EventEmitter.subscribeOnce(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":onAfterShowPage",this.removeFailedLogo.bind(this));var i=this.getParentElement();if(i){S.EventEmitter.subscribeOnce(i.getFieldView(),"onActive",this.removeFailedLogo.bind(this))}}},{key:"removeFailedLogo",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,Ri).getUploader().getFiles()[0];if(t&&t.isLoadFailed()){babelHelpers.classPrivateFieldGet(this,Ri).getUploader().removeFiles()}}},{key:"onLogoAdd",value:function e(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:{src:t.getData().file.getClientPreviewUrl()}}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="add";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"onLogoRemove",value:function e(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:null}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="remove";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getName",value:function e(){return"logo"}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Pi)){return babelHelpers.classPrivateFieldGet(this,Pi)}var t=I.Tag.render(Ni||(Ni=babelHelpers.taggedTemplateLiteral(["<div>Logo is there</div>"])));babelHelpers.classPrivateFieldSet(this,Pi,I.Tag.render(fi||(fi=babelHelpers.taggedTemplateLiteral(['<div>\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t",'\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1"),t,I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2"),this.getFieldView().getInputNode(),Ai(this,Mi,Fi).call(this),this.getFieldView().renderErrors()));babelHelpers.classPrivateFieldGet(this,Ri).renderTo(t);return babelHelpers.classPrivateFieldGet(this,Pi)}}]);return t}(h.SettingsField);function Fi(){if(!babelHelpers.classPrivateFieldGet(this,Oi)){babelHelpers.classPrivateFieldSet(this,Oi,document.createElement("div"))}return babelHelpers.classPrivateFieldGet(this,Oi)}var ki;function Di(e,t,i){Bi(e,t);t.set(e,i)}function Bi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Vi=new WeakMap;var Ui=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Di(babelHelpers.assertThisInitialized(a),Vi,{writable:true,value:void 0});a.setEventNamespace("BX.Intranet.Settings");ri(a.render(),e);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":Portal:Change",a.onChange.bind(babelHelpers.assertThisInitialized(a)));if(i){oi(a.render(),i===null||i===void 0?void 0:i.theme);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":ThemePicker:Change",a.onSetTheme.bind(babelHelpers.assertThisInitialized(a)))}return a}babelHelpers.createClass(t,[{key:"onChange",value:function e(t){ri(this.render(),t.getData())}},{key:"onSetTheme",value:function e(t){oi(this.render(),t.getData())}},{key:"render",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Vi)){babelHelpers.classPrivateFieldSet(this,Vi,I.Tag.render(ki||(ki=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<section class="intranet-settings__main-widget_section">\n\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_bg"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_pos-box">\n\t\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header"> \n\t\t\t\t\t\t\x3c!-- statement class. depends of content --with-logo --\x3e\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>']))))}return babelHelpers.classPrivateFieldGet(this,Vi)}}]);return t}(S.EventEmitter);var Wi,zi,xi,Yi;function Xi(e,t){Ki(e,t);t.add(e)}function Ki(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ji=new WeakSet;var qi=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Xi(babelHelpers.assertThisInitialized(e),ji);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_PORTAL");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":Portal:Change",(function(t){if(!I.Type.isNil(t.data.title)){var i;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventConfigPortal(P.CHANGE_PORTAL_NAME)}else if(!I.Type.isNil(t.data.logo)){var a;(a=e.getAnalytic())===null||a===void 0?void 0:a.addEventConfigPortal(P.CHANGE_PORTAL_LOGO)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":ThemePicker:Change",(function(t){var i;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventConfigPortal(P.CHANGE_PORTAL_THEME)}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"portal"}},{key:"headerWidgetRender",value:function e(){return""}},{key:"getSections",value:function e(){return[this.buildSiteTitleSection(this.getValue("portalSettings"),this.getValue("portalThemeSettings")),this.getValue("portalDomainSettings")?this.buildDomainSection(this.getValue("portalDomainSettings")):null,this.buildThemeSection(this.getValue("portalThemeSettings"),this.getValue("portalSettings"))].filter((function(e){return e instanceof h.SettingsSection}))}},{key:"buildSiteTitleSection",value:function e(t,i){var a=this;var n=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE"),titleIconClasses:"ui-icon-set --pencil-draw",isOpen:true,bannerCode:"ip_access_rights_lock"});var s=new h.SettingsSection({parent:this,section:n});n.append(new T.Row({content:new c.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());var l=new Ui(t,i);var r=new h.TabsField({parent:s});var o=new T.Row({});var d=new h.TabField({parent:r,tabsOptions:{head:{title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE")},body:function e(){var i=new Qt({parent:d,siteTitleOptions:t,helpMessages:{site:a.helpMessageProviderFactory()}});return i.render()}}});var _=new h.TabField({parent:r,tabsOptions:{restricted:this.getValue("portalSettings").canUserEditLogo===false,bannerCode:"limit_admin_logo",head:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO"),body:new Promise((function(e,t){I.Runtime.loadExtension("ui.uploader.stack-widget").then((function(t){var i=new Gi({parent:d,siteLogoOptions:a.getValue("portalSettings").logo,canUserEditLogo:a.getValue("portalSettings").canUserEditLogo});i.initUploader(t);e(i.render())}))}))}});r.activateTab(d);n.append(o.render());o.append(I.Tag.render(Wi||(Wi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__grid_box">\n\t\t\t\t<input type="hidden" name="justToBeThere" value="ofCourse" />\n\t\t\t\t<div data-role="title-container" class="intranet-settings__grid_item"></div>\n\t\t\t\t<div class="intranet-settings__grid_item">',"</div>\n\t\t\t</div>"])),l.render()));setTimeout((function(){o.render().querySelector('div[data-role="title-container"]').appendChild(r.render())}),0);new h.SettingsRow({row:new T.Row({separator:"top",className:"--block"}),parent:s,child:new h.SettingsField({fieldView:new v.TextInput({inputName:"name",label:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_NAME"),value:this.getValue("portalSettings").name,placeholder:window.document.location.hostname,inputDefaultWidth:true})})});return s}},{key:"buildDomainSection",value:function e(t){var i=this;var a=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN"),titleIconClasses:"ui-icon-set --globe",isOpen:false});var n=new h.SettingsSection({parent:this,section:a});a.append(new T.Row({content:new c.Alert({text:"\n\t\t\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213298\')">\n\t\t\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}).render());var s=new h.TabsField({parent:n});var l=new h.TabField({parent:s,tabsOptions:{head:{title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME1")},body:function e(){var a=new li({parent:l,siteDomainOptions:t,helpMessages:{site:i.helpMessageProviderFactory()}});I.Event.bind(a.getFieldView().getInputNode(),"keydown",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventConfigPortal(P.CHANGE_PORTAL_SITE)}));return a.render()}}});new h.TabField({parent:s,tabsOptions:{restricted:t.isCustomizable===false,bannerCode:"limit_office_own_domain",head:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME2"),body:function e(){var i=I.Tag.render(zi||(zi=babelHelpers.taggedTemplateLiteral(['<div class="ui-icon-set --copy-plates intranet-settings__domain__list_btn"></div>'])));BX.clipboard.bindCopyClick(i,{text:function e(){return I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS").replaceAll("<br>","\n")}});var a=I.Tag.render(xi||(xi=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__domain__list_box">\n\t\t\t\t\t\t<ul class="intranet-settings__domain__list">\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target="_blank" href="/settings/support.php" class="settings-tools-description-link">',"</a>\n\t\t\t\t\t</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP1"),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP_DNS"),i,I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP2"),I.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP3"),I.Loc.getMessage("INTRANET_SETTINGS_WRITE_TO_SUPPORT"));if(t.isCustomizable!==true){I.Event.bind(a.querySelector("a.settings-tools-description-link"),"click",(function(e){BX.UI.InfoHelper.show("limit_office_own_domain");e.preventDefault();return false}))}return a}}});var r=new T.Row({});a.append(r.render());r.append(I.Tag.render(Yi||(Yi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__grid_box --single-item">\n\t\t\t\t<div class="intranet-settings__grid_item">',"</div>\n\t\t\t</div>"])),s.render()));s.activateTab(l);return n}},{key:"buildThemeSection",value:function e(t,i){var a=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME"),titleIconClasses:"ui-icon-set --picture",isOpen:false,isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),bannerCode:"ip_access_rights_lock"});var n=new h.SettingsSection({section:a,parent:this});new h.SettingsRow({row:new T.Row({content:new c.Alert({text:"\n\t\t\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18325288\')">\n\t\t\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:c.AlertSize.SMALL,color:c.AlertColor.PRIMARY}).getContainer()}),parent:n});new Si({parent:n,portalSettings:i,themePickerSettings:t});return n}}]);return t}(h.BaseSettingsPage);var Qi;function $i(e,t){Ji(e,t);t.add(e)}function Zi(e,t,i){Ji(e,t);t.set(e,i)}function Ji(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ea(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ta=new WeakMap;var ia=new WeakSet;var aa=new WeakSet;var na=new WeakSet;var sa=new WeakSet;var la=new WeakSet;var ra=new WeakSet;var oa=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));$i(babelHelpers.assertThisInitialized(e),ra);$i(babelHelpers.assertThisInitialized(e),la);$i(babelHelpers.assertThisInitialized(e),sa);$i(babelHelpers.assertThisInitialized(e),na);$i(babelHelpers.assertThisInitialized(e),aa);$i(babelHelpers.assertThisInitialized(e),ia);Zi(babelHelpers.assertThisInitialized(e),ta,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"configuration"}},{key:"headerWidgetRender",value:function e(){var t,i;var a="";if(this.getValue("isFormat24Hour")==="Y"){a=this.getValue("format24HourTime")}else{a=this.getValue("format12HourTime")}babelHelpers.classPrivateFieldSet(this,ta,I.Tag.render(Qi||(Qi=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__date-widget_box">\n\t\t\t<span class="ui-icon-set --earth-language"></span>\n\t\t\t<div class="intranet-settings__date-widget_content">\n\t\t\t\t<div class="intranet-settings__date-widget_inner">\n\t\t\t\t\t<span data-role="time" class="intranet-settings__date-widget_title">','</span>\n\t\t\t\t\t<span class="intranet-settings__date-widget_subtitle">','</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role="date" class="intranet-settings__date-widget_subtitle">',"</div>\n\t\t\t</div>\n\t\t</div>"])),a,(t=this.getValue("culture"))===null||t===void 0?void 0:t.offsetUTC,(i=this.getValue("culture"))===null||i===void 0?void 0:i.currentDate));return babelHelpers.classPrivateFieldGet(this,ta)}},{key:"appendSections",value:function e(t){var i=ea(this,ia,ca).call(this);i.renderTo(t);var a=ea(this,aa,da).call(this);a.renderTo(t);if(this.hasValue("mapsProviderCRM")&&this.getValue("mapsProviderCRM")){var n=ea(this,na,_a).call(this);n.renderTo(t)}var s=ea(this,sa,ua).call(this);s.renderTo(t);var l=ea(this,la,Ta).call(this);l.renderTo(t)}}]);return t}(h.BaseSettingsPage);function ca(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_DATETIME"),titleIconClasses:"ui-icon-set --clock-2"});var i=new h.SettingsSection({section:t,parent:this});if(this.hasValue("culture")){var a=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATETIME_REGION_FORMAT"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_DATE_FORMAT"),name:this.getValue("culture").name,items:this.getValue("culture").values,hints:this.getValue("culture").hints,current:this.getValue("culture").current});oa.addToSectionHelper(a,i,new T.Row({className:"--intranet-settings__mb-20"}));I.Event.bind(a.getInputNode(),"change",(function(t){var i=e.getValue("culture").longDates[t.target.value];babelHelpers.classPrivateFieldGet(e,ta).querySelector('[data-role="date"]').innerHTML=i}))}if(this.hasValue("isFormat24Hour")){var n=new v.InlineChecker({inputName:"isFormat24Hour",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TIME_FORMAT24"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_TIME_FORMAT24"),hintOn:this.getValue("format24HourTime"),hintOff:this.getValue("format12HourTime"),checked:this.getValue("isFormat24Hour")==="Y"});oa.addToSectionHelper(n,i);S.EventEmitter.subscribe(n,"change",(function(t){babelHelpers.classPrivateFieldGet(e,ta).querySelector('[data-role="time"]').innerHTML=n.isChecked()?e.getValue("format24HourTime"):e.getValue("format12HourTime")}))}return i}function da(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAILS"),titleIconClasses:"ui-icon-set --mail",isOpen:false});var t=new h.SettingsSection({section:e,parent:this});if(this.hasValue("trackOutMailsRead")){var i=new v.Checker({inputName:"trackOutMailsRead",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TRACK_OUT_MAILS"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TRACK_OUT_MAILS_ON"),checked:this.getValue("trackOutMailsRead")==="Y"});var a=new T.Row({});oa.addToSectionHelper(i,t,a)}if(this.hasValue("trackOutMailsClick")){var n=new v.Checker({inputName:"trackOutMailsClick",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TRACK_OUT_MAILS_CLICKS"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TRACK_OUT_MAILS_CLICK_ON"),checked:this.getValue("trackOutMailsClick")==="Y",helpDesk:"redirect=detail&code=18213310"});var s=new T.Row({});oa.addToSectionHelper(n,t,s)}if(this.hasValue("defaultEmailFrom")){var l=new v.TextInput({inputName:"defaultEmailFrom",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DEFAULT_EMAIL"),value:this.getValue("defaultEmailFrom"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DEFAULT_EMAIL")});var r=new T.Row({});oa.addToSectionHelper(l,t,r)}return t}function _a(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAPS"),titleIconClasses:"ui-icon-set --crm-map",isOpen:false});var t=new h.SettingsSection({section:e,parent:this});var i=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("mapsProviderCRM").name,items:this.getValue("mapsProviderCRM").values,current:this.getValue("mapsProviderCRM").current});var a=new T.Row({className:"--block"});oa.addToSectionHelper(i,t,a);var n=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var s=new T.Row({separator:"top",content:n.getContainer(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new h.SettingsRow({row:s,parent:t});var l=new v.TextInputInline({inputName:"API_KEY_FRONTEND",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT"),value:this.getValue("API_KEY_FRONTEND").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var r=new T.Row({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});oa.addToSectionHelper(l,t,r);var o=new v.TextInputInline({inputName:"API_KEY_BACKEND",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER"),hintTitle:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT"),value:this.getValue("API_KEY_BACKEND").value,placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var c=new T.Row({content:o.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM",separator:"bottom",className:"--block"});oa.addToSectionHelper(o,t,c);var d=new v.Checker({inputName:"SHOW_PHOTOS_ON_MAP",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("SHOW_PHOTOS_ON_MAP").value==="1"});var _=new T.Row({content:d.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});oa.addToSectionHelper(d,t,_);var u=new v.Checker({inputName:"USE_GEOCODING_SERVICE",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("USE_GEOCODING_SERVICE").value==="1"});var g=new T.Row({content:u.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});oa.addToSectionHelper(u,t,g);i.getInputNode().addEventListener("change",(function(e){if(e.target.value==="OSM"){s.hide();r.hide();c.hide();g.hide();_.hide()}else{s.show();r.show();c.show();g.show();_.show()}}));return t}function ua(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_CONFIGURATION_MAPS_PRODUCT"),titleIconClasses:"ui-icon-set --location-2",isOpen:false});var t=new h.SettingsSection({section:e,parent:this});if(this.hasValue("cardsProviderProductProperties")){var i=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("cardsProviderProductProperties").name,items:this.getValue("cardsProviderProductProperties").values,current:this.getValue("cardsProviderProductProperties").current});var a=new T.Row({separator:"bottom"});oa.addToSectionHelper(i,t,a);var n=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION",{"#YANDEX_API_URL#":this.getValue("yandexApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var s=new T.Row({content:n.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});new h.SettingsRow({row:s,parent:t});var l=new v.TextInput({inputName:"yandexKeyProductProperties",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY"),value:this.getValue("yandexKeyProductProperties"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var r=new T.Row({content:l.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});oa.addToSectionHelper(l,t,r);var o=new BX.UI.Alert({text:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var c=new T.Row({content:o.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});new h.SettingsRow({row:c,parent:t});var d=new v.TextInput({inputName:"googleKeyProductProperties",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY"),value:this.getValue("googleKeyProductProperties"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var _=new T.Row({content:d.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});oa.addToSectionHelper(d,t,_);i.getInputNode().addEventListener("change",(function(e){if(e.target.value==="yandex"){s.show();r.show();c.hide();_.hide()}else{s.hide();r.hide();c.show();_.show()}}))}return t}function Ta(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_ADDITIONAL_SETTINGS"),titleIconClasses:"ui-icon-set --apps",isOpen:false});var i=new h.SettingsSection({section:t,parent:this});if(this.hasValue("allowUserInstallApplication")){var a=new v.Checker({inputName:"allowUserInstallApplication",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_ALL_USER_INSTALL_APPLICATION"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_ALL_USER_INSTALL_APPLICATION_CLICK_ON"),checked:this.getValue("allowUserInstallApplication")==="Y"});var n=new T.Row({});S.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(P.CHANGE_MARKET,a.isChecked())}));oa.addToSectionHelper(a,i,n)}if(this.hasValue("allCanBuyTariff")){var s=new v.Checker({inputName:"allCanBuyTariff",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALL_CAN_BUY_TARIFF_CLICK_ON"),checked:this.getValue("allCanBuyTariff").value==="Y",isEnable:this.getValue("allCanBuyTariff").isEnable,bannerCode:"limit_why_pay_tariff_everyone"});var l=new T.Row({});S.EventEmitter.subscribe(s.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(P.CHANGE_PAY_TARIFF,s.isChecked())}));oa.addToSectionHelper(s,i,l)}if(this.hasValue("allowMeasureStressLevel")){var r=new v.Checker({inputName:"allowMeasureStressLevel",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_MEASURE_STRESS_LEVEL"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_ALLOW_MEASURE_STRESS_LEVEL_CLICK_ON"),checked:this.getValue("allowMeasureStressLevel")==="Y",helpDesk:"redirect=detail&code=17697808"});var o=new T.Row({});oa.addToSectionHelper(r,i,o)}if(this.hasValue("collectGeoData")){var c=new v.Checker({inputName:"collectGeoData",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_COLLECT_GEO_DATA_CLICK_ON"),checked:this.getValue("collectGeoData")==="Y",helpDesk:"redirect=detail&code=18213320"});var d=new T.Row({});S.EventEmitter.subscribe(c.switcher,"toggled",(function(){ea(e,ra,va).call(e,c)}));oa.addToSectionHelper(c,i,d)}if(this.hasValue("showSettingsAllUsers")){var _=new v.Checker({inputName:"showSettingsAllUsers",title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_SETTINGS_ALL_USER"),hintOn:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_SETTINGS_ALL_USER_CLICK_ON"),checked:this.getValue("showSettingsAllUsers")==="Y"});var u=new T.Row({content:_.render(),isHidden:true});oa.addToSectionHelper(_,i,u)}return i}function va(e){if(e.isChecked()){BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:640,title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),message:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK"),onCancel:function t(){e.switcher.check(false);return true},onOk:function e(){return true}})}}var ga,pa,Ea,ba,ha;function Ia(e,t){Sa(e,t);t.add(e)}function Sa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Na(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var fa=new WeakSet;var wa=new WeakSet;var ma=new WeakSet;var La=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ia(babelHelpers.assertThisInitialized(e),ma);Ia(babelHelpers.assertThisInitialized(e),wa);Ia(babelHelpers.assertThisInitialized(e),fa);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"schedule"}},{key:"appendSections",value:function e(t){var i=Na(this,fa,Aa).call(this);i.renderTo(t);var a=Na(this,wa,Ha).call(this);a.renderTo(t)}}]);return t}(h.BaseSettingsPage);function Aa(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SCHEDULE"),titleIconClasses:"ui-icon-set --calendar-1"});var i=new h.SettingsSection({parent:this,section:t});var a=new h.SettingsRow({parent:i});var n=new h.TabsField({parent:a});var s=new h.TabField({parent:n,tabsOptions:{head:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_COMPANY"),body:function t(){return new Promise((function(t){var i=new T.Row({});var a=I.Tag.render(ga||(ga=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__work-time_container"><div>'])));if(e.hasValue("WORK_TIME_START")){var n=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WORK_TIME_START"),name:e.getValue("WORK_TIME_START").name,items:e.getValue("WORK_TIME_START").values,current:e.getValue("WORK_TIME_START").current});I.Dom.append(n.render(),a)}I.Dom.append(I.Tag.render(pa||(pa=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__field-inline-separator"></div>']))),a);if(e.hasValue("WORK_TIME_END")){var s=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WORK_TIME_END"),name:e.getValue("WORK_TIME_END").name,items:e.getValue("WORK_TIME_END").values,current:e.getValue("WORK_TIME_END").current});I.Dom.append(s.render(),a)}i.append(a);var l=I.Tag.render(Ea||(Ea=babelHelpers.taggedTemplateLiteral(["<div><div>"])));I.Dom.append(i.render(),l);if(e.hasValue("WEEK_DAYS")){var r=new v.ItemPicker({inputName:e.getValue("WEEK_DAYS").name,isMulti:true,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEKEND"),items:e.getValue("WEEK_DAYS").values,current:e.getValue("WEEK_DAYS").current});var o=new T.Row({content:r.render()});I.Dom.append(o.render(),l)}if(e.hasValue("WEEK_START")){var c=new v.ItemPicker({inputName:e.getValue("WEEK_START").name,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEK_START"),items:e.getValue("WEEK_START").values,current:e.getValue("WEEK_START").current});var d=new T.Row({content:c.render(),className:"--row-frame_gray"});e.fields[e.getValue("WEEK_START").name]=c;I.Dom.append(d.render(),l)}t(l)}))}}});if(this.getValue("TIMEMAN").enabled){new h.TabField({parent:n,tabsOptions:{restricted:this.getValue("TIMEMAN").restricted,bannerCode:"limit_office_shift_scheduling",head:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_DEPARTMENT"),body:Na(this,ma,Pa).call(this)}})}n.activateTab(s);return i}function Ha(){var e,t,i;var a=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_HOLIDAYS"),titleIconClasses:"ui-icon-set --flag-2",isOpen:false});var n=new h.SettingsSection({parent:this,section:a});var s=(e=(t=this.getValue("year_holidays"))===null||t===void 0?void 0:(i=t.match(/\d{1,2}.\d{1,2}/gm))===null||i===void 0?void 0:i.length)!==null&&e!==void 0?e:0;var l=I.Tag.render(ba||(ba=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__field-label --mb-13">',"</div>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":s}));var r=new T.Row({content:l});a.append(r.render());if(this.hasValue("year_holidays")){var o=new v.TextInput({inputName:"year_holidays",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_HOLIDAYS"),value:this.getValue("year_holidays")});La.addToSectionHelper(o,n);I.Event.bind(o.getInputNode(),"keyup",(function(){var e,t,i;var a=(e=o===null||o===void 0?void 0:(t=o.getInputNode().value)===null||t===void 0?void 0:(i=t.match(/\d{1,2}.\d{1,2}/gm))===null||i===void 0?void 0:i.length)!==null&&e!==void 0?e:0;l.innerHTML=I.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":a})}))}return n}function Pa(){return I.Tag.render(ha||(ha=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__tab-info_container">\n\t\t\t\t<div class="intranet-settings__tab-info_text">','</div>\n\t\t\t\t<a href="/timeman/schedules/" class="ui-section__link" target="_blank">',"</a>\n\t\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS"),I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG"))}var Ra;function Ca(e,t){Oa(e,t);t.add(e)}function Oa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ya(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ma=new WeakSet;var Ga=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ca(babelHelpers.assertThisInitialized(e),Ma);e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_GDPR");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"gdpr"}},{key:"appendSections",value:function e(t){var i=ya(this,Ma,Fa).call(this);i.renderTo(t)}},{key:"addApplicationsRender",value:function e(){if(this.hasValue("marketDirectory")){var t=this.getValue("marketDirectory");return I.Tag.render(Ra||(Ra=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="','detail/integrations24.gdprstaff/">\n\t\t\t\t\t\t','\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class="ui-section__link" style="margin-left: 12px;" href="','detail/integrations24.gdpr/">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),t,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE"),t,I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM"))}return null}}]);return t}(h.BaseSettingsPage);function Fa(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_GDPR"),titleIconClasses:"ui-icon-set --document",canCollapse:false});var t=new h.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=7608199\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),'\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class="ui-section__link" href="').concat(this.getValue("dpaLink"),'" target="_blank">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new T.Row({content:i.getContainer()});new h.SettingsRow({row:a,parent:t});if(this.hasValue("companyTitle")){var n=new v.TextInput({inputName:"companyTitle",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),value:this.getValue("companyTitle"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE")});var s=new h.SettingsField({fieldView:n});new h.SettingsRow({parent:t,child:s})}if(this.hasValue("contactName")){var l=new v.TextInput({inputName:"contactName",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME"),value:this.getValue("contactName"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME")});var r=new h.SettingsField({fieldView:l});new h.SettingsRow({parent:t,child:r})}if(this.hasValue("notificationEmail")){var o=new v.TextInput({inputName:"notificationEmail",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL"),value:this.getValue("notificationEmail"),placeholder:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL")});var c=new h.SettingsField({fieldView:o});new h.SettingsRow({parent:t,child:c})}if(this.hasValue("date")){var d=new v.TextInput({inputName:"date",label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATE"),value:this.getValue("date")});I.Dom.adjust(d.render(),{events:{click:function e(t){BX.calendar({node:t.target,field:"date",form:"",bTime:false,bHideTime:true})}}});var _=new h.SettingsField({fieldView:d});new h.SettingsRow({parent:t,child:_})}new h.SettingsRow({row:new T.Row({content:this.addApplicationsRender()}),parent:t});return t}var ka,Da,Ba,Va,Ua,Wa,za,xa,Ya;function Xa(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Ka(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Ka(e,t){if(!e)return;if(typeof e==="string")return ja(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ja(e,t)}function ja(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function qa(e,t){$a(e,t);t.add(e)}function Qa(e,t,i){$a(e,t);t.set(e,i)}function $a(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Za(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ja=new WeakMap;var en=new WeakMap;var tn=new WeakMap;var an=new WeakSet;var nn=new WeakSet;var sn=new WeakSet;var ln=new WeakSet;var rn=new WeakSet;var on=new WeakSet;var cn=new WeakSet;var dn=new WeakSet;var _n=new WeakSet;var un=new WeakSet;var Tn=new WeakSet;var vn=new WeakSet;var gn=new WeakSet;var pn=new WeakSet;var En=new WeakSet;var bn=new WeakSet;var hn=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));qa(babelHelpers.assertThisInitialized(e),bn);qa(babelHelpers.assertThisInitialized(e),En);qa(babelHelpers.assertThisInitialized(e),pn);qa(babelHelpers.assertThisInitialized(e),gn);qa(babelHelpers.assertThisInitialized(e),vn);qa(babelHelpers.assertThisInitialized(e),Tn);qa(babelHelpers.assertThisInitialized(e),un);qa(babelHelpers.assertThisInitialized(e),_n);qa(babelHelpers.assertThisInitialized(e),dn);qa(babelHelpers.assertThisInitialized(e),cn);qa(babelHelpers.assertThisInitialized(e),on);qa(babelHelpers.assertThisInitialized(e),rn);qa(babelHelpers.assertThisInitialized(e),ln);qa(babelHelpers.assertThisInitialized(e),sn);qa(babelHelpers.assertThisInitialized(e),nn);qa(babelHelpers.assertThisInitialized(e),an);Qa(babelHelpers.assertThisInitialized(e),Ja,{writable:true,value:void 0});Qa(babelHelpers.assertThisInitialized(e),en,{writable:true,value:void 0});Qa(babelHelpers.assertThisInitialized(e),tn,{writable:true,value:void 0});e.titlePage=I.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SECURITY");e.descriptionPage=I.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"security"}},{key:"appendSections",value:function e(t){var i=this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24");if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){Za(this,an,In).call(this).renderTo(t)}Za(this,pn,On).call(this).renderTo(t);Za(this,En,yn).call(this).renderTo(t);if(i){Za(this,cn,Ln).call(this).renderTo(t);Za(this,bn,Mn).call(this).renderTo(t)}}}]);return t}(h.BaseSettingsPage);function In(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_OTP"),titleIconClasses:"ui-icon-set --shield"});var i=new h.SettingsSection({section:t,parent:this});var a=new T.Row({content:Za(this,rn,wn).call(this).getContainer()});new h.SettingsRow({row:a,parent:i});if(this.hasValue("SECURITY_OTP")&&this.hasValue("SEND_OTP_PUSH")){var n=new T.Row({content:Za(this,nn,Sn).call(this).render()});new h.SettingsRow({row:n,parent:i});var s=new T.Row({content:Za(this,ln,fn).call(this).render(),isHidden:!Za(this,nn,Sn).call(this).isChecked()});new h.SettingsRow({row:s,parent:i});var l=I.Tag.render(ka||(ka=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="settings-switcher-wrapper">\n\t\t\t\t\t<div class="settings-security-message-switcher"/>\n\t\t\t\t</div>\n\t\t\t'])));new v.SingleChecker({switcher:new g.Switcher({node:l.querySelector(".settings-security-message-switcher"),inputName:"SEND_OTP_PUSH",checked:this.getValue("SEND_OTP_PUSH"),size:g.SwitcherSize.small})});var r=new T.Row({content:l,isHidden:!Za(this,nn,Sn).call(this).isChecked()});l.append(I.Tag.render(Da||(Da=babelHelpers.taggedTemplateLiteral(['<span class="settings-switcher-title">',"</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT")));new h.SettingsRow({row:r,parent:i});S.EventEmitter.subscribe(Za(this,nn,Sn).call(this).switcher,"toggled",(function(){if(e.getValue("SECURITY_IS_USER_OTP_ACTIVE")!==true&&Za(e,nn,Sn).call(e).isChecked()){Za(e,sn,Nn).call(e).show();Za(e,nn,Sn).call(e).cancel();Za(e,nn,Sn).call(e).switcher.check(false);return}if(e.hasValue("SECURITY_OTP_ENABLED")&&e.getValue("SECURITY_OTP_ENABLED")){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventToggle2fa(Za(e,nn,Sn).call(e).isChecked())}if(Za(e,nn,Sn).call(e).isChecked()){s.show();r.show()}else{s.hide();r.hide()}}))}return i}function Sn(){if(babelHelpers.classPrivateFieldGet(this,Ja)instanceof v.Checker){return babelHelpers.classPrivateFieldGet(this,Ja)}babelHelpers.classPrivateFieldSet(this,Ja,new v.Checker({inputName:"SECURITY_OTP",checked:this.getValue("SECURITY_OTP"),title:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SECURITY_OTP"),isEnable:true,hideSeparator:true,alignCenter:true,noMarginBottom:true}));babelHelpers.classPrivateFieldGet(this,Ja).renderLockElement=function(){return null};return babelHelpers.classPrivateFieldGet(this,Ja)}function Nn(){var e=this;if(babelHelpers.classPrivateFieldGet(this,tn)instanceof p.Popup){return babelHelpers.classPrivateFieldGet(this,tn)}var t=I.Tag.render(Ba||(Ba=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_info">\n\t\t\t\t',"\n\t\t\t</div>\t\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE"));var i=new BX.UI.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON"),color:BX.UI.Button.Color.PRIMARY,events:{click:function t(){Za(e,sn,Nn).call(e).close();BX.SidePanel.Instance.open(e.getValue("SECURITY_OTP_PATH"))}}});var a=I.Tag.render(Va||(Va=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_container">\n\t\t\t\t','\n\t\t\t\t<div class="ui-btn-container ui-btn-container-center">\n\t\t\t\t\t',"\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t"])),t,i.getContainer());babelHelpers.classPrivateFieldSet(this,tn,new p.Popup({bindElement:babelHelpers.classPrivateFieldGet(this,Ja).getInputNode(),content:a,autoHide:true,width:337,angle:{offset:200-15},offsetLeft:babelHelpers.classPrivateFieldGet(this,Ja).getInputNode().offsetWidth-200+15,closeByEsc:true,borderRadius:18}));return babelHelpers.classPrivateFieldGet(this,tn)}function fn(){if(babelHelpers.classPrivateFieldGet(this,en)instanceof v.Selector){return babelHelpers.classPrivateFieldGet(this,en)}babelHelpers.classPrivateFieldSet(this,en,new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD"),name:"SECURITY_OTP_DAYS",items:this.getValue("SECURITY_OTP_DAYS").ITEMS,current:this.getValue("SECURITY_OTP_DAYS").CURRENT}));return babelHelpers.classPrivateFieldGet(this,en)}function wn(){return new BX.UI.Alert({text:Za(this,on,mn).call(this),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function mn(){return"\n\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST"),'\n\t\t</br></br>\n\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17728602\')">\n\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t</span>")}function Ln(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_ACCESS_IP"),titleIconClasses:"ui-icon-set --attention-i-circle",isOpen:false,isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),bannerCode:"limit_admin_ip"});var i=new h.SettingsSection({section:t,parent:this});var a=new T.Row({content:Za(this,vn,Cn).call(this).getContainer()});new h.SettingsRow({row:a,parent:i});var n=0;if(this.hasValue("IP_ACCESS_RIGHTS")){var s=Xa(this.getValue("IP_ACCESS_RIGHTS")),l;try{for(s.s();!(l=s.n()).done;){var r=l.value;n++;new h.SettingsRow({parent:i,child:Za(this,un,Pn).call(this,r)});new h.SettingsRow({parent:i,child:Za(this,Tn,Rn).call(this,r)})}}catch(e){s.e(e)}finally{s.f()}}if(n===0){n++;new h.SettingsRow({parent:i,child:Za(this,dn,An).call(this,n)});new h.SettingsRow({parent:i,child:Za(this,_n,Hn).call(this,n)})}var o=function t(){if(e.getValue("IP_ACCESS_RIGHTS_ENABLED")){n++;var i=new T.Row({content:Za(e,dn,An).call(e,n).render()});I.Dom.insertBefore(i.render(),c.parentElement);var a=new T.Row({content:Za(e,_n,Hn).call(e,n).render()});I.Dom.insertBefore(a.render(),c.parentElement)}else{BX.UI.InfoHelper.show("limit_admin_ip")}};var c=I.Tag.render(Ua||(Ua=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right ui-section__mt-16">\n\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="','">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),o,I.Loc.getMessage("INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP"));new h.SettingsRow({row:new T.Row({content:c}),parent:i});return i}function An(e){var t=new v.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e,"_USERS[]"),label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new h.SettingsField({fieldView:t})}function Hn(e){var t="SECURITY_IP_ACCESS_".concat(e,"_IP");var i=new v.TextInput({inputName:t,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new h.SettingsField({fieldView:i})}function Pn(e){var t=new v.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_USERS[]"),label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),values:Object.values(e.users),enableDepartments:true,encodeValue:function e(t){if(!I.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="AU"){return{type:t,id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!I.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});return new h.SettingsField({fieldView:t})}function Rn(e){var t="SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_IP");var i=new v.TextInput({inputName:t,label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),value:e.ip});return new h.SettingsField({fieldView:i})}function Cn(){return new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS",{"#ARTICLE_CODE#":"redirect=detail&code=17300230"}),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17300230\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function On(){var e=this;var t=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_DEVICES_HISTORY"),titleIconClasses:"ui-icon-set --clock-with-arrow",isOpen:!this.hasValue("SECURITY_OTP_ENABLED")||!this.getValue("SECURITY_OTP_ENABLED"),isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").is_enable,bannerCode:"limit_office_login_history"});var i=new h.SettingsSection({section:t,parent:this});var a=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=16623484\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var n=new T.Row({content:a.getContainer()});new h.SettingsRow({row:n,parent:i});if(this.hasValue("DEVICE_HISTORY_SETTINGS")){var s=I.Tag.render(Wa||(Wa=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),I.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var l=new v.Selector({label:I.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DEVISE_HISTORY_CLEANUP_DAYS"),name:this.getValue("DEVICE_HISTORY_SETTINGS").name,items:this.getValue("DEVICE_HISTORY_SETTINGS").values,current:this.getValue("DEVICE_HISTORY_SETTINGS").current,isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").is_enable,bannerCode:"limit_office_login_history",helpMessageProvider:this.helpMessageProviderFactory(s)});if(!this.getValue("DEVICE_HISTORY_SETTINGS").is_enable){I.Event.bind(l.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DEVICE_HISTORY_SETTINGS").name)}));I.Event.bind(s.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DEVICE_HISTORY_SETTINGS").name)}))}hn.addToSectionHelper(l,i)}var r=I.Tag.render(za||(za=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right ui-section__mt-16">\n\t\t\t\t<a class="ui-section__link" href="/company/" target="_blank">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_USER_LIST_LINK"));new h.SettingsRow({row:new T.Row({content:r}),parent:i});return i}function yn(){var e=new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_EVENT_LOG"),titleIconClasses:"ui-icon-set --list",isOpen:false,isEnable:this.hasValue("EVENT_LOG"),bannerCode:"limit_office_login_log"});var t=new h.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(I.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17296266\')">\n\t\t\t\t\t').concat(I.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new T.Row({content:i.getContainer()});new h.SettingsRow({row:a,parent:t});var n=this.hasValue("EVENT_LOG")?I.Tag.render(xa||(xa=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right ui-section__mt-16">\n\t\t\t\t\t<a class="ui-section__link" href="','" target="_blank">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),this.getValue("EVENT_LOG"),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK")):I.Tag.render(Ya||(Ya=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right ui-section__mt-16">\n\t\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="BX.UI.InfoHelper.show(\'limit_office_login_log\')">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),I.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK"));new h.SettingsRow({row:new T.Row({content:n}),parent:t});return t}function Mn(){return new T.Section({title:I.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_BLACK_LIST"),titleIconClasses:"ui-icon-set --cross-50",isOpen:false,canCollapse:false,singleLink:{href:"/settings/configs/mail_blacklist.php"}})}function Gn(e,t,i){Fn(e,t);t.set(e,i)}function Fn(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var kn=new WeakMap;var Dn=new WeakMap;var Bn=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Gn(babelHelpers.assertThisInitialized(a),kn,{writable:true,value:void 0});Gn(babelHelpers.assertThisInitialized(a),Dn,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),kn,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Dn,i);return a}babelHelpers.createClass(t,[{key:"getType",value:function e(){return babelHelpers.classPrivateFieldGet(this,kn)}},{key:"onSuccessDataFetched",value:function e(t){var i=this;I.Runtime.loadExtension(babelHelpers.classPrivateFieldGet(this,Dn)).then((function(e){var a;var n=Object.values(e).some((function(e){if(I.Type.isObjectLike(e)){var t=null;if(e.prototype instanceof h.BaseSettingsPage){t=new e}else if(e instanceof h.BaseSettingsPage){t=e}if(t instanceof h.BaseSettingsPage){a=t;return true}}return false}));if(n===false){var s=new S.BaseEvent;n=S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onExternalPageLoaded:"+i.getType(),s).some((function(e){if(e instanceof h.BaseSettingsPage){a=e;return true}return false}))}if(a instanceof h.BaseSettingsPage){i.getParentElement().registerPage(a);a.setData(t.data);i.getParentElement().removeChild(i);if(I.Dom.isShown(i.getPage())){a.getParentElement().show(a.getType())}}else{i.onFailDataFetched("The external page was not found.")}}),this.onFailDataFetched.bind(this))}}]);return t}(h.BaseSettingsPage);function Vn(e,t,i){Un(e,t);t.set(e,i)}function Un(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Wn=new WeakMap;var zn=function(){function e(t){babelHelpers.classCallCheck(this,e);Vn(this,Wn,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Wn,t)}babelHelpers.createClass(e,[{key:"fetchUnfetchedPages",value:function e(){var t=[];babelHelpers.classPrivateFieldGet(this,Wn).forEach((function(e){if(!e.hasData()){t.push(e)}}));if(t.length<=0){return Promise.resolve()}return new Promise((function(e,i){I.ajax.runComponentAction("bitrix:intranet.settings","getSome",{mode:"class",data:{types:t.map((function(e){return e.getType()}))}}).then((function(i){var a;var n=(a=i.data)!==null&&a!==void 0?a:{};t.forEach((function(e){if(n[e.getType()]){e.setData(n[e.getType()])}}));e()}),i)}))}},{key:"fetchPage",value:function e(t){var i=this;return new Promise((function(e,a){var n=babelHelpers.classPrivateFieldGet(i,Wn).some((function(i){if(t.getType()===i.getType()){I.ajax.runComponentAction("bitrix:intranet.settings","get",{mode:"class",data:{type:t.getType()}}).then(e,a);return true}return false}));if(n!==true){return a({error:"The page was not found in pageManager"})}}))}},{key:"collectData",value:function e(){var t=this;var i={};babelHelpers.classPrivateFieldGet(this,Wn).forEach((function(e){if(e.hasData()){i[e.getType()]=t.constructor.getFormData(e.getFormNode())}}));return i}}],[{key:"getFormData",value:function e(t){return BX.ajax.prepareForm(t).data}}]);return e}();function xn(e,t){Xn(e,t);t.add(e)}function Yn(e,t,i){Xn(e,t);t.set(e,i)}function Xn(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Kn(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var jn=new WeakMap;var qn=new WeakMap;var Qn=new WeakMap;var $n=new WeakMap;var Zn=new WeakSet;var Jn=new WeakSet;var es=new WeakSet;var ts=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));xn(babelHelpers.assertThisInitialized(i),es);xn(babelHelpers.assertThisInitialized(i),Jn);xn(babelHelpers.assertThisInitialized(i),Zn);Yn(babelHelpers.assertThisInitialized(i),jn,{writable:true,value:void 0});Yn(babelHelpers.assertThisInitialized(i),qn,{writable:true,value:""});Yn(babelHelpers.assertThisInitialized(i),Qn,{writable:true,value:void 0});Yn(babelHelpers.assertThisInitialized(i),$n,{writable:true,value:""});i.setEventNamespace("BX.Intranet.Settings:Searcher");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),jn,e.node);I.Event.bind(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),jn),"input",I.Runtime.debounce(Kn(babelHelpers.assertThisInitialized(i),Zn,is),babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Qn),babelHelpers.assertThisInitialized(i)));if(document.activeElement===babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),jn)){Kn(babelHelpers.assertThisInitialized(i),Jn,as).call(babelHelpers.assertThisInitialized(i))}return i}babelHelpers.createClass(t,[{key:"getValue",value:function e(){return babelHelpers.classPrivateFieldGet(this,jn).value}}]);return t}(S.EventEmitter);function is(){Kn(this,Jn,as).call(this)}function as(){var e=String(babelHelpers.classPrivateFieldGet(this,jn).value).trim();if(babelHelpers.classPrivateFieldGet(this,qn)!==e){var t=babelHelpers.classPrivateFieldGet(this,qn);var i;if(e.length>1){babelHelpers.classPrivateFieldSet(this,qn,e);i="fastSearch"}else{babelHelpers.classPrivateFieldSet(this,qn,"");i="clearSearch"}this.emit(i,{previous:t,current:babelHelpers.classPrivateFieldGet(this,qn)});Kn(this,es,ns).call(this)}}function ns(){if(babelHelpers.classPrivateFieldGet(this,$n)!==babelHelpers.classPrivateFieldGet(this,qn)&&I.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,qn))&&babelHelpers.classPrivateFieldGet(this,qn).length>1){var e=babelHelpers.classPrivateFieldGet(this,$n);babelHelpers.classPrivateFieldSet(this,$n,babelHelpers.classPrivateFieldGet(this,qn));this.emit("search",{previous:e,current:babelHelpers.classPrivateFieldGet(this,$n)})}}function ss(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ls(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var n=function e(){};return{s:n,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();s=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!s&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function ls(e,t){if(!e)return;if(typeof e==="string")return rs(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return rs(e,t)}function rs(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function os(e,t){ds(e,t);t.add(e)}function cs(e,t,i){ds(e,t);t.set(e,i)}function ds(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _s(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var us=new WeakMap;var Ts=new WeakMap;var vs=new WeakMap;var gs=new WeakMap;var ps=new WeakMap;var Es=new WeakMap;var bs=new WeakMap;var hs=new WeakMap;var Is=new WeakMap;var Ss=new WeakSet;var Ns=new WeakSet;var fs=new WeakSet;var ws=new WeakSet;var ms=new WeakSet;var Ls=new WeakSet;var As=new WeakSet;var Hs=new WeakSet;var Ps=new WeakSet;var Rs=new WeakSet;var Cs=new WeakSet;var Os=new WeakSet;var ys=new WeakSet;var Ms=new WeakSet;var Gs=new WeakSet;var Fs=new WeakSet;var ks=new WeakSet;var Ds=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));os(babelHelpers.assertThisInitialized(i),ks);os(babelHelpers.assertThisInitialized(i),Fs);os(babelHelpers.assertThisInitialized(i),Gs);os(babelHelpers.assertThisInitialized(i),Ms);os(babelHelpers.assertThisInitialized(i),ys);os(babelHelpers.assertThisInitialized(i),Os);os(babelHelpers.assertThisInitialized(i),Cs);os(babelHelpers.assertThisInitialized(i),Rs);os(babelHelpers.assertThisInitialized(i),Ps);os(babelHelpers.assertThisInitialized(i),Hs);os(babelHelpers.assertThisInitialized(i),As);os(babelHelpers.assertThisInitialized(i),Ls);os(babelHelpers.assertThisInitialized(i),ms);os(babelHelpers.assertThisInitialized(i),ws);os(babelHelpers.assertThisInitialized(i),fs);os(babelHelpers.assertThisInitialized(i),Ns);os(babelHelpers.assertThisInitialized(i),Ss);cs(babelHelpers.assertThisInitialized(i),us,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),Ts,{writable:true,value:void 0});babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"isChanged",false);cs(babelHelpers.assertThisInitialized(i),vs,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),gs,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),ps,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),Es,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),bs,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),hs,{writable:true,value:void 0});cs(babelHelpers.assertThisInitialized(i),Is,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Is,new A({isAdmin:true,locationName:"settings",isBitrix24:e.isBitrix24===true,analyticContext:I.Type.isStringFilled(e.analyticContext)?e.analyticContext:null}));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Is).addEventOpenSettings();babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Is).addEventStartPagePage(e.startPage);i.setEventNamespace("BX.Intranet.Settings");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"button-click",(function(e){var t=babelHelpers.slicedToArray(e.data,1),a=t[0];if(a.TYPE==="save"){_s(babelHelpers.assertThisInitialized(i),As,Ys).call(babelHelpers.assertThisInitialized(i),e)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",_s(babelHelpers.assertThisInitialized(i),ws,Ws).bind(babelHelpers.assertThisInitialized(i)));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vs,I.Type.isDomNode(e.menuNode)?e.menuNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),gs,I.Type.isDomNode(e.settingsNode)?e.settingsNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ps,I.Type.isDomNode(e.contentNode)?e.contentNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),us,I.Type.isString(e.basePage)?e.basePage:"");if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),vs)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),vs).querySelectorAll("li.ui-sidepanel-menu-item a").forEach((function(e){e.addEventListener("click",(function(t){i.show(e.dataset.type)}))}))}if(e.searchNode){I.Event.bind(e.searchNode,"focus",_s(babelHelpers.assertThisInitialized(i),Gs,Js).bind(babelHelpers.assertThisInitialized(i),e.searchNode))}if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),gs)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),gs).querySelector('.ui-button-panel input[name="cancel"]').addEventListener("click",_s(babelHelpers.assertThisInitialized(i),Os,Qs))}e.pages.concat(Object.values(e.externalPages).map((function(e){var t=e.type,i=e.extensions;return new Bn(t,i)}))).forEach((function(t){return i.registerPage(t).expandPage(e.subPages[t.getType()])}));var a=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),vs).querySelector('[data-type="tools"]'));if(a.subItems&&a.subItems.length>0){a.hideSubmenu();a.setDefaultToggleButtonName()}return i}babelHelpers.createClass(t,[{key:"registerPage",value:function e(t){t.setParentElement(this);t.subscribe("change",_s(this,Ls,xs).bind(this)).subscribe("fetch",_s(this,Ns,Vs).bind(this));t.setAnalytic(babelHelpers.classPrivateFieldGet(this,Is));return t}},{key:"getPageByType",value:function e(t){return this.getChildrenElements().find((function(e){return e.getType()===t}))}},{key:"show",value:function e(t){var i;if(!I.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,ps))){console.log("Not found settings container");return}var a=this.getPageByType(t);if(!(a instanceof h.BaseSettingsPage)){console.log('Not found "'+t+'" page');return}if(a===babelHelpers.classPrivateFieldGet(this,Ts)){return}I.Dom.hide((i=babelHelpers.classPrivateFieldGet(this,Ts))===null||i===void 0?void 0:i.getPage());if(I.Type.isNil(a.getPage().parentNode)){I.Dom.append(a.getPage(),babelHelpers.classPrivateFieldGet(this,ps))}else{I.Dom.show(a.getPage())}babelHelpers.classPrivateFieldSet(this,Ts,a);babelHelpers.classPrivateFieldGet(this,Is).addEventChangePage(t);_s(this,fs,Us).call(this);S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onAfterShowPage",{source:this,page:a})}},{key:"openFoundSections",value:function e(t){t.forEach((function(e){h.RecursiveFilteringVisitor.startFrom(e,(function(e){return e.render().querySelector("mark")instanceof HTMLElement})).forEach((function(e){return h.AscendingOpeningVisitor.startFrom(e)}))}))}}]);return t}(h.BaseSettingsElement);function Bs(){if(!babelHelpers.classPrivateFieldGet(this,bs)){babelHelpers.classPrivateFieldSet(this,bs,new zn(this.getChildrenElements()))}return babelHelpers.classPrivateFieldGet(this,bs)}function Vs(e){return _s(this,Ss,Bs).call(this).fetchPage(e.getTarget())}function Us(){var e;var t=new URL(window.location.href);t.searchParams.set("page",(e=babelHelpers.classPrivateFieldGet(this,Ts))===null||e===void 0?void 0:e.getType());t.searchParams["delete"]("IFRAME");t.searchParams["delete"]("IFRAME_TYPE");top.window.history.replaceState(null,"",t.toString())}function Ws(e){var t,i=this;var a=e.getCompatData(),n=babelHelpers.slicedToArray(a,1),s=n[0];if(babelHelpers.classPrivateFieldGet(this,hs)instanceof b.MessageBox){s.denyAction();return false}if(this.isChanged&&((t=s.slider.getData())===null||t===void 0?void 0:t.get("ignoreChanges"))!==true){s.denyAction();babelHelpers.classPrivateFieldSet(this,hs,b.MessageBox.create({message:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DESC"),modal:true,buttons:[new BX.UI.Button({text:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_OK"),color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onCancel",{});s.slider.getData().set("ignoreChanges",true);i.isChanged=false;BX.UI.ButtonPanel.hide();babelHelpers.classPrivateFieldGet(i,hs).close();babelHelpers.classPrivateFieldSet(i,hs,null);s.slider.close();s.slider.destroy();if(babelHelpers.classPrivateFieldGet(i,us).includes("/configs/")){_s(i,ms,zs).call(i,"/index.php")}}}}),new BX.UI.CancelButton({text:I.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL"),events:{click:function e(){babelHelpers.classPrivateFieldGet(i,hs).close();babelHelpers.classPrivateFieldSet(i,hs,null)}}})]}));return babelHelpers.classPrivateFieldGet(this,hs).show()}if(babelHelpers.classPrivateFieldGet(this,us).includes("/configs/")||this.reloadAfterClose){_s(this,ms,zs).call(this,"/index.php")}}function zs(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=document.querySelector("#ui-sidepanel-wrapper-loader");if(t){t.style.display=""}if(I.Type.isString(e)){top.window.location.href=e}else{top.window.location.href=babelHelpers.classPrivateFieldGet(this,us)}}function xs(e){this.isChanged=true;BX.UI.ButtonPanel.show()}function Ys(e){var t=_s(this,Ss,Bs).call(this).collectData();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onBeforeSave",{data:t});babelHelpers.classPrivateFieldGet(this,Is).send();I.ajax.runComponentAction("bitrix:intranet.settings","set",{mode:"class",data:I.Http.Data.convertObjectToFormData(t)}).then(_s(this,Hs,Xs).bind(this),_s(this,Ps,Ks).bind(this))}function Xs(e){this.isChanged=false;_s(this,ys,$s).call(this);BX.UI.ButtonPanel.hide();this.reloadAfterClose=true}function Ks(e){var t=_s(this,Cs,qs).call(this,e.errors);_s(this,ys,$s).call(this);S.EventEmitter.emit("BX.UI.FormElement.Field:onFailedSave",{errors:t});var i=_s(this,Ms,Zs).call(this,t);_s(this,Rs,js).call(this,i)}function js(e){var t=document.querySelector('li a[data-type="'+e+'"]');if(t){t.dispatchEvent(new window.Event("click"))}}function qs(e){var t={};var i=ss(e),a;try{for(i.s();!(a=i.n()).done;){var n,s;var l=a.value;var r=(n=l.customData)===null||n===void 0?void 0:n.page;var o=(s=l.customData)===null||s===void 0?void 0:s.field;if(I.Type.isNil(r)||I.Type.isNil(o)){h.ErrorCollection.showSystemError(I.Loc.getMessage("INTRANET_SETTINGS_ERROR_FETCH_DATA"));break}if(I.Type.isNil(t[r])){t[r]={}}if(I.Type.isNil(t[r][o])){t[r][o]=[]}t[r][o].push(l.message)}}catch(e){i.e(e)}finally{i.f()}return t}function Qs(e){top.BX.SidePanel.Instance.close()}function $s(){var e=document.querySelector("#intranet-settings-page #ui-button-panel-save");I.Dom.removeClass(e,"ui-btn-wait")}function Zs(e){for(var t in e){return t}}function Js(e,t){var i=this;I.Event.unbindAll(e);if(!babelHelpers.classPrivateFieldGet(this,Es)){babelHelpers.classPrivateFieldSet(this,Es,new ts({node:e}));this.openFoundSections=I.Runtime.debounce(this.openFoundSections,1e3,this);_s(this,Ss,Bs).call(this).fetchUnfetchedPages().then((function(){babelHelpers.classPrivateFieldGet(i,Es).subscribe("fastSearch",_s(i,Fs,el).bind(i));babelHelpers.classPrivateFieldGet(i,Es).subscribe("clearSearch",_s(i,ks,tl).bind(i));if(babelHelpers.classPrivateFieldGet(i,Es).getValue().length>0){_s(i,Fs,el).call(i,new S.BaseEvent({data:{current:babelHelpers.classPrivateFieldGet(i,Es).getValue()}}))}}),(function(){}))["finally"]((function(){}))}}function el(e){var t=this;var i=e.getData().current.toLowerCase();var a=this.getChildrenElements().filter((function(e){var a=babelHelpers.classPrivateFieldGet(t,vs).querySelector('li.ui-sidepanel-menu-item a[data-type="'+e.getType()+'"]').closest("li.ui-sidepanel-menu-item");al(e.getPage());if(e.getPage().innerText.toLowerCase().indexOf(i)>=0){I.Dom.addClass(a,"--found");nl(e.getPage(),i);return true}I.Dom.removeClass(a,"--found");return false}));if(a.length>0){this.openFoundSections(a)}}function tl(e){var t=this;this.getChildrenElements().forEach((function(e){var i=babelHelpers.classPrivateFieldGet(t,vs).querySelector('li.ui-sidepanel-menu-item a[data-type="'+e.getType()+'"]').closest("li.ui-sidepanel-menu-item");al(e.getPage());I.Dom.removeClass(i,"--found")}))}function il(e){if(e.sourceNode){e.beforeMark&&e.beforeMark.parentNode?e.beforeMark.parentNode.removeChild(e.beforeMark):"";e.afterMark&&e.afterMark.parentNode?e.afterMark.parentNode.removeChild(e.afterMark):"";e.parentNode.replaceChild(e.sourceNode,e);delete e.beforeMark;delete e.afterMark;delete e.sourceNode}}function al(e){e.querySelectorAll("mark").forEach((function(e){il(e)}))}function nl(e,t){if(!(e instanceof HTMLElement)){if(e instanceof Text){var i=e.data.toLowerCase().indexOf(t);if(i>=0){var a=e.data;var n=e.nextSibling;var s=i+t.length;var l=e.parentNode;l.removeChild(e);var r=document.createElement("MARK");r.innerText=a.substring(i,s);r.sourceNode=e;r.beforeMark=null;r.afterMark=null;if(i>0){var o=new window.Text(a.substring(0,i));n?l.insertBefore(o,n):l.appendChild(o);r.beforeMark=o}n?l.insertBefore(r,n):l.appendChild(r);if(s<a.length){var c=new window.Text(a.substring(s,a.length));n?l.insertBefore(c,n):l.appendChild(c);r.afterMark=c}}}return}e.childNodes.forEach((function(e){if(e instanceof HTMLElement&&e.innerText.toLowerCase().indexOf(t)>=0||e.data&&e.data.toLowerCase().indexOf(t)>=0){nl(e,t)}}))}e.Settings=Ds;e.ToolsPage=q;e.EmployeePage=de;e.PortalPage=qi;e.CommunicationPage=yt;e.RequisitePage=Nt;e.ConfigurationPage=oa;e.SchedulePage=La;e.GdprPage=Ga;e.SecurityPage=hn})(this.BX.Intranet=this.BX.Intranet||{},BX.UI.Analytics,BX.UI.DragAndDrop,BX.UI,BX.UI,BX,BX.UI.Uploader,BX.UI,BX,BX.UI,BX,BX,BX,BX.UI,BX.UI.FormElements,BX.UI,BX.Main,BX.UI.EntitySelector,BX.UI.Dialogs,BX.UI.FormElements,BX,BX.Event);
//# sourceMappingURL=script.map.js