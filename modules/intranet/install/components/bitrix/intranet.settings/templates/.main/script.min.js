this.BX=this.BX||{};(function(e,t,i,a,s,n,l,r,o,c,d,u,b,p,v,h,g,_,T,E,f,I,S,w,m,N){"use strict";function H(e,t,i){P(e,t);t.set(e,i)}function P(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var A=new WeakMap;var C=new WeakMap;var L=new WeakMap;var y=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;babelHelpers.classCallCheck(this,e);H(this,A,{writable:true,value:[]});H(this,C,{writable:true,value:"settings"});H(this,L,{writable:true,value:null});babelHelpers.classPrivateFieldSet(this,L,t)}babelHelpers.createClass(e,[{key:"addEvent",value:function e(t,i){if(babelHelpers.classPrivateFieldGet(this,L).isBitrix24){babelHelpers.classPrivateFieldGet(this,A)[t]=i}}},{key:"send",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,L).isBitrix24){return}if(Object.keys(babelHelpers.classPrivateFieldGet(this,A)).length>0){N.ajax.runComponentAction("bitrix:intranet.settings","analytic",{mode:"class",data:{data:babelHelpers.classPrivateFieldGet(this,A)}}).then((function(){}))}babelHelpers.classPrivateFieldSet(this,A,[])}},{key:"addEventOpenSettings",value:function e(){var i,a,s,n;var l={event:R.OPEN,tool:babelHelpers.classPrivateFieldGet(this,C),category:"slider",p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN,c_section:(a=(s=babelHelpers.classPrivateFieldGet(this,L))===null||s===void 0?void 0:s.analyticContext)!==null&&a!==void 0?a:"",c_element:(n=babelHelpers.classPrivateFieldGet(this,L))===null||n===void 0?void 0:n.locationName};t.sendData(l)}},{key:"addEventOpenTariffSelector",value:function e(t){var i;var a={event:"open_tariff",tool:babelHelpers.classPrivateFieldGet(this,C),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN};this.addEvent(t+"_open_tariff",a)}},{key:"addEventOpenHint",value:function e(t){var i;var a={event:"open_hint",tool:babelHelpers.classPrivateFieldGet(this,C),category:t,p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN};this.addEvent(t+"_open_hint",a)}},{key:"addEventStartPagePage",value:function e(i){var a;var s={event:R.START_PAGE,tool:babelHelpers.classPrivateFieldGet(this,C),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN};t.sendData(s)}},{key:"addEventChangePage",value:function e(i){var a;var s={event:R.VIEW,tool:babelHelpers.classPrivateFieldGet(this,C),category:i,p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN};t.sendData(s)}},{key:"addEventToggleTools",value:function e(t,i){var a,s;var n="onoff_tools";var l={event:n,tool:babelHelpers.classPrivateFieldGet(this,C),category:"tools",type:t,c_element:(a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.locationName,p1:((s=babelHelpers.classPrivateFieldGet(this,L))===null||s===void 0?void 0:s.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN,p2:i?O.ON:O.OFF};this.addEvent("tools"+t+"_"+n,l)}},{key:"addEventToggle2fa",value:function e(t){var i;var a="2fa_onoff";var s={event:a,tool:babelHelpers.classPrivateFieldGet(this,C),category:"security",p1:((i=babelHelpers.classPrivateFieldGet(this,L))===null||i===void 0?void 0:i.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN,p2:t?O.ON:O.OFF};this.addEvent("security_"+a,s)}},{key:"addEventConfigPortal",value:function e(t){var i={event:t,tool:babelHelpers.classPrivateFieldGet(this,C),category:G.PORTAL};this.addEvent("portal_"+t,i)}},{key:"addEventChangeTheme",value:function e(t){var i=/custom_\d+/;var a=i.test(t)?"themeName_custom":"themeName_"+t;var s={event:R.CHANGE_PORTAL_THEME,tool:babelHelpers.classPrivateFieldGet(this,C),category:G.PORTAL,type:k.COMMON,c_section:F.SETTINGS,p1:a};this.addEvent("portal_"+R.CHANGE_PORTAL_THEME,s)}},{key:"addEventConfigEmployee",value:function e(t,i){var a;var s={event:t,tool:babelHelpers.classPrivateFieldGet(this,C),category:"employee",p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN,p2:i?O.ON:O.OFF};this.addEvent("employee_"+t,s)}},{key:"addEventConfigConfiguration",value:function e(t,i){var a;var s={event:t,tool:babelHelpers.classPrivateFieldGet(this,C),category:"configuration",p1:((a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN,p2:i?O.ON:O.OFF};this.addEvent("configuration_"+t,s)}},{key:"addEventConfigRequisite",value:function e(i){var a,s;var n={event:i,tool:babelHelpers.classPrivateFieldGet(this,C),category:"requisite",c_element:(a=babelHelpers.classPrivateFieldGet(this,L))===null||a===void 0?void 0:a.locationName,p1:((s=babelHelpers.classPrivateFieldGet(this,L))===null||s===void 0?void 0:s.isAdmin)!==false?M.ADMIN:M.NOT_ADMIN};t.sendData(n)}}]);return e}();var G=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(G,"TOOLS","tools");babelHelpers.defineProperty(G,"SECURITY","security");babelHelpers.defineProperty(G,"AI","ai");babelHelpers.defineProperty(G,"PORTAL","portal");babelHelpers.defineProperty(G,"EMPLOYEE","employee");babelHelpers.defineProperty(G,"COMMUNICATION","communication");babelHelpers.defineProperty(G,"REQUISITE","requisite");babelHelpers.defineProperty(G,"SCHEDULE","schedule");babelHelpers.defineProperty(G,"CONFIGURATION","configuration");var R=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(R,"OPEN","open_setting");babelHelpers.defineProperty(R,"START_PAGE","start_page");babelHelpers.defineProperty(R,"VIEW","view");babelHelpers.defineProperty(R,"TFA","2fa_onoff");babelHelpers.defineProperty(R,"CHANGE_PORTAL_NAME","change_portal_name");babelHelpers.defineProperty(R,"CHANGE_PORTAL_LOGO","change_portal_logo");babelHelpers.defineProperty(R,"CHANGE_PORTAL_SITE","change_portal_site");babelHelpers.defineProperty(R,"CHANGE_PORTAL_THEME","change_portal_theme");babelHelpers.defineProperty(R,"CHANGE_MARKET","change_market");babelHelpers.defineProperty(R,"CHANGE_PAY_TARIFF","change_pay_tariff");babelHelpers.defineProperty(R,"CREATE_CARD","create_vizitka");babelHelpers.defineProperty(R,"EDIT_CARD","edit_vizitka");babelHelpers.defineProperty(R,"COPY_LINK_CARD","copylink_vizitka");babelHelpers.defineProperty(R,"OPEN_ADD_COMPANY","open_add_company");babelHelpers.defineProperty(R,"CHANGE_QUICK_REG","change_quick_reg");babelHelpers.defineProperty(R,"CHANGE_REG_ALL","change_reg_all");babelHelpers.defineProperty(R,"CHANGE_EXTRANET_INVITE","change_extranet_invite");var F=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(F,"SETTINGS","settings");var k=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(k,"COMMON","common");var M=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(M,"ADMIN","isAdmin_Y");babelHelpers.defineProperty(M,"NOT_ADMIN","isAdmin_N");var O=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(O,"ON","turn_on");babelHelpers.defineProperty(O,"OFF","turn_off");var D;function B(e,t,i){V(e,t);t.set(e,i)}function V(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var z=new WeakMap;var U=new WeakMap;var W=function(e){babelHelpers.inherits(t,e);function t(e){var i;var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));B(babelHelpers.assertThisInitialized(a),z,{writable:true,value:void 0});B(babelHelpers.assertThisInitialized(a),U,{writable:true,value:void 0});a.setEventNamespace("BX.Intranet.Settings");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),z,new p.Checker({id:"siteLogo24",inputName:"logo24",title:(i=e.title)!==null&&i!==void 0?i:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_LOGO24"),size:"extra-small",isEnable:e.isEnable,checked:e.checked!=="",value:"Y",bannerCode:"limit_admin_logo24",hideSeparator:true}));return a}babelHelpers.createClass(t,[{key:"getFieldView",value:function e(){return babelHelpers.classPrivateFieldGet(this,z)}},{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,U)){return babelHelpers.classPrivateFieldGet(this,U)}babelHelpers.classPrivateFieldSet(this,U,N.Tag.render(D||(D=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-section__field-selector --align-center">\n\t\t\t\t<div class="ui-section__hint">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,z).render()));return babelHelpers.classPrivateFieldGet(this,U)}}]);return t}(I.BaseSettingsElement);var x;function X(e,t){j(e,t);t.add(e)}function Y(e,t,i){j(e,t);t.set(e,i)}function j(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function K(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var q=new WeakMap;var Q=new WeakMap;var $=new WeakMap;var Z=new WeakMap;var J=new WeakMap;var ee=new WeakMap;var te=new WeakMap;var ie=new WeakSet;var ae=new WeakSet;var se=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));X(babelHelpers.assertThisInitialized(i),ae);X(babelHelpers.assertThisInitialized(i),ie);Y(babelHelpers.assertThisInitialized(i),q,{writable:true,value:void 0});Y(babelHelpers.assertThisInitialized(i),Q,{writable:true,value:void 0});Y(babelHelpers.assertThisInitialized(i),$,{writable:true,value:void 0});Y(babelHelpers.assertThisInitialized(i),Z,{writable:true,value:void 0});Y(babelHelpers.assertThisInitialized(i),J,{writable:true,value:void 0});Y(babelHelpers.assertThisInitialized(i),ee,{writable:true,value:10});Y(babelHelpers.assertThisInitialized(i),te,{writable:true,value:void 0});i.setParentElement(e.parent);i.setEventNamespace("BX.Intranet.Settings");var a=e.siteTitleOptions;i.options={title:a.title,canUserEditTitle:a.canUserEditTitle,logo24:a.logo24,canUserEditLogo24:a.canUserEditLogo24};var s=e.siteTitleLabels;i.labels={title:s.title,logo24:s.logo24};K(babelHelpers.assertThisInitialized(i),ie,ne).call(babelHelpers.assertThisInitialized(i),a,s);K(babelHelpers.assertThisInitialized(i),ae,le).call(babelHelpers.assertThisInitialized(i),a,s);return i}babelHelpers.createClass(t,[{key:"getFieldView",value:function e(){return babelHelpers.classPrivateFieldGet(this,$)}},{key:"cancel",value:function e(){}},{key:"startInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,J)>0){return}babelHelpers.classPrivateFieldSet(this,J,setInterval(this.monitorInput.bind(this),500))}},{key:"stopInputMonitoring",value:function e(){if(babelHelpers.classPrivateFieldGet(this,J)>0){clearInterval(babelHelpers.classPrivateFieldGet(this,J));babelHelpers.classPrivateFieldSet(this,J,null)}}},{key:"monitorInput",value:function e(){var t;var i=babelHelpers.classPrivateFieldGet(this,$).getInputNode().value;if(babelHelpers.classPrivateFieldGet(this,te)!==i){babelHelpers.classPrivateFieldSet(this,ee,10);babelHelpers.classPrivateFieldSet(this,te,i);S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{title:i}}))}else if(babelHelpers.classPrivateFieldSet(this,ee,(t=babelHelpers.classPrivateFieldGet(this,ee),--t))<=0){this.stopInputMonitoring()}}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,q)){return babelHelpers.classPrivateFieldGet(this,q)}N.Event.bind(babelHelpers.classPrivateFieldGet(this,$).getInputNode(),"focus",this.startInputMonitoring.bind(this));N.Event.bind(babelHelpers.classPrivateFieldGet(this,$).getInputNode(),"keydown",this.startInputMonitoring.bind(this));N.Event.bind(babelHelpers.classPrivateFieldGet(this,$).getInputNode(),"click",this.startInputMonitoring.bind(this));N.Event.bind(babelHelpers.classPrivateFieldGet(this,$).getInputNode(),"blur",this.stopInputMonitoring.bind(this));N.Event.bind(babelHelpers.classPrivateFieldGet(this,$).getInputNode(),"blur",this.stopInputMonitoring.bind(this));babelHelpers.classPrivateFieldGet(this,Z).getFieldView().subscribe("change",(function(e){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,t.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo24:e.getData()===true?"24":""}}))}));babelHelpers.classPrivateFieldSet(this,q,N.Tag.render(x||(x=babelHelpers.taggedTemplateLiteral(['\n\t\t<div id="','" class="ui-section__field-selector --no-border --no-margin --align-center">\n\t\t\t<div class="ui-section__field-container">\n\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t','\n\t\t\t\t\t</label> \n\t\t\t\t</div>\n\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,$).getId(),babelHelpers.classPrivateFieldGet(this,$).getName(),babelHelpers.classPrivateFieldGet(this,$).getLabel(),babelHelpers.classPrivateFieldGet(this,$).getInputNode()));return babelHelpers.classPrivateFieldGet(this,q)}},{key:"getLogo24Field",value:function e(){return babelHelpers.classPrivateFieldGet(this,Z)}}]);return t}(I.BaseSettingsElement);function ne(e,t){var i;babelHelpers.classPrivateFieldSet(this,$,new p.TextInput({value:e.title,placeholder:e.title,label:(i=t.title)!==null&&i!==void 0?i:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_INPUT_LABEL"),id:"siteTitle",inputName:"title",isEnable:true}));babelHelpers.classPrivateFieldGet(this,$).setEventNamespace(this.getEventNamespace())}function le(e,t){babelHelpers.classPrivateFieldSet(this,Z,new W({title:t.logo24,isEnable:e.canUserEditLogo24,checked:e.logo24}))}function re(e,t,i){oe(e,t);t.set(e,i)}function oe(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ce=new WeakMap;var de=new WeakMap;var ue=new WeakMap;var be=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);re(this,ce,{writable:true,value:void 0});re(this,de,{writable:true,value:void 0});re(this,ue,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ce,t);S.EventEmitter.subscribe("BX.Intranet.SettingsNavigation:onMove",(function(e){var t;var a=e.data,s=a.page,n=a.fieldName;if(((t=i.getCurrentPage())===null||t===void 0?void 0:t.getType())===s){i.moveTo(i.getCurrentPage(),n);return}var l=i.getPageByType(s);if(!(l!==null&&l!==void 0&&l.hasData())){S.EventEmitter.subscribeOnce("BX.Intranet.Settings:onPageComplete",(function(e){if(e.data.page.hasContent()){i.moveTo(e.data.page,n)}}))}S.EventEmitter.subscribeOnce("BX.Intranet.Settings:onAfterShowPage",(function(e){if(e.data.page.hasContent()){i.moveTo(e.data.page,n)}}));babelHelpers.classPrivateFieldGet(i,ce).show(s)}))}babelHelpers.createClass(e,[{key:"getPageByType",value:function e(t){return this.getPages().find((function(e){return e.getType()===t}))}},{key:"getCurrentPage",value:function e(){return babelHelpers.classPrivateFieldGet(this,de)}},{key:"getPrevPage",value:function e(){return babelHelpers.classPrivateFieldGet(this,ue)}},{key:"changePage",value:function e(t){if(!(t instanceof I.BaseSettingsPage)){console.log('Not found "'+type+'" page');return}if(t===babelHelpers.classPrivateFieldGet(this,de)){return}babelHelpers.classPrivateFieldSet(this,ue,babelHelpers.classPrivateFieldGet(this,de));babelHelpers.classPrivateFieldSet(this,de,t)}},{key:"getPages",value:function e(){return babelHelpers.classPrivateFieldGet(this,ce).getChildrenElements()}},{key:"updateAddressBar",value:function e(){var t;var i=new URL(window.location.href);i.searchParams.set("page",(t=this.getCurrentPage())===null||t===void 0?void 0:t.getType());i.searchParams["delete"]("IFRAME");i.searchParams["delete"]("IFRAME_TYPE");top.window.history.replaceState(null,"",i.toString())}},{key:"findByFieldName",value:function e(t,i){var a;var s=I.RecursiveFilteringVisitor.startFrom(t,(function(e){if(e instanceof I.SettingsSection&&e.getSectionView().getId()===i){return true}if(e instanceof I.TabField&&e.getFieldView().getId()===i){return true}return(e instanceof I.SettingsField||e instanceof se||e instanceof W)&&(e.getFieldView().getName()===i||e.getFieldView().getId()===i)}));return(a=s.shift())!==null&&a!==void 0?a:null}},{key:"scrollToNode",value:function e(t){var i=t.render();var a=45;var s=i.getBoundingClientRect().top;var n=s+window.pageYOffset-a;scrollTo({top:n,behavior:"smooth"})}},{key:"moveTo",value:function e(t,i){var a=this.findByFieldName(t,i);if(N.Type.isNil(a)){return}var s=false;I.AscendingOpeningVisitor.startFrom(a,(function(e){if(e instanceof I.SettingsRow){e.getRowView().show()}else if(e instanceof I.SettingsSection){e.getSectionView().toggle(true,false)}else if(e instanceof I.TabField){var t=e.getParentElement();if(t instanceof I.TabsField){t.activateTab(e,false)}}if(!s){s=e.highlight()}}));this.scrollToNode(a)}}]);return e}();function pe(e,t){he(e,t);t.add(e)}function ve(e,t,i){he(e,t);t.set(e,i)}function he(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ge(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var _e=new WeakMap;var Te=new WeakMap;var Ee=new WeakMap;var fe=new WeakMap;var Ie=new WeakMap;var Se=new WeakSet;var we=new WeakSet;var me=new WeakSet;var Ne=new WeakSet;var He=new WeakSet;var Pe=new WeakSet;var Ae=new WeakSet;var Ce=new WeakSet;var Le=new WeakSet;var ye=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));pe(babelHelpers.assertThisInitialized(e),Le);pe(babelHelpers.assertThisInitialized(e),Ce);pe(babelHelpers.assertThisInitialized(e),Ae);pe(babelHelpers.assertThisInitialized(e),Pe);pe(babelHelpers.assertThisInitialized(e),He);pe(babelHelpers.assertThisInitialized(e),Ne);pe(babelHelpers.assertThisInitialized(e),me);pe(babelHelpers.assertThisInitialized(e),we);pe(babelHelpers.assertThisInitialized(e),Se);ve(babelHelpers.assertThisInitialized(e),_e,{writable:true,value:void 0});ve(babelHelpers.assertThisInitialized(e),Te,{writable:true,value:void 0});ve(babelHelpers.assertThisInitialized(e),Ee,{writable:true,value:void 0});ve(babelHelpers.assertThisInitialized(e),fe,{writable:true,value:void 0});ve(babelHelpers.assertThisInitialized(e),Ie,{writable:true,value:void 0});e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_TOOLS");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_TOOLS");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"tools"}},{key:"appendSections",value:function e(t){var i=new T.Row({content:this.getDescription().getContainer()});new I.SettingsRow({row:i,parent:ge(this,He,Me).call(this)});if(this.hasValue("tools")){ge(this,Se,Ge).call(this)}ge(this,He,Me).call(this).renderTo(t)}},{key:"getDescription",value:function e(){var t="\n\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_DESCRIPTION"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213196\')">\n\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return new BX.UI.Alert({text:t,inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}}]);return t}(I.BaseSettingsPage);function Ge(){var e=this;var t=this.getValue("tools");var i=[];Object.keys(t).forEach((function(s){var n;i.push(t[s].menuId);var l=t[s];var r=l.subgroups;var o=[];if(Object.keys(r).length>0){o=ge(e,me,Fe).call(e,r,l)}var c=new a.SwitcherNested({id:l.code,title:l.name,link:e.getPermission().canEdit()?l["settings-path"]:null,infoHelperCode:e.getPermission().canEdit()?l["infohelper-slider"]:null,linkTitle:(n=l["settings-title"])!==null&&n!==void 0?n:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),isChecked:l.enabled,mainInputName:l.code,isOpen:false,items:o,isDisabled:!e.getPermission().canEdit(),isDefault:l["default"],helpMessage:!e.getPermission().canEdit()?N.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG"):N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":l.name})});var d=new I.SettingsSection({section:c});N.Dom.style(d.getSectionView().render(),"margin-bottom","8px");N.Dom.attr(d.getSectionView().render(),"data-menu-id",l.menuId);ge(e,Ce,Oe).call(e).append(d.getSectionView().render());new I.SettingsRow({row:ge(e,Ce,Oe).call(e),parent:ge(e,He,Me).call(e),child:d})}))}function Re(e,t){if(!this.getPermission().canEdit()){return N.Loc.getMessage("INTRANET_SETTINGS_ELEMENT_PERMISSION_MSG")}if(e.disabled){return N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_DISABLED",{"#TOOL#":e.name})}if(e["default"]){return N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_MAIN_TOOL",{"#TOOL#":t!==null&&t!==void 0?t:""})}return""}function Fe(e,t){var i=this;var s=[];Object.keys(e).forEach((function(n){var l,r,o;var c=e[n];if(N.Type.isNull(c.name)||N.Type.isNull(c.code)||N.Type.isNull(c.enabled)){return}var d=new a.SwitcherNestedItem({title:c.name,id:c.code,inputName:c.code,isChecked:c.enabled,settingsPath:i.getPermission().canEdit()?c["settings_path"]:null,settingsTitle:(l=c["settings_title"])!==null&&l!==void 0?l:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TOOLS_LINK_SETTINGS"),infoHelperCode:i.getPermission().canEdit()?c["infohelper-slider"]:null,isDisabled:!i.getPermission().canEdit(),isDefault:(r=(o=c["default"])!==null&&o!==void 0?o:c.disabled)!==null&&r!==void 0?r:false,helpMessage:ge(i,we,Re).call(i,c,t.name)});if(c.disabled){N.Dom.style(d.getSwitcher().getNode(),{opacity:"0.4"})}else{S.EventEmitter.subscribe(d.getSwitcher(),"toggled",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventToggleTools(c.code,d.getSwitcher().isChecked())}))}if(c.code==="tool_subgroup_team_work_instant_messenger"){N.Event.bind(d.getSwitcher().getNode(),"click",(function(){if(!d.getSwitcher().isChecked()){ge(i,Le,De).call(i,c.code,d.getSwitcher().getNode(),N.Loc.getMessage("INTRANET_SETTINGS_WARNING_TOOL_INSTANT_MESSENGER")).show()}}))}s.push(d)}));return s}function ke(){if(babelHelpers.classPrivateFieldGet(this,fe)){return babelHelpers.classPrivateFieldGet(this,fe)}babelHelpers.classPrivateFieldSet(this,fe,new T.Section(this.getValue("sectionTools")));return babelHelpers.classPrivateFieldGet(this,fe)}function Me(){if(babelHelpers.classPrivateFieldGet(this,Ie)){return babelHelpers.classPrivateFieldGet(this,Ie)}babelHelpers.classPrivateFieldSet(this,Ie,new I.SettingsSection({section:ge(this,Ne,ke).call(this),parent:this}));return babelHelpers.classPrivateFieldGet(this,Ie)}function Oe(){if(babelHelpers.classPrivateFieldGet(this,Te)){return babelHelpers.classPrivateFieldGet(this,Te)}babelHelpers.classPrivateFieldSet(this,Te,new T.Row({}));return babelHelpers.classPrivateFieldGet(this,Te)}function De(e,t,i){return BX.PopupWindowManager.create(e,t,{content:i,darkMode:true,autoHide:true,angle:true,offsetLeft:14,bindOptions:{position:"bottom"},closeByEsc:true})}function Be(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Ve(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Ve(e,t){if(!e)return;if(typeof e==="string")return ze(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ze(e,t)}function ze(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ue(e,t){We(e,t);t.add(e)}function We(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function xe(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Xe=new WeakSet;var Ye=new WeakSet;var je=new WeakSet;var Ke=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ue(babelHelpers.assertThisInitialized(e),je);Ue(babelHelpers.assertThisInitialized(e),Ye);Ue(babelHelpers.assertThisInitialized(e),Xe);e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_EMPLOYEE");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE_BOX");return e}babelHelpers.createClass(t,[{key:"onSuccessDataFetched",value:function e(i){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"onSuccessDataFetched",this).call(this,i);if(this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24")){this.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_EMPLOYEE");this.render().querySelector(".intranet-settings__page-header_desc").innerText=this.descriptionPage}}},{key:"getType",value:function e(){return"employee"}},{key:"appendSections",value:function e(t){var i=xe(this,Ye,Qe).call(this);i===null||i===void 0?void 0:i.renderTo(t);var a=xe(this,je,$e).call(this);a===null||a===void 0?void 0:a.renderTo(t);var s=xe(this,Xe,qe).call(this);s===null||s===void 0?void 0:s.renderTo(t)}}]);return t}(I.BaseSettingsPage);function qe(){var e=this;if(!this.hasValue("SECTION_ADDITIONAL")){return}var t=new T.Section(this.getValue("SECTION_ADDITIONAL"));var i=new I.SettingsSection({section:t,parent:this});if(this.hasValue("allow_company_pulse")){var a=new p.Checker(this.getValue("allow_company_pulse"));S.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(R.CHANGE_QUICK_REG,a.isChecked())}));Ke.addToSectionHelper(a,i)}return i}function Qe(){if(!this.hasValue("SECTION_PROFILE")){return}var e=new T.Section(this.getValue("SECTION_PROFILE"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("fieldFormatName")){var i;var a=false;var s=this.getValue("fieldFormatName").current;var n=Be(this.getValue("fieldFormatName").values),l;try{for(n.s();!(l=n.n()).done;){var r=l.value;if(r.selected===true){a=true}}}catch(e){n.e(e)}finally{n.f()}this.getValue("fieldFormatName").values.push({value:"other",name:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_OPTION_OTHER"),selected:!a});var o=new p.Selector({label:(i=this.getValue("fieldFormatName").label)!==null&&i!==void 0?i:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NAME_FORMAT"),name:this.getValue("fieldFormatName").name+"_selector",items:this.getValue("fieldFormatName").values,hints:this.getValue("fieldFormatName").hints,current:this.getValue("fieldFormatName").current});var c=new I.SettingsField({fieldView:o});new I.SettingsRow({child:c,parent:t});var d=new p.TextInput({inputName:this.getValue("fieldFormatName").name,label:"",value:s});c=new I.SettingsField({fieldView:d});var u=new T.Row({isHidden:true});new I.SettingsRow({row:u,parent:t,child:c});if(!a){u.show()}o.getInputNode().addEventListener("change",(function(e){if(e.target.value==="other"){u.show()}else{d.getInputNode().value=o.getInputNode().value;u.hide()}}))}if(this.hasValue("fieldFormatPhoneNumber")){var b=new p.Selector(this.getValue("fieldFormatPhoneNumber"));Ke.addToSectionHelper(b,t)}if(this.hasValue("fieldFormatAddress")){var v=new p.Selector(this.getValue("fieldFormatAddress"));var h=new T.Row({separator:this.hasValue("show_year_for_female")?"bottom":null,className:"--block"});Ke.addToSectionHelper(v,t,h)}if(this.hasValue("show_year_for_female")){var g=new p.InlineChecker(this.getValue("show_year_for_female"));Ke.addToSectionHelper(g,t)}return t}function $e(){var e=this;if(!this.hasValue("SECTION_INVITE")){return}var t=new T.Section(this.getValue("SECTION_INVITE"));var i=new I.SettingsSection({section:t,parent:this});if(this.hasValue("allow_register")){var a=new p.Checker(this.getValue("allow_register"));S.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(R.CHANGE_QUICK_REG,a.isChecked())}));Ke.addToSectionHelper(a,i)}if(this.hasValue("allow_invite_users")){var s=new p.Checker(this.getValue("allow_invite_users"));S.EventEmitter.subscribe(s.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(R.CHANGE_REG_ALL,s.isChecked())}));Ke.addToSectionHelper(s,i)}if(this.hasValue("show_fired_employees")){var n=new p.Checker(this.getValue("show_fired_employees"));Ke.addToSectionHelper(n,i)}if(this.hasValue("general_chat_message_join")){var l=new p.Checker(this.getValue("general_chat_message_join"));Ke.addToSectionHelper(l,i)}if(this.hasValue("allow_new_user_lf")){var r=new p.Checker(this.getValue("allow_new_user_lf"));Ke.addToSectionHelper(r,i)}if(this.hasValue("feature_extranet")){var o=new p.Checker(this.getValue("feature_extranet"));S.EventEmitter.subscribe(o.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigEmployee(R.CHANGE_EXTRANET_INVITE,o.isChecked())}));Ke.addToSectionHelper(o,i)}return i}var Ze;function Je(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=et(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function et(e,t){if(!e)return;if(typeof e==="string")return tt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return tt(e,t)}function tt(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function it(e,t,i){at(e,t);t.set(e,i)}function at(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var st=new WeakMap;var nt=new WeakMap;var lt=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classCallCheck(this,e);it(this,st,{writable:true,value:void 0});it(this,nt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,nt,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,st)){return babelHelpers.classPrivateFieldGet(this,st)}babelHelpers.classPrivateFieldSet(this,st,N.Tag.render(Ze||(Ze=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__button_bar"></div>']))));var t=Je(babelHelpers.classPrivateFieldGet(this,nt)),i;try{for(t.s();!(i=t.n()).done;){var a=i.value;N.Dom.append(a.getContainer(),babelHelpers.classPrivateFieldGet(this,st))}}catch(e){t.e(e)}finally{t.f()}return babelHelpers.classPrivateFieldGet(this,st)}},{key:"getButtons",value:function e(){return babelHelpers.classPrivateFieldGet(this,nt)}},{key:"addButton",value:function e(t){babelHelpers.classPrivateFieldGet(this,nt).push(t);N.Dom.append(t.getContainer(),this.render())}}]);return e}();function rt(e,t,i){ot(e,t);t.set(e,i)}function ot(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ct=new WeakMap;var dt=function(){function e(){babelHelpers.classCallCheck(this,e);rt(this,ct,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ct,new g.Button({className:"landing-button-trigger",round:true,noCaps:true,size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LIGHT_BORDER}))}babelHelpers.createClass(e,[{key:"setState",value:function e(t){t.apply(babelHelpers.classPrivateFieldGet(this,ct))}},{key:"getButton",value:function e(){return babelHelpers.classPrivateFieldGet(this,ct)}}]);return e}();var ut=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"apply",value:function e(t){}}]);return e}();var bt=new WeakMap;var pt=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));rt(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),bt,e);return i}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT"));t.setDropdown(false);t.bindEvent("click",(function(){i.openNewTab(babelHelpers.classPrivateFieldGet(i,bt).edit_url)}))}},{key:"openNewTab",value:function e(t){window.open(t,"_blank").focus()}}]);return t}(ut);var vt=new WeakMap;var ht=new WeakMap;var gt=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));rt(babelHelpers.assertThisInitialized(a),vt,{writable:true,value:void 0});rt(babelHelpers.assertThisInitialized(a),ht,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),vt,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ht,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){t.setText(N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"));t.setDropdown(true);t.unbindEvent("click");t.setColor(BX.UI.Button.Color.PRIMARY);t.setMenu(babelHelpers.classPrivateFieldGet(this,ht).call(this,babelHelpers.classPrivateFieldGet(this,vt)))}}]);return t}(ut);var _t=new WeakMap;var Tt=new WeakMap;var Et=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));rt(babelHelpers.assertThisInitialized(a),_t,{writable:true,value:void 0});rt(babelHelpers.assertThisInitialized(a),Tt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),_t,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Tt,i);return a}babelHelpers.createClass(t,[{key:"apply",value:function e(t){var i=this;t.setText(N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_CREATE"));t.setDropdown(false);t.bindEvent("click",(function(e){if(t.getState()===g.ButtonState.WAITING){return}t.setState(g.ButtonState.WAITING);babelHelpers.classPrivateFieldGet(i,_t).call(i).then((function(e){var a=e.data;t.setState(null);t.unbindEvent("click");if(a.is_public){new gt(a,babelHelpers.classPrivateFieldGet(i,Tt)).apply(t)}else{var s=new pt(a);s.apply(t);s.openNewTab(a.edit_url)}}),(function(e){t.setState(null);I.ErrorCollection.showSystemError(e.errors[0].message)}))}))}}]);return t}(ut);var ft,It;function St(e,t,i){wt(e,t);t.set(e,i)}function wt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var mt=new WeakMap;var Nt=new WeakMap;var Ht=new WeakMap;var Pt=function(){function e(t){babelHelpers.classCallCheck(this,e);St(this,mt,{writable:true,value:void 0});St(this,Nt,{writable:true,value:void 0});St(this,Ht,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,mt,t)}babelHelpers.createClass(e,[{key:"qrRender",value:function e(){var t=N.Tag.render(ft||(ft=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__qr_image-container"></div>'])));new QRCode(t,{text:babelHelpers.classPrivateFieldGet(this,mt).public_url,width:106,height:106});return t}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Ht)){return babelHelpers.classPrivateFieldGet(this,Ht)}var i=function e(){window.open(babelHelpers.classPrivateFieldGet(t,mt).edit_url,"_blank").focus()};babelHelpers.classPrivateFieldSet(this,Ht,N.Tag.render(It||(It=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req-info-container">\n\t\t\t<div class="intranet-settings__req-info-inner">\n\t\t\t\t<div class="intranet-settings__qr_container">','</div>\n\t\t\t\t<div class="intranet-settings__qr_description-block">\n\t\t\t\t\t<div class="intranet-settings__qr_help-text">\n\t\t\t\t\t\t<h4 class="intranet-settings__qr_title">','</h4>\n\t\t\t\t\t\t<p class="intranet-settings__qr_text">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__qr_button">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="intranet-settings__qr_editor_box" onclick="','">\n\t\t\t\t<div class="intranet-settings__qr_editor_icon">\n\t\t\t\t\t<div class="ui-icon-set --paint-1"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="intranet-settings__qr_editor_name">','</div>\n\t\t\t\t<div class="ui-icon-set --expand intranet-settings__qr_editor_btn"></div>\n\t\t\t</div>\n\t\t</div>'])),this.qrRender(),N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_SITE"),N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_HELP_TEXT",{"#SITE_URL#":babelHelpers.classPrivateFieldGet(this,mt).public_url}),this.getCopyButton().getContainer(),i,N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_EDIT_LANDING")));return babelHelpers.classPrivateFieldGet(this,Ht)}},{key:"getCopyButton",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,Nt)){return babelHelpers.classPrivateFieldGet(this,Nt)}babelHelpers.classPrivateFieldSet(this,Nt,new g.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_COPY_LINK"),round:true,noCaps:true,className:"landing-copy-button",size:BX.UI.Button.Size.EXTRA_SMALL,color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){if(BX.clipboard.copy(babelHelpers.classPrivateFieldGet(t,mt).public_url)){top.BX.UI.Notification.Center.notify({content:N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_LINK_WAS_COPIED"),autoHide:true})}}}}));return babelHelpers.classPrivateFieldGet(this,Nt)}}]);return e}();function At(e,t){Lt(e,t);t.add(e)}function Ct(e,t,i){Lt(e,t);t.set(e,i)}function Lt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function yt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Gt=new WeakMap;var Rt=new WeakMap;var Ft=new WeakSet;var kt=new WeakSet;var Mt=function(){function e(t,i){babelHelpers.classCallCheck(this,e);At(this,kt);At(this,Ft);Ct(this,Gt,{writable:true,value:void 0});Ct(this,Rt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Gt,t);this.landingData=i;babelHelpers.classPrivateFieldSet(this,Rt,yt(this,Ft,Ot))}babelHelpers.createClass(e,[{key:"setMenuRenderer",value:function e(t){babelHelpers.classPrivateFieldSet(this,Rt,t)}},{key:"create",value:function e(){var t=this;var i=new dt;var a;if(babelHelpers.classPrivateFieldGet(this,Gt).is_connected&&!babelHelpers.classPrivateFieldGet(this,Gt).is_public){a=new pt(babelHelpers.classPrivateFieldGet(this,Gt))}else if(babelHelpers.classPrivateFieldGet(this,Gt).is_connected&&babelHelpers.classPrivateFieldGet(this,Gt).is_public){a=new gt(babelHelpers.classPrivateFieldGet(this,Gt),babelHelpers.classPrivateFieldGet(this,Rt).bind(this))}else{a=new Et((function(){return yt(t,kt,Dt).call(t)}),babelHelpers.classPrivateFieldGet(this,Rt).bind(this))}i.setState(a);return i.getButton()}}]);return e}();function Ot(e){return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:new Pt(e).render(),className:"intranet-settings__qr_popup_item"}]}}function Dt(){return N.ajax.runComponentAction("bitrix:intranet.settings","getLanding",{mode:"class",data:{companyId:this.landingData.company_id,requisiteId:this.landingData.requisite_id,bankRequisiteId:this.landingData.bank_requisite_id}})}var Bt,Vt,zt;function Ut(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Wt(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function Wt(e,t){if(!e)return;if(typeof e==="string")return xt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xt(e,t)}function xt(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Xt(e,t){jt(e,t);t.add(e)}function Yt(e,t,i){jt(e,t);t.set(e,i)}function jt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Kt(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var qt=new WeakMap;var Qt=new WeakMap;var $t=new WeakMap;var Zt=new WeakMap;var Jt=new WeakSet;var ei=new WeakSet;var ti=function(){function e(t){babelHelpers.classCallCheck(this,e);Xt(this,ei);Xt(this,Jt);Yt(this,qt,{writable:true,value:void 0});Yt(this,Qt,{writable:true,value:void 0});Yt(this,$t,{writable:true,value:void 0});Yt(this,Zt,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,qt,t)}babelHelpers.createClass(e,[{key:"render",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Qt)){return babelHelpers.classPrivateFieldGet(this,Qt)}babelHelpers.classPrivateFieldSet(this,Qt,N.Tag.render(Bt||(Bt=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__req_background">\n\t\t\t<div class="intranet-settings__req-card_wrapper">\n\t\t\t\t<div class="intranet-settings__header">\n\t\t\t\t\t<div class="intranet-settings__title"> <span class="ui-section__title-icon ui-icon-set --city"></span> <span>','</span></div>\n\t\t\t\t\t<div class="intranet-settings__contact_bar"> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</span> \n\t\t\t\t\t\t<span class="intranet-settings__contact_bar_item">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</span> \n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,qt).company.TITLE,Kt(this,Jt,ii).call(this,N.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,qt).phone)?babelHelpers.classPrivateFieldGet(this,qt).phone:N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_PHONE")),Kt(this,Jt,ii).call(this,N.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,qt).email)?babelHelpers.classPrivateFieldGet(this,qt).email:N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_EMAIL")),Kt(this,Jt,ii).call(this,N.Type.isStringFilled(babelHelpers.classPrivateFieldGet(this,qt).site)?babelHelpers.classPrivateFieldGet(this,qt).site:N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB_SITE")),this.requisiteFieldsRender(),this.getButtonsBar().render()));return babelHelpers.classPrivateFieldGet(this,Qt)}},{key:"getRequisiteUrl",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,qt).landingData.requisite_id;if(t){return"/crm/company/requisite/"+t+"/"}else{return"/crm/company/requisite/0/?itemId="+babelHelpers.classPrivateFieldGet(this,qt).company.ID}}},{key:"getCompanyUrl",value:function e(){if(babelHelpers.classPrivateFieldGet(this,qt).company.ID===0){return"/crm/company/details/0/?mycompany=y&TITLE="+babelHelpers.classPrivateFieldGet(this,qt).company.TITLE}else{return"/crm/company/details/"+babelHelpers.classPrivateFieldGet(this,qt).company.ID+"/"}}},{key:"requisiteFieldsRender",value:function e(){if(babelHelpers.classPrivateFieldGet(this,$t)){return babelHelpers.classPrivateFieldGet(this,$t)}var t=babelHelpers.classPrivateFieldGet(this,qt).fields;babelHelpers.classPrivateFieldSet(this,$t,N.Tag.render(Vt||(Vt=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__req-table_wrap"></div>']))));var i=Ut(t),a;try{for(i.s();!(a=i.n()).done;){var s=a.value;var n=N.Tag.render(zt||(zt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__req-table_row">\n\t\t\t\t\t<div class="intranet-settings__table-cell">','</div>\n\t\t\t\t\t<div class="intranet-settings__table-cell">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),s.TITLE,!babelHelpers.classPrivateFieldGet(this,qt).company.ID?Kt(this,Jt,ii).call(this,N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")):N.Type.isStringFilled(s.VALUE)?Kt(this,ei,ai).call(this,s.VALUE):Kt(this,ei,ai).call(this,N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_EMPTY_FIELD_STUB")));N.Dom.append(n,babelHelpers.classPrivateFieldGet(this,$t))}}catch(e){i.e(e)}finally{i.f()}return babelHelpers.classPrivateFieldGet(this,$t)}},{key:"getButtonsBar",value:function e(){if(babelHelpers.classPrivateFieldGet(this,Zt)){return babelHelpers.classPrivateFieldGet(this,Zt)}babelHelpers.classPrivateFieldSet(this,Zt,new lt);return babelHelpers.classPrivateFieldGet(this,Zt)}},{key:"setButtonBar",value:function e(t){babelHelpers.classPrivateFieldSet(this,Zt,t)}}]);return e}();function ii(e){return N.Dom.create("a",{text:e,attrs:{href:this.getCompanyUrl()}})}function ai(e){return N.Dom.create("a",{text:e,attrs:{href:this.getRequisiteUrl()}})}var si,ni;function li(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=ri(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function ri(e,t){if(!e)return;if(typeof e==="string")return oi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return oi(e,t)}function oi(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}var ci=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_REQUISITE");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_REQUISITE");top.BX.addCustomEvent("onLocalStorageSet",(function(t){var i;var a=(i=t===null||t===void 0?void 0:t.key)!==null&&i!==void 0?i:null;if(a==="onCrmEntityUpdate"||a==="onCrmEntityCreate"||a==="BX.Crm.RequisiteSliderDetails:onSave"){e.reload()}}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"requisite"}},{key:"appendSections",value:function e(t){if(!this.hasValue("sectionRequisite")){return}var i=new T.Section(this.getValue("sectionRequisite"));var a=new I.SettingsSection({parent:this,section:i});var s=new BX.UI.Alert({text:"\n\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_REQUISITE_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213326\')">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var n=new T.Row({content:s.getContainer()});i.append(n.render());if(this.hasValue("COMPANY")){var l=this.getValue("COMPANY");var r=this.getValue("REQUISITES");var o=this.getValue("PHONES");var c=this.getValue("SITES");var d=this.getValue("EMAILS");var u=this.getValue("LANDINGS");var b=this.getValue("LANDINGS_DATA");if(!N.Type.isArray(l)||l.length<=0){var p=new T.Row({content:this.cardRender({company:{ID:0,TITLE:this.getValue("BITRIX_TITLE")},fields:this.getValue("EMPTY_REQUISITE"),phone:[],email:[],site:[]})});i.append(p.render())}var v=li(l),h;try{for(v.s();!(h=v.n()).done;){var g=h.value;var _=!N.Type.isNil(r[g.ID])?r[g.ID]:this.getValue("EMPTY_REQUISITE");var E=new T.Row({content:this.cardRender({company:g,fields:_,phone:!N.Type.isNil(o[g.ID])?o[g.ID]:[],email:!N.Type.isNil(d[g.ID])?d[g.ID]:[],site:!N.Type.isNil(c[g.ID])?c[g.ID]:[],landing:!N.Type.isNil(u[g.ID])?u[g.ID]:[],landingData:!N.Type.isNil(b[g.ID])?b[g.ID]:[]})});i.append(E.render())}}catch(e){v.e(e)}finally{v.f()}}new I.SettingsRow({row:new T.Row({content:this.addCompanyLinkRender()}),parent:a});a.renderTo(t)}},{key:"addCompanyLinkRender",value:function e(){var t=this;var i=N.Tag.render(si||(si=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<a class="ui-section__link" \n\t\t\t\t\thref="/crm/company/details/0/?mycompany=y" target="_blank">\n\t\t\t\t',"\n\t\t\t\t</a>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_REQ_ADD_COMPANY"));N.Event.bind(i,"click",(function(e){var i;(i=t.getAnalytic())===null||i===void 0?void 0:i.addEventConfigRequisite(R.OPEN_ADD_COMPANY)}));return N.Tag.render(ni||(ni=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__link_box">',"</div>"])),i)}},{key:"cardRender",value:function e(t){var i=this;var a=new ti(t);var s=new lt;if(t.company.ID>0){var n=new Mt(t.landing,t.landingData);n.setMenuRenderer((function(e){var t=new Pt(e);N.Event.bind(t.getCopyButton().getContainer(),"click",(function(e){var t;(t=i.getAnalytic())===null||t===void 0?void 0:t.addEventConfigRequisite(R.COPY_LINK_CARD)}));return{angle:true,maxWidth:396,closeByEsc:true,className:"intranet-settings__qr_popup",items:[{html:t.render(),className:"intranet-settings__qr_popup_item"}]}}));var l=n.create();if(N.Dom.hasClass(l.getContainer(),"landing-button-trigger")){N.Event.bind(l.getContainer(),"click",(function(e){if(t.landing.is_connected&&!t.landing.is_public){var a;(a=i.getAnalytic())===null||a===void 0?void 0:a.addEventConfigRequisite(R.EDIT_CARD)}else if(!t.landing.is_connected&&!t.landing.is_public){var s;(s=i.getAnalytic())===null||s===void 0?void 0:s.addEventConfigRequisite(R.CREATE_CARD)}}))}s.addButton(l)}a.setButtonBar(s);return a.render()}}]);return t}(I.BaseSettingsPage);var di,ui,bi,pi;function vi(e,t){hi(e,t);t.add(e)}function hi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function gi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var _i=new WeakSet;var Ti=new WeakSet;var Ei=new WeakSet;var fi=new WeakSet;var Ii=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));vi(babelHelpers.assertThisInitialized(e),fi);vi(babelHelpers.assertThisInitialized(e),Ei);vi(babelHelpers.assertThisInitialized(e),Ti);vi(babelHelpers.assertThisInitialized(e),_i);e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_COMMUNICATION");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_COMMUNICATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"communication"}},{key:"appendSections",value:function e(t){var i=gi(this,_i,Si).call(this);i.renderTo(t);var a=gi(this,Ti,wi).call(this);a.renderTo(t);if(this.hasValue("availableGeneralChannel")){var s=gi(this,Ei,mi).call(this);s.renderTo(t)}var n=gi(this,fi,Ni).call(this);n.renderTo(t)}}]);return t}(I.BaseSettingsPage);function Si(){if(!this.hasValue("sectionFeed")){return}var e=new T.Section(this.getValue("sectionFeed"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("allow_livefeed_toall")){var i=new p.Checker(this.getValue("allow_livefeed_toall"));i.hideSeparator=true;var a=new I.SettingsField({fieldView:i});var s=new I.SettingsRow({parent:t,child:a});var n=new p.UserSelector({inputName:"livefeed_toall_rights[]",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),values:Object.values(this.getValue("arToAllRights")),enableDepartments:true,encodeValue:function e(t){if(!N.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!N.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});a=new I.SettingsField({fieldView:n});var l=new T.Row({isHidden:!i.isChecked(),className:"ui-section__subrow"});new I.SettingsRow({row:l,parent:s,child:a});S.EventEmitter.subscribe(i.switcher,"toggled",(function(){if(i.isChecked()){l.show()}else{l.hide()}}))}if(this.hasValue("default_livefeed_toall")){var r=new p.Checker(this.getValue("default_livefeed_toall"));Ii.addToSectionHelper(r,t)}if(this.hasValue("ratingTextLikeY")){var o,c,d;var u=new p.TextInputInline({inputName:(o=this.getValue("ratingTextLikeY"))===null||o===void 0?void 0:o.name,label:(c=this.getValue("ratingTextLikeY").label)!==null&&c!==void 0?c:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_LIKE_INPUT"),hintTitle:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_TITLE_LIKE"),value:(d=this.getValue("ratingTextLikeY"))===null||d===void 0?void 0:d.current,valueColor:this.hasValue("ratingTextLikeY"),hintDesc:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_DESC_LIKE")});Ii.addToSectionHelper(u,t)}return t}function wi(){if(!this.hasValue("sectionChats")){return}var e=new T.Section(this.getValue("sectionChats"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("general_chat_can_post")){var i;var a=new p.Checker(this.getValue("allow_post_general_chat"));var s=new I.SettingsField({fieldView:a});var n=new I.SettingsRow({parent:t,child:s});var l=new p.Selector(this.getValue("general_chat_can_post"));s=new I.SettingsField({fieldView:l});var r=new T.Row({isHidden:!a.isChecked(),className:"ui-section__subrow --no-border"});Ii.addToSectionHelper(l,n,r);var o=new p.UserSelector({inputName:"imchat_toall_rights[]",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS"),enableAll:false,values:Object.values((i=this.getValue("generalChatManagersList"))!==null&&i!==void 0?i:[]),encodeValue:function e(t){if(!N.Type.isNil(t.id)){return t.id==="all-users"?"AU":"U"+t.id}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U)(\d+)/);if(!N.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});var c=new T.Row({content:o.render(),isHidden:this.getValue("general_chat_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});Ii.addToSectionHelper(o,n,c);var d=new T.SeparatorRow({isHidden:this.getValue("general_chat_can_post").current!=="MANAGER"});new I.SettingsRow({row:d,parent:n});S.EventEmitter.subscribe(a.switcher,"toggled",(function(){if(a.isChecked()){r.show();if(l.getInputNode().value==="MANAGER"){c.show()}d.show()}else{r.hide();c.hide();d.hide()}}));l.getInputNode().addEventListener("change",(function(e){if(e.target.value==="MANAGER"){c.show()}else{c.hide()}}))}if(this.hasValue("general_chat_message_leave")){var u=new p.Checker(this.getValue("general_chat_message_leave"));Ii.addToSectionHelper(u,t)}if(this.hasValue("general_chat_message_admin_rights")){var b=new p.Checker(this.getValue("general_chat_message_admin_rights"));Ii.addToSectionHelper(b,t)}if(this.hasValue("url_preview_enable")){var v=new p.Checker(this.getValue("url_preview_enable"));Ii.addToSectionHelper(v,t)}if(this.hasValue("create_overdue_chats")){var h=new p.Checker(this.getValue("create_overdue_chats"));Ii.addToSectionHelper(h,t)}return t}function mi(){if(!this.hasValue("sectionChannels")){return}var e=new T.Section(this.getValue("sectionChannels"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("general_channel_can_post")){var i,a;var s=new p.Checker(this.getValue("allow_post_general_channel"));var n=new I.SettingsField({fieldView:s});var l=new I.SettingsRow({parent:t,child:n});var r=new p.Selector(this.getValue("general_channel_can_post"));n=new I.SettingsField({fieldView:r});var o=new T.Row({isHidden:!s.isChecked(),className:"ui-section__subrow --no-border"});Ii.addToSectionHelper(r,l,o);var c=new p.UserSelector({inputName:"imchannel_toall_rights[]",label:(i=N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_PUBLIC_MESS_CHANNEL"))!==null&&i!==void 0?i:"",enableAll:false,values:Object.values((a=this.getValue("generalChannelManagersList"))!==null&&a!==void 0?a:[]),encodeValue:function e(t){if(!N.Type.isNil(t.id)){return t.id==="all-users"?"AU":"U"+t.id}return null},decodeValue:function e(t){if(t==="UA"){return{type:"AU",id:""}}var i=t.match(/^(U)(\d+)/);if(!N.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});var d=new T.Row({content:c.render(),isHidden:this.getValue("general_channel_can_post").current!=="MANAGER",className:"ui-section__subrow --no-border"});Ii.addToSectionHelper(c,l,d);var u=new T.SeparatorRow({isHidden:this.getValue("general_channel_can_post").current!=="MANAGER"});new I.SettingsRow({row:u,parent:l});S.EventEmitter.subscribe(s.switcher,"toggled",(function(){if(s.isChecked()){o.show();if(r.getInputNode().value==="MANAGER"){d.show()}u.show()}else{o.hide();d.hide();u.hide()}}));r.getInputNode().addEventListener("change",(function(e){if(e.target.value==="MANAGER"){d.show()}else{d.hide()}}))}return t}function Ni(){var e=this;if(!this.hasValue("sectionDisk")){return}var t=new T.Section(this.getValue("sectionDisk"));var i=new I.SettingsSection({section:t,parent:this});if(this.hasValue("DISK_VIEWER_SERVICE")){var a=new p.Selector(this.getValue("DISK_VIEWER_SERVICE"));Ii.addToSectionHelper(a,i)}if(this.hasValue("DISK_LIMIT_PER_FILE")){var s;var n=N.Tag.render(di||(di=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var l=new p.Selector({label:(s=this.getValue("DISK_LIMIT_PER_FILE").label)!==null&&s!==void 0?s:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAX_FILE_LIMIT"),hintTitle:this.getValue("DISK_LIMIT_PER_FILE").hintTitle,name:this.getValue("DISK_LIMIT_PER_FILE").name,items:this.getValue("DISK_LIMIT_PER_FILE").values,hints:this.getValue("DISK_LIMIT_PER_FILE").hints,current:this.getValue("DISK_LIMIT_PER_FILE").current,isEnable:this.getValue("DISK_LIMIT_PER_FILE").isEnable,bannerCode:"limit_max_entries_in_document_history",helpDesk:"redirect=detail&code=18869612",helpMessageProvider:this.helpMessageProviderFactory(n)});var r=new T.Row({separator:"bottom",className:"--block"});if(!this.getValue("DISK_LIMIT_PER_FILE").isEnable){N.Event.bind(l.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DISK_LIMIT_PER_FILE").name)}));N.Event.bind(n.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DISK_LIMIT_PER_FILE").name)}))}Ii.addToSectionHelper(l,i,r)}new I.SettingsRow({row:new T.SeparatorRow,parent:i});if(this.hasValue("disk_allow_edit_object_in_uf")){var o=new p.Checker(this.getValue("disk_allow_edit_object_in_uf"));var c=new T.Row({separator:"top",className:"--block"});Ii.addToSectionHelper(o,i,c)}if(this.hasValue("disk_allow_autoconnect_shared_objects")){var d=new p.Checker(this.getValue("disk_allow_autoconnect_shared_objects"));Ii.addToSectionHelper(d,i)}if(this.hasValue("disk_allow_use_external_link")){var u;var b=N.Tag.render(ui||(ui=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var v=new p.Checker({inputName:this.getValue("disk_allow_use_external_link").inputName,title:(u=this.getValue("disk_allow_use_external_link").label)!==null&&u!==void 0?u:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_PUBLIC_LINK"),hintOn:this.getValue("disk_allow_use_external_link").hintOn,checked:this.getValue("disk_allow_use_external_link").checked,isEnable:this.getValue("disk_allow_use_external_link").isEnable,bannerCode:"limit_admin_share_link",helpDesk:this.getValue("disk_allow_use_external_link").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(b)});if(!this.getValue("disk_allow_use_external_link").isEnable){S.EventEmitter.subscribe(v.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_external_link")}));N.Event.bind(b.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("enable_pub_link")}))}Ii.addToSectionHelper(v,i)}if(this.hasValue("disk_object_lock_enabled")){var h;var g=N.Tag.render(bi||(bi=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var _=new p.Checker({inputName:this.getValue("disk_object_lock_enabled").inputName,title:(h=this.getValue("disk_object_lock_enabled").label)!==null&&h!==void 0?h:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_BLOCK_DOC"),hintOn:this.getValue("disk_object_lock_enabled").hintOn,checked:this.getValue("disk_object_lock_enabled").checked,isEnable:this.getValue("disk_object_lock_enabled").isEnable,bannerCode:"limit_document_lock",helpMessageProvider:this.helpMessageProviderFactory(g),helpDesk:this.getValue("disk_object_lock_enabled").helpDesk});if(!this.getValue("disk_object_lock_enabled").isEnable){S.EventEmitter.subscribe(_.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_object_lock_enabled")}));N.Event.bind(g.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_object_lock_enabled")}))}Ii.addToSectionHelper(_,i)}if(this.hasValue("disk_allow_use_extended_fulltext")){var E;var f=N.Tag.render(pi||(pi=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var w=new p.Checker({inputName:this.getValue("disk_allow_use_extended_fulltext").inputName,title:(E=this.getValue("disk_allow_use_extended_fulltext").label)!==null&&E!==void 0?E:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALLOW_SEARCH_DOC"),hintOn:this.getValue("disk_allow_use_extended_fulltext").hintOn,checked:this.getValue("disk_allow_use_extended_fulltext").checked,isEnable:this.getValue("disk_allow_use_extended_fulltext").isEnable,bannerCode:"limit_in_text_search",helpDesk:this.getValue("disk_allow_use_extended_fulltext").helpDesk,helpMessageProvider:this.helpMessageProviderFactory(f)});if(!this.getValue("disk_allow_use_extended_fulltext").isEnable){S.EventEmitter.subscribe(w.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint("disk_allow_use_extended_fulltext")}));N.Event.bind(f.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector("disk_allow_use_extended_fulltext")}))}Ii.addToSectionHelper(w,i)}return i}var Hi,Pi,Ai;function Ci(e,t,i){Li(e,t);t.set(e,i)}function Li(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var yi=new WeakMap;var Gi=new WeakMap;var Ri=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);var a=e.siteDomainOptions;e.fieldView=new p.TextInput({value:a.subDomainName,placeholder:a.subDomainName,label:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME3"),id:"subDomainName",inputName:"subDomainName",isEnable:true});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Ci(babelHelpers.assertThisInitialized(i),yi,{writable:true,value:void 0});Ci(babelHelpers.assertThisInitialized(i),Gi,{writable:true,value:void 0});i.setParentElement(e.parent);i.getFieldView().setEventNamespace(i.getEventNamespace());i.getFieldView().getInputNode().setAttribute("autocomplete","off");var s=null;N.Event.bind(i.getFieldView().getInputNode(),"input",(function(){clearTimeout(s);s=setTimeout((function(){i.validateInput()}),1e3)}));i.options={hostname:a.hostname,subDomainName:a.subDomainName,mainDomainName:a.mainDomainName,isRenameable:a.isRenameable,occupiedDomains:a.occupiedDomains};i.options.mainDomainName=[".",i.options.mainDomainName].join("").replace("..",".");return i}babelHelpers.createClass(t,[{key:"validateInput",value:function e(){var t=this.getFieldView().getInputNode().value;t=t.trim();if(t.length<3||t.length>60){this.getFieldView().setErrors([N.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_LENGTH_ERROR")])}else if(!/^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,58})[a-zA-Z0-9])$/.test(t)){this.getFieldView().setErrors([N.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_FORMAT_ERROR")])}else if(this.options.occupiedDomains.includes(t)){this.getFieldView().setErrors([N.Loc.getMessage("INTRANET_SETTINGS_DOMAIN_RENAMING_DOMAIN_EXISTS_ERROR")])}else{this.getFieldView().cleanError()}}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,yi)){return babelHelpers.classPrivateFieldGet(this,yi)}if(this.options.isRenameable!==true){var i=N.Tag.render(Hi||(Hi=babelHelpers.taggedTemplateLiteral(['<div class="settings-tools-description-link">',"</div>"])),N.Loc.getMessage("INTRANET_SETTINGS_COPY"));BX.clipboard.bindCopyClick(i,{text:function e(){return t.options.hostname}});babelHelpers.classPrivateFieldSet(this,yi,N.Tag.render(Pi||(Pi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div>\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<div class="ui-section__field-label">','</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t<div class="intranet-settings__domain_name">',"</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_DOMAIN_NAME4"),N.Text.encode(this.options.hostname),i))}else{babelHelpers.classPrivateFieldSet(this,yi,N.Tag.render(Ai||(Ai=babelHelpers.taggedTemplateLiteral(['<div id="','" class="ui-section__field-selector --no-border">\n\t\t\t\t<div class="ui-section__field-container">\n\t\t\t\t\t<div class="ui-section__field-label_box">\n\t\t\t\t\t\t<label class="ui-section__field-label" for="','">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</label> \n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-section__field-inner">\n\t\t\t\t\t\t<div class="intarnet-settings__domain_inline-field">\n\t\t\t\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-block">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intarnet-settings__domain_name">',"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>"])),this.getFieldView().getId(),this.getFieldView().getName(),this.getFieldView().getLabel(),this.getFieldView().getInputNode(),N.Text.encode(this.options.mainDomainName),this.getFieldView().renderErrors()))}return babelHelpers.classPrivateFieldGet(this,yi)}}]);return t}(I.SettingsField);function Fi(e,t){var i=e.querySelector('[data-role="logo"]');var a=e.querySelector('[data-role="title"]');var s=e.querySelector('[data-role="logo24"]');if(!i.hasAttribute("data-prev-display")){i.dataset.prevDisplay=i.style.display;a.dataset.prevDisplay=a.style.display;s.dataset.prevDisplay=s.style.display}if(N.Type.isUndefined(t.title)!==true){a.innerHTML=N.Text.encode(N.Type.isStringFilled(t.title)?t.title:"Bitrix")}if(N.Type.isUndefined(t.logo24)!==true){if(N.Type.isStringFilled(t.logo24)){delete s.dataset.visibility;if(i.style.display==="none"){s.style.removeProperty("display")}}else{s.dataset.visibility="hidden";s.style.display="none"}}if(N.Type.isUndefined(t.logo)!==true){if(N.Type.isPlainObject(t.logo)){i.style.backgroundImage='url("'+encodeURI(t.logo.src)+'")';i.style.removeProperty("display");a.style.display="none";s.style.display="none"}else{i.style.display="none";a.style.removeProperty("display");if(s.dataset.visibility!=="hidden"){s.style.removeProperty("display")}else{s.style.display="none"}}}}function ki(e,t){var i=N.Type.isPlainObject(t)?t:{};var a=String(i.id).indexOf("dark:")===0?"dark":"light";N.Dom.removeClass(e,"--light --dark");N.Dom.addClass(e,"--"+a);if(N.Type.isStringFilled(i.previewImage)){e.style.backgroundImage='url("'+i.previewImage+'")';e.style.backgroundSize="cover"}else{e.style.removeProperty("backgroundImage");e.style.removeProperty("backgroundSize");e.style.background="none"}if(N.Type.isStringFilled(i.previewColor)){e.style.backgroundColor=i.previewColor}}var Mi,Oi,Di;function Bi(e,t){zi(e,t);t.add(e)}function Vi(e,t,i){zi(e,t);t.set(e,i)}function zi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ui(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Wi=new WeakMap;var xi=new WeakSet;var Xi=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"themeId",isEnable:e.allowSetDefaultTheme,bannerCode:"limit_office_background_to_all"}));Bi(babelHelpers.assertThisInitialized(i),xi);Vi(babelHelpers.assertThisInitialized(i),Wi,{writable:true,value:void 0});Ui(babelHelpers.assertThisInitialized(i),xi,Yi).call(babelHelpers.assertThisInitialized(i),e);i.applyTheme();return i}babelHelpers.createClass(t,[{key:"applyTheme",value:function e(t){var i=t?babelHelpers.classPrivateFieldGet(this,Wi).getItemNode(t):null;var a=i?babelHelpers.classPrivateFieldGet(this,Wi).getTheme(i.dataset.themeId):babelHelpers.classPrivateFieldGet(this,Wi).getAppliedTheme();this.applyPortalThemePreview(a);if(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:ThemePicker:Change",a);this.showSaveButton()}}},{key:"applyPortalThemePreview",value:function e(t){var i=this.render().querySelector('[data-role="preview"]');ki(i,t);this.getInputNode().value=N.Type.isPlainObject(t)?t["id"]:""}},{key:"showSaveButton",value:function e(){this.getInputNode().disabled=false;this.getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getValue",value:function e(){return this.getInputNode().value}},{key:"getInputNode",value:function e(){return this.render().querySelector('input[name="themeId"]')}},{key:"applyPortalSettings",value:function e(){}},{key:"renderContentField",value:function e(){var t=this;document.querySelector(".ui-side-panel-content").style.overflow="hidden";var i=N.Tag.render(Mi||(Mi=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-theme-settings ui-section__row">\n\t\t\t<div class="ui-section__row theme-dialog-preview">\n\t\t\t\t<section data-role="preview" style="background-color: #0a51ae;" class="intranet-settings__main-widget_section --preview">\n\t\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header --with-logo">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_left">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_header_right">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline --space-between">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --square"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t<aside class="intranet-settings__main-widget__aside --right-side">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t</aside>\n\t\t\t\t</section>\n\t\t\t</div>\n\t\t\t<div class="ui-section__row theme-dialog-content" data-role="theme-container"></div>\n\t\t\t<input type="hidden" name="themeId" value="" disabled>\n\t\t</div>\n\t\t'])));var a=N.Tag.render(Oi||(Oi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__theme-btn_box">\n\t\t\t\t<div class="intranet-settings__theme-btn" onclick="','">',"</div>\n\t\t\t</div>\n\t\t"])),this.handleNewThemeButtonClick.bind(this),N.Loc.getMessage("INTRANET_SETTINGS_THEME_UPLOAD_BTN"));var s=i.querySelector('div[data-role="theme-container"]');Array.from(babelHelpers.classPrivateFieldGet(this,Wi).getThemes()).forEach((function(e){var i=babelHelpers.classPrivateFieldGet(t,Wi).createItem(e);if(babelHelpers.classPrivateFieldGet(t,Wi).canSetDefaultTheme()!==true){N.Event.unbindAll(i,"click");if(e["default"]!==true){N.Dom.addClass(i,"--restricted");i.appendChild(N.Tag.render(Di||(Di=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__theme_lock_box">',"</div>"])),t.renderLockElement()));N.Event.bind(i,"click",t.showBanner.bind(t))}}if(e["default"]===true){i.setAttribute("data-role","ui-ears-active")}s.appendChild(i)}));new l.Ears({container:s,noScrollbar:false}).init();i.appendChild(a);return i}},{key:"handleNewThemeButtonClick",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,Wi).canSetDefaultTheme()!==true){return this.showBanner()}babelHelpers.classPrivateFieldGet(this,Wi).getNewThemeDialog().show()}},{key:"handleLockButtonClick",value:function e(){if(BX.getClass("BX.UI.InfoHelper")){BX.UI.InfoHelper.show("limit_office_background_to_all")}}}]);return t}(p.BaseField);function Yi(e){var t=this;babelHelpers.classPrivateFieldSet(this,Wi,new BX.Intranet.Bitrix24.ThemePicker(e));babelHelpers.classPrivateFieldGet(this,Wi).setThemes(e.themes);babelHelpers.classPrivateFieldGet(this,Wi).setBaseThemes(e.baseThemes);babelHelpers.classPrivateFieldGet(this,Wi).applyThemeAssets=function(){};babelHelpers.classPrivateFieldGet(this,Wi).getContentContainer=function(){return t.render().querySelector('div[data-role="theme-container"]')};var i=babelHelpers.classPrivateFieldGet(this,Wi).handleRemoveBtnClick.bind(babelHelpers.classPrivateFieldGet(this,Wi));babelHelpers.classPrivateFieldGet(this,Wi).handleRemoveBtnClick=function(e){var a=babelHelpers.classPrivateFieldGet(t,Wi).getItemNode(e);if(!a){return}i(e);t.applyPortalThemePreview(babelHelpers.classPrivateFieldGet(t,Wi).getTheme(babelHelpers.classPrivateFieldGet(t,Wi).getThemeId()));t.showSaveButton()};var a=babelHelpers.classPrivateFieldGet(this,Wi).handleItemClick.bind(babelHelpers.classPrivateFieldGet(this,Wi));babelHelpers.classPrivateFieldGet(this,Wi).handleItemClick=function(e){a(e);t.applyTheme(e)};var s=babelHelpers.classPrivateFieldGet(this,Wi).addItem.bind(babelHelpers.classPrivateFieldGet(this,Wi));babelHelpers.classPrivateFieldGet(this,Wi).addItem=function(e){s(e);t.applyPortalThemePreview(e);t.showSaveButton()}}var ji=new WeakMap;var Ki=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new Xi(e.themePickerSettings);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Vi(babelHelpers.assertThisInitialized(i),ji,{writable:true,value:void 0});if(e.portalSettings){i.setEventNamespace("BX.Intranet.Settings");Fi(i.getFieldView().render(),e.portalSettings);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,i.getEventNamespace()+":Portal:Change",(function(e){Fi(i.getFieldView().render(),e.getData())}))}return i}return t}(I.SettingsField);var qi,Qi,$i;function Zi(e,t){ea(e,t);t.add(e)}function Ji(e,t,i){ea(e,t);t.set(e,i)}function ea(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ta(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ia=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,{inputName:"logo",isEnable:e.isEnable,defaultValue:"default",bannerCode:"limit_admin_logo",helpDeskCode:123,helpMessageProvider:function e(){}}));i.getInputNode().type="hidden";i.getInputNode().disabled=true;return i}babelHelpers.createClass(t,[{key:"renderContentField",value:function e(){return this.getInputNode()}}]);return t}(p.TextInput);var aa=new WeakMap;var sa=new WeakMap;var na=new WeakMap;var la=new WeakMap;var ra=new WeakMap;var oa=new WeakMap;var ca=new WeakSet;var da=new WeakSet;var ua=new WeakSet;var ba=new WeakSet;var pa=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);e.fieldView=new ia({isEnable:e.canUserEditLogo});i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));Zi(babelHelpers.assertThisInitialized(i),ba);Zi(babelHelpers.assertThisInitialized(i),ua);Zi(babelHelpers.assertThisInitialized(i),da);Zi(babelHelpers.assertThisInitialized(i),ca);Ji(babelHelpers.assertThisInitialized(i),aa,{writable:true,value:void 0});Ji(babelHelpers.assertThisInitialized(i),sa,{writable:true,value:void 0});Ji(babelHelpers.assertThisInitialized(i),na,{writable:true,value:void 0});Ji(babelHelpers.assertThisInitialized(i),la,{writable:true,value:void 0});Ji(babelHelpers.assertThisInitialized(i),ra,{writable:true,value:void 0});Ji(babelHelpers.assertThisInitialized(i),oa,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),na,e.siteLogoOptions);i.siteLogoLabel=e.siteLogoLabel;i.setEventNamespace("BX.Intranet.Settings");return i}babelHelpers.createClass(t,[{key:"initUploader",value:function e(t){var i=this;var a=t.TileWidget,s=t.StackWidget,n=t.StackWidgetSize;var l={maxFileCount:1,acceptOnlyImages:true,multiple:false,acceptedFileTypes:["image/png"],events:{onError:function e(t){console.error("File Uploader onError",t.getData().error)},"File:onError":this.onFileError.bind(this),"File:onAdd":this.onLogoAdd.bind(this),"File:onRemove":this.onLogoRemove.bind(this),onBeforeFilesAdd:this.getFieldView().isEnable()?function(){}:function(e){i.getFieldView().showBanner();e.preventDefault()}},allowReplaceSingle:true,hiddenFieldName:"logo_file",hiddenFieldsContainer:ta(this,ca,va).call(this),assignAsFile:true,imageResizeWidth:444,imageResizeHeight:110,imageResizeMode:"contain",imageResizeMimeType:"image/png",imagePreviewWidth:444,imagePreviewHeight:110,imagePreviewResizeMode:"contain",files:babelHelpers.classPrivateFieldGet(this,na)?[[1,{serverFileId:babelHelpers.classPrivateFieldGet(this,na).id,serverId:babelHelpers.classPrivateFieldGet(this,na).id,type:"image/png",width:babelHelpers.classPrivateFieldGet(this,na).width,height:babelHelpers.classPrivateFieldGet(this,na).height,treatImageAsFile:true,downloadUrl:babelHelpers.classPrivateFieldGet(this,na).src,serverPreviewUrl:babelHelpers.classPrivateFieldGet(this,na).src,serverPreviewWidth:babelHelpers.classPrivateFieldGet(this,na).width,serverPreviewHeight:babelHelpers.classPrivateFieldGet(this,na).height,src:babelHelpers.classPrivateFieldGet(this,na).src,preload:true}]]:null};babelHelpers.classPrivateFieldSet(this,sa,new s(l,{size:n.LARGE}));return this}},{key:"onFileError",value:function e(t){console.error("File Error",t.getData().error);S.EventEmitter.subscribeOnce(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":onAfterShowPage",this.removeFailedLogo.bind(this));var i=this.getParentElement();if(i){S.EventEmitter.subscribeOnce(i.getFieldView(),"onActive",this.removeFailedLogo.bind(this))}}},{key:"removeFailedLogo",value:function e(){var t=babelHelpers.classPrivateFieldGet(this,sa).getUploader().getFiles()[0];if(t&&t.isLoadFailed()){babelHelpers.classPrivateFieldGet(this,sa).getUploader().removeFiles()}}},{key:"onLogoAdd",value:function e(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:{src:t.getData().file.getClientPreviewUrl()}}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="add";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"onLogoRemove",value:function e(t){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,this.getEventNamespace()+":Portal:Change",new S.BaseEvent({data:{logo:null}}));this.getFieldView().getInputNode().disabled=false;this.getFieldView().getInputNode().value="remove";this.getFieldView().getInputNode().form.dispatchEvent(new window.Event("change"))}},{key:"getName",value:function e(){return"logo"}},{key:"cancel",value:function e(){}},{key:"render",value:function e(){var t=this;if(babelHelpers.classPrivateFieldGet(this,aa)){return babelHelpers.classPrivateFieldGet(this,aa)}babelHelpers.classPrivateFieldSet(this,aa,N.Tag.render(qi||(qi=babelHelpers.taggedTemplateLiteral(["<div></div>"]))));ta(this,ua,ga).call(this);N.Runtime.loadExtension("ui.uploader.stack-widget").then((function(e){t.initUploader(e);ta(t,da,ha).call(t);ta(t,ba,_a).call(t)}));return babelHelpers.classPrivateFieldGet(this,aa)}}]);return t}(I.SettingsField);function va(){if(!babelHelpers.classPrivateFieldGet(this,la)){babelHelpers.classPrivateFieldSet(this,la,document.createElement("div"))}return babelHelpers.classPrivateFieldGet(this,la)}function ha(){var e;var t=N.Tag.render(Qi||(Qi=babelHelpers.taggedTemplateLiteral(["<div></div>"])));var i=N.Tag.render($i||($i=babelHelpers.taggedTemplateLiteral(['<div>\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t",'\n\t\t\t\t<div class="ui-section__field-label">',"</div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>"])),(e=this.siteLogoLabel)!==null&&e!==void 0?e:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE1"),t,N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TAB_TITLE_WIDGET_LOGO_TITLE2"),this.getFieldView().getInputNode(),ta(this,ca,va).call(this),this.getFieldView().renderErrors());babelHelpers.classPrivateFieldGet(this,sa).renderTo(t);N.Dom.replace(babelHelpers.classPrivateFieldGet(this,aa),i)}function ga(){babelHelpers.classPrivateFieldSet(this,oa,new m.Loader({target:babelHelpers.classPrivateFieldGet(this,aa),color:"rgba(82, 92, 105, 0.9)",mode:"inline"}));babelHelpers.classPrivateFieldGet(this,oa).show().then((function(){console.log("The loader is shown")}))}function _a(){if(babelHelpers.classPrivateFieldGet(this,oa)){babelHelpers.classPrivateFieldGet(this,oa).destroy();babelHelpers.classPrivateFieldSet(this,oa,null)}}var Ta;function Ea(e,t,i){fa(e,t);t.set(e,i)}function fa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Ia=new WeakMap;var Sa=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ea(babelHelpers.assertThisInitialized(a),Ia,{writable:true,value:void 0});a.setEventNamespace("BX.Intranet.Settings");Fi(a.render(),e);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":Portal:Change",a.onChange.bind(babelHelpers.assertThisInitialized(a)));if(i){ki(a.render(),i===null||i===void 0?void 0:i.theme);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,a.getEventNamespace()+":ThemePicker:Change",a.onSetTheme.bind(babelHelpers.assertThisInitialized(a)))}return a}babelHelpers.createClass(t,[{key:"onChange",value:function e(t){Fi(this.render(),t.getData())}},{key:"onSetTheme",value:function e(t){ki(this.render(),t.getData())}},{key:"render",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Ia)){babelHelpers.classPrivateFieldSet(this,Ia,N.Tag.render(Ta||(Ta=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<section class="intranet-settings__main-widget_section">\n\t\t\t\t<div class="intranet-settings__main-widget__bang"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_bg"></div>\n\t\t\t\t\t<div class="intranet-settings__main-widget_pos-box">\n\t\t\t\t\t\t<aside class="intranet-settings__main-widget__aside">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item --active"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget__aside_item"></div>\n\t\t\t\t\t\t</aside>\n\t\t\t\t\t\t<main class="intranet-settings__main-widget_main">\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_header"> \n\t\t\t\t\t\t\x3c!-- statement class. depends of content --with-logo --\x3e\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo" data-role="logo"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_name" data-role="title">Bitrix</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_logo24" data-role="logo24">24</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_box">\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inline">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --sm"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_inner">\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-widget_lane_item --bg-30"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</main>\n\t\t\t\t\t</div>\t\t\t\t\n\t\t\t</section>']))))}return babelHelpers.classPrivateFieldGet(this,Ia)}}]);return t}(S.EventEmitter);var wa,ma;function Na(e,t){Ha(e,t);t.add(e)}function Ha(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Pa(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Aa=new WeakSet;var Ca=new WeakSet;var La=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Na(babelHelpers.assertThisInitialized(e),Ca);Na(babelHelpers.assertThisInitialized(e),Aa);e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_PORTAL");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_PORTAL");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":Portal:Change",(function(t){if(!N.Type.isNil(t.data.title)){var i;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventConfigPortal(R.CHANGE_PORTAL_NAME)}else if(!N.Type.isNil(t.data.logo)){var a;(a=e.getAnalytic())===null||a===void 0?void 0:a.addEventConfigPortal(R.CHANGE_PORTAL_LOGO)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,e.getEventNamespace()+":ThemePicker:Change",(function(t){var i,a;(i=e.getAnalytic())===null||i===void 0?void 0:i.addEventChangeTheme((a=t.data)===null||a===void 0?void 0:a.id)}));return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"portal"}},{key:"headerWidgetRender",value:function e(){return""}},{key:"getSections",value:function e(){return[this.buildSiteTitleSection(this.getValue("portalSettings"),this.getValue("portalThemeSettings"),this.getValue("portalSettingsLabels")),this.getValue("portalDomainSettings")?this.buildDomainSection(this.getValue("portalDomainSettings")):null,this.buildThemeSection(this.getValue("portalThemeSettings"),this.getValue("portalSettings"))].filter((function(e){return e instanceof I.SettingsSection}))}},{key:"buildSiteTitleSection",value:function e(t,i,a){if(!this.hasValue("sectionCompanyTitle")){return}var s=new T.Section(this.getValue("sectionCompanyTitle"));var n=new I.SettingsSection({parent:this,section:s});s.append(new T.Row({content:new o.Alert({text:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_TITLE_DESCRIPTION"),inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}).render());var l=new I.SettingsRow({row:new T.Row({className:"intranet-settings__grid_box"}),parent:n});var r=new Sa(t,i);var c=new I.SettingsRow({row:new T.Row({className:"intranet-settings__site-logo_subrow --no-padding --bottom-separator --block"}),parent:l});var d=new I.TabsField({parent:c});var u=new I.TabField({parent:d,tabsOptions:this.getValue("tabCompanyTitle")});var b=new T.Row({});var v=new se({parent:b,siteTitleOptions:t,siteTitleLabels:a,helpMessages:{site:this.helpMessageProviderFactory()}});new I.SettingsRow({row:b,parent:u,child:v});new I.SettingsRow({parent:u,child:v.getLogo24Field()});var h=new I.TabField({parent:d,tabsOptions:this.getValue("tabCompanyLogo")});var g=new pa({siteLogoLabel:this.getValue("portalSettingsLabels").logo,siteLogoOptions:this.getValue("portalSettings").logo,canUserEditLogo:this.getValue("portalSettings").canUserEditLogo});new I.SettingsRow({parent:h,child:g});d.activateTab(u);new I.SettingsRow({row:new T.Row({content:r.render(),className:"intranet-settings__site-logo_subrow --no-padding"}),parent:l});new I.SettingsRow({row:new T.SeparatorRow,parent:n});new I.SettingsRow({parent:n,child:new I.SettingsField({fieldView:new p.TextInput({inputName:"name",label:this.getValue("portalSettingsLabels").name,value:this.getValue("portalSettings").name,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),inputDefaultWidth:true})})});return n}},{key:"buildDomainSection",value:function e(t){var i=this;if(!this.hasValue("sectionSiteDomain")){return}var a=new T.Section(this.getValue("sectionSiteDomain"));var s=new I.SettingsSection({parent:this,section:a});a.append(new T.Row({content:new o.Alert({text:"\n\t\t\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_SITE_DOMAIN_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18213298\')">\n\t\t\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}).render());var n=new I.SettingsRow({parent:s});var l=new I.TabsField({parent:n});var r=new I.TabField({parent:l,tabsOptions:this.getValue("tabDomainPrefix")});var c=new Ri({siteDomainOptions:t,helpMessages:{site:this.helpMessageProviderFactory()}});N.Event.bind(c.getFieldView().getInputNode(),"keydown",(function(){var e;(e=i.getAnalytic())===null||e===void 0?void 0:e.addEventConfigPortal(R.CHANGE_PORTAL_SITE)}));var d=new T.Row({content:c.render()});new I.SettingsRow({row:d,parent:r,child:c});var u=new I.TabField({parent:l,tabsOptions:this.getValue("tabDomain")});var b=new T.Row({content:Pa(this,Ca,ya).call(this,t)});new I.SettingsRow({row:b,parent:u});l.activateTab(r);return s}},{key:"buildThemeSection",value:function e(t,i){if(!this.hasValue("sectionSiteTheme")){return}var a=new T.Section(this.getValue("sectionSiteTheme"));var s=new I.SettingsSection({section:a,parent:this});new I.SettingsRow({row:new T.Row({content:new o.Alert({text:"\n\t\t\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_TITLE_PORTAL_THEME_DESCRIPTION"),'\n\t\t\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=18325288\')">\n\t\t\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t\t\t</a>\n\t\t\t\t\t"),inline:true,size:o.AlertSize.SMALL,color:o.AlertColor.PRIMARY}).getContainer()}),parent:s});new Ki({parent:s,portalSettings:i,themePickerSettings:t});return s}}]);return t}(I.BaseSettingsPage);function ya(e){var t=N.Tag.render(wa||(wa=babelHelpers.taggedTemplateLiteral(['<div class="ui-icon-set --copy-plates intranet-settings__domain__list_btn"></div>'])));var i=e.exampleDns.join("<br>");BX.clipboard.bindCopyClick(t,{text:function e(){return i.replaceAll("<br>","\n")}});var a=N.Tag.render(ma||(ma=babelHelpers.taggedTemplateLiteral(['<div class="intranet-settings__domain__list_box">\n\t\t\t\t\t\t<ul class="intranet-settings__domain__list">\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t<div class="intranet-settings__domain_box">\n\t\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t\t",'\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__domain__list_item">\n\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<a target="_blank" href="/settings/support.php" class="settings-tools-description-link">',"</a>\n\t\t\t\t\t</div>"])),N.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP1"),i,t,N.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP2"),N.Loc.getMessage("INTRANET_SETTINGS_OWN_DOMAIN_HELP3"),N.Loc.getMessage("INTRANET_SETTINGS_WRITE_TO_SUPPORT"));if(e.isCustomizable!==true){N.Event.bind(a.querySelector("a.settings-tools-description-link"),"click",(function(e){BX.UI.InfoHelper.show("limit_office_own_domain");e.preventDefault();return false}))}return a}var Ga,Ra,Fa;function ka(e,t,i){Ma(e,t);t.set(e,i)}function Ma(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Oa=function e(){babelHelpers.classCallCheck(this,e)};babelHelpers.defineProperty(Oa,"WARNING","--warning");babelHelpers.defineProperty(Oa,"DANGER","--danger");var Da=new WeakMap;var Ba=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ka(babelHelpers.assertThisInitialized(e),Da,{writable:true,value:void 0});e.setEventNamespace("BX.Intranet.Settings:PortalDeleteForm");return e}babelHelpers.createClass(t,[{key:"getDescription",value:function e(){var t='\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=19566456\')">\n\t\t\t\t'.concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return N.Tag.render(Ga||(Ga=babelHelpers.taggedTemplateLiteral(["\n\t\t\t","\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL",{"#MORE_DETAILS#":t}))}},{key:"getBodyClass",value:function e(){return Oa.DANGER}},{key:"getConfirmButtonText",value:function e(){return N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL")}},{key:"getInputContainer",value:function e(){}},{key:"getContainer",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Da)){babelHelpers.classPrivateFieldSet(this,Da,N.Tag.render(Ra||(Ra=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__portal-delete-form_wrapper ','">\n\t\t\t\t\t<div class="intranet-settings__portal-delete-form_body">\n\t\t\t\t\t\t<div class="intranet-settings__portal-delete-icon-wrapper">\n\t\t\t\t\t\t\t<div class="ui-icon-set --warning"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__portal-delete-form_description-wrapper">\n\t\t\t\t\t\t\t<span class="intranet-settings__portal-delete-form_description">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),this.getBodyClass(),this.getDescription(),this.getInputContainer(),this.getButtonContainer()))}return babelHelpers.classPrivateFieldGet(this,Da)}},{key:"onConfirmEventHandler",value:function e(){this.sendChangeFormEvent("checkword")}},{key:"sendChangeFormEvent",value:function e(t){this.emit("updateForm",new S.BaseEvent({data:{type:t!==null&&t!==void 0?t:null}}))}},{key:"getButtonContainer",value:function e(){return N.Tag.render(Fa||(Fa=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span class="intranet-settings__portal-delete-form_buttons-wrapper">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</span>\n\t\t"])),this.getConfirmButton().getContainer(),this.getCancelButton().getContainer())}},{key:"getConfirmButton",value:function e(){var t=this;if(!this.confirmButton){var i;this.confirmButton=new BX.UI.Button({text:(i=this.getConfirmButtonText())!==null&&i!==void 0?i:"",noCaps:true,round:true,className:"--confirm",events:{click:function e(){t.onConfirmEventHandler()}},props:{"data-bx-role":"delete-portal-confirm"}})}return this.confirmButton}},{key:"getCancelButton",value:function e(){var t=this;return new BX.UI.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_ACTION_DELETE_PORTAL"),noCaps:true,round:true,className:"--cancel",events:{click:function e(){t.emit("closeForm")}},props:{"data-bx-role":"delete-portal-cancel"}})}}]);return t}(S.EventEmitter);var Va;function za(e,t,i){Ua(e,t);t.set(e,i)}function Ua(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Wa=new WeakMap;var xa=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));za(babelHelpers.assertThisInitialized(i),Wa,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Wa,e);return i}babelHelpers.createClass(t,[{key:"getDescription",value:function e(){var t='\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=19566456\')">\n\t\t\t\t'.concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return N.Tag.render(Va||(Va=babelHelpers.taggedTemplateLiteral(["\n\t\t\t","\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_EMPLOYEE",{"#MORE_DETAILS#":t}))}},{key:"getBodyClass",value:function e(){return Oa.WARNING}},{key:"getConfirmButtonText",value:function e(){return N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_FIRE_EMPLOYEE")}},{key:"onConfirmEventHandler",value:function e(){var t=this;this.getConfirmButton().setWaiting(true);BX.SidePanel.Instance.open("/company/?apply_filter=Y&FIRED=N",{events:{onCloseComplete:function e(){N.ajax.runAction("bitrix24.portal.getActiveUserCount").then((function(e){t.getConfirmButton().setWaiting(false);if(e.data<=1){t.sendChangeFormEvent(babelHelpers.classPrivateFieldGet(t,Wa)?"default":"mail")}}))["catch"]((function(e){t.getConfirmButton().setWaiting(false);e.errors.forEach((function(e){console.log(e.message)}))}))}}})}}]);return t}(Ba);var Xa,Ya,ja;function Ka(e,t,i){qa(e,t);t.set(e,i)}function qa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Qa=new WeakMap;var $a=new WeakMap;var Za=new WeakMap;var Ja=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ka(babelHelpers.assertThisInitialized(i),Qa,{writable:true,value:void 0});Ka(babelHelpers.assertThisInitialized(i),$a,{writable:true,value:void 0});Ka(babelHelpers.assertThisInitialized(i),Za,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Qa,e);i.getConfirmButton().setState(BX.UI.Button.State.DISABLED);N.Event.bind(i.getInputNode(),"input",(function(e){if(e.target.value===babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),Qa)){i.getConfirmButton().setState(null)}else{i.getConfirmButton().setState(BX.UI.Button.State.DISABLED)}}));return i}babelHelpers.createClass(t,[{key:"onConfirmEventHandler",value:function e(){var t=this;if(this.getInputNode().value===babelHelpers.classPrivateFieldGet(this,Qa)){this.getConfirmButton().setWaiting(true);N.ajax.runAction("bitrix24.portal.deletePortal",{data:{checkWord:this.getInputNode().value}}).then((function(e){if(e.data.redirectUrl){top.window.location.href=e.data.redirectUrl}else{top.window.location.reload()}}))["catch"]((function(e){e.errors.forEach((function(e){t.getConfirmButton().setWaiting(false);top.BX.UI.Notification.Center.notify({content:e.message,position:"bottom-right"})}))}))}}},{key:"getDescription",value:function e(){return N.Tag.render(Xa||(Xa=babelHelpers.taggedTemplateLiteral(["\n\t\t\t","\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_CHECKWORD",{"#CHECKWORD#":babelHelpers.classPrivateFieldGet(this,Qa)}))}},{key:"getInputContainer",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Za)){babelHelpers.classPrivateFieldSet(this,Za,N.Tag.render(Ya||(Ya=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-ctl ui-ctl-textbox ui-ctl-w75 --delete">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),this.getInputNode()))}return babelHelpers.classPrivateFieldGet(this,Za)}},{key:"getInputNode",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,$a)){babelHelpers.classPrivateFieldSet(this,$a,N.Tag.render(ja||(ja=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input\n\t\t\t\t\tdata-bx-role="delete-portal-checkword"\n\t\t\t\t\tonchange="event.stopPropagation()"\n\t\t\t\t\tname="deletePortalCheckWord"\n\t\t\t\t\ttype="text"\n\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\tplaceholder="','"\n\t\t\t\t>\n\t\t\t'])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_DELETE_PORTAL_CHECKWORD_PLACEHOLDER",{"#CHECKWORD#":babelHelpers.classPrivateFieldGet(this,Qa)})))}return babelHelpers.classPrivateFieldGet(this,$a)}}]);return t}(Ba);var es;function ts(e,t){as(e,t);t.add(e)}function is(e,t,i){as(e,t);t.set(e,i)}function as(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ss(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ns=new WeakMap;var ls=new WeakMap;var rs=new WeakMap;var os=new WeakSet;var cs=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ts(babelHelpers.assertThisInitialized(a),os);is(babelHelpers.assertThisInitialized(a),ns,{writable:true,value:void 0});is(babelHelpers.assertThisInitialized(a),ls,{writable:true,value:void 0});is(babelHelpers.assertThisInitialized(a),rs,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ns,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),ls,i);return a}babelHelpers.createClass(t,[{key:"getBodyClass",value:function e(){return Oa.WARNING}},{key:"getConfirmButtonText",value:function e(){return N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldGet(this,ns)})}},{key:"onConfirmEventHandler",value:function e(){top.window.location.href=ss(this,os,ds).call(this)}},{key:"getDescription",value:function e(){var t='\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=19566456\')">\n\t\t\t\t'.concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t");return N.Tag.render(es||(es=babelHelpers.taggedTemplateLiteral(["\n\t\t\t","\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_MAIL",{"#MAIL#":babelHelpers.classPrivateFieldGet(this,ns),"#MAIL_LINK#":ss(this,os,ds).call(this),"#MORE_DETAILS#":t}))}}]);return t}(Ba);function ds(){if(!babelHelpers.classPrivateFieldGet(this,rs)){var e=N.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_BODY",{"#PORTAL_URL#":babelHelpers.classPrivateFieldGet(this,ls)});var t=N.Loc.getMessage("INTRANET_SETTINGS_PORTAL_DELETE_MAIL_SUBJECT",{"#PORTAL_URL#":babelHelpers.classPrivateFieldGet(this,ls)});babelHelpers.classPrivateFieldSet(this,rs,"mailto:".concat(babelHelpers.classPrivateFieldGet(this,ns),"?body=").concat(e,"&subject=").concat(t))}return babelHelpers.classPrivateFieldGet(this,rs)}var us;var bs=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"getButtonContainer",value:function e(){}},{key:"getBodyClass",value:function e(){return Oa.WARNING}},{key:"getDescription",value:function e(){return N.Tag.render(us||(us=babelHelpers.taggedTemplateLiteral(["\n\t\t\t",'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=19566456\')">\n\t\t\t\t',"\n\t\t\t</a>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CONFIGURATION_DESCRIPTION_DELETE_PORTAL_NOT_ADMIN"),N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"))}}]);return t}(Ba);function ps(e,t){hs(e,t);t.add(e)}function vs(e,t,i){hs(e,t);t.set(e,i)}function hs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function gs(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var _s=new WeakMap;var Ts=new WeakMap;var Es=new WeakMap;var fs=new WeakMap;var Is=new WeakMap;var Ss=new WeakSet;var ws=new WeakSet;var ms=new WeakSet;var Ns=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));ps(babelHelpers.assertThisInitialized(i),ms);ps(babelHelpers.assertThisInitialized(i),ws);ps(babelHelpers.assertThisInitialized(i),Ss);vs(babelHelpers.assertThisInitialized(i),_s,{writable:true,value:void 0});vs(babelHelpers.assertThisInitialized(i),Ts,{writable:true,value:void 0});vs(babelHelpers.assertThisInitialized(i),Es,{writable:true,value:void 0});vs(babelHelpers.assertThisInitialized(i),fs,{writable:true,value:void 0});vs(babelHelpers.assertThisInitialized(i),Is,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),fs,i.getSectionView().className.bodyActive);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),_s,e.options);var a;if(!babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),_s).isFreeLicense){a="mail"}else if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),_s).isEmployeesLeft){a="employee"}else{a="default"}gs(babelHelpers.assertThisInitialized(i),Ss,Hs).call(babelHelpers.assertThisInitialized(i),a);return i}return t}(I.SettingsSection);function Hs(e){if(babelHelpers.classPrivateFieldGet(this,Ts)){this.removeChild(babelHelpers.classPrivateFieldGet(this,Ts));N.Dom.remove(babelHelpers.classPrivateFieldGet(this,Ts).render())}switch(e){case"checkword":babelHelpers.classPrivateFieldSet(this,Es,new Ja(babelHelpers.classPrivateFieldGet(this,_s).checkWord));break;case"mail":babelHelpers.classPrivateFieldSet(this,Es,new cs(babelHelpers.classPrivateFieldGet(this,_s).mailForRequest,babelHelpers.classPrivateFieldGet(this,_s).portalUrl));break;case"employee":babelHelpers.classPrivateFieldSet(this,Es,new xa(babelHelpers.classPrivateFieldGet(this,_s).isFreeLicense));break;case"not_admin":babelHelpers.classPrivateFieldSet(this,Es,new bs);break;default:babelHelpers.classPrivateFieldSet(this,Es,new Ba);break}gs(this,ms,As).call(this);gs(this,ws,Ps).call(this);var t=new T.Row({content:babelHelpers.classPrivateFieldGet(this,Es).getContainer()});babelHelpers.classPrivateFieldSet(this,Ts,new I.SettingsRow({row:t}));this.addChild(babelHelpers.classPrivateFieldGet(this,Ts));this.render()}function Ps(){var e=this;babelHelpers.classPrivateFieldGet(this,Es).subscribe("closeForm",(function(){e.getSectionView().toggle(false)}));babelHelpers.classPrivateFieldGet(this,Es).subscribe("updateForm",(function(t){if(t.data.type){gs(e,Ss,Hs).call(e,t.data.type)}}))}function As(){N.Dom.removeClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldGet(this,Is));babelHelpers.classPrivateFieldSet(this,Is,babelHelpers.classPrivateFieldGet(this,Es).getBodyClass());this.getSectionView().className.bodyActive=babelHelpers.classPrivateFieldGet(this,fs)+" "+babelHelpers.classPrivateFieldGet(this,Is);if(this.getSectionView().isOpen){N.Dom.addClass(this.getSectionView().getContent(),babelHelpers.classPrivateFieldGet(this,Is))}}var Cs,Ls;function ys(e,t){Rs(e,t);t.add(e)}function Gs(e,t,i){Rs(e,t);t.set(e,i)}function Rs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Fs(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ks=new WeakMap;var Ms=new WeakSet;var Os=new WeakSet;var Ds=new WeakSet;var Bs=new WeakSet;var Vs=new WeakSet;var zs=new WeakSet;var Us=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ys(babelHelpers.assertThisInitialized(e),zs);ys(babelHelpers.assertThisInitialized(e),Vs);ys(babelHelpers.assertThisInitialized(e),Bs);ys(babelHelpers.assertThisInitialized(e),Ds);ys(babelHelpers.assertThisInitialized(e),Os);ys(babelHelpers.assertThisInitialized(e),Ms);Gs(babelHelpers.assertThisInitialized(e),ks,{writable:true,value:void 0});e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_CONFIGURATION");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"configuration"}},{key:"headerWidgetRender",value:function e(){var t;var i="";if(((t=this.getValue("isFormat24Hour"))===null||t===void 0?void 0:t.current)==="Y"){i=this.getValue("format24HourTime")}else{i=this.getValue("format12HourTime")}babelHelpers.classPrivateFieldSet(this,ks,N.Tag.render(Cs||(Cs=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="intranet-settings__date-widget_box">\n\t\t\t<span class="ui-icon-set --earth-language"></span>\n\t\t\t<div class="intranet-settings__date-widget_content">\n\t\t\t\t<div class="intranet-settings__date-widget_inner">\n\t\t\t\t\t<span data-role="time" class="intranet-settings__date-widget_title">','</span>\n\t\t\t\t\t<span class="intranet-settings__date-widget_subtitle">','</span>\n\t\t\t\t</div>\n\t\t\t\t<div data-role="date" class="intranet-settings__date-widget_subtitle">',"</div>\n\t\t\t</div>\n\t\t</div>"])),i,this.getValue("offsetUTC"),this.getValue("currentDate")));return babelHelpers.classPrivateFieldGet(this,ks)}},{key:"appendSections",value:function e(t){var i=Fs(this,Ms,Ws).call(this);i===null||i===void 0?void 0:i.renderTo(t);var a=Fs(this,Os,xs).call(this);a===null||a===void 0?void 0:a.renderTo(t);if(this.hasValue("mapsProviderCRM")&&this.getValue("mapsProviderCRM")){var s=Fs(this,Ds,Xs).call(this);s===null||s===void 0?void 0:s.renderTo(t)}var n=Fs(this,Bs,Ys).call(this);n===null||n===void 0?void 0:n.renderTo(t);var l=Fs(this,Vs,js).call(this);l===null||l===void 0?void 0:l.renderTo(t);if(this.hasValue("deletePortalOptions")&&this.hasValue("sectionDeletePortal")){var r=new T.Section(this.getValue("sectionDeletePortal"));var o=new Ns({section:r,parent:this,options:this.getValue("deletePortalOptions")});o.renderTo(t)}}}]);return t}(I.BaseSettingsPage);function Ws(){var e=this;if(!this.hasValue("sectionDateFormat")){return}var t=new T.Section(this.getValue("sectionDateFormat"));var i=new I.SettingsSection({section:t,parent:this});if(this.hasValue("culture")){var a=new p.Selector(this.getValue("culture"));Us.addToSectionHelper(a,i,new T.Row({className:"--intranet-settings__mb-20"}));N.Event.bind(a.getInputNode(),"change",(function(t){babelHelpers.classPrivateFieldGet(e,ks).querySelector('[data-role="date"]').innerHTML=e.getValue("longDates")[t.target.value]}))}if(this.hasValue("isFormat24Hour")){var s=new p.InlineChecker(this.getValue("isFormat24Hour"));Us.addToSectionHelper(s,i);S.EventEmitter.subscribe(s,"change",(function(t){babelHelpers.classPrivateFieldGet(e,ks).querySelector('[data-role="time"]').innerHTML=s.isChecked()?e.getValue("format24HourTime"):e.getValue("format12HourTime")}))}return i}function xs(){if(!this.hasValue("sectionLetters")){return}var e=new T.Section(this.getValue("sectionLetters"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("trackOutMailsRead")){var i=new p.Checker(this.getValue("trackOutMailsRead"));var a=new T.Row({});Us.addToSectionHelper(i,t,a)}if(this.hasValue("trackOutMailsClick")){var s=new p.Checker(this.getValue("trackOutMailsClick"));var n=new T.Row({});Us.addToSectionHelper(s,t,n)}if(this.hasValue("defaultEmailFrom")){var l=new p.TextInput(this.getValue("defaultEmailFrom"));var r=new T.Row({});Us.addToSectionHelper(l,t,r)}return t}function Xs(){var e;if(!this.hasValue("sectionMapsInCrm")){return}var t=new T.Section(this.getValue("sectionMapsInCrm"));var i=new I.SettingsSection({section:t,parent:this});var a=new p.Selector({label:(e=this.getValue("mapsProviderCRM").label)!==null&&e!==void 0?e:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("mapsProviderCRM").name,items:this.getValue("mapsProviderCRM").values,current:this.getValue("mapsProviderCRM").current});var s=new T.Row({separator:"bottom",className:"--block"});Us.addToSectionHelper(a,i,s);var n=new T.SeparatorRow({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new I.SettingsRow({row:n,parent:i});var l=new BX.UI.Alert({text:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var r=new T.Row({separator:"top",content:l.getContainer(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});new I.SettingsRow({row:r,parent:i});var o=new p.TextInputInline({inputName:"API_KEY_FRONTEND",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC"),hintTitle:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_PUBLIC_HINT"),value:this.getValue("API_KEY_FRONTEND").value,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var c=new T.Row({isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Us.addToSectionHelper(o,i,c);var d=new p.TextInputInline({inputName:"API_KEY_BACKEND",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER"),hintTitle:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_GOOGLE_KEY_SERVER_HINT"),value:this.getValue("API_KEY_BACKEND").value,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var u=new T.Row({content:d.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM",separator:"bottom",className:"--block"});Us.addToSectionHelper(d,i,u);var b=new T.SeparatorRow({});new I.SettingsRow({row:b,parent:i});var v=new p.Checker({inputName:"SHOW_PHOTOS_ON_MAP",title:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_PHOTO_PLACES_MAPS"),hintOn:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("SHOW_PHOTOS_ON_MAP").value==="1"});var h=new T.Row({separator:"top",className:"--block",content:v.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Us.addToSectionHelper(v,i,h);var g=new p.Checker({inputName:"USE_GEOCODING_SERVICE",title:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SHOW_GEOCODING_SERVICE"),hintOn:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),hintOff:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HINT_SHOW_PHOTO_PLACES_MAPS_CLICK_ON"),checked:this.getValue("USE_GEOCODING_SERVICE").value==="1"});var _=new T.Row({content:g.render(),isHidden:this.getValue("mapsProviderCRM").current==="OSM"});Us.addToSectionHelper(g,i,_);a.getInputNode().addEventListener("change",(function(e){if(e.target.value==="OSM"){n.hide();r.hide();c.hide();u.hide();_.hide();h.hide()}else{n.show();r.show();c.show();u.show();_.show();h.show()}}));return i}function Ys(){if(!this.hasValue("sectionMapsInProduct")){return}var e=new T.Section(this.getValue("sectionMapsInProduct"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("cardsProviderProductProperties")){var i;var a=new p.Selector({label:(i=this.getValue("cardsProviderProductProperties").label)!==null&&i!==void 0?i:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CHOOSE_REGION_CRM_MAPS"),name:this.getValue("cardsProviderProductProperties").name,items:this.getValue("cardsProviderProductProperties").values,current:this.getValue("cardsProviderProductProperties").current});var s=new T.Row({separator:"bottom"});Us.addToSectionHelper(a,t,s);new I.SettingsRow({row:new T.SeparatorRow,parent:t});var n=new BX.UI.Alert({text:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_YANDEX_DESCRIPTION",{"#YANDEX_API_URL#":this.getValue("yandexApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var l=new T.Row({content:n.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});new I.SettingsRow({row:l,parent:t});var r=new p.TextInput({inputName:"yandexKeyProductProperties",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_YANDEX_KEY"),value:this.getValue("yandexKeyProductProperties"),placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var o=new T.Row({separator:"bottom",className:"--block",content:r.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="yandex"});Us.addToSectionHelper(r,t,o);var c=new BX.UI.Alert({text:N.Loc.getMessage("INTRANET_SETTINGS_SECTION_CRM_MAPS_DESCRIPTION",{"#GOOGLE_API_URL#":this.getValue("googleApiUrl")}),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var d=new T.Row({content:c.getContainer(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});new I.SettingsRow({row:d,parent:t});var u=new p.TextInput({inputName:"googleKeyProductProperties",label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_MAP_PRODUCT_PROPERTIES_GOOGLE_KEY"),value:this.getValue("googleKeyProductProperties"),placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_TEXT_KEY_PLACEHOLDER")});var b=new T.Row({content:u.render(),isHidden:this.getValue("cardsProviderProductProperties").current!=="google"});Us.addToSectionHelper(u,t,b);a.getInputNode().addEventListener("change",(function(e){if(e.target.value==="yandex"){l.show();o.show();d.hide();b.hide()}else{l.hide();o.hide();d.show();b.show()}}))}return t}function js(){var e=this;if(!this.hasValue("sectionOther")){return}var t=new T.Section(this.getValue("sectionOther"));var i=new I.SettingsSection({section:t,parent:this});if(this.hasValue("allowUserInstallApplication")){var a=new p.Checker(this.getValue("allowUserInstallApplication"));var s=new T.Row({});S.EventEmitter.subscribe(a.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(R.CHANGE_MARKET,a.isChecked())}));Us.addToSectionHelper(a,i,s)}if(this.hasValue("allCanBuyTariff")){var n;var l=N.Tag.render(Ls||(Ls=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE"));var r=new p.Checker({inputName:this.getValue("allCanBuyTariff").inputName,title:(n=this.getValue("allCanBuyTariff").title)!==null&&n!==void 0?n:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_ALL_CAN_BUY_TARIFF"),hintOn:this.getValue("allCanBuyTariff").hintOn,checked:this.getValue("allCanBuyTariff").checked,isEnable:this.getValue("allCanBuyTariff").isEnable,bannerCode:"limit_why_pay_tariff_everyone",helpMessageProvider:this.helpMessageProviderFactory(l)});var o=new T.Row({});S.EventEmitter.subscribe(r.switcher,"toggled",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventConfigConfiguration(R.CHANGE_PAY_TARIFF,r.isChecked())}));Us.addToSectionHelper(r,i,o)}if(this.hasValue("allowMeasureStressLevel")){var c=new p.Checker(this.getValue("allowMeasureStressLevel"));var d=new T.Row({});Us.addToSectionHelper(c,i,d)}if(this.hasValue("collectGeoData")){var u=new p.Checker(this.getValue("collectGeoData"));S.EventEmitter.subscribe(u.switcher,"toggled",(function(){Fs(e,zs,Ks).call(e,u)}));Us.addToSectionHelper(u,i)}return i}function Ks(e){if(e.isChecked()){BX.UI.Dialogs.MessageBox.show({modal:true,minWidth:640,title:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA"),message:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_CONFIRM"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COLLECT_GEO_DATA_OK"),onCancel:function t(){e.switcher.check(false);return true},onOk:function e(){return true}})}}var qs,Qs,$s;function Zs(e,t){Js(e,t);t.add(e)}function Js(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function en(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var tn=new WeakSet;var an=new WeakSet;var sn=new WeakSet;var nn=new WeakSet;var ln=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Zs(babelHelpers.assertThisInitialized(e),nn);Zs(babelHelpers.assertThisInitialized(e),sn);Zs(babelHelpers.assertThisInitialized(e),an);Zs(babelHelpers.assertThisInitialized(e),tn);e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SCHEDULE");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SCHEDULE");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"schedule"}},{key:"appendSections",value:function e(t){var i=en(this,an,on).call(this);i.renderTo(t);var a=en(this,sn,cn).call(this);a.renderTo(t)}}]);return t}(I.BaseSettingsPage);function rn(e){var t=new T.Row({className:"intranet-settings__work-time_container --no-padding"});var i=new I.SettingsRow({row:t,parent:e});if(this.hasValue("WORK_TIME_START")){var a=new p.Selector(this.getValue("WORK_TIME_START"));new I.SettingsRow({child:new I.SettingsField({fieldView:a}),parent:i,row:new T.Row({className:"intranet-settings__work-time_row"})})}new I.SettingsRow({row:new T.Row({className:"ui-section__field-inline-separator"}),parent:i});if(this.hasValue("WORK_TIME_END")){var s=new p.Selector(this.getValue("WORK_TIME_END"));new I.SettingsRow({child:new I.SettingsField({fieldView:s}),parent:i,row:new T.Row({className:"intranet-settings__work-time_row"})})}var n=N.Tag.render(qs||(qs=babelHelpers.taggedTemplateLiteral(["<div><div>"])));N.Dom.append(t.render(),n);if(this.hasValue("WEEK_DAYS")){var l;var r=new p.ItemPicker({inputName:this.getValue("WEEK_DAYS").inputName,isMulti:true,label:(l=this.getValue("WEEK_DAYS").label)!==null&&l!==void 0?l:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_WEEKEND"),items:this.getValue("WEEK_DAYS").values,current:this.getValue("WEEK_DAYS").multiValue});var o=new I.SettingsField({fieldView:r});var c=new T.Row({content:r.render()});new I.SettingsRow({row:c,child:o,parent:e});N.Dom.append(c.render(),n)}if(this.hasValue("WEEK_START")){var d=new p.ItemPicker(this.getValue("WEEK_START"));var u=new I.SettingsField({fieldView:d});N.Dom.addClass(d.render(),"--row-frame_gray");var b=new T.Row({content:d.render()});new I.SettingsRow({row:b,child:u,parent:e});N.Dom.append(b.render(),n)}return n}function on(){if(!this.hasValue("sectionSchedule")){return}var e=new T.Section(this.getValue("sectionSchedule"));var t=new I.SettingsSection({parent:this,section:e});var i=new I.SettingsRow({parent:t});var a=new I.TabsField({parent:i});var s=new I.TabField({parent:a,tabsOptions:this.getValue("tabForCompany")});en(this,tn,rn).call(this,s);if(this.getValue("TIMEMAN").enabled){var n=new I.TabField({parent:a,tabsOptions:this.getValue("tabForDepartment")});var l=new T.Row({content:en(this,nn,dn).call(this)});new I.SettingsRow({row:l,parent:n})}a.activateTab(s);return t}function cn(){var e,t,i,a;if(!this.hasValue("sectionHoliday")){return}var s=new T.Section(this.getValue("sectionHoliday"));var n=new I.SettingsSection({parent:this,section:s});var l=(e=(t=this.getValue("year_holidays"))===null||t===void 0?void 0:(i=t.value)===null||i===void 0?void 0:(a=i.match(/\d{1,2}.\d{1,2}/gm))===null||a===void 0?void 0:a.length)!==null&&e!==void 0?e:0;var r=N.Tag.render(Qs||(Qs=babelHelpers.taggedTemplateLiteral(['<div class="ui-section__field-label">',"</div>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":l}));var o=new T.Row({content:r});s.append(o.render());if(this.hasValue("year_holidays")){var c=new p.TextInput(this.getValue("year_holidays"));ln.addToSectionHelper(c,n);N.Event.bind(c.getInputNode(),"keyup",(function(){var e,t,i;var a=(e=c===null||c===void 0?void 0:(t=c.getInputNode().value)===null||t===void 0?void 0:(i=t.match(/\d{1,2}.\d{1,2}/gm))===null||i===void 0?void 0:i.length)!==null&&e!==void 0?e:0;r.innerHTML=N.Loc.getMessage("INTRANET_SETTINGS_FIELD_INFO",{"#COUNT_DAYS#":a})}))}return n}function dn(){return N.Tag.render($s||($s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__tab-info_container">\n\t\t\t\t<div class="intranet-settings__tab-info_text">','</div>\n\t\t\t\t<a href="/timeman/schedules/" class="ui-section__link" target="_blank">',"</a>\n\t\t\t</div>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS"),N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_FOR_DEPARTMENTS_CONFIG"))}var un;function bn(e,t){pn(e,t);t.add(e)}function pn(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function vn(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var hn=new WeakSet;var gn=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));bn(babelHelpers.assertThisInitialized(e),hn);e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_GDPR");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_GDPR");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"gdpr"}},{key:"appendSections",value:function e(t){var i=vn(this,hn,_n).call(this);i===null||i===void 0?void 0:i.renderTo(t)}},{key:"addApplicationsRender",value:function e(){if(this.hasValue("marketDirectory")){var t=this.getValue("marketDirectory");return N.Tag.render(un||(un=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="','detail/integrations24.gdprstaff/">\n\t\t\t\t\t\t','\n\t\t\t\t\t</a>\n\t\t\t\t\t<a class="ui-section__link" style="margin-left: 12px;" href="','detail/integrations24.gdpr/">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),t,N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_EMPLOYEE"),t,N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_APPLICATION_CRM"))}return null}}]);return t}(I.BaseSettingsPage);function _n(){if(!this.hasValue("sectionGdpr")){return}var e=new T.Section(this.getValue("sectionGdpr"));var t=new I.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_GDPR_DESCRIPTION"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=7608199\')">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),'\n\t\t\t\t</a>\n\t\t\t\t</br>\n\t\t\t\t<a class="ui-section__link" href="').concat(this.getValue("dpaLink"),'" target="_blank">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_BUTTON_GDPR_AGREEMENT"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new T.Row({content:i.getContainer()});new I.SettingsRow({row:a,parent:t});if(this.hasValue("companyTitle")){var s;var n=new p.TextInput({inputName:"companyTitle",label:(s=this.getValue("companyTitle").label)!==null&&s!==void 0?s:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_COMPANY_TITLE"),value:this.getValue("companyTitle").value,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_COMPANY_TITLE")});var l=new I.SettingsField({fieldView:n});new I.SettingsRow({parent:t,child:l})}if(this.hasValue("contactName")){var r;var o=new p.TextInput({inputName:"contactName",label:(r=this.getValue("contactName").label)!==null&&r!==void 0?r:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_CONTACT_NAME"),value:this.getValue("contactName").value,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_CONTACT_NAME")});var c=new I.SettingsField({fieldView:o});new I.SettingsRow({parent:t,child:c})}if(this.hasValue("notificationEmail")){var d;var u=new p.TextInput({inputName:"notificationEmail",label:(d=this.getValue("notificationEmail").label)!==null&&d!==void 0?d:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_NOTIFICATION_EMAIL"),value:this.getValue("notificationEmail").value,placeholder:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_PLACEHOLDER_NOTIFICATION_EMAIL")});var b=new I.SettingsField({fieldView:u});new I.SettingsRow({parent:t,child:b})}if(this.hasValue("date")){var v;var h=new p.TextInput({inputName:"date",label:(v=this.getValue("date").label)!==null&&v!==void 0?v:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_DATE"),value:this.getValue("date").value});N.Dom.adjust(h.render(),{events:{click:function e(t){BX.calendar({node:t.target,field:"date",form:"",bTime:false,bHideTime:true})}}});var g=new I.SettingsField({fieldView:h});new I.SettingsRow({parent:t,child:g})}new I.SettingsRow({row:new T.Row({content:this.addApplicationsRender()}),parent:t});return t}var Tn,En,fn,In,Sn,wn,mn,Nn,Hn;function Pn(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=An(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function An(e,t){if(!e)return;if(typeof e==="string")return Cn(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Cn(e,t)}function Cn(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function Ln(e,t){Gn(e,t);t.add(e)}function yn(e,t,i){Gn(e,t);t.set(e,i)}function Gn(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Rn(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Fn=new WeakMap;var kn=new WeakMap;var Mn=new WeakMap;var On=new WeakSet;var Dn=new WeakSet;var Bn=new WeakSet;var Vn=new WeakSet;var zn=new WeakSet;var Un=new WeakSet;var Wn=new WeakSet;var xn=new WeakSet;var Xn=new WeakSet;var Yn=new WeakSet;var jn=new WeakSet;var Kn=new WeakSet;var qn=new WeakSet;var Qn=new WeakSet;var $n=new WeakSet;var Zn=new WeakSet;var Jn=new WeakSet;var el=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ln(babelHelpers.assertThisInitialized(e),Jn);Ln(babelHelpers.assertThisInitialized(e),Zn);Ln(babelHelpers.assertThisInitialized(e),$n);Ln(babelHelpers.assertThisInitialized(e),Qn);Ln(babelHelpers.assertThisInitialized(e),qn);Ln(babelHelpers.assertThisInitialized(e),Kn);Ln(babelHelpers.assertThisInitialized(e),jn);Ln(babelHelpers.assertThisInitialized(e),Yn);Ln(babelHelpers.assertThisInitialized(e),Xn);Ln(babelHelpers.assertThisInitialized(e),xn);Ln(babelHelpers.assertThisInitialized(e),Wn);Ln(babelHelpers.assertThisInitialized(e),Un);Ln(babelHelpers.assertThisInitialized(e),zn);Ln(babelHelpers.assertThisInitialized(e),Vn);Ln(babelHelpers.assertThisInitialized(e),Bn);Ln(babelHelpers.assertThisInitialized(e),Dn);Ln(babelHelpers.assertThisInitialized(e),On);yn(babelHelpers.assertThisInitialized(e),Fn,{writable:true,value:void 0});yn(babelHelpers.assertThisInitialized(e),kn,{writable:true,value:void 0});yn(babelHelpers.assertThisInitialized(e),Mn,{writable:true,value:void 0});e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_SECURITY");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_DESCRIPTION_PAGE_SECURITY");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"security"}},{key:"appendSections",value:function e(t){var i,a,s;var n=this.hasValue("IS_BITRIX_24")&&this.getValue("IS_BITRIX_24");if(this.hasValue("SECURITY_OTP_ENABLED")&&this.getValue("SECURITY_OTP_ENABLED")){var l;(l=Rn(this,On,tl).call(this))===null||l===void 0?void 0:l.renderTo(t)}(i=Rn(this,Qn,pl).call(this))===null||i===void 0?void 0:i.renderTo(t);(a=Rn(this,$n,vl).call(this))===null||a===void 0?void 0:a.renderTo(t);(s=Rn(this,Jn,gl).call(this))===null||s===void 0?void 0:s.renderTo(t);if(n){var r,o;(r=Rn(this,Wn,rl).call(this))===null||r===void 0?void 0:r.renderTo(t);(o=Rn(this,Zn,hl).call(this))===null||o===void 0?void 0:o.renderTo(t)}}}]);return t}(I.BaseSettingsPage);function tl(){var e=this;if(!this.hasValue("sectionOtp")){return}var t=new T.Section(this.getValue("sectionOtp"));var i=new I.SettingsSection({section:t,parent:this});var a=new T.Row({content:Rn(this,zn,nl).call(this).getContainer()});new I.SettingsRow({row:a,parent:i});if(this.hasValue("SECURITY_OTP")&&this.hasValue("SEND_OTP_PUSH")){var s=new T.Row({content:Rn(this,Dn,il).call(this).render(),separator:Rn(this,Dn,il).call(this).isChecked()?"":"bottom",className:Rn(this,Dn,il).call(this).isChecked()?"":"--block"});new I.SettingsRow({row:s,parent:i});var n=new T.Row({content:Rn(this,Vn,sl).call(this).render(),isHidden:!Rn(this,Dn,il).call(this).isChecked()});new I.SettingsRow({row:n,parent:i});var l=N.Tag.render(Tn||(Tn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="settings-switcher-wrapper">\n\t\t\t\t\t<div class="settings-security-message-switcher"/>\n\t\t\t\t</div>\n\t\t\t'])));new p.SingleChecker({switcher:new v.Switcher({node:l.querySelector(".settings-security-message-switcher"),inputName:"SEND_OTP_PUSH",checked:this.getValue("SEND_OTP_PUSH"),size:v.SwitcherSize.small})});var r=new T.Row({content:l,isHidden:!Rn(this,Dn,il).call(this).isChecked()});l.append(N.Tag.render(En||(En=babelHelpers.taggedTemplateLiteral(['<span class="settings-switcher-title">',"</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_MESSAGE_CHAT")));new I.SettingsRow({row:r,parent:i});S.EventEmitter.subscribe(Rn(this,Dn,il).call(this).switcher,"toggled",(function(){if(e.getValue("SECURITY_IS_USER_OTP_ACTIVE")!==true&&Rn(e,Dn,il).call(e).isChecked()){Rn(e,Bn,al).call(e).show();Rn(e,Dn,il).call(e).cancel();Rn(e,Dn,il).call(e).switcher.check(false);return}if(e.hasValue("SECURITY_OTP_ENABLED")&&e.getValue("SECURITY_OTP_ENABLED")){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventToggle2fa(Rn(e,Dn,il).call(e).isChecked())}if(Rn(e,Dn,il).call(e).isChecked()){N.Dom.removeClass(s.render(),"--bottom-separator --block");n.show();r.show()}else{N.Dom.addClass(s.render(),"--bottom-separator --block");n.hide();r.hide()}}))}return i}function il(){if(babelHelpers.classPrivateFieldGet(this,Fn)instanceof p.Checker){return babelHelpers.classPrivateFieldGet(this,Fn)}if(this.hasValue("fieldSecurityOtp")){babelHelpers.classPrivateFieldSet(this,Fn,new p.Checker({inputName:this.getValue("fieldSecurityOtp").inputName,checked:this.getValue("fieldSecurityOtp").checked,title:this.getValue("fieldSecurityOtp").title,isEnable:this.getValue("fieldSecurityOtp").isEnable,hideSeparator:true,alignCenter:true,noMarginBottom:true}))}babelHelpers.classPrivateFieldGet(this,Fn).renderLockElement=function(){return null};return babelHelpers.classPrivateFieldGet(this,Fn)}function al(){var e=this;if(babelHelpers.classPrivateFieldGet(this,Mn)instanceof w.Popup){return babelHelpers.classPrivateFieldGet(this,Mn)}var t=N.Tag.render(fn||(fn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_info">\n\t\t\t\t',"\n\t\t\t</div>\t\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE"));var i=new BX.UI.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_POPUP_OTP_ENABLE_BUTTON"),color:BX.UI.Button.Color.PRIMARY,events:{click:function t(){Rn(e,Bn,al).call(e).close();BX.SidePanel.Instance.open(e.getValue("SECURITY_OTP_PATH"))}}});var a=N.Tag.render(In||(In=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__security_popup_container">\n\t\t\t\t','\n\t\t\t\t<div class="ui-btn-container ui-btn-container-center">\n\t\t\t\t\t',"\n\t\t\t\t</div>\t\t\t\n\t\t\t</div>\n\t\t"])),t,i.getContainer());babelHelpers.classPrivateFieldSet(this,Mn,new w.Popup({bindElement:babelHelpers.classPrivateFieldGet(this,Fn).getInputNode(),content:a,autoHide:true,width:337,angle:{offset:200-15},offsetLeft:babelHelpers.classPrivateFieldGet(this,Fn).getInputNode().offsetWidth-200+15,closeByEsc:true,borderRadius:18}));return babelHelpers.classPrivateFieldGet(this,Mn)}function sl(){if(babelHelpers.classPrivateFieldGet(this,kn)instanceof p.Selector){return babelHelpers.classPrivateFieldGet(this,kn)}babelHelpers.classPrivateFieldSet(this,kn,new p.Selector({label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_OTP_SWITCHING_PERIOD"),name:"SECURITY_OTP_DAYS",items:this.getValue("SECURITY_OTP_DAYS").ITEMS,current:this.getValue("SECURITY_OTP_DAYS").CURRENT}));return babelHelpers.classPrivateFieldGet(this,kn)}function nl(){return new BX.UI.Alert({text:Rn(this,Un,ll).call(this),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function ll(){return"\n\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_FIRST"),'\n\t\t</br></br>\n\t\t<span class="settings-section-description-focus-text --security-info">\n\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_SECOND"),'\n\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17728602\')">\n\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t</a>\n\t\t</span>")}function rl(){var e=this;if(!this.hasValue("sectionAccessIp")){return}var t=new T.Section(this.getValue("sectionAccessIp"));var i=new I.SettingsSection({section:t,parent:this});var a=new T.Row({content:Rn(this,Kn,bl).call(this).getContainer()});new I.SettingsRow({row:a,parent:i});var s=0;if(this.hasValue("IP_ACCESS_RIGHTS")){var n=Pn(this.getValue("IP_ACCESS_RIGHTS")),l;try{for(n.s();!(l=n.n()).done;){var r=l.value;s++;new I.SettingsRow({parent:i,child:Rn(this,Yn,dl).call(this,r)});new I.SettingsRow({parent:i,child:Rn(this,jn,ul).call(this,r)})}}catch(e){n.e(e)}finally{n.f()}}if(s===0){s++;new I.SettingsRow({parent:i,child:Rn(this,xn,ol).call(this,s)});new I.SettingsRow({parent:i,child:Rn(this,Xn,cl).call(this,s)})}var o=function t(){if(e.getValue("IP_ACCESS_RIGHTS_ENABLED")){s++;var i=new T.Row({content:Rn(e,xn,ol).call(e,s).render()});N.Dom.insertBefore(i.render(),c.parentElement);var a=new T.Row({content:Rn(e,Xn,cl).call(e,s).render()});N.Dom.insertBefore(a.render(),c.parentElement)}else{BX.UI.InfoHelper.show("limit_admin_ip")}};var c=N.Tag.render(Sn||(Sn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right">\n\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="','">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),o,N.Loc.getMessage("INTRANET_SETTINGS_ADDITIONAL_USER_ACCESS_IP"));new I.SettingsRow({row:new T.Row({content:c}),parent:i});return i}function ol(e){var t=new p.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e,"_USERS[]"),label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),enableDepartments:true,encodeValue:function e(t){if(!N.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new I.SettingsField({fieldView:t})}function cl(e){var t;var i="SECURITY_IP_ACCESS_".concat(e,"_IP");var a=new p.TextInput({inputName:i,label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!==null&&t!==void 0?t:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),isEnable:this.getValue("IP_ACCESS_RIGHTS_ENABLED"),helpMessageProvider:this.helpMessageProviderFactory(N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_PRO"))});return new I.SettingsField({fieldView:a})}function dl(e){var t;var i=new p.UserSelector({inputName:"SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_USERS[]"),label:(t=this.getValue("IP_ACCESS_RIGHTS_ENABLED_LABEL"))!==null&&t!==void 0?t:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_USER_ACCESS_IP"),values:Object.values(e.users),enableDepartments:true,encodeValue:function e(t){if(!N.Type.isNil(t.id)){return t.id==="all-users"?"AU":t.type+t.id.toString().split(":")[0]}return null},decodeValue:function e(t){if(t==="AU"){return{type:t,id:""}}var i=t.match(/^(U|DR|D)(\d+)/);if(!N.Type.isArray(i)){return{type:null,id:null}}return{type:i[1],id:i[2]}}});return new I.SettingsField({fieldView:i})}function ul(e){var t="SECURITY_IP_ACCESS_".concat(e.fieldNumber,"_IP");var i=new p.TextInput({inputName:t,label:N.Loc.getMessage("INTRANET_SETTINGS_FIELD_LABEL_SELECT_ACCEPTED_IP"),value:e.ip});return new I.SettingsField({fieldView:i})}function bl(){return new BX.UI.Alert({text:"\n\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_IP_ACCESS",{"#ARTICLE_CODE#":"redirect=detail&code=17300230"}),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17300230\')">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true})}function pl(){var e=this;if(!this.hasValue("sectionHistory")){return}var t=new T.Section(this.getValue("sectionHistory"));var i=new I.SettingsSection({section:t,parent:this});var a=new BX.UI.Alert({text:"\n\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_DEVICE_HISTORY"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=16623484\')">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var s=new T.Row({content:a.getContainer()});new I.SettingsRow({row:s,parent:i});if(this.hasValue("DEVICE_HISTORY_SETTINGS")){var n=N.Tag.render(wn||(wn=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_FIELD_HELP_MESSAGE_ENT",{"#TARIFF#":"ent250"}));var l=new p.Selector({label:this.getValue("DEVICE_HISTORY_SETTINGS").label,name:this.getValue("DEVICE_HISTORY_SETTINGS").name,items:this.getValue("DEVICE_HISTORY_SETTINGS").values,current:this.getValue("DEVICE_HISTORY_SETTINGS").current,isEnable:this.getValue("DEVICE_HISTORY_SETTINGS").isEnable,bannerCode:"limit_office_login_history",helpMessageProvider:this.helpMessageProviderFactory(n)});if(!this.getValue("DEVICE_HISTORY_SETTINGS").isEnable){N.Event.bind(l.getInputNode(),"click",(function(){var t;(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenHint(e.getValue("DEVICE_HISTORY_SETTINGS").name)}));N.Event.bind(n.querySelector("a"),"click",(function(){var t;return(t=e.getAnalytic())===null||t===void 0?void 0:t.addEventOpenTariffSelector(e.getValue("DEVICE_HISTORY_SETTINGS").name)}))}el.addToSectionHelper(l,i)}var r=N.Tag.render(mn||(mn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-text-right">\n\t\t\t\t<a class="ui-section__link" href="/company/" target="_blank">\n\t\t\t\t\t',"\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_GO_TO_USER_LIST_LINK"));new I.SettingsRow({row:new T.Row({content:r}),parent:i});return i}function vl(){if(!this.hasValue("sectionEventLog")){return}var e=new T.Section(this.getValue("sectionEventLog"));var t=new I.SettingsSection({section:e,parent:this});var i=new BX.UI.Alert({text:"\n\t\t\t\t".concat(N.Loc.getMessage("INTRANET_SETTINGS_SECTION_SECURITY_DESCRIPTION_EVENT_LOG"),'\n\t\t\t\t<a class="ui-section__link" onclick="top.BX.Helper.show(\'redirect=detail&code=17296266\')">\n\t\t\t\t\t').concat(N.Loc.getMessage("INTRANET_SETTINGS_CANCEL_MORE"),"\n\t\t\t\t</a>\n\t\t\t"),inline:true,size:BX.UI.Alert.Size.SMALL,color:BX.UI.Alert.Color.PRIMARY,animated:true});var a=new T.Row({content:i.getContainer()});new I.SettingsRow({row:a,parent:t});var s=this.hasValue("EVENT_LOG")?N.Tag.render(Nn||(Nn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="','" target="_blank">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),this.getValue("EVENT_LOG"),N.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK")):N.Tag.render(Hn||(Hn=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="ui-text-right">\n\t\t\t\t\t<a class="ui-section__link" href="javascript:void(0)" onclick="BX.UI.InfoHelper.show(\'limit_office_login_log\')">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_GO_TO_EVENT_LOG_LINK"));new I.SettingsRow({row:new T.Row({content:s}),parent:t});return t}function hl(){if(!this.hasValue("sectionBlackList")){return}var e=this.getValue("sectionBlackList");e["singleLink"]={href:"/settings/configs/mail_blacklist.php"};return new T.Section(e)}function gl(){if(!this.hasValue("sectionMobileApp")){return}var e=new T.Section(this.getValue("sectionMobileApp"));var t=new I.SettingsSection({section:e,parent:this});if(this.hasValue("switcherDisableCopy")){var i=new p.Checker(this.getValue("switcherDisableCopy"));el.addToSectionHelper(i,t)}if(this.hasValue("switcherDisableScreenshot")){var a=new p.Checker(this.getValue("switcherDisableScreenshot"));el.addToSectionHelper(a,t)}return t}var _l,Tl,El,fl,Il,Sl,wl,ml,Nl,Hl,Pl,Al,Cl,Ll,yl,Gl,Rl,Fl,kl,Ml,Ol,Dl;function Bl(e,t){zl(e,t);t.add(e)}function Vl(e,t,i){zl(e,t);t.set(e,i)}function zl(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ul(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Wl=new WeakMap;var xl=new WeakMap;var Xl=new WeakMap;var Yl=new WeakMap;var jl=new WeakMap;var Kl=new WeakMap;var ql=new WeakMap;var Ql=new WeakMap;var $l=new WeakMap;var Zl=new WeakMap;var Jl=new WeakMap;var er=new WeakMap;var tr=new WeakMap;var ir=new WeakMap;var ar=new WeakMap;var sr=new WeakMap;var nr=new WeakMap;var lr=new WeakMap;var rr=new WeakMap;var or=new WeakMap;var cr=new WeakMap;var dr=new WeakMap;var ur=new WeakMap;var br=new WeakMap;var pr=new WeakMap;var vr=new WeakMap;var hr=new WeakSet;var gr=new WeakSet;var _r=new WeakSet;var Tr=new WeakSet;var Er=new WeakSet;var fr=new WeakSet;var Ir=new WeakSet;var Sr=new WeakSet;var wr=new WeakSet;var mr=new WeakSet;var Nr=new WeakSet;var Hr=new WeakSet;var Pr=new WeakSet;var Ar=new WeakSet;var Cr=new WeakSet;var Lr=new WeakSet;var yr=new WeakSet;var Gr=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Bl(babelHelpers.assertThisInitialized(e),yr);Bl(babelHelpers.assertThisInitialized(e),Lr);Bl(babelHelpers.assertThisInitialized(e),Cr);Bl(babelHelpers.assertThisInitialized(e),Ar);Bl(babelHelpers.assertThisInitialized(e),Pr);Bl(babelHelpers.assertThisInitialized(e),Hr);Bl(babelHelpers.assertThisInitialized(e),Nr);Bl(babelHelpers.assertThisInitialized(e),mr);Bl(babelHelpers.assertThisInitialized(e),wr);Bl(babelHelpers.assertThisInitialized(e),Sr);Bl(babelHelpers.assertThisInitialized(e),Ir);Bl(babelHelpers.assertThisInitialized(e),fr);Bl(babelHelpers.assertThisInitialized(e),Er);Bl(babelHelpers.assertThisInitialized(e),Tr);Bl(babelHelpers.assertThisInitialized(e),_r);Bl(babelHelpers.assertThisInitialized(e),gr);Bl(babelHelpers.assertThisInitialized(e),hr);babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"titlePage","");babelHelpers.defineProperty(babelHelpers.assertThisInitialized(e),"descriptionPage","");Vl(babelHelpers.assertThisInitialized(e),Wl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),xl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Xl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Yl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),jl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Kl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),ql,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Ql,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),$l,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Zl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),Jl,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),er,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),tr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),ir,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),ar,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),sr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),nr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),lr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),rr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),or,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),cr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),dr,{writable:true,value:null});Vl(babelHelpers.assertThisInitialized(e),ur,{writable:true,value:false});Vl(babelHelpers.assertThisInitialized(e),br,{writable:true,value:false});Vl(babelHelpers.assertThisInitialized(e),pr,{writable:true,value:false});Vl(babelHelpers.assertThisInitialized(e),vr,{writable:true,value:true});e.titlePage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_PAGE_MAINPAGE");e.descriptionPage=N.Loc.getMessage("INTRANET_SETTINGS_TITLE_DESCRIPTION_PAGE_MAINPAGE");return e}babelHelpers.createClass(t,[{key:"getType",value:function e(){return"mainpage"}},{key:"appendSections",value:function e(t){var i,a,s,n,l;var r=this.getValue("main-page");babelHelpers.classPrivateFieldSet(this,Wl,r.urlCreate||null);babelHelpers.classPrivateFieldSet(this,xl,r.urlEdit||null);babelHelpers.classPrivateFieldSet(this,Xl,r.urlPublic||null);babelHelpers.classPrivateFieldSet(this,Yl,r.urlPartners||null);babelHelpers.classPrivateFieldSet(this,jl,r.urlImport||null);babelHelpers.classPrivateFieldSet(this,Kl,r.urlExport||null);babelHelpers.classPrivateFieldSet(this,ql,r.previewImg||null);babelHelpers.classPrivateFieldSet(this,$l,r.feedbackParams||null);babelHelpers.classPrivateFieldSet(this,ur,(i=r.isSiteExists)!==null&&i!==void 0?i:false);babelHelpers.classPrivateFieldSet(this,br,(a=r.isPageExists)!==null&&a!==void 0?a:false);babelHelpers.classPrivateFieldSet(this,pr,(s=r.isPublished)!==null&&s!==void 0?s:false);babelHelpers.classPrivateFieldSet(this,Ql,(n=r.title)!==null&&n!==void 0?n:null);babelHelpers.classPrivateFieldSet(this,vr,(l=r.isEnable)!==null&&l!==void 0?l:false);var o=new I.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});var c=new I.SettingsSection({parent:this,section:{canCollapse:false,isOpen:true}});var d=N.Tag.render(_l||(_l=babelHelpers.taggedTemplateLiteral(["<div>\t\t\n\t\t\t","\t\t\n\t\t</div>"])),Ul(this,hr,Rr).call(this));o.getSectionView().append(new T.Row({content:d}).render());if(babelHelpers.classPrivateFieldGet(this,br)){var u=N.Tag.render(Tl||(Tl=babelHelpers.taggedTemplateLiteral(["<div>\n\t\t\t\t","\t\t\t\n\t\t\t</div>"])),Ul(this,gr,Fr).call(this));c.getSectionView().append(new T.Row({content:u}).render())}Ul(this,Lr,Kr).call(this);Ul(this,yr,qr).call(this);c.renderTo(t);o.renderTo(t)}},{key:"getInfoTemplate",value:function e(){var t=this;this.infoTemplate=N.Tag.render(El||(El=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__main-page-info">\n\t\t\t\t<div class="intranet-settings__main-page-info-title">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="intranet-settings__main-page-info-subtitle">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_TITLE"),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUBTITLE"));N.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(function(e){var i=t.infoTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;t.warningHintPopup=new w.Popup({angle:true,autoHide:true,content:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_WARNING"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(i/2),bindOptions:{position:"top"},darkMode:true});t.warningHintPopup.show()}));N.Event.bind(this.infoTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(function(){if(t.warningHintPopup){setTimeout((function(){t.warningHintPopup.destroy();t.warningHintPopup=null}),300)}}));return this.infoTemplate}},{key:"getInfoSuccessTemplate",value:function e(){var t=this;this.infoSuccessTemplate=N.Tag.render(fl||(fl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="intranet-settings__main-page-info --success">\n\t\t\t\t<div class="intranet-settings__main-page-info-title">\n\t\t\t\t\t','\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div class="intranet-settings__main-page-info-subtitle">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="ui-icon-set --help intranet-settings__main-page-info-help"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_TITLE"),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_INFO_SUCCESS_SUBTITLE"));N.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseenter",(function(e){var i=t.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help").offsetWidth;t.successHintPopup=new w.Popup({angle:true,autoHide:true,content:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_HINT_SUCCESS"),cacheable:false,animation:"fading-slide",bindElement:e.target,offsetTop:0,offsetLeft:parseInt(i/2),bindOptions:{position:"top"},darkMode:true});t.successHintPopup.show()}));N.Event.bind(this.infoSuccessTemplate.querySelector(".intranet-settings__main-page-info-help"),"mouseleave",(function(){if(t.successHintPopup){setTimeout((function(){t.successHintPopup.destroy();t.successHintPopup=null}),300)}}));return this.infoSuccessTemplate}},{key:"renderLockElement",value:function e(){return N.Tag.render(Il||(Il=babelHelpers.taggedTemplateLiteral(['<span class="intranet-settings-mp-icon ui-icon-set --lock"></span>'])))}}]);return t}(I.BaseSettingsPage);function Rr(){if(!babelHelpers.classPrivateFieldGet(this,ar)){babelHelpers.classPrivateFieldSet(this,ar,N.Tag.render(Sl||(Sl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__main-page-template">\n\t\t\t\t\t<div class="intranet-settings__main-page-icon-box">\n\t\t\t\t\t\t<div class="intranet-settings__main-page-icon"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__main-page-content">\n\t\t\t\t\t\t<ul class="intranet-settings__main-page-list">\n\t\t\t\t\t\t\t<li class="intranet-settings__main-page-list-item">\n\t\t\t\t\t\t\t\t<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-page-list-name">\n\t\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__main-page-list-item">\n\t\t\t\t\t\t\t\t<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-page-list-name">\n\t\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t<li class="intranet-settings__main-page-list-item">\n\t\t\t\t\t\t\t\t<div class="ui-icon-set --check intranet-settings__main-page-list-icon"></div>\n\t\t\t\t\t\t\t\t<div class="intranet-settings__main-page-list-name">\n\t\t\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div class="intranet-settings__main-page-button-box">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<div class="intranet-settings__main-page-button-box-right">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_1"),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_2"),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_LIST_ITEM_3"),Ul(this,Cr,jr).call(this),Ul(this,Ar,Yr).call(this),Ul(this,_r,kr).call(this)))}return babelHelpers.classPrivateFieldGet(this,ar)}function Fr(){if(!babelHelpers.classPrivateFieldGet(this,sr)){var e;var t=babelHelpers.classPrivateFieldGet(this,ql)?N.Tag.render(wl||(wl=babelHelpers.taggedTemplateLiteral(['<img \n\t\t\t\t\t\tsrc="','"\n\t\t\t\t\t\tclass="intranet-settings__main-page-preview" \n\t\t\t\t\t/>'])),babelHelpers.classPrivateFieldGet(this,ql)):"";babelHelpers.classPrivateFieldSet(this,sr,N.Tag.render(ml||(ml=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="intranet-settings__main-page-template --secondary-template">\n\t\t\t\t\t<div class="intranet-settings__main-page-preview-box">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="intranet-settings__main-page-content">\n\t\t\t\t\t\t<div class="intranet-settings__main-page-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="intranet-settings__main-page-info-template">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\t\t\t\t\t\n\t\t\t\t\t\t<div class="intranet-settings__main-page-button-box">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t\t<div class="intranet-settings__main-page-button-box-right">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t\t","\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\t\t\n\t\t\t"])),t,(e=babelHelpers.classPrivateFieldGet(this,Ql))!==null&&e!==void 0?e:"",babelHelpers.classPrivateFieldGet(this,pr)?this.getInfoSuccessTemplate():this.getInfoTemplate(),Ul(this,Nr,Wr).call(this),babelHelpers.classPrivateFieldGet(this,pr)&&babelHelpers.classPrivateFieldGet(this,vr)?Ul(this,Pr,Xr).call(this):Ul(this,Hr,xr).call(this),Ul(this,Tr,Mr).call(this)))}return babelHelpers.classPrivateFieldGet(this,sr)}function kr(){if(!babelHelpers.classPrivateFieldGet(this,nr)){babelHelpers.classPrivateFieldSet(this,nr,N.Tag.render(Nl||(Nl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="intranet-settings-btn-settings">\n\t\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t\t</button>\n\t\t\t']))))}return babelHelpers.classPrivateFieldGet(this,nr)}function Mr(){if(!babelHelpers.classPrivateFieldGet(this,lr)){babelHelpers.classPrivateFieldSet(this,lr,N.Tag.render(Hl||(Hl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<button class="intranet-settings-btn-settings">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</button>']))))}return babelHelpers.classPrivateFieldGet(this,lr)}function Or(){var e;if(!babelHelpers.classPrivateFieldGet(this,rr)){var t=babelHelpers.classPrivateFieldGet(this,vr)?N.Tag.render(Pl||(Pl=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP")):N.Tag.render(Al||(Al=babelHelpers.taggedTemplateLiteral(['<span class="intranet-settings-mp-popup-item">'," ","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldSet(this,rr,new w.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldGet(this,nr),className:babelHelpers.classPrivateFieldGet(this,vr)?"":"--disabled",items:[{id:"importPopup",html:t,onclick:Ul(this,Ir,Br).bind(this)}],offsetLeft:20,events:{onPopupClose:function e(){},onPopupShow:function e(){}}}))}(e=babelHelpers.classPrivateFieldGet(this,rr))===null||e===void 0?void 0:e.show()}function Dr(){var e;if(!babelHelpers.classPrivateFieldGet(this,or)){var t=babelHelpers.classPrivateFieldGet(this,vr)?N.Tag.render(Cl||(Cl=babelHelpers.taggedTemplateLiteral(["<span>","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP")):N.Tag.render(Ll||(Ll=babelHelpers.taggedTemplateLiteral(['<span class="intranet-settings-mp-popup-item --disabled">'," ","</span>"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_EXPORT_POPUP"),this.renderLockElement());babelHelpers.classPrivateFieldSet(this,or,new w.Menu({angle:true,animation:"fading-slide",bindElement:babelHelpers.classPrivateFieldGet(this,lr),className:babelHelpers.classPrivateFieldGet(this,vr)?"":"--disabled",items:[{id:"exportPopup",html:t,onclick:Ul(this,Sr,Vr).bind(this)}],offsetLeft:20,events:{onPopupClose:function e(){},onPopupShow:function e(){}}}))}(e=babelHelpers.classPrivateFieldGet(this,or))===null||e===void 0?void 0:e.show()}function Br(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,vr)){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldGet(this,jl)){var t=function t(){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,jl),{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})};if(!babelHelpers.classPrivateFieldGet(this,br)){t();return}BX.Runtime.loadExtension("ui.dialogs.messagebox").then((function(){var e=new BX.UI.Dialogs.MessageBox({message:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_MESSAGE"),title:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_TITLE"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,okCaption:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_OK_BUTTON"),cancelCaption:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_IMPORT_POPUP_MESSAGEBOX_CANCEL_BUTTON"),onOk:function e(){t();return true},onCancel:function e(){return true}});e.show();if(e.popupWindow&&e.popupWindow.popupContainer){e.popupWindow.popupContainer.classList.add("intranet-settings__main-page-popup")}}))}}function Vr(){if(!babelHelpers.classPrivateFieldGet(this,vr)){BX.UI.InfoHelper.show("limit_office_vibe");return}if(typeof BX.SidePanel==="undefined"){return}if(typeof BX.SidePanel!=="undefined"&&babelHelpers.classPrivateFieldGet(this,Kl)){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(this,Kl),{width:491,allowChangeHistory:false,cacheable:false,data:{rightBoundary:0}})}}function zr(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,cr)){var t;babelHelpers.classPrivateFieldSet(this,cr,new w.Popup({titleBar:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_TITLE_MSGVER_1"),content:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_CONTENT"),width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_SHARE_POPUP_BTN_CONFIRM"),color:g.Button.Color.PRIMARY,onclick:function t(){var i=e.getInfoSuccessTemplate();var a=babelHelpers.classPrivateFieldGet(e,sr).querySelector(".intranet-settings__main-page-info-template");var s=a.querySelector(".intranet-settings__main-page-info:not(.--success)");N.Dom.replace(s,i);N.ajax.runAction("intranet.mainpage.publish").then((function(){e.emit("publish");if(babelHelpers.classPrivateFieldGet(e,Xl)){babelHelpers.classPrivateFieldSet(e,pr,true)}}));babelHelpers.classPrivateFieldGet(e,cr).close();BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"success"})}}),new g.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:function t(){babelHelpers.classPrivateFieldGet(e,cr).close()}})],events:{onClose:function e(){}}}));(t=babelHelpers.classPrivateFieldGet(this,cr))===null||t===void 0?void 0:t.show()}else{var i;(i=babelHelpers.classPrivateFieldGet(this,cr))===null||i===void 0?void 0:i.show()}}function Ur(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,dr)){var t;babelHelpers.classPrivateFieldSet(this,dr,new w.Popup({titleBar:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_TITLE"),content:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_CONTENT"),width:350,closeIcon:true,closeByEsc:true,animation:"fading-slide",buttons:[new g.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_WITHDRAW_POPUP_BTN_CONFIRM"),color:g.Button.Color.DANGER_DARK,onclick:function t(){var i=e.getInfoTemplate();var a=babelHelpers.classPrivateFieldGet(e,sr).querySelector(".intranet-settings__main-page-info-template");var s=a.querySelector(".intranet-settings__main-page-info");N.Dom.replace(s,i);N.ajax.runAction("intranet.mainpage.withdraw").then((function(){e.emit("withdraw");babelHelpers.classPrivateFieldSet(e,pr,false)}));babelHelpers.classPrivateFieldGet(e,dr).close();BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"unpublish_page",c_sub_section:"from_settings"})}}),new g.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_POPUP_BTN_CANCEL"),color:g.Button.Color.LIGHT_BORDER,onclick:function t(){babelHelpers.classPrivateFieldGet(e,dr).close()}})],events:{onClose:function e(){}}}));(t=babelHelpers.classPrivateFieldGet(this,dr))===null||t===void 0?void 0:t.show()}else{var i;(i=babelHelpers.classPrivateFieldGet(this,dr))===null||i===void 0?void 0:i.show()}}function Wr(){if(!babelHelpers.classPrivateFieldGet(this,xl)){return null}if(!babelHelpers.classPrivateFieldGet(this,Zl)){babelHelpers.classPrivateFieldSet(this,Zl,N.Tag.render(yl||(yl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-blue">\n\t\t\t\t\t',"\n\t\t\t\t</button>"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_EDIT")))}return babelHelpers.classPrivateFieldGet(this,Zl)}function xr(){if(!babelHelpers.classPrivateFieldGet(this,ir)){var e=N.Tag.render(Gl||(Gl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps\n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"));var t=N.Tag.render(Rl||(Rl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled\n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</button>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PUBLIC"),this.renderLockElement());babelHelpers.classPrivateFieldSet(this,ir,babelHelpers.classPrivateFieldGet(this,vr)?e:t)}return babelHelpers.classPrivateFieldGet(this,ir)}function Xr(){if(!babelHelpers.classPrivateFieldGet(this,tr)){var e=N.Tag.render(Fl||(Fl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps\n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_UNPUBLIC"));var t=N.Tag.render(kl||(kl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled\n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</button>\n\t\t\t"])),babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_UNPUBLIC"),this.renderLockElement());babelHelpers.classPrivateFieldSet(this,tr,babelHelpers.classPrivateFieldGet(this,vr)?e:t)}return babelHelpers.classPrivateFieldGet(this,tr)}function Yr(){if(!babelHelpers.classPrivateFieldGet(this,Yl)){return null}if(!babelHelpers.classPrivateFieldGet(this,Jl)){babelHelpers.classPrivateFieldSet(this,Jl,N.Tag.render(Ml||(Ml=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --light-gray">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS")))}return babelHelpers.classPrivateFieldGet(this,Jl)}function jr(){if(!babelHelpers.classPrivateFieldGet(this,Wl)){return null}if(!babelHelpers.classPrivateFieldGet(this,er)){var e=N.Tag.render(Ol||(Ol=babelHelpers.taggedTemplateLiteral(['\t\t\t\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps \n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t"])),!babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"));var t=N.Tag.render(Dl||(Dl=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<button class="ui-btn ui-btn-md ui-btn-round ui-btn-no-caps --disabled\n\t\t\t\t\t\t','">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</button>\n\t\t\t"])),!babelHelpers.classPrivateFieldGet(this,br)?"ui-btn-primary":"--light-blue",N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_MARKET"),this.renderLockElement());babelHelpers.classPrivateFieldSet(this,er,babelHelpers.classPrivateFieldGet(this,vr)?e:t)}return babelHelpers.classPrivateFieldGet(this,er)}function Kr(){var e=this;if(typeof BX.SidePanel==="undefined"){return}N.Event.bind(Ul(this,_r,kr).call(this),"click",Ul(this,Er,Or).bind(this));N.Event.bind(Ul(this,Tr,Mr).call(this),"click",Ul(this,fr,Dr).bind(this));if(Ul(this,Cr,jr).call(this)){N.Event.bind(Ul(this,Cr,jr).call(this),"click",(function(){if(babelHelpers.classPrivateFieldGet(e,vr)){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,Wl))}else{BX.UI.InfoHelper.show("limit_office_vibe")}BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"open_market",status:babelHelpers.classPrivateFieldGet(e,vr)?"success":"error_limit"})}))}if(Ul(this,Nr,Wr).call(this)){N.Event.bind(Ul(this,Nr,Wr).call(this),"click",(function(){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(e,xl),{customLeftBoundary:66,events:{onCloseComplete:function t(){if(babelHelpers.classPrivateFieldGet(e,Xl)){window.top.location=babelHelpers.classPrivateFieldGet(e,Xl)}}}});BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"open_editor"})}))}if(Ul(this,Ar,Yr).call(this)){N.Event.bind(Ul(this,Ar,Yr).call(this),"click",(function(){if(!babelHelpers.classPrivateFieldGet(e,$l)){return}N.Runtime.loadExtension("ui.feedback.form").then((function(){babelHelpers.classPrivateFieldGet(e,$l).title=N.Loc.getMessage("INTRANET_SETTINGS_MAINPAGE_BUTTON_PARTNERS");BX.UI.Feedback.Form.open(babelHelpers.classPrivateFieldGet(e,$l))}))}))}this.subscribe("publish",(function(){N.Dom.replace(Ul(e,Hr,xr).call(e),Ul(e,Pr,Xr).call(e))}));this.subscribe("withdraw",(function(){N.Dom.replace(Ul(e,Pr,Xr).call(e),Ul(e,Hr,xr).call(e))}));N.Event.bind(Ul(this,Hr,xr).call(this),"click",(function(){if(!babelHelpers.classPrivateFieldGet(e,vr)){BX.UI.InfoHelper.show("limit_office_vibe");BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"publish_page",c_sub_section:"from_settings",status:"error_limit"});return}Ul(e,wr,zr).call(e)}));N.Event.bind(Ul(this,Pr,Xr).call(this),"click",Ul(this,mr,Ur).bind(this))}function qr(){var e=this;var t=babelHelpers.classPrivateFieldGet(this,pr);S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",(function(){if(babelHelpers.classPrivateFieldGet(e,pr)!==t){var i=babelHelpers.classPrivateFieldGet(e,pr)?babelHelpers.classPrivateFieldGet(e,Xl):"/";window.top.location=i}}))}function Qr(e,t,i){$r(e,t);t.set(e,i)}function $r(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Zr=new WeakMap;var Jr=new WeakMap;var eo=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Qr(babelHelpers.assertThisInitialized(a),Zr,{writable:true,value:void 0});Qr(babelHelpers.assertThisInitialized(a),Jr,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Zr,e);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),Jr,i);return a}babelHelpers.createClass(t,[{key:"getType",value:function e(){return babelHelpers.classPrivateFieldGet(this,Zr)}},{key:"onSuccessDataFetched",value:function e(t){var i=this;N.Runtime.loadExtension(babelHelpers.classPrivateFieldGet(this,Jr)).then((function(e){var a;var s=Object.values(e).some((function(e){if(N.Type.isObjectLike(e)){var t=null;if(e.prototype instanceof I.BaseSettingsPage){t=new e}else if(e instanceof I.BaseSettingsPage){t=e}if(t instanceof I.BaseSettingsPage){a=t;return true}}return false}));if(s===false){var n=new S.BaseEvent;s=S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onExternalPageLoaded:"+i.getType(),n).some((function(e){if(e instanceof I.BaseSettingsPage){a=e;return true}return false}))}if(a instanceof I.BaseSettingsPage){i.getParentElement().registerPage(a);a.setData(t.data);i.getParentElement().removeChild(i);if(N.Dom.isShown(i.getPage())){a.getParentElement().show(a.getType())}}else{i.onFailDataFetched("The external page was not found.")}}),this.onFailDataFetched.bind(this))}}]);return t}(I.BaseSettingsPage);function to(e,t,i){io(e,t);t.set(e,i)}function io(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ao=new WeakMap;var so=function(){function e(t){babelHelpers.classCallCheck(this,e);to(this,ao,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ao,t)}babelHelpers.createClass(e,[{key:"fetchPage",value:function e(t){var i=this;return new Promise((function(e,a){var s=babelHelpers.classPrivateFieldGet(i,ao).some((function(i){if(t.getType()===i.getType()){N.ajax.runComponentAction("bitrix:intranet.settings","get",{mode:"class",data:{type:t.getType()}}).then(e,a);return true}return false}));if(s!==true){return a({error:"The page was not found in pageManager"})}}))}},{key:"collectData",value:function e(){var t=this;var i={};babelHelpers.classPrivateFieldGet(this,ao).forEach((function(e){if(e.hasData()){i[e.getType()]=t.constructor.getFormData(e.getFormNode())}}));return i}}],[{key:"getFormData",value:function e(t){return BX.ajax.prepareForm(t).data}}]);return e}();var no=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"fetch",value:function e(t){return new Promise}}]);return e}();function lo(e,t,i){ro(e,t);t.set(e,i)}function ro(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var oo=new WeakMap;var co=new WeakMap;var uo=new WeakMap;var bo=new WeakMap;var po=new WeakMap;var vo=function(){function e(t){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;babelHelpers.classCallCheck(this,e);lo(this,oo,{writable:true,value:void 0});lo(this,co,{writable:true,value:void 0});lo(this,uo,{writable:true,value:void 0});lo(this,bo,{writable:true,value:void 0});lo(this,po,{writable:true,value:void 0});if(!(t instanceof no)){throw new Error("Unexpected type, expect: DataSource")}babelHelpers.classPrivateFieldSet(this,uo,t);babelHelpers.classPrivateFieldSet(this,co,i);babelHelpers.classPrivateFieldSet(this,bo,[]);babelHelpers.classPrivateFieldSet(this,po,"ready")}babelHelpers.createClass(e,[{key:"find",value:function t(i){if(i.length<babelHelpers.classPrivateFieldGet(this,co)){return}babelHelpers.classPrivateFieldSet(this,oo,i);this.changeState(e.STATE_WAIT);babelHelpers.classPrivateFieldGet(this,uo).fetch(babelHelpers.classPrivateFieldGet(this,oo)).then(this.resolve.bind(this),this.reject.bind(this))}},{key:"changeState",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,po)===t){return}babelHelpers.classPrivateFieldSet(this,po,t);S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:searchChangeState",{state:babelHelpers.classPrivateFieldGet(this,po)})}},{key:"getMinSymbol",value:function e(){return babelHelpers.classPrivateFieldGet(this,co)}},{key:"resolve",value:function t(i){babelHelpers.classPrivateFieldSet(this,bo,i.data);this.changeState(babelHelpers.classPrivateFieldGet(this,bo).length>0?e.STATE_READY:e.STATE_NOT_FOUND)}},{key:"reject",value:function t(i){babelHelpers.classPrivateFieldSet(this,bo,[]);this.changeState(e.STATE_READY)}},{key:"getResult",value:function e(){return babelHelpers.classPrivateFieldGet(this,bo)}},{key:"getOthers",value:function e(){return[{link:"/stream/",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TEAMWORK")},{link:"/tasks/config/permissions/",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_TASKS")},{link:"/crm/configs/",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_CRM")},{link:"/shop/documents/?inventoryManagementSource=inventory",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_WAREHOUSE")},{link:"/sites/",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_SITES")},{link:"/company/vis_structure.php",title:N.Loc.getMessage("INTRANET_SETTINGS_TITLE_TOOL_COMPANY")}]}}]);return e}();babelHelpers.defineProperty(vo,"STATE_READY","ready");babelHelpers.defineProperty(vo,"STATE_WAIT","wait");babelHelpers.defineProperty(vo,"STATE_NOT_FOUND","not_found");var ho,go,_o,To,Eo,fo,Io,So,wo,mo,No,Ho,Po,Ao,Co;function Lo(e,t,i){yo(e,t);t.set(e,i)}function yo(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Go=new WeakMap;var Ro=new WeakMap;var Fo=new WeakMap;var ko=new WeakMap;var Mo=new WeakMap;var Oo=new WeakMap;var Do=new WeakMap;var Bo=function(){function e(t){var i=this;babelHelpers.classCallCheck(this,e);Lo(this,Go,{writable:true,value:void 0});Lo(this,Ro,{writable:true,value:void 0});Lo(this,Fo,{writable:true,value:void 0});Lo(this,ko,{writable:true,value:void 0});Lo(this,Mo,{writable:true,value:void 0});Lo(this,Oo,{writable:true,value:void 0});Lo(this,Do,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Go,t.searcher);babelHelpers.classPrivateFieldSet(this,Ro,t.inputNode);babelHelpers.classPrivateFieldSet(this,Fo,t.iconContainer);babelHelpers.classPrivateFieldSet(this,Oo,t.timeout);babelHelpers.classPrivateFieldSet(this,Do,new Uo);babelHelpers.classPrivateFieldSet(this,ko,new w.Popup("settings-search-popup",babelHelpers.classPrivateFieldGet(this,Ro),{closeByEsc:true,angle:false,overlay:false,width:332,offsetTop:4,background:"#fff",contentBackground:"#fff",contentPadding:0,autoHide:true,borderRadius:6,autoHideHandler:function e(t){return t.target!==babelHelpers.classPrivateFieldGet(i,Ro)}}));babelHelpers.classPrivateFieldGet(this,ko).setContent(this.renderContent());N.Event.bind(babelHelpers.classPrivateFieldGet(this,Ro),"focus",(function(){if(!babelHelpers.classPrivateFieldGet(i,ko).isShown()){babelHelpers.classPrivateFieldGet(i,ko).show()}}));S.EventEmitter.subscribe("BX.Intranet.Settings:searchChangeState",(function(e){var t=e.data.state;babelHelpers.classPrivateFieldGet(i,Do).clean();babelHelpers.classPrivateFieldGet(i,ko).setContent(i.renderContent(t))}));N.Event.bind(babelHelpers.classPrivateFieldGet(this,Fo).querySelector("#intranet-settings-icon-delete"),"click",(function(){N.Dom.removeClass(babelHelpers.classPrivateFieldGet(i,Fo),"main-ui-show");babelHelpers.classPrivateFieldGet(i,Ro).value=""}));N.Event.bind(babelHelpers.classPrivateFieldGet(this,Ro),"keyup",(function(e){if(e.keyCode===37||e.keyCode===39){return}if(e.keyCode===13){babelHelpers.classPrivateFieldGet(i,Do).current().dispatchEvent(new MouseEvent("click"));babelHelpers.classPrivateFieldGet(i,Do).unHighlightAll();return}if(e.keyCode===38){babelHelpers.classPrivateFieldGet(i,Do).prev().highlight();if(!N.Type.isNil(babelHelpers.classPrivateFieldGet(i,Do).current())){i.updateScroll(babelHelpers.classPrivateFieldGet(i,Do).current())}return}if(e.keyCode===40){babelHelpers.classPrivateFieldGet(i,Do).next().highlight();if(!N.Type.isNil(babelHelpers.classPrivateFieldGet(i,Do).current())){i.updateScroll(babelHelpers.classPrivateFieldGet(i,Do).current())}return}if(i.getQuery().length>0){N.Dom.addClass(babelHelpers.classPrivateFieldGet(i,Fo),"main-ui-show")}else{N.Dom.removeClass(babelHelpers.classPrivateFieldGet(i,Fo),"main-ui-show")}if(!babelHelpers.classPrivateFieldGet(i,ko).isShown()&&i.getQuery().length>0){babelHelpers.classPrivateFieldGet(i,ko).show()}i.find()}))}babelHelpers.createClass(e,[{key:"updateScroll",value:function e(t){var i=t.getBoundingClientRect();var a=babelHelpers.classPrivateFieldGet(this,ko).getContentContainer().firstElementChild;var s=i.top-a.getBoundingClientRect().top;var n=i.bottom-a.getBoundingClientRect().bottom;var l=10;if(s<0&&n<=0){a.scrollTo(0,s+a.scrollTop-l)}else if(s>=0&&n>0){a.scrollTo(0,n+a.scrollTop+l)}}},{key:"renderWait",value:function e(){var t=N.Tag.render(ho||(ho=babelHelpers.taggedTemplateLiteral(['<span class="title-search-waiter-img"></span>'])));var i=new m.Loader({target:t,size:20,mode:"inline"});i.show();return N.Tag.render(go||(go=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="title-search-waiter">\n\t\t\t\t','\n\t\t\t\t<span class="title-search-waiter-text">',"</span>\n\t\t\t</div>\n\t\t"])),t,N.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCHING"))}},{key:"find",value:function e(){var t=this;clearTimeout(babelHelpers.classPrivateFieldGet(this,Mo));babelHelpers.classPrivateFieldSet(this,Mo,setTimeout((function(){babelHelpers.classPrivateFieldGet(t,Go).find(t.getQuery())}),babelHelpers.classPrivateFieldGet(this,Oo)))}},{key:"getQuery",value:function e(){return BX.util.trim(babelHelpers.classPrivateFieldGet(this,Ro).value)}},{key:"createLinkOption",value:function e(t){var i=this;var a=N.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:function e(t){babelHelpers.classPrivateFieldGet(i,Do).unHighlightAll();babelHelpers.classPrivateFieldGet(i,Do).cursorTo(t.target);Uo.highlight(t.target)},mouseleave:function e(t){Uo.unHighlight(t.target)}},attrs:{title:t.title,href:N.Type.isStringFilled(t.url)?t.url:"#",target:"_blank"},children:[N.Tag.render(_o||(_o=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),t.title)]});babelHelpers.classPrivateFieldGet(this,Do).add(a);return a}},{key:"createBtnOption",value:function e(t,i){var a=this;var s=N.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{click:function e(s){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.SettingsNavigation:onMove",{page:t,fieldName:i.code});babelHelpers.classPrivateFieldGet(a,Ro).blur();babelHelpers.classPrivateFieldGet(a,ko).close();s.preventDefault()},mouseenter:function e(t){babelHelpers.classPrivateFieldGet(a,Do).unHighlightAll();babelHelpers.classPrivateFieldGet(a,Do).cursorTo(t.target);Uo.highlight(t.target)},mouseleave:function e(t){Uo.unHighlight(t.target)}},attrs:{title:i.title,href:"#"},children:[N.Tag.render(To||(To=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),i.title)]});babelHelpers.classPrivateFieldGet(this,Do).add(s);return N.Tag.render(Eo||(Eo=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-item search-title-top-item-js">',"</div>"])),s)}},{key:"renderOption",value:function t(i,a){var s;if(i===e.EXTERNAL_LINK){s=this.createLinkOption(a)}else{s=this.createBtnOption(i,a)}return N.Tag.render(fo||(fo=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-item search-title-top-item-js">',"</div>"])),s)}},{key:"renderGroup",value:function e(t){var i=this;var a=N.Tag.render(Io||(Io=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-list search-title-top-list-js"></div>'])));t.options.forEach((function(e){N.Dom.append(i.renderOption(t.page,e),a)}));return N.Tag.render(So||(So=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="search-title-top-block search-title-top-block-sonetgroups">\n\t\t\t\t<div class="search-title-top-subtitle">\n\t\t\t\t\t<div class="search-title-top-subtitle-text">','</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="search-title-top-list-wrap">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t.title,a)}},{key:"renderContent",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"ready";var i=N.Tag.render(wo||(wo=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-result"></div>'])));switch(t){case"ready":N.Dom.append(this.renderSearchResult(babelHelpers.classPrivateFieldGet(this,Go).getResult()),i);break;case"wait":N.Dom.append(this.renderWait(),i);break;case"not_found":N.Dom.append(this.renderNotFound(),i);break}N.Dom.append(this.renderOthers(babelHelpers.classPrivateFieldGet(this,Go).getOthers()),i);return i}},{key:"renderNotFound",value:function e(){return N.Tag.render(mo||(mo=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="title-search-waiter">\n\t\t\t\t<span class="title-search-waiter-text">',"</span>\n\t\t\t</div>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_SEARCH_NOT_FOUND"))}},{key:"renderSearchResult",value:function e(t){var i=this;var a=N.Tag.render(No||(No=babelHelpers.taggedTemplateLiteral(['<div class="search-title-content-result"></div>'])));t.forEach((function(e){N.Dom.append(i.renderGroup(e),a)}));return a}},{key:"renderOthers",value:function e(t){var i=this;var a=N.Tag.render(Ho||(Ho=babelHelpers.taggedTemplateLiteral(['<div class="search-title-top-list search-title-top-list-js"></div>'])));var s=N.Tag.render(Po||(Po=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="search-title-top-block search-title-top-block-tools">\n\t\t\t<div class="search-title-top-subtitle">\n\t\t\t\t<div class="search-title-top-subtitle-text">','</div>\n\t\t\t</div>\n\t\t\t<div class="search-title-top-list-height-wrap">\n\t\t\t\t\t<div class="search-title-top-list-wrap">',"</div>\n\t\t\t\t</div>\n\t\t</div>\n\t\t"])),N.Loc.getMessage("INTRANET_SETTINGS_TITLE_SEARCH_IN"),a);t.forEach((function(e){N.Dom.append(i.renderOtherLink(e),a)}));return s}},{key:"renderOtherLink",value:function e(t){var i=this;var a=N.Dom.create("a",{props:{className:"search-title-top-item-link"},events:{mouseenter:function e(t){babelHelpers.classPrivateFieldGet(i,Do).unHighlightAll();babelHelpers.classPrivateFieldGet(i,Do).cursorTo(t.target);Uo.highlight(t.target)},mouseleave:function e(t){Uo.unHighlight(t.target)}},attrs:{title:t.title,href:t.link,target:"blank_"},children:[N.Tag.render(Ao||(Ao=babelHelpers.taggedTemplateLiteral(['<span class="search-title-top-item-text"><span>',"</span></span>"])),t.title)]});babelHelpers.classPrivateFieldGet(this,Do).add(a);return N.Tag.render(Co||(Co=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="search-title-top-item search-title-top-item-js">\n\t\t\t',"\n\t\t</div>"])),a)}}]);return e}();babelHelpers.defineProperty(Bo,"EXTERNAL_LINK","EXTERNAL_LINKS");var Vo=new WeakMap;var zo=new WeakMap;var Uo=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[];babelHelpers.classCallCheck(this,e);Lo(this,Vo,{writable:true,value:null});Lo(this,zo,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,zo,t)}babelHelpers.createClass(e,[{key:"add",value:function e(t){babelHelpers.classPrivateFieldGet(this,zo).push(t)}},{key:"clean",value:function e(){babelHelpers.classPrivateFieldSet(this,Vo,null);babelHelpers.classPrivateFieldSet(this,zo,[])}},{key:"next",value:function e(){if(N.Type.isNil(babelHelpers.classPrivateFieldGet(this,Vo))){babelHelpers.classPrivateFieldSet(this,Vo,0);return this}if(babelHelpers.classPrivateFieldGet(this,zo).length-1>babelHelpers.classPrivateFieldGet(this,Vo)){var t,i;babelHelpers.classPrivateFieldSet(this,Vo,(t=babelHelpers.classPrivateFieldGet(this,Vo),i=t++,t)),i}return this}},{key:"current",value:function e(){if(N.Type.isNil(babelHelpers.classPrivateFieldGet(this,Vo))){return null}return babelHelpers.classPrivateFieldGet(this,zo)[babelHelpers.classPrivateFieldGet(this,Vo)]}},{key:"prev",value:function e(){if(N.Type.isNil(babelHelpers.classPrivateFieldGet(this,Vo))){babelHelpers.classPrivateFieldSet(this,Vo,babelHelpers.classPrivateFieldGet(this,zo).length-1);return this}if(babelHelpers.classPrivateFieldGet(this,Vo)>0){babelHelpers.classPrivateFieldSet(this,Vo,babelHelpers.classPrivateFieldGet(this,Vo)-1)}return this}},{key:"highlight",value:function e(){this.unHighlightAll();if(!N.Dom.hasClass(this.current(),"active")){N.Dom.addClass(this.current(),"active")}return this}},{key:"unHighlight",value:function e(){if(N.Dom.hasClass(this.current(),"active")){N.Dom.removeClass(this.current(),"active")}return this}},{key:"cursorTo",value:function e(t){var i=this;babelHelpers.classPrivateFieldGet(this,zo).forEach((function(e,a){if(e===t){babelHelpers.classPrivateFieldSet(i,Vo,a);return}}))}},{key:"unHighlightAll",value:function t(){babelHelpers.classPrivateFieldGet(this,zo).forEach((function(t){e.unHighlight(t)}))}}],[{key:"highlight",value:function e(t){t.classList.add("active")}},{key:"unHighlight",value:function e(t){t.classList.remove("active")}}]);return e}();var Wo=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this))}babelHelpers.createClass(t,[{key:"fetch",value:function e(t){return N.ajax.runComponentAction("bitrix:intranet.settings","search",{mode:"class",data:{query:t}})}}]);return t}(no);function xo(e,t,i){Xo(e,t);t.set(e,i)}function Xo(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Yo=new WeakMap;var jo=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;babelHelpers.classCallCheck(this,e);xo(this,Yo,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,Yo,t)}babelHelpers.createClass(e,[{key:"canRead",value:function t(){return!!(babelHelpers.classPrivateFieldGet(this,Yo)&e.READ)}},{key:"canEdit",value:function t(){return!!(babelHelpers.classPrivateFieldGet(this,Yo)&e.EDIT)}},{key:"getPermission",value:function e(){return babelHelpers.classPrivateFieldGet(this,Yo)}}]);return e}();babelHelpers.defineProperty(jo,"READ",1<<0);babelHelpers.defineProperty(jo,"EDIT",1<<2);function Ko(e,t){var i=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=qo(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var a=0;var s=function e(){};return{s:s,n:function t(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n=true,l=false,r;return{s:function t(){i=i.call(e)},n:function e(){var t=i.next();n=t.done;return t},e:function e(t){l=true;r=t},f:function e(){try{if(!n&&i["return"]!=null)i["return"]()}finally{if(l)throw r}}}}function qo(e,t){if(!e)return;if(typeof e==="string")return Qo(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Qo(e,t)}function Qo(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function $o(e,t){Jo(e,t);t.add(e)}function Zo(e,t,i){Jo(e,t);t.set(e,i)}function Jo(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ec(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var tc=new WeakMap;var ic=new WeakMap;var ac=new WeakMap;var sc=new WeakMap;var nc=new WeakMap;var lc=new WeakMap;var rc=new WeakMap;var oc=new WeakMap;var cc=new WeakMap;var dc=new WeakMap;var uc=new WeakMap;var bc=new WeakSet;var pc=new WeakSet;var vc=new WeakSet;var hc=new WeakSet;var gc=new WeakSet;var _c=new WeakSet;var Tc=new WeakSet;var Ec=new WeakSet;var fc=new WeakSet;var Ic=new WeakSet;var Sc=new WeakSet;var wc=new WeakSet;var mc=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));$o(babelHelpers.assertThisInitialized(i),wc);$o(babelHelpers.assertThisInitialized(i),Sc);$o(babelHelpers.assertThisInitialized(i),Ic);$o(babelHelpers.assertThisInitialized(i),fc);$o(babelHelpers.assertThisInitialized(i),Ec);$o(babelHelpers.assertThisInitialized(i),Tc);$o(babelHelpers.assertThisInitialized(i),_c);$o(babelHelpers.assertThisInitialized(i),gc);$o(babelHelpers.assertThisInitialized(i),hc);$o(babelHelpers.assertThisInitialized(i),vc);$o(babelHelpers.assertThisInitialized(i),pc);$o(babelHelpers.assertThisInitialized(i),bc);Zo(babelHelpers.assertThisInitialized(i),tc,{writable:true,value:void 0});babelHelpers.defineProperty(babelHelpers.assertThisInitialized(i),"isChanged",false);Zo(babelHelpers.assertThisInitialized(i),ic,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),ac,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),sc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),nc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),lc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),rc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),oc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),cc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),dc,{writable:true,value:void 0});Zo(babelHelpers.assertThisInitialized(i),uc,{writable:true,value:{reloadAfterClose:false}});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),rc,new y({isAdmin:true,locationName:"settings",isBitrix24:e.isBitrix24===true,analyticContext:N.Type.isStringFilled(e.analyticContext)?e.analyticContext:null}));babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),rc).addEventOpenSettings();babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),rc).addEventStartPagePage(e.startPage);i.setEventNamespace("BX.Intranet.Settings");S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"button-click",(function(e){var t=babelHelpers.slicedToArray(e.data,1),a=t[0];if(a.TYPE==="save"){ec(babelHelpers.assertThisInitialized(i),_c,Lc).call(babelHelpers.assertThisInitialized(i),e)}}));S.EventEmitter.subscribe(S.EventEmitter.GLOBAL_TARGET,"SidePanel.Slider:onClose",ec(babelHelpers.assertThisInitialized(i),vc,Pc).bind(babelHelpers.assertThisInitialized(i)));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ic,N.Type.isDomNode(e.menuNode)?e.menuNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ac,N.Type.isDomNode(e.settingsNode)?e.settingsNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),sc,N.Type.isDomNode(e.contentNode)?e.contentNode:null);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),tc,N.Type.isString(e.basePage)?e.basePage:"");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),cc,e.permission instanceof jo?e.permission:new jo);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),dc,e.pagesPermission);if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ac)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ac).querySelector('.ui-button-panel input[name="cancel"]').addEventListener("click",ec(babelHelpers.assertThisInitialized(i),Ic,Fc))}e.pages.concat(Object.values(e.externalPages).map((function(e){var t=e.type,i=e.extensions;return new eo(t,i)}))).forEach((function(t){return i.registerPage(t).expandPage(e.subPages[t.getType()])}));var a=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ic).querySelector('[data-type="tools"]'));if(a.subItems&&a.subItems.length>0){a.hideSubmenu();a.setDefaultToggleButtonName()}babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),oc,new be(babelHelpers.assertThisInitialized(i)));if(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ic)){babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(i),ic).querySelectorAll("li.ui-sidepanel-menu-item a.ui-sidepanel-menu-link").forEach((function(e){var t=new T.HelpMessage(e.dataset.type+"_help-msg",e,N.Loc.getMessage("INTRANET_SETTINGS_PERMISSION_MSG"));t.getPopup().setWidth(275);var a=i.getNavigator().getPageByType(e.dataset.type);e.addEventListener("click",(function(s){var n;if(a!==null&&a!==void 0&&(n=a.getPermission())!==null&&n!==void 0&&n.canRead()){i.show(e.dataset.type)}else{t.show()}}))}))}return i}babelHelpers.createClass(t,[{key:"registerPage",value:function e(t){var i;t.setParentElement(this);t.setPermission(new jo((i=babelHelpers.classPrivateFieldGet(this,dc)[t.getType()])!==null&&i!==void 0?i:null));t.subscribe("change",ec(this,gc,Cc).bind(this)).subscribe("fetch",ec(this,pc,Hc).bind(this));t.setAnalytic(babelHelpers.classPrivateFieldGet(this,rc));return t}},{key:"getCurrentPage",value:function e(){return this.getNavigator().getCurrentPage()}},{key:"getNavigator",value:function e(){return babelHelpers.classPrivateFieldGet(this,oc)}},{key:"show",value:function e(t,i){var a,s=this;if(!N.Type.isDomNode(babelHelpers.classPrivateFieldGet(this,sc))){console.log("Not found settings container");return}if(!babelHelpers.classPrivateFieldGet(this,cc).canRead()){return}var n=this.getNavigator().getPageByType(t);if(this.getCurrentPage()===n){return}this.getNavigator().changePage(n);N.Dom.hide((a=this.getNavigator().getPrevPage())===null||a===void 0?void 0:a.getPage());if(N.Type.isNil(this.getNavigator().getCurrentPage().getPage().parentNode)){N.Dom.append(this.getNavigator().getCurrentPage().getPage(),babelHelpers.classPrivateFieldGet(this,sc))}else{N.Dom.show(this.getNavigator().getCurrentPage().getPage())}this.activateMenuItem(t);babelHelpers.classPrivateFieldGet(this,rc).addEventChangePage(t);this.getNavigator().updateAddressBar();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onAfterShowPage",{source:this,page:n});if(N.Type.isString(i)&&i!==""){S.EventEmitter.subscribeOnce(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onPageComplete",(function(){console.log(i);s.getNavigator().moveTo(n,i)}))}}},{key:"activateMenuItem",value:function e(t){var i=BX.UI.DropdownMenuItem.getItemByNode(babelHelpers.classPrivateFieldGet(this,ic).querySelector('a.ui-sidepanel-menu-link[data-type="'.concat(t,'"]')));i&&i.setActiveHandler()}}]);return t}(I.BaseSettingsElement);function Nc(){if(!babelHelpers.classPrivateFieldGet(this,nc)){babelHelpers.classPrivateFieldSet(this,nc,new so(this.getChildrenElements()))}return babelHelpers.classPrivateFieldGet(this,nc)}function Hc(e){return ec(this,bc,Nc).call(this).fetchPage(e.getTarget())}function Pc(e){var t,i=this;var a=e.getCompatData(),s=babelHelpers.slicedToArray(a,1),n=s[0];if(babelHelpers.classPrivateFieldGet(this,lc)instanceof f.MessageBox){n.denyAction();return false}if(this.isChanged&&((t=n.slider.getData())===null||t===void 0?void 0:t.get("ignoreChanges"))!==true){n.denyAction();babelHelpers.classPrivateFieldSet(this,lc,f.MessageBox.create({message:N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_DESC"),modal:true,buttons:[new BX.UI.Button({text:N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_OK"),color:BX.UI.Button.Color.SUCCESS,events:{click:function e(){S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onCancel",{});n.slider.getData().set("ignoreChanges",true);i.isChanged=false;BX.UI.ButtonPanel.hide();babelHelpers.classPrivateFieldGet(i,lc).close();babelHelpers.classPrivateFieldSet(i,lc,null);n.slider.close();n.slider.destroy();if(babelHelpers.classPrivateFieldGet(i,tc).includes("/configs/")){ec(i,hc,Ac).call(i,"/index.php")}}}}),new BX.UI.CancelButton({text:N.Loc.getMessage("INTRANET_SETTINGS_CONFIRM_ACTION_CANCEL"),events:{click:function e(){babelHelpers.classPrivateFieldGet(i,lc).close();babelHelpers.classPrivateFieldSet(i,lc,null)}}})]}));return babelHelpers.classPrivateFieldGet(this,lc).show()}if(babelHelpers.classPrivateFieldGet(this,tc).includes("/configs/")||babelHelpers.classPrivateFieldGet(this,uc).reloadAfterClose===true){ec(this,hc,Ac).call(this,"/index.php")}}function Ac(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var t=document.querySelector("#ui-sidepanel-wrapper-loader");if(t){t.style.display=""}if(N.Type.isString(e)){top.window.location.href=e}else{top.window.location.href=babelHelpers.classPrivateFieldGet(this,tc)}}function Cc(e){if(!babelHelpers.classPrivateFieldGet(this,cc).canEdit()){return}this.isChanged=true;BX.UI.ButtonPanel.show()}function Lc(e){var t=ec(this,bc,Nc).call(this).collectData();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onBeforeSave",{data:t});babelHelpers.classPrivateFieldGet(this,rc).send();N.ajax.runComponentAction("bitrix:intranet.settings","set",{mode:"class",data:N.Http.Data.convertObjectToFormData(t)}).then(ec(this,Tc,yc).bind(this),ec(this,Ec,Gc).bind(this))}function yc(e){babelHelpers.classPrivateFieldGet(this,uc).reloadAfterClose=true;this.isChanged=false;ec(this,Sc,kc).call(this);BX.UI.ButtonPanel.hide();S.EventEmitter.emit(S.EventEmitter.GLOBAL_TARGET,"BX.Intranet.Settings:onSuccessSave",babelHelpers.classPrivateFieldGet(this,uc))}function Gc(e){var t=ec(this,fc,Rc).call(this,e.errors);ec(this,Sc,kc).call(this);S.EventEmitter.emit("BX.UI.FormElement.Field:onFailedSave",{errors:t});var i=ec(this,wc,Mc).call(this,t);this.show(i)}function Rc(e){var t={};var i=Ko(e),a;try{for(i.s();!(a=i.n()).done;){var s,n;var l=a.value;var r=(s=l.customData)===null||s===void 0?void 0:s.page;var o=(n=l.customData)===null||n===void 0?void 0:n.field;if(N.Type.isNil(r)||N.Type.isNil(o)){I.ErrorCollection.showSystemError(N.Loc.getMessage("INTRANET_SETTINGS_ERROR_FETCH_DATA"));break}if(N.Type.isNil(t[r])){t[r]={}}if(N.Type.isNil(t[r][o])){t[r][o]=[]}t[r][o].push(l.message)}}catch(e){i.e(e)}finally{i.f()}return t}function Fc(e){top.BX.SidePanel.Instance.close()}function kc(){var e=document.querySelector("#intranet-settings-page #ui-button-panel-save");N.Dom.removeClass(e,"ui-btn-wait")}function Mc(e){for(var t in e){return t}}e.Settings=mc;e.ToolsPage=ye;e.EmployeePage=Ke;e.PortalPage=La;e.MainpagePage=Gr;e.CommunicationPage=Ii;e.RequisitePage=ci;e.ConfigurationPage=Us;e.SchedulePage=ln;e.GdprPage=gn;e.SecurityPage=el;e.Renderer=Bo;e.Searcher=vo;e.ServerDataSource=Wo;e.Permission=jo})(this.BX.Intranet=this.BX.Intranet||{},BX.UI.Analytics,BX.UI.DragAndDrop,BX.UI,BX,BX.UI.Uploader,BX.UI,BX,BX.UI,BX,BX,BX,BX,BX.UI.FormElements,BX.UI,BX.UI.EntitySelector,BX.UI,BX,BX.UI,BX,BX.UI.Dialogs,BX.UI.FormElements,BX.Event,BX.Main,BX,BX);
//# sourceMappingURL=script.map.js