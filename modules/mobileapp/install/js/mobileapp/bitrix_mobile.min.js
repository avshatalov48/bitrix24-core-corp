(function(){if(window.app)return;window.BXCordovaPlugin=function(e,t,n){this.pluginName=e;this.useSyncPlugin=t==true;this.callbackIndex=0;this.callbacks={};this.callbackIndex=0;this.dataBrigePath=(typeof mobileSiteDir=="undefined"?"/":mobileSiteDir)+"mobile/";this.available=false;this.convertBoolean=typeof n=="undefined"?true:n;this.platform=null;this.apiVersion=0;this.db=null;var i=this;document.addEventListener("deviceready",function(){i.available=true},false)};BXCordovaPlugin.prototype.RegisterCallBack=function(e){if(typeof e==="function"){this.callbackIndex++;this.callbacks[this.callbackIndex]=e;return this.callbackIndex}return false};BXCordovaPlugin.prototype.CallBackExecute=function(e,t){if(this.callbacks[e]&&typeof this.callbacks[e]==="function"){this.callbacks[e](t)}};BXCordovaPlugin.prototype.prepareParams=function(e,t){var n=true;if(typeof t=="boolean"){n=t}if(typeof e=="object"){for(var i in e){if(typeof e[i]=="object")e[i]=this.prepareParams(e[i],t);if(typeof e[i]=="function")e[i]=this.RegisterCallBack(e[i]);else if(n){if(e[i]===true)e[i]="YES";else if(e[i]===false)e[i]="NO"}}}else{if(typeof e=="function")e=this.RegisterCallBack(e);else if(n){if(e===true)e="YES";else if(e===false)e="NO"}}return e};BXCordovaPlugin.prototype.clone=function(e,t){var n,i,a;if(t!==false)t=true;if(e===null)return null;if(typeof e=="object"){if(Object.prototype.toString.call(e)=="[object Array]"){n=[];for(i=0,a=e.length;i<a;i++){if(typeof e[i]=="object"&&t)n[i]=this.clone(e[i],t);else n[i]=e[i]}}else{n={};for(i in e){if(typeof e[i]=="object"&&t)n[i]=this.clone(e[i],t);else n[i]=e[i]}}}else{n=e}return n};BXCordovaPlugin.prototype.exec=function(e,t,n){var i={};if(typeof n=="undefined"){n=this.convertBoolean}if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.exec(e,t,n)},this),false);return false}if(typeof t!="undefined"){i=this.clone(t,true);i=this.prepareParams(i,n);if(typeof i=="object")i=JSON.stringify(i)}else{i="{}"}if(window.syncPlugin&&this.useSyncPlugin){window.syncPlugin.execute(e,i);return}if(device.platform.toUpperCase()=="ANDROID"||device.cordova>"2.0.0"){return Cordova.exec(null,null,this.pluginName,e,[i])}else{return Cordova.exec(this.pluginName+"."+e,i)}};var e=new BXCordovaPlugin("BitrixMobile",true);window.app=e;document.addEventListener("DOMContentLoaded",function(){e.db=BX.dataBase.create({name:"Bitrix Base",displayName:"Bitrix Base",capacity:1024*1024*4,version:"1.2"})});e.notificationBar=function(e,t){this.exec("notificationBar",{action:e,params:t})};e.actionSheet=function(e,t){this.exec("actionSheet",{action:e,params:t})};e.titleAction=function(e,t){this.exec("titleAction",{action:e,params:t})};e.refresh=function(e,t){this.exec("refreshAction",{action:e,params:t})};e.textPanelAction=function(e,t){this.exec("textPanelAction",{action:e,params:t})};e.showSlidingPanel=function(e){return this.exec("showSlidingPanel",e)};e.changeAccount=function(){return this.exec("changeAccount",{})};e.showDocumentsCache=function(e){return this.exec("showDocumentsCache",e)};e.showButtonPanel=function(e){return this.exec("showButtonPanel",e)};e.hideSlidingPanel=e.hideButtonPanel=function(e){return this.exec("hideSlidingPanel",e)};e.showSelectPicker=function(e){return this.exec("showSelectPicker",e)};e.hideSelectPicker=function(e){return this.exec("hideSelectPicker",e)};e.updateButtonBadge=function(e){return this.exec("updateButtonBadge",e)};e.openBarCodeScanner=function(e){return this.exec("openBarCodeScanner",e)};e.openPhotos=function(e){return this.exec("openPhotos",e)};e.removeAllCache=function(e){return this.exec("removeAllCache",e)};e.loadPageBlank=function(e){return this.exec("openNewPage",e)};e.loadPageStart=function(e){return this.exec("loadPage",e)};e.confirm=function(e){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.confirm(e)},this),false);return}var t={callback:function(){},title:"",text:"",buttons:"OK"};if(e){if(e.title)t.title=e.title;if(e.buttons&&e.buttons.length>0){t.buttons="";for(var n=0;n<e.buttons.length;n++){if(t.buttons.length>0){t.buttons+=","+e.buttons[n]}else t.buttons=e.buttons[n]}}t.accept=e.accept;if(e.text)t.text=e.text;if(e.callback&&typeof e.callback=="function")t.callback=e.callback}navigator.notification.confirm(t.text,t.callback,t.title,t.buttons)};e.alert=function(e){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.alert(e)},this),false);return}var t={callback:function(){},title:"",button:"",text:""};if(typeof e=="object"){if(e.title)t.title=e.title;if(e.button)t.button=e.button;if(e.text)t.text=e.text;if(e.callback&&typeof e.callback=="function")t.callback=e.callback}else{t.text=e}navigator.notification.alert(t.text,t.callback,t.title,t.button)};e.openLeft=function(){return this.exec("openMenu")};e.setPageTitle=function(e){return this.exec("setPageTitle",e)};e.removeTableCache=function(e){return this.exec("removeTableCache",{table_id:e})};e.showDatePicker=function(e){return this.exec("showDatePicker",e)};e.hideDatePicker=function(){return this.exec("hideDatePicker")};e.showInput=function(e){return this.exec("showInput",e)};e.showInputLoading=function(e){if(e&&e!==true)e=false;return this.exec("showInputLoading",{status:e})};e.clearInput=function(){return this.exec("clearInput")};e.hideInput=function(){return this.exec("hideInput")};e.reload=function(e){var e=e||{url:document.location.href};if(window.platform=="android"){this.exec("reload",e)}else{document.location.href=e.url}};e.flipScreen=function(){return this.exec("flipScreen")};e.removeButtons=function(e){return this.exec("removeButtons",e)};e.openBXTable=function(e){if(typeof e.table_settings!="undefined"){e.TABLE_SETTINGS=e.table_settings;delete e.table_settings}if(e.TABLE_SETTINGS.markmode&&e.TABLE_SETTINGS.markmode==true){if(e.TABLE_SETTINGS.callback&&typeof e.TABLE_SETTINGS.callback=="function"){var t=e.TABLE_SETTINGS.callback;e.TABLE_SETTINGS.callback=function(e){t(e)}}}if(typeof e.TABLE_SETTINGS.modal!=="undefined"){e.modal=e.TABLE_SETTINGS.modal}if(typeof e.TABLE_SETTINGS.name!=="undefined"){e.TABLE_SETTINGS.showtitle=true}return this.exec("openBXTable",e)};e.openDocument=function(e){return this.exec("openDocument",e)};e.showPopupLoader=function(e){return this.exec("showPopupLoader",e)};e.hidePopupLoader=function(e){return this.exec("hidePopupLoader",e)};e.changeCurPageParams=function(e){return this.exec("changeCurPageParams",e)};e.getPageParams=function(e){if(!this.enableInVersion(3))return false;return this.exec("getPageParams",e)};e.menuCreate=function(e){return this.exec("menuCreate",e)};e.menuShow=function(){return this.exec("menuShow")};e.menuHide=function(){return this.exec("menuHide")};e.enableInVersion=function(e,t){if(this.apiVersion==0){try{if(typeof BXMobileAppContext!="undefined"&&typeof BXMobileAppContext.getApiVersion=="function"){this.apiVersion=BXMobileAppContext.getApiVersion()}else if(typeof appVersion!="undefined"){this.apiVersion=appVersion}}catch(e){}}return typeof t!="undefined"&&t==true?parseInt(this.apiVersion)==parseInt(e):parseInt(this.apiVersion)>=parseInt(e)};e.checkOpenStatus=function(e){return this.exec("checkOpenStatus",e)};e.asyncRequest=function(e){return this.exec("asyncRequest",e)};e.openUrl=function(e){return this.exec("openUrl",e)};e.RegisterCallBack=function(e){if(typeof e=="function"){this.callbackIndex++;this.callbacks["callback"+this.callbackIndex]=e;return this.callbackIndex}};e.CallBackExecute=function(e,t){if(this.callbacks["callback"+e]&&typeof this.callbacks["callback"+e]==="function"){this.callbacks["callback"+e](t)}};e.onCustomEvent=function(e,t,n,i){if(typeof i=="undefined"){i=true}if(!this.available){document.addEventListener("deviceready",BX.delegate(function(){this.onCustomEvent(e,t,n,i)},this),false);return}if(i)t=this.prepareParams(t);if(typeof t=="object")t=JSON.stringify(t);if(device.platform.toUpperCase()=="ANDROID"||device.cordova>"2.0.0"){var a={eventName:e,params:t};return Cordova.exec(null,null,"BitrixMobile","onCustomEvent",[a])}else{return Cordova.exec("BitrixMobile.onCustomEvent",e,t,n)}};e.getVar=function(e){return this.exec("getVar",e)};e.passVar=function(e,t){try{evalVar=window[e];if(!evalVar)evalVar="empty"}catch(e){evalVar=""}if(evalVar){if(typeof evalVar=="object")evalVar=JSON.stringify(evalVar);if(platform.toUpperCase()=="ANDROID"){t=t||false;if(t)Bitrix24Android.receiveStringValue(JSON.stringify({variable:evalVar,key:t}));else Bitrix24Android.receiveStringValue(evalVar)}else{return evalVar}}};e.takePhoto=function(e){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.takePhoto(e)},this),false);return}if(!e.callback)e.callback=function(){};if(!e.fail)e.fail=function(){};var t={quality:e.quality||(this.enableInVersion(2)?40:10),correctOrientation:e.correctOrientation||false,targetWidth:e.targetWidth||false,targetHeight:e.targetHeight||false,sourceType:typeof e.source!="undefined"?e.source:0,mediaType:typeof e.mediaType!="undefined"?e.mediaType:0,allowEdit:typeof e.allowEdit!="undefined"?e.allowEdit:false,saveToPhotoAlbum:typeof e.saveToPhotoAlbum!="undefined"?e.saveToPhotoAlbum:false};if(e.destinationType!==undefined)t.destinationType=e.destinationType;navigator.camera.getPicture(e.callback,e.fail,t)};e.openMenu=function(){return this.exec("openMenu")};e.showModalDialog=function(e){if(typeof e["cache"]=="undefined"){e["cache"]=false}return this.exec("showModalDialog",e)};e.closeModalDialog=function(e){return this.exec("closeModalDialog",e)};e.closeController=function(e){return this.exec("closeController",e)};e.addButtons=function(e){return this.exec("addButtons",e)};e.openContent=function(){return this.exec("openContent")};e.closeMenu=function(){return this.exec("closeMenu")};e.loadPage=function(e,t){if(this.enableInVersion(2)&&t){params={url:e,page_id:t};return this.exec("loadPage",params)}return this.exec("loadPage",e)};e.setPageID=function(e){return this.exec("setPageID",e)};e.openNewPage=function(e,t,n){if(this.enableInVersion(3)){var i={url:e,data:t,title:n};return this.exec("openNewPage",i)}else return this.exec("openNewPage",e)};e.loadMenu=function(e){return this.exec("loadMenu",e)};e.openTable=function(e){if(e.markmode&&e.markmode==true){if(e.callback&&typeof e.callback=="function"){if(!(e.skipSpecialChars&&e.skipSpecialChars===true)){var t=e.callback;e.callback=function(e){t(BitrixMobile.Utils.htmlspecialchars(e))}}}}return this.exec("openTable",e)};e.openUserList=function(e){return this.exec("openUserList",e)};e.addUserListButton=function(e){return this.exec("addUserListButton",e)};e.pullDown=function(e){var t=BX.clone(e);if(typeof t.backgroundColor=="undefined"||!BX.type.isNotEmptyString(t.backgroundColor)){var n=null;try{n=document.body.className!=null&&document.body.className.length>0?document.querySelector("."+document.body.className):null}catch(e){}if(n!=null){var i=getComputedStyle(n);var a=function(e){e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e&&e.length===4?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""};var o=a(i.backgroundColor);if(o!="#000000")t.backgroundColor=o;else t.backgroundColor="#ffffff"}}return this.exec("pullDown",t)};e.pullDownLoadingStop=function(){return this.exec("pullDownLoadingStop")};e.enableScroll=function(e){var e=e||false;return this.exec("enableScroll",e)};e.enableCaptureKeyboard=function(e){var e=e||false;return this.exec("enableCaptureKeyboard",e)};e.enableLoadingScreen=function(e){var e=e||false;return this.exec("enableLoadingScreen",e)};e.showLoadingScreen=function(){return this.exec("showLoadingScreen")};e.hideLoadingScreen=function(){return this.exec("hideLoadingScreen")};e.visibleNavigationBar=function(e){var e=e||false;return this.exec("visibleNavigationBar",e)};e.visibleToolBar=function(e){var e=e||false;return this.exec("visibleToolBar",e)};e.enableSliderMenu=function(e){var e=e||false;return this.exec("enableSliderMenu",e)};e.enableRight=function(e){var e=e||false;return this.exec("enableRight",e)};e.setCounters=function(e){return this.exec("setCounters",e)};e.setBadge=function(e){return this.exec("setBadge",e)};e.refreshPanelPage=function(e){if(!e)e="";var t={page:e};return this.exec("refreshPanelPage",t)};e.setPanelPages=function(e){return this.exec("setPanelPages",e)};e.getToken=function(){var t="APPLE";if(platform!="ios")t="GOOGLE";var n={callback:function(n){BX.proxy(BX.ajax.post(e.dataBrigePath,{mobile_action:"save_device_token",device_name:typeof device.name=="undefined"?device.model:device.name,uuid:device.uuid,device_token:n,device_type:t,sessid:BX.bitrix_sessid()},function(e){}),this)}};return this.exec("getToken",n)};e.BasicAuth=function(t){t=t||{};var n=t.success&&typeof t.success=="function"?t.success:function(){};var i=t.failture&&typeof t.failture=="function"?t.failture:function(){};var a={check_url:t.check_url,success:function(t){if(typeof t!="object"){try{t=JSON.parse(t)}catch(e){t={status:"failed"}}}if(t.status=="success"&&t.sessid_md5){if(BX.message.bitrix_sessid!=t.sessid_md5){BX.message.bitrix_sessid=t.sessid_md5;e.onCustomEvent("onSessIdChanged",{sessid:t.sessid_md5})}}n(t)},failture:function(t){if(t.status=="failed")e.exec("showAuthForm");else i(t)}};return this.exec("BasicAuth",a)};e.logOut=function(){if(this.enableInVersion(2)){this.asyncRequest({url:this.dataBrigePath+"?mobile_action=logout&uuid="+device.uuid});return this.exec("showAuthForm")}var t=new XMLHttpRequest;t.open("GET",this.dataBrigePath+"?mobile_action=logout&uuid="+device.uuid,true);t.onreadystatechange=function(){if(t.readyState==4&&t.status=="200"){return e.exec("showAuthForm")}};t.send(null)};e.getCurrentLocation=function(e){if(!this.available){document.addEventListener("deviceready",BX.proxy(function(){this.getCurrentLocation(e)},this),false);return}var t;var n;if(e){t=e.onsuccess;n=e.onerror}navigator.geolocation.getCurrentPosition(t,n)};e.setVibrate=function(e){e=e||500;navigator.notification.vibrate(parseInt(e))};e.bindloadPageBlank=function(){document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(e){var t=null;var n="__bx_android_click_detect__";if(e.target.tagName.toUpperCase()=="A")t=e.target;else t=BX.findParent(e.target,{tagName:"A"},10);if(t&&t.href&&t.href.length>0){if(t.href.indexOf(n)==-1&&t.href.indexOf("javascript")!=0){if(t.href.indexOf("#")==-1)t.href+="#"+n;else t.href+="&"+n}}},false)},false)};BitrixMobile={};BitrixMobile.Utils={autoResizeForm:function(e,t,n){if(!e||!t)return;var i=e.parentNode;n=n||126;var a=(e.ownerDocument||document).defaultView.getComputedStyle(e,null).getPropertyValue("height");var o=(i.ownerDocument||document).defaultView.getComputedStyle(i,null).getPropertyValue("height");a=parseInt(a);o=parseInt(o);e.setAttribute("data-orig-height",a);i.setAttribute("data-orig-height",o);var r=a;var s=document.createElement("textarea");s.className="send-message-input";s.style.height=r+"px";s.style.visibility="hidden";s.style.position="absolute";s.style.left="-300px";document.body.appendChild(s);e.addEventListener("change",c,false);e.addEventListener("cut",u,false);e.addEventListener("paste",u,false);e.addEventListener("drop",u,false);e.addEventListener("keyup",c,false);if(window.platform=="android")e.addEventListener("keydown",u,false);function c(){s.value=e.value;var c=s.scrollHeight;if(c>n)c=n;if(r!=c){r=c;e.style.height=c+"px";i.style.height=o+(c-a)+"px";t.style.bottom=o+(c-a)+"px";if(window.platform=="android")window.scrollTo(0,document.documentElement.scrollHeight)}}function u(){setTimeout(c,0)}},resetAutoResize:function(e,t){if(!e||!t)return;var n=e.parentNode;var i=e.getAttribute("data-orig-height");var a=n.getAttribute("data-orig-height");e.style.height=i+"px";n.style.height=a+"px";t.style.bottom=a+"px"},showHiddenImages:function(){var e=document.getElementsByTagName("img");for(var t=0;t<e.length;t++){var n=e[t];var i=n.getAttribute("data-src");if(!i)continue;if(BitrixMobile.Utils.isElementVisibleOnScreen(n)){n.src=i;n.setAttribute("data-src","")}}},isElementVisibleOnScreen:function(e){var t=BitrixMobile.Utils.getElementCoords(e);var n=window.pageYOffset||document.documentElement.scrollTop;var i=n+document.documentElement.clientHeight;t.bottom=t.top+e.offsetHeight;var a=t.top>n&&t.top<i;var o=t.bottom<i&&t.bottom>n;return a||o},isElementVisibleOn2Screens:function(e){var t=BitrixMobile.Utils.getElementCoords(e);var n=document.documentElement.clientHeight;var i=window.pageYOffset||document.documentElement.scrollTop;var a=i+n;t.bottom=t.top+e.offsetHeight;i-=n;a+=n;var o=t.top>i&&t.top<a;var r=t.bottom<a&&t.bottom>i;return o||r},getElementCoords:function(e){var t=e.getBoundingClientRect();return{originTop:t.top,originLeft:t.left,top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}},htmlspecialchars:function(e){if(BX.type.isString(e))return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;");if(BX.type.isArray(e)){for(var t=0;t<e.length;t++){e[t]=BitrixMobile.Utils.htmlspecialchars(e[t])}}else if(typeof e=="object"&&e!=null){var n={};for(var i in e)n[i]=BitrixMobile.Utils.htmlspecialchars(e[i]);e=n}return e}};BitrixMobile.fastClick={bindDelegate:function(e,t,n){if(typeof window.BX!="undefined"){var i=BX.delegateEvent(t,n);new FastButton(e,i,true)}else{document.addEventListener("DOMContentLoaded",function(){BitrixMobile.fastClick.bindDelegate(e,t,n)})}},bind:function(e,t){new FastButton(e,t,true)}};BitrixMobile.LazyLoad={images:[],status:{hidden:-2,error:-1,undefined:0,inited:1,loaded:2},types:{image:1,background:2},clearImages:function(){this.images=[]},showImages:function(e){e=e===false?false:true;for(var t=0,n=this.images.length;t<n;t++){var i=this.images[t];if(i.status==this.status.undefined){this._initImage(i)}if(i.status!==this.status.inited){continue}if(!i.node||!i.node.parentNode){i.node=null;i.status=BitrixMobile.LazyLoad.status.error;continue}var a=true;if(e&&i.func){a=i.func(i)}if(a===true&&BitrixMobile.Utils.isElementVisibleOn2Screens(i.node)){if(i.type==BitrixMobile.LazyLoad.types.image){i.node.src=i.src}else{i.node.style.backgroundImage="url('"+i.src+"')"}i.node.setAttribute("data-src","");i.status=this.status.loaded;i.node.onload=function(){BX.onCustomEvent("BX.LazyLoad:ImageLoaded",[this])}}}},registerImage:function(e,t){if(BX.type.isNotEmptyString(e)){this.images.push({id:e,node:null,src:null,type:null,func:BX.type.isFunction(t)?t:null,status:this.status.undefined})}},registerImages:function(e,t){if(BX.type.isArray(e)){for(var n=0,i=e.length;n<i;n++){this.registerImage(e[n],t)}}},_initImage:function(e){e.status=this.status.error;var t=BX(e.id);if(t){var n=t.getAttribute("data-src");if(BX.type.isNotEmptyString(n)){e.node=t;e.src=n;e.status=this.status.inited;e.type=e.node.tagName.toLowerCase()=="img"?BitrixMobile.LazyLoad.types.image:BitrixMobile.LazyLoad.types.background}}},getImageById:function(e){for(var t=0,n=this.images.length;t<n;t++){if(this.images[t].id==e){return this.images[t]}}return null},removeImage:function(e){for(var t=0,n=this.images.length;t<n;t++){if(this.images[t].id==e){this.images=BX.util.deleteFromArray(this.images,t);break}}},onScroll:function(){BitrixMobile.LazyLoad.showImages()}};window.BitrixAnimation={animate:function(e){if(!e||!e.start||!e.finish||typeof e.start!="object"||typeof e.finish!="object")return null;for(var t in e.start){if(!e.finish[t]){delete e.start[t]}}e.progress=function(e){var t={};for(var n in this.start)t[n]=Math.round(this.start[n]+(this.finish[n]-this.start[n])*e);if(this.step)this.step(t)};return BitrixAnimation.animateProgress(e)},animateProgress:function(e){var t=new Date;var n=e.transition||BitrixAnimation.transitions.linear;var i=e.duration||1e3;var a=setInterval(function(){var o=(new Date-t)/i;if(o>1)o=1;e.progress(n(o));if(o==1){clearInterval(a);e.complete&&e.complete()}},e.delay||13);return a},makeEaseInOut:function(e){return function(t){if(t<.5)return e(2*t)/2;else return(2-e(2*(1-t)))/2}},makeEaseOut:function(e){return function(t){return 1-e(1-t)}},transitions:{linear:function(e){return e},elastic:function(e){return Math.pow(2,10*(e-1))*Math.cos(20*Math.PI*1.5/3*e)},quad:function(e){return Math.pow(e,2)},cubic:function(e){return Math.pow(e,3)},quart:function(e){return Math.pow(e,4)},quint:function(e){return Math.pow(e,5)},circ:function(e){return 1-Math.sin(Math.acos(e))},back:function(e){return Math.pow(e,2)*((1.5+1)*e-1.5)},bounce:function(e){for(var t=0,n=1;1;t+=n,n/=2){if(e>=(7-4*t)/11){return-Math.pow((11-6*t-11*e)/4,2)+Math.pow(n,2)}}}}};document.addEventListener("DOMContentLoaded",function(){BX.addCustomEvent("onFrameDataReceived",function(t){if(t.lang)e.onCustomEvent("onServerLangReceived",t.lang)});BX.addCustomEvent("onServerLangReceived",function(e){if(e){for(var t in e){BX.message[t]=e[t]}}})},false);document.addEventListener("deviceready",function(){if(typeof BXMobileAppContext!="undefined"){BX.addCustomEvent("onAppPaused",function(){BXMobileAppContext.active=false});BX.addCustomEvent("UIApplicationDidBecomeActiveNotification",function(){BXMobileAppContext.active=true});BXMobileAppContext.isAppActive=function(){if(typeof this.active=="undefined"||!e.enableInVersion(16)){this.active=!BXMobileAppContext.isBackground()}return this.active}}e.available=true;BX.addCustomEvent("onSessIdChanged",function(e){BX.message.bitrix_sessid=e.sessid});BXMobileApp.addCustomEvent("onPageParamsChangedLegacy",function(e){if(e.url!=location.pathname+location.search)return false;BXMobileApp.UI.Page.params.set({data:e.data});BX.onCustomEvent("onPageParamsChanged",[e.data]);return true})},false);BX.mobileAjax=function(e){console.warn("AJAX",e);var t=new Promise(function(t,n){"use strict";e.onsuccess=e.onsuccess?e.onsuccess:function(){};e.xhr=new BMXMLHttpRequest;e.xhr.setRequestHeader("User-Agent","Bitrix24/Janative");if(!e["method"])e["method"]="GET";if(e.headers){if(BX.type.isArray(e.headers)){e.headers.forEach(function(t){e.xhr.setRequestHeader(t.name,t.value)})}else{Object.keys(e.headers).forEach(function(t){e.xhr.setRequestHeader(t,e.headers[t])})}}if(e.files){e.xhr.files=e.files}if(typeof e.prepareData!=="undefined"){e.xhr.prepareData=e.prepareData}else{e.xhr.prepareData=true}if(e.timeout){e.xhr.timeout=e.timeout}if(BX.mobileAjax.debug){console.log("Ajax request: "+e.url)}e.xhr.open(e["method"],e["url"]);e.xhr.onreadystatechange=function(){if(e.xhr.readyState===4){var i=BX.mobileAjax.xhrSuccess(e.xhr);console.log(e.xhr);if(i){if(e.dataType&&e.dataType==="json"){try{var a=BX.parseJSON(e.xhr.responseText);if(BX.mobileAjax.debug){console.log("Ajax success: "+e.xhr)}e.onsuccess(a);t(a)}catch(t){var o={error:t,xhr:e.xhr};if(BX.mobileAjax.debug){console.log("Ajax fail: ",o)}if(typeof e.onfailure==="function"){e.onfailure(o.error,o.xhr)}else{n(o)}}}else{if(BX.mobileAjax.debug){console.log("Ajax success: "+e.xhr)}e.onsuccess(e.xhr.responseText);t(e.xhr.responseText)}}else{var o={error:new Error("XMLHTTPRequest error status",e.xhr.status),xhr:e.xhr};if(BX.mobileAjax.debug){console.log("Ajax fail: ",o)}if(typeof e.onfailure==="function"){e.onfailure(o.error,o.xhr)}else{n(o)}}}};BX.mobileAjax.instances[e.xhr.getUniqueId()]=e.xhr;e.xhr.send(e["data"])});t.catch(function(){});return t};BX.mobileAjax.debug=false;BX.mobileAjax.instances={};BX.mobileAjax.xhrSuccess=function(e){return e.status>=200&&e.status<300||e.status===304||e.status===1223};BX.mobileAjax.prepareData=function(e,t){var n="";if(null!==e){for(var i in e){if(e.hasOwnProperty(i)){if(n.length>0)n+="&";var a=encodeURIComponent(i);if(t)a=t+"["+a+"]";if(typeof e[i]==="object")n+=BX.mobileAjax.prepareData(e[i],a);else n+=a+"="+encodeURIComponent(e[i])}}}return n};BX.mobileAjax.onreadystatechange=function(e){var t=e["id"];if(BX.mobileAjax.instances[t]){if(e["readyState"]){BX.mobileAjax.instances[t].readyState=e["readyState"]}if(e["readyState"]===4){BX.mobileAjax.instances[t].responseText=e["responseText"];console.timeEnd(e["id"])}if(e["statusCode"]){BX.mobileAjax.instances[t].status=e["statusCode"]}}if(typeof BX.mobileAjax.instances[t]["onreadystatechange"]==="function")BX.mobileAjax.instances[t]["onreadystatechange"].call(BX.mobileAjax.instances[t],[])};BX.mobileAjax.onload=function(e){var t=e["id"];if(BX.mobileAjax.instances[t]&&BX.mobileAjax.instances[t]["onload"])BX.mobileAjax.instances[t]["onload"].call(BX.mobileAjax.instances[t],[e])};BX.mobileAjax.onerror=function(e){var t=e["id"];if(BX.mobileAjax.instances[t]&&BX.mobileAjax.instances[t]["onerror"])BX.mobileAjax.instances[t]["onerror"].call(BX.mobileAjax.instances[t],[e.error])};BX.mobileAjax.send=function(t,n){BX.mobileAjax.instances[t.getUniqueId()]=t;n["id"]=t.getUniqueId();console.time(n["id"]);Object.keys(BX.mobileAjax.preregistredCallbacks).forEach(function(e){n[e]=BX.mobileAjax.preregistredCallbacks[e]});e.exec("sendAjax",n,false)};BX.mobileAjax.abort=function(t,n){n["id"]=t.getUniqueId();e.exec("abortAjax",n,false)};BX.mobileAjax.registerCallbacks=function(){BX.mobileAjax.preregistredCallbacks={onreadystatechange:e.RegisterCallBack(BX.mobileAjax.onreadystatechange),onload:e.RegisterCallBack(BX.mobileAjax.onload),onerror:e.RegisterCallBack(BX.mobileAjax.onerror)}};BX.mobileAjax.registerCallbacks();window.BMXMLHttpRequest=function(){this.id="ajaxId"+Math.random();this.headers={};this.files=[];this.prepareData=false};BMXMLHttpRequest.prototype={open:function(e,t){this.method=e;this.url=t},setRequestHeader:function(e,t){this.headers[e]=t},send:function(e){if(this.prepareData===true){if(typeof e==="object")e=BX.mobileAjax.prepareData(e)}var t={headers:this.headers,body:e,method:this.method,url:this.url,prepareData:this.prepareData,files:this.files};BX.mobileAjax.send(this,t)},abort:function(){BX.mobileAjax.abort(this,{})},onreadystatechange:null,onload:null,onerror:null,getUniqueId:function(){return this.id}};BMAjaxWrapper=null;BX.ready(function(){if(BX.type.isUndefined(BX.Mobile)){return}window.MobileAjaxWrapper=function(){this.instance=new BX.Mobile.Ajax};MobileAjaxWrapper.prototype.Wrap=function(e){var t=this.instance.instanceWrap(e);this.xhr=this.instance.xhr;return t};MobileAjaxWrapper.prototype.runComponentAction=function(e,t,n,i){return this.instance.instanceRunComponentAction(e,t,n,i)};MobileAjaxWrapper.prototype.runAction=function(e,t,n){return this.instance.instanceRunAction(e,t,n)};MobileAjaxWrapper.prototype.OfflineAlert=function(e){navigator.notification.alert(BX.message("MobileAppOfflineMessage"),e||BX.DoNothing,BX.message("MobileAppOfflineTitle"))};BMAjaxWrapper=new MobileAjaxWrapper});MobileNetworkStatus=function(){this.offline=null;var e=this;document.addEventListener("offline",function(){e.offline=true},false);document.addEventListener("online",function(){e.offline=false},false);document.addEventListener("DOMContentLoaded",function(){BX.addCustomEvent("UIApplicationDidBecomeActiveNotification",function(t){var n=navigator.network.connection.type;e.offline=n==Connection.UNKNOWN||n==Connection.NONE})},false)};BMNetworkStatus=new MobileNetworkStatus})();(function(){function e(e,t,n,i){if(e.addEventListener){e.addEventListener(t,n,i);return{destroy:function(){e.removeEventListener(t,n,i)}}}else{var a=function(e){n.handleEvent(window.event,n)};e.attachEvent("on"+t,a);return{destroy:function(){e.detachEvent("on"+t,a)}}}}var t=true;this.FastButton=function(n,i,a){this.events=[];this.touchEvents=[];this.element=n;this.handler=i;this.useCapture=a;if(t)this.events.push(e(n,"touchstart",this,this.useCapture));this.events.push(e(n,"click",this,this.useCapture))};this.FastButton.prototype.destroy=function(){for(i=this.events.length-1;i>=0;i-=1)this.events[i].destroy();this.events=this.touchEvents=this.element=this.handler=this.fastButton=null};this.FastButton.prototype.handleEvent=function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onClick(e);break;case"click":this.onClick(e);break}};this.FastButton.prototype.onTouchStart=function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=true;this.touchEvents.push(e(this.element,"touchend",this,this.useCapture));this.touchEvents.push(e(document.body,"touchmove",this,this.useCapture));this.startX=t.touches[0].clientX;this.startY=t.touches[0].clientY};this.FastButton.prototype.onTouchMove=function(e){if(Math.abs(e.touches[0].clientX-this.startX)>10||Math.abs(e.touches[0].clientY-this.startY)>10){this.reset()}};this.FastButton.prototype.onClick=function(e){this.reset();var t=this.handler.call(this.element,e);if(t!==null){e.preventDefault();e.stopPropagation?e.stopPropagation():e.cancelBubble=true}if(e.type=="touchend")clickbuster.preventGhostClick(this.startX,this.startY);return t};this.FastButton.prototype.reset=function(){for(i=this.touchEvents.length-1;i>=0;i-=1)this.touchEvents[i].destroy();this.touchEvents=[]};this.clickbuster=function(){};this.clickbuster.preventGhostClick=function(e,t){clickbuster.coordinates.push(e,t);window.setTimeout(clickbuster.pop,2500)};this.clickbuster.pop=function(){clickbuster.coordinates.splice(0,2)};this.clickbuster.onClick=function(e){for(var t=0;t<clickbuster.coordinates.length;t+=2){var n=clickbuster.coordinates[t];var i=clickbuster.coordinates[t+1];if(Math.abs(e.clientX-n)<25&&Math.abs(e.clientY-i)<25){e.stopPropagation?e.stopPropagation():e.cancelBubble=true;e.preventDefault?e.preventDefault():e.returnValue=false}}};if(t){document.addEventListener("click",clickbuster.onClick,true);clickbuster.coordinates=[]}})(this);function ReadyDevice(e){if(app.available==true&&typeof e=="function"){e()}else{document.addEventListener("deviceready",e,false)}}
//# sourceMappingURL=bitrix_mobile.map.js