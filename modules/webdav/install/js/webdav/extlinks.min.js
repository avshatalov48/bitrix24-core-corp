function ShowExtLinkDialog(t,e){window.urlGetDialogDivIsLoaded=false;window.urlGetExtLink=t;window.urlGetDialogDiv=e;window.ExtLinksDialog=BX.PopupWindowManager.create("BXExtLinksDialog",null,{autoHide:false,overlay:true,zIndex:0,offsetLeft:0,offsetTop:0,draggable:{restrict:true},closeByEsc:true,titleBar:BX.create("span",{props:{className:"ext-link-title-div"},html:BX.message("WD_EXT_LINKS_DIALOG_TITLE")}),closeIcon:true,buttons:[new BX.PopupWindowButton({text:BX.message("WD_EXT_LINKS_DIALOG_GET"),id:"popup-window-button-link-get",className:"popup-window-button-link-get",events:{click:function(){GetExtLinkFromServer()}}})],content:GetExtLinkDialogWaitPicture(),events:{onAfterPopupShow:function(){GetExtLinkDialogDiv()}}});window.ExtLinksDialog.show()}function GetExtLinkDialogDiv(){window.ExtLinksDialog.setContent(GetExtLinkDialogWaitPicture());BX.ajax.post(window.urlGetDialogDiv,{},BX.delegate(function(t){if(t!="error"){window.ExtLinksDialog.setContent(t);GetExtLinkAddEvents();window.ExtLinkDialogPassCB=null;document.getElementById("popup-window-button-link-get").style.display="inline-block";window.urlGetDialogDivIsLoaded=true}else{window.ExtLinksDialog.setContent(BX.message("WD_EXT_LINKS_DIALOG_ERROR"))}},this))}function GetExtLinkDialogWaitPicture(){return'<div style="width:600px;height:230px"><div class="ext-link-dialog-wait"></div></div>'}function GetExtLinkFromServer(){if(window.urlGetDialogDivIsLoaded!==true){return}if(!CheckPassword(true)){return}lt_t_cb=document.getElementById("ext-link-time-cb").checked;lt_t_n=document.getElementById("ext-link-time-inp").value;objSel=document.getElementById("ext-link-time-sel");lt_t_t=objSel.options[objSel.selectedIndex].value;lt_p_cb=document.getElementById("ext-link-pass-cb").checked;lt_p_n=document.getElementById("ext-link-pass-inp1").value;arParam={};if(lt_p_cb==true){arParam.PASSWORD=lt_p_n}if(lt_t_cb==true){arParam.LIFETIME_NUMBER=lt_t_n;arParam.LIFETIME_TYPE=lt_t_t}lt_c=document.getElementById("text-link-comments-textarea").value;if(String(lt_c).length){arParam.DESCRIPTION=lt_c}BX.ajax.post(window.urlGetExtLink,arParam,BX.delegate(function(t){if(t!="error"){document.getElementById("ext-link-url-div").className="ext-link-section ext-link-link";document.getElementById("ext-link-white-block").style.display="block";document.getElementById("popup-window-button-link-get").style.display="none";document.getElementById("ext-link-res-url").value=t;ExtLinkDialogAmount(1)}else{document.getElementById("ext-link-res-url").value=BX.message("WD_EXT_LINKS_DIALOG_ERROR")}},this))}function GetExtLinkAddEvents(){BX.bind(BX("ext-link-time-cb"),"click",function(){var t=BX("e2p");var e=new BX.easing({duration:300,start:{width:this.checked?0:160,opacity:this.checked?0:100},finish:{width:this.checked?160:0,opacity:this.checked?100:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(e){t.style.width=e.width+"px";t.style.opacity=e.opacity/100},complete:function(){}});e.animate()});BX.bind(BX("ext-link-pass-cb"),"click",function(){var t=BX("e3p");var e=new BX.easing({duration:400,start:{height:this.checked?0:68,opacity:this.checked?0:100},finish:{height:this.checked?68:0,opacity:this.checked?100:0},transition:BX.easing.makeEaseOut(BX.easing.transitions.quart),step:function(e){t.style.height=e.height+"px";t.style.opacity=e.opacity/100},complete:function(){}});e.animate()})}function ExtLinkDialogInitSpoiler(t){if(typeof t!="object"||!t)return false;var e=t.nextSibling;while(e.nodeType!=1)e=e.nextSibling;e.style.display=e.style.display=="none"?"":"none";t.className=e.style.display=="none"?"":"ext-link-list-spoiler-head-open"}function ExtLinkDialogCloseGreenWindow(t){t.parentNode.parentNode.style.height=t.parentNode.parentNode.offsetHeight+"px";var e=t.parentNode.parentNode;setTimeout(function(){BX.addClass(e,"ext-link-dialog-wrap-animate")},20)}function ExtLinkDialogDeleteLink(t,e,i){i=i||{};i.sessid=BX.bitrix_sessid();BX.ajax.post(t,i,BX.delegate(function(t){if(t!="error"){document.getElementById(e).className="ext-link-hidden";ExtLinkDialogAmount(-1)}},this))}function ExtLinkDialogDeleteAllLinks(t,e,i){i=i||{};i.DeleteAllLinks=e;i.sessid=BX.bitrix_sessid();BX.ajax.post(t,i,BX.delegate(function(t){if(t!="error"){document.getElementById("ext-link-list-div").innerHTML="";ExtLinkDialogAmount(0)}},this))}function ExtLinkDialogAddDescription(){document.getElementById("ext-link-comments-link").style.display="none";desc=document.getElementById("text-link-comments-textarea2").value;ta=document.getElementById("text-link-comments-textarea");ta.style.display="block";ta.value=desc;document.getElementById("ext-link-comments-link-remove").style.display="inline-block"}function ExtLinkDialogDeleteDescription(){document.getElementById("ext-link-comments-link").style.display="block";ta=document.getElementById("text-link-comments-textarea");ta.style.display="none";ta.value="";document.getElementById("ext-link-comments-link-remove").style.display="none"}function ExtLinkDialogAmount(e){linkListNum=document.getElementById("ext-link-spoiler-amount");if(linkListNum!=null){i=parseInt(linkListNum.innerHTML);t=parseInt(e);if(t==0){i=0}else{i=i+t}if(i==0){document.getElementById("ext-link-section").style.display="none"}linkListNum.innerHTML=String(i)}}function CheckPassword(t){if(window.ExtLinkDialogPassCB==null){window.ExtLinkDialogPassCB=document.getElementById("ext-link-pass-cb");window.ExtLinkDialogPassP1=document.getElementById("ext-link-pass-inp1");window.ExtLinkDialogPassP2=document.getElementById("ext-link-pass-inp2");window.ExtLinkDialogPassOk=document.getElementById("ext-link-pass-ico-ok");window.ExtLinkDialogPassWrong=document.getElementById("ext-link-pass-text-wrong");window.ExtLinkDialogPassEmpty=document.getElementById("ext-link-pass-text-empty")}window.ExtLinkDialogPassWrong.style.display="none";window.ExtLinkDialogPassEmpty.style.display="none";if(t==true&&window.ExtLinkDialogPassCB.checked&&String(window.ExtLinkDialogPassP1.value).length==0&&String(window.ExtLinkDialogPassP2.value).length==0){window.ExtLinkDialogPassEmpty.style.display="inline-block";window.ExtLinkDialogPassP2.className="ext-link-pass-inp-error";return false}if(!window.ExtLinkDialogPassCB.checked){return true}if(window.ExtLinkDialogPassP1.value==window.ExtLinkDialogPassP2.value&&String(window.ExtLinkDialogPassP1.value).length>0){window.ExtLinkDialogPassOk.style.display="inline-block";window.ExtLinkDialogPassP2.className="ext-link-pass-inp";window.ExtLinkDialogPassWrong.style.display="none";return true}if(String(window.ExtLinkDialogPassP1.value).length>0&&String(window.ExtLinkDialogPassP2.value).length>0){window.ExtLinkDialogPassWrong.style.display="inline-block";window.ExtLinkDialogPassP2.className="ext-link-pass-inp-error"}window.ExtLinkDialogPassOk.style.display="none";return false}var tmr=false;function onKeyPress(){if(tmr!==false)clearTimeout(tmr);tmr=window.setTimeout(function(){CheckPassword()},500)}
//# sourceMappingURL=extlinks.map.js