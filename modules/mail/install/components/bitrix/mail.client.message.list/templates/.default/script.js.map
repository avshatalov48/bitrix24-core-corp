{"version":3,"file":"script.js","sources":["src/js/progressbar.es6.js","src/js/counters.es6.js","src/js/leftmenu.es6.js","src/js/list.es6.js","script.es6.js"],"sourcesContent":["export class ProgressBar\n{\n\t#node;\n\t#errorTitleNode;\n\t#errorTextNode;\n\t#errorBoxNode;\n\t#syncButton;\n\t#errorHintNode;\n\n\tconstructor(node)\n\t{\n\t\tthis.#node = node;\n\t}\n\n\tsetSyncButton(button)\n\t{\n\t\tthis.#syncButton = button;\n\t}\n\n\tgetSyncButton()\n\t{\n\t\treturn this.#syncButton;\n\t}\n\n\tgetErrorBoxNode()\n\t{\n\t\treturn this.#errorBoxNode;\n\t}\n\n\tsetErrorBoxNode(errorBoxNode)\n\t{\n\t\tthis.#errorBoxNode = errorBoxNode;\n\t}\n\n\tsetErrorTitleNode(errorTitleNode)\n\t{\n\t\tthis.#errorTitleNode = errorTitleNode;\n\t}\n\n\tsetErrorTextNode(errorTextNode)\n\t{\n\t\tthis.#errorTextNode = errorTextNode;\n\t}\n\n\tsetErrorHintNode(errorHintNode)\n\t{\n\t\tthis.#errorHintNode = errorHintNode;\n\t}\n\n\tgetErrorTextNode()\n\t{\n\t\treturn this.#errorTextNode;\n\t}\n\n\tgetErrorHintNode()\n\t{\n\t\treturn this.#errorHintNode;\n\t}\n\n\tgetErrorTitleNode()\n\t{\n\t\treturn this.#errorTitleNode;\n\t}\n\n\tshow()\n\t{\n\t\tif(this.getSyncButton() !== undefined) this.getSyncButton().setWaiting(true);\n\t\tthis.#node.classList.add(\"mail-progress-show\");\n\t\tthis.#node.classList.remove(\"mail-progress-hide\");\n\t}\n\n\thide()\n\t{\n\t\tif(this.getSyncButton() !== undefined) this.getSyncButton().setWaiting(false);\n\t\tthis.#node.classList.add(\"mail-progress-hide\");\n\t\tthis.#node.classList.remove(\"mail-progress-show\");\n\t}\n\n\thideErrorBox()\n\t{\n\t\tthis.#errorBoxNode.classList.add(\"mail-hidden-element\");\n\t\tthis.#errorBoxNode.classList.remove(\"mail-visible-element\");\n\t}\n\n\tshowErrorBox()\n\t{\n\t\tthis.#errorBoxNode.classList.add(\"mail-visible-element\");\n\t\tthis.#errorBoxNode.classList.remove(\"mail-hidden-element\");\n\t}\n}","import { BaseEvent, EventEmitter } from \"main.core.events\";\n\nexport class Counters\n{\n\tcounters = [];\n\thiddenCountersForTotalCounter =[];\n\t#name;\n\n\tconstructor(name)\n\t{\n\t\tthis.#name = name;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.#name;\n\t}\n\n\tsetHiddenCountersForTotalCounter(counterNames)\n\t{\n\t\tfor (let counter of counterNames)\n\t\t{\n\t\t\tthis.hiddenCountersForTotalCounter[counter] = 'disabled';\n\t\t}\n\t}\n\n\tgetTotalCounter()\n\t{\n\t\tlet counters = 0;\n\t\tfor (let name in this.counters)\n\t\t{\n\t\t\tif(name in this.hiddenCountersForTotalCounter)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tcounters += this.counters[name];\n\t\t}\n\n\t\treturn counters;\n\t}\n\n\tgetCounterObjects()\n\t{\n\t\treturn this.counters;\n\t}\n\n\tgetCounter(name)\n\t{\n\t\treturn this.counters[name];\n\t}\n\n\taddCounter(name,count)\n\t{\n\t\tthis.counters[name] = Number(count);\n\t\treturn this.counters[name];\n\t}\n\n\taddCounters(counters)\n\t{\n\t\tlet resultCounters = {};\n\n\t\tfor (let i = 0; i < counters.length; i++)\n\t\t{\n\t\t\tconst counter = counters[i]\n\t\t\tconst path = counter['path'];\n\t\t\tthis.addCounter(path,counter['count']);\n\t\t\tresultCounters[path] = counter['count'];\n\t\t}\n\n\t\tconst event = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tcounters: resultCounters,\n\t\t\t\tname: this.getName(),\n\t\t\t}\n\t\t});\n\t\tEventEmitter.emit('BX.Mail.Home:updatingCounters', event);\n\t}\n\n\t/*Set counters as when adding. Old counters with different names are retained*/\n\tsetCounters(counters)\n\t{\n\t\tthis.addCounters(counters);\n\t}\n\n\tisExists(name)\n\t{\n\t\treturn this.counters[name] !== undefined;\n\t}\n\n\tincreaseCounter(name,count = 1 )\n\t{\n\t\tif(name in this.hiddenCountersForTotalCounter)\n\t\t{\n\t\t\treturn \"hidden counters for total counter\";\n\t\t}\n\n\t\tif(!this.isExists(name))\n\t\t{\n\t\t\treturn \"no counter\";\n\t\t}\n\t\tthis.counters[name] += Number(count);\n\t}\n\n\tlowerCounter(name,count = 1 )\n\t{\n\t\tif(name in this.hiddenCountersForTotalCounter)\n\t\t{\n\t\t\treturn \"hidden counters for total counter\";\n\t\t}\n\n\t\tif(!this.isExists(name))\n\t\t{\n\t\t\treturn \"no counter\";\n\t\t}\n\n\t\tconst newValue = this.counters[name] - Number(count);\n\t\tif(newValue < 0)\n\t\t{\n\t\t\treturn \"negative value\";\n\t\t}\n\n\t\tthis.counters[name] = newValue;\n\t}\n\n\t/*Change counters by rule*/\n\tupdateCounters(counters = [\n\t\t{\n\t\t\tname: 'counter1',\n\t\t\tcount: 2,\n\t\t\tincrease: false,\n\t\t\tlower: true,\n\t\t},\n\t\t{\n\t\t\tname: 'counter2',\n\t\t\tcount: 2,\n\t\t\tincrease: true,\n\t\t\tlower: false,\n\t\t},\n\t])\n\t{\n\t\tlet resultCounters = {};\n\t\tlet countersAreNotLoadedFromTheServer = false;\n\n\t\tfor (let i = 0; i < counters.length; i++)\n\t\t{\n\t\t\tconst counter = counters[i];\n\t\t\tconst name = counter['name'];\n\n\t\t\tif(counter['lower'])\n\t\t\t{\n\t\t\t\tif(this.lowerCounter(name,counter['count']) === \"negative value\")\n\t\t\t\t{\n\t\t\t\t\tcountersAreNotLoadedFromTheServer = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(counter['increase'] && countersAreNotLoadedFromTheServer === false)\n\t\t\t{\n\t\t\t\tthis.increaseCounter(name,counter['count'])\n\t\t\t}\n\n\t\t\tresultCounters[name] = this.getCounter(name);\n\t\t}\n\n\t\tconst event = new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tcounters: resultCounters,\n\t\t\t\tname: this.getName(),\n\t\t\t}\n\t\t});\n\t\tEventEmitter.emit('BX.Mail.Home:updatingCounters', event);\n\t}\n}","import { EventEmitter } from \"main.core.events\";\nimport { DirectoryMenu } from 'mail.directorymenu';\n\nexport class LeftMenu\n{\n\tconstructor(config={\n\t\tdirsWithUnseenMailCounters: {},\n\t\tmailboxId:'',\n\t\tfilterId: '',\n\t})\n\t{\n\t\tconst leftDirectoryMenuWrapper = document.querySelector('.mail-left-menu-wrapper');\n\n\t\tthis.directoryMenu = new DirectoryMenu({\n\t\t\tdirsWithUnseenMailCounters: config['dirsWithUnseenMailCounters'],\n\t\t\tfilterId: config['filterId'],\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Mail.Sync:newLettersArrived', () => {\n\n\t\t\tBX.ajax.runComponentAction('bitrix:mail.client.message.list', 'getDirsWithUnseenMailCounters', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tmailboxId: config['mailboxId'],\n\t\t\t\t},\n\t\t\t}).then(response => {\n\t\t\t\tconst data = response.data || {};\n\t\t\t\tBX.Mail.Home.Counters.setCounters(data);\n\t\t\t});\n\t\t});\n\n\t\tleftDirectoryMenuWrapper.append(this.directoryMenu.getNode());\n\t}\n}","import { EventEmitter } from \"main.core.events\";\nimport { Loc } from 'main.core';\n\nexport class List\n{\n\tconstructor(options)\n\t{\n\t\tthis.pageCounter = options.pageCounter;\n\t\tthis.pageCounterTitle = options.pageCounterTitle;\n\t\tthis.mailReadAllButton = options.mailReadAllButton;\n\t\tthis.gridId = options.gridId;\n\t\tthis.mailboxId = options.mailboxId;\n\t\tthis.canMarkSpam = options.canMarkSpam;\n\t\tthis.canDelete = options.canDelete;\n\t\tthis.ERROR_CODE_CAN_NOT_DELETE = options.ERROR_CODE_CAN_NOT_DELETE;\n\t\tthis.ERROR_CODE_CAN_NOT_MARK_SPAM = options.ERROR_CODE_CAN_NOT_MARK_SPAM;\n\t\tthis.disabledClassName = 'js-disabled';\n\t\tthis.userInterfaceManager = new BX.Mail.Client.Message.List.UserInterfaceManager(options);\n\t\tthis.userInterfaceManager.resetGridSelection = this.resetGridSelection.bind(this);\n\t\tthis.userInterfaceManager.isSelectedRowsHaveClass = this.isSelectedRowsHaveClass.bind(this);\n\t\tthis.userInterfaceManager.getGridInstance = this.getGridInstance.bind(this);\n\t\tthis.cache = {};\n\t\tthis.addEventHandlers();\n\n\t\tBX.Mail.Client.Message.List[options.id] = this;\n\t};\n\n\taddEventHandlers()\n\t{\n\t\t// todo delete this hack\n\t\t// it is here to prevent grid's title changing after filter apply\n\t\tBX.ajax.UpdatePageData = (function() {\n\t\t});\n\n\t\tEventEmitter.subscribe(\n\t\t\t'onSubMenuShow',\n\t\t\tfunction(event){\n\t\t\t\tconst menuItem = event.target;\n\t\t\t\tconst container = menuItem.getMenuWindow().getPopupWindow().getPopupContainer();\n\t\t\t\tlet id = null;\n\n\t\t\t\tif (container)\n\t\t\t\t{\n\t\t\t\t\tid = BX.data(container, 'grid-row-id');\n\t\t\t\t}\n\n\t\t\t\tBX.data(\n\t\t\t\t\tmenuItem.getSubMenu().getPopupWindow().getPopupContainer(),\n\t\t\t\t\t'grid-row-id',\n\t\t\t\t\tmenuItem.gridRowId || id,\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\n\t\tBX.Mail.Home.LeftMenuNode.directoryMenu.setDirectory(this.getCurrentFolder());\n\n\t\tEventEmitter.subscribe('Mail::directoryChanged', () =>\n\t\t{\n\t\t\tthis.resetGridSelection();\n\t\t})\n\n\t\tEventEmitter.subscribe('BX.Mail.Home:updatingCounters', (event) => {\n\t\t\tif(event['data']['name']!== 'mailboxCounters')\n\t\t\t{\n\t\t\t\tconst counters = event['data']['counters'];\n\t\t\t\tBX.Mail.Home.LeftMenuNode.directoryMenu.setCounters(counters);\n\t\t\t\tconst currentFolderCount = counters[this.getCurrentFolder()];\n\n\t\t\t\tif (currentFolderCount !== undefined)\n\t\t\t\t{\n\t\t\t\t\tthis.changeCurrentFolderCount(currentFolderCount);\n\t\t\t\t}\n\n\t\t\t\tBX.Mail.Home.mailboxCounters.setCounters([\n\t\t\t\t\t{\n\t\t\t\t\t\tpath: 'unseenCountInCurrentMailbox',\n\t\t\t\t\t\tcount: BX.Mail.Home.Counters.getTotalCounter(),\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.userInterfaceManager.updateLeftMenuCounter();\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.DirectoryMenu:onChangeFilter', (event) => {\n\t\t\tthis.changeCurrentFolderCount(BX.Mail.Home.Counters.getCounter(event['data']['directory']));\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Main.Menu.Item:onmouseenter', function(event) {\n\t\t\tconst menuItem = event.target;\n\n\t\t\tif (!menuItem.dataset || !menuItem.getMenuWindow())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuWindow = menuItem.getMenuWindow();\n\t\t\tconst subMenuItems = menuWindow.getMenuItems();\n\n\t\t\tconst path = menuItem.dataset.path;\n\t\t\tconst hash = menuItem.dataset.dirMd5;\n\t\t\tconst hasChild = menuItem.dataset.hasChild;\n\n\t\t\tif (!hasChild)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < subMenuItems.length; i++)\n\t\t\t{\n\t\t\t\tconst item = subMenuItems[i];\n\n\t\t\t\tif (item.getId() === path)\n\t\t\t\t{\n\t\t\t\t\tconst hasSubMenu = item.hasSubMenu();\n\n\t\t\t\t\tif (hasSubMenu)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.showSubMenu();\n\t\t\t\t\t\tconst subMenu = item.getSubMenu();\n\n\t\t\t\t\t\tlet hasLoadingItem = false;\n\n\t\t\t\t\t\tif (subMenu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst items = subMenu.getMenuItems();\n\n\t\t\t\t\t\t\tfor (let k = 0; k < items.length; k++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst subItem = items[k];\n\n\t\t\t\t\t\t\t\tif (subItem.getId() === 'loading')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\thasLoadingItem = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!hasLoadingItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.loadLevelMenu(item, hash);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\n\t\tconst itemsMenu = document.querySelectorAll('.ical-event-control-menu');\n\n\t\tfor (let i = 0; i < itemsMenu.length; i++)\n\t\t{\n\t\t\titemsMenu[i].addEventListener('click', this.showICalMenuDropdown.bind(this));\n\t\t}\n\n\t\tBX.bindDelegate(document.body, 'click', { className: 'ical-event-control-button' }, this.onClickICalButton.bind(this));\n\t}\n\n\tchangeCurrentFolderCount(count)\n\t{\n\t\tif(count > 0){\n\t\t\tthis.pageCounter.textContent = count;\n\t\t\tthis.pageCounterTitle.classList.remove(\"main-ui-hide\");\n\t\t\tthis.mailReadAllButton.classList.remove(\"main-ui-hide\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.pageCounterTitle.classList.add(\"main-ui-hide\");\n\t\t\tthis.mailReadAllButton.classList.add(\"main-ui-hide\");\n\t\t}\n\t}\n\n\tloadLevelMenu(menuItem, hash)\n\t{\n\t\tconst menu = this.getCache(menuItem.getId());\n\t\tconst popup = BX.Main.PopupManager.getPopupById('menu-popup-popup-submenu-' + menuItem.getId());\n\n\t\tif (popup)\n\t\t{\n\t\t\tpopup.destroy();\n\t\t}\n\n\t\tif (menu)\n\t\t{\n\t\t\tmenuItem.destroySubMenu();\n\t\t\tmenuItem.addSubMenu(menu);\n\t\t\tmenuItem.showSubMenu();\n\t\t\treturn;\n\t\t}\n\n\t\tconst subItem = {\n\t\t\t'id': 'loading',\n\t\t\t'text': Loc.getMessage('MAIL_CLIENT_BUTTON_LOADING'),\n\t\t\t'disabled': true,\n\t\t};\n\n\t\tmenuItem.destroySubMenu();\n\t\tmenuItem.addSubMenu([subItem]);\n\t\tmenuItem.showSubMenu();\n\n\t\tBX.ajax.runComponentAction('bitrix:mail.client.config.dirs', 'level', {\n\t\t\tmode: 'class',\n\t\t\tdata: { mailboxId: this.mailboxId, dir: { path: menuItem.getId(), dirMd5: hash } },\n\t\t}).then(\n\t\t\tfunction(response) {\n\t\t\t\tconst dirs = response.data.dirs;\n\t\t\t\tconst items = [];\n\n\t\t\t\tfor (let i = 0; i < dirs.length; i++)\n\t\t\t\t{\n\t\t\t\t\tconst hasChild = /(HasChildren)/i.test(dirs[i].FLAGS);\n\t\t\t\t\tconst item = {\n\t\t\t\t\t\t'id': dirs[i].PATH,\n\t\t\t\t\t\t'text': dirs[i].NAME,\n\t\t\t\t\t\t'dataset': {\n\t\t\t\t\t\t\t'path': dirs[i].PATH,\n\t\t\t\t\t\t\t'dirMd5': dirs[i].DIR_MD5,\n\t\t\t\t\t\t\t'isDisabled': dirs[i].IS_DISABLED,\n\t\t\t\t\t\t\t'hasChild': hasChild,\n\t\t\t\t\t\t},\n\t\t\t\t\t\titems: hasChild ? [{\n\t\t\t\t\t\t\tid: 'loading',\n\t\t\t\t\t\t\t'text': Loc.getMessage('MAIL_CLIENT_BUTTON_LOADING'),\n\t\t\t\t\t\t\t'disabled': true,\n\t\t\t\t\t\t}] : [],\n\t\t\t\t\t};\n\n\t\t\t\t\titems.push(item);\n\t\t\t\t}\n\n\t\t\t\tthis.setCache(menuItem.getId(), items);\n\n\t\t\t\tconst popup = BX.Main.PopupManager.getPopupById('menu-popup-popup-submenu-' + menuItem.getId());\n\t\t\t\tconst isShown = menuItem.getMenuWindow().getPopupWindow().isShown();\n\n\t\t\t\tif (popup)\n\t\t\t\t{\n\t\t\t\t\tpopup.destroy();\n\t\t\t\t}\n\n\t\t\t\tif (isShown)\n\t\t\t\t{\n\t\t\t\t\tmenuItem.destroySubMenu();\n\t\t\t\t\tmenuItem.addSubMenu(items);\n\t\t\t\t\tmenuItem.showSubMenu();\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction(response) {\n\t\t\t}.bind(this),\n\t\t);\n\t}\n\n\tonCrmClick(id)\n\t{\n\t\tconst selected = this.getGridInstance().getRows().getSelected();\n\t\tconst row = id ? this.getGridInstance().getRows().getById(id) : selected[0];\n\t\tif (!(row && row.node))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst addToCrm = this.userInterfaceManager.isAddToCrmActionAvailable(row.node);\n\t\tconst messageIdNode = row.node.querySelector('[data-message-id]');\n\t\tif (!(messageIdNode.dataset && messageIdNode.dataset.messageId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(id === undefined)\n\t\t{\n\t\t\tthis.resetGridSelection();\n\t\t}\n\n\t\tif (addToCrm)\n\t\t{\n\t\t\tif (typeof this.isAddingToCrmInProgress !== \"object\")\n\t\t\t{\n\t\t\t\tthis.isAddingToCrmInProgress = {};\n\t\t\t}\n\t\t\tif (this.isAddingToCrmInProgress[id] === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isAddingToCrmInProgress[id] = true;\n\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'bitrix:mail.client',\n\t\t\t\t'createCrmActivity',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmessageId: messageIdNode.dataset.messageId,\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t'groupCount': selected.length,\n\t\t\t\t\t\t'bindings': this.getRowsBindings([row]),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(\n\t\t\t\tfunction(id) {\n\t\t\t\t\tthis.isAddingToCrmInProgress[id] = false;\n\t\t\t\t\tthis.notify(Loc.getMessage('MAIL_MESSAGE_LIST_NOTIFY_ADDED_TO_CRM'));\n\t\t\t\t}.bind(this, id),\n\t\t\t\tfunction(json) {\n\t\t\t\t\tthis.isAddingToCrmInProgress[id] = false;\n\t\t\t\t\tif (json.errors && json.errors.length > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.notify(json.errors.map(\n\t\t\t\t\t\t\tfunction(item) {\n\t\t\t\t\t\t\t\treturn item.message;\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t).join('<br>'), 5000);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.notify(Loc.getMessage('MAIL_MESSAGE_LIST_NOTIFY_ADD_TO_CRM_ERROR'));\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.ajax.runComponentAction(\n\t\t\t\t'bitrix:mail.client',\n\t\t\t\t'removeCrmActivity',\n\t\t\t\t{\n\t\t\t\t\tmode: 'ajax',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmessageId: messageIdNode.dataset.messageId,\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t'groupCount': selected.length,\n\t\t\t\t\t\t'bindings': this.getRowsBindings([row]),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t).then(function(messageIdNode) {\n\t\t\t\tthis.userInterfaceManager.onCrmBindingDeleted(messageIdNode.dataset.messageId);\n\t\t\t\tthis.notify(Loc.getMessage('MAIL_MESSAGE_LIST_NOTIFY_EXCLUDED_FROM_CRM'));\n\t\t\t}.bind(this, messageIdNode));\n\t\t}\n\n\t\tlet selectedIds = this.getGridInstance().getRows().getSelectedIds();\n\t\tif(selectedIds.length === 1 && selectedIds[0]===id)\n\t\t{\n\t\t\tthis.resetGridSelection();\n\t\t}\n\t}\n\n\tonViewClick(id)\n\t{\n\t\tif (id === undefined && this.getGridInstance().getRows().getSelectedIds().length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\t// @TODO: path\n\t\tBX.SidePanel.Instance.open(\"/mail/message/\" + id, {\n\t\t\twidth: 1080,\n\t\t\tloader: 'view-mail-loader',\n\t\t});\n\t}\n\n\tonDeleteImmediately(id)\n\t{\n\t\tlet additionalOptions =\n\t\t{\n\t\t\t'deleteImmediately' : true,\n\t\t};\n\t\tthis.onDeleteClick(id,additionalOptions);\n\t}\n\n\tonDeleteClick(id,additionalOptions)\n\t{\n\t\tconst selected = this.getGridInstance().getRows().getSelected();\n\t\tif (id === undefined && selected.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!this.canDelete)\n\t\t{\n\t\t\tthis.showDirsSlider();\n\t\t\treturn;\n\t\t}\n\t\tlet options = {\n\t\t\tparams: (additionalOptions !== undefined) ? additionalOptions : {},\n\t\t\tkeepRows: true,\n\t\t\tanalyticsLabel: {\n\t\t\t\t'groupCount': selected.length,\n\t\t\t\t'bindings': this.getRowsBindings(id ? [this.getGridInstance().getRows().getById(id)] : selected),\n\t\t\t},\n\t\t};\n\t\tlet selectedIds;\n\n\t\tif(id === undefined)\n\t\t{\n\t\t\tselectedIds = BX.Mail.Home.Grid.getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectedIds = [id];\n\t\t}\n\n\t\tselectedIds = this.filterRowsByClassName(this.disabledClassName, selectedIds, true);\n\t\toptions.ids = selectedIds;\n\n\t\tif (this.userInterfaceManager.isCurrentFolderTrash || (additionalOptions !== undefined && additionalOptions['deleteImmediately']) )\n\t\t{\n\t\t\tconst confirmPopup = this.getConfirmDeletePopup(options);\n\t\t\tconfirmPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Mail.Home.Grid.hideRowByIds(selectedIds);\n\n\t\t\tconst unseenRowsIdsCount = this.filterRowsByClassName('mail-msg-list-cell-unseen', selectedIds).length;\n\n\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t{\n\t\t\t\t\tname: this.getCurrentFolder(),\n\t\t\t\t\tlower: true,\n\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t},\n\t\t\t]);\n\n\t\t\tthis.runAction('delete', options,() =>\n\t\t\t\tBX.Mail.Home.Grid.reloadTable()\n\t\t\t);\n\t\t\tif(id === undefined)\n\t\t\t{\n\t\t\t\tthis.resetGridSelection();\n\t\t\t}\n\t\t}\n\t}\n\n\tonMoveToFolderClick(event)\n\t{\n\t\tconst folderOptions = event.currentTarget.dataset;\n\t\tlet id = undefined;\n\t\tconst popupSubmenu = BX.findParent(event.currentTarget, { className: 'popup-window' });\n\t\tif (popupSubmenu)\n\t\t{\n\t\t\tid = BX.data(popupSubmenu, 'grid-row-id');\n\t\t}\n\t\tconst isDisabled = JSON.parse(folderOptions.isDisabled);\n\t\tconst toFolderByPath = folderOptions.path;\n\t\tconst toFolderByName = toFolderByPath;\n\n\t\tif ((id === undefined && this.getGridInstance().getRows().getSelectedIds().length === 0) || isDisabled)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet selected = this.getGridInstance().getRows().getSelected();\n\t\tlet idsForMoving = (id ? [id] : this.getGridInstance().getRows().getSelectedIds());\n\t\tidsForMoving = this.filterRowsByClassName(this.disabledClassName, idsForMoving, true);\n\t\tif (!idsForMoving.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// to hide the context menu\n\t\tBX.onCustomEvent('Grid::updated');\n\n\t\tlet selectedIds;\n\n\t\tif(id === undefined)\n\t\t{\n\t\t\tselectedIds = BX.Mail.Home.Grid.getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectedIds = [id];\n\t\t}\n\n\t\tBX.Mail.Home.Grid.hideRowByIds(selectedIds);\n\n\t\tconst unseenRowsIdsCount = this.filterRowsByClassName('mail-msg-list-cell-unseen', selectedIds).length;\n\n\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t{\n\t\t\t\tname:toFolderByName,\n\t\t\t\tincrease: true,\n\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: this.getCurrentFolder(),\n\t\t\t\tlower: true,\n\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t},\n\t\t]);\n\n\t\tthis.runAction(\n\t\t\t'moveToFolder',\n\t\t\t{\n\t\t\t\tkeepRows: true,\n\t\t\t\tids: idsForMoving,\n\t\t\t\tparams: {\n\t\t\t\t\tfolder: toFolderByPath,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t'groupCount': selected.length,\n\t\t\t\t\t'bindings': this.getRowsBindings(id ? [this.getGridInstance().getRows().getById(id)] : selected),\n\t\t\t\t},\n\t\t\t},\n\t\t\t()=> {\n\t\t\t\tBX.Mail.Home.Grid.reloadTable();\n\t\t\t}\n\t\t);\n\t\tif(id === undefined)\n\t\t{\n\t\t\tthis.resetGridSelection();\n\t\t}\n\t}\n\n\tonReadClick(id)\n\t{\n\t\tlet selected = [];\n\t\tlet resultIds = [];\n\n\t\tif(id === undefined)\n\t\t{\n\t\t\tselected = this.getGridInstance().getRows().getSelected();\n\t\t\tresultIds = this.getGridInstance().getRows().getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet selectedIds = this.getGridInstance().getRows().getSelectedIds();\n\t\t\tif(selectedIds.length === 1 && selectedIds[0]===id)\n\t\t\t{\n\t\t\t\t/*if the action is non-group, but one cell is selected,\n\t\t\t\tthen the action was performed through the \"Action panel\"\n\t\t\t\tand the selection should be reset*/\n\t\t\t\tselected = this.getGridInstance().getRows().getSelected();\n\t\t\t\tresultIds = selectedIds;\n\t\t\t\tid = undefined;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresultIds = [id];\n\t\t\t}\n\n\t\t}\n\t\tif (id === undefined && selected.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst actionName = 'all' == id || this.isSelectedRowsHaveClass('mail-msg-list-cell-unseen', id) ? 'markAsSeen' : 'markAsUnseen';\n\n\t\tresultIds = this.filterRowsByClassName('mail-msg-list-cell-unseen', resultIds, actionName !== 'markAsSeen');\n\t\tresultIds = this.filterRowsByClassName(this.disabledClassName, resultIds, true);\n\n\t\tif (!resultIds.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst handler = function() {\n\t\t\tthis.userInterfaceManager.onMessagesRead(resultIds, { action: actionName });\n\t\t\tconst currentFolder = this.getCurrentFolder();\n\n\t\t\tconst oldMessagesCount = actionName !== 'markAsSeen'? this.isSelectedRowsHaveClass('mail-msg-list-cell-old') : 0;\n\t\t\tlet countMessages = resultIds.length - oldMessagesCount;\n\n\t\t\tif (actionName === 'markAsSeen')\n\t\t\t{\n\t\t\t\tif ('all' === id)\n\t\t\t\t{\n\t\t\t\t\tcountMessages = BX.Mail.Home.Counters.getCounter(currentFolder) - oldMessagesCount;\n\t\t\t\t}\n\t\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t\t{\n\t\t\t\t\t\tname: currentFolder,\n\t\t\t\t\t\tlower: true,\n\t\t\t\t\t\tcount: countMessages,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t\t{\n\t\t\t\t\t\tname: currentFolder,\n\t\t\t\t\t\tincrease: true,\n\t\t\t\t\t\tcount: countMessages,\n\t\t\t\t\t},\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tif(id === undefined) {\n\t\t\t\tthis.resetGridSelection();\n\t\t\t}\n\n\t\t\tif ('all' == id)\n\t\t\t{\n\t\t\t\tresultIds['for_all'] = this.mailboxId + '-' + this.userInterfaceManager.getCurrentFolder();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\n\t\t\t}\n\n\t\t\tthis.userInterfaceManager.updateUnreadCounters();\n\n\t\t\tthis.runAction(actionName, {\n\t\t\t\tids: resultIds,\n\t\t\t\tkeepRows: true,\n\t\t\t\tsuccessParams: actionName,\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t'groupCount': selected.length,\n\t\t\t\t\t'bindings': this.getRowsBindings(id ? [this.getGridInstance().getRows().getById(id)] : selected),\n\t\t\t\t},\n\t\t\t\tonSuccess: false,\n\t\t\t});\n\n\t\t\treturn true;\n\t\t};\n\t\thandler.apply(this);\n\t}\n\n\tonSpamClick(id)\n\t{\n\t\tconst selected = this.getGridInstance().getRows().getSelected();\n\t\tif (id === undefined && selected.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!this.canMarkSpam)\n\t\t{\n\t\t\tthis.showDirsSlider();\n\t\t\treturn;\n\t\t}\n\t\tconst actionName = this.isSelectedRowsHaveClass('js-spam', id) ? 'restoreFromSpam' : 'markAsSpam';\n\t\tlet resultIds = this.filterRowsByClassName('js-spam', id, actionName !== 'restoreFromSpam');\n\t\tresultIds = this.filterRowsByClassName(this.disabledClassName, resultIds, true);\n\t\tif (!resultIds.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst options = {\n\t\t\tkeepRows: true,\n\t\t\tanalyticsLabel: {\n\t\t\t\t'groupCount': selected.length,\n\t\t\t\t'bindings': this.getRowsBindings(id ? [this.getGridInstance().getRows().getById(id)] : selected),\n\t\t\t},\n\t\t};\n\n\t\tlet selectedIds;\n\n\t\tif(id === undefined)\n\t\t{\n\t\t\tselectedIds = BX.Mail.Home.Grid.getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectedIds = [id];\n\t\t}\n\n\t\toptions.ids = selectedIds;\n\n\t\tBX.Mail.Home.Grid.hideRowByIds(selectedIds);\n\n\t\tconst unseenRowsIdsCount = this.filterRowsByClassName('mail-msg-list-cell-unseen', selectedIds).length;\n\n\t\tif(actionName === 'markAsSpam')\n\t\t{\n\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t{\n\t\t\t\t\tname: this.userInterfaceManager.spamDir,\n\t\t\t\t\tincrease: true,\n\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: this.getCurrentFolder(),\n\t\t\t\t\tlower: true,\n\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t{\n\t\t\t\t\tname: this.userInterfaceManager.spamDir,\n\t\t\t\t\tlower: true,\n\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: this.userInterfaceManager.inboxDir,\n\t\t\t\t\tincrease: true,\n\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\n\t\tthis.runAction(actionName, options,() =>\n\t\t\tBX.Mail.Home.Grid.reloadTable()\n\t\t);\n\t\tif(id === undefined)\n\t\t{\n\t\t\tthis.resetGridSelection();\n\t\t}\n\t}\n\n\tgetConfirmDeletePopup(options)\n\t{\n\t\treturn new BX.UI.Dialogs.MessageBox({\n\t\t\ttitle: Loc.getMessage('MAIL_MESSAGE_LIST_CONFIRM_TITLE'),\n\t\t\tmessage: Loc.getMessage('MAIL_MESSAGE_LIST_CONFIRM_DELETE'),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\tcolor: BX.UI.Button.Color.DANGER,\n\t\t\t\t\ttext: Loc.getMessage('MAIL_MESSAGE_LIST_CONFIRM_DELETE_BTN'),\n\t\t\t\t\tonclick: (function(button) {\n\n\t\t\t\t\t\tconst unseenRowsIdsCount = this.filterRowsByClassName('mail-msg-list-cell-unseen', options.ids).length;\n\n\t\t\t\t\t\tBX.Mail.Home.Counters.updateCounters([\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: this.getCurrentFolder(),\n\t\t\t\t\t\t\t\tlower: true,\n\t\t\t\t\t\t\t\tcount: unseenRowsIdsCount,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]);\n\n\t\t\t\t\t\tthis.runAction('delete', options,() =>\n\t\t\t\t\t\t\tBX.Mail.Home.Grid.reloadTable()\n\t\t\t\t\t\t);\n\t\t\t\t\t\tbutton.getContext().close();\n\t\t\t\t\t\tBX.Mail.Home.Grid.hideRowByIds(options.ids);\n\t\t\t\t\t}).bind(this),\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.CancelButton({\n\t\t\t\t\tonclick: function(button) {\n\t\t\t\t\t\tbutton.getContext().close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tresetGridSelection()\n\t{\n\t\tBX.onCustomEvent('Mail::resetGridSelection');\n\t\tthis.getGridInstance().getRows().unselectAll();\n\t\tthis.getGridInstance().adjustCheckAllCheckboxes();\n\t\tBX.Mail.Home.Grid.hidePanel();\n\t}\n\n\tisSelectedRowsHaveClass(className, id)\n\t{\n\t\tlet selectedIds;\n\t\tif(id === undefined)\n\t\t{\n\t\t\tselectedIds = this.getGridInstance().getRows().getSelectedIds();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectedIds = [id];\n\t\t}\n\t\tconst ids = selectedIds.length ? selectedIds : (id ? [id] : []);\n\n\t\tlet selectedLinesWithClassNumber = 0;\n\n\t\tfor (let i = 0; i < ids.length; i++)\n\t\t{\n\t\t\tconst row = this.getGridInstance().getRows().getById(ids[i]);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tconst columns = row.node.getElementsByClassName(className);\n\t\t\t\tif (columns && columns.length)\n\t\t\t\t{\n\t\t\t\t\tselectedLinesWithClassNumber++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn selectedLinesWithClassNumber;\n\t}\n\n\tfilterRowsByClassName(className, ids, isReversed)\n\t{\n\t\tlet resIds = [];\n\t\tif ('all' == ids)\n\t\t{\n\t\t\tresIds = this.getGridInstance().getRows().getBodyChild().map(\n\t\t\t\tfunction(current) {\n\t\t\t\t\treturn current.getId();\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse if (Array.isArray(ids))\n\t\t{\n\t\t\tresIds = ids;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst selectedIds = this.getGridInstance().getRows().getSelectedIds();\n\t\t\tresIds = selectedIds.length ? selectedIds : (ids ? [ids] : []);\n\t\t}\n\t\tconst resultIds = [];\n\t\tfor (let i = resIds.length - 1; i >= 0; i--)\n\t\t{\n\t\t\tconst row = this.getGridInstance().getRows().getById(resIds[i]);\n\t\t\tif (row && row.node)\n\t\t\t{\n\t\t\t\tconst columns = row.node.getElementsByClassName(className);\n\t\t\t\tif (!isReversed && (columns && columns.length))\n\t\t\t\t{\n\t\t\t\t\tresultIds.push(resIds[i]);\n\t\t\t\t}\n\t\t\t\telse if (isReversed && !(columns && columns.length))\n\t\t\t\t{\n\t\t\t\t\tresultIds.push(resIds[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn resultIds;\n\t}\n\n\tnotify(text, delay)\n\t{\n\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\tautoHideDelay: delay > 0 ? delay : 2000,\n\t\t\tcontent: text ? text : Loc.getMessage('MAIL_MESSAGE_LIST_NOTIFY_SUCCESS'),\n\t\t});\n\t}\n\n\trunAction(actionName, options, actionOnSuccess)\n\t{\n\t\toptions = options ? options : {};\n\n\t\tlet selectedIds = [];\n\n\t\tif (options.ids)\n\t\t{\n\t\t\tselectedIds = options.ids;\n\t\t}\n\t\tif (!selectedIds.length && !selectedIds.for_all)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (!options.keepRows)\n\t\t{\n\t\t\tthis.getGridInstance().tableFade();\n\t\t}\n\t\tconst data = { ids: selectedIds };\n\t\tif (options.params)\n\t\t{\n\t\t\tconst optionsKeys = Object.keys(Object(options.params));\n\t\t\tfor (let nextIndex = 0, len = optionsKeys.length; nextIndex < len; nextIndex++)\n\t\t\t{\n\t\t\t\tconst nextKey = optionsKeys[nextIndex];\n\t\t\t\tconst desc = Object.getOwnPropertyDescriptor(options.params, nextKey);\n\t\t\t\tif (desc !== undefined && desc.enumerable)\n\t\t\t\t{\n\t\t\t\t\tdata[nextKey] = options.params[nextKey];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runComponentAction('bitrix:mail.client', actionName, {\n\t\t\tmode: 'ajax',\n\t\t\tdata: data,\n\t\t\tanalyticsLabel: options.analyticsLabel,\n\t\t}).then(\n\t\t\tfunction() {\n\t\t\t\tif (options.onSuccess === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (options.onSuccess && typeof (options.onSuccess) === \"function\")\n\t\t\t\t{\n\t\t\t\t\toptions.onSuccess.bind(this, selectedIds, options.successParams)();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif(actionOnSuccess === undefined)\n\t\t\t\t{\n\t\t\t\t\tthis.notify();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tactionOnSuccess();\n\t\t\t\t}\n\t\t\t}.bind(this),\n\t\t\tfunction(response) {\n\t\t\t\toptions.onError && typeof (options.onError) === \"function\" ?\n\t\t\t\t\toptions.onError().bind(this, response) :\n\t\t\t\t\tthis.onErrorRequest(response);\n\t\t\t}.bind(this),\n\t\t);\n\t}\n\n\tonErrorRequest(response)\n\t{\n\t\tlet options = {};\n\t\tthis.checkErrorRights(response.errors);\n\t\toptions.errorMessage = response.errors[0].message;\n\t}\n\n\tcheckErrorRights(errors)\n\t{\n\t\tfor (let i = 0; i < errors.length; i++)\n\t\t{\n\t\t\tif (errors[i].code === this.ERROR_CODE_CAN_NOT_DELETE)\n\t\t\t{\n\t\t\t\tthis.canDelete = false;\n\t\t\t}\n\t\t\tif (errors[i].code === this.ERROR_CODE_CAN_NOT_MARK_SPAM)\n\t\t\t{\n\t\t\t\tthis.canMarkSpam = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tshowDirsSlider()\n\t{\n\t\tconst url = BX.util.add_url_param(\"/mail/config/dirs\", {\n\t\t\tmailboxId: this.mailboxId,\n\t\t});\n\t\tBX.SidePanel.Instance.open(url, {\n\t\t\twidth: 640,\n\t\t\tcacheable: false,\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t\tthis.canDelete = true;\n\t\tthis.canMarkSpam = true;\n\t}\n\n\tonDisabledGroupActionClick()\n\t{\n\t}\n\n\tonUnreadCounterClick()\n\t{\n\t\tthis.userInterfaceManager.onUnreadCounterClick();\n\t}\n\n\tgetCurrentFolder()\n\t{\n\t\treturn this.userInterfaceManager.getCurrentFolder();\n\t}\n\n\tgetGridInstance()\n\t{\n\t\treturn BX.Main.gridManager.getById(this.gridId).instance;\n\t}\n\n\tgetRowsBindings(rows)\n\t{\n\t\treturn BX.util.array_unique(Array.prototype.concat.apply(\n\t\t\t[],\n\t\t\trows.map(\n\t\t\t\tfunction(row) {\n\t\t\t\t\tif (!row || !row.node)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Array.prototype.map.call(\n\t\t\t\t\t\trow.node.querySelectorAll('[class^=\"js-bind-\"] [data-type]'),\n\t\t\t\t\t\tfunction(node) {\n\t\t\t\t\t\t\treturn node.dataset.type;\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t),\n\t\t));\n\t}\n\n\tgetCache(key)\n\t{\n\t\tif (!key)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.cache[key] ? this.cache[key] : null;\n\t}\n\n\tsetCache(key, value)\n\t{\n\t\treturn this.cache[key] = value;\n\t}\n\n\tshowICalMenuDropdown(event)\n\t{\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst menu = event.currentTarget.dataset.menu;\n\n\t\tif (!menu)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.iCalMenuDropdown = BX.Main.MenuManager.create({\n\t\t\tid: 'mail-client-message-list-ical-dropdown-menu',\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\titems: JSON.parse(menu),\n\t\t\tzIndex: 7001,\n\t\t\tmaxHeight: 400,\n\t\t\tmaxWidth: 200,\n\t\t\tangle: {\n\t\t\t\tposition: \"top\",\n\t\t\t\toffset: 40,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonPopupClose: function() {\n\t\t\t\t\tthis.removeICalMenuDropdown();\n\t\t\t\t}.bind(this),\n\t\t\t},\n\t\t});\n\t\tthis.iCalMenuDropdown.popupWindow.setBindElement(event.currentTarget);\n\t\tthis.iCalMenuDropdown.show();\n\t}\n\n\tremoveICalMenuDropdown()\n\t{\n\t\tif (this.iCalMenuDropdown)\n\t\t{\n\t\t\tBX.Main.MenuManager.destroy(this.iCalMenuDropdown.id);\n\t\t}\n\t}\n\n\tonClickICalButton(event)\n\t{\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst messageId = event.target.dataset.messageid || event.target.parentNode.dataset.messageid;\n\t\tconst action = event.target.dataset.action || event.target.parentNode.dataset.action;\n\t\tconst button = event.target;\n\n\t\tbutton.classList.add('ui-btn-wait');\n\t\tthis.removeICalMenuDropdown();\n\n\t\tthis.sendICal(messageId, action)\n\t\t\t.then(function() {\n\t\t\t\tbutton.classList.remove('ui-btn-wait');\n\t\t\t\tthis.notify(Loc.getMessage(action === 'cancelled' ? 'MAIL_MESSAGE_ICAL_NOTIFY_REJECT' : 'MAIL_MESSAGE_ICAL_NOTIFY_ACCEPT'));\n\t\t\t}.bind(this))\n\t\t\t.catch(function() {\n\t\t\t\tbutton.classList.remove('ui-btn-wait');\n\t\t\t\tthis.notify(Loc.getMessage('MAIL_MESSAGE_ICAL_NOTIFY_ERROR'));\n\t\t\t}.bind(this));\n\t}\n\n\tsendICal(messageId, action)\n\t{\n\t\treturn new Promise(function(resolve, reject) {\n\t\t\tBX.ajax.runComponentAction('bitrix:mail.client', 'ical', {\n\t\t\t\tmode: 'ajax',\n\t\t\t\tdata: { messageId, action },\n\t\t\t}).then(\n\t\t\t\tfunction() {\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction() {\n\t\t\t\t\treject();\n\t\t\t\t}.bind(this),\n\t\t\t);\n\t\t});\n\t}\n}\n","import { Type, Reflection, Event, Loc } from 'main.core';\nimport { Avatar } from 'mail.avatar';\nimport { EventEmitter } from 'main.core.events';\nimport { MessageGrid } from 'mail.messagegrid';\nimport { ProgressBar } from './src/js/progressbar.es6';\nimport { Counters } from './src/js/counters.es6';\nimport { LeftMenu } from './src/js/leftmenu.es6';\nimport { List } from './src/js/list.es6';\nimport { Button } from 'ui.buttons';\n\nconst namespaceMailHome = Reflection.namespace('BX.Mail.Home');\n\nEventEmitter.subscribe('SidePanel.Slider:onMessage', (event) => {\n\tconst [messageEvent] = event.getCompatData();\n\tif(messageEvent.getEventId() === 'mail-mailbox-config-success')\n\t{\n\t\tBXMailMailbox.sync(namespaceMailHome.ProgressBar, namespaceMailHome.Grid.getId(), false,true);\n\t}\n});\n\nlet sliderPage;\nlet progressBar;\nlet errorBox;\nlet syncButtonWrapper;\n\nlet selectedIdsForRecovery = {};\n\nEvent.ready(() => {\n\n\tsyncButtonWrapper = document.querySelector('[data-role=\"mail-msg-sync-button-wrapper\"]');\n\n\tconst syncButton = new Button({\n\t\tclassName:\"ui-btn ui-btn-themes ui-btn-light-border mail-msg-sync-button\",\n\t\ticon: Button.Icon.BUSINESS,\n\t\tprops: {\n\t\t\ttitle: Loc.getMessage(\"MAIL_MESSAGE_SYNC_BTN_HINT\")\n\t\t},\n\t\tonclick: function() {\n\t\t\tBXMailMailbox.sync(namespaceMailHome.ProgressBar, Loc.getMessage(\"MAIL_MESSAGE_GRID_ID\"),false,true);\n\t\t},\n\t});\n\n\tsyncButtonWrapper.append(\n\t\tsyncButton.getContainer()\n\t)\n\n\tEventEmitter.subscribe('BX.Main.Grid:onBeforeReload', (event) => {\n\t\tconst [grid] = event.getCompatData();\n\t\tif(grid !== {} && grid !== undefined && Loc.getMessage(\"MAIL_MESSAGE_GRID_ID\") === grid.getId())\n\t\t{\n\t\t\tselectedIdsForRecovery = grid.getRows().getSelectedIds();\n\t\t}\n\t});\n\n\tEventEmitter.subscribe('Grid::updated', (event) => {\n\t\tconst [grid] = event.getCompatData();\n\n\t\tif(grid !== {} && grid !== undefined && Loc.getMessage(\"MAIL_MESSAGE_GRID_ID\") === grid.getId())\n\t\t{\n\t\t\tlet rowsWereSelected = false;\n\t\t\tnamespaceMailHome.Grid.getRows().map(function (row)\n\t\t\t{\n\t\t\t\tif(Type.isFunction(selectedIdsForRecovery.indexOf) && selectedIdsForRecovery.indexOf(row.getId()) !== -1)\n\t\t\t\t{\n\t\t\t\t\tif(row.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\trow.select();\n\t\t\t\t\t\trowsWereSelected = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tselectedIdsForRecovery = {}\n\n\t\t\tif(rowsWereSelected)\n\t\t\t{\n\t\t\t\tsetTimeout(\n\t\t\t\t\tfunction ()\n\t\t\t\t\t{\n\t\t\t\t\t\tEventEmitter.emit(window,'Grid::thereSelectedRows');\n\t\t\t\t\t},\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tAvatar.replaceTagsWithAvatars({\n\t\tclassName: 'mail-ui-avatar',\n\t});\n\n\tsliderPage = document.getElementsByClassName(\"ui-slider-page\")[0];\n\tprogressBar = document.querySelector('[data-role=\"mail-progress-bar\"]');\n\tsliderPage.insertBefore(progressBar,sliderPage.firstChild);\n\terrorBox = document.querySelector('[data-role=\"error-box\"]');\n\n\tnamespaceMailHome.ProgressBar = new ProgressBar(progressBar);\n\tnamespaceMailHome.unreadMessageMailboxesMarker = document.querySelector('[data-role=\"unreadMessageMailboxesMarker\"]');;\n\n\tnamespaceMailHome.ProgressBar.setSyncButton(syncButton);\n\tnamespaceMailHome.ProgressBar.setErrorBoxNode(document.querySelector('[data-role=\"error-box\"]'))\n\tnamespaceMailHome.ProgressBar.setErrorTextNode(document.querySelector('[data-role=\"error-box-text\"]'));\n\tnamespaceMailHome.ProgressBar.setErrorHintNode(document.querySelector('[data-role=\"error-box-hint\"]'));\n\tnamespaceMailHome.ProgressBar.setErrorTitleNode(document.querySelector('[data-role=\"error-box-title\"]'));\n});\n\nnamespaceMailHome.Counters = new Counters();\nnamespaceMailHome.mailboxCounters = new Counters('mailboxCounters');\nnamespaceMailHome.Grid = new MessageGrid();\n\nnamespaceMailHome.LeftMenu = LeftMenu;\n\nconst namespaceClientMessage = Reflection.namespace('BX.Mail.Client.Message');\nnamespaceClientMessage.List = List;\n"],"names":["ProgressBar","node","button","errorBoxNode","errorTitleNode","errorTextNode","errorHintNode","getSyncButton","undefined","setWaiting","classList","add","remove","Counters","name","counterNames","counter","hiddenCountersForTotalCounter","counters","count","Number","resultCounters","i","length","path","addCounter","event","BaseEvent","data","getName","EventEmitter","emit","addCounters","isExists","newValue","increase","lower","countersAreNotLoadedFromTheServer","lowerCounter","increaseCounter","getCounter","LeftMenu","config","dirsWithUnseenMailCounters","mailboxId","filterId","leftDirectoryMenuWrapper","document","querySelector","directoryMenu","DirectoryMenu","subscribe","BX","ajax","runComponentAction","mode","then","response","Mail","Home","setCounters","append","getNode","List","options","pageCounter","pageCounterTitle","mailReadAllButton","gridId","canMarkSpam","canDelete","ERROR_CODE_CAN_NOT_DELETE","ERROR_CODE_CAN_NOT_MARK_SPAM","disabledClassName","userInterfaceManager","Client","Message","UserInterfaceManager","resetGridSelection","bind","isSelectedRowsHaveClass","getGridInstance","cache","addEventHandlers","id","UpdatePageData","menuItem","target","container","getMenuWindow","getPopupWindow","getPopupContainer","getSubMenu","gridRowId","LeftMenuNode","setDirectory","getCurrentFolder","currentFolderCount","changeCurrentFolderCount","mailboxCounters","getTotalCounter","updateLeftMenuCounter","dataset","menuWindow","subMenuItems","getMenuItems","hash","dirMd5","hasChild","item","getId","hasSubMenu","showSubMenu","subMenu","hasLoadingItem","items","k","subItem","loadLevelMenu","itemsMenu","querySelectorAll","addEventListener","showICalMenuDropdown","bindDelegate","body","className","onClickICalButton","textContent","menu","getCache","popup","Main","PopupManager","getPopupById","destroy","destroySubMenu","addSubMenu","Loc","getMessage","dir","dirs","test","FLAGS","PATH","NAME","DIR_MD5","IS_DISABLED","push","setCache","isShown","selected","getRows","getSelected","row","getById","addToCrm","isAddToCrmActionAvailable","messageIdNode","messageId","isAddingToCrmInProgress","analyticsLabel","getRowsBindings","notify","json","errors","map","message","join","onCrmBindingDeleted","selectedIds","getSelectedIds","SidePanel","Instance","open","width","loader","additionalOptions","onDeleteClick","showDirsSlider","params","keepRows","Grid","filterRowsByClassName","ids","isCurrentFolderTrash","confirmPopup","getConfirmDeletePopup","show","hideRowByIds","unseenRowsIdsCount","updateCounters","runAction","reloadTable","folderOptions","currentTarget","popupSubmenu","findParent","isDisabled","JSON","parse","toFolderByPath","toFolderByName","idsForMoving","onCustomEvent","folder","resultIds","actionName","handler","onMessagesRead","action","currentFolder","oldMessagesCount","countMessages","updateUnreadCounters","successParams","onSuccess","apply","spamDir","inboxDir","UI","Dialogs","MessageBox","title","buttons","Button","color","Color","DANGER","text","onclick","getContext","close","CancelButton","unselectAll","adjustCheckAllCheckboxes","hidePanel","selectedLinesWithClassNumber","columns","getElementsByClassName","isReversed","resIds","getBodyChild","current","Array","isArray","delay","top","Notification","Center","autoHideDelay","content","actionOnSuccess","for_all","tableFade","optionsKeys","Object","keys","nextIndex","len","nextKey","desc","getOwnPropertyDescriptor","enumerable","onError","onErrorRequest","checkErrorRights","errorMessage","code","url","util","add_url_param","cacheable","allowChangeHistory","onUnreadCounterClick","gridManager","instance","rows","array_unique","prototype","concat","call","type","key","value","stopPropagation","preventDefault","iCalMenuDropdown","MenuManager","create","autoHide","closeByEsc","zIndex","maxHeight","maxWidth","angle","position","offset","events","onPopupClose","removeICalMenuDropdown","popupWindow","setBindElement","messageid","parentNode","sendICal","catch","Promise","resolve","reject","namespaceMailHome","Reflection","namespace","getCompatData","messageEvent","getEventId","BXMailMailbox","sync","sliderPage","progressBar","errorBox","syncButtonWrapper","selectedIdsForRecovery","Event","ready","syncButton","icon","Icon","BUSINESS","props","getContainer","grid","rowsWereSelected","Type","isFunction","indexOf","select","setTimeout","window","Avatar","replaceTagsWithAvatars","insertBefore","firstChild","unreadMessageMailboxesMarker","setSyncButton","setErrorBoxNode","setErrorTextNode","setErrorHintNode","setErrorTitleNode","MessageGrid","namespaceClientMessage"],"mappings":";;;;;;;;;;;;;;;AAAA,KAAaA,WAAb;CASC,uBAAYC,IAAZ,EACA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA;CAAA;;CACC,mDAAaA,IAAb;CACA;;CAZF;CAAA;CAAA,kCAceC,MAdf,EAeC;CACC,2DAAmBA,MAAnB;CACA;CAjBF;CAAA;CAAA,oCAoBC;CACC,+CAAO,IAAP;CACA;CAtBF;CAAA;CAAA,sCAyBC;CACC,+CAAO,IAAP;CACA;CA3BF;CAAA;CAAA,oCA6BiBC,YA7BjB,EA8BC;CACC,6DAAqBA,YAArB;CACA;CAhCF;CAAA;CAAA,sCAkCmBC,cAlCnB,EAmCC;CACC,+DAAuBA,cAAvB;CACA;CArCF;CAAA;CAAA,qCAuCkBC,aAvClB,EAwCC;CACC,8DAAsBA,aAAtB;CACA;CA1CF;CAAA;CAAA,qCA4CkBC,aA5ClB,EA6CC;CACC,8DAAsBA,aAAtB;CACA;CA/CF;CAAA;CAAA,uCAkDC;CACC,+CAAO,IAAP;CACA;CApDF;CAAA;CAAA,uCAuDC;CACC,+CAAO,IAAP;CACA;CAzDF;CAAA;CAAA,wCA4DC;CACC,+CAAO,IAAP;CACA;CA9DF;CAAA;CAAA,2BAiEC;CACC,UAAG,KAAKC,aAAL,OAAyBC,SAA5B,EAAuC,KAAKD,aAAL,GAAqBE,UAArB,CAAgC,IAAhC;CACvC,qDAAWC,SAAX,CAAqBC,GAArB,CAAyB,oBAAzB;CACA,qDAAWD,SAAX,CAAqBE,MAArB,CAA4B,oBAA5B;CACA;CArEF;CAAA;CAAA,2BAwEC;CACC,UAAG,KAAKL,aAAL,OAAyBC,SAA5B,EAAuC,KAAKD,aAAL,GAAqBE,UAArB,CAAgC,KAAhC;CACvC,qDAAWC,SAAX,CAAqBC,GAArB,CAAyB,oBAAzB;CACA,qDAAWD,SAAX,CAAqBE,MAArB,CAA4B,oBAA5B;CACA;CA5EF;CAAA;CAAA,mCA+EC;CACC,6DAAmBF,SAAnB,CAA6BC,GAA7B,CAAiC,qBAAjC;CACA,6DAAmBD,SAAnB,CAA6BE,MAA7B,CAAoC,sBAApC;CACA;CAlFF;CAAA;CAAA,mCAqFC;CACC,6DAAmBF,SAAnB,CAA6BC,GAA7B,CAAiC,sBAAjC;CACA,6DAAmBD,SAAnB,CAA6BE,MAA7B,CAAoC,qBAApC;CACA;CAxFF;CAAA;CAAA;;;;;;;;;;ACEA,KAAaC,QAAb;CAMC,oBAAYC,IAAZ,EACA;CAAA;CAAA,kDALW,EAKX;CAAA,uEAJ+B,EAI/B;;CAAA;CAAA;CAAA;CAAA;;CACC,mDAAaA,IAAb;CACA;;CATF;CAAA;CAAA,8BAYC;CACC,+CAAO,IAAP;CACA;CAdF;CAAA;CAAA,qDAgBkCC,YAhBlC,EAiBC;CAAA,iDACqBA,YADrB;CAAA;;CAAA;CACC,4DACA;CAAA,cADSC,OACT;CACC,eAAKC,6BAAL,CAAmCD,OAAnC,IAA8C,UAA9C;CACA;CAJF;CAAA;CAAA;CAAA;CAAA;CAKC;CAtBF;CAAA;CAAA,sCAyBC;CACC,UAAIE,QAAQ,GAAG,CAAf;;CACA,WAAK,IAAIJ,IAAT,IAAiB,KAAKI,QAAtB,EACA;CACC,YAAGJ,IAAI,IAAI,KAAKG,6BAAhB,EACA;CACC;CACA;;CACDC,QAAAA,QAAQ,IAAI,KAAKA,QAAL,CAAcJ,IAAd,CAAZ;CACA;;CAED,aAAOI,QAAP;CACA;CArCF;CAAA;CAAA,wCAwCC;CACC,aAAO,KAAKA,QAAZ;CACA;CA1CF;CAAA;CAAA,+BA4CYJ,IA5CZ,EA6CC;CACC,aAAO,KAAKI,QAAL,CAAcJ,IAAd,CAAP;CACA;CA/CF;CAAA;CAAA,+BAiDYA,IAjDZ,EAiDiBK,KAjDjB,EAkDC;CACC,WAAKD,QAAL,CAAcJ,IAAd,IAAsBM,MAAM,CAACD,KAAD,CAA5B;CACA,aAAO,KAAKD,QAAL,CAAcJ,IAAd,CAAP;CACA;CArDF;CAAA;CAAA,gCAuDaI,QAvDb,EAwDC;CACC,UAAIG,cAAc,GAAG,EAArB;;CAEA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACK,MAA7B,EAAqCD,CAAC,EAAtC,EACA;CACC,YAAMN,OAAO,GAAGE,QAAQ,CAACI,CAAD,CAAxB;CACA,YAAME,IAAI,GAAGR,OAAO,CAAC,MAAD,CAApB;CACA,aAAKS,UAAL,CAAgBD,IAAhB,EAAqBR,OAAO,CAAC,OAAD,CAA5B;CACAK,QAAAA,cAAc,CAACG,IAAD,CAAd,GAAuBR,OAAO,CAAC,OAAD,CAA9B;CACA;;CAED,UAAMU,KAAK,GAAG,IAAIC,0BAAJ,CAAc;CAC3BC,QAAAA,IAAI,EAAE;CACLV,UAAAA,QAAQ,EAAEG,cADL;CAELP,UAAAA,IAAI,EAAE,KAAKe,OAAL;CAFD;CADqB,OAAd,CAAd;CAMAC,MAAAA,6BAAY,CAACC,IAAb,CAAkB,+BAAlB,EAAmDL,KAAnD;CACA;CAED;;CA5ED;CAAA;CAAA,gCA6EaR,QA7Eb,EA8EC;CACC,WAAKc,WAAL,CAAiBd,QAAjB;CACA;CAhFF;CAAA;CAAA,6BAkFUJ,IAlFV,EAmFC;CACC,aAAO,KAAKI,QAAL,CAAcJ,IAAd,MAAwBN,SAA/B;CACA;CArFF;CAAA;CAAA,oCAuFiBM,IAvFjB,EAwFC;CAAA,UADqBK,KACrB,uEAD6B,CAC7B;;CACC,UAAGL,IAAI,IAAI,KAAKG,6BAAhB,EACA;CACC,eAAO,mCAAP;CACA;;CAED,UAAG,CAAC,KAAKgB,QAAL,CAAcnB,IAAd,CAAJ,EACA;CACC,eAAO,YAAP;CACA;;CACD,WAAKI,QAAL,CAAcJ,IAAd,KAAuBM,MAAM,CAACD,KAAD,CAA7B;CACA;CAnGF;CAAA;CAAA,iCAqGcL,IArGd,EAsGC;CAAA,UADkBK,KAClB,uEAD0B,CAC1B;;CACC,UAAGL,IAAI,IAAI,KAAKG,6BAAhB,EACA;CACC,eAAO,mCAAP;CACA;;CAED,UAAG,CAAC,KAAKgB,QAAL,CAAcnB,IAAd,CAAJ,EACA;CACC,eAAO,YAAP;CACA;;CAED,UAAMoB,QAAQ,GAAG,KAAKhB,QAAL,CAAcJ,IAAd,IAAsBM,MAAM,CAACD,KAAD,CAA7C;;CACA,UAAGe,QAAQ,GAAG,CAAd,EACA;CACC,eAAO,gBAAP;CACA;;CAED,WAAKhB,QAAL,CAAcJ,IAAd,IAAsBoB,QAAtB;CACA;CAED;;CA1HD;CAAA;CAAA,qCAyIC;CAAA,UAdehB,QAcf,uEAd0B,CACzB;CACCJ,QAAAA,IAAI,EAAE,UADP;CAECK,QAAAA,KAAK,EAAE,CAFR;CAGCgB,QAAAA,QAAQ,EAAE,KAHX;CAICC,QAAAA,KAAK,EAAE;CAJR,OADyB,EAOzB;CACCtB,QAAAA,IAAI,EAAE,UADP;CAECK,QAAAA,KAAK,EAAE,CAFR;CAGCgB,QAAAA,QAAQ,EAAE,IAHX;CAICC,QAAAA,KAAK,EAAE;CAJR,OAPyB,CAc1B;CACC,UAAIf,cAAc,GAAG,EAArB;CACA,UAAIgB,iCAAiC,GAAG,KAAxC;;CAEA,WAAK,IAAIf,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGJ,QAAQ,CAACK,MAA7B,EAAqCD,CAAC,EAAtC,EACA;CACC,YAAMN,OAAO,GAAGE,QAAQ,CAACI,CAAD,CAAxB;CACA,YAAMR,IAAI,GAAGE,OAAO,CAAC,MAAD,CAApB;;CAEA,YAAGA,OAAO,CAAC,OAAD,CAAV,EACA;CACC,cAAG,KAAKsB,YAAL,CAAkBxB,IAAlB,EAAuBE,OAAO,CAAC,OAAD,CAA9B,MAA6C,gBAAhD,EACA;CACCqB,YAAAA,iCAAiC,GAAG,IAApC;CACA;CACD;;CAED,YAAGrB,OAAO,CAAC,UAAD,CAAP,IAAuBqB,iCAAiC,KAAK,KAAhE,EACA;CACC,eAAKE,eAAL,CAAqBzB,IAArB,EAA0BE,OAAO,CAAC,OAAD,CAAjC;CACA;;CAEDK,QAAAA,cAAc,CAACP,IAAD,CAAd,GAAuB,KAAK0B,UAAL,CAAgB1B,IAAhB,CAAvB;CACA;;CAED,UAAMY,KAAK,GAAG,IAAIC,0BAAJ,CAAc;CAC3BC,QAAAA,IAAI,EAAE;CACLV,UAAAA,QAAQ,EAAEG,cADL;CAELP,UAAAA,IAAI,EAAE,KAAKe,OAAL;CAFD;CADqB,OAAd,CAAd;CAMAC,MAAAA,6BAAY,CAACC,IAAb,CAAkB,+BAAlB,EAAmDL,KAAnD;CACA;CAzKF;CAAA;CAAA;;KCCae,QAAb,GAEC,oBAKA;CAAA,MALYC,MAKZ,uEALmB;CAClBC,IAAAA,0BAA0B,EAAE,EADV;CAElBC,IAAAA,SAAS,EAAC,EAFQ;CAGlBC,IAAAA,QAAQ,EAAE;CAHQ,GAKnB;CAAA;CACC,MAAMC,wBAAwB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAjC;CAEA,OAAKC,aAAL,GAAqB,IAAIC,gCAAJ,CAAkB;CACtCP,IAAAA,0BAA0B,EAAED,MAAM,CAAC,4BAAD,CADI;CAEtCG,IAAAA,QAAQ,EAAEH,MAAM,CAAC,UAAD;CAFsB,GAAlB,CAArB;CAKAZ,EAAAA,6BAAY,CAACqB,SAAb,CAAuB,gCAAvB,EAAyD,YAAM;CAE9DC,IAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CAA2B,iCAA3B,EAA8D,+BAA9D,EAA+F;CAC9FC,MAAAA,IAAI,EAAE,OADwF;CAE9F3B,MAAAA,IAAI,EAAE;CACLgB,QAAAA,SAAS,EAAEF,MAAM,CAAC,WAAD;CADZ;CAFwF,KAA/F,EAKGc,IALH,CAKQ,UAAAC,QAAQ,EAAI;CACnB,UAAM7B,IAAI,GAAG6B,QAAQ,CAAC7B,IAAT,IAAiB,EAA9B;CACAwB,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsB+C,WAAtB,CAAkChC,IAAlC;CACA,KARD;CASA,GAXD;CAaAkB,EAAAA,wBAAwB,CAACe,MAAzB,CAAgC,KAAKZ,aAAL,CAAmBa,OAAnB,EAAhC;CACA,CA7BF;;KCAaC,IAAb;CAEC,gBAAYC,OAAZ,EACA;CAAA;CACC,SAAKC,WAAL,GAAmBD,OAAO,CAACC,WAA3B;CACA,SAAKC,gBAAL,GAAwBF,OAAO,CAACE,gBAAhC;CACA,SAAKC,iBAAL,GAAyBH,OAAO,CAACG,iBAAjC;CACA,SAAKC,MAAL,GAAcJ,OAAO,CAACI,MAAtB;CACA,SAAKxB,SAAL,GAAiBoB,OAAO,CAACpB,SAAzB;CACA,SAAKyB,WAAL,GAAmBL,OAAO,CAACK,WAA3B;CACA,SAAKC,SAAL,GAAiBN,OAAO,CAACM,SAAzB;CACA,SAAKC,yBAAL,GAAiCP,OAAO,CAACO,yBAAzC;CACA,SAAKC,4BAAL,GAAoCR,OAAO,CAACQ,4BAA5C;CACA,SAAKC,iBAAL,GAAyB,aAAzB;CACA,SAAKC,oBAAL,GAA4B,IAAItB,EAAE,CAACM,IAAH,CAAQiB,MAAR,CAAeC,OAAf,CAAuBb,IAAvB,CAA4Bc,oBAAhC,CAAqDb,OAArD,CAA5B;CACA,SAAKU,oBAAL,CAA0BI,kBAA1B,GAA+C,KAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,IAA7B,CAA/C;CACA,SAAKL,oBAAL,CAA0BM,uBAA1B,GAAoD,KAAKA,uBAAL,CAA6BD,IAA7B,CAAkC,IAAlC,CAApD;CACA,SAAKL,oBAAL,CAA0BO,eAA1B,GAA4C,KAAKA,eAAL,CAAqBF,IAArB,CAA0B,IAA1B,CAA5C;CACA,SAAKG,KAAL,GAAa,EAAb;CACA,SAAKC,gBAAL;CAEA/B,IAAAA,EAAE,CAACM,IAAH,CAAQiB,MAAR,CAAeC,OAAf,CAAuBb,IAAvB,CAA4BC,OAAO,CAACoB,EAApC,IAA0C,IAA1C;CACA;;CAtBF;CAAA;CAAA,uCAyBC;CAAA;;CACC;CACA;CACAhC,MAAAA,EAAE,CAACC,IAAH,CAAQgC,cAAR,GAA0B,YAAW,EAArC;;CAGAvD,MAAAA,6BAAY,CAACqB,SAAb,CACC,eADD,EAEC,UAASzB,KAAT,EAAe;CACd,YAAM4D,QAAQ,GAAG5D,KAAK,CAAC6D,MAAvB;CACA,YAAMC,SAAS,GAAGF,QAAQ,CAACG,aAAT,GAAyBC,cAAzB,GAA0CC,iBAA1C,EAAlB;CACA,YAAIP,EAAE,GAAG,IAAT;;CAEA,YAAII,SAAJ,EACA;CACCJ,UAAAA,EAAE,GAAGhC,EAAE,CAACxB,IAAH,CAAQ4D,SAAR,EAAmB,aAAnB,CAAL;CACA;;CAEDpC,QAAAA,EAAE,CAACxB,IAAH,CACC0D,QAAQ,CAACM,UAAT,GAAsBF,cAAtB,GAAuCC,iBAAvC,EADD,EAEC,aAFD,EAGCL,QAAQ,CAACO,SAAT,IAAsBT,EAHvB;CAKA,OAjBF;CAoBAhC,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAamC,YAAb,CAA0B7C,aAA1B,CAAwC8C,YAAxC,CAAqD,KAAKC,gBAAL,EAArD;CAEAlE,MAAAA,6BAAY,CAACqB,SAAb,CAAuB,wBAAvB,EAAiD,YACjD;CACC,QAAA,KAAI,CAAC2B,kBAAL;CACA,OAHD;CAKAhD,MAAAA,6BAAY,CAACqB,SAAb,CAAuB,+BAAvB,EAAwD,UAACzB,KAAD,EAAW;CAClE,YAAGA,KAAK,CAAC,MAAD,CAAL,CAAc,MAAd,MAAyB,iBAA5B,EACA;CACC,cAAMR,QAAQ,GAAGQ,KAAK,CAAC,MAAD,CAAL,CAAc,UAAd,CAAjB;CACA0B,UAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAamC,YAAb,CAA0B7C,aAA1B,CAAwCW,WAAxC,CAAoD1C,QAApD;;CACA,cAAM+E,kBAAkB,GAAG/E,QAAQ,CAAC,KAAI,CAAC8E,gBAAL,EAAD,CAAnC;;CAEA,cAAIC,kBAAkB,KAAKzF,SAA3B,EACA;CACC,YAAA,KAAI,CAAC0F,wBAAL,CAA8BD,kBAA9B;CACA;;CAED7C,UAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAawC,eAAb,CAA6BvC,WAA7B,CAAyC,CACxC;CACCpC,YAAAA,IAAI,EAAE,6BADP;CAECL,YAAAA,KAAK,EAAEiC,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBuF,eAAtB;CAFR,WADwC,CAAzC;CAMA,SAjBD,MAmBA;CACC,UAAA,KAAI,CAAC1B,oBAAL,CAA0B2B,qBAA1B;CACA;CACD,OAvBD;CAyBAvE,MAAAA,6BAAY,CAACqB,SAAb,CAAuB,iCAAvB,EAA0D,UAACzB,KAAD,EAAW;CACpE,QAAA,KAAI,CAACwE,wBAAL,CAA8B9C,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsB2B,UAAtB,CAAiCd,KAAK,CAAC,MAAD,CAAL,CAAc,WAAd,CAAjC,CAA9B;CACA,OAFD;CAIAI,MAAAA,6BAAY,CAACqB,SAAb,CAAuB,gCAAvB,EAAyD,UAASzB,KAAT,EAAgB;CACxE,YAAM4D,QAAQ,GAAG5D,KAAK,CAAC6D,MAAvB;;CAEA,YAAI,CAACD,QAAQ,CAACgB,OAAV,IAAqB,CAAChB,QAAQ,CAACG,aAAT,EAA1B,EACA;CACC;CACA;;CAED,YAAMc,UAAU,GAAGjB,QAAQ,CAACG,aAAT,EAAnB;CACA,YAAMe,YAAY,GAAGD,UAAU,CAACE,YAAX,EAArB;CAEA,YAAMjF,IAAI,GAAG8D,QAAQ,CAACgB,OAAT,CAAiB9E,IAA9B;CACA,YAAMkF,IAAI,GAAGpB,QAAQ,CAACgB,OAAT,CAAiBK,MAA9B;CACA,YAAMC,QAAQ,GAAGtB,QAAQ,CAACgB,OAAT,CAAiBM,QAAlC;;CAEA,YAAI,CAACA,QAAL,EACA;CACC;CACA;;CAED,aAAK,IAAItF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkF,YAAY,CAACjF,MAAjC,EAAyCD,CAAC,EAA1C,EACA;CACC,cAAMuF,IAAI,GAAGL,YAAY,CAAClF,CAAD,CAAzB;;CAEA,cAAIuF,IAAI,CAACC,KAAL,OAAiBtF,IAArB,EACA;CACC,gBAAMuF,UAAU,GAAGF,IAAI,CAACE,UAAL,EAAnB;;CAEA,gBAAIA,UAAJ,EACA;CACCF,cAAAA,IAAI,CAACG,WAAL;CACA,kBAAMC,OAAO,GAAGJ,IAAI,CAACjB,UAAL,EAAhB;CAEA,kBAAIsB,cAAc,GAAG,KAArB;;CAEA,kBAAID,OAAJ,EACA;CACC,oBAAME,KAAK,GAAGF,OAAO,CAACR,YAAR,EAAd;;CAEA,qBAAK,IAAIW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAAC5F,MAA1B,EAAkC6F,CAAC,EAAnC,EACA;CACC,sBAAMC,OAAO,GAAGF,KAAK,CAACC,CAAD,CAArB;;CAEA,sBAAIC,OAAO,CAACP,KAAR,OAAoB,SAAxB,EACA;CACCI,oBAAAA,cAAc,GAAG,IAAjB;CACA;CACD;CACD;;CAED,kBAAI,CAACA,cAAL,EACA;CACC;CACA;CACD;;CAED,iBAAKI,aAAL,CAAmBT,IAAnB,EAAyBH,IAAzB;CACA;CACD;CACD,OA3DwD,CA2DvD3B,IA3DuD,CA2DlD,IA3DkD,CAAzD;CA6DA,UAAMwC,SAAS,GAAGxE,QAAQ,CAACyE,gBAAT,CAA0B,0BAA1B,CAAlB;;CAEA,WAAK,IAAIlG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiG,SAAS,CAAChG,MAA9B,EAAsCD,CAAC,EAAvC,EACA;CACCiG,QAAAA,SAAS,CAACjG,CAAD,CAAT,CAAamG,gBAAb,CAA8B,OAA9B,EAAuC,KAAKC,oBAAL,CAA0B3C,IAA1B,CAA+B,IAA/B,CAAvC;CACA;;CAED3B,MAAAA,EAAE,CAACuE,YAAH,CAAgB5E,QAAQ,CAAC6E,IAAzB,EAA+B,OAA/B,EAAwC;CAAEC,QAAAA,SAAS,EAAE;CAAb,OAAxC,EAAoF,KAAKC,iBAAL,CAAuB/C,IAAvB,CAA4B,IAA5B,CAApF;CACA;CA5JF;CAAA;CAAA,6CA8J0B5D,KA9J1B,EA+JC;CACC,UAAGA,KAAK,GAAG,CAAX,EAAa;CACZ,aAAK8C,WAAL,CAAiB8D,WAAjB,GAA+B5G,KAA/B;CACA,aAAK+C,gBAAL,CAAsBxD,SAAtB,CAAgCE,MAAhC,CAAuC,cAAvC;CACA,aAAKuD,iBAAL,CAAuBzD,SAAvB,CAAiCE,MAAjC,CAAwC,cAAxC;CACA,OAJD,MAMA;CACC,aAAKsD,gBAAL,CAAsBxD,SAAtB,CAAgCC,GAAhC,CAAoC,cAApC;CACA,aAAKwD,iBAAL,CAAuBzD,SAAvB,CAAiCC,GAAjC,CAAqC,cAArC;CACA;CACD;CA1KF;CAAA;CAAA,kCA4Ke2E,QA5Kf,EA4KyBoB,IA5KzB,EA6KC;CACC,UAAMsB,IAAI,GAAG,KAAKC,QAAL,CAAc3C,QAAQ,CAACwB,KAAT,EAAd,CAAb;CACA,UAAMoB,KAAK,GAAG9E,EAAE,CAAC+E,IAAH,CAAQC,YAAR,CAAqBC,YAArB,CAAkC,8BAA8B/C,QAAQ,CAACwB,KAAT,EAAhE,CAAd;;CAEA,UAAIoB,KAAJ,EACA;CACCA,QAAAA,KAAK,CAACI,OAAN;CACA;;CAED,UAAIN,IAAJ,EACA;CACC1C,QAAAA,QAAQ,CAACiD,cAAT;CACAjD,QAAAA,QAAQ,CAACkD,UAAT,CAAoBR,IAApB;CACA1C,QAAAA,QAAQ,CAAC0B,WAAT;CACA;CACA;;CAED,UAAMK,OAAO,GAAG;CACf,cAAM,SADS;CAEf,gBAAQoB,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAFO;CAGf,oBAAY;CAHG,OAAhB;CAMApD,MAAAA,QAAQ,CAACiD,cAAT;CACAjD,MAAAA,QAAQ,CAACkD,UAAT,CAAoB,CAACnB,OAAD,CAApB;CACA/B,MAAAA,QAAQ,CAAC0B,WAAT;CAEA5D,MAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CAA2B,gCAA3B,EAA6D,OAA7D,EAAsE;CACrEC,QAAAA,IAAI,EAAE,OAD+D;CAErE3B,QAAAA,IAAI,EAAE;CAAEgB,UAAAA,SAAS,EAAE,KAAKA,SAAlB;CAA6B+F,UAAAA,GAAG,EAAE;CAAEnH,YAAAA,IAAI,EAAE8D,QAAQ,CAACwB,KAAT,EAAR;CAA0BH,YAAAA,MAAM,EAAED;CAAlC;CAAlC;CAF+D,OAAtE,EAGGlD,IAHH,CAIC,UAASC,QAAT,EAAmB;CAClB,YAAMmF,IAAI,GAAGnF,QAAQ,CAAC7B,IAAT,CAAcgH,IAA3B;CACA,YAAMzB,KAAK,GAAG,EAAd;;CAEA,aAAK,IAAI7F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsH,IAAI,CAACrH,MAAzB,EAAiCD,CAAC,EAAlC,EACA;CACC,cAAMsF,QAAQ,GAAG,iBAAiBiC,IAAjB,CAAsBD,IAAI,CAACtH,CAAD,CAAJ,CAAQwH,KAA9B,CAAjB;CACA,cAAMjC,IAAI,GAAG;CACZ,kBAAM+B,IAAI,CAACtH,CAAD,CAAJ,CAAQyH,IADF;CAEZ,oBAAQH,IAAI,CAACtH,CAAD,CAAJ,CAAQ0H,IAFJ;CAGZ,uBAAW;CACV,sBAAQJ,IAAI,CAACtH,CAAD,CAAJ,CAAQyH,IADN;CAEV,wBAAUH,IAAI,CAACtH,CAAD,CAAJ,CAAQ2H,OAFR;CAGV,4BAAcL,IAAI,CAACtH,CAAD,CAAJ,CAAQ4H,WAHZ;CAIV,0BAAYtC;CAJF,aAHC;CASZO,YAAAA,KAAK,EAAEP,QAAQ,GAAG,CAAC;CAClBxB,cAAAA,EAAE,EAAE,SADc;CAElB,sBAAQqD,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAFU;CAGlB,0BAAY;CAHM,aAAD,CAAH,GAIV;CAbO,WAAb;CAgBAvB,UAAAA,KAAK,CAACgC,IAAN,CAAWtC,IAAX;CACA;;CAED,aAAKuC,QAAL,CAAc9D,QAAQ,CAACwB,KAAT,EAAd,EAAgCK,KAAhC;CAEA,YAAMe,KAAK,GAAG9E,EAAE,CAAC+E,IAAH,CAAQC,YAAR,CAAqBC,YAArB,CAAkC,8BAA8B/C,QAAQ,CAACwB,KAAT,EAAhE,CAAd;CACA,YAAMuC,OAAO,GAAG/D,QAAQ,CAACG,aAAT,GAAyBC,cAAzB,GAA0C2D,OAA1C,EAAhB;;CAEA,YAAInB,KAAJ,EACA;CACCA,UAAAA,KAAK,CAACI,OAAN;CACA;;CAED,YAAIe,OAAJ,EACA;CACC/D,UAAAA,QAAQ,CAACiD,cAAT;CACAjD,UAAAA,QAAQ,CAACkD,UAAT,CAAoBrB,KAApB;CACA7B,UAAAA,QAAQ,CAAC0B,WAAT;CACA;CACD,OA1CD,CA0CEjC,IA1CF,CA0CO,IA1CP,CAJD,EA+CC,UAAStB,QAAT,EAAmB,EAAnB,CACEsB,IADF,CACO,IADP,CA/CD;CAkDA;CA1PF;CAAA;CAAA,+BA4PYK,EA5PZ,EA6PC;CACC,UAAMkE,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAjB;CACA,UAAMC,GAAG,GAAGrE,EAAE,GAAG,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCtE,EAAzC,CAAH,GAAkDkE,QAAQ,CAAC,CAAD,CAAxE;;CACA,UAAI,EAAEG,GAAG,IAAIA,GAAG,CAACxJ,IAAb,CAAJ,EACA;CACC;CACA;;CACD,UAAM0J,QAAQ,GAAG,KAAKjF,oBAAL,CAA0BkF,yBAA1B,CAAoDH,GAAG,CAACxJ,IAAxD,CAAjB;CACA,UAAM4J,aAAa,GAAGJ,GAAG,CAACxJ,IAAJ,CAAS+C,aAAT,CAAuB,mBAAvB,CAAtB;;CACA,UAAI,EAAE6G,aAAa,CAACvD,OAAd,IAAyBuD,aAAa,CAACvD,OAAd,CAAsBwD,SAAjD,CAAJ,EACA;CACC;CACA;;CAED,UAAG1E,EAAE,KAAK5E,SAAV,EACA;CACC,aAAKsE,kBAAL;CACA;;CAED,UAAI6E,QAAJ,EACA;CACC,YAAI,oBAAO,KAAKI,uBAAZ,MAAwC,QAA5C,EACA;CACC,eAAKA,uBAAL,GAA+B,EAA/B;CACA;;CACD,YAAI,KAAKA,uBAAL,CAA6B3E,EAA7B,MAAqC,IAAzC,EACA;CACC;CACA;;CACD,aAAK2E,uBAAL,CAA6B3E,EAA7B,IAAmC,IAAnC;CAEAhC,QAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CACC,oBADD,EAEC,mBAFD,EAGC;CACCC,UAAAA,IAAI,EAAE,MADP;CAEC3B,UAAAA,IAAI,EAAE;CACLkI,YAAAA,SAAS,EAAED,aAAa,CAACvD,OAAd,CAAsBwD;CAD5B,WAFP;CAKCE,UAAAA,cAAc,EAAE;CACf,0BAAcV,QAAQ,CAAC/H,MADR;CAEf,wBAAY,KAAK0I,eAAL,CAAqB,CAACR,GAAD,CAArB;CAFG;CALjB,SAHD,EAaEjG,IAbF,CAcC,UAAS4B,EAAT,EAAa;CACZ,eAAK2E,uBAAL,CAA6B3E,EAA7B,IAAmC,KAAnC;CACA,eAAK8E,MAAL,CAAYzB,aAAG,CAACC,UAAJ,CAAe,uCAAf,CAAZ;CACA,SAHD,CAGE3D,IAHF,CAGO,IAHP,EAGaK,EAHb,CAdD,EAkBC,UAAS+E,IAAT,EAAe;CACd,eAAKJ,uBAAL,CAA6B3E,EAA7B,IAAmC,KAAnC;;CACA,cAAI+E,IAAI,CAACC,MAAL,IAAeD,IAAI,CAACC,MAAL,CAAY7I,MAAZ,GAAqB,CAAxC,EACA;CACC,iBAAK2I,MAAL,CAAYC,IAAI,CAACC,MAAL,CAAYC,GAAZ,CACX,UAASxD,IAAT,EAAe;CACd,qBAAOA,IAAI,CAACyD,OAAZ;CACA,aAHU,EAIVC,IAJU,CAIL,MAJK,CAAZ,EAIgB,IAJhB;CAKA,WAPD,MASA;CACC,iBAAKL,MAAL,CAAYzB,aAAG,CAACC,UAAJ,CAAe,2CAAf,CAAZ;CACA;CACD,SAdD,CAcE3D,IAdF,CAcO,IAdP,CAlBD;CAkCA,OA9CD,MAgDA;CACC3B,QAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CACC,oBADD,EAEC,mBAFD,EAGC;CACCC,UAAAA,IAAI,EAAE,MADP;CAEC3B,UAAAA,IAAI,EAAE;CACLkI,YAAAA,SAAS,EAAED,aAAa,CAACvD,OAAd,CAAsBwD;CAD5B,WAFP;CAKCE,UAAAA,cAAc,EAAE;CACf,0BAAcV,QAAQ,CAAC/H,MADR;CAEf,wBAAY,KAAK0I,eAAL,CAAqB,CAACR,GAAD,CAArB;CAFG;CALjB,SAHD,EAaEjG,IAbF,CAaO,UAASqG,aAAT,EAAwB;CAC9B,eAAKnF,oBAAL,CAA0B8F,mBAA1B,CAA8CX,aAAa,CAACvD,OAAd,CAAsBwD,SAApE;CACA,eAAKI,MAAL,CAAYzB,aAAG,CAACC,UAAJ,CAAe,4CAAf,CAAZ;CACA,SAHM,CAGL3D,IAHK,CAGA,IAHA,EAGM8E,aAHN,CAbP;CAiBA;;CAED,UAAIY,WAAW,GAAG,KAAKxF,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAAlB;;CACA,UAAGD,WAAW,CAAClJ,MAAZ,KAAuB,CAAvB,IAA4BkJ,WAAW,CAAC,CAAD,CAAX,KAAiBrF,EAAhD,EACA;CACC,aAAKN,kBAAL;CACA;CACD;CAzVF;CAAA;CAAA,gCA2VaM,EA3Vb,EA4VC;CACC,UAAIA,EAAE,KAAK5E,SAAP,IAAoB,KAAKyE,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,GAAkDnJ,MAAlD,KAA6D,CAArF,EACA;CACC;CACA,OAJF;;;CAMC6B,MAAAA,EAAE,CAACuH,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B,mBAAmBzF,EAA9C,EAAkD;CACjD0F,QAAAA,KAAK,EAAE,IAD0C;CAEjDC,QAAAA,MAAM,EAAE;CAFyC,OAAlD;CAIA;CAtWF;CAAA;CAAA,wCAwWqB3F,EAxWrB,EAyWC;CACC,UAAI4F,iBAAiB,GACrB;CACC,6BAAsB;CADvB,OADA;CAIA,WAAKC,aAAL,CAAmB7F,EAAnB,EAAsB4F,iBAAtB;CACA;CA/WF;CAAA;CAAA,kCAiXe5F,EAjXf,EAiXkB4F,iBAjXlB,EAkXC;CACC,UAAM1B,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAjB;;CACA,UAAIpE,EAAE,KAAK5E,SAAP,IAAoB8I,QAAQ,CAAC/H,MAAT,KAAoB,CAA5C,EACA;CACC;CACA;;CACD,UAAI,CAAC,KAAK+C,SAAV,EACA;CACC,aAAK4G,cAAL;CACA;CACA;;CACD,UAAIlH,OAAO,GAAG;CACbmH,QAAAA,MAAM,EAAGH,iBAAiB,KAAKxK,SAAvB,GAAoCwK,iBAApC,GAAwD,EADnD;CAEbI,QAAAA,QAAQ,EAAE,IAFG;CAGbpB,QAAAA,cAAc,EAAE;CACf,wBAAcV,QAAQ,CAAC/H,MADR;CAEf,sBAAY,KAAK0I,eAAL,CAAqB7E,EAAE,GAAG,CAAC,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCtE,EAAzC,CAAD,CAAH,GAAoDkE,QAA3E;CAFG;CAHH,OAAd;CAQA,UAAImB,WAAJ;;CAEA,UAAGrF,EAAE,KAAK5E,SAAV,EACA;CACCiK,QAAAA,WAAW,GAAGrH,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBX,cAAlB,EAAd;CACA,OAHD,MAKA;CACCD,QAAAA,WAAW,GAAG,CAACrF,EAAD,CAAd;CACA;;CAEDqF,MAAAA,WAAW,GAAG,KAAKa,qBAAL,CAA2B,KAAK7G,iBAAhC,EAAmDgG,WAAnD,EAAgE,IAAhE,CAAd;CACAzG,MAAAA,OAAO,CAACuH,GAAR,GAAcd,WAAd;;CAEA,UAAI,KAAK/F,oBAAL,CAA0B8G,oBAA1B,IAAmDR,iBAAiB,KAAKxK,SAAtB,IAAmCwK,iBAAiB,CAAC,mBAAD,CAA3G,EACA;CACC,YAAMS,YAAY,GAAG,KAAKC,qBAAL,CAA2B1H,OAA3B,CAArB;CACAyH,QAAAA,YAAY,CAACE,IAAb;CACA,OAJD,MAMA;CACCvI,QAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBO,YAAlB,CAA+BnB,WAA/B;CAEA,YAAMoB,kBAAkB,GAAG,KAAKP,qBAAL,CAA2B,2BAA3B,EAAwDb,WAAxD,EAAqElJ,MAAhG;CAEA6B,QAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,UAAAA,IAAI,EAAE,KAAKkF,gBAAL,EADP;CAEC5D,UAAAA,KAAK,EAAE,IAFR;CAGCjB,UAAAA,KAAK,EAAE0K;CAHR,SADoC,CAArC;CAQA,aAAKE,SAAL,CAAe,QAAf,EAAyB/H,OAAzB,EAAiC;CAAA,iBAChCZ,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBW,WAAlB,EADgC;CAAA,SAAjC;;CAGA,YAAG5G,EAAE,KAAK5E,SAAV,EACA;CACC,eAAKsE,kBAAL;CACA;CACD;CACD;CA9aF;CAAA;CAAA,wCAgbqBpD,KAhbrB,EAibC;CACC,UAAMuK,aAAa,GAAGvK,KAAK,CAACwK,aAAN,CAAoB5F,OAA1C;CACA,UAAIlB,EAAE,GAAG5E,SAAT;CACA,UAAM2L,YAAY,GAAG/I,EAAE,CAACgJ,UAAH,CAAc1K,KAAK,CAACwK,aAApB,EAAmC;CAAErE,QAAAA,SAAS,EAAE;CAAb,OAAnC,CAArB;;CACA,UAAIsE,YAAJ,EACA;CACC/G,QAAAA,EAAE,GAAGhC,EAAE,CAACxB,IAAH,CAAQuK,YAAR,EAAsB,aAAtB,CAAL;CACA;;CACD,UAAME,UAAU,GAAGC,IAAI,CAACC,KAAL,CAAWN,aAAa,CAACI,UAAzB,CAAnB;CACA,UAAMG,cAAc,GAAGP,aAAa,CAACzK,IAArC;CACA,UAAMiL,cAAc,GAAGD,cAAvB;;CAEA,UAAKpH,EAAE,KAAK5E,SAAP,IAAoB,KAAKyE,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,GAAkDnJ,MAAlD,KAA6D,CAAlF,IAAwF8K,UAA5F,EACA;CACC;CACA;;CACD,UAAI/C,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAf;CACA,UAAIkD,YAAY,GAAItH,EAAE,GAAG,CAACA,EAAD,CAAH,GAAU,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAAhC;CACAgC,MAAAA,YAAY,GAAG,KAAKpB,qBAAL,CAA2B,KAAK7G,iBAAhC,EAAmDiI,YAAnD,EAAiE,IAAjE,CAAf;;CACA,UAAI,CAACA,YAAY,CAACnL,MAAlB,EACA;CACC;CACA,OAtBF;;;CAyBC6B,MAAAA,EAAE,CAACuJ,aAAH,CAAiB,eAAjB;CAEA,UAAIlC,WAAJ;;CAEA,UAAGrF,EAAE,KAAK5E,SAAV,EACA;CACCiK,QAAAA,WAAW,GAAGrH,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBX,cAAlB,EAAd;CACA,OAHD,MAKA;CACCD,QAAAA,WAAW,GAAG,CAACrF,EAAD,CAAd;CACA;;CAEDhC,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBO,YAAlB,CAA+BnB,WAA/B;CAEA,UAAMoB,kBAAkB,GAAG,KAAKP,qBAAL,CAA2B,2BAA3B,EAAwDb,WAAxD,EAAqElJ,MAAhG;CAEA6B,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,QAAAA,IAAI,EAAC2L,cADN;CAECtK,QAAAA,QAAQ,EAAE,IAFX;CAGChB,QAAAA,KAAK,EAAE0K;CAHR,OADoC,EAMpC;CACC/K,QAAAA,IAAI,EAAE,KAAKkF,gBAAL,EADP;CAEC5D,QAAAA,KAAK,EAAE,IAFR;CAGCjB,QAAAA,KAAK,EAAE0K;CAHR,OANoC,CAArC;CAaA,WAAKE,SAAL,CACC,cADD,EAEC;CACCX,QAAAA,QAAQ,EAAE,IADX;CAECG,QAAAA,GAAG,EAAEmB,YAFN;CAGCvB,QAAAA,MAAM,EAAE;CACPyB,UAAAA,MAAM,EAAEJ;CADD,SAHT;CAMCxC,QAAAA,cAAc,EAAE;CACf,wBAAcV,QAAQ,CAAC/H,MADR;CAEf,sBAAY,KAAK0I,eAAL,CAAqB7E,EAAE,GAAG,CAAC,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCtE,EAAzC,CAAD,CAAH,GAAoDkE,QAA3E;CAFG;CANjB,OAFD,EAaC,YAAK;CACJlG,QAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBW,WAAlB;CACA,OAfF;;CAiBA,UAAG5G,EAAE,KAAK5E,SAAV,EACA;CACC,aAAKsE,kBAAL;CACA;CACD;CA7fF;CAAA;CAAA,gCA+faM,EA/fb,EAggBC;CACC,UAAIkE,QAAQ,GAAG,EAAf;CACA,UAAIuD,SAAS,GAAG,EAAhB;;CAEA,UAAGzH,EAAE,KAAK5E,SAAV,EACA;CACC8I,QAAAA,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAX;CACAqD,QAAAA,SAAS,GAAG,KAAK5H,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAAZ;CACA,OAJD,MAMA;CACC,YAAID,WAAW,GAAG,KAAKxF,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAAlB;;CACA,YAAGD,WAAW,CAAClJ,MAAZ,KAAuB,CAAvB,IAA4BkJ,WAAW,CAAC,CAAD,CAAX,KAAiBrF,EAAhD,EACA;CACC;CACJ;CACA;CACIkE,UAAAA,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAX;CACAqD,UAAAA,SAAS,GAAGpC,WAAZ;CACArF,UAAAA,EAAE,GAAG5E,SAAL;CACA,SARD,MAUA;CACCqM,UAAAA,SAAS,GAAG,CAACzH,EAAD,CAAZ;CACA;CAED;;CACD,UAAIA,EAAE,KAAK5E,SAAP,IAAoB8I,QAAQ,CAAC/H,MAAT,KAAoB,CAA5C,EACA;CACC;CACA;;CACD,UAAMuL,UAAU,GAAG,SAAS1H,EAAT,IAAe,KAAKJ,uBAAL,CAA6B,2BAA7B,EAA0DI,EAA1D,CAAf,GAA+E,YAA/E,GAA8F,cAAjH;CAEAyH,MAAAA,SAAS,GAAG,KAAKvB,qBAAL,CAA2B,2BAA3B,EAAwDuB,SAAxD,EAAmEC,UAAU,KAAK,YAAlF,CAAZ;CACAD,MAAAA,SAAS,GAAG,KAAKvB,qBAAL,CAA2B,KAAK7G,iBAAhC,EAAmDoI,SAAnD,EAA8D,IAA9D,CAAZ;;CAEA,UAAI,CAACA,SAAS,CAACtL,MAAf,EACA;CACC;CACA;;CAED,UAAMwL,OAAO,GAAG,SAAVA,OAAU,GAAW;CAC1B,aAAKrI,oBAAL,CAA0BsI,cAA1B,CAAyCH,SAAzC,EAAoD;CAAEI,UAAAA,MAAM,EAAEH;CAAV,SAApD;CACA,YAAMI,aAAa,GAAG,KAAKlH,gBAAL,EAAtB;CAEA,YAAMmH,gBAAgB,GAAGL,UAAU,KAAK,YAAf,GAA6B,KAAK9H,uBAAL,CAA6B,wBAA7B,CAA7B,GAAsF,CAA/G;CACA,YAAIoI,aAAa,GAAGP,SAAS,CAACtL,MAAV,GAAmB4L,gBAAvC;;CAEA,YAAIL,UAAU,KAAK,YAAnB,EACA;CACC,cAAI,UAAU1H,EAAd,EACA;CACCgI,YAAAA,aAAa,GAAGhK,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsB2B,UAAtB,CAAiC0K,aAAjC,IAAkDC,gBAAlE;CACA;;CACD/J,UAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,YAAAA,IAAI,EAAEoM,aADP;CAEC9K,YAAAA,KAAK,EAAE,IAFR;CAGCjB,YAAAA,KAAK,EAAEiM;CAHR,WADoC,CAArC;CAOA,SAbD,MAeA;CACChK,UAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,YAAAA,IAAI,EAAEoM,aADP;CAEC/K,YAAAA,QAAQ,EAAE,IAFX;CAGChB,YAAAA,KAAK,EAAEiM;CAHR,WADoC,CAArC;CAOA;;CAED,YAAGhI,EAAE,KAAK5E,SAAV,EAAqB;CACpB,eAAKsE,kBAAL;CACA;;CAED,YAAI,SAASM,EAAb,EACA;CACCyH,UAAAA,SAAS,CAAC,SAAD,CAAT,GAAuB,KAAKjK,SAAL,GAAiB,GAAjB,GAAuB,KAAK8B,oBAAL,CAA0BsB,gBAA1B,EAA9C;CACA,SAHD;;CASA,aAAKtB,oBAAL,CAA0B2I,oBAA1B;CAEA,aAAKtB,SAAL,CAAee,UAAf,EAA2B;CAC1BvB,UAAAA,GAAG,EAAEsB,SADqB;CAE1BzB,UAAAA,QAAQ,EAAE,IAFgB;CAG1BkC,UAAAA,aAAa,EAAER,UAHW;CAI1B9C,UAAAA,cAAc,EAAE;CACf,0BAAcV,QAAQ,CAAC/H,MADR;CAEf,wBAAY,KAAK0I,eAAL,CAAqB7E,EAAE,GAAG,CAAC,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCtE,EAAzC,CAAD,CAAH,GAAoDkE,QAA3E;CAFG,WAJU;CAQ1BiE,UAAAA,SAAS,EAAE;CARe,SAA3B;CAWA,eAAO,IAAP;CACA,OA3DD;;CA4DAR,MAAAA,OAAO,CAACS,KAAR,CAAc,IAAd;CACA;CAtmBF;CAAA;CAAA,gCAwmBapI,EAxmBb,EAymBC;CACC,UAAMkE,QAAQ,GAAG,KAAKrE,eAAL,GAAuBsE,OAAvB,GAAiCC,WAAjC,EAAjB;;CACA,UAAIpE,EAAE,KAAK5E,SAAP,IAAoB8I,QAAQ,CAAC/H,MAAT,KAAoB,CAA5C,EACA;CACC;CACA;;CACD,UAAI,CAAC,KAAK8C,WAAV,EACA;CACC,aAAK6G,cAAL;CACA;CACA;;CACD,UAAM4B,UAAU,GAAG,KAAK9H,uBAAL,CAA6B,SAA7B,EAAwCI,EAAxC,IAA8C,iBAA9C,GAAkE,YAArF;CACA,UAAIyH,SAAS,GAAG,KAAKvB,qBAAL,CAA2B,SAA3B,EAAsClG,EAAtC,EAA0C0H,UAAU,KAAK,iBAAzD,CAAhB;CACAD,MAAAA,SAAS,GAAG,KAAKvB,qBAAL,CAA2B,KAAK7G,iBAAhC,EAAmDoI,SAAnD,EAA8D,IAA9D,CAAZ;;CACA,UAAI,CAACA,SAAS,CAACtL,MAAf,EACA;CACC;CACA;;CACD,UAAMyC,OAAO,GAAG;CACfoH,QAAAA,QAAQ,EAAE,IADK;CAEfpB,QAAAA,cAAc,EAAE;CACf,wBAAcV,QAAQ,CAAC/H,MADR;CAEf,sBAAY,KAAK0I,eAAL,CAAqB7E,EAAE,GAAG,CAAC,KAAKH,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCtE,EAAzC,CAAD,CAAH,GAAoDkE,QAA3E;CAFG;CAFD,OAAhB;CAQA,UAAImB,WAAJ;;CAEA,UAAGrF,EAAE,KAAK5E,SAAV,EACA;CACCiK,QAAAA,WAAW,GAAGrH,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBX,cAAlB,EAAd;CACA,OAHD,MAKA;CACCD,QAAAA,WAAW,GAAG,CAACrF,EAAD,CAAd;CACA;;CAEDpB,MAAAA,OAAO,CAACuH,GAAR,GAAcd,WAAd;CAEArH,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBO,YAAlB,CAA+BnB,WAA/B;CAEA,UAAMoB,kBAAkB,GAAG,KAAKP,qBAAL,CAA2B,2BAA3B,EAAwDb,WAAxD,EAAqElJ,MAAhG;;CAEA,UAAGuL,UAAU,KAAK,YAAlB,EACA;CACC1J,QAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,UAAAA,IAAI,EAAE,KAAK4D,oBAAL,CAA0B+I,OADjC;CAECtL,UAAAA,QAAQ,EAAE,IAFX;CAGChB,UAAAA,KAAK,EAAE0K;CAHR,SADoC,EAMpC;CACC/K,UAAAA,IAAI,EAAE,KAAKkF,gBAAL,EADP;CAEC5D,UAAAA,KAAK,EAAE,IAFR;CAGCjB,UAAAA,KAAK,EAAE0K;CAHR,SANoC,CAArC;CAYA,OAdD,MAgBA;CACCzI,QAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,UAAAA,IAAI,EAAE,KAAK4D,oBAAL,CAA0B+I,OADjC;CAECrL,UAAAA,KAAK,EAAE,IAFR;CAGCjB,UAAAA,KAAK,EAAE0K;CAHR,SADoC,EAMpC;CACC/K,UAAAA,IAAI,EAAE,KAAK4D,oBAAL,CAA0BgJ,QADjC;CAECvL,UAAAA,QAAQ,EAAE,IAFX;CAGChB,UAAAA,KAAK,EAAE0K;CAHR,SANoC,CAArC;CAYA;;CAED,WAAKE,SAAL,CAAee,UAAf,EAA2B9I,OAA3B,EAAmC;CAAA,eAClCZ,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBW,WAAlB,EADkC;CAAA,OAAnC;;CAGA,UAAG5G,EAAE,KAAK5E,SAAV,EACA;CACC,aAAKsE,kBAAL;CACA;CACD;CA1rBF;CAAA;CAAA,0CA4rBuBd,OA5rBvB,EA6rBC;CACC,aAAO,IAAIZ,EAAE,CAACuK,EAAH,CAAMC,OAAN,CAAcC,UAAlB,CAA6B;CACnCC,QAAAA,KAAK,EAAErF,aAAG,CAACC,UAAJ,CAAe,iCAAf,CAD4B;CAEnC4B,QAAAA,OAAO,EAAE7B,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAF0B;CAGnCqF,QAAAA,OAAO,EAAE,CACR,IAAI3K,EAAE,CAACuK,EAAH,CAAMK,MAAV,CAAiB;CAChBC,UAAAA,KAAK,EAAE7K,EAAE,CAACuK,EAAH,CAAMK,MAAN,CAAaE,KAAb,CAAmBC,MADV;CAEhBC,UAAAA,IAAI,EAAE3F,aAAG,CAACC,UAAJ,CAAe,sCAAf,CAFU;CAGhB2F,UAAAA,OAAO,EAAG,UAASnO,MAAT,EAAiB;CAE1B,gBAAM2L,kBAAkB,GAAG,KAAKP,qBAAL,CAA2B,2BAA3B,EAAwDtH,OAAO,CAACuH,GAAhE,EAAqEhK,MAAhG;CAEA6B,YAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa9C,QAAb,CAAsBiL,cAAtB,CAAqC,CACpC;CACChL,cAAAA,IAAI,EAAE,KAAKkF,gBAAL,EADP;CAEC5D,cAAAA,KAAK,EAAE,IAFR;CAGCjB,cAAAA,KAAK,EAAE0K;CAHR,aADoC,CAArC;CAQA,iBAAKE,SAAL,CAAe,QAAf,EAAyB/H,OAAzB,EAAiC;CAAA,qBAChCZ,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBW,WAAlB,EADgC;CAAA,aAAjC;CAGA9L,YAAAA,MAAM,CAACoO,UAAP,GAAoBC,KAApB;CACAnL,YAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBO,YAAlB,CAA+B5H,OAAO,CAACuH,GAAvC;CACA,WAjBQ,CAiBNxG,IAjBM,CAiBD,IAjBC;CAHO,SAAjB,CADQ,EAuBR,IAAI3B,EAAE,CAACuK,EAAH,CAAMa,YAAV,CAAuB;CACtBH,UAAAA,OAAO,EAAE,iBAASnO,MAAT,EAAiB;CACzBA,YAAAA,MAAM,CAACoO,UAAP,GAAoBC,KAApB;CACA;CAHqB,SAAvB,CAvBQ;CAH0B,OAA7B,CAAP;CAiCA;CA/tBF;CAAA;CAAA,yCAkuBC;CACCnL,MAAAA,EAAE,CAACuJ,aAAH,CAAiB,0BAAjB;CACA,WAAK1H,eAAL,GAAuBsE,OAAvB,GAAiCkF,WAAjC;CACA,WAAKxJ,eAAL,GAAuByJ,wBAAvB;CACAtL,MAAAA,EAAE,CAACM,IAAH,CAAQC,IAAR,CAAa0H,IAAb,CAAkBsD,SAAlB;CACA;CAvuBF;CAAA;CAAA,4CAyuByB9G,SAzuBzB,EAyuBoCzC,EAzuBpC,EA0uBC;CACC,UAAIqF,WAAJ;;CACA,UAAGrF,EAAE,KAAK5E,SAAV,EACA;CACCiK,QAAAA,WAAW,GAAG,KAAKxF,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAAd;CACA,OAHD,MAKA;CACCD,QAAAA,WAAW,GAAG,CAACrF,EAAD,CAAd;CACA;;CACD,UAAMmG,GAAG,GAAGd,WAAW,CAAClJ,MAAZ,GAAqBkJ,WAArB,GAAoCrF,EAAE,GAAG,CAACA,EAAD,CAAH,GAAU,EAA5D;CAEA,UAAIwJ,4BAA4B,GAAG,CAAnC;;CAEA,WAAK,IAAItN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiK,GAAG,CAAChK,MAAxB,EAAgCD,CAAC,EAAjC,EACA;CACC,YAAMmI,GAAG,GAAG,KAAKxE,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyC6B,GAAG,CAACjK,CAAD,CAA5C,CAAZ;;CACA,YAAImI,GAAG,IAAIA,GAAG,CAACxJ,IAAf,EACA;CACC,cAAM4O,OAAO,GAAGpF,GAAG,CAACxJ,IAAJ,CAAS6O,sBAAT,CAAgCjH,SAAhC,CAAhB;;CACA,cAAIgH,OAAO,IAAIA,OAAO,CAACtN,MAAvB,EACA;CACCqN,YAAAA,4BAA4B;CAC5B;CACD;CACD;;CACD,aAAOA,4BAAP;CACA;CArwBF;CAAA;CAAA,0CAuwBuB/G,SAvwBvB,EAuwBkC0D,GAvwBlC,EAuwBuCwD,UAvwBvC,EAwwBC;CACC,UAAIC,MAAM,GAAG,EAAb;;CACA,UAAI,SAASzD,GAAb,EACA;CACCyD,QAAAA,MAAM,GAAG,KAAK/J,eAAL,GAAuBsE,OAAvB,GAAiC0F,YAAjC,GAAgD5E,GAAhD,CACR,UAAS6E,OAAT,EAAkB;CACjB,iBAAOA,OAAO,CAACpI,KAAR,EAAP;CACA,SAHO,CAAT;CAKA,OAPD,MAQK,IAAIqI,KAAK,CAACC,OAAN,CAAc7D,GAAd,CAAJ,EACL;CACCyD,QAAAA,MAAM,GAAGzD,GAAT;CACA,OAHI,MAKL;CACC,YAAMd,WAAW,GAAG,KAAKxF,eAAL,GAAuBsE,OAAvB,GAAiCmB,cAAjC,EAApB;CACAsE,QAAAA,MAAM,GAAGvE,WAAW,CAAClJ,MAAZ,GAAqBkJ,WAArB,GAAoCc,GAAG,GAAG,CAACA,GAAD,CAAH,GAAW,EAA3D;CACA;;CACD,UAAMsB,SAAS,GAAG,EAAlB;;CACA,WAAK,IAAIvL,CAAC,GAAG0N,MAAM,CAACzN,MAAP,GAAgB,CAA7B,EAAgCD,CAAC,IAAI,CAArC,EAAwCA,CAAC,EAAzC,EACA;CACC,YAAMmI,GAAG,GAAG,KAAKxE,eAAL,GAAuBsE,OAAvB,GAAiCG,OAAjC,CAAyCsF,MAAM,CAAC1N,CAAD,CAA/C,CAAZ;;CACA,YAAImI,GAAG,IAAIA,GAAG,CAACxJ,IAAf,EACA;CACC,cAAM4O,OAAO,GAAGpF,GAAG,CAACxJ,IAAJ,CAAS6O,sBAAT,CAAgCjH,SAAhC,CAAhB;;CACA,cAAI,CAACkH,UAAD,IAAgBF,OAAO,IAAIA,OAAO,CAACtN,MAAvC,EACA;CACCsL,YAAAA,SAAS,CAAC1D,IAAV,CAAe6F,MAAM,CAAC1N,CAAD,CAArB;CACA,WAHD,MAIK,IAAIyN,UAAU,IAAI,EAAEF,OAAO,IAAIA,OAAO,CAACtN,MAArB,CAAlB,EACL;CACCsL,YAAAA,SAAS,CAAC1D,IAAV,CAAe6F,MAAM,CAAC1N,CAAD,CAArB;CACA;CACD;CACD;;CACD,aAAOuL,SAAP;CACA;CA7yBF;CAAA;CAAA,2BA+yBQuB,IA/yBR,EA+yBciB,KA/yBd,EAgzBC;CACCC,MAAAA,GAAG,CAAClM,EAAJ,CAAOuK,EAAP,CAAU4B,YAAV,CAAuBC,MAAvB,CAA8BtF,MAA9B,CAAqC;CACpCuF,QAAAA,aAAa,EAAEJ,KAAK,GAAG,CAAR,GAAYA,KAAZ,GAAoB,IADC;CAEpCK,QAAAA,OAAO,EAAEtB,IAAI,GAAGA,IAAH,GAAU3F,aAAG,CAACC,UAAJ,CAAe,kCAAf;CAFa,OAArC;CAIA;CArzBF;CAAA;CAAA,8BAuzBWoE,UAvzBX,EAuzBuB9I,OAvzBvB,EAuzBgC2L,eAvzBhC,EAwzBC;CACC3L,MAAAA,OAAO,GAAGA,OAAO,GAAGA,OAAH,GAAa,EAA9B;CAEA,UAAIyG,WAAW,GAAG,EAAlB;;CAEA,UAAIzG,OAAO,CAACuH,GAAZ,EACA;CACCd,QAAAA,WAAW,GAAGzG,OAAO,CAACuH,GAAtB;CACA;;CACD,UAAI,CAACd,WAAW,CAAClJ,MAAb,IAAuB,CAACkJ,WAAW,CAACmF,OAAxC,EACA;CACC;CACA;;CACD,UAAI,CAAC5L,OAAO,CAACoH,QAAb,EACA;CACC,aAAKnG,eAAL,GAAuB4K,SAAvB;CACA;;CACD,UAAMjO,IAAI,GAAG;CAAE2J,QAAAA,GAAG,EAAEd;CAAP,OAAb;;CACA,UAAIzG,OAAO,CAACmH,MAAZ,EACA;CACC,YAAM2E,WAAW,GAAGC,MAAM,CAACC,IAAP,CAAYD,MAAM,CAAC/L,OAAO,CAACmH,MAAT,CAAlB,CAApB;;CACA,aAAK,IAAI8E,SAAS,GAAG,CAAhB,EAAmBC,GAAG,GAAGJ,WAAW,CAACvO,MAA1C,EAAkD0O,SAAS,GAAGC,GAA9D,EAAmED,SAAS,EAA5E,EACA;CACC,cAAME,OAAO,GAAGL,WAAW,CAACG,SAAD,CAA3B;CACA,cAAMG,IAAI,GAAGL,MAAM,CAACM,wBAAP,CAAgCrM,OAAO,CAACmH,MAAxC,EAAgDgF,OAAhD,CAAb;;CACA,cAAIC,IAAI,KAAK5P,SAAT,IAAsB4P,IAAI,CAACE,UAA/B,EACA;CACC1O,YAAAA,IAAI,CAACuO,OAAD,CAAJ,GAAgBnM,OAAO,CAACmH,MAAR,CAAegF,OAAf,CAAhB;CACA;CACD;CACD;;CAED/M,MAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CAA2B,oBAA3B,EAAiDwJ,UAAjD,EAA6D;CAC5DvJ,QAAAA,IAAI,EAAE,MADsD;CAE5D3B,QAAAA,IAAI,EAAEA,IAFsD;CAG5DoI,QAAAA,cAAc,EAAEhG,OAAO,CAACgG;CAHoC,OAA7D,EAIGxG,IAJH,CAKC,YAAW;CACV,YAAIQ,OAAO,CAACuJ,SAAR,KAAsB,KAA1B,EACA;CACC;CACA;;CACD,YAAIvJ,OAAO,CAACuJ,SAAR,IAAqB,OAAQvJ,OAAO,CAACuJ,SAAhB,KAA+B,UAAxD,EACA;CACCvJ,UAAAA,OAAO,CAACuJ,SAAR,CAAkBxI,IAAlB,CAAuB,IAAvB,EAA6B0F,WAA7B,EAA0CzG,OAAO,CAACsJ,aAAlD;CACA;CACA;;CACD,YAAGqC,eAAe,KAAKnP,SAAvB,EACA;CACC,eAAK0J,MAAL;CACA,SAHD,MAKA;CACCyF,UAAAA,eAAe;CACf;CACD,OAlBD,CAkBE5K,IAlBF,CAkBO,IAlBP,CALD,EAwBC,UAAStB,QAAT,EAAmB;CAClBO,QAAAA,OAAO,CAACuM,OAAR,IAAmB,OAAQvM,OAAO,CAACuM,OAAhB,KAA6B,UAAhD,GACCvM,OAAO,CAACuM,OAAR,GAAkBxL,IAAlB,CAAuB,IAAvB,EAA6BtB,QAA7B,CADD,GAEC,KAAK+M,cAAL,CAAoB/M,QAApB,CAFD;CAGA,OAJD,CAIEsB,IAJF,CAIO,IAJP,CAxBD;CA8BA;CAt3BF;CAAA;CAAA,mCAw3BgBtB,QAx3BhB,EAy3BC;CACC,UAAIO,OAAO,GAAG,EAAd;CACA,WAAKyM,gBAAL,CAAsBhN,QAAQ,CAAC2G,MAA/B;CACApG,MAAAA,OAAO,CAAC0M,YAAR,GAAuBjN,QAAQ,CAAC2G,MAAT,CAAgB,CAAhB,EAAmBE,OAA1C;CACA;CA73BF;CAAA;CAAA,qCA+3BkBF,MA/3BlB,EAg4BC;CACC,WAAK,IAAI9I,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8I,MAAM,CAAC7I,MAA3B,EAAmCD,CAAC,EAApC,EACA;CACC,YAAI8I,MAAM,CAAC9I,CAAD,CAAN,CAAUqP,IAAV,KAAmB,KAAKpM,yBAA5B,EACA;CACC,eAAKD,SAAL,GAAiB,KAAjB;CACA;;CACD,YAAI8F,MAAM,CAAC9I,CAAD,CAAN,CAAUqP,IAAV,KAAmB,KAAKnM,4BAA5B,EACA;CACC,eAAKH,WAAL,GAAmB,KAAnB;CACA;CACD;CACD;CA54BF;CAAA;CAAA,qCA+4BC;CACC,UAAMuM,GAAG,GAAGxN,EAAE,CAACyN,IAAH,CAAQC,aAAR,CAAsB,mBAAtB,EAA2C;CACtDlO,QAAAA,SAAS,EAAE,KAAKA;CADsC,OAA3C,CAAZ;CAGAQ,MAAAA,EAAE,CAACuH,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2B+F,GAA3B,EAAgC;CAC/B9F,QAAAA,KAAK,EAAE,GADwB;CAE/BiG,QAAAA,SAAS,EAAE,KAFoB;CAG/BC,QAAAA,kBAAkB,EAAE;CAHW,OAAhC;CAKA,WAAK1M,SAAL,GAAiB,IAAjB;CACA,WAAKD,WAAL,GAAmB,IAAnB;CACA;CA15BF;CAAA;CAAA,iDA65BC;CA75BD;CAAA;CAAA,2CAi6BC;CACC,WAAKK,oBAAL,CAA0BuM,oBAA1B;CACA;CAn6BF;CAAA;CAAA,uCAs6BC;CACC,aAAO,KAAKvM,oBAAL,CAA0BsB,gBAA1B,EAAP;CACA;CAx6BF;CAAA;CAAA,sCA26BC;CACC,aAAO5C,EAAE,CAAC+E,IAAH,CAAQ+I,WAAR,CAAoBxH,OAApB,CAA4B,KAAKtF,MAAjC,EAAyC+M,QAAhD;CACA;CA76BF;CAAA;CAAA,oCA+6BiBC,IA/6BjB,EAg7BC;CACC,aAAOhO,EAAE,CAACyN,IAAH,CAAQQ,YAAR,CAAqBlC,KAAK,CAACmC,SAAN,CAAgBC,MAAhB,CAAuB/D,KAAvB,CAC3B,EAD2B,EAE3B4D,IAAI,CAAC/G,GAAL,CACC,UAASZ,GAAT,EAAc;CACb,YAAI,CAACA,GAAD,IAAQ,CAACA,GAAG,CAACxJ,IAAjB,EACA;CACC,iBAAO,IAAP;CACA;;CAED,eAAOkP,KAAK,CAACmC,SAAN,CAAgBjH,GAAhB,CAAoBmH,IAApB,CACN/H,GAAG,CAACxJ,IAAJ,CAASuH,gBAAT,CAA0B,iCAA1B,CADM,EAEN,UAASvH,IAAT,EAAe;CACd,iBAAOA,IAAI,CAACqG,OAAL,CAAamL,IAApB;CACA,SAJK,CAAP;CAMA,OAbF,CAF2B,CAArB,CAAP;CAkBA;CAn8BF;CAAA;CAAA,6BAq8BUC,GAr8BV,EAs8BC;CACC,UAAI,CAACA,GAAL,EACA;CACC;CACA;;CAED,aAAO,KAAKxM,KAAL,CAAWwM,GAAX,IAAkB,KAAKxM,KAAL,CAAWwM,GAAX,CAAlB,GAAoC,IAA3C;CACA;CA78BF;CAAA;CAAA,6BA+8BUA,GA/8BV,EA+8BeC,KA/8Bf,EAg9BC;CACC,aAAO,KAAKzM,KAAL,CAAWwM,GAAX,IAAkBC,KAAzB;CACA;CAl9BF;CAAA;CAAA,yCAo9BsBjQ,KAp9BtB,EAq9BC;CACCA,MAAAA,KAAK,CAACkQ,eAAN;CACAlQ,MAAAA,KAAK,CAACmQ,cAAN;CAEA,UAAM7J,IAAI,GAAGtG,KAAK,CAACwK,aAAN,CAAoB5F,OAApB,CAA4B0B,IAAzC;;CAEA,UAAI,CAACA,IAAL,EACA;CACC;CACA;;CAED,WAAK8J,gBAAL,GAAwB1O,EAAE,CAAC+E,IAAH,CAAQ4J,WAAR,CAAoBC,MAApB,CAA2B;CAClD5M,QAAAA,EAAE,EAAE,6CAD8C;CAElD6M,QAAAA,QAAQ,EAAE,IAFwC;CAGlDC,QAAAA,UAAU,EAAE,IAHsC;CAIlD/K,QAAAA,KAAK,EAAEmF,IAAI,CAACC,KAAL,CAAWvE,IAAX,CAJ2C;CAKlDmK,QAAAA,MAAM,EAAE,IAL0C;CAMlDC,QAAAA,SAAS,EAAE,GANuC;CAOlDC,QAAAA,QAAQ,EAAE,GAPwC;CAQlDC,QAAAA,KAAK,EAAE;CACNC,UAAAA,QAAQ,EAAE,KADJ;CAENC,UAAAA,MAAM,EAAE;CAFF,SAR2C;CAYlDC,QAAAA,MAAM,EAAE;CACPC,UAAAA,YAAY,EAAE,YAAW;CACxB,iBAAKC,sBAAL;CACA,WAFa,CAEZ5N,IAFY,CAEP,IAFO;CADP;CAZ0C,OAA3B,CAAxB;CAkBA,WAAK+M,gBAAL,CAAsBc,WAAtB,CAAkCC,cAAlC,CAAiDnR,KAAK,CAACwK,aAAvD;CACA,WAAK4F,gBAAL,CAAsBnG,IAAtB;CACA;CAp/BF;CAAA;CAAA,6CAu/BC;CACC,UAAI,KAAKmG,gBAAT,EACA;CACC1O,QAAAA,EAAE,CAAC+E,IAAH,CAAQ4J,WAAR,CAAoBzJ,OAApB,CAA4B,KAAKwJ,gBAAL,CAAsB1M,EAAlD;CACA;CACD;CA5/BF;CAAA;CAAA,sCA8/BmB1D,KA9/BnB,EA+/BC;CACCA,MAAAA,KAAK,CAACkQ,eAAN;CACAlQ,MAAAA,KAAK,CAACmQ,cAAN;CAEA,UAAM/H,SAAS,GAAGpI,KAAK,CAAC6D,MAAN,CAAae,OAAb,CAAqBwM,SAArB,IAAkCpR,KAAK,CAAC6D,MAAN,CAAawN,UAAb,CAAwBzM,OAAxB,CAAgCwM,SAApF;CACA,UAAM7F,MAAM,GAAGvL,KAAK,CAAC6D,MAAN,CAAae,OAAb,CAAqB2G,MAArB,IAA+BvL,KAAK,CAAC6D,MAAN,CAAawN,UAAb,CAAwBzM,OAAxB,CAAgC2G,MAA9E;CACA,UAAM/M,MAAM,GAAGwB,KAAK,CAAC6D,MAArB;CAEArF,MAAAA,MAAM,CAACQ,SAAP,CAAiBC,GAAjB,CAAqB,aAArB;CACA,WAAKgS,sBAAL;CAEA,WAAKK,QAAL,CAAclJ,SAAd,EAAyBmD,MAAzB,EACEzJ,IADF,CACO,YAAW;CAChBtD,QAAAA,MAAM,CAACQ,SAAP,CAAiBE,MAAjB,CAAwB,aAAxB;CACA,aAAKsJ,MAAL,CAAYzB,aAAG,CAACC,UAAJ,CAAeuE,MAAM,KAAK,WAAX,GAAyB,iCAAzB,GAA6D,iCAA5E,CAAZ;CACA,OAHK,CAGJlI,IAHI,CAGC,IAHD,CADP,EAKEkO,KALF,CAKQ,YAAW;CACjB/S,QAAAA,MAAM,CAACQ,SAAP,CAAiBE,MAAjB,CAAwB,aAAxB;CACA,aAAKsJ,MAAL,CAAYzB,aAAG,CAACC,UAAJ,CAAe,gCAAf,CAAZ;CACA,OAHM,CAGL3D,IAHK,CAGA,IAHA,CALR;CASA;CAnhCF;CAAA;CAAA,6BAqhCU+E,SArhCV,EAqhCqBmD,MArhCrB,EAshCC;CACC,aAAO,IAAIiG,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;CAC5ChQ,QAAAA,EAAE,CAACC,IAAH,CAAQC,kBAAR,CAA2B,oBAA3B,EAAiD,MAAjD,EAAyD;CACxDC,UAAAA,IAAI,EAAE,MADkD;CAExD3B,UAAAA,IAAI,EAAE;CAAEkI,YAAAA,SAAS,EAATA,SAAF;CAAamD,YAAAA,MAAM,EAANA;CAAb;CAFkD,SAAzD,EAGGzJ,IAHH,CAIC,YAAW;CACV2P,UAAAA,OAAO;CACP,SAFD,CAEEpO,IAFF,CAEO,IAFP,CAJD,EAOC,YAAW;CACVqO,UAAAA,MAAM;CACN,SAFD,CAEErO,IAFF,CAEO,IAFP,CAPD;CAWA,OAZM,CAAP;CAaA;CApiCF;CAAA;CAAA;;CCOA,IAAMsO,iBAAiB,GAAGC,oBAAU,CAACC,SAAX,CAAqB,cAArB,CAA1B;AAEAzR,8BAAY,CAACqB,SAAb,CAAuB,4BAAvB,EAAqD,UAACzB,KAAD,EAAW;CAC/D,6BAAuBA,KAAK,CAAC8R,aAAN,EAAvB;CAAA;CAAA,MAAOC,YAAP;;CACA,MAAGA,YAAY,CAACC,UAAb,OAA8B,6BAAjC,EACA;CACCC,IAAAA,aAAa,CAACC,IAAd,CAAmBP,iBAAiB,CAACrT,WAArC,EAAkDqT,iBAAiB,CAAChI,IAAlB,CAAuBvE,KAAvB,EAAlD,EAAkF,KAAlF,EAAwF,IAAxF;CACA;CACD,CAND;CAQA,IAAI+M,UAAJ;CACA,IAAIC,WAAJ;CACA,IAAIC,QAAJ;CACA,IAAIC,iBAAJ;CAEA,IAAIC,sBAAsB,GAAG,EAA7B;AAEAC,gBAAK,CAACC,KAAN,CAAY,YAAM;CAEjBH,EAAAA,iBAAiB,GAAGjR,QAAQ,CAACC,aAAT,CAAuB,4CAAvB,CAApB;CAEA,MAAMoR,UAAU,GAAG,IAAIpG,iBAAJ,CAAW;CAC7BnG,IAAAA,SAAS,EAAC,+DADmB;CAE7BwM,IAAAA,IAAI,EAAErG,iBAAM,CAACsG,IAAP,CAAYC,QAFW;CAG7BC,IAAAA,KAAK,EAAE;CACN1G,MAAAA,KAAK,EAAErF,aAAG,CAACC,UAAJ,CAAe,4BAAf;CADD,KAHsB;CAM7B2F,IAAAA,OAAO,EAAE,mBAAW;CACnBsF,MAAAA,aAAa,CAACC,IAAd,CAAmBP,iBAAiB,CAACrT,WAArC,EAAkDyI,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAAlD,EAAyF,KAAzF,EAA+F,IAA/F;CACA;CAR4B,GAAX,CAAnB;CAWAsL,EAAAA,iBAAiB,CAACnQ,MAAlB,CACCuQ,UAAU,CAACK,YAAX,EADD;CAIA3S,EAAAA,6BAAY,CAACqB,SAAb,CAAuB,6BAAvB,EAAsD,UAACzB,KAAD,EAAW;CAChE,gCAAeA,KAAK,CAAC8R,aAAN,EAAf;CAAA;CAAA,QAAOkB,IAAP;;CACA,QAAGA,IAAI,KAAK,EAAT,IAAeA,IAAI,KAAKlU,SAAxB,IAAqCiI,aAAG,CAACC,UAAJ,CAAe,sBAAf,MAA2CgM,IAAI,CAAC5N,KAAL,EAAnF,EACA;CACCmN,MAAAA,sBAAsB,GAAGS,IAAI,CAACnL,OAAL,GAAemB,cAAf,EAAzB;CACA;CACD,GAND;CAQA5I,EAAAA,6BAAY,CAACqB,SAAb,CAAuB,eAAvB,EAAwC,UAACzB,KAAD,EAAW;CAClD,gCAAeA,KAAK,CAAC8R,aAAN,EAAf;CAAA;CAAA,QAAOkB,IAAP;;CAEA,QAAGA,IAAI,KAAK,EAAT,IAAeA,IAAI,KAAKlU,SAAxB,IAAqCiI,aAAG,CAACC,UAAJ,CAAe,sBAAf,MAA2CgM,IAAI,CAAC5N,KAAL,EAAnF,EACA;CACC,UAAI6N,gBAAgB,GAAG,KAAvB;CACAtB,MAAAA,iBAAiB,CAAChI,IAAlB,CAAuB9B,OAAvB,GAAiCc,GAAjC,CAAqC,UAAUZ,GAAV,EACrC;CACC,YAAGmL,cAAI,CAACC,UAAL,CAAgBZ,sBAAsB,CAACa,OAAvC,KAAmDb,sBAAsB,CAACa,OAAvB,CAA+BrL,GAAG,CAAC3C,KAAJ,EAA/B,MAAgD,CAAC,CAAvG,EACA;CACC,cAAG2C,GAAG,CAACJ,OAAJ,EAAH,EACA;CACCI,YAAAA,GAAG,CAACsL,MAAJ;CACAJ,YAAAA,gBAAgB,GAAG,IAAnB;CACA;CACD;CACD,OAVD;CAWAV,MAAAA,sBAAsB,GAAG,EAAzB;;CAEA,UAAGU,gBAAH,EACA;CACCK,QAAAA,UAAU,CACT,YACA;CACClT,UAAAA,6BAAY,CAACC,IAAb,CAAkBkT,MAAlB,EAAyB,yBAAzB;CACA,SAJQ,EAKT,CALS,CAAV;CAOA;CACD;CACD,GA9BD;CAgCAC,EAAAA,kBAAM,CAACC,sBAAP,CAA8B;CAC7BtN,IAAAA,SAAS,EAAE;CADkB,GAA9B;CAIAgM,EAAAA,UAAU,GAAG9Q,QAAQ,CAAC+L,sBAAT,CAAgC,gBAAhC,EAAkD,CAAlD,CAAb;CACAgF,EAAAA,WAAW,GAAG/Q,QAAQ,CAACC,aAAT,CAAuB,iCAAvB,CAAd;CACA6Q,EAAAA,UAAU,CAACuB,YAAX,CAAwBtB,WAAxB,EAAoCD,UAAU,CAACwB,UAA/C;CACAtB,EAAAA,QAAQ,GAAGhR,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAAX;CAEAqQ,EAAAA,iBAAiB,CAACrT,WAAlB,GAAgC,IAAIA,WAAJ,CAAgB8T,WAAhB,CAAhC;CACAT,EAAAA,iBAAiB,CAACiC,4BAAlB,GAAiDvS,QAAQ,CAACC,aAAT,CAAuB,4CAAvB,CAAjD;AAAsH,CAEtHqQ,EAAAA,iBAAiB,CAACrT,WAAlB,CAA8BuV,aAA9B,CAA4CnB,UAA5C;CACAf,EAAAA,iBAAiB,CAACrT,WAAlB,CAA8BwV,eAA9B,CAA8CzS,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,CAA9C;CACAqQ,EAAAA,iBAAiB,CAACrT,WAAlB,CAA8ByV,gBAA9B,CAA+C1S,QAAQ,CAACC,aAAT,CAAuB,8BAAvB,CAA/C;CACAqQ,EAAAA,iBAAiB,CAACrT,WAAlB,CAA8B0V,gBAA9B,CAA+C3S,QAAQ,CAACC,aAAT,CAAuB,8BAAvB,CAA/C;CACAqQ,EAAAA,iBAAiB,CAACrT,WAAlB,CAA8B2V,iBAA9B,CAAgD5S,QAAQ,CAACC,aAAT,CAAuB,+BAAvB,CAAhD;CACA,CA5ED;CA8EAqQ,iBAAiB,CAACxS,QAAlB,GAA6B,IAAIA,QAAJ,EAA7B;CACAwS,iBAAiB,CAAClN,eAAlB,GAAoC,IAAItF,QAAJ,CAAa,iBAAb,CAApC;CACAwS,iBAAiB,CAAChI,IAAlB,GAAyB,IAAIuK,4BAAJ,EAAzB;CAEAvC,iBAAiB,CAAC5Q,QAAlB,GAA6BA,QAA7B;CAEA,IAAMoT,sBAAsB,GAAGvC,oBAAU,CAACC,SAAX,CAAqB,wBAArB,CAA/B;CACAsC,sBAAsB,CAAC9R,IAAvB,GAA8BA,IAA9B;;;;"}