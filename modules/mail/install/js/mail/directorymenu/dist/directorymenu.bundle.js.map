{"version":3,"file":"directorymenu.bundle.js","sources":["../src/item.js","../src/directorymenu.js"],"sourcesContent":["import { Tag } from 'main.core';\n\nexport class Item\n{\n\t#count = 0;\n\t#nameOriginal = '';\n\t#name = '';\n\t#counterElement: null;\n\t#itemElement: null;\n\t#isActive: false;\n\t#path : '';\n\t#shiftWidthInPixels = 10;\n\t#zeroLevelShiftWidth = 29;\n\n\tsetCount(number)\n\t{\n\t\tthis.#count = number;\n\t\tthis.#counterElement.textContent = number;\n\n\t\tif (number === 0)\n\t\t{\n\t\t\tthis.#counterElement.classList.add('ui-sidepanel-menu-link-text-counter-hidden');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#counterElement.classList.remove('ui-sidepanel-menu-link-text-counter-hidden');\n\t\t}\n\t}\n\n\tgetCount()\n\t{\n\t\treturn Number(this.#count);\n\t}\n\n\tdisableActivity()\n\t{\n\t\tthis.#isActive = false;\n\t\tthis.#itemElement.classList.remove('ui-sidepanel-menu-active');\n\t}\n\n\tgetPath()\n\t{\n\t\treturn this.#path;\n\t}\n\n\tenableActivity()\n\t{\n\t\tthis.#isActive = true;\n\t\tthis.#itemElement.classList.add('ui-sidepanel-menu-active');\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.#isActive;\n\t}\n\n\t/**\n\t * So as not to break the menu with incorrectly synchronized directories.\n\t *\n\t * @param directory (directory structure).\n\t * @returns {boolean}\n\t */\n\tstatic checkProperties(directory) {\n\t\tif(directory['path'] === undefined || directory['name'] === undefined || directory['name'] === undefined)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tconstructor(directory, menu, nestingLevel = 0, systemDirs)\n\t{\n\t\tthis.#path = directory['path'];\n\n\t\tlet iconClass = 'default';\n\t\tif(systemDirs['inbox'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'inbox';\n\t\t}\n\t\telse if(systemDirs['spam'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'spam';\n\t\t}\n\t\telse if(systemDirs['outcome'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'outcome';\n\t\t}\n\t\telse if(systemDirs['trash'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'trash';\n\t\t}\n\t\telse if(systemDirs['drafts'] === this.#path)\n\t\t{\n\t\t\ticonClass = 'drafts';\n\t\t}\n\n\t\tthis.#nameOriginal = directory['name'];\n\n\t\tthis.#name = this.#nameOriginal.charAt(0).toUpperCase() + this.#nameOriginal.slice(1);\n\n\t\tconst itemContainer = Tag.render`<div title=\"${this.#name}\" class=\"mail-menu-directory-item-container\"></div>`;\n\t\tconst itemElement = Tag.render`<li class=\"ui-sidepanel-menu-item ui-sidepanel-menu-counter-white mail-menu-directory-item-${iconClass}\">\n\t\t\t\t<a style=\"padding-left: ${this.#zeroLevelShiftWidth + (this.#shiftWidthInPixels*nestingLevel)}px\" class=\"ui-sidepanel-menu-link\">\n\t\t\t\t\t<div class=\"ui-sidepanel-menu-link-text\">\n\t\t\t\t\t\t<span class=\"ui-sidepanel-menu-link-text-item\">${this.#name}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"ui-sidepanel-menu-link-text-counter\">${directory['count']}</span>\n\t\t\t\t</a>\n\t\t\t</li>`;\n\t\titemContainer.append(itemElement);\n\n\t\titemElement.onclick = ()=>\n\t\t{\n\t\t\tif(!itemContainer.isActive())\n\t\t\t{\n\t\t\t\tmenu.chooseFunction(directory['path']);\n\t\t\t\titemContainer.enableActivity();\n\t\t\t}\n\t\t}\n\n\t\tconst counterElement = itemElement.querySelector(\".ui-sidepanel-menu-link-text-counter\");\n\n\t\tthis.#counterElement = counterElement;\n\t\tthis.#itemElement = itemElement;\n\n\t\titemContainer.getCount = () => this.getCount();\n\t\titemContainer.setCount = number => this.setCount(number);\n\t\titemContainer.enableActivity = () => this.enableActivity();\n\t\titemContainer.disableActivity = () => this.disableActivity();\n\t\titemContainer.isActive = () => this.isActive();\n\t\titemContainer.setIconClass = name => this.setIconClass(name);\n\n\t\tthis.setCount(directory['count']);\n\n\t\tfor(let i=0; i<directory['items'].length; i++)\n\t\t{\n\t\t\tif(!Item.checkProperties(directory['items'][i]))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst subdirectory = new Item(directory['items'][i],menu,nestingLevel+1,systemDirs);\n\t\t\titemContainer.append(subdirectory);\n\t\t}\n\n\t\tmenu.includeItem(itemContainer, this.#path);\n\n\t\treturn itemContainer;\n\t}\n}","import { Tag } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { Item } from './item.js';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './css/ui-wrappermenu.css';\nimport './css/style.css';\n\n\nexport class DirectoryMenu\n{\n\t#activeDir = '';\n\t#menu = Tag.render`<ul class=\"ui-mail-left-directory-menu\"></ul>`;\n\t#directoryCounters = new Map();\n\t#items = new Map();\n\t#systemDirs = [];\n\n\tgetActiveDir()\n\t{\n\t\treturn this.#activeDir;\n\t}\n\n\tsetActiveDir(path)\n\t{\n\t\tthis.#activeDir = path;\n\t}\n\n\tclearActiveMenuButtons()\n\t{\n\t\tfor (let item of this.#items.values())\n\t\t{\n\t\t\titem.disableActivity();\n\t\t}\n\t}\n\n\trebuildMenu(dirsWithUnseenMailCounters)\n\t{\n\t\tthis.#directoryCounters = dirsWithUnseenMailCounters;\n\t\tthis.cleanItems();\n\t\tthis.buildMenu();\n\t\tthis.setDirectory(this.getActiveDir());\n\t}\n\n\tcleanItems()\n\t{\n\t\tfor (let item of this.#items.values())\n\t\t{\n\t\t\tthis.#menu.removeChild(item);\n\t\t}\n\t\tthis.#items.clear();\n\t}\n\n\tincludeItem(domItem, directoryPath)\n\t{\n\t\tthis.#items.set(directoryPath, domItem);\n\t\tthis.#menu.append(domItem);\n\t}\n\n\tchooseFunction(path)\n\t{\n\t\tthis.clearActiveMenuButtons();\n\t\tthis.setActiveDir(path);\n\t\tthis.setFilterDir(path);\n\t}\n\n\tbuildMenu(firstBuild = false)\n\t{\n\t\tfor (let i = 0; i < this.#directoryCounters.length; i++)\n\t\t{\n\t\t\tconst directory = this.#directoryCounters[i];\n\t\t\tconst path = directory['path'];\n\t\t\tif(!Item.checkProperties(directory))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(this.#systemDirs['inbox'] === path && firstBuild)\n\t\t\t{\n\t\t\t\tBX.Mail.Home.FilterToolbar.setCount(directory['count']);\n\t\t\t}\n\n\t\t\tnew Item(directory,this,0,this.#systemDirs);\n\t\t}\n\t}\n\n\tsetFilterDir(name)\n\t{\n\t\tconst event = new BaseEvent({ data: { directory: name } });\n\t\tEventEmitter.emit('BX.DirectoryMenu:onChangeFilter', event);\n\n\t\tname = BX.Mail.Home.Counters.getShortcut(name);\n\n\t\tconst filter = this.filter;\n\t\tif (!!filter && (filter instanceof BX.Main.Filter))\n\t\t{\n\t\t\tconst FilterApi = filter.getApi();\n\t\t\tFilterApi.setFields({\n\t\t\t\t'DIR': name,\n\t\t\t});\n\t\t\tFilterApi.apply();\n\t\t}\n\t}\n\n\tchangeCounter(dirPath, number, mode)\n\t{\n\t\tconst item = this.#items.get(dirPath);\n\n\t\tif(item === undefined) return;\n\n\t\tif (mode !== 'set')\n\t\t{\n\t\t\titem.setCount(item.getCount() + Number(number));\n\t\t}\n\t\telse\n\t\t{\n\t\t\titem.setCount(Number(number));\n\t\t}\n\t}\n\n\tsetCounters(counters)\n\t{\n\t\tfor (let path in counters)\n\t\t{\n\t\t\tif (counters.hasOwnProperty(path))\n\t\t\t{\n\t\t\t\tthis.changeCounter(path, counters[path], 'set');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDirectory(path)\n\t{\n\t\tthis.clearActiveMenuButtons();\n\t\tif(path === undefined) return;\n\t\tconst item = this.#items.get(path);\n\t\tif(item)\n\t\t{\n\t\t\tthis.setActiveDir(path)\n\t\t\titem.enableActivity();\n\t\t}\n\t}\n\n\tconstructor(config = {\n\t\tdirsWithUnseenMailCounters: {},\n\t\tfilterId: '',\n\t\tsystemDirs :\n\t\t{\n\t\t\tspam: 'Spam',\n\t\t\ttrash: 'Trash',\n\t\t\toutcome: 'Outcome',\n\t\t\tdrafts: 'Drafts',\n\t\t\tinbox: 'Inbox',\n\t\t}\n\t})\n\t{\n\t\tthis.filter = BX.Main.filterManager.getById(config['filterId']);\n\t\tthis.#systemDirs = config['systemDirs'];\n\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', (event) => {\n\n\t\t\tlet dir = BX.Mail.Home.Counters.getDirPath(this.filter.getFilterFieldsValues()['DIR']);\n\n\t\t\tEventEmitter.emit('BX.DirectoryMenu:onChangeFilter', new BaseEvent({ data: { directory: dir } }));\n\t\t\tthis.setDirectory(dir)\n\t\t});\n\n\t\tthis.#directoryCounters = config['dirsWithUnseenMailCounters'];\n\n\t\tthis.buildMenu(true);\n\t}\n\n\tgetNode()\n\t{\n\t\treturn this.#menu;\n\t}\n}"],"names":["Item","number","textContent","classList","add","remove","Number","directory","undefined","menu","nestingLevel","systemDirs","iconClass","charAt","toUpperCase","slice","itemContainer","Tag","render","itemElement","append","onclick","isActive","chooseFunction","enableActivity","counterElement","querySelector","getCount","setCount","disableActivity","setIconClass","name","i","length","checkProperties","subdirectory","includeItem","DirectoryMenu","path","values","item","dirsWithUnseenMailCounters","cleanItems","buildMenu","setDirectory","getActiveDir","removeChild","clear","domItem","directoryPath","set","clearActiveMenuButtons","setActiveDir","setFilterDir","firstBuild","BX","Mail","Home","FilterToolbar","event","BaseEvent","data","EventEmitter","emit","Counters","getShortcut","filter","Main","Filter","FilterApi","getApi","setFields","apply","dirPath","mode","get","counters","hasOwnProperty","changeCounter","config","filterId","spam","trash","outcome","drafts","inbox","Map","filterManager","getById","subscribe","dir","getDirPath","getFilterFieldsValues"],"mappings":"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"}