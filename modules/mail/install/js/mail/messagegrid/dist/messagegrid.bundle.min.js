this.BX=this.BX||{};(function(e,t,i){"use strict";var l,a;function s(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var r=new WeakMap;var n=new WeakMap;var d=new WeakMap;var u=new WeakMap;var c=new WeakMap;var o=new WeakMap;var g=new WeakSet;var v=function(){function e(){var l=this;babelHelpers.classCallCheck(this,e);g.add(this);r.set(this,{writable:true,value:void 0});n.set(this,{writable:true,value:void 0});d.set(this,{writable:true,value:void 0});u.set(this,{writable:true,value:false});c.set(this,{writable:true,value:void 0});o.set(this,{writable:true,value:void 0});if(babelHelpers.typeof(e.instance)==="object"){return e.instance}e.instance=this;t.EventEmitter.subscribe("Grid::allRowsSelected",function(e){if(s(l,g,b).call(l,e))babelHelpers.classPrivateFieldSet(l,u,true)});t.EventEmitter.subscribe("Grid::allRowsUnselected",function(e){if(s(l,g,b).call(l,e))babelHelpers.classPrivateFieldSet(l,u,false)});t.EventEmitter.subscribe("Grid::updated",function(e){if(s(l,g,b).call(l,e)&&babelHelpers.classPrivateFieldGet(l,u)){if(babelHelpers.classPrivateFieldGet(l,o)!==undefined){babelHelpers.classPrivateFieldGet(l,o).checked=true}l.selectAll()}});t.EventEmitter.subscribe("Mail::resetGridSelection",function(e){babelHelpers.classPrivateFieldSet(l,u,false)});t.EventEmitter.subscribe("Mail::directoryChanged",function(){babelHelpers.classPrivateFieldSet(l,u,false)});t.EventEmitter.subscribe("Grid::thereSelectedRows",function(e){if(s(l,g,b).call(l,e))babelHelpers.classPrivateFieldSet(l,u,false)});t.EventEmitter.subscribe("Grid::updated",function(e){var t=e.getCompatData(),a=babelHelpers.slicedToArray(t,1),s=a[0];if(s!==undefined&&i.Type.isFunction(s.getId)&&s.getId()===l.getId()){l.replaceTheBlankEmailStub()}});this.replaceTheBlankEmailStub();return e.instance}babelHelpers.createClass(e,[{key:"setGridWrapper",value:function e(t){babelHelpers.classPrivateFieldSet(this,n,t)}},{key:"getGridWrapper",value:function e(){return babelHelpers.classPrivateFieldGet(this,n)}},{key:"enableLoadingMessagesStub",value:function e(){var t=this;if(this.getGridWrapper()!==undefined){babelHelpers.classPrivateFieldSet(this,r,this.getGridWrapper().appendChild(i.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-loader mail-msg-list-grid-loader-animate">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-loader-inner">\n\t\t\t\t\t\t\t<img src="/bitrix/images/mail/mail-loader.svg" alt="Load...">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'])))));setTimeout(function(){if(babelHelpers.classPrivateFieldGet(t,r)!==undefined){babelHelpers.classPrivateFieldGet(t,r).remove()}},15e3)}}},{key:"replaceTheBlankEmailStub",value:function e(){var t=document.getElementsByClassName("main-grid-row main-grid-row-empty main-grid-row-body");if(t.length>0){var l=t[0];if(l.firstElementChild.firstElementChild){l.firstElementChild.firstElementChild.replaceWith(i.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-empty">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-inner">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-title">','</div>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">','</p>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">',"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"])),i.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TITLE"),i.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_1"),i.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_2")))}}}},{key:"setCheckboxNodeForCheckAll",value:function e(t){babelHelpers.classPrivateFieldSet(this,o,t)}},{key:"setPanel",value:function e(t){babelHelpers.classPrivateFieldSet(this,c,t)}},{key:"getPanel",value:function e(){return babelHelpers.classPrivateFieldGet(this,c)}},{key:"hidePanel",value:function e(){var t=this.getPanel();if(t&&i.Type.isFunction(t.hidePanel())){this.getPanel().hidePanel()}}},{key:"setAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,u,true)}},{key:"unsetAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,u,false)}},{key:"reloadTable",value:function e(){this.getGrid().reloadTable();this.getGrid().tableUnfade()}},{key:"setGridId",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,d)===t){return}babelHelpers.classPrivateFieldSet(this,d,t);this.grid=BX.Main.gridManager.getInstanceById(t)}},{key:"selectAll",value:function e(){this.getGrid().getRows().selectAll()}},{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,d)}},{key:"getCountDisplayed",value:function e(){if(this.getGrid()){return this.getGrid().getRows().getCountDisplayed()}}},{key:"getGrid",value:function e(){return this.grid}},{key:"getRows",value:function e(){return this.getGrid().getRows().getBodyChild()}},{key:"getRowById",value:function e(t){return this.getGrid().getRows().getById(t)}},{key:"getRowNodeById",value:function e(t){return this.getRowById(t).getNode()}},{key:"getSelectedIds",value:function e(){return this.getGrid().getRows().getSelectedIds()}},{key:"hideRowByIds",value:function e(t){for(var l=0;l<t.length;l++){var a=this.getRowNodeById(t[l]);i.Dom.style(a,"display","none")}}},{key:"resetGridSelection",value:function e(){t.EventEmitter.emit(window,"Mail::resetGridSelection");this.getGrid().getRows().unselectAll();this.getGrid().adjustCheckAllCheckboxes();this.hidePanel()}},{key:"openGridSettingsWindow",value:function e(){this.getGrid().getSettingsWindow()._onSettingsButtonClick()}}]);return e}();function b(e,t){if(this.getId()!==undefined){if(t===undefined&&e.getCompatData()){var l=e.getCompatData();var a=babelHelpers.slicedToArray(l,1);t=a[0]}if(t!==undefined&&i.Type.isFunction(t.getId)&&t.getId()===this.getId())return true}return false}e.MessageGrid=v})(this.BX.Mail=this.BX.Mail||{},BX.Event,BX);
//# sourceMappingURL=messagegrid.bundle.map.js