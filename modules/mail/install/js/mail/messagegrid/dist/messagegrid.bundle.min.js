this.BX=this.BX||{};(function(e,t,i,l,a,s){"use strict";var r,n,d,c;function u(e,t){g(e,t);t.add(e)}function o(e,t,i){g(e,t);t.set(e,i)}function g(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function v(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var b=new WeakMap;var p=new WeakMap;var f=new WeakMap;var h=new WeakMap;var m=new WeakMap;var I=new WeakMap;var y=new WeakSet;var T=function(){function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;babelHelpers.classCallCheck(this,e);u(this,y);babelHelpers.defineProperty(this,"EXPAND_LICENSE_URL","/settings/license_all.php");o(this,b,{writable:true,value:void 0});o(this,p,{writable:true,value:void 0});o(this,f,{writable:true,value:void 0});o(this,h,{writable:true,value:false});o(this,m,{writable:true,value:void 0});o(this,I,{writable:true,value:void 0});this.mailboxIsAvailable=i;if(babelHelpers["typeof"](e.instance)==="object"){return e.instance}e.instance=this;a.EventEmitter.subscribe("Grid::allRowsSelected",(function(e){if(v(t,y,S).call(t,e))babelHelpers.classPrivateFieldSet(t,h,true)}));a.EventEmitter.subscribe("Grid::allRowsUnselected",(function(e){if(v(t,y,S).call(t,e))babelHelpers.classPrivateFieldSet(t,h,false)}));a.EventEmitter.subscribe("Grid::updated",(function(e){if(v(t,y,S).call(t,e)&&babelHelpers.classPrivateFieldGet(t,h)){if(babelHelpers.classPrivateFieldGet(t,I)!==undefined){babelHelpers.classPrivateFieldGet(t,I).checked=true}t.selectAll()}}));a.EventEmitter.subscribe("Mail::resetGridSelection",(function(e){babelHelpers.classPrivateFieldSet(t,h,false)}));a.EventEmitter.subscribe("Mail::directoryChanged",(function(){babelHelpers.classPrivateFieldSet(t,h,false)}));a.EventEmitter.subscribe("Grid::thereSelectedRows",(function(e){if(v(t,y,S).call(t,e))babelHelpers.classPrivateFieldSet(t,h,false)}));a.EventEmitter.subscribe("Grid::updated",(function(e){var i=e.getCompatData(),l=babelHelpers.slicedToArray(i,1),a=l[0];if(a!==undefined&&s.Type.isFunction(a.getId)&&a.getId()===t.getId()){t.replaceTheBlankEmailStub()}}));this.replaceTheBlankEmailStub();return e.instance}babelHelpers.createClass(e,[{key:"setGridWrapper",value:function e(t){babelHelpers.classPrivateFieldSet(this,p,t)}},{key:"getGridWrapper",value:function e(){return babelHelpers.classPrivateFieldGet(this,p)}},{key:"enableLoadingMessagesStub",value:function e(){var t=this;if(this.getGridWrapper()!==undefined){babelHelpers.classPrivateFieldSet(this,b,this.getGridWrapper().appendChild(s.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-loader mail-msg-list-grid-loader-animate">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-loader-inner">\n\t\t\t\t\t\t\t<img src="/bitrix/images/mail/mail-loader.svg" alt="Load...">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'])))));setTimeout((function(){if(babelHelpers.classPrivateFieldGet(t,b)!==undefined){babelHelpers.classPrivateFieldGet(t,b).remove()}}),15e3)}}},{key:"replaceTheBlankEmailStub",value:function e(){var t=this;var i=document.getElementsByClassName("main-grid-row main-grid-row-empty main-grid-row-body");if(i.length>0){var l=i[0];if(l.firstElementChild.firstElementChild){if(this.mailboxIsAvailable){l.firstElementChild.firstElementChild.replaceWith(s.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-inner">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-title">','</div>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">','</p>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">',"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>"])),s.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TITLE"),s.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_1"),s.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_2")))}else{var a=s.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<button class="ui-btn ui-btn-round ui-btn-lg ui-btn-success">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</button>"])),s.Loc.getMessage("MAIL_MSG_LIST_MAILBOX_TARIFF_RESTRICTIONS_BUTTON"));a.onclick=function(e){e.preventDefault();window.open(t.EXPAND_LICENSE_URL,"_blank")};var r=s.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-empty">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-inner">\n\t\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-title">','</div>\n\t\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">','</p>\n\t\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">',"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<br/>\n\t\t\t\t\t</div>"])),s.Loc.getMessage("MAIL_MSG_LIST_MAILBOX_TARIFF_RESTRICTIONS_TITLE"),s.Loc.getMessage("MAIL_MSG_LIST_MAILBOX_TARIFF_RESTRICTIONS_TEXT_1"),s.Loc.getMessage("MAIL_MSG_LIST_MAILBOX_TARIFF_RESTRICTIONS_TEXT_2"));r.append(a);l.firstElementChild.firstElementChild.replaceWith(r)}}}}},{key:"setCheckboxNodeForCheckAll",value:function e(t){babelHelpers.classPrivateFieldSet(this,I,t)}},{key:"setPanel",value:function e(t){babelHelpers.classPrivateFieldSet(this,m,t)}},{key:"getPanel",value:function e(){return babelHelpers.classPrivateFieldGet(this,m)}},{key:"hidePanel",value:function e(){var t=this.getPanel();if(t&&s.Type.isFunction(t.hidePanel())){this.getPanel().hidePanel()}}},{key:"setAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,h,true)}},{key:"unsetAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,h,false)}},{key:"reloadTable",value:function e(){this.getGrid().reloadTable();this.getGrid().tableUnfade()}},{key:"setGridId",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,f)===t){return}babelHelpers.classPrivateFieldSet(this,f,t);this.grid=BX.Main.gridManager.getInstanceById(t)}},{key:"selectAll",value:function e(){this.getGrid().getRows().selectAll()}},{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,f)}},{key:"getCountDisplayed",value:function e(){if(this.getGrid()){return this.getGrid().getRows().getCountDisplayed()}}},{key:"getGrid",value:function e(){return this.grid}},{key:"getRows",value:function e(){return this.getGrid().getRows().getBodyChild()}},{key:"getRowById",value:function e(t){return this.getGrid().getRows().getById(t)}},{key:"getRowNodeById",value:function e(t){return this.getRowById(t).getNode()}},{key:"getSelectedIds",value:function e(){return this.getGrid().getRows().getSelectedIds()}},{key:"hideRowByIds",value:function e(t){for(var i=0;i<t.length;i++){var l=this.getRowNodeById(t[i]);s.Dom.style(l,"display","none")}}},{key:"resetGridSelection",value:function e(){a.EventEmitter.emit(window,"Mail::resetGridSelection");this.getGrid().getRows().unselectAll();this.getGrid().adjustCheckAllCheckboxes();this.hidePanel()}},{key:"openGridSettingsWindow",value:function e(){this.getGrid().getSettingsWindow()._onSettingsButtonClick()}}]);return e}();function S(e,t){if(this.getId()!==undefined){if(t===undefined&&e.getCompatData()){var i=e.getCompatData();var l=babelHelpers.slicedToArray(i,1);t=l[0]}if(t!==undefined&&s.Type.isFunction(t.getId)&&t.getId()===this.getId())return true}return false}e.MessageGrid=T})(this.BX.Mail=this.BX.Mail||{},BX,BX.UI,BX,BX.Event,BX);
//# sourceMappingURL=messagegrid.bundle.map.js