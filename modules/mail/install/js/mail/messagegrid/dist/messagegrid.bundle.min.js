this.BX=this.BX||{};(function(e,t,i,l,a){"use strict";var s,r;function n(e,t){u(e,t);t.add(e)}function d(e,t,i){u(e,t);t.set(e,i)}function u(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function c(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var o=new WeakMap;var g=new WeakMap;var v=new WeakMap;var b=new WeakMap;var f=new WeakMap;var h=new WeakMap;var p=new WeakSet;var m=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e);n(this,p);d(this,o,{writable:true,value:void 0});d(this,g,{writable:true,value:void 0});d(this,v,{writable:true,value:void 0});d(this,b,{writable:true,value:false});d(this,f,{writable:true,value:void 0});d(this,h,{writable:true,value:void 0});if(babelHelpers["typeof"](e.instance)==="object"){return e.instance}e.instance=this;l.EventEmitter.subscribe("Grid::allRowsSelected",(function(e){if(c(t,p,y).call(t,e))babelHelpers.classPrivateFieldSet(t,b,true)}));l.EventEmitter.subscribe("Grid::allRowsUnselected",(function(e){if(c(t,p,y).call(t,e))babelHelpers.classPrivateFieldSet(t,b,false)}));l.EventEmitter.subscribe("Grid::updated",(function(e){if(c(t,p,y).call(t,e)&&babelHelpers.classPrivateFieldGet(t,b)){if(babelHelpers.classPrivateFieldGet(t,h)!==undefined){babelHelpers.classPrivateFieldGet(t,h).checked=true}t.selectAll()}}));l.EventEmitter.subscribe("Mail::resetGridSelection",(function(e){babelHelpers.classPrivateFieldSet(t,b,false)}));l.EventEmitter.subscribe("Mail::directoryChanged",(function(){babelHelpers.classPrivateFieldSet(t,b,false)}));l.EventEmitter.subscribe("Grid::thereSelectedRows",(function(e){if(c(t,p,y).call(t,e))babelHelpers.classPrivateFieldSet(t,b,false)}));l.EventEmitter.subscribe("Grid::updated",(function(e){var i=e.getCompatData(),l=babelHelpers.slicedToArray(i,1),s=l[0];if(s!==undefined&&a.Type.isFunction(s.getId)&&s.getId()===t.getId()){t.replaceTheBlankEmailStub()}}));this.replaceTheBlankEmailStub();return e.instance}babelHelpers.createClass(e,[{key:"setGridWrapper",value:function e(t){babelHelpers.classPrivateFieldSet(this,g,t)}},{key:"getGridWrapper",value:function e(){return babelHelpers.classPrivateFieldGet(this,g)}},{key:"enableLoadingMessagesStub",value:function e(){var t=this;if(this.getGridWrapper()!==undefined){babelHelpers.classPrivateFieldSet(this,o,this.getGridWrapper().appendChild(a.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-loader mail-msg-list-grid-loader-animate">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-loader-inner">\n\t\t\t\t\t\t\t<img src="/bitrix/images/mail/mail-loader.svg" alt="Load...">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'])))));setTimeout((function(){if(babelHelpers.classPrivateFieldGet(t,o)!==undefined){babelHelpers.classPrivateFieldGet(t,o).remove()}}),15e3)}}},{key:"replaceTheBlankEmailStub",value:function e(){var t=document.getElementsByClassName("main-grid-row main-grid-row-empty main-grid-row-body");if(t.length>0){var i=t[0];if(i.firstElementChild.firstElementChild){i.firstElementChild.firstElementChild.replaceWith(a.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t<div class="mail-msg-list-grid-empty">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-inner">\n\t\t\t\t\t\t<div class="mail-msg-list-grid-empty-title">','</div>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">','</p>\n\t\t\t\t\t\t<p class="mail-msg-list-grid-empty-text">',"</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>"])),a.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TITLE"),a.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_1"),a.Loc.getMessage("MAIL_MSG_LIST_GRID_EMPTY_TEXT_2")))}}}},{key:"setCheckboxNodeForCheckAll",value:function e(t){babelHelpers.classPrivateFieldSet(this,h,t)}},{key:"setPanel",value:function e(t){babelHelpers.classPrivateFieldSet(this,f,t)}},{key:"getPanel",value:function e(){return babelHelpers.classPrivateFieldGet(this,f)}},{key:"hidePanel",value:function e(){var t=this.getPanel();if(t&&a.Type.isFunction(t.hidePanel())){this.getPanel().hidePanel()}}},{key:"setAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,b,true)}},{key:"unsetAllRowsSelectedStatus",value:function e(){babelHelpers.classPrivateFieldSet(this,b,false)}},{key:"reloadTable",value:function e(){this.getGrid().reloadTable();this.getGrid().tableUnfade()}},{key:"setGridId",value:function e(t){if(babelHelpers.classPrivateFieldGet(this,v)===t){return}babelHelpers.classPrivateFieldSet(this,v,t);this.grid=BX.Main.gridManager.getInstanceById(t)}},{key:"selectAll",value:function e(){this.getGrid().getRows().selectAll()}},{key:"getId",value:function e(){return babelHelpers.classPrivateFieldGet(this,v)}},{key:"getCountDisplayed",value:function e(){if(this.getGrid()){return this.getGrid().getRows().getCountDisplayed()}}},{key:"getGrid",value:function e(){return this.grid}},{key:"getRows",value:function e(){return this.getGrid().getRows().getBodyChild()}},{key:"getRowById",value:function e(t){return this.getGrid().getRows().getById(t)}},{key:"getRowNodeById",value:function e(t){return this.getRowById(t).getNode()}},{key:"getSelectedIds",value:function e(){return this.getGrid().getRows().getSelectedIds()}},{key:"hideRowByIds",value:function e(t){for(var i=0;i<t.length;i++){var l=this.getRowNodeById(t[i]);a.Dom.style(l,"display","none")}}},{key:"resetGridSelection",value:function e(){l.EventEmitter.emit(window,"Mail::resetGridSelection");this.getGrid().getRows().unselectAll();this.getGrid().adjustCheckAllCheckboxes();this.hidePanel()}},{key:"openGridSettingsWindow",value:function e(){this.getGrid().getSettingsWindow()._onSettingsButtonClick()}}]);return e}();function y(e,t){if(this.getId()!==undefined){if(t===undefined&&e.getCompatData()){var i=e.getCompatData();var l=babelHelpers.slicedToArray(i,1);t=l[0]}if(t!==undefined&&a.Type.isFunction(t.getId)&&t.getId()===this.getId())return true}return false}e.MessageGrid=m})(this.BX.Mail=this.BX.Mail||{},BX,BX,BX.Event,BX);
//# sourceMappingURL=messagegrid.bundle.map.js