this.BX=this.BX||{};(function(e,r){"use strict";var t;function a(e,r){var t=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=n(e))||r&&e&&typeof e.length==="number"){if(t)e=t;var a=0;var l=function e(){};return{s:l,n:function r(){if(a>=e.length)return{done:true};return{done:false,value:e[a++]}},e:function e(r){throw r},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i=true,u=false,o;return{s:function r(){t=t.call(e)},n:function e(){var r=t.next();i=r.done;return r},e:function e(r){u=true;o=r},f:function e(){try{if(!i&&t.return!=null)t.return()}finally{if(u)throw o}}}}function n(e,r){if(!e)return;if(typeof e==="string")return l(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor)t=e.constructor.name;if(t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return l(e,r)}function l(e,r){if(r==null||r>e.length)r=e.length;for(var t=0,a=new Array(r);t<r;t++){a[t]=e[t]}return a}var i=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"stringToHashCode",value:function e(r){var t=0;for(var a=0;a<r.length;a++){t=r.charCodeAt(a)+((t<<5)-t)}return t}},{key:"alignChannelRangeColor",value:function e(r){if(r>255){return 255}else if(r<0){return 0}else{return Math.ceil(r)}}},{key:"hashToColor",value:function e(r){var t=255*3;var a=0;var n=.2;var l=(r&16711680)>>16;var i=(r&65280)>>8;var u=r&255;var o=1.5;var s=2.5;var f=2;if(t-(l+i+u)<100){l/=o;i/=o;u/=o}else if(l+i+u<200-a){l*=s;i*=s;u*=s}var c=[l,i,u];c.sort((function(e,r){return e-r}));if((c[c.length-1]-c[0])/c[0]<n){i/=f}l=this.alignChannelRangeColor(l);i=this.alignChannelRangeColor(i);u=this.alignChannelRangeColor(u);var v="#"+("0"+l.toString(16)).substr(-2)+("0"+i.toString(16)).substr(-2)+("0"+u.toString(16)).substr(-2);return v.toUpperCase()}},{key:"stringToColor",value:function e(r){return this.hashToColor(this.stringToHashCode(r))}},{key:"build",value:function e(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{size:"small",fullName:"User Quest",email:"info@example.com"};var n=new Set(["small","big"]);if(a["size"]===undefined||!n.has(a["size"])){a["size"]="small"}a["fullName"]=a["fullName"].replace(/[\u0026\u005c\u002f\u005c\u005c\u0023\u002c\u002b\u0028\u0029\u0024\u007e\u0025\u002e\u0027\u0022\u003a\u002a\u003f\u003c\u003e\u007b\u007d\u00ab\u00bb]/g,"").toUpperCase();var l=a["fullName"].split(" ");var i=l[0][0];if(l.length>1){i+=l[1][0]}var u=r.Tag.render(t||(t=babelHelpers.taggedTemplateLiteral(['<span class="mail-ui-avatar mail-ui-avatar-','">',"</span>"])),a["size"],i);u.style.backgroundColor=this.stringToColor(a["email"]);return u}},{key:"replaceElementWithAvatar",value:function e(r,t){var a=r.parentNode;a.insertBefore(t,r);a.removeChild(r)}},{key:"replaceTagsWithAvatars",value:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{className:"mail-ui-avatar"};var t=document.getElementsByClassName(r["className"]);var n=a(t),l;try{for(n.s();!(l=n.n()).done;){var i=l.value;this.replaceElementWithAvatar(i,this.build({fullName:i.getAttribute("user-name"),email:i.getAttribute("email")}))}}catch(e){n.e(e)}finally{n.f()}}}]);return e}();e.Avatar=i})(this.BX.Mail=this.BX.Mail||{},BX);
//# sourceMappingURL=avatar.bundle.map.js