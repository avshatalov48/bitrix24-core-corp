{"version":3,"file":"avatar.bundle.js","sources":["../src/avatar.js"],"sourcesContent":["import { Tag } from 'main.core';\nimport './css/style.css';\n\nexport class Avatar\n{\n\tstatic stringToHashCode(string)\n\t{\n\t\tlet hashCode = 0;\n\n\t\tfor (let i = 0; i < string.length; i++)\n\t\t{\n\t\t\thashCode = string.charCodeAt(i) + ((hashCode << 5) - hashCode);\n\t\t}\n\n\t\treturn hashCode;\n\t}\n\n\tstatic numberToRGB(index)\n\t{\n\t\tlet color = (index & 0x00FFFFFF).toString(16);\n\t\tcolor = color.toUpperCase();\n\n\t\treturn '00000'.substring(0, 6 - color.length) + color;\n\t}\n\n\tstatic stringToColor(name)\n\t{\n\t\treturn this.numberToRGB(this.stringToHashCode(name));\n\t}\n\n\tstatic build(config = {\n\t\tsize: 'small',\n\t\tfullName: 'User Quest',\n\t\temail: 'info@example.com',\n\t})\n\t{\n\t\tconst whiteList = new Set(['small', 'big']);\n\n\t\tif (config['size'] === undefined || !whiteList.has(config['size']))\n\t\t{\n\t\t\tconfig['size'] = 'small';\n\t\t}\n\n\t\tconfig['fullName'] = config['fullName'].replace(/[\\u0026\\u005c\\u002f\\u005c\\u005c\\u0023\\u002c\\u002b\\u0028\\u0029\\u0024\\u007e\\u0025\\u002e\\u0027\\u0022\\u003a\\u002a\\u003f\\u003c\\u003e\\u007b\\u007d\\u00ab\\u00bb]/g, '').toUpperCase();\n\t\tlet brokenName = config['fullName'].split(' ');\n\t\tlet abbreviation = brokenName[0][0];\n\n\t\tif (brokenName.length > 1)\n\t\t{\n\t\t\tabbreviation += brokenName[1][0];\n\t\t}\n\n\t\tlet avatar = Tag.render`<span class=\"mail-ui-avatar mail-ui-avatar-${config['size']}\">${abbreviation}</span>`;\n\t\tavatar.style.backgroundColor = this.stringToColor(config['email']);\n\n\t\treturn avatar;\n\t}\n\n\tstatic replaceElementWithAvatar(object, avatar)\n\t{\n\t\tconst parent = object.parentNode;\n\t\tparent.insertBefore(avatar, object);\n\t\tparent.removeChild(object);\n\t}\n\n\tstatic replaceTagsWithAvatars(config = { className: 'mail-ui-avatar' })\n\t{\n\t\tconst elements = document.getElementsByClassName(config['className']);\n\t\tfor (let element of elements)\n\t\t{\n\t\t\tthis.replaceElementWithAvatar(element, this.build({\n\t\t\t\tfullName: element.getAttribute('user-name'),\n\t\t\t\temail: element.getAttribute('email'),\n\t\t\t}));\n\t\t}\n\t}\n}"],"names":["Avatar","string","hashCode","i","length","charCodeAt","index","color","toString","toUpperCase","substring","name","numberToRGB","stringToHashCode","config","size","fullName","email","whiteList","Set","undefined","has","replace","brokenName","split","abbreviation","avatar","Tag","render","style","backgroundColor","stringToColor","object","parent","parentNode","insertBefore","removeChild","className","elements","document","getElementsByClassName","element","replaceElementWithAvatar","build","getAttribute"],"mappings":"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"}