{"version":3,"file":"dialogeditcontact.bundle.js","sources":["../src/dialogeditcontact.js"],"sourcesContent":["import { Tag, Loc, Validation } from 'main.core';\nimport { SidePanelWrapper } from 'mail.sidepanelwrapper';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Avatar } from 'mail.avatar';\n\nimport './css/style.css';\nimport '/bitrix/js/ui/forms/ui.forms.css';\nimport 'ui.forms';\nimport 'ui.alerts';\n\nexport class DialogEditContact\n{\n\tstatic getCheckedFields(contentElement)\n\t{\n\t\tconst emailItem = contentElement.querySelector('[data-role=\"email-container\"]');\n\t\tconst emailInput = emailItem.querySelector('[data-role=\"input-field\"]');\n\t\tconst email = emailInput.value;\n\n\t\tconst nameItem = contentElement.querySelector('[data-role=\"name-container\"]');\n\t\tconst nameInput = nameItem.querySelector('[data-role=\"input-field\"]');\n\t\tlet name = nameInput.value;\n\n\t\tlet fieldsAreFilledCorrectly = true;\n\t\tlet checkedFields = [];\n\n\t\tif (!Validation.isEmail(email))\n\t\t{\n\t\t\tfieldsAreFilledCorrectly = false;\n\t\t\temailItem.showError(0);\n\t\t}\n\t\telse if (name.length < 1)\n\t\t{\n\t\t\tname = email.split('@')[0];\n\t\t}\n\n\t\tcheckedFields = {\n\t\t\tname: name,\n\t\t\temail: email,\n\t\t};\n\n\t\tif (fieldsAreFilledCorrectly)\n\t\t{\n\t\t\treturn checkedFields;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic openRemoveDialog(config = {\n\t\tid: '',\n\t})\n\t{\n\t\tlet promiseRemoveContact = new BX.Promise();\n\t\tlet removeContact = this.removeContact;\n\t\tconst topSlider = BX.SidePanel.Instance.getTopSlider();\n\t\tlet messageBoxZIndex = 1;\n\n\t\tif (topSlider != null)\n\t\t{\n\t\t\tmessageBoxZIndex += topSlider.getZindex();\n\t\t}\n\n\t\tconst messageBox = new MessageBox({\n\t\t\ttitle: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_TITLE\"),\n\t\t\tmessage: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_MESSAGE\"),\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: messageBoxZIndex,\n\t\t\t},\n\t\t\tonOk: function() {\n\t\t\t\tremoveContact(config['id']).then(() => promiseRemoveContact.fulfill());\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tonCancel: function() {\n\t\t\t\tpromiseRemoveContact.reject();\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\n\t\tmessageBox.show();\n\n\t\treturn promiseRemoveContact;\n\t}\n\n\tstatic removeContact(id)\n\t{\n\t\treturn BX.ajax.runAction('mail.addressbook.removecontacts', {\n\t\t\tdata: {\n\t\t\t\tidSet: [id],\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic saveContact(name, email, id)\n\t{\n\t\tconst data = Avatar.getAvatarData({\n\t\t\tfullName: name,\n\t\t\temail: email,\n\t\t});\n\n\t\tlet contactData = {\n\t\t\tNAME: name,\n\t\t\tEMAIL: email,\n\t\t\tCOLOR: data['color'],\n\t\t\tINITIALS: data['abbreviation'],\n\t\t};\n\n\t\tif (id !== undefined)\n\t\t{\n\t\t\tcontactData['ID'] = id;\n\t\t}\n\n\t\treturn BX.ajax.runAction('mail.addressbook.savecontact', {\n\t\t\tdata: {\n\t\t\t\tcontactData: contactData,\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic showError(id=0)\n\t{\n\t\tthis.emailInputWrapper.classList.add('ui-ctl-danger');\n\t\tBX.show(this.errorTitle[id]);\n\t}\n\n\tstatic hideError(id= 'all')\n\t{\n\t\tthis.emailInputWrapper.classList.remove('ui-ctl-danger');\n\t\tif(id === 'all'){\n\t\t\tthis.errorTitle.forEach(element => {\n\t\t\t\tBX.hide(element)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tBX.hide(this.errorTitle[id]);\n\t}\n\n\tstatic openDialog(titleText, contactConfig = {\n\t\tcontactID: 'new'\n\t})\n\t{\n\t\tconst sliderId = 'dialogEditContact_' + contactConfig['contactID'];\n\n\t\tlet currentEmail = '';\n\t\tlet currentName = '';\n\t\tlet disablingEmailInputClass = '';\n\t\tlet disablingEmailInputAttribute = '';\n\n\t\tif (contactConfig['contactData'] !== undefined)\n\t\t{\n\t\t\tcurrentName = contactConfig['contactData']['name'];\n\t\t\tcurrentEmail = contactConfig['contactData']['email'];\n\t\t\tdisablingEmailInputClass = 'ui-ctl-disabled';\n\t\t\tdisablingEmailInputAttribute = 'disabled';\n\t\t}\n\n\t\tconst emailInput = Tag.render`<input data-role=\"input-field\" type=\"text\" class=\"ui-ctl-element\" value=\"\" placeholder=\"info@example.com\"  ${disablingEmailInputAttribute}>`;\n\t\tconst emailInputWrapper = Tag.render`<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100 ${disablingEmailInputClass}\">\n\t\t\t${emailInput}\n\t\t</div>`;\n\t\temailInput.value = currentEmail;\n\n\t\tconst errorTitleEmailIsIncorrect = Tag.render`<div class=\"ui-alert ui-alert-danger mail-addressbook-error-box\">\n\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_ERROR\")}</span>\n\t\t</div>`;\n\n\t\tconst errorTitleEmailIsAlreadyExists = Tag.render`<div class=\"ui-alert ui-alert-danger mail-addressbook-error-box\">\n\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_ERROR_EMAIL_IS_ALREADY_EXISTS\")}</span>\n\t\t\t<br>\n\t\t</div>`;\n\n\t\tconst openEditSliderBtn = errorTitleEmailIsAlreadyExists.querySelector('[data-role=\"contact-email\"]')\n\n\t\tconst emailItem = Tag.render`<div data-role=\"email-container\" class=\"mail-addressbook-dialogeditcontact-item\">\n\t\t\t<label class=\"mail-addressbook-dialogeditcontact-lable\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_TITLE\")}\n\t\t\t\t<div id=\"mail-addressbook-dialogeditcontact-contact-email-container\" class=\"ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field\">\n\t\t\t\t\t${emailInputWrapper}\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t\t${errorTitleEmailIsIncorrect}\n\t\t\t${errorTitleEmailIsAlreadyExists}\n\t\t</div>`;\n\n\t\tconst nameInput = Tag.render`<input data-role=\"input-field\" type=\"text\" class=\"ui-ctl-element\" value=\"\" placeholder=\"\">`;\n\t\tconst nameInputWrapper = Tag.render`<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t${nameInput}\n\t\t</div>`;\n\t\tnameInput.value = currentName;\n\n\t\tconst nameItem = Tag.render`<div data-role=\"name-container\" class=\"mail-addressbook-dialogeditcontact-item\">\n\t\t\t<label class=\"mail-addressbook-dialogeditcontact-lable\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_NAME_TITLE\")}\n\t\t\t\t<div id=\"mail-addressbook-dialogeditcontact-contact-email-container\" class=\"ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field\">\n\t\t\t\t\t${nameInputWrapper}\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>`;\n\n\t\tlet content = Tag.render`\n\t\t<div>\n\t\t\t${nameItem}\n\t\t\t${emailItem}\n\t\t</div>`;\n\n\t\temailItem.errorTitle = [\n\t\t\terrorTitleEmailIsIncorrect,\n\t\t\terrorTitleEmailIsAlreadyExists\n\t\t];\n\n\t\temailItem.emailInputWrapper = emailInputWrapper;\n\t\temailItem.showError = this.showError;\n\t\temailItem.hideError = this.hideError;\n\t\temailItem.hideError();\n\n\t\temailInput.oninput = () => emailItem.hideError();\n\n\t\tSidePanelWrapper.open({\n\t\t\tid: sliderId,\n\t\t\ttitleText: titleText,\n\t\t\tfooterIsActive: true,\n\t\t\tcontent: content,\n\t\t\tcancelButton: {\n\t\t\t\ttext: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_BUTTON_CANCEL\"),\n\t\t\t},\n\t\t\tconsentButton: {\n\t\t\t\ttext: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_BUTTON_SAVE\"),\n\t\t\t\tfunction: (eventObject) => {\n\t\t\t\t\tconst checkedFields = this.getCheckedFields(content);\n\n\t\t\t\t\tif (checkedFields)\n\t\t\t\t\t{\n\t\t\t\t\t\teventObject.setClocking(true);\n\n\t\t\t\t\t\tthis.saveContact(checkedFields['name'], checkedFields['email'], contactConfig['contactID']).then((response) => {\n\t\t\t\t\t\t\tBX.SidePanel.Instance.postMessageAll(sliderId, 'dialogEditContact::reloadList', {});\n\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t}).catch((response) => {\n\t\t\t\t\t\t\tconst message = response.errors.pop().message.pop();\n\t\t\t\t\t\t\tif(message['ID'])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teventObject.setClocking(false);\n\t\t\t\t\t\t\t\topenEditSliderBtn.onclick = () => {\n\t\t\t\t\t\t\t\t\tthis.openEditDialog({\n\t\t\t\t\t\t\t\t\t\tcontactID: Number(message['ID']),\n\t\t\t\t\t\t\t\t\t\tcontactData: {\n\t\t\t\t\t\t\t\t\t\t\tname: message['NAME'],\n\t\t\t\t\t\t\t\t\t\t\temail: message['EMAIL'],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\temailItem.showError(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.postMessageAll(sliderId, 'dialogEditContact::reloadList', {});\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic openCreateDialog(config)\n\t{\n\t\tthis.openDialog(Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_ADD\"), config);\n\t}\n\n\tstatic openEditDialog(config = {\n\t\tcontactID: '',\n\t\tcontactData: {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t},\n\t})\n\t{\n\t\tthis.openDialog(Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_EDIT\"), config);\n\t}\n}"],"names":["DialogEditContact","contentElement","emailItem","querySelector","emailInput","email","value","nameItem","nameInput","name","fieldsAreFilledCorrectly","checkedFields","Validation","isEmail","showError","length","split","config","id","promiseRemoveContact","BX","Promise","removeContact","topSlider","SidePanel","Instance","getTopSlider","messageBoxZIndex","getZindex","messageBox","MessageBox","title","Loc","getMessage","message","buttons","UI","Dialogs","MessageBoxButtons","OK_CANCEL","popupOptions","zIndex","onOk","then","fulfill","close","onCancel","reject","show","ajax","runAction","data","idSet","Avatar","getAvatarData","fullName","contactData","NAME","EMAIL","COLOR","INITIALS","undefined","emailInputWrapper","classList","add","errorTitle","remove","forEach","element","hide","titleText","contactConfig","contactID","sliderId","currentEmail","currentName","disablingEmailInputClass","disablingEmailInputAttribute","Tag","render","errorTitleEmailIsIncorrect","errorTitleEmailIsAlreadyExists","openEditSliderBtn","nameInputWrapper","content","hideError","oninput","SidePanelWrapper","open","footerIsActive","cancelButton","text","consentButton","eventObject","getCheckedFields","setClocking","saveContact","response","postMessageAll","errors","pop","onclick","openEditDialog","Number","openDialog"],"mappings":"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"}