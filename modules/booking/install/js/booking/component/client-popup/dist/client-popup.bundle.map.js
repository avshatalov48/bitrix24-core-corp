{"version":3,"file":"client-popup.bundle.map.js","names":["this","BX","Booking","exports","booking_component_popup","ui_notificationManager","booking_provider_service_clientService","booking_component_button","main_core_events","main_popup","ui_iconSet_api_vue","ui_iconSet_main","ui_iconSet_actions","ui_iconSet_crm","ui_dropdown","main_core","ui_vue3","booking_const","phone_number","crm_entityEditor_field_phoneNumberInput","InputField","props","name","type","String","required","dataElement","template","getEmptyClient","item","code","phones","validation","checkIfPhone","title","push","module","Module","Crm","emails","clientToItem","client","id","attributes","phone","map","value","email","itemToClient","_item$attributes$phon","_item$attributes","_item$attributes$phon2","_item$attributes$emai","_item$attributes2","_item$attributes2$ema","deepToRawClientModel","clientModel","modelIterator","data","Array","isArray","isRef","isReactive","isProxy","toRaw","Type","isObject","Object","keys","reduce","acc","key","ClientInput","emits","default","isWarning","Boolean","mounted","dropdown","UI","Dropdown","targetElement","$refs","clientInput","searchAction","searchOptions","types","scope","enableCreation","autocompleteDelay","items","clientsItems","messages","creationLegend","events","onSelect","setClient","onAdd","updateValue","onInput","EventEmitter","subscribe","onDropdownContactsLoaded","beforeUnmount","destroyPopupWindow","unsubscribe","computed","clientId","_this$client","CrmEntity","Contact","$store","getters","Model","Clients","it","Company","fieldName","loc","inputPlaceholder","inputLabel","isNew","hasClient","isEditing","_this$client2","clearHint","leftIcon","Set","PERSON","COMPANY","searchIcon","SEARCH_2","arrowsIcon","SWAP","methods","getValue","getPopup","popupWindow","event","results","getData","dispatch","getClient","clear","$emit","isDisabled","popupAlertContainer","watch","setDefaultItems","components","Icon","BIcon","PhoneInput","modelValue","Number","PhoneNumberInput","node","input","flagNode","flag","EmailInput","ClientPopupContent","adjustPosition","Function","currentClient","ButtonSize","ButtonColor","contact","company","isSaving","hasContact","hasCompany","cannotSave","clients","length","filledClients","filter","_client$name","trim","_this$$refs$contactIn","_this$$refs$contactIn2","contactInput","_this$$refs$companyIn","_this$$refs$companyIn2","companyInput","beforeMount","setContact","setCompany","_this$company","previousCompanyId","newCompanyId","linkedContact","clientService","getLinkedContactByCompany","saveClients","error","saveMany","Notifier","notify","text","message","closePopup","getClientsPopup","contactsPopup","companiesPopup","isShown","$nextTick","Button","ClientPopup","bindElement","HTMLElement","offsetTop","offsetLeft","popupId","config","_this$offsetLeft","_this$offsetTop","width","offsetWidth","offsetHeight","autoHideHandler","target","_content$getClientsPo","_content$getClientsPo2","content","isClickInside","popup","contains","isDropdownClick","getPopupContainer","isFillingTheContact","onAdjustPosition","_this$$refs$content$g","StickyPopup","Component","NotificationManager","Provider","Service","Event","Main","IconSet","Vue3","Const"],"sources":["client-popup.bundle.js"],"mappings":"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","ignoreList":[]}