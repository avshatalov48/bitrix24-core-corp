{"version":3,"file":"promo-banner.bundle.js","sources":["../src/promo-banner.js"],"sourcesContent":["import { mapGetters } from 'ui.vue3.vuex';\nimport { Model } from 'booking.const';\nimport type { PopupOptions } from 'main.popup';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\nimport { mainPageService } from 'booking.provider.service.main-page-service';\nimport { Popup } from 'booking.component.popup';\nimport { Button, ButtonColor, ButtonSize } from 'booking.component.button';\nimport './promo-banner.css';\n\nexport const PromoBanner = {\n\temits: ['setShown', 'close'],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tbtnClocking: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tcanTurnOnDemo: `${Model.Interface}/canTurnOnDemo`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'booking-promo-banner-popup';\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\twidth: 760,\n\t\t\t\tpadding: 0,\n\t\t\t\tautoHide: false,\n\t\t\t\toverlay: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tborderRadius: 'var(--ui-border-radius-3xl)',\n\t\t\t};\n\t\t},\n\t\tvideoSrc(): string\n\t\t{\n\t\t\treturn '/bitrix/js/booking/component/promo-banner/videos/booking.webm';\n\t\t},\n\t\tlistItems(): string[]\n\t\t{\n\t\t\treturn [\n\t\t\t\tthis.loc('BOOKING_PROMO_BANNER_ITEM_1'),\n\t\t\t\tthis.loc('BOOKING_PROMO_BANNER_ITEM_2'),\n\t\t\t\tthis.loc('BOOKING_PROMO_BANNER_ITEM_3'),\n\t\t\t\tthis.loc('BOOKING_PROMO_BANNER_ITEM_4'),\n\t\t\t\tthis.loc('BOOKING_PROMO_BANNER_ITEM_5'),\n\t\t\t];\n\t\t},\n\t\tstartBtnText(): string\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.canTurnOnDemo\n\t\t\t\t\t? this.loc('BOOKING_PROMO_BANNER_BUTTON_START_DEMO').replace('#days#', 15)\n\t\t\t\t\t: this.loc('BOOKING_PROMO_BANNER_BUTTON_START')\n\t\t\t);\n\t\t},\n\t\tbuttonClickHandler(): Function\n\t\t{\n\t\t\treturn this.canTurnOnDemo ? this.activateDemo : this.close;\n\t\t},\n\t\ticonClickHandler(): Function\n\t\t{\n\t\t\treturn this.canTurnOnDemo ? this.closeDemo : this.close;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync activateDemo(): void\n\t\t{\n\t\t\tthis.btnClocking = true;\n\n\t\t\tawait mainPageService.activateDemo();\n\n\t\t\tthis.$emit('setShown');\n\n\t\t\t// waiting notification about new demo\n\t\t\tsetTimeout(() => {\n\t\t\t\twindow.location.reload();\n\t\t\t}, 4000);\n\t\t},\n\t\tasync closeDemo(): void\n\t\t{\n\t\t\twindow.location.href = '/';\n\t\t},\n\t\tasync close(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t\tButton,\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"close\"\n\t\t>\n\t\t\t<div class=\"booking-promo-banner-popup\">\n\t\t\t\t<div class=\"booking-promo-banner-popup-title\">\n\t\t\t\t\t{{ loc('BOOKING_PROMO_BANNER_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-promo-banner-popup-body\">\n\t\t\t\t\t<div class=\"booking-promo-banner-popup-info\">\n\t\t\t\t\t\t<div class=\"booking-promo-banner-popup-subtitle\">\n\t\t\t\t\t\t\t{{ loc('BOOKING_PROMO_BANNER_SUBTITLE') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-for=\"(item, index) of listItems\" :key=\"index\">\n\t\t\t\t\t\t\t<div class=\"booking-promo-banner-popup-item\">\n\t\t\t\t\t\t\t\t<Icon :name=\"IconSet.CIRCLE_CHECK\"/>\n\t\t\t\t\t\t\t\t<span>{{ item }}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-promo-banner-popup-video-container\">\n\t\t\t\t\t\t<video\n\t\t\t\t\t\t\tclass=\"booking-promo-banner-popup-video\"\n\t\t\t\t\t\t\t:src=\"videoSrc\"\n\t\t\t\t\t\t\tmuted\n\t\t\t\t\t\t\tautoplay\n\t\t\t\t\t\t\tloop\n\t\t\t\t\t\t\tpreload\n\t\t\t\t\t\t></video>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<Button\n\t\t\t\t\t:class=\"{'booking-promo-banner-popup-button': !btnClocking}\"\n\t\t\t\t\t:text=\"startBtnText\"\n\t\t\t\t\t:size=\"ButtonSize.MEDIUM\"\n\t\t\t\t\t:color=\"ButtonColor.SUCCESS\"\n\t\t\t\t\t:clocking=\"btnClocking\"\n\t\t\t\t\t@click=\"buttonClickHandler\"\n\t\t\t\t/>\n\t\t\t\t<Icon\n\t\t\t\t\tclass=\"booking-promo-banner-popup-cross\"\n\t\t\t\t\t:name=\"IconSet.CROSS_40\"\n\t\t\t\t\t@click=\"iconClickHandler\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n"],"names":["PromoBanner","emits","data","IconSet","ButtonSize","ButtonColor","btnClocking","computed","mapGetters","canTurnOnDemo","Model","Interface","popupId","config","width","padding","autoHide","overlay","animation","borderRadius","videoSrc","listItems","loc","startBtnText","replace","buttonClickHandler","activateDemo","close","iconClickHandler","closeDemo","methods","mainPageService","$emit","setTimeout","window","location","reload","href","components","Popup","Button","Icon","template"],"mappings":";;;;;;OAWaA,WAAW,GAAG;GAC1BC,KAAK,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC;GAC5BC,IAAI,GACJ;KACC,OAAO;gBACNC,sBAAO;mBACPC,mCAAU;oBACVC,oCAAW;OACXC,WAAW,EAAE;MACb;IACD;GACDC,QAAQ,EAAE;KACT,GAAGC,uBAAU,CAAC;OACbC,aAAa,EAAG,GAAEC,mBAAK,CAACC,SAAU;MAClC,CAAC;KACFC,OAAO,GACP;OACC,OAAO,4BAA4B;MACnC;KACDC,MAAM,GACN;OACC,OAAO;SACNC,KAAK,EAAE,GAAG;SACVC,OAAO,EAAE,CAAC;SACVC,QAAQ,EAAE,KAAK;SACfC,OAAO,EAAE,IAAI;SACbC,SAAS,EAAE,cAAc;SACzBC,YAAY,EAAE;QACd;MACD;KACDC,QAAQ,GACR;OACC,OAAO,+DAA+D;MACtE;KACDC,SAAS,GACT;OACC,OAAO,CACN,IAAI,CAACC,GAAG,CAAC,6BAA6B,CAAC,EACvC,IAAI,CAACA,GAAG,CAAC,6BAA6B,CAAC,EACvC,IAAI,CAACA,GAAG,CAAC,6BAA6B,CAAC,EACvC,IAAI,CAACA,GAAG,CAAC,6BAA6B,CAAC,EACvC,IAAI,CAACA,GAAG,CAAC,6BAA6B,CAAC,CACvC;MACD;KACDC,YAAY,GACZ;OACC,OACC,IAAI,CAACd,aAAa,GACf,IAAI,CAACa,GAAG,CAAC,wCAAwC,CAAC,CAACE,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,GACxE,IAAI,CAACF,GAAG,CAAC,mCAAmC,CAAC;MAEjD;KACDG,kBAAkB,GAClB;OACC,OAAO,IAAI,CAAChB,aAAa,GAAG,IAAI,CAACiB,YAAY,GAAG,IAAI,CAACC,KAAK;MAC1D;KACDC,gBAAgB,GAChB;OACC,OAAO,IAAI,CAACnB,aAAa,GAAG,IAAI,CAACoB,SAAS,GAAG,IAAI,CAACF,KAAK;;IAExD;GACDG,OAAO,EAAE;KACR,MAAMJ,YAAY,GAClB;OACC,IAAI,CAACpB,WAAW,GAAG,IAAI;OAEvB,MAAMyB,wDAAe,CAACL,YAAY,EAAE;OAEpC,IAAI,CAACM,KAAK,CAAC,UAAU,CAAC;;;OAGtBC,UAAU,CAAC,MAAM;SAChBC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;QACxB,EAAE,IAAI,CAAC;MACR;KACD,MAAMP,SAAS,GACf;OACCK,MAAM,CAACC,QAAQ,CAACE,IAAI,GAAG,GAAG;MAC1B;KACD,MAAMV,KAAK,GACX;OACC,IAAI,CAACK,KAAK,CAAC,OAAO,CAAC;;IAEpB;GACDM,UAAU,EAAE;YACXC,6BAAK;aACLC,+BAAM;WACNC;IACA;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAiDZ,CAAC;;;;;;;;"}