{"version":3,"file":"favorites-service.bundle.js","sources":["../src/favorites-service.js"],"sourcesContent":["import { Model } from 'booking.const';\nimport { Type } from 'main.core';\nimport { Core } from 'booking.core';\nimport { ApiClient } from 'booking.lib.api-client';\n\nclass FavoritesService\n{\n\tasync set(favoritesIds: number[]): Promise<void>\n\t{\n\t\tconst currentIds = Core.getStore().getters['favorites/get'];\n\t\tconst favoritesAdded = favoritesIds.filter((it) => !currentIds.includes(it));\n\t\tconst favoritesDeleted = currentIds.filter((it) => !favoritesIds.includes(it));\n\n\t\tvoid Core.getStore().dispatch(`${Model.Favorites}/set`, favoritesIds);\n\n\t\tif (Type.isArrayFilled(favoritesAdded))\n\t\t{\n\t\t\tawait favoritesService.add(favoritesAdded);\n\t\t}\n\n\t\tif (Type.isArrayFilled(favoritesDeleted))\n\t\t{\n\t\t\tawait favoritesService.delete(favoritesDeleted);\n\t\t}\n\t}\n\n\tasync add(favoritesIds: number[]): Promise<void>\n\t{\n\t\tif (!Type.isArrayFilled(favoritesIds))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tawait (new ApiClient()).post('Favorites.add', { resourcesIds: favoritesIds });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('FavoritesService: add error', error);\n\t\t}\n\t}\n\n\tasync delete(favoritesIds: number[]): Promise<void>\n\t{\n\t\tif (!Type.isArrayFilled(favoritesIds))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\tawait (new ApiClient()).post('Favorites.delete', { resourcesIds: favoritesIds });\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('FavoritesService: delete error', error);\n\t\t}\n\t}\n}\n\nexport const favoritesService = new FavoritesService();\n"],"names":["FavoritesService","set","favoritesIds","currentIds","Core","getStore","getters","favoritesAdded","filter","it","includes","favoritesDeleted","dispatch","Model","Favorites","Type","isArrayFilled","favoritesService","add","delete","ApiClient","post","resourcesIds","error","console"],"mappings":";;;;;;;CAKA,MAAMA,gBAAgB,CACtB;GACC,MAAMC,GAAG,CAACC,YAAsB,EAChC;KACC,MAAMC,UAAU,GAAGC,iBAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,eAAe,CAAC;KAC3D,MAAMC,cAAc,GAAGL,YAAY,CAACM,MAAM,CAAEC,EAAE,IAAK,CAACN,UAAU,CAACO,QAAQ,CAACD,EAAE,CAAC,CAAC;KAC5E,MAAME,gBAAgB,GAAGR,UAAU,CAACK,MAAM,CAAEC,EAAE,IAAK,CAACP,YAAY,CAACQ,QAAQ,CAACD,EAAE,CAAC,CAAC;KAE9E,KAAKL,iBAAI,CAACC,QAAQ,EAAE,CAACO,QAAQ,CAAE,GAAEC,mBAAK,CAACC,SAAU,MAAK,EAAEZ,YAAY,CAAC;KAErE,IAAIa,cAAI,CAACC,aAAa,CAACT,cAAc,CAAC,EACtC;OACC,MAAMU,gBAAgB,CAACC,GAAG,CAACX,cAAc,CAAC;;KAG3C,IAAIQ,cAAI,CAACC,aAAa,CAACL,gBAAgB,CAAC,EACxC;OACC,MAAMM,gBAAgB,CAACE,MAAM,CAACR,gBAAgB,CAAC;;;GAIjD,MAAMO,GAAG,CAAChB,YAAsB,EAChC;KACC,IAAI,CAACa,cAAI,CAACC,aAAa,CAACd,YAAY,CAAC,EACrC;OACC;;KAGD,IACA;OACC,MAAO,IAAIkB,+BAAS,EAAE,CAAEC,IAAI,CAAC,eAAe,EAAE;SAAEC,YAAY,EAAEpB;QAAc,CAAC;MAC7E,CACD,OAAOqB,KAAK,EACZ;OACCC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;;;GAIrD,MAAMJ,MAAM,CAACjB,YAAsB,EACnC;KACC,IAAI,CAACa,cAAI,CAACC,aAAa,CAACd,YAAY,CAAC,EACrC;OACC;;KAGD,IACA;OACC,MAAO,IAAIkB,+BAAS,EAAE,CAAEC,IAAI,CAAC,kBAAkB,EAAE;SAAEC,YAAY,EAAEpB;QAAc,CAAC;MAChF,CACD,OAAOqB,KAAK,EACZ;OACCC,OAAO,CAACD,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;;;CAGzD;AAEA,OAAaN,gBAAgB,GAAG,IAAIjB,gBAAgB,EAAE;;;;;;;;"}