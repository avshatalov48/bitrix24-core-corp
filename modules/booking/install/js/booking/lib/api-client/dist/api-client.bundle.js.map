{"version":3,"file":"api-client.bundle.js","sources":["../src/api-client.js"],"sourcesContent":["import { ajax } from 'main.core';\n\nexport class ApiClient\n{\n\tconstructor(baseUrl = 'booking.api_v1.')\n\t{\n\t\tthis.baseUrl = baseUrl;\n\t}\n\n\tasync get(endpoint, params = {}): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tjson: { method: 'GET', ...params },\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync post(endpoint, data): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tjson: data,\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync put(endpoint, data): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tjson: data,\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tasync delete(endpoint, params = {}): Promise<any>\n\t{\n\t\tconst url = this.buildUrl(endpoint, params);\n\t\tconst response = await ajax.runAction(url, {\n\t\t\tmethod: 'DELETE',\n\t\t});\n\n\t\treturn this.handleResponse(response);\n\t}\n\n\tbuildUrl(endpoint, params = {}): string\n\t{\n\t\tlet url = `${this.baseUrl}${endpoint}`;\n\t\tif (Object.keys(params).length > 0)\n\t\t{\n\t\t\turl += `?${new URLSearchParams(params).toString()}`;\n\t\t}\n\n\t\treturn url;\n\t}\n\n\tasync handleResponse(response): Promise<any>\n\t{\n\t\tconst { data, error } = response;\n\t\tif (error)\n\t\t{\n\t\t\tthrow error;\n\t\t}\n\n\t\treturn data;\n\t}\n}\n"],"names":["ApiClient","constructor","baseUrl","get","endpoint","params","url","buildUrl","response","ajax","runAction","json","method","handleResponse","post","data","put","headers","delete","Object","keys","length","URLSearchParams","toString","error"],"mappings":";;;;;;CAEO,MAAMA,SAAS,CACtB;GACCC,WAAW,CAACC,OAAO,GAAG,iBAAiB,EACvC;KACC,IAAI,CAACA,OAAO,GAAGA,OAAO;;GAGvB,MAAMC,GAAG,CAACC,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAC/B;KACC,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CK,IAAI,EAAE;SAAEC,MAAM,EAAE,KAAK;SAAE,GAAGP;;MAC1B,CAAC;KAEF,OAAO,IAAI,CAACQ,cAAc,CAACL,QAAQ,CAAC;;GAGrC,MAAMM,IAAI,CAACV,QAAQ,EAAEW,IAAI,EACzB;KACC,MAAMT,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CK,IAAI,EAAEI;MACN,CAAC;KAEF,OAAO,IAAI,CAACF,cAAc,CAACL,QAAQ,CAAC;;GAGrC,MAAMQ,GAAG,CAACZ,QAAQ,EAAEW,IAAI,EACxB;KACC,MAAMT,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,CAAC;KACnC,MAAMI,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CM,MAAM,EAAE,KAAK;OACbK,OAAO,EAAE;SACR,cAAc,EAAE;QAChB;OACDN,IAAI,EAAEI;MACN,CAAC;KAEF,OAAO,IAAI,CAACF,cAAc,CAACL,QAAQ,CAAC;;GAGrC,MAAMU,MAAM,CAACd,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAClC;KACC,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACH,QAAQ,EAAEC,MAAM,CAAC;KAC3C,MAAMG,QAAQ,GAAG,MAAMC,cAAI,CAACC,SAAS,CAACJ,GAAG,EAAE;OAC1CM,MAAM,EAAE;MACR,CAAC;KAEF,OAAO,IAAI,CAACC,cAAc,CAACL,QAAQ,CAAC;;GAGrCD,QAAQ,CAACH,QAAQ,EAAEC,MAAM,GAAG,EAAE,EAC9B;KACC,IAAIC,GAAG,GAAI,GAAE,IAAI,CAACJ,OAAQ,GAAEE,QAAS,EAAC;KACtC,IAAIe,MAAM,CAACC,IAAI,CAACf,MAAM,CAAC,CAACgB,MAAM,GAAG,CAAC,EAClC;OACCf,GAAG,IAAK,IAAG,IAAIgB,eAAe,CAACjB,MAAM,CAAC,CAACkB,QAAQ,EAAG,EAAC;;KAGpD,OAAOjB,GAAG;;GAGX,MAAMO,cAAc,CAACL,QAAQ,EAC7B;KACC,MAAM;OAAEO,IAAI;OAAES;MAAO,GAAGhB,QAAQ;KAChC,IAAIgB,KAAK,EACT;OACC,MAAMA,KAAK;;KAGZ,OAAOT,IAAI;;CAEb;;;;;;;;"}