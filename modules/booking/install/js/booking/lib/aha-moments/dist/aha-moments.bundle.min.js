this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(e,o,t,s,a,r,i,n,l,c){"use strict";var d=babelHelpers.classPrivateFieldLooseKey("bookingForAhaMoment");var h=babelHelpers.classPrivateFieldLooseKey("shownPopups");var u=babelHelpers.classPrivateFieldLooseKey("shouldShowBanner");var p=babelHelpers.classPrivateFieldLooseKey("shouldShowAddResource");var b=babelHelpers.classPrivateFieldLooseKey("shouldShowAddClient");var v=babelHelpers.classPrivateFieldLooseKey("shouldShowResourceIntersection");var P=babelHelpers.classPrivateFieldLooseKey("shouldShowExpandGrid");var B=babelHelpers.classPrivateFieldLooseKey("shouldShowSelectResources");var A=babelHelpers.classPrivateFieldLooseKey("wasNotShown");var m=babelHelpers.classPrivateFieldLooseKey("getOptionName");class M{constructor(){Object.defineProperty(this,m,{value:S});Object.defineProperty(this,A,{value:w});Object.defineProperty(this,B,{value:y});Object.defineProperty(this,P,{value:H});Object.defineProperty(this,v,{value:f});Object.defineProperty(this,b,{value:F});Object.defineProperty(this,p,{value:L});Object.defineProperty(this,u,{value:g});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,h,{writable:true,value:{}})}show(e){if(!r.AutoLauncher.isEnabled()){r.AutoLauncher.enable()}return new Promise((o=>{i.BannerDispatcher.critical.toQueue((async t=>{await this.showGuide(e);t();o()}))}))}showGuide(e){const t=new a.Guide({id:e.id,overlay:false,simpleMode:true,onEvents:true,steps:[{target:e.target,title:e.title,text:e.text,position:e.top?"top":"bottom",condition:{top:!e.top,bottom:Boolean(e.top),color:"primary"},article:e.article.code,articleAnchor:e.article.anchorCode}],targetContainer:e.targetContainer});const s=new BX.SpotLight({targetElement:e.target,targetVertex:"middle-center",color:"var(--ui-color-primary)"});return new Promise((a=>{const r=t.getPopup();r.setAutoHide(true);r.setAngle({offset:e.target.offsetWidth/2});const i=()=>{r.adjustPosition()};const n=()=>{s.close();o.Event.unbind(document,"scroll",i,true);a()};r.subscribe("onClose",n);r.subscribe("onDestroy",n);s.show();t.start();r.adjustPosition({forceTop:!e.top,forceBindPosition:true});o.Event.bind(document,"scroll",i,true)}))}shouldShow(e,o={}){return{[l.AhaMoment.Banner]:babelHelpers.classPrivateFieldLooseBase(this,u)[u](e),[l.AhaMoment.TrialBanner]:babelHelpers.classPrivateFieldLooseBase(this,A)[A](e),[l.AhaMoment.AddResource]:babelHelpers.classPrivateFieldLooseBase(this,p)[p](),[l.AhaMoment.MessageTemplate]:babelHelpers.classPrivateFieldLooseBase(this,A)[A](e),[l.AhaMoment.AddClient]:babelHelpers.classPrivateFieldLooseBase(this,b)[b](o),[l.AhaMoment.ResourceWorkload]:babelHelpers.classPrivateFieldLooseBase(this,A)[A](e),[l.AhaMoment.ResourceIntersection]:babelHelpers.classPrivateFieldLooseBase(this,v)[v](),[l.AhaMoment.ExpandGrid]:babelHelpers.classPrivateFieldLooseBase(this,P)[P](),[l.AhaMoment.SelectResources]:babelHelpers.classPrivateFieldLooseBase(this,B)[B]()}[e]}setShown(e){const o=babelHelpers.classPrivateFieldLooseBase(this,m)[m](e);this.setPopupShown(e);void c.optionService.setBool(o,true)}setPopupShown(e){babelHelpers.classPrivateFieldLooseBase(this,h)[h][e]=true}setBookingForAhaMoment(e){var o,t;(t=(o=babelHelpers.classPrivateFieldLooseBase(this,d))[d])!=null?t:o[d]=e}}function g(e){const o=n.Core.getStore().getters[`${l.Model.Interface}/canTurnOnDemo`];if(o){return true}else{return babelHelpers.classPrivateFieldLooseBase(this,A)[A](e)}}function L(){const e=babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.AddResource);const o=n.Core.getStore().getters[`${l.Model.Interface}/isLoaded`];const t=n.Core.getStore().getters[`${l.Model.Interface}/resourcesIds`];return e&&o&&t.length===0}function F(e){const o=babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.AddClient);const t=babelHelpers.classPrivateFieldLooseBase(this,d)[d]===e.bookingId;return o&&t}function f(){const e=babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.ResourceIntersection);const o=n.Core.getStore().getters[`${l.Model.Interface}/isLoaded`];const s=n.Core.getStore().getters[`${l.Model.Interface}/resourcesIds`];return e&&o&&s.length>=2&&!t.PopupManager.isAnyPopupShown()}function H(){const e=babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.ExpandGrid);const o=[l.AhaMoment.ResourceWorkload,l.AhaMoment.ResourceWorkload].every((e=>!babelHelpers.classPrivateFieldLooseBase(this,A)[A](e)));return e&&o&&!t.PopupManager.isAnyPopupShown()}function y(){const e=babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.SelectResources);const o=!babelHelpers.classPrivateFieldLooseBase(this,A)[A](l.AhaMoment.ExpandGrid);return e&&o&&!t.PopupManager.isAnyPopupShown()}function w(e){const{ahaMoments:o}=n.Core.getParams();return o[e]&&!babelHelpers.classPrivateFieldLooseBase(this,h)[h][e]}function S(e){return{[l.AhaMoment.Banner]:l.Option.AhaBanner,[l.AhaMoment.TrialBanner]:l.Option.AhaTrialBanner,[l.AhaMoment.AddResource]:l.Option.AhaAddResource,[l.AhaMoment.MessageTemplate]:l.Option.AhaMessageTemplate,[l.AhaMoment.AddClient]:l.Option.AhaAddClient,[l.AhaMoment.ResourceWorkload]:l.Option.AhaResourceWorkload,[l.AhaMoment.ResourceIntersection]:l.Option.AhaResourceIntersection,[l.AhaMoment.ExpandGrid]:l.Option.AhaExpandGrid,[l.AhaMoment.SelectResources]:l.Option.AhaSelectResources}[e]}const O=new M;e.ahaMoments=O})(this.BX.Booking.Lib=this.BX.Booking.Lib||{},BX,BX.Main,BX,BX.UI.Tour,BX.UI.AutoLaunch,BX.UI,BX.Booking,BX.Booking.Const,BX.Booking.Provider.Service);
//# sourceMappingURL=aha-moments.bundle.map.js