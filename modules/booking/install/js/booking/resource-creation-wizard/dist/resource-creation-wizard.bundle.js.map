{"version":3,"file":"resource-creation-wizard.bundle.js","sources":["../src/components/layout/ui-loader.js","../src/components/layout/layout.js","../src/components/header/header.js","../src/components/footer/next-button.js","../src/components/footer/back-button.js","../src/presenter/step.js","../src/presenter/choose-resource-step.js","../src/presenter/resource-notification-step.js","../src/presenter/resource-settings-step.js","../src/components/footer/footer.js","../src/components/resource-category-card/resource-type/resource-type.js","../src/components/resource-category-card/resource-category-card.js","../src/components/resource-settings-card/error-message/error-message.js","../src/components/resource-settings-card/base-fields/base-fields.js","../src/components/resource-settings-card/title-layout/title-layout.js","../src/components/resource-settings-card/schedule-types/components/schedule-item.js","../src/components/resource-settings-card/schedule-types/schedule-types.js","../src/components/resource-settings-card/text-layout/text-layout.js","../src/components/resource-settings-card/work-time/work-time-mixin.js","../src/components/resource-settings-card/work-time/week-days-popup.js","../src/components/resource-settings-card/work-time/work-time-slot-range.js","../src/components/resource-settings-card/work-time/work-time-selector.js","../src/components/resource-settings-card/work-time/work-time.js","../src/components/resource-settings-card/slot-length/slot-length-precision-selection.js","../src/components/resource-settings-card/slot-length/slot-length-selector.js","../src/components/resource-settings-card/slot-length/slot-length.js","../src/components/resource-settings-card/resource-settings-card.js","../src/components/resource-notification-card/channel-menu/channel-menu.js","../src/components/resource-notification-card/choose-template-popup/choose-template-popup.js","../src/components/resource-notification-card/label/label.js","../src/components/resource-notification-card/notification-card-mixin.js","../src/components/resource-notification-card/layout/resource-notification.js","../src/components/resource-notification-card/layout/resource-notification-text-row.js","../src/components/resource-notification-card/layout/resource-notification-checkbox-row.js","../src/components/resource-notification-card/template-empty/template-empty.js","../src/components/resource-notification-card/base-info/base-info.js","../src/components/resource-notification-card/confirmation/confirmation.js","../src/components/resource-notification-card/reminder/reminder.js","../src/components/resource-notification-card/feedback/feedback.js","../src/components/resource-notification-card/late/late.js","../src/components/resource-notification-card/resource-notification-card.js","../src/components/app.js","../src/resource-creation-wizard.js"],"sourcesContent":["import { Loader } from 'main.loader';\n\nexport const UiLoader = {\n\tname: 'UiLoader',\n\tprops: {\n\t\tshow: Boolean,\n\t},\n\tdata(): { loader: Loader }\n\t{\n\t\treturn {\n\t\t\tloader: new Loader(),\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tvoid this.loader.show(this.$refs.loader);\n\t},\n\ttemplate: `\n\t\t<div ref=\"loader\"></div>\n\t`,\n};\n","import { UiLoader } from './ui-loader';\nimport './resource-creation-wizard-layout.css';\n\nexport const ResourceCreationWizardLayout = {\n\tname: 'ResourceCreationWizardLayout',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tloading: Boolean,\n\t},\n\twatch: {\n\t\tstep(): void\n\t\t{\n\t\t\tthis.$refs.wrapper?.scrollTo(0, 0);\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard-layout\">\n\t\t\t<div ref=\"wrapper\" class=\"resource-creation-wizard__wrapper\">\n\t\t\t\t<div class=\"resource-creation-wizard__header\">\n\t\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t\t<h4 class=\"resource-creation-wizard__header-title\">\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!loading\" class=\"resource-creation-wizard__content\">\n\t\t\t\t\t<slot/>\n\t\t\t\t</div>\n\t\t\t\t<UiLoader v-if=\"loading\"/>\n\t\t\t</div>\n\t\t\t<slot name=\"footer\"/>\n\t\t</div>\n\t`,\n};\n","export const ResourceCreationWizardHeader = {\n\tname: 'ResourceCreationWizardHeader',\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$store.state['resource-creation-wizard'].resourceName;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"resource-creation-wizard__header-title\">\n\t\t\t{{ title }}\n\t\t</span>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const NextButton = {\n\tname: 'NextButton',\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t\twaiting: Boolean,\n\t},\n\tcomputed: {\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t\tsize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\treturn ButtonColor.SUCCESS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\t:text=\"currentStep.labelNext\"\n\t\t\t:title=\"currentStep.labelNext\"\n\t\t\t:size\n\t\t\t:color\n\t\t\t:disabled\n\t\t\t:waiting\n\t\t\t@click=\"currentStep.next()\"\n\t\t/>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const BackButton = {\n\tname: 'BackButton',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonSize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tbuttonColor(): string\n\t\t{\n\t\t\treturn ButtonColor.LINK;\n\t\t},\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\tclass=\"resource-creation-wizard__back-button\"\n\t\t\t:text=\"currentStep.labelBack\"\n\t\t\t:title=\"currentStep.labelBack\"\n\t\t\t:size=\"buttonSize\"\n\t\t\t:color=\"buttonColor\"\n\t\t\t@click=\"currentStep.back()\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Core } from 'booking.core';\nimport type { IStep } from './types';\n\n/**\n * @abstract\n */\nexport class Step implements IStep\n{\n\thidden = false;\n\n\tconstructor(hidden = false)\n\t{\n\t\tthis.hidden = hidden;\n\t}\n\n\tget store(): Store | null | undefined\n\t{\n\t\treturn this.getStore();\n\t}\n\n\t/**\n\t * @protected\n\t */\n\tgetStore(): Store | null\n\t{\n\t\treturn Core.getStore();\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CONTINUE');\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next()\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/nextStep');\n\t}\n\n\tasync back()\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/prevStep');\n\t}\n}\n","import { Event, Loc } from 'main.core';\nimport { EventName } from 'booking.const';\nimport { Step } from './step';\n\nexport class ChooseResourceStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper(true);\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tnext(): Promise<void>\n\t{\n\t\treturn super.next();\n\t}\n\n\tback()\n\t{\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n}\n","import { Event, Loc, Text, Type } from 'main.core';\nimport { Notifier, NotificationOptions } from 'ui.notification-manager';\nimport { EventName, Model, Module } from 'booking.const';\nimport { resourceService } from 'booking.provider.service.resources-service';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport type { SlotRange } from 'booking.model.resources';\nimport type { ResourceModel } from 'booking.model.resource-creation-wizard';\nimport { Step } from './step';\nimport { ConditionChecker, Types as SenderTypes } from 'crm.messagesender';\n\nexport class ResourceNotificationStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.step = 3;\n\t}\n\n\tget labelNext(): string\n\t{\n\t\tconst resourceId = this.store.getters[`${Model.ResourceCreationWizard}/getResource`]?.id || null;\n\n\t\treturn Type.isNull(resourceId)\n\t\t\t? Loc.getMessage('BRCW_BUTTON_CREATE_RESOURCE')\n\t\t\t: Loc.getMessage('BRCW_BUTTON_UPDATE_RESOURCE');\n\t}\n\n\tasync #upsertResource(resource: ResourceModel): Promise<boolean>\n\t{\n\t\tconst isUpdate = Boolean(resource.id);\n\t\tconst result = await (isUpdate ? resourceService.update(resource) : resourceService.add(resource));\n\n\t\tlet text = Loc.getMessage(isUpdate ? 'BRCW_UPDATE_SUCCESS_MESSAGE' : 'BRCW_CREATE_SUCCESS_MESSAGE');\n\t\tif (Type.isArrayFilled(result.errors))\n\t\t{\n\t\t\ttext = result.errors[0].message;\n\t\t}\n\n\t\tNotifier.notify(this.#prepareNotificationOptions(text));\n\n\t\treturn !Type.isArrayFilled(result.errors);\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, true);\n\n\t\tconst isApproved = await this.isBitrix24Approved();\n\t\tif (!isApproved)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.store.getters[`${Model.ResourceCreationWizard}/isGlobalSchedule`])\n\t\t{\n\t\t\tconst slotSize = this.store.state[Model.ResourceCreationWizard].resource.slotRanges[0]?.slotSize ?? 60;\n\t\t\tconst scheduleSlots = this.store.getters[`${Model.ResourceCreationWizard}/getCompanyScheduleSlots`];\n\t\t\tconst timezone = this.store.getters[`${Model.Interface}/timezone`];\n\t\t\tconst slotRanges = scheduleSlots.map((slotRange: SlotRange) => ({\n\t\t\t\t...slotRange,\n\t\t\t\tslotSize,\n\t\t\t\ttimezone,\n\t\t\t}));\n\n\t\t\tawait this.store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { slotRanges });\n\t\t}\n\n\t\tconst resource = this.store.state[Model.ResourceCreationWizard].resource;\n\t\tconst resourceType = this.store.getters[`${Model.ResourceTypes}/getById`](resource.typeId);\n\n\t\tconst isSuccess = await this.#upsertResource(resource);\n\t\tif (!isSuccess)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait resourceTypeService.update(resourceType);\n\t\tthis.store.commit(`${Model.ResourceCreationWizard}/init`, { step: 1, resourceId: null, resource: null });\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n\n\tasync isBitrix24Approved(): Promise<boolean>\n\t{\n\t\tif (!this.#isBitrix24SenderAvailable())\n\t\t{\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn ConditionChecker.checkIsApproved({\n\t\t\tsenderType: SenderTypes.bitrix24,\n\t\t});\n\t}\n\n\t#isBitrix24SenderAvailable(): boolean\n\t{\n\t\tconst bitrix24Sender = this.store.getters[`${Model.Notifications}/getSenders`]\n\t\t\t.find((sender) => sender.moduleId === Module.Crm && sender.code === SenderTypes.bitrix24)\n\t\t;\n\n\t\tif (!bitrix24Sender)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn bitrix24Sender.canUse;\n\t}\n\n\tback(): Promise<void>\n\t{\n\t\treturn super.back();\n\t}\n\n\t#prepareNotificationOptions(text: string): NotificationOptions\n\t{\n\t\treturn {\n\t\t\tid: Text.getRandom(),\n\t\t\ttext,\n\t\t};\n\t}\n}\n","import { Event, Loc, Type } from 'main.core';\nimport { EventName, Model } from 'booking.const';\nimport { Step } from './step';\n\nexport class ResourceSettingsStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.step = 2;\n\t}\n\n\tget #isFirstStep(): boolean\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/startStep`] === this.step;\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn this.#isFirstStep ? super.labelBack : Loc.getMessage('BRCW_BUTTON_BACK');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tconst store = this.getStore();\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.name)\n\t\t{\n\t\t\tif (!Type.isNull(store.state[Model.ResourceCreationWizard].resourceId))\n\t\t\t{\n\t\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceName`, true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tname: Loc.getMessage('BRCW_DEFAULT_RESOURCE_NAME'),\n\t\t\t});\n\t\t}\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.typeId)\n\t\t{\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceType`, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn super.next();\n\t}\n\n\tasync back()\n\t{\n\t\tif (this.#isFirstStep)\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tawait super.back();\n\t\t}\n\t}\n}\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Model } from 'booking.const';\nimport { NextButton } from './next-button';\nimport { BackButton } from './back-button';\nimport { ChooseResourceStep, ResourceNotificationStep, ResourceSettingsStep } from '../../presenter';\nimport './footer.css';\n\nexport const ResourceCreationWizardFooter = {\n\tname: 'ResourceCreationWizardFooter',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tsteps: [\n\t\t\t\tnew ChooseResourceStep(),\n\t\t\t\tnew ResourceSettingsStep(),\n\t\t\t\tnew ResourceNotificationStep(),\n\t\t\t],\n\t\t};\n\t},\n\tcomputed: mapGetters({\n\t\tisSaving: `${Model.ResourceCreationWizard}/isSaving`,\n\t}),\n\tcomponents: {\n\t\tBackButton,\n\t\tNextButton,\n\t},\n\ttemplate: `\n\t\t<div v-if=\"!steps[step - 1].hidden\" class=\"resource-creation-wizard__footer\">\n\t\t\t<NextButton :step :steps :disabled :waiting=\"isSaving\"/>\n\t\t\t<BackButton :step :steps :disabled=\"isSaving\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.actions';\n\nimport './resource-type.css';\n\nexport const ResourceType = {\n\tname: 'ResourceType',\n\temits: ['selected'],\n\tprops: {\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--resource-type-item\" @click=\"$emit('selected', resourceType)\">\n\t\t\t<div class=\"rcw__resource-type\">\n\t\t\t\t<div :class=\"['booking--rcw--resource-type__icon', 'booking--rcw--resource-type__icon--' + resourceType.code]\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rcw__resource-type__row\">\n\t\t\t\t\t<div class=\"rcw__resource-type__label\">\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-title\">{{ resourceType.name }}</div>\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-description\">{{ resourceType.description }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Icon :name=\"IconSet.ARROW_RIGHT\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { mapMutations } from 'ui.vue3.vuex';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport type { ResourceCreationType } from 'booking.model.resource-creation-wizard';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport { ResourceType } from './resource-type/resource-type';\nimport './resource-category-card.css';\n\nexport const ResourceCategoryCard = {\n\tname: 'ResourceCategoryCard',\n\tcomputed: {\n\t\tresourceTypes(): ResourceCreationType[]\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].advertisingResourceTypes;\n\t\t},\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\tModel.ResourceCreationWizard,\n\t\t\t['updateResource', 'updateFetching'],\n\t\t),\n\t\tloadResourceTypes()\n\t\t{\n\t\t\tthis.updateFetching(true);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.updateFetching(false);\n\t\t\t}, 1);\n\t\t},\n\t\tasync selectResourceType({ relatedResourceTypeId }: ResourceCreationType): Promise<void>\n\t\t{\n\t\t\tthis.updateResource({\n\t\t\t\ttypeId: relatedResourceTypeId,\n\t\t\t});\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/nextStep`);\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceType.code,\n\t\t\t\tHelpDesk.ResourceType.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tbeforeMount()\n\t{\n\t\tthis.loadResourceTypes();\n\t},\n\tcomponents: {\n\t\tResourceType,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-category-card\">\n\t\t\t<div class=\"resource-category-card__header\">\n\t\t\t\t<div class=\"resource-category-card__header__title\">\n\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking--resource-category-card__header__sub-title\">\n\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY_DESCRIPTION') }}\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"booking--rcw--more\"\n\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY_DESCRIPTION_MORE') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"resource-category-card__content resource-creation-wizard__form\">\n\t\t\t\t<ResourceType\n\t\t\t\t\tv-for=\"resourceType in resourceTypes\"\n\t\t\t\t\t:key=\"resourceType.code\"\n\t\t\t\t\t:resource-type\n\t\t\t\t\t:data-id=\"'brcw-resource-type-list-' + resourceType.code\"\n\t\t\t\t\t@selected=\"selectResourceType\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './error-message.css';\n\nexport const ErrorMessage = {\n\tname: 'ErrorMessage',\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--error-message-container\">\n\t\t\t<div class=\"booking--rcw--error-message\">\n\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t<span>{{ message }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog, ItemOptions } from 'ui.entity-selector';\n\nimport { EntitySelectorEntity, Model } from 'booking.const';\nimport { ResourceTypeModel } from 'booking.model.resource-types';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\n\nimport { ErrorMessage } from '../error-message/error-message';\nimport './base-fields.css';\n\nexport const BaseFields = {\n\tname: 'ResourceSettingsCardBaseFields',\n\temits: [\n\t\t'nameUpdate',\n\t\t'typeUpdate',\n\t],\n\tprops: {\n\t\tinitialResourceName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinitialResourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tentityId: EntitySelectorEntity.ResourceType,\n\t\t\ttypeSelectorId: `booking-resource-creation-types${Text.getRandom()}`,\n\t\t\ttypeName: this.initialResourceType.typeName,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceName: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.initialResourceName;\n\t\t\t},\n\t\t\tset(name: string | null = '')\n\t\t\t{\n\t\t\t\tthis.$emit('nameUpdate', name);\n\t\t\t},\n\t\t},\n\t\tinvalidResourceName(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceName;\n\t\t},\n\t\tinvalidResourceType(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceType;\n\t\t},\n\t\terrorMessage(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_REQUIRED_FIELD');\n\t\t},\n\t},\n\tmethods: {\n\t\tshowTypeSelector(): void\n\t\t{\n\t\t\tconst dialog = this.getTypeSelectorDialog(this.$refs.typeSelectorAngle);\n\n\t\t\tdialog.show();\n\t\t},\n\t\tgetTypeSelectorDialog(bindElement: HTMLElement): Dialog\n\t\t{\n\t\t\tconst typeSelectorDialog = Dialog.getById(this.typeSelectorId);\n\n\t\t\tif (typeSelectorDialog)\n\t\t\t{\n\t\t\t\ttypeSelectorDialog.setTargetNode(bindElement);\n\n\t\t\t\treturn typeSelectorDialog;\n\t\t\t}\n\n\t\t\treturn new Dialog({\n\t\t\t\tid: this.typeSelectorId,\n\t\t\t\ttargetNode: bindElement,\n\t\t\t\twidth: 300,\n\t\t\t\theight: 400,\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcontext: 'bookingResourceCreationType',\n\t\t\t\tmultiple: false,\n\t\t\t\tcacheable: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: this.entityId,\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_CREATE_BTN'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst { searchQuery } = baseEvent.getData();\n\t\t\t\t\t\t\tconst dialog: Dialog = baseEvent.getTarget();\n\n\t\t\t\t\t\t\tthis.createType(searchQuery.getQuery())\n\t\t\t\t\t\t\t\t.then((resourceType: ResourceTypeModel) => {\n\t\t\t\t\t\t\t\t\tthis.updateResourceType(resourceType.id, resourceType.name);\n\t\t\t\t\t\t\t\t\tdialog.addItem(this.prepareTypeToDialog(resourceType));\n\t\t\t\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst selectedItem = baseEvent.getData().item;\n\t\t\t\t\t\tthis.updateResourceType(selectedItem.getId(), selectedItem.getTitle());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync createType(typeName: string): Promise<ResourceTypeModel>\n\t\t{\n\t\t\treturn resourceTypeService.add({\n\t\t\t\tmoduleId: 'booking',\n\t\t\t\tname: typeName,\n\t\t\t});\n\t\t},\n\t\tprepareTypeToDialog(type: ResourceTypeModel): ItemOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: type.id,\n\t\t\t\tentityId: this.entityId,\n\t\t\t\ttitle: type.name,\n\t\t\t\tsort: 1,\n\t\t\t\tselected: true,\n\t\t\t\ttabs: 'recents',\n\t\t\t\tsupertitle: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_SUPER_TITLE'),\n\t\t\t\tavatar: '/bitrix/js/booking/images/entity-selector/resource-type.svg',\n\t\t\t};\n\t\t},\n\t\tupdateResourceType(typeId: number, typeName: string): void\n\t\t{\n\t\t\tthis.typeName = typeName;\n\n\t\t\tthis.$emit('typeUpdate', typeId);\n\t\t},\n\t\tscrollToBaseFieldsForm(): void\n\t\t{\n\t\t\tthis.$refs.baseFieldsForm?.scrollIntoView(true, {\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'center',\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tinvalidResourceName(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t\tinvalidResourceType(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tErrorMessage,\n\t},\n\ttemplate: `\n\t\t<div ref=\"baseFieldsForm\" class=\"ui-form resource-creation-wizard__form-settings --base\">\n\t\t\t<div class=\"ui-form-row-inline booking--rcw--form-row-align\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<label class=\"ui-ctl-label-text\" for=\"brcw-settings-resource-name\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_NAME_LABEL') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model.trim=\"resourceName\"\n\t\t\t\t\t\t\t\tid=\"brcw-settings-resource-name\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-name-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t:class=\"{ '--error': invalidResourceName }\"\n\t\t\t\t\t\t\t\t:placeholder=\"this.loc('BRCW_SETTINGS_CARD_NAME_PLACEHOLDER')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceName\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_LABEL') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorAngle\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorElement\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-type-selector\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element resource-creation-wizard__form-settings-element\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'--placeholder': !typeName,\n\t\t\t\t\t\t\t\t\t'--error': invalidResourceType,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t@click=\"showTypeSelector\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"typeName\">\n\t\t\t\t\t\t\t\t\t{{ typeName }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_PLACEHOLDER') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceType\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport './title-layout.css';\n\nexport const TitleLayout = {\n\tname: 'ResourceSettingsCardTitleLayout',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-title-row\">\n\t\t\t<Icon\n\t\t\t\t:name=\"iconType\"\n\t\t\t\t:color=\"'var(--ui-color-primary)'\"\n\t\t\t\t:size=\"24\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\n\nexport const ScheduleItem = {\n\tname: 'ScheduleItem',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\titemClass: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tselectOption()\n\t\t{\n\t\t\tthis.$emit('update:model-value', this.value);\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceSchedule.code,\n\t\t\t\tHelpDesk.ResourceSchedule.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.modelValue.toString() === this.value.toString();\n\t\t},\n\t\tmoreLabel(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_MORE');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\t:class=\"['booking--rcw--schedule-item', { '--selected': isSelected }]\" \n\t\t\t@click=\"selectOption\"\n\t\t>\n\t\t\t<div class=\"booking--rcw--schedule-item-radio ui-ctl-radio\">\n\t\t\t\t<input\n\t\t\t\t\t:id=\"itemClass\"\n\t\t\t\t\t:checked=\"isSelected\"\n\t\t\t\t\t:value=\"value.toString()\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t@input=\"$emit('update:model-value', $event.target.value === 'true')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-text\">\n\t\t\t\t<label\n\t\t\t\t\t:for=\"itemClass\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</label>\n\t\t\t\t<div class=\"booking--rcw--schedule-item-text-description\">{{ description }}</div>\n\t\t\t\t<span \n\t\t\t\t\tclass=\"booking--rcw--more booking--rcw--schedule-item-text-description-more\"\n\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t>\n\t\t\t\t\t{{ moreLabel }}\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-view\" :class=\"itemClass\"></div>\n\t\t</div>\n\t`,\n};\n\nexport type IScheduleItem = {\n\titemClass: string;\n\ttitle: string;\n\tdescription: string;\n\tvalue: boolean;\n}\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { ScheduleItem, type IScheduleItem } from './components/schedule-item';\n\nimport './schedule-types.css';\n\nexport const ScheduleTypes = {\n\tname: 'ResourceSettingsCardScheduleTypes',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTitleLayout,\n\t\tScheduleItem,\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_SCHEDULE_TITLE');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.COLLABORATION;\n\t\t},\n\t\titems(): Array<IScheduleItem>\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tid: 'common',\n\t\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-common',\n\t\t\t\t\ttitle: this.loc('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_TITLE'),\n\t\t\t\t\tdescription: this.loc('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_DESCRIPTION'),\n\t\t\t\t\tvalue: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'extra',\n\t\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-extra',\n\t\t\t\t\ttitle: this.loc('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_TITLE'),\n\t\t\t\t\tdescription: this.loc('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_DESCRIPTION'),\n\t\t\t\t\tvalue: false,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings --schedule\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-schedule-view\">\n\t\t\t\t<ScheduleItem\n\t\t\t\t\tv-for=\"item in items\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-schedule-view-' + item.id\"\n\t\t\t\t\t:model-value=\"modelValue\"\n\t\t\t\t\t:item-class=\"item.itemClass\"\n\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t:description=\"item.description\"\n\t\t\t\t\t:value=\"item.value\"\n\t\t\t\t\t@update:model-value=\"$emit('update:model-value', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport './text-layout.css';\n\nexport const TextLayout = {\n\tname: 'ResourceSettingsCardTextLayout',\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmethods: {\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk[`Resource${this.type}`].code,\n\t\t\t\tHelpDesk[`Resource${this.type}`].anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-text-row\">\n\t\t\t<div class=\"resource-creation-wizard__form-settings-text\">\n\t\t\t\t{{ text }}\n\t\t\t\t<span @click=\"showHelpDesk\">{{ loc('BRCW_SETTINGS_CARD_MORE') }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers } from 'ui.vue3.vuex';\nimport { DateTimeFormat } from 'main.date';\n\nconst { mapGetters: mapResourceGetters } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const WorkTimeMixin = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselected: {\n\t\t\t\tMon: false,\n\t\t\t\tTue: false,\n\t\t\t\tWed: false,\n\t\t\t\tThu: false,\n\t\t\t\tFri: false,\n\t\t\t\tSat: false,\n\t\t\t\tSun: false,\n\t\t\t},\n\t\t\tdaysLabel: '',\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialDays.forEach((day) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.selected, day))\n\t\t\t{\n\t\t\t\tthis.selected[day] = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.daysLabel = this.formatDaysLabel();\n\t},\n\tmethods: {\n\t\tformatDaysLabel(): string\n\t\t{\n\t\t\tconst defaultString = this.loc('BRCW_SETTINGS_CARD_WORK_TIME_DAYS');\n\n\t\t\tconst weekDays = this.companyScheduleSlots[0].weekDays;\n\t\t\tif (this.isArraysEqual(this.selectedDays, weekDays))\n\t\t\t{\n\t\t\t\treturn defaultString;\n\t\t\t}\n\n\t\t\tconst orderedDays = Object.keys(this.daysLabelMap);\n\n\t\t\tconst sortedSelectedDays = this.selectedDays.sort((a, b) => {\n\t\t\t\treturn orderedDays.indexOf(a) - orderedDays.indexOf(b);\n\t\t\t});\n\t\t\tconst formattedDays = sortedSelectedDays.map((day) => this.daysLabelMap[day]);\n\n\t\t\treturn String(formattedDays.join(', '));\n\t\t},\n\t\tgetDayDefaultIndex(dayKey): number\n\t\t{\n\t\t\tconst dayIndices = {\n\t\t\t\tSun: 0,\n\t\t\t\tMon: 1,\n\t\t\t\tTue: 2,\n\t\t\t\tWed: 3,\n\t\t\t\tThu: 4,\n\t\t\t\tFri: 5,\n\t\t\t\tSat: 6,\n\t\t\t};\n\n\t\t\treturn dayIndices[dayKey];\n\t\t},\n\t\tisArraysEqual(first: [], second: []): boolean\n\t\t{\n\t\t\treturn first.length === second.length && first.every((value, index) => value === second[index]);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapResourceGetters({\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tweekStart: 'weekStart',\n\t\t}),\n\t\tselectedDays(): Array\n\t\t{\n\t\t\treturn Object.keys(this.selected).filter((day) => this.selected[day]);\n\t\t},\n\t\tdaysLabelMap(): Object\n\t\t{\n\t\t\tconst weekdays = [];\n\t\t\tconst format = 'D';\n\n\t\t\tconst allDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n\n\t\t\tconst startIndex = allDays.indexOf(this.weekStart);\n\n\t\t\tconst orderedDays = [...allDays.slice(startIndex), ...allDays.slice(0, startIndex)];\n\n\t\t\torderedDays.forEach((dayKey, index) => {\n\t\t\t\tconst currentDayIndex = new Date().getDay();\n\t\t\t\tconst targetDayIndex = this.getDayDefaultIndex(dayKey);\n\t\t\t\tconst dayDifference = (targetDayIndex - currentDayIndex + 7) % 7;\n\n\t\t\t\tconst dayDate = new Date();\n\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\tweekdays[index] = DateTimeFormat.format(format, dayDate);\n\t\t\t});\n\n\t\t\treturn orderedDays.reduce((result, dayKey, index) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tresult[dayKey] = weekdays[index];\n\n\t\t\t\treturn result;\n\t\t\t}, {});\n\t\t},\n\t},\n};\n","import { PopupOptions } from 'main.popup';\nimport { Popup } from 'booking.component.popup';\nimport { WorkTimeMixin } from './work-time-mixin';\n\nimport './week-days-popup.css';\n\nexport const WeekDaysPopup = {\n\tname: 'ResourceSettingsCardWeekDaysPopup',\n\temits: ['select', 'close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialDays: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tmethods: {\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tclick(day: string): void\n\t\t{\n\t\t\tconst trueKeys = Object.keys(this.selected).filter((key) => this.selected[key] === true);\n\n\t\t\tif (trueKeys.length === 1 && trueKeys[0] === day)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selected[day] = !this.selected[day];\n\n\t\t\tthis.$emit('select', this.selectedDays, this.formatDaysLabel());\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-work-time-popup-${this.id}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\toffsetRight: this.bindElement.offsetWidth,\n\t\t\t\tangle: false,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"close\"\n\t\t\tref=\"popup\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(day, index) in daysLabelMap\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-week-day-' + index + '-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-week-days-popup-weekday\"\n\t\t\t\t\t:class=\"{ '--selected': selected[index] }\"\n\t\t\t\t\t@click=\"() => click(index)\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-text\">\n\t\t\t\t\t\t{{ day }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { MenuManager, Menu, MenuItem } from 'main.popup';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeMixin } from './work-time-mixin';\nimport { WeekDaysPopup } from './week-days-popup';\n\nimport './work-time-slot-range.css';\n\nexport const WorkTimeSlotRange = {\n\tname: 'ResourceSettingsCardWorkTimeSlotRange',\n\temits: ['add', 'update', 'remove'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisLastRange: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWeekDaysPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfromId: 'from',\n\t\t\ttoId: 'to',\n\t\t\tfromTs: 0,\n\t\t\ttoTs: 0,\n\t\t\tduration: 0,\n\t\t\tisShownDays: false,\n\t\t\tarrow: {\n\t\t\t\tdays: false,\n\t\t\t\tfrom: false,\n\t\t\t\tto: false,\n\t\t\t},\n\t\t\tremoveSlot: !this.isLastRange,\n\t\t\tlocalSlotRange: { ...this.initialSlotRange },\n\t\t\tinitialDays: [...this.initialSlotRange.weekDays],\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.fromTs = this.slotRange.from;\n\t\tthis.toTs = this.slotRange.to;\n\t\tthis.duration = this.toTs - this.fromTs;\n\t},\n\twatch: {\n\t\t'slotRange.from': function(value) {\n\t\t\tthis.fromTs = value;\n\n\t\t\tthis.toTs = this.fromTs + this.duration;\n\n\t\t\tthis.update();\n\t\t},\n\t\t'slotRange.to': function(value) {\n\t\t\tthis.toTs = value;\n\n\t\t\tif (this.toTs <= this.fromTs)\n\t\t\t{\n\t\t\t\tthis.fromTs = this.toTs - this.duration;\n\t\t\t}\n\n\t\t\tthis.duration = this.toTs - this.fromTs;\n\n\t\t\tthis.update();\n\t\t},\n\t},\n\tmethods: {\n\t\tshowDays(): void\n\t\t{\n\t\t\tthis.isShownDays = true;\n\t\t\tthis.arrow.days = true;\n\t\t},\n\t\thideDays(): void\n\t\t{\n\t\t\tthis.isShownDays = false;\n\t\t\tthis.arrow.days = false;\n\t\t},\n\t\tselectDays(weekDays: Array, daysLabel: string): void\n\t\t{\n\t\t\tthis.slotRange.weekDays = weekDays;\n\n\t\t\tthis.daysLabel = daysLabel;\n\n\t\t\tthis.update();\n\t\t},\n\t\tshow(bindElement: HTMLElement, id: string): void\n\t\t{\n\t\t\tif (this.arrow[id] === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeList: Menu = MenuManager.create({\n\t\t\t\tid: `booking-work-time-popup-${Date.now()}`,\n\t\t\t\tclassName: 'resource-creation-wizard__form-work-time-menu',\n\t\t\t\tbindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.arrow[id] = true;\n\n\t\t\t\t\t\tconst selectedItem: MenuItem = timeList.getMenuItems()\n\t\t\t\t\t\t\t.find((item: MenuItem) => Dom.hasClass(item.getLayout().item, '--selected'))\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tconst itemHeight = 36;\n\t\t\t\t\t\tconst offset = 2 * itemHeight;\n\n\t\t\t\t\t\tconst scrollContainer = timeList.getPopupWindow().getContentContainer();\n\t\t\t\t\t\tconst topPosition = Dom.getRelativePosition(selectedItem.getContainer(), scrollContainer).top;\n\n\t\t\t\t\t\tscrollContainer.scrollTo({\n\t\t\t\t\t\t\ttop: scrollContainer.scrollTop + topPosition - offset,\n\t\t\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.arrow[id] = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmaxHeight: 200,\n\t\t\t\tminWidth: bindElement.offsetWidth,\n\t\t\t});\n\n\t\t\tfor (const [key, value] of Object.entries(this.generateTimeMap(id)))\n\t\t\t{\n\t\t\t\tconst minutes = parseInt(key, 10);\n\t\t\t\tconst defaultClass = 'menu-popup-item menu-popup-no-icon';\n\n\t\t\t\ttimeList.addMenuItem({\n\t\t\t\t\ttext: value,\n\t\t\t\t\tclassName: this.slotRange[id] === minutes ? `${defaultClass} --selected` : defaultClass,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.slotRange[id] = parseInt(minutes, 10);\n\t\t\t\t\t\ttimeList.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttimeList.show();\n\t\t},\n\t\tgenerateTimeMap(id: string): Object\n\t\t{\n\t\t\tconst timeMap = {};\n\n\t\t\tconst timeFormat = DateTimeFormat.getFormat('SHORT_TIME_FORMAT');\n\n\t\t\tconst interval = 30;\n\t\t\tconst from = (id === this.toId ? this.fromTs + interval : 0);\n\t\t\tconst to = (id === this.fromId ? this.toTs : 1440);\n\t\t\tfor (let minutes = from; minutes < to; minutes += interval)\n\t\t\t{\n\t\t\t\tconst timestamp = new Date().setHours(0, minutes, 0, 0) / 1000;\n\t\t\t\ttimeMap[minutes] = DateTimeFormat.format(timeFormat, timestamp);\n\t\t\t}\n\n\t\t\tif (id === this.toId)\n\t\t\t{\n\t\t\t\tconst midnightTimestamp = new Date().setHours(0, 0, 0, 0) / 1000;\n\t\t\t\ttimeMap[to] = DateTimeFormat.format(timeFormat, midnightTimestamp);\n\t\t\t}\n\n\t\t\treturn timeMap;\n\t\t},\n\t\tclickBtn(): void\n\t\t{\n\t\t\tif (this.removeSlot === false)\n\t\t\t{\n\t\t\t\tthis.removeSlot = true;\n\n\t\t\t\tthis.$emit('add');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.removeSlot = false;\n\n\t\t\t\tthis.$emit('remove', this.id);\n\t\t\t}\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tthis.$emit('update', this.id, this.slotRange);\n\t\t},\n\t},\n\tcomputed: {\n\t\tdaysId(): string\n\t\t{\n\t\t\treturn `days-${this.id}`;\n\t\t},\n\t\tdays(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.days;\n\t\t},\n\t\tslotRange(): SlotRange\n\t\t{\n\t\t\treturn this.localSlotRange;\n\t\t},\n\t\tfromLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.fromId);\n\n\t\t\treturn timeMap[this.slotRange.from];\n\t\t},\n\t\ttoLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.toId);\n\n\t\t\treturn timeMap[this.slotRange.to];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-content resource-creation-wizard__form-work-time-selector-widget\">\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-days\">\n\t\t\t\t<div\n\t\t\t\t\tref=\"days\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-days-' + id\"\n\t\t\t\t\tclass=\"rcw-ui-ctl ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t@click=\"showDays\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t:class=\"{ '--active': arrow.days }\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"ui-ctl-element\">\n\t\t\t\t\t\t{{ daysLabel }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<WeekDaysPopup\n\t\t\t\t\t\tv-if=\"isShownDays\"\n\t\t\t\t\t\t:id=\"daysId\"\n\t\t\t\t\t\t:bindElement=\"days\"\n\t\t\t\t\t\t:initialDays=\"slotRange.weekDays\"\n\t\t\t\t\t\t@select=\"selectDays\"\n\t\t\t\t\t\t@close=\"hideDays\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-time\">\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"from\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-from-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.from, fromId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.from }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ fromLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-dash\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"to\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-to-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.to, toId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.to }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ toLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-btn-row\">\n\t\t\t\t<div\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-add-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-btn\"\n\t\t\t\t\t:class=\"{ '--remove': removeSlot }\"\n\t\t\t\t\t@click=\"clickBtn\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeSlotRange } from './work-time-slot-range';\n\nimport './work-time-selector.css';\n\nexport const WorkTimeSelector = {\n\tname: 'ResourceSettingsCardWorkTimeSelector',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWorkTimeSlotRange,\n\t\tIcon,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlocalSlotRanges: this.processSlotRanges(this.initialSlotRanges),\n\t\t\tisChecked: this.isGlobalSchedule,\n\t\t\thasTimezonesDifference: false,\n\t\t\tformattedInitialOffset: '',\n\t\t\tformattedCurrentOffset: '',\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.calculateDifferenceBetweenTimezones(this.initialTimezone, this.currentTimezone);\n\t},\n\twatch: {\n\t\tinitialSlotRanges: {\n\t\t\thandler(newSlotRanges)\n\t\t\t{\n\t\t\t\tthis.localSlotRanges = this.processSlotRanges(newSlotRanges);\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t\tisChecked(checked): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t},\n\tmethods: {\n\t\topenCompanyWorkTime(event): void\n\t\t{\n\t\t\tconst isTextClick = event.target === event.currentTarget;\n\t\t\tif (!isTextClick && this.isCompanyScheduleAccess)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\ttop.BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'SidePanel.Slider:onLoad',\n\t\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst slider = baseEvent.getTarget();\n\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onSuccessSave',\n\t\t\t\t\t\t\t(innerBaseEvent: BaseEvent) => {\n\t\t\t\t\t\t\t\tconst extraSettings = innerBaseEvent.getData();\n\t\t\t\t\t\t\t\textraSettings.reloadAfterClose = false;\n\n\t\t\t\t\t\t\t\tthis.$emit('getGlobalSchedule');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t'/settings/configs/?page=schedule',\n\t\t\t\t\t{ cacheable: false },\n\t\t\t\t);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tupdateSlotRange(index: number, slotRange: SlotRange): void\n\t\t{\n\t\t\tthis.slotRanges[index] = slotRange;\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\taddSlotRange(): void\n\t\t{\n\t\t\tthis.slotRanges.push(this.defaultSlotRange);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tremoveSlotRange(index: number): void\n\t\t{\n\t\t\tthis.slotRanges.splice(index, 1);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tprocessSlotRanges(slotRanges): SlotRange[]\n\t\t{\n\t\t\treturn slotRanges.map((slotRange) => {\n\t\t\t\tif (slotRange.id === null)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...slotRange,\n\t\t\t\t\t\tid: Text.getRandom(),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn slotRange;\n\t\t\t});\n\t\t},\n\t\tgetTimezoneOffset(timeZone: string): number\n\t\t{\n\t\t\tconst now = new Date();\n\t\t\tconst utcDate = new Date(now.toLocaleString('en-US', { timeZone: 'UTC' }));\n\t\t\tconst tzDate = new Date(now.toLocaleString('en-US', { timeZone }));\n\n\t\t\treturn (utcDate.getTime() - tzDate.getTime()) / (1000 * 60);\n\t\t},\n\t\tcalculateDifferenceBetweenTimezones(initialTimezone: string, currentTimezone: string): void\n\t\t{\n\t\t\tconst initialOffset = this.getTimezoneOffset(initialTimezone);\n\t\t\tconst currentOffset = this.getTimezoneOffset(currentTimezone);\n\n\t\t\tthis.hasTimezonesDifference = initialOffset !== currentOffset;\n\n\t\t\tif (this.hasTimezonesDifference)\n\t\t\t{\n\t\t\t\tconst formatOffset = (offset) => {\n\t\t\t\t\tconst sign = offset >= 0 ? '+' : '-';\n\t\t\t\t\tconst hours = Math.floor(Math.abs(offset) / 60);\n\t\t\t\t\tconst minutes = Math.abs(offset) % 60;\n\n\t\t\t\t\treturn `${sign}${hours}:${minutes.toString().padStart(2, '0')}`;\n\t\t\t\t};\n\n\t\t\t\tthis.formattedInitialOffset = `UTC ${formatOffset(-initialOffset)} ${initialTimezone}`;\n\n\t\t\t\tconst totalDifferenceMinutes = currentOffset - initialOffset;\n\n\t\t\t\tthis.formattedCurrentOffset = formatOffset(totalDifferenceMinutes);\n\t\t\t}\n\t\t},\n\t\tonSlotClick(): void\n\t\t{\n\t\t\tthis.isChecked = false;\n\t\t},\n\t},\n\tcomputed: {\n\t\tcompanyWorkTimeOptionLabel(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_COMPANY_OPTION');\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.localSlotRanges;\n\t\t},\n\t\tisSlotsDisabled(): boolean\n\t\t{\n\t\t\treturn this.isChecked;\n\t\t},\n\t\ttimezoneIconType(): string\n\t\t{\n\t\t\treturn IconSet.EARTH_TIME;\n\t\t},\n\t\tformattedTimezonesText(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TIMEZONES')\n\t\t\t\t.replace('#utc#', this.formattedInitialOffset)\n\t\t\t\t.replace('#difference#', this.formattedCurrentOffset);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-work-time-selector\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tfor=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-checkbox\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\tdata-id=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\tv-model=\"isChecked\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text work-time-selector-label-text\"\n\t\t\t\t\t\t\t:class=\"{'--disabled': !isCompanyScheduleAccess }\"\n\t\t\t\t\t\t\t@click=\"openCompanyWorkTime\"\n\t\t\t\t\t\t\tv-html=\"companyWorkTimeOptionLabel\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots\"\n\t\t\t\t:class=\"{'--disabled': isSlotsDisabled }\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(slotRange, index) in slotRanges\"\n\t\t\t\t\t:key=\"slotRange.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-' + slotRange.id\"\n\t\t\t\t\tclass=\"ui-form-row-inline\"\n\t\t\t\t\t@click=\"onSlotClick\"\n\t\t\t\t>\n\t\t\t\t\t<WorkTimeSlotRange\n\t\t\t\t\t\t:id=\"index\"\n\t\t\t\t\t\t:initialSlotRange=\"slotRange\"\n\t\t\t\t\t\t:isLastRange=\"index === slotRanges.length - 1\"\n\t\t\t\t\t\t@add=\"addSlotRange\"\n\t\t\t\t\t\t@update=\"updateSlotRange\"\n\t\t\t\t\t\t@remove=\"removeSlotRange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasTimezonesDifference\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-slots-timezone-icon\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:name=\"timezoneIconType\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-50)'\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone-text\"\n\t\t\t\t\t\tv-html=\"formattedTimezonesText\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { SlotRange } from 'booking.model.resources';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { WorkTimeSelector } from './work-time-selector';\n\nexport const WorkTime = {\n\tname: 'ResourceSettingsCardWorkTime',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tWorkTimeSelector,\n\t},\n\tmethods: {\n\t\tupdate(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.$emit('update', slotRanges);\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t\tgetGlobalSchedule(): void\n\t\t{\n\t\t\tthis.$emit('getGlobalSchedule');\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TITLE');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.CLOCK_2;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"WorkTime\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_WORK_TIME_TEXT')\"\n\t\t\t/>\n\t\t\t<WorkTimeSelector\n\t\t\t\t:initialSlotRanges=\"initialSlotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"currentTimezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t@update=\"update\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"getGlobalSchedule\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport { Type } from 'main.core';\nimport 'ui.layout-form';\nimport './slot-length-precision-selection.css';\n\nexport const SlotLengthPrecisionSelection = {\n\tname: 'ResourceSettingsCardSlotLengthSlotLengthPrecisionSelection',\n\tdirectives: { hint },\n\temits: ['input'],\n\tcomponents: {},\n\tprops: {\n\t\tinitialValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdays: 0,\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.distributeInitialValue();\n\t},\n\tmethods: {\n\t\tdistributeInitialValue(): void\n\t\t{\n\t\t\tlet remainingMinutes = this.initialValue;\n\n\t\t\tthis.days = Math.floor(remainingMinutes / (24 * 60));\n\t\t\tremainingMinutes %= 24 * 60;\n\n\t\t\tthis.hours = Math.floor(remainingMinutes / 60);\n\t\t\tremainingMinutes %= 60;\n\n\t\t\tthis.minutes = remainingMinutes;\n\t\t},\n\t\tcalculateTotalMinutes()\n\t\t{\n\t\t\tconst totalMinutes = this.days * 24 * 60 + this.hours * 60 + this.minutes;\n\n\t\t\tthis.$emit('input', totalMinutes);\n\t\t},\n\t\tvalidateHours()\n\t\t{\n\t\t\tthis.hours = parseInt(this.hours, 10);\n\n\t\t\tif (!Type.isNumber(this.hours))\n\t\t\t{\n\t\t\t\tthis.hours = 0;\n\t\t\t}\n\n\t\t\tif (this.hours > 12)\n\t\t\t{\n\t\t\t\tthis.hours = 12;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\tvalidateMinutes()\n\t\t{\n\t\t\tthis.minutes = parseInt(this.minutes, 10);\n\n\t\t\tif (!Type.isNumber(this.minutes))\n\t\t\t{\n\t\t\t\tthis.minutes = 0;\n\t\t\t}\n\n\t\t\tif (this.minutes > 59)\n\t\t\t{\n\t\t\t\tthis.minutes = 59;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\thandleEnterKey(event)\n\t\t{\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tevent.target.blur();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thourHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_HOUR'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tminutesHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_MINUTES'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-slot-length-precision-selection\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row --disabled\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-days'\"\n\t\t\t\t\t\t\t\t\tv-model=\"days\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_1') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"hourHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-hours'\"\n\t\t\t\t\t\t\t\t\tv-model=\"hours\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateHours\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_2') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"minutesHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-minutes'\"\n\t\t\t\t\t\t\t\t\tv-model=\"minutes\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateMinutes\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_3') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport 'ui.buttons';\nimport { Duration } from 'booking.lib.duration';\nimport { SlotLengthPrecisionSelection } from './slot-length-precision-selection';\nimport './slot-length-selector.css';\n\nconst unitDurations = Duration.getUnitDurations();\nconst units = Object.fromEntries(\n\tObject.entries(unitDurations).map(([unit, value]) => [unit, value / unitDurations.i]),\n);\n\nconst disabledLengths = new Set([units.H * 24, units.d * 7]);\n\nexport const SlotLengthSelector = {\n\tname: 'ResourceSettingsCardSlotLengthSelector',\n\tdirectives: { hint },\n\temits: ['select'],\n\tcomponents: {\n\t\tSlotLengthPrecisionSelection,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedValue: this.initialSelectedValue,\n\t\t\tselectedPrecisionValue: this.initialSelectedValue,\n\t\t\tprecisionMode: false,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tconst templateValues = new Set([\n\t\t\tunits.H,\n\t\t\tunits.H * 2,\n\t\t\tunits.H * 24,\n\t\t\tunits.d * 7,\n\t\t]);\n\n\t\tif (!templateValues.has(this.selectedValue))\n\t\t{\n\t\t\tthis.selectedValue = 0;\n\t\t\tthis.precisionMode = true;\n\t\t}\n\t},\n\tmethods: {\n\t\tselect(value: number): void\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedValue = parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.precisionMode = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.precisionMode = false;\n\n\t\t\t\tthis.$emit('select', this.selectedValue);\n\t\t\t}\n\t\t},\n\t\tselectPrecision(value: number): void\n\t\t{\n\t\t\tthis.selectedPrecisionValue = value === 0 ? units.H : parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.selectedValue = units.H;\n\t\t\t\tthis.precisionMode = false;\n\t\t\t}\n\n\t\t\tthis.$emit('select', this.selectedPrecisionValue);\n\t\t},\n\t\tgetClass(value): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn-primary': this.selectedValue === value,\n\t\t\t\t'ui-btn-light': this.selectedValue !== value,\n\t\t\t\t'ui-btn-disabled': disabledLengths.has(value),\n\t\t\t};\n\t\t},\n\t\tgetSoonHintContent(value: number): ?Object\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttext: this.loc('BRCW_SOON_HINT'),\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tcomputed: {\n\t\tdurations(): { label: string, value: number }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H).format('H'),\n\t\t\t\t\tvalue: units.H,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 2).format('H'),\n\t\t\t\t\tvalue: units.H * 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 24).format('H'),\n\t\t\t\t\tvalue: units.H * 24,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.d * 7).format('d'),\n\t\t\t\t\tvalue: units.d * 7,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_SELECTOR_CUSTOM'),\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-slot-length-selector\">\n\t\t\t<div\n\t\t\t\tv-for=\"(duration, index) in durations\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:data-id=\"'brcw-resource-slot-length-selector-size-' + index\"\n\t\t\t\tclass=\"ui-btn ui-btn-xs\"\n\t\t\t\t:class=\"getClass(duration.value)\"\n\t\t\t\t@click=\"select(duration.value)\"\n\t\t\t\tv-hint=\"getSoonHintContent(duration.value)\"\n\t\t\t>\n\t\t\t\t{{ duration.label }}\n\t\t\t</div>\n\t\t</div>\n\t\t<transition name=\"fade\">\n\t\t\t<div\n\t\t\t\tv-if=\"precisionMode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-slot-length-precision\"\n\t\t\t>\n\t\t\t\t<SlotLengthPrecisionSelection\n\t\t\t\t\t:initialValue=\"selectedPrecisionValue\"\n\t\t\t\t\t@input=\"selectPrecision\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</transition>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { SlotLengthSelector } from './slot-length-selector';\n\nexport const SlotLength = {\n\tname: 'ResourceSettingsCardSlotLength',\n\temits: ['select'],\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tSlotLengthSelector,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: this.initialSelectedValue,\n\t\t};\n\t},\n\tmethods: {\n\t\tupdateSelectedValue(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tthis.$emit('select', value);\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TITLE');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.GANTT_GRAPHS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"SlotLength\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TEXT')\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<SlotLengthSelector\n\t\t\t\t\t:initialSelectedValue=\"initialSelectedValue\"\n\t\t\t\t\t@select=\"updateSelectedValue\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers, mapGetters } from 'ui.vue3.vuex';\nimport { Type } from 'main.core';\nimport { Model } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { BaseFields } from './base-fields/base-fields';\nimport { ScheduleTypes } from './schedule-types/schedule-types';\nimport { WorkTime } from './work-time/work-time';\nimport { SlotLength } from './slot-length/slot-length';\n\nimport type { SlotRange } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\n\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.design-tokens';\nimport 'ui.icon-set.main';\n\nimport './resource-settings-card.css';\n\nconst { mapGetters: mapResourceGetters, mapActions, mapMutations } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const ResourceSettingsCard = {\n\tname: 'ResourceSettingsCard',\n\tcomponents: {\n\t\tBaseFields,\n\t\tScheduleTypes,\n\t\tWorkTime,\n\t\tSlotLength,\n\t},\n\tcreated(): void\n\t{\n\t\tthis.initialTimezone = this.getInitialSlotTimeZone();\n\t\tthis.selectedSlotLength = this.resource.slotRanges?.[0]?.slotSize ?? 60;\n\n\t\tconst slotRanges = (\n\t\t\tType.isArrayFilled(this.resource.slotRanges)\n\t\t\t\t? this.resource.slotRanges\n\t\t\t\t: this.companyScheduleSlots\n\t\t);\n\n\t\tthis.updateSlotRanges(slotRanges);\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: 60,\n\t\t\tinitialTimezone: '',\n\t\t};\n\t},\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'setInvalidResourceName',\n\t\t\t'setInvalidResourceType',\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'updateResource',\n\t\t\t'setGlobalSchedule',\n\t\t]),\n\t\tupdateResourceName(name): void\n\t\t{\n\t\t\tthis.updateResource({ name });\n\t\t\tif (name)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceName(false);\n\t\t\t}\n\t\t},\n\t\tupdateResourceType(typeId): void\n\t\t{\n\t\t\tthis.updateResource({ typeId });\n\t\t\tif (typeId)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceType(false);\n\t\t\t}\n\t\t},\n\t\tupdateSlotRanges(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.updateResource({ slotRanges: this.updateSlotDataForAllRanges(slotRanges) });\n\t\t},\n\t\tupdateSlotLength(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tif (this.resource.slotRanges.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateSlotRanges(this.resource.slotRanges);\n\t\t},\n\t\tupdateSlotDataForAllRanges(inputSlotRanges: SlotRange[]): SlotRange[]\n\t\t{\n\t\t\tconst slotRanges = inputSlotRanges || this.resource.slotRanges;\n\n\t\t\treturn slotRanges.map((slotRange: SlotRange) => {\n\t\t\t\treturn {\n\t\t\t\t\t...slotRange,\n\t\t\t\t\tslotSize: this.selectedSlotLength,\n\t\t\t\t\ttimezone: this.timezone,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.setGlobalSchedule(checked);\n\t\t},\n\t\tasync fetchData(): void\n\t\t{\n\t\t\tawait resourceCreationWizardService.fetchData();\n\n\t\t\tif (!this.isEditForm)\n\t\t\t{\n\t\t\t\tthis.updateSlotRanges(this.companyScheduleSlots);\n\t\t\t}\n\t\t},\n\t\tgetInitialSlotTimeZone(): string\n\t\t{\n\t\t\tconst slotRanges = this.isEditForm ? this.resource.slotRanges : this.companyScheduleSlots;\n\n\t\t\treturn slotRanges[0]?.timezone;\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttimezone: `${Model.Interface}/timezone`,\n\t\t}),\n\t\t...mapResourceGetters({\n\t\t\tresource: 'getResource',\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tisCompanyScheduleAccess: 'isCompanyScheduleAccess',\n\t\t\tisGlobalSchedule: 'isGlobalSchedule',\n\t\t}),\n\t\tresourceName(): string\n\t\t{\n\t\t\treturn this.resource.name;\n\t\t},\n\t\tresourceType(): Object\n\t\t{\n\t\t\tconst resourceType: ?ResourceTypeModel = this.$store\n\t\t\t\t.getters['resourceTypes/getById'](this.resource.typeId)\n\t\t\t;\n\n\t\t\treturn {\n\t\t\t\ttypeId: this.resource.typeId,\n\t\t\t\ttypeName: resourceType?.name,\n\t\t\t};\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.resource.slotRanges;\n\t\t},\n\t\tdefaultSlotRange(): SlotRange\n\t\t{\n\t\t\treturn this.companyScheduleSlots[0];\n\t\t},\n\t\tslotSize(): number\n\t\t{\n\t\t\tconst slotRange: SlotRange = this.resource.slotRanges?.[0];\n\n\t\t\treturn slotRange?.slotSize ?? 60;\n\t\t},\n\t\tisMain: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.resource.isMain;\n\t\t\t},\n\t\t\tset(isMain: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isMain });\n\t\t\t},\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resource.id !== null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-settings-card\">\n\t\t\t<BaseFields\n\t\t\t\t:data-id=\"'brcw-resource-settings-base'\"\n\t\t\t\t:initialResourceName=\"resourceName\"\n\t\t\t\t:initialResourceType=\"resourceType\"\n\t\t\t\t@nameUpdate=\"updateResourceName\"\n\t\t\t\t@typeUpdate=\"updateResourceType\"\n\t\t\t/>\n\t\t\t<ScheduleTypes\n\t\t\t\t:data-id=\"'brcw-resource-settings-schedule-types'\"\n\t\t\t\tv-model=\"isMain\"\n\t\t\t/>\n\t\t\t<WorkTime\n\t\t\t\t:data-id=\"'brcw-resource-settings-work-time'\"\n\t\t\t\t:initialSlotRanges=\"slotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"timezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t@update=\"updateSlotRanges\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"fetchData\"\n\t\t\t/>\n\t\t\t<SlotLength\n\t\t\t\t:data-id=\"'brcw-resource-settings-slot-length'\"\n\t\t\t\t:initialSelectedValue=\"slotSize\"\n\t\t\t\t@select=\"updateSlotLength\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport { NotificationChannel } from 'booking.const';\nimport { ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\n\nimport './channel-menu.css';\n\nexport const ChannelMenu = {\n\tname: 'ChannelMenu',\n\temits: ['popupShown', 'popupClosed', 'update:value'],\n\tprops: {\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t\tchannel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'booking-choose-channel-menu';\n\t\t},\n\t\tnotificationChannelOptions(): { label: string, value: Messenger }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tvalue: NotificationChannel.WhatsApp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS'),\n\t\t\t\t\tvalue: NotificationChannel.Sms,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.channel = this.notificationChannelOptions\n\t\t\t.find(({ value }) => value === this.currentChannel)?.label\n\t\t\t|| this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs['menu-button'];\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-choose-channel-menu',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.destroy(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t\t\t\t\t\tthis.$emit('update:value', NotificationChannel.WhatsApp);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS');\n\t\t\t\t\t\tthis.$emit('update:value', NotificationChannel.Sms);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<button\n\t\t\tref=\"menu-button\"\n\t\t\t:class=\"['channel-menu-btn', 'ui-btn ui-btn-round', ButtonSize.EXTRA_SMALL, ButtonColor.SECONDARY]\"\n\t\t\ttype=\"button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t{{ channel }}\n\t\t</button>\n\t`,\n};\n","import { Event, Text } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model, NotificationChannel } from 'booking.const';\nimport { Popup } from 'booking.component.popup';\nimport { ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\n\nimport './choose-template-popup.css';\n\nexport const ChooseTemplatePopup = {\n\tname: 'ResourceNotificationChooseTemplatePopup',\n\temits: ['close', 'templateTypeSelected'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTemplateType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonSize: {\n\t\t\ttype: String,\n\t\t\tdefault: ButtonSize.EXTRA_SMALL,\n\t\t},\n\t\tbuttonColors: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tselected: ButtonColor.BASE_LIGHT,\n\t\t\t\tdefault: ButtonColor.PRIMARY,\n\t\t\t}),\n\t\t},\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tselectedTemplateType: this.currentTemplateType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tPopup,\n\t\tChannelMenu,\n\t\tIcon,\n\t},\n\tbeforeMount(): void\n\t{\n\t\tthis.messenger = this.currentChannel;\n\t},\n\tmounted(): void {\n\t\tthis.adjustPosition();\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tbeforeUnmount(): void {\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttemplateTypes: `${Model.Dictionary}/getNotificationTemplates`,\n\t\t}),\n\t\tpopupId(): string {\n\t\t\treturn `booking-resource-wizard-choose-template-popup-${Text.getRandom(4)}`;\n\t\t},\n\t\tconfig(): Object {\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-resource-wizard-choose-template-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\toffsetLeft: (this.bindElement.childNodes[0]?.offsetWidth ?? 146) + 10,\n\t\t\t\toffsetTop: -149,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: 120,\n\t\t\t\t\tposition: 'left',\n\t\t\t\t},\n\t\t\t\tangleBorderRadius: '4px 0',\n\t\t\t\tpadding: 15,\n\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t\tgetFormattedTime(): string {\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('SHORT_TIME_FORMAT'), Date.now() / 1000);\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMessageTemplate(messenger: string, templateType: string): string {\n\t\t\tconst templateModel = this.model.templates.find((template: NotificationsTemplateModel): boolean => {\n\t\t\t\treturn template.type === templateType;\n\t\t\t});\n\n\t\t\tif (!templateModel)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tswitch (messenger)\n\t\t\t{\n\t\t\t\tcase NotificationChannel.WhatsApp:\n\t\t\t\t\treturn templateModel.text;\n\t\t\t\tcase NotificationChannel.Sms:\n\t\t\t\t\treturn templateModel.textSms;\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\thandleChannelChange(selectedChannel): void {\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\tchooseType(selectedType): void {\n\t\t\tthis.selectedTemplateType = selectedType;\n\t\t\tthis.$emit('templateTypeSelected', this.selectedTemplateType);\n\t\t},\n\t\tadjustPosition(): void {\n\t\t\tthis.$refs.popup.adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t});\n\t\t},\n\t\tgetButtonText(templateType): string {\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECTED')\n\t\t\t\t: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECT_TYPE');\n\t\t},\n\t\tgetButtonColor(templateType: string): string {\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.buttonColors.selected\n\t\t\t\t: this.buttonColors.default;\n\t\t},\n\t\tgetTemplateTitle(templateType: string): string {\n\t\t\tconst typeDictionary = Object.values(this.templateTypes)\n\t\t\t\t.find((templateDictionary: { name: string, value: string }): boolean => {\n\t\t\t\t\treturn templateDictionary.value === templateType;\n\t\t\t\t});\n\n\t\t\treturn (typeDictionary)\n\t\t\t\t? typeDictionary.name\n\t\t\t\t: '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"booking-resource-wizard-choose-template-popup\">\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header\">\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_HEADER_TITLE') }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@popupShown=\"freeze\"\n\t\t\t\t\t\t\t@popupClosed=\"unfreeze\"\n\t\t\t\t\t\t\t@update:value=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:class=\"['--close-btn']\"\n\t\t\t\t\t\t\t:name=\"IconSet.CROSS_25\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-20)'\"\n\t\t\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-close-btn\"></div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-line\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-container\">\n\t\t\t\t\t<div v-for=\"template in this.model.templates\" :key=\"template.type\"\n\t\t\t\t\t\t class=\"booking-resource-wizard-choose-template-popup-content\">\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-desc\">\n\t\t\t\t\t\t\t{{ getTemplateTitle(template.type) }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body', messenger]\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text', messenger]\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"getMessageTemplate(messenger, template.type)\"></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-time', messenger]\">\n\t\t\t\t\t\t\t\t\t\t{{ getFormattedTime }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-tail', messenger]\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example-actions\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t:name=\"IconSet.CIRCLE_CHECK\"\n\t\t\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-green-55)'\"\n\t\t\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\t\t\tv-if=\"selectedTemplateType === template.type\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t:class=\"['ui-btn ui-btn-round', buttonSize, getButtonColor(template.type), {'--selected': selectedTemplateType === template.type}]\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t@click=\"chooseType(template.type)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ getButtonText(template.type) }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import 'ui.label';\n\nexport const replaceLabelMixin = {\n\tmethods: {\n\t\tgetLabel(text: string, isChecked: boolean, hint: string = ''): string\n\t\t{\n\t\t\tconst uiLabelStyle = isChecked\n\t\t\t\t? 'ui-label ui-label-tag-secondary notification-label --active'\n\t\t\t\t: 'ui-label ui-label-tag-light ui-label-fill notification-label'\n\t\t\t;\n\n\t\t\treturn `\n\t\t\t\t<div data-hint=\"${hint}\" data-hint-no-icon class=\"${uiLabelStyle}\">\n\t\t\t\t\t<div class=\"ui-label-status\"></div>\n\t\t\t\t\t<span class=\"ui-label-inner\">${text}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\t},\n};\n","import { NotificationChannel } from 'booking.const';\n\nexport const NotificationCardMixin = {\n\tmethods: {\n\t\tgetMessageTemplate(messenger: string): string\n\t\t{\n\t\t\tswitch (messenger)\n\t\t\t{\n\t\t\t\tcase NotificationChannel.WhatsApp:\n\t\t\t\t\treturn this.template?.text || '';\n\t\t\t\tcase NotificationChannel.Sms:\n\t\t\t\t\treturn this.template?.textSms || '';\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\t// set settings from resource type for new resource\n\t\tif (!this.resource.id)\n\t\t{\n\t\t\tthis.updateResource({\n\t\t\t\tisConfirmationNotificationOn: this.resourceType.isConfirmationNotificationOn,\n\t\t\t\tisFeedbackNotificationOn: this.resourceType.isFeedbackNotificationOn,\n\t\t\t\tisInfoNotificationOn: this.resourceType.isInfoNotificationOn,\n\t\t\t\tisDelayedNotificationOn: this.resourceType.isDelayedNotificationOn,\n\t\t\t\tisReminderNotificationOn: this.resourceType.isReminderNotificationOn,\n\t\t\t\ttemplateTypeConfirmation: this.resourceType.templateTypeConfirmation,\n\t\t\t\ttemplateTypeFeedback: this.resourceType.templateTypeFeedback,\n\t\t\t\ttemplateTypeInfo: this.resourceType.templateTypeInfo,\n\t\t\t\ttemplateTypeDelayed: this.resourceType.templateTypeDelayed,\n\t\t\t\ttemplateTypeReminder: this.resourceType.templateTypeReminder,\n\t\t\t});\n\t\t}\n\t},\n\tcomputed: {\n\t\tisCheckedForAll: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCheckedForAllLocal;\n\t\t\t},\n\t\t\tset(isChecked: boolean)\n\t\t\t{\n\t\t\t\tthis.isCheckedForAllLocal = isChecked;\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t},\n};\n","import { Text } from 'main.core';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.crm';\nimport 'ui.hint';\n\nimport { Switcher } from 'booking.component.switcher';\nimport { NotificationChannel } from 'booking.const';\nimport { ChannelMenu } from '../channel-menu/channel-menu';\n\ntype Messenger = $Values<NotificationChannel>;\n\nexport const ResourceNotification = {\n\tname: 'ResourceNotification',\n\temits: ['update:checked'],\n\tdirectives: { hint },\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tview: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\thideSwitcher: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisableSwitcher: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): { messenger: Messenger }\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t};\n\t},\n\tcomponents: {\n\t\tUiSwitcher: Switcher,\n\t\tChannelMenu,\n\t\tIcon,\n\t},\n\tcreated(): void\n\t{\n\t\tthis.hintManager = BX.UI.Hint.createInstance({\n\t\t\tid: this.containerId,\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t},\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\t},\n\tupdated(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\t},\n\tcomputed: {\n\t\tcontainerId(): string\n\t\t{\n\t\t\treturn `brwc-resource-notification-container-${Text.getRandom(5)}`;\n\t\t},\n\t\ttemplateHeader(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_TEXT');\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleChannelChange(selectedChannel: string): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { [this.templateTypeField]: selectedType });\n\t\t},\n\t\tgetChooseTemplateButton(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.chooseTemplateBtn || null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-notification\">\n\t\t\t<div class=\"resource-creation-wizard__form-notification-info\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row\">\n\t\t\t\t\t<Icon :name=\"IconSet.CHAT_LINE\" :class=\"{'--disabled': !checked}\"/>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-title\"\n\t\t\t\t\t\t:class=\"{'--disabled': !checked}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"!hideSwitcher\"\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-switcher\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<UiSwitcher\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-notification-info-switcher-' + view\"\n\t\t\t\t\t\t\t:model-value=\"checked\"\n\t\t\t\t\t\t\t:disabled=\"disableSwitcher\"\n\t\t\t\t\t\t\t@update:model-value=\"$emit('update:checked', $event)\"\n\t\t\t\t\t\t\tv-hint=\"disableSwitcher && soonHint\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification__info-text-row-message-text\">\n\t\t\t\t\t\t{{ templateHeader }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@update:value=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<slot name=\"notification-template\" :messenger=\"messenger\"/>\n\t\t\t</div>\n\t\t\t<slot/>\n\t\t</div>\n\t`,\n};\n","export const ResourceNotificationTextRow = {\n\tname: 'ResourceNotificationTextRow',\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<div :class=\"[icon, 'ui-icon-set', 'resource-creation-wizard__form-notification-text-row-icon']\"></div>\n\t\t\t<slot />\n\t\t</div>\n\t`,\n};\n","export const ResourceNotificationCheckBoxRow = {\n\tname: 'ResourceNotificationCheckBoxRow',\n\temits: ['update:checked'],\n\tprops: {\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<div :class=\"['resource-creation-wizard__form-notification-text-row-checkbox']\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:checked=\"checked\"\n\t\t\t\t\t@input=\"$emit('update:checked', $event.target.checked)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<slot />\n\t\t</div>\n\t`,\n};\n","import './template-empty.css';\n\nexport const TemplateEmpty = {\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-message-template-empty\">\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-icon\"></div>\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-text\">\n\t\t\t\t{{ loc('BRCW_MESSAGE_TEMPLATE_SOON_TEXT') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { Model, AhaMoment, HelpDesk } from 'booking.const';\nimport { ahaMoments } from 'booking.lib.aha-moments';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { replaceLabelMixin } from '../label/label';\nimport { NotificationCardMixin } from '../notification-card-mixin';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { ResourceNotificationCheckBoxRow } from '../layout/resource-notification-checkbox-row';\nimport { TemplateEmpty } from '../template-empty/template-empty';\n\nexport const BaseInfo = {\n\tname: 'ResourceNotificationCardBaseInfo',\n\tprops: {\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [replaceLabelMixin, NotificationCardMixin],\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tResourceNotificationCheckBoxRow,\n\t\tChooseTemplatePopup,\n\t\tButton,\n\t\tTemplateEmpty,\n\t},\n\tdata(): { isCheckedForAllLocal: boolean, originalValue: boolean, selectedTemplateType: string }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tisCheckedForAllLocal: true,\n\t\t\toriginalValue: this.resourceType.isInfoNotificationOn,\n\t\t\toriginalTemplateType: this.resourceType.templateTypeInfo,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tif (ahaMoments.shouldShow(AhaMoment.MessageTemplate))\n\t\t{\n\t\t\tsetTimeout(() => this.showAhaMoment(), 500);\n\t\t}\n\n\t\tif (!this.template)\n\t\t{\n\t\t\tconsole.warn('Notification template not found');\n\t\t\tthis.isInfoNotificationOn = false;\n\t\t}\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\tModel.ResourceCreationWizard,\n\t\t\t['updateResource'],\n\t\t),\n\t\tupdateResourceType(): void\n\t\t{\n\t\t\tconst checked = this.isCheckedForAll\n\t\t\t\t? this.isInfoNotificationOn\n\t\t\t\t: this.originalValue\n\t\t\t;\n\n\t\t\tconst templateType = this.isCheckedForAll\n\t\t\t\t? this.resource.templateTypeInfo\n\t\t\t\t: this.originalTemplateType\n\t\t\t;\n\n\t\t\tconst resourceType = this.resourceType;\n\t\t\tthis.$store.dispatch('resourceTypes/upsert', {\n\t\t\t\t...resourceType,\n\t\t\t\tisInfoNotificationOn: checked,\n\t\t\t\ttemplateTypeInfo: templateType,\n\t\t\t});\n\t\t},\n\t\tchooseTemplate()\n\t\t{\n\t\t\tthis.showTemplatePopup = true;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tthis.updateResource({ templateTypeInfo: selectedType });\n\t\t\tthis.updateResourceType();\n\t\t},\n\t\tasync showAhaMoment(): Promise<void>\n\t\t{\n\t\t\tawait ahaMoments.showGuide({\n\t\t\t\tid: 'booking-message-template',\n\t\t\t\ttitle: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TITLE'),\n\t\t\t\ttext: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TEXT'),\n\t\t\t\tarticle: HelpDesk.AhaMessageTemplate,\n\t\t\t\ttarget: this.$refs.chooseTemplateButton.$el,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t});\n\n\t\t\tahaMoments.setShown(AhaMoment.MessageTemplate);\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceNotificationInfo.code,\n\t\t\t\tHelpDesk.ResourceNotificationInfo.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisInfoNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isInfoNotificationOn;\n\t\t\t},\n\t\t\tset(isInfoNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tthis.updateResource({ isInfoNotificationOn });\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t\tresourceNotificationTitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_BASE_INFO_TITLE');\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\treturn this.model.templates.find((template) => template.type === this.resource.templateTypeInfo);\n\t\t},\n\t\tlocInfoTimeSend(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst immediately = this.loc('BRCW_NOTIFICATION_CARD_LABEL_IMMEDIATELY');\n\t\t\tconst replacements = {\n\t\t\t\t'#time#': this.getLabel(immediately, this.isInfoNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_SECOND', replacements);\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationInfo;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync showAhaMoment(): Promise<void>\n\t\t{\n\t\t\tconst target = this.$refs.card.getChooseTemplateButton();\n\t\t\tif (Type.isNull(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait ahaMoments.showGuide({\n\t\t\t\tid: 'booking-message-template',\n\t\t\t\ttitle: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TITLE'),\n\t\t\t\ttext: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TEXT'),\n\t\t\t\tarticle: HelpDesk.AhaMessageTemplate,\n\t\t\t\ttarget: this.$refs.card.getChooseTemplateButton(),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t});\n\n\t\t\tahaMoments.setShown(AhaMoment.MessageTemplate);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isInfoNotificationOn\"\n\t\t\t:view=\"'base-info'\"\n\t\t\t:title=\"resourceNotificationTitle\"\n\t\t\t:disableSwitcher=\"!isCurrentSenderAvailable || !template\"\n\t\t>\n\t\t\t<template #notification-template=\"{ messenger }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\tv-html=\"getMessageTemplate(messenger)\"\n\t\t\t\t></div>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template-choose-buttons\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tref=\"chooseTemplateButton\"\n\t\t\t\t\t\t\t:disabled=\"!isInfoNotificationOn\"\n\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"chooseTemplate\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource.templateTypeInfo\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_FIRST') }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-text --more\"\n\t\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MORE') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locInfoTimeSend\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationCheckBoxRow \n\t\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t\t:disabled=\"!isInfoNotificationOn\"\n\t\t\t>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationCheckBoxRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\nimport 'ui.label';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { ResourceNotificationCheckBoxRow } from '../layout/resource-notification-checkbox-row';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { NotificationCardMixin } from '../notification-card-mixin';\nimport { TemplateEmpty } from '../template-empty/template-empty';\n\nexport const Confirmation = {\n\tname: 'ResourceNotificationCardConfirmation',\n\tmixins: [replaceLabelMixin, NotificationCardMixin],\n\tprops: {\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): { isCheckedForAllLocal: boolean, originalValue: boolean, originalTemplateType: string }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tisCheckedForAllLocal: true,\n\t\t\toriginalValue: this.resourceType.isConfirmationNotificationOn,\n\t\t\toriginalTemplateType: this.resourceType.templateTypeConfirmation,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisConfirmationNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isConfirmationNotificationOn;\n\t\t\t},\n\t\t\tset(isConfirmationNotificationOn: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isConfirmationNotificationOn });\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t\tlocSendMessageBefore(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst daysBefore = this.loc('BRCW_NOTIFICATION_CARD_LABEL_DAYS_BEFORE');\n\t\t\tconst replacements = {\n\t\t\t\t'#days_before#': this.getLabel(daysBefore, this.isConfirmationNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_SECOND', replacements);\n\t\t},\n\t\tlocRetryMessage(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst times = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIMES');\n\t\t\tconst timeDelay = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIME_DELAY');\n\t\t\tconst replacements = {\n\t\t\t\t'#times#': this.getLabel(times, this.isConfirmationNotificationOn, hint),\n\t\t\t\t'#time_delay#': this.getLabel(timeDelay, this.isConfirmationNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_THIRD', replacements);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\treturn this.model.templates.find((template) => template.type === this.resource.templateTypeConfirmation);\n\t\t},\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t['updateResource'],\n\t\t),\n\t\tupdateResourceType(): void\n\t\t{\n\t\t\tconst checked = this.isCheckedForAll\n\t\t\t\t? this.isConfirmationNotificationOn\n\t\t\t\t: this.originalValue\n\t\t\t;\n\n\t\t\tconst templateType = this.isCheckedForAll\n\t\t\t\t? this.resource.templateTypeConfirmation\n\t\t\t\t: this.originalTemplateType\n\t\t\t;\n\n\t\t\tconst resourceType = this.resourceType;\n\t\t\tthis.$store.dispatch('resourceTypes/upsert', {\n\t\t\t\t...resourceType,\n\t\t\t\tisConfirmationNotificationOn: checked,\n\t\t\t\ttemplateTypeConfirmation: templateType,\n\t\t\t});\n\t\t},\n\t\tchooseTemplate()\n\t\t{\n\t\t\tthis.showTemplatePopup = true;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tthis.updateResource({ templateTypeConfirmation: selectedType });\n\t\t\tthis.updateResourceType();\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceNotificationConfirmation.code,\n\t\t\t\tHelpDesk.ResourceNotificationConfirmation.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (!this.template)\n\t\t{\n\t\t\tconsole.warn('Notification template not found');\n\t\t\tthis.isConfirmationNotificationOn = false;\n\t\t}\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tResourceNotificationCheckBoxRow,\n\t\tChooseTemplatePopup,\n\t\tButton,\n\t\tTemplateEmpty,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification \n\t\t\tv-model:checked=\"isConfirmationNotificationOn\"\n\t\t\t:view=\"'confirmation'\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_TITLE')\"\n\t\t\t:disableSwitcher=\"!isCurrentSenderAvailable || !template\"\n\t\t>\n\t\t\t<template #notification-template=\"{ messenger }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\tv-html=\"getMessageTemplate(messenger)\"\n\t\t\t\t></div>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template-choose-buttons\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:disabled=\"!isConfirmationNotificationOn\"\n\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"chooseTemplate\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource.templateTypeConfirmation\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_FIRST') }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-text --more\"\n\t\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MORE') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendMessageBefore\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--undo-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locRetryMessage\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationCheckBoxRow \n\t\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t\t:disabled=\"!isConfirmationNotificationOn\"\n\t\t\t>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationCheckBoxRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationCheckBoxRow } from '../layout/resource-notification-checkbox-row';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { replaceLabelMixin } from '../label/label';\nimport { NotificationCardMixin } from '../notification-card-mixin';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { TemplateEmpty } from '../template-empty/template-empty';\n\nexport const Reminder = {\n\tname: 'ResourceNotificationCardReminder',\n\tmixins: [replaceLabelMixin, NotificationCardMixin],\n\tprops: {\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): { isCheckedForAllLocal: boolean, originalValue: boolean, originalTemplateType: string }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tisCheckedForAllLocal: true,\n\t\t\toriginalValue: this.resourceType.isReminderNotificationOn,\n\t\t\toriginalTemplateType: this.resourceType.templateTypeReminder,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisReminderNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isReminderNotificationOn;\n\t\t\t},\n\t\t\tset(isReminderNotificationOn: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isReminderNotificationOn });\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t\tlocSendReminderTime(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst chooseTime = this.loc('BRCW_NOTIFICATION_CARD_LABEL_CHOOSE_TIME');\n\t\t\tconst replacements = {\n\t\t\t\t'#time#': this.getLabel(chooseTime, this.isReminderNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_SECOND', replacements);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\treturn this.model.templates.find((template) => template.type === this.resource.templateTypeReminder);\n\t\t},\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t['updateResource'],\n\t\t),\n\t\tupdateResourceType(): void\n\t\t{\n\t\t\tconst checked = this.isCheckedForAll\n\t\t\t\t? this.isReminderNotificationOn\n\t\t\t\t: this.originalValue\n\t\t\t;\n\n\t\t\tconst templateType = this.isCheckedForAll\n\t\t\t\t? this.resource.templateTypeReminder\n\t\t\t\t: this.originalTemplateType\n\t\t\t;\n\n\t\t\tconst resourceType = this.resourceType;\n\t\t\tthis.$store.dispatch('resourceTypes/upsert', {\n\t\t\t\t...resourceType,\n\t\t\t\tisReminderNotificationOn: checked,\n\t\t\t\ttemplateTypeReminder: templateType,\n\t\t\t});\n\t\t},\n\t\tchooseTemplate()\n\t\t{\n\t\t\tthis.showTemplatePopup = true;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tthis.updateResource({ templateTypeReminder: selectedType });\n\t\t\tthis.updateResourceType();\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceNotificationReminder.code,\n\t\t\t\tHelpDesk.ResourceNotificationReminder.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (!this.template)\n\t\t{\n\t\t\tconsole.warn('Notification template not found');\n\t\t\tthis.isReminderNotificationOn = false;\n\t\t}\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tResourceNotificationCheckBoxRow,\n\t\tChooseTemplatePopup,\n\t\tButton,\n\t\tTemplateEmpty,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isReminderNotificationOn\"\n\t\t\t:view=\"'reminder'\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_TITLE')\"\n\t\t\t:disableSwitcher=\"!isCurrentSenderAvailable || !template\"\n\t\t>\n\t\t\t<template #notification-template=\"{ messenger }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\tv-html=\"getMessageTemplate(messenger)\"\n\t\t\t\t></div>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable && model.templates.length > 1\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template-choose-buttons\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:disabled=\"!isReminderNotificationOn\"\n\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"chooseTemplate\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource.templateTypeReminder\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_FIRST') }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-text --more\"\n\t\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MORE') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendReminderTime\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationCheckBoxRow\n\t\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t\t:disabled=\"!isReminderNotificationOn\"\n\t\t\t>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationCheckBoxRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationCheckBoxRow } from '../layout/resource-notification-checkbox-row';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { NotificationCardMixin } from '../notification-card-mixin';\nimport { TemplateEmpty } from '../template-empty/template-empty';\n\nexport const Feedback = {\n\tname: 'ResourceNotificationCardFeedback',\n\tmixins: [replaceLabelMixin, NotificationCardMixin],\n\tprops: {\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tResourceNotificationCheckBoxRow,\n\t\tChooseTemplatePopup,\n\t\tButton,\n\t\tTemplateEmpty,\n\t},\n\tdata(): { isCheckedForAllLocal: boolean, originalValue: boolean }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tisCheckedForAllLocal: true,\n\t\t\toriginalValue: this.resourceType.isFeedbackNotificationOn,\n\t\t\toriginalTemplateType: this.resourceType.templateTypeFeedback,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t['updateResource'],\n\t\t),\n\t\tupdateResourceType(): void\n\t\t{\n\t\t\tconst checked = this.isCheckedForAll\n\t\t\t\t? this.isFeedbackNotificationOn\n\t\t\t\t: this.originalValue\n\t\t\t;\n\n\t\t\tconst templateType = this.isCheckedForAll\n\t\t\t\t? this.resource.templateTypeFeedback\n\t\t\t\t: this.originalTemplateType\n\t\t\t;\n\n\t\t\tconst resourceType = this.resourceType;\n\t\t\tthis.$store.dispatch('resourceTypes/upsert', {\n\t\t\t\t...resourceType,\n\t\t\t\tisFeedbackNotificationOn: checked,\n\t\t\t\ttemplateTypeFeedback: templateType,\n\t\t\t});\n\t\t},\n\t\tchooseTemplate()\n\t\t{\n\t\t\tthis.showTemplatePopup = true;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tthis.updateResource({ templateTypeFeedback: selectedType });\n\t\t\tthis.updateResourceType();\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceNotificationFeedback.code,\n\t\t\t\tHelpDesk.ResourceNotificationFeedback.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisFeedbackNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t\t// return this.resource.isFeedbackNotificationOn;\n\t\t\t},\n\t\t\tset(isFeedbackNotificationOn: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isFeedbackNotificationOn });\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t\tlocSendFeedbackTime(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst immediately = this.loc('BRCW_NOTIFICATION_CARD_LABEL_IMMEDIATELY');\n\t\t\tconst replacements = {\n\t\t\t\t'#time#': this.getLabel(immediately, this.isFeedbackNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_SECOND', replacements);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\treturn this.model.templates.find((template) => template.type === this.resource.templateTypeFeedback);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isFeedbackNotificationOn\"\n\t\t\t:view=\"'feedback'\"\n\t\t\t:disableSwitcher=\"true\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_TITLE')\"\n\t\t>\n\t\t\t<template #notification-template=\"{ messenger }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\tv-html=\"getMessageTemplate(messenger)\"\n\t\t\t\t></div>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template-choose-buttons\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:disabled=\"!isFeedbackNotificationOn\"\n\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"chooseTemplate\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource.templateTypeFeedback\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_FIRST') }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-text --more\"\n\t\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MORE') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendFeedbackTime\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationCheckBoxRow \n\t\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t\t:disabled=\"!isFeedbackNotificationOn\"\n\t\t\t>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationCheckBoxRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters, mapMutations } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { HelpDesk, Model } from 'booking.const';\nimport { helpDesk } from 'booking.lib.help-desk';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { replaceLabelMixin } from '../label/label';\nimport { NotificationCardMixin } from '../notification-card-mixin';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { ResourceNotificationCheckBoxRow } from '../layout/resource-notification-checkbox-row';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { TemplateEmpty } from '../template-empty/template-empty';\n\nexport const Late = {\n\tname: 'ResourceNotificationCardLate',\n\tprops: {\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmixins: [replaceLabelMixin, NotificationCardMixin],\n\tdata(): { isCheckedForAllLocal: boolean, originalValue: boolean }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tisCheckedForAllLocal: true,\n\t\t\toriginalValue: this.resourceType.isDelayedNotificationOn,\n\t\t\toriginalTemplateType: this.resourceType.templateTypeDelayed,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisDelayedNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isDelayedNotificationOn;\n\t\t\t},\n\t\t\tset(isDelayedNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tthis.updateResource({ isDelayedNotificationOn });\n\t\t\t\tthis.updateResourceType();\n\t\t\t},\n\t\t},\n\t\tresourceNotificationTitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_TITLE');\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\treturn this.model.templates.find((template) => template.type === this.resource.templateTypeDelayed);\n\t\t},\n\t\tlocSendMessageAfter(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst minutes = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIME_AFTER_MINUTES');\n\t\t\tconst replacements = {\n\t\t\t\t'#time#': this.getLabel(minutes, this.isDelayedNotificationOn, hint),\n\t\t\t};\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_SECOND', replacements);\n\t\t},\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t['updateResource'],\n\t\t),\n\t\tupdateResourceType(): void\n\t\t{\n\t\t\tconst checked = this.isCheckedForAll\n\t\t\t\t? this.isDelayedNotificationOn\n\t\t\t\t: this.originalValue\n\t\t\t;\n\n\t\t\tconst templateType = this.isCheckedForAll\n\t\t\t\t? this.resource.templateTypeDelayed\n\t\t\t\t: this.originalTemplateType\n\t\t\t;\n\n\t\t\tconst resourceType = this.resourceType;\n\t\t\tthis.$store.dispatch('resourceTypes/upsert', {\n\t\t\t\t...resourceType,\n\t\t\t\tisDelayedNotificationOn: checked,\n\t\t\t\ttemplateTypeDelayed: templateType,\n\t\t\t});\n\t\t},\n\t\tchooseTemplate()\n\t\t{\n\t\t\tthis.showTemplatePopup = true;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tthis.updateResource({ templateTypeDelayed: selectedType });\n\t\t\tthis.updateResourceType();\n\t\t},\n\t\tshowHelpDesk(): void\n\t\t{\n\t\t\thelpDesk.show(\n\t\t\t\tHelpDesk.ResourceNotificationLate.code,\n\t\t\t\tHelpDesk.ResourceNotificationLate.anchorCode,\n\t\t\t);\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (!this.template)\n\t\t{\n\t\t\tconsole.warn('Notification template not found');\n\t\t\tthis.isDelayedNotificationOn = false;\n\t\t}\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t\tResourceNotificationCheckBoxRow,\n\t\tChooseTemplatePopup,\n\t\tButton,\n\t\tTemplateEmpty,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isDelayedNotificationOn\"\n\t\t\t:view=\"'late'\"\n\t\t\t:title=\"resourceNotificationTitle\"\n\t\t\t:disableSwitcher=\"!isCurrentSenderAvailable || !template\"\n\t\t>\n\t\t\t<template #notification-template=\"{ messenger }\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\tv-html=\"getMessageTemplate(messenger)\"\n\t\t\t\t></div>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"isCurrentSenderAvailable\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template-choose-buttons\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t:disabled=\"!isDelayedNotificationOn\"\n\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t@click=\"chooseTemplate\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource.templateTypeDelayed\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</template>\n\n\t\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_FIRST') }}\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-text --more\"\n\t\t\t\t\t\t\t@click=\"showHelpDesk\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MORE') }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendMessageAfter\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationCheckBoxRow\n\t\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t\t:disabled=\"!isDelayedNotificationOn\"\n\t\t\t>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t\t</div>\n\t\t\t</ResourceNotificationCheckBoxRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.design-tokens';\nimport 'ui.icon-set.main';\nimport { mapGetters, mapMutations } from 'ui.vue3.vuex';\n\nimport { Model } from 'booking.const';\nimport type { NotificationsModel } from 'booking.model.notifications';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\nimport { BaseInfo } from './base-info/base-info';\nimport { Confirmation } from './confirmation/confirmation';\nimport { Reminder } from './reminder/reminder';\nimport { Feedback } from './feedback/feedback';\nimport { Late } from './late/late';\n\nimport './resource-notification-card.css';\n\nexport const ResourceNotificationCard = {\n\tname: 'ResourceNotificationCard',\n\tcomponents: {\n\t\tBaseInfo,\n\t\tConfirmation,\n\t\tReminder,\n\t\tLate,\n\t\tFeedback,\n\t},\n\tmethods: {\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t['updateResource'],\n\t\t),\n\t},\n\tcomputed: {\n\t\tnotificationViews(): { view: string, model: NotificationsModel }[]\n\t\t{\n\t\t\treturn this.notifications.map((notificationsModel: NotificationsModel) => {\n\t\t\t\tswitch (notificationsModel.type)\n\t\t\t\t{\n\t\t\t\t\tcase this.dictionary.Info.value:\n\t\t\t\t\t\treturn { view: 'BaseInfo', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Confirmation.value:\n\t\t\t\t\t\treturn { view: 'Confirmation', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Reminder.value:\n\t\t\t\t\t\treturn { view: 'Reminder', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Delayed.value:\n\t\t\t\t\t\treturn { view: 'Late', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Feedback.value:\n\t\t\t\t\t\treturn { view: 'Feedback', model: notificationsModel };\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t...mapGetters({\n\t\t\tnotifications: `${Model.Notifications}/get`,\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t}),\n\t\tresourceType(): ResourceTypeModel\n\t\t{\n\t\t\treturn this.$store.getters['resourceTypes/getById'](this.resource.typeId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-notification-card\">\n\t\t\t<slot v-for=\"notification of notificationViews\" :key=\"notification.view\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"notification.view\"\n\t\t\t\t\t:model=\"notification.model\"\n\t\t\t\t\t:resourceType=\"this.resourceType\"\n\t\t\t\t\t:data-id=\"'brcw-resource-notification-view-' + notification.view\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t</div>\n\t`,\n};\n","import { mapState, mapGetters, mapActions, mapMutations } from 'ui.vue3.vuex';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { ResourceCreationWizardLayout } from './layout/layout';\nimport { ResourceCreationWizardHeader } from './header/header';\nimport { ResourceCreationWizardFooter } from './footer/footer';\nimport { ResourceCategoryCard } from './resource-category-card/resource-category-card';\nimport { ResourceSettingsCard } from './resource-settings-card/resource-settings-card';\nimport { ResourceNotificationCard } from './resource-notification-card/resource-notification-card';\n\nexport const App = {\n\tname: 'ResourceCreationWizardApp',\n\tcomponents: {\n\t\tResourceCreationWizardLayout,\n\t\tResourceCreationWizardHeader,\n\t\tResourceCreationWizardFooter,\n\t\tResourceCategoryCard,\n\t\tResourceSettingsCard,\n\t\tResourceNotificationCard,\n\t},\n\tdata(): { init: boolean }\n\t{\n\t\treturn {\n\t\t\tinit: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tstep: (state) => state['resource-creation-wizard'].step,\n\t\t\tfetching: (state) => state['resource-creation-wizard'].fetching,\n\t\t}),\n\t\t...mapGetters('resource-creation-wizard', [\n\t\t\t'invalidCurrentCard',\n\t\t\t'resourceId',\n\t\t]),\n\t\tcurrentView(): string\n\t\t{\n\t\t\tconst step = this.step || 1;\n\n\t\t\tswitch (step)\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ResourceSettingsCard';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ResourceNotificationCard';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ResourceCategoryCard';\n\t\t\t}\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resourceId !== null;\n\t\t},\n\t},\n\tasync beforeMount()\n\t{\n\t\tawait this.initApp();\n\t},\n\tmethods: {\n\t\t...mapActions(\n\t\t\t'resource-creation-wizard',\n\t\t\t['initState'],\n\t\t),\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t[\n\t\t\t\t'prevStep',\n\t\t\t\t'updateFetching',\n\t\t\t\t'setGlobalSchedule',\n\t\t\t],\n\t\t),\n\t\tasync initApp()\n\t\t{\n\t\t\tawait this.initState();\n\t\t\tawait this.loadWizardData();\n\t\t\tthis.init = false;\n\t\t},\n\t\tasync loadWizardData()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.updateFetching(true);\n\t\t\t\tawait resourceCreationWizardService.fetchData();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('Loading wizard data error', error);\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.updateFetching(false);\n\t\t\t\tif (!this.isEditForm)\n\t\t\t\t{\n\t\t\t\t\tthis.setGlobalSchedule(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div id=\"booking-resource-creation-wizard\">\n\t\t\t<ResourceCreationWizardLayout :loading=\"fetching\" :step>\n\t\t\t\t<template #header>\n\t\t\t\t\t<ResourceCreationWizardHeader/>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"!init\">\n\t\t\t\t\t<component :is=\"currentView\"/>\n\t\t\t\t</template>\n\t\t\t\t<template #footer>\n\t\t\t\t\t<ResourceCreationWizardFooter :step/>\n\t\t\t\t</template>\n\t\t\t</ResourceCreationWizardLayout>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { BitrixVue } from 'ui.vue3';\nimport type { VueCreateAppResult } from 'ui.vue3';\n\nimport { Core } from 'booking.core';\nimport { EventName, Model } from 'booking.const';\nimport { locMixin } from 'booking.component.mixin.loc-mixin';\nimport { Notifications } from 'booking.model.notifications';\nimport { ResourceCreationWizardModel } from 'booking.model.resource-creation-wizard';\nimport { SidePanelInstance } from 'booking.lib.side-panel-instance';\nimport { App } from './components/app';\n\ntype ResourceId = number | null;\n\nexport class ResourceCreationWizard\n{\n\tstatic #width: number = 600;\n\n\t#application: VueCreateAppResult | null = null;\n\n\tstatic #makeName(resourceId: string = 'new'): string\n\t{\n\t\treturn `booking:resource-creation-wizard:${resourceId || 'new'}`;\n\t}\n\n\t#mountContent(container: HTMLElement): void\n\t{\n\t\tconst application = BitrixVue.createApp(App, Core.getParams());\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\tasync #initCore(resourceId: ResourceId): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Core.init();\n\t\t\tawait Core.addDynamicModule(\n\t\t\t\tResourceCreationWizardModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables({ resourceId }),\n\t\t\t);\n\t\t\tawait Core.addDynamicModule(Notifications.create());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Init Resource creation wizard error', error);\n\t\t}\n\t}\n\n\t#makeContainer(): HTMLElement\n\t{\n\t\tconst container = document.createElement('div');\n\t\tcontainer.id = 'booking-resource-creation-wizard-app';\n\n\t\treturn container;\n\t}\n\n\topen(resourceId: ResourceId = null): void\n\t{\n\t\tSidePanelInstance.open(ResourceCreationWizard.#makeName(resourceId), {\n\t\t\twidth: ResourceCreationWizard.#width,\n\t\t\tcacheable: false,\n\t\t\tevents: {\n\t\t\t\tonClose: this.closeSidePanel.bind(this),\n\t\t\t},\n\t\t\tcontentCallback: async () => {\n\t\t\t\tawait this.#initCore(resourceId);\n\t\t\t\tthis.subscribe();\n\n\t\t\t\tconst container = this.#makeContainer();\n\t\t\t\tthis.#mountContent(container);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t});\n\t}\n\n\tasync closeSidePanel(): Promise<void>\n\t{\n\t\tthis.unsubscribe();\n\t\tthis.#application.unmount();\n\t\tthis.#application = null;\n\n\t\tawait Core.removeDynamicModule(Model.ResourceCreationWizard);\n\t\tawait Core.removeDynamicModule(Model.Notifications);\n\t}\n\n\tsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.subscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tunsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tclose(): void\n\t{\n\t\tSidePanelInstance.close();\n\t}\n}\n"],"names":["UiLoader","name","props","show","Boolean","data","loader","Loader","mounted","$refs","template","ResourceCreationWizardLayout","step","type","Number","required","title","String","default","loading","watch","wrapper","scrollTo","components","ResourceCreationWizardHeader","computed","$store","state","resourceName","NextButton","UiButton","Button","steps","Array","disabled","waiting","currentStep","size","ButtonSize","SMALL","color","ButtonColor","SUCCESS","BackButton","buttonSize","buttonColor","LINK","Step","constructor","hidden","store","getStore","Core","labelNext","Loc","getMessage","labelBack","next","dispatch","back","ChooseResourceStep","Event","EventEmitter","emit","EventName","CloseWizard","ResourceNotificationStep","resourceId","getters","Model","ResourceCreationWizard","id","Type","isNull","commit","isApproved","isBitrix24Approved","slotSize","resource","slotRanges","scheduleSlots","timezone","Interface","map","slotRange","resourceType","ResourceTypes","typeId","isSuccess","resourceTypeService","update","Promise","resolve","ConditionChecker","checkIsApproved","senderType","SenderTypes","bitrix24","isUpdate","result","resourceService","add","text","isArrayFilled","errors","message","Notifier","notify","bitrix24Sender","Notifications","find","sender","moduleId","Module","Crm","code","canUse","Text","getRandom","ResourceSettingsStep","ResourceCreationWizardFooter","mapGetters","isSaving","ResourceType","emits","Object","IconSet","Icon","ResourceCategoryCard","resourceTypes","advertisingResourceTypes","methods","mapMutations","loadResourceTypes","updateFetching","setTimeout","selectResourceType","relatedResourceTypeId","updateResource","showHelpDesk","helpDesk","HelpDesk","anchorCode","beforeMount","ErrorMessage","BaseFields","initialResourceName","initialResourceType","entityId","EntitySelectorEntity","typeSelectorId","typeName","get","set","$emit","invalidResourceName","invalidResourceType","errorMessage","loc","showTypeSelector","dialog","getTypeSelectorDialog","typeSelectorAngle","bindElement","typeSelectorDialog","Dialog","getById","setTargetNode","targetNode","width","height","enableSearch","dropdownMode","context","multiple","cacheable","entities","dynamicLoad","dynamicSearch","popupOptions","targetContainer","$root","$el","querySelector","searchOptions","allowCreateItem","footerOptions","label","events","baseEvent","searchQuery","getData","getTarget","createType","getQuery","then","updateResourceType","addItem","prepareTypeToDialog","hide","catch","selectedItem","item","getId","getTitle","sort","selected","tabs","supertitle","avatar","scrollToBaseFieldsForm","baseFieldsForm","scrollIntoView","behavior","block","invalid","TitleLayout","iconType","ScheduleItem","modelValue","itemClass","description","value","selectOption","ResourceSchedule","isSelected","toString","moreLabel","ScheduleTypes","titleIconType","COLLABORATION","items","TextLayout","mapResourceGetters","createNamespacedHelpers","WorkTimeMixin","Mon","Tue","Wed","Thu","Fri","Sat","Sun","daysLabel","created","initialDays","forEach","day","prototype","hasOwnProperty","call","formatDaysLabel","defaultString","weekDays","companyScheduleSlots","isArraysEqual","selectedDays","orderedDays","keys","daysLabelMap","sortedSelectedDays","a","b","indexOf","formattedDays","join","getDayDefaultIndex","dayKey","dayIndices","first","second","length","every","index","weekStart","filter","weekdays","format","allDays","startIndex","slice","currentDayIndex","Date","getDay","targetDayIndex","dayDifference","dayDate","setDate","getDate","DateTimeFormat","reduce","WeekDaysPopup","HTMLElement","Popup","mixins","close","click","trueKeys","key","popupId","config","offsetRight","offsetWidth","angle","bindOptions","forceBindPosition","forceLeft","WorkTimeSlotRange","isLastRange","initialSlotRange","fromId","toId","fromTs","toTs","duration","isShownDays","arrow","days","from","to","removeSlot","localSlotRange","showDays","hideDays","selectDays","timeList","MenuManager","create","now","className","autoHide","closeByEsc","onShow","getMenuItems","Dom","hasClass","getLayout","itemHeight","offset","scrollContainer","getPopupWindow","getContentContainer","topPosition","getRelativePosition","getContainer","top","scrollTop","onClose","maxHeight","minWidth","entries","generateTimeMap","minutes","parseInt","defaultClass","addMenuItem","onclick","timeMap","timeFormat","getFormat","interval","timestamp","setHours","midnightTimestamp","clickBtn","daysId","fromLabel","toLabel","WorkTimeSelector","initialSlotRanges","isGlobalSchedule","defaultSlotRange","initialTimezone","currentTimezone","isCompanyScheduleAccess","localSlotRanges","processSlotRanges","isChecked","hasTimezonesDifference","formattedInitialOffset","formattedCurrentOffset","calculateDifferenceBetweenTimezones","handler","newSlotRanges","deep","checked","openCompanyWorkTime","event","isTextClick","target","currentTarget","BX","subscribeOnce","GLOBAL_TARGET","slider","getWindow","innerBaseEvent","extraSettings","reloadAfterClose","SidePanel","Instance","open","preventDefault","updateSlotRange","addSlotRange","push","removeSlotRange","splice","getTimezoneOffset","timeZone","utcDate","toLocaleString","tzDate","getTime","initialOffset","currentOffset","formatOffset","sign","hours","Math","floor","abs","padStart","totalDifferenceMinutes","onSlotClick","companyWorkTimeOptionLabel","isSlotsDisabled","timezoneIconType","EARTH_TIME","formattedTimezonesText","replace","WorkTime","updateGlobalSchedule","getGlobalSchedule","CLOCK_2","SlotLengthPrecisionSelection","directives","hint","initialValue","distributeInitialValue","remainingMinutes","calculateTotalMinutes","totalMinutes","validateHours","isNumber","validateMinutes","handleEnterKey","blur","hourHint","minutesHint","unitDurations","Duration","getUnitDurations","units","fromEntries","unit","i","disabledLengths","Set","H","d","SlotLengthSelector","initialSelectedValue","selectedValue","selectedPrecisionValue","precisionMode","templateValues","has","select","selectPrecision","getClass","getSoonHintContent","position","offsetLeft","offsetTop","durations","SlotLength","selectedSlotLength","updateSelectedValue","GANTT_GRAPHS","mapActions","ResourceSettingsCard","getInitialSlotTimeZone","updateSlotRanges","updateResourceName","setInvalidResourceName","setInvalidResourceType","updateSlotDataForAllRanges","updateSlotLength","inputSlotRanges","setGlobalSchedule","fetchData","resourceCreationWizardService","isEditForm","isMain","ChannelMenu","currentChannel","ButtonIcon","menuPopup","channel","notificationChannelOptions","NotificationChannel","WhatsApp","Sms","unmounted","destroy","openMenu","popupWindow","isShown","menuButton","document","onDestroy","bindScrollEvent","unbindScrollEvent","bind","adjustPosition","capture","unbind","ChooseTemplatePopup","model","currentTemplateType","EXTRA_SMALL","buttonColors","BASE_LIGHT","PRIMARY","messenger","selectedTemplateType","beforeUnmount","templateTypes","Dictionary","forceTop","childNodes","animation","angleBorderRadius","padding","getFormattedTime","getMessageTemplate","templateType","templateModel","templates","textSms","handleChannelChange","selectedChannel","chooseType","selectedType","popup","getButtonText","getButtonColor","getTemplateTitle","typeDictionary","values","templateDictionary","replaceLabelMixin","getLabel","uiLabelStyle","NotificationCardMixin","isConfirmationNotificationOn","isFeedbackNotificationOn","isInfoNotificationOn","isDelayedNotificationOn","isReminderNotificationOn","templateTypeConfirmation","templateTypeFeedback","templateTypeInfo","templateTypeDelayed","templateTypeReminder","isCheckedForAll","isCheckedForAllLocal","ResourceNotification","view","hideSwitcher","disableSwitcher","UiSwitcher","Switcher","hintManager","UI","Hint","createInstance","containerId","popupParameters","init","updated","templateHeader","soonHint","handleTemplateTypeSelected","templateTypeField","getChooseTemplateButton","chooseTemplateBtn","ResourceNotificationTextRow","icon","ResourceNotificationCheckBoxRow","TemplateEmpty","BaseInfo","originalValue","originalTemplateType","showTemplatePopup","ahaMoments","shouldShow","AhaMoment","MessageTemplate","showAhaMoment","console","warn","chooseTemplate","showGuide","article","AhaMessageTemplate","chooseTemplateButton","setShown","ResourceNotificationInfo","isCurrentSenderAvailable","resourceNotificationTitle","locInfoTimeSend","immediately","replacements","card","Confirmation","locSendMessageBefore","daysBefore","locRetryMessage","times","timeDelay","ResourceNotificationConfirmation","Reminder","locSendReminderTime","chooseTime","ResourceNotificationReminder","Feedback","ResourceNotificationFeedback","locSendFeedbackTime","Late","locSendMessageAfter","ResourceNotificationLate","ResourceNotificationCard","notificationViews","notifications","notificationsModel","dictionary","Info","Delayed","App","mapState","fetching","currentView","initApp","initState","loadWizardData","error","SidePanelInstance","closeSidePanel","contentCallback","subscribe","container","unsubscribe","unmount","removeDynamicModule","application","BitrixVue","createApp","getParams","mixin","locMixin","use","mount","addDynamicModule","ResourceCreationWizardModel","setVariables","createElement"],"mappings":"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"}