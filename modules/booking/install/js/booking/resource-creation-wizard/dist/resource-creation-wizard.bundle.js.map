{"version":3,"file":"resource-creation-wizard.bundle.js","sources":["../src/components/layout/ui-loader.js","../src/components/layout/layout.js","../src/components/header/header.js","../src/components/footer/next-button.js","../src/components/footer/back-button.js","../src/presenter/step.js","../src/presenter/choose-resource-step.js","../src/presenter/resource-notification-step.js","../src/presenter/resource-settings-step.js","../src/components/footer/footer.js","../src/components/resource-category-card/resource-type/resource-type.js","../src/components/resource-category-card/resource-category-card.js","../src/components/resource-settings-card/error-message/error-message.js","../src/components/resource-settings-card/base-fields/base-fields.js","../src/components/resource-settings-card/title-layout/title-layout.js","../src/components/resource-settings-card/schedule-types/components/schedule-item.js","../src/components/resource-settings-card/schedule-types/schedule-types.js","../src/components/resource-settings-card/text-layout/text-layout.js","../src/components/resource-settings-card/work-time/work-time-mixin.js","../src/components/resource-settings-card/work-time/week-days-popup.js","../src/components/resource-settings-card/work-time/work-time-slot-range.js","../src/components/resource-settings-card/work-time/work-time-selector.js","../src/components/resource-settings-card/work-time/work-time.js","../src/components/resource-settings-card/slot-length/slot-length-precision-selection.js","../src/components/resource-settings-card/slot-length/slot-length-selector.js","../src/components/resource-settings-card/slot-length/slot-length.js","../src/components/resource-settings-card/resource-settings-card.js","../src/components/resource-notification-card/label/label.js","../src/components/resource-notification-card/channel-menu/channel-menu.js","../src/components/resource-notification-card/choose-template-popup/choose-template-popup.js","../src/components/resource-notification-card/template-empty/template-empty.js","../src/components/resource-notification-card/layout/resource-notification-checkbox-row.js","../src/components/resource-notification-card/layout/components/checked-for-all.js","../src/components/resource-notification-card/layout/resource-notification-text-row.js","../src/components/resource-notification-card/layout/components/description.js","../src/components/resource-notification-card/layout/resource-notification.js","../src/components/resource-notification-card/base-info/base-info.js","../src/components/resource-notification-card/confirmation/confirmation.js","../src/components/resource-notification-card/reminder/reminder.js","../src/components/resource-notification-card/feedback/feedback.js","../src/components/resource-notification-card/late/late.js","../src/components/resource-notification-card/resource-notification-card.js","../src/components/app.js","../src/resource-creation-wizard.js"],"sourcesContent":["import { Loader } from 'main.loader';\n\nexport const UiLoader = {\n\tname: 'UiLoader',\n\tprops: {\n\t\tshow: Boolean,\n\t},\n\tdata(): { loader: Loader }\n\t{\n\t\treturn {\n\t\t\tloader: new Loader(),\n\t\t};\n\t},\n\tmounted(): void\n\t{\n\t\tvoid this.loader.show(this.$refs.loader);\n\t},\n\ttemplate: `\n\t\t<div ref=\"loader\"></div>\n\t`,\n};\n","import { UiLoader } from './ui-loader';\nimport './resource-creation-wizard-layout.css';\n\nexport const ResourceCreationWizardLayout = {\n\tname: 'ResourceCreationWizardLayout',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tloading: Boolean,\n\t},\n\twatch: {\n\t\tstep(): void\n\t\t{\n\t\t\tthis.$refs.wrapper?.scrollTo(0, 0);\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiLoader,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard-layout\">\n\t\t\t<div ref=\"wrapper\" class=\"resource-creation-wizard__wrapper\">\n\t\t\t\t<div class=\"resource-creation-wizard__header\">\n\t\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t\t<h4 class=\"resource-creation-wizard__header-title\">\n\t\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t\t</h4>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<div v-show=\"!loading\" class=\"resource-creation-wizard__content\">\n\t\t\t\t\t<slot/>\n\t\t\t\t</div>\n\t\t\t\t<UiLoader v-if=\"loading\"/>\n\t\t\t</div>\n\t\t\t<slot name=\"footer\"/>\n\t\t</div>\n\t`,\n};\n","export const ResourceCreationWizardHeader = {\n\tname: 'ResourceCreationWizardHeader',\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.$store.state['resource-creation-wizard'].resourceName;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"resource-creation-wizard__header-title\">\n\t\t\t{{ title }}\n\t\t</span>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const NextButton = {\n\tname: 'NextButton',\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t\twaiting: Boolean,\n\t},\n\tcomputed: {\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t\tsize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\treturn ButtonColor.SUCCESS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\t:text=\"currentStep.labelNext\"\n\t\t\t:title=\"currentStep.labelNext\"\n\t\t\t:size\n\t\t\t:color\n\t\t\t:disabled\n\t\t\t:waiting\n\t\t\t@click=\"currentStep.next()\"\n\t\t/>\n\t`,\n};\n","import { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { IStep } from '../../presenter';\n\nexport const BackButton = {\n\tname: 'BackButton',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tsteps: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tbuttonSize(): string\n\t\t{\n\t\t\treturn ButtonSize.SMALL;\n\t\t},\n\t\tbuttonColor(): string\n\t\t{\n\t\t\treturn ButtonColor.LINK;\n\t\t},\n\t\tcurrentStep(): IStep\n\t\t{\n\t\t\treturn this.steps[this.step - 1];\n\t\t},\n\t},\n\tcomponents: {\n\t\tUiButton: Button,\n\t},\n\ttemplate: `\n\t\t<UiButton\n\t\t\tclass=\"resource-creation-wizard__back-button\"\n\t\t\t:text=\"currentStep.labelBack\"\n\t\t\t:title=\"currentStep.labelBack\"\n\t\t\t:size=\"buttonSize\"\n\t\t\t:color=\"buttonColor\"\n\t\t\t@click=\"currentStep.back()\"\n\t\t/>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { Core } from 'booking.core';\nimport type { IStep } from './types';\n\n/**\n * @abstract\n */\nexport class Step implements IStep\n{\n\thidden = false;\n\n\tconstructor(hidden = false)\n\t{\n\t\tthis.hidden = hidden;\n\t}\n\n\tget store(): Store\n\t{\n\t\treturn Core.getStore();\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CONTINUE');\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/nextStep');\n\t}\n\n\tasync back(): Promise<void>\n\t{\n\t\tawait this.store.dispatch('resource-creation-wizard/prevStep');\n\t}\n}\n","import { Event, Loc } from 'main.core';\nimport { EventName } from 'booking.const';\nimport { Step } from './step';\n\nexport class ChooseResourceStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper(true);\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn Loc.getMessage('BRCW_BUTTON_CANCEL');\n\t}\n\n\tnext(): Promise<void>\n\t{\n\t\treturn super.next();\n\t}\n\n\tback()\n\t{\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n}\n","import { Event, Loc, Text, Type } from 'main.core';\nimport { Notifier, NotificationOptions } from 'ui.notification-manager';\nimport { ConditionChecker, Types as SenderTypes } from 'crm.messagesender';\n\nimport { EventName, Model, NotificationFieldsMap, Module } from 'booking.const';\nimport { resourceService } from 'booking.provider.service.resources-service';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\nimport type { SlotRange, ResourceModel } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\nimport { Step } from './step';\n\nexport class ResourceNotificationStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.step = 3;\n\t}\n\n\tget #resource(): ResourceModel\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/getResource`];\n\t}\n\n\tget labelNext(): string\n\t{\n\t\treturn Type.isNull(this.#resource.id ?? null)\n\t\t\t? Loc.getMessage('BRCW_BUTTON_CREATE_RESOURCE')\n\t\t\t: Loc.getMessage('BRCW_BUTTON_UPDATE_RESOURCE');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, true);\n\n\t\tconst isApproved = await this.#isBitrix24Approved();\n\t\tif (!isApproved)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.store.getters[`${Model.ResourceCreationWizard}/isGlobalSchedule`])\n\t\t{\n\t\t\tawait this.store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tslotRanges: this.#prepareCompanySlotRanges(this.#resource),\n\t\t\t});\n\t\t}\n\n\t\tconst isSuccess = await this.#upsertResource(this.#resource);\n\t\tif (!isSuccess)\n\t\t{\n\t\t\tthis.store.commit(`${Model.ResourceCreationWizard}/setSaving`, false);\n\n\t\t\treturn;\n\t\t}\n\n\t\tawait resourceTypeService.update({\n\t\t\tid: this.#resource.typeId,\n\t\t\t...this.#prepareResourceTypeNotifications(this.#resource),\n\t\t});\n\n\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t}\n\n\t#isBitrix24Approved(): Promise<boolean>\n\t{\n\t\tif (!this.#isBitrix24SenderAvailable())\n\t\t{\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn ConditionChecker.checkIsApproved({\n\t\t\tsenderType: SenderTypes.bitrix24,\n\t\t});\n\t}\n\n\t#isBitrix24SenderAvailable(): boolean\n\t{\n\t\tconst bitrix24Sender = this.store.getters[`${Model.Notifications}/getSenders`]\n\t\t\t.find((sender) => sender.moduleId === Module.Crm && sender.code === SenderTypes.bitrix24)\n\t\t;\n\n\t\tif (!bitrix24Sender)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn bitrix24Sender.canUse;\n\t}\n\n\t#prepareCompanySlotRanges(resource: ResourceModel): SlotRange[]\n\t{\n\t\tconst slotSize = resource.slotRanges[0]?.slotSize ?? 60;\n\t\tconst scheduleSlots = this.store.getters[`${Model.ResourceCreationWizard}/getCompanyScheduleSlots`];\n\t\tconst timezone = this.store.getters[`${Model.Interface}/timezone`];\n\n\t\treturn scheduleSlots.map((slotRange: SlotRange) => ({\n\t\t\t...slotRange,\n\t\t\tslotSize,\n\t\t\ttimezone,\n\t\t}));\n\t}\n\n\t#prepareResourceTypeNotifications(resource: ResourceModel): Partial<ResourceTypeModel>\n\t{\n\t\tconst resourceType = this.store.getters[`${Model.ResourceTypes}/getById`](resource.typeId);\n\n\t\treturn Object.values(this.store.getters[`${Model.Dictionary}/getNotifications`])\n\t\t\t.map(({ value }) => value)\n\t\t\t.reduce((acc: Object, type: string) => {\n\t\t\t\tconst notificationOnField = NotificationFieldsMap.NotificationOn[type];\n\t\t\t\tconst templateTypeField = NotificationFieldsMap.TemplateType[type];\n\n\t\t\t\tconst isCheckedForAll = this.store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](type);\n\n\t\t\t\treturn {\n\t\t\t\t\t...acc,\n\t\t\t\t\t[notificationOnField]: isCheckedForAll ? resource[notificationOnField] : resourceType[notificationOnField],\n\t\t\t\t\t[templateTypeField]: isCheckedForAll ? resource[templateTypeField] : resourceType[templateTypeField],\n\t\t\t\t};\n\t\t\t}, {})\n\t\t;\n\t}\n\n\tasync #upsertResource(resource: ResourceModel): Promise<boolean>\n\t{\n\t\tconst isUpdate = Boolean(resource.id);\n\t\tconst result = await (isUpdate ? resourceService.update(resource) : resourceService.add(resource));\n\n\t\tlet text = Loc.getMessage(isUpdate ? 'BRCW_UPDATE_SUCCESS_MESSAGE' : 'BRCW_CREATE_SUCCESS_MESSAGE');\n\t\tif (Type.isArrayFilled(result.errors))\n\t\t{\n\t\t\ttext = result.errors[0].message;\n\t\t}\n\n\t\tNotifier.notify(this.#prepareNotificationOptions(text));\n\n\t\treturn !Type.isArrayFilled(result.errors);\n\t}\n\n\t#prepareNotificationOptions(text: string): NotificationOptions\n\t{\n\t\treturn {\n\t\t\tid: Text.getRandom(),\n\t\t\ttext,\n\t\t};\n\t}\n}\n","import { Event, Loc, Type } from 'main.core';\nimport { EventName, Model } from 'booking.const';\nimport { Step } from './step';\n\nexport class ResourceSettingsStep extends Step\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.step = 2;\n\t}\n\n\tget #isFirstStep(): boolean\n\t{\n\t\treturn this.store.getters[`${Model.ResourceCreationWizard}/startStep`] === this.step;\n\t}\n\n\tget labelBack(): string\n\t{\n\t\treturn this.#isFirstStep ? super.labelBack : Loc.getMessage('BRCW_BUTTON_BACK');\n\t}\n\n\tasync next(): Promise<void>\n\t{\n\t\tconst store = this.store;\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.name)\n\t\t{\n\t\t\tif (!Type.isNull(store.state[Model.ResourceCreationWizard].resourceId))\n\t\t\t{\n\t\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceName`, true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\tname: Loc.getMessage('BRCW_DEFAULT_RESOURCE_NAME'),\n\t\t\t});\n\t\t}\n\n\t\tif (!store.state[Model.ResourceCreationWizard].resource.typeId)\n\t\t{\n\t\t\tawait store.dispatch(`${Model.ResourceCreationWizard}/setInvalidResourceType`, true);\n\n\t\t\treturn;\n\t\t}\n\n\t\treturn super.next();\n\t}\n\n\tasync back()\n\t{\n\t\tif (this.#isFirstStep)\n\t\t{\n\t\t\tEvent.EventEmitter.emit(EventName.CloseWizard);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tawait super.back();\n\t\t}\n\t}\n}\n","import { mapGetters } from 'ui.vue3.vuex';\nimport { Model } from 'booking.const';\nimport { NextButton } from './next-button';\nimport { BackButton } from './back-button';\nimport { ChooseResourceStep, ResourceNotificationStep, ResourceSettingsStep } from '../../presenter';\nimport './footer.css';\n\nexport const ResourceCreationWizardFooter = {\n\tname: 'ResourceCreationWizardFooter',\n\tprops: {\n\t\tstep: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: Boolean,\n\t},\n\tdata(): Object {\n\t\treturn {\n\t\t\tsteps: [\n\t\t\t\tnew ChooseResourceStep(),\n\t\t\t\tnew ResourceSettingsStep(),\n\t\t\t\tnew ResourceNotificationStep(),\n\t\t\t],\n\t\t};\n\t},\n\tcomputed: mapGetters({\n\t\tisSaving: `${Model.ResourceCreationWizard}/isSaving`,\n\t}),\n\tcomponents: {\n\t\tBackButton,\n\t\tNextButton,\n\t},\n\ttemplate: `\n\t\t<div v-if=\"!steps[step - 1].hidden\" class=\"resource-creation-wizard__footer\">\n\t\t\t<NextButton :step :steps :disabled :waiting=\"isSaving\"/>\n\t\t\t<BackButton :step :steps :disabled=\"isSaving\"/>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.actions';\n\nimport './resource-type.css';\n\nexport const ResourceType = {\n\tname: 'ResourceType',\n\temits: ['selected'],\n\tprops: {\n\t\tresourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t};\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--resource-type-item\" @click=\"$emit('selected', resourceType)\">\n\t\t\t<div class=\"rcw__resource-type\">\n\t\t\t\t<div :class=\"['booking--rcw--resource-type__icon', 'booking--rcw--resource-type__icon--' + resourceType.code]\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"rcw__resource-type__row\">\n\t\t\t\t\t<div class=\"rcw__resource-type__label\">\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-title\">{{ resourceType.name }}</div>\n\t\t\t\t\t\t<div class=\"rcw__resource-type__label-description\">{{ resourceType.description }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Icon :name=\"IconSet.ARROW_RIGHT\"/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk, Model } from 'booking.const';\nimport type { ResourceCreationType } from 'booking.model.resource-creation-wizard';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\n\nimport { ResourceType } from './resource-type/resource-type';\nimport './resource-category-card.css';\n\nexport const ResourceCategoryCard = {\n\tname: 'ResourceCategoryCard',\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceType.code,\n\t\t\tanchorCode: HelpDesk.ResourceType.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceTypes(): ResourceCreationType[]\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].advertisingResourceTypes;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync selectResourceType({ relatedResourceTypeId }: ResourceCreationType): Promise<void>\n\t\t{\n\t\t\tawait this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, {\n\t\t\t\ttypeId: relatedResourceTypeId,\n\t\t\t});\n\n\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/nextStep`);\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceType,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-category-card\">\n\t\t\t<div class=\"resource-category-card__header\">\n\t\t\t\t<div class=\"resource-category-card__header__title\">\n\t\t\t\t\t{{ loc('BRCW_CHOOSE_CATEGORY') }}\n\t\t\t\t</div>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"loc('BRCW_CHOOSE_CATEGORY_DESCRIPTION_MSGVER_1')\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"resource-category-card__content resource-creation-wizard__form\">\n\t\t\t\t<ResourceType\n\t\t\t\t\tv-for=\"resourceType in resourceTypes\"\n\t\t\t\t\t:key=\"resourceType.code\"\n\t\t\t\t\t:resource-type\n\t\t\t\t\t:data-id=\"'brcw-resource-type-list-' + resourceType.code\"\n\t\t\t\t\t@selected=\"selectResourceType\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './error-message.css';\n\nexport const ErrorMessage = {\n\tname: 'ErrorMessage',\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"booking--rcw--error-message-container\">\n\t\t\t<div class=\"booking--rcw--error-message\">\n\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t<span>{{ message }}</span>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog, ItemOptions } from 'ui.entity-selector';\n\nimport { EntitySelectorEntity, Model } from 'booking.const';\nimport { ResourceTypeModel } from 'booking.model.resource-types';\nimport { resourceTypeService } from 'booking.provider.service.resources-type-service';\n\nimport { ErrorMessage } from '../error-message/error-message';\nimport './base-fields.css';\n\nexport const BaseFields = {\n\tname: 'ResourceSettingsCardBaseFields',\n\temits: [\n\t\t'nameUpdate',\n\t\t'typeUpdate',\n\t],\n\tprops: {\n\t\tinitialResourceName: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tinitialResourceType: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tentityId: EntitySelectorEntity.ResourceType,\n\t\t\ttypeSelectorId: `booking-resource-creation-types${Text.getRandom()}`,\n\t\t\ttypeName: this.initialResourceType.typeName,\n\t\t};\n\t},\n\tcomputed: {\n\t\tresourceName: {\n\t\t\tget(): string\n\t\t\t{\n\t\t\t\treturn this.initialResourceName;\n\t\t\t},\n\t\t\tset(name: string | null = '')\n\t\t\t{\n\t\t\t\tthis.$emit('nameUpdate', name);\n\t\t\t},\n\t\t},\n\t\tinvalidResourceName(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceName;\n\t\t},\n\t\tinvalidResourceType(): boolean\n\t\t{\n\t\t\treturn this.$store.state[Model.ResourceCreationWizard].invalidResourceType;\n\t\t},\n\t\terrorMessage(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_REQUIRED_FIELD');\n\t\t},\n\t},\n\tmethods: {\n\t\tshowTypeSelector(): void\n\t\t{\n\t\t\tconst dialog = this.getTypeSelectorDialog(this.$refs.typeSelectorAngle);\n\n\t\t\tdialog.show();\n\t\t},\n\t\tgetTypeSelectorDialog(bindElement: HTMLElement): Dialog\n\t\t{\n\t\t\tconst typeSelectorDialog = Dialog.getById(this.typeSelectorId);\n\n\t\t\tif (typeSelectorDialog)\n\t\t\t{\n\t\t\t\ttypeSelectorDialog.setTargetNode(bindElement);\n\n\t\t\t\treturn typeSelectorDialog;\n\t\t\t}\n\n\t\t\treturn new Dialog({\n\t\t\t\tid: this.typeSelectorId,\n\t\t\t\ttargetNode: bindElement,\n\t\t\t\twidth: 300,\n\t\t\t\theight: 400,\n\t\t\t\tenableSearch: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcontext: 'bookingResourceCreationType',\n\t\t\t\tmultiple: false,\n\t\t\t\tcacheable: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: this.entityId,\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_CREATE_BTN'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Search:onItemCreateAsync': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst { searchQuery } = baseEvent.getData();\n\t\t\t\t\t\t\tconst dialog: Dialog = baseEvent.getTarget();\n\n\t\t\t\t\t\t\tthis.createType(searchQuery.getQuery())\n\t\t\t\t\t\t\t\t.then((resourceType: ResourceTypeModel) => {\n\t\t\t\t\t\t\t\t\tthis.updateResourceType(resourceType.id, resourceType.name);\n\t\t\t\t\t\t\t\t\tdialog.addItem(this.prepareTypeToDialog(resourceType));\n\t\t\t\t\t\t\t\t\tdialog.hide();\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onSelect': (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst selectedItem = baseEvent.getData().item;\n\t\t\t\t\t\tthis.updateResourceType(selectedItem.getId(), selectedItem.getTitle());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tasync createType(typeName: string): Promise<ResourceTypeModel>\n\t\t{\n\t\t\treturn resourceTypeService.add({\n\t\t\t\tmoduleId: 'booking',\n\t\t\t\tname: typeName,\n\t\t\t});\n\t\t},\n\t\tprepareTypeToDialog(type: ResourceTypeModel): ItemOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: type.id,\n\t\t\t\tentityId: this.entityId,\n\t\t\t\ttitle: type.name,\n\t\t\t\tsort: 1,\n\t\t\t\tselected: true,\n\t\t\t\ttabs: 'recents',\n\t\t\t\tsupertitle: this.loc('BRCW_SETTINGS_CARD_TYPE_SELECTOR_SUPER_TITLE'),\n\t\t\t\tavatar: '/bitrix/js/booking/images/entity-selector/resource-type.svg',\n\t\t\t};\n\t\t},\n\t\tupdateResourceType(typeId: number, typeName: string): void\n\t\t{\n\t\t\tthis.typeName = typeName;\n\n\t\t\tthis.$emit('typeUpdate', typeId);\n\t\t},\n\t\tscrollToBaseFieldsForm(): void\n\t\t{\n\t\t\tthis.$refs.baseFieldsForm?.scrollIntoView(true, {\n\t\t\t\tbehavior: 'smooth',\n\t\t\t\tblock: 'center',\n\t\t\t});\n\t\t},\n\t},\n\twatch: {\n\t\tinvalidResourceName(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t\tinvalidResourceType(invalid: boolean): void\n\t\t{\n\t\t\tif (invalid)\n\t\t\t{\n\t\t\t\tthis.scrollToBaseFieldsForm();\n\t\t\t}\n\t\t},\n\t},\n\tcomponents: {\n\t\tErrorMessage,\n\t},\n\ttemplate: `\n\t\t<div ref=\"baseFieldsForm\" class=\"ui-form resource-creation-wizard__form-settings --base\">\n\t\t\t<div class=\"ui-form-row-inline booking--rcw--form-row-align\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<label class=\"ui-ctl-label-text\" for=\"brcw-settings-resource-name\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_NAME_LABEL') }}\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tv-model.trim=\"resourceName\"\n\t\t\t\t\t\t\t\tid=\"brcw-settings-resource-name\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-name-input\"\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t:class=\"{ '--error': invalidResourceName }\"\n\t\t\t\t\t\t\t\t:placeholder=\"this.loc('BRCW_SETTINGS_CARD_NAME_PLACEHOLDER')\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceName\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_LABEL') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-content booking--rcw--field-with-validation\">\n\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorAngle\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tref=\"typeSelectorElement\"\n\t\t\t\t\t\t\t\tdata-id=\"brcw-settings-resource-type-selector\"\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-element resource-creation-wizard__form-settings-element\"\n\t\t\t\t\t\t\t\t:class=\"{\n\t\t\t\t\t\t\t\t\t'--placeholder': !typeName,\n\t\t\t\t\t\t\t\t\t'--error': invalidResourceType,\n\t\t\t\t\t\t\t\t}\"\n\t\t\t\t\t\t\t\t@click=\"showTypeSelector\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<template v-if=\"typeName\">\n\t\t\t\t\t\t\t\t\t{{ typeName }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_TYPE_PLACEHOLDER') }}\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorMessage\n\t\t\t\t\t\t\tv-if=\"invalidResourceType\"\n\t\t\t\t\t\t\t:message=\"errorMessage\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport './title-layout.css';\n\nexport const TitleLayout = {\n\tname: 'ResourceSettingsCardTitleLayout',\n\tprops: {\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ticonType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-title-row\">\n\t\t\t<Icon\n\t\t\t\t:name=\"iconType\"\n\t\t\t\t:color=\"'var(--ui-color-primary)'\"\n\t\t\t\t:size=\"24\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-title\">\n\t\t\t\t{{ title }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\n\nexport const ScheduleItem = {\n\tname: 'ScheduleItem',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\titemClass: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tvalue: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk.ResourceSchedule.code,\n\t\t\tanchorCode: HelpDesk.ResourceSchedule.anchorCode,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisSelected(): boolean\n\t\t{\n\t\t\treturn this.modelValue.toString() === this.value.toString();\n\t\t},\n\t},\n\tmethods: {\n\t\tselectOption()\n\t\t{\n\t\t\tthis.$emit('update:model-value', this.value);\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\t:class=\"['booking--rcw--schedule-item', { '--selected': isSelected }]\"\n\t\t\t@click=\"selectOption\"\n\t\t>\n\t\t\t<div class=\"booking--rcw--schedule-item-radio ui-ctl-radio\">\n\t\t\t\t<input\n\t\t\t\t\t:id=\"itemClass\"\n\t\t\t\t\t:checked=\"isSelected\"\n\t\t\t\t\t:value=\"value.toString()\"\n\t\t\t\t\ttype=\"radio\"\n\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t@input=\"$emit('update:model-value', $event.target.value === 'true')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-text\">\n\t\t\t\t<label\n\t\t\t\t\t:for=\"itemClass\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-title\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</label>\n\t\t\t\t<HelpDeskLoc\n\t\t\t\t\t:message=\"description\"\n\t\t\t\t\t:code=\"code\"\n\t\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\t\tclass=\"booking--rcw--schedule-item-text-description\"\n\t\t\t\t\tlink-class=\"booking--rcw--more booking--rcw--schedule-item-text-description-more\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"booking--rcw--schedule-item-view\" :class=\"itemClass\"></div>\n\t\t</div>\n\t`,\n};\n\nexport type IScheduleItem = {\n\titemClass: string;\n\ttitle: string;\n\tdescription: string;\n\tvalue: boolean;\n}\n","import { Loc } from 'main.core';\nimport { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { ScheduleItem } from './components/schedule-item';\nimport type { IScheduleItem } from './components/schedule-item';\n\nimport './schedule-types.css';\n\nexport const ScheduleTypes = {\n\tname: 'ResourceSettingsCardScheduleTypes',\n\temits: ['update:model-value'],\n\tprops: {\n\t\tmodelValue: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tsetup(): { title: string, titleIconType: string, items: IScheduleItem[] }\n\t{\n\t\tconst title = Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_TITLE');\n\t\tconst titleIconType = IconSet.COLLABORATION;\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tid: 'common',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-common',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_TITLE'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_COLUMNS_DESCRIPTION_MSGVER_1'),\n\t\t\t\tvalue: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'extra',\n\t\t\t\titemClass: 'resource-creation-wizard__form-settings-schedule-view-extra',\n\t\t\t\ttitle: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_TITLE'),\n\t\t\t\tdescription: Loc.getMessage('BRCW_SETTINGS_CARD_SCHEDULE_CROSS_RESOURCING_DESCRIPTION_MSGVER_1'),\n\t\t\t\tvalue: false,\n\t\t\t},\n\t\t];\n\n\t\treturn {\n\t\t\titems,\n\t\t\ttitle,\n\t\t\ttitleIconType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tScheduleItem,\n\t\tTitleLayout,\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings --schedule\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<div class=\"resource-creation-wizard__form-settings-schedule-view\">\n\t\t\t\t<ScheduleItem\n\t\t\t\t\tv-for=\"item in items\"\n\t\t\t\t\t:key=\"item.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-schedule-view-' + item.id\"\n\t\t\t\t\t:model-value=\"modelValue\"\n\t\t\t\t\t:item-class=\"item.itemClass\"\n\t\t\t\t\t:title=\"item.title\"\n\t\t\t\t\t:description=\"item.description\"\n\t\t\t\t\t:value=\"item.value\"\n\t\t\t\t\t@update:model-value=\"$emit('update:model-value', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { HelpDesk } from 'booking.const';\nimport { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport './text-layout.css';\n\nexport const TextLayout = {\n\tname: 'ResourceSettingsCardTextLayout',\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props): { code: string, anchorCode: string }\n\t{\n\t\treturn {\n\t\t\tcode: HelpDesk[`Resource${props.type}`].code,\n\t\t\tanchorCode: HelpDesk[`Resource${props.type}`].anchorCode,\n\t\t};\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-settings-text-row\">\n\t\t\t<HelpDeskLoc\n\t\t\t\t:message=\"text\"\n\t\t\t\t:code=\"code\"\n\t\t\t\t:anchor=\"anchorCode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-settings-text\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers } from 'ui.vue3.vuex';\nimport { DateTimeFormat } from 'main.date';\n\nconst { mapGetters: mapResourceGetters } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const WorkTimeMixin = {\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselected: {\n\t\t\t\tMon: false,\n\t\t\t\tTue: false,\n\t\t\t\tWed: false,\n\t\t\t\tThu: false,\n\t\t\t\tFri: false,\n\t\t\t\tSat: false,\n\t\t\t\tSun: false,\n\t\t\t},\n\t\t\tdaysLabel: '',\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.initialDays.forEach((day) => {\n\t\t\tif (Object.prototype.hasOwnProperty.call(this.selected, day))\n\t\t\t{\n\t\t\t\tthis.selected[day] = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.daysLabel = this.formatDaysLabel();\n\t},\n\tmethods: {\n\t\tformatDaysLabel(): string\n\t\t{\n\t\t\tconst defaultString = this.loc('BRCW_SETTINGS_CARD_WORK_TIME_DAYS');\n\n\t\t\tconst weekDays = this.companyScheduleSlots[0].weekDays;\n\t\t\tif (this.isArraysEqual(this.selectedDays, weekDays))\n\t\t\t{\n\t\t\t\treturn defaultString;\n\t\t\t}\n\n\t\t\tconst orderedDays = Object.keys(this.daysLabelMap);\n\n\t\t\tconst sortedSelectedDays = this.selectedDays.sort((a, b) => {\n\t\t\t\treturn orderedDays.indexOf(a) - orderedDays.indexOf(b);\n\t\t\t});\n\t\t\tconst formattedDays = sortedSelectedDays.map((day) => this.daysLabelMap[day]);\n\n\t\t\treturn String(formattedDays.join(', '));\n\t\t},\n\t\tgetDayDefaultIndex(dayKey): number\n\t\t{\n\t\t\tconst dayIndices = {\n\t\t\t\tSun: 0,\n\t\t\t\tMon: 1,\n\t\t\t\tTue: 2,\n\t\t\t\tWed: 3,\n\t\t\t\tThu: 4,\n\t\t\t\tFri: 5,\n\t\t\t\tSat: 6,\n\t\t\t};\n\n\t\t\treturn dayIndices[dayKey];\n\t\t},\n\t\tisArraysEqual(first: [], second: []): boolean\n\t\t{\n\t\t\treturn first.length === second.length && first.every((value, index) => value === second[index]);\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapResourceGetters({\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tweekStart: 'weekStart',\n\t\t}),\n\t\tselectedDays(): Array\n\t\t{\n\t\t\treturn Object.keys(this.selected).filter((day) => this.selected[day]);\n\t\t},\n\t\tdaysLabelMap(): Object\n\t\t{\n\t\t\tconst weekdays = [];\n\t\t\tconst format = 'D';\n\n\t\t\tconst allDays = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\n\n\t\t\tconst startIndex = allDays.indexOf(this.weekStart);\n\n\t\t\tconst orderedDays = [...allDays.slice(startIndex), ...allDays.slice(0, startIndex)];\n\n\t\t\torderedDays.forEach((dayKey, index) => {\n\t\t\t\tconst currentDayIndex = new Date().getDay();\n\t\t\t\tconst targetDayIndex = this.getDayDefaultIndex(dayKey);\n\t\t\t\tconst dayDifference = (targetDayIndex - currentDayIndex + 7) % 7;\n\n\t\t\t\tconst dayDate = new Date();\n\t\t\t\tdayDate.setDate(dayDate.getDate() + dayDifference);\n\n\t\t\t\tweekdays[index] = DateTimeFormat.format(format, dayDate);\n\t\t\t});\n\n\t\t\treturn orderedDays.reduce((result, dayKey, index) => {\n\t\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\t\tresult[dayKey] = weekdays[index];\n\n\t\t\t\treturn result;\n\t\t\t}, {});\n\t\t},\n\t},\n};\n","import { PopupOptions } from 'main.popup';\nimport { Popup } from 'booking.component.popup';\nimport { WorkTimeMixin } from './work-time-mixin';\n\nimport './week-days-popup.css';\n\nexport const WeekDaysPopup = {\n\tname: 'ResourceSettingsCardWeekDaysPopup',\n\temits: ['select', 'close'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialDays: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tmethods: {\n\t\tclose(): void\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tclick(day: string): void\n\t\t{\n\t\t\tconst trueKeys = Object.keys(this.selected).filter((key) => this.selected[key] === true);\n\n\t\t\tif (trueKeys.length === 1 && trueKeys[0] === day)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selected[day] = !this.selected[day];\n\n\t\t\tthis.$emit('select', this.selectedDays, this.formatDaysLabel());\n\t\t},\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-work-time-popup-${this.id}`;\n\t\t},\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\toffsetRight: this.bindElement.offsetWidth,\n\t\t\t\tangle: false,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"close\"\n\t\t\tref=\"popup\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup\">\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(day, index) in daysLabelMap\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-week-day-' + index + '-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-week-days-popup-weekday\"\n\t\t\t\t\t:class=\"{ '--selected': selected[index] }\"\n\t\t\t\t\t@click=\"() => click(index)\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-text\">\n\t\t\t\t\t\t{{ day }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-week-days-popup-weekday-icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import { Dom } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { MenuManager, Menu, MenuItem } from 'main.popup';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeMixin } from './work-time-mixin';\nimport { WeekDaysPopup } from './week-days-popup';\n\nimport './work-time-slot-range.css';\n\nexport const WorkTimeSlotRange = {\n\tname: 'ResourceSettingsCardWorkTimeSlotRange',\n\temits: ['add', 'update', 'remove'],\n\tprops: {\n\t\tid: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tisLastRange: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWeekDaysPopup,\n\t},\n\tmixins: [WorkTimeMixin],\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tfromId: 'from',\n\t\t\ttoId: 'to',\n\t\t\tfromTs: 0,\n\t\t\ttoTs: 0,\n\t\t\tduration: 0,\n\t\t\tisShownDays: false,\n\t\t\tarrow: {\n\t\t\t\tdays: false,\n\t\t\t\tfrom: false,\n\t\t\t\tto: false,\n\t\t\t},\n\t\t\tremoveSlot: !this.isLastRange,\n\t\t\tlocalSlotRange: { ...this.initialSlotRange },\n\t\t\tinitialDays: [...this.initialSlotRange.weekDays],\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.fromTs = this.slotRange.from;\n\t\tthis.toTs = this.slotRange.to;\n\t\tthis.duration = this.toTs - this.fromTs;\n\t},\n\twatch: {\n\t\t'slotRange.from': function(value) {\n\t\t\tthis.fromTs = value;\n\n\t\t\tthis.toTs = this.fromTs + this.duration;\n\n\t\t\tthis.update();\n\t\t},\n\t\t'slotRange.to': function(value) {\n\t\t\tthis.toTs = value;\n\n\t\t\tif (this.toTs <= this.fromTs)\n\t\t\t{\n\t\t\t\tthis.fromTs = this.toTs - this.duration;\n\t\t\t}\n\n\t\t\tthis.duration = this.toTs - this.fromTs;\n\n\t\t\tthis.update();\n\t\t},\n\t},\n\tmethods: {\n\t\tshowDays(): void\n\t\t{\n\t\t\tthis.isShownDays = true;\n\t\t\tthis.arrow.days = true;\n\t\t},\n\t\thideDays(): void\n\t\t{\n\t\t\tthis.isShownDays = false;\n\t\t\tthis.arrow.days = false;\n\t\t},\n\t\tselectDays(weekDays: Array, daysLabel: string): void\n\t\t{\n\t\t\tthis.slotRange.weekDays = weekDays;\n\n\t\t\tthis.daysLabel = daysLabel;\n\n\t\t\tthis.update();\n\t\t},\n\t\tshow(bindElement: HTMLElement, id: string): void\n\t\t{\n\t\t\tif (this.arrow[id] === true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuId = `booking-work-time-popup-${this.id}-${id}`;\n\t\t\tMenuManager.destroy(menuId);\n\n\t\t\tconst timeList: Menu = MenuManager.create({\n\t\t\t\tid: menuId,\n\t\t\t\tclassName: 'resource-creation-wizard__form-work-time-menu',\n\t\t\t\tbindElement,\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tevents: {\n\t\t\t\t\tonShow: () => {\n\t\t\t\t\t\tthis.arrow[id] = true;\n\n\t\t\t\t\t\tconst selectedItem: MenuItem = timeList.getMenuItems()\n\t\t\t\t\t\t\t.find((item: MenuItem) => Dom.hasClass(item.getLayout().item, '--selected'))\n\t\t\t\t\t\t;\n\n\t\t\t\t\t\tconst itemHeight = 36;\n\t\t\t\t\t\tconst offset = 2 * itemHeight;\n\n\t\t\t\t\t\tconst scrollContainer = timeList.getPopupWindow().getContentContainer();\n\t\t\t\t\t\tconst topPosition = Dom.getRelativePosition(selectedItem.getContainer(), scrollContainer).top;\n\n\t\t\t\t\t\tscrollContainer.scrollTo({\n\t\t\t\t\t\t\ttop: scrollContainer.scrollTop + topPosition - offset,\n\t\t\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.arrow[id] = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmaxHeight: 200,\n\t\t\t\tminWidth: bindElement.offsetWidth,\n\t\t\t});\n\n\t\t\tfor (const [key, value] of Object.entries(this.generateTimeMap(id)))\n\t\t\t{\n\t\t\t\tconst minutes = parseInt(key, 10);\n\t\t\t\tconst defaultClass = 'menu-popup-item menu-popup-no-icon';\n\n\t\t\t\ttimeList.addMenuItem({\n\t\t\t\t\ttext: value,\n\t\t\t\t\tclassName: this.slotRange[id] === minutes ? `${defaultClass} --selected` : defaultClass,\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tminutes,\n\t\t\t\t\t},\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.slotRange[id] = parseInt(minutes, 10);\n\t\t\t\t\t\ttimeList.close();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\ttimeList.show();\n\t\t},\n\t\tgenerateTimeMap(id: string): Object\n\t\t{\n\t\t\tconst timeMap = {};\n\n\t\t\tconst timeFormat = DateTimeFormat.getFormat('SHORT_TIME_FORMAT');\n\n\t\t\tconst interval = 30;\n\t\t\tconst from = (id === this.toId ? this.fromTs + interval : 0);\n\t\t\tconst to = (id === this.fromId ? this.toTs : 1440);\n\t\t\tfor (let minutes = from; minutes < to; minutes += interval)\n\t\t\t{\n\t\t\t\tconst timestamp = new Date().setHours(0, minutes, 0, 0) / 1000;\n\t\t\t\ttimeMap[minutes] = DateTimeFormat.format(timeFormat, timestamp);\n\t\t\t}\n\n\t\t\tif (id === this.toId)\n\t\t\t{\n\t\t\t\tconst midnightTimestamp = new Date().setHours(0, 0, 0, 0) / 1000;\n\t\t\t\ttimeMap[to] = DateTimeFormat.format(timeFormat, midnightTimestamp);\n\t\t\t}\n\n\t\t\treturn timeMap;\n\t\t},\n\t\tclickBtn(): void\n\t\t{\n\t\t\tif (this.removeSlot === false)\n\t\t\t{\n\t\t\t\tthis.removeSlot = true;\n\n\t\t\t\tthis.$emit('add');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.removeSlot = false;\n\n\t\t\t\tthis.$emit('remove', this.id);\n\t\t\t}\n\t\t},\n\t\tupdate(): void\n\t\t{\n\t\t\tthis.$emit('update', this.id, this.slotRange);\n\t\t},\n\t},\n\tcomputed: {\n\t\tdaysId(): string\n\t\t{\n\t\t\treturn `days-${this.id}`;\n\t\t},\n\t\tdays(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.days;\n\t\t},\n\t\tslotRange(): SlotRange\n\t\t{\n\t\t\treturn this.localSlotRange;\n\t\t},\n\t\tfromLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.fromId);\n\n\t\t\treturn timeMap[this.slotRange.from];\n\t\t},\n\t\ttoLabel(): string\n\t\t{\n\t\t\tconst timeMap = this.generateTimeMap(this.toId);\n\n\t\t\treturn timeMap[this.slotRange.to];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form-content resource-creation-wizard__form-work-time-selector-widget\">\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-days\">\n\t\t\t\t<div\n\t\t\t\t\tref=\"days\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-days-' + id\"\n\t\t\t\t\tclass=\"rcw-ui-ctl ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t@click=\"showDays\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t:class=\"{ '--active': arrow.days }\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"ui-ctl-element\">\n\t\t\t\t\t\t{{ daysLabel }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<WeekDaysPopup\n\t\t\t\t\t\tv-if=\"isShownDays\"\n\t\t\t\t\t\t:id=\"daysId\"\n\t\t\t\t\t\t:bindElement=\"days\"\n\t\t\t\t\t\t:initialDays=\"slotRange.weekDays\"\n\t\t\t\t\t\t@select=\"selectDays\"\n\t\t\t\t\t\t@close=\"hideDays\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-widget-time\">\n\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"from\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-from-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.from, fromId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.from }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ fromLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-dash\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tref=\"to\"\n\t\t\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-to-' + id\"\n\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t@click=\"() => show($refs.to, toId)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass=\"ui-ctl-after ui-ctl-icon-angle\"\n\t\t\t\t\t\t\t\t:class=\"{ '--active': arrow.to }\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl-element\">{{ toLabel }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-form-row resource-creation-wizard__form-work-time-selector-btn-row\">\n\t\t\t\t<div\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-range-add-' + id\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-btn\"\n\t\t\t\t\t:class=\"{ '--remove': removeSlot }\"\n\t\t\t\t\t@click=\"clickBtn\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport { Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport type { SlotRange } from 'booking.model.resources';\nimport { WorkTimeSlotRange } from './work-time-slot-range';\n\nimport './work-time-selector.css';\n\nexport const WorkTimeSelector = {\n\tname: 'ResourceSettingsCardWorkTimeSelector',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tWorkTimeSlotRange,\n\t\tIcon,\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tlocalSlotRanges: this.processSlotRanges(this.initialSlotRanges),\n\t\t\tisChecked: this.isGlobalSchedule,\n\t\t\thasTimezonesDifference: false,\n\t\t\tformattedInitialOffset: '',\n\t\t\tformattedCurrentOffset: '',\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tthis.calculateDifferenceBetweenTimezones(this.initialTimezone, this.currentTimezone);\n\t},\n\twatch: {\n\t\tinitialSlotRanges: {\n\t\t\thandler(newSlotRanges)\n\t\t\t{\n\t\t\t\tthis.localSlotRanges = this.processSlotRanges(newSlotRanges);\n\t\t\t},\n\t\t\tdeep: true,\n\t\t},\n\t\tisChecked(checked): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t},\n\tmethods: {\n\t\topenCompanyWorkTime(event): void\n\t\t{\n\t\t\tconst isTextClick = event.target === event.currentTarget;\n\t\t\tif (!isTextClick && this.isCompanyScheduleAccess)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\ttop.BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'SidePanel.Slider:onLoad',\n\t\t\t\t\t(baseEvent: BaseEvent) => {\n\t\t\t\t\t\tconst slider = baseEvent.getTarget();\n\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.subscribeOnce(\n\t\t\t\t\t\t\tslider.getWindow().BX.Event.EventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onSuccessSave',\n\t\t\t\t\t\t\t(innerBaseEvent: BaseEvent) => {\n\t\t\t\t\t\t\t\tconst extraSettings = innerBaseEvent.getData();\n\t\t\t\t\t\t\t\textraSettings.reloadAfterClose = false;\n\n\t\t\t\t\t\t\t\tthis.$emit('getGlobalSchedule');\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t'/settings/configs/?page=schedule',\n\t\t\t\t\t{ cacheable: false },\n\t\t\t\t);\n\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t},\n\t\tupdateSlotRange(index: number, slotRange: SlotRange): void\n\t\t{\n\t\t\tthis.slotRanges[index] = slotRange;\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\taddSlotRange(): void\n\t\t{\n\t\t\tthis.slotRanges.push(this.defaultSlotRange);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tremoveSlotRange(index: number): void\n\t\t{\n\t\t\tthis.slotRanges.splice(index, 1);\n\n\t\t\tthis.$emit('update', this.slotRanges);\n\t\t},\n\t\tprocessSlotRanges(slotRanges): SlotRange[]\n\t\t{\n\t\t\treturn slotRanges.map((slotRange) => {\n\t\t\t\tif (slotRange.id === null)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...slotRange,\n\t\t\t\t\t\tid: Text.getRandom(),\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn slotRange;\n\t\t\t});\n\t\t},\n\t\tgetTimezoneOffset(timeZone: string): number\n\t\t{\n\t\t\tconst now = new Date();\n\t\t\tconst utcDate = new Date(now.toLocaleString('en-US', { timeZone: 'UTC' }));\n\t\t\tconst tzDate = new Date(now.toLocaleString('en-US', { timeZone }));\n\n\t\t\treturn (utcDate.getTime() - tzDate.getTime()) / (1000 * 60);\n\t\t},\n\t\tcalculateDifferenceBetweenTimezones(initialTimezone: string, currentTimezone: string): void\n\t\t{\n\t\t\tconst initialOffset = this.getTimezoneOffset(initialTimezone);\n\t\t\tconst currentOffset = this.getTimezoneOffset(currentTimezone);\n\n\t\t\tthis.hasTimezonesDifference = initialOffset !== currentOffset;\n\n\t\t\tif (this.hasTimezonesDifference)\n\t\t\t{\n\t\t\t\tconst formatOffset = (offset) => {\n\t\t\t\t\tconst sign = offset >= 0 ? '+' : '-';\n\t\t\t\t\tconst hours = Math.floor(Math.abs(offset) / 60);\n\t\t\t\t\tconst minutes = Math.abs(offset) % 60;\n\n\t\t\t\t\treturn `${sign}${hours}:${minutes.toString().padStart(2, '0')}`;\n\t\t\t\t};\n\n\t\t\t\tthis.formattedInitialOffset = `UTC ${formatOffset(-initialOffset)} ${initialTimezone}`;\n\n\t\t\t\tconst totalDifferenceMinutes = currentOffset - initialOffset;\n\n\t\t\t\tthis.formattedCurrentOffset = formatOffset(totalDifferenceMinutes);\n\t\t\t}\n\t\t},\n\t\tonSlotClick(): void\n\t\t{\n\t\t\tthis.isChecked = false;\n\t\t},\n\t},\n\tcomputed: {\n\t\tcompanyWorkTimeOptionLabel(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_COMPANY_OPTION');\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.localSlotRanges;\n\t\t},\n\t\tisSlotsDisabled(): boolean\n\t\t{\n\t\t\treturn this.isChecked;\n\t\t},\n\t\ttimezoneIconType(): string\n\t\t{\n\t\t\treturn IconSet.EARTH_TIME;\n\t\t},\n\t\tformattedTimezonesText(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TIMEZONES')\n\t\t\t\t.replace('#utc#', this.formattedInitialOffset)\n\t\t\t\t.replace('#difference#', this.formattedCurrentOffset);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-work-time-selector\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<label\n\t\t\t\t\t\tfor=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-checkbox\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tid=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\tdata-id=\"brcw-settings-work-time-company-option\"\n\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\tv-model=\"isChecked\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass=\"ui-ctl-label-text work-time-selector-label-text\"\n\t\t\t\t\t\t\t:class=\"{'--disabled': !isCompanyScheduleAccess }\"\n\t\t\t\t\t\t\t@click=\"openCompanyWorkTime\"\n\t\t\t\t\t\t\tv-html=\"companyWorkTimeOptionLabel\"\n\t\t\t\t\t\t></span>\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots\"\n\t\t\t\t:class=\"{'--disabled': isSlotsDisabled }\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(slotRange, index) in slotRanges\"\n\t\t\t\t\t:key=\"slotRange.id\"\n\t\t\t\t\t:data-id=\"'brcw-resource-work-time-slot-' + slotRange.id\"\n\t\t\t\t\tclass=\"ui-form-row-inline\"\n\t\t\t\t\t@click=\"onSlotClick\"\n\t\t\t\t>\n\t\t\t\t\t<WorkTimeSlotRange\n\t\t\t\t\t\t:id=\"index\"\n\t\t\t\t\t\t:initialSlotRange=\"slotRange\"\n\t\t\t\t\t\t:isLastRange=\"index === slotRanges.length - 1\"\n\t\t\t\t\t\t@add=\"addSlotRange\"\n\t\t\t\t\t\t@update=\"updateSlotRange\"\n\t\t\t\t\t\t@remove=\"removeSlotRange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"hasTimezonesDifference\"\n\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-work-time-selector-slots-timezone-icon\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:name=\"timezoneIconType\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-50)'\"\n\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-work-time-selector-slots-timezone-text\"\n\t\t\t\t\t\tv-html=\"formattedTimezonesText\"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport type { SlotRange } from 'booking.model.resources';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { WorkTimeSelector } from './work-time-selector';\n\nexport const WorkTime = {\n\tname: 'ResourceSettingsCardWorkTime',\n\temits: [\n\t\t'update',\n\t\t'updateGlobalSchedule',\n\t\t'getGlobalSchedule',\n\t],\n\tprops: {\n\t\tinitialSlotRanges: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tisGlobalSchedule: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdefaultSlotRange: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tinitialTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTimezone: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisCompanyScheduleAccess: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tWorkTimeSelector,\n\t},\n\tmethods: {\n\t\tupdate(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.$emit('update', slotRanges);\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.$emit('updateGlobalSchedule', checked);\n\t\t},\n\t\tgetGlobalSchedule(): void\n\t\t{\n\t\t\tthis.$emit('getGlobalSchedule');\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_WORK_TIME_TITLE');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.CLOCK_2;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"WorkTime\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_WORK_TIME_TEXT_MSGVER_1')\"\n\t\t\t/>\n\t\t\t<WorkTimeSelector\n\t\t\t\t:initialSlotRanges=\"initialSlotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"currentTimezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t@update=\"update\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"getGlobalSchedule\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport { Type } from 'main.core';\nimport 'ui.layout-form';\nimport './slot-length-precision-selection.css';\n\nexport const SlotLengthPrecisionSelection = {\n\tname: 'ResourceSettingsCardSlotLengthSlotLengthPrecisionSelection',\n\tdirectives: { hint },\n\temits: ['input'],\n\tcomponents: {},\n\tprops: {\n\t\tinitialValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tdays: 0,\n\t\t\thours: 0,\n\t\t\tminutes: 0,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.distributeInitialValue();\n\t},\n\tmethods: {\n\t\tdistributeInitialValue(): void\n\t\t{\n\t\t\tlet remainingMinutes = this.initialValue;\n\n\t\t\tthis.days = Math.floor(remainingMinutes / (24 * 60));\n\t\t\tremainingMinutes %= 24 * 60;\n\n\t\t\tthis.hours = Math.floor(remainingMinutes / 60);\n\t\t\tremainingMinutes %= 60;\n\n\t\t\tthis.minutes = remainingMinutes;\n\t\t},\n\t\tcalculateTotalMinutes()\n\t\t{\n\t\t\tconst totalMinutes = this.days * 24 * 60 + this.hours * 60 + this.minutes;\n\n\t\t\tthis.$emit('input', totalMinutes);\n\t\t},\n\t\tvalidateHours()\n\t\t{\n\t\t\tthis.hours = parseInt(this.hours, 10);\n\n\t\t\tif (!Type.isNumber(this.hours))\n\t\t\t{\n\t\t\t\tthis.hours = 0;\n\t\t\t}\n\n\t\t\tif (this.hours > 12)\n\t\t\t{\n\t\t\t\tthis.hours = 12;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\tvalidateMinutes()\n\t\t{\n\t\t\tthis.minutes = parseInt(this.minutes, 10);\n\n\t\t\tif (!Type.isNumber(this.minutes))\n\t\t\t{\n\t\t\t\tthis.minutes = 0;\n\t\t\t}\n\n\t\t\tif (this.minutes > 59)\n\t\t\t{\n\t\t\t\tthis.minutes = 59;\n\t\t\t}\n\n\t\t\tthis.calculateTotalMinutes();\n\t\t},\n\t\thandleEnterKey(event)\n\t\t{\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tevent.target.blur();\n\t\t\t}\n\t\t},\n\t},\n\tcomputed: {\n\t\thourHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_HOUR'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tminutesHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_LIMIT_MINUTES'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-slot-length-precision-selection\">\n\t\t\t<div class=\"ui-form-row-inline\">\n\t\t\t\t<div class=\"ui-form-row --disabled\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-days'\"\n\t\t\t\t\t\t\t\t\tv-model=\"days\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_1') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"hourHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-hours'\"\n\t\t\t\t\t\t\t\t\tv-model=\"hours\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateHours\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_2') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"ui-ctl ui-ctl-time ui-ctl-sm ui-ctl-round\"\n\t\t\t\t\t\t\t\tv-hint=\"minutesHint\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t:data-id=\"'brcw-resource-slot-length-precision-minutes'\"\n\t\t\t\t\t\t\t\t\tv-model=\"minutes\"\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t@blur=\"validateMinutes\"\n\t\t\t\t\t\t\t\t\t@keydown=\"handleEnterKey\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-form-row\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t{{ loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_PRECISION_3') }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { hint } from 'ui.vue3.directives.hint';\nimport 'ui.buttons';\nimport { Duration } from 'booking.lib.duration';\nimport { SlotLengthPrecisionSelection } from './slot-length-precision-selection';\nimport './slot-length-selector.css';\n\nconst unitDurations = Duration.getUnitDurations();\nconst units = Object.fromEntries(\n\tObject.entries(unitDurations).map(([unit, value]) => [unit, value / unitDurations.i]),\n);\n\nconst disabledLengths = new Set([units.H * 24, units.d * 7]);\n\nexport const SlotLengthSelector = {\n\tname: 'ResourceSettingsCardSlotLengthSelector',\n\tdirectives: { hint },\n\temits: ['select'],\n\tcomponents: {\n\t\tSlotLengthPrecisionSelection,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedValue: this.initialSelectedValue,\n\t\t\tselectedPrecisionValue: this.initialSelectedValue,\n\t\t\tprecisionMode: false,\n\t\t};\n\t},\n\tcreated(): void\n\t{\n\t\tconst templateValues = new Set([\n\t\t\tunits.H,\n\t\t\tunits.H * 2,\n\t\t\tunits.H * 24,\n\t\t\tunits.d * 7,\n\t\t]);\n\n\t\tif (!templateValues.has(this.selectedValue))\n\t\t{\n\t\t\tthis.selectedValue = 0;\n\t\t\tthis.precisionMode = true;\n\t\t}\n\t},\n\tmethods: {\n\t\tselect(value: number): void\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.selectedValue = parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.precisionMode = true;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.precisionMode = false;\n\n\t\t\t\tthis.$emit('select', this.selectedValue);\n\t\t\t}\n\t\t},\n\t\tselectPrecision(value: number): void\n\t\t{\n\t\t\tthis.selectedPrecisionValue = value === 0 ? units.H : parseInt(value, 10);\n\n\t\t\tif (value === 0)\n\t\t\t{\n\t\t\t\tthis.selectedValue = units.H;\n\t\t\t\tthis.precisionMode = false;\n\t\t\t}\n\n\t\t\tthis.$emit('select', this.selectedPrecisionValue);\n\t\t},\n\t\tgetClass(value): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'ui-btn-primary': this.selectedValue === value,\n\t\t\t\t'ui-btn-light': this.selectedValue !== value,\n\t\t\t\t'ui-btn-disabled': disabledLengths.has(value),\n\t\t\t};\n\t\t},\n\t\tgetSoonHintContent(value: number): ?Object\n\t\t{\n\t\t\tif (disabledLengths.has(value))\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttext: this.loc('BRCW_SOON_HINT'),\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t},\n\t\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tcomputed: {\n\t\tdurations(): { label: string, value: number }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H).format('H'),\n\t\t\t\t\tvalue: units.H,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 2).format('H'),\n\t\t\t\t\tvalue: units.H * 2,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.H * 24).format('H'),\n\t\t\t\t\tvalue: units.H * 24,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: new Duration(unitDurations.d * 7).format('d'),\n\t\t\t\t\tvalue: units.d * 7,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_SELECTOR_CUSTOM'),\n\t\t\t\t\tvalue: 0,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-slot-length-selector\">\n\t\t\t<div\n\t\t\t\tv-for=\"(duration, index) in durations\"\n\t\t\t\t:key=\"index\"\n\t\t\t\t:data-id=\"'brcw-resource-slot-length-selector-size-' + index\"\n\t\t\t\tclass=\"ui-btn ui-btn-xs\"\n\t\t\t\t:class=\"getClass(duration.value)\"\n\t\t\t\t@click=\"select(duration.value)\"\n\t\t\t\tv-hint=\"getSoonHintContent(duration.value)\"\n\t\t\t>\n\t\t\t\t{{ duration.label }}\n\t\t\t</div>\n\t\t</div>\n\t\t<transition name=\"fade\">\n\t\t\t<div\n\t\t\t\tv-if=\"precisionMode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-slot-length-precision\"\n\t\t\t>\n\t\t\t\t<SlotLengthPrecisionSelection\n\t\t\t\t\t:initialValue=\"selectedPrecisionValue\"\n\t\t\t\t\t@input=\"selectPrecision\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</transition>\n\t`,\n};\n","import { Set as IconSet } from 'ui.icon-set.api.vue';\nimport { TextLayout } from '../text-layout/text-layout';\nimport { TitleLayout } from '../title-layout/title-layout';\nimport { SlotLengthSelector } from './slot-length-selector';\n\nexport const SlotLength = {\n\tname: 'ResourceSettingsCardSlotLength',\n\temits: ['select'],\n\tcomponents: {\n\t\tTitleLayout,\n\t\tTextLayout,\n\t\tSlotLengthSelector,\n\t},\n\tprops: {\n\t\tinitialSelectedValue: {\n\t\t\ttype: Number,\n\t\t\tdefault: 60,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: this.initialSelectedValue,\n\t\t};\n\t},\n\tmethods: {\n\t\tupdateSelectedValue(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tthis.$emit('select', value);\n\t\t},\n\t},\n\tcomputed: {\n\t\ttitle(): string\n\t\t{\n\t\t\treturn this.loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TITLE');\n\t\t},\n\t\ttitleIconType(): string\n\t\t{\n\t\t\treturn IconSet.GANTT_GRAPHS;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-settings\">\n\t\t\t<TitleLayout\n\t\t\t\t:title=\"title\"\n\t\t\t\t:iconType=\"titleIconType\"\n\t\t\t/>\n\t\t\t<TextLayout\n\t\t\t\ttype=\"SlotLength\"\n\t\t\t\t:text=\"loc('BRCW_SETTINGS_CARD_SLOT_LENGTH_TEXT_MSGVER_1')\"\n\t\t\t/>\n\t\t\t<div>\n\t\t\t\t<SlotLengthSelector\n\t\t\t\t\t:initialSelectedValue=\"initialSelectedValue\"\n\t\t\t\t\t@select=\"updateSelectedValue\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { createNamespacedHelpers, mapGetters } from 'ui.vue3.vuex';\nimport { Type } from 'main.core';\nimport { Model } from 'booking.const';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { BaseFields } from './base-fields/base-fields';\nimport { ScheduleTypes } from './schedule-types/schedule-types';\nimport { WorkTime } from './work-time/work-time';\nimport { SlotLength } from './slot-length/slot-length';\n\nimport type { SlotRange } from 'booking.model.resources';\nimport type { ResourceTypeModel } from 'booking.model.resource-types';\n\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.icon-set.main';\n\nimport './resource-settings-card.css';\n\nconst { mapGetters: mapResourceGetters, mapActions, mapMutations } = createNamespacedHelpers('resource-creation-wizard');\n\nexport const ResourceSettingsCard = {\n\tname: 'ResourceSettingsCard',\n\tcomponents: {\n\t\tBaseFields,\n\t\tScheduleTypes,\n\t\tWorkTime,\n\t\tSlotLength,\n\t},\n\tcreated(): void\n\t{\n\t\tthis.initialTimezone = this.getInitialSlotTimeZone();\n\t\tthis.selectedSlotLength = this.resource.slotRanges?.[0]?.slotSize ?? 60;\n\n\t\tconst slotRanges = (\n\t\t\tType.isArrayFilled(this.resource.slotRanges)\n\t\t\t\t? this.resource.slotRanges\n\t\t\t\t: this.companyScheduleSlots\n\t\t);\n\n\t\tthis.updateSlotRanges(slotRanges);\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tselectedSlotLength: 60,\n\t\t\tinitialTimezone: '',\n\t\t};\n\t},\n\tmethods: {\n\t\t...mapActions([\n\t\t\t'updateResource',\n\t\t\t'setInvalidResourceName',\n\t\t\t'setInvalidResourceType',\n\t\t]),\n\t\t...mapMutations([\n\t\t\t'setGlobalSchedule',\n\t\t]),\n\t\tupdateResourceName(name): void\n\t\t{\n\t\t\tthis.updateResource({ name });\n\t\t\tif (name)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceName(false);\n\t\t\t}\n\t\t},\n\t\tupdateResourceType(typeId): void\n\t\t{\n\t\t\tthis.updateResource({ typeId });\n\t\t\tif (typeId)\n\t\t\t{\n\t\t\t\tthis.setInvalidResourceType(false);\n\t\t\t}\n\t\t},\n\t\tupdateSlotRanges(slotRanges: SlotRange[]): void\n\t\t{\n\t\t\tthis.updateResource({ slotRanges: this.updateSlotDataForAllRanges(slotRanges) });\n\t\t},\n\t\tupdateSlotLength(value): void\n\t\t{\n\t\t\tthis.selectedSlotLength = value;\n\n\t\t\tif (this.resource.slotRanges.length === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.updateSlotRanges(this.resource.slotRanges);\n\t\t},\n\t\tupdateSlotDataForAllRanges(inputSlotRanges: SlotRange[]): SlotRange[]\n\t\t{\n\t\t\tconst slotRanges = inputSlotRanges || this.resource.slotRanges;\n\n\t\t\treturn slotRanges.map((slotRange: SlotRange) => {\n\t\t\t\treturn {\n\t\t\t\t\t...slotRange,\n\t\t\t\t\tslotSize: this.selectedSlotLength,\n\t\t\t\t\ttimezone: this.timezone,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tupdateGlobalSchedule(checked: boolean): void\n\t\t{\n\t\t\tthis.setGlobalSchedule(checked);\n\t\t},\n\t\tasync fetchData(): void\n\t\t{\n\t\t\tawait resourceCreationWizardService.fetchData();\n\n\t\t\tif (!this.isEditForm)\n\t\t\t{\n\t\t\t\tthis.updateSlotRanges(this.companyScheduleSlots);\n\t\t\t}\n\t\t},\n\t\tgetInitialSlotTimeZone(): string\n\t\t{\n\t\t\tconst slotRanges = this.isEditForm ? this.resource.slotRanges : this.companyScheduleSlots;\n\n\t\t\treturn slotRanges[0]?.timezone;\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttimezone: `${Model.Interface}/timezone`,\n\t\t}),\n\t\t...mapResourceGetters({\n\t\t\tresource: 'getResource',\n\t\t\tcompanyScheduleSlots: 'getCompanyScheduleSlots',\n\t\t\tisCompanyScheduleAccess: 'isCompanyScheduleAccess',\n\t\t\tisGlobalSchedule: 'isGlobalSchedule',\n\t\t}),\n\t\tresourceName(): string\n\t\t{\n\t\t\treturn this.resource.name;\n\t\t},\n\t\tresourceType(): Object\n\t\t{\n\t\t\tconst resourceType: ?ResourceTypeModel = this.$store\n\t\t\t\t.getters[`${Model.ResourceTypes}/getById`](this.resource.typeId)\n\t\t\t;\n\n\t\t\treturn {\n\t\t\t\ttypeId: this.resource.typeId,\n\t\t\t\ttypeName: resourceType?.name,\n\t\t\t};\n\t\t},\n\t\tslotRanges(): SlotRange[]\n\t\t{\n\t\t\treturn this.resource.slotRanges;\n\t\t},\n\t\tdefaultSlotRange(): SlotRange\n\t\t{\n\t\t\treturn this.companyScheduleSlots[0];\n\t\t},\n\t\tslotSize(): number\n\t\t{\n\t\t\tconst slotRange: SlotRange = this.resource.slotRanges?.[0];\n\n\t\t\treturn slotRange?.slotSize ?? 60;\n\t\t},\n\t\tisMain: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.resource.isMain;\n\t\t\t},\n\t\t\tset(isMain: boolean)\n\t\t\t{\n\t\t\t\tthis.updateResource({ isMain });\n\t\t\t},\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resource.id !== null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-settings-card\">\n\t\t\t<BaseFields\n\t\t\t\tdata-id=\"brcw-resource-settings-base\"\n\t\t\t\t:initialResourceName=\"resourceName\"\n\t\t\t\t:initialResourceType=\"resourceType\"\n\t\t\t\t@nameUpdate=\"updateResourceName\"\n\t\t\t\t@typeUpdate=\"updateResourceType\"\n\t\t\t/>\n\t\t\t<ScheduleTypes\n\t\t\t\tdata-id=\"brcw-resource-settings-schedule-types\"\n\t\t\t\tv-model=\"isMain\"\n\t\t\t/>\n\t\t\t<WorkTime\n\t\t\t\tdata-id=\"brcw-resource-settings-work-time\"\n\t\t\t\t:initialSlotRanges=\"slotRanges\"\n\t\t\t\t:defaultSlotRange=\"defaultSlotRange\"\n\t\t\t\t:isGlobalSchedule=\"isGlobalSchedule\"\n\t\t\t\t:initialTimezone=\"initialTimezone\"\n\t\t\t\t:currentTimezone=\"timezone\"\n\t\t\t\t:isCompanyScheduleAccess=\"isCompanyScheduleAccess\"\n\t\t\t\t@update=\"updateSlotRanges\"\n\t\t\t\t@updateGlobalSchedule=\"updateGlobalSchedule\"\n\t\t\t\t@getGlobalSchedule=\"fetchData\"\n\t\t\t/>\n\t\t\t<SlotLength\n\t\t\t\tdata-id=\"brcw-resource-settings-slot-length\"\n\t\t\t\t:initialSelectedValue=\"slotSize\"\n\t\t\t\t@select=\"updateSlotLength\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import 'ui.label';\n\nexport const replaceLabelMixin = {\n\tmethods: {\n\t\tgetLabel(text: string, isChecked: boolean, hint: string = ''): string\n\t\t{\n\t\t\tconst uiLabelStyle = isChecked\n\t\t\t\t? 'ui-label ui-label-tag-secondary notification-label --active'\n\t\t\t\t: 'ui-label ui-label-tag-light ui-label-fill notification-label'\n\t\t\t;\n\n\t\t\treturn `\n\t\t\t\t<div data-hint=\"${hint}\" data-hint-no-icon class=\"${uiLabelStyle}\">\n\t\t\t\t\t<div class=\"ui-label-status\"></div>\n\t\t\t\t\t<span class=\"ui-label-inner\">${text}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t},\n\t},\n};\n","import { Event } from 'main.core';\nimport { MenuManager, Menu } from 'main.popup';\nimport { BIcon as Icon } from 'ui.icon-set.api.vue';\nimport { NotificationChannel } from 'booking.const';\nimport { ButtonSize, ButtonColor, ButtonIcon } from 'booking.component.button';\n\nimport './channel-menu.css';\n\nexport const ChannelMenu = {\n\tname: 'ChannelMenu',\n\temits: ['popupShown', 'popupClosed', 'updateChannel'],\n\tprops: {\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): { menuPopup: Menu | null }\n\t{\n\t\treturn {\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tButtonIcon,\n\t\t\tmenuPopup: null,\n\t\t\tchannel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t};\n\t},\n\tcomputed: {\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn 'booking-choose-channel-menu';\n\t\t},\n\t\tnotificationChannelOptions(): { label: string, value: Messenger }[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tvalue: NotificationChannel.WhatsApp,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tlabel: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS'),\n\t\t\t\t\tvalue: NotificationChannel.Sms,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tthis.channel = this.notificationChannelOptions\n\t\t\t.find(({ value }) => value === this.currentChannel)?.label\n\t\t\t|| this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t},\n\tunmounted(): void\n\t{\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.destroy();\n\t\t}\n\t},\n\tmethods: {\n\t\topenMenu(): void\n\t\t{\n\t\t\tif (this.menuPopup?.popupWindow?.isShown())\n\t\t\t{\n\t\t\t\tthis.destroy();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst menuButton = this.$refs['menu-button'];\n\t\t\tthis.menuPopup = MenuManager.create(\n\t\t\t\tthis.popupId,\n\t\t\t\tmenuButton,\n\t\t\t\tthis.getMenuItems(),\n\t\t\t\t{\n\t\t\t\t\tclassName: 'booking-choose-channel-menu',\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: menuButton.offsetWidth - menuButton.offsetWidth / 2,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: true,\n\t\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonClose: () => this.destroy(),\n\t\t\t\t\t\tonDestroy: () => this.destroy(),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.menuPopup.show();\n\t\t\tthis.bindScrollEvent();\n\t\t\tthis.$emit('popupShown');\n\t\t},\n\t\tgetMenuItems(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_MESSAGE_SELECT_WHA');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.WhatsApp);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.channel = this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_SELECT_SMS');\n\t\t\t\t\t\tthis.$emit('updateChannel', NotificationChannel.Sms);\n\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdestroy(): void\n\t\t{\n\t\t\tMenuManager.destroy(this.popupId);\n\t\t\tthis.unbindScrollEvent();\n\t\t\tthis.$emit('popupClosed');\n\t\t},\n\t\tbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tunbindScrollEvent(): void\n\t\t{\n\t\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.menuPopup?.popupWindow?.adjustPosition();\n\t\t},\n\t},\n\tcomponents: {\n\t\tIcon,\n\t},\n\ttemplate: `\n\t\t<span\n\t\t\tclass=\"booking-resource-creation-wizard-channel-menu-button\"\n\t\t\tref=\"menu-button\"\n\t\t\t@click=\"openMenu\"\n\t\t>\n\t\t\t{{ channel }}\n\t\t</span>\n\t`,\n};\n","import { Event, Text } from 'main.core';\nimport { DateTimeFormat } from 'main.date';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\n\nimport { Model, NotificationChannel } from 'booking.const';\nimport { Popup } from 'booking.component.popup';\nimport { ButtonSize, ButtonColor } from 'booking.component.button';\nimport type { NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\n\nimport './choose-template-popup.css';\n\nexport const ChooseTemplatePopup = {\n\tname: 'ResourceNotificationChooseTemplatePopup',\n\temits: ['close', 'templateTypeSelected'],\n\tprops: {\n\t\tbindElement: {\n\t\t\ttype: HTMLElement,\n\t\t\trequired: true,\n\t\t},\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentChannel: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcurrentTemplateType: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tbuttonSize: {\n\t\t\ttype: String,\n\t\t\tdefault: ButtonSize.EXTRA_SMALL,\n\t\t},\n\t\tbuttonColors: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => ({\n\t\t\t\tselected: ButtonColor.BASE_LIGHT,\n\t\t\t\tdefault: ButtonColor.PRIMARY,\n\t\t\t}),\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tselectedTemplateType: this.currentTemplateType,\n\t\t};\n\t},\n\tcomponents: {\n\t\tPopup,\n\t\tChannelMenu,\n\t\tIcon,\n\t},\n\tbeforeMount(): void\n\t{\n\t\tthis.messenger = this.currentChannel;\n\t},\n\tmounted(): void\n\t{\n\t\tthis.adjustPosition();\n\t\tEvent.bind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tEvent.unbind(document, 'scroll', this.adjustPosition, { capture: true });\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\ttemplateTypes: `${Model.Dictionary}/getNotificationTemplates`,\n\t\t}),\n\t\tpopupId(): string\n\t\t{\n\t\t\treturn `booking-resource-wizard-choose-template-popup-${Text.getRandom(4)}`;\n\t\t},\n\t\tconfig(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\tclassName: 'booking-resource-wizard-choose-template-popup',\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceBindPosition: true,\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\toffsetLeft: (this.bindElement.childNodes[0]?.offsetWidth ?? 146) + 10,\n\t\t\t\toffsetTop: -149,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: 120,\n\t\t\t\t\tposition: 'left',\n\t\t\t\t},\n\t\t\t\tangleBorderRadius: '4px 0',\n\t\t\t\tpadding: 15,\n\t\t\t\ttargetContainer: document.querySelector('div.resource-creation-wizard__wrapper'),\n\t\t\t};\n\t\t},\n\t\tgetFormattedTime(): string\n\t\t{\n\t\t\treturn DateTimeFormat.format(DateTimeFormat.getFormat('SHORT_TIME_FORMAT'), Date.now() / 1000);\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMessageTemplate(messenger: string, templateType: string): string\n\t\t{\n\t\t\tconst templateModel = this.model.templates.find((template: NotificationsTemplateModel): boolean => {\n\t\t\t\treturn template.type === templateType;\n\t\t\t});\n\n\t\t\tif (!templateModel)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tswitch (messenger)\n\t\t\t{\n\t\t\t\tcase NotificationChannel.WhatsApp:\n\t\t\t\t\treturn templateModel.text;\n\t\t\t\tcase NotificationChannel.Sms:\n\t\t\t\t\treturn templateModel.textSms;\n\t\t\t\tdefault:\n\t\t\t\t\treturn '';\n\t\t\t}\n\t\t},\n\t\thandleChannelChange(selectedChannel): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\tchooseType(selectedType): void\n\t\t{\n\t\t\tthis.selectedTemplateType = selectedType;\n\t\t\tthis.$emit('templateTypeSelected', this.selectedTemplateType);\n\t\t},\n\t\tadjustPosition(): void\n\t\t{\n\t\t\tthis.$refs.popup.adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tforceTop: true,\n\t\t\t});\n\t\t},\n\t\tgetButtonText(templateType): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECTED')\n\t\t\t\t: this.loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_BTN_SELECT_TYPE');\n\t\t},\n\t\tgetButtonColor(templateType: string): string\n\t\t{\n\t\t\treturn (this.selectedTemplateType === templateType)\n\t\t\t\t? this.buttonColors.selected\n\t\t\t\t: this.buttonColors.default;\n\t\t},\n\t\tgetTemplateTitle(templateType: string): string\n\t\t{\n\t\t\tconst typeDictionary = Object.values(this.templateTypes)\n\t\t\t\t.find((templateDictionary: { name: string, value: string }): boolean => {\n\t\t\t\t\treturn templateDictionary.value === templateType;\n\t\t\t\t});\n\n\t\t\treturn (typeDictionary)\n\t\t\t\t? typeDictionary.name\n\t\t\t\t: '';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Popup\n\t\t\tv-slot=\"{freeze, unfreeze}\"\n\t\t\t:id=\"popupId\"\n\t\t\t:config=\"config\"\n\t\t\tref=\"popup\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"booking-resource-wizard-choose-template-popup\">\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header\">\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-title\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_TEMPLATE_POPUP_HEADER_TITLE') }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@popupShown=\"freeze\"\n\t\t\t\t\t\t\t@popupClosed=\"unfreeze\"\n\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:class=\"['--close-btn']\"\n\t\t\t\t\t\t\t:name=\"IconSet.CROSS_25\"\n\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-gray-20)'\"\n\t\t\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-close-btn\"></div>\n\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-header-line\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-container\">\n\t\t\t\t\t<div v-for=\"template in this.model.templates\" :key=\"template.type\"\n\t\t\t\t\t\t class=\"booking-resource-wizard-choose-template-popup-content\">\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-desc\">\n\t\t\t\t\t\t\t{{ getTemplateTitle(template.type) }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example\">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body', messenger]\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text', messenger]\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"getMessageTemplate(messenger, template.type)\"></div>\n\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-time', messenger]\">\n\t\t\t\t\t\t\t\t\t\t{{ getFormattedTime }}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t:class=\"['booking-resource-wizard-choose-template-popup-content-msg-example-body-text-tail', messenger]\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"booking-resource-wizard-choose-template-popup-content-msg-example-actions\">\n\t\t\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t\t\t:name=\"IconSet.CIRCLE_CHECK\"\n\t\t\t\t\t\t\t\t\t:color=\"'var(--ui-color-palette-green-55)'\"\n\t\t\t\t\t\t\t\t\t:size=\"24\"\n\t\t\t\t\t\t\t\t\tv-if=\"selectedTemplateType === template.type\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t:class=\"['ui-btn ui-btn-round', buttonSize, getButtonColor(template.type), {'--selected': selectedTemplateType === template.type}]\"\n\t\t\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\t\t\t@click=\"chooseType(template.type)\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{{ getButtonText(template.type) }}\n\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Popup>\n\t`,\n};\n","import './template-empty.css';\n\nexport const TemplateEmpty = {\n\ttemplate: `\n\t\t<div class=\"booking-resource-creation-wizard-message-template-empty\">\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-icon\"></div>\n\t\t\t<div class=\"booking-resource-creation-wizard-message-template-empty-text\">\n\t\t\t\t{{ loc('BRCW_MESSAGE_TEMPLATE_SOON_TEXT') }}\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const ResourceNotificationCheckBoxRow = {\n\tname: 'ResourceNotificationCheckBoxRow',\n\temits: ['update:checked'],\n\tprops: {\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<label class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<span class=\"resource-creation-wizard__form-notification-text-row-checkbox\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:checked=\"checked\"\n\t\t\t\t\t@input=\"$emit('update:checked', $event.target.checked)\"\n\t\t\t\t/>\n\t\t\t</span>\n\t\t\t<slot/>\n\t\t</label>\n\t`,\n};\n","import { Model } from 'booking.const';\nimport { ResourceNotificationCheckBoxRow } from '../resource-notification-checkbox-row';\n\nexport const CheckedForAll = {\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\tisCheckedForAll: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.$store.getters[`${Model.ResourceCreationWizard}/isCheckedForAll`](this.type);\n\t\t\t},\n\t\t\tset(isChecked: boolean): void\n\t\t\t{\n\t\t\t\tthis.$store.dispatch(`${Model.ResourceCreationWizard}/setCheckedForAll`, {\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tisChecked,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotificationCheckBoxRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationCheckBoxRow\n\t\t\tv-model:checked=\"isCheckedForAll\"\n\t\t\t:disabled=\"disabled\"\n\t\t>\n\t\t\t<div class=\"resource-creation-wizard__form-notification-text\">\n\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_HELPER_TEXT_APPLY_FOR_ALL') }}\n\t\t\t</div>\n\t\t</ResourceNotificationCheckBoxRow>\n\t`,\n};\n","export const ResourceNotificationTextRow = {\n\tname: 'ResourceNotificationTextRow',\n\tprops: {\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-creation-wizard__form-notification-text-row\">\n\t\t\t<div :class=\"[icon, 'ui-icon-set', 'resource-creation-wizard__form-notification-text-row-icon']\"></div>\n\t\t\t<slot/>\n\t\t</div>\n\t`,\n};\n","import { HelpDeskLoc } from 'booking.component.help-desk-loc';\nimport { ResourceNotificationTextRow } from '../resource-notification-text-row';\n\nexport const Description = {\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomponents: {\n\t\tHelpDeskLoc,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotificationTextRow icon=\"--info-1\">\n\t\t\t<HelpDeskLoc \n\t\t\t\t:message=\"description\"\n\t\t\t\t:code=\"helpDesk.code\"\n\t\t\t\t:anchor=\"helpDesk.anchorCode\"\n\t\t\t\tclass=\"resource-creation-wizard__form-notification-text\"\n\t\t\t/>\n\t\t</ResourceNotificationTextRow>\n\t`,\n};\n","import { Text } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport { hint } from 'ui.vue3.directives.hint';\nimport { BIcon as Icon, Set as IconSet } from 'ui.icon-set.api.vue';\nimport 'ui.icon-set.crm';\nimport 'ui.hint';\n\nimport { Button, ButtonSize, ButtonColor } from 'booking.component.button';\nimport { Switcher } from 'booking.component.switcher';\nimport { Model, NotificationChannel, NotificationFieldsMap } from 'booking.const';\nimport type { NotificationsModel, NotificationsTemplateModel } from 'booking.model.notifications';\n\nimport { ChannelMenu } from '../channel-menu/channel-menu';\nimport { ChooseTemplatePopup } from '../choose-template-popup/choose-template-popup';\nimport { TemplateEmpty } from '../template-empty/template-empty';\nimport { CheckedForAll } from './components/checked-for-all';\nimport { Description } from './components/description';\n\nexport const ResourceNotification = {\n\tname: 'ResourceNotification',\n\temits: ['update:checked'],\n\tdirectives: { hint },\n\tprops: {\n\t\ttype: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thelpDesk: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tchecked: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\tIconSet,\n\t\t\tButtonSize,\n\t\t\tButtonColor,\n\t\t\tmessenger: NotificationChannel.WhatsApp,\n\t\t\tshowTemplatePopup: false,\n\t\t};\n\t},\n\tcomponents: {\n\t\tSwitcher,\n\t\tIcon,\n\t\tButton,\n\t\tDescription,\n\t\tChannelMenu,\n\t\tChooseTemplatePopup,\n\t\tTemplateEmpty,\n\t\tCheckedForAll,\n\t},\n\tcreated(): void\n\t{\n\t\tthis.hintManager = BX.UI.Hint.createInstance({\n\t\t\tid: `brwc-notification-hint-${Text.getRandom(5)}`,\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t},\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\t},\n\tupdated(): void\n\t{\n\t\tthis.hintManager.init(this.$el);\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tmodel(): NotificationsModel\n\t\t{\n\t\t\treturn this.$store.getters[`${Model.Notifications}/getByType`](this.type);\n\t\t},\n\t\ttemplate(): NotificationsTemplateModel\n\t\t{\n\t\t\tconst templateName = this.resource[this.templateTypeField];\n\n\t\t\treturn this.model.templates.find((template) => template.type === templateName);\n\t\t},\n\t\tmessageTemplate(): string\n\t\t{\n\t\t\treturn {\n\t\t\t\t[NotificationChannel.WhatsApp]: this.template?.text ?? '',\n\t\t\t\t[NotificationChannel.Sms]: this.template?.textSms ?? '',\n\t\t\t}[this.messenger] ?? '';\n\t\t},\n\t\thasTemplate(): boolean\n\t\t{\n\t\t\treturn this.isCurrentSenderAvailable && this.messageTemplate;\n\t\t},\n\t\tdisableSwitcher(): boolean\n\t\t{\n\t\t\treturn this.disabled || !this.isCurrentSenderAvailable || !this.template;\n\t\t},\n\t\ttemplateTypeField(): string\n\t\t{\n\t\t\treturn NotificationFieldsMap.TemplateType[this.type];\n\t\t},\n\t\tsoonHint(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('BRCW_BOOKING_SOON_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\toffsetLeft: 60,\n\t\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t},\n\tmethods: {\n\t\thandleChannelChange(selectedChannel: string): void\n\t\t{\n\t\t\tthis.messenger = selectedChannel;\n\t\t},\n\t\thandleTemplateTypeSelected(selectedType: string): void\n\t\t{\n\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { [this.templateTypeField]: selectedType });\n\t\t},\n\t\tgetChooseTemplateButton(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs.chooseTemplateBtn || null;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"ui-form resource-creation-wizard__form-notification\" :class=\"{'--disabled': !checked}\">\n\t\t\t<div class=\"resource-creation-wizard__form-notification-info\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title-row\">\n\t\t\t\t\t<Icon :name=\"IconSet.CHAT_LINE\"/>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-title\">\n\t\t\t\t\t\t{{ title }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<Switcher\n\t\t\t\t\t\tv-hint=\"disableSwitcher && soonHint\"\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-switcher\"\n\t\t\t\t\t\t:data-id=\"'brcw-resource-notification-info-switcher-' + type\"\n\t\t\t\t\t\t:model-value=\"checked\"\n\t\t\t\t\t\t:disabled=\"disableSwitcher\"\n\t\t\t\t\t\t@update:model-value=\"$emit('update:checked', $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-text-row\">\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification__info-text-row-message-text\">\n\t\t\t\t\t\t{{ loc('BRCW_NOTIFICATION_CARD_MESSAGE_TEXT') }}\n\t\t\t\t\t\t<ChannelMenu\n\t\t\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t\t\t@updateChannel=\"handleChannelChange\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<template v-if=\"hasTemplate\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html=\"messageTemplate\"\n\t\t\t\t\t\tclass=\"resource-creation-wizard__form-notification-info-template\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class=\"resource-creation-wizard__form-notification-info-template-choose-buttons\">\n\t\t\t\t\t\t<div class=\"booking-resource-creation-wizard-choose-template-button\" ref=\"chooseTemplateBtn\">\n\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t:disabled=\"!checked\"\n\t\t\t\t\t\t\t\t:text=\"loc('BRCW_NOTIFICATION_CARD_CHOOSE_TEMPLATE_TYPE')\"\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.EXTRA_SMALL\"\n\t\t\t\t\t\t\t\t:color=\"ButtonColor.LIGHT_BORDER\"\n\t\t\t\t\t\t\t\t:round=\"true\"\n\t\t\t\t\t\t\t\t@click=\"showTemplatePopup = true\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<TemplateEmpty v-else/>\n\t\t\t\t<ChooseTemplatePopup\n\t\t\t\t\tv-if=\"showTemplatePopup\"\n\t\t\t\t\t:bindElement=\"$refs.chooseTemplateBtn\"\n\t\t\t\t\t:model=\"model\"\n\t\t\t\t\t:current-channel=\"messenger\"\n\t\t\t\t\t:currentTemplateType=\"resource[templateTypeField]\"\n\t\t\t\t\t@templateTypeSelected=\"handleTemplateTypeSelected\"\n\t\t\t\t\t@close=\"showTemplatePopup = false\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<Description :description=\"description\" :helpDesk=\"helpDesk\"/>\n\t\t\t<slot/>\n\t\t\t<CheckedForAll :type=\"type\" :disabled=\"!checked\"/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { Model, AhaMoment, HelpDesk } from 'booking.const';\nimport { ahaMoments } from 'booking.lib.aha-moments';\n\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\nexport const BaseInfo = {\n\tname: 'ResourceNotificationCardBaseInfo',\n\tmixins: [replaceLabelMixin],\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tif (ahaMoments.shouldShow(AhaMoment.MessageTemplate))\n\t\t{\n\t\t\tsetTimeout(() => this.showAhaMoment(), 500);\n\t\t}\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisInfoNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isInfoNotificationOn;\n\t\t\t},\n\t\t\tset(isInfoNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isInfoNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocInfoTimeSend(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst immediately = this.loc('BRCW_NOTIFICATION_CARD_LABEL_IMMEDIATELY');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_SECOND', {\n\t\t\t\t'#time#': this.getLabel(immediately, this.isInfoNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationInfo;\n\t\t},\n\t},\n\tmethods: {\n\t\tasync showAhaMoment(): Promise<void>\n\t\t{\n\t\t\tconst target = this.$refs.card.getChooseTemplateButton();\n\t\t\tif (Type.isNull(target))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait ahaMoments.showGuide({\n\t\t\t\tid: 'booking-message-template',\n\t\t\t\ttitle: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TITLE'),\n\t\t\t\ttext: this.loc('BOOKING_AHA_MESSAGE_TEMPLATE_TEXT'),\n\t\t\t\tarticle: HelpDesk.AhaMessageTemplate,\n\t\t\t\ttarget: this.$refs.card.getChooseTemplateButton(),\n\t\t\t\ttargetContainer: this.$root.$el.querySelector('.resource-creation-wizard__wrapper'),\n\t\t\t});\n\n\t\t\tahaMoments.setShown(AhaMoment.MessageTemplate);\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isInfoNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_BASE_INFO_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\tref=\"card\"\n\t\t>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locInfoTimeSend\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\nimport 'ui.label';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\nexport const Confirmation = {\n\tname: 'ResourceNotificationCardConfirmation',\n\tmixins: [replaceLabelMixin],\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisConfirmationNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isConfirmationNotificationOn;\n\t\t\t},\n\t\t\tset(isConfirmationNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isConfirmationNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendMessageBefore(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst daysBefore = this.loc('BRCW_NOTIFICATION_CARD_LABEL_DAYS_BEFORE');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_SECOND', {\n\t\t\t\t'#days_before#': this.getLabel(daysBefore, this.isConfirmationNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\tlocRetryMessage(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst times = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIMES');\n\t\t\tconst timeDelay = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIME_DELAY');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_THIRD', {\n\t\t\t\t'#times#': this.getLabel(times, this.isConfirmationNotificationOn, hint),\n\t\t\t\t'#time_delay#': this.getLabel(timeDelay, this.isConfirmationNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationConfirmation;\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification \n\t\t\tv-model:checked=\"isConfirmationNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_CONFIRMATION_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendMessageBefore\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t\t<ResourceNotificationTextRow icon=\"--undo-1\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locRetryMessage\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\nimport { replaceLabelMixin } from '../label/label';\n\nexport const Reminder = {\n\tname: 'ResourceNotificationCardReminder',\n\tmixins: [replaceLabelMixin],\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisReminderNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isReminderNotificationOn;\n\t\t\t},\n\t\t\tset(isReminderNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isReminderNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendReminderTime(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst chooseTime = this.loc('BRCW_NOTIFICATION_CARD_LABEL_CHOOSE_TIME');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_SECOND', {\n\t\t\t\t'#time#': this.getLabel(chooseTime, this.isReminderNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationReminder;\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isReminderNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_REMINDER_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendReminderTime\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\nexport const Feedback = {\n\tname: 'ResourceNotificationCardFeedback',\n\tmixins: [replaceLabelMixin],\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisFeedbackNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tset(isFeedbackNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isFeedbackNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendFeedbackTime(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst immediately = this.loc('BRCW_NOTIFICATION_CARD_LABEL_IMMEDIATELY');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_SECOND', {\n\t\t\t\t'#time#': this.getLabel(immediately, this.isFeedbackNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationFeedback;\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isFeedbackNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_FEEDBACK_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t\t:disabled=\"true\"\n\t\t>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendFeedbackTime\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.icon-set.main';\n\nimport { HelpDesk, Model } from 'booking.const';\nimport { replaceLabelMixin } from '../label/label';\nimport { ResourceNotification } from '../layout/resource-notification';\nimport { ResourceNotificationTextRow } from '../layout/resource-notification-text-row';\n\nexport const Late = {\n\tname: 'ResourceNotificationCardLate',\n\tmixins: [replaceLabelMixin],\n\tprops: {\n\t\t/** @type {NotificationsModel} */\n\t\tmodel: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed: {\n\t\t...mapGetters({\n\t\t\tresource: `${Model.ResourceCreationWizard}/getResource`,\n\t\t\tisCurrentSenderAvailable: `${Model.Notifications}/isCurrentSenderAvailable`,\n\t\t}),\n\t\tisDelayedNotificationOn: {\n\t\t\tget(): boolean\n\t\t\t{\n\t\t\t\treturn this.isCurrentSenderAvailable && this.resource.isDelayedNotificationOn;\n\t\t\t},\n\t\t\tset(isDelayedNotificationOn: boolean): void\n\t\t\t{\n\t\t\t\tvoid this.$store.dispatch(`${Model.ResourceCreationWizard}/updateResource`, { isDelayedNotificationOn });\n\t\t\t},\n\t\t},\n\t\tlocSendMessageAfter(): string\n\t\t{\n\t\t\tconst hint = this.loc('BRCW_BOOKING_SOON_HINT');\n\t\t\tconst minutes = this.loc('BRCW_NOTIFICATION_CARD_LABEL_TIME_AFTER_MINUTES');\n\n\t\t\treturn this.loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_SECOND', {\n\t\t\t\t'#time#': this.getLabel(minutes, this.isDelayedNotificationOn, hint),\n\t\t\t});\n\t\t},\n\t\thelpDesk(): Object\n\t\t{\n\t\t\treturn HelpDesk.ResourceNotificationLate;\n\t\t},\n\t},\n\tcomponents: {\n\t\tResourceNotification,\n\t\tResourceNotificationTextRow,\n\t},\n\ttemplate: `\n\t\t<ResourceNotification\n\t\t\tv-model:checked=\"isDelayedNotificationOn\"\n\t\t\t:type=\"model.type\"\n\t\t\t:title=\"loc('BRCW_NOTIFICATION_CARD_LATE_TITLE')\"\n\t\t\t:description=\"loc('BRCW_NOTIFICATION_CARD_LATE_HELPER_TEXT_FIRST_MSGVER_1')\"\n\t\t\t:helpDesk=\"helpDesk\"\n\t\t>\n\t\t\t<ResourceNotificationTextRow icon=\"--clock-2\">\n\t\t\t\t<div class=\"resource-creation-wizard__form-notification-text\" v-html=\"locSendMessageAfter\"></div>\n\t\t\t</ResourceNotificationTextRow>\n\t\t</ResourceNotification>\n\t`,\n};\n","import { mapGetters } from 'ui.vue3.vuex';\nimport 'ui.forms';\nimport 'ui.layout-form';\nimport 'ui.icon-set.main';\n\nimport { Model } from 'booking.const';\nimport type { NotificationsModel } from 'booking.model.notifications';\n\nimport { BaseInfo } from './base-info/base-info';\nimport { Confirmation } from './confirmation/confirmation';\nimport { Reminder } from './reminder/reminder';\nimport { Feedback } from './feedback/feedback';\nimport { Late } from './late/late';\n\nimport './resource-notification-card.css';\n\nexport const ResourceNotificationCard = {\n\tname: 'ResourceNotificationCard',\n\tcomponents: {\n\t\tBaseInfo,\n\t\tConfirmation,\n\t\tReminder,\n\t\tLate,\n\t\tFeedback,\n\t},\n\tcomputed: {\n\t\tnotificationViews(): { view: string, model: NotificationsModel }[]\n\t\t{\n\t\t\treturn this.notifications.map((notificationsModel: NotificationsModel) => {\n\t\t\t\tswitch (notificationsModel.type)\n\t\t\t\t{\n\t\t\t\t\tcase this.dictionary.Info.value:\n\t\t\t\t\t\treturn { view: 'BaseInfo', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Confirmation.value:\n\t\t\t\t\t\treturn { view: 'Confirmation', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Reminder.value:\n\t\t\t\t\t\treturn { view: 'Reminder', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Delayed.value:\n\t\t\t\t\t\treturn { view: 'Late', model: notificationsModel };\n\t\t\t\t\tcase this.dictionary.Feedback.value:\n\t\t\t\t\t\treturn { view: 'Feedback', model: notificationsModel };\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t...mapGetters({\n\t\t\tnotifications: `${Model.Notifications}/get`,\n\t\t\tdictionary: `${Model.Dictionary}/getNotifications`,\n\t\t}),\n\t},\n\ttemplate: `\n\t\t<div class=\"resource-notification-card\">\n\t\t\t<slot v-for=\"notification of notificationViews\" :key=\"notification.view\">\n\t\t\t\t<component\n\t\t\t\t\t:is=\"notification.view\"\n\t\t\t\t\t:model=\"notification.model\"\n\t\t\t\t\t:data-id=\"'brcw-resource-notification-view-' + notification.view\"\n\t\t\t\t/>\n\t\t\t</slot>\n\t\t</div>\n\t`,\n};\n","import { mapState, mapGetters, mapActions, mapMutations } from 'ui.vue3.vuex';\nimport { resourceCreationWizardService } from 'booking.provider.service.resource-creation-wizard-service';\nimport { ResourceCreationWizardLayout } from './layout/layout';\nimport { ResourceCreationWizardHeader } from './header/header';\nimport { ResourceCreationWizardFooter } from './footer/footer';\nimport { ResourceCategoryCard } from './resource-category-card/resource-category-card';\nimport { ResourceSettingsCard } from './resource-settings-card/resource-settings-card';\nimport { ResourceNotificationCard } from './resource-notification-card/resource-notification-card';\n\nexport const App = {\n\tname: 'ResourceCreationWizardApp',\n\tcomponents: {\n\t\tResourceCreationWizardLayout,\n\t\tResourceCreationWizardHeader,\n\t\tResourceCreationWizardFooter,\n\t\tResourceCategoryCard,\n\t\tResourceSettingsCard,\n\t\tResourceNotificationCard,\n\t},\n\tdata(): { init: boolean }\n\t{\n\t\treturn {\n\t\t\tinit: true,\n\t\t};\n\t},\n\tcomputed: {\n\t\t...mapState({\n\t\t\tstep: (state) => state['resource-creation-wizard'].step,\n\t\t\tfetching: (state) => state['resource-creation-wizard'].fetching,\n\t\t}),\n\t\t...mapGetters('resource-creation-wizard', [\n\t\t\t'invalidCurrentCard',\n\t\t\t'resourceId',\n\t\t]),\n\t\tcurrentView(): string\n\t\t{\n\t\t\tconst step = this.step || 1;\n\n\t\t\tswitch (step)\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\treturn 'ResourceSettingsCard';\n\t\t\t\tcase 3:\n\t\t\t\t\treturn 'ResourceNotificationCard';\n\t\t\t\tdefault:\n\t\t\t\t\treturn 'ResourceCategoryCard';\n\t\t\t}\n\t\t},\n\t\tisEditForm(): boolean\n\t\t{\n\t\t\treturn this.resourceId !== null;\n\t\t},\n\t},\n\tasync beforeMount()\n\t{\n\t\tawait this.initApp();\n\t},\n\tmethods: {\n\t\t...mapActions(\n\t\t\t'resource-creation-wizard',\n\t\t\t['initState'],\n\t\t),\n\t\t...mapMutations(\n\t\t\t'resource-creation-wizard',\n\t\t\t[\n\t\t\t\t'prevStep',\n\t\t\t\t'updateFetching',\n\t\t\t\t'setGlobalSchedule',\n\t\t\t],\n\t\t),\n\t\tasync initApp()\n\t\t{\n\t\t\tawait this.initState();\n\t\t\tawait this.loadWizardData();\n\t\t\tthis.init = false;\n\t\t},\n\t\tasync loadWizardData()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.updateFetching(true);\n\t\t\t\tawait resourceCreationWizardService.fetchData();\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tconsole.error('Loading wizard data error', error);\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.updateFetching(false);\n\t\t\t\tif (!this.isEditForm)\n\t\t\t\t{\n\t\t\t\t\tthis.setGlobalSchedule(true);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div id=\"booking-resource-creation-wizard\">\n\t\t\t<ResourceCreationWizardLayout :loading=\"fetching\" :step>\n\t\t\t\t<template #header>\n\t\t\t\t\t<ResourceCreationWizardHeader/>\n\t\t\t\t</template>\n\t\t\t\t<template v-if=\"!init\">\n\t\t\t\t\t<component :is=\"currentView\"/>\n\t\t\t\t</template>\n\t\t\t\t<template #footer>\n\t\t\t\t\t<ResourceCreationWizardFooter :step/>\n\t\t\t\t</template>\n\t\t\t</ResourceCreationWizardLayout>\n\t\t</div>\n\t`,\n};\n","import { Event } from 'main.core';\nimport { BitrixVue } from 'ui.vue3';\nimport type { VueCreateAppResult } from 'ui.vue3';\n\nimport { Core } from 'booking.core';\nimport { EventName, Model } from 'booking.const';\nimport { locMixin } from 'booking.component.mixin.loc-mixin';\nimport { Notifications } from 'booking.model.notifications';\nimport { ResourceCreationWizardModel } from 'booking.model.resource-creation-wizard';\nimport { SidePanelInstance } from 'booking.lib.side-panel-instance';\nimport { App } from './components/app';\n\ntype ResourceId = number | null;\n\nexport class ResourceCreationWizard\n{\n\tstatic #width: number = 600;\n\n\t#application: VueCreateAppResult | null = null;\n\n\tstatic #makeName(resourceId: string = 'new'): string\n\t{\n\t\treturn `booking:resource-creation-wizard:${resourceId || 'new'}`;\n\t}\n\n\t#mountContent(container: HTMLElement): void\n\t{\n\t\tconst application = BitrixVue.createApp(App, Core.getParams());\n\n\t\tapplication.mixin(locMixin);\n\t\tapplication.use(Core.getStore());\n\t\tapplication.mount(container);\n\n\t\tthis.#application = application;\n\t}\n\n\tasync #initCore(resourceId: ResourceId): Promise<void>\n\t{\n\t\ttry\n\t\t{\n\t\t\tawait Core.init();\n\t\t\tawait Core.addDynamicModule(\n\t\t\t\tResourceCreationWizardModel\n\t\t\t\t\t.create()\n\t\t\t\t\t.setVariables({ resourceId }),\n\t\t\t);\n\t\t\tawait Core.addDynamicModule(Notifications.create());\n\t\t}\n\t\tcatch (error)\n\t\t{\n\t\t\tconsole.error('Init Resource creation wizard error', error);\n\t\t}\n\t}\n\n\t#makeContainer(): HTMLElement\n\t{\n\t\tconst container = document.createElement('div');\n\t\tcontainer.id = 'booking-resource-creation-wizard-app';\n\n\t\treturn container;\n\t}\n\n\topen(resourceId: ResourceId = null): void\n\t{\n\t\tSidePanelInstance.open(ResourceCreationWizard.#makeName(resourceId), {\n\t\t\twidth: ResourceCreationWizard.#width,\n\t\t\tcacheable: false,\n\t\t\tevents: {\n\t\t\t\tonClose: this.closeSidePanel.bind(this),\n\t\t\t},\n\t\t\tcontentCallback: async () => {\n\t\t\t\tawait this.#initCore(resourceId);\n\t\t\t\tthis.subscribe();\n\n\t\t\t\tconst container = this.#makeContainer();\n\t\t\t\tthis.#mountContent(container);\n\n\t\t\t\treturn container;\n\t\t\t},\n\t\t});\n\t}\n\n\tasync closeSidePanel(): Promise<void>\n\t{\n\t\tthis.unsubscribe();\n\t\tthis.#application.unmount();\n\t\tthis.#application = null;\n\n\t\tawait Core.removeDynamicModule(Model.ResourceCreationWizard);\n\t\tawait Core.removeDynamicModule(Model.Notifications);\n\t}\n\n\tsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.subscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tunsubscribe(): void\n\t{\n\t\tEvent.EventEmitter.unsubscribe(\n\t\t\tEventName.CloseWizard,\n\t\t\tthis.close,\n\t\t);\n\t}\n\n\tclose(): void\n\t{\n\t\tSidePanelInstance.close();\n\t}\n}\n"],"names":["UiLoader","name","props","show","Boolean","data","loader","Loader","mounted","$refs","template","ResourceCreationWizardLayout","step","type","Number","required","title","String","default","loading","watch","wrapper","scrollTo","components","ResourceCreationWizardHeader","computed","$store","state","resourceName","NextButton","UiButton","Button","steps","Array","disabled","waiting","currentStep","size","ButtonSize","SMALL","color","ButtonColor","SUCCESS","BackButton","buttonSize","buttonColor","LINK","Step","constructor","hidden","store","Core","getStore","labelNext","Loc","getMessage","labelBack","next","dispatch","back","ChooseResourceStep","Event","EventEmitter","emit","EventName","CloseWizard","ResourceNotificationStep","Type","isNull","id","commit","Model","ResourceCreationWizard","isApproved","getters","slotRanges","isSuccess","resourceTypeService","update","typeId","Promise","resolve","ConditionChecker","checkIsApproved","senderType","SenderTypes","bitrix24","bitrix24Sender","Notifications","find","sender","moduleId","Module","Crm","code","canUse","resource","slotSize","scheduleSlots","timezone","Interface","map","slotRange","resourceType","ResourceTypes","Object","values","Dictionary","value","reduce","acc","notificationOnField","NotificationFieldsMap","NotificationOn","templateTypeField","TemplateType","isCheckedForAll","isUpdate","result","resourceService","add","text","isArrayFilled","errors","message","Notifier","notify","Text","getRandom","ResourceSettingsStep","resourceId","ResourceCreationWizardFooter","mapGetters","isSaving","ResourceType","emits","IconSet","Icon","ResourceCategoryCard","setup","HelpDesk","anchorCode","resourceTypes","advertisingResourceTypes","methods","selectResourceType","relatedResourceTypeId","HelpDeskLoc","ErrorMessage","BaseFields","initialResourceName","initialResourceType","entityId","EntitySelectorEntity","typeSelectorId","typeName","get","set","$emit","invalidResourceName","invalidResourceType","errorMessage","loc","showTypeSelector","dialog","getTypeSelectorDialog","typeSelectorAngle","bindElement","typeSelectorDialog","Dialog","getById","setTargetNode","targetNode","width","height","enableSearch","dropdownMode","context","multiple","cacheable","entities","dynamicLoad","dynamicSearch","popupOptions","targetContainer","$root","$el","querySelector","searchOptions","allowCreateItem","footerOptions","label","events","baseEvent","searchQuery","getData","getTarget","createType","getQuery","then","updateResourceType","addItem","prepareTypeToDialog","hide","catch","selectedItem","item","getId","getTitle","sort","selected","tabs","supertitle","avatar","scrollToBaseFieldsForm","baseFieldsForm","scrollIntoView","behavior","block","invalid","TitleLayout","iconType","ScheduleItem","modelValue","itemClass","description","ResourceSchedule","isSelected","toString","selectOption","ScheduleTypes","titleIconType","COLLABORATION","items","TextLayout","mapResourceGetters","createNamespacedHelpers","WorkTimeMixin","Mon","Tue","Wed","Thu","Fri","Sat","Sun","daysLabel","created","initialDays","forEach","day","prototype","hasOwnProperty","call","formatDaysLabel","defaultString","weekDays","companyScheduleSlots","isArraysEqual","selectedDays","orderedDays","keys","daysLabelMap","sortedSelectedDays","a","b","indexOf","formattedDays","join","getDayDefaultIndex","dayKey","dayIndices","first","second","length","every","index","weekStart","filter","weekdays","format","allDays","startIndex","slice","currentDayIndex","Date","getDay","targetDayIndex","dayDifference","dayDate","setDate","getDate","DateTimeFormat","WeekDaysPopup","HTMLElement","Popup","mixins","close","click","trueKeys","key","popupId","config","offsetRight","offsetWidth","angle","bindOptions","forceBindPosition","forceLeft","WorkTimeSlotRange","isLastRange","initialSlotRange","fromId","toId","fromTs","toTs","duration","isShownDays","arrow","days","from","to","removeSlot","localSlotRange","showDays","hideDays","selectDays","menuId","MenuManager","destroy","timeList","create","className","autoHide","closeByEsc","onShow","getMenuItems","Dom","hasClass","getLayout","itemHeight","offset","scrollContainer","getPopupWindow","getContentContainer","topPosition","getRelativePosition","getContainer","top","scrollTop","onClose","maxHeight","minWidth","entries","generateTimeMap","minutes","parseInt","defaultClass","addMenuItem","dataset","onclick","timeMap","timeFormat","getFormat","interval","timestamp","setHours","midnightTimestamp","clickBtn","daysId","fromLabel","toLabel","WorkTimeSelector","initialSlotRanges","isGlobalSchedule","defaultSlotRange","initialTimezone","currentTimezone","isCompanyScheduleAccess","localSlotRanges","processSlotRanges","isChecked","hasTimezonesDifference","formattedInitialOffset","formattedCurrentOffset","calculateDifferenceBetweenTimezones","handler","newSlotRanges","deep","checked","openCompanyWorkTime","event","isTextClick","target","currentTarget","BX","subscribeOnce","GLOBAL_TARGET","slider","getWindow","innerBaseEvent","extraSettings","reloadAfterClose","SidePanel","Instance","open","preventDefault","updateSlotRange","addSlotRange","push","removeSlotRange","splice","getTimezoneOffset","timeZone","now","utcDate","toLocaleString","tzDate","getTime","initialOffset","currentOffset","formatOffset","sign","hours","Math","floor","abs","padStart","totalDifferenceMinutes","onSlotClick","companyWorkTimeOptionLabel","isSlotsDisabled","timezoneIconType","EARTH_TIME","formattedTimezonesText","replace","WorkTime","updateGlobalSchedule","getGlobalSchedule","CLOCK_2","SlotLengthPrecisionSelection","directives","hint","initialValue","distributeInitialValue","remainingMinutes","calculateTotalMinutes","totalMinutes","validateHours","isNumber","validateMinutes","handleEnterKey","blur","hourHint","minutesHint","unitDurations","Duration","getUnitDurations","units","fromEntries","unit","i","disabledLengths","Set","H","d","SlotLengthSelector","initialSelectedValue","selectedValue","selectedPrecisionValue","precisionMode","templateValues","has","select","selectPrecision","getClass","getSoonHintContent","position","offsetLeft","offsetTop","durations","SlotLength","selectedSlotLength","updateSelectedValue","GANTT_GRAPHS","mapActions","mapMutations","ResourceSettingsCard","getInitialSlotTimeZone","updateSlotRanges","updateResourceName","updateResource","setInvalidResourceName","setInvalidResourceType","updateSlotDataForAllRanges","updateSlotLength","inputSlotRanges","setGlobalSchedule","fetchData","resourceCreationWizardService","isEditForm","isMain","replaceLabelMixin","getLabel","uiLabelStyle","ChannelMenu","currentChannel","ButtonIcon","menuPopup","channel","notificationChannelOptions","NotificationChannel","WhatsApp","Sms","unmounted","openMenu","popupWindow","isShown","menuButton","document","onDestroy","bindScrollEvent","unbindScrollEvent","bind","adjustPosition","capture","unbind","ChooseTemplatePopup","model","currentTemplateType","EXTRA_SMALL","buttonColors","BASE_LIGHT","PRIMARY","messenger","selectedTemplateType","beforeMount","beforeUnmount","templateTypes","forceTop","childNodes","animation","angleBorderRadius","padding","getFormattedTime","getMessageTemplate","templateType","templateModel","templates","textSms","handleChannelChange","selectedChannel","chooseType","selectedType","popup","getButtonText","getButtonColor","getTemplateTitle","typeDictionary","templateDictionary","TemplateEmpty","ResourceNotificationCheckBoxRow","CheckedForAll","ResourceNotificationTextRow","icon","Description","helpDesk","ResourceNotification","showTemplatePopup","Switcher","hintManager","UI","Hint","createInstance","popupParameters","init","updated","isCurrentSenderAvailable","templateName","messageTemplate","hasTemplate","disableSwitcher","soonHint","handleTemplateTypeSelected","getChooseTemplateButton","chooseTemplateBtn","BaseInfo","ahaMoments","shouldShow","AhaMoment","MessageTemplate","setTimeout","showAhaMoment","isInfoNotificationOn","locInfoTimeSend","immediately","ResourceNotificationInfo","card","showGuide","article","AhaMessageTemplate","setShown","Confirmation","isConfirmationNotificationOn","locSendMessageBefore","daysBefore","locRetryMessage","times","timeDelay","ResourceNotificationConfirmation","Reminder","isReminderNotificationOn","locSendReminderTime","chooseTime","ResourceNotificationReminder","Feedback","isFeedbackNotificationOn","locSendFeedbackTime","ResourceNotificationFeedback","Late","isDelayedNotificationOn","locSendMessageAfter","ResourceNotificationLate","ResourceNotificationCard","notificationViews","notifications","notificationsModel","dictionary","Info","view","Delayed","App","mapState","fetching","currentView","initApp","initState","loadWizardData","updateFetching","error","console","SidePanelInstance","closeSidePanel","contentCallback","subscribe","container","unsubscribe","unmount","removeDynamicModule","application","BitrixVue","createApp","getParams","mixin","locMixin","use","mount","addDynamicModule","ResourceCreationWizardModel","setVariables","createElement"],"mappings":"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"}