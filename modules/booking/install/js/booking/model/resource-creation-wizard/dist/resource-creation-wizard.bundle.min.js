this.BX=this.BX||{};this.BX.Booking=this.BX.Booking||{};(function(e,t,s,i,o,a,r){"use strict";function c(e){const t=r.Core.getStore();const s=t.getters["resources/getById"](e);return structuredClone(a.toRaw(s))}function n(){return{id:null,typeId:null,name:"",description:null,slotRanges:[],counter:null,isMain:true,isConfirmationNotificationOn:false,isFeedbackNotificationOn:false,isInfoNotificationOn:false,isDelayedNotificationOn:false,isReminderNotificationOn:false,templateTypeConfirmation:"animate",templateTypeFeedback:"animate",templateTypeInfo:"animate",templateTypeDelayed:"animate",templateTypeReminder:"base",createdBy:0,createdAt:0,updatedAt:null}}class l extends s.BuilderModel{getName(){return i.Model.ResourceCreationWizard}getState(){return{resourceId:this.getVariable("resourceId",null),resourceName:"",resource:n(),advertisingResourceTypes:[],companyScheduleSlots:[],fetching:false,step:1,isSaving:false,invalidResourceName:false,invalidResourceType:false,isCompanyScheduleAccess:false,weekStart:"Mon",globalSchedule:false,checkedForAll:{}}}getGetters(){return{resourceId:e=>e.resourceId,getResource:e=>e.resource,isSaving:e=>e.isSaving,getCompanyScheduleSlots:e=>e.companyScheduleSlots,isGlobalSchedule:e=>e.globalSchedule,startStep:e=>t.Type.isNull(e.resourceId)?1:2,finishStep:()=>3,invalidChooseTypeCard:e=>t.Type.isNull(e.resource.typeId),invalidSettingsCard:e=>e.invalidResourceName||!e.resource.typeId,invalidCurrentCard:(e,t)=>{if(e.step===1){return t.invalidChooseTypeCard}if(e.step===2){return t.invalidSettingsCard}return false},isCompanyScheduleAccess:e=>e.isCompanyScheduleAccess,weekStart:e=>e.weekStart,isCheckedForAll:e=>t=>{var s;return(s=e.checkedForAll[t])!=null?s:true}}}getActions(){return{async initState({state:e,dispatch:s}){if(t.Type.isNull(e.resourceId)){await s("initCreateMaster")}else{await s("initEditMaster")}},initCreateMaster({state:e,commit:s}){s("init",{resourceId:e.resourceId,step:1});s("setCurrentResourceName",t.Loc.getMessage("BRCW_TITLE"))},initEditMaster({state:e,commit:t}){const s=e.resourceId;const i=c(s);t("init",{resourceId:s,resource:i,step:2});t("setCurrentResourceName",i.name)},nextStep({state:e,getters:t,commit:s}){if(t.invalidCurrentCard){return}if(e.step<t.finishStep){s("updateStep",e.step+1)}},prevStep({state:e,getters:t,commit:s}){if(e.step>t.startStep){s("updateStep",e.step-1)}},setAdvertisingResourceTypes({commit:e},s){const i=[...s,{code:"none",name:t.Loc.getMessage("BRCW_CHOOSE_CATEGORY_YOUR_TYPE"),relatedResourceTypeId:0}];e("setAdvertisingResourceTypes",i)},updateResource({commit:e,rootGetters:t},s){if(s.typeId){const e=t[`${i.Model.ResourceTypes}/getById`](s.typeId);const o=[...Object.values(i.NotificationFieldsMap.NotificationOn),...Object.values(i.NotificationFieldsMap.TemplateType)].reduce(((t,s)=>({...t,[s]:e[s]})),{});Object.assign(s,o)}e("updateResource",s)},setCompanyScheduleSlots({commit:e},t){const s=Intl.DateTimeFormat().resolvedOptions().timeZone;e("setCompanyScheduleSlots",t.map((e=>({...e,weekDays:Object.values(e.weekDays),timezone:e.timezone||s}))))},setGlobalSchedule({commit:e},t){e("setGlobalSchedule",t)},setCompanyScheduleAccess({commit:e},t){e("setCompanyScheduleAccess",t)},setInvalidResourceName({commit:e,state:t},s){if(t.invalidResourceName!==s){e("setInvalidResourceName",s)}},setInvalidResourceType({commit:e,state:t},s){if(t.invalidResourceType!==s){e("setInvalidResourceType",s)}},setWeekStart({commit:e},t){e("setWeekStart",t)},setCheckedForAll({commit:e},{type:t,isChecked:s}){e("setCheckedForAll",{type:t,isChecked:s})}}}getMutations(){return{init(e,{step:s,resourceId:i,resource:o=null}){e.step=s;e.resourceId=i;e.resource=t.Type.isNull(i)?n():o},setCurrentResourceName(e,t){e.resourceName=t},setAdvertisingResourceTypes(e,t){e.advertisingResourceTypes=t},setCompanyScheduleSlots(e,t){e.companyScheduleSlots=t},updateStep(e,t){e.step=t},updateResource(e,t){e.resource={...e.resource,...t}},setGlobalSchedule(e,t){e.globalSchedule=Boolean(t)},updateFetching(e,t){e.fetching=t},setSaving(e,t){e.isSaving=t},setCompanyScheduleAccess(e,t){e.isCompanyScheduleAccess=t},setInvalidResourceName(e,t){e.invalidResourceName=t},setInvalidResourceType(e,t){e.invalidResourceType=t},setWeekStart(e,t){e.weekStart=t},setCheckedForAll(e,{type:t,isChecked:s}){e.checkedForAll[t]=s}}}}e.ResourceCreationWizardModel=l})(this.BX.Booking.Model=this.BX.Booking.Model||{},BX,BX.Vue3.Vuex,BX.Booking.Const,BX.Booking.Model,BX.Vue3,BX.Booking);
//# sourceMappingURL=resource-creation-wizard.bundle.map.js