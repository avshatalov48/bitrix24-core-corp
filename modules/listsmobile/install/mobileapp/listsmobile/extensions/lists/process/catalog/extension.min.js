jn.define("lists/process/catalog",((t,e,s)=>{const{Loc:i}=t("loc");const{StorageCache:a}=t("storage-cache");const{EntityDetail:o,EntityDetailTabs:c}=t("lists/entity-detail");class l{static openListWidget(t=PageManager){t.openWidget("list",{backdrop:{bounceEnable:true,swipeAllowed:true,mediumPositionPercent:80,onlyMediumPosition:true,forceDismissOnSwipeDown:true,shouldResizeContent:true},groupStyle:true,title:i.getMessage("LISTSMOBILE_PROCESS_CATALOG_TITLE"),onReady:t=>{new l(t)}},t)}static prepareListItem(t){return{id:t.id,title:t.name,imageUrl:t.pictureSrc||"/bitrix/images/lists/default.png",params:{item:t}}}constructor(t){this.list=t;this.cache=new a("lists.process.catalog","catalog");BX.onViewLoaded((()=>{this.setListListeners();this.loadFromCache();this.reload()}))}get layout(){return this.list||layout||{}}setListListeners(){const t={onItemSelected:{callback:this.onItemSelected,context:this}};this.list.setListener(((e,s)=>{if(t[e]){t[e].callback.apply(t[e].context,[s])}}))}onItemSelected(t){o.open(this.layout,{uid:Random.getString(),iBlockId:t.id||0,iBlockTypeId:t.params.item.iBlockTypeId||"",entityId:0,iBlockSectionId:0,socNetGroupId:0,activeTabId:c.DETAIL_TAB})}loadFromCache(){BX.onViewLoaded((()=>{const t=this.cache.get();if(Object.keys(t).length===0){return}this.list.setItems(Object.values(t))}))}reload(){BX.ajax.runAction("listsmobile.Process.loadCatalog",{}).then((t=>{const e=t.data.items.map((t=>l.prepareListItem(t)));this.fillCache(e);this.list.setItems(e)})).catch((t=>{}))}fillCache(t){this.cache.set(t)}}s.exports={ProcessCatalog:l}}));
//# sourceMappingURL=extension.map.js