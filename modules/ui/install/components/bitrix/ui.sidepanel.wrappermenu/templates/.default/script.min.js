(function(){"use strict";BX.namespace("BX.UI");BX.UI.DropdownMenu=function(t){this.container=t.container;this.items=[]};BX.UI.DropdownMenu.prototype={init:function(){var t=this.container.querySelectorAll(".ui-sidepanel-menu-item");for(var e=0;e<t.length;e++){var i={};i.id=e;i.container=null;i.link=null;i.button=null;i.submenu=null;i.container=t[e];i.link=i.container.querySelector(".ui-sidepanel-menu-link");i.operativeItem=i.link.getAttribute("bx-operative")==="Y";this.items.push(i);if(i.container.classList.contains("ui-sidepanel-menu-active")){i.activeItem=true}}this.loadData()},loadData:function(){for(var t=0;t<this.items.length;t++){this.addItem(this.items[t])}},addItem:function(t){var e=new BX.UI.DropdownMenuItem(t);e.menu=this;this.items[t.id]=e},resetItems:function(){for(var t=0;t<this.items.length;t++){if(this.items[t].activeItem){this.items[t].reset()}}},resetSubItems:function(){for(var t=0;t<this.items.length;t++){this.items[t].resetSubItems()}}};BX.UI.DropdownMenuItem=function(t){this.container=t.container;this.link=t.link;this.button=null;this.activeItem=t.activeItem?t.activeItem:null;this.operativeItem=t.operativeItem?t.operativeItem:null;this.submenu=null;this.subItems=[];this.submenuOpen=false;this.newBadge=null;this.counter=null;this.addItem=null;this.init()};BX.UI.DropdownMenuItem.prototype={init:function(){if(this.isSubmenuExist()){this.submenu=this.container.querySelector(".ui-sidepanel-submenu");this.button=this.getToggleButton();this.link.appendChild(this.button)}var t=this.container.querySelectorAll(".ui-sidepanel-submenu-item"),e=false;for(var i=0;i<t.length;i++){var n={};n.id=i;n.container=t[i];this.subItems.push(n);if(n.container.classList.contains("ui-sidepanel-submenu-active")){n.activeSubItem=true;e=true}}this.loadData();if(this.isSubmenuExist()&&(this.activeItem===true&&this.operativeItem===true||e===true)){this.showSubmenu();this.setNewToggleButtonName()}this.loadData();this.addEvents()},loadData:function(){for(var t=0;t<this.subItems.length;t++){this.addSubItem(this.subItems[t])}},activate:function(){this.activeItem=true;this.container.classList.add("ui-sidepanel-menu-active")},reset:function(){this.activeItem=null;this.container.classList.remove("ui-sidepanel-menu-active")},showSubmenu:function(){this.submenuOpen=true;this.submenu.style.height=this.getSubmenuHeight()},hideSubmenu:function(){this.submenuOpen=false;this.submenu.style.height=0},getSubmenuHeight:function(){var t=0;for(var e=0;e<this.subItems.length;e++){t=t+(this.subItems[e].getHeight()+6-3)}return t+"px"},addEvents:function(){this.link.addEventListener("click",function(t){this.menu.resetItems();this.activate();if(this.link.getAttribute("bx-operative")!=="Y"){this.link.classList.add("ui-sidepanel-menu-disable-active-state")}else{this.link.classList.remove("ui-sidepanel-menu-disable-active-state")}if(this.isSubmenuExist()){if(!this.submenuOpen){this.showSubmenu();this.setNewToggleButtonName();this.menu.resetSubItems();t.preventDefault()}else{this.hideSubmenu();this.setDefaultToggleButtonName();this.menu.resetSubItems();t.preventDefault()}}else{if(this.link.classList.contains("ui-sidepanel-menu-disable-active-state")){this.link.classList.remove("ui-sidepanel-menu-disable-active-state")}this.menu.resetSubItems()}}.bind(this))},isSubmenuExist:function(){if(this.container.querySelector(".ui-sidepanel-submenu")){return true}return false},getToggleButton:function(){this.buttonContainer=document.createElement("div");this.buttonContainer.className="ui-sidepanel-toggle-btn";this.setDefaultToggleButtonName();return this.buttonContainer},setNewToggleButtonName:function(){this.buttonContainer.innerHTML=BX.message("UI_SIDEPANEL_MENU_BUTTON_CLOSE")},setDefaultToggleButtonName:function(){this.buttonContainer.innerHTML=BX.message("UI_SIDEPANEL_MENU_BUTTON_OPEN")},getNewItemBadge:function(){this.itemBadgeNewContainer=document.createElement("div");this.itemBadgeNewContainer.className="ui-sidepanel-badge-new";return this.itemBadgeNewContainer},getCounter:function(){this.counterContainer=document.createElement("span");this.counterContainer.className="ui-sidepanel-counter";return this.counterContainer},getAddItem:function(){this.addItemContainer=document.createElement("a");this.addItemContainer.className="ui-sidepanel-add-item";this.setAddItemName();return this.addItemContainer},setAddItemName:function(){this.addItemContainer.innerHTML=BX.message("UI_SIDEPANEL_MENU_ADD_ITEM")},addSubItem:function(t){var e=new BX.UI.DropdownMenuSubItem(t);e.subMenu=this;this.subItems[t.id]=e},resetSubItems:function(){for(var t=0;t<this.subItems.length;t++){if(this.subItems[t].activeSubItem){this.subItems[t].reset()}}}};BX.UI.DropdownMenuSubItem=function(t){this.container=t.container;this.id=t.id;this.activeSubItem=t.activeSubItem?t.activeSubItem:null;this.subMenu=null;this.init()};BX.UI.DropdownMenuSubItem.prototype={init:function(){this.addEvents()},activate:function(){this.activeSubItem=true;this.container.classList.add("ui-sidepanel-submenu-active")},reset:function(){this.activeSubItem=null;this.container.classList.remove("ui-sidepanel-submenu-active")},addEvents:function(){this.container.addEventListener("click",function(){if(this.activeSubItem){return}if(!this.activeSubItem&&!this.activeItem){this.subMenu.menu.resetItems()}this.subMenu.menu.resetSubItems();this.subMenu.resetSubItems();this.activate()}.bind(this))},getHeight:function(){return this.container.offsetHeight}}})();
//# sourceMappingURL=script.map.js