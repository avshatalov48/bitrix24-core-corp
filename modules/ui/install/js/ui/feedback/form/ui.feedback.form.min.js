(function(){var t=BX.namespace("BX.UI.Feedback");var e=[];t.Form=function(t){this.init(t);e.push(this)};t.Form.getList=function(){return e};t.Form.getById=function(t){return e.filter(function(e){return e.id===t})[0]||null};t.Form.prototype={init:function(t){this.id=t.id;this.portal=t.portal;this.presets=t.presets||{};this.form=t.form||{};this.title=t.title||"";this.button=BX(t.button);BX.bind(this.button,"click",this.openPanel.bind(this))},appendPresets:function(t){for(var e in t){if(!t.hasOwnProperty(e)){continue}this.presets[e]=t[e]}},openPanel:function(){BX.SidePanel.Instance.open("ui:feedback-form-"+this.id,{cacheable:true,contentCallback:function(){var t=new BX.Promise;t.fulfill();return t},animationDuration:200,events:{onLoad:this.onSidePanelLoad.bind(this)},width:600})},onSidePanelLoad:function(t){this.formNode=document.createElement("div");var e=document.createElement("div");e.style='margin-bottom: 25px; font: 26px/26px "OpenSans-Light", Helvetica, Arial, sans-serif;';e.textContent=this.title;var n=document.createElement("div");n.style="padding: 20px; overflow-y: auto;";n.appendChild(e);n.appendChild(this.formNode);var i=t.getSlider();i.layout.content.appendChild(n);setTimeout(function(){i.showLoader()},0);this.loadForm(function(){i.closeLoader()})},loadForm:function(t){var e=this.form;if(!e||!e.id||!e.lang||!e.sec){return}if(e.presets){this.appendPresets(e.presets)}(function(t,e,n,i){t["Bitrix24FormObject"]=i;t[i]=t[i]||function(){arguments[0].ref=n;(t[i].forms=t[i].forms||[]).push(arguments[0])};if(t[i]["forms"])return;var o=e.createElement("script");var r=1*new Date;o.async=1;o.src=n+"?"+r;var s=e.getElementsByTagName("script")[0];s.parentNode.insertBefore(o,s)})(window,document,this.portal+"/bitrix/js/crm/form_loader.js","b24form");window.b24form({id:e.id,lang:e.lang,sec:e.sec,type:"inline",node:this.formNode,presets:this.presets,handlers:{load:t}})}}})();
//# sourceMappingURL=ui.feedback.form.map.js