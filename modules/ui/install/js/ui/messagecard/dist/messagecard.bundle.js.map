{"version":3,"file":"messagecard.bundle.js","sources":["../src/basecard.js","../src/messagecard.js"],"sourcesContent":["import {Cache, Dom, Tag, Text, Type, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class BaseCard extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tthis.data = {...options};\n\t\tthis.options = this.data;\n\t\tthis.id = Type.isStringFilled(this.options.id) ? this.options.id : Text.getRandom();\n\t\tthis.hidden = Text.toBoolean(this.options.hidden);\n\t\tthis.onClickHandler = Type.isFunction(this.options.onClick) ? this.options.onClick : () => {};\n\n\t\tthis.onClick = this.onClick.bind(this);\n\n\t\tthis.layout = this.getLayout();\n\t\tthis.header = this.getHeader();\n\t\tthis.body = this.getBody();\n\n\t\tthis.setTitle(this.options.title || '');\n\t\tthis.setHidden(this.options.hidden);\n\n\t\tif (Type.isStringFilled(this.options.className))\n\t\t{\n\t\t\tDom.addClass(this.layout, this.options.className);\n\t\t}\n\n\t\tif (Type.isObject(this.options.attrs))\n\t\t{\n\t\t\tDom.adjust(this.layout, {attrs: this.options.attrs});\n\t\t}\n\n\t\tEvent.bind(this.layout, 'click', this.onClick);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card\">\n\t\t\t\t\t${this.getHeader()}\n\t\t\t\t\t${this.getBody()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHeader(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-header\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetBody(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('body', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-body\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetTitle(title: string)\n\t{\n\t\tthis.getHeader().textContent = title;\n\t}\n\n\tsetHidden(hidden: boolean)\n\t{\n\t\tDom.attr(this.getLayout(), 'hidden', hidden || null);\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n\n\tshow()\n\t{\n\t\tthis.setHidden(false);\n\t}\n\n\tisShown()\n\t{\n\t\treturn Dom.attr(this.getLayout(), 'hidden') === null;\n\t}\n\n\thide()\n\t{\n\t\tthis.setHidden(true);\n\t}\n\n\tgetNode(): HTMLDivElement\n\t{\n\t\treturn this.getLayout();\n\t}\n}","import {Cache, Dom, Tag, Type} from 'main.core';\nimport {BaseCard} from './basecard';\n\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\nimport './css/messagecard.css';\n\nexport class MessageCard extends BaseCard\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t\tactionElements: Array<HTMLElement>\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tDom.addClass(this.getLayout(), 'ui-card-message');\n\n\t\tthis.onCloseClick = this.onCloseClick.bind(this);\n\n\t\tif (this.options.angle === false)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'ui-card-message-without-angle');\n\t\t}\n\n\t\tif (Type.isStringFilled(this.options.icon))\n\t\t{\n\t\t\tDom.append(this.getIcon(), this.getHeader());\n\t\t}\n\n\t\tif (!Type.isArray(this.options.actionElements))\n\t\t{\n\t\t\tthis.options.actionElements = [];\n\t\t}\n\n\t\tDom.append(this.getTitle(), this.getHeader());\n\t\tDom.append(this.getDescription(), this.getBody());\n\n\t\tif (this.options.closeable !== false)\n\t\t{\n\t\t\tDom.append(this.getCloseButton(), this.getLayout());\n\t\t}\n\n\t\tif (this.options.hideActions !== true || this.options.more)\n\t\t{\n\t\t\tDom.append(this.getActionsContainer(), this.getLayout());\n\t\t}\n\n\t\tif (this.isAllowRestoreState())\n\t\t{\n\t\t\tconst state = MessageCard.cache.get(this.options.id, {shown: true});\n\t\t\tif (state.shown)\n\t\t\t{\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisAllowRestoreState(): boolean\n\t{\n\t\treturn this.options.restoreState && this.options.id;\n\t}\n\n\tgetIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-icon\" style=\"background-image: url(${this.options.icon})\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-title\">${this.options.header}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-description\">${this.options.description}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"ui-card-message-close-button\" \n\t\t\t\t\tonclick=\"${this.onCloseClick}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonCloseClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.hide();\n\t\tthis.emit('onClose');\n\t\tMessageCard.cache.set(this.options.id, {shown: false});\n\t}\n\n\tgetActionsContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionsContainer', () => {\n\t\t\tconst actionWrapper =  Tag.render`\n\t\t\t\t<div class=\"ui-card-message-actions\"></div>\n\t\t\t`;\n\n\t\t\tthis.options.actionElements.forEach((element: HTMLElement) => {\n\t\t\t\tactionWrapper.appendChild(element);\n\t\t\t});\n\n\t\t\treturn actionWrapper;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n}"],"names":["BaseCard","options","cache","Cache","MemoryCache","data","id","Type","isStringFilled","Text","getRandom","hidden","toBoolean","onClickHandler","isFunction","onClick","bind","layout","getLayout","header","getHeader","body","getBody","setTitle","title","setHidden","className","Dom","addClass","isObject","attrs","adjust","Event","remember","Tag","render","textContent","attr","emit","EventEmitter","MessageCard","onCloseClick","angle","icon","append","getIcon","isArray","actionElements","getTitle","getDescription","closeable","getCloseButton","hideActions","more","getActionsContainer","isAllowRestoreState","state","get","shown","show","hide","restoreState","description","event","preventDefault","set","actionWrapper","forEach","element","appendChild"],"mappings":"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"}