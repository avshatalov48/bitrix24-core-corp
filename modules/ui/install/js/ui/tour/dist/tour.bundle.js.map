{"version":3,"file":"tour.bundle.js","sources":["../src/step.js","../src/guide-condition-color.js","../src/guide.js","../src/manager.js"],"sourcesContent":["import {Type, Reflection, Event, Dom} from 'main.core';\n\nexport class Step extends Event.EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.target = null;\n\t\tif (\n\t\t\tType.isString(options.target) && options.target !== '' ||\n\t\t\tType.isFunction(options.target) ||\n\t\t\tType.isDomNode(options.target)\n\t\t)\n\t\t{\n\t\t\tthis.target = options.target;\n\t\t}\n\n\t\tthis.id = options.id || null;\n\t\tthis.text = options.text;\n\t\tthis.areaPadding = options.areaPadding;\n\t\tthis.link = options.link || \"\";\n\t\tthis.rounded = options.rounded || false;\n\t\tthis.title = options.title || null;\n\t\tthis.article = options.article || null;\n\t\tthis.position = options.position || null;\n\t\tthis.cursorMode = options.cursorMode || false;\n\t\tthis.targetEvent = options.targetEvent || null;\n\t\tthis.buttons = options.buttons || [];\n\t\tthis.condition = options.condition || null;\n\n\t\tconst events = Type.isPlainObject(options.events) ? options.events : {};\n\n\t\tfor (let eventName in events)\n\t\t{\n\t\t\tconst callback = Type.isFunction(events[eventName]) ? events[eventName] : Reflection.getClass(events[eventName]);\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tthis.subscribe(this.constructor.getFullEventName(eventName), () => {\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCondition()\n\t{\n\t\treturn this.condition;\n\t}\n\n\tgetTarget()\n\t{\n\t\tif (Type.isString(this.target) && this.target !== '')\n\t\t{\n\t\t\treturn document.querySelector(this.target);\n\t\t}\n\n\t\tif (Type.isFunction(this.target))\n\t\t{\n\t\t\treturn this.target();\n\t\t}\n\n\t\treturn this.target;\n\t}\n\n\tgetTargetPos()\n\t{\n\t\tif (Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn Dom.getPosition(this.target);\n\t\t}\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn this.buttons;\n\t}\n\n\tgetAreaPadding()\n\t{\n\t\treturn this.areaPadding;\n\t}\n\n\tgetRounded()\n\t{\n\t\treturn this.rounded;\n\t}\n\n\tgetText()\n\t{\n\t\treturn this.text;\n\t}\n\n\tgetLink()\n\t{\n\t\treturn this.link;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetPosition()\n\t{\n\t\treturn this.position;\n\t}\n\n\tgetArticle()\n\t{\n\t\treturn this.article;\n\t}\n\n\tgetCursorMode()\n\t{\n\t\treturn this.cursorMode;\n\t}\n\n\tgetTargetEvent()\n\t{\n\t\treturn this.targetEvent;\n\t}\n\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"Step:\" + shortName;\n\t}\n\n\tsetTarget(target)\n\t{\n\t\tthis.target = target;\n\t}\n\n\tinitTargetEvent()\n\t{\n\t\tif(Type.isFunction(this.targetEvent))\n\t\t{\n\t\t\tthis.targetEvent();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getTarget().dispatchEvent(new MouseEvent(this.targetEvent))\n\t}\n}\n","/**\n * @namespace {BX.UI}\n */\nexport default class GuideConditionColor\n{\n\tstatic WARNING = '--condition-warning';\n\tstatic ALERT = '--condition-alert';\n\tstatic PRIMARY = '--condition-primary';\n\n}","import { Type, Dom, Reflection, Event, Tag, Text, userOptions, Loc, addCustomEvent } from 'main.core';\nimport { Popup, PopupWindowButton } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\nimport { Step } from './step.js';\nimport GuideConditionColor from './guide-condition-color';\n\nimport 'ui.design-tokens';\nimport './style.css';\n\nexport class Guide extends Event.EventEmitter\n{\n\tstatic ConditionColor = GuideConditionColor;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\t/** @var {Step[]}*/\n\t\tthis.steps = [];\n\t\tif (Array.isArray(options.steps))\n\t\t{\n\t\t\toptions.steps.forEach(step => {\n\t\t\t\tthis.steps.push(new Step(step));\n\t\t\t});\n\t\t}\n\n\t\tif (this.steps.length < 1)\n\t\t{\n\t\t\tthrow new Error(\"BX.UI.Tour.Guide: 'steps' argument is required.\");\n\t\t}\n\n\t\tthis.id = \"ui-tour-guide-\" + Text.getRandom();\n\t\tthis.setId(options.id);\n\n\t\tthis.autoSave = false;\n\n\t\tthis.popup = null;\n\t\tthis.layout = {\n\t\t\toverlay: null,\n\t\t\telement: null,\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\tlink: null,\n\t\t\tbtnContainer: null,\n\t\t\tnextBtn: null,\n\t\t\tbackBtn: null,\n\t\t\tcontent: null,\n\t\t\tfinalContent: null,\n\t\t\tcounter: null,\n\t\t\tcurrentCounter: null,\n\t\t\tcounterItems: []\n\t\t};\n\t\tthis.buttons = options.buttons || \"\";\n\t\tthis.onEvents = options.onEvents || false;\n\t\tthis.currentStepIndex = 0;\n\t\tthis.targetPos = null;\n\t\tthis.clickOnBackBtn = false;\n\t\tthis.helper = top.BX.Helper;\n\t\tthis.targetContainer = Type.isDomNode(options.targetContainer) ? options.targetContainer : null;\n\t\tthis.overlay = Type.isBoolean(options.overlay) ? options.overlay : true;\n\n\t\tthis.finalStep = options.finalStep || false;\n\t\tthis.finalText = options.finalText || \"\";\n\t\tthis.finalTitle = options.finalTitle || \"\";\n\n\t\tthis.simpleMode = options.simpleMode || false;\n\n\t\tthis.setAutoSave(options.autoSave);\n\n\t\tconst events = Type.isPlainObject(options.events) ? options.events : {};\n\t\tfor (let eventName in events)\n\t\t{\n\t\t\tlet cb = Type.isFunction(events[eventName]) ? events[eventName] : Reflection.getClass(events[eventName]);\n\t\t\tif (cb)\n\t\t\t{\n\t\t\t\tthis.subscribe(this.constructor.getFullEventName(eventName), () => {\n\t\t\t\t\tcb();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tEvent.bind(window, \"resize\", this.handleResizeWindow.bind(this));\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetId(id)\n\t{\n\t\tif (Type.isString(id) && id !== '')\n\t\t{\n\t\t\tthis.id = id;\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Boolean}\n\t */\n\tgetAutoSave()\n\t{\n\t\treturn this.autoSave;\n\t}\n\n\tsetAutoSave(mode)\n\t{\n\t\tif (Type.isBoolean(mode))\n\t\t{\n\t\t\tthis.autoSave = mode;\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tconst optionName = \"view_date_\" + this.getId();\n\t\tuserOptions.save(\"ui-tour\", optionName, null, Math.floor(Date.now() / 1000));\n\t\tuserOptions.send(null);\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstart()\n\t{\n\t\tthis.emit(this.constructor.getFullEventName(\"onStart\"), {guide: this});\n\n\t\tif (this.getAutoSave())\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\n\t\tif (this.overlay)\n\t\t{\n\t\t\tthis.setOverlay();\n\t\t}\n\n\t\tconst popup = this.getPopup();\n\t\tpopup.show();\n\n\t\tif (this.popup.getPopupContainer())\n\t\t{\n\t\t\tDom.removeClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\t\t}\n\n\n\t\tthis.showStep();\n\n\t\tDom.addClass(this.layout.backBtn, \"ui-tour-popup-btn-hidden\");\n\n\t\tif (this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), \"ui-tour-selector\");\n\t\t}\n\n\t}\n\n\t/**\n\t * @public\n\t */\n\tclose()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length && this.onEvents)\n\t\t\treturn;\n\n\t\tthis.closeStep();\n\n\t\tthis.emit(this.constructor.getFullEventName(\"onFinish\"), { guide: this});\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tif (this.layout.cursor)\n\t\t{\n\t\t\tDom.remove(this.layout.cursor);\n\t\t\tthis.layout.cursor = null;\n\t\t}\n\n\t\tif (this.onEvents)\n\t\t{\n\t\t\tthis.increaseCurrentStepIndex();\n\t\t}\n\n\t\tDom.remove(this.layout.overlay);\n\t\tDom.removeClass(document.body, \"ui-tour-body-overflow\");\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tthis.getCurrentStep().getTarget().classList.remove(\"ui-tour-selector\");\n\t\t}\n\n\t\tthis.layout.overlay = null;\n\t\tthis.layout.element = null;\n\t\tthis.layout.title = null;\n\t\tthis.layout.text = null;\n\t\tthis.layout.link = null;\n\t\tthis.layout.btnContainer = null;\n\t\tthis.layout.nextBtn = null;\n\t\tthis.layout.backBtn = null;\n\t\tthis.layout.content = null;\n\t\tthis.layout.finalContent = null;\n\t\tthis.layout.counter = null;\n\t\tthis.layout.currentCounter = null;\n\t\tthis.layout.counterItems = [];\n\t\tthis.popup = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowStep()\n\t{\n\t\tthis.adjustEvents();\n\n\t\tDom.removeClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tif (this.layout.element)\n\t\t{\n\t\t\tDom.removeClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\t}\n\n\t\tif (this.layout.backBtn)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.layout.backBtn.style.display = \"block\";\n\t\t\t}, 10);\n\t\t}\n\n\t\tif (this.overlay)\n\t\t{\n\t\t\tthis.setOverlayElementForm();\n\t\t}\n\n\t\tif(this.getCurrentStep())\n\t\t{\n\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t}\n\t\tthis.setPopupData();\n\t}\n\n\t/**\n\t * @public\n\t */\n\tshowNextStep()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getCurrentStep().getCursorMode())\n\t\t{\n\t\t\tthis.showCursor();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst popup = this.getPopup();\n\t\t\tpopup.show();\n\n\t\t\tif (popup.getPopupContainer())\n\t\t\t{\n\t\t\t\tDom.removeClass(popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\t\t\t}\n\n\t\t\tif(this.getCurrentStep())\n\t\t\t{\n\t\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t\t}\n\t\t\tthis.setPopupData();\n\t\t}\n\n\t\tthis.adjustEvents();\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\t}\n\t/**\n\t * @private\n\t */\n\tadjustEvents()\n\t{\n\t\tlet currentStep = this.getCurrentStep();\n\t\tcurrentStep.emit(currentStep.constructor.getFullEventName(\"onShow\"), {\n\t\t\tstep : currentStep,\n\t\t\tguide: this\n\t\t});\n\n\t\tif (currentStep.getTarget())\n\t\t{\n\t\t\tlet close = this.close.bind(this);\n\t\t\tconst clickEvent = (e) => {\n\t\t\t\tif (e.isTrusted) {\n\t\t\t\t\tclose();\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit('UI.Tour.Guide:clickTarget', this);\n\t\t\t\tEvent.unbind(currentStep.getTarget(), 'click', clickEvent);\n\t\t\t};\n\n\t\t\tEvent.bind(currentStep.getTarget(), 'click', clickEvent);\n\n\t\t\tthis.subscribe('UI.Tour.Guide:onFinish', () => {\n\t\t\t\tEvent.unbind(currentStep.getTarget(), 'click', close);\n\t\t\t});\n\n\t\t\tconst targetPos = currentStep.getTarget().getBoundingClientRect();\n\t\t\tconst targetPosWindow = Dom.getPosition(currentStep.getTarget());\n\t\t\tif (!this.isTargetVisible(targetPos))\n\t\t\t{\n\t\t\t\tthis.scrollToTarget(targetPosWindow);\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * @private\n\t */\n\tcloseStep()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tcurrentStep.emit(currentStep.constructor.getFullEventName(\"onClose\"), {\n\t\t\t\tstep : currentStep,\n\t\t\t\tguide: this\n\t\t\t});\n\n\t\t\tconst target = currentStep.getTarget();\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\tDom.removeClass(target, \"ui-tour-selector\")\n\t\t\t}\n\t\t}\n\t}\n\n\tsetPopupPosition()\n\t{\n\t\tif (!this.getCurrentStep().getTarget()\n\t\t\t|| this.targetPos === null\n\t\t\t|| this.getCurrentStep().getPosition() === 'center')\n\t\t{\n\t\t\tthis.getPopup().setBindElement(null);\n\t\t\tthis.getPopup().setOffset({ offsetLeft: 0, offsetTop: 0});\n\t\t\tthis.getPopup().setAngle(false);\n\t\t\tthis.getPopup().adjustPosition();\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet offsetLeft = 0;\n\t\tlet offsetTop = -15;\n\t\tlet angleOffset = 0;\n\t\tlet anglePosition = \"top\";\n\n\t\tconst bindOptions = {\n\t\t\tforceTop: true,\n\t\t\tforceLeft: true,\n\t\t\tforceBindPosition: true\n\t\t};\n\n\t\tconst popupWidth = this.getPopup().getPopupContainer().offsetWidth;\n\t\tconst clientWidth = document.documentElement.clientWidth;\n\n\t\tif (this.getCurrentStep().getPosition() === \"right\")\n\t\t{\n\t\t\tanglePosition = \"left\";\n\t\t\toffsetLeft = this.targetPos.width + 30;\n\t\t\toffsetTop = this.targetPos.height + this.getAreaPadding();\n\n\t\t\tif ((this.targetPos.left + offsetLeft + popupWidth) > clientWidth)\n\t\t\t{\n\t\t\t\tlet left = this.targetPos.left - popupWidth;\n\t\t\t\tif (left > 0)\n\t\t\t\t{\n\t\t\t\t\toffsetLeft = -popupWidth - 30;\n\t\t\t\t\tanglePosition = \"right\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.getCurrentStep().getPosition() === \"left\")\n\t\t{\n\t\t\tanglePosition = \"right\";\n\t\t\toffsetLeft = - this.targetPos.width - (popupWidth - this.targetPos.width) - 40;\n\t\t\toffsetTop = this.targetPos.height + this.getAreaPadding();\n\n\t\t\tif ((this.targetPos.right + offsetLeft + popupWidth) < clientWidth)\n\t\t\t{\n\t\t\t\tlet left =  this.targetPos.left - popupWidth;\n\t\t\t\tif (left < 0)\n\t\t\t\t{\n\t\t\t\t\toffsetLeft = this.targetPos.width  + 40;\n\t\t\t\t\tanglePosition = \"left\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse // top || bottom\n\t\t{\n\t\t\tbindOptions.forceLeft = false;\n\t\t\tbindOptions.forceTop = false;\n\n\t\t\tif (this.getCurrentStep().getRounded())\n\t\t\t{\n\t\t\t\tif (!this.onEvents)\n\t\t\t\t{\n\t\t\t\t\toffsetTop = - (this.layout.element.getAttribute(\"r\") - this.targetPos.height / 2 + 10);\n\t\t\t\t}\n\t\t\t\tangleOffset = 0;\n\t\t\t\toffsetLeft = this.targetPos.width / 2;\n\t\t\t}\n\t\t\telse if (this.targetPos.width < 30)\n\t\t\t{\n\t\t\t\toffsetLeft = this.targetPos.width / 2;\n\t\t\t\toffsetTop = -15;\n\t\t\t\tangleOffset = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\toffsetLeft = 25;\n\n\t\t\t\tif (!this.onEvents)\n\t\t\t\t{\n\t\t\t\t\toffsetTop = - (this.layout.element.getAttribute(\"height\") / 2 - this.targetPos.height / 2 + 10);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\toffsetTop = 0;\n\t\t\t\t}\n\n\t\t\t\tangleOffset = 0;\n\t\t\t}\n\t\t}\n\n\t\tlet bindElement = this.getCurrentStep().getTarget();\n\n\t\tif(this.getCurrentStep().getPosition() === 'center')\n\t\t\tbindElement = window;\n\n\t\tthis.getPopup().setBindElement(bindElement);\n\t\tthis.getPopup().setOffset({offsetLeft: offsetLeft, offsetTop: -offsetTop});\n\t\tthis.getPopup().setAngle({position: anglePosition, offset: angleOffset});\n\t\tthis.getPopup().adjustPosition(bindOptions);\n\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetOverlay()\n\t{\n\t\tthis.layout.overlay = Tag.render`\n\t\t\t<svg class=\"ui-tour-overlay\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" preserveAspectRatio=\"none\">\n\t\t\t\t<mask id=\"hole\">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<filter id=\"ui-tour-filter\">\n\t\t\t\t\t\t\t<feGaussianBlur stdDeviation=\"0\"/>\n\t\t\t\t\t\t</filter>\n\t\t\t\t\t</defs>\n\t\t\t\t\t<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\"></rect>\n\t\t\t\t\t<rect id=\"rect\" class=\"ui-tour-overlay-element ui-tour-overlay-element-rect\" x=\"1035.5\" y=\"338\" width=\"422\" rx=\"2\" ry=\"2\" height=\"58\" filter=\"url(#ui-tour-filter)\"></rect>\n\t\t\t\t\t<circle id=\"circle\" class=\"ui-tour-overlay-element ui-tour-overlay-element-circle\" cx=\"10\" cy=\"10\" r=\"10\" filter=\"url(#ui-tour-filter)\"></circle>\n\t\t\t\t</mask>\n\t\t\t\t<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#000\" mask=\"url(#hole)\"></rect>\n\t\t\t</svg>\n\t\t`;\n\n\t\tDom.addClass(document.body, 'ui-tour-body-overflow');\n\t\tif (this.targetContainer)\n\t\t{\n\t\t\t// Dom.append(this.layout.overlay, document.body);\n\t\t\tDom.append(this.layout.overlay, this.targetContainer);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(this.layout.overlay, document.body);\n\t\t}\n\n\t\tthis.setOverlayElementForm();\n\t}\n\n\tsetOverlayElementForm()\n\t{\n\t\tif (this.getCurrentStep().getRounded())\n\t\t{\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\").style.display = \"none\";\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\").style.display = \"block\";\n\t\t\tthis.layout.element = this.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\").style.display = \"none\";\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\").style.display = \"block\";\n\t\t\tthis.layout.element = this.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\");\n\t\t}\n\n\t\treturn this.layout.element;\n\t}\n\n\thandleResizeWindow()\n\t{\n\t\tif (this.layout.element && this.getCurrentStep())\n\t\t{\n\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t * @param {Element} node\n\t */\n\tsetCoords(node)\n\t{\n\t\tif (!node)\n\t\t{\n\t\t\tif(this.layout.element)\n\t\t\t{\n\t\t\t\tthis.layout.element.style.display = \"none\";\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.targetPos = node.getBoundingClientRect();\n\n\t\tif (this.layout.element)\n\t\t{\n\t\t\tthis.layout.element.style.display = \"block\";\n\n\t\t\tif (this.getCurrentStep().getRounded())\n\t\t\t{\n\t\t\t\tthis.layout.element.setAttribute('cx', this.targetPos.left + this.targetPos.width / 2);\n\t\t\t\tthis.layout.element.setAttribute('cy', this.targetPos.top + this.targetPos.height / 2);\n\t\t\t\tthis.layout.element.setAttribute('r', this.targetPos.width / 2 + this.getAreaPadding());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.element.setAttribute('x', this.targetPos.left - this.getAreaPadding());\n\t\t\t\tthis.layout.element.setAttribute('y', this.targetPos.top - this.getAreaPadding());\n\t\t\t\tthis.layout.element.setAttribute('width', this.targetPos.width + this.getAreaPadding()*2);\n\t\t\t\tthis.layout.element.setAttribute('height', this.targetPos.height + this.getAreaPadding()*2);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAreaPadding()\n\t{\n\t\tlet padding = 15;\n\t\tif (this.getCurrentStep().getAreaPadding() >= 0)\n\t\t{\n\t\t\tpadding = this.getCurrentStep().getAreaPadding();\n\t\t}\n\n\t\treturn padding;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tincreaseCurrentStepIndex()\n\t{\n\t\tthis.currentStepIndex++;\n\n\t\tif (this.currentStepIndex + 1 === this.steps.length && !this.finalStep && !this.onEvents)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.layout.nextBtn.textContent = Loc.getMessage(\"JS_UI_TOUR_BUTTON_CLOSE\");\n\t\t\t}, 200);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\treduceCurrentStepIndex()\n\t{\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.currentStepIndex < this.steps.length && !this.finalStep)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.layout.nextBtn.textContent = Loc.getMessage(\"JS_UI_TOUR_BUTTON\");\n\t\t\t}, 200);\n\t\t}\n\n\t\tthis.currentStepIndex--;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetPopup()\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tlet bindElement = this.getCurrentStep()\n\t\t\t\t? this.getCurrentStep().getTarget()\n\t\t\t\t: window;\n\n\t\t\tlet className = 'popup-window-ui-tour popup-window-ui-tour-opacity';\n\n\t\t\tif (this.getCurrentStep().getCondition())\n\t\t\t{\n\t\t\t\tif (Type.isString(this.getCurrentStep().getCondition()))\n\t\t\t\t{\n\t\t\t\t\tclassName = className + ' --condition-' + this.getCurrentStep().getCondition().toLowerCase();\n\t\t\t\t}\n\n\t\t\t\tif (Type.isObject(this.getCurrentStep().getCondition()))\n\t\t\t\t{\n\t\t\t\t\tclassName = className + ' --condition-' + this.getCurrentStep().getCondition()?.color.toLowerCase();\n\t\t\t\t}\n\n\t\t\t\tif (this.getCurrentStep().getCondition()?.top !== false)\n\t\t\t\t{\n\t\t\t\t\tclassName = className + ' --condition';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.onEvents\n\t\t\t\t? className = className + ' popup-window-ui-tour-animate'\n\t\t\t\t: null;\n\n\t\t\tlet buttons = [];\n\n\t\t\tif(this.getCurrentStep() && this.getCurrentStep().getButtons().length > 0)\n\t\t\t{\n\t\t\t\tthis.getCurrentStep().getButtons().forEach((item)=> {\n\t\t\t\t\tbuttons.push(new PopupWindowButton({\n\t\t\t\t\t\ttext: item.text,\n\t\t\t\t\t\tclassName: 'ui-btn ui-btn-sm ui-btn-primary ui-btn-round',\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: Type.isFunction(item.event) ? item.event : null\n\t\t\t\t\t\t}\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tconst popupWidth = this.onEvents ? 280 : 420;\n\n\t\t\tthis.popup = new Popup({\n\t\t\t\ttargetContainer: this.targetContainer,\n\t\t\t\tcontent: this.getContent(),\n\t\t\t\tbindElement: bindElement,\n\t\t\t\tclassName: className,\n\t\t\t\tautoHide: this.onEvents ? false : true,\n\t\t\t\toffsetTop: 15,\n\t\t\t\twidth: popupWidth,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tnoAllPaddings: true,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t\tforceBindPosition: true\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose : (popup) => {\n\t\t\t\t\t\tif(popup.destroyed === false && this.onEvents)\n\t\t\t\t\t\t\tEventEmitter.emit('UI.Tour.Guide:onPopupClose', this);\n\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: buttons\n\t\t\t});\n\n\t\t\tconst conditionNodeTop = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-condition-top\">\n\t\t\t\t\t<div class=\"ui-tour-popup-condition-angle\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst conditionNodeBottom = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-condition-bottom\"></div>\n\t\t\t`;\n\n\t\t\tif (Type.isString(this.getCurrentStep().getCondition()))\n\t\t\t{\n\t\t\t\tDom.append(conditionNodeTop, this.popup.getContentContainer());\n\t\t\t}\n\n\t\t\tif (Type.isObject(this.getCurrentStep().getCondition()))\n\t\t\t{\n\t\t\t\tif (this.getCurrentStep().getCondition()?.top !== false)\n\t\t\t\t{\n\t\t\t\t\tDom.append(conditionNodeTop, this.popup.getContentContainer());\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (this.getCurrentStep().getCondition()?.bottom !== false)\n\t\t\t{\n\t\t\t\tDom.append(conditionNodeBottom, this.popup.getContentContainer());\n\t\t\t}\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContent()\n\t{\n\t\tif (!this.layout.content)\n\t\t{\n\t\t\tlet linkNode = '';\n\t\t\tif(this.getCurrentStep().getLink() || this.getCurrentStep().getArticle())\n\t\t\t{\n\t\t\t\tlinkNode = this.getLink();\n\t\t\t}\n\t\t\tthis.layout.content = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup ${this.simpleMode ? 'ui-tour-popup-simple' : ''} ${this.onEvents ? 'ui-tour-popup-events' : ''}\" >\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t<div class=\"ui-tour-popup-content\">\n\t\t\t\t\t\t${this.getText()}\n\t\t\t\t\t\t${linkNode}\n\t\t\t\t\t</div>\n\t\t\t\t\t${linkNode}\n\t\t\t\t\t<div class=\"ui-tour-popup-footer\">\n\t\t\t\t\t\t<div class=\"ui-tour-popup-index\">\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getCounterItems()}\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getCurrentCounter()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getBtnContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.content;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetPopupData()\n\t{\n\t\tEvent.unbindAll(this.layout.link, 'click');\n\n\t\tthis.getTitle().innerHTML = this.getCurrentStep().getTitle();\n\t\tthis.getText().innerHTML = this.getCurrentStep().getText();\n\n\t\tif (this.getCurrentStep().getArticle() || this.getCurrentStep().getLink())\n\t\t{\n\t\t\tDom.removeClass(this.layout.link,  \"ui-tour-popup-link-hide\");\n\n\t\t\tif (this.getCurrentStep().getArticle())\n\t\t\t{\n\t\t\t\tEvent.bind(this.layout.link, \"click\", this.handleClickLink.bind(this));\n\t\t\t}\n\n\t\t\tif (this.getCurrentStep().getLink())\n\t\t\t{\n\t\t\t\tthis.getLink().setAttribute('href', this.getCurrentStep().getLink());\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\tDom.addClass(this.layout.link,  \"ui-tour-popup-link-hide\");\n\t\t}\n\n\t\tthis.getCurrentCounter().textContent = Loc.getMessage(\"JS_UI_TOUR_STEP_INDEX_TEXT\")\n\t\t\t.replace('#NUMBER#', this.currentStepIndex + 1)\n\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tif (this.layout.counterItems[i])\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-current');\n\t\t\t\tDom.removeClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-passed');\n\t\t\t}\n\n\t\t\tif (i === this.currentStepIndex)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-current');\n\t\t\t}\n\t\t\telse if (i < this.currentStepIndex)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-passed')\n\t\t\t}\n\t\t}\n\n\t\tthis.setPopupPosition();\n\t}\n\n\t/**\n\t * @public\n\t */\n\thandleClickLink()\n\t{\n\t\tevent.preventDefault();\n\n\t\tif(!this.helper)\n\t\t{\n\t\t\tthis.helper = top.BX.Helper;\n\t\t}\n\n\t\tthis.helper.show(\"redirect=detail&code=\" + this.getCurrentStep().getArticle());\n\n\t\tif(this.onEvent)\n\t\t{\n\t\t\tif(this.helper.isOpen())\n\t\t\t\tthis.getPopup().setAutoHide(false);\n\n\t\t\tEventEmitter.subscribe(this.helper.getSlider(), 'SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\tthis.getPopup().setAutoHide(true);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetTitle()\n\t{\n\t\tif (this.layout.title === null)\n\t\t{\n\t\t\tthis.layout.title = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-title\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetText()\n\t{\n\t\tif (this.layout.text === null)\n\t\t{\n\t\t\tthis.layout.text = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-text\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.text;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetLink()\n\t{\n\t\tif (!this.layout.link)\n\t\t{\n\t\t\tthis.layout.link = Tag.render`\n\t\t\t\t<a target=\"_blank\" href=\"\" class=\"ui-tour-popup-link\">\n\t\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_LINK\")}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.link;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetCurrentCounter()\n\t{\n\t\tif (this.layout.currentCounter === null)\n\t\t{\n\t\t\tthis.layout.currentCounter = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-counter\">\n\t\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_STEP_INDEX_TEXT\")\n\t\t\t\t\t\t.replace('#NUMBER#', this.currentStepIndex + 1)\n\t\t\t\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length)}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.currentCounter;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBtnContainer()\n\t{\n\t\tif (this.layout.btnContainer === null)\n\t\t{\n\t\t\tthis.layout.btnContainer = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-btn-block\"></div>\n\t\t\t`;\n\n\t\t\tthis.layout.nextBtn = Tag.render`\n\t\t\t\t<button id=\"next\" class=\"ui-tour-popup-btn-next\">\n\t\t\t\t\t${this.simpleMode ? Loc.getMessage(\"JS_UI_TOUR_BUTTON_SIMPLE\") : Loc.getMessage(\"JS_UI_TOUR_BUTTON\")}\n\t\t\t\t</button>\n\t\t\t`;\n\n\n\t\t\tthis.layout.backBtn = Tag.render`\n\t\t\t\t<button id=\"back\" class=\"ui-tour-popup-btn-back\">\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tDom.append(this.layout.backBtn, this.layout.btnContainer);\n\t\t\tDom.append(this.layout.nextBtn, this.layout.btnContainer);\n\n\t\t\tEvent.bind(this.layout.nextBtn, \"click\", this.handleClickOnNextBtn.bind(this));\n\t\t\tEvent.bind(this.layout.backBtn, \"click\", this.handleClickOnBackBtn.bind(this));\n\n\t\t}\n\n\t\treturn this.layout.btnContainer;\n\t}\n\n\tgetCounterItems()\n\t{\n\t\tif (this.layout.counter === null)\n\t\t{\n\t\t\tthis.layout.counter = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-index-items\">\n\t\t\t\t</span>\n\t\t\t`;\n\t\t}\n\n\t\tthis.layout.counterItems = [];\n\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tconst currentStepIndex = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-index-item\">\n\t\t\t\t</span>\n\t\t\t`;\n\n\t\t\tthis.layout.counterItems.push(currentStepIndex);\n\t\t\tDom.append(currentStepIndex, this.layout.counter);\n\t\t}\n\n\t\treturn this.layout.counter;\n\t}\n\n\t/**\n\t * @returns {Step}\n\t */\n\tgetCurrentStep()\n\t{\n\t\treturn this.steps[this.currentStepIndex];\n\t}\n\n\t/**\n\t * @returns {Step}\n\t */\n\tgetPreviousStep()\n\t{\n\t\tif (this.steps[this.currentStepIndex - 1])\n\t\t{\n\t\t\treturn this.steps[this.currentStepIndex - 1];\n\t\t}\n\t}\n\n\thandleClickOnNextBtn()\n\t{\n\t\tDom.addClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\tDom.addClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tthis.clickOnBackBtn = false;\n\t\tif (this.getCurrentStep())\n\t\t{\n\t\t\tthis.closeStep();\n\t\t}\n\n\t\tthis.increaseCurrentStepIndex();\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\tif (this.finalStep)\n\t\t\t{\n\t\t\t\tthis.setFinalStep()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.showStep();\n\t\t\t}, 200);\n\n\t\t\tif (Dom.hasClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden');\n\t\t\t}\n\t\t}\n\n\t}\n\n\thandleClickOnBackBtn()\n\t{\n\t\tDom.addClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\tDom.addClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tthis.closeStep();\n\t\tthis.reduceCurrentStepIndex();\n\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\tDom.addClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden');\n\t\t}\n\n\t\tthis.clickOnBackBtn = true;\n\t\tsetTimeout(() => {\n\t\t\tthis.layout.backBtn.style.display = \"none\";\n\t\t\tthis.showStep();\n\t\t}, 200);\n\n\t\tif (this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\t}\n\n\tsetFinalStep()\n\t{\n\t\tthis.layout.element.style.display = \"none\";\n\t\tthis.getPopup().destroy();\n\n\t\tconst finalPopup = this.getFinalPopup();\n\t\tfinalPopup.show();\n\t\tDom.addClass(finalPopup.getPopupContainer(), \"popup-window-ui-tour-final-show\");\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetFinalPopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tcontent: this.getFinalContent(),\n\t\t\tclassName: 'popup-window-ui-tour-final',\n\t\t\toffsetTop: this.onEvents ? 0 : 15,\n\t\t\toffsetLeft: 35,\n\t\t\tmaxWidth: 430,\n\t\t\tminWidth: 300\n\t\t});\n\n\t\treturn this.popup;\n\t}\n\n\tgetFinalContent()\n\t{\n\t\tif (!this.layout.finalContent)\n\t\t{\n\t\t\tthis.layout.finalContent = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup\">\n\t\t\t\t\t<div class=\"ui-tour-popup-title\">\n\t\t\t\t\t\t${this.finalTitle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-tour-popup-content\">\n\t\t\t\t\t\t<div class=\"ui-tour-popup-text\">\n\t\t\t\t\t\t\t${this.finalText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-tour-popup-footer-btn\">\n\t\t\t\t\t\t${this.getFinalBtn()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finalContent;\n\t}\n\n\tgetFinalBtn()\n\t{\n\t\tconst buttons = [];\n\n\t\tif (this.buttons !== \"\")\n\t\t{\n\t\t\tfor (let i = 0; i < this.buttons.length; i++)\n\t\t\t{\n\t\t\t\tlet btn = Tag.render`\n\t\t\t\t\t<button class=\"${this.buttons[i].class}\" onclick=\"${this.buttons[i].events.click}\">\n\t\t\t\t\t${this.buttons[i].text}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\t\tbuttons.push(btn);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet btn = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-round\" onclick=\"${this.close.bind(this)}\">\n\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_BUTTON_CLOSE\")}\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tbuttons.push(btn);\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisTargetVisible(node)\n\t{\n\t\treturn (\n\t\t\tnode.top >= 0 &&\n\t\t\tnode.left >= 0 &&\n\t\t\tnode.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n\t\t\tnode.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t\t);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToTarget(target)\n\t{\n\t\twindow.scrollTo(0, target.y - this.getAreaPadding());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"UI.Tour.Guide:\" + shortName;\n\t}\n\n\tshowCursor()\n\t{\n\t\tthis.setCursorPos();\n\n\t\tsetTimeout(() => {\n\t\t\tthis.animateCursor();\n\t\t}, 1000);\n\t}\n\n\tgetCursor()\n\t{\n\t\tif (!this.layout.cursor)\n\t\t{\n\t\t\tthis.layout.cursor = Tag.render`\n\t\t\t\t<div class=\"ui-tour-cursor\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.layout.cursor, 'transitionend', () => {\n\t\t\t\tthis.getCurrentStep().initTargetEvent();\n\t\t\t});\n\t\t\tDom.append(this.layout.cursor, document.body);\n\t\t}\n\n\t\treturn this.layout.cursor;\n\t}\n\n\tsetCursorPos()\n\t{\n\t\tconst targetPos = this.getCurrentStep().getTargetPos();\n\n\t\tlet left = targetPos.left + targetPos.width / 2;\n\n\t\tif (left < 0)\n\t\t{\n\t\t\tleft = 0;\n\t\t}\n\n\t\tthis.cursorPaddingTop = 30;\n\t\tlet top = targetPos.bottom + this.cursorPaddingTop;\n\n\t\tif (top < 0)\n\t\t{\n\t\t\ttop = 0;\n\t\t}\n\n\t\tDom.adjust(this.getCursor(), {\n\t\t\tstyle: {\n\t\t\t\ttop: top + 'px',\n\t\t\t\tleft: left + 'px'\n\t\t\t}\n\t\t});\n\n\t}\n\n\tanimateCursor()\n\t{\n\t\tconst adjustment = this.cursorPaddingTop + this.getCurrentStep().getTargetPos().height / 2;\n\t\tthis.layout.cursor.style.transform = 'translateY(-' + adjustment + 'px)';\n\t}\n}\n","import { Type} from 'main.core';\nimport { Guide } from './guide.js';\n\nclass Manager {\n\n\tconstructor()\n\t{\n\t\tthis.guides = new Map();\n\t\tthis.autoStartQueue = [];\n\t\tthis.currentGuide = null;\n\t}\n\n\tcreate(options)\n\t{\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tconst id = options.id;\n\t\tif (!Type.isString(id) && id !== '')\n\t\t{\n\t\t\tthrow new Error(\"'id' parameter is required.\")\n\t\t}\n\n\t\tif (this.get(id))\n\t\t{\n\t\t\tthrow new Error(\"The tour instance with the same 'id' already exists.\");\n\t\t}\n\n\t\tconst guide = new Guide(options);\n\t\tthis.guides.set(guide, true);\n\n\t\treturn guide;\n\t}\n\n\tadd(options)\n\t{\n\t\tconst guide = this.create(options);\n\n\t\tguide.subscribe(\"UI.Tour.Guide:onFinish\", () => {\n\t\t\tthis.handleTourFinish(guide);\n\t\t});\n\n\t\tif (!this.currentGuide)\n\t\t{\n\t\t\tthis.currentGuide = guide;\n\t\t\tguide.start();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.autoStartQueue.push(guide);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} id\n\t * @returns {Guide|null}\n\t */\n\tget(id)\n\t{\n\t\treturn this.guides.get(id);\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} id\n\t */\n\tremove(id)\n\t{\n\t\tthis.guides.delete(id);\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Guide|null}\n\t */\n\tgetCurrentGuide()\n\t{\n\t\treturn this.currentGuide;\n\t}\n\n\t/**\n\t * @private\n\t * @param {Guide} guide\n\t */\n\thandleTourFinish(guide)\n\t{\n\t\tthis.currentGuide = null;\n\t\tthis.remove(guide.getId());\n\n\t\tconst autoStartGuide = this.autoStartQueue.shift();\n\t\tif (autoStartGuide)\n\t\t{\n\t\t\tthis.currentGuide = autoStartGuide;\n\t\t\tautoStartGuide.start();\n\t\t}\n\t}\n}\n\nexport default new Manager();"],"names":["Step","options","target","Type","isString","isFunction","isDomNode","id","text","areaPadding","link","rounded","title","article","position","cursorMode","targetEvent","buttons","condition","events","isPlainObject","callback","eventName","Reflection","getClass","subscribe","constructor","getFullEventName","document","querySelector","Dom","getPosition","getTarget","dispatchEvent","MouseEvent","shortName","Event","EventEmitter","GuideConditionColor","Guide","steps","Array","isArray","forEach","step","push","length","Error","Text","getRandom","setId","autoSave","popup","layout","overlay","element","btnContainer","nextBtn","backBtn","content","finalContent","counter","currentCounter","counterItems","onEvents","currentStepIndex","targetPos","clickOnBackBtn","helper","top","BX","Helper","targetContainer","isBoolean","finalStep","finalText","finalTitle","simpleMode","setAutoSave","cb","bind","window","handleResizeWindow","mode","optionName","getId","userOptions","save","Math","floor","Date","now","send","emit","guide","getAutoSave","setOverlay","getPopup","show","getPopupContainer","removeClass","showStep","addClass","getCurrentStep","closeStep","destroy","cursor","remove","increaseCurrentStepIndex","body","classList","adjustEvents","setTimeout","style","display","setOverlayElementForm","setCoords","setPopupData","getCursorMode","showCursor","currentStep","close","clickEvent","e","isTrusted","unbind","getBoundingClientRect","targetPosWindow","isTargetVisible","scrollToTarget","setBindElement","setOffset","offsetLeft","offsetTop","setAngle","adjustPosition","angleOffset","anglePosition","bindOptions","forceTop","forceLeft","forceBindPosition","popupWidth","offsetWidth","clientWidth","documentElement","width","height","getAreaPadding","left","right","getRounded","getAttribute","bindElement","offset","Tag","render","append","node","setAttribute","padding","textContent","Loc","getMessage","className","getCondition","toLowerCase","isObject","color","getButtons","item","PopupWindowButton","click","event","Popup","getContent","autoHide","closeIcon","noAllPaddings","onPopupClose","destroyed","conditionNodeTop","conditionNodeBottom","getContentContainer","bottom","linkNode","getLink","getArticle","getTitle","getText","getCounterItems","getCurrentCounter","getBtnContainer","unbindAll","innerHTML","handleClickLink","replace","i","setPopupPosition","preventDefault","onEvent","isOpen","setAutoHide","getSlider","handleClickOnNextBtn","handleClickOnBackBtn","setFinalStep","hasClass","reduceCurrentStepIndex","finalPopup","getFinalPopup","getFinalContent","maxWidth","minWidth","getFinalBtn","btn","innerHeight","clientHeight","innerWidth","scrollTo","y","setCursorPos","animateCursor","initTargetEvent","getTargetPos","cursorPaddingTop","adjust","getCursor","adjustment","transform","Manager","guides","Map","autoStartQueue","currentGuide","get","set","create","handleTourFinish","start","autoStartGuide","shift"],"mappings":"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"}