{"version":3,"file":"tour.bundle.js","sources":["../src/step.js","../src/guide.js","../src/manager.js"],"sourcesContent":["import {Type, Reflection, Event, Dom} from 'main.core';\n\nexport class Step extends Event.EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.target = null;\n\t\tif (\n\t\t\tType.isString(options.target) && options.target !== '' ||\n\t\t\tType.isFunction(options.target) ||\n\t\t\tType.isDomNode(options.target)\n\t\t)\n\t\t{\n\t\t\tthis.target = options.target;\n\t\t}\n\n\t\tthis.id = options.id || null;\n\t\tthis.text = options.text;\n\t\tthis.areaPadding = options.areaPadding;\n\t\tthis.link = options.link || \"\";\n\t\tthis.rounded = options.rounded || false;\n\t\tthis.title = options.title || null;\n\t\tthis.article = options.article || null;\n\t\tthis.position = options.position || null;\n\t\tthis.cursorMode = options.cursorMode || false;\n\t\tthis.targetEvent = options.targetEvent || null;\n\t\tthis.buttons = options.buttons || [];\n\n\t\tconst events = Type.isPlainObject(options.events) ? options.events : {};\n\n\t\tfor (let eventName in events)\n\t\t{\n\t\t\tconst callback = Type.isFunction(events[eventName]) ? events[eventName] : Reflection.getClass(events[eventName]);\n\t\t\tif (callback)\n\t\t\t{\n\t\t\t\tthis.subscribe(this.constructor.getFullEventName(eventName), () => {\n\t\t\t\t\tcallback();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetTarget()\n\t{\n\t\tif (Type.isString(this.target) && this.target !== '')\n\t\t{\n\t\t\treturn document.querySelector(this.target);\n\t\t}\n\n\t\tif (Type.isFunction(this.target))\n\t\t{\n\t\t\treturn this.target();\n\t\t}\n\n\t\treturn this.target;\n\t}\n\n\tgetTargetPos()\n\t{\n\t\tif (Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn Dom.getPosition(this.target);\n\t\t}\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn this.buttons;\n\t}\n\n\tgetAreaPadding()\n\t{\n\t\treturn this.areaPadding;\n\t}\n\n\tgetRounded()\n\t{\n\t\treturn this.rounded;\n\t}\n\n\tgetText()\n\t{\n\t\treturn this.text;\n\t}\n\n\tgetLink()\n\t{\n\t\treturn this.link;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetPosition()\n\t{\n\t\treturn this.position;\n\t}\n\n\tgetArticle()\n\t{\n\t\treturn this.article;\n\t}\n\n\tgetCursorMode()\n\t{\n\t\treturn this.cursorMode;\n\t}\n\n\tgetTargetEvent()\n\t{\n\t\treturn this.targetEvent;\n\t}\n\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"Step:\" + shortName;\n\t}\n\n\tsetTarget(target)\n\t{\n\t\tthis.target = target;\n\t}\n\n\tinitTargetEvent()\n\t{\n\t\tif(Type.isFunction(this.targetEvent))\n\t\t{\n\t\t\tthis.targetEvent();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getTarget().dispatchEvent(new MouseEvent(this.targetEvent))\n\t}\n}\n","import { Type, Dom, Reflection, Event, Tag, Text, userOptions, Loc } from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Step} from './step.js';\n\nexport class Guide extends Event.EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\t/** @var {Step[]}*/\n\t\tthis.steps = [];\n\t\tif (Array.isArray(options.steps))\n\t\t{\n\t\t\toptions.steps.forEach(step => {\n\t\t\t\tthis.steps.push(new Step(step));\n\t\t\t});\n\t\t}\n\n\t\tif (this.steps.length < 1)\n\t\t{\n\t\t\tthrow new Error(\"BX.UI.Tour.Guide: 'steps' argument is required.\");\n\t\t}\n\n\t\tthis.id = \"ui-tour-guide-\" + Text.getRandom();\n\t\tthis.setId(options.id);\n\n\t\tthis.autoSave = false;\n\n\t\tthis.popup = null;\n\t\tthis.layout = {\n\t\t\toverlay: null,\n\t\t\telement: null,\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\tlink: null,\n\t\t\tbtnContainer: null,\n\t\t\tnextBtn: null,\n\t\t\tbackBtn: null,\n\t\t\tcontent: null,\n\t\t\tfinalContent: null,\n\t\t\tcounter: null,\n\t\t\tcurrentCounter: null,\n\t\t\tcounterItems: []\n\t\t};\n\t\tthis.buttons = options.buttons || \"\";\n\t\tthis.onEvents = options.onEvents || false;\n\t\tthis.currentStepIndex = 0;\n\t\tthis.targetPos = null;\n\t\tthis.clickOnBackBtn = false;\n\t\tthis.helper = BX.Helper;\n\n\t\tthis.finalStep = options.finalStep || false;\n\t\tthis.finalText = options.finalText || \"\";\n\t\tthis.finalTitle = options.finalTitle || \"\";\n\n\t\tthis.simpleMode = options.simpleMode || false;\n\n\t\tthis.setAutoSave(options.autoSave);\n\n\t\tconst events = Type.isPlainObject(options.events) ? options.events : {};\n\t\tfor (let eventName in events)\n\t\t{\n\t\t\tlet cb = Type.isFunction(events[eventName]) ? events[eventName] : Reflection.getClass(events[eventName]);\n\t\t\tif (cb)\n\t\t\t{\n\t\t\t\tthis.subscribe(this.constructor.getFullEventName(eventName), () => {\n\t\t\t\t\tcb();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tEvent.bind(window, \"resize\", this.handleResizeWindow.bind(this));\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetId(id)\n\t{\n\t\tif (Type.isString(id) && id !== '')\n\t\t{\n\t\t\tthis.id = id;\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Boolean}\n\t */\n\tgetAutoSave()\n\t{\n\t\treturn this.autoSave;\n\t}\n\n\tsetAutoSave(mode)\n\t{\n\t\tif (Type.isBoolean(mode))\n\t\t{\n\t\t\tthis.autoSave = mode;\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tconst optionName = \"view_date_\" + this.getId();\n\t\tuserOptions.save(\"ui-tour\", optionName, null, Math.floor(Date.now() / 1000));\n\t\tuserOptions.send(null);\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstart()\n\t{\n\t\tthis.emit(this.constructor.getFullEventName(\"onStart\"), {guide: this});\n\n\t\tif (this.getAutoSave())\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\n\t\tthis.setOverlay();\n\n\t\tconst popup = this.getPopup();\n\t\tpopup.show();\n\n\t\tif (this.popup.getPopupContainer())\n\t\t{\n\t\t\tDom.removeClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\t\t}\n\n\n\t\tthis.showStep();\n\n\t\tDom.addClass(this.layout.backBtn, \"ui-tour-popup-btn-hidden\");\n\n\t\tif (this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), \"ui-tour-selector\");\n\t\t}\n\n\t}\n\n\t/**\n\t * @public\n\t */\n\tclose()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length && this.onEvents)\n\t\t\treturn;\n\n\t\tthis.closeStep();\n\n\t\tthis.emit(this.constructor.getFullEventName(\"onFinish\"), { guide: this});\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tif (this.layout.cursor)\n\t\t{\n\t\t\tDom.remove(this.layout.cursor);\n\t\t\tthis.layout.cursor = null;\n\t\t}\n\n\t\tif (this.onEvents)\n\t\t{\n\t\t\tthis.increaseCurrentStepIndex();\n\t\t}\n\n\t\tDom.remove(this.layout.overlay);\n\t\tDom.removeClass(document.body, \"ui-tour-body-overflow\");\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tthis.getCurrentStep().getTarget().classList.remove(\"ui-tour-selector\");\n\t\t}\n\n\t\tthis.layout.overlay = null;\n\t\tthis.layout.element = null;\n\t\tthis.layout.title = null;\n\t\tthis.layout.text = null;\n\t\tthis.layout.link = null;\n\t\tthis.layout.btnContainer = null;\n\t\tthis.layout.nextBtn = null;\n\t\tthis.layout.backBtn = null;\n\t\tthis.layout.content = null;\n\t\tthis.layout.finalContent = null;\n\t\tthis.layout.counter = null;\n\t\tthis.layout.currentCounter = null;\n\t\tthis.layout.counterItems = [];\n\t\tthis.popup = null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowStep()\n\t{\n\t\tthis.adjustEvents();\n\n\t\tDom.removeClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tif (this.layout.element)\n\t\t{\n\t\t\tDom.removeClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\t}\n\n\t\tsetTimeout(function() {\n\t\t\tthis.layout.backBtn.style.display = \"block\";\n\t\t}.bind(this), 10);\n\n\t\tthis.setOverlayElementForm();\n\n\t\tif(this.getCurrentStep())\n\t\t{\n\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t}\n\t\tthis.setPopupData();\n\t}\n\n\t/**\n\t * @public\n\t */\n\tshowNextStep()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getCurrentStep().getCursorMode())\n\t\t{\n\t\t\tthis.showCursor();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst popup = this.getPopup();\n\t\t\tpopup.show();\n\n\t\t\tif (popup.getPopupContainer())\n\t\t\t{\n\t\t\t\tDom.removeClass(popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\t\t\t}\n\n\t\t\tif(this.getCurrentStep())\n\t\t\t{\n\t\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t\t}\n\t\t\tthis.setPopupData();\n\t\t}\n\n\t\tthis.adjustEvents();\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\t}\n\t/**\n\t * @private\n\t */\n\tadjustEvents()\n\t{\n\t\tlet currentStep = this.getCurrentStep();\n\t\tcurrentStep.emit(currentStep.constructor.getFullEventName(\"onShow\"), {\n\t\t\tstep : currentStep,\n\t\t\tguide: this\n\t\t});\n\n\t\tif (currentStep.getTarget())\n\t\t{\n\t\t\tlet close = this.close.bind(this);\n\t\t\tconst clickEvent = (e) => {\n\t\t\t\tif (e.isTrusted) {\n\t\t\t\t\tclose();\n\t\t\t\t}\n\t\t\t\tEventEmitter.emit('UI.Tour.Guide:clickTarget', this);\n\t\t\t\tEvent.unbind(currentStep.getTarget(), 'click', clickEvent);\n\t\t\t};\n\n\t\t\tEvent.bind(currentStep.getTarget(), 'click', clickEvent);\n\n\t\t\tthis.subscribe('UI.Tour.Guide:onFinish', () => {\n\t\t\t\tEvent.unbind(currentStep.getTarget(), 'click', close);\n\t\t\t});\n\n\t\t\tconst targetPos = currentStep.getTarget().getBoundingClientRect();\n\t\t\tconst targetPosWindow = Dom.getPosition(currentStep.getTarget());\n\t\t\tif (!this.isTargetVisible(targetPos))\n\t\t\t{\n\t\t\t\tthis.scrollToTarget(targetPosWindow);\n\t\t\t}\n\t\t}\n\t}\n\t/**\n\t * @private\n\t */\n\tcloseStep()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tcurrentStep.emit(currentStep.constructor.getFullEventName(\"onClose\"), {\n\t\t\t\tstep : currentStep,\n\t\t\t\tguide: this\n\t\t\t});\n\n\t\t\tconst target = currentStep.getTarget();\n\t\t\tif (target)\n\t\t\t{\n\t\t\t\tDom.removeClass(target, \"ui-tour-selector\")\n\t\t\t}\n\t\t}\n\t}\n\n\tsetPopupPosition()\n\t{\n\t\tif (!this.getCurrentStep().getTarget()\n\t\t\t|| this.targetPos === null\n\t\t\t|| this.getCurrentStep().getPosition() === 'center')\n\t\t{\n\t\t\tthis.getPopup().setBindElement(null);\n\t\t\tthis.getPopup().setOffset({ offsetLeft: 0, offsetTop: 0});\n\t\t\tthis.getPopup().setAngle(false);\n\t\t\tthis.getPopup().adjustPosition();\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet offsetLeft = 0;\n\t\tlet offsetTop = -15;\n\t\tlet angleOffset = 0;\n\t\tlet anglePosition = \"top\";\n\n\t\tconst bindOptions = {\n\t\t\tforceTop: true,\n\t\t\tforceLeft: true,\n\t\t\tforceBindPosition: true\n\t\t};\n\n\t\tconst popupWidth = this.getPopup().getPopupContainer().offsetWidth;\n\t\tconst clientWidth = document.documentElement.clientWidth;\n\n\t\tif (this.getCurrentStep().getPosition() === \"right\")\n\t\t{\n\t\t\tanglePosition = \"left\";\n\t\t\toffsetLeft = this.targetPos.width + 30;\n\t\t\toffsetTop = this.targetPos.height + this.getAreaPadding();\n\n\t\t\tif ((this.targetPos.left + offsetLeft + popupWidth) > clientWidth)\n\t\t\t{\n\t\t\t\tlet left = this.targetPos.left - popupWidth;\n\t\t\t\tif (left > 0)\n\t\t\t\t{\n\t\t\t\t\toffsetLeft = -popupWidth - 30;\n\t\t\t\t\tanglePosition = \"right\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.getCurrentStep().getPosition() === \"left\")\n\t\t{\n\t\t\tanglePosition = \"right\";\n\t\t\toffsetLeft = - this.targetPos.width - (popupWidth - this.targetPos.width) - 40;\n\t\t\toffsetTop = this.targetPos.height + this.getAreaPadding();\n\n\t\t\tif ((this.targetPos.right + offsetLeft + popupWidth) < clientWidth)\n\t\t\t{\n\t\t\t\tlet left =  this.targetPos.left - popupWidth;\n\t\t\t\tif (left < 0)\n\t\t\t\t{\n\t\t\t\t\toffsetLeft = this.targetPos.width  + 40;\n\t\t\t\t\tanglePosition = \"left\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse // top || bottom\n\t\t{\n\t\t\tbindOptions.forceLeft = false;\n\t\t\tbindOptions.forceTop = false;\n\n\t\t\tif (this.getCurrentStep().getRounded())\n\t\t\t{\n\t\t\t\tif (!this.onEvents)\n\t\t\t\t{\n\t\t\t\t\toffsetTop = - (this.layout.element.getAttribute(\"r\") - this.targetPos.height / 2 + 10);\n\t\t\t\t}\n\t\t\t\tangleOffset = 0;\n\t\t\t\toffsetLeft = this.targetPos.width / 2;\n\t\t\t}\n\t\t\telse if (this.targetPos.width < 30)\n\t\t\t{\n\t\t\t\toffsetLeft = this.targetPos.width / 2;\n\t\t\t\toffsetTop = -15;\n\t\t\t\tangleOffset = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\toffsetLeft = 25;\n\n\t\t\t\tif (!this.onEvents)\n\t\t\t\t{\n\t\t\t\t\toffsetTop = - (this.layout.element.getAttribute(\"height\") / 2 - this.targetPos.height / 2 + 10);\n\t\t\t\t}\n\n\t\t\t\tangleOffset = 0;\n\t\t\t}\n\t\t}\n\n\t\tif(this.onEvents)\n\t\t{\n\t\t\toffsetTop = 0;\n\t\t\toffsetLeft = -50;\n\t\t\tangleOffset = 120;\n\t\t}\n\t\t\n\t\t// console.log(\"this.target\", this.getCurrentStep().getTarget());\n\n\t\tlet bindElement = this.getCurrentStep().getTarget();\n\n\t\tif(this.getCurrentStep().getPosition() === 'center')\n\t\t\tbindElement = window;\n\n\t\tthis.getPopup().setBindElement(bindElement);\n\t\tthis.getPopup().setOffset({offsetLeft: offsetLeft, offsetTop: -offsetTop});\n\t\tthis.getPopup().setAngle({position: anglePosition, offset: angleOffset});\n\t\tthis.getPopup().adjustPosition(bindOptions);\n\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetOverlay()\n\t{\n\t\tthis.layout.overlay = Tag.render`\n\t\t\t<svg class=\"ui-tour-overlay\" xmlns=\"http://www.w3.org/2000/svg\" width=\"100%\" height=\"100%\" preserveAspectRatio=\"none\">\n\t\t\t\t<mask id=\"hole\">\n\t\t\t\t\t<defs>\n\t\t\t\t\t\t<filter id=\"ui-tour-filter\">\n\t\t\t\t\t\t\t<feGaussianBlur stdDeviation=\"0\"/>\n\t\t\t\t\t\t</filter>\n\t\t\t\t\t</defs>\n\t\t\t\t\t<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"white\"></rect>\n\t\t\t\t\t<rect id=\"rect\" class=\"ui-tour-overlay-element ui-tour-overlay-element-rect\" x=\"1035.5\" y=\"338\" width=\"422\" rx=\"2\" ry=\"2\" height=\"58\" filter=\"url(#ui-tour-filter)\"></rect>\n\t\t\t\t\t<circle id=\"circle\" class=\"ui-tour-overlay-element ui-tour-overlay-element-circle\" cx=\"10\" cy=\"10\" r=\"10\" filter=\"url(#ui-tour-filter)\"></circle>\n\t\t\t\t</mask>\n\t\t\t\t<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" fill=\"#000\" mask=\"url(#hole)\"></rect>\n\t\t\t</svg>\n\t\t`;\n\n\t\tDom.addClass(document.body, 'ui-tour-body-overflow');\n\t\tDom.append(this.layout.overlay, document.body);\n\n\t\tthis.setOverlayElementForm();\n\t}\n\n\tsetOverlayElementForm()\n\t{\n\t\tif (this.getCurrentStep().getRounded())\n\t\t{\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\").style.display = \"none\";\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\").style.display = \"block\";\n\t\t\tthis.layout.element = this.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-circle\").style.display = \"none\";\n\t\t\tthis.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\").style.display = \"block\";\n\t\t\tthis.layout.element = this.layout.overlay.querySelector(\".ui-tour-overlay-element-rect\");\n\t\t}\n\n\t\treturn this.layout.element;\n\t}\n\n\thandleResizeWindow()\n\t{\n\t\tif (this.layout.element && this.getCurrentStep())\n\t\t{\n\t\t\tthis.setCoords(this.getCurrentStep().getTarget());\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t * @param {Element} node\n\t */\n\tsetCoords(node)\n\t{\n\t\tif (!node)\n\t\t{\n\t\t\tif(this.layout.element)\n\t\t\t{\n\t\t\t\tthis.layout.element.style.display = \"none\";\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.targetPos = node.getBoundingClientRect();\n\n\t\tif (this.layout.element)\n\t\t{\n\t\t\tthis.layout.element.style.display = \"block\";\n\n\t\t\tif (this.getCurrentStep().getRounded())\n\t\t\t{\n\t\t\t\tthis.layout.element.setAttribute('cx', this.targetPos.left + this.targetPos.width / 2);\n\t\t\t\tthis.layout.element.setAttribute('cy', this.targetPos.top + this.targetPos.height / 2);\n\t\t\t\tthis.layout.element.setAttribute('r', this.targetPos.width / 2 + this.getAreaPadding());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.layout.element.setAttribute('x', this.targetPos.left - this.getAreaPadding());\n\t\t\t\tthis.layout.element.setAttribute('y', this.targetPos.top - this.getAreaPadding());\n\t\t\t\tthis.layout.element.setAttribute('width', this.targetPos.width + this.getAreaPadding()*2);\n\t\t\t\tthis.layout.element.setAttribute('height', this.targetPos.height + this.getAreaPadding()*2);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAreaPadding()\n\t{\n\t\tlet padding = 15;\n\t\tif (this.getCurrentStep().getAreaPadding() >= 0)\n\t\t{\n\t\t\tpadding = this.getCurrentStep().getAreaPadding();\n\t\t}\n\n\t\treturn padding;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tincreaseCurrentStepIndex()\n\t{\n\t\tthis.currentStepIndex++;\n\n\t\tif (this.currentStepIndex + 1 === this.steps.length && !this.finalStep && !this.onEvents)\n\t\t{\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.layout.nextBtn.textContent = Loc.getMessage(\"JS_UI_TOUR_BUTTON_CLOSE\");\n\t\t\t}.bind(this), 200);\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\treduceCurrentStepIndex()\n\t{\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.currentStepIndex < this.steps.length && !this.finalStep)\n\t\t{\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.layout.nextBtn.textContent = Loc.getMessage(\"JS_UI_TOUR_BUTTON\");\n\t\t\t}.bind(this), 200);\n\t\t}\n\n\t\tthis.currentStepIndex--;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetPopup()\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tlet bindElement = window;\n\n\t\t\tif(this.getCurrentStep())\n\t\t\t\tbindElement = this.getCurrentStep().getTarget();\n\n\t\t\tlet className = 'popup-window-ui-tour popup-window-ui-tour-opacity';\n\t\t\tthis.onEvents\n\t\t\t\t? className = className + ' popup-window-ui-tour-animate'\n\t\t\t\t: null;\n\n\t\t\tlet buttons = [];\n\n\t\t\tif(this.getCurrentStep() && this.getCurrentStep().getButtons().length > 0)\n\t\t\t{\n\t\t\t\tthis.getCurrentStep().getButtons().forEach((item)=> {\n\t\t\t\t\tbuttons.push(new BX.PopupWindowButton({\n\t\t\t\t\t\ttext: item.text,\n\t\t\t\t\t\tclassName: 'ui-btn ui-btn-sm ui-btn-primary ui-btn-round',\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: Type.isFunction(item.event) ? item.event : null\n\t\t\t\t\t\t}\n\t\t\t\t\t}))\n\t\t\t\t})\n\t\t\t}\n\n\t\t\tthis.popup = new BX.PopupWindow({\n\t\t\t\tcontent: this.getContent(),\n\t\t\t\tbindElement: bindElement,\n\t\t\t\tclassName: className,\n\t\t\t\tautoHide: this.onEvents ? false : true,\n\t\t\t\toffsetTop: 15,\n\t\t\t\toffsetLeft: 30,\n\t\t\t\tmaxWidth: this.onEvents ? 280 : 420,\n\t\t\t\tminWidth: this.onEvents ? 280 : 420,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t\tforceBindPosition: true\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose : (popup) => {\n\t\t\t\t\t\tif(popup.destroyed === false && this.onEvents)\n\t\t\t\t\t\t\tEventEmitter.emit('UI.Tour.Guide:onPopupClose', this);\n\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tbuttons: buttons\n\t\t\t});\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContent()\n\t{\n\t\tif (!this.layout.content)\n\t\t{\n\t\t\tlet linkNode = '';\n\t\t\tif(this.getCurrentStep().getLink() || this.getCurrentStep().getArticle())\n\t\t\t{\n\t\t\t\tlinkNode = this.getLink();\n\t\t\t}\n\t\t\tthis.layout.content = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup ${this.simpleMode ? 'ui-tour-popup-simple' : ''} ${this.onEvents ? 'ui-tour-popup-events' : ''}\" >\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t<div class=\"ui-tour-popup-content\">\n\t\t\t\t\t\t${this.getText()}\n\t\t\t\t\t\t${linkNode}\n\t\t\t\t\t</div>\n\t\t\t\t\t${linkNode}\n\t\t\t\t\t<div class=\"ui-tour-popup-footer\">\n\t\t\t\t\t\t<div class=\"ui-tour-popup-index\">\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getCounterItems()}\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getCurrentCounter()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t${this.onEvents ? '' : this.getBtnContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.content;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetPopupData()\n\t{\n\t\tEvent.unbindAll(this.layout.link, 'click');\n\n\t\tthis.getTitle().innerHTML = this.getCurrentStep().getTitle();\n\t\tthis.getText().innerHTML = this.getCurrentStep().getText();\n\n\t\tif (this.getCurrentStep().getArticle() || this.getCurrentStep().getLink())\n\t\t{\n\t\t\tDom.removeClass(this.layout.link,  \"ui-tour-popup-link-hide\");\n\n\t\t\tif (this.getCurrentStep().getArticle())\n\t\t\t{\n\t\t\t\tEvent.bind(this.layout.link, \"click\", this.handleClickLink.bind(this));\n\t\t\t}\n\n\t\t\tif (this.getCurrentStep().getLink())\n\t\t\t{\n\t\t\t\tthis.getLink().setAttribute('href', this.getCurrentStep().getLink());\n\t\t\t}\n\n\t\t}\n\t\telse {\n\t\t\tDom.addClass(this.layout.link,  \"ui-tour-popup-link-hide\");\n\t\t}\n\n\t\tthis.getCurrentCounter().textContent = Loc.getMessage(\"JS_UI_TOUR_STEP_INDEX_TEXT\")\n\t\t\t.replace('#NUMBER#', this.currentStepIndex + 1)\n\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tif (this.layout.counterItems[i])\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-current');\n\t\t\t\tDom.removeClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-passed');\n\t\t\t}\n\n\t\t\tif (i === this.currentStepIndex)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-current');\n\t\t\t}\n\t\t\telse if (i < this.currentStepIndex)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.counterItems[i], 'ui-tour-popup-index-item-passed')\n\t\t\t}\n\t\t}\n\n\t\tthis.setPopupPosition();\n\t}\n\n\t/**\n\t * @public\n\t */\n\thandleClickLink()\n\t{\n\t\tevent.preventDefault();\n\n\t\tif(!this.helper)\n\t\t\tthis.helper = BX.Helper;\n\n\t\tthis.helper.show(\"redirect=detail&code=\" + this.getCurrentStep().getArticle());\n\n\t\tif(this.onEvent)\n\t\t{\n\t\t\tif(this.helper.isOpen())\n\t\t\t\tthis.getPopup().setAutoHide(false);\n\n\t\t\tEventEmitter.subscribe(this.helper.getSlider(), 'SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\tthis.getPopup().setAutoHide(true);\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetTitle()\n\t{\n\t\tif (this.layout.title === null)\n\t\t{\n\t\t\tthis.layout.title = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-title\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetText()\n\t{\n\t\tif (this.layout.text === null)\n\t\t{\n\t\t\tthis.layout.text = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-text\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.text;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetLink()\n\t{\n\t\tif (!this.layout.link)\n\t\t{\n\t\t\tthis.layout.link = Tag.render`\n\t\t\t\t<a target=\"_blank\" href=\"\" class=\"ui-tour-popup-link\">\n\t\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_LINK\")}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.link;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetCurrentCounter()\n\t{\n\t\tif (this.layout.currentCounter === null)\n\t\t{\n\t\t\tthis.layout.currentCounter = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-counter\">\n\t\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_STEP_INDEX_TEXT\")\n\t\t\t\t\t\t.replace('#NUMBER#', this.currentStepIndex + 1)\n\t\t\t\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length)}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.currentCounter;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetBtnContainer()\n\t{\n\t\tif (this.layout.btnContainer === null)\n\t\t{\n\t\t\tthis.layout.btnContainer = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup-btn-block\"></div>\n\t\t\t`;\n\n\t\t\tthis.layout.nextBtn = Tag.render`\n\t\t\t\t<button id=\"next\" class=\"ui-tour-popup-btn-next\">\n\t\t\t\t\t${this.simpleMode ? Loc.getMessage(\"JS_UI_TOUR_BUTTON_SIMPLE\") : Loc.getMessage(\"JS_UI_TOUR_BUTTON\")}\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tthis.layout.backBtn = Tag.render`\n\t\t\t\t<button id=\"back\" class=\"ui-tour-popup-btn-back\">\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tDom.append(this.layout.backBtn, this.layout.btnContainer);\n\t\t\tDom.append(this.layout.nextBtn, this.layout.btnContainer);\n\n\t\t\tEvent.bind(this.layout.nextBtn, \"click\", this.handleClickOnNextBtn.bind(this));\n\t\t\tEvent.bind(this.layout.backBtn, \"click\", this.handleClickOnBackBtn.bind(this));\n\n\t\t}\n\n\t\treturn this.layout.btnContainer;\n\t}\n\n\tgetCounterItems()\n\t{\n\t\tif (this.layout.counter === null)\n\t\t{\n\t\t\tthis.layout.counter = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-index-items\">\n\t\t\t\t</span>\n\t\t\t`;\n\t\t}\n\n\t\tthis.layout.counterItems = [];\n\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tconst currentStepIndex = Tag.render`\n\t\t\t\t<span class=\"ui-tour-popup-index-item\">\n\t\t\t\t</span>\n\t\t\t`;\n\n\t\t\tthis.layout.counterItems.push(currentStepIndex);\n\t\t\tDom.append(currentStepIndex, this.layout.counter);\n\t\t}\n\n\t\treturn this.layout.counter;\n\t}\n\n\t/**\n\t * @returns {Step}\n\t */\n\tgetCurrentStep()\n\t{\n\t\treturn this.steps[this.currentStepIndex];\n\t}\n\n\t/**\n\t * @returns {Step}\n\t */\n\tgetPreviousStep()\n\t{\n\t\tif (this.steps[this.currentStepIndex - 1])\n\t\t{\n\t\t\treturn this.steps[this.currentStepIndex - 1];\n\t\t}\n\t}\n\n\thandleClickOnNextBtn()\n\t{\n\t\tDom.addClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\tDom.addClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tthis.clickOnBackBtn = false;\n\t\tif (this.getCurrentStep())\n\t\t{\n\t\t\tthis.closeStep();\n\t\t}\n\n\t\tthis.increaseCurrentStepIndex();\n\n\t\tif (this.getCurrentStep() && this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\tif (this.finalStep)\n\t\t\t{\n\t\t\t\tthis.setFinalStep()\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function() {\n\t\t\t\tthis.showStep();\n\t\t\t}.bind(this), 200);\n\n\t\t\tif (Dom.hasClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden');\n\t\t\t}\n\t\t}\n\n\t}\n\n\thandleClickOnBackBtn()\n\t{\n\t\tDom.addClass(this.layout.element, \"ui-tour-overlay-element-opacity\");\n\t\tDom.addClass(this.popup.getPopupContainer(), \"popup-window-ui-tour-opacity\");\n\n\t\tthis.closeStep();\n\t\tthis.reduceCurrentStepIndex();\n\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\tDom.addClass(this.layout.backBtn, 'ui-tour-popup-btn-hidden');\n\t\t}\n\n\t\tthis.clickOnBackBtn = true;\n\t\tsetTimeout(function() {\n\t\t\tthis.layout.backBtn.style.display = \"none\";\n\t\t\tthis.showStep();\n\t\t}.bind(this), 200);\n\n\t\tif (this.getCurrentStep().getTarget())\n\t\t{\n\t\t\tDom.addClass(this.getCurrentStep().getTarget(), 'ui-tour-selector');\n\t\t}\n\t}\n\n\tsetFinalStep()\n\t{\n\t\tthis.layout.element.style.display = \"none\";\n\t\tthis.getPopup().destroy();\n\n\t\tconst finalPopup = this.getFinalPopup();\n\t\tfinalPopup.show();\n\t\tDom.addClass(finalPopup.getPopupContainer(), \"popup-window-ui-tour-final-show\");\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetFinalPopup()\n\t{\n\t\tthis.popup = new BX.PopupWindow({\n\t\t\tcontent: this.getFinalContent(),\n\t\t\tclassName: 'popup-window-ui-tour-final',\n\t\t\toffsetTop: this.onEvents ? 0 : 15,\n\t\t\toffsetLeft: 35,\n\t\t\tmaxWidth: 430,\n\t\t\tminWidth: 300\n\t\t});\n\n\t\treturn this.popup;\n\t}\n\n\tgetFinalContent()\n\t{\n\t\tif (!this.layout.finalContent)\n\t\t{\n\t\t\tthis.layout.finalContent = Tag.render`\n\t\t\t\t<div class=\"ui-tour-popup\">\n\t\t\t\t\t<div class=\"ui-tour-popup-title\">\n\t\t\t\t\t\t${this.finalTitle}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-tour-popup-content\">\n\t\t\t\t\t\t<div class=\"ui-tour-popup-text\">\n\t\t\t\t\t\t\t${this.finalText}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-tour-popup-footer-btn\">\n\t\t\t\t\t\t${this.getFinalBtn()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finalContent;\n\t}\n\n\tgetFinalBtn()\n\t{\n\t\tconst buttons = [];\n\n\t\tif (this.buttons !== \"\")\n\t\t{\n\t\t\tfor (let i = 0; i < this.buttons.length; i++)\n\t\t\t{\n\t\t\t\tlet btn = Tag.render`\n\t\t\t\t\t<button class=\"${this.buttons[i].class}\" onclick=\"${this.buttons[i].events.click}\">\n\t\t\t\t\t${this.buttons[i].text}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\t\tbuttons.push(btn);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet btn = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-round\" onclick=\"${this.close.bind(this)}\">\n\t\t\t\t${Loc.getMessage(\"JS_UI_TOUR_BUTTON_CLOSE\")}\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tbuttons.push(btn);\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tisTargetVisible(node)\n\t{\n\t\treturn (\n\t\t\tnode.top >= 0 &&\n\t\t\tnode.left >= 0 &&\n\t\t\tnode.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&\n\t\t\tnode.right <= (window.innerWidth || document.documentElement.clientWidth)\n\t\t);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToTarget(target)\n\t{\n\t\twindow.scrollTo(0, target.y - this.getAreaPadding());\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn \"UI.Tour.Guide:\" + shortName;\n\t}\n\n\tshowCursor()\n\t{\n\t\tthis.setCursorPos();\n\n\t\tsetTimeout(function() {\n\t\t\tthis.animateCursor();\n\t\t}.bind(this), 1000);\n\t}\n\n\tgetCursor()\n\t{\n\t\tif (!this.layout.cursor)\n\t\t{\n\t\t\tthis.layout.cursor = Tag.render`\n\t\t\t\t<div class=\"ui-tour-cursor\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.layout.cursor, 'transitionend', function() {\n\t\t\t\tthis.getCurrentStep().initTargetEvent();\n\t\t\t}.bind(this));\n\t\t\tDom.append(this.layout.cursor, document.body);\n\t\t}\n\n\t\treturn this.layout.cursor;\n\t}\n\n\tsetCursorPos()\n\t{\n\t\tconst targetPos = this.getCurrentStep().getTargetPos();\n\n\t\tlet left = targetPos.left + targetPos.width / 2;\n\n\t\tif (left < 0)\n\t\t{\n\t\t\tleft = 0;\n\t\t}\n\n\t\tthis.cursorPaddingTop = 30;\n\t\tlet top = targetPos.bottom + this.cursorPaddingTop;\n\n\t\tif (top < 0)\n\t\t{\n\t\t\ttop = 0;\n\t\t}\n\n\t\tDom.adjust(this.getCursor(), {\n\t\t\tstyle: {\n\t\t\t\ttop: top + 'px',\n\t\t\t\tleft: left + 'px'\n\t\t\t}\n\t\t});\n\n\t}\n\n\tanimateCursor()\n\t{\n\t\tconst adjustment = this.cursorPaddingTop + this.getCurrentStep().getTargetPos().height / 2;\n\t\tthis.layout.cursor.style.transform = 'translateY(-' + adjustment + 'px)';\n\t}\n}\n","import { Type} from 'main.core';\nimport { Guide } from './guide.js';\n\nclass Manager {\n\n\tconstructor()\n\t{\n\t\tthis.guides = new Map();\n\t\tthis.autoStartQueue = [];\n\t\tthis.currentGuide = null;\n\t}\n\n\tcreate(options)\n\t{\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tconst id = options.id;\n\t\tif (!Type.isString(id) && id !== '')\n\t\t{\n\t\t\tthrow new Error(\"'id' parameter is required.\")\n\t\t}\n\n\t\tif (this.get(id))\n\t\t{\n\t\t\tthrow new Error(\"The tour instance with the same 'id' already exists.\");\n\t\t}\n\n\t\tconst guide = new Guide(options);\n\t\tthis.guides.set(guide, true);\n\n\t\treturn guide;\n\t}\n\n\tadd(options)\n\t{\n\t\tconst guide = this.create(options);\n\n\t\tguide.subscribe(\"UI.Tour.Guide:onFinish\", () => {\n\t\t\tthis.handleTourFinish(guide);\n\t\t});\n\n\t\tif (!this.currentGuide)\n\t\t{\n\t\t\tthis.currentGuide = guide;\n\t\t\tguide.start();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.autoStartQueue.push(guide);\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} id\n\t * @returns {Guide|null}\n\t */\n\tget(id)\n\t{\n\t\treturn this.guides.get(id);\n\t}\n\n\t/**\n\t * @public\n\t * @param {string} id\n\t */\n\tremove(id)\n\t{\n\t\tthis.guides.delete(id);\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Guide|null}\n\t */\n\tgetCurrentGuide()\n\t{\n\t\treturn this.currentGuide;\n\t}\n\n\t/**\n\t * @private\n\t * @param {Guide} guide\n\t */\n\thandleTourFinish(guide)\n\t{\n\t\tthis.currentGuide = null;\n\t\tthis.remove(guide.getId());\n\n\t\tconst autoStartGuide = this.autoStartQueue.shift();\n\t\tif (autoStartGuide)\n\t\t{\n\t\t\tthis.currentGuide = autoStartGuide;\n\t\t\tautoStartGuide.start();\n\t\t}\n\t}\n}\n\nexport default new Manager();"],"names":["Step","options","target","Type","isString","isFunction","isDomNode","id","text","areaPadding","link","rounded","title","article","position","cursorMode","targetEvent","buttons","events","isPlainObject","eventName","callback","Reflection","getClass","subscribe","constructor","getFullEventName","document","querySelector","Dom","getPosition","getTarget","dispatchEvent","MouseEvent","shortName","Event","EventEmitter","Guide","steps","Array","isArray","forEach","step","push","length","Error","Text","getRandom","setId","autoSave","popup","layout","overlay","element","btnContainer","nextBtn","backBtn","content","finalContent","counter","currentCounter","counterItems","onEvents","currentStepIndex","targetPos","clickOnBackBtn","helper","BX","Helper","finalStep","finalText","finalTitle","simpleMode","setAutoSave","cb","bind","window","handleResizeWindow","mode","isBoolean","optionName","getId","userOptions","save","Math","floor","Date","now","send","emit","guide","getAutoSave","setOverlay","getPopup","show","getPopupContainer","removeClass","showStep","addClass","getCurrentStep","closeStep","destroy","cursor","remove","increaseCurrentStepIndex","body","classList","adjustEvents","setTimeout","style","display","setOverlayElementForm","setCoords","setPopupData","getCursorMode","showCursor","currentStep","close","clickEvent","e","isTrusted","unbind","getBoundingClientRect","targetPosWindow","isTargetVisible","scrollToTarget","setBindElement","setOffset","offsetLeft","offsetTop","setAngle","adjustPosition","angleOffset","anglePosition","bindOptions","forceTop","forceLeft","forceBindPosition","popupWidth","offsetWidth","clientWidth","documentElement","width","height","getAreaPadding","left","right","getRounded","getAttribute","bindElement","offset","Tag","render","append","node","setAttribute","top","padding","textContent","Loc","getMessage","className","getButtons","item","PopupWindowButton","click","event","PopupWindow","getContent","autoHide","maxWidth","minWidth","closeIcon","onPopupClose","destroyed","linkNode","getLink","getArticle","getTitle","getText","getCounterItems","getCurrentCounter","getBtnContainer","unbindAll","innerHTML","handleClickLink","replace","i","setPopupPosition","preventDefault","onEvent","isOpen","setAutoHide","getSlider","handleClickOnNextBtn","handleClickOnBackBtn","setFinalStep","hasClass","reduceCurrentStepIndex","finalPopup","getFinalPopup","getFinalContent","getFinalBtn","btn","class","bottom","innerHeight","clientHeight","innerWidth","scrollTo","y","setCursorPos","animateCursor","initTargetEvent","getTargetPos","cursorPaddingTop","adjust","getCursor","adjustment","transform","Manager","guides","Map","autoStartQueue","currentGuide","get","set","create","handleTourFinish","start","delete","autoStartGuide","shift"],"mappings":"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"}