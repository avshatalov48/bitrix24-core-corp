{"version":3,"file":"draggable.bundle.js","sources":["../src/events/base.event.js","../src/sensor/events/drag.start.sensor.event.js","../src/sensor/sensor.js","../src/sensor/events/drag.move.sensor.event.js","../src/sensor/events/drag.end.sensor.event.js","../src/sensor/events/drag.drop.sensor.event.js","../src/sensor/mousesensor/mousesensor.js","../src/sensor/touchsensor/touchsensor.js","../src/events/drag.start.event.js","../src/events/drag.move.event.js","../src/events/drag.over.event.js","../src/events/drag.over.container.event.js","../src/events/drag.enter.event.js","../src/events/drag.enter.container.event.js","../src/events/drag.out.event.js","../src/events/drag.out.container.event.js","../src/events/drag.end.event.js","../src/events/drag.over.dropzone.event.js","../src/events/drag.enter.dropzone.event.js","../src/events/drag.out.dropzone.event.js","../src/events/drag.drop.event.js","../src/draggable.js"],"sourcesContent":["import {Event} from 'main.core';\n\nexport default class BaseEvent extends Event.BaseEvent\n{\n\tconstructor(data)\n\t{\n\t\tsuper({data});\n\t}\n}","import BaseEvent from '../../events/base.event';\n\nexport class DragStartSensorEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\toriginalSource: HTMLElement,\n\t\toriginalEvent: MouseEvent | TouchEvent,\n\t\tsourceContainer: HTMLElement,\n\t};\n}","import {Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {DragStartSensorEvent} from './events/drag.start.sensor.event';\n\nexport default class Sensor extends EventEmitter\n{\n\tcontainers: Array<HTMLElement>;\n\toptions: Object;\n\toriginalDragStartEvent: null | MouseEvent | TouchEvent = null;\n\tdragStartEvent: ?DragStartSensorEvent = null;\n\n\tconstructor(container: HTMLElement | Array<HTMLElement> = [], options: Object = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.DragAndDrop.Draggable.Sensor');\n\n\t\tconst {dropzone} = options;\n\t\tthis.containers = Type.isArray(container) ? [...container] : [container];\n\t\tthis.dropzones = Type.isArrayLike(dropzone) ? [...dropzone] : [dropzone];\n\t\tthis.options = {delay: 0, ...options};\n\t}\n\n\taddContainer(...containers: Array<HTMLElement>)\n\t{\n\t\tthis.container = [...this.containers, ...containers];\n\t}\n\n\tremoveContainer(...containers: Array<HTMLElement>)\n\t{\n\t\tthis.containers = this.containers.filter((container) => {\n\t\t\treturn !containers.includes(container);\n\t\t});\n\t}\n\n\tgetContainerByChild(childElement: HTMLElement): ?HTMLElement\n\t{\n\t\treturn this.containers.find((container) => {\n\t\t\treturn container.contains(childElement);\n\t\t});\n\t}\n\n\taddDropzone(...dropzones: Array<HTMLElement>)\n\t{\n\t\tthis.dropzones = [...this.dropzones, ...dropzones];\n\t}\n\n\tremoveDropzone(...dropzones: Array<HTMLElement>)\n\t{\n\t\tthis.dropzones = this.dropzones.filter((dropzone) => {\n\t\t\treturn !dropzones.includes(dropzone);\n\t\t});\n\t}\n\n\tgetDropzoneByChild(childElement: HTMLElement): ?HTMLElement\n\t{\n\t\treturn this.dropzones.find((dropzone) => {\n\t\t\treturn dropzone.contains(childElement);\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tgetElementFromPoint(x: number, y: number): HTMLElement\n\t{\n\t\treturn document.elementFromPoint(x, y);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tpreventDefaultEventAction(event)\n\t{\n\t\tif (event.cancelable)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tisDragging(): boolean\n\t{\n\t\treturn this.dragStartEvent && !this.dragStartEvent.isDefaultPrevented();\n\t}\n\n\tenable()\n\t{\n\t\treturn this;\n\t}\n\n\tdisable()\n\t{\n\t\treturn this;\n\t}\n\n\tgetDragElementByChild(child: HTMLElement): ?HTMLElement\n\t{\n\t\tif (child)\n\t\t{\n\t\t\tconst {dragElement} = this.options;\n\t\t\treturn child.closest(dragElement) || null;\n\t\t}\n\n\t\treturn null;\n\t}\n}","import BaseEvent from '../../events/base.event';\n\nexport class DragMoveSensorEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\toriginalSource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\tover: HTMLElement,\n\t\toverContainer: HTMLElement,\n\t\toriginalEvent: MouseEvent | TouchEvent,\n\t};\n}","import BaseEvent from '../../events/base.event';\n\nexport class DragEndSensorEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\toriginalSource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\tover: HTMLElement,\n\t\toverContainer: HTMLElement,\n\t\toriginalEvent: HTMLElement,\n\t};\n}","import BaseEvent from '../../events/base.event';\n\nexport class DragDropSensorEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\toriginalSource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\tover: HTMLElement,\n\t\toverContainer: HTMLElement,\n\t\toriginalEvent: HTMLElement,\n\t\tdropzone: HTMLElement,\n\t};\n}","import Sensor from '../sensor';\nimport {DragStartSensorEvent} from '../events/drag.start.sensor.event';\nimport {DragMoveSensorEvent} from '../events/drag.move.sensor.event';\nimport {DragEndSensorEvent} from '../events/drag.end.sensor.event';\nimport {DragDropSensorEvent} from '../events/drag.drop.sensor.event';\n\nexport default class MouseSensor extends Sensor\n{\n\tconstructor(container = [], options = {})\n\t{\n\t\tsuper(container, options);\n\n\t\tthis.mousedownTimeoutId = null;\n\n\t\tthis.onMouseDown = this.onMouseDown.bind(this);\n\t\tthis.onMouseMove = this.onMouseMove.bind(this);\n\t\tthis.onMouseUp = this.onMouseUp.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t}\n\n\tenable()\n\t{\n\t\tdocument.addEventListener('mousedown', this.onMouseDown, true);\n\t}\n\n\tdisable()\n\t{\n\t\tdocument.removeEventListener('mousedown', this.onMouseDown, true);\n\t}\n\n\tstartHandleMouseUp()\n\t{\n\t\tdocument.addEventListener('mouseup', this.onMouseUp);\n\t}\n\n\tstopHandleMouseUp()\n\t{\n\t\tdocument.removeEventListener('mouseup', this.onMouseUp);\n\t}\n\n\tstartHandleMouseMove()\n\t{\n\t\tdocument.addEventListener('mousemove', this.onMouseMove);\n\t}\n\n\tstopHandleMouseMove()\n\t{\n\t\tdocument.removeEventListener('mousemove', this.onMouseMove);\n\t}\n\n\tstartPreventContextMenu()\n\t{\n\t\tdocument.addEventListener('contextmenu', this.preventDefaultEventAction, true);\n\t}\n\n\tstopPreventContextMenu()\n\t{\n\t\tdocument.removeEventListener('contextmenu', this.preventDefaultEventAction, true);\n\t}\n\n\tstartPreventNativeDragAndDrop()\n\t{\n\t\tdocument.addEventListener('dragstart', this.preventDefaultEventAction);\n\t}\n\n\tstopPreventNativeDragAndDrop()\n\t{\n\t\tdocument.removeEventListener('dragstart', this.preventDefaultEventAction);\n\t}\n\n\tonMouseDown(event: MouseEvent)\n\t{\n\t\tif (!event.ctrlKey && !event.metaKey && !event.button)\n\t\t{\n\t\t\tthis.originalDragStartEvent = event;\n\t\t\tconst container = this.getContainerByChild(event.target);\n\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\tconst dragElement = this.getDragElementByChild(event.target);\n\t\t\t\tif (dragElement)\n\t\t\t\t{\n\t\t\t\t\tthis.startHandleMouseUp();\n\t\t\t\t\tthis.startPreventNativeDragAndDrop();\n\n\t\t\t\t\tthis.mousedownTimeoutId = setTimeout(() => {\n\t\t\t\t\t\tthis.onDragStart();\n\t\t\t\t\t}, this.options.delay);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonDragStart()\n\t{\n\t\tconst sourceContainer = this.getContainerByChild(\n\t\t\tthis.originalDragStartEvent.target,\n\t\t);\n\n\t\tthis.dragStartEvent = new DragStartSensorEvent({\n\t\t\tclientX: this.originalDragStartEvent.clientX,\n\t\t\tclientY: this.originalDragStartEvent.clientY,\n\t\t\toriginalSource: this.originalDragStartEvent.target,\n\t\t\toriginalEvent: this.originalDragStartEvent,\n\t\t\tsourceContainer,\n\t\t});\n\n\t\tthis.emit('drag:start', this.dragStartEvent);\n\n\t\tif (this.isDragging())\n\t\t{\n\t\t\tthis.startPreventContextMenu();\n\t\t\tthis.startHandleMouseMove();\n\t\t}\n\t}\n\n\tonMouseMove(originalEvent)\n\t{\n\t\tif (this.isDragging())\n\t\t{\n\t\t\tconst {clientX, clientY} = originalEvent;\n\t\t\tconst over = this.getElementFromPoint(clientX, clientY);\n\t\t\tconst overContainer = this.getContainerByChild(over);\n\t\t\tconst {originalSource, sourceContainer} = this.dragStartEvent.data;\n\n\t\t\tconst dragMoveEvent = new DragMoveSensorEvent({\n\t\t\t\tclientX,\n\t\t\t\tclientY,\n\t\t\t\toriginalSource,\n\t\t\t\tsourceContainer,\n\t\t\t\tover,\n\t\t\t\toverContainer,\n\t\t\t\toriginalEvent,\n\t\t\t});\n\n\t\t\tthis.emit('drag:move', dragMoveEvent);\n\t\t}\n\t}\n\n\tonMouseUp(originalEvent)\n\t{\n\t\tclearTimeout(this.mousedownTimeoutId);\n\n\t\tthis.stopHandleMouseUp();\n\t\tthis.stopPreventNativeDragAndDrop();\n\n\t\tif (this.isDragging())\n\t\t{\n\t\t\tconst {clientX, clientY} = originalEvent;\n\t\t\tconst over = this.getElementFromPoint(clientX, clientY);\n\t\t\tconst overContainer = this.getContainerByChild(over);\n\t\t\tconst {originalSource, sourceContainer} = this.dragStartEvent.data;\n\n\t\t\tconst dragEndEvent = new DragEndSensorEvent({\n\t\t\t\tclientX,\n\t\t\t\tclientY,\n\t\t\t\toriginalSource,\n\t\t\t\tsourceContainer,\n\t\t\t\tover,\n\t\t\t\toverContainer,\n\t\t\t\toriginalEvent,\n\t\t\t});\n\n\t\t\tthis.emit('drag:end', dragEndEvent);\n\n\t\t\tif (!dragEndEvent.isDefaultPrevented())\n\t\t\t{\n\t\t\t\tconst dropzone = this.getDropzoneByChild(over);\n\n\t\t\t\tif (dropzone)\n\t\t\t\t{\n\t\t\t\t\tconst dragDropEvent = new DragDropSensorEvent({\n\t\t\t\t\t\tclientX,\n\t\t\t\t\t\tclientY,\n\t\t\t\t\t\toriginalSource,\n\t\t\t\t\t\tsourceContainer,\n\t\t\t\t\t\tover,\n\t\t\t\t\t\toverContainer,\n\t\t\t\t\t\toriginalEvent,\n\t\t\t\t\t\tdropzone,\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.emit('drag:drop', dragDropEvent);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.stopPreventContextMenu();\n\t\t\tthis.stopHandleMouseMove();\n\t\t}\n\n\t\tthis.originalDragStartEvent = null;\n\t}\n}","import Sensor from '../sensor';\nimport {DragStartSensorEvent} from '../events/drag.start.sensor.event';\nimport {DragMoveSensorEvent} from '../events/drag.move.sensor.event';\nimport {DragEndSensorEvent} from '../events/drag.end.sensor.event';\nimport {DragDropSensorEvent} from '../events/drag.drop.sensor.event';\n\nlet preventScrolling = false;\nwindow.addEventListener(\n\t'touchmove',\n\t(event) => {\n\t\tif (preventScrolling)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t},\n\t{passive: false},\n);\n\nexport default class TouchSensor extends Sensor\n{\n\tconstructor(container = [], options = {})\n\t{\n\t\tsuper(container, options);\n\n\t\tthis.tapTimeoutId = null;\n\t\tthis.touchMoved = false;\n\n\t\tthis.onTouchStart = this.onTouchStart.bind(this);\n\t\tthis.onTouchEnd = this.onTouchEnd.bind(this);\n\t\tthis.onTouchMove = this.onTouchMove.bind(this);\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t}\n\n\tenable()\n\t{\n\t\tdocument.addEventListener('touchstart', this.onTouchStart);\n\t}\n\n\tdisable()\n\t{\n\t\tdocument.removeEventListener('touchstart', this.onTouchStart);\n\t}\n\n\tisTouchMoved(): boolean\n\t{\n\t\treturn this.touchMoved;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tstartPreventScrolling()\n\t{\n\t\tpreventScrolling = true;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tstopPreventScrolling()\n\t{\n\t\tpreventScrolling = false;\n\t}\n\n\tstartPreventContextMenu()\n\t{\n\t\tdocument.addEventListener('contextmenu', this.preventDefaultEventAction, true);\n\t}\n\n\tstopPreventContextMenu()\n\t{\n\t\tdocument.removeEventListener('contextmenu', this.preventDefaultEventAction, true);\n\t}\n\n\tstartHandleTouchEvents()\n\t{\n\t\tdocument.addEventListener('touchmove', this.onTouchMove);\n\t\tdocument.addEventListener('touchend', this.onTouchEnd);\n\t\tdocument.addEventListener('touchcancel', this.onTouchEnd);\n\t}\n\n\tstopHandleTouchEvents()\n\t{\n\t\tdocument.removeEventListener('touchmove', this.onTouchMove);\n\t\tdocument.removeEventListener('touchend', this.onTouchEnd);\n\t\tdocument.removeEventListener('touchcancel', this.onTouchEnd);\n\t}\n\n\tonTouchStart(event)\n\t{\n\t\tconst container = this.getContainerByChild(event.target);\n\t\tif (container)\n\t\t{\n\t\t\tconst dragElement = this.getDragElementByChild(event.target);\n\t\t\tif (dragElement)\n\t\t\t{\n\t\t\t\tthis.originalDragStartEvent = event;\n\n\t\t\t\tthis.startHandleTouchEvents();\n\t\t\t\tthis.startPreventContextMenu();\n\t\t\t\tthis.startPreventScrolling();\n\n\t\t\t\tthis.tapTimeoutId = setTimeout(() => {\n\t\t\t\t\tif (!this.isTouchMoved())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onDragStart();\n\t\t\t\t\t}\n\t\t\t\t}, this.options.delay);\n\t\t\t}\n\t\t}\n\t}\n\n\tonDragStart()\n\t{\n\t\tconst touch = (\n\t\t\tthis.originalDragStartEvent.touches[0]\n\t\t\t|| this.originalDragStartEvent.changedTouches[0]\n\t\t);\n\n\t\tconst sourceContainer = this.getContainerByChild(this.originalDragStartEvent.target);\n\n\t\tthis.dragStartEvent = new DragStartSensorEvent({\n\t\t\tclientX: touch.clientX,\n\t\t\tclientY: touch.clientY,\n\t\t\toriginalSource: this.originalDragStartEvent.target,\n\t\t\toriginalEvent: this.originalDragStartEvent,\n\t\t\tsourceContainer,\n\t\t});\n\n\t\tthis.emit('drag:start', this.dragStartEvent);\n\t}\n\n\tonTouchMove(originalEvent)\n\t{\n\t\tthis.touchMoved = true;\n\n\t\tif (this.isDragging())\n\t\t{\n\t\t\tconst touch = originalEvent.touches[0] || originalEvent.changedTouches[0];\n\t\t\tconst {clientX, clientY} = touch;\n\t\t\tconst over = this.getElementFromPoint(clientX, clientY);\n\t\t\tconst overContainer = this.getContainerByChild(over);\n\t\t\tconst {originalSource, sourceContainer} = this.dragStartEvent.data;\n\n\t\t\tconst dragMoveEvent = new DragMoveSensorEvent({\n\t\t\t\tclientX,\n\t\t\t\tclientY,\n\t\t\t\toriginalSource,\n\t\t\t\tsourceContainer,\n\t\t\t\tover,\n\t\t\t\toverContainer,\n\t\t\t\toriginalEvent,\n\t\t\t});\n\n\t\t\tthis.emit('drag:move', dragMoveEvent);\n\t\t}\n\t}\n\n\tonTouchEnd(originalEvent)\n\t{\n\t\tclearTimeout(this.tapTimeoutId);\n\n\t\tthis.stopPreventScrolling();\n\t\tthis.stopPreventContextMenu();\n\t\tthis.stopHandleTouchEvents();\n\n\t\tif (this.isDragging())\n\t\t{\n\t\t\tconst touch = originalEvent.touches[0] || originalEvent.changedTouches[0];\n\t\t\tconst {clientX, clientY} = touch;\n\t\t\tconst over = this.getElementFromPoint(clientX, clientY);\n\t\t\tconst overContainer = this.getContainerByChild(over);\n\t\t\tconst {originalSource, sourceContainer} = this.dragStartEvent.data;\n\n\t\t\tconst dragEndEvent = new DragEndSensorEvent({\n\t\t\t\tclientX,\n\t\t\t\tclientY,\n\t\t\t\toriginalSource,\n\t\t\t\tsourceContainer,\n\t\t\t\tover,\n\t\t\t\toverContainer,\n\t\t\t\toriginalEvent,\n\t\t\t});\n\n\t\t\tthis.emit('drag:end', dragEndEvent);\n\n\t\t\tif (!dragEndEvent.isDefaultPrevented())\n\t\t\t{\n\t\t\t\tconst dropzone = this.getDropzoneByChild(over);\n\n\t\t\t\tif (dropzone)\n\t\t\t\t{\n\t\t\t\t\tconst dragDropEvent = new DragDropSensorEvent({\n\t\t\t\t\t\tclientX,\n\t\t\t\t\t\tclientY,\n\t\t\t\t\t\toriginalSource,\n\t\t\t\t\t\tsourceContainer,\n\t\t\t\t\t\tover,\n\t\t\t\t\t\toverContainer,\n\t\t\t\t\t\toriginalEvent,\n\t\t\t\t\t\tdropzone,\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.emit('drag:drop', dragDropEvent);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.originalDragStartEvent = null;\n\t\tthis.dragStartEvent = null;\n\t\tthis.touchMoved = false;\n\t}\n}","import BaseEvent from './base.event';\n\nexport class DragStartEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tpointerOffsetX: number,\n\t\tpointerOffsetY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragMoveEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\toffsetX: number,\n\t\toffsetY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOverEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tover: HTMLElement,\n\t\toriginalOver: HTMLElement,\n\t\toverContainer: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOverContainerEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tover: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragEnterEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tenter: HTMLElement,\n\t\tenterContainer: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragEnterContainerEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tenter: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOutEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tout: HTMLElement,\n\t\toutContainer: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOutContainerEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tout: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragEndEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOverDropzoneEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\toriginalOver: HTMLElement,\n\t\tdropzone: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragEnterDropzoneEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tdropzone: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragOutDropzoneEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tdropzone: HTMLElement,\n\t};\n}","import BaseEvent from './base.event';\n\nexport class DragDropEvent extends BaseEvent\n{\n\tdata: {\n\t\tclientX: number,\n\t\tclientY: number,\n\t\tsource: HTMLElement,\n\t\tsourceContainer: HTMLElement,\n\t\toriginalSource: HTMLElement,\n\t\tdropzone: HTMLElement,\n\t};\n}","import {Type, Dom, Cache, Runtime, Tag, Text} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport typeof Sensor from './sensor/sensor';\nimport MouseSensor from './sensor/mousesensor/mousesensor';\nimport TouchSensor from './sensor/touchsensor/touchsensor';\n\nimport {DragStartEvent} from './events/drag.start.event';\nimport {DragMoveEvent} from './events/drag.move.event';\nimport {DragOverEvent} from './events/drag.over.event';\nimport {DragOverContainerEvent} from './events/drag.over.container.event';\nimport {DragEnterEvent} from './events/drag.enter.event';\nimport {DragEnterContainerEvent} from './events/drag.enter.container.event';\nimport {DragOutEvent} from './events/drag.out.event';\nimport {DragOutContainerEvent} from './events/drag.out.container.event';\nimport {DragEndEvent} from './events/drag.end.event';\nimport {DragOverDropzoneEvent} from './events/drag.over.dropzone.event';\nimport {DragEnterDropzoneEvent} from './events/drag.enter.dropzone.event';\nimport {DragOutDropzoneEvent} from './events/drag.out.dropzone.event';\nimport {DragDropEvent} from './events/drag.drop.event';\n\nimport typeof {DragStartSensorEvent} from './sensor/events/drag.start.sensor.event';\nimport typeof {DragMoveSensorEvent} from './sensor/events/drag.move.sensor.event';\nimport typeof {DragEndSensorEvent} from './sensor/events/drag.end.sensor.event';\nimport typeof {DragDropSensorEvent} from './sensor/events/drag.drop.sensor.event';\n\nimport './css/style.css';\n\ntype DraggableOptions = {\n\tcontainer: HTMLElement | Array<HTMLElement> | NodeList,\n\tdropzone: HTMLElement | Array<HTMLElement> | NodeList,\n\tdraggable?: string,\n\tdragElement?: string,\n\tdelay?: number,\n\tsensors?: Array<Sensor>,\n\ttransitionDuration: number,\n};\n\nconst defaultSensors = [\n\tMouseSensor,\n\tTouchSensor,\n];\n\nconst optionsKey = Symbol('options');\nconst sensorsKey = Symbol('sensors');\nconst containersKey = Symbol('containers');\nconst dropzonesKey = Symbol('dropzones');\n\n/**\n * @namespace BX.UI.DragAndDrop\n */\nexport class Draggable extends EventEmitter\n{\n\tstatic MOVE = 'move';\n\tstatic CLONE = 'clone';\n\tstatic DROP_PREVIEW = 'drop-preview';\n\tstatic HEADLESS = 'headless';\n\n\t[optionsKey]: DraggableOptions = {\n\t\tdelay: 0,\n\t\tsensors: [],\n\t\tdraggable: '.ui-draggable--item',\n\t\ttype: 'move',\n\t\ttransitionDuration: 150,\n\t\tdropzone: [],\n\t};\n\n\t[containersKey] = [];\n\t[dropzonesKey] = [];\n\t[sensorsKey] = [];\n\n\tdragStartEvent: ?DragStartEvent = null;\n\n\tconstructor(options: DraggableOptions = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.UI.DragAndDrop.Draggable');\n\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.onDragStart = this.onDragStart.bind(this);\n\t\tthis.onDragMove = this.onDragMove.bind(this);\n\t\tthis.onDragEnd = this.onDragEnd.bind(this);\n\t\tthis.onDragDrop = this.onDragDrop.bind(this);\n\n\t\tif (\n\t\t\tType.isArray(options.container)\n\t\t\t|| Type.isDomNode(options.container)\n\t\t\t|| options.container instanceof NodeList\n\t\t)\n\t\t{\n\t\t\tif (options.container instanceof NodeList)\n\t\t\t{\n\t\t\t\tthis.addContainer(...options.container);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.addContainer(...[options.container].flat());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Option container not a HTMLElement, Array of HTMLElement or NodeList');\n\t\t}\n\n\t\tif (!Type.isNil(options.dropzone))\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isArray(options.dropzone)\n\t\t\t\t|| Type.isDomNode(options.dropzone)\n\t\t\t\t|| options.dropzone instanceof NodeList\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (options.dropzone instanceof NodeList)\n\t\t\t\t{\n\t\t\t\t\tthis.addDropzone(...[...options.dropzone]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.addDropzone(...[options.dropzone].flat());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setOptions({\n\t\t\t...this.getOptions(),\n\t\t\t...options,\n\t\t});\n\n\t\tconst {sensors} = this.getOptions();\n\t\tthis.addSensor(...[\n\t\t\t...defaultSensors,\n\t\t\t...sensors,\n\t\t]);\n\t}\n\n\tgetOptions(): DraggableOptions\n\t{\n\t\treturn this[optionsKey];\n\t}\n\n\tsetOptions(options: {[key: string]: any})\n\t{\n\t\tthis[optionsKey] = {...options};\n\n\t\tif (!Type.isString(this[optionsKey].dragElement))\n\t\t{\n\t\t\tthis[optionsKey].dragElement = this[optionsKey].draggable;\n\t\t}\n\n\t\tthis.invalidateCache();\n\t}\n\n\tisDragging(): boolean\n\t{\n\t\treturn this.dragStartEvent && !this.dragStartEvent.isDefaultPrevented();\n\t}\n\n\tgetSensors(): Array<Sensor>\n\t{\n\t\treturn this[sensorsKey];\n\t}\n\n\taddSensor(...sensors: Array<Sensor>)\n\t{\n\t\tconst initializedSensors = sensors.map((CurrentSensor) => {\n\t\t\tconst instance = new CurrentSensor(\n\t\t\t\tthis.getContainers(),\n\t\t\t\tthis.getOptions(),\n\t\t\t);\n\n\t\t\tinstance.subscribe('drag:start', this.onDragStart);\n\t\t\tinstance.subscribe('drag:move', this.onDragMove);\n\t\t\tinstance.subscribe('drag:end', this.onDragEnd);\n\t\t\tinstance.subscribe('drag:drop', this.onDragDrop);\n\n\t\t\tinstance.enable();\n\n\t\t\treturn instance;\n\t\t});\n\n\t\tthis[sensorsKey] = [\n\t\t\t...this.getSensors(),\n\t\t\t...initializedSensors,\n\t\t];\n\t}\n\n\tremoveSensor(...sensors: Array<Sensor>)\n\t{\n\t\tconst removedSensors = this.getSensors().filter((sensor) => {\n\t\t\treturn sensors.includes(sensor.constructor);\n\t\t});\n\n\t\tremovedSensors.forEach((sensor: Sensor) => {\n\t\t\tsensor.unsubscribe('drag:start', this.onDragStart);\n\t\t\tsensor.unsubscribe('drag:move', this.onDragMove);\n\t\t\tsensor.unsubscribe('drag:end', this.onDragEnd);\n\t\t\tsensor.unsubscribe('drag:drop', this.onDragDrop);\n\t\t\tsensor.enable();\n\t\t});\n\n\t\tthis[sensorsKey] = this.getSensors().filter((sensor) => {\n\t\t\treturn !removedSensors.includes(sensor);\n\t\t});\n\t}\n\n\tgetContainers(): Array<HTMLElement>\n\t{\n\t\treturn this[containersKey];\n\t}\n\n\tgetContainerByChild(childElement: HTMLElement): ?HTMLElement\n\t{\n\t\treturn this.getContainers().find((container) => {\n\t\t\treturn container.contains(childElement);\n\t\t});\n\t}\n\n\taddContainer(...containers: Array<HTMLElement>)\n\t{\n\t\tthis[containersKey] = [\n\t\t\t...this.getContainers(),\n\t\t\t...containers,\n\t\t];\n\n\t\tthis[containersKey].forEach((container) => {\n\t\t\tDom.addClass(container, 'ui-draggable--container');\n\t\t});\n\n\t\tthis.getSensors().forEach((sensor) => {\n\t\t\tsensor.addContainer(...containers);\n\t\t});\n\n\t\tthis.invalidateContainersCache();\n\t}\n\n\tremoveContainer(...containers: Array<HTMLElement>)\n\t{\n\t\tthis[containersKey] = this.getContainers().filter((container) => {\n\t\t\treturn !containers.includes(container);\n\t\t});\n\n\t\tthis.getSensors().forEach((sensor) => {\n\t\t\tsensor.removeContainer(...containers);\n\t\t});\n\n\t\tthis.invalidateContainersCache();\n\t}\n\n\tgetDropzones(): Array<HTMLElement>\n\t{\n\t\treturn this[dropzonesKey];\n\t}\n\n\tgetDropzoneByChild(childElement: HTMLElement): ?HTMLElement\n\t{\n\t\treturn this.getDropzones().find((dropzone) => {\n\t\t\treturn dropzone.contains(childElement);\n\t\t});\n\t}\n\n\taddDropzone(...dropzones: Array<HTMLElement>)\n\t{\n\t\tthis[dropzonesKey] = [\n\t\t\t...this.getDropzones(),\n\t\t\t...dropzones,\n\t\t];\n\n\t\tthis[dropzonesKey].forEach((dropzone) => {\n\t\t\tDom.addClass(dropzone, 'ui-draggable--dropzone');\n\t\t});\n\n\t\tthis.getSensors().forEach((sensor) => {\n\t\t\tsensor.addDropzone(...dropzones);\n\t\t});\n\t}\n\n\tremoveDropzone(...dropzones: Array<HTMLElement>)\n\t{\n\t\tthis[dropzonesKey] = this.getContainers().filter((dropzone) => {\n\t\t\treturn !dropzones.includes(dropzone);\n\t\t});\n\n\t\tthis.getSensors().forEach((sensor) => {\n\t\t\tsensor.removeDropzone(...dropzones);\n\t\t});\n\t}\n\n\tgetDraggableElements(): Array<HTMLElement>\n\t{\n\t\treturn this.cache.remember('draggableElements', () => {\n\t\t\treturn this.getContainers().reduce((acc, container) => {\n\t\t\t\treturn [...acc, ...this.getDraggableElementsOfContainer(container)];\n\t\t\t}, []);\n\t\t});\n\t}\n\n\tgetDraggableElementsOfContainer(container: HTMLElement): Array<HTMLElement>\n\t{\n\t\treturn this.cache.remember(container, () => {\n\t\t\tconst draggableSelector = this.getOptions().draggable;\n\t\t\tconst notDraggable = ':not(.ui-draggable--draggable)';\n\t\t\tconst notDropPreview = ':not(.ui-draggable--drop-preview)';\n\n\t\t\tconst filter = `${notDraggable}${notDropPreview}`;\n\t\t\tconst selector = `${draggableSelector}${filter}`;\n\n\t\t\tconst elements = [...container.querySelectorAll(selector)];\n\n\t\t\treturn elements.filter((element) => element.parentElement === container);\n\t\t});\n\t}\n\n\tgetLastDraggableElementOfContainer(container): ?HTMLElement\n\t{\n\t\tconst draggableElements = this.getDraggableElementsOfContainer(container);\n\t\treturn draggableElements[draggableElements.length - 1] || null;\n\t}\n\n\tgetElementIndex(element: HTMLElement): number\n\t{\n\t\treturn this.getDraggableElements().indexOf(element);\n\t}\n\n\tgetDropPreview()\n\t{\n\t\treturn this.cache.remember('dropPreview', () => {\n\t\t\tconst {type} = this.getOptions();\n\t\t\tconst source = this.getSource();\n\t\t\tconst sourceRect = this.getSourceClientRect();\n\t\t\tlet dropPreview;\n\n\t\t\tif (type === Draggable.CLONE)\n\t\t\t{\n\t\t\t\tdropPreview = Runtime.clone(source);\n\t\t\t\tDom.addClass(dropPreview, 'ui-draggable--drop-preview-clone');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdropPreview = Tag.render`<div></div>`;\n\t\t\t}\n\n\t\t\tDom.addClass(dropPreview, 'ui-draggable--drop-preview');\n\t\t\tDom.style(dropPreview, {\n\t\t\t\twidth: `${sourceRect.width}px`,\n\t\t\t\theight: `${sourceRect.height}px`,\n\t\t\t});\n\n\t\t\treturn dropPreview;\n\t\t});\n\t}\n\n\tmove(element, {x = 0, y = 0})\n\t{\n\t\tconst {transitionDuration} = this.getOptions();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tDom.style(element, {\n\t\t\t\ttransform: `translate3d(${x}px, ${y}px, 0px)`,\n\t\t\t\ttransition: `all ${transitionDuration}ms ease 0s`,\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetSource(element: ?HTMLElement)\n\t{\n\t\tthis.cache.set('source', element || null);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSource(): ?HTMLElement\n\t{\n\t\treturn this.cache.get('source') || null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSourceClientRect(): DOMRect\n\t{\n\t\treturn this.cache.remember('sourceClientRect', () => {\n\t\t\treturn this.cache.get('source').getBoundingClientRect();\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tadjustDropPreview(target: HTMLElement, options = {})\n\t{\n\t\tconst {x = false, y = false, force = true, skipOffset = false, transition = true} = options;\n\t\tconst dropPreview = this.getDropPreview();\n\t\tconst targetRect = Dom.getRelativePosition(target, target.parentElement);\n\t\tconst dropPreviewRect = Dom.getRelativePosition(dropPreview, dropPreview.parentElement);\n\n\t\tlet offset = 0;\n\n\t\tif (dropPreviewRect.height !== 0 && !skipOffset)\n\t\t{\n\t\t\tif (targetRect.height > dropPreviewRect.height)\n\t\t\t{\n\t\t\t\tif (targetRect.top > dropPreviewRect.top)\n\t\t\t\t{\n\t\t\t\t\toffset = targetRect.height - dropPreviewRect.height;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (targetRect.top > dropPreviewRect.top)\n\t\t\t{\n\t\t\t\toffset = -Math.abs(targetRect.height - dropPreviewRect.height);\n\t\t\t}\n\t\t}\n\n\t\tconst {transitionDuration} = this.getOptions();\n\t\tconst adjustPosition = () => {\n\t\t\tconst style = {\n\t\t\t\ttransition: transition ? `all ${transitionDuration}ms ease 0ms` : 'null',\n\t\t\t};\n\n\t\t\tif (y)\n\t\t\t{\n\t\t\t\tstyle.top = `${targetRect.top + offset}px`;\n\t\t\t}\n\n\t\t\tif (x)\n\t\t\t{\n\t\t\t\tstyle.left = `${targetRect.left}px`;\n\t\t\t}\n\n\t\t\tDom.style(dropPreview, style);\n\t\t};\n\n\t\tif (force)\n\t\t{\n\t\t\tadjustPosition();\n\t\t}\n\t\telse\n\t\t{\n\t\t\trequestAnimationFrame(adjustPosition);\n\t\t}\n\t}\n\n\tshowDropPreviewAfter(element: HTMLElement)\n\t{\n\t\tconst elementRect = Dom.getRelativePosition(element, element.parentElement);\n\t\tconst marginBottom = Text.toNumber(Dom.style(element, 'margin-bottom'));\n\t\tconst marginTop = Text.toNumber(Dom.style(element, 'margin-top'));\n\t\tconst bottom = elementRect.bottom + marginBottom + marginTop;\n\n\t\tconst {transitionDuration} = this.getOptions();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tDom.style(this.getDropPreview(), {\n\t\t\t\ttop: `${bottom}px`,\n\t\t\t\ttransition: `all ${transitionDuration}ms ease 0s`,\n\t\t\t});\n\t\t});\n\t}\n\n\tpushDraggableElementToContainer(element: HTMLElement, container: HTMLElement)\n\t{\n\t\tconst lastDraggableElement = this.getLastDraggableElementOfContainer(container);\n\n\t\tif (lastDraggableElement)\n\t\t{\n\t\t\tDom.insertAfter(element, lastDraggableElement);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.append(element, container);\n\t\t}\n\n\t\tthis.invalidateContainersCache();\n\t}\n\n\tresetDraggableElementsPosition(container: ?HTMLElement, {transition = true} = {})\n\t{\n\t\tconst draggableElements = (() => {\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\treturn this.getDraggableElementsOfContainer(container);\n\t\t\t}\n\n\t\t\treturn this.getDraggableElements();\n\t\t})();\n\n\t\tdraggableElements.forEach((element) => {\n\t\t\tDom.style(element, {\n\t\t\t\ttransform: null,\n\t\t\t\ttransition: !transition ? 'none' : undefined,\n\t\t\t});\n\t\t});\n\t}\n\n\tresetDraggableElementsTransition(container: ?HTMLElement)\n\t{\n\t\tconst draggableElements = (() => {\n\t\t\tif (container)\n\t\t\t{\n\t\t\t\treturn this.getDraggableElementsOfContainer(container);\n\t\t\t}\n\n\t\t\treturn this.getDraggableElements();\n\t\t})();\n\n\t\tdraggableElements.forEach((element) => {\n\t\t\tDom.style(element, {\n\t\t\t\ttransition: null,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSortOffsetY(): number\n\t{\n\t\treturn this.cache.remember('sortOffsetY', () => {\n\t\t\tconst source = this.getSource();\n\t\t\tconst sourceRect = this.getSourceClientRect();\n\t\t\tconst marginTop = Text.toNumber(Dom.style(source, 'margin-top'));\n\t\t\tconst marginBottom = Text.toNumber(Dom.style(source, 'margin-bottom'));\n\t\t\treturn sourceRect.height + (marginTop + marginBottom);\n\t\t});\n\t}\n\n\tgetSortOffsetX(): number\n\t{\n\t\treturn this.cache.remember('sortOffsetX', () => {\n\t\t\tconst source = this.getSource();\n\t\t\tconst sourceRect = this.getSourceClientRect();\n\t\t\tconst marginLeft = Text.toNumber(Dom.style(source, 'margin-left'));\n\t\t\tconst marginRight = Text.toNumber(Dom.style(source, 'margin-right'));\n\t\t\treturn sourceRect.width + (marginLeft + marginRight);\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tgetElementMiddlePoint(element: HTMLElement): {x: number, y: number}\n\t{\n\t\tconst elementRect = element.getBoundingClientRect();\n\t\treturn {\n\t\t\tx: elementRect.left + (elementRect.width / 2),\n\t\t\ty: elementRect.top + (elementRect.height / 2),\n\t\t};\n\t}\n\n\tgetDraggableElementByChild(child: HTMLElement): ?HTMLElement\n\t{\n\t\treturn child.closest(this.getOptions().draggable);\n\t}\n\n\tsplitDraggableElementsListByPoint(\n\t\tcontainer: HTMLElement,\n\t\tpoint: {x: number, y: number},\n\t): [Array<HTMLElement>, Array<HTMLElement>]\n\t{\n\t\tlet useRect = true;\n\t\treturn this.getDraggableElementsOfContainer(container)\n\t\t\t.reduce((acc, element) => {\n\t\t\t\tif (useRect)\n\t\t\t\t{\n\t\t\t\t\tconst elementMiddlePoint = this.getElementMiddlePoint(element);\n\n\t\t\t\t\tif (elementMiddlePoint.y < point.y)\n\t\t\t\t\t{\n\t\t\t\t\t\tacc[0].push(element);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tacc[1].push(element);\n\t\t\t\t\t\tuseRect = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tacc[1].push(element);\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, [[], []]);\n\t}\n\n\tinvalidateContainersCache()\n\t{\n\t\tthis.cache.delete('draggableElements');\n\t\tthis.getContainers().forEach((container) => this.cache.delete(container));\n\t}\n\n\tinvalidateCache()\n\t{\n\t\tthis.cache.delete('source');\n\t\tthis.cache.delete('sourceClientRect');\n\t\tthis.cache.delete('dropPreview');\n\t\tthis.cache.delete('sortOffsetY');\n\t\tthis.cache.delete('sortOffsetX');\n\t\tthis.cache.delete('sourceLeftOffset');\n\t\tthis.cache.delete('sourceLeftMargin');\n\t\tthis.invalidateContainersCache();\n\t}\n\n\tisDepthEditorEnabled(): boolean\n\t{\n\t\tconst {depth, type} = this.getOptions();\n\t\treturn (\n\t\t\tType.isPlainObject(depth)\n\t\t\t&& (type === Draggable.DROP_PREVIEW || type === Draggable.CLONE)\n\t\t);\n\t}\n\n\tgetDepthProperty(): string\n\t{\n\t\tconst {depth} = this.getOptions();\n\t\treturn depth.property || 'margin-left';\n\t}\n\n\tgetDepthMargin(): number\n\t{\n\t\tconst {depth} = this.getOptions();\n\t\treturn Text.toNumber(depth.margin) || 20;\n\t}\n\n\t// eslint-disable-next-line\n\tgetElementDepth(element: HTMLElement): number\n\t{\n\t\treturn Text.toNumber(Dom.attr(element, 'data-depth'));\n\t}\n\n\tsetElementDepth(element: HTMLElement, depth: number)\n\t{\n\t\tDom.attr(element, 'data-depth', depth);\n\t\tconst depthMargin = this.getDepthMargin();\n\t\tconst sourceMargin = this.getSourceLeftMargin();\n\t\tconst margin = (depthMargin * depth) + sourceMargin;\n\t\tDom.style(element, this.getDepthProperty(), `${margin}px`);\n\t}\n\n\tgetStartSourceDepth(): number\n\t{\n\t\treturn this.dragStartEvent.data.sourceDepth;\n\t}\n\n\tgetSourceWidth(): number\n\t{\n\t\treturn this.getSourceClientRect().width;\n\t}\n\n\tgetSourceLeftOffset(): number\n\t{\n\t\treturn this.cache.remember('sourceLeftOffset', () => {\n\t\t\tconst source = this.getSource();\n\t\t\tconst sourceRect = Dom.getRelativePosition(source, source.parentElement);\n\t\t\tconst sourceMargin = this.getStartSourceDepth() * this.getDepthMargin();\n\t\t\treturn sourceRect.left - sourceMargin;\n\t\t});\n\t}\n\n\tgetSourceLeftMargin(): number\n\t{\n\t\treturn this.cache.remember('sourceLeftMargin', () => {\n\t\t\tconst source = this.getSource();\n\t\t\tconst sourceDepth = this.getStartSourceDepth();\n\t\t\tconst depthMargin = this.getDepthMargin();\n\t\t\tconst sourceDepthMargin = sourceDepth * depthMargin;\n\t\t\tconst sourceMargin = Text.toNumber(Dom.style(source, this.getDepthProperty()));\n\n\t\t\treturn sourceMargin - sourceDepthMargin;\n\t\t});\n\t}\n\n\tsetDropPreviewDepth(depth: number)\n\t{\n\t\tconst sourceDepth = this.getStartSourceDepth();\n\t\tconst sourceWidth = this.getSourceWidth();\n\t\tconst depthMargin = this.getDepthMargin();\n\t\tconst sourceLeftOffset = this.getSourceLeftOffset();\n\n\t\tconst dropPreviewWidth = (() => {\n\t\t\tconst depthDiff = Math.abs(sourceDepth - depth);\n\t\t\tif (depth > sourceDepth)\n\t\t\t{\n\t\t\t\treturn sourceWidth - (depthDiff * depthMargin);\n\t\t\t}\n\n\t\t\tif (depth < sourceDepth)\n\t\t\t{\n\t\t\t\treturn sourceWidth + (depthDiff * depthMargin);\n\t\t\t}\n\n\t\t\treturn sourceWidth;\n\t\t})();\n\n\t\tDom.style(this.getDropPreview(), {\n\t\t\tleft: `${(depth * depthMargin) + sourceLeftOffset}px`,\n\t\t\twidth: `${dropPreviewWidth}px`,\n\t\t});\n\t}\n\n\tcalcDepthByOffset(offsetX): number\n\t{\n\t\tconst startSourceDepth = this.getStartSourceDepth();\n\t\tconst depthMargin = this.getDepthMargin();\n\t\tconst sourceDepthMargin = startSourceDepth * depthMargin;\n\n\t\treturn Math.max(0, Math.floor((offsetX + sourceDepthMargin) / depthMargin));\n\t}\n\n\tgetChildren(parent: HTMLElement): Array<HTMLElement>\n\t{\n\t\tconst parentDepth = this.getElementDepth(parent);\n\t\tconst parentRect = parent.getBoundingClientRect();\n\t\tconst container = this.getContainerByChild(parent);\n\t\tconst [, nextElements] = this.splitDraggableElementsListByPoint(\n\t\t\tcontainer,\n\t\t\t{x: parentRect.left, y: parentRect.bottom},\n\t\t);\n\n\t\tlet stop = false;\n\t\treturn nextElements.reduce((acc, element) => {\n\t\t\tif (!stop)\n\t\t\t{\n\t\t\t\tconst currentDepth = this.getElementDepth(element);\n\t\t\t\tif (currentDepth > parentDepth)\n\t\t\t\t{\n\t\t\t\t\treturn [...acc, element];\n\t\t\t\t}\n\n\t\t\t\tstop = true;\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, []);\n\t}\n\n\tgetPreviousElement(element: HTMLElement): ?HTMLElement\n\t{\n\t\tconst elementRect = element.getBoundingClientRect();\n\t\tconst container = this.getContainerByChild(element);\n\t\tconst [prevElements] = this.splitDraggableElementsListByPoint(\n\t\t\tcontainer,\n\t\t\t{x: elementRect.left, y: elementRect.top},\n\t\t);\n\n\t\tif (Type.isArrayFilled(prevElements))\n\t\t{\n\t\t\treturn prevElements.pop();\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tonDragStart(event: DragStartSensorEvent)\n\t{\n\t\tconst {originalSource, sourceContainer, clientX, clientY} = event.data;\n\t\tconst source = this.getDraggableElementByChild(originalSource);\n\t\tthis.setSource(source);\n\n\t\tconst sourceDepth = this.getElementDepth(source);\n\t\tconst sourceRect = this.getSourceClientRect();\n\t\tconst pointerOffsetX = clientX - sourceRect.left;\n\t\tconst pointerOffsetY = clientY - sourceRect.top;\n\t\tconst {type} = this.getOptions();\n\n\t\tlet draggable = source;\n\t\tif (type !== Draggable.HEADLESS)\n\t\t{\n\t\t\tconst clone = Runtime.clone(source);\n\n\t\t\tDom.style(clone, 'margin', 0);\n\n\t\t\tdraggable = Tag.render`<div>${clone}</div>`;\n\n\t\t\tDom.style(draggable, {\n\t\t\t\twidth: `${sourceRect.width}px`,\n\t\t\t\theight: `${sourceRect.height}px`,\n\t\t\t\ttop: `${clientY - pointerOffsetY}px`,\n\t\t\t\tleft: `${clientX - pointerOffsetX}px`,\n\t\t\t});\n\n\t\t\tDom.addClass(draggable, 'ui-draggable--draggable');\n\t\t\tthis.pushDraggableElementToContainer(draggable, sourceContainer);\n\n\t\t\tif (this.isDepthEditorEnabled())\n\t\t\t{\n\t\t\t\tconst children = this.getChildren(source);\n\n\t\t\t\tthis.childrenElements = children;\n\n\t\t\t\tif (children.length > 0)\n\t\t\t\t{\n\t\t\t\t\tDom.append(Runtime.clone(clone), draggable);\n\n\t\t\t\t\tchildren.forEach((element) => {\n\t\t\t\t\t\tDom.style(element, 'display', 'none');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst dropPreview = this.getDropPreview();\n\n\t\tif (type === Draggable.DROP_PREVIEW || type === Draggable.CLONE)\n\t\t{\n\t\t\tthis.pushDraggableElementToContainer(dropPreview, sourceContainer);\n\t\t\tthis.adjustDropPreview(source, {force: true, x: true, y: true, transition: false});\n\t\t}\n\n\t\tDom.addClass(source, 'ui-draggable--source');\n\t\tDom.addClass(document.body, 'ui-draggable--disable-user-select');\n\t\tDom.addClass(document.body, `ui-draggable--type-${this.getOptions().type}`);\n\n\t\tconst sourceIndex = this.getElementIndex(source);\n\t\tthis.dragStartEvent = new DragStartEvent({\n\t\t\tclientX,\n\t\t\tclientY,\n\t\t\tpointerOffsetX,\n\t\t\tpointerOffsetY,\n\t\t\tdraggable,\n\t\t\tdropPreview,\n\t\t\tsource,\n\t\t\tsourceIndex,\n\t\t\tsourceContainer,\n\t\t\tsourceDepth,\n\t\t\toriginalSource,\n\t\t});\n\n\t\tthis.emit('start', this.dragStartEvent);\n\n\t\tif (this.dragStartEvent.isDefaultPrevented())\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tonDragMove(event: DragMoveSensorEvent): void\n\t{\n\t\tif (!this.isDragging())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst {clientX, clientY, sourceContainer, originalSource} = event.data;\n\t\tconst {\n\t\t\tclientX: startClientX,\n\t\t\tclientY: startClientY,\n\t\t\tpointerOffsetX,\n\t\t\tpointerOffsetY,\n\t\t\tsource,\n\t\t\tsourceIndex,\n\t\t\tdraggable,\n\t\t\tdropPreview,\n\t\t} = this.dragStartEvent.data;\n\t\tconst offsetX = clientX - startClientX;\n\t\tconst offsetY = clientY - startClientY;\n\n\t\tconst dragMoveEvent = new DragMoveEvent({\n\t\t\tclientX,\n\t\t\tclientY,\n\t\t\toffsetX,\n\t\t\toffsetY,\n\t\t\tpointerOffsetX,\n\t\t\tpointerOffsetY,\n\t\t\tdraggable,\n\t\t\tdropPreview,\n\t\t\tsource,\n\t\t\tsourceIndex,\n\t\t\tsourceContainer,\n\t\t\toriginalSource,\n\t\t});\n\n\t\tthis.emit('move', dragMoveEvent);\n\n\t\tif (dragMoveEvent.isDefaultPrevented())\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\tif (!Type.isDomNode(event.data.over))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst originalOver = event.data.over;\n\t\tconst over = this.getDraggableElementByChild(originalOver);\n\t\tconst overContainer = this.getContainerByChild(originalOver);\n\n\t\tconst {type} = this.getOptions();\n\t\tif (type !== Draggable.HEADLESS)\n\t\t{\n\t\t\tDom.style(draggable, {\n\t\t\t\ttop: `${clientY - pointerOffsetY}px`,\n\t\t\t\tleft: `${clientX - pointerOffsetX}px`,\n\t\t\t});\n\n\t\t\tif (overContainer && overContainer.contains(source) && !this.stopMove)\n\t\t\t{\n\t\t\t\tconst sortOffsetY = this.getSortOffsetY();\n\t\t\t\tconst draggableElements = this.getDraggableElementsOfContainer(overContainer);\n\t\t\t\tconst localSourceIndex = draggableElements.indexOf(source);\n\n\t\t\t\tdraggableElements.forEach((element, index) => {\n\t\t\t\t\tif (element !== source)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst currentTransform = element.style.transform;\n\t\t\t\t\t\tconst elementMiddlePoint = this.getElementMiddlePoint(element);\n\n\t\t\t\t\t\tif (elementMiddlePoint.y === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex > localSourceIndex\n\t\t\t\t\t\t\t&& clientY > elementMiddlePoint.y\n\t\t\t\t\t\t\t&& currentTransform !== `translate3d(0px, ${-sortOffsetY}px, 0px)`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustDropPreview(element, {y: true});\n\t\t\t\t\t\t\tthis.move(element, {y: -sortOffsetY});\n\t\t\t\t\t\t\tthis.insertType = 'after';\n\t\t\t\t\t\t\tthis.insertElement = element;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tindex < localSourceIndex\n\t\t\t\t\t\t\t&& clientY < elementMiddlePoint.y\n\t\t\t\t\t\t\t&& currentTransform !== `translate3d(0px, ${sortOffsetY}px, 0px)`\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustDropPreview(element, {y: true});\n\t\t\t\t\t\t\tthis.move(element, {y: sortOffsetY});\n\t\t\t\t\t\t\tthis.insertType = 'before';\n\t\t\t\t\t\t\tthis.insertElement = element;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t((index < localSourceIndex && clientY > elementMiddlePoint.y)\n\t\t\t\t\t\t\t|| (index > localSourceIndex && clientY < elementMiddlePoint.y))\n\t\t\t\t\t\t\t&& currentTransform !== 'translate3d(0px, 0px, 0px)'\n\t\t\t\t\t\t\t&& currentTransform !== ''\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustDropPreview(element, {y: true});\n\t\t\t\t\t\t\tthis.move(element, {y: 0});\n\n\t\t\t\t\t\t\tthis.insertElement = element;\n\n\t\t\t\t\t\t\tif (index < localSourceIndex && clientY > elementMiddlePoint.y)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.insertType = 'after';\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (index > localSourceIndex && clientY < elementMiddlePoint.y)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.insertType = 'before';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDepthEditorEnabled())\n\t\t{\n\t\t\tlet currentDepth = this.calcDepthByOffset(offsetX);\n\t\t\tconst parentElement = this.getPreviousElement(dropPreview);\n\n\t\t\tif (parentElement)\n\t\t\t{\n\t\t\t\tconst prevDepth = this.getElementDepth(parentElement);\n\t\t\t\tconst minDepth = 0;\n\t\t\t\tconst maxDepth = Math.max(minDepth, prevDepth + 1);\n\t\t\t\tcurrentDepth = Math.max(minDepth, Math.min(currentDepth, maxDepth));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcurrentDepth = 0;\n\t\t\t}\n\n\t\t\tthis.setDropPreviewDepth(currentDepth);\n\t\t\tthis.currentDepth = currentDepth;\n\t\t}\n\n\t\tif (Type.isDomNode(over) && source !== over)\n\t\t{\n\t\t\tconst dragOverEvent = new DragOverEvent({\n\t\t\t\t...dragMoveEvent.data,\n\t\t\t\tover,\n\t\t\t\toriginalOver,\n\t\t\t\toverContainer,\n\t\t\t});\n\n\t\t\tthis.emit('over', dragOverEvent);\n\n\t\t\tif (!dragOverEvent.isDefaultPrevented())\n\t\t\t{\n\t\t\t\tDom.addClass(over, 'ui-draggable--over');\n\t\t\t}\n\n\t\t\tif (over !== this.lastOver)\n\t\t\t{\n\t\t\t\tconst dragEnterEvent = new DragEnterEvent({\n\t\t\t\t\t...dragMoveEvent.data,\n\t\t\t\t\tenter: over,\n\t\t\t\t\tenterContainer: overContainer,\n\t\t\t\t});\n\n\t\t\t\tthis.emit('enter', dragEnterEvent);\n\t\t\t}\n\t\t}\n\n\t\tthis.lastOver = this.lastOver || over;\n\n\t\tif (!over || over !== this.lastOver)\n\t\t{\n\t\t\tif (this.lastOver)\n\t\t\t{\n\t\t\t\tconst outContainer = this.getContainerByChild(this.lastOver);\n\t\t\t\tconst dragOutEvent = new DragOutEvent({\n\t\t\t\t\t...dragMoveEvent,\n\t\t\t\t\tout: this.lastOver,\n\t\t\t\t\toutContainer,\n\t\t\t\t});\n\n\t\t\t\tthis.emit('out', dragOutEvent);\n\n\t\t\t\tDom.removeClass(this.lastOver, 'ui-draggable--over');\n\t\t\t}\n\n\t\t\tthis.lastOver = over;\n\t\t}\n\n\t\tconst sourceOver = document.elementFromPoint(clientX, clientY);\n\t\tconst dropzoneOver = this.getDropzoneByChild(sourceOver);\n\n\t\tif (dropzoneOver)\n\t\t{\n\t\t\tconst dragOverDropzoneEvent = new DragOverDropzoneEvent({\n\t\t\t\t...dragMoveEvent.data,\n\t\t\t\tdropzone: dropzoneOver,\n\t\t\t});\n\n\t\t\tthis.emit('dropzone:over', dragOverDropzoneEvent);\n\n\t\t\tif (dropzoneOver !== this.lastOverDropzone)\n\t\t\t{\n\t\t\t\tconst dragEnterDropzoneEvent = new DragEnterDropzoneEvent({\n\t\t\t\t\t...dragMoveEvent.data,\n\t\t\t\t\tdropzone: dropzoneOver,\n\t\t\t\t});\n\n\t\t\t\tthis.emit('dropzone:enter', dragEnterDropzoneEvent);\n\t\t\t}\n\t\t}\n\n\t\tthis.lastOverDropzone = this.lastOverDropzone || dropzoneOver;\n\n\t\tif (dropzoneOver !== this.lastOverDropzone)\n\t\t{\n\t\t\tconst dragOutDropzoneEvent = new DragOutDropzoneEvent({\n\t\t\t\t...dragMoveEvent.data,\n\t\t\t\tdropzone: this.lastOverDropzone,\n\t\t\t});\n\n\t\t\tthis.emit('dropzone:out', dragOutDropzoneEvent);\n\n\t\t\tthis.lastOverDropzone = dropzoneOver;\n\t\t}\n\n\t\tif (overContainer)\n\t\t{\n\t\t\tconst dragOverContainerEvent = new DragOverContainerEvent({\n\t\t\t\t...dragMoveEvent.data,\n\t\t\t\tover: overContainer,\n\t\t\t});\n\n\t\t\tthis.emit('container:over', dragOverContainerEvent);\n\n\t\t\tif (overContainer !== this.lastOverContainer)\n\t\t\t{\n\t\t\t\tconst dragEnterContainerEvent = new DragEnterContainerEvent({\n\t\t\t\t\t...dragMoveEvent.data,\n\t\t\t\t\tenter: overContainer,\n\t\t\t\t});\n\n\t\t\t\tthis.emit('container:enter', dragEnterContainerEvent);\n\n\t\t\t\tif (!overContainer.contains(source))\n\t\t\t\t{\n\t\t\t\t\tconst lastContainer = this.getContainerByChild(source);\n\t\t\t\t\tconst [beforeElements, afterElements] = this.splitDraggableElementsListByPoint(\n\t\t\t\t\t\toverContainer,\n\t\t\t\t\t\t{x: clientX, y: clientY},\n\t\t\t\t\t);\n\n\t\t\t\t\tif (type === Draggable.DROP_PREVIEW || type === Draggable.CLONE)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.stopMove = true;\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.stopMove = false;\n\t\t\t\t\t\t}, 300);\n\n\t\t\t\t\t\tthis.pushDraggableElementToContainer(this.getDropPreview(), overContainer);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (type !== Draggable.HEADLESS)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.pushDraggableElementToContainer(source, overContainer);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isArrayFilled(beforeElements))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst lastElement = beforeElements[beforeElements.length - 1];\n\n\t\t\t\t\t\tif (type === Draggable.DROP_PREVIEW || type === Draggable.CLONE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showDropPreviewAfter(lastElement);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.insertType = 'after';\n\t\t\t\t\t\tthis.insertElement = lastElement;\n\t\t\t\t\t}\n\t\t\t\t\telse if (Type.isArrayFilled(afterElements))\n\t\t\t\t\t{\n\t\t\t\t\t\tconst [firstElement] = afterElements;\n\n\t\t\t\t\t\tif (type === Draggable.DROP_PREVIEW || type === Draggable.CLONE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustDropPreview(afterElements);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.insertType = 'before';\n\t\t\t\t\t\tthis.insertElement = firstElement;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.resetDraggableElementsTransition(lastContainer);\n\t\t\t\t\tthis.resetDraggableElementsPosition(lastContainer);\n\n\t\t\t\t\tif (type !== Draggable.HEADLESS)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isArrayFilled(afterElements))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst sortOffsetY = this.getSortOffsetY();\n\t\t\t\t\t\t\tafterElements.forEach((element) => {\n\t\t\t\t\t\t\t\tthis.move(element, {y: sortOffsetY});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.lastOverContainer = this.lastOverContainer || overContainer;\n\n\t\tif (overContainer !== this.lastOverContainer)\n\t\t{\n\t\t\tconst dragOutContainerEvent = new DragOutContainerEvent({\n\t\t\t\t...dragMoveEvent.data,\n\t\t\t\tout: this.lastOverContainer,\n\t\t\t});\n\n\t\t\tthis.emit('container:out', dragOutContainerEvent);\n\n\t\t\tthis.lastOverContainer = overContainer;\n\t\t}\n\t}\n\n\tonDragEnd(event: DragEndSensorEvent)\n\t{\n\t\tconst dragEndEvent = new DragEndEvent({\n\t\t\t...this.dragStartEvent.data,\n\t\t\tclientX: event.data.clientX,\n\t\t\tclientY: event.data.clientY,\n\t\t\tend: this.lastOver,\n\t\t\tendContainer: this.lastOverContainer,\n\t\t});\n\n\t\tthis.emit('end', dragEndEvent);\n\n\t\tconst {source, draggable} = this.dragStartEvent.data;\n\n\t\tif (this.getOptions().type !== Draggable.HEADLESS)\n\t\t{\n\t\t\tDom.remove(draggable);\n\t\t}\n\n\t\tDom.removeClass(source, 'ui-draggable--source');\n\n\t\tthis.getDraggableElements().forEach((element) => {\n\t\t\tDom.removeClass(element, 'ui-draggable--draggable');\n\t\t\tDom.removeClass(element, 'ui-draggable--over');\n\t\t});\n\n\t\tDom.remove(this.getDropPreview());\n\n\t\tthis.resetDraggableElementsPosition();\n\t\tthis.resetDraggableElementsTransition();\n\n\t\tif (this.getOptions().type !== Draggable.HEADLESS)\n\t\t{\n\t\t\tif (Type.isString(this.insertType))\n\t\t\t{\n\t\t\t\tif (this.insertType === 'after')\n\t\t\t\t{\n\t\t\t\t\tDom.insertAfter(source, this.insertElement);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.insertBefore(source, this.insertElement);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.isDepthEditorEnabled())\n\t\t{\n\t\t\tconst startSourceDepth = this.getStartSourceDepth();\n\t\t\tconst depthDiff = (() => {\n\t\t\t\tif (Type.isNumber(this.currentDepth))\n\t\t\t\t{\n\t\t\t\t\treturn this.currentDepth - startSourceDepth;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t})();\n\n\t\t\tlet lastElement = source;\n\t\t\tthis.childrenElements.forEach((element) => {\n\t\t\t\tconst currentDepth = this.getElementDepth(element);\n\t\t\t\tthis.setElementDepth(element, currentDepth + depthDiff);\n\t\t\t\tDom.insertAfter(element, lastElement);\n\t\t\t\tDom.style(element, 'display', null);\n\t\t\t\tlastElement = element;\n\t\t\t});\n\n\t\t\tif (Type.isNumber(this.currentDepth))\n\t\t\t{\n\t\t\t\tthis.setElementDepth(source, this.currentDepth);\n\t\t\t}\n\t\t}\n\n\t\tthis.lastOver = null;\n\t\tthis.lastOverContainer = null;\n\t\tthis.insertType = null;\n\t\tthis.lastOverDropzone = null;\n\t\tthis.childrenElements = [];\n\t\tthis.currentDepth = null;\n\t\tthis.invalidateCache();\n\t\tDom.removeClass(document.body, 'ui-draggable--disable-user-select');\n\t\tDom.removeClass(document.body, `ui-draggable--type-${this.getOptions().type}`);\n\t}\n\n\tonDragDrop(event: DragDropSensorEvent)\n\t{\n\t\tconst dragDropEvent = new DragDropEvent({\n\t\t\t...this.dragStartEvent.data,\n\t\t\tclientX: event.data.clientX,\n\t\t\tclientY: event.data.clientY,\n\t\t\tdropzone: event.data.dropzone,\n\t\t});\n\n\t\tthis.emit('drop', dragDropEvent);\n\t}\n}\n\nexport {\n\tDragStartEvent,\n\tDragMoveEvent,\n\tDragOutEvent,\n\tDragOutContainerEvent,\n\tDragEndEvent,\n\tDragOverEvent,\n\tDragOverContainerEvent,\n\tDragEnterEvent,\n\tDragEnterContainerEvent,\n};"],"names":["BaseEvent","data","Event","DragStartSensorEvent","Sensor","container","options","setEventNamespace","dropzone","containers","Type","isArray","dropzones","isArrayLike","delay","filter","includes","childElement","find","contains","x","y","document","elementFromPoint","event","cancelable","preventDefault","dragStartEvent","isDefaultPrevented","child","dragElement","closest","EventEmitter","DragMoveSensorEvent","DragEndSensorEvent","DragDropSensorEvent","MouseSensor","mousedownTimeoutId","onMouseDown","bind","onMouseMove","onMouseUp","onDragStart","addEventListener","removeEventListener","preventDefaultEventAction","ctrlKey","metaKey","button","originalDragStartEvent","getContainerByChild","target","getDragElementByChild","startHandleMouseUp","startPreventNativeDragAndDrop","setTimeout","sourceContainer","clientX","clientY","originalSource","originalEvent","emit","isDragging","startPreventContextMenu","startHandleMouseMove","over","getElementFromPoint","overContainer","dragMoveEvent","clearTimeout","stopHandleMouseUp","stopPreventNativeDragAndDrop","dragEndEvent","getDropzoneByChild","dragDropEvent","stopPreventContextMenu","stopHandleMouseMove","preventScrolling","window","passive","TouchSensor","tapTimeoutId","touchMoved","onTouchStart","onTouchEnd","onTouchMove","startHandleTouchEvents","startPreventScrolling","isTouchMoved","touch","touches","changedTouches","stopPreventScrolling","stopHandleTouchEvents","DragStartEvent","DragMoveEvent","DragOverEvent","DragOverContainerEvent","DragEnterEvent","DragEnterContainerEvent","DragOutEvent","DragOutContainerEvent","DragEndEvent","DragOverDropzoneEvent","DragEnterDropzoneEvent","DragOutDropzoneEvent","DragDropEvent","defaultSensors","optionsKey","Symbol","sensorsKey","containersKey","dropzonesKey","Draggable","sensors","draggable","type","transitionDuration","cache","Cache","MemoryCache","onDragMove","onDragEnd","onDragDrop","isDomNode","NodeList","addContainer","flat","Error","isNil","addDropzone","setOptions","getOptions","addSensor","isString","invalidateCache","initializedSensors","map","CurrentSensor","instance","getContainers","subscribe","enable","getSensors","removedSensors","sensor","constructor","forEach","unsubscribe","Dom","addClass","invalidateContainersCache","removeContainer","getDropzones","removeDropzone","remember","reduce","acc","getDraggableElementsOfContainer","draggableSelector","notDraggable","notDropPreview","selector","elements","querySelectorAll","element","parentElement","draggableElements","length","getDraggableElements","indexOf","source","getSource","sourceRect","getSourceClientRect","dropPreview","CLONE","Runtime","clone","Tag","render","style","width","height","requestAnimationFrame","transform","transition","set","get","getBoundingClientRect","force","skipOffset","getDropPreview","targetRect","getRelativePosition","dropPreviewRect","offset","top","Math","abs","adjustPosition","left","elementRect","marginBottom","Text","toNumber","marginTop","bottom","lastDraggableElement","getLastDraggableElementOfContainer","insertAfter","append","undefined","marginLeft","marginRight","point","useRect","elementMiddlePoint","getElementMiddlePoint","push","delete","depth","isPlainObject","DROP_PREVIEW","property","margin","attr","depthMargin","getDepthMargin","sourceMargin","getSourceLeftMargin","getDepthProperty","sourceDepth","getStartSourceDepth","sourceDepthMargin","sourceWidth","getSourceWidth","sourceLeftOffset","getSourceLeftOffset","dropPreviewWidth","depthDiff","offsetX","startSourceDepth","max","floor","parent","parentDepth","getElementDepth","parentRect","splitDraggableElementsListByPoint","nextElements","stop","currentDepth","prevElements","isArrayFilled","pop","getDraggableElementByChild","setSource","pointerOffsetX","pointerOffsetY","HEADLESS","pushDraggableElementToContainer","isDepthEditorEnabled","children","getChildren","childrenElements","adjustDropPreview","body","sourceIndex","getElementIndex","startClientX","startClientY","offsetY","originalOver","stopMove","sortOffsetY","getSortOffsetY","localSourceIndex","index","currentTransform","move","insertType","insertElement","calcDepthByOffset","getPreviousElement","prevDepth","minDepth","maxDepth","min","setDropPreviewDepth","dragOverEvent","lastOver","dragEnterEvent","enter","enterContainer","outContainer","dragOutEvent","out","removeClass","sourceOver","dropzoneOver","dragOverDropzoneEvent","lastOverDropzone","dragEnterDropzoneEvent","dragOutDropzoneEvent","dragOverContainerEvent","lastOverContainer","dragEnterContainerEvent","lastContainer","beforeElements","afterElements","lastElement","showDropPreviewAfter","firstElement","resetDraggableElementsTransition","resetDraggableElementsPosition","dragOutContainerEvent","end","endContainer","remove","insertBefore","isNumber","setElementDepth"],"mappings":"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"}