this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,s,i,t){"use strict";let l=e=>e,a,r,o;var n=babelHelpers.classPrivateFieldLooseKey("id");var d=babelHelpers.classPrivateFieldLooseKey("title");var b=babelHelpers.classPrivateFieldLooseKey("description");var c=babelHelpers.classPrivateFieldLooseKey("className");var h=babelHelpers.classPrivateFieldLooseKey("image");var p=babelHelpers.classPrivateFieldLooseKey("video");var v=babelHelpers.classPrivateFieldLooseKey("autoplay");var u=babelHelpers.classPrivateFieldLooseKey("html");var P=babelHelpers.classPrivateFieldLooseKey("iframe");var y=babelHelpers.classPrivateFieldLooseKey("cache");var B=babelHelpers.classPrivateFieldLooseKey("setVideo");class F{constructor(e){Object.defineProperty(this,B,{value:L});Object.defineProperty(this,n,{writable:true,value:""});Object.defineProperty(this,d,{writable:true,value:""});Object.defineProperty(this,b,{writable:true,value:""});Object.defineProperty(this,c,{writable:true,value:""});Object.defineProperty(this,h,{writable:true,value:null});Object.defineProperty(this,p,{writable:true,value:null});Object.defineProperty(this,v,{writable:true,value:false});Object.defineProperty(this,u,{writable:true,value:null});Object.defineProperty(this,P,{writable:true,value:null});Object.defineProperty(this,y,{writable:true,value:new t.Cache.MemoryCache});e=t.Type.isPlainObject(e)?e:{};babelHelpers.classPrivateFieldLooseBase(this,n)[n]=t.Type.isStringFilled(e.id)?e.id:babelHelpers.classPrivateFieldLooseBase(this,n)[n];babelHelpers.classPrivateFieldLooseBase(this,c)[c]=t.Type.isStringFilled(e.className)?e.className:babelHelpers.classPrivateFieldLooseBase(this,c)[c];babelHelpers.classPrivateFieldLooseBase(this,h)[h]=t.Type.isStringFilled(e.image)?e.image:babelHelpers.classPrivateFieldLooseBase(this,h)[h];babelHelpers.classPrivateFieldLooseBase(this,d)[d]=t.Type.isStringFilled(e.title)?e.title:babelHelpers.classPrivateFieldLooseBase(this,d)[d];babelHelpers.classPrivateFieldLooseBase(this,b)[b]=t.Type.isStringFilled(e.description)?e.description:babelHelpers.classPrivateFieldLooseBase(this,b)[b];babelHelpers.classPrivateFieldLooseBase(this,B)[B](e.video);babelHelpers.classPrivateFieldLooseBase(this,v)[v]=t.Type.isBoolean(e.autoplay)?e.autoplay:babelHelpers.classPrivateFieldLooseBase(this,v)[v];if(t.Type.isElementNode(e.html)||t.Type.isStringFilled(e.html)){babelHelpers.classPrivateFieldLooseBase(this,u)[u]=e.html}}getId(){return babelHelpers.classPrivateFieldLooseBase(this,n)[n]}getTitle(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}getDescription(){return babelHelpers.classPrivateFieldLooseBase(this,b)[b]}getBullet(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].remember("bullet",(()=>t.Tag.render(a||(a=l`<span class="ui-whats-new-bullet" title="${0}"></span>`),this.getTitle())))}getIframe(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}pauseVideo(){if(this.getIframe()){this.getIframe().contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo"}),"*")}}playVideo(){if(this.getIframe()){this.getIframe().contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*")}}isVideo(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]!==null}isAutoplay(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]}getContainer(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].remember("container",(()=>{if(babelHelpers.classPrivateFieldLooseBase(this,p)[p]){babelHelpers.classPrivateFieldLooseBase(this,P)[P]=t.Tag.render(r||(r=l`<iframe 
						src="${0}" 
						id="${0}" 
						class="ui-whats-new-slide-item ${0}" 
						title="YouTube video player"
						frameborder="0"
						allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
						allowfullscreen></iframe>
				`),babelHelpers.classPrivateFieldLooseBase(this,p)[p],babelHelpers.classPrivateFieldLooseBase(this,n)[n],babelHelpers.classPrivateFieldLooseBase(this,c)[c]);return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}else{var e;return t.Tag.render(o||(o=l`<div 
						id="${0}" 
						class="ui-whats-new-slide-item ${0}" 
						${0}>${0}</div>`),babelHelpers.classPrivateFieldLooseBase(this,n)[n],babelHelpers.classPrivateFieldLooseBase(this,c)[c],babelHelpers.classPrivateFieldLooseBase(this,h)[h]?'style="background-image: url('+babelHelpers.classPrivateFieldLooseBase(this,h)[h]+')"':"",(e=babelHelpers.classPrivateFieldLooseBase(this,u)[u])!=null?e:"")}}))}}function L(e){if(!t.Type.isStringFilled(e)){return}const s=new URL(e);s.searchParams.append("enablejsapi","1");babelHelpers.classPrivateFieldLooseBase(this,p)[p]=s.toString()}let g=e=>e,H,m,f,w,S,C,O;var T=babelHelpers.classPrivateFieldLooseKey("popup");var D=babelHelpers.classPrivateFieldLooseKey("slides");var j=babelHelpers.classPrivateFieldLooseKey("cache");var K=babelHelpers.classPrivateFieldLooseKey("position");var x=babelHelpers.classPrivateFieldLooseKey("popupOptions");var $=babelHelpers.classPrivateFieldLooseKey("documentKeyDownHandler");var N=babelHelpers.classPrivateFieldLooseKey("destroying");var E=babelHelpers.classPrivateFieldLooseKey("bindEvents");var I=babelHelpers.classPrivateFieldLooseKey("unbindEvents");var V=babelHelpers.classPrivateFieldLooseKey("handleDocumentKeyDown");var X=babelHelpers.classPrivateFieldLooseKey("handleBulletClick");var k=babelHelpers.classPrivateFieldLooseKey("handlePopupShow");var M=babelHelpers.classPrivateFieldLooseKey("handlePopupClose");var A=babelHelpers.classPrivateFieldLooseKey("handlePopupDestroy");class U extends s.EventEmitter{constructor(e){super();Object.defineProperty(this,A,{value:G});Object.defineProperty(this,M,{value:z});Object.defineProperty(this,k,{value:Y});Object.defineProperty(this,X,{value:R});Object.defineProperty(this,V,{value:J});Object.defineProperty(this,I,{value:q});Object.defineProperty(this,E,{value:W});Object.defineProperty(this,T,{writable:true,value:null});Object.defineProperty(this,D,{writable:true,value:[]});Object.defineProperty(this,j,{writable:true,value:new t.Cache.MemoryCache});Object.defineProperty(this,K,{writable:true,value:null});Object.defineProperty(this,x,{writable:true,value:{}});this.infinityLoop=false;Object.defineProperty(this,$,{writable:true,value:null});Object.defineProperty(this,N,{writable:true,value:false});this.setEventNamespace("BX.UI.Dialogs.WhatsNew");e=t.Type.isPlainObject(e)?e:{};if(!t.Type.isArrayFilled(e.slides)){throw new Error('NewStructurePopup: "items" parameter is required.')}e.slides.forEach((e=>{babelHelpers.classPrivateFieldLooseBase(this,D)[D].push(new F(e))}));if(t.Type.isPlainObject(e.popupOptions)){babelHelpers.classPrivateFieldLooseBase(this,x)[x]=e.popupOptions}if(t.Type.isBoolean(e.infinityLoop)){this.infinityLoop=e.infinityLoop}babelHelpers.classPrivateFieldLooseBase(this,$)[$]=babelHelpers.classPrivateFieldLooseBase(this,V)[V].bind(this);this.subscribeFromOptions(e.events)}getPopup(){if(babelHelpers.classPrivateFieldLooseBase(this,T)[T]!==null){return babelHelpers.classPrivateFieldLooseBase(this,T)[T]}babelHelpers.classPrivateFieldLooseBase(this,T)[T]=new i.Popup(Object.assign({className:"ui-whats-new-popup",closeIcon:false,closeByEsc:true,overlay:true,cacheable:false,animation:"scale",content:this.getContentContainer(),width:808,height:503,autoHide:true},babelHelpers.classPrivateFieldLooseBase(this,x)[x]));babelHelpers.classPrivateFieldLooseBase(this,T)[T].subscribe("onDestroy",babelHelpers.classPrivateFieldLooseBase(this,A)[A].bind(this));babelHelpers.classPrivateFieldLooseBase(this,T)[T].subscribe("onShow",babelHelpers.classPrivateFieldLooseBase(this,k)[k].bind(this));babelHelpers.classPrivateFieldLooseBase(this,T)[T].subscribe("onClose",babelHelpers.classPrivateFieldLooseBase(this,M)[M].bind(this));this.selectSlide();return babelHelpers.classPrivateFieldLooseBase(this,T)[T]}getCurrentSlide(){return babelHelpers.classPrivateFieldLooseBase(this,D)[D][babelHelpers.classPrivateFieldLooseBase(this,K)[K]]}getSlides(){return babelHelpers.classPrivateFieldLooseBase(this,D)[D]}getSlideByPosition(e){var s;return(s=babelHelpers.classPrivateFieldLooseBase(this,D)[D][e])!=null?s:null}getPositionBySlide(e){for(let s=0;s<babelHelpers.classPrivateFieldLooseBase(this,D)[D].length;s++){const i=babelHelpers.classPrivateFieldLooseBase(this,D)[D][s];if(i===e){return s}}return null}getFirstPosition(){return 0}getLastPosition(){return babelHelpers.classPrivateFieldLooseBase(this,D)[D].length-1}getContentContainer(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("content",(()=>t.Tag.render(H||(H=g`
				<div class="ui-whats-new-content"> 
					${0}
					<div class="ui-whats-new-slide-wrap"> 
						${0} 
						${0} 
						<div class="ui-whats-new-slide-inner">${0}</div>  
					</div> 
					<div class="ui-whats-new-bullet-box" onclick="${0}">${0}</div>
					<div class="ui-whats-new-close-btn" onclick="${0}"></div>
				</div>
			`),this.getHeadContainer(),this.getPrevBtn(),this.getNextBtn(),this.getSliderBox(),babelHelpers.classPrivateFieldLooseBase(this,X)[X].bind(this),babelHelpers.classPrivateFieldLooseBase(this,D)[D].map((e=>e.getBullet())),this.hide.bind(this))))}getHeadContainer(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("head",(()=>t.Tag.render(m||(m=g`
				<div class="ui-whats-new-head"> 
					${0}
					${0}
				</div>
			`),this.getTitleContainer(),this.getDescContainer())))}getTitleContainer(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("title",(()=>t.Tag.render(f||(f=g`<div class="ui-whats-new-title"></div>`))))}getDescContainer(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("description",(()=>t.Tag.render(w||(w=g`<div class="ui-whats-new-desc"></div>`))))}getSliderBox(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("sliderBox",(()=>t.Tag.render(S||(S=g`<div class="ui-whats-new-slide-box">${0}</div>`),babelHelpers.classPrivateFieldLooseBase(this,D)[D].map((e=>e.getContainer())))))}getPrevBtn(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("prevBtn",(()=>t.Tag.render(C||(C=g`
				<div 
					class="ui-whats-new-slide-btn --btn-prev" 
					onclick="${0}">
				</div>`),this.selectPrevSlide.bind(this))))}getNextBtn(){return babelHelpers.classPrivateFieldLooseBase(this,j)[j].remember("nextBtn",(()=>t.Tag.render(O||(O=g`
				<div 
					class="ui-whats-new-slide-btn --btn-next" 
					onclick="${0}">
				</div>
			`),this.selectNextSlide.bind(this))))}show(){this.getPopup().show()}hide(){this.getPopup().close()}destroy(){if(babelHelpers.classPrivateFieldLooseBase(this,N)[N]){return}babelHelpers.classPrivateFieldLooseBase(this,N)[N]=true;this.emit("onDestroy");babelHelpers.classPrivateFieldLooseBase(this,I)[I]();this.getPopup().destroy();for(const e in this){if(this.hasOwnProperty(e)){delete this[e]}}Object.setPrototypeOf(this,null)}selectPrevSlide(){if(this.infinityLoop&&babelHelpers.classPrivateFieldLooseBase(this,K)[K]===this.getFirstPosition()){this.selectSlide(this.getLastPosition())}else{this.selectSlide(babelHelpers.classPrivateFieldLooseBase(this,K)[K]-1)}}selectNextSlide(){if(this.infinityLoop&&babelHelpers.classPrivateFieldLooseBase(this,K)[K]===this.getLastPosition()){this.selectSlide(this.getFirstPosition())}else{this.selectSlide(babelHelpers.classPrivateFieldLooseBase(this,K)[K]+1)}}selectSlide(e=0){const i=this.getFirstPosition();const l=this.getLastPosition();e=Math.min(Math.max(e,i),l);if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]===e){return}const a=this.getSlideByPosition(babelHelpers.classPrivateFieldLooseBase(this,K)[K]);const r=this.getSlideByPosition(e);const o=new s.BaseEvent({data:{currentSlide:a,newSlide:r}});this.emit("Slide:onBeforeSelect",o);if(o.isDefaultPrevented()){return}babelHelpers.classPrivateFieldLooseBase(this,K)[K]=e;if(!this.infinityLoop){if(e===i){t.Dom.addClass(this.getPrevBtn(),"--hide");t.Dom.removeClass(this.getNextBtn(),"--hide")}else if(e===l){t.Dom.removeClass(this.getPrevBtn(),"--hide");t.Dom.addClass(this.getNextBtn(),"--hide")}else{t.Dom.removeClass(this.getPrevBtn(),"--hide");t.Dom.removeClass(this.getNextBtn(),"--hide")}}t.Dom.style(this.getSliderBox(),{transform:"translateX("+-e*this.getSliderBox().offsetWidth+"px)"});babelHelpers.classPrivateFieldLooseBase(this,D)[D].forEach(((s,i)=>{if(e===i){t.Dom.addClass(s.getBullet(),"--active")}else{t.Dom.removeClass(s.getBullet(),"--active")}}));t.Dom.style(this.getHeadContainer(),{opacity:0,transition:"none"});const n=r.getTitle().trim();const d=r.getDescription().trim();if(t.Type.isStringFilled(n)){t.Dom.removeClass(this.getContentContainer(),"--empty-head");if(t.Type.isStringFilled(d)){t.Dom.removeClass(this.getContentContainer(),"--empty-desc")}else{t.Dom.addClass(this.getContentContainer(),"--empty-desc")}}else{t.Dom.addClass(this.getContentContainer(),"--empty-head")}this.getTitleContainer().innerHTML=n;this.getDescContainer().innerHTML=d;const b=()=>{this.getSlides().forEach((e=>{if(this.getCurrentSlide()!==e){t.Dom.style(e.getContainer(),"opacity",null);e.pauseVideo()}}));t.Dom.style(this.getHeadContainer(),"opacity",null)};if(r.isVideo()&&r.isAutoplay()){r.playVideo()}setTimeout(b,700);requestAnimationFrame((()=>{requestAnimationFrame((()=>{if(a){t.Dom.style(a.getContainer(),"opacity",0)}t.Dom.style(r.getContainer(),"opacity",1);t.Dom.style(this.getHeadContainer(),"opacity",1);t.Dom.style(this.getHeadContainer(),"transition",null)}))}));this.emit("Slide:onSelect",{slide:r})}}function W(){t.Event.bind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,$)[$])}function q(){t.Event.unbind(document,"keydown",babelHelpers.classPrivateFieldLooseBase(this,$)[$])}function J(e){if(!this.getPopup().isShown()){babelHelpers.classPrivateFieldLooseBase(this,I)[I]();return}if(e.metaKey||e.ctrlKey||e.altKey){return}if(e.key==="ArrowLeft"){this.selectPrevSlide()}else if(e.key==="ArrowRight"){this.selectNextSlide()}}function R(e){const s=this.getSlides().find((s=>e.target===s.getBullet()));const i=this.getPositionBySlide(s);if(i!==null){this.selectSlide(i)}}function Y(){babelHelpers.classPrivateFieldLooseBase(this,E)[E]();this.emit("onShow")}function z(){babelHelpers.classPrivateFieldLooseBase(this,I)[I]();this.getSlides().forEach((e=>{e.pauseVideo()}));this.emit("onHide")}function G(){this.getSlides().forEach((e=>{e.pauseVideo()}));this.destroy()}e.WhatsNew=U;e.Slide=F})(this.BX.UI.Dialogs=this.BX.UI.Dialogs||{},BX.Event,BX.Main,BX);
//# sourceMappingURL=whats-new.bundle.map.js