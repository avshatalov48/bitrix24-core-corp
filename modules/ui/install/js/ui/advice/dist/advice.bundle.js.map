{"version":3,"file":"advice.bundle.js","sources":["../src/advice.js"],"sourcesContent":["import {Type, Tag, Dom} from 'main.core';\n\nimport './advice.css';\n\nexport const AdviceAnglePosition = Object.freeze({\n\tTOP: 'top',\n\tBOTTOM: 'bottom',\n});\n\nexport type AdviceContent = HTMLElement | string | null;\n\nexport type AdviceOptions = {\n\tavatarImg?: string,\n\tcontent?: AdviceContent,\n\ttext?: string,\n\tanglePosition?: string,\n}\n\nexport class Advice\n{\n\t#container: HTMLElement = null;\n\t#avatar: string;\n\t#anglePosition: AdviceAnglePosition;\n\n\t#content: AdviceContent = '';\n\t#textBoxBaseClassname = 'ui-advice__text-box';\n\t#containerBaseClassname = 'ui-advice';\n\n\tstatic AnglePosition = AdviceAnglePosition;\n\n\tconstructor(options: AdviceOptions)\n\t{\n\t\tthis.#avatar = Type.isString(options.avatarImg) ? options.avatarImg : '';\n\t\tthis.#anglePosition = this.#isValidAnglePosition(options.anglePosition) ? options.anglePosition : Advice.AnglePosition.TOP;\n\t\tthis.#content = this.#isValidContent(options.content) ? options.content : '';\n\n\t\tthis.#createContainer();\n\t}\n\n\tgetAvatar(): string\n\t{\n\t\treturn this.#avatar;\n\t}\n\n\tsetAvatar(avatarImg: string): string\n\t{\n\t\tthis.#avatar = avatarImg;\n\t\treturn this.#avatar;\n\t}\n\n\tgetContent(): AdviceContent\n\t{\n\t\treturn this.#content;\n\t}\n\n\tsetContent(content: AdviceContent): AdviceContent\n\t{\n\t\tif (this.#isValidContent(content))\n\t\t{\n\t\t\tthis.#content = content;\n\t\t\treturn this.#content;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getTextBoxClassname(): string\n\t{\n\t\tlet className = this.#textBoxBaseClassname;\n\n\t\tif (this.#anglePosition === AdviceAnglePosition.BOTTOM)\n\t\t{\n\t\t\tclassName += ' --angle-bottom';\n\t\t}\n\t\telse if (this.#anglePosition === AdviceAnglePosition.TOP)\n\t\t{\n\t\t\tclassName += ' --angle-top';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tclassName += ' --angle-bottom';\n\t\t}\n\n\t\treturn className;\n\t}\n\n\t#getContainerClassname(): string\n\t{\n\t\tlet className = this.#containerBaseClassname;\n\t\tswitch (this.#anglePosition)\n\t\t{\n\t\t\tcase AdviceAnglePosition.BOTTOM: className += ' --angle-bottom'; break;\n\t\t\tcase AdviceAnglePosition.TOP: className+= ' --angle-top'; break;\n\t\t\tdefault: className += ' --angle-bottom';\n\t\t}\n\n\t\treturn className;\n\t}\n\n\t#getHtmlContent(): HTMLElement\n\t{\n\t\tif (Type.isString(this.#content))\n\t\t{\n\t\t\treturn Tag.render`<span>${this.#content}</span>`;\n\t\t}\n\n\t\treturn this.#content;\n\t}\n\n\t#createContainer(): HTMLElement\n\t{\n\t\tif (!this.#container)\n\t\t{\n\t\t\tthis.#container = Tag.render`\n\t\t\t\t<div class=\"${this.#getContainerClassname()}\">\n\t\t\t\t\t<div class=\"ui-advice__avatar-box\">\n\t\t\t\t\t\t<span class=\"ui-advice__avatar ui-icon ui-icon-common-user\">\n\t\t\t\t\t\t\t<i style=\"background-image: url('${encodeURI(this.getAvatar())}')\"></i>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${this.#getTextBoxClassname()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\tconst contentContainer = this.#container.querySelector(`.${this.#textBoxBaseClassname}`);\n\n\t\t\tDom.append(this.#getHtmlContent(), contentContainer);\n\t\t}\n\n\t\treturn this.#container;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn this.#container;\n\t}\n\n\t#isValidAnglePosition(anglePosition: string): boolean\n\t{\n\t\treturn Type.isString(anglePosition) && Object.values(AdviceAnglePosition).includes(anglePosition);\n\t}\n\n\t#isValidContent(content: HTMLElement | string): boolean {\n\t\treturn Type.isString(content) || Type.isDomNode(content);\n\t}\n\n\trenderTo(targetContainer: HTMLElement): HTMLElement | null\n\t{\n\t\tif (Type.isDomNode(targetContainer))\n\t\t{\n\t\t\tDom.append(this.#container, targetContainer);\n\t\t\treturn targetContainer;\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n}\n"],"names":["AdviceAnglePosition","Object","freeze","TOP","BOTTOM","Advice","constructor","options","Type","isString","avatarImg","anglePosition","AnglePosition","content","getAvatar","setAvatar","getContent","setContent","getContainer","renderTo","targetContainer","isDomNode","Dom","append","className","Tag","render","encodeURI","contentContainer","querySelector","values","includes"],"mappings":"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"}