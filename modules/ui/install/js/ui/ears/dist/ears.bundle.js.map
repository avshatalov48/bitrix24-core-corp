{"version":3,"file":"ears.bundle.js","sources":["../src/ears.js"],"sourcesContent":["import {Tag, Dom, Cache} from 'main.core';\n\nexport class Ears\n{\n\tconstructor(options)\n\t{\n\t\tthis.container = options.container;\n\t\tthis.smallSize = options.smallSize || null;\n\t\tthis.noScrollbar = options.noScrollbar ? options.noScrollbar : false;\n\t\tthis.wrapper = null;\n\t\tthis.leftEar = null;\n\t\tthis.rightEar = null;\n\t\tthis.parentContainer = this.container.parentNode;\n\t\tthis.delay = 6;\n\t\tthis.scrollTimeout = null;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tbindEvents() {\n\t\tthis.container.addEventListener('scroll', this.toggleEars.bind(this));\n\t\tthis.container.addEventListener(\"wheel\", this.onWheel.bind(this));\n\n\t\tthis.getLeftEar().addEventListener('mouseenter', this.scrollLeft.bind(this));\n\t\tthis.getLeftEar().addEventListener('mouseleave', this.stopScroll.bind(this));\n\t\tthis.getLeftEar().addEventListener('mousedown', this.stopScroll.bind(this));\n\t\tthis.getLeftEar().addEventListener('mouseup', this.scrollLeft.bind(this));\n\n\t\tthis.getRightEar().addEventListener('mouseenter', this.scrollRight.bind(this));\n\t\tthis.getRightEar().addEventListener('mouseleave', this.stopScroll.bind(this));\n\t\tthis.getRightEar().addEventListener('mousedown', this.stopScroll.bind(this));\n\t\tthis.getRightEar().addEventListener('mouseup', this.scrollRight.bind(this));\n\t}\n\n\tinit() {\n\t\tthis.setWrapper();\n\t\tthis.bindEvents();\n\n\t\tsetTimeout(function() {\n\t\t\tif (this.container.scrollWidth > this.container.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.toggleRightEar();\n\t\t\t}\n\t\t}.bind(this), 600);\n\t}\n\n\tonWheel(event)\n\t{\n\t\tif (event.deltaY < 0 || event.deltaX > 0)\n\t\t{\n\t\t\tthis.scrollRight();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.scrollLeft();\n\t\t}\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(function() {\n\t\t\tthis.stopScroll();\n\t\t}.bind(this), 150);\n\t}\n\n\tsetWrapper() {\n\t\tthis.container.classList.add(\"ui-ear-container\");\n\t\tif (this.noScrollbar)\n\t\t{\n\t\t\tthis.container.classList.add(\"ui-ear-container-no-scrollbar\");\n\t\t}\n\t\tDom.append(this.getWrapper(), this.parentContainer);\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn this.cache.remember('wrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"ui-ears-wrapper ${this.smallSize ? ' ui-ears-wrapper-sm' : ''}\">\n\t\t\t\t\t\t${this.getLeftEar()}\n\t\t\t\t\t\t${this.getRightEar()}\n\t\t\t\t\t\t${this.container}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\tgetLeftEar()\n\t{\n\t\treturn this.cache.remember('leftEar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"ui-ear ui-ear-left\"></div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\tgetRightEar()\n\t{\n\t\treturn this.cache.remember('rightEar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"ui-ear ui-ear-right\"></div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\ttoggleEars() {\n\t\tthis.toggleRightEar();\n\t\tthis.toggleLeftEar();\n\t}\n\n\ttoggleRightEar() {\n\t\tif (this.container.scrollWidth > this.container.offsetWidth\n\t\t\t&& (this.container.offsetWidth + this.container.scrollLeft) < this.container.scrollWidth)\n\t\t{\n\t\t\tthis.getRightEar().classList.add(\"ui-ear-show\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getRightEar().classList.remove(\"ui-ear-show\");\n\t\t}\n\t}\n\n\ttoggleLeftEar() {\n\t\tif (this.container.scrollLeft > 0)\n\t\t{\n\t\t\tthis.getLeftEar().classList.add(\"ui-ear-show\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLeftEar().classList.remove(\"ui-ear-show\");\n\t\t}\n\t}\n\n\tscrollLeft() {\n\t\tthis.stopScroll('right');\n\n\t\tthis.container.scrollLeft -= 10;\n\t\tthis.setDelay();\n\t\tthis.scrollInterval = setInterval(\n\t\t\tthis.scrollLeft.bind(this),\n\t\t\tthis.delay);\n\n\t\tthis.left = true;\n\t}\n\n\tscrollRight() {\n\t\tthis.stopScroll('left');\n\n\t\tthis.container.scrollLeft += 10;\n\t\tthis.setDelay();\n\t\tthis.scrollInterval = setInterval(\n\t\t\tthis.scrollRight.bind(this),\n\t\t\tthis.delay);\n\n\t\tthis.right = true;\n\t}\n\n\tsetDelay() {\n\t\tif (this.container.scrollWidth < this.container.offsetWidth * 1.6)\n\t\t{\n\t\t\tthis.delay = 20;\n\t\t\treturn;\n\t\t}\n\n\t\tconst fullScrollLeft = this.container.scrollWidth - this.container.offsetWidth;\n\t\tconst conditionRight = this.container.scrollLeft > fullScrollLeft / 1.3;\n\t\tconst conditionLeft = this.container.scrollLeft < fullScrollLeft / 4;\n\n\t\tif (this.container.scrollLeft === fullScrollLeft)\n\t\t{\n\t\t\tthis.delay = 6;\n\t\t}\n\n\t\tif (this.left)\n\t\t{\n\t\t\tif (conditionLeft)\n\t\t\t{\n\t\t\t\tthis.delay = 25;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.delay = 6;\n\t\t\t}\n\t\t}\n\n\t\tif (this.right)\n\t\t{\n\t\t\tif (conditionRight)\n\t\t\t{\n\t\t\t\tthis.delay = 25;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.delay = 6;\n\t\t\t}\n\t\t}\n\t}\n\n\tstopScroll(direction) {\n\t\tif (this.scrollInterval)\n\t\t{\n\t\t\tclearInterval(this.scrollInterval);\n\t\t\tthis.scrollInterval = 0;\n\t\t}\n\n\t\tif (direction === 'right')\n\t\t{\n\t\t\tthis.right = false;\n\t\t}\n\t\telse if (direction === 'left')\n\t\t{\n\t\t\tthis.left = false;\n\t\t}\n\t}\n}"],"names":["Ears","options","container","smallSize","noScrollbar","wrapper","leftEar","rightEar","parentContainer","parentNode","delay","scrollTimeout","cache","Cache","MemoryCache","addEventListener","toggleEars","bind","onWheel","getLeftEar","scrollLeft","stopScroll","getRightEar","scrollRight","setWrapper","bindEvents","setTimeout","scrollWidth","offsetWidth","toggleRightEar","event","deltaY","deltaX","clearTimeout","classList","add","Dom","append","getWrapper","remember","Tag","render","toggleLeftEar","remove","setDelay","scrollInterval","setInterval","left","right","fullScrollLeft","conditionRight","conditionLeft","direction","clearInterval"],"mappings":"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"}