BX.namespace("BX.UI");if(typeof BX.UI.Form==="undefined"){BX.UI.Form=function(){this._id="";this._settings=null;this._elementNode=null};BX.UI.Form.prototype={initialize:function(t,i){this._id=BX.type.isNotEmptyString(t)?t:"";this._settings=BX.type.isPlainObject(i)?i:{};this._elementNode=BX.prop.getElementNode(this._settings,"elementNode",null);if(!this._elementNode){throw"BX.UI.Form: Could not find 'elementNode' parameter in settings."}this.doInitialize()},doInitialize:function(){},getId:function(){return this._id},getElementNode:function(){return this._elementNode},submit:function(t){if(!BX.type.isPlainObject(t)){t={}}var i={cancel:false,options:t};BX.onCustomEvent(this,"onBeforeSubmit",[this,i]);if(i["cancel"]){return false}this.doSubmit(t);BX.onCustomEvent(this,"onAfterSubmit",[this,{options:t}]);return true},doSubmit:function(t){}}}if(typeof BX.UI.AjaxForm==="undefined"){BX.UI.AjaxForm=function(){BX.UI.AjaxForm.superclass.constructor.apply(this);this._config=null};BX.extend(BX.UI.AjaxForm,BX.UI.Form);BX.UI.AjaxForm.prototype.doInitialize=function(){this._config=BX.prop.getObject(this._settings,"config",null);if(!this._config){throw"BX.UI.AjaxForm: Could not find 'config' parameter in settings."}if(BX.prop.getString(this._config,"url","")===""){throw"BX.UI.AjaxForm: Could not find 'url' parameter in config"}if(BX.prop.getString(this._config,"method","")===""){this._config["method"]="POST"}if(BX.prop.getString(this._config,"dataType","")===""){this._config["dataType"]="json"}};BX.UI.AjaxForm.prototype.getUrl=function(){return BX.prop.getString(this._config,"url","")};BX.UI.AjaxForm.prototype.setUrl=function(t){this._config["url"]=t};BX.UI.AjaxForm.prototype.addUrlParams=function(t){if(BX.type.isPlainObject(t)&&Object.keys(t).length>0){this._config["url"]=BX.util.add_url_param(BX.prop.getString(this._config,"url",""),t)}};BX.UI.AjaxForm.prototype.doSubmit=function(t){BX.ajax.submitAjax(this._elementNode,this._config)};BX.UI.AjaxForm.create=function(t,i){var n=new BX.UI.AjaxForm;n.initialize(t,i);return n}}if(typeof BX.UI.ComponentAjax==="undefined"){BX.UI.ComponentAjax=function(){BX.UI.ComponentAjax.superclass.constructor.apply(this);this._className="";this._actionName="";this._signedParameters=null;this._callbacks=null};BX.extend(BX.UI.ComponentAjax,BX.UI.Form);BX.UI.ComponentAjax.prototype.doInitialize=function(){this._className=BX.prop.getString(this._settings,"className","");this._actionName=BX.prop.getString(this._settings,"actionName","");this._signedParameters=BX.prop.getString(this._settings,"signedParameters",null);this._callbacks=BX.prop.getObject(this._settings,"callbacks",{})};BX.UI.ComponentAjax.prototype.doSubmit=function(t){BX.ajax.runComponentAction(this._className,this._actionName,{mode:"class",signedParameters:this._signedParameters,data:BX.ajax.prepareForm(this._elementNode)}).then(function(t){var i=BX.prop.getFunction(this._callbacks,"onSuccess",null);if(i){BX.onCustomEvent(window,"BX.UI.EntityEditorAjax:onSubmit",[t["data"]["ENTITY_DATA"],t]);i(t["data"])}}.bind(this)).catch(function(t){var i=BX.prop.getFunction(this._callbacks,"onFailure",null);if(!i){return}var n=[];var e=t["errors"];for(var o=0,s=e.length;o<s;o++){n.push(e[o]["message"])}BX.onCustomEvent(window,"BX.UI.EntityEditorAjax:onSubmitFailure",[t["errors"]]);i({ERRORS:n})}.bind(this))};BX.UI.ComponentAjax.create=function(t,i){var n=new BX.UI.ComponentAjax;n.initialize(t,i);return n}}
//# sourceMappingURL=form.map.js