{"version":3,"file":"field.bundle.js","sources":["../src/error-collection.js","../src/visitors/base-settings-visitor.js","../src/base-settings-element.js","../src/settings-field.js","../src/settings-row.js","../src/settings-section.js","../src/base-settings-page.js","../src/visitors/recursive-filtering-visitor.js","../src/visitors/ascending-opening-visitor.js","../src/tab-field.js","../src/tabs-field.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport {OrderedArray} from \"main.core.collections\";\n\nexport class ErrorCollection extends OrderedArray\n{\n\tconstructor(errors: Array = [], comparator: Function = null)\n\t{\n\t\tsuper(comparator);\n\n\t\tthis.addItems(errors);\n\t}\n\n\taddItems(items: [T])\n\t{\n\t\tfor (const item of items)\n\t\t{\n\t\t\tthis.add(item);\n\t\t}\n\t}\n\n\tmerge(errorCollection: ErrorCollection): ErrorCollection\n\t{\n\t\tthis.addItems(errorCollection.getAll());\n\n\t\treturn this;\n\t}\n\n\tstatic showSystemError(text: string): void\n\t{\n\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\tcontent: text,\n\t\t\tposition: 'bottom-right',\n\t\t\tcategory: 'menu-self-item-popup',\n\t\t\tautoHideDelay: 3000,\n\t\t});\n\t}\n}","import {EventEmitter} from 'main.core.events';\n\nexport class BaseSettingsVisitor extends EventEmitter\n{\n\tstatic #instances = {};\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.setEventNamespace('BX.UI.FormElement.Field');\n\t}\n\n\tvisitSettingsElement(settingsElement)\n\t{\n\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tconst id = this.name;\n\n\t\tif (!BaseSettingsVisitor.#instances[id])\n\t\t{\n\t\t\tBaseSettingsVisitor.#instances[id] = new this();\n\t\t}\n\n\t\treturn BaseSettingsVisitor.#instances[id]\n\t}\n}\n","import {ErrorCollection} from \"./error-collection\";\nimport {BaseSettingsVisitor} from './visitors/base-settings-visitor';\nimport {EventEmitter} from 'main.core.events';\nimport {Type} from 'main.core';\n\nexport class BaseSettingsElement extends EventEmitter\n{\n\t#errorCollection: ErrorCollection\n\t#parentElement: ?BaseSettingsElement;\n\t#childrenElements: [BaseSettingsElement];\n\n\tconstructor(params)\n\t{\n\t\tparams = Type.isNil(params) ? {} : params;\n\t\tsuper();\n\t\tthis.#parentElement = null;\n\t\tthis.setEventNamespace('BX.UI.FormElement.Field');\n\t\tif (!Type.isNil(params.parent))\n\t\t{\n\t\t\tthis.setParentElement(params.parent);\n\t\t}\n\t\tthis.#childrenElements = [];\n\t\tif (!Type.isNil(params.children))\n\t\t{\n\t\t\tthis.setChildrenElements(params.children);\n\t\t}\n\t\tthis.addChild(params.child);\n\t\tthis.#errorCollection = new ErrorCollection();\n\t}\n\n\tgetErrorCollection(): ErrorCollection\n\t{\n\t\treturn this.#errorCollection;\n\t}\n\n\tsetErrorCollection(errorCollection: ErrorCollection): void\n\t{\n\t\tthis.#errorCollection.merge(errorCollection);\n\n\t\tthis.#parentElement?.setErrorCollection(this.#errorCollection);\n\t}\n\n\tgetParentElement(): ?BaseSettingsElement\n\t{\n\t\treturn this.#parentElement;\n\t}\n\n\tgetChildrenElements(): [BaseSettingsElement]\n\t{\n\t\treturn this.#childrenElements;\n\t}\n\n\tsetParentElement(parent: BaseSettingsElement): BaseSettingsElement\n\t{\n\t\tif (parent instanceof BaseSettingsElement)\n\t\t{\n\t\t\tthis.#parentElement = parent;\n\t\t\tthis.#parentElement.addChild(this);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tunsetParentElement()\n\t{\n\t\tthis.#parentElement = null;\n\t}\n\n\tsetChildrenElements(value: Array<BaseSettingsElement>)\n\t{\n\t\tfor (let element of value)\n\t\t{\n\t\t\tthis.addChild(element);\n\t\t}\n\t}\n\n\taddChild(child: BaseSettingsElement)\n\t{\n\t\tif (child instanceof BaseSettingsElement)\n\t\t{\n\t\t\tthis.#childrenElements.push(child);\n\t\t\tif (Type.isNil(child.getParentElement()))\n\t\t\t{\n\t\t\t\tchild.setParentElement(this);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child: BaseSettingsElement)\n\t{\n\t\tif (child instanceof BaseSettingsElement)\n\t\t{\n\t\t\tthis.#childrenElements = this.#childrenElements\n\t\t\t\t.filter((element) => element !== child)\n\t\t\t;\n\t\t\tchild.unsetParentElement();\n\t\t}\n\t}\n\n\t//#region \"Renderable\" Interface\n\n\trender(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\trenderErrors(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\taccept(visitor: BaseSettingsVisitor)\n\t{\n\t\tvisitor.visitSettingsElement(this);\n\t}\n\n\t//#endregion \"Renderable\" Interface\n}\n","import { BaseSettingsElement } from './base-settings-element';\nimport { BaseField } from 'ui.form-elements.view';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { ErrorCollection } from './error-collection';\n\nexport class SettingsField extends BaseSettingsElement\n{\n\t#fieldView: BaseField;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tif (!(params.fieldView instanceof BaseField))\n\t\t{\n\t\t\tthrow new Error(`Unexpected field type, expected \"BaseField\"`);\n\t\t}\n\t\tthis.#fieldView = params.fieldView;\n\t\tEventEmitter.subscribe('BX.UI.FormElement.Field:onFailedSave', this.#onFailedSave.bind(this));\n\t}\n\n\tgetFieldView(): BaseField\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.getFieldView().render();\n\t}\n\n\trenderErrors(): HTMLElement\n\t{\n\t\tthis.getFieldView().setErrors(this.getErrorCollection().getAll());\n\n\t\treturn this.getFieldView().renderErrors();\n\t}\n\n\t#extractErrorsFromEvent(event: BaseEvent): Array<String>\n\t{\n\t\tlet errors = {};\n\t\tfor (const type in event.data.errors)\n\t\t{\n\t\t\terrors = { ...errors, ...event.data.errors[type] };\n\t\t}\n\n\t\treturn errors[this.getFieldView().getName()] ?? [];\n\t}\n\n\t#onFailedSave(event: BaseEvent)\n\t{\n\t\tlet fieldErrors = this.#extractErrorsFromEvent(event);\n\t\tthis.getErrorCollection().clear();\n\t\tthis.setErrorCollection(new ErrorCollection(fieldErrors));\n\t\tthis.renderErrors();\n\t}\n}","import { Type } from 'main.core';\nimport { BaseSettingsElement } from './base-settings-element';\nimport { Row } from 'ui.section';\n\nexport class SettingsRow extends BaseSettingsElement\n{\n\t#rowView: Row;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\t\tthis.#rowView = params.row instanceof Row\n\t\t\t? params.row : new Row(Type.isPlainObject(params.row) ? params.row : {})\n\t\t;\n\t}\n\n\tgetRowView(): Row\n\t{\n\t\treturn this.#rowView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tfor (let element of this.getChildrenElements())\n\t\t{\n\t\t\tthis.getRowView().append(element.render());\n\t\t}\n\n\t\treturn this.getRowView().render();\n\t}\n}","import { BaseSettingsElement } from './base-settings-element';\nimport { Section } from 'ui.section';\nimport { Dom, Type } from 'main.core';\n\nexport class SettingsSection extends BaseSettingsElement\n{\n\t#sectionView: Section;\n\t#sectionSort: number = 100;\n\n\tconstructor(params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#sectionView = params.section instanceof Section\n\t\t\t? params.section : new Section(Type.isPlainObject(params.section) ? params.section : {})\n\t\t;\n\t\tthis.#sectionSort = Type.isNumber(params.sort) ? params.sort : 100;\n\t}\n\n\tgetSectionView(): Section\n\t{\n\t\treturn this.#sectionView;\n\t}\n\n\tgetSectionSort(): number\n\t{\n\t\treturn this.#sectionSort;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tfor (let element of this.getChildrenElements())\n\t\t{\n\t\t\tthis.getSectionView().append(element.render());\n\t\t}\n\n\t\treturn this.getSectionView().render();\n\t}\n\n\trenderTo(targetNode: HTMLElement): HTMLElement\n\t{\n\t\treturn Dom.append(this.render(), targetNode);\n\t}\n}","import { Dom, Tag, Type, Loc, Runtime } from 'main.core';\nimport { HelpMessage, Row } from 'ui.section';\nimport { BaseField } from 'ui.form-elements.view';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { BaseSettingsElement } from './base-settings-element';\nimport { ErrorCollection } from './error-collection';\nimport { SettingsField } from './settings-field';\nimport { SettingsRow } from './settings-row';\nimport { SettingsSection } from './settings-section';\n\nexport class BaseSettingsPage extends BaseSettingsElement\n{\n\tfields: Object = {};\n\t#content: ?HTMLElement;\n\t#page: ?HTMLElement;\n\ttitlePage: string = '';\n\tdescriptionPage: string = '';\n\t#data: ?Object = null;\n\t/**\n\t * @type {?Analytic}\n\t */\n\t#analytic: ?Object;\n\t#subPage: Map = new Map;\n\t#subPageExtensions: Array = [];\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Intranet.Settings');\n\t}\n\n\tgetAnalytic(): ?Object\n\t{\n\t\treturn this.#analytic;\n\t}\n\n\t/**\n\t * @param analytic\n\t */\n\tsetAnalytic(analytic: ?Object): void\n\t{\n\t\tthis.#analytic = analytic;\n\t}\n\n\thasValue(key: string): boolean\n\t{\n\t\tif (Type.isNil(this.#data) || !Type.isObject(this.#data))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !Type.isNil(this.#data[key]);\n\t}\n\n\tgetValue(key: string): ?any\n\t{\n\t\tif (!this.hasValue(key))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.#data[key];\n\t}\n\n\thasData(): boolean\n\t{\n\t\treturn this.#data !== null;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetPage(): HTMLElement\n\t{\n\t\tif (this.#page)\n\t\t{\n\t\t\treturn this.#page;\n\t\t}\n\n\t\tif (Type.isNil(this.#data))\n\t\t{\n\t\t\tthis.#fetchData();\n\t\t}\n\n\t\tthis.#page = Tag.render`\n\t\t\t<div id=\"${this.getType()}-page-wrapper\">\n\t\t\t\t${Type.isNil(this.#data) ? LoaderPage.getWrapper() : this.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#page;\n\t}\n\n\treload()\n\t{\n\t\tDom.remove(this.render());\n\t\tthis.#content = null;\n\t\tthis.#data = null;\n\t\tDom.append(LoaderPage.getWrapper(), this.getPage());\n\t\tthis.#fetchData();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#content = Tag.render`\n\t\t\t<div>\n\t\t\t\t<div class=\"intranet-settings__page-header_wrap\">\n\t\t\t\t\t<div class=\"intranet-settings__page-header_inner\">\n\t\t\t\t\t\t<h1 class=\"intranet-settings__page-header\">${this.titlePage}</h1>\n\t\t\t\t\t\t<p class=\"intranet-settings__page-header_desc\">${this.descriptionPage}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"intranet-settings__header-widget\"></div>\n\t\t\t\t</div>\n\t\t\t\t<form id=\"form-${this.getType()}-page\" onsubmit=\"return false;\">\n\t\t\t\t\t<div class=\"intranet-settings__content-box\"></div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t`;\n\t\tconst headerWidget = this.headerWidgetRender();\n\t\tconst headerWidgetWrapper = this.#content.querySelector('.intranet-settings__header-widget');\n\t\tif (headerWidget)\n\t\t{\n\t\t\tDom.append(headerWidget, headerWidgetWrapper);\n\t\t\tDom.addClass(this.#content.querySelector('.intranet-settings__page-header_wrap'), '--with-header-widget')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.remove(headerWidgetWrapper);\n\t\t}\n\n\t\tconst formNode = this.#content.querySelector('form');\n\t\tconst contentNode = formNode.querySelector('.intranet-settings__content-box');\n\n\t\tformNode.addEventListener('change', () => {\n\t\t\tthis.emit('change', { source: this });\n\t\t});\n\n\t\tthis.appendSections(contentNode);\n\n\t\treturn this.#content;\n\t}\n\n\theaderWidgetRender(): HTMLElement\n\t{\n\t\treturn '';\n\t}\n\n\t#fetchData()\n\t{\n\t\t(new Promise((resolve, reject) => {\n\t\t\tRuntime\n\t\t\t\t.loadExtension(this.#subPageExtensions)\n\t\t\t\t.then((exports) => {\n\t\t\t\t\t// 1. collect data by Event for old extensions\n\t\t\t\t\tEventEmitter.emit(\n\t\t\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t\t\t'BX.Intranet.Settings:onPageFetched:' + this.getType(),\n\t\t\t\t\t\t\tevent\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.forEach((subPage: BaseSettingsPage) => this.#subPage.set(subPage.getType(), subPage))\n\t\t\t\t\t;\n\t\t\t\t\t// 2. collect data by export for new extensions\n\t\t\t\t\tObject.values(exports).forEach((desirableClass) => {\n\t\t\t\t\t\tif (Type.isObject(desirableClass))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (desirableClass.prototype instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst subPage = new desirableClass();\n\t\t\t\t\t\t\t\tthis.#subPage.set(subPage.getType(), subPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (desirableClass instanceof BaseSettingsPage)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst subPage = desirableClass;\n\t\t\t\t\t\t\t\tthis.#subPage.set(subPage.getType(), subPage);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tconst event = new BaseEvent();\n\t\t\t\t\tconst eventResult = EventEmitter\n\t\t\t\t\t\t.emit(this, 'fetch', event)\n\t\t\t\t\t\t.some((ajaxPromise: Promise) => {\n\t\t\t\t\t\t\tif (ajaxPromise instanceof Promise)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tajaxPromise.then(resolve, reject);\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t})\n\t\t\t\t\t;\n\t\t\t\t\tif (eventResult !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\treject({error: 'The handler for fetching page data was not found. '});\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\t\t})).then(this.onSuccessDataFetched.bind(this), this.onFailDataFetched.bind(this));\n\t}\n\n\tonSuccessDataFetched(response)\n\t{\n\t\tthis.setData(response.data);\n\t}\n\n\tsetData(data): void\n\t{\n\t\tthis.#data = data;\n\n\t\tthis.#subPage.forEach((subPage: BaseSettingsPage) => {\n\t\t\tsubPage.setData(data);\n\t\t});\n\n\t\tif (this.#page)\n\t\t{\n\t\t\tDom.clean(this.#page);\n\t\t\tthis.#content = null;\n\t\t\tDom.append(this.render(), this.#page);\n\t\t}\n\t}\n\n\tonFailDataFetched(response): void\n\t{\n\t\tErrorCollection.showSystemError(Loc.getMessage('INTRANET_SETTINGS_ERROR_FETCH_DATA'));\n\t}\n\n\tgetFormNode(): ?HTMLElement\n\t{\n\t\treturn this.render().querySelector('form');\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tconst sections = this.getSections();\n\n\t\tthis.#subPage.forEach((subPage: BaseSettingsPage) => {\n\t\t\tsections.push(...subPage.getSections());\n\t\t});\n\n\t\tsections\n\t\t\t.sort((sectionA: SettingsSection, sectionB: SettingsSection) => sectionA.getSectionSort() - sectionB.getSectionSort())\n\t\t\t.forEach((section: SettingsSection) => {\n\t\t\t\tcontentNode.appendChild(\n\t\t\t\t\tsection.render()\n\t\t\t\t)\n\t\t\t})\n\t\t;\n\t}\n\n\texpandPage(subPageExtensions: array): this\n\t{\n\t\tif (Type.isArray(subPageExtensions))\n\t\t{\n\t\t\tthis.#subPageExtensions.push(...subPageExtensions);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetSections(): SettingsSection[]\n\t{\n\t\treturn [];\n\t}\n\n\thelpMessageProviderFactory(message: ?HTMLElement): function\n\t{\n\t\tmessage = Type.isNil(message) ? Loc.getMessage('INTRANET_SETTINGS_FIELD_HELP_MESSAGE') : message;\n\n\t\treturn (id: string, node: HTMLElement) => {\n\t\t\treturn new HelpMessage(id, node, message);\n\t\t};\n\t}\n\n\tstatic addToSectionHelper(fieldView: BaseField, sectionSettings: SettingsSection, row: Row = null): void\n\t{\n\t\tlet settingsField = new SettingsField({\n\t\t\tfieldView: fieldView,\n\t\t});\n\t\tnew SettingsRow({\n\t\t\trow: row,\n\t\t\tchild: settingsField,\n\t\t\tparent: sectionSettings,\n\t\t});\n\t}\n}\n\nclass LoaderPage\n{\n\tstatic #wrapper: HTMLElement;\n\n\tstatic getWrapper()\n\t{\n\t\tif (LoaderPage.#wrapper)\n\t\t{\n\t\t\treturn LoaderPage.#wrapper;\n\t\t}\n\n\t\tLoaderPage.#wrapper = Tag.render`\n\t\t\t<div class=\"intranet-settings__loader\"></div>\n\t\t`;\n\t\t// const loader = new Loader({target: LoaderPage.#wrapper, size: 200});\n\t\t// loader.show();\n\n\t\treturn LoaderPage.#wrapper;\n\t}\n}\n","import {BaseSettingsVisitor} from './base-settings-visitor';\nimport {BaseSettingsElement} from '../base-settings-element';\n\nexport class RecursiveFilteringVisitor extends BaseSettingsVisitor\n{\n\t#filterCallback = null;\n\t#result: BaseSettingsElement[] = [];\n\n\tsetFilter(filterStrategy): RecursiveFilteringVisitor\n\t{\n\t\tthis.#filterCallback = filterStrategy;\n\t\treturn this;\n\t}\n\n\t#do(element: BaseSettingsElement): boolean\n\t{\n\t\tif (typeof this.#filterCallback === 'function')\n\t\t{\n\t\t\treturn this.#filterCallback(element) === true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trestart(startElement: BaseSettingsElement): BaseSettingsElement[]\n\t{\n\t\tthis.#result = [];\n\t\tthis.visitSettingsElement(startElement);\n\t\treturn this.#result;\n\t}\n\n\tvisitSettingsElement(element: BaseSettingsElement): void\n\t{\n\t\tif (this.#do(element))\n\t\t{\n\t\t\tif (element.getChildrenElements().length > 0)\n\t\t\t{\n\t\t\t\telement\n\t\t\t\t\t.getChildrenElements()\n\t\t\t\t\t.forEach((childElement: BaseSettingsElement) => {\n\t\t\t\t\t\tthis.visitSettingsElement(childElement);\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#result.push(element);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic startFrom(startElement: BaseSettingsElement, filterStrategy): BaseSettingsElement[]\n\t{\n\t\treturn this.getInstance()\n\t\t\t.setFilter(filterStrategy)\n\t\t\t.restart(startElement)\n\t\t;\n\t}\n}\n","import { SettingsRow } from '../settings-row';\nimport { SettingsSection } from '../settings-section';\nimport {BaseSettingsVisitor} from './base-settings-visitor';\nimport {BaseSettingsElement} from '../base-settings-element';\n\nexport class AscendingOpeningVisitor extends BaseSettingsVisitor\n{\n\t#filterCallback = null;\n\t#result: BaseSettingsElement[] = [];\n\n\tsetFilter(filterStrategy): this\n\t{\n\t\tthis.#filterCallback = filterStrategy;\n\t\treturn this;\n\t}\n\n\t#do(element: BaseSettingsElement): boolean\n\t{\n\t\tif (typeof this.#filterCallback === 'function')\n\t\t{\n\t\t\treturn this.#filterCallback(element) === true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\trestart(startElement: BaseSettingsElement): BaseSettingsElement[]\n\t{\n\t\tthis.#result = [];\n\t\tthis.visitSettingsElement(startElement);\n\t\treturn this.#result;\n\t}\n\n\tvisitSettingsElement(element: BaseSettingsElement): void\n\t{\n\t\tconsole.log('element.constructor.name: ', element.constructor.name);\n\n\t\tif (element instanceof SettingsRow)\n\t\t{\n\t\t\telement.getRowView().show();\n\t\t}\n\t\telse if (element instanceof SettingsSection)\n\t\t{\n\t\t\telement.getSectionView().toggle(true);\n\t\t\tconsole.log('element.getSectionView(): ', element.getSectionView());\n\n\t\t}\n\t}\n\n\tstatic startFrom(startElement: BaseSettingsElement): BaseSettingsElement\n\t{\n\t\tconst instance = this.getInstance();\n\n\t\tlet currentElement = startElement;\n\t\tlet lastElement = startElement;\n\n\t\twhile (currentElement)\n\t\t{\n\t\t\tlastElement = currentElement;\n\t\t\tinstance.visitSettingsElement(currentElement);\n\t\t\tcurrentElement = currentElement.getParentElement();\n\t\t}\n\n\t\treturn lastElement;\n\t}\n}\n","import { BaseSettingsElement } from './base-settings-element';\nimport { Tab, Tabs } from 'ui.tabs';\nimport type { TabOptionsType } from 'ui.tabs';\n\nexport type TabFieldType = {\n\tparent: BaseSettingsElement,\n\ttabsOptions?: TabOptionsType,\n\tfieldView?: Tab\n};\n\nexport class TabField extends BaseSettingsElement\n{\n\t#fieldView: Tab;\n\n\tconstructor(params: TabFieldType)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setParentElement(params.parent);\n\n\t\tif (params.fieldView instanceof Tab)\n\t\t{\n\t\t\tthis.#fieldView = params.fieldView;\n\t\t}\n\t\telse if (params.tabsOptions)\n\t\t{\n\t\t\tthis.#fieldView = new Tab(params.tabsOptions);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error('Tab field in Settings is not correct.');\n\t\t}\n\n\t\tif (params.parent.getFieldView() instanceof Tabs)\n\t\t{\n\t\t\tparams.parent.getFieldView().addItem(this.#fieldView);\n\t\t}\n\t}\n\n\tgetFieldView(): Tab\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.getFieldView().getBody();\n\t}\n}","import {BaseSettingsElement} from \"./base-settings-element\";\nimport {TabField} from \"./tab-field\";\nimport { Tabs, Tab } from 'ui.tabs';\nimport type { TabsOptionsType } from 'ui.tabs';\n\nexport type TabsFieldType = {\n\tparent: ?BaseSettingsElement,\n\ttabsOptions: ?TabsOptionsType\n};\n\nexport class TabsField extends BaseSettingsElement\n{\n\t#fieldView: Tabs\n\n\tconstructor(params: TabsFieldType)\n\t{\n\t\tsuper(params);\n\t\tthis.setParentElement(params.parent);\n\n\t\tthis.#fieldView = new Tabs(params.tabsOptions);\n\t\tthis.#fieldView.getItems().forEach(\n\t\t\t(tab: Tab) => {\n\t\t\t\tnew TabField({\n\t\t\t\t\tparent: this,\n\t\t\t\t\tfieldView: tab\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tactivateTab(tabField: TabField)\n\t{\n\t\tthis.getFieldView().activateItem(tabField.getFieldView());\n\t}\n\n\tgetFieldView(): Tabs\n\t{\n\t\treturn this.#fieldView;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.#fieldView.getContainer();\n\t}\n}"],"names":["ErrorCollection","errors","comparator","addItems","items","item","add","errorCollection","getAll","text","top","BX","UI","Notification","Center","notify","content","position","category","autoHideDelay","OrderedArray","BaseSettingsVisitor","params","setEventNamespace","settingsElement","id","name","EventEmitter","BaseSettingsElement","Type","isNil","parent","setParentElement","children","setChildrenElements","addChild","child","merge","setErrorCollection","value","element","push","getParentElement","filter","unsetParentElement","visitor","visitSettingsElement","SettingsField","_classPrivateFieldInitSpec","fieldView","BaseField","Error","subscribe","bind","getFieldView","render","setErrors","getErrorCollection","renderErrors","event","type","data","getName","fieldErrors","clear","SettingsRow","row","Row","isPlainObject","getChildrenElements","getRowView","append","SettingsSection","section","Section","isNumber","sort","getSectionView","targetNode","Dom","BaseSettingsPage","_classPrivateMethodInitSpec","Map","analytic","key","isObject","hasValue","_classPrivateMethodGet","Tag","getType","LoaderPage","getWrapper","remove","getPage","titlePage","descriptionPage","headerWidget","headerWidgetRender","headerWidgetWrapper","querySelector","addClass","formNode","contentNode","addEventListener","emit","source","appendSections","response","setData","forEach","subPage","clean","showSystemError","Loc","getMessage","sections","getSections","sectionA","sectionB","getSectionSort","appendChild","subPageExtensions","isArray","message","node","HelpMessage","sectionSettings","settingsField","Promise","resolve","reject","Runtime","loadExtension","then","exports","GLOBAL_TARGET","set","Object","values","desirableClass","prototype","BaseEvent","eventResult","some","ajaxPromise","error","onSuccessDataFetched","onFailDataFetched","RecursiveFilteringVisitor","filterStrategy","startElement","length","childElement","getInstance","setFilter","restart","AscendingOpeningVisitor","console","log","constructor","show","toggle","instance","currentElement","lastElement","TabField","Tab","tabsOptions","Tabs","addItem","getBody","TabsField","getItems","tab","tabField","activateItem","getContainer"],"mappings":"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"}