{"version":3,"file":"layout-form.bundle.js","sources":["../src/layout-form.js"],"sourcesContent":["import {Event, Dom} from \"main.core\";\nimport 'ui.forms';\n\nexport class LayoutForm\n{\n\tconstructor()\n\t{\n\t\tthis.hiddenAttribute = 'data-form-row-hidden';\n\t\tthis.nodes = null;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.nodes = document.querySelectorAll('[' + this.hiddenAttribute + ']');\n\n\t\tfor (let i = 0; i < this.nodes.length; i++) {\n\t\t\tEvent.bind(this.nodes[i], \"click\", this.onClick.bind(this));\n\t\t\tthis.checkInitialBlockVisibility(this.nodes[i]);\n\t\t}\n\t}\n\n\tcheckInitialBlockVisibility(hiddenRow)\n\t{\n\t\tlet checkbox = hiddenRow.querySelector('.ui-ctl-element[type=\"checkbox\"]');\n\t\tif (checkbox.checked)\n\t\t{\n\t\t\tlet hiddenBlock = hiddenRow.nextElementSibling;\n\t\t\thiddenBlock.style.height = hiddenBlock.scrollHeight + 'px';\n\t\t\tDom.addClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t}\n\t}\n\n\tonClick(event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tlet checkbox = event.currentTarget.querySelector('.ui-ctl-element[type=\"checkbox\"]');\n\t\tlet hiddenBlock = event.currentTarget.nextElementSibling;\n\t\tlet height = hiddenBlock.scrollHeight;\n\n\t\tthis.toggleHiddenBLock(checkbox, hiddenBlock, height);\n\t}\n\n\ttoggleHiddenBLock(checkbox, hiddenBlock, height)\n\t{\n\t\tif (!checkbox.checked)\n\t\t{\n\t\t\tcheckbox.checked = true;\n\t\t\thiddenBlock.style.height = height + 'px';\n\t\t\tDom.addClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcheckbox.checked = false;\n\t\t\thiddenBlock.style.height = 0;\n\t\t\tDom.removeClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t}\n\t}\n}\n"],"names":["LayoutForm","hiddenAttribute","nodes","init","document","querySelectorAll","i","length","Event","bind","onClick","checkInitialBlockVisibility","hiddenRow","checkbox","querySelector","checked","hiddenBlock","nextElementSibling","style","height","scrollHeight","Dom","addClass","event","preventDefault","currentTarget","toggleHiddenBLock","removeClass"],"mappings":";;;;KAGaA,UAAb;CAEC,wBACA;CAAA;CACC,SAAKC,eAAL,GAAuB,sBAAvB;CACA,SAAKC,KAAL,GAAa,IAAb;CAEA,SAAKC,IAAL;CACA;;CARF;CAAA;CAAA,2BAWC;CACC,WAAKD,KAAL,GAAaE,QAAQ,CAACC,gBAAT,CAA0B,MAAM,KAAKJ,eAAX,GAA6B,GAAvD,CAAb;;CAEA,WAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,KAAL,CAAWK,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;CAC3CE,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKP,KAAL,CAAWI,CAAX,CAAX,EAA0B,OAA1B,EAAmC,KAAKI,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAnC;CACA,aAAKE,2BAAL,CAAiC,KAAKT,KAAL,CAAWI,CAAX,CAAjC;CACA;CACD;CAlBF;CAAA;CAAA,gDAoB6BM,SApB7B,EAqBC;CACC,UAAIC,QAAQ,GAAGD,SAAS,CAACE,aAAV,CAAwB,kCAAxB,CAAf;;CACA,UAAID,QAAQ,CAACE,OAAb,EACA;CACC,YAAIC,WAAW,GAAGJ,SAAS,CAACK,kBAA5B;CACAD,QAAAA,WAAW,CAACE,KAAZ,CAAkBC,MAAlB,GAA2BH,WAAW,CAACI,YAAZ,GAA2B,IAAtD;CACAC,QAAAA,aAAG,CAACC,QAAJ,CAAaN,WAAb,EAA0B,yBAA1B;CACA;CACD;CA7BF;CAAA;CAAA,4BA+BSO,KA/BT,EAgCC;CACCA,MAAAA,KAAK,CAACC,cAAN;CAEA,UAAIX,QAAQ,GAAGU,KAAK,CAACE,aAAN,CAAoBX,aAApB,CAAkC,kCAAlC,CAAf;CACA,UAAIE,WAAW,GAAGO,KAAK,CAACE,aAAN,CAAoBR,kBAAtC;CACA,UAAIE,MAAM,GAAGH,WAAW,CAACI,YAAzB;CAEA,WAAKM,iBAAL,CAAuBb,QAAvB,EAAiCG,WAAjC,EAA8CG,MAA9C;CACA;CAxCF;CAAA;CAAA,sCA0CmBN,QA1CnB,EA0C6BG,WA1C7B,EA0C0CG,MA1C1C,EA2CC;CACC,UAAI,CAACN,QAAQ,CAACE,OAAd,EACA;CACCF,QAAAA,QAAQ,CAACE,OAAT,GAAmB,IAAnB;CACAC,QAAAA,WAAW,CAACE,KAAZ,CAAkBC,MAAlB,GAA2BA,MAAM,GAAG,IAApC;CACAE,QAAAA,aAAG,CAACC,QAAJ,CAAaN,WAAb,EAA0B,yBAA1B;CACA,OALD,MAOA;CACCH,QAAAA,QAAQ,CAACE,OAAT,GAAmB,KAAnB;CACAC,QAAAA,WAAW,CAACE,KAAZ,CAAkBC,MAAlB,GAA2B,CAA3B;CACAE,QAAAA,aAAG,CAACM,WAAJ,CAAgBX,WAAhB,EAA6B,yBAA7B;CACA;CACD;CAxDF;CAAA;CAAA;;;;;;;;"}