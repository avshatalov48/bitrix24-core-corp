{"version":3,"file":"layout-form.bundle.js","sources":["../src/layout-form.js"],"sourcesContent":["import {Event, Dom} from \"main.core\";\nimport 'ui.forms';\n\nexport class LayoutForm\n{\n\tconstructor()\n\t{\n\t\tthis.hiddenAttribute = 'data-form-row-hidden';\n\t\tthis.nodes = null;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.nodes = document.querySelectorAll('[' + this.hiddenAttribute + ']');\n\n\t\tfor (let i = 0; i < this.nodes.length; i++) {\n\t\t\tEvent.bind(this.nodes[i], \"click\", this.onClick.bind(this));\n\t\t\tthis.nodes[i].querySelector('.ui-ctl-element[type=\"checkbox\"]').style.pointerEvents = 'none';\n\t\t\tthis.checkInitialBlockVisibility(this.nodes[i]);\n\t\t}\n\t}\n\n\tcheckInitialBlockVisibility(hiddenRow)\n\t{\n\t\tlet checkbox = hiddenRow.querySelector('.ui-ctl-element[type=\"checkbox\"]');\n\t\tif (checkbox.checked)\n\t\t{\n\t\t\tlet hiddenBlock = hiddenRow.nextElementSibling;\n\t\t\tif (hiddenBlock.scrollHeight > 0)\n\t\t\t{\n\t\t\t\thiddenBlock.style.height = hiddenBlock.scrollHeight + 'px';\n\t\t\t\tDom.addClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t\t}\n\t\t}\n\t}\n\n\tonClick(event)\n\t{\n\t\t// event.preventDefault();\n\n\t\tlet checkbox = event.currentTarget.querySelector('.ui-ctl-element[type=\"checkbox\"]');\n\t\tlet hiddenBlock = event.currentTarget.nextElementSibling;\n\t\tlet height = hiddenBlock.scrollHeight;\n\n\t\tthis.toggleHiddenBLock(checkbox, hiddenBlock, height);\n\t}\n\n\ttoggleHiddenBLock(checkbox, hiddenBlock, height)\n\t{\n\t\tif (!checkbox.checked)\n\t\t{\n\t\t\tcheckbox.checked = true;\n\t\t\thiddenBlock.style.height = height + 'px';\n\t\t\tDom.addClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcheckbox.checked = false;\n\t\t\thiddenBlock.style.height = 0;\n\t\t\tDom.removeClass(hiddenBlock, 'ui-form-row-hidden-show');\n\t\t}\n\t}\n}\n"],"names":["LayoutForm","hiddenAttribute","nodes","init","document","querySelectorAll","i","length","Event","bind","onClick","querySelector","style","pointerEvents","checkInitialBlockVisibility","hiddenRow","checkbox","checked","hiddenBlock","nextElementSibling","scrollHeight","height","Dom","addClass","event","currentTarget","toggleHiddenBLock","removeClass"],"mappings":";;;;KAGaA,UAAb;CAEC,wBACA;CAAA;CACC,SAAKC,eAAL,GAAuB,sBAAvB;CACA,SAAKC,KAAL,GAAa,IAAb;CAEA,SAAKC,IAAL;CACA;;CARF;CAAA;CAAA,2BAWC;CACC,WAAKD,KAAL,GAAaE,QAAQ,CAACC,gBAAT,CAA0B,MAAM,KAAKJ,eAAX,GAA6B,GAAvD,CAAb;;CAEA,WAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKJ,KAAL,CAAWK,MAA/B,EAAuCD,CAAC,EAAxC,EAA4C;CAC3CE,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKP,KAAL,CAAWI,CAAX,CAAX,EAA0B,OAA1B,EAAmC,KAAKI,OAAL,CAAaD,IAAb,CAAkB,IAAlB,CAAnC;CACA,aAAKP,KAAL,CAAWI,CAAX,EAAcK,aAAd,CAA4B,kCAA5B,EAAgEC,KAAhE,CAAsEC,aAAtE,GAAsF,MAAtF;CACA,aAAKC,2BAAL,CAAiC,KAAKZ,KAAL,CAAWI,CAAX,CAAjC;CACA;CACD;CAnBF;CAAA;CAAA,gDAqB6BS,SArB7B,EAsBC;CACC,UAAIC,QAAQ,GAAGD,SAAS,CAACJ,aAAV,CAAwB,kCAAxB,CAAf;;CACA,UAAIK,QAAQ,CAACC,OAAb,EACA;CACC,YAAIC,WAAW,GAAGH,SAAS,CAACI,kBAA5B;;CACA,YAAID,WAAW,CAACE,YAAZ,GAA2B,CAA/B,EACA;CACCF,UAAAA,WAAW,CAACN,KAAZ,CAAkBS,MAAlB,GAA2BH,WAAW,CAACE,YAAZ,GAA2B,IAAtD;CACAE,UAAAA,aAAG,CAACC,QAAJ,CAAaL,WAAb,EAA0B,yBAA1B;CACA;CACD;CACD;CAjCF;CAAA;CAAA,4BAmCSM,KAnCT,EAoCC;CACC;CAEA,UAAIR,QAAQ,GAAGQ,KAAK,CAACC,aAAN,CAAoBd,aAApB,CAAkC,kCAAlC,CAAf;CACA,UAAIO,WAAW,GAAGM,KAAK,CAACC,aAAN,CAAoBN,kBAAtC;CACA,UAAIE,MAAM,GAAGH,WAAW,CAACE,YAAzB;CAEA,WAAKM,iBAAL,CAAuBV,QAAvB,EAAiCE,WAAjC,EAA8CG,MAA9C;CACA;CA5CF;CAAA;CAAA,sCA8CmBL,QA9CnB,EA8C6BE,WA9C7B,EA8C0CG,MA9C1C,EA+CC;CACC,UAAI,CAACL,QAAQ,CAACC,OAAd,EACA;CACCD,QAAAA,QAAQ,CAACC,OAAT,GAAmB,IAAnB;CACAC,QAAAA,WAAW,CAACN,KAAZ,CAAkBS,MAAlB,GAA2BA,MAAM,GAAG,IAApC;CACAC,QAAAA,aAAG,CAACC,QAAJ,CAAaL,WAAb,EAA0B,yBAA1B;CACA,OALD,MAOA;CACCF,QAAAA,QAAQ,CAACC,OAAT,GAAmB,KAAnB;CACAC,QAAAA,WAAW,CAACN,KAAZ,CAAkBS,MAAlB,GAA2B,CAA3B;CACAC,QAAAA,aAAG,CAACK,WAAJ,CAAgBT,WAAhB,EAA6B,yBAA7B;CACA;CACD;CA5DF;CAAA;CAAA;;;;;;;;"}