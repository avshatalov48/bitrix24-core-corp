{"version":3,"file":"uploader.bundle.js","sources":["../src/uploader.js"],"sourcesContent":["import \"./uploader.css\";\nimport \"ui.progressbarjs\";\n\nexport class Uploader\n{\n\tconstructor(params = {})\n\t{\n\t\tthis.container = params.container;\n\n\t\tif (this.container && typeof params.blurElement === 'undefined')\n\t\t{\n\t\t\tparams.blurElement = this.container.firstElementChild;\n\t\t}\n\t\tthis.blurElement = params.blurElement;\n\n\t\tthis.direction = Uploader.direction[params.direction]? params.direction: Uploader.direction.vertical;\n\n\t\tparams.sizes = params.sizes && typeof params.sizes === 'object'? params.sizes: {};\n\n\t\tthis.sizes = {\n\t\t\tcircle: params.sizes.circle? params.sizes.circle: 54,\n\t\t\tprogress: params.sizes.progress? params.sizes.progress: 4,\n\t\t\tmargin: params.sizes.margin? params.sizes.margin: 0,\n\t\t};\n\n\t\tparams.labels = params.labels && typeof params.labels === 'object'? params.labels: {};\n\n\t\tthis.labels = {\n\t\t\tloading: params.labels.loading? params.labels.loading: '',\n\t\t\tcompleted: params.labels.completed? params.labels.completed: '',\n\t\t\tcanceled: params.labels.canceled? params.labels.canceled: '',\n\t\t\tcancelTitle: params.labels.cancelTitle? params.labels.cancelTitle: '',\n\t\t\tmegabyte: params.labels.megabyte? params.labels.megabyte: 'MB',\n\t\t};\n\n\t\tthis.cancelCallback = typeof params.cancelCallback === 'function'? params.cancelCallback: null;\n\t\tthis.destroyCallback = typeof params.destroyCallback === 'function'? params.destroyCallback: null;\n\n\t\tthis.icon = Uploader.icon[params.icon]? params.icon: (!this.cancelCallback? Uploader.icon.cloud: Uploader.icon.cancel);\n\n\t\tthis.inited = !!this.container;\n\t\tthis.destroing = false;\n\t}\n\n\tstart(params = {})\n\t{\n\t\tif (!this.inited)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tclearTimeout(this.timeoutSetIcon);\n\t\tclearTimeout(this.timeout);\n\n\t\tthis.active = true;\n\t\tthis.canceled = false;\n\t\tthis.cancelCallbackDisabled = false;\n\n\t\tthis.wrapper = document.createElement('div');\n\t\tthis.wrapper.classList.add('ui-file-progressbar-loader-wrapper');\n\t\tthis.wrapper.innerHTML = `\n\t\t\t<div class=\"ui-file-progressbar-loader\">\n\t\t\t\t<div class=\"ui-file-progressbar-icon\"></div>\n\t\t\t\t<div class=\"ui-file-progressbar-progress ui-file-progressbar-rotating\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"ui-file-progressbar-label\">${this.labels.loading}</div>\n\t\t`;\n\t\tthis.processLoader = this.wrapper.getElementsByClassName('ui-file-progressbar-loader')[0];\n\t\tthis.processLoaderIcon = this.wrapper.getElementsByClassName('ui-file-progressbar-icon')[0];\n\t\tthis.processStatus = this.wrapper.getElementsByClassName('ui-file-progressbar-progress')[0];\n\t\tthis.proccesLabel = this.wrapper.getElementsByClassName('ui-file-progressbar-label')[0];\n\n\t\tif (this.direction === Uploader.direction.horizontal)\n\t\t{\n\t\t\tthis.wrapper.classList.add('ui-file-progressbar-loader-horizontal');\n\t\t}\n\n\t\tthis.container.classList.add('ui-file-progressbar-container-relative');\n\n\t\tthis.container.insertBefore(this.wrapper, this.container.firstChild);\n\t\tif (this.blurElement)\n\t\t{\n\t\t\tthis.blurElement.classList.add(\"ui-file-progressbar-item-blurred\");\n\t\t}\n\n\t\tlet processLoaderStyle = `width: ${this.sizes.circle}px; height: ${this.sizes.circle}px;`;\n\n\t\tif (this.sizes.margin)\n\t\t{\n\t\t\tprocessLoaderStyle = processLoaderStyle+`margin: ${this.sizes.margin}px;`;\n\t\t\tthis.proccesLabel.style = `margin: ${this.sizes.margin}px;`;\n\t\t}\n\n\t\tthis.processLoader.style = processLoaderStyle;\n\n\t\tif (this.cancelCallback)\n\t\t{\n\t\t\tthis.processLoader.addEventListener('click', (event) =>\n\t\t\t{\n\t\t\t\tif (this.cancelCallbackDisabled)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.setProgress(0);\n\n\t\t\t\tif (this.labels.canceled)\n\t\t\t\t{\n\t\t\t\t\tthis.setProgressTitle(this.labels.canceled);\n\t\t\t\t}\n\n\t\t\t\tthis.canceled = event;\n\t\t\t\tthis.active = false;\n\n\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\tthis.timeout = setTimeout(() => this.destroy(), 1000);\n\n\t\t\t\treturn true;\n\t\t\t});\n\n\t\t\tif (this.labels.cancelTitle)\n\t\t\t{\n\t\t\t\tthis.processLoader.title = this.labels.cancelTitle;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.labels.loading)\n\t\t{\n\t\t\tthis.setProgressTitleVisibility(false);\n\t\t}\n\n\t\tthis.setIcon(this.icon, true);\n\n\t\tthis.bar = new BX.ProgressBarJs.Circle(this.processStatus, {\n\t\t\teasing: \"linear\",\n\t\t\tstrokeWidth: this.sizes.progress,\n\t\t\tcolor: '#ffffff',\n\t\t\tfrom: {color: '#ffffff'},\n\t\t\tto: {color: '#ffffff'},\n\t\t\tstep: (state, bar) =>\n\t\t\t{\n\t\t\t\tif (bar.value() == 1)\n\t\t\t\t{\n\t\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\t\tthis.timeout = setTimeout(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.labels.completed)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setProgressTitle(this.labels.completed);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setIcon(Uploader.icon.done);\n\n\t\t\t\t\t\tclearTimeout(this.timeout);\n\t\t\t\t\t\tthis.timeout = setTimeout(() => this.destroy(), 1000);\n\n\t\t\t\t\t}, 200);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tsetCancelDisable(value = true)\n\t{\n\t\tthis.cancelCallbackDisabled = !!value;\n\n\t\tif (this.labels.cancelTitle)\n\t\t{\n\t\t\tthis.processLoader.title = this.cancelCallbackDisabled? '': this.labels.cancelTitle;\n\t\t}\n\t}\n\n\tsetIcon(icon, force = false)\n\t{\n\t\tthis.processLoaderIcon.style.transform = \"scale(0)\";\n\n\t\tclearTimeout(this.timeoutSetIcon);\n\t\tthis.timeoutSetIcon = setTimeout(() => {\n\t\t\tthis.processLoaderIcon.classList.remove(\n\t\t\t\t\"ui-file-progressbar-cancel\",\n\t\t\t\t\"ui-file-progressbar-done\",\n\t\t\t\t\"ui-file-progressbar-cloud\",\n\t\t\t\t\"ui-file-progressbar-error\"\n\t\t\t);\n\n\t\t\tif (icon === Uploader.icon.done)\n\t\t\t{\n\t\t\t\tthis.processLoaderIcon.classList.add(\"ui-file-progressbar-done\");\n\t\t\t\tthis.processLoaderIcon.style.transform = \"scale(1)\";\n\t\t\t}\n\t\t\telse if (icon === Uploader.icon.cancel)\n\t\t\t{\n\t\t\t\tthis.processLoaderIcon.classList.add(\"ui-file-progressbar-cancel\");\n\t\t\t\tthis.processLoaderIcon.style.transform = \"scale(1)\";\n\t\t\t}\n\t\t\telse if (icon === Uploader.icon.error)\n\t\t\t{\n\t\t\t\tthis.processLoaderIcon.classList.add(\"ui-file-progressbar-error\");\n\t\t\t\tthis.processLoaderIcon.style.transform = \"scale(1)\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.processLoaderIcon.classList.add(\"ui-file-progressbar-cloud\");\n\t\t\t\tthis.processLoaderIcon.style.transform = \"scale(1)\";\n\t\t\t}\n\t\t}, force? 0: 200);\n\n\t\treturn true;\n\t}\n\n\tsetProgress(percent)\n\t{\n\t\tif (!this.active || this.canceled)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.bar.animate(percent / 100, {duration: 500});\n\t}\n\n\tsetProgressTitle(text)\n\t{\n\t\tif (!this.proccesLabel)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.proccesLabel.innerHTML = text;\n\t}\n\n\tsetProgressTitleVisibility(visible)\n\t{\n\t\tif(!this.proccesLabel)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (visible)\n\t\t{\n\t\t\tif (this.direction === Uploader.direction.horizontal)\n\t\t\t{\n\t\t\t\tthis.wrapper.classList.add('ui-file-progressbar-loader-horizontal');\n\t\t\t}\n\t\t\tthis.proccesLabel.style.display = 'block';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.direction === Uploader.direction.horizontal)\n\t\t\t{\n\t\t\t\tthis.wrapper.classList.remove('ui-file-progressbar-loader-horizontal');\n\t\t\t}\n\t\t\tthis.proccesLabel.style.display = 'none';\n\t\t}\n\t};\n\n\tsetByteSent(sent, total)\n\t{\n\t\tif (this.canceled)\n\t\t{\n\t\t\treturn false\n\t\t}\n\n\t\tthis.setProgressTitle((sent/1024/1024).toFixed(2)+\" \"+this.labels.megabyte+\" \"+\" / \"+(total/1024/1024).toFixed(2) + \" \"+this.labels.megabyte);\n\t}\n\n\tdestroy(animated = true)\n\t{\n\t\tclearTimeout(this.timeoutSetIcon);\n\t\tclearTimeout(this.timeout);\n\n\t\tif (this.destroing)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.active = false;\n\t\tthis.destroing = true;\n\n\t\tthis.processLoader.style.transform = \"scale(0)\";\n\n\t\tif (this.proccesLabel)\n\t\t{\n\t\t\tthis.proccesLabel.style.transform = \"scale(0)\";\n\t\t}\n\n\t\tif (this.bar)\n\t\t{\n\t\t\tthis.bar.destroy();\n\t\t}\n\n\t\tif (this.blurElement)\n\t\t{\n\t\t\tthis.blurElement.classList.remove(\"ui-file-progressbar-item-blurred\");\n\t\t}\n\n\t\tif (this.canceled && !this.cancelCallbackDisabled)\n\t\t{\n\t\t\tif (this.cancelCallback)\n\t\t\t{\n\t\t\t\tthis.cancelCallback(this.canceled);\n\t\t\t}\n\n\t\t\tthis.canceled = false;\n\t\t}\n\n\t\tif (animated)\n\t\t{\n\t\t\tthis.timeout = setTimeout(() => this.destroyFinally(), 400);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.destroyFinally();\n\t\t}\n\t}\n\n\tdestroyFinally()\n\t{\n\t\tif (this.container)\n\t\t{\n\t\t\tthis.container.classList.remove('ui-file-progressbar-container-relative');\n\t\t\tthis.container.removeChild(this.wrapper);\n\t\t}\n\n\t\tif (this.destroyCallback)\n\t\t{\n\t\t\tthis.destroyCallback();\n\t\t}\n\t}\n}\n\nUploader.direction = {\n\thorizontal: 'horizontal',\n\tvertical: 'vertical',\n};\n\nUploader.icon = {\n\tcloud: 'cloud',\n\tcancel: 'cancel',\n\terror: 'error',\n\tdone: 'done',\n};"],"names":["Uploader","params","container","blurElement","firstElementChild","direction","vertical","sizes","circle","progress","margin","labels","loading","completed","canceled","cancelTitle","megabyte","cancelCallback","destroyCallback","icon","cloud","cancel","inited","destroing","clearTimeout","timeoutSetIcon","timeout","active","cancelCallbackDisabled","wrapper","document","createElement","classList","add","innerHTML","processLoader","getElementsByClassName","processLoaderIcon","processStatus","proccesLabel","horizontal","insertBefore","firstChild","processLoaderStyle","style","addEventListener","event","setProgress","setProgressTitle","setTimeout","destroy","title","setProgressTitleVisibility","setIcon","bar","BX","ProgressBarJs","Circle","easing","strokeWidth","color","from","to","step","state","value","done","force","transform","remove","error","percent","animate","duration","text","visible","display","sent","total","toFixed","animated","destroyFinally","removeChild"],"mappings":"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"}