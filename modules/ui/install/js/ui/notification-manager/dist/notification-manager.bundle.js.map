{"version":3,"file":"notification-manager.bundle.js","sources":["../src/helpers/uuid.js","../src/notification/notification.js","../src/notification/push-notification.js","../src/pull-handler.js","../src/helpers/desktop.js","../src/helpers/browser.js","../src/notification/notification-event.js","../src/notification/notification-action.js","../src/notification/notification-close-reason.js","../src/providers/base.js","../src/providers/desktop.js","../src/providers/mac.js","../src/providers/windows.js","../src/providers/browser.js","../src/views/browser-notification/browser-notification-action.js","../src/views/browser-notification/browser-notification.js","../src/providers/browser-page.js","../src/notifier.js"],"sourcesContent":["export default class Uuid\n{\n\tstatic getV4(): string\n\t{\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\n\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n}","import { Type, Loc } from 'main.core';\nimport Uuid from '../helpers/uuid';\n\nimport type { NotificationOptions } from './notification-options';\n\n/**\n * @memberof BX.UI.NotificationManager\n */\nexport default class Notification\n{\n\tstatic SEPARATOR: string = 'u1F9D1';\n\n\tconstructor(options: NotificationOptions)\n\t{\n\t\tthis.setUid(options.id);\n\t\tthis.setCategory(options.category);\n\t\tthis.setTitle(options.title);\n\t\tthis.setText(options.text);\n\t\tthis.setIcon(options.icon);\n\t\tthis.setInputPlaceholderText(options.inputPlaceholderText);\n\t\tthis.createButtons(options.button1Text, options.button2Text);\n\t}\n\n\tstatic encodeIdToUid(id: string): string\n\t{\n\t\treturn id + Notification.SEPARATOR + Uuid.getV4();\n\t}\n\n\tstatic decodeUidToId(uid: string): string\n\t{\n\t\tlet id = uid.split(Notification.SEPARATOR);\n\t\tid.pop();\n\n\t\treturn id.join();\n\t}\n\n\tsetUid(id: string): void\n\t{\n\t\tif (!Type.isStringFilled(id))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: Cannot create a notification without an ID`);\n\t\t}\n\n\t\tthis.uid = Notification.encodeIdToUid(id);\n\t}\n\n\tgetUid(): string\n\t{\n\t\treturn this.uid;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn Notification.decodeUidToId(this.uid);\n\t}\n\n\tsetCategory(category: string): void\n\t{\n\t\tthis.category = Type.isStringFilled(category) ? category : '';\n\t}\n\n\tgetCategory(): ?string\n\t{\n\t\treturn this.category;\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tthis.title = Type.isStringFilled(title) ? title : '';\n\t}\n\n\tgetTitle(): ?string\n\t{\n\t\treturn this.title;\n\t}\n\n\tsetText(text: string): void\n\t{\n\t\tthis.text = Type.isStringFilled(text) ? text : '';\n\t}\n\n\tgetText(): ?string\n\t{\n\t\treturn this.text;\n\t}\n\n\tsetIcon(icon: string): void\n\t{\n\t\tthis.icon = Type.isStringFilled(icon) ? icon : '';\n\t}\n\n\tgetIcon(): ?string\n\t{\n\t\treturn this.icon;\n\t}\n\n\tsetInputPlaceholderText(inputPlaceholderText: string): void\n\t{\n\t\tif (Type.isString(inputPlaceholderText))\n\t\t{\n\t\t\tthis.inputPlaceholderText = inputPlaceholderText;\n\t\t}\n\t}\n\n\tgetInputPlaceholderText(): ?string\n\t{\n\t\treturn this.inputPlaceholderText;\n\t}\n\n\tcreateButtons(button1Text, button2Text)\n\t{\n\t\tif (this.getInputPlaceholderText())\n\t\t{\n\t\t\tthis.setButton1Text(Loc.getMessage('UI_NOTIFICATION_MANAGER_REPLY'));\n\t\t\tthis.setButton2Text(Loc.getMessage('UI_NOTIFICATION_MANAGER_CLOSE'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setButton1Text(button1Text);\n\t\t\tthis.setButton2Text(button2Text);\n\t\t}\n\t}\n\n\tsetButton1Text(button1Text: string): void\n\t{\n\t\tif (Type.isStringFilled(button1Text))\n\t\t{\n\t\t\tthis.button1Text = button1Text;\n\t\t}\n\t}\n\n\tgetButton1Text(): ?string\n\t{\n\t\treturn this.button1Text;\n\t}\n\n\tsetButton2Text(button2Text: string): void\n\t{\n\t\tif (Type.isStringFilled(button2Text))\n\t\t{\n\t\t\tthis.button2Text = button2Text;\n\t\t}\n\t}\n\n\tgetButton2Text(): ?string\n\t{\n\t\treturn this.button2Text;\n\t}\n}\n","import { Type } from 'main.core';\n\nimport Notification from './notification';\n\nexport default class PushNotification extends Notification\n{\n\tsetUid(id: string): void\n\t{\n\t\tif (!Type.isStringFilled(id))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: Cannot create a notification without an ID`);\n\t\t}\n\n\t\tthis.uid = id;\n\t}\n}","import { Notifier } from './notifier';\nimport PushNotification from './notification/push-notification';\n\nimport type { NotificationOptions } from './notification/notification-options';\n\nexport default class PullHandler\n{\n\tgetModuleId()\n\t{\n\t\treturn 'ui';\n\t}\n\n\thandleNotify(params, extra, command)\n\t{\n\t\tconst notification = params.notification;\n\t\tif (!notification)\n\t\t{\n\t\t\tthrow new Error('NotificationManager: Incorrect notification format');\n\t\t}\n\n\t\tconst notificationOptions: NotificationOptions = notification;\n\n\t\tconst pushNotification = new PushNotification(notificationOptions);\n\n\t\tNotifier.sendNotification(pushNotification);\n\t}\n}","export default class DesktopHelper\n{\n\tstatic isSupportedDesktopApp(): boolean\n\t{\n\t\treturn DesktopHelper.isBitrixDesktop() && DesktopHelper.geApiVersion() >= 67;\n\t}\n\n\tstatic isBitrixDesktop(): boolean\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('bitrixdesktop');\n\t}\n\n\tstatic geApiVersion(): number\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn Number(BXDesktopSystem.GetProperty('versionParts')[3]);\n\t}\n\n\tstatic isMainTab(): boolean\n\t{\n\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn typeof BX.desktop !== 'undefined' && BX.desktop.apiReady;\n\t}\n\n\tstatic isMac(): boolean\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t}\n\n\tstatic isLinux(): boolean\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t}\n\n\tstatic isWindows(): boolean\n\t{\n\t\treturn (\n\t\t\tnavigator.userAgent.toLowerCase().includes('windows')\n\t\t\t|| (\n\t\t\t\t!DesktopHelper.isMac()\n\t\t\t\t&& !DesktopHelper.isLinux()\n\t\t\t)\n\t\t);\n\t}\n\n\tstatic isRunningOnAnyDevice(): boolean\n\t{\n\t\treturn BXIM && BXIM.desktopStatus;\n\t}\n\n\tstatic checkRunningOnThisDevice(): Promise\n\t{\n\t\treturn new Promise(resolve => {\n\t\t\tconst turnedOnCallback: Function = () => {\n\t\t\t\tresolve(true);\n\t\t\t};\n\n\t\t\tconst turnedOffCallback: Function = () => {\n\t\t\t\tresolve(false);\n\t\t\t};\n\n\t\t\tBX.desktopUtils.runningCheck(turnedOnCallback, turnedOffCallback);\n\t\t});\n\t}\n}\n","export default class BrowserHelper\n{\n\tstatic isSupportedBrowser(): boolean\n\t{\n\t\treturn BrowserHelper.isChrome() || BrowserHelper.isFirefox() || BrowserHelper.isSafari();\n\t}\n\n\tstatic isNativeNotificationAllowed(): boolean\n\t{\n\t\treturn (\n\t\t\twindow.Notification\n\t\t\t&& window.Notification.permission\n\t\t\t&& window.Notification.permission.toLowerCase() === 'granted'\n\t\t);\n\t}\n\n\tstatic isSafari(): boolean\n\t{\n\t\tif (BrowserHelper.isChrome())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!navigator.userAgent.toLowerCase().includes('safari'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !BrowserHelper.isSafariBased();\n\t}\n\n\tstatic isSafariBased(): boolean\n\t{\n\t\tif (!navigator.userAgent.toLowerCase().includes('applewebkit'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\tnavigator.userAgent.toLowerCase().includes('yabrowser')\n\t\t\t|| navigator.userAgent.toLowerCase().includes('yaapp_ios_browser')\n\t\t\t|| navigator.userAgent.toLowerCase().includes('crios')\n\t\t);\n\t}\n\n\tstatic isChrome(): boolean\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('chrome');\n\t}\n\n\tstatic isFirefox(): boolean\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('firefox');\n\t}\n}\n","import { BaseEvent } from 'main.core.events';\n\nexport default class NotificationEvent extends BaseEvent\n{\n\tstatic CLICK: string = 'click';\n\tstatic ACTION: string = 'action';\n\tstatic CLOSE: string = 'close';\n\n\tstatic getTypes(): Array<string>\n\t{\n\t\treturn [\n\t\t\tNotificationEvent.CLICK,\n\t\t\tNotificationEvent.ACTION,\n\t\t\tNotificationEvent.CLOSE,\n\t\t];\n\t}\n\n\tstatic isSupported(eventType: string): boolean\n\t{\n\t\treturn NotificationEvent.getTypes().includes(eventType);\n\t}\n}\n","export default class NotificationAction\n{\n\tstatic BUTTON_1: string = 'button_1';\n\tstatic BUTTON_2: string = 'button_2';\n\tstatic USER_INPUT: string = 'user_input';\n\n\tstatic getTypes(): Array<string>\n\t{\n\t\treturn [\n\t\t\tNotificationAction.BUTTON_1,\n\t\t\tNotificationAction.BUTTON_2,\n\t\t\tNotificationAction.USER_INPUT,\n\t\t];\n\t}\n\n\tstatic isSupported(action: string): boolean\n\t{\n\t\treturn NotificationAction.getTypes().includes(action);\n\t}\n}\n","export default class NotificationCloseReason\n{\n\tstatic CLOSED_BY_USER: string = 'closed_by_user';\n\tstatic EXPIRED: string = 'expired';\n\n\tstatic getTypes(): Array<string>\n\t{\n\t\treturn [\n\t\t\tNotificationCloseReason.CLOSED_BY_USER,\n\t\t\tNotificationCloseReason.EXPIRED,\n\t\t];\n\t}\n\n\tstatic isSupported(closeReason: string): boolean\n\t{\n\t\treturn NotificationCloseReason.getTypes().includes(closeReason);\n\t}\n}\n","import { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport Notification from '../notification/notification';\nimport NotificationEvent from '../notification/notification-event';\nimport NotificationAction from '../notification/notification-action';\nimport NotificationCloseReason from '../notification/notification-close-reason';\n\nimport type { ProviderOptions } from './provider-options';\n\nexport default class BaseProvider extends EventEmitter\n{\n\tstatic NOTIFICATION_LIFETIME = 14400000; //The lifetime of the notification is 4 hours\n\n\tconstructor(options: ?ProviderOptions = {})\n\t{\n\t\tsuper();\n\n\t\tif (Type.isStringFilled(options.eventNamespace))\n\t\t{\n\t\t\tthis.setEventNamespace(options.eventNamespace);\n\t\t}\n\t}\n\n\tconvertNotificationToNative(notification: Notification): any\n\t{\n\t\tthrow new Error('convertNotificationToNative() method must be implemented.');\n\t}\n\n\tsendNotification(nativeNotification: any): void\n\t{\n\t\tthrow new Error('sendNotification() method must be implemented.');\n\t}\n\n\tcanSendNotification(notification: Notification): boolean\n\t{\n\t\treturn true;\n\t}\n\n\tnotify(notification: Notification): void\n\t{\n\t\tif (!this.canSendNotification(notification))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst nativeNotification = this.convertNotificationToNative(notification);\n\n\t\tthis.sendNotification(nativeNotification);\n\t}\n\n\tnotificationClick(uid: string = ''): void\n\t{\n\t\tconst eventOptions = {\n\t\t\tdata: {\n\t\t\t\tid: Notification.decodeUidToId(uid),\n\t\t\t},\n\t\t};\n\n\t\tthis.emit(NotificationEvent.CLICK, new NotificationEvent(eventOptions));\n\t}\n\n\tnotificationAction(uid: string = '', action: string = '', userInput: ?string = null): void\n\t{\n\t\tif (!NotificationAction.isSupported(action))\n\t\t{\n\t\t\tconsole.warn(`NotificationManager: Unknown notification action \"${action}\".`);\n\t\t}\n\n\t\tconst eventOptions = {\n\t\t\tdata: {\n\t\t\t\tid: Notification.decodeUidToId(uid),\n\t\t\t\taction,\n\t\t\t},\n\t\t};\n\n\t\tif (userInput)\n\t\t{\n\t\t\teventOptions.data.userInput = userInput;\n\t\t}\n\n\t\tthis.emit(NotificationEvent.ACTION, new NotificationEvent(eventOptions));\n\t}\n\n\tnotificationClose(uid: string = '', reason: string = ''): void\n\t{\n\t\tif (!NotificationCloseReason.isSupported(reason))\n\t\t{\n\t\t\tconsole.warn(`NotificationManager: Unknown notification close reason \"${reason}\".`);\n\t\t}\n\n\t\tconst eventOptions = {\n\t\t\tdata: {\n\t\t\t\tid: Notification.decodeUidToId(uid),\n\t\t\t\treason,\n\t\t\t},\n\t\t};\n\n\t\tthis.emit(NotificationEvent.CLOSE, new NotificationEvent(eventOptions));\n\t}\n}\n","import BaseProvider from './base';\nimport DesktopHelper from '../helpers/desktop';\nimport Notification from '../notification/notification';\nimport PushNotification from '../notification/push-notification';\n\nimport type { ProviderOptions } from './provider-options';\n\n\nexport default class DesktopProvider extends BaseProvider\n{\n\tconstructor(options: ?ProviderOptions = {})\n\t{\n\t\tsuper(options);\n\n\t\tif (this.getEventNamespace())\n\t\t{\n\t\t\tthis.registerEvents();\n\t\t}\n\t}\n\n\tconvertNotificationToNative(notification: Notification): string\n\t{\n\t\tthrow new Error('convertNotificationToNative() method must be implemented.');\n\t}\n\n\tcanSendNotification(notification: Notification): boolean\n\t{\n\t\t//Desktop push & pull notifications, unlike regular ones, can be sent from only one tab to avoid duplication.\n\t\treturn DesktopHelper.isMainTab() || !(notification instanceof PushNotification);\n\t}\n\n\tsendNotification(notificationUid: string): void\n\t{\n\t\tBXDesktopSystem.NotificationShow(notificationUid);\n\t}\n\n\tregisterEvents(): void\n\t{\n\t\twindow.addEventListener('BXNotificationClick', (event) => this.onNotificationClick(event));\n\t\twindow.addEventListener('BXNotificationAction', (event) => this.onNotificationAction(event));\n\t\twindow.addEventListener('BXNotificationDismissed', (event) => this.onNotificationClose(event));\n\t}\n\n\tonNotificationClick(event): void\n\t{\n\t\tconst [id] = event.detail;\n\n\t\tthis.notificationClick(id);\n\t}\n\n\tonNotificationAction(event): void\n\t{\n\t\tconst [id, action, userInput] = event.detail;\n\n\t\tthis.notificationAction(id, action, userInput);\n\t}\n\n\tonNotificationClose(event): void\n\t{\n\t\tconst [id, reason] = event.detail;\n\n\t\tthis.notificationClose(id, reason);\n\t}\n}\n","import { Type, Loc } from 'main.core';\nimport BaseProvider from './base';\nimport DesktopProvider from './desktop';\nimport Notification from '../notification/notification';\nimport NotificationAction from '../notification/notification-action';\n\nexport default class MacProvider extends DesktopProvider\n{\n\tconvertNotificationToNative(notification: Notification): string\n\t{\n\t\tif (!Type.isStringFilled(notification.getId()))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: You cannot send a notification without an ID.`);\n\t\t}\n\n\t\tconst notificationUid = notification.getUid();\n\n\t\tBXDesktopSystem.NotificationCreate(notificationUid);\n\n\t\tif (Type.isStringFilled(notification.getTitle()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddText(notificationUid, notification.getTitle());\n\t\t}\n\n\t\tif (Type.isStringFilled(notification.getText()))\n\t\t{\n\t\t\tthis.addTextToNotification(notificationUid, notification.getText());\n\t\t}\n\n\t\tif (Type.isStringFilled(notification.getIcon()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddImage(notificationUid, notification.getIcon());\n\t\t}\n\n\t\tif (\n\t\t\tnotification.getInputPlaceholderText()\n\t\t\t&& Type.isString(notification.getInputPlaceholderText())\n\t\t)\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddInput(\n\t\t\t\tnotificationUid,\n\t\t\t\tnotification.getInputPlaceholderText(),\n\t\t\t\tNotificationAction.USER_INPUT\n\t\t\t);\n\t\t}\n\n\t\tif (notification.getButton1Text() && Type.isStringFilled(notification.getButton1Text()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddAction(\n\t\t\t\tnotificationUid,\n\t\t\t\tnotification.getButton1Text(),\n\t\t\t\tNotificationAction.BUTTON_1\n\t\t\t);\n\t\t}\n\n\t\tif (notification.getButton2Text() && Type.isStringFilled(notification.getButton2Text()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddAction(\n\t\t\t\tnotificationUid,\n\t\t\t\tLoc.getMessage('UI_NOTIFICATION_MANAGER_CLOSE'),\n\t\t\t\tNotificationAction.BUTTON_2\n\t\t\t);\n\t\t}\n\n\t\tBXDesktopSystem.NotificationSetExpiration(notificationUid, BaseProvider.NOTIFICATION_LIFETIME);\n\n\t\treturn notificationUid;\n\t}\n\n\taddTextToNotification(notificationUid: string, text: string): void\n\t{\n\t\tif (text.trim() === '')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst languageSafeRowLength = 44;\n\n\t\tif (text.length <= languageSafeRowLength)\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddText(notificationUid, text);\n\t\t\treturn;\n\t\t}\n\n\t\tconst space = ' ';\n\n\t\tlet firstRow = '';\n\t\tlet words: Array<string> = text.split(space);\n\n\t\twhile (words.length > 0)\n\t\t{\n\t\t\tif (firstRow.length + words[0].length + 1 > languageSafeRowLength)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tfirstRow += words.shift() + space;\n\t\t}\n\n\t\tBXDesktopSystem.NotificationAddText(notificationUid, firstRow);\n\n\t\tlet secondRow = words.join(space);\n\t\tif (secondRow !== '')\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddText(notificationUid, secondRow);\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport BaseProvider from './base';\nimport DesktopProvider from './desktop';\nimport Notification from '../notification/notification';\nimport NotificationAction from '../notification/notification-action';\n\nexport default class WindowsProvider extends DesktopProvider\n{\n\tconvertNotificationToNative(notification: Notification): string\n\t{\n\t\tif (!Type.isStringFilled(notification.getId()))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: You cannot send a notification without an ID.`);\n\t\t}\n\n\t\tconst notificationUid = notification.getUid();\n\n\t\tBXDesktopSystem.NotificationCreate(notificationUid);\n\n\t\tif (Type.isStringFilled(notification.getTitle()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddText(notificationUid, notification.getTitle());\n\t\t}\n\n\t\tif (Type.isStringFilled(notification.getText()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddText(notificationUid, notification.getText());\n\t\t}\n\n\t\tif (Type.isStringFilled(notification.getIcon()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddImage(notificationUid, notification.getIcon());\n\t\t}\n\n\t\tif (\n\t\t\tnotification.getInputPlaceholderText()\n\t\t\t&& Type.isString(notification.getInputPlaceholderText())\n\t\t)\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddInput(\n\t\t\t\tnotificationUid,\n\t\t\t\tnotification.getInputPlaceholderText(),\n\t\t\t\tNotificationAction.USER_INPUT\n\t\t\t);\n\t\t}\n\n\t\tif (notification.getButton1Text() && Type.isStringFilled(notification.getButton1Text()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddAction(\n\t\t\t\tnotificationUid,\n\t\t\t\tnotification.getButton1Text(),\n\t\t\t\tNotificationAction.BUTTON_1\n\t\t\t);\n\t\t}\n\n\t\tif (notification.getButton2Text() && Type.isStringFilled(notification.getButton2Text()))\n\t\t{\n\t\t\tBXDesktopSystem.NotificationAddAction(\n\t\t\t\tnotificationUid,\n\t\t\t\tnotification.getButton2Text(),\n\t\t\t\tNotificationAction.BUTTON_2\n\t\t\t);\n\t\t}\n\n\t\tBXDesktopSystem.NotificationSetExpiration(notificationUid, BaseProvider.NOTIFICATION_LIFETIME);\n\n\t\treturn notificationUid;\n\t}\n}\n","import { Type } from 'main.core';\nimport BaseProvider from './base';\nimport Notification from '../notification/notification';\nimport DesktopHelper from '../helpers/desktop';\n\ntype BrowserNotificationOptions = {\n\ttitle: string,\n\toptions?: {\n\t\tbody?: string,\n\t\ttag?: string,\n\t\ticon?: string,\n\t},\n\tonclick: Function,\n};\n\nexport default class BrowserProvider extends BaseProvider\n{\n\tconvertNotificationToNative(notification: Notification): BrowserNotificationOptions\n\t{\n\t\tconst notificationOptions: BrowserNotificationOptions = {\n\t\t\ttitle: notification.getTitle() ? notification.getTitle() : '',\n\t\t\toptions: {\n\t\t\t\tbody: '',\n\t\t\t\ttag: notification.getUid(),\n\t\t\t\trenotify: true,\n\t\t\t},\n\t\t\tonclick: (event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\twindow.focus();\n\n\t\t\t\tthis.notificationClick(notification.getUid());\n\t\t\t},\n\t\t};\n\n\t\tif (Type.isStringFilled(notification.getIcon()))\n\t\t{\n\t\t\tnotificationOptions.options.icon = notification.getIcon();\n\t\t}\n\n\t\tif (Type.isStringFilled(notification.getText()))\n\t\t{\n\t\t\tnotificationOptions.options.body = notification.getText();\n\t\t}\n\n\t\treturn notificationOptions;\n\t}\n\n\tsendNotification(notificationOptions: BrowserNotificationOptions): void\n\t{\n\t\tif (!DesktopHelper.isRunningOnAnyDevice())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDesktopHelper.checkRunningOnThisDevice()\n\t\t\t.then(isRunningOnThisDevice => {\n\t\t\t\tif (isRunningOnThisDevice)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst notification = new window.Notification(notificationOptions.title, notificationOptions.options);\n\n\t\t\t\tnotification.onclick = notificationOptions.onclick;\n\t\t\t});\n\t}\n}\n","import { Type } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { Button, ButtonOptions } from 'ui.buttons';\n\nexport default class BrowserNotificationAction extends UI.Notification.Action\n{\n\tstatic BASE_BUTTON_CLASS = 'ui-notification-manager-browser-button';\n\tstatic TYPE_ACCEPT: string = 'accept';\n\n\tconstructor(balloon, options)\n\t{\n\t\tsuper(balloon, options);\n\n\t\tthis.setButtonClass(options.buttonType);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.container !== null)\n\t\t{\n\t\t\treturn this.container;\n\t\t}\n\n\t\tlet buttonOptions: ButtonOptions = {\n\t\t\ttext: this.getTitle(),\n\t\t}\n\n\t\tif (Type.isFunction(this.events.click))\n\t\t{\n\t\t\tbuttonOptions.onclick = (button: Button, event: Event) => {\n\t\t\t\tevent.stopPropagation();\n\n\t\t\t\tthis.events.click(button, event);\n\t\t\t}\n\t\t}\n\n\t\tconst button = new Button(buttonOptions);\n\n\t\tbutton.removeClass('ui-btn');\n\t\tbutton.addClass(BrowserNotificationAction.BASE_BUTTON_CLASS);\n\t\tbutton.addClass(this.getButtonClass());\n\n\t\tthis.container = button.getContainer();\n\n\t\treturn this.container;\n\t}\n\n\tstatic getButtonTypes()\n\t{\n\t\treturn [\n\t\t\tBrowserNotificationAction.TYPE_ACCEPT,\n\t\t];\n\t}\n\n\tstatic isSupportedButtonType(buttonType: string)\n\t{\n\t\treturn BrowserNotificationAction.getButtonTypes().includes(buttonType);\n\t}\n\n\tsetButtonClass(buttonType: ?string)\n\t{\n\t\tthis.buttonClass =\n\t\t\tBrowserNotificationAction.isSupportedButtonType(buttonType)\n\t\t\t\t? BrowserNotificationAction.BASE_BUTTON_CLASS + '-' + buttonType\n\t\t\t\t: ''\n\t\t;\n\t}\n\n\tgetButtonClass()\n\t{\n\t\treturn this.buttonClass;\n\t}\n}\n","import { Type, Tag, Loc } from 'main.core'\nimport { UI } from 'ui.notification';\nimport BrowserNotificationAction from './browser-notification-action';\n\nimport 'ui.design-tokens';\nimport './browser-notification.css';\n\nexport default class BrowserNotification extends UI.Notification.Balloon\n{\n\tstatic KEY_CODE = {\n\t\tENTER: 13,\n\t\tESC: 27,\n\t};\n\n\tconstructor(options: UI.Notification.BalloonOptions)\n\t{\n\t\tsuper(options);\n\n\t\tthis.userInputContainerNode = null;\n\t\tthis.userInputNode = null;\n\t}\n\n\tsetActions(actions)\n\t{\n\t\tthis.actions = [];\n\n\t\tif (Type.isArray(actions))\n\t\t{\n\t\t\tactions.forEach(action => this.actions.push(new BrowserNotificationAction(this, action)));\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.container !== null)\n\t\t{\n\t\t\treturn this.container;\n\t\t}\n\n\t\tconst onMouseEnter = () => this.handleMouseEnter();\n\t\tconst onMouseLeave = () => this.handleMouseLeave();\n\n\t\tthis.container = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"ui-notification-manager-browser-balloon\"\n\t\t\t\tonmouseenter=\"${onMouseEnter}\"\n\t\t\t\tonmouseleave=\"${onMouseLeave}\"\n\t\t\t>\n\t\t\t\t${this.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.container;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.animationClassName = \"ui-notification-manager-browser-balloon-animate\";\n\n\t\tconst contentWidth = Type.isNumber(this.getWidth()) ? this.getWidth() + 'px' : this.getWidth();\n\n\t\treturn Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"ui-notification-manager-browser-content\"\n\t\t\t\tstyle=\"width: ${contentWidth}\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-notification-manager-browser-message\"\n\t\t\t\t\tonclick=\"${this.handleContentClick.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getIconNode()}\n\t\t\t\t\t<div class=\"ui-notification-manager-browser-column\">\n\t\t\t\t\t\t${this.getTitleNode()}\n\t\t\t\t\t\t${this.getTextNode()}\n\t\t\t\t\t\t${this.getUserInputContainerNode()}\n\t\t\t\t\t\t${this.getActionsNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getCloseButtonNode()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleNode(): HTMLElement | string\n\t{\n\t\tif (!Type.isStringFilled(this.getData().title))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`<div class=\"ui-notification-manager-browser-title\">${this.getData().title}<div>`;\n\t}\n\n\tgetTextNode(): HTMLElement | string\n\t{\n\t\tif (!Type.isStringFilled(this.getData().text))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`<div class=\"ui-notification-manager-browser-text\">${this.getData().text}<div>`;\n\t}\n\n\tgetIconNode(): HTMLElement | string\n\t{\n\t\tif (!Type.isStringFilled(this.getData().icon))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-notification-manager-browser-column\">\n\t\t\t\t<img\n\t\t\t\t\tclass=\"ui-notification-manager-browser-icon\"\n\t\t\t\t\tstyle=\"height: 44px; width: 44px\"\n\t\t\t\t\tsrc=\"${this.getData().icon}\"\n\t\t\t\t>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetActionsNode(): HTMLElement | string\n\t{\n\t\tconst actions = this.getActions().map(action => action.getContainer());\n\t\tif (!Type.isArrayFilled(actions))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-notification-manager-browser-actions\">\n\t\t\t\t${actions}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUserInputContainerNode(): HTMLElement | string\n\t{\n\t\tif (!Type.isString(this.getData().inputPlaceholderText))\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst onInputReplyClick = (event: Event) => event.stopPropagation();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-notification-manager-browser-actions\">\n\t\t\t\t<div class=\"ui-notification-manager-browser-column ui-notification-manager-browser-column-wide\">\n\t\t\t\t\t<div class=\"ui-notification-manager-browser-row\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"ui-notification-manager-browser-button\"\n\t\t\t\t\t\t\tid=\"ui-notification-manager-browser-reply-toggle-${this.getId()}\"\n\t\t\t\t\t\t\tonclick=\"${this.toggleUserInputContainerNode.bind(this)}\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-btn-text\">${Loc.getMessage('UI_NOTIFICATION_MANAGER_REPLY')}</span>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-notification-manager-browser-row ui-notification-manager-browser-row-reply\"\n\t\t\t\t\t\tid=\"ui-notification-manager-browser-reply-container-${this.getId()}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div class=\"ui-notification-manager-browser-reply-wrapper\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\tclass=\"ui-notification-manager-browser-input-reply\"\n\t\t\t\t\t\t\t\tplaceholder=\"${this.getData().inputPlaceholderText}\"\n\t\t\t\t\t\t\t\tid=\"ui-notification-manager-browser-reply-${this.getId()}\"\n\t\t\t\t\t\t\t\tonkeyup=\"${this.handleUserInputEnter.bind(this)}\"\n\t\t\t\t\t\t\t\tonclick=\"${onInputReplyClick}\"\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclass=\"ui-notification-manager-browser-button-reply\"\n\t\t\t\t\t\t\tonclick=\"${this.handleUserInputClick.bind(this)}\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\ttoggleUserInputContainerNode(event: Event): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tif (!this.userInputContainerNode)\n\t\t{\n\t\t\tthis.userInputContainerNode =\n\t\t\t\tdocument.getElementById('ui-notification-manager-browser-reply-container-' + this.getId())\n\t\t\t;\n\t\t}\n\n\t\tif (!this.userInputNode)\n\t\t{\n\t\t\tthis.userInputNode =\n\t\t\t\tdocument.getElementById('ui-notification-manager-browser-reply-' + this.getId())\n\t\t\t;\n\t\t}\n\n\t\tif (!this.replyToggleButton)\n\t\t{\n\t\t\tthis.replyToggleButton =\n\t\t\t\tdocument.getElementById('ui-notification-manager-browser-reply-toggle-' + this.getId())\n\t\t\t;\n\t\t}\n\n\t\tthis.showUserInput = !this.showUserInput;\n\t\tif (this.showUserInput)\n\t\t{\n\t\t\tthis.setAutoHide(false);\n\t\t\tthis.deactivateAutoHide();\n\n\t\t\tthis.replyToggleButton.style.display = 'none';\n\t\t\tthis.userInputContainerNode.classList.add('ui-notification-manager-browser-row-reply-animate');\n\t\t\tthis.userInputNode.disabled = false;\n\t\t\tthis.userInputNode.focus();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setAutoHide(true);\n\t\t\tthis.activateAutoHide();\n\n\t\t\tthis.replyToggleButton.style.display = 'block';\n\t\t\tthis.userInputContainerNode.classList.remove('ui-notification-manager-browser-row-reply-animate');\n\t\t\tthis.userInputNode.disabled = true;\n\t\t}\n\t}\n\n\tgetCloseButtonNode(): HTMLElement | string\n\t{\n\t\tif (!this.isCloseButtonVisible())\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"ui-notification-manager-browser-button-close\"\n\t\t\t\tonclick=\"${this.handleCloseBtnClick.bind(this)}\"\n\t\t\t/>\n\t\t`;\n\t}\n\n\thandleCloseBtnClick(event: Event): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tif (Type.isFunction(this.getData().closedByUserHandler))\n\t\t{\n\t\t\tthis.getData().closedByUserHandler();\n\t\t}\n\n\t\tsuper.handleCloseBtnClick();\n\t}\n\n\thandleContentClick(): void\n\t{\n\t\tif (Type.isFunction(this.getData().clickHandler))\n\t\t{\n\t\t\tthis.getData().clickHandler();\n\t\t}\n\n\t\tthis.close();\n\t}\n\n\thandleUserInputEnter(event: Event): void\n\t{\n\t\tif (!Type.isFunction(this.getData().userInputHandler))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst userInput = event.target.value;\n\n\t\tif (event.keyCode === BrowserNotification.KEY_CODE.ENTER && userInput !== '')\n\t\t{\n\t\t\tthis.getData().userInputHandler(userInput);\n\t\t\tthis.close();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.keyCode === BrowserNotification.KEY_CODE.ESC && userInput === '')\n\t\t{\n\t\t\tif (Type.isFunction(this.getData().closedByUserHandler))\n\t\t\t{\n\t\t\t\tthis.getData().closedByUserHandler();\n\t\t\t}\n\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\thandleUserInputClick(event: Event): void\n\t{\n\t\tevent.stopPropagation();\n\n\t\tif (!Type.isFunction(this.getData().userInputHandler))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst userInput = this.userInputNode.value;\n\n\t\tif (userInput !== '')\n\t\t{\n\t\t\tthis.getData().userInputHandler(userInput);\n\t\t\tthis.close();\n\t\t}\n\t}\n}\n","import { Type } from 'main.core';\nimport { UI } from 'ui.notification';\nimport BaseProvider from './base';\nimport Notification from '../notification/notification';\nimport NotificationAction from '../notification/notification-action';\nimport NotificationCloseReason from '../notification/notification-close-reason';\nimport BrowserNotification from '../views/browser-notification/browser-notification';\nimport BrowserNotificationAction from '../views/browser-notification/browser-notification-action';\n\nexport default class BrowserPageProvider extends BaseProvider\n{\n\tconvertNotificationToNative(notification: Notification): UI.Notification.BalloonOptions\n\t{\n\t\tif (!Type.isStringFilled(notification.getId()))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: You cannot send a notification without an ID.`);\n\t\t}\n\n\t\tconst closedByUserHandler: Function = () => {\n\t\t\tthis.notificationClose(notification.getUid(), NotificationCloseReason.CLOSED_BY_USER);\n\t\t};\n\n\t\tconst clickHandler: Function = () => {\n\t\t\tthis.notificationClick(notification.getUid());\n\t\t};\n\n\t\tconst userInputHandler: Function = (userInput) => {\n\t\t\tthis.notificationAction(notification.getUid(), NotificationAction.BUTTON_1, userInput);\n\t\t};\n\n\t\tconst balloonOptions: UI.Notification.BalloonOptions = {\n\t\t\tid: notification.getUid(),\n\t\t\tcategory: notification.getCategory(),\n\t\t\ttype: BrowserNotification,\n\t\t\tdata: {\n\t\t\t\ttitle: notification.getTitle(),\n\t\t\t\ttext: notification.getText(),\n\t\t\t\ticon: notification.getIcon(),\n\t\t\t\tclosedByUserHandler,\n\t\t\t\tclickHandler,\n\t\t\t\tuserInputHandler,\n\t\t\t},\n\t\t\tactions: [],\n\t\t\twidth: 380,\n\t\t\tposition: 'top-right',\n\t\t\tautoHideDelay: 4000,\n\t\t};\n\n\t\tif (notification.getInputPlaceholderText())\n\t\t{\n\t\t\tballoonOptions.data.inputPlaceholderText = notification.getInputPlaceholderText();\n\n\t\t\treturn balloonOptions;\n\t\t}\n\n\t\tconst showButton1 = notification.getButton1Text() && Type.isStringFilled(notification.getButton1Text());\n\t\tconst showButton2 = notification.getButton2Text() && Type.isStringFilled(notification.getButton2Text());\n\n\t\tif (showButton1)\n\t\t{\n\t\t\tconst action1Options = {\n\t\t\t\tid: NotificationAction.BUTTON_1,\n\t\t\t\ttitle: notification.getButton1Text(),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event, balloon, action) => this.onNotificationAction(event, balloon, action),\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (showButton2)\n\t\t\t{\n\t\t\t\taction1Options.buttonType = BrowserNotificationAction.TYPE_ACCEPT;\n\t\t\t}\n\n\t\t\tballoonOptions.actions.push(action1Options);\n\t\t}\n\n\t\tif (showButton2)\n\t\t{\n\t\t\tconst action2Options = {\n\t\t\t\tid: NotificationAction.BUTTON_2,\n\t\t\t\ttitle: notification.getButton2Text(),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event, balloon, action) => this.onNotificationAction(event, balloon, action),\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tballoonOptions.actions.push(action2Options);\n\t\t}\n\n\t\treturn balloonOptions;\n\t}\n\n\tsendNotification(notification: UI.Notification.BalloonOptions): void\n\t{\n\t\tUI.Notification.Center.notify(notification);\n\t}\n\n\tonNotificationAction(event, balloon, action): void\n\t{\n\t\tballoon.close();\n\t\tthis.notificationAction(balloon.id, action.id);\n\t}\n}\n","import { PULL as Pull } from 'pull.client';\n\nimport PullHandler from './pull-handler';\nimport DesktopHelper from './helpers/desktop';\nimport BrowserHelper from './helpers/browser';\nimport Notification from './notification/notification';\nimport NotificationEvent from './notification/notification-event';\n\nimport BaseProvider from './providers/base';\nimport MacProvider from './providers/mac';\nimport WindowsProvider from './providers/windows';\nimport BrowserProvider from './providers/browser';\nimport BrowserPageProvider from './providers/browser-page';\n\nimport type { NotificationOptions } from './notification/notification-options';\nimport type { ProviderOptions } from './providers/provider-options';\n\n/**\n * @memberof BX.UI.NotificationManager\n */\nclass Notifier\n{\n\tstatic EVENT_NAMESPACE: string = 'BX.UI.NotificationManager';\n\n\tconstructor()\n\t{\n\t\tthis.provider = this.createProvider();\n\n\t\tPull.subscribe(new PullHandler());\n\t}\n\n\tcreateProvider(): BaseProvider\n\t{\n\t\tconst providerOptions: ProviderOptions = {\n\t\t\teventNamespace: Notifier.EVENT_NAMESPACE,\n\t\t};\n\n\t\tif (DesktopHelper.isSupportedDesktopApp() && DesktopHelper.isMac())\n\t\t{\n\t\t\treturn new MacProvider(providerOptions);\n\t\t}\n\n\t\tif (DesktopHelper.isSupportedDesktopApp() && DesktopHelper.isWindows())\n\t\t{\n\t\t\treturn new WindowsProvider(providerOptions);\n\t\t}\n\n\t\tif (BrowserHelper.isSupportedBrowser() && BrowserHelper.isNativeNotificationAllowed())\n\t\t{\n\t\t\treturn new BrowserProvider(providerOptions);\n\t\t}\n\n\t\treturn new BrowserPageProvider(providerOptions);\n\t}\n\n\tnotify(notificationOptions: NotificationOptions): void\n\t{\n\t\tconst notification = new Notification(notificationOptions);\n\n\t\tthis.sendNotification(notification);\n\t}\n\n\tsendNotification(notification: Notification): void\n\t{\n\t\tthis.provider.notify(notification);\n\t}\n\n\tsubscribe(eventName: string, handler: function): void\n\t{\n\t\tif (!NotificationEvent.isSupported(eventName))\n\t\t{\n\t\t\tthrow new Error(`NotificationManager: event \"${eventName}\" is not supported.`);\n\t\t}\n\n\t\tthis.provider.subscribe(eventName, handler);\n\t}\n\n\tnotifyViaDesktopProvider(notification: NotificationOptions)\n\t{\n\t\tif (DesktopHelper.isSupportedDesktopApp() && DesktopHelper.isMac())\n\t\t{\n\t\t\tnew MacProvider().notify(notification);\n\t\t\treturn;\n\t\t}\n\n\t\tif (DesktopHelper.isSupportedDesktopApp() && DesktopHelper.isMac())\n\t\t{\n\t\t\tnew WindowsProvider().notify(notification);\n\t\t\treturn;\n\t\t}\n\n\t\tthrow new Error(`NotificationManager: unsupported environment for sending through a desktop provider.`);\n\t}\n}\n\nconst notifier = new Notifier();\n\nexport {notifier as Notifier};\n"],"names":["Uuid","getV4","replace","c","r","Math","random","v","toString","Notification","constructor","options","setUid","id","setCategory","category","setTitle","title","setText","text","setIcon","icon","setInputPlaceholderText","inputPlaceholderText","createButtons","button1Text","button2Text","encodeIdToUid","SEPARATOR","decodeUidToId","uid","split","pop","join","Type","isStringFilled","Error","getUid","getId","getCategory","getTitle","getText","getIcon","isString","getInputPlaceholderText","setButton1Text","Loc","getMessage","setButton2Text","getButton1Text","getButton2Text","PushNotification","PullHandler","getModuleId","handleNotify","params","extra","command","notification","notificationOptions","pushNotification","Notifier","sendNotification","DesktopHelper","isSupportedDesktopApp","isBitrixDesktop","geApiVersion","navigator","userAgent","toLowerCase","includes","BXDesktopSystem","Number","GetProperty","isMainTab","BX","desktop","apiReady","isMac","isLinux","isWindows","isRunningOnAnyDevice","BXIM","desktopStatus","checkRunningOnThisDevice","Promise","resolve","turnedOnCallback","turnedOffCallback","desktopUtils","runningCheck","BrowserHelper","isSupportedBrowser","isChrome","isFirefox","isSafari","isNativeNotificationAllowed","window","permission","isSafariBased","NotificationEvent","BaseEvent","getTypes","CLICK","ACTION","CLOSE","isSupported","eventType","NotificationAction","BUTTON_1","BUTTON_2","USER_INPUT","action","NotificationCloseReason","CLOSED_BY_USER","EXPIRED","closeReason","BaseProvider","EventEmitter","eventNamespace","setEventNamespace","convertNotificationToNative","nativeNotification","canSendNotification","notify","notificationClick","eventOptions","data","emit","notificationAction","userInput","console","warn","notificationClose","reason","NOTIFICATION_LIFETIME","DesktopProvider","getEventNamespace","registerEvents","notificationUid","NotificationShow","addEventListener","event","onNotificationClick","onNotificationAction","onNotificationClose","detail","MacProvider","NotificationCreate","NotificationAddText","addTextToNotification","NotificationAddImage","NotificationAddInput","NotificationAddAction","NotificationSetExpiration","trim","languageSafeRowLength","length","space","firstRow","words","shift","secondRow","WindowsProvider","BrowserProvider","body","tag","renotify","onclick","preventDefault","focus","then","isRunningOnThisDevice","BrowserNotificationAction","UI","Action","balloon","setButtonClass","buttonType","getContainer","container","buttonOptions","isFunction","events","click","button","stopPropagation","Button","removeClass","addClass","BASE_BUTTON_CLASS","getButtonClass","getButtonTypes","TYPE_ACCEPT","isSupportedButtonType","buttonClass","BrowserNotification","Balloon","userInputContainerNode","userInputNode","setActions","actions","isArray","forEach","push","onMouseEnter","handleMouseEnter","onMouseLeave","handleMouseLeave","Tag","render","animationClassName","contentWidth","isNumber","getWidth","handleContentClick","bind","getIconNode","getTitleNode","getTextNode","getUserInputContainerNode","getActionsNode","getCloseButtonNode","getData","getActions","map","isArrayFilled","onInputReplyClick","toggleUserInputContainerNode","handleUserInputEnter","handleUserInputClick","document","getElementById","replyToggleButton","showUserInput","setAutoHide","deactivateAutoHide","style","display","classList","add","disabled","activateAutoHide","remove","isCloseButtonVisible","handleCloseBtnClick","closedByUserHandler","clickHandler","close","userInputHandler","target","value","keyCode","KEY_CODE","ENTER","ESC","BrowserPageProvider","balloonOptions","type","width","position","autoHideDelay","showButton1","showButton2","action1Options","action2Options","Center","provider","createProvider","Pull","subscribe","providerOptions","EVENT_NAMESPACE","eventName","handler","notifyViaDesktopProvider","notifier"],"mappings":"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"}