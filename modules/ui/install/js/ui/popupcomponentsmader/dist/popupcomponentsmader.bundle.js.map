{"version":3,"file":"popupcomponentsmader.bundle.js","sources":["../src/popup.item.js","../src/popup.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Type, Tag, Dom } from 'main.core';\nimport { Loader } from 'main.loader';\n\nexport default class PopupComponentsMaderItem extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\n\t\tthis.html = Type.isDomNode(options?.html) ? options.html : null;\n\t\tthis.awaitContent = Type.isBoolean(options?.awaitContent) ? options?.awaitContent : null;\n\t\tthis.flex = Type.isNumber(options?.flex) ? options.flex : null;\n\t\tthis.withoutBackground = Type.isBoolean(options?.withoutBackground) ? options.withoutBackground : null;\n\t\tthis.layout = {\n\t\t\tcontainer: null\n\t\t};\n\n\t\tif (this.awaitContent)\n\t\t{\n\t\t\tthis.await();\n\t\t}\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.getContainer(),\n\t\t\t\tsize: 45\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tawait()\n\t{\n\t\tthis.getContainer().classList.add('--awaiting');\n\t\tthis.showLoader();\n\t}\n\n\tstopAwait()\n\t{\n\t\tthis.getContainer().classList.remove('--awaiting');\n\t\tthis.hideLoader();\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader(): void\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tgetContent()\n\t{\n\t\tif (this.html)\n\t\t{\n\t\t\treturn this.html;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tupdateContent(node: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.clean(this.getContainer());\n\t\t\tthis.getContainer().appendChild(node);\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmader__content--section-item\">${this.getContent()}</div>\n\t\t\t`;\n\n\t\t\tif (this.withoutBackground)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--transparent');\n\t\t\t}\n\n\t\t\tif (this.flex)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.flex = this.flex;\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n}\n","import PopupComponentsMaderItem from './popup.item';\nimport { Type, Tag } from 'main.core';\nimport { Popup } from 'main.popup';\n\nexport class PopupComponentsMader\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.target = Type.isElementNode(options.target) ? options.target : null;\n\t\tthis.content = options.content || null;\n\t\tthis.contentWrapper = null;\n\t\tthis.popup = null;\n\t\tthis.loader = null;\n\t}\n\n\tgetItem(item)\n\t{\n\t\tif (item instanceof PopupComponentsMaderItem)\n\t\t{\n\t\t\treturn item;\n\t\t}\n\n\t\treturn new PopupComponentsMaderItem(item);\n\t}\n\n\taddItem(item, sectionNode: HTMLElement): PopupComponentsMaderItem\n\t{\n\t\tif (!(item instanceof PopupComponentsMaderItem))\n\t\t{\n\t\t\titem = this.getItem(item);\n\t\t}\n\n\t\tif (Type.isDomNode(sectionNode))\n\t\t{\n\t\t\tsectionNode.appendChild(item.getContainer());\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tlet popupWidth = 350;\n\n\t\t\tthis.popup = new Popup(null, this.target, {\n\t\t\t\tclassName: 'ui-qr-popupcomponentmader',\n\t\t\t\tbackground: 'rgba(255,255,255,.88)',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: (popupWidth / 2) - 16\n\t\t\t\t},\n\t\t\t\tmaxWidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target.offsetWidth / 2) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 13,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent: this.getContentWrapper()\n\t\t\t});\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.getPopup().isShown();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContentWrapper(): HTMLElement\n\t{\n\t\tif (!this.contentWrapper)\n\t\t{\n\t\t\tthis.contentWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmader__content\"></div>\n\t\t\t`;\n\n\t\t\tif (!this.content)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.content.map((item)=> {\n\t\t\t\tlet sectionNode = this.getSection()\n\n\t\t\t\tif (item?.marginBottom)\n\t\t\t\t{\n\t\t\t\t\tType.isNumber(item.marginBottom)\n\t\t\t\t\t\t? sectionNode.style.marginBottom = item.marginBottom + 'px'\n\t\t\t\t\t\t: sectionNode.style.marginBottom = item.marginBottom;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isDomNode(item?.html))\n\t\t\t\t{\n\t\t\t\t\tsectionNode.appendChild(this.getItem(item).getContainer());\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(item?.html))\n\t\t\t\t{\n\t\t\t\t\titem.html.map((itemObj)=> {\n\t\t\t\t\t\titemObj?.html?.then\n\t\t\t\t\t\t\t? this.adjustPromise(itemObj, sectionNode)\n\t\t\t\t\t\t\t: sectionNode.appendChild(this.getItem(itemObj).getContainer());\n\t\t\t\t\t});\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(item?.html?.then))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustPromise(item, sectionNode);\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.contentWrapper;\n\t}\n\n\tadjustPromise(item: Object, sectionNode: HTMLElement)\n\t{\n\t\titem.awaitContent = true;\n\t\tlet itemObj = this.getItem(item);\n\n\t\tif (sectionNode)\n\t\t{\n\t\t\tsectionNode.appendChild(itemObj.getContainer());\n\t\t\titem?.html?.then((node) => {\n\t\t\t\tif (Type.isDomNode(node))\n\t\t\t\t{\n\t\t\t\t\titemObj.stopAwait();\n\t\t\t\t\titemObj.updateContent(node);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-qr-popupcomponentmader__content--section\"></div>\n\t\t`;\n\t}\n\n\tshow()\n\t{\n\t\tif (!Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getPopup().show();\n\t}\n\n\tclose()\n\t{\n\t\tthis.getPopup().close();\n\t}\n}"],"names":["PopupComponentsMaderItem","options","html","Type","isDomNode","awaitContent","isBoolean","flex","isNumber","withoutBackground","layout","container","await","loader","Loader","target","getContainer","size","classList","add","showLoader","remove","hideLoader","getLoader","show","hide","node","Dom","clean","appendChild","Tag","render","getContent","style","EventEmitter","PopupComponentsMader","isElementNode","content","contentWrapper","popup","item","sectionNode","getItem","popupWidth","Popup","className","background","contentBackground","angle","offset","maxWidth","offsetLeft","offsetWidth","autoHide","closeByEsc","padding","animation","getContentWrapper","getContentContainer","overflowX","getPopup","isShown","map","getSection","marginBottom","isArray","itemObj","then","adjustPromise","isFunction","stopAwait","updateContent","close"],"mappings":"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"}