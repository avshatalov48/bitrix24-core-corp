{"version":3,"file":"devtools.bundle.js","sources":["../src/devtools.js"],"sourcesContent":["/**\n * Bitrix integration with external Vue DevTools\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2019 Bitrix\n */\n\nclass BitrixVueDevTools\n{\n\tconstructor(params)\n\t{\n\t\tthis.host = 'http://localhost';\n\t\tthis.port = '8098';\n\n\n\t\tthis.script = null;\n\t\tthis.changeToast = false;\n\n\t\tif (\n\t\t\t!navigator.userAgent.toLowerCase().includes('chrome')\n\t\t\t&& !navigator.userAgent.toLowerCase().includes('firefox')\n\t\t)\n\t\t{\n\t\t\tthis.changeToast = true;\n\t\t\tconsole.info(\n\t\t\t\t\"Install the Vue Remote Devtools application for a better development experience: https://github.com/vuejs/vue-devtools/blob/master/shells/electron/\\n\"+\n\t\t\t\t\"For connect to localhost use %cBX.VueDevTools.connect();%c for remote host %cBX.VueDevTools.connect('__devtools_ip_address__');\",\n\t\t\t\t\"font-weight: bold\", \"font-weight: initial\", \"font-weight: bold\", \"font-weight: initial\",\n\t\t\t);\n\t\t}\n\t}\n\n\tconnect(address)\n\t{\n\t\tif (this.script)\n\t\t{\n\t\t\tdocument.body.removeChild(this.script);\n\t\t}\n\n\t\tif (address)\n\t\t{\n\t\t\tthis.setUrl(address);\n\t\t}\n\n\t\twindow.__VUE_DEVTOOLS_HOST__ = this.host;\n\t\twindow.__VUE_DEVTOOLS_PORT__ = this.port;\n\n\t\tthis.script = document.createElement('script');\n\t\tif (this.changeToast)\n\t\t{\n\t\t\tthis.script.addEventListener('load', this.load.bind(this));\n\t\t}\n\t\tthis.script.src = __VUE_DEVTOOLS_HOST__+':'+__VUE_DEVTOOLS_PORT__;\n\n\t\tdocument.body.appendChild(this.script);\n\n\t\treturn true;\n\t}\n\n\treconnect()\n\t{\n\t\tthis.connect();\n\t}\n\n\tsetUrl(address = 'localhost')\n\t{\n\t\tif (!address.startsWith('http'))\n\t\t{\n\t\t\taddress = 'http://'+address;\n\t\t}\n\n\t\tlet parts = address.split(':');\n\t\tif (parts.length > 2)\n\t\t{\n\t\t\tthis.host = parts.slice(0,2).join(':');\n\t\t\tthis.port = parts[2];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.host = address;\n\t\t\tthis.port = '8098';\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tload()\n\t{\n\t\twindow.__VUE_DEVTOOLS_TOAST__ = new Proxy(window.__VUE_DEVTOOLS_TOAST__,\n\t\t{\n\t\t\tapply: (target, thisArg, argumentsList) =>\n\t\t\t{\n\t\t\t\tif (argumentsList[0].toString().toLowerCase().includes('disconnect'))\n\t\t\t\t{\n\t\t\t\t\tconsole.info(\n\t\t\t\t\t\t'%cDevTools:%c try to reconnect, if vue-devtools is not running, run and call %cBX.VueDevTools.reconnect();',\n\t\t\t\t\t\t\"font-weight: bold\", \"font-weight: initial\", \"font-weight: bold\",\n\t\t\t\t\t);\n\t\t\t\t\tsetTimeout(() => this.reconnect(), 5000);\n\t\t\t\t}\n\t\t\t\treturn target.apply(thisArg, argumentsList);\n\t\t  \t}\n\t\t});\n\t}\n}\n\nlet VueDevTools = new BitrixVueDevTools;\nexport {VueDevTools};"],"names":["BitrixVueDevTools","params","host","port","script","changeToast","navigator","userAgent","toLowerCase","includes","console","info","address","document","body","removeChild","setUrl","window","__VUE_DEVTOOLS_HOST__","__VUE_DEVTOOLS_PORT__","createElement","addEventListener","load","bind","src","appendChild","connect","startsWith","parts","split","length","slice","join","__VUE_DEVTOOLS_TOAST__","Proxy","apply","target","thisArg","argumentsList","toString","setTimeout","reconnect","VueDevTools"],"mappings":"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"}