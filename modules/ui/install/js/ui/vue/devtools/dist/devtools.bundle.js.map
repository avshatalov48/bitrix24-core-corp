{"version":3,"file":"devtools.bundle.js","sources":["../src/devtools.js"],"sourcesContent":["/**\n * Bitrix integration with external Vue DevTools\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2019 Bitrix\n */\n\nclass BitrixVueDevTools\n{\n\tconstructor(params)\n\t{\n\t\tthis.host = 'http://localhost';\n\t\tthis.port = '8098';\n\n\n\t\tthis.script = null;\n\t\tthis.changeToast = false;\n\n\t\tif (\n\t\t\t!navigator.userAgent.toLowerCase().includes('chrome')\n\t\t\t&& !navigator.userAgent.toLowerCase().includes('firefox')\n\t\t)\n\t\t{\n\t\t\tthis.changeToast = true;\n\t\t\tconsole.info(\n\t\t\t\t\"Install the Vue Remote Devtools application for a better development experience: https://github.com/vuejs/vue-devtools/blob/master/shells/electron/\\n\"+\n\t\t\t\t\"For connect to localhost use %cBX.VueDevTools.connect();%c for remote host %cBX.VueDevTools.connect('__devtools_ip_address__');\",\n\t\t\t\t\"font-weight: bold\", \"font-weight: initial\", \"font-weight: bold\", \"font-weight: initial\",\n\t\t\t);\n\t\t}\n\t}\n\n\tconnect(address)\n\t{\n\t\tif (this.script)\n\t\t{\n\t\t\tdocument.body.removeChild(this.script);\n\t\t}\n\n\t\tif (address)\n\t\t{\n\t\t\tthis.setUrl(address);\n\t\t}\n\n\t\twindow.__VUE_DEVTOOLS_HOST__ = this.host;\n\t\twindow.__VUE_DEVTOOLS_PORT__ = this.port;\n\n\t\tthis.script = document.createElement('script');\n\t\tif (this.changeToast)\n\t\t{\n\t\t\tthis.script.addEventListener('load', this.load.bind(this));\n\t\t}\n\t\tthis.script.src = __VUE_DEVTOOLS_HOST__+':'+__VUE_DEVTOOLS_PORT__;\n\n\t\tdocument.body.appendChild(this.script);\n\n\t\treturn true;\n\t}\n\n\treconnect()\n\t{\n\t\tthis.connect();\n\t}\n\n\tsetUrl(address = 'localhost')\n\t{\n\t\tif (!address.startsWith('http'))\n\t\t{\n\t\t\taddress = 'http://'+address;\n\t\t}\n\n\t\tlet parts = address.split(':');\n\t\tif (parts.length > 2)\n\t\t{\n\t\t\tthis.host = parts.slice(0,2).join(':');\n\t\t\tthis.port = parts[2];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.host = address;\n\t\t\tthis.port = '8098';\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tload()\n\t{\n\t\twindow.__VUE_DEVTOOLS_TOAST__ = new Proxy(window.__VUE_DEVTOOLS_TOAST__,\n\t\t{\n\t\t\tapply: (target, thisArg, argumentsList) =>\n\t\t\t{\n\t\t\t\tif (argumentsList[0].toString().toLowerCase().includes('disconnect'))\n\t\t\t\t{\n\t\t\t\t\tconsole.info(\n\t\t\t\t\t\t'%cDevTools:%c try to reconnect, if vue-devtools is not running, run and call %cBX.VueDevTools.reconnect();',\n\t\t\t\t\t\t\"font-weight: bold\", \"font-weight: initial\", \"font-weight: bold\",\n\t\t\t\t\t);\n\t\t\t\t\tsetTimeout(() => this.reconnect(), 5000);\n\t\t\t\t}\n\t\t\t\treturn target.apply(thisArg, argumentsList);\n\t\t  \t}\n\t\t});\n\t}\n}\n\nlet VueDevTools = new BitrixVueDevTools;\nexport {VueDevTools};"],"names":["BitrixVueDevTools","params","host","port","script","changeToast","navigator","userAgent","toLowerCase","includes","console","info","address","document","body","removeChild","setUrl","window","__VUE_DEVTOOLS_HOST__","__VUE_DEVTOOLS_PORT__","createElement","addEventListener","load","bind","src","appendChild","connect","startsWith","parts","split","length","slice","join","__VUE_DEVTOOLS_TOAST__","Proxy","apply","target","thisArg","argumentsList","toString","setTimeout","reconnect","VueDevTools"],"mappings":";;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CANA,IAQMA,iBAAiB;GAEtB,2BAAYC,MAAM,EAClB;KAAA;KACC,IAAI,CAACC,IAAI,GAAG,kBAAkB;KAC9B,IAAI,CAACC,IAAI,GAAG,MAAM;KAGlB,IAAI,CAACC,MAAM,GAAG,IAAI;KAClB,IAAI,CAACC,WAAW,GAAG,KAAK;KAExB,IACC,CAACC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,QAAQ,CAAC,IAClD,CAACH,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE,CAACC,QAAQ,CAAC,SAAS,CAAC,EAE1D;OACC,IAAI,CAACJ,WAAW,GAAG,IAAI;OACvBK,OAAO,CAACC,IAAI,CACX,uJAAuJ,GACvJ,iIAAiI,EACjI,mBAAmB,EAAE,sBAAsB,EAAE,mBAAmB,EAAE,sBAAsB,CACxF;;;GAEF;KAAA;KAAA,wBAEOC,OAAO,EACf;OACC,IAAI,IAAI,CAACR,MAAM,EACf;SACCS,QAAQ,CAACC,IAAI,CAACC,WAAW,CAAC,IAAI,CAACX,MAAM,CAAC;;OAGvC,IAAIQ,OAAO,EACX;SACC,IAAI,CAACI,MAAM,CAACJ,OAAO,CAAC;;OAGrBK,MAAM,CAACC,qBAAqB,GAAG,IAAI,CAAChB,IAAI;OACxCe,MAAM,CAACE,qBAAqB,GAAG,IAAI,CAAChB,IAAI;OAExC,IAAI,CAACC,MAAM,GAAGS,QAAQ,CAACO,aAAa,CAAC,QAAQ,CAAC;OAC9C,IAAI,IAAI,CAACf,WAAW,EACpB;SACC,IAAI,CAACD,MAAM,CAACiB,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAACC,IAAI,CAACC,IAAI,CAAC,IAAI,CAAC,CAAC;;OAE3D,IAAI,CAACnB,MAAM,CAACoB,GAAG,GAAGN,qBAAqB,GAAC,GAAG,GAACC,qBAAqB;OAEjEN,QAAQ,CAACC,IAAI,CAACW,WAAW,CAAC,IAAI,CAACrB,MAAM,CAAC;OAEtC,OAAO,IAAI;;;KACX;KAAA,4BAGD;OACC,IAAI,CAACsB,OAAO,EAAE;;;KACd;KAAA,yBAGD;OAAA,IADOd,OAAO,uEAAG,WAAW;OAE3B,IAAI,CAACA,OAAO,CAACe,UAAU,CAAC,MAAM,CAAC,EAC/B;SACCf,OAAO,GAAG,SAAS,GAACA,OAAO;;OAG5B,IAAIgB,KAAK,GAAGhB,OAAO,CAACiB,KAAK,CAAC,GAAG,CAAC;OAC9B,IAAID,KAAK,CAACE,MAAM,GAAG,CAAC,EACpB;SACC,IAAI,CAAC5B,IAAI,GAAG0B,KAAK,CAACG,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC;SACtC,IAAI,CAAC7B,IAAI,GAAGyB,KAAK,CAAC,CAAC,CAAC;QACpB,MAED;SACC,IAAI,CAAC1B,IAAI,GAAGU,OAAO;SACnB,IAAI,CAACT,IAAI,GAAG,MAAM;;OAGnB,OAAO,IAAI;;;KACX;KAAA,uBAGD;OAAA;OACCc,MAAM,CAACgB,sBAAsB,GAAG,IAAIC,KAAK,CAACjB,MAAM,CAACgB,sBAAsB,EACvE;SACCE,KAAK,EAAE,eAACC,MAAM,EAAEC,OAAO,EAAEC,aAAa,EACtC;WACC,IAAIA,aAAa,CAAC,CAAC,CAAC,CAACC,QAAQ,EAAE,CAAC/B,WAAW,EAAE,CAACC,QAAQ,CAAC,YAAY,CAAC,EACpE;aACCC,OAAO,CAACC,IAAI,CACX,4GAA4G,EAC5G,mBAAmB,EAAE,sBAAsB,EAAE,mBAAmB,CAChE;aACD6B,UAAU,CAAC;eAAA,OAAM,KAAI,CAACC,SAAS,EAAE;gBAAE,IAAI,CAAC;;WAEzC,OAAOL,MAAM,CAACD,KAAK,CAACE,OAAO,EAAEC,aAAa,CAAC;;QAE5C,CAAC;;;GACF;CAAA;AAGF,KAAII,WAAW,GAAG,IAAI1C,iBAAiB;;;;;;;;"}