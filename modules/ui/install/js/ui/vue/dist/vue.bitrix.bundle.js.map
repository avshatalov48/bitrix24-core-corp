{"version":3,"file":"vue.bitrix.bundle.js","sources":["../src/vue.bitrix.js"],"sourcesContent":["/**\n * Bitrix Vue wrapper\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"main.polyfill.core\";\nimport {VueVendorV2} from \"ui.vue.vendor.v2\";\n\nclass BitrixVue\n{\n\tconstructor()\n\t{\n\t\tthis._components = {};\n\t\tthis._mutations = {};\n\t\tthis._clones = {};\n\n\t\tthis.event = new VueVendorV2({});\n\t}\n\n\t/**\n\t * Create new Vue instance\n\t *\n\t * @param {Object} params - definition\n\t *\n\t * @see https://vuejs.org/v2/guide/\n\t */\n\tcreate(params)\n\t{\n\t\treturn new VueVendorV2(params);\n\t}\n\n\t/**\n\t * Register Vue component\n\t *\n\t * @param {String} id\n\t * @param {Object} params\n\t *\n\t * @see https://vuejs.org/v2/guide/components.html\n\t */\n\tcomponent(id, params)\n\t{\n\t\tthis._components[id] = Object.assign({}, params);\n\n\t\tif (typeof this._clones[id] !== 'undefined')\n\t\t{\n\t\t\tthis._registerCloneComponent(id);\n\t\t}\n\n\t\treturn VueVendorV2.component(id, this._getComponentParamsWithMutation(id, this._mutations[id]));\n\t}\n\n\t/**\n\t * Modify Vue component\n\t *\n\t * @param {String} id\n\t * @param {Object} mutations\n\t *\n\t * @returns {Function} - function for remove this modification\n\t */\n\tmutateComponent(id, mutations)\n\t{\n\t\tif (typeof this._mutations[id] === 'undefined')\n\t\t{\n\t\t\tthis._mutations[id] = [];\n\t\t}\n\n\t\tthis._mutations[id].push(mutations);\n\n\t\tif (typeof this._components[id] !== 'undefined')\n\t\t{\n\t\t\tthis.component(id, this._components[id]);\n\t\t}\n\n\t\treturn () => {\n\t\t\tthis._mutations[id] = this._mutations[id].filter((element) => element !== mutations);\n\t\t};\n\t}\n\n\t/**\n\t * Clone Vue component\n\t *\n\t * @param {string} id\n\t * @param {string} sourceId\n\t * @param {object} mutations\n\t * @returns {boolean}\n\t */\n\tcloneComponent(id, sourceId, mutations)\n\t{\n\t\tif (typeof this._clones[sourceId] === 'undefined')\n\t\t{\n\t\t\tthis._clones[sourceId] = {};\n\t\t}\n\n\t\tthis._clones[sourceId][id] = {id, sourceId, mutations};\n\n\t\tif (typeof this._components[sourceId] !== 'undefined')\n\t\t{\n\t\t\tthis._registerCloneComponent(sourceId, id);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tisComponent(id)\n\t{\n\t\treturn typeof this._components[id] !== 'undefined'\n\t}\n\n\t/**\n\t * Create a \"subclass\" of the base Vue constructor.\n\t *\n\t * @param options\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-extend\n\t */\n\textend(options)\n\t{\n\t\treturn VueVendorV2.extend(options)\n\t}\n\n\t/**\n\t *\tDefer the callback to be executed after the next DOM update cycle. Use it immediately after youï¿½ve changed some data to wait for the DOM update.\n\t *\n\t * @param {Function} callback\n\t * @param {Object} context\n\t * @returns {Promise|void}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-nextTick\n\t */\n\tnextTick(callback, context)\n\t{\n\t\treturn VueVendorV2.nextTick(callback, context);\n\t}\n\n\t/**\n\t * Adds a property to a reactive object, ensuring the new property is also reactive, so triggers view updates.\n\t *\n\t * @param {Object|Array} target\n\t * @param {String|Number} key\n\t * @param {*} value\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-set\n\t */\n\tset(target, key, value)\n\t{\n\t\treturn VueVendorV2.set(target, key, value);\n\t}\n\n\t/**\n\t * Delete a property on an object. If the object is reactive, ensure the deletion triggers view updates.\n\t *\n\t * @param {Object|Array} target\n\t * @param {String|Number} key\n\t * @returns {*}\n\t */\n\tdelete(target, key)\n\t{\n\t\treturn VueVendorV2.delete(target, key);\n\t}\n\n\t/**\n\t * Register or retrieve a global directive.\n\t *\n\t * @param {String} id\n\t * @param {Object|Function} definition\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-directive\n\t */\n\tdirective(id, definition)\n\t{\n\t\treturn VueVendorV2.directive(id, definition);\n\t}\n\n\t/**\n\t * Register or retrieve a global filter.\n\t *\n\t * @param id\n\t * @param definition\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-filter\n\t */\n\tfilter(id, definition)\n\t{\n\t\treturn VueVendorV2.filter(id, definition);\n\t}\n\n\t/**\n\t * Install a Vue.js plugin.\n\t *\n\t * @param {Object|Function} plugin\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-use\n\t */\n\tuse(plugin)\n\t{\n\t\treturn VueVendorV2.use(plugin);\n\t}\n\n\t/**\n\t * Apply a mixin globally, which affects every Vue instance created afterwards.\n\t *\n\t * @param {Object} mixin\n\t * @returns {*|Function|Object}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-mixin\n\t */\n\tmixin(mixin)\n\t{\n\t\treturn VueVendorV2.mixin(mixin);\n\t}\n\n\t/**\n\t * Compiles a template string into a render function.\n\t *\n\t * @param template\n\t * @returns {*}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-compile\n\t */\n\tcompile(template)\n\t{\n\t\treturn VueVendorV2.compile(template);\n\t}\n\n\t/**\n\t * Provides the installed version of Vue as a string.\n\t *\n\t * @returns {String}\n\t *\n\t * @see https://vuejs.org/v2/api/#Vue-version\n\t */\n\tversion()\n\t{\n\t\treturn VueVendorV2.version;\n\t}\n\n\t/**\n\t *\n\t * @param {String} phrasePrefix\n\t * @param {Object|null} phrases\n\t * @returns {ReadonlyArray<any>}\n\t */\n\tgetFilteredPhrases(phrasePrefix, phrases = null)\n\t{\n\t\tlet result = {};\n\n\t\tif (!phrases && typeof BX.message !== 'undefined')\n\t\t{\n\t\t\tphrases = BX.message;\n\t\t}\n\n\t\tfor (let message in phrases)\n\t\t{\n\t\t\tif (!phrases.hasOwnProperty(message))\n\t\t\t{\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif (!message.startsWith(phrasePrefix))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tresult[message] = phrases[message];\n\t\t}\n\n\t\treturn Object.freeze(result);\n\t}\n\n\t/**\n\t * Return component params with mutation\n\t *\n\t * @param {String} componentId\n\t * @param {Object} mutations\n\t * @returns {null|Object}\n\t *\n\t * @private\n\t */\n\t_getComponentParamsWithMutation(componentId, mutations)\n\t{\n\t\tif (typeof this._components[componentId] === 'undefined')\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet componentParams = Object.assign({}, this._components[componentId]);\n\n\t\tif (typeof mutations === 'undefined')\n\t\t{\n\t\t\treturn componentParams;\n\t\t}\n\n\t\tmutations.forEach(mutation =>\n\t\t{\n\t\t\tcomponentParams = this._applyMutation(\n\t\t\t\tthis._cloneObjectWithoutDuplicateFunction(componentParams, mutation),\n\t\t\tmutation);\n\t\t});\n\n\t\treturn componentParams;\n\t}\n\n\t/**\n\t * Register clone of components\n\t *\n\t * @param {String} sourceId\n\t * @param {String|null} [id]\n\t *\n\t * @private\n\t */\n\t_registerCloneComponent(sourceId, id = null)\n\t{\n\t\tlet components = [];\n\t\tif (id)\n\t\t{\n\t\t\tif (typeof this._clones[sourceId][id] !== 'undefined')\n\t\t\t{\n\t\t\t\tcomponents.push(this._clones[sourceId][id]);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (let cloneId in this._clones[sourceId])\n\t\t\t{\n\t\t\t\tif (!this._clones[sourceId].hasOwnProperty(cloneId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tcomponents.push(this._clones[sourceId][cloneId]);\n\t\t\t}\n\t\t}\n\n\t\tcomponents.forEach(element =>\n\t\t{\n\t\t\tlet mutations = [];\n\n\t\t\tif (typeof this._mutations[element.sourceId] !== 'undefined')\n\t\t\t{\n\t\t\t\tmutations = mutations.concat(this._mutations[element.sourceId]);\n\t\t\t}\n\n\t\t\tmutations.push(element.mutations);\n\n\t\t\tlet componentParams = this._getComponentParamsWithMutation(element.sourceId, mutations);\n\t\t\tif (!componentParams)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.component(element.id, componentParams);\n\t\t});\n\t}\n\n\t/**\n\t * Clone object without duplicate function for apply mutation\n\t *\n\t * @param objectParams\n\t * @param mutation\n\t * @param level\n\t * @private\n\t */\n\t_cloneObjectWithoutDuplicateFunction(objectParams = {}, mutation = {}, level = 1)\n\t{\n\t\tlet object = {};\n\n\t\tfor (let param in objectParams)\n\t\t{\n\t\t\tif (!objectParams.hasOwnProperty(param))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof objectParams[param] === 'string')\n\t\t\t{\n\t\t\t\tobject[param] = objectParams[param];\n\t\t\t}\n\t\t\telse if (Object.prototype.toString.call(objectParams[param]) === '[object Array]')\n\t\t\t{\n\t\t\t\tobject[param] = [].concat(objectParams[param]);\n\t\t\t}\n\t\t\telse if (typeof objectParams[param] === 'object')\n\t\t\t{\n\t\t\t\tif (objectParams[param] === null)\n\t\t\t\t{\n\t\t\t\t\tobject[param] = null;\n\t\t\t\t}\n\t\t\t\telse if (typeof mutation[param] === 'object')\n\t\t\t\t{\n\t\t\t\t\tobject[param] = this._cloneObjectWithoutDuplicateFunction(objectParams[param], mutation[param], (level+1))\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tobject[param] = Object.assign({}, objectParams[param])\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof objectParams[param] === 'function')\n\t\t\t{\n\t\t\t\tif (typeof mutation[param] !== 'function')\n\t\t\t\t{\n\t\t\t\t\tobject[param] = objectParams[param];\n\t\t\t\t}\n\t\t\t\telse if (level > 1)\n\t\t\t\t{\n\t\t\t\t\tobject['parent'+param[0].toUpperCase()+param.substr(1)] = objectParams[param];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (typeof object['methods'] === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tobject['methods'] = {};\n\t\t\t\t\t}\n\t\t\t\t\tobject['methods']['parent'+param[0].toUpperCase()+param.substr(1)] = objectParams[param];\n\n\t\t\t\t\tif (typeof objectParams['methods'] === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tobjectParams['methods'] = {};\n\t\t\t\t\t}\n\t\t\t\t\tobjectParams['methods']['parent'+param[0].toUpperCase()+param.substr(1)] = objectParams[param];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (typeof objectParams[param] !== 'undefined')\n\t\t\t{\n\t\t\t\tobject[param] = objectParams[param];\n\t\t\t}\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t/**\n\t * Apply mutation\n\t *\n\t * @param clonedObject\n\t * @param mutation\n\t * @private\n\t */\n\t_applyMutation(clonedObject = {}, mutation = {})\n\t{\n\t\tlet object = Object.assign({}, clonedObject);\n\n\t\tfor (let param in mutation)\n\t\t{\n\t\t\tif (!mutation.hasOwnProperty(param))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (typeof mutation[param] === 'string')\n\t\t\t{\n\t\t\t\tif (typeof object[param] === 'string')\n\t\t\t\t{\n\t\t\t\t\tobject[param] = mutation[param].replace(`#PARENT_${param.toUpperCase()}#`, object[param]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tobject[param] = mutation[param].replace(`#PARENT_${param.toUpperCase()}#`, '');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (Object.prototype.toString.call(mutation[param]) === '[object Array]')\n\t\t\t{\n\t\t\t\tobject[param] = [].concat(mutation[param]);\n\t\t\t}\n\t\t\telse if (typeof mutation[param] === 'object')\n\t\t\t{\n\t\t\t\tif (typeof object[param] === 'object')\n\t\t\t\t{\n\t\t\t\t\tobject[param] = this._applyMutation(object[param], mutation[param])\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tobject[param] = mutation[param];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tobject[param] = mutation[param];\n\t\t\t}\n\t\t}\n\n\t\treturn object;\n\t}\n\n\t/**\n\t * Test node for compliance with parameters\n\t *\n\t * @param obj\n\t * @param params\n\t * @returns {boolean}\n\t */\n\ttestNode(obj, params)\n\t{\n\t\tif (!params || typeof params !== 'object')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i,j,len;\n\n\t\tfor (i in params)\n\t\t{\n\t\t\tif(!params.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch(i)\n\t\t\t{\n\t\t\t\tcase 'tag':\n\t\t\t\tcase 'tagName':\n\t\t\t\t\tif (typeof params[i] === \"string\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (obj.tagName.toUpperCase() !== params[i].toUpperCase())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (params[i] instanceof RegExp)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!params[i].test(obj.tagName))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'class':\n\t\t\t\tcase 'className':\n\t\t\t\t\tif (typeof params[i] === \"string\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj.classList.contains(params[i].trim()))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (params[i] instanceof RegExp)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ttypeof obj.className !== \"string\"\n\t\t\t\t\t\t\t|| !params[i].test(obj.className)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'attr':\n\t\t\t\tcase 'attrs':\n\t\t\t\tcase 'attribute':\n\t\t\t\t\tif (typeof params[i] === \"string\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj.getAttribute(params[i]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (params[i] && Object.prototype.toString.call(params[i]) === \"[object Array]\")\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0, len = params[i].length; j < len; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (params[i][j] && !obj.getAttribute(params[i][j]))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j in params[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!params[i].hasOwnProperty(j))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet value = obj.getAttribute(j);\n\t\t\t\t\t\t\tif (typeof value !== \"string\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (params[i][j] instanceof RegExp)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (!params[i][j].test(value))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (value !== '' + params[i][j])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase 'property':\n\t\t\t\tcase 'props':\n\t\t\t\t\tif (typeof params[i] === \"string\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!obj[params[i]])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (params[i] && Object.prototype.toString.call(params[i]) == \"[object Array]\")\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0, len = params[i].length; j < len; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (params[i][j] && !obj[params[i][j]])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j in params[i])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif(!params[i].hasOwnProperty(j))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof params[i][j] === \"string\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (obj[j] != params[i][j])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (params[i][j] instanceof RegExp)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\ttypeof obj[j] !== \"string\"\n\t\t\t\t\t\t\t\t\t|| !params[i][j].test(obj[j])\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n}\n\nlet Vue = new BitrixVue;\n\nexport {\n\tVue,\n\tVueVendorV2 as VueVendor\n};"],"names":["BitrixVue","_components","_mutations","_clones","event","VueVendorV2","params","id","Object","assign","_registerCloneComponent","component","_getComponentParamsWithMutation","mutations","push","filter","element","sourceId","options","extend","callback","context","nextTick","target","key","value","set","delete","definition","directive","plugin","use","mixin","template","compile","version","phrasePrefix","phrases","result","BX","message","hasOwnProperty","startsWith","freeze","componentId","componentParams","forEach","mutation","_applyMutation","_cloneObjectWithoutDuplicateFunction","components","cloneId","concat","objectParams","level","object","param","prototype","toString","call","toUpperCase","substr","clonedObject","replace","obj","i","j","len","tagName","RegExp","test","classList","contains","trim","className","getAttribute","length","Vue"],"mappings":"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"}