this.BX=this.BX||{};this.BX.Ui=this.BX.Ui||{};this.BX.Ui.Vue=this.BX.Ui.Vue||{};this.BX.Ui.Vue.Components=this.BX.Ui.Vue.Components||{};(function(e,t){"use strict";var n=null;t.Vue.component("bx-crm-form",{props:{id:{type:String,required:true},sec:{type:String,required:true},lang:{type:String,required:true,default:"en"},address:{type:String,required:true,default:function e(){return window.location.origin}},design:{type:Object,required:false,default:function e(){return{compact:true}}}},data:function e(){return{message:"",obj:{}}},beforeDestroy:function e(){if(this.obj.instance){this.obj.instance.destroy()}},mounted:function e(){var t=this;var i=function e(){t.message="";t.obj.config.data.node=t.$el;t.obj.config.data.design=babelHelpers.objectSpread({},t.obj.config.data.design,t.design);t.obj.instance=window.b24form.App.createForm24(t.obj.config,t.obj.config.data);t.obj.instance.subscribeAll(function(e,n,i){t.$emit("form:"+i,e)})};this.message="...Loading";var r=null;if(window.fetch){var o=new FormData;o.append("id",this.id);o.append("sec",this.sec);r=fetch(this.address+"/bitrix/services/main/ajax.php?action=crm.site.form.get",{method:"POST",body:o,mode:"cors"})}else{this.message="error";return}r.then(function(e){return e.json()}).then(function(e){if(e.error){throw new Error(e.error_description)}t.obj.config=e.result.config;if(window.b24form&&window.b24form.App){i();return}if(!n){n=new Promise(function(t,n){var i=document.createElement("script");i.src=e.result.loader.app.link;i.onload=t;i.onerror=n;document.head.appendChild(i)})}n.then(i).catch(function(e){t.message="App load failed:"+e})}).catch(function(e){t.message=e})},template:'\n\t\t<div>\n\t\t\t<div v-if="message">{{ message }}</div>\n\t\t</div>\n\t'})})(this.BX.Ui.Vue.Components.Crm=this.BX.Ui.Vue.Components.Crm||{},BX);
//# sourceMappingURL=crm.form.bundle.map.js