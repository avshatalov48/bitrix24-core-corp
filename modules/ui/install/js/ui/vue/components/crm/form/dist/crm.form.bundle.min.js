this.BX=this.BX||{};this.BX.Ui=this.BX.Ui||{};this.BX.Ui.Vue=this.BX.Ui.Vue||{};this.BX.Ui.Vue.Components=this.BX.Ui.Vue.Components||{};(function(e,i){"use strict";var t=null;i.Vue.component("bx-crm-form",{props:{id:{type:String,required:true},sec:{type:String,required:true},lang:{type:String,required:true,default:"en"},address:{type:String,required:true,default:function e(){return window.location.origin}},design:{type:Object,required:false,default:function e(){return{compact:true}}}},data:function e(){return{message:"",isLoading:false,obj:{}}},beforeDestroy:function e(){if(this.obj.instance){this.obj.instance.destroy()}},mounted:function e(){var i=this;var n=function e(){i.isLoading=false;i.message="";i.obj.config.data.node=i.$el;i.obj.config.data.design=babelHelpers.objectSpread({},i.obj.config.data.design,i.design);i.obj.instance=window.b24form.App.createForm24(i.obj.config,i.obj.config.data);i.obj.instance.subscribeAll(function(e,t,n){e.form=t;i.$emit("form:"+n,e)})};this.isLoading=true;var o=null;if(window.fetch){var r=new FormData;r.append("id",this.id);r.append("sec",this.sec);o=fetch(this.address+"/bitrix/services/main/ajax.php?action=crm.site.form.get",{method:"POST",body:r,mode:"cors"})}else{this.message="error";return}o.then(function(e){return e.json()}).then(function(e){if(e.error){throw new Error(e.error_description)}i.obj.config=e.result.config;if(window.b24form&&window.b24form.App){n();return}if(!t){t=new Promise(function(i,t){var n=function e(){if(!window.b24form||!window.b24form||!window.b24form.App){setTimeout(e,200)}else{i()}};var o=document.createElement("script");o.src=e.result.loader.app.link;o.onload=n;o.onerror=t;document.head.appendChild(o)})}t.then(n).catch(function(e){i.message="App load failed:"+e})}).catch(function(e){i.isLoading=false;i.message=e})},template:'\n\t\t<div>\n\t\t\t<div v-if="isLoading" class="ui-vue-crm-form-loading-container"></div>\n\t\t\t<div v-else-if="message">{{ message }}</div>\n\t\t</div>\n\t'})})(this.BX.Ui.Vue.Components.Crm=this.BX.Ui.Vue.Components.Crm||{},BX);
//# sourceMappingURL=crm.form.bundle.map.js