{"version":3,"file":"hint.bundle.js","sources":["../src/directive.js","../src/component.js"],"sourcesContent":["/**\n * Hint Vue directive\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2021 Bitrix\n */\n\n/*\n\t<span v-bx-hint=\"$Bitrix.Loc.getMessage('HINT_HTML')\" data-hint-html>Html code</span>\n\t<span v-bx-hint=\"{text: 'Text node'}\">Plain text</span>\n\t<span v-bx-hint=\"{html: '<b>Html</b> code'}\">Html code</span>\n\t<span v-bx-hint=\"{text: 'Custom position top and light mode', position: 'top', popupOptions: {darkMode: false}}\">Text top on light panel</span>\n*/\n\nimport {BitrixVue} from 'ui.vue';\nimport {Text, Tag, Event, Type} from 'main.core';\nimport {Popup, PopupOptions} from \"main.popup\";\nimport 'ui.hint';\n\nBitrixVue.directive('bx-hint',\n{\n\tbind(element: HTMLElement, bindings)\n\t{\n\t\tEvent.bind(element, 'mouseenter', () => TooltipManager.show(element, bindings));\n\t\tEvent.bind(element, 'mouseleave', () => TooltipManager.hide());\n\t}\n});\n\nclass Tooltip\n{\n\tconstructor()\n\t{\n\t\tthis.popup = null;\n\t\tthis.elements\n\t}\n\n\tshow(\n\t\telement: HTMLElement,\n\t\tbindings: Object = {}\n\t)\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tlet popupOptions: PopupOptions = {};\n\n\t\tlet text;\n\t\tif (Type.isObject(bindings.value))\n\t\t{\n\t\t\tif (bindings.value.text)\n\t\t\t{\n\t\t\t\ttext = Text.encode(bindings.value.text);\n\t\t\t}\n\t\t\telse if (bindings.value.html)\n\t\t\t{\n\t\t\t\ttext = bindings.value.html;\n\t\t\t}\n\n\t\t\tif (Type.isObject(bindings.value.popupOptions))\n\t\t\t{\n\t\t\t\tpopupOptions = bindings.value.popupOptions;\n\t\t\t}\n\n\t\t\tif (bindings.value.position === 'top')\n\t\t\t{\n\t\t\t\tif (!Type.isObject(popupOptions.bindOptions))\n\t\t\t\t{\n\t\t\t\t\tpopupOptions.bindOptions = {};\n\t\t\t\t}\n\n\t\t\t\tpopupOptions.bindOptions.position = 'top';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttext = bindings.value;\n\t\t\tif (Type.isUndefined(element.dataset.hintHtml))\n\t\t\t{\n\t\t\t\ttext = Text.encode(text);\n\t\t\t}\n\t\t}\n\n\t\tpopupOptions.bindElement = element;\n\n\t\tif (Type.isUndefined(popupOptions.id))\n\t\t{\n\t\t\tpopupOptions.id = 'bx-vue-hint';\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.darkMode))\n\t\t{\n\t\t\tpopupOptions.darkMode = true;\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.content))\n\t\t{\n\t\t\tconst content = Tag.render`<span class='ui-hint-content'></span>`;\n\t\t\tcontent.innerHTML = text;\n\t\t\tpopupOptions.content = content;\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.autoHide))\n\t\t{\n\t\t\tpopupOptions.autoHide = true;\n\t\t}\n\n\t\tif (!Type.isObject(popupOptions.bindOptions))\n\t\t{\n\t\t\tpopupOptions.bindOptions = {};\n\t\t}\n\t\tif (Type.isUndefined(popupOptions.bindOptions.position))\n\t\t{\n\t\t\tpopupOptions.bindOptions.position = 'bottom';\n\t\t}\n\n\t\tpopupOptions.cacheable = false;\n\n\t\tthis.popup = new Popup(popupOptions);\n\t\tthis.popup.show();\n\t}\n\n\thide()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\t}\n}\n\nconst TooltipManager = new Tooltip;","/**\n * Hint Vue component\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2021 Bitrix\n */\n\nimport \"./directive\";\n\n/*\n\t<bx-hint :text=\"$Bitrix.Loc.getMessage('HINT_PLAIN')\"/>\n\t<bx-hint :html=\"$Bitrix.Loc.getMessage('HINT_PLAIN')\"/>\n\t<bx-hint text=\"Custom position top and light mode\" position=\"top\" :popupOptions=\"{darkMode: false}\"/>\n*/\n\nimport {BitrixVue} from 'ui.vue';\n\nBitrixVue.component('bx-hint',\n{\n\tprops:\n\t{\n\t\ttext: { default: '' },\n\t\thtml: { default: '' },\n\t\tposition: { default: 'bottom' },\n\t\tpopupOptions:\n\t\t{\n\t\t\tdefault() {\n\t\t\t\treturn {}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"ui-hint\" v-bx-hint=\"{text, html, position, popupOptions}\" data-hint-init=\"vue\">\n\t\t\t<span class=\"ui-hint-icon\"/>\n\t\t</span>\n\t`\n});"],"names":["BitrixVue","directive","bind","element","bindings","Event","TooltipManager","show","hide","Tooltip","popup","elements","close","popupOptions","text","Type","isObject","value","Text","encode","html","position","bindOptions","isUndefined","dataset","hintHtml","bindElement","id","darkMode","content","Tag","render","innerHTML","autoHide","cacheable","Popup","component","props","template"],"mappings":"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"}