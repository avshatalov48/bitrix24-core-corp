{"version":3,"file":"hint.bundle.js","sources":["../src/directive.js","../src/component.js"],"sourcesContent":["/**\n * Hint Vue directive\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2021 Bitrix\n */\n\n/*\n\t<span v-bx-hint=\"$Bitrix.Loc.getMessage('HINT_HTML')\" data-hint-html>Html code</span>\n\t<span v-bx-hint=\"{text: 'Text node'}\">Plain text</span>\n\t<span v-bx-hint=\"{html: '<b>Html</b> code'}\">Html code</span>\n\t<span v-bx-hint=\"{text: 'Custom position top and light mode', position: 'top', popupOptions: {darkMode: false}}\">Text top on light panel</span>\n*/\n\nimport {BitrixVue} from 'ui.vue';\nimport {Text, Tag, Event, Type} from 'main.core';\nimport {Popup, PopupOptions} from \"main.popup\";\nimport 'ui.hint';\n\nBitrixVue.directive('bx-hint',\n{\n\tbind(element: HTMLElement, bindings)\n\t{\n\t\tEvent.bind(element, 'mouseenter', () => TooltipManager.show(element, bindings));\n\t\tEvent.bind(element, 'mouseleave', () => TooltipManager.hide());\n\t}\n});\n\nclass Tooltip\n{\n\tconstructor()\n\t{\n\t\tthis.popup = null;\n\t\tthis.elements\n\t}\n\n\tshow(\n\t\telement: HTMLElement,\n\t\tbindings: Object = {}\n\t)\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tlet popupOptions: PopupOptions = {};\n\n\t\tlet text;\n\t\tif (Type.isObject(bindings.value))\n\t\t{\n\t\t\tif (bindings.value.text)\n\t\t\t{\n\t\t\t\ttext = Text.encode(bindings.value.text);\n\t\t\t}\n\t\t\telse if (bindings.value.html)\n\t\t\t{\n\t\t\t\ttext = bindings.value.html;\n\t\t\t}\n\n\t\t\tif (Type.isObject(bindings.value.popupOptions))\n\t\t\t{\n\t\t\t\tpopupOptions = bindings.value.popupOptions;\n\t\t\t}\n\n\t\t\tif (bindings.value.position === 'top')\n\t\t\t{\n\t\t\t\tif (!Type.isObject(popupOptions.bindOptions))\n\t\t\t\t{\n\t\t\t\t\tpopupOptions.bindOptions = {};\n\t\t\t\t}\n\n\t\t\t\tpopupOptions.bindOptions.position = 'top';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttext = bindings.value;\n\t\t\tif (Type.isUndefined(element.dataset.hintHtml))\n\t\t\t{\n\t\t\t\ttext = Text.encode(text);\n\t\t\t}\n\t\t}\n\n\t\tpopupOptions.bindElement = element;\n\n\t\tif (Type.isUndefined(popupOptions.id))\n\t\t{\n\t\t\tpopupOptions.id = 'bx-vue-hint';\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.darkMode))\n\t\t{\n\t\t\tpopupOptions.darkMode = true;\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.content))\n\t\t{\n\t\t\tconst content = Tag.render`<span class='ui-hint-content'></span>`;\n\t\t\tcontent.innerHTML = text;\n\t\t\tpopupOptions.content = content;\n\t\t}\n\n\t\tif (Type.isUndefined(popupOptions.autoHide))\n\t\t{\n\t\t\tpopupOptions.autoHide = true;\n\t\t}\n\n\t\tif (!Type.isObject(popupOptions.bindOptions))\n\t\t{\n\t\t\tpopupOptions.bindOptions = {};\n\t\t}\n\t\tif (Type.isUndefined(popupOptions.bindOptions.position))\n\t\t{\n\t\t\tpopupOptions.bindOptions.position = 'bottom';\n\t\t}\n\n\t\tpopupOptions.cacheable = false;\n\n\t\tthis.popup = new Popup(popupOptions);\n\t\tthis.popup.show();\n\t}\n\n\thide()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\t}\n}\n\nconst TooltipManager = new Tooltip;","/**\n * Hint Vue component\n *\n * @package bitrix\n * @subpackage ui\n * @copyright 2001-2021 Bitrix\n */\n\nimport \"./directive\";\n\n/*\n\t<bx-hint :text=\"$Bitrix.Loc.getMessage('HINT_PLAIN')\"/>\n\t<bx-hint :html=\"$Bitrix.Loc.getMessage('HINT_PLAIN')\"/>\n\t<bx-hint text=\"Custom position top and light mode\" position=\"top\" :popupOptions=\"{darkMode: false}\"/>\n*/\n\nimport {BitrixVue} from 'ui.vue';\n\nBitrixVue.component('bx-hint',\n{\n\tprops:\n\t{\n\t\ttext: { default: '' },\n\t\thtml: { default: '' },\n\t\tposition: { default: 'bottom' },\n\t\tpopupOptions:\n\t\t{\n\t\t\tdefault() {\n\t\t\t\treturn {}\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<span class=\"ui-hint\" v-bx-hint=\"{text, html, position, popupOptions}\" data-hint-init=\"vue\">\n\t\t\t<span class=\"ui-hint-icon\"/>\n\t\t</span>\n\t`\n});"],"names":["BitrixVue","directive","bind","element","bindings","Event","TooltipManager","show","hide","Tooltip","popup","elements","close","popupOptions","text","Type","isObject","value","Text","encode","html","position","bindOptions","isUndefined","dataset","hintHtml","bindElement","id","darkMode","content","Tag","render","innerHTML","autoHide","cacheable","Popup","component","props","default","template"],"mappings":"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"}