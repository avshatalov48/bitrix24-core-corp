{"version":3,"file":"userfield.bundle.js","sources":["../src/userfield.js"],"sourcesContent":["import {Text, Type, Loc, ajax as Ajax} from 'main.core';\n\ndeclare type UserFieldData = {\n\tid: ?number,\n\tfieldName: string,\n\tdetailUrl: ?string,\n\tenum: ?Array,\n\tentityId: string,\n\txmlId: ?string,\n\tsort: number,\n\tmandatory: string,\n\tshowFilter: string,\n\tisSearchable: string,\n\tsettings: ?{},\n};\n\nclass UserField\n{\n\tdata;\n\tlanguageId;\n\tmoduleId;\n\tprogress;\n\tdeleted;\n\n\tconstructor(data: UserFieldData, params: ?{\n\t\tlanguageId: string,\n\t\tmoduleId: string,\n\t})\n\t{\n\t\tthis.progress = false;\n\t\tthis.deleted = false;\n\t\tthis.setData(data);\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\tif(Type.isString(params.languageId))\n\t\t\t{\n\t\t\t\tthis.setLanguageId(params.languageId);\n\t\t\t}\n\t\t\tthis.moduleId = params.moduleId;\n\t\t}\n\t\tthis.actions = {\n\t\t\tget: 'main.userFieldConfig.get',\n\t\t\tadd: 'main.userFieldConfig.add',\n\t\t\tupdate: 'main.userFieldConfig.update',\n\t\t\tdelete: 'main.userFieldConfig.delete',\n\t\t}\n\t}\n\t\n\tload(): Promise<UserField,string[]>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst errors = [];\n\n\t\t\tif(this.progress)\n\t\t\t{\n\t\t\t\terrors.push('Another action is in progress');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.isSaved())\n\t\t\t{\n\t\t\t\terrors.push('Cant load UserField without id');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tconst action = this.actions.get;\n\t\t\tif(!Type.isString(action) || action.length <= 0)\n\t\t\t{\n\t\t\t\terrors.push('UserField load action is not specified');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.progress = true;\n\t\t\tAjax.runAction(action, {\n\t\t\t\tdata: {\n\t\t\t\t\tid: this.getId(),\n\t\t\t\t\tmoduleId: this.moduleId,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tthis.progress = false;\n\t\t\t\tthis.setData(response.data.field);\n\t\t\t\tresolve(response);\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.progress = false;\n\t\t\t\tresponse.errors.forEach(({message}) => {\n\t\t\t\t\terrors.push(message);\n\t\t\t\t});\n\t\t\t\treject(errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tsave(): Promise<UserField,string[]>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst errors = [];\n\n\t\t\tif(this.progress)\n\t\t\t{\n\t\t\t\terrors.push('Another action is in progress');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet action;\n\t\t\tlet data;\n\t\t\tif(this.isSaved())\n\t\t\t{\n\t\t\t\taction = this.actions.update;\n\t\t\t\tdata = {\n\t\t\t\t\tid: this.getId(),\n\t\t\t\t\tfield: this.getData(),\n\t\t\t\t\tmoduleId: this.moduleId,\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\taction = this.actions.add;\n\t\t\t\tdata = {\n\t\t\t\t\tfield: this.getData(),\n\t\t\t\t\tmoduleId: this.moduleId,\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!Type.isString(action) || action.length <= 0)\n\t\t\t{\n\t\t\t\terrors.push('UserField action is not specified');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.progress = true;\n\t\t\tAjax.runAction(action, {\n\t\t\t\tdata,\n\t\t\t}).then((response) => {\n\t\t\t\tthis.progress = false;\n\t\t\t\tthis.setData(response.data.field);\n\t\t\t\tresolve(response);\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.progress = false;\n\t\t\t\tresponse.errors.forEach(({message}) => {\n\t\t\t\t\tif(Type.isPlainObject(message) && message.text)\n\t\t\t\t\t{\n\t\t\t\t\t\terrors.push(message.text);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\terrors.push(message);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treject(errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tdelete(): Promise<UserField,string[]>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tconst errors = [];\n\n\t\t\tif(this.progress)\n\t\t\t{\n\t\t\t\terrors.push('Another action is in progress');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.isSaved())\n\t\t\t{\n\t\t\t\terrors.push('Cant delete UserField without id');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst action = this.actions.delete;\n\t\t\tif(!Type.isString(action) || action.length <= 0)\n\t\t\t{\n\t\t\t\terrors.push('UserField action is not specified');\n\t\t\t\treject(errors);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.progress = true;\n\t\t\tAjax.runAction(action, {\n\t\t\t\tdata: {\n\t\t\t\t\tid: this.getId(),\n\t\t\t\t\tmoduleId: this.moduleId,\n\t\t\t\t},\n\t\t\t}).then(() => {\n\t\t\t\tthis.deleted = true;\n\t\t\t\tthis.progress = false;\n\t\t\t\tresolve();\n\t\t\t}).catch((response) => {\n\t\t\t\tthis.progress = false;\n\t\t\t\tresponse.errors.forEach(({message}) => {\n\t\t\t\t\terrors.push(message);\n\t\t\t\t});\n\t\t\t\treject(errors);\n\t\t\t});\n\t\t});\n\t}\n\n\tsetLanguageId(languageId: string): this\n\t{\n\t\tthis.languageId = languageId;\n\n\t\treturn this;\n\t}\n\n\tsetModuleId(moduleId: string): this\n\t{\n\t\tthis.moduleId = moduleId;\n\n\t\treturn this;\n\t}\n\n\tgetLanguageId(): string\n\t{\n\t\tif(!this.languageId)\n\t\t{\n\t\t\treturn Loc.getMessage('LANGUAGE_ID');\n\t\t}\n\n\t\treturn this.languageId;\n\t}\n\n\tgetId(): number\n\t{\n\t\treturn Text.toInteger(this.data.id);\n\t}\n\n\tisSaved(): boolean\n\t{\n\t\treturn (this.getId() > 0);\n\t}\n\n\tsetData(data: UserFieldData): this\n\t{\n\t\tthis.data = data;\n\n\t\treturn this;\n\t}\n\n\tgetData(): UserFieldData\n\t{\n\t\treturn this.data;\n\t}\n\n\tgetName(): ?string\n\t{\n\t\treturn this.data.fieldName;\n\t}\n\n\tsetName(name: string): this\n\t{\n\t\tif(this.isSaved())\n\t\t{\n\t\t\tconsole.error('Changing name is not available on saved UserField');\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.data.fieldName = name;\n\n\t\treturn this;\n\t}\n\n\tgetEntityId(): string\n\t{\n\t\treturn this.data.entityId;\n\t}\n\n\tgetUserTypeId(): string\n\t{\n\t\treturn this.data.userTypeId;\n\t}\n\n\tsetUserTypeId(userTypeId: string): this\n\t{\n\t\tif(this.isSaved())\n\t\t{\n\t\t\tconsole.error('Changing userTypeId is not available on saved UserField');\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.data.userTypeId = userTypeId;\n\n\t\treturn this;\n\t}\n\n\tgetEnumeration(): ?Array\n\t{\n\t\tif(!Type.isArray(this.data.enum))\n\t\t{\n\t\t\tthis.data.enum = [];\n\t\t}\n\n\t\treturn this.data.enum;\n\t}\n\n\tsetEnumeration(items: Array): this\n\t{\n\t\tthis.data.enum = items;\n\n\t\treturn this;\n\t}\n\n\tstatic getTitleFieldNames(): Array\n\t{\n\t\treturn [\n\t\t\t'editFormLabel',\n\t\t\t'listColumnLabel',\n\t\t\t'listFilterLabel',\n\t\t];\n\t}\n\n\tgetTitle(): string\n\t{\n\t\tconst titleFieldNames = UserField.getTitleFieldNames();\n\t\tconst titleFieldsCount = titleFieldNames.length;\n\t\tconst languageId = this.getLanguageId();\n\n\t\tfor(let index = 0; index < titleFieldsCount; index++)\n\t\t{\n\t\t\tif(\n\t\t\t\tthis.data[titleFieldNames[index]]\n\t\t\t\t&& Type.isString(this.data[titleFieldNames[index]][languageId])\n\t\t\t\t&& this.data[titleFieldNames[index]][languageId].length > 0\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.data[titleFieldNames[index]][languageId];\n\t\t\t}\n\t\t}\n\n\t\treturn this.getName();\n\t}\n\n\tsetTitle(title: string, languageId: ?string): this\n\t{\n\t\tif(Type.isString(title) && title.length > 0)\n\t\t{\n\t\t\tif(!languageId)\n\t\t\t{\n\t\t\t\tlanguageId = this.getLanguageId();\n\t\t\t}\n\t\t\tif(!this.data['editFormLabel'])\n\t\t\t{\n\t\t\t\tthis.data['editFormLabel'] = {};\n\t\t\t}\n\t\t\tthis.data['editFormLabel'][languageId] = title;\n\t\t\tif(this.getUserTypeId() === 'boolean')\n\t\t\t{\n\t\t\t\tif(!this.data.settings)\n\t\t\t\t{\n\t\t\t\t\tthis.data.settings = {};\n\t\t\t\t}\n\t\t\t\tthis.data.settings.LABEL_CHECKBOX = title;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tisMultiple(): boolean\n\t{\n\t\treturn (this.data.multiple === 'Y');\n\t}\n\n\tisMandatory(): boolean\n\t{\n\t\treturn (this.data.mandatory === 'Y');\n\t}\n\n\tsetIsMandatory(mandatory: boolean): this\n\t{\n\t\tthis.data.mandatory = (Text.toBoolean(mandatory) ? 'Y' : 'N');\n\t}\n\n\tsetIsMultiple(isMultiple: boolean|string): this\n\t{\n\t\tif(this.isSaved())\n\t\t{\n\t\t\tconsole.error('Changing multiple is not available on saved UserField');\n\t\t\treturn this;\n\t\t}\n\n\t\tthis.data.multiple = (Text.toBoolean(isMultiple) === true ? 'Y' : 'N');\n\n\t\treturn this;\n\t}\n\n\tgetDetailUrl(): ?string\n\t{\n\t\treturn this.data.detailUrl;\n\t}\n\n\tisDeleted(): boolean\n\t{\n\t\treturn this.deleted;\n\t}\n\n\tserialize(): string\n\t{\n\t\treturn JSON.stringify({\n\t\t\tdata: this.data,\n\t\t\tlanguageId: this.languageId,\n\t\t\tmoduleId: this.moduleId,\n\t\t\tprogress: this.progress,\n\t\t\tdeleted: this.deleted,\n\t\t});\n\t}\n\n\tstatic unserialize(serializedData: string): UserField\n\t{\n\t\tconst serializedUserField = JSON.parse(serializedData);\n\t\tconst userField = new UserField(serializedUserField.data, {\n\t\t\tlanguageId: serializedUserField.languageId,\n\t\t\tmoduleId: serializedUserField.moduleId,\n\t\t});\n\n\t\tuserField.progress = serializedUserField.progress;\n\t\tuserField.deleted = serializedUserField.deleted;\n\n\t\treturn userField;\n\t}\n}\n\nexport {UserField};"],"names":["UserField","data","params","progress","deleted","setData","Type","isPlainObject","isString","languageId","setLanguageId","moduleId","actions","get","add","update","Promise","resolve","reject","errors","push","isSaved","action","length","Ajax","runAction","id","getId","then","response","field","forEach","message","getData","text","Loc","getMessage","Text","toInteger","fieldName","name","console","error","entityId","userTypeId","isArray","items","titleFieldNames","getTitleFieldNames","titleFieldsCount","getLanguageId","index","getName","title","getUserTypeId","settings","LABEL_CHECKBOX","multiple","mandatory","toBoolean","isMultiple","detailUrl","JSON","stringify","serializedData","serializedUserField","parse","userField"],"mappings":"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"}