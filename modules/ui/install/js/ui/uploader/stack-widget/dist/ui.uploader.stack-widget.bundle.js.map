{"version":3,"file":"ui.uploader.stack-widget.bundle.js","sources":["../src/stack-widget-size.js","../src/components/stack-upload.js","../src/components/stack-load.js","../src/components/stack-preview.js","../src/components/stack-drop-area.js","../src/components/stack-widget-component.js","../src/stack-widget.js"],"sourcesContent":["export const StackWidgetSize = {\n\tLARGE: 'large',\n\tMEDIUM: 'medium',\n\tSMALL: 'small',\n\tTINY: 'tiny',\n};","import { Loc } from 'main.core';\nimport { UploadLoader } from 'ui.uploader.tile-widget';\nimport { StackWidgetSize } from '../stack-widget-size';\n\nconst progressSizes = {\n\t[StackWidgetSize.LARGE]: { width: 46, lineSize: 5 },\n\t[StackWidgetSize.MEDIUM]: { width: 34, lineSize: 4 },\n\t[StackWidgetSize.SMALL]: { width: 20, lineSize: 3 },\n\t[StackWidgetSize.TINY]: { width: 14, lineSize: 2 },\n};\n\nexport const StackUpload = {\n\tname: 'StackUpload',\n\tinject: ['widgetOptions'],\n\tcomponents: {\n\t\tUploadLoader,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tqueueItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t}\n\t},\n\temits: ['showPopup', 'abortUpload'],\n\tcomputed: {\n\t\tStackWidgetSize: () => StackWidgetSize,\n\t\tuploadFileTitle()\n\t\t{\n\t\t\tif (this.queueItems.length > 1)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('STACK_WIDGET_FILES_UPLOADING');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('STACK_WIDGET_FILE_UPLOADING');\n\t\t\t}\n\t\t},\n\t\tprogress()\n\t\t{\n\t\t\tif (this.queueItems.length === 0)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tconst progress = this.queueItems.reduce((total, item) => {\n\t\t\t\treturn total + item.progress;\n\t\t\t}, 0);\n\n\t\t\treturn Math.floor(progress / this.queueItems.length);\n\t\t},\n\t\tprogressOptions()\n\t\t{\n\t\t\tconst { width, lineSize } = progressSizes[this.widgetOptions.size];\n\n\t\t\treturn {\n\t\t\t\twidth,\n\t\t\t\tlineSize,\n\t\t\t\tprogress: Math.max(this.progress, 10),\n\t\t\t};\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-uploader-stack-upload\" @click=\"$emit('showPopup')\">\n\t\t\t<div class=\"ui-uploader-stack-upload-box\">\n\t\t\t\t<div \n\t\t\t\t\tclass=\"ui-uploader-stack-upload-abort\" \n\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('STACK_WIDGET_ABORT_UPLOAD')\"\n\t\t\t\t\t@click.stop=\"$emit('abortUpload')\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-uploader-stack-upload-content\">\n\t\t\t\t\t<div class=\"ui-uploader-stack-upload-loader\">\n\t\t\t\t\t\t<UploadLoader v-bind=\"progressOptions\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-uploader-stack-upload-progress\">\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"widgetOptions.size === StackWidgetSize.LARGE\"\n\t\t\t\t\t\t\tclass=\"ui-uploader-stack-upload-title\"\n\t\t\t\t\t\t>{{ uploadFileTitle }}</div>\n\t\t\t\t\t\t<div class=\"ui-uploader-stack-upload-percent\">{{ progress }}%</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"queueItems.length === 1 && widgetOptions.size === StackWidgetSize.LARGE\"\n\t\t\t\t\t\t\tclass=\"ui-uploader-stack-upload-stats\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<span class=\"ui-uploader-stack-upload-total\">{{\n\t\t\t\t\t\t\t\tqueueItems.length ? queueItems[0].sizeFormatted : ''\n\t\t\t\t\t\t\t}}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-uploader-stack-upload-menu\"\n\t\t\t\t\t:title=\"$Bitrix.Loc.getMessage('STACK_WIDGET_OPEN_FILE_GALLERY')\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","export const StackLoad = {\n\tname: 'StackLoad',\n\temits: ['showPopup'],\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-uploader-stack-load\" @click=\"$emit('showPopup')\">\n\t\t\t<div class=\"ui-uploader-stack-load-icon\"></div>\n\t\t</div>\n\t`,\n};\n","import { FileStatus } from 'ui.uploader.core';\nimport { FileIcon } from 'ui.uploader.tile-widget';\n\nimport { StackWidgetSize } from '../stack-widget-size';\n\nconst fileIconSizes = {\n\t[StackWidgetSize.LARGE]: 36,\n\t[StackWidgetSize.MEDIUM]: 27,\n\t[StackWidgetSize.SMALL]: 19,\n\t[StackWidgetSize.TINY]: 15,\n}\n\nexport const StackPreview = {\n\tname: 'StackPreview',\n\tinject: ['widgetOptions'],\n\tcomponents: {\n\t\tFileIcon,\n\t},\n\tprops: {\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['showPopup'],\n\tcomputed: {\n\t\tFileStatus: () => FileStatus,\n\t\tSizes: () => StackWidgetSize,\n\t\titem()\n\t\t{\n\t\t\tconst item = this.items.find(item => {\n\t\t\t\treturn item.status !== FileStatus.LOAD_FAILED || item.status !== FileStatus.UPLOAD_FAILED;\n\t\t\t});\n\n\t\t\treturn item || {};\n\t\t},\n\t\tfileIconSize()\n\t\t{\n\t\t\treturn fileIconSizes[this.widgetOptions.size];\n\t\t},\n\t\terrorsCount()\n\t\t{\n\t\t\treturn this.items.reduce((errors, item) => {\n\t\t\t\tif (item.status === FileStatus.LOAD_FAILED || item.status === FileStatus.UPLOAD_FAILED)\n\t\t\t\t{\n\t\t\t\t\treturn errors + 1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn errors;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-uploader-stack-preview\" :class=\"{'--image': item.isImage}\" @click=\"$emit('showPopup')\">\n\t\t\t<div class=\"ui-uploader-stack-preview-box\">\n\t\t\t\t<template v-if=\"item.failed\">\n\t\t\t\t\t<div class=\"ui-uploader-stack-preview-error\"></div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else-if=\"item.previewUrl\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"ui-uploader-stack-preview-image\"\n\t\t\t\t\t\t:class=\"{ '--default': item.previewUrl === null }\"\n\t\t\t\t\t\t:style=\"{ backgroundImage: item.previewUrl !== null ? 'url(' + item.previewUrl + ')' : '' }\">\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"items.length > 1\" class=\"ui-uploader-stack-preview-stats\">\n\t\t\t\t\t\t<span class=\"ui-uploader-stack-preview-total\">{{ items.length }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<template v-if=\"item.name && item.status !== FileStatus.LOADING\">\n\t\t\t\t\t\t<div class=\"ui-uploader-stack-preview-file-icon\">\n\t\t\t\t\t\t\t<FileIcon :name=\"item.extension\" :size=\"fileIconSize\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-if=\"[Sizes.LARGE, Sizes.MEDIUM].includes(widgetOptions.size)\"\n\t\t\t\t\t\t\t:title=\"item.originalName\"\n\t\t\t\t\t\t\tclass=\"ui-uploader-stack-preview-file-name\"\n\t\t\t\t\t\t>{{\n\t\t\t\t\t\t\titems.length > 1\n\t\t\t\t\t\t\t? this.$Bitrix.Loc.getMessage('STACK_WIDGET_FILE_COUNT', { '#count#': items.length })\n\t\t\t\t\t\t\t: item.originalName\n\t\t\t\t\t\t}}</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-if=\"items.length > 1 && [Sizes.SMALL, Sizes.TINY].includes(widgetOptions.size)\"\n\t\t\t\t\t\t\tclass=\"ui-uploader-stack-preview-stats\">\n\t\t\t\t\t\t\t<span class=\"ui-uploader-stack-preview-total\">{{ items.length }}</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<div class=\"ui-uploader-stack-preview-file-default\"></div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tclass=\"ui-uploader-stack-upload-menu\"\n\t\t\t\t:title=\"$Bitrix.Loc.getMessage('STACK_WIDGET_OPEN_FILE_GALLERY')\"\n\t\t\t></div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { StackWidgetSize } from 'ui.uploader.stack-widget';\n\nexport const StackDropArea = {\n\tname: 'StackDropArea',\n\tinject: ['uploader', 'widgetOptions'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisHovering: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\tStackWidgetSize: () => StackWidgetSize,\n\t\tuploadFileTitle(): string\n\t\t{\n\t\t\tif (this.uploader.shouldAcceptOnlyImages())\n\t\t\t{\n\t\t\t\tif (this.uploader.isMultiple())\n\t\t\t\t{\n\t\t\t\t\treturn Loc.getMessage('STACK_WIDGET_UPLOAD_IMAGES');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn Loc.getMessage('STACK_WIDGET_UPLOAD_IMAGE');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.uploader.isMultiple())\n\t\t\t\t{\n\t\t\t\t\treturn Loc.getMessage('STACK_WIDGET_UPLOAD_FILES');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn Loc.getMessage('STACK_WIDGET_UPLOAD_FILE');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdragFileHint(): string\n\t\t{\n\t\t\tif (this.uploader.isMultiple())\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('STACK_WIDGET_DRAG_FILES_HINT');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('STACK_WIDGET_DRAG_FILE_HINT');\n\t\t\t}\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.uploader.assignDropzone(this.$refs.container);\n\t\tthis.uploader.assignBrowse(this.$refs.container);\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"ui-uploader-stack-drop-area\"\n\t\t\tref=\"container\"\n\t\t\t:class=\"{ '--hover': isHovering }\"\n\t\t\t@mouseenter=\"isHovering = true\"\n\t\t\t@mouseleave=\"isHovering = false\"\n\t\t\t@dragleave=\"isHovering = false\"\n\t\t>\n\t\t\t<div class=\"ui-uploader-stack-drop-area-content\">\n\t\t\t\t<div class=\"ui-uploader-stack-drop-area-icon\"></div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"[StackWidgetSize.LARGE, StackWidgetSize.MEDIUM].includes(widgetOptions.size)\"\n\t\t\t\t\tclass=\"ui-uploader-stack-drop-area-title\"\n\t\t\t\t>{{ uploadFileTitle }}</div>\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"widgetOptions.size === StackWidgetSize.LARGE\"\n\t\t\t\t\tclass=\"ui-uploader-stack-drop-area-hint\"\n\t\t\t\t>{{ dragFileHint }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text, Loc } from 'main.core';\nimport { Popup, PopupOptions } from 'main.popup';\nimport { CloseButton } from 'ui.buttons';\n\nimport { FileStatus, FileOrigin, UploaderStatus, VueUploaderComponent } from 'ui.uploader.core';\nimport { TileList, ErrorPopup, DragOverMixin } from 'ui.uploader.tile-widget';\n\nimport { StackUpload } from './stack-upload';\nimport { StackLoad } from './stack-load';\nimport { StackPreview } from './stack-preview';\nimport { StackDropArea } from './stack-drop-area';\n\nimport type { BaseEvent } from 'main.core.events';\n\nconst isItemLoading = item => item.status === FileStatus.LOADING;\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const StackWidgetComponent = {\n\tname: 'StackWidget',\n\textends: VueUploaderComponent,\n\tcomponents: {\n\t\tTileList,\n\t\tErrorPopup,\n\t\tStackUpload,\n\t\tStackLoad,\n\t\tStackPreview,\n\t\tStackDropArea,\n\t},\n\tmixins: [\n\t\tDragOverMixin,\n\t],\n\tdata: () => ({\n\t\tpopupContentId: null,\n\t\tqueueItems: [],\n\t\tenableAnimation: true,\n\t\tdragMode: false,\n\t\tisMounted: false,\n\t}),\n\tcomputed: {\n\t\tcontainerClasses(): Array\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\t'--multiple': this.uploader.isMultiple(),\n\t\t\t\t\t'--only-images': this.uploader.shouldAcceptOnlyImages(),\n\t\t\t\t\t'--many-items': this.items.length > 1,\n\t\t\t\t},\n\t\t\t\t`--${this.widgetOptions.size}`\n\t\t\t];\n\t\t},\n\t\tcurrentComponent()\n\t\t{\n\t\t\tif (this.items.length === 0 || this.dragOver)\n\t\t\t{\n\t\t\t\tif (this.dragOver)\n\t\t\t\t{\n\t\t\t\t\tthis.dragMode = true;\n\t\t\t\t}\n\n\t\t\t\treturn StackDropArea;\n\t\t\t}\n\n\t\t\tif (this.queueItems.length > 0)\n\t\t\t{\n\t\t\t\treturn StackUpload;\n\t\t\t}\n\n\t\t\tif (this.items.some(isItemLoading))\n\t\t\t{\n\t\t\t\treturn StackLoad;\n\t\t\t}\n\n\t\t\treturn StackPreview;\n\t\t},\n\t\tcurrentComponentProps()\n\t\t{\n\t\t\tif (this.currentComponent === StackDropArea || this.currentComponent === StackLoad)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\telse if (this.currentComponent === StackUpload)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\titems: this.items,\n\t\t\t\t\tqueueItems: this.queueItems,\n\t\t\t\t};\n\t\t\t}\n\t\t\telse if (this.currentComponent === StackPreview)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\titems: this.items,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\terror()\n\t\t{\n\t\t\tif (this.uploaderError)\n\t\t\t{\n\t\t\t\treturn this.uploaderError;\n\t\t\t}\n\t\t\telse if (this.errorsCount > 0)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('STACK_WIDGET_FILE_UPLOAD_ERROR');\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t\terrorsCount(): number\n\t\t{\n\t\t\treturn this.items.reduce((errors, item) => {\n\t\t\t\tif (item.status === FileStatus.LOAD_FAILED || item.status === FileStatus.UPLOAD_FAILED)\n\t\t\t\t{\n\t\t\t\t\treturn errors + 1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn errors;\n\t\t\t\t}\n\t\t\t}, 0);\n\t\t},\n\t\terrorPopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.$refs.item,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: 3,\n\t\t\t\tbackground: '#d2000d',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tcontentColor: 'white',\n\t\t\t\tpadding: this.uploaderError === null ? 10 : 20,\n\t\t\t\tcloseIcon: this.uploaderError !== null,\n\t\t\t};\n\t\t},\n\t},\n\twatch: {\n\t\tcurrentComponent(newValue, oldValue): void\n\t\t{\n\t\t\tif (this.dragOver)\n\t\t\t{\n\t\t\t\tthis.enableAnimation = false;\n\t\t\t}\n\t\t\telse if (oldValue === StackDropArea && this.dragMode)\n\t\t\t{\n\t\t\t\tthis.enableAnimation = false;\n\t\t\t}\n\t\t\telse if (oldValue === StackPreview)\n\t\t\t{\n\t\t\t\tthis.enableAnimation = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.dragMode = false;\n\t\t\t\tthis.enableAnimation = true;\n\t\t\t}\n\t\t},\n\t\titems: {\n\t\t\thandler() {\n\t\t\t\tif (this.items.length === 0 && this.popup)\n\t\t\t\t{\n\t\t\t\t\tthis.popup.close();\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeep: true,\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.popup = null;\n\n\t\tthis.adapter.subscribe('Uploader:onUploadStart', () => {\n\t\t\tthis.items.forEach(item => {\n\t\t\t\tif (item.origin === FileOrigin.CLIENT && item.queued !== true)\n\t\t\t\t{\n\t\t\t\t\titem.queued = true;\n\t\t\t\t\tthis.queueItems.push(item);\n\t\t\t\t}\n\t\t\t})\n\t\t});\n\n\t\tthis.adapter.subscribe('Uploader:onUploadComplete', () => {\n\t\t\tthis.queueItems = [];\n\t\t});\n\n\t\tthis.adapter.subscribe('Item:onAdd', (event: BaseEvent) => {\n\t\t\tthis.uploaderError = null;\n\t\t\tif (this.uploader.getStatus() === UploaderStatus.STARTED)\n\t\t\t{\n\t\t\t\tconst item = event.getData().item;\n\t\t\t\titem.queued = true;\n\t\t\t\tthis.queueItems.push(event.getData().item);\n\t\t\t}\n\t\t});\n\n\t\tthis.adapter.subscribe('Item:onRemove', (event: BaseEvent) => {\n\t\t\tthis.uploaderError = null;\n\t\t\tconst item = event.getData().item;\n\t\t\tconst position = this.queueItems.indexOf(item);\n\t\t\tif (position >= 0)\n\t\t\t{\n\t\t\t\tthis.queueItems.splice(position, 1);\n\t\t\t}\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.uploader.assignBrowse(this.$refs['add-button']);\n\t\tthis.isMounted = true;\n\t},\n\tmethods: {\n\t\tshowPopup()\n\t\t{\n\t\t\tif (!this.popup)\n\t\t\t{\n\t\t\t\tconst id = 'stack-uploader-' + Text.getRandom().toLowerCase();\n\t\t\t\tthis.popup = new Popup({\n\t\t\t\t\twidth: 750,\n\t\t\t\t\theight: 400,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\ttitleBar: Loc.getMessage('STACK_WIDGET_POPUP_TITLE'),\n\t\t\t\t\tcontent: `<div id=\"${id}\"></div>`,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tresizable: true,\n\t\t\t\t\tminWidth: 450,\n\t\t\t\t\tminHeight: 300,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\t\tthis.popup = null;\n\t\t\t\t\t\t\tthis.popupContentId = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tbuttons: [\n\t\t\t\t\t\tnew CloseButton({ onclick: () => this.popup.close() }),\n\t\t\t\t\t]\n\t\t\t\t});\n\n\t\t\t\tthis.popupContentId = `#${id}`;\n\t\t\t}\n\n\t\t\tthis.popup.show();\n\t\t},\n\t\tabortUpload()\n\t\t{\n\t\t\tconst items = Array.from(this.queueItems);\n\t\t\tthis.queueItems = [];\n\n\t\t\titems.forEach(item => {\n\t\t\t\tthis.uploader.removeFile(item.id);\n\t\t\t});\n\t\t},\n\t\thandlePopupDestroy(error)\n\t\t{\n\t\t\tif (this.uploaderError === error)\n\t\t\t{\n\t\t\t\tthis.uploaderError = null;\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-uploader-stack-widget\" :class=\"containerClasses\" v-drop>\n\t\t\t<Teleport v-if=\"popupContentId !== null\" :to=\"popupContentId\">\n\t\t\t\t<TileList :items=\"items\" />\n\t\t\t</Teleport>\n\t\t\t<div class=\"ui-uploader-stack-item\" ref=\"item\">\n\t\t\t\t<transition\n\t\t\t\t\t:leave-active-class=\"enableAnimation ? 'ui-uploader-stack-item-leave-active' : ''\" \n\t\t\t\t\t:leave-to-class=\"enableAnimation ? 'ui-uploader-stack-item-leave-to' : ''\" \n\t\t\t\t\tmode=\"out-in\"\n\t\t\t\t>\n\t\t\t\t\t<keep-alive>\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"currentComponent\"\n\t\t\t\t\t\t\tv-bind=\"currentComponentProps\"\n\t\t\t\t\t\t\t@showPopup=\"showPopup\"\n\t\t\t\t\t\t\t@abortUpload=\"abortUpload\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</keep-alive>\n\t\t\t\t</transition>\n\t\t\t</div>\n\t\t\t<div v-if=\"uploader.isMultiple()\" ref=\"add-button\" class=\"ui-uploader-stack-add-btn\"></div>\n\t\t</div>\n\t\t<ErrorPopup\n\t\t\tv-if=\"error !== null && isMounted\"\n\t\t\t:error=\"error\"\n\t\t\t:popup-options=\"errorPopupOptions\"\n\t\t\t@onDestroy=\"handlePopupDestroy\"\n\t\t/>\n\t`\n};","import { Type } from 'main.core';\nimport { UploaderOptions, VueUploaderWidget } from 'ui.uploader.core';\nimport { StackWidgetComponent } from './components/stack-widget-component';\nimport type { StackWidgetOptions } from './stack-widget-options';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport default class StackWidget extends VueUploaderWidget\n{\n\tconstructor(uploaderOptions: UploaderOptions, stackWidgetOptions: StackWidgetOptions)\n\t{\n\t\tconst widgetOptions = Type.isPlainObject(stackWidgetOptions) ? Object.assign({}, stackWidgetOptions) : {};\n\t\tsuper(uploaderOptions, widgetOptions);\n\t}\n\n\tgetRootComponent(): Function\n\t{\n\t\treturn StackWidgetComponent;\n\t}\n}\n"],"names":["StackWidgetSize","LARGE","MEDIUM","SMALL","TINY","progressSizes","width","lineSize","StackUpload","name","inject","components","UploadLoader","props","items","type","Array","required","queueItems","emits","computed","uploadFileTitle","length","Loc","getMessage","progress","reduce","total","item","Math","floor","progressOptions","widgetOptions","size","max","template","StackLoad","fileIconSizes","StackPreview","FileIcon","FileStatus","Sizes","find","status","LOAD_FAILED","UPLOAD_FAILED","fileIconSize","errorsCount","errors","StackDropArea","data","isHovering","uploader","shouldAcceptOnlyImages","isMultiple","dragFileHint","mounted","assignDropzone","$refs","container","assignBrowse","isItemLoading","LOADING","StackWidgetComponent","extends","VueUploaderComponent","TileList","ErrorPopup","mixins","DragOverMixin","popupContentId","enableAnimation","dragMode","isMounted","containerClasses","currentComponent","dragOver","some","currentComponentProps","error","uploaderError","errorPopupOptions","bindElement","bindOptions","position","darkMode","offsetTop","background","contentBackground","contentColor","padding","closeIcon","watch","newValue","oldValue","handler","popup","close","deep","created","adapter","subscribe","forEach","origin","FileOrigin","CLIENT","queued","push","event","getStatus","UploaderStatus","STARTED","getData","indexOf","splice","methods","showPopup","id","Text","getRandom","toLowerCase","Popup","height","draggable","titleBar","content","cacheable","closeByEsc","resizable","minWidth","minHeight","events","onDestroy","buttons","CloseButton","onclick","show","abortUpload","from","removeFile","handlePopupDestroy","StackWidget","VueUploaderWidget","constructor","uploaderOptions","stackWidgetOptions","Type","isPlainObject","Object","assign","getRootComponent"],"mappings":"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"}