{"version":3,"file":"nested-switcher.bundle.js","sources":["../src/nested-switcher-item.js","../src/nested-switcher.js"],"sourcesContent":["import { Dom, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport { SingleChecker } from 'ui.form-elements.view';\nimport { HelpMessage } from 'ui.section';\n\nexport class NestedSwitcherItem\n{\n\t#node: HTMLElement;\n\t#id: string;\n\t#inputName: string;\n\t#title: string;\n\t#switcher: Switcher;\n\t#field: SingleChecker;\n\t#isChecked: boolean;\n\t#settingsPath:? string;\n\t#settingsTitle:? string;\n\t#infoHelperCode:? string;\n\tisDefault: boolean;\n\n\tconstructor(params)\n\t{\n\t\tthis.#id = params.id;\n\t\tthis.#inputName = params.inputName;\n\t\tthis.#title = params.title;\n\t\tthis.#isChecked = params.isChecked;\n\t\tthis.#settingsPath = Type.isString(params.settingsPath) ? params.settingsPath : null;\n\t\tthis.#settingsTitle = Type.isString(params.settingsTitle) ? params.settingsTitle : null;\n\t\tthis.#infoHelperCode = Type.isString(params.infoHelperCode) ? params.infoHelperCode : null;\n\t\tthis.isDefault = Type.isBoolean(params.isDefault) ? params.isDefault : false;\n\t\tthis.getSwitcher();\n\t\tthis.#field = new SingleChecker({\n\t\t\tswitcher: this.getSwitcher(),\n\t\t\tinputName: params.inputName,\n\t\t\tisEnable: !this.isDefault,\n\t\t\thelpMessageProvider: this.getHelpMessageProvider(params.id, this.#switcher.getNode(), params.helpMessage),\n\t\t});\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#node)\n\t\t{\n\t\t\treturn this.#node;\n\t\t}\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div class=\"ui-section__row-tool-selector --tool-selector${this.#isChecked ? ' --active --checked' : ''}\">\n\t\t\t\t<div class=\"ui-section__tools-subgroup_left-wrapper\">\n\t\t\t\t\t<div class=\"ui-section__switcher-row_wrapper\"/>\n\t\t\t\t\t<div class=\"ui-section__row-tool-selector_title\">${this.#title}</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getLink()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#node;\n\t}\n\n\tgetSwitcher(): Switcher\n\t{\n\t\tif (this.#switcher instanceof Switcher)\n\t\t{\n\t\t\treturn this.#switcher;\n\t\t}\n\n\t\tthis.#switcher = this.createSwitcher(this.render().querySelector('.ui-section__switcher-row_wrapper'));\n\n\t\treturn this.#switcher;\n\t}\n\n\tgetField(): SingleChecker\n\t{\n\t\treturn this.#field;\n\t}\n\n\tcreateSwitcher(node: HTMLElement): Switcher\n\t{\n\t\treturn new Switcher({\n\t\t\tinputName: this.#inputName,\n\t\t\tnode: node,\n\t\t\tchecked: this.#isChecked,\n\t\t\tid: this.#id,\n\t\t\tsize: SwitcherSize.extraSmall,\n\t\t\thandlers: {\n\t\t\t\t'checked' : () => { // There is in error in Switcher UI, so we have inversion in event names.\n\t\t\t\t\tDom.removeClass(this.render(), '--active --checked')\n\t\t\t\t\tEventEmitter.emit(this.getSwitcher(), 'inactive');\n\t\t\t\t},\n\t\t\t\t'unchecked' : () => {\n\t\t\t\t\tDom.addClass(this.render(), '--active --checked');\n\t\t\t\t\tEventEmitter.emit(this.getSwitcher(), 'active');\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\t}\n\n\trenderTo(targetNode: HTMLElement): HTMLElement\n\t{\n\t\tif (!Type.isDomNode(targetNode))\n\t\t{\n\t\t\tthrow new Error('Target node must be HTMLElement');\n\t\t}\n\n\t\treturn Dom.append(this.render(), targetNode);\n\t}\n\n\tgetLink(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.#settingsTitle))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isNil(this.#settingsPath))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a target=\"_blank\" data-slider-ignore-autobinding=\"true\" href=\"${this.#settingsPath}\" class=\"ui-section__tools-subgroup-description-link\">${this.#settingsTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\tif (!Type.isNil(this.#infoHelperCode))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"javascript:top.BX.UI.InfoHelper.show('${this.#infoHelperCode}')\" class=\"ui-section__tools-subgroup-description-link\">${this.#settingsTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetHelpMessageProvider(id, node, message: HTMLElement): function\n\t{\n\t\treturn () => {\n\t\t\tconst helpMessagePopup = new HelpMessage(id, node, message);\n\t\t\thelpMessagePopup.getPopup().setOffset({ offsetLeft: 14 });\n\t\t\treturn helpMessagePopup;\n\t\t};\n\t}\n}\n","import { Dom, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { NestedSwitcherItem } from './nested-switcher-item';\nimport { SingleChecker } from 'ui.form-elements.view';\nimport { Section } from 'ui.section';\nimport { Switcher } from 'ui.switcher';\n\nexport type NestedSwitcherOptions = {\n\tlinkTitle?: string,\n\tlink?: string,\n\tisChecked?: boolean,\n\tmainInputName: string,\n\titems?: Array<NestedSwitcherItem>,\n\tinfoHelperCode?: string,\n}\n\nexport class NestedSwitcher extends Section\n{\n\tlinkTitle: ?HTMLElement;\n\tlink: ?HTMLElement;\n\titems: Array<NestedSwitcherItem>;\n\t#mainTool: Switcher;\n\tfield: SingleChecker;\n\tinfoHelperCode: ?string;\n\t#sectionWrapper: ?HTMLElement;\n\n\tconstructor(options: NestedSwitcherOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.linkTitle = Type.isString(options.linkTitle) ? options.linkTitle : null;\n\t\tthis.link = Type.isString(options.link) ? options.link : null;\n\t\tthis.isChecked = Type.isBoolean(options.isChecked) ? options.isChecked : false;\n\t\tthis.items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.isNestedMenu = this.items.length > 0;\n\t\tthis.infoHelperCode = Type.isString(options.infoHelperCode) ? options.infoHelperCode : null;\n\n\t\tif (!Type.isString(options.mainInputName))\n\t\t{\n\t\t\tthrow new Error('Missing required parameter');\n\t\t}\n\n\t\tthis.mainInputName = options.mainInputName;\n\t\tthis.render();\n\t\tthis.items.forEach((item) => {\n\t\t\tthis.append(item.render());\n\t\t});\n\t\tthis.field = new SingleChecker({switcher: this.#mainTool});\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tif (this.#sectionWrapper)\n\t\t{\n\t\t\treturn this.#sectionWrapper;\n\t\t}\n\n\t\tthis.#sectionWrapper = Tag.render`\n\t\t\t<div id=\"${this.id}\" class=\"ui-section__wrapper --tool-selector${this.isChecked ? ' --checked' : ''} ${this.canCollapse ? ' clickable' : ''}\" >\n\t\t\t\t<div class=\"ui-section__header\">\n\t\t\t\t\t<div class=\"ui-section__header-left-wrapper\">\n\t\t\t\t\t\t<span class=\"ui-section__switcher-wrapper\" onclick=\"event.stopPropagation()\"/>\n\t\t\t\t\t\t<span class=\"ui-section__title\">${this.title}</span>\n\t\t\t\t\t\t${this.getMenuIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getLink()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__content ui-section__section-body_inner\">\n\t\t\t\t\t<div class=\"ui-section__row_box\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#mainTool = this.createSwitcher(this.#sectionWrapper.querySelector('.ui-section__switcher-wrapper'));\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.#mainTool,\n\t\t\t'toggled',\n\t\t\t() =>\n\t\t\t{\n\t\t\t\tthis.toggle(this.#mainTool.isChecked());\n\t\t\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\n\t\t\t\tDom[this.#mainTool.isChecked() ? 'addClass' : 'removeClass'](this.#sectionWrapper, '--checked');\n\t\t\t\tthis.items.forEach((item) => item.getSwitcher().check(this.#mainTool.isChecked()));\n\t\t\t}\n\t\t);\n\n\t\tthis.items.forEach(\n\t\t\t(item) => {\n\n\t\t\t\tif (item.isDefault !== true) // if only this item is not required\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(item.getSwitcher(), 'inactive', this.#turnOffUnrequiredTools.bind(this));\n\t\t\t\t}\n\n\t\t\t\tEventEmitter.subscribe(item.getSwitcher(), 'active', this.#turnOnMainAndRequiredTools.bind(this));\n\t\t\t});\n\n\t\treturn this.#sectionWrapper;\n\t}\n\n\t#turnOnMainAndRequiredTools(item)\n\t{\n\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\t\tif (this.#mainTool.isChecked())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#mainTool.check(true, false);\n\t\tthis.toggle(true);\n\t\tDom.addClass(this.#sectionWrapper, '--checked');\n\n\t\tthis.items.forEach((item) => item.isDefault && !item.getSwitcher().isChecked() ? item.getSwitcher().check(true) : null);\n\t}\n\n\t#turnOffUnrequiredTools({target})\n\t{\n\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\t\tif (this.#mainTool.isChecked() !== true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (this.items.some((item) => item.getSwitcher().isChecked()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.#mainTool.check(false, false);\n\t}\n\n\tgetMenuIcon(): HTMLElement\n\t{\n\t\tif (this.isNestedMenu)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-section__collapse-icon ui-icon-set ${this.isOpen ? this.className.arrowTop : this.className.arrowDown} --tool-selector-icon\"></span>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetFields(): Array<SingleChecker>\n\t{\n\t\tlet result = [];\n\t\tresult.push(this.field);\n\t\tthis.items.forEach((item) => {\n\t\t\tresult.push(item.getField());\n\t\t});\n\n\t\treturn result;\n\t}\n\n\tgetLink(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.linkTitle))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isNil(this.link))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a target=\"_blank\" href=\"${this.link}\" class=\"ui-section__header-link ui-section__tools-description-link\" onclick=\"event.stopPropagation()\">${this.linkTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\tif (!Type.isNil(this.infoHelperCode))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"javascript:top.BX.UI.InfoHelper.show('${this.infoHelperCode}')\" class=\"ui-section__header-link ui-section__tools-description-link\" onclick=\"event.stopPropagation()\">${this.linkTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateSwitcher(node: HTMLElement): Switcher\n\t{\n\t\treturn new Switcher({\n\t\t\tinputName: this.mainInputName,\n\t\t\tnode: node,\n\t\t\tchecked: this.isChecked,\n\t\t\tid: this.id,\n\t\t});\n\t}\n}"],"names":["NestedSwitcherItem","params","id","inputName","title","isChecked","Type","isString","settingsPath","settingsTitle","infoHelperCode","isDefault","isBoolean","getSwitcher","SingleChecker","switcher","isEnable","helpMessageProvider","getHelpMessageProvider","getNode","helpMessage","Tag","render","getLink","Switcher","createSwitcher","querySelector","node","checked","size","SwitcherSize","extraSmall","handlers","Dom","removeClass","EventEmitter","emit","addClass","targetNode","isDomNode","Error","append","isNil","message","helpMessagePopup","HelpMessage","getPopup","setOffset","offsetLeft","NestedSwitcher","options","_classPrivateFieldInitSpec","linkTitle","link","items","isArray","isNestedMenu","length","mainInputName","forEach","item","field","canCollapse","getMenuIcon","subscribe","toggle","inputNode","form","dispatchEvent","Event","check","bind","isOpen","className","arrowTop","arrowDown","result","push","getField","Section","target","some"],"mappings":"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"}