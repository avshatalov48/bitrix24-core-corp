{"version":3,"file":"manual.bundle.js","sources":["../src/manual.js"],"sourcesContent":["import {ajax, Type, Tag} from 'main.core';\n\ntype Params = {\n\tmanualCode: string,\n\turlParams: Object,\n\tanalyticsLabel: Object,\n\twidth?: number\n}\n\ntype ResponseInitParams = {\n\tdata: {\n\t\turl: string\n\t}\n}\n\nexport class Manual\n{\n\tconstructor(params: Params): void\n\t{\n\t\tthis.manualCode = Type.isString(params.manualCode) ? params.manualCode : '';\n\t\tthis.width = Type.isNumber(params.width) ? params.width : 1000;\n\t\tthis.urlParams = Type.isPlainObject(params.urlParams) ? params.urlParams : {};\n\t\tthis.analyticsLabel = Type.isPlainObject(params.analyticsLabel) ? params.analyticsLabel : {};\n\n\t\tthis.sidePanelId = 'manual-side-panel-' + this.manualCode;\n\t}\n\n\tstatic show(manualCode: string, urlParams = {}, analyticsLabel = {}): void\n\t{\n\t\tconst manual = new Manual({ manualCode, urlParams, analyticsLabel });\n\n\t\tmanual.open();\n\t}\n\n\topen(): void\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcontentCallback: () => this.createFrame(),\n\t\t\t\twidth: this.width\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateFrame(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'ui.manual.getInitParams',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmanualCode: this.manualCode,\n\t\t\t\t\t\turlParams: this.urlParams\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: this.analyticsLabel\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response: ResponseInitParams) => {\n\t\t\t\t\tresolve(this.renderFrame(response.data.url));\n\t\t\t\t});\n\t\t});\n\t}\n\n\trenderFrame(url: string): HTMLElement\n\t{\n\t\tconst frameStyles = 'position: absolute; left: 0; top: 0; padding: 0;'\n\t\t\t+ ' border: none; margin: 0; width: 100%; height: 100%;';\n\n\t\treturn Tag.render`<iframe style=\"${frameStyles}\" src=\"${url}\"></iframe>`;\n\t}\n\n\tgetSidePanel(): BX.SidePanel.Slider\n\t{\n\t\treturn BX.SidePanel.Instance.getSlider(this.sidePanelId);\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.getSidePanel() && this.getSidePanel().isOpen();\n\t}\n}"],"names":["Manual","params","manualCode","Type","isString","width","isNumber","urlParams","isPlainObject","analyticsLabel","sidePanelId","isOpen","BX","SidePanel","Instance","open","contentCallback","createFrame","Promise","resolve","reject","ajax","runAction","data","then","response","renderFrame","url","frameStyles","Tag","render","getSlider","getSidePanel","manual"],"mappings":";;;;;;KAeaA,MAAb;CAEC,kBAAYC,MAAZ,EACA;CAAA;CACC,SAAKC,UAAL,GAAkBC,cAAI,CAACC,QAAL,CAAcH,MAAM,CAACC,UAArB,IAAmCD,MAAM,CAACC,UAA1C,GAAuD,EAAzE;CACA,SAAKG,KAAL,GAAaF,cAAI,CAACG,QAAL,CAAcL,MAAM,CAACI,KAArB,IAA8BJ,MAAM,CAACI,KAArC,GAA6C,IAA1D;CACA,SAAKE,SAAL,GAAiBJ,cAAI,CAACK,aAAL,CAAmBP,MAAM,CAACM,SAA1B,IAAuCN,MAAM,CAACM,SAA9C,GAA0D,EAA3E;CACA,SAAKE,cAAL,GAAsBN,cAAI,CAACK,aAAL,CAAmBP,MAAM,CAACQ,cAA1B,IAA4CR,MAAM,CAACQ,cAAnD,GAAoE,EAA1F;CAEA,SAAKC,WAAL,GAAmB,uBAAuB,KAAKR,UAA/C;CACA;;CAVF;CAAA;CAAA,2BAoBC;CAAA;;CACC,UAAI,KAAKS,MAAL,EAAJ,EACA;CACC;CACA;;CAEDC,MAAAA,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CACC,KAAKL,WADN,EAEC;CACCM,QAAAA,eAAe,EAAE;CAAA,iBAAM,KAAI,CAACC,WAAL,EAAN;CAAA,SADlB;CAECZ,QAAAA,KAAK,EAAE,KAAKA;CAFb,OAFD;CAOA;CAjCF;CAAA;CAAA,kCAoCC;CAAA;;CACC,aAAO,IAAIa,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;CACvCC,QAAAA,cAAI,CAACC,SAAL,CACC,yBADD,EAEC;CACCC,UAAAA,IAAI,EAAE;CACLrB,YAAAA,UAAU,EAAE,MAAI,CAACA,UADZ;CAELK,YAAAA,SAAS,EAAE,MAAI,CAACA;CAFX,WADP;CAKCE,UAAAA,cAAc,EAAE,MAAI,CAACA;CALtB,SAFD,EAUEe,IAVF,CAUO,UAACC,QAAD,EAAkC;CACvCN,UAAAA,OAAO,CAAC,MAAI,CAACO,WAAL,CAAiBD,QAAQ,CAACF,IAAT,CAAcI,GAA/B,CAAD,CAAP;CACA,SAZF;CAaA,OAdM,CAAP;CAeA;CApDF;CAAA;CAAA,gCAsDaA,GAtDb,EAuDC;CACC,UAAMC,WAAW,GAAG,qDACjB,sDADH;CAGA,aAAOC,aAAG,CAACC,MAAX,+HAAmCF,WAAnC,EAAwDD,GAAxD;CACA;CA5DF;CAAA;CAAA,mCA+DC;CACC,aAAOf,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBiB,SAAtB,CAAgC,KAAKrB,WAArC,CAAP;CACA;CAjEF;CAAA;CAAA,6BAoEC;CACC,aAAO,KAAKsB,YAAL,MAAuB,KAAKA,YAAL,GAAoBrB,MAApB,EAA9B;CACA;CAtEF;CAAA;CAAA,yBAYaT,UAZb,EAaC;CAAA,UADgCK,SAChC,uEAD4C,EAC5C;CAAA,UADgDE,cAChD,uEADiE,EACjE;CACC,UAAMwB,MAAM,GAAG,IAAIjC,MAAJ,CAAW;CAAEE,QAAAA,UAAU,EAAVA,UAAF;CAAcK,QAAAA,SAAS,EAATA,SAAd;CAAyBE,QAAAA,cAAc,EAAdA;CAAzB,OAAX,CAAf;CAEAwB,MAAAA,MAAM,CAAClB,IAAP;CACA;CAjBF;CAAA;CAAA;;;;;;;;"}