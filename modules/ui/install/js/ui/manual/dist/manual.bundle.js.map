{"version":3,"file":"manual.bundle.js","sources":["../src/manual.js"],"sourcesContent":["import {ajax, Type, Tag} from 'main.core';\n\ntype Params = {\n\tmanualCode: string,\n\turlParams: Object,\n\tanalyticsLabel: Object,\n\twidth?: number\n}\n\ntype ResponseInitParams = {\n\tdata: {\n\t\turl: string\n\t}\n}\n\nexport class Manual\n{\n\tconstructor(params: Params): void\n\t{\n\t\tthis.manualCode = Type.isString(params.manualCode) ? params.manualCode : '';\n\t\tthis.width = Type.isNumber(params.width) ? params.width : 1000;\n\t\tthis.urlParams = Type.isPlainObject(params.urlParams) ? params.urlParams : {};\n\t\tthis.analyticsLabel = Type.isPlainObject(params.analyticsLabel) ? params.analyticsLabel : {};\n\n\t\tthis.sidePanelId = 'manual-side-panel-' + this.manualCode;\n\t}\n\n\tstatic show(manualCode: string, urlParams = {}, analyticsLabel = {}): void\n\t{\n\t\tconst manual = new Manual({ manualCode, urlParams, analyticsLabel });\n\n\t\tmanual.open();\n\t}\n\n\topen(): void\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcontentCallback: () => this.createFrame(),\n\t\t\t\twidth: this.width\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateFrame(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'ui.manual.getInitParams',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmanualCode: this.manualCode,\n\t\t\t\t\t\turlParams: this.urlParams\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: this.analyticsLabel\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response: ResponseInitParams) => {\n\t\t\t\t\tresolve(this.renderFrame(response.data.url));\n\t\t\t\t});\n\t\t});\n\t}\n\n\trenderFrame(url: string): HTMLElement\n\t{\n\t\tconst frameStyles = 'position: absolute; left: 0; top: 0; padding: 0;'\n\t\t\t+ ' border: none; margin: 0; width: 100%; height: 100%;';\n\n\t\treturn Tag.render`<iframe style=\"${frameStyles}\" src=\"${url}\"></iframe>`;\n\t}\n\n\tgetSidePanel(): BX.SidePanel.Slider\n\t{\n\t\treturn BX.SidePanel.Instance.getSlider(this.sidePanelId);\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.getSidePanel() && this.getSidePanel().isOpen();\n\t}\n}"],"names":["Manual","constructor","params","manualCode","Type","isString","width","isNumber","urlParams","isPlainObject","analyticsLabel","sidePanelId","show","manual","open","isOpen","BX","SidePanel","Instance","contentCallback","createFrame","Promise","resolve","reject","ajax","runAction","data","then","response","renderFrame","url","frameStyles","Tag","render","getSidePanel","getSlider"],"mappings":";;;;;;;;AAAA,CAeO,MAAMA,MAAM,CACnB;GACCC,WAAW,CAACC,MAAc,EAC1B;KACC,IAAI,CAACC,UAAU,GAAGC,cAAI,CAACC,QAAQ,CAACH,MAAM,CAACC,UAAU,CAAC,GAAGD,MAAM,CAACC,UAAU,GAAG,EAAE;KAC3E,IAAI,CAACG,KAAK,GAAGF,cAAI,CAACG,QAAQ,CAACL,MAAM,CAACI,KAAK,CAAC,GAAGJ,MAAM,CAACI,KAAK,GAAG,IAAI;KAC9D,IAAI,CAACE,SAAS,GAAGJ,cAAI,CAACK,aAAa,CAACP,MAAM,CAACM,SAAS,CAAC,GAAGN,MAAM,CAACM,SAAS,GAAG,EAAE;KAC7E,IAAI,CAACE,cAAc,GAAGN,cAAI,CAACK,aAAa,CAACP,MAAM,CAACQ,cAAc,CAAC,GAAGR,MAAM,CAACQ,cAAc,GAAG,EAAE;KAE5F,IAAI,CAACC,WAAW,GAAG,oBAAoB,GAAG,IAAI,CAACR,UAAU;;GAG1D,OAAOS,IAAI,CAACT,UAAkB,EAAEK,SAAS,GAAG,EAAE,EAAEE,cAAc,GAAG,EAAE,EACnE;KACC,MAAMG,MAAM,GAAG,IAAIb,MAAM,CAAC;OAAEG,UAAU;OAAEK,SAAS;OAAEE;MAAgB,CAAC;KAEpEG,MAAM,CAACC,IAAI,EAAE;;GAGdA,IAAI,GACJ;KACC,IAAI,IAAI,CAACC,MAAM,EAAE,EACjB;OACC;;KAGDC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACJ,IAAI,CACzB,IAAI,CAACH,WAAW,EAChB;OACCQ,eAAe,EAAE,MAAM,IAAI,CAACC,WAAW,EAAE;OACzCd,KAAK,EAAE,IAAI,CAACA;MACZ,CACD;;GAGFc,WAAW,GACX;KACC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;OACvCC,cAAI,CAACC,SAAS,CACb,yBAAyB,EACzB;SACCC,IAAI,EAAE;WACLvB,UAAU,EAAE,IAAI,CAACA,UAAU;WAC3BK,SAAS,EAAE,IAAI,CAACA;UAChB;SACDE,cAAc,EAAE,IAAI,CAACA;QACrB,CACD,CACCiB,IAAI,CAAEC,QAA4B,IAAK;SACvCN,OAAO,CAAC,IAAI,CAACO,WAAW,CAACD,QAAQ,CAACF,IAAI,CAACI,GAAG,CAAC,CAAC;QAC5C,CAAC;MACH,CAAC;;GAGHD,WAAW,CAACC,GAAW,EACvB;KACC,MAAMC,WAAW,GAAG,kDAAkD,GACnE,sDAAsD;KAEzD,OAAOC,aAAG,CAACC,MAAM,cAAC,kBAAe,CAAc,UAAO,CAAM,aAAW,GAApCF,WAAW,EAAUD,GAAG;;GAG5DI,YAAY,GACZ;KACC,OAAOlB,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACiB,SAAS,CAAC,IAAI,CAACxB,WAAW,CAAC;;GAGzDI,MAAM,GACN;KACC,OAAO,IAAI,CAACmB,YAAY,EAAE,IAAI,IAAI,CAACA,YAAY,EAAE,CAACnB,MAAM,EAAE;;CAE5D;;;;;;;;"}