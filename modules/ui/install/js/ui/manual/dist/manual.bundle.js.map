{"version":3,"file":"manual.bundle.js","sources":["../src/manual.js"],"sourcesContent":["import {ajax, Type, Tag} from 'main.core';\n\ntype Params = {\n\tmanualCode: string,\n\turlParams: Object,\n\tanalyticsLabel: Object,\n\twidth?: number\n}\n\ntype ResponseInitParams = {\n\tdata: {\n\t\turl: string\n\t}\n}\n\nexport class Manual\n{\n\tconstructor(params: Params): void\n\t{\n\t\tthis.manualCode = Type.isString(params.manualCode) ? params.manualCode : '';\n\t\tthis.width = Type.isNumber(params.width) ? params.width : 1000;\n\t\tthis.urlParams = Type.isPlainObject(params.urlParams) ? params.urlParams : {};\n\t\tthis.analyticsLabel = Type.isPlainObject(params.analyticsLabel) ? params.analyticsLabel : {};\n\n\t\tthis.sidePanelId = 'manual-side-panel-' + this.manualCode;\n\t}\n\n\tstatic show(manualCode: string, urlParams = {}, analyticsLabel = {}): void\n\t{\n\t\tconst manual = new Manual({ manualCode, urlParams, analyticsLabel });\n\n\t\tmanual.open();\n\t}\n\n\topen(): void\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcontentCallback: () => this.createFrame(),\n\t\t\t\twidth: this.width\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateFrame(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax.runAction(\n\t\t\t\t'ui.manual.getInitParams',\n\t\t\t\t{\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tmanualCode: this.manualCode,\n\t\t\t\t\t\turlParams: this.urlParams\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: this.analyticsLabel\n\t\t\t\t}\n\t\t\t)\n\t\t\t\t.then((response: ResponseInitParams) => {\n\t\t\t\t\tresolve(this.renderFrame(response.data.url));\n\t\t\t\t});\n\t\t});\n\t}\n\n\trenderFrame(url: string): HTMLElement\n\t{\n\t\tconst frameStyles = 'position: absolute; left: 0; top: 0; padding: 0;'\n\t\t\t+ ' border: none; margin: 0; width: 100%; height: 100%;';\n\n\t\treturn Tag.render`<iframe style=\"${frameStyles}\" src=\"${url}\"></iframe>`;\n\t}\n\n\tgetSidePanel(): BX.SidePanel.Slider\n\t{\n\t\treturn BX.SidePanel.Instance.getSlider(this.sidePanelId);\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.getSidePanel() && this.getSidePanel().isOpen();\n\t}\n}"],"names":["Manual","params","manualCode","Type","isString","width","isNumber","urlParams","isPlainObject","analyticsLabel","sidePanelId","isOpen","BX","SidePanel","Instance","open","contentCallback","createFrame","Promise","resolve","reject","ajax","runAction","data","then","response","renderFrame","url","frameStyles","Tag","render","getSlider","getSidePanel","manual"],"mappings":";;;;;;;AAAA,KAeaA,MAAM;GAElB,gBAAYC,MAAc,EAC1B;KAAA;KACC,IAAI,CAACC,UAAU,GAAGC,cAAI,CAACC,QAAQ,CAACH,MAAM,CAACC,UAAU,CAAC,GAAGD,MAAM,CAACC,UAAU,GAAG,EAAE;KAC3E,IAAI,CAACG,KAAK,GAAGF,cAAI,CAACG,QAAQ,CAACL,MAAM,CAACI,KAAK,CAAC,GAAGJ,MAAM,CAACI,KAAK,GAAG,IAAI;KAC9D,IAAI,CAACE,SAAS,GAAGJ,cAAI,CAACK,aAAa,CAACP,MAAM,CAACM,SAAS,CAAC,GAAGN,MAAM,CAACM,SAAS,GAAG,EAAE;KAC7E,IAAI,CAACE,cAAc,GAAGN,cAAI,CAACK,aAAa,CAACP,MAAM,CAACQ,cAAc,CAAC,GAAGR,MAAM,CAACQ,cAAc,GAAG,EAAE;KAE5F,IAAI,CAACC,WAAW,GAAG,oBAAoB,GAAG,IAAI,CAACR,UAAU;;GACzD;KAAA;KAAA,uBAUD;OAAA;OACC,IAAI,IAAI,CAACS,MAAM,EAAE,EACjB;SACC;;OAGDC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CACzB,IAAI,CAACL,WAAW,EAChB;SACCM,eAAe,EAAE;WAAA,OAAM,KAAI,CAACC,WAAW,EAAE;;SACzCZ,KAAK,EAAE,IAAI,CAACA;QACZ,CACD;;;KACD;KAAA,8BAGD;OAAA;OACC,OAAO,IAAIa,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvCC,cAAI,CAACC,SAAS,CACb,yBAAyB,EACzB;WACCC,IAAI,EAAE;aACLrB,UAAU,EAAE,MAAI,CAACA,UAAU;aAC3BK,SAAS,EAAE,MAAI,CAACA;YAChB;WACDE,cAAc,EAAE,MAAI,CAACA;UACrB,CACD,CACCe,IAAI,CAAC,UAACC,QAA4B,EAAK;WACvCN,OAAO,CAAC,MAAI,CAACO,WAAW,CAACD,QAAQ,CAACF,IAAI,CAACI,GAAG,CAAC,CAAC;UAC5C,CAAC;QACH,CAAC;;;KACF;KAAA,4BAEWA,GAAW,EACvB;OACC,IAAMC,WAAW,GAAG,kDAAkD,GACnE,sDAAsD;OAEzD,OAAOC,aAAG,CAACC,MAAM,+HAAkBF,WAAW,EAAUD,GAAG;;;KAC3D;KAAA,+BAGD;OACC,OAAOf,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACiB,SAAS,CAAC,IAAI,CAACrB,WAAW,CAAC;;;KACxD;KAAA,yBAGD;OACC,OAAO,IAAI,CAACsB,YAAY,EAAE,IAAI,IAAI,CAACA,YAAY,EAAE,CAACrB,MAAM,EAAE;;;KAC1D;KAAA,qBA1DWT,UAAkB,EAC9B;OAAA,IADgCK,SAAS,uEAAG,EAAE;OAAA,IAAEE,cAAc,uEAAG,EAAE;OAElE,IAAMwB,MAAM,GAAG,IAAIjC,MAAM,CAAC;SAAEE,UAAU,EAAVA,UAAU;SAAEK,SAAS,EAATA,SAAS;SAAEE,cAAc,EAAdA;QAAgB,CAAC;OAEpEwB,MAAM,CAAClB,IAAI,EAAE;;;GACb;CAAA;;;;;;;;"}