{"version":3,"file":"userfieldfactory.bundle.js","sources":["../src/fieldtypes.js","../src/creationmenu.js","../src/enumitem.js","../src/field.js","../src/configurator.js","../src/factory.js"],"sourcesContent":["import {Loc} from 'main.core';\n\nexport const MAX_FIELD_LENGTH = 20;\n\n/**\n * @memberof BX.UI.UserFieldFactory\n */\nexport const FieldTypes = Object.freeze({\n\tstring: 'string',\n\tenumeration: 'enumeration',\n\tdate: 'date',\n\tdatetime: 'datetime',\n\taddress: 'address',\n\turl: 'url',\n\tfile: 'file',\n\tmoney: 'money',\n\tboolean: 'boolean',\n\tdouble: 'double',\n\temployee: 'employee',\n\tcrm: 'crm',\n\tcrmStatus: 'crm_status',\n});\n\nexport const FieldDescriptions = Object.freeze({\n\tstring: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_STRING_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_STRING_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_STRING_LABEL'),\n\t},\n\tenumeration: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_ENUM_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_ENUM_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_ENUMERATION_LABEL'),\n\t},\n\tdatetime: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_DATETIME_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_DATETIME_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_DATETIME_LABEL'),\n\t},\n\taddress: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_ADDRESS_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_ADDRESS_LEGEND\"),\n\t},\n\turl: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_URL_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_URL_LEGEND\"),\n\t},\n\tfile: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_FILE_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_FILE_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_FILE_LABEL'),\n\t},\n\tmoney: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_MONEY_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_MONEY_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_MONEY_LABEL'),\n\t},\n\tboolean: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_BOOLEAN_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_BOOLEAN_LEGEND\"),\n\t},\n\tdouble: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_DOUBLE_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_DOUBLE_LEGEND\"),\n\t\tdefaultTitle: Loc.getMessage('UI_USERFIELD_FACTORY_UF_DOUBLE_LABEL'),\n\t},\n\temployee: {\n\t\ttitle: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_EMPLOYEE_TITLE\"),\n\t\tdescription: Loc.getMessage(\"UI_USERFIELD_FACTORY_UF_EMPLOYEE_LEGEND\"),\n\t},\n});\n\nexport const DefaultData = Object.freeze({\n\tMULTIPLE: 'N',\n\tMANDATORY: 'N',\n\tUSER_TYPE_ID: FieldTypes.string,\n\tSHOW_FILTER: 'E',\n\tSHOW_IN_LIST: 'Y',\n\tSETTINGS: {},\n\tIS_SEARCHABLE: 'N',\n});\n\nexport const DefaultFieldData = Object.freeze({\n\tfile: {\n\t\tSHOW_FILTER: 'N',\n\t\tSHOW_IN_LIST: 'N',\n\t},\n\temployee: {\n\t\tSHOW_FILTER: 'I',\n\t},\n\tcrm: {\n\t\tSHOW_FILTER: 'I',\n\t},\n\tcrm_status: {\n\t\tSHOW_FILTER: 'I',\n\t},\n\tenumeration: {\n\t\tSETTINGS: {\n\t\t\tDISPLAY: 'UI',\n\t\t},\n\t},\n\tdouble: {\n\t\tSETTINGS: {\n\t\t\tPRECISION: 2,\n\t\t},\n\t},\n});","import {Event, Type, Tag} from 'main.core';\nimport {Popup} from 'main.popup';\n\n/**\n * @memberof BX.UI.UserFieldFactory\n */\nexport class CreationMenu\n{\n\tconstructor(id: string, types: Array, params: Object)\n\t{\n\t\tthis.id = id;\n\t\tthis.items = types;\n\t\tthis.params = {};\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\tthis.params = params;\n\t\t}\n\t}\n\n\tgetId(): string\n\t{\n\t\tif(!this.id)\n\t\t{\n\t\t\treturn 'ui-user-field-factory-menu';\n\t\t}\n\n\t\treturn this.id;\n\t}\n\n\tgetPopup(onItemClick = null): Popup\n\t{\n\t\tif(!this.popup)\n\t\t{\n\t\t\tlet options = {...CreationMenu.getDefaultPopupOptions(), ...this.params};\n\n\t\t\toptions.events = {\n\t\t\t\tonPopupShow: this.onPopupShow.bind(this),\n\t\t\t\tonPopupDestroy: this.onPopupDestroy.bind(this),\n\t\t\t};\n\t\t\toptions.id = this.getId();\n\n\t\t\tthis.popup = new Popup(options);\n\t\t}\n\n\t\tthis.popup.setContent(this.render(onItemClick));\n\n\t\treturn this.popup;\n\t}\n\n\tstatic getDefaultPopupOptions(): Object\n\t{\n\t\treturn {\n\t\t\tautoHide: true,\n\t\t\tdraggable: false,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tnoAllPaddings: true,\n\t\t\tbindOptions: { forceBindPosition: true },\n\t\t\tcloseByEsc: true,\n\t\t\tcacheable: false,\n\t\t};\n\t}\n\n\topen(callback: function): void\n\t{\n\t\tconst popup = this.getPopup(callback);\n\t\tif(!popup.isShown())\n\t\t{\n\t\t\tpopup.show();\n\t\t}\n\t}\n\n\trender(onItemClick): Element\n\t{\n\t\tif(!this.container)\n\t\t{\n\t\t\tthis.container = Tag.render`<div class=\"ui-userfieldfactory-creation-menu-container\"></div>`;\n\n\t\t\tconst scrollIcon = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"42\\\" height=\\\"13\\\" viewBox=\\\"0 0 42 13\\\">\\n\" +\n\t\t\t\t\"  <polyline fill=\\\"none\\\" stroke=\\\"#CACDD1\\\" stroke-width=\\\"2\\\" points=\\\"274 98 284 78.614 274 59\\\" transform=\\\"rotate(90 186 -86.5)\\\" stroke-linecap=\\\"round\\\" stroke-linejoin=\\\"round\\\"/>\\n\" +\n\t\t\t\t\"</svg>\\n\";\n\n\t\t\tthis.topScrollButton = Tag.render`<div class=\"ui-userfieldfactory-creation-menu-scroll-top\">${scrollIcon}</div>`;\n\t\t\tthis.bottomScrollButton = Tag.render`<div class=\"ui-userfieldfactory-creation-menu-scroll-bottom\">${scrollIcon}</div>`;\n\n\t\t\tthis.container.appendChild(this.topScrollButton);\n\t\t\tthis.container.appendChild(this.bottomScrollButton);\n\n\t\t\tthis.container.appendChild(this.renderList(onItemClick));\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\trenderList(onItemClick): Element\n\t{\n\t\tif(!this.containerList)\n\t\t{\n\t\t\tthis.containerList = Tag.render`<div class=\"ui-userfieldfactory-creation-menu-list\"></div>`;\n\n\t\t\tthis.items.forEach((item) =>\n\t\t\t{\n\t\t\t\tthis.containerList.appendChild(this.renderItem(item, onItemClick));\n\t\t\t});\n\t\t}\n\n\t\treturn this.containerList;\n\t}\n\n\trenderItem(item, onClick): Element\n\t{\n\t\treturn Tag.render`<div class=\"ui-userfieldfactory-creation-menu-item\" onclick=\"${(()=>{this.onItemClick(item, onClick);})}\">\n\t\t\t<div class=\"ui-userfieldfactory-creation-menu-item-title\">${item.title}</div>\n\t\t\t<div class=\"ui-userfieldfactory-creation-menu-item-desc\">${item.description}</div>\n\t\t</div>`;\n\t}\n\n\tonItemClick(item, onClick)\n\t{\n\t\tif(Type.isFunction(onClick))\n\t\t{\n\t\t\tonClick(item.name);\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonPopupShow()\n\t{\n\t\tEvent.bind(this.bottomScrollButton, \"mouseover\", this.onBottomButtonMouseOver.bind(this));\n\t\tEvent.bind(this.bottomScrollButton, \"mouseout\", this.onBottomButtonMouseOut.bind(this));\n\t\tEvent.bind(this.topScrollButton, \"mouseover\", this.onTopButtonMouseOver.bind(this));\n\t\tEvent.bind(this.topScrollButton, \"mouseout\", this.onTopButtonMouseOut.bind(this));\n\t\tEvent.bind(this.containerList, \"scroll\", this.onScroll.bind(this));\n\n\t\twindow.setTimeout(this.adjust.bind(this), 100);\n\t}\n\n\tonPopupDestroy()\n\t{\n\t\tEvent.unbind(this.bottomScrollButton, \"mouseover\", this.onBottomButtonMouseOver.bind(this));\n\t\tEvent.unbind(this.bottomScrollButton, \"mouseout\", this.onBottomButtonMouseOut.bind(this));\n\t\tEvent.unbind(this.topScrollButton, \"mouseover\", this.onTopButtonMouseOver.bind(this));\n\t\tEvent.unbind(this.topScrollButton, \"mouseout\", this.onTopButtonMouseOut.bind(this));\n\t\tEvent.unbind(this.containerList, \"scroll\", this.onScroll.bind(this));\n\n\t\tthis.container = null;\n\t\tthis.containerList = null;\n\t\tthis.topScrollButton = null;\n\t\tthis.bottomScrollButton = null;\n\n\t\tthis.popup = null;\n\t}\n\n\tonBottomButtonMouseOver()\n\t{\n\t\tif(this._enableScrollToBottom)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enableScrollToBottom = true;\n\t\tthis._enableScrollToTop = false;\n\n\t\t(function scroll()\n\t\t{\n\t\t\tif(!this._enableScrollToBottom)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif((this.containerList.scrollTop + this.containerList.offsetHeight) !== this.containerList.scrollHeight)\n\t\t\t{\n\t\t\t\tthis.containerList.scrollTop += 3;\n\t\t\t}\n\n\t\t\tif((this.containerList.scrollTop + this.containerList.offsetHeight) === this.containerList.scrollHeight)\n\t\t\t{\n\t\t\t\tthis._enableScrollToBottom = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.setTimeout(scroll.bind(this), 20);\n\t\t\t}\n\t\t}).bind(this)();\n\t}\n\n\tonBottomButtonMouseOut()\n\t{\n\t\tthis._enableScrollToBottom = false;\n\t}\n\n\tonTopButtonMouseOver()\n\t{\n\t\tif(this._enableScrollToTop)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis._enableScrollToBottom = false;\n\t\tthis._enableScrollToTop = true;\n\n\t\t(function scroll()\n\t\t{\n\t\t\tif(!this._enableScrollToTop)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(this.containerList.scrollTop > 0)\n\t\t\t{\n\t\t\t\tthis.containerList.scrollTop -= 3;\n\t\t\t}\n\n\t\t\tif(this.containerList.scrollTop === 0)\n\t\t\t{\n\t\t\t\tthis._enableScrollToTop = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.setTimeout(scroll.bind(this), 20);\n\t\t\t}\n\t\t}).bind(this)();\n\t}\n\n\tonTopButtonMouseOut()\n\t{\n\t\tthis._enableScrollToTop = false;\n\t}\n\n\tonScroll()\n\t{\n\t\tthis.adjust();\n\t}\n\n\tadjust()\n\t{\n\t\tconst height = this.containerList.offsetHeight;\n\t\tconst scrollTop = this.containerList.scrollTop;\n\t\tconst scrollHeight = this.containerList.scrollHeight;\n\n\t\tif(scrollTop === 0)\n\t\t{\n\t\t\tthis.topScrollButton.classList.add('hidden');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.topScrollButton.classList.remove('hidden');\n\t\t}\n\n\t\tif((scrollTop + height) === scrollHeight)\n\t\t{\n\t\t\tthis.bottomScrollButton.classList.add('hidden');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.bottomScrollButton.classList.remove('hidden');\n\t\t}\n\t}\n}","/**\n * @memberof BX.UI.UserFieldFactory\n */\nexport class EnumItem\n{\n\tconstructor(value = null)\n\t{\n\t\tthis.value = value;\n\t}\n\n\tsetNode(node: Element)\n\t{\n\t\tthis.node = node;\n\t}\n\n\tgetNode(): ?Element\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetInput(): ?Element\n\t{\n\t\tconst node = this.getNode();\n\t\tif(!node)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\tif(node instanceof HTMLInputElement)\n\t\t{\n\t\t\treturn node;\n\t\t}\n\t\treturn node.querySelector('input');\n\t}\n\n\tgetValue(): string\n\t{\n\t\tconst input = this.getInput();\n\t\tif(input && input.value)\n\t\t{\n\t\t\treturn input.value;\n\t\t}\n\n\t\treturn this.value || '';\n\t}\n}","import {Text, Type} from 'main.core';\nimport {FieldTypes} from \"./fieldtypes\";\nimport {EnumItem} from \"./enumitem\";\n\n/**\n * @memberof BX.UI.UserFieldFactory\n */\nexport class Field\n{\n\tsaved: boolean = false;\n\n\tconstructor(data: Object)\n\t{\n\t\tthis.data = data;\n\t\tconst id = Text.toInteger(data.ID);\n\t\tif(id > 0)\n\t\t{\n\t\t\tthis.saved = true;\n\t\t}\n\t}\n\n\tsetData(data: Object): this\n\t{\n\t\tdelete data.SIGNATURE;\n\t\tthis.data = {...this.data, ...data};\n\n\t\treturn this;\n\t}\n\n\tgetData(): Object\n\t{\n\t\treturn this.data;\n\t}\n\n\tmarkAsSaved(): this\n\t{\n\t\tthis.saved = true;\n\n\t\treturn this;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.data.FIELD;\n\t}\n\n\tsetName(name: string): this\n\t{\n\t\tif(!this.isSaved())\n\t\t{\n\t\t\tthis.data.FIELD = name;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetEntityId(): string\n\t{\n\t\treturn this.data.ENTITY_ID;\n\t}\n\n\tgetTypeId(): string\n\t{\n\t\treturn this.data.USER_TYPE_ID;\n\t}\n\n\tgetEnumeration(): Array\n\t{\n\t\tif(!Type.isArray(this.data.ENUM))\n\t\t{\n\t\t\tthis.data.ENUM = [];\n\t\t}\n\n\t\treturn this.data.ENUM;\n\t}\n\n\tsaveEnumeration(items: EnumItem[])\n\t{\n\t\tthis.data.ENUM = [];\n\t\tlet sort = 100;\n\n\t\titems.forEach((item) =>\n\t\t{\n\t\t\tthis.data.ENUM.push({\n\t\t\t\tVALUE: item.getValue(),\n\t\t\t\tSORT: sort,\n\t\t\t});\n\n\t\t\tsort += 100;\n\t\t});\n\t}\n\n\tstatic getTitleFields(): Array\n\t{\n\t\treturn Array.from([\n\t\t\t'EDIT_FORM_LABEL',\n\t\t\t'LIST_COLUMN_LABEL',\n\t\t\t'LIST_FILTER_LABEL',\n\t\t]);\n\t}\n\n\tgetTitle(): string\n\t{\n\t\tconst titleFields = Field.getTitleFields();\n\n\t\tconst titleFieldsCount = titleFields.length;\n\n\t\tfor(let index = 0; index < titleFieldsCount; index++)\n\t\t{\n\t\t\tif(Type.isString(this.data[titleFields[index]]) && this.data[titleFields[index]].length > 0)\n\t\t\t{\n\t\t\t\treturn this.data[titleFields[index]];\n\t\t\t}\n\t\t}\n\n\t\treturn this.getName();\n\t}\n\n\tsetTitle(title: string)\n\t{\n\t\tif(Type.isString(title) && title.length > 0)\n\t\t{\n\t\t\tField.getTitleFields().forEach((label) =>\n\t\t\t{\n\t\t\t\tthis.data[label] = title;\n\t\t\t});\n\t\t\tif(this.getTypeId() === FieldTypes.boolean)\n\t\t\t{\n\t\t\t\tthis.data.SETTINGS.LABEL_CHECKBOX = title;\n\t\t\t}\n\t\t}\n\t}\n\n\tisSaved(): boolean\n\t{\n\t\treturn this.saved;\n\t}\n\n\tisMultiple(): boolean\n\t{\n\t\treturn (this.data.MULTIPLE === 'Y');\n\t}\n\n\tsetIsMultiple(isMultiple)\n\t{\n\t\tif(!this.isSaved())\n\t\t{\n\t\t\tthis.data.MULTIPLE = (Text.toBoolean(isMultiple) === true ? 'Y' : 'N');\n\t\t}\n\t}\n\n\tisDateField(): boolean\n\t{\n\t\treturn (this.getTypeId() === FieldTypes.datetime || this.getTypeId() === FieldTypes.date);\n\t}\n\n\tisShowTime(): boolean\n\t{\n\t\treturn (this.getTypeId() === FieldTypes.datetime);\n\t}\n\n\tsetIsShowTime(isShowTime)\n\t{\n\t\tif(!this.isSaved())\n\t\t{\n\t\t\tisShowTime = Text.toBoolean(isShowTime);\n\t\t\tif(isShowTime)\n\t\t\t{\n\t\t\t\tthis.data.USER_TYPE_ID = FieldTypes.datetime;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.USER_TYPE_ID = FieldTypes.date;\n\t\t\t}\n\t\t}\n\t}\n\n\tisSearchable(): boolean\n\t{\n\t\treturn (this.data.IS_SEARCHABLE === 'Y');\n\t}\n\n\tsetIsSearchable(isSearchable)\n\t{\n\t\tthis.data.IS_SEARCHABLE = (Text.toBoolean(isSearchable) === true ? 'Y' : 'N');\n\t}\n}","import {Type, Loc, Tag} from 'main.core';\nimport {Field} from './field';\nimport {FieldTypes} from \"./fieldtypes\";\nimport {EnumItem} from './enumitem';\n\n/**\n * @memberof BX.UI.UserFieldFactory\n */\nexport class Configurator\n{\n\tconstructor(params: {\n\t\tfield: Field,\n\t\tonSave: Function,\n\t\tonCancel: ?Function,\n\t})\n\t{\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\tif(params.field instanceof Field)\n\t\t\t{\n\t\t\t\tthis.field = params.field;\n\t\t\t}\n\t\t\tif(Type.isFunction(params.onSave))\n\t\t\t{\n\t\t\t\tthis.onSave = params.onSave;\n\t\t\t}\n\t\t\tif(Type.isFunction(params.onCancel))\n\t\t\t{\n\t\t\t\tthis.onCancel = params.onCancel;\n\t\t\t}\n\t\t}\n\n\t\tthis.enumItems = new Set();\n\t}\n\n\trender(): Element\n\t{\n\t\tthis.node = Tag.render`<div class=\"ui-userfieldfactory-configurator\"></div>`;\n\n\t\tthis.labelInput = Tag.render`<input class=\"ui-ctl-element\" type=\"text\" value=\"${this.field.getTitle()}\" />`;\n\n\t\tthis.node.appendChild(Tag.render`<div class=\"ui-userfieldfactory-configurator-block\">\n\t\t\t<div class=\"ui-userfieldfactory-configurator-title\">\n\t\t\t\t<span class=\"ui-userfieldfactory-configurator-title-text\">${Loc.getMessage('UI_USERFIELD_FACTORY_CONFIGURATOR_FIELD_TITLE')}</span>\n\t\t\t</div>\n\t\t\t<div class=\"ui-userfieldfactory-configurator-content\">\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t${this.labelInput}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>`);\n\n\t\tif(this.field.getTypeId() === FieldTypes.enumeration)\n\t\t{\n\t\t\tthis.node.appendChild(this.renderEnumeration());\n\t\t}\n\n\t\tthis.node.appendChild(this.renderOptions());\n\n\t\tconst save = (event) =>\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tif(Type.isFunction(this.onSave))\n\t\t\t{\n\t\t\t\tthis.onSave(this.saveField());\n\t\t\t}\n\t\t};\n\n\t\tconst cancel = (event) =>\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tif(Type.isFunction(this.onCancel))\n\t\t\t{\n\t\t\t\tthis.onCancel();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.node.style.display = 'none';\n\t\t\t}\n\t\t};\n\n\t\tthis.saveButton = Tag.render`<span class=\"ui-btn ui-btn-primary\" onclick=\"${save.bind(this)}\">${Loc.getMessage('UI_USERFIELD_SAVE')}</span>`;\n\t\tthis.cancelButton = Tag.render`<span class=\"ui-btn ui-btn-light-border\" onclick=\"${cancel.bind(this)}\">${Loc.getMessage('UI_USERFIELD_CANCEL')}</span>`;\n\n\t\tthis.node.appendChild(Tag.render`<div class=\"ui-userfieldfactory-configurator-block\">\n\t\t\t${this.saveButton}${this.cancelButton}\n\t\t</div>`);\n\n\t\treturn this.node;\n\t}\n\n\tsaveField(): Field\n\t{\n\t\tif(this.timeCheckbox)\n\t\t{\n\t\t\tthis.field.setIsShowTime(this.timeCheckbox.checked);\n\t\t}\n\t\tif(this.multipleCheckbox)\n\t\t{\n\t\t\tthis.field.setIsMultiple(this.multipleCheckbox.checked);\n\t\t}\n\t\tthis.field.setTitle(this.labelInput.value);\n\t\tthis.field.saveEnumeration(this.enumItems);\n\n\t\treturn this.field;\n\t}\n\n\trenderEnumeration(): Element\n\t{\n\t\tthis.enumItemsContainer = Tag.render`<div class=\"ui-userfieldfactory-configurator-block\"></div>`;\n\n\t\tthis.enumAddItemContainer = Tag.render`<div class=\"ui-userfieldfactory-configurator-block-add-field\">\n\t\t\t<span class=\"ui-userfieldfactory-configurator-add-button\" onclick=\"${() => {this.addEnumInput().focus();}}\">${Loc.getMessage('UI_USERFIELD_ADD')}</span>\n\t\t</div>`;\n\n\t\tthis.enumContainer = Tag.render`<div class=\"ui-userfieldfactory-configurator-block\">\n\t\t\t<div class=\"ui-userfieldfactory-configurator-title\">\n\t\t\t\t<span class=\"ui-userfieldfactory-configurator-title-text\">${Loc.getMessage('UI_USERFIELD_FACTORY_UF_ENUM_ITEMS')}</span>\n\t\t\t</div>\n\t\t\t${this.enumItemsContainer}\n\t\t\t${this.enumAddItemContainer}\n\t\t</div>`;\n\n\t\tthis.field.getEnumeration().forEach((item) =>\n\t\t{\n\t\t\tthis.addEnumInput(item);\n\t\t});\n\t\tthis.addEnumInput();\n\n\t\treturn this.enumContainer;\n\t}\n\n\taddEnumInput(item: Object|EnumItem = null): Element\n\t{\n\t\tif(!(item instanceof EnumItem))\n\t\t{\n\t\t\tif(Type.isPlainObject(item))\n\t\t\t{\n\t\t\t\titem = new EnumItem(item.VALUE);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\titem = new EnumItem();\n\t\t\t}\n\t\t}\n\n\t\tconst node = Tag.render`<div style=\"margin-bottom: 10px;\" class=\"ui-ctl ui-ctl-textbox ui-ctl-w100 ui-ctl-row\">\n\t\t\t<input class=\"ui-ctl-element\" type=\"text\" value=\"${item.getValue()}\">\n\t\t\t<div class=\"ui-userfieldfactory-configurator-remove-enum\" onclick=\"${(event) =>\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\tthis.deleteEnumItem(item);\n\t\t}}\"></div>\n\t\t</div>`;\n\n\t\titem.setNode(node);\n\n\t\tthis.enumItems.add(item);\n\n\t\tthis.enumItemsContainer.appendChild(node);\n\n\t\treturn node;\n\t}\n\n\tdeleteEnumItem(item: EnumItem)\n\t{\n\t\tthis.enumItemsContainer.removeChild(item.getNode());\n\t\tthis.enumItems.delete(item);\n\t}\n\n\trenderOptions(): Element\n\t{\n\t\tthis.optionsContainer = Tag.render`<div class=\"ui-userfieldfactory-configurator-block\"></div>`;\n\n\t\tif(!this.field.isSaved() && this.field.isDateField())\n\t\t{\n\t\t\tthis.timeCheckbox = Tag.render`<input class=\"ui-ctl-element\" type=\"checkbox\">`;\n\t\t\tthis.timeCheckbox.checked = this.field.isShowTime();\n\t\t\tthis.optionsContainer.appendChild(Tag.render`<div>\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-xs\">\n\t\t\t\t\t${this.timeCheckbox}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('UI_USERFIELD_FACTORY_UF_ENABLE_TIME')}</div>\n\t\t\t\t</label>\n\t\t\t</div>`);\n\t\t}\n\n\t\tif(!this.field.isSaved() && this.field.getTypeId() !== FieldTypes.boolean)\n\t\t{\n\t\t\tthis.multipleCheckbox = Tag.render`<input class=\"ui-ctl-element\" type=\"checkbox\">`;\n\t\t\tthis.multipleCheckbox.checked = this.field.isMultiple();\n\t\t\tthis.optionsContainer.appendChild(Tag.render`<div>\n\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-xs\">\n\t\t\t\t\t${this.multipleCheckbox}\n\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('UI_USERFIELD_FACTORY_FIELD_MULTIPLE')}</div>\n\t\t\t\t</label>\n\t\t\t</div>`);\n\t\t}\n\n\t\treturn this.optionsContainer;\n\t}\n}","import {Loc, Type, Reflection} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nimport {CreationMenu} from \"./creationmenu\";\nimport {Field} from \"./field\";\nimport {MAX_FIELD_LENGTH, DefaultData, DefaultFieldData, FieldDescriptions} from \"./fieldtypes\";\nimport {Configurator} from \"./configurator\";\n\nimport 'uf';\n\n/**\n * @memberof BX.UI.UserFieldFactory\n * @mixes EventEmitter\n */\nexport class Factory\n{\n\tconstructor(entityId: string, params: {\n\t\tcreationSignature: string,\n\t\tmenuId: ?string,\n\t\ttypes: ?Array,\n\t\tbindElement: ?Element,\n\t\tconfiguratorClass: ?Configurator,\n\t} = {})\n\t{\n\t\tEventEmitter.makeObservable(this, 'UI.UserFieldFactory.Factory');\n\t\tthis.configuratorClass = Configurator;\n\t\tif(Type.isString(entityId) && entityId.length > 0)\n\t\t{\n\t\t\tthis.entityId = entityId;\n\t\t}\n\t\tif(Type.isPlainObject(params))\n\t\t{\n\t\t\tif(Type.isString(params.creationSignature))\n\t\t\t{\n\t\t\t\tthis.creationSignature = params.creationSignature;\n\t\t\t}\n\t\t\tif(Type.isString(params.menuId))\n\t\t\t{\n\t\t\t\tthis.menuId = params.menuId;\n\t\t\t}\n\t\t\tif(!Type.isArray(params.types))\n\t\t\t{\n\t\t\t\tparams.types = [];\n\t\t\t}\n\t\t\tif(Type.isDomNode(params.bindElement))\n\t\t\t{\n\t\t\t\tthis.bindElement = params.bindElement;\n\t\t\t}\n\t\t\tthis.setConfiguratorClass(params.configuratorClass);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams.types = [];\n\t\t}\n\t\tthis.types =  this.getFieldTypes().concat(params.types);\n\t}\n\n\tgetFieldTypes(): Array\n\t{\n\t\tconst types = [];\n\n\t\tObject.keys(FieldDescriptions).forEach((name) =>\n\t\t{\n\t\t\ttypes.push({...FieldDescriptions[name], ...{name}});\n\t\t});\n\n\t\tthis.emit('OnGetUserTypes', {\n\t\t\ttypes\n\t\t});\n\n\t\treturn types;\n\t}\n\n\tgetMenu(params: Object): CreationMenu\n\t{\n\t\tif(!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tif(!Type.isDomNode(params.bindElement))\n\t\t{\n\t\t\tparams.bindElement = this.bindElement;\n\t\t}\n\t\tif(!this.menu)\n\t\t{\n\t\t\tthis.menu = new CreationMenu(this.menuId, this.types, params);\n\t\t}\n\n\t\treturn this.menu;\n\t}\n\n\tsetConfiguratorClass(configuratorClassName: string|Function)\n\t{\n\t\tlet configuratorClass = null;\n\t\tif(Type.isString(configuratorClassName))\n\t\t{\n\t\t\tconfiguratorClass = Reflection.getClass(configuratorClassName);\n\t\t}\n\t\telse if(Type.isFunction(configuratorClassName))\n\t\t{\n\t\t\tconfiguratorClass = configuratorClassName;\n\t\t}\n\n\t\tif(Type.isFunction(configuratorClass) && configuratorClass.prototype instanceof Configurator)\n\t\t{\n\t\t\tthis.configuratorClass = configuratorClass;\n\t\t}\n\t}\n\n\tgetConfigurator(params: {\n\t\tfield: Field,\n\t\tonSave: Function,\n\t\tonCancel: ?Function,\n\t}): Configurator\n\t{\n\t\treturn new this.configuratorClass(params);\n\t}\n\n\tcreateField(fieldType: string, fieldName: ?string): Field\n\t{\n\t\tlet data = {...DefaultData, ...DefaultFieldData[fieldType], ...{USER_TYPE_ID: fieldType}};\n\n\t\tif(!Type.isString(fieldName) || fieldName.length <= 0 || fieldName.length > MAX_FIELD_LENGTH)\n\t\t{\n\t\t\tfieldName = this.generateFieldName();\n\t\t}\n\t\tdata.FIELD = fieldName;\n\t\tdata.ENTITY_ID = this.entityId;\n\t\tdata.SIGNATURE = this.creationSignature;\n\n\t\tconst field = new Field(data);\n\t\tfield.setTitle(this.getDefaultLabel(fieldType));\n\n\t\tthis.emit('onCreateField', {\n\t\t\tfield,\n\t\t});\n\n\t\treturn field;\n\t}\n\n\tgetDefaultLabel(fieldType: string): string\n\t{\n\t\tlet label = Loc.getMessage('UI_USERFIELD_FACTORY_UF_LABEL');\n\t\tthis.types.forEach((type) =>\n\t\t{\n\t\t\tif(type.name === fieldType && Type.isString(type.defaultTitle))\n\t\t\t{\n\t\t\t\tlabel = type.defaultTitle;\n\t\t\t}\n\t\t});\n\n\t\treturn label;\n\t}\n\n\tgenerateFieldName(): string\n\t{\n\t\tlet name = 'UF_' + (this.entityId ? (this.entityId + \"_\") : \"\");\n\t\tlet dateSuffix = (new Date()).getTime().toString();\n\t\tif(name.length + dateSuffix.length > MAX_FIELD_LENGTH)\n\t\t{\n\t\t\tdateSuffix = dateSuffix.substr(((name.length + dateSuffix.length) - MAX_FIELD_LENGTH));\n\t\t}\n\n\t\tname += dateSuffix;\n\n\t\treturn name;\n\t}\n\n\tsaveField(field: Field): Promise<?Field, Array>\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(field instanceof Field)\n\t\t\t{\n\t\t\t\tif(field.isSaved())\n\t\t\t\t{\n\t\t\t\t\tthis.getEditManager().update({ \"FIELDS\": [field.getData()]}, (response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFieldSave(field, response, resolve, reject);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.getEditManager().add({ \"FIELDS\": [field.getData()]}, (response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFieldSave(field, response, resolve, reject);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treject(['Wrong parameter: field must be instance of Field']);\n\t\t\t}\n\t\t});\n\t}\n\n\tdeleteField(field: Field): Promise\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif(field instanceof Field)\n\t\t\t{\n\t\t\t\tif(field.isSaved())\n\t\t\t\t{\n\t\t\t\t\tthis.getEditManager().delete({ \"FIELDS\": [field.getData()]}, (response) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.onFieldDelete(field, response, resolve, reject);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treject(['Wrong parameter: field must be instance of Field']);\n\t\t\t}\n\t\t});\n\t}\n\n\tonFieldSave(field: Field, response, onSuccess: Function, onError: Function): void\n\t{\n\t\tif(Type.isPlainObject(response))\n\t\t{\n\t\t\tif(response.ERROR && Type.isArray(response.ERROR) && response.ERROR.length > 0)\n\t\t\t{\n\t\t\t\tonError(response.ERROR);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst fieldData = this.getFieldDataFromResponse(response);\n\t\t\t\tif(fieldData)\n\t\t\t\t{\n\t\t\t\t\tfield.markAsSaved()\n\t\t\t\t\t\t.setData(fieldData);\n\t\t\t\t\tif(Type.isFunction(onSuccess))\n\t\t\t\t\t{\n\t\t\t\t\t\tonSuccess(field);\n\t\t\t\t\t}\n\t\t\t\t\tthis.emit('onFieldSave', {\n\t\t\t\t\t\tfield,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(Type.isFunction(onError))\n\t\t\t{\n\t\t\t\tif(Type.isArray(this.managerErrors) && this.managerErrors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tonError(this.managerErrors);\n\t\t\t\t\tthis.managerErrors = [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tonError([Loc.getMessage('UI_USERFIELD_SAVE_ERROR')]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tonFieldDelete(field: Field, response, onSuccess: Function, onError: Function): void\n\t{\n\t\tif(Type.isPlainObject(response) || Type.isArray(response))\n\t\t{\n\t\t\tif(Type.isPlainObject(response) && response.ERROR && Type.isArray(response.ERROR) && response.ERROR.length > 0)\n\t\t\t{\n\t\t\t\tonError(response.ERROR);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(Type.isFunction(onSuccess))\n\t\t\t\t{\n\t\t\t\t\tonSuccess(field);\n\t\t\t\t}\n\t\t\t\tthis.emit('onFieldDelete', {\n\t\t\t\t\tfield,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(Type.isFunction(onError))\n\t\t\t{\n\t\t\t\tif(Type.isArray(this.managerErrors) && this.managerErrors.length > 0)\n\t\t\t\t{\n\t\t\t\t\tonError(this.managerErrors);\n\t\t\t\t\tthis.managerErrors = [];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tonError([Loc.getMessage('UI_USERFIELD_DELETE_ERROR')]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFieldDataFromResponse(response: Object): ?Object\n\t{\n\t\tif(Type.isPlainObject(response))\n\t\t{\n\t\t\tlet fieldData = null;\n\t\t\tObject.keys(response).forEach((fieldName) =>\n\t\t\t{\n\t\t\t\tif(Type.isPlainObject(response[fieldName]['FIELD']))\n\t\t\t\t{\n\t\t\t\t\tfieldData = response[fieldName]['FIELD'];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn fieldData;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetEditManager(): BX.Main.UF.Manager\n\t{\n\t\tif(!this.editManager)\n\t\t{\n\t\t\tthis.editManager = BX.Main.UF.EditManager;\n\n\t\t\tthis.editManager.displayError = (errors: Array) =>\n\t\t\t{\n\t\t\t\tthis.managerErrors = errors;\n\t\t\t};\n\t\t}\n\n\t\treturn this.editManager;\n\t}\n}"],"names":["MAX_FIELD_LENGTH","FieldTypes","Object","freeze","string","enumeration","date","datetime","address","url","file","money","boolean","double","employee","crm","crmStatus","FieldDescriptions","title","Loc","getMessage","description","defaultTitle","DefaultData","MULTIPLE","MANDATORY","USER_TYPE_ID","SHOW_FILTER","SHOW_IN_LIST","SETTINGS","IS_SEARCHABLE","DefaultFieldData","crm_status","DISPLAY","PRECISION","CreationMenu","id","types","params","items","Type","isPlainObject","onItemClick","popup","options","getDefaultPopupOptions","events","onPopupShow","bind","onPopupDestroy","getId","Popup","setContent","render","callback","getPopup","isShown","show","container","Tag","scrollIcon","topScrollButton","bottomScrollButton","appendChild","renderList","containerList","forEach","item","renderItem","onClick","isFunction","name","close","Event","onBottomButtonMouseOver","onBottomButtonMouseOut","onTopButtonMouseOver","onTopButtonMouseOut","onScroll","window","setTimeout","adjust","unbind","_enableScrollToBottom","_enableScrollToTop","scroll","scrollTop","offsetHeight","scrollHeight","height","classList","add","remove","autoHide","draggable","offsetLeft","offsetTop","noAllPaddings","bindOptions","forceBindPosition","closeByEsc","cacheable","EnumItem","value","node","getNode","HTMLInputElement","querySelector","input","getInput","Field","data","Text","toInteger","ID","saved","SIGNATURE","FIELD","isSaved","ENTITY_ID","isArray","ENUM","sort","push","VALUE","getValue","SORT","titleFields","getTitleFields","titleFieldsCount","length","index","isString","getName","label","getTypeId","LABEL_CHECKBOX","isMultiple","toBoolean","isShowTime","isSearchable","Array","from","Configurator","field","onSave","onCancel","enumItems","Set","labelInput","getTitle","renderEnumeration","renderOptions","save","event","preventDefault","saveField","cancel","style","display","saveButton","cancelButton","timeCheckbox","setIsShowTime","checked","multipleCheckbox","setIsMultiple","setTitle","saveEnumeration","enumItemsContainer","enumAddItemContainer","addEnumInput","focus","enumContainer","getEnumeration","deleteEnumItem","setNode","removeChild","delete","optionsContainer","isDateField","Factory","entityId","EventEmitter","makeObservable","configuratorClass","creationSignature","menuId","isDomNode","bindElement","setConfiguratorClass","getFieldTypes","concat","keys","emit","menu","configuratorClassName","Reflection","getClass","prototype","fieldType","fieldName","generateFieldName","getDefaultLabel","type","dateSuffix","Date","getTime","toString","substr","Promise","resolve","reject","getEditManager","update","getData","response","onFieldSave","onFieldDelete","onSuccess","onError","ERROR","fieldData","getFieldDataFromResponse","markAsSaved","setData","managerErrors","editManager","BX","Main","UF","EditManager","displayError","errors"],"mappings":"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"}