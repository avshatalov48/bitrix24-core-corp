{"version":3,"file":"counterpanel.bundle.js","sources":["../src/item.js","../src/panel.js"],"sourcesContent":["import { Tag, Type } from 'main.core';\nimport { Counter } from 'ui.cnt';\nimport { EventEmitter } from \"main.core.events\";\n\nexport default class CounterItem {\n\tconstructor(options)\n\t{\n\t\tthis.id = options.id;\n\t\tthis.title = Type.isString(options.title) ? options.title : null;\n\t\tthis.value = Type.isNumber(options.value) ? options.value : null;\n\t\tthis.color = Type.isString(options.color) ? options.color : null;\n\t\tthis.eventsForActive = Type.isObject(options.eventsForActive) ? options.eventsForActive : null;\n\t\tthis.eventsForUnActive = Type.isObject(options.eventsForUnActive) ? options.eventsForUnActive : null;\n\t\tthis.panel = options.panel ? options.panel : null;\n\t\tthis.separator = Type.isBoolean(options.separator) ? options.separator : true;\n\t\tthis.locked = Type.isBoolean(options.locked) ? options.locked : null;\n\n\t\tthis.layout = {\n\t\t\tcontainer: null,\n\t\t\tvalue: null,\n\t\t\ttitle: null,\n\t\t\tcross: null\n\t\t}\n\n\t\tthis.counter = this.#getCounter();\n\t\tthis.isActive = false;\n\n\t\tif (!this.#getPanel().isMultiselect())\n\t\t{\n\t\t\tthis.#bindEvents();\n\t\t}\n\t}\n\n\t#bindEvents()\n\t{\n\t\tEventEmitter.subscribe('BX.UI.CounterPanel.Item:activate', (item) => {\n\t\t\tif (item.data !== this)\n\t\t\t{\n\t\t\t\tthis.deactivate();\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateValue(param: Number)\n\t{\n\t\tif (Type.isNumber(param))\n\t\t{\n\t\t\tthis.value = param;\n\t\t\tthis.#getCounter().update(param);\n\n\t\t\tif (param === 0)\n\t\t\t{\n\t\t\t\tthis.updateColor('THEME');\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateValueAnimate(param: Number)\n\t{\n\t\tif (Type.isNumber(param))\n\t\t{\n\t\t\tthis.value = param;\n\t\t\tthis.#getCounter().update(param);\n\t\t\tthis.#getCounter().show();\n\n\t\t\tif (param === 0)\n\t\t\t{\n\t\t\t\tthis.updateColor('THEME');\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateColor(param: string)\n\t{\n\t\tif (Type.isString(param))\n\t\t{\n\t\t\tthis.color = param;\n\t\t\tthis.#getCounter().setColor(Counter.Color[param]);\n\t\t}\n\t}\n\n\tactivate(isEmitEvent: boolean = true)\n\t{\n\t\tthis.isActive = true;\n\t\tthis.getContainer().classList.add('--active');\n\t\tif(isEmitEvent)\n\t\t{\n\t\t\tEventEmitter.emit('BX.UI.CounterPanel.Item:activate', this);\n\t\t}\n\t}\n\n\tdeactivate(isEmitEvent: boolean = true)\n\t{\n\t\tthis.isActive = false;\n\t\tthis.getContainer().classList.remove('--active');\n\t\tthis.getContainer().classList.remove('--hover');\n\t\tif(isEmitEvent)\n\t\t{\n\t\t\tEventEmitter.emit('BX.UI.CounterPanel.Item:deactivate', this);\n\t\t}\n\t}\n\n\tgetSeparator()\n\t{\n\t\treturn this.separator;\n\t}\n\n\t#getPanel()\n\t{\n\t\treturn this.panel;\n\t}\n\n\t#getCounter()\n\t{\n\t\tif (!this.counter)\n\t\t{\n\t\t\tthis.counter = new Counter({\n\t\t\t\tvalue: this.value ? this.value : 0,\n\t\t\t\tcolor: this.color ? Counter.Color[this.color] : Counter.Color.THEME,\n\t\t\t\tanimation: false\n\t\t\t});\n\t\t}\n\n\t\treturn this.counter;\n\t}\n\n\t#getValue()\n\t{\n\t\tif (!this.layout.value)\n\t\t{\n\t\t\tthis.layout.value = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-value\">\n\t\t\t\t\t${this.#getCounter().getContainer()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.value;\n\t}\n\n\t#getTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-title\">${this.title}</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t#getCross()\n\t{\n\t\tif (!this.layout.cross)\n\t\t{\n\t\t\tthis.layout.cross = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item-cross\">\n\t\t\t\t\t<div class=\"ui-counter-panel__item-cross--icon\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.cross;\n\t}\n\t\n\t#setEvents()\n\t{\n\t\tif (this.eventsForActive)\n\t\t{\n\t\t\tconst eventKeys = Object.keys(this.eventsForActive);\n\n\t\t\tfor (let i = 0; i < eventKeys.length; i++)\n\t\t\t{\n\t\t\t\tlet event = eventKeys[i];\n\t\t\t\tthis.getContainer().addEventListener(event, () => {\n\t\t\t\t\tif (this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.eventsForActive[event]();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (this.eventsForUnActive)\n\t\t{\n\t\t\tconst eventKeys = Object.keys(this.eventsForUnActive);\n\n\t\t\tfor (let i = 0; i < eventKeys.length; i++)\n\t\t\t{\n\t\t\t\tlet event = eventKeys[i];\n\t\t\t\tthis.getContainer().addEventListener(event, () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.eventsForUnActive[event]();\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tlock()\n\t{\n\t\tthis.locked = true;\n\t\tthis.getContainer().classList.add('--locked');\n\t}\n\n\tunLock()\n\t{\n\t\tthis.locked = false;\n\t\tthis.getContainer().classList.remove('--locked');\n\t}\n\n\tgetContainer()\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tconst isValue = Type.isNumber(this.value);\n\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel__item\">\n\t\t\t\t\t\t${isValue ? this.#getValue() : ''}\n\t\t\t\t\t\t${this.title ? this.#getTitle() : ''}\n\t\t\t\t\t\t${isValue ? this.#getCross() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (!isValue)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--string');\n\t\t\t}\n\n\t\t\tif (!isValue && !this.eventsForActive && !this.eventsForUnActive)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--title');\n\t\t\t}\n\n\t\t\tif (!this.separator)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--without-separator');\n\t\t\t}\n\n\t\t\tif (this.locked)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--locked');\n\t\t\t}\n\n\t\t\tthis.#setEvents();\n\n\t\t\tif (isValue)\n\t\t\t{\n\t\t\t\tthis.layout.container.addEventListener('mouseenter', () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.layout.container.classList.add('--hover');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.layout.container.addEventListener('mouseleave', () => {\n\t\t\t\t\tif (!this.isActive)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.layout.container.classList.remove('--hover');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.layout.container.addEventListener('click', () => {\n\t\t\t\t\tthis.isActive\n\t\t\t\t\t\t? this.deactivate()\n\t\t\t\t\t\t: this.activate();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n}\n","import { Dom, Tag, Type } from 'main.core';\nimport CounterItem from './item';\nimport 'ui.fonts.opensans';\nimport './style.css';\n\nexport default class CounterPanel\n{\n\tconstructor(options: {\n\t\ttarget: HTMLElement,\n\t\titems: Array,\n\t\tmultiselect: Boolean\n\t})\n\t{\n\t\tthis.target = Type.isDomNode(options.target) ? options.target : null;\n\t\tthis.items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.multiselect = Type.isBoolean(options.multiselect) ? options.multiselect : null;\n\t\tthis.container = null;\n\t\tthis.keys = [];\n\t}\n\n\t#adjustData()\n\t{\n\t\tthis.items = this.items.map((item) => {\n\n\t\t\tthis.keys.push(item.id);\n\n\t\t\treturn new CounterItem({\n\t\t\t\tid: item.id ? item.id : null,\n\t\t\t\ttitle: item.title ? item.title : null,\n\t\t\t\tvalue: Type.isNumber(item.value) ? parseInt(item.value, 10) : null,\n\t\t\t\tcross: item.cross ? item.cross : null,\n\t\t\t\tcolor: item.color ? item.color : null,\n\t\t\t\teventsForActive: item.eventsForActive ? item.eventsForActive : null,\n\t\t\t\teventsForUnActive: item.eventsForUnActive ? item.eventsForUnActive : null,\n\t\t\t\tpanel: this,\n\t\t\t\tseparator: item.separator,\n\t\t\t\tlocked: item.locked ? item.locked : null\n\t\t\t});\n\t\t});\n\t}\n\n\tisMultiselect()\n\t{\n\t\treturn this.multiselect;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItemById(param)\n\t{\n\t\tif (param)\n\t\t{\n\t\t\tconst index = this.keys.indexOf(param);\n\t\t\treturn this.items[index];\n\t\t}\n\t}\n\n\t#getContainer()\n\t{\n\t\tif (!this.container)\n\t\t{\n\t\t\tthis.container = Tag.render`\n\t\t\t\t<div class=\"ui-counter-panel ui-counter-panel__scope\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\t#render()\n\t{\n\t\tif (this.target && this.items.length > 0)\n\t\t{\n\t\t\tthis.items.map((item, key) => {\n\t\t\t\tif (item instanceof CounterItem)\n\t\t\t\t{\n\t\t\t\t\tthis.#getContainer().appendChild(item.getContainer());\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.items.length !== key + 1\n\t\t\t\t\t\t&& this.items.length > 1\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#getContainer().appendChild(Tag.render`\n\t\t\t\t\t\t\t<div class=\"ui-counter-panel__item-separator ${!item.getSeparator() ? '--invisible' : ''}\"></div>\n\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDom.clean(this.target);\n\t\t\tthis.target.appendChild(this.#getContainer());\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.#adjustData();\n\t\tthis.#render();\n\t}\n}\n"],"names":["CounterItem","options","id","title","Type","isString","value","isNumber","color","eventsForActive","isObject","eventsForUnActive","panel","separator","isBoolean","locked","layout","container","cross","counter","isActive","isMultiselect","param","update","updateColor","show","setColor","Counter","Color","isEmitEvent","getContainer","classList","add","EventEmitter","emit","remove","isValue","Tag","render","addEventListener","deactivate","activate","subscribe","item","data","THEME","animation","eventKeys","Object","keys","i","event","length","CounterPanel","target","isDomNode","items","isArray","multiselect","index","indexOf","map","push","parseInt","key","appendChild","getSeparator","Dom","clean"],"mappings":"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"}