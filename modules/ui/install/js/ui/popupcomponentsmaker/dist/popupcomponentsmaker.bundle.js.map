{"version":3,"file":"popupcomponentsmaker.bundle.js","sources":["../src/popup.item.js","../src/popup.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Type, Tag, Dom } from 'main.core';\nimport { Loader } from 'main.loader';\n\nexport default class PopupComponentsMakerItem extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\n\t\tthis.html = Type.isDomNode(options?.html) ? options.html : null;\n\t\tthis.awaitContent = Type.isBoolean(options?.awaitContent) ? options?.awaitContent : null;\n\t\tthis.flex = Type.isNumber(options?.flex) ? options.flex : null;\n\t\tthis.withoutBackground = Type.isBoolean(options?.withoutBackground) ? options.withoutBackground : null;\n\t\tthis.backgroundColor = Type.isString(options?.backgroundColor) ? options.backgroundColor : null;\n\t\tthis.backgroundImage = Type.isString(options?.backgroundImage) ? options.backgroundImage : null;\n\t\tthis.marginBottom = Type.isNumber(options?.marginBottom) ? options.marginBottom : null;\n\t\tthis.disabled = Type.isBoolean(options?.disabled) ? options.disabled : null;\n\t\tthis.secondary = Type.isBoolean(options?.secondary) ? options.secondary : null;\n\t\tthis.overflow = Type.isBoolean(options?.overflow) ? options.overflow : null;\n\t\tthis.displayBlock = Type.isBoolean(options?.displayBlock) ? options.displayBlock : null;\n\t\tthis.attrs = Type.isPlainObject(options?.attrs) ? options.attrs : null;\n\t\tthis.minHeight = Type.isString(options?.minHeight) ? options.minHeight : null;\n\t\tthis.sizeLoader = Type.isNumber(options?.sizeLoader) ? options.sizeLoader : 45;\n\t\tthis.asyncSecondary = (options?.asyncSecondary instanceof Promise) ? options.asyncSecondary : null;\n\n\t\tthis.layout = {\n\t\t\tcontainer: null\n\t\t};\n\n\t\tif (this.awaitContent)\n\t\t{\n\t\t\tthis.await();\n\t\t}\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.getContainer(),\n\t\t\t\tsize: this.sizeLoader\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tawait()\n\t{\n\t\tthis.getContainer().classList.add('--awaiting');\n\t\tthis.showLoader();\n\t}\n\n\tstopAwait()\n\t{\n\t\tthis.getContainer().classList.remove('--awaiting');\n\t\tthis.hideLoader();\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader(): void\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tgetContent()\n\t{\n\t\tif (this.html)\n\t\t{\n\t\t\treturn this.html;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tupdateContent(node: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.clean(this.getContainer());\n\t\t\tthis.getContainer().appendChild(node);\n\t\t}\n\t}\n\n\tsetBackgroundColor(color: string)\n\t{\n\t\tif (Type.isString(color))\n\t\t{\n\t\t\tthis.getContainer().style.backgroundColor = color;\n\t\t}\n\t}\n\n\tgetMarginBottom()\n\t{\n\t\treturn this.marginBottom;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__content--section-item\">${this.getContent()}</div>\n\t\t\t`;\n\n\t\t\tif (this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.backgroundColor = this.backgroundColor;\n\t\t\t}\n\t\t\tif (this.backgroundImage)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.backgroundImage = this.backgroundImage;\n\t\t\t}\n\n\t\t\tif (this.withoutBackground && !this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--transparent');\n\t\t\t}\n\n\t\t\tif (this.flex)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.flex = this.flex;\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--disabled');\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--disabled');\n\t\t\t}\n\n\t\t\tif (this.secondary)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--secondary');\n\t\t\t}\n\n\t\t\tif (this.overflow)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--overflow-hidden');\n\t\t\t}\n\n\t\t\tif (this.displayBlock)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--block');\n\t\t\t}\n\n\t\t\tif (this.attrs)\n\t\t\t{\n\t\t\t\tDom.adjust(this.layout.container, {attrs: this.attrs});\n\t\t\t}\n\n\t\t\tif (this.minHeight)\n\t\t\t{\n\t\t\t\tDom.style(this.layout.container, 'min-height', this.minHeight);\n\t\t\t}\n\n\t\t\tif (this.asyncSecondary)\n\t\t\t{\n\t\t\t\tthis.asyncSecondary.then((secondary) => {\n\t\t\t\t\tif (secondary === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.layout.container, '--secondary');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.container, '--secondary');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n}\n","import {Type, Tag, Dom} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {EventEmitter} from \"main.core.events\";\n\nimport PopupComponentsMakerItem from './popup.item';\n\nimport 'ui.fonts.opensans';\nimport 'ui.design-tokens';\nimport './style.css';\n\nclass PopupComponentsMaker\n{\n\tconstructor({\n\t\tid,\n\t\ttarget,\n\t\tcontent,\n\t\twidth,\n\t\tcacheable,\n\t\tcontentPadding,\n\t\tpadding,\n\t\toffsetTop,\n\t\tblurBackground,\n\t\tuseAngle,\n\t})\n\t{\n\t\tthis.id = Type.isString(id) ? id : null;\n\t\tthis.target = Type.isElementNode(target) ? target : null;\n\t\tthis.content = content || null;\n\t\tthis.contentWrapper = null;\n\t\tthis.popup = null;\n\t\tthis.loader = null;\n\t\tthis.items = [];\n\t\tthis.width = Type.isNumber(width) ? width : null;\n\t\tthis.cacheable = Type.isBoolean(cacheable) ? cacheable : true;\n\t\tthis.contentPadding = Type.isNumber(contentPadding) ? contentPadding : 0;\n\t\tthis.padding = Type.isNumber(padding) ? padding : 13;\n\t\tthis.offsetTop = Type.isNumber(offsetTop) ? offsetTop : 0;\n\t\tthis.blurBlackground = Type.isBoolean(blurBackground) ? blurBackground : false;\n\t\tthis.useAngle = (Type.isUndefined(useAngle) || useAngle !== false);\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItem(item): PopupComponentsMakerItem\n\t{\n\t\tif (item instanceof PopupComponentsMakerItem)\n\t\t{\n\t\t\treturn item;\n\t\t}\n\n\t\titem = new PopupComponentsMakerItem(item);\n\n\t\tif (this.items.indexOf(item) === -1)\n\t\t{\n\t\t\tthis.items.push(item);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst popupWidth = this.width ? this.width : 350;\n\n\t\t\tconst popupId = this.id ? this.id + '-popup' : null;\n\n\t\t\tthis.popup = new Popup(popupId, this.target, {\n\t\t\t\tclassName: 'ui-popupcomponentmaker',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tcontentPadding: this.contentPadding,\n\t\t\t\tangle: this.useAngle\n\t\t\t\t\t? {\n\t\t\t\t\t\toffset: (popupWidth / 2) - 16,\n\t\t\t\t\t}\n\t\t\t\t\t: false,\n\t\t\t\toffsetTop: this.offsetTop,\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target ? this.target.offsetWidth / 2 : 0) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: this.padding,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent: this.getContentWrapper(),\n\t\t\t\tcacheable: this.cacheable\n\t\t\t});\n\n\t\t\tif (this.blurBlackground)\n\t\t\t{\n\t\t\t\tDom.addClass(this.popup.getPopupContainer(), 'popup-with-radius');\n\t\t\t\tthis.setBlurBackground();\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply', () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setBlurBackground();\n\t\t\t\t\t\t}, 200)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.getPopup().isShown();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContentWrapper(): HTMLElement\n\t{\n\t\tif (!this.contentWrapper)\n\t\t{\n\t\t\tthis.contentWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__content\"></div>\n\t\t\t`;\n\n\t\t\tif (!this.content)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.content.map((item)=> {\n\t\t\t\tlet sectionNode = this.getSection()\n\n\t\t\t\tif (item?.marginBottom)\n\t\t\t\t{\n\t\t\t\t\tType.isNumber(item.marginBottom)\n\t\t\t\t\t\t? sectionNode.style.marginBottom = item.marginBottom + 'px'\n\t\t\t\t\t\t: null;\n\t\t\t\t}\n\t\t\t\tif (item?.className)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(sectionNode, item.className);\n\t\t\t\t}\n\n\t\t\t\tif (item?.attrs)\n\t\t\t\t{\n\t\t\t\t\tDom.adjust(sectionNode, {attrs: item.attrs});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isDomNode(item?.html))\n\t\t\t\t{\n\t\t\t\t\tsectionNode.appendChild(this.getItem(item).getContainer());\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(item?.html))\n\t\t\t\t{\n\t\t\t\t\tlet innerSection = Tag.render`\n\t\t\t\t\t\t<div class=\"ui-popupcomponentmaker__content--section-item --flex-column --transparent\"></div>\n\t\t\t\t\t`;\n\n\t\t\t\t\titem.html.map((itemObj)=> {\n\n\t\t\t\t\t\tif (itemObj?.html?.then)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustPromise(itemObj, sectionNode);\n\t\t\t\t\t\t\tType.isNumber(itemObj?.marginBottom)\n\t\t\t\t\t\t\t\t? sectionNode.style.marginBottom = itemObj.marginBottom + 'px'\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isArray(itemObj?.html))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemObj.html.map((itemInner)=> {\n\t\t\t\t\t\t\t\t\tinnerSection.appendChild(this.getItem(itemInner).getContainer());\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsectionNode.appendChild(innerSection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsectionNode.appendChild(this.getItem(itemObj).getContainer());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(item?.html?.then))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustPromise(item, sectionNode);\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.contentWrapper;\n\t}\n\n\tadjustPromise(item: Object, sectionNode: HTMLElement)\n\t{\n\t\titem.awaitContent = true;\n\t\tlet itemObj = this.getItem(item);\n\n\t\tif (sectionNode)\n\t\t{\n\t\t\tsectionNode.appendChild(itemObj.getContainer());\n\t\t\titem?.html?.then((node) => {\n\t\t\t\tif (Type.isDomNode(node))\n\t\t\t\t{\n\t\t\t\t\titemObj.stopAwait();\n\t\t\t\t\titemObj.updateContent(node);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-popupcomponentmaker__content--section\"></div>\n\t\t`;\n\t}\n\n\tsetBlurBackground(): void\n\t{\n\t\tconst container = this.getPopup().getPopupContainer();\n\t\tconst windowStyles = window.getComputedStyle(document.body);\n\t\tconst backgroundImage = windowStyles.backgroundImage;\n\t\tconst backgroundColor = windowStyles.backgroundColor;\n\n\t\tif (Type.isDomNode(container))\n\t\t{\n\t\t\tDom.addClass(container, 'popup-window-blur');\n\t\t}\n\n\t\tlet blurStyle = Dom.create('style', {\n\t\t\tattrs: {\n\t\t\t\ttype: 'text/css',\n\t\t\t\tid: 'styles-widget-blur',\n\t\t\t}\n\t\t});\n\n\t\tlet styles = '.popup-window-content:after { '\n\t\t\t+ 'background-image: '\n\t\t\t+ backgroundImage\n\t\t\t+ ';'\n\t\t\t+ 'background-color: '\n\t\t\t+ backgroundColor\n\t\t\t+ '} ';\n\n\t\tstyles = document.createTextNode(styles);\n\t\tblurStyle.appendChild(styles);\n\n\t\tlet stylesWithAngle = '.popup-window-angly:after { ' + 'background-color: ' + backgroundColor + '} ';\n\n\t\tstylesWithAngle = document.createTextNode(stylesWithAngle);\n\t\tblurStyle.appendChild(stylesWithAngle);\n\t\tconst headStyle = document.head.querySelector('#styles-widget-blur');\n\n\t\tif (headStyle)\n\t\t{\n\t\t\tDom.replace(headStyle, blurStyle);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.head.appendChild(blurStyle);\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tif (!Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getPopup().show();\n\t}\n\n\tclose()\n\t{\n\t\tthis.getPopup().close();\n\t}\n}\n\nexport {\n\tPopupComponentsMakerItem,\n\tPopupComponentsMaker\n};"],"names":["PopupComponentsMakerItem","EventEmitter","constructor","options","html","Type","isDomNode","awaitContent","isBoolean","flex","isNumber","withoutBackground","backgroundColor","isString","backgroundImage","marginBottom","disabled","secondary","overflow","displayBlock","attrs","isPlainObject","minHeight","sizeLoader","asyncSecondary","Promise","layout","container","await","getLoader","loader","Loader","target","getContainer","size","classList","add","showLoader","stopAwait","remove","hideLoader","show","hide","getContent","updateContent","node","Dom","clean","appendChild","setBackgroundColor","color","style","getMarginBottom","Tag","render","addClass","adjust","then","removeClass","PopupComponentsMaker","id","content","width","cacheable","contentPadding","padding","offsetTop","blurBackground","useAngle","isElementNode","contentWrapper","popup","items","blurBlackground","isUndefined","getItems","getItem","item","indexOf","push","getPopup","popupWidth","popupId","Popup","className","contentBackground","angle","offset","offsetLeft","offsetWidth","autoHide","closeByEsc","animation","getContentWrapper","getPopupContainer","setBlurBackground","subscribe","GLOBAL_TARGET","setTimeout","getContentContainer","overflowX","isShown","map","sectionNode","getSection","isArray","innerSection","itemObj","adjustPromise","itemInner","isFunction","windowStyles","window","getComputedStyle","document","body","blurStyle","create","type","styles","createTextNode","stylesWithAngle","headStyle","head","querySelector","replace","close"],"mappings":"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"}