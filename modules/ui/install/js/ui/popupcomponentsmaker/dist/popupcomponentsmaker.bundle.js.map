{"version":3,"file":"popupcomponentsmaker.bundle.js","sources":["../src/popup.item.js","../src/popup.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Type, Tag, Dom } from 'main.core';\nimport { Loader } from 'main.loader';\n\nexport default class PopupComponentsMakerItem extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\n\t\tthis.html = Type.isDomNode(options?.html) ? options.html : null;\n\t\tthis.awaitContent = Type.isBoolean(options?.awaitContent) ? options?.awaitContent : null;\n\t\tthis.flex = Type.isNumber(options?.flex) ? options.flex : null;\n\t\tthis.withoutBackground = Type.isBoolean(options?.withoutBackground) ? options.withoutBackground : null;\n\t\tthis.backgroundColor = Type.isString(options?.backgroundColor) ? options.backgroundColor : null;\n\t\tthis.marginBottom = Type.isNumber(options?.marginBottom) ? options.marginBottom : null;\n\t\tthis.disabled = Type.isBoolean(options?.disabled) ? options.disabled : null;\n\t\tthis.overflow = Type.isBoolean(options?.overflow) ? options.overflow : null;\n\t\tthis.displayBlock = Type.isBoolean(options?.displayBlock) ? options.displayBlock : null;\n\t\tthis.layout = {\n\t\t\tcontainer: null\n\t\t};\n\n\t\tif (this.awaitContent)\n\t\t{\n\t\t\tthis.await();\n\t\t}\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.getContainer(),\n\t\t\t\tsize: 45\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tawait()\n\t{\n\t\tthis.getContainer().classList.add('--awaiting');\n\t\tthis.showLoader();\n\t}\n\n\tstopAwait()\n\t{\n\t\tthis.getContainer().classList.remove('--awaiting');\n\t\tthis.hideLoader();\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader(): void\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tgetContent()\n\t{\n\t\tif (this.html)\n\t\t{\n\t\t\treturn this.html;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tupdateContent(node: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.clean(this.getContainer());\n\t\t\tthis.getContainer().appendChild(node);\n\t\t}\n\t}\n\n\tsetBackgroundColor(color: string)\n\t{\n\t\tif (Type.isString(color))\n\t\t{\n\t\t\tthis.getContainer().style.backgroundColor = color;\n\t\t}\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__content--section-item\">${this.getContent()}</div>\n\t\t\t`;\n\n\t\t\tif (this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.backgroundColor = this.backgroundColor;\n\t\t\t}\n\n\t\t\tif (this.withoutBackground && !this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--transparent');\n\t\t\t}\n\n\t\t\tif (this.flex)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.flex = this.flex;\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--disabled');\n\t\t\t}\n\n\t\t\tif (this.overflow)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--overflow-hidden');\n\t\t\t}\n\n\t\t\tif (this.displayBlock)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--block');\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n}\n","import PopupComponentsMakerItem from './popup.item';\nimport { Type, Tag } from 'main.core';\nimport { Popup } from 'main.popup';\n\nexport class PopupComponentsMaker\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.id = Type.isString(options.id) ? options.id : null;\n\t\tthis.target = Type.isElementNode(options.target) ? options.target : null;\n\t\tthis.content = options.content || null;\n\t\tthis.contentWrapper = null;\n\t\tthis.popup = null;\n\t\tthis.loader = null;\n\t\tthis.items = [];\n\t\tthis.width = Type.isNumber(options.width) ? options.width : null;\n\t\tthis.cacheable = Type.isBoolean(options.cacheable) ? options.cacheable : true;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItem(item): PopupComponentsMakerItem\n\t{\n\t\tif (item instanceof PopupComponentsMakerItem)\n\t\t{\n\t\t\treturn item;\n\t\t}\n\n\t\titem = new PopupComponentsMakerItem(item);\n\n\t\tif (this.items.indexOf(item) === -1)\n\t\t{\n\t\t\tthis.items.push(item);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst popupWidth = this.width ? this.width : 350;\n\n\t\t\tconst popupId = this.id ? this.id + '-popup' : null;\n\n\t\t\tthis.popup = new Popup(popupId, this.target, {\n\t\t\t\tclassName: 'ui-qr-popupcomponentmaker',\n\t\t\t\t// background: 'transparent',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tangle: {\n\t\t\t\t\toffset: (popupWidth / 2) - 16\n\t\t\t\t},\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target ? this.target.offsetWidth / 2 : 0) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 13,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent: this.getContentWrapper(),\n\t\t\t\tcacheable: this.cacheable\n\t\t\t});\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.getPopup().isShown();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContentWrapper(): HTMLElement\n\t{\n\t\tif (!this.contentWrapper)\n\t\t{\n\t\t\tthis.contentWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__content\"></div>\n\t\t\t`;\n\n\t\t\tif (!this.content)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.content.map((item)=> {\n\t\t\t\tlet sectionNode = this.getSection()\n\n\t\t\t\tif (item?.marginBottom)\n\t\t\t\t{\n\t\t\t\t\tType.isNumber(item.marginBottom)\n\t\t\t\t\t\t? sectionNode.style.marginBottom = item.marginBottom + 'px'\n\t\t\t\t\t\t: null;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isDomNode(item?.html))\n\t\t\t\t{\n\t\t\t\t\tsectionNode.appendChild(this.getItem(item).getContainer());\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(item?.html))\n\t\t\t\t{\n\t\t\t\t\tlet innerSection = Tag.render`\n\t\t\t\t\t\t<div class=\"ui-qr-popupcomponentmaker__content--section-item --flex-column --transparent\"></div>\n\t\t\t\t\t`;\n\n\t\t\t\t\titem.html.map((itemObj)=> {\n\n\t\t\t\t\t\tif (itemObj?.html?.then)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustPromise(itemObj, sectionNode);\n\t\t\t\t\t\t\tType.isNumber(itemObj?.marginBottom)\n\t\t\t\t\t\t\t\t? sectionNode.style.marginBottom = itemObj.marginBottom + 'px'\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isArray(itemObj?.html))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemObj.html.map((itemInner)=> {\n\t\t\t\t\t\t\t\t\tinnerSection.appendChild(this.getItem(itemInner).getContainer());\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsectionNode.appendChild(innerSection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsectionNode.appendChild(this.getItem(itemObj).getContainer());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(item?.html?.then))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustPromise(item, sectionNode);\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.contentWrapper;\n\t}\n\n\tadjustPromise(item: Object, sectionNode: HTMLElement)\n\t{\n\t\titem.awaitContent = true;\n\t\tlet itemObj = this.getItem(item);\n\n\t\tif (sectionNode)\n\t\t{\n\t\t\tsectionNode.appendChild(itemObj.getContainer());\n\t\t\titem?.html?.then((node) => {\n\t\t\t\tif (Type.isDomNode(node))\n\t\t\t\t{\n\t\t\t\t\titemObj.stopAwait();\n\t\t\t\t\titemObj.updateContent(node);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-qr-popupcomponentmaker__content--section\"></div>\n\t\t`;\n\t}\n\n\tshow()\n\t{\n\t\tif (!Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getPopup().show();\n\t}\n\n\tclose()\n\t{\n\t\tthis.getPopup().close();\n\t}\n}"],"names":["PopupComponentsMakerItem","options","html","Type","isDomNode","awaitContent","isBoolean","flex","isNumber","withoutBackground","backgroundColor","isString","marginBottom","disabled","overflow","displayBlock","layout","container","loader","Loader","target","getContainer","size","classList","add","showLoader","remove","hideLoader","getLoader","show","hide","node","Dom","clean","appendChild","color","style","Tag","render","getContent","EventEmitter","PopupComponentsMaker","id","isElementNode","content","contentWrapper","popup","items","width","cacheable","item","indexOf","push","popupWidth","popupId","Popup","className","contentBackground","angle","offset","offsetLeft","offsetWidth","autoHide","closeByEsc","padding","animation","getContentWrapper","getContentContainer","overflowX","getPopup","isShown","map","sectionNode","getSection","getItem","isArray","innerSection","itemObj","then","adjustPromise","itemInner","isFunction","stopAwait","updateContent","close"],"mappings":"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"}