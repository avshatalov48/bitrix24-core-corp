{"version":3,"file":"popupcomponentsmaker.bundle.js","sources":["../src/popup.item.js","../src/popup.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Type, Tag, Dom } from 'main.core';\nimport { Loader } from 'main.loader';\n\nexport default class PopupComponentsMakerItem extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\n\t\tthis.html = Type.isDomNode(options?.html) ? options.html : null;\n\t\tthis.awaitContent = Type.isBoolean(options?.awaitContent) ? options?.awaitContent : null;\n\t\tthis.flex = Type.isNumber(options?.flex) ? options.flex : null;\n\t\tthis.withoutBackground = Type.isBoolean(options?.withoutBackground) ? options.withoutBackground : null;\n\t\tthis.backgroundColor = Type.isString(options?.backgroundColor) ? options.backgroundColor : null;\n\t\tthis.backgroundImage = Type.isString(options?.backgroundImage) ? options.backgroundImage : null;\n\t\tthis.marginBottom = Type.isNumber(options?.marginBottom) ? options.marginBottom : null;\n\t\tthis.disabled = Type.isBoolean(options?.disabled) ? options.disabled : null;\n\t\tthis.secondary = Type.isBoolean(options?.secondary) ? options.secondary : null;\n\t\tthis.overflow = Type.isBoolean(options?.overflow) ? options.overflow : null;\n\t\tthis.displayBlock = Type.isBoolean(options?.displayBlock) ? options.displayBlock : null;\n\t\tthis.attrs = Type.isPlainObject(options?.attrs) ? options.attrs : null;\n\t\tthis.minHeight = Type.isString(options?.minHeight) ? options.minHeight : null;\n\t\tthis.sizeLoader = Type.isNumber(options?.sizeLoader) ? options.sizeLoader : 45;\n\t\tthis.asyncSecondary = (options?.asyncSecondary instanceof Promise) ? options.asyncSecondary : null;\n\n\t\tthis.layout = {\n\t\t\tcontainer: null\n\t\t};\n\n\t\tif (this.awaitContent)\n\t\t{\n\t\t\tthis.await();\n\t\t}\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.getContainer(),\n\t\t\t\tsize: this.sizeLoader\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tawait()\n\t{\n\t\tthis.getContainer().classList.add('--awaiting');\n\t\tthis.showLoader();\n\t}\n\n\tstopAwait()\n\t{\n\t\tthis.getContainer().classList.remove('--awaiting');\n\t\tthis.hideLoader();\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader(): void\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tgetContent()\n\t{\n\t\tif (this.html)\n\t\t{\n\t\t\treturn this.html;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tupdateContent(node: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\tDom.clean(this.getContainer());\n\t\t\tthis.getContainer().appendChild(node);\n\t\t}\n\t}\n\n\tsetBackgroundColor(color: string)\n\t{\n\t\tif (Type.isString(color))\n\t\t{\n\t\t\tthis.getContainer().style.backgroundColor = color;\n\t\t}\n\t}\n\n\tgetMarginBottom()\n\t{\n\t\treturn this.marginBottom;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__content--section-item\">${this.getContent()}</div>\n\t\t\t`;\n\n\t\t\tif (this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.backgroundColor = this.backgroundColor;\n\t\t\t}\n\t\t\tif (this.backgroundImage)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.backgroundImage = this.backgroundImage;\n\t\t\t}\n\n\t\t\tif (this.withoutBackground && !this.backgroundColor)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--transparent');\n\t\t\t}\n\n\t\t\tif (this.flex)\n\t\t\t{\n\t\t\t\tthis.layout.container.style.flex = this.flex;\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--disabled');\n\t\t\t}\n\n\t\t\tif (this.disabled)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--disabled');\n\t\t\t}\n\n\t\t\tif (this.secondary)\n\t\t\t{\n\t\t\t\tDom.addClass(this.layout.container, '--secondary');\n\t\t\t}\n\n\t\t\tif (this.overflow)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--overflow-hidden');\n\t\t\t}\n\n\t\t\tif (this.displayBlock)\n\t\t\t{\n\t\t\t\tthis.layout.container.classList.add('--block');\n\t\t\t}\n\n\t\t\tif (this.attrs)\n\t\t\t{\n\t\t\t\tDom.adjust(this.layout.container, {attrs: this.attrs});\n\t\t\t}\n\n\t\t\tif (this.minHeight)\n\t\t\t{\n\t\t\t\tDom.style(this.layout.container, 'min-height', this.minHeight);\n\t\t\t}\n\n\t\t\tif (this.asyncSecondary)\n\t\t\t{\n\t\t\t\tthis.asyncSecondary.then((secondary) => {\n\t\t\t\t\tif (secondary === false)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.layout.container, '--secondary');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.container, '--secondary');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n}\n","import {Type, Tag, Dom} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {EventEmitter} from \"main.core.events\";\n\nimport PopupComponentsMakerItem from './popup.item';\n\nimport 'ui.fonts.opensans';\nimport 'ui.design-tokens';\nimport './style.css';\n\nclass PopupComponentsMaker\n{\n\tconstructor({ id, target, content, width, cacheable, contentPadding, padding, blurBackground })\n\t{\n\t\tthis.id = Type.isString(id) ? id : null;\n\t\tthis.target = Type.isElementNode(target) ? target : null;\n\t\tthis.content = content || null;\n\t\tthis.contentWrapper = null;\n\t\tthis.popup = null;\n\t\tthis.loader = null;\n\t\tthis.items = [];\n\t\tthis.width = Type.isNumber(width) ? width : null;\n\t\tthis.cacheable = Type.isBoolean(cacheable) ? cacheable : true;\n\t\tthis.contentPadding = Type.isNumber(contentPadding) ? contentPadding : 0;\n\t\tthis.padding = Type.isNumber(padding) ? padding : 13;\n\t\tthis.blurBlackground = Type.isBoolean(blurBackground) ? blurBackground : false;\n\t}\n\n\tgetItems()\n\t{\n\t\treturn this.items;\n\t}\n\n\tgetItem(item): PopupComponentsMakerItem\n\t{\n\t\tif (item instanceof PopupComponentsMakerItem)\n\t\t{\n\t\t\treturn item;\n\t\t}\n\n\t\titem = new PopupComponentsMakerItem(item);\n\n\t\tif (this.items.indexOf(item) === -1)\n\t\t{\n\t\t\tthis.items.push(item);\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst popupWidth = this.width ? this.width : 350;\n\n\t\t\tconst popupId = this.id ? this.id + '-popup' : null;\n\n\t\t\tthis.popup = new Popup(popupId, this.target, {\n\t\t\t\tclassName: 'ui-popupcomponentmaker',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tcontentPadding: this.contentPadding,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: (popupWidth / 2) - 16\n\t\t\t\t},\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target ? this.target.offsetWidth / 2 : 0) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: this.padding,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent: this.getContentWrapper(),\n\t\t\t\tcacheable: this.cacheable\n\t\t\t});\n\n\t\t\tif (this.blurBlackground)\n\t\t\t{\n\t\t\t\tDom.addClass(this.popup.getPopupContainer(), 'popup-with-radius');\n\t\t\t\tthis.setBlurBackground();\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply', () => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setBlurBackground();\n\t\t\t\t\t\t}, 200)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.getPopup().isShown();\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetContentWrapper(): HTMLElement\n\t{\n\t\tif (!this.contentWrapper)\n\t\t{\n\t\t\tthis.contentWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__content\"></div>\n\t\t\t`;\n\n\t\t\tif (!this.content)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.content.map((item)=> {\n\t\t\t\tlet sectionNode = this.getSection()\n\n\t\t\t\tif (item?.marginBottom)\n\t\t\t\t{\n\t\t\t\t\tType.isNumber(item.marginBottom)\n\t\t\t\t\t\t? sectionNode.style.marginBottom = item.marginBottom + 'px'\n\t\t\t\t\t\t: null;\n\t\t\t\t}\n\t\t\t\tif (item?.className)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(sectionNode, item.className);\n\t\t\t\t}\n\n\t\t\t\tif (item?.attrs)\n\t\t\t\t{\n\t\t\t\t\tDom.adjust(sectionNode, {attrs: item.attrs});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isDomNode(item?.html))\n\t\t\t\t{\n\t\t\t\t\tsectionNode.appendChild(this.getItem(item).getContainer());\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(item?.html))\n\t\t\t\t{\n\t\t\t\t\tlet innerSection = Tag.render`\n\t\t\t\t\t\t<div class=\"ui-popupcomponentmaker__content--section-item --flex-column --transparent\"></div>\n\t\t\t\t\t`;\n\n\t\t\t\t\titem.html.map((itemObj)=> {\n\n\t\t\t\t\t\tif (itemObj?.html?.then)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.adjustPromise(itemObj, sectionNode);\n\t\t\t\t\t\t\tType.isNumber(itemObj?.marginBottom)\n\t\t\t\t\t\t\t\t? sectionNode.style.marginBottom = itemObj.marginBottom + 'px'\n\t\t\t\t\t\t\t\t: null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Type.isArray(itemObj?.html))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titemObj.html.map((itemInner)=> {\n\t\t\t\t\t\t\t\t\tinnerSection.appendChild(this.getItem(itemInner).getContainer());\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsectionNode.appendChild(innerSection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsectionNode.appendChild(this.getItem(itemObj).getContainer());\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(item?.html?.then))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustPromise(item, sectionNode);\n\t\t\t\t\tthis.contentWrapper.appendChild(sectionNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.contentWrapper;\n\t}\n\n\tadjustPromise(item: Object, sectionNode: HTMLElement)\n\t{\n\t\titem.awaitContent = true;\n\t\tlet itemObj = this.getItem(item);\n\n\t\tif (sectionNode)\n\t\t{\n\t\t\tsectionNode.appendChild(itemObj.getContainer());\n\t\t\titem?.html?.then((node) => {\n\t\t\t\tif (Type.isDomNode(node))\n\t\t\t\t{\n\t\t\t\t\titemObj.stopAwait();\n\t\t\t\t\titemObj.updateContent(node);\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-popupcomponentmaker__content--section\"></div>\n\t\t`;\n\t}\n\n\tsetBlurBackground(): void\n\t{\n\t\tconst container = this.getPopup().getPopupContainer();\n\t\tconst windowStyles = window.getComputedStyle(document.body);\n\t\tconst backgroundImage = windowStyles.backgroundImage;\n\t\tconst backgroundColor = windowStyles.backgroundColor;\n\n\t\tif (Type.isDomNode(container))\n\t\t{\n\t\t\tDom.addClass(container, 'popup-window-blur');\n\t\t}\n\n\t\tlet blurStyle = Dom.create('style', {\n\t\t\tattrs: {\n\t\t\t\ttype: 'text/css',\n\t\t\t\tid: 'styles-widget-blur',\n\t\t\t}\n\t\t});\n\n\t\tlet styles = '.popup-window-content:after { '\n\t\t\t+ 'background-image: '\n\t\t\t+ backgroundImage\n\t\t\t+ ';'\n\t\t\t+ 'background-color: '\n\t\t\t+ backgroundColor\n\t\t\t+ '} ';\n\n\t\tstyles = document.createTextNode(styles);\n\t\tblurStyle.appendChild(styles);\n\n\t\tlet stylesWithAngle = '.popup-window-angly:after { ' + 'background-color: ' + backgroundColor + '} ';\n\n\t\tstylesWithAngle = document.createTextNode(stylesWithAngle);\n\t\tblurStyle.appendChild(stylesWithAngle);\n\t\tconst headStyle = document.head.querySelector('#styles-widget-blur');\n\n\t\tif (headStyle)\n\t\t{\n\t\t\tDom.replace(headStyle, blurStyle);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.head.appendChild(blurStyle);\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tif (!Type.isDomNode(this.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.getPopup().show();\n\t}\n\n\tclose()\n\t{\n\t\tthis.getPopup().close();\n\t}\n}\n\nexport {\n\tPopupComponentsMakerItem,\n\tPopupComponentsMaker\n};"],"names":["PopupComponentsMakerItem","options","html","Type","isDomNode","awaitContent","isBoolean","flex","isNumber","withoutBackground","backgroundColor","isString","backgroundImage","marginBottom","disabled","secondary","overflow","displayBlock","attrs","isPlainObject","minHeight","sizeLoader","asyncSecondary","Promise","layout","container","loader","Loader","target","getContainer","size","classList","add","showLoader","remove","hideLoader","getLoader","show","hide","node","Dom","clean","appendChild","color","style","Tag","render","getContent","addClass","adjust","then","removeClass","EventEmitter","PopupComponentsMaker","id","content","width","cacheable","contentPadding","padding","blurBackground","isElementNode","contentWrapper","popup","items","blurBlackground","item","indexOf","push","popupWidth","popupId","Popup","className","contentBackground","angle","offset","offsetLeft","offsetWidth","autoHide","closeByEsc","animation","getContentWrapper","getPopupContainer","setBlurBackground","subscribe","GLOBAL_TARGET","setTimeout","getContentContainer","overflowX","getPopup","isShown","map","sectionNode","getSection","getItem","isArray","innerSection","itemObj","adjustPromise","itemInner","isFunction","stopAwait","updateContent","windowStyles","window","getComputedStyle","document","body","blurStyle","create","type","styles","createTextNode","stylesWithAngle","headStyle","head","querySelector","replace","close"],"mappings":"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"}