{"version":3,"file":"bottomsheet.bundle.js","sources":["../src/touchdraglistener.js","../src/bottomsheet.js"],"sourcesContent":["import { Type } from 'main.core';\n\nexport default class TouchDragListener\n{\n\tconstructor({\n\t\telement,\n\t\ttouchStartCallback,\n\t\ttouchEndCallback,\n\t\ttouchMoveCallback\n\t})\n\t{\n\t\tthis.element = Type.isDomNode(element) ? element : null;\n\t\tthis.touchStartCallback = touchStartCallback;\n\t\tthis.touchEndCallback = touchEndCallback;\n\t\tthis.touchMoveCallback = touchMoveCallback;\n\n\t\tthis.active = false;\n\t\tthis.currentY = null;\n\t\tthis.initialY = null;\n\t\tthis.yOffset = 0;\n\n\t\tthis.#bindEvents();\n\t}\n\n\t#bindEvents()\n\t{\n\t\tif (this.element)\n\t\t{\n\t\t\tthis.element.addEventListener('touchstart', this.#dragStart.bind(this));\n\t\t\tthis.element.addEventListener('touchend', this.#dragEnd.bind(this));\n\t\t\tthis.element.addEventListener('touchmove', this.#dragMove.bind(this));\n\t\t}\n\t}\n\n\t#dragStart(ev)\n\t{\n\t\tthis.active = true;\n\t\tthis.element.classList.add('--ondrag');\n\n\t\tif (ev.type === 'touchstart')\n\t\t{\n\t\t\tthis.initialY = ev.touches[0].clientY - this.yOffset;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initialY = ev.clientY - this.yOffset;\n\t\t}\n\n\t\tif (!this.touchStartCallback)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchStartCallback({\n\t\t\telement: this.element,\n\t\t\tactive: this.active,\n\t\t\tcurrentY: this.currentY,\n\t\t\tinitialY: this.initialY,\n\t\t\tyOffset: this.offSetY\n\t\t});\n\t}\n\n\t#dragEnd(ev)\n\t{\n\t\tthis.active = true;\n\t\tthis.element.classList.remove('--ondrag');\n\n\t\tthis.yOffset = 0;\n\n\t\tthis.initialY = this.currentY;\n\n\t\tif (!this.touchEndCallback) return;\n\n\t\tthis.touchEndCallback({\n\t\t\telement: this.element,\n\t\t\tactive: this.active,\n\t\t\tcurrentY: this.currentY,\n\t\t\tinitialY: this.initialY,\n\t\t\tyOffset: this.offSetY\n\t\t});\n\t}\n\t\n\t#dragMove(ev)\n\t{\n\t\tif (!this.active)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tev.preventDefault();\n\n\t\tif (ev.type === 'touchmove')\n\t\t{\n\t\t\tthis.currentY = ev.touches[0].clientY - this.initialY;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.currentY = ev.clientY - this.initialY;\n\t\t}\n\n\t\tthis.yOffset = this.currentX;\n\n\t\tif (!this.touchMoveCallback)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.touchMoveCallback({\n\t\t\telement: this.element,\n\t\t\tactive: this.active,\n\t\t\tcurrentY: this.currentY,\n\t\t\tinitialY: this.initialY,\n\t\t\tyOffset: this.offSetY\n\t\t});\n\t}\n}","import { Type, Tag, Dom, Loc } from 'main.core';\nimport TouchDragListener from './touchdraglistener';\nimport 'ui.fonts.roboto';\nimport './style.css';\n\nexport default class BottomSheet\n{\n\tconstructor({\n\t\tcontent,\n\t\thelp,\n\t\tclassName,\n\t\tpadding\n\t})\n\t{\n\t\tthis.content = Type.isDomNode(content) ? content : null;\n\t\tthis.className = Type.isString(className) ? className : '';\n\t\tthis.padding = Type.isString(padding) || Type.isNumber(padding) ? padding : null;\n\n\t\tthis.help = null;\n\t\tswitch (true)\n\t\t{\n\t\t\tcase Type.isString(help):\n\t\t\t\tthis.help = help;\n\t\t\t\tbreak;\n\t\t\tcase Type.isFunction(help):\n\t\t\t\tthis.help = help;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.layout = {\n\t\t\twrapper: null,\n\t\t\tcontainer: null,\n\t\t\tcontent: null,\n\t\t\toverlay: null,\n\t\t\tclose: null,\n\t\t\thelp: null\n\t\t};\n\n\t\tthis.halfOfHeight = 0;\n\t\tthis.currentHeight = null;\n\n\t\tthis.sheetListener = new TouchDragListener({\n\t\t\telement: this.#getPanel(),\n\t\t\ttouchStartCallback: ({element, active, initialY, currentY, yOffset}) => {\n\t\t\t\telement.style.setProperty('--translateY', 'translateY(0)');\n\t\t\t\telement.style.setProperty('transition', 'unset');\n\t\t\t},\n\t\t\ttouchEndCallback: ({element, active, initialY, currentY, yOffset}) => {\n\t\t\t\telement.style.setProperty(\n\t\t\t\t\t'transition',\n\t\t\t\t\t'transform .3s'\n\t\t\t\t);\n\t\t\t\telement.style.setProperty(\n\t\t\t\t\t'--translateY',\n\t\t\t\t\t'translateY(' + currentY + 'px)'\n\t\t\t\t);\n\n\t\t\t\tif (parseInt(currentY) > this.halfOfHeight)\n\t\t\t\t{\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t},\n\t\t\ttouchMoveCallback: ({element, active, initialY, currentY, yOffset}) => {\n\t\t\t\t\n\t\t\t\tif (currentY <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (currentY <= -40)\n\t\t\t\t{\n\t\t\t\t\tcurrentY = -41 + currentY / 10;\n\t\t\t\t}\n\n\t\t\t\telement.style.setProperty(\n\t\t\t\t\t'--translateY',\n\t\t\t\t\t'translateY(' + currentY + 'px)'\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tif (this.content)\n\t\t{\n\t\t\tthis.setContent(this.content);\n\t\t}\n\t}\n\n\t#getOverlay()\n\t{\n\t\tif (!this.layout.overlay)\n\t\t{\n\t\t\tthis.layout.overlay = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet__overlay\"></div>\n\t\t\t`;\n\n\t\t\tthis.layout.overlay.addEventListener('click', this.close.bind(this));\n\t\t}\n\n\t\treturn this.layout.overlay;\n\t}\n\n\t#getHelp()\n\t{\n\t\tif (!this.layout.help)\n\t\t{\n\t\t\tif (Type.isString(this.help))\n\t\t\t{\n\t\t\t\tthis.layout.help = Tag.render`\n\t\t\t\t\t<a href=\"${this.help}\" class=\"ui-bottomsheet__panel-control--item --cursor-pointer\">\n\t\t\t\t\t\t<span class=\"ui-bottomsheet__panel-control--item-text\">${Loc.getMessage('UI_BOTTOMSHEET_HELP')}</span>\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\tif (Type.isFunction(this.help))\n\t\t\t{\n\t\t\t\tthis.layout.help = Tag.render`\n\t\t\t\t\t<div class=\"ui-bottomsheet__panel-control--item --cursor-pointer\">\n\t\t\t\t\t\t<div class=\"ui-bottomsheet__panel-control--item-text\">${Loc.getMessage('UI_BOTTOMSHEET_HELP')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\t\tthis.layout.help.addEventListener('click', ()=> {\n\t\t\t\t\tthis.help();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.help;\n\t}\n\n\t#getClose()\n\t{\n\t\tif (!this.layout.close)\n\t\t{\n\t\t\tthis.layout.close = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet__panel-control--item --cursor-pointer --close\">\n\t\t\t\t\t<div class=\"ui-bottomsheet__panel-control--item-text\">${Loc.getMessage('UI_BOTTOMSHEET_CLOSE')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.layout.close.addEventListener('click', this.close.bind(this));\n\t\t}\n\n\t\treturn this.layout.close;\n\t}\n\n\t#getPanel()\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tconst panelWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet__panel-wrapper\">\n\t\t\t\t\t${this.#getContent()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tif (this.padding || this.padding === 0)\n\t\t\t{\n\t\t\t\tlet padding;\n\n\t\t\t\tswitch(true)\n\t\t\t\t{\n\t\t\t\t\tcase Type.isString(this.padding):\n\t\t\t\t\t\tpadding = this.padding;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Type.isNumber(this.padding):\n\t\t\t\t\t\tpadding = this.padding + 'px';\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tpanelWrapper.style.setProperty(\n\t\t\t\t\t'padding',\n\t\t\t\t\tpadding\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.layout.container = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet__panel\">\n\t\t\t\t\t<div class=\"ui-bottomsheet__panel-control\">\n\t\t\t\t\t\t${this.help ? this.#getHelp() : ''}\n\t\t\t\t\t\t<div class=\"ui-bottomsheet__panel-handler\"></div>\n\t\t\t\t\t\t${this.#getClose()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${panelWrapper}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.container;\n\t}\n\n\t#getContent()\n\t{\n\t\tif (!this.layout.content)\n\t\t{\n\t\t\tthis.layout.content = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet__panel-content\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.content;\n\t}\n\n\t#getWrapper()\n\t{\n\t\tif (!this.layout.wrapper)\n\t\t{\n\t\t\tthis.layout.wrapper = Tag.render`\n\t\t\t\t<div class=\"ui-bottomsheet ui-bottomsheet__scope ${this.className}\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.wrapper;\n\t}\n\t\n\tsetContent(content: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(content))\n\t\t{\n\t\t\tDom.clean(this.#getContent());\n\t\t\tthis.#getContent().appendChild(content);\n\t\t}\n\n\t\tif (Type.isString(content))\n\t\t{\n\t\t\tDom.clean(this.#getContent());\n\t\t\tthis.#getContent().innerText = content;\n\t\t}\n\t}\n\n\tadjustPosition()\n\t{\n\n\t}\n\n\tadjustSize()\n\t{\n\t\tif (this.currentHeight !== this.#getPanel().offsetHeight)\n\t\t{\n\t\t\tlet currentHeight = this.currentHeight;\n\t\t\tlet newHeight = this.#getPanel().offsetHeight;\n\t\t\tthis.#getPanel().style.setProperty(\n\t\t\t\t'height',\n\t\t\t\tcurrentHeight + 'px'\n\t\t\t);\n\n\t\t\tsetTimeout(()=> {\n\t\t\t\tcurrentHeight = this.#getPanel().offsetHeight;\n\t\t\t\tthis.#getPanel().style.setProperty(\n\t\t\t\t\t'height',\n\t\t\t\t\tnewHeight + 'px'\n\t\t\t\t);\n\n\t\t\t\tconst adjustHeight = ()=> {\n\t\t\t\t\tthis.#getPanel().style.removeProperty(\n\t\t\t\t\t\t'height',\n\t\t\t\t\t\tnewHeight + 'px'\n\t\t\t\t\t);\n\t\t\t\t\tthis.#getPanel().removeEventListener('transitionend', adjustHeight)\n\t\t\t\t};\n\n\t\t\t\tthis.#getPanel().addEventListener('transitionend', adjustHeight);\n\n\t\t\t\tthis.currentHeight = newHeight;\n\t\t\t\tthis.halfOfHeight = this.currentHeight / 2;\n\t\t\t});\n\t\t}\n\t}\n\n\tclose()\n\t{\n\t\tif (this.#getWrapper().parentNode)\n\t\t{\n\t\t\tthis.#getPanel().classList.remove('--show');\n\t\t\tthis.#getOverlay().classList.remove('--show');\n\n\t\t\tconst animationProgress = () => {\n\t\t\t\tthis.#getWrapper().classList.remove('--show');\n\t\t\t\tthis.#getPanel().removeEventListener('transitionend', animationProgress);\n\t\t\t}\n\n\t\t\tthis.#getPanel().addEventListener('transitionend', animationProgress)\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tif (!this.#getWrapper().parentNode)\n\t\t{\n\t\t\tthis.#getWrapper().appendChild(this.#getOverlay());\n\t\t\tthis.#getWrapper().appendChild(this.#getPanel());\n\t\t\tdocument.body.appendChild(this.#getWrapper());\n\t\t}\n\n\t\tthis.#getWrapper().classList.add('--show');\n\n\t\tsetTimeout(()=> {\n\t\t\tthis.currentHeight = this.#getPanel().offsetHeight;\n\t\t\tthis.halfOfHeight = this.currentHeight / 2;\n\t\t\tthis.#getPanel().classList.add('--show');\n\t\t\tthis.#getOverlay().classList.add('--show');\n\t\t});\n\t}\n}"],"names":["TouchDragListener","element","touchStartCallback","touchEndCallback","touchMoveCallback","Type","isDomNode","active","currentY","initialY","yOffset","addEventListener","bind","ev","classList","add","type","touches","clientY","offSetY","remove","preventDefault","currentX","BottomSheet","content","help","className","padding","_classPrivateMethodInitSpec","isString","isNumber","isFunction","layout","wrapper","container","overlay","close","halfOfHeight","currentHeight","sheetListener","style","setProperty","parseInt","setContent","Dom","clean","_classPrivateMethodGet","appendChild","innerText","offsetHeight","newHeight","setTimeout","adjustHeight","removeProperty","removeEventListener","parentNode","animationProgress","document","body","Tag","render","Loc","getMessage","panelWrapper"],"mappings":"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"}