{"version":3,"file":"switcher-nested.bundle.js","sources":["../src/warning-message.js","../src/switcher-nested-item.js","../src/switcher-nested.js"],"sourcesContent":["import { Popup } from 'main.popup';\nimport type { WarningMessageOptions } from './types';\n\nexport class WarningMessage\n{\n\t#popup: Popup;\n\t#id: string;\n\t#bindElement: HTMLElement;\n\t#message: HTMLElement;\n\n\tconstructor(options: WarningMessageOptions)\n\t{\n\t\tthis.#id = options.id;\n\t\tthis.#bindElement = options.bindElement;\n\t\tthis.#message = options.message;\n\t}\n\n\t#getPopup(): Popup\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\treturn this.#popup;\n\t\t}\n\n\t\tthis.#popup = new Popup({\n\t\t\tid: this.#id,\n\t\t\tbindElement: this.#bindElement,\n\t\t\tcontent: this.#message,\n\t\t\tdarkMode: true,\n\t\t\tautoHide: true,\n\t\t\tangle: true,\n\t\t\toffsetLeft: 14,\n\t\t\tbindOptions: {\n\t\t\t\tposition: 'bottom',\n\t\t\t},\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\treturn this.#popup;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#getPopup().show();\n\t}\n\n\thide(): void\n\t{\n\t\tthis.#getPopup().close();\n\t}\n}","import { Dom, Event, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Switcher, SwitcherSize } from 'ui.switcher';\nimport type { SwitcherNestedItemOptions } from './types';\nimport { WarningMessage } from './warning-message';\n\nexport class SwitcherNestedItem\n{\n\t#node: HTMLElement;\n\t#id: string;\n\t#inputName: string;\n\t#title: string;\n\t#switcher: Switcher;\n\t#isChecked: boolean;\n\t#settingsPath:? string;\n\t#settingsTitle:? string;\n\t#infoHelperCode:? string;\n\t#warning: WarningMessage;\n\t#warningMessage: HTMLElement;\n\t#isDefault: boolean;\n\n\tconstructor(options: SwitcherNestedItemOptions)\n\t{\n\t\tthis.#id = options.id;\n\t\tthis.#inputName = options.inputName;\n\t\tthis.#title = options.title;\n\t\tthis.#isChecked = options.isChecked;\n\t\tthis.#settingsPath = Type.isString(options.settingsPath) ? options.settingsPath : null;\n\t\tthis.#settingsTitle = Type.isString(options.settingsTitle) ? options.settingsTitle : null;\n\t\tthis.#infoHelperCode = Type.isString(options.infoHelperCode) ? options.infoHelperCode : null;\n\t\tthis.#isDefault = Type.isBoolean(options.isDefault) ? options.isDefault : false;\n\t\tthis.#warningMessage = options.helpMessage;\n\n\t\tEvent.bind(\n\t\t\tthis.getSwitcher().getNode(),\n\t\t\t'click',\n\t\t\t() => {\n\t\t\t\tif (this.#isDefault && !this.getSwitcher().isChecked())\n\t\t\t\t{\n\t\t\t\t\tthis.getSwitcher().check(true, false);\n\t\t\t\t\tDom.addClass(this.render(), '--active --checked');\n\t\t\t\t\tthis.getWarningMessage().show();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\tisDefault(): boolean\n\t{\n\t\treturn this.#isDefault;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#node)\n\t\t{\n\t\t\treturn this.#node;\n\t\t}\n\n\t\tthis.#node = Tag.render`\n\t\t\t<div class=\"ui-section__row-tool-selector --tool-selector${this.#isChecked ? ' --active --checked' : ''}\">\n\t\t\t\t<div class=\"ui-section__tools-subgroup_left-wrapper\">\n\t\t\t\t\t<div class=\"ui-section__switcher-row_wrapper\"/>\n\t\t\t\t\t<div class=\"ui-section__row-tool-selector_title\">${this.#title}</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#getLink()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#node;\n\t}\n\n\tgetSwitcher(): Switcher\n\t{\n\t\tif (this.#switcher instanceof Switcher)\n\t\t{\n\t\t\treturn this.#switcher;\n\t\t}\n\n\t\tthis.#switcher = this.createSwitcher(this.render().querySelector('.ui-section__switcher-row_wrapper'));\n\n\t\treturn this.#switcher;\n\t}\n\n\tcreateSwitcher(node: HTMLElement): Switcher\n\t{\n\t\treturn new Switcher({\n\t\t\tinputName: this.#inputName,\n\t\t\tnode: node,\n\t\t\tchecked: this.#isChecked,\n\t\t\tid: this.#id,\n\t\t\tsize: SwitcherSize.extraSmall,\n\t\t\thandlers: {\n\t\t\t\tchecked: () => { // There is in error in Switcher UI, so we have inversion in event names.\n\t\t\t\t\tDom.removeClass(this.render(), '--active --checked');\n\t\t\t\t\tEventEmitter.emit(this.getSwitcher(), 'inactive');\n\t\t\t\t},\n\t\t\t\tunchecked: () => {\n\t\t\t\t\tDom.addClass(this.render(), '--active --checked');\n\t\t\t\t\tEventEmitter.emit(this.getSwitcher(), 'active');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\trenderTo(targetNode: HTMLElement): HTMLElement\n\t{\n\t\tif (!Type.isDomNode(targetNode))\n\t\t{\n\t\t\tthrow new Error('Target node must be HTMLElement');\n\t\t}\n\n\t\treturn Dom.append(this.render(), targetNode);\n\t}\n\n\t#getLink(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.#settingsTitle))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isNil(this.#settingsPath))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a target=\"_blank\" data-slider-ignore-autobinding=\"true\" href=\"${this.#settingsPath}\" class=\"ui-section__tools-subgroup-description-link\">${this.#settingsTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\tif (!Type.isNil(this.#infoHelperCode))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"javascript:top.BX.UI.InfoHelper.show('${this.#infoHelperCode}')\" class=\"ui-section__tools-subgroup-description-link\">${this.#settingsTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetWarningMessage(): WarningMessage\n\t{\n\t\tif (this.#warning)\n\t\t{\n\t\t\treturn this.#warning;\n\t\t}\n\n\t\tthis.#warning = new WarningMessage({\n\t\t\tid: this.getId(),\n\t\t\tbindElement: this.getSwitcher().getNode(),\n\t\t\tmessage: this.#warningMessage,\n\t\t});\n\n\t\treturn this.#warning;\n\t}\n}\n","import { Dom, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { SwitcherNestedItem } from './switcher-nested-item';\nimport { Section } from 'ui.section';\nimport { Switcher } from 'ui.switcher';\nimport type { SwitcherNestedOptions } from './types';\nimport { WarningMessage } from './warning-message';\n\nexport class SwitcherNested extends Section\n{\n\tlinkTitle: ?HTMLElement;\n\tlink: ?HTMLElement;\n\titems: Array<SwitcherNestedItem>;\n\t#mainTool: Switcher;\n\tinfoHelperCode: ?string;\n\t#sectionWrapper: ?HTMLElement;\n\t#isDefault: boolean;\n\t#warningMessage: ?WarningMessage;\n\t#helpMessage: ?string;\n\n\tconstructor(options: SwitcherNestedOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.linkTitle = Type.isString(options.linkTitle) ? options.linkTitle : null;\n\t\tthis.link = Type.isString(options.link) ? options.link : null;\n\t\tthis.isChecked = Type.isBoolean(options.isChecked) ? options.isChecked : false;\n\t\tthis.items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.isNestedMenu = this.items.length > 0;\n\t\tthis.infoHelperCode = Type.isString(options.infoHelperCode) ? options.infoHelperCode : null;\n\t\tthis.#isDefault = Type.isBoolean(options.isDefault) ? options.isDefault : false;\n\t\tthis.#helpMessage = Type.isString(options.helpMessage) ? options.helpMessage : null;\n\n\t\tif (!Type.isString(options.mainInputName))\n\t\t{\n\t\t\tthrow new Error('Missing required parameter');\n\t\t}\n\n\t\tthis.mainInputName = options.mainInputName;\n\t\tthis.render();\n\t\tthis.items.forEach((item) => {\n\t\t\tthis.append(item.render());\n\t\t});\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tif (this.#sectionWrapper)\n\t\t{\n\t\t\treturn this.#sectionWrapper;\n\t\t}\n\n\t\tthis.#sectionWrapper = Tag.render`\n\t\t\t<div id=\"${this.id}\" class=\"ui-section__wrapper --tool-selector${this.isChecked ? ' --checked' : ''} ${this.isNestedMenu ? ' clickable' : ''}\" >\n\t\t\t\t<div class=\"ui-section__header\">\n\t\t\t\t\t<div class=\"ui-section__header-left-wrapper\">\n\t\t\t\t\t\t<span class=\"ui-section__switcher-wrapper\" onclick=\"event.stopPropagation()\"/>\n\t\t\t\t\t\t<span class=\"ui-section__title\">${this.title}</span>\n\t\t\t\t\t\t${this.#getMenuIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#getLink()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-section__content ui-section__section-body_inner\">\n\t\t\t\t\t<div class=\"ui-section__row_box\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#mainTool = this.#createSwitcher(this.#sectionWrapper.querySelector('.ui-section__switcher-wrapper'));\n\t\tif (this.#helpMessage)\n\t\t{\n\t\t\tthis.#warningMessage = this.getWarningMessage(this.#helpMessage);\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\tthis.#mainTool,\n\t\t\t'toggled',\n\t\t\t() => {\n\t\t\t\tif (this.#isDefault)\n\t\t\t\t{\n\t\t\t\t\tthis.#mainTool.check(true, false);\n\t\t\t\t\tif (this.#warningMessage)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#warningMessage.show();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.toggle(this.#mainTool.isChecked());\n\t\t\t\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\n\t\t\t\t\tDom[this.#mainTool.isChecked() ? 'addClass' : 'removeClass'](this.#sectionWrapper, '--checked');\n\t\t\t\t\tthis.items.forEach((item) => item.getSwitcher().check(this.#mainTool.isChecked()));\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\n\t\tthis.items.forEach(\n\t\t\t(item) => {\n\n\t\t\t\tif (item.isDefault() !== true) // if only this item is not required\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe(item.getSwitcher(), 'inactive', this.#turnOffDispensableTools.bind(this));\n\t\t\t\t}\n\n\t\t\t\tEventEmitter.subscribe(item.getSwitcher(), 'active', this.#turnOnMainAndRequiredTools.bind(this));\n\t\t\t});\n\n\t\treturn this.#sectionWrapper;\n\t}\n\n\t#turnOnMainAndRequiredTools()\n\t{\n\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\n\t\tif (this.#mainTool.isChecked())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#mainTool.check(true, false);\n\t\tthis.toggle(true);\n\t\tDom.addClass(this.#sectionWrapper, '--checked');\n\n\t\tthis.items.forEach((item) => {\n\t\t\treturn item.isDefault() && !item.getSwitcher().isChecked() ? item.getSwitcher().check(true) : null;\n\t\t});\n\t}\n\n\t#turnOffDispensableTools()\n\t{\n\t\tthis.#mainTool.inputNode.form.dispatchEvent(new Event('change'));\n\n\t\tif (this.#mainTool.isChecked() !== true)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.items.some((item) => item.getSwitcher().isChecked()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#mainTool.check(false, false);\n\t\tDom.removeClass(this.#sectionWrapper, '--checked');\n\t}\n\n\t#getMenuIcon(): HTMLElement\n\t{\n\t\tif (this.isNestedMenu)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-section__collapse-icon ui-icon-set ${this.isOpen ? this.className.arrowTop : this.className.arrowDown} --tool-selector-icon\"></span>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#getLink(): ?HTMLElement\n\t{\n\t\tif (Type.isNil(this.linkTitle))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!Type.isNil(this.link))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a target=\"_blank\" href=\"${this.link}\" class=\"ui-section__header-link ui-section__tools-description-link\" onclick=\"event.stopPropagation()\">${this.linkTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\tif (!Type.isNil(this.infoHelperCode))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"javascript:top.BX.UI.InfoHelper.show('${this.infoHelperCode}')\" class=\"ui-section__header-link ui-section__tools-description-link\" onclick=\"event.stopPropagation()\">${this.linkTitle}</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t#createSwitcher(node: HTMLElement): Switcher\n\t{\n\t\treturn new Switcher({\n\t\t\tinputName: this.mainInputName,\n\t\t\tnode: node,\n\t\t\tchecked: this.isChecked,\n\t\t\tid: this.id\n\t\t});\n\t}\n\n\tgetWarningMessage(message: HTMLElement): WarningMessage\n\t{\n\t\tif (this.#warningMessage)\n\t\t{\n\t\t\treturn this.#warningMessage;\n\t\t}\n\n\t\tthis.#warningMessage = new WarningMessage({\n\t\t\tid: this.id,\n\t\t\tbindElement: this.#mainTool.getNode(),\n\t\t\tmessage: message,\n\t\t});\n\n\t\treturn this.#warningMessage;\n\t}\n\n\tisDefault(): boolean\n\t{\n\t\treturn this.#isDefault;\n\t}\n}"],"names":["WarningMessage","options","id","bindElement","message","show","close","Popup","content","darkMode","autoHide","angle","offsetLeft","bindOptions","position","closeByEsc","SwitcherNestedItem","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","inputName","title","isChecked","Type","isString","settingsPath","settingsTitle","infoHelperCode","isBoolean","isDefault","helpMessage","Event","bind","getSwitcher","getNode","check","Dom","addClass","render","getWarningMessage","Tag","Switcher","createSwitcher","querySelector","node","checked","size","SwitcherSize","extraSmall","handlers","removeClass","EventEmitter","emit","unchecked","targetNode","isDomNode","Error","append","getId","isNil","SwitcherNested","linkTitle","link","items","isArray","isNestedMenu","length","mainInputName","forEach","item","subscribe","toggle","inputNode","form","dispatchEvent","_classPrivateMethodGet","Section","some","isOpen","className","arrowTop","arrowDown"],"mappings":"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"}