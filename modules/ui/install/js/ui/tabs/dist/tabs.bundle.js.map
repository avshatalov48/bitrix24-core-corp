{"version":3,"file":"tabs.bundle.js","sources":["../src/tab.js","../src/tabs.js"],"sourcesContent":["import {Tag, Dom, Loc, Type, Cache, Text, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport { Loader } from 'main.loader';\nimport { Tabs } from './tabs';\nimport type { TabOptionsType, TabHeadOptionsType } from './types';\n\nconst justCounter = {\n\tlocalId: 0,\n\tlocalSorting: 0\n};\n\nexport class Tab extends EventEmitter\n{\n\t#parentElement: ?Tabs;\n\n\t#id: string;\n\t#sort: number = 0;\n\t#head: HTMLElement;\n\t#body: HTMLElement;\n\t#dataContainer: HTMLElement;\n\t#active: boolean = false;\n\t#restricted: boolean = true;\n\t#bannerCode: ?string = null;\n\t#helpDeskCode: ?string = null;\n\n\t#loader: ?Loader = null;\n\n\tconstructor(options: TabOptionsType, parentElement: ?Tabs = null)\n\t{\n\t\tsuper({});\n\n\t\tthis.setEventNamespace('UI:Tabs:');\n\t\tthis.setParent(parentElement);\n\n\t\tthis.#id = Type.isStringFilled(options.id) ? options.id : ('TabId' + (++justCounter.localId));\n\t\tthis.#sort = Type.isInteger(options.sort) ? options.sort : (++justCounter.localSorting);\n\t\tthis.#active = Type.isBoolean(options.active) ? options.active : false;\n\n\t\tthis.#restricted = options.restricted === true;\n\t\tthis.#bannerCode = Type.isStringFilled(options.bannerCode) ? options.bannerCode : null;\n\t\tthis.#helpDeskCode = Type.isStringFilled(options.helpDeskCode) ? options.helpDeskCode : null;\n\n\t\tthis.#initHead(options.head);\n\t\tthis.#initBody(options.body);\n\t}\n\n\tgetSort()\n\t{\n\t\treturn this.#sort;\n\t}\n\n\tsetParent(parentElement: ?Tabs): this\n\t{\n\t\tif (parentElement instanceof Tabs)\n\t\t{\n\t\t\tthis.#parentElement = parentElement;\n\t\t}\n\t}\n\n\t#initHead(headOptions: TabHeadOptionsType | HTMLElement | string): HTMLElement\n\t{\n\t\tconst options = Type.isPlainObject(headOptions) ? headOptions : (Type.isStringFilled(headOptions) ?\n\t\t\t{title: headOptions} : {})\n\t\t;\n\t\tlet innerHeader;\n\t\tif (Type.isDomNode(headOptions))\n\t\t{\n\t\t\tinnerHeader = headOptions;\n\t\t}\n\t\telse if (this.#restricted !== true)\n\t\t{\n\t\t\tinnerHeader = Tag.render`<div title=\"${Text.encode(options.description ?? '')}\">${Text.encode(options.title) ?? '&nbsp;'}</div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinnerHeader = Tag.render`<div class=\"ui-tabs__tab-header-container-inner\" title=\"${Text.encode(options.description ?? '')}\">\n\t\t\t\t<div class=\"ui-tabs__tab-header-container-inner-title\">${Text.encode(options.title)}</div>\n\t\t\t\t<div class=\"ui-tabs__tab-header-container-inner-lockbox\"><span class=\"ui-icon-set --lock field-has-lock\"></span></div>\n\t\t\t</div>`;\n\t\t\tEvent.bind(innerHeader.querySelector('.field-has-lock'), 'click', this.showBanner.bind(this));\n\t\t}\n\n\t\tthis.#head = Tag.render`<span class=\"ui-tabs__tab-header-container ${Text.encode(options.className ?? '')}\" data-bx-role=\"tab-header\" data-bx-name=\"${Text.encode(this.#id)}\">${innerHeader}</span>`;\n\t}\n\n\t#initBody(body: Function | Promise | string | HTMLElement)\n\t{\n\t\tif (!this.#dataContainer)\n\t\t{\n\t\t\tthis.#dataContainer = Tag.render`<div class=\"ui-tabs__tab-body_data\"></div>`;\n\t\t}\n\t\tDom.clean(this.#dataContainer);\n\n\t\tif (!this.#body)\n\t\t{\n\t\t\tthis.#body = Tag.render`<div class=\"ui-tabs__tab-body_inner\"></div>`;\n\t\t\tthis.#body.dataset.id = this.#id;\n\t\t\tthis.#body.dataset.role = 'body';\n\t\t\tthis.#body.appendChild(this.#dataContainer);\n\t\t}\n\n\t\tthis.subscribeOnce('onActive', () => {\n\t\t\tthis.#loadBody(body);\n\t\t});\n\t}\n\n\t#loadBody(body)\n\t{\n\t\tlet resultBody = body;\n\t\tif (Type.isFunction(body))\n\t\t{\n\t\t\tresultBody = body(this);\n\t\t}\n\n\t\tlet promiseBody;\n\t\tif (!resultBody || (\n\t\t\tObject.prototype.toString.call(resultBody) === \"[object Promise]\" ||\n\t\t\tresultBody.toString() === \"[object BX.Promise]\"\n\t\t))\n\t\t{\n\t\t\tpromiseBody = resultBody;\n\t\t\tthis.#showLoader();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpromiseBody = Promise.resolve(resultBody);\n\t\t}\n\n\t\tpromiseBody.then(\n\t\t\t(result) =>\n\t\t\t{\n\t\t\t\tthis.#removeLoader();\n\t\t\t\tif (Type.isDomNode(result))\n\t\t\t\t{\n\t\t\t\t\tthis.#dataContainer.appendChild(result);\n\t\t\t\t}\n\t\t\t\telse if (Type.isString(result))\n\t\t\t\t{\n\t\t\t\t\tthis.#dataContainer.innerHTML = result; //HTML! Not Text.encoded\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthrow new Error('Tab body has to be a text or a dom-element.');\n\t\t\t\t}\n\t\t\t\tthis.emit('onLoad');\n\t\t\t},\n\t\t\t(reason) =>\n\t\t\t{\n\t\t\t\tconsole.log('reason: ', reason);\n\t\t\t\tthis.#removeLoader();\n\t\t\t\tthis.#dataContainer.innerHTML = reason;\n\t\t\t\tthis.emit('onLoadErrored');\n\t\t\t}\n\t\t);\n\t}\n\n\t#showLoader()\n\t{\n\t\tthis.#loader = new Loader({\n\t\t\ttarget: this.#dataContainer,\n\t\t\tcolor: 'rgba(82, 92, 105, 0.9)',\n\t\t\tmode: 'inline'\n\t\t});\n\t\tthis\n\t\t\t.#loader\n\t\t\t.show()\n\t\t\t.then(() => {\n\t\t\t\tconsole.log('The loader is shown')\n\t\t\t})\n\t\t;\n\t}\n\n\t#removeLoader()\n\t{\n\t\tif (this.#loader)\n\t\t{\n\t\t\tthis.#loader.destroy();\n\t\t\tthis.#loader = null;\n\t\t}\n\t}\n\n\tisRestricted(): boolean\n\t{\n\t\treturn this.#restricted;\n\t}\n\n\tgetBannerCode(): ?string\n\t{\n\t\treturn this.#bannerCode;\n\t}\n\n\tshowBanner(event): void\n\t{\n\t\tif (this.getBannerCode())\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(this.getBannerCode());\n\t\t}\n\t\tif (event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHeader(): HTMLElement\n\t{\n\t\treturn this.#head;\n\t}\n\n\tgetBody(): HTMLElement\n\t{\n\t\treturn this.#body;\n\t}\n\n\t// Here just in case\n\t#getBodyDataContainer(): HTMLElement\n\t{\n\t\treturn this.#dataContainer;\n\t}\n\n\tinactivate(): Tab\n\t{\n\t\tif (this.#active === true)\n\t\t{\n\t\t\tDom.removeClass(this.#head, '--header-active');\n\t\t\tDom.removeClass(this.#body, '--body-active');\n\n\t\t\tthis.#active = false;\n\t\t\tthis.emit('onInactive');\n\t\t}\n\t\treturn this;\n\t}\n\n\tactivate(): Tab\n\t{\n\t\tif (this.#active !== true)\n\t\t{\n\t\t\tDom.addClass(this.#head, '--header-active');\n\t\t\tDom.addClass(this.#body, '--body-active');\n\n\t\t\tthis.#active = true;\n\t\t\tthis.emit('onActive');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.#active;\n\t}\n\n\tshowError({message, code})\n\t{\n\t\tconst errorContainer = this.getBody().querySelector('[data-bx-role=\"error-container\"]');\n\t\tif (errorContainer)\n\t\t{\n\t\t\terrorContainer.innerText = message || code;\n\t\t}\n\t\tDom.addClass(this.getBodyContainer(), 'ui-avatar-editor--error');\n\t}\n}\n","import { Tag, Dom, Event, Type, Runtime } from 'main.core';\nimport { OrderedArray } from 'main.core.collections';\nimport { TabsOptionsType, TabOptionsType } from './types';\nimport { EventEmitter } from 'main.core.events';\nimport { Tab } from './tab';\n\nconst justCounter = {\n\tlocalId: 0,\n};\n\nexport class Tabs extends EventEmitter\n{\n\t#index: number;\n\t#id: string;\n\t#items: OrderedArray<string, Tab>;\n\t#activeItem: ?Tab = null;\n\n\ttitle: string;\n\ttitleIconClasses: string;\n\n\tcontent: ?HTMLElement;\n\n\tconstructor(options: ?TabsOptionsType)\n\t{\n\t\tsuper();\n\n\t\toptions = Type.isObjectLike(options) ? options : {};\n\t\tthis.#index = (++justCounter.localId);\n\t\tthis.#id = Type.isStringFilled(options.id) ? options.id : ('TabsId' + this.#index);\n\t\tthis.setEventNamespace('UI:Tabs:' + options.id);\n\n\t\tthis.#items = new OrderedArray((tabA: Tab, tabB: Tab) => {\n\t\t\treturn tabA.getSort() > tabB.getSort() ? 1 : -1;\n\t\t});\n\n\t\tArray.from(options.items ?? []).forEach(\n\t\t\t(TabOptionsType: TabOptionsType) => this.addItem(new Tab(TabOptionsType))\n\t\t);\n\n\t\tthis.activateItemDebounced = Runtime.debounce(this.activateItemDebounced, 100, this);\n\n\t\tif (this.#items.count() > 0 && !(this.#activeItem instanceof Tab))\n\t\t{\n\t\t\tthis.activateItem(this.#items.getFirst());\n\t\t}\n\t}\n\n\tgetIndex(): string\n\t{\n\t\treturn this.#index;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\taddItem(tab: Tab)\n\t{\n\t\tthis.#items.add(tab);\n\t\ttab.setParent(this);\n\t\tif (tab.isActive())\n\t\t{\n\t\t\tthis.activateItem(tab);\n\t\t}\n\t}\n\n\tactivateItem(tab: Tab)\n\t{\n\t\tif (this.#items.has(tab) && this.#activeItem !== tab)\n\t\t{\n\t\t\tlet inactiveTab = null;\n\t\t\tif (this.#activeItem instanceof Tab)\n\t\t\t{\n\t\t\t\tinactiveTab = this.#activeItem;\n\t\t\t}\n\t\t\tthis.#activeItem = tab;\n\t\t\tthis.activateItemDebounced(tab, inactiveTab);\n\t\t}\n\t}\n\n\tactivateItemDebounced(activeTab: Tab, inactiveTab: ?Tab = null)\n\t{\n\t\tif (inactiveTab)\n\t\t{\n\t\t\tinactiveTab.inactivate();\n\t\t}\n\t\tactiveTab.activate();\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (this.content)\n\t\t{\n\t\t\treturn this.content;\n\t\t}\n\n\t\tthis.content = Tag.render`\n\t\t\t<div class=\"ui-tabs__tabs-container\">\n\t\t\t\t<div class=\"ui-tabs__tabs-header-container\" data-bx-role=\"headers\"></div>\n\t\t\t\t<div class=\"ui-tabs__tabs-body-container\" data-bx-role=\"bodies\"></div>\n\t\t\t</div>`;\n\n\t\tconst headers = this.content.querySelector('[data-bx-role=\"headers\"]');\n\t\tconst bodies = this.content.querySelector('[data-bx-role=\"bodies\"]');\n\n\t\tthis.#items.forEach(\n\t\t\t\t(tab: Tab) => {\n\t\t\t\t\tEvent.bind(\n\t\t\t\t\t\ttab.getHeader(),\n\t\t\t\t\t\t'click',\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tthis.activateItem(tab);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tDom.append(tab.getHeader(), headers);\n\t\t\t\t\tDom.append(tab.getBody(), bodies);\n\t\t\t\t}\n\t\t\t)\n\t\t;\n\n\t\treturn this.content;\n\t}\n\n\tgetItems(): Array<Tab>\n\t{\n\t\treturn this.#items;\n\t}\n}\n"],"names":["justCounter","localId","localSorting","Tab","options","parentElement","setEventNamespace","setParent","Type","isStringFilled","id","isInteger","sort","isBoolean","active","restricted","bannerCode","helpDeskCode","head","body","Tabs","event","getBannerCode","BX","UI","InfoHelper","show","stopPropagation","preventDefault","Dom","removeClass","emit","addClass","message","code","errorContainer","getBody","querySelector","innerText","getBodyContainer","EventEmitter","headOptions","isPlainObject","title","innerHeader","isDomNode","Tag","render","Text","encode","description","Event","bind","showBanner","className","clean","dataset","role","appendChild","subscribeOnce","resultBody","isFunction","promiseBody","Object","prototype","toString","call","Promise","resolve","then","result","isString","innerHTML","Error","reason","console","log","Loader","target","color","mode","destroy","_classPrivateFieldInitSpec","isObjectLike","OrderedArray","tabA","tabB","getSort","Array","from","items","forEach","TabOptionsType","addItem","activateItemDebounced","Runtime","debounce","count","activateItem","getFirst","tab","add","isActive","has","inactiveTab","activeTab","inactivate","activate","content","headers","bodies","getHeader","append"],"mappings":"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"}