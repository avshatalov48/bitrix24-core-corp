{"version":3,"file":"ui.switcher.bundle.js","sources":["../src/ui.switcher.js"],"sourcesContent":["import {Type, Tag, Loc, Dom, bind, onCustomEvent} from 'main.core';\nimport 'ui.design-tokens';\n\nexport const SwitcherSize = Object.freeze({\n\tmedium: 'medium',\n\tsmall: 'small',\n});\n\nexport const SwitcherColor = Object.freeze({\n\tprimary: 'primary',\n\tgreen: 'green',\n});\n\nexport type SwitcherOptions = {\n\tattributeName: string;\n\tnode: HTMLElement;\n\tid: string;\n\tchecked: boolean;\n\tinputName: string;\n\thandlers: Object;\n\tsize: string;\n\tcolor: string;\n\tdisabled: boolean;\n}\n\nexport class Switcher {\n\t#classNameSize = {\n\t\t[SwitcherSize.small]: 'ui-switcher-size-sm',\n\t\t[SwitcherSize.medium]: '',\n\t}\n\t#classNameColor = {\n\t\t[SwitcherColor.primary]: '',\n\t\t[SwitcherColor.green]: 'ui-switcher-color-green',\n\t}\n\n\tnode: HTMLElement | null = null;\n\tchecked: boolean = false;\n\tid: string = '';\n\t#disabled: boolean = false;\n\t#inputName: string = '';\n\t#loading: boolean;\n\tevents: Object;\n\t#classNameOff: string = 'ui-switcher-off';\n\t#classNameLock: string = 'ui-switcher-lock';\n\t#attributeName: string = 'data-switcher';\n\n\tstatic #attributeInitName: string = 'data-switcher-init';\n\tstatic list = [];\n\tstatic className = 'ui-switcher';\n\n\t/**\n\t * Switcher.\n\t *\n\t * @param {object} [options] - Options.\n\t * @param {string} [options.attributeName] - Name of switcher attribute.\n\t * @param {Element} [options.node] - Node.\n\t * @param {string} [options.id] - ID.\n\t * @param {123} [options.checked] - Checked.\n\t * @param {string} [options.inputName] - Input name.\n\t * @constructor\n\t */\n\tconstructor(options: SwitcherOptions)\n\t{\n\t\tthis.init(options);\n\t\tSwitcher.list.push(this);\n\t}\n\n\tstatic getById(id: string | number): Switcher | null\n\t{\n\t\treturn Switcher.list.find((item) => item.id === id) || null;\n\t}\n\n\tstatic initByClassName(): void\n\t{\n\t\tconst nodes = document.getElementsByClassName(Switcher.className);\n\t\tArray.from(nodes).forEach(function (node) {\n\t\t\tif (node.getAttribute(Switcher.#attributeInitName))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tnew Switcher({node: node});\n\t\t});\n\t}\n\n\tstatic getList(): Switcher[]\n\t{\n\t\treturn Switcher.list;\n\t}\n\n\tinit(options: SwitcherOptions = {}): void\n\t{\n\t\tthis.#attributeName = Type.isString(options.attributeName) ? options.attributeName : this.#attributeName;\n\t\tthis.handlers = Type.isPlainObject(options.handlers) ? options.handlers : {};\n\t\tthis.#inputName = Type.isString(options.inputName) ? options.inputName : '';\n\t\tthis.#loading = false;\n\t\tthis.events = {\n\t\t\ttoggled: 'toggled',\n\t\t\tchecked: 'checked',\n\t\t\tunchecked: 'unchecked'\n\t\t};\n\n\t\tif (options.node)\n\t\t{\n\t\t\tif (!Type.isDomNode(options.node))\n\t\t\t{\n\t\t\t\tthrow new Error('Parameter `node` DOM Node expected.');\n\t\t\t}\n\n\t\t\tthis.node = options.node;\n\t\t\tlet data = this.node.getAttribute(this.#attributeName);\n\t\t\ttry\n\t\t\t{\n\t\t\t\tdata = JSON.parse(data) || {};\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\tdata = {};\n\t\t\t}\n\n\t\t\tif (data.id)\n\t\t\t{\n\t\t\t\tthis.id = data.id;\n\t\t\t}\n\n\t\t\tthis.checked = Boolean(data.checked);\n\t\t\tthis.#inputName = data.inputName;\n\t\t\tif(Type.isString(data.color) && Object.values(SwitcherColor).includes(data.color))\n\t\t\t{\n\t\t\t\toptions.color = data.color;\n\t\t\t}\n\t\t\tif(Type.isString(data.size) && Object.values(SwitcherSize).includes(data.size))\n\t\t\t{\n\t\t\t\toptions.size = data.size;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.node = document.createElement('span');\n\t\t}\n\n\t\tif (this.#classNameSize[options.size])\n\t\t{\n\t\t\tDom.addClass(this.node, this.#classNameSize[options.size]);\n\t\t}\n\t\tif (this.#classNameColor[options.color])\n\t\t{\n\t\t\tDom.addClass(this.node, this.#classNameColor[options.color]);\n\t\t}\n\n\t\tif (Type.isString(options.id) || Type.isNumber(options.id))\n\t\t{\n\t\t\tthis.id = options.id;\n\t\t}\n\t\telse if (!this.id)\n\t\t{\n\t\t\tthis.id = Math.random();\n\t\t}\n\n\t\tif (Type.isString(options.inputName))\n\t\t{\n\t\t\tthis.#inputName = options.inputName;\n\t\t}\n\t\tthis.checked = Type.isBoolean(options.checked) ? options.checked : this.checked;\n\t\tthis.#disabled = Type.isBoolean(options.disabled) ? options.disabled : this.#disabled;\n\n\t\tthis.#initNode();\n\t\tthis.check(this.checked, false);\n\t\tthis.disable(this.#disabled, false);\n\t}\n\n\t#initNode(): void\n\t{\n\t\tif (this.node.getAttribute(Switcher.#attributeInitName))\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.node.setAttribute(Switcher.#attributeInitName, 'y');\n\n\t\tDom.addClass(this.node, Switcher.className);\n\t\tthis.node.innerHTML =\n\t\t\t'<span class=\"ui-switcher-cursor\"></span>\\n' +\n\t\t\t'<span class=\"ui-switcher-enabled\">' + Loc.getMessage('UI_SWITCHER_ON') + '</span>\\n' +\n\t\t\t'<span class=\"ui-switcher-disabled\">' + Loc.getMessage('UI_SWITCHER_OFF') + '</span>\\n';\n\n\t\tif (this.#inputName)\n\t\t{\n\t\t\tthis.inputNode = Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"${this.#inputName}\" />\n\t\t\t`;\n\n\t\t\tDom.append(this.inputNode, this.node);\n\t\t}\n\n\t\tbind(this.node, 'click', this.toggle.bind(this));\n\t}\n\n\tdisable(disabled: boolean, fireEvents: boolean): void\n\t{\n\t\tif (this.isLoading())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfireEvents = fireEvents !== false;\n\n\t\tif (this.#disabled)\n\t\t{\n\t\t\tDom.addClass(this.node, this.#classNameLock);\n\t\t\tfireEvents ? this.#fireEvent(this.events.lock) : null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.node, this.#classNameLock);\n\t\t\tfireEvents ? this.#fireEvent(this.events.unlock) : null;\n\t\t}\n\n\t\tif (fireEvents)\n\t\t{\n\t\t\tthis.#fireEvent(this.events.toggled)\n\t\t}\n\t}\n\n\tcheck(checked: boolean, fireEvents: boolean): void\n\t{\n\t\tif (this.isLoading())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.checked = !!checked;\n\t\tif (this.inputNode)\n\t\t{\n\t\t\tthis.inputNode.value = this.checked ? 'Y' : 'N';\n\t\t}\n\n\t\tfireEvents = fireEvents !== false;\n\n\t\tif (this.checked)\n\t\t{\n\t\t\tDom.removeClass(this.node, this.#classNameOff);\n\t\t\tfireEvents ? this.#fireEvent(this.events.unchecked) : null;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.node, this.#classNameOff);\n\t\t\tfireEvents ? this.#fireEvent(this.events.checked) : null;\n\t\t}\n\n\t\tif (fireEvents)\n\t\t{\n\t\t\tthis.#fireEvent(this.events.toggled)\n\t\t}\n\t}\n\n\tisDisabled()\n\t{\n\t\treturn this.#disabled;\n\t}\n\n\tisChecked(): boolean\n\t{\n\t\treturn this.checked;\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.isDisabled())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.check(!this.isChecked());\n\t}\n\n\tsetLoading(mode: boolean): void\n\t{\n\t\tthis.#loading = Boolean(mode);\n\n\t\tconst cursor = this.getNode().querySelector('.ui-switcher-cursor');\n\n\t\tif (this.#loading)\n\t\t{\n\t\t\tconst svg = Tag.render`\n\t\t\t\t<svg viewBox=\"25 25 50 50\">\n\t\t\t\t\t<circle\n\t\t\t\t\t\tclass=\"ui-sidepanel-wrapper-loader-path\"\n\t\t\t\t\t\tcx=\"50\"\n\t\t\t\t\t\tcy=\"50\"\n\t\t\t\t\t\tr=\"19\"\n\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\tstroke-width=\"5\"\n\t\t\t\t\t\tstroke-miterlimit=\"10\"\n\t\t\t\t\t>\n\t\t\t\t\t</circle>\n\t\t\t\t</svg>\n\t\t\t`\n\t\t\tDom.append(svg, cursor);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcursor.innerHTML = '';\n\t\t}\n\t}\n\n\tisLoading(): boolean\n\t{\n\t\treturn this.#loading;\n\t}\n\n\t#fireEvent(eventName: string): void\n\t{\n\t\tonCustomEvent(this, eventName);\n\t\tif (this.handlers[eventName])\n\t\t{\n\t\t\tthis.handlers[eventName].call(this);\n\t\t}\n\t}\n\n\trenderTo(targetNode: HTMLElement): HTMLElement\n\t{\n\t\tif (!Type.isDomNode(targetNode))\n\t\t{\n\t\t\tthrow new Error('Target node must be HTMLElement');\n\t\t}\n\n\t\treturn Dom.append(this.getNode(), targetNode);\n\t}\n\n\tgetNode(): HTMLElement\n\t{\n\t\treturn this.node;\n\t}\n\n\tgetAttributeName(): string\n\t{\n\t\treturn this.#attributeName;\n\t}\n\n\tgetInputName(): string\n\t{\n\t\treturn this.#inputName;\n\t}\n}"],"names":["SwitcherSize","Object","freeze","medium","small","SwitcherColor","primary","green","Switcher","options","init","list","push","Type","isString","attributeName","handlers","isPlainObject","inputName","events","toggled","checked","unchecked","node","isDomNode","Error","data","getAttribute","JSON","parse","e","id","Boolean","color","values","includes","size","document","createElement","Dom","addClass","isNumber","Math","random","isBoolean","disabled","check","disable","fireEvents","isLoading","lock","removeClass","unlock","inputNode","value","isDisabled","isChecked","mode","cursor","getNode","querySelector","svg","Tag","render","append","innerHTML","targetNode","find","item","nodes","getElementsByClassName","className","Array","from","forEach","setAttribute","Loc","getMessage","bind","toggle","eventName","onCustomEvent","call"],"mappings":"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"}