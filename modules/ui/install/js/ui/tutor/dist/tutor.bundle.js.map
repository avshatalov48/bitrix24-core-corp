{"version":3,"file":"tutor.bundle.js","sources":["../src/step.js","../src/manager.js","../src/scenario.js"],"sourcesContent":["import { Type, Event } from 'main.core';\n\nexport class Step extends Event.EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Tutor.Step');\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tthis.id = options.id || null;\n\t\tthis.title = options.title || null;\n\t\tthis.description = options.description || null;\n\t\tthis.url = options.url || '';\n\t\tthis.isCompleted = options.isCompleted || false;\n\t\tthis.video = options.video || null;\n\t\tthis.helpLink = options.helpLink || null;\n\t\tthis.highlight = options.highlight || null;\n\t\tthis.isActive = options.isActive === true;\n\t\tthis.isShownForSlider = options.isShownForSlider || false;\n\t\tthis.initOptions = options;\n\n\t\tthis.videoObj = null;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Object}\n\t */\n\tgetVideoObj()\n\t{\n\t\treturn this.videoObj;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetHighlightOptions()\n\t{\n\t\treturn this.highlight;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetDescription()\n\t{\n\t\treturn this.description;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetUrl()\n\t{\n\t\treturn this.url;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Boolean}\n\t */\n\tgetCompleted()\n\t{\n\t\treturn this.isCompleted;\n\t}\n\n\tgetVideo()\n\t{\n\t\treturn this.video;\n\t}\n\n\tgetHelpLink()\n\t{\n\t\treturn this.helpLink;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {string}\n\t */\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Object}\n\t */\n\tgetInitOptions()\n\t{\n\t\treturn this.initOptions;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tactivate()\n\t{\n\t\tthis.isActive = true;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tgetShownForSlider()\n\t{\n\t\treturn this.isShownForSlider;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tdeactivate()\n\t{\n\t\tthis.isActive = false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn shortName;\n\t}\n}","import { Dom, Event, Tag, Loc, Type } from 'main.core';\nimport { Scenario } from './scenario';\nimport { Step } from './step';\nimport { Guide } from 'ui.tour';\nimport { Loader } from \"main.loader\";\nimport 'ui.feedback.form';\n\nexport class Manager extends Event.EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Tutor.Manager');\n\t}\n\n\tsetOptions(options, domain, feedbackFormId)\n\t{\n\t\toptions = options || {};\n\n\t\tthis.tutorialData = options.tutorialData || {};\n\t\tthis.eventService = options.eventService || {};\n\t\tthis.lastCheckTime = options.lastCheckTime || 0;\n\t\tthis.domain = options.domain || '';\n\t\tthis.feedbackFormId = options.feedbackFormId || '';\n\t\tif(Type.isString(domain) && domain.length > 0)\n\t\t{\n\t\t\tthis.domain = domain;\n\t\t}\n\t\tif(Type.isString(feedbackFormId) && feedbackFormId.length > 0)\n\t\t{\n\t\t\tthis.feedbackFormId = feedbackFormId;\n\t\t}\n\t}\n\n\tshowFeedbackForm()\n\t{\n\t\tif (this.feedbackFormId)\n\t\t{\n\t\t\tthis.feedBackForm = BX.UI.Feedback.Form.getById(this.feedbackFormId);\n\t\t\tif (this.feedBackForm)\n\t\t\t{\n\t\t\t\tthis.feedBackForm.openPanel();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDomain()\n\t{\n\t\treturn this.domain;\n\t}\n\n\tgetCurrentTutorialData()\n\t{\n\t\treturn this.tutorialData;\n\t}\n\n\tgetCurrentEventService()\n\t{\n\t\treturn this.eventService;\n\t}\n\n\tgetCurrentLastCheckTime()\n\t{\n\t\treturn this.lastCheckTime;\n\t}\n\n\t/**\n\t * @return {Manager}\n\t */\n\tstatic getInstance()\n\t{\n\t\treturn this.instance;\n\t}\n\n\t/**\n\t * @return {Scenario}\n\t */\n\tstatic getScenarioInstance()\n\t{\n\t\treturn this.scenarioInstance;\n\t}\n\n\tstatic init(options, domain, feedbackFormId)\n\t{\n\t\tlet instance = this.getInstance();\n\t\tif (!(instance instanceof Manager))\n\t\t{\n\t\t\tthis.instance = new Manager();\n\t\t\tinstance = this.getInstance();\n\t\t\tthis.emit('onInitManager');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinstance = this.getInstance();\n\t\t}\n\t\tinstance.setOptions(options, domain, feedbackFormId);\n\n\t\treturn instance;\n\t}\n\n\tstatic initScenario(options)\n\t{\n\t\tlet instance = this.getScenarioInstance();\n\t\tif (!(instance instanceof Scenario))\n\t\t{\n\t\t\tthis.scenarioInstance = new Scenario();\n\t\t\tinstance = this.getScenarioInstance();\n\t\t\tthis.emit('onInitScenario');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tinstance = this.getScenarioInstance();\n\t\t}\n\t\tinstance.setOptions(options);\n\n\t\treturn instance;\n\t}\n\n\tstatic showButton(animation)\n\t{\n\t\treturn this.getImButton(animation);\n\t}\n\n\tstatic getRootImButton()\n\t{\n\t\treturn document.getElementById('ui-tutor-btn-wrap');\n\t}\n\n\tstatic hasImButton()\n\t{\n\t\treturn !!this.getRootImButton();\n\t}\n\n\tstatic getImButton(animation)\n\t{\n\t\tif(!this.layout.imButton)\n\t\t{\n\t\t\tlet buttonWrapper = this.getRootImButton();\n\t\t\tif(buttonWrapper)\n\t\t\t{\n\t\t\t\tlet buttonInner = Tag.render`\n\t\t\t\t\t<div class=\"ui-tutor-btn\"></div>\n\t\t\t\t`;\n\t\t\t\tif (animation)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(buttonWrapper, 'ui-tutor-btn-wrap-animate');\n\t\t\t\t}\n\t\t\t\tDom.append(buttonInner, buttonWrapper);\n\t\t\t\tDom.addClass(buttonWrapper, 'ui-tutor-btn-wrap-show');\n\t\t\t\tthis.layout.imButton = buttonWrapper;\n\t\t\t\tEvent.bind(this.layout.imButton, \"click\", () => {\n\t\t\t\t\tthis.emit('clickImButton');\n\t\t\t\t});\n\n\t\t\t\tlet usersPanel = document.querySelector('.bx-im-users-wrap');\n\t\t\t\tif (document.querySelector('#bx-im-btn-call'))\n\t\t\t\t{\n\t\t\t\t\tusersPanel.style.bottom = '175px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tusersPanel.style.bottom = '120px';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.layout.imButton;\n\t}\n\n\tstatic showSmallPopup(text)\n\t{\n\t\tthis.smallPopupText = text;\n\t\tthis.getSmallPopup().style.display = 'block';\n\t\tthis.smallPopupText = '';\n\n\t\tif (Dom.hasClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide'))\n\t\t{\n\t\t\tDom.removeClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide');\n\t\t}\n\t}\n\n\tstatic hideSmallPopup(skipAnimation)\n\t{\n\t\tskipAnimation = skipAnimation === true;\n\t\tconst removeHandler = function() {\n\t\t\tDom.remove(this.getSmallPopup());\n\t\t\tif(this.hasOwnProperty('smallPopup'))\n\t\t\t{\n\t\t\t\tdelete this.smallPopup;\n\t\t\t}\n\t\t\tthis.emit('onCompleteHideSmallPopup');\n\t\t}.bind(this);\n\t\tDom.removeClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-show');\n\t\tDom.addClass(this.getSmallPopup(), 'ui-tutor-popup-welcome-hide');\n\t\tif(skipAnimation)\n\t\t{\n\t\t\tremoveHandler();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(removeHandler, 300);\n\t\t}\n\t}\n\n\tstatic showWelcomePopup(text)\n\t{\n\t\tthis.emit('onShowWelcomePopup');\n\t\tthis.showSmallPopup(text);\n\t}\n\n\tstatic hideWelcomePopup()\n\t{\n\t\tthis.emit('onBeforeHideWelcomePopup');\n\t\tthis.hideSmallPopup();\n\t\tthis.emit('onAfterHideWelcomePopup');\n\t}\n\n\tstatic showNoticePopup(text)\n\t{\n\t\tthis.emit('onShowNoticePopup');\n\t\tthis.showSmallPopup(text);\n\t}\n\n\tstatic hideNoticePopup()\n\t{\n\t\tthis.emit('onBeforeHideNoticePopup');\n\t\tthis.hideSmallPopup();\n\t\tthis.emit('onAfterHideNoticePopup');\n\t}\n\n\tstatic getSmallPopup()\n\t{\n\t\tconst clickSmallPopupHandler = () => {\n\t\t\tthis.emit('onClickSmallPopupBtn');\n\t\t};\n\t\tif (!this.smallPopup)\n\t\t{\n\t\t\tthis.smallPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup\" onclick=\"${clickSmallPopupHandler.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title-wrap\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">${Loc.getMessage('JS_UI_TUTOR_TITLE')}</span> \n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-text\">${this.smallPopupText}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.emit('onCreateSmallPopupNode');\n\t\t\tDom.addClass(this.smallPopup, 'ui-tutor-popup-welcome-show');\n\t\t\tthis.emit('onBeforeAppendSmallPopupNode');\n\t\t\tDom.append(this.smallPopup, document.body);\n\t\t\tthis.emit('onAfterAppendSmallPopupNode');\n\t\t}\n\n\t\treturn this.smallPopup;\n\t}\n\n\tstatic showStartPopup(title, text)\n\t{\n\t\tthis.emit('onShowStartPopup');\n\t\tthis.startTitle = title;\n\t\tthis.startText = text;\n\t\tDom.addClass(this.getStartPopup(), 'ui-tutor-popup-show');\n\t\tthis.startPopup.style.display = 'flex';\n\t\tthis.startTitle = '';\n\t\tthis.startText = '';\n\t};\n\n\tstatic closeStartPopup()\n\t{\n\t\tDom.remove(this.getStartPopup());\n\t\tdelete this.startPopup;\n\t}\n\n\tstatic getStartPopup()\n\t{\n\t\tif (!this.startPopup)\n\t\t{\n\t\t\tthis.startPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-start\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title-wrap\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">${Loc.getMessage('JS_UI_TUTOR_TITLE')}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-title\">${this.startTitle}</div>\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-text\">${this.startText}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-footer\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-btn\">\n\t\t\t\t\t\t\t\t${this.getBeginBtn()}\n\t\t\t\t\t\t\t\t${this.getDeferBtn()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.emit('onCreateStartPopupNode');\n\t\t\tDom.append(this.startPopup, document.body);\n\t\t\tthis.emit('onAfterAppendStartPopupNode');\n\t\t}\n\n\t\treturn this.startPopup;\n\t}\n\n\tstatic getBeginBtn()\n\t{\n\t\tif (!this.beginBtn)\n\t\t{\n\t\t\tthis.beginBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_BEGIN')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.beginBtn, \"click\", ()=> {\n\t\t\t\tthis.emit('clickBeginBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.beginBtn;\n\t}\n\n\tstatic getDeferBtn()\n\t{\n\t\tif (!this.deferBtn)\n\t\t{\n\t\t\tthis.deferBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_CLOSE_POPUP_BTN')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.deferBtn, \"click\", () => {\n\t\t\t\tthis.emit('clickDeferBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.deferBtn;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn shortName;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstatic getInformer()\n\t{\n\t\tif (!this.informer)\n\t\t{\n\t\t\tthis.informer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-informer\" id=\"ui-tutor-informer\"></div>\n\t\t\t\t`;\n\t\t\tlet informerParentNode = this.getImButton();\n\t\t\tif(this.isCollapsedShow)\n\t\t\t{\n\t\t\t\tinformerParentNode = this.getCollapseBlock();\n\t\t\t}\n\t\t\tif(informerParentNode)\n\t\t\t{\n\t\t\t\tDom.append(this.informer, informerParentNode);\n\t\t\t}\n\t\t}\n\n\t\treturn this.informer;\n\t}\n\n\tstatic setCount(num)\n\t{\n\t\tthis.emit('onBeforeSetCount');\n\t\tif (num < 1)\n\t\t{\n\t\t\tthis.removeInformer();\n\t\t\tdelete this.informer;\n\t\t\tthis.isInformerShow = false;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getInformer().textContent = num;\n\t\t\tthis.isInformerShow = true;\n\t\t}\n\t\tthis.emit('onAfterSetCount');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic removeInformer()\n\t{\n\t\tif(this.isInformerShow)\n\t\t{\n\t\t\tDom.remove(this.getInformer());\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic showCollapsedBlock(step, withGuide, showAfterAnimation)\n\t{\n\t\twithGuide = withGuide !== false;\n\t\tshowAfterAnimation = showAfterAnimation !== false;\n\t\tthis.emit('onBeforeShowCollapsedBlock');\n\t\tif(!this.isCollapsedShow)\n\t\t{\n\t\t\tthis.emit('onStartShowCollapsedBlock');\n\t\t\tif(!(step instanceof Step))\n\t\t\t{\n\t\t\t\tstep = new Step(step);\n\t\t\t}\n\t\t\tthis.collapsedStep = step;\n\n\t\t\tlet collapsedBlock = this.getCollapseBlock();\n\t\t\tlet showFunction = function() {\n\t\t\t\tcollapsedBlock.style.display = 'flex';\n\t\t\t};\n\t\t\tif(showAfterAnimation)\n\t\t\t{\n\t\t\t\tsetTimeout(showFunction.bind(this), 300);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tshowFunction.call(this);\n\t\t\t}\n\t\t\tthis.getCollapseTitle().innerHTML = step.getTitle();\n\t\t\tif(this.isInformerShow)\n\t\t\t{\n\t\t\t\tDom.append(this.getInformer(), collapsedBlock);\n\t\t\t}\n\t\t\tthis.isCollapsedShow = true;\n\t\t\tthis.emit('onShowCollapsedBlock');\n\t\t}\n\n\t\tif (withGuide)\n\t\t{\n\t\t\tthis.showGuide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.checkButtonsState();\n\t\t}\n\t}\n\n\tstatic setCollapsedInvisible()\n\t{\n\t\tthis.hideNode(this.getCollapseBlock());\n\t}\n\n\tstatic setCollapsedVisible()\n\t{\n\t\tthis.showNode(this.getCollapseBlock());\n\t}\n\n\tstatic checkButtonsState()\n\t{\n\t\tthis.emit('onCheckButtonsState');\n\t\tlet step = this.collapsedStep;\n\t\tif(!step)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(step.getCompleted())\n\t\t{\n\t\t\tif(this.activeGuide)\n\t\t\t{\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\tthis.hideNode(this.getStartBtn());\n\t\t}\n\t\telse if(step.isActive)\n\t\t{\n\t\t\tthis.showNode(this.getCompletedBtn());\n\t\t\tif(this.activeGuide || !this.isShowRepeatWithCompleted)\n\t\t\t{\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\tthis.hideNode(this.getStartBtn());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showNode(this.getStartBtn());\n\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t}\n\t}\n\n\tstatic showGuide()\n\t{\n\t\tthis.emit('onBeforeShowGuide');\n\t\tlet step = this.collapsedStep;\n\t\tif (!this.activeGuide && step)\n\t\t{\n\t\t\tthis.emit('onStartShowGuide');\n\t\t\tthis.activeGuide = new Guide({\n\t\t\t\tsimpleMode: true,\n\t\t\t\tsteps: [\n\t\t\t\t\tstep.getHighlightOptions()\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.activeGuide.subscribe(Guide.getFullEventName(\"onFinish\"), this.finishGuide.bind(this));\n\t\t\tthis.activeGuide.start();\n\t\t\tDom.remove(this.activeGuide.getPopup().closeIcon);\n\t\t\tthis.emit('showCollapseWithGuide');\n\t\t\tthis.checkButtonsState();\n\t\t}\n\t}\n\n\tstatic closeGuide()\n\t{\n\t\tif(this.activeGuide instanceof Guide)\n\t\t{\n\t\t\tthis.activeGuide.close();\n\t\t\tthis.emit('onAfterGuide');\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCollapseBlock()\n\t{\n\t\tif (!this.layout.collapseBlock)\n\t\t{\n\t\t\tthis.layout.collapseBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-collapse\" onclick=\"${this.clickCollapseBlockHandler.bind(this)}\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-subject\">${Loc.getMessage('JS_UI_TUTOR_STEP_TITLE')}</div>\n\t\t\t\t\t\t\t${this.getCollapseTitle()}\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-collapse-btn\">\n\t\t\t\t\t\t\t\t${this.getStartBtn()}\n\t\t\t\t\t\t\t\t${this.getRepeatBtn()}\n\t\t\t\t\t\t\t\t${this.getCompletedBtn()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.emit('onCreateCollapsedBlockNode');\n\t\t\tDom.append(this.layout.collapseBlock, document.body);\n\t\t\tthis.emit('onAfterAppendCollapsedBlockNode');\n\t\t}\n\n\t\treturn this.layout.collapseBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getStartBtn()\n\t{\n\t\tif (!this.startBtn)\n\t\t{\n\t\t\tthis.startBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_START')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.startBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.emit('clickStartBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.startBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getRepeatBtn()\n\t{\n\t\tif (!this.repeatBtn)\n\t\t{\n\t\t\tthis.repeatBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_REPEAT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.repeatBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.emit('clickRepeatBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.repeatBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCompletedBtn()\n\t{\n\t\tif (!this.completedBtn)\n\t\t{\n\t\t\tthis.completedBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-round ui-btn-xs\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_COMPLETED_SHORT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\n\t\t\tEvent.bind(this.completedBtn, \"click\", (event) => {\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.emit('clickCompletedBtn');\n\t\t\t});\n\t\t}\n\n\t\treturn this.completedBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic getCollapseTitle()\n\t{\n\t\tif (!this.layout.collapseTitle)\n\t\t{\n\t\t\tthis.layout.collapseTitle =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-title\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.collapseTitle;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tstatic closeCollapsePopup(event)\n\t{\n\t\tthis.closeCollapseEntity();\n\t\tthis.emit('clickCloseCollapseBlock');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic clickCollapseBlockHandler()\n\t{\n\t\tthis.emit('clickCollapseBlock');\n\t}\n\n\tstatic finishGuide()\n\t{\n\t\tdelete this.activeGuide;\n\t\tthis.checkButtonsState();\n\t\tthis.emit('completeCloseGuide');\n\t}\n\n\tstatic closeCollapseEntity()\n\t{\n\t\tthis.emit('onBeforeHideCollapsedBlock');\n\t\tthis.getCollapseBlock().style.display = 'none';\n\t\tthis.getImButton().style.display = 'block';\n\t\tif(this.activeGuide instanceof Guide)\n\t\t{\n\t\t\tthis.activeGuide.close();\n\t\t}\n\t\tif(this.isInformerShow)\n\t\t{\n\t\t\tDom.append(this.getInformer(), this.getImButton());\n\t\t}\n\t\tdelete this.collapsedStep;\n\t\tthis.isCollapsedShow = false;\n\t\tthis.emit('onHideCollapsedBlock');\n\t}\n\n\tstatic showLoader()\n\t{\n\t\tthis.emit('onBeforeShowLoader');\n\t\tthis.startTitle = '';\n\t\tthis.startText = '';\n\t\tthis.layout.loader = new Loader({\n\t\t\ttarget: this.getStartPopup(),\n\t\t\tsize: 85\n\t\t});\n\t\tthis.layout.loader.show();\n\t\tthis.getStartPopup().style.display = 'flex';\n\t\tDom.addClass(this.getStartPopup(), \"ui-tutor-popup-load\");\n\t\tthis.emit('onAfterShowLoader');\n\t}\n\n\tstatic hideLoader()\n\t{\n\t\tif (this.layout.loader)\n\t\t{\n\t\t\tthis.layout.loader.destroy();\n\t\t\tthis.getStartPopup().style.display = 'none';\n\t\t}\n\t}\n\n\tstatic showCollapsedLoader()\n\t{\n\t\tthis.emit('onBeforeShowCollapsedLoader');\n\t\tthis.layout.collapseLoader = new Loader({\n\t\t\ttarget: this.getCollapseBlock(),\n\t\t\tsize: 34\n\t\t});\n\t\tthis.layout.collapseLoader.show();\n\t\tthis.getCollapseBlock().style.display = 'flex';\n\t\tDom.addClass(this.getCollapseBlock(), \"ui-tutor-popup-collapse-load\");\n\t\tthis.emit('onAfterShowCollapsedLoader');\n\t}\n\n\tstatic hideCollapsedLoader()\n\t{\n\t\tthis.emit('onBeforeHideCollapsedLoader');\n\t\tif (this.layout.collapseLoader)\n\t\t{\n\t\t\tthis.layout.collapseLoader.destroy();\n\t\t\tDom.removeClass(this.getCollapseBlock(), \"ui-tutor-popup-collapse-load\");\n\t\t\tthis.getCollapseBlock().style.display = 'none';\n\t\t}\n\t\tthis.emit('onAfterHideCollapsedLoader');\n\t}\n\n\tstatic showNode (node)\n\t{\n\t\tnode.style.display = 'block';\n\t}\n\n\tstatic hideNode (node)\n\t{\n\t\tnode.style.display = 'none';\n\t}\n\n\tstatic checkFollowLink(step, scenario)\n\t{\n\t\tthis.emit('onStartCheckFollowLink');\n\t\tstep = step || this.collapsedStep;\n\t\tif(step instanceof Step)\n\t\t{\n\t\t\tscenario = scenario || {};\n\t\t\tif (!(window.location.pathname === step.getUrl()))\n\t\t\t{\n\t\t\t\tlet beforeEvent = 'onBeforeRedirectToActionPage';\n\t\t\t\tif(scenario instanceof Scenario)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(scenario.getStartBtn(), 'ui-btn-wait');\n\t\t\t\t\tscenario.fireCurrentStepEvent(beforeEvent);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getStartBtn(), 'ui-btn-wait');\n\t\t\t\t\tthis.emit(beforeEvent, {step});\n\t\t\t\t}\n\t\t\t\twindow.location = step.getUrl();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(scenario instanceof Scenario)\n\t\t\t\t{\n\t\t\t\t\tscenario.showCollapseBlock(step);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstep.activate();\n\t\t\t\t\tthis.showCollapsedBlock(step);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.emit('onFinishCheckFollowLink');\n\t}\n\n\tstatic fireEvent(eventName)\n\t{\n\t\tthis.emit(eventName);\n\t}\n}\n\n/**\n * @private\n */\nManager.instance = null;\nManager.scenarioInstance = null;\nManager.activeGuide = null;\nManager.isShowRepeatWithCompleted = true;\nManager.layout = {\n\timButton: null,\n\tcollapseBlock: null,\n\tcollapseTitle: null,\n};","import { Type, Dom, Event, Tag, Loc } from 'main.core';\nimport {Step} from './step.js';\nimport {Manager} from './manager.js';\n\nexport class Scenario extends Event.EventEmitter {\n\tconstructor(options = {}) {\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.UI.Tutor.Scenario');\n\n\t\tthis.stepPopup = null;\n\t\tthis.arrowTimer = null;\n\t\tthis.guide = null;\n\t\tthis.loader = null;\n\n\t\tthis.arrowWrap = null;\n\t\tthis.prevArrow = null;\n\t\tthis.nextArrow = null;\n\n\t\tthis.currentStepIndex = 0;\n\t\tthis.currentStep = null;\n\t\tthis.isAddedSteps = false;\n\t\tthis.hasArrows = false;\n\n\t\tthis.isLoading = true;\n\n\t\tthis.setOptions(options);\n\n\t\tthis.btn = document.getElementById('ui-tutor-btn-wrap');\n\t\tthis.informer = document.getElementById('ui-tutor-informer');\n\n\t\tthis.layout = {\n\t\t\tstepBlock: null,\n\t\t\tprogress: null,\n\t\t\tcounter: null,\n\t\t\tcounterContainer: null,\n\t\t\ttitle: null,\n\t\t\tdescription: null,\n\t\t\tcollapseBlock: null,\n\t\t\tcollapseTitle: null,\n\t\t\tcollapseDescription: null,\n\t\t\tcontent: null,\n\t\t\tcontentInner: null,\n\t\t\tcontentBlock: null,\n\t\t\turl: null,\n\t\t\ttarget: null,\n\t\t\tstartBtn: null,\n\t\t\tnextBtn: null,\n\t\t\trepeatBtn: null,\n\t\t\tdeferBtn: null,\n\t\t\thelp: null,\n\t\t\tcompletedBtn: null,\n\t\t\tcompletedBlock: null,\n\t\t\tfinishedBlock: null,\n\t\t\tsupportLink: null\n\t\t};\n\n\t\tthis.sections = [\n\t\t\t'settings',\n\t\t\t'scenario',\n\t\t\t'work'\n\t\t];\n\n\t\tthis.loadYoutubeApiScript();\n\n\t\tthis.subscribe(\"onYouTubeReady\", () => {\n\t\t\tthis.setVideoItems();\n\t\t});\n\t}\n\n\tloadYoutubeApiScript()\n\t{\n\t\tconst onYouTubeReadyEvent = function() {\n\t\t\tthis.emit(\"onYouTubeReady\", { scenario: this});\n\t\t}.bind(this);\n\n\t\tif (!window.YT)\n\t\t{\n\t\t\tlet isNeedCheckYT = true;\n\t\t\tconst tag = document.createElement('script');\n\t\t\ttag.src = \"https://www.youtube.com/iframe_api\";\n\t\t\tconst firstScriptTag = document.getElementsByTagName('script')[0];\n\t\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\n\t\t\tlet ytCheckerTimer = setInterval(function() {\n\t\t\t\tif (isNeedCheckYT)\n\t\t\t\t{\n\t\t\t\t\tif (window.YT && Type.isFunction(window.YT.Player))\n\t\t\t\t\t{\n\t\t\t\t\t\tclearInterval(ytCheckerTimer);\n\t\t\t\t\t\tonYouTubeReadyEvent();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function() {\n\t\t\t\tclearInterval(ytCheckerTimer);\n\t\t\t\tisNeedCheckYT = false;\n\t\t\t}, 2000);\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(function() {\n\t\t\t\tonYouTubeReadyEvent();\n\t\t\t}.bind(this), 100);\n\t\t}\n\n\t}\n\n\tsetOptions (options)\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetOptions', false);\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\t\tlet currentStep = this.getCurrentStep();\n\n\t\t/** @var {Step[]} */\n\t\tthis.steps = [];\n\t\tif (Array.isArray(options.steps))\n\t\t{\n\t\t\toptions.steps.forEach(step => {\n\t\t\t\tthis.steps.push(new Step(step));\n\t\t\t});\n\t\t}\n\t\tif (currentStep instanceof Step)\n\t\t{\n\t\t\tlet stepInList = this.findStepById(currentStep.getId());\n\t\t\tif (stepInList)\n\t\t\t{\n\t\t\t\tcurrentStep = stepInList;\n\t\t\t}\n\t\t}\n\t\telse if (Type.isString(options.currentStepId) && options.currentStepId.length > 0)\n\t\t{\n\t\t\tlet stepInList = this.findStepById(options.currentStepId);\n\t\t\tif (stepInList)\n\t\t\t{\n\t\t\t\tcurrentStep = stepInList;\n\t\t\t\tif(options.currentStepIsActive === true)\n\t\t\t\t{\n\t\t\t\t\tcurrentStep.activate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (!currentStep)\n\t\t{\n\t\t\tlet uncompletedStep = this.getFirstUncompletedStep();\n\t\t\tif (uncompletedStep)\n\t\t\t{\n\t\t\t\tcurrentStep = uncompletedStep;\n\t\t\t}\n\t\t}\n\t\tif (!currentStep && this.steps && this.steps[0])\n\t\t{\n\t\t\tcurrentStep = this.steps[0];\n\t\t}\n\t\tthis.setCurrentStep(currentStep);\n\n\t\tif (options)\n\t\t{\n\t\t\tthis.isLoading = false;\n\t\t}\n\n\t\tthis.title = options.title || '';\n\t\tthis.supportLink = options.supportLink || '';\n\t\tthis.isFinished = options.isFinished || false;\n\t\tthis.fireCurrentStepEvent('onAfterSetOptions', false);\n\t}\n\n\t/**\n\t * @param {Step} step\n\t */\n\tsetCurrentStep(step)\n\t{\n\t\tif (step instanceof Step)\n\t\t{\n\t\t\tthis.currentStep = step;\n\t\t\tlet steps = this.steps;\n\n\t\t\tif (Type.isArray(steps))\n\t\t\t{\n\t\t\t\tthis.currentStepIndex = steps.indexOf(step);\n\t\t\t}\n\t\t\tthis.fireCurrentStepEvent('onStartStep');\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t */\n\tstart(complexAnimation)\n\t{\n\t\tthis.emit(\"onStart\", { scenario: this});\n\n\t\tif (complexAnimation) // animate transition from collapsed popup to step popup\n\t\t{\n\t\t\tthis.complexAnimation = true;\n\t\t}\n\t\tthis.showPopup(this.getStepPopup());\n\t\tthis.toggleCompletedState();\n\t\tthis.toggleNavBtn();\n\t\tthis.setPopupData();\n\n\t\tif (this.isAddedSteps)\n\t\t{\n\t\t\tthis.hideFinalState();\n\t\t}\n\n\t\tif (!this.hasArrows)\n\t\t{\n\t\t\tthis.initArrows();\n\t\t}\n\n\t\tthis.complexAnimation = false;\n\t\tthis.fireCurrentStepEvent('onShowComplete');\n\t}\n\n\tfindStepById(stepId)\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i++)\n\t\t{\n\t\t\tconst step = this.steps[i];\n\t\t\tif (step.getId() === stepId)\n\t\t\t{\n\t\t\t\treturn step;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStepPopup()\n\t{\n\t\tconst clickOnCloseIcon = () => {\n\t\t\tthis.emit(\"onClickOnCloseIcon\", { scenario: this});\n\t\t};\n\n\t\tif (!this.stepPopup)\n\t\t{\n\t\t\tthis.stepPopup =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup ui-tutor-popup-step\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-header\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-icon\"></span>\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-title\">\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_TITLE')}.\n\t\t\t\t\t\t\t\t\t${this.getCounterContainer()}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-header-subtitle\">${this.title}</span>\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t${this.getDeferLink()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-content\">\n\t\t\t\t\t\t\t${this.getContentBlock()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-wrap\">\n\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-inner\">\n\t\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-arrow-wrap\"></div>\n\t\t\t\t\t\t\t\t<div class=\"ui-tutor-popup-step-list-wrap\">\n\t\t\t\t\t\t\t\t\t${this.getStepBlock()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-close\" onclick=\"${clickOnCloseIcon.bind(this)}\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-icon-angle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\tthis.fireCurrentStepEvent('onCreateStepPopupNode');\n\t\t\tDom.append(this.stepPopup, document.body);\n\t\t\tthis.fireCurrentStepEvent('onAfterAppendStepPopupNode');\n\t\t}\n\n\t\treturn this.stepPopup;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetContentBlock()\n\t{\n\t\tif (!this.layout.contentBlock)\n\t\t{\n\t\t\tthis.layout.contentBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-content-block\">\n\t\t\t\t\t\t${this.getContentInner()}\n\t\t\t\t\t\t${this.getFooter()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.contentBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFooter()\n\t{\n\t\tif (!this.layout.footer)\n\t\t{\n\t\t\tthis.layout.footer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-footer\">\n\t\t\t\t\t\t${this.getNavigation()}\n\t\t\t\t\t\t${this.getBtnContainer()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\n\t\t\tif (Manager.getInstance().feedbackFormId) {\n\t\t\t\tDom.append(this.getSupportLink(), this.layout.footer);\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.layout.footer;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetContentInner()\n\t{\n\t\tif (!this.layout.contentInner)\n\t\t{\n\t\t\tthis.layout.contentInner =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-content-inner\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getDescription()}\n\t\t\t\t\t\t${this.getHelpBlock()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.contentInner;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetBtnContainer()\n\t{\n\t\tif (!this.layout.btnContainer)\n\t\t{\n\t\t\tthis.layout.btnContainer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-btn\">\n\t\t\t\t\t\t${this.getStartBtn()}\n\t\t\t\t\t\t${this.getRepeatBtn()}\n\t\t\t\t\t\t${this.getCompletedBtn()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.btnContainer;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetNavigation()\n\t{\n\t\tif (!this.layout.navigation)\n\t\t{\n\t\t\tthis.layout.navigation =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-nav\"></div>\n\t\t\t\t`;\n\n\t\t\tthis.layout.backBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-nav-item ui-tutor-popup-nav-item-prev\" onclick=\"${this.clickOnBackBtn.bind(this)}\"></span>\n\t\t\t\t`;\n\n\t\t\tthis.layout.nextBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-nav-item ui-tutor-popup-nav-item-next\" onclick=\"${this.clickOnNextBtn.bind(this)}\"></span>\n\t\t\t\t`;\n\n\t\t\tDom.append(this.layout.backBtn, this.layout.navigation);\n\t\t\tDom.append(this.layout.nextBtn, this.layout.navigation);\n\t\t}\n\n\t\treturn this.layout.navigation;\n\t}\n\n\t/**\n\t * @private\n\t * @param {HTMLElement} node\n\t */\n\tsetInformer(node)\n\t{\n\t\tthis.setInformerCount(this.steps.length - this.getCompletedSteps());\n\t}\n\n\t/**\n\t * @public\n\t * @param {Number} num\n\t */\n\tsetInformerExternal(num)\n\t{\n\t\tthis.setInformerCount(num);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetInformerCount(num)\n\t{\n\t\tManager.setCount(num);\n\t}\n\n\t/**\n\t * @public\n\t * @param {Event} event\n\t * @param {Boolean} complexAnimation\n\t */\n\tcloseStepPopup(event, complexAnimation)\n\t{\n\t\tif (!this.stepPopup)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (event)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t}\n\t\tthis.fireCurrentStepEvent('onCloseStepPopup');\n\t\tif (complexAnimation) // animate transition from collapsed popup to step popup\n\t\t{\n\t\t\tthis.complexAnimation = true;\n\t\t}\n\t\tthis.fadeAnimation(this.getStepPopup());\n\t\tsetTimeout(function () {\n\t\t\tthis.hideNode(this.getStepPopup());\n\t\t}.bind(this), 310);\n\t\tthis.complexAnimation = false;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {number}\n\t */\n\tgetCompletedSteps()\n\t{\n\t\tlet total = 0;\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tif (this.steps[i].isCompleted)\n\t\t\t{\n\t\t\t\ttotal += 1;\n\t\t\t}\n\t\t}\n\t\treturn total;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetStepCounter()\n\t{\n\t\tthis.getCounter().textContent = Loc.getMessage('JS_UI_TUTOR_COUNTER_NUMBER')\n\t\t\t.replace('#NUMBER#', this.steps.indexOf(this.getCurrentStep()) + 1)\n\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCounterContainer()\n\t{\n\t\tif (!this.layout.counterContainer)\n\t\t{\n\t\t\tthis.layout.counterContainer =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter-step\">\n\t\t\t\t\t\t${this.getCounter()}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.counterContainer;\n\t}\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCounter()\n\t{\n\t\tif (!this.layout.counter)\n\t\t{\n\t\t\tthis.layout.counter =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-header-counter-number\"></span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.counter;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDeferLink()\n\t{\n\t\tif (!this.layout.deferLink)\n\t\t{\n\t\t\tthis.layout.deferLink =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-defer-link\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_DEFER')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\tconst deferMenu = new BX.PopupMenuWindow({\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tclassName: 'ui-tutor-popup-defer-menu',\n\t\t\t\tbindElement: this.layout.deferLink,\n\t\t\t\titems: [\n\t\t\t\t\t{ text: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_HOUR'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(\"onDeferOneHour\", { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{ text: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_TOMORROW'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(\"onDeferTomorrow\", { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_WEEK'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(\"onDeferWeek\", { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('JS_UI_TUTOR_DEFER_MENU_FOREVER'),\n\t\t\t\t\t\tonclick: function() {\n\t\t\t\t\t\t\tthis.emit(\"onDeferForever\", { scenario: this});\n\t\t\t\t\t\t\tdeferMenu.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tEvent.bind(this.layout.deferLink, \"click\", () => {\n\t\t\t\tdeferMenu.show();\n\t\t\t});\n\t\t}\n\n\t\treturn this.layout.deferLink;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStartBtn()\n\t{\n\t\tif (!this.layout.startBtn)\n\t\t{\n\t\t\tthis.layout.startBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\" onclick=\"${this.clickStartHandler.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_START')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.startBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCompletedBtn()\n\t{\n\t\tif (!this.layout.completedBtn)\n\t\t{\n\t\t\tthis.layout.completedBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-round\" onclick=\"${this.showSuccessState.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_COMPLETED')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.completedBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetRepeatBtn()\n\t{\n\t\tif (!this.layout.repeatBtn)\n\t\t{\n\t\t\tthis.layout.repeatBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round\" onclick=\"${this.repeatStep.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_REPEAT')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.repeatBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDeferBtn()\n\t{\n\t\tif (!this.layout.deferBtn)\n\t\t{\n\t\t\tthis.layout.deferBtn =\n\t\t\t\tTag.render`\n\t\t\t\t\t<button class=\"ui-btn ui-btn-link ui-btn-round\" onclick=\"${this.closeStepPopup.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_DEFER')}\n\t\t\t\t\t</button>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.deferBtn;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetCompletedBLock()\n\t{\n\t\tif (!this.layout.completedBlock)\n\t\t{\n\t\t\tthis.layout.completedBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-completed\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-completed-icon\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-completed-text\">${Loc.getMessage('JS_UI_TUTOR_STEP_COMPLETED')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.completedBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-title\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetDescription()\n\t{\n\t\tif (!this.layout.description)\n\t\t{\n\t\t\tthis.layout.description =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-decs\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.description;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetSupportLink()\n\t{\n\t\tif (!this.layout.supportLink)\n\t\t{\n\t\t\tthis.layout.supportLink =\n\t\t\t\tTag.render`\n\t\t\t\t\t<a class=\"ui-tutor-popup-support-link\" onclick=\"${this.supportLinkHandler.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('JS_UI_TUTOR_BTN_SUPPORT')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.supportLink;\n\t}\n\n\tsetInvisible()\n\t{\n\t\tthis.hideNode(this.getStepPopup());\n\t}\n\n\tsetVisible()\n\t{\n\t\tthis.showNode(this.getStepPopup());\n\t}\n\n\tsupportLinkHandler()\n\t{\n\t\tthis.emit('supportLinkClick');\n\t\tManager.getInstance().showFeedbackForm();\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetStepBlock()\n\t{\n\t\tif (!this.layout.stepBlock)\n\t\t{\n\t\t\tthis.layout.stepBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-step-list\"></div>\n\t\t\t\t`;\n\n\t\t\tthis.layout.stepItems = [];\n\n\t\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t\t{\n\t\t\t\tconst currentStepIndex =\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<span class=\"ui-tutor-popup-step-item\" data-step=${i} onclick=\"${this.switchStep.bind(this)}\">\n\t\t\t\t\t\t\t<span class=\"ui-tutor-popup-step-item-number\">${i + 1}</span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`;\n\n\t\t\t\tthis.layout.stepItems.push(currentStepIndex);\n\t\t\t\tDom.append(currentStepIndex, this.layout.stepBlock);\n\t\t\t}\n\t\t\tthis.setStepItems();\n\t\t}\n\n\t\treturn this.layout.stepBlock;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetStepItems()\n\t{\n\t\tif (this.layout && this.layout.stepItems)\n\t\t{\n\t\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t\t{\n\t\t\t\tif (this.layout.stepItems[i])\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-current');\n\t\t\t\t\tif (i === this.currentStepIndex)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-current');\n\t\t\t\t\t}\n\t\t\t\t\tif (this.steps[i].isCompleted)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.layout.stepItems[i], 'ui-tutor-popup-step-item-completed');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetHelpBlock()\n\t{\n\t\tif (!this.layout.help)\n\t\t{\n\t\t\tthis.layout.help =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-help\">\n\t\t\t\t\t\t${this.getHelpLink()}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.help;\n\t}\n\n\tsetVideoItems()\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tconst currentVideo =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-video\" data-step=${i}></div>\n\t\t\t\t`;\n\t\t\tDom.prepend(currentVideo, this.getHelpBlock());\n\n\t\t\tif (window.YT && Type.isObject(window.YT) && Type.isFunction(window.YT.Player) && this.steps[i].video !== null)\n\t\t\t{\n\t\t\t\tconst playerData = {\n\t\t\t\t\tvideoId: this.steps[i].video,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'onReady': function(event) {\n\t\t\t\t\t\t\tevent.target.mute();\n\t\t\t\t\t\t\tevent.target.pauseVideo();\n\t\t\t\t\t\t\tevent.target.setPlaybackQuality('hd720');\n\n\t\t\t\t\t\t\tif (+event.target.getIframe().getAttribute('data-step') === this.currentStepIndex)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.addClass(event.target.getIframe(), 'ui-tutor-popup-video-show');\n\t\t\t\t\t\t\t\tevent.target.playVideo();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t},\n\t\t\t\t\tplayerVars: {\n\t\t\t\t\t\tcc_load_policy: 1,\n\t\t\t\t\t\tcc_lang_pref: 'ru',\n\t\t\t\t\t\trel: 0\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tthis.fireCurrentStepEvent('onBeforeCreateVideo', true, {\n\t\t\t\t\tplayerData\n\t\t\t\t});\n\t\t\t\tthis.steps[i].videoObj = new YT.Player(currentVideo, playerData);\n\t\t\t\tthis.fireCurrentStepEvent('onAfterCreateVideo');\n\t\t\t}\n\t\t}\n\t}\n\n\tpauseCurrentVideo()\n\t{\n\t\tlet step = this.getCurrentStep();\n\n\t\tif (window.YT && step instanceof Step)\n\t\t{\n\t\t\tlet video = step.getVideoObj();\n\t\t\tif (Type.isObject(video) && video.pauseVideo)\n\t\t\t{\n\t\t\t\tvideo.pauseVideo();\n\t\t\t}\n\t\t}\n\t}\n\n\tplayCurrentVideo()\n\t{\n\t\tlet step = this.getCurrentStep();\n\n\t\tif (window.YT && step instanceof Step)\n\t\t{\n\t\t\tlet video = step.getVideoObj();\n\t\t\tif (Type.isObject(video) && video.playVideo)\n\t\t\t{\n\t\t\t\tvideo.playVideo();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetHelpLink()\n\t{\n\t\tif (!this.layout.link)\n\t\t{\n\t\t\tthis.layout.link =\n\t\t\t\tTag.render`\n\t\t\t\t\t<span class=\"ui-tutor-popup-help-link\" onclick=\"${this.handleClickLinkHandler.bind(this)}\">\n\t\t\t\t\t\t<span class=\"ui-tutor-popup-help-link-text\">${Loc.getMessage('JS_UI_TUTOR_ARTICLE_HELP_TOPIC')}</span>\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.link;\n\t}\n\n\t/**\n\t * @private\n\t */\n\thandleClickLinkHandler()\n\t{\n\t\tthis.emit('helpLinkClick');\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tshowPopup(node)\n\t{\n\t\tthis.showAnimation(node);\n\t\tnode.style.display = 'block';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tshowNode (node)\n\t{\n\t\tnode.style.display = 'block';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\thideNode (node)\n\t{\n\t\tnode.style.display = 'none';\n\t}\n\n\t/**\n\t * @public\n\t * @param {HTMLElement} node\n\t */\n\tremovePopup(node)\n\t{\n\t\tDom.remove(node);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tclickOnNextBtn()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeClickNavNextBtn');\n\t\tif (this.getCompletedSteps() === this.steps.length && !this.isFinished)\n\t\t{\n\t\t\tthis.isAddedSteps = false;\n\t\t\tDom.remove(this.getNewStepsSection());\n\t\t\tDom.removeClass(this.getFinishedBlock(), 'ui-tutor-popup-finished-new');\n\t\t\tthis.showFinalState();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getCompletedSteps() === this.steps.length && this.currentStepIndex + 1 === this.steps.length)\n\t\t{\n\t\t\tthis.currentStepIndex = -1;\n\t\t}\n\n\t\tDom.removeClass(this.getStartBtn(), 'ui-btn-wait');\n\t\tthis.increaseCurrentIndex();\n\t\tthis.showStep();\n\t\tthis.toggleNavBtn();\n\t\tthis.fireCurrentStepEvent('onAfterClickNavNextBtn');\n\t}\n\n\tclickOnBackBtn()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeClickNavBackBtn');\n\t\tthis.reduceCurrentIndex();\n\t\tthis.toggleNavBtn();\n\t\tthis.showStep();\n\t\tthis.fireCurrentStepEvent('onAfterClickNavBackBtn');\n\t}\n\n\ttoggleNavBtn()\n\t{\n\t\tDom.removeClass(this.layout.backBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\tDom.removeClass(this.layout.nextBtn, 'ui-tutor-popup-nav-item-disabled');\n\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\tDom.addClass(this.layout.backBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\t}\n\t\tif (this.currentStepIndex + 1 === this.steps.length)\n\t\t{\n\t\t\tDom.addClass(this.layout.nextBtn, 'ui-tutor-popup-nav-item-disabled');\n\t\t}\n\t}\n\n\tshowStep()\n\t{\n\t\t// when last step is completed, but some steps are not\n\t\tif (this.clickOnCompletedBtn && this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\tlet nextUncompletedStep = this.getFirstUncompletedStep();\n\t\t\tif (nextUncompletedStep)\n\t\t\t{\n\t\t\t\tthis.setCurrentStep(nextUncompletedStep);\n\t\t\t}\n\t\t}\n\n\t\tthis.scrollToStep();\n\t\tthis.toggleCompletedState();\n\t\tthis.setPopupData();\n\n\t\tthis.clickOnCompletedBtn = false;\n\t\tthis.fireCurrentStepEvent('onAfterShowStep');\n\t}\n\n\n\t/**\n\t * @private\n\t */\n\tswitchStep()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSwitchStep');\n\t\tthis.setCurrentStep(this.steps[+window.event.target.getAttribute('data-step')]);\n\t\tthis.fireCurrentStepEvent('onAfterSwitchStep');\n\n\t\tif (this.layout.finishedBlock)\n\t\t{\n\t\t\tthis.hideFinalState();\n\t\t}\n\n\t\tthis.showStep();\n\t\tthis.toggleNavBtn();\n\t\tthis.fireCurrentStepEvent('onEndSwitchStep');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tgetFirstUncompletedStep()\n\t{\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tif (!this.steps[i].isCompleted)\n\t\t\t{\n\t\t\t\treturn this.steps[i];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleCompletedState()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tif (currentStep.getCompleted())\n\t\t\t{\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t\tthis.hideNode(this.getStartBtn());\n\t\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\t}\n\t\t\telse if (currentStep.isActive)\n\t\t\t{\n\t\t\t\tthis.showNode(this.getCompletedBtn());\n\t\t\t\tthis.hideNode(this.getStartBtn());\n\t\t\t\tthis.showNode(this.getRepeatBtn());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.showNode(this.getStartBtn());\n\t\t\t\tthis.hideNode(this.getCompletedBtn());\n\t\t\t\tthis.hideNode(this.getRepeatBtn());\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tsetPopupData()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetPopupData');\n\t\tconst currentStep = this.getCurrentStep();\n\t\tif (currentStep)\n\t\t{\n\t\t\tthis.getTitle().innerHTML = currentStep.getTitle();\n\t\t\tthis.getDescription().innerHTML = currentStep.getDescription();\n\t\t\tManager.getCollapseTitle().innerHTML = currentStep.getTitle();\n\n\t\t\tif (this.getCurrentStep().getVideo() && window.YT)\n\t\t\t{\n\t\t\t\tthis.setCurrentVideo();\n\t\t\t}\n\n\t\t\tthis.setStepCounter();\n\t\t\tthis.setStepItems();\n\t\t}\n\t\tthis.fireCurrentStepEvent('onAfterSetPopupData');\n\t}\n\n\tsetCurrentVideo()\n\t{\n\t\tthis.fireCurrentStepEvent('onSetCurrentVideo');\n\t\tfor (let i = 0; i < this.steps.length; i += 1)\n\t\t{\n\t\t\tlet video = this.steps[i].getVideoObj();\n\t\t\tif (window.YT && i === this.currentStepIndex && video && video.playVideo)\n\t\t\t{\n\t\t\t\tDom.addClass(video.getIframe(), 'ui-tutor-popup-video-show');\n\t\t\t\tvideo.playVideo();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (video) {\n\t\t\t\t\tDom.removeClass(video.getIframe(), 'ui-tutor-popup-video-show');\n\n\t\t\t\t\tif (video.pauseVideo)\n\t\t\t\t\t{\n\t\t\t\t\t\tvideo.pauseVideo();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @public\n\t * @returns {Step}\n\t */\n\tgetCurrentStep()\n\t{\n\t\treturn this.currentStep;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tincreaseCurrentIndex()\n\t{\n\t\tif (this.currentStepIndex === this.steps.length)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentStepIndex += 1;\n\t\tthis.setCurrentStep(this.steps[this.currentStepIndex]);\n\t}\n\n\t/**\n\t * @private\n\t */\n\treduceCurrentIndex()\n\t{\n\t\tif (this.currentStepIndex === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.currentStepIndex -= 1;\n\t\tthis.setCurrentStep(this.steps[this.currentStepIndex]);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowCollapseBlock(step, withGuide)\n\t{\n\t\twithGuide = withGuide !== false;\n\t\tthis.closeStepPopup(null, true);\n\t\tManager.showCollapsedBlock(step, withGuide);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tminimize()\n\t{\n\t\tthis.pauseCurrentVideo();\n\t\tthis.fireCurrentStepEvent('onMinimize');\n\t\tthis.showCollapseBlock(this.getCurrentStep(), false);\n\t}\n\n\trepeatStep()\n\t{\n\t\tthis.followLink();\n\t}\n\n\tclickStartHandler()\n\t{\n\t\tthis.followLink();\n\t}\n\t/**\n\t * @private\n\t */\n\tfollowLink(step)\n\t{\n\t\tlet currentStep = this.getCurrentStep();\n\t\tif (step instanceof Step)\n\t\t{\n\t\t\tcurrentStep = step;\n\t\t}\n\t\tthis.pauseCurrentVideo();\n\n\t\tthis.setActiveStep(currentStep);\n\t\tManager.checkFollowLink(currentStep, this);\n\t}\n\n\tsetActiveStep(step)\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeSetActiveStep');\n\t\tif (this.currentActiveStep instanceof Step)\n\t\t{\n\t\t\tthis.currentActiveStep.deactivate();\n\t\t}\n\t\tstep.activate();\n\t\tthis.currentActiveStep = step;\n\t\tthis.fireCurrentStepEvent('onAfterSetActiveStep');\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowSuccessState()\n\t{\n\t\tconst currentStep = this.getCurrentStep();\n\t\tthis.clickOnCompletedBtn = true;\n\t\tcurrentStep.isCompleted = true;\n\t\tthis.fireCurrentStepEvent('onFinishStep');\n\n\t\tif (currentStep.getCompleted())\n\t\t{\n\t\t\tDom.addClass(this.layout.stepItems[this.currentStepIndex], 'ui-tutor-popup-step-item-completed');\n\t\t}\n\t\tDom.addClass(this.getContentBlock(), 'ui-tutor-popup-content-block-animate');\n\n\t\tsetTimeout(function () {\n\t\t\tDom.replace(this.getHelpBlock(), this.getCompletedBLock());\n\t\t\tthis.getFooter().style.display = \"none\";\n\t\t\tthis.getDescription().style.display = \"none\";\n\t\t\tthis.getTitle().style.display = \"none\";\n\t\t}.bind(this), 300);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.addClass(this.getCompletedBLock(), 'ui-tutor-popup-completed-animate')\n\t\t}.bind(this), 800);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.replace(this.getCompletedBLock(), this.getHelpBlock());\n\t\t\tthis.getTitle().style.display = \"block\";\n\t\t\tthis.getDescription().style.display = \"block\";\n\t\t\tthis.getFooter().style.display = \"flex\";\n\n\t\t\tthis.clickOnNextBtn();\n\t\t}.bind(this), 1500);\n\n\t\tsetTimeout(function () {\n\t\t\tDom.removeClass(this.getCompletedBLock(), 'ui-tutor-popup-completed-animate');\n\t\t\tDom.removeClass(this.getContentBlock(), 'ui-tutor-popup-content-block-animate');\n\n\t\t\tlet counter = this.stepPopup.querySelector(\".ui-tutor-popup-header-counter-number\");\n\t\t\tcounter.innerHTML = Loc.getMessage('JS_UI_TUTOR_COUNTER_NUMBER')\n\t\t\t\t.replace('#NUMBER#', this.steps.indexOf(this.getCurrentStep()) + 1)\n\t\t\t\t.replace('#NUMBER_TOTAL#', this.steps.length);\n\t\t\tthis.fireCurrentStepEvent('onAfterShowSuccessState');\n\t\t}.bind(this), 1700);\n\n\t}\n\n\tfireCurrentStepEvent(eventName, fireStepEvent, extra)\n\t{\n\t\tfireStepEvent = fireStepEvent !== false;\n\t\tconst currentStep = this.getCurrentStep();\n\n\t\tconst data = {\n\t\t\tstep : currentStep,\n\t\t\tscenario: this\n\t\t};\n\t\tif (extra)\n\t\t{\n\t\t\tdata.extra = extra;\n\t\t}\n\t\tif (currentStep && fireStepEvent)\n\t\t{\n\t\t\tcurrentStep.emit(eventName, data);\n\t\t}\n\t\tthis.emit(eventName, data);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowFinalState()\n\t{\n\t\tthis.fireCurrentStepEvent('onFinalState');\n\n\t\tif (this.layout.stepItems)\n\t\t{\n\t\t\tDom.removeClass(this.layout.stepItems[this.currentStepIndex], 'ui-tutor-popup-step-item-current');\n\t\t}\n\n\t\tDom.append(this.getFinishedBlock(), this.getContentInner());\n\t\tDom.replace(this.getStartBtn(), this.getFinishedNotice());\n\t\tDom.remove(this.getCompletedBtn());\n\n\t\tDom.remove(this.getSupportLink());\n\t\tDom.remove(this.getNavigation());\n\t\tDom.remove(this.getHelpBlock());\n\n\t\tDom.remove(this.getRepeatBtn());\n\t\tDom.remove(this.getTitle());\n\t\tDom.remove(this.getDescription());\n\t\tDom.remove(this.getDeferLink());\n\n\t\tthis.isFinished = true;\n\t\tthis.fireCurrentStepEvent('onAfterFinalState');\n\t}\n\n\t/**\n\t * @private\n\t */\n\thideFinalState()\n\t{\n\t\tthis.fireCurrentStepEvent('onBeforeHideFinalState');\n\t\tif (this.getCurrentStep().getCompleted())\n\t\t{\n\t\t\tDom.replace(this.getFinishedNotice(), this.getRepeatBtn());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.replace(this.getFinishedNotice(), this.getStartBtn());\n\t\t}\n\n\t\tDom.replace(this.getFinishedBlock(), this.getHelpBlock());\n\n\t\tif (Manager.getInstance().feedbackFormId) {\n\t\t\tDom.append(this.getSupportLink(), this.getFooter());\n\t\t}\n\t\tDom.prepend(this.getNavigation(), this.getFooter());\n\t\tDom.prepend(this.getDescription(), this.getContentInner());\n\t\tDom.prepend(this.getTitle(), this.getContentInner());\n\n\t\tif (this.layout.deferBtn)\n\t\t{\n\t\t\tDom.remove(this.getDeferBtn());\n\t\t\tDom.prepend(this.getStartBtn(), this.getBtnContainer());\n\t\t}\n\n\t\tconst header = this.getStepPopup().querySelector('.ui-tutor-popup-header');\n\t\tDom.append(this.getDeferLink(), header);\n\t\tthis.fireCurrentStepEvent('onAfterHideFinalState');\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFinishedBlock()\n\t{\n\t\tif (!this.layout.finishedBlock)\n\t\t{\n\t\t\tthis.layout.finishedBlock =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-finished\">\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-title\">${Loc.getMessage('JS_UI_TUTOR_FINAL_CONGRATULATIONS')}</div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-icon\"></div>\n\t\t\t\t\t\t<div class=\"ui-tutor-popup-finished-text\">${Loc.getMessage('JS_UI_TUTOR_FINAL_TEXT')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finishedBlock;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetFinishedNotice()\n\t{\n\t\tif (!this.layout.finishedNotice)\n\t\t{\n\t\t\tthis.layout.finishedNotice =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-finished-notice\">${Loc.getMessage('JS_UI_TUTOR_FINAL_NOTICE')}</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.finishedNotice;\n\t}\n\n\t/**\n\t * @public\n\t * @returns {HTMLElement}\n\t */\n\tgetNewStepsSection()\n\t{\n\t\tif (!this.layout.newStepsSection)\n\t\t{\n\t\t\tthis.layout.newStepsSection =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-new-text\">${Loc.getMessage('JS_UI_TUTOR_STEP_NEW')}</div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.layout.newStepsSection;\n\t}\n\n\t/**\n\t * @public\n\t */\n\tshowNewSteps()\n\t{\n\t\tDom.addClass(this.getFinishedBlock(), 'ui-tutor-popup-finished-new');\n\t\tthis.showPopup(this.getStepPopup());\n\t\tthis.showFinalState();\n\n\t\tDom.append(this.getNewStepsSection(), this.getFinishedBlock());\n\t\tDom.replace(this.getFinishedNotice(), Manager.getBeginBtn());\n\t\tDom.append(this.getDeferBtn(), this.getBtnContainer());\n\n\t\tthis.setStepCounter();\n\t\tthis.initArrows();\n\t\tthis.scrollToStep();\n\n\t\tthis.isAddedSteps = true;\n\t\tthis.isFinished = false;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tinitArrows()\n\t{\n\t\tthis.stepListWrap = document.querySelector('.ui-tutor-popup-step-list-wrap');\n\t\tthis.arrowWrap = document.querySelector('.ui-tutor-popup-arrow-wrap');\n\n\t\tif (this.stepListWrap && this.stepListWrap.scrollWidth > this.stepListWrap.offsetWidth)\n\t\t{\n\t\t\tDom.append(this.getPrevArrow(), this.arrowWrap);\n\t\t\tDom.append(this.getNextArrow(), this.arrowWrap);\n\n\t\t\tthis.stepListWrap.addEventListener('scroll', this.toggleArrows.bind(this));\n\n\t\t\tthis.prevArrow.addEventListener('mouseenter', this.scrollToLeft.bind(this));\n\t\t\tthis.prevArrow.addEventListener('mouseleave', this.stopAutoScroll.bind(this));\n\t\t\tthis.nextArrow.addEventListener('mouseenter', this.scrollToRight.bind(this));\n\t\t\tthis.nextArrow.addEventListener('mouseleave', this.stopAutoScroll.bind(this));\n\n\t\t\tthis.toggleNextArrow();\n\t\t\tthis.getStepBlock().classList.add(\"ui-tutor-popup-step-list-wide\");\n\n\t\t\tthis.hasArrows = true;\n\t\t}\n\t}\n\n\tgetPrevArrow()\n\t{\n\t\tif (!this.prevArrow)\n\t\t{\n\t\t\tthis.prevArrow =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-arrow ui-tutor-popup-arrow-prev\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.prevArrow;\n\t}\n\n\tgetNextArrow()\n\t{\n\t\tif (!this.nextArrow)\n\t\t{\n\t\t\tthis.nextArrow =\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"ui-tutor-popup-arrow ui-tutor-popup-arrow-next\"></div>\n\t\t\t\t`;\n\t\t}\n\n\t\treturn this.nextArrow;\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToLeft()\n\t{\n\t\tthis.arrowTimer = setInterval(function() {\n\t\t\tthis.stepListWrap.scrollLeft -= 5;\n\t\t}.bind(this), 20);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToRight()\n\t{\n\t\tthis.arrowTimer = setInterval(function() {\n\t\t\tthis.stepListWrap.scrollLeft += 5;\n\t\t}.bind(this), 20);\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstopAutoScroll()\n\t{\n\t\tclearInterval(this.arrowTimer);\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleArrows()\n\t{\n\t\tthis.togglePrevArrow();\n\t\tthis.toggleNextArrow();\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttoggleNextArrow()\n\t{\n\t\tif (this.stepListWrap.scrollWidth > this.stepListWrap.offsetWidth\n\t\t\t&& (this.stepListWrap.offsetWidth + this.stepListWrap.scrollLeft) < this.stepListWrap.scrollWidth)\n\t\t{\n\t\t\tDom.addClass(this.nextArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.nextArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\ttogglePrevArrow()\n\t{\n\t\tif (this.stepListWrap.scrollLeft > 0)\n\t\t{\n\t\t\tDom.addClass(this.prevArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.prevArrow, 'ui-tutor-popup-arrow-show');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tshowAnimation(popup)\n\t{\n\t\tDom.removeClass(popup, 'ui-tutor-popup-hide-complex');\n\t\tDom.removeClass(popup, 'ui-tutor-popup-hide');\n\n\t\tif (this.complexAnimation)\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-show-complex');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-show');\n\t\t}\n\n\t}\n\n\t/**\n\t * @private\n\t */\n\tfadeAnimation(popup)\n\t{\n\t\tDom.removeClass(popup, 'ui-tutor-popup-show-complex');\n\t\tDom.removeClass(popup, 'ui-tutor-popup-show');\n\n\t\tif (this.complexAnimation)\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-hide-complex');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(popup, 'ui-tutor-popup-hide');\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tscrollToStep()\n\t{\n\t\tlet posList = null;\n\t\tlet posStep = null;\n\t\tif (this.stepListWrap)\n\t\t{\n\t\t\tposList = Dom.getPosition(this.stepListWrap);\n\t\t\tposStep = Dom.getPosition(this.stepListWrap.querySelector('[data-step=\"' + this.currentStepIndex + '\"]'));\n\t\t}\n\t\tconst offset = 7; // padding 2px and margin 5px\n\n\t\tif (!Type.isNull(posStep) && posStep.left + posStep.width > posList.left + posList.width )\n\t\t{\n\t\t\tthis.stepListWrap.scrollLeft += posStep.left - (posList.left + posList.width) + posStep.width + offset;\n\t\t}\n\n\t\tif (!Type.isNull(posStep) && posStep.left < posList.left)\n\t\t{\n\t\t\tthis.stepListWrap.scrollLeft -= posList.left - posStep.left + offset;\n\t\t}\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic getFullEventName(shortName)\n\t{\n\t\treturn shortName;\n\t}\n\n\tstatic getInstance()\n\t{\n\t\treturn Manager.getScenarioInstance();\n\t}\n\n\tstatic init(options)\n\t{\n\t\treturn Manager.initScenario(options);\n\t}\n}"],"names":["Step","options","setEventNamespace","Type","isPlainObject","id","title","description","url","isCompleted","video","helpLink","highlight","isActive","isShownForSlider","initOptions","videoObj","shortName","Event","EventEmitter","Manager","domain","feedbackFormId","tutorialData","eventService","lastCheckTime","isString","length","feedBackForm","BX","UI","Feedback","Form","getById","openPanel","instance","scenarioInstance","getInstance","emit","setOptions","getScenarioInstance","Scenario","animation","getImButton","document","getElementById","getRootImButton","layout","imButton","buttonWrapper","buttonInner","Tag","render","Dom","addClass","append","bind","usersPanel","querySelector","style","bottom","text","smallPopupText","getSmallPopup","display","hasClass","removeClass","skipAnimation","removeHandler","remove","hasOwnProperty","smallPopup","setTimeout","showSmallPopup","hideSmallPopup","clickSmallPopupHandler","Loc","getMessage","body","startTitle","startText","getStartPopup","startPopup","getBeginBtn","getDeferBtn","beginBtn","deferBtn","informer","informerParentNode","isCollapsedShow","getCollapseBlock","num","removeInformer","isInformerShow","getInformer","textContent","step","withGuide","showAfterAnimation","collapsedStep","collapsedBlock","showFunction","call","getCollapseTitle","innerHTML","getTitle","showGuide","checkButtonsState","hideNode","showNode","getCompleted","activeGuide","getRepeatBtn","getCompletedBtn","getStartBtn","isShowRepeatWithCompleted","Guide","simpleMode","steps","getHighlightOptions","subscribe","getFullEventName","finishGuide","start","getPopup","closeIcon","close","collapseBlock","clickCollapseBlockHandler","startBtn","event","stopPropagation","repeatBtn","completedBtn","collapseTitle","closeCollapseEntity","loader","Loader","target","size","show","destroy","collapseLoader","node","scenario","window","location","pathname","getUrl","beforeEvent","fireCurrentStepEvent","showCollapseBlock","activate","showCollapsedBlock","eventName","stepPopup","arrowTimer","guide","arrowWrap","prevArrow","nextArrow","currentStepIndex","currentStep","isAddedSteps","hasArrows","isLoading","btn","stepBlock","progress","counter","counterContainer","collapseDescription","content","contentInner","contentBlock","nextBtn","help","completedBlock","finishedBlock","supportLink","sections","loadYoutubeApiScript","setVideoItems","onYouTubeReadyEvent","YT","isNeedCheckYT","tag","createElement","src","firstScriptTag","getElementsByTagName","parentNode","insertBefore","ytCheckerTimer","setInterval","isFunction","Player","clearInterval","getCurrentStep","Array","isArray","forEach","push","stepInList","findStepById","getId","currentStepId","currentStepIsActive","uncompletedStep","getFirstUncompletedStep","setCurrentStep","isFinished","indexOf","complexAnimation","showPopup","getStepPopup","toggleCompletedState","toggleNavBtn","setPopupData","hideFinalState","initArrows","stepId","i","clickOnCloseIcon","getCounterContainer","getDeferLink","getContentBlock","getStepBlock","getContentInner","getFooter","footer","getNavigation","getBtnContainer","getSupportLink","getDescription","getHelpBlock","btnContainer","navigation","backBtn","clickOnBackBtn","clickOnNextBtn","setInformerCount","getCompletedSteps","setCount","fadeAnimation","total","getCounter","replace","deferLink","deferMenu","PopupMenuWindow","angle","offsetLeft","className","bindElement","items","onclick","clickStartHandler","showSuccessState","repeatStep","closeStepPopup","supportLinkHandler","showFeedbackForm","stepItems","switchStep","setStepItems","getHelpLink","currentVideo","prepend","isObject","playerData","videoId","events","mute","pauseVideo","setPlaybackQuality","getIframe","getAttribute","playVideo","playerVars","cc_load_policy","cc_lang_pref","rel","getVideoObj","link","handleClickLinkHandler","showAnimation","getNewStepsSection","getFinishedBlock","showFinalState","increaseCurrentIndex","showStep","reduceCurrentIndex","clickOnCompletedBtn","nextUncompletedStep","scrollToStep","getVideo","setCurrentVideo","setStepCounter","pauseCurrentVideo","followLink","setActiveStep","checkFollowLink","currentActiveStep","deactivate","getCompletedBLock","fireStepEvent","extra","data","getFinishedNotice","header","finishedNotice","newStepsSection","stepListWrap","scrollWidth","offsetWidth","getPrevArrow","getNextArrow","addEventListener","toggleArrows","scrollToLeft","stopAutoScroll","scrollToRight","toggleNextArrow","classList","add","scrollLeft","togglePrevArrow","popup","posList","posStep","getPosition","offset","isNull","left","width","initScenario"],"mappings":";;;;;;KAEaA,IAAI;GAAA;GAEhB,cAAYC,OAAO,EACnB;KAAA;KAAA;KACC;KACA,MAAKC,iBAAiB,CAAC,kBAAkB,CAAC;KAC1CD,OAAO,GAAGE,cAAI,CAACC,aAAa,CAACH,OAAO,CAAC,GAAGA,OAAO,GAAG,EAAE;KAEpD,MAAKI,EAAE,GAAGJ,OAAO,CAACI,EAAE,IAAI,IAAI;KAC5B,MAAKC,KAAK,GAAGL,OAAO,CAACK,KAAK,IAAI,IAAI;KAClC,MAAKC,WAAW,GAAGN,OAAO,CAACM,WAAW,IAAI,IAAI;KAC9C,MAAKC,GAAG,GAAGP,OAAO,CAACO,GAAG,IAAI,EAAE;KAC5B,MAAKC,WAAW,GAAGR,OAAO,CAACQ,WAAW,IAAI,KAAK;KAC/C,MAAKC,KAAK,GAAGT,OAAO,CAACS,KAAK,IAAI,IAAI;KAClC,MAAKC,QAAQ,GAAGV,OAAO,CAACU,QAAQ,IAAI,IAAI;KACxC,MAAKC,SAAS,GAAGX,OAAO,CAACW,SAAS,IAAI,IAAI;KAC1C,MAAKC,QAAQ,GAAGZ,OAAO,CAACY,QAAQ,KAAK,IAAI;KACzC,MAAKC,gBAAgB,GAAGb,OAAO,CAACa,gBAAgB,IAAI,KAAK;KACzD,MAAKC,WAAW,GAAGd,OAAO;KAE1B,MAAKe,QAAQ,GAAG,IAAI;KAAC;;;;CAIvB;CACA;CACA;GAHC;KAAA;KAAA,2BAKA;OACC,OAAO,IAAI,CAACV,KAAK;;;CAInB;CACA;CACA;;KAHC;KAAA,8BAKA;OACC,OAAO,IAAI,CAACU,QAAQ;;;CAItB;CACA;;KAFC;KAAA,sCAIA;OACC,OAAO,IAAI,CAACJ,SAAS;;;CAIvB;CACA;CACA;;KAHC;KAAA,iCAKA;OACC,OAAO,IAAI,CAACL,WAAW;;;CAIzB;CACA;CACA;;KAHC;KAAA,yBAKA;OACC,OAAO,IAAI,CAACC,GAAG;;;CAIjB;CACA;CACA;;KAHC;KAAA,+BAKA;OACC,OAAO,IAAI,CAACC,WAAW;;;KACvB;KAAA,2BAGD;OACC,OAAO,IAAI,CAACC,KAAK;;;KACjB;KAAA,8BAGD;OACC,OAAO,IAAI,CAACC,QAAQ;;;CAItB;CACA;CACA;;KAHC;KAAA,wBAKA;OACC,OAAO,IAAI,CAACN,EAAE;;;CAIhB;CACA;CACA;;KAHC;KAAA,iCAKA;OACC,OAAO,IAAI,CAACU,WAAW;;;CAIzB;CACA;;KAFC;KAAA,2BAIA;OACC,IAAI,CAACF,QAAQ,GAAG,IAAI;;;CAItB;CACA;;KAFC;KAAA,oCAIA;OACC,OAAO,IAAI,CAACC,gBAAgB;;;CAI9B;CACA;;KAFC;KAAA,6BAIA;OACC,IAAI,CAACD,QAAQ,GAAG,KAAK;;;CAIvB;CACA;;KAFC;KAAA,iCAGwBI,SAAS,EACjC;OACC,OAAOA,SAAS;;;GAChB;CAAA,EAtIwBC,eAAK,CAACC,YAAY;;;ACF5C,KAOaC,OAAO;GAAA;GAEnB,mBACA;KAAA;KAAA;KACC;KACA,MAAKlB,iBAAiB,CAAC,qBAAqB,CAAC;KAAC;;GAC9C;KAAA;KAAA,2BAEUD,OAAO,EAAEoB,MAAM,EAAEC,cAAc,EAC1C;OACCrB,OAAO,GAAGA,OAAO,IAAI,EAAE;OAEvB,IAAI,CAACsB,YAAY,GAAGtB,OAAO,CAACsB,YAAY,IAAI,EAAE;OAC9C,IAAI,CAACC,YAAY,GAAGvB,OAAO,CAACuB,YAAY,IAAI,EAAE;OAC9C,IAAI,CAACC,aAAa,GAAGxB,OAAO,CAACwB,aAAa,IAAI,CAAC;OAC/C,IAAI,CAACJ,MAAM,GAAGpB,OAAO,CAACoB,MAAM,IAAI,EAAE;OAClC,IAAI,CAACC,cAAc,GAAGrB,OAAO,CAACqB,cAAc,IAAI,EAAE;OAClD,IAAGnB,cAAI,CAACuB,QAAQ,CAACL,MAAM,CAAC,IAAIA,MAAM,CAACM,MAAM,GAAG,CAAC,EAC7C;SACC,IAAI,CAACN,MAAM,GAAGA,MAAM;;OAErB,IAAGlB,cAAI,CAACuB,QAAQ,CAACJ,cAAc,CAAC,IAAIA,cAAc,CAACK,MAAM,GAAG,CAAC,EAC7D;SACC,IAAI,CAACL,cAAc,GAAGA,cAAc;;;;KAErC;KAAA,mCAGD;OACC,IAAI,IAAI,CAACA,cAAc,EACvB;SACC,IAAI,CAACM,YAAY,GAAGC,EAAE,CAACC,EAAE,CAACC,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAC,IAAI,CAACX,cAAc,CAAC;SACpE,IAAI,IAAI,CAACM,YAAY,EACrB;WACC,IAAI,CAACA,YAAY,CAACM,SAAS,EAAE;;;;;KAG/B;KAAA,4BAGD;OACC,OAAO,IAAI,CAACb,MAAM;;;KAClB;KAAA,yCAGD;OACC,OAAO,IAAI,CAACE,YAAY;;;KACxB;KAAA,yCAGD;OACC,OAAO,IAAI,CAACC,YAAY;;;KACxB;KAAA,0CAGD;OACC,OAAO,IAAI,CAACC,aAAa;;;CAI3B;CACA;;KAFC;KAAA,8BAIA;OACC,OAAO,IAAI,CAACU,QAAQ;;;CAItB;CACA;;KAFC;KAAA,sCAIA;OACC,OAAO,IAAI,CAACC,gBAAgB;;;KAC5B;KAAA,qBAEWnC,OAAO,EAAEoB,MAAM,EAAEC,cAAc,EAC3C;OACC,IAAIa,QAAQ,GAAG,IAAI,CAACE,WAAW,EAAE;OACjC,IAAI,EAAEF,QAAQ,YAAYf,OAAO,CAAC,EAClC;SACC,IAAI,CAACe,QAAQ,GAAG,IAAIf,OAAO,EAAE;SAC7Be,QAAQ,GAAG,IAAI,CAACE,WAAW,EAAE;SAC7B,IAAI,CAACC,IAAI,CAAC,eAAe,CAAC;QAC1B,MAED;SACCH,QAAQ,GAAG,IAAI,CAACE,WAAW,EAAE;;OAE9BF,QAAQ,CAACI,UAAU,CAACtC,OAAO,EAAEoB,MAAM,EAAEC,cAAc,CAAC;OAEpD,OAAOa,QAAQ;;;KACf;KAAA,6BAEmBlC,OAAO,EAC3B;OACC,IAAIkC,QAAQ,GAAG,IAAI,CAACK,mBAAmB,EAAE;OACzC,IAAI,EAAEL,QAAQ,YAAYM,QAAQ,CAAC,EACnC;SACC,IAAI,CAACL,gBAAgB,GAAG,IAAIK,QAAQ,EAAE;SACtCN,QAAQ,GAAG,IAAI,CAACK,mBAAmB,EAAE;SACrC,IAAI,CAACF,IAAI,CAAC,gBAAgB,CAAC;QAC3B,MAED;SACCH,QAAQ,GAAG,IAAI,CAACK,mBAAmB,EAAE;;OAEtCL,QAAQ,CAACI,UAAU,CAACtC,OAAO,CAAC;OAE5B,OAAOkC,QAAQ;;;KACf;KAAA,2BAEiBO,SAAS,EAC3B;OACC,OAAO,IAAI,CAACC,WAAW,CAACD,SAAS,CAAC;;;KAClC;KAAA,kCAGD;OACC,OAAOE,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;;;KACnD;KAAA,8BAGD;OACC,OAAO,CAAC,CAAC,IAAI,CAACC,eAAe,EAAE;;;KAC/B;KAAA,4BAEkBJ,SAAS,EAC5B;OAAA;OACC,IAAG,CAAC,IAAI,CAACK,MAAM,CAACC,QAAQ,EACxB;SACC,IAAIC,aAAa,GAAG,IAAI,CAACH,eAAe,EAAE;SAC1C,IAAGG,aAAa,EAChB;WACC,IAAIC,WAAW,GAAGC,aAAG,CAACC,MAAM,yIAE3B;WACD,IAAIV,SAAS,EACb;aACCW,aAAG,CAACC,QAAQ,CAACL,aAAa,EAAE,2BAA2B,CAAC;;WAEzDI,aAAG,CAACE,MAAM,CAACL,WAAW,EAAED,aAAa,CAAC;WACtCI,aAAG,CAACC,QAAQ,CAACL,aAAa,EAAE,wBAAwB,CAAC;WACrD,IAAI,CAACF,MAAM,CAACC,QAAQ,GAAGC,aAAa;WACpC/B,eAAK,CAACsC,IAAI,CAAC,IAAI,CAACT,MAAM,CAACC,QAAQ,EAAE,OAAO,EAAE,YAAM;aAC/C,MAAI,CAACV,IAAI,CAAC,eAAe,CAAC;YAC1B,CAAC;WAEF,IAAImB,UAAU,GAAGb,QAAQ,CAACc,aAAa,CAAC,mBAAmB,CAAC;WAC5D,IAAId,QAAQ,CAACc,aAAa,CAAC,iBAAiB,CAAC,EAC7C;aACCD,UAAU,CAACE,KAAK,CAACC,MAAM,GAAG,OAAO;YACjC,MAED;aACCH,UAAU,CAACE,KAAK,CAACC,MAAM,GAAG,OAAO;;;;OAKpC,OAAO,IAAI,CAACb,MAAM,CAACC,QAAQ;;;KAC3B;KAAA,+BAEqBa,IAAI,EAC1B;OACC,IAAI,CAACC,cAAc,GAAGD,IAAI;OAC1B,IAAI,CAACE,aAAa,EAAE,CAACJ,KAAK,CAACK,OAAO,GAAG,OAAO;OAC5C,IAAI,CAACF,cAAc,GAAG,EAAE;OAExB,IAAIT,aAAG,CAACY,QAAQ,CAAC,IAAI,CAACF,aAAa,EAAE,EAAE,6BAA6B,CAAC,EACrE;SACCV,aAAG,CAACa,WAAW,CAAC,IAAI,CAACH,aAAa,EAAE,EAAE,6BAA6B,CAAC;;;;KAErE;KAAA,+BAEqBI,aAAa,EACnC;OACCA,aAAa,GAAGA,aAAa,KAAK,IAAI;OACtC,IAAMC,aAAa,GAAG,YAAW;SAChCf,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACN,aAAa,EAAE,CAAC;SAChC,IAAG,IAAI,CAACO,cAAc,CAAC,YAAY,CAAC,EACpC;WACC,OAAO,IAAI,CAACC,UAAU;;SAEvB,IAAI,CAACjC,IAAI,CAAC,0BAA0B,CAAC;QACrC,CAACkB,IAAI,CAAC,IAAI,CAAC;OACZH,aAAG,CAACa,WAAW,CAAC,IAAI,CAACH,aAAa,EAAE,EAAE,6BAA6B,CAAC;OACpEV,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACS,aAAa,EAAE,EAAE,6BAA6B,CAAC;OACjE,IAAGI,aAAa,EAChB;SACCC,aAAa,EAAE;QACf,MAED;SACCI,UAAU,CAACJ,aAAa,EAAE,GAAG,CAAC;;;;KAE/B;KAAA,iCAEuBP,IAAI,EAC5B;OACC,IAAI,CAACvB,IAAI,CAAC,oBAAoB,CAAC;OAC/B,IAAI,CAACmC,cAAc,CAACZ,IAAI,CAAC;;;KACzB;KAAA,mCAGD;OACC,IAAI,CAACvB,IAAI,CAAC,0BAA0B,CAAC;OACrC,IAAI,CAACoC,cAAc,EAAE;OACrB,IAAI,CAACpC,IAAI,CAAC,yBAAyB,CAAC;;;KACpC;KAAA,gCAEsBuB,IAAI,EAC3B;OACC,IAAI,CAACvB,IAAI,CAAC,mBAAmB,CAAC;OAC9B,IAAI,CAACmC,cAAc,CAACZ,IAAI,CAAC;;;KACzB;KAAA,kCAGD;OACC,IAAI,CAACvB,IAAI,CAAC,yBAAyB,CAAC;OACpC,IAAI,CAACoC,cAAc,EAAE;OACrB,IAAI,CAACpC,IAAI,CAAC,wBAAwB,CAAC;;;KACnC;KAAA,gCAGD;OAAA;OACC,IAAMqC,sBAAsB,GAAG,SAAzBA,sBAAsB,GAAS;SACpC,MAAI,CAACrC,IAAI,CAAC,sBAAsB,CAAC;QACjC;OACD,IAAI,CAAC,IAAI,CAACiC,UAAU,EACpB;SACC,IAAI,CAACA,UAAU,GACdpB,aAAG,CAACC,MAAM,wpBAC8BuB,sBAAsB,CAACnB,IAAI,CAAC,IAAI,CAAC,EAIzBoB,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,EAI7C,IAAI,CAACf,cAAc,CAIxD;SACF,IAAI,CAACxB,IAAI,CAAC,wBAAwB,CAAC;SACnCe,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACiB,UAAU,EAAE,6BAA6B,CAAC;SAC5D,IAAI,CAACjC,IAAI,CAAC,8BAA8B,CAAC;SACzCe,aAAG,CAACE,MAAM,CAAC,IAAI,CAACgB,UAAU,EAAE3B,QAAQ,CAACkC,IAAI,CAAC;SAC1C,IAAI,CAACxC,IAAI,CAAC,6BAA6B,CAAC;;OAGzC,OAAO,IAAI,CAACiC,UAAU;;;KACtB;KAAA,+BAEqBjE,KAAK,EAAEuD,IAAI,EACjC;OACC,IAAI,CAACvB,IAAI,CAAC,kBAAkB,CAAC;OAC7B,IAAI,CAACyC,UAAU,GAAGzE,KAAK;OACvB,IAAI,CAAC0E,SAAS,GAAGnB,IAAI;OACrBR,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC2B,aAAa,EAAE,EAAE,qBAAqB,CAAC;OACzD,IAAI,CAACC,UAAU,CAACvB,KAAK,CAACK,OAAO,GAAG,MAAM;OACtC,IAAI,CAACe,UAAU,GAAG,EAAE;OACpB,IAAI,CAACC,SAAS,GAAG,EAAE;;;KACnB;KAAA,kCAGD;OACC3B,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACY,aAAa,EAAE,CAAC;OAChC,OAAO,IAAI,CAACC,UAAU;;;KACtB;KAAA,gCAGD;OACC,IAAI,CAAC,IAAI,CAACA,UAAU,EACpB;SACC,IAAI,CAACA,UAAU,GACd/B,aAAG,CAACC,MAAM,o5BAKsCwB,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,EAI5C,IAAI,CAACE,UAAU,EAChB,IAAI,CAACC,SAAS,EAI9C,IAAI,CAACG,WAAW,EAAE,EAClB,IAAI,CAACC,WAAW,EAAE,CAKvB;SACF,IAAI,CAAC9C,IAAI,CAAC,wBAAwB,CAAC;SACnCe,aAAG,CAACE,MAAM,CAAC,IAAI,CAAC2B,UAAU,EAAEtC,QAAQ,CAACkC,IAAI,CAAC;SAC1C,IAAI,CAACxC,IAAI,CAAC,6BAA6B,CAAC;;OAGzC,OAAO,IAAI,CAAC4C,UAAU;;;KACtB;KAAA,8BAGD;OAAA;OACC,IAAI,CAAC,IAAI,CAACG,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GACZlC,aAAG,CAACC,MAAM,sMAENwB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE1C;SAEF3D,eAAK,CAACsC,IAAI,CAAC,IAAI,CAAC6B,QAAQ,EAAE,OAAO,EAAE,YAAK;WACvC,MAAI,CAAC/C,IAAI,CAAC,eAAe,CAAC;UAC1B,CAAC;;OAGH,OAAO,IAAI,CAAC+C,QAAQ;;;KACpB;KAAA,8BAGD;OAAA;OACC,IAAI,CAAC,IAAI,CAACC,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GACZnC,aAAG,CAACC,MAAM,sLAENwB,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,CAEhD;SAEF3D,eAAK,CAACsC,IAAI,CAAC,IAAI,CAAC8B,QAAQ,EAAE,OAAO,EAAE,YAAM;WACxC,MAAI,CAAChD,IAAI,CAAC,eAAe,CAAC;UAC1B,CAAC;;OAGH,OAAO,IAAI,CAACgD,QAAQ;;;CAItB;CACA;;KAFC;KAAA,iCAGwBrE,SAAS,EACjC;OACC,OAAOA,SAAS;;;CAIlB;CACA;;KAFC;KAAA,8BAIA;OACC,IAAI,CAAC,IAAI,CAACsE,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GACZpC,aAAG,CAACC,MAAM,yKAET;SACF,IAAIoC,kBAAkB,GAAG,IAAI,CAAC7C,WAAW,EAAE;SAC3C,IAAG,IAAI,CAAC8C,eAAe,EACvB;WACCD,kBAAkB,GAAG,IAAI,CAACE,gBAAgB,EAAE;;SAE7C,IAAGF,kBAAkB,EACrB;WACCnC,aAAG,CAACE,MAAM,CAAC,IAAI,CAACgC,QAAQ,EAAEC,kBAAkB,CAAC;;;OAI/C,OAAO,IAAI,CAACD,QAAQ;;;KACpB;KAAA,yBAEeI,GAAG,EACnB;OACC,IAAI,CAACrD,IAAI,CAAC,kBAAkB,CAAC;OAC7B,IAAIqD,GAAG,GAAG,CAAC,EACX;SACC,IAAI,CAACC,cAAc,EAAE;SACrB,OAAO,IAAI,CAACL,QAAQ;SACpB,IAAI,CAACM,cAAc,GAAG,KAAK;QAC3B,MAED;SACC,IAAI,CAACC,WAAW,EAAE,CAACC,WAAW,GAAGJ,GAAG;SACpC,IAAI,CAACE,cAAc,GAAG,IAAI;;OAE3B,IAAI,CAACvD,IAAI,CAAC,iBAAiB,CAAC;;;CAI9B;CACA;;KAFC;KAAA,iCAIA;OACC,IAAG,IAAI,CAACuD,cAAc,EACtB;SACCxC,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACyB,WAAW,EAAE,CAAC;;;;CAKjC;CACA;CACA;;KAHC;KAAA,mCAI0BE,IAAI,EAAEC,SAAS,EAAEC,kBAAkB,EAC7D;OACCD,SAAS,GAAGA,SAAS,KAAK,KAAK;OAC/BC,kBAAkB,GAAGA,kBAAkB,KAAK,KAAK;OACjD,IAAI,CAAC5D,IAAI,CAAC,4BAA4B,CAAC;OACvC,IAAG,CAAC,IAAI,CAACmD,eAAe,EACxB;SACC,IAAI,CAACnD,IAAI,CAAC,2BAA2B,CAAC;SACtC,IAAG,EAAE0D,IAAI,YAAYhG,IAAI,CAAC,EAC1B;WACCgG,IAAI,GAAG,IAAIhG,IAAI,CAACgG,IAAI,CAAC;;SAEtB,IAAI,CAACG,aAAa,GAAGH,IAAI;SAEzB,IAAII,cAAc,GAAG,IAAI,CAACV,gBAAgB,EAAE;SAC5C,IAAIW,YAAY,GAAG,SAAfA,YAAY,GAAc;WAC7BD,cAAc,CAACzC,KAAK,CAACK,OAAO,GAAG,MAAM;UACrC;SACD,IAAGkC,kBAAkB,EACrB;WACC1B,UAAU,CAAC6B,YAAY,CAAC7C,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;UACxC,MAED;WACC6C,YAAY,CAACC,IAAI,CAAC,IAAI,CAAC;;SAExB,IAAI,CAACC,gBAAgB,EAAE,CAACC,SAAS,GAAGR,IAAI,CAACS,QAAQ,EAAE;SACnD,IAAG,IAAI,CAACZ,cAAc,EACtB;WACCxC,aAAG,CAACE,MAAM,CAAC,IAAI,CAACuC,WAAW,EAAE,EAAEM,cAAc,CAAC;;SAE/C,IAAI,CAACX,eAAe,GAAG,IAAI;SAC3B,IAAI,CAACnD,IAAI,CAAC,sBAAsB,CAAC;;OAGlC,IAAI2D,SAAS,EACb;SACC,IAAI,CAACS,SAAS,EAAE;QAChB,MAED;SACC,IAAI,CAACC,iBAAiB,EAAE;;;;KAEzB;KAAA,wCAGD;OACC,IAAI,CAACC,QAAQ,CAAC,IAAI,CAAClB,gBAAgB,EAAE,CAAC;;;KACtC;KAAA,sCAGD;OACC,IAAI,CAACmB,QAAQ,CAAC,IAAI,CAACnB,gBAAgB,EAAE,CAAC;;;KACtC;KAAA,oCAGD;OACC,IAAI,CAACpD,IAAI,CAAC,qBAAqB,CAAC;OAChC,IAAI0D,IAAI,GAAG,IAAI,CAACG,aAAa;OAC7B,IAAG,CAACH,IAAI,EACR;SACC;;OAGD,IAAGA,IAAI,CAACc,YAAY,EAAE,EACtB;SACC,IAAG,IAAI,CAACC,WAAW,EACnB;WACC,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACI,YAAY,EAAE,CAAC;UAClC,MAED;WACC,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACG,YAAY,EAAE,CAAC;;SAEnC,IAAI,CAACJ,QAAQ,CAAC,IAAI,CAACK,eAAe,EAAE,CAAC;SACrC,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACM,WAAW,EAAE,CAAC;QACjC,MACI,IAAGlB,IAAI,CAACnF,QAAQ,EACrB;SACC,IAAI,CAACgG,QAAQ,CAAC,IAAI,CAACI,eAAe,EAAE,CAAC;SACrC,IAAG,IAAI,CAACF,WAAW,IAAI,CAAC,IAAI,CAACI,yBAAyB,EACtD;WACC,IAAI,CAACP,QAAQ,CAAC,IAAI,CAACI,YAAY,EAAE,CAAC;UAClC,MAED;WACC,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACG,YAAY,EAAE,CAAC;;SAEnC,IAAI,CAACJ,QAAQ,CAAC,IAAI,CAACM,WAAW,EAAE,CAAC;QACjC,MAED;SACC,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACK,WAAW,EAAE,CAAC;SACjC,IAAI,CAACN,QAAQ,CAAC,IAAI,CAACI,YAAY,EAAE,CAAC;SAClC,IAAI,CAACJ,QAAQ,CAAC,IAAI,CAACK,eAAe,EAAE,CAAC;;;;KAEtC;KAAA,4BAGD;OACC,IAAI,CAAC3E,IAAI,CAAC,mBAAmB,CAAC;OAC9B,IAAI0D,IAAI,GAAG,IAAI,CAACG,aAAa;OAC7B,IAAI,CAAC,IAAI,CAACY,WAAW,IAAIf,IAAI,EAC7B;SACC,IAAI,CAAC1D,IAAI,CAAC,kBAAkB,CAAC;SAC7B,IAAI,CAACyE,WAAW,GAAG,IAAIK,aAAK,CAAC;WAC5BC,UAAU,EAAE,IAAI;WAChBC,KAAK,EAAE,CACNtB,IAAI,CAACuB,mBAAmB,EAAE;UAE3B,CAAC;SACF,IAAI,CAACR,WAAW,CAACS,SAAS,CAACJ,aAAK,CAACK,gBAAgB,CAAC,UAAU,CAAC,EAAE,IAAI,CAACC,WAAW,CAAClE,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3F,IAAI,CAACuD,WAAW,CAACY,KAAK,EAAE;SACxBtE,aAAG,CAACgB,MAAM,CAAC,IAAI,CAAC0C,WAAW,CAACa,QAAQ,EAAE,CAACC,SAAS,CAAC;SACjD,IAAI,CAACvF,IAAI,CAAC,uBAAuB,CAAC;SAClC,IAAI,CAACqE,iBAAiB,EAAE;;;;KAEzB;KAAA,6BAGD;OACC,IAAG,IAAI,CAACI,WAAW,YAAYK,aAAK,EACpC;SACC,IAAI,CAACL,WAAW,CAACe,KAAK,EAAE;SACxB,IAAI,CAACxF,IAAI,CAAC,cAAc,CAAC;;;;CAK5B;CACA;CACA;;KAHC;KAAA,mCAKA;OACC,IAAI,CAAC,IAAI,CAACS,MAAM,CAACgF,aAAa,EAC9B;SACC,IAAI,CAAChF,MAAM,CAACgF,aAAa,GACxB5E,aAAG,CAACC,MAAM,ufACsD,IAAI,CAAC4E,yBAAyB,CAACxE,IAAI,CAAC,IAAI,CAAC,EAE3DoB,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,EACjF,IAAI,CAAC0B,gBAAgB,EAAE,EAEtB,IAAI,CAACW,WAAW,EAAE,EAClB,IAAI,CAACF,YAAY,EAAE,EACnB,IAAI,CAACC,eAAe,EAAE,CAI3B;SACF,IAAI,CAAC3E,IAAI,CAAC,4BAA4B,CAAC;SACvCe,aAAG,CAACE,MAAM,CAAC,IAAI,CAACR,MAAM,CAACgF,aAAa,EAAEnF,QAAQ,CAACkC,IAAI,CAAC;SACpD,IAAI,CAACxC,IAAI,CAAC,iCAAiC,CAAC;;OAG7C,OAAO,IAAI,CAACS,MAAM,CAACgF,aAAa;;;CAIlC;CACA;CACA;;KAHC;KAAA,8BAKA;OAAA;OACC,IAAI,CAAC,IAAI,CAACE,QAAQ,EAClB;SACC,IAAI,CAACA,QAAQ,GACZ9E,aAAG,CAACC,MAAM,gNAENwB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE1C;SAEF3D,eAAK,CAACsC,IAAI,CAAC,IAAI,CAACyE,QAAQ,EAAE,OAAO,EAAE,UAACC,KAAK,EAAK;WAC7CA,KAAK,CAACC,eAAe,EAAE;WACvB,MAAI,CAAC7F,IAAI,CAAC,eAAe,CAAC;UAC1B,CAAC;;OAGH,OAAO,IAAI,CAAC2F,QAAQ;;;CAItB;CACA;CACA;;KAHC;KAAA,+BAKA;OAAA;OACC,IAAI,CAAC,IAAI,CAACG,SAAS,EACnB;SACC,IAAI,CAACA,SAAS,GACbjF,aAAG,CAACC,MAAM,gNAENwB,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAE3C;SAEF3D,eAAK,CAACsC,IAAI,CAAC,IAAI,CAAC4E,SAAS,EAAE,OAAO,EAAE,UAACF,KAAK,EAAK;WAC9CA,KAAK,CAACC,eAAe,EAAE;WACvB,MAAI,CAAC7F,IAAI,CAAC,gBAAgB,CAAC;UAC3B,CAAC;;OAGH,OAAO,IAAI,CAAC8F,SAAS;;;CAIvB;CACA;CACA;;KAHC;KAAA,kCAKA;OAAA;OACC,IAAI,CAAC,IAAI,CAACC,YAAY,EACtB;SACC,IAAI,CAACA,YAAY,GAChBlF,aAAG,CAACC,MAAM,kNAENwB,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,CAEpD;SAEF3D,eAAK,CAACsC,IAAI,CAAC,IAAI,CAAC6E,YAAY,EAAE,OAAO,EAAE,UAACH,KAAK,EAAK;WACjDA,KAAK,CAACC,eAAe,EAAE;WACvB,MAAI,CAAC7F,IAAI,CAAC,mBAAmB,CAAC;UAC9B,CAAC;;OAGH,OAAO,IAAI,CAAC+F,YAAY;;;CAI1B;CACA;CACA;;KAHC;KAAA,mCAKA;OACC,IAAI,CAAC,IAAI,CAACtF,MAAM,CAACuF,aAAa,EAC9B;SACC,IAAI,CAACvF,MAAM,CAACuF,aAAa,GACxBnF,aAAG,CAACC,MAAM,0JAET;;OAGH,OAAO,IAAI,CAACL,MAAM,CAACuF,aAAa;;;CAIlC;CACA;CACA;;KAHC;KAAA,mCAI0BJ,KAAK,EAC/B;OACC,IAAI,CAACK,mBAAmB,EAAE;OAC1B,IAAI,CAACjG,IAAI,CAAC,yBAAyB,CAAC;;;CAItC;CACA;;KAFC;KAAA,4CAIA;OACC,IAAI,CAACA,IAAI,CAAC,oBAAoB,CAAC;;;KAC/B;KAAA,8BAGD;OACC,OAAO,IAAI,CAACyE,WAAW;OACvB,IAAI,CAACJ,iBAAiB,EAAE;OACxB,IAAI,CAACrE,IAAI,CAAC,oBAAoB,CAAC;;;KAC/B;KAAA,sCAGD;OACC,IAAI,CAACA,IAAI,CAAC,4BAA4B,CAAC;OACvC,IAAI,CAACoD,gBAAgB,EAAE,CAAC/B,KAAK,CAACK,OAAO,GAAG,MAAM;OAC9C,IAAI,CAACrB,WAAW,EAAE,CAACgB,KAAK,CAACK,OAAO,GAAG,OAAO;OAC1C,IAAG,IAAI,CAAC+C,WAAW,YAAYK,aAAK,EACpC;SACC,IAAI,CAACL,WAAW,CAACe,KAAK,EAAE;;OAEzB,IAAG,IAAI,CAACjC,cAAc,EACtB;SACCxC,aAAG,CAACE,MAAM,CAAC,IAAI,CAACuC,WAAW,EAAE,EAAE,IAAI,CAACnD,WAAW,EAAE,CAAC;;OAEnD,OAAO,IAAI,CAACwD,aAAa;OACzB,IAAI,CAACV,eAAe,GAAG,KAAK;OAC5B,IAAI,CAACnD,IAAI,CAAC,sBAAsB,CAAC;;;KACjC;KAAA,6BAGD;OACC,IAAI,CAACA,IAAI,CAAC,oBAAoB,CAAC;OAC/B,IAAI,CAACyC,UAAU,GAAG,EAAE;OACpB,IAAI,CAACC,SAAS,GAAG,EAAE;OACnB,IAAI,CAACjC,MAAM,CAACyF,MAAM,GAAG,IAAIC,kBAAM,CAAC;SAC/BC,MAAM,EAAE,IAAI,CAACzD,aAAa,EAAE;SAC5B0D,IAAI,EAAE;QACN,CAAC;OACF,IAAI,CAAC5F,MAAM,CAACyF,MAAM,CAACI,IAAI,EAAE;OACzB,IAAI,CAAC3D,aAAa,EAAE,CAACtB,KAAK,CAACK,OAAO,GAAG,MAAM;OAC3CX,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC2B,aAAa,EAAE,EAAE,qBAAqB,CAAC;OACzD,IAAI,CAAC3C,IAAI,CAAC,mBAAmB,CAAC;;;KAC9B;KAAA,6BAGD;OACC,IAAI,IAAI,CAACS,MAAM,CAACyF,MAAM,EACtB;SACC,IAAI,CAACzF,MAAM,CAACyF,MAAM,CAACK,OAAO,EAAE;SAC5B,IAAI,CAAC5D,aAAa,EAAE,CAACtB,KAAK,CAACK,OAAO,GAAG,MAAM;;;;KAE5C;KAAA,sCAGD;OACC,IAAI,CAAC1B,IAAI,CAAC,6BAA6B,CAAC;OACxC,IAAI,CAACS,MAAM,CAAC+F,cAAc,GAAG,IAAIL,kBAAM,CAAC;SACvCC,MAAM,EAAE,IAAI,CAAChD,gBAAgB,EAAE;SAC/BiD,IAAI,EAAE;QACN,CAAC;OACF,IAAI,CAAC5F,MAAM,CAAC+F,cAAc,CAACF,IAAI,EAAE;OACjC,IAAI,CAAClD,gBAAgB,EAAE,CAAC/B,KAAK,CAACK,OAAO,GAAG,MAAM;OAC9CX,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACoC,gBAAgB,EAAE,EAAE,8BAA8B,CAAC;OACrE,IAAI,CAACpD,IAAI,CAAC,4BAA4B,CAAC;;;KACvC;KAAA,sCAGD;OACC,IAAI,CAACA,IAAI,CAAC,6BAA6B,CAAC;OACxC,IAAI,IAAI,CAACS,MAAM,CAAC+F,cAAc,EAC9B;SACC,IAAI,CAAC/F,MAAM,CAAC+F,cAAc,CAACD,OAAO,EAAE;SACpCxF,aAAG,CAACa,WAAW,CAAC,IAAI,CAACwB,gBAAgB,EAAE,EAAE,8BAA8B,CAAC;SACxE,IAAI,CAACA,gBAAgB,EAAE,CAAC/B,KAAK,CAACK,OAAO,GAAG,MAAM;;OAE/C,IAAI,CAAC1B,IAAI,CAAC,4BAA4B,CAAC;;;KACvC;KAAA,yBAEgByG,IAAI,EACrB;OACCA,IAAI,CAACpF,KAAK,CAACK,OAAO,GAAG,OAAO;;;KAC5B;KAAA,yBAEgB+E,IAAI,EACrB;OACCA,IAAI,CAACpF,KAAK,CAACK,OAAO,GAAG,MAAM;;;KAC3B;KAAA,gCAEsBgC,IAAI,EAAEgD,QAAQ,EACrC;OACC,IAAI,CAAC1G,IAAI,CAAC,wBAAwB,CAAC;OACnC0D,IAAI,GAAGA,IAAI,IAAI,IAAI,CAACG,aAAa;OACjC,IAAGH,IAAI,YAAYhG,IAAI,EACvB;SACCgJ,QAAQ,GAAGA,QAAQ,IAAI,EAAE;SACzB,IAAI,EAAEC,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAKnD,IAAI,CAACoD,MAAM,EAAE,CAAC,EACjD;WACC,IAAIC,WAAW,GAAG,8BAA8B;WAChD,IAAGL,QAAQ,YAAYvG,QAAQ,EAC/B;aACCY,aAAG,CAACC,QAAQ,CAAC0F,QAAQ,CAAC9B,WAAW,EAAE,EAAE,aAAa,CAAC;aACnD8B,QAAQ,CAACM,oBAAoB,CAACD,WAAW,CAAC;YAC1C,MAED;aACChG,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC4D,WAAW,EAAE,EAAE,aAAa,CAAC;aAC/C,IAAI,CAAC5E,IAAI,CAAC+G,WAAW,EAAE;eAACrD,IAAI,EAAJA;cAAK,CAAC;;WAE/BiD,MAAM,CAACC,QAAQ,GAAGlD,IAAI,CAACoD,MAAM,EAAE;UAC/B,MAED;WACC,IAAGJ,QAAQ,YAAYvG,QAAQ,EAC/B;aACCuG,QAAQ,CAACO,iBAAiB,CAACvD,IAAI,CAAC;YAChC,MAED;aACCA,IAAI,CAACwD,QAAQ,EAAE;aACf,IAAI,CAACC,kBAAkB,CAACzD,IAAI,CAAC;;;;OAIhC,IAAI,CAAC1D,IAAI,CAAC,yBAAyB,CAAC;;;KACpC;KAAA,0BAEgBoH,SAAS,EAC1B;OACC,IAAI,CAACpH,IAAI,CAACoH,SAAS,CAAC;;;GACpB;CAAA,EA/xB2BxI,eAAK,CAACC,YAAY;;CAkyB/C;CACA;CACA;CACAC,OAAO,CAACe,QAAQ,GAAG,IAAI;CACvBf,OAAO,CAACgB,gBAAgB,GAAG,IAAI;CAC/BhB,OAAO,CAAC2F,WAAW,GAAG,IAAI;CAC1B3F,OAAO,CAAC+F,yBAAyB,GAAG,IAAI;CACxC/F,OAAO,CAAC2B,MAAM,GAAG;GAChBC,QAAQ,EAAE,IAAI;GACd+E,aAAa,EAAE,IAAI;GACnBO,aAAa,EAAE;CAChB,CAAC;;;ACpzBD,KAIa7F,QAAQ;GAAA;GACpB,oBAA0B;KAAA;KAAA,IAAdxC,OAAO,uEAAG,EAAE;KAAA;KACvB;KACA,MAAKC,iBAAiB,CAAC,sBAAsB,CAAC;KAE9C,MAAKyJ,SAAS,GAAG,IAAI;KACrB,MAAKC,UAAU,GAAG,IAAI;KACtB,MAAKC,KAAK,GAAG,IAAI;KACjB,MAAKrB,MAAM,GAAG,IAAI;KAElB,MAAKsB,SAAS,GAAG,IAAI;KACrB,MAAKC,SAAS,GAAG,IAAI;KACrB,MAAKC,SAAS,GAAG,IAAI;KAErB,MAAKC,gBAAgB,GAAG,CAAC;KACzB,MAAKC,WAAW,GAAG,IAAI;KACvB,MAAKC,YAAY,GAAG,KAAK;KACzB,MAAKC,SAAS,GAAG,KAAK;KAEtB,MAAKC,SAAS,GAAG,IAAI;KAErB,MAAK9H,UAAU,CAACtC,OAAO,CAAC;KAExB,MAAKqK,GAAG,GAAG1H,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;KACvD,MAAK0C,QAAQ,GAAG3C,QAAQ,CAACC,cAAc,CAAC,mBAAmB,CAAC;KAE5D,MAAKE,MAAM,GAAG;OACbwH,SAAS,EAAE,IAAI;OACfC,QAAQ,EAAE,IAAI;OACdC,OAAO,EAAE,IAAI;OACbC,gBAAgB,EAAE,IAAI;OACtBpK,KAAK,EAAE,IAAI;OACXC,WAAW,EAAE,IAAI;OACjBwH,aAAa,EAAE,IAAI;OACnBO,aAAa,EAAE,IAAI;OACnBqC,mBAAmB,EAAE,IAAI;OACzBC,OAAO,EAAE,IAAI;OACbC,YAAY,EAAE,IAAI;OAClBC,YAAY,EAAE,IAAI;OAClBtK,GAAG,EAAE,IAAI;OACTkI,MAAM,EAAE,IAAI;OACZT,QAAQ,EAAE,IAAI;OACd8C,OAAO,EAAE,IAAI;OACb3C,SAAS,EAAE,IAAI;OACf9C,QAAQ,EAAE,IAAI;OACd0F,IAAI,EAAE,IAAI;OACV3C,YAAY,EAAE,IAAI;OAClB4C,cAAc,EAAE,IAAI;OACpBC,aAAa,EAAE,IAAI;OACnBC,WAAW,EAAE;MACb;KAED,MAAKC,QAAQ,GAAG,CACf,UAAU,EACV,UAAU,EACV,MAAM,CACN;KAED,MAAKC,oBAAoB,EAAE;KAE3B,MAAK7D,SAAS,CAAC,gBAAgB,EAAE,YAAM;OACtC,MAAK8D,aAAa,EAAE;MACpB,CAAC;KAAC;;GACH;KAAA;KAAA,uCAGD;OACC,IAAMC,mBAAmB,GAAG,YAAW;SACtC,IAAI,CAACjJ,IAAI,CAAC,gBAAgB,EAAE;WAAE0G,QAAQ,EAAE;UAAK,CAAC;QAC9C,CAACxF,IAAI,CAAC,IAAI,CAAC;OAEZ,IAAI,CAACyF,MAAM,CAACuC,EAAE,EACd;SACC,IAAIC,aAAa,GAAG,IAAI;SACxB,IAAMC,GAAG,GAAG9I,QAAQ,CAAC+I,aAAa,CAAC,QAAQ,CAAC;SAC5CD,GAAG,CAACE,GAAG,GAAG,oCAAoC;SAC9C,IAAMC,cAAc,GAAGjJ,QAAQ,CAACkJ,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SACjED,cAAc,CAACE,UAAU,CAACC,YAAY,CAACN,GAAG,EAAEG,cAAc,CAAC;SAE3D,IAAII,cAAc,GAAGC,WAAW,CAAC,YAAW;WAC3C,IAAIT,aAAa,EACjB;aACC,IAAIxC,MAAM,CAACuC,EAAE,IAAIrL,cAAI,CAACgM,UAAU,CAAClD,MAAM,CAACuC,EAAE,CAACY,MAAM,CAAC,EAClD;eACCC,aAAa,CAACJ,cAAc,CAAC;eAC7BV,mBAAmB,EAAE;;;UAGvB,EAAE,GAAG,CAAC;SAEP/G,UAAU,CAAC,YAAW;WACrB6H,aAAa,CAACJ,cAAc,CAAC;WAC7BR,aAAa,GAAG,KAAK;UACrB,EAAE,IAAI,CAAC;QACR,MACI;SACJjH,UAAU,CAAC,YAAW;WACrB+G,mBAAmB,EAAE;UACrB,CAAC/H,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;;;;KAGnB;KAAA,2BAEWvD,OAAO,EACnB;OAAA;OACC,IAAI,CAACqJ,oBAAoB,CAAC,oBAAoB,EAAE,KAAK,CAAC;OACtDrJ,OAAO,GAAGE,cAAI,CAACC,aAAa,CAACH,OAAO,CAAC,GAAGA,OAAO,GAAG,EAAE;OACpD,IAAIiK,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;;;OAGvC,IAAI,CAAChF,KAAK,GAAG,EAAE;OACf,IAAIiF,KAAK,CAACC,OAAO,CAACvM,OAAO,CAACqH,KAAK,CAAC,EAChC;SACCrH,OAAO,CAACqH,KAAK,CAACmF,OAAO,CAAC,UAAAzG,IAAI,EAAI;WAC7B,MAAI,CAACsB,KAAK,CAACoF,IAAI,CAAC,IAAI1M,IAAI,CAACgG,IAAI,CAAC,CAAC;UAC/B,CAAC;;OAEH,IAAIkE,WAAW,YAAYlK,IAAI,EAC/B;SACC,IAAI2M,UAAU,GAAG,IAAI,CAACC,YAAY,CAAC1C,WAAW,CAAC2C,KAAK,EAAE,CAAC;SACvD,IAAIF,UAAU,EACd;WACCzC,WAAW,GAAGyC,UAAU;;QAEzB,MACI,IAAIxM,cAAI,CAACuB,QAAQ,CAACzB,OAAO,CAAC6M,aAAa,CAAC,IAAI7M,OAAO,CAAC6M,aAAa,CAACnL,MAAM,GAAG,CAAC,EACjF;SACC,IAAIgL,WAAU,GAAG,IAAI,CAACC,YAAY,CAAC3M,OAAO,CAAC6M,aAAa,CAAC;SACzD,IAAIH,WAAU,EACd;WACCzC,WAAW,GAAGyC,WAAU;WACxB,IAAG1M,OAAO,CAAC8M,mBAAmB,KAAK,IAAI,EACvC;aACC7C,WAAW,CAACV,QAAQ,EAAE;;;;OAIzB,IAAI,CAACU,WAAW,EAChB;SACC,IAAI8C,eAAe,GAAG,IAAI,CAACC,uBAAuB,EAAE;SACpD,IAAID,eAAe,EACnB;WACC9C,WAAW,GAAG8C,eAAe;;;OAG/B,IAAI,CAAC9C,WAAW,IAAI,IAAI,CAAC5C,KAAK,IAAI,IAAI,CAACA,KAAK,CAAC,CAAC,CAAC,EAC/C;SACC4C,WAAW,GAAG,IAAI,CAAC5C,KAAK,CAAC,CAAC,CAAC;;OAE5B,IAAI,CAAC4F,cAAc,CAAChD,WAAW,CAAC;OAEhC,IAAIjK,OAAO,EACX;SACC,IAAI,CAACoK,SAAS,GAAG,KAAK;;OAGvB,IAAI,CAAC/J,KAAK,GAAGL,OAAO,CAACK,KAAK,IAAI,EAAE;OAChC,IAAI,CAAC6K,WAAW,GAAGlL,OAAO,CAACkL,WAAW,IAAI,EAAE;OAC5C,IAAI,CAACgC,UAAU,GAAGlN,OAAO,CAACkN,UAAU,IAAI,KAAK;OAC7C,IAAI,CAAC7D,oBAAoB,CAAC,mBAAmB,EAAE,KAAK,CAAC;;;CAIvD;CACA;;KAFC;KAAA,+BAGetD,IAAI,EACnB;OACC,IAAIA,IAAI,YAAYhG,IAAI,EACxB;SACC,IAAI,CAACkK,WAAW,GAAGlE,IAAI;SACvB,IAAIsB,KAAK,GAAG,IAAI,CAACA,KAAK;SAEtB,IAAInH,cAAI,CAACqM,OAAO,CAAClF,KAAK,CAAC,EACvB;WACC,IAAI,CAAC2C,gBAAgB,GAAG3C,KAAK,CAAC8F,OAAO,CAACpH,IAAI,CAAC;;SAE5C,IAAI,CAACsD,oBAAoB,CAAC,aAAa,CAAC;;;;CAK3C;CACA;;KAFC;KAAA,sBAGM+D,gBAAgB,EACtB;OACC,IAAI,CAAC/K,IAAI,CAAC,SAAS,EAAE;SAAE0G,QAAQ,EAAE;QAAK,CAAC;OAEvC,IAAIqE,gBAAgB;;SACpB;WACC,IAAI,CAACA,gBAAgB,GAAG,IAAI;;OAE7B,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,YAAY,EAAE,CAAC;OACnC,IAAI,CAACC,oBAAoB,EAAE;OAC3B,IAAI,CAACC,YAAY,EAAE;OACnB,IAAI,CAACC,YAAY,EAAE;OAEnB,IAAI,IAAI,CAACvD,YAAY,EACrB;SACC,IAAI,CAACwD,cAAc,EAAE;;OAGtB,IAAI,CAAC,IAAI,CAACvD,SAAS,EACnB;SACC,IAAI,CAACwD,UAAU,EAAE;;OAGlB,IAAI,CAACP,gBAAgB,GAAG,KAAK;OAC7B,IAAI,CAAC/D,oBAAoB,CAAC,gBAAgB,CAAC;;;KAC3C;KAAA,6BAEYuE,MAAM,EACnB;OACC,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,EAAE,EAC1C;SACC,IAAM9H,IAAI,GAAG,IAAI,CAACsB,KAAK,CAACwG,CAAC,CAAC;SAC1B,IAAI9H,IAAI,CAAC6G,KAAK,EAAE,KAAKgB,MAAM,EAC3B;WACC,OAAO7H,IAAI;;;OAIb,OAAO,IAAI;;;CAIb;CACA;CACA;;KAHC;KAAA,+BAKA;OAAA;OACC,IAAM+H,gBAAgB,GAAG,SAAnBA,gBAAgB,GAAS;SAC9B,MAAI,CAACzL,IAAI,CAAC,oBAAoB,EAAE;WAAE0G,QAAQ,EAAE;UAAK,CAAC;QAClD;OAED,IAAI,CAAC,IAAI,CAACW,SAAS,EACnB;SACC,IAAI,CAACA,SAAS,GACbxG,aAAG,CAACC,MAAM,sqCAMHwB,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,EACnC,IAAI,CAACmJ,mBAAmB,EAAE,EAEkB,IAAI,CAAC1N,KAAK,EAExD,IAAI,CAAC2N,YAAY,EAAE,EAGnB,IAAI,CAACC,eAAe,EAAE,EAMpB,IAAI,CAACC,YAAY,EAAE,EAI0BJ,gBAAgB,CAACvK,IAAI,CAAC,IAAI,CAAC,CAG9E;SACF,IAAI,CAAC8F,oBAAoB,CAAC,uBAAuB,CAAC;SAClDjG,aAAG,CAACE,MAAM,CAAC,IAAI,CAACoG,SAAS,EAAE/G,QAAQ,CAACkC,IAAI,CAAC;SACzC,IAAI,CAACwE,oBAAoB,CAAC,4BAA4B,CAAC;;OAGxD,OAAO,IAAI,CAACK,SAAS;;;CAIvB;CACA;CACA;;KAHC;KAAA,kCAKA;OACC,IAAI,CAAC,IAAI,CAAC5G,MAAM,CAAC+H,YAAY,EAC7B;SACC,IAAI,CAAC/H,MAAM,CAAC+H,YAAY,GACvB3H,aAAG,CAACC,MAAM,gNAEN,IAAI,CAACgL,eAAe,EAAE,EACtB,IAAI,CAACC,SAAS,EAAE,CAEnB;;OAGH,OAAO,IAAI,CAACtL,MAAM,CAAC+H,YAAY;;;CAIjC;CACA;CACA;;KAHC;KAAA,4BAKA;OACC,IAAI,CAAC,IAAI,CAAC/H,MAAM,CAACuL,MAAM,EACvB;SACC,IAAI,CAACvL,MAAM,CAACuL,MAAM,GACjBnL,aAAG,CAACC,MAAM,yMAEN,IAAI,CAACmL,aAAa,EAAE,EACpB,IAAI,CAACC,eAAe,EAAE,CAEzB;SAEF,IAAIpN,OAAO,CAACiB,WAAW,EAAE,CAACf,cAAc,EAAE;WACzC+B,aAAG,CAACE,MAAM,CAAC,IAAI,CAACkL,cAAc,EAAE,EAAE,IAAI,CAAC1L,MAAM,CAACuL,MAAM,CAAC;;;OAKvD,OAAO,IAAI,CAACvL,MAAM,CAACuL,MAAM;;;CAI3B;CACA;CACA;;KAHC;KAAA,kCAKA;OACC,IAAI,CAAC,IAAI,CAACvL,MAAM,CAAC8H,YAAY,EAC7B;SACC,IAAI,CAAC9H,MAAM,CAAC8H,YAAY,GACvB1H,aAAG,CAACC,MAAM,kOAEN,IAAI,CAACqD,QAAQ,EAAE,EACf,IAAI,CAACiI,cAAc,EAAE,EACrB,IAAI,CAACC,YAAY,EAAE,CAEtB;;OAGH,OAAO,IAAI,CAAC5L,MAAM,CAAC8H,YAAY;;;CAIjC;CACA;CACA;;KAHC;KAAA,kCAKA;OACC,IAAI,CAAC,IAAI,CAAC9H,MAAM,CAAC6L,YAAY,EAC7B;SACC,IAAI,CAAC7L,MAAM,CAAC6L,YAAY,GACvBzL,aAAG,CAACC,MAAM,wNAEN,IAAI,CAAC8D,WAAW,EAAE,EAClB,IAAI,CAACF,YAAY,EAAE,EACnB,IAAI,CAACC,eAAe,EAAE,CAEzB;;OAGH,OAAO,IAAI,CAAClE,MAAM,CAAC6L,YAAY;;;CAIjC;CACA;CACA;;KAHC;KAAA,gCAKA;OACC,IAAI,CAAC,IAAI,CAAC7L,MAAM,CAAC8L,UAAU,EAC3B;SACC,IAAI,CAAC9L,MAAM,CAAC8L,UAAU,GACrB1L,aAAG,CAACC,MAAM,qJAET;SAEF,IAAI,CAACL,MAAM,CAAC+L,OAAO,GAClB3L,aAAG,CAACC,MAAM,2MACqE,IAAI,CAAC2L,cAAc,CAACvL,IAAI,CAAC,IAAI,CAAC,CAC5G;SAEF,IAAI,CAACT,MAAM,CAACgI,OAAO,GAClB5H,aAAG,CAACC,MAAM,2MACqE,IAAI,CAAC4L,cAAc,CAACxL,IAAI,CAAC,IAAI,CAAC,CAC5G;SAEFH,aAAG,CAACE,MAAM,CAAC,IAAI,CAACR,MAAM,CAAC+L,OAAO,EAAE,IAAI,CAAC/L,MAAM,CAAC8L,UAAU,CAAC;SACvDxL,aAAG,CAACE,MAAM,CAAC,IAAI,CAACR,MAAM,CAACgI,OAAO,EAAE,IAAI,CAAChI,MAAM,CAAC8L,UAAU,CAAC;;OAGxD,OAAO,IAAI,CAAC9L,MAAM,CAAC8L,UAAU;;;CAI/B;CACA;CACA;;KAHC;KAAA,4BAIY9F,IAAI,EAChB;OACC,IAAI,CAACkG,gBAAgB,CAAC,IAAI,CAAC3H,KAAK,CAAC3F,MAAM,GAAG,IAAI,CAACuN,iBAAiB,EAAE,CAAC;;;CAIrE;CACA;CACA;;KAHC;KAAA,oCAIoBvJ,GAAG,EACvB;OACC,IAAI,CAACsJ,gBAAgB,CAACtJ,GAAG,CAAC;;;CAI5B;CACA;;KAFC;KAAA,iCAGiBA,GAAG,EACpB;OACCvE,OAAO,CAAC+N,QAAQ,CAACxJ,GAAG,CAAC;;;CAIvB;CACA;CACA;CACA;;KAJC;KAAA,+BAKeuC,KAAK,EAAEmF,gBAAgB,EACtC;OACC,IAAI,CAAC,IAAI,CAAC1D,SAAS,EACnB;SACC;;OAED,IAAIzB,KAAK,EACT;SACCA,KAAK,CAACC,eAAe,EAAE;;OAExB,IAAI,CAACmB,oBAAoB,CAAC,kBAAkB,CAAC;OAC7C,IAAI+D,gBAAgB;;SACpB;WACC,IAAI,CAACA,gBAAgB,GAAG,IAAI;;OAE7B,IAAI,CAAC+B,aAAa,CAAC,IAAI,CAAC7B,YAAY,EAAE,CAAC;OACvC/I,UAAU,CAAC,YAAY;SACtB,IAAI,CAACoC,QAAQ,CAAC,IAAI,CAAC2G,YAAY,EAAE,CAAC;QAClC,CAAC/J,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;OAClB,IAAI,CAAC6J,gBAAgB,GAAG,KAAK;;;CAI/B;CACA;CACA;;KAHC;KAAA,oCAKA;OACC,IAAIgC,KAAK,GAAG,CAAC;OACb,KAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;SACC,IAAI,IAAI,CAACxG,KAAK,CAACwG,CAAC,CAAC,CAACrN,WAAW,EAC7B;WACC4O,KAAK,IAAI,CAAC;;;OAGZ,OAAOA,KAAK;;;CAId;CACA;;KAFC;KAAA,iCAIA;OACC,IAAI,CAACC,UAAU,EAAE,CAACvJ,WAAW,GAAGnB,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAC1E0K,OAAO,CAAC,UAAU,EAAE,IAAI,CAACjI,KAAK,CAAC8F,OAAO,CAAC,IAAI,CAACd,cAAc,EAAE,CAAC,GAAG,CAAC,CAAC,CAClEiD,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAACjI,KAAK,CAAC3F,MAAM,CAAC;;;CAIhD;CACA;CACA;;KAHC;KAAA,sCAKA;OACC,IAAI,CAAC,IAAI,CAACoB,MAAM,CAAC2H,gBAAgB,EACjC;SACC,IAAI,CAAC3H,MAAM,CAAC2H,gBAAgB,GAC3BvH,aAAG,CAACC,MAAM,sMAEN,IAAI,CAACkM,UAAU,EAAE,CAEpB;;OAGH,OAAO,IAAI,CAACvM,MAAM,CAAC2H,gBAAgB;;;CAGrC;CACA;CACA;;KAHC;KAAA,6BAKA;OACC,IAAI,CAAC,IAAI,CAAC3H,MAAM,CAAC0H,OAAO,EACxB;SACC,IAAI,CAAC1H,MAAM,CAAC0H,OAAO,GAClBtH,aAAG,CAACC,MAAM,2KAET;;OAGH,OAAO,IAAI,CAACL,MAAM,CAAC0H,OAAO;;;CAI5B;CACA;CACA;;KAHC;KAAA,+BAKA;OACC,IAAI,CAAC,IAAI,CAAC1H,MAAM,CAACyM,SAAS,EAC1B;SACC,IAAI,CAACzM,MAAM,CAACyM,SAAS,GACpBrM,aAAG,CAACC,MAAM,+LAENwB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE1C;SAEF,IAAM4K,SAAS,GAAG,IAAI5N,EAAE,CAAC6N,eAAe,CAAC;WACxCC,KAAK,EAAE,IAAI;WACXC,UAAU,EAAE,EAAE;WACdC,SAAS,EAAE,2BAA2B;WACtCC,WAAW,EAAE,IAAI,CAAC/M,MAAM,CAACyM,SAAS;WAClCO,KAAK,EAAE,CACN;aAAElM,IAAI,EAAEe,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;aACpDmL,OAAO,EAAE,YAAW;eACnB,IAAI,CAAC1N,IAAI,CAAC,gBAAgB,EAAE;iBAAE0G,QAAQ,EAAE;gBAAK,CAAC;eAC9CyG,SAAS,CAAC3H,KAAK,EAAE;cACjB,CAACtE,IAAI,CAAC,IAAI;YACX,EACD;aAAEK,IAAI,EAAEe,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;aACxDmL,OAAO,EAAE,YAAW;eACnB,IAAI,CAAC1N,IAAI,CAAC,iBAAiB,EAAE;iBAAE0G,QAAQ,EAAE;gBAAK,CAAC;eAC/CyG,SAAS,CAAC3H,KAAK,EAAE;cACjB,CAACtE,IAAI,CAAC,IAAI;YACX,EACD;aACCK,IAAI,EAAEe,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;aACnDmL,OAAO,EAAE,YAAW;eACnB,IAAI,CAAC1N,IAAI,CAAC,aAAa,EAAE;iBAAE0G,QAAQ,EAAE;gBAAK,CAAC;eAC3CyG,SAAS,CAAC3H,KAAK,EAAE;cACjB,CAACtE,IAAI,CAAC,IAAI;YACX,EACD;aACCK,IAAI,EAAEe,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;aACtDmL,OAAO,EAAE,YAAW;eACnB,IAAI,CAAC1N,IAAI,CAAC,gBAAgB,EAAE;iBAAE0G,QAAQ,EAAE;gBAAK,CAAC;eAC9CyG,SAAS,CAAC3H,KAAK,EAAE;cACjB,CAACtE,IAAI,CAAC,IAAI;YACX;UAEF,CAAC;SAEFtC,eAAK,CAACsC,IAAI,CAAC,IAAI,CAACT,MAAM,CAACyM,SAAS,EAAE,OAAO,EAAE,YAAM;WAChDC,SAAS,CAAC7G,IAAI,EAAE;UAChB,CAAC;;OAGH,OAAO,IAAI,CAAC7F,MAAM,CAACyM,SAAS;;;CAI9B;CACA;CACA;;KAHC;KAAA,8BAKA;OACC,IAAI,CAAC,IAAI,CAACzM,MAAM,CAACkF,QAAQ,EACzB;SACC,IAAI,CAAClF,MAAM,CAACkF,QAAQ,GACnB9E,aAAG,CAACC,MAAM,yNACqD,IAAI,CAAC6M,iBAAiB,CAACzM,IAAI,CAAC,IAAI,CAAC,EAC5FoB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE1C;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACkF,QAAQ;;;CAI7B;CACA;CACA;;KAHC;KAAA,kCAKA;OACC,IAAI,CAAC,IAAI,CAAClF,MAAM,CAACsF,YAAY,EAC7B;SACC,IAAI,CAACtF,MAAM,CAACsF,YAAY,GACvBlF,aAAG,CAACC,MAAM,yNACqD,IAAI,CAAC8M,gBAAgB,CAAC1M,IAAI,CAAC,IAAI,CAAC,EAC3FoB,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE9C;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACsF,YAAY;;;CAIjC;CACA;CACA;;KAHC;KAAA,+BAKA;OACC,IAAI,CAAC,IAAI,CAACtF,MAAM,CAACqF,SAAS,EAC1B;SACC,IAAI,CAACrF,MAAM,CAACqF,SAAS,GACpBjF,aAAG,CAACC,MAAM,yNACqD,IAAI,CAAC+M,UAAU,CAAC3M,IAAI,CAAC,IAAI,CAAC,EACrFoB,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAE3C;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACqF,SAAS;;;CAI9B;CACA;CACA;;KAHC;KAAA,8BAKA;OACC,IAAI,CAAC,IAAI,CAACrF,MAAM,CAACuC,QAAQ,EACzB;SACC,IAAI,CAACvC,MAAM,CAACuC,QAAQ,GACnBnC,aAAG,CAACC,MAAM,sNACkD,IAAI,CAACgN,cAAc,CAAC5M,IAAI,CAAC,IAAI,CAAC,EACtFoB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE1C;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACuC,QAAQ;;;CAI7B;CACA;CACA;;KAHC;KAAA,oCAKA;OACC,IAAI,CAAC,IAAI,CAACvC,MAAM,CAACkI,cAAc,EAC/B;SACC,IAAI,CAAClI,MAAM,CAACkI,cAAc,GACzB9H,aAAG,CAACC,MAAM,4SAGqCwB,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAE1F;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACkI,cAAc;;;CAInC;CACA;CACA;;KAHC;KAAA,2BAKA;OACC,IAAI,CAAC,IAAI,CAAClI,MAAM,CAACzC,KAAK,EACtB;SACC,IAAI,CAACyC,MAAM,CAACzC,KAAK,GAChB6C,aAAG,CAACC,MAAM,0JAET;;OAGH,OAAO,IAAI,CAACL,MAAM,CAACzC,KAAK;;;CAI1B;CACA;CACA;;KAHC;KAAA,iCAKA;OACC,IAAI,CAAC,IAAI,CAACyC,MAAM,CAACxC,WAAW,EAC5B;SACC,IAAI,CAACwC,MAAM,CAACxC,WAAW,GACtB4C,aAAG,CAACC,MAAM,yJAET;;OAGH,OAAO,IAAI,CAACL,MAAM,CAACxC,WAAW;;;CAIhC;CACA;CACA;;KAHC;KAAA,iCAKA;OACC,IAAI,CAAC,IAAI,CAACwC,MAAM,CAACoI,WAAW,EAC5B;SACC,IAAI,CAACpI,MAAM,CAACoI,WAAW,GACtBhI,aAAG,CAACC,MAAM,wMACyC,IAAI,CAACiN,kBAAkB,CAAC7M,IAAI,CAAC,IAAI,CAAC,EACjFoB,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,CAE5C;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACoI,WAAW;;;KAC9B;KAAA,+BAGD;OACC,IAAI,CAACvE,QAAQ,CAAC,IAAI,CAAC2G,YAAY,EAAE,CAAC;;;KAClC;KAAA,6BAGD;OACC,IAAI,CAAC1G,QAAQ,CAAC,IAAI,CAAC0G,YAAY,EAAE,CAAC;;;KAClC;KAAA,qCAGD;OACC,IAAI,CAACjL,IAAI,CAAC,kBAAkB,CAAC;OAC7BlB,OAAO,CAACiB,WAAW,EAAE,CAACiO,gBAAgB,EAAE;;;CAI1C;CACA;CACA;;KAHC;KAAA,+BAKA;OACC,IAAI,CAAC,IAAI,CAACvN,MAAM,CAACwH,SAAS,EAC1B;SACC,IAAI,CAACxH,MAAM,CAACwH,SAAS,GACpBpH,aAAG,CAACC,MAAM,yJAET;SAEF,IAAI,CAACL,MAAM,CAACwN,SAAS,GAAG,EAAE;SAE1B,KAAK,IAAIzC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;WACC,IAAM7D,gBAAgB,GACrB9G,aAAG,CAACC,MAAM,yRAC0C0K,CAAC,EAAa,IAAI,CAAC0C,UAAU,CAAChN,IAAI,CAAC,IAAI,CAAC,EAC1CsK,CAAC,GAAG,CAAC,CAEtD;WAEF,IAAI,CAAC/K,MAAM,CAACwN,SAAS,CAAC7D,IAAI,CAACzC,gBAAgB,CAAC;WAC5C5G,aAAG,CAACE,MAAM,CAAC0G,gBAAgB,EAAE,IAAI,CAAClH,MAAM,CAACwH,SAAS,CAAC;;SAEpD,IAAI,CAACkG,YAAY,EAAE;;OAGpB,OAAO,IAAI,CAAC1N,MAAM,CAACwH,SAAS;;;CAI9B;CACA;;KAFC;KAAA,+BAIA;OACC,IAAI,IAAI,CAACxH,MAAM,IAAI,IAAI,CAACA,MAAM,CAACwN,SAAS,EACxC;SACC,KAAK,IAAIzC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;WACC,IAAI,IAAI,CAAC/K,MAAM,CAACwN,SAAS,CAACzC,CAAC,CAAC,EAC5B;aACCzK,aAAG,CAACa,WAAW,CAAC,IAAI,CAACnB,MAAM,CAACwN,SAAS,CAACzC,CAAC,CAAC,EAAE,kCAAkC,CAAC;aAC7E,IAAIA,CAAC,KAAK,IAAI,CAAC7D,gBAAgB,EAC/B;eACC5G,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAACwN,SAAS,CAACzC,CAAC,CAAC,EAAE,kCAAkC,CAAC;;aAE3E,IAAI,IAAI,CAACxG,KAAK,CAACwG,CAAC,CAAC,CAACrN,WAAW,EAC7B;eACC4C,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAACwN,SAAS,CAACzC,CAAC,CAAC,EAAE,oCAAoC,CAAC;;;;;;;CASlF;CACA;CACA;;KAHC;KAAA,+BAKA;OACC,IAAI,CAAC,IAAI,CAAC/K,MAAM,CAACiI,IAAI,EACrB;SACC,IAAI,CAACjI,MAAM,CAACiI,IAAI,GACf7H,aAAG,CAACC,MAAM,mLAEN,IAAI,CAACsN,WAAW,EAAE,CAErB;;OAGH,OAAO,IAAI,CAAC3N,MAAM,CAACiI,IAAI;;;KACvB;KAAA,gCAGD;OACC,KAAK,IAAI8C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;SACC,IAAM6C,YAAY,GACjBxN,aAAG,CAACC,MAAM,qKACqC0K,CAAC,CAC/C;SACFzK,aAAG,CAACuN,OAAO,CAACD,YAAY,EAAE,IAAI,CAAChC,YAAY,EAAE,CAAC;SAE9C,IAAI1F,MAAM,CAACuC,EAAE,IAAIrL,cAAI,CAAC0Q,QAAQ,CAAC5H,MAAM,CAACuC,EAAE,CAAC,IAAIrL,cAAI,CAACgM,UAAU,CAAClD,MAAM,CAACuC,EAAE,CAACY,MAAM,CAAC,IAAI,IAAI,CAAC9E,KAAK,CAACwG,CAAC,CAAC,CAACpN,KAAK,KAAK,IAAI,EAC9G;WACC,IAAMoQ,UAAU,GAAG;aAClBC,OAAO,EAAE,IAAI,CAACzJ,KAAK,CAACwG,CAAC,CAAC,CAACpN,KAAK;aAC5BsQ,MAAM,EAAE;eACP,SAAS,EAAE,UAAS9I,KAAK,EAAE;iBAC1BA,KAAK,CAACQ,MAAM,CAACuI,IAAI,EAAE;iBACnB/I,KAAK,CAACQ,MAAM,CAACwI,UAAU,EAAE;iBACzBhJ,KAAK,CAACQ,MAAM,CAACyI,kBAAkB,CAAC,OAAO,CAAC;iBAExC,IAAI,CAACjJ,KAAK,CAACQ,MAAM,CAAC0I,SAAS,EAAE,CAACC,YAAY,CAAC,WAAW,CAAC,KAAK,IAAI,CAACpH,gBAAgB,EACjF;mBACC5G,aAAG,CAACC,QAAQ,CAAC4E,KAAK,CAACQ,MAAM,CAAC0I,SAAS,EAAE,EAAE,2BAA2B,CAAC;mBACnElJ,KAAK,CAACQ,MAAM,CAAC4I,SAAS,EAAE;;gBAEzB,CAAC9N,IAAI,CAAC,IAAI;cACX;aACD+N,UAAU,EAAE;eACXC,cAAc,EAAE,CAAC;eACjBC,YAAY,EAAE,IAAI;eAClBC,GAAG,EAAE;;YAEN;WACD,IAAI,CAACpI,oBAAoB,CAAC,qBAAqB,EAAE,IAAI,EAAE;aACtDwH,UAAU,EAAVA;YACA,CAAC;WACF,IAAI,CAACxJ,KAAK,CAACwG,CAAC,CAAC,CAAC9M,QAAQ,GAAG,IAAIwK,EAAE,CAACY,MAAM,CAACuE,YAAY,EAAEG,UAAU,CAAC;WAChE,IAAI,CAACxH,oBAAoB,CAAC,oBAAoB,CAAC;;;;;KAGjD;KAAA,oCAGD;OACC,IAAItD,IAAI,GAAG,IAAI,CAACsG,cAAc,EAAE;OAEhC,IAAIrD,MAAM,CAACuC,EAAE,IAAIxF,IAAI,YAAYhG,IAAI,EACrC;SACC,IAAIU,KAAK,GAAGsF,IAAI,CAAC2L,WAAW,EAAE;SAC9B,IAAIxR,cAAI,CAAC0Q,QAAQ,CAACnQ,KAAK,CAAC,IAAIA,KAAK,CAACwQ,UAAU,EAC5C;WACCxQ,KAAK,CAACwQ,UAAU,EAAE;;;;;KAGpB;KAAA,mCAGD;OACC,IAAIlL,IAAI,GAAG,IAAI,CAACsG,cAAc,EAAE;OAEhC,IAAIrD,MAAM,CAACuC,EAAE,IAAIxF,IAAI,YAAYhG,IAAI,EACrC;SACC,IAAIU,KAAK,GAAGsF,IAAI,CAAC2L,WAAW,EAAE;SAC9B,IAAIxR,cAAI,CAAC0Q,QAAQ,CAACnQ,KAAK,CAAC,IAAIA,KAAK,CAAC4Q,SAAS,EAC3C;WACC5Q,KAAK,CAAC4Q,SAAS,EAAE;;;;;KAGnB;KAAA,8BAGD;OACC,IAAI,CAAC,IAAI,CAACvO,MAAM,CAAC6O,IAAI,EACrB;SACC,IAAI,CAAC7O,MAAM,CAAC6O,IAAI,GACfzO,aAAG,CAACC,MAAM,gQACyC,IAAI,CAACyO,sBAAsB,CAACrO,IAAI,CAAC,IAAI,CAAC,EACzCoB,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC,CAE/F;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAAC6O,IAAI;;;CAIzB;CACA;;KAFC;KAAA,yCAIA;OACC,IAAI,CAACtP,IAAI,CAAC,eAAe,CAAC;;;CAI5B;CACA;CACA;;KAHC;KAAA,0BAIUyG,IAAI,EACd;OACC,IAAI,CAAC+I,aAAa,CAAC/I,IAAI,CAAC;OACxBA,IAAI,CAACpF,KAAK,CAACK,OAAO,GAAG,OAAO;;;CAI9B;CACA;CACA;;KAHC;KAAA,yBAIU+E,IAAI,EACd;OACCA,IAAI,CAACpF,KAAK,CAACK,OAAO,GAAG,OAAO;;;CAI9B;CACA;CACA;;KAHC;KAAA,yBAIU+E,IAAI,EACd;OACCA,IAAI,CAACpF,KAAK,CAACK,OAAO,GAAG,MAAM;;;CAI7B;CACA;CACA;;KAHC;KAAA,4BAIY+E,IAAI,EAChB;OACC1F,aAAG,CAACgB,MAAM,CAAC0E,IAAI,CAAC;;;CAIlB;CACA;;KAFC;KAAA,iCAIA;OACC,IAAI,CAACO,oBAAoB,CAAC,yBAAyB,CAAC;OACpD,IAAI,IAAI,CAAC4F,iBAAiB,EAAE,KAAK,IAAI,CAAC5H,KAAK,CAAC3F,MAAM,IAAI,CAAC,IAAI,CAACwL,UAAU,EACtE;SACC,IAAI,CAAChD,YAAY,GAAG,KAAK;SACzB9G,aAAG,CAACgB,MAAM,CAAC,IAAI,CAAC0N,kBAAkB,EAAE,CAAC;SACrC1O,aAAG,CAACa,WAAW,CAAC,IAAI,CAAC8N,gBAAgB,EAAE,EAAE,6BAA6B,CAAC;SACvE,IAAI,CAACC,cAAc,EAAE;SAErB;;OAGD,IAAI,IAAI,CAAC/C,iBAAiB,EAAE,KAAK,IAAI,CAAC5H,KAAK,CAAC3F,MAAM,IAAI,IAAI,CAACsI,gBAAgB,GAAG,CAAC,KAAK,IAAI,CAAC3C,KAAK,CAAC3F,MAAM,EACrG;SACC,IAAI,CAACsI,gBAAgB,GAAG,CAAC,CAAC;;OAG3B5G,aAAG,CAACa,WAAW,CAAC,IAAI,CAACgD,WAAW,EAAE,EAAE,aAAa,CAAC;OAClD,IAAI,CAACgL,oBAAoB,EAAE;OAC3B,IAAI,CAACC,QAAQ,EAAE;OACf,IAAI,CAAC1E,YAAY,EAAE;OACnB,IAAI,CAACnE,oBAAoB,CAAC,wBAAwB,CAAC;;;KACnD;KAAA,iCAGD;OACC,IAAI,CAACA,oBAAoB,CAAC,yBAAyB,CAAC;OACpD,IAAI,CAAC8I,kBAAkB,EAAE;OACzB,IAAI,CAAC3E,YAAY,EAAE;OACnB,IAAI,CAAC0E,QAAQ,EAAE;OACf,IAAI,CAAC7I,oBAAoB,CAAC,wBAAwB,CAAC;;;KACnD;KAAA,+BAGD;OACCjG,aAAG,CAACa,WAAW,CAAC,IAAI,CAACnB,MAAM,CAAC+L,OAAO,EAAE,kCAAkC,CAAC;OACxEzL,aAAG,CAACa,WAAW,CAAC,IAAI,CAACnB,MAAM,CAACgI,OAAO,EAAE,kCAAkC,CAAC;OAExE,IAAI,IAAI,CAACd,gBAAgB,KAAK,CAAC,EAC/B;SACC5G,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAAC+L,OAAO,EAAE,kCAAkC,CAAC;;OAEtE,IAAI,IAAI,CAAC7E,gBAAgB,GAAG,CAAC,KAAK,IAAI,CAAC3C,KAAK,CAAC3F,MAAM,EACnD;SACC0B,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAACgI,OAAO,EAAE,kCAAkC,CAAC;;;;KAEtE;KAAA,2BAGD;;OAEC,IAAI,IAAI,CAACsH,mBAAmB,IAAI,IAAI,CAACpI,gBAAgB,KAAK,IAAI,CAAC3C,KAAK,CAAC3F,MAAM,EAC3E;SACC,IAAI2Q,mBAAmB,GAAG,IAAI,CAACrF,uBAAuB,EAAE;SACxD,IAAIqF,mBAAmB,EACvB;WACC,IAAI,CAACpF,cAAc,CAACoF,mBAAmB,CAAC;;;OAI1C,IAAI,CAACC,YAAY,EAAE;OACnB,IAAI,CAAC/E,oBAAoB,EAAE;OAC3B,IAAI,CAACE,YAAY,EAAE;OAEnB,IAAI,CAAC2E,mBAAmB,GAAG,KAAK;OAChC,IAAI,CAAC/I,oBAAoB,CAAC,iBAAiB,CAAC;;;CAK9C;CACA;;KAFC;KAAA,6BAIA;OACC,IAAI,CAACA,oBAAoB,CAAC,oBAAoB,CAAC;OAC/C,IAAI,CAAC4D,cAAc,CAAC,IAAI,CAAC5F,KAAK,CAAC,CAAC2B,MAAM,CAACf,KAAK,CAACQ,MAAM,CAAC2I,YAAY,CAAC,WAAW,CAAC,CAAC,CAAC;OAC/E,IAAI,CAAC/H,oBAAoB,CAAC,mBAAmB,CAAC;OAE9C,IAAI,IAAI,CAACvG,MAAM,CAACmI,aAAa,EAC7B;SACC,IAAI,CAACyC,cAAc,EAAE;;OAGtB,IAAI,CAACwE,QAAQ,EAAE;OACf,IAAI,CAAC1E,YAAY,EAAE;OACnB,IAAI,CAACnE,oBAAoB,CAAC,iBAAiB,CAAC;;;CAI9C;CACA;;KAFC;KAAA,0CAIA;OACC,KAAK,IAAIwE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;SACC,IAAI,CAAC,IAAI,CAACxG,KAAK,CAACwG,CAAC,CAAC,CAACrN,WAAW,EAC9B;WACC,OAAO,IAAI,CAAC6G,KAAK,CAACwG,CAAC,CAAC;;;OAItB,OAAO,IAAI;;;CAIb;CACA;;KAFC;KAAA,uCAIA;OACC,IAAM5D,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;OACzC,IAAIpC,WAAW,EACf;SACC,IAAIA,WAAW,CAACpD,YAAY,EAAE,EAC9B;WACC,IAAI,CAACD,QAAQ,CAAC,IAAI,CAACG,YAAY,EAAE,CAAC;WAClC,IAAI,CAACJ,QAAQ,CAAC,IAAI,CAACM,WAAW,EAAE,CAAC;WACjC,IAAI,CAACN,QAAQ,CAAC,IAAI,CAACK,eAAe,EAAE,CAAC;UACrC,MACI,IAAIiD,WAAW,CAACrJ,QAAQ,EAC7B;WACC,IAAI,CAACgG,QAAQ,CAAC,IAAI,CAACI,eAAe,EAAE,CAAC;WACrC,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACM,WAAW,EAAE,CAAC;WACjC,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACG,YAAY,EAAE,CAAC;UAClC,MAED;WACC,IAAI,CAACH,QAAQ,CAAC,IAAI,CAACK,WAAW,EAAE,CAAC;WACjC,IAAI,CAACN,QAAQ,CAAC,IAAI,CAACK,eAAe,EAAE,CAAC;WACrC,IAAI,CAACL,QAAQ,CAAC,IAAI,CAACI,YAAY,EAAE,CAAC;;;;;CAMtC;CACA;;KAFC;KAAA,+BAIA;OACC,IAAI,CAACsC,oBAAoB,CAAC,sBAAsB,CAAC;OACjD,IAAMY,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;OACzC,IAAIpC,WAAW,EACf;SACC,IAAI,CAACzD,QAAQ,EAAE,CAACD,SAAS,GAAG0D,WAAW,CAACzD,QAAQ,EAAE;SAClD,IAAI,CAACiI,cAAc,EAAE,CAAClI,SAAS,GAAG0D,WAAW,CAACwE,cAAc,EAAE;SAC9DtN,OAAO,CAACmF,gBAAgB,EAAE,CAACC,SAAS,GAAG0D,WAAW,CAACzD,QAAQ,EAAE;SAE7D,IAAI,IAAI,CAAC6F,cAAc,EAAE,CAACkG,QAAQ,EAAE,IAAIvJ,MAAM,CAACuC,EAAE,EACjD;WACC,IAAI,CAACiH,eAAe,EAAE;;SAGvB,IAAI,CAACC,cAAc,EAAE;SACrB,IAAI,CAACjC,YAAY,EAAE;;OAEpB,IAAI,CAACnH,oBAAoB,CAAC,qBAAqB,CAAC;;;KAChD;KAAA,kCAGD;OACC,IAAI,CAACA,oBAAoB,CAAC,mBAAmB,CAAC;OAC9C,KAAK,IAAIwE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACxG,KAAK,CAAC3F,MAAM,EAAEmM,CAAC,IAAI,CAAC,EAC7C;SACC,IAAIpN,KAAK,GAAG,IAAI,CAAC4G,KAAK,CAACwG,CAAC,CAAC,CAAC6D,WAAW,EAAE;SACvC,IAAI1I,MAAM,CAACuC,EAAE,IAAIsC,CAAC,KAAK,IAAI,CAAC7D,gBAAgB,IAAIvJ,KAAK,IAAIA,KAAK,CAAC4Q,SAAS,EACxE;WACCjO,aAAG,CAACC,QAAQ,CAAC5C,KAAK,CAAC0Q,SAAS,EAAE,EAAE,2BAA2B,CAAC;WAC5D1Q,KAAK,CAAC4Q,SAAS,EAAE;UACjB,MAED;WACC,IAAI5Q,KAAK,EAAE;aACV2C,aAAG,CAACa,WAAW,CAACxD,KAAK,CAAC0Q,SAAS,EAAE,EAAE,2BAA2B,CAAC;aAE/D,IAAI1Q,KAAK,CAACwQ,UAAU,EACpB;eACCxQ,KAAK,CAACwQ,UAAU,EAAE;;;;;;;CAQxB;CACA;CACA;;KAHC;KAAA,iCAKA;OACC,OAAO,IAAI,CAAChH,WAAW;;;CAIzB;CACA;;KAFC;KAAA,uCAIA;OACC,IAAI,IAAI,CAACD,gBAAgB,KAAK,IAAI,CAAC3C,KAAK,CAAC3F,MAAM,EAC/C;SACC;;OAGD,IAAI,CAACsI,gBAAgB,IAAI,CAAC;OAC1B,IAAI,CAACiD,cAAc,CAAC,IAAI,CAAC5F,KAAK,CAAC,IAAI,CAAC2C,gBAAgB,CAAC,CAAC;;;CAIxD;CACA;;KAFC;KAAA,qCAIA;OACC,IAAI,IAAI,CAACA,gBAAgB,KAAK,CAAC,EAC/B;SACC;;OAGD,IAAI,CAACA,gBAAgB,IAAI,CAAC;OAC1B,IAAI,CAACiD,cAAc,CAAC,IAAI,CAAC5F,KAAK,CAAC,IAAI,CAAC2C,gBAAgB,CAAC,CAAC;;;CAIxD;CACA;;KAFC;KAAA,kCAGkBjE,IAAI,EAAEC,SAAS,EACjC;OACCA,SAAS,GAAGA,SAAS,KAAK,KAAK;OAC/B,IAAI,CAACmK,cAAc,CAAC,IAAI,EAAE,IAAI,CAAC;OAC/BhP,OAAO,CAACqI,kBAAkB,CAACzD,IAAI,EAAEC,SAAS,CAAC;;;CAI7C;CACA;;KAFC;KAAA,2BAIA;OACC,IAAI,CAAC0M,iBAAiB,EAAE;OACxB,IAAI,CAACrJ,oBAAoB,CAAC,YAAY,CAAC;OACvC,IAAI,CAACC,iBAAiB,CAAC,IAAI,CAAC+C,cAAc,EAAE,EAAE,KAAK,CAAC;;;KACpD;KAAA,6BAGD;OACC,IAAI,CAACsG,UAAU,EAAE;;;KACjB;KAAA,oCAGD;OACC,IAAI,CAACA,UAAU,EAAE;;;CAGnB;CACA;;KAFC;KAAA,2BAGW5M,IAAI,EACf;OACC,IAAIkE,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;OACvC,IAAItG,IAAI,YAAYhG,IAAI,EACxB;SACCkK,WAAW,GAAGlE,IAAI;;OAEnB,IAAI,CAAC2M,iBAAiB,EAAE;OAExB,IAAI,CAACE,aAAa,CAAC3I,WAAW,CAAC;OAC/B9I,OAAO,CAAC0R,eAAe,CAAC5I,WAAW,EAAE,IAAI,CAAC;;;KAC1C;KAAA,8BAEalE,IAAI,EAClB;OACC,IAAI,CAACsD,oBAAoB,CAAC,uBAAuB,CAAC;OAClD,IAAI,IAAI,CAACyJ,iBAAiB,YAAY/S,IAAI,EAC1C;SACC,IAAI,CAAC+S,iBAAiB,CAACC,UAAU,EAAE;;OAEpChN,IAAI,CAACwD,QAAQ,EAAE;OACf,IAAI,CAACuJ,iBAAiB,GAAG/M,IAAI;OAC7B,IAAI,CAACsD,oBAAoB,CAAC,sBAAsB,CAAC;;;CAInD;CACA;;KAFC;KAAA,mCAIA;OACC,IAAMY,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;OACzC,IAAI,CAAC+F,mBAAmB,GAAG,IAAI;OAC/BnI,WAAW,CAACzJ,WAAW,GAAG,IAAI;OAC9B,IAAI,CAAC6I,oBAAoB,CAAC,cAAc,CAAC;OAEzC,IAAIY,WAAW,CAACpD,YAAY,EAAE,EAC9B;SACCzD,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACP,MAAM,CAACwN,SAAS,CAAC,IAAI,CAACtG,gBAAgB,CAAC,EAAE,oCAAoC,CAAC;;OAEjG5G,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC4K,eAAe,EAAE,EAAE,sCAAsC,CAAC;OAE5E1J,UAAU,CAAC,YAAY;SACtBnB,aAAG,CAACkM,OAAO,CAAC,IAAI,CAACZ,YAAY,EAAE,EAAE,IAAI,CAACsE,iBAAiB,EAAE,CAAC;SAC1D,IAAI,CAAC5E,SAAS,EAAE,CAAC1K,KAAK,CAACK,OAAO,GAAG,MAAM;SACvC,IAAI,CAAC0K,cAAc,EAAE,CAAC/K,KAAK,CAACK,OAAO,GAAG,MAAM;SAC5C,IAAI,CAACyC,QAAQ,EAAE,CAAC9C,KAAK,CAACK,OAAO,GAAG,MAAM;QACtC,CAACR,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;OAElBgB,UAAU,CAAC,YAAY;SACtBnB,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC2P,iBAAiB,EAAE,EAAE,kCAAkC,CAAC;QAC1E,CAACzP,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC;OAElBgB,UAAU,CAAC,YAAY;SACtBnB,aAAG,CAACkM,OAAO,CAAC,IAAI,CAAC0D,iBAAiB,EAAE,EAAE,IAAI,CAACtE,YAAY,EAAE,CAAC;SAC1D,IAAI,CAAClI,QAAQ,EAAE,CAAC9C,KAAK,CAACK,OAAO,GAAG,OAAO;SACvC,IAAI,CAAC0K,cAAc,EAAE,CAAC/K,KAAK,CAACK,OAAO,GAAG,OAAO;SAC7C,IAAI,CAACqK,SAAS,EAAE,CAAC1K,KAAK,CAACK,OAAO,GAAG,MAAM;SAEvC,IAAI,CAACgL,cAAc,EAAE;QACrB,CAACxL,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;OAEnBgB,UAAU,CAAC,YAAY;SACtBnB,aAAG,CAACa,WAAW,CAAC,IAAI,CAAC+O,iBAAiB,EAAE,EAAE,kCAAkC,CAAC;SAC7E5P,aAAG,CAACa,WAAW,CAAC,IAAI,CAACgK,eAAe,EAAE,EAAE,sCAAsC,CAAC;SAE/E,IAAIzD,OAAO,GAAG,IAAI,CAACd,SAAS,CAACjG,aAAa,CAAC,uCAAuC,CAAC;SACnF+G,OAAO,CAACjE,SAAS,GAAG5B,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAC9D0K,OAAO,CAAC,UAAU,EAAE,IAAI,CAACjI,KAAK,CAAC8F,OAAO,CAAC,IAAI,CAACd,cAAc,EAAE,CAAC,GAAG,CAAC,CAAC,CAClEiD,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAACjI,KAAK,CAAC3F,MAAM,CAAC;SAC9C,IAAI,CAAC2H,oBAAoB,CAAC,yBAAyB,CAAC;QACpD,CAAC9F,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;;;KAEnB;KAAA,qCAEoBkG,SAAS,EAAEwJ,aAAa,EAAEC,KAAK,EACpD;OACCD,aAAa,GAAGA,aAAa,KAAK,KAAK;OACvC,IAAMhJ,WAAW,GAAG,IAAI,CAACoC,cAAc,EAAE;OAEzC,IAAM8G,IAAI,GAAG;SACZpN,IAAI,EAAGkE,WAAW;SAClBlB,QAAQ,EAAE;QACV;OACD,IAAImK,KAAK,EACT;SACCC,IAAI,CAACD,KAAK,GAAGA,KAAK;;OAEnB,IAAIjJ,WAAW,IAAIgJ,aAAa,EAChC;SACChJ,WAAW,CAAC5H,IAAI,CAACoH,SAAS,EAAE0J,IAAI,CAAC;;OAElC,IAAI,CAAC9Q,IAAI,CAACoH,SAAS,EAAE0J,IAAI,CAAC;;;CAI5B;CACA;;KAFC;KAAA,iCAIA;OACC,IAAI,CAAC9J,oBAAoB,CAAC,cAAc,CAAC;OAEzC,IAAI,IAAI,CAACvG,MAAM,CAACwN,SAAS,EACzB;SACClN,aAAG,CAACa,WAAW,CAAC,IAAI,CAACnB,MAAM,CAACwN,SAAS,CAAC,IAAI,CAACtG,gBAAgB,CAAC,EAAE,kCAAkC,CAAC;;OAGlG5G,aAAG,CAACE,MAAM,CAAC,IAAI,CAACyO,gBAAgB,EAAE,EAAE,IAAI,CAAC5D,eAAe,EAAE,CAAC;OAC3D/K,aAAG,CAACkM,OAAO,CAAC,IAAI,CAACrI,WAAW,EAAE,EAAE,IAAI,CAACmM,iBAAiB,EAAE,CAAC;OACzDhQ,aAAG,CAACgB,MAAM,CAAC,IAAI,CAAC4C,eAAe,EAAE,CAAC;OAElC5D,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACoK,cAAc,EAAE,CAAC;OACjCpL,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACkK,aAAa,EAAE,CAAC;OAChClL,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACsK,YAAY,EAAE,CAAC;OAE/BtL,aAAG,CAACgB,MAAM,CAAC,IAAI,CAAC2C,YAAY,EAAE,CAAC;OAC/B3D,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACoC,QAAQ,EAAE,CAAC;OAC3BpD,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACqK,cAAc,EAAE,CAAC;OACjCrL,aAAG,CAACgB,MAAM,CAAC,IAAI,CAAC4J,YAAY,EAAE,CAAC;OAE/B,IAAI,CAACd,UAAU,GAAG,IAAI;OACtB,IAAI,CAAC7D,oBAAoB,CAAC,mBAAmB,CAAC;;;CAIhD;CACA;;KAFC;KAAA,iCAIA;OACC,IAAI,CAACA,oBAAoB,CAAC,wBAAwB,CAAC;OACnD,IAAI,IAAI,CAACgD,cAAc,EAAE,CAACxF,YAAY,EAAE,EACxC;SACCzD,aAAG,CAACkM,OAAO,CAAC,IAAI,CAAC8D,iBAAiB,EAAE,EAAE,IAAI,CAACrM,YAAY,EAAE,CAAC;QAC1D,MAED;SACC3D,aAAG,CAACkM,OAAO,CAAC,IAAI,CAAC8D,iBAAiB,EAAE,EAAE,IAAI,CAACnM,WAAW,EAAE,CAAC;;OAG1D7D,aAAG,CAACkM,OAAO,CAAC,IAAI,CAACyC,gBAAgB,EAAE,EAAE,IAAI,CAACrD,YAAY,EAAE,CAAC;OAEzD,IAAIvN,OAAO,CAACiB,WAAW,EAAE,CAACf,cAAc,EAAE;SACzC+B,aAAG,CAACE,MAAM,CAAC,IAAI,CAACkL,cAAc,EAAE,EAAE,IAAI,CAACJ,SAAS,EAAE,CAAC;;OAEpDhL,aAAG,CAACuN,OAAO,CAAC,IAAI,CAACrC,aAAa,EAAE,EAAE,IAAI,CAACF,SAAS,EAAE,CAAC;OACnDhL,aAAG,CAACuN,OAAO,CAAC,IAAI,CAAClC,cAAc,EAAE,EAAE,IAAI,CAACN,eAAe,EAAE,CAAC;OAC1D/K,aAAG,CAACuN,OAAO,CAAC,IAAI,CAACnK,QAAQ,EAAE,EAAE,IAAI,CAAC2H,eAAe,EAAE,CAAC;OAEpD,IAAI,IAAI,CAACrL,MAAM,CAACuC,QAAQ,EACxB;SACCjC,aAAG,CAACgB,MAAM,CAAC,IAAI,CAACe,WAAW,EAAE,CAAC;SAC9B/B,aAAG,CAACuN,OAAO,CAAC,IAAI,CAAC1J,WAAW,EAAE,EAAE,IAAI,CAACsH,eAAe,EAAE,CAAC;;OAGxD,IAAM8E,MAAM,GAAG,IAAI,CAAC/F,YAAY,EAAE,CAAC7J,aAAa,CAAC,wBAAwB,CAAC;OAC1EL,aAAG,CAACE,MAAM,CAAC,IAAI,CAAC0K,YAAY,EAAE,EAAEqF,MAAM,CAAC;OACvC,IAAI,CAAChK,oBAAoB,CAAC,uBAAuB,CAAC;;;CAIpD;CACA;CACA;;KAHC;KAAA,mCAKA;OACC,IAAI,CAAC,IAAI,CAACvG,MAAM,CAACmI,aAAa,EAC9B;SACC,IAAI,CAACnI,MAAM,CAACmI,aAAa,GACxB/H,aAAG,CAACC,MAAM,8WAEqCwB,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,EAEpDD,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAErF;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACmI,aAAa;;;CAIlC;CACA;CACA;;KAHC;KAAA,oCAKA;OACC,IAAI,CAAC,IAAI,CAACnI,MAAM,CAACwQ,cAAc,EAC/B;SACC,IAAI,CAACxQ,MAAM,CAACwQ,cAAc,GACzBpQ,aAAG,CAACC,MAAM,oKACqCwB,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CACxF;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACwQ,cAAc;;;CAInC;CACA;CACA;;KAHC;KAAA,qCAKA;OACC,IAAI,CAAC,IAAI,CAACxQ,MAAM,CAACyQ,eAAe,EAChC;SACC,IAAI,CAACzQ,MAAM,CAACyQ,eAAe,GAC1BrQ,aAAG,CAACC,MAAM,6JAC8BwB,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC,CAC7E;;OAGH,OAAO,IAAI,CAAC9B,MAAM,CAACyQ,eAAe;;;CAIpC;CACA;;KAFC;KAAA,+BAIA;OACCnQ,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC0O,gBAAgB,EAAE,EAAE,6BAA6B,CAAC;OACpE,IAAI,CAAC1E,SAAS,CAAC,IAAI,CAACC,YAAY,EAAE,CAAC;OACnC,IAAI,CAAC0E,cAAc,EAAE;OAErB5O,aAAG,CAACE,MAAM,CAAC,IAAI,CAACwO,kBAAkB,EAAE,EAAE,IAAI,CAACC,gBAAgB,EAAE,CAAC;OAC9D3O,aAAG,CAACkM,OAAO,CAAC,IAAI,CAAC8D,iBAAiB,EAAE,EAAEjS,OAAO,CAAC+D,WAAW,EAAE,CAAC;OAC5D9B,aAAG,CAACE,MAAM,CAAC,IAAI,CAAC6B,WAAW,EAAE,EAAE,IAAI,CAACoJ,eAAe,EAAE,CAAC;OAEtD,IAAI,CAACkE,cAAc,EAAE;OACrB,IAAI,CAAC9E,UAAU,EAAE;OACjB,IAAI,CAAC2E,YAAY,EAAE;OAEnB,IAAI,CAACpI,YAAY,GAAG,IAAI;OACxB,IAAI,CAACgD,UAAU,GAAG,KAAK;;;CAIzB;CACA;;KAFC;KAAA,6BAIA;OACC,IAAI,CAACsG,YAAY,GAAG7Q,QAAQ,CAACc,aAAa,CAAC,gCAAgC,CAAC;OAC5E,IAAI,CAACoG,SAAS,GAAGlH,QAAQ,CAACc,aAAa,CAAC,4BAA4B,CAAC;OAErE,IAAI,IAAI,CAAC+P,YAAY,IAAI,IAAI,CAACA,YAAY,CAACC,WAAW,GAAG,IAAI,CAACD,YAAY,CAACE,WAAW,EACtF;SACCtQ,aAAG,CAACE,MAAM,CAAC,IAAI,CAACqQ,YAAY,EAAE,EAAE,IAAI,CAAC9J,SAAS,CAAC;SAC/CzG,aAAG,CAACE,MAAM,CAAC,IAAI,CAACsQ,YAAY,EAAE,EAAE,IAAI,CAAC/J,SAAS,CAAC;SAE/C,IAAI,CAAC2J,YAAY,CAACK,gBAAgB,CAAC,QAAQ,EAAE,IAAI,CAACC,YAAY,CAACvQ,IAAI,CAAC,IAAI,CAAC,CAAC;SAE1E,IAAI,CAACuG,SAAS,CAAC+J,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACE,YAAY,CAACxQ,IAAI,CAAC,IAAI,CAAC,CAAC;SAC3E,IAAI,CAACuG,SAAS,CAAC+J,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACG,cAAc,CAACzQ,IAAI,CAAC,IAAI,CAAC,CAAC;SAC7E,IAAI,CAACwG,SAAS,CAAC8J,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACI,aAAa,CAAC1Q,IAAI,CAAC,IAAI,CAAC,CAAC;SAC5E,IAAI,CAACwG,SAAS,CAAC8J,gBAAgB,CAAC,YAAY,EAAE,IAAI,CAACG,cAAc,CAACzQ,IAAI,CAAC,IAAI,CAAC,CAAC;SAE7E,IAAI,CAAC2Q,eAAe,EAAE;SACtB,IAAI,CAAChG,YAAY,EAAE,CAACiG,SAAS,CAACC,GAAG,CAAC,+BAA+B,CAAC;SAElE,IAAI,CAACjK,SAAS,GAAG,IAAI;;;;KAEtB;KAAA,+BAGD;OACC,IAAI,CAAC,IAAI,CAACL,SAAS,EACnB;SACC,IAAI,CAACA,SAAS,GACb5G,aAAG,CAACC,MAAM,+KAET;;OAGH,OAAO,IAAI,CAAC2G,SAAS;;;KACrB;KAAA,+BAGD;OACC,IAAI,CAAC,IAAI,CAACC,SAAS,EACnB;SACC,IAAI,CAACA,SAAS,GACb7G,aAAG,CAACC,MAAM,+KAET;;OAGH,OAAO,IAAI,CAAC4G,SAAS;;;CAIvB;CACA;;KAFC;KAAA,+BAIA;OACC,IAAI,CAACJ,UAAU,GAAGsC,WAAW,CAAC,YAAW;SACxC,IAAI,CAACuH,YAAY,CAACa,UAAU,IAAI,CAAC;QACjC,CAAC9Q,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;;;CAInB;CACA;;KAFC;KAAA,gCAIA;OACC,IAAI,CAACoG,UAAU,GAAGsC,WAAW,CAAC,YAAW;SACxC,IAAI,CAACuH,YAAY,CAACa,UAAU,IAAI,CAAC;QACjC,CAAC9Q,IAAI,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC;;;CAInB;CACA;;KAFC;KAAA,iCAIA;OACC6I,aAAa,CAAC,IAAI,CAACzC,UAAU,CAAC;;;CAIhC;CACA;;KAFC;KAAA,+BAIA;OACC,IAAI,CAAC2K,eAAe,EAAE;OACtB,IAAI,CAACJ,eAAe,EAAE;;;CAIxB;CACA;;KAFC;KAAA,kCAIA;OACC,IAAI,IAAI,CAACV,YAAY,CAACC,WAAW,GAAG,IAAI,CAACD,YAAY,CAACE,WAAW,IAC5D,IAAI,CAACF,YAAY,CAACE,WAAW,GAAG,IAAI,CAACF,YAAY,CAACa,UAAU,GAAI,IAAI,CAACb,YAAY,CAACC,WAAW,EAClG;SACCrQ,aAAG,CAACC,QAAQ,CAAC,IAAI,CAAC0G,SAAS,EAAE,2BAA2B,CAAC;QACzD,MAED;SACC3G,aAAG,CAACa,WAAW,CAAC,IAAI,CAAC8F,SAAS,EAAE,2BAA2B,CAAC;;;;CAK/D;CACA;;KAFC;KAAA,kCAIA;OACC,IAAI,IAAI,CAACyJ,YAAY,CAACa,UAAU,GAAG,CAAC,EACpC;SACCjR,aAAG,CAACC,QAAQ,CAAC,IAAI,CAACyG,SAAS,EAAE,2BAA2B,CAAC;QACzD,MAED;SACC1G,aAAG,CAACa,WAAW,CAAC,IAAI,CAAC6F,SAAS,EAAE,2BAA2B,CAAC;;;;CAK/D;CACA;;KAFC;KAAA,8BAGcyK,KAAK,EACnB;OACCnR,aAAG,CAACa,WAAW,CAACsQ,KAAK,EAAE,6BAA6B,CAAC;OACrDnR,aAAG,CAACa,WAAW,CAACsQ,KAAK,EAAE,qBAAqB,CAAC;OAE7C,IAAI,IAAI,CAACnH,gBAAgB,EACzB;SACChK,aAAG,CAACC,QAAQ,CAACkR,KAAK,EAAE,6BAA6B,CAAC;QAClD,MAED;SACCnR,aAAG,CAACC,QAAQ,CAACkR,KAAK,EAAE,qBAAqB,CAAC;;;;CAM7C;CACA;;KAFC;KAAA,8BAGcA,KAAK,EACnB;OACCnR,aAAG,CAACa,WAAW,CAACsQ,KAAK,EAAE,6BAA6B,CAAC;OACrDnR,aAAG,CAACa,WAAW,CAACsQ,KAAK,EAAE,qBAAqB,CAAC;OAE7C,IAAI,IAAI,CAACnH,gBAAgB,EACzB;SACChK,aAAG,CAACC,QAAQ,CAACkR,KAAK,EAAE,6BAA6B,CAAC;QAClD,MAED;SACCnR,aAAG,CAACC,QAAQ,CAACkR,KAAK,EAAE,qBAAqB,CAAC;;;;CAK7C;CACA;;KAFC;KAAA,+BAIA;OACC,IAAIC,OAAO,GAAG,IAAI;OAClB,IAAIC,OAAO,GAAG,IAAI;OAClB,IAAI,IAAI,CAACjB,YAAY,EACrB;SACCgB,OAAO,GAAGpR,aAAG,CAACsR,WAAW,CAAC,IAAI,CAAClB,YAAY,CAAC;SAC5CiB,OAAO,GAAGrR,aAAG,CAACsR,WAAW,CAAC,IAAI,CAAClB,YAAY,CAAC/P,aAAa,CAAC,cAAc,GAAG,IAAI,CAACuG,gBAAgB,GAAG,IAAI,CAAC,CAAC;;OAE1G,IAAM2K,MAAM,GAAG,CAAC,CAAC;;OAEjB,IAAI,CAACzU,cAAI,CAAC0U,MAAM,CAACH,OAAO,CAAC,IAAIA,OAAO,CAACI,IAAI,GAAGJ,OAAO,CAACK,KAAK,GAAGN,OAAO,CAACK,IAAI,GAAGL,OAAO,CAACM,KAAK,EACxF;SACC,IAAI,CAACtB,YAAY,CAACa,UAAU,IAAII,OAAO,CAACI,IAAI,IAAIL,OAAO,CAACK,IAAI,GAAGL,OAAO,CAACM,KAAK,CAAC,GAAGL,OAAO,CAACK,KAAK,GAAGH,MAAM;;OAGvG,IAAI,CAACzU,cAAI,CAAC0U,MAAM,CAACH,OAAO,CAAC,IAAIA,OAAO,CAACI,IAAI,GAAGL,OAAO,CAACK,IAAI,EACxD;SACC,IAAI,CAACrB,YAAY,CAACa,UAAU,IAAIG,OAAO,CAACK,IAAI,GAAGJ,OAAO,CAACI,IAAI,GAAGF,MAAM;;;;CAKvE;CACA;;KAFC;KAAA,iCAGwB3T,SAAS,EACjC;OACC,OAAOA,SAAS;;;KAChB;KAAA,8BAGD;OACC,OAAOG,OAAO,CAACoB,mBAAmB,EAAE;;;KACpC;KAAA,qBAEWvC,OAAO,EACnB;OACC,OAAOmB,OAAO,CAAC4T,YAAY,CAAC/U,OAAO,CAAC;;;GACpC;CAAA,EAxlD4BiB,eAAK,CAACC,YAAY;;;;;;;;;;"}