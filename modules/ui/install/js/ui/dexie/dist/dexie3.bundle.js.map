{"version":3,"file":"dexie3.bundle.js","sources":["../src/dexie3.js"],"sourcesContent":["/*\n * Dexie.js - a minimalistic wrapper for IndexedDB\n * ===============================================\n *\n * By David Fahlander, david.fahlander@gmail.com\n *\n * Version 3.2.2, Wed Apr 27 2022\n *\n * https://dexie.org\n *\n * Apache License Version 2.0, January 2004, http://www.apache.org/licenses/\n */\n\n/**\n * Modify list for integration with Bitrix Framework:\n * - removed integration with third-party package builders;\n * - add check variables before using them, see tags: 28122018;\n * - add alternative Promise check for Bitrix Cli, see tags: 02032020;\n * - add export for work in Bitrix CoreJS extensions;\n * - add export BX.Dexie for backward compatibility;\n */\n\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar __assign = function() {\n\t__assign = Object.assign || function __assign(t) {\n\t\tfor (var s, i = 1, n = arguments.length; i < n; i++) {\n\t\t\ts = arguments[i];\n\t\t\tfor (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n\t\t}\n\t\treturn t;\n\t};\n\treturn __assign.apply(this, arguments);\n};\nfunction __spreadArray(to, from, pack) {\n\tif (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n\t\tif (ar || !(i in from)) {\n\t\t\tif (!ar) ar = Array.prototype.slice.call(from, 0, i);\n\t\t\tar[i] = from[i];\n\t\t}\n\t}\n\treturn to.concat(ar || Array.prototype.slice.call(from));\n}\n\nvar _global = typeof globalThis !== 'undefined' ? globalThis :\n\ttypeof self !== 'undefined' ? self :\n\t\ttypeof window !== 'undefined' ? window :\n\t\t\tglobal;\n\nvar keys = Object.keys;\nvar isArray = Array.isArray;\nif (typeof Promise !== 'undefined' && !_global.Promise) {\n\t_global.Promise = Promise;\n}\nfunction extend(obj, extension) {\n\tif (typeof extension !== 'object')\n\t\treturn obj;\n\tkeys(extension).forEach(function (key) {\n\t\tobj[key] = extension[key];\n\t});\n\treturn obj;\n}\nvar getProto = Object.getPrototypeOf;\nvar _hasOwn = {}.hasOwnProperty;\nfunction hasOwn(obj, prop) {\n\treturn _hasOwn.call(obj, prop);\n}\nfunction props(proto, extension) {\n\tif (typeof extension === 'function')\n\t\textension = extension(getProto(proto));\n\t// tag start 28122018\n\tif (typeof extension !== 'object')\n\t\treturn;\n\t// tag end 28122018\n\t(typeof Reflect === \"undefined\" ? keys : Reflect.ownKeys)(extension).forEach(function (key) {\n\t\tsetProp(proto, key, extension[key]);\n\t});\n}\nvar defineProperty = Object.defineProperty;\nfunction setProp(obj, prop, functionOrGetSet, options) {\n\tdefineProperty(obj, prop, extend(functionOrGetSet && hasOwn(functionOrGetSet, \"get\") && typeof functionOrGetSet.get === 'function' ?\n\t\t{ get: functionOrGetSet.get, set: functionOrGetSet.set, configurable: true } :\n\t\t{ value: functionOrGetSet, configurable: true, writable: true }, options));\n}\nfunction derive(Child) {\n\treturn {\n\t\tfrom: function (Parent) {\n\t\t\tChild.prototype = Object.create(Parent.prototype);\n\t\t\tsetProp(Child.prototype, \"constructor\", Child);\n\t\t\treturn {\n\t\t\t\textend: props.bind(null, Child.prototype)\n\t\t\t};\n\t\t}\n\t};\n}\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\nfunction getPropertyDescriptor(obj, prop) {\n\tvar pd = getOwnPropertyDescriptor(obj, prop);\n\tvar proto;\n\treturn pd || (proto = getProto(obj)) && getPropertyDescriptor(proto, prop);\n}\nvar _slice = [].slice;\nfunction slice(args, start, end) {\n\treturn _slice.call(args, start, end);\n}\nfunction override(origFunc, overridedFactory) {\n\treturn overridedFactory(origFunc);\n}\nfunction assert(b) {\n\tif (!b)\n\t\tthrow new Error(\"Assertion Failed\");\n}\nfunction asap$1(fn) {\n\tif (_global.setImmediate)\n\t\tsetImmediate(fn);\n\telse\n\t\tsetTimeout(fn, 0);\n}\nfunction arrayToObject(array, extractor) {\n\treturn array.reduce(function (result, item, i) {\n\t\tvar nameAndValue = extractor(item, i);\n\t\tif (nameAndValue)\n\t\t\tresult[nameAndValue[0]] = nameAndValue[1];\n\t\treturn result;\n\t}, {});\n}\nfunction tryCatch(fn, onerror, args) {\n\ttry {\n\t\tfn.apply(null, args);\n\t}\n\tcatch (ex) {\n\t\tonerror && onerror(ex);\n\t}\n}\nfunction getByKeyPath(obj, keyPath) {\n\tif (hasOwn(obj, keyPath))\n\t\treturn obj[keyPath];\n\tif (!keyPath)\n\t\treturn obj;\n\tif (typeof keyPath !== 'string') {\n\t\tvar rv = [];\n\t\tfor (var i = 0, l = keyPath.length; i < l; ++i) {\n\t\t\tvar val = getByKeyPath(obj, keyPath[i]);\n\t\t\trv.push(val);\n\t\t}\n\t\treturn rv;\n\t}\n\tvar period = keyPath.indexOf('.');\n\tif (period !== -1) {\n\t\tvar innerObj = obj[keyPath.substr(0, period)];\n\t\treturn innerObj === undefined ? undefined : getByKeyPath(innerObj, keyPath.substr(period + 1));\n\t}\n\treturn undefined;\n}\nfunction setByKeyPath(obj, keyPath, value) {\n\tif (!obj || keyPath === undefined)\n\t\treturn;\n\tif ('isFrozen' in Object && Object.isFrozen(obj))\n\t\treturn;\n\tif (typeof keyPath !== 'string' && 'length' in keyPath) {\n\t\tassert(typeof value !== 'string' && 'length' in value);\n\t\tfor (var i = 0, l = keyPath.length; i < l; ++i) {\n\t\t\tsetByKeyPath(obj, keyPath[i], value[i]);\n\t\t}\n\t}\n\telse {\n\t\tvar period = keyPath.indexOf('.');\n\t\tif (period !== -1) {\n\t\t\tvar currentKeyPath = keyPath.substr(0, period);\n\t\t\tvar remainingKeyPath = keyPath.substr(period + 1);\n\t\t\tif (remainingKeyPath === \"\")\n\t\t\t\tif (value === undefined) {\n\t\t\t\t\tif (isArray(obj) && !isNaN(parseInt(currentKeyPath)))\n\t\t\t\t\t\tobj.splice(currentKeyPath, 1);\n\t\t\t\t\telse\n\t\t\t\t\t\tdelete obj[currentKeyPath];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tobj[currentKeyPath] = value;\n\t\t\telse {\n\t\t\t\tvar innerObj = obj[currentKeyPath];\n\t\t\t\tif (!innerObj || !hasOwn(obj, currentKeyPath))\n\t\t\t\t\tinnerObj = (obj[currentKeyPath] = {});\n\t\t\t\tsetByKeyPath(innerObj, remainingKeyPath, value);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tif (value === undefined) {\n\t\t\t\tif (isArray(obj) && !isNaN(parseInt(keyPath)))\n\t\t\t\t\tobj.splice(keyPath, 1);\n\t\t\t\telse\n\t\t\t\t\tdelete obj[keyPath];\n\t\t\t}\n\t\t\telse\n\t\t\t\tobj[keyPath] = value;\n\t\t}\n\t}\n}\nfunction delByKeyPath(obj, keyPath) {\n\tif (typeof keyPath === 'string')\n\t\tsetByKeyPath(obj, keyPath, undefined);\n\telse if ('length' in keyPath)\n\t\t[].map.call(keyPath, function (kp) {\n\t\t\tsetByKeyPath(obj, kp, undefined);\n\t\t});\n}\nfunction shallowClone(obj) {\n\tvar rv = {};\n\tfor (var m in obj) {\n\t\tif (hasOwn(obj, m))\n\t\t\trv[m] = obj[m];\n\t}\n\treturn rv;\n}\nvar concat = [].concat;\nfunction flatten(a) {\n\treturn concat.apply([], a);\n}\nvar intrinsicTypeNames = \"Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey\"\n\t.split(',').concat(flatten([8, 16, 32, 64].map(function (num) { return [\"Int\", \"Uint\", \"Float\"].map(function (t) { return t + num + \"Array\"; }); }))).filter(function (t) { return _global[t]; });\nvar intrinsicTypes = intrinsicTypeNames.map(function (t) { return _global[t]; });\narrayToObject(intrinsicTypeNames, function (x) { return [x, true]; });\nvar circularRefs = null;\nfunction deepClone(any) {\n\tcircularRefs = typeof WeakMap !== 'undefined' && new WeakMap();\n\tvar rv = innerDeepClone(any);\n\tcircularRefs = null;\n\treturn rv;\n}\nfunction innerDeepClone(any) {\n\tif (!any || typeof any !== 'object')\n\t\treturn any;\n\tvar rv = circularRefs && circularRefs.get(any);\n\tif (rv)\n\t\treturn rv;\n\tif (isArray(any)) {\n\t\trv = [];\n\t\tcircularRefs && circularRefs.set(any, rv);\n\t\tfor (var i = 0, l = any.length; i < l; ++i) {\n\t\t\trv.push(innerDeepClone(any[i]));\n\t\t}\n\t}\n\telse if (intrinsicTypes.indexOf(any.constructor) >= 0) {\n\t\trv = any;\n\t}\n\telse {\n\t\tvar proto = getProto(any);\n\t\trv = proto === Object.prototype ? {} : Object.create(proto);\n\t\tcircularRefs && circularRefs.set(any, rv);\n\t\tfor (var prop in any) {\n\t\t\tif (hasOwn(any, prop)) {\n\t\t\t\trv[prop] = innerDeepClone(any[prop]);\n\t\t\t}\n\t\t}\n\t}\n\treturn rv;\n}\nvar toString = {}.toString;\nfunction toStringTag(o) {\n\treturn toString.call(o).slice(8, -1);\n}\nvar iteratorSymbol = typeof Symbol !== 'undefined' ?\n\tSymbol.iterator :\n\t'@@iterator';\nvar getIteratorOf = typeof iteratorSymbol === \"symbol\" ? function (x) {\n\tvar i;\n\treturn x != null && (i = x[iteratorSymbol]) && i.apply(x);\n} : function () { return null; };\nvar NO_CHAR_ARRAY = {};\nfunction getArrayOf(arrayLike) {\n\tvar i, a, x, it;\n\tif (arguments.length === 1) {\n\t\tif (isArray(arrayLike))\n\t\t\treturn arrayLike.slice();\n\t\tif (this === NO_CHAR_ARRAY && typeof arrayLike === 'string')\n\t\t\treturn [arrayLike];\n\t\tif ((it = getIteratorOf(arrayLike))) {\n\t\t\ta = [];\n\t\t\twhile ((x = it.next()), !x.done)\n\t\t\t\ta.push(x.value);\n\t\t\treturn a;\n\t\t}\n\t\tif (arrayLike == null)\n\t\t\treturn [arrayLike];\n\t\ti = arrayLike.length;\n\t\tif (typeof i === 'number') {\n\t\t\ta = new Array(i);\n\t\t\twhile (i--)\n\t\t\t\ta[i] = arrayLike[i];\n\t\t\treturn a;\n\t\t}\n\t\treturn [arrayLike];\n\t}\n\ti = arguments.length;\n\ta = new Array(i);\n\twhile (i--)\n\t\ta[i] = arguments[i];\n\treturn a;\n}\nvar isAsyncFunction = typeof Symbol !== 'undefined'\n\t? function (fn) { return fn[Symbol.toStringTag] === 'AsyncFunction'; }\n\t: function () { return false; };\n\nvar debug = typeof location !== 'undefined' &&\n\t/^(http|https):\\/\\/(localhost|127\\.0\\.0\\.1)/.test(location.href);\nfunction setDebug(value, filter) {\n\tdebug = value;\n\tlibraryFilter = filter;\n}\nvar libraryFilter = function () { return true; };\nvar NEEDS_THROW_FOR_STACK = !new Error(\"\").stack;\nfunction getErrorWithStack() {\n\tif (NEEDS_THROW_FOR_STACK)\n\t\ttry {\n\t\t\tgetErrorWithStack.arguments;\n\t\t\tthrow new Error();\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn e;\n\t\t}\n\treturn new Error();\n}\nfunction prettyStack(exception, numIgnoredFrames) {\n\tvar stack = exception.stack;\n\tif (!stack)\n\t\treturn \"\";\n\tnumIgnoredFrames = (numIgnoredFrames || 0);\n\tif (stack.indexOf(exception.name) === 0)\n\t\tnumIgnoredFrames += (exception.name + exception.message).split('\\n').length;\n\treturn stack.split('\\n')\n\t\t.slice(numIgnoredFrames)\n\t\t.filter(libraryFilter)\n\t\t.map(function (frame) { return \"\\n\" + frame; })\n\t\t.join('');\n}\n\nvar dexieErrorNames = [\n\t'Modify',\n\t'Bulk',\n\t'OpenFailed',\n\t'VersionChange',\n\t'Schema',\n\t'Upgrade',\n\t'InvalidTable',\n\t'MissingAPI',\n\t'NoSuchDatabase',\n\t'InvalidArgument',\n\t'SubTransaction',\n\t'Unsupported',\n\t'Internal',\n\t'DatabaseClosed',\n\t'PrematureCommit',\n\t'ForeignAwait'\n];\nvar idbDomErrorNames = [\n\t'Unknown',\n\t'Constraint',\n\t'Data',\n\t'TransactionInactive',\n\t'ReadOnly',\n\t'Version',\n\t'NotFound',\n\t'InvalidState',\n\t'InvalidAccess',\n\t'Abort',\n\t'Timeout',\n\t'QuotaExceeded',\n\t'Syntax',\n\t'DataClone'\n];\nvar errorList = dexieErrorNames.concat(idbDomErrorNames);\nvar defaultTexts = {\n\tVersionChanged: \"Database version changed by other database connection\",\n\tDatabaseClosed: \"Database has been closed\",\n\tAbort: \"Transaction aborted\",\n\tTransactionInactive: \"Transaction has already completed or failed\",\n\tMissingAPI: \"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb\"\n};\nfunction DexieError(name, msg) {\n\tthis._e = getErrorWithStack();\n\tthis.name = name;\n\tthis.message = msg;\n}\nderive(DexieError).from(Error).extend({\n\tstack: {\n\t\tget: function () {\n\t\t\treturn this._stack ||\n\t\t\t\t(this._stack = this.name + \": \" + this.message + prettyStack(this._e, 2));\n\t\t}\n\t},\n\ttoString: function () { return this.name + \": \" + this.message; }\n});\nfunction getMultiErrorMessage(msg, failures) {\n\treturn msg + \". Errors: \" + Object.keys(failures)\n\t\t.map(function (key) { return failures[key].toString(); })\n\t\t.filter(function (v, i, s) { return s.indexOf(v) === i; })\n\t\t.join('\\n');\n}\nfunction ModifyError(msg, failures, successCount, failedKeys) {\n\tthis._e = getErrorWithStack();\n\tthis.failures = failures;\n\tthis.failedKeys = failedKeys;\n\tthis.successCount = successCount;\n\tthis.message = getMultiErrorMessage(msg, failures);\n}\nderive(ModifyError).from(DexieError);\nfunction BulkError(msg, failures) {\n\tthis._e = getErrorWithStack();\n\tthis.name = \"BulkError\";\n\tthis.failures = Object.keys(failures).map(function (pos) { return failures[pos]; });\n\tthis.failuresByPos = failures;\n\tthis.message = getMultiErrorMessage(msg, failures);\n}\nderive(BulkError).from(DexieError);\nvar errnames = errorList.reduce(function (obj, name) { return (obj[name] = name + \"Error\", obj); }, {});\nvar BaseException = DexieError;\nvar exceptions = errorList.reduce(function (obj, name) {\n\tvar fullName = name + \"Error\";\n\tfunction DexieError(msgOrInner, inner) {\n\t\tthis._e = getErrorWithStack();\n\t\tthis.name = fullName;\n\t\tif (!msgOrInner) {\n\t\t\tthis.message = defaultTexts[name] || fullName;\n\t\t\tthis.inner = null;\n\t\t}\n\t\telse if (typeof msgOrInner === 'string') {\n\t\t\tthis.message = \"\" + msgOrInner + (!inner ? '' : '\\n ' + inner);\n\t\t\tthis.inner = inner || null;\n\t\t}\n\t\telse if (typeof msgOrInner === 'object') {\n\t\t\tthis.message = msgOrInner.name + \" \" + msgOrInner.message;\n\t\t\tthis.inner = msgOrInner;\n\t\t}\n\t}\n\tderive(DexieError).from(BaseException);\n\tobj[name] = DexieError;\n\treturn obj;\n}, {});\nexceptions.Syntax = SyntaxError;\nexceptions.Type = TypeError;\nexceptions.Range = RangeError;\nvar exceptionMap = idbDomErrorNames.reduce(function (obj, name) {\n\tobj[name + \"Error\"] = exceptions[name];\n\treturn obj;\n}, {});\nfunction mapError(domError, message) {\n\tif (!domError || domError instanceof DexieError || domError instanceof TypeError || domError instanceof SyntaxError || !domError.name || !exceptionMap[domError.name])\n\t\treturn domError;\n\tvar rv = new exceptionMap[domError.name](message || domError.message, domError);\n\tif (\"stack\" in domError) {\n\t\tsetProp(rv, \"stack\", { get: function () {\n\t\t\t\treturn this.inner.stack;\n\t\t\t} });\n\t}\n\treturn rv;\n}\nvar fullNameExceptions = errorList.reduce(function (obj, name) {\n\tif ([\"Syntax\", \"Type\", \"Range\"].indexOf(name) === -1)\n\t\tobj[name + \"Error\"] = exceptions[name];\n\treturn obj;\n}, {});\nfullNameExceptions.ModifyError = ModifyError;\nfullNameExceptions.DexieError = DexieError;\nfullNameExceptions.BulkError = BulkError;\n\nfunction nop() { }\nfunction mirror(val) { return val; }\nfunction pureFunctionChain(f1, f2) {\n\tif (f1 == null || f1 === mirror)\n\t\treturn f2;\n\treturn function (val) {\n\t\treturn f2(f1(val));\n\t};\n}\nfunction callBoth(on1, on2) {\n\treturn function () {\n\t\ton1.apply(this, arguments);\n\t\ton2.apply(this, arguments);\n\t};\n}\nfunction hookCreatingChain(f1, f2) {\n\tif (f1 === nop)\n\t\treturn f2;\n\treturn function () {\n\t\tvar res = f1.apply(this, arguments);\n\t\tif (res !== undefined)\n\t\t\targuments[0] = res;\n\t\tvar onsuccess = this.onsuccess,\n\t\t\tonerror = this.onerror;\n\t\tthis.onsuccess = null;\n\t\tthis.onerror = null;\n\t\tvar res2 = f2.apply(this, arguments);\n\t\tif (onsuccess)\n\t\t\tthis.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n\t\tif (onerror)\n\t\t\tthis.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n\t\treturn res2 !== undefined ? res2 : res;\n\t};\n}\nfunction hookDeletingChain(f1, f2) {\n\tif (f1 === nop)\n\t\treturn f2;\n\treturn function () {\n\t\tf1.apply(this, arguments);\n\t\tvar onsuccess = this.onsuccess,\n\t\t\tonerror = this.onerror;\n\t\tthis.onsuccess = this.onerror = null;\n\t\tf2.apply(this, arguments);\n\t\tif (onsuccess)\n\t\t\tthis.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n\t\tif (onerror)\n\t\t\tthis.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n\t};\n}\nfunction hookUpdatingChain(f1, f2) {\n\tif (f1 === nop)\n\t\treturn f2;\n\treturn function (modifications) {\n\t\tvar res = f1.apply(this, arguments);\n\t\textend(modifications, res);\n\t\tvar onsuccess = this.onsuccess,\n\t\t\tonerror = this.onerror;\n\t\tthis.onsuccess = null;\n\t\tthis.onerror = null;\n\t\tvar res2 = f2.apply(this, arguments);\n\t\tif (onsuccess)\n\t\t\tthis.onsuccess = this.onsuccess ? callBoth(onsuccess, this.onsuccess) : onsuccess;\n\t\tif (onerror)\n\t\t\tthis.onerror = this.onerror ? callBoth(onerror, this.onerror) : onerror;\n\t\treturn res === undefined ?\n\t\t\t(res2 === undefined ? undefined : res2) :\n\t\t\t(extend(res, res2));\n\t};\n}\nfunction reverseStoppableEventChain(f1, f2) {\n\tif (f1 === nop)\n\t\treturn f2;\n\treturn function () {\n\t\tif (f2.apply(this, arguments) === false)\n\t\t\treturn false;\n\t\treturn f1.apply(this, arguments);\n\t};\n}\nfunction promisableChain(f1, f2) {\n\tif (f1 === nop)\n\t\treturn f2;\n\treturn function () {\n\t\tvar res = f1.apply(this, arguments);\n\t\tif (res && typeof res.then === 'function') {\n\t\t\tvar thiz = this, i = arguments.length, args = new Array(i);\n\t\t\twhile (i--)\n\t\t\t\targs[i] = arguments[i];\n\t\t\treturn res.then(function () {\n\t\t\t\treturn f2.apply(thiz, args);\n\t\t\t});\n\t\t}\n\t\treturn f2.apply(this, arguments);\n\t};\n}\n\nvar INTERNAL = {};\nvar LONG_STACKS_CLIP_LIMIT = 100,\n\tMAX_LONG_STACKS = 20, ZONE_ECHO_LIMIT = 100, _a$1 = typeof Promise === 'undefined' ?\n\t\t[] :\n\t\t(function () {\n\t\t\tvar globalP = Promise.resolve();\n\t\t\tif (typeof crypto === 'undefined' || !crypto.subtle)\n\t\t\t\treturn [globalP, getProto(globalP), globalP];\n\t\t\tvar nativeP = crypto.subtle.digest(\"SHA-512\", new Uint8Array([0]));\n\t\t\treturn [\n\t\t\t\tnativeP,\n\t\t\t\tgetProto(nativeP),\n\t\t\t\tglobalP\n\t\t\t];\n\t\t})(), resolvedNativePromise = _a$1[0], nativePromiseProto = _a$1[1], resolvedGlobalPromise = _a$1[2], nativePromiseThen = nativePromiseProto && nativePromiseProto.then;\nvar NativePromise = resolvedNativePromise && resolvedNativePromise.constructor;\nvar patchGlobalPromise = !!resolvedGlobalPromise;\nvar stack_being_generated = false;\nvar schedulePhysicalTick = resolvedGlobalPromise ?\n\tfunction () { resolvedGlobalPromise.then(physicalTick); }\n\t:\n\t_global.setImmediate ?\n\t\tsetImmediate.bind(null, physicalTick) :\n\t\t_global.MutationObserver ?\n\t\t\tfunction () {\n\t\t\t\tvar hiddenDiv = document.createElement(\"div\");\n\t\t\t\t(new MutationObserver(function () {\n\t\t\t\t\tphysicalTick();\n\t\t\t\t\thiddenDiv = null;\n\t\t\t\t})).observe(hiddenDiv, { attributes: true });\n\t\t\t\thiddenDiv.setAttribute('i', '1');\n\t\t\t} :\n\t\t\tfunction () { setTimeout(physicalTick, 0); };\nvar asap = function (callback, args) {\n\tmicrotickQueue.push([callback, args]);\n\tif (needsNewPhysicalTick) {\n\t\tschedulePhysicalTick();\n\t\tneedsNewPhysicalTick = false;\n\t}\n};\nvar isOutsideMicroTick = true,\n\tneedsNewPhysicalTick = true,\n\tunhandledErrors = [],\n\trejectingErrors = [],\n\tcurrentFulfiller = null, rejectionMapper = mirror;\nvar globalPSD = {\n\tid: 'global',\n\tglobal: true,\n\tref: 0,\n\tunhandleds: [],\n\tonunhandled: globalError,\n\tpgp: false,\n\tenv: {},\n\tfinalize: function () {\n\t\tthis.unhandleds.forEach(function (uh) {\n\t\t\ttry {\n\t\t\t\tglobalError(uh[0], uh[1]);\n\t\t\t}\n\t\t\tcatch (e) { }\n\t\t});\n\t}\n};\nvar PSD = globalPSD;\nvar microtickQueue = [];\nvar numScheduledCalls = 0;\nvar tickFinalizers = [];\nfunction DexiePromise(fn) {\n\tif (typeof this !== 'object')\n\t\tthrow new TypeError('Promises must be constructed via new');\n\tthis._listeners = [];\n\tthis.onuncatched = nop;\n\tthis._lib = false;\n\tvar psd = (this._PSD = PSD);\n\tif (debug) {\n\t\tthis._stackHolder = getErrorWithStack();\n\t\tthis._prev = null;\n\t\tthis._numPrev = 0;\n\t}\n\tif (typeof fn !== 'function') {\n\t\tif (fn !== INTERNAL)\n\t\t\tthrow new TypeError('Not a function');\n\t\tthis._state = arguments[1];\n\t\tthis._value = arguments[2];\n\t\tif (this._state === false)\n\t\t\thandleRejection(this, this._value);\n\t\treturn;\n\t}\n\tthis._state = null;\n\tthis._value = null;\n\t++psd.ref;\n\texecutePromiseTask(this, fn);\n}\nvar thenProp = {\n\tget: function () {\n\t\tvar psd = PSD, microTaskId = totalEchoes;\n\t\tfunction then(onFulfilled, onRejected) {\n\t\t\tvar _this = this;\n\t\t\tvar possibleAwait = !psd.global && (psd !== PSD || microTaskId !== totalEchoes);\n\t\t\tvar cleanup = possibleAwait && !decrementExpectedAwaits();\n\t\t\tvar rv = new DexiePromise(function (resolve, reject) {\n\t\t\t\tpropagateToListener(_this, new Listener(nativeAwaitCompatibleWrap(onFulfilled, psd, possibleAwait, cleanup), nativeAwaitCompatibleWrap(onRejected, psd, possibleAwait, cleanup), resolve, reject, psd));\n\t\t\t});\n\t\t\tdebug && linkToPreviousPromise(rv, this);\n\t\t\treturn rv;\n\t\t}\n\t\tthen.prototype = INTERNAL;\n\t\treturn then;\n\t},\n\tset: function (value) {\n\t\tsetProp(this, 'then', value && value.prototype === INTERNAL ?\n\t\t\tthenProp :\n\t\t\t{\n\t\t\t\tget: function () {\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tset: thenProp.set\n\t\t\t});\n\t}\n};\nprops(DexiePromise.prototype, {\n\tthen: thenProp,\n\t_then: function (onFulfilled, onRejected) {\n\t\tpropagateToListener(this, new Listener(null, null, onFulfilled, onRejected, PSD));\n\t},\n\tcatch: function (onRejected) {\n\t\tif (arguments.length === 1)\n\t\t\treturn this.then(null, onRejected);\n\t\tvar type = arguments[0], handler = arguments[1];\n\t\treturn typeof type === 'function' ? this.then(null, function (err) {\n\t\t\t\treturn err instanceof type ? handler(err) : PromiseReject(err);\n\t\t\t})\n\t\t\t: this.then(null, function (err) {\n\t\t\t\treturn err && err.name === type ? handler(err) : PromiseReject(err);\n\t\t\t});\n\t},\n\tfinally: function (onFinally) {\n\t\treturn this.then(function (value) {\n\t\t\tonFinally();\n\t\t\treturn value;\n\t\t}, function (err) {\n\t\t\tonFinally();\n\t\t\treturn PromiseReject(err);\n\t\t});\n\t},\n\tstack: {\n\t\tget: function () {\n\t\t\tif (this._stack)\n\t\t\t\treturn this._stack;\n\t\t\ttry {\n\t\t\t\tstack_being_generated = true;\n\t\t\t\tvar stacks = getStack(this, [], MAX_LONG_STACKS);\n\t\t\t\tvar stack = stacks.join(\"\\nFrom previous: \");\n\t\t\t\tif (this._state !== null)\n\t\t\t\t\tthis._stack = stack;\n\t\t\t\treturn stack;\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tstack_being_generated = false;\n\t\t\t}\n\t\t}\n\t},\n\ttimeout: function (ms, msg) {\n\t\tvar _this = this;\n\t\treturn ms < Infinity ?\n\t\t\tnew DexiePromise(function (resolve, reject) {\n\t\t\t\tvar handle = setTimeout(function () { return reject(new exceptions.Timeout(msg)); }, ms);\n\t\t\t\t_this.then(resolve, reject).finally(clearTimeout.bind(null, handle));\n\t\t\t}) : this;\n\t}\n});\nif (typeof Symbol !== 'undefined' && Symbol.toStringTag)\n\tsetProp(DexiePromise.prototype, Symbol.toStringTag, 'Dexie.Promise');\nglobalPSD.env = snapShot();\nfunction Listener(onFulfilled, onRejected, resolve, reject, zone) {\n\tthis.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n\tthis.onRejected = typeof onRejected === 'function' ? onRejected : null;\n\tthis.resolve = resolve;\n\tthis.reject = reject;\n\tthis.psd = zone;\n}\nprops(DexiePromise, {\n\tall: function () {\n\t\tvar values = getArrayOf.apply(null, arguments)\n\t\t\t.map(onPossibleParallellAsync);\n\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\tif (values.length === 0)\n\t\t\t\tresolve([]);\n\t\t\tvar remaining = values.length;\n\t\t\tvalues.forEach(function (a, i) { return DexiePromise.resolve(a).then(function (x) {\n\t\t\t\tvalues[i] = x;\n\t\t\t\tif (!--remaining)\n\t\t\t\t\tresolve(values);\n\t\t\t}, reject); });\n\t\t});\n\t},\n\tresolve: function (value) {\n\t\tif (value instanceof DexiePromise)\n\t\t\treturn value;\n\t\tif (value && typeof value.then === 'function')\n\t\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\t\tvalue.then(resolve, reject);\n\t\t\t});\n\t\tvar rv = new DexiePromise(INTERNAL, true, value);\n\t\tlinkToPreviousPromise(rv, currentFulfiller);\n\t\treturn rv;\n\t},\n\treject: PromiseReject,\n\trace: function () {\n\t\tvar values = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\tvalues.map(function (value) { return DexiePromise.resolve(value).then(resolve, reject); });\n\t\t});\n\t},\n\tPSD: {\n\t\tget: function () { return PSD; },\n\t\tset: function (value) { return PSD = value; }\n\t},\n\ttotalEchoes: { get: function () { return totalEchoes; } },\n\tnewPSD: newScope,\n\tusePSD: usePSD,\n\tscheduler: {\n\t\tget: function () { return asap; },\n\t\tset: function (value) { asap = value; }\n\t},\n\trejectionMapper: {\n\t\tget: function () { return rejectionMapper; },\n\t\tset: function (value) { rejectionMapper = value; }\n\t},\n\tfollow: function (fn, zoneProps) {\n\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\treturn newScope(function (resolve, reject) {\n\t\t\t\tvar psd = PSD;\n\t\t\t\tpsd.unhandleds = [];\n\t\t\t\tpsd.onunhandled = reject;\n\t\t\t\tpsd.finalize = callBoth(function () {\n\t\t\t\t\tvar _this = this;\n\t\t\t\t\trun_at_end_of_this_or_next_physical_tick(function () {\n\t\t\t\t\t\t_this.unhandleds.length === 0 ? resolve() : reject(_this.unhandleds[0]);\n\t\t\t\t\t});\n\t\t\t\t}, psd.finalize);\n\t\t\t\tfn();\n\t\t\t}, zoneProps, resolve, reject);\n\t\t});\n\t}\n});\nif (NativePromise) {\n\tif (NativePromise.allSettled)\n\t\tsetProp(DexiePromise, \"allSettled\", function () {\n\t\t\tvar possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n\t\t\treturn new DexiePromise(function (resolve) {\n\t\t\t\tif (possiblePromises.length === 0)\n\t\t\t\t\tresolve([]);\n\t\t\t\tvar remaining = possiblePromises.length;\n\t\t\t\tvar results = new Array(remaining);\n\t\t\t\tpossiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return results[i] = { status: \"fulfilled\", value: value }; }, function (reason) { return results[i] = { status: \"rejected\", reason: reason }; })\n\t\t\t\t\t.then(function () { return --remaining || resolve(results); }); });\n\t\t\t});\n\t\t});\n\tif (NativePromise.any && typeof AggregateError !== 'undefined')\n\t\tsetProp(DexiePromise, \"any\", function () {\n\t\t\tvar possiblePromises = getArrayOf.apply(null, arguments).map(onPossibleParallellAsync);\n\t\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\t\tif (possiblePromises.length === 0)\n\t\t\t\t\treject(new AggregateError([]));\n\t\t\t\tvar remaining = possiblePromises.length;\n\t\t\t\tvar failures = new Array(remaining);\n\t\t\t\tpossiblePromises.forEach(function (p, i) { return DexiePromise.resolve(p).then(function (value) { return resolve(value); }, function (failure) {\n\t\t\t\t\tfailures[i] = failure;\n\t\t\t\t\tif (!--remaining)\n\t\t\t\t\t\treject(new AggregateError(failures));\n\t\t\t\t}); });\n\t\t\t});\n\t\t});\n}\nfunction executePromiseTask(promise, fn) {\n\ttry {\n\t\tfn(function (value) {\n\t\t\tif (promise._state !== null)\n\t\t\t\treturn;\n\t\t\tif (value === promise)\n\t\t\t\tthrow new TypeError('A promise cannot be resolved with itself.');\n\t\t\tvar shouldExecuteTick = promise._lib && beginMicroTickScope();\n\t\t\tif (value && typeof value.then === 'function') {\n\t\t\t\texecutePromiseTask(promise, function (resolve, reject) {\n\t\t\t\t\tvalue instanceof DexiePromise ?\n\t\t\t\t\t\tvalue._then(resolve, reject) :\n\t\t\t\t\t\tvalue.then(resolve, reject);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tpromise._state = true;\n\t\t\t\tpromise._value = value;\n\t\t\t\tpropagateAllListeners(promise);\n\t\t\t}\n\t\t\tif (shouldExecuteTick)\n\t\t\t\tendMicroTickScope();\n\t\t}, handleRejection.bind(null, promise));\n\t}\n\tcatch (ex) {\n\t\thandleRejection(promise, ex);\n\t}\n}\nfunction handleRejection(promise, reason) {\n\trejectingErrors.push(reason);\n\tif (promise._state !== null)\n\t\treturn;\n\tvar shouldExecuteTick = promise._lib && beginMicroTickScope();\n\treason = rejectionMapper(reason);\n\tpromise._state = false;\n\tpromise._value = reason;\n\tdebug && reason !== null && typeof reason === 'object' && !reason._promise && tryCatch(function () {\n\t\tvar origProp = getPropertyDescriptor(reason, \"stack\");\n\t\treason._promise = promise;\n\t\tsetProp(reason, \"stack\", {\n\t\t\tget: function () {\n\t\t\t\treturn stack_being_generated ?\n\t\t\t\t\torigProp && (origProp.get ?\n\t\t\t\t\t\torigProp.get.apply(reason) :\n\t\t\t\t\t\torigProp.value) :\n\t\t\t\t\tpromise.stack;\n\t\t\t}\n\t\t});\n\t});\n\taddPossiblyUnhandledError(promise);\n\tpropagateAllListeners(promise);\n\tif (shouldExecuteTick)\n\t\tendMicroTickScope();\n}\nfunction propagateAllListeners(promise) {\n\tvar listeners = promise._listeners;\n\tpromise._listeners = [];\n\tfor (var i = 0, len = listeners.length; i < len; ++i) {\n\t\tpropagateToListener(promise, listeners[i]);\n\t}\n\tvar psd = promise._PSD;\n\t--psd.ref || psd.finalize();\n\tif (numScheduledCalls === 0) {\n\t\t++numScheduledCalls;\n\t\tasap(function () {\n\t\t\tif (--numScheduledCalls === 0)\n\t\t\t\tfinalizePhysicalTick();\n\t\t}, []);\n\t}\n}\nfunction propagateToListener(promise, listener) {\n\tif (promise._state === null) {\n\t\tpromise._listeners.push(listener);\n\t\treturn;\n\t}\n\tvar cb = promise._state ? listener.onFulfilled : listener.onRejected;\n\tif (cb === null) {\n\t\treturn (promise._state ? listener.resolve : listener.reject)(promise._value);\n\t}\n\t++listener.psd.ref;\n\t++numScheduledCalls;\n\tasap(callListener, [cb, promise, listener]);\n}\nfunction callListener(cb, promise, listener) {\n\ttry {\n\t\tcurrentFulfiller = promise;\n\t\tvar ret, value = promise._value;\n\t\tif (promise._state) {\n\t\t\tret = cb(value);\n\t\t}\n\t\telse {\n\t\t\tif (rejectingErrors.length)\n\t\t\t\trejectingErrors = [];\n\t\t\tret = cb(value);\n\t\t\tif (rejectingErrors.indexOf(value) === -1)\n\t\t\t\tmarkErrorAsHandled(promise);\n\t\t}\n\t\tlistener.resolve(ret);\n\t}\n\tcatch (e) {\n\t\tlistener.reject(e);\n\t}\n\tfinally {\n\t\tcurrentFulfiller = null;\n\t\tif (--numScheduledCalls === 0)\n\t\t\tfinalizePhysicalTick();\n\t\t--listener.psd.ref || listener.psd.finalize();\n\t}\n}\nfunction getStack(promise, stacks, limit) {\n\tif (stacks.length === limit)\n\t\treturn stacks;\n\tvar stack = \"\";\n\tif (promise._state === false) {\n\t\tvar failure = promise._value, errorName, message;\n\t\tif (failure != null) {\n\t\t\terrorName = failure.name || \"Error\";\n\t\t\tmessage = failure.message || failure;\n\t\t\tstack = prettyStack(failure, 0);\n\t\t}\n\t\telse {\n\t\t\terrorName = failure;\n\t\t\tmessage = \"\";\n\t\t}\n\t\tstacks.push(errorName + (message ? \": \" + message : \"\") + stack);\n\t}\n\tif (debug) {\n\t\tstack = prettyStack(promise._stackHolder, 2);\n\t\tif (stack && stacks.indexOf(stack) === -1)\n\t\t\tstacks.push(stack);\n\t\tif (promise._prev)\n\t\t\tgetStack(promise._prev, stacks, limit);\n\t}\n\treturn stacks;\n}\nfunction linkToPreviousPromise(promise, prev) {\n\tvar numPrev = prev ? prev._numPrev + 1 : 0;\n\tif (numPrev < LONG_STACKS_CLIP_LIMIT) {\n\t\tpromise._prev = prev;\n\t\tpromise._numPrev = numPrev;\n\t}\n}\nfunction physicalTick() {\n\tbeginMicroTickScope() && endMicroTickScope();\n}\nfunction beginMicroTickScope() {\n\tvar wasRootExec = isOutsideMicroTick;\n\tisOutsideMicroTick = false;\n\tneedsNewPhysicalTick = false;\n\treturn wasRootExec;\n}\nfunction endMicroTickScope() {\n\tvar callbacks, i, l;\n\tdo {\n\t\twhile (microtickQueue.length > 0) {\n\t\t\tcallbacks = microtickQueue;\n\t\t\tmicrotickQueue = [];\n\t\t\tl = callbacks.length;\n\t\t\tfor (i = 0; i < l; ++i) {\n\t\t\t\tvar item = callbacks[i];\n\t\t\t\titem[0].apply(null, item[1]);\n\t\t\t}\n\t\t}\n\t} while (microtickQueue.length > 0);\n\tisOutsideMicroTick = true;\n\tneedsNewPhysicalTick = true;\n}\nfunction finalizePhysicalTick() {\n\tvar unhandledErrs = unhandledErrors;\n\tunhandledErrors = [];\n\tunhandledErrs.forEach(function (p) {\n\t\tp._PSD.onunhandled.call(null, p._value, p);\n\t});\n\tvar finalizers = tickFinalizers.slice(0);\n\tvar i = finalizers.length;\n\twhile (i)\n\t\tfinalizers[--i]();\n}\nfunction run_at_end_of_this_or_next_physical_tick(fn) {\n\tfunction finalizer() {\n\t\tfn();\n\t\ttickFinalizers.splice(tickFinalizers.indexOf(finalizer), 1);\n\t}\n\ttickFinalizers.push(finalizer);\n\t++numScheduledCalls;\n\tasap(function () {\n\t\tif (--numScheduledCalls === 0)\n\t\t\tfinalizePhysicalTick();\n\t}, []);\n}\nfunction addPossiblyUnhandledError(promise) {\n\tif (!unhandledErrors.some(function (p) { return p._value === promise._value; }))\n\t\tunhandledErrors.push(promise);\n}\nfunction markErrorAsHandled(promise) {\n\tvar i = unhandledErrors.length;\n\twhile (i)\n\t\tif (unhandledErrors[--i]._value === promise._value) {\n\t\t\tunhandledErrors.splice(i, 1);\n\t\t\treturn;\n\t\t}\n}\nfunction PromiseReject(reason) {\n\treturn new DexiePromise(INTERNAL, false, reason);\n}\nfunction wrap(fn, errorCatcher) {\n\tvar psd = PSD;\n\treturn function () {\n\t\tvar wasRootExec = beginMicroTickScope(), outerScope = PSD;\n\t\ttry {\n\t\t\tswitchToZone(psd, true);\n\t\t\treturn fn.apply(this, arguments);\n\t\t}\n\t\tcatch (e) {\n\t\t\terrorCatcher && errorCatcher(e);\n\t\t}\n\t\tfinally {\n\t\t\tswitchToZone(outerScope, false);\n\t\t\tif (wasRootExec)\n\t\t\t\tendMicroTickScope();\n\t\t}\n\t};\n}\nvar task = { awaits: 0, echoes: 0, id: 0 };\nvar taskCounter = 0;\nvar zoneStack = [];\nvar zoneEchoes = 0;\nvar totalEchoes = 0;\nvar zone_id_counter = 0;\nfunction newScope(fn, props, a1, a2) {\n\tvar parent = PSD, psd = Object.create(parent);\n\tpsd.parent = parent;\n\tpsd.ref = 0;\n\tpsd.global = false;\n\tpsd.id = ++zone_id_counter;\n\tvar globalEnv = globalPSD.env;\n\tpsd.env = patchGlobalPromise ? {\n\t\tPromise: DexiePromise,\n\t\tPromiseProp: { value: DexiePromise, configurable: true, writable: true },\n\t\tall: DexiePromise.all,\n\t\trace: DexiePromise.race,\n\t\tallSettled: DexiePromise.allSettled,\n\t\tany: DexiePromise.any,\n\t\tresolve: DexiePromise.resolve,\n\t\treject: DexiePromise.reject,\n\t\tnthen: getPatchedPromiseThen(globalEnv.nthen, psd),\n\t\tgthen: getPatchedPromiseThen(globalEnv.gthen, psd)\n\t} : {};\n\tif (props)\n\t\textend(psd, props);\n\t++parent.ref;\n\tpsd.finalize = function () {\n\t\t--this.parent.ref || this.parent.finalize();\n\t};\n\tvar rv = usePSD(psd, fn, a1, a2);\n\tif (psd.ref === 0)\n\t\tpsd.finalize();\n\treturn rv;\n}\nfunction incrementExpectedAwaits() {\n\tif (!task.id)\n\t\ttask.id = ++taskCounter;\n\t++task.awaits;\n\ttask.echoes += ZONE_ECHO_LIMIT;\n\treturn task.id;\n}\nfunction decrementExpectedAwaits() {\n\tif (!task.awaits)\n\t\treturn false;\n\tif (--task.awaits === 0)\n\t\ttask.id = 0;\n\ttask.echoes = task.awaits * ZONE_ECHO_LIMIT;\n\treturn true;\n}\nif (('' + nativePromiseThen).indexOf('[native code]') === -1) {\n\tincrementExpectedAwaits = decrementExpectedAwaits = nop;\n}\nfunction onPossibleParallellAsync(possiblePromise) {\n\tif (task.echoes && possiblePromise && possiblePromise.constructor === NativePromise) {\n\t\tincrementExpectedAwaits();\n\t\treturn possiblePromise.then(function (x) {\n\t\t\tdecrementExpectedAwaits();\n\t\t\treturn x;\n\t\t}, function (e) {\n\t\t\tdecrementExpectedAwaits();\n\t\t\treturn rejection(e);\n\t\t});\n\t}\n\treturn possiblePromise;\n}\nfunction zoneEnterEcho(targetZone) {\n\t++totalEchoes;\n\tif (!task.echoes || --task.echoes === 0) {\n\t\ttask.echoes = task.id = 0;\n\t}\n\tzoneStack.push(PSD);\n\tswitchToZone(targetZone, true);\n}\nfunction zoneLeaveEcho() {\n\tvar zone = zoneStack[zoneStack.length - 1];\n\tzoneStack.pop();\n\tswitchToZone(zone, false);\n}\nfunction switchToZone(targetZone, bEnteringZone) {\n\tvar currentZone = PSD;\n\tif (bEnteringZone ? task.echoes && (!zoneEchoes++ || targetZone !== PSD) : zoneEchoes && (!--zoneEchoes || targetZone !== PSD)) {\n\t\tenqueueNativeMicroTask(bEnteringZone ? zoneEnterEcho.bind(null, targetZone) : zoneLeaveEcho);\n\t}\n\tif (targetZone === PSD)\n\t\treturn;\n\tPSD = targetZone;\n\tif (currentZone === globalPSD)\n\t\tglobalPSD.env = snapShot();\n\tif (patchGlobalPromise) {\n\t\tvar GlobalPromise_1 = globalPSD.env.Promise;\n\t\tvar targetEnv = targetZone.env;\n\t\tnativePromiseProto.then = targetEnv.nthen;\n\t\tGlobalPromise_1.prototype.then = targetEnv.gthen;\n\t\tif (currentZone.global || targetZone.global) {\n\t\t\tObject.defineProperty(_global, 'Promise', targetEnv.PromiseProp);\n\t\t\tGlobalPromise_1.all = targetEnv.all;\n\t\t\tGlobalPromise_1.race = targetEnv.race;\n\t\t\tGlobalPromise_1.resolve = targetEnv.resolve;\n\t\t\tGlobalPromise_1.reject = targetEnv.reject;\n\t\t\tif (targetEnv.allSettled)\n\t\t\t\tGlobalPromise_1.allSettled = targetEnv.allSettled;\n\t\t\tif (targetEnv.any)\n\t\t\t\tGlobalPromise_1.any = targetEnv.any;\n\t\t}\n\t}\n}\nfunction snapShot() {\n\tvar GlobalPromise = _global.Promise || Promise; // tag 02032020\n\treturn patchGlobalPromise ? {\n\t\tPromise: GlobalPromise,\n\t\tPromiseProp: Object.getOwnPropertyDescriptor(_global, \"Promise\"),\n\t\tall: GlobalPromise.all,\n\t\trace: GlobalPromise.race,\n\t\tallSettled: GlobalPromise.allSettled,\n\t\tany: GlobalPromise.any,\n\t\tresolve: GlobalPromise.resolve,\n\t\treject: GlobalPromise.reject,\n\t\tnthen: nativePromiseProto.then,\n\t\tgthen: GlobalPromise.prototype.then\n\t} : {};\n}\nfunction usePSD(psd, fn, a1, a2, a3) {\n\tvar outerScope = PSD;\n\ttry {\n\t\tswitchToZone(psd, true);\n\t\treturn fn(a1, a2, a3);\n\t}\n\tfinally {\n\t\tswitchToZone(outerScope, false);\n\t}\n}\nfunction enqueueNativeMicroTask(job) {\n\tnativePromiseThen.call(resolvedNativePromise, job);\n}\nfunction nativeAwaitCompatibleWrap(fn, zone, possibleAwait, cleanup) {\n\treturn typeof fn !== 'function' ? fn : function () {\n\t\tvar outerZone = PSD;\n\t\tif (possibleAwait)\n\t\t\tincrementExpectedAwaits();\n\t\tswitchToZone(zone, true);\n\t\ttry {\n\t\t\treturn fn.apply(this, arguments);\n\t\t}\n\t\tfinally {\n\t\t\tswitchToZone(outerZone, false);\n\t\t\tif (cleanup)\n\t\t\t\tenqueueNativeMicroTask(decrementExpectedAwaits);\n\t\t}\n\t};\n}\nfunction getPatchedPromiseThen(origThen, zone) {\n\treturn function (onResolved, onRejected) {\n\t\treturn origThen.call(this, nativeAwaitCompatibleWrap(onResolved, zone), nativeAwaitCompatibleWrap(onRejected, zone));\n\t};\n}\nvar UNHANDLEDREJECTION = \"unhandledrejection\";\nfunction globalError(err, promise) {\n\tvar rv;\n\ttry {\n\t\trv = promise.onuncatched(err);\n\t}\n\tcatch (e) { }\n\tif (rv !== false)\n\t\ttry {\n\t\t\tvar event, eventData = { promise: promise, reason: err };\n\t\t\tif (_global.document && document.createEvent) {\n\t\t\t\tevent = document.createEvent('Event');\n\t\t\t\tevent.initEvent(UNHANDLEDREJECTION, true, true);\n\t\t\t\textend(event, eventData);\n\t\t\t}\n\t\t\telse if (_global.CustomEvent) {\n\t\t\t\tevent = new CustomEvent(UNHANDLEDREJECTION, { detail: eventData });\n\t\t\t\textend(event, eventData);\n\t\t\t}\n\t\t\tif (event && _global.dispatchEvent) {\n\t\t\t\tdispatchEvent(event);\n\t\t\t\tif (!_global.PromiseRejectionEvent && _global.onunhandledrejection)\n\t\t\t\t\ttry {\n\t\t\t\t\t\t_global.onunhandledrejection(event);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (_) { }\n\t\t\t}\n\t\t\tif (debug && event && !event.defaultPrevented) {\n\t\t\t\tconsole.warn(\"Unhandled rejection: \" + (err.stack || err));\n\t\t\t}\n\t\t}\n\t\tcatch (e) { }\n}\nvar rejection = DexiePromise.reject;\n\nfunction tempTransaction(db, mode, storeNames, fn) {\n\tif (!db.idbdb || (!db._state.openComplete && (!PSD.letThrough && !db._vip))) {\n\t\tif (db._state.openComplete) {\n\t\t\treturn rejection(new exceptions.DatabaseClosed(db._state.dbOpenError));\n\t\t}\n\t\tif (!db._state.isBeingOpened) {\n\t\t\tif (!db._options.autoOpen)\n\t\t\t\treturn rejection(new exceptions.DatabaseClosed());\n\t\t\tdb.open().catch(nop);\n\t\t}\n\t\treturn db._state.dbReadyPromise.then(function () { return tempTransaction(db, mode, storeNames, fn); });\n\t}\n\telse {\n\t\tvar trans = db._createTransaction(mode, storeNames, db._dbSchema);\n\t\ttry {\n\t\t\ttrans.create();\n\t\t\tdb._state.PR1398_maxLoop = 3;\n\t\t}\n\t\tcatch (ex) {\n\t\t\tif (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n\t\t\t\tconsole.warn('Dexie: Need to reopen db');\n\t\t\t\tdb._close();\n\t\t\t\treturn db.open().then(function () { return tempTransaction(db, mode, storeNames, fn); });\n\t\t\t}\n\t\t\treturn rejection(ex);\n\t\t}\n\t\treturn trans._promise(mode, function (resolve, reject) {\n\t\t\treturn newScope(function () {\n\t\t\t\tPSD.trans = trans;\n\t\t\t\treturn fn(resolve, reject, trans);\n\t\t\t});\n\t\t}).then(function (result) {\n\t\t\treturn trans._completion.then(function () { return result; });\n\t\t});\n\t}\n}\n\nvar DEXIE_VERSION = '3.2.2';\nvar maxString = String.fromCharCode(65535);\nvar minKey = -Infinity;\nvar INVALID_KEY_ARGUMENT = \"Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.\";\nvar STRING_EXPECTED = \"String expected.\";\nvar connections = [];\nvar isIEOrEdge = typeof navigator !== 'undefined' && /(MSIE|Trident|Edge)/.test(navigator.userAgent);\nvar hasIEDeleteObjectStoreBug = isIEOrEdge;\nvar hangsOnDeleteLargeKeyRange = isIEOrEdge;\nvar dexieStackFrameFilter = function (frame) { return !/(dexie\\.js|dexie\\.min\\.js)/.test(frame); };\nvar DBNAMES_DB = '__dbnames';\nvar READONLY = 'readonly';\nvar READWRITE = 'readwrite';\n\nfunction combine(filter1, filter2) {\n\treturn filter1 ?\n\t\tfilter2 ?\n\t\t\tfunction () { return filter1.apply(this, arguments) && filter2.apply(this, arguments); } :\n\t\t\tfilter1 :\n\t\tfilter2;\n}\n\nvar AnyRange = {\n\ttype: 3 ,\n\tlower: -Infinity,\n\tlowerOpen: false,\n\tupper: [[]],\n\tupperOpen: false\n};\n\nfunction workaroundForUndefinedPrimKey(keyPath) {\n\treturn typeof keyPath === \"string\" && !/\\./.test(keyPath)\n\t\t? function (obj) {\n\t\t\tif (obj[keyPath] === undefined && (keyPath in obj)) {\n\t\t\t\tobj = deepClone(obj);\n\t\t\t\tdelete obj[keyPath];\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\t\t: function (obj) { return obj; };\n}\n\nvar Table =  (function () {\n\tfunction Table() {\n\t}\n\tTable.prototype._trans = function (mode, fn, writeLocked) {\n\t\tvar trans = this._tx || PSD.trans;\n\t\tvar tableName = this.name;\n\t\tfunction checkTableInTransaction(resolve, reject, trans) {\n\t\t\tif (!trans.schema[tableName])\n\t\t\t\tthrow new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n\t\t\treturn fn(trans.idbtrans, trans);\n\t\t}\n\t\tvar wasRootExec = beginMicroTickScope();\n\t\ttry {\n\t\t\treturn trans && trans.db === this.db ?\n\t\t\t\ttrans === PSD.trans ?\n\t\t\t\t\ttrans._promise(mode, checkTableInTransaction, writeLocked) :\n\t\t\t\t\tnewScope(function () { return trans._promise(mode, checkTableInTransaction, writeLocked); }, { trans: trans, transless: PSD.transless || PSD }) :\n\t\t\t\ttempTransaction(this.db, mode, [this.name], checkTableInTransaction);\n\t\t}\n\t\tfinally {\n\t\t\tif (wasRootExec)\n\t\t\t\tendMicroTickScope();\n\t\t}\n\t};\n\tTable.prototype.get = function (keyOrCrit, cb) {\n\t\tvar _this = this;\n\t\tif (keyOrCrit && keyOrCrit.constructor === Object)\n\t\t\treturn this.where(keyOrCrit).first(cb);\n\t\treturn this._trans('readonly', function (trans) {\n\t\t\treturn _this.core.get({ trans: trans, key: keyOrCrit })\n\t\t\t\t.then(function (res) { return _this.hook.reading.fire(res); });\n\t\t}).then(cb);\n\t};\n\tTable.prototype.where = function (indexOrCrit) {\n\t\tif (typeof indexOrCrit === 'string')\n\t\t\treturn new this.db.WhereClause(this, indexOrCrit);\n\t\tif (isArray(indexOrCrit))\n\t\t\treturn new this.db.WhereClause(this, \"[\" + indexOrCrit.join('+') + \"]\");\n\t\tvar keyPaths = keys(indexOrCrit);\n\t\tif (keyPaths.length === 1)\n\t\t\treturn this\n\t\t\t\t.where(keyPaths[0])\n\t\t\t\t.equals(indexOrCrit[keyPaths[0]]);\n\t\tvar compoundIndex = this.schema.indexes.concat(this.schema.primKey).filter(function (ix) {\n\t\t\treturn ix.compound &&\n\t\t\t\tkeyPaths.every(function (keyPath) { return ix.keyPath.indexOf(keyPath) >= 0; }) &&\n\t\t\t\tix.keyPath.every(function (keyPath) { return keyPaths.indexOf(keyPath) >= 0; });\n\t\t})[0];\n\t\tif (compoundIndex && this.db._maxKey !== maxString)\n\t\t\treturn this\n\t\t\t\t.where(compoundIndex.name)\n\t\t\t\t.equals(compoundIndex.keyPath.map(function (kp) { return indexOrCrit[kp]; }));\n\t\tif (!compoundIndex && debug)\n\t\t\tconsole.warn(\"The query \" + JSON.stringify(indexOrCrit) + \" on \" + this.name + \" would benefit of a \" +\n\t\t\t\t(\"compound index [\" + keyPaths.join('+') + \"]\"));\n\t\tvar idxByName = this.schema.idxByName;\n\t\tvar idb = this.db._deps.indexedDB;\n\t\tfunction equals(a, b) {\n\t\t\ttry {\n\t\t\t\treturn idb.cmp(a, b) === 0;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tvar _a = keyPaths.reduce(function (_a, keyPath) {\n\t\t\tvar prevIndex = _a[0], prevFilterFn = _a[1];\n\t\t\tvar index = idxByName[keyPath];\n\t\t\tvar value = indexOrCrit[keyPath];\n\t\t\treturn [\n\t\t\t\tprevIndex || index,\n\t\t\t\tprevIndex || !index ?\n\t\t\t\t\tcombine(prevFilterFn, index && index.multi ?\n\t\t\t\t\t\tfunction (x) {\n\t\t\t\t\t\t\tvar prop = getByKeyPath(x, keyPath);\n\t\t\t\t\t\t\treturn isArray(prop) && prop.some(function (item) { return equals(value, item); });\n\t\t\t\t\t\t} : function (x) { return equals(value, getByKeyPath(x, keyPath)); })\n\t\t\t\t\t: prevFilterFn\n\t\t\t];\n\t\t}, [null, null]), idx = _a[0], filterFunction = _a[1];\n\t\treturn idx ?\n\t\t\tthis.where(idx.name).equals(indexOrCrit[idx.keyPath])\n\t\t\t\t.filter(filterFunction) :\n\t\t\tcompoundIndex ?\n\t\t\t\tthis.filter(filterFunction) :\n\t\t\t\tthis.where(keyPaths).equals('');\n\t};\n\tTable.prototype.filter = function (filterFunction) {\n\t\treturn this.toCollection().and(filterFunction);\n\t};\n\tTable.prototype.count = function (thenShortcut) {\n\t\treturn this.toCollection().count(thenShortcut);\n\t};\n\tTable.prototype.offset = function (offset) {\n\t\treturn this.toCollection().offset(offset);\n\t};\n\tTable.prototype.limit = function (numRows) {\n\t\treturn this.toCollection().limit(numRows);\n\t};\n\tTable.prototype.each = function (callback) {\n\t\treturn this.toCollection().each(callback);\n\t};\n\tTable.prototype.toArray = function (thenShortcut) {\n\t\treturn this.toCollection().toArray(thenShortcut);\n\t};\n\tTable.prototype.toCollection = function () {\n\t\treturn new this.db.Collection(new this.db.WhereClause(this));\n\t};\n\tTable.prototype.orderBy = function (index) {\n\t\treturn new this.db.Collection(new this.db.WhereClause(this, isArray(index) ?\n\t\t\t\"[\" + index.join('+') + \"]\" :\n\t\t\tindex));\n\t};\n\tTable.prototype.reverse = function () {\n\t\treturn this.toCollection().reverse();\n\t};\n\tTable.prototype.mapToClass = function (constructor) {\n\t\tthis.schema.mappedClass = constructor;\n\t\tvar readHook = function (obj) {\n\t\t\tif (!obj)\n\t\t\t\treturn obj;\n\t\t\tvar res = Object.create(constructor.prototype);\n\t\t\tfor (var m in obj)\n\t\t\t\tif (hasOwn(obj, m))\n\t\t\t\t\ttry {\n\t\t\t\t\t\tres[m] = obj[m];\n\t\t\t\t\t}\n\t\t\t\t\tcatch (_) { }\n\t\t\treturn res;\n\t\t};\n\t\tif (this.schema.readHook) {\n\t\t\tthis.hook.reading.unsubscribe(this.schema.readHook);\n\t\t}\n\t\tthis.schema.readHook = readHook;\n\t\tthis.hook(\"reading\", readHook);\n\t\treturn constructor;\n\t};\n\tTable.prototype.defineClass = function () {\n\t\tfunction Class(content) {\n\t\t\textend(this, content);\n\t\t}\n\t\treturn this.mapToClass(Class);\n\t};\n\tTable.prototype.add = function (obj, key) {\n\t\tvar _this = this;\n\t\tvar _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n\t\tvar objToAdd = obj;\n\t\tif (keyPath && auto) {\n\t\t\tobjToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n\t\t}\n\t\treturn this._trans('readwrite', function (trans) {\n\t\t\treturn _this.core.mutate({ trans: trans, type: 'add', keys: key != null ? [key] : null, values: [objToAdd] });\n\t\t}).then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n\t\t\t.then(function (lastResult) {\n\t\t\t\tif (keyPath) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetByKeyPath(obj, keyPath, lastResult);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (_) { }\n\t\t\t\t}\n\t\t\t\treturn lastResult;\n\t\t\t});\n\t};\n\tTable.prototype.update = function (keyOrObject, modifications) {\n\t\tif (typeof keyOrObject === 'object' && !isArray(keyOrObject)) {\n\t\t\tvar key = getByKeyPath(keyOrObject, this.schema.primKey.keyPath);\n\t\t\tif (key === undefined)\n\t\t\t\treturn rejection(new exceptions.InvalidArgument(\"Given object does not contain its primary key\"));\n\t\t\ttry {\n\t\t\t\tif (typeof modifications !== \"function\") {\n\t\t\t\t\tkeys(modifications).forEach(function (keyPath) {\n\t\t\t\t\t\tsetByKeyPath(keyOrObject, keyPath, modifications[keyPath]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tmodifications(keyOrObject, { value: keyOrObject, primKey: key });\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (_a) {\n\t\t\t}\n\t\t\treturn this.where(\":id\").equals(key).modify(modifications);\n\t\t}\n\t\telse {\n\t\t\treturn this.where(\":id\").equals(keyOrObject).modify(modifications);\n\t\t}\n\t};\n\tTable.prototype.put = function (obj, key) {\n\t\tvar _this = this;\n\t\tvar _a = this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n\t\tvar objToAdd = obj;\n\t\tif (keyPath && auto) {\n\t\t\tobjToAdd = workaroundForUndefinedPrimKey(keyPath)(obj);\n\t\t}\n\t\treturn this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'put', values: [objToAdd], keys: key != null ? [key] : null }); })\n\t\t\t.then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : res.lastResult; })\n\t\t\t.then(function (lastResult) {\n\t\t\t\tif (keyPath) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetByKeyPath(obj, keyPath, lastResult);\n\t\t\t\t\t}\n\t\t\t\t\tcatch (_) { }\n\t\t\t\t}\n\t\t\t\treturn lastResult;\n\t\t\t});\n\t};\n\tTable.prototype.delete = function (key) {\n\t\tvar _this = this;\n\t\treturn this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'delete', keys: [key] }); })\n\t\t\t.then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n\t};\n\tTable.prototype.clear = function () {\n\t\tvar _this = this;\n\t\treturn this._trans('readwrite', function (trans) { return _this.core.mutate({ trans: trans, type: 'deleteRange', range: AnyRange }); })\n\t\t\t.then(function (res) { return res.numFailures ? DexiePromise.reject(res.failures[0]) : undefined; });\n\t};\n\tTable.prototype.bulkGet = function (keys) {\n\t\tvar _this = this;\n\t\treturn this._trans('readonly', function (trans) {\n\t\t\treturn _this.core.getMany({\n\t\t\t\tkeys: keys,\n\t\t\t\ttrans: trans\n\t\t\t}).then(function (result) { return result.map(function (res) { return _this.hook.reading.fire(res); }); });\n\t\t});\n\t};\n\tTable.prototype.bulkAdd = function (objects, keysOrOptions, options) {\n\t\tvar _this = this;\n\t\tvar keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n\t\toptions = options || (keys ? undefined : keysOrOptions);\n\t\tvar wantResults = options ? options.allKeys : undefined;\n\t\treturn this._trans('readwrite', function (trans) {\n\t\t\tvar _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n\t\t\tif (keyPath && keys)\n\t\t\t\tthrow new exceptions.InvalidArgument(\"bulkAdd(): keys argument invalid on tables with inbound keys\");\n\t\t\tif (keys && keys.length !== objects.length)\n\t\t\t\tthrow new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n\t\t\tvar numObjects = objects.length;\n\t\t\tvar objectsToAdd = keyPath && auto ?\n\t\t\t\tobjects.map(workaroundForUndefinedPrimKey(keyPath)) :\n\t\t\t\tobjects;\n\t\t\treturn _this.core.mutate({ trans: trans, type: 'add', keys: keys, values: objectsToAdd, wantResults: wantResults })\n\t\t\t\t.then(function (_a) {\n\t\t\t\t\tvar numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n\t\t\t\t\tvar result = wantResults ? results : lastResult;\n\t\t\t\t\tif (numFailures === 0)\n\t\t\t\t\t\treturn result;\n\t\t\t\t\tthrow new BulkError(_this.name + \".bulkAdd(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n\t\t\t\t});\n\t\t});\n\t};\n\tTable.prototype.bulkPut = function (objects, keysOrOptions, options) {\n\t\tvar _this = this;\n\t\tvar keys = Array.isArray(keysOrOptions) ? keysOrOptions : undefined;\n\t\toptions = options || (keys ? undefined : keysOrOptions);\n\t\tvar wantResults = options ? options.allKeys : undefined;\n\t\treturn this._trans('readwrite', function (trans) {\n\t\t\tvar _a = _this.schema.primKey, auto = _a.auto, keyPath = _a.keyPath;\n\t\t\tif (keyPath && keys)\n\t\t\t\tthrow new exceptions.InvalidArgument(\"bulkPut(): keys argument invalid on tables with inbound keys\");\n\t\t\tif (keys && keys.length !== objects.length)\n\t\t\t\tthrow new exceptions.InvalidArgument(\"Arguments objects and keys must have the same length\");\n\t\t\tvar numObjects = objects.length;\n\t\t\tvar objectsToPut = keyPath && auto ?\n\t\t\t\tobjects.map(workaroundForUndefinedPrimKey(keyPath)) :\n\t\t\t\tobjects;\n\t\t\treturn _this.core.mutate({ trans: trans, type: 'put', keys: keys, values: objectsToPut, wantResults: wantResults })\n\t\t\t\t.then(function (_a) {\n\t\t\t\t\tvar numFailures = _a.numFailures, results = _a.results, lastResult = _a.lastResult, failures = _a.failures;\n\t\t\t\t\tvar result = wantResults ? results : lastResult;\n\t\t\t\t\tif (numFailures === 0)\n\t\t\t\t\t\treturn result;\n\t\t\t\t\tthrow new BulkError(_this.name + \".bulkPut(): \" + numFailures + \" of \" + numObjects + \" operations failed\", failures);\n\t\t\t\t});\n\t\t});\n\t};\n\tTable.prototype.bulkDelete = function (keys) {\n\t\tvar _this = this;\n\t\tvar numKeys = keys.length;\n\t\treturn this._trans('readwrite', function (trans) {\n\t\t\treturn _this.core.mutate({ trans: trans, type: 'delete', keys: keys });\n\t\t}).then(function (_a) {\n\t\t\tvar numFailures = _a.numFailures, lastResult = _a.lastResult, failures = _a.failures;\n\t\t\tif (numFailures === 0)\n\t\t\t\treturn lastResult;\n\t\t\tthrow new BulkError(_this.name + \".bulkDelete(): \" + numFailures + \" of \" + numKeys + \" operations failed\", failures);\n\t\t});\n\t};\n\treturn Table;\n}());\n\nfunction Events(ctx) {\n\tvar evs = {};\n\tvar rv = function (eventName, subscriber) {\n\t\tif (subscriber) {\n\t\t\tvar i = arguments.length, args = new Array(i - 1);\n\t\t\twhile (--i)\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\tevs[eventName].subscribe.apply(null, args);\n\t\t\treturn ctx;\n\t\t}\n\t\telse if (typeof (eventName) === 'string') {\n\t\t\treturn evs[eventName];\n\t\t}\n\t};\n\trv.addEventType = add;\n\tfor (var i = 1, l = arguments.length; i < l; ++i) {\n\t\tadd(arguments[i]);\n\t}\n\treturn rv;\n\tfunction add(eventName, chainFunction, defaultFunction) {\n\t\tif (typeof eventName === 'object')\n\t\t\treturn addConfiguredEvents(eventName);\n\t\tif (!chainFunction)\n\t\t\tchainFunction = reverseStoppableEventChain;\n\t\tif (!defaultFunction)\n\t\t\tdefaultFunction = nop;\n\t\tvar context = {\n\t\t\tsubscribers: [],\n\t\t\tfire: defaultFunction,\n\t\t\tsubscribe: function (cb) {\n\t\t\t\tif (context.subscribers.indexOf(cb) === -1) {\n\t\t\t\t\tcontext.subscribers.push(cb);\n\t\t\t\t\tcontext.fire = chainFunction(context.fire, cb);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunsubscribe: function (cb) {\n\t\t\t\tcontext.subscribers = context.subscribers.filter(function (fn) { return fn !== cb; });\n\t\t\t\tcontext.fire = context.subscribers.reduce(chainFunction, defaultFunction);\n\t\t\t}\n\t\t};\n\t\tevs[eventName] = rv[eventName] = context;\n\t\treturn context;\n\t}\n\tfunction addConfiguredEvents(cfg) {\n\t\tkeys(cfg).forEach(function (eventName) {\n\t\t\tvar args = cfg[eventName];\n\t\t\tif (isArray(args)) {\n\t\t\t\tadd(eventName, cfg[eventName][0], cfg[eventName][1]);\n\t\t\t}\n\t\t\telse if (args === 'asap') {\n\t\t\t\tvar context = add(eventName, mirror, function fire() {\n\t\t\t\t\tvar i = arguments.length, args = new Array(i);\n\t\t\t\t\twhile (i--)\n\t\t\t\t\t\targs[i] = arguments[i];\n\t\t\t\t\tcontext.subscribers.forEach(function (fn) {\n\t\t\t\t\t\tasap$1(function fireEvent() {\n\t\t\t\t\t\t\tfn.apply(null, args);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow new exceptions.InvalidArgument(\"Invalid event config\");\n\t\t});\n\t}\n}\n\nfunction makeClassConstructor(prototype, constructor) {\n\tderive(constructor).from({ prototype: prototype });\n\treturn constructor;\n}\n\nfunction createTableConstructor(db) {\n\treturn makeClassConstructor(Table.prototype, function Table(name, tableSchema, trans) {\n\t\tthis.db = db;\n\t\tthis._tx = trans;\n\t\tthis.name = name;\n\t\tthis.schema = tableSchema;\n\t\tthis.hook = db._allTables[name] ? db._allTables[name].hook : Events(null, {\n\t\t\t\"creating\": [hookCreatingChain, nop],\n\t\t\t\"reading\": [pureFunctionChain, mirror],\n\t\t\t\"updating\": [hookUpdatingChain, nop],\n\t\t\t\"deleting\": [hookDeletingChain, nop]\n\t\t});\n\t});\n}\n\nfunction isPlainKeyRange(ctx, ignoreLimitFilter) {\n\treturn !(ctx.filter || ctx.algorithm || ctx.or) &&\n\t\t(ignoreLimitFilter ? ctx.justLimit : !ctx.replayFilter);\n}\nfunction addFilter(ctx, fn) {\n\tctx.filter = combine(ctx.filter, fn);\n}\nfunction addReplayFilter(ctx, factory, isLimitFilter) {\n\tvar curr = ctx.replayFilter;\n\tctx.replayFilter = curr ? function () { return combine(curr(), factory()); } : factory;\n\tctx.justLimit = isLimitFilter && !curr;\n}\nfunction addMatchFilter(ctx, fn) {\n\tctx.isMatch = combine(ctx.isMatch, fn);\n}\nfunction getIndexOrStore(ctx, coreSchema) {\n\tif (ctx.isPrimKey)\n\t\treturn coreSchema.primaryKey;\n\tvar index = coreSchema.getIndexByKeyPath(ctx.index);\n\tif (!index)\n\t\tthrow new exceptions.Schema(\"KeyPath \" + ctx.index + \" on object store \" + coreSchema.name + \" is not indexed\");\n\treturn index;\n}\nfunction openCursor(ctx, coreTable, trans) {\n\tvar index = getIndexOrStore(ctx, coreTable.schema);\n\treturn coreTable.openCursor({\n\t\ttrans: trans,\n\t\tvalues: !ctx.keysOnly,\n\t\treverse: ctx.dir === 'prev',\n\t\tunique: !!ctx.unique,\n\t\tquery: {\n\t\t\tindex: index,\n\t\t\trange: ctx.range\n\t\t}\n\t});\n}\nfunction iter(ctx, fn, coreTrans, coreTable) {\n\tvar filter = ctx.replayFilter ? combine(ctx.filter, ctx.replayFilter()) : ctx.filter;\n\tif (!ctx.or) {\n\t\treturn iterate(openCursor(ctx, coreTable, coreTrans), combine(ctx.algorithm, filter), fn, !ctx.keysOnly && ctx.valueMapper);\n\t}\n\telse {\n\t\tvar set_1 = {};\n\t\tvar union = function (item, cursor, advance) {\n\t\t\tif (!filter || filter(cursor, advance, function (result) { return cursor.stop(result); }, function (err) { return cursor.fail(err); })) {\n\t\t\t\tvar primaryKey = cursor.primaryKey;\n\t\t\t\tvar key = '' + primaryKey;\n\t\t\t\tif (key === '[object ArrayBuffer]')\n\t\t\t\t\tkey = '' + new Uint8Array(primaryKey);\n\t\t\t\tif (!hasOwn(set_1, key)) {\n\t\t\t\t\tset_1[key] = true;\n\t\t\t\t\tfn(item, cursor, advance);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn Promise.all([\n\t\t\tctx.or._iterate(union, coreTrans),\n\t\t\titerate(openCursor(ctx, coreTable, coreTrans), ctx.algorithm, union, !ctx.keysOnly && ctx.valueMapper)\n\t\t]);\n\t}\n}\nfunction iterate(cursorPromise, filter, fn, valueMapper) {\n\tvar mappedFn = valueMapper ? function (x, c, a) { return fn(valueMapper(x), c, a); } : fn;\n\tvar wrappedFn = wrap(mappedFn);\n\treturn cursorPromise.then(function (cursor) {\n\t\tif (cursor) {\n\t\t\treturn cursor.start(function () {\n\t\t\t\tvar c = function () { return cursor.continue(); };\n\t\t\t\tif (!filter || filter(cursor, function (advancer) { return c = advancer; }, function (val) { cursor.stop(val); c = nop; }, function (e) { cursor.fail(e); c = nop; }))\n\t\t\t\t\twrappedFn(cursor.value, cursor, function (advancer) { return c = advancer; });\n\t\t\t\tc();\n\t\t\t});\n\t\t}\n\t});\n}\n\nfunction cmp(a, b) {\n\ttry {\n\t\tvar ta = type(a);\n\t\tvar tb = type(b);\n\t\tif (ta !== tb) {\n\t\t\tif (ta === 'Array')\n\t\t\t\treturn 1;\n\t\t\tif (tb === 'Array')\n\t\t\t\treturn -1;\n\t\t\tif (ta === 'binary')\n\t\t\t\treturn 1;\n\t\t\tif (tb === 'binary')\n\t\t\t\treturn -1;\n\t\t\tif (ta === 'string')\n\t\t\t\treturn 1;\n\t\t\tif (tb === 'string')\n\t\t\t\treturn -1;\n\t\t\tif (ta === 'Date')\n\t\t\t\treturn 1;\n\t\t\tif (tb !== 'Date')\n\t\t\t\treturn NaN;\n\t\t\treturn -1;\n\t\t}\n\t\tswitch (ta) {\n\t\t\tcase 'number':\n\t\t\tcase 'Date':\n\t\t\tcase 'string':\n\t\t\t\treturn a > b ? 1 : a < b ? -1 : 0;\n\t\t\tcase 'binary': {\n\t\t\t\treturn compareUint8Arrays(getUint8Array(a), getUint8Array(b));\n\t\t\t}\n\t\t\tcase 'Array':\n\t\t\t\treturn compareArrays(a, b);\n\t\t}\n\t}\n\tcatch (_a) { }\n\treturn NaN;\n}\nfunction compareArrays(a, b) {\n\tvar al = a.length;\n\tvar bl = b.length;\n\tvar l = al < bl ? al : bl;\n\tfor (var i = 0; i < l; ++i) {\n\t\tvar res = cmp(a[i], b[i]);\n\t\tif (res !== 0)\n\t\t\treturn res;\n\t}\n\treturn al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction compareUint8Arrays(a, b) {\n\tvar al = a.length;\n\tvar bl = b.length;\n\tvar l = al < bl ? al : bl;\n\tfor (var i = 0; i < l; ++i) {\n\t\tif (a[i] !== b[i])\n\t\t\treturn a[i] < b[i] ? -1 : 1;\n\t}\n\treturn al === bl ? 0 : al < bl ? -1 : 1;\n}\nfunction type(x) {\n\tvar t = typeof x;\n\tif (t !== 'object')\n\t\treturn t;\n\tif (ArrayBuffer.isView(x))\n\t\treturn 'binary';\n\tvar tsTag = toStringTag(x);\n\treturn tsTag === 'ArrayBuffer' ? 'binary' : tsTag;\n}\nfunction getUint8Array(a) {\n\tif (a instanceof Uint8Array)\n\t\treturn a;\n\tif (ArrayBuffer.isView(a))\n\t\treturn new Uint8Array(a.buffer, a.byteOffset, a.byteLength);\n\treturn new Uint8Array(a);\n}\n\nvar Collection =  (function () {\n\tfunction Collection() {\n\t}\n\tCollection.prototype._read = function (fn, cb) {\n\t\tvar ctx = this._ctx;\n\t\treturn ctx.error ?\n\t\t\tctx.table._trans(null, rejection.bind(null, ctx.error)) :\n\t\t\tctx.table._trans('readonly', fn).then(cb);\n\t};\n\tCollection.prototype._write = function (fn) {\n\t\tvar ctx = this._ctx;\n\t\treturn ctx.error ?\n\t\t\tctx.table._trans(null, rejection.bind(null, ctx.error)) :\n\t\t\tctx.table._trans('readwrite', fn, \"locked\");\n\t};\n\tCollection.prototype._addAlgorithm = function (fn) {\n\t\tvar ctx = this._ctx;\n\t\tctx.algorithm = combine(ctx.algorithm, fn);\n\t};\n\tCollection.prototype._iterate = function (fn, coreTrans) {\n\t\treturn iter(this._ctx, fn, coreTrans, this._ctx.table.core);\n\t};\n\tCollection.prototype.clone = function (props) {\n\t\tvar rv = Object.create(this.constructor.prototype), ctx = Object.create(this._ctx);\n\t\tif (props)\n\t\t\textend(ctx, props);\n\t\trv._ctx = ctx;\n\t\treturn rv;\n\t};\n\tCollection.prototype.raw = function () {\n\t\tthis._ctx.valueMapper = null;\n\t\treturn this;\n\t};\n\tCollection.prototype.each = function (fn) {\n\t\tvar ctx = this._ctx;\n\t\treturn this._read(function (trans) { return iter(ctx, fn, trans, ctx.table.core); });\n\t};\n\tCollection.prototype.count = function (cb) {\n\t\tvar _this = this;\n\t\treturn this._read(function (trans) {\n\t\t\tvar ctx = _this._ctx;\n\t\t\tvar coreTable = ctx.table.core;\n\t\t\tif (isPlainKeyRange(ctx, true)) {\n\t\t\t\treturn coreTable.count({\n\t\t\t\t\ttrans: trans,\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tindex: getIndexOrStore(ctx, coreTable.schema),\n\t\t\t\t\t\trange: ctx.range\n\t\t\t\t\t}\n\t\t\t\t}).then(function (count) { return Math.min(count, ctx.limit); });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar count = 0;\n\t\t\t\treturn iter(ctx, function () { ++count; return false; }, trans, coreTable)\n\t\t\t\t\t.then(function () { return count; });\n\t\t\t}\n\t\t}).then(cb);\n\t};\n\tCollection.prototype.sortBy = function (keyPath, cb) {\n\t\tvar parts = keyPath.split('.').reverse(), lastPart = parts[0], lastIndex = parts.length - 1;\n\t\tfunction getval(obj, i) {\n\t\t\tif (i)\n\t\t\t\treturn getval(obj[parts[i]], i - 1);\n\t\t\treturn obj[lastPart];\n\t\t}\n\t\tvar order = this._ctx.dir === \"next\" ? 1 : -1;\n\t\tfunction sorter(a, b) {\n\t\t\tvar aVal = getval(a, lastIndex), bVal = getval(b, lastIndex);\n\t\t\treturn aVal < bVal ? -order : aVal > bVal ? order : 0;\n\t\t}\n\t\treturn this.toArray(function (a) {\n\t\t\treturn a.sort(sorter);\n\t\t}).then(cb);\n\t};\n\tCollection.prototype.toArray = function (cb) {\n\t\tvar _this = this;\n\t\treturn this._read(function (trans) {\n\t\t\tvar ctx = _this._ctx;\n\t\t\tif (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n\t\t\t\tvar valueMapper_1 = ctx.valueMapper;\n\t\t\t\tvar index = getIndexOrStore(ctx, ctx.table.core.schema);\n\t\t\t\treturn ctx.table.core.query({\n\t\t\t\t\ttrans: trans,\n\t\t\t\t\tlimit: ctx.limit,\n\t\t\t\t\tvalues: true,\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\trange: ctx.range\n\t\t\t\t\t}\n\t\t\t\t}).then(function (_a) {\n\t\t\t\t\tvar result = _a.result;\n\t\t\t\t\treturn valueMapper_1 ? result.map(valueMapper_1) : result;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar a_1 = [];\n\t\t\t\treturn iter(ctx, function (item) { return a_1.push(item); }, trans, ctx.table.core).then(function () { return a_1; });\n\t\t\t}\n\t\t}, cb);\n\t};\n\tCollection.prototype.offset = function (offset) {\n\t\tvar ctx = this._ctx;\n\t\tif (offset <= 0)\n\t\t\treturn this;\n\t\tctx.offset += offset;\n\t\tif (isPlainKeyRange(ctx)) {\n\t\t\taddReplayFilter(ctx, function () {\n\t\t\t\tvar offsetLeft = offset;\n\t\t\t\treturn function (cursor, advance) {\n\t\t\t\t\tif (offsetLeft === 0)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif (offsetLeft === 1) {\n\t\t\t\t\t\t--offsetLeft;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tadvance(function () {\n\t\t\t\t\t\tcursor.advance(offsetLeft);\n\t\t\t\t\t\toffsetLeft = 0;\n\t\t\t\t\t});\n\t\t\t\t\treturn false;\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\taddReplayFilter(ctx, function () {\n\t\t\t\tvar offsetLeft = offset;\n\t\t\t\treturn function () { return (--offsetLeft < 0); };\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t};\n\tCollection.prototype.limit = function (numRows) {\n\t\tthis._ctx.limit = Math.min(this._ctx.limit, numRows);\n\t\taddReplayFilter(this._ctx, function () {\n\t\t\tvar rowsLeft = numRows;\n\t\t\treturn function (cursor, advance, resolve) {\n\t\t\t\tif (--rowsLeft <= 0)\n\t\t\t\t\tadvance(resolve);\n\t\t\t\treturn rowsLeft >= 0;\n\t\t\t};\n\t\t}, true);\n\t\treturn this;\n\t};\n\tCollection.prototype.until = function (filterFunction, bIncludeStopEntry) {\n\t\taddFilter(this._ctx, function (cursor, advance, resolve) {\n\t\t\tif (filterFunction(cursor.value)) {\n\t\t\t\tadvance(resolve);\n\t\t\t\treturn bIncludeStopEntry;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t};\n\tCollection.prototype.first = function (cb) {\n\t\treturn this.limit(1).toArray(function (a) { return a[0]; }).then(cb);\n\t};\n\tCollection.prototype.last = function (cb) {\n\t\treturn this.reverse().first(cb);\n\t};\n\tCollection.prototype.filter = function (filterFunction) {\n\t\taddFilter(this._ctx, function (cursor) {\n\t\t\treturn filterFunction(cursor.value);\n\t\t});\n\t\taddMatchFilter(this._ctx, filterFunction);\n\t\treturn this;\n\t};\n\tCollection.prototype.and = function (filter) {\n\t\treturn this.filter(filter);\n\t};\n\tCollection.prototype.or = function (indexName) {\n\t\treturn new this.db.WhereClause(this._ctx.table, indexName, this);\n\t};\n\tCollection.prototype.reverse = function () {\n\t\tthis._ctx.dir = (this._ctx.dir === \"prev\" ? \"next\" : \"prev\");\n\t\tif (this._ondirectionchange)\n\t\t\tthis._ondirectionchange(this._ctx.dir);\n\t\treturn this;\n\t};\n\tCollection.prototype.desc = function () {\n\t\treturn this.reverse();\n\t};\n\tCollection.prototype.eachKey = function (cb) {\n\t\tvar ctx = this._ctx;\n\t\tctx.keysOnly = !ctx.isMatch;\n\t\treturn this.each(function (val, cursor) { cb(cursor.key, cursor); });\n\t};\n\tCollection.prototype.eachUniqueKey = function (cb) {\n\t\tthis._ctx.unique = \"unique\";\n\t\treturn this.eachKey(cb);\n\t};\n\tCollection.prototype.eachPrimaryKey = function (cb) {\n\t\tvar ctx = this._ctx;\n\t\tctx.keysOnly = !ctx.isMatch;\n\t\treturn this.each(function (val, cursor) { cb(cursor.primaryKey, cursor); });\n\t};\n\tCollection.prototype.keys = function (cb) {\n\t\tvar ctx = this._ctx;\n\t\tctx.keysOnly = !ctx.isMatch;\n\t\tvar a = [];\n\t\treturn this.each(function (item, cursor) {\n\t\t\ta.push(cursor.key);\n\t\t}).then(function () {\n\t\t\treturn a;\n\t\t}).then(cb);\n\t};\n\tCollection.prototype.primaryKeys = function (cb) {\n\t\tvar ctx = this._ctx;\n\t\tif (ctx.dir === 'next' && isPlainKeyRange(ctx, true) && ctx.limit > 0) {\n\t\t\treturn this._read(function (trans) {\n\t\t\t\tvar index = getIndexOrStore(ctx, ctx.table.core.schema);\n\t\t\t\treturn ctx.table.core.query({\n\t\t\t\t\ttrans: trans,\n\t\t\t\t\tvalues: false,\n\t\t\t\t\tlimit: ctx.limit,\n\t\t\t\t\tquery: {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\trange: ctx.range\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}).then(function (_a) {\n\t\t\t\tvar result = _a.result;\n\t\t\t\treturn result;\n\t\t\t}).then(cb);\n\t\t}\n\t\tctx.keysOnly = !ctx.isMatch;\n\t\tvar a = [];\n\t\treturn this.each(function (item, cursor) {\n\t\t\ta.push(cursor.primaryKey);\n\t\t}).then(function () {\n\t\t\treturn a;\n\t\t}).then(cb);\n\t};\n\tCollection.prototype.uniqueKeys = function (cb) {\n\t\tthis._ctx.unique = \"unique\";\n\t\treturn this.keys(cb);\n\t};\n\tCollection.prototype.firstKey = function (cb) {\n\t\treturn this.limit(1).keys(function (a) { return a[0]; }).then(cb);\n\t};\n\tCollection.prototype.lastKey = function (cb) {\n\t\treturn this.reverse().firstKey(cb);\n\t};\n\tCollection.prototype.distinct = function () {\n\t\tvar ctx = this._ctx, idx = ctx.index && ctx.table.schema.idxByName[ctx.index];\n\t\tif (!idx || !idx.multi)\n\t\t\treturn this;\n\t\tvar set = {};\n\t\taddFilter(this._ctx, function (cursor) {\n\t\t\tvar strKey = cursor.primaryKey.toString();\n\t\t\tvar found = hasOwn(set, strKey);\n\t\t\tset[strKey] = true;\n\t\t\treturn !found;\n\t\t});\n\t\treturn this;\n\t};\n\tCollection.prototype.modify = function (changes) {\n\t\tvar _this = this;\n\t\tvar ctx = this._ctx;\n\t\treturn this._write(function (trans) {\n\t\t\tvar modifyer;\n\t\t\tif (typeof changes === 'function') {\n\t\t\t\tmodifyer = changes;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar keyPaths = keys(changes);\n\t\t\t\tvar numKeys = keyPaths.length;\n\t\t\t\tmodifyer = function (item) {\n\t\t\t\t\tvar anythingModified = false;\n\t\t\t\t\tfor (var i = 0; i < numKeys; ++i) {\n\t\t\t\t\t\tvar keyPath = keyPaths[i], val = changes[keyPath];\n\t\t\t\t\t\tif (getByKeyPath(item, keyPath) !== val) {\n\t\t\t\t\t\t\tsetByKeyPath(item, keyPath, val);\n\t\t\t\t\t\t\tanythingModified = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn anythingModified;\n\t\t\t\t};\n\t\t\t}\n\t\t\tvar coreTable = ctx.table.core;\n\t\t\tvar _a = coreTable.schema.primaryKey, outbound = _a.outbound, extractKey = _a.extractKey;\n\t\t\tvar limit = _this.db._options.modifyChunkSize || 200;\n\t\t\tvar totalFailures = [];\n\t\t\tvar successCount = 0;\n\t\t\tvar failedKeys = [];\n\t\t\tvar applyMutateResult = function (expectedCount, res) {\n\t\t\t\tvar failures = res.failures, numFailures = res.numFailures;\n\t\t\t\tsuccessCount += expectedCount - numFailures;\n\t\t\t\tfor (var _i = 0, _a = keys(failures); _i < _a.length; _i++) {\n\t\t\t\t\tvar pos = _a[_i];\n\t\t\t\t\ttotalFailures.push(failures[pos]);\n\t\t\t\t}\n\t\t\t};\n\t\t\treturn _this.clone().primaryKeys().then(function (keys) {\n\t\t\t\tvar nextChunk = function (offset) {\n\t\t\t\t\tvar count = Math.min(limit, keys.length - offset);\n\t\t\t\t\treturn coreTable.getMany({\n\t\t\t\t\t\ttrans: trans,\n\t\t\t\t\t\tkeys: keys.slice(offset, offset + count),\n\t\t\t\t\t\tcache: \"immutable\"\n\t\t\t\t\t}).then(function (values) {\n\t\t\t\t\t\tvar addValues = [];\n\t\t\t\t\t\tvar putValues = [];\n\t\t\t\t\t\tvar putKeys = outbound ? [] : null;\n\t\t\t\t\t\tvar deleteKeys = [];\n\t\t\t\t\t\tfor (var i = 0; i < count; ++i) {\n\t\t\t\t\t\t\tvar origValue = values[i];\n\t\t\t\t\t\t\tvar ctx_1 = {\n\t\t\t\t\t\t\t\tvalue: deepClone(origValue),\n\t\t\t\t\t\t\t\tprimKey: keys[offset + i]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tif (modifyer.call(ctx_1, ctx_1.value, ctx_1) !== false) {\n\t\t\t\t\t\t\t\tif (ctx_1.value == null) {\n\t\t\t\t\t\t\t\t\tdeleteKeys.push(keys[offset + i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (!outbound && cmp(extractKey(origValue), extractKey(ctx_1.value)) !== 0) {\n\t\t\t\t\t\t\t\t\tdeleteKeys.push(keys[offset + i]);\n\t\t\t\t\t\t\t\t\taddValues.push(ctx_1.value);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tputValues.push(ctx_1.value);\n\t\t\t\t\t\t\t\t\tif (outbound)\n\t\t\t\t\t\t\t\t\t\tputKeys.push(keys[offset + i]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar criteria = isPlainKeyRange(ctx) &&\n\t\t\t\t\t\t\tctx.limit === Infinity &&\n\t\t\t\t\t\t\t(typeof changes !== 'function' || changes === deleteCallback) && {\n\t\t\t\t\t\t\t\tindex: ctx.index,\n\t\t\t\t\t\t\t\trange: ctx.range\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\treturn Promise.resolve(addValues.length > 0 &&\n\t\t\t\t\t\t\tcoreTable.mutate({ trans: trans, type: 'add', values: addValues })\n\t\t\t\t\t\t\t\t.then(function (res) {\n\t\t\t\t\t\t\t\t\tfor (var pos in res.failures) {\n\t\t\t\t\t\t\t\t\t\tdeleteKeys.splice(parseInt(pos), 1);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tapplyMutateResult(addValues.length, res);\n\t\t\t\t\t\t\t\t})).then(function () { return (putValues.length > 0 || (criteria && typeof changes === 'object')) &&\n\t\t\t\t\t\t\tcoreTable.mutate({\n\t\t\t\t\t\t\t\ttrans: trans,\n\t\t\t\t\t\t\t\ttype: 'put',\n\t\t\t\t\t\t\t\tkeys: putKeys,\n\t\t\t\t\t\t\t\tvalues: putValues,\n\t\t\t\t\t\t\t\tcriteria: criteria,\n\t\t\t\t\t\t\t\tchangeSpec: typeof changes !== 'function'\n\t\t\t\t\t\t\t\t\t&& changes\n\t\t\t\t\t\t\t}).then(function (res) { return applyMutateResult(putValues.length, res); }); }).then(function () { return (deleteKeys.length > 0 || (criteria && changes === deleteCallback)) &&\n\t\t\t\t\t\t\tcoreTable.mutate({\n\t\t\t\t\t\t\t\ttrans: trans,\n\t\t\t\t\t\t\t\ttype: 'delete',\n\t\t\t\t\t\t\t\tkeys: deleteKeys,\n\t\t\t\t\t\t\t\tcriteria: criteria\n\t\t\t\t\t\t\t}).then(function (res) { return applyMutateResult(deleteKeys.length, res); }); }).then(function () {\n\t\t\t\t\t\t\treturn keys.length > offset + count && nextChunk(offset + limit);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\treturn nextChunk(0).then(function () {\n\t\t\t\t\tif (totalFailures.length > 0)\n\t\t\t\t\t\tthrow new ModifyError(\"Error modifying one or more objects\", totalFailures, successCount, failedKeys);\n\t\t\t\t\treturn keys.length;\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t};\n\tCollection.prototype.delete = function () {\n\t\tvar ctx = this._ctx, range = ctx.range;\n\t\tif (isPlainKeyRange(ctx) &&\n\t\t\t((ctx.isPrimKey && !hangsOnDeleteLargeKeyRange) || range.type === 3 ))\n\t\t{\n\t\t\treturn this._write(function (trans) {\n\t\t\t\tvar primaryKey = ctx.table.core.schema.primaryKey;\n\t\t\t\tvar coreRange = range;\n\t\t\t\treturn ctx.table.core.count({ trans: trans, query: { index: primaryKey, range: coreRange } }).then(function (count) {\n\t\t\t\t\treturn ctx.table.core.mutate({ trans: trans, type: 'deleteRange', range: coreRange })\n\t\t\t\t\t\t.then(function (_a) {\n\t\t\t\t\t\t\tvar failures = _a.failures; _a.lastResult; _a.results; var numFailures = _a.numFailures;\n\t\t\t\t\t\t\tif (numFailures)\n\t\t\t\t\t\t\t\tthrow new ModifyError(\"Could not delete some values\", Object.keys(failures).map(function (pos) { return failures[pos]; }), count - numFailures);\n\t\t\t\t\t\t\treturn count - numFailures;\n\t\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\treturn this.modify(deleteCallback);\n\t};\n\treturn Collection;\n}());\nvar deleteCallback = function (value, ctx) { return ctx.value = null; };\n\nfunction createCollectionConstructor(db) {\n\treturn makeClassConstructor(Collection.prototype, function Collection(whereClause, keyRangeGenerator) {\n\t\tthis.db = db;\n\t\tvar keyRange = AnyRange, error = null;\n\t\tif (keyRangeGenerator)\n\t\t\ttry {\n\t\t\t\tkeyRange = keyRangeGenerator();\n\t\t\t}\n\t\t\tcatch (ex) {\n\t\t\t\terror = ex;\n\t\t\t}\n\t\tvar whereCtx = whereClause._ctx;\n\t\tvar table = whereCtx.table;\n\t\tvar readingHook = table.hook.reading.fire;\n\t\tthis._ctx = {\n\t\t\ttable: table,\n\t\t\tindex: whereCtx.index,\n\t\t\tisPrimKey: (!whereCtx.index || (table.schema.primKey.keyPath && whereCtx.index === table.schema.primKey.name)),\n\t\t\trange: keyRange,\n\t\t\tkeysOnly: false,\n\t\t\tdir: \"next\",\n\t\t\tunique: \"\",\n\t\t\talgorithm: null,\n\t\t\tfilter: null,\n\t\t\treplayFilter: null,\n\t\t\tjustLimit: true,\n\t\t\tisMatch: null,\n\t\t\toffset: 0,\n\t\t\tlimit: Infinity,\n\t\t\terror: error,\n\t\t\tor: whereCtx.or,\n\t\t\tvalueMapper: readingHook !== mirror ? readingHook : null\n\t\t};\n\t});\n}\n\nfunction simpleCompare(a, b) {\n\treturn a < b ? -1 : a === b ? 0 : 1;\n}\nfunction simpleCompareReverse(a, b) {\n\treturn a > b ? -1 : a === b ? 0 : 1;\n}\n\nfunction fail(collectionOrWhereClause, err, T) {\n\tvar collection = collectionOrWhereClause instanceof WhereClause ?\n\t\tnew collectionOrWhereClause.Collection(collectionOrWhereClause) :\n\t\tcollectionOrWhereClause;\n\tcollection._ctx.error = T ? new T(err) : new TypeError(err);\n\treturn collection;\n}\nfunction emptyCollection(whereClause) {\n\treturn new whereClause.Collection(whereClause, function () { return rangeEqual(\"\"); }).limit(0);\n}\nfunction upperFactory(dir) {\n\treturn dir === \"next\" ?\n\t\tfunction (s) { return s.toUpperCase(); } :\n\t\tfunction (s) { return s.toLowerCase(); };\n}\nfunction lowerFactory(dir) {\n\treturn dir === \"next\" ?\n\t\tfunction (s) { return s.toLowerCase(); } :\n\t\tfunction (s) { return s.toUpperCase(); };\n}\nfunction nextCasing(key, lowerKey, upperNeedle, lowerNeedle, cmp, dir) {\n\tvar length = Math.min(key.length, lowerNeedle.length);\n\tvar llp = -1;\n\tfor (var i = 0; i < length; ++i) {\n\t\tvar lwrKeyChar = lowerKey[i];\n\t\tif (lwrKeyChar !== lowerNeedle[i]) {\n\t\t\tif (cmp(key[i], upperNeedle[i]) < 0)\n\t\t\t\treturn key.substr(0, i) + upperNeedle[i] + upperNeedle.substr(i + 1);\n\t\t\tif (cmp(key[i], lowerNeedle[i]) < 0)\n\t\t\t\treturn key.substr(0, i) + lowerNeedle[i] + upperNeedle.substr(i + 1);\n\t\t\tif (llp >= 0)\n\t\t\t\treturn key.substr(0, llp) + lowerKey[llp] + upperNeedle.substr(llp + 1);\n\t\t\treturn null;\n\t\t}\n\t\tif (cmp(key[i], lwrKeyChar) < 0)\n\t\t\tllp = i;\n\t}\n\tif (length < lowerNeedle.length && dir === \"next\")\n\t\treturn key + upperNeedle.substr(key.length);\n\tif (length < key.length && dir === \"prev\")\n\t\treturn key.substr(0, upperNeedle.length);\n\treturn (llp < 0 ? null : key.substr(0, llp) + lowerNeedle[llp] + upperNeedle.substr(llp + 1));\n}\nfunction addIgnoreCaseAlgorithm(whereClause, match, needles, suffix) {\n\tvar upper, lower, compare, upperNeedles, lowerNeedles, direction, nextKeySuffix, needlesLen = needles.length;\n\tif (!needles.every(function (s) { return typeof s === 'string'; })) {\n\t\treturn fail(whereClause, STRING_EXPECTED);\n\t}\n\tfunction initDirection(dir) {\n\t\tupper = upperFactory(dir);\n\t\tlower = lowerFactory(dir);\n\t\tcompare = (dir === \"next\" ? simpleCompare : simpleCompareReverse);\n\t\tvar needleBounds = needles.map(function (needle) {\n\t\t\treturn { lower: lower(needle), upper: upper(needle) };\n\t\t}).sort(function (a, b) {\n\t\t\treturn compare(a.lower, b.lower);\n\t\t});\n\t\tupperNeedles = needleBounds.map(function (nb) { return nb.upper; });\n\t\tlowerNeedles = needleBounds.map(function (nb) { return nb.lower; });\n\t\tdirection = dir;\n\t\tnextKeySuffix = (dir === \"next\" ? \"\" : suffix);\n\t}\n\tinitDirection(\"next\");\n\tvar c = new whereClause.Collection(whereClause, function () { return createRange(upperNeedles[0], lowerNeedles[needlesLen - 1] + suffix); });\n\tc._ondirectionchange = function (direction) {\n\t\tinitDirection(direction);\n\t};\n\tvar firstPossibleNeedle = 0;\n\tc._addAlgorithm(function (cursor, advance, resolve) {\n\t\tvar key = cursor.key;\n\t\tif (typeof key !== 'string')\n\t\t\treturn false;\n\t\tvar lowerKey = lower(key);\n\t\tif (match(lowerKey, lowerNeedles, firstPossibleNeedle)) {\n\t\t\treturn true;\n\t\t}\n\t\telse {\n\t\t\tvar lowestPossibleCasing = null;\n\t\t\tfor (var i = firstPossibleNeedle; i < needlesLen; ++i) {\n\t\t\t\tvar casing = nextCasing(key, lowerKey, upperNeedles[i], lowerNeedles[i], compare, direction);\n\t\t\t\tif (casing === null && lowestPossibleCasing === null)\n\t\t\t\t\tfirstPossibleNeedle = i + 1;\n\t\t\t\telse if (lowestPossibleCasing === null || compare(lowestPossibleCasing, casing) > 0) {\n\t\t\t\t\tlowestPossibleCasing = casing;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lowestPossibleCasing !== null) {\n\t\t\t\tadvance(function () { cursor.continue(lowestPossibleCasing + nextKeySuffix); });\n\t\t\t}\n\t\t\telse {\n\t\t\t\tadvance(resolve);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t});\n\treturn c;\n}\nfunction createRange(lower, upper, lowerOpen, upperOpen) {\n\treturn {\n\t\ttype: 2 ,\n\t\tlower: lower,\n\t\tupper: upper,\n\t\tlowerOpen: lowerOpen,\n\t\tupperOpen: upperOpen\n\t};\n}\nfunction rangeEqual(value) {\n\treturn {\n\t\ttype: 1 ,\n\t\tlower: value,\n\t\tupper: value\n\t};\n}\n\nvar WhereClause =  (function () {\n\tfunction WhereClause() {\n\t}\n\tObject.defineProperty(WhereClause.prototype, \"Collection\", {\n\t\tget: function () {\n\t\t\treturn this._ctx.table.db.Collection;\n\t\t},\n\t\tenumerable: false,\n\t\tconfigurable: true\n\t});\n\tWhereClause.prototype.between = function (lower, upper, includeLower, includeUpper) {\n\t\tincludeLower = includeLower !== false;\n\t\tincludeUpper = includeUpper === true;\n\t\ttry {\n\t\t\tif ((this._cmp(lower, upper) > 0) ||\n\t\t\t\t(this._cmp(lower, upper) === 0 && (includeLower || includeUpper) && !(includeLower && includeUpper)))\n\t\t\t\treturn emptyCollection(this);\n\t\t\treturn new this.Collection(this, function () { return createRange(lower, upper, !includeLower, !includeUpper); });\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\t}\n\t};\n\tWhereClause.prototype.equals = function (value) {\n\t\tif (value == null)\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\treturn new this.Collection(this, function () { return rangeEqual(value); });\n\t};\n\tWhereClause.prototype.above = function (value) {\n\t\tif (value == null)\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\treturn new this.Collection(this, function () { return createRange(value, undefined, true); });\n\t};\n\tWhereClause.prototype.aboveOrEqual = function (value) {\n\t\tif (value == null)\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\treturn new this.Collection(this, function () { return createRange(value, undefined, false); });\n\t};\n\tWhereClause.prototype.below = function (value) {\n\t\tif (value == null)\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\treturn new this.Collection(this, function () { return createRange(undefined, value, false, true); });\n\t};\n\tWhereClause.prototype.belowOrEqual = function (value) {\n\t\tif (value == null)\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\treturn new this.Collection(this, function () { return createRange(undefined, value); });\n\t};\n\tWhereClause.prototype.startsWith = function (str) {\n\t\tif (typeof str !== 'string')\n\t\t\treturn fail(this, STRING_EXPECTED);\n\t\treturn this.between(str, str + maxString, true, true);\n\t};\n\tWhereClause.prototype.startsWithIgnoreCase = function (str) {\n\t\tif (str === \"\")\n\t\t\treturn this.startsWith(str);\n\t\treturn addIgnoreCaseAlgorithm(this, function (x, a) { return x.indexOf(a[0]) === 0; }, [str], maxString);\n\t};\n\tWhereClause.prototype.equalsIgnoreCase = function (str) {\n\t\treturn addIgnoreCaseAlgorithm(this, function (x, a) { return x === a[0]; }, [str], \"\");\n\t};\n\tWhereClause.prototype.anyOfIgnoreCase = function () {\n\t\tvar set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\t\tif (set.length === 0)\n\t\t\treturn emptyCollection(this);\n\t\treturn addIgnoreCaseAlgorithm(this, function (x, a) { return a.indexOf(x) !== -1; }, set, \"\");\n\t};\n\tWhereClause.prototype.startsWithAnyOfIgnoreCase = function () {\n\t\tvar set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\t\tif (set.length === 0)\n\t\t\treturn emptyCollection(this);\n\t\treturn addIgnoreCaseAlgorithm(this, function (x, a) { return a.some(function (n) { return x.indexOf(n) === 0; }); }, set, maxString);\n\t};\n\tWhereClause.prototype.anyOf = function () {\n\t\tvar _this = this;\n\t\tvar set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\t\tvar compare = this._cmp;\n\t\ttry {\n\t\t\tset.sort(compare);\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\t}\n\t\tif (set.length === 0)\n\t\t\treturn emptyCollection(this);\n\t\tvar c = new this.Collection(this, function () { return createRange(set[0], set[set.length - 1]); });\n\t\tc._ondirectionchange = function (direction) {\n\t\t\tcompare = (direction === \"next\" ?\n\t\t\t\t_this._ascending :\n\t\t\t\t_this._descending);\n\t\t\tset.sort(compare);\n\t\t};\n\t\tvar i = 0;\n\t\tc._addAlgorithm(function (cursor, advance, resolve) {\n\t\t\tvar key = cursor.key;\n\t\t\twhile (compare(key, set[i]) > 0) {\n\t\t\t\t++i;\n\t\t\t\tif (i === set.length) {\n\t\t\t\t\tadvance(resolve);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (compare(key, set[i]) === 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tadvance(function () { cursor.continue(set[i]); });\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn c;\n\t};\n\tWhereClause.prototype.notEqual = function (value) {\n\t\treturn this.inAnyRange([[minKey, value], [value, this.db._maxKey]], { includeLowers: false, includeUppers: false });\n\t};\n\tWhereClause.prototype.noneOf = function () {\n\t\tvar set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\t\tif (set.length === 0)\n\t\t\treturn new this.Collection(this);\n\t\ttry {\n\t\t\tset.sort(this._ascending);\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\t}\n\t\tvar ranges = set.reduce(function (res, val) { return res ?\n\t\t\tres.concat([[res[res.length - 1][1], val]]) :\n\t\t\t[[minKey, val]]; }, null);\n\t\tranges.push([set[set.length - 1], this.db._maxKey]);\n\t\treturn this.inAnyRange(ranges, { includeLowers: false, includeUppers: false });\n\t};\n\tWhereClause.prototype.inAnyRange = function (ranges, options) {\n\t\tvar _this = this;\n\t\tvar cmp = this._cmp, ascending = this._ascending, descending = this._descending, min = this._min, max = this._max;\n\t\tif (ranges.length === 0)\n\t\t\treturn emptyCollection(this);\n\t\tif (!ranges.every(function (range) {\n\t\t\treturn range[0] !== undefined &&\n\t\t\t\trange[1] !== undefined &&\n\t\t\t\tascending(range[0], range[1]) <= 0;\n\t\t})) {\n\t\t\treturn fail(this, \"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower\", exceptions.InvalidArgument);\n\t\t}\n\t\tvar includeLowers = !options || options.includeLowers !== false;\n\t\tvar includeUppers = options && options.includeUppers === true;\n\t\tfunction addRange(ranges, newRange) {\n\t\t\tvar i = 0, l = ranges.length;\n\t\t\tfor (; i < l; ++i) {\n\t\t\t\tvar range = ranges[i];\n\t\t\t\tif (cmp(newRange[0], range[1]) < 0 && cmp(newRange[1], range[0]) > 0) {\n\t\t\t\t\trange[0] = min(range[0], newRange[0]);\n\t\t\t\t\trange[1] = max(range[1], newRange[1]);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (i === l)\n\t\t\t\tranges.push(newRange);\n\t\t\treturn ranges;\n\t\t}\n\t\tvar sortDirection = ascending;\n\t\tfunction rangeSorter(a, b) { return sortDirection(a[0], b[0]); }\n\t\tvar set;\n\t\ttry {\n\t\t\tset = ranges.reduce(addRange, []);\n\t\t\tset.sort(rangeSorter);\n\t\t}\n\t\tcatch (ex) {\n\t\t\treturn fail(this, INVALID_KEY_ARGUMENT);\n\t\t}\n\t\tvar rangePos = 0;\n\t\tvar keyIsBeyondCurrentEntry = includeUppers ?\n\t\t\tfunction (key) { return ascending(key, set[rangePos][1]) > 0; } :\n\t\t\tfunction (key) { return ascending(key, set[rangePos][1]) >= 0; };\n\t\tvar keyIsBeforeCurrentEntry = includeLowers ?\n\t\t\tfunction (key) { return descending(key, set[rangePos][0]) > 0; } :\n\t\t\tfunction (key) { return descending(key, set[rangePos][0]) >= 0; };\n\t\tfunction keyWithinCurrentRange(key) {\n\t\t\treturn !keyIsBeyondCurrentEntry(key) && !keyIsBeforeCurrentEntry(key);\n\t\t}\n\t\tvar checkKey = keyIsBeyondCurrentEntry;\n\t\tvar c = new this.Collection(this, function () { return createRange(set[0][0], set[set.length - 1][1], !includeLowers, !includeUppers); });\n\t\tc._ondirectionchange = function (direction) {\n\t\t\tif (direction === \"next\") {\n\t\t\t\tcheckKey = keyIsBeyondCurrentEntry;\n\t\t\t\tsortDirection = ascending;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcheckKey = keyIsBeforeCurrentEntry;\n\t\t\t\tsortDirection = descending;\n\t\t\t}\n\t\t\tset.sort(rangeSorter);\n\t\t};\n\t\tc._addAlgorithm(function (cursor, advance, resolve) {\n\t\t\tvar key = cursor.key;\n\t\t\twhile (checkKey(key)) {\n\t\t\t\t++rangePos;\n\t\t\t\tif (rangePos === set.length) {\n\t\t\t\t\tadvance(resolve);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (keyWithinCurrentRange(key)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\telse if (_this._cmp(key, set[rangePos][1]) === 0 || _this._cmp(key, set[rangePos][0]) === 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tadvance(function () {\n\t\t\t\t\tif (sortDirection === ascending)\n\t\t\t\t\t\tcursor.continue(set[rangePos][0]);\n\t\t\t\t\telse\n\t\t\t\t\t\tcursor.continue(set[rangePos][1]);\n\t\t\t\t});\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t\treturn c;\n\t};\n\tWhereClause.prototype.startsWithAnyOf = function () {\n\t\tvar set = getArrayOf.apply(NO_CHAR_ARRAY, arguments);\n\t\tif (!set.every(function (s) { return typeof s === 'string'; })) {\n\t\t\treturn fail(this, \"startsWithAnyOf() only works with strings\");\n\t\t}\n\t\tif (set.length === 0)\n\t\t\treturn emptyCollection(this);\n\t\treturn this.inAnyRange(set.map(function (str) { return [str, str + maxString]; }));\n\t};\n\treturn WhereClause;\n}());\n\nfunction createWhereClauseConstructor(db) {\n\treturn makeClassConstructor(WhereClause.prototype, function WhereClause(table, index, orCollection) {\n\t\tthis.db = db;\n\t\tthis._ctx = {\n\t\t\ttable: table,\n\t\t\tindex: index === \":id\" ? null : index,\n\t\t\tor: orCollection\n\t\t};\n\t\tvar indexedDB = db._deps.indexedDB;\n\t\tif (!indexedDB)\n\t\t\tthrow new exceptions.MissingAPI();\n\t\tthis._cmp = this._ascending = indexedDB.cmp.bind(indexedDB);\n\t\tthis._descending = function (a, b) { return indexedDB.cmp(b, a); };\n\t\tthis._max = function (a, b) { return indexedDB.cmp(a, b) > 0 ? a : b; };\n\t\tthis._min = function (a, b) { return indexedDB.cmp(a, b) < 0 ? a : b; };\n\t\tthis._IDBKeyRange = db._deps.IDBKeyRange;\n\t});\n}\n\nfunction eventRejectHandler(reject) {\n\treturn wrap(function (event) {\n\t\tpreventDefault(event);\n\t\treject(event.target.error);\n\t\treturn false;\n\t});\n}\nfunction preventDefault(event) {\n\tif (event.stopPropagation)\n\t\tevent.stopPropagation();\n\tif (event.preventDefault)\n\t\tevent.preventDefault();\n}\n\nvar DEXIE_STORAGE_MUTATED_EVENT_NAME = 'storagemutated';\nvar STORAGE_MUTATED_DOM_EVENT_NAME = 'x-storagemutated-1';\nvar globalEvents = Events(null, DEXIE_STORAGE_MUTATED_EVENT_NAME);\n\nvar Transaction =  (function () {\n\tfunction Transaction() {\n\t}\n\tTransaction.prototype._lock = function () {\n\t\tassert(!PSD.global);\n\t\t++this._reculock;\n\t\tif (this._reculock === 1 && !PSD.global)\n\t\t\tPSD.lockOwnerFor = this;\n\t\treturn this;\n\t};\n\tTransaction.prototype._unlock = function () {\n\t\tassert(!PSD.global);\n\t\tif (--this._reculock === 0) {\n\t\t\tif (!PSD.global)\n\t\t\t\tPSD.lockOwnerFor = null;\n\t\t\twhile (this._blockedFuncs.length > 0 && !this._locked()) {\n\t\t\t\tvar fnAndPSD = this._blockedFuncs.shift();\n\t\t\t\ttry {\n\t\t\t\t\tusePSD(fnAndPSD[1], fnAndPSD[0]);\n\t\t\t\t}\n\t\t\t\tcatch (e) { }\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t};\n\tTransaction.prototype._locked = function () {\n\t\treturn this._reculock && PSD.lockOwnerFor !== this;\n\t};\n\tTransaction.prototype.create = function (idbtrans) {\n\t\tvar _this = this;\n\t\tif (!this.mode)\n\t\t\treturn this;\n\t\tvar idbdb = this.db.idbdb;\n\t\tvar dbOpenError = this.db._state.dbOpenError;\n\t\tassert(!this.idbtrans);\n\t\tif (!idbtrans && !idbdb) {\n\t\t\tswitch (dbOpenError && dbOpenError.name) {\n\t\t\t\tcase \"DatabaseClosedError\":\n\t\t\t\t\tthrow new exceptions.DatabaseClosed(dbOpenError);\n\t\t\t\tcase \"MissingAPIError\":\n\t\t\t\t\tthrow new exceptions.MissingAPI(dbOpenError.message, dbOpenError);\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new exceptions.OpenFailed(dbOpenError);\n\t\t\t}\n\t\t}\n\t\tif (!this.active)\n\t\t\tthrow new exceptions.TransactionInactive();\n\t\tassert(this._completion._state === null);\n\t\tidbtrans = this.idbtrans = idbtrans ||\n\t\t\t(this.db.core\n\t\t\t\t? this.db.core.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability })\n\t\t\t\t: idbdb.transaction(this.storeNames, this.mode, { durability: this.chromeTransactionDurability }));\n\t\tidbtrans.onerror = wrap(function (ev) {\n\t\t\tpreventDefault(ev);\n\t\t\t_this._reject(idbtrans.error);\n\t\t});\n\t\tidbtrans.onabort = wrap(function (ev) {\n\t\t\tpreventDefault(ev);\n\t\t\t_this.active && _this._reject(new exceptions.Abort(idbtrans.error));\n\t\t\t_this.active = false;\n\t\t\t_this.on(\"abort\").fire(ev);\n\t\t});\n\t\tidbtrans.oncomplete = wrap(function () {\n\t\t\t_this.active = false;\n\t\t\t_this._resolve();\n\t\t\tif ('mutatedParts' in idbtrans) {\n\t\t\t\tglobalEvents.storagemutated.fire(idbtrans[\"mutatedParts\"]);\n\t\t\t}\n\t\t});\n\t\treturn this;\n\t};\n\tTransaction.prototype._promise = function (mode, fn, bWriteLock) {\n\t\tvar _this = this;\n\t\tif (mode === 'readwrite' && this.mode !== 'readwrite')\n\t\t\treturn rejection(new exceptions.ReadOnly(\"Transaction is readonly\"));\n\t\tif (!this.active)\n\t\t\treturn rejection(new exceptions.TransactionInactive());\n\t\tif (this._locked()) {\n\t\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\t\t_this._blockedFuncs.push([function () {\n\t\t\t\t\t_this._promise(mode, fn, bWriteLock).then(resolve, reject);\n\t\t\t\t}, PSD]);\n\t\t\t});\n\t\t}\n\t\telse if (bWriteLock) {\n\t\t\treturn newScope(function () {\n\t\t\t\tvar p = new DexiePromise(function (resolve, reject) {\n\t\t\t\t\t_this._lock();\n\t\t\t\t\tvar rv = fn(resolve, reject, _this);\n\t\t\t\t\tif (rv && rv.then)\n\t\t\t\t\t\trv.then(resolve, reject);\n\t\t\t\t});\n\t\t\t\tp.finally(function () { return _this._unlock(); });\n\t\t\t\tp._lib = true;\n\t\t\t\treturn p;\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tvar p = new DexiePromise(function (resolve, reject) {\n\t\t\t\tvar rv = fn(resolve, reject, _this);\n\t\t\t\tif (rv && rv.then)\n\t\t\t\t\trv.then(resolve, reject);\n\t\t\t});\n\t\t\tp._lib = true;\n\t\t\treturn p;\n\t\t}\n\t};\n\tTransaction.prototype._root = function () {\n\t\treturn this.parent ? this.parent._root() : this;\n\t};\n\tTransaction.prototype.waitFor = function (promiseLike) {\n\t\tvar root = this._root();\n\t\tvar promise = DexiePromise.resolve(promiseLike);\n\t\tif (root._waitingFor) {\n\t\t\troot._waitingFor = root._waitingFor.then(function () { return promise; });\n\t\t}\n\t\telse {\n\t\t\troot._waitingFor = promise;\n\t\t\troot._waitingQueue = [];\n\t\t\tvar store = root.idbtrans.objectStore(root.storeNames[0]);\n\t\t\t(function spin() {\n\t\t\t\t++root._spinCount;\n\t\t\t\twhile (root._waitingQueue.length)\n\t\t\t\t\t(root._waitingQueue.shift())();\n\t\t\t\tif (root._waitingFor)\n\t\t\t\t\tstore.get(-Infinity).onsuccess = spin;\n\t\t\t}());\n\t\t}\n\t\tvar currentWaitPromise = root._waitingFor;\n\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\tpromise.then(function (res) { return root._waitingQueue.push(wrap(resolve.bind(null, res))); }, function (err) { return root._waitingQueue.push(wrap(reject.bind(null, err))); }).finally(function () {\n\t\t\t\tif (root._waitingFor === currentWaitPromise) {\n\t\t\t\t\troot._waitingFor = null;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t};\n\tTransaction.prototype.abort = function () {\n\t\tif (this.active) {\n\t\t\tthis.active = false;\n\t\t\tif (this.idbtrans)\n\t\t\t\tthis.idbtrans.abort();\n\t\t\tthis._reject(new exceptions.Abort());\n\t\t}\n\t};\n\tTransaction.prototype.table = function (tableName) {\n\t\tvar memoizedTables = (this._memoizedTables || (this._memoizedTables = {}));\n\t\tif (hasOwn(memoizedTables, tableName))\n\t\t\treturn memoizedTables[tableName];\n\t\tvar tableSchema = this.schema[tableName];\n\t\tif (!tableSchema) {\n\t\t\tthrow new exceptions.NotFound(\"Table \" + tableName + \" not part of transaction\");\n\t\t}\n\t\tvar transactionBoundTable = new this.db.Table(tableName, tableSchema, this);\n\t\ttransactionBoundTable.core = this.db.core.table(tableName);\n\t\tmemoizedTables[tableName] = transactionBoundTable;\n\t\treturn transactionBoundTable;\n\t};\n\treturn Transaction;\n}());\n\nfunction createTransactionConstructor(db) {\n\treturn makeClassConstructor(Transaction.prototype, function Transaction(mode, storeNames, dbschema, chromeTransactionDurability, parent) {\n\t\tvar _this = this;\n\t\tthis.db = db;\n\t\tthis.mode = mode;\n\t\tthis.storeNames = storeNames;\n\t\tthis.schema = dbschema;\n\t\tthis.chromeTransactionDurability = chromeTransactionDurability;\n\t\tthis.idbtrans = null;\n\t\tthis.on = Events(this, \"complete\", \"error\", \"abort\");\n\t\tthis.parent = parent || null;\n\t\tthis.active = true;\n\t\tthis._reculock = 0;\n\t\tthis._blockedFuncs = [];\n\t\tthis._resolve = null;\n\t\tthis._reject = null;\n\t\tthis._waitingFor = null;\n\t\tthis._waitingQueue = null;\n\t\tthis._spinCount = 0;\n\t\tthis._completion = new DexiePromise(function (resolve, reject) {\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._reject = reject;\n\t\t});\n\t\tthis._completion.then(function () {\n\t\t\t_this.active = false;\n\t\t\t_this.on.complete.fire();\n\t\t}, function (e) {\n\t\t\tvar wasActive = _this.active;\n\t\t\t_this.active = false;\n\t\t\t_this.on.error.fire(e);\n\t\t\t_this.parent ?\n\t\t\t\t_this.parent._reject(e) :\n\t\t\t\twasActive && _this.idbtrans && _this.idbtrans.abort();\n\t\t\treturn rejection(e);\n\t\t});\n\t});\n}\n\nfunction createIndexSpec(name, keyPath, unique, multi, auto, compound, isPrimKey) {\n\treturn {\n\t\tname: name,\n\t\tkeyPath: keyPath,\n\t\tunique: unique,\n\t\tmulti: multi,\n\t\tauto: auto,\n\t\tcompound: compound,\n\t\tsrc: (unique && !isPrimKey ? '&' : '') + (multi ? '*' : '') + (auto ? \"++\" : \"\") + nameFromKeyPath(keyPath)\n\t};\n}\nfunction nameFromKeyPath(keyPath) {\n\treturn typeof keyPath === 'string' ?\n\t\tkeyPath :\n\t\tkeyPath ? ('[' + [].join.call(keyPath, '+') + ']') : \"\";\n}\n\nfunction createTableSchema(name, primKey, indexes) {\n\treturn {\n\t\tname: name,\n\t\tprimKey: primKey,\n\t\tindexes: indexes,\n\t\tmappedClass: null,\n\t\tidxByName: arrayToObject(indexes, function (index) { return [index.name, index]; })\n\t};\n}\n\nfunction safariMultiStoreFix(storeNames) {\n\treturn storeNames.length === 1 ? storeNames[0] : storeNames;\n}\nvar getMaxKey = function (IdbKeyRange) {\n\ttry {\n\t\tIdbKeyRange.only([[]]);\n\t\tgetMaxKey = function () { return [[]]; };\n\t\treturn [[]];\n\t}\n\tcatch (e) {\n\t\tgetMaxKey = function () { return maxString; };\n\t\treturn maxString;\n\t}\n};\n\nfunction getKeyExtractor(keyPath) {\n\tif (keyPath == null) {\n\t\treturn function () { return undefined; };\n\t}\n\telse if (typeof keyPath === 'string') {\n\t\treturn getSinglePathKeyExtractor(keyPath);\n\t}\n\telse {\n\t\treturn function (obj) { return getByKeyPath(obj, keyPath); };\n\t}\n}\nfunction getSinglePathKeyExtractor(keyPath) {\n\tvar split = keyPath.split('.');\n\tif (split.length === 1) {\n\t\treturn function (obj) { return obj[keyPath]; };\n\t}\n\telse {\n\t\treturn function (obj) { return getByKeyPath(obj, keyPath); };\n\t}\n}\n\nfunction arrayify(arrayLike) {\n\treturn [].slice.call(arrayLike);\n}\nvar _id_counter = 0;\nfunction getKeyPathAlias(keyPath) {\n\treturn keyPath == null ?\n\t\t\":id\" :\n\t\ttypeof keyPath === 'string' ?\n\t\t\tkeyPath :\n\t\t\t\"[\" + keyPath.join('+') + \"]\";\n}\nfunction createDBCore(db, IdbKeyRange, tmpTrans) {\n\tfunction extractSchema(db, trans) {\n\t\tvar tables = arrayify(db.objectStoreNames);\n\t\treturn {\n\t\t\tschema: {\n\t\t\t\tname: db.name,\n\t\t\t\ttables: tables.map(function (table) { return trans.objectStore(table); }).map(function (store) {\n\t\t\t\t\tvar keyPath = store.keyPath, autoIncrement = store.autoIncrement;\n\t\t\t\t\tvar compound = isArray(keyPath);\n\t\t\t\t\tvar outbound = keyPath == null;\n\t\t\t\t\tvar indexByKeyPath = {};\n\t\t\t\t\tvar result = {\n\t\t\t\t\t\tname: store.name,\n\t\t\t\t\t\tprimaryKey: {\n\t\t\t\t\t\t\tname: null,\n\t\t\t\t\t\t\tisPrimaryKey: true,\n\t\t\t\t\t\t\toutbound: outbound,\n\t\t\t\t\t\t\tcompound: compound,\n\t\t\t\t\t\t\tkeyPath: keyPath,\n\t\t\t\t\t\t\tautoIncrement: autoIncrement,\n\t\t\t\t\t\t\tunique: true,\n\t\t\t\t\t\t\textractKey: getKeyExtractor(keyPath)\n\t\t\t\t\t\t},\n\t\t\t\t\t\tindexes: arrayify(store.indexNames).map(function (indexName) { return store.index(indexName); })\n\t\t\t\t\t\t\t.map(function (index) {\n\t\t\t\t\t\t\t\tvar name = index.name, unique = index.unique, multiEntry = index.multiEntry, keyPath = index.keyPath;\n\t\t\t\t\t\t\t\tvar compound = isArray(keyPath);\n\t\t\t\t\t\t\t\tvar result = {\n\t\t\t\t\t\t\t\t\tname: name,\n\t\t\t\t\t\t\t\t\tcompound: compound,\n\t\t\t\t\t\t\t\t\tkeyPath: keyPath,\n\t\t\t\t\t\t\t\t\tunique: unique,\n\t\t\t\t\t\t\t\t\tmultiEntry: multiEntry,\n\t\t\t\t\t\t\t\t\textractKey: getKeyExtractor(keyPath)\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tindexByKeyPath[getKeyPathAlias(keyPath)] = result;\n\t\t\t\t\t\t\t\treturn result;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\tgetIndexByKeyPath: function (keyPath) { return indexByKeyPath[getKeyPathAlias(keyPath)]; }\n\t\t\t\t\t};\n\t\t\t\t\tindexByKeyPath[\":id\"] = result.primaryKey;\n\t\t\t\t\tif (keyPath != null) {\n\t\t\t\t\t\tindexByKeyPath[getKeyPathAlias(keyPath)] = result.primaryKey;\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t})\n\t\t\t},\n\t\t\thasGetAll: tables.length > 0 && ('getAll' in trans.objectStore(tables[0])) &&\n\t\t\t\t!(typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n\t\t\t\t\t!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n\t\t\t\t\t[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604)\n\t\t};\n\t}\n\tfunction makeIDBKeyRange(range) {\n\t\tif (range.type === 3 )\n\t\t\treturn null;\n\t\tif (range.type === 4 )\n\t\t\tthrow new Error(\"Cannot convert never type to IDBKeyRange\");\n\t\tvar lower = range.lower, upper = range.upper, lowerOpen = range.lowerOpen, upperOpen = range.upperOpen;\n\t\tvar idbRange = lower === undefined ?\n\t\t\tupper === undefined ?\n\t\t\t\tnull :\n\t\t\t\tIdbKeyRange.upperBound(upper, !!upperOpen) :\n\t\t\tupper === undefined ?\n\t\t\t\tIdbKeyRange.lowerBound(lower, !!lowerOpen) :\n\t\t\t\tIdbKeyRange.bound(lower, upper, !!lowerOpen, !!upperOpen);\n\t\treturn idbRange;\n\t}\n\tfunction createDbCoreTable(tableSchema) {\n\t\tvar tableName = tableSchema.name;\n\t\tfunction mutate(_a) {\n\t\t\tvar trans = _a.trans, type = _a.type, keys = _a.keys, values = _a.values, range = _a.range;\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tresolve = wrap(resolve);\n\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\tvar outbound = store.keyPath == null;\n\t\t\t\tvar isAddOrPut = type === \"put\" || type === \"add\";\n\t\t\t\tif (!isAddOrPut && type !== 'delete' && type !== 'deleteRange')\n\t\t\t\t\tthrow new Error(\"Invalid operation type: \" + type);\n\t\t\t\tvar length = (keys || values || { length: 1 }).length;\n\t\t\t\tif (keys && values && keys.length !== values.length) {\n\t\t\t\t\tthrow new Error(\"Given keys array must have same length as given values array.\");\n\t\t\t\t}\n\t\t\t\tif (length === 0)\n\t\t\t\t\treturn resolve({ numFailures: 0, failures: {}, results: [], lastResult: undefined });\n\t\t\t\tvar req;\n\t\t\t\tvar reqs = [];\n\t\t\t\tvar failures = [];\n\t\t\t\tvar numFailures = 0;\n\t\t\t\tvar errorHandler = function (event) {\n\t\t\t\t\t++numFailures;\n\t\t\t\t\tpreventDefault(event);\n\t\t\t\t};\n\t\t\t\tif (type === 'deleteRange') {\n\t\t\t\t\tif (range.type === 4 )\n\t\t\t\t\t\treturn resolve({ numFailures: numFailures, failures: failures, results: [], lastResult: undefined });\n\t\t\t\t\tif (range.type === 3 )\n\t\t\t\t\t\treqs.push(req = store.clear());\n\t\t\t\t\telse\n\t\t\t\t\t\treqs.push(req = store.delete(makeIDBKeyRange(range)));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar _a = isAddOrPut ?\n\t\t\t\t\t\toutbound ?\n\t\t\t\t\t\t\t[values, keys] :\n\t\t\t\t\t\t\t[values, null] :\n\t\t\t\t\t\t[keys, null], args1 = _a[0], args2 = _a[1];\n\t\t\t\t\tif (isAddOrPut) {\n\t\t\t\t\t\tfor (var i = 0; i < length; ++i) {\n\t\t\t\t\t\t\treqs.push(req = (args2 && args2[i] !== undefined ?\n\t\t\t\t\t\t\t\tstore[type](args1[i], args2[i]) :\n\t\t\t\t\t\t\t\tstore[type](args1[i])));\n\t\t\t\t\t\t\treq.onerror = errorHandler;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tfor (var i = 0; i < length; ++i) {\n\t\t\t\t\t\t\treqs.push(req = store[type](args1[i]));\n\t\t\t\t\t\t\treq.onerror = errorHandler;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar done = function (event) {\n\t\t\t\t\tvar lastResult = event.target.result;\n\t\t\t\t\treqs.forEach(function (req, i) { return req.error != null && (failures[i] = req.error); });\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tnumFailures: numFailures,\n\t\t\t\t\t\tfailures: failures,\n\t\t\t\t\t\tresults: type === \"delete\" ? keys : reqs.map(function (req) { return req.result; }),\n\t\t\t\t\t\tlastResult: lastResult\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\treq.onerror = function (event) {\n\t\t\t\t\terrorHandler(event);\n\t\t\t\t\tdone(event);\n\t\t\t\t};\n\t\t\t\treq.onsuccess = done;\n\t\t\t});\n\t\t}\n\t\tfunction openCursor(_a) {\n\t\t\tvar trans = _a.trans, values = _a.values, query = _a.query, reverse = _a.reverse, unique = _a.unique;\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tresolve = wrap(resolve);\n\t\t\t\tvar index = query.index, range = query.range;\n\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\tvar source = index.isPrimaryKey ?\n\t\t\t\t\tstore :\n\t\t\t\t\tstore.index(index.name);\n\t\t\t\tvar direction = reverse ?\n\t\t\t\t\tunique ?\n\t\t\t\t\t\t\"prevunique\" :\n\t\t\t\t\t\t\"prev\" :\n\t\t\t\t\tunique ?\n\t\t\t\t\t\t\"nextunique\" :\n\t\t\t\t\t\t\"next\";\n\t\t\t\tvar req = values || !('openKeyCursor' in source) ?\n\t\t\t\t\tsource.openCursor(makeIDBKeyRange(range), direction) :\n\t\t\t\t\tsource.openKeyCursor(makeIDBKeyRange(range), direction);\n\t\t\t\treq.onerror = eventRejectHandler(reject);\n\t\t\t\treq.onsuccess = wrap(function (ev) {\n\t\t\t\t\tvar cursor = req.result;\n\t\t\t\t\tif (!cursor) {\n\t\t\t\t\t\tresolve(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcursor.___id = ++_id_counter;\n\t\t\t\t\tcursor.done = false;\n\t\t\t\t\tvar _cursorContinue = cursor.continue.bind(cursor);\n\t\t\t\t\tvar _cursorContinuePrimaryKey = cursor.continuePrimaryKey;\n\t\t\t\t\tif (_cursorContinuePrimaryKey)\n\t\t\t\t\t\t_cursorContinuePrimaryKey = _cursorContinuePrimaryKey.bind(cursor);\n\t\t\t\t\tvar _cursorAdvance = cursor.advance.bind(cursor);\n\t\t\t\t\tvar doThrowCursorIsNotStarted = function () { throw new Error(\"Cursor not started\"); };\n\t\t\t\t\tvar doThrowCursorIsStopped = function () { throw new Error(\"Cursor not stopped\"); };\n\t\t\t\t\tcursor.trans = trans;\n\t\t\t\t\tcursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsNotStarted;\n\t\t\t\t\tcursor.fail = wrap(reject);\n\t\t\t\t\tcursor.next = function () {\n\t\t\t\t\t\tvar _this = this;\n\t\t\t\t\t\tvar gotOne = 1;\n\t\t\t\t\t\treturn this.start(function () { return gotOne-- ? _this.continue() : _this.stop(); }).then(function () { return _this; });\n\t\t\t\t\t};\n\t\t\t\t\tcursor.start = function (callback) {\n\t\t\t\t\t\tvar iterationPromise = new Promise(function (resolveIteration, rejectIteration) {\n\t\t\t\t\t\t\tresolveIteration = wrap(resolveIteration);\n\t\t\t\t\t\t\treq.onerror = eventRejectHandler(rejectIteration);\n\t\t\t\t\t\t\tcursor.fail = rejectIteration;\n\t\t\t\t\t\t\tcursor.stop = function (value) {\n\t\t\t\t\t\t\t\tcursor.stop = cursor.continue = cursor.continuePrimaryKey = cursor.advance = doThrowCursorIsStopped;\n\t\t\t\t\t\t\t\tresolveIteration(value);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvar guardedCallback = function () {\n\t\t\t\t\t\t\tif (req.result) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcatch (err) {\n\t\t\t\t\t\t\t\t\tcursor.fail(err);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tcursor.done = true;\n\t\t\t\t\t\t\t\tcursor.start = function () { throw new Error(\"Cursor behind last entry\"); };\n\t\t\t\t\t\t\t\tcursor.stop();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\treq.onsuccess = wrap(function (ev) {\n\t\t\t\t\t\t\treq.onsuccess = guardedCallback;\n\t\t\t\t\t\t\tguardedCallback();\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcursor.continue = _cursorContinue;\n\t\t\t\t\t\tcursor.continuePrimaryKey = _cursorContinuePrimaryKey;\n\t\t\t\t\t\tcursor.advance = _cursorAdvance;\n\t\t\t\t\t\tguardedCallback();\n\t\t\t\t\t\treturn iterationPromise;\n\t\t\t\t\t};\n\t\t\t\t\tresolve(cursor);\n\t\t\t\t}, reject);\n\t\t\t});\n\t\t}\n\t\tfunction query(hasGetAll) {\n\t\t\treturn function (request) {\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tresolve = wrap(resolve);\n\t\t\t\t\tvar trans = request.trans, values = request.values, limit = request.limit, query = request.query;\n\t\t\t\t\tvar nonInfinitLimit = limit === Infinity ? undefined : limit;\n\t\t\t\t\tvar index = query.index, range = query.range;\n\t\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\t\tvar source = index.isPrimaryKey ? store : store.index(index.name);\n\t\t\t\t\tvar idbKeyRange = makeIDBKeyRange(range);\n\t\t\t\t\tif (limit === 0)\n\t\t\t\t\t\treturn resolve({ result: [] });\n\t\t\t\t\tif (hasGetAll) {\n\t\t\t\t\t\tvar req = values ?\n\t\t\t\t\t\t\tsource.getAll(idbKeyRange, nonInfinitLimit) :\n\t\t\t\t\t\t\tsource.getAllKeys(idbKeyRange, nonInfinitLimit);\n\t\t\t\t\t\treq.onsuccess = function (event) { return resolve({ result: event.target.result }); };\n\t\t\t\t\t\treq.onerror = eventRejectHandler(reject);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tvar count_1 = 0;\n\t\t\t\t\t\tvar req_1 = values || !('openKeyCursor' in source) ?\n\t\t\t\t\t\t\tsource.openCursor(idbKeyRange) :\n\t\t\t\t\t\t\tsource.openKeyCursor(idbKeyRange);\n\t\t\t\t\t\tvar result_1 = [];\n\t\t\t\t\t\treq_1.onsuccess = function (event) {\n\t\t\t\t\t\t\tvar cursor = req_1.result;\n\t\t\t\t\t\t\tif (!cursor)\n\t\t\t\t\t\t\t\treturn resolve({ result: result_1 });\n\t\t\t\t\t\t\tresult_1.push(values ? cursor.value : cursor.primaryKey);\n\t\t\t\t\t\t\tif (++count_1 === limit)\n\t\t\t\t\t\t\t\treturn resolve({ result: result_1 });\n\t\t\t\t\t\t\tcursor.continue();\n\t\t\t\t\t\t};\n\t\t\t\t\t\treq_1.onerror = eventRejectHandler(reject);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tname: tableName,\n\t\t\tschema: tableSchema,\n\t\t\tmutate: mutate,\n\t\t\tgetMany: function (_a) {\n\t\t\t\tvar trans = _a.trans, keys = _a.keys;\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tresolve = wrap(resolve);\n\t\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\t\tvar length = keys.length;\n\t\t\t\t\tvar result = new Array(length);\n\t\t\t\t\tvar keyCount = 0;\n\t\t\t\t\tvar callbackCount = 0;\n\t\t\t\t\tvar req;\n\t\t\t\t\tvar successHandler = function (event) {\n\t\t\t\t\t\tvar req = event.target;\n\t\t\t\t\t\tif ((result[req._pos] = req.result) != null)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\tif (++callbackCount === keyCount)\n\t\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t};\n\t\t\t\t\tvar errorHandler = eventRejectHandler(reject);\n\t\t\t\t\tfor (var i = 0; i < length; ++i) {\n\t\t\t\t\t\tvar key = keys[i];\n\t\t\t\t\t\tif (key != null) {\n\t\t\t\t\t\t\treq = store.get(keys[i]);\n\t\t\t\t\t\t\treq._pos = i;\n\t\t\t\t\t\t\treq.onsuccess = successHandler;\n\t\t\t\t\t\t\treq.onerror = errorHandler;\n\t\t\t\t\t\t\t++keyCount;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (keyCount === 0)\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t});\n\t\t\t},\n\t\t\tget: function (_a) {\n\t\t\t\tvar trans = _a.trans, key = _a.key;\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tresolve = wrap(resolve);\n\t\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\t\tvar req = store.get(key);\n\t\t\t\t\treq.onsuccess = function (event) { return resolve(event.target.result); };\n\t\t\t\t\treq.onerror = eventRejectHandler(reject);\n\t\t\t\t});\n\t\t\t},\n\t\t\tquery: query(hasGetAll),\n\t\t\topenCursor: openCursor,\n\t\t\tcount: function (_a) {\n\t\t\t\tvar query = _a.query, trans = _a.trans;\n\t\t\t\tvar index = query.index, range = query.range;\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\tvar store = trans.objectStore(tableName);\n\t\t\t\t\tvar source = index.isPrimaryKey ? store : store.index(index.name);\n\t\t\t\t\tvar idbKeyRange = makeIDBKeyRange(range);\n\t\t\t\t\tvar req = idbKeyRange ? source.count(idbKeyRange) : source.count();\n\t\t\t\t\treq.onsuccess = wrap(function (ev) { return resolve(ev.target.result); });\n\t\t\t\t\treq.onerror = eventRejectHandler(reject);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n\tvar _a = extractSchema(db, tmpTrans), schema = _a.schema, hasGetAll = _a.hasGetAll;\n\tvar tables = schema.tables.map(function (tableSchema) { return createDbCoreTable(tableSchema); });\n\tvar tableMap = {};\n\ttables.forEach(function (table) { return tableMap[table.name] = table; });\n\treturn {\n\t\tstack: \"dbcore\",\n\t\ttransaction: db.transaction.bind(db),\n\t\ttable: function (name) {\n\t\t\tvar result = tableMap[name];\n\t\t\tif (!result)\n\t\t\t\tthrow new Error(\"Table '\" + name + \"' not found\");\n\t\t\treturn tableMap[name];\n\t\t},\n\t\tMIN_KEY: -Infinity,\n\t\tMAX_KEY: getMaxKey(IdbKeyRange),\n\t\tschema: schema\n\t};\n}\n\nfunction createMiddlewareStack(stackImpl, middlewares) {\n\treturn middlewares.reduce(function (down, _a) {\n\t\tvar create = _a.create;\n\t\treturn (__assign(__assign({}, down), create(down)));\n\t}, stackImpl);\n}\nfunction createMiddlewareStacks(middlewares, idbdb, _a, tmpTrans) {\n\tvar IDBKeyRange = _a.IDBKeyRange; _a.indexedDB;\n\tvar dbcore = createMiddlewareStack(createDBCore(idbdb, IDBKeyRange, tmpTrans), middlewares.dbcore);\n\treturn {\n\t\tdbcore: dbcore\n\t};\n}\nfunction generateMiddlewareStacks(_a, tmpTrans) {\n\tvar db = _a._novip;\n\tvar idbdb = tmpTrans.db;\n\tvar stacks = createMiddlewareStacks(db._middlewares, idbdb, db._deps, tmpTrans);\n\tdb.core = stacks.dbcore;\n\tdb.tables.forEach(function (table) {\n\t\tvar tableName = table.name;\n\t\tif (db.core.schema.tables.some(function (tbl) { return tbl.name === tableName; })) {\n\t\t\ttable.core = db.core.table(tableName);\n\t\t\tif (db[tableName] instanceof db.Table) {\n\t\t\t\tdb[tableName].core = table.core;\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction setApiOnPlace(_a, objs, tableNames, dbschema) {\n\tvar db = _a._novip;\n\ttableNames.forEach(function (tableName) {\n\t\tvar schema = dbschema[tableName];\n\t\tobjs.forEach(function (obj) {\n\t\t\tvar propDesc = getPropertyDescriptor(obj, tableName);\n\t\t\tif (!propDesc || (\"value\" in propDesc && propDesc.value === undefined)) {\n\t\t\t\tif (obj === db.Transaction.prototype || obj instanceof db.Transaction) {\n\t\t\t\t\tsetProp(obj, tableName, {\n\t\t\t\t\t\tget: function () { return this.table(tableName); },\n\t\t\t\t\t\tset: function (value) {\n\t\t\t\t\t\t\tdefineProperty(this, tableName, { value: value, writable: true, configurable: true, enumerable: true });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tobj[tableName] = new db.Table(tableName, schema);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\nfunction removeTablesApi(_a, objs) {\n\tvar db = _a._novip;\n\tobjs.forEach(function (obj) {\n\t\tfor (var key in obj) {\n\t\t\tif (obj[key] instanceof db.Table)\n\t\t\t\tdelete obj[key];\n\t\t}\n\t});\n}\nfunction lowerVersionFirst(a, b) {\n\treturn a._cfg.version - b._cfg.version;\n}\nfunction runUpgraders(db, oldVersion, idbUpgradeTrans, reject) {\n\tvar globalSchema = db._dbSchema;\n\tvar trans = db._createTransaction('readwrite', db._storeNames, globalSchema);\n\ttrans.create(idbUpgradeTrans);\n\ttrans._completion.catch(reject);\n\tvar rejectTransaction = trans._reject.bind(trans);\n\tvar transless = PSD.transless || PSD;\n\tnewScope(function () {\n\t\tPSD.trans = trans;\n\t\tPSD.transless = transless;\n\t\tif (oldVersion === 0) {\n\t\t\tkeys(globalSchema).forEach(function (tableName) {\n\t\t\t\tcreateTable(idbUpgradeTrans, tableName, globalSchema[tableName].primKey, globalSchema[tableName].indexes);\n\t\t\t});\n\t\t\tgenerateMiddlewareStacks(db, idbUpgradeTrans);\n\t\t\tDexiePromise.follow(function () { return db.on.populate.fire(trans); }).catch(rejectTransaction);\n\t\t}\n\t\telse\n\t\t\tupdateTablesAndIndexes(db, oldVersion, trans, idbUpgradeTrans).catch(rejectTransaction);\n\t});\n}\nfunction updateTablesAndIndexes(_a, oldVersion, trans, idbUpgradeTrans) {\n\tvar db = _a._novip;\n\tvar queue = [];\n\tvar versions = db._versions;\n\tvar globalSchema = db._dbSchema = buildGlobalSchema(db, db.idbdb, idbUpgradeTrans);\n\tvar anyContentUpgraderHasRun = false;\n\tvar versToRun = versions.filter(function (v) { return v._cfg.version >= oldVersion; });\n\tversToRun.forEach(function (version) {\n\t\tqueue.push(function () {\n\t\t\tvar oldSchema = globalSchema;\n\t\t\tvar newSchema = version._cfg.dbschema;\n\t\t\tadjustToExistingIndexNames(db, oldSchema, idbUpgradeTrans);\n\t\t\tadjustToExistingIndexNames(db, newSchema, idbUpgradeTrans);\n\t\t\tglobalSchema = db._dbSchema = newSchema;\n\t\t\tvar diff = getSchemaDiff(oldSchema, newSchema);\n\t\t\tdiff.add.forEach(function (tuple) {\n\t\t\t\tcreateTable(idbUpgradeTrans, tuple[0], tuple[1].primKey, tuple[1].indexes);\n\t\t\t});\n\t\t\tdiff.change.forEach(function (change) {\n\t\t\t\tif (change.recreate) {\n\t\t\t\t\tthrow new exceptions.Upgrade(\"Not yet support for changing primary key\");\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar store_1 = idbUpgradeTrans.objectStore(change.name);\n\t\t\t\t\tchange.add.forEach(function (idx) { return addIndex(store_1, idx); });\n\t\t\t\t\tchange.change.forEach(function (idx) {\n\t\t\t\t\t\tstore_1.deleteIndex(idx.name);\n\t\t\t\t\t\taddIndex(store_1, idx);\n\t\t\t\t\t});\n\t\t\t\t\tchange.del.forEach(function (idxName) { return store_1.deleteIndex(idxName); });\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar contentUpgrade = version._cfg.contentUpgrade;\n\t\t\tif (contentUpgrade && version._cfg.version > oldVersion) {\n\t\t\t\tgenerateMiddlewareStacks(db, idbUpgradeTrans);\n\t\t\t\ttrans._memoizedTables = {};\n\t\t\t\tanyContentUpgraderHasRun = true;\n\t\t\t\tvar upgradeSchema_1 = shallowClone(newSchema);\n\t\t\t\tdiff.del.forEach(function (table) {\n\t\t\t\t\tupgradeSchema_1[table] = oldSchema[table];\n\t\t\t\t});\n\t\t\t\tremoveTablesApi(db, [db.Transaction.prototype]);\n\t\t\t\tsetApiOnPlace(db, [db.Transaction.prototype], keys(upgradeSchema_1), upgradeSchema_1);\n\t\t\t\ttrans.schema = upgradeSchema_1;\n\t\t\t\tvar contentUpgradeIsAsync_1 = isAsyncFunction(contentUpgrade);\n\t\t\t\tif (contentUpgradeIsAsync_1) {\n\t\t\t\t\tincrementExpectedAwaits();\n\t\t\t\t}\n\t\t\t\tvar returnValue_1;\n\t\t\t\tvar promiseFollowed = DexiePromise.follow(function () {\n\t\t\t\t\treturnValue_1 = contentUpgrade(trans);\n\t\t\t\t\tif (returnValue_1) {\n\t\t\t\t\t\tif (contentUpgradeIsAsync_1) {\n\t\t\t\t\t\t\tvar decrementor = decrementExpectedAwaits.bind(null, null);\n\t\t\t\t\t\t\treturnValue_1.then(decrementor, decrementor);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn (returnValue_1 && typeof returnValue_1.then === 'function' ?\n\t\t\t\t\tDexiePromise.resolve(returnValue_1) : promiseFollowed.then(function () { return returnValue_1; }));\n\t\t\t}\n\t\t});\n\t\tqueue.push(function (idbtrans) {\n\t\t\tif (!anyContentUpgraderHasRun || !hasIEDeleteObjectStoreBug) {\n\t\t\t\tvar newSchema = version._cfg.dbschema;\n\t\t\t\tdeleteRemovedTables(newSchema, idbtrans);\n\t\t\t}\n\t\t\tremoveTablesApi(db, [db.Transaction.prototype]);\n\t\t\tsetApiOnPlace(db, [db.Transaction.prototype], db._storeNames, db._dbSchema);\n\t\t\ttrans.schema = db._dbSchema;\n\t\t});\n\t});\n\tfunction runQueue() {\n\t\treturn queue.length ? DexiePromise.resolve(queue.shift()(trans.idbtrans)).then(runQueue) :\n\t\t\tDexiePromise.resolve();\n\t}\n\treturn runQueue().then(function () {\n\t\tcreateMissingTables(globalSchema, idbUpgradeTrans);\n\t});\n}\nfunction getSchemaDiff(oldSchema, newSchema) {\n\tvar diff = {\n\t\tdel: [],\n\t\tadd: [],\n\t\tchange: []\n\t};\n\tvar table;\n\tfor (table in oldSchema) {\n\t\tif (!newSchema[table])\n\t\t\tdiff.del.push(table);\n\t}\n\tfor (table in newSchema) {\n\t\tvar oldDef = oldSchema[table], newDef = newSchema[table];\n\t\tif (!oldDef) {\n\t\t\tdiff.add.push([table, newDef]);\n\t\t}\n\t\telse {\n\t\t\tvar change = {\n\t\t\t\tname: table,\n\t\t\t\tdef: newDef,\n\t\t\t\trecreate: false,\n\t\t\t\tdel: [],\n\t\t\t\tadd: [],\n\t\t\t\tchange: []\n\t\t\t};\n\t\t\tif ((\n\t\t\t\t\t'' + (oldDef.primKey.keyPath || '')) !== ('' + (newDef.primKey.keyPath || '')) ||\n\t\t\t\t(oldDef.primKey.auto !== newDef.primKey.auto && !isIEOrEdge))\n\t\t\t{\n\t\t\t\tchange.recreate = true;\n\t\t\t\tdiff.change.push(change);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar oldIndexes = oldDef.idxByName;\n\t\t\t\tvar newIndexes = newDef.idxByName;\n\t\t\t\tvar idxName = void 0;\n\t\t\t\tfor (idxName in oldIndexes) {\n\t\t\t\t\tif (!newIndexes[idxName])\n\t\t\t\t\t\tchange.del.push(idxName);\n\t\t\t\t}\n\t\t\t\tfor (idxName in newIndexes) {\n\t\t\t\t\tvar oldIdx = oldIndexes[idxName], newIdx = newIndexes[idxName];\n\t\t\t\t\tif (!oldIdx)\n\t\t\t\t\t\tchange.add.push(newIdx);\n\t\t\t\t\telse if (oldIdx.src !== newIdx.src)\n\t\t\t\t\t\tchange.change.push(newIdx);\n\t\t\t\t}\n\t\t\t\tif (change.del.length > 0 || change.add.length > 0 || change.change.length > 0) {\n\t\t\t\t\tdiff.change.push(change);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn diff;\n}\nfunction createTable(idbtrans, tableName, primKey, indexes) {\n\tvar store = idbtrans.db.createObjectStore(tableName, primKey.keyPath ?\n\t\t{ keyPath: primKey.keyPath, autoIncrement: primKey.auto } :\n\t\t{ autoIncrement: primKey.auto });\n\tindexes.forEach(function (idx) { return addIndex(store, idx); });\n\treturn store;\n}\nfunction createMissingTables(newSchema, idbtrans) {\n\tkeys(newSchema).forEach(function (tableName) {\n\t\tif (!idbtrans.db.objectStoreNames.contains(tableName)) {\n\t\t\tcreateTable(idbtrans, tableName, newSchema[tableName].primKey, newSchema[tableName].indexes);\n\t\t}\n\t});\n}\nfunction deleteRemovedTables(newSchema, idbtrans) {\n\t[].slice.call(idbtrans.db.objectStoreNames).forEach(function (storeName) {\n\t\treturn newSchema[storeName] == null && idbtrans.db.deleteObjectStore(storeName);\n\t});\n}\nfunction addIndex(store, idx) {\n\tstore.createIndex(idx.name, idx.keyPath, { unique: idx.unique, multiEntry: idx.multi });\n}\nfunction buildGlobalSchema(db, idbdb, tmpTrans) {\n\tvar globalSchema = {};\n\tvar dbStoreNames = slice(idbdb.objectStoreNames, 0);\n\tdbStoreNames.forEach(function (storeName) {\n\t\tvar store = tmpTrans.objectStore(storeName);\n\t\tvar keyPath = store.keyPath;\n\t\tvar primKey = createIndexSpec(nameFromKeyPath(keyPath), keyPath || \"\", false, false, !!store.autoIncrement, keyPath && typeof keyPath !== \"string\", true);\n\t\tvar indexes = [];\n\t\tfor (var j = 0; j < store.indexNames.length; ++j) {\n\t\t\tvar idbindex = store.index(store.indexNames[j]);\n\t\t\tkeyPath = idbindex.keyPath;\n\t\t\tvar index = createIndexSpec(idbindex.name, keyPath, !!idbindex.unique, !!idbindex.multiEntry, false, keyPath && typeof keyPath !== \"string\", false);\n\t\t\tindexes.push(index);\n\t\t}\n\t\tglobalSchema[storeName] = createTableSchema(storeName, primKey, indexes);\n\t});\n\treturn globalSchema;\n}\nfunction readGlobalSchema(_a, idbdb, tmpTrans) {\n\tvar db = _a._novip;\n\tdb.verno = idbdb.version / 10;\n\tvar globalSchema = db._dbSchema = buildGlobalSchema(db, idbdb, tmpTrans);\n\tdb._storeNames = slice(idbdb.objectStoreNames, 0);\n\tsetApiOnPlace(db, [db._allTables], keys(globalSchema), globalSchema);\n}\nfunction verifyInstalledSchema(db, tmpTrans) {\n\tvar installedSchema = buildGlobalSchema(db, db.idbdb, tmpTrans);\n\tvar diff = getSchemaDiff(installedSchema, db._dbSchema);\n\treturn !(diff.add.length || diff.change.some(function (ch) { return ch.add.length || ch.change.length; }));\n}\nfunction adjustToExistingIndexNames(_a, schema, idbtrans) {\n\tvar db = _a._novip;\n\tvar storeNames = idbtrans.db.objectStoreNames;\n\tfor (var i = 0; i < storeNames.length; ++i) {\n\t\tvar storeName = storeNames[i];\n\t\tvar store = idbtrans.objectStore(storeName);\n\t\tdb._hasGetAll = 'getAll' in store;\n\t\tfor (var j = 0; j < store.indexNames.length; ++j) {\n\t\t\tvar indexName = store.indexNames[j];\n\t\t\tvar keyPath = store.index(indexName).keyPath;\n\t\t\tvar dexieName = typeof keyPath === 'string' ? keyPath : \"[\" + slice(keyPath).join('+') + \"]\";\n\t\t\tif (schema[storeName]) {\n\t\t\t\tvar indexSpec = schema[storeName].idxByName[dexieName];\n\t\t\t\tif (indexSpec) {\n\t\t\t\t\tindexSpec.name = indexName;\n\t\t\t\t\tdelete schema[storeName].idxByName[dexieName];\n\t\t\t\t\tschema[storeName].idxByName[indexName] = indexSpec;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif (typeof navigator !== 'undefined' && /Safari/.test(navigator.userAgent) &&\n\t\t!/(Chrome\\/|Edge\\/)/.test(navigator.userAgent) &&\n\t\t_global.WorkerGlobalScope && _global instanceof _global.WorkerGlobalScope &&\n\t\t[].concat(navigator.userAgent.match(/Safari\\/(\\d*)/))[1] < 604) {\n\t\tdb._hasGetAll = false;\n\t}\n}\nfunction parseIndexSyntax(primKeyAndIndexes) {\n\treturn primKeyAndIndexes.split(',').map(function (index, indexNum) {\n\t\tindex = index.trim();\n\t\tvar name = index.replace(/([&*]|\\+\\+)/g, \"\");\n\t\tvar keyPath = /^\\[/.test(name) ? name.match(/^\\[(.*)\\]$/)[1].split('+') : name;\n\t\treturn createIndexSpec(name, keyPath || null, /\\&/.test(index), /\\*/.test(index), /\\+\\+/.test(index), isArray(keyPath), indexNum === 0);\n\t});\n}\n\nvar Version =  (function () {\n\tfunction Version() {\n\t}\n\tVersion.prototype._parseStoresSpec = function (stores, outSchema) {\n\t\tkeys(stores).forEach(function (tableName) {\n\t\t\tif (stores[tableName] !== null) {\n\t\t\t\tvar indexes = parseIndexSyntax(stores[tableName]);\n\t\t\t\tvar primKey = indexes.shift();\n\t\t\t\tif (primKey.multi)\n\t\t\t\t\tthrow new exceptions.Schema(\"Primary key cannot be multi-valued\");\n\t\t\t\tindexes.forEach(function (idx) {\n\t\t\t\t\tif (idx.auto)\n\t\t\t\t\t\tthrow new exceptions.Schema(\"Only primary key can be marked as autoIncrement (++)\");\n\t\t\t\t\tif (!idx.keyPath)\n\t\t\t\t\t\tthrow new exceptions.Schema(\"Index must have a name and cannot be an empty string\");\n\t\t\t\t});\n\t\t\t\toutSchema[tableName] = createTableSchema(tableName, primKey, indexes);\n\t\t\t}\n\t\t});\n\t};\n\tVersion.prototype.stores = function (stores) {\n\t\tvar db = this.db;\n\t\tthis._cfg.storesSource = this._cfg.storesSource ?\n\t\t\textend(this._cfg.storesSource, stores) :\n\t\t\tstores;\n\t\tvar versions = db._versions;\n\t\tvar storesSpec = {};\n\t\tvar dbschema = {};\n\t\tversions.forEach(function (version) {\n\t\t\textend(storesSpec, version._cfg.storesSource);\n\t\t\tdbschema = (version._cfg.dbschema = {});\n\t\t\tversion._parseStoresSpec(storesSpec, dbschema);\n\t\t});\n\t\tdb._dbSchema = dbschema;\n\t\tremoveTablesApi(db, [db._allTables, db, db.Transaction.prototype]);\n\t\tsetApiOnPlace(db, [db._allTables, db, db.Transaction.prototype, this._cfg.tables], keys(dbschema), dbschema);\n\t\tdb._storeNames = keys(dbschema);\n\t\treturn this;\n\t};\n\tVersion.prototype.upgrade = function (upgradeFunction) {\n\t\tthis._cfg.contentUpgrade = promisableChain(this._cfg.contentUpgrade || nop, upgradeFunction);\n\t\treturn this;\n\t};\n\treturn Version;\n}());\n\nfunction createVersionConstructor(db) {\n\treturn makeClassConstructor(Version.prototype, function Version(versionNumber) {\n\t\tthis.db = db;\n\t\tthis._cfg = {\n\t\t\tversion: versionNumber,\n\t\t\tstoresSource: null,\n\t\t\tdbschema: {},\n\t\t\ttables: {},\n\t\t\tcontentUpgrade: null\n\t\t};\n\t});\n}\n\nfunction getDbNamesTable(indexedDB, IDBKeyRange) {\n\tvar dbNamesDB = indexedDB[\"_dbNamesDB\"];\n\tif (!dbNamesDB) {\n\t\tdbNamesDB = indexedDB[\"_dbNamesDB\"] = new Dexie$1(DBNAMES_DB, {\n\t\t\taddons: [],\n\t\t\tindexedDB: indexedDB,\n\t\t\tIDBKeyRange: IDBKeyRange,\n\t\t});\n\t\tdbNamesDB.version(1).stores({ dbnames: \"name\" });\n\t}\n\treturn dbNamesDB.table(\"dbnames\");\n}\nfunction hasDatabasesNative(indexedDB) {\n\treturn indexedDB && typeof indexedDB.databases === \"function\";\n}\nfunction getDatabaseNames(_a) {\n\tvar indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n\treturn hasDatabasesNative(indexedDB)\n\t\t? Promise.resolve(indexedDB.databases()).then(function (infos) {\n\t\t\treturn infos\n\t\t\t\t.map(function (info) { return info.name; })\n\t\t\t\t.filter(function (name) { return name !== DBNAMES_DB; });\n\t\t})\n\t\t: getDbNamesTable(indexedDB, IDBKeyRange).toCollection().primaryKeys();\n}\nfunction _onDatabaseCreated(_a, name) {\n\tvar indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n\t!hasDatabasesNative(indexedDB) &&\n\tname !== DBNAMES_DB &&\n\tgetDbNamesTable(indexedDB, IDBKeyRange).put({ name: name }).catch(nop);\n}\nfunction _onDatabaseDeleted(_a, name) {\n\tvar indexedDB = _a.indexedDB, IDBKeyRange = _a.IDBKeyRange;\n\t!hasDatabasesNative(indexedDB) &&\n\tname !== DBNAMES_DB &&\n\tgetDbNamesTable(indexedDB, IDBKeyRange).delete(name).catch(nop);\n}\n\nfunction vip(fn) {\n\treturn newScope(function () {\n\t\tPSD.letThrough = true;\n\t\treturn fn();\n\t});\n}\n\nfunction idbReady() {\n\tvar isSafari = !navigator.userAgentData &&\n\t\t/Safari\\//.test(navigator.userAgent) &&\n\t\t!/Chrom(e|ium)\\//.test(navigator.userAgent);\n\tif (!isSafari || !indexedDB.databases)\n\t\treturn Promise.resolve();\n\tvar intervalId;\n\treturn new Promise(function (resolve) {\n\t\tvar tryIdb = function () { return indexedDB.databases().finally(resolve); };\n\t\tintervalId = setInterval(tryIdb, 100);\n\t\ttryIdb();\n\t}).finally(function () { return clearInterval(intervalId); });\n}\n\nfunction dexieOpen(db) {\n\tvar state = db._state;\n\tvar indexedDB = db._deps.indexedDB;\n\tif (state.isBeingOpened || db.idbdb)\n\t\treturn state.dbReadyPromise.then(function () { return state.dbOpenError ?\n\t\t\trejection(state.dbOpenError) :\n\t\t\tdb; });\n\tdebug && (state.openCanceller._stackHolder = getErrorWithStack());\n\tstate.isBeingOpened = true;\n\tstate.dbOpenError = null;\n\tstate.openComplete = false;\n\tvar openCanceller = state.openCanceller;\n\tfunction throwIfCancelled() {\n\t\tif (state.openCanceller !== openCanceller)\n\t\t\tthrow new exceptions.DatabaseClosed('db.open() was cancelled');\n\t}\n\tvar resolveDbReady = state.dbReadyResolve,\n\t\tupgradeTransaction = null, wasCreated = false;\n\treturn DexiePromise.race([openCanceller, (typeof navigator === 'undefined' ? DexiePromise.resolve() : idbReady()).then(function () { return new DexiePromise(function (resolve, reject) {\n\t\tthrowIfCancelled();\n\t\tif (!indexedDB)\n\t\t\tthrow new exceptions.MissingAPI();\n\t\tvar dbName = db.name;\n\t\tvar req = state.autoSchema ?\n\t\t\tindexedDB.open(dbName) :\n\t\t\tindexedDB.open(dbName, Math.round(db.verno * 10));\n\t\tif (!req)\n\t\t\tthrow new exceptions.MissingAPI();\n\t\treq.onerror = eventRejectHandler(reject);\n\t\treq.onblocked = wrap(db._fireOnBlocked);\n\t\treq.onupgradeneeded = wrap(function (e) {\n\t\t\tupgradeTransaction = req.transaction;\n\t\t\tif (state.autoSchema && !db._options.allowEmptyDB) {\n\t\t\t\treq.onerror = preventDefault;\n\t\t\t\tupgradeTransaction.abort();\n\t\t\t\treq.result.close();\n\t\t\t\tvar delreq = indexedDB.deleteDatabase(dbName);\n\t\t\t\tdelreq.onsuccess = delreq.onerror = wrap(function () {\n\t\t\t\t\treject(new exceptions.NoSuchDatabase(\"Database \" + dbName + \" doesnt exist\"));\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tupgradeTransaction.onerror = eventRejectHandler(reject);\n\t\t\t\tvar oldVer = e.oldVersion > Math.pow(2, 62) ? 0 : e.oldVersion;\n\t\t\t\twasCreated = oldVer < 1;\n\t\t\t\tdb._novip.idbdb = req.result;\n\t\t\t\trunUpgraders(db, oldVer / 10, upgradeTransaction, reject);\n\t\t\t}\n\t\t}, reject);\n\t\treq.onsuccess = wrap(function () {\n\t\t\tupgradeTransaction = null;\n\t\t\tvar idbdb = db._novip.idbdb = req.result;\n\t\t\tvar objectStoreNames = slice(idbdb.objectStoreNames);\n\t\t\tif (objectStoreNames.length > 0)\n\t\t\t\ttry {\n\t\t\t\t\tvar tmpTrans = idbdb.transaction(safariMultiStoreFix(objectStoreNames), 'readonly');\n\t\t\t\t\tif (state.autoSchema)\n\t\t\t\t\t\treadGlobalSchema(db, idbdb, tmpTrans);\n\t\t\t\t\telse {\n\t\t\t\t\t\tadjustToExistingIndexNames(db, db._dbSchema, tmpTrans);\n\t\t\t\t\t\tif (!verifyInstalledSchema(db, tmpTrans)) {\n\t\t\t\t\t\t\tconsole.warn(\"Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgenerateMiddlewareStacks(db, tmpTrans);\n\t\t\t\t}\n\t\t\t\tcatch (e) {\n\t\t\t\t}\n\t\t\tconnections.push(db);\n\t\t\tidbdb.onversionchange = wrap(function (ev) {\n\t\t\t\tstate.vcFired = true;\n\t\t\t\tdb.on(\"versionchange\").fire(ev);\n\t\t\t});\n\t\t\tidbdb.onclose = wrap(function (ev) {\n\t\t\t\tdb.on(\"close\").fire(ev);\n\t\t\t});\n\t\t\tif (wasCreated)\n\t\t\t\t_onDatabaseCreated(db._deps, dbName);\n\t\t\tresolve();\n\t\t}, reject);\n\t}); })]).then(function () {\n\t\tthrowIfCancelled();\n\t\tstate.onReadyBeingFired = [];\n\t\treturn DexiePromise.resolve(vip(function () { return db.on.ready.fire(db.vip); })).then(function fireRemainders() {\n\t\t\tif (state.onReadyBeingFired.length > 0) {\n\t\t\t\tvar remainders_1 = state.onReadyBeingFired.reduce(promisableChain, nop);\n\t\t\t\tstate.onReadyBeingFired = [];\n\t\t\t\treturn DexiePromise.resolve(vip(function () { return remainders_1(db.vip); })).then(fireRemainders);\n\t\t\t}\n\t\t});\n\t}).finally(function () {\n\t\tstate.onReadyBeingFired = null;\n\t\tstate.isBeingOpened = false;\n\t}).then(function () {\n\t\treturn db;\n\t}).catch(function (err) {\n\t\tstate.dbOpenError = err;\n\t\ttry {\n\t\t\tupgradeTransaction && upgradeTransaction.abort();\n\t\t}\n\t\tcatch (_a) { }\n\t\tif (openCanceller === state.openCanceller) {\n\t\t\tdb._close();\n\t\t}\n\t\treturn rejection(err);\n\t}).finally(function () {\n\t\tstate.openComplete = true;\n\t\tresolveDbReady();\n\t});\n}\n\nfunction awaitIterator(iterator) {\n\tvar callNext = function (result) { return iterator.next(result); }, doThrow = function (error) { return iterator.throw(error); }, onSuccess = step(callNext), onError = step(doThrow);\n\tfunction step(getNext) {\n\t\treturn function (val) {\n\t\t\tvar next = getNext(val), value = next.value;\n\t\t\treturn next.done ? value :\n\t\t\t\t(!value || typeof value.then !== 'function' ?\n\t\t\t\t\tisArray(value) ? Promise.all(value).then(onSuccess, onError) : onSuccess(value) :\n\t\t\t\t\tvalue.then(onSuccess, onError));\n\t\t};\n\t}\n\treturn step(callNext)();\n}\n\nfunction extractTransactionArgs(mode, _tableArgs_, scopeFunc) {\n\tvar i = arguments.length;\n\tif (i < 2)\n\t\tthrow new exceptions.InvalidArgument(\"Too few arguments\");\n\tvar args = new Array(i - 1);\n\twhile (--i)\n\t\targs[i - 1] = arguments[i];\n\tscopeFunc = args.pop();\n\tvar tables = flatten(args);\n\treturn [mode, tables, scopeFunc];\n}\nfunction enterTransactionScope(db, mode, storeNames, parentTransaction, scopeFunc) {\n\treturn DexiePromise.resolve().then(function () {\n\t\tvar transless = PSD.transless || PSD;\n\t\tvar trans = db._createTransaction(mode, storeNames, db._dbSchema, parentTransaction);\n\t\tvar zoneProps = {\n\t\t\ttrans: trans,\n\t\t\ttransless: transless\n\t\t};\n\t\tif (parentTransaction) {\n\t\t\ttrans.idbtrans = parentTransaction.idbtrans;\n\t\t}\n\t\telse {\n\t\t\ttry {\n\t\t\t\ttrans.create();\n\t\t\t\tdb._state.PR1398_maxLoop = 3;\n\t\t\t}\n\t\t\tcatch (ex) {\n\t\t\t\tif (ex.name === errnames.InvalidState && db.isOpen() && --db._state.PR1398_maxLoop > 0) {\n\t\t\t\t\tconsole.warn('Dexie: Need to reopen db');\n\t\t\t\t\tdb._close();\n\t\t\t\t\treturn db.open().then(function () { return enterTransactionScope(db, mode, storeNames, null, scopeFunc); });\n\t\t\t\t}\n\t\t\t\treturn rejection(ex);\n\t\t\t}\n\t\t}\n\t\tvar scopeFuncIsAsync = isAsyncFunction(scopeFunc);\n\t\tif (scopeFuncIsAsync) {\n\t\t\tincrementExpectedAwaits();\n\t\t}\n\t\tvar returnValue;\n\t\tvar promiseFollowed = DexiePromise.follow(function () {\n\t\t\treturnValue = scopeFunc.call(trans, trans);\n\t\t\tif (returnValue) {\n\t\t\t\tif (scopeFuncIsAsync) {\n\t\t\t\t\tvar decrementor = decrementExpectedAwaits.bind(null, null);\n\t\t\t\t\treturnValue.then(decrementor, decrementor);\n\t\t\t\t}\n\t\t\t\telse if (typeof returnValue.next === 'function' && typeof returnValue.throw === 'function') {\n\t\t\t\t\treturnValue = awaitIterator(returnValue);\n\t\t\t\t}\n\t\t\t}\n\t\t}, zoneProps);\n\t\treturn (returnValue && typeof returnValue.then === 'function' ?\n\t\t\tDexiePromise.resolve(returnValue).then(function (x) { return trans.active ?\n\t\t\t\tx\n\t\t\t\t: rejection(new exceptions.PrematureCommit(\"Transaction committed too early. See http://bit.ly/2kdckMn\")); })\n\t\t\t: promiseFollowed.then(function () { return returnValue; })).then(function (x) {\n\t\t\tif (parentTransaction)\n\t\t\t\ttrans._resolve();\n\t\t\treturn trans._completion.then(function () { return x; });\n\t\t}).catch(function (e) {\n\t\t\ttrans._reject(e);\n\t\t\treturn rejection(e);\n\t\t});\n\t});\n}\n\nfunction pad(a, value, count) {\n\tvar result = isArray(a) ? a.slice() : [a];\n\tfor (var i = 0; i < count; ++i)\n\t\tresult.push(value);\n\treturn result;\n}\nfunction createVirtualIndexMiddleware(down) {\n\treturn __assign(__assign({}, down), { table: function (tableName) {\n\t\t\tvar table = down.table(tableName);\n\t\t\tvar schema = table.schema;\n\t\t\tvar indexLookup = {};\n\t\t\tvar allVirtualIndexes = [];\n\t\t\tfunction addVirtualIndexes(keyPath, keyTail, lowLevelIndex) {\n\t\t\t\tvar keyPathAlias = getKeyPathAlias(keyPath);\n\t\t\t\tvar indexList = (indexLookup[keyPathAlias] = indexLookup[keyPathAlias] || []);\n\t\t\t\tvar keyLength = keyPath == null ? 0 : typeof keyPath === 'string' ? 1 : keyPath.length;\n\t\t\t\tvar isVirtual = keyTail > 0;\n\t\t\t\tvar virtualIndex = __assign(__assign({}, lowLevelIndex), { isVirtual: isVirtual, keyTail: keyTail, keyLength: keyLength, extractKey: getKeyExtractor(keyPath), unique: !isVirtual && lowLevelIndex.unique });\n\t\t\t\tindexList.push(virtualIndex);\n\t\t\t\tif (!virtualIndex.isPrimaryKey) {\n\t\t\t\t\tallVirtualIndexes.push(virtualIndex);\n\t\t\t\t}\n\t\t\t\tif (keyLength > 1) {\n\t\t\t\t\tvar virtualKeyPath = keyLength === 2 ?\n\t\t\t\t\t\tkeyPath[0] :\n\t\t\t\t\t\tkeyPath.slice(0, keyLength - 1);\n\t\t\t\t\taddVirtualIndexes(virtualKeyPath, keyTail + 1, lowLevelIndex);\n\t\t\t\t}\n\t\t\t\tindexList.sort(function (a, b) { return a.keyTail - b.keyTail; });\n\t\t\t\treturn virtualIndex;\n\t\t\t}\n\t\t\tvar primaryKey = addVirtualIndexes(schema.primaryKey.keyPath, 0, schema.primaryKey);\n\t\t\tindexLookup[\":id\"] = [primaryKey];\n\t\t\tfor (var _i = 0, _a = schema.indexes; _i < _a.length; _i++) {\n\t\t\t\tvar index = _a[_i];\n\t\t\t\taddVirtualIndexes(index.keyPath, 0, index);\n\t\t\t}\n\t\t\tfunction findBestIndex(keyPath) {\n\t\t\t\tvar result = indexLookup[getKeyPathAlias(keyPath)];\n\t\t\t\treturn result && result[0];\n\t\t\t}\n\t\t\tfunction translateRange(range, keyTail) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: range.type === 1  ?\n\t\t\t\t\t\t2  :\n\t\t\t\t\t\trange.type,\n\t\t\t\t\tlower: pad(range.lower, range.lowerOpen ? down.MAX_KEY : down.MIN_KEY, keyTail),\n\t\t\t\t\tlowerOpen: true,\n\t\t\t\t\tupper: pad(range.upper, range.upperOpen ? down.MIN_KEY : down.MAX_KEY, keyTail),\n\t\t\t\t\tupperOpen: true\n\t\t\t\t};\n\t\t\t}\n\t\t\tfunction translateRequest(req) {\n\t\t\t\tvar index = req.query.index;\n\t\t\t\treturn index.isVirtual ? __assign(__assign({}, req), { query: {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\trange: translateRange(req.query.range, index.keyTail)\n\t\t\t\t\t} }) : req;\n\t\t\t}\n\t\t\tvar result = __assign(__assign({}, table), { schema: __assign(__assign({}, schema), { primaryKey: primaryKey, indexes: allVirtualIndexes, getIndexByKeyPath: findBestIndex }), count: function (req) {\n\t\t\t\t\treturn table.count(translateRequest(req));\n\t\t\t\t}, query: function (req) {\n\t\t\t\t\treturn table.query(translateRequest(req));\n\t\t\t\t}, openCursor: function (req) {\n\t\t\t\t\tvar _a = req.query.index, keyTail = _a.keyTail, isVirtual = _a.isVirtual, keyLength = _a.keyLength;\n\t\t\t\t\tif (!isVirtual)\n\t\t\t\t\t\treturn table.openCursor(req);\n\t\t\t\t\tfunction createVirtualCursor(cursor) {\n\t\t\t\t\t\tfunction _continue(key) {\n\t\t\t\t\t\t\tkey != null ?\n\t\t\t\t\t\t\t\tcursor.continue(pad(key, req.reverse ? down.MAX_KEY : down.MIN_KEY, keyTail)) :\n\t\t\t\t\t\t\t\treq.unique ?\n\t\t\t\t\t\t\t\t\tcursor.continue(cursor.key.slice(0, keyLength)\n\t\t\t\t\t\t\t\t\t\t.concat(req.reverse\n\t\t\t\t\t\t\t\t\t\t\t? down.MIN_KEY\n\t\t\t\t\t\t\t\t\t\t\t: down.MAX_KEY, keyTail)) :\n\t\t\t\t\t\t\t\t\tcursor.continue();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar virtualCursor = Object.create(cursor, {\n\t\t\t\t\t\t\tcontinue: { value: _continue },\n\t\t\t\t\t\t\tcontinuePrimaryKey: {\n\t\t\t\t\t\t\t\tvalue: function (key, primaryKey) {\n\t\t\t\t\t\t\t\t\tcursor.continuePrimaryKey(pad(key, down.MAX_KEY, keyTail), primaryKey);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tprimaryKey: {\n\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\treturn cursor.primaryKey;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\tvar key = cursor.key;\n\t\t\t\t\t\t\t\t\treturn keyLength === 1 ?\n\t\t\t\t\t\t\t\t\t\tkey[0] :\n\t\t\t\t\t\t\t\t\t\tkey.slice(0, keyLength);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\treturn cursor.value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn virtualCursor;\n\t\t\t\t\t}\n\t\t\t\t\treturn table.openCursor(translateRequest(req))\n\t\t\t\t\t\t.then(function (cursor) { return cursor && createVirtualCursor(cursor); });\n\t\t\t\t} });\n\t\t\treturn result;\n\t\t} });\n}\nvar virtualIndexMiddleware = {\n\tstack: \"dbcore\",\n\tname: \"VirtualIndexMiddleware\",\n\tlevel: 1,\n\tcreate: createVirtualIndexMiddleware\n};\n\nfunction getObjectDiff(a, b, rv, prfx) {\n\trv = rv || {};\n\tprfx = prfx || '';\n\tkeys(a).forEach(function (prop) {\n\t\tif (!hasOwn(b, prop)) {\n\t\t\trv[prfx + prop] = undefined;\n\t\t}\n\t\telse {\n\t\t\tvar ap = a[prop], bp = b[prop];\n\t\t\tif (typeof ap === 'object' && typeof bp === 'object' && ap && bp) {\n\t\t\t\tvar apTypeName = toStringTag(ap);\n\t\t\t\tvar bpTypeName = toStringTag(bp);\n\t\t\t\tif (apTypeName !== bpTypeName) {\n\t\t\t\t\trv[prfx + prop] = b[prop];\n\t\t\t\t}\n\t\t\t\telse if (apTypeName === 'Object') {\n\t\t\t\t\tgetObjectDiff(ap, bp, rv, prfx + prop + '.');\n\t\t\t\t}\n\t\t\t\telse if (ap !== bp) {\n\t\t\t\t\trv[prfx + prop] = b[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (ap !== bp)\n\t\t\t\trv[prfx + prop] = b[prop];\n\t\t}\n\t});\n\tkeys(b).forEach(function (prop) {\n\t\tif (!hasOwn(a, prop)) {\n\t\t\trv[prfx + prop] = b[prop];\n\t\t}\n\t});\n\treturn rv;\n}\n\nfunction getEffectiveKeys(primaryKey, req) {\n\tif (req.type === 'delete')\n\t\treturn req.keys;\n\treturn req.keys || req.values.map(primaryKey.extractKey);\n}\n\nvar hooksMiddleware = {\n\tstack: \"dbcore\",\n\tname: \"HooksMiddleware\",\n\tlevel: 2,\n\tcreate: function (downCore) { return (__assign(__assign({}, downCore), { table: function (tableName) {\n\t\t\tvar downTable = downCore.table(tableName);\n\t\t\tvar primaryKey = downTable.schema.primaryKey;\n\t\t\tvar tableMiddleware = __assign(__assign({}, downTable), { mutate: function (req) {\n\t\t\t\t\tvar dxTrans = PSD.trans;\n\t\t\t\t\tvar _a = dxTrans.table(tableName).hook, deleting = _a.deleting, creating = _a.creating, updating = _a.updating;\n\t\t\t\t\tswitch (req.type) {\n\t\t\t\t\t\tcase 'add':\n\t\t\t\t\t\t\tif (creating.fire === nop)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\treturn dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n\t\t\t\t\t\tcase 'put':\n\t\t\t\t\t\t\tif (creating.fire === nop && updating.fire === nop)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\treturn dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n\t\t\t\t\t\tcase 'delete':\n\t\t\t\t\t\t\tif (deleting.fire === nop)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\treturn dxTrans._promise('readwrite', function () { return addPutOrDelete(req); }, true);\n\t\t\t\t\t\tcase 'deleteRange':\n\t\t\t\t\t\t\tif (deleting.fire === nop)\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\treturn dxTrans._promise('readwrite', function () { return deleteRange(req); }, true);\n\t\t\t\t\t}\n\t\t\t\t\treturn downTable.mutate(req);\n\t\t\t\t\tfunction addPutOrDelete(req) {\n\t\t\t\t\t\tvar dxTrans = PSD.trans;\n\t\t\t\t\t\tvar keys = req.keys || getEffectiveKeys(primaryKey, req);\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tthrow new Error(\"Keys missing\");\n\t\t\t\t\t\treq = req.type === 'add' || req.type === 'put' ? __assign(__assign({}, req), { keys: keys }) : __assign({}, req);\n\t\t\t\t\t\tif (req.type !== 'delete')\n\t\t\t\t\t\t\treq.values = __spreadArray([], req.values, true);\n\t\t\t\t\t\tif (req.keys)\n\t\t\t\t\t\t\treq.keys = __spreadArray([], req.keys, true);\n\t\t\t\t\t\treturn getExistingValues(downTable, req, keys).then(function (existingValues) {\n\t\t\t\t\t\t\tvar contexts = keys.map(function (key, i) {\n\t\t\t\t\t\t\t\tvar existingValue = existingValues[i];\n\t\t\t\t\t\t\t\tvar ctx = { onerror: null, onsuccess: null };\n\t\t\t\t\t\t\t\tif (req.type === 'delete') {\n\t\t\t\t\t\t\t\t\tdeleting.fire.call(ctx, key, existingValue, dxTrans);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if (req.type === 'add' || existingValue === undefined) {\n\t\t\t\t\t\t\t\t\tvar generatedPrimaryKey = creating.fire.call(ctx, key, req.values[i], dxTrans);\n\t\t\t\t\t\t\t\t\tif (key == null && generatedPrimaryKey != null) {\n\t\t\t\t\t\t\t\t\t\tkey = generatedPrimaryKey;\n\t\t\t\t\t\t\t\t\t\treq.keys[i] = key;\n\t\t\t\t\t\t\t\t\t\tif (!primaryKey.outbound) {\n\t\t\t\t\t\t\t\t\t\t\tsetByKeyPath(req.values[i], primaryKey.keyPath, key);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tvar objectDiff = getObjectDiff(existingValue, req.values[i]);\n\t\t\t\t\t\t\t\t\tvar additionalChanges_1 = updating.fire.call(ctx, objectDiff, key, existingValue, dxTrans);\n\t\t\t\t\t\t\t\t\tif (additionalChanges_1) {\n\t\t\t\t\t\t\t\t\t\tvar requestedValue_1 = req.values[i];\n\t\t\t\t\t\t\t\t\t\tObject.keys(additionalChanges_1).forEach(function (keyPath) {\n\t\t\t\t\t\t\t\t\t\t\tif (hasOwn(requestedValue_1, keyPath)) {\n\t\t\t\t\t\t\t\t\t\t\t\trequestedValue_1[keyPath] = additionalChanges_1[keyPath];\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\tsetByKeyPath(requestedValue_1, keyPath, additionalChanges_1[keyPath]);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn ctx;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn downTable.mutate(req).then(function (_a) {\n\t\t\t\t\t\t\t\tvar failures = _a.failures, results = _a.results, numFailures = _a.numFailures, lastResult = _a.lastResult;\n\t\t\t\t\t\t\t\tfor (var i = 0; i < keys.length; ++i) {\n\t\t\t\t\t\t\t\t\tvar primKey = results ? results[i] : keys[i];\n\t\t\t\t\t\t\t\t\tvar ctx = contexts[i];\n\t\t\t\t\t\t\t\t\tif (primKey == null) {\n\t\t\t\t\t\t\t\t\t\tctx.onerror && ctx.onerror(failures[i]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tctx.onsuccess && ctx.onsuccess(req.type === 'put' && existingValues[i] ?\n\t\t\t\t\t\t\t\t\t\t\treq.values[i] :\n\t\t\t\t\t\t\t\t\t\t\tprimKey\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn { failures: failures, results: results, numFailures: numFailures, lastResult: lastResult };\n\t\t\t\t\t\t\t}).catch(function (error) {\n\t\t\t\t\t\t\t\tcontexts.forEach(function (ctx) { return ctx.onerror && ctx.onerror(error); });\n\t\t\t\t\t\t\t\treturn Promise.reject(error);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tfunction deleteRange(req) {\n\t\t\t\t\t\treturn deleteNextChunk(req.trans, req.range, 10000);\n\t\t\t\t\t}\n\t\t\t\t\tfunction deleteNextChunk(trans, range, limit) {\n\t\t\t\t\t\treturn downTable.query({ trans: trans, values: false, query: { index: primaryKey, range: range }, limit: limit })\n\t\t\t\t\t\t\t.then(function (_a) {\n\t\t\t\t\t\t\t\tvar result = _a.result;\n\t\t\t\t\t\t\t\treturn addPutOrDelete({ type: 'delete', keys: result, trans: trans }).then(function (res) {\n\t\t\t\t\t\t\t\t\tif (res.numFailures > 0)\n\t\t\t\t\t\t\t\t\t\treturn Promise.reject(res.failures[0]);\n\t\t\t\t\t\t\t\t\tif (result.length < limit) {\n\t\t\t\t\t\t\t\t\t\treturn { failures: [], numFailures: 0, lastResult: undefined };\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\treturn deleteNextChunk(trans, __assign(__assign({}, range), { lower: result[result.length - 1], lowerOpen: true }), limit);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} });\n\t\t\treturn tableMiddleware;\n\t\t} })); }\n};\nfunction getExistingValues(table, req, effectiveKeys) {\n\treturn req.type === \"add\"\n\t\t? Promise.resolve([])\n\t\t: table.getMany({ trans: req.trans, keys: effectiveKeys, cache: \"immutable\" });\n}\n\nfunction getFromTransactionCache(keys, cache, clone) {\n\ttry {\n\t\tif (!cache)\n\t\t\treturn null;\n\t\tif (cache.keys.length < keys.length)\n\t\t\treturn null;\n\t\tvar result = [];\n\t\tfor (var i = 0, j = 0; i < cache.keys.length && j < keys.length; ++i) {\n\t\t\tif (cmp(cache.keys[i], keys[j]) !== 0)\n\t\t\t\tcontinue;\n\t\t\tresult.push(clone ? deepClone(cache.values[i]) : cache.values[i]);\n\t\t\t++j;\n\t\t}\n\t\treturn result.length === keys.length ? result : null;\n\t}\n\tcatch (_a) {\n\t\treturn null;\n\t}\n}\nvar cacheExistingValuesMiddleware = {\n\tstack: \"dbcore\",\n\tlevel: -1,\n\tcreate: function (core) {\n\t\treturn {\n\t\t\ttable: function (tableName) {\n\t\t\t\tvar table = core.table(tableName);\n\t\t\t\treturn __assign(__assign({}, table), { getMany: function (req) {\n\t\t\t\t\t\tif (!req.cache) {\n\t\t\t\t\t\t\treturn table.getMany(req);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar cachedResult = getFromTransactionCache(req.keys, req.trans[\"_cache\"], req.cache === \"clone\");\n\t\t\t\t\t\tif (cachedResult) {\n\t\t\t\t\t\t\treturn DexiePromise.resolve(cachedResult);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn table.getMany(req).then(function (res) {\n\t\t\t\t\t\t\treq.trans[\"_cache\"] = {\n\t\t\t\t\t\t\t\tkeys: req.keys,\n\t\t\t\t\t\t\t\tvalues: req.cache === \"clone\" ? deepClone(res) : res,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t});\n\t\t\t\t\t}, mutate: function (req) {\n\t\t\t\t\t\tif (req.type !== \"add\")\n\t\t\t\t\t\t\treq.trans[\"_cache\"] = null;\n\t\t\t\t\t\treturn table.mutate(req);\n\t\t\t\t\t} });\n\t\t\t},\n\t\t};\n\t},\n};\n\nvar _a;\nfunction isEmptyRange(node) {\n\treturn !(\"from\" in node);\n}\nvar RangeSet = function (fromOrTree, to) {\n\tif (this) {\n\t\textend(this, arguments.length ? { d: 1, from: fromOrTree, to: arguments.length > 1 ? to : fromOrTree } : { d: 0 });\n\t}\n\telse {\n\t\tvar rv = new RangeSet();\n\t\tif (fromOrTree && (\"d\" in fromOrTree)) {\n\t\t\textend(rv, fromOrTree);\n\t\t}\n\t\treturn rv;\n\t}\n};\nprops(RangeSet.prototype, (_a = {\n\tadd: function (rangeSet) {\n\t\tmergeRanges(this, rangeSet);\n\t\treturn this;\n\t},\n\taddKey: function (key) {\n\t\taddRange(this, key, key);\n\t\treturn this;\n\t},\n\taddKeys: function (keys) {\n\t\tvar _this = this;\n\t\tkeys.forEach(function (key) { return addRange(_this, key, key); });\n\t\treturn this;\n\t}\n},\n\t_a[iteratorSymbol] = function () {\n\t\treturn getRangeSetIterator(this);\n\t},\n\t_a));\nfunction addRange(target, from, to) {\n\tvar diff = cmp(from, to);\n\tif (isNaN(diff))\n\t\treturn;\n\tif (diff > 0)\n\t\tthrow RangeError();\n\tif (isEmptyRange(target))\n\t\treturn extend(target, { from: from, to: to, d: 1 });\n\tvar left = target.l;\n\tvar right = target.r;\n\tif (cmp(to, target.from) < 0) {\n\t\tleft\n\t\t\t? addRange(left, from, to)\n\t\t\t: (target.l = { from: from, to: to, d: 1, l: null, r: null });\n\t\treturn rebalance(target);\n\t}\n\tif (cmp(from, target.to) > 0) {\n\t\tright\n\t\t\t? addRange(right, from, to)\n\t\t\t: (target.r = { from: from, to: to, d: 1, l: null, r: null });\n\t\treturn rebalance(target);\n\t}\n\tif (cmp(from, target.from) < 0) {\n\t\ttarget.from = from;\n\t\ttarget.l = null;\n\t\ttarget.d = right ? right.d + 1 : 1;\n\t}\n\tif (cmp(to, target.to) > 0) {\n\t\ttarget.to = to;\n\t\ttarget.r = null;\n\t\ttarget.d = target.l ? target.l.d + 1 : 1;\n\t}\n\tvar rightWasCutOff = !target.r;\n\tif (left && !target.l) {\n\t\tmergeRanges(target, left);\n\t}\n\tif (right && rightWasCutOff) {\n\t\tmergeRanges(target, right);\n\t}\n}\nfunction mergeRanges(target, newSet) {\n\tfunction _addRangeSet(target, _a) {\n\t\tvar from = _a.from, to = _a.to, l = _a.l, r = _a.r;\n\t\taddRange(target, from, to);\n\t\tif (l)\n\t\t\t_addRangeSet(target, l);\n\t\tif (r)\n\t\t\t_addRangeSet(target, r);\n\t}\n\tif (!isEmptyRange(newSet))\n\t\t_addRangeSet(target, newSet);\n}\nfunction rangesOverlap(rangeSet1, rangeSet2) {\n\tvar i1 = getRangeSetIterator(rangeSet2);\n\tvar nextResult1 = i1.next();\n\tif (nextResult1.done)\n\t\treturn false;\n\tvar a = nextResult1.value;\n\tvar i2 = getRangeSetIterator(rangeSet1);\n\tvar nextResult2 = i2.next(a.from);\n\tvar b = nextResult2.value;\n\twhile (!nextResult1.done && !nextResult2.done) {\n\t\tif (cmp(b.from, a.to) <= 0 && cmp(b.to, a.from) >= 0)\n\t\t\treturn true;\n\t\tcmp(a.from, b.from) < 0\n\t\t\t? (a = (nextResult1 = i1.next(b.from)).value)\n\t\t\t: (b = (nextResult2 = i2.next(a.from)).value);\n\t}\n\treturn false;\n}\nfunction getRangeSetIterator(node) {\n\tvar state = isEmptyRange(node) ? null : { s: 0, n: node };\n\treturn {\n\t\tnext: function (key) {\n\t\t\tvar keyProvided = arguments.length > 0;\n\t\t\twhile (state) {\n\t\t\t\tswitch (state.s) {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tstate.s = 1;\n\t\t\t\t\t\tif (keyProvided) {\n\t\t\t\t\t\t\twhile (state.n.l && cmp(key, state.n.from) < 0)\n\t\t\t\t\t\t\t\tstate = { up: state, n: state.n.l, s: 1 };\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\twhile (state.n.l)\n\t\t\t\t\t\t\t\tstate = { up: state, n: state.n.l, s: 1 };\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tstate.s = 2;\n\t\t\t\t\t\tif (!keyProvided || cmp(key, state.n.to) <= 0)\n\t\t\t\t\t\t\treturn { value: state.n, done: false };\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tif (state.n.r) {\n\t\t\t\t\t\t\tstate.s = 3;\n\t\t\t\t\t\t\tstate = { up: state, n: state.n.r, s: 0 };\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\tcase 3:\n\t\t\t\t\t\tstate = state.up;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { done: true };\n\t\t},\n\t};\n}\nfunction rebalance(target) {\n\tvar _a, _b;\n\tvar diff = (((_a = target.r) === null || _a === void 0 ? void 0 : _a.d) || 0) - (((_b = target.l) === null || _b === void 0 ? void 0 : _b.d) || 0);\n\tvar r = diff > 1 ? \"r\" : diff < -1 ? \"l\" : \"\";\n\tif (r) {\n\t\tvar l = r === \"r\" ? \"l\" : \"r\";\n\t\tvar rootClone = __assign({}, target);\n\t\tvar oldRootRight = target[r];\n\t\ttarget.from = oldRootRight.from;\n\t\ttarget.to = oldRootRight.to;\n\t\ttarget[r] = oldRootRight[r];\n\t\trootClone[r] = oldRootRight[l];\n\t\ttarget[l] = rootClone;\n\t\trootClone.d = computeDepth(rootClone);\n\t}\n\ttarget.d = computeDepth(target);\n}\nfunction computeDepth(_a) {\n\tvar r = _a.r, l = _a.l;\n\treturn (r ? (l ? Math.max(r.d, l.d) : r.d) : l ? l.d : 0) + 1;\n}\n\nvar observabilityMiddleware = {\n\tstack: \"dbcore\",\n\tlevel: 0,\n\tcreate: function (core) {\n\t\tvar dbName = core.schema.name;\n\t\tvar FULL_RANGE = new RangeSet(core.MIN_KEY, core.MAX_KEY);\n\t\treturn __assign(__assign({}, core), { table: function (tableName) {\n\t\t\t\tvar table = core.table(tableName);\n\t\t\t\tvar schema = table.schema;\n\t\t\t\tvar primaryKey = schema.primaryKey;\n\t\t\t\tvar extractKey = primaryKey.extractKey, outbound = primaryKey.outbound;\n\t\t\t\tvar tableClone = __assign(__assign({}, table), { mutate: function (req) {\n\t\t\t\t\t\tvar trans = req.trans;\n\t\t\t\t\t\tvar mutatedParts = trans.mutatedParts || (trans.mutatedParts = {});\n\t\t\t\t\t\tvar getRangeSet = function (indexName) {\n\t\t\t\t\t\t\tvar part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n\t\t\t\t\t\t\treturn (mutatedParts[part] ||\n\t\t\t\t\t\t\t\t(mutatedParts[part] = new RangeSet()));\n\t\t\t\t\t\t};\n\t\t\t\t\t\tvar pkRangeSet = getRangeSet(\"\");\n\t\t\t\t\t\tvar delsRangeSet = getRangeSet(\":dels\");\n\t\t\t\t\t\tvar type = req.type;\n\t\t\t\t\t\tvar _a = req.type === \"deleteRange\"\n\t\t\t\t\t\t\t? [req.range]\n\t\t\t\t\t\t\t: req.type === \"delete\"\n\t\t\t\t\t\t\t\t? [req.keys]\n\t\t\t\t\t\t\t\t: req.values.length < 50\n\t\t\t\t\t\t\t\t\t? [[], req.values]\n\t\t\t\t\t\t\t\t\t: [], keys = _a[0], newObjs = _a[1];\n\t\t\t\t\t\tvar oldCache = req.trans[\"_cache\"];\n\t\t\t\t\t\treturn table.mutate(req).then(function (res) {\n\t\t\t\t\t\t\tif (isArray(keys)) {\n\t\t\t\t\t\t\t\tif (type !== \"delete\")\n\t\t\t\t\t\t\t\t\tkeys = res.results;\n\t\t\t\t\t\t\t\tpkRangeSet.addKeys(keys);\n\t\t\t\t\t\t\t\tvar oldObjs = getFromTransactionCache(keys, oldCache);\n\t\t\t\t\t\t\t\tif (!oldObjs && type !== \"add\") {\n\t\t\t\t\t\t\t\t\tdelsRangeSet.addKeys(keys);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (oldObjs || newObjs) {\n\t\t\t\t\t\t\t\t\ttrackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (keys) {\n\t\t\t\t\t\t\t\tvar range = { from: keys.lower, to: keys.upper };\n\t\t\t\t\t\t\t\tdelsRangeSet.add(range);\n\t\t\t\t\t\t\t\tpkRangeSet.add(range);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\tpkRangeSet.add(FULL_RANGE);\n\t\t\t\t\t\t\t\tdelsRangeSet.add(FULL_RANGE);\n\t\t\t\t\t\t\t\tschema.indexes.forEach(function (idx) { return getRangeSet(idx.name).add(FULL_RANGE); });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t});\n\t\t\t\t\t} });\n\t\t\t\tvar getRange = function (_a) {\n\t\t\t\t\tvar _b, _c;\n\t\t\t\t\tvar _d = _a.query, index = _d.index, range = _d.range;\n\t\t\t\t\treturn [\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tnew RangeSet((_b = range.lower) !== null && _b !== void 0 ? _b : core.MIN_KEY, (_c = range.upper) !== null && _c !== void 0 ? _c : core.MAX_KEY),\n\t\t\t\t\t];\n\t\t\t\t};\n\t\t\t\tvar readSubscribers = {\n\t\t\t\t\tget: function (req) { return [primaryKey, new RangeSet(req.key)]; },\n\t\t\t\t\tgetMany: function (req) { return [primaryKey, new RangeSet().addKeys(req.keys)]; },\n\t\t\t\t\tcount: getRange,\n\t\t\t\t\tquery: getRange,\n\t\t\t\t\topenCursor: getRange,\n\t\t\t\t};\n\t\t\t\tkeys(readSubscribers).forEach(function (method) {\n\t\t\t\t\ttableClone[method] = function (req) {\n\t\t\t\t\t\tvar subscr = PSD.subscr;\n\t\t\t\t\t\tif (subscr) {\n\t\t\t\t\t\t\tvar getRangeSet = function (indexName) {\n\t\t\t\t\t\t\t\tvar part = \"idb://\" + dbName + \"/\" + tableName + \"/\" + indexName;\n\t\t\t\t\t\t\t\treturn (subscr[part] ||\n\t\t\t\t\t\t\t\t\t(subscr[part] = new RangeSet()));\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tvar pkRangeSet_1 = getRangeSet(\"\");\n\t\t\t\t\t\t\tvar delsRangeSet_1 = getRangeSet(\":dels\");\n\t\t\t\t\t\t\tvar _a = readSubscribers[method](req), queriedIndex = _a[0], queriedRanges = _a[1];\n\t\t\t\t\t\t\tgetRangeSet(queriedIndex.name || \"\").add(queriedRanges);\n\t\t\t\t\t\t\tif (!queriedIndex.isPrimaryKey) {\n\t\t\t\t\t\t\t\tif (method === \"count\") {\n\t\t\t\t\t\t\t\t\tdelsRangeSet_1.add(FULL_RANGE);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\tvar keysPromise_1 = method === \"query\" &&\n\t\t\t\t\t\t\t\t\t\toutbound &&\n\t\t\t\t\t\t\t\t\t\treq.values &&\n\t\t\t\t\t\t\t\t\t\ttable.query(__assign(__assign({}, req), { values: false }));\n\t\t\t\t\t\t\t\t\treturn table[method].apply(this, arguments).then(function (res) {\n\t\t\t\t\t\t\t\t\t\tif (method === \"query\") {\n\t\t\t\t\t\t\t\t\t\t\tif (outbound && req.values) {\n\t\t\t\t\t\t\t\t\t\t\t\treturn keysPromise_1.then(function (_a) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tvar resultingKeys = _a.result;\n\t\t\t\t\t\t\t\t\t\t\t\t\tpkRangeSet_1.addKeys(resultingKeys);\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tvar pKeys = req.values\n\t\t\t\t\t\t\t\t\t\t\t\t? res.result.map(extractKey)\n\t\t\t\t\t\t\t\t\t\t\t\t: res.result;\n\t\t\t\t\t\t\t\t\t\t\tif (req.values) {\n\t\t\t\t\t\t\t\t\t\t\t\tpkRangeSet_1.addKeys(pKeys);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\t\t\tdelsRangeSet_1.addKeys(pKeys);\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse if (method === \"openCursor\") {\n\t\t\t\t\t\t\t\t\t\t\tvar cursor_1 = res;\n\t\t\t\t\t\t\t\t\t\t\tvar wantValues_1 = req.values;\n\t\t\t\t\t\t\t\t\t\t\treturn (cursor_1 &&\n\t\t\t\t\t\t\t\t\t\t\t\tObject.create(cursor_1, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelsRangeSet_1.addKey(cursor_1.primaryKey);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn cursor_1.key;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tprimaryKey: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvar pkey = cursor_1.primaryKey;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdelsRangeSet_1.addKey(pkey);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn pkey;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tget: function () {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\twantValues_1 && pkRangeSet_1.addKey(cursor_1.primaryKey);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn cursor_1.value;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t}));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn res;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn table[method].apply(this, arguments);\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t\treturn tableClone;\n\t\t\t} });\n\t},\n};\nfunction trackAffectedIndexes(getRangeSet, schema, oldObjs, newObjs) {\n\tfunction addAffectedIndex(ix) {\n\t\tvar rangeSet = getRangeSet(ix.name || \"\");\n\t\tfunction extractKey(obj) {\n\t\t\treturn obj != null ? ix.extractKey(obj) : null;\n\t\t}\n\t\tvar addKeyOrKeys = function (key) { return ix.multiEntry && isArray(key)\n\t\t\t? key.forEach(function (key) { return rangeSet.addKey(key); })\n\t\t\t: rangeSet.addKey(key); };\n\t\t(oldObjs || newObjs).forEach(function (_, i) {\n\t\t\tvar oldKey = oldObjs && extractKey(oldObjs[i]);\n\t\t\tvar newKey = newObjs && extractKey(newObjs[i]);\n\t\t\tif (cmp(oldKey, newKey) !== 0) {\n\t\t\t\tif (oldKey != null)\n\t\t\t\t\taddKeyOrKeys(oldKey);\n\t\t\t\tif (newKey != null)\n\t\t\t\t\taddKeyOrKeys(newKey);\n\t\t\t}\n\t\t});\n\t}\n\tschema.indexes.forEach(addAffectedIndex);\n}\n\nvar Dexie$1 =  (function () {\n\tfunction Dexie(name, options) {\n\t\tvar _this = this;\n\t\tthis._middlewares = {};\n\t\tthis.verno = 0;\n\t\tvar deps = Dexie.dependencies;\n\t\tthis._options = options = __assign({\n\t\t\taddons: Dexie.addons, autoOpen: true,\n\t\t\tindexedDB: deps.indexedDB, IDBKeyRange: deps.IDBKeyRange }, options);\n\t\tthis._deps = {\n\t\t\tindexedDB: options.indexedDB,\n\t\t\tIDBKeyRange: options.IDBKeyRange\n\t\t};\n\t\tvar addons = options.addons;\n\t\tthis._dbSchema = {};\n\t\tthis._versions = [];\n\t\tthis._storeNames = [];\n\t\tthis._allTables = {};\n\t\tthis.idbdb = null;\n\t\tthis._novip = this;\n\t\tvar state = {\n\t\t\tdbOpenError: null,\n\t\t\tisBeingOpened: false,\n\t\t\tonReadyBeingFired: null,\n\t\t\topenComplete: false,\n\t\t\tdbReadyResolve: nop,\n\t\t\tdbReadyPromise: null,\n\t\t\tcancelOpen: nop,\n\t\t\topenCanceller: null,\n\t\t\tautoSchema: true,\n\t\t\tPR1398_maxLoop: 3\n\t\t};\n\t\tstate.dbReadyPromise = new DexiePromise(function (resolve) {\n\t\t\tstate.dbReadyResolve = resolve;\n\t\t});\n\t\tstate.openCanceller = new DexiePromise(function (_, reject) {\n\t\t\tstate.cancelOpen = reject;\n\t\t});\n\t\tthis._state = state;\n\t\tthis.name = name;\n\t\tthis.on = Events(this, \"populate\", \"blocked\", \"versionchange\", \"close\", { ready: [promisableChain, nop] });\n\t\tthis.on.ready.subscribe = override(this.on.ready.subscribe, function (subscribe) {\n\t\t\treturn function (subscriber, bSticky) {\n\t\t\t\tDexie.vip(function () {\n\t\t\t\t\tvar state = _this._state;\n\t\t\t\t\tif (state.openComplete) {\n\t\t\t\t\t\tif (!state.dbOpenError)\n\t\t\t\t\t\t\tDexiePromise.resolve().then(subscriber);\n\t\t\t\t\t\tif (bSticky)\n\t\t\t\t\t\t\tsubscribe(subscriber);\n\t\t\t\t\t}\n\t\t\t\t\telse if (state.onReadyBeingFired) {\n\t\t\t\t\t\tstate.onReadyBeingFired.push(subscriber);\n\t\t\t\t\t\tif (bSticky)\n\t\t\t\t\t\t\tsubscribe(subscriber);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsubscribe(subscriber);\n\t\t\t\t\t\tvar db_1 = _this;\n\t\t\t\t\t\tif (!bSticky)\n\t\t\t\t\t\t\tsubscribe(function unsubscribe() {\n\t\t\t\t\t\t\t\tdb_1.on.ready.unsubscribe(subscriber);\n\t\t\t\t\t\t\t\tdb_1.on.ready.unsubscribe(unsubscribe);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t});\n\t\tthis.Collection = createCollectionConstructor(this);\n\t\tthis.Table = createTableConstructor(this);\n\t\tthis.Transaction = createTransactionConstructor(this);\n\t\tthis.Version = createVersionConstructor(this);\n\t\tthis.WhereClause = createWhereClauseConstructor(this);\n\t\tthis.on(\"versionchange\", function (ev) {\n\t\t\tif (ev.newVersion > 0)\n\t\t\t\tconsole.warn(\"Another connection wants to upgrade database '\" + _this.name + \"'. Closing db now to resume the upgrade.\");\n\t\t\telse\n\t\t\t\tconsole.warn(\"Another connection wants to delete database '\" + _this.name + \"'. Closing db now to resume the delete request.\");\n\t\t\t_this.close();\n\t\t});\n\t\tthis.on(\"blocked\", function (ev) {\n\t\t\tif (!ev.newVersion || ev.newVersion < ev.oldVersion)\n\t\t\t\tconsole.warn(\"Dexie.delete('\" + _this.name + \"') was blocked\");\n\t\t\telse\n\t\t\t\tconsole.warn(\"Upgrade '\" + _this.name + \"' blocked by other connection holding version \" + ev.oldVersion / 10);\n\t\t});\n\t\tthis._maxKey = getMaxKey(options.IDBKeyRange);\n\t\tthis._createTransaction = function (mode, storeNames, dbschema, parentTransaction) { return new _this.Transaction(mode, storeNames, dbschema, _this._options.chromeTransactionDurability, parentTransaction); };\n\t\tthis._fireOnBlocked = function (ev) {\n\t\t\t_this.on(\"blocked\").fire(ev);\n\t\t\tconnections\n\t\t\t\t.filter(function (c) { return c.name === _this.name && c !== _this && !c._state.vcFired; })\n\t\t\t\t.map(function (c) { return c.on(\"versionchange\").fire(ev); });\n\t\t};\n\t\tthis.use(virtualIndexMiddleware);\n\t\tthis.use(hooksMiddleware);\n\t\tthis.use(observabilityMiddleware);\n\t\tthis.use(cacheExistingValuesMiddleware);\n\t\tthis.vip = Object.create(this, { _vip: { value: true } });\n\t\taddons.forEach(function (addon) { return addon(_this); });\n\t}\n\tDexie.prototype.version = function (versionNumber) {\n\t\tif (isNaN(versionNumber) || versionNumber < 0.1)\n\t\t\tthrow new exceptions.Type(\"Given version is not a positive number\");\n\t\tversionNumber = Math.round(versionNumber * 10) / 10;\n\t\tif (this.idbdb || this._state.isBeingOpened)\n\t\t\tthrow new exceptions.Schema(\"Cannot add version when database is open\");\n\t\tthis.verno = Math.max(this.verno, versionNumber);\n\t\tvar versions = this._versions;\n\t\tvar versionInstance = versions.filter(function (v) { return v._cfg.version === versionNumber; })[0];\n\t\tif (versionInstance)\n\t\t\treturn versionInstance;\n\t\tversionInstance = new this.Version(versionNumber);\n\t\tversions.push(versionInstance);\n\t\tversions.sort(lowerVersionFirst);\n\t\tversionInstance.stores({});\n\t\tthis._state.autoSchema = false;\n\t\treturn versionInstance;\n\t};\n\tDexie.prototype._whenReady = function (fn) {\n\t\tvar _this = this;\n\t\treturn (this.idbdb && (this._state.openComplete || PSD.letThrough || this._vip)) ? fn() : new DexiePromise(function (resolve, reject) {\n\t\t\tif (_this._state.openComplete) {\n\t\t\t\treturn reject(new exceptions.DatabaseClosed(_this._state.dbOpenError));\n\t\t\t}\n\t\t\tif (!_this._state.isBeingOpened) {\n\t\t\t\tif (!_this._options.autoOpen) {\n\t\t\t\t\treject(new exceptions.DatabaseClosed());\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t_this.open().catch(nop);\n\t\t\t}\n\t\t\t_this._state.dbReadyPromise.then(resolve, reject);\n\t\t}).then(fn);\n\t};\n\tDexie.prototype.use = function (_a) {\n\t\tvar stack = _a.stack, create = _a.create, level = _a.level, name = _a.name;\n\t\tif (name)\n\t\t\tthis.unuse({ stack: stack, name: name });\n\t\tvar middlewares = this._middlewares[stack] || (this._middlewares[stack] = []);\n\t\tmiddlewares.push({ stack: stack, create: create, level: level == null ? 10 : level, name: name });\n\t\tmiddlewares.sort(function (a, b) { return a.level - b.level; });\n\t\treturn this;\n\t};\n\tDexie.prototype.unuse = function (_a) {\n\t\tvar stack = _a.stack, name = _a.name, create = _a.create;\n\t\tif (stack && this._middlewares[stack]) {\n\t\t\tthis._middlewares[stack] = this._middlewares[stack].filter(function (mw) {\n\t\t\t\treturn create ? mw.create !== create :\n\t\t\t\t\tname ? mw.name !== name :\n\t\t\t\t\t\tfalse;\n\t\t\t});\n\t\t}\n\t\treturn this;\n\t};\n\tDexie.prototype.open = function () {\n\t\treturn dexieOpen(this);\n\t};\n\tDexie.prototype._close = function () {\n\t\tvar state = this._state;\n\t\tvar idx = connections.indexOf(this);\n\t\tif (idx >= 0)\n\t\t\tconnections.splice(idx, 1);\n\t\tif (this.idbdb) {\n\t\t\ttry {\n\t\t\t\tthis.idbdb.close();\n\t\t\t}\n\t\t\tcatch (e) { }\n\t\t\tthis._novip.idbdb = null;\n\t\t}\n\t\tstate.dbReadyPromise = new DexiePromise(function (resolve) {\n\t\t\tstate.dbReadyResolve = resolve;\n\t\t});\n\t\tstate.openCanceller = new DexiePromise(function (_, reject) {\n\t\t\tstate.cancelOpen = reject;\n\t\t});\n\t};\n\tDexie.prototype.close = function () {\n\t\tthis._close();\n\t\tvar state = this._state;\n\t\tthis._options.autoOpen = false;\n\t\tstate.dbOpenError = new exceptions.DatabaseClosed();\n\t\tif (state.isBeingOpened)\n\t\t\tstate.cancelOpen(state.dbOpenError);\n\t};\n\tDexie.prototype.delete = function () {\n\t\tvar _this = this;\n\t\tvar hasArguments = arguments.length > 0;\n\t\tvar state = this._state;\n\t\treturn new DexiePromise(function (resolve, reject) {\n\t\t\tvar doDelete = function () {\n\t\t\t\t_this.close();\n\t\t\t\tvar req = _this._deps.indexedDB.deleteDatabase(_this.name);\n\t\t\t\treq.onsuccess = wrap(function () {\n\t\t\t\t\t_onDatabaseDeleted(_this._deps, _this.name);\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t\treq.onerror = eventRejectHandler(reject);\n\t\t\t\treq.onblocked = _this._fireOnBlocked;\n\t\t\t};\n\t\t\tif (hasArguments)\n\t\t\t\tthrow new exceptions.InvalidArgument(\"Arguments not allowed in db.delete()\");\n\t\t\tif (state.isBeingOpened) {\n\t\t\t\tstate.dbReadyPromise.then(doDelete);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdoDelete();\n\t\t\t}\n\t\t});\n\t};\n\tDexie.prototype.backendDB = function () {\n\t\treturn this.idbdb;\n\t};\n\tDexie.prototype.isOpen = function () {\n\t\treturn this.idbdb !== null;\n\t};\n\tDexie.prototype.hasBeenClosed = function () {\n\t\tvar dbOpenError = this._state.dbOpenError;\n\t\treturn dbOpenError && (dbOpenError.name === 'DatabaseClosed');\n\t};\n\tDexie.prototype.hasFailed = function () {\n\t\treturn this._state.dbOpenError !== null;\n\t};\n\tDexie.prototype.dynamicallyOpened = function () {\n\t\treturn this._state.autoSchema;\n\t};\n\tObject.defineProperty(Dexie.prototype, \"tables\", {\n\t\tget: function () {\n\t\t\tvar _this = this;\n\t\t\treturn keys(this._allTables).map(function (name) { return _this._allTables[name]; });\n\t\t},\n\t\tenumerable: false,\n\t\tconfigurable: true\n\t});\n\tDexie.prototype.transaction = function () {\n\t\tvar args = extractTransactionArgs.apply(this, arguments);\n\t\treturn this._transaction.apply(this, args);\n\t};\n\tDexie.prototype._transaction = function (mode, tables, scopeFunc) {\n\t\tvar _this = this;\n\t\tvar parentTransaction = PSD.trans;\n\t\tif (!parentTransaction || parentTransaction.db !== this || mode.indexOf('!') !== -1)\n\t\t\tparentTransaction = null;\n\t\tvar onlyIfCompatible = mode.indexOf('?') !== -1;\n\t\tmode = mode.replace('!', '').replace('?', '');\n\t\tvar idbMode, storeNames;\n\t\ttry {\n\t\t\tstoreNames = tables.map(function (table) {\n\t\t\t\tvar storeName = table instanceof _this.Table ? table.name : table;\n\t\t\t\tif (typeof storeName !== 'string')\n\t\t\t\t\tthrow new TypeError(\"Invalid table argument to Dexie.transaction(). Only Table or String are allowed\");\n\t\t\t\treturn storeName;\n\t\t\t});\n\t\t\tif (mode == \"r\" || mode === READONLY)\n\t\t\t\tidbMode = READONLY;\n\t\t\telse if (mode == \"rw\" || mode == READWRITE)\n\t\t\t\tidbMode = READWRITE;\n\t\t\telse\n\t\t\t\tthrow new exceptions.InvalidArgument(\"Invalid transaction mode: \" + mode);\n\t\t\tif (parentTransaction) {\n\t\t\t\tif (parentTransaction.mode === READONLY && idbMode === READWRITE) {\n\t\t\t\t\tif (onlyIfCompatible) {\n\t\t\t\t\t\tparentTransaction = null;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthrow new exceptions.SubTransaction(\"Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY\");\n\t\t\t\t}\n\t\t\t\tif (parentTransaction) {\n\t\t\t\t\tstoreNames.forEach(function (storeName) {\n\t\t\t\t\t\tif (parentTransaction && parentTransaction.storeNames.indexOf(storeName) === -1) {\n\t\t\t\t\t\t\tif (onlyIfCompatible) {\n\t\t\t\t\t\t\t\tparentTransaction = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthrow new exceptions.SubTransaction(\"Table \" + storeName +\n\t\t\t\t\t\t\t\t\t\" not included in parent transaction.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (onlyIfCompatible && parentTransaction && !parentTransaction.active) {\n\t\t\t\t\tparentTransaction = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn parentTransaction ?\n\t\t\t\tparentTransaction._promise(null, function (_, reject) { reject(e); }) :\n\t\t\t\trejection(e);\n\t\t}\n\t\tvar enterTransaction = enterTransactionScope.bind(null, this, idbMode, storeNames, parentTransaction, scopeFunc);\n\t\treturn (parentTransaction ?\n\t\t\tparentTransaction._promise(idbMode, enterTransaction, \"lock\") :\n\t\t\tPSD.trans ?\n\t\t\t\tusePSD(PSD.transless, function () { return _this._whenReady(enterTransaction); }) :\n\t\t\t\tthis._whenReady(enterTransaction));\n\t};\n\tDexie.prototype.table = function (tableName) {\n\t\tif (!hasOwn(this._allTables, tableName)) {\n\t\t\tthrow new exceptions.InvalidTable(\"Table \" + tableName + \" does not exist\");\n\t\t}\n\t\treturn this._allTables[tableName];\n\t};\n\treturn Dexie;\n}());\n\nvar symbolObservable = typeof Symbol !== \"undefined\" && \"observable\" in Symbol\n\t? Symbol.observable\n\t: \"@@observable\";\nvar Observable =  (function () {\n\tfunction Observable(subscribe) {\n\t\tthis._subscribe = subscribe;\n\t}\n\tObservable.prototype.subscribe = function (x, error, complete) {\n\t\treturn this._subscribe(!x || typeof x === \"function\" ? { next: x, error: error, complete: complete } : x);\n\t};\n\tObservable.prototype[symbolObservable] = function () {\n\t\treturn this;\n\t};\n\treturn Observable;\n}());\n\nfunction extendObservabilitySet(target, newSet) {\n\tkeys(newSet).forEach(function (part) {\n\t\tvar rangeSet = target[part] || (target[part] = new RangeSet());\n\t\tmergeRanges(rangeSet, newSet[part]);\n\t});\n\treturn target;\n}\n\nfunction liveQuery(querier) {\n\treturn new Observable(function (observer) {\n\t\tvar scopeFuncIsAsync = isAsyncFunction(querier);\n\t\tfunction execute(subscr) {\n\t\t\tif (scopeFuncIsAsync) {\n\t\t\t\tincrementExpectedAwaits();\n\t\t\t}\n\t\t\tvar exec = function () { return newScope(querier, { subscr: subscr, trans: null }); };\n\t\t\tvar rv = PSD.trans\n\t\t\t\t?\n\t\t\t\tusePSD(PSD.transless, exec)\n\t\t\t\t: exec();\n\t\t\tif (scopeFuncIsAsync) {\n\t\t\t\trv.then(decrementExpectedAwaits, decrementExpectedAwaits);\n\t\t\t}\n\t\t\treturn rv;\n\t\t}\n\t\tvar closed = false;\n\t\tvar accumMuts = {};\n\t\tvar currentObs = {};\n\t\tvar subscription = {\n\t\t\tget closed() {\n\t\t\t\treturn closed;\n\t\t\t},\n\t\t\tunsubscribe: function () {\n\t\t\t\tclosed = true;\n\t\t\t\tglobalEvents.storagemutated.unsubscribe(mutationListener);\n\t\t\t},\n\t\t};\n\t\tobserver.start && observer.start(subscription);\n\t\tvar querying = false, startedListening = false;\n\t\tfunction shouldNotify() {\n\t\t\treturn keys(currentObs).some(function (key) {\n\t\t\t\treturn accumMuts[key] && rangesOverlap(accumMuts[key], currentObs[key]);\n\t\t\t});\n\t\t}\n\t\tvar mutationListener = function (parts) {\n\t\t\textendObservabilitySet(accumMuts, parts);\n\t\t\tif (shouldNotify()) {\n\t\t\t\tdoQuery();\n\t\t\t}\n\t\t};\n\t\tvar doQuery = function () {\n\t\t\tif (querying || closed)\n\t\t\t\treturn;\n\t\t\taccumMuts = {};\n\t\t\tvar subscr = {};\n\t\t\tvar ret = execute(subscr);\n\t\t\tif (!startedListening) {\n\t\t\t\tglobalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, mutationListener);\n\t\t\t\tstartedListening = true;\n\t\t\t}\n\t\t\tquerying = true;\n\t\t\tPromise.resolve(ret).then(function (result) {\n\t\t\t\tquerying = false;\n\t\t\t\tif (closed)\n\t\t\t\t\treturn;\n\t\t\t\tif (shouldNotify()) {\n\t\t\t\t\tdoQuery();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\taccumMuts = {};\n\t\t\t\t\tcurrentObs = subscr;\n\t\t\t\t\tobserver.next && observer.next(result);\n\t\t\t\t}\n\t\t\t}, function (err) {\n\t\t\t\tquerying = false;\n\t\t\t\tobserver.error && observer.error(err);\n\t\t\t\tsubscription.unsubscribe();\n\t\t\t});\n\t\t};\n\t\tdoQuery();\n\t\treturn subscription;\n\t});\n}\n\nvar domDeps;\ntry {\n\tdomDeps = {\n\t\tindexedDB: _global.indexedDB || _global.mozIndexedDB || _global.webkitIndexedDB || _global.msIndexedDB,\n\t\tIDBKeyRange: _global.IDBKeyRange || _global.webkitIDBKeyRange\n\t};\n}\ncatch (e) {\n\tdomDeps = { indexedDB: null, IDBKeyRange: null };\n}\n\nvar Dexie = Dexie$1;\nprops(Dexie, __assign(__assign({}, fullNameExceptions), {\n\tdelete: function (databaseName) {\n\t\tvar db = new Dexie(databaseName, { addons: [] });\n\t\treturn db.delete();\n\t},\n\texists: function (name) {\n\t\treturn new Dexie(name, { addons: [] }).open().then(function (db) {\n\t\t\tdb.close();\n\t\t\treturn true;\n\t\t}).catch('NoSuchDatabaseError', function () { return false; });\n\t},\n\tgetDatabaseNames: function (cb) {\n\t\ttry {\n\t\t\treturn getDatabaseNames(Dexie.dependencies).then(cb);\n\t\t}\n\t\tcatch (_a) {\n\t\t\treturn rejection(new exceptions.MissingAPI());\n\t\t}\n\t},\n\tdefineClass: function () {\n\t\tfunction Class(content) {\n\t\t\textend(this, content);\n\t\t}\n\t\treturn Class;\n\t}, ignoreTransaction: function (scopeFunc) {\n\t\treturn PSD.trans ?\n\t\t\tusePSD(PSD.transless, scopeFunc) :\n\t\t\tscopeFunc();\n\t}, vip: vip, async: function (generatorFn) {\n\t\treturn function () {\n\t\t\ttry {\n\t\t\t\tvar rv = awaitIterator(generatorFn.apply(this, arguments));\n\t\t\t\tif (!rv || typeof rv.then !== 'function')\n\t\t\t\t\treturn DexiePromise.resolve(rv);\n\t\t\t\treturn rv;\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\treturn rejection(e);\n\t\t\t}\n\t\t};\n\t}, spawn: function (generatorFn, args, thiz) {\n\t\ttry {\n\t\t\tvar rv = awaitIterator(generatorFn.apply(thiz, args || []));\n\t\t\tif (!rv || typeof rv.then !== 'function')\n\t\t\t\treturn DexiePromise.resolve(rv);\n\t\t\treturn rv;\n\t\t}\n\t\tcatch (e) {\n\t\t\treturn rejection(e);\n\t\t}\n\t},\n\tcurrentTransaction: {\n\t\tget: function () { return PSD.trans || null; }\n\t}, waitFor: function (promiseOrFunction, optionalTimeout) {\n\t\tvar promise = DexiePromise.resolve(typeof promiseOrFunction === 'function' ?\n\t\t\t\tDexie.ignoreTransaction(promiseOrFunction) :\n\t\t\t\tpromiseOrFunction)\n\t\t\t.timeout(optionalTimeout || 60000);\n\t\treturn PSD.trans ?\n\t\t\tPSD.trans.waitFor(promise) :\n\t\t\tpromise;\n\t},\n\tPromise: DexiePromise,\n\tdebug: {\n\t\tget: function () { return debug; },\n\t\tset: function (value) {\n\t\t\tsetDebug(value, value === 'dexie' ? function () { return true; } : dexieStackFrameFilter);\n\t\t}\n\t},\n\tderive: derive, extend: extend, props: props, override: override,\n\tEvents: Events, on: globalEvents, liveQuery: liveQuery, extendObservabilitySet: extendObservabilitySet,\n\tgetByKeyPath: getByKeyPath, setByKeyPath: setByKeyPath, delByKeyPath: delByKeyPath, shallowClone: shallowClone, deepClone: deepClone, getObjectDiff: getObjectDiff, cmp: cmp, asap: asap$1,\n\tminKey: minKey,\n\taddons: [],\n\tconnections: connections,\n\terrnames: errnames,\n\tdependencies: domDeps,\n\tsemVer: DEXIE_VERSION, version: DEXIE_VERSION.split('.')\n\t\t.map(function (n) { return parseInt(n); })\n\t\t.reduce(function (p, c, i) { return p + (c / Math.pow(10, i * 2)); }) }));\nDexie.maxKey = getMaxKey(Dexie.dependencies.IDBKeyRange);\n\nif (typeof dispatchEvent !== 'undefined' && typeof addEventListener !== 'undefined') {\n\tglobalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (updatedParts) {\n\t\tif (!propagatingLocally) {\n\t\t\tvar event_1;\n\t\t\tif (isIEOrEdge) {\n\t\t\t\tevent_1 = document.createEvent('CustomEvent');\n\t\t\t\tevent_1.initCustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, true, true, updatedParts);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tevent_1 = new CustomEvent(STORAGE_MUTATED_DOM_EVENT_NAME, {\n\t\t\t\t\tdetail: updatedParts\n\t\t\t\t});\n\t\t\t}\n\t\t\tpropagatingLocally = true;\n\t\t\tdispatchEvent(event_1);\n\t\t\tpropagatingLocally = false;\n\t\t}\n\t});\n\taddEventListener(STORAGE_MUTATED_DOM_EVENT_NAME, function (_a) {\n\t\tvar detail = _a.detail;\n\t\tif (!propagatingLocally) {\n\t\t\tpropagateLocally(detail);\n\t\t}\n\t});\n}\nfunction propagateLocally(updateParts) {\n\tvar wasMe = propagatingLocally;\n\ttry {\n\t\tpropagatingLocally = true;\n\t\tglobalEvents.storagemutated.fire(updateParts);\n\t}\n\tfinally {\n\t\tpropagatingLocally = wasMe;\n\t}\n}\nvar propagatingLocally = false;\n\nif (typeof BroadcastChannel !== 'undefined') {\n\tvar bc_1 = new BroadcastChannel(STORAGE_MUTATED_DOM_EVENT_NAME);\n\tglobalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n\t\tif (!propagatingLocally) {\n\t\t\tbc_1.postMessage(changedParts);\n\t\t}\n\t});\n\tbc_1.onmessage = function (ev) {\n\t\tif (ev.data)\n\t\t\tpropagateLocally(ev.data);\n\t};\n}\nelse if (typeof self !== 'undefined' && typeof navigator !== 'undefined') {\n\tglobalEvents(DEXIE_STORAGE_MUTATED_EVENT_NAME, function (changedParts) {\n\t\ttry {\n\t\t\tif (!propagatingLocally) {\n\t\t\t\tif (typeof localStorage !== 'undefined') {\n\t\t\t\t\tlocalStorage.setItem(STORAGE_MUTATED_DOM_EVENT_NAME, JSON.stringify({\n\t\t\t\t\t\ttrig: Math.random(),\n\t\t\t\t\t\tchangedParts: changedParts,\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\tif (typeof self['clients'] === 'object') {\n\t\t\t\t\t__spreadArray([], self['clients'].matchAll({ includeUncontrolled: true }), true).forEach(function (client) {\n\t\t\t\t\t\treturn client.postMessage({\n\t\t\t\t\t\t\ttype: STORAGE_MUTATED_DOM_EVENT_NAME,\n\t\t\t\t\t\t\tchangedParts: changedParts,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (_a) { }\n\t});\n\tif (typeof addEventListener !== 'undefined') {\n\t\taddEventListener('storage', function (ev) {\n\t\t\tif (ev.key === STORAGE_MUTATED_DOM_EVENT_NAME) {\n\t\t\t\tvar data = JSON.parse(ev.newValue);\n\t\t\t\tif (data)\n\t\t\t\t\tpropagateLocally(data.changedParts);\n\t\t\t}\n\t\t});\n\t}\n\tvar swContainer = self.document && navigator.serviceWorker;\n\tif (swContainer) {\n\t\tswContainer.addEventListener('message', propagateMessageLocally);\n\t}\n}\nfunction propagateMessageLocally(_a) {\n\tvar data = _a.data;\n\tif (data && data.type === STORAGE_MUTATED_DOM_EVENT_NAME) {\n\t\tpropagateLocally(data.changedParts);\n\t}\n}\n\nDexiePromise.rejectionMapper = mapError;\nsetDebug(debug, dexieStackFrameFilter);\n\n// backward compatibility with Dexie 2 usages\nwindow.BX.Dexie = Dexie$1;\n\nexport {\n\tDexie$1 as Dexie,\n\tliveQuery,\n\tRangeSet,\n\tmergeRanges,\n\trangesOverlap\n}"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","pack","l","ar","Array","slice","concat","_global","globalThis","self","window","global","keys","isArray","Promise","extend","obj","extension","forEach","key","getProto","getPrototypeOf","_hasOwn","hasOwn","prop","props","proto","Reflect","ownKeys","setProp","defineProperty","functionOrGetSet","options","get","set","configurable","value","writable","derive","Child","Parent","create","bind","getOwnPropertyDescriptor","getPropertyDescriptor","pd","_slice","args","start","end","override","origFunc","overridedFactory","assert","b","Error","asap$1","fn","setImmediate","setTimeout","arrayToObject","array","extractor","reduce","result","item","nameAndValue","tryCatch","onerror","ex","getByKeyPath","keyPath","rv","val","push","period","indexOf","innerObj","substr","undefined","setByKeyPath","isFrozen","currentKeyPath","remainingKeyPath","isNaN","parseInt","splice","delByKeyPath","map","kp","shallowClone","m","flatten","a","intrinsicTypeNames","split","num","filter","intrinsicTypes","x","circularRefs","deepClone","any","WeakMap","innerDeepClone","constructor","toString","toStringTag","o","iteratorSymbol","Symbol","iterator","getIteratorOf","NO_CHAR_ARRAY","getArrayOf","arrayLike","it","next","done","isAsyncFunction","debug","location","test","href","setDebug","libraryFilter","NEEDS_THROW_FOR_STACK","stack","getErrorWithStack","e","prettyStack","exception","numIgnoredFrames","name","message","frame","join","dexieErrorNames","idbDomErrorNames","errorList","defaultTexts","VersionChanged","DatabaseClosed","Abort","TransactionInactive","MissingAPI","DexieError","msg","_e","_stack","getMultiErrorMessage","failures","v","ModifyError","successCount","failedKeys","BulkError","pos","failuresByPos","errnames","BaseException","exceptions","fullName","msgOrInner","inner","Syntax","SyntaxError","Type","TypeError","Range","RangeError","exceptionMap","mapError","domError","fullNameExceptions","nop","mirror","pureFunctionChain","f1","f2","callBoth","on1","on2","hookCreatingChain","res","onsuccess","res2","hookDeletingChain","hookUpdatingChain","modifications","reverseStoppableEventChain","promisableChain","then","thiz","INTERNAL","LONG_STACKS_CLIP_LIMIT","MAX_LONG_STACKS","ZONE_ECHO_LIMIT","_a$1","globalP","resolve","crypto","subtle","nativeP","digest","Uint8Array","resolvedNativePromise","nativePromiseProto","resolvedGlobalPromise","nativePromiseThen","NativePromise","patchGlobalPromise","stack_being_generated","schedulePhysicalTick","physicalTick","MutationObserver","hiddenDiv","document","createElement","observe","attributes","setAttribute","asap","callback","microtickQueue","needsNewPhysicalTick","isOutsideMicroTick","unhandledErrors","rejectingErrors","currentFulfiller","rejectionMapper","globalPSD","id","ref","unhandleds","onunhandled","globalError","pgp","env","finalize","uh","PSD","numScheduledCalls","tickFinalizers","DexiePromise","_listeners","onuncatched","_lib","psd","_PSD","_stackHolder","_prev","_numPrev","_state","_value","handleRejection","executePromiseTask","thenProp","microTaskId","totalEchoes","onFulfilled","onRejected","_this","possibleAwait","cleanup","decrementExpectedAwaits","reject","propagateToListener","Listener","nativeAwaitCompatibleWrap","linkToPreviousPromise","_then","type","handler","err","PromiseReject","onFinally","stacks","getStack","timeout","ms","Infinity","handle","Timeout","clearTimeout","snapShot","zone","all","values","onPossibleParallellAsync","remaining","race","newPSD","newScope","usePSD","scheduler","follow","zoneProps","run_at_end_of_this_or_next_physical_tick","allSettled","possiblePromises","results","status","reason","AggregateError","failure","promise","shouldExecuteTick","beginMicroTickScope","propagateAllListeners","endMicroTickScope","_promise","origProp","addPossiblyUnhandledError","listeners","len","finalizePhysicalTick","listener","cb","callListener","ret","markErrorAsHandled","limit","errorName","prev","numPrev","wasRootExec","callbacks","unhandledErrs","finalizers","finalizer","some","wrap","errorCatcher","outerScope","switchToZone","task","awaits","echoes","taskCounter","zoneStack","zoneEchoes","zone_id_counter","a1","a2","parent","globalEnv","PromiseProp","nthen","getPatchedPromiseThen","gthen","incrementExpectedAwaits","possiblePromise","rejection","zoneEnterEcho","targetZone","zoneLeaveEcho","pop","bEnteringZone","currentZone","enqueueNativeMicroTask","GlobalPromise_1","targetEnv","GlobalPromise","a3","job","outerZone","origThen","onResolved","UNHANDLEDREJECTION","event","eventData","createEvent","initEvent","CustomEvent","detail","dispatchEvent","PromiseRejectionEvent","onunhandledrejection","_","defaultPrevented","console","warn","tempTransaction","db","mode","storeNames","idbdb","openComplete","letThrough","_vip","dbOpenError","isBeingOpened","_options","autoOpen","open","dbReadyPromise","trans","_createTransaction","_dbSchema","PR1398_maxLoop","InvalidState","isOpen","_close","_completion","DEXIE_VERSION","maxString","String","fromCharCode","minKey","INVALID_KEY_ARGUMENT","STRING_EXPECTED","connections","isIEOrEdge","navigator","userAgent","hasIEDeleteObjectStoreBug","hangsOnDeleteLargeKeyRange","dexieStackFrameFilter","DBNAMES_DB","READONLY","READWRITE","combine","filter1","filter2","AnyRange","lower","lowerOpen","upper","upperOpen","workaroundForUndefinedPrimKey","Table","_trans","writeLocked","_tx","tableName","checkTableInTransaction","schema","NotFound","idbtrans","transless","keyOrCrit","where","first","core","hook","reading","fire","indexOrCrit","WhereClause","keyPaths","equals","compoundIndex","indexes","primKey","ix","compound","every","_maxKey","JSON","stringify","idxByName","idb","_deps","indexedDB","cmp","_a","prevIndex","prevFilterFn","index","multi","idx","filterFunction","toCollection","and","count","thenShortcut","offset","numRows","each","toArray","Collection","orderBy","reverse","mapToClass","mappedClass","readHook","unsubscribe","defineClass","Class","content","add","auto","objToAdd","mutate","numFailures","lastResult","update","keyOrObject","InvalidArgument","modify","put","clear","range","bulkGet","getMany","bulkAdd","objects","keysOrOptions","wantResults","allKeys","numObjects","objectsToAdd","bulkPut","objectsToPut","bulkDelete","numKeys","Events","ctx","evs","eventName","subscriber","subscribe","addEventType","chainFunction","defaultFunction","addConfiguredEvents","context","subscribers","cfg","fireEvent","makeClassConstructor","createTableConstructor","tableSchema","_allTables","isPlainKeyRange","ignoreLimitFilter","algorithm","or","justLimit","replayFilter","addFilter","addReplayFilter","factory","isLimitFilter","curr","addMatchFilter","isMatch","getIndexOrStore","coreSchema","isPrimKey","primaryKey","getIndexByKeyPath","Schema","openCursor","coreTable","keysOnly","dir","unique","query","iter","coreTrans","iterate","valueMapper","set_1","union","cursor","advance","stop","fail","_iterate","cursorPromise","mappedFn","c","wrappedFn","advancer","ta","tb","NaN","compareUint8Arrays","getUint8Array","compareArrays","al","bl","ArrayBuffer","isView","tsTag","buffer","byteOffset","byteLength","_read","_ctx","error","table","_write","_addAlgorithm","clone","raw","Math","min","sortBy","parts","lastPart","lastIndex","getval","order","sorter","aVal","bVal","sort","valueMapper_1","a_1","offsetLeft","rowsLeft","until","bIncludeStopEntry","last","indexName","_ondirectionchange","desc","eachKey","eachUniqueKey","eachPrimaryKey","primaryKeys","uniqueKeys","firstKey","lastKey","distinct","strKey","found","changes","modifyer","anythingModified","outbound","extractKey","modifyChunkSize","totalFailures","applyMutateResult","expectedCount","_i","nextChunk","cache","addValues","putValues","putKeys","deleteKeys","origValue","ctx_1","criteria","deleteCallback","changeSpec","coreRange","createCollectionConstructor","whereClause","keyRangeGenerator","keyRange","whereCtx","readingHook","simpleCompare","simpleCompareReverse","collectionOrWhereClause","T","collection","emptyCollection","rangeEqual","upperFactory","toUpperCase","toLowerCase","lowerFactory","nextCasing","lowerKey","upperNeedle","lowerNeedle","llp","lwrKeyChar","addIgnoreCaseAlgorithm","match","needles","suffix","compare","upperNeedles","lowerNeedles","direction","nextKeySuffix","needlesLen","initDirection","needleBounds","needle","nb","createRange","firstPossibleNeedle","lowestPossibleCasing","casing","enumerable","between","includeLower","includeUpper","_cmp","above","aboveOrEqual","below","belowOrEqual","startsWith","str","startsWithIgnoreCase","equalsIgnoreCase","anyOfIgnoreCase","startsWithAnyOfIgnoreCase","anyOf","_ascending","_descending","notEqual","inAnyRange","includeLowers","includeUppers","noneOf","ranges","ascending","descending","_min","max","_max","addRange","newRange","sortDirection","rangeSorter","rangePos","keyIsBeyondCurrentEntry","keyIsBeforeCurrentEntry","keyWithinCurrentRange","checkKey","startsWithAnyOf","createWhereClauseConstructor","orCollection","_IDBKeyRange","IDBKeyRange","eventRejectHandler","preventDefault","target","stopPropagation","DEXIE_STORAGE_MUTATED_EVENT_NAME","STORAGE_MUTATED_DOM_EVENT_NAME","globalEvents","Transaction","_lock","_reculock","lockOwnerFor","_unlock","_blockedFuncs","_locked","fnAndPSD","shift","OpenFailed","active","transaction","durability","chromeTransactionDurability","ev","_reject","onabort","on","oncomplete","_resolve","storagemutated","bWriteLock","ReadOnly","_root","waitFor","promiseLike","root","_waitingFor","_waitingQueue","store","objectStore","spin","_spinCount","currentWaitPromise","abort","memoizedTables","_memoizedTables","transactionBoundTable","createTransactionConstructor","dbschema","complete","wasActive","createIndexSpec","src","nameFromKeyPath","createTableSchema","safariMultiStoreFix","getMaxKey","IdbKeyRange","only","getKeyExtractor","getSinglePathKeyExtractor","arrayify","_id_counter","getKeyPathAlias","createDBCore","tmpTrans","extractSchema","tables","objectStoreNames","autoIncrement","indexByKeyPath","isPrimaryKey","indexNames","multiEntry","hasGetAll","makeIDBKeyRange","idbRange","upperBound","lowerBound","bound","createDbCoreTable","isAddOrPut","req","reqs","errorHandler","args1","args2","source","openKeyCursor","___id","_cursorContinue","_cursorContinuePrimaryKey","continuePrimaryKey","_cursorAdvance","doThrowCursorIsNotStarted","doThrowCursorIsStopped","gotOne","iterationPromise","resolveIteration","rejectIteration","guardedCallback","request","nonInfinitLimit","idbKeyRange","getAll","getAllKeys","count_1","req_1","result_1","keyCount","callbackCount","successHandler","_pos","tableMap","MIN_KEY","MAX_KEY","createMiddlewareStack","stackImpl","middlewares","down","createMiddlewareStacks","dbcore","generateMiddlewareStacks","_novip","_middlewares","tbl","setApiOnPlace","objs","tableNames","propDesc","removeTablesApi","lowerVersionFirst","_cfg","version","runUpgraders","oldVersion","idbUpgradeTrans","globalSchema","_storeNames","rejectTransaction","createTable","populate","updateTablesAndIndexes","queue","versions","_versions","buildGlobalSchema","anyContentUpgraderHasRun","versToRun","oldSchema","newSchema","adjustToExistingIndexNames","diff","getSchemaDiff","tuple","change","recreate","Upgrade","store_1","addIndex","deleteIndex","del","idxName","contentUpgrade","upgradeSchema_1","contentUpgradeIsAsync_1","returnValue_1","promiseFollowed","decrementor","deleteRemovedTables","runQueue","createMissingTables","oldDef","newDef","def","oldIndexes","newIndexes","oldIdx","newIdx","createObjectStore","contains","storeName","deleteObjectStore","createIndex","dbStoreNames","j","idbindex","readGlobalSchema","verno","verifyInstalledSchema","installedSchema","ch","_hasGetAll","dexieName","indexSpec","WorkerGlobalScope","parseIndexSyntax","primKeyAndIndexes","indexNum","trim","replace","Version","_parseStoresSpec","stores","outSchema","storesSource","storesSpec","upgrade","upgradeFunction","createVersionConstructor","versionNumber","getDbNamesTable","dbNamesDB","Dexie$1","addons","dbnames","hasDatabasesNative","databases","getDatabaseNames","infos","info","_onDatabaseCreated","_onDatabaseDeleted","vip","idbReady","isSafari","userAgentData","intervalId","tryIdb","setInterval","clearInterval","dexieOpen","state","openCanceller","throwIfCancelled","resolveDbReady","dbReadyResolve","upgradeTransaction","wasCreated","dbName","autoSchema","round","onblocked","_fireOnBlocked","onupgradeneeded","allowEmptyDB","close","delreq","deleteDatabase","NoSuchDatabase","oldVer","pow","onversionchange","vcFired","onclose","onReadyBeingFired","ready","fireRemainders","remainders_1","awaitIterator","callNext","doThrow","onSuccess","step","onError","getNext","extractTransactionArgs","_tableArgs_","scopeFunc","enterTransactionScope","parentTransaction","scopeFuncIsAsync","returnValue","PrematureCommit","pad","createVirtualIndexMiddleware","indexLookup","allVirtualIndexes","addVirtualIndexes","keyTail","lowLevelIndex","keyPathAlias","indexList","keyLength","isVirtual","virtualIndex","virtualKeyPath","findBestIndex","translateRange","translateRequest","createVirtualCursor","_continue","virtualCursor","virtualIndexMiddleware","level","getObjectDiff","prfx","ap","bp","apTypeName","bpTypeName","getEffectiveKeys","hooksMiddleware","downCore","downTable","tableMiddleware","dxTrans","deleting","creating","updating","addPutOrDelete","deleteRange","getExistingValues","existingValues","contexts","existingValue","generatedPrimaryKey","objectDiff","additionalChanges_1","requestedValue_1","deleteNextChunk","effectiveKeys","getFromTransactionCache","cacheExistingValuesMiddleware","cachedResult","isEmptyRange","node","RangeSet","fromOrTree","d","rangeSet","mergeRanges","addKey","addKeys","getRangeSetIterator","left","right","r","rebalance","rightWasCutOff","newSet","_addRangeSet","rangesOverlap","rangeSet1","rangeSet2","i1","nextResult1","i2","nextResult2","keyProvided","up","_b","rootClone","oldRootRight","computeDepth","observabilityMiddleware","FULL_RANGE","tableClone","mutatedParts","getRangeSet","part","pkRangeSet","delsRangeSet","newObjs","oldCache","oldObjs","trackAffectedIndexes","getRange","_c","_d","readSubscribers","method","subscr","pkRangeSet_1","delsRangeSet_1","queriedIndex","queriedRanges","keysPromise_1","resultingKeys","pKeys","cursor_1","wantValues_1","pkey","addAffectedIndex","addKeyOrKeys","oldKey","newKey","Dexie","deps","dependencies","cancelOpen","bSticky","db_1","newVersion","use","addon","versionInstance","_whenReady","unuse","mw","hasArguments","doDelete","backendDB","hasBeenClosed","hasFailed","dynamicallyOpened","_transaction","onlyIfCompatible","idbMode","SubTransaction","enterTransaction","InvalidTable","symbolObservable","observable","Observable","_subscribe","extendObservabilitySet","liveQuery","querier","observer","execute","exec","closed","accumMuts","currentObs","subscription","mutationListener","querying","startedListening","shouldNotify","doQuery","domDeps","mozIndexedDB","webkitIndexedDB","msIndexedDB","webkitIDBKeyRange","databaseName","exists","ignoreTransaction","async","generatorFn","spawn","currentTransaction","promiseOrFunction","optionalTimeout","semVer","maxKey","addEventListener","updatedParts","propagatingLocally","event_1","initCustomEvent","propagateLocally","updateParts","wasMe","BroadcastChannel","bc_1","changedParts","postMessage","onmessage","data","localStorage","setItem","trig","random","matchAll","includeUncontrolled","client","parse","newValue","swContainer","serviceWorker","propagateMessageLocally","BX"],"mappings":"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"}