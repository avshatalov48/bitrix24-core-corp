this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,s,t,i,a,o,l){"use strict";let n=e=>e,r,d,c,b,u,p,h,v,f,B,P;const g=BX.UI;const y=BX.SidePanel;function F(e={}){e=Object.assign({},e);e.design=Object.assign({},e.design||{});e.design={margin:true,section:true,...e.design};e.extensions=(e.extensions||[]).concat(["ui.sidepanel.layout","ui.buttons"]);if(e.toolbar){e.extensions.push("ui.buttons.icons")}if(e.design.section){e.extensions.push("ui.sidepanel-content")}if(e.menu){e.extensions.push("ui.sidepanel.menu")}return e}var L=babelHelpers.classPrivateFieldLooseKey("container");var H=babelHelpers.classPrivateFieldLooseKey("containerFooter");var m=babelHelpers.classPrivateFieldLooseKey("options");var C=babelHelpers.classPrivateFieldLooseKey("menu");var T=babelHelpers.classPrivateFieldLooseKey("getScrollWidth");var j=babelHelpers.classPrivateFieldLooseKey("adjustFooter");var w=babelHelpers.classPrivateFieldLooseKey("onMenuItemClick");class X{static createContent(e={}){e=F(e);return top.BX.Runtime.loadExtension(e.extensions).then((()=>new X(e).render()))}static createLayout(e={}){e=F(e);return top.BX.Runtime.loadExtension(e.extensions).then((()=>new X(e)))}constructor(e={}){Object.defineProperty(this,w,{value:x});Object.defineProperty(this,j,{value:I});Object.defineProperty(this,T,{value:E});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,C,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,m)[m]=F(e);const s=babelHelpers.classPrivateFieldLooseBase(this,m)[m].menu;if(s){babelHelpers.classPrivateFieldLooseBase(this,C)[C]=new l.Menu(Object.assign(s));if(i.Type.isUndefined(s.contentAttribute)){s.contentAttribute="data-menu-item-id"}if(s.contentAttribute){babelHelpers.classPrivateFieldLooseBase(this,C)[C].subscribe("click",(e=>{babelHelpers.classPrivateFieldLooseBase(this,w)[w]((e.getData()||{}).item)}))}}}getContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,L)[L]){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=i.Tag.render(r||(r=n`<div class="ui-sidepanel-layout"></div>`))}return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}getMenu(){return babelHelpers.classPrivateFieldLooseBase(this,C)[C]}getFooterContainer(){if(!babelHelpers.classPrivateFieldLooseBase(this,H)[H]){babelHelpers.classPrivateFieldLooseBase(this,H)[H]=i.Tag.render(d||(d=n`<div class="ui-sidepanel-layout-footer"></div>`))}return babelHelpers.classPrivateFieldLooseBase(this,H)[H]}render(e="",s=false){if(babelHelpers.classPrivateFieldLooseBase(this,m)[m].content&&!s){e=babelHelpers.classPrivateFieldLooseBase(this,m)[m].content();if(Object.prototype.toString.call(e)==="[object Promise]"||e.toString&&e.toString()==="[object BX.Promise]"){return e.then((e=>this.render(e,true)))}}const t=this.getContainer();t.innerHTML="";if(babelHelpers.classPrivateFieldLooseBase(this,m)[m].title){const e=i.Tag.safe(c||(c=n`${0}`),babelHelpers.classPrivateFieldLooseBase(this,m)[m].title);const s=i.Tag.render(b||(b=n`
				<div class="ui-sidepanel-layout-header">
					<div class="ui-sidepanel-layout-title">${0}</div>
				</div>
			`),e);if(i.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,m)[m].toolbar)){const e=i.Tag.render(u||(u=n`<div class="ui-sidepanel-layout-toolbar"></div>`));babelHelpers.classPrivateFieldLooseBase(this,m)[m].toolbar({...g}).forEach((s=>{if(s instanceof o.BaseButton){s.renderTo(e)}else if(i.Type.isDomNode(s)){e.appendChild(s)}else{throw i.BaseError("Wrong button type "+s)}}));s.appendChild(e)}t.appendChild(s)}{const s=babelHelpers.classPrivateFieldLooseBase(this,m)[m].design;const a=["ui-sidepanel-layout-content"];const o=[];if(s.margin){if(s.margin===true){a.push("ui-sidepanel-layout-content-margin")}else{o.push("margin: "+s.margin)}}let l=i.Tag.render(p||(p=n`<div class="${0}" style="${0}"></div>`),a.join(" "),o.join("; "));t.appendChild(l);if(babelHelpers.classPrivateFieldLooseBase(this,C)[C]){babelHelpers.classPrivateFieldLooseBase(this,C)[C].renderTo(l)}l.appendChild(i.Tag.render(h||(h=n`<div class="ui-sidepanel-layout-content-inner"></div>`)));l=l.lastElementChild;if(s.section){l.appendChild(i.Tag.render(v||(v=n`<div class="ui-slider-section ui-sidepanel-layout-content-fill-height"></div>`)));l=l.firstElementChild}if(typeof e==="string"){l.innerHTML=e}else if(e instanceof Element){l.appendChild(e)}if(babelHelpers.classPrivateFieldLooseBase(this,C)[C]){babelHelpers.classPrivateFieldLooseBase(this,w)[w](babelHelpers.classPrivateFieldLooseBase(this,C)[C].getActiveItem(),l)}}const a=typeof babelHelpers.classPrivateFieldLooseBase(this,m)[m].buttons==="undefined";if(typeof babelHelpers.classPrivateFieldLooseBase(this,m)[m].buttons==="function"||a){const e=new o.CancelButton({onclick:()=>y.Instance.close()});const s=new o.CloseButton({onclick:()=>y.Instance.close()});const l={...g,cancelButton:e,closeButton:s};if(a){babelHelpers.classPrivateFieldLooseBase(this,m)[m].buttons=()=>[s]}const r=babelHelpers.classPrivateFieldLooseBase(this,m)[m].buttons(l);if(r&&r.length>0){t.appendChild(i.Tag.render(f||(f=n`<div class="ui-sidepanel-layout-footer-anchor"></div>`)));const e=["ui-sidepanel-layout-buttons"];if(babelHelpers.classPrivateFieldLooseBase(this,m)[m].design.alignButtonsLeft){e.push("ui-sidepanel-layout-buttons-align-left")}const s=i.Tag.render(B||(B=n`<div class="${0}"></div>`),e.join(" "));this.getFooterContainer().appendChild(s);r.forEach((e=>{if(e instanceof o.BaseButton){e.renderTo(s)}else if(i.Type.isDomNode(e)){s.appendChild(e)}else{throw i.BaseError("Wrong button type "+e)}}));t.appendChild(this.getFooterContainer())}}setTimeout((()=>{this.afterRender()}));return t}afterRender(){babelHelpers.classPrivateFieldLooseBase(this,j)[j]();const e=i.Runtime.throttle(babelHelpers.classPrivateFieldLooseBase(this,j)[j],300,this);i.Event.bind(window,"resize",e);const s=y.Instance.getTopSlider();if(s){a.EventEmitter.subscribeOnce(s,"SidePanel.Slider:onDestroy",(()=>{i.Event.unbind(window,"resize",e)}))}}}function E(){const e=i.Tag.render(P||(P=n`<div style="overflow-y: scroll; width: 50px; height: 50px; opacity: 0; pointer-events: none; position: absolute;"></div>`));document.body.appendChild(e);const s=e.offsetWidth-e.clientWidth;i.Dom.remove(e);return s}function I(){const e=this.getContainer().parentNode;if(e.scrollWidth>e.offsetWidth){i.Dom.style(this.getFooterContainer(),"bottom",babelHelpers.classPrivateFieldLooseBase(this,T)[T]()+"px")}else{i.Dom.style(this.getFooterContainer(),"bottom",0)}}function x(e,s=null){if(!e){return}const t=e.getId();let i=babelHelpers.classPrivateFieldLooseBase(this,m)[m].menu.contentAttribute;if(!i){return}s=s||babelHelpers.classPrivateFieldLooseBase(this,L)[L];let a=s.querySelectorAll(`[${i}]`);a=Array.prototype.slice.call(a);a.forEach((e=>{e.hidden=e.getAttribute(i)!==t}))}e.Layout=X})(this.BX.UI.SidePanel=this.BX.UI.SidePanel||{},BX,BX,BX,BX.Event,BX.UI,BX.UI.SidePanel);
//# sourceMappingURL=sidepanel.layout.bundle.map.js