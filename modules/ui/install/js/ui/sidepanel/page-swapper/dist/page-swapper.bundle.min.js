this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,s,t,i,a,r){"use strict";let l=e=>e,o;var n=babelHelpers.classPrivateFieldLooseKey("disableClass");var h=babelHelpers.classPrivateFieldLooseKey("setPrevButton");var d=babelHelpers.classPrivateFieldLooseKey("setNextButton");var p=babelHelpers.classPrivateFieldLooseKey("setButtonHref");var u=babelHelpers.classPrivateFieldLooseKey("toggleButton");var P=babelHelpers.classPrivateFieldLooseKey("renderWrapper");var v=babelHelpers.classPrivateFieldLooseKey("activateOverlay");var b=babelHelpers.classPrivateFieldLooseKey("setNeighboursHref");var g=babelHelpers.classPrivateFieldLooseKey("addListenerToButton");var c=babelHelpers.classPrivateFieldLooseKey("isAnyPageSet");class f extends t.EventEmitter{constructor(e){super(e);Object.defineProperty(this,c,{value:m});Object.defineProperty(this,g,{value:w});Object.defineProperty(this,b,{value:F});Object.defineProperty(this,v,{value:E});Object.defineProperty(this,P,{value:y});Object.defineProperty(this,u,{value:I});Object.defineProperty(this,p,{value:L});Object.defineProperty(this,d,{value:B});Object.defineProperty(this,h,{value:H});Object.defineProperty(this,n,{writable:true,value:"ui-swap-btn-disabled"});this.btnSize=20;this.setEventNamespace("BX.UI.Sidepanel.PageSwapper");this.slider=e.slider||null;this.container=e.container||null;this.pagesHref=e.pagesHref||null;this.useLoader=e.useLoader||false;this.pageType=e.pageType||"default"}init(){if(!this.slider){console.warn("BX.UI.SliderPageSwapper.Preview: 'slider' is not defined");return}if(!this.container){console.warn("BX.UI.SliderPageSwapper.Preview: 'container' is not defined");return}this.window=this.slider.getFrameWindow();this.curHref=this.slider.url;this.pageId=this.slider.getData().get("pageId");if(!babelHelpers.classPrivateFieldLooseBase(this,c)[c]()){babelHelpers.classPrivateFieldLooseBase(this,b)[b]()}babelHelpers.classPrivateFieldLooseBase(this,h)[h]();babelHelpers.classPrivateFieldLooseBase(this,d)[d]();this.setTitles(this.pageType);this.getWrapper();babelHelpers.classPrivateFieldLooseBase(this,P)[P]()}setPrevPage(e=null,s=null){if(e){this.prevPageId=e}if(s){this.prevPageHref=s}babelHelpers.classPrivateFieldLooseBase(this,p)[p](this.getPrevButton(),this.prevPageId,this.prevPageHref)}setNextPage(e=null,s=null){if(e){this.nextPageId=e}if(s){this.nextPageHref=s}babelHelpers.classPrivateFieldLooseBase(this,p)[p](this.getNextButton(),this.nextPageId,this.nextPageHref)}updatePagesHref(e){this.showLoader();babelHelpers.classPrivateFieldLooseBase(this,b)[b](e);this.setPrevPage();this.setNextPage();this.hideLoader()}getPrevButton(){return this.prevBtn}getNextButton(){return this.nextBtn}getWrapper(){if(!this.wrapper){this.wrapper=s.Tag.render(o||(o=l`
				<div class='ui-page-swapper'>
					${0}
					${0}
				</div>
			`),this.getPrevButton(),this.getNextButton())}return this.wrapper}hasPagesBeforeEnd(e=0){if(e===0){return!s.Type.isUndefined(this.nextPageHref)&&!s.Type.isNull(this.nextPageHref)}if(e>0&&s.Type.isNumber(e)){let t=null;Object.keys(this.pagesHref).forEach((s=>{if(Number(this.pagesHref[s].ID)===this.pageId){var i;t=((i=this.pagesHref[Number(s)+e])==null?void 0:i.HREF)||null}}));return!s.Type.isNull(t)}return false}showLoader(){if(this.loader&&!this.loader.isShown()){this.loader.show();s.Dom.style(this.getPrevButton(),"visibility","hidden");s.Dom.style(this.getNextButton(),"visibility","hidden")}}hideLoader(){if(this.loader&&this.loader.isShown()){this.loader.hide();s.Dom.style(this.getPrevButton(),"visibility","visible");s.Dom.style(this.getNextButton(),"visibility","visible")}}setTitles(e){if(e==="mail"){this.prevBtn.setAttribute("title",s.Loc.getMessage("UI_SIDEPANEL_PAGE_SWAPPER_PREVIOUS_MAIL_MESSAGE"));this.nextBtn.setAttribute("title",s.Loc.getMessage("UI_SIDEPANEL_PAGE_SWAPPER_NEXT_MAIL_MESSAGE"))}}}function H(){const e=new i.Icon({icon:i.Actions.CHEVRON_LEFT,size:this.btnSize});this.prevBtn=e.render();s.Dom.addClass(this.getPrevButton(),"ui-page-swap-left");babelHelpers.classPrivateFieldLooseBase(this,p)[p](this.getPrevButton(),this.prevPageId,this.prevPageHref)}function B(){const e=new i.Icon({icon:i.Actions.CHEVRON_RIGHT,size:this.btnSize});this.nextBtn=e.render();s.Dom.addClass(this.getNextButton(),"ui-page-swap-right");babelHelpers.classPrivateFieldLooseBase(this,p)[p](this.getNextButton(),this.nextPageId,this.nextPageHref)}function L(e,t=null,i=null){if(t&&i){babelHelpers.classPrivateFieldLooseBase(this,g)[g](e,t,i);this.hideLoader()}else{s.Event.unbindAll(e,"click")}babelHelpers.classPrivateFieldLooseBase(this,u)[u](e,t,i)}function I(e,t,i){if(s.Dom.hasClass(e,babelHelpers.classPrivateFieldLooseBase(this,n)[n])&&t&&i){s.Dom.removeClass(e,babelHelpers.classPrivateFieldLooseBase(this,n)[n]);s.Dom.style(e,"cursor","pointer")}else if(!s.Dom.hasClass(e,babelHelpers.classPrivateFieldLooseBase(this,n)[n])&&!(t&&i)){s.Dom.addClass(e,babelHelpers.classPrivateFieldLooseBase(this,n)[n]);s.Dom.style(e,"cursor","not-allowed")}}function y(){s.Dom.append(this.getWrapper(),this.container);this.loader=new r.Loader({target:this.getWrapper(),size:20,mode:"absolute"});if(this.useLoader&&!babelHelpers.classPrivateFieldLooseBase(this,c)[c]()){this.showLoader()}else{this.hideLoader()}}function E(){const e=this.slider.layout.loader;if(e){s.Dom.style(e,"opacity",.5);s.Dom.style(e,"display","block")}}function F(e=null){if(e){this.pagesHref=e}if(!this.pagesHref){return}if(!this.pageId){this.pagesHref.forEach((e=>{if(e.HREF.includes(this.curHref)){this.pageId=Number(e.ID)}}))}this.prevPageId=null;this.prevPageHref=null;this.nextPageId=null;this.nextPageHref=null;if(!this.pageId){return}Object.keys(this.pagesHref).forEach((e=>{if(Number(this.pagesHref[e].ID)===this.pageId){var s,t,i,a;this.prevPageId=Number((s=this.pagesHref[e-1])==null?void 0:s.ID)||null;this.prevPageHref=((t=this.pagesHref[e-1])==null?void 0:t.HREF)||null;this.nextPageId=Number((i=this.pagesHref[Number(e)+1])==null?void 0:i.ID)||null;this.nextPageHref=((a=this.pagesHref[Number(e)+1])==null?void 0:a.HREF)||null}}))}function w(e,t,i){s.Event.bind(e,"click",(()=>{this.slider.getData().set("pageId",t);const e=new URL(i,window.location);e.searchParams.append("IFRAME_TYPE","SIDE_SLIDER");e.searchParams.append("IFRAME","Y");babelHelpers.classPrivateFieldLooseBase(this,v)[v]();this.window.location.href=e}))}function m(){return this.prevPageId&&this.prevPageHref||this.nextPageId&&this.nextPageHref}e.PageSwapper=f})(this.BX.UI.SidePanel=this.BX.UI.SidePanel||{},BX,BX.Event,BX.UI.IconSet,BX,BX);
//# sourceMappingURL=page-swapper.bundle.map.js