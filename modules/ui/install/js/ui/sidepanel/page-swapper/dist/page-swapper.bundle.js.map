{"version":3,"file":"page-swapper.bundle.js","sources":["../src/page-swapper.js"],"sourcesContent":["import { Dom, Tag, Event, Type, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport './style.css';\nimport { Actions, Icon } from 'ui.icon-set.api.core';\nimport 'ui.icon-set.actions';\nimport { Loader } from 'main.loader';\n\ntype Option = {\n\tslider: BX.SidePanel.Slider,\n\tcontainer: HTMLElement,\n\tpagesHref: Array<PagesHref>,\n\tuseLoader: boolean,\n\tpageType: string,\n};\n\ntype PagesHref = {\n\tID: number,\n\tHREF: string,\n};\n\nexport class PageSwapper extends EventEmitter\n{\n\t#disableClass = 'ui-swap-btn-disabled';\n\tbtnSize = 20;\n\n\tconstructor(options: Option)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.UI.Sidepanel.PageSwapper');\n\t\tthis.slider = options.slider || null;\n\t\tthis.container = options.container || null;\n\t\tthis.pagesHref = options.pagesHref || null;\n\t\tthis.useLoader = options.useLoader || false;\n\t\tthis.pageType = options.pageType || 'default';\n\t}\n\n\tinit(): void\n\t{\n\t\tif (!this.slider)\n\t\t{\n\t\t\tconsole.warn('BX.UI.SliderPageSwapper.Preview: \\'slider\\' is not defined');\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.container)\n\t\t{\n\t\t\tconsole.warn('BX.UI.SliderPageSwapper.Preview: \\'container\\' is not defined');\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.window = this.slider.getFrameWindow();\n\t\tthis.curHref = this.slider.url;\n\t\tthis.pageId = this.slider.getData().get('pageId');\n\n\t\tif (!this.#isAnyPageSet())\n\t\t{\n\t\t\tthis.#setNeighboursHref();\n\t\t}\n\t\tthis.#setPrevButton();\n\t\tthis.#setNextButton();\n\t\tthis.setTitles(this.pageType);\n\t\tthis.getWrapper();\n\t\tthis.#renderWrapper();\n\t}\n\n\tsetPrevPage(prevPageId: number = null, prevPageHref: string = null): void\n\t{\n\t\tif (prevPageId)\n\t\t{\n\t\t\tthis.prevPageId = prevPageId;\n\t\t}\n\n\t\tif (prevPageHref)\n\t\t{\n\t\t\tthis.prevPageHref = prevPageHref;\n\t\t}\n\n\t\tthis.#setButtonHref(this.getPrevButton(), this.prevPageId, this.prevPageHref);\n\t}\n\n\tsetNextPage(nextPageId: number = null, nextPageHref: string = null): void\n\t{\n\t\tif (nextPageId)\n\t\t{\n\t\t\tthis.nextPageId = nextPageId;\n\t\t}\n\n\t\tif (nextPageHref)\n\t\t{\n\t\t\tthis.nextPageHref = nextPageHref;\n\t\t}\n\n\t\tthis.#setButtonHref(this.getNextButton(), this.nextPageId, this.nextPageHref);\n\t}\n\n\tupdatePagesHref(pagesHref: Array<PagesHref>): void\n\t{\n\t\tthis.showLoader();\n\t\tthis.#setNeighboursHref(pagesHref);\n\t\tthis.setPrevPage();\n\t\tthis.setNextPage();\n\t\tthis.hideLoader();\n\t}\n\n\t#setPrevButton(): void\n\t{\n\t\tconst icon = new Icon({\n\t\t\ticon: Actions.CHEVRON_LEFT,\n\t\t\tsize: this.btnSize,\n\t\t});\n\n\t\tthis.prevBtn = icon.render();\n\t\tDom.addClass(this.getPrevButton(), 'ui-page-swap-left');\n\t\tthis.#setButtonHref(this.getPrevButton(), this.prevPageId, this.prevPageHref);\n\t}\n\n\t#setNextButton(): void\n\t{\n\t\tconst icon = new Icon({\n\t\t\ticon: Actions.CHEVRON_RIGHT,\n\t\t\tsize: this.btnSize,\n\t\t});\n\n\t\tthis.nextBtn = icon.render();\n\t\tDom.addClass(this.getNextButton(), 'ui-page-swap-right');\n\t\tthis.#setButtonHref(this.getNextButton(), this.nextPageId, this.nextPageHref);\n\t}\n\n\tgetPrevButton(): Node\n\t{\n\t\treturn this.prevBtn;\n\t}\n\n\tgetNextButton(): Node\n\t{\n\t\treturn this.nextBtn;\n\t}\n\n\t#setButtonHref(button: node, pageId: number = null, pageHref: string = null): void\n\t{\n\t\tif (pageId && pageHref)\n\t\t{\n\t\t\tthis.#addListenerToButton(button, pageId, pageHref);\n\t\t\tthis.hideLoader();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.unbindAll(button, 'click');\n\t\t}\n\t\tthis.#toggleButton(button, pageId, pageHref);\n\t}\n\n\t#toggleButton(button: node, pageId: number, pageHref: string): void\n\t{\n\t\tif (Dom.hasClass(button, this.#disableClass) && pageId && pageHref)\n\t\t{\n\t\t\tDom.removeClass(button, this.#disableClass);\n\t\t\tDom.style(button, 'cursor', 'pointer');\n\t\t}\n\t\telse if (!Dom.hasClass(button, this.#disableClass) && !(pageId && pageHref))\n\t\t{\n\t\t\tDom.addClass(button, this.#disableClass);\n\t\t\tDom.style(button, 'cursor', 'not-allowed');\n\t\t}\n\t}\n\n\tgetWrapper(): Node\n\t{\n\t\tif (!this.wrapper)\n\t\t{\n\t\t\tthis.wrapper = Tag.render`\n\t\t\t\t<div class='ui-page-swapper'>\n\t\t\t\t\t${this.getPrevButton()}\n\t\t\t\t\t${this.getNextButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.wrapper;\n\t}\n\n\t#renderWrapper(): void\n\t{\n\t\tDom.append(this.getWrapper(), this.container);\n\n\t\tthis.loader = new Loader({\n\t\t\ttarget: this.getWrapper(),\n\t\t\tsize: 20,\n\t\t\tmode: 'absolute',\n\n\t\t});\n\n\t\tif (this.useLoader && !this.#isAnyPageSet())\n\t\t{\n\t\t\tthis.showLoader();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hideLoader();\n\t\t}\n\t}\n\n\t#activateOverlay(): void\n\t{\n\t\tconst loader = this.slider.layout.loader;\n\t\tif (loader)\n\t\t{\n\t\t\tDom.style(loader, 'opacity', 0.5);\n\t\t\tDom.style(loader, 'display', 'block');\n\t\t}\n\t}\n\n\t#setNeighboursHref(pagesHref: Array<PagesHref> = null): void\n\t{\n\t\tif (pagesHref)\n\t\t{\n\t\t\tthis.pagesHref = pagesHref;\n\t\t}\n\n\t\tif (!this.pagesHref)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.pageId)\n\t\t{\n\t\t\tthis.pagesHref.forEach((page) => {\n\t\t\t\tif (page.HREF.includes(this.curHref))\n\t\t\t\t{\n\t\t\t\t\tthis.pageId = Number(page.ID);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.prevPageId = null;\n\t\tthis.prevPageHref = null;\n\t\tthis.nextPageId = null;\n\t\tthis.nextPageHref = null;\n\n\t\tif (!this.pageId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tObject.keys(this.pagesHref).forEach((key) => {\n\t\t\tif (Number(this.pagesHref[key].ID) === this.pageId)\n\t\t\t{\n\t\t\t\tthis.prevPageId = Number(this.pagesHref[key - 1]?.ID) || null;\n\t\t\t\tthis.prevPageHref = this.pagesHref[key - 1]?.HREF || null;\n\t\t\t\tthis.nextPageId = Number(this.pagesHref[Number(key) + 1]?.ID) || null;\n\t\t\t\tthis.nextPageHref = this.pagesHref[Number(key) + 1]?.HREF || null;\n\t\t\t}\n\t\t});\n\t}\n\n\t#addListenerToButton(button: node, pageId: number, pageHref: string): void\n\t{\n\t\tEvent.bind(button, 'click', () => {\n\t\t\tthis.slider.getData().set('pageId', pageId);\n\t\t\tconst url = new URL(pageHref, window.location);\n\t\t\turl.searchParams.append('IFRAME_TYPE', 'SIDE_SLIDER');\n\t\t\turl.searchParams.append('IFRAME', 'Y');\n\t\t\tthis.#activateOverlay();\n\t\t\tthis.window.location.href = url;\n\t\t});\n\t}\n\n\thasPagesBeforeEnd(pagesBeforeEnd: number = 0): boolean\n\t{\n\t\tif (pagesBeforeEnd === 0)\n\t\t{\n\t\t\treturn (!Type.isUndefined(this.nextPageHref) && !Type.isNull(this.nextPageHref));\n\t\t}\n\n\t\tif (pagesBeforeEnd > 0 && Type.isNumber(pagesBeforeEnd))\n\t\t{\n\t\t\tlet check = null;\n\t\t\tObject.keys(this.pagesHref).forEach((key) => {\n\t\t\t\tif (Number(this.pagesHref[key].ID) === this.pageId)\n\t\t\t\t{\n\t\t\t\t\tcheck = this.pagesHref[Number(key) + pagesBeforeEnd]?.HREF || null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn !Type.isNull(check);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t#isAnyPageSet(): boolean\n\t{\n\t\treturn (this.prevPageId && this.prevPageHref) || (this.nextPageId && this.nextPageHref);\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tif (this.loader && !this.loader.isShown())\n\t\t{\n\t\t\tthis.loader.show();\n\t\t\tDom.style(this.getPrevButton(), 'visibility', 'hidden');\n\t\t\tDom.style(this.getNextButton(), 'visibility', 'hidden');\n\t\t}\n\t}\n\n\thideLoader(): void\n\t{\n\t\tif (this.loader && this.loader.isShown())\n\t\t{\n\t\t\tthis.loader.hide();\n\t\t\tDom.style(this.getPrevButton(), 'visibility', 'visible');\n\t\t\tDom.style(this.getNextButton(), 'visibility', 'visible');\n\t\t}\n\t}\n\n\tsetTitles(type: string): void {\n\t\tif (type === 'mail')\n\t\t{\n\t\t\tthis.prevBtn.setAttribute('title', Loc.getMessage('UI_SIDEPANEL_PAGE_SWAPPER_PREVIOUS_MAIL_MESSAGE'));\n\t\t\tthis.nextBtn.setAttribute('title', Loc.getMessage('UI_SIDEPANEL_PAGE_SWAPPER_NEXT_MAIL_MESSAGE'));\n\t\t}\n\t}\n}\n"],"names":["PageSwapper","EventEmitter","constructor","options","btnSize","setEventNamespace","slider","container","pagesHref","useLoader","pageType","init","console","warn","window","getFrameWindow","curHref","url","pageId","getData","get","setTitles","getWrapper","setPrevPage","prevPageId","prevPageHref","getPrevButton","setNextPage","nextPageId","nextPageHref","getNextButton","updatePagesHref","showLoader","hideLoader","prevBtn","nextBtn","wrapper","Tag","render","hasPagesBeforeEnd","pagesBeforeEnd","Type","isUndefined","isNull","isNumber","check","Object","keys","forEach","key","Number","ID","HREF","loader","isShown","show","Dom","style","hide","type","setAttribute","Loc","getMessage","icon","Icon","Actions","CHEVRON_LEFT","size","addClass","CHEVRON_RIGHT","button","pageHref","Event","unbindAll","hasClass","removeClass","append","Loader","target","mode","layout","page","includes","bind","set","URL","location","searchParams","href"],"mappings":"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"}