jn.define("sign/master/steps/fields-input-step/fields-layout",((e,t,s)=>{const{DateTimeInput:i,InputSize:n,InputMode:o,InputDesign:r,DatePickerType:a}=e("ui-system/form/inputs/datetime");const{makeLibraryImagePath:l}=e("ui-system/blocks/status-block");const{CardBanner:d}=e("ui-system/blocks/banners/card-banner");const{StringInput:u}=e("ui-system/form/inputs/string");const{SelectInput:c}=e("sign/master/steps/fields-input-step/fields-layout/select-input");const{Card:h,CardDesign:m}=e("ui-system/layout/card");const{H5:g}=e("ui-system/typography/heading");const{useCallback:p}=e("utils/function");const{Icon:y}=e("ui-system/blocks/icon");const{Indent:f,Component:C,Color:T}=e("tokens");const{trim:b}=e("utils/string");const{date:S}=e("utils/date/formats");const{Moment:E}=e("utils/date");const{Loc:_}=e("loc");class I extends LayoutComponent{constructor(e){super(e);this.state={};this.selectFields=[];this.fieldRefs=[];this.changeButtonStatus=e.changeButtonStatus}componentDidMount(){this.updateFields();Keyboard.on(Keyboard.Event.WillShow,(()=>{this.scrollTo()}))}#e=()=>{Keyboard.dismiss()};#t=(e,t)=>{this.setState({[t]:e});const s=this.props.fields.every((e=>{if(e.required){const t=b(this.state[e.uid]);return t!==undefined&&t!==null&&t!==""}return true}));this.changeButtonStatus(s,this.state)};#s=e=>{this.position=this.fieldRefs[e];this.scrollTo()};scrollTo(){this.scrollViewRef.scrollTo({y:130+45*this.position,animated:true})}formatFields(){this.fields=this.props.fields.reduce(((e,t)=>{if(t.name===null||t.name===""||t.name===undefined){return e}this.fieldRefs[t.uid]=e.counter;switch(t.type){case"string":return{fields:[...e.fields,View({style:{height:65}},u({onSubmit:this.#e,value:this.state[t.uid],label:t.name,placeholder:_.getMessage("SIGN_MOBILE_MASTER_FIELDS_INPUT_STEP_TEXT_INPUT_PLACEHOLDER"),enableKeyboardHide:false,onChange:p((e=>this.#t(e,t.uid)),[t.uid]),onFocus:p((()=>this.#s(t.uid)),[t.uid]),size:n.L,design:r.GREY,mode:o.STROKE,style:{marginTop:10}}))],counter:e.counter+1};case"list":return{fields:[...e.fields,View({style:{height:65}},c({id:t.uid,title:t.name,value:this.state[t.uid],size:n.L,design:r.GREY,mode:o.STROKE,onContentClick:p((()=>this.#s(t.uid)),[t.uid]),onChange:p((e=>this.#t(e,t.uid)),[t.uid]),erase:false,withFocused:true,config:{items:t.items.map((e=>({value:e.code,name:e.label})))},style:{marginTop:10}}))],counter:e.counter+1};case"date":return{fields:[...e.fields,View({style:{height:65}},i({label:t.name,defaultListTitle:t.name,value:this.state[t.uid],size:n.L,mode:o.STROKE,design:r.GREY,rightStickContent:y.CALENDAR_WITH_SLOTS,erase:false,withFocused:true,enableTime:false,datePickerType:a.DATE,dateFormatter:this.getFormattedDate,checkTimezoneOffset:false,onContentClick:p((()=>this.#s(t.uid)),[t.uid]),onChange:p((e=>this.#t(e,t.uid)),[t.uid]),style:{marginTop:10}}))],counter:e.counter+1};default:return e}}),{fields:[],counter:1}).fields}updateFields(){this.props.fields.forEach((e=>{this.setState({[e.uid]:e.value})}))}getFormattedDate(e){if(!e){return""}const t=new E(e*1e3);return t.format(S())}renderText({text:e,typography:t,style:s}){return typeof e==="string"?t({text:e,style:s}):View({style:s},e)}render(){this.formatFields();const e=h({hideCross:true,onClick:this.#e,design:m.PRIMARY,border:true,excludePaddingSide:{left:true,bottom:true}},View({clickable:true,onClick:this.#e},this.renderText({type:"title",text:_.getMessage("SIGN_MOBILE_MASTER_DOCUMENT_CARD_DOCUMENT"),typography:g,style:{marginBottom:f.XS.toNumber(),marginLeft:C.cardPaddingLr.toNumber()}}),d({onClick:this.#e,image:Image({svg:{uri:l("document.svg","empty-states","sign")},style:{width:28,height:36}}),title:this.props.templateTitle,description:_.getMessage("SIGN_MOBILE_MASTER_DOCUMENT_CARD_INN",{"#COMPANY_NAME#":this.props.company.name,"#COMPANY_TAX_ID#":this.props.company.taxId}),hideCross:true,design:m.PRIMARY})));const t=this.renderText({type:"title",text:_.getMessage("SIGN_MOBILE_MASTER_DOCUMENT_CARD_DOCUMENT_INFO"),typography:g,style:{height:20,marginTop:30,marginBottom:f.XS.toNumber()}});return ScrollView({style:{flex:1,margin:"5%",backgroundColor:T.bgContentPrimary.toHex()},ref:e=>{this.scrollViewRef=e}},View({clickable:true,onClick:this.#e},e,t,...this.fields))}}s.exports={FieldsLayout:I}}));
//# sourceMappingURL=extension.map.js