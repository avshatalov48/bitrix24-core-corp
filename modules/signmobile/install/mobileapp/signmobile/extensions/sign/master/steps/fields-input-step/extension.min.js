jn.define("sign/master/steps/fields-input-step",((t,e,s)=>{const{FieldsLayout:a}=t("sign/master/steps/fields-input-step/fields-layout");const{WizardStep:i}=t("layout/ui/wizard/step");const{Banner:n}=t("sign/banner");const{date:r}=t("utils/date/formats");const{Moment:l}=t("utils/date");const{trim:o}=t("utils/string");const{Color:p}=t("tokens");const{Loc:d}=t("loc");const{CreateDocument:u}=t("sign/document/create");class c extends i{constructor(t){super(t);this.selectedTemplate=t.selectedTemplate;this.data=t.data;const e={};this.nextStepOpen=this.data.fields.every((t=>{if(t.required){e[t.uid]=o(t.value);return e[t.uid]!==undefined&&e[t.uid]!==null&&e[t.uid]!==""}return true}));this.props.data.fillFields=e}createLayout(){return View({style:{flex:1,backgroundColor:p.bgContentPrimary.toHex()}},this.isFieldsEmpty()?new n({ref:t=>{this.banner=t},imageName:"creation.svg",title:d.getMessage("SIGN_MOBILE_MASTER_INPUT_STEP_EMPTY_STATE_TITLE"),description:d.getMessage("SIGN_MOBILE_MASTER_INPUT_STEP_EMPTY_STATE_DESCRIPTION",{"#SELECTED_TEMPLATE_TITLE#":`[B]${String(this.selectedTemplate.data.title)}[/B]`})}):new a({templateTitle:this.selectedTemplate.data.title,company:this.selectedTemplate.data.company,fields:this.props.data.fields,changeButtonStatus:this.changeButtonStatus.bind(this)}))}onMoveToNextStep(t){const e=this.props.data.fields.map((t=>({name:t.uid,value:this.prepareField(t.type,t.uid)})));this.props.layout.close((()=>{new u({providerCodeForAnalytics:this.props.data.providerCodeForAnalytics,templateUid:this.selectedTemplate.data.uid,analyticsEvent:this.props.analyticsEvent,title:this.selectedTemplate.data.title,fromAvaMenu:this.props.fromAvaMenu,baseLayout:this.props.baseLayout,preparedFields:e}).launch()}));return true}prepareField=(t,e)=>{const s=this.props.data.fillFields[e];if(t==="date"){const t=new l(s*1e3);return t.format(r())}return s};getTitle(){return d.getMessage("SIGN_MOBILE_MASTER_FIELDS_INPUT_STEP_TITLE")}isNeedToSkip(){return false}getNextStepButtonText(){return d.getMessage("SIGN_MOBILE_MASTER_FIELDS_INPUT_STEP_NEXT_STEP_BUTTON_TEXT")}isNextStepEnabled(){return this.nextStepOpen}isPrevStepEnabled(){return true}changeButtonStatus(t,e){this.props.data.fillFields=e;this.nextStepOpen=t;this.stepAvailabilityChangeCallback(t)}resizableByKeyboard(){return true}isFieldsEmpty(){return this.props.data.fields&&Object.keys(this.props.data.fields).length===0}getLeftButtons(){return false}getRightButtons(){return[{type:"cross",isCloseButton:true,callback:()=>this.props.layout.close()}]}}s.exports={FieldsInputStep:c}}));
//# sourceMappingURL=extension.map.js