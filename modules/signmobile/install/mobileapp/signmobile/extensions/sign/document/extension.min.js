jn.define("sign/document",((t,e,i)=>{const{Card:s}=t("ui-system/layout/card");const{ButtonSize:o,ButtonDesign:n,Button:a}=t("ui-system/form/buttons/button");const{Indent:l,Color:r}=t("tokens");const{Loc:d}=t("loc");const{ResponseMobile:I}=t("sign/dialog/banners/responsemobile");const{RefusedJustNow:_}=t("sign/dialog/banners/refusedjustnow");const{InitiatedByType:E}=t("sign/type/initiated-by-type");const{External:T}=t("sign/dialog/banners/external");const{NotifyManager:N}=t("notify-manager");const{showConfirm:c}=t("sign/dialog/banners/template");const{rejectConfirmation:u}=t("sign/connector");const h=Application.getPlatform()==="ios";const y="https://www.gosuslugi.ru/select-app-goskey";class m extends LayoutComponent{constructor(t){super(t);const{url:e,widget:i,memberId:s,hideButtons:o,title:n,isGoskey:a,isExternal:l,initiatedByType:r}=t;this.layout=i;this.url=e;this.memberId=s;this.hideButtons=o;this.isGoskey=a;this.isExternal=l;this.title=n;this.initiatedByType=r}clearHeader(){this.layout.setTitle({text:""});this.layout.setRightButtons([]);this.layout.setLeftButtons([])}render(){const t=E.isInitiatedByEmployee(this.initiatedByType)?"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_REJECT_BY_EMPLOYEE_TITLE":"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_REJECT_TITLE";return View({style:{backgroundColor:r.bgPrimary.toHex(),flex:1}},WebView({style:{flex:1},scrollDisabled:true,zoomEnabled:true,data:{url:this.url}}),View({style:{paddingBottom:h?device.screen.safeArea.bottom:!this.hideButtons?l.L.toNumber():0}},!this.hideButtons&&s({},a({text:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_BUTTON_TITLE"),size:o.XL,design:n.FILLED,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(y)){Application.openUrl(y)}return}this.clearHeader();if(this.isExternal){this.layout.showComponent(new T({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}));return}this.layout.showComponent(new I({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout,initiatedByType:this.initiatedByType}))},style:{marginBottom:l.L.toNumber()}}),a({text:d.getMessage(t),size:o.XL,design:n.PLAN_ACCENT,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(y)){Application.openUrl(y)}return}const{titleCode:t,descriptionCode:e,confirmTitleCode:i}=E.isInitiatedByEmployee(this.initiatedByType)?{titleCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_BY_EMPLOYEE_TITLE",descriptionCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_BY_EMPLOYEE_DESCRIPTION",confirmTitleCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_BY_EMPLOYEE_REJECT_BUTTON_TITLE"}:{titleCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_TITLE",descriptionCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_DESCRIPTION",confirmTitleCode:"SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_REJECT_BUTTON_TITLE"};c({title:d.getMessage(t),description:d.getMessage(e),confirmTitle:d.getMessage(i),cancelTitle:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_CANCEL_BUTTON_TITLE"),onConfirm:()=>{N.showLoadingIndicator();u(this.memberId).then((({data:t})=>{N.hideLoadingIndicatorWithoutFallback();this.clearHeader();this.layout.showComponent(new _({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout,initiatedByType:this.initiatedByType}))})).catch((()=>{N.showErrors([{message:d.getMessage("SIGN_MOBILE_DOCUMENT_UNKNOWN_ERROR_TEXT")}])}))}})}}))))}}i.exports={SignDocument:m}}));
//# sourceMappingURL=extension.map.js