jn.define("sign/document",((t,e,s)=>{const{Card:o}=t("ui-system/layout/card");const{ButtonSize:i,ButtonDesign:n,Button:a}=t("ui-system/form/buttons/button");const{Indent:r,Color:l}=t("tokens");const{Loc:d}=t("loc");const{ResponseMobile:u}=t("sign/dialog/banners/responsemobile");const{RefusedJustNow:c}=t("sign/dialog/banners/refusedjustnow");const{External:I}=t("sign/dialog/banners/external");const{NotifyManager:h}=t("notify-manager");const{showConfirm:g}=t("sign/dialog/banners/template");const{rejectConfirmation:m}=t("sign/connector");const N=Application.getPlatform()==="ios";const _="https://www.gosuslugi.ru/select-app-goskey";class E extends LayoutComponent{constructor(t){super(t);const{url:e,widget:s,memberId:o,hideButtons:i,title:n,isGoskey:a,isExternal:r}=t;this.layout=s;this.url=e;this.memberId=o;this.hideButtons=i;this.isGoskey=a;this.isExternal=r;this.title=n}clearHeader(){this.layout.setTitle({text:""});this.layout.setRightButtons([]);this.layout.setLeftButtons([])}render(){return View({style:{backgroundColor:l.bgPrimary.toHex(),flex:1}},WebView({style:{flex:1},scrollDisabled:true,zoomEnabled:true,data:{url:this.url}}),View({style:{paddingBottom:N?device.screen.safeArea.bottom:!this.hideButtons?r.L.toNumber():0}},!this.hideButtons&&o({},a({text:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_BUTTON_TITLE"),size:i.XL,design:n.FILLED,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(_)){Application.openUrl(_)}return}this.clearHeader();if(this.isExternal){this.layout.showComponent(new I({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}));return}this.layout.showComponent(new u({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}))},style:{marginBottom:r.L.toNumber()}}),a({text:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_REJECT_TITLE"),size:i.XL,design:n.PLAN_ACCENT,disabled:false,badge:false,stretched:true,onClick:()=>{if(this.isGoskey){if(Application.canOpenUrl(_)){Application.openUrl(_)}return}g({title:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_TITLE"),description:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_DESCRIPTION"),confirmTitle:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_REJECT_BUTTON_TITLE"),cancelTitle:d.getMessage("SIGN_MOBILE_DOCUMENT_CONFIRM_SIGNING_ALERT_CANCEL_BUTTON_TITLE"),onConfirm:()=>{h.showLoadingIndicator();m(this.memberId).then((({data:t})=>{h.hideLoadingIndicatorWithoutFallback();this.clearHeader();this.layout.showComponent(new c({documentTitle:this.title,memberId:this.memberId,layoutWidget:this.layout}))})).catch((()=>{h.showErrors([{message:d.getMessage("SIGN_MOBILE_DOCUMENT_UNKNOWN_ERROR_TEXT")}])}))}})}}))))}}s.exports={SignDocument:E}}));
//# sourceMappingURL=extension.map.js