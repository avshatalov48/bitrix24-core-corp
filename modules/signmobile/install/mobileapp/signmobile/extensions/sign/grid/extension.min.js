jn.define("sign/grid",((e,t,s)=>{const{ListItemType:a,ListItemsFactory:i}=e("sign/grid/item-factory");const{Master:r}=e("sign/master");const{usersUpserted:o,usersAdded:n}=e("statemanager/redux/slices/users");const{batchActions:l}=e("statemanager/redux/batched-actions");const c=e("statemanager/redux/store");const{dispatch:_}=c;const{StatusBlock:u}=e("ui-system/blocks/status-block");const{StatefulList:g}=e("layout/ui/stateful-list");const{SearchLayout:I}=e("layout/ui/search-bar");const{Box:d}=e("ui-system/layout/box");const{makeLibraryImagePath:h}=e("asset-manager");const{Color:m}=e("tokens");const{Loc:E}=e("loc");const S="empty-grid.svg";const T="error.svg";const M="preset_in_progress";const p="preset_send";const b="preset_signed";const L="preset_processed_by_me";class y extends LayoutComponent{constructor(e){super(e);this.master=new r;this.stateFulListRef=null;this.isE2bAvailable=this.props.isE2bAvailable;this.search=new I({layout:layout,disablePresets:true,onSearch:this.#e,onCancel:this.#e});this.tabs=[{title:E.getMessage("SIGN_MOBILE_GRID_TAB_IN_WORK"),label:"",id:M},{title:E.getMessage("SIGN_MOBILE_GRID_TAB_SIGNED"),id:b},{title:E.getMessage("SIGN_MOBILE_GRID_TAB_PROCESSED_BY_ME"),id:L}];if(this.isE2bAvailable){this.tabs.splice(1,0,{title:E.getMessage("SIGN_MOBILE_GRID_TAB_SEND"),label:"",id:p})}this.filter={tabId:M,searchString:""}}render(){return d({resizableByKeyboard:true,backgroundColor:m.bgPrimary},TabView({ref:e=>{this.tabView=e},style:{height:44,marginBottom:15,backgroundColor:m.bgPrimary},params:{items:this.tabs},onTabSelected:this.#t}),View({style:{flex:1}},this.renderList()))}renderList(){return new g({layout:layout,ref:this.onListRef,testId:"user-list",needInitMenu:true,showAirStyle:true,useCache:false,isShowFloatingButton:this.isE2bAvailable,onFloatingButtonClick:this.#s,getEmptyListComponent:this.getEmptyListComponent,menuButtons:this.getLayoutMenuButtons(),itemType:a.DOCUMENT,itemFactory:i,actions:{loadItems:"signmobile.document.getDocumentList"},actionParams:{loadItems:{filterParams:this.getFilterParams()}},actionCallbacks:{loadItems:this.#a},pull:{moduleId:"sign",callback:this.#i,shouldReloadDynamically:true}})}getPlaceholderText(){if(this.filter.searchString!==""){return{title:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_EMPTY_SEARCH_TITLE"),description:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_EMPTY_SEARCH_DESCRIPTION"),imageName:T}}const e=S;switch(this.filter.tabId){case p:return{title:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_SEND_TITLE"),description:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_SEND_DESCRIPTION"),imageName:e};case b:return{title:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_SIGNED_TITLE"),description:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_SIGNED_DESCRIPTION"),imageName:e};case L:return{title:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_PROCESSED_BY_ME_TITLE"),description:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_PROCESSED_BY_ME_DESCRIPTION"),imageName:e};default:return{title:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_IN_WORK_TITLE"),description:E.getMessage("SIGN_MOBILE_GRID_EMPTY_STATE_IN_WORK_DESCRIPTION"),imageName:e}}}getEmptyListComponent=()=>{const{title:e,description:t,imageName:s}=this.getPlaceholderText();return u({testId:"empty-state",title:e,description:t,emptyScreen:false,onRefresh:()=>{},image:Image({resizeMode:"contain",style:{width:202,height:172},svg:{uri:h(s,"empty-states","sign")}})})};getLayoutMenuButtons(){return[this.search.getSearchButton()]}getFilterParams(){return this.filter}#a=(e,t)=>{const{users:s=[],needActionCount:a="",needCountForSendPreset:i=""}=e||{};const r=t==="cache";const c=[];if(s.length>0){c.push(r?n(s):o(s));_(l(c))}this.tabView.updateItem(M,{label:this.prepareCounter(a)});this.tabView.updateItem(p,{label:this.prepareCounter(i)})};#t=e=>{this.filter.tabId=e.id;this.setState({},(()=>this.stateFulListRef.reload({skipUseCache:true})))};#e=({text:e})=>{this.filter.searchString=e??"";this.setState({},(()=>this.stateFulListRef.reload()))};#i=e=>new Promise((t=>{if(e.command==="updateMyDocumentGrid"){this.stateFulListRef.reload({skipUseCache:true});t({params:{eventName:e.command}})}}));#s=()=>{this.master.openMaster(layout)};onListRef=e=>{this.stateFulListRef=e};prepareCounter(e){if(typeof e!=="boolean"&&isFinite(Number(e))&&Number(e)!==0){return String(e)}return""}}s.exports={Grid:y}}));
//# sourceMappingURL=extension.map.js