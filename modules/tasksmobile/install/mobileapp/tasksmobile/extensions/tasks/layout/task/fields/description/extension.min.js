jn.define("tasks/layout/task/fields/description",((e,t,i)=>{const{Loc:s}=e("loc");const{TextAreaField:r}=e("layout/ui/fields/textarea");class n extends LayoutComponent{constructor(e){super(e);this.state={readOnly:e.readOnly,description:e.description,parsedDescription:e.parsedDescription}}componentWillReceiveProps(e){this.state={readOnly:e.readOnly,description:e.description,parsedDescription:e.parsedDescription}}updateState(e){this.setState({readOnly:e.readOnly,description:e.description,parsedDescription:e.parsedDescription})}render(){return r({readOnly:this.state.readOnly,showTitle:false,placeholder:s.getMessage("TASKSMOBILE_LAYOUT_TASK_FIELDS_DESCRIPTION_PLACEHOLDER"),config:{deepMergeStyles:{...this.props.deepMergeStyles,editableValue:{maxHeight:undefined}},readOnlyElementType:"BBCodeText",onLinkClick:e=>{const t=this.props.task.files.reduce(((e,t)=>{e[t.id]=t;e[`n${t.objectId}`]=t;return e}),{});const i=e.url.match(/\/\?openFile&fileId=(\d+)/);if(i&&t[i[1]]){const e=t[i[1]];e.fileType=UI.File.getType(UI.File.getFileMimeType(e.type,e.name));this.openFileViewer(e);return}const s=e.url.match(/\/\?openWeb&type=(table|video)&id=(\d+)/);if(s){this.openWebViewer({type:s[1],id:s[2]})}}},value:this.state.readOnly?this.state.parsedDescription:this.state.description,testId:"description",onChange:e=>{this.setState({description:e});this.props.onChange(e)}})}openFileViewer({fileType:e,url:t,name:i}){if(!t){return}switch(e){case"video":viewer.openVideo(t);break;case"image":viewer.openImage(t,i);break;default:viewer.openDocument(t,i);break}}openWebViewer({type:e,id:t}){PageManager.openPage({url:`${env.siteDir}mobile/tasks/snmrouter/?routePage=fragmentrenderer&FRAGMENT_TYPE=${e}&FRAGMENT_ID=${t}&TASK_ID=${this.props.task.id}`,title:s.getMessage(`TASKSMOBILE_LAYOUT_TASK_FIELDS_DESCRIPTION_CONTENT_${e.toUpperCase()}`,{"#INDEX#":Number(t)+1}),backdrop:{bounceEnable:false,swipeAllowed:false,showOnTop:true,hideNavigationBar:false,horizontalSwipeAllowed:false}})}}i.exports={Description:n}}));
//# sourceMappingURL=extension.map.js