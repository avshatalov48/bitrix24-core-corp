jn.define("tasks/layout/task/fields/deadline",((e,t,l)=>{const{Loc:s}=e("loc");const{DateTimeFieldClass:n}=e("layout/ui/fields/datetime");class a extends LayoutComponent{constructor(e){super(e);this.state={readOnly:e.readOnly,deadline:e.deadline,taskState:e.taskState,deadlines:e.deadlines,isTaskCompleted:e.isTaskCompleted,counter:e.counter}}componentWillReceiveProps(e){this.state={readOnly:e.readOnly,deadline:e.deadline,taskState:e.taskState,deadlines:e.deadlines,isTaskCompleted:e.isTaskCompleted,counter:e.counter}}updateState(e){this.setState({readOnly:e.readOnly,deadline:e.deadline,taskState:e.taskState,deadlines:e.deadlines,isTaskCompleted:e.isTaskCompleted,counter:e.counter})}render(){return new o({readOnly:this.state.readOnly,showEditIcon:!this.state.readOnly,title:s.getMessage("TASKSMOBILE_LAYOUT_TASK_FIELDS_DEADLINE"),value:this.state.deadline/1e3||"",emptyValue:s.getMessage("TASKSMOBILE_LAYOUT_TASK_FIELDS_DEADLINE_EMPTY_VALUE"),titlePosition:"left",config:{deepMergeStyles:this.props.deepMergeStyles,enableTime:true,dateFormat:"d MMMM, HH:mm",items:this.state.deadlines,balloonStyle:this.state.isTaskCompleted?null:{backgroundColor:this.state.taskState.backgroundColor,fontColor:this.state.taskState.fontColor},counter:this.state.isTaskCompleted?null:this.state.counter,balloonArrowDownUri:`${this.props.pathToImages}/tasksmobile-layout-task-balloon-arrow-down.png`},testId:"deadline",onChange:e=>this.props.datesResolver.updateDeadline(e)})}openPicker(){dialogs.showDatePicker({title:s.getMessage("TASKSMOBILE_LAYOUT_TASK_VIEW_DEADLINE_PICKER_TITLE"),type:"datetime",value:this.state.deadline,items:this.state.deadlines},((e,t)=>{if(t){this.props.datesResolver.updateDeadline(t/1e3,true)}}))}}class o extends n{constructor(e){super(e)}renderReadOnlyContent(){if(this.isEmpty()){return this.renderEmptyContent()}return View({},View({style:this.styles.balloonStyle},Text({style:this.styles.value,text:this.getFormattedDate()})),this.renderCounter())}renderEditableContent(){if(this.isEmpty()){if(this.hasHiddenEmptyView()){return null}return View({style:this.styles.balloonStyle},Text({style:this.styles.emptyValue,text:this.getEditableEmptyValue()}),this.renderBalloonArrowDown())}return View({style:{flexDirection:"row"}},View({style:this.styles.balloonStyle},Text({style:this.styles.value,text:this.getFormattedDate()}),this.renderBalloonArrowDown()),this.renderCounter())}renderBalloonArrowDown(){return Image({style:{width:14,height:14,alignSelf:"center",marginLeft:2},uri:this.getImageUrl(this.getConfig().balloonArrowDownUri)})}renderCounter(){const e=this.getConfig().counter;if(!e||e.value<=0){return null}return View({style:{alignSelf:"center",alignItems:"center",justifyContent:"center",width:18,height:18,marginLeft:6,backgroundColor:e.color,borderRadius:9},testId:"deadlineCounter"},Text({style:{fontSize:12,fontWeight:"500",color:"#ffffff"},text:e.value.toString()}))}getImageUrl(e){if(e.indexOf(currentDomain)!==0){e=encodeURI(e);e=e.replace(`${currentDomain}`,"");e=e.indexOf("http")!==0?`${currentDomain}${e}`:e}return e}getDefaultStyles(){const e=this.getConfig();const t=e.balloonStyle;if(!t){return super.getDefaultStyles()}let l=super.getDefaultStyles();l.balloonStyle={};l.value.flex=null;l.emptyValue.flex=null;const s={fontSize:12,fontWeight:"600",fontColor:t.fontColor,color:t.fontColor};l={...l,balloonStyle:{flexDirection:"row",height:22,backgroundColor:t.backgroundColor,borderRadius:15,paddingLeft:9,paddingRight:5,paddingVertical:2},value:{...l.value,...s},emptyValue:{...l.emptyValue,...s}};return l}}l.exports={Deadline:a}}));
//# sourceMappingURL=extension.map.js