{"version":3,"file":"registry.bundle.js","sources":["../src/recent.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\nimport {RestClient} from 'rest.client';\n\nimport {Core} from 'im.old-chat-embedding.application.core';\nimport {DialogType, EventType, RestMethod} from 'im.old-chat-embedding.const';\nimport {Logger} from 'im.old-chat-embedding.lib.logger';\n\nimport type {ImModelRecentItem} from 'im.old-chat-embedding.model';\n\nexport class RecentService\n{\n\tstatic instance = null;\n\n\tstore: Object = null;\n\trestClient: RestClient = null;\n\n\tdataIsPreloaded: boolean = false;\n\titemsPerPage: number = 50;\n\tisLoading: boolean = false;\n\tpagesLoaded: number = 0;\n\thasMoreItemsToLoad: boolean = true;\n\tlastMessageDate: string = null;\n\n\tstatic getInstance(): RecentService\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.store = Core.getStore();\n\t\tthis.restClient = Core.getRestClient();\n\n\t\tthis.onUpdateStateHandler = this.onUpdateState.bind(this);\n\t\tEventEmitter.subscribe(EventType.recent.updateState, this.onUpdateStateHandler);\n\t}\n\n\t// region public\n\tgetCollection(): ImModelRecentItem[]\n\t{\n\t\treturn this.store.getters['recent/getRecentCollection'];\n\t}\n\n\tloadFirstPage({ignorePreloadedItems = false} = {}): Promise\n\t{\n\t\tif (this.dataIsPreloaded && !ignorePreloadedItems)\n\t\t{\n\t\t\tLogger.warn(`Im.RecentList: first page was preloaded`);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems({firstPage: true});\n\t}\n\n\tloadNextPage(): Promise\n\t{\n\t\tif (this.isLoading || !this.hasMoreItemsToLoad)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems();\n\t}\n\n\tsetPreloadedData(params)\n\t{\n\t\tLogger.warn(`Im.RecentList: setting preloaded data`, params);\n\t\tconst {items, hasMore} = params;\n\n\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\tif (!hasMore)\n\t\t{\n\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t}\n\n\t\tthis.dataIsPreloaded = true;\n\n\t\tthis.updateModels(params);\n\t}\n\n\thideChat(dialogId)\n\t{\n\t\tLogger.warn(`Im.RecentList: hide chat`, dialogId);\n\t\tconst recentItem = this.store.getters['recent/get'](dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/delete', {\n\t\t\tid: dialogId\n\t\t});\n\n\t\tthis.restClient.callMethod(RestMethod.imRecentHide, {'DIALOG_ID': dialogId}).catch(error => {\n\t\t\tconsole.error('Im.RecentList: hide chat error', error);\n\t\t});\n\t}\n\t// endregion public\n\n\trequestItems({firstPage = false} = {}): Promise\n\t{\n\t\tconst queryParams = this.getQueryParams(firstPage);\n\n\t\treturn this.restClient.callMethod(this.getQueryMethod(), queryParams).then((result) => {\n\t\t\tthis.pagesLoaded++;\n\t\t\tLogger.warn(`Im.RecentList: ${this.pagesLoaded} page request result`, result.data());\n\t\t\tconst {items, hasMore} = result.data();\n\n\t\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\t\tif (!hasMore)\n\t\t\t{\n\t\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t\t}\n\n\t\t\treturn this.updateModels(result.data()).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t\t}).catch(error => {\n\t\t\tconsole.error('Im.RecentList: page request error', error);\n\t\t});\n\t}\n\n\tgetQueryMethod(): string\n\t{\n\t\treturn RestMethod.imRecentList;\n\t}\n\n\tgetQueryParams(firstPage: boolean): Object\n\t{\n\t\treturn {\n\t\t\t'SKIP_OPENLINES': 'Y',\n\t\t\t'LIMIT': this.itemsPerPage,\n\t\t\t'LAST_MESSAGE_DATE': firstPage? null : this.lastMessageDate,\n\t\t\t'GET_ORIGINAL_TEXT': 'Y'\n\t\t};\n\t}\n\n\tupdateModels(rawData): Promise\n\t{\n\t\tconst {users, dialogues, recent} = this.prepareDataForModels(rawData);\n\n\t\tconst usersPromise = this.store.dispatch('users/set', users);\n\t\tif (rawData.botList)\n\t\t{\n\t\t\tthis.store.dispatch('users/setBotList', rawData.botList);\n\t\t}\n\t\tconst dialoguesPromise = this.store.dispatch('dialogues/set', dialogues);\n\t\tconst recentPromise = this.store.dispatch('recent/setRecent', recent);\n\n\t\treturn Promise.all([usersPromise, dialoguesPromise, recentPromise]);\n\t}\n\n\tonUpdateState({data})\n\t{\n\t\tLogger.warn(`Im.RecentList: setting UpdateState data`, data);\n\t\tthis.updateModels(data);\n\t}\n\n\tprepareDataForModels({items, birthdayList = []}): {users: Array, dialogues: Array, recent: Array}\n\t{\n\t\tconst result = {\n\t\t\tusers: [],\n\t\t\tdialogues: [],\n\t\t\trecent: []\n\t\t};\n\n\t\titems.forEach(item => {\n\t\t\t// user\n\t\t\tif (item.user && item.user.id && !this.isAddedAlready(result, 'users', item.user.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item.user);\n\t\t\t}\n\n\t\t\t// chat\n\t\t\tif (item.chat)\n\t\t\t{\n\t\t\t\tresult.dialogues.push(this.prepareGroupChat(item));\n\n\t\t\t\tif (item.user.id && !this.isAddedAlready(result, 'dialogues', item.user.id))\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item.user));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (item.user.id)\n\t\t\t{\n\t\t\t\tconst existingRecentItem = this.store.getters['recent/get'](item.user.id);\n\t\t\t\t// we should not update real chat with \"default\" chat data\n\t\t\t\tif (!existingRecentItem || !item.options.default_user_record)\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForUser(item));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// recent\n\t\t\tresult.recent.push({...item});\n\t\t});\n\n\t\tbirthdayList.forEach(item => {\n\t\t\tif (!this.isAddedAlready(result, 'users', item.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item);\n\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item));\n\t\t\t}\n\n\t\t\tif (!this.isAddedAlready(result, 'recent', item.id))\n\t\t\t{\n\t\t\t\tresult.recent.push(this.getBirthdayPlaceholder(item));\n\t\t\t}\n\t\t});\n\n\t\tLogger.warn(`Im.RecentList: prepared data for models`, result);\n\n\t\treturn result;\n\t}\n\n\tisAddedAlready(result: Object, type: 'users' | 'dialogues' | 'recent', id: string | number): boolean\n\t{\n\t\tif (type === 'users')\n\t\t{\n\t\t\treturn result.users.some(user => user.id === id);\n\t\t}\n\t\telse if (type === 'dialogues')\n\t\t{\n\t\t\treturn result.dialogues.some(chat => chat.dialogId === id);\n\t\t}\n\t\telse if (type === 'recent')\n\t\t{\n\t\t\treturn result.recent.some(item => item.id === id);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprepareGroupChat(item)\n\t{\n\t\treturn {\n\t\t\t...item.chat,\n\t\t\tcounter: item.counter,\n\t\t\tdialogId: item.id\n\t\t};\n\t}\n\n\tprepareChatForUser(item)\n\t{\n\t\treturn {\n\t\t\tchatId: item.chat_id,\n\t\t\tavatar: item.user.avatar,\n\t\t\tcolor: item.user.color,\n\t\t\tdialogId: item.id,\n\t\t\tname: item.user.name,\n\t\t\ttype: DialogType.user,\n\t\t\tcounter: item.counter\n\t\t};\n\t}\n\n\tprepareChatForAdditionalUser(user)\n\t{\n\t\treturn {\n\t\t\tdialogId: user.id,\n\t\t\tavatar: user.avatar,\n\t\t\tcolor: user.color,\n\t\t\tname: user.name,\n\t\t\ttype: DialogType.user\n\t\t};\n\t}\n\n\tgetBirthdayPlaceholder(item: Object): Object\n\t{\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\toptions: {\n\t\t\t\tbirthdayPlaceholder: true\n\t\t\t}\n\t\t};\n\t}\n\n\tgetLastMessageDate(items: Array): string\n\t{\n\t\tif (items.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn items.slice(-1)[0].message.date;\n\t}\n}"],"names":["RecentService","getInstance","instance","constructor","store","restClient","dataIsPreloaded","itemsPerPage","isLoading","pagesLoaded","hasMoreItemsToLoad","lastMessageDate","Core","getStore","getRestClient","onUpdateStateHandler","onUpdateState","bind","EventEmitter","subscribe","EventType","recent","updateState","getCollection","getters","loadFirstPage","ignorePreloadedItems","Logger","warn","Promise","resolve","requestItems","firstPage","loadNextPage","setPreloadedData","params","items","hasMore","getLastMessageDate","updateModels","hideChat","dialogId","recentItem","dispatch","id","callMethod","RestMethod","imRecentHide","catch","error","console","queryParams","getQueryParams","getQueryMethod","then","result","data","imRecentList","rawData","users","dialogues","prepareDataForModels","usersPromise","botList","dialoguesPromise","recentPromise","all","birthdayList","forEach","item","user","isAddedAlready","push","chat","prepareGroupChat","prepareChatForAdditionalUser","existingRecentItem","options","default_user_record","prepareChatForUser","getBirthdayPlaceholder","type","some","counter","chatId","chat_id","avatar","color","name","DialogType","birthdayPlaceholder","length","slice","message","date"],"mappings":"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"}