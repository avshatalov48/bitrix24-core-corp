{"version":3,"file":"registry.bundle.js","sources":["../src/application.js","../src/messages.js","../src/dialogues.js","../src/users.js","../src/files.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {DeviceType, DeviceOrientation} from 'im.const';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nclass ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tsiteId: this.getVariable('common.siteId', 'default'),\n\t\t\t\tuserId: this.getVariable('common.userId', 0),\n\t\t\t\tlanguageId: this.getVariable('common.languageId', 'en'),\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tdialogId: this.getVariable('dialog.dialogId', '0'),\n\t\t\t\tchatId: this.getVariable('dialog.chatId', 0),\n\t\t\t\tdiskFolderId: this.getVariable('dialog.diskFolderId', 0),\n\t\t\t\tmessageLimit: this.getVariable('dialog.messageLimit', 20),\n\t\t\t\tenableReadMessages: this.getVariable('dialog.enableReadMessages', true),\n\t\t\t\tmessageExtraCount: 0,\n\t\t\t},\n\t\t\tdisk:\n\t\t\t{\n\t\t\t\tenabled: false,\n\t\t\t\tmaxFileSize: 5242880,\n\t\t\t},\n\t\t\tmobile:\n\t\t\t{\n\t\t\t\tkeyboardShow: false,\n\t\t\t},\n\t\t\tdevice:\n\t\t\t{\n\t\t\t\ttype: this.getVariable('device.type', DeviceType.desktop),\n\t\t\t\torientation: this.getVariable('device.orientation', DeviceOrientation.portrait),\n\t\t\t},\n\t\t\toptions:\n\t\t\t{\n\t\t\t\tquoteEnable: this.getVariable('options.quoteEnable', true),\n\t\t\t\tquoteFromRight: this.getVariable('options.quoteFromRight', true),\n\t\t\t\tautoplayVideo: this.getVariable('options.autoplayVideo', true),\n\t\t\t\tdarkBackground: this.getVariable('options.darkBackground', false),\n\t\t\t},\n\t\t\terror:\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tcode: '',\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn Object.assign({\n\t\t\tcommon: this.getVariable('saveException.common', null),\n\t\t\tdialog: this.getVariable('saveException.dialog', null),\n\t\t\tmobile: this.getVariable('saveException.mobile', null),\n\t\t\tdevice: this.getVariable('saveException.device', null),\n\t\t\terror: this.getVariable('saveException.error', null)\n\t\t});\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('set', this.validate(payload));\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet hasChange = false;\n\t\t\t\tfor (let group in payload)\n\t\t\t\t{\n\t\t\t\t\tif (!payload.hasOwnProperty(group))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let field in payload[group])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload[group].hasOwnProperty(field))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate[group][field] = payload[group][field];\n\t\t\t\t\t\thasChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChange && this.isSaveNeeded(payload))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tincreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tstate.dialog.messageExtraCount += count;\n\t\t\t},\n\t\t\tdecreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tlet newCounter = state.dialog.messageExtraCount - count;\n\t\t\t\tif (newCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tnewCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tstate.dialog.messageExtraCount = newCounter;\n\t\t\t},\n\t\t\tclearDialogExtraCount(state)\n\t\t\t{\n\t\t\t\tstate.dialog.messageExtraCount = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.common === 'object' && fields.common)\n\t\t{\n\t\t\tresult.common = {};\n\n\t\t\tif (typeof fields.common.userId === 'number')\n\t\t\t{\n\t\t\t\tresult.common.userId = fields.common.userId;\n\t\t\t}\n\n\t\t\tif (typeof fields.common.languageId === 'string')\n\t\t\t{\n\t\t\t\tresult.common.languageId = fields.common.languageId;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.dialog === 'object' && fields.dialog)\n\t\t{\n\t\t\tresult.dialog = {};\n\n\t\t\tif (typeof fields.dialog.dialogId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId.toString();\n\t\t\t\tresult.dialog.chatId = 0;\n\t\t\t}\n\t\t\telse if (typeof fields.dialog.dialogId === 'string')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId;\n\n\t\t\t\tif (typeof fields.dialog.chatId !== 'number')\n\t\t\t\t{\n\t\t\t\t\tlet chatId = fields.dialog.dialogId;\n\t\t\t\t\tif (chatId.startsWith('chat'))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatId = fields.dialog.dialogId.substr(4);\n\t\t\t\t\t}\n\n\t\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\t\tresult.dialog.chatId = !isNaN(chatId)? chatId: 0;\n\t\t\t\t\tfields.dialog.chatId = result.dialog.chatId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.chatId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.chatId = fields.dialog.chatId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.diskFolderId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.diskFolderId = fields.dialog.diskFolderId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageLimit === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageLimit = fields.dialog.messageLimit;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageExtraCount === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageExtraCount = fields.dialog.messageExtraCount;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.enableReadMessages === 'boolean')\n\t\t\t{\n\t\t\t\tresult.dialog.enableReadMessages = fields.dialog.enableReadMessages;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.disk === 'object' && fields.disk)\n\t\t{\n\t\t\tresult.disk = {};\n\n\t\t\tif (typeof fields.disk.enabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.disk.enabled = fields.disk.enabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.disk.maxFileSize === 'number')\n\t\t\t{\n\t\t\t\tresult.disk.maxFileSize = fields.disk.maxFileSize;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile === 'object' && fields.mobile)\n\t\t{\n\t\t\tresult.mobile = {};\n\n\t\t\tif (typeof fields.mobile.keyboardShow === 'boolean')\n\t\t\t{\n\t\t\t\tresult.mobile.keyboardShow = fields.mobile.keyboardShow;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.device === 'object' && fields.device)\n\t\t{\n\t\t\tresult.device = {};\n\n\t\t\tif (typeof fields.device.type === 'string' && typeof DeviceType[fields.device.type] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.type = fields.device.type;\n\t\t\t}\n\n\t\t\tif (typeof fields.device.orientation === 'string' && typeof DeviceOrientation[fields.device.orientation] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.orientation = fields.device.orientation;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.error === 'object' && fields.error)\n\t\t{\n\t\t\tif (typeof fields.error.active === 'boolean')\n\t\t\t{\n\t\t\t\tresult.error = {\n\t\t\t\t\tactive: fields.error.active,\n\t\t\t\t\tcode: fields.error.code.toString() || '',\n\t\t\t\t\tdescription: fields.error.description.toString() || '',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {ApplicationModel};","/**\n * Bitrix Messenger\n * Message model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {MutationType, StorageLimit} from 'im.const';\nimport {Utils} from \"im.utils\";\n\nconst IntersectionType = {\n\tempty: 'empty',\n\tequal: 'equal',\n\tnone: 'none',\n\tfound: 'found',\n\tfoundReverse: 'foundReverse',\n};\n\nclass MessagesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'messages';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t\tmutationType: {},\n\t\t\tsaveMessageList: {},\n\t\t\tsaveFileList: {},\n\t\t\tsaveUserList: {},\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\ttemplateId: 0,\n\t\t\ttemplateType: 'message',\n\n\t\t\tid: 0,\n\t\t\tchatId: 0,\n\t\t\tauthorId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttext: \"\",\n\t\t\ttextConverted: \"\",\n\t\t\tparams: {\n\t\t\t\tTYPE : 'default',\n\t\t\t\tCOMPONENT_ID : 'bx-messenger-message',\n\t\t\t},\n\n\t\t\tpush: false,\n\t\t\tunread: false,\n\t\t\tsending: false,\n\t\t\terror: false,\n\t\t\tretry: false,\n\t\t\tblink: false,\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\n\t\t\tgetMutationType: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.mutationType[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn {initialType: MutationType.none, appliedType: MutationType.none};\n\t\t\t\t}\n\n\t\t\t\treturn state.mutationType[chatId];\n\t\t\t},\n\t\t\tgetLastId: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tlet lastId = 0;\n\n\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\tif (\n\t\t\t\t\t\telement.push\n\t\t\t\t\t\t|| element.sending\n\t\t\t\t\t\t|| element.id.toString().startsWith('temporary')\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastId < element.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastId = element.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn lastId? lastId: null;\n\t\t\t},\n\t\t\tgetMessage: state => (chatId, messageId) =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tif (state.collection[chatId][index].id === messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[chatId][index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetSaveFileList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveFileList;\n\t\t\t},\n\t\t\tgetSaveUserList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveUserList;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.unread = false;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\tif (payload.sending !== false)\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch('actionStart', {\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tchatId: result.chatId,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tactionStart: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionError: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: true, retry: payload.retry !== false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionFinish: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: false, retry: false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.set,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetAfter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tif (/^\\d+$/.test(payload.chatId))\n\t\t\t\t{\n\t\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields));\n\n\t\t\t\tif (result.params)\n\t\t\t\t{\n\t\t\t\t\tresult.params = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState().params,\n\t\t\t\t\t\tstore.state.collection[payload.chatId][index].params,\n\t\t\t\t\t\tresult.params\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.id instanceof Array))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = [payload.id];\n\t\t\t\t}\n\n\t\t\t\tpayload.id = payload.id.map(id => {\n\t\t\t\t\tif (/^\\d+$/.test(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tid = parseInt(id);\n\t\t\t\t\t}\n\t\t\t\t\treturn id;\n\t\t\t\t});\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\telements : payload.id,\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tclear: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('clear', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tapplyMutationType: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('applyMutationType', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\treadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.readId = parseInt(payload.readId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('readMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\treadId: payload.readId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t\tunreadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.unreadId = parseInt(payload.unreadId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined' || !payload.unreadId)\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('unreadMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\tunreadId: payload.unreadId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\treturn this.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.add});\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.saveMessageList[payload.chatId].push(payload.id);\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet chats = [];\n\t\t\t\tlet chatsSave = [];\n\t\t\t\tlet mutationType = {};\n\n\t\t\t\tmutationType.initialType = payload.insertType;\n\n\t\t\t\tif (payload.insertType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tpayload.insertType = MutationType.setAfter;\n\n\t\t\t\t\tlet elements = {};\n\t\t\t\t\tpayload.data.forEach(element => {\n\t\t\t\t\t\tif (!elements[element.chatId])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telements[element.chatId] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telements[element.chatId].push(element.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let chatId in elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!elements.hasOwnProperty(chatId))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tthis.initCollection(state, {chatId});\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.saveMessageList[chatId].length > elements[chatId].length\n\t\t\t\t\t\t\t|| elements[chatId].length < StorageLimit.messages\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => elements[chatId].includes(element.id));\n\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => elements[chatId].includes(id));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet intersection = this.manageCacheBeforeSet(\n\t\t\t\t\t\t\t[...state.saveMessageList[chatId].reverse()],\n\t\t\t\t\t\t\telements[chatId]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !intersection.foundElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !intersection.foundElements.includes(id));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = state.collection[chatId].map(element => element.id);\n\n\t\t\t\t\t\t\tclearTimeout(this.removeIntersectionCacheTimeout);\n\t\t\t\t\t\t\tthis.removeIntersectionCacheTimeout = setTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !this.removeIntersectionCacheElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !this.removeIntersectionCacheElements.includes(id));\n\t\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = [];\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.foundReverse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.insertType = MutationType.setBefore;\n\t\t\t\t\t\t\t\tpayload.data = payload.data.reverse();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.found && intersection.noneElements[0])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = intersection.foundElements[intersection.foundElements.length-1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\tmutationType.scrollMessageId = payload.data[0].id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmutationType.appliedType = payload.insertType;\n\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\telement\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setAfter)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tchats.push(element.chatId);\n\n\t\t\t\t\tif (this.store.getters['dialogues/canSaveChat'] && this.store.getters['dialogues/canSaveChat'](element.chatId))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatsSave.push(element.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchats = [...new Set(chats)];\n\t\t\t\tchatsSave = [...new Set(chatsSave)];\n\n\t\t\t\t// check array for correct order of messages\n\t\t\t\tif (mutationType.initialType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tchats.forEach(chatId =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlet lastElementId = 0;\n\t\t\t\t\t\tlet needApplySort = false;\n\t\t\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\t\t\tif (element.id < lastElementId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneedApplySort = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlastElementId = element.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (needApplySort)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId].sort((a, b) => a.id - b.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tchats.forEach(chatId => {\n\t\t\t\t\tthis.setMutationType(state, {chatId: chatId, ...mutationType});\n\t\t\t\t});\n\n\t\t\t\tif (mutationType.initialType !== MutationType.setBefore)\n\t\t\t\t{\n\t\t\t\t\tchatsSave.forEach(chatId => {\n\t\t\t\t\t\tthis.saveState(state, chatId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tlet isSaveState = (\n\t\t\t\t\t\tstate.saveMessageList[payload.chatId].includes(state.collection[payload.chatId][index].id)\n\t\t\t\t\t\t|| payload.fields.id && !payload.fields.id.toString().startsWith('temporary') && state.collection[payload.chatId][index].id.toString().startsWith('temporary')\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete payload.fields.templateId;\n\n\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isSaveState)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.delete});\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => !payload.elements.includes(element.id));\n\n\t\t\t\tif (state.saveMessageList[payload.chatId].length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let id of payload.elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (state.saveMessageList[payload.chatId].includes(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclear: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: 'clear'});\n\n\t\t\t\tstate.collection[payload.chatId] = [];\n\t\t\t\tstate.saveMessageList[payload.chatId] = [];\n\t\t\t},\n\t\t\tapplyMutationType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\t\t\t}\n\n\t\t\t\tstate.mutationType[payload.chatId].applied = true;\n\t\t\t},\n\t\t\treadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: false}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunreadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\tthis.updateSubordinateStates();\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof payload.chatId === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof payload.chatId === 'undefined'\n\t\t\t|| typeof state.collection[payload.chatId] !== 'undefined'\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, payload.messages? [].concat(payload.messages): []);\n\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\tVue.set(state.saveMessageList, payload.chatId, []);\n\t\tVue.set(state.saveFileList, payload.chatId, []);\n\t\tVue.set(state.saveUserList, payload.chatId, []);\n\n\t\treturn true;\n\t}\n\n\tsetMutationType(state, payload)\n\t{\n\t\tlet mutationType = {\n\t\t\tapplied: false,\n\t\t\tinitialType: MutationType.none,\n\t\t\tappliedType: MutationType.none,\n\t\t\tscrollStickToTop: false,\n\t\t\tscrollMessageId: 0\n\t\t};\n\n\t\tif (payload.initialType && !payload.appliedType)\n\t\t{\n\t\t\tpayload.appliedType = payload.initialType;\n\t\t}\n\n\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t{\n\t\t\tVue.set(state.mutationType, payload.chatId, mutationType);\n\t\t}\n\n\t\tstate.mutationType[payload.chatId] = {...mutationType, ...payload};\n\n\t\treturn true;\n\t}\n\n\tprepareMessage(message)\n\t{\n\t\tlet result = this.validate(Object.assign({}, message));\n\n\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\tresult.templateId = result.id;\n\n\t\treturn Object.assign({}, this.getElementState(), result);\n\t}\n\n\tmanageCacheBeforeSet(cache, elements, recursive = false)\n\t{\n\t\tlet result = {\n\t\t\ttype: IntersectionType.empty,\n\t\t\tfoundElements: [],\n\t\t\tnoneElements: []\n\t\t};\n\n\t\tif (!cache || cache.length <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (let id of elements)\n\t\t{\n\t\t\tif (cache.includes(id))\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.found;\n\t\t\t\t}\n\t\t\t\tresult.foundElements.push(id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.none;\n\t\t\t\t}\n\t\t\t\tresult.noneElements.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tresult.type === IntersectionType.found\n\t\t\t&& cache.length === elements.length\n\t\t\t&& result.foundElements.length === elements.length\n\t\t)\n\t\t{\n\t\t\tresult.type = IntersectionType.equal;\n\t\t}\n\t\telse if (\n\t\t\tresult.type === IntersectionType.none\n\t\t\t&& !recursive\n\t\t\t&& result.foundElements.length > 0\n\t\t)\n\t\t{\n\t\t\tlet reverseResult = this.manageCacheBeforeSet(cache.reverse(), elements.reverse(), true);\n\t\t\tif (reverseResult.type === IntersectionType.found)\n\t\t\t{\n\t\t\t\treverseResult.type = IntersectionType.foundReverse;\n\t\t\t\treturn reverseResult;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateSaveLists(state, chatId)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t!chatId\n\t\t\t|| !this.store.getters['dialogues/canSaveChat']\n\t\t\t|| !this.store.getters['dialogues/canSaveChat'](chatId)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.initCollection(state, {chatId: chatId});\n\n\t\tlet count = 0;\n\t\tlet saveMessageList = [];\n\t\tlet saveFileList = [];\n\t\tlet saveUserList = [];\n\n\t\tlet dialog = this.store.getters['dialogues/getByChatId'](chatId);\n\t\tif (dialog && dialog.type === 'private')\n\t\t{\n\t\t\tsaveUserList.push(parseInt(dialog.dialogId));\n\t\t}\n\n\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t{\n\t\t\tif (state.collection[chatId][index].id.toString().startsWith('temporary'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (count >= StorageLimit.messages && !state.collection[chatId][index].unread)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tsaveMessageList.unshift(state.collection[chatId][index].id);\n\n\t\t\tcount++;\n\t\t}\n\n\t\tsaveMessageList = saveMessageList.slice(0, StorageLimit.messages);\n\n\t\tstate.collection[chatId].filter(element => saveMessageList.includes(element.id)).forEach(element =>\n\t\t{\n\t\t\tif (element.authorId > 0)\n\t\t\t{\n\t\t\t\tsaveUserList.push(element.authorId);\n\t\t\t}\n\n\t\t\tif (element.params.FILE_ID instanceof Array)\n\t\t\t{\n\t\t\t\tsaveFileList = element.params.FILE_ID.concat(saveFileList);\n\t\t\t}\n\t\t});\n\n\t\tstate.saveMessageList[chatId] = saveMessageList;\n\t\tstate.saveFileList[chatId] = [...new Set(saveFileList)];\n\t\tstate.saveUserList[chatId] = [...new Set(saveUserList)];\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 150;\n\t}\n\n\tsaveState(state, chatId)\n\t{\n\t\tif (!this.updateSaveLists(state, chatId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveMessageList: {},\n\t\t\t\tsaveUserList: {},\n\t\t\t\tsaveFileList: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in state.saveMessageList)\n\t\t\t{\n\t\t\t\tif (!state.saveMessageList.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t}\n\n\t\t\t\tstate.collection[chatId]\n\t\t\t\t\t.filter(element => state.saveMessageList[chatId].includes(element.id))\n\t\t\t\t\t.forEach(element => storedState.collection[chatId].push(element))\n\t\t\t\t;\n\n\t\t\t\tstoredState.saveMessageList[chatId] = state.saveMessageList[chatId];\n\t\t\t\tstoredState.saveFileList[chatId] = state.saveFileList[chatId];\n\t\t\t\tstoredState.saveUserList[chatId] = state.saveUserList[chatId];\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tupdateSubordinateStates()\n\t{\n\t\tthis.store.dispatch('users/saveState');\n\t\tthis.store.dispatch('files/saveState');\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\t// previous P&P format\n\t\tif (typeof fields.textOriginal === \"string\" || typeof fields.textOriginal === \"number\")\n\t\t{\n\t\t\tresult.text = fields.textOriginal.toString();\n\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: fields.text.toString(),\n\t\t\t\t\tisConverted: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse // modern format\n\t\t{\n\t\t\tif (typeof fields.text_converted !== 'undefined')\n\t\t\t{\n\t\t\t\tfields.textConverted = fields.text_converted;\n\t\t\t}\n\t\t\tif (typeof fields.textConverted === \"string\" || typeof fields.textConverted === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = fields.textConverted.toString();\n\t\t\t}\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.text = fields.text.toString();\n\n\t\t\t\tlet isConverted = typeof result.textConverted !== 'undefined';\n\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: isConverted? result.textConverted: result.text,\n\t\t\t\t\tisConverted\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.senderId !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.senderId;\n\t\t}\n\t\telse if (typeof fields.author_id !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.author_id;\n\t\t}\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tif (fields.system === true || fields.system === 'Y')\n\t\t\t{\n\t\t\t\tresult.authorId = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.params === \"object\" && fields.params !== null)\n\t\t{\n\t\t\tconst params = this.validateParams(fields.params);\n\t\t\tif (params)\n\t\t\t{\n\t\t\t\tresult.params = params;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.push === \"boolean\")\n\t\t{\n\t\t\tresult.push = fields.push;\n\t\t}\n\n\t\tif (typeof fields.sending === \"boolean\")\n\t\t{\n\t\t\tresult.sending = fields.sending;\n\t\t}\n\n\t\tif (typeof fields.unread === \"boolean\")\n\t\t{\n\t\t\tresult.unread = fields.unread;\n\t\t}\n\n\t\tif (typeof fields.blink === \"boolean\")\n\t\t{\n\t\t\tresult.blink = fields.blink;\n\t\t}\n\n\t\tif (typeof fields.error === \"boolean\" || typeof fields.error === \"string\")\n\t\t{\n\t\t\tresult.error = fields.error;\n\t\t}\n\n\t\tif (typeof fields.retry === \"boolean\")\n\t\t{\n\t\t\tresult.retry = fields.retry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateParams(params)\n\t{\n\t\tconst result = {};\n\t\ttry\n\t\t{\n\t\t\tfor (let field in params)\n\t\t\t{\n\t\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (field === 'COMPONENT_ID')\n\t\t\t\t{\n\t\t\t\t\tif (typeof params[field] === \"string\" && BX.Vue.isComponent(params[field]))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'LIKE')\n\t\t\t\t{\n\t\t\t\t\tif (params[field] instanceof Array)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult['REACTION'] = {like: params[field].map(element => parseInt(element))};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'CHAT_LAST_DATE')\n\t\t\t\t{\n\t\t\t\t\tresult[field] = Utils.date.cast(params[field]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\tlet hasResultElements = false;\n\t\tfor (let field in result)\n\t\t{\n\t\t\tif (!result.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thasResultElements = true;\n\t\t\tbreak\n\t\t}\n\n\t\treturn hasResultElements? result: null;\n\t}\n\n\tconvertToHtml(params = {})\n\t{\n\t\tlet {\n\t\t\tquote = true,\n\t\t\timage = true,\n\t\t\ttext = '',\n\t\t\thighlightText = '',\n\t\t\tisConverted = false,\n\t\t\tenableBigSmile = true\n\t\t} = params;\n\n\t\ttext = text.trim();\n\n\t\tif (!isConverted)\n\t\t{\n\t\t\ttext = text.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\t}\n\n\t\tif (text.startsWith('/me'))\n\t\t{\n\t\t\ttext = `<i>${text.substr(4)}</i>`;\n\t\t}\n\t\telse if (text.startsWith('/loud'))\n\t\t{\n\t\t\ttext = `<b>${text.substr(6)}</b>`;\n\t\t}\n\n\t\tconst quoteSign = \"&gt;&gt;\";\n\t\tif (quote && text.indexOf(quoteSign) >= 0)\n\t\t{\n\t\t\tlet textPrepareFlag = false;\n\t\t\tlet textPrepare = text.split(isConverted? \"<br />\": \"\\n\");\n\t\t\tfor (let i = 0; i < textPrepare.length; i++)\n\t\t\t{\n\t\t\t\tif (textPrepare[i].startsWith(quoteSign))\n\t\t\t\t{\n\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '<div class=\"bx-im-message-content-quote\"><div class=\"bx-im-message-content-quote-wrap\">');\n\t\t\t\t\twhile (++i < textPrepare.length && textPrepare[i].startsWith(quoteSign))\n\t\t\t\t\t{\n\t\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '');\n\t\t\t\t\t}\n\t\t\t\t\ttextPrepare[i - 1] += '</div></div><br>';\n\t\t\t\t\ttextPrepareFlag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttext = textPrepare.join(\"<br />\");\n\t\t}\n\n\t\ttext = text.replace(/\\n/gi, '<br />');\n\n\t\ttext = text.replace(/\\t/gi, '&nbsp;&nbsp;&nbsp;&nbsp;');\n\n\t\ttext = this.decodeBbCode(text, false, enableBigSmile);\n\n\t\tif (quote)\n\t\t{\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)\\[(.*?)\\]<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, p4, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\"><div class=\\\"bx-im-message-content-quote-name\\\"><span class=\\\"bx-im-message-content-quote-name-text\\\">\" + p1 + \"</span><span class=\\\"bx-im-message-content-quote-name-time\\\">\" + p2 + \"</span></div>\" + p3 + \"</div></div><br />\";\n\t\t\t});\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\">\" + p1 + \"</div></div><br />\";\n\t\t\t});\n\t\t}\n\n\t\tif (image)\n\t\t{\n\t\t\tlet changed = false;\n\t\t\ttext = text.replace(/<a(.*?)>(http[s]{0,1}:\\/\\/.*?)<\\/a>/ig, function(whole, aInner, text, offset)\n\t\t\t{\n\t\t\t\tif(!text.match(/(\\.(jpg|jpeg|png|gif)\\?|\\.(jpg|jpeg|png|gif)$)/i) || text.indexOf(\"/docs/pub/\") > 0 || text.indexOf(\"logout=yes\") > 0)\n\t\t\t\t{\n\t\t\t\t\treturn whole;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn (offset > 0? '<br />':'')+'<a' +aInner+ ' target=\"_blank\" class=\"bx-im-element-file-image\"><img src=\"'+text+'\" class=\"bx-im-element-file-image-source-text\" onerror=\"BX.Messenger.Model.MessagesModel.hideErrorImage(this)\"></a></span>';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (changed)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<\\/span>(\\n?)<br(\\s\\/?)>/ig, '</span>').replace(/<br(\\s\\/?)>(\\n?)<br(\\s\\/?)>(\\n?)<span/ig, '<br /><span');\n\t\t\t}\n\t\t}\n\n\t\tif (highlightText)\n\t\t{\n\t\t\ttext = text.replace(new RegExp(\"(\" + highlightText.replace(/[\\-\\[\\]\\/{}()*+?.\\\\^$|]/g, \"\\\\$&\") + \")\", 'ig'), '<span class=\"bx-messenger-highlight\">$1</span>');\n\t\t}\n\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttext = text.replace(\n\t\t\t\t/^(\\s*<img\\s+src=[^>]+?data-code=[^>]+?data-definition=\"UHD\"[^>]+?style=\"width:)(\\d+)(px[^>]+?height:)(\\d+)(px[^>]+?class=\"bx-smile\"\\s*\\/?>\\s*)$/,\n\t\t\t\tfunction doubleSmileSize(match, start, width, middle, height, end) {\n\t\t\t\t\treturn start + (parseInt(width, 10) * 1.7) + middle + (parseInt(height, 10) * 1.7) + end;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (text.substr(-6) == '<br />')\n\t\t{\n\t\t\ttext = text.substr(0, text.length - 6);\n\t\t}\n\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\treturn text;\n\t};\n\n\tdecodeBbCode(text, textOnly = false, enableBigSmile = true)\n\t{\n\t\treturn MessagesModel.decodeBbCode({text, textOnly, enableBigSmile})\n\t}\n\n\tstatic decodeBbCode(params = {})\n\t{\n\t\tlet {text, textOnly = false, enableBigSmile = true} = params;\n\n\t\tlet codeReplacement = [];\n\n\t\ttext = text.replace(/\\[CODE\\]\\n?(.*?)\\[\\/CODE\\]/sig, function(whole, text)\n\t\t{\n\t\t\tlet id = codeReplacement.length;\n\t\t\tcodeReplacement.push(text);\n\t\t\treturn '####REPLACEMENT_MARK_'+id+'####';\n\t\t});\n\n\t\ttext = text.replace(/\\[LIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-like\"></span>');\n\t\ttext = text.replace(/\\[DISLIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-dislike\"></span>');\n\n\t\ttext = text.replace(/\\[USER=([0-9]{1,})\\](.*?)\\[\\/USER\\]/ig, (whole, userId, text) => '<span class=\"bx-im-mention\" data-type=\"USER\" data-value=\"'+userId+'\">'+text+'</span>');\n\n\t\ttext = text.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})\\](.*?)\\[\\/CHAT\\]/ig, (whole, openlines, chatId, text) => openlines? text: '<span class=\"bx-im-mention\" data-type=\"CHAT\" data-value=\"chat'+chatId+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => '<span class=\"bx-im-mention\" data-type=\"CALL\" data-value=\"'+Utils.text.htmlspecialchars(number)+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[PCH=([0-9]{1,})\\](.*?)\\[\\/PCH\\]/ig, (whole, historyId, text) => text); // TODO tag PCH\n\n\t\ttext = text.replace(/\\[SEND(?:=(.+?))?\\](.+?)?\\[\\/SEND\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command-wrap\">'+\n\t\t\t\t\t'<span class=\"bx-im-message-command\" data-entity=\"send\">'+text+'</span>'+\n\t\t\t\t\t'<span class=\"bx-im-message-command-data\">'+command+'</span>'+\n\t\t\t\t'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttext = text.replace(/\\[PUT(?:=(.+?))?\\](.+?)?\\[\\/PUT\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\/\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"put\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\tlet textElementSize = 0;\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttextElementSize = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, '').trim().length;\n\t\t}\n\n\t\ttext = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, (whole) =>\n\t\t{\n\t\t\tlet url = whole.match(/icon\\=(\\S+[^\\s.,> )\\];\\'\\\"!?])/i);\n\t\t\tif (url && url[1])\n\t\t\t{\n\t\t\t\turl = url[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet attrs = {'src': url, 'border': 0};\n\n\t\t\tlet size = whole.match(/size\\=(\\d+)/i);\n\t\t\tif (size && size[1])\n\t\t\t{\n\t\t\t\tattrs['width'] = size[1];\n\t\t\t\tattrs['height'] = size[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet width = whole.match(/width\\=(\\d+)/i);\n\t\t\t\tif (width && width[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = width[1];\n\t\t\t\t}\n\n\t\t\t\tlet height = whole.match(/height\\=(\\d+)/i);\n\t\t\t\tif (height && height[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = height[1];\n\t\t\t\t}\n\n\t\t\t\tif (attrs['width'] && !attrs['height'])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = attrs['width'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && !attrs['width'])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = attrs['height'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && attrs['width'])\n\t\t\t\t{}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = 20;\n\t\t\t\t\tattrs['height'] = 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs['width'] = attrs['width']>100? 100: attrs['width'];\n\t\t\tattrs['height'] = attrs['height']>100? 100: attrs['height'];\n\n\t\t\tif (enableBigSmile && textElementSize === 0 && attrs['width'] === attrs['height'] && attrs['width'] === 20)\n\t\t\t{\n\t\t\t\tattrs['width'] = 40;\n\t\t\t\tattrs['height'] = 40;\n\t\t\t}\n\n\t\t\tlet title = whole.match(/title\\=(.*[^\\s\\]])/i);\n\t\t\tif (title && title[1])\n\t\t\t{\n\t\t\t\ttitle = title[1];\n\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t}\n\t\t\t\tif (title)\n\t\t\t\t{\n\t\t\t\t\tattrs['title'] = Utils.text.htmlspecialchars(title).trim();\n\t\t\t\t\tattrs['alt'] = attrs['title'];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet attributes = '';\n\t\t\tfor (let name in attrs)\n\t\t\t{\n\t\t\t\tif (attrs.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tattributes += name+'=\"'+attrs[name]+'\" ';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn '<img class=\"bx-smile bx-icon\" '+attributes+'>';\n\t\t});\n\n\t\tcodeReplacement.forEach((code, index) => {\n\t\t\ttext = text.replace('####REPLACEMENT_MARK_'+index+'####',\n\t\t\t\t!textOnly? '<div class=\"bx-im-message-content-code\">'+code+'</div>': code\n\t\t\t)\n\t\t});\n\n\t\treturn text;\n\t}\n\n\tstatic hideErrorImage(element)\n\t{\n\t\tif (element.parentNode && element.parentNode)\n\t\t{\n\t\t\telement.parentNode.innerHTML = '<a href=\"'+element.src+'\" target=\"_blank\">'+element.src+'</a>';\n\t\t}\n\t\treturn true;\n\t};\n}\n\nexport {MessagesModel};","\n/**\n * Bitrix Messenger\n * Dialogues model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {StorageLimit} from \"im.const\";\nimport {Utils} from \"im.utils\";\n\nclass DialoguesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'dialogues';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tsaveDialogList: [],\n\t\t\tsaveChatList: [],\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\thost: null\n\t\t}\n\t}\n\n\tgetElementStateSaveException()\n\t{\n\t\treturn {\n\t\t\twritingList: null,\n\t\t\tquoteId: null\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tdialogId: '0',\n\t\t\tchatId: 0,\n\t\t\tcounter: 0,\n\t\t\tunreadId: 0,\n\t\t\tunreadLastId: 0,\n\t\t\tmanagerList: [],\n\t\t\treadedList: [],\n\t\t\twritingList: [],\n\t\t\ttextareaMessage: \"\",\n\t\t\tquoteId: 0,\n\t\t\tinit: false,\n\n\t\t\tname: \"\",\n\t\t\towner: 0,\n\t\t\textranet: false,\n\t\t\tavatar: \"\",\n\t\t\tcolor: \"#17A3EA\",\n\t\t\ttype: \"chat\",\n\t\t\tentityType: \"\",\n\t\t\tentityId: \"\",\n\t\t\tentityData1: \"\",\n\t\t\tentityData2: \"\",\n\t\t\tentityData3: \"\",\n\t\t\tdateCreate: new Date(),\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId];\n\t\t\t},\n\t\t\tgetByChatId: state => chatId =>\n\t\t\t{\n\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\tfor (let dialogId in state.collection)\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection.hasOwnProperty(dialogId))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.collection[dialogId].chatId === chatId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[dialogId];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetQuoteId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].quoteId;\n\t\t\t},\n\t\t\tcanSaveChat: state => chatId =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(chatId))\n\t\t\t\t{\n\t\t\t\t\tchatId = parseInt(chatId);\n\t\t\t\t}\n\t\t\t\treturn state.saveChatList.includes(parseInt(chatId));\n\t\t\t},\n\t\t\tcanSaveDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn state.saveDialogList.includes(dialogId.toString());\n\t\t\t},\n\t\t\tisPrivateDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\tdialogId = dialogId.toString();\n\t\t\t\treturn state.collection[dialogId.toString()] && state.collection[dialogId].type === 'private';\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(dialog => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, dialog), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.dialogId);\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tupdateWriting: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.dialogId].writingList.findIndex(el => el.userId === payload.userId);\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = [].concat(store.state.collection[payload.dialogId].writingList);\n\t\t\t\t\t\twritingList.unshift({\n\t\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\t\tuserName: payload.userName,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/1',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = store.state.collection[payload.dialogId].writingList.filter(el => el.userId !== payload.userId);\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/2',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tupdateReaded: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet readedList = store.state.collection[payload.dialogId].readedList.filter(el => el.userId !== payload.userId);\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\treadedList.push({\n\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\tuserName: payload.userName || '',\n\t\t\t\t\t\tmessageId: payload.messageId,\n\t\t\t\t\t\tdate: payload.date || (new Date()),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'updateReaded',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate({readedList}, {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tincreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet increasedCounter = counter + payload.count;\n\t\t\t\tif (increasedCounter > 100)\n\t\t\t\t{\n\t\t\t\t\tincreasedCounter = 100;\n\t\t\t\t}\n\n\t\t\t\tlet fields = {\n\t\t\t\t\tcounter: increasedCounter\n\t\t\t\t};\n\n\t\t\t\tif (typeof payload.unreadLastId !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tfields.unreadLastId = payload.unreadLastId;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'increaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tdecreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet decreasedCounter = counter - payload.count;\n\t\t\t\tif (decreasedCounter < 0)\n\t\t\t\t{\n\t\t\t\t\tdecreasedCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tlet unreadId = payload.unreadId > store.state.collection[payload.dialogId].unreadId? payload.unreadId: store.state.collection[payload.dialogId].unreadId;\n\n\t\t\t\tif (\n\t\t\t\t\tstore.state.collection[payload.dialogId].unreadId !== unreadId\n\t\t\t\t\t|| store.state.collection[payload.dialogId].counter !== decreasedCounter\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (decreasedCounter === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tunreadId = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tactionName: 'decreaseCounter',\n\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\tfields : {\n\t\t\t\t\t\t\tcounter: decreasedCounter,\n\t\t\t\t\t\t\tunreadId: unreadId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tsaveDialog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('saveDialog', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tsaveDialog: (state, payload) =>\n\t\t\t{\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update this flag\n\t\t\t\tif (!(payload.chatId > 0 && payload.dialogId.length > 0))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet saveDialogList = state.saveDialogList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.dialogId;\n\t\t\t\t});\n\n\t\t\t\tsaveDialogList.unshift(payload.dialogId);\n\n\t\t\t\tsaveDialogList = saveDialogList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tif (state.saveDialogList.join(',') === saveDialogList.join(','))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstate.saveDialogList = saveDialogList;\n\n\n\t\t\t\tlet saveChatList = state.saveChatList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.chatId;\n\t\t\t\t});\n\n\t\t\t\tsaveChatList.unshift(payload.chatId);\n\n\t\t\t\tstate.saveChatList = saveChatList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {dialogId: element.dialogId});\n\n\t\t\t\t\tstate.collection[element.dialogId] = Object.assign(\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tstate.collection[element.dialogId],\n\t\t\t\t\t\telement\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.dialogId];\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t}\n\t\t};\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.dialogId] !== 'undefined')\n\t\t{\n\t\t\treturn true\n\t\t}\n\n\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\n\t\tif (payload.fields)\n\t\t{\n\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\tthis.validate(Object.assign({}, payload.fields), {host: state.host})\n\t\t\t);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 100;\n\t}\n\n\tsaveState(state = {})\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveDialogList: [].concat(state.saveDialogList),\n\t\t\t\tsaveChatList: [].concat(state.saveChatList),\n\t\t\t};\n\n\t\t\tstate.saveDialogList.forEach(dialogId => {\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t\treturn false;\n\n\t\t\t\tstoredState.collection[dialogId] = Object.assign(\n\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\tthis.cloneState(state.collection[dialogId], this.getElementStateSaveException())\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.dialog_id !== 'undefined')\n\t\t{\n\t\t\tfields.dialogId = fields.dialog_id;\n\t\t}\n\t\tif (typeof fields.dialogId === \"number\" || typeof fields.dialogId === \"string\")\n\t\t{\n\t\t\tresult.dialogId = fields.dialogId.toString();\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\telse if (typeof fields.id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.quoteId === \"number\")\n\t\t{\n\t\t\tresult.quoteId = parseInt(fields.quoteId);\n\t\t}\n\n\t\tif (typeof fields.counter === \"number\" || typeof fields.counter === \"string\")\n\t\t{\n\t\t\tresult.counter = parseInt(fields.counter);\n\t\t}\n\n\t\tif (typeof fields.unread_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadId = fields.unread_id;\n\t\t}\n\t\tif (typeof fields.unreadId === \"number\" || typeof fields.unreadId === \"string\")\n\t\t{\n\t\t\tresult.unreadId = parseInt(fields.unreadId);\n\t\t}\n\n\t\tif (typeof fields.unread_last_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadLastId = fields.unread_last_id;\n\t\t}\n\t\tif (typeof fields.unreadLastId === \"number\" || typeof fields.unreadLastId === \"string\")\n\t\t{\n\t\t\tresult.unreadLastId = parseInt(fields.unreadLastId);\n\t\t}\n\n\t\tif (typeof fields.readed_list !== 'undefined')\n\t\t{\n\t\t\tfields.readedList = fields.readed_list;\n\t\t}\n\t\tif (typeof fields.readedList !== 'undefined')\n\t\t{\n\t\t\tresult.readedList = [];\n\n\t\t\tif (fields.readedList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.readedList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\t\t\t\t\tif (typeof element.user_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userId = element.user_id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.user_name !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userName = element.user_name;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.message_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.messageId = element.message_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!element.userId || !element.userName || !element.messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName.toString();\n\t\t\t\t\trecord.messageId = parseInt(element.messageId);\n\n\t\t\t\t\trecord.date = Utils.date.cast(element.date);\n\n\t\t\t\t\tresult.readedList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.writing_list !== 'undefined')\n\t\t{\n\t\t\tfields.writingList = fields.writing_list;\n\t\t}\n\t\tif (typeof fields.writingList !== 'undefined')\n\t\t{\n\t\t\tresult.writingList = [];\n\n\t\t\tif (fields.writingList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.writingList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\n\t\t\t\t\tif (!element.userId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName;\n\n\t\t\t\t\tresult.writingList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.manager_list !== 'undefined')\n\t\t{\n\t\t\tfields.managerList = fields.manager_list;\n\t\t}\n\t\tif (typeof fields.managerList !== 'undefined')\n\t\t{\n\t\t\tresult.managerList = [];\n\n\t\t\tif (fields.managerList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.managerList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.managerList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mute_list !== 'undefined')\n\t\t{\n\t\t\tfields.muteList = fields.mute_list;\n\t\t}\n\t\tif (typeof fields.muteList !== 'undefined')\n\t\t{\n\t\t\tresult.muteList = [];\n\n\t\t\tif (fields.muteList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.muteList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.muteList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.textareaMessage !== 'undefined')\n\t\t{\n\t\t\tresult.textareaMessage = fields.textareaMessage.toString();\n\t\t}\n\n\t\tif (typeof fields.title !== 'undefined')\n\t\t{\n\t\t\tfields.name = fields.title;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\t\tif (typeof fields.owner !== 'undefined')\n\t\t{\n\t\t\tfields.ownerId = fields.owner;\n\t\t}\n\t\tif (typeof fields.ownerId === \"number\" || typeof fields.ownerId === \"string\")\n\t\t{\n\t\t\tresult.ownerId = parseInt(fields.ownerId);\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color.toString();\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_type !== 'undefined')\n\t\t{\n\t\t\tfields.entityType = fields.entity_type;\n\t\t}\n\t\tif (typeof fields.entityType === \"string\")\n\t\t{\n\t\t\tresult.entityType = fields.entityType.toString();\n\t\t}\n\t\tif (typeof fields.entity_id !== 'undefined')\n\t\t{\n\t\t\tfields.entityId = fields.entity_id;\n\t\t}\n\t\tif (typeof fields.entityId === \"string\" || typeof fields.entityId === \"number\")\n\t\t{\n\t\t\tresult.entityId = fields.entityId.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_1 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData1 = fields.entity_data_1;\n\t\t}\n\t\tif (typeof fields.entityData1 === \"string\")\n\t\t{\n\t\t\tresult.entityData1 = fields.entityData1.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_2 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData2 = fields.entity_data_2;\n\t\t}\n\t\tif (typeof fields.entityData2 === \"string\")\n\t\t{\n\t\t\tresult.entityData2 = fields.entityData2.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_3 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData3 = fields.entity_data_3;\n\t\t}\n\t\tif (typeof fields.entityData3 === \"string\")\n\t\t{\n\t\t\tresult.entityData3 = fields.entityData3.toString();\n\t\t}\n\n\t\tif (typeof fields.date_create !== 'undefined')\n\t\t{\n\t\t\tfields.dateCreate = fields.date_create;\n\t\t}\n\n\t\tif (typeof fields.dateCreate !== \"undefined\")\n\t\t{\n\t\t\tresult.dateCreate = Utils.date.cast(fields.dateCreate);\n\t\t}\n\n\t\tif (typeof fields.dateLastOpen !== \"undefined\")\n\t\t{\n\t\t\tresult.dateLastOpen = Utils.date.cast(fields.dateLastOpen);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {DialoguesModel};","/**\n * Bitrix Messenger\n * User model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {Utils} from \"im.utils\";\n\nclass UsersModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'users';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {}\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t\tfirstName = this.getVariable('default.name', ''),\n\t\t\tlastName = '',\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tname,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tabsent: false,\n\t\t\tdepartments: [],\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\",\n\t\t\t\tinnerPhone: \"\",\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (userId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId);\n\n\t\t\t\tif (userId <= 0)\n\t\t\t\t{\n\t\t\t\t\tif (getTemporary)\n\t\t\t\t\t{\n\t\t\t\t\t\tuserId = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!getTemporary\n\t\t\t\t\t&& (!state.collection[userId] || !state.collection[userId].init)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[userId])\n\t\t\t\t{\n\t\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[userId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.id = parseInt(payload.id);\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {id: element.id});\n\n\t\t\t\t\tstate.collection[element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.id];\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.id] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.id, this.getElementState());\n\n\t\treturn true;\n\t}\n\n\tgetSaveUserList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveUserList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveUserList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveUserList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tlet exceptionList = {\n\t\t\t\tabsent: true,\n\t\t\t\tidle: true,\n\t\t\t\tmobileLastDate: true,\n\t\t\t\tlastActivityDate: true,\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection[userId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[userId] = this.cloneState(state.collection[userId], exceptionList);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = fields.first_name;\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = fields.last_name;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\n\t\t\tif (typeof fields.firstName !== \"undefined\" && !fields.firstName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.firstName = fields.firstName.toString();\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.lastName = fields.lastName.toString();\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tresult.idle = Utils.date.cast(fields.idle, false);\n\t\t}\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tresult.lastActivityDate = Utils.date.cast(fields.lastActivityDate, false);\n\t\t}\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tresult.mobileLastDate = Utils.date.cast(fields.mobileLastDate, false);\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tresult.absent = Utils.date.cast(fields.absent, false);\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && fields.phones)\n\t\t{\n\t\t\tresult.phones = {};\n\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.inner_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.innerPhone = fields.phones.inner_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.innerPhone === 'string' || typeof fields.phones.innerPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.innerPhone = fields.phones.innerPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {UsersModel};","/**\n * Bitrix Messenger\n * File model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {FileStatus, FileType, MutationType} from 'im.const';\nimport {Utils} from \"im.utils\";\n\nclass FilesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'files';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tchatId = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tchatId,\n\t\t\tname,\n\t\t\ttemplateId: id,\n\t\t\tdate: new Date(),\n\t\t\ttype: 'file',\n\t\t\textension: \"\",\n\t\t\ticon: \"empty\",\n\t\t\tsize: 0,\n\t\t\timage: false,\n\t\t\tstatus: FileStatus.done,\n\t\t\tprogress: 100,\n\t\t\tauthorId: 0,\n\t\t\tauthorName: \"\",\n\t\t\turlPreview: \"\",\n\t\t\turlShow: \"\",\n\t\t\turlDownload: \"\",\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (chatId, fileId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tif (!chatId || !fileId)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.index[chatId] || !state.index[chatId][fileId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!getTemporary && !state.index[chatId][fileId].init)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId][fileId];\n\t\t\t},\n\t\t\tgetList: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.index[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.init = true;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields), {host: store.state.host});\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.index[payload.chatId][payload.id] = payload;\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(state.collection[element.chatId][index], element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tdelete payload.fields.templateId;\n\t\t\t\t\tlet element = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t\tstate.collection[payload.chatId][index] = element;\n\t\t\t\t\tstate.index[payload.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id !== payload.id);\n\t\t\t\tdelete state.index[payload.chatId][payload.id];\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.chatId] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, []);\n\t\tVue.set(state.index, payload.chatId, {});\n\n\t\treturn true;\n\t}\n\n\tgetLoadedState(state)\n\t{\n\t\tif (!state || typeof state !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tif (typeof state.collection !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tstate.index = {};\n\n\t\tfor (let chatId in state.collection)\n\t\t{\n\t\t\tif (!state.collection.hasOwnProperty(chatId))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tstate.index[chatId] = {};\n\n\t\t\tstate.collection[chatId]\n\t\t\t\t.filter(file => file != null)\n\t\t\t\t.forEach(file => {\n\t\t\t\t\tstate.index[chatId][file.id] = file;\n\t\t\t});\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tgetSaveFileList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveFileList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveFileList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveFileList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(fileId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.index[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!state.index[chatId][fileId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[chatId].push(\n\t\t\t\t\t\tstate.index[chatId][fileId]\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type;\n\t\t}\n\n\t\tif (typeof fields.extension === \"string\")\n\t\t{\n\t\t\tresult.extension = fields.extension.toString();\n\n\t\t\tif (result.type === 'image')\n\t\t\t{\n\t\t\t\tresult.icon = 'img';\n\t\t\t}\n\t\t\telse if (result.type === 'video')\n\t\t\t{\n\t\t\t\tresult.icon = 'mov';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.icon = FilesModel.getIconType(result.extension);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\n\t\tif (typeof fields.size === \"number\" || typeof fields.size === \"string\")\n\t\t{\n\t\t\tresult.size = parseInt(fields.size);\n\t\t}\n\n\t\tif (typeof fields.image === 'boolean')\n\t\t{\n\t\t\tresult.image = false;\n\t\t}\n\t\telse if (typeof fields.image === 'object' && fields.image)\n\t\t{\n\t\t\tresult.image = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t};\n\n\t\t\tif (typeof fields.image.width === \"string\" || typeof fields.image.width === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.width = parseInt(fields.image.width);\n\t\t\t}\n\t\t\tif (typeof fields.image.height === \"string\" || typeof fields.image.height === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.height = parseInt(fields.image.height);\n\t\t\t}\n\n\t\t\tif (result.image.width <= 0 || result.image.height <= 0)\n\t\t\t{\n\t\t\t\tresult.image = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.status === \"string\" && typeof FileStatus[fields.status] !== 'undefined')\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.progress === \"number\" || typeof fields.progress === \"string\")\n\t\t{\n\t\t\tresult.progress = parseInt(fields.progress);\n\t\t}\n\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t}\n\n\t\tif (typeof fields.authorName === \"string\" || typeof fields.authorName === \"number\")\n\t\t{\n\t\t\tresult.authorName = fields.authorName.toString();\n\t\t}\n\n\t\tif (typeof fields.urlPreview === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlPreview\n\t\t\t\t|| fields.urlPreview.startsWith('http')\n\t\t\t\t|| fields.urlPreview.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlPreview = fields.urlPreview;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlPreview = options.host+fields.urlPreview;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlDownload === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlDownload\n\t\t\t\t|| fields.urlDownload.startsWith('http')\n\t\t\t\t|| fields.urlDownload.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlDownload = fields.urlDownload;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlDownload = options.host+fields.urlDownload;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlShow === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlShow\n\t\t\t\t|| fields.urlShow.startsWith('http')\n\t\t\t\t|| fields.urlShow.startsWith('bx')\n\t\t\t\t|| fields.urlShow.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlShow = fields.urlShow;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlShow = options.host+fields.urlShow;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic getType(type)\n\t{\n\t\ttype = type.toString().toLowerCase().split('.').splice(-1)[0];\n\n\t\tswitch(type)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\t\treturn FileType.image;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\treturn FileType.video;\n\n\t\t\tcase 'mp3':\n\t\t\t\treturn FileType.audio;\n\t\t}\n\n\t\treturn FileType.file\n\t}\n\n\tstatic getIconType(extension)\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t}\n}\n\nexport {FilesModel};"],"names":["ApplicationModel","common","host","getVariable","location","protocol","siteId","userId","languageId","dialog","dialogId","chatId","diskFolderId","messageLimit","enableReadMessages","messageExtraCount","disk","enabled","maxFileSize","mobile","keyboardShow","device","type","DeviceType","desktop","orientation","DeviceOrientation","portrait","options","quoteEnable","quoteFromRight","autoplayVideo","darkBackground","error","active","code","description","Object","assign","set","store","payload","commit","validate","state","hasChange","group","hasOwnProperty","field","isSaveNeeded","saveState","increaseDialogExtraCount","count","decreaseDialogExtraCount","newCounter","clearDialogExtraCount","fields","result","toString","startsWith","substr","parseInt","isNaN","VuexBuilderModel","IntersectionType","empty","equal","none","found","foundReverse","MessagesModel","created","collection","mutationType","saveMessageList","saveFileList","saveUserList","templateId","templateType","id","authorId","date","Date","text","textConverted","params","TYPE","COMPONENT_ID","push","unread","sending","retry","blink","getMutationType","initialType","MutationType","appliedType","getLastId","length","lastId","i","element","getMessage","messageId","index","get","getBlank","getElementState","getSaveFileList","getSaveUserList","add","getTime","dispatch","actionStart","test","Vue","nextTick","actionError","actionFinish","Array","map","message","prepareMessage","insertType","data","setAfter","setBefore","update","findIndex","el","setTimeout","delete","elements","clear","applyMutationType","readMessages","readId","unreadMessages","unreadId","initCollection","setMutationType","chats","chatsSave","forEach","StorageLimit","messages","filter","includes","intersection","manageCacheBeforeSet","reverse","foundElements","removeIntersectionCacheElements","clearTimeout","removeIntersectionCacheTimeout","noneElements","scrollStickToTop","scrollMessageId","unshift","getters","Set","lastElementId","needApplySort","sort","a","b","isSaveState","applied","saveNeeded","updateSubordinateStates","concat","cache","recursive","reverseResult","isSaveAvailable","slice","FILE_ID","updateSaveLists","storedState","chat_id","Utils","cast","textOriginal","convertToHtml","isConverted","text_converted","senderId","author_id","system","validateParams","BX","isComponent","like","e","hasResultElements","quote","image","highlightText","enableBigSmile","trim","replace","quoteSign","indexOf","textPrepare","split","textPrepareFlag","join","decodeBbCode","whole","p1","p2","p3","p4","offset","changed","aInner","match","RegExp","doubleSmileSize","start","width","middle","height","end","textOnly","codeReplacement","openlines","number","htmlspecialchars","historyId","command","html","textElementSize","url","attrs","size","title","attributes","name","parentNode","innerHTML","src","DialoguesModel","saveDialogList","saveChatList","writingList","quoteId","counter","unreadLastId","managerList","readedList","textareaMessage","init","owner","extranet","avatar","color","entityType","entityId","entityData1","entityData2","entityData3","dateCreate","getByChatId","getQuoteId","canSaveChat","canSaveDialog","isPrivateDialog","updateWriting","action","userName","actionName","updateReaded","increaseCounter","increasedCounter","decreaseCounter","decreasedCounter","saveDialog","dialogues","cloneState","getElementStateSaveException","getState","dialog_id","unread_id","unread_last_id","readed_list","record","user_id","user_name","message_id","writing_list","manager_list","mute_list","muteList","ownerId","endsWith","encodeURI","entity_type","entity_id","entity_data_1","entity_data_2","entity_data_3","date_create","dateLastOpen","UsersModel","firstName","lastName","workPosition","gender","birthday","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","absent","departments","phones","workPhone","personalMobile","personalPhone","innerPhone","getTemporary","user","db","list","exceptionList","first_name","last_name","elementsOfName","work_position","external_auth_id","last_activity_date","mobile_last_date","departmentId","work_phone","personal_mobile","personal_phone","inner_phone","FilesModel","extension","icon","FileStatus","done","progress","authorName","urlPreview","urlShow","urlDownload","fileId","getList","file","getIconType","toLowerCase","splice","FileType","video","audio"],"mappings":"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"}