{"version":3,"file":"registry.bundle.js","sources":["../src/application.js","../src/messages.js","../src/dialogues.js","../src/users.js","../src/files.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {DeviceType, DeviceOrientation} from 'im.const';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nclass ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tsiteId: this.getVariable('common.siteId', 'default'),\n\t\t\t\tuserId: this.getVariable('common.userId', 0),\n\t\t\t\tlanguageId: this.getVariable('common.languageId', 'en'),\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tdialogId: this.getVariable('dialog.dialogId', '0'),\n\t\t\t\tchatId: this.getVariable('dialog.chatId', 0),\n\t\t\t\tdiskFolderId: this.getVariable('dialog.diskFolderId', 0),\n\t\t\t\tmessageLimit: this.getVariable('dialog.messageLimit', 20),\n\t\t\t},\n\t\t\tdisk:\n\t\t\t{\n\t\t\t\tenabled: false,\n\t\t\t\tmaxFileSize: 5242880,\n\t\t\t},\n\t\t\tdevice:\n\t\t\t{\n\t\t\t\ttype: this.getVariable('device.type', DeviceType.desktop),\n\t\t\t\torientation: this.getVariable('device.orientation', DeviceOrientation.portrait),\n\t\t\t},\n\t\t\terror:\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tcode: '',\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tcommon: null,\n\t\t\tdialog: null,\n\t\t\tdevice: null,\n\t\t\terror: null\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('set', this.validate(payload));\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet hasChange = false;\n\t\t\t\tfor (let group in payload)\n\t\t\t\t{\n\t\t\t\t\tif (!payload.hasOwnProperty(group))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let field in payload[group])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload[group].hasOwnProperty(field))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate[group][field] = payload[group][field];\n\t\t\t\t\t\thasChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChange && this.isSaveNeeded(payload))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.common === 'object' && fields.common)\n\t\t{\n\t\t\tresult.common = {};\n\n\t\t\tif (typeof fields.common.userId === 'number')\n\t\t\t{\n\t\t\t\tresult.common.userId = fields.common.userId;\n\t\t\t}\n\n\t\t\tif (typeof fields.common.languageId === 'string')\n\t\t\t{\n\t\t\t\tresult.common.languageId = fields.common.languageId;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.dialog === 'object' && fields.dialog)\n\t\t{\n\t\t\tresult.dialog = {};\n\n\t\t\tif (typeof fields.dialog.dialogId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId.toString();\n\t\t\t\tresult.dialog.chatId = 0;\n\t\t\t}\n\t\t\telse if (typeof fields.dialog.dialogId === 'string')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId;\n\n\t\t\t\tif (typeof fields.dialog.chatId !== 'number')\n\t\t\t\t{\n\t\t\t\t\tlet chatId = fields.dialog.dialogId;\n\t\t\t\t\tif (chatId.startsWith('chat'))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatId = fields.dialog.dialogId.substr(4);\n\t\t\t\t\t}\n\n\t\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\t\tresult.dialog.chatId = !isNaN(chatId)? chatId: 0\n\t\t\t\t\tfields.dialog.chatId = result.dialog.chatId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.chatId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.chatId = fields.dialog.chatId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.diskFolderId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.diskFolderId = fields.dialog.diskFolderId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageLimit === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageLimit = fields.dialog.messageLimit;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.disk === 'object' && fields.disk)\n\t\t{\n\t\t\tresult.disk = {};\n\n\t\t\tif (typeof fields.disk.enabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.disk.enabled = fields.disk.enabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.disk.maxFileSize === 'number')\n\t\t\t{\n\t\t\t\tresult.disk.maxFileSize = fields.disk.maxFileSize;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.device === 'object' && fields.device)\n\t\t{\n\t\t\tresult.device = {};\n\n\t\t\tif (typeof fields.device.type === 'string' && typeof DeviceType[fields.device.type] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.type = fields.device.type;\n\t\t\t}\n\n\t\t\tif (typeof fields.device.orientation === 'string' && typeof DeviceOrientation[fields.device.orientation] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.orientation = fields.device.orientation;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.error === 'object' && fields.error)\n\t\t{\n\t\t\tif (typeof fields.error.active === 'boolean')\n\t\t\t{\n\t\t\t\tresult.error = {\n\t\t\t\t\tactive: fields.error.active,\n\t\t\t\t\tcode: fields.error.code.toString() || '',\n\t\t\t\t\tdescription: fields.error.description.toString() || '',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {ApplicationModel};","/**\n * Bitrix Messenger\n * Message model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {InsertType} from 'im.const';\n\nclass MessagesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'messages';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\ttemplateId: 0,\n\t\t\ttemplateType: 'message',\n\n\t\t\tid: 0,\n\t\t\tchatId: 0,\n\t\t\tauthorId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttext: \"\",\n\t\t\ttextConverted: \"\",\n\t\t\tparams: {\n\t\t\t\tTYPE : 'default',\n\t\t\t\tCOMPONENT_ID : 'bx-messenger-message',\n\t\t\t},\n\n\t\t\tunread: false,\n\t\t\tsending: false,\n\t\t\terror: false,\n\t\t\tblink: false,\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tgetLastId: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[chatId][index];\n\t\t\t\t\tif (element.sending)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\treturn element.id;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\tresult.id = 'temporary' + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.unread = false;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\t\t\t\tstore.dispatch('actionStart', {\n\t\t\t\t\tid: result.id,\n\t\t\t\t\tchatId: result.chatId,\n\t\t\t\t});\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tactionStart: (store, payload) =>\n\t\t\t{\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionError: (store, payload) =>\n\t\t\t{\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionFinish: (store, payload) =>\n\t\t\t{\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, message));\n\t\t\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : InsertType.after,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, message));\n\t\t\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : InsertType.before,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields));\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(store.state.collection, payload.chatId, []);\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id == payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (payload.fields.params)\n\t\t\t\t{\n\t\t\t\t\tresult.params = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState().params,\n\t\t\t\t\t\tstore.state.collection[payload.chatId][index].params,\n\t\t\t\t\t\tpayload.fields.params\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\treadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.readId = payload.readId || 0;\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet result = store.commit('readMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\treadId: payload.readId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, payload.messages? [].concat(payload.messages): []);\n\t\t\t\t}\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.created += 1;\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (payload.insertType == InsertType.after)\n\t\t\t\t{\n\t\t\t\t\tfor (let element of payload.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof state.collection[element.chatId] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tVue.set(state.collection, element.chatId, []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\t\tif (index > -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor (let element of payload.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof state.collection[element.chatId] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tVue.set(state.collection, element.chatId, []);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\t\tif (index > -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t}\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id == payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id != payload.id);\n\t\t\t},\n\t\t\treadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: false}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (fields.date instanceof Date)\n\t\t{\n\t\t\tresult.date = fields.date;\n\t\t}\n\t\telse if (typeof fields.date === \"string\")\n\t\t{\n\t\t\tresult.date = new Date(fields.date);\n\t\t}\n\n\t\t// previous P&P format\n\t\tif (typeof fields.textOriginal === \"string\" || typeof fields.textOriginal === \"number\")\n\t\t{\n\t\t\tresult.text = fields.textOriginal.toString();\n\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: fields.text.toString(),\n\t\t\t\t\tisConverted: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse // modern format\n\t\t{\n\t\t\tif (typeof fields.text_converted !== 'undefined')\n\t\t\t{\n\t\t\t\tfields.textConverted = fields.text_converted;\n\t\t\t}\n\t\t\tif (typeof fields.textConverted === \"string\" || typeof fields.textConverted === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = fields.textConverted.toString();\n\t\t\t}\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.text = fields.text.toString();\n\n\t\t\t\tlet isConverted = typeof result.textConverted !== 'undefined';\n\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: isConverted? result.textConverted: result.text,\n\t\t\t\t\tisConverted\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.senderId !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.senderId;\n\t\t}\n\t\telse if (typeof fields.author_id !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.author_id;\n\t\t}\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tif (fields.system === true || fields.system === 'Y')\n\t\t\t{\n\t\t\t\tresult.authorId = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.params === \"object\" && fields.params !== null)\n\t\t{\n\t\t\tconst params = this.validateParams(fields.params);\n\t\t\tif (params)\n\t\t\t{\n\t\t\t\tresult.params = params;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.sending === \"boolean\")\n\t\t{\n\t\t\tresult.sending = fields.sending;\n\t\t}\n\n\t\tif (typeof fields.unread === \"boolean\")\n\t\t{\n\t\t\tresult.unread = fields.unread;\n\t\t}\n\n\t\tif (typeof fields.blink === \"boolean\")\n\t\t{\n\t\t\tresult.blink = fields.blink;\n\t\t}\n\n\t\tif (typeof fields.error === \"boolean\" || typeof fields.error === \"string\")\n\t\t{\n\t\t\tresult.error = fields.error;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateParams(params)\n\t{\n\t\tconst result = {};\n\n\t\ttry\n\t\t{\n\t\t\tfor (let field in params)\n\t\t\t{\n\t\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (field === 'COMPONENT_ID')\n\t\t\t\t{\n\t\t\t\t\tif (typeof params[field] === \"string\" && BX.Vue.isComponent(params[field]))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\tlet hasResultElements = false;\n\t\tfor (let field in result)\n\t\t{\n\t\t\tif (!result.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thasResultElements = true;\n\t\t\tbreak\n\t\t}\n\n\t\treturn hasResultElements? result: null;\n\t}\n\n\tconvertToHtml(params = {})\n\t{\n\t\tlet {\n\t\t\tquote = true,\n\t\t\timage = true,\n\t\t\ttext = '',\n\t\t\thighlightText = '',\n\t\t\tisConverted = false,\n\t\t\tenableBigSmile = true\n\t\t} = params;\n\n\t\ttext = text.trim();\n\n\t\tif (!isConverted)\n\t\t{\n\t\t\ttext = text.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\t}\n\n\t\tif (text.startsWith('/me'))\n\t\t{\n\t\t\ttext = `<i>${text.substr(4)}</i>`;\n\t\t}\n\t\telse if (text.startsWith('/loud'))\n\t\t{\n\t\t\ttext = `<b>${text.substr(6)}</b>`;\n\t\t}\n\n\t\tconst quoteSign = \"&gt;&gt;\";\n\t\tif (quote && text.indexOf(quoteSign) >= 0)\n\t\t{\n\t\t\tlet textPrepareFlag = false;\n\t\t\tlet textPrepare = text.split(isConverted? \"<br />\": \"\\n\");\n\t\t\tfor (let i = 0; i < textPrepare.length; i++)\n\t\t\t{\n\t\t\t\tif (textPrepare[i].startsWith(quoteSign))\n\t\t\t\t{\n\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '<div class=\"bx-im-message-content-quote\"><div class=\"bx-im-message-content-quote-wrap\">');\n\t\t\t\t\twhile (++i < textPrepare.length && textPrepare[i].startsWith(quoteSign))\n\t\t\t\t\t{\n\t\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '');\n\t\t\t\t\t}\n\t\t\t\t\ttextPrepare[i - 1] += '</div></div><br>';\n\t\t\t\t\ttextPrepareFlag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttext = textPrepare.join(\"<br />\");\n\t\t}\n\n\t\ttext = this.decodeBbCode(text, false, enableBigSmile);\n\n\t\ttext = text.replace(/\\n/gi, '<br />');\n\n\t\ttext = text.replace(/\\t/gi, '&nbsp;&nbsp;&nbsp;&nbsp;');\n\n\t\tif (quote)\n\t\t{\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)\\[(.*?)\\]<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, p4, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\"><div class=\\\"bx-im-message-content-quote-name\\\">\" + p1 + \" <span class=\\\"bx-im-message-content-quote-time\\\">\" + p2 + \"</span></div>\" + p3 + \"</div></div><br />\";\n\t\t\t});\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\">\" + p1 + \"</div></div><br />\";\n\t\t\t});\n\t\t}\n\n\t\tif (image)\n\t\t{\n\t\t\tlet changed = false;\n\t\t\ttext = text.replace(/<a(.*?)>(http[s]{0,1}:\\/\\/.*?)<\\/a>/ig, function(whole, aInner, text, offset)\n\t\t\t{\n\t\t\t\tif(!text.match(/(\\.(jpg|jpeg|png|gif)\\?|\\.(jpg|jpeg|png|gif)$)/i) || text.indexOf(\"/docs/pub/\") > 0 || text.indexOf(\"logout=yes\") > 0)\n\t\t\t\t{\n\t\t\t\t\treturn whole;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn (offset > 0? '<br />':'')+'<a' +aInner+ ' target=\"_blank\" class=\"bx-im-element-file-image\"><img src=\"'+text+'\" class=\"bx-im-element-file-image-source-text\" onerror=\"BX.Messenger.Model.MessagesModel.hideErrorImage(this)\"></a></span>';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (changed)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<\\/span>(\\n?)<br(\\s\\/?)>/ig, '</span>').replace(/<br(\\s\\/?)>(\\n?)<br(\\s\\/?)>(\\n?)<span/ig, '<br /><span');\n\t\t\t}\n\t\t}\n\n\t\tif (highlightText)\n\t\t{\n\t\t\ttext = text.replace(new RegExp(\"(\" + highlightText.replace(/[\\-\\[\\]\\/{}()*+?.\\\\^$|]/g, \"\\\\$&\") + \")\", 'ig'), '<span class=\"bx-messenger-highlight\">$1</span>');\n\t\t}\n\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttext = text.replace(\n\t\t\t\t/^(\\s*<img\\s+src=[^>]+?data-code=[^>]+?data-definition=\"UHD\"[^>]+?style=\"width:)(\\d+)(px[^>]+?height:)(\\d+)(px[^>]+?class=\"bx-smile\"\\s*\\/?>\\s*)$/,\n\t\t\t\tfunction doubleSmileSize(match, start, width, middle, height, end) {\n\t\t\t\t\treturn start + (parseInt(width, 10) * 2) + middle + (parseInt(height, 10) * 2) + end;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (text.substr(-6) == '<br />')\n\t\t{\n\t\t\ttext = text.substr(0, text.length - 6);\n\t\t}\n\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\treturn text;\n\t};\n\n\tdecodeBbCode(textElement, textOnly = false, enableBigSmile = true)\n\t{\n\t\tlet codeReplacement = [];\n\n\t\ttextElement = textElement.replace(/\\[CODE\\]\\n?(.*?)\\[\\/CODE\\]/sig, function(whole, text)\n\t\t{\n\t\t\tlet id = codeReplacement.length;\n\t\t\tcodeReplacement.push(text);\n\t\t\treturn '####REPLACEMENT_MARK_'+id+'####';\n\t\t});\n\n\t\ttextElement = textElement.replace(/\\[LIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-like\"></span>');\n\t\ttextElement = textElement.replace(/\\[DISLIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-dislike\"></span>');\n\n\t\ttextElement = textElement.replace(/\\[USER=([0-9]{1,})\\](.*?)\\[\\/USER\\]/ig, (whole, userId, text) => text);\n\n\t\ttextElement = textElement.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})\\](.*?)\\[\\/CHAT\\]/ig, (whole, openlines, chatId, text) => text);\n\n\t\ttextElement = textElement.replace(/\\[PCH=([0-9]{1,})\\](.*?)\\[\\/PCH\\]/ig, (whole, historyId, text) => text);\n\n\t\ttextElement = textElement.replace(/\\[SEND(?:=(.+?))?\\](.+?)?\\[\\/SEND\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = command? command: text;\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"send\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttextElement = textElement.replace(/\\[PUT(?:=(.+?))?\\](.+?)?\\[\\/PUT\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = command? command: text;\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\/\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"put\" v-on:click=\"alert(1)\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttextElement = textElement.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, command, text) => text);\n\n\t\tlet textElementSize = 0;\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttextElementSize = textElement.replace(/\\[icon\\=([^\\]]*)\\]/ig, '').trim().length;\n\t\t}\n\n\t\ttextElement = textElement.replace(/\\[icon\\=([^\\]]*)\\]/ig, (whole) =>\n\t\t{\n\t\t\tlet url = whole.match(/icon\\=(\\S+[^\\s.,> )\\];\\'\\\"!?])/i);\n\t\t\tif (url && url[1])\n\t\t\t{\n\t\t\t\turl = url[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet attrs = {'src': url, 'border': 0};\n\n\t\t\tlet size = whole.match(/size\\=(\\d+)/i);\n\t\t\tif (size && size[1])\n\t\t\t{\n\t\t\t\tattrs['width'] = size[1];\n\t\t\t\tattrs['height'] = size[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet width = whole.match(/width\\=(\\d+)/i);\n\t\t\t\tif (width && width[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = width[1];\n\t\t\t\t}\n\n\t\t\t\tlet height = whole.match(/height\\=(\\d+)/i);\n\t\t\t\tif (height && height[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = height[1];\n\t\t\t\t}\n\n\t\t\t\tif (attrs['width'] && !attrs['height'])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = attrs['width'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && !attrs['width'])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = attrs['height'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && attrs['width'])\n\t\t\t\t{}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = 20;\n\t\t\t\t\tattrs['height'] = 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs['width'] = attrs['width']>100? 100: attrs['width'];\n\t\t\tattrs['height'] = attrs['height']>100? 100: attrs['height'];\n\n\t\t\tif (enableBigSmile && textElementSize == 0 && attrs['width'] == attrs['height'] && attrs['width'] == 20)\n\t\t\t{\n\t\t\t\tattrs['width'] = 40;\n\t\t\t\tattrs['height'] = 40;\n\t\t\t}\n\n\t\t\tlet title = whole.match(/title\\=(.*[^\\s\\]])/i);\n\t\t\tif (title && title[1])\n\t\t\t{\n\t\t\t\ttitle = title[1];\n\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t}\n\t\t\t\tif (title)\n\t\t\t\t{\n\t\t\t\t\tattrs['title'] = BX.Messenger.Utils.htmlspecialchars(title).trim();\n\t\t\t\t\tattrs['alt'] = BX.Messenger.Utils.htmlspecialchars(title).trim();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet attributes = '';\n\t\t\tfor (let name in attrs)\n\t\t\t{\n\t\t\t\tif (attrs.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tattributes += name+'=\"'+attrs[name]+'\" ';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn '<img class=\"bx-smile bx-icon\" '+attributes+'>';\n\t\t});\n\n\t\tcodeReplacement.forEach((code, index) => {\n\t\t\ttextElement = textElement.replace('####REPLACEMENT_MARK_'+index+'####',\n\t\t\t\t!textOnly? '<div class=\"bx-im-message-content-code\">'+code+'</div>': code\n\t\t\t)\n\t\t});\n\n\t\treturn textElement;\n\t}\n\n\tstatic hideErrorImage(element)\n\t{\n\t\tif (element.parentNode && element.parentNode)\n\t\t{\n\t\t\telement.parentNode.innerHTML = '<a href=\"'+element.src+'\" target=\"_blank\">'+element.src+'</a>';\n\t\t}\n\t\treturn true;\n\t};\n}\n\nexport {MessagesModel};","\n/**\n * Bitrix Messenger\n * Message model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nclass DialoguesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'dialogues';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tdialogId: 0,\n\t\t\tchatId: 0,\n\t\t\tcounter: 0,\n\t\t\tunreadId: 0,\n\t\t\tunreadLastId: 0,\n\t\t\treadedList: [],\n\t\t\twritingList: [],\n\t\t\tinit: false,\n\n\t\t\tname: \"\",\n\t\t\towner: 0,\n\t\t\textranet: false,\n\t\t\tavatar: \"\",\n\t\t\tcolor: \"#17A3EA\",\n\t\t\ttype: \"chat\",\n\t\t\tentityType: \"\",\n\t\t\tentityId: \"\",\n\t\t\tentityData1: \"\",\n\t\t\tentityData2: \"\",\n\t\t\tentityData3: \"\",\n\t\t\tdateCreate: new Date(),\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId] || state.collection[dialogId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(dialog => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, dialog), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.dialogId);\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tupdateWriting: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.dialogId].writingList.findIndex(el => el.userId == payload.userId);\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = [].concat(store.state.collection[payload.dialogId].writingList);\n\t\t\t\t\t\twritingList.unshift({\n\t\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\t\tuserName: payload.userName,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/1',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : {writingList}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = store.state.collection[payload.dialogId].writingList.filter(el => el.userId != payload.userId);\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/2',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : {writingList}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tincreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tlet increasedCounter = counter + payload.count;\n\n\t\t\t\tlet fields = {\n\t\t\t\t\tcounter: increasedCounter\n\t\t\t\t};\n\n\t\t\t\tif (typeof payload.unreadLastId !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tfields.unreadLastId = payload.unreadLastId;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'increaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tdecreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tlet decreasedCounter = counter - payload.count;\n\t\t\t\tif (decreasedCounter < 0)\n\t\t\t\t{\n\t\t\t\t\tdecreasedCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tlet unreadId = payload.unreadId > store.state.collection[payload.dialogId].unreadId? payload.unreadId: store.state.collection[payload.dialogId].unreadId;\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'decreaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : {\n\t\t\t\t\t\tcounter: decreasedCounter,\n\t\t\t\t\t\tunreadId: unreadId\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.dialogId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\n\t\t\t\t\tif (payload.fields)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, payload.fields), {host: state.host})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tif (typeof state.collection[element.dialogId] === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tVue.set(state.collection, element.dialogId, element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.collection[element.dialogId] = element;\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.dialogId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.dialogId]\n\t\t\t}\n\t\t};\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.dialog_id !== 'undefined')\n\t\t{\n\t\t\tfields.dialogId = fields.dialog_id;\n\t\t}\n\t\tif (typeof fields.dialogId === \"number\" || typeof fields.dialogId === \"string\")\n\t\t{\n\t\t\tresult.dialogId = fields.dialogId.toString();\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\telse if (typeof fields.id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (typeof fields.counter === \"number\" || typeof fields.counter === \"string\")\n\t\t{\n\t\t\tresult.counter = parseInt(fields.counter);\n\t\t}\n\n\t\tif (typeof fields.unread_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadId = fields.unread_id;\n\t\t}\n\t\tif (typeof fields.unreadId === \"number\" || typeof fields.unreadId === \"string\")\n\t\t{\n\t\t\tresult.unreadId = parseInt(fields.unreadId);\n\t\t}\n\n\t\tif (typeof fields.unread_last_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadLastId = fields.unread_last_id;\n\t\t}\n\t\tif (typeof fields.unreadLastId === \"number\" || typeof fields.unreadLastId === \"string\")\n\t\t{\n\t\t\tresult.unreadLastId = parseInt(fields.unreadLastId);\n\t\t}\n\n\t\tif (typeof fields.readed_list !== 'undefined')\n\t\t{\n\t\t\tfields.readedList = fields.readed_list;\n\t\t}\n\t\tif (typeof fields.readedList !== 'undefined')\n\t\t{\n\t\t\tresult.readedList = [];\n\n\t\t\tif (fields.readedList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.readedList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\t\t\t\t\tif (typeof element.user_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userId = element.user_id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.user_name !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userName = element.user_name;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.message_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.messageId = element.message_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!element.userId || !element.userName || !element.messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName.toString();\n\t\t\t\t\trecord.messageId = parseInt(element.messageId);\n\n\t\t\t\t\tif (fields.date instanceof Date)\n\t\t\t\t\t{\n\t\t\t\t\t\trecord.date = fields.date;\n\t\t\t\t\t}\n\t\t\t\t\telse if (typeof fields.date === \"string\")\n\t\t\t\t\t{\n\t\t\t\t\t\trecord.date = new Date(fields.date);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\trecord.date = new Date();\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.readedList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.writing_list !== 'undefined')\n\t\t{\n\t\t\tfields.writingList = fields.writing_list;\n\t\t}\n\t\tif (typeof fields.writingList !== 'undefined')\n\t\t{\n\t\t\tresult.writingList = [];\n\n\t\t\tif (fields.writingList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.writingList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\n\t\t\t\t\tif (!element.userId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName;\n\n\t\t\t\t\tresult.writingList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mute_list !== 'undefined')\n\t\t{\n\t\t\tfields.muteList = fields.mute_list;\n\t\t}\n\t\tif (typeof fields.muteList !== 'undefined')\n\t\t{\n\t\t\tresult.muteList = [];\n\n\t\t\tif (fields.muteList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.muteList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.muteList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.title !== 'undefined')\n\t\t{\n\t\t\tfields.name = fields.title;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\t\tif (typeof fields.owner !== 'undefined')\n\t\t{\n\t\t\tfields.ownerId = fields.owner;\n\t\t}\n\t\tif (typeof fields.ownerId === \"number\" || typeof fields.ownerId === \"string\")\n\t\t{\n\t\t\tresult.ownerId = parseInt(fields.ownerId);\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tif (!fields.avatar || fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.avatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.avatar = options.host+fields.avatar;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color.toString();\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_type !== 'undefined')\n\t\t{\n\t\t\tfields.entityType = fields.entity_type;\n\t\t}\n\t\tif (typeof fields.entityType === \"string\")\n\t\t{\n\t\t\tresult.entityType = fields.entityType.toString();\n\t\t}\n\t\tif (typeof fields.entity_id !== 'undefined')\n\t\t{\n\t\t\tfields.entityId = fields.entity_id;\n\t\t}\n\t\tif (typeof fields.entityId === \"string\" || typeof fields.entityId === \"number\")\n\t\t{\n\t\t\tresult.entityId = fields.entityId.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_1 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData1 = fields.entity_data_1;\n\t\t}\n\t\tif (typeof fields.entityData1 === \"string\")\n\t\t{\n\t\t\tresult.entityData1 = fields.entityData1.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_2 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData2 = fields.entity_data_2;\n\t\t}\n\t\tif (typeof fields.entityData2 === \"string\")\n\t\t{\n\t\t\tresult.entityData2 = fields.entityData2.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_3 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData3 = fields.entity_data_3;\n\t\t}\n\t\tif (typeof fields.entityData3 === \"string\")\n\t\t{\n\t\t\tresult.entityData3 = fields.entityData3.toString();\n\t\t}\n\n\t\tif (typeof fields.date_create !== 'undefined')\n\t\t{\n\t\t\tfields.dateCreate = fields.date_create;\n\t\t}\n\t\tif (fields.dateCreate instanceof Date)\n\t\t{\n\t\t\tresult.dateCreate = fields.dateCreate;\n\t\t}\n\t\telse if (typeof fields.dateCreate === \"string\")\n\t\t{\n\t\t\tresult.dateCreate = new Date(fields.dateCreate);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {DialoguesModel};","/**\n * Bitrix Messenger\n * User model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nclass UsersModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'users';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\treturn {\n\t\t\tid: 0,\n\t\t\tname: this.getVariable('defaultName', ''),\n\t\t\tfirstName: this.getVariable('defaultName', ''),\n\t\t\tlastName: \"\",\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tdepartments: [],\n\t\t\tabsent: false,\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\"\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => userId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[userId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[userId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tuserId : payload.id,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tif (typeof state.collection[element.id] === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tVue.set(state.collection, element.id, element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.collection[element.id] = element;\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.id] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.id, this.getElementState());\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.id]\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = fields.first_name;\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = fields.last_name;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\n\t\t\tif (typeof fields.firstName !== \"undefined\" && !fields.firstName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.firstName = fields.firstName.toString();\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.lastName = fields.lastName.toString();\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tif (!fields.avatar || fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.avatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.avatar = options.host+fields.avatar;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tif (fields.idle instanceof Date)\n\t\t\t{\n\t\t\t\tresult.idle = fields.idle;\n\t\t\t}\n\t\t\telse if (typeof fields.idle === \"string\")\n\t\t\t{\n\t\t\t\tresult.idle = new Date(fields.idle);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.idle = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tif (fields.lastActivityDate instanceof Date)\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = fields.lastActivityDate;\n\t\t\t}\n\t\t\telse if (typeof fields.lastActivityDate === \"string\")\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = new Date(fields.lastActivityDate);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.lastActivityDate = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tif (fields.mobileLastDate instanceof Date)\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = fields.mobileLastDate;\n\t\t\t}\n\t\t\telse if (typeof fields.mobileLastDate === \"string\")\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = new Date(fields.mobileLastDate);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.mobileLastDate = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tif (fields.absent instanceof Date)\n\t\t\t{\n\t\t\t\tresult.absent = fields.absent;\n\t\t\t}\n\t\t\telse if (typeof fields.absent === \"string\")\n\t\t\t{\n\t\t\t\tresult.absent = new Date(fields.absent);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.absent = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && !fields.phones)\n\t\t{\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {UsersModel};","/**\n * Bitrix Messenger\n * File model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {InsertType} from 'im.const';\n\nclass FilesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'files';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tid: 0,\n\t\t\ttemplateId: 0,\n\t\t\tchatId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttype: 'file',\n\t\t\tname: \"\",\n\t\t\textension: \"\",\n\t\t\ticon: \"empty\",\n\t\t\tsize: 0,\n\t\t\timage: false,\n\t\t\tstatus: 'done',\n\t\t\tprogress: 100,\n\t\t\tauthorId: 0,\n\t\t\tauthorName: \"\",\n\t\t\turlPreview: \"\",\n\t\t\turlShow: \"\",\n\t\t\turlDownload: \"\",\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetObject: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.index[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : InsertType.after,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, message), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result)\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : InsertType.before,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields), {host: store.state.host});\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(store.state.collection, payload.chatId, []);\n\t\t\t\t\tVue.set(store.state.index, payload.chatId, {});\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id == payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t\tVue.set(state.index, payload.chatId, {});\n\t\t\t\t}\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (payload.insertType == InsertType.after)\n\t\t\t\t{\n\t\t\t\t\tfor (let element of payload.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof state.collection[element.chatId] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tVue.set(state.collection, element.chatId, []);\n\t\t\t\t\t\t\tVue.set(state.index, element.chatId, {});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\t\tif (index > -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId][index] = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfor (let element of payload.data)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof state.collection[element.chatId] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tVue.set(state.collection, element.chatId, []);\n\t\t\t\t\t\t\tVue.set(state.index, element.chatId, {});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\t\tif (index > -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId][index] = element;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t\tVue.set(state.index, payload.chatId, {});\n\t\t\t\t}\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id == payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tlet element = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t\tstate.collection[payload.chatId][index] = element;\n\t\t\t\t\tstate.index[payload.chatId][element.id] = element;\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.collection, payload.chatId, []);\n\t\t\t\t\tVue.set(state.index, payload.chatId, {});\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id != payload.id);\n\t\t\t\tdelete state.index[payload.chatId][payload.id];\n\t\t\t},\n\t\t}\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (fields.date instanceof Date)\n\t\t{\n\t\t\tresult.date = fields.date;\n\t\t}\n\t\telse if (typeof fields.date === \"string\")\n\t\t{\n\t\t\tresult.date = new Date(fields.date);\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type;\n\t\t}\n\n\t\tif (typeof fields.extension === \"string\")\n\t\t{\n\t\t\tresult.extension = fields.extension.toString();\n\n\t\t\tif (result.type === 'image')\n\t\t\t{\n\t\t\t\tresult.icon = 'img';\n\t\t\t}\n\t\t\telse if (result.type === 'video')\n\t\t\t{\n\t\t\t\tresult.icon = 'mov';\n\t\t\t}\n\t\t\telse if (result.extension === 'docx' || result.extension === 'doc')\n\t\t\t{\n\t\t\t\tresult.icon = 'doc';\n\t\t\t}\n\t\t\telse if (result.extension === 'xlsx' || result.extension === 'xls')\n\t\t\t{\n\t\t\t\tresult.icon = 'xls';\n\t\t\t}\n\t\t\telse if (result.extension === 'pptx' || result.extension === 'ppt')\n\t\t\t{\n\t\t\t\tresult.icon = 'ppt';\n\t\t\t}\n\t\t\telse if (result.extension === 'rar')\n\t\t\t{\n\t\t\t\tresult.icon = 'rar';\n\t\t\t}\n\t\t\telse if (result.extension === 'zip')\n\t\t\t{\n\t\t\t\tresult.icon = 'zip';\n\t\t\t}\n\t\t\telse if (result.extension === 'pdf')\n\t\t\t{\n\t\t\t\tresult.icon = 'pdf';\n\t\t\t}\n\t\t\telse if (result.extension === 'txt')\n\t\t\t{\n\t\t\t\tresult.icon = 'txt';\n\t\t\t}\n\t\t\telse if (result.extension === 'php')\n\t\t\t{\n\t\t\t\tresult.icon = 'php';\n\t\t\t}\n\t\t\telse if (result.extension === 'conf' || result.extension === 'ini' || result.extension === 'plist')\n\t\t\t{\n\t\t\t\tresult.icon = 'set';\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\n\t\tif (typeof fields.size === \"number\" || typeof fields.size === \"string\")\n\t\t{\n\t\t\tresult.size = parseInt(fields.size);\n\t\t}\n\n\t\tif (typeof fields.image === 'boolean')\n\t\t{\n\t\t\tresult.image = false;\n\t\t}\n\t\telse if (typeof fields.image === 'object' && fields.image)\n\t\t{\n\t\t\tresult.image = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t};\n\n\t\t\tif (typeof fields.image.width === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.width = fields.image.width;\n\t\t\t}\n\t\t\tif (typeof fields.image.height === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.height = fields.image.height;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.progress === \"number\" || typeof fields.progress === \"string\")\n\t\t{\n\t\t\tresult.progress = parseInt(fields.progress);\n\t\t}\n\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t}\n\n\t\tif (typeof fields.authorName === \"string\" || typeof fields.authorName === \"number\")\n\t\t{\n\t\t\tresult.authorName = fields.authorName.toString();\n\t\t}\n\n\t\tif (typeof fields.urlPreview === 'string')\n\t\t{\n\t\t\tif (!fields.urlPreview || fields.urlPreview.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.urlPreview = fields.urlPreview;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlPreview = options.host+fields.urlPreview;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlDownload === 'string')\n\t\t{\n\t\t\tif (!fields.urlDownload || fields.urlDownload.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.urlDownload = fields.urlDownload;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlDownload = options.host+fields.urlDownload;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlShow === 'string')\n\t\t{\n\t\t\tif (!fields.urlShow || fields.urlShow.startsWith('http'))\n\t\t\t{\n\t\t\t\tresult.urlShow = fields.urlShow;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlShow = options.host+fields.urlShow;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nexport {FilesModel};"],"names":["ApplicationModel","common","host","getVariable","location","protocol","siteId","userId","languageId","dialog","dialogId","chatId","diskFolderId","messageLimit","disk","enabled","maxFileSize","device","type","DeviceType","desktop","orientation","DeviceOrientation","portrait","error","active","code","description","set","store","payload","commit","validate","state","hasChange","group","hasOwnProperty","field","isSaveNeeded","saveState","fields","result","toString","startsWith","substr","parseInt","isNaN","VuexBuilderModel","MessagesModel","created","collection","templateId","templateType","id","authorId","date","Date","text","textConverted","params","TYPE","COMPONENT_ID","unread","sending","blink","getLastId","length","index","element","get","getBlank","getElementState","add","Object","assign","dispatch","actionStart","Vue","nextTick","actionError","actionFinish","Array","map","message","push","insertType","InsertType","after","data","setBefore","actionName","before","update","findIndex","el","setTimeout","delete","readMessages","readId","count","initCollection","messages","concat","unshift","filter","chat_id","textOriginal","convertToHtml","isConverted","text_converted","senderId","author_id","system","validateParams","BX","isComponent","e","hasResultElements","quote","image","highlightText","enableBigSmile","trim","replace","quoteSign","indexOf","textPrepare","split","i","textPrepareFlag","join","decodeBbCode","whole","p1","p2","p3","p4","offset","changed","aInner","match","RegExp","doubleSmileSize","start","width","middle","height","end","textElement","textOnly","codeReplacement","openlines","historyId","command","html","textElementSize","url","attrs","size","title","Messenger","Utils","htmlspecialchars","attributes","name","forEach","parentNode","innerHTML","src","DialoguesModel","counter","unreadId","unreadLastId","readedList","writingList","init","owner","extranet","avatar","color","entityType","entityId","entityData1","entityData2","entityData3","dateCreate","updateWriting","action","userName","increaseCounter","increasedCounter","decreaseCounter","decreasedCounter","options","getState","dialog_id","unread_id","unread_last_id","readed_list","record","user_id","user_name","message_id","messageId","writing_list","mute_list","muteList","ownerId","entity_type","entity_id","entity_data_1","entity_data_2","entity_data_3","date_create","UsersModel","firstName","lastName","workPosition","gender","birthday","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","departments","absent","phones","workPhone","personalMobile","personalPhone","user","first_name","last_name","elementsOfName","work_position","external_auth_id","last_activity_date","mobile_last_date","departmentId","work_phone","personal_mobile","personal_phone","FilesModel","extension","icon","progress","authorName","urlPreview","urlShow","urlDownload","getObject","file"],"mappings":"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"}