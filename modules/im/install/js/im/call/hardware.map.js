{"version":3,"sources":["hardware.js"],"names":["lsKey","defaultMicrophone","defaultCamera","defaultSpeaker","enableMicAutoParameters","preferHd","HardwareManager","this","initialized","_currentDeviceList","updating","Object","defineProperty","get","_getDeviceMap","bind","microphoneId","localStorage","getItem","microphoneList","set","setItem","cameraId","cameraList","speakerId","audioOutputList","preferHdQuality","prototype","init","Promise","resolve","reject","checkMicrophone","then","enumerateDevices","deviceList","navigator","mediaDevices","addEventListener","BX","debounce","onNavigatorDeviceChanged","catch","getUserMedia","audio","stream","getAudioTracks","forEach","track","stop","devices","hasCamera","Error","keys","length","getMicrophoneList","values","filter","deviceInfo","kind","getCameraList","getSpeakerList","canSelectSpeaker","HTMLMediaElement","updateDeviceList","e","removedDevices","addedDevices","index","findIndex","dev","deviceId","splice","push","onCustomEvent","added","removed","deviceKind","result","i","label","Call","Hardware"],"mappings":"CAAC,WAEA,IAAIA,GACHC,kBAAmB,oCACnBC,cAAe,gCACfC,eAAgB,iCAChBC,wBAAyB,4CACzBC,SAAU,mCAGX,IAAIC,EAAkB,WAErBC,KAAKC,YAAc,MACnBD,KAAKE,sBACLF,KAAKG,SAAW,MAEhBC,OAAOC,eAAeL,KAAM,cAAeM,IAAKN,KAAKO,cAAcC,KAAKR,KAAM,gBAC9EI,OAAOC,eAAeL,KAAM,kBAAmBM,IAAK,WAAW,OAAON,KAAKO,cAAc,iBACzFH,OAAOC,eAAeL,KAAM,mBAAoBM,IAAK,WAAW,OAAON,KAAKO,cAAc,kBAE1FH,OAAOC,eAAeL,KAAM,qBAC3BM,IAAK,WACJ,IAAIG,EAAeC,aAAeA,aAAaC,QAAQlB,EAAMC,mBAAqB,GAClF,OAAOM,KAAKY,eAAeH,GAAgBA,EAAe,IAE3DI,IAAK,SAASJ,GACb,GAAIC,aACJ,CACCA,aAAaI,QAAQrB,EAAMC,kBAAmBe,OAIjDL,OAAOC,eAAeL,KAAM,iBAC3BM,IAAK,WACJ,IAAIS,EAAWL,aAAeA,aAAaC,QAAQlB,EAAME,eAAiB,GAC1E,OAAOK,KAAKgB,WAAWD,GAAYA,EAAW,IAE/CF,IAAK,SAASE,GACb,GAAIL,aACJ,CACCA,aAAaI,QAAQrB,EAAME,cAAeoB,OAI7CX,OAAOC,eAAeL,KAAM,kBAC3BM,IAAK,WACJ,IAAIW,EAAYP,aAAeA,aAAaC,QAAQlB,EAAMG,gBAAkB,GAC5E,OAAOI,KAAKkB,gBAAgBD,GAAaA,EAAY,IAEtDJ,IAAK,SAASI,GACb,GAAIP,aACJ,CACCA,aAAaI,QAAQrB,EAAMG,eAAgBqB,OAK9Cb,OAAOC,eAAeL,KAAK,2BAC1BM,IAAK,WACJ,OAAOI,aAAgBA,aAAaC,QAAQlB,EAAMI,2BAA6B,IAAO,MAEvFgB,IAAK,SAAShB,GACb,GAAIa,aACJ,CACCA,aAAaI,QAAQrB,EAAMI,wBAAyBA,EAA0B,IAAM,SAIvFO,OAAOC,eAAeL,KAAM,mBAC3BM,IAAK,WACJ,OAAOI,aAAgBA,aAAaC,QAAQlB,EAAMK,YAAc,IAAO,MAExEe,IAAK,SAASM,GACb,GAAIT,aACJ,CACCA,aAAaI,QAAQrB,EAAMK,SAAUqB,EAAkB,IAAM,UAMjEpB,EAAgBqB,WACfC,KAAM,WAEL,OAAO,IAAIC,QAAQ,SAASC,EAASC,GAEpC,GAAGxB,KAAKC,YACR,CACC,OAAOsB,IAGRvB,KAAKyB,kBAAkBC,KAAK1B,KAAK2B,iBAAiBnB,KAAKR,OAAO0B,KAAK,SAASE,GAE3E5B,KAAKE,mBAAqB0B,EAE1BC,UAAUC,aAAaC,iBAAiB,eAAgBC,GAAGC,SAASjC,KAAKkC,yBAAyB1B,KAAKR,MAAO,MAC9GA,KAAKC,YAAc,KACnBsB,KACCf,KAAKR,OAAOmC,MAAMX,IACnBhB,KAAKR,QAGRyB,gBAAiB,WAEhB,OAAO,IAAIH,QAAQ,SAASC,EAASC,GAEpCK,UAAUC,aAAaM,cAAcC,MAAO,OAAOX,KAAK,SAASY,GAEhEA,EAAOC,iBAAiBC,QAAQ,SAASC,GAExCA,EAAMC,SAEPnB,MACEY,MAAMX,MAIXG,iBAAkB,WAEjB,OAAO,IAAIL,QAAQ,SAASC,EAASC,GAEpC,IAAIK,UAAUC,eAAiBD,UAAUC,aAAaH,iBACtD,CACC,OAAOH,EAAO,aAEfK,UAAUC,aAAaH,mBAAmBD,KAAK,SAASiB,GAEvDpB,EAAQoB,IACPnC,KAAKR,QACNQ,KAAKR,QAGR4C,UAAW,WAEV,IAAI5C,KAAKC,YACT,CACC,MAAM,IAAI4C,MAAM,0CAGjB,OAAOzC,OAAO0C,KAAK9C,KAAKgB,YAAY+B,OAAS,GAG9CC,kBAAmB,WAElB,IAAIhD,KAAKC,YACT,CACC,MAAM,IAAI4C,MAAM,0CAEjB,OAAOzC,OAAO6C,OAAOjD,KAAKE,oBAAoBgD,OAAO,SAASC,GAC7D,OAAOA,EAAWC,MAAQ,gBAI5BC,cAAe,WAEd,IAAIrD,KAAKC,YACT,CACC,MAAM,IAAI4C,MAAM,0CAEjB,OAAOzC,OAAO6C,OAAOjD,KAAKE,oBAAoBgD,OAAO,SAASC,GAC7D,OAAOA,EAAWC,MAAQ,gBAI5BE,eAAgB,WAEf,IAAItD,KAAKC,YACT,CACC,MAAM,IAAI4C,MAAM,0CAEjB,OAAOzC,OAAO6C,OAAOjD,KAAKE,oBAAoBgD,OAAO,SAASC,GAC7D,OAAOA,EAAWC,MAAQ,iBAI5BG,iBAAkB,WAEjB,OAAOnD,OAAO0C,KAAK9C,KAAKkB,iBAAiB6B,OAAS,GAAK,cAAeS,iBAAiBpC,WAGxFqC,iBAAkB,SAASC,GAE1B,GAAG1D,KAAKG,SACR,CACC,OAEDH,KAAKG,SAAW,KAChB,IAAIwD,EAAiB3D,KAAKE,mBAC1B,IAAI0D,KAEJ/B,UAAUC,aAAaH,mBAAmBD,KAAK,SAASiB,GAEvDA,EAAQH,QAAQ,SAASW,GAExB,IAAIU,EAAQF,EAAeG,UAAU,SAASC,GAC7C,OAAOA,EAAIX,MAAQD,EAAWC,MAAQW,EAAIC,UAAYb,EAAWa,WAElE,GAAIH,IAAU,EACd,CAECF,EAAeM,OAAOJ,EAAO,OAG9B,CACCD,EAAaM,KAAKf,KAEjBnD,MAEHgC,GAAGmC,cAAcnE,KAAM,iCACtBoE,MAAOR,EACPS,QAASV,IAGV3D,KAAKE,mBAAqByC,EAC1B3C,KAAKG,SAAW,OACfK,KAAKR,QAGRkC,yBAA0B,SAASwB,GAElC,IAAK1D,KAAKC,YACV,CACC,OAGDD,KAAKyD,oBAGNlD,cAAe,SAAS+D,GAEvB,IAAIC,KACJ,IAAIvE,KAAKC,YACT,CACC,MAAM,IAAI4C,MAAM,0CAEjB,IAAK,IAAI2B,EAAI,EAAGA,EAAIxE,KAAKE,mBAAmB6C,OAAQyB,IACpD,CACC,GAAGxE,KAAKE,mBAAmBsE,GAAGpB,MAAQkB,EACtC,CACCC,EAAOvE,KAAKE,mBAAmBsE,GAAGR,UAAYhE,KAAKE,mBAAmBsE,GAAGC,OAG3E,OAAOF,IAITvC,GAAG0C,KAAKC,SAAW,IAAI5E,GAtPvB","file":"hardware.map.js"}