{"version":3,"sources":["simple_vad.js"],"names":["BX","SimpleVAD","VOLUME_THRESHOLD","INACTIVITY_TIME","config","mediaStream","MediaStream","Error","getAudioTracks","length","this","addTrack","clone","audioContext","mediaStreamNode","analyserNode","audioTimeDomainData","voiceState","measureInterval","inactivityTimeout","callbacks","voiceStarted","type","isFunction","onVoiceStarted","DoNothing","voiceStopped","onVoiceStopped","isSupported","init","window","AudioContext","webkitAudioContext","AnalyserNode","prototype","createAnalyser","fftSize","createMediaStreamSource","connect","Float32Array","setInterval","analyzeAudioStream","bind","getFloatTimeDomainData","volume","getAverageVolume","setVoiceState","clearTimeout","setTimeout","onInactivityTimeout","sum","i","Math","sqrt","destroy","disconnect","close","getTracks","forEach","track","stop","clearInterval"],"mappings":"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","file":"simple_vad.map.js"}