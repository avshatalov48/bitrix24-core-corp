(function(){BX.namespace("BX.Call");if(BX.Call.CallHint){return}BX.Call.CallHint=function(t){this.popup=null;this.title=BX.prop.getString(t,"title",BX.util.htmlspecialchars(BX.message("IM_CALL_MIC_MUTED_WHILE_TALKING")));this.icon=BX.prop.getString(t,"icon","mic");this.bindElement=BX.prop.getElementNode(t,"bindElement",null);this.targetContainer=BX.prop.getElementNode(t,"targetContainer",null);this.callFolded=BX.prop.getBoolean(t,"callFolded",false);this.autoCloseDelay=BX.prop.getInteger(t,"autoCloseDelay",5e3);this.buttonsLayout=BX.prop.getString(t,"buttonsLayout","right");this.buttons=BX.prop.getArray(t,"buttons",[]);this.callbacks={onClose:BX.prop.getFunction(t,"onClose",BX.DoNothing)};this.autoCloseTimeout=0};BX.Call.CallHint.prototype={show:function(){clearTimeout(this.autoCloseTimeout);if(this.autoCloseDelay>0){this.autoCloseTimeout=setTimeout(this.onAutoClose.bind(this),this.autoCloseDelay)}if(this.popup){this.popup.show();return}this.popup=new BX.PopupWindow({bindElement:this.bindElement,targetContainer:this.targetContainer,content:this.render(),padding:0,contentPadding:14,className:"bx-call-view-popup-call-hint",contentBackground:"unset",maxWidth:600,angle:this.bindElement?{position:"bottom",offset:20}:null,events:{onClose:function(){this.popup.destroy()}.bind(this),onDestroy:function(){this.popup=null}.bind(this)}});this.popup.show()},render:function(){return BX.create("div",{props:{className:"bx-call-view-popup-call-hint-body layout-"+this.buttonsLayout},children:[BX.create("div",{props:{className:"bx-call-view-popup-call-hint-icon "+this.icon}}),BX.create("div",{props:{className:"bx-call-view-popup-call-hint-middle-block"},children:[BX.create("div",{props:{className:"bx-call-view-popup-call-hint-text"},html:this.getPopupMessage()}),this.buttonsLayout=="bottom"?this.renderButtons():null]}),this.buttonsLayout=="right"?this.renderButtons():null,BX.create("div",{props:{className:"bx-call-view-popup-call-hint-close"},events:{click:function(){this.callbacks.onClose();if(this.popup){this.popup.close()}}.bind(this)}})]})},renderButtons:function(){return BX.create("div",{props:{className:"bx-call-view-popup-call-hint-buttons-container"},children:this.buttons.map((t=>t.render()))})},getPopupMessage:function(){if(!BX.Call.Util.isDesktop()){return this.title}var t=BX.message("IM_CALL_MIC_MUTED_WHILE_TALKING_HOTKEY");if(this.callFolded){var e=BX.browser.IsMac()?"Shift + &#8984; + A":"Ctrl + Shift + A";t=BX.message("IM_CALL_MIC_MUTED_WHILE_TALKING_FOLDED_CALL_HOTKEY").replace("#HOTKEY#",e)}t='<span class="bx-call-view-popup-call-hint-text-hotkey">'+t+"</span>";return this.title+"<br>"+t},getPopupHeight:function(){return BX.Call.Util.isDesktop()?60:54},close:function(){if(this.popup){this.popup.close();this.callbacks.onClose()}},onAutoClose:function(){this.close()},destroy:function(){if(this.popup){this.popup.destroy()}clearTimeout(this.autoCloseTimeout)}}})();
//# sourceMappingURL=call_hint_popup.map.js