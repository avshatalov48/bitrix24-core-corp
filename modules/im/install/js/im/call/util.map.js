{"version":3,"sources":["util.js"],"names":["BX","namespace","Call","Util","blankAvatar","userData","usersInProcess","updateUserData","callId","users","usersToUpdate","self","this","i","length","hasOwnProperty","push","result","Promise","resolve","reject","CallEngine","getRestClient","callMethod","userIds","then","response","type","isPlainObject","answer","forEach","userId","catch","error","setUserData","getDateForLog","d","Date","getFullYear","lpad","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTimeForLog","str","chr","toString","getUser","getUsers","getUserName","name","getUserAvatar","avatar_hr","isBlank","getUserAvatars","isAvatarBlank","url","getCustomMessage","message","messageText","gender","convertKeysToUpper","replace","match","placeHolder","substr","obj","util","objectClone","k","u","toUpperCase","appendChildren","parent","children","child","appendChild","containsVideoTrack","stream","MediaStream","getVideoTracks","hasHdVideo","videoTrack","trackSettings","getSettings","width","findBestElementSize","height","userCount","minWidth","minHeight","bestFilledArea","area","getFilledArea","elementWidth","elementHeight","bestWidth","bestHeight","rowCount","columnCount","Math","ceil","maxElementWidth","floor","maxElementHeight","ratio","neededRatio","expectedElementHeight","expectedElementWidth","isWebRTCSupported","webkitRTCPeerConnection","mozRTCPeerConnection","RTCPeerConnection","isCallServerAllowed","getUserLimit","parseInt","getLogMessage","text","arguments","Error","stack","JSON","stringify","e","getUuidv4","c","r","random","v","alterSDP","sdp","options","sdpLines","split","codecRtpMaps","videoLineIndex","line","exec","rtpmap","codec","sortVideoLine","join","sendTelemetryEvent","document","location","protocol","req","XMLHttpRequest","open","setRequestHeader","withCredentials","op","host","query","buildQueryString","send","isDesktop","getBrowserForStatistics","browser","IsOpera","IsChrome","IsFirefox","IsSafari","videoLine","rtpMaps","parsedVideoLine","codecsSlice","slice","rtpMapToCodec","rtpMap","sort","a","b","trim","codecA","codecB","concat","endsWith","stopMediaStream","mediaStream","getTracks","track","stop"],"mappings":"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","file":"util.map.js"}