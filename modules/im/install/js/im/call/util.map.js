{"version":3,"sources":["util.js"],"names":["BX","namespace","Call","Util","blankAvatar","userData","usersInProcess","updateUserData","callId","users","usersToUpdate","self","this","i","length","hasOwnProperty","push","result","Promise","resolve","reject","CallEngine","getRestClient","callMethod","userIds","then","response","type","isPlainObject","answer","forEach","userId","catch","error","setUserData","getDateForLog","d","Date","getFullYear","lpad","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTimeForLog","str","chr","toString","getUser","getUsers","getUserName","name","getUserAvatar","avatar_hr","isBlank","getUserAvatars","isAvatarBlank","url","getCustomMessage","message","messageText","gender","convertKeysToUpper","replace","match","placeHolder","substr","obj","util","objectClone","k","u","toUpperCase","appendChildren","parent","children","child","appendChild","containsVideoTrack","stream","MediaStream","getVideoTracks","hasHdVideo","videoTrack","trackSettings","getSettings","width","findBestElementSize","height","userCount","minWidth","minHeight","bestFilledArea","area","getFilledArea","elementWidth","elementHeight","bestWidth","bestHeight","rowCount","columnCount","Math","ceil","maxElementWidth","floor","maxElementHeight","ratio","neededRatio","expectedElementHeight","expectedElementWidth","isWebRTCSupported","webkitRTCPeerConnection","mozRTCPeerConnection","RTCPeerConnection","isCallServerAllowed","isFeedbackAllowed","shouldCollectStats","shouldShowDocumentButton","getDocumentsArticleCode","startsWith","getResumesArticleCode","getUserLimit","parseInt","getLogMessage","text","arguments","Error","stack","JSON","stringify","e","getUuidv4","c","r","random","v","alterSDP","sdp","options","sdpLines","split","codecRtpMaps","videoLineIndex","line","exec","rtpmap","codec","sortVideoLine","join","reportConnectionResult","connectionResult","ajax","runAction","data","sendTelemetryEvent","document","location","protocol","req","XMLHttpRequest","open","setRequestHeader","withCredentials","op","host","query","buildQueryString","send","isDesktop","getBrowserForStatistics","browser","IsOpera","IsChrome","IsFirefox","IsSafari","videoLine","rtpMaps","parsedVideoLine","codecsSlice","slice","rtpMapToCodec","rtpMap","sort","a","b","trim","codecA","codecB","concat","endsWith","stopMediaStream","mediaStream","getTracks","track","stop"],"mappings":"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","file":"util.map.js"}