{"version":3,"sources":["util.js"],"names":["BX","namespace","Call","Util","blankAvatar","userData","usersInProcess","updateUserData","callId","users","usersToUpdate","self","this","i","length","hasOwnProperty","push","result","Promise","resolve","reject","CallEngine","getRestClient","callMethod","userIds","then","response","type","isPlainObject","answer","forEach","userId","catch","error","setUserData","getDateForLog","d","Date","getFullYear","lpad","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTimeForLog","str","chr","toString","getUser","getUsers","getUserName","name","getUserAvatar","avatar_hr","isBlank","getUserAvatars","isAvatarBlank","url","getCustomMessage","message","messageText","gender","convertKeysToUpper","replace","match","placeHolder","substr","obj","util","objectClone","k","u","toUpperCase","appendChildren","parent","children","child","appendChild","containsVideoTrack","stream","MediaStream","getVideoTracks","hasHdVideo","videoTrack","trackSettings","getSettings","width","findBestElementSize","height","userCount","minWidth","minHeight","bestFilledArea","area","getFilledArea","elementWidth","elementHeight","bestWidth","bestHeight","rowCount","columnCount","Math","ceil","maxElementWidth","floor","maxElementHeight","ratio","neededRatio","expectedElementHeight","expectedElementWidth","isWebRTCSupported","webkitRTCPeerConnection","mozRTCPeerConnection","RTCPeerConnection","isCallServerAllowed","shouldCollectStats","shouldShowDocumentButton","getDocumentsArticleCode","startsWith","getResumesArticleCode","getUserLimit","parseInt","getLogMessage","text","arguments","Error","stack","JSON","stringify","e","getUuidv4","c","r","random","v","alterSDP","sdp","options","sdpLines","split","codecRtpMaps","videoLineIndex","line","exec","rtpmap","codec","sortVideoLine","join","sendTelemetryEvent","document","location","protocol","req","XMLHttpRequest","open","setRequestHeader","withCredentials","op","host","query","buildQueryString","send","isDesktop","getBrowserForStatistics","browser","IsOpera","IsChrome","IsFirefox","IsSafari","videoLine","rtpMaps","parsedVideoLine","codecsSlice","slice","rtpMapToCodec","rtpMap","sort","a","b","trim","codecA","codecB","concat","endsWith","stopMediaStream","mediaStream","getTracks","track","stop"],"mappings":"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","file":"util.map.js"}