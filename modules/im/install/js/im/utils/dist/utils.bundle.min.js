this.BX=this.BX||{};(function(e,t){"use strict";var r={browser:{isSafari:function e(){if(!navigator.userAgent.toLowerCase().includes("safari")){return false}return!this.isSafariBased()},isSafariBased:function e(){if(!navigator.userAgent.toLowerCase().includes("applewebkit")){return false}return navigator.userAgent.toLowerCase().includes("yabrowser")||navigator.userAgent.toLowerCase().includes("yaapp_ios_browser")||navigator.userAgent.toLowerCase().includes("crios")},isChrome:function e(){return navigator.userAgent.toLowerCase().includes("chrome")},isFirefox:function e(){return navigator.userAgent.toLowerCase().includes("firefox")},isIe:function e(){return navigator.userAgent.match(/(Trident\/|MSIE\/)/)!==null}},platform:{isMac:function e(){return navigator.userAgent.toLowerCase().includes("macintosh")},isLinux:function e(){return navigator.userAgent.toLowerCase().includes("linux")},isWindows:function e(){return navigator.userAgent.toLowerCase().includes("windows")||!this.isMac()&&!this.isLinux()},isBitrixMobile:function e(){return navigator.userAgent&&navigator.userAgent.toLowerCase().includes("bitrixmobile")},isBitrixDesktop:function e(){return navigator.userAgent.toLowerCase().includes("bitrixdesktop")},isMobile:function e(){return this.isAndroid()||this.isIos()||this.isBitrixMobile()},isIos:function e(){return navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")},getIosVersion:function e(){if(!this.isIos()){return null}var t=navigator.userAgent.toLowerCase().match(/(iphone|ipad)(.+)(OS\s([0-9]+))/i);if(!t||!t[4]){return null}return t[4]},isAndroid:function e(){return navigator.userAgent.toLowerCase().includes("android")}},device:{isDesktop:function e(){return!this.isMobile()},isMobile:function e(){if(typeof this.isMobileStatic!=="undefined"){return this.isMobileStatic}this.isMobileStatic=navigator.userAgent.toLowerCase().includes("android")||navigator.userAgent.toLowerCase().includes("webos")||navigator.userAgent.toLowerCase().includes("iphone")||navigator.userAgent.toLowerCase().includes("ipad")||navigator.userAgent.toLowerCase().includes("ipod")||navigator.userAgent.toLowerCase().includes("blackberry")||navigator.userAgent.toLowerCase().includes("windows phone");return this.isMobileStatic},orientationHorizontal:"horizontal",orientationPortrait:"portrait",getOrientation:function e(){if(!this.isMobile()){return this.orientationHorizontal}return Math.abs(window.orientation)===0?this.orientationPortrait:this.orientationHorizontal}},types:{isString:function e(t){return t===""?true:t?typeof t=="string"||t instanceof String:false},isArray:function e(t){return t&&Object.prototype.toString.call(t)=="[object Array]"},isFunction:function e(t){return t===null?false:typeof t=="function"||t instanceof Function},isDomNode:function e(t){return t&&babelHelpers.typeof(t)=="object"&&"nodeType"in t},isDate:function e(t){return t&&Object.prototype.toString.call(t)=="[object Date]"},isPlainObject:function e(t){if(!t||babelHelpers.typeof(t)!=="object"||t.nodeType){return false}var r=Object.prototype.hasOwnProperty;try{if(t.constructor&&!r.call(t,"constructor")&&!r.call(t.constructor.prototype,"isPrototypeOf")){return false}}catch(e){return false}var i;return typeof i==="undefined"||r.call(t,i)}},isDarkColor:function e(t){if(!t||!t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/)){return false}if(t.length===4){t=t.replace(/#([A-Fa-f0-9])/gi,"$1$1")}else{t=t.replace(/#([A-Fa-f0-9])/gi,"$1")}t=t.toLowerCase();var r=["#17a3ea","#00aeef","#00c4fb","#47d1e2","#75d900","#ffab00","#ff5752","#468ee5","#1eae43"];if(r.includes("#"+t)){return true}var i=parseInt(t,16);var n=i>>16&255;var o=i>>8&255;var a=i&255;var s=(n*299+o*587+a*114)/1e3;return s<128},getDateFormatType:function e(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:t.DateFormat.default;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!i){i=BX.message}var n=[];if(r===t.DateFormat.groupTitle){n=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",BX.Main.Date.convertBitrixFormat(i["IM_UTILS_FORMAT_DATE"])]]}else if(r===t.DateFormat.message){n=[["",i["IM_UTILS_FORMAT_TIME"]]]}else if(r===t.DateFormat.recentTitle){n=[["tommorow","today"],["today","today"],["yesterday","yesterday"],["",BX.Main.Date.convertBitrixFormat(i["IM_UTILS_FORMAT_DATE_RECENT"])]]}else if(r===t.DateFormat.recentLinesTitle){n=[["tommorow","tommorow"],["today","today"],["yesterday","yesterday"],["",BX.Main.Date.convertBitrixFormat(i["IM_UTILS_FORMAT_DATE_RECENT"])]]}else{n=[["tommorow","tommorow, "+i["IM_UTILS_FORMAT_TIME"]],["today","today, "+i["IM_UTILS_FORMAT_TIME"]],["yesterday","yesterday, "+i["IM_UTILS_FORMAT_TIME"]],["",BX.Main.Date.convertBitrixFormat(i["FORMAT_DATETIME"])]]}return n},hashCode:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var r=0;if(babelHelpers.typeof(t)==="object"&&t){t=JSON.stringify(t)}else if(typeof t!=="string"){t=t.toString()}if(typeof t!=="string"){return r}for(var i=0;i<t.length;i++){var n=t.charCodeAt(i);r=(r<<5)-r+n;r=r&r}return r},versionCompare:function e(t,r){var i=/^([\d+\.]+)$/;if(!i.test(t)||!i.test(r)){return NaN}t=t.toString().split(".");r=r.toString().split(".");if(t.length<r.length){while(t.length<r.length){t.push(0)}}else if(r.length<t.length){while(r.length<t.length){r.push(0)}}for(var n=0;n<t.length;n++){if(t[n]>r[n]){return 1}else if(t[n]<r[n]){return-1}}return 0},throttle:function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var n=null;var o=null;var a=function e(){t.apply(i,o);n=null};return function(){if(!n){o=arguments;n=setTimeout(a,r)}}},debounce:function e(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:this;var n=null;var o=null;var a=function e(){t.apply(i,o)};return function(){o=arguments;clearTimeout(n);n=setTimeout(a,r)}},htmlspecialchars:function e(t){if(typeof t!=="string"){return t}return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlspecialcharsback:function e(t){if(typeof t!=="string"){return t}return t.replace(/\&quot;/g,'"').replace(/&#39;/g,"'").replace(/\&lt;/g,"<").replace(/\&gt;/g,">").replace(/\&amp;/g,"&").replace(/\&nbsp;/g," ")},getLogTrackingParams:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=[];var i=t.name,n=i===void 0?"tracking":i,o=t.data,a=o===void 0?[]:o,s=t.dialog,u=s===void 0?null:s,l=t.message,c=l===void 0?null:l,f=t.files,g=f===void 0?null:f;n=encodeURIComponent(n);if(a&&!(a instanceof Array)&&babelHelpers.typeof(a)==="object"){var p=[];for(var d in a){if(a.hasOwnProperty(d)){p.push(encodeURIComponent(d)+"="+encodeURIComponent(a[d]))}}a=p}else if(!a instanceof Array){a=[]}if(u){r.push("timType="+u.type);if(u.type==="lines"){r.push("timLinesType="+u.entityId.split("|")[0])}}if(g){var h="file";if(g instanceof Array&&g[0]){h=g[0].type}else{h=g.type}r.push("timMessageType="+h)}else if(c){r.push("timMessageType=text")}if(this.platform.isBitrixMobile()){r.push("timDevice=bitrixMobile")}else if(this.platform.isBitrixDesktop()){r.push("timDevice=bitrixDesktop")}else if(this.platform.isIos()||this.platform.isAndroid()){r.push("timDevice=mobile")}else{r.push("timDevice=web")}return n+(a.length?"&"+a.join("&"):"")+(r.length?"&"+r.join("&"):"")}};e.Utils=r})(this.BX.Messenger=this.BX.Messenger||{},BX.Messenger.Const);
//# sourceMappingURL=utils.bundle.map.js