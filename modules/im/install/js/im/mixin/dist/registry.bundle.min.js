this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,i,s,n,a,r,o,d,l){"use strict";var u={data:function e(){return{dialogState:o.DialogState.loading}},created:function e(){this.timer=new s.Timer},methods:{getController:function e(){return this.$Bitrix.Data.get("controller")},getApplicationController:function e(){return this.getController().application},getApplication:function e(){return this.$Bitrix.Application.get()},getRestClient:function e(){return this.$Bitrix.RestClient.get()},getCurrentUser:function e(){return this.$store.getters["users/get"](this.application.common.userId,true)},executeRestAnswer:function e(t,i,s){this.getController().executeRestAnswer(t,i,s)},isUnreadMessagesLoaded:function e(){if(!this.dialog){return true}if(this.dialog.lastMessageId<=0){return true}if(!this.messageCollection||this.messageCollection.length<=0){return true}var t=0;for(var i=this.messageCollection.length-1;i>=0;i--){var s=this.messageCollection[i];if(typeof s.id==="number"){t=s.id;break}}return t>=this.dialog.lastMessageId},openDialog:function e(){}},computed:babelHelpers.objectSpread({dialog:function e(){var e=this.$store.getters["dialogues/get"](this.application.dialog.dialogId);return e?e:this.$store.getters["dialogues/getBlank"]()},chatId:function e(){if(this.application){return this.application.dialog.chatId}},diskFolderId:function e(){return this.application.dialog.diskFolderId},messageCollection:function e(){return this.$store.getters["messages/get"](this.application.dialog.chatId)},isDialogShowingMessages:function e(){var t=this.messageCollection&&this.messageCollection.length>0;if(t){this.dialogState=o.DialogState.show}else if(this.dialog&&this.dialog.init){this.dialogState=o.DialogState.empty}else{this.dialogState=o.DialogState.loading}return t},isDarkBackground:function e(){return this.application.options.darkBackground}},t.Vuex.mapState({application:function e(t){return t.application}}),{localize:function e(){return i.BitrixVue.getFilteredPhrases(["IM_DIALOG_","IM_UTILS_","IM_MESSENGER_DIALOG_","IM_QUOTE_"],this)}})};function c(e,t){var i;if(typeof Symbol==="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(i=g(e))||t&&e&&typeof e.length==="number"){if(i)e=i;var s=0;var n=function e(){};return{s:n,n:function t(){if(s>=e.length)return{done:true};return{done:false,value:e[s++]}},e:function e(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a=true,r=false,o;return{s:function t(){i=e[Symbol.iterator]()},n:function e(){var t=i.next();a=t.done;return t},e:function e(t){r=true;o=t},f:function e(){try{if(!a&&i.return!=null)i.return()}finally{if(r)throw o}}}}function g(e,t){if(!e)return;if(typeof e==="string")return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor)i=e.constructor.name;if(i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}function h(e,t){if(t==null||t>e.length)t=e.length;for(var i=0,s=new Array(t);i<t;i++){s[i]=e[i]}return s}var f={data:function e(){return{lastMessageToRead:null,messagesToRead:[]}},created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.readMessage,this.onReadMessage)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.readMessage,this.onReadMessage)},methods:{onReadMessage:function e(t){var i=t.data;this.readMessage(i.id).then(function(){return l.Logger.log("Read message complete")}).catch(function(){return l.Logger.error("Read message failed")})},readMessage:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(i){this.messagesToRead.push(parseInt(i))}this.timer.stop("readMessage",this.chatId,true);this.timer.stop("readMessageServer",this.chatId,true);if(s){return this.readMessageRequest(n)}return new Promise(function(e,i){t.timer.start("readMessage",t.chatId,.1,function(){t.readMessageRequest(n).then(function(t){return e(t)}).catch(i)})})},readMessageRequest:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;return new Promise(function(e,s){var n=c(t.messagesToRead),a;try{for(n.s();!(a=n.n()).done;){var r=a.value;if(!t.lastMessageToRead){t.lastMessageToRead=r}else if(t.lastMessageToRead<r){t.lastMessageToRead=r}}}catch(e){n.e(e)}finally{n.f()}t.messagesToRead=[];var d=t.lastMessageToRead||0;if(d<=0){return e({lastId:0})}t.$store.dispatch("messages/readMessages",{chatId:t.chatId,readId:d}).then(function(e){return t.$store.dispatch("dialogues/decreaseCounter",{dialogId:t.dialogId,count:e.count})}).then(function(){if(i){return e({lastId:d})}t.timer.start("readMessageServer",t.chatId,.5,function(){t.getRestClient().callMethod(o.RestMethod.imDialogRead,{DIALOG_ID:t.dialogId,MESSAGE_ID:d}).then(function(){return e({lastId:d})}).catch(s)})}).catch(s)})}}};var p={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.quoteMessage,this.onQuoteMessage);r.EventEmitter.subscribe(o.EventType.dialog.quotePanelClose,this.onQuotePanelClose)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.quoteMessage,this.onQuoteMessage);r.EventEmitter.unsubscribe(o.EventType.dialog.quotePanelClose,this.onQuotePanelClose)},methods:{onQuoteMessage:function e(t){var i=t.data;this.quoteMessage({id:i.message.id})},onQuotePanelClose:function e(){this.quoteMessageClear()},quoteMessage:function e(t){var i=t.id;this.$store.dispatch("dialogues/update",{dialogId:this.dialogId,fields:{quoteId:i}})},quoteMessageClear:function e(){this.$store.dispatch("dialogues/update",{dialogId:this.dialogId,fields:{quoteId:0}})}}};var m={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnCommand,this.onClickOnCommand)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnCommand,this.onClickOnCommand)},methods:{onClickOnCommand:function e(t){var i=t.data;if(i.type==="put"){this.insertText({text:i.value+" "})}else if(i.type==="send"){this.addMessageOnClient(i.value)}else{l.Logger.warn("Unprocessed command",i)}}}};var v={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnMention,this.onClickOnMention)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMention,this.onClickOnMention)},methods:{onClickOnMention:function e(t){var i=t.data;if(i.type==="USER"){this.openProfile(i.value)}else if(i.type==="CHAT"){this.openDialog(i.value)}else if(i.type==="CALL"){this.openPhoneMenu(i.value)}},openProfile:function e(){},openPhoneMenu:function e(){}}};var E={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnUserName,this.onClickOnUserName)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnUserName,this.onClickOnUserName)},methods:{onClickOnUserName:function e(t){var i=t.data;this.replyToUser(i.user.id,i.user)},replyToUser:function e(){}}};var M={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnMessageMenu,this.onClickOnMessageMenu)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMessageMenu,this.onClickOnMessageMenu)},methods:{onClickOnMessageMenu:function e(t){var i=t.data;this.openMessageMenu(i.message)},openMessageMenu:function e(){}}};var b={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnMessageRetry,this.onClickOnMessageRetry)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnMessageRetry,this.onClickOnMessageRetry)},methods:{onClickOnMessageRetry:function e(t){var i=t.data;this.retrySendMessage(i.message)},retrySendMessage:function e(){}}};var C={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnUploadCancel,this.onClickOnUploadCancel)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnUploadCancel,this.onClickOnUploadCancel)},methods:{onClickOnUploadCancel:function e(t){var i=t.data;this.cancelUploadFile(i.file.id)},cancelUploadFile:function e(){}}};var I={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnReadList,this.onClickOnReadList)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnReadList,this.onClickOnReadList)},methods:{onClickOnReadList:function e(t){var i=t.data;this.openReadList(i.list)},openReadList:function e(){}}};var T={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.setMessageReaction,this.onSetMessageReaction)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.setMessageReaction,this.onSetMessageReaction)},methods:{onSetMessageReaction:function e(t){var i=t.data;this.reactMessage(i.message.id,i.reaction)},reactMessage:function e(t){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"auto";this.getRestClient().callMethod(o.RestMethod.imMessageLike,{MESSAGE_ID:t,ACTION:i==="auto"?"auto":i==="set"?"plus":"minus"})}}};var y={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.openMessageReactionList,this.onOpenMessageReactionList)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.openMessageReactionList,this.onOpenMessageReactionList)},methods:{onOpenMessageReactionList:function e(t){var i=t.data;this.openMessageReactionList(i.message.id,i.values)},openMessageReactionList:function e(){}}};var D={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnKeyboardButton,this.onClickOnKeyboardButton)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnKeyboardButton,this.onClickOnKeyboardButton)},methods:{onClickOnKeyboardButton:function e(t){var i=this;var s=t.data;if(s.action==="ACTION"){var a=s.params,d=a.dialogId,l=a.messageId,u=a.botId,c=a.action,g=a.value;if(c==="SEND"){this.addMessageOnClient(g);setTimeout(function(){r.EventEmitter.emit(o.EventType.dialog.scrollToBottom,{chatId:i.chatId,duration:300,cancelIfScrollChange:false})},300)}else if(c==="PUT"){this.insertText({text:g+" "})}else if(c==="CALL");else if(c==="COPY"){n.Clipboard.copy(g);BX.UI.Notification.Center.notify({content:this.localize["IM_DIALOG_CLIPBOARD_COPY_SUCCESS"],autoHideDelay:4e3})}return true}if(s.action==="COMMAND"){var h=s.params,f=h.dialogId,p=h.messageId,m=h.botId,v=h.command,E=h.params;this.getRestClient().callMethod(o.RestMethod.imMessageCommand,{MESSAGE_ID:p,DIALOG_ID:f,BOT_ID:m,COMMAND:v,COMMAND_PARAMS:E});return true}return false}}};var k={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnChatTeaser,this.onClickOnChatTeaser)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnChatTeaser,this.onClickOnChatTeaser)},methods:{onClickOnChatTeaser:function e(t){var i=this;var s=t.data;this.joinParentChat(s.message.id,"chat"+s.message.params.CHAT_ID).then(function(e){i.openDialog(e)}).catch(function(){});return true},joinParentChat:function e(t,i){var s=this;return new Promise(function(e,n){if(!t||!i){return n()}if(typeof s.tempJoinChat==="undefined"){s.tempJoinChat={}}else if(s.tempJoinChat["wait"]){return n()}s.tempJoinChat["wait"]=true;s.getRestClient().callMethod(o.RestMethod.imChatParentJoin,{DIALOG_ID:i,MESSAGE_ID:t}).then(function(){s.tempJoinChat["wait"]=false;s.tempJoinChat[i]=true;return e(i)}).catch(function(){s.tempJoinChat["wait"]=false;return n()})})}}};var O={created:function e(){r.EventEmitter.subscribe(o.EventType.dialog.clickOnDialog,this.onClickOnDialog)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.dialog.clickOnDialog,this.onClickOnDialog)},methods:{onClickOnDialog:function e(t){var i=t.data;return true}}};var S={data:function e(){return{messagesToSend:[]}},created:function e(){r.EventEmitter.subscribe(o.EventType.textarea.sendMessage,this.onSendMessage);r.EventEmitter.subscribe(o.EventType.textarea.startWriting,this.onTextareaStartWriting);r.EventEmitter.subscribe(o.EventType.textarea.appButtonClick,this.onTextareaAppButtonClick);r.EventEmitter.subscribe(o.EventType.textarea.focus,this.onTextareaFocus);r.EventEmitter.subscribe(o.EventType.textarea.blur,this.onTextareaBlur);r.EventEmitter.subscribe(o.EventType.textarea.keyUp,this.onTextareaKeyUp);r.EventEmitter.subscribe(o.EventType.textarea.edit,this.onTextareaEdit)},beforeDestroy:function e(){r.EventEmitter.unsubscribe(o.EventType.textarea.sendMessage,this.onSendMessage);r.EventEmitter.unsubscribe(o.EventType.textarea.startWriting,this.onTextareaStartWriting);r.EventEmitter.unsubscribe(o.EventType.textarea.appButtonClick,this.onTextareaAppButtonClick);r.EventEmitter.unsubscribe(o.EventType.textarea.focus,this.onTextareaFocus);r.EventEmitter.unsubscribe(o.EventType.textarea.blur,this.onTextareaBlur);r.EventEmitter.unsubscribe(o.EventType.textarea.keyUp,this.onTextareaKeyUp);r.EventEmitter.unsubscribe(o.EventType.textarea.edit,this.onTextareaEdit)},methods:{onSendMessage:function e(t){var i=t.data;if(!i.text){return false}this.addMessageOnClient(i.text)},onTextareaStartWriting:function e(t){var i=t.data;this.startWriting()},onTextareaAppButtonClick:function e(t){var i=t.data},onTextareaFocus:function e(t){var i=t.data},onTextareaBlur:function e(t){var i=t.data},onTextareaKeyUp:function e(t){var i=t.data},onTextareaEdit:function e(t){var i=t.data},addMessageOnClient:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";var s=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(!i&&!s){return false}var n=this.$store.getters["dialogues/getQuoteId"](this.dialogId);if(n){var d=this.$store.getters["messages/getMessage"](this.chatId,n);if(d){var l=null;if(d.authorId){l=this.$store.getters["users/get"](d.authorId)}var u=this.$store.getters["files/getList"](this.chatId);var c=[];c.push("-".repeat(54));c.push((l&&l.name?l.name:this.localize["IM_QUOTE_PANEL_DEFAULT_TITLE"])+" ["+a.Utils.date.format(d.date,null,this.localize)+"]");c.push(a.Utils.text.quote(d.text,d.params,u,this.localize));c.push("-".repeat(54));c.push(i);i=c.join("\n");this.quoteMessageClear()}}if(!this.isUnreadMessagesLoaded()){this.addMessageOnServer({id:0,chatId:this.chatId,dialogId:this.dialogId,text:i,file:s});this.processMessagesToSendQueue();return true}var g={};if(s){g.FILE_ID=[s.id]}this.$store.dispatch("messages/add",{chatId:this.chatId,authorId:this.userId,text:i,params:g,sending:!s}).then(function(e){r.EventEmitter.emit(o.EventType.dialog.scrollToBottom,{chatId:t.chatId,cancelIfScrollChange:true});t.messagesToSend.push({id:e,chatId:t.chatId,dialogId:t.dialogId,text:i,file:s,sending:false});t.processMessagesToSendQueue()});return true},processMessagesToSendQueue:function e(){var t=this;if(!this.diskFolderId){this.requestDiskFolderId().then(function(){t.processMessagesToSendQueue()}).catch(function(e){l.Logger.warn("processMessagesToSendQueue error",e);return false});return false}this.messagesToSend.filter(function(e){return!e.sending}).forEach(function(e){e.sending=true;if(e.file){t.addMessageWithFile(e)}else{t.addMessageOnServer(e)}});return true},addMessageOnServer:function e(t){var i=this;this.stopWriting();var s=this.$store.getters["dialogues/getQuoteId"](this.dialogId);if(s){var n=this.$store.getters["messages/getMessage"](this.chatId,s);if(n){var a=this.$store.getters["users/get"](n.authorId);var r=[];r.push("------------------------------------------------------");r.push(a.name?a.name:this.localize["IM_QUOTE_PANEL_DEFAULT_TITLE"]);r.push(n.text);r.push("------------------------------------------------------");r.push(t.text);t.text=r.join("\n");this.quoteMessageClear()}}this.getRestClient().callMethod(o.RestMethod.imMessageAdd,{TEMPLATE_ID:t.id,DIALOG_ID:t.dialogId,MESSAGE:t.text},null,null).then(function(e){i.$store.dispatch("messages/update",{id:t.id,chatId:t.chatId,fields:{id:e.data(),sending:false,error:false}}).then(function(){i.$store.dispatch("messages/actionFinish",{id:e.data(),chatId:t.chatId})})}).catch(function(e){l.Logger.warn("Error during adding message")});return true},stopWriting:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.dialogId;this.timer.stop("writes",t,true);this.timer.stop("writesSend",t,true)},startWriting:function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this.dialogId;if(a.Utils.dialog.isEmptyDialogId(i)||this.timer.has("writes",i)){return false}this.timer.start("writes",i,28);this.timer.start("writesSend",i,5,function(){t.getRestClient().callMethod(o.RestMethod.imDialogWriting,{DIALOG_ID:i}).catch(function(){t.timer.stop("writes",i)})})},insertText:function e(t){r.EventEmitter.emit(o.EventType.textarea.insertText,t)},requestDiskFolderId:function e(){var t=this;if(this.requestDiskFolderPromise){return this.requestDiskFolderPromise}this.requestDiskFolderPromise=new Promise(function(e,i){if(t.flagRequestDiskFolderIdSended||t.diskFolderId){t.flagRequestDiskFolderIdSended=false;e();return true}t.flagRequestDiskFolderIdSended=true;t.getRestClient().callMethod(o.RestMethod.imDiskFolderGet,{chat_id:t.chatId}).then(function(i){t.flagRequestDiskFolderIdSended=false;t.executeRestAnswer(o.RestMethodHandler.imDiskFolderGet,i);e()}).catch(function(e){t.flagRequestDiskFolderIdSended=false;t.executeRestAnswer(o.RestMethodHandler.imDiskFolderGet,e);i()})});return this.requestDiskFolderPromise}}};var R={created:function e(){r.EventEmitter.subscribe(o.EventType.textarea.fileSelected,this.onTextareaFileSelected)},beforeDestroy:function e(){if(this.uploader){this.uploader.unsubscribeAll()}r.EventEmitter.unsubscribe(o.EventType.textarea.fileSelected,this.onTextareaFileSelected)},computed:{dialogInited:function e(){if(!this.dialog){return false}return this.dialog.init}},watch:{dialogInited:function e(t){if(t===true){this.initUploader()}}},methods:{onTextareaFileSelected:function e(t){var i=t.data;var s=i&&i.fileChangeEvent&&i.fileChangeEvent.target.files.length>0?i.fileChangeEvent:"";if(!s){return false}this.uploadFile(s)},addMessageWithFile:function e(t){this.stopWriting();this.uploader.addTask({taskId:t.file.id,fileData:t.file.source.file,fileName:t.file.source.file.name,generateUniqueName:true,diskFolderId:this.diskFolderId,previewBlob:t.file.previewBlob})},uploadFile:function e(t){if(!t){return false}this.uploader.addFilesFromEvent(t)},initUploader:function e(){var t=this;this.uploader=new d.Uploader({generatePreview:true,sender:{actionUploadChunk:this.actionUploadChunk,actionCommitFile:this.actionCommitFile}});this.uploader.subscribe("onStartUpload",function(e){var i=e.getData();l.Logger.log("Uploader: onStartUpload",i);t.$store.dispatch("files/update",{chatId:t.chatId,id:i.id,fields:{status:o.FileStatus.upload,progress:0}})});this.uploader.subscribe("onProgress",function(e){var i=e.getData();l.Logger.log("Uploader: onProgress",i);t.$store.dispatch("files/update",{chatId:t.chatId,id:i.id,fields:{status:o.FileStatus.upload,progress:i.progress===100?99:i.progress}})});this.uploader.subscribe("onSelectFile",function(e){var i=e.getData();var s=i.file;l.Logger.log("Uploader: onSelectFile",i);var n="file";if(s.type.toString().startsWith("image")){n="image"}else if(s.type.toString().startsWith("video")){n="video"}t.$store.dispatch("files/add",{chatId:t.chatId,authorId:t.userId,name:s.name,type:n,extension:s.name.split(".").splice(-1)[0],size:s.size,image:!i.previewData?false:{width:i.previewDataWidth,height:i.previewDataHeight},status:o.FileStatus.wait,progress:0,authorName:t.getCurrentUser().name,urlPreview:i.previewData?URL.createObjectURL(i.previewData):""}).then(function(e){t.addMessageOnClient("",{id:e,source:i,previewBlob:i.previewData})})});this.uploader.subscribe("onComplete",function(e){var i=e.getData();l.Logger.log("Uploader: onComplete",i);t.$store.dispatch("files/update",{chatId:t.chatId,id:i.id,fields:{status:o.FileStatus.wait,progress:100}});var s=t.messagesToSend.find(function(e){if(e.file){return e.file.id===i.id}return false});var n=t.$store.getters["files/get"](t.chatId,s.file.id,true).type;t.fileCommit({chatId:t.chatId,uploadId:i.result.data.file.id,messageText:s.text,messageId:s.id,fileId:s.file.id,fileType:n},s)});this.uploader.subscribe("onUploadFileError",function(e){var i=e.getData();l.Logger.log("Uploader: onUploadFileError",i);var s=t.messagesToSend.find(function(e){if(e.file){return e.file.id===i.id}return false});t.fileError(t.chatId,s.file.id,s.id)});this.uploader.subscribe("onCreateFileError",function(e){var i=e.getData();l.Logger.log("Uploader: onCreateFileError",i);var s=t.messagesToSend.find(function(e){if(e.file){return e.file.id===i.id}return false});t.fileError(t.chatId,s.file.id,s.id)});return new Promise(function(e,t){return e()})},fileCommit:function e(t,i){var s=this;this.getRestClient().callMethod(o.RestMethod.imDiskFileCommit,{chat_id:t.chatId,upload_id:t.uploadId,message:t.messageText,template_id:t.messageId,file_template_id:t.fileId},null,null).then(function(e){s.executeRestAnswer(o.RestMethodHandler.imDiskFileCommit,e,i)}).catch(function(e){s.executeRestAnswer(o.RestMethodHandler.imDiskFileCommit,e,i)});return true},fileError:function e(t,i){var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;this.$store.dispatch("files/update",{chatId:t,id:i,fields:{status:o.FileStatus.error,progress:0}});if(s){this.$store.dispatch("messages/actionError",{chatId:t,id:s,retry:false})}}}};e.DialogCore=u;e.DialogReadMessages=f;e.DialogQuoteMessage=p;e.DialogClickOnCommand=m;e.DialogClickOnMention=v;e.DialogClickOnUserName=E;e.DialogClickOnMessageMenu=M;e.DialogClickOnMessageRetry=b;e.DialogClickOnUploadCancel=C;e.DialogClickOnReadList=I;e.DialogSetMessageReaction=T;e.DialogOpenMessageReactionList=y;e.DialogClickOnKeyboardButton=D;e.DialogClickOnChatTeaser=k;e.DialogClickOnDialog=O;e.TextareaCore=S;e.TextareaUploadFile=R})(this.BX.Messenger.Mixin=this.BX.Messenger.Mixin||{},BX,BX,BX.Messenger.Lib,BX.Messenger.Lib,BX.Messenger.Lib,BX.Event,BX.Messenger.Const,BX.Messenger.Lib,BX.Messenger.Lib);
//# sourceMappingURL=registry.bundle.map.js