this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.Integration=this.BX.Messenger.Integration||{};(function(e,t,r){"use strict";var l=function(e){babelHelpers.inherits(t,e);function t(e){var r;babelHelpers.classCallCheck(this,t);e=e||{};r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));r.chatId=e.imChatId;return r}babelHelpers.createClass(t,[{key:"setPropertiesByNode",value:function e(r){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"setPropertiesByNode",this).call(this,r);this.chatId=r.dataset.imChatId}},{key:"loadData",value:function e(){if(!r.Reflection.getClass("BXIM.callController.currentCall")){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}var l=BXIM.callController;var s=l.currentCall.associatedEntity.id;var a=this.getChatId(s);if(!a||a!=this.chatId){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}l.unfold();l.showDocumentEditor({viewerItem:this,force:true});return new BX.Promise}},{key:"getChatId",value:function e(t){return t.toString().startsWith("chat")?t.substr(4):BXIM.messenger.userChat[t]}}]);return t}(t.OnlyOfficeItem);var s=function(e){babelHelpers.inherits(t,e);function t(){babelHelpers.classCallCheck(this,t);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).apply(this,arguments))}babelHelpers.createClass(t,[{key:"loadData",value:function e(){if(!r.Reflection.getClass("BXIM.callController.currentCall")){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}var l=BX.MessengerCommon.diskGetMessageId(this.chatId,this.objectId);if(!l){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}var s=BX.MessengerCommon.getMessageParam(l,"CALL_ID");var a=BXIM.callController;if(!s){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}if(s!=a.currentCall.id){return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"loadData",this).call(this)}else{a.unfold();a.showDocumentEditor({type:BX.Call.Controller.DocumentType.Resume,force:true})}return new BX.Promise}}]);return t}(l);e.OnlyOfficeChatItem=l;e.OnlyOfficeResumeItem=s})(this.BX.Messenger.Integration.Viewer=this.BX.Messenger.Integration.Viewer||{},BX.Disk.Viewer,BX);
//# sourceMappingURL=im.integration.viewer.bundle.map.js