{"version":3,"file":"registry.bundle.js","sources":["../src/base.js","../src/call.js","../src/registry.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Im base pull commands (Pull Command Handler)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {PullClient} from \"pull.client\";\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {EventType} from \"im.const\";\nimport {Logger} from \"im.lib.logger\";\n\nexport class ImBasePullHandler\n{\n\tstatic create(params = {})\n\t{\n\t\treturn new this(params);\n\t}\n\n\tconstructor(params = {})\n\t{\n\t\tif (typeof params.controller === 'object' && params.controller)\n\t\t{\n\t\t\tthis.controller = params.controller;\n\t\t}\n\t\tif (typeof params.store === 'object' && params.store)\n\t\t{\n\t\t\tthis.store = params.store;\n\t\t}\n\n\t\tthis.option = typeof params.store === 'object' && params.store? params.store: {};\n\n\t\tif (\n\t\t\t!(\n\t\t\t\ttypeof this.option.handlingDialog === 'object'\n\t\t\t\t&& this.option.handlingDialog\n\t\t\t\t&& this.option.handlingDialog.chatId\n\t\t\t\t&& this.option.handlingDialog.dialogId\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tthis.option.handlingDialog = false;\n\t\t}\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'im';\n\t}\n\n\tgetSubscriptionType()\n\t{\n\t\treturn PullClient.SubscriptionType.Server;\n\t}\n\n\tskipExecute(params, extra = {})\n\t{\n\t\tif (!extra.optionImportant)\n\t\t{\n\t\t\tif (this.option.skip)\n\t\t\t{\n\t\t\t\tLogger.info('Pull: command skipped while loading messages', params);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!this.option.handlingDialog)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof params.chatId !== 'undefined' || typeof params.dialogId !== 'undefined' )\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof params.chatId !== 'undefined'\n\t\t\t\t&& parseInt(params.chatId) === parseInt(this.option.handlingDialog.chatId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof params.dialogId !== 'undefined'\n\t\t\t\t&& params.dialogId.toString() === this.option.handlingDialog.dialogId.toString()\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thandleMessage(params, extra)\n\t{\n\t\tthis.handleMessageAdd(params, extra);\n\t}\n\n\thandleMessageChat(params, extra)\n\t{\n\t\tthis.handleMessageAdd(params, extra);\n\t}\n\n\thandleMessageAdd(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet collection = this.store.state.messages.collection[params.chatId];\n\t\tif (!collection)\n\t\t{\n\t\t\tcollection = [];\n\t\t}\n\n\t\tlet message = collection.find(element => {\n\t\t\tif (params.message.templateId && element.id === params.message.templateId)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn element.id === params.message.id;\n\t\t});\n\n\t\tif (message && params.message.push)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (params.chat && params.chat[params.chatId])\n\t\t{\n\t\t\tthis.store.dispatch('dialogues/update', {\n\t\t\t\tdialogId: params.dialogId,\n\t\t\t\tfields: params.chat[params.chatId]\n\t\t\t});\n\t\t}\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tlines: params.lines || {id: 0},\n\t\t\t\tmessage: {\n\t\t\t\t\tid: params.message.id,\n\t\t\t\t\ttext: params.message.text,\n\t\t\t\t\tdate: params.message.date\n\t\t\t\t},\n\t\t\t\tcounter: params.counter\n\t\t\t}\n\t\t});\n\n\t\tif (params.users)\n\t\t{\n\t\t\tthis.store.dispatch('users/set', VuexBuilderModel.convertToArray(params.users));\n\t\t}\n\n\t\tif (params.files)\n\t\t{\n\t\t\tlet files = this.controller.application.prepareFilesBeforeSave(\n\t\t\t\tVuexBuilderModel.convertToArray(params.files)\n\t\t\t);\n\t\t\tfiles.forEach(file =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tfiles.length === 1\n\t\t\t\t\t&& params.message.templateFileId\n\t\t\t\t\t&& this.store.state.files.index[params.chatId]\n\t\t\t\t\t&& this.store.state.files.index[params.chatId][params.message.templateFileId]\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.store.dispatch('files/update', {\n\t\t\t\t\t\tid: params.message.templateFileId,\n\t\t\t\t\t\tchatId: params.chatId,\n\t\t\t\t\t\tfields: file\n\t\t\t\t\t}).then(() => {\n\t\t\t\t\t\tthis.controller.application.emit(EventType.dialog.scrollToBottom, {cancelIfScrollChange: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.store.dispatch('files/set', file);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (message)\n\t\t{\n\t\t\tthis.store.dispatch('messages/update', {\n\t\t\t\tid: message.id,\n\t\t\t\tchatId: message.chatId,\n\t\t\t\tfields: {\n\t\t\t\t\tpush: false,\n\t\t\t\t\t...params.message,\n\t\t\t\t\tsending: false,\n\t\t\t\t\terror: false,\n\t\t\t\t}\n\t\t\t}).then(() => {\n\t\t\t\tthis.controller.application.emit(EventType.dialog.scrollToBottom, {cancelIfScrollChange: params.message.senderId !== this.controller.application.getUserId()});\n\t\t\t});\n\t\t}\n\t\telse if (this.controller.application.isUnreadMessagesLoaded())\n\t\t{\n\t\t\tif (this.controller.application.getChatId() === params.chatId)\n\t\t\t{\n\t\t\t\tthis.store.commit('application/increaseDialogExtraCount');\n\t\t\t}\n\n\t\t\tthis.store.dispatch('messages/setAfter', {\n\t\t\t\tpush: false,\n\t\t\t\t...params.message,\n\t\t\t\tunread: true\n\t\t\t});\n\t\t}\n\n\t\tthis.controller.application.stopOpponentWriting({\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.message.senderId\n\t\t});\n\n\t\tif (params.message.senderId === this.controller.application.getUserId())\n\t\t{\n\t\t\tthis.store.dispatch('messages/readMessages', {\n\t\t\t\tchatId: params.chatId\n\t\t\t}).then(result => {\n\t\t\t\tthis.store.dispatch('dialogues/update', {\n\t\t\t\t\tdialogId: params.dialogId,\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tcounter: 0,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.store.dispatch('dialogues/increaseCounter', {\n\t\t\t\tdialogId: params.dialogId,\n\t\t\t\tcount: 1,\n\t\t\t});\n\t\t}\n\t}\n\n\thandleMessageUpdate(params, extra, command)\n\t{\n\t\tthis.execMessageUpdateOrDelete(params, extra, command);\n\t}\n\n\thandleMessageDelete(params, extra, command)\n\t{\n\t\tthis.execMessageUpdateOrDelete(params, extra, command);\n\t}\n\n\texecMessageUpdateOrDelete(params, extra, command)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.controller.application.stopOpponentWriting({\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.senderId\n\t\t});\n\n\t\tthis.store.dispatch('messages/update', {\n\t\t\tid: params.id,\n\t\t\tchatId: params.chatId,\n\t\t\tfields: {\n\t\t\t\ttext: command === \"messageUpdate\"? params.text: '',\n\t\t\t\ttextOriginal: command === \"messageUpdate\"? params.textOriginal: '',\n\t\t\t\tparams: params.params,\n\t\t\t\tblink: true\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tthis.controller.application.emit(EventType.dialog.scrollToBottom, {cancelIfScrollChange: true});\n\t\t});\n\n\t\tlet recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (\n\t\t\tcommand === 'messageUpdate' &&\n\t\t\trecentItem.element &&\n\t\t\trecentItem.element.message.id === params.id\n\t\t)\n\t\t{\n\t\t\tthis.store.dispatch('recent/update', {\n\t\t\t\tid: params.dialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\tid: params.id,\n\t\t\t\t\t\ttext: params.text,\n\t\t\t\t\t\tdate: recentItem.element.message.date\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\tcommand === 'messageDelete' &&\n\t\t\trecentItem.element &&\n\t\t\trecentItem.element.message.id === params.id\n\t\t)\n\t\t{\n\t\t\tthis.store.dispatch('recent/update', {\n\t\t\t\tid: params.dialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tmessage: {\n\t\t\t\t\t\tid: params.id,\n\t\t\t\t\t\ttext: 'Message deleted',\n\t\t\t\t\t\tdate: recentItem.element.message.date\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\thandleMessageDeleteComplete(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('messages/delete', {\n\t\t\tid: params.id,\n\t\t\tchatId: params.chatId,\n\t\t});\n\n\t\tthis.controller.application.stopOpponentWriting({\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.senderId,\n\t\t\taction: false\n\t\t});\n\t}\n\n\thandleMessageLike(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('messages/update', {\n\t\t\tid: params.id,\n\t\t\tchatId: params.chatId,\n\t\t\tfields: {params: {LIKE: params.users}}\n\t\t});\n\t}\n\n\thandleChatOwner(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\townerId: params.userId,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChatUserAdd(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {userCounter: params.userCount}\n\t\t});\n\t}\n\n\thandleChatUserLeave(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {userCounter: params.userCount}\n\t\t});\n\t}\n\n\thandleMessageParamsUpdate(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('messages/update', {\n\t\t\tid: params.id,\n\t\t\tchatId: params.chatId,\n\t\t\tfields: {params: params.params}\n\t\t}).then(() => {\n\t\t\tthis.controller.application.emit(EventType.dialog.scrollToBottom, {cancelIfScrollChange: true});\n\t\t});\n\t}\n\n\thandleStartWriting(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.controller.application.startOpponentWriting(params);\n\t}\n\n\thandleReadMessage(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('messages/readMessages', {\n\t\t\tchatId: params.chatId,\n\t\t\treadId: params.lastId\n\t\t}).then(result => {\n\t\t\tthis.store.dispatch('dialogues/update', {\n\t\t\t\tdialogId: params.dialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tcounter: params.counter,\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tcounter: params.counter\n\t\t\t}\n\t\t});\n\t}\n\n\thandleReadMessageChat(params, extra)\n\t{\n\t\tthis.handleReadMessage(params, extra);\n\t}\n\n\thandleReadMessageOpponent(params, extra)\n\t{\n\t\tthis.execReadMessageOpponent(params, extra);\n\t}\n\n\thandleReadMessageChatOpponent(params, extra)\n\t{\n\t\tthis.execReadMessageOpponent(params, extra);\n\t}\n\n\texecReadMessageOpponent(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/updateReaded', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.userId,\n\t\t\tuserName: params.userName,\n\t\t\tmessageId: params.lastId,\n\t\t\tdate: params.date,\n\t\t\taction: true\n\t\t});\n\t}\n\n\thandleUnreadMessageOpponent(params, extra)\n\t{\n\t\tthis.execUnreadMessageOpponent(params, extra);\n\t}\n\n\thandleUnreadMessageChatOpponent(params, extra)\n\t{\n\t\tthis.execUnreadMessageOpponent(params, extra);\n\t}\n\n\texecUnreadMessageOpponent(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/updateReaded', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.userId,\n\t\t\taction: false\n\t\t});\n\t}\n\n\thandleFileUpload(params, extra)\n\t{\n\t\tif (this.skipExecute(params, extra))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('files/set', this.controller.application.prepareFilesBeforeSave(\n\t\t\t VuexBuilderModel.convertToArray({file: params.fileParams})\n\t\t)).then(() => {\n\t\t\tthis.controller.application.emit(EventType.dialog.scrollToBottom, {cancelIfScrollChange: true});\n\t\t});\n\t}\n\n\thandleChatPin(params, extra)\n\t{\n\t\tthis.store.dispatch('recent/pin', {\n\t\t\tid: params.dialogId,\n\t\t\taction: params.active\n\t\t});\n\t}\n\n\thandleChatHide(params, extra)\n\t{\n\t\tthis.store.dispatch('recent/delete', {\n\t\t\tid: params.dialogId\n\t\t});\n\t}\n\n\thandleReadNotifyList(params, extra)\n\t{\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: 'notify',\n\t\t\tfields: {\n\t\t\t\tcounter: params.counter\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUserInvite(params, extra)\n\t{\n\t\tif (!params.invited)\n\t\t{\n\t\t\tthis.store.dispatch('users/update', {\n\t\t\t\tid: params.userId,\n\t\t\t\tfields: params.user\n\t\t\t});\n\t\t}\n\t}\n}","/**\n * Bitrix Messenger\n * Im call pull commands (Pull Command Handler)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {PullClient} from \"pull.client\";\nimport {CallErrorCode} from \"im.const\";\n\nexport class ImCallPullHandler\n{\n\tstatic create(params = {})\n\t{\n\t\treturn new this(params);\n\t}\n\n\tconstructor(params = {})\n\t{\n\t\tif (typeof params.application === 'object' && params.application)\n\t\t{\n\t\t\tthis.application = params.application;\n\t\t}\n\t\tif (typeof params.controller === 'object' && params.controller)\n\t\t{\n\t\t\tthis.controller = params.controller;\n\t\t}\n\t\tif (typeof params.store === 'object' && params.store)\n\t\t{\n\t\t\tthis.store = params.store;\n\t\t}\n\n\t\tthis.option = typeof params.store === 'object' && params.store? params.store: {};\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'im';\n\t}\n\n\tgetSubscriptionType()\n\t{\n\t\treturn PullClient.SubscriptionType.Server;\n\t}\n\n\thandleChatUserAdd(params)\n\t{\n\t\tconst users = Object.values(params.users).map(user => {\n\t\t\treturn {...user, lastActivityDate: new Date()};\n\t\t});\n\t\tthis.store.commit('callApplication/common', {userCount: params.userCount});\n\t\tthis.store.commit('users/set', users);\n\t}\n\n\thandleChatUserLeave(params)\n\t{\n\t\tif (params.userId === this.controller.getUserId() && params.dialogId === this.store.state.application.dialog.dialogId)\n\t\t{\n\t\t\tthis.application.kickFromCall();\n\t\t}\n\n\t\tthis.store.commit('callApplication/common', {userCount: params.userCount});\n\t}\n\n\thandleCallUserNameUpdate(params)\n\t{\n\t\tconst currentUser = this.store.getters['users/get'](params.userId);\n\t\tif (!currentUser)\n\t\t{\n\t\t\tthis.store.dispatch('users/set', {\n\t\t\t\tid: params.userId,\n\t\t\t\tlastActivityDate: new Date()\n\t\t\t});\n\t\t}\n\t\tthis.store.dispatch('users/update', {\n\t\t\tid: params.userId,\n\t\t\tfields: {name: params.name, lastActivityDate: new Date()}\n\t\t});\n\t}\n\n\thandleVideoconfShareUpdate(params)\n\t{\n\t\tif (params.dialogId === this.store.state.application.dialog.dialogId)\n\t\t{\n\t\t\tthis.application.changeVideoconfUrl(params.newLink);\n\t\t}\n\t}\n\n\thandleMessageChat(params)\n\t{\n\t\tif (\n\t\t\tparams.chatId === this.application.getChatId() &&\n\t\t\t!this.store.state.callApplication.common.showChat &&\n\t\t\tparams.message.senderId !== this.controller.getUserId() &&\n\t\t\t!this.store.state.callApplication.common.error\n\t\t)\n\t\t{\n\t\t\tlet text = '';\n\n\t\t\tif (params.message.senderId === 0 || params.message.system === 'Y')\n\t\t\t{\n\t\t\t\ttext = params.message.text;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst userName = params.users[params.message.senderId].name;\n\n\t\t\t\tif (params.message.text === '' && Object.keys(params.files).length > 0)\n\t\t\t\t{\n\t\t\t\t\ttext = `${userName}: ${this.controller.localize['BX_IM_COMPONENT_CALL_FILE']}`;\n\t\t\t\t}\n\t\t\t\telse if (params.message.text !== '')\n\t\t\t\t{\n\t\t\t\t\ttext = `${userName}: ${params.message.text}`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.application.sendNewMessageNotify(text);\n\t\t}\n\t}\n}","/**\n * Bitrix Messenger\n * Bundle pull command handlers\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {ImBasePullHandler} from \"./base\";\nimport {ImCallPullHandler} from \"./call\";\n\nexport {\n\tImBasePullHandler,\n\tImCallPullHandler,\n}"],"names":["ImBasePullHandler","params","controller","store","option","handlingDialog","chatId","dialogId","PullClient","SubscriptionType","Server","extra","optionImportant","skip","Logger","info","parseInt","toString","handleMessageAdd","skipExecute","collection","state","messages","message","find","element","templateId","id","push","chat","dispatch","fields","lines","text","date","counter","users","VuexBuilderModel","convertToArray","files","application","prepareFilesBeforeSave","forEach","file","length","templateFileId","index","then","emit","EventType","dialog","scrollToBottom","cancelIfScrollChange","sending","error","senderId","getUserId","isUnreadMessagesLoaded","getChatId","commit","unread","stopOpponentWriting","userId","result","count","command","execMessageUpdateOrDelete","textOriginal","blink","recentItem","getters","action","LIKE","ownerId","userCounter","userCount","startOpponentWriting","readId","lastId","handleReadMessage","execReadMessageOpponent","userName","messageId","execUnreadMessageOpponent","fileParams","active","invited","user","ImCallPullHandler","Object","values","map","lastActivityDate","Date","kickFromCall","currentUser","name","changeVideoconfUrl","newLink","callApplication","common","showChat","system","keys","localize","sendNewMessageNotify"],"mappings":"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"}