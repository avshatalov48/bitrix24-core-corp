{"version":3,"file":"logger.bundle.js","sources":["../src/logger.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Logger class\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nclass Logger\n{\n\t#types = {};\n\t#config = {};\n\t#custom = {};\n\n\tconstructor()\n\t{\n\t\tthis.#types = {\n\t\t\tdesktop: true,\n\t\t\tlog: false,\n\t\t\tinfo: false,\n\t\t\twarn: false,\n\t\t\terror: true,\n\t\t\ttrace: true,\n\t\t};\n\n\t\tthis.#config = this.#types;\n\n\t\tthis.__load();\n\t}\n\n\tsetConfig(types)\n\t{\n\t\tfor (let type in types)\n\t\t{\n\t\t\tif (\n\t\t\t\ttypes.hasOwnProperty(type)\n\t\t\t\t&& typeof this.#types[type] !== 'undefined'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.#types[type] = !!types[type];\n\t\t\t\tthis.#config[type] = !!types[type];\n\t\t\t}\n\t\t}\n\n\t\tthis.__load();\n\t}\n\n\tenable(type)\n\t{\n\t\tif (typeof this.#types[type] === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#types[type] = true;\n\t\tthis.#custom[type] = true;\n\n\t\tthis.__save();\n\n\t\treturn true;\n\t}\n\n\tdisable(type)\n\t{\n\t\tif (typeof this.#types[type] === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#types[type] = false;\n\t\tthis.#custom[type] = false;\n\n\t\tthis.__save();\n\n\t\treturn true;\n\t}\n\n\tisEnabled(type)\n\t{\n\t\treturn this.#types[type] === true;\n\t}\n\n\tdesktop(...params)\n\t{\n\t\tif (this.isEnabled('desktop'))\n\t\t{\n\t\t\tconsole.log(...[...this.__getStyles('desktop'), ...params]);\n\t\t}\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled('log'))\n\t\t{\n\t\t\tconsole.log(...[...this.__getStyles('log'), ...params]);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled('info'))\n\t\t{\n\t\t\tconsole.info(...[...this.__getStyles('info'), ...params]);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled('warn'))\n\t\t{\n\t\t\tconsole.warn(...[...this.__getStyles('warn'), ...params]);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tif (this.isEnabled('error'))\n\t\t{\n\t\t\tconsole.error(...[...this.__getStyles('error'), ...params]);\n\t\t}\n\t}\n\n\ttrace(...params)\n\t{\n\t\tif (this.isEnabled('trace'))\n\t\t{\n\t\t\tconsole.trace(...params);\n\t\t}\n\t}\n\n\t__save()\n\t{\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlet custom = {};\n\t\t\t\tfor (let type in this.#custom)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.#custom.hasOwnProperty(type)\n\t\t\t\t\t\t&& this.#config[type] !== this.#custom[type]\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcustom[type] = !!this.#custom[type];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconsole.warn(JSON.stringify(custom));\n\n\t\t\t\twindow.localStorage.setItem('bx-messenger-logger', JSON.stringify(custom));\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\t}\n\n\t__load()\n\t{\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlet custom = window.localStorage.getItem('bx-messenger-logger');\n\t\t\t\tif (typeof custom === 'string')\n\t\t\t\t{\n\t\t\t\t\tthis.#custom = JSON.parse(custom);\n\t\t\t\t\tthis.#types = {...this.#types, ...this.#custom};\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\t}\n\n\t__getStyles(type = 'all')\n\t{\n\t\tconst styles = {\n\t\t\t'desktop': [\"%cDESKTOP\", \"color: white; font-style: italic; background-color: #29619b; padding: 0 6\\px\"],\n\t\t\t'log': [\"%cLOG\", \"color: #2a323b; font-style: italic; background-color: #ccc; padding: 0 6\\px\"],\n\t\t\t'info': [\"%cINFO\", \"color: #fff; font-style: italic; background-color: #6b7f96; padding: 0 6\\px\"],\n\t\t\t'warn': [\"%cWARNING\", \"color: white; font-style: italic; padding: 0 6\\px; border: 1px solid #f0a74f\"],\n\t\t\t'error': [\"%cERROR\", \"color: white; font-style: italic; padding: 0 6\\px; border: 1px solid #8a3232\"],\n\t\t};\n\n\t\tif (type === 'all')\n\t\t{\n\t\t\treturn styles;\n\t\t}\n\n\t\tif (styles[type])\n\t\t{\n\t\t\treturn styles[type];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t__getRemoveString()\n\t{\n\t\tconst styles = this.__getStyles();\n\t\tconst result = [];\n\t\tfor (let type in styles)\n\t\t{\n\t\t\tif (styles.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tresult.push(styles[type][1]);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};"],"names":["Logger","desktop","log","info","warn","error","trace","__load","types","type","hasOwnProperty","__save","isEnabled","params","console","__getStyles","window","localStorage","custom","JSON","stringify","setItem","e","getItem","parse","styles","result","push","logger"],"mappings":"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"}