this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t){"use strict";var n=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"clientVersion",0);babelHelpers.defineProperty(this,"eventHandlers",{});babelHelpers.defineProperty(this,"htmlWrapperHead",null)}babelHelpers.createClass(e,[{key:"addCustomEvent",value:function e(t,n){var i=function e(t){n.apply(window,babelHelpers.toConsumableArray(Object.values(t.detail)))};if(!this.eventHandlers[t]){this.eventHandlers[t]=[]}this.eventHandlers[t].push(i);window.addEventListener(t,i);return true}},{key:"removeCustomEvents",value:function e(t){if(!this.eventHandlers[t]){return false}this.eventHandlers[t].forEach(function(e){window.removeEventListener(t,e)});this.eventHandlers[t]=[];return true}},{key:"onCustomEvent",value:function e(n,i,r){if(arguments.length===2){r=i;i=n;n="all"}else if(arguments.length<2){return false}var s=babelHelpers.objectSpread({},r);if(n==="all"){var o=opener?opener:top;o.BXWindows.forEach(function(e){if(e&&e.name!==""&&e.BXDesktopWindow&&e.BXDesktopWindow.DispatchCustomEvent){e.BXDesktopWindow.DispatchCustomEvent(i,s)}});o.BXDesktopWindow.DispatchCustomEvent(i,s)}else if(t.Type.isObject(n)&&n.hasOwnProperty("BXDesktopWindow")){n.BXDesktopWindow.DispatchCustomEvent(i,s)}else{var a=this.findWindow(n);if(a){a.BXDesktopWindow.DispatchCustomEvent(i,s)}}return true}},{key:"findWindow",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";var n=opener?opener:top;if(t==="main"){return n}else{return n.BXWindows.find(function(e){return e.name===t})}}},{key:"setWindowResizable",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;BXDesktopWindow.SetProperty("resizable",t);return true}},{key:"setWindowClosable",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;BXDesktopWindow.SetProperty("closable",t);return true}},{key:"setWindowTitle",value:function e(n){if(t.Type.isUndefined(n)){return false}n=n.trim();if(n.length<=0){return false}BXDesktopWindow.SetProperty("title",n);return true}},{key:"setWindowPosition",value:function e(t){BXDesktopWindow.SetProperty("position",t);return true}},{key:"setWindowMinSize",value:function e(t){if(!t.Width||!t.Height){return false}BXDesktopWindow.SetProperty("minClientSize",t);return true}},{key:"getHtmlPage",value:function e(n,i,r){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";if(window.BXIM){return window.BXIM.desktop.getHtmlPage(n,i,r,s)}n=n||"";i=i||"";s=s||"";if(t.Type.isDomNode(n)){n=n.outerHTML}if(t.Type.isDomNode(i)){i=i.outerHTML}if(i!==""){i='<script type="text/javascript">BX.ready(function(){'+i+"});<\/script>"}if(this.isPopupPageLoaded()){return'<div class="im-desktop im-desktop-popup '+s+'">'+n+i+"</div>"}else{if(this.htmlWrapperHead==null){this.htmlWrapperHead=document.head.outerHTML.replace(/BX\.PULL\.start\([^)]*\);/g,"")}return"<!DOCTYPE html><html>"+this.htmlWrapperHead+'<body class="im-desktop im-desktop-popup '+s+'">'+n+i+"</body></html>"}}},{key:"isPopupPageLoaded",value:function e(){if(!this.enableInVersion(45)){return false}if(window.BXIM&&!window.BXIM.isUtfMode){return false}if(!BXInternals){return false}if(!BXInternals.PopupTemplate){return false}if(BXInternals.PopupTemplate==="#PLACEHOLDER#"){return false}return true}},{key:"enableInVersion",value:function e(n){if(t.Type.isUndefined(BXDesktopSystem)){return false}return this.getApiVersion()>=parseInt(n)}},{key:"getApiVersion",value:function e(){if(t.Type.isUndefined(BXDesktopSystem)){return 0}if(!this.clientVersion){this.clientVersion=BXDesktopSystem.GetProperty("versionParts")}return this.clientVersion[3]}},{key:"isReady",value:function e(){return typeof BXDesktopSystem!="undefined"}}]);return e}();e.Desktop=n})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{},BX);
//# sourceMappingURL=desktop.bundle.map.js