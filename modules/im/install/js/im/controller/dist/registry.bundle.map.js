{"version":3,"sources":["registry.bundle.js"],"names":["this","BX","Messenger","exports","im_tools_timer","im_const","im_utils","ApplicationController","babelHelpers","classCallCheck","store","restClient","templateEngine","timer","Timer","_prepareFilesBeforeSave","params","defaultMessageLimit","requestMessageLimit","getDefaultMessageLimit","messageLastReadId","messageReadQueue","createClass","key","value","setTemplateEngine","template","setRestClient","client","setStore","getSiteId","state","application","common","siteId","getUserId","userId","getLanguageId","languageId","getCurrentUser","getters","getChatId","dialog","chatId","getDialogId","dialogId","getDialogData","arguments","length","undefined","dialogues","collection","getDialogCrmData","result","enabled","entityType","DialogCrmType","none","entityId","dialogData","type","DialogType","call","entityData1","_dialogData$entityDat","split","_dialogData$entityDat2","slicedToArray","toString","toLowerCase","crm","_dialogData$entityId$","_dialogData$entityId$2","_entityType","_entityId","getDialogIdByChatId","getDiskFolderId","diskFolderId","getMessageLimit","messageLimit","getRequestMessageLimit","emit","eventName","$emit","listen","callback","$on","getReadedList","readedList","muteDialog","_this","action","Utils","isEmptyDialogId","isDialogMuted","start","id","callMethod","RestMethod","imChatMute","DIALOG_ID","ACTION","muteList","push","filter","dispatch","fields","includes","isUnreadMessagesLoaded","unreadLastId","messages","lastElementId","index","lastElement","prepareFilesBeforeSave","files","setPrepareFilesBeforeSaveFunction","func","bind","startOpponentWriting","_this2","userName","stopOpponentWriting","stop","startWriting","_this3","has","imDialogWriting","catch","stopWriting","joinParentChat","messageId","_this4","Promise","resolve","reject","tempJoinChat","imChatParentJoin","MESSAGE_ID","then","setTextareaMessage","_params$message","message","_params$dialogId","textareaMessage","setSendingMessageFlag","reactMessage","imMessageLike","readMessage","_this5","force","skipAjax","parseInt","readMessageExecute","_this6","elementId","lastId","readId","count","counter","commit","imDialogRead","unreadMessage","_this7","unreadId","imDialogUnread","shareMessage","imMessageShare","TYPE","Controller","Const"],"mappings":"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","file":"registry.bundle.map.js"}