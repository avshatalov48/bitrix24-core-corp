{"version":3,"file":"registry.bundle.js","sources":["../src/application.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application controller\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Timer} from 'im.tools.timer';\nimport {DialogCrmType, DialogType, RestMethod} from \"im.const\";\nimport {Utils} from \"im.utils\";\n\nclass ApplicationController\n{\n\tconstructor()\n\t{\n\t\tthis.store = null;\n\t\tthis.restClient = null;\n\t\tthis.templateEngine = null;\n\n\t\tthis.timer = new Timer();\n\n\t\tthis._prepareFilesBeforeSave = params => { return params };\n\n\t\tthis.defaultMessageLimit = 20;\n\t\tthis.requestMessageLimit = this.getDefaultMessageLimit();\n\n\t\tthis.messageLastReadId = {};\n\t\tthis.messageReadQueue = {};\n\t}\n\n\tsetTemplateEngine(template)\n\t{\n\t\tthis.templateEngine = template;\n\t}\n\n\tsetRestClient(client)\n\t{\n\t\tthis.restClient = client;\n\t}\n\n\tsetStore(store)\n\t{\n\t\tthis.store = store;\n\t}\n\n\tgetSiteId()\n\t{\n\t\treturn this.store.state.application.common.siteId;\n\t}\n\n\tgetUserId()\n\t{\n\t\treturn this.store.state.application.common.userId;\n\t}\n\n\tgetLanguageId()\n\t{\n\t\treturn this.store.state.application.common.languageId;\n\t}\n\n\tgetCurrentUser()\n\t{\n\t\treturn this.store.getters['users/get'](this.store.state.application.common.userId, true);\n\t}\n\n\tgetChatId()\n\t{\n\t\treturn this.store.state.application.dialog.chatId;\n\t}\n\n\tgetDialogId()\n\t{\n\t\treturn this.store.state.application.dialog.dialogId;\n\t}\n\n\tgetDialogData(dialogId = this.getDialogId())\n\t{\n\t\tif (this.store.state.dialogues.collection[dialogId])\n\t\t{\n\t\t\treturn this.store.state.dialogues.collection[dialogId];\n\t\t}\n\n\t\treturn this.store.getters['dialogues/getBlank']();\n\t}\n\n\tgetDialogCrmData(dialogId = this.getDialogId())\n\t{\n\t\tlet result = {\n\t\t\tenabled: false,\n\t\t\tentityType: DialogCrmType.none,\n\t\t\tentityId: 0\n\t\t};\n\n\t\tlet dialogData = this.getDialogData(dialogId);\n\t\tif (dialogData.type === DialogType.call)\n\t\t{\n\t\t\tif (dialogData.entityData1 && typeof dialogData.entityData1 === 'string')\n\t\t\t{\n\t\t\t\tlet [enabled, entityType, entityId] = dialogData.entityData1.split('|');\n\t\t\t\tif (enabled)\n\t\t\t\t{\n\t\t\t\t\tentityType = entityType? entityType.toString().toLowerCase(): DialogCrmType.none;\n\t\t\t\t\tresult = {enabled, entityType, entityId};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (dialogData.type === DialogType.crm)\n\t\t{\n\t\t\tlet [entityType, entityId] = dialogData.entityId.split('|');\n\t\t\tentityType = entityType? entityType.toString().toLowerCase(): DialogCrmType.none;\n\t\t\tresult = {enabled: true, entityType, entityId};\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tgetDialogIdByChatId(chatId)\n\t{\n\t\tif (this.getDialogId() === 'chat'+chatId)\n\t\t{\n\t\t\treturn this.getDialogId();\n\t\t}\n\n\t\tlet dialog = this.store.getters['dialogues/getByChatId'](chatId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn dialog.dialogId;\n\t}\n\n\tgetDiskFolderId()\n\t{\n\t\treturn this.store.state.application.dialog.diskFolderId;\n\t}\n\n\tgetMessageLimit()\n\t{\n\t\treturn this.store.state.application.dialog.messageLimit;\n\t}\n\n\tgetDefaultMessageLimit()\n\t{\n\t\treturn this.defaultMessageLimit;\n\t}\n\n\tgetRequestMessageLimit()\n\t{\n\t\treturn this.requestMessageLimit;\n\t}\n\n\temit(eventName, params = {})\n\t{\n\t\tthis.templateEngine.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.templateEngine.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\n\tgetReadedList()\n\t{\n\t\tlet dialog = this.store.state.dialogues.collection[this.getDialogId()];\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn dialog.readedList;\n\t}\n\n\tmuteDialog(action = null, dialogId = this.getDialogId())\n\t{\n\t\tif (Utils.dialog.isEmptyDialogId(dialogId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (action === null)\n\t\t{\n\t\t\taction = !this.isDialogMuted();\n\t\t}\n\n\t\tthis.timer.start('muteDialog', dialogId, .3, (id) => {\n\t\t\tthis.restClient.callMethod(RestMethod.imChatMute, {\n\t\t\t\t'DIALOG_ID': dialogId,\n\t\t\t\t'ACTION': action? 'Y': 'N'\n\t\t\t})\n\t\t});\n\n\t\tlet muteList = [];\n\t\tif (action)\n\t\t{\n\t\t\tmuteList = this.getDialogData().muteList;\n\t\t\tmuteList.push(this.getUserId());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmuteList = this.getDialogData().muteList.filter(userId => userId !== this.getUserId());\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId,\n\t\t\tfields: {muteList},\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tisDialogMuted(dialogId = this.getDialogId())\n\t{\n\t\treturn this.getDialogData().muteList.includes(this.getUserId());\n\t}\n\n\n\tisUnreadMessagesLoaded()\n\t{\n\t\tlet dialog = this.store.state.dialogues.collection[this.getDialogId()];\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (dialog.unreadLastId <= 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tlet collection = this.store.state.messages.collection[this.getChatId()];\n\t\tif (!collection || collection.length <= 0)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tlet lastElementId = 0;\n\t\tfor (let index = collection.length-1; index >= 0; index--)\n\t\t{\n\t\t\tlet lastElement = collection[index];\n\t\t\tif (typeof lastElement.id === \"number\")\n\t\t\t{\n\t\t\t\tlastElementId = lastElement.id;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn lastElementId >= dialog.unreadLastId;\n\t}\n\n\tprepareFilesBeforeSave(files)\n\t{\n\t\treturn this._prepareFilesBeforeSave(files);\n\t}\n\n\tsetPrepareFilesBeforeSaveFunction(func)\n\t{\n\t\tthis._prepareFilesBeforeSave = func.bind(this);\n\t}\n\n\tshowSmiles()\n\t{\n\t\tthis.store.dispatch('application/showSmiles');\n\t}\n\n\thideSmiles()\n\t{\n\t\tthis.store.dispatch('application/hideSmiles');\n\t}\n\n\tstartOpponentWriting(params)\n\t{\n\t\tlet {dialogId, userId, userName} = params;\n\n\t\tthis.store.dispatch('dialogues/updateWriting', {\n\t\t\tdialogId,\n\t\t\tuserId,\n\t\t\tuserName,\n\t\t\taction : true\n\t\t});\n\n\t\tthis.timer.start('writingEnd', dialogId+'|'+userId, 35, (id, params) => {\n\t\t\tlet {dialogId, userId} = params;\n\t\t\tthis.store.dispatch('dialogues/updateWriting', {\n\t\t\t\tdialogId,\n\t\t\t\tuserId,\n\t\t\t\taction: false\n\t\t\t});\n\t\t}, {dialogId, userId});\n\n\t\treturn true;\n\t}\n\n\tstopOpponentWriting(params = {})\n\t{\n\t\tlet {dialogId, userId, userName} = params;\n\n\t\tthis.timer.stop('writingStart', dialogId+'|'+userId, true);\n\t\tthis.timer.stop('writingEnd', dialogId+'|'+userId);\n\n\t\treturn true;\n\t}\n\n\tstartWriting(dialogId = this.getDialogId())\n\t{\n\t\tif (Utils.dialog.isEmptyDialogId(dialogId) || this.timer.has('writes', dialogId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.timer.start('writes', dialogId, 28);\n\t\tthis.timer.start('writesSend', dialogId, 5, (id) => {\n\t\t\tthis.restClient.callMethod(RestMethod.imDialogWriting, {\n\t\t\t\t'DIALOG_ID': dialogId\n\t\t\t}).catch(() => {\n\t\t\t\tthis.timer.stop('writes', dialogId);\n\t\t\t});\n\t\t});\n\t}\n\n\tstopWriting(dialogId = this.getDialogId())\n\t{\n\t\tthis.timer.stop('writes', dialogId, true);\n\t\tthis.timer.stop('writesSend', dialogId, true);\n\t}\n\n\tjoinParentChat(messageId, dialogId)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (!messageId || !dialogId)\n\t\t\t{\n\t\t\t\treturn reject();\n\t\t\t}\n\n\t\t\tif (typeof this.tempJoinChat === 'undefined')\n\t\t\t{\n\t\t\t\tthis.tempJoinChat = {};\n\t\t\t}\n\t\t\telse if (this.tempJoinChat['wait'])\n\t\t\t{\n\t\t\t\treturn reject();\n\t\t\t}\n\n\t\t\tthis.tempJoinChat['wait'] = true;\n\n\t\t\tthis.restClient.callMethod(RestMethod.imChatParentJoin, {\n\t\t\t\t'DIALOG_ID': dialogId,\n\t\t\t\t'MESSAGE_ID': messageId\n\t\t\t}).then(() => {\n\t\t\t\tthis.tempJoinChat['wait'] = false;\n\t\t\t\tthis.tempJoinChat[dialogId] = true;\n\t\t\t\treturn resolve(dialogId);\n\t\t\t}).catch(() => {\n\t\t\t\tthis.tempJoinChat['wait'] = false;\n\t\t\t\treturn reject();\n\t\t\t});\n\t\t});\n\n\t};\n\n\tsetTextareaMessage(params)\n\t{\n\t\tlet {\n\t\t\tmessage = '',\n\t\t\tdialogId = this.getDialogId()\n\t\t} = params;\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId,\n\t\t\tfields: {\n\t\t\t\ttextareaMessage: message\n\t\t\t},\n\t\t});\n\t}\n\n\tsetSendingMessageFlag(messageId)\n\t{\n\t\tthis.store.dispatch('messages/actionStart', {\n\t\t\tid: messageId,\n\t\t\tchatId: this.getChatId()\n\t\t});\n\t}\n\n\treactMessage(messageId, type = 'like', action = 'auto')\n\t{\n\t\tthis.restClient.callMethod(RestMethod.imMessageLike, {\n\t\t\t'MESSAGE_ID': messageId,\n\t\t\t'ACTION': action === 'auto'? 'auto': (action === 'set'? 'plus': 'minus')\n\t\t});\n\t}\n\n\treadMessage(messageId = null, force = false, skipAjax = false)\n\t{\n\t\tlet chatId = this.getChatId();\n\n\t\tif (typeof this.messageLastReadId[chatId] === 'undefined')\n\t\t{\n\t\t\tthis.messageLastReadId[chatId] = null;\n\t\t}\n\t\tif (typeof this.messageReadQueue[chatId] === 'undefined')\n\t\t{\n\t\t\tthis.messageReadQueue[chatId] = [];\n\t\t}\n\n\t\tif (messageId)\n\t\t{\n\t\t\tthis.messageReadQueue[chatId].push(parseInt(messageId));\n\t\t}\n\n\t\tthis.timer.stop('readMessage', chatId, true);\n\t\tthis.timer.stop('readMessageServer', chatId, true);\n\n\t\tif (force)\n\t\t{\n\t\t\treturn this.readMessageExecute(chatId, skipAjax);\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.timer.start('readMessage', chatId, .1, (chatId, params) => this.readMessageExecute(chatId, skipAjax).then((result) => resolve(result)));\n\t\t});\n\t}\n\n\treadMessageExecute(chatId, skipAjax = false)\n\t{\n\t\treturn new Promise((resolve, reject) =>\n\t\t{\n\t\t\tif (this.messageReadQueue[chatId])\n\t\t\t{\n\t\t\t\tthis.messageReadQueue[chatId] = this.messageReadQueue[chatId].filter(elementId => {\n\t\t\t\t\tif (!this.messageLastReadId[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.messageLastReadId[chatId] = elementId;\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.messageLastReadId[chatId] < elementId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.messageLastReadId[chatId] = elementId;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tlet dialogId = this.getDialogIdByChatId(chatId);\n\t\t\tlet lastId = this.messageLastReadId[chatId] || 0;\n\t\t\tif (lastId <= 0)\n\t\t\t{\n\t\t\t\tresolve({dialogId, lastId: 0});\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tthis.store.dispatch('messages/readMessages', {\n\t\t\t\tchatId: chatId,\n\t\t\t\treadId: lastId\n\t\t\t}).then(result =>\n\t\t\t{\n\t\t\t\tthis.store.dispatch('dialogues/decreaseCounter', {\n\t\t\t\t\tdialogId,\n\t\t\t\t\tcount: result.count\n\t\t\t\t});\n\n\t\t\t\tif (this.getChatId() === chatId && this.store.getters['dialogues/canSaveChat'])\n\t\t\t\t{\n\t\t\t\t\tlet dialog = this.store.getters['dialogues/get'](dialogId);\n\t\t\t\t\tif (dialog.counter <= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.store.commit('application/clearDialogExtraCount');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (skipAjax)\n\t\t\t\t{\n\t\t\t\t\tresolve({dialogId, lastId});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.timer.start('readMessageServer', chatId, .5, () => {\n\t\t\t\t\t\tthis.restClient.callMethod(RestMethod.imDialogRead, {\n\t\t\t\t\t\t\t'DIALOG_ID': dialogId,\n\t\t\t\t\t\t\t'MESSAGE_ID': lastId\n\t\t\t\t\t\t}).then(() => resolve({dialogId, lastId})).catch(() => resolve({dialogId, lastId}));\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}).catch(() => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tunreadMessage(messageId = null, skipAjax = false)\n\t{\n\t\tlet chatId = this.getChatId();\n\n\t\tif (typeof this.messageLastReadId[chatId] === 'undefined')\n\t\t{\n\t\t\tthis.messageLastReadId[chatId] = null;\n\t\t}\n\t\tif (typeof this.messageReadQueue[chatId] === 'undefined')\n\t\t{\n\t\t\tthis.messageReadQueue[chatId] = [];\n\t\t}\n\n\t\tif (messageId)\n\t\t{\n\t\t\tthis.messageReadQueue[chatId] = this.messageReadQueue[chatId].filter(id => id < messageId);\n\t\t}\n\n\t\tthis.timer.stop('readMessage', chatId, true);\n\t\tthis.timer.stop('readMessageServer', chatId, true);\n\n\t\tthis.messageLastReadId[chatId] = messageId;\n\n\t\tthis.store.dispatch('messages/unreadMessages', {\n\t\t\tchatId: chatId,\n\t\t\tunreadId: this.messageLastReadId[chatId]\n\t\t}).then(result => {\n\n\t\t\tlet dialogId = this.getDialogIdByChatId(chatId);\n\n\t\t\tthis.store.dispatch('dialogues/update', {\n\t\t\t\tdialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tunreadId: messageId\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.store.dispatch('dialogues/increaseCounter', {\n\t\t\t\tdialogId,\n\t\t\t\tcount: result.count\n\t\t\t});\n\n\t\t\tif (!skipAjax)\n\t\t\t{\n\t\t\t\tthis.restClient.callMethod(RestMethod.imDialogUnread, {\n\t\t\t\t\t'DIALOG_ID': dialogId,\n\t\t\t\t\t'MESSAGE_ID': this.messageLastReadId[chatId]\n\t\t\t\t});\n\t\t\t}\n\n\t\t}).catch(() => {});\n\t}\n\n\tshareMessage(messageId, type, date = null)\n\t{\n\t\tthis.restClient.callMethod(RestMethod.imMessageShare, {\n\t\t\t'DIALOG_ID': this.getDialogId(),\n\t\t\t'MESSAGE_ID': messageId,\n\t\t\t'TYPE': type,\n\t\t});\n\n\t\treturn true;\n\t}\n}\n\nexport {ApplicationController};"],"names":["ApplicationController","store","restClient","templateEngine","timer","Timer","_prepareFilesBeforeSave","params","defaultMessageLimit","requestMessageLimit","getDefaultMessageLimit","messageLastReadId","messageReadQueue","template","client","state","application","common","siteId","userId","languageId","getters","dialog","chatId","dialogId","getDialogId","dialogues","collection","result","enabled","entityType","DialogCrmType","none","entityId","dialogData","getDialogData","type","DialogType","call","entityData1","split","toString","toLowerCase","crm","diskFolderId","messageLimit","eventName","$emit","callback","$on","readedList","action","Utils","isEmptyDialogId","isDialogMuted","start","id","callMethod","RestMethod","imChatMute","muteList","push","getUserId","filter","dispatch","fields","includes","unreadLastId","messages","getChatId","length","lastElementId","index","lastElement","files","func","bind","userName","stop","has","imDialogWriting","catch","messageId","Promise","resolve","reject","tempJoinChat","imChatParentJoin","then","message","textareaMessage","imMessageLike","force","skipAjax","parseInt","readMessageExecute","elementId","getDialogIdByChatId","lastId","readId","count","counter","commit","imDialogRead","unreadId","imDialogUnread","imMessageShare"],"mappings":"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"}