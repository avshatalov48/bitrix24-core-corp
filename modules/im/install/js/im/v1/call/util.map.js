{"version":3,"sources":["util.js"],"names":["BX","namespace","Call","Util","blankAvatar","userData","usersInProcess","updateUserData","users","usersToUpdate","self","this","i","length","hasOwnProperty","push","result","Promise","resolve","reject","CallEngine","getRestClient","callMethod","ID","AVATAR_HR","then","response","answer","type","isPlainObject","userId","catch","error","getDateForLog","d","Date","getFullYear","lpad","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","getTimeForLog","str","chr","toString","getUser","getUserName","name","getUserAvatar","avatar_hr","isBlank","getUserAvatars","forEach","getCustomMessage","message","messageText","gender","convertKeysToUpper","replace","match","placeHolder","substr","obj","util","objectClone","k","u","toUpperCase","appendChildren","parent","children","child","appendChild","containsVideoTrack","stream","MediaStream","getVideoTracks","findBestElementSize","width","height","userCount","bestFilledArea","area","getFilledArea","bestWidth","elementWidth","bestHeight","elementHeight","rowCount","columnCount","Math","ceil","maxElementWidth","maxElementHeight","ratio","neededRatio","expectedElementHeight","expectedElementWidth","isWebRTCSupported","webkitRTCPeerConnection","mozRTCPeerConnection","RTCPeerConnection","isCallServerAllowed","getUserLimit","parseInt","getMaxBitrate","quality","Quality","VeryHigh","High","Medium","Low","VeryLow","getMaxResolution","allowHd","alterSDP","sdp","options","sdpLines","split","codecRtpMaps","videoLineIndex","line","exec","rtpmap","codec","sortVideoLine","join","videoLine","rtpMaps","parsedVideoLine","codecsSlice","slice","rtpMapToCodec","rtpMap","sort","a","b","trim","codecA","codecB","concat","url","endsWith"],"mappings":"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","file":"util.map.js"}