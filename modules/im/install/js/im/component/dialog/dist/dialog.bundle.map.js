{"version":3,"sources":["dialog.bundle.js"],"names":["this","BX","exports","ui_vue","ui_vue_vuex","im_lib_logger","im_const","im_lib_utils","Vue","component","props","chatId","default","userId","dialogId","enableGestureQuote","enableGestureQuoteFromRight","enableGestureMenu","showMessageUserName","showMessageAvatar","listenEventScrollToBottom","listenEventRequestHistory","listenEventRequestUnread","listenEventSendReadMessages","data","dialogState","dialogDiskFolderId","dialogChatId","scrollToBottomEvent","requestHistoryEvent","requestUnreadEvent","sendReadMessagesEvent","created","EventType","dialog","scrollToBottom","requestHistoryResult","requestUnreadResult","sendReadMessages","requestData","watch","computed","babelHelpers","objectSpread","localize","Object","assign","getFilteredPhrases","$root","$bitrixMessages","widgetClassName","state","className","showMessageDialog","push","join","quotePanelData","result","id","title","description","color","quoteId","message","$store","getters","user","authorId","files","params","NAME","name","Utils","text","purify","isDialog","isChatId","isGestureQuoteSupported","isDarkBackground","application","options","darkBackground","messageCollection","length","init","Vuex","mapState","methods","_query","_this","console","log","query","defineProperty","RestMethodHandler","mobileBrowserConstGet","RestMethod","imChatGet","dialog_id","imDialogMessagesGetInit","imDialogMessagesGet","limit","$bitrixController","getRequestMessageLimit","convert_text","imUserGet","imUserListGet","restClient","callBatch","response","constGet","error","executeRestAnswer","userGet","userListGet","chatGetResult","disk_folder_id","dialogMessagesGetResult","pullCommandHandler","getStore","dispatch","enableReadMessages","then","getLogTrackingParams","getDialogData","Promise","resolve","reject","getDialogHistory","lastId","_this2","arguments","undefined","callMethod","CHAT_ID","LAST_ID","LIMIT","CONVERT_TEXT","$emit","count","messages","catch","ex","getDialogUnread","_this3","promiseGetDialogUnreadWait","promiseGetDialogUnread","error_description","readMessage","_query2","imDialogRead","message_id","imDialogMessagesGetUnread","chat_id","first_id","dialogMessageUnread","firstMessageId","fulfill","logEvent","_len","Array","_key","Logger","info","apply","concat","onDialogRequestHistory","event","onDialogRequestUnread","onDialogMessageClickByUserName","replyToUser","onDialogMessageClickByUploadCancel","cancelUploadFile","file","onDialogMessageClickByCommand","type","insertText","value","addMessage","warn","onDialogMessageClickByMention","openProfile","openDialog","openPhoneMenu","onDialogMessageMenuClick","openMessageMenu","onDialogMessageRetryClick","retrySendMessage","onDialogReadMessage","onDialogReadedListClick","openReadedList","list","onDialogQuoteMessage","quoteMessage","onDialogMessageReactionSet","reactMessage","reaction","onDialogMessageReactionListOpen","openMessageReactionList","values","onDialogMessageClickByKeyboardButton","execMessageKeyboardCommand","onDialogMessageClickByChatTeaser","execMessageOpenChatTeaser","onDialogClick","onQuotePanelClose","quoteMessageClear","template","Messenger","Lib","Const"],"mappings":"AAAAA,KAAKC,GAAKD,KAAKC,QACd,SAAUC,EAAQC,EAAOC,EAAYC,EAAcC,EAASC,GAC5D,aAcAJ,EAAOK,IAAIC,UAAU,0BACnBC,OACEC,QACEC,QAAS,GAEXC,QACED,QAAS,GAEXE,UACEF,QAAS,GAEXG,oBACEH,QAAS,MAEXI,6BACEJ,QAAS,MAEXK,mBACEL,QAAS,OAEXM,qBACEN,QAAS,MAEXO,mBACEP,QAAS,MAEXQ,2BACER,QAAS,IAEXS,2BACET,QAAS,IAEXU,0BACEV,QAAS,IAEXW,6BACEX,QAAS,KAGbY,KAAM,SAASA,IACb,OACEC,YAAa,UACbC,mBAAoB,EACpBC,aAAc,EACdC,oBAAqB5B,KAAKoB,0BAC1BS,oBAAqB7B,KAAKqB,0BAC1BS,mBAAoB9B,KAAKsB,yBACzBS,sBAAuB/B,KAAKuB,8BAGhCS,QAAS,SAASA,IAChB,IAAKhC,KAAKoB,0BAA2B,CACnCpB,KAAK4B,oBAAsBtB,EAAS2B,UAAUC,OAAOC,eAGvD,IAAKnC,KAAKqB,0BAA2B,CACnCrB,KAAK6B,oBAAsBvB,EAAS2B,UAAUC,OAAOE,qBAGvD,IAAKpC,KAAKsB,yBAA0B,CAClCtB,KAAK8B,mBAAqBxB,EAAS2B,UAAUC,OAAOG,oBAGtD,IAAKrC,KAAKuB,4BAA6B,CACrCvB,KAAK+B,sBAAwBzB,EAAS2B,UAAUC,OAAOI,iBAGzDtC,KAAKuC,eAEPC,OACE1B,SAAU,SAASA,IACjBd,KAAKuC,gBAGTE,SAAUC,aAAaC,cACrBV,UAAW,SAASA,IAClB,OAAO3B,EAAS2B,WAElBW,SAAU,SAASA,IACjB,OAAOC,OAAOC,UAAW3C,EAAOK,IAAIuC,mBAAmB,eAAgB/C,KAAKgD,MAAMC,iBAAkB9C,EAAOK,IAAIuC,mBAAmB,YAAa/C,KAAKgD,MAAMC,mBAE5JC,gBAAiB,SAASA,EAAgBC,GACxC,IAAIC,GAAa,yBAEjB,GAAIpD,KAAKqD,kBAAmB,CAC1BD,EAAUE,KAAK,4BAGjB,OAAOF,EAAUG,KAAK,MAExBC,eAAgB,SAASA,IACvB,IAAIC,GACFC,GAAI,EACJC,MAAO,GACPC,YAAa,GACbC,MAAO,IAGT,IAAK7D,KAAKqD,oBAAsBrD,KAAKkC,OAAO4B,QAAS,CACnD,OAAOL,EAGT,IAAIM,EAAU/D,KAAKgE,OAAOC,QAAQ,uBAAuBjE,KAAKkC,OAAOvB,OAAQX,KAAKkC,OAAO4B,SAEzF,IAAKC,EAAS,CACZ,OAAON,EAGT,IAAIS,EAAOlE,KAAKgE,OAAOC,QAAQ,aAAaF,EAAQI,UACpD,IAAIC,EAAQpE,KAAKgE,OAAOC,QAAQ,iBAAiBjE,KAAKkC,OAAOvB,QAC7D,OACE+C,GAAI1D,KAAKkC,OAAO4B,QAChBH,MAAOI,EAAQM,OAAOC,KAAOP,EAAQM,OAAOC,KAAOJ,EAAOA,EAAKK,KAAO,GACtEV,MAAOK,EAAOA,EAAKL,MAAQ,GAC3BD,YAAarD,EAAaiE,MAAMC,KAAKC,OAAOX,EAAQU,KAAMV,EAAQM,OAAQD,EAAOpE,KAAK4C,YAG1F+B,SAAU,SAASA,IACjB,OAAOpE,EAAaiE,MAAMtC,OAAO0C,SAAS5E,KAAKkC,OAAOpB,WAExD+D,wBAAyB,SAASA,IAChC,OAAO,OAETC,iBAAkB,SAASA,IACzB,OAAO9E,KAAK+E,YAAYC,QAAQC,gBAElC5B,kBAAmB,SAASA,IAC1B,IAAII,EAASzD,KAAKkF,mBAAqBlF,KAAKkF,kBAAkBC,OAAS,EAEvE,GAAI1B,EAAQ,CACVzD,KAAKyB,YAAc,YACd,GAAIzB,KAAKkC,QAAUlC,KAAKkC,OAAOkD,KAAM,CAC1CpF,KAAKyB,YAAc,YACd,CACLzB,KAAKyB,YAAc,UAGrB,OAAOgC,GAETvB,OAAQ,SAASA,IACf,IAAIA,EAASlC,KAAKgE,OAAOC,QAAQ,iBAAiBjE,KAAK+E,YAAY7C,OAAOpB,UAC1E,OAAOoB,EAASA,EAASlC,KAAKgE,OAAOC,QAAQ,yBAE/CiB,kBAAmB,SAASA,IAC1B,OAAOlF,KAAKgE,OAAOC,QAAQ,gBAAgBjE,KAAK+E,YAAY7C,OAAOvB,UAEpEP,EAAYiF,KAAKC,UAClBP,YAAa,SAASA,EAAY5B,GAChC,OAAOA,EAAM4B,gBAGjBQ,SACEhD,YAAa,SAASA,IACpB,IAAIiD,EACAC,EAAQzF,KAEZ0F,QAAQC,IAAI,kBAEZ,IAAIC,GAASJ,KAAa9C,aAAamD,eAAeL,EAAQlF,EAASwF,kBAAkBC,uBAAwBzF,EAAS0F,WAAWD,2BAA6BrD,aAAamD,eAAeL,EAAQlF,EAASwF,kBAAkBG,WAAY3F,EAAS0F,WAAWC,WAC/PC,UAAWlG,KAAKc,YACb4B,aAAamD,eAAeL,EAAQlF,EAASwF,kBAAkBK,yBAA0B7F,EAAS0F,WAAWI,qBAChHF,UAAWlG,KAAKc,SAChBuF,MAAOrG,KAAKgD,MAAMsD,kBAAkBvB,YAAYwB,yBAChDC,aAAc,OACXhB,GAEL,GAAIjF,EAAaiE,MAAMtC,OAAO0C,SAAS5E,KAAKc,UAAW,CACrD8E,EAAMtF,EAASwF,kBAAkBW,YAAcnG,EAAS0F,WAAWS,kBAC9D,CACLb,EAAMtF,EAASwF,kBAAkBY,gBAAkBpG,EAAS0F,WAAWU,eACrEhD,IAAK1D,KAAKa,OAAQb,KAAKc,YAI3Bd,KAAKgD,MAAMsD,kBAAkBK,WAAWC,UAAUhB,EAAO,SAAUiB,GACjE,IAAKA,EAAU,CAGb,OAAO,MAGT,IAAIC,EAAWD,EAASvG,EAASwF,kBAAkBC,uBAEnD,GAAIe,EAASC,aAAgB,CAC3BtB,EAAMzC,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBC,sBAAuBe,GAGpG,IAAIG,EAAUJ,EAASvG,EAASwF,kBAAkBW,WAElD,GAAIQ,IAAYA,EAAQF,QAAS,CAC/BtB,EAAMzC,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBW,UAAWQ,GAGxF,IAAIC,EAAcL,EAASvG,EAASwF,kBAAkBY,eAEtD,GAAIQ,IAAgBA,EAAYH,QAAS,CACvCtB,EAAMzC,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBY,cAAeQ,GAG5F,IAAIC,EAAgBN,EAASvG,EAASwF,kBAAkBG,WAExD,IAAKkB,EAAcJ,QAAS,CAC1BtB,EAAM9D,aAAewF,EAAc3F,OAAOkC,GAC1C+B,EAAM/D,mBAAqByF,EAAc3F,OAAO4F,eAIlD3B,EAAMzC,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBG,UAAWkB,GAEtF,IAAIE,EAA0BR,EAASvG,EAASwF,kBAAkBK,yBAElE,GAAIkB,EAAwBN,aAAgB,CAM1C,GAAItB,EAAMzC,MAAMsD,kBAAkBgB,oBAElC7B,EAAMzC,MAAMsD,kBAAkBiB,WAAWC,SAAS,mBAChDtF,QACEuF,mBAAoB,QAErBC,KAAK,WACNjC,EAAMzC,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBK,wBAAyBkB,OAKvG,MAAO,MAAO9G,EAAaiE,MAAMmD,sBAClCpD,KAAM,YACNrC,OAAQlC,KAAKgD,MAAMsD,kBAAkBvB,YAAY6C,mBAEnD,OAAO,IAAIC,QAAQ,SAAUC,EAASC,GACpC,OAAOD,OAGXE,iBAAkB,SAASA,EAAiBC,GAC1C,IAAIC,EAASlI,KAEb,IAAIqG,EAAQ8B,UAAUhD,OAAS,GAAKgD,UAAU,KAAOC,UAAYD,UAAU,GAAKnI,KAAKgD,MAAMsD,kBAAkBvB,YAAYwB,yBACzHvG,KAAKgD,MAAMsD,kBAAkBK,WAAW0B,WAAW/H,EAAS0F,WAAWI,qBACrEkC,QAAWtI,KAAK2B,aAChB4G,QAAWN,EACXO,MAASnC,EACToC,aAAgB,MACff,KAAK,SAAUjE,GAChByE,EAAOlF,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBM,oBAAqB3C,GAEjGyE,EAAOlF,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOE,sBAC3CuG,MAAOlF,EAAOjC,OAAOoH,SAASzD,WAE/B0D,MAAM,SAAUpF,GACjByE,EAAOlF,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOE,sBAC3C2E,MAAOtD,EAAOsD,QAAQ+B,QAI5BC,gBAAiB,SAASA,EAAgBd,GACxC,IAAIe,EAAShJ,KAEb,IAAIqG,EAAQ8B,UAAUhD,OAAS,GAAKgD,UAAU,KAAOC,UAAYD,UAAU,GAAKnI,KAAKgD,MAAMsD,kBAAkBvB,YAAYwB,yBAEzH,GAAIvG,KAAKiJ,2BAA4B,CACnC,OAAOjJ,KAAKkJ,uBAGdlJ,KAAKkJ,uBAAyB,IAAIjJ,GAAG4H,QACrC7H,KAAKiJ,2BAA6B,KAElC,IAAKhB,EAAQ,CACXA,EAASjI,KAAKgD,MAAMsD,kBAAkBiB,WAAWtD,QAAQ,sBAAsBjE,KAAK2B,cAGtF,IAAKsG,EAAQ,CACXjI,KAAKgD,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOG,qBACzC0E,OACEA,MAAO,gBACPoC,kBAAmB,sBAGvBnJ,KAAKkJ,uBAAuBnB,SAC5B/H,KAAKiJ,2BAA6B,MAClC,OAAOjJ,KAAKkJ,uBAGdlJ,KAAKgD,MAAMsD,kBAAkBvB,YAAYqE,YAAYnB,EAAQ,KAAM,MAAMP,KAAK,WAC5E,IAAI2B,EAMJ,IAAIzD,GAASyD,KAAc3G,aAAamD,eAAewD,EAAS/I,EAASwF,kBAAkBwD,cAAehJ,EAAS0F,WAAWsD,cAC5HpD,UAAW8C,EAAOlI,SAClByI,WAAYtB,KACTvF,aAAamD,eAAewD,EAAS/I,EAASwF,kBAAkBG,WAAY3F,EAAS0F,WAAWC,WACnGC,UAAW8C,EAAOlI,YACf4B,aAAamD,eAAewD,EAAS/I,EAASwF,kBAAkB0D,2BAA4BlJ,EAAS0F,WAAWI,qBACnHqD,QAAST,EAAOrH,aAChB+H,SAAUzB,EACV5B,MAAOA,EACPG,aAAc,OACX6C,GAELL,EAAOhG,MAAMsD,kBAAkBK,WAAWC,UAAUhB,EAAO,SAAUiB,GACnE,IAAKA,EAAU,CACbmC,EAAOhG,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOG,qBAC3C0E,OACEA,MAAO,iBACPoC,kBAAmB,wCAIvBH,EAAOE,uBAAuBnB,SAE9BiB,EAAOC,2BAA6B,MACpC,OAAO,MAGT,IAAI9B,EAAgBN,EAASvG,EAASwF,kBAAkBG,WAExD,IAAKkB,EAAcJ,QAAS,CAC1BiC,EAAOhG,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkBG,UAAWkB,GAGzF,IAAIwC,EAAsB9C,EAASvG,EAASwF,kBAAkB0D,2BAE9D,GAAIG,EAAoB5C,QAAS,CAC/BiC,EAAOhG,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOG,qBAC3C0E,MAAO4C,EAAoB5C,QAAQ+B,SAEhC,CACLE,EAAOhG,MAAMsD,kBAAkBU,kBAAkB1G,EAASwF,kBAAkB0D,0BAA2BG,GAEvGX,EAAOhG,MAAM0F,MAAMpI,EAAS2B,UAAUC,OAAOG,qBAC3CuH,eAAgBD,EAAoBnI,OAAOoH,SAASzD,OAAS,EAAIwE,EAAoBnI,OAAOoH,SAAS,GAAGlF,GAAK,EAC7GiF,MAAOgB,EAAoBnI,OAAOoH,SAASzD,SAM/C6D,EAAOE,uBAAuBW,QAAQhD,GAEtCmC,EAAOC,2BAA6B,OACnC,MAAO,MAAO1I,EAAaiE,MAAMmD,sBAClCpD,KAAMjE,EAASwF,kBAAkB0D,0BACjCtH,OAAQ8G,EAAOhG,MAAMsD,kBAAkBvB,YAAY6C,qBAGvD,OAAO5H,KAAKkJ,wBAEdY,SAAU,SAASA,EAASvF,GAC1B,IAAK,IAAIwF,EAAO5B,UAAUhD,OAAQd,EAAS,IAAI2F,MAAMD,EAAO,EAAIA,EAAO,EAAI,GAAIE,EAAO,EAAGA,EAAOF,EAAME,IAAQ,CAC5G5F,EAAO4F,EAAO,GAAK9B,UAAU8B,GAG/B5J,EAAc6J,OAAOC,KAAKC,MAAM/J,EAAc6J,QAAS3F,GAAM8F,OAAOhG,KAEtEiG,uBAAwB,SAASA,EAAuBC,GACtDvK,KAAKgI,iBAAiBuC,EAAMtC,SAE9BuC,sBAAuB,SAASA,EAAsBD,GACpDvK,KAAK+I,gBAAgBwB,EAAMtC,SAE7BwC,+BAAgC,SAASA,EAA+BF,GACtEvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY2F,YAAYH,EAAMrG,KAAKR,GAAI6G,EAAMrG,OAE5EyG,mCAAoC,SAASA,EAAmCJ,GAC9EvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY6F,iBAAiBL,EAAMM,KAAKnH,KAEvEoH,8BAA+B,SAASA,EAA8BP,GACpE,GAAIA,EAAMQ,OAAS,MAAO,CACxB/K,KAAKgD,MAAMsD,kBAAkBvB,YAAYiG,YACvCvG,KAAM8F,EAAMU,MAAQ,WAEjB,GAAIV,EAAMQ,OAAS,OAAQ,CAChC/K,KAAKgD,MAAMsD,kBAAkBvB,YAAYmG,WAAWX,EAAMU,WACrD,CACL5K,EAAc6J,OAAOiB,KAAK,sBAAuBZ,KAGrDa,8BAA+B,SAASA,EAA8Bb,GACpE,GAAIA,EAAMQ,OAAS,OAAQ,CACzB/K,KAAKgD,MAAMsD,kBAAkBvB,YAAYsG,YAAYd,EAAMU,YACtD,GAAIV,EAAMQ,OAAS,OAAQ,CAChC/K,KAAKgD,MAAMsD,kBAAkBvB,YAAYuG,WAAWf,EAAMU,YACrD,GAAIV,EAAMQ,OAAS,OAAQ,CAChC/K,KAAKgD,MAAMsD,kBAAkBvB,YAAYwG,cAAchB,EAAMU,SAGjEO,yBAA0B,SAASA,EAAyBjB,GAC1DlK,EAAc6J,OAAOiB,KAAK,gBAAiBZ,GAC3CvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY0G,gBAAgBlB,EAAMxG,UAEjE2H,0BAA2B,SAASA,EAA0BnB,GAC5DlK,EAAc6J,OAAOiB,KAAK,iBAAkBZ,GAC5CvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY4G,iBAAiBpB,EAAMxG,UAElE6H,oBAAqB,SAASA,EAAoBrB,GAChDvK,KAAKgD,MAAMsD,kBAAkBvB,YAAYqE,YAAYmB,EAAM7G,KAE7DmI,wBAAyB,SAASA,EAAwBtB,GACxDvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY+G,eAAevB,EAAMwB,OAEhEC,qBAAsB,SAASA,EAAqBzB,GAClDvK,KAAKgD,MAAMsD,kBAAkBvB,YAAYkH,aAAa1B,EAAMxG,QAAQL,KAEtEwI,2BAA4B,SAASA,EAA2B3B,GAC9DvK,KAAKgD,MAAMsD,kBAAkBvB,YAAYoH,aAAa5B,EAAMxG,QAAQL,GAAI6G,EAAM6B,WAEhFC,gCAAiC,SAASA,EAAgC9B,GACxEvK,KAAKgD,MAAMsD,kBAAkBvB,YAAYuH,wBAAwB/B,EAAMxG,QAAQL,GAAI6G,EAAMgC,SAE3FC,qCAAsC,SAASA,EAAqCjC,GAClFvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY0H,2BAA2BlC,IAEtEmC,iCAAkC,SAASA,EAAiCnC,GAC1EvK,KAAKgD,MAAMsD,kBAAkBvB,YAAY4H,0BAA0BpC,IAErEqC,cAAe,SAASA,EAAcrC,KACtCsC,kBAAmB,SAASA,IAC1B7M,KAAKgD,MAAMsD,kBAAkBwG,sBAGjCC,SAAU,ksJAzbb,CA4bG/M,KAAKC,GAAG+M,UAAYhN,KAAKC,GAAG+M,cAAiB/M,GAAGA,GAAGA,GAAG+M,UAAUC,IAAIhN,GAAG+M,UAAUE,MAAMjN,GAAG+M,UAAUC","file":"dialog.bundle.map.js"}