{"version":3,"sources":["textarea.bundle.js"],"names":["exports","ui_vue","im_tools_localstorage","im_utils","Vue","component","props","siteId","default","userId","dialogId","enableCommand","enableMention","desktopMode","enableEdit","enableFile","sendByEnter","autoFocus","writesEventLetter","styles","type","Object","_default","listenEventInsertText","listenEventFocus","listenEventBlur","data","placeholderMessage","currentMessage","previousMessage","commandListen","mentionListen","stylesDefault","freeze","button","backgroundColor","iconColor","created","this","event","$on","onInsertText","$root","onFocusSet","onFocusClear","localStorage","LocalStorage","textareaHistory","get","beforeDestroy","$off","clearTimeout","messageStoreTimeout","set","computed","textareaClassName","Utils","device","isMobile","buttonStyle","assign","isIconDark","isDarkColor","className","style","localize","getFilteredPhrases","$bitrixMessages","directives","bx-im-focus","inserted","element","params","value","focus","methods","insertText","text","breakline","arguments","length","undefined","position","cursor","textarea","$refs","selectionStart","selectionEnd","substring","trim","textChangeEvent","sendMessage","$emit","_this","previousSelectionStart","previousSelectionEnd","toString","setTimeout","onKeyDown","target","isMac","platform","isCtrlTEnable","isBitrixDesktop","browser","isChrome","altKey","ctrlKey","shiftKey","keyCode","document","activeElement","preventDefault","stopPropagation","metaKey","key","includes","tagStart","toLowerCase","tagEnd","selected","startsWith","endsWith","indexOf","onKeyUp","onPaste","$nextTick","onInput","onFocus","onBlur","onAppButtonClick","appId","blur","onFileClick","onFileSelect","fileInput","template","window","BX","Messenger"],"mappings":"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","file":"textarea.bundle.map.js"}