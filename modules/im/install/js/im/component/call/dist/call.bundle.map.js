{"version":3,"sources":["call.bundle.js"],"names":["this","BX","exports","ui_vue_vuex","im_lib_logger","im_const","im_view_textarea","ui_vue_components_smiles","ui_vue","Vue","cloneComponent","methods","hideForm","event","$parent","hideSmiles","template","MicLevel","props","data","bars","barDisabledColor","barEnabledColor","watch","micId","newId","startAudioCheck","mounted","babelHelpers","toConsumableArray","document","querySelectorAll","_this","navigator","mediaDevices","getUserMedia","audio","deviceId","exact","then","stream","audioContext","window","AudioContext","webkitAudioContext","analyser","createAnalyser","microphone","createMediaStreamSource","scriptNode","createScriptProcessor","smoothingTimeConstant","fftSize","connect","destination","onaudioprocess","processVolume","_this2","arr","Uint8Array","frequencyBinCount","getByteFrequencyData","values","i","length","average","oneBarValue","barsToColor","Math","round","elementsToColor","slice","forEach","elem","style","backgroundColor","component","cameraList","microphoneList","audioOutputList","defaultDevices","camera","audioOutput","currentlySelected","defaultOptions","preferHDQuality","enableMicAutoParameters","selectedOptions","noVideo","created","Call","Hardware","preferHdQuality","getDefaultDevices","getVideoFromCamera","currentCamera","computed","localize","getFilteredPhrases","$root","$bitrixMessages","defaultCamera","video","getVideoTracks","getSettings","catch","e","console","warn","defaultMicrophone","getAudioTracks","defaultSpeaker","id","width","height","$refs","volume","srcObject","play","save","changedValues","isEmptyObject","$emit","exit","obj","Object","keys","components","popupModes","freeze","preparation","checkDevices","chatId","default","userNewName","isSettingNewName","popupMode","addEventListener","onBeforeUnload","bind","showChat","newValue","$nextTick","user","userHasRealName","nameInput","focus","dialogInited","$bitrixApplication","setDialogInited","objectSpread","userId","application","common","dialogId","dialog","init","dialogName","name","userInited","callApplication","inited","userCounter","userCount","userInCallCounter","userInCallCount","isPreparationStep","state","CallStateType","isPopupPreparation","isPopupCheckDevices","callError","noSignalFromCamera","CallErrorCode","newNameButtonClasses","ui-btn-wait","ui-btn-disabled","startCallButtonClasses","reloadButtonClasses","checkDevicesButtonClasses","Vuex","mapState","users","collection","dialogues","onNewNameButtonClick","trim","setUserName","onCloseChat","toggleChat","reloadPage","location","reload","onTextareaSend","text","showSmiles","$store","commit","addMessage","onTextareaFileSelected","fileInput","files","size","disk","maxFileSize","uploadFile","onTextareaWrites","$bitrixController","startWriting","startCall","onTextareaAppButtonClick","appId","message","returnValue","onSmilesSelectSmile","onSmilesSelectSet","onCheckDevicesSave","onCheckDevicesExit","Messenger","Lib","Const"],"mappings":"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","file":"call.bundle.map.js"}