{"version":3,"file":"conference-create.bundle.js","sources":["../src/conference-create.js"],"sourcesContent":["import { ajax as Ajax, Reflection, Runtime } from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Logger} from \"im.lib.logger\";\nimport {Clipboard} from \"im.lib.clipboard\";\nimport \"ui.vue.components.hint\";\n\nimport \"./conference-create.css\";\n\nBitrixVue.component('bx-im-component-conference-create',\n{\n\tprops: ['userId', 'darkTheme', 'broadcastingEnabled'],\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tdefaultTitle: '',\n\t\t\tbroadcastMode: false,\n\t\t\tlinkGenerated: false,\n\t\t\taliasData: null,\n\t\t\tuserSelectorLoaded: false,\n\t\t\tuserSelector: null,\n\t\t\tselectedUsers: [],\n\t\t\tselectedPresenters: [],\n\t\t\tchatId: null,\n\t\t\terrors: []\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.checkRequirements();\n\t\tthis.selectedUsers.push(this.userId);\n\t\tthis.selectedPresenters.push(this.userId);\n\t\tthis.generateLink();\n\t},\n\tmounted()\n\t{\n\t\tthis.initUserSelector().then(() => {\n\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\tthis.initPresenterSelector();\n\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs['titleInput'].focus();\n\t\t\t});\n\t\t});\n\t},\n\tcomputed:\n\t{\n\t\tconferenceLink()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.aliasData['LINK'];\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LINK_LOADING'];\n\t\t},\n\t\tdefaultTitlePlaceholder()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.defaultTitle;\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PLACEHOLDER_TITLE_2'];\n\t\t},\n\t\tcontainerClasses()\n\t\t{\n\t\t\tconst classes = ['bx-conference-quick-create-wrap'];\n\n\t\t\tif (this.darkTheme)\n\t\t\t{\n\t\t\t\tclasses.push('bx-conference-quick-create-wrap-dark');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tstartButtonClasses()\n\t\t{\n\t\t\tconst classes = ['ui-btn', 'ui-btn-primary', 'bx-conference-quick-create-button-start'];\n\n\t\t\tif (!this.userSelectorLoaded)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled');\n\t\t\t}\n\t\t\treturn classes;\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn BX.message;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgenerateLink()\n\t\t{\n\t\t\tAjax.runAction('im.conference.prepare', {\n\t\t\t\tjson: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.aliasData = response.data['ALIAS_DATA'];\n\t\t\t\tthis.defaultTitle = response.data['DEFAULT_TITLE'];\n\t\t\t\tthis.linkGenerated = true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tLogger.warn('error', response[\"errors\"][0].message);\n\t\t\t});\n\t\t},\n\t\tcopyLink()\n\t\t{\n\t\t\tif (this.linkGenerated && Reflection.getClass('BX.UI.Notification.Center'))\n\t\t\t{\n\t\t\t\tClipboard.copy(this.aliasData['LINK']);\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_COPY_CONFIRMATION']\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tstartConference()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\tconst fieldsToSubmit = {};\n\n\t\t\t\tfieldsToSubmit['title'] = this.title;\n\t\t\t\tfieldsToSubmit['id'] = 0;\n\t\t\t\tfieldsToSubmit['password_needed'] = false;\n\t\t\t\tfieldsToSubmit['users'] = this.selectedUsers;\n\t\t\t\tfieldsToSubmit['broadcast_mode'] = this.broadcastMode;\n\t\t\t\tfieldsToSubmit['presenters'] = this.selectedPresenters;\n\n\t\t\t\tthis.clearErrors();\n\t\t\t\tAjax.runAction('im.conference.create', {\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tfields: fieldsToSubmit,\n\t\t\t\t\t\taliasData: this.aliasData\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onSuccessfulSubmit(response);\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.onFailedSubmit(response);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tcancelCreation()\n\t\t{\n\t\t\tif (BXIM && BXIM.messenger)\n\t\t\t{\n\t\t\t\tBXIM.messenger.extraClose();\n\t\t\t}\n\t\t},\n\t\topenChat()\n\t\t{\n\t\t\tif (window.top[\"BXIM\"] && this.chatId)\n\t\t\t{\n\t\t\t\twindow.top[\"BXIM\"].openMessenger('chat' + this.chatId);\n\t\t\t}\n\t\t},\n\t\tinitUserSelector()\n\t\t{\n\t\t\treturn Runtime.loadExtension('ui.entity-selector').then((exports) => {\n\t\t\t\tthis.TagSelector = exports.TagSelector;\n\t\t\t\tthis.userSelectorLoaded = true;\n\n\t\t\t\tthis.userSelector = new this.TagSelector({\n\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tundeselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserSelect(event);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserDeselect(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tzIndex: 4000\n\t\t\t\t\t},\n\t\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tinitPresenterSelector()\n\t\t{\n\t\t\tthis.presenterSelector = new this.TagSelector({\n\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterSelect(event);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterDeselect(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t],\n\t\t\t\t\tzIndex: 4000\n\t\t\t\t},\n\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t});\n\t\t},\n\t\tcheckRequirements()\n\t\t{\n\t\t\tif (!BX.PULL.isPublishingEnabled())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PUSH_ERROR']);\n\t\t\t}\n\n\t\t\tif (!BX.Call.Util.isCallServerAllowed())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_VOXIMPLANT_ERROR']);\n\t\t\t}\n\t\t},\n\t\taddError(errorText)\n\t\t{\n\t\t\tthis.errors.push(errorText);\n\t\t},\n\t\tclearErrors()\n\t\t{\n\t\t\tthis.errors = [];\n\t\t},\n\t\tdisableButton()\n\t\t{\n\t\t\tthis.startButtonClasses.push('ui-btn-disabled', 'ui-btn-icon-lock');\n\t\t},\n\t\tonUserSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonUserDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonPresenterSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonPresenterDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonSuccessfulSubmit(response)\n\t\t{\n\t\t\tthis.chatId = response.data['CHAT_ID'];\n\t\t\tthis.openChat();\n\t\t\tif (BXIM)\n\t\t\t{\n\t\t\t\tBXIM.openVideoconf(this.aliasData['ALIAS']);\n\t\t\t}\n\t\t},\n\t\tonFailedSubmit(response)\n\t\t{\n\t\t\tlet errorMessage = response[\"errors\"][0].message;\n\t\t\tif (response[\"errors\"][0].code === 'NETWORK_ERROR')\n\t\t\t{\n\t\t\t\terrorMessage = this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_NETWORK_ERROR'];\n\t\t\t}\n\t\t\tthis.addError(errorMessage);\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<div :class=\"containerClasses\">\n\t\t\t<div class=\"bx-conference-quick-create-content\">\n\t\t\t\t<!-- Title -->\n\t\t\t\t<div class=\"bx-conference-quick-create-title\">\n\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_HEADER_TITLE'] }}\n\t\t\t\t</div>\n\t\t\t\t<!-- Errors -->\n\t\t\t\t<template v-if=\"errors.length > 0\">\n\t\t\t\t\t<div class=\"ui-alert ui-alert-danger bx-conference-quick-create-error-wrap\">\n\t\t\t\t\t\t<span v-for=\"error in errors\" class=\"ui-alert-message\">{{ error }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Title field -->\n\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_TITLE'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<input\n\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t:placeholder=\"defaultTitlePlaceholder\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"bx-conference-quick-create-field-input\"\n\t\t\t\t\t\tref=\"titleInput\"\n\t\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<!-- User selector field -->\n\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_USERS'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<template v-if=\"userSelectorLoaded\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"userSelector\"></div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_USERS_LOADING']\" disabled>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t\t<!-- Broadcast mode field -->\n\t\t\t\t<template v-if=\"broadcastingEnabled\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block-inline\">\n\t\t\t\t\t\t<input type=\"checkbox\" id=\"bx-conference-quick-create-field-broadcast-mode\" v-model=\"broadcastMode\">\n\t\t\t\t\t\t<label class=\"bx-conference-quick-create-field-label bx-conference-quick-create-broadcast-mode-label\" for=\"bx-conference-quick-create-field-broadcast-mode\">{{ localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE'] }}</label>\n\t\t\t\t\t\t<bx-hint :text=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE_HINT']\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Presenter selector field -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\" v-show=\"broadcastMode\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PRESENTERS'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"presenterSelector\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Link field -->\n\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_LINK'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-conference-quick-create-link-wrap\">\n\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"conferenceLink\" disabled>\n\t\t\t\t\t\t<div @click=\"copyLink\" class=\"bx-conference-quick-create-link-copy\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- Create button -->\n\t\t\t\t<div class=\"bx-conference-quick-create-button\">\n\t\t\t\t\t<button @click=\"startConference\" :class=\"startButtonClasses\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_START'] }}</button>\n\t\t\t\t\t<button @click=\"cancelCreation\" class=\"ui-btn ui-btn-link bx-conference-quick-create-button-cancel\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_CANCEL'] }}</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["BitrixVue","component","props","data","title","defaultTitle","broadcastMode","linkGenerated","aliasData","userSelectorLoaded","userSelector","selectedUsers","selectedPresenters","chatId","errors","created","checkRequirements","push","userId","generateLink","mounted","initUserSelector","then","renderTo","$refs","initPresenterSelector","presenterSelector","$nextTick","focus","computed","conferenceLink","localize","defaultTitlePlaceholder","containerClasses","classes","darkTheme","startButtonClasses","BX","message","methods","Ajax","runAction","json","analyticsLabel","creationType","response","catch","Logger","warn","copyLink","Reflection","getClass","Clipboard","copy","top","UI","Notification","Center","notify","content","startConference","fieldsToSubmit","clearErrors","fields","onSuccessfulSubmit","onFailedSubmit","cancelCreation","BXIM","messenger","extraClose","openChat","window","openMessenger","Runtime","loadExtension","exports","TagSelector","id","dialogOptions","preselectedItems","undeselectedItems","events","event","onUserSelect","onUserDeselect","entities","options","inviteEmployeeLink","zIndex","addButtonCaption","addButtonCaptionMore","onPresenterSelect","onPresenterDeselect","PULL","isPublishingEnabled","disableButton","addError","Call","Util","isCallServerAllowed","errorText","index","findIndex","item","splice","openVideoconf","errorMessage","code","template"],"mappings":"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"}