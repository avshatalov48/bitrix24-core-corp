{"version":3,"file":"conference-create.bundle.js","sources":["../src/conference-create.js"],"sourcesContent":["import { ajax as Ajax, Reflection, Runtime } from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Logger} from \"im.lib.logger\";\nimport {Clipboard} from \"im.lib.clipboard\";\nimport \"ui.vue.components.hint\";\n\nimport \"./conference-create.css\";\n\nBitrixVue.component('bx-im-component-conference-create',\n{\n\tprops: ['userId', 'darkTheme', 'broadcastingEnabled'],\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tdefaultTitle: '',\n\t\t\tbroadcastMode: false,\n\t\t\tlinkGenerated: false,\n\t\t\tisCreatingConference: false,\n\t\t\tconferenceCreated: false,\n\t\t\taliasData: null,\n\t\t\tuserSelectorLoaded: false,\n\t\t\tuserSelector: null,\n\t\t\tselectedUsers: [],\n\t\t\tselectedPresenters: [],\n\t\t\tchatId: null,\n\t\t\terrors: []\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.checkRequirements();\n\t\tthis.selectedUsers.push(this.userId);\n\t\tthis.selectedPresenters.push(this.userId);\n\t\tthis.generateLink();\n\t},\n\tmounted()\n\t{\n\t\tthis.initUserSelector().then(() => {\n\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\tthis.initPresenterSelector();\n\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs['titleInput'].focus();\n\t\t\t});\n\t\t});\n\t},\n\tcomputed:\n\t{\n\t\tconferenceLink()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.aliasData['LINK'];\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LINK_LOADING'];\n\t\t},\n\t\tdefaultTitlePlaceholder()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.defaultTitle;\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PLACEHOLDER_TITLE_2'];\n\t\t},\n\t\tcontainerClasses()\n\t\t{\n\t\t\tconst classes = ['bx-conference-quick-create-wrap'];\n\n\t\t\tif (this.darkTheme)\n\t\t\t{\n\t\t\t\tclasses.push('bx-conference-quick-create-wrap-dark');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tstartButtonClasses()\n\t\t{\n\t\t\tconst classes = ['ui-btn', 'ui-btn-primary'];\n\n\t\t\tif (!this.userSelectorLoaded)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled');\n\t\t\t}\n\n\t\t\tif (this.errors.length > 0)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled', 'ui-btn-icon-lock');\n\t\t\t}\n\n\t\t\tif (this.isCreatingConference)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-wait');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn BX.message;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgenerateLink()\n\t\t{\n\t\t\tAjax.runAction('im.conference.prepare', {\n\t\t\t\tjson: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.aliasData = response.data['ALIAS_DATA'];\n\t\t\t\tthis.defaultTitle = response.data['DEFAULT_TITLE'];\n\t\t\t\tthis.linkGenerated = true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tLogger.warn('error', response[\"errors\"][0].message);\n\t\t\t});\n\t\t},\n\t\tcopyLink()\n\t\t{\n\t\t\tif (this.linkGenerated && Reflection.getClass('BX.UI.Notification.Center'))\n\t\t\t{\n\t\t\t\tClipboard.copy(this.aliasData['LINK']);\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_COPY_CONFIRMATION']\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tsaveConference()\n\t\t{\n\t\t\tif (!this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst fieldsToSubmit = {\n\t\t\t\tid: 0,\n\t\t\t\ttitle: this.title,\n\t\t\t\tpassword_needed: false,\n\t\t\t\tusers: this.selectedUsers,\n\t\t\t\tbroadcast_mode: this.broadcastMode,\n\t\t\t\tpresenters: this.selectedPresenters\n\t\t\t};\n\n\t\t\tthis.clearErrors();\n\t\t\tthis.isCreatingConference = true;\n\t\t\tAjax.runAction('im.conference.create', {\n\t\t\t\tjson: {\n\t\t\t\t\tfields: fieldsToSubmit,\n\t\t\t\t\taliasData: this.aliasData\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.chatId = response.data['CHAT_ID'];\n\t\t\t\tthis.isCreatingConference = false;\n\t\t\t\tthis.conferenceCreated = true;\n\t\t\t\tthis.copyLink();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.isCreatingConference = false;\n\t\t\t\tthis.onFailedSubmit(response);\n\t\t\t});\n\t\t},\n\t\tstartConference()\n\t\t{\n\t\t\tthis.openChat();\n\t\t\tif (BXIM)\n\t\t\t{\n\t\t\t\tBXIM.openVideoconf(this.aliasData['ALIAS']);\n\t\t\t}\n\t\t},\n\t\tcancelCreation()\n\t\t{\n\t\t\tif (BXIM && BXIM.messenger)\n\t\t\t{\n\t\t\t\tBXIM.messenger.extraClose();\n\t\t\t}\n\t\t},\n\t\topenChat()\n\t\t{\n\t\t\tif (window.top[\"BXIM\"] && this.chatId)\n\t\t\t{\n\t\t\t\twindow.top[\"BXIM\"].openMessenger('chat' + this.chatId);\n\t\t\t}\n\t\t},\n\t\tinitUserSelector()\n\t\t{\n\t\t\treturn Runtime.loadExtension('ui.entity-selector').then((exports) => {\n\t\t\t\tthis.TagSelector = exports.TagSelector;\n\t\t\t\tthis.userSelectorLoaded = true;\n\n\t\t\t\tthis.userSelector = new this.TagSelector({\n\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tundeselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserSelect(event);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserDeselect(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tzIndex: 4000\n\t\t\t\t\t},\n\t\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tinitPresenterSelector()\n\t\t{\n\t\t\tthis.presenterSelector = new this.TagSelector({\n\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterSelect(event);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterDeselect(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t],\n\t\t\t\t\tzIndex: 4000\n\t\t\t\t},\n\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t});\n\t\t},\n\t\tcheckRequirements()\n\t\t{\n\t\t\tif (!BX.PULL.isPublishingEnabled())\n\t\t\t{\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PUSH_ERROR']);\n\t\t\t}\n\n\t\t\tif (!BX.Call.Util.isCallServerAllowed())\n\t\t\t{\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_VOXIMPLANT_ERROR_WITH_LINK']);\n\t\t\t}\n\t\t},\n\t\taddError(errorText)\n\t\t{\n\t\t\tthis.errors.push(errorText);\n\t\t},\n\t\tclearErrors()\n\t\t{\n\t\t\tthis.errors = [];\n\t\t},\n\t\tonUserSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonUserDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonPresenterSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonPresenterDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonFailedSubmit(response)\n\t\t{\n\t\t\tlet errorMessage = response[\"errors\"][0].message;\n\t\t\tif (response[\"errors\"][0].code === 'NETWORK_ERROR')\n\t\t\t{\n\t\t\t\terrorMessage = this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_NETWORK_ERROR'];\n\t\t\t}\n\t\t\tthis.addError(errorMessage);\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<div :class=\"containerClasses\">\n\t\t\t<div class=\"bx-conference-quick-create-content\">\n\t\t\t\t<!-- Fields -->\n\t\t\t\t<template v-if=\"!conferenceCreated\">\n\t\t\t\t\t<!-- Title -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-title\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_HEADER_TITLE'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Errors -->\n\t\t\t\t\t<template v-if=\"errors.length > 0\">\n\t\t\t\t\t\t<div class=\"ui-alert ui-alert-danger bx-conference-quick-create-error-wrap\">\n\t\t\t\t\t\t\t<span v-for=\"error in errors\" class=\"ui-alert-message\" v-html=\"error\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<!-- Title field -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_TITLE'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t:placeholder=\"defaultTitlePlaceholder\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"bx-conference-quick-create-field-input\"\n\t\t\t\t\t\t\tref=\"titleInput\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- User selector field -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_USERS'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"userSelectorLoaded\">\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"userSelector\"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_USERS_LOADING']\" disabled>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Broadcast mode field -->\n\t\t\t\t\t<template v-if=\"broadcastingEnabled\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block-inline\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"bx-conference-quick-create-field-broadcast-mode\" v-model=\"broadcastMode\">\n\t\t\t\t\t\t\t<label class=\"bx-conference-quick-create-field-label bx-conference-quick-create-broadcast-mode-label\" for=\"bx-conference-quick-create-field-broadcast-mode\">{{ localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE'] }}</label>\n\t\t\t\t\t\t\t<bx-hint :text=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE_HINT']\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- Presenter selector field -->\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\" v-show=\"broadcastMode\">\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PRESENTERS'] }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"presenterSelector\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<!-- Confirmation -->\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-conference-quick-create-success-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-success-title\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_SUCCESS'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Link field -->\n\t\t\t\t<div v-if=\"conferenceCreated\" class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_LINK'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-conference-quick-create-link-wrap\">\n\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"conferenceLink\" disabled>\n\t\t\t\t\t\t<div @click=\"copyLink\" class=\"bx-conference-quick-create-link-copy\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- Create button -->\n\t\t\t\t<div class=\"bx-conference-quick-create-button-wrap\">\n\t\t\t\t\t<template v-if=\"!conferenceCreated\">\n\t\t\t\t\t\t<button @click=\"saveConference\" class=\"bx-conference-quick-create-button-save\" :class=\"startButtonClasses\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t<button @click=\"cancelCreation\" class=\"ui-btn ui-btn-link bx-conference-quick-create-button-cancel\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_CANCEL'] }}</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<button @click=\"startConference\" class=\"bx-conference-quick-create-button-start\" :class=\"startButtonClasses\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_START'] }}</button>\n\t\t\t\t\t\t<button @click=\"openChat\" class=\"ui-btn ui-btn-link bx-conference-quick-create-button-cancel\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_CLOSE'] }}</button>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["BitrixVue","component","props","data","title","defaultTitle","broadcastMode","linkGenerated","isCreatingConference","conferenceCreated","aliasData","userSelectorLoaded","userSelector","selectedUsers","selectedPresenters","chatId","errors","created","checkRequirements","push","userId","generateLink","mounted","initUserSelector","then","renderTo","$refs","initPresenterSelector","presenterSelector","$nextTick","focus","computed","conferenceLink","localize","defaultTitlePlaceholder","containerClasses","classes","darkTheme","startButtonClasses","length","BX","message","methods","Ajax","runAction","json","analyticsLabel","creationType","response","Logger","warn","copyLink","Reflection","getClass","Clipboard","copy","top","UI","Notification","Center","notify","content","saveConference","fieldsToSubmit","id","password_needed","users","broadcast_mode","presenters","clearErrors","fields","onFailedSubmit","startConference","openChat","BXIM","openVideoconf","cancelCreation","messenger","extraClose","window","openMessenger","Runtime","loadExtension","exports","TagSelector","dialogOptions","preselectedItems","undeselectedItems","events","event","onUserSelect","onUserDeselect","entities","options","inviteEmployeeLink","zIndex","addButtonCaption","addButtonCaptionMore","onPresenterSelect","onPresenterDeselect","PULL","isPublishingEnabled","addError","Call","Util","isCallServerAllowed","errorText","index","findIndex","item","splice","errorMessage","code","template"],"mappings":"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"}