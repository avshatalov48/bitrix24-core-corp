{"version":3,"file":"conference-edit.bundle.js","sources":["../src/fields/title.js","../src/fields/password.js","../src/fields/invitation.js","../src/fields/planner.js","../src/fields/broadcast.js","../src/conference-edit.js"],"sourcesContent":["import {ConferenceFieldState} from \"im.const\";\n\nexport const FieldTitle =\n\t{\n\t\tname: 'conference-field-title',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\ttitle: {type: String},\n\t\t\t\t\tdefaultValue: {type: String}\n\t\t\t\t},\n\t\t\t\tdata: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'title'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('titleChange', event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tonFocus(fieldName)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.name === fieldName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tthis.$refs['input'].focus();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$on('focus', this.onFocus);\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section\">\n\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-title\">{{ localize['BX_IM_COMPONENT_CONFERENCE_TITLE_LABEL'] }}</label>\n\t\t\t\t\t\t\t<div v-if=\"!isViewMode\" class=\"im-conference-create-field-title-container ui-ctl\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"im-conference-create-field-title\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:name=\"name\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"defaultValue\"\n\t\t\t\t\t\t\t\t\t:value=\"title\"\n\t\t\t\t\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ title }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import {ConferenceFieldState} from \"im.const\";\n\nexport const FieldPassword =\n\t{\n\t\tname: 'conference-field-password',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\tpassword: {type: String},\n\t\t\t\t\tpasswordNeeded: {type: Boolean}\n\t\t\t\t},\n\t\t\t\tdata: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'password'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t\t},\n\t\t\t\t\tcodedValue()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.passwordNeeded)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn `${this.localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_EXISTS']} (${this.password.replace(/./g, '*')})`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_NO_PASSWORD'];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('passwordChange', event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tonPasswordNeededChange()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('passwordNeededChange');\n\t\t\t\t\t},\n\t\t\t\t\tonFocus(fieldName)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.name === fieldName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tif (this.$refs['input'])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$refs['input'].focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$on('focus', this.onFocus);\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-password-section\">\n\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-password\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_LABEL'] }}</label>\n\t\t\t\t\t\t<template v-if=\"!isViewMode\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-field-inline\">\n\t\t\t\t\t\t\t\t<input @input=\"onPasswordNeededChange\" type=\"checkbox\" id=\"im-conference-create-field-password-checkbox\" :checked=\"passwordNeeded\">\n\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-password-checkbox\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_CHECKBOX_LABEL'] }}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"passwordNeeded\" class=\"im-conference-create-field-password-container ui-ctl\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"im-conference-create-field-password\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:name=\"name\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_PLACEHOLDER']\"\n\t\t\t\t\t\t\t\t\t:value=\"password\"\n\t\t\t\t\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div v-else @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ codedValue }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import {Text} from \"main.core\";\nimport {ConferenceFieldState} from \"im.const\";\n\nexport const FieldInvitation =\n\t{\n\t\tname: 'conference-field-invitation',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tinvitation: {type: Object},\n\t\t\t\t\tchatHost: {type: Object},\n\t\t\t\t\ttitle: {type: String},\n\t\t\t\t\tdefaultTitle: {type: String},\n\t\t\t\t\tpublicLink: {type: String},\n\t\t\t\t\tformMode: {type: String}\n\t\t\t\t},\n\t\t\t\tdata: function()\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tinitialValue: null,\n\t\t\t\t\t\teditedValue: null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.invitation.mode === ConferenceFieldState.view;\n\t\t\t\t\t},\n\t\t\t\t\tisFormCreateMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.formMode === ConferenceFieldState.create;\n\t\t\t\t\t},\n\t\t\t\t\tavatarClasses()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst classes = ['im-conference-create-invitation-user-avatar'];\n\n\t\t\t\t\t\tif (!this.chatHost.AVATAR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclasses.push('im-conference-create-invitation-user-avatar-default');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn classes;\n\t\t\t\t\t},\n\t\t\t\t\tavatarStyles()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst styles = {};\n\n\t\t\t\t\t\tif (this.chatHost.AVATAR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstyles.backgroundImage = `url(${this.chatHost.AVATAR})`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn styles;\n\t\t\t\t\t},\n\t\t\t\t\tformattedInvitation()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet title = this.title ? this.title : '';\n\n\t\t\t\t\t\tif (this.isFormCreateMode && !this.title)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle = this.defaultTitle;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.invitation.value\n\t\t\t\t\t\t\t.replace(/#CREATOR#/gm, Text.encode(this.chatHost.FULL_NAME))\n\t\t\t\t\t\t\t.replace(/#TITLE#/gm, `\"${Text.encode(title)}\"`)\n\t\t\t\t\t\t\t.replace(/#LINK#/gm, `<a href=\"${this.publicLink}\" target=\"_blank\">${this.publicLink}</a>`);\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tonEditClick()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst contentWidth = this.$refs['view'].offsetWidth;\n\t\t\t\t\t\tconst contentHeight = this.$refs['view'].offsetHeight;\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.edit;\n\t\t\t\t\t\tthis.invitation.value = Text.decode(this.invitation.value);\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.$refs['editor'].style.width = (contentWidth + 20) + 'px';\n\t\t\t\t\t\t\tthis.$refs['editor'].style.height = (contentHeight + 30) + 'px';\n\t\t\t\t\t\t\tthis.$refs['editor'].focus();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.initialValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.initialValue = this.invitation.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.editedValue =  Text.encode(event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tsaveChanges()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.editedValue && this.initialValue && this.initialValue !== this.editedValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = this.editedValue;\n\t\t\t\t\t\t\tthis.initialValue = null;\n\t\t\t\t\t\t\tthis.editedValue = null;\n\n\t\t\t\t\t\t\tthis.$emit('invitationUpdate', this.invitation.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.view;\n\t\t\t\t\t},\n\t\t\t\t\tdiscardChanges()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.initialValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = this.initialValue;\n\t\t\t\t\t\t\tthis.initialValue = null;\n\t\t\t\t\t\t\tthis.editedValue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.view;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tif (this.isFormCreateMode || !this.invitation.value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.invitation.value = this.localize['BX_IM_COMPONENT_CONFERENCE_DEFAULT_INVITATION'];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.isFormCreateMode && this.invitation.value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-invitation-title\">\n\t\t\t\t\t\t\t{{ localize['BX_IM_COMPONENT_CONFERENCE_INVITATION_TITLE'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-invitation-wrap\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-user\">\n\t\t\t\t\t\t\t\t<div :class=\"avatarClasses\" :style=\"avatarStyles\"></div>\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-user-name\">{{ chatHost.FIRST_NAME }}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-content\">\n\t\t\t\t\t\t\t\t<template v-if=\"isViewMode\">\n\t\t\t\t\t\t\t\t\t<div @click=\"onEditClick\" v-html=\"formattedInvitation\" contenteditable=\"false\" ref=\"view\" class=\"im-conference-create-invitation-content-text\"></div>\n\t\t\t\t\t\t\t\t\t<div @click=\"onEditClick\" class=\"im-conference-create-invitation-edit\"></div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<textarea @input=\"onInput\" :value=\"invitation.value\" class=\"im-conference-create-invitation-editor\" ref=\"editor\"></textarea>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button @click=\"saveChanges\" class=\"ui-btn ui-btn-sm ui-btn-primary\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t\t\t\t\t<button @click=\"discardChanges\" class=\"ui-btn ui-btn-sm ui-btn-light\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import { Reflection, ajax as Ajax } from \"main.core\";\nimport { TagSelector } from \"ui.entity-selector\";\nimport { Planner } from \"calendar.planner\";\nimport { Util } from \"calendar.util\";\nimport { ConferenceFieldState } from \"im.const\";\nimport { BaseEvent } from \"main.core.events\";\n\nexport const FieldPlanner =\n\t{\n\t\tname: 'conference-field-planner',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: {type: String},\n\t\t\t\t\t\tselectedUsers: {type: Array, default: []},\n\t\t\t\t\t\tchatHost: {type: Object, default: []},\n\t\t\t\t\t\tselectedDate: {type: String, default: ''},\n\t\t\t\t\t\tselectedTime: {type: String, default: ''},\n\t\t\t\t\t\tselectedDuration: {type: String, default: '30'},\n\t\t\t\t\t\tselectedDurationType: {type: String, default: 'm'}\n\t\t\t\t\t},\n\t\t\t\tdata: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'planner',\n\t\t\t\t\t\tclockInstance: null,\n\t\t\t\t\t\tplanner: null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t\t{\n\t\t\t\t\t\tisViewMode()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserListForPlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.selectedUsers.map(user => {\n\t\t\t\t\t\t\t\treturn `U${user.id}`;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserListForSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.selectedUsers.map(user => {\n\t\t\t\t\t\t\t\treturn ['user', user.id];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformattedDateForView()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn `${this.selectedDate}, ${this.selectedTime}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformattedDurationForView()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet durationTypeText;\n\t\t\t\t\t\t\tif (this.selectedDurationType === 'm')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdurationTypeText = this.localize('BX_IM_COMPONENT_CONFERENCE_DURATION_MINUTES');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.selectedDurationType === 'h')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdurationTypeText = this.localize('BX_IM_COMPONENT_CONFERENCE_DURATION_HOURS');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn `${this.selectedDuration} ${durationTypeText}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstartDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn BX.parseDate(`${this.selectedDate} ${this.selectedTime}`);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tendDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet duration = Number(this.selectedDuration);\n\t\t\t\t\t\t\tconst durationType = this.selectedDurationType;\n\n\t\t\t\t\t\t\tif (durationType === 'h')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduration *= 60 * 60 * 1000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduration *= 60 * 1000;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst endDateTime = new Date();\n\t\t\t\t\t\t\tendDateTime.setTime(this.startDateTime.getTime() + duration);\n\n\t\t\t\t\t\t\treturn endDateTime;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalize()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t\t{\n\t\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t//this.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t\t\t\t//this.initPlanner();\n\t\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDateFieldClick(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Reflection.getClass('BX.calendar'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.calendar({\n\t\t\t\t\t\t\t\t\tnode: event.currentTarget,\n\t\t\t\t\t\t\t\t\tfield: this.$refs['dateInput'],\n\t\t\t\t\t\t\t\t\tbTime: false,\n\t\t\t\t\t\t\t\t\tcallback_after: (event) => {\n\t\t\t\t\t\t\t\t\t\tthis.$emit('dateChange', event);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonTimeFieldClick()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clockInstance.setNode(this.$refs['timeInput']);\n\t\t\t\t\t\t\tthis.clockInstance.setTime(this.convertToSeconds(this.selectedTime));\n\t\t\t\t\t\t\tthis.clockInstance.setCallback((value) => {\n\t\t\t\t\t\t\t\tthis.$emit('timeChange', value);\n\t\t\t\t\t\t\t\tBX.fireEvent(this.$refs['timeInput'], 'change');\n\t\t\t\t\t\t\t\tthis.clockInstance.closeWnd();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.clockInstance.Show();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUpdateDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//$nextTick didn't help there\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.planner.updateSelector(this.startDateTime, this.endDateTime, false);\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDurationChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('durationChange', event.target.value);\n\t\t\t\t\t\t\tthis.onUpdateDateTime();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDurationTypeChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('durationTypeChange', event.target.value);\n\t\t\t\t\t\t\tthis.onUpdateDateTime();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tconvertToSeconds(time)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//method converts string '13:12\" or '03:20 am' to number of seconds\n\t\t\t\t\t\t\tconst parts = time.split(/[\\s:]+/);\n\t\t\t\t\t\t\tlet hours = parseInt(parts[0], 10);\n\t\t\t\t\t\t\tconst minutes = parseInt(parts[1], 10);\n\n\t\t\t\t\t\t\tif (parts.length === 3)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst modifier = parts[2];\n\t\t\t\t\t\t\t\tif (modifier === 'pm' && hours < 12)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//'03:00 pm' => 15:00\n\t\t\t\t\t\t\t\t\thours = hours + 12;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (modifier === 'am' && hours === 12)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//'12:00 am' => 0:00\n\t\t\t\t\t\t\t\t\thours = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst secondsInHours = hours * 3600;\n\t\t\t\t\t\t\tconst secondsInMinutes = minutes * 60;\n\n\t\t\t\t\t\t\treturn secondsInHours + secondsInMinutes;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUserSelect(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('userSelect', event);\n\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUserDeselect(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('userDeselect', event);\n\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUpdateUserSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tthis.$refs['userSelector'].innerHTML = '';\n\t\t\t\t\t\t\t\tthis.initUserSelector();\n\t\t\t\t\t\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSwitchModeForAll(mode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (mode === ConferenceFieldState.edit)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.switchToEdit();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitUserSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.userSelector = new TagSelector({\n\t\t\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\t\t\t\tpreselectedItems: this.userListForSelector,\n\t\t\t\t\t\t\t\t\tundeselectedItems: [['user', this.chatHost.ID]],\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.onUserSelect(event);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.onUserDeselect(event);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t\t\t\t{id: 'user'},\n\t\t\t\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitClock()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clockInstance = new BX.CClockSelector({\n\t\t\t\t\t\t\t\tstart_time: this.convertToSeconds(this.selectedTime),\n\t\t\t\t\t\t\t\tnode: this.$refs['timeInput'],\n\t\t\t\t\t\t\t\tcallback: () => {}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitPlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner = new Planner({\n\t\t\t\t\t\t\t\twrap: this.$refs['plannerNode'],\n\t\t\t\t\t\t\t\tshowEntryName: true,\n\t\t\t\t\t\t\t\tshowEntriesHeader: false,\n\t\t\t\t\t\t\t\tentriesListWidth: 200,\n\t\t\t\t\t\t\t\tcompactMode: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.planner.show();\n\t\t\t\t\t\t\tthis.planner.subscribe('onDateChange', (event) => {\n\t\t\t\t\t\t\t\tthis.onPlannerSelectorChange(event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatePlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this.selectedUsers.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tAjax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tcodes: this.userListForPlanner,\n\t\t\t\t\t\t\t\t\t\tdateFrom: Util.formatDate(this.startDateTime.getTime() - Util.getDayLength() * 3),\n\t\t\t\t\t\t\t\t\t\tdateTo: Util.formatDate(this.startDateTime.getTime() + Util.getDayLength() * 10)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.planner.updateSelector(this.startDateTime, this.endDateTime, false);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(error => {});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonPlannerSelectorChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet data = event.getData();\n\n\t\t\t\t\t\t\t\tconst startDateTime = data.dateFrom;\n\t\t\t\t\t\t\t\tconst duration = (data.dateTo - data.dateFrom) / 1000 / 60; //duration in minutes\n\t\t\t\t\t\t\t\tconst durationType = this.selectedDurationType;\n\n\t\t\t\t\t\t\t\tthis.$emit('dateChange', startDateTime);\n\t\t\t\t\t\t\t\tthis.$emit('timeChange', this.$parent.formatTime(startDateTime));\n\n\t\t\t\t\t\t\t\tif (durationType === 'h' && duration % 60 === 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$emit('durationChange', duration / 60);\n\t\t\t\t\t\t\t\t\tthis.$emit('durationTypeChange', 'h');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$emit('durationChange', duration);\n\t\t\t\t\t\t\t\t\tthis.$emit('durationTypeChange', 'm');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetUserAvatarStyle(user)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (user.avatar)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tbackgroundImage: `url('${encodeURI(user.avatar)}')`\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tthis.initUserSelector();\n\t\t\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t//this.initClock();\n\t\t\t\t\t//this.initPlanner();\n\t\t\t\t\t//this.updatePlanner();\n\n\t\t\t\t\tthis.$root.$on('switchModeForAll', (mode) => {\n\t\t\t\t\t\tthis.onSwitchModeForAll(mode);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.$root.$on('updateUserSelector', () => {\n\t\t\t\t\t\tthis.onUpdateUserSelector();\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-planner-block\">\n\t\t\t\t\t\t<!-- Date block -->\n<!--\t\t\t\t\t\t<div v-if=\"!isViewMode\" class=\"im-conference-create-date-block\">-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-left\">-->\n<!--\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-date-time\">{{ localize['BX_IM_COMPONENT_CONFERENCE_START_DATE_AND_TIME'] }}</label>-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-left-fields\">-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Date field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div @click=\"onDateFieldClick\" class=\"ui-ctl ui-ctl-after-icon ui-ctl-date im-conference-create-field-date-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<input @change=\"onUpdateDateTime\" type=\"text\" class=\"ui-ctl-element\" ref=\"dateInput\" :value=\"selectedDate\">-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Time field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div @click=\"onTimeFieldClick\" class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown im-conference-create-field-time-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<div @change=\"onUpdateDateTime\" class=\"ui-ctl-element\" ref=\"timeInput\">{{ selectedTime }}</div>-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-right\">-->\n<!--\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-date-time\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION'] }}</label>-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-right-fields\">-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Duration field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl im-conference-create-field-duration-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<input @change=\"onDurationChange\" type=\"text\" class=\"ui-ctl-element\" :value=\"selectedDuration\">-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Duration type field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown im-conference-create-field-duration-type-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<select @change=\"onDurationTypeChange\" class=\"ui-ctl-element\">-->\n<!--\t\t\t\t\t\t\t\t\t\t\t<option value=\"m\" :selected=\"selectedDurationType === 'm'\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION_MINUTES'] }}</option>-->\n<!--\t\t\t\t\t\t\t\t\t\t\t<option value=\"h\" :selected=\"selectedDurationType === 'h'\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION_HOURS'] }}</option>-->\n<!--\t\t\t\t\t\t\t\t\t\t</select>-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t<template v-else-if=\"isViewMode\">-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_START_DATE_AND_TIME'] }}</div>-->\n<!--\t\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ formattedDateForView }}</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION'] }}</div>-->\n<!--\t\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ formattedDurationForView }}</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t</template>-->\n\t\t\t\t\t\t<div v-show=\"!isViewMode\">\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-delimiter\"></div>-->\n\t\t\t\t\t\t\t<!-- User selector block -->\n\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector-block\">\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-user-selector\">{{ localize['BX_IM_COMPONENT_CONFERENCE_USER_SELECTOR_LABEL'] }}</label>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector\" ref=\"userSelector\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- Planner block -->\n<!--\t\t\t\t\t\t\t<div v-show=\"selectedUsers.length > 0\" class=\"im-conference-create-planner-block\" ref=\"plannerNode\"></div>-->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"isViewMode\" class=\"im-conference-create-field im-conference-create-users-view\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_USER_SELECTOR_LABEL'] }}</div>\n\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-users-view-content\">\n\t\t\t\t\t\t\t\t<div v-for=\"user in selectedUsers\" :key=\"user.id\" class=\"im-conference-create-users-view-item\">\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-avatar\" :style=\"getUserAvatarStyle(user)\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-title\">{{ user.title }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import \"ui.vue.components.hint\";\nimport {ConferenceFieldState} from \"im.const\";\nimport { TagSelector } from \"ui.entity-selector\";\n\nexport const FieldBroadcast =\n{\n\tname: 'conference-field-broadcast',\n\tcomponent:\n\t\t{\n\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\tbroadcastMode: {type: Boolean},\n\t\t\t\t\tchatHost: {type: Object},\n\t\t\t\t\tselectedPresenters: {type: Array}\n\t\t\t\t},\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'broadcast'\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tisViewMode()\n\t\t\t\t{\n\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t},\n\t\t\t\tcodedValue()\n\t\t\t\t{\n\t\t\t\t\tif (this.broadcastMode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_MODE_ON'];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_MODE_OFF'];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpresenterListForSelector()\n\t\t\t\t{\n\t\t\t\t\treturn this.selectedPresenters.map(user => {\n\t\t\t\t\t\treturn ['user', user.id];\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tlocalize()\n\t\t\t\t{\n\t\t\t\t\treturn BX.message;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tswitchToEdit()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t},\n\t\t\t\tonBroadcastModeChange()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('broadcastModeChange');\n\t\t\t\t},\n\t\t\t\tonSwitchModeForAll(mode)\n\t\t\t\t{\n\t\t\t\t\tif (mode === ConferenceFieldState.edit)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.switchToEdit();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonPresenterSelect(event)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('presenterSelect', event);\n\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t},\n\t\t\t\tonPresenterDeselect(event)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('presenterDeselect', event);\n\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t},\n\t\t\t\tgetUserAvatarStyle(user)\n\t\t\t\t{\n\t\t\t\t\tif (user.avatar)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tbackgroundImage: `url('${encodeURI(user.avatar)}')`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {};\n\t\t\t\t},\n\t\t\t\tinitPresenterSelector()\n\t\t\t\t{\n\t\t\t\t\tthis.presenterSelector = new TagSelector({\n\t\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\t\t\tpreselectedItems: this.presenterListForSelector,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\t\tthis.onPresenterSelect(event);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\t\tthis.onPresenterDeselect(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t\t{id: 'user'},\n\t\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonUpdatePresenterSelector()\n\t\t\t\t{\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs['presenterSelector'].innerHTML = '';\n\t\t\t\t\t\tthis.initPresenterSelector();\n\t\t\t\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tmounted()\n\t\t\t{\n\t\t\t\tthis.initPresenterSelector();\n\t\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\n\t\t\t\tthis.$root.$on('switchModeForAll', (mode) => {\n\t\t\t\t\tthis.onSwitchModeForAll(mode);\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$on('updatePresenterSelector', () => {\n\t\t\t\t\tthis.onUpdatePresenterSelector();\n\t\t\t\t})\n\t\t\t},\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"im-conference-create-section im-conference-create-broadcast-section\">\n\t\t\t\t\t<div class=\"im-conference-create-broadcast-section-title\">\n\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-broadcast\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_LABEL'] }}</label>\n\t\t\t\t\t\t<bx-hint :text=\"localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_HINT']\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"!isViewMode\">\n\t\t\t\t\t\t<div class=\"im-conference-create-field-inline im-conference-create-field-broadcast\">\n\t\t\t\t\t\t\t<input @input=\"onBroadcastModeChange\" type=\"checkbox\" id=\"im-conference-create-field-broadcast-checkbox\" :checked=\"broadcastMode\">\n\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-broadcast-checkbox\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_CHECKBOX_LABEL'] }}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"broadcastMode\" class=\"im-conference-create-user-selector-block\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label im-conference-create-label-broadcast\" for=\"im-conference-create-field-user-selector\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PRESENTER_SELECTOR_LABEL'] }}</label>\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector\" ref=\"presenterSelector\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"isViewMode\">\n\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ codedValue }}</div>\n\t\t\t\t\t\t<div v-if=\"broadcastMode\" @click=\"switchToEdit\" class=\"im-conference-create-field im-conference-create-users-view\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PRESENTER_SELECTOR_LABEL'] }}</div>\n\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-content\">\n\t\t\t\t\t\t\t\t<div v-for=\"user in selectedPresenters\" :key=\"user.id\" class=\"im-conference-create-users-view-item\">\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-avatar\" :style=\"getUserAvatarStyle(user)\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-title\">{{ user.title }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`\n\t\t},\n};","import {Reflection, Text, Dom, ajax as Ajax} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {ConferenceFieldState} from \"im.const\";\nimport {Logger} from \"im.lib.logger\";\nimport {Clipboard} from \"im.lib.clipboard\";\n\nimport {FieldTitle} from \"./fields/title\";\nimport {FieldPassword} from \"./fields/password\";\nimport {FieldInvitation} from \"./fields/invitation\";\nimport {FieldPlanner} from \"./fields/planner\";\nimport {FieldBroadcast} from \"./fields/broadcast\";\n\nconst FieldTypes = [\n\tFieldTitle,\n\tFieldPassword,\n\tFieldInvitation,\n\tFieldPlanner,\n\tFieldBroadcast\n];\n\nconst FieldComponents = {};\nFieldTypes.forEach(fieldType => {\n\tFieldComponents[fieldType.name] = fieldType.component;\n});\n\nBitrixVue.component('bx-im-component-conference-edit',\n{\n\tprops:\n\t{\n\t\tconferenceId: {type: Number, default: 0},\n\t\tfieldsData: { type: Object, default: {} },\n\t\tmode: { type: String, default: ConferenceFieldState.create },\n\t\tchatHost: { type: Object, default: {} },\n\t\tchatUsers: { type: Array, default: [] },\n\t\tpresenters: { type: Array, default: [] },\n\t\tpublicLink: { type: String, default: '' },\n\t\tchatId: { type: Number, default: 0 },\n\t\tinvitationText: { type: String, default: '' },\n\t\tgridId: { type: String, default: '' },\n\t\tpathToList: { type: String, default: '' },\n\t\tbroadcastingEnabled: { type: Boolean, default: false }\n\t},\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tfieldsMode: {\n\t\t\t\t'title': this.mode,\n\t\t\t\t'password': this.mode,\n\t\t\t\t'planner': this.mode,\n\t\t\t\t'broadcast': this.mode\n\t\t\t},\n\t\t\tfields: {},\n\t\t\tinitialValues: {},\n\t\t\ttitle: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: '',\n\t\t\t\tdefaultValue: ''\n\t\t\t},\n\t\t\tinvitation: {\n\t\t\t\tvalue: '',\n\t\t\t\tmode: ConferenceFieldState.view,\n\t\t\t\tedited: false\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tpasswordNeeded: {\n\t\t\t\tcurrentValue: false,\n\t\t\t\tinitialValue: false\n\t\t\t},\n\t\t\tselectedUsers: {\n\t\t\t\tcurrentValue: [],\n\t\t\t\tinitialValue: []\n\t\t\t},\n\t\t\tbroadcastMode: {\n\t\t\t\tcurrentValue: false,\n\t\t\t\tinitialValue: false\n\t\t\t},\n\t\t\tselectedPresenters: {\n\t\t\t\tcurrentValue: [],\n\t\t\t\tinitialValue: []\n\t\t\t},\n\t\t\tselectedDate: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tselectedTime: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tselectedDuration: {\n\t\t\t\tcurrentValue: '30',\n\t\t\t\tinitialValue: '30'\n\t\t\t},\n\t\t\tselectedDurationType: {\n\t\t\t\tcurrentValue: 'm',\n\t\t\t\tinitialValue: 'm'\n\t\t\t},\n\t\t\terrors: [],\n\t\t\tlinkGenerated: false,\n\t\t\taliasData: {},\n\t\t\tisSubmitting: false\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tif (this.isFormViewMode)\n\t\t{\n\t\t\tthis.title.initialValue = this.fieldsData['TITLE'];\n\t\t\tthis.password.initialValue = this.fieldsData['PASSWORD'];\n\t\t\tthis.broadcastMode.currentValue = this.fieldsData['BROADCAST'];\n\t\t\tthis.invitation.value = this.invitationText;\n\t\t\tthis.passwordNeeded.currentValue = !!this.fieldsData['PASSWORD'];\n\t\t\tthis.publicLink = Text.encode(this.publicLink);\n\n\t\t\tthis.selectedUsers.currentValue = [...this.chatUsers];\n\t\t\tif (this.fieldsData['BROADCAST'])\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue = [...this.presenters]\n\t\t\t}\n\t\t}\n\t\telse if (this.isFormCreateMode)\n\t\t{\n\t\t\tthis.generateLink();\n\n\t\t\tthis.title.initialValue = '';\n\t\t\tthis.password.initialValue = '';\n\t\t\tthis.passwordNeeded.currentValue = false;\n\t\t\tthis.broadcastMode.currentValue = false;\n\n\t\t\tconst currentUser = {\n\t\t\t\tid: this.chatHost.ID,\n\t\t\t\ttitle: this.chatHost.FULL_NAME,\n\t\t\t\tavatar: this.chatHost.AVATAR\n\t\t\t};\n\t\t\tthis.selectedUsers.currentValue.push(currentUser);\n\t\t\tthis.selectedPresenters.currentValue.push(currentUser);\n\t\t}\n\t\tthis.title.currentValue = this.title.initialValue;\n\t\tthis.password.currentValue = this.password.initialValue;\n\t\tthis.passwordNeeded.initialValue = this.passwordNeeded.currentValue;\n\t\tthis.broadcastMode.initialValue = this.broadcastMode.currentValue;\n\t\tthis.selectedUsers.initialValue = [...this.selectedUsers.currentValue];\n\t\tthis.selectedPresenters.initialValue = [...this.selectedPresenters.currentValue];\n\n\t\tthis.setDefaultDateAndTime();\n\t\tthis.setDefaultDuration();\n\t},\n\tmounted()\n\t{\n\t\tif (this.isFormCreateMode)\n\t\t{\n\t\t\tthis.checkRequirements();\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tisFormCreateMode()\n\t\t{\n\t\t\treturn this.mode === ConferenceFieldState.create;\n\t\t},\n\t\tisFormViewMode()\n\t\t{\n\t\t\treturn this.mode === ConferenceFieldState.view;\n\t\t},\n\t\tisTitleEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['title'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPasswordEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['password'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPlannerEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['planner'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPasswordCheckboxEdited()\n\t\t{\n\t\t\treturn this.passwordNeeded.currentValue !== this.passwordNeeded.initialValue;\n\t\t},\n\t\tisBroadcastEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['broadcast'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisEditing()\n\t\t{\n\t\t\treturn this.isFormViewMode\n\t\t\t\t&& (this.isTitleEdited || this.isPasswordEdited || this.invitation.edited || this.isPasswordCheckboxEdited || this.isPlannerEdited || this.isBroadcastEdited);\n\t\t},\n\t\tconferenceLink()\n\t\t{\n\t\t\tif (this.isFormCreateMode)\n\t\t\t{\n\t\t\t\tif (this.linkGenerated)\n\t\t\t\t{\n\t\t\t\t\treturn this.aliasData['LINK'];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '#LINK#';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.isFormViewMode)\n\t\t\t{\n\t\t\t\treturn this.publicLink;\n\t\t\t}\n\t\t},\n\t\tsubmitFormButtonClasses()\n\t\t{\n\t\t\tconst classes = ['ui-btn', 'ui-btn-success'];\n\n\t\t\tif (this.isSubmitting)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn BX.message;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\t/* region 01. Mode switching */\n\t\tswitchToEdit(fieldName)\n\t\t{\n\t\t\tthis.fieldsMode[fieldName] = ConferenceFieldState.edit;\n\t\t\tthis.$root.$emit('focus', fieldName);\n\t\t},\n\t\tswitchModeForAllFields(mode)\n\t\t{\n\t\t\tfor (let field in this.fieldsMode)\n\t\t\t{\n\t\t\t\tif (this.fieldsMode.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tthis.fieldsMode[field] = mode;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$root.$emit('switchModeForAll', mode);\n\t\t},\n\t\t/* endregion 01. Mode switching */\n\n\t\t/* region 02. Field update handlers */\n\t\tonTitleChange(newTitle)\n\t\t{\n\t\t\tthis.title.currentValue = newTitle;\n\t\t},\n\t\tonPasswordChange(newPassword)\n\t\t{\n\t\t\tthis.password.currentValue = newPassword;\n\t\t},\n\t\tonPasswordNeededChange()\n\t\t{\n\t\t\tthis.passwordNeeded.currentValue = !this.passwordNeeded.currentValue;\n\n\t\t\tif (this.passwordNeeded.currentValue)\n\t\t\t{\n\t\t\t\tthis.$root.$emit('focus', 'password');\n\t\t\t}\n\t\t},\n\t\tonBroadcastModeChange()\n\t\t{\n\t\t\tthis.broadcastMode.currentValue = !this.broadcastMode.currentValue;\n\t\t},\n\t\tonInvitationUpdate(newValue)\n\t\t{\n\t\t\tthis.invitation.value = newValue;\n\t\t\tthis.invitation.edited = true;\n\t\t},\n\t\tonUserSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.currentValue.push({\n\t\t\t\t\tid: event.data.item.id,\n\t\t\t\t\ttitle: event.data.item.title,\n\t\t\t\t\tavatar: event.data.item.avatar,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonUserDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.currentValue.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonPresenterSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue.push({\n\t\t\t\t\tid: event.data.item.id,\n\t\t\t\t\ttitle: event.data.item.title,\n\t\t\t\t\tavatar: event.data.item.avatar,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonPresenterDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonDateChange(newDate)\n\t\t{\n\t\t\tthis.selectedDate.currentValue = BX.formatDate(newDate, BX.message('FORMAT_DATE'));\n\t\t},\n\t\tonTimeChange(newTime)\n\t\t{\n\t\t\tthis.selectedTime.currentValue = newTime;\n\t\t},\n\t\tonDurationChange(newDuration)\n\t\t{\n\t\t\tthis.selectedDuration.currentValue = String(newDuration);\n\t\t},\n\t\tonDurationTypeChange(newDurationType)\n\t\t{\n\t\t\tthis.selectedDurationType.currentValue = newDurationType;\n\t\t},\n\t\t/* endregion 02. Field update handlers */\n\n\t\t/* region 03. Actions */\n\t\tdiscardChanges()\n\t\t{\n\t\t\tthis.clearErrors();\n\n\t\t\tthis.title.currentValue = this.title.initialValue;\n\t\t\tthis.password.currentValue = this.password.initialValue;\n\t\t\tthis.passwordNeeded.currentValue = this.passwordNeeded.initialValue;\n\t\t\tthis.broadcastMode.currentValue = this.broadcastMode.initialValue;\n\t\t\tthis.selectedUsers.currentValue = [...this.selectedUsers.initialValue];\n\t\t\tthis.$root.$emit('updateUserSelector');\n\t\t\tthis.selectedPresenters.currentValue = [...this.selectedPresenters.initialValue];\n\t\t\tthis.$root.$emit('updatePresenterSelector');\n\t\t\tthis.selectedDate.currentValue = this.selectedDate.initialValue;\n\t\t\tthis.selectedTime.currentValue = this.selectedTime.initialValue;\n\t\t\tthis.selectedDuration.currentValue = this.selectedDuration.initialValue;\n\t\t\tthis.selectedDurationType.currentValue = this.selectedDurationType.initialValue;\n\n\t\t\tthis.switchModeForAllFields(ConferenceFieldState.view);\n\t\t},\n\t\tcopyInvitation()\n\t\t{\n\t\t\tlet link = '';\n\t\t\tif (this.isFormCreateMode && this.linkGenerated)\n\t\t\t{\n\t\t\t\tlink = Text.decode(this.aliasData['LINK']);\n\t\t\t}\n\t\t\telse if (this.isFormViewMode)\n\t\t\t{\n\t\t\t\tlink = Text.decode(this.publicLink);\n\t\t\t}\n\n\t\t\tlet title = this.localize['BX_IM_COMPONENT_CONFERENCE_DEFAULT_TITLE'];\n\t\t\tif (this.title.currentValue)\n\t\t\t{\n\t\t\t\ttitle = this.title.currentValue;\n\t\t\t}\n\n\t\t\tconst copyValue = Text.decode(this.invitation.value)\n\t\t\t\t.replace(/#CREATOR#/gm, this.chatHost.FULL_NAME)\n\t\t\t\t.replace(/#TITLE#/gm, `\"${title}\"`)\n\t\t\t\t.replace(/#LINK#/gm, `${link}`);\n\t\t\tClipboard.copy(copyValue);\n\n\t\t\tif (Reflection.getClass('BX.UI.Notification.Center'))\n\t\t\t{\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.localize['BX_IM_COMPONENT_CONFERENCE_INVITATION_COPIED']\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\topenChat()\n\t\t{\n\t\t\tif (window.top[\"BXIM\"])\n\t\t\t{\n\t\t\t\twindow.top[\"BXIM\"].openMessenger('chat' + this.chatId);\n\t\t\t}\n\t\t},\n\t\teditAll()\n\t\t{\n\t\t\tthis.switchModeForAllFields(ConferenceFieldState.edit);\n\t\t},\n\t\t/* endregion 03. Actions */\n\n\t\t/* region 04. Form handling */\n\t\tsubmitForm()\n\t\t{\n\t\t\tif (this.isSubmitting)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.isSubmitting = true;\n\n\t\t\tconst fieldsToSubmit = {};\n\n\t\t\tfieldsToSubmit['title'] = this.title.currentValue;\n\t\t\tfieldsToSubmit['password_needed'] = this.passwordNeeded.currentValue;\n\t\t\tfieldsToSubmit['password'] = this.password.currentValue;\n\t\t\tfieldsToSubmit['id'] = this.conferenceId;\n\t\t\tfieldsToSubmit['invitation'] = Text.decode(this.invitation.value);\n\t\t\tfieldsToSubmit['users'] = this.selectedUsers.currentValue.map(user => user.id);\n\t\t\tfieldsToSubmit['broadcast_mode'] = this.broadcastMode.currentValue;\n\t\t\tfieldsToSubmit['presenters'] = this.selectedPresenters.currentValue.map(user => user.id);\n\n\t\t\tthis.clearErrors();\n\n\t\t\tif (this.isFormViewMode || this.linkGenerated)\n\t\t\t{\n\t\t\t\tAjax.runAction('im.conference.create', {\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tfields: fieldsToSubmit,\n\t\t\t\t\t\taliasData: this.aliasData\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tcreationType: 'section'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onSuccessfulSubmit();\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.onFailedSubmit(response);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonSuccessfulSubmit()\n\t\t{\n\t\t\tif (this.isFormCreateMode)\n\t\t\t{\n\t\t\t\tthis.copyInvitation();\n\t\t\t}\n\t\t\tthis.isSubmitting = false;\n\t\t\tthis.closeSlider();\n\t\t\tthis.reloadGrid();\n\t\t},\n\t\tonFailedSubmit(response)\n\t\t{\n\t\t\tthis.isSubmitting = false;\n\t\t\tlet errorMessage = response[\"errors\"][0].message;\n\t\t\tif (response[\"errors\"][0].code === 'NETWORK_ERROR')\n\t\t\t{\n\t\t\t\terrorMessage = this.localize['BX_IM_COMPONENT_CONFERENCE_NETWORK_ERROR'];\n\t\t\t}\n\t\t\tthis.addError(errorMessage);\n\t\t},\n\t\t/* endregion 04. Form handling */\n\n\t\t/* region 05. Helpers */\n\t\tcheckRequirements()\n\t\t{\n\t\t\tif (!top.BX.PULL.isPublishingEnabled())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_PUSH_ERROR']);\n\t\t\t}\n\n\t\t\tif (!top.BX.Call.Util.isCallServerAllowed())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_VOXIMPLANT_ERROR_WITH_LINK']);\n\t\t\t}\n\t\t},\n\t\tdisableButton()\n\t\t{\n\t\t\tconst createButton = document.querySelector('#im-conference-create-wrap #ui-button-panel-save');\n\t\t\tif (createButton)\n\t\t\t{\n\t\t\t\tDom.addClass(createButton, ['ui-btn-disabled', 'ui-btn-icon-lock']);\n\t\t\t}\n\t\t},\n\t\tgenerateLink()\n\t\t{\n\t\t\tAjax.runAction('im.conference.prepare', {\n\t\t\t\tjson: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'section'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.aliasData = response.data['ALIAS_DATA'];\n\t\t\t\tthis.aliasData['LINK'] = Text.encode(this.aliasData['LINK']);\n\t\t\t\tthis.title.defaultValue = response.data['DEFAULT_TITLE'];\n\t\t\t\tthis.linkGenerated = true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tLogger.warn('error', response[\"errors\"][0].message);\n\t\t\t});\n\t\t},\n\t\taddError(errorText)\n\t\t{\n\t\t\tthis.errors.push(errorText);\n\t\t},\n\t\tclearErrors()\n\t\t{\n\t\t\tthis.errors = [];\n\t\t},\n\t\tcloseSlider()\n\t\t{\n\t\t\tif (Reflection.getClass('BX.SidePanel'))\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t}\n\t\t},\n\t\treloadGrid()\n\t\t{\n\t\t\tif (Reflection.getClass('top.BX.Main.gridManager'))\n\t\t\t{\n\t\t\t\ttop.BX.Main.gridManager.reload(this.gridId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttop.window.location = this.pathToList;\n\t\t\t}\n\t\t},\n\t\tsetDefaultDateAndTime()\n\t\t{\n\t\t\tconst date = new Date();\n\t\t\tconst minutes = date.getMinutes();\n\t\t\tconst mod = minutes % 5;\n\n\t\t\tif (mod > 0)\n\t\t\t{\n\t\t\t\tdate.setMinutes(minutes - mod + (mod > 2 ? 5 : 0));\n\t\t\t}\n\n\t\t\tthis.selectedDate.currentValue = BX.formatDate(date, BX.message('FORMAT_DATE'));\n\t\t\tthis.selectedDate.initialValue = this.selectedDate.currentValue;\n\t\t\tthis.selectedTime.currentValue = this.formatTime(date);\n\t\t\tthis.selectedTime.initialValue = this.selectedTime.currentValue;\n\t\t},\n\t\tsetDefaultDuration()\n\t\t{\n\t\t\tthis.selectedDuration.currentValue = '30';\n\t\t\tthis.selectedDuration.initialValue = this.selectedDuration.currentValue;\n\t\t\tthis.selectedDurationType.currentValue = 'm';\n\t\t\tthis.selectedDurationType.initialValue = this.selectedDurationType.currentValue;\n\t\t},\n\t\tformatTime(date)\n\t\t{\n\t\t\tconst dateFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATE')).replace(/:?\\s*s/, '');\n\t\t\tconst timeFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATETIME')).replace(/:?\\s*s/, '');\n\t\t\tconst dateString = BX.date.format(dateFormat, date);\n\t\t\tconst timeString = BX.date.format(timeFormat, date);\n\n\t\t\treturn BX.util.trim(timeString.replace(dateString, ''));\n\t\t}\n\t\t/* endregion 05. Helpers */\n\t},\n\tcomponents: FieldComponents,\n\ttemplate: `\n\t\t<div>\n\t\t\t<template v-if=\"errors.length > 0\">\n\t\t\t\t<div class=\"ui-alert ui-alert-danger\" id=\"im-conference-create-errors\">\n\t\t\t\t\t<span v-for=\"error in errors\" class=\"ui-alert-message\" v-html=\"error\"></span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"im-conference-create-block im-conference-create-fields-wrapper\">\n\t\t\t\t<!-- Form fields -->\n\t\t\t\t<conference-field-title\n\t\t\t\t\t:mode=\"fieldsMode['title']\"\n\t\t\t\t\t:title=\"title.currentValue\"\n\t\t\t\t\t:defaultValue=\"title.defaultValue\"\n\t\t\t\t\t@titleChange=\"onTitleChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n\t\t\t\t<conference-field-planner\n\t\t\t\t\t:mode=\"fieldsMode['planner']\"\n\t\t\t\t\t:selectedUsers=\"selectedUsers.currentValue\"\n\t\t\t\t\t:selectedDate=\"selectedDate.currentValue\"\n\t\t\t\t\t:selectedTime=\"selectedTime.currentValue\"\n\t\t\t\t\t:selectedDuration=\"selectedDuration.currentValue\"\n\t\t\t\t\t:selectedDurationType=\"selectedDurationType.currentValue\"\n\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t@userSelect=\"onUserSelect\"\n\t\t\t\t\t@userDeselect=\"onUserDeselect\"\n\t\t\t\t\t@dateChange=\"onDateChange\"\n\t\t\t\t\t@timeChange=\"onTimeChange\"\n\t\t\t\t\t@durationChange=\"onDurationChange\"\n\t\t\t\t\t@durationTypeChange=\"onDurationTypeChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n\t\t\t\t<conference-field-password\n\t\t\t\t\t:mode=\"fieldsMode['password']\"\n\t\t\t\t\t:password=\"password.currentValue\"\n\t\t\t\t\t:passwordNeeded=\"passwordNeeded.currentValue\"\n\t\t\t\t\t@passwordChange=\"onPasswordChange\"\n\t\t\t\t\t@passwordNeededChange=\"onPasswordNeededChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n<!--\t\t\t\t<div v-if=\"isFormCreateMode\" class=\"im-conference-create-delimiter im-conference-create-delimiter-small\"></div>-->\n\t\t\t\t<template v-if=\"broadcastingEnabled\">\n\t\t\t\t\t<conference-field-broadcast\n\t\t\t\t\t\t:mode=\"fieldsMode['broadcast']\"\n\t\t\t\t\t\t:broadcastMode=\"broadcastMode.currentValue\"\n\t\t\t\t\t\t:selectedPresenters=\"selectedPresenters.currentValue\"\n\t\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t\t@broadcastModeChange=\"onBroadcastModeChange\"\n\t\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t\t\t@presenterSelect=\"onPresenterSelect\"\n\t\t\t\t\t\t@presenterDeselect=\"onPresenterDeselect\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<!-- Action buttons -->\n\t\t\t\t<template v-if=\"!isFormCreateMode\">\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-actions\">\n\t\t\t\t\t\t<a :href=\"publicLink\" target=\"_blank\" class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-icon-camera\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_START'] }}</a>\n\t\t\t\t\t\t<button @click=\"copyInvitation\" class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-share\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_INVITATION_COPY'] }}</button>\n\t\t\t\t\t\t<button @click=\"openChat\" class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-chat\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CHAT'] }}</button>\n\t\t\t\t\t\t<button @click=\"editAll\" class=\"ui-btn ui-btn-sm ui-btn-light\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_EDIT'] }}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Bottom button panel -->\n\t\t\t\t<div v-if=\"isEditing\" class=\"im-conference-create-button-panel-edit ui-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\">\n\t\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t\t\t<button @click=\"submitForm\" id=\"ui-button-panel-save\" :class=\"submitFormButtonClasses\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t<a @click=\"discardChanges\" id=\"ui-button-panel-cancel\" class=\"ui-btn ui-btn-link\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else-if=\"isFormCreateMode\" class=\"im-conference-create-button-panel-add ui-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\">\n\t\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t\t\t<button @click=\"submitForm\" id=\"ui-button-panel-save\" name=\"save\" value=\"Y\" :class=\"submitFormButtonClasses\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CREATE'] }}</button>\n\t\t\t\t\t\t<a @click=\"closeSlider\" id=\"ui-button-panel-cancel\" class=\"ui-btn ui-btn-link\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"im-conference-create-delimiter\"></div>\n\t\t\t\t<!-- Invitation -->\n\t\t\t\t<conference-field-invitation\n\t\t\t\t\t:invitation=\"invitation\"\n\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t:title=\"title.currentValue\"\n\t\t\t\t\t:defaultTitle=\"title.defaultValue\"\n\t\t\t\t\t:publicLink=\"conferenceLink\"\n\t\t\t\t\t:formMode=\"mode\"\n\t\t\t\t\t@invitationUpdate=\"onInvitationUpdate\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["FieldTitle","name","component","props","mode","type","String","title","defaultValue","data","computed","isViewMode","ConferenceFieldState","view","localize","BX","message","methods","switchToEdit","$emit","onInput","event","target","value","onFocus","fieldName","$nextTick","$refs","focus","created","$root","$on","template","FieldPassword","password","passwordNeeded","Boolean","codedValue","replace","onPasswordNeededChange","FieldInvitation","invitation","Object","chatHost","defaultTitle","publicLink","formMode","initialValue","editedValue","isFormCreateMode","create","avatarClasses","classes","AVATAR","push","avatarStyles","styles","backgroundImage","formattedInvitation","Text","encode","FULL_NAME","onEditClick","contentWidth","offsetWidth","contentHeight","offsetHeight","edit","decode","style","width","height","saveChanges","discardChanges","FieldPlanner","selectedUsers","Array","selectedDate","selectedTime","selectedDuration","selectedDurationType","clockInstance","planner","userListForPlanner","map","user","id","userListForSelector","formattedDateForView","formattedDurationForView","durationTypeText","startDateTime","parseDate","endDateTime","duration","Number","durationType","Date","setTime","getTime","onDateFieldClick","Reflection","getClass","calendar","node","currentTarget","field","bTime","callback_after","onTimeFieldClick","setNode","convertToSeconds","setCallback","fireEvent","closeWnd","Show","onUpdateDateTime","setTimeout","updateSelector","onDurationChange","onDurationTypeChange","time","parts","split","hours","parseInt","minutes","length","modifier","secondsInHours","secondsInMinutes","onUserSelect","onUserDeselect","onUpdateUserSelector","innerHTML","initUserSelector","userSelector","renderTo","onSwitchModeForAll","TagSelector","dialogOptions","preselectedItems","undeselectedItems","ID","events","entities","initClock","CClockSelector","start_time","callback","initPlanner","Planner","wrap","showEntryName","showEntriesHeader","entriesListWidth","compactMode","show","subscribe","onPlannerSelectorChange","updatePlanner","Ajax","runAction","codes","dateFrom","Util","formatDate","getDayLength","dateTo","then","response","update","entries","accessibility","error","BaseEvent","getData","$parent","formatTime","getUserAvatarStyle","avatar","encodeURI","mounted","FieldBroadcast","broadcastMode","selectedPresenters","presenterListForSelector","onBroadcastModeChange","onPresenterSelect","onPresenterDeselect","initPresenterSelector","presenterSelector","onUpdatePresenterSelector","FieldTypes","FieldComponents","forEach","fieldType","BitrixVue","conferenceId","fieldsData","chatUsers","presenters","chatId","invitationText","gridId","pathToList","broadcastingEnabled","fieldsMode","fields","initialValues","currentValue","edited","errors","linkGenerated","aliasData","isSubmitting","isFormViewMode","generateLink","currentUser","setDefaultDateAndTime","setDefaultDuration","checkRequirements","isTitleEdited","isPasswordEdited","isPlannerEdited","isPasswordCheckboxEdited","isBroadcastEdited","isEditing","conferenceLink","submitFormButtonClasses","switchModeForAllFields","hasOwnProperty","onTitleChange","newTitle","onPasswordChange","newPassword","onInvitationUpdate","newValue","index","findIndex","item","splice","onDateChange","newDate","onTimeChange","newTime","newDuration","newDurationType","clearErrors","copyInvitation","link","copyValue","Clipboard","copy","top","UI","Notification","Center","notify","content","openChat","window","openMessenger","editAll","submitForm","fieldsToSubmit","json","analyticsLabel","creationType","onSuccessfulSubmit","onFailedSubmit","closeSlider","reloadGrid","errorMessage","code","addError","PULL","isPublishingEnabled","disableButton","Call","isCallServerAllowed","createButton","document","querySelector","Dom","addClass","Logger","warn","errorText","SidePanel","Instance","close","Main","gridManager","reload","location","date","getMinutes","mod","setMinutes","dateFormat","convertBitrixFormat","timeFormat","dateString","format","timeString","util","trim","components"],"mappings":";;;;CAEO,IAAMA,UAAU,GACtB;CACCC,EAAAA,IAAI,EAAE,wBADP;CAECC,EAAAA,SAAS,EACR;CACCC,IAAAA,KAAK,EACL;CACCC,MAAAA,IAAI,EAAE;CAACC,QAAAA,IAAI,EAAEC;CAAP,OADP;CAECC,MAAAA,KAAK,EAAE;CAACF,QAAAA,IAAI,EAAEC;CAAP,OAFR;CAGCE,MAAAA,YAAY,EAAE;CAACH,QAAAA,IAAI,EAAEC;CAAP;CAHf,KAFD;CAOCG,IAAAA,IAAI,EAAE,gBAAW;CAChB,aAAO;CACNR,QAAAA,IAAI,EAAE;CADA,OAAP;CAGA,KAXF;CAYCS,IAAAA,QAAQ,EACR;CACCC,MAAAA,UADD,wBAEC;CACC,eAAO,KAAKP,IAAL,KAAcQ,6BAAoB,CAACC,IAA1C;CACA,OAJF;CAKCC,MAAAA,QALD,sBAMC;CACC,eAAOC,EAAE,CAACC,OAAV;CACA;CARF,KAbD;CAuBCC,IAAAA,OAAO,EACP;CACCC,MAAAA,YADD,0BAEC;CACC,aAAKC,KAAL,CAAW,cAAX,EAA2B,KAAKlB,IAAhC;CACA,OAJF;CAKCmB,MAAAA,OALD,mBAKSC,KALT,EAMC;CACC,aAAKF,KAAL,CAAW,aAAX,EAA0BE,KAAK,CAACC,MAAN,CAAaC,KAAvC;CACA,OARF;CASCC,MAAAA,OATD,mBASSC,SATT,EAUC;CAAA;;CACC,YAAI,KAAKxB,IAAL,KAAcwB,SAAlB,EACA;CACC,eAAKC,SAAL,CAAe,YAAM;CACpB,YAAA,KAAI,CAACC,KAAL,CAAW,OAAX,EAAoBC,KAApB;CACA,WAFD;CAGA;CACD;CAjBF,KAxBD;CA2CCC,IAAAA,OA3CD,qBA4CC;CACC,WAAKC,KAAL,CAAWC,GAAX,CAAe,OAAf,EAAwB,KAAKP,OAA7B;CACA,KA9CF;CA+CCQ,IAAAA,QAAQ;CA/CT;CAHF,CADM;;CCAA,IAAMC,aAAa,GACzB;CACChC,EAAAA,IAAI,EAAE,2BADP;CAECC,EAAAA,SAAS,EACR;CACCC,IAAAA,KAAK,EACL;CACCC,MAAAA,IAAI,EAAE;CAACC,QAAAA,IAAI,EAAEC;CAAP,OADP;CAEC4B,MAAAA,QAAQ,EAAE;CAAC7B,QAAAA,IAAI,EAAEC;CAAP,OAFX;CAGC6B,MAAAA,cAAc,EAAE;CAAC9B,QAAAA,IAAI,EAAE+B;CAAP;CAHjB,KAFD;CAOC3B,IAAAA,IAAI,EAAE,gBAAW;CAChB,aAAO;CACNR,QAAAA,IAAI,EAAE;CADA,OAAP;CAGA,KAXF;CAYCS,IAAAA,QAAQ,EACR;CACCC,MAAAA,UADD,wBAEC;CACC,eAAO,KAAKP,IAAL,KAAcQ,6BAAoB,CAACC,IAA1C;CACA,OAJF;CAKCwB,MAAAA,UALD,wBAMC;CACC,YAAI,KAAKF,cAAT,EACA;CACC,2BAAU,KAAKrB,QAAL,CAAc,4CAAd,CAAV,eAA0E,KAAKoB,QAAL,CAAcI,OAAd,CAAsB,IAAtB,EAA4B,GAA5B,CAA1E;CACA,SAHD,MAKA;CACC,iBAAO,KAAKxB,QAAL,CAAc,wCAAd,CAAP;CACA;CACD,OAfF;CAgBCA,MAAAA,QAhBD,sBAiBC;CACC,eAAOC,EAAE,CAACC,OAAV;CACA;CAnBF,KAbD;CAkCCC,IAAAA,OAAO,EACP;CACCC,MAAAA,YADD,0BAEC;CACC,aAAKC,KAAL,CAAW,cAAX,EAA2B,KAAKlB,IAAhC;CACA,OAJF;CAKCmB,MAAAA,OALD,mBAKSC,KALT,EAMC;CACC,aAAKF,KAAL,CAAW,gBAAX,EAA6BE,KAAK,CAACC,MAAN,CAAaC,KAA1C;CACA,OARF;CASCgB,MAAAA,sBATD,oCAUC;CACC,aAAKpB,KAAL,CAAW,sBAAX;CACA,OAZF;CAaCK,MAAAA,OAbD,mBAaSC,SAbT,EAcC;CAAA;;CACC,YAAI,KAAKxB,IAAL,KAAcwB,SAAlB,EACA;CACC,eAAKC,SAAL,CAAe,YAAM;CACpB,gBAAI,KAAI,CAACC,KAAL,CAAW,OAAX,CAAJ,EACA;CACC,cAAA,KAAI,CAACA,KAAL,CAAW,OAAX,EAAoBC,KAApB;CACA;CACD,WALD;CAMA;CACD;CAxBF,KAnCD;CA6DCC,IAAAA,OA7DD,qBA8DC;CACC,WAAKC,KAAL,CAAWC,GAAX,CAAe,OAAf,EAAwB,KAAKP,OAA7B;CACA,KAhEF;CAiECQ,IAAAA,QAAQ;CAjET;CAHF,CADM;;CCCA,IAAMQ,eAAe,GAC3B;CACCvC,EAAAA,IAAI,EAAE,6BADP;CAECC,EAAAA,SAAS,EACR;CACCC,IAAAA,KAAK,EACL;CACCsC,MAAAA,UAAU,EAAE;CAACpC,QAAAA,IAAI,EAAEqC;CAAP,OADb;CAECC,MAAAA,QAAQ,EAAE;CAACtC,QAAAA,IAAI,EAAEqC;CAAP,OAFX;CAGCnC,MAAAA,KAAK,EAAE;CAACF,QAAAA,IAAI,EAAEC;CAAP,OAHR;CAICsC,MAAAA,YAAY,EAAE;CAACvC,QAAAA,IAAI,EAAEC;CAAP,OAJf;CAKCuC,MAAAA,UAAU,EAAE;CAACxC,QAAAA,IAAI,EAAEC;CAAP,OALb;CAMCwC,MAAAA,QAAQ,EAAE;CAACzC,QAAAA,IAAI,EAAEC;CAAP;CANX,KAFD;CAUCG,IAAAA,IAAI,EAAE,gBACN;CACC,aAAO;CACNsC,QAAAA,YAAY,EAAE,IADR;CAENC,QAAAA,WAAW,EAAE;CAFP,OAAP;CAIA,KAhBF;CAiBCtC,IAAAA,QAAQ,EACR;CACCC,MAAAA,UADD,wBAEC;CACC,eAAO,KAAK8B,UAAL,CAAgBrC,IAAhB,KAAyBQ,6BAAoB,CAACC,IAArD;CACA,OAJF;CAKCoC,MAAAA,gBALD,8BAMC;CACC,eAAO,KAAKH,QAAL,KAAkBlC,6BAAoB,CAACsC,MAA9C;CACA,OARF;CASCC,MAAAA,aATD,2BAUC;CACC,YAAMC,OAAO,GAAG,CAAC,6CAAD,CAAhB;;CAEA,YAAI,CAAC,KAAKT,QAAL,CAAcU,MAAnB,EACA;CACCD,UAAAA,OAAO,CAACE,IAAR,CAAa,qDAAb;CACA;;CAED,eAAOF,OAAP;CACA,OAnBF;CAoBCG,MAAAA,YApBD,0BAqBC;CACC,YAAMC,MAAM,GAAG,EAAf;;CAEA,YAAI,KAAKb,QAAL,CAAcU,MAAlB,EACA;CACCG,UAAAA,MAAM,CAACC,eAAP,iBAAgC,KAAKd,QAAL,CAAcU,MAA9C;CACA;;CAED,eAAOG,MAAP;CACA,OA9BF;CA+BCE,MAAAA,mBA/BD,iCAgCC;CACC,YAAInD,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAlB,GAA0B,EAAtC;;CAEA,YAAI,KAAK0C,gBAAL,IAAyB,CAAC,KAAK1C,KAAnC,EACA;CACCA,UAAAA,KAAK,GAAG,KAAKqC,YAAb;CACA;;CAED,eAAO,KAAKH,UAAL,CAAgBlB,KAAhB,CACLe,OADK,CACG,aADH,EACkBqB,cAAI,CAACC,MAAL,CAAY,KAAKjB,QAAL,CAAckB,SAA1B,CADlB,EAELvB,OAFK,CAEG,WAFH,cAEoBqB,cAAI,CAACC,MAAL,CAAYrD,KAAZ,CAFpB,SAGL+B,OAHK,CAGG,UAHH,sBAG2B,KAAKO,UAHhC,kCAG+D,KAAKA,UAHpE,UAAP;CAIA,OA5CF;CA6CC/B,MAAAA,QA7CD,sBA8CC;CACC,eAAOC,EAAE,CAACC,OAAV;CACA;CAhDF,KAlBD;CAoECC,IAAAA,OAAO,EACP;CACC6C,MAAAA,WADD,yBAEC;CAAA;;CACC,YAAMC,YAAY,GAAG,KAAKpC,KAAL,CAAW,MAAX,EAAmBqC,WAAxC;CACA,YAAMC,aAAa,GAAG,KAAKtC,KAAL,CAAW,MAAX,EAAmBuC,YAAzC;CACA,aAAKzB,UAAL,CAAgBrC,IAAhB,GAAuBQ,6BAAoB,CAACuD,IAA5C;CACA,aAAK1B,UAAL,CAAgBlB,KAAhB,GAAwBoC,cAAI,CAACS,MAAL,CAAY,KAAK3B,UAAL,CAAgBlB,KAA5B,CAAxB;CACA,aAAKG,SAAL,CAAe,YAAM;CACpB,UAAA,KAAI,CAACC,KAAL,CAAW,QAAX,EAAqB0C,KAArB,CAA2BC,KAA3B,GAAoCP,YAAY,GAAG,EAAhB,GAAsB,IAAzD;CACA,UAAA,KAAI,CAACpC,KAAL,CAAW,QAAX,EAAqB0C,KAArB,CAA2BE,MAA3B,GAAqCN,aAAa,GAAG,EAAjB,GAAuB,IAA3D;;CACA,UAAA,KAAI,CAACtC,KAAL,CAAW,QAAX,EAAqBC,KAArB;CACA,SAJD;CAKA,OAZF;CAaCR,MAAAA,OAbD,mBAaSC,KAbT,EAcC;CACC,YAAI,CAAC,KAAK0B,YAAV,EACA;CACC,eAAKA,YAAL,GAAoB,KAAKN,UAAL,CAAgBlB,KAApC;CACA;;CACD,aAAKyB,WAAL,GAAoBW,cAAI,CAACC,MAAL,CAAYvC,KAAK,CAACC,MAAN,CAAaC,KAAzB,CAApB;CACA,OApBF;CAqBCiD,MAAAA,WArBD,yBAsBC;CACC,YAAI,KAAKxB,WAAL,IAAoB,KAAKD,YAAzB,IAAyC,KAAKA,YAAL,KAAsB,KAAKC,WAAxE,EACA;CACC,eAAKP,UAAL,CAAgBlB,KAAhB,GAAwB,KAAKyB,WAA7B;CACA,eAAKD,YAAL,GAAoB,IAApB;CACA,eAAKC,WAAL,GAAmB,IAAnB;CAEA,eAAK7B,KAAL,CAAW,kBAAX,EAA+B,KAAKsB,UAAL,CAAgBlB,KAA/C;CACA,SAPD,MASA;CACC,eAAKkB,UAAL,CAAgBlB,KAAhB,GAAwBoC,cAAI,CAACC,MAAL,CAAY,KAAKnB,UAAL,CAAgBlB,KAA5B,CAAxB;CACA;;CAED,aAAKkB,UAAL,CAAgBrC,IAAhB,GAAuBQ,6BAAoB,CAACC,IAA5C;CACA,OArCF;CAsCC4D,MAAAA,cAtCD,4BAuCC;CACC,YAAI,KAAK1B,YAAT,EACA;CACC,eAAKN,UAAL,CAAgBlB,KAAhB,GAAwB,KAAKwB,YAA7B;CACA,eAAKA,YAAL,GAAoB,IAApB;CACA,eAAKC,WAAL,GAAmB,IAAnB;CACA;;CAED,aAAKP,UAAL,CAAgBlB,KAAhB,GAAwBoC,cAAI,CAACC,MAAL,CAAY,KAAKnB,UAAL,CAAgBlB,KAA5B,CAAxB;CACA,aAAKkB,UAAL,CAAgBrC,IAAhB,GAAuBQ,6BAAoB,CAACC,IAA5C;CACA;CAjDF,KArED;CAwHCgB,IAAAA,OAxHD,qBAyHC;CACC,UAAI,KAAKoB,gBAAL,IAAyB,CAAC,KAAKR,UAAL,CAAgBlB,KAA9C,EACA;CACC,aAAKkB,UAAL,CAAgBlB,KAAhB,GAAwB,KAAKT,QAAL,CAAc,+CAAd,CAAxB;CACA;;CAED,UAAI,CAAC,KAAKmC,gBAAN,IAA0B,KAAKR,UAAL,CAAgBlB,KAA9C,EACA;CACC,aAAKkB,UAAL,CAAgBlB,KAAhB,GAAwBoC,cAAI,CAACC,MAAL,CAAY,KAAKnB,UAAL,CAAgBlB,KAA5B,CAAxB;CACA;CACD,KAnIF;CAoICS,IAAAA,QAAQ;CApIT;CAHF,CADM;;CCIA,IAAM0C,YAAY,GACxB;CACCzE,EAAAA,IAAI,EAAE,0BADP;CAECC,EAAAA,SAAS,EACR;CACCC,IAAAA,KAAK,EACJ;CACCC,MAAAA,IAAI,EAAE;CAACC,QAAAA,IAAI,EAAEC;CAAP,OADP;CAECqE,MAAAA,aAAa,EAAE;CAACtE,QAAAA,IAAI,EAAEuE,KAAP;CAAc,mBAAS;CAAvB,OAFhB;CAGCjC,MAAAA,QAAQ,EAAE;CAACtC,QAAAA,IAAI,EAAEqC,MAAP;CAAe,mBAAS;CAAxB,OAHX;CAICmC,MAAAA,YAAY,EAAE;CAACxE,QAAAA,IAAI,EAAEC,MAAP;CAAe,mBAAS;CAAxB,OAJf;CAKCwE,MAAAA,YAAY,EAAE;CAACzE,QAAAA,IAAI,EAAEC,MAAP;CAAe,mBAAS;CAAxB,OALf;CAMCyE,MAAAA,gBAAgB,EAAE;CAAC1E,QAAAA,IAAI,EAAEC,MAAP;CAAe,mBAAS;CAAxB,OANnB;CAOC0E,MAAAA,oBAAoB,EAAE;CAAC3E,QAAAA,IAAI,EAAEC,MAAP;CAAe,mBAAS;CAAxB;CAPvB,KAFF;CAWCG,IAAAA,IAAI,EAAE,gBAAM;CACX,aAAO;CACNR,QAAAA,IAAI,EAAE,SADA;CAENgF,QAAAA,aAAa,EAAE,IAFT;CAGNC,QAAAA,OAAO,EAAE;CAHH,OAAP;CAKA,KAjBF;CAkBCxE,IAAAA,QAAQ,EACP;CACCC,MAAAA,UADD,wBAEC;CACC,eAAO,KAAKP,IAAL,KAAcQ,6BAAoB,CAACC,IAA1C;CACA,OAJF;CAKCsE,MAAAA,kBALD,gCAMC;CACC,eAAO,KAAKR,aAAL,CAAmBS,GAAnB,CAAuB,UAAAC,IAAI,EAAI;CACrC,4BAAWA,IAAI,CAACC,EAAhB;CACA,SAFM,CAAP;CAGA,OAVF;CAWCC,MAAAA,mBAXD,iCAYC;CACC,eAAO,KAAKZ,aAAL,CAAmBS,GAAnB,CAAuB,UAAAC,IAAI,EAAI;CACrC,iBAAO,CAAC,MAAD,EAASA,IAAI,CAACC,EAAd,CAAP;CACA,SAFM,CAAP;CAGA,OAhBF;CAiBCE,MAAAA,oBAjBD,kCAkBC;CACC,yBAAU,KAAKX,YAAf,eAAgC,KAAKC,YAArC;CACA,OApBF;CAqBCW,MAAAA,wBArBD,sCAsBC;CACC,YAAIC,gBAAJ;;CACA,YAAI,KAAKV,oBAAL,KAA8B,GAAlC,EACA;CACCU,UAAAA,gBAAgB,GAAG,KAAK5E,QAAL,CAAc,6CAAd,CAAnB;CACA,SAHD,MAIK,IAAI,KAAKkE,oBAAL,KAA8B,GAAlC,EACL;CACCU,UAAAA,gBAAgB,GAAG,KAAK5E,QAAL,CAAc,2CAAd,CAAnB;CACA;;CAED,yBAAU,KAAKiE,gBAAf,cAAmCW,gBAAnC;CACA,OAlCF;CAmCCC,MAAAA,aAnCD,2BAoCC;CACC,eAAO5E,EAAE,CAAC6E,SAAH,WAAgB,KAAKf,YAArB,cAAqC,KAAKC,YAA1C,EAAP;CACA,OAtCF;CAuCCe,MAAAA,WAvCD,yBAwCC;CACC,YAAIC,QAAQ,GAAGC,MAAM,CAAC,KAAKhB,gBAAN,CAArB;CACA,YAAMiB,YAAY,GAAG,KAAKhB,oBAA1B;;CAEA,YAAIgB,YAAY,KAAK,GAArB,EACA;CACCF,UAAAA,QAAQ,IAAI,KAAK,EAAL,GAAU,IAAtB;CACA,SAHD,MAKA;CACCA,UAAAA,QAAQ,IAAI,KAAK,IAAjB;CACA;;CAED,YAAMD,WAAW,GAAG,IAAII,IAAJ,EAApB;CACAJ,QAAAA,WAAW,CAACK,OAAZ,CAAoB,KAAKP,aAAL,CAAmBQ,OAAnB,KAA+BL,QAAnD;CAEA,eAAOD,WAAP;CACA,OAzDF;CA0DC/E,MAAAA,QA1DD,sBA2DC;CACC,eAAOC,EAAE,CAACC,OAAV;CACA;CA7DF,KAnBF;CAkFCC,IAAAA,OAAO,EACN;CACCC,MAAAA,YADD,0BAEC;CACC,aAAKC,KAAL,CAAW,cAAX,EAA2B,KAAKlB,IAAhC;CACA,aAAKyB,SAAL,CAAe,YAAM;CAEpB;CACA;CACA,SAJD;CAKA,OATF;CAUC0E,MAAAA,gBAVD,4BAUkB/E,KAVlB,EAWC;CAAA;;CACC,YAAIgF,oBAAU,CAACC,QAAX,CAAoB,aAApB,CAAJ,EACA;CACCvF,UAAAA,EAAE,CAACwF,QAAH,CAAY;CACXC,YAAAA,IAAI,EAAEnF,KAAK,CAACoF,aADD;CAEXC,YAAAA,KAAK,EAAE,KAAK/E,KAAL,CAAW,WAAX,CAFI;CAGXgF,YAAAA,KAAK,EAAE,KAHI;CAIXC,YAAAA,cAAc,EAAE,wBAACvF,KAAD,EAAW;CAC1B,cAAA,KAAI,CAACF,KAAL,CAAW,YAAX,EAAyBE,KAAzB;CACA;CANU,WAAZ;CAQA;;CAED,eAAO,KAAP;CACA,OAzBF;CA0BCwF,MAAAA,gBA1BD,8BA2BC;CAAA;;CACC,aAAK5B,aAAL,CAAmB6B,OAAnB,CAA2B,KAAKnF,KAAL,CAAW,WAAX,CAA3B;CACA,aAAKsD,aAAL,CAAmBiB,OAAnB,CAA2B,KAAKa,gBAAL,CAAsB,KAAKjC,YAA3B,CAA3B;CACA,aAAKG,aAAL,CAAmB+B,WAAnB,CAA+B,UAACzF,KAAD,EAAW;CACzC,UAAA,MAAI,CAACJ,KAAL,CAAW,YAAX,EAAyBI,KAAzB;;CACAR,UAAAA,EAAE,CAACkG,SAAH,CAAa,MAAI,CAACtF,KAAL,CAAW,WAAX,CAAb,EAAsC,QAAtC;;CACA,UAAA,MAAI,CAACsD,aAAL,CAAmBiC,QAAnB;CACA,SAJD;CAKA,aAAKjC,aAAL,CAAmBkC,IAAnB;CACA,OApCF;CAqCCC,MAAAA,gBArCD,8BAsCC;CAAA;;CACC;CACAC,QAAAA,UAAU,CAAC,YAAM;CAChB,UAAA,MAAI,CAACnC,OAAL,CAAaoC,cAAb,CAA4B,MAAI,CAAC3B,aAAjC,EAAgD,MAAI,CAACE,WAArD,EAAkE,KAAlE;CACA,SAFS,EAEP,CAFO,CAAV;CAGA,OA3CF;CA4CC0B,MAAAA,gBA5CD,4BA4CkBlG,KA5ClB,EA6CC;CACC,aAAKF,KAAL,CAAW,gBAAX,EAA6BE,KAAK,CAACC,MAAN,CAAaC,KAA1C;CACA,aAAK6F,gBAAL;CACA,OAhDF;CAiDCI,MAAAA,oBAjDD,gCAiDsBnG,KAjDtB,EAkDC;CACC,aAAKF,KAAL,CAAW,oBAAX,EAAiCE,KAAK,CAACC,MAAN,CAAaC,KAA9C;CACA,aAAK6F,gBAAL;CACA,OArDF;CAsDCL,MAAAA,gBAtDD,4BAsDkBU,IAtDlB,EAuDC;CACC;CACA,YAAMC,KAAK,GAAGD,IAAI,CAACE,KAAL,CAAW,QAAX,CAAd;CACA,YAAIC,KAAK,GAAGC,QAAQ,CAACH,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAApB;CACA,YAAMI,OAAO,GAAGD,QAAQ,CAACH,KAAK,CAAC,CAAD,CAAN,EAAW,EAAX,CAAxB;;CAEA,YAAIA,KAAK,CAACK,MAAN,KAAiB,CAArB,EACA;CACC,cAAMC,QAAQ,GAAGN,KAAK,CAAC,CAAD,CAAtB;;CACA,cAAIM,QAAQ,KAAK,IAAb,IAAqBJ,KAAK,GAAG,EAAjC,EACA;CACC;CACAA,YAAAA,KAAK,GAAGA,KAAK,GAAG,EAAhB;CACA;;CACD,cAAII,QAAQ,KAAK,IAAb,IAAqBJ,KAAK,KAAK,EAAnC,EACA;CACC;CACAA,YAAAA,KAAK,GAAG,CAAR;CACA;CACD;;CAED,YAAMK,cAAc,GAAGL,KAAK,GAAG,IAA/B;CACA,YAAMM,gBAAgB,GAAGJ,OAAO,GAAG,EAAnC;CAEA,eAAOG,cAAc,GAAGC,gBAAxB;CACA,OAhFF;CAiFCC,MAAAA,YAjFD,wBAiFc9G,KAjFd,EAkFC;CACC,aAAKF,KAAL,CAAW,YAAX,EAAyBE,KAAzB,EADD;CAGC,OArFF;CAsFC+G,MAAAA,cAtFD,0BAsFgB/G,KAtFhB,EAuFC;CACC,aAAKF,KAAL,CAAW,cAAX,EAA2BE,KAA3B,EADD;CAGC,OA1FF;CA2FCgH,MAAAA,oBA3FD,kCA4FC;CAAA;;CACC,aAAK3G,SAAL,CAAe,YAAM;CACpB,UAAA,MAAI,CAACC,KAAL,CAAW,cAAX,EAA2B2G,SAA3B,GAAuC,EAAvC;;CACA,UAAA,MAAI,CAACC,gBAAL;;CACA,UAAA,MAAI,CAACC,YAAL,CAAkBC,QAAlB,CAA2B,MAAI,CAAC9G,KAAL,CAAW,cAAX,CAA3B;CACA,SAJD;CAKA,OAlGF;CAmGC+G,MAAAA,kBAnGD,8BAmGoBtI,IAnGpB,EAoGC;CACC,YAAIA,IAAI,KAAKQ,6BAAoB,CAACuD,IAAlC,EACA;CACC,eAAKjD,YAAL;CACA;CACD,OAzGF;CA0GCqH,MAAAA,gBA1GD,8BA2GC;CAAA;;CACC,aAAKC,YAAL,GAAoB,IAAIG,6BAAJ,CAAgB;CACnCrD,UAAAA,EAAE,EAAE,mBAD+B;CAEnCsD,UAAAA,aAAa,EAAE;CACdtD,YAAAA,EAAE,EAAE,mBADU;CAEduD,YAAAA,gBAAgB,EAAE,KAAKtD,mBAFT;CAGduD,YAAAA,iBAAiB,EAAE,CAAC,CAAC,MAAD,EAAS,KAAKnG,QAAL,CAAcoG,EAAvB,CAAD,CAHL;CAIdC,YAAAA,MAAM,EAAE;CACP,+BAAiB,sBAAC3H,KAAD,EAAW;CAC3B,gBAAA,MAAI,CAAC8G,YAAL,CAAkB9G,KAAlB;CACA,eAHM;CAIP,iCAAmB,wBAACA,KAAD,EAAW;CAC7B,gBAAA,MAAI,CAAC+G,cAAL,CAAoB/G,KAApB;CACA;CANM,aAJM;CAYd4H,YAAAA,QAAQ,EAAE,CACT;CAAC3D,cAAAA,EAAE,EAAE;CAAL,aADS,EAET;CAACA,cAAAA,EAAE,EAAE;CAAL,aAFS;CAZI;CAFoB,SAAhB,CAApB;CAoBA,OAhIF;CAiIC4D,MAAAA,SAjID,uBAkIC;CACC,aAAKjE,aAAL,GAAqB,IAAIlE,EAAE,CAACoI,cAAP,CAAsB;CAC1CC,UAAAA,UAAU,EAAE,KAAKrC,gBAAL,CAAsB,KAAKjC,YAA3B,CAD8B;CAE1C0B,UAAAA,IAAI,EAAE,KAAK7E,KAAL,CAAW,WAAX,CAFoC;CAG1C0H,UAAAA,QAAQ,EAAE,oBAAM;CAH0B,SAAtB,CAArB;CAKA,OAxIF;CAyICC,MAAAA,WAzID,yBA0IC;CAAA;;CACC,aAAKpE,OAAL,GAAe,IAAIqE,wBAAJ,CAAY;CAC1BC,UAAAA,IAAI,EAAE,KAAK7H,KAAL,CAAW,aAAX,CADoB;CAE1B8H,UAAAA,aAAa,EAAE,IAFW;CAG1BC,UAAAA,iBAAiB,EAAE,KAHO;CAI1BC,UAAAA,gBAAgB,EAAE,GAJQ;CAK1BC,UAAAA,WAAW,EAAE;CALa,SAAZ,CAAf;CAOA,aAAK1E,OAAL,CAAa2E,IAAb;CACA,aAAK3E,OAAL,CAAa4E,SAAb,CAAuB,cAAvB,EAAuC,UAACzI,KAAD,EAAW;CACjD,UAAA,MAAI,CAAC0I,uBAAL,CAA6B1I,KAA7B;CACA,SAFD;CAGA,OAtJF;CAuJC2I,MAAAA,aAvJD,2BAwJC;CAAA;;CACC,YAAI,KAAKrF,aAAL,CAAmBoD,MAAnB,GAA4B,CAAhC,EACA;CACCkC,UAAAA,cAAI,CAACC,SAAL,CAAe,yCAAf,EAA0D;CACzDzJ,YAAAA,IAAI,EAAE;CACL0J,cAAAA,KAAK,EAAE,KAAKhF,kBADP;CAELiF,cAAAA,QAAQ,EAAEC,kBAAI,CAACC,UAAL,CAAgB,KAAK3E,aAAL,CAAmBQ,OAAnB,KAA+BkE,kBAAI,CAACE,YAAL,KAAsB,CAArE,CAFL;CAGLC,cAAAA,MAAM,EAAEH,kBAAI,CAACC,UAAL,CAAgB,KAAK3E,aAAL,CAAmBQ,OAAnB,KAA+BkE,kBAAI,CAACE,YAAL,KAAsB,EAArE;CAHH;CADmD,WAA1D,EAOCE,IAPD,CAOM,UAAAC,QAAQ,EAAI;CACjB,YAAA,MAAI,CAACxF,OAAL,CAAayF,MAAb,CACCD,QAAQ,CAACjK,IAAT,CAAcmK,OADf,EAECF,QAAQ,CAACjK,IAAT,CAAcoK,aAFf;;CAIA,YAAA,MAAI,CAAC3F,OAAL,CAAaoC,cAAb,CAA4B,MAAI,CAAC3B,aAAjC,EAAgD,MAAI,CAACE,WAArD,EAAkE,KAAlE;CACA,WAbD,WAcO,UAAAiF,KAAK,EAAI,EAdhB;CAeA;CACD,OA3KF;CA4KCf,MAAAA,uBA5KD,mCA4KyB1I,KA5KzB,EA6KC;CACC,YAAIA,KAAK,YAAY0J,0BAArB,EACA;CACC,cAAItK,IAAI,GAAGY,KAAK,CAAC2J,OAAN,EAAX;CAEA,cAAMrF,aAAa,GAAGlF,IAAI,CAAC2J,QAA3B;CACA,cAAMtE,QAAQ,GAAG,CAACrF,IAAI,CAAC+J,MAAL,GAAc/J,IAAI,CAAC2J,QAApB,IAAgC,IAAhC,GAAuC,EAAxD,CAJD;;CAKC,cAAMpE,YAAY,GAAG,KAAKhB,oBAA1B;CAEA,eAAK7D,KAAL,CAAW,YAAX,EAAyBwE,aAAzB;CACA,eAAKxE,KAAL,CAAW,YAAX,EAAyB,KAAK8J,OAAL,CAAaC,UAAb,CAAwBvF,aAAxB,CAAzB;;CAEA,cAAIK,YAAY,KAAK,GAAjB,IAAwBF,QAAQ,GAAG,EAAX,KAAkB,CAA9C,EACA;CACC,iBAAK3E,KAAL,CAAW,gBAAX,EAA6B2E,QAAQ,GAAG,EAAxC;CACA,iBAAK3E,KAAL,CAAW,oBAAX,EAAiC,GAAjC;CACA,WAJD,MAMA;CACC,iBAAKA,KAAL,CAAW,gBAAX,EAA6B2E,QAA7B;CACA,iBAAK3E,KAAL,CAAW,oBAAX,EAAiC,GAAjC;CACA;CACD;CACD,OApMF;CAqMCgK,MAAAA,kBArMD,8BAqMoB9F,IArMpB,EAsMC;CACC,YAAIA,IAAI,CAAC+F,MAAT,EACA;CACC,iBAAO;CACN3H,YAAAA,eAAe,iBAAU4H,SAAS,CAAChG,IAAI,CAAC+F,MAAN,CAAnB;CADT,WAAP;CAGA;;CAED,eAAO,EAAP;CACA;CA/MF,KAnFF;CAoSCvJ,IAAAA,OApSD,qBAqSC,EArSD;CAuSCyJ,IAAAA,OAvSD,qBAwSC;CAAA;;CACC,WAAK/C,gBAAL;CACA,WAAKC,YAAL,CAAkBC,QAAlB,CAA2B,KAAK9G,KAAL,CAAW,cAAX,CAA3B,EAFD;CAIC;CACA;;CAEA,WAAKG,KAAL,CAAWC,GAAX,CAAe,kBAAf,EAAmC,UAAC3B,IAAD,EAAU;CAC5C,QAAA,MAAI,CAACsI,kBAAL,CAAwBtI,IAAxB;CACA,OAFD;CAIA,WAAK0B,KAAL,CAAWC,GAAX,CAAe,oBAAf,EAAqC,YAAM;CAC1C,QAAA,MAAI,CAACsG,oBAAL;CACA,OAFD;CAGA,KAtTF;CAuTCrG,IAAAA,QAAQ;CAvTT;CAHF,CADM;;CCHA,IAAMuJ,cAAc,GAC3B;CACCtL,EAAAA,IAAI,EAAE,4BADP;CAECC,EAAAA,SAAS,EACR;CACCC,IAAAA,KAAK,EACJ;CACCC,MAAAA,IAAI,EAAE;CAACC,QAAAA,IAAI,EAAEC;CAAP,OADP;CAECkL,MAAAA,aAAa,EAAE;CAACnL,QAAAA,IAAI,EAAE+B;CAAP,OAFhB;CAGCO,MAAAA,QAAQ,EAAE;CAACtC,QAAAA,IAAI,EAAEqC;CAAP,OAHX;CAIC+I,MAAAA,kBAAkB,EAAE;CAACpL,QAAAA,IAAI,EAAEuE;CAAP;CAJrB,KAFF;CAQCnE,IAAAA,IAAI,EAAE,gBAAW;CAChB,aAAO;CACNR,QAAAA,IAAI,EAAE;CADA,OAAP;CAGA,KAZF;CAaCS,IAAAA,QAAQ,EACR;CACCC,MAAAA,UADD,wBAEC;CACC,eAAO,KAAKP,IAAL,KAAcQ,6BAAoB,CAACC,IAA1C;CACA,OAJF;CAKCwB,MAAAA,UALD,wBAMC;CACC,YAAI,KAAKmJ,aAAT,EACA;CACC,iBAAO,KAAK1K,QAAL,CAAc,8CAAd,CAAP;CACA,SAHD,MAKA;CACC,iBAAO,KAAKA,QAAL,CAAc,+CAAd,CAAP;CACA;CACD,OAfF;CAgBC4K,MAAAA,wBAhBD,sCAiBC;CACC,eAAO,KAAKD,kBAAL,CAAwBrG,GAAxB,CAA4B,UAAAC,IAAI,EAAI;CAC1C,iBAAO,CAAC,MAAD,EAASA,IAAI,CAACC,EAAd,CAAP;CACA,SAFM,CAAP;CAGA,OArBF;CAsBCxE,MAAAA,QAtBD,sBAuBC;CACC,eAAOC,EAAE,CAACC,OAAV;CACA;CAzBF,KAdD;CAyCCC,IAAAA,OAAO,EACP;CACCC,MAAAA,YADD,0BAEC;CACC,aAAKC,KAAL,CAAW,cAAX,EAA2B,KAAKlB,IAAhC;CACA,OAJF;CAKC0L,MAAAA,qBALD,mCAMC;CACC,aAAKxK,KAAL,CAAW,qBAAX;CACA,OARF;CASCuH,MAAAA,kBATD,8BASoBtI,IATpB,EAUC;CACC,YAAIA,IAAI,KAAKQ,6BAAoB,CAACuD,IAAlC,EACA;CACC,eAAKjD,YAAL;CACA;CACD,OAfF;CAgBC0K,MAAAA,iBAhBD,6BAgBmBvK,KAhBnB,EAiBC;CACC,aAAKF,KAAL,CAAW,iBAAX,EAA8BE,KAA9B,EADD;CAGC,OApBF;CAqBCwK,MAAAA,mBArBD,+BAqBqBxK,KArBrB,EAsBC;CACC,aAAKF,KAAL,CAAW,mBAAX,EAAgCE,KAAhC,EADD;CAGC,OAzBF;CA0BC8J,MAAAA,kBA1BD,8BA0BoB9F,IA1BpB,EA2BC;CACC,YAAIA,IAAI,CAAC+F,MAAT,EACA;CACC,iBAAO;CACN3H,YAAAA,eAAe,iBAAU4H,SAAS,CAAChG,IAAI,CAAC+F,MAAN,CAAnB;CADT,WAAP;CAGA;;CAED,eAAO,EAAP;CACA,OApCF;CAqCCU,MAAAA,qBArCD,mCAsCC;CAAA;;CACC,aAAKC,iBAAL,GAAyB,IAAIpD,6BAAJ,CAAgB;CACxCrD,UAAAA,EAAE,EAAE,wBADoC;CAExCsD,UAAAA,aAAa,EAAE;CACdtD,YAAAA,EAAE,EAAE,wBADU;CAEduD,YAAAA,gBAAgB,EAAE,KAAK6C,wBAFT;CAGd1C,YAAAA,MAAM,EAAE;CACP,+BAAiB,sBAAC3H,KAAD,EAAW;CAC3B,gBAAA,KAAI,CAACuK,iBAAL,CAAuBvK,KAAvB;CACA,eAHM;CAIP,iCAAmB,wBAACA,KAAD,EAAW;CAC7B,gBAAA,KAAI,CAACwK,mBAAL,CAAyBxK,KAAzB;CACA;CANM,aAHM;CAWd4H,YAAAA,QAAQ,EAAE,CACT;CAAC3D,cAAAA,EAAE,EAAE;CAAL,aADS,EAET;CAACA,cAAAA,EAAE,EAAE;CAAL,aAFS;CAXI;CAFyB,SAAhB,CAAzB;CAmBA,OA1DF;CA2DC0G,MAAAA,yBA3DD,uCA4DC;CAAA;;CACC,aAAKtK,SAAL,CAAe,YAAM;CACpB,UAAA,MAAI,CAACC,KAAL,CAAW,mBAAX,EAAgC2G,SAAhC,GAA4C,EAA5C;;CACA,UAAA,MAAI,CAACwD,qBAAL;;CACA,UAAA,MAAI,CAACC,iBAAL,CAAuBtD,QAAvB,CAAgC,MAAI,CAAC9G,KAAL,CAAW,mBAAX,CAAhC;CACA,SAJD;CAKA;CAlEF,KA1CD;CA8GC2J,IAAAA,OA9GD,qBA+GC;CAAA;;CACC,WAAKQ,qBAAL;CACA,WAAKC,iBAAL,CAAuBtD,QAAvB,CAAgC,KAAK9G,KAAL,CAAW,mBAAX,CAAhC;CAEA,WAAKG,KAAL,CAAWC,GAAX,CAAe,kBAAf,EAAmC,UAAC3B,IAAD,EAAU;CAC5C,QAAA,MAAI,CAACsI,kBAAL,CAAwBtI,IAAxB;CACA,OAFD;CAIA,WAAK0B,KAAL,CAAWC,GAAX,CAAe,yBAAf,EAA0C,YAAM;CAC/C,QAAA,MAAI,CAACiK,yBAAL;CACA,OAFD;CAGA,KA1HF;CA2HChK,IAAAA,QAAQ;CA3HT;CAHF,CADO;;CCQP,IAAMiK,UAAU,GAAG,CAClBjM,UADkB,EAElBiC,aAFkB,EAGlBO,eAHkB,EAIlBkC,YAJkB,EAKlB6G,cALkB,CAAnB;CAQA,IAAMW,eAAe,GAAG,EAAxB;CACAD,UAAU,CAACE,OAAX,CAAmB,UAAAC,SAAS,EAAI;CAC/BF,EAAAA,eAAe,CAACE,SAAS,CAACnM,IAAX,CAAf,GAAkCmM,SAAS,CAAClM,SAA5C;CACA,CAFD;AAIAmM,iBAAS,CAACnM,SAAV,CAAoB,iCAApB,EACA;CACCC,EAAAA,KAAK,EACL;CACCmM,IAAAA,YAAY,EAAE;CAACjM,MAAAA,IAAI,EAAE0F,MAAP;CAAe,iBAAS;CAAxB,KADf;CAECwG,IAAAA,UAAU,EAAE;CAAElM,MAAAA,IAAI,EAAEqC,MAAR;CAAgB,iBAAS;CAAzB,KAFb;CAGCtC,IAAAA,IAAI,EAAE;CAAEC,MAAAA,IAAI,EAAEC,MAAR;CAAgB,iBAASM,6BAAoB,CAACsC;CAA9C,KAHP;CAICP,IAAAA,QAAQ,EAAE;CAAEtC,MAAAA,IAAI,EAAEqC,MAAR;CAAgB,iBAAS;CAAzB,KAJX;CAKC8J,IAAAA,SAAS,EAAE;CAAEnM,MAAAA,IAAI,EAAEuE,KAAR;CAAe,iBAAS;CAAxB,KALZ;CAMC6H,IAAAA,UAAU,EAAE;CAAEpM,MAAAA,IAAI,EAAEuE,KAAR;CAAe,iBAAS;CAAxB,KANb;CAOC/B,IAAAA,UAAU,EAAE;CAAExC,MAAAA,IAAI,EAAEC,MAAR;CAAgB,iBAAS;CAAzB,KAPb;CAQCoM,IAAAA,MAAM,EAAE;CAAErM,MAAAA,IAAI,EAAE0F,MAAR;CAAgB,iBAAS;CAAzB,KART;CASC4G,IAAAA,cAAc,EAAE;CAAEtM,MAAAA,IAAI,EAAEC,MAAR;CAAgB,iBAAS;CAAzB,KATjB;CAUCsM,IAAAA,MAAM,EAAE;CAAEvM,MAAAA,IAAI,EAAEC,MAAR;CAAgB,iBAAS;CAAzB,KAVT;CAWCuM,IAAAA,UAAU,EAAE;CAAExM,MAAAA,IAAI,EAAEC,MAAR;CAAgB,iBAAS;CAAzB,KAXb;CAYCwM,IAAAA,mBAAmB,EAAE;CAAEzM,MAAAA,IAAI,EAAE+B,OAAR;CAAiB,iBAAS;CAA1B;CAZtB,GAFD;CAgBC3B,EAAAA,IAAI,EAAE,gBACN;CACC,WAAO;CACNsM,MAAAA,UAAU,EAAE;CACX,iBAAS,KAAK3M,IADH;CAEX,oBAAY,KAAKA,IAFN;CAGX,mBAAW,KAAKA,IAHL;CAIX,qBAAa,KAAKA;CAJP,OADN;CAON4M,MAAAA,MAAM,EAAE,EAPF;CAQNC,MAAAA,aAAa,EAAE,EART;CASN1M,MAAAA,KAAK,EAAE;CACN2M,QAAAA,YAAY,EAAE,EADR;CAENnK,QAAAA,YAAY,EAAE,EAFR;CAGNvC,QAAAA,YAAY,EAAE;CAHR,OATD;CAcNiC,MAAAA,UAAU,EAAE;CACXlB,QAAAA,KAAK,EAAE,EADI;CAEXnB,QAAAA,IAAI,EAAEQ,6BAAoB,CAACC,IAFhB;CAGXsM,QAAAA,MAAM,EAAE;CAHG,OAdN;CAmBNjL,MAAAA,QAAQ,EAAE;CACTgL,QAAAA,YAAY,EAAE,EADL;CAETnK,QAAAA,YAAY,EAAE;CAFL,OAnBJ;CAuBNZ,MAAAA,cAAc,EAAE;CACf+K,QAAAA,YAAY,EAAE,KADC;CAEfnK,QAAAA,YAAY,EAAE;CAFC,OAvBV;CA2BN4B,MAAAA,aAAa,EAAE;CACduI,QAAAA,YAAY,EAAE,EADA;CAEdnK,QAAAA,YAAY,EAAE;CAFA,OA3BT;CA+BNyI,MAAAA,aAAa,EAAE;CACd0B,QAAAA,YAAY,EAAE,KADA;CAEdnK,QAAAA,YAAY,EAAE;CAFA,OA/BT;CAmCN0I,MAAAA,kBAAkB,EAAE;CACnByB,QAAAA,YAAY,EAAE,EADK;CAEnBnK,QAAAA,YAAY,EAAE;CAFK,OAnCd;CAuCN8B,MAAAA,YAAY,EAAE;CACbqI,QAAAA,YAAY,EAAE,EADD;CAEbnK,QAAAA,YAAY,EAAE;CAFD,OAvCR;CA2CN+B,MAAAA,YAAY,EAAE;CACboI,QAAAA,YAAY,EAAE,EADD;CAEbnK,QAAAA,YAAY,EAAE;CAFD,OA3CR;CA+CNgC,MAAAA,gBAAgB,EAAE;CACjBmI,QAAAA,YAAY,EAAE,IADG;CAEjBnK,QAAAA,YAAY,EAAE;CAFG,OA/CZ;CAmDNiC,MAAAA,oBAAoB,EAAE;CACrBkI,QAAAA,YAAY,EAAE,GADO;CAErBnK,QAAAA,YAAY,EAAE;CAFO,OAnDhB;CAuDNqK,MAAAA,MAAM,EAAE,EAvDF;CAwDNC,MAAAA,aAAa,EAAE,KAxDT;CAyDNC,MAAAA,SAAS,EAAE,EAzDL;CA0DNC,MAAAA,YAAY,EAAE;CA1DR,KAAP;CA4DA,GA9EF;CA+EC1L,EAAAA,OA/ED,qBAgFC;CACC,QAAI,KAAK2L,cAAT,EACA;CACC,WAAKjN,KAAL,CAAWwC,YAAX,GAA0B,KAAKwJ,UAAL,CAAgB,OAAhB,CAA1B;CACA,WAAKrK,QAAL,CAAca,YAAd,GAA6B,KAAKwJ,UAAL,CAAgB,UAAhB,CAA7B;CACA,WAAKf,aAAL,CAAmB0B,YAAnB,GAAkC,KAAKX,UAAL,CAAgB,WAAhB,CAAlC;CACA,WAAK9J,UAAL,CAAgBlB,KAAhB,GAAwB,KAAKoL,cAA7B;CACA,WAAKxK,cAAL,CAAoB+K,YAApB,GAAmC,CAAC,CAAC,KAAKX,UAAL,CAAgB,UAAhB,CAArC;CACA,WAAK1J,UAAL,GAAkBc,cAAI,CAACC,MAAL,CAAY,KAAKf,UAAjB,CAAlB;CAEA,WAAK8B,aAAL,CAAmBuI,YAAnB,kCAAsC,KAAKV,SAA3C;;CACA,UAAI,KAAKD,UAAL,CAAgB,WAAhB,CAAJ,EACA;CACC,aAAKd,kBAAL,CAAwByB,YAAxB,kCAA2C,KAAKT,UAAhD;CACA;CACD,KAdD,MAeK,IAAI,KAAKxJ,gBAAT,EACL;CACC,WAAKwK,YAAL;CAEA,WAAKlN,KAAL,CAAWwC,YAAX,GAA0B,EAA1B;CACA,WAAKb,QAAL,CAAca,YAAd,GAA6B,EAA7B;CACA,WAAKZ,cAAL,CAAoB+K,YAApB,GAAmC,KAAnC;CACA,WAAK1B,aAAL,CAAmB0B,YAAnB,GAAkC,KAAlC;CAEA,UAAMQ,WAAW,GAAG;CACnBpI,QAAAA,EAAE,EAAE,KAAK3C,QAAL,CAAcoG,EADC;CAEnBxI,QAAAA,KAAK,EAAE,KAAKoC,QAAL,CAAckB,SAFF;CAGnBuH,QAAAA,MAAM,EAAE,KAAKzI,QAAL,CAAcU;CAHH,OAApB;CAKA,WAAKsB,aAAL,CAAmBuI,YAAnB,CAAgC5J,IAAhC,CAAqCoK,WAArC;CACA,WAAKjC,kBAAL,CAAwByB,YAAxB,CAAqC5J,IAArC,CAA0CoK,WAA1C;CACA;;CACD,SAAKnN,KAAL,CAAW2M,YAAX,GAA0B,KAAK3M,KAAL,CAAWwC,YAArC;CACA,SAAKb,QAAL,CAAcgL,YAAd,GAA6B,KAAKhL,QAAL,CAAca,YAA3C;CACA,SAAKZ,cAAL,CAAoBY,YAApB,GAAmC,KAAKZ,cAAL,CAAoB+K,YAAvD;CACA,SAAK1B,aAAL,CAAmBzI,YAAnB,GAAkC,KAAKyI,aAAL,CAAmB0B,YAArD;CACA,SAAKvI,aAAL,CAAmB5B,YAAnB,kCAAsC,KAAK4B,aAAL,CAAmBuI,YAAzD;CACA,SAAKzB,kBAAL,CAAwB1I,YAAxB,kCAA2C,KAAK0I,kBAAL,CAAwByB,YAAnE;CAEA,SAAKS,qBAAL;CACA,SAAKC,kBAAL;CACA,GA1HF;CA2HCtC,EAAAA,OA3HD,qBA4HC;CACC,QAAI,KAAKrI,gBAAT,EACA;CACC,WAAK4K,iBAAL;CACA;CACD,GAjIF;CAkICnN,EAAAA,QAAQ,EACR;CACCuC,IAAAA,gBADD,8BAEC;CACC,aAAO,KAAK7C,IAAL,KAAcQ,6BAAoB,CAACsC,MAA1C;CACA,KAJF;CAKCsK,IAAAA,cALD,4BAMC;CACC,aAAO,KAAKpN,IAAL,KAAcQ,6BAAoB,CAACC,IAA1C;CACA,KARF;CASCiN,IAAAA,aATD,2BAUC;CACC,aAAO,KAAKf,UAAL,CAAgB,OAAhB,MAA6BnM,6BAAoB,CAACuD,IAAzD;CACA,KAZF;CAaC4J,IAAAA,gBAbD,8BAcC;CACC,aAAO,KAAKhB,UAAL,CAAgB,UAAhB,MAAgCnM,6BAAoB,CAACuD,IAA5D;CACA,KAhBF;CAiBC6J,IAAAA,eAjBD,6BAkBC;CACC,aAAO,KAAKjB,UAAL,CAAgB,SAAhB,MAA+BnM,6BAAoB,CAACuD,IAA3D;CACA,KApBF;CAqBC8J,IAAAA,wBArBD,sCAsBC;CACC,aAAO,KAAK9L,cAAL,CAAoB+K,YAApB,KAAqC,KAAK/K,cAAL,CAAoBY,YAAhE;CACA,KAxBF;CAyBCmL,IAAAA,iBAzBD,+BA0BC;CACC,aAAO,KAAKnB,UAAL,CAAgB,WAAhB,MAAiCnM,6BAAoB,CAACuD,IAA7D;CACA,KA5BF;CA6BCgK,IAAAA,SA7BD,uBA8BC;CACC,aAAO,KAAKX,cAAL,KACF,KAAKM,aAAL,IAAsB,KAAKC,gBAA3B,IAA+C,KAAKtL,UAAL,CAAgB0K,MAA/D,IAAyE,KAAKc,wBAA9E,IAA0G,KAAKD,eAA/G,IAAkI,KAAKE,iBADrI,CAAP;CAEA,KAjCF;CAkCCE,IAAAA,cAlCD,4BAmCC;CACC,UAAI,KAAKnL,gBAAT,EACA;CACC,YAAI,KAAKoK,aAAT,EACA;CACC,iBAAO,KAAKC,SAAL,CAAe,MAAf,CAAP;CACA,SAHD,MAKA;CACC,iBAAO,QAAP;CACA;CACD,OAVD,MAWK,IAAI,KAAKE,cAAT,EACL;CACC,eAAO,KAAK3K,UAAZ;CACA;CACD,KAnDF;CAoDCwL,IAAAA,uBApDD,qCAqDC;CACC,UAAMjL,OAAO,GAAG,CAAC,QAAD,EAAW,gBAAX,CAAhB;;CAEA,UAAI,KAAKmK,YAAT,EACA;CACCnK,QAAAA,OAAO,CAACE,IAAR,CAAa,iBAAb;CACA;;CAED,aAAOF,OAAP;CACA,KA9DF;CA+DCtC,IAAAA,QA/DD,sBAgEC;CACC,aAAOC,EAAE,CAACC,OAAV;CACA;CAlEF,GAnID;CAuMCC,EAAAA,OAAO,EACP;CACC;CACAC,IAAAA,YAFD,wBAEcO,SAFd,EAGC;CACC,WAAKsL,UAAL,CAAgBtL,SAAhB,IAA6Bb,6BAAoB,CAACuD,IAAlD;CACA,WAAKrC,KAAL,CAAWX,KAAX,CAAiB,OAAjB,EAA0BM,SAA1B;CACA,KANF;CAOC6M,IAAAA,sBAPD,kCAOwBlO,IAPxB,EAQC;CACC,WAAK,IAAIsG,KAAT,IAAkB,KAAKqG,UAAvB,EACA;CACC,YAAI,KAAKA,UAAL,CAAgBwB,cAAhB,CAA+B7H,KAA/B,CAAJ,EACA;CACC,eAAKqG,UAAL,CAAgBrG,KAAhB,IAAyBtG,IAAzB;CACA;CACD;;CACD,WAAK0B,KAAL,CAAWX,KAAX,CAAiB,kBAAjB,EAAqCf,IAArC;CACA,KAjBF;;CAkBC;;CAEA;CACAoO,IAAAA,aArBD,yBAqBeC,QArBf,EAsBC;CACC,WAAKlO,KAAL,CAAW2M,YAAX,GAA0BuB,QAA1B;CACA,KAxBF;CAyBCC,IAAAA,gBAzBD,4BAyBkBC,WAzBlB,EA0BC;CACC,WAAKzM,QAAL,CAAcgL,YAAd,GAA6ByB,WAA7B;CACA,KA5BF;CA6BCpM,IAAAA,sBA7BD,oCA8BC;CACC,WAAKJ,cAAL,CAAoB+K,YAApB,GAAmC,CAAC,KAAK/K,cAAL,CAAoB+K,YAAxD;;CAEA,UAAI,KAAK/K,cAAL,CAAoB+K,YAAxB,EACA;CACC,aAAKpL,KAAL,CAAWX,KAAX,CAAiB,OAAjB,EAA0B,UAA1B;CACA;CACD,KArCF;CAsCCwK,IAAAA,qBAtCD,mCAuCC;CACC,WAAKH,aAAL,CAAmB0B,YAAnB,GAAkC,CAAC,KAAK1B,aAAL,CAAmB0B,YAAtD;CACA,KAzCF;CA0CC0B,IAAAA,kBA1CD,8BA0CoBC,QA1CpB,EA2CC;CACC,WAAKpM,UAAL,CAAgBlB,KAAhB,GAAwBsN,QAAxB;CACA,WAAKpM,UAAL,CAAgB0K,MAAhB,GAAyB,IAAzB;CACA,KA9CF;CA+CChF,IAAAA,YA/CD,wBA+Cc9G,KA/Cd,EAgDC;CACC,UAAMyN,KAAK,GAAG,KAAKnK,aAAL,CAAmBuI,YAAnB,CAAgC6B,SAAhC,CAA0C,UAAC1J,IAAD,EAAU;CACjE,eAAOA,IAAI,CAACC,EAAL,KAAYjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EAAnC;CACA,OAFa,CAAd;;CAIA,UAAIwJ,KAAK,KAAK,CAAC,CAAf,EACA;CACC,aAAKnK,aAAL,CAAmBuI,YAAnB,CAAgC5J,IAAhC,CAAqC;CACpCgC,UAAAA,EAAE,EAAEjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EADgB;CAEpC/E,UAAAA,KAAK,EAAEc,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgBzO,KAFa;CAGpC6K,UAAAA,MAAM,EAAE/J,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB5D;CAHY,SAArC;CAKA;CACD,KA7DF;CA8DChD,IAAAA,cA9DD,0BA8DgB/G,KA9DhB,EA+DC;CACC,UAAMyN,KAAK,GAAG,KAAKnK,aAAL,CAAmBuI,YAAnB,CAAgC6B,SAAhC,CAA0C,UAAC1J,IAAD,EAAU;CACjE,eAAOA,IAAI,CAACC,EAAL,KAAYjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EAAnC;CACA,OAFa,CAAd;;CAIA,UAAIwJ,KAAK,GAAG,CAAC,CAAb,EACA;CACC,aAAKnK,aAAL,CAAmBuI,YAAnB,CAAgC+B,MAAhC,CAAuCH,KAAvC,EAA8C,CAA9C;CACA;CACD,KAxEF;CAyEClD,IAAAA,iBAzED,6BAyEmBvK,KAzEnB,EA0EC;CACC,UAAMyN,KAAK,GAAG,KAAKrD,kBAAL,CAAwByB,YAAxB,CAAqC6B,SAArC,CAA+C,UAAC1J,IAAD,EAAU;CACtE,eAAOA,IAAI,CAACC,EAAL,KAAYjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EAAnC;CACA,OAFa,CAAd;;CAIA,UAAIwJ,KAAK,KAAK,CAAC,CAAf,EACA;CACC,aAAKrD,kBAAL,CAAwByB,YAAxB,CAAqC5J,IAArC,CAA0C;CACzCgC,UAAAA,EAAE,EAAEjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EADqB;CAEzC/E,UAAAA,KAAK,EAAEc,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgBzO,KAFkB;CAGzC6K,UAAAA,MAAM,EAAE/J,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB5D;CAHiB,SAA1C;CAKA;CACD,KAvFF;CAwFCS,IAAAA,mBAxFD,+BAwFqBxK,KAxFrB,EAyFC;CACC,UAAMyN,KAAK,GAAG,KAAKrD,kBAAL,CAAwByB,YAAxB,CAAqC6B,SAArC,CAA+C,UAAC1J,IAAD,EAAU;CACtE,eAAOA,IAAI,CAACC,EAAL,KAAYjE,KAAK,CAACZ,IAAN,CAAWuO,IAAX,CAAgB1J,EAAnC;CACA,OAFa,CAAd;;CAIA,UAAIwJ,KAAK,GAAG,CAAC,CAAb,EACA;CACC,aAAKrD,kBAAL,CAAwByB,YAAxB,CAAqC+B,MAArC,CAA4CH,KAA5C,EAAmD,CAAnD;CACA;CACD,KAlGF;CAmGCI,IAAAA,YAnGD,wBAmGcC,OAnGd,EAoGC;CACC,WAAKtK,YAAL,CAAkBqI,YAAlB,GAAiCnM,EAAE,CAACuJ,UAAH,CAAc6E,OAAd,EAAuBpO,EAAE,CAACC,OAAH,CAAW,aAAX,CAAvB,CAAjC;CACA,KAtGF;CAuGCoO,IAAAA,YAvGD,wBAuGcC,OAvGd,EAwGC;CACC,WAAKvK,YAAL,CAAkBoI,YAAlB,GAAiCmC,OAAjC;CACA,KA1GF;CA2GC9H,IAAAA,gBA3GD,4BA2GkB+H,WA3GlB,EA4GC;CACC,WAAKvK,gBAAL,CAAsBmI,YAAtB,GAAqC5M,MAAM,CAACgP,WAAD,CAA3C;CACA,KA9GF;CA+GC9H,IAAAA,oBA/GD,gCA+GsB+H,eA/GtB,EAgHC;CACC,WAAKvK,oBAAL,CAA0BkI,YAA1B,GAAyCqC,eAAzC;CACA,KAlHF;;CAmHC;;CAEA;CACA9K,IAAAA,cAtHD,4BAuHC;CACC,WAAK+K,WAAL;CAEA,WAAKjP,KAAL,CAAW2M,YAAX,GAA0B,KAAK3M,KAAL,CAAWwC,YAArC;CACA,WAAKb,QAAL,CAAcgL,YAAd,GAA6B,KAAKhL,QAAL,CAAca,YAA3C;CACA,WAAKZ,cAAL,CAAoB+K,YAApB,GAAmC,KAAK/K,cAAL,CAAoBY,YAAvD;CACA,WAAKyI,aAAL,CAAmB0B,YAAnB,GAAkC,KAAK1B,aAAL,CAAmBzI,YAArD;CACA,WAAK4B,aAAL,CAAmBuI,YAAnB,kCAAsC,KAAKvI,aAAL,CAAmB5B,YAAzD;CACA,WAAKjB,KAAL,CAAWX,KAAX,CAAiB,oBAAjB;CACA,WAAKsK,kBAAL,CAAwByB,YAAxB,kCAA2C,KAAKzB,kBAAL,CAAwB1I,YAAnE;CACA,WAAKjB,KAAL,CAAWX,KAAX,CAAiB,yBAAjB;CACA,WAAK0D,YAAL,CAAkBqI,YAAlB,GAAiC,KAAKrI,YAAL,CAAkB9B,YAAnD;CACA,WAAK+B,YAAL,CAAkBoI,YAAlB,GAAiC,KAAKpI,YAAL,CAAkB/B,YAAnD;CACA,WAAKgC,gBAAL,CAAsBmI,YAAtB,GAAqC,KAAKnI,gBAAL,CAAsBhC,YAA3D;CACA,WAAKiC,oBAAL,CAA0BkI,YAA1B,GAAyC,KAAKlI,oBAAL,CAA0BjC,YAAnE;CAEA,WAAKuL,sBAAL,CAA4B1N,6BAAoB,CAACC,IAAjD;CACA,KAxIF;CAyIC4O,IAAAA,cAzID,4BA0IC;CACC,UAAIC,IAAI,GAAG,EAAX;;CACA,UAAI,KAAKzM,gBAAL,IAAyB,KAAKoK,aAAlC,EACA;CACCqC,QAAAA,IAAI,GAAG/L,cAAI,CAACS,MAAL,CAAY,KAAKkJ,SAAL,CAAe,MAAf,CAAZ,CAAP;CACA,OAHD,MAIK,IAAI,KAAKE,cAAT,EACL;CACCkC,QAAAA,IAAI,GAAG/L,cAAI,CAACS,MAAL,CAAY,KAAKvB,UAAjB,CAAP;CACA;;CAED,UAAItC,KAAK,GAAG,KAAKO,QAAL,CAAc,0CAAd,CAAZ;;CACA,UAAI,KAAKP,KAAL,CAAW2M,YAAf,EACA;CACC3M,QAAAA,KAAK,GAAG,KAAKA,KAAL,CAAW2M,YAAnB;CACA;;CAED,UAAMyC,SAAS,GAAGhM,cAAI,CAACS,MAAL,CAAY,KAAK3B,UAAL,CAAgBlB,KAA5B,EAChBe,OADgB,CACR,aADQ,EACO,KAAKK,QAAL,CAAckB,SADrB,EAEhBvB,OAFgB,CAER,WAFQ,cAES/B,KAFT,SAGhB+B,OAHgB,CAGR,UAHQ,YAGOoN,IAHP,EAAlB;CAIAE,MAAAA,0BAAS,CAACC,IAAV,CAAeF,SAAf;;CAEA,UAAItJ,oBAAU,CAACC,QAAX,CAAoB,2BAApB,CAAJ,EACA;CACCwJ,QAAAA,GAAG,CAAC/O,EAAJ,CAAOgP,EAAP,CAAUC,YAAV,CAAuBC,MAAvB,CAA8BC,MAA9B,CAAqC;CACpCC,UAAAA,OAAO,EAAE,KAAKrP,QAAL,CAAc,8CAAd;CAD2B,SAArC;CAGA;CACD,KAvKF;CAwKCsP,IAAAA,QAxKD,sBAyKC;CACC,UAAIC,MAAM,CAACP,GAAP,CAAW,MAAX,CAAJ,EACA;CACCO,QAAAA,MAAM,CAACP,GAAP,CAAW,MAAX,EAAmBQ,aAAnB,CAAiC,SAAS,KAAK5D,MAA/C;CACA;CACD,KA9KF;CA+KC6D,IAAAA,OA/KD,qBAgLC;CACC,WAAKjC,sBAAL,CAA4B1N,6BAAoB,CAACuD,IAAjD;CACA,KAlLF;;CAmLC;;CAEA;CACAqM,IAAAA,UAtLD,wBAuLC;CAAA;;CACC,UAAI,KAAKjD,YAAT,EACA;CACC,eAAO,KAAP;CACA;;CACD,WAAKA,YAAL,GAAoB,IAApB;CAEA,UAAMkD,cAAc,GAAG,EAAvB;CAEAA,MAAAA,cAAc,CAAC,OAAD,CAAd,GAA0B,KAAKlQ,KAAL,CAAW2M,YAArC;CACAuD,MAAAA,cAAc,CAAC,iBAAD,CAAd,GAAoC,KAAKtO,cAAL,CAAoB+K,YAAxD;CACAuD,MAAAA,cAAc,CAAC,UAAD,CAAd,GAA6B,KAAKvO,QAAL,CAAcgL,YAA3C;CACAuD,MAAAA,cAAc,CAAC,IAAD,CAAd,GAAuB,KAAKnE,YAA5B;CACAmE,MAAAA,cAAc,CAAC,YAAD,CAAd,GAA+B9M,cAAI,CAACS,MAAL,CAAY,KAAK3B,UAAL,CAAgBlB,KAA5B,CAA/B;CACAkP,MAAAA,cAAc,CAAC,OAAD,CAAd,GAA0B,KAAK9L,aAAL,CAAmBuI,YAAnB,CAAgC9H,GAAhC,CAAoC,UAAAC,IAAI;CAAA,eAAIA,IAAI,CAACC,EAAT;CAAA,OAAxC,CAA1B;CACAmL,MAAAA,cAAc,CAAC,gBAAD,CAAd,GAAmC,KAAKjF,aAAL,CAAmB0B,YAAtD;CACAuD,MAAAA,cAAc,CAAC,YAAD,CAAd,GAA+B,KAAKhF,kBAAL,CAAwByB,YAAxB,CAAqC9H,GAArC,CAAyC,UAAAC,IAAI;CAAA,eAAIA,IAAI,CAACC,EAAT;CAAA,OAA7C,CAA/B;CAEA,WAAKkK,WAAL;;CAEA,UAAI,KAAKhC,cAAL,IAAuB,KAAKH,aAAhC,EACA;CACCpD,QAAAA,cAAI,CAACC,SAAL,CAAe,sBAAf,EAAuC;CACtCwG,UAAAA,IAAI,EAAE;CACL1D,YAAAA,MAAM,EAAEyD,cADH;CAELnD,YAAAA,SAAS,EAAE,KAAKA;CAFX,WADgC;CAKtCqD,UAAAA,cAAc,EAAE;CACfC,YAAAA,YAAY,EAAE;CADC;CALsB,SAAvC,EASCnG,IATD,CASM,UAACC,QAAD,EAAc;CACnB,UAAA,KAAI,CAACmG,kBAAL;CACA,SAXD,WAYO,UAACnG,QAAD,EAAc;CACpB,UAAA,KAAI,CAACoG,cAAL,CAAoBpG,QAApB;CACA,SAdD;CAeA;CACD,KA7NF;CA8NCmG,IAAAA,kBA9ND,gCA+NC;CACC,UAAI,KAAK5N,gBAAT,EACA;CACC,aAAKwM,cAAL;CACA;;CACD,WAAKlC,YAAL,GAAoB,KAApB;CACA,WAAKwD,WAAL;CACA,WAAKC,UAAL;CACA,KAvOF;CAwOCF,IAAAA,cAxOD,0BAwOgBpG,QAxOhB,EAyOC;CACC,WAAK6C,YAAL,GAAoB,KAApB;CACA,UAAI0D,YAAY,GAAGvG,QAAQ,CAAC,QAAD,CAAR,CAAmB,CAAnB,EAAsB1J,OAAzC;;CACA,UAAI0J,QAAQ,CAAC,QAAD,CAAR,CAAmB,CAAnB,EAAsBwG,IAAtB,KAA+B,eAAnC,EACA;CACCD,QAAAA,YAAY,GAAG,KAAKnQ,QAAL,CAAc,0CAAd,CAAf;CACA;;CACD,WAAKqQ,QAAL,CAAcF,YAAd;CACA,KAjPF;;CAkPC;;CAEA;CACApD,IAAAA,iBArPD,+BAsPC;CACC,UAAI,CAACiC,GAAG,CAAC/O,EAAJ,CAAOqQ,IAAP,CAAYC,mBAAZ,EAAL,EACA;CACC,aAAKC,aAAL;CACA,aAAKH,QAAL,CAAc,KAAKrQ,QAAL,CAAc,uCAAd,CAAd;CACA;;CAED,UAAI,CAACgP,GAAG,CAAC/O,EAAJ,CAAOwQ,IAAP,CAAYlH,IAAZ,CAAiBmH,mBAAjB,EAAL,EACA;CACC,aAAKF,aAAL;CACA,aAAKH,QAAL,CAAc,KAAKrQ,QAAL,CAAc,uDAAd,CAAd;CACA;CACD,KAlQF;CAmQCwQ,IAAAA,aAnQD,2BAoQC;CACC,UAAMG,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,kDAAvB,CAArB;;CACA,UAAIF,YAAJ,EACA;CACCG,QAAAA,aAAG,CAACC,QAAJ,CAAaJ,YAAb,EAA2B,CAAC,iBAAD,EAAoB,kBAApB,CAA3B;CACA;CACD,KA1QF;CA2QChE,IAAAA,YA3QD,0BA4QC;CAAA;;CACCxD,MAAAA,cAAI,CAACC,SAAL,CAAe,uBAAf,EAAwC;CACvCwG,QAAAA,IAAI,EAAE,EADiC;CAEvCC,QAAAA,cAAc,EAAE;CACfC,UAAAA,YAAY,EAAE;CADC;CAFuB,OAAxC,EAMCnG,IAND,CAMM,UAACC,QAAD,EAAc;CACnB,QAAA,MAAI,CAAC4C,SAAL,GAAiB5C,QAAQ,CAACjK,IAAT,CAAc,YAAd,CAAjB;CACA,QAAA,MAAI,CAAC6M,SAAL,CAAe,MAAf,IAAyB3J,cAAI,CAACC,MAAL,CAAY,MAAI,CAAC0J,SAAL,CAAe,MAAf,CAAZ,CAAzB;CACA,QAAA,MAAI,CAAC/M,KAAL,CAAWC,YAAX,GAA0BkK,QAAQ,CAACjK,IAAT,CAAc,eAAd,CAA1B;CACA,QAAA,MAAI,CAAC4M,aAAL,GAAqB,IAArB;CACA,OAXD,WAYO,UAAC3C,QAAD,EAAc;CACpBoH,QAAAA,oBAAM,CAACC,IAAP,CAAY,OAAZ,EAAqBrH,QAAQ,CAAC,QAAD,CAAR,CAAmB,CAAnB,EAAsB1J,OAA3C;CACA,OAdD;CAeA,KA5RF;CA6RCmQ,IAAAA,QA7RD,oBA6RUa,SA7RV,EA8RC;CACC,WAAK5E,MAAL,CAAY9J,IAAZ,CAAiB0O,SAAjB;CACA,KAhSF;CAiSCxC,IAAAA,WAjSD,yBAkSC;CACC,WAAKpC,MAAL,GAAc,EAAd;CACA,KApSF;CAqSC2D,IAAAA,WArSD,yBAsSC;CACC,UAAI1K,oBAAU,CAACC,QAAX,CAAoB,cAApB,CAAJ,EACA;CACCvF,QAAAA,EAAE,CAACkR,SAAH,CAAaC,QAAb,CAAsBC,KAAtB;CACA;CACD,KA3SF;CA4SCnB,IAAAA,UA5SD,wBA6SC;CACC,UAAI3K,oBAAU,CAACC,QAAX,CAAoB,yBAApB,CAAJ,EACA;CACCwJ,QAAAA,GAAG,CAAC/O,EAAJ,CAAOqR,IAAP,CAAYC,WAAZ,CAAwBC,MAAxB,CAA+B,KAAK1F,MAApC;CACA,OAHD,MAKA;CACCkD,QAAAA,GAAG,CAACO,MAAJ,CAAWkC,QAAX,GAAsB,KAAK1F,UAA3B;CACA;CACD,KAtTF;CAuTCc,IAAAA,qBAvTD,mCAwTC;CACC,UAAM6E,IAAI,GAAG,IAAIvM,IAAJ,EAAb;CACA,UAAM6B,OAAO,GAAG0K,IAAI,CAACC,UAAL,EAAhB;CACA,UAAMC,GAAG,GAAG5K,OAAO,GAAG,CAAtB;;CAEA,UAAI4K,GAAG,GAAG,CAAV,EACA;CACCF,QAAAA,IAAI,CAACG,UAAL,CAAgB7K,OAAO,GAAG4K,GAAV,IAAiBA,GAAG,GAAG,CAAN,GAAU,CAAV,GAAc,CAA/B,CAAhB;CACA;;CAED,WAAK7N,YAAL,CAAkBqI,YAAlB,GAAiCnM,EAAE,CAACuJ,UAAH,CAAckI,IAAd,EAAoBzR,EAAE,CAACC,OAAH,CAAW,aAAX,CAApB,CAAjC;CACA,WAAK6D,YAAL,CAAkB9B,YAAlB,GAAiC,KAAK8B,YAAL,CAAkBqI,YAAnD;CACA,WAAKpI,YAAL,CAAkBoI,YAAlB,GAAiC,KAAKhC,UAAL,CAAgBsH,IAAhB,CAAjC;CACA,WAAK1N,YAAL,CAAkB/B,YAAlB,GAAiC,KAAK+B,YAAL,CAAkBoI,YAAnD;CACA,KAtUF;CAuUCU,IAAAA,kBAvUD,gCAwUC;CACC,WAAK7I,gBAAL,CAAsBmI,YAAtB,GAAqC,IAArC;CACA,WAAKnI,gBAAL,CAAsBhC,YAAtB,GAAqC,KAAKgC,gBAAL,CAAsBmI,YAA3D;CACA,WAAKlI,oBAAL,CAA0BkI,YAA1B,GAAyC,GAAzC;CACA,WAAKlI,oBAAL,CAA0BjC,YAA1B,GAAyC,KAAKiC,oBAAL,CAA0BkI,YAAnE;CACA,KA7UF;CA8UChC,IAAAA,UA9UD,sBA8UYsH,IA9UZ,EA+UC;CACC,UAAMI,UAAU,GAAG7R,EAAE,CAACyR,IAAH,CAAQK,mBAAR,CAA4B9R,EAAE,CAACC,OAAH,CAAW,aAAX,CAA5B,EAAuDsB,OAAvD,CAA+D,QAA/D,EAAyE,EAAzE,CAAnB;CACA,UAAMwQ,UAAU,GAAG/R,EAAE,CAACyR,IAAH,CAAQK,mBAAR,CAA4B9R,EAAE,CAACC,OAAH,CAAW,iBAAX,CAA5B,EAA2DsB,OAA3D,CAAmE,QAAnE,EAA6E,EAA7E,CAAnB;CACA,UAAMyQ,UAAU,GAAGhS,EAAE,CAACyR,IAAH,CAAQQ,MAAR,CAAeJ,UAAf,EAA2BJ,IAA3B,CAAnB;CACA,UAAMS,UAAU,GAAGlS,EAAE,CAACyR,IAAH,CAAQQ,MAAR,CAAeF,UAAf,EAA2BN,IAA3B,CAAnB;CAEA,aAAOzR,EAAE,CAACmS,IAAH,CAAQC,IAAR,CAAaF,UAAU,CAAC3Q,OAAX,CAAmByQ,UAAnB,EAA+B,EAA/B,CAAb,CAAP;CACA;CACD;;CAvVD,GAxMD;CAiiBCK,EAAAA,UAAU,EAAElH,eAjiBb;CAkiBClK,EAAAA,QAAQ;CAliBT,CADA;;;;"}