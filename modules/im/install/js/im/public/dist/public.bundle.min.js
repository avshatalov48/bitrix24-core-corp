this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,n){"use strict";const s={};s.openMessenger=function(...e){console.error("Developer: method BXIM.openMessenger is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.");return o.openChat(...e)};s.openMessengerSlider=function(e){console.error("Developer: method BXIM.openMessengerSlider is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.");return o.openChat(e)};s.openNotify=function(...e){console.error("Developer: method BXIM.openNotify is deprecated. Use method 'Messenger.openNotifications' from 'im.public' or 'im.public.iframe' extension.");return o.openNotifications(...e)};s.openSettings=function(...e){console.error("Developer: method BXIM.openSettings is deprecated. Use method 'Messenger.openSettings' from 'im.public' or 'im.public.iframe' extension.");return o.openSettings(...e)};s.callTo=function(...e){console.error("Developer: method BXIM.callTo is deprecated. Use method 'Messenger.startVideoCall' from 'im.public' or 'im.public.iframe' extension.");return o.startVideoCall(...e)};s.messenger={};s.messenger.popupPopupMenu=false;s.settings={};const t={init:()=>{},enableInVersion:()=>false,getApiVersion:()=>0,addCustomEvent:()=>{},onCustomEvent:()=>{},ready:()=>true,log:()=>{}};class i{constructor(){this.v2enabled=false;const e=n.Extension.getSettings("im.public");this.v2enabled=e.get("v2enabled",false)}async openChat(e="",s=""){if(!this.v2enabled){window.BXIM.openMessenger(e);return Promise.resolve()}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.DesktopManager");const i=await(t==null?void 0:t.getInstance().checkStatusInDifferentContext());if(i){return t==null?void 0:t.getInstance().openChat(e)}const o=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return o==null?void 0:o.getInstance().openChat(e,s)}openLines(){if(!this.v2enabled){window.BXIM.openMessenger(0,"im-ol");return Promise.resolve()}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return e==null?void 0:e.getInstance().openLines()}async openNotifications(){if(!this.v2enabled){window.BXIM.openNotify();return Promise.resolve()}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.DesktopManager");const s=await(e==null?void 0:e.getInstance().checkStatusInDifferentContext());if(s){return e==null?void 0:e.getInstance().openNotifications()}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return t==null?void 0:t.getInstance().openNotifications()}async openRecentSearch(){if(!this.v2enabled){window.BXIM.openMessenger();return Promise.resolve()}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.DesktopManager");const s=await(e==null?void 0:e.getInstance().checkStatusInDifferentContext());if(s){return e==null?void 0:e.getInstance().openRecentSearch()}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return t==null?void 0:t.getInstance().openRecentSearch()}openSettings(e={}){if(!this.v2enabled){const s={};if(n.Type.isPlainObject(e)){if(n.Type.isStringFilled(e.selected)){s.active=e.selected}if(n.Type.isStringFilled(e.section)){s.onlyPanel=e.section}}window.BXIM.openSettings(s);return Promise.resolve()}const s=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return s==null?void 0:s.getInstance().openSettings()}async startVideoCall(e="",s=true){if(!this.v2enabled){window.BXIM.callTo(e,s);return Promise.resolve()}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.DesktopManager");const i=await(t==null?void 0:t.getInstance().checkStatusInDifferentContext());if(i){return t==null?void 0:t.getInstance().startVideoCall(e,s)}const o=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return o==null?void 0:o.getInstance().startVideoCall(e,s)}}const o=new i;const r=n.Reflection.getClass("BX.Messenger");if(r){r.Public=o}if(o.v2enabled&&n.Type.isUndefined(window.BXIM)&&window.parent===window){window.BXIM=s}if(o.v2enabled&&n.Type.isUndefined(window.BX.desktop)&&n.Type.isObject(window.BXDesktopSystem)&&window.parent===window){window.BX.desktop=t}e.Messenger=o})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX);
//# sourceMappingURL=public.bundle.map.js