this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,n){"use strict";const s={};s.openMessenger=function(){console.error("Developer: method BXIM.openMessenger is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.");return i.openChat(...arguments)};s.openNotify=function(){console.error("Developer: method BXIM.openNotify is deprecated. Use method 'Messenger.openNotifications' from 'im.public' or 'im.public.iframe' extension.");return i.openNotifications(...arguments)};s.openSettings=function(){console.error("Developer: method BXIM.openSettings is deprecated. Use method 'Messenger.openSettings' from 'im.public' or 'im.public.iframe' extension.");return i.openSettings(...arguments)};s.callTo=function(){console.error("Developer: method BXIM.callTo is deprecated. Use method 'Messenger.startVideoCall' from 'im.public' or 'im.public.iframe' extension.");return i.startVideoCall(...arguments)};s.messenger={};s.messenger.popupPopupMenu=false;class t{constructor(){this.v2enabled=false;const e=n.Extension.getSettings("im.public");this.v2enabled=e.get("v2enabled",false)}openChat(e="",s=""){if(!this.v2enabled){return new Promise(((n,s)=>{window.BXIM.openMessenger(e);n()}))}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return t==null?void 0:t.getInstance().openChat(e,s)}openLines(){if(!this.v2enabled){return new Promise(((e,n)=>{window.BXIM.openMessenger(0,"im-ol");e()}))}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return e==null?void 0:e.getInstance().openLines()}openNotifications(){if(!this.v2enabled){return new Promise(((e,n)=>{window.BXIM.openNotify();e()}))}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return e==null?void 0:e.getInstance().openNotifications()}openRecentSearch(){if(!this.v2enabled){return new Promise(((e,n)=>{window.BXIM.openMessenger();e()}))}const e=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return e==null?void 0:e.getInstance().openRecentSearch()}openSettings(e={}){if(!this.v2enabled){return new Promise(((s,t)=>{const i={};if(n.Type.isPlainObject(e)){if(n.Type.isStringFilled(e.selected)){i.active=e.selected}if(n.Type.isStringFilled(e.section)){i.onlyPanel=e.section}}window.BXIM.openSettings(i);s()}))}const s=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");return s==null?void 0:s.getInstance().openSettings()}startVideoCall(e="",s=true){if(!this.v2enabled){return new Promise((n=>{window.BXIM.callTo(e,s);n()}))}const t=n.Reflection.getClass("BX.Messenger.v2.Lib.DesktopManager");return new Promise(((i,o)=>{t==null?void 0:t.getInstance().checkRunStatus().then((()=>{t==null?void 0:t.getInstance().startVideoCall(e,s);i()})).catch((()=>{const t=n.Reflection.getClass("BX.Messenger.v2.Lib.MessengerSlider");t==null?void 0:t.getInstance().startVideoCall(e,s).then(i).catch(o)}))}))}}const i=new t;const o=n.Reflection.getClass("BX.Messenger");if(o){o.Public=i}if(i.v2enabled&&n.Type.isUndefined(window.BXIM)&&window.parent===window){window.BXIM=s}e.Messenger=i})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX);
//# sourceMappingURL=public.bundle.map.js