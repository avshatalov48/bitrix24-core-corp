{"version":3,"file":"public.bundle.js","sources":["../src/legacy.js","../src/public.js"],"sourcesContent":["import { Reflection, Type } from 'main.core';\nimport { Messenger } from './public';\n\nconst legacyMessenger = {};\nlegacyMessenger.openMessenger = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.openMessenger is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.openChat(...args);\n};\n\nlegacyMessenger.openMessengerSlider = function(dialogId: string): Promise {\n\tconsole.warn(\"Developer: method BXIM.openMessengerSlider is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.openChat(dialogId);\n};\n\nlegacyMessenger.openHistory = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.openHistory is deprecated. Use method 'Messenger.openChat' from 'im.public' or 'im.public.iframe' extension.\");\n\n\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\treturn MessengerSlider.getInstance().openHistory(...args);\n};\n\nlegacyMessenger.openNotify = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.openNotify is deprecated. Use method 'Messenger.openNotifications' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.openNotifications(...args);\n};\n\nlegacyMessenger.openSettings = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.openSettings is deprecated. Use method 'Messenger.openSettings' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.openSettings(...args);\n};\n\nlegacyMessenger.openVideoconf = function(code): Promise {\n\tconsole.warn(\"Developer: method BXIM.openVideoconf is deprecated. Use method 'Messenger.openConference' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.openConference({ code });\n};\n\nlegacyMessenger.openVideoconfByUrl = function(link): boolean {\n\tconsole.warn(\"Developer: method BXIM.openVideoconfByUrl is deprecated. Use method 'Messenger.openConference' from 'im.public' or 'im.public.iframe' extension.\");\n\n\tconst Utils = Reflection.getClass('BX.Messenger.v2.Lib.Utils');\n\tif (Utils && Type.isStringFilled(url) && !Utils.conference.isCurrentPortal(url))\n\t{\n\t\treturn false;\n\t}\n\n\tMessenger.openConference({ link });\n\n\treturn true;\n};\n\nlegacyMessenger.callTo = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.callTo is deprecated. Use method 'Messenger.startVideoCall' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.startVideoCall(...args);\n};\n\nlegacyMessenger.phoneTo = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.phoneTo is deprecated. Use method 'Messenger.startPhoneCall' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.startPhoneCall(...args);\n};\n\nlegacyMessenger.startCallList = function(...args): Promise {\n\tconsole.warn(\"Developer: method BXIM.startCallList is deprecated. Use method 'Messenger.startCallList' from 'im.public' or 'im.public.iframe' extension.\");\n\n\treturn Messenger.startCallList(...args);\n};\n\nlegacyMessenger.messenger = {};\nlegacyMessenger.messenger.popupPopupMenu = false;\nlegacyMessenger.settings = {};\n\nconst legacyDesktop = {\n\tinit: () => {},\n\tenableInVersion: () => false,\n\tgetApiVersion: () => 0,\n\taddCustomEvent: () => {},\n\tonCustomEvent: () => {},\n\tready: () => true,\n\tlog: () => {},\n};\n\nexport { legacyMessenger, legacyDesktop };\n","import { Type, Extension, Reflection } from 'main.core';\n\nimport { legacyMessenger, legacyDesktop } from './legacy';\n\nclass Messenger\n{\n\tv2enabled: boolean = false;\n\n\tconstructor()\n\t{\n\t\tconst settings = Extension.getSettings('im.public');\n\t\tthis.v2enabled = settings.get('v2enabled', false);\n\t}\n\n\tasync openChat(dialogId: string = '', text: string = ''): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.openMessenger(dialogId);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToChat(dialogId);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openChat(dialogId, text);\n\t}\n\n\tasync openLines(dialogId: string = ''): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\tconst preparedDialogId = dialogId === '' ? 0 : dialogId;\n\t\t\twindow.BXIM.openMessenger(preparedDialogId, 'im-ol');\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToLines(dialogId);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openLines(dialogId);\n\t}\n\n\tasync openLinesHistory(dialogId: string = ''): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.openHistory(dialogId);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openHistory(dialogId);\n\t}\n\n\tasync openNotifications(): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.openNotify();\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToNotifications();\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openNotifications();\n\t}\n\n\tasync openRecentSearch(): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.openMessenger();\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToRecentSearch();\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openRecentSearch();\n\t}\n\n\topenSettings(options: ?Object = {}): Promise<Array>\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\tconst params = {};\n\t\t\tif (Type.isPlainObject(options))\n\t\t\t{\n\t\t\t\tif (Type.isStringFilled(options.selected))\n\t\t\t\t{\n\t\t\t\t\tparams.active = options.selected;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isStringFilled(options.section))\n\t\t\t\t{\n\t\t\t\t\tparams.onlyPanel = options.section;\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.BXIM.openSettings(params);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openSettings(options);\n\t}\n\n\tasync openConference(options: { code?: string, link?: string } = {}): Promise<Array>\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\tif (Type.isPlainObject(options))\n\t\t\t{\n\t\t\t\tif (Type.isStringFilled(options.code))\n\t\t\t\t{\n\t\t\t\t\twindow.BXIM.openVideoconf(options.code);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isStringFilled(options.link))\n\t\t\t\t{\n\t\t\t\t\twindow.BXIM.openVideoconfByUrl(options.link);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst Utils = Reflection.getClass('BX.Messenger.v2.Lib.Utils');\n\t\tif (Type.isStringFilled(options.url) && !Utils.conference.isCurrentPortal(options.url))\n\t\t{\n\t\t\tUtils.browser.openLink(options.url);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst code = Utils.conference.getCodeByOptions(options);\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tif (DesktopManager?.isDesktop())\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().openConference(code);\n\t\t}\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToConference(code);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().openConference(code);\n\t}\n\n\tasync startVideoCall(dialogId: string = '', withVideo: boolean = true): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.callTo(dialogId, withVideo);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst isRedirectAllowed = await DesktopManager?.getInstance().checkForRedirect();\n\t\tif (isRedirectAllowed)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToVideoCall(dialogId, withVideo);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().startVideoCall(dialogId, withVideo);\n\t}\n\n\tasync startPhoneCall(number: string, params: Object<any, string>): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.phoneTo(number, params);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst desktopIsActive = await DesktopManager?.getInstance().checkStatusInDifferentContext();\n\t\tif (desktopIsActive)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToPhoneCall(number, params);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().startPhoneCall(number, params);\n\t}\n\n\tasync startCallList(callListId: number, params: Object<string, any>): Promise\n\t{\n\t\tif (!this.v2enabled)\n\t\t{\n\t\t\twindow.BXIM.startCallList(callListId, params);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tconst desktopIsActive = await DesktopManager?.getInstance().checkStatusInDifferentContext();\n\t\tif (desktopIsActive)\n\t\t{\n\t\t\treturn DesktopManager?.getInstance().redirectToCallList(callListId, params);\n\t\t}\n\n\t\tconst MessengerSlider = Reflection.getClass('BX.Messenger.v2.Lib.MessengerSlider');\n\n\t\treturn MessengerSlider?.getInstance().startCallList(callListId, params);\n\t}\n\n\tenableDesktopRedirect()\n\t{\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tDesktopManager?.getInstance().enableRedirect();\n\t}\n\n\tdisableDesktopRedirect()\n\t{\n\t\tconst DesktopManager = Reflection.getClass('BX.Messenger.v2.Lib.DesktopManager');\n\t\tDesktopManager?.getInstance().disableRedirect();\n\t}\n}\n\nconst messenger = new Messenger();\nexport { messenger as Messenger };\n\n// pretty export\nconst namespace = Reflection.getClass('BX.Messenger');\nif (namespace)\n{\n\tnamespace.Public = messenger;\n}\n\n// compatibility layer\nif (\n\tmessenger.v2enabled\n\t&& Type.isUndefined(window.BXIM)\n\t&& window.parent === window\n)\n{\n\twindow.BXIM = legacyMessenger;\n}\n\nif (\n\tmessenger.v2enabled\n\t&& Type.isUndefined(window.BX.desktop)\n\t&& Type.isObject(window.BXDesktopSystem)\n\t&& window.parent === window\n)\n{\n\twindow.BX.desktop = legacyDesktop;\n}\n"],"names":["legacyMessenger","openMessenger","args","console","warn","Messenger","openChat","openMessengerSlider","dialogId","openHistory","MessengerSlider","Reflection","getClass","getInstance","openNotify","openNotifications","openSettings","openVideoconf","code","openConference","openVideoconfByUrl","link","Utils","Type","isStringFilled","url","conference","isCurrentPortal","callTo","startVideoCall","phoneTo","startPhoneCall","startCallList","messenger","popupPopupMenu","settings","legacyDesktop","init","enableInVersion","getApiVersion","addCustomEvent","onCustomEvent","ready","log","constructor","v2enabled","Extension","getSettings","get","text","window","BXIM","Promise","resolve","DesktopManager","isRedirectAllowed","checkForRedirect","redirectToChat","openLines","preparedDialogId","redirectToLines","openLinesHistory","redirectToNotifications","openRecentSearch","redirectToRecentSearch","options","params","isPlainObject","selected","active","section","onlyPanel","browser","openLink","getCodeByOptions","isDesktop","redirectToConference","withVideo","redirectToVideoCall","number","desktopIsActive","checkStatusInDifferentContext","redirectToPhoneCall","callListId","redirectToCallList","enableDesktopRedirect","enableRedirect","disableDesktopRedirect","disableRedirect","namespace","Public","isUndefined","parent","BX","desktop","isObject","BXDesktopSystem"],"mappings":";;;;;;;CAGA,MAAMA,eAAe,GAAG,EAAE;CAC1BA,eAAe,CAACC,aAAa,GAAG,UAAS,GAAGC,IAAI,EAAW;GAC1DC,OAAO,CAACC,IAAI,CAAC,uIAAuI,CAAC;GAErJ,OAAOC,SAAS,CAACC,QAAQ,CAAC,GAAGJ,IAAI,CAAC;CACnC,CAAC;CAEDF,eAAe,CAACO,mBAAmB,GAAG,UAASC,QAAgB,EAAW;GACzEL,OAAO,CAACC,IAAI,CAAC,6IAA6I,CAAC;GAE3J,OAAOC,SAAS,CAACC,QAAQ,CAACE,QAAQ,CAAC;CACpC,CAAC;CAEDR,eAAe,CAACS,WAAW,GAAG,UAAS,GAAGP,IAAI,EAAW;GACxDC,OAAO,CAACC,IAAI,CAAC,qIAAqI,CAAC;GAEnJ,MAAMM,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;GAClF,OAAOF,eAAe,CAACG,WAAW,EAAE,CAACJ,WAAW,CAAC,GAAGP,IAAI,CAAC;CAC1D,CAAC;CAEDF,eAAe,CAACc,UAAU,GAAG,UAAS,GAAGZ,IAAI,EAAW;GACvDC,OAAO,CAACC,IAAI,CAAC,6IAA6I,CAAC;GAE3J,OAAOC,SAAS,CAACU,iBAAiB,CAAC,GAAGb,IAAI,CAAC;CAC5C,CAAC;CAEDF,eAAe,CAACgB,YAAY,GAAG,UAAS,GAAGd,IAAI,EAAW;GACzDC,OAAO,CAACC,IAAI,CAAC,0IAA0I,CAAC;GAExJ,OAAOC,SAAS,CAACW,YAAY,CAAC,GAAGd,IAAI,CAAC;CACvC,CAAC;CAEDF,eAAe,CAACiB,aAAa,GAAG,UAASC,IAAI,EAAW;GACvDf,OAAO,CAACC,IAAI,CAAC,6IAA6I,CAAC;GAE3J,OAAOC,SAAS,CAACc,cAAc,CAAC;KAAED;IAAM,CAAC;CAC1C,CAAC;CAEDlB,eAAe,CAACoB,kBAAkB,GAAG,UAASC,IAAI,EAAW;GAC5DlB,OAAO,CAACC,IAAI,CAAC,kJAAkJ,CAAC;GAEhK,MAAMkB,KAAK,GAAGX,oBAAU,CAACC,QAAQ,CAAC,2BAA2B,CAAC;GAC9D,IAAIU,KAAK,IAAIC,cAAI,CAACC,cAAc,CAACC,GAAG,CAAC,IAAI,CAACH,KAAK,CAACI,UAAU,CAACC,eAAe,CAACF,GAAG,CAAC,EAC/E;KACC,OAAO,KAAK;;GAGbpB,SAAS,CAACc,cAAc,CAAC;KAAEE;IAAM,CAAC;GAElC,OAAO,IAAI;CACZ,CAAC;CAEDrB,eAAe,CAAC4B,MAAM,GAAG,UAAS,GAAG1B,IAAI,EAAW;GACnDC,OAAO,CAACC,IAAI,CAAC,sIAAsI,CAAC;GAEpJ,OAAOC,SAAS,CAACwB,cAAc,CAAC,GAAG3B,IAAI,CAAC;CACzC,CAAC;CAEDF,eAAe,CAAC8B,OAAO,GAAG,UAAS,GAAG5B,IAAI,EAAW;GACpDC,OAAO,CAACC,IAAI,CAAC,uIAAuI,CAAC;GAErJ,OAAOC,SAAS,CAAC0B,cAAc,CAAC,GAAG7B,IAAI,CAAC;CACzC,CAAC;CAEDF,eAAe,CAACgC,aAAa,GAAG,UAAS,GAAG9B,IAAI,EAAW;GAC1DC,OAAO,CAACC,IAAI,CAAC,4IAA4I,CAAC;GAE1J,OAAOC,SAAS,CAAC2B,aAAa,CAAC,GAAG9B,IAAI,CAAC;CACxC,CAAC;CAEDF,eAAe,CAACiC,SAAS,GAAG,EAAE;CAC9BjC,eAAe,CAACiC,SAAS,CAACC,cAAc,GAAG,KAAK;CAChDlC,eAAe,CAACmC,QAAQ,GAAG,EAAE;CAE7B,MAAMC,aAAa,GAAG;GACrBC,IAAI,EAAE,MAAM,EAAE;GACdC,eAAe,EAAE,MAAM,KAAK;GAC5BC,aAAa,EAAE,MAAM,CAAC;GACtBC,cAAc,EAAE,MAAM,EAAE;GACxBC,aAAa,EAAE,MAAM,EAAE;GACvBC,KAAK,EAAE,MAAM,IAAI;GACjBC,GAAG,EAAE,MAAM;CACZ,CAAC;;CCjFD,MAAMtC,SAAS,CACf;GAGCuC,WAAW,GACX;KAAA,KAHAC,SAAS,GAAY,KAAK;KAIzB,MAAMV,QAAQ,GAAGW,mBAAS,CAACC,WAAW,CAAC,WAAW,CAAC;KACnD,IAAI,CAACF,SAAS,GAAGV,QAAQ,CAACa,GAAG,CAAC,WAAW,EAAE,KAAK,CAAC;;GAGlD,MAAM1C,QAAQ,CAACE,QAAgB,GAAG,EAAE,EAAEyC,IAAY,GAAG,EAAE,EACvD;KACC,IAAI,CAAC,IAAI,CAACJ,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAAClD,aAAa,CAACO,QAAQ,CAAC;OAEnC,OAAO4C,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAM2C,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC4C,cAAc,CAACjD,QAAQ,CAAC;;KAG9D,MAAME,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACP,QAAQ,CAACE,QAAQ,EAAEyC,IAAI,CAAC;;GAG/D,MAAMS,SAAS,CAAClD,QAAgB,GAAG,EAAE,EACrC;KACC,IAAI,CAAC,IAAI,CAACqC,SAAS,EACnB;OACC,MAAMc,gBAAgB,GAAGnD,QAAQ,KAAK,EAAE,GAAG,CAAC,GAAGA,QAAQ;OACvD0C,MAAM,CAACC,IAAI,CAAClD,aAAa,CAAC0D,gBAAgB,EAAE,OAAO,CAAC;OAEpD,OAAOP,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAM2C,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC+C,eAAe,CAACpD,QAAQ,CAAC;;KAG/D,MAAME,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAAC6C,SAAS,CAAClD,QAAQ,CAAC;;GAG1D,MAAMqD,gBAAgB,CAACrD,QAAgB,GAAG,EAAE,EAC5C;KACC,IAAI,CAAC,IAAI,CAACqC,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAAC1C,WAAW,CAACD,QAAQ,CAAC;OAEjC,OAAO4C,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAM3C,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACJ,WAAW,CAACD,QAAQ,CAAC;;GAG5D,MAAMO,iBAAiB,GACvB;KACC,IAAI,CAAC,IAAI,CAAC8B,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAACrC,UAAU,EAAE;OAExB,OAAOsC,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAM2C,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACiD,uBAAuB,EAAE;;KAG/D,MAAMpD,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACE,iBAAiB,EAAE;;GAG1D,MAAMgD,gBAAgB,GACtB;KACC,IAAI,CAAC,IAAI,CAAClB,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAAClD,aAAa,EAAE;OAE3B,OAAOmD,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAM2C,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACmD,sBAAsB,EAAE;;KAG9D,MAAMtD,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACkD,gBAAgB,EAAE;;GAGzD/C,YAAY,CAACiD,OAAgB,GAAG,EAAE,EAClC;KACC,IAAI,CAAC,IAAI,CAACpB,SAAS,EACnB;OACC,MAAMqB,MAAM,GAAG,EAAE;OACjB,IAAI3C,cAAI,CAAC4C,aAAa,CAACF,OAAO,CAAC,EAC/B;SACC,IAAI1C,cAAI,CAACC,cAAc,CAACyC,OAAO,CAACG,QAAQ,CAAC,EACzC;WACCF,MAAM,CAACG,MAAM,GAAGJ,OAAO,CAACG,QAAQ;;SAGjC,IAAI7C,cAAI,CAACC,cAAc,CAACyC,OAAO,CAACK,OAAO,CAAC,EACxC;WACCJ,MAAM,CAACK,SAAS,GAAGN,OAAO,CAACK,OAAO;;;OAGpCpB,MAAM,CAACC,IAAI,CAACnC,YAAY,CAACkD,MAAM,CAAC;OAEhC,OAAOd,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAM3C,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACG,YAAY,CAACiD,OAAO,CAAC;;GAG5D,MAAM9C,cAAc,CAAC8C,OAAyC,GAAG,EAAE,EACnE;KACC,IAAI,CAAC,IAAI,CAACpB,SAAS,EACnB;OACC,IAAItB,cAAI,CAAC4C,aAAa,CAACF,OAAO,CAAC,EAC/B;SACC,IAAI1C,cAAI,CAACC,cAAc,CAACyC,OAAO,CAAC/C,IAAI,CAAC,EACrC;WACCgC,MAAM,CAACC,IAAI,CAAClC,aAAa,CAACgD,OAAO,CAAC/C,IAAI,CAAC;;SAGxC,IAAIK,cAAI,CAACC,cAAc,CAACyC,OAAO,CAAC5C,IAAI,CAAC,EACrC;WACC6B,MAAM,CAACC,IAAI,CAAC/B,kBAAkB,CAAC6C,OAAO,CAAC5C,IAAI,CAAC;;;OAI9C,OAAO+B,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAM/B,KAAK,GAAGX,oBAAU,CAACC,QAAQ,CAAC,2BAA2B,CAAC;KAC9D,IAAIW,cAAI,CAACC,cAAc,CAACyC,OAAO,CAACxC,GAAG,CAAC,IAAI,CAACH,KAAK,CAACI,UAAU,CAACC,eAAe,CAACsC,OAAO,CAACxC,GAAG,CAAC,EACtF;OACCH,KAAK,CAACkD,OAAO,CAACC,QAAQ,CAACR,OAAO,CAACxC,GAAG,CAAC;OAEnC,OAAO2B,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMnC,IAAI,GAAGI,KAAK,CAACI,UAAU,CAACgD,gBAAgB,CAACT,OAAO,CAAC;KAEvD,MAAMX,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,IAAI0C,cAAc,YAAdA,cAAc,CAAEqB,SAAS,EAAE,EAC/B;OACC,OAAOrB,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACM,cAAc,CAACD,IAAI,CAAC;;KAE1D,MAAMqC,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC+D,oBAAoB,CAAC1D,IAAI,CAAC;;KAGhE,MAAMR,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACM,cAAc,CAACD,IAAI,CAAC;;GAG3D,MAAMW,cAAc,CAACrB,QAAgB,GAAG,EAAE,EAAEqE,SAAkB,GAAG,IAAI,EACrE;KACC,IAAI,CAAC,IAAI,CAAChC,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAACvB,MAAM,CAACpB,QAAQ,EAAEqE,SAAS,CAAC;OAEvC,OAAOzB,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAM2C,iBAAiB,GAAG,OAAMD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2C,gBAAgB,EAAE;KAChF,IAAID,iBAAiB,EACrB;OACC,OAAOD,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACiE,mBAAmB,CAACtE,QAAQ,EAAEqE,SAAS,CAAC;;KAG9E,MAAMnE,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACgB,cAAc,CAACrB,QAAQ,EAAEqE,SAAS,CAAC;;GAG1E,MAAM9C,cAAc,CAACgD,MAAc,EAAEb,MAA2B,EAChE;KACC,IAAI,CAAC,IAAI,CAACrB,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAACrB,OAAO,CAACiD,MAAM,EAAEb,MAAM,CAAC;OAEnC,OAAOd,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAMoE,eAAe,GAAG,OAAM1B,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACoE,6BAA6B,EAAE;KAC3F,IAAID,eAAe,EACnB;OACC,OAAO1B,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACqE,mBAAmB,CAACH,MAAM,EAAEb,MAAM,CAAC;;KAGzE,MAAMxD,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACkB,cAAc,CAACgD,MAAM,EAAEb,MAAM,CAAC;;GAGrE,MAAMlC,aAAa,CAACmD,UAAkB,EAAEjB,MAA2B,EACnE;KACC,IAAI,CAAC,IAAI,CAACrB,SAAS,EACnB;OACCK,MAAM,CAACC,IAAI,CAACnB,aAAa,CAACmD,UAAU,EAAEjB,MAAM,CAAC;OAE7C,OAAOd,OAAO,CAACC,OAAO,EAAE;;KAGzB,MAAMC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF,MAAMoE,eAAe,GAAG,OAAM1B,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACoE,6BAA6B,EAAE;KAC3F,IAAID,eAAe,EACnB;OACC,OAAO1B,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACuE,kBAAkB,CAACD,UAAU,EAAEjB,MAAM,CAAC;;KAG5E,MAAMxD,eAAe,GAAGC,oBAAU,CAACC,QAAQ,CAAC,qCAAqC,CAAC;KAElF,OAAOF,eAAe,oBAAfA,eAAe,CAAEG,WAAW,EAAE,CAACmB,aAAa,CAACmD,UAAU,EAAEjB,MAAM,CAAC;;GAGxEmB,qBAAqB,GACrB;KACC,MAAM/B,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF0C,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAACyE,cAAc,EAAE;;GAG/CC,sBAAsB,GACtB;KACC,MAAMjC,cAAc,GAAG3C,oBAAU,CAACC,QAAQ,CAAC,oCAAoC,CAAC;KAChF0C,cAAc,oBAAdA,cAAc,CAAEzC,WAAW,EAAE,CAAC2E,eAAe,EAAE;;CAEjD;AAEA,OAAMvD,SAAS,GAAG,IAAI5B,SAAS,EAAE;AACjC;CAEA;CACA,MAAMoF,SAAS,GAAG9E,oBAAU,CAACC,QAAQ,CAAC,cAAc,CAAC;CACrD,IAAI6E,SAAS,EACb;GACCA,SAAS,CAACC,MAAM,GAAGzD,SAAS;CAC7B;;CAEA;CACA,IACCA,SAAS,CAACY,SAAS,IAChBtB,cAAI,CAACoE,WAAW,CAACzC,MAAM,CAACC,IAAI,CAAC,IAC7BD,MAAM,CAAC0C,MAAM,KAAK1C,MAAM,EAE5B;GACCA,MAAM,CAACC,IAAI,GAAGnD,eAAe;CAC9B;CAEA,IACCiC,SAAS,CAACY,SAAS,IAChBtB,cAAI,CAACoE,WAAW,CAACzC,MAAM,CAAC2C,EAAE,CAACC,OAAO,CAAC,IACnCvE,cAAI,CAACwE,QAAQ,CAAC7C,MAAM,CAAC8C,eAAe,CAAC,IACrC9C,MAAM,CAAC0C,MAAM,KAAK1C,MAAM,EAE5B;GACCA,MAAM,CAAC2C,EAAE,CAACC,OAAO,GAAG1D,aAAa;CAClC;;;;;;;;"}