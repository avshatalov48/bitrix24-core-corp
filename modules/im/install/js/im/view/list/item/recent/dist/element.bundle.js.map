{"version":3,"file":"element.bundle.js","sources":["../src/element.js"],"sourcesContent":["import { Vue } from \"ui.vue\";\nimport { Utils } from \"im.lib.utils\";\n\nimport \"./element.css\";\n\nVue.cloneComponent('bx-im-view-list-item-recent', 'bx-list-element',\n{\n\tprops: [\n\t\t'rawListItem',\n\t\t'itemTypes'\n\t],\n\n\tmethods:\n\t{\n\t\tformatDate(date)\n\t\t{\n\t\t\tdate = new Date(date);\n\t\t\tlet currentDate = new Date();\n\t\t\tlet weekAgo = currentDate.getTime() - (7*24*60*60*1000);\n\t\t\tlet weekDays = ['vs', 'pn', 'vt', 'sr', 'ch', 'py', 'sb'];\n\n\t\t\tif (\n\t\t\t\tdate.getFullYear() === currentDate.getFullYear()\n\t\t\t\t&& date.getMonth() === currentDate.getMonth()\n\t\t\t\t&& date.getDate() === currentDate.getDate()\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn Utils.date.format(date, 'H:i');\n\t\t\t}\n\t\t\telse if (date.getTime() > weekAgo)\n\t\t\t{\n\t\t\t\treturn weekDays[date.getDay()];\n\t\t\t}\n\t\t\telse if (date.getFullYear() === currentDate.getFullYear())\n\t\t\t{\n\t\t\t\treturn Utils.date.format(date, 'd.m');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn Utils.date.format(date, 'd.m.Y');\n\t\t\t}\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tlistItem()\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.rawListItem.id,\n\t\t\t\ttemplate: this.rawListItem.template,\n\t\t\t\ttype: this.rawListItem.chatType,\n\t\t\t\tsectionCode: this.rawListItem.sectionCode,\n\t\t\t\ttitle: {\n\t\t\t\t\tleftIcon: this.titleLeftIcon,\n\t\t\t\t\tvalue: this.titleValue\n\t\t\t\t},\n\t\t\t\tsubtitle: {\n\t\t\t\t\tvalue: this.rawListItem.message.text\n\t\t\t\t},\n\t\t\t\tavatar: {\n\t\t\t\t\turl: this.avatarUrl,\n\t\t\t\t\tbottomRightIcon: this.avatarBottomRightIcon\n\t\t\t\t},\n\t\t\t\tmessage: this.rawListItem.message,\n\t\t\t\tdate: {\n\t\t\t\t\tvalue: this.formatDate(this.rawListItem.message.date)\n\t\t\t\t},\n\t\t\t\tcounter: {\n\t\t\t\t\tvalue: this.rawListItem.counter,\n\t\t\t\t\tleftIcon: this.rawListItem.pinned ? 'pinned' : ''\n\t\t\t\t},\n\t\t\t\tnotification: false,\n\t\t\t}\n\t\t},\n\n\t\tlistItemStyle()\n\t\t{\n\t\t\tif (this.rawListItem.sectionCode === 'pinned')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tbackgroundColor: '#f7f7f7'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\n\t\timageStyle()\n\t\t{\n\t\t\treturn {\n\t\t\t\tbackgroundColor: this.listItem.avatar.url ? '' : this.imageColor\n\t\t\t};\n\t\t},\n\n\t\timageClass()\n\t\t{\n\t\t\treturn 'bx-vue-list-item-image';\n\t\t},\n\n\t\timageColor()\n\t\t{\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.color;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.color;\n\t\t\t}\n\n\t\t\tif (this.isNotificationChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.color;\n\t\t\t}\n\t\t},\n\n\t\tavatarUrl()\n\t\t{\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.avatar;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.avatar;\n\t\t\t}\n\t\t},\n\n\t\tavatarBottomRightIcon()\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\tif (this.userData.isMobileOnline)\n\t\t\t\t{\n\t\t\t\t\treturn 'mobile-online';\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isOnline && (this.userData.status === 'away' || this.userData.status === 'dnd'))\n\t\t\t\t{\n\t\t\t\t\treturn this.userData.status;\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isOnline)\n\t\t\t\t{\n\t\t\t\t\treturn 'online';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn 'offline';\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\ttitleLeftIcon()\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\tif (this.userData.isAbsent)\n\t\t\t\t{\n\t\t\t\t\treturn 'absent';\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isBirthday)\n\t\t\t\t{\n\t\t\t\t\treturn 'birthday';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.chatType;\n\t\t\t}\n\t\t},\n\n\t\ttitleValue()\n\t\t{\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.name;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.name;\n\t\t\t}\n\n\t\t\tif (this.isNotificationChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.title;\n\t\t\t}\n\t\t},\n\n\t\tuserData()\n\t\t{\n\t\t\treturn this.$root.$store.getters['users/get'](this.rawListItem.userId);\n\t\t},\n\n\t\tdialogData()\n\t\t{\n\t\t\treturn this.$root.$store.getters['dialogues/getByChatId'](this.rawListItem.chatId);\n\t\t},\n\n\t\tisChat()\n\t\t{\n\t\t\treturn ['chat', 'open'].includes(this.rawListItem.chatType)\n\t\t},\n\n\t\tisUser()\n\t\t{\n\t\t\treturn this.rawListItem.chatType === 'user';\n\t\t},\n\n\t\tisNotificationChat()\n\t\t{\n\t\t\treturn this.rawListItem.chatType === 'notification';\n\t\t}\n\t}\n});"],"names":["Vue","cloneComponent","props","methods","formatDate","date","Date","currentDate","weekAgo","getTime","weekDays","getFullYear","getMonth","getDate","Utils","format","getDay","computed","listItem","id","rawListItem","template","type","chatType","sectionCode","title","leftIcon","titleLeftIcon","value","titleValue","subtitle","message","text","avatar","url","avatarUrl","bottomRightIcon","avatarBottomRightIcon","counter","pinned","notification","listItemStyle","backgroundColor","imageStyle","imageColor","imageClass","isUser","userData","color","isChat","dialogData","isNotificationChat","isMobileOnline","isOnline","status","isAbsent","isBirthday","name","$root","$store","getters","userId","chatId","includes"],"mappings":"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"}