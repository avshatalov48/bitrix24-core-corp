{"version":3,"file":"sidebar.bundle.js","sources":["../src/sidebar.js"],"sourcesContent":["import { Vue } from \"ui.vue\";\nimport { Utils } from \"im.lib.utils\";\n\nimport \"./sidebar.css\";\n\nVue.cloneComponent('bx-im-view-list-item-sidebar', 'bx-list-element',\n{\n\tprops: [\n\t\t'rawListItem',\n\t\t'itemTypes'\n\t],\n\n\tmethods:\n\t{\n\n\t},\n\tcomputed:\n\t{\n\t\tlistItem()\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.rawListItem.id,\n\t\t\t\ttemplate: this.rawListItem.template,\n\t\t\t\ttype: this.rawListItem.chatType,\n\t\t\t\tsectionCode: this.rawListItem.sectionCode,\n\t\t\t\ttitle: {\n\t\t\t\t\tleftIcon: this.titleLeftIcon,\n\t\t\t\t\tvalue: this.titleValue\n\t\t\t\t},\n\t\t\t\tavatar: {\n\t\t\t\t\turl: this.avatarUrl,\n\t\t\t\t\ttopRightIcon: this.rawListItem.counter,\n\t\t\t\t\tbottomRightIcon: this.avatarBottomRightIcon\n\t\t\t\t},\n\t\t\t\tnotification: false,\n\t\t\t}\n\t\t},\n\n\t\tlistItemStyle()\n\t\t{\n\t\t\tif (this.rawListItem.sectionCode === 'pinned')\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tbackgroundColor: '#f7f7f7'\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {};\n\t\t},\n\n\t\timageStyle()\n\t\t{\n\t\t\tlet backgroundColor = '';\n\t\t\tif (!this.listItem.avatar.url)\n\t\t\t{\n\t\t\t\tbackgroundColor = this.imageColor;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tbackgroundColor\n\t\t\t};\n\t\t},\n\n\t\timageClass()\n\t\t{\n\t\t\tlet classes = 'bx-vue-list-item-image ';\n\n\t\t\tif (this.isGeneralChat)\n\t\t\t{\n\t\t\t\tclasses += 'bx-vue-list-item-image-general';\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\n\t\timageColor()\n\t\t{\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.color;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.color;\n\t\t\t}\n\n\t\t\tif (this.isNotificationChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.color;\n\t\t\t}\n\t\t},\n\n\t\tavatarUrl()\n\t\t{\n\t\t\tif (this.isGeneralChat)\n\t\t\t{\n\t\t\t\treturn '/bitrix/js/im/images/blank.gif';\n\t\t\t}\n\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.avatar;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.avatar;\n\t\t\t}\n\t\t},\n\n\t\tavatarBottomRightIcon()\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\tif (this.userData.isAbsent)\n\t\t\t\t{\n\t\t\t\t\treturn 'absent';\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isBirthday)\n\t\t\t\t{\n\t\t\t\t\treturn 'birthday';\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isMobileOnline)\n\t\t\t\t{\n\t\t\t\t\treturn 'mobile-online';\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isOnline && (this.userData.status === 'away' || this.userData.status === 'dnd'))\n\t\t\t\t{\n\t\t\t\t\treturn this.userData.status;\n\t\t\t\t}\n\t\t\t\telse if (this.userData.isOnline)\n\t\t\t\t{\n\t\t\t\t\treturn 'online';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn 'offline';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.isChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.chatType;\n\t\t\t}\n\t\t},\n\n\t\ttitleValue()\n\t\t{\n\t\t\tif (this.isUser && this.userData)\n\t\t\t{\n\t\t\t\treturn this.userData.name;\n\t\t\t}\n\n\t\t\tif (this.isChat && this.dialogData)\n\t\t\t{\n\t\t\t\treturn this.dialogData.name;\n\t\t\t}\n\n\t\t\tif (this.isNotificationChat)\n\t\t\t{\n\t\t\t\treturn this.rawListItem.title;\n\t\t\t}\n\t\t},\n\n\t\tuserData()\n\t\t{\n\t\t\treturn this.$root.$store.getters['users/get'](this.rawListItem.userId);\n\t\t},\n\n\t\tdialogData()\n\t\t{\n\t\t\treturn this.$root.$store.getters['dialogues/getByChatId'](this.rawListItem.chatId);\n\t\t},\n\n\t\tisChat()\n\t\t{\n\t\t\treturn ['chat', 'open'].includes(this.rawListItem.chatType)\n\t\t},\n\n\t\tisUser()\n\t\t{\n\t\t\treturn this.rawListItem.chatType === 'user';\n\t\t},\n\n\t\tisNotificationChat()\n\t\t{\n\t\t\treturn this.rawListItem.id === 'notify';\n\t\t},\n\n\t\tisGeneralChat()\n\t\t{\n\t\t\treturn this.rawListItem.id === 'chat1';\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t<div class=\"bx-vue-list-item\" :style=\"listItemStyle\">\n\t\t<template v-if=\"listItem.template !== itemTypes.placeholder\">\n\t\t\t<div v-if=\"listItem.avatar\" class=\"bx-vue-list-item-image-wrap\">\n\t\t\t\t<img v-if=\"listItem.avatar.url\" :src=\"listItem.avatar.url\" :style=\"imageStyle\" :class=\"imageClass\" alt=\"\">\n\t\t\t\t<div v-else-if=\"!listItem.avatar.url\" :style=\"imageStyle\" class=\"bx-vue-list-item-image-text\">{{ avatarText }}</div>\t\n\t\t\t\t<div v-if=\"listItem.avatar.topLeftIcon\" :class=\"'bx-vue-list-icon-avatar-top-left bx-vue-list-icon-avatar-top-left-' + listItem.avatar.topLeftIcon\"></div>\n\t\t\t\t<div v-if=\"listItem.avatar.topRightIcon\" class=\"bx-vue-list-icon-avatar-top-right\">{{ listItem.avatar.topRightIcon }}</div>\n\t\t\t\t<div v-if=\"listItem.avatar.bottomRightIcon\" :class=\"'bx-vue-list-icon-avatar-bottom-right bx-vue-list-avatar-bottom-right-' + listItem.avatar.bottomRightIcon\"></div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template v-else-if=\"listItem.template === itemTypes.placeholder\">\n\t\t\t<div class=\"bx-vue-list-item-image-wrap\"><img src=\"https://www.ischool.berkeley.edu/sites/default/files/default_images/avatar.jpeg\" alt=\"\" class=\"bx-vue-list-item-image\"></div>\n\t\t</template>\n\t</div>\n\t`\n});"],"names":["Vue","cloneComponent","props","methods","computed","listItem","id","rawListItem","template","type","chatType","sectionCode","title","leftIcon","titleLeftIcon","value","titleValue","avatar","url","avatarUrl","topRightIcon","counter","bottomRightIcon","avatarBottomRightIcon","notification","listItemStyle","backgroundColor","imageStyle","imageColor","imageClass","classes","isGeneralChat","isUser","userData","color","isChat","dialogData","isNotificationChat","isAbsent","isBirthday","isMobileOnline","isOnline","status","name","$root","$store","getters","userId","chatId","includes"],"mappings":"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"}