{"version":3,"file":"attach.bundle.js","sources":["../src/types/delimiter.js","../src/types/file.js","../src/mixin/attachLinks.js","../src/types/grid.js","../src/types/html.js","../src/types/image.js","../src/types/link.js","../src/types/message.js","../src/types/rich.js","../src/types/user.js","../src/attach.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Vue component\n *\n * Delimiter (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./delimiter.css\";\n\nexport const AttachTypeDelimiter =\n{\n\tproperty: 'DELIMITER',\n\tname: 'bx-im-view-element-attach-delimiter',\n\tcomponent:\n\t{\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tstyles()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\twidth: this.config.DELIMITER.SIZE? this.config.DELIMITER.SIZE+'px': '',\n\t\t\t\t\tbackgroundColor: this.config.DELIMITER.COLOR? this.config.DELIMITER.COLOR: this.color,\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\ttemplate: `<div class=\"bx-im-element-attach-type-delimiter\" :style=\"styles\"></div>`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * File (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./file.css\";\nimport {Vue} from \"ui.vue\";\nimport {FilesModel} from \"im.model\";\nimport {Utils} from \"im.lib.utils\";\nimport \"ui.icons.disk\";\n\nexport const AttachTypeFile =\n{\n\tproperty: 'FILE',\n\tname: 'bx-im-element-attach-file',\n\tcomponent:\n\t{\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\topenLink(element)\n\t\t\t{\n\t\t\t\tUtils.platform.openNewPage(element.LINK);\n\t\t\t},\n\t\t\tfile()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tname: this.config.FILE.NAME,\n\t\t\t\t\textension: this.config.FILE.NAME.split('.').splice(-1)[0],\n\t\t\t\t\tsize: this.config.FILE.SIZE,\n\t\t\t\t};\n\t\t\t},\n\t\t\tfileName(element)\n\t\t\t{\n\t\t\t\tlet maxLength = 70;\n\n\t\t\t\tif (!element.NAME || element.NAME.length < maxLength)\n\t\t\t\t{\n\t\t\t\t\treturn element.NAME;\n\t\t\t\t}\n\n\t\t\t\tlet endWordLength = 10;\n\n\t\t\t\tlet extension = element.NAME.split('.').splice(-1)[0];\n\t\t\t\tlet secondPart = element.NAME.substring(element.NAME.length-1 - (extension.length+1+endWordLength));\n\t\t\t\tlet firstPart = element.NAME.substring(0, maxLength-secondPart.length-3);\n\n\t\t\t\treturn firstPart.trim()+'...'+secondPart.trim();\n\t\t\t},\n\t\t\tfileNameFull(element)\n\t\t\t{\n\t\t\t\treturn element.NAME;\n\t\t\t},\n\t\t\tfileSize(element)\n\t\t\t{\n\t\t\t\tlet size = element.SIZE;\n\t\t\t\tif (!size || size <= 0)\n\t\t\t\t{\n\t\t\t\t\tsize = 0;\n\t\t\t\t}\n\n\t\t\t\tlet sizes = [\"BYTE\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\t\t\t\tlet position = 0;\n\n\t\t\t\twhile (size >= 1024 && position < 4)\n\t\t\t\t{\n\t\t\t\t\tsize /= 1024;\n\t\t\t\t\tposition++;\n\t\t\t\t}\n\n\t\t\t\treturn Math.round(size) + \" \" + this.$Bitrix.Loc.getMessage('IM_MESSENGER_ATTACH_FILE_SIZE_'+sizes[position]);\n\t\t\t},\n\t\t\tfileIcon(element)\n\t\t\t{\n\t\t\t\treturn FilesModel.getIconType(element.NAME.split('.').splice(-1)[0]);\n\t\t\t}\n\t\t},\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-file-element\">\n\t\t\t\t<template v-for=\"(element, index) in config.FILE\">\n\t\t\t\t\t<div class=\"bx-im-element-attach-type-file\" @click=\"openLink(element)\">\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-file-icon\">\n\t\t\t\t\t\t\t<div :class=\"['ui-icon', 'ui-icon-file-'+fileIcon(element)]\"><i></i></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-file-block\">\n\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-file-name\" :title=\"fileNameFull(element)\">\n\t\t\t\t\t\t\t\t{{fileName(element)}}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-file-size\">{{fileSize(element)}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","import { Utils } from \"im.lib.utils\";\n\nexport const AttachLinks = {\n\tmethods:\n\t{\n\t\topenLink(event)\n\t\t{\n\t\t\tconst element = event.element;\n\t\t\tconst eventData = event.event;\n\n\t\t\tif (!Utils.platform.isBitrixMobile() && element.LINK)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (element.LINK && eventData.target.tagName !== 'A')\n\t\t\t{\n\t\t\t\tUtils.platform.openNewPage(element.LINK);\n\t\t\t}\n\t\t\telse if (!element.LINK)\n\t\t\t{\n\t\t\t\tconst entity = {\n\t\t\t\t\tid: null,\n\t\t\t\t\ttype: null\n\t\t\t\t};\n\t\t\t\tif (element.hasOwnProperty('USER_ID') && element.USER_ID > 0)\n\t\t\t\t{\n\t\t\t\t\tentity.id = element.USER_ID;\n\t\t\t\t\tentity.type = 'user';\n\t\t\t\t}\n\t\t\t\tif (element.hasOwnProperty('CHAT_ID') && element.CHAT_ID > 0)\n\t\t\t\t{\n\t\t\t\t\tentity.id = element.CHAT_ID;\n\t\t\t\t\tentity.type = 'chat';\n\t\t\t\t}\n\n\t\t\t\tif (entity.id && entity.type && window.top['BXIM'])\n\t\t\t\t{\n\t\t\t\t\tconst popupAngle = !BX.MessengerTheme.isDark();\n\t\t\t\t\twindow.top['BXIM'].messenger.openPopupExternalData(\n\t\t\t\t\t\teventData.target,\n\t\t\t\t\t\tentity.type,\n\t\t\t\t\t\tpopupAngle,\n\t\t\t\t\t\t{'ID': entity.id}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (navigator.userAgent.toLowerCase().includes('bitrixmobile'))\n\t\t\t\t{\n\t\t\t\t\tlet dialogId = '';\n\t\t\t\t\tif (entity.type === 'chat')\n\t\t\t\t\t{\n\t\t\t\t\t\tdialogId = `chat${entity.id}`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tdialogId = entity.id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (dialogId !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\tBXMobileApp.Events.postToComponent(\"onOpenDialog\", [{dialogId: dialogId}, true], 'im.recent');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Grid (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./grid.css\";\nimport {Utils} from \"im.lib.utils\";\nimport {MessagesModel} from \"im.model\";\nimport { AttachLinks } from \"../mixin/attachLinks\";\n\nexport const AttachTypeGrid =\n{\n\tproperty: 'GRID',\n\tname: 'bx-im-view-element-attach-grid',\n\tcomponent:\n\t{\n\t\tmixins: [\n\t\t\tAttachLinks\n\t\t],\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tcreated()\n\t\t{\n\t\t\tif (Utils.platform.isBitrixMobile())\n\t\t\t{\n\t\t\t\tthis.maxCellWith = Math.floor(Math.min(screen.availWidth, screen.availHeight)/4);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.maxCellWith = null;\n\t\t\t}\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tgetWidth(element)\n\t\t\t{\n\t\t\t\tif (element.DISPLAY !== 'row')\n\t\t\t\t{\n\t\t\t\t\treturn element.WIDTH? element.WIDTH+'px': '';\n\t\t\t\t}\n\n\t\t\t\tif (!element.VALUE)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (this.maxCellWith && element.WIDTH > this.maxCellWith)\n\t\t\t\t{\n\t\t\t\t\treturn this.maxCellWith+'px';\n\t\t\t\t}\n\n\t\t\t\treturn element.WIDTH? element.WIDTH+'px': '';\n\t\t\t},\n\n\t\t\tgetValueColor(element)\n\t\t\t{\n\t\t\t\tif (!element.COLOR)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn element.COLOR;\n\t\t\t},\n\n\t\t\tgetValue(element)\n\t\t\t{\n\t\t\t\tif (!element.VALUE)\n\t\t\t\t{\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\treturn Utils.text.decode(element.VALUE);\n\t\t\t},\n\t\t},\n\t\t//language=Vue\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-grid\">\n\t\t\t\t<template v-for=\"(element, index) in config.GRID\">\n\t\t\t\t\t<template v-if=\"element.DISPLAY.toLowerCase() === 'block'\">\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-block\" :style=\"{width: getWidth(element)}\">\n\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-element-name\">{{element.NAME}}</div>\n\t\t\t\t\t\t\t<template v-if=\"element.LINK\">\n\t\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link\">\n\t\t\t\t\t\t\t\t\t<a :href=\"element.LINK\" target=\"_blank\" @click=\"openLink({element: element, event: $event})\" :style=\"{color: getValueColor(element)}\" v-html=\"getValue(element)\"></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-element-value\" :style=\"{color: getValueColor(element)}\" v-html=\"getValue(element)\"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"element.DISPLAY.toLowerCase() === 'line'\">\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-card\" :style=\"{width: getWidth(element)}\">\n\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-element-name\">{{element.NAME}}</div>\n\t\t\t\t\t\t\t<template v-if=\"element.LINK\">\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link\"\n\t\t\t\t\t\t\t\t\t:style=\"{color: element.COLOR? element.COLOR: ''}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<a :href=\"element.LINK\" target=\"_blank\" @click=\"openLink({element: element, event: $event})\" v-html=\"getValue(element)\"></a>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-element-value\" :style=\"{color: element.COLOR? element.COLOR: ''}\" v-html=\"getValue(element)\"></div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else-if=\"element.DISPLAY.toLowerCase() === 'row'\">\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-grid-display bx-im-element-attach-type-display-column\">\n\t\t\t\t\t\t\t<table class=\"bx-im-element-attach-type-display-column-table\">\n\t\t\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"element.NAME\">\n\t\t\t\t\t\t\t\t\t\t\t<td class=\"bx-im-element-attach-type-grid-element-name\" :colspan=\"element.VALUE? 1: 2\" :style=\"{width: getWidth(element)}\">{{element.NAME}}</td>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t<template v-if=\"element.VALUE\">\n\t\t\t\t\t\t\t\t\t\t\t<template v-if=\"element.LINK\">\n\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-grid-element-value bx-im-element-attach-type-grid-element-value-link\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:colspan=\"element.NAME? 1: 2\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t:style=\"{color: element.COLOR? element.COLOR: ''}\"\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<a :href=\"element.LINK\" target=\"_blank\" @click=\"openLink({element: element, event: $event})\" v-html=\"getValue(element)\"></a>\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t\t\t\t<td class=\"bx-im-element-attach-type-grid-element-value\" :colspan=\"element.NAME? 1: 2\" :style=\"{color: element.COLOR? element.COLOR: ''}\" v-html=\"getValue(element)\"></td>\n\t\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Rich Attach type\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./html.css\";\nimport { Utils } from 'im.lib.utils';\n\nexport const AttachTypeHtml =\n{\n\tproperty: 'HTML',\n\tname: 'bx-im-view-element-attach-html',\n\tcomponent:\n\t{\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\thtml()\n\t\t\t{\n\t\t\t\tconst text = this.config.HTML.replace(/&nbsp;/gi, \" \");\n\t\t\t\treturn Utils.text.decode(text);\n\t\t\t}\n\t\t},\n\t\ttemplate: `<div class=\"bx-im-element-attach-type-html\" v-html=\"html\"></div>`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Image (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./image.css\";\nimport {Utils} from \"im.lib.utils\";\nimport 'ui.vue.directives.lazyload';\n\nexport const AttachTypeImage =\n{\n\tproperty: 'IMAGE',\n\tname: 'bx-im-view-element-attach-image',\n\tcomponent:\n\t{\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\topen(file)\n\t\t\t{\n\t\t\t\tif (!file)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (Utils.platform.isBitrixMobile())\n\t\t\t\t{\n\t\t\t\t\t// TODO add multiply\n\t\t\t\t\tBXMobileApp.UI.Photo.show({photos: [{url: file}], default_photo: file})\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.open(file, '_blank');\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetImageSize(width, height, maxWidth)\n\t\t\t{\n\t\t\t\tlet aspectRatio;\n\n\t\t\t\tif (width > maxWidth)\n\t\t\t\t{\n\t\t\t\t\taspectRatio = maxWidth / width;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\taspectRatio = 1;\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: width * aspectRatio,\n\t\t\t\t\theight: height * aspectRatio\n\t\t\t\t};\n\t\t\t},\n\t\t\tgetElementSource(element)\n\t\t\t{\n\t\t\t\treturn element.PREVIEW? element.PREVIEW: element.LINK;\n\t\t\t},\n\t\t\tlazyLoadCallback(event)\n\t\t\t{\n\t\t\t\tif (!event.element.style.width)\n\t\t\t\t{\n\t\t\t\t\tevent.element.style.width = event.element.offsetWidth+'px';\n\t\t\t\t}\n\t\t\t\tif (!event.element.style.height)\n\t\t\t\t{\n\t\t\t\t\tevent.element.style.height = event.element.offsetHeight+'px';\n\t\t\t\t}\n\t\t\t},\n\t\t\tstyleFileSizes(image)\n\t\t\t{\n\t\t\t\tif (!(image.WIDTH && image.HEIGHT))\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tmaxHeight: '100%',\n\t\t\t\t\t\tbackgroundSize: 'contain'\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tlet sizes = this.getImageSize(image.WIDTH, image.HEIGHT, 250);\n\n\t\t\t\treturn {\n\t\t\t\t\twidth: sizes.width+'px',\n\t\t\t\t\theight: sizes.height+'px',\n\t\t\t\t\tbackgroundSize: sizes.width < 100 || sizes.height < 100? 'contain': 'initial'\n\t\t\t\t}\n\t\t\t},\n\t\t\tstyleBoxSizes(image)\n\t\t\t{\n\t\t\t\tif (!(image.WIDTH && image.HEIGHT))\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\theight: '150px'\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tif (parseInt(this.styleFileSizes(image).height) <= 250)\n\t\t\t\t{\n\t\t\t\t\treturn {};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\theight: '280px'\n\t\t\t\t}\n\t\t\t},\n\t\t},\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-image\">\n\t\t\t\t<template v-for=\"(image, index) in config.IMAGE\">\n\t\t\t\t\t<div class=\"bx-im-element-attach-type-image-block\" @click=\"open(image.LINK)\" :style=\"styleBoxSizes(image)\" :key=\"index\">\n\t\t\t\t\t\t<img v-bx-lazyload=\"{callback: lazyLoadCallback}\"\n\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-image-source\"\n\t\t\t\t\t\t\t:data-lazyload-src=\"getElementSource(image)\"\n\t\t\t\t\t\t\t:style=\"styleFileSizes(image)\"\n\t\t\t\t\t\t\t:title=\"image.NAME\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Link (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./link.css\";\nimport {AttachTypeImage} from \"./image\";\nimport { AttachLinks } from \"../mixin/attachLinks\";\nimport { Utils } from 'im.lib.utils';\n\nexport const AttachTypeLink =\n{\n\tproperty: 'LINK',\n\tname: 'bx-im-view-element-attach-link',\n\tcomponent:\n\t{\n\t\tmixins: [\n\t\t\tAttachLinks\n\t\t],\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tgetImageConfig(element)\n\t\t\t{\n\t\t\t\treturn {IMAGE: [{\n\t\t\t\t\tNAME: element.NAME,\n\t\t\t\t\tPREVIEW: element.PREVIEW,\n\t\t\t\t\tWIDTH: element.WIDTH,\n\t\t\t\t\tHEIGHT: element.HEIGHT,\n\t\t\t\t}]};\n\t\t\t},\n\t\t\tgetLinkName(element)\n\t\t\t{\n\t\t\t\treturn element.NAME? element.NAME: element.LINK;\n\t\t\t},\n\t\t\tgetDescription(element)\n\t\t\t{\n\t\t\t\tconst text = element.HTML? element.HTML: element.DESC;\n\t\t\t\treturn Utils.text.decode(text);\n\t\t\t}\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\timageComponentName()\n\t\t\t{\n\t\t\t\treturn AttachTypeImage.name;\n\t\t\t},\n\t\t},\n\t\tcomponents:\n\t\t{\n\t\t\t[AttachTypeImage.name]: AttachTypeImage.component\n\t\t},\n\t\t//language=Vue\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-link\">\n\t\t\t\t<template v-for=\"(element, index) in config.LINK\">\n\t\t\t\t\t<div class=\"bx-im-element-attach-type-link-element\" :key=\"index\">\n\t\t\t\t\t\t<a \n\t\t\t\t\t\t\tv-if=\"element.LINK\"\n\t\t\t\t\t\t\t:href=\"element.LINK\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-link-name\" \n\t\t\t\t\t\t\t@click=\"openLink({element: element, event: $event})\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{getLinkName(element)}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span \n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-ajax-link\"\n\t\t\t\t\t\t\t@click=\"openLink({element: element, event: $event})\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{getLinkName(element)}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<div v-if=\"element.DESC || element.HTML\" class=\"bx-im-element-attach-type-link-desc\" v-html=\"getDescription(element)\"></div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tv-if=\"element.PREVIEW\" \n\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-link-image\"\n\t\t\t\t\t\t\t@click=\"openLink({element: element, event: $event})\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<component :is=\"imageComponentName\" :config=\"getImageConfig(element)\" :color=\"color\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Message (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {MessagesModel} from \"im.model\";\nimport {Utils} from \"im.lib.utils\";\n\nexport const AttachTypeMessage =\n{\n\tproperty: 'MESSAGE',\n\tname: 'bx-im-view-element-attach-message',\n\tcomponent:\n\t{\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\tmessage()\n\t\t\t{\n\t\t\t\treturn Utils.text.decode(this.config.MESSAGE);\n\t\t\t}\n\t\t},\n\t\ttemplate: `<div class=\"bx-im-element-attach-type-message\" v-html=\"message\"></div>`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * Rich (attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./rich.css\";\nimport {AttachTypeImage} from \"./image\";\nimport { AttachLinks } from \"../mixin/attachLinks\";\n\nexport const AttachTypeRich =\n{\n\tproperty: 'RICH_LINK',\n\tname: 'bx-im-view-element-attach-rich',\n\tcomponent:\n\t{\n\t\tmixins: [\n\t\t\tAttachLinks\n\t\t],\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tgetImageConfig(element)\n\t\t\t{\n\t\t\t\treturn {IMAGE: [{\n\t\t\t\t\tNAME: element.NAME,\n\t\t\t\t\tPREVIEW: element.PREVIEW,\n\t\t\t\t\tWIDTH: element.WIDTH,\n\t\t\t\t\tHEIGHT: element.HEIGHT,\n\t\t\t\t}]};\n\t\t\t},\n\t\t},\n\t\tcomputed:\n\t\t{\n\t\t\timageComponentName()\n\t\t\t{\n\t\t\t\treturn AttachTypeImage.name;\n\t\t\t}\n\t\t},\n\t\tcomponents:\n\t\t{\n\t\t\t[AttachTypeImage.name]: AttachTypeImage.component\n\t\t},\n\t\t//language=Vue\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-rich\">\n\t\t\t\t<template v-for=\"(element, index) in config.RICH_LINK\">\n\t\t\t\t\t<div class=\"bx-im-element-attach-type-rich-element\" :key=\"index\">\n\t\t\t\t\t\t<div v-if=\"element.PREVIEW\" class=\"bx-im-element-attach-type-rich-image\" @click=\"openLink({element: element, event: $event})\">\n\t\t\t\t\t\t\t<component :is=\"imageComponentName\" :config=\"getImageConfig(element)\" :color=\"color\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-rich-name\" @click=\"openLink({element: element, event: $event})\">{{element.NAME}}</div>\n\t\t\t\t\t\t<div v-if=\"element.HTML || element.DESC\" class=\"bx-im-element-attach-type-rich-desc\">{{element.HTML || element.DESC}}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","/**\n * Bitrix Messenger\n * Vue component\n *\n * User (Attach type)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport \"./user.css\";\nimport { AttachLinks } from \"../mixin/attachLinks\";\n\nexport const AttachTypeUser =\n{\n\tproperty: 'USER',\n\tname: 'bx-im-view-element-attach-user',\n\tcomponent:\n\t{\n\t\tmixins: [\n\t\t\tAttachLinks\n\t\t],\n\t\tprops:\n\t\t{\n\t\t\tconfig: {type: Object, default: {}},\n\t\t\tcolor: {type: String, default: 'transparent'},\n\t\t},\n\t\tmethods:\n\t\t{\n\t\t\tgetAvatarType(element)\n\t\t\t{\n\t\t\t\tif (element.AVATAR)\n\t\t\t\t{\n\t\t\t\t\treturn '';\n\t\t\t\t}\n\n\t\t\t\tlet avatarType = 'user';\n\n\t\t\t\tif (element.AVATAR_TYPE === 'CHAT')\n\t\t\t\t{\n\t\t\t\t\tavatarType = 'chat';\n\t\t\t\t}\n\t\t\t\telse if (element.AVATAR_TYPE === 'BOT')\n\t\t\t\t{\n\t\t\t\t\tavatarType = 'bot';\n\t\t\t\t}\n\n\t\t\t\treturn 'bx-im-element-attach-type-user-avatar-type-'+avatarType;\n\t\t\t}\n\t\t},\n\t\t//language=Vue\n\t\ttemplate: `\n\t\t\t<div class=\"bx-im-element-attach-type-user\">\n\t\t\t\t<template v-for=\"(element, index) in config.USER\">\n\t\t\t\t\t<div class=\"bx-im-element-attach-type-user-body\">\n\t\t\t\t\t\t<div class=\"bx-im-element-attach-type-user-avatar\">\n\t\t\t\t\t\t\t<div :class=\"['bx-im-element-attach-type-user-avatar-type', getAvatarType(element)]\" :style=\"{backgroundColor: element.AVATAR? '': color}\">\n\t\t\t\t\t\t\t\t<img v-if=\"element.AVATAR\" \n\t\t\t\t\t\t\t\t\tv-bx-lazyload\n\t\t\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-user-avatar-source\"\n\t\t\t\t\t\t\t\t\t:data-lazyload-src=\"element.AVATAR\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"element.LINK\"\n\t\t\t\t\t\t\t:href=\"element.LINK\" \n\t\t\t\t\t\t\tclass=\"bx-im-element-attach-type-user-name\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t@click=\"openLink({element: element, event: $event})\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{element.NAME}}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<span v-else @click.prevent=\"openLink({element: element, event: $event})\">\n\t\t\t\t\t\t\t{{element.NAME}}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t`\n\t},\n};","/**\n * Bitrix Messenger\n * Attach element Vue component\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport 'ui.design-tokens';\nimport './attach.css';\n\nimport {AttachTypeDelimiter} from './types/delimiter';\nimport {AttachTypeFile} from './types/file';\nimport {AttachTypeGrid} from './types/grid';\nimport {AttachTypeHtml} from './types/html';\nimport {AttachTypeImage} from './types/image';\nimport {AttachTypeLink} from './types/link';\nimport {AttachTypeMessage} from './types/message';\nimport {AttachTypeRich} from './types/rich';\nimport {AttachTypeUser} from './types/user';\n\nimport {BitrixVue} from 'ui.vue';\n\nconst AttachTypes = [\n\tAttachTypeDelimiter,\n\tAttachTypeFile,\n\tAttachTypeGrid,\n\tAttachTypeHtml,\n\tAttachTypeImage,\n\tAttachTypeLink,\n\tAttachTypeMessage,\n\tAttachTypeRich,\n\tAttachTypeUser\n];\n\nconst AttachComponents = {};\nAttachTypes.forEach(attachType => {\n\tAttachComponents[attachType.name] = attachType.component;\n});\n\nBitrixVue.component('bx-im-view-element-attach',\n{\n\tprops:\n\t{\n\t\tconfig: {type: Object, default: {}},\n\t\tbaseColor: {type: String, default: '#17a3ea'},\n\t},\n\tmethods:\n\t{\n\t\tgetComponentForBlock(block)\n\t\t{\n\t\t\tfor (let attachType of AttachTypes)\n\t\t\t{\n\t\t\t\tif (typeof block[attachType.property] !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn attachType.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn '';\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tcolor()\n\t\t{\n\t\t\tif (\n\t\t\t\ttypeof(this.config.COLOR) === 'undefined'\n\t\t\t\t|| !this.config.COLOR\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn this.baseColor;\n\t\t\t}\n\n\t\t\tif (this.config.COLOR === 'transparent')\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.config.COLOR;\n\t\t},\n\t},\n\tcomponents: AttachComponents,\n\ttemplate: `\n\t\t<div class=\"bx-im-element-attach\">\n\t\t\t<div v-if=\"color\" class=\"bx-im-element-attach-border\" :style=\"{borderColor: color}\"></div>\n\t\t\t<div class=\"bx-im-element-attach-content\">\n\t\t\t\t<template v-for=\"(block, index) in config.BLOCKS\">\n\t\t\t\t\t<component :is=\"getComponentForBlock(block)\" :config=\"block\" :color=\"color\" :key=\"index\" />\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["AttachTypeDelimiter","property","name","component","props","config","type","Object","color","String","computed","styles","width","DELIMITER","SIZE","backgroundColor","COLOR","template","AttachTypeFile","methods","openLink","element","Utils","platform","openNewPage","LINK","file","FILE","NAME","extension","split","splice","size","fileName","maxLength","length","endWordLength","secondPart","substring","firstPart","trim","fileNameFull","fileSize","sizes","position","Math","round","$Bitrix","Loc","getMessage","fileIcon","FilesModel","getIconType","AttachLinks","event","eventData","isBitrixMobile","target","tagName","entity","id","hasOwnProperty","USER_ID","CHAT_ID","window","top","popupAngle","BX","MessengerTheme","isDark","messenger","openPopupExternalData","navigator","userAgent","toLowerCase","includes","dialogId","BXMobileApp","Events","postToComponent","AttachTypeGrid","mixins","created","maxCellWith","floor","min","screen","availWidth","availHeight","getWidth","DISPLAY","WIDTH","VALUE","getValueColor","getValue","text","decode","AttachTypeHtml","html","HTML","replace","AttachTypeImage","open","UI","Photo","show","photos","url","default_photo","getImageSize","height","maxWidth","aspectRatio","getElementSource","PREVIEW","lazyLoadCallback","style","offsetWidth","offsetHeight","styleFileSizes","image","HEIGHT","maxHeight","backgroundSize","styleBoxSizes","parseInt","AttachTypeLink","getImageConfig","IMAGE","getLinkName","getDescription","DESC","imageComponentName","components","AttachTypeMessage","message","MESSAGE","AttachTypeRich","AttachTypeUser","getAvatarType","AVATAR","avatarType","AVATAR_TYPE","AttachTypes","AttachComponents","forEach","attachType","BitrixVue","baseColor","getComponentForBlock","block"],"mappings":"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"}