{"version":3,"sources":["textarea.bundle.js"],"names":["exports","ui_vue","im_lib_localstorage","im_lib_utils","main_core","Vue","component","props","siteId","default","userId","dialogId","enableCommand","enableMention","desktopMode","enableEdit","enableFile","sendByEnter","autoFocus","writesEventLetter","styles","type","Object","_default","listenEventInsertText","listenEventFocus","listenEventBlur","data","placeholderMessage","currentMessage","previousMessage","commandListen","mentionListen","stylesDefault","freeze","button","backgroundColor","iconColor","created","this","event","$on","onInsertText","$root","onFocusSet","onFocusClear","localStorage","LocalStorage","textareaHistory","get","beforeDestroy","$off","clearTimeout","messageStoreTimeout","set","computed","textareaClassName","Utils","device","isMobile","buttonStyle","assign","isIconDark","isDarkColor","className","style","localize","getFilteredPhrases","$bitrixMessages","isIE11","Browser","directives","bx-im-focus","inserted","element","params","value","focus","methods","insertText","text","breakline","arguments","length","undefined","position","cursor","textarea","$refs","selectionStart","selectionEnd","substring","trim","endsWith","textChangeEvent","sendMessage","preventDefault","$emit","_this","previousSelectionStart","previousSelectionEnd","toString","setTimeout","onKeyDown","target","isMac","platform","isCtrlTEnable","isBitrixDesktop","browser","isChrome","altKey","ctrlKey","shiftKey","keyCode","document","activeElement","stopPropagation","metaKey","key","includes","tagStart","toLowerCase","tagEnd","selected","startsWith","indexOf","onKeyUp","onPaste","$nextTick","onInput","onFocus","onBlur","onAppButtonClick","appId","blur","onFileClick","onFileSelect","fileChangeEvent","fileInput","log","skip","console","warn","template","window","BX","Messenger","Lib"],"mappings":"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","file":"textarea.bundle.map.js"}