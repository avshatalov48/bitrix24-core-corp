{"version":3,"sources":["textarea.bundle.js"],"names":["exports","ui_vue","im_lib_localstorage","im_lib_utils","main_core","Vue","component","props","siteId","default","userId","dialogId","enableCommand","enableMention","desktopMode","enableEdit","enableFile","sendByEnter","autoFocus","writesEventLetter","styles","type","Object","_default","listenEventInsertText","listenEventFocus","listenEventBlur","data","placeholderMessage","currentMessage","previousMessage","commandListen","mentionListen","stylesDefault","freeze","button","backgroundColor","iconColor","created","this","event","$on","onInsertText","$root","onFocusSet","onFocusClear","localStorage","LocalStorage","textareaHistory","get","beforeDestroy","$off","clearTimeout","messageStoreTimeout","set","computed","textareaClassName","Utils","device","isMobile","buttonStyle","assign","isIconDark","isDarkColor","className","style","localize","getFilteredPhrases","$bitrixMessages","isIE11","Browser","directives","bx-im-focus","inserted","element","params","value","focus","methods","insertText","text","breakline","arguments","length","undefined","position","cursor","textarea","$refs","selectionStart","selectionEnd","substring","trim","endsWith","textChangeEvent","sendMessage","$emit","_this","previousSelectionStart","previousSelectionEnd","toString","setTimeout","onKeyDown","target","isMac","platform","isCtrlTEnable","isBitrixDesktop","browser","isChrome","altKey","ctrlKey","shiftKey","keyCode","document","activeElement","preventDefault","stopPropagation","metaKey","key","includes","tagStart","toLowerCase","tagEnd","selected","startsWith","indexOf","onKeyUp","onPaste","$nextTick","onInput","onFocus","onBlur","onAppButtonClick","appId","blur","onFileClick","onFileSelect","fileChangeEvent","fileInput","template","window","BX","Messenger","Lib"],"mappings":"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","file":"textarea.bundle.map.js"}