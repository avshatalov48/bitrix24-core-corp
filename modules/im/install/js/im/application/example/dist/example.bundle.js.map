{"version":3,"file":"example.bundle.js","sources":["../src/example.js"],"sourcesContent":["/**\n * Bitrix Im\n * Core application\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Core} from \"im.application.core\";\nimport {VueVendorV2} from \"ui.vue\";\nimport {Logger} from \"im.lib.logger\";\n\nexport class ExampleApplication\n{\n\t/* region 01. Initialize */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.inited = false;\n\t\tthis.initPromise = new BX.Promise;\n\n\t\tthis.params = params;\n\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.template = null;\n\n\t\tthis.eventBus = new VueVendorV2;\n\n\t\tCore.ready()\n\t\t\t.then(result => this.initParams(result))\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitParams(controller)\n\t{\n\t\tthis.controller = controller;\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: `<div>test2 {{store.application.common.host}}</div>`,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tstore()\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.state;\n\t\t\t\t}\n\t\t\t},\n\t\t}).then(vue => {\n\t\t\tthis.template = vue;\n\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t});\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromise.resolve(this);\n\n\t\treturn this.requestData();\n\t}\n\n\trequestData()\n\t{\n\t\tLogger.log('Requested data!');\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\tlet promise = new BX.Promise;\n\t\t\tpromise.resolve(this);\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n\n\t/* endregion 01. Initialize */\n\n\t/* region 02. Event Bus */\n\temit(eventName, params = {})\n\t{\n\t\tthis.eventBus.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.eventBus.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\t/* endregion 02. Event Bus */\n}"],"names":["ExampleApplication","params","inited","initPromise","BX","Promise","rootNode","node","document","createElement","template","eventBus","VueVendorV2","Core","ready","then","result","initParams","initComponent","initComplete","controller","resolve","reject","createVue","el","computed","store","$store","state","vue","requestData","Logger","log","promise","eventName","$emit","callback","$on"],"mappings":";;;;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACA,KAIaA,kBAAkB;;;GAI9B,8BACA;KAAA;KAAA,IADYC,MAAM,uEAAG,EAAE;KAAA;KAEtB,IAAI,CAACC,MAAM,GAAG,KAAK;KACnB,IAAI,CAACC,WAAW,GAAG,IAAIC,EAAE,CAACC,OAAO;KAEjC,IAAI,CAACJ,MAAM,GAAGA,MAAM;KAEpB,IAAI,CAACK,QAAQ,GAAG,IAAI,CAACL,MAAM,CAACM,IAAI,IAAIC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;KAEjE,IAAI,CAACC,QAAQ,GAAG,IAAI;KAEpB,IAAI,CAACC,QAAQ,GAAG,IAAIC,kBAAW;KAE/BC,wBAAI,CAACC,KAAK,EAAE,CACVC,IAAI,CAAC,UAAAC,MAAM;OAAA,OAAI,KAAI,CAACC,UAAU,CAACD,MAAM,CAAC;OAAC,CACvCD,IAAI,CAAC;OAAA,OAAM,KAAI,CAACG,aAAa,EAAE;OAAC,CAChCH,IAAI,CAAC;OAAA,OAAM,KAAI,CAACI,YAAY,EAAE;OAAC;;GAEjC;KAAA;KAAA,2BAEUC,UAAU,EACrB;OACC,IAAI,CAACA,UAAU,GAAGA,UAAU;OAE5B,OAAO,IAAIf,OAAO,CAAC,UAACgB,OAAO,EAAEC,MAAM;SAAA,OAAKD,OAAO,EAAE;SAAC;;;KAClD;KAAA,gCAGD;OAAA;OACC,OAAO,IAAI,CAACD,UAAU,CAACG,SAAS,CAAC,IAAI,EAAE;SACtCC,EAAE,EAAE,IAAI,CAAClB,QAAQ;SACjBI,QAAQ,sDAAsD;SAC9De,QAAQ,EACR;WACCC,KAAK,mBACL;aACC,OAAO,IAAI,CAACC,MAAM,CAACC,KAAK;;;QAG1B,CAAC,CAACb,IAAI,CAAC,UAAAc,GAAG,EAAI;SACd,MAAI,CAACnB,QAAQ,GAAGmB,GAAG;SACnB,OAAO,IAAIxB,OAAO,CAAC,UAACgB,OAAO,EAAEC,MAAM;WAAA,OAAKD,OAAO,EAAE;WAAC;QAClD,CAAC;;;KACF;KAAA,+BAGD;OACC,IAAI,CAACnB,MAAM,GAAG,IAAI;OAClB,IAAI,CAACC,WAAW,CAACkB,OAAO,CAAC,IAAI,CAAC;OAE9B,OAAO,IAAI,CAACS,WAAW,EAAE;;;KACzB;KAAA,8BAGD;OACCC,oBAAM,CAACC,GAAG,CAAC,iBAAiB,CAAC;OAE7B,OAAO,IAAI3B,OAAO,CAAC,UAACgB,OAAO,EAAEC,MAAM;SAAA,OAAKD,OAAO,EAAE;SAAC;;;KAClD;KAAA,wBAGD;OACC,IAAI,IAAI,CAACnB,MAAM,EACf;SACC,IAAI+B,OAAO,GAAG,IAAI7B,EAAE,CAACC,OAAO;SAC5B4B,OAAO,CAACZ,OAAO,CAAC,IAAI,CAAC;SAErB,OAAOY,OAAO;;OAGf,OAAO,IAAI,CAAC9B,WAAW;;;;;KAKxB;KAAA,qBACK+B,SAAS,EACd;OAAA,IADgBjC,MAAM,uEAAG,EAAE;OAE1B,IAAI,CAACU,QAAQ,CAACwB,KAAK,CAACD,SAAS,EAAEjC,MAAM,CAAC;OAEtC,OAAO,IAAI;;;KACX;KAAA,uBAEMiC,SAAS,EAAEE,QAAQ,EAC1B;OACC,IAAI,OAAOA,QAAQ,KAAK,UAAU,EAClC;SACC,OAAO,KAAK;;OAGb,IAAI,CAACzB,QAAQ,CAAC0B,GAAG,CAACH,SAAS,EAAEE,QAAQ,CAAC;OAEtC,OAAO,IAAI;MACX;;GACD;CAAA;;;;;;;;"}