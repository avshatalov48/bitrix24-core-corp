{"version":3,"file":"launch.bundle.js","sources":["../src/launch.js"],"sourcesContent":["/**\n * Bitrix Im\n * Application Launcher\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Logger} from \"im.lib.logger\";\n\nconst ApplicationLauncher = function (app, params = {})\n{\n\tlet application = '';\n\tlet name = '';\n\n\tif (typeof app === 'object')\n\t{\n\t\tname = app.name.toString();\n\t\tapplication = app.application.toString();\n\t}\n\telse\n\t{\n\t\tname = app.toString();\n\t\tapplication = app;\n\t}\n\n\tapplication = application.substr(0, 1).toUpperCase()+application.substr(1);\n\n\tif (application === 'Launch' || application === 'Core' || application.endsWith('Application'))\n\t{\n\t\tLogger.error('BX.Messenger.Application.Launch: specified name is forbidden.');\n\t\treturn new Promise((resolve, reject) => reject());\n\t}\n\n\tlet launch = function()\n\t{\n\t\ttry {\n\t\t\tBX.Messenger.Application[name] = new BX.Messenger.Application[application+'Application'](params);\n\t\t\treturn BX.Messenger.Application[name].ready();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tLogger.error(`BX.Messenger.Application.Launch: application \"${application}\" is not initialized.`);\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (\n\t\ttypeof BX.Messenger.Application[application+'Application'] === 'undefined'\n\t\t&& typeof BX.Runtime !== 'undefined' && typeof BX.Runtime.loadExtension !== 'undefined'\n\t)\n\t{\n\t\tlet loadExtension = 'im.application.'+application.toString().toLowerCase();\n\t\treturn BX.Runtime.loadExtension(loadExtension).then(() => launch());\n\t}\n\n\treturn launch();\n};\n\nexport {ApplicationLauncher as Launch};"],"names":["ApplicationLauncher","app","params","application","name","toString","substr","toUpperCase","endsWith","Logger","error","Promise","resolve","reject","launch","BX","Messenger","Application","ready","e","Runtime","loadExtension","toLowerCase","then"],"mappings":";;;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACA;AAEA,KAAMA,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAUC,GAAV,EAC5B;CAAA,MAD2CC,MAC3C,uEADoD,EACpD;CACC,MAAIC,WAAW,GAAG,EAAlB;CACA,MAAIC,IAAI,GAAG,EAAX;;CAEA,MAAI,uBAAOH,GAAP,MAAe,QAAnB,EACA;CACCG,IAAAA,IAAI,GAAGH,GAAG,CAACG,IAAJ,CAASC,QAAT,EAAP;CACAF,IAAAA,WAAW,GAAGF,GAAG,CAACE,WAAJ,CAAgBE,QAAhB,EAAd;CACA,GAJD,MAMA;CACCD,IAAAA,IAAI,GAAGH,GAAG,CAACI,QAAJ,EAAP;CACAF,IAAAA,WAAW,GAAGF,GAAd;CACA;;CAEDE,EAAAA,WAAW,GAAGA,WAAW,CAACG,MAAZ,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBC,WAAzB,KAAuCJ,WAAW,CAACG,MAAZ,CAAmB,CAAnB,CAArD;;CAEA,MAAIH,WAAW,KAAK,QAAhB,IAA4BA,WAAW,KAAK,MAA5C,IAAsDA,WAAW,CAACK,QAAZ,CAAqB,aAArB,CAA1D,EACA;CACCC,IAAAA,oBAAM,CAACC,KAAP,CAAa,+DAAb;CACA,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;CAAA,aAAqBA,MAAM,EAA3B;CAAA,KAAZ,CAAP;CACA;;CAED,MAAIC,MAAM,GAAG,SAATA,MAAS,GACb;CACC,QAAI;CACHC,MAAAA,EAAE,CAACC,SAAH,CAAaC,WAAb,CAAyBb,IAAzB,IAAiC,IAAIW,EAAE,CAACC,SAAH,CAAaC,WAAb,CAAyBd,WAAW,GAAC,aAArC,CAAJ,CAAwDD,MAAxD,CAAjC;CACA,aAAOa,EAAE,CAACC,SAAH,CAAaC,WAAb,CAAyBb,IAAzB,EAA+Bc,KAA/B,EAAP;CACA,KAHD,CAIA,OAAOC,CAAP,EACA;CACCV,MAAAA,oBAAM,CAACC,KAAP,0DAA8DP,WAA9D;CACA,aAAO,KAAP;CACA;CACD,GAXD;;CAaA,MACC,OAAOY,EAAE,CAACC,SAAH,CAAaC,WAAb,CAAyBd,WAAW,GAAC,aAArC,CAAP,KAA+D,WAA/D,IACG,OAAOY,EAAE,CAACK,OAAV,KAAsB,WADzB,IACwC,OAAOL,EAAE,CAACK,OAAH,CAAWC,aAAlB,KAAoC,WAF7E,EAIA;CACC,QAAIA,aAAa,GAAG,oBAAkBlB,WAAW,CAACE,QAAZ,GAAuBiB,WAAvB,EAAtC;CACA,WAAOP,EAAE,CAACK,OAAH,CAAWC,aAAX,CAAyBA,aAAzB,EAAwCE,IAAxC,CAA6C;CAAA,aAAMT,MAAM,EAAZ;CAAA,KAA7C,CAAP;CACA;;CAED,SAAOA,MAAM,EAAb;CACA,CA/CD;;;;;;;;"}