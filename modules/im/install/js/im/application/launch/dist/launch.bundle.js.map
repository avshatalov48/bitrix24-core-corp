{"version":3,"file":"launch.bundle.js","sources":["../src/launch.js"],"sourcesContent":["/**\n * Bitrix Im\n * Application Launcher\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Logger} from \"im.lib.logger\";\n\nconst ApplicationLauncher = function (app, params = {})\n{\n\tlet application = '';\n\tlet name = '';\n\n\tif (typeof app === 'object')\n\t{\n\t\tname = app.name.toString();\n\t\tapplication = app.application.toString();\n\t}\n\telse\n\t{\n\t\tname = app.toString();\n\t\tapplication = app;\n\t}\n\n\tapplication = application.substr(0, 1).toUpperCase()+application.substr(1);\n\n\tif (application === 'Launch' || application === 'Core' || application.endsWith('Application'))\n\t{\n\t\tLogger.error('BX.Messenger.Application.Launch: specified name is forbidden.');\n\t\treturn new Promise((resolve, reject) => reject());\n\t}\n\n\tlet launch = function()\n\t{\n\t\ttry {\n\t\t\tBX.Messenger.Application[name] = new BX.Messenger.Application[application+'Application'](params);\n\t\t\treturn BX.Messenger.Application[name].ready();\n\t\t}\n\t\tcatch (e)\n\t\t{\n\t\t\tLogger.error(`BX.Messenger.Application.Launch: application \"${application}\" is not initialized.`);\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tif (\n\t\ttypeof BX.Messenger.Application[application+'Application'] === 'undefined'\n\t\t&& typeof BX.Runtime !== 'undefined' && typeof BX.Runtime.loadExtension !== 'undefined'\n\t)\n\t{\n\t\tlet loadExtension = 'im.application.'+application.toString().toLowerCase();\n\t\treturn BX.Runtime.loadExtension(loadExtension).then(() => launch());\n\t}\n\n\treturn launch();\n};\n\nexport {ApplicationLauncher as Launch};"],"names":["ApplicationLauncher","app","params","application","name","toString","substr","toUpperCase","endsWith","Logger","error","Promise","resolve","reject","launch","BX","Messenger","Application","ready","e","Runtime","loadExtension","toLowerCase","then"],"mappings":";;;;;;CAAA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;AACA,KAEMA,mBAAmB,GAAG,SAAtBA,mBAAmB,CAAaC,GAAG,EACzC;GAAA,IAD2CC,MAAM,uEAAG,EAAE;GAErD,IAAIC,WAAW,GAAG,EAAE;GACpB,IAAIC,IAAI,GAAG,EAAE;GAEb,IAAI,uBAAOH,GAAG,MAAK,QAAQ,EAC3B;KACCG,IAAI,GAAGH,GAAG,CAACG,IAAI,CAACC,QAAQ,EAAE;KAC1BF,WAAW,GAAGF,GAAG,CAACE,WAAW,CAACE,QAAQ,EAAE;IACxC,MAED;KACCD,IAAI,GAAGH,GAAG,CAACI,QAAQ,EAAE;KACrBF,WAAW,GAAGF,GAAG;;GAGlBE,WAAW,GAAGA,WAAW,CAACG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAACC,WAAW,EAAE,GAACJ,WAAW,CAACG,MAAM,CAAC,CAAC,CAAC;GAE1E,IAAIH,WAAW,KAAK,QAAQ,IAAIA,WAAW,KAAK,MAAM,IAAIA,WAAW,CAACK,QAAQ,CAAC,aAAa,CAAC,EAC7F;KACCC,oBAAM,CAACC,KAAK,CAAC,+DAA+D,CAAC;KAC7E,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM;OAAA,OAAKA,MAAM,EAAE;OAAC;;GAGlD,IAAIC,MAAM,GAAG,SAATA,MAAM,GACV;KACC,IAAI;OACHC,EAAE,CAACC,SAAS,CAACC,WAAW,CAACb,IAAI,CAAC,GAAG,IAAIW,EAAE,CAACC,SAAS,CAACC,WAAW,CAACd,WAAW,GAAC,aAAa,CAAC,CAACD,MAAM,CAAC;OAChG,OAAOa,EAAE,CAACC,SAAS,CAACC,WAAW,CAACb,IAAI,CAAC,CAACc,KAAK,EAAE;MAC7C,CACD,OAAOC,CAAC,EACR;OACCV,oBAAM,CAACC,KAAK,0DAAkDP,WAAW,4BAAwB;OACjG,OAAO,KAAK;;IAEb;GAED,IACC,OAAOY,EAAE,CAACC,SAAS,CAACC,WAAW,CAACd,WAAW,GAAC,aAAa,CAAC,KAAK,WAAW,IACvE,OAAOY,EAAE,CAACK,OAAO,KAAK,WAAW,IAAI,OAAOL,EAAE,CAACK,OAAO,CAACC,aAAa,KAAK,WAAW,EAExF;KACC,IAAIA,aAAa,GAAG,iBAAiB,GAAClB,WAAW,CAACE,QAAQ,EAAE,CAACiB,WAAW,EAAE;KAC1E,OAAOP,EAAE,CAACK,OAAO,CAACC,aAAa,CAACA,aAAa,CAAC,CAACE,IAAI,CAAC;OAAA,OAAMT,MAAM,EAAE;OAAC;;GAGpE,OAAOA,MAAM,EAAE;CAChB,CAAC;;;;;;;;"}