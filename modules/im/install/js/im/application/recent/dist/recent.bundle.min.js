this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t,n,i,r,o,s,l){"use strict";n.Vue.component("bx-im-component-recent",{props:{hasDialog:false},data:function e(){return{}},created:function e(){},computed:babelHelpers.objectSpread({},i.Vuex.mapState({recent:function e(t){return t.recent.collection.general},pinned:function e(t){return t.recent.collection.pinned}}),{recentData:function e(){return[].concat(babelHelpers.toConsumableArray(this.recent),babelHelpers.toConsumableArray(this.pinned))}}),methods:{getController:function e(){return this.$root.$bitrixController},getStore:function e(){return this.$root.$bitrixController.store},onScroll:function e(t){if(this.oneScreenRemaining(t)){this.getController().recent.loadMore()}},onClick:function e(t){if(this.hasDialog){n.Vue.event.$emit("openMessenger",t)}else{this.getController().recent.openOldDialog(t)}},onRightClick:function e(t){this.getController().recent.openOldContextMenu(t)},oneScreenRemaining:function e(t){return t.target.scrollTop+t.target.clientHeight>=t.target.scrollHeight-t.target.clientHeight}},template:'\n\t\t<div class="recent-wrap">\n\t\t\t<bx-im-view-list-recent\n\t\t\t\t:recentData="recentData"\n\t\t\t\t@scroll="onScroll"\n\t\t\t\t@click="onClick"\n\t\t\t\t@rightClick="onRightClick"\n\t\t\t/>\n\t\t</div>\n\t'});var c=function(){function e(){var t=this;var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.inited=false;this.initPromise=new BX.Promise;this.params=i;this.template=null;this.rootNode=this.params.node||document.createElement("div");this.isMessenger=i.hasDialog===true;this.templateTemp=null;this.rootNodeTemp=this.params.nodeTemp||document.createElement("div");this.eventBus=new n.VueVendorV2;this.initCore().then(function(e){return t.initParams(e)}).then(function(){return t.initComponent()}).then(function(){return t.initComplete()})}babelHelpers.createClass(e,[{key:"initCore",value:function e(){var n=this;return new Promise(function(e,i){t.Core.ready().then(function(t){n.controller=t;e()})})}},{key:"initParams",value:function e(t){return new Promise(function(e,t){return e()})}},{key:"initComponent",value:function e(){var t=this;return this.controller.createVue(this,{el:this.rootNode,template:'<bx-im-component-recent :hasDialog="'.concat(this.isMessenger,'"/>')}).then(function(e){t.template=e;return new Promise(function(e,t){return e()})})}},{key:"initComplete",value:function e(){this.inited=true;this.initPromise.resolve(this);return this.requestData()}},{key:"requestData",value:function e(){this.controller.recent.drawPlaceholders();this.controller.recent.getRecentData();return new Promise(function(e,t){return e()})}},{key:"ready",value:function e(){if(this.inited){var t=new BX.Promise;t.resolve(this);return t}return this.initPromise}},{key:"emit",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.eventBus.$emit(t,n);return true}},{key:"listen",value:function e(t,n){if(typeof n!=="function"){return false}this.eventBus.$on(t,n);return true}}]);return e}();e.RecentApplication=c})(this.BX.Messenger.Application=this.BX.Messenger.Application||{},BX.Messenger.Application,BX,BX,window,BX.Messenger.Lib,BX.Messenger.Const,BX.Messenger.Lib);
//# sourceMappingURL=recent.bundle.map.js