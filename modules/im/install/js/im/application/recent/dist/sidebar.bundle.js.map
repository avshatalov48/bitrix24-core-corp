{"version":3,"file":"sidebar.bundle.js","sources":["../src/component/bx-messenger-sidebar.js","../src/sidebar.js"],"sourcesContent":["/**\n * Bitrix im\n * Sidebar vue component\n *\n * @package bitrix\n * @subpackage mobile\n * @copyright 2001-2019 Bitrix\n */\n\nimport {Vue} from \"ui.vue\";\nimport {Vuex} from \"ui.vue.vuex\";\nimport {Logger} from \"im.tools.logger\";\nimport {EventType} from \"im.const\";\nimport {Utils} from \"im.utils\";\n\n/**\n * @notice Do not mutate or clone this component! It is under development.\n */\nVue.component('bx-messenger-sidebar',\n\t{\n\t\tdata: function()\n\t\t{\n\t\t\treturn {\n\n\t\t\t};\n\t\t},\n\t\tcreated()\n\t\t{\n\n\t\t},\n\t\tcomputed:\n\t\t\t{\n\t\t\t\t...Vuex.mapState({\n\t\t\t\t\trecent: state => state.recent.collection\n\t\t\t\t})\n\t\t\t},\n\t\tmethods:\n\t\t\t{\n\n\t\t\t},\n\t\ttemplate: `\n\t\t<div>\n\t\t\t<bx-messenger-list-sidebar\n\t\t\t\t:recentData=\"recent\"\n\t\t\t/>\n\t\t</div>\n\t`\n\t});","/**\n * Bitrix Im\n * Core application\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Core} from \"im.application.core\";\nimport {VueVendorV2} from \"ui.vue\";\n\n// vue components\nimport './component/bx-messenger-sidebar';\nimport \"im.component.list.recent\";\nimport \"im.component.list.sidebar\";\n\nexport class SidebarApplication\n{\n\t/* region 01. Initialize */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.inited = false;\n\t\tthis.initPromise = new BX.Promise;\n\n\t\tthis.params = params;\n\n\t\tthis.template = null;\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.templateTemp = null;\n\t\tthis.rootNodeTemp = this.params.nodeTemp || document.createElement('div');\n\n\t\tthis.eventBus = new VueVendorV2;\n\n\t\tCore.ready()\n\t\t\t.then(result => this.initParams(result))\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitParams(controller)\n\t{\n\t\tthis.controller = controller;\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: `<bx-messenger-sidebar/>`,\n\t\t})\n\t\t.then(vue => {\n\t\t\tthis.template = vue;\n\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t})\n\t\t// .then(() => this.controller.createVue(this, {\n\t\t// \tel: this.rootNodeTemp,\n\t\t// \ttemplate: `<bx-messenger-list-recent/>`,\n\t\t// }))\n\t\t// .then(vue => {\n\t\t// \tthis.templateTemp = vue;\n\t\t// \treturn new Promise((resolve, reject) => resolve());\n\t\t// });\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromise.resolve(this);\n\n\t\treturn this.requestData();\n\t}\n\n\trequestData()\n\t{\n\t\tthis.controller.recent.getRecentData();\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\tlet promise = new BX.Promise;\n\t\t\tpromise.resolve(this);\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n\n\t/* endregion 01. Initialize */\n\n\t/* region 02. Event Bus */\n\temit(eventName, params = {})\n\t{\n\t\tthis.eventBus.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.eventBus.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\t/* endregion 02. Event Bus */\n}"],"names":["Vue","component","data","created","computed","Vuex","mapState","recent","state","collection","methods","template","SidebarApplication","params","inited","initPromise","BX","Promise","rootNode","node","document","createElement","templateTemp","rootNodeTemp","nodeTemp","eventBus","VueVendorV2","Core","ready","then","result","initParams","initComponent","initComplete","controller","resolve","reject","createVue","el","vue","requestData","getRecentData","promise","eventName","$emit","callback","$on"],"mappings":"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"}