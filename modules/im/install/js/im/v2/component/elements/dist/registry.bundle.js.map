{"version":3,"file":"registry.bundle.js","sources":["../src/user-status/user-status.js","../src/avatar/avatar.js","../src/recent-loading-state/recent-loading-state.js","../src/chat-title/chat-title.js","../src/button/button.js","../src/popup/popup.js","../src/menu/menu-item.js","../src/menu/menu.js","../src/attach/components/delimiter/delimiter.js","../src/attach/components/file/file-item.js","../src/attach/components/file/file.js","../src/attach/components/grid/grid-item.js","../src/attach/components/grid/grid.js","../src/attach/components/html/html.js","../src/attach/components/image/image-item.js","../src/attach/components/image/image.js","../src/attach/components/link/link-item.js","../src/attach/components/link/link.js","../src/attach/components/message/message.js","../src/attach/components/rich/rich-service.js","../src/attach/components/rich/rich-item.js","../src/attach/components/rich/rich.js","../src/attach/components/user/user-item.js","../src/attach/components/user/user.js","../src/attach/attach.js","../src/chat-info-popup/chat-info-content.js","../src/chat-info-popup/chat-info-popup.js","../src/user-list-popup/classes/user-list-service.js","../src/loader/loader.js","../src/user-list-popup/user-item.js","../src/user-list-popup/user-list-content.js","../src/user-list-popup/user-list-popup.js","../src/keyboard/keyboard.js","../src/dropdown/dropdown.js","../src/loader/spinner.js","../src/toggle/toggle.js","../src/tabs/tabs.js","../src/audioplayer/audioplayer.js","../src/chat-title-with-highlighting/chat-title-wiith-highlighting.js","../src/search-input/search-input.js"],"sourcesContent":["import {UserStatus as UserStatusType} from 'im.v2.const';\n\nimport './user-status.css';\n\nexport const UserStatusSize = {\n\tS: 'S',\n\tM: 'M',\n\tL: 'L',\n\tXL: 'XL',\n\tXXL: 'XXL'\n};\n\n// @vue/component\nexport const UserStatus = {\n\tname: 'UserStatus',\n\tprops: {\n\t\tstatus: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tvalidator(value) {\n\t\t\t\treturn Object.values(UserStatusType).includes(value);\n\t\t\t}\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: UserStatusSize.M,\n\t\t\tvalidator(value) {\n\t\t\t\treturn Object.values(UserStatusSize).includes(value);\n\t\t\t}\n\t\t}\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcontainerClasses()\n\t\t{\n\t\t\treturn [`--size-${this.size.toLowerCase()}`, `--${this.status}`];\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<div :class=\"containerClasses\" class=\"bx-im-user-status__container bx-im-user-status__scope\"></div>\n\t`\n};","import { Core } from 'im.v2.application.core';\nimport { DialogType, UserStatus as UserStatusType } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport { UserStatus, UserStatusSize } from '../user-status/user-status';\n\nimport 'ui.fonts.opensans';\nimport './avatar.css';\n\nimport type { ImModelUser, ImModelDialog } from 'im.v2.model';\n\nexport const AvatarSize = Object.freeze({\n\tXS: 'XS',\n\tS: 'S',\n\tM: 'M',\n\tL: 'L',\n\tXL: 'XL',\n\tXXL: 'XXL',\n\tXXXL: 'XXXL',\n});\n\n// @vue/component\nexport const Avatar = {\n\tname: 'MessengerAvatar',\n\tcomponents: { UserStatus },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [String, Number],\n\t\t\tdefault: 0,\n\t\t},\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: AvatarSize.M,\n\t\t},\n\t\twithAvatarLetters: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithStatus: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSpecialTypes: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithTooltip: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {\n\t\t\timageLoadError: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelDialog\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](this.dialogId, true);\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === DialogType.user;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.bot;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tisSpecialType(): boolean\n\t\t{\n\t\t\tconst commonTypes = [DialogType.user, DialogType.chat, DialogType.open];\n\n\t\t\treturn !commonTypes.includes(this.dialog.type);\n\t\t},\n\t\tcontainerTitle(): string\n\t\t{\n\t\t\tif (!this.withTooltip)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--size-${this.size.toLowerCase()}`];\n\t\t\tif (this.withSpecialTypes && this.isSpecialType)\n\t\t\t{\n\t\t\t\tclasses.push('--special');\n\t\t\t}\n\t\t\tconst typeClass = DialogType[this.dialog.type] ? `--${this.dialog.type}` : '--default';\n\t\t\tclasses.push(typeClass);\n\n\t\t\treturn classes;\n\t\t},\n\t\tbackgroundColorStyle(): {backgroundColor: string}\n\t\t{\n\t\t\treturn { backgroundColor: this.dialog.color };\n\t\t},\n\t\tavatarText(): string\n\t\t{\n\t\t\tif (this.isSpecialType || !this.isEnoughSizeForText)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Utils.text.getFirstLetters(this.dialog.name);\n\t\t},\n\t\tuserStatusIcon(): string\n\t\t{\n\t\t\tif (!this.isUser || this.isBot || this.user.id === Core.getUserId() || !this.isEnoughSizeForStatus)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tconst status = this.$store.getters['users/getStatus'](this.dialogId);\n\t\t\tif (status && status !== UserStatusType.online)\n\t\t\t{\n\t\t\t\treturn status;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tuserStatusSize(): string\n\t\t{\n\t\t\t// avatar size: status size\n\t\t\tconst sizesMap = {\n\t\t\t\t[AvatarSize.M]: UserStatusSize.S,\n\t\t\t\t[AvatarSize.L]: UserStatusSize.M,\n\t\t\t\t[AvatarSize.XL]: UserStatusSize.L,\n\t\t\t\t[AvatarSize.XXL]: UserStatusSize.XL,\n\t\t\t\t[AvatarSize.XXXL]: UserStatusSize.XXL,\n\t\t\t};\n\n\t\t\treturn sizesMap[this.size];\n\t\t},\n\t\tisEnoughSizeForText(): boolean\n\t\t{\n\t\t\tconst avatarSizesWithText = [AvatarSize.L, AvatarSize.XL, AvatarSize.XXL, AvatarSize.XXXL];\n\n\t\t\treturn avatarSizesWithText.includes(this.size.toUpperCase());\n\t\t},\n\t\tisEnoughSizeForStatus(): boolean\n\t\t{\n\t\t\tconst avatarSizesWithText = [AvatarSize.M, AvatarSize.L, AvatarSize.XL, AvatarSize.XXL, AvatarSize.XXXL];\n\n\t\t\treturn avatarSizesWithText.includes(this.size.toUpperCase());\n\t\t},\n\t\tavatarUrl(): string\n\t\t{\n\t\t\treturn this.dialog.avatar;\n\t\t},\n\t\thasImage(): boolean\n\t\t{\n\t\t\treturn this.avatarUrl && !this.imageLoadError;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tavatarUrl()\n\t\t{\n\t\t\tthis.imageLoadError = false;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonImageLoadError()\n\t\t{\n\t\t\tthis.imageLoadError = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :title=\"containerTitle\" :class=\"containerClasses\" class=\"bx-im-avatar__scope bx-im-avatar__container\">\n\t\t\t<!-- Avatar -->\n\t\t\t<template v-if=\"hasImage\">\n\t\t\t\t<img :src=\"avatarUrl\" :alt=\"dialog.name\" class=\"bx-im-avatar__content --image\" @error=\"onImageLoadError\"/>\n\t\t\t\t<div v-if=\"withSpecialTypes && isSpecialType\" :style=\"backgroundColorStyle\" class=\"bx-im-avatar__special-type_icon\"></div>\n\t\t\t</template>\n\t\t\t<div v-else-if=\"withAvatarLetters && avatarText\" :style=\"backgroundColorStyle\" class=\"bx-im-avatar__content --text\">\n\t\t\t\t{{ avatarText }}\n\t\t\t</div>\n\t\t\t<div v-else :style=\"backgroundColorStyle\" class=\"bx-im-avatar__content bx-im-avatar__icon\"></div>\n\t\t\t<!-- Status icons -->\n\t\t\t<div v-if=\"withStatus && userStatusIcon\" class=\"bx-im-avatar__status-icon\">\n\t\t\t\t<UserStatus :status=\"userStatusIcon\" :size=\"userStatusSize\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './recent-loading-state.css';\n\nexport const RecentLoadingState = {\n\tname: 'RecentLoadingState',\n\tprops: {\n\t\tcompactMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t},\n\t\titemsToShow: {\n\t\t\ttype: Number,\n\t\t\tdefault: 50\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tisThreeLineVersion()\n\t\t{\n\t\t\treturn Math.random() < 0.5;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div v-if=\"!compactMode\" class=\"bx-im-component-recent-loading-state\">\n\t\t\t<div v-for=\"index in itemsToShow\" class=\"bx-im-component-recent-loading-state-item\">\n\t\t\t\t<div class=\"bx-im-component-recent-loading-state-avatar-wrap\">\n\t\t\t\t\t<div class=\"bx-im-component-recent-loading-state-avatar-placeholder\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-component-recent-loading-state-content\">\n\t\t\t\t\t<div class=\"bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-long\"></div>\n\t\t\t\t\t<div class=\"bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-short\"></div>\n\t\t\t\t\t<div v-if=\"isThreeLineVersion()\" class=\"bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-short\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if=\"compactMode\" class=\"bx-im-component-recent-loading-state bx-im-component-recent-loading-state-compact\">\n\t\t\t<div v-for=\"index in itemsToShow\" class=\"bx-im-component-recent-loading-state-item\">\n\t\t\t\t<div class=\"bx-im-component-recent-loading-state-avatar-wrap\">\n\t\t\t\t\t<div class=\"bx-im-component-recent-loading-state-avatar-placeholder\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { Text } from 'main.core';\n\nimport { Core } from 'im.v2.application.core';\nimport { DialogType, Settings } from 'im.v2.const';\n\nimport './chat-title.css';\n\nimport type { ImModelDialog, ImModelUser } from 'im.v2.model';\n\nconst DialogSpecialType = {\n\tbot: 'bot',\n\textranet: 'extranet',\n\tnetwork: 'network',\n\tsupport24: 'support24',\n};\n\nconst TitleIcons = {\n\tabsent: 'absent',\n\tbirthday: 'birthday',\n};\n\nexport const ChatTitle = {\n\tname: 'ChatTitle',\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tshowItsYou: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithLeftIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithColor: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\twithMute: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tonlyFirstName: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\ttwoLine: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelDialog\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](this.dialogId, true);\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tbotType(): string\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.$store.getters['users/getBotType'](this.dialogId);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === DialogType.user;\n\t\t},\n\t\tisSelfChat(): boolean\n\t\t{\n\t\t\treturn this.isUser && this.user.id === Core.getUserId();\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [];\n\n\t\t\tif (this.twoLine)\n\t\t\t{\n\t\t\t\tclasses.push('--twoline');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tdialogName(): string\n\t\t{\n\t\t\tlet resultText = this.dialog.name;\n\t\t\tif (!this.dialogId && this.text)\n\t\t\t{\n\t\t\t\tresultText = this.text;\n\t\t\t}\n\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\tif (this.onlyFirstName)\n\t\t\t\t{\n\t\t\t\t\tresultText = this.user.firstName;\n\t\t\t\t}\n\n\t\t\t\tresultText = this.user.name;\n\t\t\t}\n\n\t\t\treturn Text.encode(resultText);\n\t\t},\n\t\tdialogSpecialType(): string\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\tif (this.isExtranet)\n\t\t\t\t{\n\t\t\t\t\treturn DialogSpecialType.extranet;\n\t\t\t\t}\n\n\t\t\t\tif ([DialogType.support24Notifier, DialogType.support24Question].includes(this.dialog.type))\n\t\t\t\t{\n\t\t\t\t\treturn DialogSpecialType.support24;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.isBot)\n\t\t\t{\n\t\t\t\treturn this.botType;\n\t\t\t}\n\n\t\t\tif (this.isExtranet)\n\t\t\t{\n\t\t\t\treturn DialogSpecialType.extranet;\n\t\t\t}\n\n\t\t\tif (this.isNetwork)\n\t\t\t{\n\t\t\t\treturn DialogSpecialType.network;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tleftIcon(): string\n\t\t{\n\t\t\tif (!this.withLeftIcon)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.dialogSpecialType)\n\t\t\t{\n\t\t\t\treturn this.dialogSpecialType;\n\t\t\t}\n\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (this.showBirthdays && this.user.isBirthday)\n\t\t\t{\n\t\t\t\treturn TitleIcons.birthday;\n\t\t\t}\n\n\t\t\tif (this.user.isAbsent)\n\t\t\t{\n\t\t\t\treturn TitleIcons.absent;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\tif (!this.withColor || this.specialColor)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.dialog.color;\n\t\t},\n\t\tspecialColor(): string\n\t\t{\n\t\t\treturn this.dialogSpecialType;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.bot;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tisExtranet(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.extranet;\n\t\t\t}\n\n\t\t\treturn this.dialog.extranet;\n\t\t},\n\t\tisNetwork(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.network;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tisChatMuted(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst isMuted = this.dialog.muteList.find((element) => {\n\t\t\t\treturn element === Core.getUserId();\n\t\t\t});\n\n\t\t\treturn Boolean(isMuted);\n\t\t},\n\t\ttooltipText(): string\n\t\t{\n\t\t\tif (this.isSelfChat && this.showItsYou)\n\t\t\t{\n\t\t\t\treturn `${this.dialog.name} (${this.$Bitrix.Loc.getMessage('IM_LIST_RECENT_CHAT_SELF')})`;\n\t\t\t}\n\n\t\t\treturn this.dialog.name;\n\t\t},\n\t\tshowBirthdays(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showBirthday);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" class=\"bx-im-chat-title__scope bx-im-chat-title__container\">\n\t\t\t<span class=\"bx-im-chat-title__content\">\n\t\t\t\t<span v-if=\"leftIcon\" :class=\"'--' + leftIcon\" class=\"bx-im-chat-title__icon\"></span>\n\t\t\t\t<span\n\t\t\t\t\t:class=\"[specialColor? '--' + specialColor : '']\"\n\t\t\t\t\t:style=\"{color: color}\"\n\t\t\t\t\t:title=\"tooltipText\"\n\t\t\t\t\tclass=\"bx-im-chat-title__text\"\n\t\t\t\t\tv-html=\"dialogName\"\n\t\t\t\t></span>\n\t\t\t\t<strong v-if=\"isSelfChat && showItsYou\">\n\t\t\t\t\t<span class=\"bx-im-chat-title__text --self\">({{ $Bitrix.Loc.getMessage('IM_LIST_RECENT_CHAT_SELF') }})</span>\n\t\t\t\t</strong>\n\t\t\t\t<div v-if=\"withMute && isChatMuted\" class=\"bx-im-chat-title__muted-icon\"></div>\n\t\t\t</span>\n\t\t</div>\n\t`,\n};\n","import {Type} from 'main.core';\n\nimport './button.css';\n\nexport const ButtonSize = {\n\tS: 'S', // 18\n\tM: 'M', // 26\n\tL: 'L', // 31\n\tXL: 'XL', // 39\n\tXXL: 'XXL', // 47\n};\n\nexport const ButtonColor = {\n\tPrimary: 'primary',\n\tPrimaryLight: 'primary-light',\n\tSuccess: 'success',\n\tDanger: 'danger',\n\tLightBorder: 'light-border',\n\tDangerBorder: 'danger-border',\n\tPrimaryBorder: 'primary-border',\n\tLink: 'link'\n};\n\nexport const ButtonIcon = {\n\tPlus: 'plus',\n\tLink: 'link',\n\tCall: 'call',\n\tEndCall: 'end-call',\n\tAddUser: 'add-user',\n\tCamera: 'camera',\n};\n\nexport type CustomColorScheme = {\n\tborderColor: string,\n\tbackgroundColor: string,\n\ticonColor: string,\n\ttextColor: string,\n\thoverColor: string\n};\n\n// @vue/component\nexport const Button = {\n\tname: 'MessengerButton',\n\tprops:\n\t{\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ''\n\t\t},\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ''\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ButtonColor.Primary\n\t\t},\n\t\tcustomColorScheme: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault: (): CustomColorScheme => {\n\t\t\t\treturn {\n\t\t\t\t\tborderColor: '',\n\t\t\t\t\tbackgroundColor: '',\n\t\t\t\t\ticonColor: '',\n\t\t\t\t\ttextColor: '',\n\t\t\t\t\thoverColor: ''\n\t\t\t\t};\n\t\t\t}\n\t\t},\n\t\tisRounded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\tisDisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\tisUppercase: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true\n\t\t}\n\t},\n\temits: ['click'],\n\tcomputed:\n\t{\n\t\tbuttonStyles()\n\t\t{\n\t\t\tconst result = {};\n\t\t\tif (this.hasCustomColorScheme)\n\t\t\t{\n\t\t\t\tresult['borderColor'] = this.customColorScheme.borderColor;\n\t\t\t\tresult['backgroundColor'] = this.customColorScheme.backgroundColor;\n\t\t\t\tresult['color'] = this.customColorScheme.textColor;\n\t\t\t\tresult['--im-button__background-color_hover'] = this.customColorScheme.hoverColor;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tbuttonClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--size-${this.size.toLowerCase()}`];\n\t\t\tif (!this.hasCustomColorScheme)\n\t\t\t{\n\t\t\t\tclasses.push(`--color-${this.color.toLowerCase()}`);\n\t\t\t}\n\t\t\tif (this.isRounded)\n\t\t\t{\n\t\t\t\tclasses.push('--rounded');\n\t\t\t}\n\t\t\tif (this.isDisabled)\n\t\t\t{\n\t\t\t\tclasses.push('--disabled');\n\t\t\t}\n\t\t\tif (this.isLoading)\n\t\t\t{\n\t\t\t\tclasses.push('--loading');\n\t\t\t}\n\t\t\tif (this.isUppercase && this.size !== ButtonSize.S)\n\t\t\t{\n\t\t\t\tclasses.push('--uppercase');\n\t\t\t}\n\t\t\tif (this.text === '')\n\t\t\t{\n\t\t\t\tclasses.push('--no-text');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\ticonStyles()\n\t\t{\n\t\t\tconst result = {};\n\t\t\tif (this.hasCustomColorScheme)\n\t\t\t{\n\t\t\t\tresult['backgroundColor'] = this.customColorScheme.iconColor;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\ticonClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--${this.icon}`];\n\t\t\tif (this.hasCustomColorScheme)\n\t\t\t{\n\t\t\t\tclasses.push('--custom-color');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\thasCustomColorScheme(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.customColorScheme.borderColor)\n\t\t\t\t&& Type.isStringFilled(this.customColorScheme.iconColor)\n\t\t\t\t&& Type.isStringFilled(this.customColorScheme.textColor)\n\t\t\t\t&& Type.isStringFilled(this.customColorScheme.hoverColor);\n\t\t}\n\t},\n\tmethods: {\n\t\tonClick(event: PointerEvent)\n\t\t{\n\t\t\tif (this.isDisabled || this.isLoading)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('click', event);\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<button\n\t\t\t:class=\"buttonClasses\"\n\t\t\t:style=\"buttonStyles\"\n\t\t\t@click.stop=\"onClick\"\n\t\t\tclass=\"bx-im-button__scope bx-im-button__container\"\n\t\t>\n\t\t\t<span v-if=\"icon\" :style=\"iconStyles\" :class=\"iconClasses\" class=\"bx-im-button__icon\"></span>\n\t\t\t<span class=\"bx-im-button__text\">{{ text }}</span>\n\t\t</button>\n\t`\n};","import { Popup, PopupManager, PopupOptions } from 'main.popup';\nimport { Type } from 'main.core';\n\nimport { Logger } from 'im.v2.lib.logger';\n\nconst POPUP_CONTAINER_PREFIX = '#popup-window-content-';\nconst POPUP_BORDER_RADIUS = '10px';\n\n// @vue/component\nexport const MessengerPopup = {\n\tname: 'MessengerPopup',\n\tprops:\n\t{\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault() {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tpopupContainer(): string\n\t\t{\n\t\t\treturn `${POPUP_CONTAINER_PREFIX}${this.id}`;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tLogger.warn(`Popup: ${this.id} created`);\n\t\tthis.instance = this.getPopupInstance();\n\t\tthis.instance.show();\n\t},\n\tmounted()\n\t{\n\t\tthis.instance.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t\tposition: this.getPopupConfig().bindOptions.position\n\t\t});\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closePopup();\n\t},\n\tmethods:\n\t{\n\t\tgetPopupInstance(): Popup\n\t\t{\n\t\t\tif (!this.instance)\n\t\t\t{\n\t\t\t\tPopupManager.getPopupById(this.id)?.destroy();\n\n\t\t\t\tthis.instance = new Popup(this.getPopupConfig());\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDefaultConfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tclassName: 'bx-im-messenger__scope',\n\t\t\t\tcacheable: false,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tanimation: 'fading',\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.closePopup.bind(this),\n\t\t\t\t\tonPopupDestroy: this.closePopup.bind(this),\n\t\t\t\t},\n\t\t\t\tcontentBorderRadius: POPUP_BORDER_RADIUS,\n\t\t\t};\n\t\t},\n\t\tgetPopupConfig(): Object\n\t\t{\n\t\t\tconst defaultConfig = this.getDefaultConfig();\n\t\t\tconst modifiedOptions = {};\n\n\t\t\tconst defaultClassName = defaultConfig.className;\n\t\t\tif (this.config.className)\n\t\t\t{\n\t\t\t\tmodifiedOptions.className = `${defaultClassName} ${this.config.className}`;\n\t\t\t}\n\n\t\t\tconst offsetTop = this.config.offsetTop ?? defaultConfig.offsetTop;\n\t\t\t// adjust for default popup margin for shadow\n\t\t\tif (this.config.bindOptions?.position === 'top' && Type.isNumber(this.config.offsetTop))\n\t\t\t{\n\t\t\t\tmodifiedOptions.offsetTop = offsetTop - 10;\n\t\t\t}\n\n\t\t\treturn { ...defaultConfig, ...this.config, ...modifiedOptions };\n\t\t},\n\t\tclosePopup()\n\t\t{\n\t\t\tLogger.warn(`Popup: ${this.id} closing`);\n\t\t\tthis.$emit('close');\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t},\n\t\tenableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(true);\n\t\t},\n\t\tdisableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(false);\n\t\t},\n\t\tadjustPosition()\n\t\t{\n\t\t\tthis.getPopupInstance().adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tposition: this.getPopupConfig().bindOptions.position\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Teleport :to=\"popupContainer\">\n\t\t\t<slot\n\t\t\t\t:adjustPosition=\"adjustPosition\"\n\t\t\t\t:enableAutoHide=\"enableAutoHide\"\n\t\t\t\t:disableAutoHide=\"disableAutoHide\"\n\t\t\t></slot>\n\t\t</Teleport>\n\t`,\n};\n","import './css/menu-item.css';\n\nexport const MenuItemIcon = {\n\tchat: 'chat',\n\tchannel: 'channel',\n\tconference: 'conference',\n\tdisk: 'disk',\n\tupload: 'upload',\n\tfile: 'file',\n\ttask: 'task',\n\tmeeting: 'meeting',\n\tsummary: 'summary',\n\tvote: 'vote',\n\taiText: 'ai-text',\n\taiImage: 'ai-image',\n};\n\n// @vue/component\nexport const MenuItem = {\n\tname: 'MenuItem',\n\tprops:\n\t{\n\t\ticon: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ''\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tsubtitle: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ''\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\tcounter: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0\n\t\t}\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tformattedCounter(): string\n\t\t{\n\t\t\tif (this.counter === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.counter > 99 ? '99+' : `${this.counter}`;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-menu-item__container\" :class=\"{'--disabled': disabled}\">\n\t\t\t<div class=\"bx-im-menu-item__content\" :class=\"{'--with-icon': !!icon}\">\n\t\t\t\t<div v-if=\"icon\" class=\"bx-im-menu_item__icon\" :class=\"'--' + icon\"></div>\n\t\t\t\t<div class=\"bx-im-menu-item__text-content\" :class=\"{'--with-subtitle': !!subtitle}\">\n\t\t\t\t\t<div class=\"bx-im-menu-item__title\">\n\t\t\t\t\t\t<div class=\"bx-im-menu-item__title_text\">{{ title }}</div>\n\t\t\t\t\t\t<div v-if=\"counter\" class=\"bx-im-menu-item__title_counter\">{{ formattedCounter }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-if=\"subtitle\" :title=\"subtitle\" class=\"bx-im-menu-item__subtitle\">{{ subtitle }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import {Utils} from 'im.v2.lib.utils';\n\nimport {MessengerPopup} from '../popup/popup';\nimport './css/menu.css';\n\nexport {MenuItem, MenuItemIcon} from './menu-item';\n\nconst ID_PREFIX = 'im-v2-menu';\n\n// @vue/component\nexport const MessengerMenu = {\n\tname: 'MessengerMenu',\n\tcomponents: {MessengerPopup},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tclassName: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: ''\n\t\t}\n\t},\n\temits: ['close'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tid: ''\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.id = this.config.id ?? `${ID_PREFIX}-${Utils.text.getUuidV4()}`;\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t\t:id=\"id\"\n\t\t>\n\t\t\t<div class=\"bx-im-menu__container\" :class=\"className\">\n\t\t\t\t<slot name=\"header\"></slot>\n\t\t\t\t<slot></slot>\n\t\t\t\t<slot name=\"footer\"></slot>\n\t\t\t</div>\n\t\t</MessengerPopup>\n\t`\n};","import {Color} from 'im.v2.const';\n\nimport './delimiter.css';\n\nimport type {AttachDelimiterConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachDelimiter = {\n\tname: 'AttachDelimiter',\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachDelimiterConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tstyles(): Object\n\t\t{\n\t\t\tconst result = {\n\t\t\t\tbackgroundColor: this.internalConfig.DELIMITER.COLOR ?? this.color\n\t\t\t};\n\n\t\t\tif (this.internalConfig.DELIMITER.SIZE)\n\t\t\t{\n\t\t\t\tresult.width = `${this.internalConfig.DELIMITER.SIZE}px`;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-delimiter__container\" :style=\"styles\"></div>\n\t`\n};","import {Utils} from 'im.v2.lib.utils';\n\nimport 'ui.icons.disk';\nimport './file.css';\n\nimport type {AttachFileItemConfig} from 'im.v2.const';\n\nexport const AttachFileItem = {\n\tname: 'AttachFileItem',\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachFileItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tfileName(): string\n\t\t{\n\t\t\treturn this.internalConfig.NAME;\n\t\t},\n\t\tfileSize(): number\n\t\t{\n\t\t\treturn this.internalConfig.SIZE;\n\t\t},\n\t\tlink()\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t},\n\t\tfileShortName(): string\n\t\t{\n\t\t\tconst NAME_MAX_LENGTH = 70;\n\n\t\t\treturn Utils.file.getShortFileName(this.fileName, NAME_MAX_LENGTH);\n\t\t},\n\t\tformattedFileSize(): string\n\t\t{\n\t\t\treturn Utils.file.formatFileSize(this.fileSize);\n\t\t},\n\t\ticonClasses()\n\t\t{\n\t\t\treturn ['ui-icon', `ui-icon-file-${this.fileIcon}`];\n\t\t},\n\t\tfileIcon(): string\n\t\t{\n\t\t\treturn Utils.file.getIconTypeByFilename(this.fileName);\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\topenLink()\n\t\t{\n\t\t\tif (!this.link)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\twindow.open(this.link, '_blank');\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div @click=\"openLink\" class=\"bx-im-attach-file__container\">\n\t\t\t<div class=\"bx-im-attach-file__item\">\n\t\t\t\t<div class=\"bx-im-attach-file__icon\">\n\t\t\t\t\t<div :class=\"iconClasses\"><i></i></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-attach-file__block\">\n\t\t\t\t\t<div class=\"bx-im-attach-file__name\" :title=\"fileName\">\n\t\t\t\t\t\t{{ fileShortName }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-im-attach-file__size\">\n\t\t\t\t\t\t{{ formattedFileSize }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import {Color} from 'im.v2.const';\n\nimport {AttachFileItem} from './file-item';\n\nimport 'ui.icons.disk';\nimport './file.css';\n\nimport type {AttachFileConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachFile = {\n\tname: 'AttachFile',\n\tcomponents: {AttachFileItem},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachFileConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-file__container\">\n\t\t\t<AttachFileItem\n\t\t\t\tv-for=\"(fileItem, index) in internalConfig.FILE\"\n\t\t\t\t:config=\"fileItem\"\n\t\t\t\t:key=\"index\"\n\t\t\t/>\n\t\t</div>\n\t`\n};","import {Parser} from 'im.v2.lib.parser';\n\nimport type {AttachGridItemConfig} from 'im.v2.const';\n\nexport const AttachGridItemDisplayType = {\n\tblock: 'block',\n\tline: 'line',\n\trow: 'row'\n};\nconst DisplayType = AttachGridItemDisplayType;\n\n// @vue/component\nexport const AttachGridItem = {\n\tname: 'AttachGridItem',\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tDisplayType: () => DisplayType,\n\t\tinternalConfig(): AttachGridItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tdisplay(): $Values<typeof DisplayType>\n\t\t{\n\t\t\treturn this.internalConfig.DISPLAY.toLowerCase();\n\t\t},\n\t\twidth(): string\n\t\t{\n\t\t\tif (!this.value || !this.internalConfig.WIDTH)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn `${this.internalConfig.WIDTH}px`;\n\t\t},\n\t\tvalue(): string\n\t\t{\n\t\t\tif (!this.internalConfig.VALUE)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Parser.decodeText(this.internalConfig.VALUE);\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\treturn this.internalConfig.COLOR || '';\n\t\t},\n\t\tname(): string\n\t\t{\n\t\t\treturn this.internalConfig.NAME;\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div v-if=\"display === DisplayType.block\" :style=\"{width}\" class=\"bx-im-attach-grid__item --block\">\n\t\t\t<div class=\"bx-im-attach-grid__name\">{{ name }}</div>\n\t\t\t<div v-if=\"link\" class=\"bx-im-attach-grid__value --link\">\n\t\t\t\t<a :href=\"link\" target=\"_blank\" :style=\"{color}\" v-html=\"value\"></a>\n\t\t\t</div>\n\t\t\t<div v-else v-html=\"value\" :style=\"{color}\" class=\"bx-im-attach-grid__value\"></div>\n\t\t</div>\n\t\t<div v-if=\"display === DisplayType.line\" :style=\"{width}\" class=\"bx-im-attach-grid__item --line\">\n\t\t\t<div class=\"bx-im-attach-grid__name\">{{ name }}</div>\n\t\t\t<div v-if=\"link\" :style=\"{color}\" class=\"bx-im-attach-grid__value --link\">\n\t\t\t\t<a :href=\"link\" target=\"_blank\" v-html=\"value\"></a>\n\t\t\t</div>\n\t\t\t<div v-else class=\"bx-im-attach-grid__value\" :style=\"{color}\" v-html=\"value\"></div>\n\t\t</div>\n\t\t<div v-if=\"display === DisplayType.row\" class=\"bx-im-attach-grid__item --row\">\n\t\t\t<table>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr>\n\t\t\t\t\t\t<td v-if=\"name\" :colspan=\"value? 1: 2\" :style=\"{width}\" class=\"bx-im-attach-grid__name\">\n\t\t\t\t\t\t\t{{ name }}\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td\n\t\t\t\t\t\t\tv-if=\"value && link\"\n\t\t\t\t\t\t\t:colspan=\"name? 1: 2\"\n\t\t\t\t\t\t\t:style=\"{color}\"\n\t\t\t\t\t\t\tclass=\"bx-im-attach-grid__value --link\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<a :href=\"link\" target=\"_blank\" v-html=\"value\"></a>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t\t<td\n\t\t\t\t\t\t\tv-if=\"value && !link\"\n\t\t\t\t\t\t\t:colspan=\"name? 1: 2\"\n\t\t\t\t\t\t\t:style=\"{color}\"\n\t\t\t\t\t\t\tv-html=\"value\"\n\t\t\t\t\t\t\tclass=\"bx-im-attach-grid__value\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</td>\n\t\t\t\t\t</tr>\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t`\n};","import {Color} from 'im.v2.const';\n\nimport {AttachGridItem} from './grid-item';\n\nimport './grid.css';\n\nimport type {AttachGridConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachGrid = {\n\tname: 'AttachGrid',\n\tcomponents: {AttachGridItem},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachGridConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-grid__container\">\n\t\t\t<AttachGridItem\n\t\t\t\tv-for=\"(gridItem, index) in internalConfig.GRID\"\n\t\t\t\t:config=\"gridItem\"\n\t\t\t\t:key=\"index\"\n\t\t\t/>\n\t\t</div>\n\t`\n};","import './html.css';\nimport {Parser} from 'im.v2.lib.parser';\n\nimport type {AttachHtmlConfig} from 'im.v2.const';\n\nexport const AttachHtml = {\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachHtmlConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\thtml()\n\t\t{\n\t\t\treturn Parser.decodeHtml(this.internalConfig.HTML);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-element-attach-type-html\" v-html=\"html\"></div>\n\t`\n};","import {Dom} from 'main.core';\nimport {lazyload} from 'ui.vue3.directives.lazyload';\n\nimport type {AttachImageItemConfig} from 'im.v2.const';\n\nconst MAX_IMAGE_SIZE = 250;\n\n// @vue/component\nexport const AttachImageItem = {\n\tname: 'AttachImageItem',\n\tdirectives:\n\t{\n\t\tlazyload\n\t},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachImageItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\twidth(): number\n\t\t{\n\t\t\treturn this.internalConfig.WIDTH;\n\t\t},\n\t\theight(): number\n\t\t{\n\t\t\treturn this.internalConfig.HEIGHT;\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t},\n\t\tname(): string\n\t\t{\n\t\t\treturn this.internalConfig.NAME;\n\t\t},\n\t\tpreview(): string\n\t\t{\n\t\t\treturn this.internalConfig.PREVIEW;\n\t\t},\n\t\tsource()\n\t\t{\n\t\t\treturn this.preview ?? this.link;\n\t\t},\n\t\timageSize(): Object\n\t\t{\n\t\t\tif (!this.width && !this.height)\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\n\t\t\tconst aspectRatio = this.width > MAX_IMAGE_SIZE ? MAX_IMAGE_SIZE / this.width : 1;\n\n\t\t\tconst sizes = {\n\t\t\t\twidth: this.width * aspectRatio,\n\t\t\t\theight: this.height * aspectRatio\n\t\t\t};\n\n\t\t\treturn {\n\t\t\t\twidth: `${sizes.width}px`,\n\t\t\t\theight: `${sizes.height}px`,\n\t\t\t\tbackgroundSize: (sizes.width < 100 || sizes.height < 100)? 'contain': 'initial'\n\t\t\t};\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\topen()\n\t\t{\n\t\t\tif (!this.link)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\twindow.open(this.link, '_blank');\n\t\t},\n\t\tlazyLoadCallback(event: {element: HTMLElement, state: string})\n\t\t{\n\t\t\tconst {element} = event;\n\t\t\tif (!Dom.style(element, 'width'))\n\t\t\t{\n\t\t\t\tDom.style(element, 'width', `${element.offsetWidth}px`);\n\t\t\t}\n\t\t\tif (!Dom.style(element, 'height'))\n\t\t\t{\n\t\t\t\tDom.style(element, 'height', `${element.offsetHeight}px`);\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-image__item\" @click=\"open\">\n\t\t\t<img\n\t\t\t\tv-lazyload=\"{callback: lazyLoadCallback}\"\n\t\t\t\t:data-lazyload-src=\"source\"\n\t\t\t\t:style=\"imageSize\"\n\t\t\t\t:title=\"name\"\n\t\t\t\t:alt=\"name\"\n\t\t\t\tclass=\"bx-im-attach-image__source\"\n\t\t\t/>\n\t\t</div>\n\t`\n};","import { Color } from 'im.v2.const';\n\nimport { AttachImageItem } from './image-item';\n\nimport './image.css';\n\nimport type { AttachImageConfig } from 'im.v2.const';\n\nexport const AttachImage = {\n\tname: 'AttachImage',\n\tcomponents: { AttachImageItem },\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachImageConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-image__container bx-im-attach-image__scope\">\n\t\t\t<AttachImageItem v-for=\"(image, index) in internalConfig.IMAGE\" :config=\"image\" :key=\"index\" />\n\t\t</div>\n\t`,\n};\n","import {Parser} from 'im.v2.lib.parser';\nimport {Color} from 'im.v2.const';\n\nimport {AttachImage} from '../image/image';\n\nimport type {AttachLinkItemConfig, AttachImageConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachLinkItem = {\n\tname: 'AttachLinkItem',\n\tcomponents: {AttachImage},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachLinkItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t},\n\t\tname(): string\n\t\t{\n\t\t\treturn this.internalConfig.NAME ?? this.link;\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\treturn this.internalConfig.DESC;\n\t\t},\n\t\thtml(): string\n\t\t{\n\t\t\tconst content = this.internalConfig.HTML || this.description;\n\n\t\t\treturn Parser.decodeText(content);\n\t\t},\n\t\tpreview(): string\n\t\t{\n\t\t\treturn this.internalConfig.PREVIEW;\n\t\t},\n\t\timageConfig(): AttachImageConfig\n\t\t{\n\t\t\treturn {\n\t\t\t\tIMAGE: [{\n\t\t\t\t\tNAME: this.internalConfig.NAME,\n\t\t\t\t\tPREVIEW: this.internalConfig.PREVIEW,\n\t\t\t\t\tWIDTH: this.internalConfig.WIDTH,\n\t\t\t\t\tHEIGHT: this.internalConfig.HEIGHT,\n\t\t\t\t}]\n\t\t\t};\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-link__item\">\n\t\t\t<a v-if=\"link\" :href=\"link\" target=\"_blank\" class=\"bx-im-attach-link__link\">\n\t\t\t\t{{ name }}\n\t\t\t</a>\n\t\t\t<span v-else class=\"bx-im-attach-link__name\">\n\t\t\t\t{{ name }}\n\t\t\t</span>\n\t\t\t<div v-if=\"internalConfig.HTML || description\" class=\"bx-im-attach-link__desc\" v-html=\"html\"></div>\n\t\t\t<div v-if=\"preview\" class=\"bx-im-attach-link__image\">\n\t\t\t\t<AttachImage :config=\"imageConfig\" :color=\"color\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import {Color} from 'im.v2.const';\n\nimport {AttachLinkItem} from './link-item';\n\nimport './link.css';\n\nimport type {AttachLinkConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachLink = {\n\tname: 'AttachLink',\n\tcomponents: {AttachLinkItem},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachLinkConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-link__container\">\n\t\t\t<AttachLinkItem v-for=\"(link, index) in internalConfig.LINK\" :config=\"link\" :key=\"index\" />\n\t\t</div>\n\t`\n};","import {Color} from 'im.v2.const';\nimport {Parser} from 'im.v2.lib.parser';\n\nimport './message.css';\n\nimport type {AttachMessageConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachMessage = {\n\tname: 'AttachMessage',\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachMessageConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tmessage()\n\t\t{\n\t\t\treturn Parser.decodeText(this.internalConfig.MESSAGE);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-message__container\" v-html=\"message\"></div>\n\t`\n};","import { RestClient } from 'rest.client';\n\nimport { Core } from 'im.v2.application.core';\nimport { RestMethod } from 'im.v2.const';\n\nimport type { ImModelMessage } from 'im.v2.model';\nimport type { Store } from 'ui.vue3.vuex';\n\nexport class RichService\n{\n\t#restClient: RestClient;\n\t#store: Store;\n\t#message: ImModelMessage;\n\n\tconstructor(message: ImModelMessage)\n\t{\n\t\tthis.#restClient = Core.getRestClient();\n\t\tthis.#store = Core.getStore();\n\t\tthis.#message = message;\n\t}\n\n\tdeleteRichLink(attachId: string): Promise\n\t{\n\t\tthis.#store.dispatch('messages/deleteAttach', {\n\t\t\tmessageId: this.#message.id,\n\t\t\tattachId,\n\t\t});\n\n\t\tthis.#restClient.callMethod(RestMethod.imV2ChatMessageDeleteRichUrl, {\n\t\t\tmessageId: this.#message.id,\n\t\t}).catch((error) => {\n\t\t\tconsole.error('RichService: error deleting rich link', error);\n\t\t});\n\t}\n}\n","import { Core } from 'im.v2.application.core';\nimport { Color } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport { AttachImage } from '../image/image';\nimport { RichService } from './rich-service';\n\nimport type { AttachRichItemConfig, AttachImageConfig } from 'im.v2.const';\n\n// @vue/component\nexport const AttachRichItem = {\n\tname: 'AttachRichItem',\n\tcomponents: { AttachImage },\n\tinject: ['message'],\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent,\n\t\t},\n\t\tattachId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachRichItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t},\n\t\tname(): string\n\t\t{\n\t\t\treturn Utils.text.convertHtmlEntities(this.internalConfig.NAME);\n\t\t},\n\t\tdescription(): string\n\t\t{\n\t\t\treturn Utils.text.convertHtmlEntities(this.internalConfig.DESC);\n\t\t},\n\t\thtml(): string\n\t\t{\n\t\t\treturn this.internalConfig.HTML;\n\t\t},\n\t\tpreview(): string\n\t\t{\n\t\t\treturn this.internalConfig.PREVIEW;\n\t\t},\n\t\timageConfig(): AttachImageConfig\n\t\t{\n\t\t\treturn {\n\t\t\t\tIMAGE: [{\n\t\t\t\t\tNAME: this.name,\n\t\t\t\t\tPREVIEW: this.preview,\n\t\t\t\t}],\n\t\t\t};\n\t\t},\n\t\tcanShowDeleteIcon(): boolean\n\t\t{\n\t\t\tif (!this.message)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.message.authorId === Core.getUserId();\n\t\t},\n\t\tdeleteRichLinkTitle(): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage('IM_ELEMENTS_ATTACH_RICH_LINK_DELETE');\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\topenLink()\n\t\t{\n\t\t\tif (!this.link)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\twindow.open(this.link, '_blank');\n\t\t},\n\t\tdeleteRichLink()\n\t\t{\n\t\t\tif (!this.message)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t(new RichService(this.message)).deleteRichLink(this.attachId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-rich__scope bx-im-attach-rich__container\">\n\t\t\t<div class=\"bx-im-attach-rich__block\">\n\t\t\t\t<div class=\"bx-im-attach-rich__name\" @click=\"openLink\">{{ name }}</div>\n\t\t\t\t<div v-if=\"html || description\" class=\"bx-im-attach-rich__desc\">{{ html || description }}</div>\n\t\t\t\t<button \n\t\t\t\t\tv-if=\"canShowDeleteIcon\" \n\t\t\t\t\tclass=\"bx-im-attach-rich__hide-icon\"\n\t\t\t\t\t@click=\"deleteRichLink\"\n\t\t\t\t\t:title=\"deleteRichLinkTitle\"\n\t\t\t\t></button>\n\t\t\t</div>\n\t\t\t<div v-if=\"preview\" class=\"bx-im-attach-rich__image\" @click=\"openLink\">\n\t\t\t\t<AttachImage :config=\"imageConfig\" :color=\"color\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Color } from 'im.v2.const';\n\nimport { AttachRichItem } from './rich-item';\n\nimport './rich.css';\n\nimport type { AttachRichConfig } from 'im.v2.const';\n\n// @vue/component\nexport const AttachRich = {\n\tcomponents: { AttachRichItem },\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent,\n\t\t},\n\t\tattachId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachRichConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-rich__container\">\n\t\t\t<AttachRichItem \n\t\t\t\tv-for=\"(rich, index) in internalConfig.RICH_LINK\" \n\t\t\t\t:config=\"rich\" \n\t\t\t\t:color=\"color\" \n\t\t\t\t:key=\"index\" \n\t\t\t\t:attachId=\"attachId\" \n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import {lazyload} from 'ui.vue3.directives.lazyload';\n\nimport {Color} from 'im.v2.const';\n\nimport type {AttachUserItemConfig} from 'im.v2.const';\n\nconst AVATAR_TYPE = {\n\tuser: 'user',\n\tchat: 'chat',\n\tbot: 'bot'\n};\n\n// @vue/component\nexport const AttachUserItem = {\n\tname: 'AttachUserItem',\n\tdirectives: {lazyload},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachUserItemConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tname(): string\n\t\t{\n\t\t\treturn this.internalConfig.NAME;\n\t\t},\n\t\tavatar(): string\n\t\t{\n\t\t\treturn this.internalConfig.AVATAR;\n\t\t},\n\t\tavatarType(): string\n\t\t{\n\t\t\treturn this.internalConfig.AVATAR_TYPE;\n\t\t},\n\t\tlink(): string\n\t\t{\n\t\t\treturn this.internalConfig.LINK;\n\t\t},\n\t\tavatarTypeClass()\n\t\t{\n\t\t\tif (this.avatar)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet avatarType = AVATAR_TYPE.user;\n\n\t\t\tif (this.avatarType === AVATAR_TYPE.chat)\n\t\t\t{\n\t\t\t\tavatarType = AVATAR_TYPE.chat;\n\t\t\t}\n\t\t\telse if (this.avatarType === AVATAR_TYPE.bot)\n\t\t\t{\n\t\t\t\tavatarType = AVATAR_TYPE.bot;\n\t\t\t}\n\n\t\t\treturn `--${avatarType}`;\n\t\t},\n\t\tavatarTypeStyle(): {backgroundColor: string}\n\t\t{\n\t\t\treturn {backgroundColor: !this.avatar ? this.color : ''};\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-user__item\">\n\t\t\t<div class=\"bx-im-attach-user__avatar\" :class=\"avatarTypeClass\" :style=\"avatarTypeStyle\">\n\t\t\t\t<img v-if=\"avatar\" v-lazyload :data-lazyload-src=\"avatar\" class=\"bx-im-attach-user__source\" alt=\"name\" />\n\t\t\t</div>\n\t\t\t<a v-if=\"link\" :href=\"link\" class=\"bx-im-attach-user__name\" target=\"_blank\">\n\t\t\t\t{{ name }}\n\t\t\t</a>\n\t\t\t<span class=\"bx-im-attach-user__name\" v-else>\n\t\t\t\t{{ name }}\n\t\t\t</span>\n\t\t</div>\n\t`\n};","import {Color} from 'im.v2.const';\n\nimport {AttachUserItem} from './user-item';\n\nimport './user.css';\n\nimport type {AttachUserConfig} from 'im.v2.const';\n\n// @vue/component\nexport const AttachUser = {\n\tname: 'AttachUser',\n\tcomponents: {AttachUserItem},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {}\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.transparent\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachUserConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach-user__container\">\n\t\t\t<AttachUserItem v-for=\"(user, index) in internalConfig.USER\" :config=\"user\" :color=\"color\" :key=\"index\" />\n\t\t</div>\n\t`\n};","import { Color, AttachType } from 'im.v2.const';\n\nimport { AttachDelimiter } from './components/delimiter/delimiter';\nimport { AttachFile } from './components/file/file';\nimport { AttachGrid } from './components/grid/grid';\nimport { AttachHtml } from './components/html/html';\nimport { AttachImage } from './components/image/image';\nimport { AttachLink } from './components/link/link';\nimport { AttachMessage } from './components/message/message';\nimport { AttachRich } from './components/rich/rich';\nimport { AttachUser } from './components/user/user';\n\nimport './attach.css';\n\nimport type { AttachConfig, AttachConfigBlock } from 'im.v2.const';\n\nconst PropertyToComponentMap = {\n\t[AttachType.Delimiter]: AttachDelimiter,\n\t[AttachType.File]: AttachFile,\n\t[AttachType.Grid]: AttachGrid,\n\t[AttachType.Html]: AttachHtml,\n\t[AttachType.Image]: AttachImage,\n\t[AttachType.Link]: AttachLink,\n\t[AttachType.Message]: AttachMessage,\n\t[AttachType.Rich]: AttachRich,\n\t[AttachType.User]: AttachUser,\n};\n\n// @vue/component\nexport const Attach = {\n\tname: 'MessengerAttach',\n\tcomponents: {\n\t\tAttachDelimiter,\n\t\tAttachFile,\n\t\tAttachGrid,\n\t\tAttachHtml,\n\t\tAttachImage,\n\t\tAttachLink,\n\t\tAttachMessage,\n\t\tAttachRich,\n\t\tAttachUser,\n\t},\n\tprops:\n\t{\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\tdefault: () => {},\n\t\t},\n\t\tbaseColor: {\n\t\t\ttype: String,\n\t\t\tdefault: Color.base,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tinternalConfig(): AttachConfig\n\t\t{\n\t\t\treturn this.config;\n\t\t},\n\t\tblocks(): AttachConfigBlock[]\n\t\t{\n\t\t\treturn this.internalConfig.BLOCKS;\n\t\t},\n\t\tcolor(): string\n\t\t{\n\t\t\tif (!this.internalConfig.COLOR)\n\t\t\t{\n\t\t\t\treturn this.baseColor;\n\t\t\t}\n\n\t\t\t// todo: in future we should set color for rich link on the backend. Remove after we delete the old chat.\n\t\t\tif (this.internalConfig.COLOR === Color.transparent && this.hasRichLink)\n\t\t\t{\n\t\t\t\treturn '#2FC6F6';\n\t\t\t}\n\n\t\t\tif (this.internalConfig.COLOR === Color.transparent)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.internalConfig.COLOR;\n\t\t},\n\t\thasRichLink(): boolean\n\t\t{\n\t\t\treturn this.blocks.some((block: AttachConfigBlock) => block[AttachType.Rich]);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tgetComponentForBlock(block: AttachConfigBlock)\n\t\t{\n\t\t\tconst [blockType] = Object.keys(block);\n\t\t\tif (!PropertyToComponentMap[blockType])\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn PropertyToComponentMap[blockType];\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-attach__container bx-im-attach__scope\">\n\t\t\t<div v-if=\"color\" class=\"bx-im-attach__border\" :style=\"{borderColor: color}\"></div>\n\t\t\t<div class=\"bx-im-attach__content\">\n\t\t\t\t<component\n\t\t\t\t\tv-for=\"(block, index) in blocks\"\n\t\t\t\t\t:is=\"getComponentForBlock(block)\"\n\t\t\t\t\t:config=\"block\"\n\t\t\t\t\t:color=\"color\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t:attachId=\"internalConfig.ID.toString()\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import {Messenger} from 'im.public';\nimport {ChatService} from 'im.v2.provider.service';\nimport {DialogType} from 'im.v2.const';\nimport {Utils} from 'im.v2.lib.utils';\n\nimport {Avatar, ChatTitle, Button, ButtonColor, ButtonSize} from '../registry';\n\nimport './chat-info-content.css';\n\n// @vue/component\nexport const ChatInfoContent = {\n\tcomponents: {Avatar, ChatTitle, Button},\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\thasError: false,\n\t\t\tisLoading: false\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonColor: () => ButtonColor,\n\t\tButtonSize: () => ButtonSize,\n\t\tdialog(): ?Object\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](this.dialogId);\n\t\t},\n\t\tuser()\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tisUser()\n\t\t{\n\t\t\treturn this.dialog?.type === DialogType.user;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.user.bot;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\tisChat()\n\t\t{\n\t\t\treturn !this.isUser;\n\t\t},\n\t\tchatType(): string\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn this.$store.getters['users/getPosition'](this.dialogId);\n\t\t\t}\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('IM_LIST_RECENT_CHAT_TYPE_GROUP_V2');\n\t\t},\n\t\topenChatButtonText()\n\t\t{\n\t\t\tif (this.isChat)\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage('IM_ELEMENTS_CHAT_INFO_POPUP_OPEN_CHAT');\n\t\t\t}\n\n\t\t\treturn this.$Bitrix.Loc.getMessage('IM_ELEMENTS_CHAT_INFO_POPUP_WRITE_A_MESSAGE');\n\t\t},\n\t\tuserProfileLink(): string\n\t\t{\n\t\t\treturn Utils.user.getProfileLink(this.dialogId);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.chatService = new ChatService();\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tthis.loadChat();\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tloadChat()\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tthis.chatService.loadChat(this.dialogId).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.hasError = true;\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t\t},\n\t\tonOpenChat()\n\t\t{\n\t\t\tMessenger.openChat(this.dialogId);\n\t\t},\n\t\tonClickVideoCall()\n\t\t{\n\t\t\tMessenger.startVideoCall(this.dialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-info-content__container\">\n\t\t\t<template v-if=\"!isLoading && !hasError\">\n\t\t\t\t<div class=\"bx-im-chat-info-content__detail-info-container\">\n\t\t\t\t\t<div class=\"bx-im-chat-info-content__avatar-container\">\n\t\t\t\t\t\t<Avatar :dialogId=\"dialogId\" size=\"XL\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-im-chat-info-content__title-container\">\n\t\t\t\t\t\t<ChatTitle v-if=\"isChat\" :dialogId=\"dialogId\" />\n\t\t\t\t\t\t<a v-else :href=\"userProfileLink\" target=\"_blank\">\n\t\t\t\t\t\t\t<ChatTitle :dialogId=\"dialogId\" />\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class=\"bx-im-chat-info-content__chat-description_text\">\n\t\t\t\t\t\t\t{{ chatType }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-chat-info-content__buttons-container\">\n\t\t\t\t\t<Button\n\t\t\t\t\t\t:size=\"ButtonSize.M\"\n\t\t\t\t\t\t:color=\"ButtonColor.PrimaryBorder\"\n\t\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t\t:text=\"openChatButtonText\"\n\t\t\t\t\t\t:isUppercase=\"false\"\n\t\t\t\t\t\t@click=\"onOpenChat\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tv-if=\"isUser && !isBot\"\n\t\t\t\t\t\t:size=\"ButtonSize.M\"\n\t\t\t\t\t\t:color=\"ButtonColor.PrimaryBorder\"\n\t\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t\t:isUppercase=\"false\"\n\t\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('IM_ELEMENTS_CHAT_INFO_POPUP_VIDEOCALL')\"\n\t\t\t\t\t\t@click=\"onClickVideoCall\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"isLoading\">\n\t\t\t\t<div class=\"bx-im-chat-info-content__loader-container\">\n\t\t\t\t\t<div class=\"bx-im-chat-info-content__loader_icon\"></div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"hasError\">\n\t\t\t\t<div class=\"bx-im-chat-info-content__error-container\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_ELEMENTS_CHAT_INFO_POPUP_NO_ACCESS') }}\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t`\n};\n","import {ChatInfoContent} from './chat-info-content';\nimport {MessengerPopup} from '../popup/popup';\n\nconst POPUP_ID = 'im-chat-info-popup';\n\n// @vue/component\nexport const ChatInfoPopup = {\n\tname: 'ChatInfoPopup',\n\tcomponents: {MessengerPopup, ChatInfoContent},\n\tprops:\n\t{\n\t\tshowPopup: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig()\n\t\t{\n\t\t\treturn {\n\t\t\t\tminWidth: 313,\n\t\t\t\theight: 134,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tpadding: 16,\n\t\t\t\tangle: true\n\t\t\t};\n\t\t}\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\tv-if=\"showPopup\" \n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t>\n\t\t\t<ChatInfoContent :dialogId=\"dialogId\"/>\n\t\t</MessengerPopup>\n\t`\n};","import {Core} from 'im.v2.application.core';\nimport {RestMethod} from 'im.v2.const';\nimport {UserManager} from 'im.v2.lib.user';\n\nimport type {Store} from 'ui.vue3.vuex';\nimport type {RestClient} from 'rest.client';\n\nexport class UserListService\n{\n\t#store: Store;\n\t#restClient: RestClient;\n\t#userManager: UserManager;\n\n\tconstructor()\n\t{\n\t\tthis.#store = Core.getStore();\n\t\tthis.#restClient = Core.getRestClient();\n\t\tthis.#userManager = new UserManager();\n\t}\n\n\tloadUsers(userIds: number[]): Promise\n\t{\n\t\treturn this.#restClient.callMethod(RestMethod.imUserListGet, {ID: userIds})\n\t\t\t.then(response => {\n\t\t\t\treturn this.#userManager.setUsersToModel(Object.values(response.data()));\n\t\t\t});\n\t}\n}","import {Loader as UILoader} from 'ui.loader';\nimport './loader.css';\n\nconst LOADER_SIZE = 'xs';\nconst LOADER_TYPE = 'BULLET';\n\n// @vue/component\nexport const Loader = {\n\tname: 'MessengerLoader',\n\tmounted()\n\t{\n\t\tthis.loader = new UILoader({\n\t\t\ttarget: this.$refs['messenger-loader'],\n\t\t\ttype: LOADER_TYPE,\n\t\t\tsize: LOADER_SIZE,\n\t\t});\n\t\tthis.loader.render();\n\t\tthis.loader.show();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.loader.hide();\n\t\tthis.loader = null;\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-loader__container\" ref=\"messenger-loader\"></div>\n\t`\n};","import {Messenger} from 'im.public';\nimport {ImModelUser} from 'im.v2.model';\nimport {Layout} from 'im.v2.const';\n\nimport {Avatar, AvatarSize} from '../avatar/avatar';\nimport {ChatTitle} from '../chat-title/chat-title';\n\nimport './user-list-content.css';\n\n// @vue/component\nexport const UserItem = {\n\tname: 'UserItem',\n\tcomponents: {Avatar, ChatTitle},\n\tprops: {\n\t\tuserId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.userId, true);\n\t\t},\n\t\tuserDialogId(): string\n\t\t{\n\t\t\treturn this.userId.toString();\n\t\t},\n\t\tuserStatusClasses(): string[]\n\t\t{\n\t\t\tif (this.user.bot)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst status = this.$store.getters['users/getStatus'](this.userId);\n\t\t\tif (status === '')\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn [\n\t\t\t\t'bx-im-user-list-content__avatar-status',\n\t\t\t\t`--${status}`,\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonUserClick()\n\t\t{\n\t\t\tMessenger.openChat(this.userDialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-user-list-content__user-container\" @click=\"onUserClick\">\n\t\t\t<div class=\"bx-im-user-list-content__avatar-container\" :class=\"userStatusClasses\">\n\t\t\t\t<Avatar :size=\"AvatarSize.XS\" :dialogId=\"userDialogId\" />\n\t\t\t</div>\n\t\t\t<ChatTitle class=\"bx-im-user-list-content__chat-title-container\" :dialogId=\"userDialogId\" />\n\t\t</div>\n\t`\n};","import {ImModelUser} from 'im.v2.model';\n\nimport {UserListService} from './classes/user-list-service';\n\nimport {Loader} from '../loader/loader';\nimport {UserItem} from './user-item';\n\nimport './user-list-content.css';\n\n// @vue/component\nexport const UserListContent = {\n\tcomponents: {UserItem, Loader},\n\tprops: {\n\t\tuserIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\tadjustPopupFunction: {\n\t\t\ttype: Function,\n\t\t\trequired: true\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t}\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\thasError: false,\n\t\t\tisLoadingUsers: false\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tisLoading(): boolean\n\t\t{\n\t\t\treturn this.loading || this.isLoadingUsers;\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tuserIds()\n\t\t{\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.adjustPopupFunction();\n\t\t\t});\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tif (this.needUserRequest())\n\t\t{\n\t\t\tthis.requestUserData();\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgetUserListService(): UserListService\n\t\t{\n\t\t\tif (!this.userListService)\n\t\t\t{\n\t\t\t\tthis.userListService = new UserListService();\n\t\t\t}\n\n\t\t\treturn this.userListService;\n\t\t},\n\t\tgetUser(userId): ?ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](userId);\n\t\t},\n\t\tneedUserRequest(): boolean\n\t\t{\n\t\t\treturn this.userIds.some(userId => !this.getUser(userId));\n\t\t},\n\t\trequestUserData()\n\t\t{\n\t\t\tthis.isLoadingUsers = true;\n\t\t\tthis.getUserListService().loadUsers(this.userIds)\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.isLoadingUsers = false;\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t\tthis.hasError = true;\n\t\t\t\t\tthis.isLoadingUsers = false;\n\t\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-user-list-content__container bx-im-user-list-content__scope\">\n\t\t\t<template v-if=\"!isLoading && !hasError\">\n\t\t\t\t<UserItem v-for=\"userId in userIds\" :userId=\"userId\" />\n\t\t\t</template>\n\t\t\t<div v-else-if=\"isLoading\" class=\"bx-im-user-list-content__loader-container\">\n\t\t\t\t<Loader />\n\t\t\t</div>\n\t\t\t<div v-else-if=\"hasError\">\n\t\t\t\t{{ loc('IM_ELEMENTS_CHAT_INFO_POPUP_NO_ACCESS') }}\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import {UserListContent} from './user-list-content';\nimport {MessengerPopup} from '../popup/popup';\n\nconst POPUP_ID = 'im-user-list-popup';\n\n// @vue/component\nexport const UserListPopup = {\n\tname: 'UserListPopup',\n\tcomponents: {MessengerPopup, UserListContent},\n\tprops:\n\t{\n\t\tshowPopup: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: POPUP_ID\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tuserIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true\n\t\t},\n\t\twithAngle: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\tforceTop: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false\n\t\t},\n\t\toffsetLeft: {\n\t\t\ttype: Number,\n\t\t\trequired: false,\n\t\t\tdefault: 0\n\t\t}\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig()\n\t\t{\n\t\t\tconst config = {\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\toffsetTop: 4,\n\t\t\t\toffsetLeft: this.offsetLeft,\n\t\t\t\tpadding: 0,\n\t\t\t\tangle: this.withAngle\n\t\t\t};\n\n\t\t\tif (this.forceTop)\n\t\t\t{\n\t\t\t\tconfig.bindOptions = {position: 'top'};\n\t\t\t}\n\n\t\t\treturn config;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\tv-if=\"showPopup\"\n\t\t\tv-slot=\"{adjustPosition}\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t\t:id=\"id\"\n\t\t>\n\t\t\t<UserListContent :userIds=\"userIds\" :loading=\"loading\" :adjustPopupFunction=\"adjustPosition\"/>\n\t\t</MessengerPopup>\n\t`\n};","/**\n * Bitrix Messenger\n * Attach element Vue component\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport './keyboard.css';\nimport {Utils} from 'im.v2.lib.utils';\nimport {Logger} from 'im.v2.lib.logger';\n\nconst ButtonType = Object.freeze({\n\tnewline: 'NEWLINE',\n\tbutton: 'BUTTON'\n});\n\nexport const Keyboard = {\n\t/*\n\t * @emits 'click' {action: string, params: Object}\n\t */\n\tprops:\n\t{\n\t\tbuttons: {type: Array, default: () => []},\n\t\tmessageId: {default: 0},\n\t\tuserId: {default: 0},\n\t\tdialogId: {default: 0},\n\t},\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tisMobile: Utils.platform.isMobile(),\n\t\t\tisBlocked: false,\n\t\t\tlocalButtons: [],\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.localButtons = this.prepareButtons(this.buttons);\n\t},\n\twatch:\n\t{\n\t\tbuttons()\n\t\t{\n\t\t\tclearTimeout(this.recoverStateButton);\n\n\t\t\tthis.isBlocked = false;\n\t\t\tthis.localButtons = this.prepareButtons(this.buttons);\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tclick(button)\n\t\t{\n\t\t\tif (this.isBlocked)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (button.DISABLED && button.DISABLED === 'Y')\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (button.ACTION && button.ACTION_VALUE.toString())\n\t\t\t{\n\t\t\t\tthis.$emit('click', {action: 'ACTION', params: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tmessageId: this.messageId,\n\t\t\t\t\tbotId: button.BOT_ID,\n\t\t\t\t\taction: button.ACTION,\n\t\t\t\t\tvalue: button.ACTION_VALUE,\n\t\t\t\t}});\n\t\t\t}\n\t\t\telse if (button.FUNCTION)\n\t\t\t{\n\t\t\t\tconst execFunction = button.FUNCTION.toString()\n\t\t\t\t\t.replace('#MESSAGE_ID#', this.messageId)\n\t\t\t\t\t.replace('#DIALOG_ID#', this.dialogId)\n\t\t\t\t\t.replace('#USER_ID#', this.userId);\n\t\t\t\teval(execFunction);\n\t\t\t}\n\t\t\telse if (button.APP_ID)\n\t\t\t{\n\t\t\t\tLogger.warn('Messenger keyboard: open app is not implemented.');\n\t\t\t}\n\t\t\telse if (button.LINK)\n\t\t\t{\n\t\t\t\tif (Utils.platform.isBitrixMobile())\n\t\t\t\t{\n\t\t\t\t\tapp.openNewPage(button.LINK);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.open(button.LINK, '_blank');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (button.WAIT !== 'Y')\n\t\t\t{\n\t\t\t\tif (button.BLOCK === 'Y')\n\t\t\t\t{\n\t\t\t\t\tthis.isBlocked = true;\n\t\t\t\t}\n\n\t\t\t\tbutton.WAIT = 'Y';\n\n\t\t\t\tthis.$emit('click', {action: 'COMMAND', params: {\n\t\t\t\t\tdialogId: this.dialogId,\n\t\t\t\t\tmessageId: this.messageId,\n\t\t\t\t\tbotId: button.BOT_ID,\n\t\t\t\t\tcommand: button.COMMAND,\n\t\t\t\t\tparams: button.COMMAND_PARAMS,\n\t\t\t\t}});\n\n\t\t\t\tthis.recoverStateButton = setTimeout(() => {\n\t\t\t\t\tthis.isBlocked = false;\n\t\t\t\t\tbutton.WAIT = 'N';\n\t\t\t\t}, 10000);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\tgetStyles(button)\n\t\t{\n\t\t\tconst styles = {};\n\t\t\tif (button.WIDTH)\n\t\t\t{\n\t\t\t\tstyles['width'] = `${button.WIDTH}px`;\n\t\t\t}\n\t\t\telse if (button.DISPLAY === 'BLOCK')\n\t\t\t{\n\t\t\t\tstyles['width'] = '225px';\n\t\t\t}\n\t\t\tif (button.BG_COLOR)\n\t\t\t{\n\t\t\t\tstyles['backgroundColor'] = button.BG_COLOR;\n\t\t\t}\n\t\t\tif (button.TEXT_COLOR)\n\t\t\t{\n\t\t\t\tstyles['color'] = button.TEXT_COLOR;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\n\t\tprepareButtons(buttons)\n\t\t{\n\t\t\treturn buttons.filter(button =>\n\t\t\t{\n\t\t\t\tif (!button.CONTEXT)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (Utils.platform.isBitrixMobile() && button.CONTEXT === 'DESKTOP')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!Utils.platform.isBitrixMobile() && button.CONTEXT === 'MOBILE')\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// TODO activate this buttons\n\t\t\t\tif (\n\t\t\t\t\t!Utils.platform.isBitrixMobile()\n\t\t\t\t\t&& (button.ACTION === 'DIALOG' || button.ACTION === 'CALL')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t});\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tButtonType: () => ButtonType,\n\t},\n\ttemplate: `\n\t\t<div :class=\"['bx-im-element-keyboard', {'bx-im-element-keyboard-mobile': isMobile}]\">\n\t\t\t<template v-for=\"(button, index) in localButtons\">\n\t\t\t\t<div v-if=\"button.TYPE === ButtonType.newline\" class=\"bx-im-element-keyboard-button-separator\"></div>\n\t\t\t\t<span v-else-if=\"button.TYPE === ButtonType.button\" :class=\"[\n\t\t\t\t\t'bx-im-element-keyboard-button', \n\t\t\t\t\t'bx-im-element-keyboard-button-'+button.DISPLAY.toLowerCase(), \n\t\t\t\t\t{\n\t\t\t\t\t\t'bx-im-element-keyboard-button-disabled': isBlocked || button.DISABLED === 'Y',\n\t\t\t\t\t\t'bx-im-element-keyboard-button-progress': button.WAIT === 'Y',\n\t\t\t\t\t}\n\t\t\t\t]\" @click=\"click(button)\">\n\t\t\t\t\t<span class=\"bx-im-element-keyboard-button-text\" :style=\"getStyles(button)\">{{button.TEXT}}</span>\n\t\t\t\t</span>\n\t\t\t</template>\n\t\t</div>\n\t`\n};","import { MenuManager, Menu } from 'main.popup';\n\nimport 'ui.forms';\n\nimport './dropdown.css';\n\nexport type DropdownItem = {\n\tvalue: string,\n\ttext: string,\n\tdefault?: boolean\n};\n\n// @vue/component\nexport const Dropdown = {\n\tname: 'ChatDropdown',\n\tprops:\n\t{\n\t\titems: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['itemChange'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tselectedElement: '',\n\t\t\tmenuOpened: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tformattedItems(): {[value: string]: DropdownItem}\n\t\t{\n\t\t\tconst map = {};\n\t\t\tthis.items.forEach((item) => {\n\t\t\t\tmap[item.value] = item;\n\t\t\t});\n\n\t\t\treturn map;\n\t\t},\n\t\tdefaultItem(): DropdownItem\n\t\t{\n\t\t\treturn this.items.find((item) => {\n\t\t\t\treturn item.default === true;\n\t\t\t});\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.menuInstance = null;\n\t\tif (this.defaultItem)\n\t\t{\n\t\t\tthis.selectedElement = this.defaultItem.value;\n\t\t}\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.menuInstance?.destroy();\n\t},\n\tmethods:\n\t{\n\t\ttoggleMenu()\n\t\t{\n\t\t\tif (!this.menuInstance)\n\t\t\t{\n\t\t\t\tthis.menuInstance = this.getMenuInstance();\n\t\t\t}\n\n\t\t\tif (this.menuOpened)\n\t\t\t{\n\t\t\t\tthis.menuInstance.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.menuInstance.show();\n\t\t\tconst width = this.$refs.container.clientWidth;\n\t\t\tthis.menuInstance.getPopupWindow().setWidth(width);\n\t\t\tthis.menuOpened = true;\n\t\t},\n\t\tgetMenuInstance(): Menu\n\t\t{\n\t\t\treturn MenuManager.create({\n\t\t\t\tid: this.id,\n\t\t\t\tbindOptions: { forceBindPosition: true, position: 'bottom' },\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\titems: this.getMenuItems(),\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.menuOpened = false;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tgetMenuItems(): Array<{ text: string, onclick: Function }>\n\t\t{\n\t\t\treturn Object.values(this.formattedItems).map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\ttext: item.text,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.selectedElement = item.value;\n\t\t\t\t\t\tthis.$emit('itemChange', item.value);\n\t\t\t\t\t\tthis.menuInstance.close();\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-dropdown__container bx-im-dropdown__scope\">\n\t\t\t<div @click=\"toggleMenu\" class=\"ui-ctl ui-ctl-xl ui-ctl-w100 ui-ctl-after-icon ui-ctl-dropdown\" ref=\"container\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t\t<div class=\"ui-ctl-element\">{{ formattedItems[selectedElement].text }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import './spinner.css';\n\nexport const SpinnerSize = Object.freeze({\n\tXXS: 'XXS',\n\tS: 'S',\n\tL: 'L',\n});\n\nexport const SpinnerColor = Object.freeze({\n\tgrey: 'grey',\n\tblue: 'blue',\n});\n\n// @vue/component\nexport const Spinner = {\n\tname: 'MessengerSpinner',\n\tprops: {\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\tdefault: SpinnerSize.S,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t\tdefault: SpinnerColor.blue,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tsizeClassName(): string\n\t\t{\n\t\t\treturn `--size-${this.size.toLowerCase()}`;\n\t\t},\n\t\tcolorClassName(): string\n\t\t{\n\t\t\treturn `--color-${this.color.toLowerCase()}`;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-spinner__container\">\n\t\t\t<div class=\"bx-im-elements-spinner__spinner\" :class=\"[sizeClassName, colorClassName]\"></div>\n\t\t</div>\n\t`\n};","import './toggle.css';\n\nexport const ToggleSize = {\n\tS: 'S',\n\tM: 'M'\n};\n\n// @vue/component\nexport const Toggle = {\n\tname: 'ToggleControl',\n\tprops: {\n\t\tsize: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tisEnabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\temits: ['change'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed: {\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst classes = [`--size-${this.size.toLowerCase()}`];\n\t\t\tif (!this.isEnabled)\n\t\t\t{\n\t\t\t\tclasses.push('--off');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\ttoggle()\n\t\t{\n\t\t\tthis.$emit('change', !this.isEnabled);\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<div @click=\"toggle\" :class=\"containerClasses\" class=\"bx-im-toggle__container bx-im-toggle__scope\">\n\t\t\t<span class=\"bx-im-toggle__cursor\"></span>\n\t\t\t<span class=\"bx-im-toggle__enabled\"></span>\n\t\t\t<span class=\"bx-im-toggle__disabled\"></span>\n\t\t</div>\n\t`\n};","import {Dom} from 'main.core';\nimport './tabs.css';\n\nconst ARROW_CONTROL_SIZE = 50;\n\nexport const TabsColorScheme = Object.freeze({\n\twhite: 'white',\n\tgray: 'gray',\n});\n\n// @vue/component\nexport const MessengerTabs = {\n\tname: 'MessengerTabs',\n\tprops: {\n\t\tcolorScheme: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t\tdefault: TabsColorScheme.white,\n\t\t\tvalidator: (value) => Object.values(TabsColorScheme).includes(value.toLowerCase())\n\t\t},\n\t\ttabs: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => []\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\thasLeftControl: false,\n\t\t\thasRightControl: false,\n\t\t\tcurrentElementIndex: 0,\n\t\t\thighlightOffsetLeft: 0,\n\t\t\thighlightWidth: 0,\n\t\t\tisFirstCall: true,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\thighlightStyle(): {left: string, width: string}\n\t\t{\n\t\t\treturn {\n\t\t\t\tleft: `${this.highlightOffsetLeft}px`,\n\t\t\t\twidth: `${this.highlightWidth}px`,\n\t\t\t};\n\t\t},\n\t\tcolorSchemeClass(): string\n\t\t{\n\t\t\treturn this.colorScheme === TabsColorScheme.white ? '--white' : '--gray';\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tcurrentElementIndex(newIndex: number)\n\t\t{\n\t\t\tthis.updateHighlightPosition(newIndex);\n\t\t\tthis.$emit('tabSelect', this.tabs[newIndex]);\n\t\t\tthis.scrollToElement(newIndex);\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tconst savedTabIndex = localStorage.getItem('lastOpenedTabIndex');\n\t\tif (this.$refs.tabs.scrollWidth > this.$refs.tabs.offsetWidth)\n\t\t{\n\t\t\tthis.hasRightControl = true;\n\t\t}\n\n\t\tif (savedTabIndex)\n\t\t{\n\t\t\tthis.currentElementIndex = parseInt(savedTabIndex, 10);\n\t\t}\n\n\t\tthis.updateHighlightPosition(this.currentElementIndex);\n\n\t\tsetTimeout(() => {\n\t\t\tthis.isFirstCall = false;\n\t\t}, 100);\n\n\t},\n\tbeforeUnmount()\n\t{\n\t\tlocalStorage.setItem('lastOpenedTabIndex', this.currentElementIndex.toString());\n\t},\n\tmethods:\n\t{\n\t\tgetElementNodeByIndex(index: number): HTMLElement\n\t\t{\n\t\t\treturn [...this.$refs.tabs.children].filter(\n\t\t\t\t(node) => !Dom.hasClass(node, 'bx-im-elements-tabs__highlight')\n\t\t\t)[index];\n\t\t},\n\t\tupdateHighlightPosition(index: number)\n\t\t{\n\t\t\tconst element = this.getElementNodeByIndex(index);\n\t\t\tthis.highlightOffsetLeft = element.offsetLeft;\n\t\t\tthis.highlightWidth = element.offsetWidth;\n\t\t},\n\t\tscrollToElement(elementIndex: number)\n\t\t{\n\t\t\tconst element = this.getElementNodeByIndex(elementIndex);\n\t\t\tthis.$refs.tabs.scroll({left: element.offsetLeft - ARROW_CONTROL_SIZE, behavior: 'smooth'});\n\t\t},\n\t\tonTabClick(event): {index: number}\n\t\t{\n\t\t\tthis.currentElementIndex = event.index;\n\t\t},\n\t\tisSelectedTab(index: number): boolean\n\t\t{\n\t\t\treturn index === this.currentElementIndex;\n\t\t},\n\t\tonLeftClick()\n\t\t{\n\t\t\tif (this.currentElementIndex <= 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.currentElementIndex--;\n\t\t},\n\t\tonRightClick()\n\t\t{\n\t\t\tif (this.currentElementIndex >= this.tabs.length - 1)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.currentElementIndex++;\n\t\t},\n\t\tupdateControlsVisibility()\n\t\t{\n\t\t\tthis.hasRightControl = this.$refs.tabs.scrollWidth > this.$refs.tabs.scrollLeft + this.$refs.tabs.clientWidth;\n\t\t\tthis.hasLeftControl = this.$refs.tabs.scrollLeft > 0;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-elements-tabs__container bx-im-elements-tabs__scope\" :class=\"colorSchemeClass\">\n\t\t\t<div v-if=\"hasLeftControl\" @click.stop=\"onLeftClick\" class=\"bx-im-elements-tabs__control --left\">\n\t\t\t\t<div class=\"bx-im-elements-tabs__forward-icon\"></div>\n\t\t\t</div>\n\t\t\t<div v-if=\"hasRightControl\" @click.stop=\"onRightClick\" class=\"bx-im-elements-tabs__control --right\">\n\t\t\t\t<div class=\"bx-im-elements-tabs__forward-icon\"></div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-elements-tabs__elements\" ref=\"tabs\" @scroll.passive=\"updateControlsVisibility\">\n\t\t\t\t<div class=\"bx-im-elements-tabs__highlight\" :class=\"isFirstCall ? '' : '--transition'\" :style=\"highlightStyle\"></div>\n\t\t\t\t<div\n\t\t\t\t\tv-for=\"(tab, index) in tabs\"\n\t\t\t\t\t:key=\"tab.id\"\n\t\t\t\t\tclass=\"bx-im-elements-tabs__item\"\n\t\t\t\t\t:class=\"[isSelectedTab(index) ? '--selected' : '']\"\n\t\t\t\t\t@click=\"onTabClick({index: index})\"\n\t\t\t\t\t:title=\"tab.title\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-im-elements-tabs__item-title\" :class=\"isFirstCall ? '' : '--transition'\">{{ tab.title }}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import { BitrixVue } from 'ui.vue3';\nimport { AudioPlayer as UIAudioPlayer, AudioPlayerState } from 'ui.vue3.components.audioplayer';\n\nimport { Utils } from 'im.v2.lib.utils';\nimport { Avatar, AvatarSize } from '../registry';\n\nimport './audioplayer.css';\n\n// @vue/component\nexport const AudioPlayer = BitrixVue.cloneComponent(UIAudioPlayer, {\n\tname: 'AudioPlayer',\n\tcomponents: { Avatar },\n\tprops: {\n\t\tfile: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tauthorId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\ttimelineType: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\twithContextMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithAvatar: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tshowContextButton: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tfileSize(): string\n\t\t{\n\t\t\treturn Utils.file.formatFileSize(this.file.size);\n\t\t},\n\t\tfileAuthorDialogId(): string\n\t\t{\n\t\t\treturn this.authorId.toString();\n\t\t},\n\t\tprogressPosition()\n\t\t{\n\t\t\tif (!this.loaded || this.state === AudioPlayerState.none)\n\t\t\t{\n\t\t\t\treturn { width: '100%' };\n\t\t\t}\n\n\t\t\treturn { width: `${this.progressInPixel}px` };\n\t\t},\n\t\tactiveTimelineStyles()\n\t\t{\n\t\t\tconst TIMELINE_VERTICAL_SHIFT = 44;\n\t\t\tconst ACTIVE_TIMELINE_VERTICAL_SHIFT = 19;\n\n\t\t\tconst shift = this.timelineType * TIMELINE_VERTICAL_SHIFT + ACTIVE_TIMELINE_VERTICAL_SHIFT;\n\n\t\t\treturn {\n\t\t\t\t...this.progressPosition,\n\t\t\t\t'background-position-y': `-${shift}px`,\n\t\t\t};\n\t\t},\n\t\ttimelineStyles()\n\t\t{\n\t\t\tconst TIMELINE_VERTICAL_SHIFT = 44;\n\n\t\t\tconst shift = this.timelineType * TIMELINE_VERTICAL_SHIFT;\n\n\t\t\treturn {\n\t\t\t\t'background-position-y': `-${shift}px`,\n\t\t\t};\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"bx-im-audio-player__container bx-im-audio-player__scope\" \n\t\t\tref=\"body\"\n\t\t\t@mouseover=\"showContextButton = true\"\n\t\t\t@mouseleave=\"showContextButton = false\"\n\t\t>\n\t\t\t<div class=\"bx-im-audio-player__control-container\">\n\t\t\t\t<button :class=\"['bx-im-audio-player__control-button', {\n\t\t\t\t\t'bx-im-audio-player__control-loader': loading,\n\t\t\t\t\t'bx-im-audio-player__control-play': !loading && state !== State.play,\n\t\t\t\t\t'bx-im-audio-player__control-pause': !loading && state === State.play,\n\t\t\t\t}]\" @click=\"clickToButton\"></button>\n\t\t\t\t<div v-if=\"withAvatar\" class=\"bx-im-audio-player__author-avatar-container\">\n\t\t\t\t\t<Avatar :dialogId=\"fileAuthorDialogId\" :withStatus=\"false\" :size=\"AvatarSize.XS\"></Avatar>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-audio-player__timeline-container\">\n\t\t\t\t<div class=\"bx-im-audio-player__track-container\" @click=\"setPosition\" ref=\"track\">\n\t\t\t\t\t<div class=\"bx-im-audio-player__track-mask\" :style=\"timelineStyles\"></div>\n\t\t\t\t\t<div class=\"bx-im-audio-player__track-mask --active\" :style=\"activeTimelineStyles\"></div>\n\t\t\t\t\t<div class=\"bx-im-audio-player__track-seek\" :style=\"seekPosition\"></div>\n\t\t\t\t\t<div class=\"bx-im-audio-player__track-event\" @mousemove=\"seeking\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-audio-player__timer-container\">\n\t\t\t\t\t{{fileSize}}, {{labelTime}}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<button\n\t\t\t\tv-if=\"showContextButton && withContextMenu\"\n\t\t\t\tclass=\"bx-im-messenger__context-menu-icon bx-im-audio-player__context-menu-button\"\n\t\t\t\t@click=\"$emit('contextMenuClick', $event)\"\n\t\t\t></button>\n\t\t\t<audio \n\t\t\t\tv-if=\"src\" \n\t\t\t\t:src=\"src\" \n\t\t\t\tclass=\"bx-im-audio-player__audio-source\" \n\t\t\t\tref=\"source\" \n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouter('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouter('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`,\n});\n","import { BitrixVue } from 'ui.vue3';\n\nimport { highlightText } from 'im.v2.lib.text-highlighter';\nimport { ChatTitle } from '../registry';\n\n// @vue/component\nexport const ChatTitleWithHighlighting = BitrixVue.cloneComponent(ChatTitle, {\n\tname: 'ChatTitleWithHighlighting',\n\tprops: {\n\t\ttextToHighlight: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t\t{\n\t\t\tdialogName(): string\n\t\t\t{\n\t\t\t\t// noinspection JSUnresolvedVariable\n\t\t\t\treturn highlightText(this.parentDialogName, this.textToHighlight);\n\t\t\t},\n\t\t},\n});\n","import { Utils } from 'im.v2.lib.utils';\n\nimport './search-input.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const SearchInput = {\n\tname: 'SearchInput',\n\tprops: {\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tsearchMode: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithIcon: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tdelayForFocusOnStart: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\temits: ['queryChange', 'inputFocus', 'inputBlur', 'keyPressed', 'close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tquery: '',\n\t\t\thasFocus: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tisEmptyQuery(): boolean\n\t\t{\n\t\t\treturn this.query.length === 0;\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tsearchMode(newValue: boolean)\n\t\t{\n\t\t\tif (newValue === true)\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.query = '';\n\t\t\t\tthis.blur();\n\t\t\t}\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (this.delayForFocusOnStart > 0)\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.focus();\n\t\t\t}, this.delayForFocusOnStart);\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonInputUpdate()\n\t\t{\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t},\n\t\tonFocus()\n\t\t{\n\t\t\tthis.focus();\n\t\t\tthis.$emit('inputFocus');\n\t\t},\n\t\tonCloseClick()\n\t\t{\n\t\t\tthis.query = '';\n\t\t\tthis.hasFocus = false;\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tonClearInput()\n\t\t{\n\t\t\tthis.query = '';\n\t\t\tthis.focus();\n\t\t\tthis.$emit('queryChange', this.query);\n\t\t},\n\t\tonKeyUp(event: KeyboardEvent)\n\t\t{\n\t\t\tif (Utils.key.isCombination(event, 'Escape'))\n\t\t\t{\n\t\t\t\tthis.onEscapePressed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('keyPressed', event);\n\t\t},\n\t\tonEscapePressed()\n\t\t{\n\t\t\tif (this.isEmptyQuery)\n\t\t\t{\n\t\t\t\tthis.onCloseClick();\n\t\t\t\tthis.blur();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onClearInput();\n\t\t\t}\n\t\t},\n\t\tfocus()\n\t\t{\n\t\t\tthis.hasFocus = true;\n\t\t\tthis.$refs.searchInput.focus();\n\t\t},\n\t\tblur()\n\t\t{\n\t\t\tthis.hasFocus = false;\n\t\t\tthis.$refs.searchInput.blur();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-search-input__scope bx-im-search-input__container\" :class=\"{'--has-focus': hasFocus}\">\n\t\t\t<div v-if=\"withIcon && !hasFocus\" class=\"bx-im-search-input__search-icon\"></div>\n\t\t\t<input\n\t\t\t\t@focus=\"onFocus\"\n\t\t\t\t@input=\"onInputUpdate\"\n\t\t\t\t@keyup=\"onKeyUp\"\n\t\t\t\tv-model=\"query\"\n\t\t\t\tclass=\"bx-im-search-input__element\"\n\t\t\t\t:class=\"{'--with-icon': withIcon}\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\tref=\"searchInput\"\n\t\t\t/>\n\t\t\t<div v-if=\"hasFocus\" class=\"bx-im-search-input__close-icon\" @click=\"onCloseClick\"></div>\n\t\t</div>\n\t`,\n};\n"],"names":["UserStatusSize","S","M","L","XL","XXL","UserStatus","name","props","status","type","String","required","validator","value","Object","values","UserStatusType","includes","size","default","data","computed","containerClasses","toLowerCase","template","AvatarSize","freeze","XS","XXXL","Avatar","components","dialogId","Number","withAvatarLetters","Boolean","withStatus","withSpecialTypes","withTooltip","imageLoadError","dialog","$store","getters","user","isUser","DialogType","isBot","bot","isSpecialType","commonTypes","chat","open","containerTitle","classes","push","typeClass","backgroundColorStyle","backgroundColor","color","avatarText","isEnoughSizeForText","Utils","text","getFirstLetters","userStatusIcon","id","Core","getUserId","isEnoughSizeForStatus","online","userStatusSize","sizesMap","avatarSizesWithText","toUpperCase","avatarUrl","avatar","hasImage","watch","methods","onImageLoadError","RecentLoadingState","compactMode","itemsToShow","isThreeLineVersion","Math","random","DialogSpecialType","extranet","network","support24","TitleIcons","absent","birthday","ChatTitle","showItsYou","withLeftIcon","withColor","withMute","onlyFirstName","twoLine","botType","isSelfChat","dialogName","resultText","firstName","Text","encode","dialogSpecialType","isExtranet","support24Notifier","support24Question","isNetwork","leftIcon","showBirthdays","isBirthday","isAbsent","specialColor","isChatMuted","isMuted","muteList","find","element","tooltipText","$Bitrix","Loc","getMessage","Settings","recent","showBirthday","ButtonSize","ButtonColor","Primary","PrimaryLight","Success","Danger","LightBorder","DangerBorder","PrimaryBorder","Link","ButtonIcon","Plus","Call","EndCall","AddUser","Camera","Button","icon","customColorScheme","borderColor","iconColor","textColor","hoverColor","isRounded","isDisabled","isLoading","isUppercase","emits","buttonStyles","result","hasCustomColorScheme","buttonClasses","iconStyles","iconClasses","Type","isStringFilled","onClick","event","$emit","POPUP_CONTAINER_PREFIX","POPUP_BORDER_RADIUS","MessengerPopup","config","popupContainer","created","Logger","warn","instance","getPopupInstance","show","mounted","adjustPosition","forceBindPosition","position","getPopupConfig","bindOptions","beforeUnmount","closePopup","PopupManager","getPopupById","destroy","Popup","getDefaultConfig","offsetTop","offsetLeft","className","cacheable","closeIcon","autoHide","closeByEsc","animation","events","onPopupClose","bind","onPopupDestroy","contentBorderRadius","defaultConfig","modifiedOptions","defaultClassName","isNumber","enableAutoHide","setAutoHide","disableAutoHide","MenuItemIcon","channel","conference","disk","upload","file","task","meeting","summary","vote","aiText","aiImage","MenuItem","title","subtitle","disabled","counter","formattedCounter","ID_PREFIX","MessengerMenu","getUuidV4","AttachDelimiter","Color","transparent","internalConfig","styles","DELIMITER","COLOR","SIZE","width","AttachFileItem","fileName","NAME","fileSize","link","LINK","fileShortName","NAME_MAX_LENGTH","getShortFileName","formattedFileSize","formatFileSize","fileIcon","getIconTypeByFilename","openLink","window","AttachFile","AttachGridItemDisplayType","block","line","row","DisplayType","AttachGridItem","display","DISPLAY","WIDTH","VALUE","Parser","decodeText","AttachGrid","AttachHtml","html","decodeHtml","HTML","MAX_IMAGE_SIZE","AttachImageItem","directives","lazyload","height","HEIGHT","preview","PREVIEW","source","imageSize","aspectRatio","sizes","backgroundSize","lazyLoadCallback","Dom","style","offsetWidth","offsetHeight","AttachImage","AttachLinkItem","description","DESC","content","imageConfig","IMAGE","AttachLink","AttachMessage","message","MESSAGE","RichService","constructor","getRestClient","getStore","deleteRichLink","attachId","dispatch","messageId","callMethod","RestMethod","imV2ChatMessageDeleteRichUrl","catch","error","console","AttachRichItem","inject","convertHtmlEntities","canShowDeleteIcon","authorId","deleteRichLinkTitle","AttachRich","AVATAR_TYPE","AttachUserItem","AVATAR","avatarType","avatarTypeClass","avatarTypeStyle","AttachUser","PropertyToComponentMap","AttachType","Delimiter","File","Grid","Html","Image","Message","Rich","User","Attach","baseColor","base","blocks","BLOCKS","hasRichLink","some","getComponentForBlock","blockType","keys","ChatInfoContent","hasError","isChat","chatType","openChatButtonText","userProfileLink","getProfileLink","chatService","ChatService","loadChat","then","onOpenChat","Messenger","openChat","onClickVideoCall","startVideoCall","POPUP_ID","ChatInfoPopup","showPopup","bindElement","minWidth","targetContainer","document","body","padding","angle","UserListService","UserManager","loadUsers","userIds","imUserListGet","ID","response","setUsersToModel","LOADER_SIZE","LOADER_TYPE","Loader","loader","UILoader","target","$refs","render","hide","UserItem","userId","userDialogId","toString","userStatusClasses","onUserClick","UserListContent","Array","adjustPopupFunction","Function","loading","isLoadingUsers","$nextTick","needUserRequest","requestUserData","getUserListService","userListService","getUser","loc","phraseCode","UserListPopup","withAngle","forceTop","ButtonType","newline","button","Keyboard","buttons","isMobile","platform","isBlocked","localButtons","prepareButtons","clearTimeout","recoverStateButton","click","DISABLED","ACTION","ACTION_VALUE","action","params","botId","BOT_ID","FUNCTION","execFunction","replace","eval","APP_ID","isBitrixMobile","app","openNewPage","WAIT","BLOCK","command","COMMAND","COMMAND_PARAMS","setTimeout","getStyles","BG_COLOR","TEXT_COLOR","filter","CONTEXT","Dropdown","items","selectedElement","menuOpened","formattedItems","map","forEach","item","defaultItem","menuInstance","toggleMenu","getMenuInstance","close","container","clientWidth","getPopupWindow","setWidth","MenuManager","create","getMenuItems","onClose","onclick","SpinnerSize","XXS","SpinnerColor","grey","blue","Spinner","sizeClassName","colorClassName","ToggleSize","Toggle","isEnabled","toggle","ARROW_CONTROL_SIZE","TabsColorScheme","white","gray","MessengerTabs","colorScheme","tabs","hasLeftControl","hasRightControl","currentElementIndex","highlightOffsetLeft","highlightWidth","isFirstCall","highlightStyle","left","colorSchemeClass","newIndex","updateHighlightPosition","scrollToElement","savedTabIndex","localStorage","getItem","scrollWidth","parseInt","setItem","getElementNodeByIndex","index","children","node","hasClass","elementIndex","scroll","behavior","onTabClick","isSelectedTab","onLeftClick","onRightClick","length","updateControlsVisibility","scrollLeft","AudioPlayer","BitrixVue","cloneComponent","UIAudioPlayer","timelineType","withContextMenu","withAvatar","parentData","showContextButton","fileAuthorDialogId","progressPosition","loaded","state","AudioPlayerState","none","progressInPixel","activeTimelineStyles","TIMELINE_VERTICAL_SHIFT","ACTIVE_TIMELINE_VERTICAL_SHIFT","shift","timelineStyles","ChatTitleWithHighlighting","textToHighlight","highlightText","parentDialogName","SearchInput","placeholder","searchMode","withIcon","delayForFocusOnStart","query","hasFocus","isEmptyQuery","newValue","focus","blur","onInputUpdate","onFocus","onCloseClick","onClearInput","onKeyUp","key","isCombination","onEscapePressed","searchInput"],"mappings":"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"}