{"version":3,"file":"search-input.bundle.js","sources":["../src/search-input.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\n\nimport {EventType} from 'im.v2.const';\nimport {Utils} from 'im.v2.lib.utils';\n\nimport './css/search-input.css';\n\n// @vue/component\nexport const SearchInput = {\n\tprops: {\n\t\tsearchMode: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: ['closeSearch', 'openSearch', 'updateSearch'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisActive: false,\n\t\t\tsearchQuery: ''\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tisEmptyQuery(): boolean\n\t\t{\n\t\t\treturn this.searchQuery.length === 0;\n\t\t}\n\t},\n\twatch:\n\t{\n\t\tsearchMode(newValue: boolean, oldValue: boolean)\n\t\t{\n\t\t\tif (newValue === true && oldValue === false)\n\t\t\t{\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.search.close, this.onCloseClick);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.search.close, this.onCloseClick);\n\t},\n\tmethods:\n\t{\n\t\tonInputClick()\n\t\t{\n\t\t\tthis.isActive = true;\n\t\t\tthis.$emit('openSearch');\n\t\t},\n\t\tonCloseClick()\n\t\t{\n\t\t\tthis.isActive = false;\n\t\t\tthis.searchQuery = '';\n\t\t\tthis.$emit('closeSearch');\n\t\t},\n\t\tonClearInput()\n\t\t{\n\t\t\tthis.isActive = true;\n\t\t\tthis.searchQuery = '';\n\t\t\tthis.$emit('updateSearch', this.searchQuery);\n\t\t},\n\t\tonInputUpdate()\n\t\t{\n\t\t\tthis.isActive = true;\n\t\t\tthis.$emit('updateSearch', this.searchQuery);\n\t\t},\n\t\tonKeyUp(event: KeyboardEvent)\n\t\t{\n\t\t\tif (Utils.key.isCombination(event, 'Escape'))\n\t\t\t{\n\t\t\t\tthis.onEscapePressed();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.search.keyPressed, {keyboardEvent: event});\n\t\t},\n\t\tonEscapePressed()\n\t\t{\n\t\t\tif (this.isEmptyQuery)\n\t\t\t{\n\t\t\t\tthis.onCloseClick();\n\t\t\t\tthis.$refs['searchInput'].blur();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.onClearInput();\n\t\t\t}\n\t\t},\n\t\tfocus()\n\t\t{\n\t\t\tthis.isActive = true;\n\t\t\tthis.$refs.searchInput.focus();\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-search-input__scope bx-im-search-input__container\">\n\t\t\t<div class=\"bx-im-search-input__search-icon\"></div>\n\t\t\t<input\n\t\t\t\t@click=\"onInputClick\"\n\t\t\t\t@input=\"onInputUpdate\"\n\t\t\t\t@keyup=\"onKeyUp\"\n\t\t\t\tv-model=\"searchQuery\"\n\t\t\t\tclass=\"bx-im-search-input__element\"\n\t\t\t\t:placeholder=\"$Bitrix.Loc.getMessage('IM_SEARCH_INPUT_PLACEHOLDER')\"\n\t\t\t\tref=\"searchInput\"\n\t\t\t/>\n\t\t\t<div v-if=\"isActive\" @click=\"onCloseClick\" class=\"bx-im-search-input__close-icon\"></div>\n\t\t</div>\n\t`\n};"],"names":["SearchInput","props","searchMode","type","Boolean","required","emits","data","isActive","searchQuery","computed","isEmptyQuery","length","watch","newValue","oldValue","focus","created","EventEmitter","subscribe","EventType","search","close","onCloseClick","beforeUnmount","unsubscribe","methods","onInputClick","$emit","onClearInput","onInputUpdate","onKeyUp","event","Utils","key","isCombination","onEscapePressed","emit","keyPressed","keyboardEvent","$refs","blur","searchInput","template"],"mappings":";;;;;;;CAOA;AACA,OAAaA,WAAW,GAAG;GAC1BC,KAAK,EAAE;KACNC,UAAU,EAAE;OACXC,IAAI,EAAEC,OAAO;OACbC,QAAQ,EAAE;;IAEX;GACDC,KAAK,EAAE,CAAC,aAAa,EAAE,YAAY,EAAE,cAAc,CAAC;GACpDC,IAAI,GACJ;KACC,OAAO;OACNC,QAAQ,EAAE,KAAK;OACfC,WAAW,EAAE;MACb;IACD;GACDC,QAAQ,EACR;KACCC,YAAY,GACZ;OACC,OAAO,IAAI,CAACF,WAAW,CAACG,MAAM,KAAK,CAAC;;IAErC;GACDC,KAAK,EACL;KACCX,UAAU,CAACY,QAAiB,EAAEC,QAAiB,EAC/C;OACC,IAAID,QAAQ,KAAK,IAAI,IAAIC,QAAQ,KAAK,KAAK,EAC3C;SACC,IAAI,CAACC,KAAK,EAAE;;;IAGd;GACDC,OAAO,GACP;KACCC,6BAAY,CAACC,SAAS,CAACC,qBAAS,CAACC,MAAM,CAACC,KAAK,EAAE,IAAI,CAACC,YAAY,CAAC;IACjE;GACDC,aAAa,GACb;KACCN,6BAAY,CAACO,WAAW,CAACL,qBAAS,CAACC,MAAM,CAACC,KAAK,EAAE,IAAI,CAACC,YAAY,CAAC;IACnE;GACDG,OAAO,EACP;KACCC,YAAY,GACZ;OACC,IAAI,CAACnB,QAAQ,GAAG,IAAI;OACpB,IAAI,CAACoB,KAAK,CAAC,YAAY,CAAC;MACxB;KACDL,YAAY,GACZ;OACC,IAAI,CAACf,QAAQ,GAAG,KAAK;OACrB,IAAI,CAACC,WAAW,GAAG,EAAE;OACrB,IAAI,CAACmB,KAAK,CAAC,aAAa,CAAC;MACzB;KACDC,YAAY,GACZ;OACC,IAAI,CAACrB,QAAQ,GAAG,IAAI;OACpB,IAAI,CAACC,WAAW,GAAG,EAAE;OACrB,IAAI,CAACmB,KAAK,CAAC,cAAc,EAAE,IAAI,CAACnB,WAAW,CAAC;MAC5C;KACDqB,aAAa,GACb;OACC,IAAI,CAACtB,QAAQ,GAAG,IAAI;OACpB,IAAI,CAACoB,KAAK,CAAC,cAAc,EAAE,IAAI,CAACnB,WAAW,CAAC;MAC5C;KACDsB,OAAO,CAACC,KAAoB,EAC5B;OACC,IAAIC,qBAAK,CAACC,GAAG,CAACC,aAAa,CAACH,KAAK,EAAE,QAAQ,CAAC,EAC5C;SACC,IAAI,CAACI,eAAe,EAAE;SAEtB;;OAGDlB,6BAAY,CAACmB,IAAI,CAACjB,qBAAS,CAACC,MAAM,CAACiB,UAAU,EAAE;SAACC,aAAa,EAAEP;QAAM,CAAC;MACtE;KACDI,eAAe,GACf;OACC,IAAI,IAAI,CAACzB,YAAY,EACrB;SACC,IAAI,CAACY,YAAY,EAAE;SACnB,IAAI,CAACiB,KAAK,CAAC,aAAa,CAAC,CAACC,IAAI,EAAE;QAChC,MAED;SACC,IAAI,CAACZ,YAAY,EAAE;;MAEpB;KACDb,KAAK,GACL;OACC,IAAI,CAACR,QAAQ,GAAG,IAAI;OACpB,IAAI,CAACgC,KAAK,CAACE,WAAW,CAAC1B,KAAK,EAAE;;IAE/B;GACD2B,QAAQ,EAAG;;;;;;;;;;;;;;;CAeZ,CAAC;;;;;;;;"}