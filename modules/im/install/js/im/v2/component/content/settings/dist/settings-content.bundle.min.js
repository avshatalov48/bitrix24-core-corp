this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,n,i,s,o,c,a,r,l,g,d,_,S){"use strict";const m={appearance:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_APPEARANCE"),icon:"fa-solid fa-brush"},notification:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_NOTIFICATION"),icon:"fa-solid fa-bell"},hotkey:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_HOTKEY"),icon:"fa-solid fa-keyboard"},message:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_MESSAGE"),icon:"fa-solid fa-message"},recent:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_RECENT"),icon:"fa-solid fa-list-ul"},desktop:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_DESKTOP"),icon:"fa-solid fa-desktop"},help:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_HELP"),icon:"fa-solid fa-question"},feedback:{name:l.Loc.getMessage("IM_CONTENT_SETTINGS_SECTION_LIST_FEEDBACK"),icon:"fa-solid fa-comment"}};const h={help:"help",feedback:"feedback"};const T={name:"SectionList",props:{activeSection:{type:String,required:true}},emits:["sectionClick"],data(){return{}},computed:{AdditionalSections:()=>h,disabledSections(){const t=new Set([_.SettingsSection.message]);if(!g.DesktopApi.isDesktop()){t.add(_.SettingsSection.desktop)}return t},sections(){return Object.keys(_.Settings).filter((t=>!this.disabledSections.has(t)))}},methods:{getSectionName(t){return m[t].name},getSectionIconClass(t){return m[t].icon},onHelpClick(){var t;const e="17373696";(t=BX.Helper)==null?void 0:t.show(`redirect=detail&code=${e}`)},onFeedbackClick(){BX.UI.Feedback.Form.open({id:"im-v2-feedback",forms:[{zones:["ru"],id:550,sec:"50my2x",lang:"ru"},{zones:["en"],id:560,sec:"621lbr",lang:"ru"}],presets:{sender_page:"profile"}})},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-list__container">\n\t\t\t<div class="bx-im-settings-section-list__title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_SECTION_LIST_TITLE') }}\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\tv-for="section in sections"\n\t\t\t\t:key="section"\n\t\t\t\tclass="bx-im-settings-section-list__item"\n\t\t\t\t:class="{'--active': section === activeSection}"\n\t\t\t\t@click="$emit('sectionClick', section)"\n\t\t\t>\n\t\t\t\t<div class="bx-im-settings-section-list__item_icon">\n\t\t\t\t\t<i :class="getSectionIconClass(section)"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-settings-section-list__item_title">{{ getSectionName(section) }}</div>\n\t\t\t</div>\n\t\t\t\x3c!-- Help --\x3e\n\t\t\t<div\n\t\t\t\tclass="bx-im-settings-section-list__item"\n\t\t\t\t@click="onHelpClick"\n\t\t\t>\n\t\t\t\t<div class="bx-im-settings-section-list__item_icon">\n\t\t\t\t\t<i :class="getSectionIconClass(AdditionalSections.help)"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-settings-section-list__item_title">{{ getSectionName(AdditionalSections.help) }}</div>\n\t\t\t</div>\n\t\t\t\x3c!-- Feedback --\x3e\n\t\t\t<div\n\t\t\t\tclass="bx-im-settings-section-list__item"\n\t\t\t\t@click="onFeedbackClick"\n\t\t\t>\n\t\t\t\t<div class="bx-im-settings-section-list__item_icon">\n\t\t\t\t\t<i :class="getSectionIconClass(AdditionalSections.feedback)"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-settings-section-list__item_title">{{ getSectionName(AdditionalSections.feedback) }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const p={name:"ChatBackground",emits:["close"],computed:{currentBackgroundId(){return this.$store.getters["application/settings/get"](_.Settings.appearance.background).toString()},backgroundIdList(){return Object.keys(s.ThemeColorScheme)}},methods:{getBackgroundStyleById(t){return s.ThemeManager.getBackgroundStyleById(t)},onBackgroundClick(t){const e=Number.parseInt(t,10);const n=new S.SettingsService;n.changeSetting(_.Settings.appearance.background,e)}},template:`\n\t\t<div class="bx-im-settings-background__container">\n\t\t\t<div class="bx-im-settings-background__list">\n\t\t\t\t<div\n\t\t\t\t\tv-for="id in backgroundIdList"\n\t\t\t\t\t:key="id"\n\t\t\t\t\t:style="getBackgroundStyleById(id)"\n\t\t\t\t\tclass="bx-im-background-select-popup__item bx-im-settings-background__item"\n\t\t\t\t\t:class="{'--active': id === currentBackgroundId}"\n\t\t\t\t\t@click="onBackgroundClick(id)"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t</div>\n\t`};const v={name:"ChatAlignment",emits:["close"],computed:{DialogAlignment:()=>_.DialogAlignment,currentOptionId(){return this.$store.getters["application/settings/get"](_.Settings.appearance.alignment)},backgroundStyle(){return s.ThemeManager.getCurrentBackgroundStyle()}},methods:{onOptionClick(t){this.getSettingsService().changeSetting(_.Settings.appearance.alignment,t)},getSettingsService(){if(!this.settingsService){this.settingsService=new S.SettingsService}return this.settingsService}},template:`\n\t\t<div class="bx-im-settings-alignment__container">\n\t\t\t<div class="bx-im-settings-alignment__list">\n\t\t\t\t<div\n\t\t\t\t\tclass="bx-im-settings-alignment__item --left"\n\t\t\t\t\t:class="{'--active': currentOptionId === DialogAlignment.left}"\n\t\t\t\t\t:style="backgroundStyle"\n\t\t\t\t\t@click="onOptionClick(DialogAlignment.left)"\n\t\t\t\t>\n\t\t\t\t\t<div class="bx-im-settings-alignment__item_content"></div>\n\t\t\t\t\t<div v-if="currentOptionId === DialogAlignment.left" class="bx-im-settings-alignment__item_checkmark"></div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="bx-im-settings-alignment__item --center"\n\t\t\t\t\t:class="{'--active': currentOptionId === DialogAlignment.center}"\n\t\t\t\t\t:style="backgroundStyle"\n\t\t\t\t\t@click="onOptionClick(DialogAlignment.center)"\n\t\t\t\t>\n\t\t\t\t\t<div class="bx-im-settings-alignment__item_content"></div>\n\t\t\t\t\t<div v-if="currentOptionId === DialogAlignment.center" class="bx-im-settings-alignment__item_checkmark"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const u="settings";const I={dialogId:u,chatId:-1,type:_.DialogType.chat,inited:true,role:_.UserRole.guest};const N={id:-1,name:l.Loc.getMessage("IM_CONTENT_SETTINGS_DEMO_CHAT_USER_NAME")};const b={id:-3,chatId:I.chatId,authorId:N.id,text:l.Loc.getMessage("IM_CONTENT_SETTINGS_DEMO_CHAT_MESSAGE_1"),viewedByOthers:true};const C={id:-2,chatId:I.chatId,authorId:o.Core.getUserId(),replyId:b.id,text:l.Loc.getMessage("IM_CONTENT_SETTINGS_DEMO_CHAT_MESSAGE_2"),viewedByOthers:true};const O={id:-1,chatId:I.chatId,authorId:N.id,text:l.Loc.getMessage("IM_CONTENT_SETTINGS_DEMO_CHAT_MESSAGE_3"),viewedByOthers:true};const E={initModels(){o.Core.getStore().dispatch("dialogues/set",I);const t=new c.UserManager;t.addUsersToModel([N]);const e=[b,C,O];o.Core.getStore().dispatch("messages/setChatCollection",{messages:e})}};const k={name:"AppearanceSection",components:{ChatDialog:i.ChatDialog,ChatBackground:p,ChatAlignment:v},data(){return{}},computed:{containerClasses(){const t=this.$store.getters["application/settings/get"](_.Settings.appearance.alignment);return[`--${t}-align`]},backgroundStyle(){return s.ThemeManager.getCurrentBackgroundStyle()}},created(){E.initModels()},methods:{loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-content-chat__container bx-im-settings-appearance__demo-chat_container" :class="containerClasses" :style="backgroundStyle">\n\t\t\t\t<ChatDialog :dialogId="'settings'" />\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_APPEARANCE_BACKGROUND') }}\n\t\t\t</div>\n\t\t\t<ChatBackground />\n\t\t</div>\n\t\t<div class="bx-im-settings-section-content__separator"></div>\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_APPEARANCE_ALIGNMENT') }}\n\t\t\t</div>\n\t\t\t<ChatAlignment />\n\t\t</div>\n\t`};const x={name:"CheckboxOption",props:{value:{type:Boolean,required:true},text:{type:String,required:true}},emits:["change"],data(){return{}},methods:{onInput(t){this.$emit("change",t.target.checked)}},template:`\n\t\t<div class="bx-im-settings-checkbox__container bx-im-settings-section-content__block_option">\n\t\t\t<label class="ui-ctl ui-ctl-checkbox">\n\t\t\t\t<input type="checkbox" :checked="value" @input="onInput" class="ui-ctl-element">\n\t\t\t\t<div class="ui-ctl-label-text">{{ text }}</div>\n\t\t\t</label>\n\t\t</div>\n\t`};const M={name:"NotificationSection",components:{CheckboxOption:x},data(){return{}},computed:{enableSound(){return this.$store.getters["application/settings/get"](_.Settings.notification.enableSound)}},methods:{onEnableSoundChange(t){this.getSettingsService().changeSetting(_.Settings.notification.enableSound,t)},getSettingsService(){if(!this.settingsService){this.settingsService=new S.SettingsService}return this.settingsService},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_NOTIFICATION_BLOCK_SOUND') }}\n\t\t\t</div>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="enableSound"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_NOTIFICATION_ENABLE_SOUND')"\n\t\t\t\t@change="onEnableSoundChange"\n\t\t\t/>\n\t\t</div>\n\t`};const B={name:"RadioOption",props:{items:{type:Array,required:true}},emits:["change"],data(){return{groupName:l.Text.getRandom()}},computed:{options(){return this.items},selectedValue(){return this.options.find((t=>t.selected===true))}},methods:{onInput(t){this.$emit("change",t.value)}},template:`\n\t\t<div class="bx-im-settings-radio__container bx-im-settings-section-content__block_option">\n\t\t\t<label v-for="option in options" class="ui-ctl ui-ctl-radio">\n\t\t\t\t<input type="radio" class="ui-ctl-element" :name="groupName" :checked="option.selected" @input="onInput(option)">\n\t\t\t\t<div class="bx-im-settings-radio__label ui-ctl-label-text">\n\t\t\t\t\t\x3c!-- Text --\x3e\n\t\t\t\t\t<div v-if="option.html" class="bx-im-settings-radio__label_title" v-html="option.text"></div>\n\t\t\t\t\t<div v-else class="bx-im-settings-radio__label_title">{{ option.text }}</div>\n\t\t\t\t\t\x3c!-- Subtext --\x3e\n\t\t\t\t\t<template v-if="option.subtext">\n\t\t\t\t\t\t<div v-if="option.html" class="bx-im-settings-radio__label_subtitle" v-html="option.subtext"></div>\n\t\t\t\t\t\t<div v-else class="bx-im-settings-radio__label_subtitle">{{ option.subtext }}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t`};const A={name:"HotkeySection",components:{RadioOption:B},data(){return{}},computed:{sendByEnter(){return this.$store.getters["application/settings/get"](_.Settings.hotkey.sendByEnter)},sendCombinationItems(){const t=r.Utils.platform.isMac()?"&#8984;":"Ctrl";const e=this.loc("IM_CONTENT_SETTINGS_OPTION_HOTKEY_NEW_LINE",{"#HOTKEY#":"Shift + Enter"});const n=this.loc("IM_CONTENT_SETTINGS_OPTION_HOTKEY_NEW_LINE",{"#HOTKEY#":"Enter"});return[{value:true,text:"Enter",subtext:e,selected:this.sendByEnter===true},{value:false,text:`${t} + Enter`,subtext:n,html:true,selected:this.sendByEnter===false}]},isMac(){return r.Utils.platform.isMac()}},methods:{onSendByEnterChange(t){this.getSettingsService().changeSetting(_.Settings.hotkey.sendByEnter,t)},getSettingsService(){if(!this.settingsService){this.settingsService=new S.SettingsService}return this.settingsService},loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)}},template:`\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_HOTKEY_SEND_COMBINATION') }}\n\t\t\t</div>\n\t\t\t<RadioOption\n\t\t\t\t:items="sendCombinationItems"\n\t\t\t\t@change="onSendByEnterChange"\n\t\t\t/>\n\t\t</div>\n\t`};const y={name:"RecentSection",components:{CheckboxOption:x},data(){return{}},computed:{showBirthday(){return this.$store.getters["application/settings/get"](_.Settings.recent.showBirthday)},showInvited(){return this.$store.getters["application/settings/get"](_.Settings.recent.showInvited)},showLastMessage(){return this.$store.getters["application/settings/get"](_.Settings.recent.showLastMessage)}},methods:{onShowBirthdayChange(t){this.getSettingsService().changeSetting(_.Settings.recent.showBirthday,t)},onShowInvitedChange(t){this.getSettingsService().changeSetting(_.Settings.recent.showInvited,t)},onShowLastMessageChange(t){this.getSettingsService().changeSetting(_.Settings.recent.showLastMessage,t)},getSettingsService(){if(!this.settingsService){this.settingsService=new S.SettingsService}return this.settingsService},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<CheckboxOption\n\t\t\t\t:value="showBirthday"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_RECENT_SHOW_BIRTHDAY')"\n\t\t\t\t@change="onShowBirthdayChange"\n\t\t\t/>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="showInvited"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_RECENT_SHOW_INVITED')"\n\t\t\t\t@change="onShowInvitedChange"\n\t\t\t/>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="showLastMessage"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_RECENT_SHOW_TEXT')"\n\t\t\t\t@change="onShowLastMessageChange"\n\t\t\t/>\n\t\t</div>\n\t`};const L={name:"DesktopSection",components:{CheckboxOption:x},data(){return{}},computed:{twoWindowMode(){return g.DesktopApi.isTwoWindowMode()},autoStartDesktop(){return g.DesktopApi.getAutostartStatus()},openChatInDesktop(){return this.$store.getters["application/settings/get"](_.Settings.desktop.enableRedirect)},openLinksInSlider(){const t=g.DesktopApi.getCustomSetting(g.DesktopSettingsKey.sliderBindingsStatus,"1");return t==="1"},sendTelemetry(){return g.DesktopApi.getTelemetryStatus()}},methods:{async onTwoWindowModeChange(t){g.DesktopApi.setTwoWindowMode(t);if(!g.DesktopApi.isFeatureSupported(g.DesktopFeature.restart.id)){void d.showDesktopConfirm();return}const e=await d.showDesktopRestartConfirm();if(e===true){g.DesktopApi.restart()}},onAutoStartDesktopChange(t){g.DesktopApi.setAutostartStatus(t)},onOpenChatInDesktopChange(t){this.getSettingsService().changeSetting(_.Settings.desktop.enableRedirect,t)},onOpenLinksInSliderChange(t){this.setSliderBindingStatus(t);g.DesktopApi.setCustomSetting(g.DesktopSettingsKey.sliderBindingsStatus,t?"1":"0")},onSendTelemetryChange(t){g.DesktopApi.setTelemetryStatus(t)},setSliderBindingStatus(t){if(t===true){BX.SidePanel.Instance.enableAnchorBinding();return}BX.SidePanel.Instance.disableAnchorBinding()},getSettingsService(){if(!this.settingsService){this.settingsService=new S.SettingsService}return this.settingsService},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_BLOCK_STARTUP') }}\n\t\t\t</div>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="twoWindowMode"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_TWO_WINDOW_MODE')"\n\t\t\t\t@change="onTwoWindowModeChange"\n\t\t\t/>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="autoStartDesktop"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_AUTO_START')"\n\t\t\t\t@change="onAutoStartDesktopChange"\n\t\t\t/>\n\t\t</div>\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_BLOCK_LINKS') }}\n\t\t\t</div>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="openChatInDesktop"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_ALWAYS_OPEN_CHAT')"\n\t\t\t\t@change="onOpenChatInDesktopChange"\n\t\t\t/>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="openLinksInSlider"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_OPEN_LINKS_IN_SLIDER')"\n\t\t\t\t@change="onOpenLinksInSliderChange"\n\t\t\t/>\n\t\t</div>\n\t\t<div class="bx-im-settings-section-content__block">\n\t\t\t<div class="bx-im-settings-section-content__block_title">\n\t\t\t\t{{ loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_BLOCK_REST') }}\n\t\t\t</div>\n\t\t\t<CheckboxOption\n\t\t\t\t:value="sendTelemetry"\n\t\t\t\t:text="loc('IM_CONTENT_SETTINGS_OPTION_DESKTOP_SEND_TELEMETRY')"\n\t\t\t\t@change="onSendTelemetryChange"\n\t\t\t/>\n\t\t</div>\n\t`};const D={name:"SectionContent",components:{AppearanceSection:k,NotificationSection:M,HotkeySection:A,RecentSection:y,DesktopSection:L},props:{activeSection:{type:String,required:true}},data(){return{}},computed:{sectionComponentName(){const t=this.activeSection[0].toUpperCase()+this.activeSection.slice(1);const e="Section";return`${t}${e}`},sectionName(){return m[this.activeSection].name},sectionIconClass(){return m[this.activeSection].icon}},methods:{loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-settings-section-content__container">\n\t\t\t<div class="bx-im-settings-section-content__header">\n\t\t\t\t<div class="bx-im-settings-section-content__header_icon">\n\t\t\t\t\t<i :class="sectionIconClass"></i>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-settings-section-content__header_title">{{ sectionName }}</div>\n\t\t\t</div>\n\t\t\t<div class="bx-im-settings-section-content__background">\n\t\t\t\t<div class="bx-im-settings-section-content__body">\n\t\t\t\t\t<component :is="sectionComponentName" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const f={name:"SettingsContent",components:{SectionList:T,SectionContent:D},data(){return{activeSection:""}},computed:{sections(){return Object.keys(_.Settings)}},created(){e.Logger.warn("Content: Openlines created");this.setInitialSection()},methods:{setInitialSection(){this.activeSection=this.sections[0]},onSectionClick(t){this.activeSection=t}},template:`\n\t\t<div class="bx-im-content-settings__container">\n\t\t\t<SectionList :activeSection="activeSection" @sectionClick="onSectionClick" />\n\t\t\t<SectionContent :activeSection="activeSection" />\n\t\t</div>\n\t`};t.SettingsContent=f})(this.BX.Messenger.v2.Component.Content=this.BX.Messenger.v2.Component.Content||{},BX.Messenger.v2.Lib,BX,BX.Messenger.v2.Component.Dialog,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Messenger.v2.Lib,BX,BX.Messenger.v2.Lib,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Messenger.v2.Provider.Service);
//# sourceMappingURL=settings-content.bundle.map.js