{"version":3,"file":"create-chat-content.bundle.js","sources":["../src/components/elements/title-input.js","../src/components/elements/chat-avatar.js","../src/components/elements/chat-members.js","../src/components/elements/button-panel.js","../src/components/sections/section.js","../src/components/sections/settings/settings-section.js","../src/components/sections/rights/owner.js","../src/components/sections/rights/managers.js","../src/components/sections/rights/dropdown-items.js","../src/components/sections/rights/rights-section.js","../src/components/sections/appearance/appearance-section.js","../src/components/group-chat.js","../src/components/sections/conference/conference-section.js","../src/components/conference.js","../src/create-chat-content.js"],"sourcesContent":["import type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const TitleInput = {\n\tname: 'TitleInput',\n\tprops:\n\t{\n\t\tmodelValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tmounted()\n\t{\n\t\tthis.$refs.titleInput.focus();\n\t},\n\tmethods:\n\t{\n\t\tonInput(event: Event)\n\t\t{\n\t\t\tthis.$emit('update:modelValue', event.target.value);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__title_container\">\n\t\t\t<input\n\t\t\t\t:value=\"modelValue\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\tclass=\"bx-im-content-create-chat__title_input\"\n\t\t\t\tref=\"titleInput\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { ChatService } from 'im.v2.provider.service';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const ChatAvatar = {\n\tname: 'ChatAvatar',\n\tprops:\n\t{\n\t\tavatarFile: {\n\t\t\trequired: true,\n\t\t\tvalidator(value): boolean\n\t\t\t{\n\t\t\t\treturn (value instanceof File) || Type.isNull(value);\n\t\t\t},\n\t\t},\n\t\tchatTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['avatarChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tpreparedAvatar(): string | null\n\t\t{\n\t\t\tif (!this.avatarFile)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn URL.createObjectURL(this.avatarFile);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonAvatarChangeClick()\n\t\t{\n\t\t\tthis.$refs.avatarInput.click();\n\t\t},\n\t\tasync onAvatarSelect(event: Event)\n\t\t{\n\t\t\tconst input: HTMLInputElement = event.target;\n\t\t\tconst file: File = input.files[0];\n\t\t\tif (!file)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst preparedAvatar = await this.getChatService().prepareAvatar(file);\n\t\t\tif (!preparedAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('avatarChange', preparedAvatar);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__avatar_container\" @click=\"onAvatarChangeClick\">\n\t\t\t<img v-if=\"preparedAvatar\" class=\"bx-im-content-create-chat__avatar_image\" :src=\"preparedAvatar\" :alt=\"chatTitle\" />\n\t\t</div>\n\t\t<input type=\"file\" @change=\"onAvatarSelect\" accept=\"image/*\" class=\"bx-im-content-create-chat__avatar_input\" ref=\"avatarInput\">\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\n\n// @vue/component\nexport const ChatMembersSelector = {\n\tprops:\n\t{\n\t\tchatMembers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['membersChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcurrentUserId(): number\n\t\t{\n\t\t\treturn Core.getUserId();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst members = this.chatMembers.map((userId: number) => {\n\t\t\treturn ['user', userId];\n\t\t});\n\t\tconst preselectedItems = [['user', this.currentUserId], ...members];\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_USER_SELECTOR_ADD_MEMBERS'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_USER_SELECTOR_ADD_MEMBERS'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t\tundeselectedItems: [['user', this.currentUserId]],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('membersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('membersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.members);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__members\" ref=\"members\"></div>\n\t`,\n};\n","import { Button as MessengerButton, ButtonSize, ButtonColor } from 'im.v2.component.elements';\n\n// @vue/component\nexport const ButtonPanel = {\n\tcomponents: { MessengerButton },\n\tprops:\n\t{\n\t\tisCreating: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcreateButtonTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['create', 'cancel'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__buttons\">\n\t\t\t<div class=\"bx-im-content-create-chat__buttons_create\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t\t:color=\"ButtonColor.Success\"\n\t\t\t\t\t:text=\"createButtonTitle\"\n\t\t\t\t\t:isLoading=\"isCreating\"\n\t\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t\t@click=\"$emit('create')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__buttons_cancel\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t\t:color=\"ButtonColor.Link\"\n\t\t\t\t\t:text=\"loc('IM_CREATE_CHAT_CANCEL')\"\n\t\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t\t@click=\"$emit('cancel')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ExpandAnimation } from 'im.v2.component.animation';\n\nimport '../../css/section.css';\n\n// @vue/component\nexport const CreateChatSection = {\n\tcomponents: { ExpandAnimation },\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFolded: true,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\treturn [`--${this.name}`, { '--active': !this.isFolded }];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonContainerClick()\n\t\t{\n\t\t\tif (this.isFolded)\n\t\t\t{\n\t\t\t\tthis.isFolded = false;\n\t\t\t}\n\t\t},\n\t\tonHeaderClick()\n\t\t{\n\t\t\tif (!this.isFolded)\n\t\t\t{\n\t\t\t\tthis.isFolded = true;\n\t\t\t}\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" class=\"bx-im-content-create-chat__section bx-im-content-create-chat__section_scope\">\n\t\t\t<div @click=\"isFolded = !isFolded\" class=\"bx-im-content-create-chat__section_header\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__section_left\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_icon\"></div>\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_text\">{{ title }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat__section_right\"></div>\t\n\t\t\t</div>\n\t\t\t<ExpandAnimation>\n\t\t\t\t<div v-if=\"!isFolded\" class=\"bx-im-content-create-chat__section_content_container\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_content\">\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ExpandAnimation>\n\t\t</div>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown, Toggle, ToggleSize } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section';\n\n// @vue/component\nexport const SettingsSection = {\n\tcomponents: { CreateChatSection, Dropdown, Toggle },\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithSearchOption: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisAvailableInSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatTypeChange', 'descriptionChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tToggleSize: () => ToggleSize,\n\t\tdescriptionPlaceholderText(): string\n\t\t{\n\t\t\treturn this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION_PLACEHOLDER', {\n\t\t\t\t'#BR#': '\\n',\n\t\t\t\t'#QUOTE_START#': '\"',\n\t\t\t\t'#QUOTE_END#': '\"',\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.$emit('chatTypeChange', isAvailableInSearch);\n\t\t},\n\t\tonDescriptionChange(event: Event)\n\t\t{\n\t\t\tthis.$emit('descriptionChange', event.target.value);\n\t\t},\n\t\tonToggleLabelClick()\n\t\t{\n\t\t\tthis.$refs.toggle.toggle();\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"settings\" :title=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION')\">\n\t\t\t<div v-if=\"withSearchOption\" class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVACY') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__type-select\">\n\t\t\t\t\t<Toggle :size=\"ToggleSize.M\" :isEnabled=\"isAvailableInSearch\" @change=\"onTypeChange\" ref=\"toggle\" />\n\t\t\t\t\t<div @click=\"onToggleLabelClick\" class=\"bx-im-content-create-chat-settings__type-select_label\">\n\t\t\t\t\t\t{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_AVAILABLE_FOR_SEARCH') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\t\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION') }}</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__description_container\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-w100 ui-ctl-no-resize\">\n\t\t\t\t\t\t<textarea\n\t\t\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t\t\t\t:value=\"description\"\n\t\t\t\t\t\t\t:placeholder=\"descriptionPlaceholderText\"\n\t\t\t\t\t\t\tclass=\"bx-im-content-create-chat-settings__description ui-ctl-element\"\n\t\t\t\t\t\t></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\n// @vue/component\nexport const OwnerSelector = {\n\tname: 'OwnerSelector',\n\tprops:\n\t{\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['ownerChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcreated()\n\t{\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tmaxHeight: 33,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems: [['user', this.ownerId]],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\ttag.setDeselectable(false);\n\t\t\t\t},\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.$emit('ownerChange', tag.id);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.owner);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__owner\" ref=\"owner\"></div>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\n\n// @vue/component\nexport const ManagersSelector = {\n\tprops:\n\t{\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['managersChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcurrentUserId(): number\n\t\t{\n\t\t\treturn Core.getUserId();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst preselectedItems = this.managerIds.map((userId: number) => {\n\t\t\treturn ['user', userId];\n\t\t});\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.managers);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__managers\" ref=\"managers\"></div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { UserRole } from 'im.v2.const';\n\nimport type { DropdownItem } from 'im.v2.component.elements';\n\nexport const rightsDropdownItems: DropdownItem[] = [\n\t{\n\t\tvalue: UserRole.member,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MEMBER'),\n\t},\n\t{\n\t\tvalue: UserRole.manager,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MANAGER'),\n\t},\n\t{\n\t\tvalue: UserRole.owner,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_OWNER'),\n\t\tdefault: true,\n\t},\n];\n","import { Dropdown } from 'im.v2.component.elements';\nimport { UserRole, PopupType } from 'im.v2.const';\n\nimport { CreateChatSection } from '../section';\nimport { OwnerSelector } from './owner';\nimport { ManagersSelector } from './managers';\nimport { rightsDropdownItems } from './dropdown-items';\n\nimport type { DropdownItem } from 'im.v2.component.elements';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const RightsSection = {\n\tcomponents: { CreateChatSection, Dropdown, OwnerSelector, ManagersSelector },\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUsers: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageSettings: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUi: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcanPost: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['ownerChange', 'managersChange', 'manageUsersChange', 'manageUiChange', 'canPostChange'],\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tPopupType: () => PopupType,\n\t\tmanageUsersItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageUsers)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t\tmanageUiItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.manageUi)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t\tcanPostItems(): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\tif (item.value === this.canPost)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...item,\n\t\t\t\t\t\tdefault: true,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { ...item };\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.$emit('ownerChange', ownerId);\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.$emit('managersChange', managerIds);\n\t\t},\n\t\tonManageUsersChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUsersChange', newValue);\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUiChange', newValue);\n\t\t},\n\t\tonCanPostChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('canPostChange', newValue);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"rights\" :title=\"loc('IM_CREATE_CHAT_RIGHTS_SECTION')\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_SETTINGS_SECTION_OWNER') }}\n\t\t\t\t</div>\n\t\t\t\t<OwnerSelector :ownerId=\"ownerId\" @ownerChange=\"onOwnerChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGERS') }}\n\t\t\t\t</div>\n\t\t\t\t<ManagersSelector :managerIds=\"managerIds\" @managersChange=\"onManagersChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_USERS') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageUsersItems\" :id=\"PopupType.createChatManageUsersMenu\" @itemChange=\"onManageUsersChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_UI') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"manageUiItems\" :id=\"PopupType.createChatManageUiMenu\" @itemChange=\"onManageUiChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_SENDING') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__manage-select\">\n\t\t\t\t\t<Dropdown :items=\"canPostItems\" :id=\"PopupType.createChatCanPostMenu\" @itemChange=\"onCanPostChange\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { CreateChatSection } from '../section';\n\n// @vue/component\nexport const AppearanceSection = {\n\tcomponents: { CreateChatSection },\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<Section name=\"appearance\" title=\"Appearance\" />\n\t`,\n};\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, DialogType, EventType, Layout, type OnLayoutChangeEvent } from 'im.v2.const';\n\nimport { TitleInput } from './elements/title-input';\nimport { ChatAvatar } from './elements/chat-avatar';\nimport { ChatMembersSelector } from './elements/chat-members';\nimport { ButtonPanel } from './elements/button-panel';\nimport { SettingsSection } from './sections/settings/settings-section';\nimport { RightsSection } from './sections/rights/rights-section';\nimport { AppearanceSection } from './sections/appearance/appearance-section';\n\nimport 'ui.notification';\nimport '../css/create-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const GroupChatCreation = {\n\tname: 'GroupChatCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tButtonPanel,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: false,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsers: '',\n\t\t\t\tmanageSettings: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tcanPost: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(DialogType.chat);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: number[])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsers = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonCanPostChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.canPost = newValue;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst newDialogId = await this.getChatService().createChat({\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmembers: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsers: this.rights.manageUsers,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageSettings: this.rights.manageSettings,\n\t\t\t\tcanPost: this.rights.canPost,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatCanPostMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== DialogType.chat)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsers,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageSettings,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsers = manageUsers;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageSettings = manageSettings;\n\t\t\tthis.rights.canPost = UserRole.member;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__content\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-create-chat__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHAT_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t<SettingsSection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsers=\"rights.manageUsers\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageSettings=\"rights.manageSettings\"\n\t\t\t\t:canPost=\"rights.canPost\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersChange=\"onManageUsersChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@canPostChange=\"onCanPostChange\"\n\t\t\t/> \n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CHAT_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown, Toggle, ToggleSize } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const ConferenceSection = {\n\tcomponents: { CreateChatSection, Dropdown, Toggle },\n\tprops: {\n\t\tpasswordNeeded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tpassword: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['passwordNeededChange', 'passwordChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tToggleSize: () => ToggleSize,\n\t},\n\tmethods:\n\t{\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.$emit('passwordNeededChange', passwordNeeded);\n\t\t},\n\t\tonPasswordChange(event: Event)\n\t\t{\n\t\t\tthis.$emit('passwordChange', event.target.value);\n\t\t},\n\t\tonToggleLabelClick()\n\t\t{\n\t\t\tthis.$refs.toggle.toggle();\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"conference\" :title=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION')\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__heading\">\n\t\t\t\t\t{{ loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PRIVACY') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-content-create-chat-settings__type-select\">\n\t\t\t\t\t<Toggle :size=\"ToggleSize.M\" :isEnabled=\"passwordNeeded\" @change=\"onPasswordNeededChange\" ref=\"toggle\" />\n\t\t\t\t\t<div @click=\"onToggleLabelClick\" class=\"bx-im-content-create-chat-settings__type-select_label\">\n\t\t\t\t\t\t{{ loc('IM_CREATE_CHAT_CONFERENCE_SECTION_USE_PASSWORD') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"passwordNeeded\" class=\"bx-im-content-create-chat-conference__password-container ui-ctl ui-ctl-textbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"bx-im-content-create-chat-conference__password-input ui-ctl-element\"\n\t\t\t\t\t\t:value=\"password\"\n\t\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PASSWORD_PLACEHOLDER')\"\n\t\t\t\t\t\t@input=\"onPasswordChange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, DialogType, EventType, Layout } from 'im.v2.const';\n\nimport { TitleInput } from './elements/title-input';\nimport { ChatAvatar } from './elements/chat-avatar';\nimport { ChatMembersSelector } from './elements/chat-members';\nimport { ButtonPanel } from './elements/button-panel';\nimport { SettingsSection } from './sections/settings/settings-section';\nimport { RightsSection } from './sections/rights/rights-section';\nimport { AppearanceSection } from './sections/appearance/appearance-section';\nimport { ConferenceSection } from './sections/conference/conference-section';\n\nimport 'ui.notification';\nimport '../css/create-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { OnLayoutChangeEvent } from 'im.v2.const';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ConferenceCreation = {\n\tname: 'ConferenceCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tConferenceSection,\n\t\tButtonPanel,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tconference: {\n\t\t\t\tpasswordNeeded: false,\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t\tsettings: {\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsers: '',\n\t\t\t\tmanageSettings: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tcanPost: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(DialogType.videoconf);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: number[])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsers = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonCanPostChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.canPost = newValue;\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.conference.passwordNeeded = passwordNeeded;\n\t\t},\n\t\tonPasswordChange(newPassword: string)\n\t\t{\n\t\t\tthis.conference.password = newPassword;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tif (!this.checkPassword())\n\t\t\t{\n\t\t\t\tthis.showPasswordError();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst newDialogId = await this.getChatService().createChat({\n\t\t\t\ttype: DialogType.videoconf,\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmembers: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsers: this.rights.manageUsers,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageSettings: this.rights.manageSettings,\n\t\t\t\tcanPost: this.rights.canPost,\n\t\t\t\tconferencePassword: this.conference.passwordNeeded ? this.conference.password : '',\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatCanPostMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== DialogType.videoconf)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t\tconference: this.conference,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, conference, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.conference = conference;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsers,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageSettings,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsers = manageUsers;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageSettings = manageSettings;\n\t\t\tthis.rights.canPost = UserRole.member;\n\t\t},\n\t\tcheckPassword(): boolean\n\t\t{\n\t\t\tconst PASSWORD_MIN_LENGTH = 3;\n\t\t\tif (!this.conference.passwordNeeded)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst password = this.conference.password.trim();\n\n\t\t\treturn password !== '' && password.length >= PASSWORD_MIN_LENGTH;\n\t\t},\n\t\tshowPasswordError()\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_CONFERENCE_PASSWORD_ERROR'),\n\t\t\t});\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__content\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-create-chat__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CONFERENCE_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t<ConferenceSection\n\t\t\t\t:passwordNeeded=\"conference.passwordNeeded\"\n\t\t\t\t:password=\"conference.password\"\n\t\t\t\t@passwordNeededChange=\"onPasswordNeededChange\"\n\t\t\t\t@passwordChange=\"onPasswordChange\"\n\t\t\t/>\n\t\t\t<SettingsSection\n\t\t\t\t:withSearchOption=\"false\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsers=\"rights.manageUsers\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageSettings=\"rights.manageSettings\"\n\t\t\t\t:canPost=\"rights.canPost\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersChange=\"onManageUsersChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@canPostChange=\"onCanPostChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CONFERENCE_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import { DialogType } from 'im.v2.const';\n\nimport { GroupChatCreation } from './components/group-chat';\nimport { ConferenceCreation } from './components/conference';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const CreateChatContent = {\n\tname: 'CreateChatContent',\n\tcomponents: { GroupChatCreation, ConferenceCreation },\n\tprops:\n\t{\n\t\tentityId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tDialogType: () => DialogType,\n\t\tchatType(): $Values<typeof DialogType>\n\t\t{\n\t\t\treturn this.entityId;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__container bx-im-content-create-chat__scope\">\n\t\t\t<GroupChatCreation v-if=\"chatType === DialogType.chat\" />\n\t\t\t<ConferenceCreation v-else-if=\"chatType === DialogType.videoconf\" />\n\t\t</div>\n\t`,\n};\n"],"names":["TitleInput","name","props","modelValue","type","String","default","placeholder","required","emits","data","mounted","$refs","titleInput","focus","methods","onInput","event","$emit","target","value","loc","phraseCode","$Bitrix","Loc","getMessage","template","ChatAvatar","avatarFile","validator","File","Type","isNull","chatTitle","computed","preparedAvatar","URL","createObjectURL","onAvatarChangeClick","avatarInput","click","onAvatarSelect","input","file","files","getChatService","prepareAvatar","chatService","ChatService","ChatMembersSelector","chatMembers","Array","currentUserId","Core","getUserId","created","members","map","userId","preselectedItems","membersSelector","TagSelector","maxHeight","addButtonCaption","addButtonCaptionMore","showCreateButton","dialogOptions","enableSearch","context","entities","id","undeselectedItems","events","onAfterTagAdd","selector","getTarget","getTags","tag","onAfterTagRemove","renderTo","ButtonPanel","components","MessengerButton","isCreating","Boolean","createButtonTitle","ButtonSize","ButtonColor","CreateChatSection","ExpandAnimation","title","isFolded","containerClasses","onContainerClick","onHeaderClick","SettingsSection","Dropdown","Toggle","description","withSearchOption","isAvailableInSearch","ToggleSize","descriptionPlaceholderText","onTypeChange","onDescriptionChange","onToggleLabelClick","toggle","replacements","OwnerSelector","ownerId","Number","multiple","onBeforeTagAdd","getData","setDeselectable","owner","ManagersSelector","managerIds","managers","rightsDropdownItems","UserRole","member","text","manager","RightsSection","manageUsers","manageSettings","manageUi","canPost","PopupType","manageUsersItems","item","manageUiItems","canPostItems","onOwnerChange","onManagersChange","onManageUsersChange","newValue","onManageUiChange","onCanPostChange","AppearanceSection","GroupChatCreation","settings","rights","watch","CreateChatManager","getInstance","setChatTitle","EventEmitter","subscribe","EventType","layout","onLayoutChange","initDefaultRolesForRights","restoreFields","setChatType","DialogType","chat","setCreationStatus","setChatAvatar","beforeUnmount","exitByCancel","exitByChatTypeSwitch","saveFields","onMembersChange","currentTags","onChatTypeChange","onCreateClick","newDialogId","createChat","avatar","catch","BX","UI","Notification","Center","notify","content","Messenger","openChat","onCancelClick","onAvatarChange","newAvatarFile","onScroll","MenuManager","getMenuById","createChatManageUsersMenu","close","createChatManageUiMenu","createChatCanPostMenu","to","Layout","entityId","savedFields","getFields","PermissionManager","getDefaultRolesForActionGroups","ConferenceSection","passwordNeeded","password","onPasswordNeededChange","onPasswordChange","ConferenceCreation","conference","videoconf","newPassword","checkPassword","showPasswordError","conferencePassword","PASSWORD_MIN_LENGTH","trim","length","CreateChatContent","chatType"],"mappings":"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"}