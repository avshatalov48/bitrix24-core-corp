{"version":3,"file":"copilot-content.bundle.map.js","names":["this","BX","Messenger","v2","Component","exports","im_v2_lib_logger","im_v2_lib_theme","im_v2_lib_textarea","ui_notification","im_public","im_v2_component_elements","im_v2_const","im_v2_provider_service","im_v2_lib_draft","im_v2_component_textarea","main_core","main_core_events","im_v2_lib_desktopApi","im_v2_component_dialog_chat","ui_vue3","im_v2_component_messageList","ChatHeader","name","components","EditableChatTitle","props","dialogId","type","String","default","data","computed","dialog","$store","getters","chatId","methods","onNewTitleSubmit","newTitle","getChatService","renameChat","catch","UI","Notification","Center","notify","content","loc","chatService","ChatService","phraseCode","replacements","$Bitrix","Loc","getMessage","template","BUTTON_BACKGROUND_COLOR","BUTTON_HOVER_COLOR","BUTTON_TEXT_COLOR","EmptyState","ChatButton","Button","isLoading","ButtonSize","preparedText","buttonColorScheme","borderColor","Color","transparent","backgroundColor","iconColor","textColor","hoverColor","async","newDialogId","getCopilotService","createChat","showCreateChatError","openCopilot","copilotService","CopilotService","RecognizerEvent","audioend","audiostart","end","error","nomatch","result","soundend","soundstart","speechend","speechstart","start","EVENT_NAMESPACE","_bindEvents","babelHelpers","classPrivateFieldLooseKey","_getRecognizedText","_getNewText","_initSettings","AudioManager","EventEmitter","static","DesktopApi","isDesktop","getApiVersion","Boolean","window","SpeechRecognition","webkitSpeechRecognition","constructor","super","Object","defineProperty","value","_initSettings2","_getNewText2","_getRecognizedText2","_bindEvents2","recognizer","setEventNamespace","classPrivateFieldLooseBase","startRecognition","stopRecognition","stop","Event","bind","lastRecognizedText","emit","events","recognitionStart","event","recognitionError","console","recognitionEnd","recognizedText","newText","recognitionResult","recognizedChunk","values","results","forEach","isFinal","alternative","transcript","fullText","additionalText","lastChunkLength","length","slice","continuous","interimResults","AudioInput","audioMode","required","emits","watch","newValue","oldValue","startAudio","stopAudio","onClick","$emit","getAudioManager","bindAudioEvents","unbindAudioEvents","subscribe","text","getData","unsubscribeAll","isAudioModeAvailable","isAvailable","audioManager","CopilotTextarea","BitrixVue","cloneComponent","ChatTextarea","parentData","isEmptyText","onAudioInputStart","onAudioInputResult","inputText","openEditPanel","getDraftManager","draftManager","CopilotDraftManager","getInstance","sendMessage","parentSendMessage","DialogStatus","typingStatus","inited","writingList","CopilotMessageList","MessageList","statusComponent","initContextMenu","onMessageContextMenuClick","onAvatarClick","CopilotDialog","ChatDialog","messageListComponent","CopilotContent","directives","mounted","element","binding","instance","textareaResizeManager","observeTextarea","beforeUnmount","unobserveTextarea","entityId","contextMessageId","Number","textareaHeight","layout","containerClasses","alignment","Settings","appearance","backgroundStyle","COPILOT_BACKGROUND_ID","ThemeManager","getBackgroundStyleById","dialogContainerStyle","CHAT_HEADER_HEIGHT","height","Logger","warn","onChatChange","created","initTextareaResizeManager","loading","contextId","loadChatWithContext","loadChat","then","code","showNotification","loadChatWithMessages","ResizeManager","onHeightChange","newHeight","Content","Lib","Elements","Const","Provider","Service","Dialog","Vue3"],"sources":["copilot-content.bundle.js"],"mappings":"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"}