this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,n,s,c,o,i,r,a,l){"use strict";const h={components:{MessengerMenu:a.MessengerMenu,MenuItem:a.MenuItem},emits:["showUnread"],data(){return{showPopup:false}},computed:{menuConfig(){return{id:"im-recent-header-menu",width:284,bindElement:this.$refs["icon"]||{},offsetTop:4,padding:0}},unreadCounter(){return this.$store.getters["recent/getTotalCounter"]}},methods:{onIconClick(){this.showPopup=true},onReadAllClick(){(new r.ChatService).readAll();this.showPopup=false},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div @click="onIconClick" class="bx-im-list-container-recent__header-menu_icon" :class="{'--active': showPopup}" ref="icon"></div>\n\t\t<MessengerMenu v-if="showPopup" :config="menuConfig" @close="showPopup = false">\n\t\t\t<MenuItem\n\t\t\t\t:title="loc('IM_RECENT_HEADER_MENU_READ_ALL')"\n\t\t\t\t@click="onReadAllClick"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\t:title="loc('IM_RECENT_HEADER_MENU_SHOW_UNREAD_ONLY')"\n\t\t\t\t:counter="unreadCounter"\n\t\t\t\t:disabled="true"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\t:title="loc('IM_RECENT_HEADER_MENU_CHAT_GROUPS_TITLE')"\n\t\t\t\t:subtitle="loc('IM_RECENT_HEADER_MENU_CHAT_GROUPS_SUBTITLE')"\n\t\t\t\t:disabled="true"\n\t\t\t/>\n\t\t</MessengerMenu>\n\t`};const u={emits:["articleOpen"],data(){return{}},methods:{openHelpArticle(){var t;const e=17412872;(t=BX.Helper)==null?void 0:t.show(`redirect=detail&code=${e}`);this.$emit("articleOpen")},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div class="bx-im-create-chat-help__container">\n\t\t\t<div @click="openHelpArticle" class="bx-im-create-chat-help__content">\n\t\t\t\t<div class="bx-im-create-chat-help__icon"></div>\n\t\t\t\t<div class="bx-im-create-chat-help__text">{{ loc('IM_RECENT_CREATE_CHAT_WHAT_TO_CHOOSE') }}</div>\t\n\t\t\t</div>\n\t\t</div>\n\t`};const d={components:{MessengerMenu:a.MessengerMenu,MenuItem:a.MenuItem,CreateChatHelp:u},data(){return{showPopup:false}},computed:{MenuItemIcon:()=>a.MenuItemIcon,menuConfig(){return{id:"im-create-chat-menu",width:255,bindElement:this.$refs["icon"]||{},offsetTop:4,padding:0}}},methods:{onGroupChatCreate(){this.$store.dispatch("application/setLayout",{layoutName:l.Layout.createChat.name});this.showPopup=false},loc(t){return this.$Bitrix.Loc.getMessage(t)}},template:`\n\t\t<div @click="showPopup = true" class="bx-im-list-container-recent__create-chat_icon" :class="{'--active': showPopup}" ref="icon"></div>\n\t\t<MessengerMenu v-if="showPopup" :config="menuConfig" @close="showPopup = false">\n\t\t\t<MenuItem\n\t\t\t\t:icon="MenuItemIcon.chat"\n\t\t\t\t:title="loc('IM_RECENT_CREATE_GROUP_CHAT_TITLE_V2')"\n\t\t\t\t:subtitle="loc('IM_RECENT_CREATE_GROUP_CHAT_SUBTITLE')"\n\t\t\t\t@click="onGroupChatCreate"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\t:icon="MenuItemIcon.channel"\n\t\t\t\t:title="loc('IM_RECENT_CREATE_CHANNEL_TITLE_V2')"\n\t\t\t\t:subtitle="loc('IM_RECENT_CREATE_CHANNEL_SUBTITLE_V2')"\n\t\t\t\t:disabled="true"\n\t\t\t/>\n\t\t\t<MenuItem\n\t\t\t\t:icon="MenuItemIcon.conference"\n\t\t\t\t:title="loc('IM_RECENT_CREATE_CONFERENCE_TITLE')"\n\t\t\t\t:subtitle="loc('IM_RECENT_CREATE_CONFERENCE_SUBTITLE')"\n\t\t\t\t:disabled="true"\n\t\t\t/>\n\t\t\t<template #footer>\n\t\t\t\t<CreateChatHelp @articleOpen="showPopup = false" />\n\t\t\t</template>\n\t\t</MessengerMenu>\n\t`};const m={name:"RecentListContainer",components:{HeaderMenu:h,CreateChatMenu:d,SearchInput:c.SearchInput,SearchResult:o.SearchResult,RecentList:s.RecentList},emits:["selectEntity"],data(){return{searchMode:false,unreadOnlyMode:false,searchQuery:""}},computed:{UnreadRecentService:()=>r.UnreadRecentService},created(){i.Logger.warn("List: Recent container created");e.EventEmitter.subscribe(l.EventType.recent.openSearch,this.onOpenSearch);n.Event.bind(document,"mousedown",this.onDocumentClick)},beforeUnmount(){e.EventEmitter.unsubscribe(l.EventType.recent.openSearch,this.onOpenSearch);n.Event.unbind(document,"mousedown",this.onDocumentClick)},methods:{onChatClick(t){this.$emit("selectEntity",{layoutName:l.Layout.chat.name,entityId:t})},onOpenSearch(){this.searchMode=true},onCloseSearch(){this.searchMode=false;this.searchQuery=""},onUpdateSearch(t){this.searchMode=true;this.searchQuery=t},onDocumentClick(t){const n=t.composedPath().includes(this.$refs["recent-container"]);if(!n){e.EventEmitter.emit(l.EventType.search.close)}}},template:`\n\t\t<div class="bx-im-list-container-recent__scope bx-im-list-container-recent__container" ref="recent-container">\n\t\t\t<div class="bx-im-list-container-recent__header_container">\n\t\t\t\t<HeaderMenu @showUnread="unreadOnlyMode = true" />\n\t\t\t\t<div class="bx-im-list-container-recent__search-input_container">\n\t\t\t\t\t<SearchInput \n\t\t\t\t\t\t:searchMode="searchMode" \n\t\t\t\t\t\t@openSearch="onOpenSearch"\n\t\t\t\t\t\t@closeSearch="onCloseSearch"\n\t\t\t\t\t\t@updateSearch="onUpdateSearch"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<CreateChatMenu />\n\t\t\t</div>\n\t\t\t<div class="bx-im-list-container-recent__elements_container">\n\t\t\t\t<div class="bx-im-list-container-recent__elements">\n\t\t\t\t\t<SearchResult \n\t\t\t\t\t\tv-show="searchMode" \n\t\t\t\t\t\t:searchMode="searchMode" \n\t\t\t\t\t\t:searchQuery="searchQuery" \n\t\t\t\t\t\t:searchConfig="{}"\n\t\t\t\t\t/>\n\t\t\t\t\t<RecentList v-show="!searchMode && !unreadOnlyMode" @chatClick="onChatClick" key="recent" />\n\x3c!--\t\t\t\t\t<RecentList--\x3e\n\x3c!--\t\t\t\t\t\tv-if="!searchMode && unreadOnlyMode"--\x3e\n\x3c!--\t\t\t\t\t\t:recentService="UnreadRecentService.getInstance()"--\x3e\n\x3c!--\t\t\t\t\t\t@chatClick="onChatClick"--\x3e\n\x3c!--\t\t\t\t\t\tkey="unread"--\x3e\n\x3c!--\t\t\t\t\t/>--\x3e\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};t.RecentListContainer=m})(this.BX.Messenger.v2.Component.List=this.BX.Messenger.v2.Component.List||{},BX.Event,BX,BX.Messenger.v2.Component.List,BX.Messenger.v2.Component,BX.Messenger.v2.Component,BX.Messenger.v2.Lib,BX.Messenger.v2.Provider.Service,BX.Messenger.v2.Component.Elements,BX.Messenger.v2.Const);
//# sourceMappingURL=recent-container.bundle.map.js