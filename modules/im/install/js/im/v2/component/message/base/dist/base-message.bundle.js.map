{"version":3,"file":"base-message.bundle.js","sources":["../src/components/media.js","../src/components/own-message-status.js","../src/extensions/text.js","../src/extensions/deleted.js","../src/extensions/unsupported.js","../src/extensions/call-invite.js","../src/base-message.js"],"sourcesContent":["import { File, Image, Audio, Video } from 'im.v2.component.elements';\nimport { FileType, MessageType } from 'im.v2.const';\n\nimport type { ImModelFile, ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const Media = {\n\tname: 'MediaComponent',\n\tcomponents: { File, Image, Audio, Video },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tFileType: () => FileType,\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tmessageFiles(): ImModelFile[]\n\t\t{\n\t\t\tconst files = [];\n\n\t\t\tif (this.message.files.length === 0)\n\t\t\t{\n\t\t\t\treturn files;\n\t\t\t}\n\n\t\t\tthis.message.files.forEach((fileId: number) => {\n\t\t\t\tconst file: ImModelFile = this.$store.getters['files/get'](fileId, true);\n\t\t\t\tfiles.push(file);\n\t\t\t});\n\n\t\t\treturn files;\n\t\t},\n\t\tmessageType(): $Values<typeof MessageType>\n\t\t{\n\t\t\treturn this.$store.getters['messages/getMessageType'](this.message.id);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-for=\"file in messageFiles\" :key=\"file.id\" class=\"bx-im-message-base__media-wrap\">\n\t\t\t<Image v-if=\"file.type === FileType.image && file.image\" :item=\"file\" :messageId=\"message.id\" />\n\t\t\t<Audio v-else-if=\"file.type === FileType.audio\" :item=\"file\" :messageType=\"messageType\" :messageId=\"message.id\" />\n\t\t\t<Video v-else-if=\"file.type === FileType.video\" :item=\"file\" :messageId=\"message.id\" />\n\t\t\t<File v-else :item=\"file\" :messageId=\"message.id\" />\n\t\t</div>\n\t`,\n};\n","import {OwnMessageStatus as StatusType} from 'im.v2.const';\n\nimport type {ImModelMessage} from 'im.v2.model';\n\n// @vue/component\nexport const OwnMessageStatus = {\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tmessageStatus(): $Values<typeof StatusType>\n\t\t{\n\t\t\tif (this.message.sending)\n\t\t\t{\n\t\t\t\treturn StatusType.sending;\n\t\t\t}\n\n\t\t\tif (this.message.viewedByOthers)\n\t\t\t{\n\t\t\t\treturn StatusType.viewed;\n\t\t\t}\n\n\t\t\treturn StatusType.sent;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div :class=\"'--' + messageStatus\" class=\"bx-im-message-base__message-status\"></div>\n\t`\n};","// @vue/component\nimport { Parser } from 'im.v2.lib.parser';\n\nexport const TextExtension = {\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tformattedText(): string\n\t\t{\n\t\t\treturn Parser.decodeMessage(this.item);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-base__text\" v-html=\"formattedText\"></div>\n\t`,\n};\n","// @vue/component\nimport '../css/extensions/deleted.css';\n\nexport const DeletedExtension = {\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-base__deleted_container\">\n\t\t\t<div class=\"bx-im-message-base__deleted_icon\"></div>\n\t\t\t<div class=\"bx-im-message-base__deleted_text\">{{ loc('IM_MESSENGER_MESSAGE_DELETED') }}</div>\n\t\t</div>\n\t`,\n};\n","// @vue/component\nimport '../css/extensions/unsupported.css';\n\nexport const UnsupportedExtension = {\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-base__unsupported_container\">\n\t\t\t<div class=\"bx-im-message-base__unsupported_icon\"></div>\n\t\t\t<div class=\"bx-im-message-base__unsupported_text\">{{ loc('IM_MESSENGER_MESSAGE_UNSUPPORTED_EXTENSION') }}</div>\n\t\t</div>\n\t`,\n};\n","import { Button as ButtonComponent, ButtonSize, ButtonIcon } from 'im.v2.component.elements';\nimport { Utils } from 'im.v2.lib.utils';\n\nimport '../css/extensions/call-invite.css';\n\nimport type { CustomColorScheme } from 'im.v2.component.elements';\nimport type { ImModelMessage } from 'im.v2.model';\n\ntype ExtensionParams = {\n\tlink: string,\n};\n\nconst BUTTON_COLOR = '#00ace3';\n\n// @vue/component\nexport const CallInviteExtension = {\n\tname: 'CallInviteExtension',\n\tcomponents: { ButtonComponent },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): Object\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonIcon: () => ButtonIcon,\n\n\t\tbuttonColorScheme(): CustomColorScheme\n\t\t{\n\t\t\treturn {\n\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\tborderColor: BUTTON_COLOR,\n\t\t\t\ticonColor: BUTTON_COLOR,\n\t\t\t\ttextColor: BUTTON_COLOR,\n\t\t\t\thoverColor: 'transparent',\n\t\t\t};\n\t\t},\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\textensionParams(): ExtensionParams\n\t\t{\n\t\t\treturn this.item.extensionParams;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonCallButtonClick()\n\t\t{\n\t\t\tUtils.browser.openLink(this.extensionParams.link);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-base-call-invite__scope bx-im-message-base__extension\">\n\t\t\t<div class=\"bx-im-message-base-call-invite__container\">\n\t\t\t\t<div class=\"bx-im-message-base-call-invite__image\"></div>\n\t\t\t\t<div class=\"bx-im-message-base-call-invite__content\">\n\t\t\t\t\t<div class=\"bx-im-message-base-call-invite__title\">{{ loc('IM_MESSENGER_MESSAGE_CALL_INVITE_TITLE') }}</div>\n\t\t\t\t\t<div class=\"bx-im-message-base-call-invite__description\">{{ loc('IM_MESSENGER_MESSAGE_CALL_INVITE_DESCRIPTION') }}</div>\n\t\t\t\t\t<div class=\"bx-im-message-base-call-invite__buttons_container\">\n\t\t\t\t\t\t<div class=\"bx-im-message-base-call-invite__buttons_item\">\n\t\t\t\t\t\t\t<ButtonComponent\n\t\t\t\t\t\t\t\t:size=\"ButtonSize.L\" \n\t\t\t\t\t\t\t\t:icon=\"ButtonIcon.Call\" \n\t\t\t\t\t\t\t\t:customColorScheme=\"buttonColorScheme\"\n\t\t\t\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t\t\t\t:text=\"loc('IM_MESSENGER_MESSAGE_CALL_INVITE_BUTTON_JOIN')\"\n\t\t\t\t\t\t\t\t@click=\"onCallButtonClick\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Reactions } from 'ui.vue3.components.reactions';\n\nimport { Core } from 'im.v2.application.core';\nimport { Utils } from 'im.v2.lib.utils';\nimport { Parser } from 'im.v2.lib.parser';\nimport { DialogType, EventType, MessageExtension } from 'im.v2.const';\nimport { Attach, Avatar, AvatarSize, ChatTitle } from 'im.v2.component.elements';\nimport { ReactionSelector, ReactionList } from 'im.v2.component.message.reaction';\nimport { DateFormatter, DateCode } from 'im.v2.lib.date-formatter';\n\nimport { Media } from './components/media';\nimport { OwnMessageStatus } from './components/own-message-status';\n\nimport { TextExtension } from './extensions/text';\nimport { DeletedExtension } from './extensions/deleted';\nimport { UnsupportedExtension } from './extensions/unsupported';\nimport { CallInviteExtension } from './extensions/call-invite';\n\nimport './css/base-message.css';\n\nimport type { ImModelMessage, ImModelUser, ImModelDialog } from 'im.v2.model';\n\n// @vue/component\nexport const BaseMessage = {\n\tname: 'BaseMessage',\n\tcomponents: {\n\t\tAttach,\n\t\tAvatar,\n\t\tChatTitle,\n\t\tReactions,\n\t\tMedia,\n\t\tOwnMessageStatus,\n\t\tReactionSelector,\n\t\tReactionList,\n\t\tTextExtension,\n\t\tDeletedExtension,\n\t\tUnsupportedExtension,\n\t\tCallInviteExtension,\n\t},\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\twithAvatar: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\twithTitle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tmenuIsActiveForId: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['contextMenuClick', 'quoteMessage'],\n\tdata(): Object\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tdialog(): ImModelDialog\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](this.dialogId, true);\n\t\t},\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.message.authorId, true);\n\t\t},\n\t\tdialogColor(): string\n\t\t{\n\t\t\treturn this.dialog.type === DialogType.private ? this.user.color : this.dialog.color;\n\t\t},\n\t\tauthorDialogId(): string\n\t\t{\n\t\t\tif (this.message.authorId)\n\t\t\t{\n\t\t\t\treturn this.message.authorId.toString();\n\t\t\t}\n\n\t\t\treturn this.dialogId;\n\t\t},\n\t\tisSystemMessage(): boolean\n\t\t{\n\t\t\treturn this.message.authorId === 0;\n\t\t},\n\t\tisSelfMessage(): boolean\n\t\t{\n\t\t\treturn this.message.authorId === Core.getUserId();\n\t\t},\n\t\tisOpponentMessage(): boolean\n\t\t{\n\t\t\treturn !this.isSystemMessage && !this.isSelfMessage;\n\t\t},\n\t\tshowTitle(): boolean\n\t\t{\n\t\t\treturn this.withTitle && !this.isSystemMessage && !this.isSelfMessage;\n\t\t},\n\t\tcanSetReactions(): boolean\n\t\t{\n\t\t\treturn Type.isNumber(this.message.id);\n\t\t},\n\t\tcontainerClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--system': this.isSystemMessage,\n\t\t\t\t'--self': this.isSelfMessage,\n\t\t\t\t'--opponent': this.isOpponentMessage,\n\t\t\t\t'--with-avatar': this.withAvatar,\n\t\t\t};\n\t\t},\n\t\tformattedDate(): string\n\t\t{\n\t\t\treturn DateFormatter.formatByCode(this.message.date, DateCode.shortTimeFormat);\n\t\t},\n\t\tmenuTitle(): string\n\t\t{\n\t\t\treturn this.loc(\n\t\t\t\t'IM_MESSENGER_MESSAGE_MENU_TITLE',\n\t\t\t\t{ '#SHORTCUT#': Utils.platform.isMac() ? 'CMD' : 'CTRL' },\n\t\t\t);\n\t\t},\n\t\textensionId(): string\n\t\t{\n\t\t\tconst isEmptyMessage = this.message.text.length === 0\n\t\t\t\t&& this.message.files.length === 0\n\t\t\t\t&& this.message.attach.length === 0;\n\n\t\t\tif (this.message.isDeleted || isEmptyMessage)\n\t\t\t{\n\t\t\t\treturn MessageExtension.deleted;\n\t\t\t}\n\n\t\t\treturn this.message.extensionId;\n\t\t},\n\t},\n\tmethods: {\n\t\tonMenuClick(event: PointerEvent)\n\t\t{\n\t\t\tif (Utils.key.isCmdOrCtrl(event))\n\t\t\t{\n\t\t\t\tconst message = { ...this.message };\n\t\t\t\tconst selectionText = document.getSelection().toString();\n\t\t\t\tif (selectionText.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmessage.text = selectionText;\n\t\t\t\t}\n\n\t\t\t\tthis.$emit('quoteMessage', { message });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('contextMenuClick', { message: this.message, $event: event });\n\t\t},\n\t\tonContainerClick(event: PointerEvent)\n\t\t{\n\t\t\tParser.executeClickEvent(event);\n\t\t},\n\t\tonAuthorNameClick()\n\t\t{\n\t\t\tconst authorId = Number.parseInt(this.authorDialogId, 10);\n\t\t\tif (authorId === Core.getUserId())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.textarea.insertMention, {\n\t\t\t\tmentionText: this.user.name,\n\t\t\t\tmentionReplacement: Utils.user.getMentionBbCode(this.user.id, this.user.name),\n\t\t\t});\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" :data-id=\"message.id\" class=\"bx-im-message-base__scope bx-im-message-base__container\" @click=\"onContainerClick\">\n\t\t\t<div class=\"bx-im-message-base__body\">\n\t\t\t\t<div @click=\"onAuthorNameClick\" v-if=\"showTitle\" class=\"bx-im-message-base__name\">\n\t\t\t\t\t<ChatTitle :dialogId=\"authorDialogId\" :onlyFirstName=\"true\" :showItsYou=\"false\" :withColor=\"true\" :withLeftIcon=\"false\" />\n\t\t\t\t</div>\n\t\t\t\t<Media :item=\"message\" />\n\t\t\t\t<component :is=\"extensionId\" :item=\"message\" />\n\t\t\t\t<div v-for=\"config in message.attach\" :key=\"config.ID\" class=\"bx-im-message-base__attach-wrap\">\n\t\t\t\t\t<Attach :baseColor=\"dialogColor\" :config=\"config\"/>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"bx-im-message-base__bottom-container\">\n\t\t\t\t\t<ReactionList v-if=\"canSetReactions\" :messageId=\"message.id\" />\n\t\t\t\t\t<div class=\"bx-im-message-base__bottom-container_right\">\n\t\t\t\t\t\t<div v-if=\"message.isEdited && !message.isDeleted\" class=\"bx-im-message-base__edit-mark\">\n\t\t\t\t\t\t\t{{ loc('IM_MESSENGER_MESSAGE_EDITED') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-message-base__date\">{{ formattedDate }}</div>\n\t\t\t\t\t\t<OwnMessageStatus v-if=\"isSelfMessage\" :item=\"message\" />\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-message-base__reactions-container\">\n\t\t\t\t\t<ReactionSelector v-if=\"canSetReactions\" :messageId=\"message.id\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-message-base__actions\">\n\t\t\t\t<div :title=\"menuTitle\" @click=\"onMenuClick\" :class=\"{'--active': menuIsActiveForId === message.id}\" class=\"bx-im-message-base__menu\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["Media","name","components","File","Image","Audio","Video","props","item","type","Object","required","computed","FileType","message","messageFiles","files","length","forEach","fileId","file","$store","getters","push","messageType","id","template","OwnMessageStatus","data","messageStatus","sending","StatusType","viewedByOthers","viewed","sent","TextExtension","formattedText","Parser","decodeMessage","DeletedExtension","methods","loc","phraseCode","$Bitrix","Loc","getMessage","UnsupportedExtension","BUTTON_COLOR","CallInviteExtension","ButtonComponent","ButtonSize","ButtonIcon","buttonColorScheme","backgroundColor","borderColor","iconColor","textColor","hoverColor","extensionParams","replacements","onCallButtonClick","Utils","browser","openLink","link","BaseMessage","Attach","Avatar","ChatTitle","Reactions","ReactionSelector","ReactionList","withAvatar","Boolean","withTitle","default","menuIsActiveForId","Number","dialogId","String","emits","AvatarSize","dialog","user","authorId","dialogColor","DialogType","private","color","authorDialogId","toString","isSystemMessage","isSelfMessage","Core","getUserId","isOpponentMessage","showTitle","canSetReactions","Type","isNumber","containerClasses","formattedDate","DateFormatter","formatByCode","date","DateCode","shortTimeFormat","menuTitle","platform","isMac","extensionId","isEmptyMessage","text","attach","isDeleted","MessageExtension","deleted","onMenuClick","event","key","isCmdOrCtrl","selectionText","document","getSelection","$emit","$event","onContainerClick","executeClickEvent","onAuthorNameClick","parseInt","EventEmitter","emit","EventType","textarea","insertMention","mentionText","mentionReplacement","getMentionBbCode"],"mappings":";;;;;;;;CAKA;AACA,CAAO,MAAMA,KAAK,GAAG;GACpBC,IAAI,EAAE,gBAAgB;GACtBC,UAAU,EAAE;WAAEC,6BAAI;YAAEC,8BAAK;YAAEC,8BAAK;YAAEC;IAAO;GACzCC,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDC,QAAQ,EACR;KACCC,QAAQ,EAAE,MAAMA,oBAAQ;KACxBC,OAAO,GACP;OACC,OAAO,IAAI,CAACN,IAAI;MAChB;KACDO,YAAY,GACZ;OACC,MAAMC,KAAK,GAAG,EAAE;OAEhB,IAAI,IAAI,CAACF,OAAO,CAACE,KAAK,CAACC,MAAM,KAAK,CAAC,EACnC;SACC,OAAOD,KAAK;;OAGb,IAAI,CAACF,OAAO,CAACE,KAAK,CAACE,OAAO,CAAEC,MAAc,IAAK;SAC9C,MAAMC,IAAiB,GAAG,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,CAACH,MAAM,EAAE,IAAI,CAAC;SACxEH,KAAK,CAACO,IAAI,CAACH,IAAI,CAAC;QAChB,CAAC;OAEF,OAAOJ,KAAK;MACZ;KACDQ,WAAW,GACX;OACC,OAAO,IAAI,CAACH,MAAM,CAACC,OAAO,CAAC,yBAAyB,CAAC,CAAC,IAAI,CAACR,OAAO,CAACW,EAAE,CAAC;;IAEvE;GACDC,QAAQ,EAAG;;;;;;;;CAQZ,CAAC;;CChDD;AACA,CAAO,MAAMC,gBAAgB,GAAG;GAC/BpB,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDiB,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDhB,QAAQ,EACR;KACCE,OAAO,GACP;OACC,OAAO,IAAI,CAACN,IAAI;MAChB;KACDqB,aAAa,GACb;OACC,IAAI,IAAI,CAACf,OAAO,CAACgB,OAAO,EACxB;SACC,OAAOC,4BAAU,CAACD,OAAO;;OAG1B,IAAI,IAAI,CAAChB,OAAO,CAACkB,cAAc,EAC/B;SACC,OAAOD,4BAAU,CAACE,MAAM;;OAGzB,OAAOF,4BAAU,CAACG,IAAI;;IAEvB;GACDR,QAAQ,EAAG;;;CAGZ,CAAC;;CCzCD;AACA,CAEO,MAAMS,aAAa,GAAG;GAC5B5B,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDiB,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDhB,QAAQ,EACR;KACCwB,aAAa,GACb;OACC,OAAOC,uBAAM,CAACC,aAAa,CAAC,IAAI,CAAC9B,IAAI,CAAC;;IAEvC;GACDkB,QAAQ,EAAG;;;CAGZ,CAAC;;CCzBD;AACA,CAEO,MAAMa,gBAAgB,GAAG;GAC/BC,OAAO,EACP;KACCC,GAAG,CAACC,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDhB,QAAQ,EAAG;;;;;;CAMZ,CAAC;;CCjBD;AACA,CAEO,MAAMoB,oBAAoB,GAAG;GACnCN,OAAO,EACP;KACCC,GAAG,CAACC,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDhB,QAAQ,EAAG;;;;;;CAMZ,CAAC;;CCLD,MAAMqB,YAAY,GAAG,SAAS;;CAE9B;AACA,CAAO,MAAMC,mBAAmB,GAAG;GAClC/C,IAAI,EAAE,qBAAqB;GAC3BC,UAAU,EAAE;sBAAE+C;IAAiB;GAC/B1C,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;;IAEX;GACDiB,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDhB,QAAQ,EACR;KACCsC,UAAU,EAAE,MAAMA,mCAAU;KAC5BC,UAAU,EAAE,MAAMA,mCAAU;KAE5BC,iBAAiB,GACjB;OACC,OAAO;SACNC,eAAe,EAAE,aAAa;SAC9BC,WAAW,EAAEP,YAAY;SACzBQ,SAAS,EAAER,YAAY;SACvBS,SAAS,EAAET,YAAY;SACvBU,UAAU,EAAE;QACZ;MACD;KACD3C,OAAO,GACP;OACC,OAAO,IAAI,CAACN,IAAI;MAChB;KACDkD,eAAe,GACf;OACC,OAAO,IAAI,CAAClD,IAAI,CAACkD,eAAe;;IAEjC;GACDlB,OAAO,EACP;KACCC,GAAG,CAACC,UAAkB,EAAEiB,YAAmC,GAAG,EAAE,EAChE;OACC,OAAO,IAAI,CAAChB,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,EAAEiB,YAAY,CAAC;MAC5D;KACDC,iBAAiB,GACjB;OACCC,qBAAK,CAACC,OAAO,CAACC,QAAQ,CAAC,IAAI,CAACL,eAAe,CAACM,IAAI,CAAC;;IAElD;GACDtC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;CAuBZ,CAAC;;CC/DD;AACA,OAAauC,WAAW,GAAG;GAC1BhE,IAAI,EAAE,aAAa;GACnBC,UAAU,EAAE;aACXgE,+BAAM;aACNC,+BAAM;gBACNC,kCAAS;gBACTC,sCAAS;KACTrE,KAAK;KACL2B,gBAAgB;uBAChB2C,iDAAgB;mBAChBC,6CAAY;KACZpC,aAAa;KACbI,gBAAgB;KAChBO,oBAAoB;KACpBE;IACA;GACDzC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACD6D,UAAU,EAAE;OACX/D,IAAI,EAAEgE,OAAO;OACb9D,QAAQ,EAAE;MACV;KACD+D,SAAS,EAAE;OACVjE,IAAI,EAAEgE,OAAO;OACbE,OAAO,EAAE;MACT;KACDC,iBAAiB,EAAE;OAClBnE,IAAI,EAAEoE,MAAM;OACZF,OAAO,EAAE;MACT;KACDG,QAAQ,EAAE;OACTrE,IAAI,EAAEsE,MAAM;OACZpE,QAAQ,EAAE;;IAEX;GACDqE,KAAK,EAAE,CAAC,kBAAkB,EAAE,cAAc,CAAC;GAC3CpD,IAAI,GACJ;KACC,OAAO,EAAE;IACT;GACDhB,QAAQ,EACR;KACCqE,UAAU,EAAE,MAAMA,mCAAU;KAC5BnE,OAAO,GACP;OACC,OAAO,IAAI,CAACN,IAAI;MAChB;KACD0E,MAAM,GACN;OACC,OAAO,IAAI,CAAC7D,MAAM,CAACC,OAAO,CAAC,eAAe,CAAC,CAAC,IAAI,CAACwD,QAAQ,EAAE,IAAI,CAAC;MAChE;KACDK,IAAI,GACJ;OACC,OAAO,IAAI,CAAC9D,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,IAAI,CAACR,OAAO,CAACsE,QAAQ,EAAE,IAAI,CAAC;MACpE;KACDC,WAAW,GACX;OACC,OAAO,IAAI,CAACH,MAAM,CAACzE,IAAI,KAAK6E,sBAAU,CAACC,OAAO,GAAG,IAAI,CAACJ,IAAI,CAACK,KAAK,GAAG,IAAI,CAACN,MAAM,CAACM,KAAK;MACpF;KACDC,cAAc,GACd;OACC,IAAI,IAAI,CAAC3E,OAAO,CAACsE,QAAQ,EACzB;SACC,OAAO,IAAI,CAACtE,OAAO,CAACsE,QAAQ,CAACM,QAAQ,EAAE;;OAGxC,OAAO,IAAI,CAACZ,QAAQ;MACpB;KACDa,eAAe,GACf;OACC,OAAO,IAAI,CAAC7E,OAAO,CAACsE,QAAQ,KAAK,CAAC;MAClC;KACDQ,aAAa,GACb;OACC,OAAO,IAAI,CAAC9E,OAAO,CAACsE,QAAQ,KAAKS,2BAAI,CAACC,SAAS,EAAE;MACjD;KACDC,iBAAiB,GACjB;OACC,OAAO,CAAC,IAAI,CAACJ,eAAe,IAAI,CAAC,IAAI,CAACC,aAAa;MACnD;KACDI,SAAS,GACT;OACC,OAAO,IAAI,CAACtB,SAAS,IAAI,CAAC,IAAI,CAACiB,eAAe,IAAI,CAAC,IAAI,CAACC,aAAa;MACrE;KACDK,eAAe,GACf;OACC,OAAOC,cAAI,CAACC,QAAQ,CAAC,IAAI,CAACrF,OAAO,CAACW,EAAE,CAAC;MACrC;KACD2E,gBAAgB,GAChB;OACC,OAAO;SACN,UAAU,EAAE,IAAI,CAACT,eAAe;SAChC,QAAQ,EAAE,IAAI,CAACC,aAAa;SAC5B,YAAY,EAAE,IAAI,CAACG,iBAAiB;SACpC,eAAe,EAAE,IAAI,CAACvB;QACtB;MACD;KACD6B,aAAa,GACb;OACC,OAAOC,qCAAa,CAACC,YAAY,CAAC,IAAI,CAACzF,OAAO,CAAC0F,IAAI,EAAEC,gCAAQ,CAACC,eAAe,CAAC;MAC9E;KACDC,SAAS,GACT;OACC,OAAO,IAAI,CAAClE,GAAG,CACd,iCAAiC,EACjC;SAAE,YAAY,EAAEoB,qBAAK,CAAC+C,QAAQ,CAACC,KAAK,EAAE,GAAG,KAAK,GAAG;QAAQ,CACzD;MACD;KACDC,WAAW,GACX;OACC,MAAMC,cAAc,GAAG,IAAI,CAACjG,OAAO,CAACkG,IAAI,CAAC/F,MAAM,KAAK,CAAC,IACjD,IAAI,CAACH,OAAO,CAACE,KAAK,CAACC,MAAM,KAAK,CAAC,IAC/B,IAAI,CAACH,OAAO,CAACmG,MAAM,CAAChG,MAAM,KAAK,CAAC;OAEpC,IAAI,IAAI,CAACH,OAAO,CAACoG,SAAS,IAAIH,cAAc,EAC5C;SACC,OAAOI,4BAAgB,CAACC,OAAO;;OAGhC,OAAO,IAAI,CAACtG,OAAO,CAACgG,WAAW;;IAEhC;GACDtE,OAAO,EAAE;KACR6E,WAAW,CAACC,KAAmB,EAC/B;OACC,IAAIzD,qBAAK,CAAC0D,GAAG,CAACC,WAAW,CAACF,KAAK,CAAC,EAChC;SACC,MAAMxG,OAAO,GAAG;WAAE,GAAG,IAAI,CAACA;UAAS;SACnC,MAAM2G,aAAa,GAAGC,QAAQ,CAACC,YAAY,EAAE,CAACjC,QAAQ,EAAE;SACxD,IAAI+B,aAAa,CAACxG,MAAM,GAAG,CAAC,EAC5B;WACCH,OAAO,CAACkG,IAAI,GAAGS,aAAa;;SAG7B,IAAI,CAACG,KAAK,CAAC,cAAc,EAAE;WAAE9G;UAAS,CAAC;SAEvC;;OAGD,IAAI,CAAC8G,KAAK,CAAC,kBAAkB,EAAE;SAAE9G,OAAO,EAAE,IAAI,CAACA,OAAO;SAAE+G,MAAM,EAAEP;QAAO,CAAC;MACxE;KACDQ,gBAAgB,CAACR,KAAmB,EACpC;OACCjF,uBAAM,CAAC0F,iBAAiB,CAACT,KAAK,CAAC;MAC/B;KACDU,iBAAiB,GACjB;OACC,MAAM5C,QAAQ,GAAGP,MAAM,CAACoD,QAAQ,CAAC,IAAI,CAACxC,cAAc,EAAE,EAAE,CAAC;OACzD,IAAIL,QAAQ,KAAKS,2BAAI,CAACC,SAAS,EAAE,EACjC;SACC;;OAGDoC,6BAAY,CAACC,IAAI,CAACC,qBAAS,CAACC,QAAQ,CAACC,aAAa,EAAE;SACnDC,WAAW,EAAE,IAAI,CAACpD,IAAI,CAAClF,IAAI;SAC3BuI,kBAAkB,EAAE3E,qBAAK,CAACsB,IAAI,CAACsD,gBAAgB,CAAC,IAAI,CAACtD,IAAI,CAAC1D,EAAE,EAAE,IAAI,CAAC0D,IAAI,CAAClF,IAAI;QAC5E,CAAC;MACF;KACDwC,GAAG,CAACC,UAAkB,EAAEiB,YAAgC,GAAG,EAAE,EAC7D;OACC,OAAO,IAAI,CAAChB,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,EAAEiB,YAAY,CAAC;;IAE7D;GACDjC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA+BZ,CAAC;;;;;;;;"}