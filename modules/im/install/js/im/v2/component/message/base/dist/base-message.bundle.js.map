{"version":3,"file":"base-message.bundle.js","sources":["../src/base-message.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { Parser } from 'im.v2.lib.parser';\nimport { ContextMenu, RetryButton, MessageKeyboard } from 'im.v2.component.message.elements';\n\nimport './css/base-message.css';\n\nimport type { ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const BaseMessage = {\n\tname: 'BaseMessage',\n\tcomponents: { ContextMenu, RetryButton, MessageKeyboard },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithBackground: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithDefaultContextMenu: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithRetryButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tmenuIsActiveForId: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tisSystemMessage(): boolean\n\t\t{\n\t\t\treturn this.message.authorId === 0;\n\t\t},\n\t\tisSelfMessage(): boolean\n\t\t{\n\t\t\treturn this.message.authorId === Core.getUserId();\n\t\t},\n\t\tisOpponentMessage(): boolean\n\t\t{\n\t\t\treturn !this.isSystemMessage && !this.isSelfMessage;\n\t\t},\n\t\tcontainerClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--self': this.isSelfMessage,\n\t\t\t\t'--opponent': this.isOpponentMessage,\n\t\t\t\t'--has-after-content': Boolean(this.$slots['after-message']),\n\t\t\t\t'--with-context-menu': this.withDefaultContextMenu,\n\t\t\t};\n\t\t},\n\t\tbodyClasses(): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\t'--transparent': !this.withBackground,\n\t\t\t\t'--has-error': this.hasError,\n\t\t\t};\n\t\t},\n\t\tshowRetryButton(): boolean\n\t\t{\n\t\t\treturn this.withRetryButton && this.isSelfMessage && this.hasError;\n\t\t},\n\t\thasError(): boolean\n\t\t{\n\t\t\treturn this.message.error;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonContainerClick(event: PointerEvent)\n\t\t{\n\t\t\tParser.executeClickEvent(event);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-message-base__scope bx-im-message-base__wrap\" :class=\"containerClasses\" :data-id=\"message.id\">\n\t\t\t<slot name=\"before-message\"></slot>\n\t\t\t<div\n\t\t\t\tclass=\"bx-im-message-base__container\" \n\t\t\t\t:class=\"containerClasses\"\n\t\t\t\t@click=\"onContainerClick\"\n\t\t\t>\n\t\t\t\t<div class=\"bx-im-message-base__body-with-retry-button\">\n\t\t\t\t\t<RetryButton v-if=\"showRetryButton\" :message=\"message\" :dialogId=\"dialogId\"/>\n\t\t\t\t\t<div class=\"bx-im-message-base__body\" :class=\"bodyClasses\">\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ContextMenu \n\t\t\t\t\tv-if=\"!hasError && withDefaultContextMenu\" \n\t\t\t\t\t:message=\"message\" \n\t\t\t\t\t:menuIsActiveForId=\"menuIsActiveForId\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<slot name=\"after-message\"></slot>\n\t\t</div>\n\t`,\n};\n"],"names":["BaseMessage","name","components","ContextMenu","RetryButton","MessageKeyboard","props","item","type","Object","required","dialogId","String","withBackground","Boolean","default","withDefaultContextMenu","withRetryButton","menuIsActiveForId","Number","computed","message","isSystemMessage","authorId","isSelfMessage","Core","getUserId","isOpponentMessage","containerClasses","$slots","bodyClasses","hasError","showRetryButton","error","methods","onContainerClick","event","Parser","executeClickEvent","template"],"mappings":";;;;;;;;CAQA;AACA,OAAaA,WAAW,GAAG;GAC1BC,IAAI,EAAE,aAAa;GACnBC,UAAU,EAAE;kBAAEC,4CAAW;kBAAEC,4CAAW;sBAAEC;IAAiB;GACzDC,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;MACV;KACDG,cAAc,EAAE;OACfL,IAAI,EAAEM,OAAO;OACbC,OAAO,EAAE;MACT;KACDC,sBAAsB,EAAE;OACvBR,IAAI,EAAEM,OAAO;OACbC,OAAO,EAAE;MACT;KACDE,eAAe,EAAE;OAChBT,IAAI,EAAEM,OAAO;OACbC,OAAO,EAAE;MACT;KACDG,iBAAiB,EAAE;OAClBV,IAAI,EAAE,CAACW,MAAM,EAAEP,MAAM,CAAC;OACtBG,OAAO,EAAE;;IAEV;GACDK,QAAQ,EACR;KACCC,OAAO,GACP;OACC,OAAO,IAAI,CAACd,IAAI;MAChB;KACDe,eAAe,GACf;OACC,OAAO,IAAI,CAACD,OAAO,CAACE,QAAQ,KAAK,CAAC;MAClC;KACDC,aAAa,GACb;OACC,OAAO,IAAI,CAACH,OAAO,CAACE,QAAQ,KAAKE,2BAAI,CAACC,SAAS,EAAE;MACjD;KACDC,iBAAiB,GACjB;OACC,OAAO,CAAC,IAAI,CAACL,eAAe,IAAI,CAAC,IAAI,CAACE,aAAa;MACnD;KACDI,gBAAgB,GAChB;OACC,OAAO;SACN,QAAQ,EAAE,IAAI,CAACJ,aAAa;SAC5B,YAAY,EAAE,IAAI,CAACG,iBAAiB;SACpC,qBAAqB,EAAEb,OAAO,CAAC,IAAI,CAACe,MAAM,CAAC,eAAe,CAAC,CAAC;SAC5D,qBAAqB,EAAE,IAAI,CAACb;QAC5B;MACD;KACDc,WAAW,GACX;OACC,OAAO;SACN,eAAe,EAAE,CAAC,IAAI,CAACjB,cAAc;SACrC,aAAa,EAAE,IAAI,CAACkB;QACpB;MACD;KACDC,eAAe,GACf;OACC,OAAO,IAAI,CAACf,eAAe,IAAI,IAAI,CAACO,aAAa,IAAI,IAAI,CAACO,QAAQ;MAClE;KACDA,QAAQ,GACR;OACC,OAAO,IAAI,CAACV,OAAO,CAACY,KAAK;;IAE1B;GACDC,OAAO,EACP;KACCC,gBAAgB,CAACC,KAAmB,EACpC;OACCC,uBAAM,CAACC,iBAAiB,CAACF,KAAK,CAAC;;IAEhC;GACDG,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;CAuBZ,CAAC;;;;;;;;"}