{"version":3,"file":"recent.bundle.js","sources":["../src/recent.js"],"sourcesContent":["import {Core} from 'im.v2.application.core';\nimport {RecentList as RecentListComponent} from 'im.v2.component.recent-list';\nimport {RecentPullHandler} from 'im.v2.provider.pull';\n\ntype RecentApplicationParams = {\n\tnode?: string | HTMLElement,\n\tcompactMode?: boolean\n}\n\nexport class RecentApplication\n{\n\tparams: RecentApplicationParams;\n\tinited: boolean = false;\n\tinitPromise: Promise = null;\n\tinitPromiseResolver: Function = null;\n\trootNode: string | HTMLElement = null;\n\tvueInstance: Object = null;\n\tcontroller: Object = null;\n\n\t#applicationName = 'RecentList';\n\n\tconstructor(params: RecentApplicationParams = {})\n\t{\n\t\tthis.initPromise = new Promise((resolve) => {\n\t\t\tthis.initPromiseResolver = resolve;\n\t\t});\n\n\t\tthis.params = params;\n\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.initCore()\n\t\t\t.then(() => this.initPullHandler())\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitCore()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tCore.ready().then(controller => {\n\t\t\t\tthis.controller = controller;\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tinitPullHandler()\n\t{\n\t\tthis.controller.pullClient.subscribe(\n\t\t\tnew RecentPullHandler({\n\t\t\t\tstore: this.controller.getStore(),\n\t\t\t\tcontroller: this.controller,\n\t\t\t\tapplication: this\n\t\t\t})\n\t\t);\n\n\t\treturn Promise.resolve();\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tname: this.#applicationName,\n\t\t\tel: this.rootNode,\n\t\t\tcomponents: {RecentListComponent},\n\t\t\ttemplate: `<RecentListComponent />`,\n\t\t})\n\t\t.then(vue => {\n\t\t\tthis.vueInstance = vue;\n\n\t\t\treturn Promise.resolve();\n\t\t});\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromiseResolver(this);\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n}"],"names":["RecentApplication","constructor","params","inited","initPromise","initPromiseResolver","rootNode","vueInstance","controller","Promise","resolve","node","document","createElement","initCore","then","initPullHandler","initComponent","initComplete","Core","ready","pullClient","subscribe","RecentPullHandler","store","getStore","application","createVue","name","el","components","RecentListComponent","template","vue"],"mappings":";;;;;;;;AASA,CAAO,MAAMA,iBAAN,CACP;CAWCC,EAAAA,WAAW,CAACC,MAA+B,GAAG,EAAnC,EACX;CAAA,SAVAC,MAUA,GAVkB,KAUlB;CAAA,SATAC,WASA,GATuB,IASvB;CAAA,SARAC,mBAQA,GARgC,IAQhC;CAAA,SAPAC,QAOA,GAPiC,IAOjC;CAAA,SANAC,WAMA,GANsB,IAMtB;CAAA,SALAC,UAKA,GALqB,IAKrB;CAAA;CAAA;CAAA,aAHmB;CAGnB;CACC,SAAKJ,WAAL,GAAmB,IAAIK,OAAJ,CAAaC,OAAD,IAAa;CAC3C,WAAKL,mBAAL,GAA2BK,OAA3B;CACA,KAFkB,CAAnB;CAIA,SAAKR,MAAL,GAAcA,MAAd;CAEA,SAAKI,QAAL,GAAgB,KAAKJ,MAAL,CAAYS,IAAZ,IAAoBC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApC;CAEA,SAAKC,QAAL,GACEC,IADF,CACO,MAAM,KAAKC,eAAL,EADb,EAEED,IAFF,CAEO,MAAM,KAAKE,aAAL,EAFb,EAGEF,IAHF,CAGO,MAAM,KAAKG,YAAL,EAHb;CAKA;;CAEDJ,EAAAA,QAAQ,GACR;CACC,WAAO,IAAIL,OAAJ,CAAaC,OAAD,IAAa;CAC/BS,MAAAA,2BAAI,CAACC,KAAL,GAAaL,IAAb,CAAkBP,UAAU,IAAI;CAC/B,aAAKA,UAAL,GAAkBA,UAAlB;CACAE,QAAAA,OAAO;CACP,OAHD;CAIA,KALM,CAAP;CAMA;;CAEDM,EAAAA,eAAe,GACf;CACC,SAAKR,UAAL,CAAgBa,UAAhB,CAA2BC,SAA3B,CACC,IAAIC,qCAAJ,CAAsB;CACrBC,MAAAA,KAAK,EAAE,KAAKhB,UAAL,CAAgBiB,QAAhB,EADc;CAErBjB,MAAAA,UAAU,EAAE,KAAKA,UAFI;CAGrBkB,MAAAA,WAAW,EAAE;CAHQ,KAAtB,CADD;CAQA,WAAOjB,OAAO,CAACC,OAAR,EAAP;CACA;;CAEDO,EAAAA,aAAa,GACb;CACC,WAAO,KAAKT,UAAL,CAAgBmB,SAAhB,CAA0B,IAA1B,EAAgC;CACtCC,MAAAA,IAAI,0CAAE,IAAF,qCADkC;CAEtCC,MAAAA,EAAE,EAAE,KAAKvB,QAF6B;CAGtCwB,MAAAA,UAAU,EAAE;CAACC,6BAAAA;CAAD,OAH0B;CAItCC,MAAAA,QAAQ,EAAG;CAJ2B,KAAhC,EAMNjB,IANM,CAMDkB,GAAG,IAAI;CACZ,WAAK1B,WAAL,GAAmB0B,GAAnB;CAEA,aAAOxB,OAAO,CAACC,OAAR,EAAP;CACA,KAVM,CAAP;CAWA;;CAEDQ,EAAAA,YAAY,GACZ;CACC,SAAKf,MAAL,GAAc,IAAd;CACA,SAAKE,mBAAL,CAAyB,IAAzB;CACA;;CAEDe,EAAAA,KAAK,GACL;CACC,QAAI,KAAKjB,MAAT,EACA;CACC,aAAOM,OAAO,CAACC,OAAR,CAAgB,IAAhB,CAAP;CACA;;CAED,WAAO,KAAKN,WAAZ;CACA;;CAhFF;;;;;;;;"}