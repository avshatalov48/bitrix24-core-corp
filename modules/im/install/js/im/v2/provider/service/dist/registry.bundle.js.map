{"version":3,"file":"registry.bundle.js","sources":["../src/recent.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\n\nimport {ChatTypes, EventType, RestMethod} from 'im.v2.const';\nimport {Logger} from 'im.v2.lib.logger';\n\nexport class RecentService\n{\n\tstatic instance = null;\n\n\tstore: Object = null;\n\trestClient: Object = null;\n\n\tdataIsPreloaded: boolean = false;\n\titemsPerPage: number = 50;\n\tisLoading: boolean = false;\n\tpagesLoaded: number = 0;\n\thasMoreItemsToLoad: boolean = true;\n\tlastMessageDate: string = null;\n\n\tstatic getInstance($Bitrix)\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this($Bitrix);\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.controller = $Bitrix.Data.get('controller');\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\n\t\tthis.onUpdateStateHandler = this.onUpdateState.bind(this);\n\t\tthis.onUserRequestHandler = this.onUserRequest.bind(this);\n\t\tEventEmitter.subscribe(EventType.recent.updateState, this.onUpdateStateHandler);\n\t\tEventEmitter.subscribe(EventType.recent.requestUser, this.onUserRequestHandler);\n\t}\n\n\t// region public\n\tloadFirstPage({ignorePreloadedItems = false} = {}): Promise\n\t{\n\t\tif (this.dataIsPreloaded && !ignorePreloadedItems)\n\t\t{\n\t\t\tLogger.warn(`Im.RecentList: first page was preloaded`);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems({firstPage: true});\n\t}\n\n\tloadNextPage(): Promise\n\t{\n\t\tif (this.isLoading || !this.hasMoreItemsToLoad)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems();\n\t}\n\n\tsetPreloadedData(params)\n\t{\n\t\tLogger.warn(`Im.RecentList: setting preloaded data`, params);\n\t\tconst {items, hasMore} = params;\n\n\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\tif (!hasMore)\n\t\t{\n\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t}\n\n\t\tthis.dataIsPreloaded = true;\n\n\t\tthis.updateModels(params);\n\t}\n\t// endregion public\n\n\trequestItems({firstPage = false} = {}): Promise\n\t{\n\t\tconst queryParams = {\n\t\t\t'SKIP_OPENLINES': 'Y',\n\t\t\t'LIMIT': this.itemsPerPage,\n\t\t\t'LAST_MESSAGE_DATE': firstPage? null : this.lastMessageDate,\n\t\t\t'GET_ORIGINAL_TEXT': 'Y'\n\t\t};\n\n\t\treturn this.restClient.callMethod(RestMethod.imRecentList, queryParams).then((result) => {\n\t\t\tthis.pagesLoaded++;\n\t\t\tLogger.warn(`Im.RecentList: ${this.pagesLoaded} page request result`, result.data());\n\t\t\tconst {items, hasMore} = result.data();\n\n\t\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\t\tif (!hasMore)\n\t\t\t{\n\t\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t\t}\n\n\t\t\treturn this.updateModels(result.data()).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t\t}).catch(error => {\n\t\t\tconsole.error('Im.RecentList: page request error', error);\n\t\t});\n\t}\n\n\tupdateModels(rawData): Promise\n\t{\n\t\tconst {users, dialogues, recent} = this.prepareDataForModels(rawData);\n\n\t\tconst usersPromise = this.store.dispatch('users/set', users);\n\t\tif (rawData.botList)\n\t\t{\n\t\t\tthis.store.dispatch('users/setBotList', rawData.botList);\n\t\t}\n\t\tconst dialoguesPromise = this.store.dispatch('dialogues/set', dialogues);\n\t\tconst recentPromise = this.store.dispatch('recent/set', recent);\n\n\t\treturn Promise.all([usersPromise, dialoguesPromise, recentPromise]);\n\t}\n\n\tonUpdateState({data})\n\t{\n\t\tLogger.warn(`Im.RecentList: setting UpdateState data`, data);\n\t\tthis.updateModels(data);\n\t}\n\n\tonUserRequest({data: {userId}})\n\t{\n\t\tthis.restClient.callMethod(RestMethod.imUserGet, {id: userId}).then((result) => {\n\t\t\tLogger.warn(`Im.RecentList: addition user request result`, result.data());\n\t\t\tthis.store.dispatch('users/set', result.data());\n\t\t}).catch((error) => {\n\t\t\tconsole.error('Im.RecentList: user request error', error);\n\t\t});\n\t}\n\n\tprepareDataForModels({items, birthdayList = []}): Object\n\t{\n\t\tconst result = {\n\t\t\tusers: [],\n\t\t\tdialogues: [],\n\t\t\trecent: []\n\t\t};\n\n\t\titems.forEach(item => {\n\t\t\t// user\n\t\t\tif (item.user && item.user.id && !this.isAddedAlready(result, 'users', item.user.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item.user);\n\t\t\t}\n\n\t\t\t// chat\n\t\t\tif (item.chat)\n\t\t\t{\n\t\t\t\tresult.dialogues.push(this.prepareGroupChat(item));\n\n\t\t\t\tif (item.user.id && !this.isAddedAlready(result, 'dialogues', item.user.id))\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item.user));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (item.user.id)\n\t\t\t{\n\t\t\t\tconst existingRecentItem = this.store.getters['recent/get'](item.user.id);\n\t\t\t\t// we should not update real chat with \"default\" chat data\n\t\t\t\tif (!existingRecentItem || !item.options.default_user_record)\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForUser(item));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// recent\n\t\t\tresult.recent.push({...item});\n\t\t});\n\n\t\tbirthdayList.forEach(item => {\n\t\t\tif (!this.isAddedAlready(result, 'users', item.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item);\n\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item));\n\t\t\t}\n\n\t\t\tif (!this.isAddedAlready(result, 'recent', item.id))\n\t\t\t{\n\t\t\t\tresult.recent.push(this.getBirthdayPlaceholder(item));\n\t\t\t}\n\t\t});\n\n\t\tLogger.warn(`Im.RecentList: prepared data for models`, result);\n\n\t\treturn result;\n\t}\n\n\tisAddedAlready(result: Object, type: 'users' | 'dialogues' | 'recent', id: string | number): boolean\n\t{\n\t\tif (type === 'users')\n\t\t{\n\t\t\treturn result.users.some(user => user.id === id);\n\t\t}\n\t\telse if (type === 'dialogues')\n\t\t{\n\t\t\treturn result.dialogues.some(chat => chat.dialogId === id);\n\t\t}\n\t\telse if (type === 'recent')\n\t\t{\n\t\t\treturn result.recent.some(item => item.id === id);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprepareGroupChat(item)\n\t{\n\t\treturn {\n\t\t\t...item.chat,\n\t\t\tcounter: item.counter,\n\t\t\tdialogId: item.id\n\t\t};\n\t}\n\n\tprepareChatForUser(item)\n\t{\n\t\treturn {\n\t\t\tchatId: item.chat_id,\n\t\t\tavatar: item.user.avatar,\n\t\t\tcolor: item.user.color,\n\t\t\tdialogId: item.id,\n\t\t\tname: item.user.name,\n\t\t\ttype: ChatTypes.user,\n\t\t\tcounter: item.counter\n\t\t};\n\t}\n\n\tprepareChatForAdditionalUser(user)\n\t{\n\t\treturn {\n\t\t\tdialogId: user.id,\n\t\t\tavatar: user.avatar,\n\t\t\tcolor: user.color,\n\t\t\tname: user.name,\n\t\t\ttype: ChatTypes.user\n\t\t};\n\t}\n\n\tgetBirthdayPlaceholder(item: Object): Object\n\t{\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\toptions: {\n\t\t\t\tbirthdayPlaceholder: true\n\t\t\t}\n\t\t};\n\t}\n\n\tgetLastMessageDate(items: Array): string\n\t{\n\t\tif (items.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn items.slice(-1)[0].message.date;\n\t}\n}"],"names":["RecentService","getInstance","$Bitrix","instance","constructor","store","restClient","dataIsPreloaded","itemsPerPage","isLoading","pagesLoaded","hasMoreItemsToLoad","lastMessageDate","controller","Data","get","RestClient","onUpdateStateHandler","onUpdateState","bind","onUserRequestHandler","onUserRequest","EventEmitter","subscribe","EventType","recent","updateState","requestUser","loadFirstPage","ignorePreloadedItems","Logger","warn","Promise","resolve","requestItems","firstPage","loadNextPage","setPreloadedData","params","items","hasMore","getLastMessageDate","updateModels","queryParams","callMethod","RestMethod","imRecentList","then","result","data","catch","error","console","rawData","users","dialogues","prepareDataForModels","usersPromise","dispatch","botList","dialoguesPromise","recentPromise","all","userId","imUserGet","id","birthdayList","forEach","item","user","isAddedAlready","push","chat","prepareGroupChat","prepareChatForAdditionalUser","existingRecentItem","getters","options","default_user_record","prepareChatForUser","getBirthdayPlaceholder","type","some","dialogId","counter","chatId","chat_id","avatar","color","name","ChatTypes","birthdayPlaceholder","length","slice","message","date"],"mappings":"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"}