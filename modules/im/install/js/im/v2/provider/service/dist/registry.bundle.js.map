{"version":3,"file":"registry.bundle.js","sources":["../src/recent.js"],"sourcesContent":["import {EventEmitter} from 'main.core.events';\n\nimport {ChatTypes, EventType, RestMethod} from 'im.v2.const';\nimport {Logger} from 'im.v2.lib.logger';\n\nexport class RecentService\n{\n\tstatic instance = null;\n\n\tstore: Object = null;\n\trestClient: Object = null;\n\n\tdataIsPreloaded: boolean = false;\n\titemsPerPage: number = 50;\n\tisLoading: boolean = false;\n\tpagesLoaded: number = 0;\n\thasMoreItemsToLoad: boolean = true;\n\tlastMessageDate: string = null;\n\n\tstatic getInstance($Bitrix)\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this($Bitrix);\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.controller = $Bitrix.Data.get('controller');\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\n\t\tthis.onUpdateStateHandler = this.onUpdateState.bind(this);\n\t\tthis.onUserRequestHandler = this.onUserRequest.bind(this);\n\t\tEventEmitter.subscribe(EventType.recent.updateState, this.onUpdateStateHandler);\n\t\tEventEmitter.subscribe(EventType.recent.requestUser, this.onUserRequestHandler);\n\t}\n\n\t// region public\n\tloadFirstPage({ignorePreloadedItems = false} = {}): Promise\n\t{\n\t\tif (this.dataIsPreloaded && !ignorePreloadedItems)\n\t\t{\n\t\t\tLogger.warn(`Im.RecentList: first page was preloaded`);\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems({firstPage: true});\n\t}\n\n\tloadNextPage(): Promise\n\t{\n\t\tif (this.isLoading || !this.hasMoreItemsToLoad)\n\t\t{\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.isLoading = true;\n\n\t\treturn this.requestItems();\n\t}\n\n\tsetPreloadedData(params)\n\t{\n\t\tLogger.warn(`Im.RecentList: setting preloaded data`, params);\n\t\tconst {items, hasMore} = params;\n\n\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\tif (!hasMore)\n\t\t{\n\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t}\n\n\t\tthis.dataIsPreloaded = true;\n\n\t\tthis.updateModels(params);\n\t}\n\t// endregion public\n\n\trequestItems({firstPage = false} = {}): Promise\n\t{\n\t\tconst queryParams = {\n\t\t\t'SKIP_OPENLINES': 'Y',\n\t\t\t'LIMIT': this.itemsPerPage,\n\t\t\t'LAST_MESSAGE_DATE': firstPage? null : this.lastMessageDate,\n\t\t\t'GET_ORIGINAL_TEXT': 'Y'\n\t\t};\n\n\t\treturn this.restClient.callMethod(RestMethod.imRecentList, queryParams).then((result) => {\n\t\t\tthis.pagesLoaded++;\n\t\t\tLogger.warn(`Im.RecentList: ${this.pagesLoaded} page request result`, result.data());\n\t\t\tconst {items, hasMore} = result.data();\n\n\t\t\tthis.lastMessageDate = this.getLastMessageDate(items);\n\n\t\t\tif (!hasMore)\n\t\t\t{\n\t\t\t\tthis.hasMoreItemsToLoad = false;\n\t\t\t}\n\n\t\t\treturn this.updateModels(result.data()).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t\t}).catch(error => {\n\t\t\tconsole.error('Im.RecentList: page request error', error);\n\t\t});\n\t}\n\n\tupdateModels(rawData): Promise\n\t{\n\t\tconst {users, dialogues, recent} = this.prepareDataForModels(rawData);\n\n\t\tconst usersPromise = this.store.dispatch('users/set', users);\n\t\tif (rawData.botList)\n\t\t{\n\t\t\tthis.store.dispatch('users/setBotList', rawData.botList);\n\t\t}\n\t\tconst dialoguesPromise = this.store.dispatch('dialogues/set', dialogues);\n\t\tconst recentPromise = this.store.dispatch('recent/set', recent);\n\n\t\treturn Promise.all([usersPromise, dialoguesPromise, recentPromise]);\n\t}\n\n\tonUpdateState({data})\n\t{\n\t\tLogger.warn(`Im.RecentList: setting UpdateState data`, data);\n\t\tthis.updateModels(data);\n\t}\n\n\tonUserRequest({data: {userId}})\n\t{\n\t\tthis.restClient.callMethod(RestMethod.imUserGet, {id: userId}).then((result) => {\n\t\t\tLogger.warn(`Im.RecentList: addition user request result`, result.data());\n\t\t\tthis.store.dispatch('users/set', result.data());\n\t\t}).catch((error) => {\n\t\t\tconsole.error('Im.RecentList: user request error', error);\n\t\t});\n\t}\n\n\tprepareDataForModels({items, birthdayList = []}): Object\n\t{\n\t\tconst result = {\n\t\t\tusers: [],\n\t\t\tdialogues: [],\n\t\t\trecent: []\n\t\t};\n\n\t\titems.forEach(item => {\n\t\t\t// user\n\t\t\tif (item.user && item.user.id && !this.isAddedAlready(result, 'users', item.user.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item.user);\n\t\t\t}\n\n\t\t\t// chat\n\t\t\tif (item.chat)\n\t\t\t{\n\t\t\t\tresult.dialogues.push(this.prepareGroupChat(item));\n\n\t\t\t\tif (item.user.id && !this.isAddedAlready(result, 'dialogues', item.user.id))\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item.user));\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (item.user.id)\n\t\t\t{\n\t\t\t\tconst existingRecentItem = this.store.getters['recent/get'](item.user.id);\n\t\t\t\t// we should not update real chat with \"default\" chat data\n\t\t\t\tif (!existingRecentItem || !item.options.default_user_record)\n\t\t\t\t{\n\t\t\t\t\tresult.dialogues.push(this.prepareChatForUser(item));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// recent\n\t\t\tresult.recent.push({...item});\n\t\t});\n\n\t\tbirthdayList.forEach(item => {\n\t\t\tif (!this.isAddedAlready(result, 'users', item.id))\n\t\t\t{\n\t\t\t\tresult.users.push(item);\n\t\t\t\tresult.dialogues.push(this.prepareChatForAdditionalUser(item));\n\t\t\t}\n\n\t\t\tif (!this.isAddedAlready(result, 'recent', item.id))\n\t\t\t{\n\t\t\t\tresult.recent.push(this.getBirthdayPlaceholder(item));\n\t\t\t}\n\t\t});\n\n\t\tLogger.warn(`Im.RecentList: prepared data for models`, result);\n\n\t\treturn result;\n\t}\n\n\tisAddedAlready(result: Object, type: 'users' | 'dialogues' | 'recent', id: string | number): boolean\n\t{\n\t\tif (type === 'users')\n\t\t{\n\t\t\treturn result.users.some(user => user.id === id);\n\t\t}\n\t\telse if (type === 'dialogues')\n\t\t{\n\t\t\treturn result.dialogues.some(chat => chat.dialogId === id);\n\t\t}\n\t\telse if (type === 'recent')\n\t\t{\n\t\t\treturn result.recent.some(item => item.id === id);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprepareGroupChat(item)\n\t{\n\t\treturn {\n\t\t\t...item.chat,\n\t\t\tcounter: item.counter,\n\t\t\tdialogId: item.id\n\t\t};\n\t}\n\n\tprepareChatForUser(item)\n\t{\n\t\treturn {\n\t\t\tchatId: item.chat_id,\n\t\t\tavatar: item.user.avatar,\n\t\t\tcolor: item.user.color,\n\t\t\tdialogId: item.id,\n\t\t\tname: item.user.name,\n\t\t\ttype: ChatTypes.user,\n\t\t\tcounter: item.counter\n\t\t};\n\t}\n\n\tprepareChatForAdditionalUser(user)\n\t{\n\t\treturn {\n\t\t\tdialogId: user.id,\n\t\t\tavatar: user.avatar,\n\t\t\tcolor: user.color,\n\t\t\tname: user.name,\n\t\t\ttype: ChatTypes.user\n\t\t};\n\t}\n\n\tgetBirthdayPlaceholder(item: Object): Object\n\t{\n\t\treturn {\n\t\t\tid: item.id,\n\t\t\toptions: {\n\t\t\t\tbirthdayPlaceholder: true\n\t\t\t}\n\t\t};\n\t}\n\n\tgetLastMessageDate(items: Array): string\n\t{\n\t\tif (items.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn items.slice(-1)[0].message.date;\n\t}\n}"],"names":["RecentService","getInstance","$Bitrix","instance","constructor","store","restClient","dataIsPreloaded","itemsPerPage","isLoading","pagesLoaded","hasMoreItemsToLoad","lastMessageDate","controller","Data","get","RestClient","onUpdateStateHandler","onUpdateState","bind","onUserRequestHandler","onUserRequest","EventEmitter","subscribe","EventType","recent","updateState","requestUser","loadFirstPage","ignorePreloadedItems","Logger","warn","Promise","resolve","requestItems","firstPage","loadNextPage","setPreloadedData","params","items","hasMore","getLastMessageDate","updateModels","queryParams","callMethod","RestMethod","imRecentList","then","result","data","catch","error","console","rawData","users","dialogues","prepareDataForModels","usersPromise","dispatch","botList","dialoguesPromise","recentPromise","all","userId","imUserGet","id","birthdayList","forEach","item","user","isAddedAlready","push","chat","prepareGroupChat","prepareChatForAdditionalUser","existingRecentItem","getters","options","default_user_record","prepareChatForUser","getBirthdayPlaceholder","type","some","dialogId","counter","chatId","chat_id","avatar","color","name","ChatTypes","birthdayPlaceholder","length","slice","message","date"],"mappings":"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"}