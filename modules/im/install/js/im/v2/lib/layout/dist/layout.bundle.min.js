this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,s,a,i,o){"use strict";var r=babelHelpers.classPrivateFieldLooseKey("instance");var n=babelHelpers.classPrivateFieldLooseKey("lastOpenedElement");var l=babelHelpers.classPrivateFieldLooseKey("onGoToMessageContext");var c=babelHelpers.classPrivateFieldLooseKey("onDesktopReload");class g{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,r)[r]){babelHelpers.classPrivateFieldLooseBase(this,r)[r]=new this}return babelHelpers.classPrivateFieldLooseBase(this,r)[r]}static init(){g.getInstance()}constructor(){Object.defineProperty(this,c,{value:u});Object.defineProperty(this,l,{value:b});Object.defineProperty(this,n,{writable:true,value:{}});t.EventEmitter.subscribe(o.EventType.dialog.goToMessageContext,babelHelpers.classPrivateFieldLooseBase(this,l)[l].bind(this));t.EventEmitter.subscribe(o.EventType.desktop.onReload,babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this))}async setLayout(e){if(e.entityId){this.setLastOpenedElement(e.name,e.entityId)}return s.Core.getStore().dispatch("application/setLayout",e)}getLayout(){return s.Core.getStore().getters["application/getLayout"]}saveCurrentLayout(){const e=this.getLayout();a.LocalStorageManager.getInstance().set(o.LocalStorageKey.layoutConfig,{name:e.name,entityId:e.entityId})}restoreLastLayout(){const e=a.LocalStorageManager.getInstance().get(o.LocalStorageKey.layoutConfig);if(!e){return Promise.resolve()}i.Logger.warn("LayoutManager: last layout was restored",e);a.LocalStorageManager.getInstance().remove(o.LocalStorageKey.layoutConfig);return this.setLayout(e)}getLastOpenedElement(e){var t;return(t=babelHelpers.classPrivateFieldLooseBase(this,n)[n][e])!=null?t:null}setLastOpenedElement(e,t){babelHelpers.classPrivateFieldLooseBase(this,n)[n][e]=t}destroy(){t.EventEmitter.unsubscribe(o.EventType.dialog.goToMessageContext,babelHelpers.classPrivateFieldLooseBase(this,l)[l]);t.EventEmitter.unsubscribe(o.EventType.desktop.onReload,babelHelpers.classPrivateFieldLooseBase(this,c)[c].bind(this))}}function b(e){const{dialogId:t,messageId:s}=e.getData();if(this.getLayout().entityId===t){return}this.setLayout({name:o.Layout.chat.name,entityId:t,contextId:s})}function u(){this.saveCurrentLayout()}Object.defineProperty(g,r,{writable:true,value:void 0});e.LayoutManager=g})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Event,BX.Messenger.v2.Application,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Const);
//# sourceMappingURL=layout.bundle.map.js