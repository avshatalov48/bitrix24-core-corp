{"version":3,"file":"utils.bundle.js","sources":["../src/browser.js","../src/date.js","../src/device.js","../src/platform.js","../src/rest.js","../src/text.js","../src/user.js","../src/file.js","../src/utils.js"],"sourcesContent":["import {Type, Dom, Browser} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const BrowserUtil = {\n\n\tisChrome(): boolean\n\t{\n\t\treturn Browser.isChrome();\n\t},\n\n\tisFirefox(): boolean\n\t{\n\t\treturn Browser.isFirefox();\n\t},\n\n\tisIe(): boolean\n\t{\n\t\treturn Browser.isIE();\n\t},\n\n\tisSafari(): boolean\n\t{\n\t\tif (this.isChrome())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!UA.includes('safari'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !this.isSafariBased();\n\t},\n\n\tisSafariBased(): boolean\n\t{\n\t\tif (!UA.includes('applewebkit'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\tUA.includes('yabrowser')\n\t\t\t|| UA.includes('yaapp_ios_browser')\n\t\t\t|| UA.includes('crios')\n\t\t);\n\t},\n\n\tfindParent(item, findTag): ?HTMLElement\n\t{\n\t\tconst isHtmlElement = findTag instanceof HTMLElement;\n\n\t\tif (\n\t\t\t!findTag\n\t\t\t|| (!Type.isString(findTag) && !isHtmlElement)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (; item && item !== document; item = item.parentNode)\n\t\t{\n\t\t\tif (Type.isString(findTag))\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(findTag))\n\t\t\t\t{\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isHtmlElement && item === findTag)\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n};","import {DateFormat} from 'im.v2.const';\nimport {Loc, Type} from 'main.core';\nimport 'main.date';\n\nexport const DateUtil = {\n\n\tgetFormatType(type = DateFormat.default): Object\n\t{\n\t\tlet format = [];\n\t\tif (type === DateFormat.groupTitle)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_DATE\")]\n\t\t\t];\n\t\t}\n\t\telse if (type === DateFormat.message)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")]\n\t\t\t];\n\t\t}\n\t\telse if (type === DateFormat.recentTitle)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"tommorow\", \"today\"],\n\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_DATE_RECENT\")]\n\t\t\t]\n\t\t}\n\t\telse if (type === DateFormat.recentLinesTitle)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_DATE_RECENT\")]\n\t\t\t]\n\t\t}\n\t\telse if (type === DateFormat.readedTitle)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"tommorow\", \"tommorow, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"today\", \"today, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"yesterday\", \"yesterday, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_READED\")]\n\t\t\t];\n\t\t}\n\t\telse if (type === DateFormat.vacationTitle)\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_DATE_SHORT\")]\n\t\t\t];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformat = [\n\t\t\t\t[\"tommorow\", \"tommorow, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"today\", \"today, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"yesterday\", \"yesterday, \"+Loc.getMessage(\"IM_UTILS_FORMAT_TIME\")],\n\t\t\t\t[\"\", Loc.getMessage(\"IM_UTILS_FORMAT_DATE_TIME\")]\n\t\t\t];\n\t\t}\n\n\t\treturn format;\n\t},\n\n\tgetDateFunction(localize = null): function\n\t{\n\t\tif (this.dateFormatFunction)\n\t\t{\n\t\t\treturn this.dateFormatFunction;\n\t\t}\n\n\t\tthis.dateFormatFunction = Object.create(BX.Main.Date);\n\t\tif (localize)\n\t\t{\n\t\t\t// eslint-disable-next-line bitrix-rules/no-pseudo-private\n\t\t\tthis.dateFormatFunction._getMessage = (phrase) => localize[phrase];\n\t\t}\n\n\t\treturn this.dateFormatFunction;\n\t},\n\n\tformat(timestamp, format = null, localize = null): function\n\t{\n\t\tif (!format)\n\t\t{\n\t\t\tformat = this.getFormatType(DateFormat.default, localize);\n\t\t}\n\n\t\treturn this.getDateFunction(localize).format(format, timestamp);\n\t},\n\n\tcast(date, def = new Date()): Date\n\t{\n\t\tlet result = def;\n\n\t\tif (date instanceof Date)\n\t\t{\n\t\t\tresult = date;\n\t\t}\n\t\telse if (Type.isString(date))\n\t\t{\n\t\t\tresult = new Date(date);\n\t\t}\n\t\telse if (Type.isNumber(date))\n\t\t{\n\t\t\tresult = new Date(date*1000);\n\t\t}\n\n\t\tif (\n\t\t\tresult instanceof Date\n\t\t\t&& Number.isNaN(result.getTime())\n\t\t)\n\t\t{\n\t\t\tresult = def;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tgetTimeToNextMidnight(): number\n\t{\n\t\tconst nextMidnight = new Date(new Date().setHours(24, 0, 0)).getTime();\n\t\treturn nextMidnight - Date.now();\n\t},\n\n\tgetStartOfTheDay(): Date\n\t{\n\t\treturn new Date((new Date()).setHours(0, 0));\n\t},\n\n\tisToday(date): boolean\n\t{\n\t\treturn this.cast(date).toDateString() === (new Date()).toDateString();\n\t}\n\n};","import {Type} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const DeviceUtil = {\n\n\tisDesktop(): boolean\n\t{\n\t\treturn !this.isMobile();\n\t},\n\n\tisMobile(): boolean\n\t{\n\t\tif (!Type.isUndefined(this.isMobileStatic))\n\t\t{\n\t\t\treturn this.isMobileStatic;\n\t\t}\n\n\t\tthis.isMobileStatic = (\n\t\t\tUA.includes('android')\n\t\t\t|| UA.includes('webos')\n\t\t\t|| UA.includes('iphone')\n\t\t\t|| UA.includes('ipad')\n\t\t\t|| UA.includes('ipod')\n\t\t\t|| UA.includes('blackberry')\n\t\t\t|| UA.includes('windows phone')\n\t\t);\n\n\t\treturn this.isMobileStatic;\n\t},\n\n\torientationHorizontal: 'horizontal',\n\torientationPortrait: 'portrait',\n\n\tgetOrientation(): string\n\t{\n\t\tif (!this.isMobile())\n\t\t{\n\t\t\treturn this.orientationHorizontal;\n\t\t}\n\n\t\treturn Math.abs(window.orientation) === 0? this.orientationPortrait: this.orientationHorizontal;\n\t},\n\n};","import {Type, Browser} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const PlatformUtil = {\n\n\tisMac(): boolean\n\t{\n\t\treturn Browser.isMac();\n\t},\n\tisLinux(): boolean\n\t{\n\t\treturn Browser.isLinux();\n\t},\n\tisWindows(): boolean\n\t{\n\t\treturn Browser.isWin() || (!this.isMac() && !this.isLinux());\n\t},\n\tisBitrixMobile(): boolean\n\t{\n\t\treturn UA.includes('bitrixmobile');\n\t},\n\tisBitrixDesktop(): boolean\n\t{\n\t\treturn UA.includes('bitrixdesktop');\n\t},\n\tgetDesktopVersion(): number\n\t{\n\t\tif (!Type.isUndefined(this.getDesktopVersionStatic))\n\t\t{\n\t\t\treturn this.getDesktopVersionStatic;\n\t\t}\n\n\t\tif (Type.isUndefined(window.BXDesktopSystem))\n\t\t{\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst version = window.BXDesktopSystem.GetProperty('versionParts');\n\t\tthis.getDesktopVersionStatic = version[3];\n\n\t\treturn this.getDesktopVersionStatic;\n\t},\n\tisDesktopFeatureEnabled(code: string)\n\t{\n\t\tif (!this.isBitrixDesktop() || !Type.isFunction(BXDesktopSystem.FeatureEnabled))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !!BXDesktopSystem.FeatureEnabled(code);\n\t},\n\tisMobile(): boolean\n\t{\n\t\treturn this.isAndroid() || this.isIos() || this.isBitrixMobile();\n\t},\n\tisIos(): boolean\n\t{\n\t\treturn Browser.isIOS();\n\t},\n\tgetIosVersion(): ?string\n\t{\n\t\tif (!this.isIos())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst matches = UA.match(/(iphone|ipad)(.+)(OS\\s([0-9]+)([_.]([0-9]+))?)/i);\n\t\tif (!matches || !matches[4])\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn parseFloat(matches[4]+'.'+(matches[6]? matches[6]: 0));\n\t},\n\tisAndroid(): boolean\n\t{\n\t\treturn Browser.isAndroid();\n\t},\n\topenNewPage(url): boolean\n\t{\n\t\tif (!url)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isBitrixMobile())\n\t\t{\n\t\t\tconst MobileTools = window.BX.MobileTools;\n\t\t\tif (Type.isUndefined())\n\t\t\t{\n\t\t\t\tconst openWidget = MobileTools.resolveOpenFunction(url);\n\t\t\t\tif (openWidget)\n\t\t\t\t{\n\t\t\t\t\topenWidget();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.app.openNewPage(url);\n\n\t\t\treturn true;\n\t\t}\n\n\t\twindow.open(url, '_blank');\n\n\t\treturn true;\n\t}\n};","import {Type} from 'main.core';\nimport {PlatformUtil} from './platform';\n\nexport const RestUtil = {\n\n\tgetLogTrackingParams(params = {}): string\n\t{\n\t\tconst result = [];\n\n\t\tlet {\n\t\t\tname = 'tracking',\n\t\t\tdata = [],\n\t\t} = params;\n\n\t\tconst {\n\t\t\tdialog = null,\n\t\t\tmessage = null,\n\t\t\tfiles = null,\n\t\t} = params;\n\n\t\tname = encodeURIComponent(name);\n\n\t\tif (Type.isPlainObject(data))\n\t\t{\n\t\t\tconst dataArray = [];\n\t\t\tfor (const name in data)\n\t\t\t{\n\t\t\t\tif (data.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tdataArray.push(encodeURIComponent(name)+\"=\"+encodeURIComponent(data[name]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata = dataArray;\n\t\t}\n\t\telse if (!Type.isArray(data))\n\t\t{\n\t\t\tdata = [];\n\t\t}\n\n\t\tif (Type.isObjectLike(dialog))\n\t\t{\n\t\t\tresult.push('timType='+dialog.type);\n\n\t\t\tif (dialog.type === 'lines')\n\t\t\t{\n\t\t\t\tresult.push('timLinesType='+dialog.entityId.split('|')[0]);\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isNull(files))\n\t\t{\n\t\t\tlet type = 'file';\n\t\t\tif (Type.isArray(files) && files[0])\n\t\t\t{\n\t\t\t\ttype = files[0].type;\n\t\t\t}\n\t\t\telse if (Type.isObjectLike(files))\n\t\t\t{\n\t\t\t\ttype = files.type;\n\t\t\t}\n\t\t\tresult.push('timMessageType='+type);\n\t\t}\n\t\telse if (!Type.isNull(message))\n\t\t{\n\t\t\tresult.push('timMessageType=text');\n\t\t}\n\n\t\tif (PlatformUtil.isBitrixMobile())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixMobile');\n\t\t}\n\t\telse if (PlatformUtil.isBitrixDesktop())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixDesktop');\n\t\t}\n\t\telse if (PlatformUtil.isIos() || PlatformUtil.isAndroid())\n\t\t{\n\t\t\tresult.push('timDevice=mobile');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult.push('timDevice=web');\n\t\t}\n\n\t\treturn name + (data.length? '&'+data.join('&'): '') + (result.length? '&'+result.join('&'): '');\n\t},\n};\n","import {Type, Loc, Text, Dom} from 'main.core';\n\nexport const TextUtil = {\n\n\tconvertHtmlEntities(text: string): string\n\t{\n\t\treturn Dom.create({\n\t\t\ttag: 'span',\n\t\t\thtml: text\n\t\t}).innerText;\n\t},\n\n\tconvertSnakeToCamelCase(text: string): string\n\t{\n\t\treturn text.replace(/(_[a-z])/gi, ($1) => {\n\t\t\treturn $1.toUpperCase().replace('_', '');\n\t\t});\n\t},\n\n\tescapeRegex(string): string\n\t{\n\t\treturn string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\t},\n\n\tgetLocalizeForNumber(phrase, number, language = 'en'): string\n\t{\n\t\tlet pluralFormType = 1;\n\n\t\tnumber = parseInt(number);\n\n\t\tif (number < 0)\n\t\t{\n\t\t\tnumber = number * -1;\n\t\t}\n\n\t\tif (language)\n\t\t{\n\t\t\tswitch (language)\n\t\t\t{\n\t\t\t\tcase 'de':\n\t\t\t\tcase 'en':\n\t\t\t\t\tpluralFormType = ((number !== 1) ? 1 : 0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ru':\n\t\t\t\tcase 'ua':\n\t\t\t\t\tpluralFormType = (((number%10 === 1) && (number%100 !== 11)) ? 0 : (((number%10 >= 2) && (number%10 <= 4) && ((number%100 < 10) || (number%100 >= 20))) ? 1 : 2));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage(phrase + '_PLURAL_' + pluralFormType);\n\t},\n\n\tgetFirstLetters(text): string\n\t{\n\t\tconst validSymbolsPattern = /[\\p{L}\\p{N} ]/u;\n\n\t\tconst words = text.split(/[\\s,]/).filter(word => {\n\t\t\tconst firstLetter = word.charAt(0);\n\t\t\treturn validSymbolsPattern.test(firstLetter);\n\t\t});\n\n\t\tif (words.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (words.length > 1)\n\t\t{\n\t\t\treturn words[0].charAt(0) + words[1].charAt(0);\n\t\t}\n\n\t\treturn words[0].charAt(0);\n\t},\n\n\tinsertUnseenWhitespace(text: string, splitIndex: number): string\n\t{\n\t\tif (text.length <= splitIndex)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tconst UNSEEN_SPACE = '\\u200B';\n\n\t\tlet firstPart = text.slice(0, splitIndex + 1);\n\t\tconst secondPart = text.slice(splitIndex + 1);\n\t\tconst hasWhitespace = /\\s/.test(firstPart);\n\t\tconst hasUserCode = /\\[user=(\\d+)(\\s)?(replace)?](.*?)\\[\\/user]/ig.test(text);\n\n\t\tif (firstPart.length === splitIndex + 1 && !hasWhitespace && !hasUserCode)\n\t\t{\n\t\t\tfirstPart += UNSEEN_SPACE;\n\t\t}\n\n\t\treturn firstPart + secondPart;\n\t},\n\n\tisUuidV4(uuid): boolean\n\t{\n\t\tif (!Type.isString(uuid))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst uuidV4pattern = new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);\n\n\t\treturn uuid.search(uuidV4pattern) === 0;\n\t},\n\n\tcheckUrl(url): boolean\n\t{\n\t\tconst allowList = [\n\t\t\t\"http:\",\n\t\t\t\"https:\",\n\t\t\t\"ftp:\",\n\t\t\t\"file:\",\n\t\t\t\"tel:\",\n\t\t\t\"callto:\",\n\t\t\t\"mailto:\",\n\t\t\t\"skype:\",\n\t\t\t\"viber:\",\n\t\t];\n\n\t\tconst checkCorrectStartLink = ['/', ...allowList].find(protocol => {\n\t\t\treturn url.startsWith(protocol);\n\t\t});\n\t\tif (!checkCorrectStartLink)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = Dom.create({ tag: 'a', attrs: { href: url }});\n\n\t\treturn allowList.indexOf(element.protocol) > -1;\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.encode from main.core\n\t */\n\thtmlspecialchars(text): string\n\t{\n\t\treturn Text.encode(text);\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.decode from main.core\n\t */\n\thtmlspecialcharsback(text): string\n\t{\n\t\treturn Text.decode(text);\n\t},\n};","import {Extension, Type, Loc} from 'main.core';\n\nimport {DateFormat} from 'im.v2.const';\n\nimport {DateUtil} from './date';\n\nimport 'main.date';\n\nconst settings = Extension.getSettings('im.v2.lib.utils');\n\nexport const UserUtil = {\n\n\tgetLastDateText(params = {}): string\n\t{\n\t\tif (params.bot || params.network || !params.lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst isOnline = this.isOnline(params.lastActivityDate);\n\t\tconst isMobileOnline = this.isMobileOnline(params.lastActivityDate, params.mobileLastDate);\n\n\t\tlet text = '';\n\n\t\t// \"away for X minutes\"\n\t\tif (isOnline && params.idle && !isMobileOnline)\n\t\t{\n\t\t\ttext = Loc.getMessage('IM_STATUS_AWAY_TITLE').replace('#TIME#', this.getIdleText(params.idle));\n\t\t}\n\n\t\tconst lastSeenText = this.getLastSeenText(params.lastActivityDate);\n\t\t// truly online, last activity date < 5 minutes ago - show status text\n\t\tif (isOnline && !lastSeenText)\n\t\t{\n\t\t\ttext = this.getStatusTextForLastDate(params.status);\n\t\t}\n\n\t\t// last activity date > 5 minutes ago - \"Was online X minutes ago\"\n\t\tif (lastSeenText)\n\t\t{\n\t\t\tconst phraseCode = `IM_LAST_SEEN_${params.gender}`;\n\t\t\ttext = Loc.getMessage(phraseCode).replace('#POSITION#. ', '').replace('#LAST_SEEN#', lastSeenText);\n\t\t}\n\n\t\t// if on vacation - add postfix with vacation info\n\t\tif (params.absent)\n\t\t{\n\t\t\tconst dateFunction = DateUtil.getDateFunction();\n\t\t\tconst vacationFormat = DateUtil.getFormatType(DateFormat.vacationTitle);\n\t\t\tconst vacationText = Loc.getMessage('IM_STATUS_VACATION_TITLE').replace('#DATE#',\n\t\t\t\tdateFunction.format(vacationFormat, params.absent.getTime() / 1000)\n\t\t\t);\n\n\t\t\ttext = text ? `${text}. ${vacationText}`: vacationText;\n\t\t}\n\n\t\treturn text;\n\t},\n\n\tgetIdleText(idle = '')\n\t{\n\t\tif (!idle)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn DateUtil.getDateFunction().format([\n\t\t\t['s60', 'sdiff'],\n\t\t\t['i60', 'idiff'],\n\t\t\t['H24', 'Hdiff'],\n\t\t\t['', 'ddiff']\n\t\t], idle);\n\t},\n\n\tisOnline(lastActivityDate): boolean\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Date.now() - lastActivityDate.getTime() <= this.getOnlineLimit() * 1000;\n\t},\n\n\tisMobileOnline(lastActivityDate, mobileLastDate): boolean\n\t{\n\t\tif (!lastActivityDate || !mobileLastDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\treturn (\n\t\t\tDate.now() - mobileLastDate.getTime() < this.getOnlineLimit() * 1000\n\t\t\t&& lastActivityDate - mobileLastDate < FIVE_MINUTES\n\t\t);\n\t},\n\n\tgetStatusTextForLastDate(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_${status}`) ?? status;\n\t},\n\n\tgetStatusText(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_TEXT_${status}`) ?? status;\n\t},\n\n\tgetLastSeenText(lastActivityDate): string\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\tif (Date.now() - lastActivityDate.getTime() > FIVE_MINUTES)\n\t\t{\n\t\t\treturn DateUtil.getDateFunction().formatLastActivityDate(lastActivityDate);\n\t\t}\n\n\t\treturn '';\n\t},\n\n\tisBirthdayToday(birthday): boolean\n\t{\n\t\treturn birthday === DateUtil.format(new Date(), 'd-m');\n\t},\n\n\tgetOnlineLimit(): number\n\t{\n\t\tconst limitOnline = settings.get('limitOnline', false);\n\n\t\tconst FIFTEEN_MINUTES = 15 * 60;\n\t\treturn limitOnline? Number.parseInt(limitOnline, 10): FIFTEEN_MINUTES;\n\t},\n\n\tgetProfileLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `/company/personal/user/${userId}/`;\n\t},\n\n\tgetCalendarLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `/company/personal/user/${userId}/calendar/`;\n\t},\n\n\tgetMentionBbCode(userId: number | string, name: string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `[USER=${userId}]${name}[/USER]`;\n\t}\n};\n","import {Loc} from 'main.core';\nimport {FileType} from 'im.v2.const';\n\nexport const FileUtil = {\n\tgetFileExtension(fileName: string): string\n\t{\n\t\treturn fileName.split('.').splice(-1)[0];\n\t},\n\n\tgetIconTypeByFilename(fileName: string): string\n\t{\n\t\tconst extension = this.getFileExtension(fileName);\n\n\t\treturn this.getIconTypeByExtension(extension);\n\t},\n\n\tgetIconTypeByExtension(extension: string): string\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t},\n\n\tgetFileTypeByExtension(extension: string): string\n\t{\n\t\tlet type = FileType.file;\n\n\t\tswitch (extension)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ttype = FileType.image;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ttype = FileType.video;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp3':\n\t\t\t\ttype = FileType.audio;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn type;\n\t},\n\n\tformatFileSize(fileSize: number): string\n\t{\n\t\tif (!fileSize || fileSize <= 0)\n\t\t{\n\t\t\tfileSize = 0;\n\t\t}\n\n\t\tconst sizes = ['BYTE', 'KB', 'MB', 'GB', 'TB'];\n\t\tconst KILOBYTE_SIZE = 1024;\n\n\t\tlet position = 0;\n\t\twhile (fileSize >= KILOBYTE_SIZE && position < sizes.length - 1)\n\t\t{\n\t\t\tfileSize /= KILOBYTE_SIZE;\n\t\t\tposition++;\n\t\t}\n\n\t\tconst phrase = Loc.getMessage(`IM_UTILS_FILE_SIZE_${sizes[position]}`);\n\t\tconst roundedSize = Math.round(fileSize);\n\n\t\treturn `${roundedSize} ${phrase}`;\n\t},\n\n\tgetShortFileName(fileName: string, maxLength: number): string\n\t{\n\t\tif (!fileName || fileName.length < maxLength)\n\t\t{\n\t\t\treturn fileName;\n\t\t}\n\n\t\tconst DOT_LENGTH = 1;\n\t\tconst SYMBOLS_TO_TAKE_BEFORE_EXTENSION = 10;\n\n\t\tconst extension = this.getFileExtension(fileName);\n\t\tconst symbolsToTakeFromEnd = extension.length + DOT_LENGTH + SYMBOLS_TO_TAKE_BEFORE_EXTENSION;\n\t\tconst secondPart = fileName.slice(-symbolsToTakeFromEnd);\n\t\tconst firstPart = fileName.slice(0, maxLength - secondPart.length - DOT_LENGTH * 3);\n\n\t\treturn `${firstPart.trim()}...${secondPart.trim()}`;\n\t},\n\n\tgetViewerDataAttributes(viewerAttributes): Object\n\t{\n\t\tif (!viewerAttributes)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\treturn {\n\t\t\t'data-viewer': true,\n\t\t\t'data-viewer-type': viewerAttributes.viewerType,\n\t\t\t'data-object-id': viewerAttributes.objectId,\n\t\t\t'data-src': viewerAttributes.src,\n\t\t\t'data-viewer-group-by': viewerAttributes.viewerGroupBy,\n\t\t\t'data-title': viewerAttributes.title,\n\t\t\t'data-actions': viewerAttributes.actions,\n\t\t};\n\t}\n};","import {BrowserUtil} from './browser';\nimport {DateUtil} from './date';\nimport {DeviceUtil} from './device';\nimport {PlatformUtil} from './platform';\nimport {RestUtil} from './rest';\nimport {TextUtil} from './text';\nimport {UserUtil} from './user';\nimport {FileUtil} from './file';\n\nexport const Utils = {\n\tbrowser: BrowserUtil,\n\tdate: DateUtil,\n\tdevice: DeviceUtil,\n\tplatform: PlatformUtil,\n\trest: RestUtil,\n\ttext: TextUtil,\n\tuser: UserUtil,\n\tfile: FileUtil,\n};"],"names":["UA","navigator","userAgent","toLowerCase","BrowserUtil","isChrome","Browser","isFirefox","isIe","isIE","isSafari","includes","isSafariBased","findParent","item","findTag","isHtmlElement","HTMLElement","Type","isString","document","parentNode","Dom","hasClass","DateUtil","getFormatType","type","DateFormat","default","format","groupTitle","Loc","getMessage","message","recentTitle","recentLinesTitle","readedTitle","vacationTitle","getDateFunction","localize","dateFormatFunction","Object","create","BX","Main","Date","_getMessage","phrase","timestamp","cast","date","def","result","isNumber","Number","isNaN","getTime","getTimeToNextMidnight","nextMidnight","setHours","now","getStartOfTheDay","isToday","toDateString","DeviceUtil","isDesktop","isMobile","isUndefined","isMobileStatic","orientationHorizontal","orientationPortrait","getOrientation","Math","abs","window","orientation","PlatformUtil","isMac","isLinux","isWindows","isWin","isBitrixMobile","isBitrixDesktop","getDesktopVersion","getDesktopVersionStatic","BXDesktopSystem","version","GetProperty","isDesktopFeatureEnabled","code","isFunction","FeatureEnabled","isAndroid","isIos","isIOS","getIosVersion","matches","match","parseFloat","openNewPage","url","MobileTools","openWidget","resolveOpenFunction","app","open","RestUtil","getLogTrackingParams","params","name","data","dialog","files","encodeURIComponent","isPlainObject","dataArray","hasOwnProperty","push","isArray","isObjectLike","entityId","split","isNull","length","join","TextUtil","convertHtmlEntities","text","tag","html","innerText","convertSnakeToCamelCase","replace","$1","toUpperCase","escapeRegex","string","getLocalizeForNumber","number","language","pluralFormType","parseInt","getFirstLetters","validSymbolsPattern","words","filter","word","firstLetter","charAt","test","insertUnseenWhitespace","splitIndex","UNSEEN_SPACE","firstPart","slice","secondPart","hasWhitespace","hasUserCode","isUuidV4","uuid","uuidV4pattern","RegExp","search","checkUrl","allowList","checkCorrectStartLink","find","protocol","startsWith","element","attrs","href","indexOf","htmlspecialchars","Text","encode","htmlspecialcharsback","decode","settings","Extension","getSettings","UserUtil","getLastDateText","bot","network","lastActivityDate","isOnline","isMobileOnline","mobileLastDate","idle","getIdleText","lastSeenText","getLastSeenText","getStatusTextForLastDate","status","phraseCode","gender","absent","dateFunction","vacationFormat","vacationText","getOnlineLimit","FIVE_MINUTES","getStatusText","formatLastActivityDate","isBirthdayToday","birthday","limitOnline","get","FIFTEEN_MINUTES","getProfileLink","userId","getCalendarLink","getMentionBbCode","FileUtil","getFileExtension","fileName","splice","getIconTypeByFilename","extension","getIconTypeByExtension","icon","toString","getFileTypeByExtension","FileType","file","image","video","audio","formatFileSize","fileSize","sizes","KILOBYTE_SIZE","position","roundedSize","round","getShortFileName","maxLength","DOT_LENGTH","SYMBOLS_TO_TAKE_BEFORE_EXTENSION","symbolsToTakeFromEnd","trim","getViewerDataAttributes","viewerAttributes","viewerType","objectId","src","viewerGroupBy","title","actions","Utils","browser","device","platform","rest","user"],"mappings":"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"}