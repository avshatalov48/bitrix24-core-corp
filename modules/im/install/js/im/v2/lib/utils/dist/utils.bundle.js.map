{"version":3,"file":"utils.bundle.js","sources":["../src/browser.js","../src/date.js","../src/device.js","../src/platform.js","../src/rest.js","../src/text.js","../src/user.js","../src/file.js","../src/key.js","../src/dom.js","../src/dialog.js","../src/utils.js"],"sourcesContent":["import {Type, Dom, Browser} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const BrowserUtil = {\n\n\tisChrome(): boolean\n\t{\n\t\treturn Browser.isChrome();\n\t},\n\n\tisFirefox(): boolean\n\t{\n\t\treturn Browser.isFirefox();\n\t},\n\n\tisIe(): boolean\n\t{\n\t\treturn Browser.isIE();\n\t},\n\n\tisSafari(): boolean\n\t{\n\t\tif (this.isChrome())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!UA.includes('safari'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !this.isSafariBased();\n\t},\n\n\tisSafariBased(): boolean\n\t{\n\t\tif (!UA.includes('applewebkit'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\tUA.includes('yabrowser')\n\t\t\t|| UA.includes('yaapp_ios_browser')\n\t\t\t|| UA.includes('crios')\n\t\t);\n\t},\n\n\tfindParent(item, findTag): ?HTMLElement\n\t{\n\t\tconst isHtmlElement = findTag instanceof HTMLElement;\n\n\t\tif (\n\t\t\t!findTag\n\t\t\t|| (!Type.isString(findTag) && !isHtmlElement)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (; item && item !== document; item = item.parentNode)\n\t\t{\n\t\t\tif (Type.isString(findTag))\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(findTag))\n\t\t\t\t{\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isHtmlElement && item === findTag)\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\topenLink(link, target = '_blank')\n\t{\n\t\twindow.open(link, target, '', true);\n\t\treturn true;\n\t}\n};","import {Type} from 'main.core';\n\nexport const DateUtil = {\n\tcast(date, def = new Date()): Date\n\t{\n\t\tlet result = def;\n\n\t\tif (date instanceof Date)\n\t\t{\n\t\t\tresult = date;\n\t\t}\n\t\telse if (Type.isString(date))\n\t\t{\n\t\t\tresult = new Date(date);\n\t\t}\n\t\telse if (Type.isNumber(date))\n\t\t{\n\t\t\tresult = new Date(date*1000);\n\t\t}\n\n\t\tif (\n\t\t\tresult instanceof Date\n\t\t\t&& Number.isNaN(result.getTime())\n\t\t)\n\t\t{\n\t\t\tresult = def;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tgetTimeToNextMidnight(): number\n\t{\n\t\tconst nextMidnight = new Date(new Date().setHours(24, 0, 0)).getTime();\n\t\treturn nextMidnight - Date.now();\n\t},\n\n\tgetStartOfTheDay(): Date\n\t{\n\t\treturn new Date((new Date()).setHours(0, 0));\n\t},\n\n\tisToday(date): boolean\n\t{\n\t\treturn this.cast(date).toDateString() === (new Date()).toDateString();\n\t}\n\n};","import {Type} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const DeviceUtil = {\n\n\tisDesktop(): boolean\n\t{\n\t\treturn !this.isMobile();\n\t},\n\n\tisMobile(): boolean\n\t{\n\t\tif (!Type.isUndefined(this.isMobileStatic))\n\t\t{\n\t\t\treturn this.isMobileStatic;\n\t\t}\n\n\t\tthis.isMobileStatic = (\n\t\t\tUA.includes('android')\n\t\t\t|| UA.includes('webos')\n\t\t\t|| UA.includes('iphone')\n\t\t\t|| UA.includes('ipad')\n\t\t\t|| UA.includes('ipod')\n\t\t\t|| UA.includes('blackberry')\n\t\t\t|| UA.includes('windows phone')\n\t\t);\n\n\t\treturn this.isMobileStatic;\n\t},\n\n\torientationHorizontal: 'horizontal',\n\torientationPortrait: 'portrait',\n\n\tgetOrientation(): string\n\t{\n\t\tif (!this.isMobile())\n\t\t{\n\t\t\treturn this.orientationHorizontal;\n\t\t}\n\n\t\treturn Math.abs(window.orientation) === 0? this.orientationPortrait: this.orientationHorizontal;\n\t},\n\n};","import {Type, Browser} from 'main.core';\n\nimport {DesktopManager} from 'im.v2.lib.desktop';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const PlatformUtil = {\n\n\tisMac(): boolean\n\t{\n\t\treturn Browser.isMac();\n\t},\n\tisLinux(): boolean\n\t{\n\t\treturn Browser.isLinux();\n\t},\n\tisWindows(): boolean\n\t{\n\t\treturn Browser.isWin() || (!this.isMac() && !this.isLinux());\n\t},\n\tisBitrixMobile(): boolean\n\t{\n\t\treturn UA.includes('bitrixmobile');\n\t},\n\tisBitrixDesktop(): boolean\n\t{\n\t\treturn DesktopManager.isDesktop();\n\t},\n\tgetDesktopVersion(): number\n\t{\n\t\treturn DesktopManager.getInstance().getDesktopVersion();\n\t},\n\tisDesktopFeatureEnabled(code: string): boolean\n\t{\n\t\treturn DesktopManager.getInstance().isDesktopFeatureEnabled(code);\n\t},\n\tisMobile(): boolean\n\t{\n\t\treturn this.isAndroid() || this.isIos() || this.isBitrixMobile();\n\t},\n\tisIos(): boolean\n\t{\n\t\treturn Browser.isIOS();\n\t},\n\tgetIosVersion(): ?string\n\t{\n\t\tif (!this.isIos())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst matches = UA.match(/(iphone|ipad)(.+)(OS\\s([0-9]+)([_.]([0-9]+))?)/i);\n\t\tif (!matches || !matches[4])\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn parseFloat(matches[4]+'.'+(matches[6]? matches[6]: 0));\n\t},\n\tisAndroid(): boolean\n\t{\n\t\treturn Browser.isAndroid();\n\t},\n\topenNewPage(url): boolean\n\t{\n\t\tif (!url)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isBitrixMobile())\n\t\t{\n\t\t\tconst MobileTools = window.BX.MobileTools;\n\t\t\tif (Type.isUndefined())\n\t\t\t{\n\t\t\t\tconst openWidget = MobileTools.resolveOpenFunction(url);\n\t\t\t\tif (openWidget)\n\t\t\t\t{\n\t\t\t\t\topenWidget();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.app.openNewPage(url);\n\n\t\t\treturn true;\n\t\t}\n\n\t\twindow.open(url, '_blank');\n\n\t\treturn true;\n\t}\n};","import {Type} from 'main.core';\nimport {PlatformUtil} from './platform';\n\nexport const RestUtil = {\n\n\tgetLogTrackingParams(params = {}): string\n\t{\n\t\tconst result = [];\n\n\t\tlet {\n\t\t\tname = 'tracking',\n\t\t\tdata = [],\n\t\t} = params;\n\n\t\tconst {\n\t\t\tdialog = null,\n\t\t\tmessage = null,\n\t\t\tfiles = null,\n\t\t} = params;\n\n\t\tname = encodeURIComponent(name);\n\n\t\tif (Type.isPlainObject(data))\n\t\t{\n\t\t\tconst dataArray = [];\n\t\t\tfor (const name in data)\n\t\t\t{\n\t\t\t\tif (data.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tdataArray.push(encodeURIComponent(name)+\"=\"+encodeURIComponent(data[name]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata = dataArray;\n\t\t}\n\t\telse if (!Type.isArray(data))\n\t\t{\n\t\t\tdata = [];\n\t\t}\n\n\t\tif (Type.isObjectLike(dialog))\n\t\t{\n\t\t\tresult.push('timType='+dialog.type);\n\n\t\t\tif (dialog.type === 'lines')\n\t\t\t{\n\t\t\t\tresult.push('timLinesType='+dialog.entityId.split('|')[0]);\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isNull(files))\n\t\t{\n\t\t\tlet type = 'file';\n\t\t\tif (Type.isArray(files) && files[0])\n\t\t\t{\n\t\t\t\ttype = files[0].type;\n\t\t\t}\n\t\t\telse if (Type.isObjectLike(files))\n\t\t\t{\n\t\t\t\ttype = files.type;\n\t\t\t}\n\t\t\tresult.push('timMessageType='+type);\n\t\t}\n\t\telse if (!Type.isNull(message))\n\t\t{\n\t\t\tresult.push('timMessageType=text');\n\t\t}\n\n\t\tif (PlatformUtil.isBitrixMobile())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixMobile');\n\t\t}\n\t\telse if (PlatformUtil.isBitrixDesktop())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixDesktop');\n\t\t}\n\t\telse if (PlatformUtil.isIos() || PlatformUtil.isAndroid())\n\t\t{\n\t\t\tresult.push('timDevice=mobile');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult.push('timDevice=web');\n\t\t}\n\n\t\treturn name + (data.length? '&'+data.join('&'): '') + (result.length? '&'+result.join('&'): '');\n\t},\n};\n","import {Type, Loc, Text, Dom} from 'main.core';\n\nexport const TextUtil = {\n\n\tconvertHtmlEntities(text: string): string\n\t{\n\t\treturn Dom.create({\n\t\t\ttag: 'span',\n\t\t\thtml: text\n\t\t}).innerText;\n\t},\n\n\tconvertSnakeToCamelCase(text: string): string\n\t{\n\t\treturn text.replace(/(_[a-z])/gi, ($1) => {\n\t\t\treturn $1.toUpperCase().replace('_', '');\n\t\t});\n\t},\n\n\tescapeRegex(string): string\n\t{\n\t\treturn string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\t},\n\n\tgetLocalizeForNumber(phrase, number, language = 'en'): string\n\t{\n\t\tlet pluralFormType = 1;\n\n\t\tnumber = parseInt(number);\n\n\t\tif (number < 0)\n\t\t{\n\t\t\tnumber = number * -1;\n\t\t}\n\n\t\tif (language)\n\t\t{\n\t\t\tswitch (language)\n\t\t\t{\n\t\t\t\tcase 'de':\n\t\t\t\tcase 'en':\n\t\t\t\t\tpluralFormType = ((number !== 1) ? 1 : 0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ru':\n\t\t\t\tcase 'ua':\n\t\t\t\t\tpluralFormType = (((number%10 === 1) && (number%100 !== 11)) ? 0 : (((number%10 >= 2) && (number%10 <= 4) && ((number%100 < 10) || (number%100 >= 20))) ? 1 : 2));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage(phrase + '_PLURAL_' + pluralFormType);\n\t},\n\n\tgetFirstLetters(text): string\n\t{\n\t\tconst validSymbolsPattern = /[\\p{L}\\p{N} ]/u;\n\n\t\tconst words = text.split(/[\\s,]/).filter(word => {\n\t\t\tconst firstLetter = word.charAt(0);\n\t\t\treturn validSymbolsPattern.test(firstLetter);\n\t\t});\n\n\t\tif (words.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (words.length > 1)\n\t\t{\n\t\t\treturn words[0].charAt(0) + words[1].charAt(0);\n\t\t}\n\n\t\treturn words[0].charAt(0);\n\t},\n\n\tinsertUnseenWhitespace(text: string, splitIndex: number): string\n\t{\n\t\tif (text.length <= splitIndex)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tconst UNSEEN_SPACE = '\\u200B';\n\n\t\tlet firstPart = text.slice(0, splitIndex + 1);\n\t\tconst secondPart = text.slice(splitIndex + 1);\n\t\tconst hasWhitespace = /\\s/.test(firstPart);\n\t\tconst hasUserCode = /\\[user=(\\d+)(\\s)?(replace)?](.*?)\\[\\/user]/gi.test(text);\n\n\t\tif (firstPart.length === splitIndex + 1 && !hasWhitespace && !hasUserCode)\n\t\t{\n\t\t\tfirstPart += UNSEEN_SPACE;\n\t\t}\n\n\t\treturn firstPart + secondPart;\n\t},\n\n\tgetUuidV4(): string\n\t{\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\n\t\t\treturn v.toString(16);\n\t\t});\n\t},\n\n\tisUuidV4(uuid): boolean\n\t{\n\t\tif (!Type.isString(uuid))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst uuidV4pattern = new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);\n\n\t\treturn uuid.search(uuidV4pattern) === 0;\n\t},\n\n\tisTempMessage(messageId): boolean\n\t{\n\t\treturn this.isUuidV4(messageId) || messageId.toString().startsWith('temp');\n\t},\n\n\tcheckUrl(url): boolean\n\t{\n\t\tconst allowList = [\n\t\t\t\"http:\",\n\t\t\t\"https:\",\n\t\t\t\"ftp:\",\n\t\t\t\"file:\",\n\t\t\t\"tel:\",\n\t\t\t\"callto:\",\n\t\t\t\"mailto:\",\n\t\t\t\"skype:\",\n\t\t\t\"viber:\",\n\t\t];\n\n\t\tconst checkCorrectStartLink = ['/', ...allowList].find(protocol => {\n\t\t\treturn url.startsWith(protocol);\n\t\t});\n\t\tif (!checkCorrectStartLink)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = Dom.create({ tag: 'a', attrs: { href: url }});\n\n\t\treturn allowList.indexOf(element.protocol) > -1;\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.encode from main.core\n\t */\n\thtmlspecialchars(text): string\n\t{\n\t\treturn Text.encode(text);\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.decode from main.core\n\t */\n\thtmlspecialcharsback(text): string\n\t{\n\t\treturn Text.decode(text);\n\t},\n};","import {Extension, Type, Loc} from 'main.core';\nimport {DateTimeFormat} from 'main.date';\n\nimport {DateFormatter, DateCode} from 'im.v2.lib.date-formatter';\n\nconst settings = Extension.getSettings('im.v2.lib.utils');\n\nexport const UserUtil = {\n\n\tgetLastDateText(params = {}): string\n\t{\n\t\tif (params.bot || params.network || !params.lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst isOnline = this.isOnline(params.lastActivityDate);\n\t\tconst isMobileOnline = this.isMobileOnline(params.lastActivityDate, params.mobileLastDate);\n\n\t\tlet text = '';\n\t\tconst lastSeenText = this.getLastSeenText(params.lastActivityDate);\n\n\t\t// \"away for X minutes\"\n\t\tif (isOnline && params.idle && !isMobileOnline)\n\t\t{\n\t\t\ttext = Loc.getMessage('IM_STATUS_AWAY_TITLE').replace('#TIME#', this.getIdleText(params.idle));\n\t\t}\n\t\t// truly online, last activity date < 5 minutes ago - show status text\n\t\telse if (isOnline && !lastSeenText)\n\t\t{\n\t\t\ttext = this.getStatusTextForLastDate(params.status);\n\t\t}\n\t\t// last activity date > 5 minutes ago - \"Was online X minutes ago\"\n\t\telse if (lastSeenText)\n\t\t{\n\t\t\tconst phraseCode = `IM_LAST_SEEN_${params.gender}`;\n\t\t\ttext = Loc.getMessage(phraseCode).replace('#POSITION#. ', '').replace('#LAST_SEEN#', lastSeenText);\n\t\t}\n\n\t\t// if on vacation - add postfix with vacation info\n\t\tif (params.absent)\n\t\t{\n\t\t\tconst vacationText = Loc.getMessage('IM_STATUS_VACATION_TITLE').replace('#DATE#',\n\t\t\t\tDateFormatter.formatByCode(params.absent.getTime() / 1000, DateCode.shortDateFormat)\n\t\t\t);\n\n\t\t\ttext = text ? `${text}. ${vacationText}`: vacationText;\n\t\t}\n\n\t\treturn text;\n\t},\n\n\tgetIdleText(idle = '')\n\t{\n\t\tif (!idle)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn DateTimeFormat.format([\n\t\t\t['s60', 'sdiff'],\n\t\t\t['i60', 'idiff'],\n\t\t\t['H24', 'Hdiff'],\n\t\t\t['', 'ddiff']\n\t\t], idle);\n\t},\n\n\tisOnline(lastActivityDate): boolean\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Date.now() - lastActivityDate.getTime() <= this.getOnlineLimit() * 1000;\n\t},\n\n\tisMobileOnline(lastActivityDate, mobileLastDate): boolean\n\t{\n\t\tif (!lastActivityDate || !mobileLastDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\treturn (\n\t\t\tDate.now() - mobileLastDate.getTime() < this.getOnlineLimit() * 1000\n\t\t\t&& lastActivityDate - mobileLastDate < FIVE_MINUTES\n\t\t);\n\t},\n\n\tgetStatusTextForLastDate(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_${status}`) ?? status;\n\t},\n\n\tgetStatusText(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_TEXT_${status}`) ?? status;\n\t},\n\n\tgetLastSeenText(lastActivityDate): string\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\tif (Date.now() - lastActivityDate.getTime() > FIVE_MINUTES)\n\t\t{\n\t\t\treturn DateTimeFormat.formatLastActivityDate(lastActivityDate);\n\t\t}\n\n\t\treturn '';\n\t},\n\n\tisBirthdayToday(birthday): boolean\n\t{\n\t\treturn birthday === DateTimeFormat.format('d-m', new Date());\n\t},\n\n\tgetOnlineLimit(): number\n\t{\n\t\tconst limitOnline = settings.get('limitOnline', false);\n\n\t\tconst FIFTEEN_MINUTES = 15 * 60;\n\t\treturn limitOnline? Number.parseInt(limitOnline, 10): FIFTEEN_MINUTES;\n\t},\n\n\tgetProfileLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `/company/personal/user/${userId}/`;\n\t},\n\n\tgetCalendarLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\tconst path = Extension.getSettings('im.v2.lib.utils').get('pathToUserCalendar');\n\n\t\treturn path.replace('#user_id#', userId);\n\t},\n\n\tgetMentionBbCode(userId: number | string, name: string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `[USER=${userId}]${name}[/USER]`;\n\t}\n};\n","import {Text, Loc} from 'main.core';\nimport {FileType} from 'im.v2.const';\n\nexport const FileUtil = {\n\tgetFileExtension(fileName: string): string\n\t{\n\t\treturn fileName.split('.').splice(-1)[0];\n\t},\n\n\tgetIconTypeByFilename(fileName: string): string\n\t{\n\t\tconst extension = this.getFileExtension(fileName);\n\n\t\treturn this.getIconTypeByExtension(extension);\n\t},\n\n\tgetIconTypeByExtension(extension: string): string\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t},\n\n\tgetFileTypeByExtension(extension: string): string\n\t{\n\t\tlet type = FileType.file;\n\n\t\tswitch (extension)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ttype = FileType.image;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ttype = FileType.video;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp3':\n\t\t\t\ttype = FileType.audio;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn type;\n\t},\n\n\tformatFileSize(fileSize: number): string\n\t{\n\t\tif (!fileSize || fileSize <= 0)\n\t\t{\n\t\t\tfileSize = 0;\n\t\t}\n\n\t\tconst sizes = ['BYTE', 'KB', 'MB', 'GB', 'TB'];\n\t\tconst KILOBYTE_SIZE = 1024;\n\n\t\tlet position = 0;\n\t\twhile (fileSize >= KILOBYTE_SIZE && position < sizes.length - 1)\n\t\t{\n\t\t\tfileSize /= KILOBYTE_SIZE;\n\t\t\tposition++;\n\t\t}\n\n\t\tconst phrase = Loc.getMessage(`IM_UTILS_FILE_SIZE_${sizes[position]}`);\n\t\tconst roundedSize = Math.round(fileSize);\n\n\t\treturn `${roundedSize} ${phrase}`;\n\t},\n\n\tgetShortFileName(fileName: string, maxLength: number): string\n\t{\n\t\tif (!fileName || fileName.length < maxLength)\n\t\t{\n\t\t\treturn fileName;\n\t\t}\n\n\t\tconst DOT_LENGTH = 1;\n\t\tconst SYMBOLS_TO_TAKE_BEFORE_EXTENSION = 10;\n\n\t\tconst extension = this.getFileExtension(fileName);\n\t\tconst symbolsToTakeFromEnd = extension.length + DOT_LENGTH + SYMBOLS_TO_TAKE_BEFORE_EXTENSION;\n\t\tconst secondPart = fileName.slice(-symbolsToTakeFromEnd);\n\t\tconst firstPart = fileName.slice(0, maxLength - secondPart.length - DOT_LENGTH * 3);\n\n\t\treturn `${firstPart.trim()}...${secondPart.trim()}`;\n\t},\n\n\tgetViewerDataAttributes(viewerAttributes): Object\n\t{\n\t\tif (!viewerAttributes)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tconst dataAttributes = {\n\t\t\t'data-viewer': true,\n\t\t};\n\n\t\tObject.entries(viewerAttributes).forEach(([key, value]) => {\n\t\t\tdataAttributes[`data-${Text.toKebabCase(key)}`] = value;\n\t\t});\n\n\t\treturn dataAttributes;\n\t},\n\n\tisImage(fileName: string): boolean\n\t{\n\t\tconst extension = FileUtil.getFileExtension(fileName);\n\t\tconst fileType = FileUtil.getFileTypeByExtension(extension);\n\n\t\treturn fileType === FileType.image;\n\t}\n};","import {Type} from 'main.core';\n\nimport {PlatformUtil} from './platform';\n\nconst LETTER_CODE_PREFIX = 'Key';\nconst DIGIT_CODE_PREFIX = 'Digit';\n\nconst CTRL = 'Ctrl';\nconst ALT = 'Alt';\nconst SHIFT = 'Shift';\nconst MODIFIERS = new Set([CTRL, ALT, SHIFT]);\n\nexport const KeyUtil = {\n\tisCmdOrCtrl(event: PointerEvent | KeyboardEvent): boolean\n\t{\n\t\tif (PlatformUtil.isMac())\n\t\t{\n\t\t\treturn event.metaKey;\n\t\t}\n\n\t\tif (PlatformUtil.isLinux() || PlatformUtil.isWindows())\n\t\t{\n\t\t\treturn event.ctrlKey;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tisAltOrOption(event: PointerEvent | KeyboardEvent): boolean\n\t{\n\t\treturn event.altKey;\n\t},\n\n\tisCombination(event: KeyboardEvent, combinationList: string | string[]): boolean\n\t{\n\t\tif (Type.isString(combinationList))\n\t\t{\n\t\t\tcombinationList = [combinationList];\n\t\t}\n\n\t\treturn combinationList.some((combination: string) => {\n\t\t\treturn checkCombination(event, combination);\n\t\t});\n\t}\n};\n\nfunction checkCombination(event: KeyboardEvent, combination: string)\n{\n\tif (combination.includes(SHIFT) && !event.shiftKey)\n\t{\n\t\treturn false;\n\t}\n\tif (combination.includes(ALT) && !event.altKey)\n\t{\n\t\treturn false;\n\t}\n\tif (combination.includes(CTRL) && !this.isCmdOrCtrl(event))\n\t{\n\t\treturn false;\n\t}\n\n\tconst keys = combination.split('+').filter(key => {\n\t\treturn !MODIFIERS.has(key);\n\t}).map(key => {\n\t\tconst singleLetterRegexp = /^[A-Za-z]$/;\n\t\tconst singleDigitRegexp = /^\\d$/;\n\t\tif (singleLetterRegexp.test(key))\n\t\t{\n\t\t\treturn `${LETTER_CODE_PREFIX}${key.toUpperCase()}`;\n\t\t}\n\t\telse if (singleDigitRegexp.test(key))\n\t\t{\n\t\t\treturn `${DIGIT_CODE_PREFIX}${key}`;\n\t\t}\n\n\t\treturn key;\n\t});\n\n\tlet result = true;\n\tkeys.forEach(key => {\n\t\tif (key !== event.code)\n\t\t{\n\t\t\tresult = false;\n\t\t}\n\t});\n\n\treturn result;\n}","import {Dom} from 'main.core';\n\nexport const DomUtil = {\n\trecursiveBackwardNodeSearch(node, className, maxNodeLevel = 10)\n\t{\n\t\twhile (maxNodeLevel > 0)\n\t\t{\n\t\t\tif (Dom.hasClass(node, className))\n\t\t\t{\n\t\t\t\treturn node;\n\t\t\t}\n\n\t\t\tif (!node || !node.parentNode)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tnode = node.parentNode;\n\n\t\t\tmaxNodeLevel--;\n\t\t}\n\n\t\treturn null;\n\t}\n};\n\n","export const DialogUtil = {\n\tisDialogId(dialogId)\n\t{\n\t\treturn /(chat\\d+)|\\d+/i.test(dialogId);\n\t}\n};\n","import {BrowserUtil} from './browser';\nimport {DateUtil} from './date';\nimport {DeviceUtil} from './device';\nimport {PlatformUtil} from './platform';\nimport {RestUtil} from './rest';\nimport {TextUtil} from './text';\nimport {UserUtil} from './user';\nimport {FileUtil} from './file';\nimport {KeyUtil} from './key';\nimport {DomUtil} from './dom';\nimport {DialogUtil} from './dialog';\n\nexport const Utils = {\n\tbrowser: BrowserUtil,\n\tdate: DateUtil,\n\tdevice: DeviceUtil,\n\tplatform: PlatformUtil,\n\trest: RestUtil,\n\ttext: TextUtil,\n\tuser: UserUtil,\n\tfile: FileUtil,\n\tdom: DomUtil,\n\tkey: KeyUtil,\n\tdialog: DialogUtil\n};"],"names":["UA","navigator","userAgent","toLowerCase","BrowserUtil","isChrome","Browser","isFirefox","isIe","isIE","isSafari","includes","isSafariBased","findParent","item","findTag","isHtmlElement","HTMLElement","Type","isString","document","parentNode","Dom","hasClass","openLink","link","target","window","open","DateUtil","cast","date","def","Date","result","isNumber","Number","isNaN","getTime","getTimeToNextMidnight","nextMidnight","setHours","now","getStartOfTheDay","isToday","toDateString","DeviceUtil","isDesktop","isMobile","isUndefined","isMobileStatic","orientationHorizontal","orientationPortrait","getOrientation","Math","abs","orientation","PlatformUtil","isMac","isLinux","isWindows","isWin","isBitrixMobile","isBitrixDesktop","DesktopManager","getDesktopVersion","getInstance","isDesktopFeatureEnabled","code","isAndroid","isIos","isIOS","getIosVersion","matches","match","parseFloat","openNewPage","url","MobileTools","BX","openWidget","resolveOpenFunction","app","RestUtil","getLogTrackingParams","params","name","data","dialog","message","files","encodeURIComponent","isPlainObject","dataArray","hasOwnProperty","push","isArray","isObjectLike","type","entityId","split","isNull","length","join","TextUtil","convertHtmlEntities","text","create","tag","html","innerText","convertSnakeToCamelCase","replace","$1","toUpperCase","escapeRegex","string","getLocalizeForNumber","phrase","number","language","pluralFormType","parseInt","Loc","getMessage","getFirstLetters","validSymbolsPattern","words","filter","word","firstLetter","charAt","test","insertUnseenWhitespace","splitIndex","UNSEEN_SPACE","firstPart","slice","secondPart","hasWhitespace","hasUserCode","getUuidV4","c","r","random","v","toString","isUuidV4","uuid","uuidV4pattern","RegExp","search","isTempMessage","messageId","startsWith","checkUrl","allowList","checkCorrectStartLink","find","protocol","element","attrs","href","indexOf","htmlspecialchars","Text","encode","htmlspecialcharsback","decode","settings","Extension","getSettings","UserUtil","getLastDateText","bot","network","lastActivityDate","isOnline","isMobileOnline","mobileLastDate","lastSeenText","getLastSeenText","idle","getIdleText","getStatusTextForLastDate","status","phraseCode","gender","absent","vacationText","DateFormatter","formatByCode","DateCode","shortDateFormat","DateTimeFormat","format","getOnlineLimit","FIVE_MINUTES","getStatusText","formatLastActivityDate","isBirthdayToday","birthday","limitOnline","get","FIFTEEN_MINUTES","getProfileLink","userId","getCalendarLink","path","getMentionBbCode","FileUtil","getFileExtension","fileName","splice","getIconTypeByFilename","extension","getIconTypeByExtension","icon","getFileTypeByExtension","FileType","file","image","video","audio","formatFileSize","fileSize","sizes","KILOBYTE_SIZE","position","roundedSize","round","getShortFileName","maxLength","DOT_LENGTH","SYMBOLS_TO_TAKE_BEFORE_EXTENSION","symbolsToTakeFromEnd","trim","getViewerDataAttributes","viewerAttributes","dataAttributes","Object","entries","forEach","key","value","toKebabCase","isImage","fileType","LETTER_CODE_PREFIX","DIGIT_CODE_PREFIX","CTRL","ALT","SHIFT","MODIFIERS","Set","KeyUtil","isCmdOrCtrl","event","metaKey","ctrlKey","isAltOrOption","altKey","isCombination","combinationList","some","combination","checkCombination","shiftKey","keys","has","map","singleLetterRegexp","singleDigitRegexp","DomUtil","recursiveBackwardNodeSearch","node","className","maxNodeLevel","DialogUtil","isDialogId","dialogId","Utils","browser","device","platform","rest","user","dom"],"mappings":"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"}