{"version":3,"file":"desktop-manager.bundle.map.js","names":["this","BX","Messenger","v2","exports","im_v2_lib_logger","timeman_monitor","im_public","im_v2_lib_rest","im_v2_application_core","im_v2_const","main_core_events","main_core","im_v2_lib_utils","im_v2_lib_desktopApi","IMAGE_CHECK_URL","IMAGE_CHECK_TIMEOUT","IMAGE_CLASS","INTERNET_CHECK_URL","checkTimeoutList","Checker","testImageUpload","successCallback","failureCallback","dateCheck","Date","now","failureCallbackCalled","imageForCheck","Dom","create","tag","attrs","src","props","className","events","error","checkId","dataset","id","clearTimeout","remove","load","document","body","append","setTimeout","testInternetConnection","currentTimestamp","Promise","resolve","fetch","then","response","status","catch","_subscribeToBxProtocolEvent","babelHelpers","classPrivateFieldLooseKey","BxLinkHandler","static","constructor","Object","defineProperty","value","_subscribeToBxProtocolEvent2","classPrivateFieldLooseBase","DesktopApi","subscribe","EventType","desktop","onBxLink","command","rawParams","params","entries","forEach","key","decodeURIComponent","showWindow","DesktopBxLink","chat","openChat","dialogId","call","startVideoCall","notifications","openNotifications","recentSearch","openRecentSearch","timeManager","Monitor","openReport","_subscribeToLogoutEvent","_onExit","AuthHandler","_onExit2","_subscribeToLogoutEvent2","onExit","bind","runAction","RestMethod","imV2DesktopLogout","finally","exit","_initDate","_subscribeToWakeUpEvent","_onWakeUp","_subscribeToAwayEvent","_onUserAway","_setInitialStatus","_subscribeToStatusChange","StatusHandler","_subscribeToStatusChange2","_setInitialStatus2","_onUserAway2","_subscribeToAwayEvent2","_onWakeUp2","_subscribeToWakeUpEvent2","writable","onWakeUp","async","hasConnection","console","Utils","date","isSameDay","Core","getPullClient","restart","reloadWindow","onUserAway","away","method","imUserStatusIdleStart","imUserStatusIdleEnd","getRestClient","callMethod","userId","getUserId","user","getStore","getters","setIconStatus","statusWatcher","state","watch","newStatus","_store","_subscribeToCountersChange","_onCounterChange","CounterHandler","_onCounterChange2","_subscribeToCountersChange2","EventEmitter","counter","onNotificationCounterChange","onChatCounterChange","chatCounter","notificationCounter","isImportant","setCounter","_bindHotkeys","HotkeyHandler","_bindHotkeys2","Event","window","event","reloadCombination","isCombination","_sendInitEvent","Desktop","_sendInitEvent2","init","currentUser","getApplicationData","emit","onInit","userInfo","DESKTOP_PROTOCOL_VERSION","LOCATION_RESET_TIMEOUT","_desktopIsActive","_locationChangedToBx","_goToBx","_prepareBxUrl","_initDesktopStatus","DesktopManager","instance","getInstance","isDesktop","isChatWindow","_initDesktopStatus2","_prepareBxUrl2","_goToBx2","isDesktopActive","setDesktopActive","flag","isLocationChangedToBx","Logger","warn","withVideo","checkStatusInDifferentContext","rawUrl","preparedUrl","BaseEvent","compatData","location","href","url","test","replace","hostname","settings","Extension","getSettings","get","Lib","Timeman","Application","Const"],"sources":["desktop-manager.bundle.js"],"mappings":"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"}