{"version":3,"file":"text-highlighter.bundle.js","sources":["../src/text-highlighter.js"],"sourcesContent":["import { Text } from 'main.core';\n\nimport { Utils } from 'im.v2.lib.utils';\n\nexport const highlightText = (text: string, textToHighlight: string = '') => {\n\tif (textToHighlight.length === 0)\n\t{\n\t\treturn text;\n\t}\n\n\tconst wordsToHighlight = getWordsToHighlight(textToHighlight);\n\tconst pattern = createRegExPatternFromWords(wordsToHighlight);\n\n\treturn wrapWithSpan(text, pattern);\n};\n\nconst wrapWithSpan = (text: string, pattern: string): string => {\n\tconst decodedText = Text.decode(text);\n\n\tconst textWithPlaceholders = decodedText.replaceAll(new RegExp(pattern, 'ig'), wrapWithSpanPlaceholder);\n\n\treturn replacePlaceholders(textWithPlaceholders);\n};\n\nconst wrapWithSpanPlaceholder = (text: string): string => `#SPAN_START#${text}#SPAN_END#`;\n\nconst replacePlaceholders = (textWithPlaceholders: string): string => {\n\tconst encodedText = Text.encode(textWithPlaceholders);\n\n\treturn encodedText.replaceAll('#SPAN_START#', '<span class=\"--highlight\">').replaceAll('#SPAN_END#', '</span>');\n};\n\nconst getWordsToHighlight = (textToHighlight: string): string[] => {\n\tconst wordsToHighlight = Utils.text.getWordsFromString(textToHighlight);\n\tconst result = new Set(wordsToHighlight);\n\n\treturn [...result];\n};\n\nconst createRegExPatternFromWords = (words: string[]): string => {\n\treturn words.map((word) => {\n\t\treturn BX.util.escapeRegExp(word);\n\t}).join('|');\n};\n"],"names":["highlightText","text","textToHighlight","length","wordsToHighlight","getWordsToHighlight","pattern","createRegExPatternFromWords","wrapWithSpan","decodedText","Text","decode","textWithPlaceholders","replaceAll","RegExp","wrapWithSpanPlaceholder","replacePlaceholders","encodedText","encode","Utils","getWordsFromString","result","Set","words","map","word","BX","util","escapeRegExp","join"],"mappings":";;;;;;;OAIaA,aAAa,GAAG,CAACC,IAAY,EAAEC,eAAuB,GAAG,EAAE,KAAK;GAC5E,IAAIA,eAAe,CAACC,MAAM,KAAK,CAAC,EAChC;KACC,OAAOF,IAAI;;GAGZ,MAAMG,gBAAgB,GAAGC,mBAAmB,CAACH,eAAe,CAAC;GAC7D,MAAMI,OAAO,GAAGC,2BAA2B,CAACH,gBAAgB,CAAC;GAE7D,OAAOI,YAAY,CAACP,IAAI,EAAEK,OAAO,CAAC;CACnC,CAAC;CAED,MAAME,YAAY,GAAG,CAACP,IAAY,EAAEK,OAAe,KAAa;GAC/D,MAAMG,WAAW,GAAGC,cAAI,CAACC,MAAM,CAACV,IAAI,CAAC;GAErC,MAAMW,oBAAoB,GAAGH,WAAW,CAACI,UAAU,CAAC,IAAIC,MAAM,CAACR,OAAO,EAAE,IAAI,CAAC,EAAES,uBAAuB,CAAC;GAEvG,OAAOC,mBAAmB,CAACJ,oBAAoB,CAAC;CACjD,CAAC;CAED,MAAMG,uBAAuB,GAAId,IAAY,IAAc,eAAcA,IAAK,YAAW;CAEzF,MAAMe,mBAAmB,GAAIJ,oBAA4B,IAAa;GACrE,MAAMK,WAAW,GAAGP,cAAI,CAACQ,MAAM,CAACN,oBAAoB,CAAC;GAErD,OAAOK,WAAW,CAACJ,UAAU,CAAC,cAAc,EAAE,4BAA4B,CAAC,CAACA,UAAU,CAAC,YAAY,EAAE,SAAS,CAAC;CAChH,CAAC;CAED,MAAMR,mBAAmB,GAAIH,eAAuB,IAAe;GAClE,MAAME,gBAAgB,GAAGe,qBAAK,CAAClB,IAAI,CAACmB,kBAAkB,CAAClB,eAAe,CAAC;GACvE,MAAMmB,MAAM,GAAG,IAAIC,GAAG,CAAClB,gBAAgB,CAAC;GAExC,OAAO,CAAC,GAAGiB,MAAM,CAAC;CACnB,CAAC;CAED,MAAMd,2BAA2B,GAAIgB,KAAe,IAAa;GAChE,OAAOA,KAAK,CAACC,GAAG,CAAEC,IAAI,IAAK;KAC1B,OAAOC,EAAE,CAACC,IAAI,CAACC,YAAY,CAACH,IAAI,CAAC;IACjC,CAAC,CAACI,IAAI,CAAC,GAAG,CAAC;CACb,CAAC;;;;;;;;"}