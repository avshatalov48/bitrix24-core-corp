{"version":3,"file":"registry.bundle.js","sources":["../src/base/base.js","../src/recent/pin-manager.js","../src/recent/unread-manager.js","../src/recent/mute-manager.js","../src/recent/invite-manager.js","../src/recent/call-helper.js","../src/recent/recent.js"],"sourcesContent":["import {MenuManager} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nimport {EventType} from 'im.v2.const';\n\nexport class BaseMenu\n{\n\tmenuInstance: Object = null;\n\tcontext: Object = null;\n\ttarget: HTMLElement = null;\n\tstore: Object = null;\n\trestClient: Object = null;\n\tid: String = 'im-base-context-menu';\n\n\tconstructor($Bitrix: Object)\n\t{\n\t\tthis.$Bitrix = $Bitrix;\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\n\t\tthis.onClosePopupHandler = this.onClosePopup.bind(this);\n\t\tEventEmitter.subscribe(EventType.dialog.closePopup, this.onClosePopupHandler);\n\t}\n\n\t// public\n\topenMenu(context: Object, target: HTMLElement)\n\t{\n\t\tif (this.menuInstance)\n\t\t{\n\t\t\tthis.menuInstance.destroy();\n\t\t\tthis.menuInstance = null;\n\t\t}\n\t\tthis.context = context;\n\t\tthis.target = target;\n\t\tthis.menuInstance = this.getMenuInstance();\n\t\tthis.menuInstance.show();\n\t}\n\n\tgetMenuInstance()\n\t{\n\t\treturn MenuManager.create(this.getMenuOptions());\n\t}\n\n\tgetMenuOptions(): Object\n\t{\n\t\treturn {\n\t\t\tid: this.id,\n\t\t\tbindOptions: {forceBindPosition: true, position: 'bottom'},\n\t\t\ttargetContainer: document.body,\n\t\t\tbindElement: this.target,\n\t\t\tcacheable: false,\n\t\t\tclassName: this.getMenuClassName(),\n\t\t\titems: this.getMenuItems()\n\t\t};\n\t}\n\n\tgetMenuItems(): Array\n\t{\n\t\treturn [];\n\t}\n\n\tgetMenuClassName(): string\n\t{\n\t\treturn this.isDarkMode() ? 'im-context-menu-dark' : '';\n\t}\n\n\tisDarkMode(): boolean\n\t{\n\t\treturn this.store.state.application.options.darkTheme;\n\t}\n\n\tonClosePopup()\n\t{\n\t\tthis.destroy();\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.menuInstance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.menuInstance.destroy();\n\t\tthis.menuInstance = null;\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.close();\n\t\tEventEmitter.unsubscribe(EventType.dialog.closePopup, this.onClosePopupHandler);\n\t}\n}","import {RestMethod} from 'im.v2.const';\n\nexport class PinManager\n{\n\tstore: Object = null;\n\trestClient: Object = null;\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\t}\n\n\tpinDialog(dialogId: string)\n\t{\n\t\tthis.store.dispatch('recent/pin', {id: dialogId, action: true});\n\t\tconst queryParams = {'DIALOG_ID': dialogId, 'ACTION': 'Y'};\n\t\tthis.restClient.callMethod(RestMethod.imRecentPin, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error pinning chat', error);\n\t\t\tthis.store.dispatch('recent/pin', {id: dialogId, action: false});\n\t\t});\n\t}\n\n\tunpinDialog(dialogId: string)\n\t{\n\t\tthis.store.dispatch('recent/pin', {id: dialogId, action: false});\n\t\tconst queryParams = {'DIALOG_ID': dialogId, 'ACTION': 'N'};\n\t\tthis.restClient.callMethod(RestMethod.imRecentPin, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error unpinning chat', error);\n\t\t\tthis.store.dispatch('recent/pin', {id: dialogId, action: true});\n\t\t});\n\t}\n}","import {RestMethod} from 'im.v2.const';\n\nexport class UnreadManager\n{\n\tstore: Object = null;\n\trestClient: Object = null;\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\t}\n\n\treadDialog(dialogId: string)\n\t{\n\t\tlet queryParams;\n\n\t\tconst dialog = this.store.getters['dialogues/get'](dialogId, true);\n\t\tif (dialog.counter > 0)\n\t\t{\n\t\t\tqueryParams = {'DIALOG_ID': dialogId};\n\t\t\tthis.restClient.callMethod(RestMethod.imDialogRead, queryParams).catch(error => {\n\t\t\t\tconsole.error('Im.RecentList: error reading chat', error);\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.store.dispatch('recent/unread', {id: dialogId, action: false});\n\t\tqueryParams = {'DIALOG_ID': dialogId, 'ACTION': 'N'};\n\t\tthis.restClient.callMethod(RestMethod.imRecentUnread, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error reading chat', error);\n\t\t\tthis.store.dispatch('recent/unread', {id: dialogId, action: true});\n\t\t});\n\t}\n\n\tunreadDialog(dialogId: string)\n\t{\n\t\tthis.store.dispatch('recent/unread', {id: dialogId, action: true});\n\t\tconst queryParams = {'DIALOG_ID': dialogId, 'ACTION': 'Y'};\n\t\tthis.restClient.callMethod(RestMethod.imRecentUnread, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error unreading chat', error);\n\t\t\tthis.store.dispatch('recent/unread', {id: dialogId, action: false});\n\t\t});\n\t}\n}","import {RestMethod} from 'im.v2.const';\n\nexport class MuteManager\n{\n\tstore: Object = null;\n\trestClient: Object = null;\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t\tthis.restClient = $Bitrix.RestClient.get();\n\t}\n\n\tmuteDialog(dialogId: string)\n\t{\n\t\tthis.store.dispatch('dialogues/mute', {dialogId});\n\t\tconst queryParams = {'DIALOG_ID': dialogId, 'ACTION': 'Y'};\n\t\tthis.restClient.callMethod(RestMethod.imChatMute, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error muting chat', error);\n\t\t\tthis.store.dispatch('dialogues/unmute', {dialogId});\n\t\t});\n\t}\n\n\tunmuteDialog(dialogId: string)\n\t{\n\t\tthis.store.dispatch('dialogues/unmute', {dialogId});\n\t\tconst queryParams = {'DIALOG_ID': dialogId, 'ACTION': 'N'};\n\t\tthis.restClient.callMethod(RestMethod.imChatMute, queryParams).catch(error => {\n\t\t\tconsole.error('Im.RecentList: error unmuting chat', error);\n\t\t\tthis.store.dispatch('dialogues/mute', {dialogId});\n\t\t});\n\t}\n}","import {ajax as Ajax, Loc} from 'main.core';\n\nconst resendAction = 'intranet.controller.invite.reinvite';\nconst cancelAction = 'intranet.controller.invite.deleteinvitation';\n\nexport const InviteManager = {\n\tresendInvite(userId: number)\n\t{\n\t\tconst data = {\n\t\t\tparams: {userId}\n\t\t};\n\t\tAjax.runAction(resendAction, {data}).then(() => {\n\t\t\tthis.showNotification(Loc.getMessage('IM_RECENT_CONTEXT_MENU_INVITE_RESEND_DONE'), 2000);\n\t\t}, (error) => {\n\t\t\tthis.handleActionError(error);\n\t\t});\n\t},\n\n\tcancelInvite(userId: number)\n\t{\n\t\tconst data = {\n\t\t\tparams: {userId}\n\t\t};\n\t\tAjax.runAction(cancelAction, {data}).then(() => {\n\t\t\tthis.showNotification(Loc.getMessage('IM_RECENT_CONTEXT_MENU_INVITE_CANCEL_DONE'), 2000);\n\t\t}, (error) => {\n\t\t\tthis.handleActionError(error);\n\t\t});\n\t},\n\n\tshowNotification(text: string, autoHideDelay: number = 4000)\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: text,\n\t\t\tautoHideDelay\n\t\t});\n\t},\n\n\thandleActionError(error: Object)\n\t{\n\t\tif (error.status === 'error' && error.errors.length > 0)\n\t\t{\n\t\t\tconst errorContent = error.errors.map((element) => {\n\t\t\t\treturn element.message;\n\t\t\t}).join('. ');\n\t\t\tthis.showNotification(errorContent);\n\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.showNotification(Loc.getMessage('IM_RECENT_CONNECT_ERROR'));\n\t}\n};","export class CallHelper\n{\n\tstore: Object = null;\n\n\tconstructor($Bitrix)\n\t{\n\t\tthis.store = $Bitrix.Data.get('controller').store;\n\t}\n\n\tcheckCallSupport(dialogId: string): boolean\n\t{\n\t\tif (!BX.MessengerProxy.getPushServerStatus() || !BX.Call.Util.isWebRTCSupported())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst userId = Number.parseInt(dialogId, 10);\n\n\t\treturn userId > 0 ? this.checkUserCallSupport(userId) : this.checkChatCallSupport(dialogId);\n\t}\n\n\tcheckUserCallSupport(userId: number): boolean\n\t{\n\t\tconst user = this.store.getters['users/get'](userId);\n\t\treturn (\n\t\t\tuser\n\t\t\t&& user.status !== 'guest'\n\t\t\t&& !user.bot\n\t\t\t&& !user.network\n\t\t\t&& user.id !== this.getCurrentUserId()\n\t\t\t&& !!user.lastActivityDate\n\t\t);\n\t}\n\n\tcheckChatCallSupport(dialogId: string): boolean\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](dialogId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst {userCounter} = dialog;\n\n\t\treturn userCounter > 1 && userCounter <= BX.Call.Util.getUserLimit();\n\t}\n\n\thasActiveCall(): boolean\n\t{\n\t\treturn BX.MessengerProxy.getCallController().hasActiveCall();\n\t}\n\n\tgetCurrentUserId(): number\n\t{\n\t\treturn this.store.state.application.common.userId;\n\t}\n}","import {Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MessageBox, MessageBoxButtons} from 'ui.dialogs.messagebox';\n\nimport {ChatTypes, EventType, OpenTarget, ChatOption} from 'im.v2.const';\n\nimport {BaseMenu} from '../base/base';\nimport {PinManager} from './pin-manager';\nimport {UnreadManager} from './unread-manager';\nimport {MuteManager} from './mute-manager';\nimport {InviteManager} from './invite-manager';\nimport {CallHelper} from './call-helper';\n\nexport class RecentMenu extends BaseMenu\n{\n\tpinManager: Object = null;\n\tunreadManager: Object = null;\n\tmuteManager: Object = null;\n\tcallHelper: Object = null;\n\n\tconstructor($Bitrix)\n\t{\n\t\tsuper($Bitrix);\n\n\t\tthis.id = 'im-recent-context-menu';\n\t\tthis.pinManager = new PinManager($Bitrix);\n\t\tthis.unreadManager = new UnreadManager($Bitrix);\n\t\tthis.muteManager = new MuteManager($Bitrix);\n\t\tthis.callHelper = new CallHelper($Bitrix);\n\t}\n\n\tgetMenuOptions(): Object\n\t{\n\t\treturn {\n\t\t\t...super.getMenuOptions(),\n\t\t\tclassName: this.getMenuClassName(),\n\t\t\tangle: true,\n\t\t\toffsetLeft: 32\n\t\t};\n\t}\n\n\tgetMenuClassName(): String\n\t{\n\t\treturn this.context.compactMode ? '' : super.getMenuClassName();\n\t}\n\n\tgetMenuItems(): Array\n\t{\n\t\tif (this.context.invitation.isActive)\n\t\t{\n\t\t\treturn this.getInviteItems();\n\t\t}\n\n\t\treturn [\n\t\t\tthis.getSendMessageItem(),\n\t\t\tthis.getUnreadMessageItem(),\n\t\t\tthis.getPinMessageItem(),\n\t\t\tthis.getMuteItem(),\n\t\t\tthis.getCallItem(),\n\t\t\tthis.getHistoryItem(),\n\t\t\tthis.getOpenProfileItem(),\n\t\t\tthis.getHideItem(),\n\t\t\tthis.getLeaveItem()\n\t\t];\n\t}\n\n\tgetSendMessageItem(): Object\n\t{\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_WRITE'),\n\t\t\tonclick: function() {\n\t\t\t\tconst target = this.context.target === OpenTarget.current? OpenTarget.current: OpenTarget.auto;\n\n\t\t\t\tEventEmitter.emit(EventType.dialog.open, {\n\t\t\t\t\t...this.context,\n\t\t\t\t\tchat: this.store.getters['dialogues/get'](this.context.dialogId, true),\n\t\t\t\t\tuser: this.store.getters['users/get'](this.context.dialogId, true),\n\t\t\t\t\ttarget\n\t\t\t\t});\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetUnreadMessageItem(): Object\n\t{\n\t\tlet isUnreaded = this.context.unread;\n\t\tif (!isUnreaded)\n\t\t{\n\t\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId, true);\n\t\t\tisUnreaded = dialog.counter > 0;\n\t\t}\n\n\t\treturn {\n\t\t\ttext: isUnreaded ? Loc.getMessage('IM_RECENT_CONTEXT_MENU_READ') : Loc.getMessage('IM_RECENT_CONTEXT_MENU_UNREAD'),\n\t\t\tonclick: function() {\n\t\t\t\tif (isUnreaded)\n\t\t\t\t{\n\t\t\t\t\tthis.unreadManager.readDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unreadManager.unreadDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetPinMessageItem(): Object\n\t{\n\t\tconst isPinned = this.context.pinned;\n\n\t\treturn {\n\t\t\ttext: isPinned ? Loc.getMessage('IM_RECENT_CONTEXT_MENU_UNPIN') : Loc.getMessage('IM_RECENT_CONTEXT_MENU_PIN'),\n\t\t\tonclick: function() {\n\t\t\t\tif (isPinned)\n\t\t\t\t{\n\t\t\t\t\tthis.pinManager.unpinDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.pinManager.pinDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetMuteItem(): ?Object\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId);\n\t\tconst isUser = dialog.type === ChatTypes.user;\n\t\tconst isAnnouncement = dialog.type === ChatTypes.announcement;\n\t\tif (!dialog || isUser || isAnnouncement)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst muteAllowed = this.store.getters['dialogues/getChatOption'](dialog.type, ChatOption.mute);\n\t\tif (!muteAllowed)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isMuted = dialog.muteList.includes(this.getCurrentUserId());\n\t\treturn {\n\t\t\ttext: isMuted? Loc.getMessage('IM_RECENT_CONTEXT_MENU_UNMUTE') : Loc.getMessage('IM_RECENT_CONTEXT_MENU_MUTE'),\n\t\t\tonclick: function() {\n\t\t\t\tif (isMuted)\n\t\t\t\t{\n\t\t\t\t\tthis.muteManager.unmuteDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.muteManager.muteDialog(this.context.dialogId);\n\t\t\t\t}\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetCallItem(): ?Object\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isChat = dialog.type !== ChatTypes.user;\n\t\tconst callAllowed = this.store.getters['dialogues/getChatOption'](dialog.type, ChatOption.call);\n\t\tif (isChat && !callAllowed)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst callSupport = this.callHelper.checkCallSupport(this.context.dialogId);\n\t\tconst isAnnouncement = dialog.type === ChatTypes.announcement;\n\t\tconst isExternalTelephonyCall = dialog.type === ChatTypes.call;\n\t\tconst hasActiveCall = this.callHelper.hasActiveCall();\n\t\tif (!callSupport || isAnnouncement || isExternalTelephonyCall || hasActiveCall)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_CALL'),\n\t\t\tonclick: function() {\n\t\t\t\tEventEmitter.emit(EventType.dialog.call, this.context);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetHistoryItem(): ?Object\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId, true);\n\t\tconst isUser = dialog.type === ChatTypes.user;\n\t\tif (isUser)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_HISTORY'),\n\t\t\tonclick: function() {\n\t\t\t\tconst target = this.context.target === OpenTarget.current? OpenTarget.current: OpenTarget.auto;\n\n\t\t\t\tEventEmitter.emit(EventType.dialog.openHistory, {\n\t\t\t\t\t...this.context,\n\t\t\t\t\tchat: this.store.getters['dialogues/get'](this.context.dialogId, true),\n\t\t\t\t\tuser: this.store.getters['users/get'](this.context.dialogId, true),\n\t\t\t\t\ttarget\n\t\t\t\t});\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetOpenProfileItem(): ?Object\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId, true);\n\t\tconst isUser = dialog.type === ChatTypes.user;\n\t\tif (!isUser)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst profileUri = `/company/personal/user/${this.context.dialogId}/`;\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_PROFILE'),\n\t\t\thref: profileUri,\n\t\t\tonclick: function() {\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetHideItem(): ?Object\n\t{\n\t\tif (this.context.invitation.isActive || this.context.options.default_user_record)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_HIDE'),\n\t\t\tonclick: function() {\n\t\t\t\tEventEmitter.emit(EventType.dialog.hide, {\n\t\t\t\t\t...this.context,\n\t\t\t\t\tchat: this.store.getters['dialogues/get'](this.context.dialogId, true),\n\t\t\t\t\tuser: this.store.getters['users/get'](this.context.dialogId, true)\n\t\t\t\t});\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetLeaveItem(): ?Object\n\t{\n\t\tconst dialog = this.store.getters['dialogues/get'](this.context.dialogId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst isUser = dialog.type === ChatTypes.user;\n\t\tif (isUser)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet optionToCheck = ChatOption.leave;\n\t\tif (dialog.owner === this.getCurrentUserId())\n\t\t{\n\t\t\toptionToCheck = ChatOption.leaveOwner;\n\t\t}\n\t\tconst leaveAllowed = this.store.getters['dialogues/getChatOption'](dialog.type, optionToCheck);\n\n\t\tconst isExternalTelephonyCall = dialog.type === ChatTypes.call;\n\t\tif (isExternalTelephonyCall || !leaveAllowed)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_LEAVE'),\n\t\t\tonclick: function() {\n\t\t\t\tEventEmitter.emit(EventType.dialog.leave, {\n\t\t\t\t\t...this.context,\n\t\t\t\t\tchat: this.store.getters['dialogues/get'](this.context.dialogId, true),\n\t\t\t\t\tuser: this.store.getters['users/get'](this.context.dialogId, true)\n\t\t\t\t});\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\t// invitation\n\tgetInviteItems(): Array\n\t{\n\t\tconst items = [\n\t\t\tthis.getSendMessageItem(),\n\t\t\tthis.getOpenProfileItem()\n\t\t];\n\n\t\tconst canManageInvite = BX.MessengerProxy.canInvite() && this.getCurrentUserId() === this.context.invitation.originator;\n\t\tif (canManageInvite)\n\t\t{\n\t\t\titems.push(\n\t\t\t\tthis.getDelimiter(),\n\t\t\t\tthis.context.invitation.canResend? this.getResendInviteItem(): null,\n\t\t\t\tthis.getCancelInviteItem()\n\t\t\t);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\tgetResendInviteItem(): Object\n\t{\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_INVITE_RESEND'),\n\t\t\tonclick: function() {\n\t\t\t\tInviteManager.resendInvite(this.context.dialogId);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\n\tgetCancelInviteItem(): Object\n\t{\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_RECENT_CONTEXT_MENU_INVITE_CANCEL'),\n\t\t\tonclick: function() {\n\t\t\t\tMessageBox.show({\n\t\t\t\t\tmessage: Loc.getMessage('IM_RECENT_CONTEXT_MENU_INVITE_CANCEL_CONFIRM'),\n\t\t\t\t\tmodal: true,\n\t\t\t\t\tbuttons: MessageBoxButtons.OK_CANCEL,\n\t\t\t\t\tonOk: (messageBox) => {\n\t\t\t\t\t\tInviteManager.cancelInvite(this.context.dialogId);\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: (messageBox) => {\n\t\t\t\t\t\tmessageBox.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.menuInstance.close();\n\t\t\t}.bind(this)\n\t\t};\n\t}\n\t// invitation end\n\n\tgetDelimiter(): Object\n\t{\n\t\treturn {delimiter: true};\n\t}\n\n\tgetCurrentUserId(): number\n\t{\n\t\treturn this.store.state.application.common.userId;\n\t}\n}"],"names":["BaseMenu","constructor","$Bitrix","menuInstance","context","target","store","restClient","id","Data","get","RestClient","onClosePopupHandler","onClosePopup","bind","EventEmitter","subscribe","EventType","dialog","closePopup","openMenu","destroy","getMenuInstance","show","MenuManager","create","getMenuOptions","bindOptions","forceBindPosition","position","targetContainer","document","body","bindElement","cacheable","className","getMenuClassName","items","getMenuItems","isDarkMode","state","application","options","darkTheme","close","unsubscribe","PinManager","pinDialog","dialogId","dispatch","action","queryParams","callMethod","RestMethod","imRecentPin","catch","error","console","unpinDialog","UnreadManager","readDialog","getters","counter","imDialogRead","imRecentUnread","unreadDialog","MuteManager","muteDialog","imChatMute","unmuteDialog","resendAction","cancelAction","InviteManager","resendInvite","userId","data","params","Ajax","runAction","then","showNotification","Loc","getMessage","handleActionError","cancelInvite","text","autoHideDelay","BX","UI","Notification","Center","notify","content","status","errors","length","errorContent","map","element","message","join","CallHelper","checkCallSupport","MessengerProxy","getPushServerStatus","Call","Util","isWebRTCSupported","Number","parseInt","checkUserCallSupport","checkChatCallSupport","user","bot","network","getCurrentUserId","lastActivityDate","userCounter","getUserLimit","hasActiveCall","getCallController","common","RecentMenu","pinManager","unreadManager","muteManager","callHelper","angle","offsetLeft","compactMode","invitation","isActive","getInviteItems","getSendMessageItem","getUnreadMessageItem","getPinMessageItem","getMuteItem","getCallItem","getHistoryItem","getOpenProfileItem","getHideItem","getLeaveItem","onclick","OpenTarget","current","auto","emit","open","chat","isUnreaded","unread","isPinned","pinned","isUser","type","ChatTypes","isAnnouncement","announcement","muteAllowed","ChatOption","mute","isMuted","muteList","includes","isChat","callAllowed","call","callSupport","isExternalTelephonyCall","openHistory","profileUri","href","default_user_record","hide","optionToCheck","leave","owner","leaveOwner","leaveAllowed","canManageInvite","canInvite","originator","push","getDelimiter","canResend","getResendInviteItem","getCancelInviteItem","MessageBox","modal","buttons","MessageBoxButtons","OK_CANCEL","onOk","messageBox","onCancel","delimiter"],"mappings":"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"}