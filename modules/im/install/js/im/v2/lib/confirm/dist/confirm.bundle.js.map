{"version":3,"file":"confirm.bundle.js","sources":["../src/classes/confirm.js","../src/index.js"],"sourcesContent":["import { Dom } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nimport '../css/confirm.css';\n\nconst CONTAINER_CLASS = 'im-confirm-container';\nconst CONTAINER_MIN_HEIGHT = 110;\n\nexport class ChatConfirm extends MessageBox\n{\n\t// noinspection JSCheckFunctionSignatures\n\tgetPopupWindow(): Popup\n\t{\n\t\tconst popup = super.getPopupWindow();\n\t\tDom.addClass(popup.getPopupContainer(), CONTAINER_CLASS);\n\t\tDom.style(popup.getPopupContainer(), 'minHeight', `${CONTAINER_MIN_HEIGHT}px`);\n\n\t\treturn super.getPopupWindow();\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { MessageBoxButtons } from 'ui.dialogs.messagebox';\n\nimport { ChatConfirm } from './classes/confirm';\n\ntype ConfirmParams = {\n\ttext: string,\n\tfirstButtonCaption?: string,\n\tsecondButtonCaption?: string,\n};\n\nexport const showKickUserConfirm = (): Promise<boolean> => {\n\tconst kickText = Loc.getMessage('IM_LIB_CONFIRM_USER_KICK');\n\tconst yesCaption = Loc.getMessage('IM_LIB_CONFIRM_USER_KICK_YES');\n\n\treturn showTwoButtonConfirm({ text: kickText, firstButtonCaption: yesCaption });\n};\n\nexport const showLeaveFromChatConfirm = (): Promise<boolean> => {\n\tconst kickText = Loc.getMessage('IM_LIB_CONFIRM_LEAVE_CHAT');\n\tconst yesCaption = Loc.getMessage('IM_LIB_CONFIRM_LEAVE_CHAT_YES');\n\n\treturn showTwoButtonConfirm({ text: kickText, firstButtonCaption: yesCaption });\n};\n\nexport const showDesktopConfirm = (): Promise<boolean> => {\n\tconst restartText = Loc.getMessage('IM_LIB_CONFIRM_RESTART_DESKTOP');\n\tconst okText = Loc.getMessage('IM_LIB_CONFIRM_RESTART_DESKTOP_OK');\n\n\treturn showSingleButtonConfirm({ text: restartText, firstButtonCaption: okText });\n};\n\nexport const showDesktopRestartConfirm = (): Promise<boolean> => {\n\tconst restartText = Loc.getMessage('IM_LIB_CONFIRM_RESTART_DESKTOP');\n\tconst restartCaption = Loc.getMessage('IM_LIB_CONFIRM_RESTART_DESKTOP_RESTART');\n\tconst laterCaption = Loc.getMessage('IM_LIB_CONFIRM_RESTART_DESKTOP_LATER');\n\n\treturn showTwoButtonConfirm({\n\t\ttext: restartText,\n\t\tfirstButtonCaption: restartCaption,\n\t\tsecondButtonCaption: laterCaption,\n\t});\n};\n\nexport const showDesktopDeleteConfirm = (): Promise<boolean> => {\n\tconst deleteText = Loc.getMessage('IM_LIB_CONFIRM_DELETE_DESKTOP').replace('#BR#', '<br>');\n\tconst confirmCaption = Loc.getMessage('IM_LIB_CONFIRM_DELETE_DESKTOP_CONFIRM');\n\n\treturn showTwoButtonConfirm({\n\t\ttext: deleteText,\n\t\tfirstButtonCaption: confirmCaption,\n\t});\n};\n\nexport const showNotificationsModeSwitchConfirm = (): Promise<boolean> => {\n\tconst kickText = Loc.getMessage('IM_LIB_CONFIRM_SWITCH_NOTIFICATION_MODE');\n\tconst yesCaption = Loc.getMessage('IM_LIB_CONFIRM_SWITCH_NOTIFICATION_MODE_YES');\n\n\treturn showTwoButtonConfirm({ text: kickText, firstButtonCaption: yesCaption });\n};\n\nconst showTwoButtonConfirm = (params: ConfirmParams): Promise<boolean> => {\n\tconst { text, firstButtonCaption = '', secondButtonCaption = '' } = params;\n\n\treturn new Promise((resolve) => {\n\t\tconst options = {\n\t\t\tmessage: text,\n\t\t\tmodal: true,\n\t\t\tbuttons: MessageBoxButtons.YES_CANCEL,\n\t\t\tonYes: (messageBox: ChatConfirm) => {\n\t\t\t\tresolve(true);\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tonCancel: (messageBox: ChatConfirm) => {\n\t\t\t\tresolve(false);\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t};\n\n\t\tif (Type.isStringFilled(firstButtonCaption))\n\t\t{\n\t\t\toptions.yesCaption = firstButtonCaption;\n\t\t}\n\n\t\tif (Type.isStringFilled(secondButtonCaption))\n\t\t{\n\t\t\toptions.cancelCaption = secondButtonCaption;\n\t\t}\n\n\t\tChatConfirm.show(options);\n\t});\n};\n\nconst showSingleButtonConfirm = (params: ConfirmParams): Promise<boolean> => {\n\tconst { text, firstButtonCaption = '' } = params;\n\n\treturn new Promise((resolve) => {\n\t\tconst options = {\n\t\t\tmessage: text,\n\t\t\tmodal: true,\n\t\t\tbuttons: MessageBoxButtons.OK,\n\t\t\tonOk: (messageBox: ChatConfirm) => {\n\t\t\t\tresolve(true);\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t};\n\n\t\tif (Type.isStringFilled(firstButtonCaption))\n\t\t{\n\t\t\toptions.okCaption = firstButtonCaption;\n\t\t}\n\n\t\tChatConfirm.show(options);\n\t});\n};\n"],"names":["CONTAINER_CLASS","CONTAINER_MIN_HEIGHT","ChatConfirm","MessageBox","getPopupWindow","popup","Dom","addClass","getPopupContainer","style","showKickUserConfirm","kickText","Loc","getMessage","yesCaption","showTwoButtonConfirm","text","firstButtonCaption","showLeaveFromChatConfirm","showDesktopConfirm","restartText","okText","showSingleButtonConfirm","showDesktopRestartConfirm","restartCaption","laterCaption","secondButtonCaption","showDesktopDeleteConfirm","deleteText","replace","confirmCaption","showNotificationsModeSwitchConfirm","params","Promise","resolve","options","message","modal","buttons","MessageBoxButtons","YES_CANCEL","onYes","messageBox","close","onCancel","Type","isStringFilled","cancelCaption","show","OK","onOk","okCaption"],"mappings":";;;;;;;CAMA,MAAMA,eAAe,GAAG,sBAAsB;CAC9C,MAAMC,oBAAoB,GAAG,GAAG;AAEhC,CAAO,MAAMC,WAAW,SAASC,gCAAU,CAC3C;;GAECC,cAAc,GACd;KACC,MAAMC,KAAK,GAAG,KAAK,CAACD,cAAc,EAAE;KACpCE,aAAG,CAACC,QAAQ,CAACF,KAAK,CAACG,iBAAiB,EAAE,EAAER,eAAe,CAAC;KACxDM,aAAG,CAACG,KAAK,CAACJ,KAAK,CAACG,iBAAiB,EAAE,EAAE,WAAW,EAAG,GAAEP,oBAAqB,IAAG,CAAC;KAE9E,OAAO,KAAK,CAACG,cAAc,EAAE;;CAE/B;;OCTaM,mBAAmB,GAAG,MAAwB;GAC1D,MAAMC,QAAQ,GAAGC,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;GAC3D,MAAMC,UAAU,GAAGF,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;GAEjE,OAAOE,oBAAoB,CAAC;KAAEC,IAAI,EAAEL,QAAQ;KAAEM,kBAAkB,EAAEH;IAAY,CAAC;CAChF,CAAC;AAED,OAAaI,wBAAwB,GAAG,MAAwB;GAC/D,MAAMP,QAAQ,GAAGC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC;GAC5D,MAAMC,UAAU,GAAGF,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;GAElE,OAAOE,oBAAoB,CAAC;KAAEC,IAAI,EAAEL,QAAQ;KAAEM,kBAAkB,EAAEH;IAAY,CAAC;CAChF,CAAC;AAED,OAAaK,kBAAkB,GAAG,MAAwB;GACzD,MAAMC,WAAW,GAAGR,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;GACpE,MAAMQ,MAAM,GAAGT,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;GAElE,OAAOS,uBAAuB,CAAC;KAAEN,IAAI,EAAEI,WAAW;KAAEH,kBAAkB,EAAEI;IAAQ,CAAC;CAClF,CAAC;AAED,OAAaE,yBAAyB,GAAG,MAAwB;GAChE,MAAMH,WAAW,GAAGR,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;GACpE,MAAMW,cAAc,GAAGZ,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;GAC/E,MAAMY,YAAY,GAAGb,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC;GAE3E,OAAOE,oBAAoB,CAAC;KAC3BC,IAAI,EAAEI,WAAW;KACjBH,kBAAkB,EAAEO,cAAc;KAClCE,mBAAmB,EAAED;IACrB,CAAC;CACH,CAAC;AAED,OAAaE,wBAAwB,GAAG,MAAwB;GAC/D,MAAMC,UAAU,GAAGhB,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,CAACgB,OAAO,CAAC,MAAM,EAAE,MAAM,CAAC;GAC1F,MAAMC,cAAc,GAAGlB,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;GAE9E,OAAOE,oBAAoB,CAAC;KAC3BC,IAAI,EAAEY,UAAU;KAChBX,kBAAkB,EAAEa;IACpB,CAAC;CACH,CAAC;AAED,OAAaC,kCAAkC,GAAG,MAAwB;GACzE,MAAMpB,QAAQ,GAAGC,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;GAC1E,MAAMC,UAAU,GAAGF,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;GAEhF,OAAOE,oBAAoB,CAAC;KAAEC,IAAI,EAAEL,QAAQ;KAAEM,kBAAkB,EAAEH;IAAY,CAAC;CAChF,CAAC;CAED,MAAMC,oBAAoB,GAAIiB,MAAqB,IAAuB;GACzE,MAAM;KAAEhB,IAAI;KAAEC,kBAAkB,GAAG,EAAE;KAAES,mBAAmB,GAAG;IAAI,GAAGM,MAAM;GAE1E,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;KAC/B,MAAMC,OAAO,GAAG;OACfC,OAAO,EAAEpB,IAAI;OACbqB,KAAK,EAAE,IAAI;OACXC,OAAO,EAAEC,uCAAiB,CAACC,UAAU;OACrCC,KAAK,EAAGC,UAAuB,IAAK;SACnCR,OAAO,CAAC,IAAI,CAAC;SACbQ,UAAU,CAACC,KAAK,EAAE;QAClB;OACDC,QAAQ,EAAGF,UAAuB,IAAK;SACtCR,OAAO,CAAC,KAAK,CAAC;SACdQ,UAAU,CAACC,KAAK,EAAE;;MAEnB;KAED,IAAIE,cAAI,CAACC,cAAc,CAAC7B,kBAAkB,CAAC,EAC3C;OACCkB,OAAO,CAACrB,UAAU,GAAGG,kBAAkB;;KAGxC,IAAI4B,cAAI,CAACC,cAAc,CAACpB,mBAAmB,CAAC,EAC5C;OACCS,OAAO,CAACY,aAAa,GAAGrB,mBAAmB;;KAG5CxB,WAAW,CAAC8C,IAAI,CAACb,OAAO,CAAC;IACzB,CAAC;CACH,CAAC;CAED,MAAMb,uBAAuB,GAAIU,MAAqB,IAAuB;GAC5E,MAAM;KAAEhB,IAAI;KAAEC,kBAAkB,GAAG;IAAI,GAAGe,MAAM;GAEhD,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;KAC/B,MAAMC,OAAO,GAAG;OACfC,OAAO,EAAEpB,IAAI;OACbqB,KAAK,EAAE,IAAI;OACXC,OAAO,EAAEC,uCAAiB,CAACU,EAAE;OAC7BC,IAAI,EAAGR,UAAuB,IAAK;SAClCR,OAAO,CAAC,IAAI,CAAC;SACbQ,UAAU,CAACC,KAAK,EAAE;;MAEnB;KAED,IAAIE,cAAI,CAACC,cAAc,CAAC7B,kBAAkB,CAAC,EAC3C;OACCkB,OAAO,CAACgB,SAAS,GAAGlC,kBAAkB;;KAGvCf,WAAW,CAAC8C,IAAI,CAACb,OAAO,CAAC;IACzB,CAAC;CACH,CAAC;;;;;;;;;;;;;"}