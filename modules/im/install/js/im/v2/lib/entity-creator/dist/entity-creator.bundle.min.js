this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,a,t,r,i,l,o){"use strict";const n="BX.Calendar:onEntrySave";var c=babelHelpers.classPrivateFieldLooseKey("chatId");var d=babelHelpers.classPrivateFieldLooseKey("restClient");var b=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySaveHandler");var v=babelHelpers.classPrivateFieldLooseKey("createMeeting");var h=babelHelpers.classPrivateFieldLooseKey("createAiText");var p=babelHelpers.classPrivateFieldLooseKey("createTask");var P=babelHelpers.classPrivateFieldLooseKey("requestPreparedParams");var u=babelHelpers.classPrivateFieldLooseKey("openTaskSlider");var B=babelHelpers.classPrivateFieldLooseKey("openCalendarSlider");var L=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySave");class F{constructor(e){Object.defineProperty(this,L,{value:X});Object.defineProperty(this,B,{value:g});Object.defineProperty(this,u,{value:C});Object.defineProperty(this,P,{value:M});Object.defineProperty(this,p,{value:f});Object.defineProperty(this,h,{value:y});Object.defineProperty(this,v,{value:H});Object.defineProperty(this,c,{writable:true,value:0});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,d)[d]=l.Core.getRestClient();babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e}createAiTextForChat(e){babelHelpers.classPrivateFieldLooseBase(this,h)[h](e)}createTaskForChat(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]()}createTaskForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,p)[p](e)}createMeetingForChat(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]()}createMeetingForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,v)[v](e)}}function H(e){const s={CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,c)[c]};if(e){s.MESSAGE_ID=e}return babelHelpers.classPrivateFieldLooseBase(this,P)[P](o.RestMethod.imChatCalendarPrepare,s).then((s=>{const{params:t}=s;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=babelHelpers.classPrivateFieldLooseBase(this,L)[L].bind(this,t.sliderId,e);a.EventEmitter.subscribeOnce(n,babelHelpers.classPrivateFieldLooseBase(this,b)[b]);return babelHelpers.classPrivateFieldLooseBase(this,B)[B](t)}))}function y(e){const s=new t.Picker({startMessage:e,moduleId:"im",contextId:"im_menu_plus",history:true,onSelect:e=>{a.EventEmitter.emit(o.EventType.textarea.insertText,{text:e.data,replace:true})}});s.setLangSpace(t.Picker.LangSpace.text).text()}function f(e){const s={data:{chatId:babelHelpers.classPrivateFieldLooseBase(this,c)[c]}};if(e){s.data.messageId=e}return i.runAction(o.RestMethod.imV2ChatTaskPrepare,s).then((e=>{const{link:s,params:a}=e;return babelHelpers.classPrivateFieldLooseBase(this,u)[u](s,a)}))}function M(e,s){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].callMethod(e,s).then((e=>e.data())).catch((e=>{console.error(e)}))}function C(e,s){BX.SidePanel.Instance.open(e,{requestMethod:"post",requestParams:s,cacheable:false})}function g(e){new(window.top.BX||window.BX).Calendar.SliderLoader(0,e).show()}function X(e,s,a){const t=a.getData();if(t.sliderId!==e){return}const r={CALENDAR_ID:t.responseData.entryId,CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,c)[c]};if(s){r.MESSAGE_ID=s}return babelHelpers.classPrivateFieldLooseBase(this,d)[d].callMethod(o.RestMethod.imChatCalendarAdd,r).catch((e=>{console.error(e)}))}e.EntityCreator=F})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Event,BX.AI,BX.Calendar,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=entity-creator.bundle.map.js