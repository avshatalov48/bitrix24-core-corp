this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,a,t,r){"use strict";const l=Object.freeze({task:r.RestMethod.imChatTaskPrepare,meeting:r.RestMethod.imChatCalendarPrepare});const i="BX.Calendar:onEntrySave";var o=babelHelpers.classPrivateFieldLooseKey("chatId");var n=babelHelpers.classPrivateFieldLooseKey("restClient");var c=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySaveHandler");var b=babelHelpers.classPrivateFieldLooseKey("calendarSliderId");var d=babelHelpers.classPrivateFieldLooseKey("createMeeting");var v=babelHelpers.classPrivateFieldLooseKey("createTask");var h=babelHelpers.classPrivateFieldLooseKey("requestPreparedParams");var p=babelHelpers.classPrivateFieldLooseKey("openTaskSlider");var P=babelHelpers.classPrivateFieldLooseKey("openCalendarSlider");var u=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySave");class B{constructor(e){Object.defineProperty(this,u,{value:M});Object.defineProperty(this,P,{value:f});Object.defineProperty(this,p,{value:y});Object.defineProperty(this,h,{value:L});Object.defineProperty(this,v,{value:H});Object.defineProperty(this,d,{value:F});Object.defineProperty(this,o,{writable:true,value:0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,n)[n]=t.Core.getRestClient();babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e}createTaskForChat(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]()}createTaskForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,v)[v](e)}createMeetingForChat(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d]()}createMeetingForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,d)[d](e)}}function F(e){const a={CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,o)[o]};if(e){a["MESSAGE_ID"]=e}return babelHelpers.classPrivateFieldLooseBase(this,h)[h](l.meeting,a).then((a=>{const{params:t}=a;babelHelpers.classPrivateFieldLooseBase(this,c)[c]=babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this,t.sliderId,e);s.EventEmitter.subscribeOnce(i,babelHelpers.classPrivateFieldLooseBase(this,c)[c]);return babelHelpers.classPrivateFieldLooseBase(this,P)[P](t)}))}function H(e){const s={CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,o)[o]};if(e){s["MESSAGE_ID"]=e}return babelHelpers.classPrivateFieldLooseBase(this,h)[h](l.task,s).then((e=>{const{link:s,params:a}=e;return babelHelpers.classPrivateFieldLooseBase(this,p)[p](s,a)}))}function L(e,s){return babelHelpers.classPrivateFieldLooseBase(this,n)[n].callMethod(e,s).then((e=>e.data())).catch((e=>{console.error(e)}))}function y(e,s){BX.SidePanel.Instance.open(e,{requestMethod:"post",requestParams:s,cacheable:false})}function f(e){new(window.top.BX||window.BX).Calendar.SliderLoader(0,e).show()}function M(e,s,a){const t=a.getData();if(t.sliderId!==e){return}const l={CALENDAR_ID:t.responseData.entryId,CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,o)[o]};if(s){l["MESSAGE_ID"]=s}return babelHelpers.classPrivateFieldLooseBase(this,n)[n].callMethod(r.RestMethod.imChatCalendarAdd,l).catch((e=>{console.error(e)}))}e.EntityCreator=B})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Event,BX,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=entity-creator.bundle.map.js