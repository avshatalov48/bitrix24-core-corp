this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t,a,r,l,i){"use strict";const o=Object.freeze({task:i.RestMethod.imChatTaskPrepare,meeting:i.RestMethod.imChatCalendarPrepare});const n="BX.Calendar:onEntrySave";var c=babelHelpers.classPrivateFieldLooseKey("chatId");var d=babelHelpers.classPrivateFieldLooseKey("restClient");var b=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySaveHandler");var v=babelHelpers.classPrivateFieldLooseKey("calendarSliderId");var h=babelHelpers.classPrivateFieldLooseKey("createMeeting");var p=babelHelpers.classPrivateFieldLooseKey("createAiText");var P=babelHelpers.classPrivateFieldLooseKey("createTask");var u=babelHelpers.classPrivateFieldLooseKey("requestPreparedParams");var B=babelHelpers.classPrivateFieldLooseKey("openTaskSlider");var L=babelHelpers.classPrivateFieldLooseKey("openCalendarSlider");var F=babelHelpers.classPrivateFieldLooseKey("onCalendarEntrySave");class H{constructor(e){Object.defineProperty(this,F,{value:E});Object.defineProperty(this,L,{value:X});Object.defineProperty(this,B,{value:g});Object.defineProperty(this,u,{value:M});Object.defineProperty(this,P,{value:C});Object.defineProperty(this,p,{value:f});Object.defineProperty(this,h,{value:y});Object.defineProperty(this,c,{writable:true,value:0});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,d)[d]=l.Core.getRestClient();babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e}createAiTextForChat(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p](e)}createTaskForChat(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]()}createTaskForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,P)[P](e)}createMeetingForChat(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h]()}createMeetingForMessage(e){return babelHelpers.classPrivateFieldLooseBase(this,h)[h](e)}}function y(e){const t={CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,c)[c]};if(e){t["MESSAGE_ID"]=e}return babelHelpers.classPrivateFieldLooseBase(this,u)[u](o.meeting,t).then((t=>{const{params:a}=t;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=babelHelpers.classPrivateFieldLooseBase(this,F)[F].bind(this,a.sliderId,e);s.EventEmitter.subscribeOnce(n,babelHelpers.classPrivateFieldLooseBase(this,b)[b]);return babelHelpers.classPrivateFieldLooseBase(this,L)[L](a)}))}function f(e){const t=new a.Picker({startMessage:e,moduleId:"im",contextId:"im_menu_plus",history:true,onSelect:e=>{s.EventEmitter.emit(i.EventType.textarea.insertText,{text:e.data,replace:true})}});t.setLangSpace(a.Picker.LangSpace.text).text()}function C(e){const s={CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,c)[c]};if(e){s["MESSAGE_ID"]=e}return babelHelpers.classPrivateFieldLooseBase(this,u)[u](o.task,s).then((e=>{const{link:s,params:t}=e;return babelHelpers.classPrivateFieldLooseBase(this,B)[B](s,t)}))}function M(e,s){return babelHelpers.classPrivateFieldLooseBase(this,d)[d].callMethod(e,s).then((e=>e.data())).catch((e=>{console.error(e)}))}function g(e,s){BX.SidePanel.Instance.open(e,{requestMethod:"post",requestParams:s,cacheable:false})}function X(e){new(window.top.BX||window.BX).Calendar.SliderLoader(0,e).show()}function E(e,s,t){const a=t.getData();if(a.sliderId!==e){return}const r={CALENDAR_ID:a.responseData.entryId,CHAT_ID:babelHelpers.classPrivateFieldLooseBase(this,c)[c]};if(s){r["MESSAGE_ID"]=s}return babelHelpers.classPrivateFieldLooseBase(this,d)[d].callMethod(i.RestMethod.imChatCalendarAdd,r).catch((e=>{console.error(e)}))}e.EntityCreator=H})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Event,BX,BX.AI,BX.Calendar,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=entity-creator.bundle.map.js