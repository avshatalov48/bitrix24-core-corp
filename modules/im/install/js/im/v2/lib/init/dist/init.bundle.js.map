{"version":3,"file":"init.bundle.js","sources":["../src/init.js"],"sourcesContent":["import {Core} from 'im.v2.application.core';\nimport {CallManager} from 'im.v2.lib.call';\nimport {SmileManager} from 'im.v2.lib.smile-manager';\nimport {UserManager} from 'im.v2.lib.user';\nimport {CounterManager} from 'im.v2.lib.counter';\nimport {Logger} from 'im.v2.lib.logger';\nimport {NotifierManager} from 'im.v2.lib.notifier';\nimport {ApplicationName} from 'im.v2.const';\nimport {MarketManager} from 'im.v2.lib.market';\nimport {DesktopManager} from 'im.v2.lib.desktop';\n\nexport class InitManager\n{\n\tstatic #started: boolean = false;\n\n\tstatic start()\n\t{\n\t\tif (this.#started)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#initLogger();\n\t\tLogger.warn('InitManager: start');\n\t\tthis.#initCurrentUser();\n\t\tthis.#initChatRestrictions();\n\t\tthis.#initCounters();\n\t\tthis.#initMarket();\n\t\tthis.#initSettings();\n\n\t\tCallManager.init();\n\t\tSmileManager.init();\n\t\tNotifierManager.init();\n\t\tDesktopManager.init();\n\n\t\tthis.#started = true;\n\t}\n\n\tstatic #initCurrentUser()\n\t{\n\t\tconst {currentUser} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!currentUser)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tnew UserManager().setUsersToModel([currentUser]);\n\t}\n\n\tstatic #initLogger()\n\t{\n\t\tconst {loggerConfig} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!loggerConfig)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tLogger.setConfig(loggerConfig);\n\t}\n\n\tstatic #initChatRestrictions()\n\t{\n\t\tconst {chatOptions} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!chatOptions)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tCore.getStore().dispatch('dialogues/setChatOptions', chatOptions);\n\t}\n\n\tstatic #initCounters()\n\t{\n\t\tconst {counters} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!counters)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tLogger.warn('InitManager: counters', counters);\n\t\tCounterManager.init(counters);\n\t}\n\n\tstatic #initMarket()\n\t{\n\t\tconst {marketApps} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!marketApps)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLogger.warn('InitManager: marketApps', marketApps);\n\t\tMarketManager.init(marketApps);\n\t}\n\n\tstatic #initSettings()\n\t{\n\t\tconst {settings} = Core.getApplicationData(ApplicationName.quickAccess);\n\t\tif (!settings)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLogger.warn('InitManager: settings', settings);\n\t\tCore.getStore().dispatch('application/settings/set', settings);\n\t}\n}"],"names":["InitManager","start","Logger","warn","CallManager","init","SmileManager","NotifierManager","DesktopManager","currentUser","Core","getApplicationData","ApplicationName","quickAccess","UserManager","setUsersToModel","loggerConfig","setConfig","chatOptions","getStore","dispatch","counters","CounterManager","marketApps","MarketManager","settings"],"mappings":";;;;;;CASiD;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAEjD,CAAO,MAAMA,WAAW,CACxB;GAGC,OAAOC,KAAK,GACZ;KACC,4CAAI,IAAI,uBACR;OACC;;KAGD,4CAAI;KACJC,uBAAM,CAACC,IAAI,CAAC,oBAAoB,CAAC;KACjC,4CAAI;KACJ,4CAAI;KACJ,4CAAI;KACJ,4CAAI;KACJ,4CAAI;KAEJC,0BAAW,CAACC,IAAI,EAAE;KAClBC,mCAAY,CAACD,IAAI,EAAE;KACnBE,kCAAe,CAACF,IAAI,EAAE;KACtBG,gCAAc,CAACH,IAAI,EAAE;KAErB,4CAAI,wBAAY,IAAI;;CAuEtB;CAAC,6BAnEA;GACC,MAAM;KAACI;IAAY,GAAGC,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GAC1E,IAAI,CAACJ,WAAW,EAChB;KACC,OAAO,KAAK;;GAGb,IAAIK,0BAAW,EAAE,CAACC,eAAe,CAAC,CAACN,WAAW,CAAC,CAAC;CACjD;CAAC,wBAGD;GACC,MAAM;KAACO;IAAa,GAAGN,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GAC3E,IAAI,CAACG,YAAY,EACjB;KACC,OAAO,KAAK;;GAGbd,uBAAM,CAACe,SAAS,CAACD,YAAY,CAAC;CAC/B;CAAC,kCAGD;GACC,MAAM;KAACE;IAAY,GAAGR,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GAC1E,IAAI,CAACK,WAAW,EAChB;KACC,OAAO,KAAK;;GAGbR,2BAAI,CAACS,QAAQ,EAAE,CAACC,QAAQ,CAAC,0BAA0B,EAAEF,WAAW,CAAC;CAClE;CAAC,0BAGD;GACC,MAAM;KAACG;IAAS,GAAGX,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GACvE,IAAI,CAACQ,QAAQ,EACb;KACC,OAAO,KAAK;;GAGbnB,uBAAM,CAACC,IAAI,CAAC,uBAAuB,EAAEkB,QAAQ,CAAC;GAC9CC,gCAAc,CAACjB,IAAI,CAACgB,QAAQ,CAAC;CAC9B;CAAC,wBAGD;GACC,MAAM;KAACE;IAAW,GAAGb,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GACzE,IAAI,CAACU,UAAU,EACf;KACC;;GAGDrB,uBAAM,CAACC,IAAI,CAAC,yBAAyB,EAAEoB,UAAU,CAAC;GAClDC,8BAAa,CAACnB,IAAI,CAACkB,UAAU,CAAC;CAC/B;CAAC,0BAGD;GACC,MAAM;KAACE;IAAS,GAAGf,2BAAI,CAACC,kBAAkB,CAACC,2BAAe,CAACC,WAAW,CAAC;GACvE,IAAI,CAACY,QAAQ,EACb;KACC;;GAGDvB,uBAAM,CAACC,IAAI,CAAC,uBAAuB,EAAEsB,QAAQ,CAAC;GAC9Cf,2BAAI,CAACS,QAAQ,EAAE,CAACC,QAAQ,CAAC,0BAA0B,EAAEK,QAAQ,CAAC;CAC/D;CAAC,sBA9FWzB,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;GAAA,OAEI;CAAK;;;;;;;;"}