this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,r,n,s){"use strict";const o="invalid_authentication";let i=true;const c=(e,r={})=>{const n={...r,data:f(r.data)};return new Promise(((r,s)=>{t.ajax.runAction(e,n).then((e=>{i=true;return r(e.data)})).catch((t=>{if(u(t.errors)){i=false;return a(e,n,t)}return s(t.errors)}))}))};const a=async(e,t,s)=>{await r.EventEmitter.emitAsync(n.EventType.request.onAuthError,{errors:s.errors});return c(e,t)};const u=e=>{if(!i){return false}return e.some((e=>e.code===o))};const h=e=>{const t={};const r=new Set;Object.entries(e).forEach((([e,n])=>{r.add(e);t[e]=[e,n]}));return new Promise(((e,n)=>{s.Core.getRestClient().callBatch(t,(t=>{const s={};for(const e of r){const r=t[e];if(r.error()){const{error:t,error_description:s}=r.error().ex;n({method:e,code:t,description:s});break}s[e]=r.data()}return e(s)}))}))};const f=e=>{if(e instanceof FormData){return e}if(!t.Type.isObjectLike(e)){return{}}const r={};for(const[n,s]of Object.entries(e)){let e=s;if(t.Type.isBoolean(s)){e=s===true?"Y":"N"}r[n]=e}return r};e.runAction=c;e.callBatch=h})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX,BX.Event,BX.Messenger.v2.Const,BX.Messenger.v2.Application);
//# sourceMappingURL=rest.bundle.map.js