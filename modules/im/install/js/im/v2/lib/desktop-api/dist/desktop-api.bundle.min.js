this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(t,e,o,n){"use strict";const s={getApiVersion(){if(!this.isDesktop()){return 0}const[t,e,o,n]=window.BXDesktopSystem.GetProperty("versionParts");return n},isFeatureEnabled(t){var e;return!!((e=window.BXDesktopSystem)!=null&&e.FeatureEnabled(t))}};const i={subscribe(t,e){if(!this.isDesktop()){return}const o=t=>{var o;const n=(o=t.detail)!=null?o:[];e.apply(window,n)};n.Event.bind(window,t,o)},unsubscribe(t,e){n.Event.unbind(window,t,e)},emit(t,e=[]){var o;(o=BXDesktopWindow)==null?void 0:o.DispatchCustomEvent(t,e)},emitToMainWindow(t,e=[]){var o,n;(o=BXDesktopSystem)==null?void 0:(n=o.GetMainWindow())==null?void 0:n.DispatchCustomEvent(t,e)}};const r={showWindow(){var t,e;(t=BXDesktopSystem)==null?void 0:t.SetActiveTab();(e=window.BXDesktopWindow)==null?void 0:e.ExecuteCommand("show")},hideWindow(){var t;(t=window.BXDesktopWindow)==null?void 0:t.ExecuteCommand("hide")},closeWindow(){var t;(t=window.BXDesktopWindow)==null?void 0:t.ExecuteCommand("close")},closeWindowByName(t=""){var e;const o=this.findWindow(t);if(!o){return}(e=o.BXDesktopWindow)==null?void 0:e.ExecuteCommand("close")},reloadWindow(){const t=new e.BaseEvent;e.EventEmitter.emit(window,o.EventType.desktop.onReload,t);location.reload()},findWindow(t=""){var e;const o=(e=opener)!=null?e:top;return o.BXWindows.find((e=>(e==null?void 0:e.name)===t))},createWindow(t,e){BXDesktopSystem.GetWindow(t,e)},createTopmostWindow(t){return BXDesktopSystem.ExecuteCommand("topmost.show.html",t)},setWindowPosition(t){var e;const o={};Object.entries(t).forEach((([t,e])=>{const n=t[0].toUpperCase()+t.slice(1);o[n]=e}));(e=BXDesktopWindow)==null?void 0:e.SetProperty("position",o)},prepareHtml(t,e){if(n.Type.isDomNode(t)){t=t.outerHTML}if(n.Type.isDomNode(e)){e=e.outerHTML}n.Event.ready();if(n.Type.isStringFilled(e)){e=`\n\t\t\t\t<script type="text/javascript">\n\t\t\t\t\tBX.ready(() => {\n\t\t\t\t\t\t${e}\n\t\t\t\t\t});\n\t\t\t\t<\/script>\n\t\t\t`}return`\n\t\t\t<!DOCTYPE html>\n\t\t\t<html>\n\t\t\t\t<body class="im-desktop im-desktop-popup">\n\t\t\t\t\t${t}${e}\n\t\t\t\t</body>\n\t\t\t</html>\n\t\t`}};const d={setCounter(t,e=false){var o,n;const s=t.toString();(o=BXDesktopSystem)==null?void 0:o.SetIconBadge(s,e);(n=BXDesktopSystem)==null?void 0:n.SetTabBadge(0,s)},setIconStatus(t){var e;(e=BXDesktopSystem)==null?void 0:e.SetIconStatus(t)},setOfflineIcon(){var t;(t=BXDesktopSystem)==null?void 0:t.SetIconStatus("offline")},setBrowserIconBadge(t){var e;(e=BXDesktopSystem)==null?void 0:e.SetBrowserIconBadge(t.toString())}};const a={smoothing:"bxd_camera_smoothing"};const l={getCameraSmoothingStatus(){var t;return((t=BXDesktopSystem)==null?void 0:t.QuerySettings(a.smoothing,"0"))==="1"},setCameraSmoothingStatus(t){var e;const o=t===true?"1":"0";(e=BXDesktopSystem)==null?void 0:e.StoreSettings(a.smoothing,o)}};const p={changeTab(t){const e=n.Extension.getSettings("im.v2.lib.desktop-api");const o=e.get("v2");if(o){return}BX.desktop.changeTab(t)}};const u={isDesktop(){return n.Type.isObject(window.BXDesktopSystem)},isTwoWindowMode(){var t;return!!((t=BXDesktopSystem)!=null&&t.IsTwoWindowsMode())},isChatWindow(){return location.href.includes("desktop_app")},exit(){var t;(t=BXDesktopSystem)==null?void 0:t.Shutdown()},log(t,e){var o;(o=BXDesktopSystem)==null?void 0:o.Log(t,e)},...s,...i,...r,...d,...l,...p};t.DesktopApi=u})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Event,BX.Messenger.v2.Const,BX);
//# sourceMappingURL=desktop-api.bundle.map.js