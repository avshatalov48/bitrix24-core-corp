{"version":3,"file":"textarea.bundle.js","sources":["../src/textarea.js"],"sourcesContent":["const TAB = '\\t';\nconst NEW_LINE = '\\n';\nconst LETTER_CODE_PREFIX = 'Key';\n\n/* eslint-disable no-param-reassign */\nexport const Textarea = {\n\taddTab(textarea: HTMLTextAreaElement): string\n\t{\n\t\tconst newSelectionPosition = textarea.selectionStart + 1;\n\n\t\tconst textBefore = textarea.value.slice(0, textarea.selectionStart);\n\t\tconst textAfter = textarea.value.slice(textarea.selectionEnd);\n\t\tconst textWithTab = `${textBefore}${TAB}${textAfter}`;\n\n\t\ttextarea.value = textWithTab;\n\t\ttextarea.selectionStart = newSelectionPosition;\n\t\ttextarea.selectionEnd = newSelectionPosition;\n\n\t\treturn textWithTab;\n\t},\n\tremoveTab(textarea: HTMLTextAreaElement): string\n\t{\n\t\tconst previousSymbol = textarea.value.slice(textarea.selectionStart - 1, textarea.selectionStart);\n\t\tif (previousSymbol !== TAB)\n\t\t{\n\t\t\treturn textarea.value;\n\t\t}\n\n\t\tconst newSelectionPosition = textarea.selectionStart - 1;\n\n\t\tconst textBefore = textarea.value.slice(0, textarea.selectionStart - 1);\n\t\tconst textAfter = textarea.value.slice(textarea.selectionEnd);\n\t\tconst textWithoutTab = `${textBefore}${textAfter}`;\n\n\t\ttextarea.value = textWithoutTab;\n\t\ttextarea.selectionStart = newSelectionPosition;\n\t\ttextarea.selectionEnd = newSelectionPosition;\n\n\t\treturn textWithoutTab;\n\t},\n\thandleDecorationTag(textarea: HTMLTextAreaElement, decorationKey: 'KeyB' | 'KeyI' | 'KeyU' | 'KeyS'): string\n\t{\n\t\tdecorationKey = decorationKey.replace(LETTER_CODE_PREFIX, '').toLowerCase();\n\t\tconst LEFT_TAG = `[${decorationKey}]`;\n\t\tconst RIGHT_TAG = `[/${decorationKey}]`;\n\n\t\tconst selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n\t\tif (!selectedText)\n\t\t{\n\t\t\treturn textarea.value;\n\t\t}\n\n\t\tconst hasDecorationTag = (\n\t\t\tselectedText.toLowerCase().startsWith(LEFT_TAG)\n\t\t\t&& selectedText.toLowerCase().endsWith(RIGHT_TAG)\n\t\t);\n\t\tif (hasDecorationTag)\n\t\t{\n\t\t\treturn this.removeDecorationTag(textarea, decorationKey);\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn this.addDecorationTag(textarea, decorationKey);\n\t\t}\n\t},\n\taddDecorationTag(textarea: HTMLTextAreaElement, decorationKey: 'b' | 'i' | 'u' | 's'): string\n\t{\n\t\tconst LEFT_TAG = `[${decorationKey}]`;\n\t\tconst RIGHT_TAG = `[/${decorationKey}]`;\n\n\t\tconst decorationTagLength = LEFT_TAG.length + RIGHT_TAG.length;\n\t\tconst newSelectionStart = textarea.selectionStart;\n\t\tconst newSelectionEnd = textarea.selectionEnd + decorationTagLength;\n\n\t\tconst textBefore = textarea.value.slice(0, textarea.selectionStart);\n\t\tconst selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n\t\tconst textAfter = textarea.value.slice(textarea.selectionEnd);\n\t\tconst textWithTag = `${textBefore}${LEFT_TAG}${selectedText}${RIGHT_TAG}${textAfter}`;\n\n\t\ttextarea.value = textWithTag;\n\t\ttextarea.selectionStart = newSelectionStart;\n\t\ttextarea.selectionEnd = newSelectionEnd;\n\n\t\treturn textWithTag;\n\t},\n\tremoveDecorationTag(textarea: HTMLTextAreaElement, decorationKey: 'b' | 'i' | 'u' | 's'): string\n\t{\n\t\tconst LEFT_TAG = `[${decorationKey}]`;\n\t\tconst RIGHT_TAG = `[/${decorationKey}]`;\n\n\t\tconst decorationTagLength = LEFT_TAG.length + RIGHT_TAG.length;\n\t\tconst newSelectionStart = textarea.selectionStart;\n\t\tconst newSelectionEnd = textarea.selectionEnd - decorationTagLength;\n\n\t\tconst textBefore = textarea.value.slice(0, textarea.selectionStart);\n\n\t\tconst textInTagStart = textarea.selectionStart + LEFT_TAG.length;\n\t\tconst textInTagEnd = textarea.selectionEnd - RIGHT_TAG.length;\n\t\tconst textInTag = textarea.value.slice(textInTagStart, textInTagEnd);\n\n\t\tconst textAfter = textarea.value.slice(textarea.selectionEnd);\n\t\tconst textWithoutTag = `${textBefore}${textInTag}${textAfter}`;\n\n\t\ttextarea.value = textWithoutTag;\n\t\ttextarea.selectionStart = newSelectionStart;\n\t\ttextarea.selectionEnd = newSelectionEnd;\n\n\t\treturn textWithoutTag;\n\t},\n\taddNewLine(textarea: HTMLTextAreaElement): string\n\t{\n\t\tconst newSelectionPosition = textarea.selectionStart + 1;\n\n\t\tconst textBefore = textarea.value.slice(0, textarea.selectionStart);\n\t\tconst textAfter = textarea.value.slice(textarea.selectionEnd);\n\t\tconst textWithNewLine = `${textBefore}${NEW_LINE}${textAfter}`;\n\n\t\ttextarea.value = textWithNewLine;\n\t\ttextarea.selectionStart = newSelectionPosition;\n\t\ttextarea.selectionEnd = newSelectionPosition;\n\n\t\treturn textWithNewLine;\n\t},\n};\n"],"names":["TAB","NEW_LINE","LETTER_CODE_PREFIX","Textarea","addTab","textarea","newSelectionPosition","selectionStart","textBefore","value","slice","textAfter","selectionEnd","textWithTab","removeTab","previousSymbol","textWithoutTab","handleDecorationTag","decorationKey","replace","toLowerCase","LEFT_TAG","RIGHT_TAG","selectedText","hasDecorationTag","startsWith","endsWith","removeDecorationTag","addDecorationTag","decorationTagLength","length","newSelectionStart","newSelectionEnd","textWithTag","textInTagStart","textInTagEnd","textInTag","textWithoutTag","addNewLine","textWithNewLine"],"mappings":";;;;;;;CAAA,MAAMA,GAAG,GAAG,IAAI;CAChB,MAAMC,QAAQ,GAAG,IAAI;CACrB,MAAMC,kBAAkB,GAAG,KAAK;;CAEhC;AACA,OAAaC,QAAQ,GAAG;GACvBC,MAAM,CAACC,QAA6B,EACpC;KACC,MAAMC,oBAAoB,GAAGD,QAAQ,CAACE,cAAc,GAAG,CAAC;KAExD,MAAMC,UAAU,GAAGH,QAAQ,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACE,cAAc,CAAC;KACnE,MAAMI,SAAS,GAAGN,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACO,YAAY,CAAC;KAC7D,MAAMC,WAAW,GAAI,GAAEL,UAAW,GAAER,GAAI,GAAEW,SAAU,EAAC;KAErDN,QAAQ,CAACI,KAAK,GAAGI,WAAW;KAC5BR,QAAQ,CAACE,cAAc,GAAGD,oBAAoB;KAC9CD,QAAQ,CAACO,YAAY,GAAGN,oBAAoB;KAE5C,OAAOO,WAAW;IAClB;GACDC,SAAS,CAACT,QAA6B,EACvC;KACC,MAAMU,cAAc,GAAGV,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACE,cAAc,GAAG,CAAC,EAAEF,QAAQ,CAACE,cAAc,CAAC;KACjG,IAAIQ,cAAc,KAAKf,GAAG,EAC1B;OACC,OAAOK,QAAQ,CAACI,KAAK;;KAGtB,MAAMH,oBAAoB,GAAGD,QAAQ,CAACE,cAAc,GAAG,CAAC;KAExD,MAAMC,UAAU,GAAGH,QAAQ,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACE,cAAc,GAAG,CAAC,CAAC;KACvE,MAAMI,SAAS,GAAGN,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACO,YAAY,CAAC;KAC7D,MAAMI,cAAc,GAAI,GAAER,UAAW,GAAEG,SAAU,EAAC;KAElDN,QAAQ,CAACI,KAAK,GAAGO,cAAc;KAC/BX,QAAQ,CAACE,cAAc,GAAGD,oBAAoB;KAC9CD,QAAQ,CAACO,YAAY,GAAGN,oBAAoB;KAE5C,OAAOU,cAAc;IACrB;GACDC,mBAAmB,CAACZ,QAA6B,EAAEa,aAAgD,EACnG;KACCA,aAAa,GAAGA,aAAa,CAACC,OAAO,CAACjB,kBAAkB,EAAE,EAAE,CAAC,CAACkB,WAAW,EAAE;KAC3E,MAAMC,QAAQ,GAAI,IAAGH,aAAc,GAAE;KACrC,MAAMI,SAAS,GAAI,KAAIJ,aAAc,GAAE;KAEvC,MAAMK,YAAY,GAAGlB,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACE,cAAc,EAAEF,QAAQ,CAACO,YAAY,CAAC;KACzF,IAAI,CAACW,YAAY,EACjB;OACC,OAAOlB,QAAQ,CAACI,KAAK;;KAGtB,MAAMe,gBAAgB,GACrBD,YAAY,CAACH,WAAW,EAAE,CAACK,UAAU,CAACJ,QAAQ,CAAC,IAC5CE,YAAY,CAACH,WAAW,EAAE,CAACM,QAAQ,CAACJ,SAAS,CAChD;KACD,IAAIE,gBAAgB,EACpB;OACC,OAAO,IAAI,CAACG,mBAAmB,CAACtB,QAAQ,EAAEa,aAAa,CAAC;MACxD,MAED;OACC,OAAO,IAAI,CAACU,gBAAgB,CAACvB,QAAQ,EAAEa,aAAa,CAAC;;IAEtD;GACDU,gBAAgB,CAACvB,QAA6B,EAAEa,aAAoC,EACpF;KACC,MAAMG,QAAQ,GAAI,IAAGH,aAAc,GAAE;KACrC,MAAMI,SAAS,GAAI,KAAIJ,aAAc,GAAE;KAEvC,MAAMW,mBAAmB,GAAGR,QAAQ,CAACS,MAAM,GAAGR,SAAS,CAACQ,MAAM;KAC9D,MAAMC,iBAAiB,GAAG1B,QAAQ,CAACE,cAAc;KACjD,MAAMyB,eAAe,GAAG3B,QAAQ,CAACO,YAAY,GAAGiB,mBAAmB;KAEnE,MAAMrB,UAAU,GAAGH,QAAQ,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACE,cAAc,CAAC;KACnE,MAAMgB,YAAY,GAAGlB,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACE,cAAc,EAAEF,QAAQ,CAACO,YAAY,CAAC;KACzF,MAAMD,SAAS,GAAGN,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACO,YAAY,CAAC;KAC7D,MAAMqB,WAAW,GAAI,GAAEzB,UAAW,GAAEa,QAAS,GAAEE,YAAa,GAAED,SAAU,GAAEX,SAAU,EAAC;KAErFN,QAAQ,CAACI,KAAK,GAAGwB,WAAW;KAC5B5B,QAAQ,CAACE,cAAc,GAAGwB,iBAAiB;KAC3C1B,QAAQ,CAACO,YAAY,GAAGoB,eAAe;KAEvC,OAAOC,WAAW;IAClB;GACDN,mBAAmB,CAACtB,QAA6B,EAAEa,aAAoC,EACvF;KACC,MAAMG,QAAQ,GAAI,IAAGH,aAAc,GAAE;KACrC,MAAMI,SAAS,GAAI,KAAIJ,aAAc,GAAE;KAEvC,MAAMW,mBAAmB,GAAGR,QAAQ,CAACS,MAAM,GAAGR,SAAS,CAACQ,MAAM;KAC9D,MAAMC,iBAAiB,GAAG1B,QAAQ,CAACE,cAAc;KACjD,MAAMyB,eAAe,GAAG3B,QAAQ,CAACO,YAAY,GAAGiB,mBAAmB;KAEnE,MAAMrB,UAAU,GAAGH,QAAQ,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACE,cAAc,CAAC;KAEnE,MAAM2B,cAAc,GAAG7B,QAAQ,CAACE,cAAc,GAAGc,QAAQ,CAACS,MAAM;KAChE,MAAMK,YAAY,GAAG9B,QAAQ,CAACO,YAAY,GAAGU,SAAS,CAACQ,MAAM;KAC7D,MAAMM,SAAS,GAAG/B,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACwB,cAAc,EAAEC,YAAY,CAAC;KAEpE,MAAMxB,SAAS,GAAGN,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACO,YAAY,CAAC;KAC7D,MAAMyB,cAAc,GAAI,GAAE7B,UAAW,GAAE4B,SAAU,GAAEzB,SAAU,EAAC;KAE9DN,QAAQ,CAACI,KAAK,GAAG4B,cAAc;KAC/BhC,QAAQ,CAACE,cAAc,GAAGwB,iBAAiB;KAC3C1B,QAAQ,CAACO,YAAY,GAAGoB,eAAe;KAEvC,OAAOK,cAAc;IACrB;GACDC,UAAU,CAACjC,QAA6B,EACxC;KACC,MAAMC,oBAAoB,GAAGD,QAAQ,CAACE,cAAc,GAAG,CAAC;KAExD,MAAMC,UAAU,GAAGH,QAAQ,CAACI,KAAK,CAACC,KAAK,CAAC,CAAC,EAAEL,QAAQ,CAACE,cAAc,CAAC;KACnE,MAAMI,SAAS,GAAGN,QAAQ,CAACI,KAAK,CAACC,KAAK,CAACL,QAAQ,CAACO,YAAY,CAAC;KAC7D,MAAM2B,eAAe,GAAI,GAAE/B,UAAW,GAAEP,QAAS,GAAEU,SAAU,EAAC;KAE9DN,QAAQ,CAACI,KAAK,GAAG8B,eAAe;KAChClC,QAAQ,CAACE,cAAc,GAAGD,oBAAoB;KAC9CD,QAAQ,CAACO,YAAY,GAAGN,oBAAoB;KAE5C,OAAOiC,eAAe;;CAExB,CAAC;;;;;;;;"}