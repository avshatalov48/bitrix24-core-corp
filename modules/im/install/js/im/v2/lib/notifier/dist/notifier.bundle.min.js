this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t,i,a,r,o,l,n,c){"use strict";const b="im-chat";const v="im-notify";const d="button_";const f={first:"1",second:"2"};var p=babelHelpers.classPrivateFieldLooseKey("instance");var u=babelHelpers.classPrivateFieldLooseKey("store");var P=babelHelpers.classPrivateFieldLooseKey("notificationService");var h=babelHelpers.classPrivateFieldLooseKey("prepareNotificationOptions");var L=babelHelpers.classPrivateFieldLooseKey("subscribeToNotifierEvents");var B=babelHelpers.classPrivateFieldLooseKey("onNotifierClick");var y=babelHelpers.classPrivateFieldLooseKey("onNotifierAction");var F=babelHelpers.classPrivateFieldLooseKey("onNotifierQuickAnswer");var H=babelHelpers.classPrivateFieldLooseKey("onNotifierButtonClick");var g=babelHelpers.classPrivateFieldLooseKey("sendButtonAction");var N=babelHelpers.classPrivateFieldLooseKey("isChatMessage");var M=babelHelpers.classPrivateFieldLooseKey("isNotification");var O=babelHelpers.classPrivateFieldLooseKey("isConfirmButtonAction");var I=babelHelpers.classPrivateFieldLooseKey("extractDialogId");var X=babelHelpers.classPrivateFieldLooseKey("extractNotificationId");var j=babelHelpers.classPrivateFieldLooseKey("extractButtonNumber");var K=babelHelpers.classPrivateFieldLooseKey("extractButtonParams");class T{static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,p)[p]){babelHelpers.classPrivateFieldLooseBase(this,p)[p]=new this}return babelHelpers.classPrivateFieldLooseBase(this,p)[p]}static init(){T.getInstance()}constructor(){Object.defineProperty(this,K,{value:$});Object.defineProperty(this,j,{value:W});Object.defineProperty(this,X,{value:Y});Object.defineProperty(this,I,{value:D});Object.defineProperty(this,O,{value:k});Object.defineProperty(this,M,{value:R});Object.defineProperty(this,N,{value:S});Object.defineProperty(this,g,{value:w});Object.defineProperty(this,H,{value:x});Object.defineProperty(this,F,{value:E});Object.defineProperty(this,y,{value:A});Object.defineProperty(this,B,{value:_});Object.defineProperty(this,L,{value:m});Object.defineProperty(this,h,{value:C});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,P,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]=r.Core.getStore();babelHelpers.classPrivateFieldLooseBase(this,P)[P]=new c.NotificationService;babelHelpers.classPrivateFieldLooseBase(this,L)[L]()}showMessage(e,t,i){let a="";if(i){a+=`${i.name}: `}a+=o.Parser.purifyMessage(e);const r={id:`im-chat-${t.dialogId}-${e.id}`,title:t.name,icon:t.avatar||(i==null?void 0:i.avatar),text:a};s.Notifier.notify(r)}showNotification(e,t){let a;if(e.title){a=e.title}else if(t){a=t.name}else{a=i.Loc.getMessage("IM_LIB_NOTIFIER_NOTIFY_SYSTEM_TITLE")}const r=babelHelpers.classPrivateFieldLooseBase(this,h)[h](a,e,t);s.Notifier.notify(r)}}function C(e,s,t){var a;const r={id:`im-notify-${s.id}`,title:e,icon:t?t.avatar:"",text:o.Parser.purifyNotification(s)};if(s.sectionCode===n.NotificationTypesCodes.confirm){const[e,t]=s.notifyButtons;r.button1Text=e.TEXT;r.button2Text=t.TEXT}else if(((a=s.params)==null?void 0:a.CAN_ANSWER)==="Y"){r.inputPlaceholderText=i.Loc.getMessage("IM_LIB_NOTIFIER_NOTIFY_REPLY_PLACEHOLDER")}return r}function m(){s.Notifier.subscribe("click",(e=>{babelHelpers.classPrivateFieldLooseBase(this,B)[B](e.getData())}));s.Notifier.subscribe("action",(e=>{babelHelpers.classPrivateFieldLooseBase(this,y)[y](e.getData())}))}function _(e){const{id:s}=e;if(babelHelpers.classPrivateFieldLooseBase(this,N)[N](s)){const e=babelHelpers.classPrivateFieldLooseBase(this,I)[I](s);l.Messenger.openChat(e)}else if(babelHelpers.classPrivateFieldLooseBase(this,M)[M](s)){l.Messenger.openNotifications()}}function A(e){const{id:s,action:t,userInput:i}=e;if(!babelHelpers.classPrivateFieldLooseBase(this,M)[M](s)){return}const a=babelHelpers.classPrivateFieldLooseBase(this,X)[X](s);const r=babelHelpers.classPrivateFieldLooseBase(this,u)[u].getters["notifications/getById"](a);if(i){babelHelpers.classPrivateFieldLooseBase(this,F)[F](r,i)}else if(babelHelpers.classPrivateFieldLooseBase(this,O)[O](t,r)){babelHelpers.classPrivateFieldLooseBase(this,H)[H](t,r)}}function E(e,s){babelHelpers.classPrivateFieldLooseBase(this,P)[P].sendQuickAnswer({id:e.id,text:s})}function x(e,s){const[t,i]=s.notifyButtons;const a=babelHelpers.classPrivateFieldLooseBase(this,j)[j](e);if(a===f.first){babelHelpers.classPrivateFieldLooseBase(this,g)[g](s,t)}else if(a===f.second){babelHelpers.classPrivateFieldLooseBase(this,g)[g](s,i)}}function w(e,s){const[t,i]=babelHelpers.classPrivateFieldLooseBase(this,K)[K](s);babelHelpers.classPrivateFieldLooseBase(this,P)[P].sendConfirmAction(t,i)}function S(e){return e.startsWith(b)}function R(e){return e.startsWith(v)}function k(e,s){const t=s.sectionCode;return e.startsWith(d)&&t===n.NotificationTypesCodes.confirm}function D(e){return e.split("-")[2]}function Y(e){return e.split("-")[2]}function W(e){return e.split("_")[1]}function $(e){return e.COMMAND_PARAMS.split("|")}Object.defineProperty(T,p,{writable:true,value:void 0});e.NotifierManager=T})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.UI.NotificationManager,BX.Vue3.Vuex,BX,BX.Event,BX.Messenger.v2.Application,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Messenger.v2.Provider.Service);
//# sourceMappingURL=notifier.bundle.map.js