{"version":3,"file":"message-manager.bundle.js","sources":["../src/message-manager.js"],"sourcesContent":["import { MessageComponent } from 'im.v2.const';\nimport { OpenLinesMessageComponent, FormType } from 'imopenlines.v2.const';\n\nimport type { ImModelMessage } from 'im.v2.model';\n\ntype MessageComponentValues = $Values<typeof OpenLinesMessageComponent> | $Values<typeof MessageComponent>;\n\nconst OpenLinesComponentList = new Set([\n\tOpenLinesMessageComponent.StartDialogMessage,\n\tOpenLinesMessageComponent.HiddenMessage,\n\tOpenLinesMessageComponent.FeedbackFormMessage,\n\tOpenLinesMessageComponent.ImOpenLinesForm,\n\tOpenLinesMessageComponent.ImOpenLinesMessage,\n]);\n\nconst componentForReplace = new Set([\n\tOpenLinesMessageComponent.ImOpenLinesForm,\n\tOpenLinesMessageComponent.ImOpenLinesMessage,\n]);\n\nexport class OpenLinesMessageManager\n{\n\t#message: ImModelMessage & {\n\t\tcomponentParams: {\n\t\t\timolForm: $Values<typeof FormType>\n\t\t};\n\t};\n\n\tconstructor(message: ImModelMessage)\n\t{\n\t\tthis.#message = message;\n\t}\n\n\tcheckComponentInOpenLinesList(): boolean\n\t{\n\t\treturn OpenLinesComponentList.has(this.#message.componentId);\n\t}\n\n\tgetMessageComponent(): MessageComponentValues\n\t{\n\t\tif (componentForReplace.has(this.#message.componentId))\n\t\t{\n\t\t\treturn this.#getUpdatedComponentId();\n\t\t}\n\n\t\treturn this.#message.componentId;\n\t}\n\n\t#getUpdatedComponentId(): MessageComponentValues\n\t{\n\t\tif (this.#message.componentParams.imolForm === FormType.like)\n\t\t{\n\t\t\treturn OpenLinesMessageComponent.FeedbackFormMessage;\n\t\t}\n\n\t\treturn MessageComponent.system;\n\t}\n}\n"],"names":["OpenLinesComponentList","Set","OpenLinesMessageComponent","StartDialogMessage","HiddenMessage","FeedbackFormMessage","ImOpenLinesForm","ImOpenLinesMessage","componentForReplace","OpenLinesMessageManager","constructor","message","checkComponentInOpenLinesList","has","componentId","getMessageComponent","componentParams","imolForm","FormType","like","MessageComponent","system"],"mappings":";;;;;;;CAOA,MAAMA,sBAAsB,GAAG,IAAIC,GAAG,CAAC,CACtCC,8CAAyB,CAACC,kBAAkB,EAC5CD,8CAAyB,CAACE,aAAa,EACvCF,8CAAyB,CAACG,mBAAmB,EAC7CH,8CAAyB,CAACI,eAAe,EACzCJ,8CAAyB,CAACK,kBAAkB,CAC5C,CAAC;CAEF,MAAMC,mBAAmB,GAAG,IAAIP,GAAG,CAAC,CACnCC,8CAAyB,CAACI,eAAe,EACzCJ,8CAAyB,CAACK,kBAAkB,CAC5C,CAAC;CAAC;CAAA;AAEH,CAAO,MAAME,uBAAuB,CACpC;GAOCC,WAAW,CAACC,OAAuB,EACnC;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,wBAAYA,OAAO;;GAGxBC,6BAA6B,GAC7B;KACC,OAAOZ,sBAAsB,CAACa,GAAG,CAAC,4CAAI,sBAAUC,WAAW,CAAC;;GAG7DC,mBAAmB,GACnB;KACC,IAAIP,mBAAmB,CAACK,GAAG,CAAC,4CAAI,sBAAUC,WAAW,CAAC,EACtD;OACC,+CAAO,IAAI;;KAGZ,OAAO,4CAAI,sBAAUA,WAAW;;CAYlC;CAAC,mCARA;GACC,IAAI,4CAAI,sBAAUE,eAAe,CAACC,QAAQ,KAAKC,6BAAQ,CAACC,IAAI,EAC5D;KACC,OAAOjB,8CAAyB,CAACG,mBAAmB;;GAGrD,OAAOe,4BAAgB,CAACC,MAAM;CAC/B;;;;;;;;"}