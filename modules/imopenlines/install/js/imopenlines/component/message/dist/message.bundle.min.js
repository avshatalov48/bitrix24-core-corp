(function(e,t,i){"use strict";function s(e){var t=[];for(var i in e){if(e.hasOwnProperty(i)){t.push(e[i])}}return t}var r=Object.freeze({none:"none",like:"like",dislike:"dislike"});var o=Object.freeze({russian:"ru",ukraine:"ua",world:"en"});var n=Object.freeze({none:"none",like:"like",smile:"smile",consent:"consent",welcome:"welcome",offline:"offline",history:"history"});var a=Object.freeze({topLeft:1,topMiddle:2,topBottom:3,bottomLeft:6,bottomMiddle:5,bottomRight:4});var l=Object.freeze({1:"top-left",2:"top-center",3:"top-right",6:"bottom-left",5:"bottom-center",4:"bottom-right"});var m=Object.freeze({configLoaded:"configLoaded",widgetOpen:"widgetOpen",widgetClose:"widgetClose",sessionStart:"sessionStart",sessionOperatorChange:"sessionOperatorChange",sessionFinish:"sessionFinish",operatorMessage:"operatorMessage",userForm:"userForm",userMessage:"userMessage",userFile:"userFile",userVote:"userVote",every:"every"});var g=s(m);var d=Object.freeze({widgetUserRegister:"imopenlines.widget.user.register",widgetConfigGet:"imopenlines.widget.config.get",widgetDialogGet:"imopenlines.widget.dialog.get",widgetUserGet:"imopenlines.widget.user.get",widgetUserConsentApply:"imopenlines.widget.user.consent.apply",widgetVoteSend:"imopenlines.widget.vote.send",widgetFormSend:"imopenlines.widget.form.send",widgetActionSend:"imopenlines.widget.action.send",pullServerTime:"server.time",pullConfigGet:"pull.config.get"});var u=s(d);var f=Object.freeze({guest:"guest"});var p=Object.freeze({new:0,skip:5,answer:10,client:20,clientAfterOperator:25,operator:40,waitClient:50,close:60,spam:65,duplicate:69,silentlyClose:75});var w=Object.freeze({requestShowForm:"IMOL.Widget:requestShowForm"});var c=Object.freeze({none:"none",like:"like",welcome:"welcome",offline:"offline",history:"history"});var h=Object.freeze({none:"none",like:"like",dislike:"dislike"});BX.Vue.cloneComponent("bx-imopenlines-message","bx-im-view-message",{methods:{checkFormShow:function e(){if(!this.message.params||!this.message.params.IMOL_FORM){return true}if(this.message.params.IMOL_FORM==="welcome"){if(!this.widget.dialog.sessionClose&&!this.widget.user.name&&!this.widget.user.lastName&&!this.widget.user.email&&!this.widget.user.phone){i.EventEmitter.emit(w.requestShowForm,{type:c.welcome,delayed:true})}}else if(this.message.params.IMOL_FORM==="offline"){if(!this.widget.dialog.sessionClose&&!this.widget.user.email){i.EventEmitter.emit(w.requestShowForm,{type:c.offline,delayed:true})}}else if(this.message.params.IMOL_FORM==="history-delay"){if(parseInt(this.message.params.IMOL_VOTE)===this.widget.dialog.sessionId&&this.widget.dialog.userVote===h.none){i.EventEmitter.emit(w.requestShowForm,{type:c.like,delayed:true})}}}},created:function e(){this.checkFormShow()},computed:babelHelpers.objectSpread({dialogNumber:function e(){if(!this.message.params){return false}if(!this.message.params.IMOL_SID){return false}return this.$Bitrix.Loc.getMessage("IMOL_MESSAGE_DIALOG_ID").replace("#ID#",this.message.params.IMOL_SID)},showMessage:function e(){if(!this.message.params){return true}if(this.message.params.IMOL_FORM&&this.message.params.IMOL_FORM==="history-delay"){return false}return true}},BX.Vuex.mapState({widget:function e(t){return t.widget}})),template:'\n\t\t<div v-if="showMessage" class="bx-imopenlines-message">\n\t\t\t<div v-if="dialogNumber" class="bx-imopenlines-message-dialog-number">{{dialogNumber}}</div>\n\t\t\t#PARENT_TEMPLATE#\n\t\t</div>\n\t'})})(this.window=this.window||{},window,BX.Event);
//# sourceMappingURL=message.bundle.map.js