this.BX=this.BX||{};(function(t,e,s,i){"use strict";class r extends s.CounterPanel{constructor(t){super({target:t.countersWrap,items:r.getCountersValue(t.counters),multiselect:false});this.search=t.search;this.userId=t.userId;this.counters=t.counters;this.countersWrap=t.countersWrap;this.bindEvents()}bindEvents(){i.EventEmitter.subscribe("BX.UI.CounterPanel.Item:activate",this.onActivateItem.bind(this));i.EventEmitter.subscribe("BX.UI.CounterPanel.Item:deactivate",this.onDeactivateItem.bind(this));i.EventEmitter.subscribe("BX.Main.Filter:apply",this.onFilterApply.bind(this))}onActivateItem(t){const e=t.getData();if(e.id==="invitation"){this.search.setPresetInvitation()}}onDeactivateItem(t){this.search.resetPreset()}recalculateCounters(){Object.entries(this.counters).forEach((([t,e])=>{const s=this.getItemById(t);s.updateValue(e.value);s.updateColor(e.color)}))}markCounters(){Object.entries(this.counters).forEach((([t,e])=>{const s=this.getItemById(t);if(s.id==="invitation"){this.fields["MEETING_STATUS"]==="Q"?s.activate(false):s.deactivate(false)}}))}setCountersValue(t){this.counters=t;this.recalculateCounters()}onFilterApply(){this.fields=this.search.filter.getFilterFieldsValues();this.markCounters()}static getCountersValue(t){return Object.entries(t).map((([t,e])=>({id:t,title:r.getCountersName(t),value:e.value,color:e.color})))}static getCountersName(t){if(t==="invitation"){return e.Loc.getMessage("EC_COUNTER_INVITATION")}}}t.Counters=r})(this.BX.Calendar=this.BX.Calendar||{},BX,BX.UI,BX.Event);
//# sourceMappingURL=counters.bundle.map.js