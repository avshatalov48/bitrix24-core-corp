{"version":3,"file":"sectioninterface.bundle.js","sources":["../src/editform.js","../src/trackingusersform.js","../src/trackinggroupsform.js","../src/trackingtypesform.js","../src/sectioninterface.js"],"sourcesContent":["import { Runtime, Dom, Event, Loc, Text, Type, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {EventEmitter} from 'main.core.events';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\n\n\nexport class EditForm extends EventEmitter\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface.EditForm');\n\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.sectionAccessTasks = options.sectionAccessTasks;\n\t\tthis.sectionManager = options.sectionManager;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.section = params.section;\n\t\tthis.create();\n\t\tthis.showAccess = params.showAccess !== false;\n\t\tthis.allowChangeName = params.allowChangeName !== false;\n\t\tif (this.showAccess)\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = '';\n\t\t\tthis.DOM.accessWrap.style.display = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = 'none';\n\t\t\tthis.DOM.accessWrap.style.display = 'none';\n\t\t}\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tif (params.section)\n\t\t{\n\t\t\tif (params.section.color)\n\t\t\t{\n\t\t\t\tthis.setColor(params.section.color);\n\t\t\t}\n\n\t\t\tthis.setAccess(params.section.access || params.section.data.ACCESS || {});\n\n\t\t\tif (params.section.name)\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.value = params.section.name;\n\t\t\t}\n\t\t}\n\n\t\tif (this.allowChangeName)\n\t\t{\n\t\t\tBX.focus(this.DOM.sectionTitleInput);\n\t\t\tif (this.DOM.sectionTitleInput.value !== '')\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.select();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.sectionTitleInput, '--disabled');\n\t\t\tthis.DOM.sectionTitleInput.disabled = true;\n\t\t}\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tthis.isOpenedState = false;\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tthis.wrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\n\t\tif (this.wrap)\n\t\t{\n\t\t\tDom.clean(this.wrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.wrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-form-content'}}));\n\t\t}\n\n\t\tthis.DOM.formFieldsWrap = this.wrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(\n\t\t\t\tDom.create(\n\t\t\t\t\t'DIV',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content-block'}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t// Title\n\t\tthis.DOM.sectionTitleInput = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-container calendar-field-container-string'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}))\n\t\t\t.appendChild(Dom.create('INPUT', {\n\t\t\t\tattrs: {type: 'text', placeholder: Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')},\n\t\t\t\tprops: {className: 'calendar-field calendar-field-string'}\n\t\t\t}));\n\n\t\tthis.DOM.optionsWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-new-calendar-options-container'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.initSectionColorSelector();\n\n\t\tthis.initAccessController();\n\n\t\t// Buttons\n\t\tthis.buttonsWrap = this.DOM.formFieldsWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-btn-container'}}));\n\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: {click: this.save.bind(this)}\n\t\t});\n\t\tthis.saveBtn.renderTo(this.buttonsWrap);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {click: this.checkClose.bind(this)}\n\t\t}).renderTo(this.buttonsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckClose()\n\t{\n\t\tthis.close();\n\t}\n\n\tsave()\n\t{\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.sectionManager.saveSection(\n\t\t\tthis.DOM.sectionTitleInput.value,\n\t\t\tthis.color,\n\t\t\tthis.access,\n\t\t\t{section: this.section}\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tinitSectionColorSelector()\n\t{\n\t\tthis.DOM.colorContWrap = this.DOM.optionsWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_COLOR')\n\t\t}));\n\t\tthis.colorIcon = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-selected' }\n\t\t}));\n\t\tthis.colorChangeLink = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-change' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_CHANGE')\n\t\t}));\n\t\t\n\t\tEvent.bind(this.colorIcon, 'click', this.showSimplePicker.bind(this));\n\t\tEvent.bind(this.colorChangeLink, 'click', this.showSimplePicker.bind(this));\n\t}\n\n\tshowSimplePicker(value)\n\t{\n\t\tconst colors = Runtime.clone(Util.getDefaultColorList(), true);\n\t\tconst innerCont = Dom.create(\n\t\t\t'DIV',\n\t\t\t{\n\t\t\t\tprops: {className: 'calendar-simple-color-wrap calendar-field-container-colorpicker-square'}\n\t\t\t}\n\t\t);\n\t\tconst colorWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\t\tevents: {click: BX.delegate(this.simplePickerClick, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLinkWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link-wrap'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLink = moreLinkWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'SPAN',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link'},\n\t\t\t\t\thtml: Loc.getMessage('EC_COLOR'),\n\t\t\t\t\tevents: {click: BX.delegate(this.showFullPicker, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.simplePickerColorWrap = colorWrap;\n\t\tthis.colors = [];\n\n\t\tif (!colors.includes(this.color))\n\t\t{\n\t\t\tcolors.push(this.color);\n\t\t}\n\n\t\tfor (let i = 0; i < colors.length; i++)\n\t\t{\n\t\t\tthis.colors.push({\n\t\t\t\tcolor: colors[i],\n\t\t\t\tnode: colorWrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tstyle: {backgroundColor: colors[i]},\n\t\t\t\t\tattrs: {'data-bx-calendar-color': colors[i]},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}))\n\t\t\t});\n\t\t}\n\n\t\tthis.lastActiveNode = this.colors[BX.util.array_search(this.color, colors) || 0].node;\n\t\tDom.addClass(this.lastActiveNode, 'active');\n\n\t\tthis.simpleColorPopup = BX.PopupWindowManager.create(\n\t\t\t\"simple-color-popup-\" + Util.getRandomInt(),\n\t\t\tthis.colorIcon,\n\t\t\t{\n\t\t\t\t//zIndex: this.zIndex,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: innerCont,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.simpleColorPopup.setAngle({offset: 10});\n\t\tthis.simpleColorPopup.show(true);\n\t}\n\n\tsimplePickerClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tconst value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tif (this.lastActiveNode)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.lastActiveNode, 'active');\n\t\t\t\t}\n\n\t\t\t\tDom.addClass(target, 'active');\n\t\t\t\tthis.lastActiveNode = target;\n\t\t\t\tthis.setColor(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFullPicker()\n\t{\n\t\tif (this.simpleColorPopup)\n\t\t{\n\t\t\tthis.simpleColorPopup.close();\n\t\t}\n\n\t\tif (!this.fullColorPicker || this.fullColorPicker.getPopupWindow()?.isDestroyed())\n\t\t{\n\t\t\tthis.fullColorPicker = new BX.ColorPicker({\n\t\t\t\tbindElement: this.colorIcon,\n\t\t\t\tonColorSelected: BX.delegate(function(color){\n\t\t\t\t\tthis.setColor(color);\n\t\t\t\t}, this),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupClose:BX.delegate(function(){\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.fullColorPicker.open();\n\t}\n\n\tsetColor(value)\n\t{\n\t\tthis.colorIcon.style.backgroundColor = value;\n\t\tthis.color = value;\n\t}\n\n\tsetAccess(value)\n\t{\n\t\tlet rowsCount = 0;\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\trowsCount++;\n\t\t\t}\n\t\t}\n\t\tthis.accessRowsCount = rowsCount;\n\t\tthis.access = value;\n\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tthis.insertAccessRow(Util.getAccessName(code), code, value[code]);\n\t\t\t}\n\t\t}\n\t\tthis.checkAccessTableHeight();\n\t}\n\n\tinitAccessController()\n\t{\n\t\tthis.buildAccessController();\n\t\tif (this.sectionManager && this.sectionManager.calendarType === 'group')\n\t\t{\n\t\t\tthis.initDialogGroup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initDialogStandard();\n\t\t}\n\t\tthis.initAccessSelectorPopup();\n\t}\n\n\tinitAccessSelectorPopup()\n\t{\n\t\tEvent.bind(this.DOM.accessWrap, 'click', (e) => {\n\t\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\t\tif (Type.isElementNode(target))\n\t\t\t{\n\t\t\t\tif (target.getAttribute('data-bx-calendar-access-selector') !== null)\n\t\t\t\t{\n\t\t\t\t\t// show selector\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-selector');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAccessSelectorPopup({\n\t\t\t\t\t\t\t\tnode: this.accessControls[code].removeIcon,\n\t\t\t\t\t\t\t\tsetValueCallback: (value) => {\n\t\t\t\t\t\t\t\t\tif (this.accessTasks[value] && this.accessControls[code])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.accessControls[code].valueNode.innerHTML =\n\t\t\t\t\t\t\t\t\t\t\tText.encode(this.accessTasks[value].title);\n\t\t\t\t\t\t\t\t\t\tthis.access[code] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target.getAttribute('data-bx-calendar-access-remove') !== null)\n\t\t\t\t{\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-remove');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.accessControls[code].rowNode);\n\t\t\t\t\t\tthis.accessControls[code] = null;\n\t\t\t\t\t\tdelete this.access[code];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tbuildAccessController()\n\t{\n\t\tthis.DOM.accessLink = this.DOM.optionsWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-new-calendar-option-more\">${Loc.getMessage('EC_SEC_SLIDER_ACCESS')}</div>`,\n\t\t);\n\n\t\tthis.DOM.accessWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-access-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-access-inner-wrap\">\n\t\t\t\t\t\t${this.DOM.accessTable = Tag.render`\n\t\t\t\t\t\t\t<table class=\"calendar-section-slider-access-table\"></table>\n\t\t\t\t\t\t`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-list-slider-new-calendar-options-container\">\n\t\t\t\t\t\t${this.DOM.accessButton = Tag.render`\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-new-calendar-option-add\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ACCESS_ADD')}\n\t\t\t\t\t\t\t</span>`\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`,\n\t\t);\n\n\t\tthis.accessControls = {};\n\t\tthis.accessTasks = this.sectionAccessTasks;\n\n\t\tEvent.bind(this.DOM.accessLink, 'click', () => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\tthis.checkAccessTableHeight();\n\t\t});\n\t}\n\n\tinitDialogStandard()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\tinitDialogGroup()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttabs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'groupAccess',\n\t\t\t\t\t\ttitle: this.sectionManager.ownerName,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'A',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_ADMIN'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'E',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MODERATORS'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'K',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MEMBERS'),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\thandleEntitySelectorChanges()\n\t{\n\t\tconst entityList = this.entitySelectorDialog.getSelectedItems();\n\t\tthis.entitySelectorDialog.hide();\n\t\tif (Type.isArray(entityList))\n\t\t{\n\t\t\tentityList.forEach((entity) => {\n\t\t\t\tlet title;\n\t\t\t\tif (entity.entityId === 'group')\n\t\t\t\t{\n\t\t\t\t\ttitle = this.sectionManager.ownerName + ': ' + entity.title.text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = entity.title.text;\n\t\t\t\t}\n\t\t\t\tconst code = Util.convertEntityToAccessCode(entity);\n\t\t\t\tUtil.setAccessName(code, title);\n\t\t\t\tthis.insertAccessRow(title, code);\n\t\t\t});\n\t\t}\n\n\t\tRuntime.debounce(() => {\n\t\t\tthis.entitySelectorDialog.destroy();\n\t\t}, 400)();\n\t}\n\n\t// todo: refactor it\n\tinsertAccessRow(title, code, value)\n\t{\n\t\tif (!this.accessControls[code])\n\t\t{\n\t\t\tif (value === undefined)\n\t\t\t{\n\t\t\t\tfor(let taskId in this.sectionAccessTasks)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.sectionAccessTasks.hasOwnProperty(taskId)\n\t\t\t\t\t\t&& this.sectionAccessTasks[taskId].name === 'calendar_view'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = taskId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst\n\t\t\t\trowNode = Dom.adjust(this.DOM.accessTable.insertRow(-1), {props : {className: 'calendar-section-slider-access-table-row'}}),\n\t\t\t\ttitleNode = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\thtml: '<span class=\"calendar-section-slider-access-title\">' + Text.encode(title) + ':</span>'}),\n\t\t\t\tvalueCell = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-selector': code}\n\t\t\t\t}),\n\t\t\t\tselectNode = valueCell.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-container'}\n\t\t\t\t})),\n\t\t\t\tvalueNode = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\ttext: this.accessTasks[value] ? this.accessTasks[value].title : '',\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-value'}\n\t\t\t\t})),\n\t\t\t\tremoveIcon = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-remove'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-remove': code}\n\t\t\t\t}));\n\n\t\t\tthis.access[code] = value;\n\n\t\t\tthis.accessControls[code] = {\n\t\t\t\trowNode: rowNode,\n\t\t\t\ttitleNode: titleNode,\n\t\t\t\tvalueNode: valueNode,\n\t\t\t\tremoveIcon: removeIcon\n\t\t\t};\n\t\t}\n\t}\n\n\tcheckAccessTableHeight()\n\t{\n\t\tif (this.checkTableTimeout)\n\t\t{\n\t\t\tthis.checkTableTimeout = clearTimeout(this.checkTableTimeout);\n\t\t}\n\n\t\tthis.checkTableTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tif (this.DOM.accessWrap.offsetHeight - this.DOM.accessTable.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.accessWrap.style.maxHeight = parseInt(this.DOM.accessTable.offsetHeight) + 100 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.accessWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tshowAccessSelectorPopup(params)\n\t{\n\t\tif (\n\t\t\tthis.accessPopupMenu\n\t\t\t&& this.accessPopupMenu.popupWindow\n\t\t\t&& this.accessPopupMenu.popupWindow.isShown()\n\t\t)\n\t\t{\n\t\t\treturn this.accessPopupMenu.close();\n\t\t}\n\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tfor(let taskId in this.accessTasks)\n\t\t{\n\t\t\tif (this.accessTasks.hasOwnProperty(taskId))\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.accessTasks[taskId].title,\n\t\t\t\t\t\tonclick: (function (value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.setValueCallback(value);\n\t\t\t\t\t\t\t\t_this.accessPopupMenu.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(taskId)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.accessPopupMenu = this.BX.PopupMenu.create(\n\t\t\t'section-access-popup' + Util.randomInt(),\n\t\t\tparams.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\toffsetTop: -5,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.accessPopupMenu.show();\n\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Runtime, Dom, Event, Loc, Type, Tag, Text} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Util } from 'calendar.util';\nimport { Dialog, TagSelector } from 'ui.entity-selector';\n\nexport class TrackingUsersForm\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.interfaceType = 'users';\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.trackingUsers = options.trackingUsers || [];\n\t\tthis.trackingUserIdList = this.trackingUsers.map((item) => {\n\t\t\treturn parseInt(item.ID)\n\t\t});\n\t\tthis.trackingGroupIdList = [];\n\n\t\tthis.CHECKED_CLASS = 'calendar-list-slider-item-checkbox-checked';\n\t\tthis.selectorId = 'add-tracking' + Util.getRandomInt();\n\t\tthis.closeCallback = options.closeCallback;\n\n\t\tthis.superposedSections = Type.isArray(options.superposedSections) ? options.superposedSections : [];\n\t\tthis.selected = {};\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tthis.selected[section.id] = true;\n\t\t}, this);\n\n\t\tthis.isCreated = false;\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t\tthis.checkInnerWrapHeight();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.updateSectionList();\n\n\t\tthis.firstTrackingUserIdList = Runtime.clone(this.trackingUserIdList);\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.isOpenedState = false;\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\t\tthis.DOM.outerWrap.style.cssText = '';\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } })\n\t\t);\n\n\t\tthis.userTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 320,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingUsers.map((item) => {\n\t\t\t\t\treturn ['user', parseInt(item.ID)]\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tcreateButtons()\n\t{\n\t\tthis.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-btn-container\">\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary\"\n\t\t\t\t\tonclick=\"${this.save.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_SAVE')}</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\tonclick=\"${this.close.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_CANCEL')}</button>\n\t\t\t</div>`\n\t\t);\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingUserIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'user')\n\t\t\t{\n\t\t\t\tthis.trackingUserIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\tsections: this.prepareTrackingSections(),\n\t\t\t\t\ttype: this.interfaceType\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n\n\tprepareTrackingSections()\n\t{\n\t\tlet sections = this.getSelectedSections();\n\n\t\tfor (let id in this.sectionIndex)\n\t\t{\n\t\t\tif (this.sectionIndex.hasOwnProperty(id) && this.sectionIndex[id].checkbox)\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t{\n\t\t\t\t\tif (!sections.includes(parseInt(id)))\n\t\t\t\t\t{\n\t\t\t\t\t\tsections.push(parseInt(id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (sections.includes(parseInt(id)))\n\t\t\t\t{\n\t\t\t\t\tsections = sections.filter((section) => {return parseInt(section) !== parseInt(id)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sections;\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tif (\n\t\t\t\tthis.interfaceType === 'users'\n\t\t\t\t&& section.type === 'user'\n\t\t\t\t&& this.trackingUserIdList\n\t\t\t\t&& !this.trackingUserIdList.includes(section.ownerId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsections.push(parseInt(section.id));\n\n\t\t}, this);\n\n\t\treturn sections;\n\t}\n\n\tupdateSectionList(delayExecution)\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tif (delayExecution !== false)\n\t\t{\n\t\t\tthis.updateSectionTimeout = setTimeout(() => {\n\t\t\t\tthis.updateSectionList(false);\n\t\t\t}, 300);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\ttype: 'users'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Users calendars\n\t\t\t\t\tresponse.data.users.forEach((user) => {\n\t\t\t\t\t\tconst sections = response.data.sections.filter(function(section)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn parseInt(section.OWNER_ID) === parseInt(user.ID);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t${Text.encode(user.FORMATTED_NAME)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`);\n\n\t\t\t\t\t\tif (sections.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\t\tsectionList: sections,\n\t\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tcreateSectionBlock(params = {})\n\t{\n\t\tlet result = false;\n\t\tif (Type.isArray(params.sectionList) && params.sectionList.length\n\t\t\t&& Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tlet listWrap;\n\t\t\tparams.wrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t${listWrap = Tag.render`<ul class=\"calendar-list-slider-container\"></ul>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tEvent.bind(listWrap, 'click', this.sectionClick.bind(this));\n\n\t\t\tparams.sectionList.forEach((section) => {\n\t\t\t\tconst id = section.ID.toString();\n\t\t\t\tlet checkbox;\n\n\t\t\t\tconst li = listWrap.appendChild(Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${id}\">\n\t\t\t\t\t\t${checkbox = Tag.render`\n\t\t\t\t\t\t\t<div class=\"calendar-list-slider-item-checkbox\" style=\"background: ${section.COLOR}\"></div>\n\t\t\t\t\t\t`}\n\t\t\t\t\t\t<div class=\"calendar-list-slider-item-name\">${Text.encode(section.NAME)}</div>\n\t\t\t\t\t</li>\n\t\t\t\t`);\n\n\t\t\t\tthis.sectionIndex[id] = {\n\t\t\t\t\titem: li,\n\t\t\t\t\tcheckbox: checkbox\n\t\t\t\t};\n\n\t\t\t\tif (\n\t\t\t\t\tthis.selected[id]\n\t\t\t\t\t|| !Type.isArray(this.firstTrackingUserIdList)\n\t\t\t\t\t|| !this.firstTrackingUserIdList.includes(parseInt(section.OWNER_ID))\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(checkbox, this.CHECKED_CLASS);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsectionClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tif(target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tconst id = target.getAttribute('data-bx-calendar-section');\n\t\t\t\tif (this.sectionIndex[id] && this.sectionIndex[id].checkbox)\n\t\t\t\t{\n\t\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckInnerWrapHeight()\n\t{\n\t\tif (this.checkHeightTimeout)\n\t\t{\n\t\t\tthis.checkHeightTimeout = clearTimeout(this.checkHeightTimeout);\n\t\t}\n\n\t\tthis.checkHeightTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.outerWrap, 'show'))\n\t\t\t{\n\t\t\t\tif (this.DOM.outerWrap.offsetHeight - this.DOM.innerWrap.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.outerWrap.style.maxHeight = parseInt(this.DOM.innerWrap.offsetHeight) + 200 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.outerWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { TagSelector } from 'ui.entity-selector';\nimport { TrackingUsersForm } from \"./trackingusersform\"\n\nexport class TrackingGroupsForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.interfaceType = 'groups';\n\t\tthis.trackingGroupIdList = options.trackingGroups || [];\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } })\n\t\t);\n\n\t\tthis.groupTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 320,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingGroupIdList.map((id) => {\n\t\t\t\t\treturn ['project', id];\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.groupTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\thandleGroupSelectorChanges()\n\t{\n\t\tconst selectedItems = this.groupTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingGroupIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'project')\n\t\t\t{\n\t\t\t\tthis.trackingGroupIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tgroupIdList: this.trackingGroupIdList,\n\t\t\t\t\ttype: 'groups'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Groups calendars\n\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tif (\n\t\t\t\tthis.interfaceType === 'groups'\n\t\t\t\t&& section.type === 'group'\n\t\t\t\t&& this.trackingGroupIdList\n\t\t\t\t&& !this.trackingGroupIdList.includes(section.ownerId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsections.push(parseInt(section.id));\n\t\t}, this);\n\n\t\treturn sections;\n\t}\n}","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {TrackingUsersForm} from \"./trackingusersform\"\n\nexport class TrackingTypesForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.trackingGroups = options.trackingGroups || [];\n\t\tthis.interfaceType = 'company';\n\t\tthis.selectGroups = true;\n\t\tthis.selectUsers = false;\n\t\tthis.addLinkMessage = Loc.getMessage('EC_SEC_SLIDER_SELECT_GROUPS');\n\t}\n\n\tshow ()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tthis.updateSectionList();\n\t\tthis.isOpenedState = true;\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'company'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\tif (Type.isArray(response.data.sections)\n\t\t\t\t\t\t&& response.data.sections.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.checkInnerWrapHeight();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tsections: this.prepareTrackingSections(),\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tsections.push(parseInt(section.id));\n\t\t}, this);\n\n\t\treturn sections;\n\t}\n}\n\n\n\n\n\n\n\n\n","// @flow\nimport { Util } from 'calendar.util';\nimport { IcalSyncPopup } from 'calendar.sync.interface';\nimport { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { MenuItem } from 'main.popup';\nimport { EditForm } from './editform';\nimport { TrackingUsersForm } from './trackingusersform';\nimport { TrackingGroupsForm } from './trackinggroupsform';\nimport { TrackingTypesForm } from './trackingtypesform';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport class SectionInterface extends EventEmitter\n{\n\tname = 'sectioninterface';\n\tuid = null;\n\tDOM = {};\n\tSLIDER_WIDTH = 400;\n\tSLIDER_DURATION = 80;\n\tsliderId = \"calendar:section-slider\";\n\tdenyClose = false;\n\tdeletedSectionsIds = [];\n\n\tconstructor({calendarContext, readonly, sectionManager})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface');\n\t\tthis.sectionManager = sectionManager;\n\t\tthis.calendarContext = calendarContext;\n\t\tthis.readonly = readonly;\n\t\tthis.BX = Util.getBX();\n\t\tthis.deleteSectionHandlerBinded = this.deleteSectionHandler.bind(this);\n\t\tthis.refreshSectionListBinded = this.refreshSectionList.bind(this);\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\n\t\tif(this.calendarContext !== null)\n\t\t{\n\t\t\tif (this.calendarContext.util.config.accessNames)\n\t\t\t{\n\t\t\t\tUtil.setAccessNames(this.calendarContext?.util?.config?.accessNames);\n\t\t\t}\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tanimationDuration: this.SLIDER_DURATION,\n\t\t\tevents: {\n\t\t\t\tonCloseByEsc: this.escHide.bind(this),\n\t\t\t\tonClose: this.hide.bind(this),\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.addEventEmitterSubscriptions();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t}\n\n\taddEventEmitterSubscriptions()\n\t{\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-reload-data',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t}\n\n\tdestroyEventEmitterSubscriptions()\n\t{\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-reload-data',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t}\n\n\tescHide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId && this.denyClose)\n\t\t{\n\t\t\tevent.denyAction();\n\t\t}\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.closeForms();\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\t}\n\t}\n\n\tclose()\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:delete', this.deleteSectionHandlerBinded);\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:pull-delete', this.deleteSectionHandlerBinded);\n\n\t\t\tBX.removeCustomEvent(\"SidePanel.Slider:onCloseComplete\", BX.proxy(this.destroy, this));\n\t\t\tBX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tdelete this.DOM.localSectionListWrap;\n\n\t\t\tthis.deletedSectionsIds = [];\n\n\t\t\tif (this.sectionActionMenu)\n\t\t\t{\n\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t}\n\t\t\tif (this.trackingTypesForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingTypesForm;\n\t\t\t}\n\t\t\tif (this.trackingUsersForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingUsersForm;\n\t\t\t}\n\t\t\tif (this.trackingGroupsForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingGroupsForm;\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateContent()\n\t{\n\t\tthis.DOM.outerWrap = Tag.render`\n\t\t\t<div class=\"calendar-list-slider-wrap\"></div>\n\t\t`;\n\t\tthis.DOM.titleWrap = this.DOM.outerWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-title-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-title\"> \n\t\t\t\t\t\t${Loc.getMessage('EC_SECTION_BUTTON')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`\n\t\t);\n\t\tconst calendarContext = this.calendarContext || Util.getCalendarContext();\n\n\t\tif (calendarContext && !this.readonly)\n\t\t{\n\t\t\tthis.DOM.sectionFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tcalendarContext\n\t\t\t&& !this.readonly\n\t\t\t&&\n\t\t\t(\n\t\t\t\t!calendarContext.util.isUserCalendar()\n\t\t\t\t|| calendarContext.util.userIsOwner()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\t// #1. Controls\n\t\t\tthis.createAddButton();\n\n\t\t\t// #2. Forms\n\t\t\tthis.DOM.trackingGroupsFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t`\n\t\t\t);\n\t\t\tthis.DOM.trackingUsersFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_USER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\t\t\tthis.DOM.trackingTypesFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\t// #3. List of sections\n\t\tthis.createSectionList();\n\n\t\treturn this.DOM.outerWrap;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.sliderId = this.slider.getUrl();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t}\n\n\tcreateSectionList()\n\t{\n\t\tthis.sliderSections = this.sectionManager.getSections().filter(section => {\n\t\t\treturn !this.deletedSectionsIds.find(id => id === section.id);\n\t\t});\n\t\tif (Type.isElementNode(this.DOM.sectonListOuterWrap))\n\t\t{\n\t\t\tDom.remove(this.DOM.sectonListOuterWrap);\n\t\t}\n\t\tthis.DOM.sectonListOuterWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\tEvent.bind(this.DOM.sectonListOuterWrap, 'click', this.sectionClickHandler.bind(this));\n\n\t\tthis.createLocalSectionsList();\n\t\tthis.createExternalSectionsList();\n\t}\n\n\tcreateLocalSectionsList()\n\t{\n\t\tthis.DOM.localSectionListWrap = this.DOM.sectonListOuterWrap.appendChild(\n\t\t\tthis.getSectionListWrap(this.getLocalSectionListTitle())\n\t\t);\n\n\t\tthis.createSectionsBlock({\n\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\tsectionList: this.sliderSections.filter(section => {\n\t\t\t\treturn (section.externalTypeIsLocal() && section.belongsToView()) || section.isPseudo();\n\t\t\t})\n\t\t});\n\n\t\tthis.createCompanySectionList();\n\t\tthis.createUsersSectionList();\n\t\tthis.createGroupsSectionList();\n\t}\n\n\tcreateExternalSectionsList()\n\t{\n\t\tconst externalSections = this.sliderSections.filter(section => {\n\t\t\treturn !section.externalTypeIsLocal() && section.belongsToView();\n\t\t});\n\n\t\tthis.DOM.extSectionListWrap = [];\n\n\t\texternalSections.forEach(section => {\n\t\t\tconst listWrap = this.getSectionListWrapForSection(section);\n\n\t\t\tthis.createSectionUnit({\n\t\t\t\tsection: section,\n\t\t\t\twrap: listWrap\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSectionListWrapForSection(section)\n\t{\n\t\tlet sectionExternalType = section.getExternalType();\n\t\tif (section.isGoogle())\n\t\t{\n\t\t\tsectionExternalType = 'google';\n\t\t}\n\t\tif (section.data['IS_EXCHANGE'])\n\t\t{\n\t\t\tsectionExternalType = 'exchange';\n\t\t}\n\n\t\tconst sectionExternalConnection = SectionManager.getSectionExternalConnection(section, sectionExternalType);\n\t\tconst calendarContext = this.calendarContext || Util.getCalendarContext();\n\n\t\tsection.data.CAL_DAV_CON = sectionExternalConnection?.addParams?.id || null;\n\t\tlet key = sectionExternalType + (\n\t\t\tsectionExternalConnection\n\t\t\t\t? sectionExternalConnection.getId()\n\t\t\t\t: '-disconnected'\n\t\t);\n\n\t\tif (!Type.isElementNode(this.DOM.extSectionListWrap[key]))\n\t\t{\n\t\t\tconst sectionListWrap = this.DOM.sectonListOuterWrap.appendChild(\n\t\t\t\tthis.getSectionListWrap(this.getExternalConnectionBlockTitle(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: sectionExternalType,\n\t\t\t\t\t\tconnection: sectionExternalConnection\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tsectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t${this.DOM.extSectionListWrap[key] = Tag.render`<ul class=\"calendar-list-slider-container\"/>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tif (\n\t\t\t\t!sectionExternalConnection\n\t\t\t\t&& calendarContext\n\t\t\t\t&& calendarContext.util.userIsOwner()\n\t\t\t\t&& !section.isArchive()\n\t\t\t\t&& (\n\t\t\t\t\t!section.isExchange()\n\t\t\t\t\t||\n\t\t\t\t\t(!calendarContext.util.config.bExchange && section.isExchange())\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tsectionListWrap.querySelector('.calendar-list-slider-widget-content-block')\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<div data-bx-calendar-open-sync=\"Y\" class=\"calendar-list-slider-card-widget-bottom-button\">\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-link\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ADJUST_SYNC')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>`\n\t\t\t\t\t);\n\n\t\t\t\tsectionListWrap.querySelector('.calendar-list-slider-card-widget-title')\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text calendar-list-title-disabled\" >\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_SYNC_DISABLED')}\n\t\t\t\t\t\t\t</span>`,\n\t\t\t\t\t);\n\t\t\t}\n\t\t\telse if (section.isArchive())\n\t\t\t{\n\t\t\t\tconst hintNode = sectionListWrap.querySelector('.calendar-list-slider-card-widget-title')\n\t\t\t\t\t.appendChild(Tag.render`\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-question calendar-list-slider-archive-hint\"\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('EC_SEC_SLIDER_TYPE_ARCHIVE_HELPER')}\">\n\t\t\t\t\t\t\t<i></i>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t`);\n\t\t\t\tif (Type.isDomNode(hintNode))\n\t\t\t\t{\n\t\t\t\t\tUtil.initHintNode(hintNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.extSectionListWrap[key];\n\t}\n\n\tgetExternalConnectionBlockTitle({type, connection}): string\n\t{\n\t\tlet title = '';\n\t\tconst connectionName = connection\n\t\t\t? connection.getConnectionAccountName() || connection.getConnectionName()\n\t\t\t: null\n\t\t;\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'google':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_GOOGLE',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_GOOGLE_DIS')\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'office365':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_OFFICE365',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_OFFICE365_DIS')\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'icloud':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_ICLOUD',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName }\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_ICLOUD_DIS')\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'caldav':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\tif (connection.getType() === 'yandex')\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_YANDEX',\n\t\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_CALDAV',\n\t\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName }\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_DEFAULT');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'exchange':\n\t\t\t\ttitle = Loc.getMessage('EC_CAL_SYNC_EXCHANGE');\n\t\t\t\tbreak;\n\t\t\tcase 'archive':\n\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_ARCHIVE');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_DEFAULT')\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tcreateCompanySectionList()\n\t{\n\t\tconst sections = this.sliderSections.filter(function(section)\n\t\t{\n\t\t\treturn section.isCompanyCalendar() && !section.belongsToView();\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Loc.getMessage('EC_SEC_SLIDER_TITLE_COMP_CAL')}</span>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tthis.createSectionsBlock({\n\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\tsectionList: this.sliderSections.filter(section => {\n\t\t\t\t\treturn section.isCompanyCalendar();\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateUsersSectionList()\n\t{\n\t\tthis.calendarContext.util.getSuperposedTrackedUsers().forEach((user) => {\n\t\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\t\treturn !section.belongsToView()\n\t\t\t\t\t&& section.type === 'user'\n\t\t\t\t\t&& section.data.OWNER_ID === user.ID;\n\t\t\t});\n\n\t\t\tif (sections.length > 0)\n\t\t\t{\n\t\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Text.encode(user.FORMATTED_NAME)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\n\t\t\t\tthis.createSectionsBlock({\n\t\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\t\tsectionList: sections\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\t}\n\n\tcreateGroupsSectionList()\n\t{\n\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\treturn !section.belongsToView() && section.type === 'group';\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Loc.getMessage('EC_SEC_SLIDER_TITLE_GROUP_CAL')}</span>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tthis.createSectionsBlock({\n\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\tsectionList: sections\n\t\t\t});\n\t\t}\n\t}\n\n\tgetSectionListWrap(title)\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-widget\">\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t${title}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetLocalSectionListTitle()\n\t{\n\t\tif (this.sectionManager.calendarType === 'user')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_SLIDER_MY_CALENDARS_LIST');\n\t\t}\n\t\telse if (this.sectionManager.calendarType === 'group')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_SLIDER_GROUP_CALENDARS_LIST');\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_SLIDER_TYPE_CALENDARS_LIST');\n\t\t}\n\t}\n\n\tcreateAddButton()\n\t{\n\t\tif (\n\t\t\tthis.calendarContext.util.config.perm\n\t\t\t&& this.calendarContext.util.config.perm.edit_section\n\t\t)\n\t\t{\n\t\t\tconst addButtonOuter = this.DOM.titleWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-split ui-btn-light-border\" style=\"margin-right: 0\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.addButton = addButtonOuter.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-main\">${Loc.getMessage('EC_ADD')}</span>\n\t\t\t`);\n\t\t\tthis.DOM.addButtonMore = addButtonOuter.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-extra\"></span>\n\t\t\t`);\n\n\t\t\tEvent.bind(this.DOM.addButtonMore, 'click', this.showAddButtonPopup.bind(this));\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showEditSectionForm.bind(this));\n\t\t}\n\t}\n\n\tshowAddButtonPopup()\n\t{\n\t\tif (this.addBtnMenu && this.addBtnMenu.popupWindow && this.addBtnMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.addBtnMenu.close();\n\t\t}\n\n\t\tconst menuItems = [\n\t\t\tnew MenuItem({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_TITLE'),\n\t\t\t\tdelimiter: true\n\t\t\t}),\n\t\t\t{\n\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_MENU'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showEditSectionForm();\n\t\t\t\t}\n\t\t\t},\n\t\t\tnew MenuItem({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_EXIST_TITLE'),\n\t\t\t\tdelimiter: true\n\t\t\t}),\n\t\t\t{\n\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showTrackingTypesForm();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_USER'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showTrackingUsersForm();\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showTrackingGroupsForm();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\tthis.addBtnMenu = this.BX.PopupMenu.create(\n\t\t\t'add-btn-' + Util.getRandomInt(),\n\t\t\tthis.DOM.addButtonMore,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.addBtnMenu.show();\n\t}\n\n\tcreateSectionsBlock({sectionList, wrap})\n\t{\n\t\tif (Type.isArray(sectionList))\n\t\t{\n\t\t\tconst listWrap = wrap.appendChild(Tag.render`<div class=\"calendar-list-slider-widget-content\"></div>`)\n\t\t\t\t.appendChild(Tag.render`<div class=\"calendar-list-slider-widget-content-block\"></div>`)\n\t\t\t\t.appendChild(Tag.render`<ul class=\"calendar-list-slider-container\"></ul>`)\n\t\t\t;\n\n\t\t\tsectionList.forEach((section) => {\n\t\t\t\tthis.createSectionUnit({section, wrap: listWrap});\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateSectionUnit({section, wrap})\n\t{\n\t\tif (!section.DOM)\n\t\t{\n\t\t\tsection.DOM = {};\n\t\t}\n\t\tconst sectionId = section.id.toString();\n\t\tconst li = wrap.appendChild(Tag.render`\n\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${sectionId}\"></li>\n\t\t`);\n\t\tconst checkbox = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-checkbox ${section.isShown() ? 'calendar-list-slider-item-checkbox-checked' : ''}\" style=\"background-color: ${section.color}\"></div>\n\t\t`);\n\t\tconst title = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-name\" title=\"${Text.encode(section.name)}\">${Text.encode(section.name)}</div>\n\t\t`);\n\n\t\tsection.DOM.item = li;\n\t\tsection.DOM.checkbox = checkbox;\n\t\tsection.DOM.title = title;\n\n\t\tsection.DOM.actionCont = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-actions-container\" data-bx-calendar-section-menu=\"${sectionId}\">\n\t\t\t\t<span class=\"calendar-list-slider-item-context-menu\"></span>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tsectionClickHandler(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tif (target.getAttribute('data-bx-calendar-section-menu') !== null)\n\t\t\t{\n\t\t\t\tlet sectionId = target.getAttribute('data-bx-calendar-section-menu');\n\t\t\t\tsectionId = sectionId === 'tasks' ? sectionId : parseInt(sectionId);\n\t\t\t\tthis.showSectionMenu(this.sectionManager.getSection(sectionId), target);\n\t\t\t}\n\t\t\telse if(target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tthis.switchSection(this.sectionManager.getSection(target.getAttribute('data-bx-calendar-section')));\n\t\t\t}\n\t\t\telse if(target.getAttribute('data-bx-calendar-open-sync') !== null)\n\t\t\t{\n\t\t\t\tthis.calendarContext.syncInterface.openSyncPanel();\n\t\t\t}\n\t\t}\n\t}\n\n\tfindCheckBoxNodes(id)\n\t{\n\t\treturn this.DOM.sectonListOuterWrap.querySelectorAll(\n\t\t\t'.calendar-list-slider-item[data-bx-calendar-section=\\''\n\t\t\t+ id\n\t\t\t+ '\\'] .calendar-list-slider-item-checkbox'\n\t\t);\n\t}\n\n\tswitchSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id)\n\n\t\tfor (let i = 0; i < checkboxNodes.length; i++)\n\t\t{\n\t\t\tif (section.isShown())\n\t\t\t{\n\t\t\t\tDom.removeClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (section.isShown())\n\t\t{\n\t\t\tsection.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsection.show();\n\t\t}\n\n\t\t// TODO: should use eventEmtter\n\t\tthis.calendarContext.reload();\n\t}\n\n\n\tswitchOnSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id);\n\n\t\tfor (let i = 0; i < checkboxNodes.length; i++)\n\t\t{\n\t\t\tif (!section.isShown())\n\t\t\t{\n\t\t\t\tDom.addClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (!section.isShown())\n\t\t{\n\t\t\tsection.show();\n\t\t}\n\t}\n\n\tswitchOffSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id);\n\n\t\tfor (let i = 0; i < checkboxNodes.length; i++)\n\t\t{\n\t\t\tif (section.isShown())\n\t\t\t{\n\t\t\t\tDom.removeClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (section.isShown())\n\t\t{\n\t\t\tsection.hide();\n\t\t}\n\t}\n\n\n\tshowSectionMenu (section, menuItemNode)\n\t{\n\t\tconst menuItems = [];\n\t\tconst itemNode = menuItemNode.closest('[data-bx-calendar-section]');\n\t\tif (Type.isElementNode(itemNode))\n\t\t{\n\t\t\tDom.addClass(itemNode, 'active');\n\t\t}\n\n\t\tif(section.canDo('view_time'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_LEAVE_ONE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showOnlyOneSection(section, this.sectionManager.sections);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!section.isPseudo() && section.getLink() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_OPEN_LINK'),\n\t\t\t\thref: section.getLink()\n\t\t\t});\n\t\t}\n\n\t\tif (!this.readonly && section.canDo('edit_section') && !section.isPseudo())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({section: section});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.isSuperposed() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.hideSuperposedHandler(section);\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.canBeConnectedToOutlook() && section.data['EXTERNAL_TYPE'] === 'local')\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_CONNECT_TO_OUTLOOK'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tsection.connectToOutlook();\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\t!section.isPseudo()\n\t\t\t&& section.data.EXPORT\n\t\t\t&& section.data.EXPORT.LINK\n\t\t\t&& section.data['EXTERNAL_TYPE'] === 'local'\n\t\t)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ACTION_EXPORT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\n\t\t\t\t\tconst options = {\n\t\t\t\t\t\tsectionLink: section.data.EXPORT.LINK,\n\t\t\t\t\t\tcalendarPath: this.calendarContext.util.config.path,\n\t\t\t\t\t};\n\t\t\t\t\tif (IcalSyncPopup.checkPathes(options))\n\t\t\t\t\t{\n\t\t\t\t\t\tIcalSyncPopup.createInstance(options).show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tIcalSyncPopup.showPopupWithPathesError();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tlet provider = undefined;\n\t\tlet connection = undefined;\n\n\t\tif (section.data.CAL_DAV_CON\n\t\t\t&& section.belongsToView()\n\t\t\t&& this.calendarContext.syncInterface\n\t\t)\n\t\t{\n\t\t\t[provider, connection] = this.calendarContext.syncInterface.getProviderById(section.data.CAL_DAV_CON);\n\t\t}\n\n\t\tif (\n\t\t\tsection.canDo('edit_section')\n\t\t\t&& section.belongsToView()\n\t\t\t&& !section.isPseudo()\n\t\t\t&& ((!section.isGoogle() && !connection)\n\t\t\t\t|| section.data['EXTERNAL_TYPE'] === 'local'\n\t\t\t\t|| !connection\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_DELETE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showSectionConfirm('delete', section);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.canDo('edit_section') && connection)\n\t\t{\n\t\t\tif (section.isGoogle() || section.isIcloud() || section.isOffice365() || section.isCalDav())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_EXTERNAL_ADJUST'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tif (provider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprovider.openActiveConnectionSlider(connection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (section.isGoogle() || section.isIcloud() || section.isOffice365())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_HIDE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tthis.showSectionConfirm('hideSync', section);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\telse if (section.isCalDav())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_HIDE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tthis.showSectionConfirm('hideExternal', section);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (section.isPseudo() && section.taskSectionBelongToUser())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({\n\t\t\t\t\t\tsection: section\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_TASK_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'showTasks', 'N');\n\n\t\t\t\t\tDom.addClass(section.DOM.item, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.clean(section.DOM.item, true);\n\t\t\t\t\t\tBX.reload();\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (menuItems && menuItems.length > 0)\n\t\t{\n\t\t\tthis.sectionActionMenu = top.BX.PopupMenu.create(\n\t\t\t\t'section-menu-' + Util.getRandomInt(),\n\t\t\t\tmenuItemNode,\n\t\t\t\tmenuItems,\n\t\t\t\t{\n\t\t\t\t\tcloseByEsc : true,\n\t\t\t\t\tautoHide : true,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: 9,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: false\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.sectionActionMenu.show();\n\t\t\tthis.sectionActionMenu.popupWindow.subscribe('onClose', ()=>{\n\t\t\t\tif (Type.isElementNode(itemNode))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(itemNode, 'active');\n\t\t\t\t}\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcloseForms()\n\t{\n\t\tif (this.addBtnMenu)\n\t\t{\n\t\t\tthis.addBtnMenu.close();\n\t\t}\n\n\t\tif (this.editSectionForm)\n\t\t{\n\t\t\tthis.editSectionForm.close();\n\t\t}\n\n\t\tif (this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm.close();\n\t\t}\n\n\t\tif (this.trackingGroupsForm)\n\t\t{\n\t\t\tthis.trackingGroupsForm.close();\n\t\t}\n\n\t\tif (this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm.close();\n\t\t}\n\t}\n\n\tshowEditSectionForm(params ={})\n\t{\n\t\tthis.closeForms();\n\t\tconst formTitleNode = this.DOM.sectionFormWrap.querySelector('.calendar-list-slider-card-widget-title-text');\n\n\t\tthis.editSectionForm = new EditForm({\n\t\t\twrap: this.DOM.sectionFormWrap,\n\t\t\tsectionAccessTasks: this.sectionManager.getSectionAccessTasks(),\n\t\t\tsectionManager: this.sectionManager,\n\t\t\tcloseCallback: () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t}\n\t\t});\n\n\t\tlet showAccessControl = true;\n\t\tif (params.section && (!params.section.belongsToView() || params.section.isPseudo()))\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION_PERSONAL');\n\t\t\tshowAccessControl = false;\n\t\t}\n\t\telse if (params.section && params.section.id)\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION');\n\t\t\tshowAccessControl = params.section.hasPermission('access');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION');\n\t\t}\n\n\t\tthis.editSectionForm.show({\n\t\t\tshowAccess: showAccessControl,\n\t\t\tallowChangeName: params.section ? !params.section.isPrimaryForConnection() : true,\n\t\t\tsection: params.section || {\n\t\t\t\tcolor: Util.getRandomColor(),\n\t\t\t\taccess: this.sectionManager.getDefaultSectionAccess()\n\t\t\t}\n\t\t});\n\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingTypesForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm = new TrackingTypesForm({\n\t\t\t\twrap: this.DOM.trackingTypesFormWrap,\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingTypesForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingUsersForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm = new TrackingUsersForm({\n\t\t\t\twrap: this.DOM.trackingUsersFormWrap,\n\t\t\t\ttrackingUsers: this.calendarContext.util.getSuperposedTrackedUsers(),\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingUsersForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingGroupsForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingGroupsForm)\n\t\t{\n\t\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\t\tconst trackingGroups = this.calendarContext.util.getSuperposedTrackedGroups();\n\n\t\t\tsuperposedSections.forEach((section) => {\n\t\t\t\tif (section.getType() === 'group'\n\t\t\t\t\t&& !trackingGroups.includes(section.getOwnerId()))\n\t\t\t\t{\n\t\t\t\t\ttrackingGroups.push(section.getOwnerId());\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.trackingGroupsForm = new TrackingGroupsForm({\n\t\t\t\twrap: this.DOM.trackingGroupsFormWrap,\n\t\t\t\ttrackingGroups: trackingGroups,\n\t\t\t\tsuperposedSections: superposedSections,\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingGroupsForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tdeleteSectionHandler(event)\n\t{\n\t\tif (event && event instanceof this.BX.Event.BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst sectionId = parseInt(data.sectionId, 10);\n\n\t\t\tthis.sliderSections.forEach((section, index) => {\n\t\t\t\tif (parseInt(section.id) === sectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.sectionManager.deleteSectionHandler(sectionId);\n\t\t\t\t\tthis.deletedSectionsIds.push(sectionId);\n\t\t\t\t\tconst deleteSectionNodes = this.DOM.sectonListOuterWrap.querySelectorAll(\n\t\t\t\t\t\t`.calendar-list-slider-item[data-bx-calendar-section='${sectionId}']`\n\t\t\t\t\t);\n\n\t\t\t\t\tdeleteSectionNodes.forEach(node => {\n\t\t\t\t\t\tDom.addClass(node, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!section.externalTypeIsLocal())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst listWrap = this.getSectionListWrapForSection(section);\n\t\t\t\t\t\tthis.sliderSections = BX.util.deleteFromArray(this.sliderSections, index);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tdeleteSectionNodes.forEach(node => {\n\t\t\t\t\t\t\t\tDom.remove(node);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif(!listWrap.querySelector('li.calendar-list-slider-item'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.remove(listWrap.closest('.calendar-list-slider-card-widget'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.closeForms()\n\t\t}\n\t}\n\n\thideSuperposedHandler(section)\n\t{\n\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\tconst sections = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < superposedSections.length; i++)\n\t\t{\n\t\t\tif (parseInt(section.id) !== parseInt(superposedSections[i].id))\n\t\t\t{\n\t\t\t\tsections.push(parseInt(superposedSections[i].id));\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tsections: sections\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.reload();\n\t\t\t\t},\n\t\t\t\t// Failure\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\trefreshSectionList()\n\t{\n\t\tthis.createSectionList();\n\t}\n\n\tshowOnlyOneSection(section, sections)\n\t{\n\t\tfor (let curSection of sections)\n\t\t{\n\t\t\tif(curSection.id === section.id)\n\t\t\t{\n\t\t\t\tthis.switchOnSection(curSection);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.switchOffSection(curSection);\n\t\t\t}\n\t\t}\n\n\t\tthis.calendarContext.reload();\n\t}\n\n\n\tkeyHandler(e)\n\t{\n\t\tif (\n\t\t\te.keyCode ===  Util.getKeyCode('enter')\n\t\t\t&& this.DOM.confirmSectionPopup\n\t\t\t&& this.currentConfirmMode\n\t\t\t&& this.currentSection\n\t\t)\n\t\t{\n\t\t\tif (this.currentConfirmMode === 'delete')\n\t\t\t{\n\t\t\t\tthis.removeSection(this.currentSection);\n\t\t\t}\n\t\t\telse if (this.currentConfirmMode === 'hideSync')\n\t\t\t{\n\t\t\t\tthis.hideSyncSection(this.currentSection);\n\t\t\t}\n\t\t\telse if (this.currentConfirmMode === 'hideExternal')\n\t\t\t{\n\t\t\t\tthis.hideExternalSection(this.currentSection);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowSectionConfirm(mode, section)\n\t{\n\t\tthis.currentSection = section;\n\t\tthis.currentConfirmMode = mode;\n\n\t\tconst confirmCallback = this.getConfirmCallback();\n\t\tconst okCaption = this.getOkCaption();\n\n\t\tthis.DOM.confirmSectionPopup = new MessageBox({\n\t\t\tmessage: this.getSectionConfirmContent(),\n\t\t\tminHeight: 120,\n\t\t\tminWidth: 280,\n\t\t\tmaxWidth: 300,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tonOk: confirmCallback,\n\t\t\tonCancel: () => {\n\t\t\t\tthis.DOM.confirmSectionPopup.close();\n\t\t\t},\n\t\t\tokCaption: okCaption,\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tdelete this.DOM.confirmSectionPopup;\n\t\t\t\t\t\tdelete this.currentSection;\n\t\t\t\t\t\tdelete this.currentConfirmMode;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t}\n\t\t});\n\n\t\tthis.DOM.confirmSectionPopup.show();\n\t}\n\n\tgetConfirmCallback()\n\t{\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.removeSection(this.currentSection);\n\t\t\t};\n\t\t}\n\t\telse if (this.currentConfirmMode === 'hideSync')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.hideSyncSection(this.currentSection);\n\t\t\t};\n\t\t}\n\t\telse if (this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.hideExternalSection(this.currentSection);\n\t\t\t};\n\t\t}\n\t}\n\n\tgetOkCaption()\n\t{\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_DELETE');\n\t\t}\n\t\telse if (this.currentConfirmMode === 'hideSync' || this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_CAL_SYNC_DISCONNECT')\n\t\t}\n\t}\n\n\tgetSectionConfirmContent()\n\t{\n\t\tlet phrase = '';\n\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\tphrase = Loc.getMessage('EC_SEC_DELETE_CONFIRM');\n\t\t}\n\t\telse if (this.currentConfirmMode === 'hideSync' || this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\tphrase = Loc.getMessage('EC_CAL_GOOGLE_HIDE_CONFIRM');\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-list-slider-messagebox-text\">${phrase}</div>\n\t\t`;\n\t}\n\n\tremoveSection(section)\n\t{\n\t\tsection.remove();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n\n\thideSyncSection(section)\n\t{\n\t\tsection.hideSyncSection();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n\n\thideExternalSection(section)\n\t{\n\t\tsection.hideExternalCalendarSection();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n}"],"names":["EditForm","EventEmitter","constructor","options","DOM","isCreated","setEventNamespace","outerWrap","wrap","sectionAccessTasks","sectionManager","closeCallback","BX","Util","getBX","keyHandlerBinded","keyHandler","bind","show","params","section","create","showAccess","allowChangeName","accessLink","style","display","accessWrap","Event","document","Dom","addClass","color","setColor","setAccess","access","data","ACCESS","name","sectionTitleInput","value","focus","select","disabled","isOpenedState","close","unbind","removeClass","Type","isFunction","isOpened","querySelector","clean","appendChild","props","className","formFieldsWrap","attrs","type","placeholder","Loc","getMessage","optionsWrap","initSectionColorSelector","initAccessController","buttonsWrap","saveBtn","UI","Button","text","events","click","save","renderTo","checkClose","e","keyCode","getKeyCode","setWaiting","saveSection","then","colorContWrap","html","colorIcon","colorChangeLink","showSimplePicker","colors","Runtime","clone","getDefaultColorList","innerCont","colorWrap","delegate","simplePickerClick","moreLinkWrap","moreLink","showFullPicker","simplePickerColorWrap","includes","push","i","length","node","backgroundColor","lastActiveNode","util","array_search","simpleColorPopup","PopupWindowManager","getRandomInt","autoHide","closeByEsc","offsetTop","offsetLeft","lightShadow","content","cacheable","setAngle","offset","target","findTargetNode","srcElement","isElementNode","getAttribute","fullColorPicker","getPopupWindow","isDestroyed","ColorPicker","bindElement","onColorSelected","popupOptions","zIndex","onPopupClose","open","rowsCount","code","hasOwnProperty","accessRowsCount","insertAccessRow","getAccessName","checkAccessTableHeight","buildAccessController","calendarType","initDialogGroup","initDialogStandard","initAccessSelectorPopup","accessControls","showAccessSelectorPopup","removeIcon","setValueCallback","accessTasks","valueNode","innerHTML","Text","encode","title","remove","rowNode","Tag","render","accessTable","accessButton","hasClass","entitySelectorDialog","EntitySelectorDialog","targetNode","context","preselectedItems","enableSearch","handleEntitySelectorChanges","targetContainer","body","entities","id","selectMode","tabs","ownerName","items","ownerId","entityId","entityList","getSelectedItems","hide","isArray","forEach","entity","convertEntityToAccessCode","setAccessName","debounce","destroy","undefined","taskId","adjust","insertRow","titleNode","insertCell","valueCell","selectNode","checkTableTimeout","clearTimeout","setTimeout","offsetHeight","maxHeight","parseInt","accessPopupMenu","popupWindow","isShown","_this","menuItems","onclick","PopupMenu","randomInt","angle","TrackingUsersForm","interfaceType","trackingUsers","trackingUserIdList","map","item","ID","trackingGroupIdList","CHECKED_CLASS","selectorId","superposedSections","selected","checkInnerWrapHeight","updateSectionList","firstTrackingUserIdList","cssText","innerWrap","selectorWrap","userTagSelector","TagSelector","dialogOptions","width","handleUserSelectorChanges","sectionsWrap","createButtons","selectedItems","getDialog","ajax","runAction","userIdList","sections","prepareTrackingSections","response","location","reload","displayError","errors","getSelectedSections","sectionIndex","checkbox","filter","delayExecution","updateSectionLoader","getLoader","height","updateSectionTimeout","users","user","OWNER_ID","FORMATTED_NAME","createSectionBlock","sectionList","result","listWrap","sectionClick","toString","li","COLOR","NAME","checkHeightTimeout","TrackingGroupsForm","trackingGroups","groupTagSelector","handleGroupSelectorChanges","groupIdList","TrackingTypesForm","selectGroups","selectUsers","addLinkMessage","SectionInterface","calendarContext","readonly","uid","SLIDER_WIDTH","SLIDER_DURATION","sliderId","denyClose","deletedSectionsIds","deleteSectionHandlerBinded","deleteSectionHandler","refreshSectionListBinded","refreshSectionList","config","accessNames","setAccessNames","SidePanel","Instance","contentCallback","createContent","animationDuration","onCloseByEsc","escHide","onClose","onCloseComplete","onLoad","onLoadSlider","addEventEmitterSubscriptions","subscribe","destroyEventEmitterSubscriptions","unsubscribe","event","getSlider","getUrl","denyAction","closeForms","removeCustomEvent","proxy","localSectionListWrap","sectionActionMenu","trackingTypesForm","trackingUsersForm","trackingGroupsForm","titleWrap","getCalendarContext","sectionFormWrap","isUserCalendar","userIsOwner","createAddButton","trackingGroupsFormWrap","trackingUsersFormWrap","trackingTypesFormWrap","createSectionList","slider","layout","sliderSections","getSections","find","sectonListOuterWrap","sectionClickHandler","createLocalSectionsList","createExternalSectionsList","getSectionListWrap","getLocalSectionListTitle","createSectionsBlock","externalTypeIsLocal","belongsToView","isPseudo","createCompanySectionList","createUsersSectionList","createGroupsSectionList","externalSections","extSectionListWrap","getSectionListWrapForSection","createSectionUnit","sectionExternalType","getExternalType","isGoogle","sectionExternalConnection","SectionManager","getSectionExternalConnection","CAL_DAV_CON","addParams","key","getId","sectionListWrap","getExternalConnectionBlockTitle","connection","isArchive","isExchange","bExchange","hintNode","isDomNode","initHintNode","connectionName","getConnectionAccountName","getConnectionName","getType","isCompanyCalendar","getSuperposedTrackedUsers","perm","edit_section","addButtonOuter","addButton","addButtonMore","showAddButtonPopup","showEditSectionForm","addBtnMenu","MenuItem","delimiter","showTrackingTypesForm","showTrackingUsersForm","showTrackingGroupsForm","sectionId","actionCont","showSectionMenu","getSection","switchSection","syncInterface","openSyncPanel","findCheckBoxNodes","querySelectorAll","checkboxNodes","switchOnSection","switchOffSection","menuItemNode","itemNode","closest","canDo","showOnlyOneSection","getLink","href","isSuperposed","hideSuperposedHandler","canBeConnectedToOutlook","connectToOutlook","EXPORT","LINK","sectionLink","calendarPath","path","IcalSyncPopup","checkPathes","createInstance","showPopupWithPathesError","provider","getProviderById","showSectionConfirm","isIcloud","isOffice365","isCalDav","openActiveConnectionSlider","taskSectionBelongToUser","userOptions","top","allowSliderClose","denySliderClose","editSectionForm","formTitleNode","getSectionAccessTasks","showAccessControl","hasPermission","isPrimaryForConnection","getRandomColor","getDefaultSectionAccess","getSuperposedSectionList","getSuperposedTrackedGroups","getOwnerId","BaseEvent","getData","index","deleteSectionNodes","deleteFromArray","curSection","confirmSectionPopup","currentConfirmMode","currentSection","removeSection","hideSyncSection","hideExternalSection","mode","confirmCallback","getConfirmCallback","okCaption","getOkCaption","MessageBox","message","getSectionConfirmContent","minHeight","minWidth","maxWidth","buttons","Dialogs","MessageBoxButtons","OK_CANCEL","onOk","onCancel","padding","contentPadding","animation","phrase","hideExternalCalendarSection"],"mappings":"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"}