{"version":3,"file":"sectioninterface.bundle.js","sources":["../src/editform.js","../src/trackingusersform.js","../src/trackinggroupsform.js","../src/trackingtypesform.js","../src/sectioninterface.js"],"sourcesContent":["import { Runtime, Dom, Event, Loc, Text, Type, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {EventEmitter} from 'main.core.events';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\n\n\nexport class EditForm extends EventEmitter\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface.EditForm');\n\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.sectionAccessTasks = options.sectionAccessTasks;\n\t\tthis.sectionManager = options.sectionManager;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.create();\n\t\tthis.showAccess = params.showAccess !== false;\n\t\tif (this.showAccess)\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = '';\n\t\t\tthis.DOM.accessWrap.style.display = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = 'none';\n\t\t\tthis.DOM.accessWrap.style.display = 'none';\n\t\t}\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tthis.section = params.section;\n\t\tif (params.section)\n\t\t{\n\t\t\tif (params.section.color)\n\t\t\t{\n\t\t\t\tthis.setColor(params.section.color);\n\t\t\t}\n\n\t\t\tthis.setAccess(params.section.access || params.section.data.ACCESS || {});\n\n\t\t\tif (params.section.name)\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.value = params.section.name;\n\t\t\t}\n\t\t}\n\n\t\tBX.focus(this.DOM.sectionTitleInput);\n\t\tif (this.DOM.sectionTitleInput.value !== '')\n\t\t{\n\t\t\tthis.DOM.sectionTitleInput.select();\n\t\t}\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tthis.isOpenedState = false;\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tthis.wrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\n\t\tif (this.wrap)\n\t\t{\n\t\t\tDom.clean(this.wrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.wrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-form-content'}}));\n\t\t}\n\n\t\tthis.DOM.formFieldsWrap = this.wrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(\n\t\t\t\tDom.create(\n\t\t\t\t\t'DIV',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content-block'}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t// Title\n\t\tthis.DOM.sectionTitleInput = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-container calendar-field-container-string'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}))\n\t\t\t.appendChild(Dom.create('INPUT', {\n\t\t\t\tattrs: {type: 'text', placeholder: Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')},\n\t\t\t\tprops: {className: 'calendar-field calendar-field-string'}\n\t\t\t}));\n\n\t\tthis.DOM.optionsWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-new-calendar-options-container'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.initSectionColorSelector();\n\n\t\tthis.initAccessController();\n\n\t\t// Buttons\n\t\tthis.buttonsWrap = this.DOM.formFieldsWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-btn-container'}}));\n\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: {click: this.save.bind(this)}\n\t\t});\n\t\tthis.saveBtn.renderTo(this.buttonsWrap);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {click: this.checkClose.bind(this)}\n\t\t}).renderTo(this.buttonsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckClose()\n\t{\n\t\tthis.close();\n\t}\n\n\tsave()\n\t{\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.sectionManager.saveSection(\n\t\t\tthis.DOM.sectionTitleInput.value,\n\t\t\tthis.color,\n\t\t\tthis.access,\n\t\t\t{section: this.section}\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tinitSectionColorSelector()\n\t{\n\t\tthis.DOM.colorContWrap = this.DOM.optionsWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_COLOR')\n\t\t}));\n\t\tthis.colorIcon = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-selected' }\n\t\t}));\n\t\tthis.colorChangeLink = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-change' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_CHANGE')\n\t\t}));\n\t\t\n\t\tEvent.bind(this.colorIcon, 'click', this.showSimplePicker.bind(this));\n\t\tEvent.bind(this.colorChangeLink, 'click', this.showSimplePicker.bind(this));\n\t}\n\n\tshowSimplePicker(value)\n\t{\n\t\tconst colors = Runtime.clone(Util.getDefaultColorList(), true);\n\t\tconst innerCont = Dom.create(\n\t\t\t'DIV',\n\t\t\t{\n\t\t\t\tprops: {className: 'calendar-simple-color-wrap calendar-field-container-colorpicker-square'}\n\t\t\t}\n\t\t);\n\t\tconst colorWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\t\tevents: {click: BX.delegate(this.simplePickerClick, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLinkWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link-wrap'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLink = moreLinkWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'SPAN',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link'},\n\t\t\t\t\thtml: Loc.getMessage('EC_COLOR'),\n\t\t\t\t\tevents: {click: BX.delegate(this.showFullPicker, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.simplePickerColorWrap = colorWrap;\n\t\tthis.colors = [];\n\n\t\tif (!colors.includes(this.color))\n\t\t{\n\t\t\tcolors.push(this.color);\n\t\t}\n\n\t\tfor (let i = 0; i < colors.length; i++)\n\t\t{\n\t\t\tthis.colors.push({\n\t\t\t\tcolor: colors[i],\n\t\t\t\tnode: colorWrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tstyle: {backgroundColor: colors[i]},\n\t\t\t\t\tattrs: {'data-bx-calendar-color': colors[i]},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}))\n\t\t\t});\n\t\t}\n\n\t\tthis.lastActiveNode = this.colors[BX.util.array_search(this.color, colors) || 0].node;\n\t\tDom.addClass(this.lastActiveNode, 'active');\n\n\t\tthis.simpleColorPopup = BX.PopupWindowManager.create(\n\t\t\t\"simple-color-popup-\" + Util.getRandomInt(),\n\t\t\tthis.colorIcon,\n\t\t\t{\n\t\t\t\t//zIndex: this.zIndex,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: innerCont,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.simpleColorPopup.setAngle({offset: 10});\n\t\tthis.simpleColorPopup.show(true);\n\t}\n\n\tsimplePickerClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tconst value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tif (this.lastActiveNode)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.lastActiveNode, 'active');\n\t\t\t\t}\n\n\t\t\t\tDom.addClass(target, 'active');\n\t\t\t\tthis.lastActiveNode = target;\n\t\t\t\tthis.setColor(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFullPicker()\n\t{\n\t\tif (this.simpleColorPopup)\n\t\t{\n\t\t\tthis.simpleColorPopup.close();\n\t\t}\n\n\t\tif (!this.fullColorPicker)\n\t\t{\n\t\t\tthis.fullColorPicker = new BX.ColorPicker({\n\t\t\t\tbindElement: this.colorIcon,\n\t\t\t\tonColorSelected: BX.delegate(function(color){\n\t\t\t\t\tthis.setColor(color);\n\t\t\t\t}, this),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupClose:BX.delegate(function(){\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.fullColorPicker.open();\n\t}\n\n\tsetColor(value)\n\t{\n\t\tthis.colorIcon.style.backgroundColor = value;\n\t\tthis.color = value;\n\t}\n\n\tsetAccess(value)\n\t{\n\t\tlet rowsCount = 0;\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\trowsCount++;\n\t\t\t}\n\t\t}\n\t\tthis.accessRowsCount = rowsCount;\n\t\tthis.access = value;\n\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tthis.insertAccessRow(Util.getAccessName(code), code, value[code]);\n\t\t\t}\n\t\t}\n\t\tthis.checkAccessTableHeight();\n\t}\n\n\tinitAccessController()\n\t{\n\t\tthis.DOM.accessLink = this.DOM.optionsWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-new-calendar-option-more\">${Loc.getMessage('EC_SEC_SLIDER_ACCESS')}</div>`\n\t\t);\n\n\t\tthis.DOM.accessWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-access-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-access-inner-wrap\">\n\t\t\t\t\t\t${this.DOM.accessTable = Tag.render`\n\t\t\t\t\t\t\t<table class=\"calendar-section-slider-access-table\"></table>\n\t\t\t\t\t\t`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-list-slider-new-calendar-options-container\">\n\t\t\t\t\t\t${this.DOM.accessButton = Tag.render `\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-new-calendar-option-add\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ACCESS_ADD')}\n\t\t\t\t\t\t\t</span>`\n\t\t\t\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`\n\t\t);\n\n\t\tthis.accessControls = {};\n\t\tthis.accessTasks = this.sectionAccessTasks;\n\n\t\tEvent.bind(this.DOM.accessLink, 'click', () => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\tthis.checkAccessTableHeight();\n\t\t});\n\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true }\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\n\t\tEvent.bind(this.DOM.accessWrap, 'click', (e) => {\n\t\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\t\tif (Type.isElementNode(target))\n\t\t\t{\n\t\t\t\tif(target.getAttribute('data-bx-calendar-access-selector') !== null)\n\t\t\t\t{\n\t\t\t\t\t// show selector\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-selector');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAccessSelectorPopup({\n\t\t\t\t\t\t\t\tnode: this.accessControls[code].removeIcon,\n\t\t\t\t\t\t\t\tsetValueCallback: (value) => {\n\t\t\t\t\t\t\t\t\tif (this.accessTasks[value] && this.accessControls[code])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.accessControls[code].valueNode.innerHTML =\n\t\t\t\t\t\t\t\t\t\t\tText.encode(this.accessTasks[value].title);\n\t\t\t\t\t\t\t\t\t\tthis.access[code] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if(target.getAttribute('data-bx-calendar-access-remove') !== null)\n\t\t\t\t{\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-remove');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.accessControls[code].rowNode)\n\t\t\t\t\t\tthis.accessControls[code] = null;\n\t\t\t\t\t\tdelete this.access[code];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleEntitySelectorChanges()\n\t{\n\t\tconst entityList = this.entitySelectorDialog.getSelectedItems();\n\t\tthis.entitySelectorDialog.hide();\n\t\tif (Type.isArray(entityList))\n\t\t{\n\t\t\tentityList.forEach((entity) => {\n\t\t\t\tconst title = entity.title.text;\n\t\t\t\tconst code = Util.convertEntityToAccessCode(entity);\n\t\t\t\tUtil.setAccessName(code, title);\n\t\t\t\tthis.insertAccessRow(title, code);\n\t\t\t});\n\t\t}\n\n\t\tRuntime.debounce(() => {\n\t\t\tthis.entitySelectorDialog.destroy();\n\t\t}, 400)();\n\t}\n\n\t// todo: refactor it\n\tinsertAccessRow(title, code, value)\n\t{\n\t\tif (!this.accessControls[code])\n\t\t{\n\t\t\tif (value === undefined)\n\t\t\t{\n\t\t\t\tfor(let taskId in this.sectionAccessTasks)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.sectionAccessTasks.hasOwnProperty(taskId)\n\t\t\t\t\t\t&& this.sectionAccessTasks[taskId].name === 'calendar_view'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = taskId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst\n\t\t\t\trowNode = Dom.adjust(this.DOM.accessTable.insertRow(-1), {props : {className: 'calendar-section-slider-access-table-row'}}),\n\t\t\t\ttitleNode = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\thtml: '<span class=\"calendar-section-slider-access-title\">' + Text.encode(title) + ':</span>'}),\n\t\t\t\tvalueCell = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-selector': code}\n\t\t\t\t}),\n\t\t\t\tselectNode = valueCell.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-container'}\n\t\t\t\t})),\n\t\t\t\tvalueNode = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\ttext: this.accessTasks[value] ? this.accessTasks[value].title : '',\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-value'}\n\t\t\t\t})),\n\t\t\t\tremoveIcon = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-remove'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-remove': code}\n\t\t\t\t}));\n\n\t\t\tthis.access[code] = value;\n\n\t\t\tthis.accessControls[code] = {\n\t\t\t\trowNode: rowNode,\n\t\t\t\ttitleNode: titleNode,\n\t\t\t\tvalueNode: valueNode,\n\t\t\t\tremoveIcon: removeIcon\n\t\t\t};\n\t\t}\n\t}\n\n\tcheckAccessTableHeight()\n\t{\n\t\tif (this.checkTableTimeout)\n\t\t{\n\t\t\tthis.checkTableTimeout = clearTimeout(this.checkTableTimeout);\n\t\t}\n\n\t\tthis.checkTableTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tif (this.DOM.accessWrap.offsetHeight - this.DOM.accessTable.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.accessWrap.style.maxHeight = parseInt(this.DOM.accessTable.offsetHeight) + 100 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.accessWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tshowAccessSelectorPopup(params)\n\t{\n\t\tif (\n\t\t\tthis.accessPopupMenu\n\t\t\t&& this.accessPopupMenu.popupWindow\n\t\t\t&& this.accessPopupMenu.popupWindow.isShown()\n\t\t)\n\t\t{\n\t\t\treturn this.accessPopupMenu.close();\n\t\t}\n\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tfor(let taskId in this.accessTasks)\n\t\t{\n\t\t\tif (this.accessTasks.hasOwnProperty(taskId))\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.accessTasks[taskId].title,\n\t\t\t\t\t\tonclick: (function (value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.setValueCallback(value);\n\t\t\t\t\t\t\t\t_this.accessPopupMenu.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(taskId)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.accessPopupMenu = this.BX.PopupMenu.create(\n\t\t\t'section-access-popup' + Util.randomInt(),\n\t\t\tparams.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\toffsetTop: -5,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.accessPopupMenu.show();\n\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Runtime, Dom, Event, Loc, Type, Tag, Text} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Util } from 'calendar.util';\nimport { Dialog, TagSelector } from 'ui.entity-selector';\n\nexport class TrackingUsersForm\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.trackingUsers = options.trackingUsers || [];\n\t\tthis.trackingUserIdList = this.trackingUsers.map((item) => {\n\t\t\treturn parseInt(item.ID)\n\t\t});\n\n\t\tthis.CHECKED_CLASS = 'calendar-list-slider-item-checkbox-checked';\n\t\tthis.selectorId = 'add-tracking' + Util.getRandomInt();\n\t\tthis.closeCallback = options.closeCallback;\n\n\t\tthis.superposedSections = Type.isArray(options.superposedSections) ? options.superposedSections : [];\n\t\tthis.selected = {};\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tthis.selected[section.id] = true;\n\t\t}, this);\n\n\t\tthis.isCreated = false;\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t\tthis.checkInnerWrapHeight();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.updateSectionList();\n\n\t\tthis.firstTrackingUserIdList = Runtime.clone(this.trackingUserIdList);\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.isOpenedState = false;\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\t\tthis.DOM.outerWrap.style.cssText = '';\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } })\n\t\t);\n\n\t\tthis.userTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingUsers.map((item) => {\n\t\t\t\t\treturn ['user', parseInt(item.ID)]\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tcreateButtons()\n\t{\n\t\tthis.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-btn-container\">\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary\"\n\t\t\t\t\tonclick=\"${this.save.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_SAVE')}</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\tonclick=\"${this.close.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_CANCEL')}</button>\n\t\t\t</div>`\n\t\t);\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingUserIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'user')\n\t\t\t{\n\t\t\t\tthis.trackingUserIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\tsections: this.prepareTrackingSections(),\n\t\t\t\t\ttype: 'users'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n\n\tprepareTrackingSections()\n\t{\n\t\tlet sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tsections.push(parseInt(section.id));\n\t\t}, this);\n\n\t\tfor (let id in this.sectionIndex)\n\t\t{\n\t\t\tif (this.sectionIndex.hasOwnProperty(id) && this.sectionIndex[id].checkbox)\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t{\n\t\t\t\t\tif (!sections.includes(parseInt(id)))\n\t\t\t\t\t{\n\t\t\t\t\t\tsections.push(parseInt(id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (sections.includes(parseInt(id)))\n\t\t\t\t{\n\t\t\t\t\tsections = sections.filter((section) => {return parseInt(section) !== parseInt(id)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sections;\n\t}\n\n\tupdateSectionList(delayExecution)\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tif (delayExecution !== false)\n\t\t{\n\t\t\tthis.updateSectionTimeout = setTimeout(() => {\n\t\t\t\tthis.updateSectionList(false);\n\t\t\t}, 300);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\ttype: 'users'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Users calendars\n\t\t\t\t\tresponse.data.users.forEach((user) => {\n\t\t\t\t\t\tconst sections = response.data.sections.filter(function(section)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn parseInt(section.OWNER_ID) === parseInt(user.ID);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t${Text.encode(user.FORMATTED_NAME)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`);\n\n\t\t\t\t\t\tif (sections.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\t\tsectionList: sections,\n\t\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tcreateSectionBlock(params = {})\n\t{\n\t\tlet result = false;\n\t\tif (Type.isArray(params.sectionList) && params.sectionList.length\n\t\t\t&& Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tlet listWrap;\n\t\t\tparams.wrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t${listWrap = Tag.render`<ul class=\"calendar-list-slider-container\"></ul>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tEvent.bind(listWrap, 'click', this.sectionClick.bind(this));\n\n\t\t\tparams.sectionList.forEach((section) => {\n\t\t\t\tconst id = section.ID.toString();\n\t\t\t\tlet checkbox;\n\n\t\t\t\tconst li = listWrap.appendChild(Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${id}\">\n\t\t\t\t\t\t${checkbox = Tag.render`\n\t\t\t\t\t\t\t<div class=\"calendar-list-slider-item-checkbox\" style=\"background: ${section.COLOR}\"></div>\n\t\t\t\t\t\t`}\n\t\t\t\t\t\t<div class=\"calendar-list-slider-item-name\">${Text.encode(section.NAME)}</div>\n\t\t\t\t\t</li>\n\t\t\t\t`);\n\n\t\t\t\tthis.sectionIndex[id] = {\n\t\t\t\t\titem: li,\n\t\t\t\t\tcheckbox: checkbox\n\t\t\t\t};\n\n\t\t\t\tif (\n\t\t\t\t\tthis.selected[id]\n\t\t\t\t\t|| !Type.isArray(this.firstTrackingUserIdList)\n\t\t\t\t\t|| !this.firstTrackingUserIdList.includes(parseInt(section.OWNER_ID))\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(checkbox, this.CHECKED_CLASS);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsectionClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tif(target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tconst id = target.getAttribute('data-bx-calendar-section');\n\t\t\t\tif (this.sectionIndex[id] && this.sectionIndex[id].checkbox)\n\t\t\t\t{\n\t\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckInnerWrapHeight()\n\t{\n\t\tif (this.checkHeightTimeout)\n\t\t{\n\t\t\tthis.checkHeightTimeout = clearTimeout(this.checkHeightTimeout);\n\t\t}\n\n\t\tthis.checkHeightTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.outerWrap, 'show'))\n\t\t\t{\n\t\t\t\tif (this.DOM.outerWrap.offsetHeight - this.DOM.innerWrap.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.outerWrap.style.maxHeight = parseInt(this.DOM.innerWrap.offsetHeight) + 200 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.outerWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { TagSelector } from 'ui.entity-selector';\nimport { TrackingUsersForm } from \"./trackingusersform\"\n\nexport class TrackingGroupsForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.trackingGroupIdList = options.trackingGroups || [];\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } })\n\t\t);\n\n\t\tthis.groupTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingGroupIdList.map((id) => {\n\t\t\t\t\treturn ['project', id];\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.groupTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\thandleGroupSelectorChanges()\n\t{\n\t\tconst selectedItems = this.groupTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingGroupIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'project')\n\t\t\t{\n\t\t\t\tthis.trackingGroupIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tgroupIdList: this.trackingGroupIdList,\n\t\t\t\t\ttype: 'groups'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Groups calendars\n\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {TrackingUsersForm} from \"./trackingusersform\"\n\nexport class TrackingTypesForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.trackingGroups = options.trackingGroups || [];\n\t\tthis.selectGroups = true;\n\t\tthis.selectUsers = false;\n\t\tthis.addLinkMessage = Loc.getMessage('EC_SEC_SLIDER_SELECT_GROUPS');\n\t}\n\n\tshow ()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tthis.updateSectionList();\n\t\tthis.isOpenedState = true;\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'company'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\tif (Type.isArray(response.data.sections)\n\t\t\t\t\t\t&& response.data.sections.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.checkInnerWrapHeight();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tsections: this.prepareTrackingSections()\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n}\n\n\n\n\n\n\n\n\n","// @flow\nimport {Util} from 'calendar.util';\nimport {Type, Event, Loc, Tag, Dom} from 'main.core';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {MeetingStatusControl, Reminder} from \"calendar.controls\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {EditForm} from \"./editform\"\nimport {TrackingUsersForm} from \"./trackingusersform\"\nimport {TrackingGroupsForm} from \"./trackinggroupsform\"\nimport {TrackingTypesForm} from \"./trackingtypesform\"\nimport { CalendarSection } from 'calendar.sectionmanager';\n\nexport class SectionInterface extends EventEmitter\n{\n\tname = 'sectioninterface';\n\tuid = null;\n\tDOM = {};\n\tSLIDER_WIDTH = 400;\n\tSLIDER_DURATION = 80;\n\tsliderId = \"calendar:section-slider\";\n\tdenyClose = false;\n\n\tconstructor({calendarContext, readonly, sectionManager})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface');\n\t\tthis.sectionManager = sectionManager;\n\t\tthis.calendarContext = calendarContext;\n\t\tthis.readonly = readonly;\n\t\tthis.BX = Util.getBX();\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.deleteSectionHandlerBinded = this.deleteSectionHandler.bind(this);\n\t\tthis.refreshSectionListBinded = this.refreshSectionList.bind(this);\n\n\t\tif (this.calendarContext.util.config.accessNames)\n\t\t{\n\t\t\tUtil.setAccessNames(this.calendarContext?.util?.config?.accessNames);\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tanimationDuration: this.SLIDER_DURATION,\n\t\t\tevents: {\n\t\t\t\tonCloseByEsc: this.escHide.bind(this),\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.addEventEmitterSubscriptions();\n\t}\n\n\taddEventEmitterSubscriptions()\n\t{\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-edit',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t}\n\n\tdestroyEventEmitterSubscriptions()\n\t{\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-edit',\n\t\t\tthis.refreshSectionListBinded\n\t\t);\n\t}\n\n\tescHide(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId && this.denyClose)\n\t\t{\n\t\t\tevent.denyAction();\n\t\t}\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.closeForms();\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t}\n\t}\n\n\tclose()\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:delete', this.deleteSectionHandlerBinded);\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:pull-delete', this.deleteSectionHandlerBinded);\n\n\t\t\tBX.removeCustomEvent(\"SidePanel.Slider:onCloseComplete\", BX.proxy(this.destroy, this));\n\t\t\tBX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tdelete this.DOM.sectionListWrap;\n\n\t\t\t//this.calendarContext.enableKeyHandler();\n\t\t\tif (this.sectionActionMenu)\n\t\t\t{\n\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateContent()\n\t{\n\t\t// this.BX.onCustomEvent(top, 'onCalendarBeforeCustomSliderCreate');\n\t\tthis.DOM.outerWrap = Dom.create('DIV', {props: {className: 'calendar-list-slider-wrap'}});\n\t\tthis.DOM.titleWrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-title-container'}, html: '<div class=\"calendar-list-slider-title\">' + Loc.getMessage('EC_SECTION_BUTTON') + '</div>'}));\n\n\t\tif (!this.readonly)\n\t\t{\n\t\t\t// #1. Controls\n\t\t\tthis.createAddButton();\n\n\t\t\t// #2. Forms\n\t\t\tthis.DOM.sectionFormWrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-widget calendar-list-slider-form-wrap'},\n\t\t\t\thtml: '<div class=\"calendar-list-slider-card-widget-title\"><span class=\"calendar-list-slider-card-widget-title-text\">' + Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION') + '</span></div>'\n\t\t\t}));\n\n\t\t\tthis.DOM.trackingCompanyFormWrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-widget calendar-list-slider-form-wrap'},\n\t\t\t\thtml: '<div class=\"calendar-list-slider-card-widget-title\"><span class=\"calendar-list-slider-card-widget-title-text\">' + Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP') + '</span></div>'\n\t\t\t}));\n\n\t\t\tthis.DOM.trackingUsersFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t);\n\n\t\t\tthis.DOM.trackingGroupsFormWrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-widget calendar-list-slider-form-wrap'},\n\t\t\t\thtml: '<div class=\"calendar-list-slider-card-widget-title\"><span class=\"calendar-list-slider-card-widget-title-text\">' + Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP') + '</span></div>'\n\t\t\t}));\n\t\t}\n\n\t\t// #3. List of sections\n\t\tthis.createSectionList();\n\n\t\treturn this.DOM.outerWrap;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.sliderId = this.slider.getUrl();\n\t\tthis.DOM.content = this.slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\t//this.BX.html(this.slider.layout.content, this.slider.getData().get(\"sliderContent\"));\n\n\t\t// this.initControls(this.uid);\n\t\t// this.setFormValues();\n\t}\n\n\tcreateSectionList()\n\t{\n\t\tlet title;\n\t\tthis.sliderSections = this.sectionManager.getSections();\n\t\tconst type = this.sectionManager.calendarType;\n\n\t\tif (type === 'user')\n\t\t{\n\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_MY_CALENDARS_LIST');\n\t\t}\n\t\telse if (type === 'group')\n\t\t{\n\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_GROUP_CALENDARS_LIST');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_CALENDARS_LIST');\n\t\t}\n\n\t\tif (this.DOM.sectionListWrap)\n\t\t{\n\t\t\tDom.clean(this.DOM.sectionListWrap);\n\t\t\tDom.adjust(this.DOM.sectionListWrap, {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-widget'},\n\t\t\t\thtml: '<div class=\"calendar-list-slider-card-widget-title\"><span class=\"calendar-list-slider-card-widget-title-text\">' + title + '</span></div>'\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.sectionListWrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-widget'},\n\t\t\t\thtml: '<div class=\"calendar-list-slider-card-widget-title\"><span class=\"calendar-list-slider-card-widget-title-text\">' + title + '</span></div>'\n\t\t\t}));\n\t\t}\n\n\t\tthis.createSectionBlock({\n\t\t\twrap: this.DOM.sectionListWrap,\n\t\t\tsectionList: this.sliderSections.filter(function(section){\n\t\t\t\treturn section.belongsToView() || section.isPseudo();\n\t\t\t})\n\t\t});\n\n\t\t// Company calendar\n\t\tlet sections = this.sliderSections.filter(function(section)\n\t\t{\n\t\t\treturn section.isCompanyCalendar() && !section.belongsToView();\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.sectionListWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-section-title'},\n\t\t\t\thtml: '<span class=\"calendar-list-slider-card-section-title-text\">' + Loc.getMessage('EC_SEC_SLIDER_TITLE_COMP_CAL') + '</span>'\n\t\t\t}));\n\n\t\t\tthis.createSectionBlock({\n\t\t\t\twrap: this.DOM.sectionListWrap,\n\t\t\t\tsectionList: this.sliderSections.filter(function (section)\n\t\t\t\t{\n\t\t\t\t\treturn section.isCompanyCalendar();\n\t\t\t\t})\n\t\t\t});\n\t\t}\n\n\t\t// Users calendars\n\t\tthis.calendarContext.util.getSuperposedTrackedUsers().forEach((user) => {\n\t\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\t\treturn !section.belongsToView()\n\t\t\t\t\t&& section.type === 'user'\n\t\t\t\t\t&& section.data.OWNER_ID === user.ID;\n\t\t\t});\n\n\t\t\tif (sections.length > 0)\n\t\t\t{\n\t\t\t\tthis.DOM.sectionListWrap.appendChild(Dom.create('DIV', {\n\t\t\t\t\tprops: {className: 'calendar-list-slider-card-section-title'},\n\t\t\t\t\thtml: '<span class=\"calendar-list-slider-card-section-title-text\">' + BX.util.htmlspecialchars(user.FORMATTED_NAME) + '</span>'\n\t\t\t\t}));\n\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\twrap: this.DOM.sectionListWrap,\n\t\t\t\t\tsectionList: sections\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\n\t\t// Groups calendars\n\t\tsections = this.sliderSections.filter((section) => {\n\t\t\treturn !section.belongsToView() && section.type === 'group';\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.sectionListWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-list-slider-card-section-title'},\n\t\t\t\thtml: '<span class=\"calendar-list-slider-card-section-title-text\">' + Loc.getMessage('EC_SEC_SLIDER_TITLE_GROUP_CAL') + '</span>'\n\t\t\t}));\n\t\t\tthis.createSectionBlock({\n\t\t\t\twrap: this.DOM.sectionListWrap,\n\t\t\t\tsectionList: sections\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateAddButton()\n\t{\n\t\tif (\n\t\t\tthis.calendarContext.util.config.perm\n\t\t\t&& this.calendarContext.util.config.perm.edit_section\n\t\t)\n\t\t{\n\t\t\tconst addButtonOuter = this.DOM.titleWrap.appendChild(\n\t\t\t\tDom.create('SPAN',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'ui-btn-split ui-btn-light-border'},\n\t\t\t\t\t\tstyle: {marginRight: 0}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t\tthis.DOM.addButton = addButtonOuter.appendChild(Dom.create('SPAN', {props: {className: 'ui-btn-main'}, text: Loc.getMessage('EC_ADD')}));\n\t\t\tthis.DOM.addButtonMore = addButtonOuter.appendChild(Dom.create('SPAN', {props: {className: 'ui-btn-extra'}}));\n\n\t\t\tEvent.bind(this.DOM.addButtonMore, 'click', this.showAddButtonPopup.bind(this));\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showEditSectionForm.bind(this));\n\t\t}\n\t}\n\n\tshowAddButtonPopup()\n\t{\n\t\tif (this.addBtnMenu && this.addBtnMenu.popupWindow && this.addBtnMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.addBtnMenu.close();\n\t\t}\n\n\t\tconst submenuClass = 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label';\n\t\tconst menuItems = [\n\t\t\t\t{\n\t\t\t\t\thtml: '<span>' + Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_TITLE') + '</span>',\n\t\t\t\t\tclassName: submenuClass\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_MENU'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\t\tthis.showEditSectionForm();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: '<span>' + Loc.getMessage('EC_SEC_SLIDER_POPUP_EXIST_TITLE') + '</span>',\n\t\t\t\t\tclassName: submenuClass\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\t\tthis.showTrackingTypesForm();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_USER'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\t\tthis.showTrackingUsersForm();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\t\tthis.showTrackingGroupsForm();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t];\n\n\t\tthis.addBtnMenu = this.BX.PopupMenu.create(\n\t\t\t'add-btn-' + Util.getRandomInt(),\n\t\t\tthis.DOM.addButtonMore,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.addBtnMenu.show();\n\n\t\t//Dom.addClass(_this.sectionField.select, 'active');\n\t\t// this.denySliderClose();\n\n\t\t// top.BX.addCustomEvent(this.addBtnMenu.popupWindow, 'onPopupClose', function()\n\t\t// {\n\t\t// \t_this.allowSliderClose();\n\t\t// });\n\t}\n\n\tcreateSectionBlock({sectionList, wrap})\n\t{\n\t\tif (Type.isArray(sectionList))\n\t\t{\n\t\t\tconst listWrap = wrap.appendChild(\n\t\t\t\tDom.create('DIV', {props: {className: 'calendar-list-slider-widget-content'}}))\n\t\t\t\t\t.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-widget-content-block'}}))\n\t\t\t\t\t.appendChild(Dom.create('UL', {props: {className: 'calendar-list-slider-container'}}));\n\n\t\t\tEvent.bind(listWrap, 'click', this.sectionClickHandler.bind(this));\n\n\t\t\tsectionList.forEach((section) => {\n\n\t\t\t\tif (!section.DOM)\n\t\t\t\t{\n\t\t\t\t\tsection.DOM = {};\n\t\t\t\t}\n\n\t\t\t\tconst sectionId = section.id.toString();\n\t\t\t\tconst li = listWrap.appendChild(Dom.create('LI', {\n\t\t\t\t\tprops: {className: 'calendar-list-slider-item'},\n\t\t\t\t\tattrs: {'data-bx-calendar-section': sectionId}\n\t\t\t\t}));\n\n\t\t\t\tconst checkbox = li.appendChild(Dom.create('DIV', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-list-slider-item-checkbox'\n\t\t\t\t\t\t\t+ (section.isShown() ? ' calendar-list-slider-item-checkbox-checked' : '')\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {backgroundColor: section.color}\n\t\t\t\t}));\n\n\t\t\t\tconst title = li.appendChild(Dom.create('DIV', {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-list-slider-item-name',\n\t\t\t\t\t\ttitle: section.name,\n\t\t\t\t\t},\n\t\t\t\t\ttext: section.name\n\t\t\t\t}));\n\n\t\t\t\tsection.DOM.item = li;\n\t\t\t\tsection.DOM.checkbox = checkbox;\n\t\t\t\tsection.DOM.title = title;\n\n\t\t\t\t//if (sectionId !== 'tasks' || this.calendarContext.util.userIsOwner())\n\t\t\t\t{\n\t\t\t\t\tconst actionCont = li.appendChild(Dom.create('DIV', {\n\t\t\t\t\t\tprops: {className: 'calendar-list-slider-item-actions-container'},\n\t\t\t\t\t\tattrs: {'data-bx-calendar-section-menu': sectionId},\n\t\t\t\t\t\thtml: '<span class=\"calendar-list-slider-item-context-menu\"></span>'\n\t\t\t\t\t}));\n\t\t\t\t\tsection.DOM.actionCont = actionCont;\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\t}\n\n\tsectionClickHandler(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tif (target.getAttribute('data-bx-calendar-section-menu') !== null)\n\t\t\t{\n\t\t\t\tlet sectionId = target.getAttribute('data-bx-calendar-section-menu');\n\t\t\t\tsectionId = sectionId === 'tasks' ? sectionId : parseInt(sectionId);\n\t\t\t\tthis.showSectionMenu(this.sectionManager.getSection(sectionId), target);\n\t\t\t}\n\t\t\telse if(target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tthis.switchSection(this.sectionManager.getSection(target.getAttribute('data-bx-calendar-section')));\n\t\t\t}\n\t\t}\n\t}\n\n\tswitchSection(section)\n\t{\n\t\tconst checkboxNodes = this.DOM.sectionListWrap.querySelectorAll(\n\t\t\t'.calendar-list-slider-item[data-bx-calendar-section=\\''\n\t\t\t+ section.id\n\t\t\t+ '\\'] .calendar-list-slider-item-checkbox'\n\t\t);\n\n\t\tfor (let i = 0; i < checkboxNodes.length; i++)\n\t\t{\n\t\t\tif (section.isShown())\n\t\t\t{\n\t\t\t\tDom.removeClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(checkboxNodes[i], 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (section.isShown())\n\t\t{\n\t\t\tsection.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsection.show();\n\t\t}\n\n\t\t// TODO: should use eventEmtter\n\t\tthis.calendarContext.reload();\n\t}\n\n\tshowSectionMenu (section, menuItemNode)\n\t{\n\t\tconst menuItems = [];\n\t\tconst itemNode = menuItemNode.closest('[data-bx-calendar-section]');\n\t\tif (Type.isElementNode(itemNode))\n\t\t{\n\t\t\tDom.addClass(itemNode, 'active');\n\t\t}\n\n\t\tif (!section.isPseudo() && section.getLink() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_OPEN_LINK'),\n\t\t\t\thref: section.getLink()\n\t\t\t});\n\t\t}\n\n\t\tif (!this.readonly && section.canDo('edit_section') && !section.isPseudo())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({section: section});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.isSuperposed() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.hideSuperposedHandler(section);\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.canBeConnectedToOutlook())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_CONNECT_TO_OUTLOOK'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tsection.connectToOutlook();\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!section.isPseudo() && section.data.EXPORT && section.data.EXPORT.LINK)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ACTION_EXPORT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tconst options = {\n\t\t\t\t\t\tsectionLink: section.data.EXPORT.LINK,\n\t\t\t\t\t\tcalendarPath: this.calendarContext.util.config.path,\n\t\t\t\t\t};\n\t\t\t\t\tif (BX.Calendar.Sync.Interface.IcalSyncPopup.checkPathes(options))\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Calendar.Sync.Interface.IcalSyncPopup.createInstance(options).show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Calendar.Sync.Interface.IcalSyncPopup.showPopupWithPathesError();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.canDo('edit_section') && section.belongsToView() && !section.isPseudo())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_DELETE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tsection.remove();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif ((section.isGoogle() || section.isCalDav()) && section.canDo('edit_section'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_ACTION_REFRESH'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.calendarContext.reload({syncGoogle: true});\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (this.calendarContext.syncInterface && this.calendarContext.syncInterface.syncButton)\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext : Loc.getMessage('EC_ACTION_EXTERNAL_ADJUST'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tthis.calendarContext.syncInterface.syncButton.handleClick();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ACTION_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tsection.hideGoogle();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (section.isPseudo())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({\n\t\t\t\t\t\tsection: section\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext : Loc.getMessage('EC_SEC_TASK_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'showTasks', 'N');\n\n\t\t\t\t\tDom.addClass(section.DOM.item, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.clean(section.DOM.item, true);\n\t\t\t\t\t\tBX.reload();\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (menuItems && menuItems.length > 0)\n\t\t{\n\t\t\tthis.sectionActionMenu = top.BX.PopupMenu.create(\n\t\t\t\t'section-menu-' + Util.getRandomInt(),\n\t\t\t\tmenuItemNode,\n\t\t\t\tmenuItems,\n\t\t\t\t{\n\t\t\t\t\tcloseByEsc : true,\n\t\t\t\t\tautoHide : true,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: 9,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: false\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tthis.sectionActionMenu.show();\n\t\t\tthis.sectionActionMenu.popupWindow.subscribe('onClose', ()=>{\n\t\t\t\tif (Type.isElementNode(itemNode))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(itemNode, 'active');\n\t\t\t\t}\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcloseForms()\n\t{\n\t\tif (this.addBtnMenu)\n\t\t{\n\t\t\tthis.addBtnMenu.close();\n\t\t}\n\n\t\tif (this.editSectionForm)\n\t\t{\n\t\t\tthis.editSectionForm.close();\n\t\t}\n\n\t\tif (this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm.close();\n\t\t}\n\n\t\tif (this.trackingGroupsForm)\n\t\t{\n\t\t\tthis.trackingGroupsForm.close();\n\t\t}\n\n\t\tif (this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm.close();\n\t\t}\n\t}\n\n\tshowEditSectionForm(params ={})\n\t{\n\t\tthis.closeForms();\n\t\tconst formTitleNode = this.DOM.sectionFormWrap.querySelector('.calendar-list-slider-card-widget-title-text');\n\n\t\tthis.editSectionForm = new EditForm({\n\t\t\twrap: this.DOM.sectionFormWrap,\n\t\t\tsectionAccessTasks: this.sectionManager.getSectionAccessTasks(),\n\t\t\tsectionManager: this.sectionManager,\n\t\t\tcloseCallback: () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t}\n\t\t});\n\n\t\tlet showAccessControl = true;\n\t\tif (params.section && (!params.section.belongsToView() || params.section.isPseudo()))\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION_PERSONAL');\n\t\t\tshowAccessControl = false;\n\t\t}\n\t\telse if (params.section && params.section.id)\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION');\n\t\t\tshowAccessControl = params.section.canDo('access');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION');\n\t\t}\n\n\t\tthis.editSectionForm.show({\n\t\t\tshowAccess: showAccessControl,\n\t\t\tsection: params.section || {\n\t\t\t\tcolor: Util.getRandomColor(),\n\t\t\t\taccess: this.sectionManager.getDefaultSectionAccess()\n\t\t\t}\n\t\t});\n\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingTypesForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm = new TrackingTypesForm({\n\t\t\t\twrap: this.DOM.trackingCompanyFormWrap,\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingTypesForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingUsersForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm = new TrackingUsersForm({\n\t\t\t\twrap: this.DOM.trackingUsersFormWrap,\n\t\t\t\ttrackingUsers: this.calendarContext.util.getSuperposedTrackedUsers(),\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingUsersForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingGroupsForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingGroupsForm)\n\t\t{\n\t\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\t\tconst trackingGroups = this.calendarContext.util.getSuperposedTrackedGroups();\n\n\t\t\tsuperposedSections.forEach((section) => {\n\t\t\t\tif (section.getType() === 'group'\n\t\t\t\t\t&& !trackingGroups.includes(section.getOwnerId()))\n\t\t\t\t{\n\t\t\t\t\ttrackingGroups.push(section.getOwnerId());\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.trackingGroupsForm = new TrackingGroupsForm({\n\t\t\t\twrap: this.DOM.trackingGroupsFormWrap,\n\t\t\t\ttrackingGroups: trackingGroups,\n\t\t\t\tsuperposedSections: superposedSections,\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingGroupsForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tdeleteSectionHandler(event)\n\t{\n\t\tif (event && event instanceof Util.getBX().Event.BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst sectionId = parseInt(data.sectionId, 10);\n\n\t\t\tthis.sliderSections.forEach((section, index) => {\n\n\t\t\t\tif (parseInt(section.id) === sectionId && section.DOM && section.DOM.item)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(section.DOM.item, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.clean(section.DOM.item, true);\n\t\t\t\t\t\tthis.sliderSections = BX.util.deleteFromArray(this.sliderSections, index);\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t}\n\n\thideSuperposedHandler(section)\n\t{\n\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\tconst sections = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < superposedSections.length; i++)\n\t\t{\n\t\t\tif (parseInt(section.id) !== parseInt(superposedSections[i].id))\n\t\t\t{\n\t\t\t\tsections.push(parseInt(superposedSections[i].id));\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tsections: sections\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.reload();\n\t\t\t\t},\n\t\t\t\t// Failure\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\trefreshSectionList()\n\t{\n\t\tthis.createSectionList();\n\t}\n}"],"names":["EditForm","options","setEventNamespace","DOM","outerWrap","wrap","sectionAccessTasks","sectionManager","closeCallback","BX","Util","getBX","keyHandlerBinded","keyHandler","bind","params","create","showAccess","accessLink","style","display","accessWrap","Event","document","Dom","addClass","section","color","setColor","setAccess","access","data","ACCESS","name","sectionTitleInput","value","focus","select","isOpenedState","unbind","removeClass","Type","isFunction","querySelector","clean","appendChild","props","className","formFieldsWrap","attrs","type","placeholder","Loc","getMessage","optionsWrap","initSectionColorSelector","initAccessController","buttonsWrap","saveBtn","UI","Button","text","events","click","save","renderTo","checkClose","isCreated","e","keyCode","getKeyCode","close","setWaiting","saveSection","then","colorContWrap","html","colorIcon","colorChangeLink","showSimplePicker","colors","Runtime","clone","getDefaultColorList","innerCont","colorWrap","delegate","simplePickerClick","moreLinkWrap","moreLink","showFullPicker","simplePickerColorWrap","includes","push","i","length","node","backgroundColor","lastActiveNode","util","array_search","simpleColorPopup","PopupWindowManager","getRandomInt","autoHide","closeByEsc","offsetTop","offsetLeft","lightShadow","content","cacheable","setAngle","offset","show","target","findTargetNode","srcElement","isElementNode","getAttribute","fullColorPicker","ColorPicker","bindElement","onColorSelected","popupOptions","zIndex","onPopupClose","open","rowsCount","code","hasOwnProperty","accessRowsCount","insertAccessRow","getAccessName","checkAccessTableHeight","Tag","render","accessTable","accessButton","accessControls","accessTasks","hasClass","entitySelectorDialog","EntitySelectorDialog","targetNode","context","preselectedItems","enableSearch","handleEntitySelectorChanges","targetContainer","body","entities","id","selectMode","showAccessSelectorPopup","removeIcon","setValueCallback","valueNode","innerHTML","Text","encode","title","remove","rowNode","entityList","getSelectedItems","hide","isArray","forEach","entity","convertEntityToAccessCode","setAccessName","debounce","destroy","undefined","taskId","adjust","insertRow","titleNode","insertCell","valueCell","selectNode","checkTableTimeout","clearTimeout","setTimeout","offsetHeight","maxHeight","parseInt","accessPopupMenu","popupWindow","isShown","_this","menuItems","onclick","PopupMenu","randomInt","angle","EventEmitter","TrackingUsersForm","trackingUsers","trackingUserIdList","map","item","ID","CHECKED_CLASS","selectorId","superposedSections","selected","checkInnerWrapHeight","updateSectionList","firstTrackingUserIdList","cssText","innerWrap","selectorWrap","userTagSelector","TagSelector","dialogOptions","handleUserSelectorChanges","sectionsWrap","createButtons","selectedItems","getDialog","entityId","ajax","runAction","userIdList","sections","prepareTrackingSections","response","location","reload","displayError","errors","sectionIndex","checkbox","filter","delayExecution","updateSectionLoader","getLoader","height","updateSectionTimeout","users","user","OWNER_ID","FORMATTED_NAME","createSectionBlock","sectionList","result","listWrap","sectionClick","toString","li","COLOR","NAME","checkHeightTimeout","TrackingGroupsForm","trackingGroupIdList","trackingGroups","groupTagSelector","handleGroupSelectorChanges","groupIdList","TrackingTypesForm","selectGroups","selectUsers","addLinkMessage","SectionInterface","calendarContext","readonly","sliderOnClose","deleteSectionHandlerBinded","deleteSectionHandler","refreshSectionListBinded","refreshSectionList","config","accessNames","setAccessNames","SidePanel","Instance","sliderId","contentCallback","createContent","width","SLIDER_WIDTH","animationDuration","SLIDER_DURATION","onCloseByEsc","escHide","onClose","onCloseComplete","onLoad","onLoadSlider","addEventEmitterSubscriptions","subscribe","unsubscribe","event","getSliderPage","getUrl","denyClose","denyAction","closeForms","destroyEventEmitterSubscriptions","removeCustomEvent","proxy","sectionListWrap","sectionActionMenu","titleWrap","createAddButton","sectionFormWrap","trackingCompanyFormWrap","trackingUsersFormWrap","trackingGroupsFormWrap","createSectionList","slider","getSlider","layout","sliderSections","getSections","calendarType","belongsToView","isPseudo","isCompanyCalendar","getSuperposedTrackedUsers","htmlspecialchars","perm","edit_section","addButtonOuter","marginRight","addButton","addButtonMore","showAddButtonPopup","showEditSectionForm","addBtnMenu","submenuClass","showTrackingTypesForm","showTrackingUsersForm","showTrackingGroupsForm","sectionClickHandler","sectionId","actionCont","showSectionMenu","getSection","switchSection","checkboxNodes","querySelectorAll","menuItemNode","itemNode","closest","getLink","href","canDo","isSuperposed","hideSuperposedHandler","canBeConnectedToOutlook","connectToOutlook","EXPORT","LINK","sectionLink","calendarPath","path","Calendar","Sync","Interface","IcalSyncPopup","checkPathes","createInstance","showPopupWithPathesError","isGoogle","isCalDav","syncGoogle","syncInterface","syncButton","handleClick","hideGoogle","userOptions","top","allowSliderClose","denySliderClose","editSectionForm","trackingUsersForm","trackingGroupsForm","trackingTypesForm","formTitleNode","getSectionAccessTasks","showAccessControl","getRandomColor","getDefaultSectionAccess","getSuperposedSectionList","getSuperposedTrackedGroups","getType","getOwnerId","BaseEvent","getData","index","deleteFromArray"],"mappings":"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"}