{"version":3,"file":"syncinterface.bundle.js","sources":["../src/controls/statusblock.js","../src/auxiliarysyncpanel.js","../src/syncpanelunit.js","../src/syncpanel.js","../src/gridunit.js","../src/controls/connectioncontrols.js","../src/controls/mobilesyncbanner.js","../src/itemstemplate/interfacetemplate.js","../src/itemstemplate/caldavinterfacetemplate.js","../src/itemstemplate/caldavtemplate.js","../src/itemstemplate/exchangetemplate.js","../src/syncwizard/syncwizard.js","../src/syncwizard/syncstageunit.js","../src/syncwizard/googlesyncwizard.js","../src/itemstemplate/googletemplate.js","../src/controls/icloudauthdialog.js","../src/syncwizard/icloudsyncwizard.js","../src/controls/warnsynciclouddialog.js","../src/itemstemplate/icloudtemplate.js","../src/syncwizard/office365syncwizard.js","../src/itemstemplate/office365template.js","../src/itemstemplate/mactemplate.js","../src/itemstemplate/outlooktemplate.js","../src/itemstemplate/yandextemplate.js","../src/itemstemplate/mobileinterfacetemplate.js","../src/itemstemplate/androidtemplate.js","../src/itemstemplate/iphonetemplate.js","../src/controls/icalsyncpopup.js","../src/controls/aftersynctour.js"],"sourcesContent":["// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {SyncStatusPopup} from \"calendar.sync.manager\";\n\nexport default class StatusBlock\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connections = options.connections;\n\t\tthis.withStatusLabel = options.withStatusLabel;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t\tthis.popupId = options.popupId;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tthis.status = status;\n\n\t\treturn this;\n\t}\n\n\tsetConnections(connections)\n\t{\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n\n\tgetContent()\n\t{\n\t\tlet statusInfoBlock;\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-success calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_SUCCESS')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-danger calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_ALERT')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-primary calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_NOT_CONNECTED')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tstatusInfoBlock.addEventListener('mouseenter', () => {\n\t\t\tthis.handlerMouseEnter(statusInfoBlock);\n\t\t});\n\n\t\tstatusInfoBlock.addEventListener('mouseleave', () => {\n\t\t\tthis.handlerMouseLeave();\n\t\t});\n\n\t\tthis.statusBlock = Tag.render `\n\t\t\t<div class=\"calendar-sync-status-block\" id=\"calendar-sync-status-block\">\n\t\t\t\t${this.getStatusTextLabel()}\n\t\t\t\t${statusInfoBlock}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.statusBlock;\n\t}\n\n\tgetStatusTextLabel()\n\t{\n\t\treturn this.withStatusLabel\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"calendar-sync-status-subtitle\">\n\t\t\t\t\t<span data-hint=\"\"></span>\n\t\t\t\t\t<span class=\"calendar-sync-status-text\">${Loc.getMessage('LABEL_STATUS_INFO')}:</span>\n\t\t\t\t</div>`\n\t\t\t: ''\n\t\t;\n\t}\n\n\thandlerMouseEnter(statusBlock)\n\t{\n\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\t\tthis.showPopup(statusBlock);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.statusBlockEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.statusBlockLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tshowPopup(node)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tthis.popup = this.getPopup(node);\n\t\t\tthis.popup.show();\n\n\t\t\tthis.addPopupHandlers();\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\taddPopupHandlers()\n\t{\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', () =>\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tclearTimeout(this.statusBlockLeaveTimeout);\n\t\t});\n\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () =>\n\t\t{\n\t\t\tthis.hidePopup();\n\t\t});\n\t}\n\n\tgetPopup(node)\n\t{\n\t\treturn SyncStatusPopup.createInstance({\n\t\t\tconnections: this.connections,\n\t\t\twithUpdateButton: this.popupWithUpdateButton,\n\t\t\tnode: node,\n\t\t\tid: this.popupId,\n\t\t});\n\t}\n\n\trefresh(status, connections)\n\t{\n\t\tthis.status = status;\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n}","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache} from \"main.core\";\nimport StatusBlock from \"./controls/statusblock\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\n\nexport default class AuxiliarySyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:auxiliary-sync-slider';\n\tSLIDER_WIDTH = 684;\n\tLOADER_NAME = \"calendar:loader\";\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\n\t\tthis.statusBlockEnterTimeout = null;\n\t\tthis.statusBlockLeaveTimeout = null;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory:false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.setGridContent();\n\t\t\t\t},\n\t\t\t\t// onMessage: (event) => {\n\t\t\t\t// \tif (event.getEventId() === 'refreshSliderGrid')\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.refreshData();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t// onClose: (event) => {\n\t\t\t\t// \tBX.SidePanel.Instance.postMessageTop(window.top.BX.SidePanel.Instance.getTopSlider(), \"refreshCalendarGrid\", {});\n\t\t\t\t// },\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap\">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t${this.getMobileHeader()}\n\t\t\t\t${this.getMobileContentWrapper()}\n\t\t\t\t${this.getWebHeader()}\n\t\t\t\t${this.getWebContentWrapper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t${this.getMainHeader()}\n\t\t\t\t${this.getStatusBlockContent(this.getConnections())}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetMainHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mainHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"calendar-sync-header-text\">${Loc.getMessage('SYNC_CALENDAR_HEADER_NEW')}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t<div id=\"calendar-sync-mobile\" class=\"calendar-sync-mobile\"></div>\n\t\t`;\n\t\t});\n\n\t}\n\n\tgetWebContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div id=\"calendar-sync-web\" class=\"calendar-sync-web\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_MOBILE_HEADER')}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWebHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_WEB_HEADER')}</div>\n\t\t`;\n\t\t});\n\t}\n\n\tgetStatusBlockContent(connections)\n\t{\n\t\tthis.statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: this.status,\n\t\t\tconnections: connections,\n\t\t\twithStatusLabel: true,\n\t\t\tpopupWithUpdateButton: true,\n\t\t\tpopupId: 'calendar-syncPanel-status',\n\t\t});\n\n\t\tthis.statusBlockContent =  this.statusBlock.getContent()\n\t\treturn this.statusBlockContent;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsetGridContent()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\tthis.showWebGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'web';\n\t\t}));\n\n\t\tthis.showMobileGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'mobile';\n\t\t}));\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\tshowMobileGridContent(items)\n\t{\n\t\tconst wrapper = this.getMobileContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems:  items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio:  \"55%\",\n\t\t\titemMinWidth:  180,\n\t\t\ttileMargin:  7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tthis.blockStatusContent = this.statusBlock.refresh(status, this.getConnections()).getContent();\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.setGridContent();\n\t}\n}","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Event, Loc, Tag, Type, Text } from 'main.core';\n\nexport default class SyncPanelUnit\n{\n\tlogoClassName = '';\n\n\tconstructor(options)\n\t{\n\t\tthis.options = options;\n\t\tthis.connectionProvider = this.options.connectionProvider;\n\t}\n\n\tgetConnectionTemplate()\n\t{\n\t\tif (!this.connectionTemplate)\n\t\t{\n\t\t\tthis.connectionTemplate = this.connectionProvider.getClassTemplateItem().createInstance(this.connectionProvider);\n\t\t}\n\t\t\n\t\treturn this.connectionTemplate;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.unitNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-item\">\n\t\t\t\t<div class=\"calendar-sync__calendar-item--logo\">\n\t\t\t\t\t${this.getLogoNode()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__calendar-item--container\">\n\t\t\t\t\t<div class=\"calendar-sync__calendar-item--title\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getSyncInfoWrap()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonsWrap()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitNode;\n\t}\n\n\tgetLogoNode()\n\t{\n\t\treturn Tag.render`<div class=\"calendar-sync__calendar-item--logo-image ${this.connectionProvider.getSyncPanelLogo()}\"></div>`;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.connectionProvider.getSyncPanelTitle();\n\t}\n\n\tgetSyncInfoWrap()\n\t{\n\t\tthis.syncInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t<span data-role=\"sync_info_text\" />\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncInfoWrap;\n\t}\n\n\tsetSyncStatus(mode)\n\t{\n\t\tthis.unitNode.className = 'calendar-sync__calendar-item';\n\t\tswitch (mode)\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_REFUSED:\n\t\t\t\tDom.addClass(this.unitNode, '--refused');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED'), false);\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tDom.addClass(this.unitNode, '--complete');\n\t\t\t\tthis.setSyncInfoStatusText(this.formatSyncTime(this.connectionProvider.getSyncDate()));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tDom.addClass(this.unitNode, '--error');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_ERROR'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tDom.addClass(this.unitNode, '--pending');\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tDom.addClass(this.unitNode, '--active');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_SYNCHRONIZING'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tif (this.connectionProvider.isGoogleApplicationRefused)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.unitNode, '--off');\n\t\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED'), false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetSyncInfoStatusText(text, upperCase = true)\n\t{\n\t\tconst syncInfoStatusText = this.syncInfoWrap.querySelector('[data-role=\"sync_info_text\"]');\n\t\tif (Type.isElementNode(syncInfoStatusText))\n\t\t{\n\t\t\tsyncInfoStatusText.innerHTML = upperCase ? Text.encode(text).toUpperCase() : Text.encode(text);\n\t\t}\n\t}\n\n\tgetButtonsWrap()\n\t{\n\t\tif (!Type.isElementNode(this.buttonsWrap))\n\t\t{\n\t\t\tthis.buttonsWrap = Tag.render`<div class=\"calendar-sync__calendar-item--buttons\">\n\t\t\t\t${this.getButton()}\n\t\t\t\t${this.getMoreButton()}\n\t\t\t</div>`;\n\t\t}\n\n\t\treturn this.buttonsWrap;\n\t}\n\n\trefreshButton()\n\t{\n\t\tDom.clean(this.buttonsWrap);\n\t\tthis.button = this.buttonsWrap.appendChild(this.getButton());\n\t\tthis.moreButton = this.buttonsWrap.appendChild(this.getMoreButton());\n\t}\n\n\tgetButton()\n\t{\n\t\tif (this.connectionProvider.isGoogleApplicationRefused)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tswitch (this.connectionProvider.getStatus())\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-success\" class=\"ui-btn ui-btn-icon-success ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-failed\" class=\"ui-btn ui-btn-icon-fail ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-pending\" class=\"ui-btn ui-btn-disabled ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_PENDING')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_NOT_CONNECTED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tEvent.bind(this.button, 'click', this.handleItemClick.bind(this));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round ui-btn-clock ui-btn-disabled\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.button;\n\t}\n\n\tgetMoreButton()\n\t{\n\t\tthis.moreButton = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-role=\"more-button\" \n\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-light-border calendar-sync__calendar-item--more\"\n\t\t\t></div>\n\t\t`;\n\n\t\tEvent.bind(this.moreButton, 'click', this.handleItemClick.bind(this));\n\n\t\treturn this.moreButton;\n\t}\n\n\thandleItemClick(e)\n\t{\n\t\tconst status = this.connectionProvider.getStatus();\n\n\t\tif ([this.connectionProvider.STATUS_SUCCESS, this.connectionProvider.STATUS_FAILED, this.connectionProvider.STATUS_REFUSED].includes(status))\n\t\t{\n\t\t\tif (this.connectionProvider.hasMenu())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.showMenu(this.button);\n\t\t\t}\n\t\t\telse if (this.connectionProvider.getConnectStatus())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openActiveConnectionSlider(this.connectionProvider.getConnection());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openInfoConnectionSlider();\n\t\t\t}\n\t\t}\n\t\telse if(status === this.connectionProvider.STATUS_NOT_CONNECTED)\n\t\t{\n\t\t\tthis.getConnectionTemplate().handleConnectButton();\n\t\t}\n\t}\n\n\tformatSyncTime(date)\n\t{\n\t\tconst now = new Date();\n\t\tlet timestamp = date;\n\t\tif (Type.isDate(date))\n\t\t{\n\t\t\ttimestamp = Math.round(date.getTime() / 1000);\n\t\t\tconst secondsAgo = parseInt((now - date) / 1000);\n\t\t\tif (secondsAgo < 60)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t\t[\"i\" , \"iago\"],\n\t\t\t\t[\"H\", \"Hago\"],\n\t\t\t\t[\"d\", \"dago\"],\n\t\t\t\t[\"m100\", \"mago\"],\n\t\t\t\t[\"m\", \"mago\"],\n\t\t\t\t[\"-\", \"\"]\n\t\t\t],\n\t\t\ttimestamp\n\t\t);\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache, Event} from \"main.core\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\nimport AuxiliarySyncPanel from \"./auxiliarysyncpanel\";\nimport SyncPanelUnit from './syncpanelunit';\n\nexport default class SyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:sync-slider';\n\tHELPDESK_CODE = 11828176;\n\tSLIDER_WIDTH = 770;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\t\tthis.BX = window.top.BX || window.BX;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displayConnectionUnits();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t<div class=\"calendar-sync__content\">\n\t\t\t\t${this.getUnitsContentWrapper()}\n\t\t\t\t${this.getFooterWrapper()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeaderWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__header\">\n\t\t\t\t<div class=\"calendar-sync__header-logo\"></div>\n\t\t\t\t<div class=\"calendar-sync__header-container\">\n\t\t\t\t\t<div class=\"calendar-sync__header-title\">${Loc.getMessage('CAL_SYNC_TITLE_NEW')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__header-sub-title\">${Loc.getMessage('CAL_SYNC_SUB_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUnitsContentWrapper()\n\t{\n\t\tthis.unitsContentWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-list\">\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitsContentWrapper;\n\t}\n\n\tgetFooterWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left\">\n\t\t\t\t${this.getExtraInfoWithCheckIcon()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left--double\">\n\t\t\t\t${this.getOpenAuxiliaryPanelLink()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-left--double\">\n\t\t\t\t${this.getOpenHelpLink()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetOpenAuxiliaryPanelLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">\n\t\t\t\t${Loc.getMessage('CAL_OPEN_AUXILIARY_PANEL')}\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\t\tthis.auxiliarySyncPanel = new AuxiliarySyncPanel({\n\t\t\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t});\n\t\t\t\tthis.auxiliarySyncPanel.openSlider();\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetOpenHelpLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">${Loc.getMessage('CAL_SHOW_SYNC_HELP')}</divclass>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tif(this.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.BX.Helper.show(\"redirect=detail&code=\" + this.HELPDESK_CODE);\n\t\t\t}\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tdisplayConnectionUnits()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel || item.connected;\n\t\t});\n\n\t\tthis.renderConnectionUnits(items);\n\t}\n\n\trenderConnectionUnits(providers)\n\t{\n\t\tDom.clean(this.unitsContentWrapper);\n\t\tproviders.forEach((provider) => {\n\t\t\tconst interfaceUnit = new SyncPanelUnit({connectionProvider: provider});\n\t\t\tprovider.setInterfaceUnit(interfaceUnit);\n\t\t\tinterfaceUnit.renderTo(this.unitsContentWrapper);\n\t\t\tinterfaceUnit.setSyncStatus(provider.getStatus());\n\t\t});\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.displayConnectionUnits();\n\t\tthis.auxiliarySyncPanel.refresh(status, connectionsProviders);\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Tag } from \"main.core\";\n\nexport default class GridUnit extends BX.TileGrid.Item\n{\n\tconstructor(item)\n\t{\n\t\tsuper({\n\t\t\tid: item.type,\n\t\t});\n\t\tthis.item = item;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.gridUnit = Tag.render`<div class=\"calendar-sync-item ${this.getAdditionalContentClass()}\" style=\"${this.getContentStyles()}\">\n\t\t\t<div class=\"calendar-item-content\">\n\t\t\t\t${this.getImage()}\n\t\t\t\t${this.getTitle()}\n\t\t\t\t${(this.isActive() ? this.getStatus() : '')}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.gridUnit.addEventListener('click', this.onClick.bind(this));\n\n\t\treturn this.gridUnit;\n\t}\n\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-title\">${BX.util.htmlspecialchars(this.item.getGridTitle())}</div>`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetImage()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-item-image\">\n\t\t\t\t<div class=\"calendar-sync-item-image-item\" style=\"background-image: ${'url(' + this.item.getGridIcon() + ')'}\"></div>\n\t\t\t</div>`;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-status\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.item.getConnectStatus();\n\t}\n\n\tgetAdditionalContentClass()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\tif (this.item.getSyncStatus())\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-selected';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-failed';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetContentStyles()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn 'background-color:' + this.item.getGridColor() + ';';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.item.hasMenu())\n\t\t{\n\t\t\tthis.item.showMenu(this.gridUnit);\n\t\t}\n\t\telse if (this.item.getConnectStatus())\n\t\t{\n\t\t\tthis.item.openActiveConnectionSlider(this.item.getConnection());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.item.openInfoConnectionSlider();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\n\nexport default class ConnectionControls\n{\n\tuserName = null;\n\tserver = null;\n\tconnectionName = null;\n\n\tconstructor(options = null)\n\t{\n\t\tthis.addButtonText = Loc.getMessage('CAL_UPPER_CONNECT');\n\t\tthis.removeButtonText = Loc.getMessage('CAL_UPPER_DISCONNECT');\n\t\tthis.saveButtonText = Loc.getMessage('CAL_UPPER_SAVE');\n\n\t\tif (options !== null)\n\t\t{\n\t\t\tthis.userName = BX.util.htmlspecialchars(options.userName);\n\t\t\tthis.server = BX.util.htmlspecialchars(options.server);\n\t\t\tthis.connectionName = BX.util.htmlspecialchars(options.connectionName);\n\t\t}\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-form\"></div>\n\t\t`;\n\t}\n\n\tgetForm()\n\t{\n\t\treturn Tag.render`\n\t\t\t<form class=\"calendar-sync-slider-form\" action=\"\">\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_NAME')}\\\" name=\"name\" value=\"${this.connectionName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_SERVER_ADDRESS')}\\\" name=\"server\" value=\"${this.server || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_USER_NAME')}\\\" name=\"user_name\" value=\"${this.userName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" name=\"password\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_PASSWORD')}\\\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetAddButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"connect-button\" class=\"ui-btn ui-btn-light-border\">${this.addButtonText}</button>\n\t\t`;\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"disconnect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.removeButtonText}</button>\n\t\t`;\n\t}\n\n\tgetSaveButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"edit-connect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.saveButtonText}</button>\n\t\t`;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-form-btn\"></div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\nimport { Type, Tag, Loc, Runtime, Dom } from 'main.core';\nimport { Util } from \"calendar.util\";\nimport { Popup } from 'main.popup';\n\nexport default class MobileSyncBanner\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tQRCODE_SIZE = 186;\n\tQRCODE_COLOR_LIGHT = '#ffffff';\n\tQRCODE_COLOR_DARK = '#000000';\n\tQRCODE_WRAP_CLASS = 'calendar-sync-slider-qr-container';\n\tQRC = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type;\n\t\tthis.helpDeskCode = options.helpDeskCode || '11828176';\n\t\tthis.alreadyConnectedToNew = this.type === 'android'\n\t\t \t? Util.isGoogleConnected()\n\t\t\t: Util.isIcloudConnected()\n\t\t;\n\t}\n\n\tshow()\n\t{\n\t}\n\n\tshowInPopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync-qr-popup',\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 580,\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t});\n\t\tthis.popup.show();\n\n\t\tthis.initQrCode().then(this.drawQRCode.bind(this));\n\t}\n\n\tclose()\n\t{\n\t\tthis.popup.close();\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div class=\"calendar-sync-qr-popup-content\">\n\t\t\t\t<div class=\"calendar-sync-qr-popup-title\">\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-content\">\n\t\t\t\t\t<img class=\"calendar-sync-slider-phone-img\" src=\"/bitrix/images/calendar/sync/qr-background.svg\" alt=\"\">\n\t\t\t\t\t${this.getQrContainer()}\n\t\t\t\t\t${this.getInstructionContainer()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tUtil.initHintNode(this.DOM.container.querySelector('.calendar-notice-mobile-banner'));\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetQrContainer()\n\t{\n\t\tif (!this.DOM.qrContainer)\n\t\t{\n\t\t\tthis.DOM.qrContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-qr\">\n\t\t\t\t\t<div class=\"${this.QRCODE_WRAP_CLASS}\">${Util.getLoader(this.QRCODE_SIZE)}</div>\n\t\t\t\t\t<span class=\"calendar-sync-slider-logo\"></span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.qrContainer;\n\t}\n\n\tgetInstructionContainer()\n\t{\n\t\tif (!this.DOM.instructionContainer)\n\t\t{\n\t\t\tthis.DOM.instructionContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-instruction\">\n\t\t\t\t\t<!--<div class=\"calendar-sync-slider-instruction-subtitle\"></div>-->\n\t\t\t\t\t${this.getInstructionTextContainer()}\n\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-notice\">${Loc.getMessage('SYNC_MOBILE_NOTICE')}</div>\n\t\t\t\t\t<a href=\"javascript:void(0);\" \n\t\t\t\t\t\t\tonclick=\"BX.Helper.show('redirect=detail&code=' + ${this.getHelpdeskCode()},{zIndex:3100,}); event.preventDefault();\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_ABOUT_BTN')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.instructionContainer;\n\t}\n\n\tgetInstructionTextContainer()\n\t{\n\t\tif (!this.DOM.instructionTextContainer)\n\t\t{\n\t\t\tthis.DOM.instructionTextContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-instruction-title\">\n\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_NOTICE_HOW_TO') + ' '} \n\t\t\t\t\t${this.type !== 'iphone' ? this.getAndroidHintIcon() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.instructionTextContainer;\n\t}\n\n\tgetAndroidHintIcon()\n\t{\n\t\tif (!this.DOM.androidHintIcon)\n\t\t{\n\t\t\tthis.DOM.androidHintIcon = Tag.render`\n\t\t\t<span \n\t\t\t\tclass=\"calendar-notice-mobile-banner\" \n\t\t\t\tdata-hint=\"${Loc.getMessage('CAL_ANDROID_QR_CODE_HINT')}\" \n\t\t\t\tdata-hint-no-icon=\"Y\">\n\t\t\t</span>`;\n\t\t}\n\n\t\treturn this.DOM.androidHintIcon;\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.DOM.container.querySelector('.' + this.QRCODE_WRAP_CLASS);\n\t}\n\n\tinitQrCode()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension(['main.qrcode']).then(() => {\n\t\t\t\tif (typeof QRCode !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tdrawQRCode(wrap)\n\t{\n\t\tif (!Type.isDomNode(wrap))\n\t\t{\n\t\t\twrap = this.getInnerContainer();\n\t\t}\n\n\t\tthis.getMobileSyncUrl().then((link) => {\n\t\t\tDom.clean(wrap);\n\t\t\tthis.QRC = new QRCode(wrap, {\n\t\t\t\ttext: link,\n\t\t\t\twidth: this.getSize(),\n\t\t\t\theight: this.getSize(),\n\t\t\t\tcolorDark : this.QRCODE_COLOR_DARK,\n\t\t\t\tcolorLight : this.QRCODE_COLOR_LIGHT,\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.H\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn Loc.getMessage('SYNC_BANNER_MOBILE_TITLE');\n\t}\n\n\tgetMobileSyncUrl()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAuthLink', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.type ? 'slider' : 'banner',\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.data.link);\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSize()\n\t{\n\t\treturn this.QRCODE_SIZE;\n\t}\n\n\tgetDetailHelpUrl()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.getHelpdeskCode();\n\t}\n\n\tgetHelpdeskCode()\n\t{\n\t\treturn this.helpDeskCode;\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Dom, Event, Type } from 'main.core';\nimport { EventEmitter } from \"main.core.events\";\nimport { Util } from 'calendar.util';\n\nexport class InterfaceTemplate extends EventEmitter\n{\n\tstatic SLIDER_WIDTH = 606;\n\tsliderWidth = 840;\n\tstatic SLIDER_PREFIX = 'calendar:connection-sync-';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.InterfaceTemplate');\n\n\t\tthis.title = options.title;\n\t\tthis.helpdeskCode = options.helpDeskCode;\n\t\tthis.titleInfoHeader = options.titleInfoHeader;\n\t\tthis.descriptionInfoHeader = options.descriptionInfoHeader;\n\t\tthis.titleActiveHeader = options.titleActiveHeader;\n\t\tthis.descriptionActiveHeader = options.descriptionActiveHeader;\n\t\tthis.sliderIconClass = options.sliderIconClass;\n\t\tthis.iconPath = options.iconPath;\n\t\tthis.iconLogoClass = options.iconLogoClass || '';\n\t\tthis.color = options.color;\n\t\tthis.provider = options.provider;\n\t\tthis.connection = options.connection;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t}\n\n\tstatic createInstance(provider, connection = null)\n\t{\n\t\treturn new this(provider, connection);\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tthis.disconnectButton = this.getDisconnectButton();\n\t\tEvent.bind(this.disconnectButton, 'click', this.handleDisconnectButton.bind(this));\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.disconnectButton}\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__scope\">\n\t\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t\t${this.getContentActiveBody()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentActiveBodySectionsHeader()}\n\t\t\t${this.getContentActiveBodySectionsManager()}\n\t\t`;\n\t}\n\n\tshowHelp(event)\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(\"redirect=detail&code=\" + this.helpdeskCode);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHelpdeskLink()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.helpdeskCode;\n\t}\n\n\tgetHeaderTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.iconLogoClass;\n\t}\n\n\tgetContentInfoBodyHeader()\n\t{\n\t\tif (!this.infoBodyHeader)\n\t\t{\n\t\t\tthis.infoBodyHeader = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-flex-wrap\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t\t\t${this.titleInfoHeader}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t\t${this.descriptionInfoHeader}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getContentInfoBodyHeaderHelper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.infoBodyHeader;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoWarning()\n\t{\n\t\tconst mobileSyncButton = this.getMobileSyncControlButton();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonOtherSyncInfo.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonConnectClick.bind(this));\n\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-section-warning calendar-sync-slider-section-col\">\n\t\t\t\t\t<div class=\"ui-alert ui-alert-warning ui-alert-icon-info\">\n\t\t\t\t\t\t<span class=\"ui-alert-message\">${this.warningText}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-button-warning\">${mobileSyncButton}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetMobileSyncControlButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-sm ui-btn-round\">\n\t\t\t\t${this.mobileSyncButtonText}\n\t\t\t</button>\n\t\t`\n\t}\n\n\tsetProvider(provider)\n\t{\n\t\tthis.provider = provider;\n\t}\n\n\t// TODO: move logic to provider\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.removeConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'Y', //by default\n\t\t\t}\n\t\t})\n\t\t.then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\trunUpdateInfo()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setSectionStatus', {\n\t\t\tdata: {\n\t\t\t\tsectionStatus: this.sectionStatusObject,\n\t\t\t},\n\t\t})\n\t\t.then((response) => {\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n\n\trefresh(connection)\n\t{\n\t\tthis.connection = connection;\n\t\tif (this.connection)\n\t\t{\n\t\t\tthis.statusBlock\n\t\t\t\t.setStatus(this.connection.getStatus())\n\t\t\t\t.setConnections([this.connection]);\n\t\t}\n\t\t\n\t\tDom.replace(document.getElementById('status-info-block'), this.statusBlock.getContent());\n\t}\n\n\thandleConnectButton()\n\t{\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border calendar-sync__account-btn\">${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}</button>\n\t\t`;\n\t}\n\n\tgetSyncStatusClassName()\n\t{\n\t\treturn this.provider.getStatus() === \"success\" ? '--complete' : '--error';\n\t}\n\t\n\tgetContentActiveBodySectionsHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">${Loc.getMessage('CAL_SYNC_SELECTED_LIST_TITLE')}</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodySectionsManager()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-check-list\">\n\t\t\t\t${this.getContentActiveBodySections()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t}\n\n\tgetContentActiveBodySections()\n\t{\n\t\tconst sectionList = [];\n\t\tthis.sectionList.forEach(section => {\n\t\t\tsectionList.push(Tag.render`\n\t\t\t\t<label class=\"calendar-sync__account-check-list-label\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"calendar-sync__account-check-list-input\"\n\t\t\t\t\t\tvalue=\"${BX.util.htmlspecialchars(section['ID'])}\" \n\t\t\t\t\t\tonclick=\"${this.onClickCheckSection.bind(this)}\" ${section['ACTIVE'] === 'Y' ? 'checked' : ''}/>\n\t\t\t\t\t<span class=\"calendar-sync__account-check-list-text\">${BX.util.htmlspecialchars(section['NAME'])}</span>\n\t\t\t\t</label>\n\t\t\t`);\n\t\t});\n\n\t\treturn sectionList;\n\t}\n\n\tshowUpdateSectionListNotification()\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CAL_SYNC_CALENDAR_LIST_UPDATED')\n\t\t)\n\t}\n\n\thandleDisconnectButton(event)\n\t{\n\t\tif (Type.isElementNode(this.disconnectButton))\n\t\t{\n\t\t\tDom.addClass(this.disconnectButton, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t}\n\t\tevent.preventDefault();\n\t\t// this.provider.removeConnection();\n\t\tthis.sendRequestRemoveConnection(this.connection.getId());\n\t}\n\t\n\tdeactivateConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.deactivateConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'N', //by default\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tthis.provider.closeSlider();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\t\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {InterfaceTemplate} from './interfacetemplate';\nimport {Dom, Loc, Tag} from \"main.core\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\n\nexport class CaldavInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestAddConnection(form);\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\tconst formObject = new ConnectionControls({\n\t\t\tserver: this.connection.addParams.server,\n\t\t\tuserName: this.connection.addParams.userName,\n\t\t\tconnectionName: this.connection.connectionName,\n\t\t});\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst bodyHeader = this.getContentActiveBodyHeader();\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tsendRequestAddConnection(form)\n\t{\n\t\tconst fd = new FormData(form);\n\t\tBX.ajax.runAction('calendar.api.syncajax.addConnection', {\n\t\t\tdata: {\n\t\t\t\tname: fd.get('name'),\n\t\t\t\tserver: fd.get('server'),\n\t\t\t\tuserName: fd.get('user_name'),\n\t\t\t\tpass: fd.get('password'),\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tBX.reload();\n\t\t}, response => {\n\t\t\tconst button = form.querySelector('#connect-button');\n\t\t\tthis.showAlertPopup(response.errors[0], button);\n\t\t});\n\t}\n\n\tshowAlertPopup(alert, button)\n\t{\n\t\tlet message = '';\n\t\tif (alert.code === 'incorrect_parameters')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_INCORRECT_PARAMETERS');\n\t\t}\n\t\telse if (alert.code === 'tech_problem')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_TECH_PROBLEM');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_DEFAULT');\n\t\t}\n\n\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\tmessage: message,\n\t\t\ttitle: alert.message,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tokCaption: Loc.getMessage('CAL_TEXT_BUTTON_RETURN_TO_SETTINGS'),\n\t\t\tminWidth: 358,\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: 3021,\n\t\t\t\theight: 166,\n\t\t\t\twidth: 358,\n\t\t\t\tclassName: 'calendar-alert-popup-connection'\n\t\t\t},\n\t\t\tonOk: () => {\n\t\t\t\tDom.removeClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class CaldavTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_CALDAV\"),\n\t\t\thelpDeskCode: '5697365',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_CALDAV_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_CALDAV_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALDAV_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_CALDAV_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-caldav',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\tcolor: '#1eae43',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport { Util } from 'calendar.util';\n\nexport default class ExchangeTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_EXCHANGE\"),\n\t\t\thelpDeskCode: '9860971',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_EXCHANGE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_EXCHANGE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_EXCHANGE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office',\n\t\t\ticonLogoClass: '--exchange',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\tcolor: '#54d0df',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBody()}\n\t\t\t${this.getHelpdeskBlock()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetContentBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">\n\t\t\t\t${Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHelpdeskBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\n\nimport { Cache, Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncWizard extends EventEmitter\n{\n\tTYPE = 'undefined';\n\tSLIDER_NAME = 'calendar:sync-wizard-slider';\n\tSLIDER_WIDTH = 450;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\tsyncStagesList = [];\n\taccountName = '';\n\tHELPDESK_CODE = 11828176;\n\tMIN_UPDATE_STATE_DELAY = 1500; // in ms\n\tCONFETTI_DELAY = 1000;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncWizard');\n\n\t\tthis.BX = window.top.BX || window.BX;\n\n\t\tthis.pullWizardEventHandler = this.handlePullNewEvent.bind(this);\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t\tthis.logoIconClass = '';\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.SLIDER_NAME, {\n\t\t\tcontentCallback: slider => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displaySyncStages();\n\t\t\t\t\tthis.bindButtonsHandlers();\n\t\t\t\t},\n\t\t\t\tonDestroy: this.handleCloseWizard.bind(this)\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.syncIsFinished = false;\n\t\tthis.errorStatus = false;\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t${this.getTitleWrapper()}\n\t\t\t\t\t\t${this.getSyncStagesWrapper()}\n\t\t\t\t\t\t${this.getInfoStatusWrapper()}\n\t\t\t\t\t\t${this.getErrorWrapper()}\n\t\t\t\t\t\t${this.getFinalCheckWrapper()}\n\t\t\t\t\t\t${this.getHelpLinkWrapper()}\n\t\t\t\t\t\t${this.getButtonWrapper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleWrapper()\n\t{\n\t\tthis.syncTitleWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__account\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${this.getAccountNameNode()}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${this.getActiveStatusNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncTitleWrapper;\n\t}\n\n\tgetSyncStagesWrapper()\n\t{\n\t\tthis.syncStagesWrapper = Tag.render`<div class=\"calendar-sync-stages-wrap\"></div>`;\n\t\treturn this.syncStagesWrapper;\n\t}\n\n\tgetInfoStatusWrapper()\n\t{\n\t\tthis.infoStatusWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__notification\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-title\">${Loc.getMessage('CAL_INFO_STATUS_CONG_1')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">${Loc.getMessage('CAL_INFO_STATUS_CONG_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.infoStatusWrapper;\n\t}\n\n\tgetErrorWrapper()\n\t{\n\t\tthis.errorWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__error\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">\n\t\t\t\t\t\t<div class=\"calendar-sync__notification-message-inner\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_1')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.errorWrapper;\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\tthis.buttonWrapper = Tag.render`\n\t\t\t<div style=\"display: none\" class=\"calendar-sync__content-block --align-center\">\n\t\t\t\t<a class=\"ui-btn ui-btn-lg ui-btn-primary ui-btn-round\" data-role=\"continue_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_CONTINUE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"everything_is_fine_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_EVERYTHING_IS_FINE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"close_button\">\n\t\t\t\t\t${Loc.getMessage('CAL_ERROR_CLOSE')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.buttonWrapper;\n\t}\n\n\tgetNewEventCardWrapper()\n\t{\n\t\tthis.newEventCardWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.newEventCardWrapper;\n\t}\n\n\tgetSkeletonWrapper()\n\t{\n\t\tthis.skeletonWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --skeleton\">\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-box\">\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-inline-box\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${this.getSkeletonTitle()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t\treturn this.skeletonWrapper;\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn '';\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAccountNameNode()\n\t{\n\t\tif (!Type.isElementNode(this.accountNameNode))\n\t\t{\n\t\t\tthis.accountNameNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-title\">${this.getAccountName()}</div>\n\t\t`;\n\t\t}\n\t\treturn this.accountNameNode;\n\t}\n\n\tsetAccountName(value)\n\t{\n\t\tthis.accountName = value;\n\t}\n\n\tgetAccountName()\n\t{\n\t\treturn this.accountName;\n\t}\n\n\tgetActiveStatusNode()\n\t{\n\t\tif (!Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode = Tag.render`\n\t\t\t\t<span class=\"calendar-active-status-node-carousel\">\n\t\t\t\t\t<span class=\"calendar-active-status-node-phrase\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS')}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t`;\n\n\t\t\tthis.startStatusCarousel(this.activeStatusNode);\n\t\t}\n\n\t\treturn this.activeStatusNode;\n\t}\n\n\tstartStatusCarousel(statusNode)\n\t{\n\t\tconst progressStatuses = [\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_FIRST'),\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_SECOND')\n\t\t];\n\n\t\tlet dotCycle = 1;\n\n\t\tthis.statusCarouselInterval = setInterval(() => {\n\t\t\tconst currentPhraseNode = statusNode.firstElementChild;\n\t\t\tif (this.countDots(currentPhraseNode.innerText) < 3)\n\t\t\t{\n\t\t\t\tcurrentPhraseNode.innerText += '.';\n\t\t\t\tstatusNode.style.width = (currentPhraseNode.offsetWidth + 1) + 'px';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dotCycle < 2)\n\t\t\t{\n\t\t\t\tdotCycle++;\n\t\t\t\tcurrentPhraseNode.innerText = currentPhraseNode.innerText.slice(0, -3);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdotCycle = 1;\n\n\t\t\tif (progressStatuses.length > 0)\n\t\t\t{\n\t\t\t\tconst status = progressStatuses.shift();\n\t\t\t\tthis.animateNextStatus(statusNode, status);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst almostDoneStatus = Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_ALMOST_DONE');\n\t\t\t\tthis.animateNextStatus(statusNode, almostDoneStatus);\n\t\t\t\tstatusNode.style.width = '';\n\t\t\t\tclearInterval(this.statusCarouselInterval);\n\t\t\t}\n\t\t}, 900);\n\t}\n\n\tanimateNextStatus(carousel, phraseText)\n\t{\n\t\tconst currentPhraseNode = carousel.firstElementChild;\n\t\tconst nextPhraseNode = Tag.render`\n\t\t\t<span class=\"calendar-active-status-node-phrase\">${phraseText}</span>\n\t\t`;\n\t\tcarousel.append(nextPhraseNode);\n\n\t\tconst maxWidth = Math.max(nextPhraseNode.offsetWidth, currentPhraseNode.offsetWidth);\n\t\tcarousel.style.width = (maxWidth + 1) + 'px';\n\n\t\tcurrentPhraseNode.style.transition = ''; // turn on animation\n\t\tcurrentPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\t\tnextPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\n\t\tsetTimeout(() => {\n\t\t\tcurrentPhraseNode.remove();\n\t\t\tnextPhraseNode.style.transition = 'none'; // turn off animation\n\t\t\tnextPhraseNode.style.transform = '';\n\t\t}, 300);\n\t}\n\n\tcountDots(string)\n\t{\n\t\treturn (string.match(/\\./g) || []).length;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [];\n\t}\n\n\tgetSyncStages()\n\t{\n\t\treturn this.syncStagesList;\n\t}\n\n\tgetHelpDeskCode()\n\t{\n\t\treturn this.HELPDESK_CODE;\n\t}\n\n\tdisplaySyncStages()\n\t{\n\t\tDom.clean(this.syncStagesWrapper);\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tstage.renderTo(this.syncStagesWrapper);\n\t\t});\n\t}\n\n\tbindButtonsHandlers()\n\t{\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tEvent.bind(continueButton, 'click', this.handleContinueButtonClick.bind(this));\n\t\t}\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\tEvent.bind(eifButton, 'click', this.handleFinalCloseButtonClick.bind(this));\n\t\t}\n\t}\n\n\thandleContinueButtonClick()\n\t{\n\t\tthis.showFinalStage();\n\t}\n\n\tshowFinalStage()\n\t{\n\t\tthis.syncIsFinished = true;\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\teifButton.style.display = '';\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\n\t\tthis.showFinalCheckWrapper();\n\t\tthis.showHelpLinkWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('startWizardWaitingMode');\n\t}\n\n\tisSyncFinished()\n\t{\n\t\treturn this.syncIsFinished;\n\t}\n\n\thandleFinalCloseButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUpdateState(stateData)\n\t{\n\t\tconst currentTimestamp = Date.now();\n\t\tif (currentTimestamp - this.lastUpdateStateTimestamp > this.MIN_UPDATE_STATE_DELAY)\n\t\t{\n\t\t\tthis.updateState(stateData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.handleUpdateState(stateData);\n\t\t\t}, this.MIN_UPDATE_STATE_DELAY);\n\t\t}\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tif (this.errorStatus)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (stateData.stage === 'connection_created'\n\t\t\t&& stateData.accountName\n\t\t\t&& Type.isElementNode(this.accountNameNode)\n\t\t)\n\t\t{\n\t\t\tthis.setAccountName(stateData.accountName);\n\t\t\tthis.accountNameNode.innerHTML = Text.encode(stateData.accountName)\n\t\t}\n\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t}\n\n\tsetActiveStatusFinished()\n\t{\n\t\tthis.activeStatusNode.style.width = '';\n\t\tclearInterval(this.statusCarouselInterval);\n\t\tthis.syncIsFinished = true;\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_SUCCESS').toUpperCase())\n\t\t\tDom.remove(this.syncTitleWrapper.querySelector('.calendar-sync__account-info--icon'));\n\t\t}\n\t}\n\n\tshowButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\thandlePullNewEvent(event)\n\t{\n\t\tif (event && Type.isFunction(event.getData))\n\t\t{\n\t\t\tconst data = {\n\t\t\t\tcommand: event.getData()[0],\n\t\t\t\t...event.getData()[1]\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tdata.command === 'edit_event'\n\t\t\t\t&& data.newEvent\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t\t\t{\n\t\t\t\t\tconst syncBalloon = this.finalCheckWrapper.querySelector('.calendar-sync__balloon');\n\t\t\t\t\tif (Type.isElementNode(syncBalloon) && Dom.hasClass(syncBalloon, '--progress'))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(syncBalloon, '--progress');\n\t\t\t\t\t\tDom.addClass(syncBalloon, '--done');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst entry = new Entry({ data: data.fields });\n\t\t\t\tthis.displayNewEvent(entry);\n\n\t\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'onPullEvent-calendar',\n\t\t\t\t\tthis.pullWizardEventHandler\n\t\t\t\t);\n\n\t\t\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\t\t\tif (Type.isElementNode(eifButton))\n\t\t\t\t{\n\t\t\t\t\teifButton.innerHTML = Text.encode(Loc.getMessage('CAL_BUTTON_KEEP_GOING'));\n\t\t\t\t\tDom.addClass(eifButton, 'ui-btn-primary');\n\t\t\t\t\tDom.removeClass(eifButton, 'ui-btn-light-border');\n\t\t\t\t}\n\n\t\t\t\tthis.emit('endWizardWaitingMode');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplayNewEvent(entry)\n\t{\n\t\t// Hide skeleton\n\t\tif (Type.isElementNode(this.skeletonWrapper))\n\t\t{\n\t\t\tDom.remove(this.skeletonWrapper);\n\t\t}\n\n\t\tif (Type.isElementNode(this.newEventCardWrapper))\n\t\t{\n\t\t\tthis.newEventCardWrapper.style.display = '';\n\t\t\tDom.clean(this.newEventCardWrapper);\n\t\t\tthis.newEventCardWrapper.appendChild(this.getNewEventCard(entry));\n\t\t}\n\t}\n\n\tgetNewEventCard(entry)\n\t{\n\t\tconst from = new Date(entry.from.getTime() - (parseInt(entry.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\tconst to = new Date(entry.to.getTime() - (parseInt(entry.data['~USER_OFFSET_TO']) || 0) * 1000);\n\t\tconst fromTimestamp = from.getTime();\n\t\tconst dateFrom = BX.date.format(Util.getDayMonthFormat(), fromTimestamp / 1000);\n\t\tconst timeFrom = Util.formatTime(from.getHours(), from.getMinutes());\n\t\tconst timeTo = Util.formatTime(to.getHours(), to.getMinutes());\n\t\tconst timeField = entry.isFullDay()\n\t\t\t\t? Loc.getMessage('CAL_WIZARD_FULL_DAY')\n\t\t\t\t: timeFrom + ' - ' + timeTo;\n\n\t\tthis.newEventCard = Tag.render`\n\t\t\t<div class=\"calendar-sync__balloon --calendar ${entry.isFullDay() ? '--fullday-event' : ''}\">\n\t\t\t\t<div class=\"calendar-sync__content-text\">\n\t\t\t\t\t${dateFrom}\n\t\t\t\t\t<span class=\"calendar-date-year\">\n\t\t\t\t\t\t${BX.date.format('Y', fromTimestamp / 1000)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__content-text\">${BX.date.format('l', fromTimestamp / 1000)}</div>\n\t\t\t\t<div class=\"calendar-sync__time-box\">\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeFrom}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time-notification-box\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${Text.encode(entry.getName())}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${timeField}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeTo}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.newEventCard;\n\t}\n\n\thandleCloseWizard()\n\t{\n\t\tthis.slider = null;\n\n\t\tclearInterval(this.statusCarouselInterval);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('onClose');\n\t}\n\n\tshowConfetti()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tconst bx = Util.getBX();\n\t\t\tbx.UI.Confetti.fire({\n\t\t\t\tparticleCount: 240,\n\t\t\t\tspread: 170,\n\t\t\t\torigin: { y: 0.3, x: 0.9 },\n\t\t\t\tzIndex: (bx.SidePanel.Instance.getTopSlider().getZindex() + 1)\n\t\t\t});\n\t\t}, this.CONFETTI_DELAY);\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.logoIconClass;\n\t}\n\n\tgetSlider()\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetErrorState()\n\t{\n\t\tthis.errorStatus = true;\n\t\tthis.showErrorWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.showButtonWrapper();\n\t\tDom.addClass(this.syncTitleWrapper, '--error');\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_ERROR').toUpperCase())\n\t\t}\n\n\t\tconst closeButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"close_button\"]');\n\t\tif (Type.isElementNode(closeButton))\n\t\t{\n\t\t\tcloseButton.style.display = '';\n\t\t\tEvent.bind(closeButton, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t\t\t{\n\t\t\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tBX.reload();\n\t\t\t});\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Loc, Tag, Type, Event} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncStageUnit\n{\n\tconstructor(options)\n\t{\n\t\tthis.name = options.name || '';\n\t\tthis.title = options.title || '';\n\t\tthis.doneStatus = false;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t\t\n\t\tEventEmitter.emit('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone');\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.contentNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\">\n\t\t\t\t<div class=\"calendar-sync__content-text --icon-check --disabled\">${this.title}</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.contentNode;\n\t}\n\n\tsetDone()\n\t{\n\t\tthis.doneStatus = true;\n\t\tDom.removeClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n\n\tsetUndone()\n\t{\n\t\tthis.doneStatus = false;\n\t\tDom.addClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Event } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\nimport { Util } from 'calendar.util';\n\n\nexport default class GoogleSyncWizard extends SyncWizard\n{\n\tTYPE = 'google';\n\tSLIDER_NAME = 'calendar:sync-wizard-google';\n\tSTAGE_1_CODE = 'google-to-b24';\n\tSTAGE_2_CODE = 'b24-to-google';\n\tSTAGE_3_CODE = 'b24-events-to-google';\n\tGOOGLE_ON_MOBILE_HELPDESK = 15456338;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.GoogleSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_GOOGLE'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--google';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tlet link;\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --align-center --space-bottom\" style=\"display: none;\">\n\t\t\t\t${link = Tag.render`<a href=\"#\" class=\"calendar-sync__content-link\">\n\t\t\t\t\t${Loc.getMessage('CAL_SYNC_NO_GOOGLE_ON_PHONE')}\n\t\t\t\t</a>`}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tconst helper = Util.getBX().Helper;\n\t\t\tif(helper)\n\t\t\t{\n\t\t\t\thelper.show(\"redirect=detail&code=\" + this.GOOGLE_ON_MOBILE_HELPDESK);\n\t\t\t}\n\t\t});\n\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\t\t\t\t\t\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_GOOGLE_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from 'main.core';\nimport { InterfaceTemplate } from \"./interfacetemplate\";\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Util } from 'calendar.util';\nimport GoogleSyncWizard from \"../syncwizard/googlesyncwizard\"\n\nexport default class GoogleTemplate extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_GOOGLE\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_GOOGLE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_GOOGLE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_GOOGLE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-google',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ticonLogoClass: '--google',\n\t\t\tcolor: '#387ced',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this);\n\t}\n\n\tcreateConnection()\n\t{\n\t\tconst syncLink = this.provider.getSyncLink();\n\t\tBX.util.popup(syncLink, 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\tEvent.bind(window, 'message', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (\n\t\t\twindow.location.hash === '#googleAuthSuccess'\n\t\t\t|| (event.data.title === 'googleAuthSuccess')\n\t\t)\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\n\t\t\tEvent.unbind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\t\tEvent.unbind(window, 'message', this.handleSuccessConnectionDebounce);\n\t\t}\n\t}\n\n\tgetSectionsForGoogle()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForGoogle', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('GOOGLE_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncGoogleSettings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tif (!this.wizard)\n\t\t{\n\t\t\tthis.wizard = new GoogleSyncWizard();\n\t\t\tthis.wizard.openSlider();\n\t\t\tthis.provider.setActiveWizard(this.wizard);\n\t\t}\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\nimport { Tag, Loc, Dom, Event } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport default class IcloudAuthDialog extends EventEmitter\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tappPasswordTemplate = 'xxxx-xxxx-xxxx-xxxx';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.type = options.type;\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Icloud');\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.initAlertBlock();\n\t}\n\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_AUTH_TITLE'),\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 475,\n\t\t\tanimation: 'fading-slide',\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: {opacity: 15},\n\t\t\tlightShadow: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CAL_ICLOUD_CONNECT_BUTTON'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-md ui-btn-success ui-btn-round`,\n\t\t\t\t\tevents : {click : this.authorize.bind(this)},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light-border ui-btn-round',\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\tthis.popup.show();\n\t\t\n\t\tEvent.bind(document, 'keydown', this.keyHandler);\n\t\tEvent.bind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.bind(document, 'mousedown', this.outsideMouseDownClose);\n\t}\n\t\n\tauthorize()\n\t{\n\t\tif (this.isFormDataValid())\n\t\t{\n\t\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\t\tsaveBtn.setClocking(true);\n\t\t\tsaveBtn.setDisabled(true);\n\t\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\t\tcancelButton.setDisabled(true);\n\t\t\tif (this.DOM.container.contains(this.DOM.alertBlock))\n\t\t\t{\n\t\t\t\tDom.remove(this.DOM.alertBlock);\n\t\t\t}\n\n\t\t\tthis.emit('onSubmit', new BaseEvent({\n\t\t\t\tdata: {\n\t\t\t\t\tappleId: this.DOM.appleIdInput.value.toString().trim(),\n\t\t\t\t\tappPassword: this.DOM.appPasswordInput.value.toString().trim()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.highlightInvalidFormData();\n\t\t}\n\t}\n\n\tisFormDataValid()\n\t{\n\t\treturn this.DOM.appleIdInput.value.toString().trim() !== ''\n\t\t\t&& this.DOM.appPasswordInput.value.toString().trim() !== ''\n\t}\n\n\thighlightInvalidFormData()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setClocking(false);\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\n\t\tif (this.DOM.appleIdInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidAppleIdInput();\n\t\t}\n\t\tif (this.DOM.appPasswordInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidPasswordInput();\n\t\t}\n\t}\n\n\thighlightInvalidAppleIdInput()\n\t{\n\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t}\n\n\thighlightInvalidPasswordInput()\n\t{\n\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\tthis.DOM.appPasswordInput.focus();\n\n\t}\n\t\n\tenableSaveButton()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div>\n\t\t\t\t${this.getAppleInfoBlock()}\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-id-block\">\n\t\t\t\t\t${this.getAppleIdTitle()}\n\t\t\t\t\t${this.getAppleIdInput()}\n\t\t\t\t\t${this.getAppleIdError()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-pass-block\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--label-block\">\n\t\t\t\t\t\t${this.getAppPasswordTitle()}\n\t\t\t\t\t\t${this.getLearnMoreButton()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t${this.getAppPasswordInput()}\n\t\t\t\t\t\t${this.getShowHidePasswordIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getAppPasswordError()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetAppleInfoBlock()\n\t{\n\t\tif (!this.DOM.appleInfo)\n\t\t{\n\t\t\tthis.DOM.appleInfo = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--info\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-image --icloud\"></div>\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-text\">${Loc.getMessage('CAL_ICLOUD_INFO_BLOCK')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.appleInfo;\n\t}\n\t\n\tgetAppleIdTitle()\n\t{\n\t\tif (!this.DOM.appleIdTitle)\n\t\t{\n\t\t\tthis.DOM.appleIdTitle = Tag.render`\n\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_PLACEHOLDER')}\n\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdTitle;\n\t}\n\t\n\tgetAppPasswordTitle()\n\t{\n\t\tif (!this.DOM.appPasswordTitle)\n\t\t{\n\t\t\tthis.DOM.appPasswordTitle = Tag.render`\n\t\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_PASS_PLACEHOLDER')}\n\t\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appPasswordTitle;\n\t}\n\t\n\tgetAppleIdError()\n\t{\n\t\tif (!this.DOM.appleIdError)\n\t\t{\n\t\t\tthis.DOM.appleIdError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_ERROR')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdError;\n\t}\n\t\n\tgetAppPasswordError()\n\t{\n\t\tif (!this.DOM.appPasswordError)\n\t\t{\n\t\t\tthis.DOM.appPasswordError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage(\n\t\t\t\t\t\t'CAL_ICLOUD_APP_PASSWORD_ERROR',\n\t\t\t\t\t{\n\t\t\t\t\t\t\t'#LINK_START#': '<a href=\"#\" data-role=\"open-helpdesk-password\">',\n\t\t\t\t\t\t\t'#LINK_END#': '</a>',\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst link = this.DOM.appPasswordError.querySelector('a[data-role=\"open-helpdesk-password\"]');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\tEvent.bind(link, 'click', this.openHelpDesk.bind(this));\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.appPasswordError;\n\t}\n\n\tgetAppleIdInput()\n\t{\n\t\tif (!this.DOM.appleIdInput)\n\t\t{\n\t\t\tthis.DOM.appleIdInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_EMAIL_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tthis.DOM.appleIdInput.onfocus = () => {\n\t\t\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.DOM.appleIdInput.onblur = () => {\n\t\t\t\tif (\n\t\t\t\t\t!this.validateAppleIdInput()\n\t\t\t\t\t&& !Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.addClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn this.DOM.appleIdInput;\n\t}\n\n\tgetAppPasswordInput()\n\t{\n\t\tif (!this.DOM.appPasswordInput)\n\t\t{\n\t\t\tthis.DOM.appPasswordInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t\trequired maxlength=\"19\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.appPasswordInput, 'input', this.validateAppPasswordInput.bind(this));\n\t\t}\n\n\t\treturn this.DOM.appPasswordInput;\n\t}\n\t\n\tgetShowHidePasswordIcon()\n\t{\n\t\tif (!this.DOM.showHidePasswordIcon)\n\t\t{\n\t\t\tthis.DOM.showHidePasswordIcon = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-after calendar-sync__auth-popup--icon-adjust-password\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.showHidePasswordIcon, 'click', this.switchPasswordVisibility.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.showHidePasswordIcon;\n\t}\n\t\n\tgetLearnMoreButton()\n\t{\n\t\tif (!this.DOM.learnMoreButton)\n\t\t{\n\t\t\tthis.DOM.learnMoreButton = Tag.render`\n\t\t\t\t<span class=\"calendar-sync__auth-popup--learn-more\">${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_ABOUT')}</span>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.learnMoreButton, 'click', this.openHelpDesk.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.learnMoreButton;\n\t}\n\n\tinitAlertBlock()\n\t{\n\t\tif (!this.DOM.alertBlock)\n\t\t{\n\t\t\tthis.DOM.alertBlock = Tag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-danger calendar-sync__auth-error\">\n\t                <span class=\"ui-alert-message\">${Loc.getMessage('CAL_ICLOUD_AUTH_ERROR')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tshowErrorAuthorizationAlert()\n\t{\n\t\tthis.highlightInvalidAppleIdInput();\n\t\tthis.highlightInvalidPasswordInput();\n\t\tthis.enableSaveButton();\n\t\tif (!this.DOM.container.contains(this.DOM.alertBlock))\n\t\t{\n\t\t\tDom.append(this.DOM.alertBlock, this.DOM.container);\n\t\t}\n\t}\n\t\n\tvalidateAppleIdInput()\n\t{\n\t\tconst emailRegExp = /^[a-zA-Z\\d.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z\\d-]+(?:\\.[a-zA-Z\\d-]+)*$/;\n\t\tconst input = this.DOM.appleIdInput.value.toString().trim();\n\t\tif (input === '')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn emailRegExp.test(input);\n\t}\n\t\n\tvalidateAppPasswordInput()\n\t{\n\t\tconst appPasswordRegExp = /^[a-z]{4}-[a-z]{4}-[a-z]{4}-[a-z]{4}$/;\n\t\tconst input = this.completeWithTemplate(this.DOM.appPasswordInput.value.toString().trim());\n\t\tif (appPasswordRegExp.test(input))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.addClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tswitchPasswordVisibility()\n\t{\n\t\tif (Dom.hasClass(this.DOM.showHidePasswordIcon, '--hide'))\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'password';\n\t\t\tDom.removeClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'text';\n\t\t\tDom.addClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t}\n\t\n\tclearForm()\n\t{\n\t\tthis.DOM.appPasswordInput.value = '';\n\t\tthis.DOM.appleIdInput.value = '';\n\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appleIdError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tcompleteWithTemplate(password)\n\t{\n\t\tconst addition = this.appPasswordTemplate.slice(password.length, this.appPasswordTemplate.length);\n\t\tpassword += addition;\n\t\treturn password;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '15426356';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\thandleKeyPress(e)\n\t{\n\t\tif (e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.authorize();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\tcheckOutsideClickClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseUp = !target.closest('div.popup-window');\n\t\tif (this.outsideMouseUp && this.outsideMouseDown && this.checkTopSlider())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\toutsideMouseDownClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseDown = !target.closest('div.popup-window');\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tEvent.unbind(document, 'keydown', this.keyHandler);\n\t\tEvent.unbind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.unbind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tthis.clearForm();\n\t}\n\t\n\tcheckTopSlider()\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class IcloudSyncWizard extends SyncWizard\n{\n\tTYPE = 'icloud';\n\tSLIDER_NAME = 'calendar:sync-wizard-icloud';\n\tSTAGE_1_CODE = 'icloud-to-b24';\n\tSTAGE_2_CODE = 'b24-events-to-icloud';\n\tSTAGE_3_CODE = 'b24-to-icloud';\n\t\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.IcloudSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_ICLOUD'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--icloud';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_ICLOUD_TITLE');\n\t}\n}","// @flow\n'use strict';\nimport { Dom, Loc, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\n\nexport default class WarnSyncIcloudDialog\n{\n\tzIndex = 3100;\n\tDOM = {};\n\t\n\tconstructor(options = {})\n\t{\n\t\tthis.authDialog = options.authDialog;\n\t}\n\t\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_TITLE'),\n\t\t\twidth: 500,\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: { opacity: 15 },\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_LEARN_MORE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\tevents: { click: this.openHelpDesk.bind(this) }\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_BUTTON_CONTINUE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light',\n\t\t\t\t\tevents: { click: this.openAuthDialog.bind(this) }\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\t\n\t\tthis.popup.show();\n\t}\n\t\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.getAlertInformation()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t\treturn this.DOM.container;\n\t}\n\t\n\tgetAlertInformation()\n\t{\n\t\tthis.DOM.alertBlock = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_INFO'),\n\t\t\tcolor: BX.UI.Alert.Color.WARNING,\n\t\t\ticon: BX.UI.Alert.Icon.INFO\n\t\t});\n\t\t\n\t\tconst container = this.DOM.alertBlock.getContainer();\n\t\tconst text = container.querySelector('.ui-alert-message');\n\t\tDom.addClass(text, 'calendar-sync__alert-popup--text')\n\t\t\n\t\treturn container;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '16020988';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\tdisableConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.disableIphoneOrMacConnection').then(() => {\n\t\t\tthis.authDialog.show();\n\t\t\tthis.close();\n\t\t\tUtil.setIphoneConnectionStatus(false);\n\t\t\tUtil.setMacConnectionStatus(false);\n\t\t})\n\t}\n\t\n\topenAuthDialog()\n\t{\n\t\tthis.authDialog.show();\n\t\tthis.close();\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport IcloudAuthDialog from '../controls/icloudauthdialog';\nimport IcloudSyncWizard from '../syncwizard/icloudsyncwizard';\nimport { EventEmitter } from 'main.core.events';\nimport WarnSyncIcloudDialog from '../controls/warnsynciclouddialog';\n\nexport default class IcloudTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ICLOUD\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ICLOUD_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ICLOUD_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ICLOUD_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-icloud',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/icloud.svg',\n\t\t\ticonLogoClass: '--icloud',\n\t\t\tcolor: '#95a0af',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection(data)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.createIcloudConnection', {\n\t\t\tdata: {\n\t\t\t\tappleId: data.appleId,\n\t\t\t\tappPassword: data.appPassword,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\t\n\t\t\t\tif (result.status === 'success' && result.connectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.openSyncWizard(data.appleId);\n\t\t\t\t\tthis.syncCalendarsWithIcloud(result.connectionId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.authDialog.showErrorAuthorizationAlert();\n\t\t\t}\n\t\t);\n\t}\n\n\tsyncCalendarsWithIcloud(connectionId)\n\t{\n\t\tthis.authDialog.close();\n\t\t\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.syncIcloudConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: connectionId,\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\tif (connectionId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.provider.getConnection().setId(connectionId);\n\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t});\n\t\t})\n\t}\n\n\tgetSectionsForIcloud()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForIcloud', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t)\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tthis.initPopup();\n\t\tif (Util.isIphoneConnected() || Util.isMacConnected())\n\t\t{\n\t\t\tthis.alertSyncPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.authDialog.show();\n\t\t}\n\t}\n\t\n\tinitPopup()\n\t{\n\t\tif (!this.authDialog)\n\t\t{\n\t\t\tthis.authDialog = new IcloudAuthDialog();\n\t\t\t\n\t\t\tEventEmitter.unsubscribeAll('BX.Calendar.Sync.Icloud:onSubmit');\n\t\t\tEventEmitter.subscribe('BX.Calendar.Sync.Icloud:onSubmit', (e) => {\n\t\t\t\tthis.createConnection(e.data);\n\t\t\t})\n\t\t}\n\t\t\n\t\tif (!this.alertSyncPopup)\n\t\t{\n\t\t\tthis.alertSyncPopup = new WarnSyncIcloudDialog({\n\t\t\t\tauthDialog: this.authDialog\n\t\t\t})\n\t\t}\n\t}\n\n\topenSyncWizard(appleId)\n\t{\n\t\tthis.provider.setWizardSyncMode(true);\n\t\tthis.wizard = new IcloudSyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\n\t\tEventEmitter.subscribeOnce('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone', () => {\n\t\t\tthis.wizard.updateState({\n\t\t\t\tstage: 'connection_created',\n\t\t\t\tvendorName: 'icloud',\n\t\t\t\taccountName: appleId,\n\t\t\t})\n\t\t})\n\t}\n\t\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class Office365SyncWizard extends SyncWizard\n{\n\tTYPE = 'office365';\n\tSLIDER_NAME = 'calendar:sync-wizard-office365';\n\tSTAGE_1_CODE = 'office365-to-b24';\n\tSTAGE_2_CODE = 'sections_sync_finished';\n\tSTAGE_3_CODE = 'events_sync_finished';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.Office365SyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_OFFICE365'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--office365';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t \t&& (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\tthis.showButtonWrapper();\n\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\tthis.showConfetti();\n\n\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_OFFICE365_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport Office365SyncWizard from '../syncwizard/office365syncwizard';\nimport { Util } from 'calendar.util';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport default class Office365template extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_OFFICE365\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_OFFICE365_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_OFFICE365_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_OFFICE365_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_OFFICE365_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office365',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/office365.svg',\n\t\t\ticonLogoClass: '--office365',\n\t\t\tcolor: '#fc1d1d',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this)\n\t}\n\n\tcreateConnection()\n\t{\n\t\tconst syncLink = this.provider.getSyncLink();\n\t\tBX.util.popup(syncLink, 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (window.location.hash === '#office365AuthSuccess')\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\n\t\t\tEvent.unbind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\t}\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncOffice365Settings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tthis.wizard = new Office365SyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\t}\n\n\tgetSectionsForOffice365()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForOffice365', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t})\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('OFFICE365_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Dom, Event, Loc, Tag } from 'main.core';\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class MacTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PC')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelper, 'click', this.showExtendedInfoMacOs.bind(this));\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tshowExtendedInfoMacOs()\n\t{\n\t\tthis.headerHelper.style.display = 'none';\n\t\tDom.append(this.getContentBodyConnect(), this.infoBodyHeader);\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header calendar-sync-slider-header-divide\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_MAC_INSTRUCTION_HEADER')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_DESCRIPTION')}:</span>\n\t\t\t\t\t<ol class=\"calendar-sync-slider-info-list\">\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIRST')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SECOND')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_THIRD')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FOURTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIFTH', { '#PORTAL_ADDRESS#': this.provider.getPortalAddress() })}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SIXTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SEVENTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_CONCLUSION')}</span>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\" style=\"margin-top: 20px\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class OutlookTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class YandexTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_YANDEX\"),\n\t\t\thelpDeskCode: '12925048',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_YANDEX_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_YANDEX_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_YANDEX_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_YANDEX_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-yandex',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ticonLogoClass: '--yandex',\n\t\t\tcolor: '#f9c500',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag, Type, Event, Dom} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport MobileSyncBanner from \"../controls/mobilesyncbanner\";\nimport {Util} from \"calendar.util\";\n\nexport default class MobileInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.banner = new MobileSyncBanner({\n\t\t\ttype: this.provider.getType(),\n\t\t\thelpDeskCode: options.helpDeskCode,\n\t\t});\n\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.syncDate = Type.isDate(this.data.syncDate) ? this.data.syncDate : Util.parseDate(this.data.syncDate);\n\t\t}\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PHONE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelper, 'click', this.showMobileSyncBanner.bind(this));\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tshowMobileSyncBanner()\n\t{\n\t\tthis.headerHelper.style.display = 'none';\n\t\tDom.append(this.getContentBodyConnect(), this.infoBodyHeader);\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-desc\">${Loc.getMessage('CAL_SYNC_DISABLE')}</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\tthis.banner.initQrCode().then(this.banner.drawQRCode.bind(this.banner));\n\t\treturn this.banner.getContainer();\n\t}\n\t\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class AndroidTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ANDROID\"),\n\t\t\thelpDeskCode: '5686179',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ANDROID_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ANDROID_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_ANDROID_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ANDROID_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-android',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/android.svg',\n\t\t\tcolor: '#9ece03',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isGoogleConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_GOOGLE_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_GOOGLE');\n\t\t}\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class IphoneTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_IPHONE\"),\n\t\t\thelpDeskCode: '5686207',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_IPHONE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_IPHONE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_IPHONE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_IPHONE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-iphone',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\tcolor: '#2fc6f6',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t\t// this.warningText = this.alreadyConnectedToNew\n\t\t// \t? Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED')\n\t\t// \t: Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\n\nimport {Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\nimport {Loc, Tag} from \"main.core\";\nimport \"../css/icalpopup.css\"\n\nexport default class IcalSyncPopup\n{\n\tLINK_LENGTH = 112;\n\n\tconstructor(options)\n\t{\n\t\tthis.link = this.getIcalLink(options);\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup().show();\n\t\tthis.startSync();\n\t}\n\n\tstartSync()\n\t{\n\t\tBX.ajax.get(this.link + '&check=Y', \"\", (result) =>\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (!result || result.length <= 0 || result.toUpperCase().indexOf('BEGIN:VCALENDAR') === -1)\n\t\t\t\t{\n\t\t\t\t\tthis.showPopupWithSyncDataError();\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-ical-popup-wrapper\">\n\t\t\t\t<h3>${Loc.getMessage('EC_JS_EXPORT_TILE')}</h3>\n\t\t\t\t<div class=\"calendar-ical-popup-label-text\"><span>${Loc.getMessage('EC_EXP_TEXT')}</span></div>\n\t\t\t\t${this.getLinkBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreatePopup()\n\t{\n\t\treturn this.popup = new Popup({\n\t\t\twidth: 400,\n\t\t\tzIndexOptions: 4000,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tdraggable: true,\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: \"bxc-popup-window\",\n\t\t\tcontent: this.getContent(),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.copyLink(event);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_SEC_SLIDER_CLOSE'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetIcalLink(options)\n\t{\n\t\treturn options.calendarPath\n\t\t\t+ ((options.calendarPath.indexOf('?') >= 0) ? '&' : '?')\n\t\t\t+ 'action=export'\n\t\t\t+ options.sectionLink;\n\t}\n\n\tgetLinkBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-ical-popup-link-block\">\n\t\t\t\t\t<a class=\"ui-link ui-link-primary \" target=\"_blank\" href=\"${BX.util.htmlspecialchars(this.link)}\">\n\t\t\t\t\t\t${BX.util.htmlspecialchars(this.getShortenLink(this.link))}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tstatic checkPathes(options)\n\t{\n\t\treturn (!!options.sectionLink || !!options.calendarPath)\n\t}\n\n\tstatic showPopupWithPathesError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_JS_ICAL_ERROR_WITH_PATHES'));\n\t}\n\n\tshowPopupWithSyncDataError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_EDEV_EXP_WARN'));\n\t}\n\n\tcopyLink(event)\n\t{\n\t\twindow.BX.clipboard.copy(this.link)\n\t\t\t? this.#showSuccessCopyNotification()\n\t\t\t: this.#showFailedCopyNotification();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\tgetShortenLink(link)\n\t{\n\t\treturn link.length < this.LINK_LENGTH ? link : link.substr(0, 105) + '...' + link.slice(-7);\n\t}\n\n\t#showSuccessCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_SUCCESS'));\n\t}\n\n\t#showFailedCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_FAILED'));\n\t}\n\n\t#showResultNotification(message)\n\t{\n\t\tUtil.showNotification(message);\n\t}\n}\n","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class AfterSyncTour\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tloadExtension()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension('ui.tour').then((exports) => {\n\t\t\t\tif (exports && exports['Guide'] && exports['Manager'])\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"ui.tour\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.loadExtension()\n\t\t\t.then(() => {\n\t\t\t\tthis.guide = new BX.UI.Tour.Guide({\n\t\t\t\t\tsteps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: this.getTarget(),\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CAL_AFTER_SYNC_AHA_TITLE'),\n\t\t\t\t\t\t\ttext: Loc.getMessage('CAL_AFTER_SYNC_AHA_TEXT'),\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tonEvents: true\n\t\t\t\t});\n\n\t\t\t\tthis.guide.start();\n\t\t\t});\n\t}\n\n\tgetTarget()\n\t{\n\t\tlet target;\n\t\tconst view = this.options.view;\n\t\tconst viewWrap = view.getContainer();\n\n\t\tif (view.getName() === 'month')\n\t\t{\n\t\t\ttarget = viewWrap.querySelectorAll(\".calendar-grid-today\")[0];\n\t\t}\n\t\telse if (view.getName() === 'day'\n\t\t|| view.getName() === 'week')\n\t\t{\n\t\t\tconst dayCode = Util.getDayCode(new Date());\n\t\t\ttarget = viewWrap.querySelector('div[data-bx-calendar-timeline-day=\"' + dayCode + '\"] .calendar-grid-cell-inner');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttarget = document.querySelector('span[data-role=\"addButton\"]');\n\t\t}\n\n\t\treturn target;\n\t}\n}\n"],"names":["StatusBlock","constructor","options","status","connections","withStatusLabel","popupWithUpdateButton","popupId","createInstance","setStatus","setConnections","getContent","statusInfoBlock","Tag","render","Loc","getMessage","addEventListener","handlerMouseEnter","handlerMouseLeave","statusBlock","getStatusTextLabel","clearTimeout","statusBlockEnterTimeout","buttonEnterTimeout","setTimeout","showPopup","statusBlockLeaveTimeout","hidePopup","node","popup","getPopup","show","addPopupHandlers","hide","getPopupContainer","SyncStatusPopup","withUpdateButton","id","refresh","_t","_t2","_t3","_t4","_t5","AuxiliarySyncPanel","MAIN_SYNC_SLIDER_NAME","SLIDER_WIDTH","LOADER_NAME","cache","Cache","MemoryCache","connectionsProviders","userId","openSlider","BX","SidePanel","Instance","open","contentCallback","slider","Promise","resolve","reject","allowChangeHistory","events","onLoad","setGridContent","cacheable","width","loader","getHeader","getMobileHeader","getMobileContentWrapper","getWebHeader","getWebContentWrapper","getMainHeader","getStatusBlockContent","getConnections","remember","statusBlockContent","items","Object","values","forEach","item","itemConnections","length","connection","ConnectionItem","isConnectionItem","getConnectStatus","push","showWebGridContent","filter","mainPanel","getViewClassification","showMobileGridContent","wrapper","Dom","clean","grid","TileGrid","Grid","container","sizeRatio","itemMinWidth","tileMargin","itemType","draw","blockStatusContent","replace","document","querySelector","_t6","_t7","SyncPanelUnit","logoClassName","connectionProvider","getConnectionTemplate","connectionTemplate","getClassTemplateItem","renderTo","outerWrapper","Type","isElementNode","appendChild","unitNode","getLogoNode","getTitle","getSyncInfoWrap","getButtonsWrap","getSyncPanelLogo","getSyncPanelTitle","syncInfoWrap","setSyncStatus","mode","className","STATUS_REFUSED","addClass","setSyncInfoStatusText","STATUS_SUCCESS","formatSyncTime","getSyncDate","STATUS_FAILED","STATUS_PENDING","STATUS_SYNCHRONIZING","STATUS_NOT_CONNECTED","isGoogleApplicationRefused","text","upperCase","syncInfoStatusText","innerHTML","Text","encode","toUpperCase","buttonsWrap","getButton","getMoreButton","refreshButton","button","moreButton","getStatus","Event","bind","handleItemClick","e","includes","hasMenu","showMenu","openActiveConnectionSlider","getConnection","openInfoConnectionSlider","handleConnectButton","date","now","Date","timestamp","isDate","Math","round","getTime","secondsAgo","parseInt","format","SyncPanel","HELPDESK_CODE","window","top","displayConnectionUnits","getHeaderWrapper","getUnitsContentWrapper","getFooterWrapper","unitsContentWrapper","getExtraInfoWithCheckIcon","getOpenAuxiliaryPanelLink","getOpenHelpLink","alreadyConnected","link","auxiliarySyncPanel","Helper","connected","renderConnectionUnits","providers","provider","interfaceUnit","setInterfaceUnit","GridUnit","Item","type","gridUnit","getAdditionalContentClass","getContentStyles","getImage","isActive","onClick","layout","title","util","htmlspecialchars","getGridTitle","getGridIcon","getSyncStatus","getGridColor","ConnectionControls","userName","server","connectionName","addButtonText","removeButtonText","saveButtonText","getWrapper","getForm","getAddButton","getDisconnectButton","getSaveButton","getButtonWrapper","MobileSyncBanner","zIndex","DOM","QRCODE_SIZE","QRCODE_COLOR_LIGHT","QRCODE_COLOR_DARK","QRCODE_WRAP_CLASS","QRC","helpDeskCode","alreadyConnectedToNew","Util","isGoogleConnected","isIcloudConnected","showInPopup","Popup","draggable","content","getContainer","zIndexAbsolute","closeByEsc","closeIcon","initQrCode","then","drawQRCode","close","getQrContainer","getInstructionContainer","initHintNode","qrContainer","getLoader","instructionContainer","getInstructionTextContainer","getHelpdeskCode","instructionTextContainer","getAndroidHintIcon","androidHintIcon","getInnerContainer","Runtime","loadExtension","QRCode","wrap","isDomNode","getMobileSyncUrl","getSize","height","colorDark","colorLight","correctLevel","CorrectLevel","H","ajax","runAction","data","response","getDetailHelpUrl","_t8","_t9","_t10","InterfaceTemplate","EventEmitter","sliderWidth","setEventNamespace","helpdeskCode","titleInfoHeader","descriptionInfoHeader","titleActiveHeader","descriptionActiveHeader","sliderIconClass","iconPath","iconLogoClass","color","getInfoConnectionContent","getHeaderTitle","getContentInfoBody","getContentActiveBodyHeader","disconnectButton","handleDisconnectButton","syncTime","formatDateUsable","getTimeFormatShort","getSyncStatusClassName","getLogoIconClass","getConnectionName","getActiveConnectionContent","getContentActiveBody","getContentInfoBodyHeader","getContentActiveBodySectionsHeader","getContentActiveBodySectionsManager","showHelp","event","preventDefault","getHelpdeskLink","infoBodyHeader","getContentInfoBodyHeaderHelper","getContentInfoWarning","mobileSyncButton","getMobileSyncControlButton","handleMobileButtonOtherSyncInfo","handleMobileButtonConnectClick","warningText","mobileSyncButtonText","setProvider","sendRequestRemoveConnection","connectionId","removeCalendars","reload","runUpdateInfo","sectionStatus","sectionStatusObject","emit","getElementById","getContentActiveBodySections","sectionList","section","onClickCheckSection","showUpdateSectionListNotification","showNotification","getId","deactivateConnection","closeSlider","getInterfaceUnit","SLIDER_PREFIX","CaldavInterfaceTemplate","formObject","formBlock","form","buttonWrapper","bodyHeader","sendRequestAddConnection","append","addParams","fd","FormData","name","get","pass","showAlertPopup","errors","alert","message","code","messageBox","UI","Dialogs","MessageBox","buttons","MessageBoxButtons","OK","okCaption","minWidth","mediumButtonSize","popupOptions","onOk","removeClass","CaldavTemplate","ExchangeTemplate","getContentBody","getHelpdeskBlock","_t11","_t12","_t13","SyncWizard","TYPE","SLIDER_NAME","syncStagesList","accountName","MIN_UPDATE_STATE_DELAY","CONFETTI_DELAY","pullWizardEventHandler","handlePullNewEvent","lastUpdateStateTimestamp","logoIconClass","displaySyncStages","bindButtonsHandlers","onDestroy","handleCloseWizard","getTopSlider","syncIsFinished","errorStatus","getTitleWrapper","getSyncStagesWrapper","getInfoStatusWrapper","getErrorWrapper","getFinalCheckWrapper","getHelpLinkWrapper","syncTitleWrapper","getAccountNameNode","getActiveStatusNode","syncStagesWrapper","infoStatusWrapper","errorWrapper","helpLinkWrapper","finalCheckWrapper","getNewEventCardWrapper","newEventCardWrapper","getSkeletonWrapper","skeletonWrapper","getSkeletonTitle","accountNameNode","getAccountName","setAccountName","value","activeStatusNode","startStatusCarousel","statusNode","progressStatuses","dotCycle","statusCarouselInterval","setInterval","currentPhraseNode","firstElementChild","countDots","innerText","style","offsetWidth","slice","shift","animateNextStatus","almostDoneStatus","clearInterval","carousel","phraseText","nextPhraseNode","maxWidth","max","transition","transform","remove","string","match","setSyncStages","getSyncStages","getHelpDeskCode","stage","continueButton","handleContinueButtonClick","eifButton","handleFinalCloseButtonClick","showFinalStage","display","showFinalCheckWrapper","showHelpLinkWrapper","hideSyncStagesWrapper","hideInfoStatusWrapper","getBX","subscribe","isSyncFinished","getOpenSliders","getUrl","handleUpdateState","stateData","currentTimestamp","updateState","setActiveStatusFinished","showButtonWrapper","hideButtonWrapper","showInfoStatusWrapper","showErrorWrapper","hideErrorWrapper","hideFinalCheckWrapper","showSyncStagesWrapper","hideHelpLinkWrapper","isFunction","getData","command","newEvent","syncBalloon","hasClass","entry","Entry","fields","displayNewEvent","unsubscribe","getNewEventCard","from","to","fromTimestamp","dateFrom","getDayMonthFormat","timeFrom","formatTime","getHours","getMinutes","timeTo","timeField","isFullDay","newEventCard","getName","showConfetti","bx","Confetti","fire","particleCount","spread","origin","y","x","getZindex","getSlider","setErrorState","closeButton","SyncStageUnit","doneStatus","contentNode","setDone","setUndone","GoogleSyncWizard","STAGE_1_CODE","STAGE_2_CODE","STAGE_3_CODE","GOOGLE_ON_MOBILE_HELPDESK","helper","GoogleTemplate","HANDLE_CONNECTION_DELAY","handleSuccessConnectionDebounce","debounce","handleSuccessConnection","createConnection","syncLink","getSyncLink","location","hash","removeHash","setWizardSyncMode","saveConnection","openSyncWizard","unbind","getSectionsForGoogle","target","checked","offsetLeft","offsetTop","padding","autoHide","animation","hasSetSyncGoogleSettings","wizard","setActiveWizard","IcloudAuthDialog","appPasswordTemplate","keyHandler","handleKeyPress","checkOutsideClickClose","outsideMouseDownClose","initAlertBlock","titleBar","contentBackground","overlay","opacity","lightShadow","Button","click","authorize","onPopupClose","isFormDataValid","saveBtn","getButtons","setClocking","setDisabled","cancelButton","contains","alertBlock","BaseEvent","appleId","appleIdInput","toString","trim","appPassword","appPasswordInput","highlightInvalidFormData","highlightInvalidAppleIdInput","highlightInvalidPasswordInput","clearInvalidation","focus","enableSaveButton","getAppleInfoBlock","getAppleIdTitle","getAppleIdInput","getAppleIdError","getAppPasswordTitle","getLearnMoreButton","getAppPasswordInput","getShowHidePasswordIcon","getAppPasswordError","appleInfo","appleIdTitle","appPasswordTitle","appleIdError","appPasswordError","openHelpDesk","onfocus","onblur","validateAppleIdInput","validateAppPasswordInput","showHidePasswordIcon","switchPasswordVisibility","learnMoreButton","showErrorAuthorizationAlert","emailRegExp","input","test","appPasswordRegExp","completeWithTemplate","clearForm","password","addition","keyCode","getKeyCode","srcElement","outsideMouseUp","closest","outsideMouseDown","checkTopSlider","destroy","IcloudSyncWizard","WarnSyncIcloudDialog","authDialog","openAuthDialog","getAlertInformation","Alert","Color","WARNING","icon","Icon","INFO","disableConnection","setIphoneConnectionStatus","setMacConnectionStatus","IcloudTemplate","result","syncCalendarsWithIcloud","setId","setConnected","setSyncDate","setWizardState","ERROR_CODE","vendorName","getSectionsForIcloud","initPopup","isIphoneConnected","isMacConnected","alertSyncPopup","unsubscribeAll","subscribeOnce","Office365SyncWizard","Office365template","hasSetSyncOffice365Settings","getSectionsForOffice365","MacTemplate","getPortalAddress","portalAddress","getContentBodyConnect","headerHelper","showExtendedInfoMacOs","calendarContext","getCalendarContext","syncInterface","getIcloudProvider","OutlookTemplate","YandexTemplate","MobileInterfaceTemplate","banner","getType","syncDate","parseDate","showMobileSyncBanner","AndroidTemplate","getGoogleProvider","IphoneTemplate","IcalSyncPopup","LINK_LENGTH","getIcalLink","createPopup","startSync","indexOf","showPopupWithSyncDataError","getLinkBlock","zIndexOptions","right","PRIMARY","onclick","copyLink","LINK","calendarPath","sectionLink","getShortenLink","checkPathes","showPopupWithPathesError","clipboard","copy","stopPropagation","substr","AfterSyncTour","exports","console","error","guide","Tour","Guide","steps","getTarget","onEvents","start","view","viewWrap","querySelectorAll","dayCode","getDayCode"],"mappings":"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"}