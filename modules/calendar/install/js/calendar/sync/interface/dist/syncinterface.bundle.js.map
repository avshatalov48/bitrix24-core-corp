{"version":3,"file":"syncinterface.bundle.js","sources":["../src/controls/statusblock.js","../src/auxiliarysyncpanel.js","../src/syncpanelunit.js","../src/syncpanel.js","../src/gridunit.js","../src/controls/connectioncontrols.js","../src/controls/mobilesyncbanner.js","../src/itemstemplate/interfacetemplate.js","../src/itemstemplate/caldavinterfacetemplate.js","../src/itemstemplate/caldavtemplate.js","../src/itemstemplate/exchangetemplate.js","../src/syncwizard/syncwizard.js","../src/syncwizard/syncstageunit.js","../src/syncwizard/googlesyncwizard.js","../src/itemstemplate/googletemplate.js","../src/controls/icloudauthdialog.js","../src/syncwizard/icloudsyncwizard.js","../src/controls/warnsynciclouddialog.js","../src/itemstemplate/icloudtemplate.js","../src/syncwizard/office365syncwizard.js","../src/itemstemplate/office365template.js","../src/itemstemplate/mactemplate.js","../src/itemstemplate/outlooktemplate.js","../src/itemstemplate/yandextemplate.js","../src/itemstemplate/mobileinterfacetemplate.js","../src/itemstemplate/androidtemplate.js","../src/itemstemplate/iphonetemplate.js","../src/controls/icalsyncpopup.js","../src/controls/aftersynctour.js"],"sourcesContent":["// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {SyncStatusPopup} from \"calendar.sync.manager\";\n\nexport default class StatusBlock\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connections = options.connections;\n\t\tthis.withStatusLabel = options.withStatusLabel;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t\tthis.popupId = options.popupId;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tthis.status = status;\n\n\t\treturn this;\n\t}\n\n\tsetConnections(connections)\n\t{\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n\n\tgetContent()\n\t{\n\t\tlet statusInfoBlock;\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-success calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_SUCCESS')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-danger calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_ALERT')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-primary calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_NOT_CONNECTED')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tstatusInfoBlock.addEventListener('mouseenter', () => {\n\t\t\tthis.handlerMouseEnter(statusInfoBlock);\n\t\t});\n\n\t\tstatusInfoBlock.addEventListener('mouseleave', () => {\n\t\t\tthis.handlerMouseLeave();\n\t\t});\n\n\t\tthis.statusBlock = Tag.render `\n\t\t\t<div class=\"calendar-sync-status-block\" id=\"calendar-sync-status-block\">\n\t\t\t\t${this.getStatusTextLabel()}\n\t\t\t\t${statusInfoBlock}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.statusBlock;\n\t}\n\n\tgetStatusTextLabel()\n\t{\n\t\treturn this.withStatusLabel\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"calendar-sync-status-subtitle\">\n\t\t\t\t\t<span data-hint=\"\"></span>\n\t\t\t\t\t<span class=\"calendar-sync-status-text\">${Loc.getMessage('LABEL_STATUS_INFO')}:</span>\n\t\t\t\t</div>`\n\t\t\t: ''\n\t\t;\n\t}\n\n\thandlerMouseEnter(statusBlock)\n\t{\n\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\t\tthis.showPopup(statusBlock);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.statusBlockEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.statusBlockLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tshowPopup(node)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tthis.popup = this.getPopup(node);\n\t\t\tthis.popup.show();\n\n\t\t\tthis.addPopupHandlers();\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\taddPopupHandlers()\n\t{\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', () =>\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tclearTimeout(this.statusBlockLeaveTimeout);\n\t\t});\n\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () =>\n\t\t{\n\t\t\tthis.hidePopup();\n\t\t});\n\t}\n\n\tgetPopup(node)\n\t{\n\t\treturn SyncStatusPopup.createInstance({\n\t\t\tconnections: this.connections,\n\t\t\twithUpdateButton: this.popupWithUpdateButton,\n\t\t\tnode: node,\n\t\t\tid: this.popupId,\n\t\t});\n\t}\n\n\trefresh(status, connections)\n\t{\n\t\tthis.status = status;\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n}","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache} from \"main.core\";\nimport StatusBlock from \"./controls/statusblock\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\n\nexport default class AuxiliarySyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:auxiliary-sync-slider';\n\tSLIDER_WIDTH = 684;\n\tLOADER_NAME = \"calendar:loader\";\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\n\t\tthis.statusBlockEnterTimeout = null;\n\t\tthis.statusBlockLeaveTimeout = null;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory:false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.setGridContent();\n\t\t\t\t},\n\t\t\t\t// onMessage: (event) => {\n\t\t\t\t// \tif (event.getEventId() === 'refreshSliderGrid')\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.refreshData();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t// onClose: (event) => {\n\t\t\t\t// \tBX.SidePanel.Instance.postMessageTop(window.top.BX.SidePanel.Instance.getTopSlider(), \"refreshCalendarGrid\", {});\n\t\t\t\t// },\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap\">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t${this.getMobileHeader()}\n\t\t\t\t${this.getMobileContentWrapper()}\n\t\t\t\t${this.getWebHeader()}\n\t\t\t\t${this.getWebContentWrapper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t${this.getMainHeader()}\n\t\t\t\t${this.getStatusBlockContent(this.getConnections())}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetMainHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mainHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"calendar-sync-header-text\">${Loc.getMessage('SYNC_CALENDAR_HEADER_NEW')}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t<div id=\"calendar-sync-mobile\" class=\"calendar-sync-mobile\"></div>\n\t\t`;\n\t\t});\n\n\t}\n\n\tgetWebContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div id=\"calendar-sync-web\" class=\"calendar-sync-web\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_MOBILE_HEADER')}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWebHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_WEB_HEADER')}</div>\n\t\t`;\n\t\t});\n\t}\n\n\tgetStatusBlockContent(connections)\n\t{\n\t\tthis.statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: this.status,\n\t\t\tconnections: connections,\n\t\t\twithStatusLabel: true,\n\t\t\tpopupWithUpdateButton: true,\n\t\t\tpopupId: 'calendar-syncPanel-status',\n\t\t});\n\n\t\tthis.statusBlockContent =  this.statusBlock.getContent()\n\t\treturn this.statusBlockContent;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsetGridContent()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\tthis.showWebGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'web';\n\t\t}));\n\n\t\tthis.showMobileGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'mobile';\n\t\t}));\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\tshowMobileGridContent(items)\n\t{\n\t\tconst wrapper = this.getMobileContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems:  items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio:  \"55%\",\n\t\t\titemMinWidth:  180,\n\t\t\ttileMargin:  7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tthis.blockStatusContent = this.statusBlock.refresh(status, this.getConnections()).getContent();\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.setGridContent();\n\t}\n}","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Event, Loc, Tag, Type, Text } from 'main.core';\n\nexport default class SyncPanelUnit\n{\n\tlogoClassName = '';\n\n\tconstructor(options)\n\t{\n\t\tthis.options = options;\n\t\tthis.connectionProvider = this.options.connectionProvider;\n\t}\n\n\tgetConnectionTemplate()\n\t{\n\t\tif (!this.connectionTemplate)\n\t\t{\n\t\t\tthis.connectionTemplate = this.connectionProvider.getClassTemplateItem().createInstance(this.connectionProvider);\n\t\t}\n\t\t\n\t\treturn this.connectionTemplate;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.unitNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-item\">\n\t\t\t\t<div class=\"calendar-sync__calendar-item--logo\">\n\t\t\t\t\t${this.getLogoNode()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__calendar-item--container\">\n\t\t\t\t\t<div class=\"calendar-sync__calendar-item--title\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getSyncInfoWrap()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonsWrap()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitNode;\n\t}\n\n\tgetLogoNode()\n\t{\n\t\treturn Tag.render`<div class=\"calendar-sync__calendar-item--logo-image ${this.connectionProvider.getSyncPanelLogo()}\"></div>`;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.connectionProvider.getSyncPanelTitle();\n\t}\n\n\tgetSyncInfoWrap()\n\t{\n\t\tthis.syncInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t<span data-role=\"sync_info_text\" />\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncInfoWrap;\n\t}\n\n\tsetSyncStatus(mode)\n\t{\n\t\tthis.unitNode.className = 'calendar-sync__calendar-item';\n\t\tswitch (mode)\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tDom.addClass(this.unitNode, '--complete');\n\t\t\t\tthis.setSyncInfoStatusText(this.formatSyncTime(this.connectionProvider.getSyncDate()));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tDom.addClass(this.unitNode, '--error');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_ERROR'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tDom.addClass(this.unitNode, '--pending');\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tDom.addClass(this.unitNode, '--active');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_SYNCHRONIZING'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetSyncInfoStatusText(text)\n\t{\n\t\tconst syncInfoStatusText = this.syncInfoWrap.querySelector('[data-role=\"sync_info_text\"]');\n\t\tif (Type.isElementNode(syncInfoStatusText))\n\t\t{\n\t\t\tsyncInfoStatusText.innerHTML = Text.encode(text).toUpperCase();\n\t\t}\n\t}\n\n\tgetButtonsWrap()\n\t{\n\t\tif (!Type.isElementNode(this.buttonsWrap))\n\t\t{\n\t\t\tthis.buttonsWrap = Tag.render`<div class=\"calendar-sync__calendar-item--buttons\">\n\t\t\t\t${this.getButton()}\n\t\t\t\t${this.getMoreButton()}\n\t\t\t</div>`;\n\n\t\t\tEvent.bind(this.moreButton, 'click', this.handleItemClick.bind(this));\n\t\t}\n\n\t\treturn this.buttonsWrap;\n\t}\n\n\trefreshButton()\n\t{\n\t\tDom.clean(this.buttonsWrap);\n\t\tthis.moreButton = this.buttonsWrap.appendChild(this.getMoreButton());\n\t\tthis.button = this.buttonsWrap.appendChild(this.getButton());\n\t}\n\n\tgetButton()\n\t{\n\t\tswitch (this.connectionProvider.getStatus())\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-success\" class=\"ui-btn ui-btn-icon-success ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-failed\" class=\"ui-btn ui-btn-icon-fail ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-pending\" class=\"ui-btn ui-btn-disabled ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_PENDING')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_NOT_CONNECTED')}\n\t\t\t\t\t</a>`;\n\t\t\t\tEvent.bind(this.button, 'click', this.handleItemClick.bind(this));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round ui-btn-clock ui-btn-disabled\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>`;\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.button;\n\t}\n\n\tgetMoreButton()\n\t{\n\t\tthis.moreButton = Tag.render`\n\t\t\t<div \n\t\t\t\tdata-role=\"more-button\" \n\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-light-border calendar-sync__calendar-item--more\"\n\t\t\t></div>`;\n\t\treturn this.moreButton;\n\t}\n\n\thandleItemClick(e)\n\t{\n\t\tconst status = this.connectionProvider.getStatus();\n\n\t\tif ([this.connectionProvider.STATUS_SUCCESS, this.connectionProvider.STATUS_FAILED].includes(status))\n\t\t{\n\t\t\tif (this.connectionProvider.hasMenu())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.showMenu(this.button);\n\t\t\t}\n\t\t\telse if (this.connectionProvider.getConnectStatus())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openActiveConnectionSlider(this.connectionProvider.getConnection());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openInfoConnectionSlider();\n\t\t\t}\n\t\t}\n\t\telse if(status === this.connectionProvider.STATUS_NOT_CONNECTED)\n\t\t{\n\t\t\tthis.getConnectionTemplate().handleConnectButton();\n\t\t}\n\t}\n\n\tformatSyncTime(date)\n\t{\n\t\tconst now = new Date();\n\t\tlet timestamp = date;\n\t\tif (Type.isDate(date))\n\t\t{\n\t\t\ttimestamp = Math.round(date.getTime() / 1000);\n\t\t\tconst secondsAgo = parseInt((now - date) / 1000);\n\t\t\tif (secondsAgo < 60)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t\t[\"i\" , \"iago\"],\n\t\t\t\t[\"H\", \"Hago\"],\n\t\t\t\t[\"d\", \"dago\"],\n\t\t\t\t[\"m100\", \"mago\"],\n\t\t\t\t[\"m\", \"mago\"],\n\t\t\t\t[\"-\", \"\"]\n\t\t\t],\n\t\t\ttimestamp\n\t\t);\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache, Event} from \"main.core\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\nimport AuxiliarySyncPanel from \"./auxiliarysyncpanel\";\nimport SyncPanelUnit from './syncpanelunit';\n\nexport default class SyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:sync-slider';\n\tHELPDESK_CODE = 11828176;\n\tSLIDER_WIDTH = 770;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\t\tthis.BX = window.top.BX || window.BX;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displayConnectionUnits();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t<div class=\"calendar-sync__content\">\n\t\t\t\t${this.getUnitsContentWrapper()}\n\t\t\t\t${this.getFooterWrapper()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeaderWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__header\">\n\t\t\t\t<div class=\"calendar-sync__header-logo\"></div>\n\t\t\t\t<div class=\"calendar-sync__header-container\">\n\t\t\t\t\t<div class=\"calendar-sync__header-title\">${Loc.getMessage('CAL_SYNC_TITLE_NEW')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__header-sub-title\">${Loc.getMessage('CAL_SYNC_SUB_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUnitsContentWrapper()\n\t{\n\t\tthis.unitsContentWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-list\">\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitsContentWrapper;\n\t}\n\n\tgetFooterWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left\">\n\t\t\t\t${this.getExtraInfoWithCheckIcon()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left--double\">\n\t\t\t\t${this.getOpenAuxiliaryPanelLink()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-left--double\">\n\t\t\t\t${this.getOpenHelpLink()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetOpenAuxiliaryPanelLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">\n\t\t\t\t${Loc.getMessage('CAL_OPEN_AUXILIARY_PANEL')}\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\t\tthis.auxiliarySyncPanel = new AuxiliarySyncPanel({\n\t\t\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t});\n\t\t\t\tthis.auxiliarySyncPanel.openSlider();\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetOpenHelpLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">${Loc.getMessage('CAL_SHOW_SYNC_HELP')}</divclass>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tif(this.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.BX.Helper.show(\"redirect=detail&code=\" + this.HELPDESK_CODE);\n\t\t\t}\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tdisplayConnectionUnits()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel || item.connected;\n\t\t});\n\n\t\tthis.renderConnectionUnits(items);\n\t}\n\n\trenderConnectionUnits(providers)\n\t{\n\t\tDom.clean(this.unitsContentWrapper);\n\t\tproviders.forEach((provider) => {\n\t\t\tconst interfaceUnit = new SyncPanelUnit({connectionProvider: provider});\n\t\t\tprovider.setInterfaceUnit(interfaceUnit);\n\t\t\tinterfaceUnit.renderTo(this.unitsContentWrapper);\n\t\t\tinterfaceUnit.setSyncStatus(provider.getStatus());\n\t\t});\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.displayConnectionUnits();\n\t\tthis.auxiliarySyncPanel.refresh(status, connectionsProviders);\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Tag } from \"main.core\";\n\nexport default class GridUnit extends BX.TileGrid.Item\n{\n\tconstructor(item)\n\t{\n\t\tsuper({\n\t\t\tid: item.type,\n\t\t});\n\t\tthis.item = item;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.gridUnit = Tag.render`<div class=\"calendar-sync-item ${this.getAdditionalContentClass()}\" style=\"${this.getContentStyles()}\">\n\t\t\t<div class=\"calendar-item-content\">\n\t\t\t\t${this.getImage()}\n\t\t\t\t${this.getTitle()}\n\t\t\t\t${(this.isActive() ? this.getStatus() : '')}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.gridUnit.addEventListener('click', this.onClick.bind(this));\n\n\t\treturn this.gridUnit;\n\t}\n\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-title\">${BX.util.htmlspecialchars(this.item.getGridTitle())}</div>`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetImage()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-item-image\">\n\t\t\t\t<div class=\"calendar-sync-item-image-item\" style=\"background-image: ${'url(' + this.item.getGridIcon() + ')'}\"></div>\n\t\t\t</div>`;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-status\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.item.getConnectStatus();\n\t}\n\n\tgetAdditionalContentClass()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\tif (this.item.getSyncStatus())\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-selected';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-failed';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetContentStyles()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn 'background-color:' + this.item.getGridColor() + ';';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\topen_connection_slider: 'Y',\n\t\t\t\tsync_connection_type: this.item.getType(),\n\t\t\t\tsync_connection_status: this.item.getSyncStatus() ? 'Y' : 'N',\n\t\t\t}\n\t\t});\n\n\t\tif (this.item.hasMenu())\n\t\t{\n\t\t\tthis.item.showMenu(this.gridUnit);\n\t\t}\n\t\telse if (this.item.getConnectStatus())\n\t\t{\n\t\t\tthis.item.openActiveConnectionSlider(this.item.getConnection());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.item.openInfoConnectionSlider();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\n\nexport default class ConnectionControls\n{\n\tuserName = null;\n\tserver = null;\n\tconnectionName = null;\n\n\tconstructor(options = null)\n\t{\n\t\tthis.addButtonText = Loc.getMessage('CAL_UPPER_CONNECT');\n\t\tthis.removeButtonText = Loc.getMessage('CAL_UPPER_DISCONNECT');\n\t\tthis.saveButtonText = Loc.getMessage('CAL_UPPER_SAVE');\n\n\t\tif (options !== null)\n\t\t{\n\t\t\tthis.userName = BX.util.htmlspecialchars(options.userName);\n\t\t\tthis.server = BX.util.htmlspecialchars(options.server);\n\t\t\tthis.connectionName = BX.util.htmlspecialchars(options.connectionName);\n\t\t}\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-form\"></div>\n\t\t`;\n\t}\n\n\tgetForm()\n\t{\n\t\treturn Tag.render`\n\t\t\t<form class=\"calendar-sync-slider-form\" action=\"\">\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_NAME')}\\\" name=\"name\" value=\"${this.connectionName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_SERVER_ADDRESS')}\\\" name=\"server\" value=\"${this.server || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_USER_NAME')}\\\" name=\"user_name\" value=\"${this.userName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" name=\"password\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_PASSWORD')}\\\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetAddButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"connect-button\" class=\"ui-btn ui-btn-light-border\">${this.addButtonText}</button>\n\t\t`;\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"disconnect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.removeButtonText}</button>\n\t\t`;\n\t}\n\n\tgetSaveButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"edit-connect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.saveButtonText}</button>\n\t\t`;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-form-btn\"></div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\nimport { Type, Tag, Loc, Runtime, Dom } from 'main.core';\nimport { Util } from \"calendar.util\";\nimport { Popup } from 'main.popup';\n\nexport default class MobileSyncBanner\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tQRCODE_SIZE = 186;\n\tQRCODE_COLOR_LIGHT = '#ffffff';\n\tQRCODE_COLOR_DARK = '#000000';\n\tQRCODE_WRAP_CLASS = 'calendar-sync-slider-qr-container';\n\tQRC = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type;\n\t\tthis.helpDeskCode = options.helpDeskCode || '11828176';\n\t\tthis.alreadyConnectedToNew = this.type === 'android'\n\t\t \t? Util.isGoogleConnected()\n\t\t\t: Util.isIcloudConnected()\n\t\t;\n\t}\n\n\tshow()\n\t{\n\t}\n\n\tshowInPopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync-qr-popup',\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 580,\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t});\n\t\tthis.popup.show();\n\n\t\tthis.initQrCode().then(this.drawQRCode.bind(this));\n\t}\n\n\tclose()\n\t{\n\t\tthis.popup.close();\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div class=\"calendar-sync-qr-popup-content\">\n\t\t\t\t<div class=\"calendar-sync-qr-popup-title\">\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-content\">\n\t\t\t\t\t<img class=\"calendar-sync-slider-phone-img\" src=\"/bitrix/images/calendar/sync/qr-background.svg\" alt=\"\">\n\t\t\t\t\t${this.getQrContainer()}\n\t\t\t\t\t${this.getInstructionContainer()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tUtil.initHintNode(this.DOM.container.querySelector('.calendar-notice-mobile-banner'));\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetQrContainer()\n\t{\n\t\tif (!this.DOM.qrContainer)\n\t\t{\n\t\t\tthis.DOM.qrContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-qr\">\n\t\t\t\t\t<div class=\"${this.QRCODE_WRAP_CLASS}\">${Util.getLoader(this.QRCODE_SIZE)}</div>\n\t\t\t\t\t<span class=\"calendar-sync-slider-logo\"></span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.qrContainer;\n\t}\n\n\tgetInstructionContainer()\n\t{\n\t\tif (!this.DOM.instructionContainer)\n\t\t{\n\t\t\tthis.DOM.instructionContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-instruction\">\n\t\t\t\t\t<!--<div class=\"calendar-sync-slider-instruction-subtitle\"></div>-->\n\t\t\t\t\t${this.getInstructionTextContainer()}\n\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-notice\">${Loc.getMessage('SYNC_MOBILE_NOTICE')}</div>\n\t\t\t\t\t<a href=\"javascript:void(0);\" \n\t\t\t\t\t\t\tonclick=\"BX.Helper.show('redirect=detail&code=' + ${this.getHelpdeskCode()},{zIndex:3100,}); event.preventDefault();\" \n\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_ABOUT_BTN')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.instructionContainer;\n\t}\n\n\tgetInstructionTextContainer()\n\t{\n\t\tif (!this.DOM.instructionTextContainer)\n\t\t{\n\t\t\tthis.DOM.instructionTextContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-instruction-title\">\n\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_NOTICE_HOW_TO') + ' '} \n\t\t\t\t\t${this.type !== 'iphone' ? this.getAndroidHintIcon() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.instructionTextContainer;\n\t}\n\n\tgetAndroidHintIcon()\n\t{\n\t\tif (!this.DOM.androidHintIcon)\n\t\t{\n\t\t\tthis.DOM.androidHintIcon = Tag.render`\n\t\t\t<span \n\t\t\t\tclass=\"calendar-notice-mobile-banner\" \n\t\t\t\tdata-hint=\"${Loc.getMessage('CAL_ANDROID_QR_CODE_HINT')}\" \n\t\t\t\tdata-hint-no-icon=\"Y\">\n\t\t\t</span>`;\n\t\t}\n\n\t\treturn this.DOM.androidHintIcon;\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.DOM.container.querySelector('.' + this.QRCODE_WRAP_CLASS);\n\t}\n\n\tinitQrCode()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension(['main.qrcode']).then((exports) => {\n\t\t\t\tif (exports && exports.QRCode)\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tdrawQRCode(wrap)\n\t{\n\t\tif (!Type.isDomNode(wrap))\n\t\t{\n\t\t\twrap = this.getInnerContainer();\n\t\t}\n\n\t\tthis.getMobileSyncUrl().then((link) => {\n\t\t\tDom.clean(wrap);\n\t\t\tthis.QRC = new QRCode(wrap, {\n\t\t\t\ttext: link,\n\t\t\t\twidth: this.getSize(),\n\t\t\t\theight: this.getSize(),\n\t\t\t\tcolorDark : this.QRCODE_COLOR_DARK,\n\t\t\t\tcolorLight : this.QRCODE_COLOR_LIGHT,\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.H\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn Loc.getMessage('SYNC_BANNER_MOBILE_TITLE');\n\t}\n\n\tgetMobileSyncUrl()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAuthLink', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: this.type ? 'slider' : 'banner',\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.data.link);\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSize()\n\t{\n\t\treturn this.QRCODE_SIZE;\n\t}\n\n\tgetDetailHelpUrl()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.getHelpdeskCode();\n\t}\n\n\tgetHelpdeskCode()\n\t{\n\t\treturn this.helpDeskCode;\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Dom, Event, Type } from 'main.core';\nimport { EventEmitter } from \"main.core.events\";\nimport { Util } from 'calendar.util';\n\nexport class InterfaceTemplate extends EventEmitter\n{\n\tstatic SLIDER_WIDTH = 606;\n\tsliderWidth = 840;\n\tstatic SLIDER_PREFIX = 'calendar:connection-sync-';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.InterfaceTemplate');\n\n\t\tthis.title = options.title;\n\t\tthis.helpdeskCode = options.helpDeskCode;\n\t\tthis.titleInfoHeader = options.titleInfoHeader;\n\t\tthis.descriptionInfoHeader = options.descriptionInfoHeader;\n\t\tthis.titleActiveHeader = options.titleActiveHeader;\n\t\tthis.descriptionActiveHeader = options.descriptionActiveHeader;\n\t\tthis.sliderIconClass = options.sliderIconClass;\n\t\tthis.iconPath = options.iconPath;\n\t\tthis.iconLogoClass = options.iconLogoClass || '';\n\t\tthis.color = options.color;\n\t\tthis.provider = options.provider;\n\t\tthis.connection = options.connection;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t}\n\n\tstatic createInstance(provider, connection = null)\n\t{\n\t\treturn new this(provider, connection);\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tthis.disconnectButton = this.getDisconnectButton();\n\t\tEvent.bind(this.disconnectButton, 'click', this.handleDisconnectButton.bind(this));\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.disconnectButton}\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__scope\">\n\t\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t\t${this.getContentActiveBody()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentActiveBodySectionsHeader()}\n\t\t\t${this.getContentActiveBodySectionsManager()}\n\t\t`;\n\t}\n\n\tshowHelp()\n\t{\n\t\tif (BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=\" + this.helpdeskCode);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHelpdeskLink()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.helpdeskCode;\n\t}\n\n\tgetHeaderTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.iconLogoClass;\n\t}\n\n\tgetContentInfoBodyHeader()\n\t{\n\t\tif (!this.infoBodyHeader)\n\t\t{\n\t\t\tthis.infoBodyHeader = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-flex-wrap\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t\t\t${this.titleInfoHeader}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t\t${this.descriptionInfoHeader}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getContentInfoBodyHeaderHelper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.infoBodyHeader;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoWarning()\n\t{\n\t\tconst mobileSyncButton = this.getMobileSyncControlButton();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonOtherSyncInfo.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonConnectClick.bind(this));\n\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-section-warning calendar-sync-slider-section-col\">\n\t\t\t\t\t<div class=\"ui-alert ui-alert-warning ui-alert-icon-info\">\n\t\t\t\t\t\t<span class=\"ui-alert-message\">${this.warningText}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-button-warning\">${mobileSyncButton}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetMobileSyncControlButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-sm ui-btn-round\">\n\t\t\t\t${this.mobileSyncButtonText}\n\t\t\t</button>\n\t\t`\n\t}\n\n\tsetProvider(provider)\n\t{\n\t\tthis.provider = provider;\n\t}\n\n\t// TODO: move logic to provider\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.removeConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'Y', //by default\n\t\t\t}\n\t\t})\n\t\t.then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\trunUpdateInfo()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setSectionStatus', {\n\t\t\tdata: {\n\t\t\t\tsectionStatus: this.sectionStatusObject,\n\t\t\t},\n\t\t})\n\t\t.then((response) => {\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n\n\trefresh(connection)\n\t{\n\t\tthis.connection = connection;\n\t\tif (this.connection)\n\t\t{\n\t\t\tthis.statusBlock\n\t\t\t\t.setStatus(this.connection.getStatus())\n\t\t\t\t.setConnections([this.connection]);\n\t\t}\n\t\t\n\t\tDom.replace(document.getElementById('status-info-block'), this.statusBlock.getContent());\n\t}\n\n\thandleConnectButton()\n\t{\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border calendar-sync__account-btn\">${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}</button>\n\t\t`;\n\t}\n\n\tgetSyncStatusClassName()\n\t{\n\t\treturn this.provider.getStatus() === \"success\" ? '--complete' : '--error';\n\t}\n\t\n\tgetContentActiveBodySectionsHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">${Loc.getMessage('CAL_SYNC_SELECTED_LIST_TITLE')}</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodySectionsManager()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-check-list\">\n\t\t\t\t${this.getContentActiveBodySections()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t}\n\n\tgetContentActiveBodySections()\n\t{\n\t\tconst sectionList = [];\n\t\tthis.sectionList.forEach(section => {\n\t\t\tsectionList.push(Tag.render`\n\t\t\t\t<label class=\"calendar-sync__account-check-list-label\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"calendar-sync__account-check-list-input\"\n\t\t\t\t\t\tvalue=\"${BX.util.htmlspecialchars(section['ID'])}\" \n\t\t\t\t\t\tonclick=\"${this.onClickCheckSection.bind(this)}\" ${section['ACTIVE'] === 'Y' ? 'checked' : ''}/>\n\t\t\t\t\t<span class=\"calendar-sync__account-check-list-text\">${BX.util.htmlspecialchars(section['NAME'])}</span>\n\t\t\t\t</label>\n\t\t\t`);\n\t\t});\n\n\t\treturn sectionList;\n\t}\n\n\tshowUpdateSectionListNotification()\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CAL_SYNC_CALENDAR_LIST_UPDATED')\n\t\t)\n\t}\n\n\thandleDisconnectButton(event)\n\t{\n\t\tif (Type.isElementNode(this.disconnectButton))\n\t\t{\n\t\t\tDom.addClass(this.disconnectButton, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t}\n\t\tevent.preventDefault();\n\t\t// this.provider.removeConnection();\n\t\tthis.sendRequestRemoveConnection(this.connection.getId());\n\t}\n\t\n\tdeactivateConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.deactivateConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'N', //by default\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tthis.provider.closeSlider();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\t\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {InterfaceTemplate} from './interfacetemplate';\nimport {Dom, Loc, Tag} from \"main.core\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\n\nexport class CaldavInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\t\tconnection_type: this.provider.getType(),\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestAddConnection(form);\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\tconst formObject = new ConnectionControls({\n\t\t\tserver: this.connection.addParams.server,\n\t\t\tuserName: this.connection.addParams.userName,\n\t\t\tconnectionName: this.connection.connectionName,\n\t\t});\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst bodyHeader = this.getContentActiveBodyHeader();\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tsendRequestAddConnection(form)\n\t{\n\t\tconst fd = new FormData(form);\n\t\tBX.ajax.runAction('calendar.api.syncajax.addConnection', {\n\t\t\tdata: {\n\t\t\t\tname: fd.get('name'),\n\t\t\t\tserver: fd.get('server'),\n\t\t\t\tuserName: fd.get('user_name'),\n\t\t\t\tpass: fd.get('password'),\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tBX.reload();\n\t\t}, response => {\n\t\t\tconst button = form.querySelector('#connect-button');\n\t\t\tthis.showAlertPopup(response.errors[0], button);\n\t\t});\n\t}\n\n\tshowAlertPopup(alert, button)\n\t{\n\t\tlet message = '';\n\t\tif (alert.code === 'incorrect_parameters')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_INCORRECT_PARAMETERS');\n\t\t}\n\t\telse if (alert.code === 'tech_problem')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_TECH_PROBLEM');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_DEFAULT');\n\t\t}\n\n\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\tmessage: message,\n\t\t\ttitle: alert.message,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tokCaption: Loc.getMessage('CAL_TEXT_BUTTON_RETURN_TO_SETTINGS'),\n\t\t\tminWidth: 358,\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: 3021,\n\t\t\t\theight: 166,\n\t\t\t\twidth: 358,\n\t\t\t\tclassName: 'calendar-alert-popup-connection'\n\t\t\t},\n\t\t\tonOk: () => {\n\t\t\t\tDom.removeClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class CaldavTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_CALDAV\"),\n\t\t\thelpDeskCode: '5697365',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_CALDAV_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_CALDAV_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALDAV_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_CALDAV_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-caldav',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\tcolor: '#1eae43',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport { Util } from 'calendar.util';\n\nexport default class ExchangeTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_EXCHANGE\"),\n\t\t\thelpDeskCode: '9860971',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_EXCHANGE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_EXCHANGE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_EXCHANGE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office',\n\t\t\ticonLogoClass: '--exchange',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\tcolor: '#54d0df',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBody()}\n\t\t\t${this.getHelpdeskBlock()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetContentBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">\n\t\t\t\t${Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHelpdeskBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\n\nimport { Cache, Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncWizard extends EventEmitter\n{\n\tTYPE = 'undefined';\n\tSLIDER_NAME = 'calendar:sync-wizard-slider';\n\tSLIDER_WIDTH = 450;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\tsyncStagesList = [];\n\taccountName = '';\n\tHELPDESK_CODE = 11828176;\n\tMIN_UPDATE_STATE_DELAY = 1500; // in ms\n\tCONFETTI_DELAY = 1000;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncWizard');\n\n\t\tthis.BX = window.top.BX || window.BX;\n\n\t\tthis.pullWizardEventHandler = this.handlePullNewEvent.bind(this);\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t\tthis.logoIconClass = '';\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.SLIDER_NAME, {\n\t\t\tcontentCallback: slider => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displaySyncStages();\n\t\t\t\t\tthis.bindButtonsHandlers();\n\t\t\t\t},\n\t\t\t\tonDestroy: this.handleCloseWizard.bind(this)\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.syncIsFinished = false;\n\t\tthis.errorStatus = false;\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t${this.getTitleWrapper()}\n\t\t\t\t\t\t${this.getSyncStagesWrapper()}\n\t\t\t\t\t\t${this.getInfoStatusWrapper()}\n\t\t\t\t\t\t${this.getErrorWrapper()}\n\t\t\t\t\t\t${this.getFinalCheckWrapper()}\n\t\t\t\t\t\t${this.getHelpLinkWrapper()}\n\t\t\t\t\t\t${this.getButtonWrapper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleWrapper()\n\t{\n\t\tthis.syncTitleWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__account\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${this.getAccountNameNode()}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${this.getActiveStatusNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncTitleWrapper;\n\t}\n\n\tgetSyncStagesWrapper()\n\t{\n\t\tthis.syncStagesWrapper = Tag.render`<div class=\"calendar-sync-stages-wrap\"></div>`;\n\t\treturn this.syncStagesWrapper;\n\t}\n\n\tgetInfoStatusWrapper()\n\t{\n\t\tthis.infoStatusWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__notification\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-title\">${Loc.getMessage('CAL_INFO_STATUS_CONG_1')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">${Loc.getMessage('CAL_INFO_STATUS_CONG_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.infoStatusWrapper;\n\t}\n\n\tgetErrorWrapper()\n\t{\n\t\tthis.errorWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__error\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">\n\t\t\t\t\t\t<div class=\"calendar-sync__notification-message-inner\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_1')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.errorWrapper;\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\tthis.buttonWrapper = Tag.render`\n\t\t\t<div style=\"display: none\" class=\"calendar-sync__content-block --align-center\">\n\t\t\t\t<a class=\"ui-btn ui-btn-lg ui-btn-primary ui-btn-round\" data-role=\"continue_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_CONTINUE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"everything_is_fine_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_EVERYTHING_IS_FINE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"close_button\">\n\t\t\t\t\t${Loc.getMessage('CAL_ERROR_CLOSE')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.buttonWrapper;\n\t}\n\n\tgetNewEventCardWrapper()\n\t{\n\t\tthis.newEventCardWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.newEventCardWrapper;\n\t}\n\n\tgetSkeletonWrapper()\n\t{\n\t\tthis.skeletonWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --skeleton\">\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-box\">\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-inline-box\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${this.getSkeletonTitle()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t\treturn this.skeletonWrapper;\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn '';\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAccountNameNode()\n\t{\n\t\tif (!Type.isElementNode(this.accountNameNode))\n\t\t{\n\t\t\tthis.accountNameNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-title\">${this.getAccountName()}</div>\n\t\t`;\n\t\t}\n\t\treturn this.accountNameNode;\n\t}\n\n\tsetAccountName(value)\n\t{\n\t\tthis.accountName = value;\n\t}\n\n\tgetAccountName()\n\t{\n\t\treturn this.accountName;\n\t}\n\n\tgetActiveStatusNode()\n\t{\n\t\tif (!Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode = Tag.render`\n\t\t\t\t<span class=\"calendar-active-status-node-carousel\">\n\t\t\t\t\t<span class=\"calendar-active-status-node-phrase\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS')}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t`;\n\n\t\t\tthis.startStatusCarousel(this.activeStatusNode);\n\t\t}\n\n\t\treturn this.activeStatusNode;\n\t}\n\n\tstartStatusCarousel(statusNode)\n\t{\n\t\tconst progressStatuses = [\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_FIRST'),\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_SECOND')\n\t\t];\n\n\t\tlet dotCycle = 1;\n\n\t\tthis.statusCarouselInterval = setInterval(() => {\n\t\t\tconst currentPhraseNode = statusNode.firstElementChild;\n\t\t\tif (this.countDots(currentPhraseNode.innerText) < 3)\n\t\t\t{\n\t\t\t\tcurrentPhraseNode.innerText += '.';\n\t\t\t\tstatusNode.style.width = (currentPhraseNode.offsetWidth + 1) + 'px';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dotCycle < 2)\n\t\t\t{\n\t\t\t\tdotCycle++;\n\t\t\t\tcurrentPhraseNode.innerText = currentPhraseNode.innerText.slice(0, -3);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdotCycle = 1;\n\n\t\t\tif (progressStatuses.length > 0)\n\t\t\t{\n\t\t\t\tconst status = progressStatuses.shift();\n\t\t\t\tthis.animateNextStatus(statusNode, status);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst almostDoneStatus = Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_ALMOST_DONE');\n\t\t\t\tthis.animateNextStatus(statusNode, almostDoneStatus);\n\t\t\t\tstatusNode.style.width = '';\n\t\t\t\tclearInterval(this.statusCarouselInterval);\n\t\t\t}\n\t\t}, 900);\n\t}\n\n\tanimateNextStatus(carousel, phraseText)\n\t{\n\t\tconst currentPhraseNode = carousel.firstElementChild;\n\t\tconst nextPhraseNode = Tag.render`\n\t\t\t<span class=\"calendar-active-status-node-phrase\">${phraseText}</span>\n\t\t`;\n\t\tcarousel.append(nextPhraseNode);\n\n\t\tconst maxWidth = Math.max(nextPhraseNode.offsetWidth, currentPhraseNode.offsetWidth);\n\t\tcarousel.style.width = (maxWidth + 1) + 'px';\n\n\t\tcurrentPhraseNode.style.transition = ''; // turn on animation\n\t\tcurrentPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\t\tnextPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\n\t\tsetTimeout(() => {\n\t\t\tcurrentPhraseNode.remove();\n\t\t\tnextPhraseNode.style.transition = 'none'; // turn off animation\n\t\t\tnextPhraseNode.style.transform = '';\n\t\t}, 300);\n\t}\n\n\tcountDots(string)\n\t{\n\t\treturn (string.match(/\\./g) || []).length;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [];\n\t}\n\n\tgetSyncStages()\n\t{\n\t\treturn this.syncStagesList;\n\t}\n\n\tgetHelpDeskCode()\n\t{\n\t\treturn this.HELPDESK_CODE;\n\t}\n\n\tdisplaySyncStages()\n\t{\n\t\tDom.clean(this.syncStagesWrapper);\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tstage.renderTo(this.syncStagesWrapper);\n\t\t});\n\t}\n\n\tbindButtonsHandlers()\n\t{\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tEvent.bind(continueButton, 'click', this.handleContinueButtonClick.bind(this));\n\t\t}\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\tEvent.bind(eifButton, 'click', this.handleFinalCloseButtonClick.bind(this));\n\t\t}\n\t}\n\n\thandleContinueButtonClick()\n\t{\n\t\tthis.showFinalStage();\n\t}\n\n\tshowFinalStage()\n\t{\n\t\tthis.syncIsFinished = true;\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\teifButton.style.display = '';\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\n\t\tthis.showFinalCheckWrapper();\n\t\tthis.showHelpLinkWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('startWizardWaitingMode');\n\t}\n\n\tisSyncFinished()\n\t{\n\t\treturn this.syncIsFinished;\n\t}\n\n\thandleFinalCloseButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'complete_wizard_close',\n\t\t\t\tconnection_type: this.TYPE\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUpdateState(stateData)\n\t{\n\t\tconst currentTimestamp = Date.now();\n\t\tif (currentTimestamp - this.lastUpdateStateTimestamp > this.MIN_UPDATE_STATE_DELAY)\n\t\t{\n\t\t\tthis.updateState(stateData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.handleUpdateState(stateData);\n\t\t\t}, this.MIN_UPDATE_STATE_DELAY);\n\t\t}\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tif (this.errorStatus)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (stateData.stage === 'connection_created'\n\t\t\t&& stateData.accountName\n\t\t\t&& Type.isElementNode(this.accountNameNode)\n\t\t)\n\t\t{\n\t\t\tthis.setAccountName(stateData.accountName);\n\t\t\tthis.accountNameNode.innerHTML = Text.encode(stateData.accountName)\n\t\t}\n\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t}\n\n\tsetActiveStatusFinished()\n\t{\n\t\tthis.activeStatusNode.style.width = '';\n\t\tclearInterval(this.statusCarouselInterval);\n\t\tthis.syncIsFinished = true;\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_SUCCESS').toUpperCase())\n\t\t\tDom.remove(this.syncTitleWrapper.querySelector('.calendar-sync__account-info--icon'));\n\t\t}\n\t}\n\n\tshowButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\thandlePullNewEvent(event)\n\t{\n\t\tif (event && Type.isFunction(event.getData))\n\t\t{\n\t\t\tconst data = {\n\t\t\t\tcommand: event.getData()[0],\n\t\t\t\t...event.getData()[1]\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tdata.command === 'edit_event'\n\t\t\t\t&& data.newEvent\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t\t\t{\n\t\t\t\t\tconst syncBalloon = this.finalCheckWrapper.querySelector('.calendar-sync__balloon');\n\t\t\t\t\tif (Type.isElementNode(syncBalloon) && Dom.hasClass(syncBalloon, '--progress'))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(syncBalloon, '--progress');\n\t\t\t\t\t\tDom.addClass(syncBalloon, '--done');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst entry = new Entry({ data: data.fields });\n\t\t\t\tthis.displayNewEvent(entry);\n\n\t\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'onPullEvent-calendar',\n\t\t\t\t\tthis.pullWizardEventHandler\n\t\t\t\t);\n\n\t\t\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\t\t\tif (Type.isElementNode(eifButton))\n\t\t\t\t{\n\t\t\t\t\teifButton.innerHTML = Text.encode(Loc.getMessage('CAL_BUTTON_KEEP_GOING'));\n\t\t\t\t\tDom.addClass(eifButton, 'ui-btn-primary');\n\t\t\t\t\tDom.removeClass(eifButton, 'ui-btn-light-border');\n\t\t\t\t}\n\n\t\t\t\tthis.emit('endWizardWaitingMode');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplayNewEvent(entry)\n\t{\n\t\t// Hide skeleton\n\t\tif (Type.isElementNode(this.skeletonWrapper))\n\t\t{\n\t\t\tDom.remove(this.skeletonWrapper);\n\t\t}\n\n\t\tif (Type.isElementNode(this.newEventCardWrapper))\n\t\t{\n\t\t\tthis.newEventCardWrapper.style.display = '';\n\t\t\tDom.clean(this.newEventCardWrapper);\n\t\t\tthis.newEventCardWrapper.appendChild(this.getNewEventCard(entry));\n\t\t}\n\t}\n\n\tgetNewEventCard(entry)\n\t{\n\t\tconst from = new Date(entry.from.getTime() - (parseInt(entry.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\tconst to = new Date(entry.to.getTime() - (parseInt(entry.data['~USER_OFFSET_TO']) || 0) * 1000);\n\t\tconst fromTimestamp = from.getTime();\n\t\tconst dateFrom = BX.date.format(Util.getDayMonthFormat(), fromTimestamp / 1000);\n\t\tconst timeFrom = Util.formatTime(from.getHours(), from.getMinutes());\n\t\tconst timeTo = Util.formatTime(to.getHours(), to.getMinutes());\n\t\tconst timeField = entry.isFullDay()\n\t\t\t\t? Loc.getMessage('CAL_WIZARD_FULL_DAY')\n\t\t\t\t: timeFrom + ' - ' + timeTo;\n\n\t\tthis.newEventCard = Tag.render`\n\t\t\t<div class=\"calendar-sync__balloon --calendar ${entry.isFullDay() ? '--fullday-event' : ''}\">\n\t\t\t\t<div class=\"calendar-sync__content-text\">\n\t\t\t\t\t${dateFrom}\n\t\t\t\t\t<span class=\"calendar-date-year\">\n\t\t\t\t\t\t${BX.date.format('Y', fromTimestamp / 1000)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__content-text\">${BX.date.format('l', fromTimestamp / 1000)}</div>\n\t\t\t\t<div class=\"calendar-sync__time-box\">\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeFrom}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time-notification-box\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${Text.encode(entry.getName())}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${timeField}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeTo}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.newEventCard;\n\t}\n\n\thandleCloseWizard()\n\t{\n\t\tthis.slider = null;\n\n\t\tclearInterval(this.statusCarouselInterval);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('onClose');\n\t}\n\n\tshowConfetti()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tconst bx = Util.getBX();\n\t\t\tbx.UI.Confetti.fire({\n\t\t\t\tparticleCount: 240,\n\t\t\t\tspread: 170,\n\t\t\t\torigin: { y: 0.3, x: 0.9 },\n\t\t\t\tzIndex: (bx.SidePanel.Instance.getTopSlider().getZindex() + 1)\n\t\t\t});\n\t\t}, this.CONFETTI_DELAY);\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.logoIconClass;\n\t}\n\n\tgetSlider()\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetErrorState()\n\t{\n\t\tthis.errorStatus = true;\n\t\tthis.showErrorWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.showButtonWrapper();\n\t\tDom.addClass(this.syncTitleWrapper, '--error');\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_ERROR').toUpperCase())\n\t\t}\n\n\t\tconst closeButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"close_button\"]');\n\t\tif (Type.isElementNode(closeButton))\n\t\t{\n\t\t\tcloseButton.style.display = '';\n\t\t\tEvent.bind(closeButton, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t\t\t{\n\t\t\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tBX.reload();\n\t\t\t});\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Loc, Tag, Type, Event} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncStageUnit\n{\n\tconstructor(options)\n\t{\n\t\tthis.name = options.name || '';\n\t\tthis.title = options.title || '';\n\t\tthis.doneStatus = false;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\t\t\n\t\tEventEmitter.emit('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone');\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.contentNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\">\n\t\t\t\t<div class=\"calendar-sync__content-text --icon-check --disabled\">${this.title}</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.contentNode;\n\t}\n\n\tsetDone()\n\t{\n\t\tthis.doneStatus = true;\n\t\tDom.removeClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n\n\tsetUndone()\n\t{\n\t\tthis.doneStatus = false;\n\t\tDom.addClass(this.contentNode.querySelector('.--icon-check'), '--disabled');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag, Event } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\nimport { Util } from 'calendar.util';\n\n\nexport default class GoogleSyncWizard extends SyncWizard\n{\n\tTYPE = 'google';\n\tSLIDER_NAME = 'calendar:sync-wizard-google';\n\tSTAGE_1_CODE = 'google-to-b24';\n\tSTAGE_2_CODE = 'b24-to-google';\n\tSTAGE_3_CODE = 'b24-events-to-google';\n\tGOOGLE_ON_MOBILE_HELPDESK = 15456338;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.GoogleSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_GOOGLE'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--google';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tlet link;\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --align-center --space-bottom\" style=\"display: none;\">\n\t\t\t\t${link = Tag.render`<a href=\"#\" class=\"calendar-sync__content-link\">\n\t\t\t\t\t${Loc.getMessage('CAL_SYNC_NO_GOOGLE_ON_PHONE')}\n\t\t\t\t</a>`}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tconst helper = Util.getBX().Helper;\n\t\t\tif(helper)\n\t\t\t{\n\t\t\t\thelper.show(\"redirect=detail&code=\" + this.GOOGLE_ON_MOBILE_HELPDESK);\n\t\t\t}\n\t\t});\n\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\t\t\t\t\t\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_GOOGLE_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from 'main.core';\nimport { InterfaceTemplate } from \"./interfacetemplate\";\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Util } from 'calendar.util';\nimport GoogleSyncWizard from \"../syncwizard/googlesyncwizard\"\n\nexport default class GoogleTemplate extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_GOOGLE\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_GOOGLE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_GOOGLE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_GOOGLE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-google',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ticonLogoClass: '--google',\n\t\t\tcolor: '#387ced',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this);\n\t}\n\n\tcreateConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'google',\n\t\t\t}\n\t\t});\n\n\t\tBX.util.popup(this.provider.getSyncLink(), 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\tEvent.bind(window, 'message', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (\n\t\t\t(window.location.hash === '#googleAuthSuccess')\n\t\t\t|| (event.data.title === 'googleAuthSuccess')\n\t\t)\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t}\n\t}\n\n\tgetSectionsForGoogle()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForGoogle', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('GOOGLE_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncGoogleSettings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tif (!this.wizard)\n\t\t{\n\t\t\tthis.wizard = new GoogleSyncWizard();\n\t\t\tthis.wizard.openSlider();\n\t\t\tthis.provider.setActiveWizard(this.wizard);\n\t\t}\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\nimport { Tag, Loc, Dom, Event } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport default class IcloudAuthDialog extends EventEmitter\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tappPasswordTemplate = 'xxxx-xxxx-xxxx-xxxx';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.type = options.type;\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Icloud');\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.initAlertBlock();\n\t}\n\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_AUTH_TITLE'),\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 475,\n\t\t\tanimation: 'fading-slide',\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: {opacity: 15},\n\t\t\tlightShadow: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CAL_ICLOUD_CONNECT_BUTTON'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-md ui-btn-success ui-btn-round`,\n\t\t\t\t\tevents : {click : this.authorize.bind(this)},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light-border ui-btn-round',\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\tthis.popup.show();\n\t\t\n\t\tEvent.bind(document, 'keydown', this.keyHandler);\n\t\tEvent.bind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.bind(document, 'mousedown', this.outsideMouseDownClose);\n\t}\n\t\n\tauthorize()\n\t{\n\t\tif (this.isFormDataValid())\n\t\t{\n\t\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\t\tsaveBtn.setClocking(true);\n\t\t\tsaveBtn.setDisabled(true);\n\t\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\t\tcancelButton.setDisabled(true);\n\t\t\tif (this.DOM.container.contains(this.DOM.alertBlock))\n\t\t\t{\n\t\t\t\tDom.remove(this.DOM.alertBlock);\n\t\t\t}\n\n\t\t\tthis.emit('onSubmit', new BaseEvent({\n\t\t\t\tdata: {\n\t\t\t\t\tappleId: this.DOM.appleIdInput.value.toString().trim(),\n\t\t\t\t\tappPassword: this.DOM.appPasswordInput.value.toString().trim()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.highlightInvalidFormData();\n\t\t}\n\t}\n\n\tisFormDataValid()\n\t{\n\t\treturn this.DOM.appleIdInput.value.toString().trim() !== ''\n\t\t\t&& this.DOM.appPasswordInput.value.toString().trim() !== ''\n\t}\n\n\thighlightInvalidFormData()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setClocking(false);\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\n\t\tif (this.DOM.appleIdInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidAppleIdInput();\n\t\t}\n\t\tif (this.DOM.appPasswordInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidPasswordInput();\n\t\t}\n\t}\n\n\thighlightInvalidAppleIdInput()\n\t{\n\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t}\n\n\thighlightInvalidPasswordInput()\n\t{\n\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\tthis.DOM.appPasswordInput.focus();\n\n\t}\n\t\n\tenableSaveButton()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div>\n\t\t\t\t${this.getAppleInfoBlock()}\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-id-block\">\n\t\t\t\t\t${this.getAppleIdTitle()}\n\t\t\t\t\t${this.getAppleIdInput()}\n\t\t\t\t\t${this.getAppleIdError()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-pass-block\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--label-block\">\n\t\t\t\t\t\t${this.getAppPasswordTitle()}\n\t\t\t\t\t\t${this.getLearnMoreButton()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t${this.getAppPasswordInput()}\n\t\t\t\t\t\t${this.getShowHidePasswordIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getAppPasswordError()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetAppleInfoBlock()\n\t{\n\t\tif (!this.DOM.appleInfo)\n\t\t{\n\t\t\tthis.DOM.appleInfo = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--info\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-image --icloud\"></div>\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-text\">${Loc.getMessage('CAL_ICLOUD_INFO_BLOCK')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.appleInfo;\n\t}\n\t\n\tgetAppleIdTitle()\n\t{\n\t\tif (!this.DOM.appleIdTitle)\n\t\t{\n\t\t\tthis.DOM.appleIdTitle = Tag.render`\n\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_PLACEHOLDER')}\n\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdTitle;\n\t}\n\t\n\tgetAppPasswordTitle()\n\t{\n\t\tif (!this.DOM.appPasswordTitle)\n\t\t{\n\t\t\tthis.DOM.appPasswordTitle = Tag.render`\n\t\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_PASS_PLACEHOLDER')}\n\t\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appPasswordTitle;\n\t}\n\t\n\tgetAppleIdError()\n\t{\n\t\tif (!this.DOM.appleIdError)\n\t\t{\n\t\t\tthis.DOM.appleIdError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_ERROR')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdError;\n\t}\n\t\n\tgetAppPasswordError()\n\t{\n\t\tif (!this.DOM.appPasswordError)\n\t\t{\n\t\t\tthis.DOM.appPasswordError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage(\n\t\t\t\t\t\t'CAL_ICLOUD_APP_PASSWORD_ERROR',\n\t\t\t\t\t{\n\t\t\t\t\t\t\t'#LINK_START#': '<a href=\"#\" data-role=\"open-helpdesk-password\">',\n\t\t\t\t\t\t\t'#LINK_END#': '</a>',\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst link = this.DOM.appPasswordError.querySelector('a[data-role=\"open-helpdesk-password\"]');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\tEvent.bind(link, 'click', this.openHelpDesk.bind(this));\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.appPasswordError;\n\t}\n\n\tgetAppleIdInput()\n\t{\n\t\tif (!this.DOM.appleIdInput)\n\t\t{\n\t\t\tthis.DOM.appleIdInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_EMAIL_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tthis.DOM.appleIdInput.onfocus = () => {\n\t\t\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.DOM.appleIdInput.onblur = () => {\n\t\t\t\tif (\n\t\t\t\t\t!this.validateAppleIdInput()\n\t\t\t\t\t&& !Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.addClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn this.DOM.appleIdInput;\n\t}\n\n\tgetAppPasswordInput()\n\t{\n\t\tif (!this.DOM.appPasswordInput)\n\t\t{\n\t\t\tthis.DOM.appPasswordInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t\trequired maxlength=\"19\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.appPasswordInput, 'input', this.validateAppPasswordInput.bind(this));\n\t\t}\n\n\t\treturn this.DOM.appPasswordInput;\n\t}\n\t\n\tgetShowHidePasswordIcon()\n\t{\n\t\tif (!this.DOM.showHidePasswordIcon)\n\t\t{\n\t\t\tthis.DOM.showHidePasswordIcon = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-after calendar-sync__auth-popup--icon-adjust-password\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.showHidePasswordIcon, 'click', this.switchPasswordVisibility.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.showHidePasswordIcon;\n\t}\n\t\n\tgetLearnMoreButton()\n\t{\n\t\tif (!this.DOM.learnMoreButton)\n\t\t{\n\t\t\tthis.DOM.learnMoreButton = Tag.render`\n\t\t\t\t<span class=\"calendar-sync__auth-popup--learn-more\">${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_ABOUT')}</span>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.learnMoreButton, 'click', this.openHelpDesk.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.learnMoreButton;\n\t}\n\n\tinitAlertBlock()\n\t{\n\t\tif (!this.DOM.alertBlock)\n\t\t{\n\t\t\tthis.DOM.alertBlock = Tag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-danger calendar-sync__auth-error\">\n\t                <span class=\"ui-alert-message\">${Loc.getMessage('CAL_ICLOUD_AUTH_ERROR')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tshowErrorAuthorizationAlert()\n\t{\n\t\tthis.highlightInvalidAppleIdInput();\n\t\tthis.highlightInvalidPasswordInput();\n\t\tthis.enableSaveButton();\n\t\tif (!this.DOM.container.contains(this.DOM.alertBlock))\n\t\t{\n\t\t\tDom.append(this.DOM.alertBlock, this.DOM.container);\n\t\t}\n\t}\n\t\n\tvalidateAppleIdInput()\n\t{\n\t\tconst emailRegExp = /^[a-zA-Z\\d.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z\\d-]+(?:\\.[a-zA-Z\\d-]+)*$/;\n\t\tconst input = this.DOM.appleIdInput.value.toString().trim();\n\t\tif (input === '')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn emailRegExp.test(input);\n\t}\n\t\n\tvalidateAppPasswordInput()\n\t{\n\t\tconst appPasswordRegExp = /^[a-z]{4}-[a-z]{4}-[a-z]{4}-[a-z]{4}$/;\n\t\tconst input = this.completeWithTemplate(this.DOM.appPasswordInput.value.toString().trim());\n\t\tif (appPasswordRegExp.test(input))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.addClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tswitchPasswordVisibility()\n\t{\n\t\tif (Dom.hasClass(this.DOM.showHidePasswordIcon, '--hide'))\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'password';\n\t\t\tDom.removeClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'text';\n\t\t\tDom.addClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t}\n\t\n\tclearForm()\n\t{\n\t\tthis.DOM.appPasswordInput.value = '';\n\t\tthis.DOM.appleIdInput.value = '';\n\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appleIdError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tcompleteWithTemplate(password)\n\t{\n\t\tconst addition = this.appPasswordTemplate.slice(password.length, this.appPasswordTemplate.length);\n\t\tpassword += addition;\n\t\treturn password;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '15426356';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t\t\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'openHelpDesk',\n\t\t\t\tclick_to_helpdesk_button: 'Y',\n\t\t\t\tconnection_type: 'icloud',\n\t\t\t}\n\t\t});\n\t}\n\t\n\thandleKeyPress(e)\n\t{\n\t\tif (e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.authorize();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\tcheckOutsideClickClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseUp = !target.closest('div.popup-window');\n\t\tif (this.outsideMouseUp && this.outsideMouseDown && this.checkTopSlider())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\toutsideMouseDownClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseDown = !target.closest('div.popup-window');\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tEvent.unbind(document, 'keydown', this.keyHandler);\n\t\tEvent.unbind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.unbind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tthis.clearForm();\n\t}\n\t\n\tcheckTopSlider()\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class IcloudSyncWizard extends SyncWizard\n{\n\tTYPE = 'icloud';\n\tSLIDER_NAME = 'calendar:sync-wizard-icloud';\n\tSTAGE_1_CODE = 'icloud-to-b24';\n\tSTAGE_2_CODE = 'b24-events-to-icloud';\n\tSTAGE_3_CODE = 'b24-to-icloud';\n\t\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.IcloudSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_ICLOUD'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--icloud';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t    && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\tthis.showConfetti();\n\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_ICLOUD_TITLE');\n\t}\n}","// @flow\n'use strict';\nimport { Dom, Loc, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\n\nexport default class WarnSyncIcloudDialog\n{\n\tzIndex = 3100;\n\tDOM = {};\n\t\n\tconstructor(options = {})\n\t{\n\t\tthis.authDialog = options.authDialog;\n\t}\n\t\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_TITLE'),\n\t\t\twidth: 500,\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: { opacity: 15 },\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_LEARN_MORE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\tevents: { click: this.openHelpDesk.bind(this) }\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_BUTTON_CONTINUE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light',\n\t\t\t\t\tevents: { click: this.openAuthDialog.bind(this) }\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\t\n\t\tthis.popup.show();\n\t}\n\t\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.getAlertInformation()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t\treturn this.DOM.container;\n\t}\n\t\n\tgetAlertInformation()\n\t{\n\t\tthis.DOM.alertBlock = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_INFO'),\n\t\t\tcolor: BX.UI.Alert.Color.WARNING,\n\t\t\ticon: BX.UI.Alert.Icon.INFO\n\t\t});\n\t\t\n\t\tconst container = this.DOM.alertBlock.getContainer();\n\t\tconst text = container.querySelector('.ui-alert-message');\n\t\tDom.addClass(text, 'calendar-sync__alert-popup--text')\n\t\t\n\t\treturn container;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '16020988';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\tdisableConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.disableIphoneOrMacConnection').then(() => {\n\t\t\tthis.authDialog.show();\n\t\t\tthis.close();\n\t\t\tUtil.setIphoneConnectionStatus(false);\n\t\t\tUtil.setMacConnectionStatus(false);\n\t\t})\n\t}\n\t\n\topenAuthDialog()\n\t{\n\t\tthis.authDialog.show();\n\t\tthis.close();\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport IcloudAuthDialog from '../controls/icloudauthdialog';\nimport IcloudSyncWizard from '../syncwizard/icloudsyncwizard';\nimport { EventEmitter } from 'main.core.events';\nimport WarnSyncIcloudDialog from '../controls/warnsynciclouddialog';\n\nexport default class IcloudTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ICLOUD\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ICLOUD_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ICLOUD_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ICLOUD_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-icloud',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/icloud.svg',\n\t\t\ticonLogoClass: '--icloud',\n\t\t\tcolor: '#95a0af',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection(data)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.createIcloudConnection', {\n\t\t\tdata: {\n\t\t\t\tappleId: data.appleId,\n\t\t\t\tappPassword: data.appPassword,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\t\n\t\t\t\tif (result.status === 'success' && result.connectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.openSyncWizard(data.appleId);\n\t\t\t\t\tthis.syncCalendarsWithIcloud(result.connectionId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\tif (result.status === 'incorrect_app_pass')\n\t\t\t\t{\n\t\t\t\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\t\t\t\twrong_app_pass: 'Y',\n\t\t\t\t\t\t\tconnection_type: 'icloud'\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\tthis.authDialog.showErrorAuthorizationAlert();\n\t\t\t}\n\t\t);\n\t}\n\n\tsyncCalendarsWithIcloud(connectionId)\n\t{\n\t\tthis.authDialog.close();\n\t\t\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.syncIcloudConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: connectionId,\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\tif (connectionId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.provider.getConnection().setId(connectionId);\n\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t});\n\t\t})\n\t}\n\n\tgetSectionsForIcloud()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForIcloud', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t)\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'icloud',\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.initPopup();\n\t\tif (Util.isIphoneConnected() || Util.isMacConnected())\n\t\t{\n\t\t\tthis.alertSyncPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.authDialog.show();\n\t\t}\n\t}\n\t\n\tinitPopup()\n\t{\n\t\tif (!this.authDialog)\n\t\t{\n\t\t\tthis.authDialog = new IcloudAuthDialog();\n\t\t\t\n\t\t\tEventEmitter.unsubscribeAll('BX.Calendar.Sync.Icloud:onSubmit');\n\t\t\tEventEmitter.subscribe('BX.Calendar.Sync.Icloud:onSubmit', (e) => {\n\t\t\t\tthis.createConnection(e.data);\n\t\t\t})\n\t\t}\n\t\t\n\t\tif (!this.alertSyncPopup)\n\t\t{\n\t\t\tthis.alertSyncPopup = new WarnSyncIcloudDialog({\n\t\t\t\tauthDialog: this.authDialog\n\t\t\t})\n\t\t}\n\t}\n\n\topenSyncWizard(appleId)\n\t{\n\t\tthis.provider.setWizardSyncMode(true);\n\t\tthis.wizard = new IcloudSyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\n\t\tEventEmitter.subscribeOnce('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone', () => {\n\t\t\tthis.wizard.updateState({\n\t\t\t\tstage: 'connection_created',\n\t\t\t\tvendorName: 'icloud',\n\t\t\t\taccountName: appleId,\n\t\t\t})\n\t\t})\n\t}\n\t\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class Office365SyncWizard extends SyncWizard\n{\n\tTYPE = 'office365';\n\tSLIDER_NAME = 'calendar:sync-wizard-office365';\n\tSTAGE_1_CODE = 'office365-to-b24';\n\tSTAGE_2_CODE = 'sections_sync_finished';\n\tSTAGE_3_CODE = 'events_sync_finished';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.Office365SyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_OFFICE365'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--office365';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_1')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_2')\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_3')\n\t\t\t})\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (stateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === this.STAGE_2_CODE\n\t\t\t && (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === this.STAGE_3_CODE)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\tthis.showButtonWrapper();\n\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\tthis.showConfetti();\n\n\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_OFFICE365_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event } from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport Office365SyncWizard from '../syncwizard/office365syncwizard';\nimport { Util } from 'calendar.util';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport default class Office365template extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_OFFICE365\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_OFFICE365_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_OFFICE365_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_OFFICE365_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_OFFICE365_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office365',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/office365.svg',\n\t\t\ticonLogoClass: '--office365',\n\t\t\tcolor: '#fc1d1d',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.analytical', {\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: 'createConnection',\n\t\t\t\tclick_to_connection_button: 'Y',\n\t\t\t\tconnection_type: 'office365',\n\t\t\t}\n\t\t});\n\n\t\tBX.util.popup(this.provider.getSyncLink(), 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', (event) => {\n\t\t\tif (window.location.hash === '#office365AuthSuccess')\n\t\t\t{\n\t\t\t\tUtil.removeHash();\n\t\t\t\tthis.provider.setWizardSyncMode(true);\n\t\t\t\tthis.saveConnection();\n\t\t\t\tthis.openSyncWizard();\n\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\t}\n\t\t});\n\t}\n\n\tsaveConnection()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.createOffice365Connection')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (response?.data?.status === this.provider.ERROR_CODE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response?.data?.connectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\t\t\tthis.provider.getConnection().setId(response.data.connectionId);\n\t\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncOffice365Settings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tthis.wizard = new Office365SyncWizard();\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\t}\n\n\tgetSectionsForOffice365()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForOffice365', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t})\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('OFFICE365_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Dom, Event, Loc, Tag } from 'main.core';\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class MacTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PC')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelper, 'click', this.showExtendedInfoMacOs.bind(this));\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tshowExtendedInfoMacOs()\n\t{\n\t\tthis.headerHelper.style.display = 'none';\n\t\tDom.append(this.getContentBodyConnect(), this.infoBodyHeader);\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header calendar-sync-slider-header-divide\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_MAC_INSTRUCTION_HEADER')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_DESCRIPTION')}:</span>\n\t\t\t\t\t<ol class=\"calendar-sync-slider-info-list\">\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIRST')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SECOND')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_THIRD')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FOURTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIFTH', { '#PORTAL_ADDRESS#': this.provider.getPortalAddress() })}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SIXTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SEVENTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_CONCLUSION')}</span>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\" style=\"margin-top: 20px\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class OutlookTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class YandexTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_YANDEX\"),\n\t\t\thelpDeskCode: '10930170',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_YANDEX_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_YANDEX_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_YANDEX_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_YANDEX_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-yandex',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ticonLogoClass: '--yandex',\n\t\t\tcolor: '#f9c500',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag, Type, Event, Dom} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport MobileSyncBanner from \"../controls/mobilesyncbanner\";\nimport {Util} from \"calendar.util\";\n\nexport default class MobileInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.banner = new MobileSyncBanner({\n\t\t\ttype: this.provider.getType(),\n\t\t\thelpDeskCode: options.helpDeskCode,\n\t\t});\n\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.syncDate = Type.isDate(this.data.syncDate) ? this.data.syncDate : Util.parseDate(this.data.syncDate);\n\t\t}\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PHONE')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelper, 'click', this.showMobileSyncBanner.bind(this));\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tshowMobileSyncBanner()\n\t{\n\t\tthis.headerHelper.style.display = 'none';\n\t\tDom.append(this.getContentBodyConnect(), this.infoBodyHeader);\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-desc\">${Loc.getMessage('CAL_SYNC_DISABLE')}</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\tthis.banner.initQrCode().then(this.banner.drawQRCode.bind(this.banner));\n\t\treturn this.banner.getContainer();\n\t}\n\t\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class AndroidTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ANDROID\"),\n\t\t\thelpDeskCode: '5686179',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ANDROID_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ANDROID_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_ANDROID_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ANDROID_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-android',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/android.svg',\n\t\t\tcolor: '#9ece03',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isGoogleConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_GOOGLE_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_GOOGLE');\n\t\t}\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class IphoneTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_IPHONE\"),\n\t\t\thelpDeskCode: '5686207',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_IPHONE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_IPHONE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_IPHONE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_IPHONE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-iphone',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\tcolor: '#2fc6f6',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t\t// this.warningText = this.alreadyConnectedToNew\n\t\t// \t? Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED')\n\t\t// \t: Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\n\nimport {Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\nimport {Loc, Tag} from \"main.core\";\nimport \"../css/icalpopup.css\"\n\nexport default class IcalSyncPopup\n{\n\tLINK_LENGTH = 112;\n\n\tconstructor(options)\n\t{\n\t\tthis.link = this.getIcalLink(options);\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup().show();\n\t\tthis.startSync();\n\t}\n\n\tstartSync()\n\t{\n\t\tBX.ajax.get(this.link + '&check=Y', \"\", (result) =>\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (!result || result.length <= 0 || result.toUpperCase().indexOf('BEGIN:VCALENDAR') === -1)\n\t\t\t\t{\n\t\t\t\t\tthis.showPopupWithSyncDataError();\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-ical-popup-wrapper\">\n\t\t\t\t<h3>${Loc.getMessage('EC_JS_EXPORT_TILE')}</h3>\n\t\t\t\t<div class=\"calendar-ical-popup-label-text\"><span>${Loc.getMessage('EC_EXP_TEXT')}</span></div>\n\t\t\t\t${this.getLinkBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreatePopup()\n\t{\n\t\treturn this.popup = new Popup({\n\t\t\twidth: 400,\n\t\t\tzIndexOptions: 4000,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tdraggable: true,\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: \"bxc-popup-window\",\n\t\t\tcontent: this.getContent(),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.copyLink(event);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_SEC_SLIDER_CLOSE'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetIcalLink(options)\n\t{\n\t\treturn options.calendarPath\n\t\t\t+ ((options.calendarPath.indexOf('?') >= 0) ? '&' : '?')\n\t\t\t+ 'action=export'\n\t\t\t+ options.sectionLink;\n\t}\n\n\tgetLinkBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-ical-popup-link-block\">\n\t\t\t\t\t<a class=\"ui-link ui-link-primary \" target=\"_blank\" href=\"${BX.util.htmlspecialchars(this.link)}\">\n\t\t\t\t\t\t${BX.util.htmlspecialchars(this.getShortenLink(this.link))}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tstatic checkPathes(options)\n\t{\n\t\treturn (!!options.sectionLink || !!options.calendarPath)\n\t}\n\n\tstatic showPopupWithPathesError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_JS_ICAL_ERROR_WITH_PATHES'));\n\t}\n\n\tshowPopupWithSyncDataError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_EDEV_EXP_WARN'));\n\t}\n\n\tcopyLink(event)\n\t{\n\t\twindow.BX.clipboard.copy(this.link)\n\t\t\t? this.#showSuccessCopyNotification()\n\t\t\t: this.#showFailedCopyNotification();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\tgetShortenLink(link)\n\t{\n\t\treturn link.length < this.LINK_LENGTH ? link : link.substr(0, 105) + '...' + link.slice(-7);\n\t}\n\n\t#showSuccessCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_SUCCESS'));\n\t}\n\n\t#showFailedCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_FAILED'));\n\t}\n\n\t#showResultNotification(message)\n\t{\n\t\tUtil.showNotification(message);\n\t}\n}\n","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class AfterSyncTour\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tloadExtension()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension('ui.tour').then((exports) => {\n\t\t\t\tif (exports && exports['Guide'] && exports['Manager'])\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"ui.tour\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.loadExtension()\n\t\t\t.then(() => {\n\t\t\t\tthis.guide = new BX.UI.Tour.Guide({\n\t\t\t\t\tsteps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: this.getTarget(),\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CAL_AFTER_SYNC_AHA_TITLE'),\n\t\t\t\t\t\t\ttext: Loc.getMessage('CAL_AFTER_SYNC_AHA_TEXT'),\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tonEvents: true\n\t\t\t\t});\n\n\t\t\t\tthis.guide.start();\n\t\t\t});\n\t}\n\n\tgetTarget()\n\t{\n\t\tlet target;\n\t\tconst view = this.options.view;\n\t\tconst viewWrap = view.getContainer();\n\n\t\tif (view.getName() === 'month')\n\t\t{\n\t\t\ttarget = viewWrap.querySelectorAll(\".calendar-grid-today\")[0];\n\t\t}\n\t\telse if (view.getName() === 'day'\n\t\t|| view.getName() === 'week')\n\t\t{\n\t\t\tconst dayCode = Util.getDayCode(new Date());\n\t\t\ttarget = viewWrap.querySelector('div[data-bx-calendar-timeline-day=\"' + dayCode + '\"] .calendar-grid-cell-inner');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttarget = document.querySelector('span[data-role=\"addButton\"]');\n\t\t}\n\n\t\treturn target;\n\t}\n}\n"],"names":["StatusBlock","constructor","options","status","connections","withStatusLabel","popupWithUpdateButton","popupId","createInstance","setStatus","setConnections","getContent","statusInfoBlock","Tag","render","Loc","getMessage","addEventListener","handlerMouseEnter","handlerMouseLeave","statusBlock","getStatusTextLabel","clearTimeout","statusBlockEnterTimeout","buttonEnterTimeout","setTimeout","showPopup","statusBlockLeaveTimeout","hidePopup","node","popup","getPopup","show","addPopupHandlers","hide","getPopupContainer","SyncStatusPopup","withUpdateButton","id","refresh","_t","_t2","_t3","_t4","_t5","AuxiliarySyncPanel","MAIN_SYNC_SLIDER_NAME","SLIDER_WIDTH","LOADER_NAME","cache","Cache","MemoryCache","connectionsProviders","userId","openSlider","BX","SidePanel","Instance","open","contentCallback","slider","Promise","resolve","reject","allowChangeHistory","events","onLoad","setGridContent","cacheable","width","loader","getHeader","getMobileHeader","getMobileContentWrapper","getWebHeader","getWebContentWrapper","getMainHeader","getStatusBlockContent","getConnections","remember","statusBlockContent","items","Object","values","forEach","item","itemConnections","length","connection","ConnectionItem","isConnectionItem","getConnectStatus","push","showWebGridContent","filter","mainPanel","getViewClassification","showMobileGridContent","wrapper","Dom","clean","grid","TileGrid","Grid","container","sizeRatio","itemMinWidth","tileMargin","itemType","draw","blockStatusContent","replace","document","querySelector","_t6","_t7","SyncPanelUnit","logoClassName","connectionProvider","getConnectionTemplate","connectionTemplate","getClassTemplateItem","renderTo","outerWrapper","Type","isElementNode","appendChild","unitNode","getLogoNode","getTitle","getSyncInfoWrap","getButtonsWrap","getSyncPanelLogo","getSyncPanelTitle","syncInfoWrap","setSyncStatus","mode","className","STATUS_SUCCESS","addClass","setSyncInfoStatusText","formatSyncTime","getSyncDate","STATUS_FAILED","STATUS_PENDING","STATUS_SYNCHRONIZING","STATUS_NOT_CONNECTED","text","syncInfoStatusText","innerHTML","Text","encode","toUpperCase","buttonsWrap","getButton","getMoreButton","Event","bind","moreButton","handleItemClick","refreshButton","button","getStatus","e","includes","hasMenu","showMenu","openActiveConnectionSlider","getConnection","openInfoConnectionSlider","handleConnectButton","date","now","Date","timestamp","isDate","Math","round","getTime","secondsAgo","parseInt","format","SyncPanel","HELPDESK_CODE","window","top","displayConnectionUnits","getHeaderWrapper","getUnitsContentWrapper","getFooterWrapper","unitsContentWrapper","getExtraInfoWithCheckIcon","getOpenAuxiliaryPanelLink","getOpenHelpLink","alreadyConnected","link","auxiliarySyncPanel","Helper","connected","renderConnectionUnits","providers","provider","interfaceUnit","setInterfaceUnit","GridUnit","Item","type","gridUnit","getAdditionalContentClass","getContentStyles","getImage","isActive","onClick","layout","title","util","htmlspecialchars","getGridTitle","getGridIcon","getSyncStatus","getGridColor","ajax","runAction","analyticsLabel","open_connection_slider","sync_connection_type","getType","sync_connection_status","ConnectionControls","userName","server","connectionName","addButtonText","removeButtonText","saveButtonText","getWrapper","getForm","getAddButton","getDisconnectButton","getSaveButton","getButtonWrapper","MobileSyncBanner","zIndex","DOM","QRCODE_SIZE","QRCODE_COLOR_LIGHT","QRCODE_COLOR_DARK","QRCODE_WRAP_CLASS","QRC","helpDeskCode","alreadyConnectedToNew","Util","isGoogleConnected","isIcloudConnected","showInPopup","Popup","draggable","content","getContainer","zIndexAbsolute","closeByEsc","closeIcon","initQrCode","then","drawQRCode","close","getQrContainer","getInstructionContainer","initHintNode","qrContainer","getLoader","instructionContainer","getInstructionTextContainer","getHelpdeskCode","instructionTextContainer","getAndroidHintIcon","androidHintIcon","getInnerContainer","Runtime","loadExtension","exports","QRCode","wrap","isDomNode","getMobileSyncUrl","getSize","height","colorDark","colorLight","correctLevel","CorrectLevel","H","data","response","getDetailHelpUrl","_t8","_t9","_t10","InterfaceTemplate","EventEmitter","sliderWidth","setEventNamespace","helpdeskCode","titleInfoHeader","descriptionInfoHeader","titleActiveHeader","descriptionActiveHeader","sliderIconClass","iconPath","iconLogoClass","color","getInfoConnectionContent","getHeaderTitle","getContentInfoBody","getContentActiveBodyHeader","disconnectButton","handleDisconnectButton","syncTime","formatDateUsable","getTimeFormatShort","getSyncStatusClassName","getLogoIconClass","getConnectionName","getActiveConnectionContent","getContentActiveBody","getContentInfoBodyHeader","getContentActiveBodySectionsHeader","getContentActiveBodySectionsManager","showHelp","event","preventDefault","getHelpdeskLink","infoBodyHeader","getContentInfoBodyHeaderHelper","getContentInfoWarning","mobileSyncButton","getMobileSyncControlButton","handleMobileButtonOtherSyncInfo","handleMobileButtonConnectClick","warningText","mobileSyncButtonText","setProvider","sendRequestRemoveConnection","connectionId","removeCalendars","reload","runUpdateInfo","sectionStatus","sectionStatusObject","emit","getElementById","getContentActiveBodySections","sectionList","section","onClickCheckSection","showUpdateSectionListNotification","showNotification","getId","deactivateConnection","closeSlider","getInterfaceUnit","SLIDER_PREFIX","CaldavInterfaceTemplate","formObject","formBlock","form","buttonWrapper","bodyHeader","click_to_connection_button","connection_type","sendRequestAddConnection","append","addParams","fd","FormData","name","get","pass","showAlertPopup","errors","alert","message","code","messageBox","UI","Dialogs","MessageBox","buttons","MessageBoxButtons","OK","okCaption","minWidth","mediumButtonSize","popupOptions","onOk","removeClass","CaldavTemplate","ExchangeTemplate","getContentBody","getHelpdeskBlock","_t11","_t12","_t13","SyncWizard","TYPE","SLIDER_NAME","syncStagesList","accountName","MIN_UPDATE_STATE_DELAY","CONFETTI_DELAY","pullWizardEventHandler","handlePullNewEvent","lastUpdateStateTimestamp","logoIconClass","displaySyncStages","bindButtonsHandlers","onDestroy","handleCloseWizard","getTopSlider","syncIsFinished","errorStatus","getTitleWrapper","getSyncStagesWrapper","getInfoStatusWrapper","getErrorWrapper","getFinalCheckWrapper","getHelpLinkWrapper","syncTitleWrapper","getAccountNameNode","getActiveStatusNode","syncStagesWrapper","infoStatusWrapper","errorWrapper","helpLinkWrapper","finalCheckWrapper","getNewEventCardWrapper","newEventCardWrapper","getSkeletonWrapper","skeletonWrapper","getSkeletonTitle","accountNameNode","getAccountName","setAccountName","value","activeStatusNode","startStatusCarousel","statusNode","progressStatuses","dotCycle","statusCarouselInterval","setInterval","currentPhraseNode","firstElementChild","countDots","innerText","style","offsetWidth","slice","shift","animateNextStatus","almostDoneStatus","clearInterval","carousel","phraseText","nextPhraseNode","maxWidth","max","transition","transform","remove","string","match","setSyncStages","getSyncStages","getHelpDeskCode","stage","continueButton","handleContinueButtonClick","eifButton","handleFinalCloseButtonClick","showFinalStage","display","showFinalCheckWrapper","showHelpLinkWrapper","hideSyncStagesWrapper","hideInfoStatusWrapper","getBX","subscribe","isSyncFinished","getOpenSliders","getUrl","calendarAction","handleUpdateState","stateData","currentTimestamp","updateState","setActiveStatusFinished","showButtonWrapper","hideButtonWrapper","showInfoStatusWrapper","showErrorWrapper","hideErrorWrapper","hideFinalCheckWrapper","showSyncStagesWrapper","hideHelpLinkWrapper","isFunction","getData","command","newEvent","syncBalloon","hasClass","entry","Entry","fields","displayNewEvent","unsubscribe","getNewEventCard","from","to","fromTimestamp","dateFrom","getDayMonthFormat","timeFrom","formatTime","getHours","getMinutes","timeTo","timeField","isFullDay","newEventCard","getName","showConfetti","bx","Confetti","fire","particleCount","spread","origin","y","x","getZindex","getSlider","setErrorState","closeButton","SyncStageUnit","doneStatus","contentNode","setDone","setUndone","GoogleSyncWizard","STAGE_1_CODE","STAGE_2_CODE","STAGE_3_CODE","GOOGLE_ON_MOBILE_HELPDESK","helper","GoogleTemplate","HANDLE_CONNECTION_DELAY","handleSuccessConnectionDebounce","debounce","handleSuccessConnection","createConnection","getSyncLink","location","hash","removeHash","setWizardSyncMode","saveConnection","openSyncWizard","getSectionsForGoogle","target","checked","offsetLeft","offsetTop","padding","autoHide","animation","hasSetSyncGoogleSettings","wizard","setActiveWizard","IcloudAuthDialog","appPasswordTemplate","keyHandler","handleKeyPress","checkOutsideClickClose","outsideMouseDownClose","initAlertBlock","titleBar","contentBackground","overlay","opacity","lightShadow","Button","click","authorize","onPopupClose","isFormDataValid","saveBtn","getButtons","setClocking","setDisabled","cancelButton","contains","alertBlock","BaseEvent","appleId","appleIdInput","toString","trim","appPassword","appPasswordInput","highlightInvalidFormData","highlightInvalidAppleIdInput","highlightInvalidPasswordInput","clearInvalidation","unbind","focus","enableSaveButton","getAppleInfoBlock","getAppleIdTitle","getAppleIdInput","getAppleIdError","getAppPasswordTitle","getLearnMoreButton","getAppPasswordInput","getShowHidePasswordIcon","getAppPasswordError","appleInfo","appleIdTitle","appPasswordTitle","appleIdError","appPasswordError","openHelpDesk","onfocus","onblur","validateAppleIdInput","validateAppPasswordInput","showHidePasswordIcon","switchPasswordVisibility","learnMoreButton","showErrorAuthorizationAlert","emailRegExp","input","test","appPasswordRegExp","completeWithTemplate","clearForm","password","addition","click_to_helpdesk_button","keyCode","getKeyCode","srcElement","outsideMouseUp","closest","outsideMouseDown","checkTopSlider","destroy","IcloudSyncWizard","WarnSyncIcloudDialog","authDialog","openAuthDialog","getAlertInformation","Alert","Color","WARNING","icon","Icon","INFO","disableConnection","setIphoneConnectionStatus","setMacConnectionStatus","IcloudTemplate","result","syncCalendarsWithIcloud","wrong_app_pass","setId","setConnected","setSyncDate","setWizardState","ERROR_CODE","vendorName","getSectionsForIcloud","initPopup","isIphoneConnected","isMacConnected","alertSyncPopup","unsubscribeAll","subscribeOnce","Office365SyncWizard","Office365template","hasSetSyncOffice365Settings","getSectionsForOffice365","MacTemplate","getPortalAddress","portalAddress","getContentBodyConnect","headerHelper","showExtendedInfoMacOs","calendarContext","getCalendarContext","syncInterface","getIcloudProvider","OutlookTemplate","YandexTemplate","MobileInterfaceTemplate","banner","syncDate","parseDate","showMobileSyncBanner","AndroidTemplate","getGoogleProvider","IphoneTemplate","IcalSyncPopup","LINK_LENGTH","getIcalLink","createPopup","startSync","indexOf","showPopupWithSyncDataError","getLinkBlock","zIndexOptions","right","PRIMARY","onclick","copyLink","LINK","calendarPath","sectionLink","getShortenLink","checkPathes","showPopupWithPathesError","clipboard","copy","stopPropagation","substr","AfterSyncTour","console","error","guide","Tour","Guide","steps","getTarget","onEvents","start","view","viewWrap","querySelectorAll","dayCode","getDayCode"],"mappings":"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"}