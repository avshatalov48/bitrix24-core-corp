{"version":3,"file":"syncinterface.bundle.js","sources":["../src/controls/syncstatuspopup.js","../src/controls/statusblock.js","../src/connectionproviders/connectionitem.js","../src/syncpanel.js","../src/controls/syncbutton.js","../src/syncpanelitem.js","../src/controls/connectioncontrols.js","../src/controls/mobilesyncbanner.js","../src/itemstemplate/interfacetemplate.js","../src/itemstemplate/caldavinterfacetemplate.js","../src/itemstemplate/caldavtemplate.js","../src/itemstemplate/exchangetemplate.js","../src/itemstemplate/googletemplate.js","../src/itemstemplate/mactemplate.js","../src/itemstemplate/outlooktemplate.js","../src/itemstemplate/yandextemplate.js","../src/itemstemplate/mobileinterfacetemplate.js","../src/itemstemplate/androidtemplate.js","../src/itemstemplate/iphonetemplate.js","../src/connectionproviders/connection.js","../src/connectionproviders/macprovider.js","../src/connectionproviders/outlookprovider.js","../src/connectionproviders/androidprovider.js","../src/gridunit.js","../src/connectionproviders/caldavconnection.js","../src/connectionproviders/caldavprovider.js","../src/connectionproviders/exchangeprovider.js","../src/connectionproviders/googleprovider.js","../src/connectionproviders/iphoneprovider.js","../src/connectionproviders/yandexprovider.js","../src/syncinterfacemanager.js"],"sourcesContent":["// @flow\n'use strict';\nimport {Tag, Loc, Dom} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {EventEmitter} from \"main.core.events\";\n\nexport default class SyncStatusPopup extends EventEmitter\n{\n\tstatic IS_RUN_REFRESH = false;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncStatusPopup');\n\t\tthis.connections = options.connections;\n\t\tthis.withUpdateButton = options.withUpdateButton;\n\t\tthis.node = options.node;\n\t\tthis.id = options.id;\n\n\t\tthis.init();\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options)\n\t}\n\n\tinit()\n\t{\n\t\tthis.setPopupContent();\n\t}\n\n\tcreatePopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: this.id,\n\t\t\tbindElement: this.node,\n\t\t\tcontent: this.container,\n\t\t\tangle: true,\n\t\t\twidth: 360,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tdarkMode: true,\n\t\t\tautoHide: true,\n\t\t\tzIndexAbsolute: 3010,\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup();\n\t\tthis.popup.show();\n\t}\n\n\tsetPopupContent()\n\t{\n\t\tthis.container = Tag.render `\n\t\t\t<div class=\"calendar-sync-popup-list\"></div>\n\t\t`;\n\n\t\tthis.connections.forEach(connection => {\n\t\t\tif (connection.getConnectStatus() !== true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst options = {};\n\n\t\t\toptions.syncTime = this.getTime(connection.getSyncTimestamp());\n\t\t\toptions.classStatus = connection.getSyncStatus()\n\t\t\t\t? 'calendar-sync-popup-item-status-success'\n\t\t\t\t: 'calendar-sync-popup-item-status-fail';\n\t\t\toptions.classLable = 'calendar-sync-popup-item-text-' + connection.getClassLable();\n\t\t\toptions.title = connection.getConnectionName();\n\t\t\tconst block = this.getSyncElement(options);\n\t\t\tthis.container.append(block);\n\t\t});\n\n\n\t\tif (this.withUpdateButton)\n\t\t{\n\t\t\tthis.container.append(this.getContentRefreshBlock());\n\n\t\t\tif (SyncStatusPopup.IS_RUN_REFRESH)\n\t\t\t{\n\t\t\t\tthis.showRefreshStatus();\n\t\t\t}\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\thide()\n\t{\n\t\tthis.popup.destroy();\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.popup;\n\t}\n\n\tgetTime(time)\n\t{\n\t\tvar format = [\n\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t[\"s\" , Loc.getMessage('CAL_JUST')],\n\t\t\t[\"i\" , \"iago\"],\n\t\t\t[\"H\", \"Hago\"],\n\t\t\t[\"d\", \"dago\"],\n\t\t\t[\"m100\", \"mago\"],\n\t\t\t[\"m\", \"mago\"],\n\t\t\t// [\"m5\", Loc.getMessage('CAL_JUST')],\n\t\t\t[\"-\", \"\"]\n\t\t];\n\n\t\treturn BX.date.format(format, time);\n\t}\n\n\tgetTitle(key)\n\t{\n\t\tlet title;\n\t\tswitch (key)\n\t\t{\n\t\t\tcase 'google':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_GOOGLE');\n\t\t\t\tbreak;\n\t\t\tcase 'mac':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_MAC');\n\t\t\t\tbreak;\n\t\t\tcase 'iphone':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_IPHONE');\n\t\t\t\tbreak;\n\t\t\tcase 'android':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_ANDROID');\n\t\t\t\tbreak;\n\t\t\tcase 'outlook':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_OUTLOOK');\n\t\t\t\tbreak;\n\t\t\tcase 'office365':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_OFFICE365');\n\t\t\t\tbreak;\n\t\t\tcase 'exchange':\n\t\t\t\ttitle = Loc.getMessage('CALENDAR_TITLE_EXCHANGE');\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tgetSyncElement(options)\n\t{\n\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-popup-item\">\n\t\t\t\t\t<span class=\"calendar-sync-popup-item-text ${options.classLable}\">${BX.util.htmlspecialchars(options.title)}</span>\n\t\t\t\t\t<div class=\"calendar-sync-popup-item-detail\">\n\t\t\t\t\t\t<span class=\"calendar-sync-popup-item-time\">${options.syncTime}</span>\n\t\t\t\t\t\t<span class=\"calendar-sync-popup-item-status ${options.classStatus}\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\trefresh(connections)\n\t{\n\t\tthis.connections = connections;\n\t\tthis.popup.setContent(this.setPopupContent());\n\t\tthis.setRefreshStatusBlock();\n\t}\n\n\tsetRefreshStatusBlock()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.removeRefreshStatusBlock();\n\t\t\tthis.enableRefreshButton();\n\t\t\tSyncStatusPopup.IS_RUN_REFRESH = false;\n\t\t}, 300000);\n\t}\n\n\tremoveRefreshStatusBlock()\n\t{\n\t\tthis.refreshStatusBlock.remove();\n\t}\n\n\tenableRefreshButton()\n\t{\n\t\tthis.refreshButton.className = 'calendar-sync-popup-footer-btn';\n\t}\n\n\tdisableRefreshButton()\n\t{\n\t\tthis.refreshButton.className = 'calendar-sync-popup-footer-btn calendar-sync-popup-footer-btn-disabled';\n\t}\n\n\tgetContentRefreshBlock()\n\t{\n\t\tthis.footerWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync-popup-footer-wrap\">\n\t\t\t\t${this.getContentRefreshButton()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.footerWrapper;\n\t}\n\n\tgetContentRefreshButton()\n\t{\n\t\tthis.refreshButton = Tag.render`\n\t\t\t<button class=\"calendar-sync-popup-footer-btn\">${Loc.getMessage('CAL_REFRESH')}</button>\n\t\t`;\n\n\t\tthis.refreshButton.addEventListener('click', () => {\n\t\t\tDom.addClass(this.refreshButton, 'calendar-sync-popup-footer-btn-load');\n\t\t\tSyncStatusPopup.IS_RUN_REFRESH = true;\n\t\t\tthis.refreshButton.innerText = Loc.getMessage('CAL_REFRESHING');\n\t\t\tthis.runRefresh();\n\t\t});\n\n\t\treturn this.refreshButton;\n\t}\n\n\tshowRefreshStatus()\n\t{\n\t\tthis.disableRefreshButton();\n\t\tthis.footerWrapper.prepend(this.getRefreshStatus());\n\t}\n\n\tgetRefreshStatus()\n\t{\n\t\tthis.refreshStatusBlock = Tag.render`\n\t\t\t<span class=\"calendar-sync-popup-footer-status\">${Loc.getMessage('CAL_REFRESH_JUST')}</span>\n\t\t`;\n\n\t\treturn this.refreshStatusBlock;\n\t}\n\n\trunRefresh()\n\t{\n\t\tthis.emit('onRefresh', {});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport SyncStatusPopup from \"./syncstatuspopup\";\n\nexport default class StatusBlock\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connections = options.connections;\n\t\tthis.withStatus = options.withStatus;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t\tthis.popupId = options.id;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tgetContentStatusBlock()\n\t{\n\t\tlet statusInfoBlock;\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-success calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_SUCCESS')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-danger calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_ALERT')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-primary calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_NOT_CONNECTED')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tstatusInfoBlock.addEventListener('mouseenter', (event) => {\n\t\t\tthis.handlerMouseEnter(statusInfoBlock);\n\t\t});\n\n\t\tstatusInfoBlock.addEventListener('mouseleave', (event) => {\n\t\t\tthis.handlerMouseLeave();\n\t\t});\n\n\t\tconst statusTextLabel = Tag.render `\n\t\t\t<div class=\"calendar-sync-status-subtitle\">\n\t\t\t\t<span data-hint=\"\"></span>\n\t\t\t\t<span class=\"calendar-sync-status-text\">${Loc.getMessage('LABEL_STATUS_INFO')}:</span>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-status-block\" id=\"calendar-sync-status-block\">\n\t\t\t\t${this.withStatus ? statusTextLabel : ''}\n\t\t\t\t${statusInfoBlock}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thandlerMouseEnter(statusBlock)\n\t{\n\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\t\tthis.showPopup(statusBlock);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.statusBlockEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.statusBlockLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tshowPopup(node)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tthis.popup = SyncStatusPopup.createInstance({\n\t\t\t\tconnections: this.connections,\n\t\t\t\twithUpdateButton: this.popupWithUpdateButton,\n\t\t\t\tnode: node,\n\t\t\t\tid: this.popupId,\n\t\t\t});\n\t\t\tthis.popup.show();\n\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', e => {\n\t\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\t\tclearTimeout(this.statusBlockLeaveTimeout);\n\t\t\t});\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () => {\n\t\t\t\tthis.hidePopup();\n\t\t\t});\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n}","export class ConnectionItem\n{\n\tconstructor(options)\n\t{\n\t\tthis.syncTimestamp = options.syncTimestamp;\n\t\tthis.connectionName = options.connectionName;\n\t\tthis.status = options.status;\n\t\tthis.connected = options.connected;\n\t\tthis.addParams = options.addParams;\n\t\tthis.type = options.type;\n\t\tthis.id = options.type;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tgetSyncTimestamp()\n\t{\n\t\treturn this.syncTimestamp;\n\t}\n\n\tgetConnectionName()\n\t{\n\t\treturn this.connectionName;\n\t}\n\n\tgetSyncStatus()\n\t{\n\t\treturn this.status;\n\t}\n\n\tgetConnectStatus()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.connected)\n\t\t{\n\t\t\treturn this.status\n\t\t\t\t? \"success\"\n\t\t\t\t: \"failed\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'not_connected';\n\t\t}\n\t}\n\n\tgetClassLable()\n\t{\n\t\treturn this.type;\n\t}\n\n\tgetSections()\n\t{\n\t\treturn this.addParams.sections;\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.addParams.id;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.type;\n\t}\n}","import {Loc, Tag} from \"main.core\";\nimport StatusBlock from \"./controls/statusblock\";\nimport {ConnectionItem} from \"./connectionproviders/connectionitem\";\n\nexport default class SyncPanel\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\n\t\tthis.statusBlockEnterTimeout = null;\n\t\tthis.statusBlockLeaveTimeout = null;\n\t}\n\n\tshowContent()\n\t{\n\t\tconst mainHeader = Tag.render`\n\t\t\t<span class=\"calendar-sync-header-text\">${Loc.getMessage('SYNC_CALENDAR_HEADER')}</span>\n\t\t`;\n\n\t\tconst connections = this.getConnections();\n\n\t\tthis.blockStatus = StatusBlock.createInstance({\n\t\t\tstatus: this.status,\n\t\t\tconnections: connections,\n\t\t\twithStatus: true,\n\t\t\tpopupWithUpdateButton: true,\n\t\t\tpopupId: 'calendar-syncPanel-status',\n\t\t}).getContentStatusBlock();\n\n\t\tconst webHeader = Tag.render `\n\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_WEB_HEADER')}</div>\n\t\t`;\n\n\t\tconst mobileHeader = Tag.render `\n\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_MOBILE_HEADER')}</div>\n\t\t`;\n\n\t\tconst webContentBlock = Tag.render `\n\t\t\t<div id=\"calendar-sync-web\" class=\"calendar-sync-web\"></div>\n\t\t`;\n\n\t\tconst mobileContentBlock = Tag.render `\n\t\t\t<div id=\"calendar-sync-mobile\" class=\"calendar-sync-mobile\"></div>\n\t\t`;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t${mainHeader}\n\t\t\t\t\t${this.blockStatus}\n\t\t\t\t</div>\n\t\t\t\t${mobileHeader}\n\t\t\t\t${mobileContentBlock}\n\t\t\t\t${webHeader}\n\t\t\t\t${webContentBlock}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (connection instanceof ConnectionItem)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (connection.getConnectStatus() === true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsetGridContent()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\tconst mobileItems = items.filter(item => {\n\t\t\treturn item.getViewClassification() === 'mobile';\n\t\t});\n\t\tconst webItems = items.filter(item => {\n\t\t\treturn item.getViewClassification() === 'web';\n\t\t});\n\n\t\tthis.showWebGridContent(webItems);\n\t\tthis.showMobileGridContent(mobileItems);\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: document.getElementById('calendar-sync-web'),\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\tshowMobileGridContent(items)\n\t{\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems:  items,\n\t\t\tcontainer:  document.getElementById('calendar-sync-mobile'),\n\t\t\tsizeRatio:  \"55%\",\n\t\t\titemMinWidth:  180,\n\t\t\ttileMargin:  7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport SyncPanel from \"../syncpanel\";\nimport SyncStatusPopup from \"./syncstatuspopup\";\n\nexport default class SyncButton\n{\n\tSLIDER_WIDTH = 684;\n\tLOADER_NAME = \"calendar:loader\";\n\tBUTTON_SIZE = BX.UI.Button.Size.EXTRA_SMALL;\n\tBUTTON_ROUND = true;\n\n\tconstructor(options)\n\t{\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.wrapper = options.wrapper;\n\t\tthis.userId = options.userId;\n\t\tthis.status = options.status;\n\n\t\tthis.buttonEnterTimeout = null;\n\t\tthis.buttonLeaveTimeout = null;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tconst buttonData = this.getButtonData();\n\t\tthis.button = new BX.UI.Button({\n\t\t\ttext: buttonData.text,\n\t\t\tround: this.BUTTON_ROUND,\n\t\t\tsize: this.BUTTON_SIZE,\n\t\t\tcolor: buttonData.color,\n\t\t\tclassName: 'ui-btn-themes ' + (buttonData.iconClass || ''),\n\n\t\t\tonclick: () => {\n\t\t\t\tthis.handleClick();\n\t\t\t},\n\n\t\t\tevents: {\n\t\t\t\tmouseenter: this.handlerMouseEnter.bind(this),\n\t\t\t\tmouseleave: this.handlerMouseLeave.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.button.renderTo(this.wrapper);\n\t}\n\n\tshowPopup(button)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tconst connections = [];\n\t\t\tconst providersCollection = Object.values(this.connectionsProviders);\n\n\t\t\tprovidersCollection.forEach(provider => {\n\t\t\t\tconst providerConnections = provider.getConnections();\n\t\t\t\tif(providerConnections.length > 0)\n\t\t\t\t{\n\t\t\t\t\tproviderConnections.forEach(connection =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (connection.getConnectStatus() === true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.popup = SyncStatusPopup.createInstance({\n\t\t\t\tconnections: connections,\n\t\t\t\twithUpdateButton: true,\n\t\t\t\tnode: button.getContainer(),\n\t\t\t\tid: 'calendar-syncPanel-status',\n\t\t\t});\n\t\t\tthis.popup.show();\n\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', e => {\n\t\t\t\tclearTimeout(this.buttonEnterTimeout);\n\t\t\t\tclearTimeout(this.buttonLeaveTimeout);\n\t\t\t});\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () => {\n\t\t\t\tthis.hidePopup();\n\t\t\t});\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\trefresh(status, connectionProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionProviders;\n\t\tconst buttonData = this.getButtonData();\n\t\tthis.button.setColor(buttonData.color);\n\t\tthis.button.setText(buttonData.text);\n\t\tthis.button.removeClass('ui-btn-icon-fail ui-btn-icon-success');\n\t\tthis.button.addClass(buttonData.iconClass);\n\t}\n\n\thandleClick()\n\t{\n\t\tclearTimeout(this.buttonEnterTimeout);\n\t\tthis.syncPanel = new SyncPanel({\n\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\tuserId: this.userId,\n\t\t\tstatus: this.status,\n\t\t});\n\n\t\tconst syncPanel = this.syncPanel;\n\n\t\tBX.SidePanel.Instance.open(\"calendar:sync-slider\", {\n\t\t\tcontentCallback(slider)\n\t\t\t{\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(syncPanel.showContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory:false,\n\t\t\tevents: {\n\t\t\t\tonLoad: (slider) => {\n\t\t\t\t\tthis.syncPanel.setGridContent();\n\t\t\t\t},\n\t\t\t\t// onMessage: (event) => {\n\t\t\t\t// \tif (event.getEventId() === 'refreshSliderGrid')\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.refreshData();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t// onClose: (event) => {\n\t\t\t\t// \tBX.SidePanel.Instance.postMessageTop(window.top.BX.SidePanel.Instance.getTopSlider(), \"refreshCalendarGrid\", {});\n\t\t\t\t// },\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\n\t\t// this.refreshData();\n\t}\n\n\thandlerMouseEnter(button)\n\t{\n\t\tclearTimeout(this.buttonEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.buttonEnterTimeout = null;\n\t\t\t\tthis.showPopup(button);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.buttonEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.buttonEnterTimeout);\n\t\t\tthis.buttonEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.buttonLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tgetButtonData()\n\t{\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNCHRONIZATION'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'ui-btn-icon-success',\n\t\t\t};\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_FAILED'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'ui-btn-icon-fail',\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNC_CALENDAR'),\n\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t}\n\t}\n\n\tgetSyncPanel()\n\t{\n\t\treturn this.syncPanel;\n\t}\n}","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport {Reflection, Type} from \"main.core\";\n\nexport default class SyncPanelItem extends BX.TileGrid.Item\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.options = options;\n\t}\n\n\tgetContent()\n\t{\n\t\tif (this.options.className)\n\t\t{\n\t\t\tconst itemClass = Reflection.getClass(this.options.className);\n\n\t\t\tif (Type.isFunction(itemClass))\n\t\t\t{\n\t\t\t\tconst item = new itemClass(this.options);\n\t\t\t\treturn item.getInnerContent();\n\t\t\t}\n\n\t\t\treturn '';\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\n\nexport default class ConnectionControls\n{\n\tuserName = null;\n\tserver = null;\n\tconnectionName = null;\n\n\tconstructor(options = null)\n\t{\n\t\tthis.addButtonText = Loc.getMessage('CAL_UPPER_CONNECT');\n\t\tthis.removeButtonText = Loc.getMessage('CAL_UPPER_DISCONNECT');\n\t\tthis.saveButtonText = Loc.getMessage('CAL_UPPER_SAVE');\n\n\t\tif (options !== null)\n\t\t{\n\t\t\tthis.userName = BX.util.htmlspecialchars(options.userName);\n\t\t\tthis.server = BX.util.htmlspecialchars(options.server);\n\t\t\tthis.connectionName = BX.util.htmlspecialchars(options.connectionName);\n\t\t}\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-form\"></div>\n\t\t`;\n\t}\n\n\tgetForm()\n\t{\n\t\treturn Tag.render`\n\t\t\t<form class=\"calendar-sync-slider-form\" action=\"\">\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_NAME')}\\\" name=\"name\" value=\"${this.connectionName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_SERVER_ADDRESS')}\\\" name=\"server\" value=\"${this.server || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_USER_NAME')}\\\" name=\"user_name\" value=\"${this.userName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" name=\"password\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_PASSWORD')}\\\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetAddButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"connect-button\" class=\"ui-btn ui-btn-light-border\">${this.addButtonText}</button>\n\t\t`;\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"disconnect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.removeButtonText}</button>\n\t\t`;\n\t}\n\n\tgetSaveButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"edit-connect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.saveButtonText}</button>\n\t\t`;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-form-btn\"></div>\n\t\t`;\n\t}\n}","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class MobileSyncBanner\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tQRCODE_SIZE = 128;\n\tQRCODE_COLOR_LIGHT = '#ffffff';\n\tQRCODE_COLOR_DARK = '#000000';\n\tQRCODE_WRAP_CLASS = 'calendar-sync-slider-qr-container';\n\tQRC = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type;\n\t\tthis.helpDeskCode = options.helpDeskCode || '11828176';\n\t\tthis.fixHintPopupZIndexBinded = this.fixHintPopupZIndex.bind(this);\n\t}\n\n\tshow()\n\t{\n\t}\n\n\tshowInPopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync-qr-popup',\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 580,\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t});\n\t\tthis.popup.show();\n\n\t\tthis.initQrCode().then(this.drawQRCode.bind(this));\n\t}\n\n\tclose()\n\t{\n\t\tthis.popup.close();\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t${this.getSliderContentInfoBlock}\n\t\t\t<div class=\"calendar-sync-qr-popup-content\">\n\t\t\t\t<div class=\"calendar-sync-qr-popup-title\">\n\t\t\t\t\t${this.getTitle()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-content\">\n\t\t\t\t\t<img class=\"calendar-sync-slider-phone-img\" src=\"/bitrix/images/calendar/sync/qr-background.svg\" alt=\"\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-qr\">\n\t\t\t\t\t\t<div class=\"${this.QRCODE_WRAP_CLASS}\">${Util.getLoader(this.QRCODE_SIZE)}</div>\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-logo\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-instruction\">\n\t\t\t\t\t\t<!--<div class=\"calendar-sync-slider-instruction-subtitle\"></div>-->\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-title\">${Loc.getMessage('SYNC_MOBILE_NOTICE_HOW_TO')} ${this.type !== 'iphone' ? Tag.render `<span class=\"calendar-notice-mobile-banner\" data-hint=\"${Loc.getMessage('CAL_ANDROID_QR_CODE_HINT')}\" data-hint-no-icon=\"Y\"></span>` : ''}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-instruction-notice\">${Loc.getMessage('SYNC_MOBILE_NOTICE')}</div>\n\t\t\t\t\t\t<a href=\"javascript:void(0);\" \n\t\t\t\t\t\t\t\tonclick=\"BX.Helper.show('redirect=detail&code=' + ${this.getHelpdeskCode()},{zIndex:3100,}); event.preventDefault();\" \n\t\t\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t\t${Loc.getMessage('SYNC_MOBILE_ABOUT_BTN')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.DOM.mobileHintIcon = this.DOM.container.querySelector('.calendar-notice-mobile-banner');\n\t\tif (this.DOM.mobileHintIcon && BX.UI.Hint)\n\t\t{\n\t\t\tBX.UI.Hint.initNode(this.DOM.mobileHintIcon);\n\t\t\tBX.addCustomEvent('onPopupShow', this.fixHintPopupZIndexBinded);\n\t\t}\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetInnerContainer()\n\t{\n\t\treturn this.DOM.container.querySelector('.' + this.QRCODE_WRAP_CLASS);\n\t}\n\n\tinitQrCode()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension(['main.qrcode']).then((exports) => {\n\t\t\t\tif (exports && exports.QRCode)\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tdrawQRCode(wrap)\n\t{\n\t\tif (!Type.isDomNode(wrap))\n\t\t{\n\t\t\twrap = this.getInnerContainer();\n\t\t}\n\n\t\tthis.getMobileSyncUrl().then((link) => {\n\t\t\tDom.clean(wrap);\n\t\t\tthis.QRC = new QRCode(wrap, {\n\t\t\t\ttext: link,\n\t\t\t\twidth: this.getSize(),\n\t\t\t\theight: this.getSize(),\n\t\t\t\tcolorDark : this.QRCODE_COLOR_DARK,\n\t\t\t\tcolorLight : this.QRCODE_COLOR_LIGHT,\n\t\t\t\tcorrectLevel : QRCode.CorrectLevel.H\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn Loc.getMessage('SYNC_BANNER_MOBILE_TITLE');\n\t}\n\n\tgetMobileSyncUrl()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAuthLink')\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.data.link);\n\t\t\t\t},\n\t\t\t\treject\n\t\t\t);\n\t\t});\n\t}\n\n\tgetSize()\n\t{\n\t\treturn this.QRCODE_SIZE;\n\t}\n\n\tgetDetailHelpUrl()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.getHelpdeskCode();\n\t}\n\n\tgetHelpdeskCode()\n\t{\n\t\treturn this.helpDeskCode;\n\t}\n\n\tfixHintPopupZIndex(popupWindow)\n\t{\n\t\tif (popupWindow.uniquePopupId === 'ui-hint-popup'\n\t\t\t&& popupWindow.bindElement === this.DOM.mobileHintIcon)\n\t\t{\n\t\t\tconst Z_INDEX = 3200;\n\t\t\tif (popupWindow.params.zIndex && popupWindow.params.zIndex < Z_INDEX\n\t\t\t\t||\n\t\t\t\tpopupWindow.popupContainer.style.zIndex\n\t\t\t\t&& popupWindow.popupContainer.style.zIndex < Z_INDEX\n\t\t\t)\n\t\t\t{\n\t\t\t\tpopupWindow.params.zIndex = Z_INDEX;\n\t\t\t\tpopupWindow.popupContainer.style.zIndex = Z_INDEX;\n\t\t\t}\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport {ajax, Loc, Tag} from \"main.core\";\nimport StatusBlock from \"../controls/statusblock\"\nimport {EventEmitter} from \"main.core.events\";\n\nexport class InterfaceTemplate extends EventEmitter\n{\n\tstatic SLIDER_WIDTH = 606;\n\tsliderWidth = 840;\n\tstatic SLIDER_PREFIX = 'calendar:connection-sync-';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.InterfaceTemplate');\n\n\t\tthis.title = options.title;\n\t\tthis.helpdeskCode = options.helpDeskCode;\n\t\tthis.titleInfoHeader = options.titleInfoHeader;\n\t\tthis.descriptionInfoHeader = options.descriptionInfoHeader;\n\t\tthis.titleActiveHeader = options.titleActiveHeader;\n\t\tthis.descriptionActiveHeader = options.descriptionActiveHeader;\n\t\tthis.sliderIconClass = options.sliderIconClass;\n\t\tthis.iconPath = options.iconPath;\n\t\tthis.color = options.color;\n\t\tthis.provider = options.provider;\n\t\tthis.connection = options.connection;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t}\n\n\tstatic createInstance(provider, connection = null)\n\t{\n\t\treturn new this(provider, connection);\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t${this.getContentInfoHeader()}\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t${this.getContentActiveHeader()}\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentInfoHeader()\n\t{\n\t\tconst statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: \"not_connected\",\n\t\t\tconnections: [this.connection],\n\t\t\twithStatus: false,\n\t\t\tpopupWithUpdateButton: this.popupWithUpdateButton,\n\t\t\tpopupId: 'calendar-interfaceTemplate-status',\n\t\t})\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t${statusBlock.getContentStatusBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t`;\n\t}\n\n\tgetContentActiveHeader()\n\t{\n\t\tconst statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: this.connection.getStatus(),\n\t\t\tconnections: [this.connection],\n\t\t\twithStatus: false,\n\t\t\tpopupWithUpdateButton: this.popupWithUpdateButton,\n\t\t\tpopupId: 'calendar-interfaceTemplate-status',\n\t\t})\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t${statusBlock.getContentStatusBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t`;\n\t}\n\n\tshowHelp()\n\t{\n\t\tif (BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=\" + this.helpdeskCode);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHelpdeskLink()\n\t{\n\t\treturn 'https://helpdesk.bitrix24.ru/open/' + this.helpdeskCode;\n\t}\n\n\tgetHeaderTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetContentInfoBodyHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t${this.titleInfoHeader}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t${this.descriptionInfoHeader}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t${this.titleActiveHeader}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t${this.descriptionActiveHeader}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tsetProvider(provider)\n\t{\n\t\tthis.provider = provider;\n\t}\n\n\tsetConnection(connection)\n\t{\n\t\tthis.connection = connection;\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.removeConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\trunUpdateInfo()\n\t{\n\t\tajax.runAction('calendar.api.calendarajax.setSectionStatus', {\n\t\t\tdata: {\n\t\t\t\tsectionStatus: this.sectionStatusObject,\n\t\t\t},\n\t\t}).then(response => {\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t})\n\t}\n}","// @flow\n'use strict';\n\nimport {InterfaceTemplate} from './interfacetemplate';\nimport {Dom, Loc, Tag} from \"main.core\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\nimport StatusBlock from \"../controls/statusblock\";\n\n\nexport class CaldavInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestAddConnection(form);\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\tconst formObject = new ConnectionControls({\n\t\t\tserver: this.connection.addParams.server,\n\t\t\tuserName: this.connection.addParams.userName,\n\t\t\tconnectionName: this.connection.connectionName,\n\t\t});\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getDisconnectButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentActiveBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestRemoveConnection(this.connection.getId());\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tsendRequestEditConnection(form, options)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.editConnection', {\n\t\t\tdata: {\n\t\t\t\tform: new FormData(form),\n\t\t\t\tconnectionId: options.connectionId,\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\tsendRequestAddConnection(form)\n\t{\n\t\tconst fd = new FormData(form);\n\t\tBX.ajax.runAction('calendar.api.calendarajax.addConnection', {\n\t\t\tdata: {\n\t\t\t\tname: fd.get('name'),\n\t\t\t\tserver: fd.get('server'),\n\t\t\t\tuserName: fd.get('user_name'),\n\t\t\t\tpass: fd.get('password'),\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tBX.reload();\n\t\t}, response => {\n\t\t\tconst button = form.querySelector('#connect-button');\n\t\t\tthis.showAlertPopup(response.errors[0], button);\n\t\t});\n\t}\n\n\tshowAlertPopup(alert, button)\n\t{\n\t\tlet message = '';\n\t\tif (alert.code === 'incorrect_parameters')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_INCORRECT_PARAMETERS');\n\t\t}\n\t\telse if (alert.code === 'tech_problem')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_TECH_PROBLEM');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_DEFAULT');\n\t\t}\n\n\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\tmessage: message,\n\t\t\ttitle: alert.message,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tokCaption: Loc.getMessage('CAL_TEXT_BUTTON_RETURN_TO_SETTINGS'),\n\t\t\tminWidth: 358,\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: 3021,\n\t\t\t\theight: 166,\n\t\t\t\twidth: 358,\n\t\t\t\tclassName: 'calendar-alert-popup-connection'\n\t\t\t},\n\t\t\tonOk: () => {\n\t\t\t\tDom.removeClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class CaldavTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_CALDAV\"),\n\t\t\thelpDeskCode: '5697365',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_CALDAV_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_CALDAV_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALDAV_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_CALDAV_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-caldav',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\tcolor: '#1eae43',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class ExchangeTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_EXCHANGE\"),\n\t\t\thelpDeskCode: '11864622',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_EXCHANGE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_EXCHANGE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_EXCHANGE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\tcolor: '#54d0df',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {ajax, Dom, Loc, Tag} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\nimport {Popup} from \"main.popup\";\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport default class GoogleTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_GOOGLE\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_GOOGLE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_GOOGLE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_GOOGLE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-google',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/google.svg',\n\t\t\tcolor: '#387ced',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t}\n\n\tcreateConnection()\n\t{\n\t\tBX.util.popup(this.provider.getSyncLink(), 500, 600);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\t\tconst content = bodyHeader.querySelector('.calendar-sync-slider-header');\n\n\t\tif (this.provider.hasSetSyncCaldavSettings())\n\t\t{\n\t\t\tbutton.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tthis.createConnection();\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbutton.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tthis.showAlertPopup();\n\t\t\t});\n\t\t}\n\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, content);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t`;\n\t}\n\n\tgetContentActiveBody(): *\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentActiveBodySectionsManager()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst formObject = new ConnectionControls();\n\t\tconst disconnectButton = formObject.getDisconnectButton();\n\t\tdisconnectButton.addEventListener('click', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestRemoveConnection(this.connection.getId())\n\t\t});\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon calendar-sync-slider-header-icon-google\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-title\">${Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT')}</div>\n\t\t\t\t\t<span class=\"calendar-sync-slider-account\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-account-avatar\"></span>\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-account-email\">\n\t\t\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t${disconnectButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetContentActiveBodySectionsManager()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_AVAILABLE_CALENDAR')}</div>\n\t\t\t\t</div>\n\t\t\t\t<ul class=\"calendar-sync-slider-list\">\n\t\t\t\t\t${this.getContentActiveBodySections(this.connection.getId())}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodySections(connectionId)\n\t{\n\t\tconst sectionList = [];\n\t\tthis.provider.getConnection().getSections().forEach(section => {\n\t\t\tsectionList.push(Tag.render`\n\t\t\t\t<li class=\"calendar-sync-slider-item\">\n\t\t\t\t\t<label class=\"ui-ctl ui-ctl-checkbox ui-ctl-xs\">\n\t\t\t\t\t\t<input type=\"checkbox\" class=\"ui-ctl-element\" value=\"${BX.util.htmlspecialchars(section['ID'])}\" onclick=\"${this.onClickCheckSection.bind(this)}\" ${section['ACTIVE'] === 'Y' ? 'checked' : ''}>\n\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${BX.util.htmlspecialchars(section['NAME'])}</div>\n\t\t\t\t\t</label>\n\t\t\t\t</li>\n\t\t\t`);\n\t\t});\n\n\t\treturn sectionList;\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\n\t\tthis.runUpdateInfo();\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('GOOGLE_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class MacTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentBodyConnect()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBodyConnect()}\n\t\t`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header calendar-sync-slider-header-divide\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_MAC_INSTRUCTION_HEADER')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_DESCRIPTION')}:</span>\n\t\t\t\t\t<ol class=\"calendar-sync-slider-info-list\">\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIRST')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SECOND')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_THIRD')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FOURTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIFTH').replace(/#PORTAL_ADDRESS#/gi, this.provider.getPortalAddress())}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SIXTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SEVENTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_CONCLUSION')}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class OutlookTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class YandexTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_YANDEX\"),\n\t\t\thelpDeskCode: '10930170',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_YANDEX_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_YANDEX_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_YANDEX_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_YANDEX_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-yandex',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\tcolor: '#f9c500',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag, Type} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport MobileSyncBanner from \"../controls/mobilesyncbanner\";\nimport {Util} from \"calendar.util\";\n\nexport default class MobileInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.banner = new MobileSyncBanner({\n\t\t\ttype: this.provider.getType(),\n\t\t\thelpDeskCode: options.helpDeskCode,\n\t\t});\n\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.syncDate = Type.isDate(this.data.syncDate) ? this.data.syncDate : Util.parseDate(this.data.syncDate);\n\t\t}\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${Util.formatDateUsable(this.connection.getSyncTimestamp()) + ' ' + Util.formatTime(this.connection.getSyncTimestamp())}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-desc\">${Loc.getMessage('CAL_SYNC_DISABLE')}</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\tthis.banner.initQrCode().then(this.banner.drawQRCode.bind(this.banner));\n\t\treturn this.banner.getContainer();\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\n\nexport default class AndroidTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ANDROID\"),\n\t\t\thelpDeskCode: '5686179',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ANDROID_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ANDROID_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_ANDROID_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ANDROID_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-android',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/android.svg',\n\t\t\tcolor: '#9ece03',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\n\nexport default class IphoneTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_IPHONE\"),\n\t\t\thelpDeskCode: '5686207',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_IPHONE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_IPHONE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_IPHONE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_IPHONE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-iphone',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\tcolor: '#2fc6f6',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","import {ConnectionItem} from \"./connectionitem\";\nimport {Loc, Reflection, Type} from \"main.core\";\n\nexport class Connection\n{\n\tSLIDER_WIDTH = 606;\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connected = options.connected;\n\t\tthis.connections = options.connections;\n\t\tthis.gridTitle = options.gridTitle;\n\t\tthis.gridColor = options.gridColor;\n\t\tthis.gridIcon = options.gridIcon;\n\t\tthis.type = options.type;\n\t\tthis.viewClassification = options.viewClassification;\n\t\tthis.templateClass = options.templateClass;\n\t\tthis.connections = [];\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.connected;\n\t}\n\n\thasMenu()\n\t{\n\t\treturn false;\n\t}\n\n\tsetAdditionalParams (options)\n\t{\n\t\tthis.additionalParams = options;\n\t}\n\n\tgetGridTitle()\n\t{\n\t\treturn this.gridTitle;\n\t}\n\n\tgetGridColor()\n\t{\n\t\treturn this.gridColor;\n\t}\n\n\tgetGridIcon()\n\t{\n\t\treturn this.gridIcon;\n\t}\n\n\tsetConnections()\n\t{\n\t\tthis.connections.push(ConnectionItem.createInstance({\n\t\t\tsyncTimestamp: this.syncTimestamp,\n\t\t\tconnectionName: this.connectionName,\n\t\t\tstatus: this.status,\n\t\t\tconnected: this.connected,\n\t\t\taddParams: {\n\t\t\t\tsections: this.sections,\n\t\t\t\tid: this.id || this.type,\n\t\t\t},\n\t\t\ttype: this.type,\n\t\t}));\n\t}\n\n\tgetConnections()\n\t{\n\t\treturn this.connections;\n\t}\n\n\tgetConnection()\n\t{\n\t\treturn this.connections[0];\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.type;\n\t}\n\n\tgetViewClassification()\n\t{\n\t\treturn this.viewClassification;\n\t}\n\n\tgetConnectStatus()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tgetSyncStatus()\n\t{\n\t\treturn this.status;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.connected)\n\t\t{\n\t\t\treturn this.status\n\t\t\t\t? \"success\"\n\t\t\t\t: \"failed\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'not_connected';\n\t\t}\n\t}\n\n\tgetTemplateClass()\n\t{\n\t\treturn this.templateClass;\n\t}\n\n\topenSlider(options)\n\t{\n\t\tBX.SidePanel.Instance.open(options.sliderId, {\n\t\t\tcontentCallback(slider)\n\t\t\t{\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(options.content);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdata: options.data || {},\n\t\t\tcacheable: options.cacheable,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: event => {\n\t\t\t\t\tthis.itemSlider = event.getSlider();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\topenInfoConnectionSlider()\n\t{\n\t\tconst content = this.getClassTemplateItem().createInstance(this).getInfoConnectionContent();\n\t\tthis.openSlider({\n\t\t\tsliderId: 'calendar:item-sync-connect-' + this.type,\n\t\t\tcontent: content,\n\t\t\tcacheable: false,\n\t\t\tdata: {\n\t\t\t\tprovider: this,\n\t\t\t},\n\t\t});\n\t}\n\n\topenActiveConnectionSlider(connection)\n\t{\n\t\tconst itemInterface = this.getClassTemplateItem().createInstance(this, connection);\n\t\tconst content = itemInterface.getActiveConnectionContent();\n\t\tthis.openSlider({\n\t\t\tsliderId: 'calendar:item-sync-' + connection.id,\n\t\t\tcontent: content,\n\t\t\tcacheable: false,\n\t\t\tdata: {\n\t\t\t\tprovider: this,\n\t\t\t\tconnection: connection,\n\t\t\t\titemInterface: itemInterface,\n\t\t\t},\n\t\t});\n\t}\n\n\tgetClassTemplateItem()\n\t{\n\t\tconst itemClass = Reflection.getClass(this.getTemplateClass());\n\t\tif (Type.isFunction(itemClass))\n\t\t{\n\t\t\treturn itemClass;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetConnectionById(id)\n\t{\n\t\tconst connections = this.getConnections();\n\t\tif (connections.length > 0)\n\t\t{\n\t\t\tconnections.forEach(connection => {\n\t\t\t\tif (connection.getId() === id)\n\t\t\t\t{\n\t\t\t\t\treturn connection;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\treturn this.getConnection();\n\t}\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\n\nexport class MacProvider extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_MAC'),\n\t\t\tgridColor: '#ff5752',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\ttype: 'mac',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.MacTemplate',\n\t\t});\n\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.portalAddress = options.portalAddress;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_MAC');\n\n\t\tthis.setConnections();\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\nimport {Menu} from \"main.popup\";\n\nexport class OutlookProvider extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_OUTLOOK'),\n\t\t\tgridColor: '#ffa900',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/outlook.svg',\n\t\t\ttype: 'outlook',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.OutlookTemplate',\n\t\t});\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_OUTLOOK');\n\n\t\tthis.sections = options.sections;\n\t\tthis.infoBySections = options.infoBySections;\n\n\t\t// this.setConnectStatus();\n\t\tthis.setConnections();\n\t}\n\n\thasMenu()\n\t{\n\t\treturn this.sections.length > 0;\n\t}\n\n\tshowMenu(bindElement)\n\t{\n\t\tif (this.hasMenu())\n\t\t{\n\t\t\tif (this.menu)\n\t\t\t{\n\t\t\t\tthis.menu.getPopupWindow().setBindElement(bindElement);\n\t\t\t\tthis.menu.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst menuItems = this.getConnection().getSections();\n\n\t\t\t\tmenuItems.forEach(item =>\n\t\t\t\t{\n\t\t\t\t\tif (this.infoBySections[item.id])\n\t\t\t\t\t{\n\t\t\t\t\t\titem.className = 'calendar-sync-outlook-popup-item';\n\t\t\t\t\t}\n\n\t\t\t\t\titem.onclick = () =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (item && item.connectURL)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttry\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teval(item.connectURL);\n\t\t\t\t\t\t\t} catch (e)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\tthis.menu = new Menu({\n\t\t\t\t\tclassName: 'calendar-sync-popup-status',\n\t\t\t\t\tbindElement: bindElement,\n\t\t\t\t\titems: menuItems,\n\t\t\t\t\twidth: this.MENU_WIDTH,\n\t\t\t\t\tpadding: 7,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tzIndexAbsolute: 3020,\n\t\t\t\t\tid: this.getType() + '-menu',\n\t\t\t\t});\n\n\t\t\t\tthis.menu.getMenuContainer().addEventListener('click', () =>\n\t\t\t\t{\n\t\t\t\t\tthis.menu.close();\n\t\t\t\t});\n\n\t\t\t\tthis.menu.show();\n\t\t\t}\n\t\t}\n\t}\n\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\n\nexport class AndroidProvider extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_ANDROID'),\n\t\t\tgridColor: '#9ece03',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/android.svg',\n\t\t\ttype: 'android',\n\t\t\tviewClassification: 'mobile',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.AndroidTemplate',\n\t\t});\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_ANDROID');\n\n\t\tthis.setConnections();\n\t}\n}","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport {Loc, Reflection, Tag, Type} from \"main.core\";\nimport {Menu} from \"main.popup\";\n\nexport default class GridUnit extends BX.TileGrid.Item\n{\n\tstatic MENU_WIDTH = 200;\n\tstatic MENU_PADDING = 7;\n\tstatic MENU_INDEX = 3020;\n\n\tconstructor(item)\n\t{\n\t\tsuper({\n\t\t\tid: item.type,\n\t\t});\n\t\tthis.item = item;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.gridUnit = Tag.render`<div class=\"calendar-sync-item ${this.getAdditionalContentClass()}\" style=\"${this.getContentStyles()}\">\n\t\t\t<div class=\"calendar-item-content\">\n\t\t\t\t${this.getImage()}\n\t\t\t\t${this.getTitle()}\n\t\t\t\t${(this.isActive() ? this.getStatus() : '')}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.gridUnit.addEventListener('click', this.onClick.bind(this));\n\n\t\treturn this.gridUnit;\n\t}\n\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-title\">${BX.util.htmlspecialchars(this.item.getGridTitle())}</div>`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetImage()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-item-image\">\n\t\t\t\t<div class=\"calendar-sync-item-image-item\" style=\"background-image: ${'url(' + this.item.getGridIcon() + ')'}\"></div>\n\t\t\t</div>`;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-status\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.item.getConnectStatus();\n\t}\n\n\tgetAdditionalContentClass()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\tif (this.item.getSyncStatus())\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-selected';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-failed';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetContentStyles()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn 'background-color:' + this.item.getGridColor() + ';';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.item.hasMenu())\n\t\t{\n\t\t\tthis.item.showMenu(this.gridUnit);\n\t\t}\n\t\telse if (this.item.getConnectStatus())\n\t\t{\n\t\t\tthis.item.openActiveConnectionSlider(this.item.getConnection());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.item.openInfoConnectionSlider();\n\t\t}\n\t}\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\nimport {ConnectionItem} from \"./connectionitem\";\nimport {InterfaceTemplate} from \"../itemstemplate/interfacetemplate\";\nimport {Menu} from \"main.popup\";\nimport GridUnit from \"../gridunit\";\n\nexport class CaldavConnection extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tstatic calculateStatus(connections)\n\t{\n\t\tif (connections.length === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let key in connections)\n\t\t{\n\t\t\tif (connections[key].connected === true\n\t\t\t\t&& connections[key].status === false)\n\t\t\t{\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\thasMenu()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tshowMenu(bindElement)\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tthis.menu.getPopupWindow().setBindElement(bindElement);\n\t\t\tthis.menu.show();\n\t\t\treturn;\n\t\t}\n\n\t\tconst menuItems = this.connections;\n\t\tmenuItems.forEach(item => {\n\t\t\titem.type = this.type;\n\t\t\titem.id = item.addParams.id;\n\t\t\titem.text = item.connectionName;\n\t\t\titem.onclick = () => {\n\t\t\t\tthis.openActiveConnectionSlider(item);\n\t\t\t};\n\t\t});\n\n\t\tmenuItems.push(\n\t\t\t{delimiter: true},\n\t\t\t{\n\t\t\t\tid: 'connect',\n\t\t\t\ttext: Loc.getMessage('ADD_MENU_CONNECTION'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.openInfoConnectionSlider();\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\n\t\tthis.menu = new Menu({\n\t\t\tclassName: 'calendar-sync-popup-status',\n\t\t\tbindElement: bindElement,\n\t\t\titems: menuItems,\n\t\t\twidth: GridUnit.MENU_WIDTH,\n\t\t\tpadding: GridUnit.MENU_PADDING,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tzIndexAbsolute: GridUnit.MENU_INDEX,\n\t\t\tid: this.getType() + '-menu',\n\t\t});\n\n\t\tthis.menu.getMenuContainer().addEventListener('click', () => {\n\t\t\tthis.menu.close();\n\t\t});\n\n\t\tthis.menu.show();\n\t}\n\n\tsetConnections()\n\t{\n\t\tif (this.connectionsSyncInfo.length > 0)\n\t\t{\n\t\t\tthis.connectionsSyncInfo.forEach(connection => {\n\t\t\t\tthis.connections.push(ConnectionItem.createInstance({\n\t\t\t\t\tsyncTimestamp: connection.syncInfo.syncTimestamp,\n\t\t\t\t\tconnectionName: connection.syncInfo.connectionName,\n\t\t\t\t\tstatus: connection.syncInfo.status,\n\t\t\t\t\tconnected: connection.syncInfo.connected,\n\t\t\t\t\taddParams: {\n\t\t\t\t\t\tsections: connection.sections,\n\t\t\t\t\t\tid: connection.syncInfo.id,\n\t\t\t\t\t\tuserName: connection.syncInfo.userName,\n\t\t\t\t\t\tserver: connection.syncInfo.server,\n\t\t\t\t\t},\n\t\t\t\t\ttype: this.type,\n\t\t\t\t}));\n\t\t\t});\n\t\t}\n\t}\n}","import {CaldavConnection} from \"./caldavconnection\";\nimport {Loc} from \"main.core\";\n\nexport class CaldavProvider extends CaldavConnection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.status,\n\t\t\tconnected: options.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_CALDAV'),\n\t\t\tgridColor: '#1eae43',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\ttype: 'caldav',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.CaldavTemplate',\n\t\t});\n\n\t\tthis.connectionsSyncInfo = options.connections;\n\n\t\tthis.setConnections(options);\n\t}\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\n\nexport class ExchangeProvider extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_EXCHANGE'),\n\t\t\tgridColor: '#54d0df',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\ttype: 'exchange',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.ExchangeTemplate',\n\t\t});\n\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_EXCHANGE');\n\n\t\tthis.sections = options.sections;\n\n\t\tthis.setConnections();\n\t}\n\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\n\nexport class GoogleProvider extends Connection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_GOOGLE'),\n\t\t\tgridColor: '#387ced',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ttype: 'google',\n\t\t\tinterfaceClassName: '',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.GoogleTemplate',\n\t\t});\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.connectionName = options.syncInfo.userName\n\t\t\t? options.syncInfo.userName\n\t\t\t: Loc.getMessage('CALENDAR_TITLE_GOOGLE')\n\t\t;\n\t\tthis.id = options.syncInfo.id;\n\n\t\tthis.isSetSyncCaldavSettings = options.isSetSyncCaldavSettings;\n\n\t\tthis.syncLink = options.syncLink;\n\t\tthis.sections = options.sections;\n\n\t\tthis.setConnections();\n\t}\n\n\tgetSyncLink()\n\t{\n\t\treturn this.syncLink;\n\t}\n\n\thasSetSyncCaldavSettings()\n\t{\n\t\treturn this.isSetSyncCaldavSettings;\n\t}\n}","import {Connection} from \"./connection\";\nimport {Loc} from \"main.core\";\n\nexport class IphoneProvider extends Connection\n{\n\n\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_IPHONE'),\n\t\t\tgridColor: '#2fc6f6',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\ttype: 'iphone',\n\t\t\tviewClassification: 'mobile',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.IphoneTemplate',\n\t\t});\n\t\tthis.syncTimestamp = options.syncInfo.syncTimestamp;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_IPHONE');\n\n\t\tthis.setConnections();\n\t}\n\n}","import {CaldavConnection} from \"./caldavconnection\";\nimport {Loc} from \"main.core\";\n\nexport class YandexProvider extends CaldavConnection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.status,\n\t\t\tconnected: options.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_YANDEX'),\n\t\t\tgridColor: '#f9c500',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ttype: 'yandex',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.YandexTemplate',\n\t\t});\n\n\t\tthis.connectionsSyncInfo = options.connections;\n\n\t\tthis.setConnections(options);\n\t}\n}","// @flow\n'use strict';\n\nimport SyncButton from \"./controls/syncbutton\";\nimport {EventEmitter} from \"main.core.events\";\nimport \"./css/syncinterface.css\"\nimport {MacProvider} from \"./connectionproviders/macprovider\"\nimport {OutlookProvider} from \"./connectionproviders/outlookprovider\";\nimport {AndroidProvider} from \"./connectionproviders/androidprovider\";\nimport {CaldavProvider} from \"./connectionproviders/caldavprovider\";\nimport {ExchangeProvider} from \"./connectionproviders/exchangeprovider\";\nimport {GoogleProvider} from \"./connectionproviders/googleprovider\";\nimport {IphoneProvider} from \"./connectionproviders/iphoneprovider\";\nimport {YandexProvider} from \"./connectionproviders/yandexprovider\";\nimport {CaldavConnection} from \"./connectionproviders/caldavconnection\";\n\n\nexport default class SyncInterfaceManager extends EventEmitter\n{\n\tstatus = 'not_connected';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncInterfaceManager');\n\n\t\tthis.wrapper = options.wrapper;\n\t\tthis.syncInfo = options.syncInfo;\n\t\tthis.userId = options.userId;\n\t\tthis.syncLinks = options.syncLinks;\n\t\tthis.sections = options.sections;\n\t\tthis.portalAddress = options.portalAddress;\n\t\tthis.isRuZone = options.isRuZone;\n\t\tthis.calendarInstance = options.calendar;\n\t\tthis.isSetSyncCaldavSettings = options.isSetSyncCaldavSettings;\n\n\t\tthis.init();\n\n\t\tEventEmitter.subscribe('BX.Calendar.Sync.Interface.SyncStatusPopup:onRefresh', event => {\n\t\t\tthis.refresh(event);\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Calendar.Sync.Interface.InterfaceTemplate:reDrawCalendarGrid', event => {\n\t\t\tthis.reDrawCalendarGrid();\n\t\t});\n\t}\n\n\tshowSyncButton()\n\t{\n\t\tthis.syncButton = SyncButton.createInstance({\n\t\t\tstatus: this.status,\n\t\t\twrapper: this.wrapper,\n\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\tuserId: this.userId,\n\t\t});\n\t\tthis.syncButton.show();\n\t}\n\n\tinit()\n\t{\n\t\tthis.connectionsProviders = {};\n\t\tthis.webItems = [];\n\t\tthis.mobileItems = [];\n\t\tconst yandexConnections = [];\n\t\tconst caldavConnections = [];\n\n\t\tconst syncInfo = this.syncInfo;\n\n\t\tconst sectionsByType = this.sortSections();\n\n\t\tfor (let key in syncInfo)\n\t\t{\n\t\t\tswitch (syncInfo[key].type)\n\t\t\t{\n\t\t\t\tcase 'yandex':\n\t\t\t\t\tyandexConnections.push({\n\t\t\t\t\t\tsyncInfo: syncInfo[key],\n\t\t\t\t\t\tsections: sectionsByType.caldav['caldav' + syncInfo[key].id],\n\t\t\t\t\t\tisRuZone: this.isRuZone,\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'caldav':\n\t\t\t\t\tcaldavConnections.push({\n\t\t\t\t\t\tsyncInfo: syncInfo[key],\n\t\t\t\t\t\tsections: sectionsByType.caldav['caldav' + syncInfo[key].id],\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (syncInfo[key].connected === true)\n\t\t\t{\n\t\t\t\tif (syncInfo[key].status === true && this.status !== 'failed')\n\t\t\t\t{\n\t\t\t\t\tthis.status = 'success';\n\t\t\t\t}\n\t\t\t\telse if (syncInfo[key].status === false)\n\t\t\t\t{\n\t\t\t\t\tthis.status = 'failed';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.connectionsProviders = {\n\t\t\tgoogle: GoogleProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.google || {},\n\t\t\t\tsections: sectionsByType.google || {},\n\t\t\t\tsyncLink: this.syncLinks.google || null,\n\t\t\t\tisSetSyncCaldavSettings: this.isSetSyncCaldavSettings,\n\t\t\t}),\n\t\t\tcaldav: CaldavProvider.createInstance({\n\t\t\t\tstatus: CaldavConnection.calculateStatus(caldavConnections),\n\t\t\t\tconnected: (caldavConnections.length > 0),\n\t\t\t\tconnections: caldavConnections,\n\t\t\t}),\n\t\t\tiphone: IphoneProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.iphone,\n\t\t\t}),\n\t\t\tandroid: AndroidProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.android,\n\t\t\t}),\n\t\t\tmac: MacProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.mac,\n\t\t\t\tportalAddress: this.portalAddress,\n\t\t\t}),\n\t\t};\n\n\t\tif (this.isRuZone)\n\t\t{\n\t\t\tthis.connectionsProviders.yandex = YandexProvider.createInstance({\n\t\t\t\tstatus: CaldavConnection.calculateStatus(yandexConnections),\n\t\t\t\tconnected: (yandexConnections.length > 0),\n\t\t\t\tconnections: yandexConnections,\n\t\t\t});\n\t\t}\n\n\t\tif (!BX.browser.IsMac())\n\t\t{\n\t\t\tthis.connectionsProviders.outlook = OutlookProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.outlook,\n\t\t\t\tsections: sectionsByType.outlook,\n\t\t\t\tinfoBySections: syncInfo.outlook.infoBySections || {},\n\t\t\t});\n\t\t}\n\t\tconst has = Object.prototype.hasOwnProperty;\n\t\tif (has.call(syncInfo, `exchange`))\n\t\t{\n\t\t\tthis.connectionsProviders.exchange = ExchangeProvider.createInstance({\n\t\t\t\tsyncInfo: syncInfo.exchange,\n\t\t\t});\n\t\t}\n\t}\n\n\tsortSections()\n\t{\n\t\tconst sections = this.sections;\n\t\tconst exchangeSections = [];\n\t\tconst googleSections = [];\n\t\tconst sectionsByType = {};\n\t\tconst outlookSections = [];\n\t\tsectionsByType.caldav = {};\n\n\t\tsections.forEach(section => {\n\t\t\tif (section.belongsToView() && section.data.OUTLOOK_JS)\n\t\t\t{\n\t\t\t\toutlookSections.push({\n\t\t\t\t\tid: section.id,\n\t\t\t\t\tconnectURL: section.data.OUTLOOK_JS,\n\t\t\t\t\ttext: section.name,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (section.data['IS_EXCHANGE'] === true)\n\t\t\t{\n\t\t\t\texchangeSections.push(section.data);\n\t\t\t}\n\t\t\telse if (section.data['GAPI_CALENDAR_ID'] && section.data['CAL_DAV_CON'])\n\t\t\t{\n\t\t\t\tgoogleSections.push(section.data);\n\t\t\t}\n\t\t\telse if (section.data['CAL_DAV_CON'] && section.data['CAL_DAV_CAL'])\n\t\t\t{\n\t\t\t\tsectionsByType.caldav['caldav' + section.data['CAL_DAV_CON']] = section.data;\n\t\t\t}\n\t\t});\n\n\t\tsectionsByType.google = googleSections;\n\t\tsectionsByType.exchange = exchangeSections;\n\t\tsectionsByType.outlook = outlookSections;\n\n\t\treturn sectionsByType;\n\t}\n\n\trefresh(event)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.updateConnection', {\n\t\t\tdata: {\n\t\t\t\ttype: 'user',\n\t\t\t}\n\t\t}).then(response => {\n\t\t\tthis.syncInfo = response.data;\n\t\t\tthis.init();\n\t\t\tthis.calendarInstance.reload();\n\n\t\t\tthis.syncButton.refresh(this.status, this.connectionsProviders);\n\n\t\t\t//popup refresh\n\t\t\tif (event.getTarget().getId() === 'calendar-syncPanel-status')\n\t\t\t{\n\t\t\t\tevent.getTarget().refresh(this.getConnections());\n\t\t\t}\n\n\t\t\tconst openSliders = BX.SidePanel.Instance.getOpenSliders();\n\t\t\tif (openSliders.length > 0)\n\t\t\t{\n\t\t\t\tconst syncPanel = this.syncButton.getSyncPanel();\n\t\t\t\topenSliders.forEach(slider => {\n\t\t\t\t\tif (slider.getUrl() === 'calendar:sync-slider')\n\t\t\t\t\t{\n\t\t\t\t\t\tsyncPanel.refresh(this.status, this.connectionsProviders);\n\t\t\t\t\t\tslider.reload();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconst itemInterface = slider.getData().get('itemInterface');\n\t\t\t\t\t\tconst connection = slider.getData().get('connection');\n\t\t\t\t\t\tconst updatedConnection = this.connectionsProviders[connection.getType()].getConnectionById(connection.getId());\n\t\t\t\t\t\tevent.getTarget().refresh([updatedConnection]);\n\t\t\t\t\t\titemInterface.setConnection(updatedConnection);\n\t\t\t\t\t\tslider.reload();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\titems.forEach(item => {\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif(itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (connection.getConnectStatus() === true)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\treDrawCalendarGrid()\n\t{\n\t\tthis.calendarInstance.reload();\n\t}\n}"],"names":["SyncStatusPopup","options","setEventNamespace","connections","withUpdateButton","node","id","init","setPopupContent","popup","Popup","className","bindElement","content","container","angle","width","offsetLeft","offsetTop","padding","darkMode","autoHide","zIndexAbsolute","createPopup","show","Tag","render","forEach","connection","getConnectStatus","syncTime","getTime","getSyncTimestamp","classStatus","getSyncStatus","classLable","getClassLable","title","getConnectionName","block","getSyncElement","append","getContentRefreshBlock","IS_RUN_REFRESH","showRefreshStatus","destroy","time","format","Loc","getMessage","BX","date","key","util","htmlspecialchars","setContent","setRefreshStatusBlock","setTimeout","removeRefreshStatusBlock","enableRefreshButton","refreshStatusBlock","remove","refreshButton","footerWrapper","getContentRefreshButton","addEventListener","Dom","addClass","innerText","runRefresh","disableRefreshButton","prepend","getRefreshStatus","emit","EventEmitter","StatusBlock","status","withStatus","popupWithUpdateButton","popupId","statusInfoBlock","event","handlerMouseEnter","handlerMouseLeave","statusTextLabel","statusBlock","clearTimeout","statusBlockEnterTimeout","buttonEnterTimeout","showPopup","statusBlockLeaveTimeout","hidePopup","createInstance","getPopup","getPopupContainer","e","hide","ConnectionItem","syncTimestamp","connectionName","connected","addParams","type","sections","SyncPanel","connectionsProviders","userId","mainHeader","getConnections","blockStatus","getContentStatusBlock","webHeader","mobileHeader","webContentBlock","mobileContentBlock","items","Object","values","item","itemConnections","length","push","mobileItems","filter","getViewClassification","webItems","showWebGridContent","showMobileGridContent","grid","TileGrid","Grid","document","getElementById","sizeRatio","itemMinWidth","tileMargin","itemType","draw","SyncButton","UI","Button","Size","EXTRA_SMALL","wrapper","buttonLeaveTimeout","buttonData","getButtonData","button","text","round","BUTTON_ROUND","size","BUTTON_SIZE","color","iconClass","onclick","handleClick","events","mouseenter","bind","mouseleave","renderTo","providersCollection","provider","providerConnections","getContainer","connectionProviders","setColor","setText","removeClass","syncPanel","SidePanel","Instance","open","contentCallback","slider","Promise","resolve","reject","showContent","allowChangeHistory","onLoad","setGridContent","cacheable","SLIDER_WIDTH","loader","LOADER_NAME","Color","LIGHT_BORDER","PRIMARY","SyncPanelItem","itemClass","Reflection","getClass","Type","isFunction","getInnerContent","Item","ConnectionControls","addButtonText","removeButtonText","saveButtonText","userName","server","MobileSyncBanner","helpDeskCode","fixHintPopupZIndexBinded","fixHintPopupZIndex","draggable","zIndex","closeByEsc","closeIcon","initQrCode","then","drawQRCode","close","DOM","getSliderContentInfoBlock","getTitle","QRCODE_WRAP_CLASS","Util","getLoader","QRCODE_SIZE","getHelpdeskCode","mobileHintIcon","querySelector","Hint","initNode","addCustomEvent","Runtime","loadExtension","exports","QRCode","wrap","isDomNode","getInnerContainer","getMobileSyncUrl","link","clean","QRC","getSize","height","colorDark","QRCODE_COLOR_DARK","colorLight","QRCODE_COLOR_LIGHT","correctLevel","CorrectLevel","H","ajax","runAction","response","data","popupWindow","uniquePopupId","Z_INDEX","params","popupContainer","style","InterfaceTemplate","helpdeskCode","titleInfoHeader","descriptionInfoHeader","titleActiveHeader","descriptionActiveHeader","sliderIconClass","iconPath","getContentInfoHeader","getContentInfoBody","getContentActiveHeader","getContentActiveBody","getHeaderTitle","getContentInfoBodyHeader","getStatus","getContentActiveBodyHeader","Helper","preventDefault","showHelp","connectionId","reload","sectionStatus","sectionStatusObject","CaldavInterfaceTemplate","formObject","formBlock","getWrapper","form","getForm","getAddButton","buttonWrapper","getButtonWrapper","bodyHeader","sendRequestAddConnection","getDisconnectButton","sendRequestRemoveConnection","getId","FormData","fd","name","get","pass","showAlertPopup","errors","alert","message","code","messageBox","Dialogs","MessageBox","buttons","MessageBoxButtons","OK","okCaption","minWidth","mediumButtonSize","popupOptions","onOk","CaldavTemplate","ExchangeTemplate","GoogleTemplate","getSyncLink","hasSetSyncCaldavSettings","createConnection","getContentActiveBodySectionsManager","disconnectButton","getContentActiveBodySections","sectionList","getConnection","getSections","section","onClickCheckSection","target","value","checked","runUpdateInfo","MacTemplate","portalAddress","getContentBodyConnect","replace","getPortalAddress","OutlookTemplate","YandexTemplate","MobileInterfaceTemplate","banner","getType","syncDate","isDate","parseDate","formatDateUsable","formatTime","AndroidTemplate","IphoneTemplate","Connection","gridTitle","gridColor","gridIcon","viewClassification","templateClass","additionalParams","sliderId","itemSlider","getSlider","getClassTemplateItem","getInfoConnectionContent","openSlider","itemInterface","getActiveConnectionContent","getTemplateClass","MacProvider","syncInfo","setConnections","OutlookProvider","infoBySections","hasMenu","menu","getPopupWindow","setBindElement","menuItems","connectURL","eval","Menu","MENU_WIDTH","getMenuContainer","AndroidProvider","GridUnit","gridUnit","getAdditionalContentClass","getContentStyles","getImage","isActive","onClick","layout","getGridTitle","getGridIcon","getGridColor","showMenu","openActiveConnectionSlider","openInfoConnectionSlider","CaldavConnection","delimiter","MENU_PADDING","MENU_INDEX","connectionsSyncInfo","CaldavProvider","ExchangeProvider","GoogleProvider","interfaceClassName","isSetSyncCaldavSettings","syncLink","IphoneProvider","YandexProvider","SyncInterfaceManager","syncLinks","isRuZone","calendarInstance","calendar","subscribe","refresh","reDrawCalendarGrid","syncButton","yandexConnections","caldavConnections","sectionsByType","sortSections","caldav","google","calculateStatus","iphone","android","mac","yandex","browser","IsMac","outlook","has","prototype","hasOwnProperty","call","exchange","exchangeSections","googleSections","outlookSections","belongsToView","OUTLOOK_JS","getTarget","openSliders","getOpenSliders","getSyncPanel","getUrl","getData","updatedConnection","getConnectionById","setConnection"],"mappings":"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"}