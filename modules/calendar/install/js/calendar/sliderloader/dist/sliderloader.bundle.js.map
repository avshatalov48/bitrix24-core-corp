{"version":3,"file":"sliderloader.bundle.js","sources":["../src/sliderloader.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Runtime, Type} from \"main.core\";\nexport class SliderLoader\n{\n\tconstructor(entryId, options = {})\n\t{\n\t\tthis.extensionName = (\n\t\t\t(\n\t\t\t\tType.isString(entryId)\n\t\t\t\t&& (\n\t\t\t\t\tentryId === 'NEW'\n\t\t\t\t\t|| entryId.substr(0, 4) === 'EDIT'\n\t\t\t\t)\n\t\t\t)\n\t\t\t|| !parseInt(entryId)\n\t\t)\n\t\t\t? 'EventEditForm'\n\t\t\t: 'EventViewForm';\n\n\t\tthis.sliderId = options.sliderId || \"calendar:slider-\" + Math.random();\n\n\t\tentryId = (Type.isString(entryId) && entryId.substr(0, 4) === 'EDIT')\n\t\t\t? parseInt(entryId.substr(4))\n\t\t\t: parseInt(entryId);\n\n\t\tthis.extensionParams = {\n\t\t\tentryId: entryId,\n\t\t\tentry: options.entry || null,\n\t\t\ttype: options.type || null,\n\t\t\townerId: parseInt(options.ownerId) || null,\n\t\t\tuserId: parseInt(options.userId) || null,\n\t\t};\n\n\t\tif (parseInt(options.organizerId))\n\t\t{\n\t\t\tthis.extensionParams.organizerId = parseInt(options.organizerId);\n\t\t}\n\n\t\tif (Type.isArray(options.participantsEntityList))\n\t\t{\n\t\t\tthis.extensionParams.participantsEntityList = options.participantsEntityList;\n\t\t}\n\n\t\tif (options.formDataValue)\n\t\t{\n\t\t\tthis.extensionParams.formDataValue = options.formDataValue;\n\t\t}\n\n\t\tif (Type.isDate(options.entryDateFrom))\n\t\t{\n\t\t\tthis.extensionParams.entryDateFrom = options.entryDateFrom;\n\t\t}\n\n\t\tif (options.timezoneOffset)\n\t\t{\n\t\t\tthis.extensionParams.timezoneOffset = options.timezoneOffset;\n\t\t}\n\n\t\tif (Type.isString(options.entryName))\n\t\t{\n\t\t\tthis.extensionParams.entryName = options.entryName;\n\t\t}\n\n\t\tif (Type.isString(options.entryDescription))\n\t\t{\n\t\t\tthis.extensionParams.entryDescription = options.entryDescription;\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tBX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.loadExtension.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t}\n\t\t});\n\t}\n\n\tloadExtension(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst extensionName = 'calendar.' + this.extensionName.toLowerCase();\n\t\t\tRuntime.loadExtension(extensionName).then((exports) => {\n\t\t\t\tif (exports && exports[this.extensionName])\n\t\t\t\t{\n\t\t\t\t\tconst calendarForm = new exports[this.extensionName](this.extensionParams);\n\t\t\t\t\tif (typeof calendarForm.initInSlider)\n\t\t\t\t\t{\n\t\t\t\t\t\tcalendarForm.initInSlider(slider, resolve);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"calendar.${extensionName}\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}"],"names":["SliderLoader","entryId","options","extensionName","Type","isString","substr","parseInt","sliderId","Math","random","extensionParams","entry","type","ownerId","userId","organizerId","isArray","participantsEntityList","formDataValue","isDate","entryDateFrom","timezoneOffset","entryName","entryDescription","BX","SidePanel","Instance","open","contentCallback","loadExtension","bind","label","text","Loc","getMessage","bgColor","slider","Promise","resolve","toLowerCase","Runtime","then","exports","calendarForm","initInSlider","console","error"],"mappings":"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"}