{"version":3,"file":"planner.bundle.js","sources":["../src/selector.js","../src/planner.js"],"sourcesContent":["\"use strict\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Util} from \"calendar.util\";\nimport {Type, Dom, Tag} from 'main.core';\n\nexport class Selector extends EventEmitter\n{\n\tDOM = {};\n\tselectMode = false;\n\tcurrentDateFrom = new Date();\n\tcurrentDateTo = new Date();\n\tcurrentFullDay = false;\n\tuseAnimation = true;\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Planner.Selector');\n\n\t\tthis.selectMode = params.selectMode;\n\t\tthis.getPosByDate = params.getPosByDate;\n\t\tthis.getDateByPos = params.getDateByPos;\n\t\tthis.getPosDateMap = params.getPosDateMap;\n\t\tthis.getTimelineWidth = params.getTimelineWidth;\n\t\tthis.getScaleInfo = params.getScaleInfo;\n\n\t\tthis.useAnimation = params.useAnimation !== false;\n\t\tthis.DOM.timelineWrap = params.timelineWrap;\n\n\t\tthis.render();\n\t}\n\n\trender()\n\t{\n\t\tthis.DOM.wrap = Tag.render`\n\t\t\t<div class=\"calendar-planner-timeline-selector\" data-bx-planner-meta=\"selector\">\n\t\t\t\t<span data-bx-planner-meta=\"selector-resize-left\" class=\"calendar-planner-timeline-drag-left\"></span>\n\t\t\t\t<span class=\"calendar-planner-timeline-selector-grip\"></span>\n\t\t\t\t<span data-bx-planner-meta=\"selector-resize-right\" class=\"calendar-planner-timeline-drag-right\"></span>\n\t\t\t</div>`;\n\n\t\t// prefent draging selector and activating uploader controll in livefeed\n\t\tthis.DOM.wrap.ondrag = BX.False;\n\t\tthis.DOM.wrap.ondragstart = BX.False;\n\n\t\tthis.DOM.titleNode = Tag.render`<div class=\"calendar-planner-selector-notice\" style=\"display: none\"></div>`;\n\n\t\tif (this.selectMode)\n\t\t{\n\t\t\tresult.controlWrap = this.DOM.wrap.appendChild(Tag.render`<div class=\"calendar-planner-selector-control\"></div>`);\n\t\t}\n\t}\n\n\tgetWrap()\n\t{\n\t\treturn this.DOM.wrap;\n\t}\n\n\tgetTitleNode()\n\t{\n\t\treturn this.DOM.titleNode;\n\t}\n\n\t/**\n\t *\n\t *\n\t * @params array array of parameters\n\t * @params[from]\n\t * @params[to]\n\t * @params[updateScaleType] bool\n\t * @params[updateScaleLimits] bool\n\t *\n\t * @return null\n\t */\n\tupdate(params = {})\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t\tparams = {};\n\n\t\tparams.updateScaleType = !!params.updateScaleType;\n\t\tparams.updateScaleLimits = !!params.updateScaleLimits;\n\t\tparams.animation = !!params.animation;\n\n\t\tlet\n\t\t\trebuildTimeline = false,\n\t\t\tfrom = Type.isDate(params.from) ? params.from : BX.parseDate(params.from) || this.currentDateFrom,\n\t\t\tto = Type.isDate(params.to) ? params.to : BX.parseDate(params.to) || this.currentDateTo,\n\t\t\tfullDay = params.fullDay !== undefined ? params.fullDay : this.currentFullDay;\n\n\t\tif (Type.isDate(from) && Type.isDate(to))\n\t\t{\n\t\t\tthis.currentDateFrom = from;\n\t\t\tthis.currentDateTo = to;\n\t\t\tthis.currentFullDay = fullDay;\n\n\t\t\t//this.SetFullDayMode(fullDay);\n\t\t\tif (fullDay)\n\t\t\t{\n\t\t\t\tto = new Date(to.getTime() + Util.getDayLength());\n\t\t\t\tfrom.setHours(0, 0, 0,0);\n\t\t\t\tto.setHours(0, 0, 0,0);\n\n\t\t\t\t// if (this.scaleType !== '1day')\n\t\t\t\t// {\n\t\t\t\t// \tthis.setScaleType('1day');\n\t\t\t\t// \trebuildTimeline = true;\n\t\t\t\t// }\n\t\t\t}\n\n\t\t\t// Update limits of scale\n\t\t\t// if (params.updateScaleLimits && this.scaleType !== '1day')\n\t\t\t// {\n\t\t\t// \tlet timeFrom = parseInt(from.getHours()) + Math.floor(from.getMinutes() / 60);\n\t\t\t// \tlet timeTo = parseInt(to.getHours()) + Math.ceil(to.getMinutes() / 60);\n\t\t\t//\n\t\t\t// \tif (Util.formatDate(from) !== Util.formatDate(to))\n\t\t\t// \t{\n\t\t\t// \t\tthis.extendScaleTime(0, 24);\n\t\t\t// \t\trebuildTimeline = true;\n\t\t\t// \t}\n\t\t\t// \telse\n\t\t\t// \t{\n\t\t\t// \t\tif (timeFrom < this.shownScaleTimeFrom)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tthis.extendScaleTime(timeFrom, false);\n\t\t\t// \t\t\trebuildTimeline = true;\n\t\t\t// \t\t}\n\t\t\t//\n\t\t\t// \t\tif (timeTo > this.shownScaleTimeTo)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tthis.extendScaleTime(false, timeTo);\n\t\t\t// \t\t\trebuildTimeline = true;\n\t\t\t// \t\t}\n\t\t\t//\n\t\t\t// \t\tif (rebuildTimeline)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tthis.adjustCellWidth();\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\t//if (params.RRULE)\n\t\t\t//{\n\t\t\t//\tthis.HandleRecursion(params);\n\t\t\t//}\n\n\t\t\t// if (rebuildTimeline)\n\t\t\t// {\n\t\t\t// \tthis.RebuildPlanner({updateSelector: false});\n\t\t\t// }\n\n\t\t\t// Update selector\n\t\t\tthis.show(from, to, {animation: params.animation, focus: params.focus});\n\t\t}\n\t}\n\n\tshow(from, to, params)\n\t{\n\t\tlet\n\t\t\tanimation = params.animation && this.useAnimation !== false,\n\t\t\tfocus = params.focus,\n\t\t\talignCenter = params.alignCenter !== false;\n\n\t\tthis.DOM.wrap.style.display = 'block';\n\n\t\tif (Type.isDate(from) && Type.isDate(to))\n\t\t{\n\t\t\tlet\n\t\t\t\tfromPos = this.getPosByDate(from),\n\t\t\t\ttoPos = this.getPosByDate(to);\n\n\t\t\tthis.DOM.wrap.style.width = (toPos - fromPos) + 'px';\n\n\t\t\tif (animation && this.DOM.wrap.style.left && !this.currentFullDay)\n\t\t\t{\n\t\t\t\tthis.transit({\n\t\t\t\t\ttoX: fromPos,\n\t\t\t\t\ttriggerChangeEvents: false,\n\t\t\t\t\tfocus: focus === true\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.wrap.style.left = fromPos + 'px';\n\t\t\t\tthis.DOM.wrap.style.width = (toPos - fromPos) + 'px';\n\t\t\t\tthis.focus(false, 200, alignCenter);\n\t\t\t\tthis.checkStatus(fromPos);\n\t\t\t}\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tthis.DOM.wrap.style.display = 'none';\n\t}\n\n\tstartMove()\n\t{\n\t\tthis.selectorIsDraged = true;\n\t\tthis.selectorRoundedPos = false;\n\t\tthis.selectorStartLeft = parseInt(this.DOM.wrap.style.left);\n\t\tthis.selectorStartScrollLeft = this.DOM.timelineWrap.scrollLeft;\n\n\t\tDom.addClass(document.body, 'calendar-planner-unselectable');\n\t}\n\n\tmove(x)\n\t{\n\t\tif (this.selectorIsDraged)\n\t\t{\n\t\t\tlet selectorWidth = parseInt(this.DOM.wrap.style.width), pos = this.selectorStartLeft + x;\n\n\t\t\t// Correct cursor position acording to changes of scrollleft\n\t\t\tpos -= this.selectorStartScrollLeft - this.DOM.timelineWrap.scrollLeft;\n\n\t\t\tif (this.getPosDateMap()[pos])\n\t\t\t{\n\t\t\t\tthis.selectorRoundedPos = pos;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet roundedPos = Selector.roundPos(pos);\n\t\t\t\tif (this.getPosDateMap()[roundedPos])\n\t\t\t\t{\n\t\t\t\t\tthis.selectorRoundedPos = roundedPos;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet checkedPos = this.checkPosition(this.selectorRoundedPos);\n\t\t\tif (checkedPos !== this.selectorRoundedPos)\n\t\t\t{\n\t\t\t\tthis.selectorRoundedPos = checkedPos;\n\t\t\t\tpos = checkedPos;\n\t\t\t}\n\n\t\t\tthis.DOM.wrap.style.left = pos + 'px';\n\t\t\tthis.showTitle({fromPos: pos, toPos: this.selectorRoundedPos + selectorWidth});\n\n\t\t\tthis.checkStatus(this.selectorRoundedPos, true);\n\t\t}\n\t}\n\n\tendMove()\n\t{\n\t\tif (this.selectorIsDraged && this.selectorRoundedPos)\n\t\t{\n\t\t\tthis.DOM.wrap.style.left = this.selectorRoundedPos + 'px';\n\t\t\tthis.selectorRoundedPos = false;\n\t\t\tthis.hideTitle();\n\t\t\tthis.setValue(this.selectorRoundedPos);\n\t\t}\n\t\tthis.selectorIsDraged = false;\n\t}\n\n\tstartResize()\n\t{\n\t\tthis.selectorIsResized = true;\n\t\tthis.selectorRoundedPos = false;\n\n\t\tthis.selectorStartLeft = parseInt(this.DOM.wrap.style.left);\n\t\tthis.selectorStartWidth = parseInt(this.DOM.wrap.style.width);\n\t\tthis.selectorStartScrollLeft = this.DOM.timelineWrap.scrollLeft;\n\t}\n\n\tresize(x)\n\t{\n\t\tif (this.selectorIsResized)\n\t\t{\n\t\t\tlet\n\t\t\t\ttoDate,\n\t\t\t\ttimeTo,\n\t\t\t\twidth = this.selectorStartWidth + x;\n\n\t\t\t// Correct cursor position according to changes of scrollLeft\n\t\t\twidth -= this.selectorStartScrollLeft - this.DOM.timelineWrap.scrollLeft;\n\t\t\tlet rightPos = Math.min(this.selectorStartLeft + width, this.getTimelineWidth());\n\n\t\t\ttoDate = this.getDateByPos(rightPos, true);\n\n\t\t\tif (this.fullDayMode)\n\t\t\t{\n\t\t\t\ttimeTo = parseInt(toDate.getHours()) + Math.round((toDate.getMinutes() / 60) * 10) / 10;\n\t\t\t\ttoDate.setHours(0, 0, 0, 0);\n\t\t\t\tif (timeTo > 12)\n\t\t\t\t{\n\t\t\t\t\ttoDate = new Date(toDate.getTime() + Util.getDayLength());\n\t\t\t\t\ttoDate.setHours(0, 0, 0, 0);\n\t\t\t\t}\n\t\t\t\trightPos = this.getPosByDate(toDate);\n\t\t\t\twidth = rightPos - this.selectorStartLeft;\n\n\t\t\t\tif (width <= 10)\n\t\t\t\t{\n\t\t\t\t\ttoDate = this.getDateByPos(this.selectorStartLeft);\n\t\t\t\t\ttoDate = new Date(toDate.getTime() + Util.getDayLength());\n\t\t\t\t\ttoDate.setHours(0, 0, 0, 0);\n\t\t\t\t\twidth = this.getPosByDate(toDate) - this.selectorStartLeft;\n\t\t\t\t\trightPos = this.selectorStartLeft + width;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.shownScaleTimeFrom !== 0 || this.shownScaleTimeTo !== 24)\n\t\t\t{\n\t\t\t\tlet fromDate = this.getDateByPos(this.selectorStartLeft);\n\t\t\t\tif (toDate && fromDate && Util.formatDate(fromDate) !== Util.formatDate(toDate))\n\t\t\t\t{\n\t\t\t\t\ttoDate = new Date(fromDate.getTime());\n\t\t\t\t\ttoDate.setHours(this.shownScaleTimeTo, 0, 0, 0);\n\t\t\t\t\trightPos = this.getPosByDate(toDate);\n\t\t\t\t\twidth = rightPos - this.selectorStartLeft;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.getPosDateMap()[rightPos])\n\t\t\t{\n\t\t\t\tthis.selectorRoundedRightPos = rightPos;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet roundedPos = Selector.roundPos(rightPos);\n\t\t\t\tif (this.getPosDateMap()[roundedPos])\n\t\t\t\t{\n\t\t\t\t\tthis.selectorRoundedRightPos = roundedPos;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.DOM.wrap.style.width = width + 'px';\n\t\t\tthis.showTitle({fromPos: this.selectorStartLeft, toPos: this.selectorRoundedRightPos});\n\t\t\tthis.checkStatus(this.selectorStartLeft, true);\n\t\t}\n\t}\n\n\tendResize()\n\t{\n\t\tif (this.selectorIsResized && this.selectorRoundedRightPos)\n\t\t{\n\t\t\tthis.DOM.wrap.style.width = (this.selectorRoundedPos - parseInt(this.DOM.wrap.style.left)) + 'px';\n\t\t\tthis.selectorRoundedRightPos = false;\n\t\t\tthis.hideTitle();\n\t\t\tthis.setValue();\n\t\t}\n\t\tthis.selectorIsResized = false;\n\t}\n\n\tisDragged()\n\t{\n\t\treturn this.selectorIsResized || this.selectorIsDraged;\n\t}\n\n\tcheckStatus(selectorPos, checkPosition)\n\t{\n\t\t// if (this.config.useSolidBlueSelector)\n\t\t// {\n\t\t// \tDom.removeClass(this.DOM.wrap, 'calendar-planner-timeline-selector-warning');\n\t\t// \tDom.removeClass(this.mainContWrap, 'calendar-planner-selector-warning');\n\t\t// \tDom.addClass(this.DOM.wrap, 'solid');\n\t\t// }\n\t\t// else\n\t\t{\n\t\t\tif (!selectorPos)\n\t\t\t{\n\t\t\t\tselectorPos = Selector.roundPos(this.DOM.wrap.style.left);\n\t\t\t}\n\n\t\t\tlet fromDate, toDate;\n\t\t\tif (checkPosition === true || !this.currentDateFrom)\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tselectorWidth = parseInt(this.DOM.wrap.style.width),\n\t\t\t\t\tfromPos = selectorPos,\n\t\t\t\t\ttoPos = fromPos + selectorWidth;\n\n\t\t\t\tif (!fromPos && !toPos && !selectorWidth && this.lastFromDate)\n\t\t\t\t{\n\t\t\t\t\tfromDate = this.lastFromDate;\n\t\t\t\t\ttoDate = this.lastToDate;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfromDate = this.getDateByPos(fromPos);\n\t\t\t\t\ttoDate = this.getDateByPos(toPos, true);\n\t\t\t\t\tthis.lastFromDate = fromDate;\n\t\t\t\t\tthis.lastToDate = toDate;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfromDate = this.currentDateFrom;\n\t\t\t\ttoDate = this.currentDateTo;\n\t\t\t}\n\n\t\t\tthis.emit('doCheckStatus', new BaseEvent({data: {dateFrom: fromDate,dateTo: toDate}}));\n\t\t}\n\t}\n\n\tsetSelectorStatus(status)\n\t{\n\t\tthis.selectorIsFree = status;\n\t\tif (this.selectorIsFree)\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrap, 'calendar-planner-timeline-selector-warning');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrap, 'calendar-planner-timeline-selector-warning');\n\t\t}\n\t}\n\n\tsetValue(selectorPos, selectorWidth)\n\t{\n\t\tif (!selectorPos)\n\t\t{\n\t\t\tselectorPos = parseInt(this.DOM.wrap.style.left);\n\t\t}\n\t\tselectorPos = Math.max(0, selectorPos);\n\n\t\tif (!selectorWidth)\n\t\t{\n\t\t\tselectorWidth = parseInt(this.DOM.wrap.style.width);\n\t\t}\n\n\t\tif (selectorPos + selectorWidth > parseInt(this.getTimelineWidth()))\n\t\t{\n\t\t\tselectorPos = parseInt(this.getTimelineWidth()) - selectorWidth;\n\t\t}\n\n\t\tlet\n\t\t\tdateFrom = this.getDateByPos(selectorPos),\n\t\t\tdateTo = this.getDateByPos(selectorPos + selectorWidth, true);\n\n\t\tif (dateFrom && dateTo)\n\t\t{\n\t\t\tthis.currentDateFrom = dateFrom;\n\t\t\tthis.currentDateTo = dateTo;\n\n\t\t\tif (this.fullDayMode)\n\t\t\t{\n\t\t\t\tdateTo = new Date(dateTo.getTime() - Util.getDayLength());\n\t\t\t}\n\n\t\t\tthis.currentFullDay = this.fullDayMode;\n\n\t\t\tthis.emit('onChange', new BaseEvent({data: {\n\t\t\t\tdateFrom: dateFrom,\n\t\t\t\tdateTo: dateTo,\n\t\t\t\tfullDay: this.fullDayMode\n\t\t\t}}));\n\t\t}\n\t}\n\n\tcheckPosition(fromPos, selectorWidth, toPos)\n\t{\n\t\tlet scaleInfo = this.getScaleInfo();\n\t\tif (scaleInfo.shownTimeFrom !== 0 || scaleInfo.shownTimeTo !== 24\n\t\t&& (scaleInfo.type !== '1day' || this.fullDayMode))\n\t\t{\n\t\t\tif (!fromPos)\n\t\t\t\tfromPos = parseInt(this.DOM.wrap.style.left);\n\n\t\t\tif (!selectorWidth)\n\t\t\t\tselectorWidth = parseInt(this.DOM.wrap.style.width);\n\n\t\t\tif (!toPos)\n\t\t\t\ttoPos = fromPos + selectorWidth;\n\n\t\t\tif (toPos > parseInt(this.getTimelineWidth()))\n\t\t\t{\n\t\t\t\tfromPos = parseInt(this.getTimelineWidth()) - selectorWidth;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tfromDate = this.getDateByPos(fromPos),\n\t\t\t\t\ttoDate = this.getDateByPos(toPos, true),\n\t\t\t\t\ttimeFrom, timeTo,\n\t\t\t\t\tscaleTimeFrom = parseInt(scaleInfo.shownTimeFrom),\n\t\t\t\t\tscaleTimeTo = parseInt(scaleInfo.shownTimeTo);\n\n\t\t\t\tif (fromDate && toDate)\n\t\t\t\t{\n\t\t\t\t\tif (this.fullDayMode)\n\t\t\t\t\t{\n\t\t\t\t\t\ttimeFrom = parseInt(fromDate.getHours()) + Math.round((fromDate.getMinutes() / 60) * 10) / 10;\n\t\t\t\t\t\tfromDate.setHours(0, 0, 0, 0);\n\n\t\t\t\t\t\tif (timeFrom > 12)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfromDate = new Date(fromDate.getTime() + Util.getDayLength());\n\t\t\t\t\t\t\tfromDate.setHours(0, 0, 0, 0);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfromPos = this.getPosByDate(fromDate);\n\t\t\t\t\t}\n\t\t\t\t\telse if (fromDate.getDay() !== toDate.getDay())\n\t\t\t\t\t{\n\t\t\t\t\t\ttimeFrom = parseInt(fromDate.getHours()) + Math.round((fromDate.getMinutes() / 60) * 10) / 10;\n\t\t\t\t\t\ttimeTo = parseInt(toDate.getHours()) + Math.round((toDate.getMinutes() / 60) * 10) / 10;\n\t\t\t\t\t\tif (Math.abs(scaleTimeTo - timeFrom) > Math.abs(scaleTimeFrom - timeTo))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfromDate.setHours(scaleInfo.shownTimeTo, 0, 0,0);\n\t\t\t\t\t\t\tfromPos = this.getPosByDate(fromDate) - selectorWidth;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttoDate.setHours(scaleInfo.shownTimeFrom, 0, 0,0);\n\t\t\t\t\t\t\tfromPos = this.getPosByDate(toDate);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn fromPos;\n\t}\n\n\ttransit(params = {})\n\t{\n\t\tlet\n\t\t\tfromX = params.fromX || parseInt(this.DOM.wrap.style.left),\n\t\t\ttoX = Selector.roundPos(params.toX || fromX),\n\t\t\ttriggerChangeEvents = params.triggerChangeEvents !== false,\n\t\t\tfocus = !!params.focus,\n\t\t\twidth = parseInt(this.DOM.wrap.offsetWidth);\n\n\t\t// triggerChangeEvents - it means that selector transition (animation caused from mouse ebents)\n\t\tif (toX > (fromX + width) && triggerChangeEvents)\n\t\t{\n\t\t\ttoX -= width;\n\t\t}\n\n\t\tif (fromX !== toX)\n\t\t{\n\t\t\tif (this.animation)\n\t\t\t{\n\t\t\t\tthis.animation.stop();\n\t\t\t}\n\n\t\t\tthis.animation = new BX.easing({\n\t\t\t\tduration: 300,\n\t\t\t\tstart: {left: fromX},\n\t\t\t\tfinish: {left: toX},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {this.DOM.wrap.style.left = state.left + 'px'},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tthis.animation = null;\n\t\t\t\t\tlet\n\t\t\t\t\t\tfromPos = parseInt(this.DOM.wrap.style.left),\n\t\t\t\t\t\tcheckedPos = this.checkPosition(fromPos);\n\n\t\t\t\t\tif (checkedPos !== fromPos)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.wrap.style.left = checkedPos + 'px';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (triggerChangeEvents)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setValue(checkedPos);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (focus)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.focus(true, 300);\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.show(\n\t\t\t\t\t\t\tthis.currentDateFrom,\n\t\t\t\t\t\t\tthis.currentDateTo,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tanimation: false,\n\t\t\t\t\t\t\t\tfocus: focus,\n\t\t\t\t\t\t\t\talignCenter: false\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t}, 200);\n\n\t\t\t\t\tthis.checkStatus(checkedPos);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.animation.animate();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (triggerChangeEvents)\n\t\t\t{\n\t\t\t\tthis.setValue();\n\t\t\t}\n\n\t\t\tif (focus === true)\n\t\t\t{\n\t\t\t\tthis.focus(true, 300);\n\t\t\t}\n\n\t\t\tthis.checkStatus();\n\t\t}\n\t}\n\n\tshowTitle(params = {})\n\t{\n\t\tlet\n\t\t\tfromPos = params.fromPos,\n\t\t\ttoPos = params.toPos,\n\t\t\tselectorTitle = params.selectorTitle || this.getTitleNode(),\n\t\t\tselector = params.selector || this.DOM.wrap,\n\t\t\ttimelineWidth = this.getTimelineWidth(),\n\t\t\tfromDate, toDate;\n\n\t\tif (fromPos && toPos)\n\t\t{\n\t\t\tif (toPos > timelineWidth)\n\t\t\t{\n\t\t\t\tfromPos = timelineWidth - parseInt(selector.style.width);\n\t\t\t\ttoPos = timelineWidth;\n\t\t\t}\n\n\t\t\tfromDate = this.getDateByPos(fromPos);\n\t\t\ttoDate = this.getDateByPos(toPos, true);\n\t\t\tif (fromDate && toDate)\n\t\t\t{\n\t\t\t\tif (this.fullDayMode)\n\t\t\t\t{\n\t\t\t\t\tif (Math.abs(toDate.getTime() - fromDate.getTime() - Util.getDayLength()) < 1000)\n\t\t\t\t\t{\n\t\t\t\t\t\tselectorTitle.innerHTML = BX.date.format('d F, D', fromDate.getTime() / 1000);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tselectorTitle.innerHTML =\n\t\t\t\t\t\t\tBX.date.format('d F', fromDate.getTime() / 1000)\n\t\t\t\t\t\t\t+ ' - '\n\t\t\t\t\t\t\t+ BX.date.format('d F', toDate.getTime() / 1000);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tselectorTitle.removeAttribute('style');\n\t\t\t\t\tselectorTitle.innerHTML = Util.formatTime(fromDate) + ' - ' + Util.formatTime(toDate);\n\t\t\t\t}\n\n\t\t\t\tif (this.selectMode && this.lastTouchedEntry)\n\t\t\t\t{\n\t\t\t\t\tlet\n\t\t\t\t\t\tentriesListWidth = this.compactMode ? 0 : this.entriesListWidth,\n\t\t\t\t\t\tselectorTitleLeft = parseInt(selector.style.left) - this.DOM.timelineWrap.scrollLeft + entriesListWidth + parseInt(selector.style.width) / 2,\n\t\t\t\t\t\tselectorTitleTop = parseInt(this.timelineDataCont.offsetTop) + parseInt(this.lastTouchedEntry.style.top) - 12;\n\n\t\t\t\t\tselectorTitle.style.top = selectorTitleTop + 'px';\n\t\t\t\t\tselectorTitle.style.left = selectorTitleLeft + 'px';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tselector.appendChild(selectorTitle);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (selectorTitle === this.selectorTitle)\n\t\t{\n\t\t\tif (selectorTitle.style.display === 'none' || this.selectorHideTimeout)\n\t\t\t{\n\t\t\t\tthis.selectorHideTimeout = clearTimeout(this.selectorHideTimeout);\n\t\t\t\t// Opacity animation\n\t\t\t\tthis.selectorTitle.style.display = '';\n\t\t\t\tthis.selectorTitle.style.opacity = 0;\n\t\t\t\tnew BX.easing({\n\t\t\t\t\tduration: 400,\n\t\t\t\t\tstart: {opacity: 0},\n\t\t\t\t\tfinish: {opacity: 100},\n\t\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quad),\n\t\t\t\t\tstep: (state)=>{this.selectorTitle.style.opacity = state.opacity / 100;},\n\t\t\t\t\tcomplete: ()=>{this.selectorTitle.removeAttribute('style');}\n\t\t\t\t}).animate();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectorTitle.removeAttribute('style');\n\t\t}\n\t}\n\n\thideTitle(params = {})\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t\tparams = {};\n\n\t\tlet\n\t\t\ttimeoutName = params.selectorIndex === undefined ? 'selectorHideTimeout' : 'selectorHideTimeout_' + params.selectorIndex,\n\t\t\tselectorTitle = params.selectorTitle || this.getTitleNode();\n\n\t\tif (this[timeoutName])\n\t\t\tthis[timeoutName] = clearTimeout(this[timeoutName]);\n\n\t\tif (params.timeout !== false)\n\t\t{\n\t\t\tthis[timeoutName] = setTimeout(() => {\n\t\t\t\tparams.timeout = false;\n\t\t\t\tthis.hideTitle(params);\n\t\t\t}, 700);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Opacity animation\n\t\t\tselectorTitle.style.display = '';\n\t\t\tselectorTitle.style.opacity = 1;\n\t\t\tnew BX.easing({\n\t\t\t\tduration: 400,\n\t\t\t\tstart: {opacity: 100},\n\t\t\t\tfinish: {opacity: 0},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quad),\n\t\t\t\tstep: (state) => {selectorTitle.style.opacity = state.opacity / 100;},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tselectorTitle.removeAttribute('style');\n\t\t\t\t\tselectorTitle.style.display = 'none';\n\t\t\t\t}\n\t\t\t}).animate();\n\t\t}\n\t}\n\n\tstatic roundPos(x)\n\t{\n\t\treturn Math.round(parseFloat(x));\n\t}\n\n\tfocus(animation = true, timeout = 300, alignCenter)\n\t{\n\t\talignCenter = alignCenter === true;\n\n\n\n\t\tif (this.focusTimeout)\n\t\t{\n\t\t\tthis.focusTimeout = !!clearTimeout(this.focusTimeout);\n\t\t}\n\n\t\tif (this.useAnimation === false)\n\t\t{\n\t\t\tanimation = false;\n\t\t}\n\n\t\tif (timeout)\n\t\t{\n\t\t\tthis.focusTimeout = setTimeout(() => {this.focus(animation, false, alignCenter);}, timeout);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst\n\t\t\t\tscreenDelta = 10,\n\t\t\t\tselectorLeft = parseInt(this.DOM.wrap.style.left),\n\t\t\t\tselectorWidth = parseInt(this.DOM.wrap.style.width),\n\t\t\t\tviewWidth = parseInt(this.DOM.timelineWrap.offsetWidth),\n\t\t\t\tviewLeft = parseInt(this.DOM.timelineWrap.scrollLeft),\n\t\t\t\tviewRight = viewLeft + viewWidth;\n\n\t\t\tlet newScrollLeft = viewLeft;\n\n\t\t\tif (selectorLeft < viewLeft + screenDelta\n\t\t\t\t|| selectorLeft > viewRight - screenDelta\n\t\t\t\t|| alignCenter\n\t\t\t)\n\t\t\t{\n\t\t\t\t// Selector is smaller than view - we puting it in the middle of the view\n\t\t\t\tif (selectorWidth <= viewWidth)\n\t\t\t\t{\n\t\t\t\t\tnewScrollLeft = Math.max(Math.round(selectorLeft - ((viewWidth - selectorWidth) / 2 )), screenDelta);\n\n\t\t\t\t}\n\t\t\t\telse // Selector is wider, so we adjust by left side\n\t\t\t\t{\n\t\t\t\t\tnewScrollLeft = Math.max(Math.round(selectorLeft - screenDelta), screenDelta);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (newScrollLeft !== viewLeft)\n\t\t\t{\n\t\t\t\tif (animation === false)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.timelineWrap.scrollLeft = newScrollLeft;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tnew BX.easing({\n\t\t\t\t\t\tduration: 300,\n\t\t\t\t\t\tstart: {scrollLeft: this.DOM.timelineWrap.scrollLeft},\n\t\t\t\t\t\tfinish: {scrollLeft: newScrollLeft},\n\t\t\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quad),\n\t\t\t\t\t\tstep: (state)=>{this.DOM.timelineWrap.scrollLeft = state.scrollLeft;},\n\t\t\t\t\t\tcomplete: ()=>{}\n\t\t\t\t\t}).animate();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDuration()\n\t{\n\t\tlet duration = Math.round((this.currentDateTo - this.currentDateFrom) / 1000) * 1000;\n\n\t\tif (this.fullDayMode)\n\t\t{\n\t\t\tduration += Util.getDayLength();\n\t\t}\n\n\t\treturn duration;\n\t}\n\n\tgetDateFrom()\n\t{\n\t\treturn this.currentDateFrom;\n\t}\n\n\tgetDateTo()\n\t{\n\t\treturn this.currentDateTo;\n\t}\n}","// @flow\nimport {Runtime, Type, Event, Loc, Dom, Tag} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Selector} from './selector.js';\nimport {PopupWindowManager} from \"main.popup\";\n\nexport class Planner extends EventEmitter\n{\n\tDOM = {};\n\tconfig = {};\n\tentryStatusMap = {\n\t\th : 'user-status-h',\n\t\ty : 'user-status-y',\n\t\tq : 'user-status-q',\n\t\tn : 'user-status-n'\n\t};\n\tscaleTypes = ['15min','30min','1hour', '2hour', '1day'];\n\tsavedScaleType = null;\n\tSCALE_OFFSET_BEFORE = 3;  // in days\n\tSCALE_OFFSET_AFTER = 10;  // in days\n\tEXPAND_OFFSET = 3; // in days\n\tEXPAND_DELAY = 2000; // ms\n\tREBUILD_DELAY = 100;\n\tmaxTimelineSize =  20;\n\tMIN_ENTRY_ROWS =  3;\n\tMAX_ENTRY_ROWS = 300;\n\twidth = 700;\n\theight = 84;\n\tminWidth = 700;\n\tminHeight = 84;\n\tworkTime = [9, 18];\n\tscrollStep = 10;\n\tshown = false;\n\tbuilt = false;\n\tshownScaleTimeFrom = 24;\n\tshownScaleTimeTo = 0;\n\ttimelineCellWidthOrig = false;\n\tproposeTimeLimit = 60; // in days\n\texpandTimelineDelay = 600;\n\tlimitScaleSizeMode = false;\n\tuseAnimation = true;\n\tcheckTimeCache = {};\n\n\tconstructor(params = {}, initialUpdateParams = null)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Planner');\n\t\tthis.config = params;\n\t\tthis.id = params.id;\n\t\tthis.userId = params.userId || Loc.getMessage('USER_ID');\n\t\tthis.DOM.wrap = params.wrap;\n\t\tthis.SCALE_TIME_FORMAT = BX.isAmPmMode() ? 'g a' : 'G';\n\t\tthis.entriesIndex = new Map();\n\n\t\tthis.setConfig(params);\n\t\t// this.SetLoadedDataLimits(this.scaleDateFrom, this.scaleDateTo);\n\n\t\t// BX.addCustomEvent('OnCalendarPlannerDoUpdate', BX.proxy(this.DoUpdate, this));\n\t\t// BX.addCustomEvent('OnCalendarPlannerDoExpand', BX.proxy(this.DoExpand, this));\n\t\t// BX.addCustomEvent('OnCalendarPlannerDoResize', BX.proxy(this.DoResize, this));\n\t\t// BX.addCustomEvent('OnCalendarPlannerDoSetConfig', BX.proxy(this.DoSetConfig, this));\n\t\t// BX.addCustomEvent('OnCalendarPlannerDoUninstall', BX.proxy(this.DoUninstall, this));\n\n\t\t//BX.addCustomEvent('OnCalendarPlannerDoProposeTime', BX.proxy(this.DoProposeTime, this));\n\t\t// if (initialUpdateParams)\n\t\t// {\n\t\t// \tinitialUpdateParams.plannerId = this.id;\n\t\t// \tif (initialUpdateParams.selector)\n\t\t// \t{\n\t\t// \t\tif (initialUpdateParams.selector.from && !initialUpdateParams.selector.from.getTime)\n\t\t// \t\t{\n\t\t// \t\t\tinitialUpdateParams.selector.from = Util.parseDate(initialUpdateParams.selector.from);\n\t\t// \t\t}\n\t\t// \t\tif (initialUpdateParams.selector.to && !initialUpdateParams.selector.to.getTime)\n\t\t// \t\t{\n\t\t// \t\t\tinitialUpdateParams.selector.to = Util.parseDate(initialUpdateParams.selector.to);\n\t\t// \t\t}\n\t\t// \t}\n\t\t// \tthis.useAnimation = false;\n\t\t// \tthis.DoUpdate(initialUpdateParams);\n\t\t// \tsetTimeout(BX.delegate(function(){this.useAnimation = true;}, this), 2000);\n\t\t// }\n\t}\n\n\tshow(options = {animation: false})\n\t{\n\t\t// if (!this.compactMode || this.useAnimation === false)\n\t\t// {\n\t\tlet animation = false;\n\t\t//}\n\n\t\tif (this.hideAnimation)\n\t\t{\n\t\t\tthis.hideAnimation.stop();\n\t\t\tthis.hideAnimation = null;\n\t\t}\n\n\n\t\tif (!this.built)\n\t\t{\n\t\t\tthis.build();\n\t\t\tthis.bindEventHandlers();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.resizePlannerWidth(this.width);\n\t\t}\n\n\t\t//this.HideSelector();\n\t\tthis.buildTimeline();\n\n\t\tif (this.adjustWidth)\n\t\t{\n\t\t\tthis.resizePlannerWidth(this.DOM.timelineInnerWrap.offsetWidth);\n\t\t}\n\n\t\tthis.DOM.wrap.style.display = '';\n\n\t\tif (this.readonly)\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-readonly');\n\t\telse\n\t\t\tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-readonly');\n\n\t\tif (this.compactMode)\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-compact');\n\t\telse\n\t\t\tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-compact');\n\n\t\tthis.DOM.entriesOuterWrap.style.display = this.compactMode ? 'none' : '';\n\n\t\tif (animation)\n\t\t{\n\t\t\tif (this.showAnimation)\n\t\t\t{\n\t\t\t\tthis.showAnimation.stop();\n\t\t\t}\n\t\t\tthis.showAnimation = new BX.easing({\n\t\t\t\tduration: 300,\n\t\t\t\tstart: {height: 0},\n\t\t\t\tfinish: {height: this.height},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {this.DOM.wrap.style.height = state.height + 'px';},\n\t\t\t\tcomplete: () => {\n\t\t\t\t\tif (parseInt(this.DOM.wrap.style.height) < this.height)\n\t\t\t\t\t\tthis.DOM.wrap.style.height = this.height + 'px';\n\t\t\t\t\tthis.showAnimation = null;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.showAnimation.animate();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (parseInt(this.DOM.wrap.style.height) < this.height)\n\t\t\t{\n\t\t\t\tthis.DOM.wrap.style.height = this.height + 'px';\n\t\t\t}\n\t\t\tthis.adjustHeight();\n\t\t}\n\n\t\tthis.shown = true;\n\t}\n\n\t// Hide(animation)\n\t// {\n\t// \tif (this.showAnimation)\n\t// \t{\n\t// \t\tthis.showAnimation.stop();\n\t// \t\tthis.showAnimation = null;\n\t// \t}\n\t//\n\t// \tif (this.shown)\n\t// \t{\n\t// \t\tthis.shown = false;\n\t//\n\t// \t\tif (animation)\n\t// \t\t{\n\t// \t\t\tif (this.hideAnimation)\n\t// \t\t\t{\n\t// \t\t\t\tthis.hideAnimation.stop();\n\t// \t\t\t}\n\t// \t\t\tthis.hideAnimation = new BX.easing({\n\t// \t\t\t\tduration: 300,\n\t// \t\t\t\tstart: {height: this.height},\n\t// \t\t\t\tfinish: {height: 0},\n\t// \t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t// \t\t\t\tstep: (state)=>{this.DOM.wrap.style.height = state.height + 'px';},\n\t// \t\t\t\tcomplete: ()=>{\n\t// \t\t\t\t\tthis.hideAnimation = null;\n\t// \t\t\t\t\tthis.Hide(false);\n\t// \t\t\t\t}\n\t// \t\t\t});\n\t// \t\t\tthis.hideAnimation.animate();\n\t// \t\t}\n\t// \t\telse\n\t// \t\t{\n\t// \t\t\tthis.DOM.wrap.style.display = 'none';\n\t// \t\t\tDom.clean(this.DOM.timelineScaleWrap);\n\t// \t\t\tthis.DOM.timelineInnerWrap.removeAttribute('style');\n\t// \t\t\tthis.DOM.wrap.removeAttribute('style');\n\t// \t\t\tthis.DOM.mainWrap.removeAttribute('style');\n\t// \t\t\tthis.DOM.entriesOuterWrap.removeAttribute('style');\n\t// \t\t}\n\t// \t}\n\t// }\n\n\tsetConfig(params)\n\t{\n\t\tthis.setScaleType(params.scaleType);\n\n\t\t// showTimelineDayTitle\n\t\tif (params.showTimelineDayTitle !== undefined)\n\t\t\tthis.showTimelineDayTitle = !!params.showTimelineDayTitle;\n\t\telse if(this.showTimelineDayTitle === undefined)\n\t\t\tthis.showTimelineDayTitle = true;\n\n\t\t// compactMode\n\t\tif (params.compactMode !== undefined)\n\t\t\tthis.compactMode = !!params.compactMode;\n\t\telse if (this.compactMode === undefined)\n\t\t\tthis.compactMode = false;\n\n\t\t// readonly\n\t\tif (params.readonly !== undefined)\n\t\t\tthis.readonly = !!params.readonly;\n\t\telse if (this.readonly === undefined)\n\t\t\tthis.readonly = false;\n\n\t\tif (this.compactMode)\n\t\t{\n\t\t\tlet compactHeight = 50;\n\t\t\tif (this.showTimelineDayTitle && !this.isOneDayScale())\n\t\t\t\tcompactHeight += 20;\n\t\t\tthis.height = this.minHeight = compactHeight;\n\t\t}\n\n\t\t// Select mode\n\t\tif (params.selectEntriesMode !== undefined)\n\t\t\tthis.selectMode = !!params.selectEntriesMode;\n\t\telse if (this.selectMode === undefined)\n\t\t\tthis.selectMode = false;\n\n\t\tif (Type.isInteger(params.SCALE_OFFSET_BEFORE))\n\t\t{\n\t\t\tthis.SCALE_OFFSET_BEFORE = parseInt(params.SCALE_OFFSET_BEFORE);\n\t\t}\n\t\tif (Type.isInteger(params.SCALE_OFFSET_AFTER))\n\t\t{\n\t\t\tthis.SCALE_OFFSET_AFTER = parseInt(params.SCALE_OFFSET_AFTER);\n\t\t}\n\t\tif (Type.isInteger(params.maxTimelineSize))\n\t\t{\n\t\t\tthis.maxTimelineSize = parseInt(params.maxTimelineSize);\n\t\t}\n\t\tif (Type.isInteger(params.minEntryRows))\n\t\t{\n\t\t\tthis.MIN_ENTRY_ROWS = parseInt(params.minEntryRows);\n\t\t}\n\t\tif (Type.isInteger(params.maxEntryRows))\n\t\t{\n\t\t\tthis.MAX_ENTRY_ROWS = parseInt(params.maxEntryRows);\n\t\t}\n\n\t\tif (Type.isInteger(params.width))\n\t\t{\n\t\t\tthis.width = parseInt(params.width);\n\t\t}\n\t\tif (Type.isInteger(params.height))\n\t\t{\n\t\t\tthis.height = parseInt(params.height);\n\t\t}\n\t\tif (Type.isInteger(params.minWidth))\n\t\t{\n\t\t\tthis.minWidth = parseInt(params.minWidth);\n\t\t}\n\t\tif (Type.isInteger(params.minHeight))\n\t\t{\n\t\t\tthis.minHeight = parseInt(params.minHeight);\n\t\t}\n\t\tthis.width = Math.max(this.minWidth, this.width);\n\t\tthis.height = Math.max(this.minHeight, this.height);\n\n\t\tif (Type.isArray(params.workTime))\n\t\t{\n\t\t\tthis.workTime = params.workTime;\n\t\t}\n\t\tthis.extendScaleTime(this.workTime[0], this.workTime[1]);\n\n\t\tthis.weekHolidays = params.weekHolidays || this.weekHolidays || [];\n\t\tthis.yearHolidays = params.yearHolidays || this.yearHolidays || [];\n\t\tthis.accuracy = params.accuracy || this.accuracy || 300; // 5 min\n\t\tthis.clickSelectorScaleAccuracy = params.clickSelectorScaleAccuracy || this.accuracy; // 5 min\n\t\tthis.selectorAccuracy = parseInt(params.selectorAccuracy) || this.selectorAccuracy || 300; // 5 min\n\t\tthis.entriesListWidth = parseInt(params.entriesListWidth) || this.entriesListWidth || 200;\n\t\tthis.timelineCellWidth = params.timelineCellWidth || this.timelineCellWidth || 40;\n\n\t\tthis.showEntiesHeader = params.showEntiesHeader === undefined ? true : !!params.showEntiesHeader;\n\t\tthis.showEntryName = params.showEntryName === undefined ? true : !!params.showEntryName;\n\n\t\tif (this.isOneDayScale() && this.timelineCellWidth < 100)\n\t\t{\n\t\t\tthis.timelineCellWidthOrig = this.timelineCellWidth;\n\t\t\tthis.timelineCellWidth = 100;\n\t\t}\n\t\telse if(this.timelineCellWidthOrig && !this.isOneDayScale())\n\t\t{\n\t\t\tthis.timelineCellWidth = this.timelineCellWidthOrig;\n\t\t\tthis.timelineCellWidthOrig = false;\n\t\t}\n\n\t\tif (this.allowAdjustCellWidth === undefined || params.allowAdjustCellWidth !== undefined)\n\t\t{\n\t\t\tthis.allowAdjustCellWidth = this.readonly\n\t\t\t\t&& this.compactMode\n\t\t\t\t&& params.allowAdjustCellWidth !== false;\n\t\t}\n\n\t\tthis.adjustCellWidth();\n\n\t\t// Scale params\n\t\tthis.setScaleLimits(params.scaleDateFrom, params.scaleDateTo);\n\t}\n\n\tsetScaleLimits(scaleDateFrom, scaleDateTo)\n\t{\n\t\tif (scaleDateFrom !== undefined)\n\t\t{\n\t\t\tthis.scaleDateFrom = Type.isDate(scaleDateFrom) ? scaleDateFrom : Util.parseDate(scaleDateFrom);\n\t\t}\n\n\t\tif (!Type.isDate(this.scaleDateFrom))\n\t\t{\n\t\t\tif (this.compactMode && this.readonly)\n\t\t\t{\n\t\t\t\tthis.scaleDateFrom = new Date();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.scaleDateFrom = new Date(new Date().getTime() - Util.getDayLength() * this.SCALE_OFFSET_BEFORE);\n\t\t\t}\n\t\t}\n\t\tthis.scaleDateFrom.setHours(this.isOneDayScale() ? 0 : this.shownScaleTimeFrom, 0, 0, 0);\n\n\t\tif (scaleDateTo !== undefined)\n\t\t{\n\t\t\tthis.scaleDateTo = BX.type.isString(scaleDateTo) ? Util.parseDate(scaleDateTo) : scaleDateTo;\n\t\t}\n\n\t\tif (!Type.isDate(this.scaleDateTo))\n\t\t{\n\t\t\tif (this.compactMode && this.readonly)\n\t\t\t{\n\t\t\t\tthis.scaleDateTo = new Date();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.scaleDateTo = new Date(new Date().getTime() + Util.getDayLength() * this.SCALE_OFFSET_AFTER);\n\t\t\t}\n\t\t}\n\t\tthis.scaleDateTo.setHours(this.isOneDayScale() ? 0 : this.shownScaleTimeTo, 0, 0, 0);\n\t}\n\n\tSetLoadedDataLimits(from, to)\n\t{\n\t\tif (from)\n\t\t\tthis.loadedDataFrom = from.getTime ? from : Util.parseDate(from);\n\t\tif (to)\n\t\t\tthis.loadedDataTo = to.getTime ? to : Util.parseDate(to);\n\t}\n\n\textendScaleTime(fromTime, toTime)\n\t{\n\t\tif (fromTime !== false && !isNaN(parseInt(fromTime)))\n\t\t{\n\t\t\tthis.shownScaleTimeFrom = Math.min(parseInt(fromTime), this.shownScaleTimeFrom, 23);\n\t\t\tthis.shownScaleTimeFrom = Math.max(this.shownScaleTimeFrom, 0);\n\n\t\t\tif (this.scaleDateFrom)\n\t\t\t{\n\t\t\t\tthis.scaleDateFrom.setHours(this.shownScaleTimeFrom, 0,0,0);\n\t\t\t}\n\t\t}\n\n\t\tif (toTime !== false && !isNaN(parseInt(toTime)))\n\t\t{\n\t\t\tthis.shownScaleTimeTo = Math.max(parseInt(toTime), this.shownScaleTimeTo, 1);\n\t\t\tthis.shownScaleTimeTo = Math.min(this.shownScaleTimeTo, 24);\n\n\t\t\tif (this.scaleDateTo)\n\t\t\t{\n\t\t\t\tthis.scaleDateTo.setHours(this.shownScaleTimeTo, 0,0,0);\n\t\t\t}\n\t\t}\n\n\t\tthis.rebuildDebounce();\n\n\t\t//this.checkSelectorPosition = this.shownScaleTimeFrom !== 0 || this.shownScaleTimeTo !== 24;\n\t}\n\n\tadjustCellWidth()\n\t{\n\t\tif (this.allowAdjustCellWidth)\n\t\t{\n\t\t\tthis.timelineCellWidth = Math.round(this.width / ((this.shownScaleTimeTo - this.shownScaleTimeFrom) * 3600 / this.scaleSize));\n\t\t}\n\t}\n\n\tbuild()\n\t{\n\t\tif (!Type.isDomNode(this.DOM.wrap))\n\t\t{\n\t\t\tthrow new TypeError(\"Wrap is not DOM node\");\n\t\t}\n\n\t\tthis.DOM.wrap.style.width = this.width + 'px';\n\n\t\t// Left part - list of users and other resourses\n\t\tlet entriesListWidth = this.compactMode ? 0 : this.entriesListWidth;\n\n\t\t// Timeline with accessibility information\n\t\tthis.DOM.mainWrap = this.DOM.wrap.appendChild(BX.create(\"DIV\", {\n\t\t\tprops: {className: 'calendar-planner-main-container calendar-planner-main-container-resource'}, style: {\n\t\t\t\tminHeight: this.minHeight + 'px',\n\t\t\t\theight: this.height + 'px',\n\t\t\t\twidth: this.width + 'px'\n\t\t\t}\n\t\t}));\n\n\t\tif (!this.showEntryName)\n\t\t{\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-entry-icons-only');\n\t\t}\n\n\t\tif (this.readonly)\n\t\t{\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-readonly');\n\t\t}\n\n\t\tthis.DOM.entriesOuterWrap = this.DOM.mainWrap.appendChild(BX.create(\"DIV\", {\n\t\t\tprops: {className: 'calendar-planner-user-container'},\n\t\t\tstyle: {\n\t\t\t\twidth: entriesListWidth + 'px',\n\t\t\t\theight: this.height + 'px'\n\t\t\t}\n\t\t}));\n\n\t\tUtil.preventSelection(this.DOM.entriesOuterWrap);\n\t\tif (this.compactMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-compact');\n\t\t\tthis.DOM.entriesOuterWrap.style.display = 'none';\n\t\t}\n\n\t\tif (this.isOneDayScale())\n\t\t{\n\t\t\tDom.addClass(this.DOM.entriesOuterWrap, 'calendar-planner-no-daytitle');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.entriesOuterWrap, 'calendar-planner-no-daytitle');\n\t\t}\n\n\t\tif (this.showEntiesHeader !== false)\n\t\t{\n\t\t\tthis.DOM.entrieListHeader = this.DOM.entriesOuterWrap.appendChild(\n\t\t\t\tBX.create(\"DIV\", {props: {className: 'calendar-planner-header'}})\n\t\t\t).appendChild(\n\t\t\t\tBX.create(\"DIV\", {props: {className: 'calendar-planner-general-info'}})\n\t\t\t).appendChild(\n\t\t\t\tBX.create(\"DIV\", {props: {className: 'calendar-planner-users-header'}})\n\t\t\t);\n\n\t\t\tthis.entriesListTitleCounter = this.DOM.entrieListHeader.appendChild(BX.create(\"span\", {\n\t\t\t\tprops: {className: 'calendar-planner-users-item'},\n\t\t\t\ttext: Loc.getMessage('EC_PL_ATTENDEES_TITLE') + ' '\n\t\t\t})).appendChild(BX.create(\"span\"));\n\t\t}\n\n\t\tthis.DOM.entrieListWrap = this.DOM.entriesOuterWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-user-container-inner'}}));\n\n\t\t// Fixed cont with specific width and height\n\t\tthis.DOM.timelineFixedWrap = this.DOM.mainWrap.appendChild(BX.create(\"DIV\", {\n\t\t\tprops: {className: 'calendar-planner-timeline-wrapper'}, style: {\n\t\t\t\theight: this.height + 'px'\n\t\t\t}\n\t\t}));\n\n\t\t// Movable cont - used to move scale and data containers easy and at the same time\n\t\tthis.DOM.timelineInnerWrap = this.DOM.timelineFixedWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-timeline-inner-wrapper'}}));\n\t\tthis.DOM.timelineInnerWrap.setAttribute('data-bx-planner-meta', 'timeline');\n\n\t\t// Scale container\n\t\tthis.DOM.timelineScaleWrap = this.DOM.timelineInnerWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-time'}}));\n\t\tUtil.preventSelection(this.DOM.timelineScaleWrap);\n\n\t\t// Accessibility container\n\t\tthis.DOM.timelineDataWrap = this.DOM.timelineInnerWrap.appendChild(BX.create(\"DIV\", {\n\t\t\tprops: {className: 'calendar-planner-timeline-container'},\n\t\t\tstyle: {\n\t\t\t\theight: (this.height) + 'px'\n\t\t\t}\n\t\t}));\n\t\t// Container with accessibility entries elements\n\t\tthis.DOM.accessibilityWrap = this.DOM.timelineDataWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-acc-wrap'}}));\n\n\t\t// Selector\n\t\tthis.selector = new Selector({\n\t\t\tselectMode: this.selectMode,\n\t\t\ttimelineWrap: this.DOM.timelineFixedWrap,\n\t\t\tgetPosByDate: this.getPosByDate.bind(this),\n\t\t\tgetDateByPos: this.getDateByPos.bind(this),\n\t\t\tgetPosDateMap: ()=>{return this.posDateMap;},\n\t\t\tuseAnimation: this.useAnimation,\n\t\t\tgetScaleInfo: ()=>{return {\n\t\t\t\tscale: this.scaleType,\n\t\t\t\tshownTimeFrom: this.shownScaleTimeFrom,\n\t\t\t\tshownTimeTo: this.shownScaleTimeTo,\n\t\t\t}},\n\t\t\tgetTimelineWidth: ()=>{return parseInt(this.DOM.timelineInnerWrap.style.width)}\n\t\t});\n\t\tthis.DOM.timelineDataWrap.appendChild(this.selector.getWrap());\n\t\tthis.DOM.mainWrap.appendChild(this.selector.getTitleNode());\n\t\tthis.selector.subscribe('onChange', this.handleSelectorChanges.bind(this));\n\t\tthis.selector.subscribe('doCheckStatus', this.doCheckSelectorStatus.bind(this));\n\n\t\tif (this.selectMode)\n\t\t{\n\t\t\tthis.selectedEntriesWrap = this.DOM.mainWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-timeline-select-entries-wrap'}}));\n\n\t\t\tthis.hoverRow = this.DOM.mainWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tprops: {className: 'calendar-planner-timeline-hover-row'},\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: 0,\n\t\t\t\t\twidth: parseInt(this.DOM.mainWrap.offsetWidth) + 'px'\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tEvent.bind(document, 'mousemove', this.mouseMoveHandler.bind(this));\n\t\t}\n\n\t\tif (!this.compactMode)\n\t\t{\n\t\t\tthis.DOM.settingsButton = this.DOM.mainWrap.appendChild(Tag.render`<div class=\"calendar-planner-settings-icon-container\" title=\"${Loc.getMessage('EC_PL_SETTINGS_SCALE')}\"><span class=\"calendar-planner-settings-title\">${Loc.getMessage('EC_PL_SETTINGS_SCALE')}</span><span class=\"calendar-planner-settings-icon\"></span></div>`);\n\t\t\tEvent.bind(this.DOM.settingsButton, 'click', this.showSettingsPopup.bind(this));\n\t\t}\n\n\t\tthis.built = true;\n\t}\n\n\tbuildTimeline(clearCache)\n\t{\n\t\tif (this.lastTimelineKey !== this.getTimelineShownKey() || clearCache === true)\n\t\t{\n\t\t\tif (this.DOM.timelineScaleWrap)\n\t\t\t{\n\t\t\t\tDom.clean(this.DOM.timelineScaleWrap);\n\t\t\t}\n\n\t\t\tthis.scaleData = this.getScaleData();\n\n\t\t\tlet\n\t\t\t\touterDayCont,\n\t\t\t\tdayTitle,\n\t\t\t\tcont = this.DOM.timelineScaleWrap;\n\n\t\t\tfor (let i = 0; i < this.scaleData.length; i++)\n\t\t\t{\n\t\t\t\tif (this.showTimelineDayTitle && !this.isOneDayScale())\n\t\t\t\t{\n\t\t\t\t\tif (this.scaleDayTitles[this.scaleData[i].daystamp])\n\t\t\t\t\t{\n\t\t\t\t\t\tcont = this.scaleDayTitles[this.scaleData[i].daystamp];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\touterDayCont = this.DOM.timelineScaleWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-time-day-outer'}}));\n\n\t\t\t\t\t\tdayTitle = outerDayCont.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\t\t\tprops: {className: 'calendar-planner-time-day-title'},\n\t\t\t\t\t\t\thtml: '<span>' + BX.date.format('d F, l', this.scaleData[i].timestamp / 1000) + '</span>' + '<div class=\"calendar-planner-time-day-border\"></div>'\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tcont = outerDayCont.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\t\t\tprops: {className: 'calendar-planner-time-day'}\n\t\t\t\t\t\t}));\n\n\t\t\t\t\t\tthis.scaleDayTitles[this.scaleData[i].daystamp] = cont;\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet className = 'calendar-planner-time-hour-item' + (this.scaleData[i].dayStart ? ' calendar-planner-day-start' : '');\n\n\t\t\t\tif ((this.scaleType === '15min' || this.scaleType === '30min') && this.scaleData[i].title !== '')\n\t\t\t\t{\n\t\t\t\t\tclassName += ' calendar-planner-time-hour-bold';\n\t\t\t\t}\n\n\t\t\t\tthis.scaleData[i].cell = cont.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {className: className}, style: {\n\t\t\t\t\t\twidth: this.timelineCellWidth + 'px', minWidth: this.timelineCellWidth + 'px'\n\t\t\t\t\t}, html: this.scaleData[i].title ? '<i>' + this.scaleData[i].title + '</i>' : ''\n\t\t\t\t}));\n\n\t\t\t\tif (!this.isOneDayScale() && this.scaleData[i + 1] && this.scaleData[i + 1].dayStart)\n\t\t\t\t{\n\t\t\t\t\tcont.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-timeline-border'}}));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet mapDatePosRes = this.mapDatePos();\n\t\t\t//this.datePosMap = mapDatePosRes.datePosMap;\n\t\t\tthis.posDateMap = mapDatePosRes.posDateMap;\n\n\t\t\tlet timelineOffset = this.DOM.timelineScaleWrap.offsetWidth;\n\t\t\tthis.DOM.timelineInnerWrap.style.width = timelineOffset + 'px';\n\t\t\tthis.DOM.entrieListWrap.style.top = (parseInt(this.DOM.timelineDataWrap.offsetTop) + 10) + 'px';\n\n\t\t\tthis.lastTimelineKey = this.getTimelineShownKey();\n\t\t\t//this.checkRebuildTimeout(timelineOffset);\n\t\t}\n\t}\n\n\tgetTimelineShownKey()\n\t{\n\t\treturn 'tm_' + this.scaleDateFrom.getTime() + '_' + this.scaleDateTo.getTime();\n\t}\n\n\tcheckRebuildTimeout(timelineOffset, timeout = 200)\n\t{\n\t\tlet _this = this;\n\n\t\tif (!this._checkRebuildTimeoutCount)\n\t\t{\n\t\t\tthis._checkRebuildTimeoutCount = 0;\n\t\t}\n\n\t\tif (this.rebuildTimeout)\n\t\t{\n\t\t\tthis.rebuildTimeout = !!clearTimeout(this.rebuildTimeout);\n\t\t}\n\n\t\tif (this._checkRebuildTimeoutCount <= 5)\n\t\t{\n\t\t\tthis._checkRebuildTimeoutCount++;\n\t\t\tthis.rebuildTimeout = setTimeout(() => {\n\t\t\t\tif (timelineOffset !== _this.DOM.timelineScaleWrap.offsetWidth)\n\t\t\t\t{\n\t\t\t\t\tif (this.rebuildTimeout)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.rebuildTimeout = !!clearTimeout(this.rebuildTimeout);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.rebuild();\n\t\t\t\t\tthis.FocusSelector(true, 200);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.checkRebuildTimeout(timelineOffset, timeout);\n\t\t\t\t}\n\t\t\t}, timeout);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdelete this._checkRebuildTimeoutCount;\n\t\t}\n\t}\n\n\trebuildDebounce(timeout = this.REBUILD_DELAY)\n\t{\n\t\tRuntime.debounce(this.rebuild, timeout, this)();\n\t}\n\n\trebuild(params = {})\n\t{\n\t\tthis.buildTimeline(true);\n\t\tthis.update(this.entries, this.accessibility);\n\t\tthis.adjustHeight();\n\t\tthis.resizePlannerWidth(this.width);\n\n\t\tif (params.updateSelector !== false)\n\t\t{\n\t\t\tthis.selector.update(params.selectorParams);\n\t\t}\n\t\tthis.clearCacheTime();\n\t}\n\n\tgetScaleData()\n\t{\n\t\tthis.scaleData = [];\n\t\tthis.scaleDayTitles = {};\n\n\t\tlet\n\t\t\tts, scaleFrom, scaleTo,\n\t\t\ttime, dayStamp, title,\n\t\t\tcurDayStamp = false,\n\t\t\ttimeFrom = this.isOneDayScale() ? 0 : this.shownScaleTimeFrom,\n\t\t\ttimeTo = this.isOneDayScale() ? 0 : this.shownScaleTimeTo;\n\n\t\tthis.scaleDateFrom.setHours(timeFrom, 0, 0, 0);\n\t\tthis.scaleDateTo.setHours(timeTo, 0, 0, 0);\n\t\tscaleFrom = this.scaleDateFrom.getTime();\n\t\tscaleTo = this.scaleDateTo.getTime();\n\n\t\tfor (ts = scaleFrom; ts < scaleTo; ts += this.scaleSize * 1000)\n\t\t{\n\t\t\ttime = parseFloat(BX.date.format('H.i', ts / 1000));\n\n\t\t\tif (this.isOneDayScale())\n\t\t\t\ttitle = BX.date.format('d F, D', ts / 1000);\n\t\t\telse\n\t\t\t\ttitle = BX.date.format('i', ts / 1000) === '00'\n\t\t\t\t\t? BX.date.format(this.SCALE_TIME_FORMAT, ts / 1000)\n\t\t\t\t\t: '';\n\n\t\t\tif (this.isOneDayScale() || (time >= timeFrom && time < timeTo))\n\t\t\t{\n\t\t\t\tdayStamp = BX.date.format('d.m.Y', ts / 1000);\n\t\t\t\tthis.scaleData.push({\n\t\t\t\t\tdaystamp: dayStamp,\n\t\t\t\t\ttimestamp: ts,\n\t\t\t\t\tvalue: ts,\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tdayStart: curDayStamp !== dayStamp\n\t\t\t\t});\n\t\t\t\tcurDayStamp = dayStamp;\n\t\t\t}\n\t\t}\n\n\t\treturn this.scaleData;\n\t}\n\n\tisOneDayScale()\n\t{\n\t\treturn this.scaleType === '1day';\n\t}\n\n\t/**\n\t * Updates data on scale of planner\n\t *\n\t * @params array array of parameters\n\t * @params[entries] - array of entries to display on scale\n\t * @params[accessibility] - object contains informaton about accessibility for entries\n\t * @return null\n\t */\n\t// UpdateData(params)\n\t// {\n\t// \tif (!params.accessibility)\n\t// \t{\n\t// \t\tparams.accessibility = {};\n\t// \t}\n\t//\n\t// \tthis.accessibility = params.accessibility;\n\t// \tthis.entries = params.entries;\n\t//\n\t// \tlet i, k, entry, acc, userId = this.userId;\n\t// \t// Compact mode\n\t// \tif (this.compactMode)\n\t// \t{\n\t// \t\tlet data = [];\n\t// \t\tfor (k in params.accessibility)\n\t// \t\t{\n\t// \t\t\tif (params.accessibility.hasOwnProperty(k) && params.accessibility[k] && params.accessibility[k].length > 0)\n\t// \t\t\t{\n\t// \t\t\t\tfor (i = 0; i < params.accessibility[k].length; i++)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tdata.push(Planner.prepareAccessibilityItem(params.accessibility[k][i]));\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t//\n\t// \t\t// Fuse access\n\t// \t\t//data = this.FuseAccessibility(data);\n\t// \t\tthis.compactRowWrap = this.DOM.accessibilityWrap.appendChild(BX.create(\"DIV\", {\n\t// \t\t\tprops: {className: 'calendar-planner-timeline-space'},\n\t// \t\t\tstyle: {}\n\t// \t\t}));\n\t//\n\t// \t\t// this.currentData = [data];\n\t// \t\t// for (i = 0; i < data.length; i++)\n\t// \t\t// {\n\t// \t\t// \tthis.addAccessibilityItem(data[i], this.compactRowWrap);\n\t// \t\t// }\n\t// \t}\n\t// \telse\n\t// \t{\n\t// \t\t// sort entries list by amount of accessibilities data\n\t// \t\t// Enties without accessibilitity data should be in the end of the array\n\t// \t\t// But first in the list will be meeting room\n\t// \t\t// And second (or first) will be owner-host of the event\n\t//\n\t// \t\tif (params.entries && params.entries.length)\n\t// \t\t{\n\t// \t\t\tparams.entries.sort(function(a, b)\n\t// \t\t\t{\n\t// \t\t\t\tif (b.status === 'h' || b.id == userId && a.status !== 'h')\n\t// \t\t\t\t{\n\t// \t\t\t\t\treturn 1;\n\t// \t\t\t\t}\n\t// \t\t\t\tif (a.status === 'h' || a.id == userId && b.status !== 'h')\n\t// \t\t\t\t{\n\t// \t\t\t\t\treturn  -1;\n\t// \t\t\t\t}\n\t// \t\t\t\treturn 0;\n\t// \t\t\t});\n\t//\n\t// \t\t\tif (this.selectedEntriesWrap)\n\t// \t\t\t{\n\t// \t\t\t\tDom.clean(this.selectedEntriesWrap);\n\t//\n\t// \t\t\t\tif (this.selector && this.selector.controlWrap)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tDom.clean(this.selector.controlWrap);\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t//\n\t// \t\t\tlet\n\t// \t\t\t\tcutData = [],\n\t// \t\t\t\tusersCount = 0,\n\t// \t\t\t\tcutAmount = 0,\n\t// \t\t\t\tdispDataCount = 0,\n\t// \t\t\t\tcutDataTitle = [];\n\t//\n\t// \t\t\tfor (i = 0; i < params.entries.length; i++)\n\t// \t\t\t{\n\t// \t\t\t\tentry = params.entries[i];\n\t// \t\t\t\tacc = params.accessibility[entry.id] || [];\n\t// \t\t\t\tentry.uid = this.getEntryUniqueId(entry);\n\t//\n\t// \t\t\t\tif (entry.type === 'user')\n\t// \t\t\t\t\tusersCount++;\n\t//\n\t// \t\t\t\tif (this.MIN_ENTRY_ROWS && (i < this.MIN_ENTRY_ROWS || params.entries.length === this.MIN_ENTRY_ROWS + 1))\n\t// \t\t\t\t{\n\t// \t\t\t\t\tdispDataCount++;\n\t// \t\t\t\t\tthis.displayEntryRow(entry, acc);\n\t// \t\t\t\t}\n\t// \t\t\t\telse\n\t// \t\t\t\t{\n\t// \t\t\t\t\tcutAmount++;\n\t// \t\t\t\t\tcutDataTitle.push(entry.name);\n\t// \t\t\t\t\tif (acc.length > 0)\n\t// \t\t\t\t\t{\n\t// \t\t\t\t\t\tfor (k = 0; k < acc.length; k++)\n\t// \t\t\t\t\t\t{\n\t// \t\t\t\t\t\t\tcutData.push(Planner.prepareAccessibilityItem(acc[k]));\n\t// \t\t\t\t\t\t}\n\t// \t\t\t\t\t}\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t//\n\t// \t\t\t// Update entries title count\n\t// \t\t\tif (this.entriesListTitleCounter)\n\t// \t\t\t{\n\t// \t\t\t\tthis.entriesListTitleCounter.innerHTML = usersCount > this.MAX_ENTRY_ROWS ? '(' + usersCount + ')' : '';\n\t// \t\t\t}\n\t//\n\t// \t\t\tif (cutAmount > 0)\n\t// \t\t\t{\n\t// \t\t\t\tif (dispDataCount === this.MAX_ENTRY_ROWS)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tthis.displayEntryRow({name: Loc.getMessage('EC_PL_ATTENDEES_LAST') + ' (' + cutAmount + ')', type: 'lastUsers', title: cutDataTitle.join(', ')}, cutData);\n\t// \t\t\t\t}\n\t// \t\t\t\telse\n\t// \t\t\t\t{\n\t// \t\t\t\t\tthis.displayEntryRow({name: Loc.getMessage('EC_PL_ATTENDEES_SHOW_MORE') + ' (' + cutAmount + ')', type: 'moreLink'}, cutData);\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// \tthis.adjustHeight();\n\t//\n\t// \tBX.onCustomEvent('OnCalendarPlannerUpdated', [this, {\n\t// \t\tplannerId: this.id,\n\t// \t\tentries: this.entries\n\t// \t}]);\n\t// }\n\n\tstatic prepareAccessibilityItem(entry)\n\t{\n\t\tif (!Type.isDate(entry.from))\n\t\t{\n\t\t\tentry.from = Util.parseDate(entry.dateFrom);\n\t\t}\n\n\t\tif (!Type.isDate(entry.to))\n\t\t{\n\t\t\tentry.to = Util.parseDate(entry.dateTo);\n\t\t}\n\n\t\tif (!Type.isDate(entry.from) || !Type.isDate(entry.to))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tentry.from.setSeconds(0,0);\n\t\tentry.fromTimestamp = entry.from.getTime();\n\n\t\tentry.to.setSeconds(0,0);\n\t\tentry.toTimestamp = entry.to.getTime();\n\n\t\tif (!Type.isDate(entry.toReal))\n\t\t{\n\t\t\t// Full day\n\t\t\tif ((entry.toTimestamp - entry.fromTimestamp) % Util.getDayLength() === 0\n\t\t\t\t&&\n\t\t\t\tBX.date.format('H:i', entry.toTimestamp / 1000) === '00:00'\n\t\t\t)\n\t\t\t{\n\t\t\t\tentry.toReal = new Date(entry.to.getTime() + Util.getDayLength());\n\t\t\t\tentry.toReal.setSeconds(0,0);\n\t\t\t\tentry.toTimestampReal = entry.toReal.getTime();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentry.toReal = entry.to;\n\t\t\t\tentry.toTimestampReal = entry.toTimestamp;\n\t\t\t}\n\t\t}\n\n\t\treturn entry;\n\t}\n\n\taddAccessibilityItem(entry, wrap)\n\t{\n\t\tlet\n\t\t\ttimeFrom, timeTo,\n\t\t\thidden = false,\n\t\t\tfromTimestamp = entry.fromTimestamp,\n\t\t\ttoTimestamp = entry.toTimestampReal || entry.toTimestamp,\n\t\t\tshownScaleTimeFrom = this.isOneDayScale() ? 0 : this.shownScaleTimeFrom,\n\t\t\tshownScaleTimeTo = this.isOneDayScale() ? 24 : this.shownScaleTimeTo,\n\t\t\tfrom = new Date(fromTimestamp),\n\t\t\tto = new Date(toTimestamp);\n\n\t\ttimeFrom = parseInt(from.getHours()) + from.getMinutes() / 60;\n\t\ttimeTo = parseInt(to.getHours()) + to.getMinutes() / 60;\n\n\t\tif (timeFrom > shownScaleTimeTo)\n\t\t{\n\t\t\tfrom = new Date(from.getTime() + Util.getDayLength() - 1);\n\t\t\tfrom.setHours(shownScaleTimeFrom, 0, 0, 0);\n\t\t\tif (from.getTime() >= to.getTime())\n\t\t\t{\n\t\t\t\thidden = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hidden && timeFrom < shownScaleTimeFrom)\n\t\t{\n\t\t\tfrom.setHours(shownScaleTimeFrom, 0, 0, 0);\n\t\t\tif (from.getTime() >= to.getTime())\n\t\t\t{\n\t\t\t\thidden = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hidden && timeTo > shownScaleTimeTo)\n\t\t{\n\t\t\tto.setHours(shownScaleTimeTo, 0, 0, 0);\n\t\t\tif (from.getTime() >= to.getTime())\n\t\t\t{\n\t\t\t\thidden = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hidden && timeTo < shownScaleTimeFrom)\n\t\t{\n\t\t\tto = new Date(to.getTime() - Util.getDayLength() + 1);\n\t\t\tto.setHours(shownScaleTimeTo, 0, 0, 0);\n\t\t\tif (from.getTime() >= to.getTime())\n\t\t\t{\n\t\t\t\thidden = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hidden)\n\t\t{\n\t\t\tlet\n\t\t\t\tfromPos = this.getPosByDate(from),\n\t\t\t\ttoPos = this.getPosByDate(to);\n\n\t\t\tentry.node = wrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'calendar-planner-acc-entry' + (entry.type && entry.type === 'hr' ? ' calendar-planner-acc-entry-hr' : '')\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\tleft: fromPos + 'px',\n\t\t\t\t\twidth: Math.max((toPos - fromPos), 3) + 'px'\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (entry.title || entry.name)\n\t\t\t{\n\t\t\t\tentry.node.title = entry.title || entry.name;\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplayEntryRow(entry, accessibility = [])\n\t{\n\t\tlet rowWrap;\n\n\t\tif (entry.type === 'moreLink')\n\t\t{\n\t\t\trowWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-user'}}));\n\n\t\t\tif (this.showEntryName)\n\t\t\t{\n\t\t\t\tthis.DOM.showMoreUsersLink = rowWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-all-users',\n\t\t\t\t\t\ttitle: entry.title || ''\n\t\t\t\t\t},\n\t\t\t\t\ttext: entry.name,\n\t\t\t\t\tevents: {'click': this.showMoreUsers.bind(this)}\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.showMoreUsersLink = rowWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-users-more',\n\t\t\t\t\t\ttitle: entry.name\n\t\t\t\t\t},\n\t\t\t\t\thtml: '<span class=\"calendar-planner-users-more-btn\"></span>',\n\t\t\t\t\tevents: {'click': this.showMoreUsers.bind(this)}\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\telse if (entry.type === 'lastUsers')\n\t\t{\n\t\t\trowWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-user'}}));\n\n\t\t\tif (this.showEntryName)\n\t\t\t{\n\t\t\t\tthis.DOM.showMoreUsersLink = rowWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-all-users calendar-planner-last-users',\n\t\t\t\t\t\ttitle: entry.title || ''\n\t\t\t\t\t},\n\t\t\t\t\ttext: entry.name\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.showMoreUsersLink = rowWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-users-more',\n\t\t\t\t\t\ttitle: entry.title || entry.name\n\t\t\t\t\t},\n\t\t\t\t\thtml: '<span class=\"calendar-planner-users-last-btn\"></span>'\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\telse if (entry.id && entry.type === 'user')\n\t\t{\n\t\t\trowWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-bx-planner-entry' : entry.uid,\n\t\t\t\t\tclassName: 'calendar-planner-user'\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (entry.status && this.entryStatusMap[entry.status])\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"span\", {props: {className: 'calendar-planner-user-status-icon ' + this.entryStatusMap[entry.status], title: Loc.getMessage('EC_PL_STATUS_' + entry.status.toUpperCase())}}));\n\t\t\t}\n\n\t\t\tif (entry.avatar)\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"img\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-user-image-icon',\n\t\t\t\t\t\tsrc: entry.avatar\n\t\t\t\t\t},\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\t'bx-tooltip-user-id': entry.id,\n\t\t\t\t\t\t'bx-tooltip-classname': 'calendar-planner-user-tooltip'\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tif (this.showEntryName)\n\t\t\t{\n\t\t\t\trowWrap.appendChild(\n\t\t\t\t\tBX.create(\"span\", {props: {className: 'calendar-planner-user-name'}})).appendChild(\n\t\t\t\t\tBX.create(\"span\", {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tclassName: 'calendar-planner-entry-name'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t'bx-tooltip-user-id': entry.id,\n\t\t\t\t\t\t\t'bx-tooltip-classname': 'calendar-planner-user-tooltip'\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\twidth: (this.entriesListWidth - 42) + 'px'\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttext: entry.name\n\t\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t\telse if (entry.id && entry.type === 'room')\n\t\t{\n\t\t\trowWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-user'}}));\n\n\t\t\tif (this.showEntryName)\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"span\", {props: {className: 'calendar-planner-user-name'}})).appendChild(BX.create(\"A\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\thref: entry.url ? entry.url : '#',\n\t\t\t\t\t\tclassName: 'calendar-planner-entry-name'\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\twidth: (this.entriesListWidth - 20) + 'px'\n\t\t\t\t\t},\n\t\t\t\t\ttext: entry.name\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-location-image-icon', title: entry.name}}));\n\t\t\t}\n\t\t}\n\t\telse if (entry.type === 'resource')\n\t\t{\n\t\t\tif (!this.entriesResourceListWrap || !BX.isNodeInDom(this.entriesResourceListWrap))\n\t\t\t{\n\t\t\t\tthis.entriesResourceListWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\t\tprops: {className: 'calendar-planner-container-resource'},\n\t\t\t\t\thtml: '<div class=\"calendar-planner-resource-header\"><span class=\"calendar-planner-users-item\">' + Loc.getMessage('EC_PL_RESOURCE_TITLE') + '</span></div>'\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\trowWrap = this.entriesResourceListWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-bx-planner-entry' : entry.uid,\n\t\t\t\t\tclassName: 'calendar-planner-user'\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (this.showEntryName)\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"span\", {props: {className: 'calendar-planner-user-name'}})).appendChild(BX.create(\"span\", {\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-planner-entry-name'\n\t\t\t\t\t},\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\twidth: (this.entriesListWidth - 20) + 'px'\n\t\t\t\t\t},\n\t\t\t\t\ttext: entry.name\n\t\t\t\t}));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\trowWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-location-image-icon', title: entry.name}}));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\trowWrap = this.DOM.entrieListWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-user'}}));\n\n\t\t\trowWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tprops: {className: 'calendar-planner-all-users'},\n\t\t\t\ttext: entry.name\n\t\t\t}));\n\t\t}\n\n\t\tlet top = rowWrap.offsetTop + 13;\n\n\t\tlet dataRowWrap = this.DOM.accessibilityWrap.appendChild(Tag.render`<div class=\"calendar-planner-timeline-space\" style=\"top:${top}px\" data-bx-planner-entry=\"${entry.uid||0}\"></div>`);\n\n\t\tif (this.selectMode)\n\t\t{\n\t\t\tentry.selectorControlWrap = this.selector.controlWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-bx-planner-entry' : entry.uid,\n\t\t\t\t\tclassName: 'calendar-planner-selector-control-row'\n\t\t\t\t},\n\t\t\t\tstyle: {\n\t\t\t\t\ttop: (top - 4) + 'px'\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (entry.selected)\n\t\t\t{\n\t\t\t\tthis.selectEntryRow(entry);\n\t\t\t}\n\t\t}\n\n\t\t//this.entriesRowMap.set(entry, rowWrap);\n\t\tthis.entriesDataRowMap.set(entry.uid, dataRowWrap);\n\t\taccessibility.forEach((item) => {\n\t\t\titem = Planner.prepareAccessibilityItem(item);\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tthis.addAccessibilityItem(item, dataRowWrap);\n\t\t\t}\n\t\t});\n\t}\n\n\tselectEntryRow(entry)\n\t{\n\t\tif (BX.type.isPlainObject(entry))\n\t\t{\n\t\t\tlet top = parseInt(entry.dataRowWrap.offsetTop);\n\t\t\tif (!entry.selectWrap || !BX.isParentForNode(this.selectedEntriesWrap, entry.selectWrap))\n\t\t\t{\n\t\t\t\tentry.selectWrap = this.selectedEntriesWrap.appendChild(BX.create(\"DIV\", {props: {className: 'calendar-planner-timeline-selected'}}));\n\t\t\t}\n\n\t\t\tentry.selectWrap.style.display = '';\n\t\t\tentry.selectWrap.style.top = (top + 36) + 'px';\n\t\t\tentry.selectWrap.style.width = (parseInt(this.DOM.mainWrap.offsetWidth) + 5) + 'px';\n\n\t\t\tDom.addClass(entry.selectorControlWrap, 'active');\n\t\t\tentry.selected = true;\n\n\t\t\tthis.clearCacheTime();\n\t\t}\n\t}\n\n\tisEntrySelected(entry)\n\t{\n\t\treturn entry && entry.selected;\n\t}\n\n\tdeSelectEntryRow(entry)\n\t{\n\t\tif (BX.type.isPlainObject(entry))\n\t\t{\n\t\t\tif (entry.selectWrap)\n\t\t\t{\n\t\t\t\tentry.selectWrap.style.display = 'none';\n\t\t\t}\n\t\t\tif (entry.selectorControlWrap)\n\t\t\t{\n\t\t\t\tDom.removeClass(entry.selectorControlWrap, 'active');\n\t\t\t}\n\t\t\tentry.selected = false;\n\t\t\tthis.clearCacheTime();\n\t\t}\n\t}\n\n\tstatic getEntryUniqueId(entry)\n\t{\n\t\treturn ['user', 'room'].includes(entry.type) ? entry.id : entry.type + '-' + entry.id;\n\t}\n\n\tgetEntryByUniqueId(entryUniqueId)\n\t{\n\t\tif (BX.type.isArray(this.entries))\n\t\t{\n\t\t\treturn this.entries.find(function(entry){return entry.uid == entryUniqueId;})\n\t\t}\n\t\treturn null;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.wrap, 'click', this.handleClick.bind(this));\n\t\tEvent.bind(this.DOM.wrap, 'mousedown', BX.proxy(this.handleMousedown, this));\n\t\tEvent.bind(document, \"mousemove\", BX.proxy(this.handleMousemove, this));\n\t\tEvent.bind(document, \"mouseup\", BX.proxy(this.handleMouseup, this));\n\n\t\tif ('onwheel' in document)\n\t\t{\n\t\t\tEvent.bind(this.DOM.timelineFixedWrap, \"wheel\", this.mouseWheelTimelineHandler.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(this.DOM.timelineFixedWrap, \"mousewheel\", this.mouseWheelTimelineHandler.bind(this));\n\t\t}\n\t}\n\n\thandleClick(e)\n\t{\n\t\tif (!e)\n\t\t{\n\t\t\te = window.event;\n\t\t}\n\n\t\tthis.clickMousePos = this.getMousePos(e);\n\t\tlet\n\t\t\tnodeTarget = e.target || e.srcElement,\n\t\t\taccuracyMouse = 5;\n\n\n\t\tif (this.selectMode &&\n\t\t\tDom.hasClass(nodeTarget, 'calendar-planner-selector-control-row'))\n\t\t{\n\t\t\tlet entry = this.getEntryByUniqueId(nodeTarget.getAttribute('data-bx-planner-entry'));\n\t\t\tif (entry)\n\t\t\t{\n\t\t\t\tif (!this.isEntrySelected(entry))\n\t\t\t\t{\n\t\t\t\t\tthis.selectEntryRow(entry);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.deSelectEntryRow(entry);\n\t\t\t\t}\n\n\t\t\t\tthis.selector.checkStatus();\n\n\t\t\t\tBX.onCustomEvent('OnCalendarPlannerSelectedEntriesOnChange', [{\n\t\t\t\t\tplannerId: this.id,\n\t\t\t\t\tentries: this.entries\n\t\t\t\t}]);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.readonly)\n\t\t{\n\t\t\tlet\n\t\t\t\ttimeline = this.findTarget(nodeTarget, 'timeline'),\n\t\t\t\tselector = this.findTarget(nodeTarget, 'selector');\n\n\t\t\tif (timeline && !selector && Math.abs(this.clickMousePos.x - this.mouseDownMousePos.x) < accuracyMouse && Math.abs(this.clickMousePos.y - this.mouseDownMousePos.y) < accuracyMouse)\n\t\t\t{\n\t\t\t\tlet left = this.clickMousePos.x - BX.pos(this.DOM.timelineFixedWrap).left + this.DOM.timelineFixedWrap.scrollLeft;\n\n\t\t\t\tif (this.clickSelectorScaleAccuracy !== this.accuracy)\n\t\t\t\t{\n\t\t\t\t\tlet mapDatePosRes = this.mapDatePos(this.clickSelectorScaleAccuracy);\n\t\t\t\t\tlet dateFrom = this.getDateByPos(left, false, mapDatePosRes.posDateMap);\n\t\t\t\t\tleft = this.getPosByDate(dateFrom);\n\t\t\t\t}\n\n\t\t\t\tthis.selector.transit({toX: left});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleMousedown(e)\n\t{\n\t\tif (!e)\n\t\t{\n\t\t\te = window.event;\n\t\t}\n\n\t\tlet nodeTarget = e.target || e.srcElement;\n\t\tthis.mouseDownMousePos = this.getMousePos(e);\n\t\tthis.mouseDown = true;\n\n\t\tif (!this.readonly)\n\t\t{\n\t\t\tlet selector = this.findTarget(nodeTarget, 'selector');\n\t\t\tthis.startMousePos = this.mouseDownMousePos;\n\n\t\t\tif (selector)\n\t\t\t{\n\t\t\t\tif (this.findTarget(nodeTarget, 'selector-resize-right'))\n\t\t\t\t{\n\t\t\t\t\tthis.selector.startResize();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.selector.startMove();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.findTarget(nodeTarget, 'timeline'))\n\t\t\t{\n\t\t\t\tthis.startScrollTimeline();\n\t\t\t}\n\t\t}\n\t}\n\n\thandleMouseup()\n\t{\n\t\tif (this.selector.isDragged())\n\t\t{\n\t\t\tthis.selector.endMove();\n\t\t\tthis.selector.endResize();\n\t\t}\n\n\t\tif(this.timelineIsDraged)\n\t\t{\n\t\t\tthis.endScrollTimeline();\n\t\t}\n\n\t\tif (this.shown && !this.readonly && this.mouseDown)\n\t\t{\n\t\t\tthis.checkTimelineScroll();\n\t\t}\n\n\t\tthis.mouseDown = false;\n\t\tDom.removeClass(document.body, 'calendar-planner-unselectable');\n\t}\n\n\thandleMousemove(e)\n\t{\n\t\tlet\n\t\t\tmousePos,\n\t\t\ttarget = e.target || e.srcElement;\n\n\t\tif (this.selectMode && target && target.getAttribute && target.getAttribute('data-bx-planner-entry'))\n\t\t{\n\t\t\tthis.lastTouchedEntry = target;\n\t\t}\n\n\t\tif (this.selector.isDragged())\n\t\t{\n\t\t\tmousePos = this.getMousePos(e);\n\t\t\tthis.selector.move(mousePos.x - this.startMousePos.x);\n\t\t\tthis.selector.resize(mousePos.x - this.startMousePos.x);\n\t\t}\n\n\t\tif(this.timelineIsDraged)\n\t\t{\n\t\t\tmousePos = this.getMousePos(e);\n\t\t\tthis.scrollTimeline(mousePos.x - this.startMousePos.x);\n\t\t}\n\t}\n\n\tmouseWheelTimelineHandler(e)\n\t{\n\t\te = e || window.event;\n\t\tif (this.shown && !this.readonly)\n\t\t{\n\t\t\tlet delta = e.deltaY || e.detail || e.wheelDelta;\n\t\t\tif (Math.abs(delta) > 0)\n\t\t\t{\n\t\t\t\tlet newScroll = this.DOM.timelineFixedWrap.scrollLeft + Math.round(delta / 3);\n\t\t\t\tthis.DOM.timelineFixedWrap.scrollLeft = Math.max(newScroll, 0);\n\t\t\t\tthis.checkTimelineScroll();\n\t\t\t\treturn BX.PreventDefault(e);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tcheckTimelineScroll()\n\t{\n\t\tlet\n\t\t\tminScroll = this.scrollStep,\n\t\t\tmaxScroll = this.DOM.timelineFixedWrap.scrollWidth - this.DOM.timelineFixedWrap.offsetWidth - this.scrollStep;\n\n\t\t// Check and expand only if it is visible\n\t\tif (this.DOM.timelineFixedWrap.offsetWidth > 0)\n\t\t{\n\t\t\tif (this.DOM.timelineFixedWrap.scrollLeft <= minScroll)\n\t\t\t{\n\t\t\t\tRuntime.debounce(()=>{this.expandTimeline('left')}, this.EXPAND_DELAY)();\n\t\t\t}\n\t\t\telse if (this.DOM.timelineFixedWrap.scrollLeft >= maxScroll)\n\t\t\t{\n\t\t\t\tRuntime.debounce(()=>{this.expandTimeline('right')}, this.EXPAND_DELAY)();\n\t\t\t}\n\t\t}\n\t}\n\n\tstartScrollTimeline()\n\t{\n\t\tthis.timelineIsDraged = true;\n\t\tthis.timelineStartScrollLeft = this.DOM.timelineFixedWrap.scrollLeft;\n\t}\n\tscrollTimeline(x)\n\t{\n\t\tthis.DOM.timelineFixedWrap.scrollLeft = Math.max(this.timelineStartScrollLeft - x, 0);\n\t}\n\tendScrollTimeline()\n\t{\n\t\tthis.timelineIsDraged = false;\n\t}\n\n\tfindTarget(node, nodeMetaType, parentCont)\n\t{\n\t\tif (!parentCont)\n\t\t\tparentCont = this.DOM.mainWrap;\n\n\t\tlet type = (node && node.getAttribute) ? node.getAttribute('data-bx-planner-meta') : null;\n\n\t\tif (type !== nodeMetaType)\n\t\t{\n\t\t\tif (node)\n\t\t\t{\n\t\t\t\tnode = BX.findParent(node, function(n)\n\t\t\t\t{\n\t\t\t\t\treturn n.getAttribute && n.getAttribute('data-bx-planner-meta') === nodeMetaType;\n\t\t\t\t}, parentCont);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnode = null;\n\t\t\t}\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tgetMousePos(e)\n\t{\n\t\tif (!e)\n\t\t\te = window.event;\n\n\t\tlet x = 0, y = 0;\n\t\tif (e.pageX || e.pageY)\n\t\t{\n\t\t\tx = e.pageX;\n\t\t\ty = e.pageY;\n\t\t}\n\t\telse if (e.clientX || e.clientY)\n\t\t{\n\t\t\tx = e.clientX + (document.documentElement.scrollLeft || document.body.scrollLeft) - document.documentElement.clientLeft;\n\t\t\ty = e.clientY + (document.documentElement.scrollTop || document.body.scrollTop) - document.documentElement.clientTop;\n\t\t}\n\n\t\treturn {x: x, y: y};\n\t}\n\n\tsetScaleType(scaleType)\n\t{\n\t\tif (!this.scaleTypes.includes(scaleType))\n\t\t{\n\t\t\tscaleType = '1hour';\n\t\t}\n\n\t\tthis.scaleType = scaleType;\n\t\tthis.scaleSize = Planner.getScaleSize(scaleType);\n\n\t\tif (this.isOneDayScale() && this.timelineCellWidth < 100)\n\t\t{\n\t\t\tthis.timelineCellWidthOrig = this.timelineCellWidth;\n\t\t\tthis.timelineCellWidth = 100;\n\t\t}\n\t\telse if (!this.isOneDayScale() && this.timelineCellWidthOrig)\n\t\t{\n\t\t\tthis.timelineCellWidth = this.timelineCellWidthOrig;\n\t\t\tthis.timelineCellWidthOrig = false;\n\t\t}\n\n\t\tif (this.isOneDayScale())\n\t\t{\n\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-fulldaymode');\n\t\t\tif (this.DOM.entriesOuterWrap)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.entriesOuterWrap, 'calendar-planner-no-daytitle');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-fulldaymode');\n\t\t\tif (this.DOM.entriesOuterWrap)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.entriesOuterWrap, 'calendar-planner-no-daytitle');\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getScaleSize(scaleType)\n\t{\n\t\tlet\n\t\t\thour = 3600,\n\t\t\tmap = {\n\t\t\t\t'15min' : Math.round(hour / 4),\n\t\t\t\t'30min' : Math.round(hour / 2),\n\t\t\t\t'1hour' : hour,\n\t\t\t\t'2hour' : hour * 2,\n\t\t\t\t'1day' : hour * 24\n\t\t\t};\n\n\t\treturn map[scaleType] || hour;\n\t}\n\n\tmapDatePos(accuracy)\n\t{\n\t\tif (!accuracy)\n\t\t{\n\t\t\taccuracy = this.accuracy;\n\t\t}\n\n\t\tlet datePosMap = {};\n\t\tlet posDateMap = {};\n\t\tlet i, j, tsi, xi, tsj, xj, cellWidth;\n\n\t\tthis.substeps = Math.round(this.scaleSize / accuracy);\n\t\tthis.posAccuracy = this.timelineCellWidth / this.substeps;\n\n\t\taccuracy = accuracy * 1000;\n\t\tlet scaleSize = this.scaleData[1].timestamp - this.scaleData[0].timestamp;\n\n\t\tfor (i = 0; i < this.scaleData.length; i++)\n\t\t{\n\t\t\ttsi = this.scaleData[i].timestamp;\n\t\t\txi = parseInt(this.scaleData[i].cell.offsetLeft);\n\t\t\tcellWidth = parseInt(this.scaleData[i].cell.offsetWidth);\n\n\t\t\tif (!datePosMap[tsi])\n\t\t\t{\n\t\t\t\tdatePosMap[tsi] = xi;\n\t\t\t}\n\t\t\tposDateMap[xi] = tsi;\n\n\t\t\tfor (j = 1; j <= cellWidth; j++)\n\t\t\t{\n\t\t\t\ttsj = tsi + Math.round((j * scaleSize / cellWidth) / accuracy) * accuracy;\n\t\t\t\txj = xi + j;\n\t\t\t\tif (!datePosMap[tsi])\n\t\t\t\t{\n\t\t\t\t\tdatePosMap[tsj] = xj;\n\t\t\t\t}\n\t\t\t\tposDateMap[xj] = tsj;\n\n\t\t\t\tif (j === cellWidth &&\n\t\t\t\t\t(!this.scaleData[i + 1] || this.scaleData[i + 1].dayStart))\n\t\t\t\t{\n\t\t\t\t\tdatePosMap[xj + '_end'] = tsj;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tdatePosMap: datePosMap,\n\t\t\tposDateMap: posDateMap\n\t\t}\n\t}\n\n\tgetPosByDate(date)\n\t{\n\t\tlet x = 0;\n\t\tif (date && typeof date !== 'object')\n\t\t{\n\t\t\tdate = Util.parseDate(date);\n\t\t}\n\n\t\tif (date && typeof date === 'object')\n\t\t{\n\t\t\tlet\n\t\t\t\ti, curInd = 0,\n\t\t\t\ttimestamp = date.getTime();\n\n\t\t\tfor (i = 0; i < this.scaleData.length; i++)\n\t\t\t{\n\t\t\t\tif (timestamp >= this.scaleData[i].timestamp)\n\t\t\t\t{\n\t\t\t\t\tcurInd = i;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.scaleData[curInd] && this.scaleData[curInd].cell)\n\t\t\t{\n\t\t\t\tx = this.scaleData[curInd].cell.offsetLeft;\n\t\t\t\tlet cellWidth = this.scaleData[curInd].cell.offsetWidth, deltaTs = Math.round((timestamp - this.scaleData[curInd].timestamp) / 1000);\n\n\t\t\t\tif (deltaTs > 0)\n\t\t\t\t{\n\t\t\t\t\tx += Math.round(deltaTs * 10 / this.scaleSize * cellWidth) / 10;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn x;\n\t}\n\n\tgetDateByPos(x, end, posDateMap)\n\t{\n\t\tif (!posDateMap)\n\t\t{\n\t\t\tposDateMap = this.posDateMap;\n\t\t}\n\t\tlet\n\t\t\tdate,\n\t\t\ttimestamp = (end && posDateMap[x + '_end']) ? posDateMap[x + '_end'] : posDateMap[x];\n\n\t\tif (!timestamp)\n\t\t{\n\t\t\tx = Math.round(x);\n\t\t\ttimestamp = (end && posDateMap[x + '_end']) ?  posDateMap[x + '_end'] : posDateMap[x];\n\t\t}\n\n\t\tif (timestamp)\n\t\t{\n\t\t\tdate = new Date(timestamp);\n\t\t}\n\n\t\treturn date;\n\t}\n\n\tshowMoreUsers()\n\t{\n\t\tthis.MIN_ENTRY_ROWS = this.MAX_ENTRY_ROWS;\n\t\tthis.update(this.entries, this.accessibility);\n\t\tthis.rebuildDebounce();\n\t}\n\n\tadjustHeight()\n\t{\n\t\tlet\n\t\t\tnewHeight = this.DOM.entrieListWrap.offsetHeight + this.DOM.entrieListWrap.offsetTop + 30,\n\t\t\tcurrentHeight = parseInt(this.DOM.wrap.style.height) || this.height;\n\n\t\tif (this.compactMode && currentHeight < newHeight || !this.compactMode)\n\t\t{\n\t\t\tthis.DOM.wrap.style.height = currentHeight + 'px';\n\t\t\tthis.resizePlannerHeight(newHeight, Math.abs(newHeight - currentHeight) > 10);\n\t\t}\n\t}\n\n\tresizePlannerHeight(height, animation = false)\n\t{\n\t\tthis.height = height;\n\t\tif (animation)\n\t\t{\n\t\t\t// Stop animation before starting another one\n\t\t\tif(this.resizeAnimation)\n\t\t\t{\n\t\t\t\tthis.resizeAnimation.stop();\n\t\t\t\tthis.resizeAnimation = null;\n\t\t\t}\n\t\t\tthis.resizeAnimation = new BX.easing({\n\t\t\t\tduration: 800,\n\t\t\t\tstart: {height: parseInt(this.DOM.wrap.style.height)},\n\t\t\t\tfinish: {height: height},\n\t\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\t\tstep: (state) => {\n\t\t\t\t\tthis.resizePlannerHeight(state.height, false);\n\t\t\t\t},\n\t\t\t\tcomplete: () => {this.resizeAnimation = null;}\n\t\t\t});\n\t\t\tthis.resizeAnimation.animate();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.wrap.style.height = height + 'px';\n\t\t\tthis.DOM.mainWrap.style.height = height + 'px';\n\t\t\tthis.DOM.timelineFixedWrap.style.height = height + 'px';\n\t\t\tlet timelineDataContHeight = this.DOM.entrieListWrap.offsetHeight + 3;\n\t\t\tthis.DOM.timelineDataWrap.style.height = timelineDataContHeight + 'px';\n\t\t\t// Todo: resize selector\n\t\t\t//this.selector.wrap.style.height = (timelineDataContHeight + 10) + 'px';\n\t\t\tthis.DOM.entriesOuterWrap.style.height = height + 'px';\n\n\t\t\tif (this.DOM.proposeTimeButton && this.DOM.proposeTimeButton.style.display !== \"none\")\n\t\t\t{\n\t\t\t\tthis.DOM.proposeTimeButton.style.top = (this.DOM.timelineDataWrap.offsetTop + timelineDataContHeight / 2 - 16) + \"px\";\n\t\t\t}\n\t\t}\n\t}\n\n\tresizePlannerWidth(width, animation)\n\t{\n\t\tif (!animation && this.DOM.wrap && this.DOM.mainWrap)\n\t\t{\n\t\t\tthis.DOM.wrap.style.width = width + 'px';\n\t\t\tlet entriesListWidth = this.compactMode ? 0 : this.entriesListWidth;\n\t\t\tthis.DOM.mainWrap.style.width = width + 'px';\n\t\t\tthis.DOM.entriesOuterWrap.style.width = entriesListWidth + 'px';\n\t\t}\n\t}\n\n\t// ExpandFromCompactMode()\n\t// {\n\t// \tthis.readonly = false;\n\t// \tthis.compactMode = false;\n\t// \tthis.showTimelineDayTitle = true;\n\t// \tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-readonly');\n\t// \tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-compact');\n\t// \tthis.DOM.entriesOuterWrap.style.display = '';\n\t//\n\t// \tif (this.scaleDateFrom && this.scaleDateFrom.getTime)\n\t// \t{\n\t// \t\tthis.scaleDateFrom = new Date(this.scaleDateFrom.getTime() - Util.getDayLength() * this.SCALE_OFFSET_BEFORE /* days before */);\n\t// \t}\n\t//\n\t// \tif (this.scaleDateTo && this.scaleDateTo.getTime)\n\t// \t{\n\t// \t\tthis.scaleDateTo = new Date(this.scaleDateTo.getTime() + Util.getDayLength() * this.SCALE_OFFSET_AFTER /* days after */);\n\t// \t}\n\t//\n\t// \tthis.rebuild();\n\t//\n\t// \tthis.FocusSelector(false, 300);\n\t// }\n\n\texpandTimeline(direction, scaleDateFrom, scaleDateTo)\n\t{\n\t\tlet\n\t\t\tloadedTimelineSize,\n\t\t\tscrollLeft;\n\n\t\tif (!scaleDateFrom)\n\t\t\tscaleDateFrom = this.loadedDataFrom || this.scaleDateFrom;\n\t\tif (!scaleDateTo)\n\t\t\tscaleDateTo = this.loadedDataTo || this.scaleDateTo;\n\n\t\tif (direction === 'left')\n\t\t{\n\t\t\tlet oldScaleDateFrom = new Date(this.scaleDateFrom.getTime());\n\t\t\tthis.scaleDateFrom = new Date(scaleDateFrom.getTime() - Util.getDayLength()  * this.EXPAND_OFFSET);\n\n\t\t\tloadedTimelineSize = (this.scaleDateTo.getTime() - this.scaleDateFrom.getTime()) / Util.getDayLength();\n\t\t\tif (loadedTimelineSize > this.maxTimelineSize)\n\t\t\t{\n\t\t\t\tthis.scaleDateTo = new Date(this.scaleDateFrom.getTime() + Util.getDayLength()  * this.maxTimelineSize);\n\t\t\t\tthis.loadedDataFrom = this.scaleDateFrom;\n\t\t\t\tthis.loadedDataTo = this.scaleDateTo;\n\t\t\t\tthis.limitScaleSizeMode = true;\n\t\t\t}\n\n\t\t\tthis.rebuildDebounce();\n\n\t\t\tscrollLeft = this.getPosByDate(oldScaleDateFrom);\n\t\t}\n\t\telse if (direction === 'right')\n\t\t{\n\t\t\tlet oldDateTo = this.scaleDateTo;\n\n\t\t\tscrollLeft = this.DOM.timelineFixedWrap.scrollLeft;\n\t\t\tthis.scaleDateTo = new Date(scaleDateTo.getTime() + Util.getDayLength() * this.EXPAND_OFFSET);\n\t\t\tloadedTimelineSize = (this.scaleDateTo.getTime() - this.scaleDateFrom.getTime()) / Util.getDayLength();\n\n\t\t\tif (loadedTimelineSize > this.maxTimelineSize)\n\t\t\t{\n\t\t\t\tthis.scaleDateFrom = new Date(this.scaleDateTo.getTime() - Util.getDayLength()  * this.maxTimelineSize);\n\t\t\t\tthis.loadedDataFrom = this.scaleDateFrom;\n\t\t\t\tthis.loadedDataTo = this.scaleDateTo;\n\n\t\t\t\tscrollLeft = this.getPosByDate(oldDateTo) - this.DOM.timelineFixedWrap.offsetWidth;\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.DOM.timelineFixedWrap.scrollLeft = this.getPosByDate(oldDateTo) - this.DOM.timelineFixedWrap.offsetWidth;\n\t\t\t\t}, 10);\n\n\t\t\t\tthis.limitScaleSizeMode = true;\n\t\t\t}\n\n\t\t\tthis.rebuildDebounce();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.scaleDateFrom = new Date(scaleDateFrom.getTime() - Util.getDayLength()  * this.SCALE_OFFSET_BEFORE);\n\t\t\tthis.scaleDateTo = new Date(scaleDateTo.getTime() + Util.getDayLength() * this.SCALE_OFFSET_AFTER);\n\n\t\t\tthis.rebuildDebounce();\n\t\t}\n\n\t\tif (scrollLeft !== undefined)\n\t\t{\n\t\t\tthis.DOM.timelineFixedWrap.scrollLeft = scrollLeft;\n\t\t}\n\n\t\t// let i, entry, entrieIds = [];\n\t\t//\n\t\t// if (!BX.type.isArray(this.entries))\n\t\t// \tthis.entries = [];\n\t\t//\n\t\t// for (i = 0; i < this.entries.length; i++)\n\t\t// {\n\t\t// \tentry = this.entries[i];\n\t\t// \tentrieIds.push(entry.id);\n\t\t// }\n\n\t\t//this.loadDataLock = true;\n\t\t// BX.onCustomEvent('OnCalendarPlannerScaleChanged', [{\n\t\t// \tfrom: Util.formatDate(loadedDataFrom),\n\t\t// \tto: Util.formatDate(loadedDataTo),\n\t\t// \tentrieIds: entrieIds,\n\t\t// \tentries: this.entries,\n\t\t// \tfocusSelector: focusSelector === true\n\t\t// }]);\n\t}\n\n\tupdate(entries = [], accessibility = {})\n\t{\n\t\tDom.clean(this.DOM.entrieListWrap);\n\t\tDom.clean(this.DOM.accessibilityWrap);\n\t\t//this.entriesRowMap = new WeakMap();\n\t\tthis.entriesDataRowMap = new Map();\n\n\t\tif (!Type.isArray(entries))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.entries = entries;\n\t\tthis.accessibility = accessibility;\n\n\t\tlet\n\t\t\ti, k, entry, acc,\n\t\t\tuserId = parseInt(this.userId);\n\n\t\t// Compact mode\n\t\tif (this.compactMode)\n\t\t{\n\t\t\t// let data = [];\n\t\t\t// for (k in params.accessibility)\n\t\t\t// {\n\t\t\t// \tif (params.accessibility.hasOwnProperty(k) && params.accessibility[k] && params.accessibility[k].length > 0)\n\t\t\t// \t{\n\t\t\t// \t\tfor (i = 0; i < params.accessibility[k].length; i++)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tdata.push(Planner.prepareAccessibilityItem(params.accessibility[k][i]));\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\t\t\t//\n\t\t\t// this.compactRowWrap = this.accessibilityWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t// \tprops: {className: 'calendar-planner-timeline-space'},\n\t\t\t// \tstyle: {}\n\t\t\t// }));\n\t\t\t//\n\t\t\t// this.currentData = [data];\n\t\t\t// for (i = 0; i < data.length; i++)\n\t\t\t// {\n\t\t\t// \tthis.addAccessibilityItem(data[i], this.compactRowWrap);\n\t\t\t// }\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// sort entries list by amount of accessibilities data\n\t\t\t// Enties without accessibilitity data should be in the end of the array\n\t\t\t// But first in the list will be meeting room\n\t\t\t// And second (or first) will be owner-host of the event\n\t\t\tentries.sort((a, b) => {\n\t\t\t\tif (b.status === 'h' || parseInt(b.id) === userId && a.status !== 'h')\n\t\t\t\t\treturn 1;\n\t\t\t\tif (a.status === 'h' || parseInt(a.id) === userId && b.status !== 'h')\n\t\t\t\t\treturn  -1;\n\t\t\t\treturn 0;\n\t\t\t});\n\n\t\t\tif (this.selectedEntriesWrap)\n\t\t\t{\n\t\t\t\tDom.clean(this.selectedEntriesWrap);\n\t\t\t\tif (this.selector && this.selector.controlWrap)\n\t\t\t\t{\n\t\t\t\t\tDom.clean(this.selector.controlWrap);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet\n\t\t\t\tcutData = [],\n\t\t\t\tusersCount = 0,\n\t\t\t\tcutAmount = 0,\n\t\t\t\tdispDataCount = 0,\n\t\t\t\tcutDataTitle = [];\n\n\t\t\tentries.forEach((entry, ind) => {\n\t\t\t\tentry.uid = Planner.getEntryUniqueId(entry);\n\n\t\t\t\tlet accData = Type.isArray(accessibility[entry.uid]) ? accessibility[entry.uid] : [];\n\t\t\t\tthis.entriesIndex.set(entry.uid, entry);\n\n\t\t\t\tif (entry.type === 'user')\n\t\t\t\t{\n\t\t\t\t\tusersCount++;\n\t\t\t\t}\n\n\t\t\t\tif (ind < this.MIN_ENTRY_ROWS || entries.length === this.MIN_ENTRY_ROWS + 1)\n\t\t\t\t{\n\t\t\t\t\tdispDataCount++;\n\t\t\t\t\tthis.displayEntryRow(entry, accData);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcutAmount++;\n\t\t\t\t\tcutDataTitle.push(entry.name);\n\t\t\t\t\taccData.forEach((item) => {\n\t\t\t\t\t\titem = Planner.prepareAccessibilityItem(item);\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcutData.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Update entries title count\n\t\t\tif (this.entriesListTitleCounter)\n\t\t\t{\n\t\t\t\tthis.entriesListTitleCounter.innerHTML = usersCount > this.MAX_ENTRY_ROWS ? '(' + usersCount + ')' : '';\n\t\t\t}\n\n\t\t\tif (cutAmount > 0)\n\t\t\t{\n\t\t\t\tif (dispDataCount === this.MAX_ENTRY_ROWS)\n\t\t\t\t{\n\t\t\t\t\tthis.displayEntryRow({\n\t\t\t\t\t\tname: Loc.getMessage('EC_PL_ATTENDEES_LAST') + ' (' + cutAmount + ')',\n\t\t\t\t\t\ttype: 'lastUsers',\n\t\t\t\t\t\ttitle: cutDataTitle.join(', ')\n\t\t\t\t\t}, cutData);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.displayEntryRow({\n\t\t\t\t\t\tname: Loc.getMessage('EC_PL_ATTENDEES_SHOW_MORE') + ' (' + cutAmount + ')',\n\t\t\t\t\t\ttype: 'moreLink'\n\t\t\t\t\t}, cutData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.adjustHeight();\n\t}\n\n\tupdateAccessibility(accessibility)\n\t{\n\t\tthis.accessibility = accessibility;\n\t\tif (Type.isPlainObject(accessibility))\n\t\t{\n\t\t\tlet key;\n\t\t\tfor (key in accessibility)\n\t\t\t{\n\t\t\t\tif (accessibility.hasOwnProperty(key)\n\t\t\t\t\t&& Type.isArray(accessibility[key])\n\t\t\t\t\t&& accessibility[key].length)\n\t\t\t\t{\n\t\t\t\t\tlet wrap = this.entriesDataRowMap.get(key);\n\t\t\t\t\tif (Type.isDomNode(wrap))\n\t\t\t\t\t{\n\t\t\t\t\t\taccessibility[key].forEach((event) => {\n\t\t\t\t\t\t\tevent = Planner.prepareAccessibilityItem(event);\n\t\t\t\t\t\t\tif (event)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.addAccessibilityItem(event, wrap)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateSelector(from, to, fullDay, options = {})\n\t{\n\t\tif (this.shown && this.selector)\n\t\t{\n\t\t\tthis.setFullDayMode(fullDay);\n\n\t\t\t// Update limits of scale\n\t\t\tif (!this.isOneDayScale())\n\t\t\t{\n\t\t\t\tif (Util.formatDate(from) !== Util.formatDate(to))\n\t\t\t\t{\n\t\t\t\t\tthis.extendScaleTime(0, 24);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet\n\t\t\t\t\t\ttimeFrom = parseInt(from.getHours()) + Math.floor(from.getMinutes() / 60),\n\t\t\t\t\t\ttimeTo = parseInt(to.getHours()) + Math.ceil(to.getMinutes() / 60);\n\n\t\t\t\t\tif (timeFrom < this.shownScaleTimeFrom)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.extendScaleTime(timeFrom, false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (timeTo > this.shownScaleTimeTo)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.extendScaleTime(false, timeTo);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ((to.getTime() > this.scaleDateTo.getTime())\n\t\t\t\t||\n\t\t\t\tfrom.getTime() < this.scaleDateFrom.getTime())\n\t\t\t{\n\t\t\t\tthis.expandTimeline(false, from, to);\n\t\t\t}\n\n\t\t\tthis.selector.update({\n\t\t\t\tfrom: from,\n\t\t\t\tto: to,\n\t\t\t\tfullDay: fullDay\n\t\t\t});\n\n\t\t\t//this.selector.focus();\n\t\t\tthis.selector.focus(false, 300);\n\t\t}\n\t}\n\n\thandleSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tthis.emit('onDateChange', new BaseEvent({data: data}));\n\t\t}\n\t}\n\n\tdoCheckSelectorStatus(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tlet selectorStatus = this.checkTimePeriod(data.dateFrom, data.dateTo) === true;\n\t\t\tthis.selector.setSelectorStatus(selectorStatus);\n\t\t\tif (selectorStatus)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.mainWrap, 'calendar-planner-selector-warning');\n\t\t\t\tthis.hideProposeControl();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.mainWrap, 'calendar-planner-selector-warning');\n\t\t\t\tthis.showProposeControl();\n\t\t\t}\n\t\t}\n\t}\n\n\t// DoUpdate(params)\n\t// {\n\t// \tif (this.id === params.plannerId)\n\t// \t{\n\t// \t\tlet rebuild = false;\n\t// \t\tif (params.selector && params.selector.fullDay)\n\t// \t\t{\n\t// \t\t\tthis.setFullDayMode(params.selector.fullDay);\n\t// \t\t}\n\t//\n\t// \t\tif (params.config)\n\t// \t\t{\n\t// \t\t\tif (this.fullDayMode && params.config.changeFromFullDay)\n\t// \t\t\t{\n\t// \t\t\t\tparams.config.scaleType = params.config.changeFromFullDay.scaleType;\n\t// \t\t\t\tparams.config.timelineCellWidth = params.config.changeFromFullDay.timelineCellWidth;\n\t// \t\t\t\tdelete params.config.changeFromFullDay;\n\t// \t\t\t}\n\t//\n\t// \t\t\t// Check if we should rebuild scale\n\t// \t\t\tif (params.config.scaleDateFrom && params.config.scaleDateFrom !== this.scaleDateFrom)\n\t// \t\t\t\trebuild = true;\n\t// \t\t\tif (!rebuild && params.config.scaleDateTo && params.config.scaleDateTo !== this.scaleDateTo)\n\t// \t\t\t\trebuild = true;\n\t// \t\t\tif (!rebuild && params.config.scaleType && params.config.scaleType !== this.scaleType)\n\t// \t\t\t\trebuild = true;\n\t// \t\t\tif (params.config.shownScaleTimeFrom && params.config.shownScaleTimeFrom !== this.shownScaleTimeFrom)\n\t// \t\t\t{\n\t// \t\t\t\tthis.shownScaleTimeFrom = params.config.shownScaleTimeFrom;\n\t// \t\t\t\trebuild = true;\n\t// \t\t\t}\n\t// \t\t\tif (params.config.shownScaleTimeTo && params.config.shownScaleTimeTo !== this.shownScaleTimeTo)\n\t// \t\t\t{\n\t// \t\t\t\tthis.shownScaleTimeTo = params.config.shownScaleTimeTo;\n\t// \t\t\t\trebuild = true;\n\t// \t\t\t}\n\t//\n\t// \t\t\tthis.setConfig(params.config);\n\t// \t\t}\n\t//\n\t// \t\tif (!this.shown && params.show)\n\t// \t\t{\n\t// \t\t\tthis.show({animation: true});\n\t// \t\t}\n\t// \t\telse if (rebuild)\n\t// \t\t{\n\t// \t\t\tthis.rebuild({updateSelector: false});\n\t// \t\t}\n\t//\n\t// \t\tif (params.hide && this.shown)\n\t// \t\t{\n\t// \t\t\tthis.Hide(params.hideAnimation !== false);\n\t// \t\t}\n\t//\n\t// \t\tif (this.shown)\n\t// \t\t{\n\t// \t\t\tif (params.data !== undefined && params.data !== false)\n\t// \t\t\t{\n\t// \t\t\t\tthis.ClearAccessibilityData();\n\t// \t\t\t\tthis.UpdateData(params.data);\n\t// \t\t\t\tthis.SetLoadedDataLimits(params.loadedDataFrom, params.loadedDataTo);\n\t// \t\t\t}\n\t//\n\t// \t\t\tif (params.selector !== undefined &&\n\t// \t\t\t\tparams.selector.from && params.selector.to)\n\t// \t\t\t{\n\t// \t\t\t\tparams.selector.focus = params.focusSelector === true;\n\t// \t\t\t\tparams.selector.updateScaleType = false;\n\t//\n\t// \t\t\t\t// this.limitScaleSizeMode - is true if timeline scrolled by mouse or\n\t// \t\t\t\t// mousewheel and we load some data from deep future or from past\n\t// \t\t\t\t// (so we should't expand timeline in this case)\n\t// \t\t\t\tif (params.selector.to.getTime() > this.loadedDataTo.getTime()\n\t// \t\t\t\t\t&& !this.limitScaleSizeMode)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tthis.expandTimeline('right', false, params.selector.to, true);\n\t// \t\t\t\t}\n\t// \t\t\t\telse if (params.selector.from.getTime() < this.loadedDataFrom.getTime()\n\t// \t\t\t\t\t&& !this.limitScaleSizeMode)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tthis.expandTimeline('left', params.selector.from, false, true);\n\t// \t\t\t\t}\n\t// \t\t\t\telse\n\t// \t\t\t\t{\n\t// \t\t\t\t\tif (!this.readonly)\n\t// \t\t\t\t\t{\n\t// \t\t\t\t\t\tthis.scaleDateFrom = this.loadedDataFrom;\n\t// \t\t\t\t\t\tthis.scaleDateTo = this.loadedDataTo;\n\t// \t\t\t\t\t}\n\t//\n\t// \t\t\t\t\tthis.rebuild({\n\t// \t\t\t\t\t\tupdateSelector: true,\n\t// \t\t\t\t\t\tselectorParams: params.selector\n\t// \t\t\t\t\t});\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t//\n\t// \t\t\tif (!this.compactMode && this.loadedDataTo !== this.scaleDateTo)\n\t// \t\t\t{\n\t// \t\t\t\tthis.checkTimelineScroll();\n\t// \t\t\t}\n\t// \t\t}\n\t//\n\t// \t\tif (params.params && params.params.callback)\n\t// \t\t{\n\t// \t\t\tparams.params.callback();\n\t// \t\t}\n\t//\n\t// \t\tif (this.expandTimelineTimeout)\n\t// \t\t\tthis.expandTimelineTimeout = !!clearTimeout(this.expandTimelineTimeout);\n\t//\n\t// \t\tlet _this = this;\n\t// \t\tthis.expandTimelineTimeout = setTimeout(\n\t// \t\t\tfunction()\n\t// \t\t\t{\n\t// \t\t\t\t_this.loadDataLock = false;\n\t// \t\t\t\tif (_this.lastExpandparams)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tlet p = _this.lastExpandparams;\n\t// \t\t\t\t\t_this.expandTimeline(p.direction, p.loadedDataFrom, p.loadedDataTo, p.focusSelector);\n\t// \t\t\t\t}\n\t// \t\t\t},\n\t// \t\t\tthis.expandTimelineDelay\n\t// \t\t);\n\t//\n\t// \t\t// We reset value to the false to allow user to extend timeline manually\n\t// \t\tthis.limitScaleSizeMode = false;\n\t//\n\t// \t\tBX.onCustomEvent('OnCalendarPlannerUpdated', [this, {\n\t// \t\t\tplannerId: this.id,\n\t// \t\t\tentries: this.entries\n\t// \t\t}]);\n\t// \t}\n\t// }\n\n\t// DoExpand(params)\n\t// {\n\t// \tif (this.id == params.plannerId)\n\t// \t{\n\t// \t\tif (this.compactMode)\n\t// \t\t{\n\t// \t\t\tif (params.config)\n\t// \t\t\t{\n\t// \t\t\t\tthis.setConfig(params.config);\n\t// \t\t\t}\n\t//\n\t// \t\t\tthis.ExpandFromCompactMode();\n\t// \t\t}\n\t// \t}\n\t// }\n\t//\n\t// DoSetConfig(params)\n\t// {\n\t// \tif (this.id == params.plannerId && params.config)\n\t// \t{\n\t// \t\tthis.setConfig(params.config);\n\t// \t}\n\t// }\n\t//\n\t// DoResize(params)\n\t// {\n\t// \tif (this.id == params.plannerId)\n\t// \t{\n\t// \t\tlet _this = this;\n\t//\n\t// \t\tif (params.width)\n\t// \t\t\tparams.width = parseInt(params.width) || this.width;\n\t// \t\tparams.width = Math.max(params.width, this.minWidth);\n\t//\n\t// \t\tthis.width = params.width;\n\t// \t\tthis.adjustCellWidth();\n\t//\n\t// \t\tthis.resizePlannerWidth(params.width, false);\n\t//\n\t// \t\tif (this.resizeRebuildTimeout)\n\t// \t\t\tthis.resizeRebuildTimeout = clearTimeout(this.resizeRebuildTimeout);\n\t//\n\t// \t\tthis.resizeRebuildTimeout = setTimeout(function()\n\t// \t\t{\n\t// \t\t\t_this.rebuild();\n\t// \t\t}, 200);\n\t// \t}\n\t// }\n\t//\n\t// DoUninstall(params)\n\t// {\n\t// \tif (params && this.id == params.plannerId)\n\t// \t{\n\t// \t\tDom.clean(this.DOM.wrap, 1);\n\t// \t\tBX.removeCustomEvent('OnCalendarPlannerDoUpdate', BX.proxy(this.DoUpdate, this));\n\t// \t\tBX.removeCustomEvent('OnCalendarPlannerDoExpand', BX.proxy(this.DoExpand, this));\n\t// \t\tBX.removeCustomEvent('OnCalendarPlannerDoResize', BX.proxy(this.DoResize, this));\n\t// \t\tBX.removeCustomEvent('OnCalendarPlannerDoSetConfig', BX.proxy(this.DoSetConfig, this));\n\t// \t\tBX.removeCustomEvent('OnCalendarPlannerDoUninstall', BX.proxy(this.DoUninstall, this));\n\t//\n\t// \t\tif (this.settingsPopup)\n\t// \t\t{\n\t// \t\t\tthis.settingsPopup.close();\n\t// \t\t}\n\t// \t}\n\t// }\n\n\tproposeTime(params = {})\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\n\t\tlet\n\t\t\tcurTimestamp = Math.round(this.selector.getDateFrom().getTime() / (this.accuracy * 1000)) * this.accuracy * 1000,\n\t\t\tcurDate = new Date(curTimestamp),\n\t\t\tduration = this.selector.getDuration(),\n\t\t\tdata = [], k, i;\n\n\t\tcurDate.setSeconds(0,0);\n\t\tcurTimestamp = curDate.getTime();\n\n\t\tfor (k in this.accessibility)\n\t\t{\n\t\t\tif (this.accessibility.hasOwnProperty(k) && this.accessibility[k] && this.accessibility[k].length > 0)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < this.accessibility[k].length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (this.accessibility[k][i].toTimestampReal >= curTimestamp)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet item = Planner.prepareAccessibilityItem(this.accessibility[k][i]);\n\t\t\t\t\t\tif (item)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tdata.sort(function(a, b){return a.fromTimestamp - b.fromTimestamp});\n\n\t\tlet\n\t\t\tts = curTimestamp,\n\t\t\tcheckRes,\n\t\t\tdateFrom, dateTo, timeTo, timeFrom;\n\n\t\twhile (true)\n\t\t{\n\t\t\tdateFrom = new Date(ts);\n\t\t\tdateTo = new Date(ts + duration);\n\n\t\t\tif (!this.isOneDayScale())\n\t\t\t{\n\t\t\t\ttimeFrom = parseInt(dateFrom.getHours()) + dateFrom.getMinutes() / 60;\n\t\t\t\ttimeTo = parseInt(dateTo.getHours()) + dateTo.getMinutes() / 60;\n\t\t\t\tif (timeFrom <= this.shownScaleTimeFrom)\n\t\t\t\t{\n\t\t\t\t\tdateFrom.setHours(this.shownScaleTimeFrom, 0, 0, 0);\n\t\t\t\t\tts = dateFrom.getTime();\n\t\t\t\t\tdateTo = new Date(ts + duration);\n\t\t\t\t}\n\n\t\t\t\tif (timeTo >= this.shownScaleTimeTo)\n\t\t\t\t{\n\t\t\t\t\tdateFrom = new Date(ts + Util.getDayLength() - 1000); // next day\n\t\t\t\t\tdateFrom.setHours(this.shownScaleTimeFrom, 0, 0, 0);\n\t\t\t\t\tts = dateFrom.getTime();\n\t\t\t\t\tdateTo = new Date(ts + duration);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.fullDayMode)\n\t\t\t{\n\t\t\t\tdateFrom.setHours(0, 0, 0, 0);\n\t\t\t\tdateTo.setHours(0, 0, 0, 0);\n\t\t\t}\n\n\t\t\tcheckRes = this.checkTimePeriod(dateFrom, dateTo, data);\n\n\t\t\tif (checkRes === true)\n\t\t\t{\n\t\t\t\tif (dateTo.getTime() > this.scaleDateTo.getTime())\n\t\t\t\t{\n\t\t\t\t\tif ((dateTo.getTime() - this.scaleDateTo.getTime()) > this.proposeTimeLimit * Util.getDayLength()\n\t\t\t\t\t\t||\n\t\t\t\t\t\tparams.checkedFuture === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tPlanner.showNoResultNotification();\n\t\t\t\t\t}\n\t\t\t\t\telse if (params.checkedFuture !== true)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet scrollLeft = this.DOM.timelineFixedWrap.scrollLeft;\n\t\t\t\t\t\tthis.scaleDateTo = new Date(this.scaleDateTo.getTime() + Util.getDayLength() * this.proposeTimeLimit);\n\t\t\t\t\t\tthis.rebuild();\n\t\t\t\t\t\tthis.DOM.timelineFixedWrap.scrollLeft = scrollLeft;\n\n\t\t\t\t\t\tlet\n\t\t\t\t\t\t\tentry,\n\t\t\t\t\t\t\tentrieIds = [];\n\t\t\t\t\t\tfor (i = 0; i < this.entries.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentry = this.entries[i];\n\t\t\t\t\t\t\tentrieIds.push(entry.id);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// BX.onCustomEvent('OnCalendarPlannerScaleChanged', [{\n\t\t\t\t\t\t// \tfrom: Util.formatDate(this.loadedDataFrom),\n\t\t\t\t\t\t// \tto: Util.formatDate(loadedDataTo),\n\t\t\t\t\t\t// \tentrieIds: entrieIds,\n\t\t\t\t\t\t// \tentries: this.entries,\n\t\t\t\t\t\t// \tfocusSelector: true,\n\t\t\t\t\t\t// \tparams: {\n\t\t\t\t\t\t// \t\tcallback: function(){_this.ProposeTime({checkedFuture: true});}\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (this.fullDayMode)\n\t\t\t\t\t\tdateTo = new Date(dateTo.getTime() - Util.getDayLength());\n\n\t\t\t\t\tthis.selector.update({\n\t\t\t\t\t\tfrom: dateFrom,\n\t\t\t\t\t\tto:dateTo,\n\t\t\t\t\t\tupdateScaleType:false,\n\t\t\t\t\t\tupdateScaleLimits:true,\n\t\t\t\t\t\tanimation: true,\n\t\t\t\t\t\tfocus: true\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.emit('onDateChange', new BaseEvent({data: {\n\t\t\t\t\t\tdateFrom: dateFrom,\n\t\t\t\t\t\tdateTo: dateTo,\n\t\t\t\t\t\tfullDay: this.fullDayMode\n\t\t\t\t\t}}));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse if (checkRes && checkRes.toTimestampReal)\n\t\t\t{\n\t\t\t\tts = checkRes.toTimestampReal;\n\t\t\t\tif (this.fullDayMode)\n\t\t\t\t{\n\t\t\t\t\tlet dt = new Date(ts + Util.getDayLength() - 1000); // next day\n\t\t\t\t\tdt.setHours(0, 0, 0, 0);\n\t\t\t\t\tts = dt.getTime();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckTimePeriod(fromDate, toDate, data)\n\t{\n\t\tlet\n\t\t\tresult = true,\n\t\t\tentry,\n\t\t\tfromTimestamp = fromDate.getTime(),\n\t\t\ttoTimestamp = toDate.getTime(),\n\t\t\tcacheKey = fromTimestamp + '_' + toTimestamp,\n\t\t\taccuracy = 60 * 1000, // 1min\n\t\t\titem, i;\n\n\t\tif (Type.isArray(data))\n\t\t{\n\t\t\tfor (i = 0; i < data.length; i++)\n\t\t\t{\n\t\t\t\titem = data[i];\n\t\t\t\tif (item.type && item.type === 'hr')\n\t\t\t\t\tcontinue;\n\n\t\t\t\tif ((item.fromTimestamp + accuracy) <= toTimestamp && ((item.toTimestampReal || item.toTimestamp) - accuracy) >= fromTimestamp)\n\t\t\t\t{\n\t\t\t\t\tresult = item;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (Type.isArray(this.entries))\n\t\t{\n\t\t\tlet\n\t\t\t\tentriesAccessibleIndex = {},\n\t\t\t\tselectorAccuracy = this.selectorAccuracy * 1000,\n\t\t\t\tentryId;\n\n\t\t\tif (this.checkTimeCache[cacheKey] !== undefined)\n\t\t\t{\n\t\t\t\tresult = this.checkTimeCache[cacheKey];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tfor (entryId in this.accessibility)\n\t\t\t\t{\n\t\t\t\t\tif (this.accessibility.hasOwnProperty(entryId))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.selectMode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentry = this.entries.find(function(el){return parseInt(el.id) === parseInt(entryId);});\n\t\t\t\t\t\t\tif (entry && !entry.selected)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tentriesAccessibleIndex[entryId] = true;\n\t\t\t\t\t\tif (Type.isArray(this.accessibility[entryId]))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (i = 0; i < this.accessibility[entryId].length; i++)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\titem = this.accessibility[entryId][i];\n\t\t\t\t\t\t\t\tif (item.type && item.type === 'hr')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif ((item.fromTimestamp + selectorAccuracy) <= toTimestamp && ((item.toTimestampReal || item.toTimestamp) - selectorAccuracy) >= fromTimestamp)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tentriesAccessibleIndex[entryId] = false;\n\t\t\t\t\t\t\t\t\tresult = item;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// for (i = 0; i < this.entries.length; i++)\n\t\t\t\t// {\n\t\t\t\t// \tif (entriesAccessibleIndex[this.entries[i].id] !== undefined)\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.entries[i].currentStatus = !!entriesAccessibleIndex[this.entries[i].id];\n\t\t\t\t// \t}\n\t\t\t\t// \telse\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.entries[i].currentStatus = true;\n\t\t\t\t// \t}\n\t\t\t\t// }\n\n\t\t\t\tthis.checkTimeCache[cacheKey] = result;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tclearCacheTime()\n\t{\n\t\tthis.checkTimeCache = {};\n\t}\n\n\tcheckEntryTimePeriod(entry, fromDate, toDate)\n\t{\n\t\tlet data = [], i;\n\t\tif (entry && entry.id && BX.type.isArray(this.accessibility[entry.id]))\n\t\t{\n\t\t\tfor (i = 0; i < this.accessibility[entry.id].length; i++)\n\t\t\t{\n\t\t\t\tlet item = Planner.prepareAccessibilityItem(this.accessibility[entry.id][i]);\n\t\t\t\tif (item)\n\t\t\t\t{\n\t\t\t\t\tdata.push(item);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.checkTimePeriod(fromDate, toDate, data) === true;\n\t}\n\n\tshowSettingsPopup()\n\t{\n\t\tlet\n\t\t\tsettingsDialogCont = BX.create('DIV', {props: {className: 'calendar-planner-settings-popup'}}),\n\t\t\tscaleRow = settingsDialogCont.appendChild(BX.create('DIV', {props: {className: 'calendar-planner-settings-row'}, html: '<i>' + Loc.getMessage('EC_PL_SETTINGS_SCALE') + ':</i>'})),\n\t\t\tscaleWrap = scaleRow.appendChild(BX.create('span', {props: {className: 'calendar-planner-option-container'}}));\n\n\t\tif (this.fullDayMode)\n\t\t{\n\t\t\tscaleRow.title = Loc.getMessage('EC_PL_SETTINGS_SCALE_READONLY_TITLE');\n\t\t\tDom.addClass(scaleRow, 'calendar-planner-option-container-disabled');\n\t\t}\n\n\t\tthis.scaleTypes.forEach((scale)=>{\n\t\t\tscaleWrap.appendChild(Tag.render`<span class=\"calendar-planner-option-tab ${(scale === this.scaleType ? ' calendar-planner-option-tab-active' : '')}\" data-bx-planner-scale=\"${scale}\">${Loc.getMessage('EC_PL_SETTINGS_SCALE_' + scale.toUpperCase())}</span>`);\n\t\t});\n\n\n\t\t// Create and show settings popup\n\t\tlet popup = PopupWindowManager.create(\n\t\t\tthis.id + \"-settings-popup\",\n\t\t\tthis.DOM.settingsButton,\n\t\t\t{\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: -1,\n\t\t\t\toffsetLeft: 7,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: settingsDialogCont,\n\t\t\t\tzIndex: 4000,\n\t\t\t\tangle: {postion: 'top'},\n\t\t\t\tcacheable: false\n\t\t\t});\n\t\tpopup.show(true);\n\n\t\tEvent.bind(scaleWrap, 'click', (e) => {\n\t\t\tif (!this.fullDayMode)\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tnodeTarget = e.target || e.srcElement,\n\t\t\t\t\tscale = nodeTarget && nodeTarget.getAttribute && nodeTarget.getAttribute('data-bx-planner-scale');\n\n\t\t\t\tif (scale)\n\t\t\t\t{\n\t\t\t\t\tthis.changeScaleType(scale);\n\t\t\t\t\tpopup.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tchangeScaleType(scaleType)\n\t{\n\t\tif (scaleType !== this.scaleType)\n\t\t{\n\t\t\tthis.setScaleType(scaleType);\n\t\t\tthis.rebuild();\n\t\t\tthis.selector.focus(true, 300);\n\t\t}\n\t}\n\n\tsetFullDayMode(fullDayMode)\n\t{\n\t\tif (fullDayMode !== this.fullDayMode)\n\t\t{\n\t\t\tthis.fullDayMode = fullDayMode;\n\t\t\tif (fullDayMode && !this.isOneDayScale())\n\t\t\t{\n\t\t\t\tthis.savedScaleType = this.scaleType;\n\t\t\t\tthis.changeScaleType('1day');\n\t\t\t}\n\t\t\telse if (!fullDayMode && this.isOneDayScale() && this.savedScaleType)\n\t\t\t{\n\t\t\t\tthis.changeScaleType(this.savedScaleType);\n\t\t\t\tthis.savedScaleType = null;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic showNoResultNotification()\n\t{\n\t\talert(Loc.getMessage('EC_PL_PROPOSE_NO_RESULT'));\n\t}\n\n\tshowProposeControl()\n\t{\n\t\tif (!this.DOM.proposeTimeButton)\n\t\t{\n\t\t\tthis.DOM.proposeTimeButton = this.DOM.mainWrap.appendChild(BX.create(\"DIV\", {\n\t\t\t\tprops: {className: 'calendar-planner-time-arrow-right'},\n\t\t\t\thtml: '<span class=\"calendar-planner-time-arrow-right-text\">' + Loc.getMessage('EC_PL_PROPOSE') + '</span><span class=\"calendar-planner-time-arrow-right-item\"></span>'\n\t\t\t}));\n\t\t\tEvent.bind(this.DOM.proposeTimeButton, 'click', this.proposeTime.bind(this));\n\t\t}\n\t\tthis.DOM.proposeTimeButton.style.display = \"block\";\n\t\tthis.DOM.proposeTimeButton.style.top = (this.DOM.timelineDataWrap.offsetTop + this.DOM.timelineDataWrap.offsetHeight / 2 - 16) + \"px\";\n\t}\n\n\thideProposeControl()\n\t{\n\t\tif (this.DOM.proposeTimeButton)\n\t\t{\n\t\t\tthis.DOM.proposeTimeButton.style.display = \"none\";\n\t\t}\n\t}\n\n\tmouseMoveHandler(e)\n\t{\n\t\tlet\n\t\t\ti, nodes,\n\t\t\tentryUid, parentTarget,\n\t\t\tprevEntry,\n\t\t\tmainContWrap = this.DOM.mainWrap,\n\t\t\ttarget = e.target || e.srcElement;\n\n\t\tentryUid = target.getAttribute('data-bx-planner-entry');\n\t\tif (!entryUid)\n\t\t{\n\t\t\tparentTarget = BX.findParent(target,\n\t\t\t\tfunction(node)\n\t\t\t\t{\n\t\t\t\t\tif (node == mainContWrap ||\n\t\t\t\t\t\tnode.getAttribute && node.getAttribute('data-bx-planner-entry')\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmainContWrap\n\t\t\t);\n\n\t\t\tif (parentTarget)\n\t\t\t{\n\t\t\t\tentryUid = target.getAttribute('data-bx-planner-entry')\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.hoverRow, 'show');\n\t\t\t\tnodes = this.selector.controlWrap.querySelectorAll('.calendar-planner-selector-control-row.hover');\n\t\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(nodes[i], 'hover');\n\t\t\t\t}\n\t\t\t\tprevEntry = this.getEntryByUniqueId(this.howerEntryId);\n\t\t\t\tif (prevEntry && prevEntry.selectWrap)\n\t\t\t\t{\n\t\t\t\t\tprevEntry.selectWrap.style.opacity = 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (entryUid)\n\t\t{\n\t\t\tif (this.howerEntryId !== entryUid)\n\t\t\t{\n\t\t\t\tthis.howerEntryId = entryUid;\n\t\t\t\tlet entry = this.getEntryByUniqueId(entryUid);\n\t\t\t\tif (entry)\n\t\t\t\t{\n\t\t\t\t\tlet top = parseInt(entry.dataRowWrap.offsetTop);\n\t\t\t\t\tDom.addClass(this.hoverRow, 'show');\n\t\t\t\t\tthis.hoverRow.style.top = (top + 36) + 'px';\n\t\t\t\t\tthis.hoverRow.style.width = (parseInt(this.DOM.mainWrap.offsetWidth) + 5) + 'px';\n\n\t\t\t\t\tif (entry.selectorControlWrap)\n\t\t\t\t\t{\n\t\t\t\t\t\tnodes = this.selector.controlWrap.querySelectorAll('.calendar-planner-selector-control-row.hover');\n\t\t\t\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(nodes[i], 'hover');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tDom.addClass(entry.selectorControlWrap, 'hover');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tshowLoader()\n\t{\n\t\tthis.hideLoader();\n\t\tthis.DOM.loader = this.DOM.mainWrap.appendChild(Util.getLoader(50));\n\t\tDom.addClass(this.DOM.loader, 'calendar-planner-main-loader');\n\t}\n\n\thideLoader()\n\t{\n\t\tif(Type.isDomNode(this.DOM.loader))\n\t\t{\n\t\t\tDom.remove(this.DOM.loader);\n\t\t}\n\t}\n}\n"],"names":["Selector","params","Date","setEventNamespace","selectMode","getPosByDate","getDateByPos","getPosDateMap","getTimelineWidth","getScaleInfo","useAnimation","DOM","timelineWrap","render","wrap","Tag","ondrag","BX","False","ondragstart","titleNode","result","controlWrap","appendChild","Type","isPlainObject","updateScaleType","updateScaleLimits","animation","from","isDate","parseDate","currentDateFrom","to","currentDateTo","fullDay","undefined","currentFullDay","getTime","Util","getDayLength","setHours","show","focus","alignCenter","style","display","fromPos","toPos","width","left","transit","toX","triggerChangeEvents","checkStatus","selectorIsDraged","selectorRoundedPos","selectorStartLeft","parseInt","selectorStartScrollLeft","scrollLeft","Dom","addClass","document","body","x","selectorWidth","pos","roundedPos","roundPos","checkedPos","checkPosition","showTitle","hideTitle","setValue","selectorIsResized","selectorStartWidth","toDate","timeTo","rightPos","Math","min","fullDayMode","getHours","round","getMinutes","shownScaleTimeFrom","shownScaleTimeTo","fromDate","formatDate","selectorRoundedRightPos","selectorPos","lastFromDate","lastToDate","emit","BaseEvent","data","dateFrom","dateTo","status","selectorIsFree","removeClass","max","scaleInfo","shownTimeFrom","shownTimeTo","type","timeFrom","scaleTimeFrom","scaleTimeTo","getDay","abs","fromX","offsetWidth","stop","easing","duration","start","finish","transition","makeEaseOut","transitions","quart","step","state","complete","setTimeout","animate","selectorTitle","getTitleNode","selector","timelineWidth","innerHTML","date","format","removeAttribute","formatTime","lastTouchedEntry","entriesListWidth","compactMode","selectorTitleLeft","selectorTitleTop","timelineDataCont","offsetTop","top","selectorHideTimeout","clearTimeout","opacity","quad","timeoutName","selectorIndex","timeout","focusTimeout","screenDelta","selectorLeft","viewWidth","viewLeft","viewRight","newScrollLeft","parseFloat","EventEmitter","Planner","h","y","q","n","config","id","userId","Loc","getMessage","SCALE_TIME_FORMAT","isAmPmMode","entriesIndex","Map","setConfig","hideAnimation","built","build","bindEventHandlers","resizePlannerWidth","buildTimeline","adjustWidth","timelineInnerWrap","readonly","mainWrap","entriesOuterWrap","height","adjustHeight","shown","setScaleType","scaleType","showTimelineDayTitle","compactHeight","isOneDayScale","minHeight","selectEntriesMode","isInteger","SCALE_OFFSET_BEFORE","SCALE_OFFSET_AFTER","maxTimelineSize","minEntryRows","MIN_ENTRY_ROWS","maxEntryRows","MAX_ENTRY_ROWS","minWidth","isArray","workTime","extendScaleTime","weekHolidays","yearHolidays","accuracy","clickSelectorScaleAccuracy","selectorAccuracy","timelineCellWidth","showEntiesHeader","showEntryName","timelineCellWidthOrig","allowAdjustCellWidth","adjustCellWidth","setScaleLimits","scaleDateFrom","scaleDateTo","isString","loadedDataFrom","loadedDataTo","fromTime","toTime","isNaN","rebuildDebounce","scaleSize","isDomNode","TypeError","create","props","className","preventSelection","entrieListHeader","entriesListTitleCounter","text","entrieListWrap","timelineFixedWrap","setAttribute","timelineScaleWrap","timelineDataWrap","accessibilityWrap","bind","posDateMap","scale","getWrap","subscribe","handleSelectorChanges","doCheckSelectorStatus","selectedEntriesWrap","hoverRow","Event","mouseMoveHandler","settingsButton","showSettingsPopup","clearCache","lastTimelineKey","getTimelineShownKey","clean","scaleData","getScaleData","outerDayCont","dayTitle","cont","i","length","scaleDayTitles","daystamp","html","timestamp","dayStart","title","cell","mapDatePosRes","mapDatePos","timelineOffset","_this","_checkRebuildTimeoutCount","rebuildTimeout","rebuild","FocusSelector","checkRebuildTimeout","REBUILD_DELAY","Runtime","debounce","update","entries","accessibility","updateSelector","selectorParams","clearCacheTime","ts","scaleFrom","scaleTo","time","dayStamp","curDayStamp","push","value","entry","hidden","fromTimestamp","toTimestamp","toTimestampReal","node","name","rowWrap","showMoreUsersLink","events","showMoreUsers","attrs","uid","entryStatusMap","toUpperCase","avatar","src","href","url","entriesResourceListWrap","isNodeInDom","dataRowWrap","selectorControlWrap","selected","selectEntryRow","entriesDataRowMap","set","forEach","item","prepareAccessibilityItem","addAccessibilityItem","selectWrap","isParentForNode","entryUniqueId","find","handleClick","proxy","handleMousedown","handleMousemove","handleMouseup","mouseWheelTimelineHandler","e","window","event","clickMousePos","getMousePos","nodeTarget","target","srcElement","accuracyMouse","hasClass","getEntryByUniqueId","getAttribute","isEntrySelected","deSelectEntryRow","onCustomEvent","plannerId","timeline","findTarget","mouseDownMousePos","mouseDown","startMousePos","startResize","startMove","startScrollTimeline","isDragged","endMove","endResize","timelineIsDraged","endScrollTimeline","checkTimelineScroll","mousePos","move","resize","scrollTimeline","delta","deltaY","detail","wheelDelta","newScroll","PreventDefault","minScroll","scrollStep","maxScroll","scrollWidth","expandTimeline","EXPAND_DELAY","timelineStartScrollLeft","nodeMetaType","parentCont","findParent","pageX","pageY","clientX","clientY","documentElement","clientLeft","scrollTop","clientTop","scaleTypes","includes","getScaleSize","datePosMap","j","tsi","xi","tsj","xj","cellWidth","substeps","posAccuracy","offsetLeft","curInd","deltaTs","end","newHeight","offsetHeight","currentHeight","resizePlannerHeight","resizeAnimation","timelineDataContHeight","proposeTimeButton","direction","loadedTimelineSize","oldScaleDateFrom","EXPAND_OFFSET","limitScaleSizeMode","oldDateTo","sort","a","b","cutData","usersCount","cutAmount","dispDataCount","cutDataTitle","ind","getEntryUniqueId","accData","displayEntryRow","join","key","hasOwnProperty","get","setFullDayMode","floor","ceil","getData","selectorStatus","checkTimePeriod","setSelectorStatus","hideProposeControl","showProposeControl","curTimestamp","getDateFrom","curDate","getDuration","k","setSeconds","checkRes","proposeTimeLimit","checkedFuture","showNoResultNotification","entrieIds","dt","cacheKey","entryId","checkTimeCache","el","entriesAccessibleIndex","settingsDialogCont","scaleRow","scaleWrap","popup","PopupWindowManager","autoHide","closeByEsc","lightShadow","content","zIndex","angle","postion","cacheable","changeScaleType","close","savedScaleType","proposeTime","nodes","entryUid","parentTarget","prevEntry","mainContWrap","querySelectorAll","howerEntryId","hideLoader","loader","getLoader","remove","toReal","hour","map","alert"],"mappings":"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KAAKqC,iBAApB,EAAuC4H,EAAE,GAAG,IAA5C,CADK,GAEL,EAFH;;CAID,YAAI,KAAKrG,aAAL,MAAyBwG,IAAI,IAAI/L,QAAR,IAAoB+L,IAAI,GAAG5N,MAAxD,EACA;CACC6N,UAAAA,QAAQ,GAAG1R,EAAE,CAACoH,IAAH,CAAQC,MAAR,CAAe,OAAf,EAAwBiK,EAAE,GAAG,IAA7B,CAAX;CACA,eAAKhC,SAAL,CAAesC,IAAf,CAAoB;CACnB9B,YAAAA,QAAQ,EAAE4B,QADS;CAEnB1B,YAAAA,SAAS,EAAEsB,EAFQ;CAGnBO,YAAAA,KAAK,EAAEP,EAHY;CAInBpB,YAAAA,KAAK,EAAEA,KAJY;CAKnBD,YAAAA,QAAQ,EAAE0B,WAAW,KAAKD;CALP,WAApB;CAOAC,UAAAA,WAAW,GAAGD,QAAd;CACA;CACD;;CAED,aAAO,KAAKpC,SAAZ;CACA;CAntBF;CAAA;CAAA,oCAstBC;CACC,aAAO,KAAKxE,SAAL,KAAmB,MAA1B;CACA;CAED;;;;;;;;CAQA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;C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EAAX;CACA,YAAIC,cAAc,GAAG,KAAKC,eAAL,CAAqBpW,IAAI,CAACC,QAA1B,EAAoCD,IAAI,CAACE,MAAzC,MAAqD,IAA1E;CACA,aAAKgC,QAAL,CAAcmU,iBAAd,CAAgCF,cAAhC;;CACA,YAAIA,cAAJ,EACA;CACCtY,UAAAA,aAAG,CAACwC,WAAJ,CAAgB,KAAK1F,GAAL,CAAS8K,QAAzB,EAAmC,mCAAnC;CACA,eAAK6Q,kBAAL;CACA,SAJD,MAMA;CACCzY,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAKnD,GAAL,CAAS8K,QAAtB,EAAgC,mCAAhC;CACA,eAAK8Q,kBAAL;CACA;CACD;CACD,KAljEF;CAqjEC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CAEA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;C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"}