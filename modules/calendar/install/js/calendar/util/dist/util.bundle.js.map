{"version":3,"file":"util.bundle.js","sources":["../../../../../../main/install/js/main/date/main.date.js","../src/util.js"],"sourcesContent":[";(function(window)\n{\n\t/****************** ATTENTION *******************************\n\t * Please do not use Bitrix CoreJS in this class.\n\t * This class can be called on page without Bitrix Framework\n\t*************************************************************/\n\n\tif (!window.BX)\n\t{\n\t\twindow.BX = {};\n\t}\n\n\tif (!window.BX.Main)\n\t{\n\t\twindow.BX.Main = {};\n\t}\n\telse if (window.BX.Main.Date)\n\t{\n\t\treturn;\n\t}\n\n\tvar BX = window.BX;\n\n\tBX.Main.Date = {\n\n\t\tAM_PM_MODE: {\n\t\t\tUPPER: 1,\n\t\t\tLOWER: 2,\n\t\t\tNONE: false\n\t\t},\n\n\t\tformat: function(format, timestamp, now, utc)\n\t\t{\n\t\t\tvar _this = this;\n\n\t\t\t/*\n\t\t\tPHP to Javascript:\n\t\t\t\ttime() = new Date()\n\t\t\t\tmktime(...) = new Date(...)\n\t\t\t\tgmmktime(...) = new Date(Date.UTC(...))\n\t\t\t\tmktime(0,0,0, 1, 1, 1970) != 0          new Date(1970,0,1).getTime() != 0\n\t\t\t\tgmmktime(0,0,0, 1, 1, 1970) == 0        new Date(Date.UTC(1970,0,1)).getTime() == 0\n\t\t\t\tdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\")\n\t\t\t\tgmdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\", null, null, true);\n\t\t\t*/\n\t\t\tvar date = Utils.isDate(timestamp) ? new Date(timestamp.getTime()) : Utils.isNumber(timestamp) ? new Date(timestamp * 1000) : new Date();\n\t\t\tvar nowDate = Utils.isDate(now) ? new Date(now.getTime()) : Utils.isNumber(now) ? new Date(now * 1000) : new Date();\n\t\t\tvar isUTC = !!utc;\n\n\t\t\tif (Utils.isArray(format))\n\t\t\t\treturn _formatDateInterval(format, date, nowDate, isUTC);\n\t\t\telse if (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\tvar replaceMap = (format.match(/{{([^{}]*)}}/g) || []).map(function(x) { return (x.match(/[^{}]+/) || [''])[0]; });\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tformat = format.replace(\"{{\"+element+\"}}\", \"{{\"+index+\"}}\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar formatRegex = /\\\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;\n\n\t\t\tvar dateFormats = {\n\t\t\t\td : function() {\n\t\t\t\t\t// Day of the month 01 to 31\n\t\t\t\t\treturn Utils.strPadLeft(getDate(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tD : function() {\n\t\t\t\t\t//Mon through Sun\n\t\t\t\t\treturn _this._getMessage(\"DOW_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tj : function() {\n\t\t\t\t\t//Day of the month 1 to 31\n\t\t\t\t\treturn getDate(date);\n\t\t\t\t},\n\n\t\t\t\tl : function() {\n\t\t\t\t\t//Sunday through Saturday\n\t\t\t\t\treturn _this._getMessage(\"DAY_OF_WEEK_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tN : function() {\n\t\t\t\t\t//1 (for Monday) through 7 (for Sunday)\n\t\t\t\t\treturn getDay(date) || 7;\n\t\t\t\t},\n\n\t\t\t\tS : function() {\n\t\t\t\t\t//st, nd, rd or th. Works well with j\n\t\t\t\t\tif (getDate(date) % 10 == 1 && getDate(date) != 11)\n\t\t\t\t\t\treturn \"st\";\n\t\t\t\t\telse if (getDate(date) % 10 == 2 && getDate(date) != 12)\n\t\t\t\t\t\treturn \"nd\";\n\t\t\t\t\telse if (getDate(date) % 10 == 3 && getDate(date) != 13)\n\t\t\t\t\t\treturn \"rd\";\n\t\t\t\t\telse\n\t\t\t\t\t\treturn \"th\";\n\t\t\t\t},\n\n\t\t\t\tw : function() {\n\t\t\t\t\t//0 (for Sunday) through 6 (for Saturday)\n\t\t\t\t\treturn getDay(date);\n\t\t\t\t},\n\n\t\t\t\tz : function() {\n\t\t\t\t\t//0 through 365\n\t\t\t\t\tvar firstDay = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar currentDay = new Date(getFullYear(date), getMonth(date), getDate(date));\n\t\t\t\t\treturn Math.ceil( (currentDay - firstDay) / (24 * 3600 * 1000) );\n\t\t\t\t},\n\n\t\t\t\tW : function() {\n\t\t\t\t\t//ISO-8601 week number of year\n\t\t\t\t\tvar newDate  = new Date(date.getTime());\n\t\t\t\t\tvar dayNumber   = (getDay(date) + 6) % 7;\n\t\t\t\t\tsetDate(newDate, getDate(newDate) - dayNumber + 3);\n\t\t\t\t\tvar firstThursday = newDate.getTime();\n\t\t\t\t\tsetMonth(newDate, 0, 1);\n\t\t\t\t\tif (getDay(newDate) != 4)\n\t\t\t\t\t\tsetMonth(newDate, 0, 1 + ((4 - getDay(newDate)) + 7) % 7);\n\t\t\t\t\tvar weekNumber = 1 + Math.ceil((firstThursday - newDate) / (7 * 24 * 3600 * 1000));\n\t\t\t\t\treturn Utils.strPadLeft(weekNumber.toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tF : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1) + \"_S\");\n\t\t\t\t},\n\n\t\t\t\tf : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tm : function() {\n\t\t\t\t\t//Numeric representation of a month 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getMonth(date) + 1).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tM : function() {\n\t\t\t\t\t//A short textual representation of a month, three letters Jan through Dec\n\t\t\t\t\treturn _this._getMessage(\"MON_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tn : function() {\n\t\t\t\t\t//Numeric representation of a month 1 through 12\n\t\t\t\t\treturn getMonth(date) + 1;\n\t\t\t\t},\n\n\t\t\t\tt : function() {\n\t\t\t\t\t//Number of days in the given month 28 through 31\n\t\t\t\t\tvar lastMonthDay = isUTC ? new Date(Date.UTC(getFullYear(date), getMonth(date) + 1, 0)) : new Date(getFullYear(date), getMonth(date) + 1, 0);\n\t\t\t\t\treturn getDate(lastMonthDay);\n\t\t\t\t},\n\n\t\t\t\tL : function() {\n\t\t\t\t\t//1 if it is a leap year, 0 otherwise.\n\t\t\t\t\tvar year = getFullYear(date);\n\t\t\t\t\treturn (year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 1 : 0);\n\t\t\t\t},\n\n\t\t\t\to : function() {\n\t\t\t\t\t//ISO-8601 year number\n\t\t\t\t\tvar correctDate  = new Date(date.getTime());\n\t\t\t\t\tsetDate(correctDate, getDate(correctDate) - ((getDay(date) + 6) % 7) + 3);\n\t\t\t\t\treturn getFullYear(correctDate);\n\t\t\t\t},\n\n\t\t\t\tY : function() {\n\t\t\t\t\t//A full numeric representation of a year, 4 digits\n\t\t\t\t\treturn getFullYear(date);\n\t\t\t\t},\n\n\t\t\t\ty : function() {\n\t\t\t\t\t//A two digit representation of a year\n\t\t\t\t\treturn getFullYear(date).toString().slice(2);\n\t\t\t\t},\n\n\t\t\t\ta : function() {\n\t\t\t\t\t//am or pm\n\t\t\t\t\treturn getHours(date) > 11 ? \"pm\" : \"am\";\n\t\t\t\t},\n\n\t\t\t\tA : function() {\n\t\t\t\t\t//AM or PM\n\t\t\t\t\treturn getHours(date) > 11 ? \"PM\" : \"AM\";\n\t\t\t\t},\n\n\t\t\t\tB : function() {\n\t\t\t\t\t//000 through 999\n\t\t\t\t\tvar swatch = ((date.getUTCHours() + 1) % 24) + date.getUTCMinutes() / 60 + date.getUTCSeconds() / 3600;\n\t\t\t\t\treturn Utils.strPadLeft(Math.floor(swatch * 1000 / 24).toString(), 3, \"0\");\n\t\t\t\t},\n\n\t\t\t\tg : function() {\n\t\t\t\t\t//12-hour format of an hour without leading zeros 1 through 12\n\t\t\t\t\treturn getHours(date) % 12 || 12;\n\t\t\t\t},\n\n\t\t\t\tG : function() {\n\t\t\t\t\t//24-hour format of an hour without leading zeros 0 through 23\n\t\t\t\t\treturn getHours(date);\n\t\t\t\t},\n\n\t\t\t\th : function() {\n\t\t\t\t\t//12-hour format of an hour with leading zeros 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getHours(date) % 12 || 12).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tH : function() {\n\t\t\t\t\t//24-hour format of an hour with leading zeros 00 through 23\n\t\t\t\t\treturn Utils.strPadLeft(getHours(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ti : function() {\n\t\t\t\t\t//Minutes with leading zeros 00 to 59\n\t\t\t\t\treturn Utils.strPadLeft(getMinutes(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ts : function() {\n\t\t\t\t\t//Seconds, with leading zeros 00 through 59\n\t\t\t\t\treturn Utils.strPadLeft(getSeconds(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tu : function() {\n\t\t\t\t\t//Microseconds\n\t\t\t\t\treturn Utils.strPadLeft((getMilliseconds(date) * 1000).toString(), 6, \"0\");\n\t\t\t\t},\n\n\t\t\t\te : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"UTC\";\n\t\t\t\t\treturn \"\";\n\t\t\t\t},\n\n\t\t\t\tI : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t//Whether or not the date is in daylight saving time 1 if Daylight Saving Time, 0 otherwise\n\t\t\t\t\tvar firstJanuary = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJanuaryUTC = Date.UTC(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJuly = new Date(getFullYear(date), 6, 0);\n\t\t\t\t\tvar firstJulyUTC = Date.UTC(getFullYear(date), 6, 0);\n\t\t\t\t\treturn 0 + ((firstJanuary - firstJanuaryUTC) !== (firstJuly - firstJulyUTC));\n\t\t\t\t},\n\n\t\t\t\tO : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+0000\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) in hours +0200\n\t\t\t\t\tvar timezoneOffset = date.getTimezoneOffset();\n\t\t\t\t\tvar timezoneOffsetAbs = Math.abs(timezoneOffset);\n\t\t\t\t\treturn (timezoneOffset > 0 ? \"-\" : \"+\") + Utils.strPadLeft((Math.floor(timezoneOffsetAbs / 60) * 100 + timezoneOffsetAbs % 60).toString(), 4, \"0\");\n\t\t\t\t},\n\n\t\t\t\tP : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+00:00\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) with colon between hours and minutes +02:00\n\t\t\t\t\tvar difference = this.O();\n\t\t\t\t\treturn difference.substr(0, 3) + \":\" + difference.substr(3);\n\t\t\t\t},\n\n\t\t\t\tZ : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t//Timezone offset in seconds. The offset for timezones west of UTC is always negative,\n\t\t\t\t\t//and for those east of UTC is always positive.\n\t\t\t\t\treturn -date.getTimezoneOffset() * 60;\n\t\t\t\t},\n\n\t\t\t\tc : function() {\n\t\t\t\t\t//ISO 8601 date\n\t\t\t\t\treturn \"Y-m-d\\\\TH:i:sP\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tr : function() {\n\t\t\t\t\t//RFC 2822 formatted date\n\t\t\t\t\treturn \"D, d M Y H:i:s O\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tU : function() {\n\t\t\t\t\t//Seconds since the Unix Epoch\n\t\t\t\t\treturn Math.floor(date.getTime() / 1000);\n\t\t\t\t},\n\n\t\t\t\tsago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_SECOND_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 1000));\n\t\t\t\t},\n\n\t\t\t\tiago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tidiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tisago : function() {\n\t\t\t\t\tvar minutesAgo = intval((nowDate - date) / 60 / 1000);\n\t\t\t\t\tvar result = _formatDateMessage(minutesAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_MOD_OTHER\"\n\t\t\t\t\t});\n\n\t\t\t\t\tresult += \" \";\n\n\t\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000) - (minutesAgo * 60);\n\t\t\t\t\tresult += _formatDateMessage(secondsAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\n\t\t\t\tishort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MINUTE_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tHago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_HOUR_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tyesterday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_YESTERDAY\");\n\t\t\t\t},\n\n\t\t\t\ttoday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TODAY\");\n\t\t\t\t},\n\n\t\t\t\ttommorow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\ttomorrow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\tdago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tddiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tdshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_DAY_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 1000));\n\t\t\t\t},\n\n\t\t\t\tmago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MONTH_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000));\n\t\t\t\t},\n\n\t\t\t\tYago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYshort : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_SHORT_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_SHORT_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_SHORT_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_SHORT_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_SHORT_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_SHORT_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tx : function() {\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\treturn _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow, \"+timeFormat],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t\t\t\t[\"s\", \"sago\"],\n\t\t\t\t\t\t[\"i\", \"iago\"],\n\t\t\t\t\t\t[\"today\", \"today, \"+timeFormat],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday, \"+timeFormat],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")]\n\t\t\t\t\t], date, nowDate, isUTC);\n\t\t\t\t},\n\n\t\t\t\tX : function() {\n\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\tvar day = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow\"],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))],\n\t\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tvar time = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", timeFormat],\n\t\t\t\t\t\t[\"today\", timeFormat],\n\t\t\t\t\t\t[\"yesterday\", timeFormat],\n\t\t\t\t\t\t[\"\", \"\"]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tif (time.length > 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_AT_TIME\").replace(/#DAY#/g, day).replace(/#TIME#/g, time);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn day;\n\t\t\t\t},\n\n\t\t\t\tQ : function() {\n\t\t\t\t\tvar daysAgo = intval((nowDate - date) / 60 / 60 / 24 / 1000);\n\t\t\t\t\tif(daysAgo == 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_DIFF_1\").replace(/#VALUE#/g, 1);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn _this.format([ [\"d\", \"ddiff\"], [\"m\", \"mdiff\"], [\"\", \"Ydiff\"] ], date, nowDate);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar cutZeroTime = false;\n\t\t\tif (format[0] && format[0] == \"^\")\n\t\t\t{\n\t\t\t\tcutZeroTime = true;\n\t\t\t\tformat = format.substr(1);\n\t\t\t}\n\n\t\t\tvar result = format.replace(formatRegex, _replaceDateFormat);\n\n\t\t\tif (cutZeroTime)\n\t\t\t{\n\t\t\t\t/* \t15.04.12 13:00:00 => 15.04.12 13:00\n\t\t\t\t\t00:01:00 => 00:01\n\t\t\t\t\t4 may 00:00:00 => 4 may\n\t\t\t\t\t01-01-12 00:00 => 01-01-12\n\t\t\t\t*/\n\n\t\t\t\tresult = result.replace(/\\s*00:00:00\\s*/g, \"\").\n\t\t\t\t\t\t\t\treplace(/(\\d\\d:\\d\\d)(:00)/g, \"$1\").\n\t\t\t\t\t\t\t\treplace(/(\\s*00:00\\s*)(?!:)/g, \"\");\n\t\t\t}\n\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tresult = result.replace(\"{{\"+index+\"}}\", element);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t\tfunction _formatDateInterval(formats, date, nowDate, isUTC)\n\t\t\t{\n\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000);\n\t\t\t\tfor (var i = 0; i < formats.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar formatInterval = formats[i][0];\n\t\t\t\t\tvar formatValue = formats[i][1];\n\t\t\t\t\tvar match = null;\n\t\t\t\t\tif (formatInterval == \"s\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^s(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1]\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"i\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^i(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"H\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^H(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"d\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 31 *24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^d(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"m\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 365 * 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^m(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 31 * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"now\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (date.getTime() == nowDate.getTime())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"today\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"todayFuture\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = nowDate.getTime();\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"yesterday\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar yesterdayStart = isUTC ? new Date(Date.UTC(year, month, day-1, 0, 0, 0, 0)) : new Date(year, month, day-1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar yesterdayEnd = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= yesterdayStart && date < yesterdayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"tommorow\" || formatInterval == \"tomorrow\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar tomorrowStart = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar tomorrowEnd = isUTC ? new Date(Date.UTC(year, month, day+2, 0, 0, 0, 0)) : new Date(year, month, day+2, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= tomorrowStart && date < tomorrowEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"-\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 0)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//return formats.length > 0 ? _this.format(formats.pop()[1], date, nowDate, isUTC) : \"\";\n\t\t\t\treturn formats.length > 0 ? _this.format(formats[formats.length - 1][1], date, nowDate, isUTC) : \"\";\n\t\t\t}\n\n\t\t\tfunction getFullYear(date) { return isUTC ? date.getUTCFullYear() : date.getFullYear(); }\n\t\t\tfunction getDate(date) { return isUTC ? date.getUTCDate() : date.getDate(); }\n\t\t\tfunction getMonth(date) { return isUTC ? date.getUTCMonth() : date.getMonth(); }\n\t\t\tfunction getHours(date) { return isUTC ? date.getUTCHours() : date.getHours(); }\n\t\t\tfunction getMinutes(date) { return isUTC ? date.getUTCMinutes() : date.getMinutes(); }\n\t\t\tfunction getSeconds(date) { return isUTC ? date.getUTCSeconds() : date.getSeconds(); }\n\t\t\tfunction getMilliseconds(date) { return isUTC ? date.getUTCMilliseconds() : date.getMilliseconds(); }\n\t\t\tfunction getDay(date) { return isUTC ? date.getUTCDay() : date.getDay(); }\n\t\t\tfunction setDate(date, dayValue) { return isUTC ? date.setUTCDate(dayValue) : date.setDate(dayValue); }\n\t\t\tfunction setMonth(date, monthValue, dayValue) { return isUTC ? date.setUTCMonth(monthValue, dayValue) : date.setMonth(monthValue, dayValue); }\n\n\t\t\tfunction _formatDateMessage(value, messages)\n\t\t\t{\n\t\t\t\tvar val = value < 100 ? Math.abs(value) : Math.abs(value % 100);\n\t\t\t\tvar dec = val % 10;\n\t\t\t\tvar message = \"\";\n\n\t\t\t\tif(val == 0)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"0\"]);\n\t\t\t\telse if (val == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"1\"]);\n\t\t\t\telse if (val >= 10 && val <= 20)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"10_20\"]);\n\t\t\t\telse if (dec == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_1\"]);\n\t\t\t\telse if (2 <= dec && dec <= 4)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_2_4\"]);\n\t\t\t\telse\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_OTHER\"]);\n\n\t\t\t\treturn message.replace(/#VALUE#/g, value);\n\t\t\t}\n\n\t\t\tfunction _replaceDateFormat(match, matchFull)\n\t\t\t{\n\t\t\t\tif (dateFormats[match])\n\t\t\t\t\treturn dateFormats[match]();\n\t\t\t\telse\n\t\t\t\t\treturn matchFull;\n\t\t\t}\n\n\t\t\tfunction intval(number)\n\t\t\t{\n\t\t\t\treturn number >= 0 ? Math.floor(number) : Math.ceil(number);\n\t\t\t}\n\t\t},\n\n\t\tconvertBitrixFormat: function(format)\n\t\t{\n\t\t\tif (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\treturn format.replace(\"YYYY\", \"Y\")\t// 1999\n\t\t\t\t\t\t .replace(\"MMMM\", \"F\")\t// January - December\n\t\t\t\t\t\t .replace(\"MM\", \"m\")\t// 01 - 12\n\t\t\t\t\t\t .replace(\"M\", \"M\")\t// Jan - Dec\n\t\t\t\t\t\t .replace(\"DD\", \"d\")\t// 01 - 31\n\t\t\t\t\t\t .replace(\"G\", \"g\")\t//  1 - 12\n\t\t\t\t\t\t .replace(/GG/i, \"G\")\t//  0 - 23\n\t\t\t\t\t\t .replace(\"H\", \"h\")\t// 01 - 12\n\t\t\t\t\t\t .replace(/HH/i, \"H\")\t// 00 - 24\n\t\t\t\t\t\t .replace(\"MI\", \"i\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"SS\", \"s\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"TT\", \"A\")\t// AM - PM\n\t\t\t\t\t\t .replace(\"T\", \"a\");\t// am - pm\n\t\t},\n\n\t\tconvertToUTC: function(date)\n\t\t{\n\t\t\tif (!Utils.isDate(date))\n\t\t\t\treturn null;\n\n\t\t\treturn new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n\t\t},\n\n\t\t/**\n\t\t * Function creates and returns Javascript Date() object from server timestamp regardless of local browser (system) timezone.\n\t\t * For example can be used to convert timestamp from some exact date on server to the JS Date object with the same value.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {Date}\n\t\t */\n\t\tgetNewDate: function(timestamp)\n\t\t{\n\t\t\treturn new Date(this.getBrowserTimestamp(timestamp));\n\t\t},\n\n\t\t/**\n\t\t * Function transforms server timestamp (in sec) to javascript timestamp (calculated depend on local browser timezone offset). Returns timestamp in milliseconds.\n\t\t * Also see BX.Main.Date.getNewDate description.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetBrowserTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp * 1000).getTimezoneOffset() * 60;\n\t\t\treturn (parseInt(timestamp, 10) + parseInt(this._getMessage('SERVER_TZ_OFFSET')) + browserOffset) * 1000;\n\t\t},\n\n\t\t/**\n\t\t * Function transforms local browser timestamp (in ms) to server timestamp (calculated depend on local browser timezone offset). Returns timestamp in seconds.\n\t\t *\n\t\t * @param timestamp - timestamp in milliseconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetServerTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp).getTimezoneOffset() * 60;\n\t\t\treturn Math.round(timestamp / 1000 - (parseInt(this._getMessage('SERVER_TZ_OFFSET'), 10) + parseInt(browserOffset, 10)));\n\t\t},\n\n\t\tformatLastActivityDate: function(timestamp, now, utc)\n\t\t{\n\t\t\tvar ampm = this.isAmPmMode(true);\n\t\t\tvar timeFormat = (ampm === this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\tvar format = [\n\t\t\t   [\"tomorrow\", \"#01#\"+timeFormat],\n\t\t\t   [\"now\" , \"#02#\"],\n\t\t\t   [\"todayFuture\", \"#03#\"+timeFormat],\n\t\t\t   [\"yesterday\", \"#04#\"+timeFormat],\n\t\t\t   [\"-\", this.convertBitrixFormat(this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t   [\"s60\", \"sago\"],\n\t\t\t   [\"i60\", \"iago\"],\n\t\t\t   [\"H5\", \"Hago\"],\n\t\t\t   [\"H24\", \"#03#\"+timeFormat],\n\t\t\t   [\"d31\", \"dago\"],\n\t\t\t   [\"m12>1\", \"mago\"],\n\t\t\t   [\"m12>0\", \"dago\"],\n\t\t\t   [\"\", \"#05#\"]\n\t\t\t];\n\t\t\tvar formattedDate = this.format(format, timestamp, now, utc);\n\t\t\tvar match = null;\n\t\t\tif ((match = /^#(\\d+)#(.*)/.exec(formattedDate)) != null)\n\t\t\t{\n\t\t\t\tswitch (match[1])\n\t\t\t\t{\n\t\t\t\t\tcase \"01\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TOMORROW').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"02\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_NOW');\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"03\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TODAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"04\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_YESTERDAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"05\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_MORE_YEAR');\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tformattedDate = match[2];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formattedDate;\n\t\t},\n\n\t\tisAmPmMode: function(returnConst)\n\t\t{\n\t\t\tif (returnConst === true)\n\t\t\t{\n\t\t\t\treturn this._getMessage('AMPM_MODE');\n\t\t\t}\n\n\t\t\treturn this._getMessage('AMPM_MODE') !== false;\n\t\t},\n\n\t\t/**\n\t\t * The method is designed to replace the localization storage on sites without Bitrix Framework.\n\t\t *\n\t\t * @param message\n\t\t * @returns {*}\n\t\t * @private\n\t\t */\n\t\t_getMessage: function(message)\n\t\t{\n\t\t\treturn BX.message(message);\n\t\t},\n\n\t\t/**\n\t\t * The method used to parse date from string by given format.\n\t\t *\n\t\t * @param {string} str - date in given format\n\t\t * @param {boolean} isUTC - is date in UTC\n\t\t * @param {string} formatDate - format of the date without time\n\t\t * @param {string} formatDatetime - format of the date with time\n\t\t * @returns {Date|null} - returns Date object if string was parsed or null\n\t\t */\n\t\tparse: function(str, isUTC, formatDate, formatDatetime)\n\t\t{\n\t\t\tif (Utils.isNotEmptyString(str))\n\t\t\t{\n\t\t\t\tif (!formatDate)\n\t\t\t\t\tformatDate = this._getMessage('FORMAT_DATE');\n\t\t\t\tif (!formatDatetime)\n\t\t\t\t\tformatDatetime = this._getMessage('FORMAT_DATETIME');\n\n\t\t\t\tvar regMonths = '';\n\t\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t\t{\n\t\t\t\t\tregMonths = regMonths + '|' + this._getMessage('MON_'+i);\n\t\t\t\t}\n\n\t\t\t\tvar\n\t\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\t\taDate = str.match(expr),\n\t\t\t\t\taFormat = formatDate.match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\t\ti, cnt,\n\t\t\t\t\taDateArgs=[], aFormatArgs=[],\n\t\t\t\t\taResult={};\n\n\t\t\t\tif (!aDate)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif(aDate.length > aFormat.length)\n\t\t\t\t{\n\t\t\t\t\taFormat = formatDatetime.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aDate[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aFormat[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar m = Utils.array_search('MMMM', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tm = Utils.array_search('M', aFormatArgs);\n\t\t\t\t\tif (m > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tvar k = aFormatArgs[i].toUpperCase();\n\t\t\t\t\taResult[k] = k === 'T' || k === 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t\t}\n\n\t\t\t\tif(aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t\t{\n\t\t\t\t\tvar d = new Date();\n\n\t\t\t\t\tif(isUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\t\td.setUTCHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\t\td.setHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(\n\t\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar\n\t\t\t\t\t\t\t\tbPM = (aResult['T']||aResult['TT']||'am').toUpperCase() === 'PM',\n\t\t\t\t\t\t\t\th = parseInt(aResult['H']||aResult['G']||0, 10);\n\n\t\t\t\t\t\t\tif(bPM)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h + (h === 12 ? 0 : 12);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH']||aResult['GG']||0, 10);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\t\tif(isUTC)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn d;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetMonthIndex: function(month)\n\t\t{\n\t\t\tvar\n\t\t\t\ti,\n\t\t\t\tq = month.toUpperCase(),\n\t\t\t\twordMonthCut = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'],\n\t\t\t\twordMonth = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tif (q === this._getMessage('MON_'+i).toUpperCase()\n\t\t\t\t\t|| q === this._getMessage('MONTH_'+i).toUpperCase()\n\t\t\t\t\t|| q === wordMonthCut[i-1].toUpperCase()\n\t\t\t\t\t|| q === wordMonth[i-1].toUpperCase())\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn month;\n\t\t}\n\t};\n\n\t/**\n\t * @private\n\t */\n\tvar Utils = {\n\t\tisDate: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Date]\";\n\t\t},\n\t\tisNumber: function(item) {\n\t\t\treturn item === 0 ? true : (item ? (typeof (item) == \"number\" || item instanceof Number) : false);\n\t\t},\n\t\tisArray: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Array]\";\n\t\t},\n\t\tisString: function(item) {\n\t\t\treturn item === '' ? true : (item ? (typeof (item) == \"string\" || item instanceof String) : false);\n\t\t},\n\t\tisNotEmptyString: function(item) {\n\t\t\treturn this.isString(item) ? item.length > 0 : false;\n\t\t},\n\t\tstrPadLeft: function(input, padLength, padString)\n\t\t{\n\t\t\tvar i = input.length, q=padString.length;\n\t\t\tif (i >= padLength) return input;\n\n\t\t\tfor(;i<padLength;i+=q)\n\t\t\t\tinput = padString + input;\n\n\t\t\treturn input;\n\t\t},\n\t\t/**\n\t\t * @deprecated\n\t\t * @use myArr.findIndex(item => item === needle);\n\t\t */\n\t\tarray_search: function(needle, haystack)\n\t\t{\n\t\t\tfor(var i = 0; i < haystack.length; i++)\n\t\t\t{\n\t\t\t\tif(haystack[i] == needle)\n\t\t\t\t\treturn i;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t};\n\n})(window);\n","import {Type, Loc, Dom, Tag} from \"main.core\";\nimport \"ui.notification\";\nimport \"../../../../../../main/install/js/main/date/main.date\";\n\nexport class Util\n{\n\tstatic parseTime(str)\n\t{\n\t\tlet date = Util.parseDate1(BX.date.format(Util.getDateFormat(), new Date()) + ' ' + str, false);\n\t\treturn date ? {\n\t\t\th: date.getHours(),\n\t\t\tm: date.getMinutes()\n\t\t} : date;\n\t}\n\n\tstatic getTimeRounded(date)\n\t{\n\t\treturn Math.round(date.getTime() / 60000) * 60000;\n\t}\n\n\tstatic parseDate(str, bUTC, formatDate, formatDatetime)\n\t{\n\t\treturn BX.parseDate(str, bUTC, formatDate, formatDatetime);\n\t}\n\n\tstatic parseDate1(str, format, trimSeconds)\n\t{\n\t\tlet\n\t\t\ti, cnt, k,\n\t\t\tregMonths,\n\t\t\tbUTC = false;\n\n\t\tif (!format)\n\t\t\tformat = Loc.getMessage('FORMAT_DATETIME');\n\n\t\tstr = BX.util.trim(str);\n\n\t\tif (trimSeconds !== false)\n\t\t\tformat = format.replace(':SS', '');\n\n\t\tif (BX.type.isNotEmptyString(str))\n\t\t{\n\t\t\tregMonths = '';\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tregMonths = regMonths + '|' + Loc.getMessage('MON_'+i);\n\t\t\t}\n\n\t\t\tlet\n\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\taDate = str.match(expr),\n\t\t\t\taFormat = Loc.getMessage('FORMAT_DATE').match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\taDateArgs = [],\n\t\t\t\taFormatArgs = [],\n\t\t\t\taResult = {};\n\n\t\t\tif (!aDate)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif(aDate.length > aFormat.length)\n\t\t\t{\n\t\t\t\taFormat = format.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t}\n\n\t\t\tfor(i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif(BX.util.trim(aDate[i]) !== '')\n\t\t\t\t{\n\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif(BX.util.trim(aFormat[i]) != '')\n\t\t\t\t{\n\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet m = BX.util.array_search('MMMM', aFormatArgs);\n\t\t\tif (m > 0)\n\t\t\t{\n\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tm = BX.util.array_search('M', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor(i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tk = aFormatArgs[i].toUpperCase();\n\t\t\t\taResult[k] = k == 'T' || k == 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t}\n\n\t\t\tif(aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t{\n\t\t\t\tlet d = new Date();\n\n\t\t\t\tif(bUTC)\n\t\t\t\t{\n\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\td.setUTCHours(0, 0, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\td.setDate(1);\n\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\td.setHours(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif(\n\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet bPM = (aResult['T']||aResult['TT']||'am').toUpperCase()=='PM';\n\t\t\t\t\t\tlet h = parseInt(aResult['H']||aResult['G']||0, 10);\n\t\t\t\t\t\tif(bPM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h + (h == 12 ? 0 : 12);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH']||aResult['GG']||0, 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\tif(bUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic formatTime(h, m, skipMinutes)\n\t{\n\t\tlet d = null;\n\t\tif (Type.isDate(h))\n\t\t{\n\t\t\td = h;\n\t\t}\n\t\telse\n\t\t{\n\t\t\td = new Date();\n\t\t\td.setHours(h, m, 0);\n\t\t}\n\n\t\treturn BX.date.format(Util.getTimeFormatShort(), d.getTime() / 1000);\n\t}\n\n\tstatic formatDate(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateTime(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateTimeFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateUsable(date, showYear)\n\t{\n\t\tlet\n\t\t\tlang = Loc.getMessage('LANGUAGE_ID'),\n\t\t\tformat = Util.getDateFormat();\n\t\tif (lang === 'ru' || lang  === 'ua')\n\t\t{\n\t\t\tformat = 'j F';\n\t\t\tif (date.getFullYear\n\t\t\t\t&& date.getFullYear() !== new Date().getFullYear()\n\t\t\t\t&& showYear !== false\n\t\t\t)\n\t\t\t{\n\t\t\t\tformat += ' Y';\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format([\n\t\t\t[\"today\", \"today\"],\n\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t[\"\" , format]\n\t\t], date);\n\t}\n\n\tstatic getDayLength()\n\t{\n\t\tif (!Util.DAY_LENGTH)\n\t\t{\n\t\t\tUtil.DAY_LENGTH = 86400000;\n\t\t}\n\t\treturn Util.DAY_LENGTH;\n\t}\n\n\tstatic getDefaultColorList()\n\t{\n\t\treturn ['#86B100','#0092CC','#00AFC7','#DA9100','#00B38C','#DE2B24','#BD7AC9','#838FA0','#AB7917','#E97090'];\n\t}\n\n\tstatic findTargetNode(node, parentCont)\n\t{\n\t\tlet res = false;\n\t\tif (node)\n\t\t{\n\t\t\tlet prefix = 'data-bx-calendar', i;\n\n\t\t\t// if (!parentCont)\n\t\t\t// {\n\t\t\t// \tparentCont = this.calendar.viewsCont;\n\t\t\t// }\n\n\t\t\tif (node.attributes && node.attributes.length)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < node.attributes.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (node.attributes[i].name && node.attributes[i].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t{\n\t\t\t\t\t\tres = node;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!res)\n\t\t\t{\n\t\t\t\tres = BX.findParent(node, function(n)\n\t\t\t\t{\n\t\t\t\t\tlet j;\n\t\t\t\t\tif (n.attributes && n.attributes.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0; j < n.attributes.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (n.attributes[j].name && n.attributes[j].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}, parentCont);\n\t\t\t}\n\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tstatic getFollowedUserList(userId)\n\t{\n\t\treturn [];\n\t}\n\n\tstatic getWeekDayByInd(index)\n\t{\n\t\treturn ['SU','MO','TU','WE','TH','FR','SA'][index];\n\t}\n\n\tstatic getLoader(size, className)\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"${className || 'calendar-loader'}\">\n\t\t\t<svg class=\"calendar-loader-circular\"\n\t\t\t\tstyle=\"width:${parseInt(size)}px; height:${parseInt(size)}px;\"\n\t\t\t\tviewBox=\"25 25 50 50\">\n\t\t\t\t\t<circle class=\"calendar-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t\t\t<circle class=\"calendar-loader-inner-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t</svg>\n\t\t</div>\n`;\n\t};\n\n\tstatic getDayCode(date)\n\t{\n\t\treturn date.getFullYear() + '-' + (\"0\"+(~~(date.getMonth() + 1))).substr(-2,2) + '-' + (\"0\"+(~~(date.getDate()))).substr(-2,2);\n\t}\n\n\tstatic getTextColor(color)\n\t{\n\t\tif (!color)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color.charAt(0) === \"#\")\n\t\t{\n\t\t\tcolor = color.substring(1, 7);\n\t\t}\n\n\t\tlet\n\t\t\tr = parseInt(color.substring(0, 2), 16),\n\t\t\tg = parseInt(color.substring(2, 4), 16),\n\t\t\tb = parseInt(color.substring(4, 6), 16),\n\t\t\tlight = (r * 0.8 + g + b * 0.2) / 510 * 100;\n\n\t\treturn light < 50;\n\t}\n\n\tstatic getKeyCode(key)\n\t{\n\t\tif (!Type.isString(key))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet KEY_CODES = {\n\t\t\t'backspace': 8,\n\t\t\t'enter': 13,\n\t\t\t'escape': 27,\n\t\t\t'space': 32,\n\t\t\t'delete': 46,\n\t\t\t'left': 37,\n\t\t\t'right': 39,\n\t\t\t'up': 38,\n\t\t\t'down': 40,\n\t\t\t'z': 90,\n\t\t\t'y': 89,\n\t\t\t'shift': 16,\n\t\t\t'ctrl': 17,\n\t\t\t'alt': 18,\n\t\t\t'cmd': 91, // 93, 224, 17 Browser dependent\n\t\t\t'cmdRight': 93, // 93, 224, 17 Browser dependent?\n\t\t\t'pageUp': 33,\n\t\t\t'pageDown': 34,\n\t\t\t'd': 68,\n\t\t\t'w': 87,\n\t\t\t'm': 77,\n\t\t\t'a': 65\n\t\t};\n\t\treturn KEY_CODES[key.toLowerCase()];\n\t}\n\n\tstatic getUsableDateTime(timestamp, roundMin)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t\ttimestamp = timestamp.getTime();\n\n\t\tlet r = (roundMin || 10) * 60 * 1000;\n\t\ttimestamp = Math.ceil(timestamp / r) * r;\n\n\t\treturn new Date(timestamp);\n\t}\n\n\tstatic showNotification(message, actions = null)\n\t{\n\t\tif (Type.isString(message) && message !== '')\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message,\n\t\t\t\tactions: actions\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showFieldError(message, wrap, options)\n\t{\n\t\tif (Type.isDomNode(wrap) && Type.isString(message) && message !== '')\n\t\t{\n\t\t\tDom.remove(wrap.querySelector('.ui-alert'));\n\n\t\t\tlet alert = new BX.UI.Alert({\n\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\ticon: BX.UI.Alert.Icon.DANGER,\n\t\t\t\ttext: message\n\t\t\t});\n\n\t\t\tlet alertWrap = alert.getContainer();\n\n\t\t\twrap.appendChild(alertWrap);\n\t\t}\n\t}\n\n\tstatic getDateFormat()\n\t{\n\t\tif (!Util.DATE_FORMAT)\n\t\t{\n\t\t\tUtil.DATE_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATE\"));\n\t\t}\n\t\treturn Util.DATE_FORMAT;\n\t}\n\n\tstatic getDateTimeFormat()\n\t{\n\t\tif (!Util.DATETIME_FORMAT)\n\t\t{\n\t\t\tUtil.DATETIME_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATETIME\"));\n\t\t}\n\t\treturn Util.DATETIME_FORMAT;\n\t}\n\n\tstatic getTimeFormat()\n\t{\n\t\tif (!Util.TIME_FORMAT)\n\t\t{\n\t\t\tif ((Loc.getMessage(\"FORMAT_DATETIME\").substr(0, Loc.getMessage(\"FORMAT_DATE\").length) === Loc.getMessage(\"FORMAT_DATE\")))\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT = BX.util.trim(Util.getDateTimeFormat().substr(Util.getDateFormat().length));\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.util.trim(Loc.getMessage(\"FORMAT_DATETIME\").substr(Loc.getMessage(\"FORMAT_DATE\").length));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS';\n\t\t\t\tUtil.TIME_FORMAT = BX.date.convertBitrixFormat(BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS');\n\t\t\t}\n\t\t}\n\n\t\treturn Util.TIME_FORMAT;\n\t}\n\n\tstatic getTimeFormatShort()\n\t{\n\t\tif (!Util.TIME_FORMAT_SHORT)\n\t\t{\n\t\t\tUtil.TIME_FORMAT_SHORT = Util.getTimeFormat().replace(':s', '');\n\t\t\tUtil.TIME_FORMAT_SHORT_BX = Util.TIME_FORMAT_BX.replace(':SS', '');\n\t\t}\n\t\treturn Util.TIME_FORMAT_SHORT;\n\t}\n\n\tstatic getCurrentUserId()\n\t{\n\t\tif (!Util.currentUserId)\n\t\t{\n\t\t\tUtil.currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\t}\n\t\treturn Util.currentUserId;\n\t}\n\n\tstatic getTimeByInt(intValue)\n\t{\n\t\tintValue = parseInt(intValue);\n\t\tlet h = Math.floor(intValue / 60);\n\t\treturn {hour: h, min: intValue - h * 60};\n\t}\n\n\tstatic preventSelection(node)\n\t{\n\t\tnode.ondrag = BX.False;\n\t\tnode.ondragstart = BX.False;\n\t\tnode.onselectstart = BX.False;\n\t}\n\n\tstatic getBX()\n\t{\n\t\treturn window.top.BX || window.BX;\n\t}\n\n\tstatic applyHacksForPopupzIndex(zIndex, timeout = true)\n\t{\n\t\tif (timeout)\n\t\t{\n\t\t\tsetTimeout(()=>{Util.applyHacksForPopupzIndex(zIndex, false)},0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tzIndex = Type.isInteger(zIndex) ? zIndex : 4200;\n\t\t\tif (BX.PopupMenu && BX.PopupMenu.Data)\n\t\t\t{\n\t\t\t\tfor(let id in BX.PopupMenu.Data)\n\t\t\t\t{\n\t\t\t\t\tif (BX.PopupMenu.Data.hasOwnProperty(id)\n\t\t\t\t\t\t&& BX.type.isObject(BX.PopupMenu.Data[id])\n\t\t\t\t\t\t&& BX.PopupMenu.Data[id].popupWindow\n\t\t\t\t\t\t&& BX.PopupMenu.Data[id].popupWindow.isShown()\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.PopupMenu.Data[id].popupWindow.params.zIndex = zIndex;\n\t\t\t\t\t\tBX.PopupMenu.Data[id].popupWindow.popupContainer.style.zIndex = zIndex;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic closeAllPopups()\n\t{\n\t\tif (BX.PopupMenu && BX.PopupMenu.Data)\n\t\t{\n\t\t\tfor(let id in BX.PopupMenu.Data)\n\t\t\t{\n\t\t\t\tif (BX.PopupMenu.Data.hasOwnProperty(id)\n\t\t\t\t\t&& BX.type.isObject(BX.PopupMenu.Data[id])\n\t\t\t\t\t&& BX.PopupMenu.Data[id].popupWindow\n\t\t\t\t\t&& BX.PopupMenu.Data[id].popupWindow.isShown()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tBX.PopupMenu.Data[id].popupWindow.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic sendAnalyticLabel(label)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.sendAnalyticsLabel', {analyticsLabel: label});\n\t}\n}"],"names":["window","BX","Main","Date","AM_PM_MODE","UPPER","LOWER","NONE","format","timestamp","now","utc","_this","date","Utils","isDate","getTime","isNumber","nowDate","isUTC","isArray","_formatDateInterval","isNotEmptyString","replaceMap","match","map","x","length","forEach","element","index","replace","formatRegex","dateFormats","d","strPadLeft","getDate","toString","D","_getMessage","getDay","j","l","N","S","w","z","firstDay","getFullYear","currentDay","getMonth","Math","ceil","W","newDate","dayNumber","setDate","firstThursday","setMonth","weekNumber","F","f","m","M","n","t","lastMonthDay","UTC","L","year","o","correctDate","Y","y","slice","a","getHours","A","B","swatch","getUTCHours","getUTCMinutes","getUTCSeconds","floor","g","G","h","H","i","getMinutes","s","getSeconds","u","getMilliseconds","e","I","firstJanuary","firstJanuaryUTC","firstJuly","firstJulyUTC","O","timezoneOffset","getTimezoneOffset","timezoneOffsetAbs","abs","P","difference","substr","Z","c","_replaceDateFormat","r","U","sago","_formatDateMessage","intval","sdiff","sshort","iago","idiff","isago","minutesAgo","result","secondsAgo","ishort","Hago","Hdiff","Hshort","yesterday","today","tommorow","tomorrow","dago","ddiff","dshort","mago","mdiff","mshort","Yago","Ydiff","Yshort","ampm","isAmPmMode","timeFormat","convertBitrixFormat","X","day","time","Q","daysAgo","cutZeroTime","formats","formatInterval","formatValue","exec","month","todayStart","todayEnd","yesterdayStart","yesterdayEnd","tomorrowStart","tomorrowEnd","getUTCFullYear","getUTCDate","getUTCMonth","getUTCMilliseconds","getUTCDay","dayValue","setUTCDate","monthValue","setUTCMonth","value","messages","val","dec","message","matchFull","number","convertToUTC","getNewDate","getBrowserTimestamp","parseInt","browserOffset","getServerTimestamp","round","formatLastActivityDate","formattedDate","returnConst","parse","str","formatDate","formatDatetime","regMonths","expr","RegExp","aDate","aFormat","cnt","aDateArgs","aFormatArgs","aResult","trim","array_search","getMonthIndex","k","toUpperCase","setUTCFullYear","setUTCHours","setFullYear","setHours","isNaN","bPM","q","wordMonthCut","wordMonth","item","Object","prototype","call","Number","isString","String","input","padLength","padString","needle","haystack","Util","parseDate1","getDateFormat","bUTC","parseDate","trimSeconds","Loc","getMessage","util","type","getNumMonth","skipMinutes","Type","getTimeFormatShort","getDateTimeFormat","showYear","lang","DAY_LENGTH","node","parentCont","res","prefix","attributes","name","findParent","userId","size","className","Tag","render","color","charAt","substring","b","light","key","KEY_CODES","toLowerCase","roundMin","actions","UI","Notification","Center","notify","content","wrap","options","isDomNode","Dom","remove","querySelector","alert","Alert","Color","DANGER","icon","Icon","text","alertWrap","getContainer","appendChild","DATE_FORMAT","DATETIME_FORMAT","TIME_FORMAT","TIME_FORMAT_BX","TIME_FORMAT_SHORT","getTimeFormat","TIME_FORMAT_SHORT_BX","currentUserId","intValue","hour","min","ondrag","False","ondragstart","onselectstart","top","zIndex","timeout","setTimeout","applyHacksForPopupzIndex","isInteger","PopupMenu","Data","id","hasOwnProperty","isObject","popupWindow","isShown","params","popupContainer","style","close","label","ajax","runAction","analyticsLabel"],"mappings":"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"}