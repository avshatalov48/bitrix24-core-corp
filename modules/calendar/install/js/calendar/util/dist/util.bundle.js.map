{"version":3,"file":"util.bundle.js","sources":["../../../../../../main/install/js/main/date/main.date.js","../src/util.js"],"sourcesContent":[";(function(window)\n{\n\t/****************** ATTENTION *******************************\n\t * Please do not use Bitrix CoreJS in this class.\n\t * This class can be called on page without Bitrix Framework\n\t*************************************************************/\n\n\tif (!window.BX)\n\t{\n\t\twindow.BX = {};\n\t}\n\n\tif (!window.BX.Main)\n\t{\n\t\twindow.BX.Main = {};\n\t}\n\telse if (window.BX.Main.Date)\n\t{\n\t\treturn;\n\t}\n\n\tvar BX = window.BX;\n\n\tBX.Main.Date = BX.Main.DateTimeFormat = {\n\n\t\tAM_PM_MODE: {\n\t\t\tUPPER: 1,\n\t\t\tLOWER: 2,\n\t\t\tNONE: false\n\t\t},\n\n\t\tformat: function(format, timestamp, now, utc)\n\t\t{\n\t\t\tvar _this = this;\n\n\t\t\t/*\n\t\t\tPHP to Javascript:\n\t\t\t\ttime() = new Date()\n\t\t\t\tmktime(...) = new Date(...)\n\t\t\t\tgmmktime(...) = new Date(Date.UTC(...))\n\t\t\t\tmktime(0,0,0, 1, 1, 1970) != 0          new Date(1970,0,1).getTime() != 0\n\t\t\t\tgmmktime(0,0,0, 1, 1, 1970) == 0        new Date(Date.UTC(1970,0,1)).getTime() == 0\n\t\t\t\tdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\")\n\t\t\t\tgmdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\", null, null, true);\n\t\t\t*/\n\t\t\tvar date = Utils.isDate(timestamp) ? new Date(timestamp.getTime()) : Utils.isNumber(timestamp) ? new Date(timestamp * 1000) : new Date();\n\t\t\tvar nowDate = Utils.isDate(now) ? new Date(now.getTime()) : Utils.isNumber(now) ? new Date(now * 1000) : new Date();\n\t\t\tvar isUTC = !!utc;\n\n\t\t\tif (Utils.isArray(format))\n\t\t\t\treturn _formatDateInterval(format, date, nowDate, isUTC);\n\t\t\telse if (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\tvar replaceMap = (format.match(/{{([^{}]*)}}/g) || []).map(function(x) { return (x.match(/[^{}]+/) || [''])[0]; });\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tformat = format.replace(\"{{\"+element+\"}}\", \"{{\"+index+\"}}\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar formatRegex = /\\\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;\n\n\t\t\tvar dateFormats = {\n\t\t\t\td : function() {\n\t\t\t\t\t// Day of the month 01 to 31\n\t\t\t\t\treturn Utils.strPadLeft(getDate(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tD : function() {\n\t\t\t\t\t//Mon through Sun\n\t\t\t\t\treturn _this._getMessage(\"DOW_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tj : function() {\n\t\t\t\t\t//Day of the month 1 to 31\n\t\t\t\t\treturn getDate(date);\n\t\t\t\t},\n\n\t\t\t\tl : function() {\n\t\t\t\t\t//Sunday through Saturday\n\t\t\t\t\treturn _this._getMessage(\"DAY_OF_WEEK_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tN : function() {\n\t\t\t\t\t//1 (for Monday) through 7 (for Sunday)\n\t\t\t\t\treturn getDay(date) || 7;\n\t\t\t\t},\n\n\t\t\t\tS : function() {\n\t\t\t\t\t//st, nd, rd or th. Works well with j\n\t\t\t\t\tif (getDate(date) % 10 == 1 && getDate(date) != 11)\n\t\t\t\t\t\treturn \"st\";\n\t\t\t\t\telse if (getDate(date) % 10 == 2 && getDate(date) != 12)\n\t\t\t\t\t\treturn \"nd\";\n\t\t\t\t\telse if (getDate(date) % 10 == 3 && getDate(date) != 13)\n\t\t\t\t\t\treturn \"rd\";\n\t\t\t\t\telse\n\t\t\t\t\t\treturn \"th\";\n\t\t\t\t},\n\n\t\t\t\tw : function() {\n\t\t\t\t\t//0 (for Sunday) through 6 (for Saturday)\n\t\t\t\t\treturn getDay(date);\n\t\t\t\t},\n\n\t\t\t\tz : function() {\n\t\t\t\t\t//0 through 365\n\t\t\t\t\tvar firstDay = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar currentDay = new Date(getFullYear(date), getMonth(date), getDate(date));\n\t\t\t\t\treturn Math.ceil( (currentDay - firstDay) / (24 * 3600 * 1000) );\n\t\t\t\t},\n\n\t\t\t\tW : function() {\n\t\t\t\t\t//ISO-8601 week number of year\n\t\t\t\t\tvar newDate  = new Date(date.getTime());\n\t\t\t\t\tvar dayNumber   = (getDay(date) + 6) % 7;\n\t\t\t\t\tsetDate(newDate, getDate(newDate) - dayNumber + 3);\n\t\t\t\t\tvar firstThursday = newDate.getTime();\n\t\t\t\t\tsetMonth(newDate, 0, 1);\n\t\t\t\t\tif (getDay(newDate) != 4)\n\t\t\t\t\t\tsetMonth(newDate, 0, 1 + ((4 - getDay(newDate)) + 7) % 7);\n\t\t\t\t\tvar weekNumber = 1 + Math.ceil((firstThursday - newDate) / (7 * 24 * 3600 * 1000));\n\t\t\t\t\treturn Utils.strPadLeft(weekNumber.toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tF : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1) + \"_S\");\n\t\t\t\t},\n\n\t\t\t\tf : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tm : function() {\n\t\t\t\t\t//Numeric representation of a month 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getMonth(date) + 1).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tM : function() {\n\t\t\t\t\t//A short textual representation of a month, three letters Jan through Dec\n\t\t\t\t\treturn _this._getMessage(\"MON_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tn : function() {\n\t\t\t\t\t//Numeric representation of a month 1 through 12\n\t\t\t\t\treturn getMonth(date) + 1;\n\t\t\t\t},\n\n\t\t\t\tt : function() {\n\t\t\t\t\t//Number of days in the given month 28 through 31\n\t\t\t\t\tvar lastMonthDay = isUTC ? new Date(Date.UTC(getFullYear(date), getMonth(date) + 1, 0)) : new Date(getFullYear(date), getMonth(date) + 1, 0);\n\t\t\t\t\treturn getDate(lastMonthDay);\n\t\t\t\t},\n\n\t\t\t\tL : function() {\n\t\t\t\t\t//1 if it is a leap year, 0 otherwise.\n\t\t\t\t\tvar year = getFullYear(date);\n\t\t\t\t\treturn (year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 1 : 0);\n\t\t\t\t},\n\n\t\t\t\to : function() {\n\t\t\t\t\t//ISO-8601 year number\n\t\t\t\t\tvar correctDate  = new Date(date.getTime());\n\t\t\t\t\tsetDate(correctDate, getDate(correctDate) - ((getDay(date) + 6) % 7) + 3);\n\t\t\t\t\treturn getFullYear(correctDate);\n\t\t\t\t},\n\n\t\t\t\tY : function() {\n\t\t\t\t\t//A full numeric representation of a year, 4 digits\n\t\t\t\t\treturn getFullYear(date);\n\t\t\t\t},\n\n\t\t\t\ty : function() {\n\t\t\t\t\t//A two digit representation of a year\n\t\t\t\t\treturn getFullYear(date).toString().slice(2);\n\t\t\t\t},\n\n\t\t\t\ta : function() {\n\t\t\t\t\t//am or pm\n\t\t\t\t\treturn getHours(date) > 11 ? \"pm\" : \"am\";\n\t\t\t\t},\n\n\t\t\t\tA : function() {\n\t\t\t\t\t//AM or PM\n\t\t\t\t\treturn getHours(date) > 11 ? \"PM\" : \"AM\";\n\t\t\t\t},\n\n\t\t\t\tB : function() {\n\t\t\t\t\t//000 through 999\n\t\t\t\t\tvar swatch = ((date.getUTCHours() + 1) % 24) + date.getUTCMinutes() / 60 + date.getUTCSeconds() / 3600;\n\t\t\t\t\treturn Utils.strPadLeft(Math.floor(swatch * 1000 / 24).toString(), 3, \"0\");\n\t\t\t\t},\n\n\t\t\t\tg : function() {\n\t\t\t\t\t//12-hour format of an hour without leading zeros 1 through 12\n\t\t\t\t\treturn getHours(date) % 12 || 12;\n\t\t\t\t},\n\n\t\t\t\tG : function() {\n\t\t\t\t\t//24-hour format of an hour without leading zeros 0 through 23\n\t\t\t\t\treturn getHours(date);\n\t\t\t\t},\n\n\t\t\t\th : function() {\n\t\t\t\t\t//12-hour format of an hour with leading zeros 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getHours(date) % 12 || 12).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tH : function() {\n\t\t\t\t\t//24-hour format of an hour with leading zeros 00 through 23\n\t\t\t\t\treturn Utils.strPadLeft(getHours(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ti : function() {\n\t\t\t\t\t//Minutes with leading zeros 00 to 59\n\t\t\t\t\treturn Utils.strPadLeft(getMinutes(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ts : function() {\n\t\t\t\t\t//Seconds, with leading zeros 00 through 59\n\t\t\t\t\treturn Utils.strPadLeft(getSeconds(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tu : function() {\n\t\t\t\t\t//Microseconds\n\t\t\t\t\treturn Utils.strPadLeft((getMilliseconds(date) * 1000).toString(), 6, \"0\");\n\t\t\t\t},\n\n\t\t\t\te : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"UTC\";\n\t\t\t\t\treturn \"\";\n\t\t\t\t},\n\n\t\t\t\tI : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t//Whether or not the date is in daylight saving time 1 if Daylight Saving Time, 0 otherwise\n\t\t\t\t\tvar firstJanuary = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJanuaryUTC = Date.UTC(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJuly = new Date(getFullYear(date), 6, 0);\n\t\t\t\t\tvar firstJulyUTC = Date.UTC(getFullYear(date), 6, 0);\n\t\t\t\t\treturn 0 + ((firstJanuary - firstJanuaryUTC) !== (firstJuly - firstJulyUTC));\n\t\t\t\t},\n\n\t\t\t\tO : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+0000\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) in hours +0200\n\t\t\t\t\tvar timezoneOffset = date.getTimezoneOffset();\n\t\t\t\t\tvar timezoneOffsetAbs = Math.abs(timezoneOffset);\n\t\t\t\t\treturn (timezoneOffset > 0 ? \"-\" : \"+\") + Utils.strPadLeft((Math.floor(timezoneOffsetAbs / 60) * 100 + timezoneOffsetAbs % 60).toString(), 4, \"0\");\n\t\t\t\t},\n\n\t\t\t\tP : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+00:00\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) with colon between hours and minutes +02:00\n\t\t\t\t\tvar difference = this.O();\n\t\t\t\t\treturn difference.substr(0, 3) + \":\" + difference.substr(3);\n\t\t\t\t},\n\n\t\t\t\tZ : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t//Timezone offset in seconds. The offset for timezones west of UTC is always negative,\n\t\t\t\t\t//and for those east of UTC is always positive.\n\t\t\t\t\treturn -date.getTimezoneOffset() * 60;\n\t\t\t\t},\n\n\t\t\t\tc : function() {\n\t\t\t\t\t//ISO 8601 date\n\t\t\t\t\treturn \"Y-m-d\\\\TH:i:sP\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tr : function() {\n\t\t\t\t\t//RFC 2822 formatted date\n\t\t\t\t\treturn \"D, d M Y H:i:s O\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tU : function() {\n\t\t\t\t\t//Seconds since the Unix Epoch\n\t\t\t\t\treturn Math.floor(date.getTime() / 1000);\n\t\t\t\t},\n\n\t\t\t\tsago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_SECOND_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 1000));\n\t\t\t\t},\n\n\t\t\t\tiago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tidiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tisago : function() {\n\t\t\t\t\tvar minutesAgo = intval((nowDate - date) / 60 / 1000);\n\t\t\t\t\tvar result = _formatDateMessage(minutesAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_MOD_OTHER\"\n\t\t\t\t\t});\n\n\t\t\t\t\tresult += \" \";\n\n\t\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000) - (minutesAgo * 60);\n\t\t\t\t\tresult += _formatDateMessage(secondsAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\n\t\t\t\tishort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MINUTE_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tHago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_HOUR_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tyesterday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_YESTERDAY\");\n\t\t\t\t},\n\n\t\t\t\ttoday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TODAY\");\n\t\t\t\t},\n\n\t\t\t\ttommorow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\ttomorrow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\tdago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tddiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tdshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_DAY_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 1000));\n\t\t\t\t},\n\n\t\t\t\tmago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MONTH_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000));\n\t\t\t\t},\n\n\t\t\t\tYago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYshort : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_SHORT_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_SHORT_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_SHORT_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_SHORT_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_SHORT_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_SHORT_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tx : function() {\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\treturn _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow, \"+timeFormat],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t\t\t\t[\"s\", \"sago\"],\n\t\t\t\t\t\t[\"i\", \"iago\"],\n\t\t\t\t\t\t[\"today\", \"today, \"+timeFormat],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday, \"+timeFormat],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")]\n\t\t\t\t\t], date, nowDate, isUTC);\n\t\t\t\t},\n\n\t\t\t\tX : function() {\n\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\tvar day = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow\"],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))],\n\t\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tvar time = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", timeFormat],\n\t\t\t\t\t\t[\"today\", timeFormat],\n\t\t\t\t\t\t[\"yesterday\", timeFormat],\n\t\t\t\t\t\t[\"\", \"\"]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tif (time.length > 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_AT_TIME\").replace(/#DAY#/g, day).replace(/#TIME#/g, time);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn day;\n\t\t\t\t},\n\n\t\t\t\tQ : function() {\n\t\t\t\t\tvar daysAgo = intval((nowDate - date) / 60 / 60 / 24 / 1000);\n\t\t\t\t\tif(daysAgo == 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_DIFF_1\").replace(/#VALUE#/g, 1);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn _this.format([ [\"d\", \"ddiff\"], [\"m\", \"mdiff\"], [\"\", \"Ydiff\"] ], date, nowDate);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar cutZeroTime = false;\n\t\t\tif (format[0] && format[0] == \"^\")\n\t\t\t{\n\t\t\t\tcutZeroTime = true;\n\t\t\t\tformat = format.substr(1);\n\t\t\t}\n\n\t\t\tvar result = format.replace(formatRegex, _replaceDateFormat);\n\n\t\t\tif (cutZeroTime)\n\t\t\t{\n\t\t\t\t/* \t15.04.12 13:00:00 => 15.04.12 13:00\n\t\t\t\t\t00:01:00 => 00:01\n\t\t\t\t\t4 may 00:00:00 => 4 may\n\t\t\t\t\t01-01-12 00:00 => 01-01-12\n\t\t\t\t*/\n\n\t\t\t\tresult = result.replace(/\\s*00:00:00\\s*/g, \"\").\n\t\t\t\t\t\t\t\treplace(/(\\d\\d:\\d\\d)(:00)/g, \"$1\").\n\t\t\t\t\t\t\t\treplace(/(\\s*00:00\\s*)(?!:)/g, \"\");\n\t\t\t}\n\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tresult = result.replace(\"{{\"+index+\"}}\", element);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t\tfunction _formatDateInterval(formats, date, nowDate, isUTC)\n\t\t\t{\n\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000);\n\t\t\t\tfor (var i = 0; i < formats.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar formatInterval = formats[i][0];\n\t\t\t\t\tvar formatValue = formats[i][1];\n\t\t\t\t\tvar match = null;\n\t\t\t\t\tif (formatInterval == \"s\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^s(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1]\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"i\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^i(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"H\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^H(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"d\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 31 *24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^d(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"m\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 365 * 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^m(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 31 * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"now\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (date.getTime() == nowDate.getTime())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"today\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"todayFuture\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = nowDate.getTime();\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"yesterday\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar yesterdayStart = isUTC ? new Date(Date.UTC(year, month, day-1, 0, 0, 0, 0)) : new Date(year, month, day-1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar yesterdayEnd = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= yesterdayStart && date < yesterdayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"tommorow\" || formatInterval == \"tomorrow\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar tomorrowStart = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar tomorrowEnd = isUTC ? new Date(Date.UTC(year, month, day+2, 0, 0, 0, 0)) : new Date(year, month, day+2, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= tomorrowStart && date < tomorrowEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"-\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 0)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//return formats.length > 0 ? _this.format(formats.pop()[1], date, nowDate, isUTC) : \"\";\n\t\t\t\treturn formats.length > 0 ? _this.format(formats[formats.length - 1][1], date, nowDate, isUTC) : \"\";\n\t\t\t}\n\n\t\t\tfunction getFullYear(date) { return isUTC ? date.getUTCFullYear() : date.getFullYear(); }\n\t\t\tfunction getDate(date) { return isUTC ? date.getUTCDate() : date.getDate(); }\n\t\t\tfunction getMonth(date) { return isUTC ? date.getUTCMonth() : date.getMonth(); }\n\t\t\tfunction getHours(date) { return isUTC ? date.getUTCHours() : date.getHours(); }\n\t\t\tfunction getMinutes(date) { return isUTC ? date.getUTCMinutes() : date.getMinutes(); }\n\t\t\tfunction getSeconds(date) { return isUTC ? date.getUTCSeconds() : date.getSeconds(); }\n\t\t\tfunction getMilliseconds(date) { return isUTC ? date.getUTCMilliseconds() : date.getMilliseconds(); }\n\t\t\tfunction getDay(date) { return isUTC ? date.getUTCDay() : date.getDay(); }\n\t\t\tfunction setDate(date, dayValue) { return isUTC ? date.setUTCDate(dayValue) : date.setDate(dayValue); }\n\t\t\tfunction setMonth(date, monthValue, dayValue) { return isUTC ? date.setUTCMonth(monthValue, dayValue) : date.setMonth(monthValue, dayValue); }\n\n\t\t\tfunction _formatDateMessage(value, messages)\n\t\t\t{\n\t\t\t\tvar val = value < 100 ? Math.abs(value) : Math.abs(value % 100);\n\t\t\t\tvar dec = val % 10;\n\t\t\t\tvar message = \"\";\n\n\t\t\t\tif(val == 0)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"0\"]);\n\t\t\t\telse if (val == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"1\"]);\n\t\t\t\telse if (val >= 10 && val <= 20)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"10_20\"]);\n\t\t\t\telse if (dec == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_1\"]);\n\t\t\t\telse if (2 <= dec && dec <= 4)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_2_4\"]);\n\t\t\t\telse\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_OTHER\"]);\n\n\t\t\t\treturn message.replace(/#VALUE#/g, value);\n\t\t\t}\n\n\t\t\tfunction _replaceDateFormat(match, matchFull)\n\t\t\t{\n\t\t\t\tif (dateFormats[match])\n\t\t\t\t\treturn dateFormats[match]();\n\t\t\t\telse\n\t\t\t\t\treturn matchFull;\n\t\t\t}\n\n\t\t\tfunction intval(number)\n\t\t\t{\n\t\t\t\treturn number >= 0 ? Math.floor(number) : Math.ceil(number);\n\t\t\t}\n\t\t},\n\n\t\tconvertBitrixFormat: function(format)\n\t\t{\n\t\t\tif (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\treturn format.replace(\"YYYY\", \"Y\")\t// 1999\n\t\t\t\t\t\t .replace(\"MMMM\", \"F\")\t// January - December\n\t\t\t\t\t\t .replace(\"MM\", \"m\")\t// 01 - 12\n\t\t\t\t\t\t .replace(\"M\", \"M\")\t// Jan - Dec\n\t\t\t\t\t\t .replace(\"DD\", \"d\")\t// 01 - 31\n\t\t\t\t\t\t .replace(\"G\", \"g\")\t//  1 - 12\n\t\t\t\t\t\t .replace(/GG/i, \"G\")\t//  0 - 23\n\t\t\t\t\t\t .replace(\"H\", \"h\")\t// 01 - 12\n\t\t\t\t\t\t .replace(/HH/i, \"H\")\t// 00 - 24\n\t\t\t\t\t\t .replace(\"MI\", \"i\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"SS\", \"s\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"TT\", \"A\")\t// AM - PM\n\t\t\t\t\t\t .replace(\"T\", \"a\");\t// am - pm\n\t\t},\n\n\t\tconvertToUTC: function(date)\n\t\t{\n\t\t\tif (!Utils.isDate(date))\n\t\t\t\treturn null;\n\n\t\t\treturn new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n\t\t},\n\n\t\t/**\n\t\t * Function creates and returns Javascript Date() object from server timestamp regardless of local browser (system) timezone.\n\t\t * For example can be used to convert timestamp from some exact date on server to the JS Date object with the same value.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {Date}\n\t\t */\n\t\tgetNewDate: function(timestamp)\n\t\t{\n\t\t\treturn new Date(this.getBrowserTimestamp(timestamp));\n\t\t},\n\n\t\t/**\n\t\t * Function transforms server timestamp (in sec) to javascript timestamp (calculated depend on local browser timezone offset). Returns timestamp in milliseconds.\n\t\t * Also see BX.Main.Date.getNewDate description.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetBrowserTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp * 1000).getTimezoneOffset() * 60;\n\t\t\treturn (parseInt(timestamp, 10) + parseInt(this._getMessage('SERVER_TZ_OFFSET')) + browserOffset) * 1000;\n\t\t},\n\n\t\t/**\n\t\t * Function transforms local browser timestamp (in ms) to server timestamp (calculated depend on local browser timezone offset). Returns timestamp in seconds.\n\t\t *\n\t\t * @param timestamp - timestamp in milliseconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetServerTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp).getTimezoneOffset() * 60;\n\t\t\treturn Math.round(timestamp / 1000 - (parseInt(this._getMessage('SERVER_TZ_OFFSET'), 10) + parseInt(browserOffset, 10)));\n\t\t},\n\n\t\tformatLastActivityDate: function(timestamp, now, utc)\n\t\t{\n\t\t\tvar ampm = this.isAmPmMode(true);\n\t\t\tvar timeFormat = (ampm === this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\tvar format = [\n\t\t\t   [\"tomorrow\", \"#01#\"+timeFormat],\n\t\t\t   [\"now\" , \"#02#\"],\n\t\t\t   [\"todayFuture\", \"#03#\"+timeFormat],\n\t\t\t   [\"yesterday\", \"#04#\"+timeFormat],\n\t\t\t   [\"-\", this.convertBitrixFormat(this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t   [\"s60\", \"sago\"],\n\t\t\t   [\"i60\", \"iago\"],\n\t\t\t   [\"H5\", \"Hago\"],\n\t\t\t   [\"H24\", \"#03#\"+timeFormat],\n\t\t\t   [\"d31\", \"dago\"],\n\t\t\t   [\"m12>1\", \"mago\"],\n\t\t\t   [\"m12>0\", \"dago\"],\n\t\t\t   [\"\", \"#05#\"]\n\t\t\t];\n\t\t\tvar formattedDate = this.format(format, timestamp, now, utc);\n\t\t\tvar match = null;\n\t\t\tif ((match = /^#(\\d+)#(.*)/.exec(formattedDate)) != null)\n\t\t\t{\n\t\t\t\tswitch (match[1])\n\t\t\t\t{\n\t\t\t\t\tcase \"01\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TOMORROW').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"02\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_NOW');\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"03\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TODAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"04\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_YESTERDAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"05\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_MORE_YEAR');\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tformattedDate = match[2];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formattedDate;\n\t\t},\n\n\t\tisAmPmMode: function(returnConst)\n\t\t{\n\t\t\tif (returnConst === true)\n\t\t\t{\n\t\t\t\treturn this._getMessage('AMPM_MODE');\n\t\t\t}\n\n\t\t\treturn this._getMessage('AMPM_MODE') !== false;\n\t\t},\n\n\t\t/**\n\t\t * The method is designed to replace the localization storage on sites without Bitrix Framework.\n\t\t *\n\t\t * @param message\n\t\t * @returns {*}\n\t\t * @private\n\t\t */\n\t\t_getMessage: function(message)\n\t\t{\n\t\t\treturn BX.message(message);\n\t\t},\n\n\t\t/**\n\t\t * The method used to parse date from string by given format.\n\t\t *\n\t\t * @param {string} str - date in given format\n\t\t * @param {boolean} isUTC - is date in UTC\n\t\t * @param {string} formatDate - format of the date without time\n\t\t * @param {string} formatDatetime - format of the date with time\n\t\t * @returns {Date|null} - returns Date object if string was parsed or null\n\t\t */\n\t\tparse: function(str, isUTC, formatDate, formatDatetime)\n\t\t{\n\t\t\tif (Utils.isNotEmptyString(str))\n\t\t\t{\n\t\t\t\tif (!formatDate)\n\t\t\t\t\tformatDate = this._getMessage('FORMAT_DATE');\n\t\t\t\tif (!formatDatetime)\n\t\t\t\t\tformatDatetime = this._getMessage('FORMAT_DATETIME');\n\n\t\t\t\tvar regMonths = '';\n\t\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t\t{\n\t\t\t\t\tregMonths = regMonths + '|' + this._getMessage('MON_'+i);\n\t\t\t\t}\n\n\t\t\t\tvar\n\t\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\t\taDate = str.match(expr),\n\t\t\t\t\taFormat = formatDate.match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\t\ti, cnt,\n\t\t\t\t\taDateArgs=[], aFormatArgs=[],\n\t\t\t\t\taResult={};\n\n\t\t\t\tif (!aDate)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif(aDate.length > aFormat.length)\n\t\t\t\t{\n\t\t\t\t\taFormat = formatDatetime.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aDate[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aFormat[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar m = Utils.array_search('MMMM', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tm = Utils.array_search('M', aFormatArgs);\n\t\t\t\t\tif (m > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tvar k = aFormatArgs[i].toUpperCase();\n\t\t\t\t\taResult[k] = k === 'T' || k === 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t\t}\n\n\t\t\t\tif(aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t\t{\n\t\t\t\t\tvar d = new Date();\n\n\t\t\t\t\tif(isUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\t\td.setUTCHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\t\td.setHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(\n\t\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar\n\t\t\t\t\t\t\t\tbPM = (aResult['T']||aResult['TT']||'am').toUpperCase() === 'PM',\n\t\t\t\t\t\t\t\th = parseInt(aResult['H']||aResult['G']||0, 10);\n\n\t\t\t\t\t\t\tif(bPM)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h + (h === 12 ? 0 : 12);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH']||aResult['GG']||0, 10);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\t\tif(isUTC)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn d;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetMonthIndex: function(month)\n\t\t{\n\t\t\tvar\n\t\t\t\ti,\n\t\t\t\tq = month.toUpperCase(),\n\t\t\t\twordMonthCut = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'],\n\t\t\t\twordMonth = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tif (q === this._getMessage('MON_'+i).toUpperCase()\n\t\t\t\t\t|| q === this._getMessage('MONTH_'+i).toUpperCase()\n\t\t\t\t\t|| q === wordMonthCut[i-1].toUpperCase()\n\t\t\t\t\t|| q === wordMonth[i-1].toUpperCase())\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn month;\n\t\t}\n\t};\n\n\t/**\n\t * @private\n\t */\n\tvar Utils = {\n\t\tisDate: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Date]\";\n\t\t},\n\t\tisNumber: function(item) {\n\t\t\treturn item === 0 ? true : (item ? (typeof (item) == \"number\" || item instanceof Number) : false);\n\t\t},\n\t\tisArray: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Array]\";\n\t\t},\n\t\tisString: function(item) {\n\t\t\treturn item === '' ? true : (item ? (typeof (item) == \"string\" || item instanceof String) : false);\n\t\t},\n\t\tisNotEmptyString: function(item) {\n\t\t\treturn this.isString(item) ? item.length > 0 : false;\n\t\t},\n\t\tstrPadLeft: function(input, padLength, padString)\n\t\t{\n\t\t\tvar i = input.length, q=padString.length;\n\t\t\tif (i >= padLength) return input;\n\n\t\t\tfor(;i<padLength;i+=q)\n\t\t\t\tinput = padString + input;\n\n\t\t\treturn input;\n\t\t},\n\t\t/**\n\t\t * @deprecated\n\t\t * @use myArr.findIndex(item => item === needle);\n\t\t */\n\t\tarray_search: function(needle, haystack)\n\t\t{\n\t\t\tfor(var i = 0; i < haystack.length; i++)\n\t\t\t{\n\t\t\t\tif(haystack[i] == needle)\n\t\t\t\t\treturn i;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t};\n\n})(window);\n","import {Runtime, Type, Loc, Dom, Tag} from \"main.core\";\nimport \"ui.notification\";\nimport \"../../../../../../main/install/js/main/date/main.date\";\nimport {PopupManager} from 'main.popup';\nimport {PULL as Pull} from 'pull.client';\n\nexport class Util\n{\n\tstatic PLANNER_PULL_TAG = 'calendar-planner-#USER_ID#';\n\tstatic PLANNER_WATCH_LIST = [];\n\tstatic REQUEST_ID_LIST = [];\n\tstatic accessNames = {};\n\n\tstatic parseTime(str)\n\t{\n\t\tlet date = Util.parseDate1(BX.date.format(Util.getDateFormat(), new Date()) + ' ' + str, false);\n\t\treturn date ? {\n\t\t\th: date.getHours(),\n\t\t\tm: date.getMinutes()\n\t\t} : date;\n\t}\n\n\tstatic getTimeRounded(date)\n\t{\n\t\treturn Math.round(date.getTime() / 60000) * 60000;\n\t}\n\n\tstatic parseDate(str, bUTC, formatDate, formatDatetime)\n\t{\n\t\treturn BX.parseDate(str, bUTC, formatDate, formatDatetime);\n\t}\n\n\tstatic parseDate1(str, format, trimSeconds)\n\t{\n\t\tlet\n\t\t\ti, cnt, k,\n\t\t\tregMonths,\n\t\t\tbUTC = false;\n\n\t\tif (!format)\n\t\t\tformat = Loc.getMessage('FORMAT_DATETIME');\n\n\t\tstr = BX.util.trim(str);\n\n\t\tif (trimSeconds !== false)\n\t\t\tformat = format.replace(':SS', '');\n\n\t\tif (BX.type.isNotEmptyString(str))\n\t\t{\n\t\t\tregMonths = '';\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tregMonths = regMonths + '|' + Loc.getMessage('MON_' + i);\n\t\t\t}\n\n\t\t\tlet\n\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\taDate = str.match(expr),\n\t\t\t\taFormat = Loc.getMessage('FORMAT_DATE').match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\taDateArgs = [],\n\t\t\t\taFormatArgs = [],\n\t\t\t\taResult = {};\n\n\t\t\tif (!aDate)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (aDate.length > aFormat.length)\n\t\t\t{\n\t\t\t\taFormat = format.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aDate[i]) !== '')\n\t\t\t\t{\n\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aFormat[i]) != '')\n\t\t\t\t{\n\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet m = BX.util.array_search('MMMM', aFormatArgs);\n\t\t\tif (m > 0)\n\t\t\t{\n\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tm = BX.util.array_search('M', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tk = aFormatArgs[i].toUpperCase();\n\t\t\t\taResult[k] = k == 'T' || k == 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t}\n\n\t\t\tif (aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t{\n\t\t\t\tlet d = new Date();\n\n\t\t\t\tif (bUTC)\n\t\t\t\t{\n\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\td.setUTCHours(0, 0, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\td.setDate(1);\n\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\td.setHours(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet bPM = (aResult['T'] || aResult['TT'] || 'am').toUpperCase() == 'PM';\n\t\t\t\t\t\tlet h = parseInt(aResult['H'] || aResult['G'] || 0, 10);\n\t\t\t\t\t\tif (bPM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h + (h == 12 ? 0 : 12);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH'] || aResult['GG'] || 0, 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\tif (bUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic formatTime(hours, minutes)\n\t{\n\t\tlet day;\n\t\tif (Type.isDate(hours))\n\t\t{\n\t\t\tday = hours;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tday = new Date();\n\t\t\tday.setHours(hours, minutes, 0);\n\t\t}\n\n\t\treturn BX.date.format(Util.getTimeFormatShort(), day.getTime() / 1000);\n\t}\n\n\tstatic formatDate(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateTime(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateTimeFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateUsable(date, showYear = true, showDayOfWeek = false)\n\t{\n\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\t\tlet format = Util.getDateFormat();\n\t\tif (lang === 'ru' || lang === 'ua')\n\t\t{\n\t\t\tformat = showDayOfWeek ? 'l, j F' : 'j F';\n\n\t\t\tif (date.getFullYear\n\t\t\t\t&& date.getFullYear() !== new Date().getFullYear()\n\t\t\t\t&& showYear !== false\n\t\t\t)\n\t\t\t{\n\t\t\t\tformat += ' Y';\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format([\n\t\t\t[\"today\", \"today\"],\n\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t[\"\", format]\n\t\t], date);\n\t}\n\n\tstatic getDayLength()\n\t{\n\t\tif (!Util.DAY_LENGTH)\n\t\t{\n\t\t\tUtil.DAY_LENGTH = 86400000;\n\t\t}\n\t\treturn Util.DAY_LENGTH;\n\t}\n\n\tstatic getDefaultColorList()\n\t{\n\t\treturn ['#86b100', '#0092cc', '#00afc7', '#da9100', '#00b38c', '#de2b24', '#bd7ac9', '#838fa0', '#ab7917', '#e97090'];\n\t}\n\n\tstatic findTargetNode(node, parentCont)\n\t{\n\t\tlet res = false;\n\t\tif (node)\n\t\t{\n\t\t\tlet prefix = 'data-bx-calendar', i;\n\n\t\t\tif (node.attributes && node.attributes.length)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < node.attributes.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (node.attributes[i].name && node.attributes[i].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t{\n\t\t\t\t\t\tres = node;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!res)\n\t\t\t{\n\t\t\t\tres = BX.findParent(node, function(n) {\n\t\t\t\t\tlet j;\n\t\t\t\t\tif (n.attributes && n.attributes.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0; j < n.attributes.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (n.attributes[j].name && n.attributes[j].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}, parentCont);\n\t\t\t}\n\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tstatic getFollowedUserList(userId)\n\t{\n\t\treturn [];\n\t}\n\n\tstatic getWeekDayByInd(index)\n\t{\n\t\treturn ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'][index];\n\t}\n\n\tstatic getLoader(size, className)\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"${className || 'calendar-loader'}\">\n\t\t\t<svg class=\"calendar-loader-circular\"\n\t\t\t\tstyle=\"width:${parseInt(size)}px; height:${parseInt(size)}px;\"\n\t\t\t\tviewBox=\"25 25 50 50\">\n\t\t\t\t\t<circle class=\"calendar-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t\t\t<circle class=\"calendar-loader-inner-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t</svg>\n\t\t</div>\n`;\n\t};\n\n\tstatic getDayCode(date)\n\t{\n\t\treturn date.getFullYear() + '-' + (\"0\" + (~~(date.getMonth() + 1))).substr(-2, 2) + '-' + (\"0\" + (~~(date.getDate()))).substr(-2, 2);\n\t}\n\n\tstatic getTextColor(color)\n\t{\n\t\tif (!color)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color.charAt(0) === \"#\")\n\t\t{\n\t\t\tcolor = color.substring(1, 7);\n\t\t}\n\n\t\tlet\n\t\t\tr = parseInt(color.substring(0, 2), 16),\n\t\t\tg = parseInt(color.substring(2, 4), 16),\n\t\t\tb = parseInt(color.substring(4, 6), 16),\n\t\t\tlight = (r * 0.8 + g + b * 0.2) / 510 * 100;\n\n\t\treturn light < 50;\n\t}\n\n\tstatic getKeyCode(key)\n\t{\n\t\tif (!Type.isString(key))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet KEY_CODES = {\n\t\t\t'backspace': 8,\n\t\t\t'enter': 13,\n\t\t\t'escape': 27,\n\t\t\t'space': 32,\n\t\t\t'delete': 46,\n\t\t\t'left': 37,\n\t\t\t'right': 39,\n\t\t\t'up': 38,\n\t\t\t'down': 40,\n\t\t\t'z': 90,\n\t\t\t'y': 89,\n\t\t\t'shift': 16,\n\t\t\t'ctrl': 17,\n\t\t\t'alt': 18,\n\t\t\t'cmd': 91, // 93, 224, 17 Browser dependent\n\t\t\t'cmdRight': 93, // 93, 224, 17 Browser dependent?\n\t\t\t'pageUp': 33,\n\t\t\t'pageDown': 34,\n\t\t\t'd': 68,\n\t\t\t'w': 87,\n\t\t\t'm': 77,\n\t\t\t'a': 65\n\t\t};\n\t\treturn KEY_CODES[key.toLowerCase()];\n\t}\n\n\tstatic getUsableDateTime(timestamp, roundMin)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\n\t\tlet r = (roundMin || 10) * 60 * 1000;\n\t\ttimestamp = Math.ceil(timestamp / r) * r;\n\n\t\treturn new Date(timestamp);\n\t}\n\n\tstatic showNotification(message, actions = null)\n\t{\n\t\tif (Type.isString(message) && message !== '')\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message,\n\t\t\t\tactions: actions\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showFieldError(message, wrap, options)\n\t{\n\t\tif (Type.isDomNode(wrap) && Type.isString(message) && message !== '')\n\t\t{\n\t\t\tDom.remove(wrap.querySelector('.ui-alert'));\n\n\t\t\tlet alert = new BX.UI.Alert({\n\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\ticon: BX.UI.Alert.Icon.DANGER,\n\t\t\t\ttext: message\n\t\t\t});\n\n\t\t\tlet alertWrap = alert.getContainer();\n\n\t\t\twrap.appendChild(alertWrap);\n\t\t}\n\t}\n\n\tstatic getDateFormat()\n\t{\n\t\tif (!Util.DATE_FORMAT)\n\t\t{\n\t\t\tUtil.DATE_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATE\"));\n\t\t}\n\t\treturn Util.DATE_FORMAT;\n\t}\n\n\tstatic setDayOfWeekMonthFormat(value)\n\t{\n\t\tUtil.dayOfWeekMonthFormat = value;\n\t}\n\n\tstatic getDayOfWeekMonthFormat()\n\t{\n\t\treturn Util.dayOfWeekMonthFormat || 'l, j F';\n\t}\n\n\tstatic setDayMonthFormat(value)\n\t{\n\t\tUtil.dayMonthFormat = value;\n\t}\n\n\tstatic getDayMonthFormat()\n\t{\n\t\treturn Util.dayMonthFormat || 'j F';\n\t}\n\n\tstatic getDateTimeFormat()\n\t{\n\t\tif (!Util.DATETIME_FORMAT)\n\t\t{\n\t\t\tUtil.DATETIME_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATETIME\"));\n\t\t}\n\t\treturn Util.DATETIME_FORMAT;\n\t}\n\n\tstatic getTimeFormat()\n\t{\n\t\tif (!Util.TIME_FORMAT)\n\t\t{\n\t\t\tif ((Loc.getMessage(\"FORMAT_DATETIME\").substr(0, Loc.getMessage(\"FORMAT_DATE\").length) === Loc.getMessage(\"FORMAT_DATE\")))\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT = BX.util.trim(Util.getDateTimeFormat().substr(Util.getDateFormat().length));\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.util.trim(Loc.getMessage(\"FORMAT_DATETIME\").substr(Loc.getMessage(\"FORMAT_DATE\").length));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS';\n\t\t\t\tUtil.TIME_FORMAT = BX.date.convertBitrixFormat(BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS');\n\t\t\t}\n\t\t}\n\n\t\treturn Util.TIME_FORMAT;\n\t}\n\n\tstatic getTimeFormatShort()\n\t{\n\t\tif (!Util.TIME_FORMAT_SHORT)\n\t\t{\n\t\t\tUtil.TIME_FORMAT_SHORT = Util.getTimeFormat().replace(':s', '');\n\t\t\tUtil.TIME_FORMAT_SHORT_BX = Util.TIME_FORMAT_BX.replace(':SS', '');\n\t\t}\n\t\treturn Util.TIME_FORMAT_SHORT;\n\t}\n\n\tstatic getCurrentUserId()\n\t{\n\t\tif (!Util.currentUserId)\n\t\t{\n\t\t\tUtil.currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\t}\n\t\treturn Util.currentUserId;\n\t}\n\n\tstatic getTimeByInt(intValue)\n\t{\n\t\tintValue = parseInt(intValue);\n\t\tlet h = Math.floor(intValue / 60);\n\t\treturn { hour: h, min: intValue - h * 60 };\n\t}\n\n\tstatic preventSelection(node)\n\t{\n\t\tnode.ondrag = BX.False;\n\t\tnode.ondragstart = BX.False;\n\t\tnode.onselectstart = BX.False;\n\t}\n\n\tstatic getBX()\n\t{\n\t\treturn window.top.BX || window.BX;\n\t}\n\n\tstatic closeAllPopups()\n\t{\n\t\tif (PopupManager.isAnyPopupShown())\n\t\t{\n\t\t\tfor (let i = 0, length = PopupManager._popups.length; i < length; i++)\n\t\t\t{\n\t\t\t\tif (PopupManager._popups[i]\n\t\t\t\t\t&& PopupManager._popups[i].isShown())\n\t\t\t\t{\n\t\t\t\t\tPopupManager._popups[i].close();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic sendAnalyticLabel(label)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.sendAnalyticsLabel', { analyticsLabel: label });\n\t}\n\n\tstatic setOptions(config, additionalParams)\n\t{\n\t\tUtil.config = config;\n\t\tUtil.additionalParams = additionalParams;\n\t}\n\n\tstatic setUserSettings(userSettings)\n\t{\n\t\tUtil.userSettings = userSettings;\n\t}\n\n\tstatic getUserSettings()\n\t{\n\t\treturn Type.isObjectLike(Util.userSettings) ? Util.userSettings : {};\n\t}\n\n\tstatic setCalendarContext(calendarContext)\n\t{\n\t\tUtil.calendarContext = calendarContext;\n\t}\n\n\tstatic getCalendarContext()\n\t{\n\t\treturn Util.calendarContext || null;\n\t}\n\n\tstatic getMeetingStatusList()\n\t{\n\t\treturn ['Y', 'N', 'Q', 'H'];\n\t}\n\n\tstatic checkEmailLimitationPopup()\n\t{\n\t\tconst emailGuestAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst emailGuestLimit = Util.getEventWithEmailGuestLimit();\n\t\treturn emailGuestLimit > 0\n\t\t\t&& (emailGuestAmount === 8\n\t\t\t\t|| emailGuestAmount === 4\n\t\t\t\t|| emailGuestAmount >= emailGuestLimit);\n\t}\n\n\tstatic isEventWithEmailGuestAllowed()\n\t{\n\t\treturn Util.getEventWithEmailGuestLimit() === -1\n\t\t\t|| Util.getEventWithEmailGuestAmount() < Util.getEventWithEmailGuestLimit();\n\t}\n\n\tstatic setEventWithEmailGuestAmount(value)\n\t{\n\t\tUtil.countEventWithEmailGuestAmount = value;\n\t}\n\n\tstatic setEventWithEmailGuestLimit(value)\n\t{\n\t\tUtil.eventWithEmailGuestLimit = value;\n\t}\n\n\tstatic getEventWithEmailGuestAmount()\n\t{\n\t\treturn Util.countEventWithEmailGuestAmount;\n\t}\n\n\tstatic getEventWithEmailGuestLimit()\n\t{\n\t\treturn Util.eventWithEmailGuestLimit;\n\t}\n\n\tstatic setCurrentView(calendarView = null)\n\t{\n\t\tUtil.currentCalendarView = calendarView;\n\t}\n\n\tstatic getCurrentView()\n\t{\n\t\treturn Util.currentCalendarView || null;\n\t}\n\n\tstatic adjustDateForTimezoneOffset(date, timezoneOffset = 0, fullDay = false)\n\t{\n\t\tif (!Type.isDate(date))\n\t\t\tthrow new Error('Wrong type for date attribute. DateTime object expected.')\n\n\t\tif (!parseInt(timezoneOffset) || fullDay === true)\n\t\t\treturn date;\n\n\t\treturn new Date(date.getTime() - parseInt(timezoneOffset) * 1000);\n\t}\n\n\tstatic randomInt(min, max)\n\t{\n\t\treturn Math.round(min - 0.5 + Math.random() * (max - min + 1));\n\t}\n\n\tstatic getRandomColor()\n\t{\n\t\tconst defaultColors = Util.getDefaultColorList();\n\t\treturn defaultColors[Util.randomInt(0, defaultColors.length - 1)];\n\t}\n\n\tstatic setAccessNames(accessNames = {})\n\t{\n\t\tUtil.accessNames = {};\n\t\tfor (let code in accessNames)\n\t\t{\n\t\t\tif (accessNames.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tUtil.setAccessName(code, accessNames[code])\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getAccessName(code)\n\t{\n\t\treturn Util.accessNames[code] || code;\n\t}\n\n\tstatic setAccessName(code, name)\n\t{\n\t\tUtil.accessNames[code] = name;\n\t}\n\n\tstatic getRandomInt(numCount = 6)\n\t{\n\t\treturn Math.round(Math.random() * Math.pow(10, numCount));\n\t}\n\n\tstatic displayError(errors, reloadPage)\n\t{\n\t\tif (Type.isArray(errors))\n\t\t{\n\t\t\tlet errorMessage = '';\n\t\t\tfor (let i = 0; i < errors.length; i++)\n\t\t\t{\n\t\t\t\terrorMessage += errors[i].message + \"\\n\";\n\t\t\t}\n\t\t\terrors = errorMessage;\n\t\t}\n\n\t\tsetTimeout(() => {\n\n\t\t\talert(errors || '[Bitrix Calendar] Request error');\n\t\t\tif (reloadPage)\n\t\t\t{\n\t\t\t\tlocation.reload();\n\t\t\t}\n\n\t\t}, 200);\n\t}\n\n\tstatic convertEntityToAccessCode(entity)\n\t{\n\t\tif (Type.isObjectLike(entity))\n\t\t{\n\t\t\tif (entity.entityId === 'meta-user' && entity.id === 'all-users')\n\t\t\t{\n\t\t\t\treturn 'UA';\n\t\t\t}\n\t\t\telse if (entity.entityId === 'user')\n\t\t\t{\n\t\t\t\treturn 'U' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'project')\n\t\t\t{\n\t\t\t\treturn 'SG' + entity.id + '_K'; // for all members of group\n\t\t\t}\n\t\t\telse if (entity.entityId === 'department')\n\t\t\t{\n\t\t\t\treturn 'DR' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'group')\n\t\t\t{\n\t\t\t\treturn entity.id;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic extendPlannerWatches({ entries, userId })\n\t{\n\t\tentries.forEach((entry) => {\n\t\t\tif (entry.type === 'user' && parseInt(entry.id) !== parseInt(userId))\n\t\t\t{\n\t\t\t\tconst tag = Util.PLANNER_PULL_TAG.replace('#USER_ID#', entry.id);\n\t\t\t\tif (!Util.PLANNER_WATCH_LIST.includes(tag))\n\t\t\t\t{\n\t\t\t\t\tPull.extendWatch(tag);\n\t\t\t\t\tUtil.PLANNER_WATCH_LIST.push(tag);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic clearPlannerWatches()\n\t{\n\t\tUtil.PLANNER_WATCH_LIST.forEach((tag) => {\n\t\t\tPull.clearWatch(tag);\n\t\t});\n\t\tUtil.PLANNER_WATCH_LIST = [];\n\t}\n\n\tstatic registerRequestId()\n\t{\n\t\tconst requestUid = BX.Calendar.Util.getRandomInt(8);\n\t\tUtil.REQUEST_ID_LIST.push(requestUid);\n\t\treturn requestUid;\n\t}\n\n\tstatic unregisterRequestId(requestUid)\n\t{\n\t\tUtil.REQUEST_ID_LIST = Util.REQUEST_ID_LIST.filter((uid) => {return uid !== requestUid});\n\t}\n\n\tstatic checkRequestId(requestUid)\n\t{\n\t\trequestUid = parseInt(requestUid);\n\t\treturn !Type.isInteger(requestUid) || !Util.REQUEST_ID_LIST.includes(requestUid);\n\t}\n\n\tstatic initHintNode(hintNode)\n\t{\n\t\tconst bx = Util.getBX();\n\t\tif (Type.isElementNode(hintNode) && bx?.UI?.Hint)\n\t\t{\n\t\t\tif (bx?.UI?.Hint?.popup)\n\t\t\t{\n\t\t\t\tbx.UI.Hint.popup.destroy();\n\t\t\t\tbx.UI.Hint.popup = null;\n\t\t\t\tbx.UI.Hint.content = null;\n\t\t\t}\n\t\t\tbx.UI.Hint.initNode(hintNode);\n\t\t}\n\t}\n\n\tstatic documentIsDisplayingNow()\n\t{\n\t\treturn !document.hidden;\n\t}\n\n\tstatic removeHash()\n\t{\n\t\tif (\"pushState\" in history)\n\t\t{\n\t\t\thistory.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\t\t}\n\t\telse\n\t\t\t{\n\t\t\t// Prevent scrolling by storing the page's current scroll offset\n\t\t\tlet scrollV = document.body.scrollTop;\n\t\t\tlet scrollH = document.body.scrollLeft;\n\t\t\twindow.location.hash = \"\";\n\t\t\t// Restore the scroll offset, should be flicker free\n\t\t\tdocument.body.scrollTop = scrollV;\n\t\t\tdocument.body.scrollLeft = scrollH;\n\t\t}\n\t}\n\t\n\t// TODO: move to syncManager\n\tstatic setIphoneConnectionStatus(value)\n\t{\n\t\tUtil.iphoneConnectionStatus = value;\n\t}\n\t\n\tstatic isIphoneConnected()\n\t{\n\t\treturn Util.iphoneConnectionStatus;\n\t}\n\t\n\tstatic setMacConnectionStatus(value)\n\t{\n\t\tUtil.macConnectionStatus = value;\n\t}\n\t\n\tstatic isMacConnected()\n\t{\n\t\treturn Util.macConnectionStatus;\n\t}\n}"],"names":["window","BX","Main","Date","DateTimeFormat","AM_PM_MODE","UPPER","LOWER","NONE","format","timestamp","now","utc","_this","date","Utils","isDate","getTime","isNumber","nowDate","isUTC","isArray","_formatDateInterval","isNotEmptyString","replaceMap","match","map","x","length","forEach","element","index","replace","formatRegex","dateFormats","d","strPadLeft","getDate","toString","D","_getMessage","getDay","j","l","N","S","w","z","firstDay","getFullYear","currentDay","getMonth","Math","ceil","W","newDate","dayNumber","setDate","firstThursday","setMonth","weekNumber","F","f","m","M","n","t","lastMonthDay","UTC","L","year","o","correctDate","Y","y","slice","a","getHours","A","B","swatch","getUTCHours","getUTCMinutes","getUTCSeconds","floor","g","G","h","H","i","getMinutes","s","getSeconds","u","getMilliseconds","e","I","firstJanuary","firstJanuaryUTC","firstJuly","firstJulyUTC","O","timezoneOffset","getTimezoneOffset","timezoneOffsetAbs","abs","P","difference","substr","Z","c","_replaceDateFormat","r","U","sago","_formatDateMessage","intval","sdiff","sshort","iago","idiff","isago","minutesAgo","result","secondsAgo","ishort","Hago","Hdiff","Hshort","yesterday","today","tommorow","tomorrow","dago","ddiff","dshort","mago","mdiff","mshort","Yago","Ydiff","Yshort","ampm","isAmPmMode","timeFormat","convertBitrixFormat","X","day","time","Q","daysAgo","cutZeroTime","formats","formatInterval","formatValue","exec","month","todayStart","todayEnd","yesterdayStart","yesterdayEnd","tomorrowStart","tomorrowEnd","getUTCFullYear","getUTCDate","getUTCMonth","getUTCMilliseconds","getUTCDay","dayValue","setUTCDate","monthValue","setUTCMonth","value","messages","val","dec","message","matchFull","number","convertToUTC","getNewDate","getBrowserTimestamp","parseInt","browserOffset","getServerTimestamp","round","formatLastActivityDate","formattedDate","returnConst","parse","str","formatDate","formatDatetime","regMonths","expr","RegExp","aDate","aFormat","cnt","aDateArgs","aFormatArgs","aResult","trim","array_search","getMonthIndex","k","toUpperCase","setUTCFullYear","setUTCHours","setFullYear","setHours","isNaN","bPM","q","wordMonthCut","wordMonth","item","Object","prototype","call","Number","isString","String","input","padLength","padString","needle","haystack","Util","parseTime","parseDate1","getDateFormat","getTimeRounded","parseDate","bUTC","trimSeconds","Loc","getMessage","util","type","getNumMonth","formatTime","hours","minutes","Type","getTimeFormatShort","formatDateTime","getDateTimeFormat","formatDateUsable","showYear","showDayOfWeek","lang","getDayLength","DAY_LENGTH","getDefaultColorList","findTargetNode","node","parentCont","res","prefix","attributes","name","findParent","getFollowedUserList","userId","getWeekDayByInd","getLoader","size","className","Tag","render","getDayCode","getTextColor","color","charAt","substring","b","light","getKeyCode","key","KEY_CODES","toLowerCase","getUsableDateTime","roundMin","showNotification","actions","UI","Notification","Center","notify","content","showFieldError","wrap","options","isDomNode","Dom","remove","querySelector","alert","Alert","Color","DANGER","icon","Icon","text","alertWrap","getContainer","appendChild","DATE_FORMAT","setDayOfWeekMonthFormat","dayOfWeekMonthFormat","getDayOfWeekMonthFormat","setDayMonthFormat","dayMonthFormat","getDayMonthFormat","DATETIME_FORMAT","getTimeFormat","TIME_FORMAT","TIME_FORMAT_BX","TIME_FORMAT_SHORT","TIME_FORMAT_SHORT_BX","getCurrentUserId","currentUserId","getTimeByInt","intValue","hour","min","preventSelection","ondrag","False","ondragstart","onselectstart","getBX","top","closeAllPopups","PopupManager","isAnyPopupShown","_popups","isShown","close","sendAnalyticLabel","label","ajax","runAction","analyticsLabel","setOptions","config","additionalParams","setUserSettings","userSettings","getUserSettings","isObjectLike","setCalendarContext","calendarContext","getCalendarContext","getMeetingStatusList","checkEmailLimitationPopup","emailGuestAmount","getEventWithEmailGuestAmount","emailGuestLimit","getEventWithEmailGuestLimit","isEventWithEmailGuestAllowed","setEventWithEmailGuestAmount","countEventWithEmailGuestAmount","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","setCurrentView","calendarView","currentCalendarView","getCurrentView","adjustDateForTimezoneOffset","fullDay","Error","randomInt","max","random","getRandomColor","defaultColors","setAccessNames","accessNames","code","hasOwnProperty","setAccessName","getAccessName","getRandomInt","numCount","pow","displayError","errors","reloadPage","errorMessage","setTimeout","location","reload","convertEntityToAccessCode","entity","entityId","id","extendPlannerWatches","entries","entry","tag","PLANNER_PULL_TAG","PLANNER_WATCH_LIST","includes","Pull","extendWatch","push","clearPlannerWatches","clearWatch","registerRequestId","requestUid","Calendar","REQUEST_ID_LIST","unregisterRequestId","filter","uid","checkRequestId","isInteger","initHintNode","hintNode","bx","isElementNode","Hint","popup","destroy","initNode","documentIsDisplayingNow","document","hidden","removeHash","history","pushState","title","pathname","search","scrollV","body","scrollTop","scrollH","scrollLeft","hash","setIphoneConnectionStatus","iphoneConnectionStatus","isIphoneConnected","setMacConnectionStatus","macConnectionStatus","isMacConnected"],"mappings":";;;;CAAC,CAAC,UAASA,MAAT,EACF;CACC;CACD;CACA;CACA;CAEC,MAAI,CAACA,MAAM,CAACC,EAAZ,EACA;CACCD,IAAAA,MAAM,CAACC,EAAP,GAAY,EAAZ;CACA;;CAED,MAAI,CAACD,MAAM,CAACC,EAAP,CAAUC,IAAf,EACA;CACCF,IAAAA,MAAM,CAACC,EAAP,CAAUC,IAAV,GAAiB,EAAjB;CACA,GAHD,MAIK,IAAIF,MAAM,CAACC,EAAP,CAAUC,IAAV,CAAeC,IAAnB,EACL;CACC;CACA;;CAED,MAAIF,EAAE,GAAGD,MAAM,CAACC,EAAhB;CAEAA,EAAAA,EAAE,CAACC,IAAH,CAAQC,IAAR,GAAeF,EAAE,CAACC,IAAH,CAAQE,cAAR,GAAyB;CAEvCC,IAAAA,UAAU,EAAE;CACXC,MAAAA,KAAK,EAAE,CADI;CAEXC,MAAAA,KAAK,EAAE,CAFI;CAGXC,MAAAA,IAAI,EAAE;CAHK,KAF2B;CAQvCC,IAAAA,MAAM,EAAE,UAASA,MAAT,EAAiBC,SAAjB,EAA4BC,GAA5B,EAAiCC,GAAjC,EACR;CACC,UAAIC,KAAK,GAAG,IAAZ;CAEA;CACH;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;;CACG,UAAIC,IAAI,GAAGC,KAAK,CAACC,MAAN,CAAaN,SAAb,IAA0B,IAAIP,IAAJ,CAASO,SAAS,CAACO,OAAV,EAAT,CAA1B,GAA0DF,KAAK,CAACG,QAAN,CAAeR,SAAf,IAA4B,IAAIP,IAAJ,CAASO,SAAS,GAAG,IAArB,CAA5B,GAAyD,IAAIP,IAAJ,EAA9H;CACA,UAAIgB,OAAO,GAAGJ,KAAK,CAACC,MAAN,CAAaL,GAAb,IAAoB,IAAIR,IAAJ,CAASQ,GAAG,CAACM,OAAJ,EAAT,CAApB,GAA8CF,KAAK,CAACG,QAAN,CAAeP,GAAf,IAAsB,IAAIR,IAAJ,CAASQ,GAAG,GAAG,IAAf,CAAtB,GAA6C,IAAIR,IAAJ,EAAzG;CACA,UAAIiB,KAAK,GAAG,CAAC,CAACR,GAAd;CAEA,UAAIG,KAAK,CAACM,OAAN,CAAcZ,MAAd,CAAJ,EACC,OAAOa,mBAAmB,CAACb,MAAD,EAASK,IAAT,EAAeK,OAAf,EAAwBC,KAAxB,CAA1B,CADD,KAEK,IAAI,CAACL,KAAK,CAACQ,gBAAN,CAAuBd,MAAvB,CAAL,EACJ,OAAO,EAAP;CAED,UAAIe,UAAU,GAAG,CAACf,MAAM,CAACgB,KAAP,CAAa,eAAb,KAAiC,EAAlC,EAAsCC,GAAtC,CAA0C,UAASC,CAAT,EAAY;CAAE,eAAO,CAACA,CAAC,CAACF,KAAF,CAAQ,QAAR,KAAqB,CAAC,EAAD,CAAtB,EAA4B,CAA5B,CAAP;CAAwC,OAAhG,CAAjB;;CACA,UAAID,UAAU,CAACI,MAAX,GAAoB,CAAxB,EACA;CACCJ,QAAAA,UAAU,CAACK,OAAX,CAAmB,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;CAC3CtB,UAAAA,MAAM,GAAGA,MAAM,CAACuB,OAAP,CAAe,OAAKF,OAAL,GAAa,IAA5B,EAAkC,OAAKC,KAAL,GAAW,IAA7C,CAAT;CACA,SAFD;CAGA;;CAED,UAAIE,WAAW,GAAG,iKAAlB;CAEA,UAAIC,WAAW,GAAG;CACjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOpB,KAAK,CAACqB,UAAN,CAAiBC,OAAO,CAACvB,IAAD,CAAP,CAAcwB,QAAd,EAAjB,EAA2C,CAA3C,EAA8C,GAA9C,CAAP;CACA,SAJgB;CAMjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO1B,KAAK,CAAC2B,WAAN,CAAkB,SAASC,MAAM,CAAC3B,IAAD,CAAjC,CAAP;CACA,SATgB;CAWjB4B,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOL,OAAO,CAACvB,IAAD,CAAd;CACA,SAdgB;CAgBjB6B,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO9B,KAAK,CAAC2B,WAAN,CAAkB,iBAAiBC,MAAM,CAAC3B,IAAD,CAAzC,CAAP;CACA,SAnBgB;CAqBjB8B,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOH,MAAM,CAAC3B,IAAD,CAAN,IAAgB,CAAvB;CACA,SAxBgB;CA0BjB+B,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIR,OAAO,CAACvB,IAAD,CAAP,GAAgB,EAAhB,IAAsB,CAAtB,IAA2BuB,OAAO,CAACvB,IAAD,CAAP,IAAiB,EAAhD,EACC,OAAO,IAAP,CADD,KAEK,IAAIuB,OAAO,CAACvB,IAAD,CAAP,GAAgB,EAAhB,IAAsB,CAAtB,IAA2BuB,OAAO,CAACvB,IAAD,CAAP,IAAiB,EAAhD,EACJ,OAAO,IAAP,CADI,KAEA,IAAIuB,OAAO,CAACvB,IAAD,CAAP,GAAgB,EAAhB,IAAsB,CAAtB,IAA2BuB,OAAO,CAACvB,IAAD,CAAP,IAAiB,EAAhD,EACJ,OAAO,IAAP,CADI,KAGJ,OAAO,IAAP;CACD,SApCgB;CAsCjBgC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOL,MAAM,CAAC3B,IAAD,CAAb;CACA,SAzCgB;CA2CjBiC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,QAAQ,GAAG,IAAI7C,IAAJ,CAAS8C,WAAW,CAACnC,IAAD,CAApB,EAA4B,CAA5B,EAA+B,CAA/B,CAAf;CACA,cAAIoC,UAAU,GAAG,IAAI/C,IAAJ,CAAS8C,WAAW,CAACnC,IAAD,CAApB,EAA4BqC,QAAQ,CAACrC,IAAD,CAApC,EAA4CuB,OAAO,CAACvB,IAAD,CAAnD,CAAjB;CACA,iBAAOsC,IAAI,CAACC,IAAL,CAAW,CAACH,UAAU,GAAGF,QAAd,KAA2B,KAAK,IAAL,GAAY,IAAvC,CAAX,CAAP;CACA,SAhDgB;CAkDjBM,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,OAAO,GAAI,IAAIpD,IAAJ,CAASW,IAAI,CAACG,OAAL,EAAT,CAAf;CACA,cAAIuC,SAAS,GAAK,CAACf,MAAM,CAAC3B,IAAD,CAAN,GAAe,CAAhB,IAAqB,CAAvC;CACA2C,UAAAA,OAAO,CAACF,OAAD,EAAUlB,OAAO,CAACkB,OAAD,CAAP,GAAmBC,SAAnB,GAA+B,CAAzC,CAAP;CACA,cAAIE,aAAa,GAAGH,OAAO,CAACtC,OAAR,EAApB;CACA0C,UAAAA,QAAQ,CAACJ,OAAD,EAAU,CAAV,EAAa,CAAb,CAAR;CACA,cAAId,MAAM,CAACc,OAAD,CAAN,IAAmB,CAAvB,EACCI,QAAQ,CAACJ,OAAD,EAAU,CAAV,EAAa,IAAI,CAAE,IAAId,MAAM,CAACc,OAAD,CAAX,GAAwB,CAAzB,IAA8B,CAA/C,CAAR;CACD,cAAIK,UAAU,GAAG,IAAIR,IAAI,CAACC,IAAL,CAAU,CAACK,aAAa,GAAGH,OAAjB,KAA6B,IAAI,EAAJ,GAAS,IAAT,GAAgB,IAA7C,CAAV,CAArB;CACA,iBAAOxC,KAAK,CAACqB,UAAN,CAAiBwB,UAAU,CAACtB,QAAX,EAAjB,EAAwC,CAAxC,EAA2C,GAA3C,CAAP;CACA,SA7DgB;CA+DjBuB,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOhD,KAAK,CAAC2B,WAAN,CAAkB,YAAYW,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAA7B,IAAkC,IAApD,CAAP;CACA,SAlEgB;CAoEjBgD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOjD,KAAK,CAAC2B,WAAN,CAAkB,YAAYW,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAA7B,CAAlB,CAAP;CACA,SAvEgB;CAyEjBiD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOhD,KAAK,CAACqB,UAAN,CAAiB,CAACe,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAAlB,EAAqBwB,QAArB,EAAjB,EAAkD,CAAlD,EAAqD,GAArD,CAAP;CACA,SA5EgB;CA8EjB0B,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOnD,KAAK,CAAC2B,WAAN,CAAkB,UAAUW,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAA3B,CAAlB,CAAP;CACA,SAjFgB;CAmFjBmD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOd,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAAxB;CACA,SAtFgB;CAwFjBoD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,YAAY,GAAG/C,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASnB,WAAW,CAACnC,IAAD,CAApB,EAA4BqC,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAA7C,EAAgD,CAAhD,CAAT,CAAH,GAAkE,IAAIX,IAAJ,CAAS8C,WAAW,CAACnC,IAAD,CAApB,EAA4BqC,QAAQ,CAACrC,IAAD,CAAR,GAAiB,CAA7C,EAAgD,CAAhD,CAA1F;CACA,iBAAOuB,OAAO,CAAC8B,YAAD,CAAd;CACA,SA5FgB;CA8FjBE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,IAAI,GAAGrB,WAAW,CAACnC,IAAD,CAAtB;CACA,iBAAQwD,IAAI,GAAG,CAAP,IAAY,CAAZ,IAAiBA,IAAI,GAAG,GAAP,IAAc,CAA/B,IAAoCA,IAAI,GAAG,GAAP,IAAc,CAAlD,GAAsD,CAAtD,GAA0D,CAAlE;CACA,SAlGgB;CAoGjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,WAAW,GAAI,IAAIrE,IAAJ,CAASW,IAAI,CAACG,OAAL,EAAT,CAAnB;CACAwC,UAAAA,OAAO,CAACe,WAAD,EAAcnC,OAAO,CAACmC,WAAD,CAAP,GAAwB,CAAC/B,MAAM,CAAC3B,IAAD,CAAN,GAAe,CAAhB,IAAqB,CAA7C,GAAkD,CAAhE,CAAP;CACA,iBAAOmC,WAAW,CAACuB,WAAD,CAAlB;CACA,SAzGgB;CA2GjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOxB,WAAW,CAACnC,IAAD,CAAlB;CACA,SA9GgB;CAgHjB4D,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOzB,WAAW,CAACnC,IAAD,CAAX,CAAkBwB,QAAlB,GAA6BqC,KAA7B,CAAmC,CAAnC,CAAP;CACA,SAnHgB;CAqHjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOC,QAAQ,CAAC/D,IAAD,CAAR,GAAiB,EAAjB,GAAsB,IAAtB,GAA6B,IAApC;CACA,SAxHgB;CA0HjBgE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOD,QAAQ,CAAC/D,IAAD,CAAR,GAAiB,EAAjB,GAAsB,IAAtB,GAA6B,IAApC;CACA,SA7HgB;CA+HjBiE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,cAAIC,MAAM,GAAI,CAAClE,IAAI,CAACmE,WAAL,KAAqB,CAAtB,IAA2B,EAA5B,GAAkCnE,IAAI,CAACoE,aAAL,KAAuB,EAAzD,GAA8DpE,IAAI,CAACqE,aAAL,KAAuB,IAAlG;CACA,iBAAOpE,KAAK,CAACqB,UAAN,CAAiBgB,IAAI,CAACgC,KAAL,CAAWJ,MAAM,GAAG,IAAT,GAAgB,EAA3B,EAA+B1C,QAA/B,EAAjB,EAA4D,CAA5D,EAA+D,GAA/D,CAAP;CACA,SAnIgB;CAqIjB+C,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOR,QAAQ,CAAC/D,IAAD,CAAR,GAAiB,EAAjB,IAAuB,EAA9B;CACA,SAxIgB;CA0IjBwE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOT,QAAQ,CAAC/D,IAAD,CAAf;CACA,SA7IgB;CA+IjByE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOxE,KAAK,CAACqB,UAAN,CAAiB,CAACyC,QAAQ,CAAC/D,IAAD,CAAR,GAAiB,EAAjB,IAAuB,EAAxB,EAA4BwB,QAA5B,EAAjB,EAAyD,CAAzD,EAA4D,GAA5D,CAAP;CACA,SAlJgB;CAoJjBkD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAOzE,KAAK,CAACqB,UAAN,CAAiByC,QAAQ,CAAC/D,IAAD,CAAR,CAAewB,QAAf,EAAjB,EAA4C,CAA5C,EAA+C,GAA/C,CAAP;CACA,SAvJgB;CAyJjBmD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO1E,KAAK,CAACqB,UAAN,CAAiBsD,UAAU,CAAC5E,IAAD,CAAV,CAAiBwB,QAAjB,EAAjB,EAA8C,CAA9C,EAAiD,GAAjD,CAAP;CACA,SA5JgB;CA8JjBqD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO5E,KAAK,CAACqB,UAAN,CAAiBwD,UAAU,CAAC9E,IAAD,CAAV,CAAiBwB,QAAjB,EAAjB,EAA8C,CAA9C,EAAiD,GAAjD,CAAP;CACA,SAjKgB;CAmKjBuD,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO9E,KAAK,CAACqB,UAAN,CAAiB,CAAC0D,eAAe,CAAChF,IAAD,CAAf,GAAwB,IAAzB,EAA+BwB,QAA/B,EAAjB,EAA4D,CAA5D,EAA+D,GAA/D,CAAP;CACA,SAtKgB;CAwKjByD,QAAAA,CAAC,EAAG,YAAW;CACd,cAAI3E,KAAJ,EACC,OAAO,KAAP;CACD,iBAAO,EAAP;CACA,SA5KgB;CA8KjB4E,QAAAA,CAAC,EAAG,YAAW;CACd,cAAI5E,KAAJ,EACC,OAAO,CAAP,CAFa;;CAKd,cAAI6E,YAAY,GAAG,IAAI9F,IAAJ,CAAS8C,WAAW,CAACnC,IAAD,CAApB,EAA4B,CAA5B,EAA+B,CAA/B,CAAnB;CACA,cAAIoF,eAAe,GAAG/F,IAAI,CAACiE,GAAL,CAASnB,WAAW,CAACnC,IAAD,CAApB,EAA4B,CAA5B,EAA+B,CAA/B,CAAtB;CACA,cAAIqF,SAAS,GAAG,IAAIhG,IAAJ,CAAS8C,WAAW,CAACnC,IAAD,CAApB,EAA4B,CAA5B,EAA+B,CAA/B,CAAhB;CACA,cAAIsF,YAAY,GAAGjG,IAAI,CAACiE,GAAL,CAASnB,WAAW,CAACnC,IAAD,CAApB,EAA4B,CAA5B,EAA+B,CAA/B,CAAnB;CACA,iBAAO,KAAMmF,YAAY,GAAGC,eAAhB,KAAsCC,SAAS,GAAGC,YAAvD,CAAP;CACA,SAxLgB;CA0LjBC,QAAAA,CAAC,EAAG,YAAW;CACd,cAAIjF,KAAJ,EACC,OAAO,OAAP,CAFa;;CAKd,cAAIkF,cAAc,GAAGxF,IAAI,CAACyF,iBAAL,EAArB;CACA,cAAIC,iBAAiB,GAAGpD,IAAI,CAACqD,GAAL,CAASH,cAAT,CAAxB;CACA,iBAAO,CAACA,cAAc,GAAG,CAAjB,GAAqB,GAArB,GAA2B,GAA5B,IAAmCvF,KAAK,CAACqB,UAAN,CAAiB,CAACgB,IAAI,CAACgC,KAAL,CAAWoB,iBAAiB,GAAG,EAA/B,IAAqC,GAArC,GAA2CA,iBAAiB,GAAG,EAAhE,EAAoElE,QAApE,EAAjB,EAAiG,CAAjG,EAAoG,GAApG,CAA1C;CACA,SAlMgB;CAoMjBoE,QAAAA,CAAC,EAAG,YAAW;CACd,cAAItF,KAAJ,EACC,OAAO,QAAP,CAFa;;CAKd,cAAIuF,UAAU,GAAG,KAAKN,CAAL,EAAjB;CACA,iBAAOM,UAAU,CAACC,MAAX,CAAkB,CAAlB,EAAqB,CAArB,IAA0B,GAA1B,GAAgCD,UAAU,CAACC,MAAX,CAAkB,CAAlB,CAAvC;CACA,SA3MgB;CA6MjBC,QAAAA,CAAC,EAAG,YAAW;CACd,cAAIzF,KAAJ,EACC,OAAO,CAAP,CAFa;CAId;;CACA,iBAAO,CAACN,IAAI,CAACyF,iBAAL,EAAD,GAA4B,EAAnC;CACA,SAnNgB;CAqNjBO,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO,iBAAiB9E,OAAjB,CAAyBC,WAAzB,EAAsC8E,kBAAtC,CAAP;CACA,SAxNgB;CA0NjBC,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO,mBAAmBhF,OAAnB,CAA2BC,WAA3B,EAAwC8E,kBAAxC,CAAP;CACA,SA7NgB;CA+NjBE,QAAAA,CAAC,EAAG,YAAW;CACd;CACA,iBAAO7D,IAAI,CAACgC,KAAL,CAAWtE,IAAI,CAACG,OAAL,KAAiB,IAA5B,CAAP;CACA,SAlOgB;CAoOjBiG,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOC,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,IAApB,CAAP,EAAkC;CAC1D,iBAAM,iBADoD;CAE1D,iBAAM,iBAFoD;CAG1D,qBAAU,qBAHgD;CAI1D,qBAAU,qBAJgD;CAK1D,uBAAY,uBAL8C;CAM1D,yBAAc;CAN4C,WAAlC,CAAzB;CAQA,SA7OgB;CA+OjBuG,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOF,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,IAApB,CAAP,EAAkC;CAC1D,iBAAM,kBADoD;CAE1D,iBAAM,kBAFoD;CAG1D,qBAAU,sBAHgD;CAI1D,qBAAU,sBAJgD;CAK1D,uBAAY,wBAL8C;CAM1D,yBAAc;CAN4C,WAAlC,CAAzB;CAQA,SAxPgB;CA0PjBwG,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAOzG,KAAK,CAAC2B,WAAN,CAAkB,iBAAlB,EAAqCR,OAArC,CAA6C,UAA7C,EAAyDoF,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,IAApB,CAA/D,CAAP;CACA,SA5PgB;CA8PjByG,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOJ,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,IAAzB,CAAP,EAAuC;CAC/D,iBAAM,iBADyD;CAE/D,iBAAM,iBAFyD;CAG/D,qBAAU,qBAHqD;CAI/D,qBAAU,qBAJqD;CAK/D,uBAAY,uBALmD;CAM/D,yBAAc;CANiD,WAAvC,CAAzB;CAQA,SAvQgB;CAyQjB0G,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOL,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,IAAzB,CAAP,EAAuC;CAC/D,iBAAM,kBADyD;CAE/D,iBAAM,kBAFyD;CAG/D,qBAAU,sBAHqD;CAI/D,qBAAU,sBAJqD;CAK/D,uBAAY,wBALmD;CAM/D,yBAAc;CANiD,WAAvC,CAAzB;CAQA,SAlRgB;CAoRjB2G,QAAAA,KAAK,EAAG,YAAW;CAClB,cAAIC,UAAU,GAAGN,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,IAAzB,CAAvB;;CACA,cAAI6G,MAAM,GAAGR,kBAAkB,CAACO,UAAD,EAAa;CAC3C,iBAAM,aADqC;CAE3C,iBAAM,aAFqC;CAG3C,qBAAU,iBAHiC;CAI3C,qBAAU,iBAJiC;CAK3C,uBAAY,mBAL+B;CAM3C,yBAAc;CAN6B,WAAb,CAA/B;;CASAC,UAAAA,MAAM,IAAI,GAAV;CAEA,cAAIC,UAAU,GAAGR,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,IAApB,CAAN,GAAmC4G,UAAU,GAAG,EAAjE;CACAC,UAAAA,MAAM,IAAIR,kBAAkB,CAACS,UAAD,EAAa;CACxC,iBAAM,iBADkC;CAExC,iBAAM,iBAFkC;CAGxC,qBAAU,qBAH8B;CAIxC,qBAAU,qBAJ8B;CAKxC,uBAAY,uBAL4B;CAMxC,yBAAc;CAN0B,WAAb,CAA5B;CAQA,iBAAOD,MAAP;CACA,SA3SgB;CA6SjBE,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAOhH,KAAK,CAAC2B,WAAN,CAAkB,iBAAlB,EAAqCR,OAArC,CAA6C,UAA7C,EAAyDoF,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,IAAzB,CAA/D,CAAP;CACA,SA/SgB;CAiTjBgH,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOX,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,IAA9B,CAAP,EAA4C;CACpE,iBAAM,eAD8D;CAEpE,iBAAM,eAF8D;CAGpE,qBAAU,mBAH0D;CAIpE,qBAAU,mBAJ0D;CAKpE,uBAAY,qBALwD;CAMpE,yBAAc;CANsD,WAA5C,CAAzB;CAQA,SA1TgB;CA4TjBiH,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOZ,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,IAA9B,CAAP,EAA4C;CACpE,iBAAM,gBAD8D;CAEpE,iBAAM,gBAF8D;CAGpE,qBAAU,oBAH0D;CAIpE,qBAAU,oBAJ0D;CAKpE,uBAAY,sBALwD;CAMpE,yBAAc;CANsD,WAA5C,CAAzB;CAQA,SArUgB;CAuUjBkH,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAOnH,KAAK,CAAC2B,WAAN,CAAkB,eAAlB,EAAmCR,OAAnC,CAA2C,UAA3C,EAAuDoF,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,IAA9B,CAA7D,CAAP;CACA,SAzUgB;CA2UjBmH,QAAAA,SAAS,EAAG,YAAW;CACtB,iBAAOpH,KAAK,CAAC2B,WAAN,CAAkB,cAAlB,CAAP;CACA,SA7UgB;CA+UjB0F,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOrH,KAAK,CAAC2B,WAAN,CAAkB,UAAlB,CAAP;CACA,SAjVgB;CAmVjB2F,QAAAA,QAAQ,EAAG,YAAW;CACrB,iBAAOtH,KAAK,CAAC2B,WAAN,CAAkB,aAAlB,CAAP;CACA,SArVgB;CAuVjB4F,QAAAA,QAAQ,EAAG,YAAW;CACrB,iBAAOvH,KAAK,CAAC2B,WAAN,CAAkB,aAAlB,CAAP;CACA,SAzVgB;CA2VjB6F,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOlB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,IAAnC,CAAP,EAAiD;CACzE,iBAAM,cADmE;CAEzE,iBAAM,cAFmE;CAGzE,qBAAU,kBAH+D;CAIzE,qBAAU,kBAJ+D;CAKzE,uBAAY,oBAL6D;CAMzE,yBAAc;CAN2D,WAAjD,CAAzB;CAQA,SApWgB;CAsWjBwH,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOnB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,IAAnC,CAAP,EAAiD;CACzE,iBAAM,eADmE;CAEzE,iBAAM,eAFmE;CAGzE,qBAAU,mBAH+D;CAIzE,qBAAU,mBAJ+D;CAKzE,uBAAY,qBAL6D;CAMzE,yBAAc;CAN2D,WAAjD,CAAzB;CAQA,SA/WgB;CAiXjByH,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAO1H,KAAK,CAAC2B,WAAN,CAAkB,cAAlB,EAAkCR,OAAlC,CAA0C,UAA1C,EAAsDoF,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,IAAnC,CAA5D,CAAP;CACA,SAnXgB;CAqXjB0H,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOrB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,EAAlC,GAAuC,IAAxC,CAAP,EAAsD;CAC9E,iBAAM,gBADwE;CAE9E,iBAAM,gBAFwE;CAG9E,qBAAU,oBAHoE;CAI9E,qBAAU,oBAJoE;CAK9E,uBAAY,sBALkE;CAM9E,yBAAc;CANgE,WAAtD,CAAzB;CAQA,SA9XgB;CAgYjB2H,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOtB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,EAAlC,GAAuC,IAAxC,CAAP,EAAsD;CAC9E,iBAAM,iBADwE;CAE9E,iBAAM,iBAFwE;CAG9E,qBAAU,qBAHoE;CAI9E,qBAAU,qBAJoE;CAK9E,uBAAY,uBALkE;CAM9E,yBAAc;CANgE,WAAtD,CAAzB;CAQA,SAzYgB;CA2YjB4H,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAO7H,KAAK,CAAC2B,WAAN,CAAkB,gBAAlB,EAAoCR,OAApC,CAA4C,UAA5C,EAAwDoF,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,EAAlC,GAAuC,IAAxC,CAA9D,CAAP;CACA,SA7YgB;CA+YjB6H,QAAAA,IAAI,EAAG,YAAW;CACjB,iBAAOxB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,GAAlC,GAAwC,IAAzC,CAAP,EAAuD;CAC/E,iBAAM,gBADyE;CAE/E,iBAAM,gBAFyE;CAG/E,qBAAU,oBAHqE;CAI/E,qBAAU,oBAJqE;CAK/E,uBAAY,sBALmE;CAM/E,yBAAc;CANiE,WAAvD,CAAzB;CAQA,SAxZgB;CA0ZjB8H,QAAAA,KAAK,EAAG,YAAW;CAClB,iBAAOzB,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,GAAlC,GAAwC,IAAzC,CAAP,EAAuD;CAC/E,iBAAM,iBADyE;CAE/E,iBAAM,iBAFyE;CAG/E,qBAAU,qBAHqE;CAI/E,qBAAU,qBAJqE;CAK/E,uBAAY,uBALmE;CAM/E,yBAAc;CANiE,WAAvD,CAAzB;CAQA,SAnagB;CAqajB+H,QAAAA,MAAM,EAAG,YAAW;CACnB,iBAAO1B,kBAAkB,CAACC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,GAAlC,GAAwC,IAAzC,CAAP,EAAuD;CAC/E,iBAAM,kBADyE;CAE/E,iBAAM,kBAFyE;CAG/E,qBAAU,sBAHqE;CAI/E,qBAAU,sBAJqE;CAK/E,uBAAY,wBALmE;CAM/E,yBAAc;CANiE,WAAvD,CAAzB;CAQA,SA9agB;CAgbjBa,QAAAA,CAAC,EAAG,YAAW;CACd,cAAImH,IAAI,GAAGjI,KAAK,CAACkI,UAAN,CAAiB,IAAjB,CAAX;;CACA,cAAIC,UAAU,GAAIF,IAAI,KAAKjI,KAAK,CAACR,UAAN,CAAiBE,KAA1B,GAAiC,OAAjC,GAA4CuI,IAAI,KAAKjI,KAAK,CAACR,UAAN,CAAiBC,KAA1B,GAAiC,OAAjC,GAA2C,KAAzG;CAEA,iBAAOO,KAAK,CAACJ,MAAN,CAAa,CACnB,CAAC,UAAD,EAAa,eAAauI,UAA1B,CADmB,EAEnB,CAAC,GAAD,EAAMnI,KAAK,CAACoI,mBAAN,CAA0BpI,KAAK,CAAC2B,WAAN,CAAkB,iBAAlB,CAA1B,EAAgER,OAAhE,CAAwE,KAAxE,EAA+E,EAA/E,CAAN,CAFmB,EAGnB,CAAC,GAAD,EAAM,MAAN,CAHmB,EAInB,CAAC,GAAD,EAAM,MAAN,CAJmB,EAKnB,CAAC,OAAD,EAAU,YAAUgH,UAApB,CALmB,EAMnB,CAAC,WAAD,EAAc,gBAAcA,UAA5B,CANmB,EAOnB,CAAC,EAAD,EAAKnI,KAAK,CAACoI,mBAAN,CAA0BpI,KAAK,CAAC2B,WAAN,CAAkB,iBAAlB,CAA1B,EAAgER,OAAhE,CAAwE,KAAxE,EAA+E,EAA/E,CAAL,CAPmB,CAAb,EAQJlB,IARI,EAQEK,OARF,EAQWC,KARX,CAAP;CASA,SA7bgB;CA+bjB8H,QAAAA,CAAC,EAAG,YAAW;CAEd,cAAIJ,IAAI,GAAGjI,KAAK,CAACkI,UAAN,CAAiB,IAAjB,CAAX;;CACA,cAAIC,UAAU,GAAIF,IAAI,KAAKjI,KAAK,CAACR,UAAN,CAAiBE,KAA1B,GAAiC,OAAjC,GAA4CuI,IAAI,KAAKjI,KAAK,CAACR,UAAN,CAAiBC,KAA1B,GAAiC,OAAjC,GAA2C,KAAzG;;CAEA,cAAI6I,GAAG,GAAGtI,KAAK,CAACJ,MAAN,CAAa,CACtB,CAAC,UAAD,EAAa,UAAb,CADsB,EAEtB,CAAC,GAAD,EAAMI,KAAK,CAACoI,mBAAN,CAA0BpI,KAAK,CAAC2B,WAAN,CAAkB,aAAlB,CAA1B,CAAN,CAFsB,EAGtB,CAAC,OAAD,EAAU,OAAV,CAHsB,EAItB,CAAC,WAAD,EAAc,WAAd,CAJsB,EAKtB,CAAC,EAAD,EAAK3B,KAAK,CAACoI,mBAAN,CAA0BpI,KAAK,CAAC2B,WAAN,CAAkB,aAAlB,CAA1B,CAAL,CALsB,CAAb,EAMP1B,IANO,EAMDK,OANC,EAMQC,KANR,CAAV;;CAQA,cAAIgI,IAAI,GAAGvI,KAAK,CAACJ,MAAN,CAAa,CACvB,CAAC,UAAD,EAAauI,UAAb,CADuB,EAEvB,CAAC,OAAD,EAAUA,UAAV,CAFuB,EAGvB,CAAC,WAAD,EAAcA,UAAd,CAHuB,EAIvB,CAAC,EAAD,EAAK,EAAL,CAJuB,CAAb,EAKRlI,IALQ,EAKFK,OALE,EAKOC,KALP,CAAX;;CAOA,cAAIgI,IAAI,CAACxH,MAAL,GAAc,CAAlB,EACC,OAAOf,KAAK,CAAC2B,WAAN,CAAkB,gBAAlB,EAAoCR,OAApC,CAA4C,QAA5C,EAAsDmH,GAAtD,EAA2DnH,OAA3D,CAAmE,SAAnE,EAA8EoH,IAA9E,CAAP,CADD,KAGC,OAAOD,GAAP;CACD,SAvdgB;CAydjBE,QAAAA,CAAC,EAAG,YAAW;CACd,cAAIC,OAAO,GAAGlC,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,EAAnB,GAAwB,EAAxB,GAA6B,EAA7B,GAAkC,IAAnC,CAApB;CACA,cAAGwI,OAAO,IAAI,CAAd,EACC,OAAOzI,KAAK,CAAC2B,WAAN,CAAkB,eAAlB,EAAmCR,OAAnC,CAA2C,UAA3C,EAAuD,CAAvD,CAAP,CADD,KAGC,OAAOnB,KAAK,CAACJ,MAAN,CAAa,CAAE,CAAC,GAAD,EAAM,OAAN,CAAF,EAAkB,CAAC,GAAD,EAAM,OAAN,CAAlB,EAAkC,CAAC,EAAD,EAAK,OAAL,CAAlC,CAAb,EAAgEK,IAAhE,EAAsEK,OAAtE,CAAP;CACD;CA/dgB,OAAlB;CAkeA,UAAIoI,WAAW,GAAG,KAAlB;;CACA,UAAI9I,MAAM,CAAC,CAAD,CAAN,IAAaA,MAAM,CAAC,CAAD,CAAN,IAAa,GAA9B,EACA;CACC8I,QAAAA,WAAW,GAAG,IAAd;CACA9I,QAAAA,MAAM,GAAGA,MAAM,CAACmG,MAAP,CAAc,CAAd,CAAT;CACA;;CAED,UAAIe,MAAM,GAAGlH,MAAM,CAACuB,OAAP,CAAeC,WAAf,EAA4B8E,kBAA5B,CAAb;;CAEA,UAAIwC,WAAJ,EACA;CACC;CACJ;CACA;CACA;CACA;CAEI5B,QAAAA,MAAM,GAAGA,MAAM,CAAC3F,OAAP,CAAe,iBAAf,EAAkC,EAAlC,EACLA,OADK,CACG,mBADH,EACwB,IADxB,EAELA,OAFK,CAEG,qBAFH,EAE0B,EAF1B,CAAT;CAGA;;CAED,UAAIR,UAAU,CAACI,MAAX,GAAoB,CAAxB,EACA;CACCJ,QAAAA,UAAU,CAACK,OAAX,CAAmB,UAASC,OAAT,EAAkBC,KAAlB,EAAyB;CAC3C4F,UAAAA,MAAM,GAAGA,MAAM,CAAC3F,OAAP,CAAe,OAAKD,KAAL,GAAW,IAA1B,EAAgCD,OAAhC,CAAT;CACA,SAFD;CAGA;;CAED,aAAO6F,MAAP;;CAEA,eAASrG,mBAAT,CAA6BkI,OAA7B,EAAsC1I,IAAtC,EAA4CK,OAA5C,EAAqDC,KAArD,EACA;CACC,YAAIwG,UAAU,GAAGR,MAAM,CAAC,CAACjG,OAAO,GAAGL,IAAX,IAAmB,IAApB,CAAvB;;CACA,aAAK,IAAI2E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+D,OAAO,CAAC5H,MAA5B,EAAoC6D,CAAC,EAArC,EACA;CACC,cAAIgE,cAAc,GAAGD,OAAO,CAAC/D,CAAD,CAAP,CAAW,CAAX,CAArB;CACA,cAAIiE,WAAW,GAAGF,OAAO,CAAC/D,CAAD,CAAP,CAAW,CAAX,CAAlB;CACA,cAAIhE,KAAK,GAAG,IAAZ;;CACA,cAAIgI,cAAc,IAAI,GAAtB,EACA;CACC,gBAAI7B,UAAU,GAAG,EAAjB,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAJD,MAKK,IAAI,CAACK,KAAK,GAAG,mBAAmBkI,IAAnB,CAAwBF,cAAxB,CAAT,KAAqD,IAAzD,EACL;CACC,gBAAIhI,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EACA;CACC,kBACCmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAlB,IACGmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAFtB,EAIA;CACC,uBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,aATD,MAUK,IAAIwG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAtB,EACL;CACC,qBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WAhBI,MAiBA,IAAIqI,cAAc,IAAI,GAAtB,EACL;CACC,gBAAI7B,UAAU,GAAG,KAAK,EAAtB,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAJI,MAKA,IAAI,CAACK,KAAK,GAAG,mBAAmBkI,IAAnB,CAAwBF,cAAxB,CAAT,KAAqD,IAAzD,EACL;CACC,gBAAIhI,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EACA;CACC,kBACCmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAxB,IACGmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAF5B,EAIA;CACC,uBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,aATD,MAUK,IAAIwG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAA5B,EACL;CACC,qBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WAhBI,MAiBA,IAAIqI,cAAc,IAAI,GAAtB,EACL;CACC,gBAAI7B,UAAU,GAAG,KAAK,EAAL,GAAU,EAA3B,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAJI,MAKA,IAAI,CAACK,KAAK,GAAG,mBAAmBkI,IAAnB,CAAwBF,cAAxB,CAAT,KAAqD,IAAzD,EACL;CACC,gBAAIhI,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EACA;CACC,kBACCmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAA7B,IACGmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAFjC,EAIA;CACC,uBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,aATD,MAUK,IAAIwG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAjC,EACL;CACC,qBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WAhBI,MAiBA,IAAIqI,cAAc,IAAI,GAAtB,EACL;CACC,gBAAI7B,UAAU,GAAG,KAAI,EAAJ,GAAS,EAAT,GAAc,EAA/B,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAJI,MAKA,IAAI,CAACK,KAAK,GAAG,mBAAmBkI,IAAnB,CAAwBF,cAAxB,CAAT,KAAqD,IAAzD,EACL;CACC,gBAAIhI,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EACA;CACC,kBACCmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAAlC,IACGmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAFtC,EAIA;CACC,uBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,aATD,MAUK,IAAIwG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAAtC,EACL;CACC,qBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WAhBI,MAiBA,IAAIqI,cAAc,IAAI,GAAtB,EACL;CACC,gBAAI7B,UAAU,GAAG,MAAM,EAAN,GAAW,EAAX,GAAgB,EAAjC,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAJI,MAKA,IAAI,CAACK,KAAK,GAAG,mBAAmBkI,IAAnB,CAAwBF,cAAxB,CAAT,KAAqD,IAAzD,EACL;CACC,gBAAIhI,KAAK,CAAC,CAAD,CAAL,IAAYA,KAAK,CAAC,CAAD,CAArB,EACA;CACC,kBACCmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAArB,GAA0B,EAAvC,IACGmG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAArB,GAA0B,EAF3C,EAIA;CACC,uBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,aATD,MAUK,IAAIwG,UAAU,GAAGnG,KAAK,CAAC,CAAD,CAAL,GAAW,EAAX,GAAgB,EAAhB,GAAqB,EAArB,GAA0B,EAA3C,EACL;CACC,qBAAOZ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WAhBI,MAiBA,IAAIqI,cAAc,IAAI,KAAtB,EACL;CACC,gBAAI3I,IAAI,CAACG,OAAL,MAAkBE,OAAO,CAACF,OAAR,EAAtB,EACA;CACC,qBAAOJ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACA;CACD,WANI,MAOA,IAAIqI,cAAc,IAAI,OAAtB,EACL;CACC,gBAAInF,IAAI,GAAGrB,WAAW,CAAC9B,OAAD,CAAtB;CAAA,gBAAiCyI,KAAK,GAAGzG,QAAQ,CAAChC,OAAD,CAAjD;CAAA,gBAA4DgI,GAAG,GAAG9G,OAAO,CAAClB,OAAD,CAAzE;CACA,gBAAI0I,UAAU,GAAGzI,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,CAAT,CAAH,GAAsD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,CAA5E;CACA,gBAAIW,QAAQ,GAAG1I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAT,CAAH,GAAwD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAA5E;CACA,gBAAIrI,IAAI,IAAI+I,UAAR,IAAsB/I,IAAI,GAAGgJ,QAAjC,EACC,OAAOjJ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAPI,MAQA,IAAIqI,cAAc,IAAI,aAAtB,EACL;CACC,gBAAInF,IAAI,GAAGrB,WAAW,CAAC9B,OAAD,CAAtB;CAAA,gBAAiCyI,KAAK,GAAGzG,QAAQ,CAAChC,OAAD,CAAjD;CAAA,gBAA4DgI,GAAG,GAAG9G,OAAO,CAAClB,OAAD,CAAzE;CACA,gBAAI0I,UAAU,GAAG1I,OAAO,CAACF,OAAR,EAAjB;CACA,gBAAI6I,QAAQ,GAAG1I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAT,CAAH,GAAwD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAA5E;CACA,gBAAIrI,IAAI,IAAI+I,UAAR,IAAsB/I,IAAI,GAAGgJ,QAAjC,EACC,OAAOjJ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAPI,MAQA,IAAIqI,cAAc,IAAI,WAAtB,EACL;CACCnF,YAAAA,IAAI,GAAGrB,WAAW,CAAC9B,OAAD,CAAlB;CAA6ByI,YAAAA,KAAK,GAAGzG,QAAQ,CAAChC,OAAD,CAAhB;CAA2BgI,YAAAA,GAAG,GAAG9G,OAAO,CAAClB,OAAD,CAAb;CACxD,gBAAI4I,cAAc,GAAG3I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAT,CAAH,GAAwD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAlF;CACA,gBAAIa,YAAY,GAAG5I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,CAAT,CAAH,GAAsD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAtB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC,EAAoC,CAApC,CAA9E;CACA,gBAAIrI,IAAI,IAAIiJ,cAAR,IAA0BjJ,IAAI,GAAGkJ,YAArC,EACC,OAAOnJ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAPI,MAQA,IAAIqI,cAAc,IAAI,UAAlB,IAAgCA,cAAc,IAAI,UAAtD,EACL;CACCnF,YAAAA,IAAI,GAAGrB,WAAW,CAAC9B,OAAD,CAAlB;CAA6ByI,YAAAA,KAAK,GAAGzG,QAAQ,CAAChC,OAAD,CAAhB;CAA2BgI,YAAAA,GAAG,GAAG9G,OAAO,CAAClB,OAAD,CAAb;CACxD,gBAAI8I,aAAa,GAAG7I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAT,CAAH,GAAwD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAjF;CACA,gBAAIe,WAAW,GAAG9I,KAAK,GAAG,IAAIjB,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAASE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAAT,CAAH,GAAwD,IAAIhJ,IAAJ,CAASmE,IAAT,EAAesF,KAAf,EAAsBT,GAAG,GAAC,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,CAA/E;CACA,gBAAIrI,IAAI,IAAImJ,aAAR,IAAyBnJ,IAAI,GAAGoJ,WAApC,EACC,OAAOrJ,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD,WAPI,MAQA,IAAIqI,cAAc,IAAI,GAAtB,EACL;CACC,gBAAI7B,UAAU,GAAG,CAAjB,EACC,OAAO/G,KAAK,CAACJ,MAAN,CAAaiJ,WAAb,EAA0B5I,IAA1B,EAAgCK,OAAhC,EAAyCC,KAAzC,CAAP;CACD;CACD,SAjKF;;;CAoKC,eAAOoI,OAAO,CAAC5H,MAAR,GAAiB,CAAjB,GAAqBf,KAAK,CAACJ,MAAN,CAAa+I,OAAO,CAACA,OAAO,CAAC5H,MAAR,GAAiB,CAAlB,CAAP,CAA4B,CAA5B,CAAb,EAA6Cd,IAA7C,EAAmDK,OAAnD,EAA4DC,KAA5D,CAArB,GAA0F,EAAjG;CACA;;CAED,eAAS6B,WAAT,CAAqBnC,IAArB,EAA2B;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACqJ,cAAL,EAAH,GAA2BrJ,IAAI,CAACmC,WAAL,EAAvC;CAA4D;;CACzF,eAASZ,OAAT,CAAiBvB,IAAjB,EAAuB;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACsJ,UAAL,EAAH,GAAuBtJ,IAAI,CAACuB,OAAL,EAAnC;CAAoD;;CAC7E,eAASc,QAAT,CAAkBrC,IAAlB,EAAwB;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACuJ,WAAL,EAAH,GAAwBvJ,IAAI,CAACqC,QAAL,EAApC;CAAsD;;CAChF,eAAS0B,QAAT,CAAkB/D,IAAlB,EAAwB;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACmE,WAAL,EAAH,GAAwBnE,IAAI,CAAC+D,QAAL,EAApC;CAAsD;;CAChF,eAASa,UAAT,CAAoB5E,IAApB,EAA0B;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACoE,aAAL,EAAH,GAA0BpE,IAAI,CAAC4E,UAAL,EAAtC;CAA0D;;CACtF,eAASE,UAAT,CAAoB9E,IAApB,EAA0B;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACqE,aAAL,EAAH,GAA0BrE,IAAI,CAAC8E,UAAL,EAAtC;CAA0D;;CACtF,eAASE,eAAT,CAAyBhF,IAAzB,EAA+B;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACwJ,kBAAL,EAAH,GAA+BxJ,IAAI,CAACgF,eAAL,EAA3C;CAAoE;;CACrG,eAASrD,MAAT,CAAgB3B,IAAhB,EAAsB;CAAE,eAAOM,KAAK,GAAGN,IAAI,CAACyJ,SAAL,EAAH,GAAsBzJ,IAAI,CAAC2B,MAAL,EAAlC;CAAkD;;CAC1E,eAASgB,OAAT,CAAiB3C,IAAjB,EAAuB0J,QAAvB,EAAiC;CAAE,eAAOpJ,KAAK,GAAGN,IAAI,CAAC2J,UAAL,CAAgBD,QAAhB,CAAH,GAA+B1J,IAAI,CAAC2C,OAAL,CAAa+G,QAAb,CAA3C;CAAoE;;CACvG,eAAS7G,QAAT,CAAkB7C,IAAlB,EAAwB4J,UAAxB,EAAoCF,QAApC,EAA8C;CAAE,eAAOpJ,KAAK,GAAGN,IAAI,CAAC6J,WAAL,CAAiBD,UAAjB,EAA6BF,QAA7B,CAAH,GAA4C1J,IAAI,CAAC6C,QAAL,CAAc+G,UAAd,EAA0BF,QAA1B,CAAxD;CAA8F;;CAE9I,eAASrD,kBAAT,CAA4ByD,KAA5B,EAAmCC,QAAnC,EACA;CACC,YAAIC,GAAG,GAAGF,KAAK,GAAG,GAAR,GAAcxH,IAAI,CAACqD,GAAL,CAASmE,KAAT,CAAd,GAAgCxH,IAAI,CAACqD,GAAL,CAASmE,KAAK,GAAG,GAAjB,CAA1C;CACA,YAAIG,GAAG,GAAGD,GAAG,GAAG,EAAhB;CACA,YAAIE,OAAO,GAAG,EAAd;CAEA,YAAGF,GAAG,IAAI,CAAV,EACCE,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,GAAD,CAA1B,CAAV,CADD,KAEK,IAAIC,GAAG,IAAI,CAAX,EACJE,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,GAAD,CAA1B,CAAV,CADI,KAEA,IAAIC,GAAG,IAAI,EAAP,IAAaA,GAAG,IAAI,EAAxB,EACJE,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,OAAD,CAA1B,CAAV,CADI,KAEA,IAAIE,GAAG,IAAI,CAAX,EACJC,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,OAAD,CAA1B,CAAV,CADI,KAEA,IAAI,KAAKE,GAAL,IAAYA,GAAG,IAAI,CAAvB,EACJC,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,SAAD,CAA1B,CAAV,CADI,KAGJG,OAAO,GAAGnK,KAAK,CAAC2B,WAAN,CAAkBqI,QAAQ,CAAC,WAAD,CAA1B,CAAV;CAED,eAAOG,OAAO,CAAChJ,OAAR,CAAgB,UAAhB,EAA4B4I,KAA5B,CAAP;CACA;;CAED,eAAS7D,kBAAT,CAA4BtF,KAA5B,EAAmCwJ,SAAnC,EACA;CACC,YAAI/I,WAAW,CAACT,KAAD,CAAf,EACC,OAAOS,WAAW,CAACT,KAAD,CAAX,EAAP,CADD,KAGC,OAAOwJ,SAAP;CACD;;CAED,eAAS7D,MAAT,CAAgB8D,MAAhB,EACA;CACC,eAAOA,MAAM,IAAI,CAAV,GAAc9H,IAAI,CAACgC,KAAL,CAAW8F,MAAX,CAAd,GAAmC9H,IAAI,CAACC,IAAL,CAAU6H,MAAV,CAA1C;CACA;CACD,KA/vBsC;CAiwBvCjC,IAAAA,mBAAmB,EAAE,UAASxI,MAAT,EACrB;CACC,UAAI,CAACM,KAAK,CAACQ,gBAAN,CAAuBd,MAAvB,CAAL,EACC,OAAO,EAAP;CAED,aAAOA,MAAM,CAACuB,OAAP,CAAe,MAAf,EAAuB,GAAvB;CAAA,OACFA,OADE,CACM,MADN,EACc,GADd;CAAA,OAEFA,OAFE,CAEM,IAFN,EAEY,GAFZ;CAAA,OAGFA,OAHE,CAGM,GAHN,EAGW,GAHX;CAAA,OAIFA,OAJE,CAIM,IAJN,EAIY,GAJZ;CAAA,OAKFA,OALE,CAKM,GALN,EAKW,GALX;CAAA,OAMFA,OANE,CAMM,KANN,EAMa,GANb;CAAA,OAOFA,OAPE,CAOM,GAPN,EAOW,GAPX;CAAA,OAQFA,OARE,CAQM,KARN,EAQa,GARb;CAAA,OASFA,OATE,CASM,IATN,EASY,GATZ;CAAA,OAUFA,OAVE,CAUM,IAVN,EAUY,GAVZ;CAAA,OAWFA,OAXE,CAWM,IAXN,EAWY,GAXZ;CAAA,OAYFA,OAZE,CAYM,GAZN,EAYW,GAZX,CAAP,CAJD;CAiBC,KAnxBsC;CAqxBvCmJ,IAAAA,YAAY,EAAE,UAASrK,IAAT,EACd;CACC,UAAI,CAACC,KAAK,CAACC,MAAN,CAAaF,IAAb,CAAL,EACC,OAAO,IAAP;CAED,aAAO,IAAIX,IAAJ,CAASA,IAAI,CAACiE,GAAL,CAAStD,IAAI,CAACmC,WAAL,EAAT,EAA6BnC,IAAI,CAACqC,QAAL,EAA7B,EAA8CrC,IAAI,CAACuB,OAAL,EAA9C,EAA8DvB,IAAI,CAAC+D,QAAL,EAA9D,EAA+E/D,IAAI,CAAC4E,UAAL,EAA/E,EAAkG5E,IAAI,CAAC8E,UAAL,EAAlG,EAAqH9E,IAAI,CAACgF,eAAL,EAArH,CAAT,CAAP;CACA,KA3xBsC;;CA6xBvC;CACF;CACA;CACA;CACA;CACA;CACA;CACEsF,IAAAA,UAAU,EAAE,UAAS1K,SAAT,EACZ;CACC,aAAO,IAAIP,IAAJ,CAAS,KAAKkL,mBAAL,CAAyB3K,SAAzB,CAAT,CAAP;CACA,KAvyBsC;;CAyyBvC;CACF;CACA;CACA;CACA;CACA;CACA;CACE2K,IAAAA,mBAAmB,EAAE,UAAS3K,SAAT,EACrB;CACCA,MAAAA,SAAS,GAAG4K,QAAQ,CAAC5K,SAAD,EAAY,EAAZ,CAApB;CACA,UAAI6K,aAAa,GAAG,IAAIpL,IAAJ,CAASO,SAAS,GAAG,IAArB,EAA2B6F,iBAA3B,KAAiD,EAArE;CACA,aAAO,CAAC+E,QAAQ,CAAC5K,SAAD,EAAY,EAAZ,CAAR,GAA0B4K,QAAQ,CAAC,KAAK9I,WAAL,CAAiB,kBAAjB,CAAD,CAAlC,GAA2E+I,aAA5E,IAA6F,IAApG;CACA,KArzBsC;;CAuzBvC;CACF;CACA;CACA;CACA;CACA;CACEC,IAAAA,kBAAkB,EAAE,UAAS9K,SAAT,EACpB;CACCA,MAAAA,SAAS,GAAG4K,QAAQ,CAAC5K,SAAD,EAAY,EAAZ,CAApB;CACA,UAAI6K,aAAa,GAAG,IAAIpL,IAAJ,CAASO,SAAT,EAAoB6F,iBAApB,KAA0C,EAA9D;CACA,aAAOnD,IAAI,CAACqI,KAAL,CAAW/K,SAAS,GAAG,IAAZ,IAAoB4K,QAAQ,CAAC,KAAK9I,WAAL,CAAiB,kBAAjB,CAAD,EAAuC,EAAvC,CAAR,GAAqD8I,QAAQ,CAACC,aAAD,EAAgB,EAAhB,CAAjF,CAAX,CAAP;CACA,KAl0BsC;CAo0BvCG,IAAAA,sBAAsB,EAAE,UAAShL,SAAT,EAAoBC,GAApB,EAAyBC,GAAzB,EACxB;CACC,UAAIkI,IAAI,GAAG,KAAKC,UAAL,CAAgB,IAAhB,CAAX;CACA,UAAIC,UAAU,GAAIF,IAAI,KAAK,KAAKzI,UAAL,CAAgBE,KAAzB,GAAgC,OAAhC,GAA2CuI,IAAI,KAAK,KAAKzI,UAAL,CAAgBC,KAAzB,GAAgC,OAAhC,GAA0C,KAAvG;CAEA,UAAIG,MAAM,GAAG,CACV,CAAC,UAAD,EAAa,SAAOuI,UAApB,CADU,EAEV,CAAC,KAAD,EAAS,MAAT,CAFU,EAGV,CAAC,aAAD,EAAgB,SAAOA,UAAvB,CAHU,EAIV,CAAC,WAAD,EAAc,SAAOA,UAArB,CAJU,EAKV,CAAC,GAAD,EAAM,KAAKC,mBAAL,CAAyB,KAAKzG,WAAL,CAAiB,iBAAjB,CAAzB,EAA8DR,OAA9D,CAAsE,KAAtE,EAA6E,EAA7E,CAAN,CALU,EAMV,CAAC,KAAD,EAAQ,MAAR,CANU,EAOV,CAAC,KAAD,EAAQ,MAAR,CAPU,EAQV,CAAC,IAAD,EAAO,MAAP,CARU,EASV,CAAC,KAAD,EAAQ,SAAOgH,UAAf,CATU,EAUV,CAAC,KAAD,EAAQ,MAAR,CAVU,EAWV,CAAC,OAAD,EAAU,MAAV,CAXU,EAYV,CAAC,OAAD,EAAU,MAAV,CAZU,EAaV,CAAC,EAAD,EAAK,MAAL,CAbU,CAAb;CAeA,UAAI2C,aAAa,GAAG,KAAKlL,MAAL,CAAYA,MAAZ,EAAoBC,SAApB,EAA+BC,GAA/B,EAAoCC,GAApC,CAApB;CACA,UAAIa,KAAK,GAAG,IAAZ;;CACA,UAAI,CAACA,KAAK,GAAG,eAAekI,IAAf,CAAoBgC,aAApB,CAAT,KAAgD,IAApD,EACA;CACC,gBAAQlK,KAAK,CAAC,CAAD,CAAb;CAEC,eAAK,IAAL;CACCkK,YAAAA,aAAa,GAAG,KAAKnJ,WAAL,CAAiB,uBAAjB,EAA0CR,OAA1C,CAAkD,QAAlD,EAA4DP,KAAK,CAAC,CAAD,CAAjE,CAAhB;CACD;;CACA,eAAK,IAAL;CACCkK,YAAAA,aAAa,GAAG,KAAKnJ,WAAL,CAAiB,kBAAjB,CAAhB;CACD;;CACA,eAAK,IAAL;CACCmJ,YAAAA,aAAa,GAAG,KAAKnJ,WAAL,CAAiB,oBAAjB,EAAuCR,OAAvC,CAA+C,QAA/C,EAAyDP,KAAK,CAAC,CAAD,CAA9D,CAAhB;CACD;;CACA,eAAK,IAAL;CACCkK,YAAAA,aAAa,GAAG,KAAKnJ,WAAL,CAAiB,wBAAjB,EAA2CR,OAA3C,CAAmD,QAAnD,EAA6DP,KAAK,CAAC,CAAD,CAAlE,CAAhB;CACD;;CACA,eAAK,IAAL;CACCkK,YAAAA,aAAa,GAAG,KAAKnJ,WAAL,CAAiB,wBAAjB,CAAhB;CACD;;CACA;CACCmJ,YAAAA,aAAa,GAAGlK,KAAK,CAAC,CAAD,CAArB;CACD;CAnBD;CAqBA;;CAED,aAAOkK,aAAP;CACA,KAp3BsC;CAs3BvC5C,IAAAA,UAAU,EAAE,UAAS6C,WAAT,EACZ;CACC,UAAIA,WAAW,KAAK,IAApB,EACA;CACC,eAAO,KAAKpJ,WAAL,CAAiB,WAAjB,CAAP;CACA;;CAED,aAAO,KAAKA,WAAL,CAAiB,WAAjB,MAAkC,KAAzC;CACA,KA93BsC;;CAg4BvC;CACF;CACA;CACA;CACA;CACA;CACA;CACEA,IAAAA,WAAW,EAAE,UAASwI,OAAT,EACb;CACC,aAAO/K,EAAE,CAAC+K,OAAH,CAAWA,OAAX,CAAP;CACA,KA14BsC;;CA44BvC;CACF;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACEa,IAAAA,KAAK,EAAE,UAASC,GAAT,EAAc1K,KAAd,EAAqB2K,UAArB,EAAiCC,cAAjC,EACP;CACC,UAAIjL,KAAK,CAACQ,gBAAN,CAAuBuK,GAAvB,CAAJ,EACA;CACC,YAAI,CAACC,UAAL,EACCA,UAAU,GAAG,KAAKvJ,WAAL,CAAiB,aAAjB,CAAb;CACD,YAAI,CAACwJ,cAAL,EACCA,cAAc,GAAG,KAAKxJ,WAAL,CAAiB,iBAAjB,CAAjB;CAED,YAAIyJ,SAAS,GAAG,EAAhB;;CACA,aAAKxG,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI,EAAjB,EAAqBA,CAAC,EAAtB,EACA;CACCwG,UAAAA,SAAS,GAAGA,SAAS,GAAG,GAAZ,GAAkB,KAAKzJ,WAAL,CAAiB,SAAOiD,CAAxB,CAA9B;CACA;;CAED,YACCyG,IAAI,GAAG,IAAIC,MAAJ,CAAW,mBAAmBF,SAAnB,GAA+B,GAA1C,EAA+C,IAA/C,CADR;CAAA,YAECG,KAAK,GAAGN,GAAG,CAACrK,KAAJ,CAAUyK,IAAV,CAFT;CAAA,YAGCG,OAAO,GAAGN,UAAU,CAACtK,KAAX,CAAiB,0BAAjB,CAHX;CAAA,YAICgE,CAJD;CAAA,YAII6G,GAJJ;CAAA,YAKCC,SAAS,GAAC,EALX;CAAA,YAKeC,WAAW,GAAC,EAL3B;CAAA,YAMCC,OAAO,GAAC,EANT;;CAQA,YAAI,CAACL,KAAL,EACA;CACC,iBAAO,IAAP;CACA;;CAED,YAAGA,KAAK,CAACxK,MAAN,GAAeyK,OAAO,CAACzK,MAA1B,EACA;CACCyK,UAAAA,OAAO,GAAGL,cAAc,CAACvK,KAAf,CAAqB,4CAArB,CAAV;CACA;;CAED,aAAIgE,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGF,KAAK,CAACxK,MAAvB,EAA+B6D,CAAC,GAAG6G,GAAnC,EAAwC7G,CAAC,EAAzC,EACA;CACC,cAAG2G,KAAK,CAAC3G,CAAD,CAAL,CAASiH,IAAT,OAAoB,EAAvB,EACA;CACCH,YAAAA,SAAS,CAACA,SAAS,CAAC3K,MAAX,CAAT,GAA8BwK,KAAK,CAAC3G,CAAD,CAAnC;CACA;CACD;;CAED,aAAIA,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGD,OAAO,CAACzK,MAAzB,EAAiC6D,CAAC,GAAG6G,GAArC,EAA0C7G,CAAC,EAA3C,EACA;CACC,cAAG4G,OAAO,CAAC5G,CAAD,CAAP,CAAWiH,IAAX,OAAsB,EAAzB,EACA;CACCF,YAAAA,WAAW,CAACA,WAAW,CAAC5K,MAAb,CAAX,GAAkCyK,OAAO,CAAC5G,CAAD,CAAzC;CACA;CACD;;CAED,YAAI1B,CAAC,GAAGhD,KAAK,CAAC4L,YAAN,CAAmB,MAAnB,EAA2BH,WAA3B,CAAR;;CACA,YAAIzI,CAAC,GAAG,CAAR,EACA;CACCwI,UAAAA,SAAS,CAACxI,CAAD,CAAT,GAAe,KAAK6I,aAAL,CAAmBL,SAAS,CAACxI,CAAD,CAA5B,CAAf;CACAyI,UAAAA,WAAW,CAACzI,CAAD,CAAX,GAAiB,IAAjB;CACA,SAJD,MAMA;CACCA,UAAAA,CAAC,GAAGhD,KAAK,CAAC4L,YAAN,CAAmB,GAAnB,EAAwBH,WAAxB,CAAJ;;CACA,cAAIzI,CAAC,GAAG,CAAR,EACA;CACCwI,YAAAA,SAAS,CAACxI,CAAD,CAAT,GAAe,KAAK6I,aAAL,CAAmBL,SAAS,CAACxI,CAAD,CAA5B,CAAf;CACAyI,YAAAA,WAAW,CAACzI,CAAD,CAAX,GAAiB,IAAjB;CACA;CACD;;CAED,aAAI0B,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGE,WAAW,CAAC5K,MAA7B,EAAqC6D,CAAC,GAAG6G,GAAzC,EAA8C7G,CAAC,EAA/C,EACA;CACC,cAAIoH,CAAC,GAAGL,WAAW,CAAC/G,CAAD,CAAX,CAAeqH,WAAf,EAAR;CACAL,UAAAA,OAAO,CAACI,CAAD,CAAP,GAAaA,CAAC,KAAK,GAAN,IAAaA,CAAC,KAAK,IAAnB,GAA0BN,SAAS,CAAC9G,CAAD,CAAnC,GAAyC6F,QAAQ,CAACiB,SAAS,CAAC9G,CAAD,CAAV,EAAe,EAAf,CAA9D;CACA;;CAED,YAAGgH,OAAO,CAAC,IAAD,CAAP,GAAgB,CAAhB,IAAqBA,OAAO,CAAC,IAAD,CAAP,GAAgB,CAArC,IAA0CA,OAAO,CAAC,MAAD,CAAP,GAAkB,CAA/D,EACA;CACC,cAAItK,CAAC,GAAG,IAAIhC,IAAJ,EAAR;;CAEA,cAAGiB,KAAH,EACA;CACCe,YAAAA,CAAC,CAACsI,UAAF,CAAa,CAAb;CACAtI,YAAAA,CAAC,CAAC4K,cAAF,CAAiBN,OAAO,CAAC,MAAD,CAAxB;CACAtK,YAAAA,CAAC,CAACwI,WAAF,CAAc8B,OAAO,CAAC,IAAD,CAAP,GAAgB,CAA9B;CACAtK,YAAAA,CAAC,CAACsI,UAAF,CAAagC,OAAO,CAAC,IAAD,CAApB;CACAtK,YAAAA,CAAC,CAAC6K,WAAF,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;CACA,WAPD,MASA;CACC7K,YAAAA,CAAC,CAACsB,OAAF,CAAU,CAAV;CACAtB,YAAAA,CAAC,CAAC8K,WAAF,CAAcR,OAAO,CAAC,MAAD,CAArB;CACAtK,YAAAA,CAAC,CAACwB,QAAF,CAAW8I,OAAO,CAAC,IAAD,CAAP,GAAgB,CAA3B;CACAtK,YAAAA,CAAC,CAACsB,OAAF,CAAUgJ,OAAO,CAAC,IAAD,CAAjB;CACAtK,YAAAA,CAAC,CAAC+K,QAAF,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;CACA;;CAED,cACC,CAAC,CAACC,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAAN,IAAyB,CAACU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAA/B,IAAkD,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAxD,IAA0E,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAjF,KACG,CAACU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAFV,EAIA;CACC,gBAAI,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAN,IAAwB,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAlC,EACA;CACC,kBACCW,GAAG,GAAG,CAACX,OAAO,CAAC,GAAD,CAAP,IAAcA,OAAO,CAAC,IAAD,CAArB,IAA6B,IAA9B,EAAoCK,WAApC,OAAsD,IAD7D;CAAA,kBAECvH,CAAC,GAAG+F,QAAQ,CAACmB,OAAO,CAAC,GAAD,CAAP,IAAcA,OAAO,CAAC,GAAD,CAArB,IAA4B,CAA7B,EAAgC,EAAhC,CAFb;;CAIA,kBAAGW,GAAH,EACA;CACCX,gBAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBlH,CAAC,IAAIA,CAAC,KAAK,EAAN,GAAW,CAAX,GAAe,EAAnB,CAAjB;CACA,eAHD,MAKA;CACCkH,gBAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBlH,CAAC,GAAG,EAAJ,GAASA,CAAT,GAAa,CAA7B;CACA;CACD,aAdD,MAgBA;CACCkH,cAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBnB,QAAQ,CAACmB,OAAO,CAAC,IAAD,CAAP,IAAeA,OAAO,CAAC,IAAD,CAAtB,IAA8B,CAA/B,EAAkC,EAAlC,CAAxB;CACA;;CAED,gBAAIU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAAT,EACCA,OAAO,CAAC,IAAD,CAAP,GAAgB,CAAhB;;CAED,gBAAGrL,KAAH,EACA;CACCe,cAAAA,CAAC,CAAC6K,WAAF,CAAcP,OAAO,CAAC,IAAD,CAArB,EAA6BA,OAAO,CAAC,IAAD,CAApC,EAA4CA,OAAO,CAAC,IAAD,CAAnD;CACA,aAHD,MAKA;CACCtK,cAAAA,CAAC,CAAC+K,QAAF,CAAWT,OAAO,CAAC,IAAD,CAAlB,EAA0BA,OAAO,CAAC,IAAD,CAAjC,EAAyCA,OAAO,CAAC,IAAD,CAAhD;CACA;CACD;;CAED,iBAAOtK,CAAP;CACA;CACD;;CAED,aAAO,IAAP;CACA,KA5hCsC;CA8hCvCyK,IAAAA,aAAa,EAAE,UAAShD,KAAT,EACf;CACC,UACCnE,CADD;CAAA,UAEC4H,CAAC,GAAGzD,KAAK,CAACkD,WAAN,EAFL;CAAA,UAGCQ,YAAY,GAAG,CAAC,KAAD,EAAQ,KAAR,EAAe,KAAf,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkD,KAAlD,EAAyD,KAAzD,EAAgE,KAAhE,EAAuE,KAAvE,EAA8E,KAA9E,CAHhB;CAAA,UAICC,SAAS,GAAG,CAAC,SAAD,EAAY,UAAZ,EAAwB,OAAxB,EAAiC,OAAjC,EAA0C,KAA1C,EAAiD,MAAjD,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,WAA3E,EAAwF,SAAxF,EAAmG,UAAnG,EAA+G,UAA/G,CAJb;;CAMA,WAAK9H,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI,EAAjB,EAAqBA,CAAC,EAAtB,EACA;CACC,YAAI4H,CAAC,KAAK,KAAK7K,WAAL,CAAiB,SAAOiD,CAAxB,EAA2BqH,WAA3B,EAAN,IACAO,CAAC,KAAK,KAAK7K,WAAL,CAAiB,WAASiD,CAA1B,EAA6BqH,WAA7B,EADN,IAEAO,CAAC,KAAKC,YAAY,CAAC7H,CAAC,GAAC,CAAH,CAAZ,CAAkBqH,WAAlB,EAFN,IAGAO,CAAC,KAAKE,SAAS,CAAC9H,CAAC,GAAC,CAAH,CAAT,CAAeqH,WAAf,EAHV,EAIA;CACC,iBAAOrH,CAAP;CACA;CACD;;CACD,aAAOmE,KAAP;CACA;CAjjCsC,GAAxC;CAojCA;CACD;CACA;;CACC,MAAI7I,KAAK,GAAG;CACXC,IAAAA,MAAM,EAAE,UAASwM,IAAT,EAAe;CACtB,aAAOA,IAAI,IAAIC,MAAM,CAACC,SAAP,CAAiBpL,QAAjB,CAA0BqL,IAA1B,CAA+BH,IAA/B,KAAwC,eAAvD;CACA,KAHU;CAIXtM,IAAAA,QAAQ,EAAE,UAASsM,IAAT,EAAe;CACxB,aAAOA,IAAI,KAAK,CAAT,GAAa,IAAb,GAAqBA,IAAI,GAAI,OAAQA,IAAR,IAAiB,QAAjB,IAA6BA,IAAI,YAAYI,MAAjD,GAA2D,KAA3F;CACA,KANU;CAOXvM,IAAAA,OAAO,EAAE,UAASmM,IAAT,EAAe;CACvB,aAAOA,IAAI,IAAIC,MAAM,CAACC,SAAP,CAAiBpL,QAAjB,CAA0BqL,IAA1B,CAA+BH,IAA/B,KAAwC,gBAAvD;CACA,KATU;CAUXK,IAAAA,QAAQ,EAAE,UAASL,IAAT,EAAe;CACxB,aAAOA,IAAI,KAAK,EAAT,GAAc,IAAd,GAAsBA,IAAI,GAAI,OAAQA,IAAR,IAAiB,QAAjB,IAA6BA,IAAI,YAAYM,MAAjD,GAA2D,KAA5F;CACA,KAZU;CAaXvM,IAAAA,gBAAgB,EAAE,UAASiM,IAAT,EAAe;CAChC,aAAO,KAAKK,QAAL,CAAcL,IAAd,IAAsBA,IAAI,CAAC5L,MAAL,GAAc,CAApC,GAAwC,KAA/C;CACA,KAfU;CAgBXQ,IAAAA,UAAU,EAAE,UAAS2L,KAAT,EAAgBC,SAAhB,EAA2BC,SAA3B,EACZ;CACC,UAAIxI,CAAC,GAAGsI,KAAK,CAACnM,MAAd;CAAA,UAAsByL,CAAC,GAACY,SAAS,CAACrM,MAAlC;CACA,UAAI6D,CAAC,IAAIuI,SAAT,EAAoB,OAAOD,KAAP;;CAEpB,aAAKtI,CAAC,GAACuI,SAAP,EAAiBvI,CAAC,IAAE4H,CAApB,EACCU,KAAK,GAAGE,SAAS,GAAGF,KAApB;;CAED,aAAOA,KAAP;CACA,KAzBU;;CA0BX;CACF;CACA;CACA;CACEpB,IAAAA,YAAY,EAAE,UAASuB,MAAT,EAAiBC,QAAjB,EACd;CACC,WAAI,IAAI1I,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG0I,QAAQ,CAACvM,MAA5B,EAAoC6D,CAAC,EAArC,EACA;CACC,YAAG0I,QAAQ,CAAC1I,CAAD,CAAR,IAAeyI,MAAlB,EACC,OAAOzI,CAAP;CACD;;CACD,aAAO,CAAC,CAAR;CACA;CAtCU,GAAZ;CAyCA,CAvnCA,EAunCEzF,MAvnCF;;;;CCMM,MAAMoO,IAAN,CACP;CAMiB,SAATC,SAAS,CAACvC,GAAD,EAChB;CACC,QAAIhL,IAAI,GAAGsN,IAAI,CAACE,UAAL,CAAgBrO,EAAE,CAACa,IAAH,CAAQL,MAAR,CAAe2N,IAAI,CAACG,aAAL,EAAf,EAAqC,IAAIpO,IAAJ,EAArC,IAAmD,GAAnD,GAAyD2L,GAAzE,EAA8E,KAA9E,CAAX;CACA,WAAOhL,IAAI,GAAG;CACbyE,MAAAA,CAAC,EAAEzE,IAAI,CAAC+D,QAAL,EADU;CAEbd,MAAAA,CAAC,EAAEjD,IAAI,CAAC4E,UAAL;CAFU,KAAH,GAGP5E,IAHJ;CAIA;;CAEoB,SAAd0N,cAAc,CAAC1N,IAAD,EACrB;CACC,WAAOsC,IAAI,CAACqI,KAAL,CAAW3K,IAAI,CAACG,OAAL,KAAiB,KAA5B,IAAqC,KAA5C;CACA;;CAEe,SAATwN,SAAS,CAAC3C,GAAD,EAAM4C,IAAN,EAAY3C,UAAZ,EAAwBC,cAAxB,EAChB;CACC,WAAO/L,EAAE,CAACwO,SAAH,CAAa3C,GAAb,EAAkB4C,IAAlB,EAAwB3C,UAAxB,EAAoCC,cAApC,CAAP;CACA;;CAEgB,SAAVsC,UAAU,CAACxC,GAAD,EAAMrL,MAAN,EAAckO,WAAd,EACjB;CACC,QACClJ,CADD;CAAA,QACI6G,GADJ;CAAA,QACSO,CADT;CAAA,QAECZ,SAFD;CAKA,QAAI,CAACxL,MAAL,EACCA,MAAM,GAAGmO,aAAG,CAACC,UAAJ,CAAe,iBAAf,CAAT;CAED/C,IAAAA,GAAG,GAAG7L,EAAE,CAAC6O,IAAH,CAAQpC,IAAR,CAAaZ,GAAb,CAAN;CAEA,QAAI6C,WAAW,KAAK,KAApB,EACClO,MAAM,GAAGA,MAAM,CAACuB,OAAP,CAAe,KAAf,EAAsB,EAAtB,CAAT;;CAED,QAAI/B,EAAE,CAAC8O,IAAH,CAAQxN,gBAAR,CAAyBuK,GAAzB,CAAJ,EACA;CACCG,MAAAA,SAAS,GAAG,EAAZ;;CACA,WAAKxG,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAI,EAAjB,EAAqBA,CAAC,EAAtB,EACA;CACCwG,QAAAA,SAAS,GAAGA,SAAS,GAAG,GAAZ,GAAkB2C,aAAG,CAACC,UAAJ,CAAe,SAASpJ,CAAxB,CAA9B;CACA;;CAED,UACCyG,IAAI,GAAG,IAAIC,MAAJ,CAAW,mBAAmBF,SAAnB,GAA+B,GAA1C,EAA+C,IAA/C,CADR;CAAA,UAECG,KAAK,GAAGN,GAAG,CAACrK,KAAJ,CAAUyK,IAAV,CAFT;CAAA,UAGCG,OAAO,GAAGuC,aAAG,CAACC,UAAJ,CAAe,aAAf,EAA8BpN,KAA9B,CAAoC,0BAApC,CAHX;CAAA,UAIC8K,SAAS,GAAG,EAJb;CAAA,UAKCC,WAAW,GAAG,EALf;CAAA,UAMCC,OAAO,GAAG,EANX;;CAQA,UAAI,CAACL,KAAL,EACA;CACC,eAAO,IAAP;CACA;;CAED,UAAIA,KAAK,CAACxK,MAAN,GAAeyK,OAAO,CAACzK,MAA3B,EACA;CACCyK,QAAAA,OAAO,GAAG5L,MAAM,CAACgB,KAAP,CAAa,4CAAb,CAAV;CACA;;CAED,WAAKgE,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGF,KAAK,CAACxK,MAAxB,EAAgC6D,CAAC,GAAG6G,GAApC,EAAyC7G,CAAC,EAA1C,EACA;CACC,YAAIxF,EAAE,CAAC6O,IAAH,CAAQpC,IAAR,CAAaN,KAAK,CAAC3G,CAAD,CAAlB,MAA2B,EAA/B,EACA;CACC8G,UAAAA,SAAS,CAACA,SAAS,CAAC3K,MAAX,CAAT,GAA8BwK,KAAK,CAAC3G,CAAD,CAAnC;CACA;CACD;;CAED,WAAKA,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGD,OAAO,CAACzK,MAA1B,EAAkC6D,CAAC,GAAG6G,GAAtC,EAA2C7G,CAAC,EAA5C,EACA;CACC,YAAIxF,EAAE,CAAC6O,IAAH,CAAQpC,IAAR,CAAaL,OAAO,CAAC5G,CAAD,CAApB,KAA4B,EAAhC,EACA;CACC+G,UAAAA,WAAW,CAACA,WAAW,CAAC5K,MAAb,CAAX,GAAkCyK,OAAO,CAAC5G,CAAD,CAAzC;CACA;CACD;;CAED,UAAI1B,CAAC,GAAG9D,EAAE,CAAC6O,IAAH,CAAQnC,YAAR,CAAqB,MAArB,EAA6BH,WAA7B,CAAR;;CACA,UAAIzI,CAAC,GAAG,CAAR,EACA;CACCwI,QAAAA,SAAS,CAACxI,CAAD,CAAT,GAAe9D,EAAE,CAAC+O,WAAH,CAAezC,SAAS,CAACxI,CAAD,CAAxB,CAAf;CACAyI,QAAAA,WAAW,CAACzI,CAAD,CAAX,GAAiB,IAAjB;CACA,OAJD,MAMA;CACCA,QAAAA,CAAC,GAAG9D,EAAE,CAAC6O,IAAH,CAAQnC,YAAR,CAAqB,GAArB,EAA0BH,WAA1B,CAAJ;;CACA,YAAIzI,CAAC,GAAG,CAAR,EACA;CACCwI,UAAAA,SAAS,CAACxI,CAAD,CAAT,GAAe9D,EAAE,CAAC+O,WAAH,CAAezC,SAAS,CAACxI,CAAD,CAAxB,CAAf;CACAyI,UAAAA,WAAW,CAACzI,CAAD,CAAX,GAAiB,IAAjB;CACA;CACD;;CAED,WAAK0B,CAAC,GAAG,CAAJ,EAAO6G,GAAG,GAAGE,WAAW,CAAC5K,MAA9B,EAAsC6D,CAAC,GAAG6G,GAA1C,EAA+C7G,CAAC,EAAhD,EACA;CACCoH,QAAAA,CAAC,GAAGL,WAAW,CAAC/G,CAAD,CAAX,CAAeqH,WAAf,EAAJ;CACAL,QAAAA,OAAO,CAACI,CAAD,CAAP,GAAaA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,IAAjB,GAAwBN,SAAS,CAAC9G,CAAD,CAAjC,GAAuC6F,QAAQ,CAACiB,SAAS,CAAC9G,CAAD,CAAV,EAAe,EAAf,CAA5D;CACA;;CAED,UAAIgH,OAAO,CAAC,IAAD,CAAP,GAAgB,CAAhB,IAAqBA,OAAO,CAAC,IAAD,CAAP,GAAgB,CAArC,IAA0CA,OAAO,CAAC,MAAD,CAAP,GAAkB,CAAhE,EACA;CACC,YAAItK,CAAC,GAAG,IAAIhC,IAAJ,EAAR;;CAEA,QASA;CACCgC,UAAAA,CAAC,CAACsB,OAAF,CAAU,CAAV;CACAtB,UAAAA,CAAC,CAAC8K,WAAF,CAAcR,OAAO,CAAC,MAAD,CAArB;CACAtK,UAAAA,CAAC,CAACwB,QAAF,CAAW8I,OAAO,CAAC,IAAD,CAAP,GAAgB,CAA3B;CACAtK,UAAAA,CAAC,CAACsB,OAAF,CAAUgJ,OAAO,CAAC,IAAD,CAAjB;CACAtK,UAAAA,CAAC,CAAC+K,QAAF,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB;CACA;;CAED,YACC,CAAC,CAACC,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAAN,IAAyB,CAACU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAA/B,IAAkD,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAxD,IAA0E,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAjF,KACG,CAACU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAFV,EAIA;CACC,cAAI,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAN,IAAwB,CAACU,KAAK,CAACV,OAAO,CAAC,GAAD,CAAR,CAAlC,EACA;CACC,gBAAIW,GAAG,GAAG,CAACX,OAAO,CAAC,GAAD,CAAP,IAAgBA,OAAO,CAAC,IAAD,CAAvB,IAAiC,IAAlC,EAAwCK,WAAxC,MAAyD,IAAnE;CACA,gBAAIvH,CAAC,GAAG+F,QAAQ,CAACmB,OAAO,CAAC,GAAD,CAAP,IAAgBA,OAAO,CAAC,GAAD,CAAvB,IAAgC,CAAjC,EAAoC,EAApC,CAAhB;;CACA,gBAAIW,GAAJ,EACA;CACCX,cAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBlH,CAAC,IAAIA,CAAC,IAAI,EAAL,GAAU,CAAV,GAAc,EAAlB,CAAjB;CACA,aAHD,MAKA;CACCkH,cAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBlH,CAAC,GAAG,EAAJ,GAASA,CAAT,GAAa,CAA7B;CACA;CACD,WAZD,MAcA;CACCkH,YAAAA,OAAO,CAAC,IAAD,CAAP,GAAgBnB,QAAQ,CAACmB,OAAO,CAAC,IAAD,CAAP,IAAiBA,OAAO,CAAC,IAAD,CAAxB,IAAkC,CAAnC,EAAsC,EAAtC,CAAxB;CACA;;CAED,cAAIU,KAAK,CAACV,OAAO,CAAC,IAAD,CAAR,CAAT,EACCA,OAAO,CAAC,IAAD,CAAP,GAAgB,CAAhB;;CAED,UAKA;CACCtK,YAAAA,CAAC,CAAC+K,QAAF,CAAWT,OAAO,CAAC,IAAD,CAAlB,EAA0BA,OAAO,CAAC,IAAD,CAAjC,EAAyCA,OAAO,CAAC,IAAD,CAAhD;CACA;CACD;;CAED,eAAOtK,CAAP;CACA;CACD;;CACD,WAAO,IAAP;CACA;;CAEgB,SAAV8M,UAAU,CAACC,KAAD,EAAQC,OAAR,EACjB;CACC,QAAIhG,GAAJ;;CACA,QAAIiG,cAAI,CAACpO,MAAL,CAAYkO,KAAZ,CAAJ,EACA;CACC/F,MAAAA,GAAG,GAAG+F,KAAN;CACA,KAHD,MAKA;CACC/F,MAAAA,GAAG,GAAG,IAAIhJ,IAAJ,EAAN;CACAgJ,MAAAA,GAAG,CAAC+D,QAAJ,CAAagC,KAAb,EAAoBC,OAApB,EAA6B,CAA7B;CACA;;CAED,WAAOlP,EAAE,CAACa,IAAH,CAAQL,MAAR,CAAe2N,IAAI,CAACiB,kBAAL,EAAf,EAA0ClG,GAAG,CAAClI,OAAJ,KAAgB,IAA1D,CAAP;CACA;;CAEgB,SAAV8K,UAAU,CAACrL,SAAD,EACjB;CACC,QAAI0O,cAAI,CAACpO,MAAL,CAAYN,SAAZ,CAAJ,EACA;CACCA,MAAAA,SAAS,GAAGA,SAAS,CAACO,OAAV,EAAZ;CACA;;CACD,WAAOhB,EAAE,CAACa,IAAH,CAAQL,MAAR,CAAe2N,IAAI,CAACG,aAAL,EAAf,EAAqC7N,SAAS,GAAG,IAAjD,CAAP;CACA;;CAEoB,SAAd4O,cAAc,CAAC5O,SAAD,EACrB;CACC,QAAI0O,cAAI,CAACpO,MAAL,CAAYN,SAAZ,CAAJ,EACA;CACCA,MAAAA,SAAS,GAAGA,SAAS,CAACO,OAAV,EAAZ;CACA;;CACD,WAAOhB,EAAE,CAACa,IAAH,CAAQL,MAAR,CAAe2N,IAAI,CAACmB,iBAAL,EAAf,EAAyC7O,SAAS,GAAG,IAArD,CAAP;CACA;;CAEsB,SAAhB8O,gBAAgB,CAAC1O,IAAD,EAAO2O,QAAQ,GAAG,IAAlB,EAAwBC,aAAa,GAAG,KAAxC,EACvB;CACC,UAAMC,IAAI,GAAGf,aAAG,CAACC,UAAJ,CAAe,aAAf,CAAb;CACA,QAAIpO,MAAM,GAAG2N,IAAI,CAACG,aAAL,EAAb;;CACA,QAAIoB,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,IAA9B,EACA;CACClP,MAAAA,MAAM,GAAGiP,aAAa,GAAG,QAAH,GAAc,KAApC;;CAEA,UAAI5O,IAAI,CAACmC,WAAL,IACAnC,IAAI,CAACmC,WAAL,OAAuB,IAAI9C,IAAJ,GAAW8C,WAAX,EADvB,IAEAwM,QAAQ,KAAK,KAFjB,EAIA;CACChP,QAAAA,MAAM,IAAI,IAAV;CACA;CACD;;CAED,WAAOR,EAAE,CAACa,IAAH,CAAQL,MAAR,CAAe,CACrB,CAAC,OAAD,EAAU,OAAV,CADqB,EAErB,CAAC,UAAD,EAAa,UAAb,CAFqB,EAGrB,CAAC,WAAD,EAAc,WAAd,CAHqB,EAIrB,CAAC,EAAD,EAAKA,MAAL,CAJqB,CAAf,EAKJK,IALI,CAAP;CAMA;;CAEkB,SAAZ8O,YAAY,GACnB;CACC,QAAI,CAACxB,IAAI,CAACyB,UAAV,EACA;CACCzB,MAAAA,IAAI,CAACyB,UAAL,GAAkB,QAAlB;CACA;;CACD,WAAOzB,IAAI,CAACyB,UAAZ;CACA;;CAEyB,SAAnBC,mBAAmB,GAC1B;CACC,WAAO,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EAAwD,SAAxD,EAAmE,SAAnE,EAA8E,SAA9E,EAAyF,SAAzF,EAAoG,SAApG,CAAP;CACA;;CAEoB,SAAdC,cAAc,CAACC,IAAD,EAAOC,UAAP,EACrB;CACC,QAAIC,GAAG,GAAG,KAAV;;CACA,QAAIF,IAAJ,EACA;CACC,UAAIG,MAAM,GAAG,kBAAb;CAAA,UAAiC1K,CAAjC;;CAEA,UAAIuK,IAAI,CAACI,UAAL,IAAmBJ,IAAI,CAACI,UAAL,CAAgBxO,MAAvC,EACA;CACC,aAAK6D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuK,IAAI,CAACI,UAAL,CAAgBxO,MAAhC,EAAwC6D,CAAC,EAAzC,EACA;CACC,cAAIuK,IAAI,CAACI,UAAL,CAAgB3K,CAAhB,EAAmB4K,IAAnB,IAA2BL,IAAI,CAACI,UAAL,CAAgB3K,CAAhB,EAAmB4K,IAAnB,CAAwBzJ,MAAxB,CAA+B,CAA/B,EAAkCuJ,MAAM,CAACvO,MAAzC,MAAqDuO,MAApF,EACA;CACCD,YAAAA,GAAG,GAAGF,IAAN;CACA;CACA;CACD;CACD;;CAED,UAAI,CAACE,GAAL,EACA;CACCA,QAAAA,GAAG,GAAGjQ,EAAE,CAACqQ,UAAH,CAAcN,IAAd,EAAoB,UAAS/L,CAAT,EAAY;CACrC,cAAIvB,CAAJ;;CACA,cAAIuB,CAAC,CAACmM,UAAF,IAAgBnM,CAAC,CAACmM,UAAF,CAAaxO,MAAjC,EACA;CACC,iBAAKc,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGuB,CAAC,CAACmM,UAAF,CAAaxO,MAA7B,EAAqCc,CAAC,EAAtC,EACA;CACC,kBAAIuB,CAAC,CAACmM,UAAF,CAAa1N,CAAb,EAAgB2N,IAAhB,IAAwBpM,CAAC,CAACmM,UAAF,CAAa1N,CAAb,EAAgB2N,IAAhB,CAAqBzJ,MAArB,CAA4B,CAA5B,EAA+BuJ,MAAM,CAACvO,MAAtC,MAAkDuO,MAA9E,EACC,OAAO,IAAP;CACD;CACD;;CACD,iBAAO,KAAP;CACA,SAXK,EAWHF,UAXG,CAAN;CAYA;CAED;;CAED,WAAOC,GAAP;CACA;;CAEyB,SAAnBK,mBAAmB,CAACC,MAAD,EAC1B;CACC,WAAO,EAAP;CACA;;CAEqB,SAAfC,eAAe,CAAC1O,KAAD,EACtB;CACC,WAAO,CAAC,IAAD,EAAO,IAAP,EAAa,IAAb,EAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqC,IAArC,EAA2CA,KAA3C,CAAP;CACA;;CAEe,SAAT2O,SAAS,CAACC,IAAD,EAAOC,SAAP,EAChB;CACC,WAAOC,aAAG,CAACC,MAAX,cAAkB;gBAAlB,CAC6C;;mBAD7C,CAGgC,cAHhC,CAG4D;;;;;;AAM9D,CATE,GACcF,SAAS,IAAI,iBAD3B,EAGiBtF,QAAQ,CAACqF,IAAD,CAHzB,EAG6CrF,QAAQ,CAACqF,IAAD,CAHrD;CAUA;;CAEgB,SAAVI,UAAU,CAACjQ,IAAD,EACjB;CACC,WAAOA,IAAI,CAACmC,WAAL,KAAqB,GAArB,GAA2B,CAAC,MAAO,CAAC,EAAEnC,IAAI,CAACqC,QAAL,KAAkB,CAApB,CAAT,EAAkCyD,MAAlC,CAAyC,CAAC,CAA1C,EAA6C,CAA7C,CAA3B,GAA6E,GAA7E,GAAmF,CAAC,MAAO,CAAC,CAAE9F,IAAI,CAACuB,OAAL,EAAX,EAA6BuE,MAA7B,CAAoC,CAAC,CAArC,EAAwC,CAAxC,CAA1F;CACA;;CAEkB,SAAZoK,YAAY,CAACC,KAAD,EACnB;CACC,QAAI,CAACA,KAAL,EACA;CACC,aAAO,KAAP;CACA;;CAED,QAAIA,KAAK,CAACC,MAAN,CAAa,CAAb,MAAoB,GAAxB,EACA;CACCD,MAAAA,KAAK,GAAGA,KAAK,CAACE,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAR;CACA;;CAED,QACCnK,CAAC,GAAGsE,QAAQ,CAAC2F,KAAK,CAACE,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CADb;CAAA,QAEC9L,CAAC,GAAGiG,QAAQ,CAAC2F,KAAK,CAACE,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAFb;CAAA,QAGCC,CAAC,GAAG9F,QAAQ,CAAC2F,KAAK,CAACE,SAAN,CAAgB,CAAhB,EAAmB,CAAnB,CAAD,EAAwB,EAAxB,CAHb;CAAA,QAICE,KAAK,GAAG,CAACrK,CAAC,GAAG,GAAJ,GAAU3B,CAAV,GAAc+L,CAAC,GAAG,GAAnB,IAA0B,GAA1B,GAAgC,GAJzC;CAMA,WAAOC,KAAK,GAAG,EAAf;CACA;;CAEgB,SAAVC,UAAU,CAACC,GAAD,EACjB;CACC,QAAI,CAACnC,cAAI,CAACvB,QAAL,CAAc0D,GAAd,CAAL,EACA;CACC,aAAO,KAAP;CACA;;CAED,QAAIC,SAAS,GAAG;CACf,mBAAa,CADE;CAEf,eAAS,EAFM;CAGf,gBAAU,EAHK;CAIf,eAAS,EAJM;CAKf,gBAAU,EALK;CAMf,cAAQ,EANO;CAOf,eAAS,EAPM;CAQf,YAAM,EARS;CASf,cAAQ,EATO;CAUf,WAAK,EAVU;CAWf,WAAK,EAXU;CAYf,eAAS,EAZM;CAaf,cAAQ,EAbO;CAcf,aAAO,EAdQ;CAef,aAAO,EAfQ;CAeJ;CACX,kBAAY,EAhBG;CAgBC;CAChB,gBAAU,EAjBK;CAkBf,kBAAY,EAlBG;CAmBf,WAAK,EAnBU;CAoBf,WAAK,EApBU;CAqBf,WAAK,EArBU;CAsBf,WAAK;CAtBU,KAAhB;CAwBA,WAAOA,SAAS,CAACD,GAAG,CAACE,WAAJ,EAAD,CAAhB;CACA;;CAEuB,SAAjBC,iBAAiB,CAAChR,SAAD,EAAYiR,QAAZ,EACxB;CACC,QAAIvC,cAAI,CAACpO,MAAL,CAAYN,SAAZ,CAAJ,EACA;CACCA,MAAAA,SAAS,GAAGA,SAAS,CAACO,OAAV,EAAZ;CACA;;CAED,QAAI+F,CAAC,GAAG,CAAC2K,QAAQ,IAAI,EAAb,IAAmB,EAAnB,GAAwB,IAAhC;CACAjR,IAAAA,SAAS,GAAG0C,IAAI,CAACC,IAAL,CAAU3C,SAAS,GAAGsG,CAAtB,IAA2BA,CAAvC;CAEA,WAAO,IAAI7G,IAAJ,CAASO,SAAT,CAAP;CACA;;CAEsB,SAAhBkR,gBAAgB,CAAC5G,OAAD,EAAU6G,OAAO,GAAG,IAApB,EACvB;CACC,QAAIzC,cAAI,CAACvB,QAAL,CAAc7C,OAAd,KAA0BA,OAAO,KAAK,EAA1C,EACA;CACC/K,MAAAA,EAAE,CAAC6R,EAAH,CAAMC,YAAN,CAAmBC,MAAnB,CAA0BC,MAA1B,CAAiC;CAChCC,QAAAA,OAAO,EAAElH,OADuB;CAEhC6G,QAAAA,OAAO,EAAEA;CAFuB,OAAjC;CAIA;CACD;;CAEoB,SAAdM,cAAc,CAACnH,OAAD,EAAUoH,IAAV,EAAgBC,OAAhB,EACrB;CACC,QAAIjD,cAAI,CAACkD,SAAL,CAAeF,IAAf,KAAwBhD,cAAI,CAACvB,QAAL,CAAc7C,OAAd,CAAxB,IAAkDA,OAAO,KAAK,EAAlE,EACA;CACCuH,MAAAA,aAAG,CAACC,MAAJ,CAAWJ,IAAI,CAACK,aAAL,CAAmB,WAAnB,CAAX;CAEA,UAAIC,KAAK,GAAG,IAAIzS,EAAE,CAAC6R,EAAH,CAAMa,KAAV,CAAgB;CAC3B1B,QAAAA,KAAK,EAAEhR,EAAE,CAAC6R,EAAH,CAAMa,KAAN,CAAYC,KAAZ,CAAkBC,MADE;CAE3BC,QAAAA,IAAI,EAAE7S,EAAE,CAAC6R,EAAH,CAAMa,KAAN,CAAYI,IAAZ,CAAiBF,MAFI;CAG3BG,QAAAA,IAAI,EAAEhI;CAHqB,OAAhB,CAAZ;CAMA,UAAIiI,SAAS,GAAGP,KAAK,CAACQ,YAAN,EAAhB;CAEAd,MAAAA,IAAI,CAACe,WAAL,CAAiBF,SAAjB;CACA;CACD;;CAEmB,SAAb1E,aAAa,GACpB;CACC,QAAI,CAACH,IAAI,CAACgF,WAAV,EACA;CACChF,MAAAA,IAAI,CAACgF,WAAL,GAAmBnT,EAAE,CAACC,IAAH,CAAQC,IAAR,CAAa8I,mBAAb,CAAiC2F,aAAG,CAACC,UAAJ,CAAe,aAAf,CAAjC,CAAnB;CACA;;CACD,WAAOT,IAAI,CAACgF,WAAZ;CACA;;CAE6B,SAAvBC,uBAAuB,CAACzI,KAAD,EAC9B;CACCwD,IAAAA,IAAI,CAACkF,oBAAL,GAA4B1I,KAA5B;CACA;;CAE6B,SAAvB2I,uBAAuB,GAC9B;CACC,WAAOnF,IAAI,CAACkF,oBAAL,IAA6B,QAApC;CACA;;CAEuB,SAAjBE,iBAAiB,CAAC5I,KAAD,EACxB;CACCwD,IAAAA,IAAI,CAACqF,cAAL,GAAsB7I,KAAtB;CACA;;CAEuB,SAAjB8I,iBAAiB,GACxB;CACC,WAAOtF,IAAI,CAACqF,cAAL,IAAuB,KAA9B;CACA;;CAEuB,SAAjBlE,iBAAiB,GACxB;CACC,QAAI,CAACnB,IAAI,CAACuF,eAAV,EACA;CACCvF,MAAAA,IAAI,CAACuF,eAAL,GAAuB1T,EAAE,CAACC,IAAH,CAAQC,IAAR,CAAa8I,mBAAb,CAAiC2F,aAAG,CAACC,UAAJ,CAAe,iBAAf,CAAjC,CAAvB;CACA;;CACD,WAAOT,IAAI,CAACuF,eAAZ;CACA;;CAEmB,SAAbC,aAAa,GACpB;CACC,QAAI,CAACxF,IAAI,CAACyF,WAAV,EACA;CACC,UAAKjF,aAAG,CAACC,UAAJ,CAAe,iBAAf,EAAkCjI,MAAlC,CAAyC,CAAzC,EAA4CgI,aAAG,CAACC,UAAJ,CAAe,aAAf,EAA8BjN,MAA1E,MAAsFgN,aAAG,CAACC,UAAJ,CAAe,aAAf,CAA3F,EACA;CACCT,QAAAA,IAAI,CAACyF,WAAL,GAAmB5T,EAAE,CAAC6O,IAAH,CAAQpC,IAAR,CAAa0B,IAAI,CAACmB,iBAAL,GAAyB3I,MAAzB,CAAgCwH,IAAI,CAACG,aAAL,GAAqB3M,MAArD,CAAb,CAAnB;CACAwM,QAAAA,IAAI,CAAC0F,cAAL,GAAsB7T,EAAE,CAAC6O,IAAH,CAAQpC,IAAR,CAAakC,aAAG,CAACC,UAAJ,CAAe,iBAAf,EAAkCjI,MAAlC,CAAyCgI,aAAG,CAACC,UAAJ,CAAe,aAAf,EAA8BjN,MAAvE,CAAb,CAAtB;CACA,OAJD,MAMA;CACCwM,QAAAA,IAAI,CAAC0F,cAAL,GAAsB7T,EAAE,CAAC8I,UAAH,KAAkB,WAAlB,GAAgC,UAAtD;CACAqF,QAAAA,IAAI,CAACyF,WAAL,GAAmB5T,EAAE,CAACa,IAAH,CAAQmI,mBAAR,CAA4BhJ,EAAE,CAAC8I,UAAH,KAAkB,WAAlB,GAAgC,UAA5D,CAAnB;CACA;CACD;;CAED,WAAOqF,IAAI,CAACyF,WAAZ;CACA;;CAEwB,SAAlBxE,kBAAkB,GACzB;CACC,QAAI,CAACjB,IAAI,CAAC2F,iBAAV,EACA;CACC3F,MAAAA,IAAI,CAAC2F,iBAAL,GAAyB3F,IAAI,CAACwF,aAAL,GAAqB5R,OAArB,CAA6B,IAA7B,EAAmC,EAAnC,CAAzB;CACAoM,MAAAA,IAAI,CAAC4F,oBAAL,GAA4B5F,IAAI,CAAC0F,cAAL,CAAoB9R,OAApB,CAA4B,KAA5B,EAAmC,EAAnC,CAA5B;CACA;;CACD,WAAOoM,IAAI,CAAC2F,iBAAZ;CACA;;CAEsB,SAAhBE,gBAAgB,GACvB;CACC,QAAI,CAAC7F,IAAI,CAAC8F,aAAV,EACA;CACC9F,MAAAA,IAAI,CAAC8F,aAAL,GAAqB5I,QAAQ,CAACsD,aAAG,CAACC,UAAJ,CAAe,SAAf,CAAD,CAA7B;CACA;;CACD,WAAOT,IAAI,CAAC8F,aAAZ;CACA;;CAEkB,SAAZC,YAAY,CAACC,QAAD,EACnB;CACCA,IAAAA,QAAQ,GAAG9I,QAAQ,CAAC8I,QAAD,CAAnB;CACA,QAAI7O,CAAC,GAAGnC,IAAI,CAACgC,KAAL,CAAWgP,QAAQ,GAAG,EAAtB,CAAR;CACA,WAAO;CAAEC,MAAAA,IAAI,EAAE9O,CAAR;CAAW+O,MAAAA,GAAG,EAAEF,QAAQ,GAAG7O,CAAC,GAAG;CAA/B,KAAP;CACA;;CAEsB,SAAhBgP,gBAAgB,CAACvE,IAAD,EACvB;CACCA,IAAAA,IAAI,CAACwE,MAAL,GAAcvU,EAAE,CAACwU,KAAjB;CACAzE,IAAAA,IAAI,CAAC0E,WAAL,GAAmBzU,EAAE,CAACwU,KAAtB;CACAzE,IAAAA,IAAI,CAAC2E,aAAL,GAAqB1U,EAAE,CAACwU,KAAxB;CACA;;CAEW,SAALG,KAAK,GACZ;CACC,WAAO5U,MAAM,CAAC6U,GAAP,CAAW5U,EAAX,IAAiBD,MAAM,CAACC,EAA/B;CACA;;CAEoB,SAAd6U,cAAc,GACrB;CACC,QAAIC,uBAAY,CAACC,eAAb,EAAJ,EACA;CACC,WAAK,IAAIvP,CAAC,GAAG,CAAR,EAAW7D,MAAM,GAAGmT,uBAAY,CAACE,OAAb,CAAqBrT,MAA9C,EAAsD6D,CAAC,GAAG7D,MAA1D,EAAkE6D,CAAC,EAAnE,EACA;CACC,YAAIsP,uBAAY,CAACE,OAAb,CAAqBxP,CAArB,KACAsP,uBAAY,CAACE,OAAb,CAAqBxP,CAArB,EAAwByP,OAAxB,EADJ,EAEA;CACCH,UAAAA,uBAAY,CAACE,OAAb,CAAqBxP,CAArB,EAAwB0P,KAAxB;CACA;CACD;CACD;CACD;;CAEuB,SAAjBC,iBAAiB,CAACC,KAAD,EACxB;CACCpV,IAAAA,EAAE,CAACqV,IAAH,CAAQC,SAAR,CAAkB,8CAAlB,EAAkE;CAAEC,MAAAA,cAAc,EAAEH;CAAlB,KAAlE;CACA;;CAEgB,SAAVI,UAAU,CAACC,MAAD,EAASC,gBAAT,EACjB;CACCvH,IAAAA,IAAI,CAACsH,MAAL,GAAcA,MAAd;CACAtH,IAAAA,IAAI,CAACuH,gBAAL,GAAwBA,gBAAxB;CACA;;CAEqB,SAAfC,eAAe,CAACC,YAAD,EACtB;CACCzH,IAAAA,IAAI,CAACyH,YAAL,GAAoBA,YAApB;CACA;;CAEqB,SAAfC,eAAe,GACtB;CACC,WAAO1G,cAAI,CAAC2G,YAAL,CAAkB3H,IAAI,CAACyH,YAAvB,IAAuCzH,IAAI,CAACyH,YAA5C,GAA2D,EAAlE;CACA;;CAEwB,SAAlBG,kBAAkB,CAACC,eAAD,EACzB;CACC7H,IAAAA,IAAI,CAAC6H,eAAL,GAAuBA,eAAvB;CACA;;CAEwB,SAAlBC,kBAAkB,GACzB;CACC,WAAO9H,IAAI,CAAC6H,eAAL,IAAwB,IAA/B;CACA;;CAE0B,SAApBE,oBAAoB,GAC3B;CACC,WAAO,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAP;CACA;;CAE+B,SAAzBC,yBAAyB,GAChC;CACC,UAAMC,gBAAgB,GAAGjI,IAAI,CAACkI,4BAAL,EAAzB;CACA,UAAMC,eAAe,GAAGnI,IAAI,CAACoI,2BAAL,EAAxB;CACA,WAAOD,eAAe,GAAG,CAAlB,KACFF,gBAAgB,KAAK,CAArB,IACAA,gBAAgB,KAAK,CADrB,IAEAA,gBAAgB,IAAIE,eAHlB,CAAP;CAIA;;CAEkC,SAA5BE,4BAA4B,GACnC;CACC,WAAOrI,IAAI,CAACoI,2BAAL,OAAuC,CAAC,CAAxC,IACHpI,IAAI,CAACkI,4BAAL,KAAsClI,IAAI,CAACoI,2BAAL,EAD1C;CAEA;;CAEkC,SAA5BE,4BAA4B,CAAC9L,KAAD,EACnC;CACCwD,IAAAA,IAAI,CAACuI,8BAAL,GAAsC/L,KAAtC;CACA;;CAEiC,SAA3BgM,2BAA2B,CAAChM,KAAD,EAClC;CACCwD,IAAAA,IAAI,CAACyI,wBAAL,GAAgCjM,KAAhC;CACA;;CAEkC,SAA5B0L,4BAA4B,GACnC;CACC,WAAOlI,IAAI,CAACuI,8BAAZ;CACA;;CAEiC,SAA3BH,2BAA2B,GAClC;CACC,WAAOpI,IAAI,CAACyI,wBAAZ;CACA;;CAEoB,SAAdC,cAAc,CAACC,YAAY,GAAG,IAAhB,EACrB;CACC3I,IAAAA,IAAI,CAAC4I,mBAAL,GAA2BD,YAA3B;CACA;;CAEoB,SAAdE,cAAc,GACrB;CACC,WAAO7I,IAAI,CAAC4I,mBAAL,IAA4B,IAAnC;CACA;;CAEiC,SAA3BE,2BAA2B,CAACpW,IAAD,EAAOwF,cAAc,GAAG,CAAxB,EAA2B6Q,OAAO,GAAG,KAArC,EAClC;CACC,QAAI,CAAC/H,cAAI,CAACpO,MAAL,CAAYF,IAAZ,CAAL,EACC,MAAM,IAAIsW,KAAJ,CAAU,0DAAV,CAAN;CAED,QAAI,CAAC9L,QAAQ,CAAChF,cAAD,CAAT,IAA6B6Q,OAAO,KAAK,IAA7C,EACC,OAAOrW,IAAP;CAED,WAAO,IAAIX,IAAJ,CAASW,IAAI,CAACG,OAAL,KAAiBqK,QAAQ,CAAChF,cAAD,CAAR,GAA2B,IAArD,CAAP;CACA;;CAEe,SAAT+Q,SAAS,CAAC/C,GAAD,EAAMgD,GAAN,EAChB;CACC,WAAOlU,IAAI,CAACqI,KAAL,CAAW6I,GAAG,GAAG,GAAN,GAAYlR,IAAI,CAACmU,MAAL,MAAiBD,GAAG,GAAGhD,GAAN,GAAY,CAA7B,CAAvB,CAAP;CACA;;CAEoB,SAAdkD,cAAc,GACrB;CACC,UAAMC,aAAa,GAAGrJ,IAAI,CAAC0B,mBAAL,EAAtB;CACA,WAAO2H,aAAa,CAACrJ,IAAI,CAACiJ,SAAL,CAAe,CAAf,EAAkBI,aAAa,CAAC7V,MAAd,GAAuB,CAAzC,CAAD,CAApB;CACA;;CAEoB,SAAd8V,cAAc,CAACC,WAAW,GAAG,EAAf,EACrB;CACCvJ,IAAAA,IAAI,CAACuJ,WAAL,GAAmB,EAAnB;;CACA,SAAK,IAAIC,IAAT,IAAiBD,WAAjB,EACA;CACC,UAAIA,WAAW,CAACE,cAAZ,CAA2BD,IAA3B,CAAJ,EACA;CACCxJ,QAAAA,IAAI,CAAC0J,aAAL,CAAmBF,IAAnB,EAAyBD,WAAW,CAACC,IAAD,CAApC;CACA;CACD;CACD;;CAEmB,SAAbG,aAAa,CAACH,IAAD,EACpB;CACC,WAAOxJ,IAAI,CAACuJ,WAAL,CAAiBC,IAAjB,KAA0BA,IAAjC;CACA;;CAEmB,SAAbE,aAAa,CAACF,IAAD,EAAOvH,IAAP,EACpB;CACCjC,IAAAA,IAAI,CAACuJ,WAAL,CAAiBC,IAAjB,IAAyBvH,IAAzB;CACA;;CAEkB,SAAZ2H,YAAY,CAACC,QAAQ,GAAG,CAAZ,EACnB;CACC,WAAO7U,IAAI,CAACqI,KAAL,CAAWrI,IAAI,CAACmU,MAAL,KAAgBnU,IAAI,CAAC8U,GAAL,CAAS,EAAT,EAAaD,QAAb,CAA3B,CAAP;CACA;;CAEkB,SAAZE,YAAY,CAACC,MAAD,EAASC,UAAT,EACnB;CACC,QAAIjJ,cAAI,CAAC/N,OAAL,CAAa+W,MAAb,CAAJ,EACA;CACC,UAAIE,YAAY,GAAG,EAAnB;;CACA,WAAK,IAAI7S,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2S,MAAM,CAACxW,MAA3B,EAAmC6D,CAAC,EAApC,EACA;CACC6S,QAAAA,YAAY,IAAIF,MAAM,CAAC3S,CAAD,CAAN,CAAUuF,OAAV,GAAoB,IAApC;CACA;;CACDoN,MAAAA,MAAM,GAAGE,YAAT;CACA;;CAEDC,IAAAA,UAAU,CAAC,MAAM;CAEhB7F,MAAAA,KAAK,CAAC0F,MAAM,IAAI,iCAAX,CAAL;;CACA,UAAIC,UAAJ,EACA;CACCG,QAAAA,QAAQ,CAACC,MAAT;CACA;CAED,KARS,EAQP,GARO,CAAV;CASA;;CAE+B,SAAzBC,yBAAyB,CAACC,MAAD,EAChC;CACC,QAAIvJ,cAAI,CAAC2G,YAAL,CAAkB4C,MAAlB,CAAJ,EACA;CACC,UAAIA,MAAM,CAACC,QAAP,KAAoB,WAApB,IAAmCD,MAAM,CAACE,EAAP,KAAc,WAArD,EACA;CACC,eAAO,IAAP;CACA,OAHD,MAIK,IAAIF,MAAM,CAACC,QAAP,KAAoB,MAAxB,EACL;CACC,eAAO,MAAMD,MAAM,CAACE,EAApB;CACA,OAHI,MAIA,IAAIF,MAAM,CAACC,QAAP,KAAoB,SAAxB,EACL;CACC,eAAO,OAAOD,MAAM,CAACE,EAAd,GAAmB,IAA1B,CADD;CAEC,OAHI,MAIA,IAAIF,MAAM,CAACC,QAAP,KAAoB,YAAxB,EACL;CACC,eAAO,OAAOD,MAAM,CAACE,EAArB;CACA,OAHI,MAIA,IAAIF,MAAM,CAACC,QAAP,KAAoB,OAAxB,EACL;CACC,eAAOD,MAAM,CAACE,EAAd;CACA;CACD;CACD;;CAE0B,SAApBC,oBAAoB,CAAC;CAAEC,IAAAA,OAAF;CAAWvI,IAAAA;CAAX,GAAD,EAC3B;CACCuI,IAAAA,OAAO,CAAClX,OAAR,CAAiBmX,KAAD,IAAW;CAC1B,UAAIA,KAAK,CAACjK,IAAN,KAAe,MAAf,IAAyBzD,QAAQ,CAAC0N,KAAK,CAACH,EAAP,CAAR,KAAuBvN,QAAQ,CAACkF,MAAD,CAA5D,EACA;CACC,cAAMyI,GAAG,GAAG7K,IAAI,CAAC8K,gBAAL,CAAsBlX,OAAtB,CAA8B,WAA9B,EAA2CgX,KAAK,CAACH,EAAjD,CAAZ;;CACA,YAAI,CAACzK,IAAI,CAAC+K,kBAAL,CAAwBC,QAAxB,CAAiCH,GAAjC,CAAL,EACA;CACCI,UAAAA,gBAAI,CAACC,WAAL,CAAiBL,GAAjB;CACA7K,UAAAA,IAAI,CAAC+K,kBAAL,CAAwBI,IAAxB,CAA6BN,GAA7B;CACA;CACD;CACD,KAVD;CAWA;;CAEyB,SAAnBO,mBAAmB,GAC1B;CACCpL,IAAAA,IAAI,CAAC+K,kBAAL,CAAwBtX,OAAxB,CAAiCoX,GAAD,IAAS;CACxCI,MAAAA,gBAAI,CAACI,UAAL,CAAgBR,GAAhB;CACA,KAFD;CAGA7K,IAAAA,IAAI,CAAC+K,kBAAL,GAA0B,EAA1B;CACA;;CAEuB,SAAjBO,iBAAiB,GACxB;CACC,UAAMC,UAAU,GAAG1Z,EAAE,CAAC2Z,QAAH,CAAYxL,IAAZ,CAAiB4J,YAAjB,CAA8B,CAA9B,CAAnB;CACA5J,IAAAA,IAAI,CAACyL,eAAL,CAAqBN,IAArB,CAA0BI,UAA1B;CACA,WAAOA,UAAP;CACA;;CAEyB,SAAnBG,mBAAmB,CAACH,UAAD,EAC1B;CACCvL,IAAAA,IAAI,CAACyL,eAAL,GAAuBzL,IAAI,CAACyL,eAAL,CAAqBE,MAArB,CAA6BC,GAAD,IAAS;CAAC,aAAOA,GAAG,KAAKL,UAAf;CAA0B,KAAhE,CAAvB;CACA;;CAEoB,SAAdM,cAAc,CAACN,UAAD,EACrB;CACCA,IAAAA,UAAU,GAAGrO,QAAQ,CAACqO,UAAD,CAArB;CACA,WAAO,CAACvK,cAAI,CAAC8K,SAAL,CAAeP,UAAf,CAAD,IAA+B,CAACvL,IAAI,CAACyL,eAAL,CAAqBT,QAArB,CAA8BO,UAA9B,CAAvC;CACA;;CAEkB,SAAZQ,YAAY,CAACC,QAAD,EACnB;CAAA;;CACC,UAAMC,EAAE,GAAGjM,IAAI,CAACwG,KAAL,EAAX;;CACA,QAAIxF,cAAI,CAACkL,aAAL,CAAmBF,QAAnB,KAAgCC,EAAhC,sBAAgCA,EAAE,CAAEvI,EAApC,aAAgC,OAAQyI,IAA5C,EACA;CAAA;;CACC,UAAIF,EAAJ,uBAAIA,EAAE,CAAEvI,EAAR,6BAAI,QAAQyI,IAAZ,aAAI,aAAcC,KAAlB,EACA;CACCH,QAAAA,EAAE,CAACvI,EAAH,CAAMyI,IAAN,CAAWC,KAAX,CAAiBC,OAAjB;CACAJ,QAAAA,EAAE,CAACvI,EAAH,CAAMyI,IAAN,CAAWC,KAAX,GAAmB,IAAnB;CACAH,QAAAA,EAAE,CAACvI,EAAH,CAAMyI,IAAN,CAAWrI,OAAX,GAAqB,IAArB;CACA;;CACDmI,MAAAA,EAAE,CAACvI,EAAH,CAAMyI,IAAN,CAAWG,QAAX,CAAoBN,QAApB;CACA;CACD;;CAE6B,SAAvBO,uBAAuB,GAC9B;CACC,WAAO,CAACC,QAAQ,CAACC,MAAjB;CACA;;CAEgB,SAAVC,UAAU,GACjB;CACC,QAAI,eAAeC,OAAnB,EACA;CACCA,MAAAA,OAAO,CAACC,SAAR,CAAkB,EAAlB,EAAsBJ,QAAQ,CAACK,KAA/B,EAAsCjb,MAAM,CAACwY,QAAP,CAAgB0C,QAAhB,GAA2Blb,MAAM,CAACwY,QAAP,CAAgB2C,MAAjF;CACA,KAHD,MAKC;CACA;CACA,UAAIC,OAAO,GAAGR,QAAQ,CAACS,IAAT,CAAcC,SAA5B;CACA,UAAIC,OAAO,GAAGX,QAAQ,CAACS,IAAT,CAAcG,UAA5B;CACAxb,MAAAA,MAAM,CAACwY,QAAP,CAAgBiD,IAAhB,GAAuB,EAAvB,CAJA;;CAMAb,MAAAA,QAAQ,CAACS,IAAT,CAAcC,SAAd,GAA0BF,OAA1B;CACAR,MAAAA,QAAQ,CAACS,IAAT,CAAcG,UAAd,GAA2BD,OAA3B;CACA;CACD,GAtwBF;;;CAywBiC,SAAzBG,yBAAyB,CAAC9Q,KAAD,EAChC;CACCwD,IAAAA,IAAI,CAACuN,sBAAL,GAA8B/Q,KAA9B;CACA;;CAEuB,SAAjBgR,iBAAiB,GACxB;CACC,WAAOxN,IAAI,CAACuN,sBAAZ;CACA;;CAE4B,SAAtBE,sBAAsB,CAACjR,KAAD,EAC7B;CACCwD,IAAAA,IAAI,CAAC0N,mBAAL,GAA2BlR,KAA3B;CACA;;CAEoB,SAAdmR,cAAc,GACrB;CACC,WAAO3N,IAAI,CAAC0N,mBAAZ;CACA;;CA3xBF;CADa1N,KAEL8K,mBAAmB;CAFd9K,KAGL+K,qBAAqB;CAHhB/K,KAILyL,kBAAkB;CAJbzL,KAKLuJ,cAAc;;;;;;;;"}