{"version":3,"file":"util.bundle.js","sources":["../../../../../../main/install/js/main/date/main.date.js","../src/util.js"],"sourcesContent":[";(function(window)\n{\n\t/****************** ATTENTION *******************************\n\t * Please do not use Bitrix CoreJS in this class.\n\t * This class can be called on page without Bitrix Framework\n\t*************************************************************/\n\n\tif (!window.BX)\n\t{\n\t\twindow.BX = {};\n\t}\n\n\tif (!window.BX.Main)\n\t{\n\t\twindow.BX.Main = {};\n\t}\n\telse if (window.BX.Main.Date)\n\t{\n\t\treturn;\n\t}\n\n\tvar BX = window.BX;\n\n\tBX.Main.Date = BX.Main.DateTimeFormat = {\n\n\t\tAM_PM_MODE: {\n\t\t\tUPPER: 1,\n\t\t\tLOWER: 2,\n\t\t\tNONE: false\n\t\t},\n\n\t\tformat: function(format, timestamp, now, utc)\n\t\t{\n\t\t\tvar _this = this;\n\n\t\t\t/*\n\t\t\tPHP to Javascript:\n\t\t\t\ttime() = new Date()\n\t\t\t\tmktime(...) = new Date(...)\n\t\t\t\tgmmktime(...) = new Date(Date.UTC(...))\n\t\t\t\tmktime(0,0,0, 1, 1, 1970) != 0          new Date(1970,0,1).getTime() != 0\n\t\t\t\tgmmktime(0,0,0, 1, 1, 1970) == 0        new Date(Date.UTC(1970,0,1)).getTime() == 0\n\t\t\t\tdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\")\n\t\t\t\tgmdate(\"d.m.Y H:i:s\") = BX.Main.Date.format(\"d.m.Y H:i:s\", null, null, true);\n\t\t\t*/\n\t\t\tvar date = Utils.isDate(timestamp) ? new Date(timestamp.getTime()) : Utils.isNumber(timestamp) ? new Date(timestamp * 1000) : new Date();\n\t\t\tvar nowDate = Utils.isDate(now) ? new Date(now.getTime()) : Utils.isNumber(now) ? new Date(now * 1000) : new Date();\n\t\t\tvar isUTC = !!utc;\n\n\t\t\tif (Utils.isArray(format))\n\t\t\t\treturn _formatDateInterval(format, date, nowDate, isUTC);\n\t\t\telse if (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\tvar replaceMap = (format.match(/{{([^{}]*)}}/g) || []).map(function(x) { return (x.match(/[^{}]+/) || [''])[0]; });\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tformat = format.replace(\"{{\"+element+\"}}\", \"{{\"+index+\"}}\");\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar formatRegex = /\\\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;\n\n\t\t\tvar dateFormats = {\n\t\t\t\td : function() {\n\t\t\t\t\t// Day of the month 01 to 31\n\t\t\t\t\treturn Utils.strPadLeft(getDate(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tD : function() {\n\t\t\t\t\t//Mon through Sun\n\t\t\t\t\treturn _this._getMessage(\"DOW_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tj : function() {\n\t\t\t\t\t//Day of the month 1 to 31\n\t\t\t\t\treturn getDate(date);\n\t\t\t\t},\n\n\t\t\t\tl : function() {\n\t\t\t\t\t//Sunday through Saturday\n\t\t\t\t\treturn _this._getMessage(\"DAY_OF_WEEK_\" + getDay(date));\n\t\t\t\t},\n\n\t\t\t\tN : function() {\n\t\t\t\t\t//1 (for Monday) through 7 (for Sunday)\n\t\t\t\t\treturn getDay(date) || 7;\n\t\t\t\t},\n\n\t\t\t\tS : function() {\n\t\t\t\t\t//st, nd, rd or th. Works well with j\n\t\t\t\t\tif (getDate(date) % 10 == 1 && getDate(date) != 11)\n\t\t\t\t\t\treturn \"st\";\n\t\t\t\t\telse if (getDate(date) % 10 == 2 && getDate(date) != 12)\n\t\t\t\t\t\treturn \"nd\";\n\t\t\t\t\telse if (getDate(date) % 10 == 3 && getDate(date) != 13)\n\t\t\t\t\t\treturn \"rd\";\n\t\t\t\t\telse\n\t\t\t\t\t\treturn \"th\";\n\t\t\t\t},\n\n\t\t\t\tw : function() {\n\t\t\t\t\t//0 (for Sunday) through 6 (for Saturday)\n\t\t\t\t\treturn getDay(date);\n\t\t\t\t},\n\n\t\t\t\tz : function() {\n\t\t\t\t\t//0 through 365\n\t\t\t\t\tvar firstDay = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar currentDay = new Date(getFullYear(date), getMonth(date), getDate(date));\n\t\t\t\t\treturn Math.ceil( (currentDay - firstDay) / (24 * 3600 * 1000) );\n\t\t\t\t},\n\n\t\t\t\tW : function() {\n\t\t\t\t\t//ISO-8601 week number of year\n\t\t\t\t\tvar newDate  = new Date(date.getTime());\n\t\t\t\t\tvar dayNumber   = (getDay(date) + 6) % 7;\n\t\t\t\t\tsetDate(newDate, getDate(newDate) - dayNumber + 3);\n\t\t\t\t\tvar firstThursday = newDate.getTime();\n\t\t\t\t\tsetMonth(newDate, 0, 1);\n\t\t\t\t\tif (getDay(newDate) != 4)\n\t\t\t\t\t\tsetMonth(newDate, 0, 1 + ((4 - getDay(newDate)) + 7) % 7);\n\t\t\t\t\tvar weekNumber = 1 + Math.ceil((firstThursday - newDate) / (7 * 24 * 3600 * 1000));\n\t\t\t\t\treturn Utils.strPadLeft(weekNumber.toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tF : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1) + \"_S\");\n\t\t\t\t},\n\n\t\t\t\tf : function() {\n\t\t\t\t\t//January through December\n\t\t\t\t\treturn _this._getMessage(\"MONTH_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tm : function() {\n\t\t\t\t\t//Numeric representation of a month 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getMonth(date) + 1).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tM : function() {\n\t\t\t\t\t//A short textual representation of a month, three letters Jan through Dec\n\t\t\t\t\treturn _this._getMessage(\"MON_\" + (getMonth(date) + 1));\n\t\t\t\t},\n\n\t\t\t\tn : function() {\n\t\t\t\t\t//Numeric representation of a month 1 through 12\n\t\t\t\t\treturn getMonth(date) + 1;\n\t\t\t\t},\n\n\t\t\t\tt : function() {\n\t\t\t\t\t//Number of days in the given month 28 through 31\n\t\t\t\t\tvar lastMonthDay = isUTC ? new Date(Date.UTC(getFullYear(date), getMonth(date) + 1, 0)) : new Date(getFullYear(date), getMonth(date) + 1, 0);\n\t\t\t\t\treturn getDate(lastMonthDay);\n\t\t\t\t},\n\n\t\t\t\tL : function() {\n\t\t\t\t\t//1 if it is a leap year, 0 otherwise.\n\t\t\t\t\tvar year = getFullYear(date);\n\t\t\t\t\treturn (year % 4 == 0 && year % 100 != 0 || year % 400 == 0 ? 1 : 0);\n\t\t\t\t},\n\n\t\t\t\to : function() {\n\t\t\t\t\t//ISO-8601 year number\n\t\t\t\t\tvar correctDate  = new Date(date.getTime());\n\t\t\t\t\tsetDate(correctDate, getDate(correctDate) - ((getDay(date) + 6) % 7) + 3);\n\t\t\t\t\treturn getFullYear(correctDate);\n\t\t\t\t},\n\n\t\t\t\tY : function() {\n\t\t\t\t\t//A full numeric representation of a year, 4 digits\n\t\t\t\t\treturn getFullYear(date);\n\t\t\t\t},\n\n\t\t\t\ty : function() {\n\t\t\t\t\t//A two digit representation of a year\n\t\t\t\t\treturn getFullYear(date).toString().slice(2);\n\t\t\t\t},\n\n\t\t\t\ta : function() {\n\t\t\t\t\t//am or pm\n\t\t\t\t\treturn getHours(date) > 11 ? \"pm\" : \"am\";\n\t\t\t\t},\n\n\t\t\t\tA : function() {\n\t\t\t\t\t//AM or PM\n\t\t\t\t\treturn getHours(date) > 11 ? \"PM\" : \"AM\";\n\t\t\t\t},\n\n\t\t\t\tB : function() {\n\t\t\t\t\t//000 through 999\n\t\t\t\t\tvar swatch = ((date.getUTCHours() + 1) % 24) + date.getUTCMinutes() / 60 + date.getUTCSeconds() / 3600;\n\t\t\t\t\treturn Utils.strPadLeft(Math.floor(swatch * 1000 / 24).toString(), 3, \"0\");\n\t\t\t\t},\n\n\t\t\t\tg : function() {\n\t\t\t\t\t//12-hour format of an hour without leading zeros 1 through 12\n\t\t\t\t\treturn getHours(date) % 12 || 12;\n\t\t\t\t},\n\n\t\t\t\tG : function() {\n\t\t\t\t\t//24-hour format of an hour without leading zeros 0 through 23\n\t\t\t\t\treturn getHours(date);\n\t\t\t\t},\n\n\t\t\t\th : function() {\n\t\t\t\t\t//12-hour format of an hour with leading zeros 01 through 12\n\t\t\t\t\treturn Utils.strPadLeft((getHours(date) % 12 || 12).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tH : function() {\n\t\t\t\t\t//24-hour format of an hour with leading zeros 00 through 23\n\t\t\t\t\treturn Utils.strPadLeft(getHours(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ti : function() {\n\t\t\t\t\t//Minutes with leading zeros 00 to 59\n\t\t\t\t\treturn Utils.strPadLeft(getMinutes(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\ts : function() {\n\t\t\t\t\t//Seconds, with leading zeros 00 through 59\n\t\t\t\t\treturn Utils.strPadLeft(getSeconds(date).toString(), 2, \"0\");\n\t\t\t\t},\n\n\t\t\t\tu : function() {\n\t\t\t\t\t//Microseconds\n\t\t\t\t\treturn Utils.strPadLeft((getMilliseconds(date) * 1000).toString(), 6, \"0\");\n\t\t\t\t},\n\n\t\t\t\te : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"UTC\";\n\t\t\t\t\treturn \"\";\n\t\t\t\t},\n\n\t\t\t\tI : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\n\t\t\t\t\t//Whether or not the date is in daylight saving time 1 if Daylight Saving Time, 0 otherwise\n\t\t\t\t\tvar firstJanuary = new Date(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJanuaryUTC = Date.UTC(getFullYear(date), 0, 1);\n\t\t\t\t\tvar firstJuly = new Date(getFullYear(date), 6, 0);\n\t\t\t\t\tvar firstJulyUTC = Date.UTC(getFullYear(date), 6, 0);\n\t\t\t\t\treturn 0 + ((firstJanuary - firstJanuaryUTC) !== (firstJuly - firstJulyUTC));\n\t\t\t\t},\n\n\t\t\t\tO : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+0000\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) in hours +0200\n\t\t\t\t\tvar timezoneOffset = date.getTimezoneOffset();\n\t\t\t\t\tvar timezoneOffsetAbs = Math.abs(timezoneOffset);\n\t\t\t\t\treturn (timezoneOffset > 0 ? \"-\" : \"+\") + Utils.strPadLeft((Math.floor(timezoneOffsetAbs / 60) * 100 + timezoneOffsetAbs % 60).toString(), 4, \"0\");\n\t\t\t\t},\n\n\t\t\t\tP : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn \"+00:00\";\n\n\t\t\t\t\t//Difference to Greenwich time (GMT) with colon between hours and minutes +02:00\n\t\t\t\t\tvar difference = this.O();\n\t\t\t\t\treturn difference.substr(0, 3) + \":\" + difference.substr(3);\n\t\t\t\t},\n\n\t\t\t\tZ : function() {\n\t\t\t\t\tif (isUTC)\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t//Timezone offset in seconds. The offset for timezones west of UTC is always negative,\n\t\t\t\t\t//and for those east of UTC is always positive.\n\t\t\t\t\treturn -date.getTimezoneOffset() * 60;\n\t\t\t\t},\n\n\t\t\t\tc : function() {\n\t\t\t\t\t//ISO 8601 date\n\t\t\t\t\treturn \"Y-m-d\\\\TH:i:sP\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tr : function() {\n\t\t\t\t\t//RFC 2822 formatted date\n\t\t\t\t\treturn \"D, d M Y H:i:s O\".replace(formatRegex, _replaceDateFormat);\n\t\t\t\t},\n\n\t\t\t\tU : function() {\n\t\t\t\t\t//Seconds since the Unix Epoch\n\t\t\t\t\treturn Math.floor(date.getTime() / 1000);\n\t\t\t\t},\n\n\t\t\t\tsago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tsshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_SECOND_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 1000));\n\t\t\t\t},\n\n\t\t\t\tiago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tidiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tisago : function() {\n\t\t\t\t\tvar minutesAgo = intval((nowDate - date) / 60 / 1000);\n\t\t\t\t\tvar result = _formatDateMessage(minutesAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_MINUTE_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MINUTE_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MINUTE_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MINUTE_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MINUTE_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MINUTE_MOD_OTHER\"\n\t\t\t\t\t});\n\n\t\t\t\t\tresult += \" \";\n\n\t\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000) - (minutesAgo * 60);\n\t\t\t\t\tresult += _formatDateMessage(secondsAgo, {\n\t\t\t\t\t\t\"0\" : \"FD_SECOND_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_SECOND_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_SECOND_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_SECOND_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_SECOND_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_SECOND_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\n\t\t\t\tishort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MINUTE_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tHago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_HOUR_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_HOUR_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_HOUR_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_HOUR_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_HOUR_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_HOUR_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tHshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_HOUR_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 1000));\n\t\t\t\t},\n\n\t\t\t\tyesterday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_YESTERDAY\");\n\t\t\t\t},\n\n\t\t\t\ttoday : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TODAY\");\n\t\t\t\t},\n\n\t\t\t\ttommorow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\ttomorrow : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_TOMORROW\");\n\t\t\t\t},\n\n\t\t\t\tdago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tddiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_DAY_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_DAY_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_DAY_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_DAY_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_DAY_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_DAY_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tdshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_DAY_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 1000));\n\t\t\t\t},\n\n\t\t\t\tmago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_MONTH_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_MONTH_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_MONTH_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_MONTH_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_MONTH_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_MONTH_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tmshort : function() {\n\t\t\t\t\treturn _this._getMessage(\"FD_MONTH_SHORT\").replace(/#VALUE#/g, intval((nowDate - date) / 60 / 60 / 24 / 31 / 1000));\n\t\t\t\t},\n\n\t\t\t\tYago : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_AGO_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_AGO_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_AGO_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_AGO_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_AGO_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_AGO_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYdiff : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_DIFF_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_DIFF_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_DIFF_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_DIFF_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_DIFF_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_DIFF_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tYshort : function() {\n\t\t\t\t\treturn _formatDateMessage(intval((nowDate - date) / 60 / 60 / 24 / 365 / 1000), {\n\t\t\t\t\t\t\"0\" : \"FD_YEARS_SHORT_0\",\n\t\t\t\t\t\t\"1\" : \"FD_YEARS_SHORT_1\",\n\t\t\t\t\t\t\"10_20\" : \"FD_YEARS_SHORT_10_20\",\n\t\t\t\t\t\t\"MOD_1\" : \"FD_YEARS_SHORT_MOD_1\",\n\t\t\t\t\t\t\"MOD_2_4\" : \"FD_YEARS_SHORT_MOD_2_4\",\n\t\t\t\t\t\t\"MOD_OTHER\" : \"FD_YEARS_SHORT_MOD_OTHER\"\n\t\t\t\t\t});\n\t\t\t\t},\n\n\t\t\t\tx : function() {\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\treturn _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow, \"+timeFormat],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t\t\t\t[\"s\", \"sago\"],\n\t\t\t\t\t\t[\"i\", \"iago\"],\n\t\t\t\t\t\t[\"today\", \"today, \"+timeFormat],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday, \"+timeFormat],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")]\n\t\t\t\t\t], date, nowDate, isUTC);\n\t\t\t\t},\n\n\t\t\t\tX : function() {\n\n\t\t\t\t\tvar ampm = _this.isAmPmMode(true);\n\t\t\t\t\tvar timeFormat = (ampm === _this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === _this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\t\t\tvar day = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", \"tomorrow\"],\n\t\t\t\t\t\t[\"-\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))],\n\t\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t\t[\"\", _this.convertBitrixFormat(_this._getMessage(\"FORMAT_DATE\"))]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tvar time = _this.format([\n\t\t\t\t\t\t[\"tomorrow\", timeFormat],\n\t\t\t\t\t\t[\"today\", timeFormat],\n\t\t\t\t\t\t[\"yesterday\", timeFormat],\n\t\t\t\t\t\t[\"\", \"\"]\n\t\t\t\t\t], date, nowDate, isUTC);\n\n\t\t\t\t\tif (time.length > 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_AT_TIME\").replace(/#DAY#/g, day).replace(/#TIME#/g, time);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn day;\n\t\t\t\t},\n\n\t\t\t\tQ : function() {\n\t\t\t\t\tvar daysAgo = intval((nowDate - date) / 60 / 60 / 24 / 1000);\n\t\t\t\t\tif(daysAgo == 0)\n\t\t\t\t\t\treturn _this._getMessage(\"FD_DAY_DIFF_1\").replace(/#VALUE#/g, 1);\n\t\t\t\t\telse\n\t\t\t\t\t\treturn _this.format([ [\"d\", \"ddiff\"], [\"m\", \"mdiff\"], [\"\", \"Ydiff\"] ], date, nowDate);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar cutZeroTime = false;\n\t\t\tif (format[0] && format[0] == \"^\")\n\t\t\t{\n\t\t\t\tcutZeroTime = true;\n\t\t\t\tformat = format.substr(1);\n\t\t\t}\n\n\t\t\tvar result = format.replace(formatRegex, _replaceDateFormat);\n\n\t\t\tif (cutZeroTime)\n\t\t\t{\n\t\t\t\t/* \t15.04.12 13:00:00 => 15.04.12 13:00\n\t\t\t\t\t00:01:00 => 00:01\n\t\t\t\t\t4 may 00:00:00 => 4 may\n\t\t\t\t\t01-01-12 00:00 => 01-01-12\n\t\t\t\t*/\n\n\t\t\t\tresult = result.replace(/\\s*00:00:00\\s*/g, \"\").\n\t\t\t\t\t\t\t\treplace(/(\\d\\d:\\d\\d)(:00)/g, \"$1\").\n\t\t\t\t\t\t\t\treplace(/(\\s*00:00\\s*)(?!:)/g, \"\");\n\t\t\t}\n\n\t\t\tif (replaceMap.length > 0)\n\t\t\t{\n\t\t\t\treplaceMap.forEach(function(element, index) {\n\t\t\t\t\tresult = result.replace(\"{{\"+index+\"}}\", element);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t\tfunction _formatDateInterval(formats, date, nowDate, isUTC)\n\t\t\t{\n\t\t\t\tvar secondsAgo = intval((nowDate - date) / 1000);\n\t\t\t\tfor (var i = 0; i < formats.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar formatInterval = formats[i][0];\n\t\t\t\t\tvar formatValue = formats[i][1];\n\t\t\t\t\tvar match = null;\n\t\t\t\t\tif (formatInterval == \"s\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^s(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1]\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2]\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"i\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^i(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"H\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^H(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"d\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 31 *24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^d(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"m\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 365 * 24 * 60 * 60)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if ((match = /^m(\\d+)\\>?(\\d+)?/.exec(formatInterval)) != null)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (match[1] && match[2])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tsecondsAgo < match[1] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t\t&& secondsAgo > match[2] * 31 * 24 * 60 * 60\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (secondsAgo < match[1] * 31 * 24 * 60 * 60)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"now\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (date.getTime() == nowDate.getTime())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"today\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"todayFuture\")\n\t\t\t\t\t{\n\t\t\t\t\t\tvar year = getFullYear(nowDate), month = getMonth(nowDate), day = getDate(nowDate);\n\t\t\t\t\t\tvar todayStart = nowDate.getTime();\n\t\t\t\t\t\tvar todayEnd = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= todayStart && date < todayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"yesterday\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar yesterdayStart = isUTC ? new Date(Date.UTC(year, month, day-1, 0, 0, 0, 0)) : new Date(year, month, day-1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar yesterdayEnd = isUTC ? new Date(Date.UTC(year, month, day, 0, 0, 0, 0)) : new Date(year, month, day, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= yesterdayStart && date < yesterdayEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"tommorow\" || formatInterval == \"tomorrow\")\n\t\t\t\t\t{\n\t\t\t\t\t\tyear = getFullYear(nowDate); month = getMonth(nowDate); day = getDate(nowDate);\n\t\t\t\t\t\tvar tomorrowStart = isUTC ? new Date(Date.UTC(year, month, day+1, 0, 0, 0, 0)) : new Date(year, month, day+1, 0, 0, 0, 0);\n\t\t\t\t\t\tvar tomorrowEnd = isUTC ? new Date(Date.UTC(year, month, day+2, 0, 0, 0, 0)) : new Date(year, month, day+2, 0, 0, 0, 0);\n\t\t\t\t\t\tif (date >= tomorrowStart && date < tomorrowEnd)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t\telse if (formatInterval == \"-\")\n\t\t\t\t\t{\n\t\t\t\t\t\tif (secondsAgo < 0)\n\t\t\t\t\t\t\treturn _this.format(formatValue, date, nowDate, isUTC);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//return formats.length > 0 ? _this.format(formats.pop()[1], date, nowDate, isUTC) : \"\";\n\t\t\t\treturn formats.length > 0 ? _this.format(formats[formats.length - 1][1], date, nowDate, isUTC) : \"\";\n\t\t\t}\n\n\t\t\tfunction getFullYear(date) { return isUTC ? date.getUTCFullYear() : date.getFullYear(); }\n\t\t\tfunction getDate(date) { return isUTC ? date.getUTCDate() : date.getDate(); }\n\t\t\tfunction getMonth(date) { return isUTC ? date.getUTCMonth() : date.getMonth(); }\n\t\t\tfunction getHours(date) { return isUTC ? date.getUTCHours() : date.getHours(); }\n\t\t\tfunction getMinutes(date) { return isUTC ? date.getUTCMinutes() : date.getMinutes(); }\n\t\t\tfunction getSeconds(date) { return isUTC ? date.getUTCSeconds() : date.getSeconds(); }\n\t\t\tfunction getMilliseconds(date) { return isUTC ? date.getUTCMilliseconds() : date.getMilliseconds(); }\n\t\t\tfunction getDay(date) { return isUTC ? date.getUTCDay() : date.getDay(); }\n\t\t\tfunction setDate(date, dayValue) { return isUTC ? date.setUTCDate(dayValue) : date.setDate(dayValue); }\n\t\t\tfunction setMonth(date, monthValue, dayValue) { return isUTC ? date.setUTCMonth(monthValue, dayValue) : date.setMonth(monthValue, dayValue); }\n\n\t\t\tfunction _formatDateMessage(value, messages)\n\t\t\t{\n\t\t\t\tvar val = value < 100 ? Math.abs(value) : Math.abs(value % 100);\n\t\t\t\tvar dec = val % 10;\n\t\t\t\tvar message = \"\";\n\n\t\t\t\tif(val == 0)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"0\"]);\n\t\t\t\telse if (val == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"1\"]);\n\t\t\t\telse if (val >= 10 && val <= 20)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"10_20\"]);\n\t\t\t\telse if (dec == 1)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_1\"]);\n\t\t\t\telse if (2 <= dec && dec <= 4)\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_2_4\"]);\n\t\t\t\telse\n\t\t\t\t\tmessage = _this._getMessage(messages[\"MOD_OTHER\"]);\n\n\t\t\t\treturn message.replace(/#VALUE#/g, value);\n\t\t\t}\n\n\t\t\tfunction _replaceDateFormat(match, matchFull)\n\t\t\t{\n\t\t\t\tif (dateFormats[match])\n\t\t\t\t\treturn dateFormats[match]();\n\t\t\t\telse\n\t\t\t\t\treturn matchFull;\n\t\t\t}\n\n\t\t\tfunction intval(number)\n\t\t\t{\n\t\t\t\treturn number >= 0 ? Math.floor(number) : Math.ceil(number);\n\t\t\t}\n\t\t},\n\n\t\tconvertBitrixFormat: function(format)\n\t\t{\n\t\t\tif (!Utils.isNotEmptyString(format))\n\t\t\t\treturn \"\";\n\n\t\t\treturn format.replace(\"YYYY\", \"Y\")\t// 1999\n\t\t\t\t\t\t .replace(\"MMMM\", \"F\")\t// January - December\n\t\t\t\t\t\t .replace(\"MM\", \"m\")\t// 01 - 12\n\t\t\t\t\t\t .replace(\"M\", \"M\")\t// Jan - Dec\n\t\t\t\t\t\t .replace(\"DD\", \"d\")\t// 01 - 31\n\t\t\t\t\t\t .replace(\"G\", \"g\")\t//  1 - 12\n\t\t\t\t\t\t .replace(/GG/i, \"G\")\t//  0 - 23\n\t\t\t\t\t\t .replace(\"H\", \"h\")\t// 01 - 12\n\t\t\t\t\t\t .replace(/HH/i, \"H\")\t// 00 - 24\n\t\t\t\t\t\t .replace(\"MI\", \"i\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"SS\", \"s\")\t// 00 - 59\n\t\t\t\t\t\t .replace(\"TT\", \"A\")\t// AM - PM\n\t\t\t\t\t\t .replace(\"T\", \"a\");\t// am - pm\n\t\t},\n\n\t\tconvertToUTC: function(date)\n\t\t{\n\t\t\tif (!Utils.isDate(date))\n\t\t\t\treturn null;\n\n\t\t\treturn new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n\t\t},\n\n\t\t/**\n\t\t * Function creates and returns Javascript Date() object from server timestamp regardless of local browser (system) timezone.\n\t\t * For example can be used to convert timestamp from some exact date on server to the JS Date object with the same value.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {Date}\n\t\t */\n\t\tgetNewDate: function(timestamp)\n\t\t{\n\t\t\treturn new Date(this.getBrowserTimestamp(timestamp));\n\t\t},\n\n\t\t/**\n\t\t * Function transforms server timestamp (in sec) to javascript timestamp (calculated depend on local browser timezone offset). Returns timestamp in milliseconds.\n\t\t * Also see BX.Main.Date.getNewDate description.\n\t\t *\n\t\t * @param timestamp - timestamp in seconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetBrowserTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp * 1000).getTimezoneOffset() * 60;\n\t\t\treturn (parseInt(timestamp, 10) + parseInt(this._getMessage('SERVER_TZ_OFFSET')) + browserOffset) * 1000;\n\t\t},\n\n\t\t/**\n\t\t * Function transforms local browser timestamp (in ms) to server timestamp (calculated depend on local browser timezone offset). Returns timestamp in seconds.\n\t\t *\n\t\t * @param timestamp - timestamp in milliseconds\n\t\t * @returns {number}\n\t\t */\n\t\tgetServerTimestamp: function(timestamp)\n\t\t{\n\t\t\ttimestamp = parseInt(timestamp, 10);\n\t\t\tvar browserOffset = new Date(timestamp).getTimezoneOffset() * 60;\n\t\t\treturn Math.round(timestamp / 1000 - (parseInt(this._getMessage('SERVER_TZ_OFFSET'), 10) + parseInt(browserOffset, 10)));\n\t\t},\n\n\t\tformatLastActivityDate: function(timestamp, now, utc)\n\t\t{\n\t\t\tvar ampm = this.isAmPmMode(true);\n\t\t\tvar timeFormat = (ampm === this.AM_PM_MODE.LOWER? \"g:i a\" : (ampm === this.AM_PM_MODE.UPPER? \"g:i A\" : \"H:i\"));\n\n\t\t\tvar format = [\n\t\t\t   [\"tomorrow\", \"#01#\"+timeFormat],\n\t\t\t   [\"now\" , \"#02#\"],\n\t\t\t   [\"todayFuture\", \"#03#\"+timeFormat],\n\t\t\t   [\"yesterday\", \"#04#\"+timeFormat],\n\t\t\t   [\"-\", this.convertBitrixFormat(this._getMessage(\"FORMAT_DATETIME\")).replace(/:s/g, \"\")],\n\t\t\t   [\"s60\", \"sago\"],\n\t\t\t   [\"i60\", \"iago\"],\n\t\t\t   [\"H5\", \"Hago\"],\n\t\t\t   [\"H24\", \"#03#\"+timeFormat],\n\t\t\t   [\"d31\", \"dago\"],\n\t\t\t   [\"m12>1\", \"mago\"],\n\t\t\t   [\"m12>0\", \"dago\"],\n\t\t\t   [\"\", \"#05#\"]\n\t\t\t];\n\t\t\tvar formattedDate = this.format(format, timestamp, now, utc);\n\t\t\tvar match = null;\n\t\t\tif ((match = /^#(\\d+)#(.*)/.exec(formattedDate)) != null)\n\t\t\t{\n\t\t\t\tswitch (match[1])\n\t\t\t\t{\n\t\t\t\t\tcase \"01\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TOMORROW').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"02\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_NOW');\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"03\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_TODAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"04\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_YESTERDAY').replace(\"#TIME#\", match[2]);\n\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"05\":\n\t\t\t\t\t\tformattedDate = this._getMessage('FD_LAST_SEEN_MORE_YEAR');\n\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tformattedDate = match[2];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn formattedDate;\n\t\t},\n\n\t\tisAmPmMode: function(returnConst)\n\t\t{\n\t\t\tif (returnConst === true)\n\t\t\t{\n\t\t\t\treturn this._getMessage('AMPM_MODE');\n\t\t\t}\n\n\t\t\treturn this._getMessage('AMPM_MODE') !== false;\n\t\t},\n\n\t\t/**\n\t\t * The method is designed to replace the localization storage on sites without Bitrix Framework.\n\t\t *\n\t\t * @param message\n\t\t * @returns {*}\n\t\t * @private\n\t\t */\n\t\t_getMessage: function(message)\n\t\t{\n\t\t\treturn BX.message(message);\n\t\t},\n\n\t\t/**\n\t\t * The method used to parse date from string by given format.\n\t\t *\n\t\t * @param {string} str - date in given format\n\t\t * @param {boolean} isUTC - is date in UTC\n\t\t * @param {string} formatDate - format of the date without time\n\t\t * @param {string} formatDatetime - format of the date with time\n\t\t * @returns {Date|null} - returns Date object if string was parsed or null\n\t\t */\n\t\tparse: function(str, isUTC, formatDate, formatDatetime)\n\t\t{\n\t\t\tif (Utils.isNotEmptyString(str))\n\t\t\t{\n\t\t\t\tif (!formatDate)\n\t\t\t\t\tformatDate = this._getMessage('FORMAT_DATE');\n\t\t\t\tif (!formatDatetime)\n\t\t\t\t\tformatDatetime = this._getMessage('FORMAT_DATETIME');\n\n\t\t\t\tvar regMonths = '';\n\t\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t\t{\n\t\t\t\t\tregMonths = regMonths + '|' + this._getMessage('MON_'+i);\n\t\t\t\t}\n\n\t\t\t\tvar\n\t\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\t\taDate = str.match(expr),\n\t\t\t\t\taFormat = formatDate.match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\t\ti, cnt,\n\t\t\t\t\taDateArgs=[], aFormatArgs=[],\n\t\t\t\t\taResult={};\n\n\t\t\t\tif (!aDate)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif(aDate.length > aFormat.length)\n\t\t\t\t{\n\t\t\t\t\taFormat = formatDatetime.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aDate[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tif(aFormat[i].trim() !== '')\n\t\t\t\t\t{\n\t\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar m = Utils.array_search('MMMM', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tm = Utils.array_search('M', aFormatArgs);\n\t\t\t\t\tif (m > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\taDateArgs[m] = this.getMonthIndex(aDateArgs[m]);\n\t\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t\t{\n\t\t\t\t\tvar k = aFormatArgs[i].toUpperCase();\n\t\t\t\t\taResult[k] = k === 'T' || k === 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t\t}\n\n\t\t\t\tif(aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t\t{\n\t\t\t\t\tvar d = new Date();\n\n\t\t\t\t\tif(isUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\t\td.setUTCHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setDate(1);\n\t\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\t\td.setHours(0, 0, 0, 0);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(\n\t\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar\n\t\t\t\t\t\t\t\tbPM = (aResult['T']||aResult['TT']||'am').toUpperCase() === 'PM',\n\t\t\t\t\t\t\t\th = parseInt(aResult['H']||aResult['G']||0, 10);\n\n\t\t\t\t\t\t\tif(bPM)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h + (h === 12 ? 0 : 12);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH']||aResult['GG']||0, 10);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\t\tif(isUTC)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn d;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tgetMonthIndex: function(month)\n\t\t{\n\t\t\tvar\n\t\t\t\ti,\n\t\t\t\tq = month.toUpperCase(),\n\t\t\t\twordMonthCut = ['jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec'],\n\t\t\t\twordMonth = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\n\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tif (q === this._getMessage('MON_'+i).toUpperCase()\n\t\t\t\t\t|| q === this._getMessage('MONTH_'+i).toUpperCase()\n\t\t\t\t\t|| q === wordMonthCut[i-1].toUpperCase()\n\t\t\t\t\t|| q === wordMonth[i-1].toUpperCase())\n\t\t\t\t{\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn month;\n\t\t}\n\t};\n\n\t/**\n\t * @private\n\t */\n\tvar Utils = {\n\t\tisDate: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Date]\";\n\t\t},\n\t\tisNumber: function(item) {\n\t\t\treturn item === 0 ? true : (item ? (typeof (item) == \"number\" || item instanceof Number) : false);\n\t\t},\n\t\tisArray: function(item) {\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Array]\";\n\t\t},\n\t\tisString: function(item) {\n\t\t\treturn item === '' ? true : (item ? (typeof (item) == \"string\" || item instanceof String) : false);\n\t\t},\n\t\tisNotEmptyString: function(item) {\n\t\t\treturn this.isString(item) ? item.length > 0 : false;\n\t\t},\n\t\tstrPadLeft: function(input, padLength, padString)\n\t\t{\n\t\t\tvar i = input.length, q=padString.length;\n\t\t\tif (i >= padLength) return input;\n\n\t\t\tfor(;i<padLength;i+=q)\n\t\t\t\tinput = padString + input;\n\n\t\t\treturn input;\n\t\t},\n\t\t/**\n\t\t * @deprecated\n\t\t * @use myArr.findIndex(item => item === needle);\n\t\t */\n\t\tarray_search: function(needle, haystack)\n\t\t{\n\t\t\tfor(var i = 0; i < haystack.length; i++)\n\t\t\t{\n\t\t\t\tif(haystack[i] == needle)\n\t\t\t\t\treturn i;\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\t};\n\n})(window);\n","import {Runtime, Type, Loc, Dom, Tag} from \"main.core\";\nimport \"ui.notification\";\nimport \"../../../../../../main/install/js/main/date/main.date\";\nimport {PopupManager} from 'main.popup';\nimport {PULL as Pull} from 'pull.client';\n\nexport class Util\n{\n\tstatic PLANNER_PULL_TAG = 'calendar-planner-#USER_ID#';\n\tstatic PLANNER_WATCH_LIST = [];\n\tstatic REQUEST_ID_LIST = [];\n\tstatic accessNames = {};\n\n\tstatic parseTime(str)\n\t{\n\t\tlet date = Util.parseDate1(BX.date.format(Util.getDateFormat(), new Date()) + ' ' + str, false);\n\t\treturn date ? {\n\t\t\th: date.getHours(),\n\t\t\tm: date.getMinutes()\n\t\t} : date;\n\t}\n\n\tstatic getTimeRounded(date)\n\t{\n\t\treturn Math.round(date.getTime() / 60000) * 60000;\n\t}\n\n\tstatic parseDate(str, bUTC, formatDate, formatDatetime)\n\t{\n\t\treturn BX.parseDate(str, bUTC, formatDate, formatDatetime);\n\t}\n\n\tstatic parseDate1(str, format, trimSeconds)\n\t{\n\t\tlet\n\t\t\ti, cnt, k,\n\t\t\tregMonths,\n\t\t\tbUTC = false;\n\n\t\tif (!format)\n\t\t\tformat = Loc.getMessage('FORMAT_DATETIME');\n\n\t\tstr = BX.util.trim(str);\n\n\t\tif (trimSeconds !== false)\n\t\t\tformat = format.replace(':SS', '');\n\n\t\tif (BX.type.isNotEmptyString(str))\n\t\t{\n\t\t\tregMonths = '';\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tregMonths = regMonths + '|' + Loc.getMessage('MON_' + i);\n\t\t\t}\n\n\t\t\tlet\n\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\taDate = str.match(expr),\n\t\t\t\taFormat = Loc.getMessage('FORMAT_DATE').match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\taDateArgs = [],\n\t\t\t\taFormatArgs = [],\n\t\t\t\taResult = {};\n\n\t\t\tif (!aDate)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (aDate.length > aFormat.length)\n\t\t\t{\n\t\t\t\taFormat = format.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aDate[i]) !== '')\n\t\t\t\t{\n\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aFormat[i]) != '')\n\t\t\t\t{\n\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet m = BX.util.array_search('MMMM', aFormatArgs);\n\t\t\tif (m > 0)\n\t\t\t{\n\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tm = BX.util.array_search('M', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tk = aFormatArgs[i].toUpperCase();\n\t\t\t\taResult[k] = k == 'T' || k == 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t}\n\n\t\t\tif (aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t{\n\t\t\t\tlet d = new Date();\n\n\t\t\t\tif (bUTC)\n\t\t\t\t{\n\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\td.setUTCHours(0, 0, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\td.setDate(1);\n\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\td.setHours(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet bPM = (aResult['T'] || aResult['TT'] || 'am').toUpperCase() == 'PM';\n\t\t\t\t\t\tlet h = parseInt(aResult['H'] || aResult['G'] || 0, 10);\n\t\t\t\t\t\tif (bPM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h + (h == 12 ? 0 : 12);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH'] || aResult['GG'] || 0, 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\tif (bUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic formatTime(hours, minutes)\n\t{\n\t\tlet day;\n\t\tif (Type.isDate(hours))\n\t\t{\n\t\t\tday = hours;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tday = new Date();\n\t\t\tday.setHours(hours, minutes, 0);\n\t\t}\n\n\t\treturn BX.date.format(Util.getTimeFormatShort(), day.getTime() / 1000);\n\t}\n\n\tstatic formatDate(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateTime(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateTimeFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateUsable(date, showYear = true, showDayOfWeek = false)\n\t{\n\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\t\tlet format = Util.getDateFormat();\n\t\tif (lang === 'ru' || lang === 'ua')\n\t\t{\n\t\t\tformat = showDayOfWeek ? 'l, j F' : 'j F';\n\n\t\t\tif (date.getFullYear\n\t\t\t\t&& date.getFullYear() !== new Date().getFullYear()\n\t\t\t\t&& showYear !== false\n\t\t\t)\n\t\t\t{\n\t\t\t\tformat += ' Y';\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format([\n\t\t\t[\"today\", \"today\"],\n\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t[\"\", format]\n\t\t], date);\n\t}\n\n\tstatic getDayLength()\n\t{\n\t\tif (!Util.DAY_LENGTH)\n\t\t{\n\t\t\tUtil.DAY_LENGTH = 86400000;\n\t\t}\n\t\treturn Util.DAY_LENGTH;\n\t}\n\n\tstatic getDefaultColorList()\n\t{\n\t\treturn ['#86b100', '#0092cc', '#00afc7', '#e89b06', '#00b38c', '#de2b24', '#bd7ac9', '#838fa0', '#c3612c', '#e97090'];\n\t}\n\n\tstatic findTargetNode(node, parentCont)\n\t{\n\t\tlet res = false;\n\t\tif (node)\n\t\t{\n\t\t\tlet prefix = 'data-bx-calendar', i;\n\n\t\t\tif (node.attributes && node.attributes.length)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < node.attributes.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (node.attributes[i].name && node.attributes[i].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t{\n\t\t\t\t\t\tres = node;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!res)\n\t\t\t{\n\t\t\t\tres = BX.findParent(node, function(n) {\n\t\t\t\t\tlet j;\n\t\t\t\t\tif (n.attributes && n.attributes.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0; j < n.attributes.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (n.attributes[j].name && n.attributes[j].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}, parentCont);\n\t\t\t}\n\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tstatic getFollowedUserList(userId)\n\t{\n\t\treturn [];\n\t}\n\n\tstatic getWeekDayByInd(index)\n\t{\n\t\treturn ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'][index];\n\t}\n\n\tstatic getLoader(size, className)\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"${className || 'calendar-loader'}\">\n\t\t\t<svg class=\"calendar-loader-circular\"\n\t\t\t\tstyle=\"width:${parseInt(size)}px; height:${parseInt(size)}px;\"\n\t\t\t\tviewBox=\"25 25 50 50\">\n\t\t\t\t\t<circle class=\"calendar-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t\t\t<circle class=\"calendar-loader-inner-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t</svg>\n\t\t</div>\n`;\n\t};\n\n\tstatic getDayCode(date)\n\t{\n\t\treturn date.getFullYear() + '-' + (\"0\" + (~~(date.getMonth() + 1))).substr(-2, 2) + '-' + (\"0\" + (~~(date.getDate()))).substr(-2, 2);\n\t}\n\n\tstatic getTextColor(color)\n\t{\n\t\tif (!color)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color.charAt(0) === \"#\")\n\t\t{\n\t\t\tcolor = color.substring(1, 7);\n\t\t}\n\n\t\tlet\n\t\t\tr = parseInt(color.substring(0, 2), 16),\n\t\t\tg = parseInt(color.substring(2, 4), 16),\n\t\t\tb = parseInt(color.substring(4, 6), 16),\n\t\t\tlight = (r * 0.8 + g + b * 0.2) / 510 * 100;\n\n\t\treturn light < 50;\n\t}\n\n\tstatic getKeyCode(key)\n\t{\n\t\tif (!Type.isString(key))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet KEY_CODES = {\n\t\t\t'backspace': 8,\n\t\t\t'enter': 13,\n\t\t\t'escape': 27,\n\t\t\t'space': 32,\n\t\t\t'delete': 46,\n\t\t\t'left': 37,\n\t\t\t'right': 39,\n\t\t\t'up': 38,\n\t\t\t'down': 40,\n\t\t\t'z': 90,\n\t\t\t'y': 89,\n\t\t\t'shift': 16,\n\t\t\t'ctrl': 17,\n\t\t\t'alt': 18,\n\t\t\t'cmd': 91, // 93, 224, 17 Browser dependent\n\t\t\t'cmdRight': 93, // 93, 224, 17 Browser dependent?\n\t\t\t'pageUp': 33,\n\t\t\t'pageDown': 34,\n\t\t\t'd': 68,\n\t\t\t'w': 87,\n\t\t\t'm': 77,\n\t\t\t'a': 65\n\t\t};\n\t\treturn KEY_CODES[key.toLowerCase()];\n\t}\n\n\tstatic isAnyModifierKeyPressed(event = window.event)\n\t{\n\t\tif (event)\n\t\t{\n\t\t\treturn event.altKey || event.shiftKey || event.ctrlKey || event.metaKey;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic getUsableDateTime(timestamp, roundMin)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\n\t\tlet r = (roundMin || 10) * 60 * 1000;\n\t\ttimestamp = Math.ceil(timestamp / r) * r;\n\n\t\treturn new Date(timestamp);\n\t}\n\n\tstatic showNotification(message, actions = null)\n\t{\n\t\tif (Type.isString(message) && message !== '')\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message,\n\t\t\t\tactions: actions\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showFieldError(message, wrap, options)\n\t{\n\t\tif (Type.isDomNode(wrap) && Type.isString(message) && message !== '')\n\t\t{\n\t\t\tDom.remove(wrap.querySelector('.ui-alert'));\n\n\t\t\tlet alert = new BX.UI.Alert({\n\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\ticon: BX.UI.Alert.Icon.DANGER,\n\t\t\t\ttext: message\n\t\t\t});\n\n\t\t\tlet alertWrap = alert.getContainer();\n\n\t\t\twrap.appendChild(alertWrap);\n\n\t\t\treturn alertWrap;\n\t\t}\n\t}\n\n\tstatic getDateFormat()\n\t{\n\t\tif (!Util.DATE_FORMAT)\n\t\t{\n\t\t\tUtil.DATE_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATE\"));\n\t\t}\n\t\treturn Util.DATE_FORMAT;\n\t}\n\n\tstatic setDayOfWeekMonthFormat(value)\n\t{\n\t\tUtil.dayOfWeekMonthFormat = value;\n\t}\n\n\tstatic getDayOfWeekMonthFormat()\n\t{\n\t\treturn Util.dayOfWeekMonthFormat || 'l, j F';\n\t}\n\n\tstatic setDayMonthFormat(value)\n\t{\n\t\tUtil.dayMonthFormat = value;\n\t}\n\n\tstatic getDayMonthFormat()\n\t{\n\t\treturn Util.dayMonthFormat || 'j F';\n\t}\n\n\tstatic getDateTimeFormat()\n\t{\n\t\tif (!Util.DATETIME_FORMAT)\n\t\t{\n\t\t\tUtil.DATETIME_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATETIME\"));\n\t\t}\n\t\treturn Util.DATETIME_FORMAT;\n\t}\n\n\tstatic getTimeFormat()\n\t{\n\t\tif (!Util.TIME_FORMAT)\n\t\t{\n\t\t\tif ((Loc.getMessage(\"FORMAT_DATETIME\").substr(0, Loc.getMessage(\"FORMAT_DATE\").length) === Loc.getMessage(\"FORMAT_DATE\")))\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT = BX.util.trim(Util.getDateTimeFormat().substr(Util.getDateFormat().length));\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.util.trim(Loc.getMessage(\"FORMAT_DATETIME\").substr(Loc.getMessage(\"FORMAT_DATE\").length));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS';\n\t\t\t\tUtil.TIME_FORMAT = BX.date.convertBitrixFormat(BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS');\n\t\t\t}\n\t\t}\n\n\t\treturn Util.TIME_FORMAT;\n\t}\n\n\tstatic getTimeFormatShort()\n\t{\n\t\tif (!Util.TIME_FORMAT_SHORT)\n\t\t{\n\t\t\tUtil.TIME_FORMAT_SHORT = Util.getTimeFormat().replace(':s', '');\n\t\t\tUtil.TIME_FORMAT_SHORT_BX = Util.TIME_FORMAT_BX.replace(':SS', '');\n\t\t}\n\t\treturn Util.TIME_FORMAT_SHORT;\n\t}\n\n\tstatic getCurrentUserId()\n\t{\n\t\tif (!Util.currentUserId)\n\t\t{\n\t\t\tUtil.currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\t}\n\t\treturn Util.currentUserId;\n\t}\n\n\tstatic getTimeByInt(intValue)\n\t{\n\t\tintValue = parseInt(intValue);\n\t\tlet h = Math.floor(intValue / 60);\n\t\treturn { hour: h, min: intValue - h * 60 };\n\t}\n\n\tstatic preventSelection(node)\n\t{\n\t\tnode.ondrag = BX.False;\n\t\tnode.ondragstart = BX.False;\n\t\tnode.onselectstart = BX.False;\n\t}\n\n\tstatic getBX()\n\t{\n\t\treturn window.top.BX || window.BX;\n\t}\n\n\tstatic closeAllPopups()\n\t{\n\t\tif (PopupManager.isAnyPopupShown())\n\t\t{\n\t\t\tfor (let i = 0, length = PopupManager._popups.length; i < length; i++)\n\t\t\t{\n\t\t\t\tif (PopupManager._popups[i]\n\t\t\t\t\t&& PopupManager._popups[i].isShown())\n\t\t\t\t{\n\t\t\t\t\tPopupManager._popups[i].close();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic sendAnalyticLabel(label)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.sendAnalyticsLabel', { analyticsLabel: label });\n\t}\n\n\tstatic setOptions(config, additionalParams)\n\t{\n\t\tUtil.config = config;\n\t\tUtil.additionalParams = additionalParams;\n\t}\n\n\tstatic setUserSettings(userSettings)\n\t{\n\t\tUtil.userSettings = userSettings;\n\t}\n\n\tstatic getUserSettings()\n\t{\n\t\treturn Type.isObjectLike(Util.userSettings) ? Util.userSettings : {};\n\t}\n\n\tstatic setCalendarContext(calendarContext)\n\t{\n\t\tUtil.calendarContext = calendarContext;\n\t}\n\n\tstatic getCalendarContext()\n\t{\n\t\treturn Util.calendarContext || null;\n\t}\n\n\tstatic getMeetingStatusList()\n\t{\n\t\treturn ['Y', 'N', 'Q', 'H'];\n\t}\n\n\tstatic checkEmailLimitationPopup()\n\t{\n\t\tconst emailGuestAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst emailGuestLimit = Util.getEventWithEmailGuestLimit();\n\t\treturn emailGuestLimit > 0\n\t\t\t&& (emailGuestAmount === 8\n\t\t\t\t|| emailGuestAmount === 4\n\t\t\t\t|| emailGuestAmount >= emailGuestLimit);\n\t}\n\n\tstatic isEventWithEmailGuestAllowed()\n\t{\n\t\treturn Util.getEventWithEmailGuestLimit() === -1\n\t\t\t|| Util.getEventWithEmailGuestAmount() < Util.getEventWithEmailGuestLimit();\n\t}\n\n\tstatic setEventWithEmailGuestAmount(value)\n\t{\n\t\tUtil.countEventWithEmailGuestAmount = value;\n\t}\n\n\tstatic setEventWithEmailGuestLimit(value)\n\t{\n\t\tUtil.eventWithEmailGuestLimit = value;\n\t}\n\n\tstatic getEventWithEmailGuestAmount()\n\t{\n\t\treturn Util.countEventWithEmailGuestAmount;\n\t}\n\n\tstatic getEventWithEmailGuestLimit()\n\t{\n\t\treturn Util.eventWithEmailGuestLimit;\n\t}\n\n\tstatic setCurrentView(calendarView = null)\n\t{\n\t\tUtil.currentCalendarView = calendarView;\n\t}\n\n\tstatic getCurrentView()\n\t{\n\t\treturn Util.currentCalendarView || null;\n\t}\n\n\tstatic adjustDateForTimezoneOffset(date, timezoneOffset = 0, fullDay = false)\n\t{\n\t\tif (!Type.isDate(date))\n\t\t\tthrow new Error('Wrong type for date attribute. DateTime object expected.')\n\n\t\tif (!parseInt(timezoneOffset) || fullDay === true)\n\t\t\treturn date;\n\n\t\treturn new Date(date.getTime() - parseInt(timezoneOffset) * 1000);\n\t}\n\n\tstatic randomInt(min, max)\n\t{\n\t\treturn Math.round(min - 0.5 + Math.random() * (max - min + 1));\n\t}\n\n\tstatic getRandomColor()\n\t{\n\t\tconst defaultColors = Util.getDefaultColorList();\n\t\treturn defaultColors[Util.randomInt(0, defaultColors.length - 1)];\n\t}\n\n\tstatic setAccessNames(accessNames = {})\n\t{\n\t\tUtil.accessNames = {};\n\t\tfor (let code in accessNames)\n\t\t{\n\t\t\tif (accessNames.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tUtil.setAccessName(code, accessNames[code])\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getAccessName(code)\n\t{\n\t\treturn Util.accessNames[code] || code;\n\t}\n\n\tstatic setAccessName(code, name)\n\t{\n\t\tUtil.accessNames[code] = name;\n\t}\n\n\tstatic getRandomInt(numCount = 6)\n\t{\n\t\treturn Math.round(Math.random() * Math.pow(10, numCount));\n\t}\n\n\tstatic displayError(errors, reloadPage)\n\t{\n\t\tif (Type.isArray(errors))\n\t\t{\n\t\t\tlet errorMessage = '';\n\t\t\tfor (let i = 0; i < errors.length; i++)\n\t\t\t{\n\t\t\t\terrorMessage += errors[i].message + \"\\n\";\n\t\t\t}\n\t\t\terrors = errorMessage;\n\t\t}\n\n\t\tsetTimeout(() => {\n\n\t\t\talert(errors || '[Bitrix Calendar] Request error');\n\t\t\tif (reloadPage)\n\t\t\t{\n\t\t\t\tlocation.reload();\n\t\t\t}\n\n\t\t}, 200);\n\t}\n\n\tstatic convertEntityToAccessCode(entity)\n\t{\n\t\tif (Type.isObjectLike(entity))\n\t\t{\n\t\t\tif (entity.entityId === 'meta-user' && entity.id === 'all-users')\n\t\t\t{\n\t\t\t\treturn 'UA';\n\t\t\t}\n\t\t\telse if (entity.entityId === 'user')\n\t\t\t{\n\t\t\t\treturn 'U' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'project')\n\t\t\t{\n\t\t\t\treturn 'SG' + entity.id + '_K'; // for all members of group\n\t\t\t}\n\t\t\telse if (entity.entityId === 'department')\n\t\t\t{\n\t\t\t\treturn 'DR' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'group')\n\t\t\t{\n\t\t\t\treturn entity.id;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic extendPlannerWatches({ entries, userId })\n\t{\n\t\tentries.forEach((entry) => {\n\t\t\tif (entry.type === 'user' && parseInt(entry.id) !== parseInt(userId))\n\t\t\t{\n\t\t\t\tconst tag = Util.PLANNER_PULL_TAG.replace('#USER_ID#', entry.id);\n\t\t\t\tif (!Util.PLANNER_WATCH_LIST.includes(tag))\n\t\t\t\t{\n\t\t\t\t\tPull.extendWatch(tag);\n\t\t\t\t\tUtil.PLANNER_WATCH_LIST.push(tag);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic clearPlannerWatches()\n\t{\n\t\tUtil.PLANNER_WATCH_LIST.forEach((tag) => {\n\t\t\tPull.clearWatch(tag);\n\t\t});\n\t\tUtil.PLANNER_WATCH_LIST = [];\n\t}\n\n\tstatic registerRequestId()\n\t{\n\t\tconst requestUid = BX.Calendar.Util.getRandomInt(8);\n\t\tUtil.REQUEST_ID_LIST.push(requestUid);\n\t\treturn requestUid;\n\t}\n\n\tstatic unregisterRequestId(requestUid)\n\t{\n\t\tUtil.REQUEST_ID_LIST = Util.REQUEST_ID_LIST.filter((uid) => {return uid !== requestUid});\n\t}\n\n\tstatic checkRequestId(requestUid)\n\t{\n\t\trequestUid = parseInt(requestUid);\n\t\treturn !Type.isInteger(requestUid) || !Util.REQUEST_ID_LIST.includes(requestUid);\n\t}\n\n\tstatic initHintNode(hintNode)\n\t{\n\t\tconst bx = Util.getBX();\n\t\tif (Type.isElementNode(hintNode) && bx?.UI?.Hint)\n\t\t{\n\t\t\tif (bx?.UI?.Hint?.popup)\n\t\t\t{\n\t\t\t\tbx.UI.Hint.popup.destroy();\n\t\t\t\tbx.UI.Hint.popup = null;\n\t\t\t\tbx.UI.Hint.content = null;\n\t\t\t}\n\t\t\tbx.UI.Hint.initNode(hintNode);\n\t\t}\n\t}\n\n\tstatic documentIsDisplayingNow()\n\t{\n\t\treturn !document.hidden;\n\t}\n\n\tstatic removeHash()\n\t{\n\t\tif (\"pushState\" in history)\n\t\t{\n\t\t\thistory.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\t\t}\n\t\telse\n\t\t\t{\n\t\t\t// Prevent scrolling by storing the page's current scroll offset\n\t\t\tlet scrollV = document.body.scrollTop;\n\t\t\tlet scrollH = document.body.scrollLeft;\n\t\t\twindow.location.hash = \"\";\n\t\t\t// Restore the scroll offset, should be flicker free\n\t\t\tdocument.body.scrollTop = scrollV;\n\t\t\tdocument.body.scrollLeft = scrollH;\n\t\t}\n\t}\n\n\t// TODO: move to syncManager\n\tstatic setIphoneConnectionStatus(value)\n\t{\n\t\tUtil.iphoneConnectionStatus = value;\n\t}\n\n\tstatic isIphoneConnected()\n\t{\n\t\treturn Util.iphoneConnectionStatus;\n\t}\n\n\tstatic setMacConnectionStatus(value)\n\t{\n\t\tUtil.macConnectionStatus = value;\n\t}\n\n\tstatic isMacConnected()\n\t{\n\t\treturn Util.macConnectionStatus;\n\t}\n\n\tstatic setIcloudConnectionStatus(value)\n\t{\n\t\tUtil.icloudConnectionStatus = value;\n\t}\n\n\tstatic isIcloudConnected()\n\t{\n\t\treturn Util.icloudConnectionStatus;\n\t}\n\n\tstatic setGoogleConnectionStatus(value)\n\t{\n\t\tUtil.googleConnectionStatus = value;\n\t}\n\n\tstatic isGoogleConnected()\n\t{\n\t\treturn Util.googleConnectionStatus;\n\t}\n}"],"names":["window","BX","Main","Date","DateTimeFormat","AM_PM_MODE","UPPER","LOWER","NONE","format","timestamp","now","utc","_this","date","Utils","isDate","getTime","isNumber","nowDate","isUTC","isArray","_formatDateInterval","isNotEmptyString","replaceMap","match","map","x","length","forEach","element","index","replace","formatRegex","dateFormats","d","strPadLeft","getDate","toString","D","_getMessage","getDay","j","l","N","S","w","z","firstDay","getFullYear","currentDay","getMonth","Math","ceil","W","newDate","dayNumber","setDate","firstThursday","setMonth","weekNumber","F","f","m","M","n","t","lastMonthDay","UTC","L","year","o","correctDate","Y","y","slice","a","getHours","A","B","swatch","getUTCHours","getUTCMinutes","getUTCSeconds","floor","g","G","h","H","i","getMinutes","s","getSeconds","u","getMilliseconds","e","I","firstJanuary","firstJanuaryUTC","firstJuly","firstJulyUTC","O","timezoneOffset","getTimezoneOffset","timezoneOffsetAbs","abs","P","difference","substr","Z","c","_replaceDateFormat","r","U","sago","_formatDateMessage","intval","sdiff","sshort","iago","idiff","isago","minutesAgo","result","secondsAgo","ishort","Hago","Hdiff","Hshort","yesterday","today","tommorow","tomorrow","dago","ddiff","dshort","mago","mdiff","mshort","Yago","Ydiff","Yshort","ampm","isAmPmMode","timeFormat","convertBitrixFormat","X","day","time","Q","daysAgo","cutZeroTime","formats","formatInterval","formatValue","exec","month","todayStart","todayEnd","yesterdayStart","yesterdayEnd","tomorrowStart","tomorrowEnd","getUTCFullYear","getUTCDate","getUTCMonth","getUTCMilliseconds","getUTCDay","dayValue","setUTCDate","monthValue","setUTCMonth","value","messages","val","dec","message","matchFull","number","convertToUTC","getNewDate","getBrowserTimestamp","parseInt","browserOffset","getServerTimestamp","round","formatLastActivityDate","formattedDate","returnConst","parse","str","formatDate","formatDatetime","regMonths","expr","RegExp","aDate","aFormat","cnt","aDateArgs","aFormatArgs","aResult","trim","array_search","getMonthIndex","k","toUpperCase","setUTCFullYear","setUTCHours","setFullYear","setHours","isNaN","bPM","q","wordMonthCut","wordMonth","item","Object","prototype","call","Number","isString","String","input","padLength","padString","needle","haystack","Util","parseTime","parseDate1","getDateFormat","getTimeRounded","parseDate","bUTC","trimSeconds","Loc","getMessage","util","type","getNumMonth","formatTime","hours","minutes","Type","getTimeFormatShort","formatDateTime","getDateTimeFormat","formatDateUsable","showYear","showDayOfWeek","lang","getDayLength","DAY_LENGTH","getDefaultColorList","findTargetNode","node","parentCont","res","prefix","attributes","name","findParent","getFollowedUserList","userId","getWeekDayByInd","getLoader","size","className","Tag","render","getDayCode","getTextColor","color","charAt","substring","b","light","getKeyCode","key","KEY_CODES","toLowerCase","isAnyModifierKeyPressed","event","altKey","shiftKey","ctrlKey","metaKey","getUsableDateTime","roundMin","showNotification","actions","UI","Notification","Center","notify","content","showFieldError","wrap","options","isDomNode","Dom","remove","querySelector","alert","Alert","Color","DANGER","icon","Icon","text","alertWrap","getContainer","appendChild","DATE_FORMAT","setDayOfWeekMonthFormat","dayOfWeekMonthFormat","getDayOfWeekMonthFormat","setDayMonthFormat","dayMonthFormat","getDayMonthFormat","DATETIME_FORMAT","getTimeFormat","TIME_FORMAT","TIME_FORMAT_BX","TIME_FORMAT_SHORT","TIME_FORMAT_SHORT_BX","getCurrentUserId","currentUserId","getTimeByInt","intValue","hour","min","preventSelection","ondrag","False","ondragstart","onselectstart","getBX","top","closeAllPopups","PopupManager","isAnyPopupShown","_popups","isShown","close","sendAnalyticLabel","label","ajax","runAction","analyticsLabel","setOptions","config","additionalParams","setUserSettings","userSettings","getUserSettings","isObjectLike","setCalendarContext","calendarContext","getCalendarContext","getMeetingStatusList","checkEmailLimitationPopup","emailGuestAmount","getEventWithEmailGuestAmount","emailGuestLimit","getEventWithEmailGuestLimit","isEventWithEmailGuestAllowed","setEventWithEmailGuestAmount","countEventWithEmailGuestAmount","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","setCurrentView","calendarView","currentCalendarView","getCurrentView","adjustDateForTimezoneOffset","fullDay","Error","randomInt","max","random","getRandomColor","defaultColors","setAccessNames","accessNames","code","hasOwnProperty","setAccessName","getAccessName","getRandomInt","numCount","pow","displayError","errors","reloadPage","errorMessage","setTimeout","location","reload","convertEntityToAccessCode","entity","entityId","id","extendPlannerWatches","entries","entry","tag","PLANNER_PULL_TAG","PLANNER_WATCH_LIST","includes","Pull","extendWatch","push","clearPlannerWatches","clearWatch","registerRequestId","requestUid","Calendar","REQUEST_ID_LIST","unregisterRequestId","filter","uid","checkRequestId","isInteger","initHintNode","hintNode","bx","isElementNode","Hint","popup","destroy","initNode","documentIsDisplayingNow","document","hidden","removeHash","history","pushState","title","pathname","search","scrollV","body","scrollTop","scrollH","scrollLeft","hash","setIphoneConnectionStatus","iphoneConnectionStatus","isIphoneConnected","setMacConnectionStatus","macConnectionStatus","isMacConnected","setIcloudConnectionStatus","icloudConnectionStatus","isIcloudConnected","setGoogleConnectionStatus","googleConnectionStatus","isGoogleConnected"],"mappings":"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"}