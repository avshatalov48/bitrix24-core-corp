this.BX=this.BX||{};(function(e,t){"use strict";(function(e){if(!e.BX){e.BX={}}if(!e.BX.Main){e.BX.Main={}}else if(e.BX.Main.Date){return}var t=e.BX;t.Main.Date={AM_PM_MODE:{UPPER:1,LOWER:2,NONE:false},format:function e(t,n,a,i){var _=this;var o=r.isDate(n)?new Date(n.getTime()):r.isNumber(n)?new Date(n*1e3):new Date;var s=r.isDate(a)?new Date(a.getTime()):r.isNumber(a)?new Date(a*1e3):new Date;var u=!!i;if(r.isArray(t))return O(t,o,s,u);else if(!r.isNotEmptyString(t))return"";var D=(t.match(/{{([^{}]*)}}/g)||[]).map(function(e){return(e.match(/[^{}]+/)||[""])[0]});if(D.length>0){D.forEach(function(e,r){t=t.replace("{{"+e+"}}","{{"+r+"}}")})}var M=/\\?(sago|iago|isago|Hago|dago|mago|Yago|sdiff|idiff|Hdiff|ddiff|mdiff|Ydiff|sshort|ishort|Hshort|dshort|mhort|Yshort|yesterday|today|tommorow|tomorrow|[a-z])/gi;var f={d:function e(){return r.strPadLeft(T(o).toString(),2,"0")},D:function e(){return _._getMessage("DOW_"+d(o))},j:function e(){return T(o)},l:function e(){return _._getMessage("DAY_OF_WEEK_"+d(o))},N:function e(){return d(o)||7},S:function e(){if(T(o)%10==1&&T(o)!=11)return"st";else if(T(o)%10==2&&T(o)!=12)return"nd";else if(T(o)%10==3&&T(o)!=13)return"rd";else return"th"},w:function e(){return d(o)},z:function e(){var t=new Date(c(o),0,1);var r=new Date(c(o),F(o),T(o));return Math.ceil((r-t)/(24*3600*1e3))},W:function e(){var t=new Date(o.getTime());var n=(d(o)+6)%7;H(t,T(t)-n+3);var a=t.getTime();h(t,0,1);if(d(t)!=4)h(t,0,1+(4-d(t)+7)%7);var i=1+Math.ceil((a-t)/(7*24*3600*1e3));return r.strPadLeft(i.toString(),2,"0")},F:function e(){return _._getMessage("MONTH_"+(F(o)+1)+"_S")},f:function e(){return _._getMessage("MONTH_"+(F(o)+1))},m:function e(){return r.strPadLeft((F(o)+1).toString(),2,"0")},M:function e(){return _._getMessage("MON_"+(F(o)+1))},n:function e(){return F(o)+1},t:function e(){var t=u?new Date(Date.UTC(c(o),F(o)+1,0)):new Date(c(o),F(o)+1,0);return T(t)},L:function e(){var t=c(o);return t%4==0&&t%100!=0||t%400==0?1:0},o:function e(){var t=new Date(o.getTime());H(t,T(t)-(d(o)+6)%7+3);return c(t)},Y:function e(){return c(o)},y:function e(){return c(o).toString().slice(2)},a:function e(){return p(o)>11?"pm":"am"},A:function e(){return p(o)>11?"PM":"AM"},B:function e(){var t=(o.getUTCHours()+1)%24+o.getUTCMinutes()/60+o.getUTCSeconds()/3600;return r.strPadLeft(Math.floor(t*1e3/24).toString(),3,"0")},g:function e(){return p(o)%12||12},G:function e(){return p(o)},h:function e(){return r.strPadLeft((p(o)%12||12).toString(),2,"0")},H:function e(){return r.strPadLeft(p(o).toString(),2,"0")},i:function e(){return r.strPadLeft(E(o).toString(),2,"0")},s:function e(){return r.strPadLeft(m(o).toString(),2,"0")},u:function e(){return r.strPadLeft((A(o)*1e3).toString(),6,"0")},e:function e(){if(u)return"UTC";return""},I:function e(){if(u)return 0;var t=new Date(c(o),0,1);var r=Date.UTC(c(o),0,1);var n=new Date(c(o),6,0);var a=Date.UTC(c(o),6,0);return 0+(t-r!==n-a)},O:function e(){if(u)return"+0000";var t=o.getTimezoneOffset();var n=Math.abs(t);return(t>0?"-":"+")+r.strPadLeft((Math.floor(n/60)*100+n%60).toString(),4,"0")},P:function e(){if(u)return"+00:00";var t=this.O();return t.substr(0,3)+":"+t.substr(3)},Z:function e(){if(u)return 0;return-o.getTimezoneOffset()*60},c:function e(){return"Y-m-d\\TH:i:sP".replace(M,R)},r:function e(){return"D, d M Y H:i:s O".replace(M,R)},U:function e(){return Math.floor(o.getTime()/1e3)},sago:function e(){return v(S((s-o)/1e3),{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"})},sdiff:function e(){return v(S((s-o)/1e3),{0:"FD_SECOND_DIFF_0",1:"FD_SECOND_DIFF_1","10_20":"FD_SECOND_DIFF_10_20",MOD_1:"FD_SECOND_DIFF_MOD_1",MOD_2_4:"FD_SECOND_DIFF_MOD_2_4",MOD_OTHER:"FD_SECOND_DIFF_MOD_OTHER"})},sshort:function e(){return _._getMessage("FD_SECOND_SHORT").replace(/#VALUE#/g,S((s-o)/1e3))},iago:function e(){return v(S((s-o)/60/1e3),{0:"FD_MINUTE_AGO_0",1:"FD_MINUTE_AGO_1","10_20":"FD_MINUTE_AGO_10_20",MOD_1:"FD_MINUTE_AGO_MOD_1",MOD_2_4:"FD_MINUTE_AGO_MOD_2_4",MOD_OTHER:"FD_MINUTE_AGO_MOD_OTHER"})},idiff:function e(){return v(S((s-o)/60/1e3),{0:"FD_MINUTE_DIFF_0",1:"FD_MINUTE_DIFF_1","10_20":"FD_MINUTE_DIFF_10_20",MOD_1:"FD_MINUTE_DIFF_MOD_1",MOD_2_4:"FD_MINUTE_DIFF_MOD_2_4",MOD_OTHER:"FD_MINUTE_DIFF_MOD_OTHER"})},isago:function e(){var t=S((s-o)/60/1e3);var r=v(t,{0:"FD_MINUTE_0",1:"FD_MINUTE_1","10_20":"FD_MINUTE_10_20",MOD_1:"FD_MINUTE_MOD_1",MOD_2_4:"FD_MINUTE_MOD_2_4",MOD_OTHER:"FD_MINUTE_MOD_OTHER"});r+=" ";var n=S((s-o)/1e3)-t*60;r+=v(n,{0:"FD_SECOND_AGO_0",1:"FD_SECOND_AGO_1","10_20":"FD_SECOND_AGO_10_20",MOD_1:"FD_SECOND_AGO_MOD_1",MOD_2_4:"FD_SECOND_AGO_MOD_2_4",MOD_OTHER:"FD_SECOND_AGO_MOD_OTHER"});return r},ishort:function e(){return _._getMessage("FD_MINUTE_SHORT").replace(/#VALUE#/g,S((s-o)/60/1e3))},Hago:function e(){return v(S((s-o)/60/60/1e3),{0:"FD_HOUR_AGO_0",1:"FD_HOUR_AGO_1","10_20":"FD_HOUR_AGO_10_20",MOD_1:"FD_HOUR_AGO_MOD_1",MOD_2_4:"FD_HOUR_AGO_MOD_2_4",MOD_OTHER:"FD_HOUR_AGO_MOD_OTHER"})},Hdiff:function e(){return v(S((s-o)/60/60/1e3),{0:"FD_HOUR_DIFF_0",1:"FD_HOUR_DIFF_1","10_20":"FD_HOUR_DIFF_10_20",MOD_1:"FD_HOUR_DIFF_MOD_1",MOD_2_4:"FD_HOUR_DIFF_MOD_2_4",MOD_OTHER:"FD_HOUR_DIFF_MOD_OTHER"})},Hshort:function e(){return _._getMessage("FD_HOUR_SHORT").replace(/#VALUE#/g,S((s-o)/60/60/1e3))},yesterday:function e(){return _._getMessage("FD_YESTERDAY")},today:function e(){return _._getMessage("FD_TODAY")},tommorow:function e(){return _._getMessage("FD_TOMORROW")},tomorrow:function e(){return _._getMessage("FD_TOMORROW")},dago:function e(){return v(S((s-o)/60/60/24/1e3),{0:"FD_DAY_AGO_0",1:"FD_DAY_AGO_1","10_20":"FD_DAY_AGO_10_20",MOD_1:"FD_DAY_AGO_MOD_1",MOD_2_4:"FD_DAY_AGO_MOD_2_4",MOD_OTHER:"FD_DAY_AGO_MOD_OTHER"})},ddiff:function e(){return v(S((s-o)/60/60/24/1e3),{0:"FD_DAY_DIFF_0",1:"FD_DAY_DIFF_1","10_20":"FD_DAY_DIFF_10_20",MOD_1:"FD_DAY_DIFF_MOD_1",MOD_2_4:"FD_DAY_DIFF_MOD_2_4",MOD_OTHER:"FD_DAY_DIFF_MOD_OTHER"})},dshort:function e(){return _._getMessage("FD_DAY_SHORT").replace(/#VALUE#/g,S((s-o)/60/60/24/1e3))},mago:function e(){return v(S((s-o)/60/60/24/31/1e3),{0:"FD_MONTH_AGO_0",1:"FD_MONTH_AGO_1","10_20":"FD_MONTH_AGO_10_20",MOD_1:"FD_MONTH_AGO_MOD_1",MOD_2_4:"FD_MONTH_AGO_MOD_2_4",MOD_OTHER:"FD_MONTH_AGO_MOD_OTHER"})},mdiff:function e(){return v(S((s-o)/60/60/24/31/1e3),{0:"FD_MONTH_DIFF_0",1:"FD_MONTH_DIFF_1","10_20":"FD_MONTH_DIFF_10_20",MOD_1:"FD_MONTH_DIFF_MOD_1",MOD_2_4:"FD_MONTH_DIFF_MOD_2_4",MOD_OTHER:"FD_MONTH_DIFF_MOD_OTHER"})},mshort:function e(){return _._getMessage("FD_MONTH_SHORT").replace(/#VALUE#/g,S((s-o)/60/60/24/31/1e3))},Yago:function e(){return v(S((s-o)/60/60/24/365/1e3),{0:"FD_YEARS_AGO_0",1:"FD_YEARS_AGO_1","10_20":"FD_YEARS_AGO_10_20",MOD_1:"FD_YEARS_AGO_MOD_1",MOD_2_4:"FD_YEARS_AGO_MOD_2_4",MOD_OTHER:"FD_YEARS_AGO_MOD_OTHER"})},Ydiff:function e(){return v(S((s-o)/60/60/24/365/1e3),{0:"FD_YEARS_DIFF_0",1:"FD_YEARS_DIFF_1","10_20":"FD_YEARS_DIFF_10_20",MOD_1:"FD_YEARS_DIFF_MOD_1",MOD_2_4:"FD_YEARS_DIFF_MOD_2_4",MOD_OTHER:"FD_YEARS_DIFF_MOD_OTHER"})},Yshort:function e(){return v(S((s-o)/60/60/24/365/1e3),{0:"FD_YEARS_SHORT_0",1:"FD_YEARS_SHORT_1","10_20":"FD_YEARS_SHORT_10_20",MOD_1:"FD_YEARS_SHORT_MOD_1",MOD_2_4:"FD_YEARS_SHORT_MOD_2_4",MOD_OTHER:"FD_YEARS_SHORT_MOD_OTHER"})},x:function e(){var t=_.isAmPmMode(true);var r=t===_.AM_PM_MODE.LOWER?"g:i a":t===_.AM_PM_MODE.UPPER?"g:i A":"H:i";return _.format([["tomorrow","tomorrow, "+r],["-",_.convertBitrixFormat(_._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s","sago"],["i","iago"],["today","today, "+r],["yesterday","yesterday, "+r],["",_.convertBitrixFormat(_._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")]],o,s,u)},X:function e(){var t=_.isAmPmMode(true);var r=t===_.AM_PM_MODE.LOWER?"g:i a":t===_.AM_PM_MODE.UPPER?"g:i A":"H:i";var n=_.format([["tomorrow","tomorrow"],["-",_.convertBitrixFormat(_._getMessage("FORMAT_DATE"))],["today","today"],["yesterday","yesterday"],["",_.convertBitrixFormat(_._getMessage("FORMAT_DATE"))]],o,s,u);var a=_.format([["tomorrow",r],["today",r],["yesterday",r],["",""]],o,s,u);if(a.length>0)return _._getMessage("FD_DAY_AT_TIME").replace(/#DAY#/g,n).replace(/#TIME#/g,a);else return n},Q:function e(){var t=S((s-o)/60/60/24/1e3);if(t==0)return _._getMessage("FD_DAY_DIFF_1").replace(/#VALUE#/g,1);else return _.format([["d","ddiff"],["m","mdiff"],["","Ydiff"]],o,s)}};var g=false;if(t[0]&&t[0]=="^"){g=true;t=t.substr(1)}var l=t.replace(M,R);if(g){l=l.replace(/\s*00:00:00\s*/g,"").replace(/(\d\d:\d\d)(:00)/g,"$1").replace(/(\s*00:00\s*)(?!:)/g,"")}if(D.length>0){D.forEach(function(e,t){l=l.replace("{{"+t+"}}",e)})}return l;function O(e,t,r,n){var a=S((r-t)/1e3);for(var i=0;i<e.length;i++){var o=e[i][0];var s=e[i][1];var u=null;if(o=="s"){if(a<60)return _.format(s,t,r,n)}else if((u=/^s(\d+)\>?(\d+)?/.exec(o))!=null){if(u[1]&&u[2]){if(a<u[1]&&a>u[2]){return _.format(s,t,r,n)}}else if(a<u[1]){return _.format(s,t,r,n)}}else if(o=="i"){if(a<60*60)return _.format(s,t,r,n)}else if((u=/^i(\d+)\>?(\d+)?/.exec(o))!=null){if(u[1]&&u[2]){if(a<u[1]*60&&a>u[2]*60){return _.format(s,t,r,n)}}else if(a<u[1]*60){return _.format(s,t,r,n)}}else if(o=="H"){if(a<24*60*60)return _.format(s,t,r,n)}else if((u=/^H(\d+)\>?(\d+)?/.exec(o))!=null){if(u[1]&&u[2]){if(a<u[1]*60*60&&a>u[2]*60*60){return _.format(s,t,r,n)}}else if(a<u[1]*60*60){return _.format(s,t,r,n)}}else if(o=="d"){if(a<31*24*60*60)return _.format(s,t,r,n)}else if((u=/^d(\d+)\>?(\d+)?/.exec(o))!=null){if(u[1]&&u[2]){if(a<u[1]*24*60*60&&a>u[2]*24*60*60){return _.format(s,t,r,n)}}else if(a<u[1]*24*60*60){return _.format(s,t,r,n)}}else if(o=="m"){if(a<365*24*60*60)return _.format(s,t,r,n)}else if((u=/^m(\d+)\>?(\d+)?/.exec(o))!=null){if(u[1]&&u[2]){if(a<u[1]*31*24*60*60&&a>u[2]*31*24*60*60){return _.format(s,t,r,n)}}else if(a<u[1]*31*24*60*60){return _.format(s,t,r,n)}}else if(o=="now"){if(t.getTime()==r.getTime()){return _.format(s,t,r,n)}}else if(o=="today"){var D=c(r),M=F(r),f=T(r);var g=n?new Date(Date.UTC(D,M,f,0,0,0,0)):new Date(D,M,f,0,0,0,0);var l=n?new Date(Date.UTC(D,M,f+1,0,0,0,0)):new Date(D,M,f+1,0,0,0,0);if(t>=g&&t<l)return _.format(s,t,r,n)}else if(o=="todayFuture"){var D=c(r),M=F(r),f=T(r);var g=r.getTime();var l=n?new Date(Date.UTC(D,M,f+1,0,0,0,0)):new Date(D,M,f+1,0,0,0,0);if(t>=g&&t<l)return _.format(s,t,r,n)}else if(o=="yesterday"){D=c(r);M=F(r);f=T(r);var O=n?new Date(Date.UTC(D,M,f-1,0,0,0,0)):new Date(D,M,f-1,0,0,0,0);var p=n?new Date(Date.UTC(D,M,f,0,0,0,0)):new Date(D,M,f,0,0,0,0);if(t>=O&&t<p)return _.format(s,t,r,n)}else if(o=="tommorow"||o=="tomorrow"){D=c(r);M=F(r);f=T(r);var E=n?new Date(Date.UTC(D,M,f+1,0,0,0,0)):new Date(D,M,f+1,0,0,0,0);var m=n?new Date(Date.UTC(D,M,f+2,0,0,0,0)):new Date(D,M,f+2,0,0,0,0);if(t>=E&&t<m)return _.format(s,t,r,n)}else if(o=="-"){if(a<0)return _.format(s,t,r,n)}}return e.length>0?_.format(e[e.length-1][1],t,r,n):""}function c(e){return u?e.getUTCFullYear():e.getFullYear()}function T(e){return u?e.getUTCDate():e.getDate()}function F(e){return u?e.getUTCMonth():e.getMonth()}function p(e){return u?e.getUTCHours():e.getHours()}function E(e){return u?e.getUTCMinutes():e.getMinutes()}function m(e){return u?e.getUTCSeconds():e.getSeconds()}function A(e){return u?e.getUTCMilliseconds():e.getMilliseconds()}function d(e){return u?e.getUTCDay():e.getDay()}function H(e,t){return u?e.setUTCDate(t):e.setDate(t)}function h(e,t,r){return u?e.setUTCMonth(t,r):e.setMonth(t,r)}function v(e,t){var r=e<100?Math.abs(e):Math.abs(e%100);var n=r%10;var a="";if(r==0)a=_._getMessage(t["0"]);else if(r==1)a=_._getMessage(t["1"]);else if(r>=10&&r<=20)a=_._getMessage(t["10_20"]);else if(n==1)a=_._getMessage(t["MOD_1"]);else if(2<=n&&n<=4)a=_._getMessage(t["MOD_2_4"]);else a=_._getMessage(t["MOD_OTHER"]);return a.replace(/#VALUE#/g,e)}function R(e,t){if(f[e])return f[e]();else return t}function S(e){return e>=0?Math.floor(e):Math.ceil(e)}},convertBitrixFormat:function e(t){if(!r.isNotEmptyString(t))return"";return t.replace("YYYY","Y").replace("MMMM","F").replace("MM","m").replace("M","M").replace("DD","d").replace("G","g").replace(/GG/i,"G").replace("H","h").replace(/HH/i,"H").replace("MI","i").replace("SS","s").replace("TT","A").replace("T","a")},convertToUTC:function e(t){if(!r.isDate(t))return null;return new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},getNewDate:function e(t){return new Date(this.getBrowserTimestamp(t))},getBrowserTimestamp:function e(t){t=parseInt(t,10);var r=new Date(t*1e3).getTimezoneOffset()*60;return(parseInt(t,10)+parseInt(this._getMessage("SERVER_TZ_OFFSET"))+r)*1e3},getServerTimestamp:function e(t){t=parseInt(t,10);var r=new Date(t).getTimezoneOffset()*60;return Math.round(t/1e3-(parseInt(this._getMessage("SERVER_TZ_OFFSET"),10)+parseInt(r,10)))},formatLastActivityDate:function e(t,r,n){var a=this.isAmPmMode(true);var i=a===this.AM_PM_MODE.LOWER?"g:i a":a===this.AM_PM_MODE.UPPER?"g:i A":"H:i";var _=[["tomorrow","#01#"+i],["now","#02#"],["todayFuture","#03#"+i],["yesterday","#04#"+i],["-",this.convertBitrixFormat(this._getMessage("FORMAT_DATETIME")).replace(/:s/g,"")],["s60","sago"],["i60","iago"],["H5","Hago"],["H24","#03#"+i],["d31","dago"],["m12>1","mago"],["m12>0","dago"],["","#05#"]];var o=this.format(_,t,r,n);var s=null;if((s=/^#(\d+)#(.*)/.exec(o))!=null){switch(s[1]){case"01":o=this._getMessage("FD_LAST_SEEN_TOMORROW").replace("#TIME#",s[2]);break;case"02":o=this._getMessage("FD_LAST_SEEN_NOW");break;case"03":o=this._getMessage("FD_LAST_SEEN_TODAY").replace("#TIME#",s[2]);break;case"04":o=this._getMessage("FD_LAST_SEEN_YESTERDAY").replace("#TIME#",s[2]);break;case"05":o=this._getMessage("FD_LAST_SEEN_MORE_YEAR");break;default:o=s[2];break}}return o},isAmPmMode:function e(t){if(t===true){return this._getMessage("AMPM_MODE")}return this._getMessage("AMPM_MODE")!==false},_getMessage:function e(r){return t.message(r)},parse:function e(t,n,a,i){if(r.isNotEmptyString(t)){if(!a)a=this._getMessage("FORMAT_DATE");if(!i)i=this._getMessage("FORMAT_DATETIME");var _="";for(D=1;D<=12;D++){_=_+"|"+this._getMessage("MON_"+D)}var o=new RegExp("([0-9]+|[a-z]+"+_+")","ig"),s=t.match(o),u=a.match(/(DD|MI|MMMM|MM|M|YYYY)/gi),D,M,f=[],g=[],l={};if(!s){return null}if(s.length>u.length){u=i.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)}for(D=0,M=s.length;D<M;D++){if(s[D].trim()!==""){f[f.length]=s[D]}}for(D=0,M=u.length;D<M;D++){if(u[D].trim()!==""){g[g.length]=u[D]}}var O=r.array_search("MMMM",g);if(O>0){f[O]=this.getMonthIndex(f[O]);g[O]="MM"}else{O=r.array_search("M",g);if(O>0){f[O]=this.getMonthIndex(f[O]);g[O]="MM"}}for(D=0,M=g.length;D<M;D++){var c=g[D].toUpperCase();l[c]=c==="T"||c==="TT"?f[D]:parseInt(f[D],10)}if(l["DD"]>0&&l["MM"]>0&&l["YYYY"]>0){var T=new Date;if(n){T.setUTCDate(1);T.setUTCFullYear(l["YYYY"]);T.setUTCMonth(l["MM"]-1);T.setUTCDate(l["DD"]);T.setUTCHours(0,0,0,0)}else{T.setDate(1);T.setFullYear(l["YYYY"]);T.setMonth(l["MM"]-1);T.setDate(l["DD"]);T.setHours(0,0,0,0)}if((!isNaN(l["HH"])||!isNaN(l["GG"])||!isNaN(l["H"])||!isNaN(l["G"]))&&!isNaN(l["MI"])){if(!isNaN(l["H"])||!isNaN(l["G"])){var F=(l["T"]||l["TT"]||"am").toUpperCase()==="PM",p=parseInt(l["H"]||l["G"]||0,10);if(F){l["HH"]=p+(p===12?0:12)}else{l["HH"]=p<12?p:0}}else{l["HH"]=parseInt(l["HH"]||l["GG"]||0,10)}if(isNaN(l["SS"]))l["SS"]=0;if(n){T.setUTCHours(l["HH"],l["MI"],l["SS"])}else{T.setHours(l["HH"],l["MI"],l["SS"])}}return T}}return null},getMonthIndex:function e(t){var r,n=t.toUpperCase(),a=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],i=["january","february","march","april","may","june","july","august","september","october","november","december"];for(r=1;r<=12;r++){if(n===this._getMessage("MON_"+r).toUpperCase()||n===this._getMessage("MONTH_"+r).toUpperCase()||n===a[r-1].toUpperCase()||n===i[r-1].toUpperCase()){return r}}return t}};var r={isDate:function e(t){return t&&Object.prototype.toString.call(t)=="[object Date]"},isNumber:function e(t){return t===0?true:t?typeof t=="number"||t instanceof Number:false},isArray:function e(t){return t&&Object.prototype.toString.call(t)=="[object Array]"},isString:function e(t){return t===""?true:t?typeof t=="string"||t instanceof String:false},isNotEmptyString:function e(t){return this.isString(t)?t.length>0:false},strPadLeft:function e(t,r,n){var a=t.length,i=n.length;if(a>=r)return t;for(;a<r;a+=i){t=n+t}return t},array_search:function e(t,r){for(var n=0;n<r.length;n++){if(r[n]==t)return n}return-1}}})(window);function r(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t<div class="','">\n\t\t\t<svg class="calendar-loader-circular"\n\t\t\t\tstyle="width:',"px; height:",'px;"\n\t\t\t\tviewBox="25 25 50 50">\n\t\t\t\t\t<circle class="calendar-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t\t<circle class="calendar-loader-inner-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t</svg>\n\t\t</div>\n']);r=function t(){return e};return e}var n=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"parseTime",value:function t(r){var n=e.parseDate1(BX.date.format(e.getDateFormat(),new Date)+" "+r,false);return n?{h:n.getHours(),m:n.getMinutes()}:n}},{key:"getTimeRounded",value:function e(t){return Math.round(t.getTime()/6e4)*6e4}},{key:"parseDate",value:function e(t,r,n,a){return BX.parseDate(t,r,n,a)}},{key:"parseDate1",value:function e(r,n,a){var i,_,o,s;if(!n)n=t.Loc.getMessage("FORMAT_DATETIME");r=BX.util.trim(r);if(a!==false)n=n.replace(":SS","");if(BX.type.isNotEmptyString(r)){s="";for(i=1;i<=12;i++){s=s+"|"+t.Loc.getMessage("MON_"+i)}var u=new RegExp("([0-9]+|[a-z]+"+s+")","ig"),D=r.match(u),M=t.Loc.getMessage("FORMAT_DATE").match(/(DD|MI|MMMM|MM|M|YYYY)/gi),f=[],g=[],l={};if(!D){return null}if(D.length>M.length){M=n.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/gi)}for(i=0,_=D.length;i<_;i++){if(BX.util.trim(D[i])!==""){f[f.length]=D[i]}}for(i=0,_=M.length;i<_;i++){if(BX.util.trim(M[i])!=""){g[g.length]=M[i]}}var O=BX.util.array_search("MMMM",g);if(O>0){f[O]=BX.getNumMonth(f[O]);g[O]="MM"}else{O=BX.util.array_search("M",g);if(O>0){f[O]=BX.getNumMonth(f[O]);g[O]="MM"}}for(i=0,_=g.length;i<_;i++){o=g[i].toUpperCase();l[o]=o=="T"||o=="TT"?f[i]:parseInt(f[i],10)}if(l["DD"]>0&&l["MM"]>0&&l["YYYY"]>0){var c=new Date;{c.setDate(1);c.setFullYear(l["YYYY"]);c.setMonth(l["MM"]-1);c.setDate(l["DD"]);c.setHours(0,0,0)}if((!isNaN(l["HH"])||!isNaN(l["GG"])||!isNaN(l["H"])||!isNaN(l["G"]))&&!isNaN(l["MI"])){if(!isNaN(l["H"])||!isNaN(l["G"])){var T=(l["T"]||l["TT"]||"am").toUpperCase()=="PM";var F=parseInt(l["H"]||l["G"]||0,10);if(T){l["HH"]=F+(F==12?0:12)}else{l["HH"]=F<12?F:0}}else{l["HH"]=parseInt(l["HH"]||l["GG"]||0,10)}if(isNaN(l["SS"]))l["SS"]=0;{c.setHours(l["HH"],l["MI"],l["SS"])}}return c}}return null}},{key:"formatTime",value:function r(n,a,i){var _=null;if(t.Type.isDate(n)){_=n}else{_=new Date;_.setHours(n,a,0)}return BX.date.format(e.getTimeFormatShort(),_.getTime()/1e3)}},{key:"formatDate",value:function r(n){if(t.Type.isDate(n)){n=n.getTime()}return BX.date.format(e.getDateFormat(),n/1e3)}},{key:"formatDateTime",value:function r(n){if(t.Type.isDate(n)){n=n.getTime()}return BX.date.format(e.getDateTimeFormat(),n/1e3)}},{key:"formatDateUsable",value:function r(n,a){var i=t.Loc.getMessage("LANGUAGE_ID"),_=e.getDateFormat();if(i==="ru"||i==="ua"){_="j F";if(n.getFullYear&&n.getFullYear()!==(new Date).getFullYear()&&a!==false){_+=" Y"}}return BX.date.format([["today","today"],["tommorow","tommorow"],["yesterday","yesterday"],["",_]],n)}},{key:"getDayLength",value:function t(){if(!e.DAY_LENGTH){e.DAY_LENGTH=864e5}return e.DAY_LENGTH}},{key:"getDefaultColorList",value:function e(){return["#86B100","#0092CC","#00AFC7","#DA9100","#00B38C","#DE2B24","#BD7AC9","#838FA0","#AB7917","#E97090"]}},{key:"findTargetNode",value:function e(t,r){var n=false;if(t){var a="data-bx-calendar",i;if(t.attributes&&t.attributes.length){for(i=0;i<t.attributes.length;i++){if(t.attributes[i].name&&t.attributes[i].name.substr(0,a.length)===a){n=t;break}}}if(!n){n=BX.findParent(t,function(e){var t;if(e.attributes&&e.attributes.length){for(t=0;t<e.attributes.length;t++){if(e.attributes[t].name&&e.attributes[t].name.substr(0,a.length)===a)return true}}return false},r)}}return n}},{key:"getFollowedUserList",value:function e(t){return[]}},{key:"getWeekDayByInd",value:function e(t){return["SU","MO","TU","WE","TH","FR","SA"][t]}},{key:"getLoader",value:function e(n,a){return t.Tag.render(r(),a||"calendar-loader",parseInt(n),parseInt(n))}},{key:"getDayCode",value:function e(t){return t.getFullYear()+"-"+("0"+~~(t.getMonth()+1)).substr(-2,2)+"-"+("0"+~~t.getDate()).substr(-2,2)}},{key:"getTextColor",value:function e(t){if(!t){return false}if(t.charAt(0)==="#"){t=t.substring(1,7)}var r=parseInt(t.substring(0,2),16),n=parseInt(t.substring(2,4),16),a=parseInt(t.substring(4,6),16),i=(r*.8+n+a*.2)/510*100;return i<50}},{key:"getKeyCode",value:function e(r){if(!t.Type.isString(r)){return false}var n={backspace:8,enter:13,escape:27,space:32,delete:46,left:37,right:39,up:38,down:40,z:90,y:89,shift:16,ctrl:17,alt:18,cmd:91,cmdRight:93,pageUp:33,pageDown:34,d:68,w:87,m:77,a:65};return n[r.toLowerCase()]}},{key:"getUsableDateTime",value:function e(r,n){if(t.Type.isDate(r))r=r.getTime();var a=(n||10)*60*1e3;r=Math.ceil(r/a)*a;return new Date(r)}},{key:"showNotification",value:function e(r){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;if(t.Type.isString(r)&&r!==""){BX.UI.Notification.Center.notify({content:r,actions:n})}}},{key:"showFieldError",value:function e(r,n,a){if(t.Type.isDomNode(n)&&t.Type.isString(r)&&r!==""){t.Dom.remove(n.querySelector(".ui-alert"));var i=new BX.UI.Alert({color:BX.UI.Alert.Color.DANGER,icon:BX.UI.Alert.Icon.DANGER,text:r});var _=i.getContainer();n.appendChild(_)}}},{key:"getDateFormat",value:function r(){if(!e.DATE_FORMAT){e.DATE_FORMAT=BX.Main.Date.convertBitrixFormat(t.Loc.getMessage("FORMAT_DATE"))}return e.DATE_FORMAT}},{key:"getDateTimeFormat",value:function r(){if(!e.DATETIME_FORMAT){e.DATETIME_FORMAT=BX.Main.Date.convertBitrixFormat(t.Loc.getMessage("FORMAT_DATETIME"))}return e.DATETIME_FORMAT}},{key:"getTimeFormat",value:function r(){if(!e.TIME_FORMAT){if(t.Loc.getMessage("FORMAT_DATETIME").substr(0,t.Loc.getMessage("FORMAT_DATE").length)===t.Loc.getMessage("FORMAT_DATE")){e.TIME_FORMAT=BX.util.trim(e.getDateTimeFormat().substr(e.getDateFormat().length));e.TIME_FORMAT_BX=BX.util.trim(t.Loc.getMessage("FORMAT_DATETIME").substr(t.Loc.getMessage("FORMAT_DATE").length))}else{e.TIME_FORMAT_BX=BX.isAmPmMode()?"H:MI:SS T":"HH:MI:SS";e.TIME_FORMAT=BX.date.convertBitrixFormat(BX.isAmPmMode()?"H:MI:SS T":"HH:MI:SS")}}return e.TIME_FORMAT}},{key:"getTimeFormatShort",value:function t(){if(!e.TIME_FORMAT_SHORT){e.TIME_FORMAT_SHORT=e.getTimeFormat().replace(":s","");e.TIME_FORMAT_SHORT_BX=e.TIME_FORMAT_BX.replace(":SS","")}return e.TIME_FORMAT_SHORT}},{key:"getCurrentUserId",value:function r(){if(!e.currentUserId){e.currentUserId=parseInt(t.Loc.getMessage("USER_ID"))}return e.currentUserId}},{key:"getTimeByInt",value:function e(t){t=parseInt(t);var r=Math.floor(t/60);return{hour:r,min:t-r*60}}},{key:"preventSelection",value:function e(t){t.ondrag=BX.False;t.ondragstart=BX.False;t.onselectstart=BX.False}},{key:"getBX",value:function e(){return window.top.BX||window.BX}},{key:"applyHacksForPopupzIndex",value:function r(n){var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(a){setTimeout(function(){e.applyHacksForPopupzIndex(n,false)},0)}else{n=t.Type.isInteger(n)?n:4200;if(BX.PopupMenu&&BX.PopupMenu.Data){for(var i in BX.PopupMenu.Data){if(BX.PopupMenu.Data.hasOwnProperty(i)&&BX.type.isObject(BX.PopupMenu.Data[i])&&BX.PopupMenu.Data[i].popupWindow&&BX.PopupMenu.Data[i].popupWindow.isShown()){BX.PopupMenu.Data[i].popupWindow.params.zIndex=n;BX.PopupMenu.Data[i].popupWindow.popupContainer.style.zIndex=n}}}}}},{key:"closeAllPopups",value:function e(){if(BX.PopupMenu&&BX.PopupMenu.Data){for(var t in BX.PopupMenu.Data){if(BX.PopupMenu.Data.hasOwnProperty(t)&&BX.type.isObject(BX.PopupMenu.Data[t])&&BX.PopupMenu.Data[t].popupWindow&&BX.PopupMenu.Data[t].popupWindow.isShown()){BX.PopupMenu.Data[t].popupWindow.close()}}}}},{key:"sendAnalyticLabel",value:function e(t){BX.ajax.runAction("calendar.api.calendarajax.sendAnalyticsLabel",{analyticsLabel:t})}}]);return e}();e.Util=n})(this.BX.Calendar=this.BX.Calendar||{},BX);
//# sourceMappingURL=util.bundle.map.js