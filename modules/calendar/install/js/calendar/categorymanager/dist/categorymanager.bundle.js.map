{"version":3,"file":"categorymanager.bundle.js","sources":["../src/category.js","../src/categorymanager.js"],"sourcesContent":["import { Util } from 'calendar.util';\nimport { CategoryManager } from './categorymanager';\n\nexport {\n\tCategoryManager\n}\n\nexport class Category\n{\n\tconstructor(data)\n\t{\n\t\tthis.updateData(data);\n\t\tthis.calendarContext = Util.getCalendarContext();\n\t\tthis.rooms = [];\n\t}\n\n\tupdateData(data)\n\t{\n\t\tthis.data = data || {};\n\t\tthis.id = parseInt(data.ID, 10);\n\t\tthis.name = data.NAME;\n\t}\n\n\taddRoom(room)\n\t{\n\t\tthis.rooms.push(room);\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n\n\tsetCheckboxStatus(checkboxStatus)\n\t{\n\t\tthis.checkboxStatus = checkboxStatus;\n\t}\n}","import { SectionManager } from 'calendar.sectionmanager';\nimport { Util } from 'calendar.util';\nimport { Event, Loc, Type } from 'main.core';\nimport {Category} from './category';\n\nexport class CategoryManager extends SectionManager\n{\n\tconstructor(data, config)\n\t{\n\t\tsuper(data, config);\n\t\tthis.setCategories(data.categories);\n\t\tthis.setConfig(config);\n\t\tthis.sortCategories();\n\t\tthis.permissions = config.perm;\n\t\tthis.locationContext = config.locationContext|| null;\n\t}\n\n\tsortCategories()\n\t{\n\t\tthis.categoryIndex = {};\n\t\tthis.categories = this.categories.sort((a, b) => {\n\t\t\tif (a.name.toLowerCase() > b.name.toLowerCase())\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (a.name.toLowerCase() < b.name.toLowerCase())\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t});\n\n\t\tthis.categories.forEach((category, i) => {\n\t\t\tthis.categoryIndex[category.getId()] = i;\n\t\t});\n\t}\n\n\tsetCategories(params = [])\n\t{\n\t\tthis.categories = [];\n\t\tthis.categoryIndex = {};\n\t\tparams.forEach((categoryData) => {\n\t\t\tlet category = new Category(categoryData);\n\t\t\tthis.categories.push(category);\n\t\t\tthis.categoryIndex[category.getId()] = this.categories.length - 1;\n\t\t});\n\t}\n\n\tgetCategories()\n\t{\n\t\treturn this.categories;\n\t}\n\n\tgetCategory(id)\n\t{\n\t\treturn this.categories[this.categoryIndex[id]];\n\t}\n\n\tcreateCategory(params)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tparams.name = this.checkName(params.name);\n\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.createCategory', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tname: params.name,\n\t\t\t\t\t\trooms: params.rooms\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconst categories = response.data || [];\n\t\t\t\t\t\tthis.setCategories(categories);\n\t\t\t\t\t\tthis.sortCategories();\n\n\t\t\t\t\t\tUtil.getBX().Event.EventEmitter.emit(\n\t\t\t\t\t\t\t'BX.Calendar.Rooms.Categories:create',\n\t\t\t\t\t\t\tnew Event.BaseEvent(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tdata: { categoryList: categories }\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.updateLocationContext(categories);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tBX.Calendar.Util.displayError(response.errors);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t});\n\t}\n\n\tupdateCategory(params)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tparams.name = this.checkName(params.name);\n\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.updateCategory', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tid: params.id,\n\t\t\t\t\t\tname: params.name,\n\t\t\t\t\t\trooms: {\n\t\t\t\t\t\t\ttoAddCategory: params.toAddCategory,\n\t\t\t\t\t\t\ttoRemoveCategory: params.toRemoveCategory,\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconst categories = response.data || [];\n\t\t\t\t\t\tthis.setCategories(categories);\n\t\t\t\t\t\tthis.sortCategories();\n\n\t\t\t\t\t\tUtil.getBX().Event.EventEmitter.emit(\n\t\t\t\t\t\t\t'BX.Calendar.Rooms.Categories:create'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.updateLocationContext(categories);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tBX.Calendar.Util.displayError(response.errors);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tdeleteCategory(id, unfreezeButtonsCallback)\n\t{\n\t\tif (confirm(BX.message('EC_CATEGORY_DELETE_CONFIRM')))\n\t\t{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tBX.ajax.runAction('calendar.api.locationajax.deleteCategory', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(\n\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\tconst categories = response.data || [];\n\t\t\t\t\t\t\tif (!categories.length)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.reload();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.setCategories(categories);\n\t\t\t\t\t\t\tthis.sortCategories();\n\n\t\t\t\t\t\t\tUtil.getBX().Event.EventEmitter.emit(\n\t\t\t\t\t\t\t\t'BX.Calendar.Rooms.Categories:delete',\n\t\t\t\t\t\t\t\tnew Event.BaseEvent(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tdata: { categoryList: categories }\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.updateLocationContext(categories);\n\t\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(response) => {\n\t\t\t\t\t\t\tBX.Calendar.Util.displayError(response.errors);\n\t\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tunfreezeButtonsCallback();\n\t\t}\n\t}\n\n\tcheckName(name)\n\t{\n\t\tif (typeof name === 'string')\n\t\t{\n\t\t\tname = name.trim();\n\t\t\tif (CategoryManager.isEmpty(name))\n\t\t\t{\n\t\t\t\tname = Loc.getMessage('EC_SEC_SLIDER_NEW_CATEGORY');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tname = Loc.getMessage('EC_SEC_SLIDER_NEW_CATEGORY');\n\t\t}\n\t\treturn name;\n\t}\n\n\tstatic isEmpty(param)\n\t{\n\t\tif (Type.isArray(param))\n\t\t{\n\t\t\treturn !param.length;\n\t\t}\n\t\treturn param === null || param === undefined || param === '' || param === [] || param === {};\n\t}\n\n\tcanDo(action)\n\t{\n\t\t//actions:view|edit|access\n\t\treturn this.permissions[action];\n\t}\n\n\tunsetRooms()\n\t{\n\t\tthis.categories.map(category => category.rooms = []);\n\t}\n\n\thandlePullCategoryChanges(params)\n\t{\n\t\tif (params.command === 'delete_category')\n\t\t{\n\t\t\tconst categoryId = parseInt(params.ID, 10);\n\t\t\tif (this.categoryIndex[categoryId])\n\t\t\t{\n\t\t\t\tthis.reloadCategoriesFromDatabase().then(this.reloadDataDebounce());\n\t\t\t\tUtil.getBX().Event.EventEmitter.emit(\n\t\t\t\t\t'BX.Calendar.Rooms:pull-delete',\n\t\t\t\t\tnew Event.BaseEvent(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdata: { categoryId }\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.reloadCategoriesFromDatabase().then(this.reloadDataDebounce());\n\t\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar.Rooms.Categories:pull-delete');\n\t\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar:doRefresh');\n\t\t\t}\n\t\t}\n\t\telse if (params.command === 'create_category')\n\t\t{\n\t\t\tthis.reloadCategoriesFromDatabase().then(this.reloadDataDebounce());\n\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar.Rooms.Categories:pull-create');\n\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar:doRefresh');\n\t\t}\n\t\telse if (params.command === 'update_category')\n\t\t{\n\t\t\tthis.reloadCategoriesFromDatabase().then(this.reloadDataDebounce());\n\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar.Rooms.Categories:pull-update');\n\t\t\tUtil.getBX().Event.EventEmitter.emit('BX.Calendar:doRefresh');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.reloadCategoriesFromDatabase().then(this.reloadDataDebounce());\n\t\t}\n\t}\n\n\treloadCategoriesFromDatabase()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.getCategoryList')\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.setCategories(response.data.categories || []);\n\t\t\t\t\t\tthis.sortCategories();\n\t\t\t\t\t\tBX.Calendar.Controls.Location.setLocationList(response.data.rooms);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tunsetCategoryRooms(categoryId)\n\t{\n\t\tthis.getCategory(categoryId).rooms = [];\n\t}\n\n\tgetCategoriesWithRooms(rooms)\n\t{\n\t\tthis.unsetRooms();\n\n\t\tconst categoriesWithRooms = {\n\t\t\t'default': [],\n\t\t\t'categories': this.getCategories(),\n\t\t};\n\n\t\tlet categoryIndexForRoom;\n\n\t\trooms.forEach((room) => {\n\t\t\tcategoryIndexForRoom = this.categoryIndex[room.categoryId];\n\n\t\t\tif(categoriesWithRooms['categories'][categoryIndexForRoom])\n\t\t\t{\n\t\t\t\tcategoriesWithRooms['categories'][categoryIndexForRoom].addRoom(room);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcategoriesWithRooms['default'].push(room);\n\t\t\t}\n\t\t}, this);\n\n\t\treturn categoriesWithRooms;\n\t}\n\n\tupdateLocationContext()\n\t{\n\t\tif(this.locationContext !== null && this.locationContext.roomsManagerFromDB !== null)\n\t\t{\n\t\t\tthis.locationContext.roomsManagerFromDB.reloadRoomsFromDatabase()\n\t\t\t\t.then(\n\t\t\t\t\tthis.locationContext.setValues.bind(this.locationContext)\n\t\t\t\t);\n\t\t}\n\t}\n\n\tgetCategoryRooms(category, rooms)\n\t{\n\t\tconst categoryRooms = [];\n\n\t\trooms.forEach((room) => {\n\t\t\tif(category.id === room.categoryId)\n\t\t\t{\n\t\t\t\tcategoryRooms.push(room);\n\t\t\t}\n\t\t});\n\n\t\treturn categoryRooms;\n\t}\n}"],"names":["Category","constructor","data","updateData","calendarContext","Util","getCalendarContext","rooms","id","parseInt","ID","name","NAME","addRoom","room","push","getId","setCheckboxStatus","checkboxStatus","CategoryManager","SectionManager","config","setCategories","categories","setConfig","sortCategories","permissions","perm","locationContext","categoryIndex","sort","a","b","toLowerCase","forEach","category","i","params","categoryData","length","getCategories","getCategory","createCategory","Promise","resolve","checkName","BX","ajax","runAction","then","response","getBX","Event","EventEmitter","emit","BaseEvent","categoryList","updateLocationContext","Calendar","displayError","errors","updateCategory","toAddCategory","toRemoveCategory","deleteCategory","unfreezeButtonsCallback","confirm","message","reload","trim","isEmpty","Loc","getMessage","param","Type","isArray","undefined","canDo","action","unsetRooms","map","handlePullCategoryChanges","command","categoryId","reloadCategoriesFromDatabase","reloadDataDebounce","Controls","Location","setLocationList","unsetCategoryRooms","getCategoriesWithRooms","categoriesWithRooms","categoryIndexForRoom","roomsManagerFromDB","reloadRoomsFromDatabase","setValues","bind","getCategoryRooms","categoryRooms"],"mappings":"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"}