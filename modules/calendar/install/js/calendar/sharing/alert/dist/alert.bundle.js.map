{"version":3,"file":"alert.bundle.js","sources":["../src/components/application.js","../src/alert.js"],"sourcesContent":["import { Dom, Type, Loc } from 'main.core';\nimport { Util } from 'calendar.util';\nimport '../css/alert.css';\n\nexport const Application = {\n\tprops: {\n\t\tlink: {\n\t\t\ttype: Object,\n\t\t\tdefault: null\n\t\t},\n\t},\n\tname: 'Application',\n\tdata()\n\t{\n\t\treturn {\n\t\t\ttype: '',\n\t\t\treturnButton: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_SHARING_ALERT_RETURN_BUTTON'),\n\t\t\t\tdisabled: false,\n\t\t\t}\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tif (this.link && Type.isObject(this.link))\n\t\t{\n\t\t\tthis.type = 'event';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.type = 'calendar';\n\t\t}\n\n\t\tthis.setPageVisualSettings();\n\t},\n\tmethods: {\n\t\tsetPageVisualSettings()\n\t\t{\n\t\t\tconst htmlNode = document.querySelector('html');\n\t\t\tconst bodyNode = document.querySelector('body');\n\n\t\t\tif (!Dom.hasClass(bodyNode, 'calendar-sharing--public-body'))\n\t\t\t{\n\t\t\t\tDom.addClass(bodyNode, 'calendar-sharing--public-body');\n\t\t\t}\n\t\t\tif (!Dom.hasClass(htmlNode, 'calendar-sharing--public-html'))\n\t\t\t{\n\t\t\t\tDom.addClass(htmlNode, 'calendar-sharing--public-html');\n\t\t\t}\n\n\t\t\tDom.addClass(htmlNode, 'calendar-sharing--bg-red');\n\t\t\tDom.addClass(htmlNode, 'calendar-sharing--alert');\n\n\t\t\tif (Util.isMobileBrowser())\n\t\t\t{\n\t\t\t\tif (!Dom.hasClass(bodyNode, 'calendar-sharing--public-body-mobile'))\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(bodyNode, 'calendar-sharing--public-body-mobile');\n\t\t\t\t}\n\t\t\t\tif (!Dom.hasClass(htmlNode, 'calendar-sharing--public-html-mobile'))\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(htmlNode, 'calendar-sharing--public-html-mobile');\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\thandleReturnButtonClick()\n\t\t{\n\t\t\tthis.returnButton.disabled = true;\n\t\t\tif (this.link.userLinkHash)\n\t\t\t{\n\t\t\t\tconst sharingPath = '/pub/calendar-sharing/';\n\n\t\t\t\twindow.location.href = document.location.origin\n\t\t\t\t\t+ sharingPath\n\t\t\t\t\t+ this.link.userLinkHash\n\t\t\t\t;\n\t\t\t}\n\t\t\tthis.returnButton.disabled = false;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"calendar-sharing-alert-container\">\n\t\t\t<div class=\"calendar-sharing-alert-icon\"></div>\n\t\t\t<div class=\"calendar-sharing-alert-info\" v-if=\"type === 'event'\">\n\t\t\t\t<div class=\"calendar-sharing-alert-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CALENDAR_SHARING_ALERT_EVENT_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sharing-alert-description\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CALENDAR_SHARING_ALERT_EVENT_DESCRIPTION') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-btn-container ui-btn-container-center calendar-shared-alert_btn-box\" v-if=\"link.userLinkHash\">\n\t\t\t\t\t<button\n\t\t\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round\"\n\t\t\t\t\t\t@click=\"handleReturnButtonClick\"\n\t\t\t\t\t\t:disabled=\"returnButton.disabled\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ returnButton.text }}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sharing-alert-info\" v-else>\n\t\t\t\t<div class=\"calendar-sharing-alert-title\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CALENDAR_SHARING_ALERT_CALENDAR_TITLE') }}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sharing-alert-description\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('CALENDAR_SHARING_ALERT_CALENDAR_DESCRIPTION') }}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import { BitrixVue } from 'ui.vue3';\nimport { Application } from './components/application';\n\nexport class Alert\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.link = options.link;\n\t\tthis.rootNode = BX('calendar-sharing-alert');\n\n\t\tthis.buildView();\n\t}\n\n\tbuildView()\n\t{\n\t\tthis.application = BitrixVue.createApp(Application, {\n\t\t\tlink: this.link,\n\t\t}).mount(this.rootNode);\n\t}\n}"],"names":["Application","props","link","type","Object","default","name","data","returnButton","text","Loc","getMessage","disabled","created","Type","isObject","setPageVisualSettings","methods","htmlNode","document","querySelector","bodyNode","Dom","hasClass","addClass","Util","isMobileBrowser","handleReturnButtonClick","userLinkHash","sharingPath","window","location","href","origin","template","Alert","constructor","options","rootNode","BX","buildView","application","BitrixVue","createApp","mount"],"mappings":";;;;;CAIO,MAAMA,WAAW,GAAG;GAC1BC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLC,IAAI,EAAEC,MADD;OAELC,OAAO,EAAE;;IAJe;GAO1BC,IAAI,EAAE,aAPoB;;GAQ1BC,IAAI,GACJ;KACC,OAAO;OACNJ,IAAI,EAAE,EADA;OAENK,YAAY,EAAE;SACbC,IAAI,EAAEC,aAAG,CAACC,UAAJ,CAAe,sCAAf,CADO;SAEbC,QAAQ,EAAE;;MAJZ;IAVyB;;GAkB1BC,OAAO,GACP;KACC,IAAI,KAAKX,IAAL,IAAaY,cAAI,CAACC,QAAL,CAAc,KAAKb,IAAnB,CAAjB,EACA;OACC,KAAKC,IAAL,GAAY,OAAZ;MAFD,MAKA;OACC,KAAKA,IAAL,GAAY,UAAZ;;;KAGD,KAAKa,qBAAL;IA7ByB;;GA+B1BC,OAAO,EAAE;KACRD,qBAAqB,GACrB;OACC,MAAME,QAAQ,GAAGC,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAjB;OACA,MAAMC,QAAQ,GAAGF,QAAQ,CAACC,aAAT,CAAuB,MAAvB,CAAjB;;OAEA,IAAI,CAACE,aAAG,CAACC,QAAJ,CAAaF,QAAb,EAAuB,+BAAvB,CAAL,EACA;SACCC,aAAG,CAACE,QAAJ,CAAaH,QAAb,EAAuB,+BAAvB;;;OAED,IAAI,CAACC,aAAG,CAACC,QAAJ,CAAaL,QAAb,EAAuB,+BAAvB,CAAL,EACA;SACCI,aAAG,CAACE,QAAJ,CAAaN,QAAb,EAAuB,+BAAvB;;;OAGDI,aAAG,CAACE,QAAJ,CAAaN,QAAb,EAAuB,0BAAvB;OACAI,aAAG,CAACE,QAAJ,CAAaN,QAAb,EAAuB,yBAAvB;;OAEA,IAAIO,kBAAI,CAACC,eAAL,EAAJ,EACA;SACC,IAAI,CAACJ,aAAG,CAACC,QAAJ,CAAaF,QAAb,EAAuB,sCAAvB,CAAL,EACA;WACCC,aAAG,CAACE,QAAJ,CAAaH,QAAb,EAAuB,sCAAvB;;;SAED,IAAI,CAACC,aAAG,CAACC,QAAJ,CAAaL,QAAb,EAAuB,sCAAvB,CAAL,EACA;WACCI,aAAG,CAACE,QAAJ,CAAaN,QAAb,EAAuB,sCAAvB;;;MA1BK;;KA8BRS,uBAAuB,GACvB;OACC,KAAKnB,YAAL,CAAkBI,QAAlB,GAA6B,IAA7B;;OACA,IAAI,KAAKV,IAAL,CAAU0B,YAAd,EACA;SACC,MAAMC,WAAW,GAAG,wBAApB;SAEAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuBb,QAAQ,CAACY,QAAT,CAAkBE,MAAlB,GACpBJ,WADoB,GAEpB,KAAK3B,IAAL,CAAU0B,YAFb;;;OAKD,KAAKpB,YAAL,CAAkBI,QAAlB,GAA6B,KAA7B;;;IAzEwB;GA4E1BsB,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA5Ee,CAApB;;CCDA,MAAMC,KAAN,CACP;GACCC,WAAW,CAACC,OAAO,GAAG,EAAX,EACX;KACC,KAAKnC,IAAL,GAAYmC,OAAO,CAACnC,IAApB;KACA,KAAKoC,QAAL,GAAgBC,EAAE,CAAC,wBAAD,CAAlB;KAEA,KAAKC,SAAL;;;GAGDA,SAAS,GACT;KACC,KAAKC,WAAL,GAAmBC,iBAAS,CAACC,SAAV,CAAoB3C,WAApB,EAAiC;OACnDE,IAAI,EAAE,KAAKA;MADO,EAEhB0C,KAFgB,CAEV,KAAKN,QAFK,CAAnB;;;CAXF;;;;;;;;"}