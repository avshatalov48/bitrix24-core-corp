{"version":3,"file":"interface.bundle.js","sources":["../src/controls/checkbox.js","../src/controls/dialog.js","../src/controls/sharingbutton.js","../src/interface.js"],"sourcesContent":["import { Tag, Type, Dom, Event } from 'main.core';\n\nexport default class Checkbox\n{\n\tconstructor(options)\n\t{\n\t\tthis.link = options.link;\n\t\tthis.checked = this.link.active;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.container = this.createContainer();\n\t\tthis.checkbox = this.createCheckbox();\n\n\t\tEvent.bind(this.checkbox, 'click', this.saveCheckBoxState.bind(this));\n\t\tDom.append(this.checkbox, this.container);\n\t}\n\n\tcreateContainer()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-controls-checkbox-container\"></div>\n\t\t`;\n\t}\n\n\tcreateCheckbox()\n\t{\n\t\treturn Tag.render`\n\t\t\t<input type=\"checkbox\" ${this.checked ? 'checked' : ''}>\n\t\t`;\n\t}\n\n\tsaveCheckBoxState()\n\t{\n\t\tthis.link.active = this.checkbox.checked;\n\t\tBX.ajax.runAction('calendar.api.sharingajax.toggleLink', {\n\t\t\tdata: {\n\t\t\t\tuserLinkId: this.link.id,\n\t\t\t\tisActive: this.link.active,\n\t\t\t}\n\t\t});\n\t\t// BX.userOptions.save('calendar', 'sharing-dialog-checkbox', this.link, this.checkbox.checked);\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n\n\trenderTo(node: HTMLElement): HTMLElement | null\n\t{\n\t\tif (Type.isDomNode(node))\n\t\t{\n\t\t\treturn node.appendChild(this.getContainer());\n\t\t}\n\n\t\treturn null;\n\t}\n}","import { Tag, Text, Loc, Dom, Event, Runtime } from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Util} from 'calendar.util';\nimport Checkbox from './checkbox';\n\nexport default class Dialog\n{\n\tPOPUP_WIDTH = 420;\n\tzIndex = 3100;\n\tQRCODE_SIZE = 114;\n\tQRCODE_COLOR_LIGHT = '#fff';\n\tQRCODE_COLOR_DARK = '#000';\n\n\tconstructor(options = {})\n\t{\n\t\tthis.bindElement = options.bindElement;\n\t\tthis.userId = options.userId;\n\t\tthis.isSharingOn = options.isSwitchCheckedOnStart;\n\t\tthis.switcherNode = options.switcherNode;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.popup = new BX.Main.Popup({\n\t\t\tbindElement: this.bindElement,\n\t\t\tminHeight: 230,\n\t\t\twidth: this.POPUP_WIDTH,\n\t\t\tautoHide: true,\n\t\t\tautoHideHandler: (event) => this.dialogPopupAutoHideHandler(event),\n\t\t\tcloseByEsc: true,\n\t\t\tangle: { offset: this.POPUP_WIDTH / 2 },\n\t\t\toffsetLeft: (this.bindElement.offsetWidth / 2) - this.POPUP_WIDTH / 2.25,\n\t\t\tevents: {\n\t\t\t\tonFirstShow: this.onFirstShow.bind(this),\n\t\t\t\tonClose: this.onClose.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.createLoader().show();\n\t}\n\n\tdialogPopupAutoHideHandler(event)\n\t{\n\t\tif (this.switcherNode.contains(event.target) || this.popup.getPopupContainer().contains(event.target))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.popup;\n\t}\n\n\tgetLoader()\n\t{\n\t\treturn this.loader;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.popup?.isShown();\n\t}\n\n\tdestroy()\n\t{\n\t\tthis.popup?.destroy();\n\t}\n\n\tcreateLoader()\n\t{\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: this.popup.getContentContainer(),\n\t\t\tsize: 110,\n\t\t});\n\n\t\treturn this.loader;\n\t}\n\n\tasync onFirstShow()\n\t{\n\t\tawait this.loadDialogData();\n\t\tawait this.initQrCode();\n\t\tthis.getPopup().setContent(this.createDialogContent());\n\t\tthis.onAfterDialogContentCreated();\n\t\tthis.getLoader().hide();\n\t}\n\n\tonClose()\n\t{\n\t\tEventEmitter.emit('Calendar.Sharing.Dialog:onClose');\n\t}\n\n\tasync loadDialogData()\n\t{\n\t\tconst response = await BX.ajax.runAction('calendar.api.sharingajax.getDialogData', {\n\t\t\tdata: {\n\t\t\t\tisSharingOn: this.isSharingOn,\n\t\t\t}\n\t\t});\n\n\t\tthis.links = response.data.links;\n\t}\n\n\tasync initQrCode()\n\t{\n\t\tawait Runtime.loadExtension(['main.qrcode']);\n\t}\n\n\tonAfterDialogContentCreated()\n\t{\n\t\tthis.subscribeToEvents();\n\t\tDom.style(\n\t\t\tthis.copyLinkButtonContainer.firstChild,\n\t\t\t'min-width',\n\t\t\tthis.copyLinkButtonContainer.offsetWidth + 1 + 'px'\n\t\t);\n\t}\n\n\tsubscribeToEvents()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'Calendar.Sharing.copyLinkButton:onSwitchToggled',\n\t\t\t(event) => {\n\t\t\t\tthis.copyLinkButton?.setDisabled(!event.data);\n\t\t\t\tif (this.previewBlockQr)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(\n\t\t\t\t\t\tthis.previewBlockQr,\n\t\t\t\t\t\t'calendar-sharing-dialog-preview-block-qr-container-blurred'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.previewBlockAnnotationLink)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(\n\t\t\t\t\t\tthis.previewBlockAnnotationLink,\n\t\t\t\t\t\t'calendar-sharing-dialog-preview-block-annotation-link-disabled'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.links.forEach((link) => {\n\t\t\t\t\tif (link.linkInputNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(\n\t\t\t\t\t\t\tlink.linkContainerNode,\n\t\t\t\t\t\t\t'calendar-sharing-dialog-sharing-block-link-container-disabled'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tDom.removeClass(\n\t\t\t\t\t\t\tlink.linkInputNode,\n\t\t\t\t\t\t\t'calendar-sharing-dialog-controls-link-text-disabled'\n\t\t\t\t\t\t);\n\t\t\t\t\t\tDom.attr(link.linkInputNode, 'value', link.url);\n\t\t\t\t\t\tEventEmitter.emit('Calendar.Sharing.LinkTextContainer:onChange');\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tBX.ajax.runAction('calendar.api.sharingajax.toggleLink', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tuserLinkId: this.links[0].id,\n\t\t\t\t\t\tisActive: this.links[0].active,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}\n\n\tgetDialogContent()\n\t{\n\t\treturn this.dialogContent;\n\t}\n\n\tcreateDialogContent()\n\t{\n\t\tthis.dialogContent = this.createContentWrap();\n\t\tDom.append(this.createSharingBlock(), this.dialogContent);\n\t\tDom.append(this.createPreviewBlock(), this.dialogContent);\n\n\t\treturn this.dialogContent;\n\t}\n\n\tcreateContentWrap()\n\t{\n\t\tthis.contentWrap = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-wrap\"></div>\n\t\t`;\n\n\t\treturn this.contentWrap;\n\t}\n\n\tcreateSharingBlock()\n\t{\n\t\tthis.sharingBlock = this.createBlock();\n\t\tDom.append(this.createSharingBlockTitle(), this.sharingBlock);\n\t\tDom.append(this.createSharingBlockLinks(), this.sharingBlock);\n\n\t\treturn this.sharingBlock;\n\t}\n\n\tcreateBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-block\"></div>\n\t\t`;\n\t}\n\n\tcreateSharingBlockTitle()\n\t{\n\t\tthis.sharingBlockTitle = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-sharing-block-title\">\n\t\t\t\t<div class=\"calendar-sharing-dialog-sharing-block-title-text\">\n\t\t\t\t\t${Loc.getMessage('SHARING_DIALOG_SHARING_BLOCK_TITLE')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tDom.append(this.createSharingHint(), this.sharingBlockTitle);\n\n\t\treturn this.sharingBlockTitle;\n\t}\n\n\tcreateSharingHint()\n\t{\n\t\treturn BX.UI.Hint.createNode(Loc.getMessage('SHARING_DIALOG_SHARING_HINT'));\n\t}\n\n\tcreateSharingBlockLinks()\n\t{\n\t\tconst references = Tag.render`\n\t\t\t<div></div>\n\t\t`;\n\t\tthis.links.forEach((link) =>{\n\t\t\tDom.append(this.createSharingBlockLink(link), references);\n\t\t});\n\n\t\treturn references;\n\t}\n\n\tcreateSharingBlockLink(link)\n\t{\n\t\tconst referenceBlock = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-sharing-block-link-container\"></div>\n\t\t`;\n\t\tconst linkContainer = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-controls-container\"></div>\n\t\t`;\n\n\t\tconst linkInput = Tag.render`\n\t\t\t<input\n\t\t\t\ttype=\"text\"\n\t\t\t\tclass=\"calendar-sharing-dialog-controls-link-text\"\n\t\t\t\tvalue=\"${Text.encode(link.url)}\"\n\t\t\t\treadonly\n\t\t\t>\n\t\t`;\n\n\t\tif (!this.isSharingOn)\n\t\t{\n\t\t\tDom.attr(linkInput, 'value', link.serverPath + '/...');\n\t\t\tDom.addClass(referenceBlock,'calendar-sharing-dialog-sharing-block-link-container-disabled');\n\t\t\tDom.addClass(linkInput,'calendar-sharing-dialog-controls-link-text-disabled');\n\t\t\tDom.style(linkInput,'width', linkInput.value.length - 3 + 'ch');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(linkInput,'width', linkInput.value.length + 'ch');\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\t'Calendar.Sharing.LinkTextContainer:onChange',\n\t\t\t() => {\n\t\t\t\tDom.style(linkInput,'width', linkInput.value.length + 'ch');\n\t\t\t},\n\t\t);\n\n\t\tlink.linkContainerNode = referenceBlock\n\t\tlink.linkInputNode = linkInput;\n\n\t\tDom.append(linkInput, linkContainer);\n\t\tDom.append(linkContainer, referenceBlock);\n\n\t\tthis.copyLinkButtonContainer = this.createCopyLinkButtonContainer();\n\t\tDom.append(this.copyLinkButtonContainer, referenceBlock);\n\t\tthis.copyLinkButton = this.createCopyLinkButton(link.url);\n\t\tthis.copyLinkButton.renderTo(this.copyLinkButtonContainer);\n\n\t\treturn referenceBlock;\n\t}\n\n\tcreateCopyLinkButtonContainer()\n\t{\n\t\tconst copyLinkButtonContainer = Tag.render`<div></div>`;\n\t\tEvent.bind(copyLinkButtonContainer, 'mouseenter', () => this.handleCopyLinkButtonContainerMouseEnter());\n\t\tEvent.bind(copyLinkButtonContainer, 'mouseleave', () => this.handleCopyLinkButtonContainerMouseLeave());\n\n\t\treturn copyLinkButtonContainer;\n\t}\n\n\thandleCopyLinkButtonContainerMouseEnter()\n\t{\n\t\tif (this.copyLinkButton?.disabled)\n\t\t{\n\t\t\tEventEmitter.emit('Calendar.Sharing.copyLinkButtonContainer:onMouseEnter');\n\t\t\tthis.showDisabledCopyLinkButtonInfoPopup();\n\t\t}\n\t}\n\n\tshowDisabledCopyLinkButtonInfoPopup()\n\t{\n\t\tif (!this.disabledCopyLinkButtonPopup)\n\t\t{\n\t\t\tthis.disabledCopyLinkButtonPopup = this.createDisabledCopyLinkButtonInfoPopup();\n\t\t}\n\t\tif (!this.disabledCopyLinkButtonPopup?.isShown())\n\t\t{\n\t\t\tthis.disabledCopyLinkButtonPopup.show();\n\t\t}\n\t}\n\n\thandleCopyLinkButtonContainerMouseLeave()\n\t{\n\t\tif (this.copyLinkButton?.disabled)\n\t\t{\n\t\t\tthis.hideDisabledCopyLinkButtonInfoPopup();\n\t\t}\n\t}\n\n\thideDisabledCopyLinkButtonInfoPopup()\n\t{\n\t\tif (this.disabledCopyLinkButtonPopup?.isShown())\n\t\t{\n\t\t\tthis.disabledCopyLinkButtonPopup.close();\n\t\t}\n\t}\n\n\tcreateDisabledCopyLinkButtonInfoPopup()\n\t{\n\t\tconst disabledCopyLinkButtonInfoPopupWidth = 200;\n\n\t\treturn new BX.Main.Popup(\n\t\t\t{\n\t\t\t\tbindElement: this.copyLinkButtonContainer,\n\t\t\t\tclassName: 'calendar-clipboard-copy',\n\t\t\t\tcontent: Loc.getMessage('SHARING_DIALOG_SHARING_BLOCK_DISABLED_COPY_LINK_BUTTON_POPUP'),\n\n\t\t\t\toffsetLeft: (this.copyLinkButtonContainer.offsetWidth / 2 - disabledCopyLinkButtonInfoPopupWidth / 2) + 40,\n\t\t\t\twidth: disabledCopyLinkButtonInfoPopupWidth,\n\t\t\t\tdarkMode: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\toffset: 90,\n\t\t\t\t},\n\t\t\t\tcacheable: true,\n\t\t\t}\n\t\t);\n\t}\n\n\tcreateCopyLinkButton(link)\n\t{\n\t\tconst copyLinkButton = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('SHARING_DIALOG_SHARING_BLOCK_COPY_LINK_BUTTON'),\n\t\t\tround: true,\n\t\t\ticon: BX.UI.Button.Icon.COPY,\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\tonclick: (button) => this.handleCopyLinkButtonClick(button, link),\n\t\t});\n\n\t\tcopyLinkButton.setDisabled(!this.isSharingOn);\n\n\t\treturn copyLinkButton;\n\t}\n\n\thandleCopyLinkButtonClick(button, link)\n\t{\n\t\tconst copyResult = this.copyLink(button, link);\n\t\tif (copyResult)\n\t\t{\n\t\t\tthis.onSuccessfulCopyingLink();\n\t\t}\n\t}\n\n\tcopyLink(button, link = false)\n\t{\n\t\treturn !(!link || !BX.clipboard.copy(this.makeLinkText(link)));\n\t}\n\n\tmakeLinkText(link)\n\t{\n\t\treturn link;\n\t}\n\n\tonSuccessfulCopyingLink()\n\t{\n\t\tUtil.showNotification(Loc.getMessage('SHARING_COPY_LINK_NOTIFICATION'));\n\t\tthis.copyLinkButton?.setText(Loc.getMessage('SHARING_DIALOG_SHARING_BLOCK_COPY_LINK_BUTTON_COPIED'));\n\t\tthis.copyLinkButton?.setIcon(BX.UI.Button.Icon.DONE);\n\t\tif (this.copyLinkButtonTimeoutId)\n\t\t{\n\t\t\tclearTimeout(this.copyLinkButtonTimeoutId);\n\t\t}\n\t\tthis.copyLinkButtonTimeoutId = setTimeout(() => {\n\t\t\tthis.copyLinkButton?.setIcon(BX.UI.Button.Icon.COPY);\n\t\t\tthis.copyLinkButton?.setText(Loc.getMessage('SHARING_DIALOG_SHARING_BLOCK_COPY_LINK_BUTTON'));\n\t\t}, 3000);\n\t}\n\n\tcreatePreviewBlock()\n\t{\n\t\tthis.previewBlock = this.createBlock();\n\t\tDom.addClass(this.previewBlock, 'calendar-sharing-dialog-block-preview-section');\n\t\tDom.append(this.createPreviewBlockQr(), this.previewBlock);\n\t\tDom.append(this.createPreviewBlockAnnotation(), this.previewBlock);\n\n\t\treturn this.previewBlock;\n\t}\n\n\tcreatePreviewBlockQr()\n\t{\n\t\tthis.previewBlockQr = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-preview-block-qr-container\"></div>\n\t\t`;\n\n\t\tthis.QRCode = new QRCode(this.previewBlockQr, {\n\t\t\ttext: this.links[0].url,\n\t\t\twidth: this.QRCODE_SIZE,\n\t\t\theight: this.QRCODE_SIZE,\n\t\t\tcolorDark : this.QRCODE_COLOR_DARK,\n\t\t\tcolorLight : this.QRCODE_COLOR_LIGHT,\n\t\t\tcorrectLevel : QRCode.CorrectLevel.H\n\t\t});\n\n\t\tif (!this.isSharingOn)\n\t\t{\n\t\t\tDom.addClass(this.previewBlockQr, 'calendar-sharing-dialog-preview-block-qr-container-blurred');\n\t\t}\n\n\t\treturn this.previewBlockQr;\n\t}\n\n\tcreatePreviewBlockAnnotation()\n\t{\n\t\tthis.previewBlockAnnotation = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-preview-block-annotation\"></div>\n\t\t`;\n\t\tDom.append(\n\t\t\tthis.createPreviewBlockAnnotationItem(),\n\t\t\tthis.previewBlockAnnotation\n\t\t);\n\n\t\treturn this.previewBlockAnnotation;\n\t}\n\n\tcreatePreviewBlockAnnotationItem()\n\t{\n\n\t\tconst annotation = Tag.render`\n\t\t\t<div class=\"calendar-sharing-dialog-preview-block-annotation-item\"></div>\n\t\t`;\n\t\tconst linkPhrase = '<a class=\"calendar-sharing-dialog-preview-block-annotation-link\">'\n\t\t\t+ Loc.getMessage('SHARING_DIALOG_PREVIEW_BLOCK_CONTENT_LINK')\n\t\t\t+ '</a>'\n\t\t;\n\t\tconst blockContent = Tag.render`\n\t\t\t<span>${Loc.getMessage('SHARING_DIALOG_PREVIEW_BLOCK_CONTENT', {'#LINK#': linkPhrase})}</span>\n\t\t`;\n\n\t\tDom.append(blockContent, annotation);\n\t\tthis.previewBlockAnnotationLink = annotation.querySelector('.calendar-sharing-dialog-preview-block-annotation-link');\n\n\t\tif (this.previewBlockAnnotationLink)\n\t\t{\n\t\t\tif (!this.isSharingOn)\n\t\t\t{\n\t\t\t\tDom.addClass(this.previewBlockAnnotationLink, 'calendar-sharing-dialog-preview-block-annotation-link-disabled');\n\t\t\t}\n\n\t\t\tEvent.bind(this.previewBlockAnnotationLink, 'click', () => {\n\t\t\t\tthis.openNewTab();\n\t\t\t});\n\t\t}\n\n\t\treturn annotation\n\t}\n\n\tenableLinks()\n\t{\n\t\tthis.links?.forEach((link) => {\n\t\t\tlink.active = true;\n\t\t});\n\t}\n\n\topenNewTab()\n\t{\n\t\twindow.open(Text.encode(this.links[0].url), '_blank');\n\t}\n\n\ttoggle()\n\t{\n\t\tthis.popup.toggle();\n\t}\n}","import {Loc, Tag, Dom, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Util} from 'calendar.util';\nimport Dialog from './dialog';\nimport 'ui.switcher';\nimport 'spotlight';\n\nexport default class SharingButton\n{\n\tHELP_DESK_CODE = 17198666;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.wrap = options.wrap;\n\t\tthis.userId = options.userId;\n\n\t\tthis.subscribeToEvents();\n\t}\n\n\tsubscribeToEvents()\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\t'Calendar.Sharing.copyLinkButtonContainer:onMouseEnter',\n\t\t\t() => this.handleCopyLinkButtonContainerMouseEnter(),\n\t\t);\n\t\tEventEmitter.subscribe(\n\t\t\t'Calendar.Sharing.Dialog:onClose',\n\t\t\t() => this.handleSharingDialogClose(),\n\t\t);\n\t}\n\n\tshow()\n\t{\n\t\tthis.button = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('SHARING_BUTTON_TITLE'),\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.EXTRA_SMALL,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\tclassName: 'ui-btn-themes calendar-sharing__btn',\n\t\t\tonclick: (button, event) => {\n\t\t\t\tif (!this.switcher.getNode().contains(event.target) )\n\t\t\t\t{\n\t\t\t\t\tthis.handleSharingButtonClick();\n\t\t\t\t}\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\t'mouseenter': () => this.handleSharingButtonMouseEnter(),\n\t\t\t\t'mouseleave': () => this.handleSharingButtonMouseLeave(),\n\t\t\t},\n\t\t});\n\n\t\tthis.button.renderTo(this.wrap);\n\t\tthis.renderSwitcher();\n\t}\n\n\thandleCopyLinkButtonContainerMouseEnter()\n\t{\n\t\tif (!this.switcher?.disabled && !this.switcherSpotlight)\n\t\t{\n\t\t\tthis.showSwitcherSpotlight();\n\t\t}\n\t}\n\n\thandleSharingDialogClose()\n\t{\n\t\tthis.hideSwitcherSpotlight();\n\t}\n\n\tshowSwitcherSpotlight()\n\t{\n\t\tthis.switcherSpotlight = new BX.SpotLight({\n\t\t\ttargetElement: this.switcherWrap,\n\t\t\ttargetVertex: 'middle-center',\n\t\t\tleft: -17,\n\t\t\ttop: -5,\n\t\t\tlightMode: true,\n\t\t\tevents: {\n\t\t\t\t'onTargetEnter': () => {\n\t\t\t\t\tthis.hideSwitcherSpotlight()\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t\tthis.switcherSpotlight.show();\n\t}\n\n\thideSwitcherSpotlight()\n\t{\n\t\tif (this.switcherSpotlight)\n\t\t{\n\t\t\tthis.switcherSpotlight.close();\n\t\t\tthis.switcherSpotlight = null;\n\t\t}\n\t}\n\n\thandleSharingButtonClick()\n\t{\n\t\tthis.clearInfoPopupShowTimeOut();\n\t\tthis.getSharingDialog().toggle();\n\t}\n\n\thandleSharingButtonMouseEnter()\n\t{\n\t\tif (!this.sharingDialog?.isShown() && !this.switcher.isChecked())\n\t\t{\n\t\t\tthis.infoPopupShowTimeout = setTimeout(() => this.showInfoPopup(), 1000);\n\t\t}\n\t}\n\n\thandleSharingButtonMouseLeave()\n\t{\n\t\tthis.clearInfoPopupShowTimeOut();\n\t}\n\n\tclearInfoPopupShowTimeOut()\n\t{\n\t\tif (this.infoPopupShowTimeout)\n\t\t{\n\t\t\tclearTimeout(this.infoPopupShowTimeout);\n\t\t\tthis.infoPopupShowTimeout = null;\n\t\t}\n\t}\n\n\tshowInfoPopup()\n\t{\n\t\tif (this.sharingDialog?.isShown())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.infoPopup)\n\t\t{\n\t\t\tthis.infoPopup.destroy();\n\t\t}\n\n\t\tconst infoPopupWidth = 320;\n\t\tthis.infoPopup = new BX.Main.Popup({\n\t\t\tbindElement: this.button.getContainer(),\n\t\t\twidth: infoPopupWidth,\n\t\t\tpadding: 15,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontent: this.getInfoPopupContent(),\n\t\t\tangle: { offset: infoPopupWidth / 2 },\n\t\t\toffsetLeft: (this.button.getContainer().offsetWidth / 2) - infoPopupWidth / 2.5,\n\t\t});\n\n\t\tthis.infoPopup.show();\n\t}\n\n\tgetInfoPopupContent()\n\t{\n\t\tconst content = Tag.render`<div></div>`;\n\t\tconst mainContent1 = Tag.render`\n\t\t\t<div class=\"calendar-sharing__info-popup_main-content\">\n\t\t\t\t${Loc.getMessage('SHARING_INFO_POPUP_CONTENT_1')}\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(mainContent1, content);\n\t\tconst mainContent2 = Tag.render`\n\t\t\t<div class=\"calendar-sharing__info-popup_main-content\">\n\t\t\t\t${Loc.getMessage('SHARING_INFO_POPUP_CONTENT_2')}\n\t\t\t</div>\n\t\t`;\n\t\tDom.append(mainContent2, content);\n\t\tconst detailLink = Tag.render`\n\t\t\t<a class=\"calendar-sharing__info-popup_detail-link\">\n\t\t\t\t${Loc.getMessage('SHARING_DIALOG_MORE_DETAILED')}\n\t\t\t</a>\n\t\t`;\n\t\tEvent.bind(detailLink, 'click', () => this.handleDetailLinkClick())\n\t\tDom.append(detailLink, content);\n\n\t\treturn content;\n\t}\n\n\thandleDetailLinkClick()\n\t{\n\t\tthis.openHelpDesk();\n\t}\n\n\topenHelpDesk()\n\t{\n\t\ttop.BX.Helper.show('redirect=detail&code=' + this.HELP_DESK_CODE);\n\t}\n\n\tgetSharingDialog()\n\t{\n\t\tif (!this.sharingDialog)\n\t\t{\n\t\t\tthis.sharingDialog = new Dialog({\n\t\t\t\tbindElement: this.button.getContainer(),\n\t\t\t\tuserId: this.userId,\n\t\t\t\tisSwitchCheckedOnStart: this.switcher.isChecked(),\n\t\t\t\tswitcherNode: this.switcher.getNode(),\n\t\t\t});\n\t\t}\n\n\t\treturn this.sharingDialog;\n\t}\n\n\tgetSwitcherContainer()\n\t{\n\t\tconst switcherContainer = Tag.render`\n\t\t\t<div class=\"calendar-sharing__switcher\">\n\t\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\treturn switcherContainer;\n\t}\n\n\tgetSwitcherDivider()\n\t{\n\t\tconst switcherDivider = Tag.render`\n\t\t\t<div class=\"calendar-sharing__switcher_divider\"></div>\n\t\t`;\n\n\t\treturn switcherDivider;\n\t}\n\n\trenderSwitcher()\n\t{\n\t\tDom.append(this.getSwitcherDivider(), this.button.button);\n\t\tthis.switcherWrap = Tag.render`<div class=\"calendar-sharing__switcher-wrap\"></div>`;\n\t\tDom.append(this.switcherWrap, this.button.button);\n\t\tEvent.bind(this.switcherWrap, 'click', this.handleSwitcherWrapClick.bind(this), {capture: true});\n\n\t\tthis.switcher = new BX.UI.Switcher({\n\t\t\tnode: this.getSwitcherContainer(),\n\t\t\tchecked: Util.getSharingConfig()?.isEnabled === 'true',\n\t\t\tcolor: 'green',\n\t\t\tsize: 'small',\n\t\t\thandlers: {\n\t\t\t\ttoggled: () => this.handleSwitcherToggled(),\n\t\t\t},\n\t\t});\n\n\t\tthis.switcher.renderTo(this.switcherWrap);\n\t}\n\n\thandleSwitcherWrapClick(event)\n\t{\n\t\tif (this.switcher.isChecked())\n\t\t{\n\t\t\tthis.showWarningPopup();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tshowWarningPopup()\n\t{\n\t\tif (!this.warningPopup)\n\t\t{\n\t\t\tthis.warningPopup = new BX.UI.Dialogs.MessageBox({\n\t\t\t\ttitle: Loc.getMessage('SHARING_WARNING_POPUP_TITLE'),\n\t\t\t\tmessage: Loc.getMessage('SHARING_WARNING_POPUP_CONTENT'),\n\t\t\t\tbuttons: this.getWarningPopupButtons(),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tdraggable: true,\n\t\t\t\t\tcloseIcon: true,\n\t\t\t\t\tminWidth: 365,\n\t\t\t\t\tmaxWidth: 365,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.warningPopup.show();\n\t}\n\n\tgetWarningPopupButtons()\n\t{\n\t\treturn [this.getSubmitButton(), this.getCancelButton()]\n\t}\n\n\tgetSubmitButton()\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.DANGER,\n\t\t\ttext: Loc.getMessage('SHARING_WARNING_POPUP_SUBMIT_BUTTON'),\n\t\t\tevents: {\n\t\t\t\tclick: () => this.handleSubmitButtonClick(),\n\t\t\t}\n\t\t});\n\t}\n\n\tgetCancelButton()\n\t{\n\t\treturn new BX.UI.Button({\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\ttext: Loc.getMessage('SHARING_WARNING_POPUP_CANCEL_BUTTON'),\n\t\t\tevents: {\n\t\t\t\tclick: () => this.handleCancelButtonClick(),\n\t\t\t}\n\t\t});\n\t}\n\n\thandleSubmitButtonClick()\n\t{\n\t\tthis.switcher.toggle();\n\t\tthis.warningPopup.close();\n\t}\n\n\thandleCancelButtonClick()\n\t{\n\t\tthis.warningPopup.close();\n\t}\n\n\thandleSwitcherToggled()\n\t{\n\t\tif (this.switcher.isChecked())\n\t\t{\n\t\t\tconst sharingDialog = this.getSharingDialog();\n\t\t\tif(!sharingDialog.isShown())\n\t\t\t{\n\t\t\t\tsharingDialog.toggle();\n\t\t\t}\n\t\t\tsharingDialog.enableLinks();\n\n\t\t\tEventEmitter.emit('Calendar.Sharing.copyLinkButton:onSwitchToggled', this.switcher.isChecked());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.ajax.runAction('calendar.api.sharingajax.deleteUserLinks');\n\t\t\tthis.getSharingDialog().destroy();\n\t\t\tthis.sharingDialog = null;\n\t\t\tthis.warningPopup.close();\n\t\t}\n\t\tBX.userOptions.save('calendar', 'sharing', 'isEnabled', this.switcher.isChecked());\n\t}\n}","import SharingButton from './controls/sharingbutton';\n\nexport default class Interface\n{\n\tconstructor(options)\n\t{\n\t\tthis.buttonWrap = options.buttonWrap;\n\t\tthis.userId = options.userId;\n\t}\n\n\tshowSharingButton()\n\t{\n\t\tthis.sharingButton = new SharingButton({\n\t\t\twrap: this.buttonWrap,\n\t\t\tuserId: this.userId,\n\t\t});\n\t\tthis.sharingButton.show();\n\t}\n}"],"names":["Checkbox","constructor","options","link","checked","active","create","container","createContainer","checkbox","createCheckbox","Event","bind","saveCheckBoxState","Dom","append","Tag","render","BX","ajax","runAction","data","userLinkId","id","isActive","getContainer","renderTo","node","Type","isDomNode","appendChild","Dialog","POPUP_WIDTH","zIndex","QRCODE_SIZE","QRCODE_COLOR_LIGHT","QRCODE_COLOR_DARK","bindElement","userId","isSharingOn","isSwitchCheckedOnStart","switcherNode","popup","Main","Popup","minHeight","width","autoHide","autoHideHandler","event","dialogPopupAutoHideHandler","closeByEsc","angle","offset","offsetLeft","offsetWidth","events","onFirstShow","onClose","createLoader","show","contains","target","getPopupContainer","getPopup","getLoader","loader","isShown","destroy","Loader","getContentContainer","size","loadDialogData","initQrCode","setContent","createDialogContent","onAfterDialogContentCreated","hide","EventEmitter","emit","response","links","Runtime","loadExtension","subscribeToEvents","style","copyLinkButtonContainer","firstChild","subscribe","copyLinkButton","setDisabled","previewBlockQr","removeClass","previewBlockAnnotationLink","forEach","linkInputNode","linkContainerNode","attr","url","getDialogContent","dialogContent","createContentWrap","createSharingBlock","createPreviewBlock","contentWrap","sharingBlock","createBlock","createSharingBlockTitle","createSharingBlockLinks","sharingBlockTitle","Loc","getMessage","createSharingHint","UI","Hint","createNode","references","createSharingBlockLink","referenceBlock","linkContainer","linkInput","Text","encode","serverPath","addClass","value","length","createCopyLinkButtonContainer","createCopyLinkButton","handleCopyLinkButtonContainerMouseEnter","handleCopyLinkButtonContainerMouseLeave","disabled","showDisabledCopyLinkButtonInfoPopup","disabledCopyLinkButtonPopup","createDisabledCopyLinkButtonInfoPopup","hideDisabledCopyLinkButtonInfoPopup","close","disabledCopyLinkButtonInfoPopupWidth","className","content","darkMode","position","cacheable","Button","text","round","icon","Icon","COPY","Size","EXTRA_SMALL","color","Color","SUCCESS","onclick","button","handleCopyLinkButtonClick","copyResult","copyLink","onSuccessfulCopyingLink","clipboard","copy","makeLinkText","Util","showNotification","setText","setIcon","DONE","copyLinkButtonTimeoutId","clearTimeout","setTimeout","previewBlock","createPreviewBlockQr","createPreviewBlockAnnotation","QRCode","height","colorDark","colorLight","correctLevel","CorrectLevel","H","previewBlockAnnotation","createPreviewBlockAnnotationItem","annotation","linkPhrase","blockContent","querySelector","openNewTab","enableLinks","window","open","toggle","SharingButton","HELP_DESK_CODE","wrap","handleSharingDialogClose","LIGHT_BORDER","switcher","getNode","handleSharingButtonClick","handleSharingButtonMouseEnter","handleSharingButtonMouseLeave","renderSwitcher","switcherSpotlight","showSwitcherSpotlight","hideSwitcherSpotlight","SpotLight","targetElement","switcherWrap","targetVertex","left","top","lightMode","clearInfoPopupShowTimeOut","getSharingDialog","sharingDialog","isChecked","infoPopupShowTimeout","showInfoPopup","infoPopup","infoPopupWidth","padding","closeIcon","getInfoPopupContent","mainContent1","mainContent2","detailLink","handleDetailLinkClick","openHelpDesk","Helper","getSwitcherContainer","switcherContainer","getSwitcherDivider","switcherDivider","handleSwitcherWrapClick","capture","Switcher","getSharingConfig","isEnabled","handlers","toggled","handleSwitcherToggled","showWarningPopup","stopPropagation","warningPopup","Dialogs","MessageBox","title","message","buttons","getWarningPopupButtons","popupOptions","draggable","minWidth","maxWidth","getSubmitButton","getCancelButton","MEDIUM","DANGER","click","handleSubmitButtonClick","handleCancelButtonClick","userOptions","save","Interface","buttonWrap","showSharingButton","sharingButton"],"mappings":"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"}