{"version":3,"file":"deletedviewform.bundle.js","sources":["../src/template.js","../src/deletedviewform.js"],"sourcesContent":["import { EventInfo } from \"calendar.sharing.publicevent\";\n\nexport const DeletedViewFormTemplate = {\n\tprops: {\n\t\teventInfo: Object,\n\t\thostName: String,\n\t},\n\tcomponents: {\n\t\tEventInfo,\n\t},\n\ttemplate: `\n\t\t<div class=\"calendar-shared-event-container calendar-sharing--subtract calendar-sharing--error\">\n\t\t\t<div class=\"calendar-shared-event_icon\"></div>\n\t\t\t<div class=\"calendar-shared-event_deleted-title\">{{ $Bitrix.Loc.getMessage('CALENDAR_SHARING_EVENT_IS_DELETED') }}</div>\n\t\t\t<EventInfo\n\t\t\t\t:event-info=\"eventInfo\"\n\t\t\t\t:current-meeting-status=\"'N'\"\n\t\t\t\t:is-deleted=\"true\"\n\t\t\t\t:show-host=\"true\"\n\t\t\t/>\n\t\t</div>\n\t`\n};","import { BitrixVue } from 'ui.vue3';\nimport { DeletedViewFormTemplate } from './template';\nimport { Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport './css/deletedviewform.css';\n\nexport class DeletedViewForm\n{\n\tconstructor(entryId)\n\t{\n\t\tthis.entryId = entryId;\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.createContent(slider).then((html) => {\n\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t{\n\t\t\t\tpromiseResolve(html);\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.sharingajax.getDeletedSharedEvent', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: parseInt(this.entryId),\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tconst entry = response.data.entry;\n\t\t\t\tconst userTimezone = response.data.userTimezone;\n\n\t\t\t\tconst deletedViewSliderRoot = document.createElement('div');\n\t\t\t\tdeletedViewSliderRoot.className = 'calendar-sharing--bg-red calendar-shared-event-deleted-view-slider-root';\n\t\t\t\tBitrixVue.createApp(DeletedViewFormTemplate, {\n\t\t\t\t\teventInfo: {\n\t\t\t\t\t\tdateFrom: Util.getTimezoneDateFromTimestampUTC(parseInt(entry.timestampFromUTC) * 1000, userTimezone),\n\t\t\t\t\t\tdateTo: Util.getTimezoneDateFromTimestampUTC(parseInt(entry.timestampToUTC) * 1000, userTimezone),\n\t\t\t\t\t\ttimezone: Util.getFormattedTimezone(userTimezone),\n\t\t\t\t\t\tname: entry.NAME,\n\t\t\t\t\t\thostName: entry.HOST_NAME,\n\t\t\t\t\t\thostId: entry.MEETING_HOST,\n\t\t\t\t\t},\n\t\t\t\t}).mount(deletedViewSliderRoot);\n\t\t\t\tslider.sliderContent = deletedViewSliderRoot;\n\n\t\t\t\tresolve(deletedViewSliderRoot);\n\t\t\t})\n\t\t});\n\t}\n}"],"names":["DeletedViewFormTemplate","props","eventInfo","Object","hostName","String","components","EventInfo","template","DeletedViewForm","constructor","entryId","initInSlider","slider","promiseResolve","createContent","then","html","Type","isFunction","Promise","resolve","BX","ajax","runAction","data","parseInt","response","entry","userTimezone","deletedViewSliderRoot","document","createElement","className","BitrixVue","createApp","dateFrom","Util","getTimezoneDateFromTimestampUTC","timestampFromUTC","dateTo","timestampToUTC","timezone","getFormattedTimezone","name","NAME","HOST_NAME","hostId","MEETING_HOST","mount","sliderContent"],"mappings":";;;;;CAEO,MAAMA,uBAAuB,GAAG;GACtCC,KAAK,EAAE;KACNC,SAAS,EAAEC,MADL;KAENC,QAAQ,EAAEC;IAH2B;GAKtCC,UAAU,EAAE;gBACXC;IANqC;GAQtCC,QAAQ,EAAG;;;;;;;;;;;;CAR2B,CAAhC;;CCIA,MAAMC,eAAN,CACP;GACCC,WAAW,CAACC,OAAD,EACX;KACC,KAAKA,OAAL,GAAeA,OAAf;;;GAGDC,YAAY,CAACC,MAAD,EAASC,cAAT,EACZ;KACC,KAAKC,aAAL,CAAmBF,MAAnB,EAA2BG,IAA3B,CAAiCC,IAAD,IAAU;OACzC,IAAIC,cAAI,CAACC,UAAL,CAAgBL,cAAhB,CAAJ,EACA;SACCA,cAAc,CAACG,IAAD,CAAd;;MAHF;;;GAQDF,aAAa,CAACF,MAAD,EACb;KACC,OAAO,IAAIO,OAAJ,CAAaC,OAAD,IAAa;OAC/BC,EAAE,CAACC,IAAH,CAAQC,SAAR,CAAkB,gDAAlB,EAAoE;SACnEC,IAAI,EAAE;WACLd,OAAO,EAAEe,QAAQ,CAAC,KAAKf,OAAN;;QAFnB,EAIGK,IAJH,CAIQW,QAAQ,IAAI;SACnB,MAAMC,KAAK,GAAGD,QAAQ,CAACF,IAAT,CAAcG,KAA5B;SACA,MAAMC,YAAY,GAAGF,QAAQ,CAACF,IAAT,CAAcI,YAAnC;SAEA,MAAMC,qBAAqB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAA9B;SACAF,qBAAqB,CAACG,SAAtB,GAAkC,yEAAlC;SACAC,iBAAS,CAACC,SAAV,CAAoBnC,uBAApB,EAA6C;WAC5CE,SAAS,EAAE;aACVkC,QAAQ,EAAEC,kBAAI,CAACC,+BAAL,CAAqCZ,QAAQ,CAACE,KAAK,CAACW,gBAAP,CAAR,GAAmC,IAAxE,EAA8EV,YAA9E,CADA;aAEVW,MAAM,EAAEH,kBAAI,CAACC,+BAAL,CAAqCZ,QAAQ,CAACE,KAAK,CAACa,cAAP,CAAR,GAAiC,IAAtE,EAA4EZ,YAA5E,CAFE;aAGVa,QAAQ,EAAEL,kBAAI,CAACM,oBAAL,CAA0Bd,YAA1B,CAHA;aAIVe,IAAI,EAAEhB,KAAK,CAACiB,IAJF;aAKVzC,QAAQ,EAAEwB,KAAK,CAACkB,SALN;aAMVC,MAAM,EAAEnB,KAAK,CAACoB;;UAPhB,EASGC,KATH,CASSnB,qBATT;SAUAjB,MAAM,CAACqC,aAAP,GAAuBpB,qBAAvB;SAEAT,OAAO,CAACS,qBAAD,CAAP;QAtBD;MADM,CAAP;;;CAlBF;;;;;;;;"}