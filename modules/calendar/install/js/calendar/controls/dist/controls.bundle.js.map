{"version":3,"file":"controls.bundle.js","sources":["../src/timeselector.js","../src/reminder.js","../src/location.js","../src/userselector.js","../src/colorselector.js","../src/sectionselector.js","../src/repeatselector.js","../src/selectinput.js","../src/popupdialog.js","../src/viewselector.js","../src/lineviewselector.js","../src/addbutton.js","../src/meetingstatuscontrol.js","../src/confirmstatusdialog.js","../src/confirmeditdialog.js","../src/confirmdeletedialog.js","../src/datetimecontrol.js","../src/busyusersdialog.js","../src/userplannerselector.js","../src/reinviteuserdialog.js","../src/emailselectorcontrol.js","../src/confirmedemaildialog.js","../src/emaillimitationdialog.js"],"sourcesContent":["import {Util} from \"calendar.util\";\nimport {Type} from 'main.core';\n\nexport class TimeSelector {\n\tZ_INDEX = 4000;\n\tMIN_WIDTH = 102;\n\tstatic valueList = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap,\n\t\t\tinput: params.input\n\t\t};\n\n\t\tthis.onChangeCallback = Type.isFunction(params.onChangeCallback) ? params.onChangeCallback : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\tvalues: TimeSelector.getValueList(),\n\t\t\tminWidth: this.MIN_WIDTH,\n\t\t\tonChangeCallback: () => {\n\t\t\t\tif (this.onChangeCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.onChangeCallback(this.selectContol.getInputValue());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic adaptTimeValue(timeValue)\n\t{\n\t\ttimeValue = parseInt(timeValue.h * 60) + parseInt(timeValue.m);\n\t\tlet\n\t\t\ttimeList = TimeSelector.getValueList(),\n\t\t\tdiff = 24 * 60,\n\t\t\tind = false,\n\t\t\ti;\n\n\t\tfor (i = 0; i < timeList.length; i++)\n\t\t{\n\t\t\tif (Math.abs(timeList[i].value - timeValue) < diff)\n\t\t\t{\n\t\t\t\tdiff = Math.abs(timeList[i].value - timeValue);\n\t\t\t\tind = i;\n\t\t\t\tif (diff <= 15)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn timeList[ind || 0];\n\t}\n\n\tstatic getValueList()\n\t{\n\t\tif (!TimeSelector.valueList)\n\t\t{\n\t\t\tTimeSelector.valueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tTimeSelector.valueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tTimeSelector.valueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t}\n\t\t}\n\t\treturn TimeSelector.valueList;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tlet time;\n\t\tif (Type.isDate(value))\n\t\t{\n\t\t\ttime = {\n\t\t\t\th: value.getHours(),\n\t\t\t\tm: value.getMinutes()\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttime = Util.parseTime(value);\n\t\t}\n\n\t\tconst adaptedValue = TimeSelector.adaptTimeValue(time);\n\n\t\tthis.selectContol.setValue({value: adaptedValue.value});\n\n\t\tlet hour = Math.floor(adaptedValue.value / 60);\n\t\tlet min = (adaptedValue.value) - hour * 60;\n\n\t\tthis.DOM.input.value = Util.formatTime(hour, min);\n\t}\n}","import {Loc, Type, Dom, Tag, Event} from \"main.core\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {MenuManager, Popup} from 'main.popup';\nimport {Util} from \"calendar.util\";\n\nexport class Reminder extends EventEmitter\n{\n\tstatic timeValueList = null;\n\tdefaultReminderTime = 540; // 9.00\n\tfullDayMode = false;\n\textendedMode = true;\n\tselectedValues = [];\n\tcontrolList = {};\n\tviewMode = false;\n\tDOM = {};\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Calendar.Controls.Reminder');\n\t\tthis.values = this.getValues();\n\n\t\tthis.id = params.id || 'reminder-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.rawValuesMap = new Map();\n\n\t\tthis.viewMode = params.viewMode === true;\n\t\tthis.changeCallack = params.changeCallack;\n\t\tthis.showPopupCallBack = params.showPopupCallBack;\n\t\tthis.hidePopupCallBack = params.hidePopupCallBack;\n\n\t\tthis.create(params);\n\t\tthis.setValue(params.selectedValues || []);\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcreate(params)\n\t{\n\t\tif (Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\n\t\tif (!Type.isElementNode(this.DOM.wrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.DOM.wrap, 'calendar-notification-values');\n\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.DOM.addButton = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-notification-add-btn-wrap\">\n\t\t\t\t\t<span class=\"calendar-notification-text\">${Loc.getMessage('EC_REMIND1_ADD')}</span>\n\t\t\t\t\t<span class=\"calendar-notification-btn-container calendar-notification-btn-add\">\n\t\t\t\t\t\t<span class=\"calendar-notification-icon\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\t\t}\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (Type.isDomNode(this.DOM.addButton))\n\t\t{\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showPopup.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.wrap))\n\t\t{\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleClick.bind(this));\n\t\t}\n\t}\n\n\tgetValues()\n\t{\n\t\tlet values = [];\n\n\t\tif (!this.fullDayMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{value: 0, label: Loc.getMessage(\"EC_REMIND1_0\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_0\")},\n\t\t\t\t{value: 5, label: Loc.getMessage(\"EC_REMIND1_5\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_5\")},\n\t\t\t\t{value: 10, label: Loc.getMessage(\"EC_REMIND1_10\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_10\")},\n\t\t\t\t{value: 15, label: Loc.getMessage(\"EC_REMIND1_15\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_15\")},\n\t\t\t\t{value: 20, label: Loc.getMessage(\"EC_REMIND1_20\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_20\")},\n\t\t\t\t{value: 30, label: Loc.getMessage(\"EC_REMIND1_30\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_30\")},\n\t\t\t\t{value: 60, label: Loc.getMessage(\"EC_REMIND1_60\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_60\")},\n\t\t\t\t{value: 120, label: Loc.getMessage(\"EC_REMIND1_120\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_120\")}\n\t\t\t\t//{value: 1440, label: Loc.getMessage(\"EC_REMIND1_1440\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_1440\")},\n\t\t\t\t//{value: 2880, label: Loc.getMessage(\"EC_REMIND1_2880\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_2880\")}\n\t\t\t]);\n\t\t}\n\n\t\tif (this.extendedMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-0',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_0\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 0,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-1',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_1\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 1,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-2',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_2\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 2,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'custom',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_CUSTOM\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'custom'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tsetValue(reminderList, emitChanges = true)\n\t{\n\t\tif (Type.isArray(reminderList))\n\t\t{\n\t\t\treminderList.forEach((value) => {this.addValue(value, emitChanges)}, this);\n\t\t}\n\t}\n\n\tgetSelectedValues()\n\t{\n\t\treturn this.selectedValues;\n\t}\n\n\tgetSelectedRawValues()\n\t{\n\t\tlet selectedRawValues = [];\n\t\tthis.selectedValues.forEach((value) => {\n\n\t\t\tselectedRawValues.push(this.rawValuesMap.get(value) || value);\n\t\t});\n\t\treturn selectedRawValues;\n\t}\n\n\tsetFullDayMode(fullDayMode)\n\t{\n\t\tif (fullDayMode !== this.fullDayMode)\n\t\t{\n\t\t\tthis.fullDayMode = fullDayMode;\n\t\t\tthis.values = this.getValues();\n\t\t}\n\t}\n\n\tshowPopup()\n\t{\n\t\tlet\n\t\t\t_this = this,\n\t\t\tmenuItems = [];\n\n\t\tthis.values.forEach((item) => {\n\t\t\tif (item.mode === 'time-menu'\n\t\t\t\t|| item.mode === 'custom'\n\t\t\t\t|| !BX.util.in_array(item.value, this.selectedValues))\n\t\t\t{\n\t\t\t\tlet menuItem = {};\n\n\t\t\t\tif (item.dataset && item.dataset.mode === 'time-menu')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = item.id;\n\t\t\t\t\tlet defaultReminderTime = Util.getTimeByInt(this.defaultReminderTime);\n\n\t\t\t\t\tmenuItem.text = item.label.replace('#TIME#', Util.formatTime(defaultReminderTime.hour, defaultReminderTime.min));\n\n\t\t\t\t\tmenuItem.dataset = BX.util.objectMerge({\n\t\t\t\t\t\ttype: 'submenu-list',\n\t\t\t\t\t\tvalue: this.defaultReminderTime\n\t\t\t\t\t}, item.dataset);\n\n\t\t\t\t\tmenuItem.items = this.getSubmenuTimeValues(menuItem, item.label);\n\n\t\t\t\t\tmenuItem.onclick = (function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.addValue({\n\t\t\t\t\t\t\t\tbefore: item.dataset.daysBefore,\n\t\t\t\t\t\t\t\ttime: item.dataset.time\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.defer(function(){_this.reminderMenu.close();}, _this)();\n\t\t\t\t\t\t}\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t\telse if (item.dataset && item.dataset.mode === 'custom')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = 'custom';\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.items = [{id: 'tmp', text: 'tmp'}];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.onclick = (function (value, mode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t_this.addValue(value);\n\t\t\t\t\t\t\t_this.reminderMenu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t})(item.value, item.mode);\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push(menuItem);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.reminderMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.addButton,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tlet adjustSubmenuPopup = this.adjustSubmenuPopup.bind(this);\n\t\tlet closeSubmenuPopup = this.closeSubmenuPopup.bind(this);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\n\t\tthis.reminderMenu.popupWindow.subscribe('onClose', () => {\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\t\t});\n\t\tthis.reminderMenu.show();\n\t}\n\n\tgetSubmenuTimeValues(parentItem, parentItemMessage)\n\t{\n\t\tlet menuItems = [];\n\t\tReminder.getTimeValueList(60).forEach(function(menuItem)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\tid: 'time-' + menuItem.value,\n\t\t\t\tdataset: {\n\t\t\t\t\tvalue: menuItem.value,\n\t\t\t\t\tdaysBefore: parentItem.dataset.daysBefore\n\t\t\t\t},\n\t\t\t\ttext: menuItem.label,\n\t\t\t\tonclick: function(e, item)\n\t\t\t\t{\n\t\t\t\t\tlet time = Util.getTimeByInt(item.dataset.value);\n\t\t\t\t\tlet parentMenuItem = this.reminderMenu.getMenuItem(parentItem.id);\n\t\t\t\t\tif (parentMenuItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tparentMenuItem.setText(parentItemMessage.replace('#TIME#', Util.formatTime(time.hour, time.min)));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addValue({\n\t\t\t\t\t\ttime: item.dataset.value,\n\t\t\t\t\t\tbefore: item.dataset.daysBefore\n\t\t\t\t\t});\n\n\t\t\t\t\tBX.defer(function(){this.reminderMenu.close();}, this)();\n\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}, this);\n\t\treturn menuItems;\n\t}\n\n\taddValue(value, emitChanges = true)\n\t{\n\t\tlet\n\t\t\ti, item,\n\t\t\tformattedValue = Reminder.formatValue(value);\n\n\t\tif (Type.isPlainObject(value) && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${Reminder.getReminderLabel(value)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.type === 'date' && Type.isDate(value.value))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`<span class=\"calendar-reminder-item\">\n\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t${Util.formatDateUsable(value.value) + ' ' + Util.formatTime(value.value)}\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\tthis.controlList[formattedValue] = item;\n\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t}\n\t\telse if (value >= 0 && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tfor (i = 0; i < this.values.length; i++)\n\t\t\t{\n\t\t\t\tif (this.values[i].value === value)\n\t\t\t\t{\n\t\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${this.values[i].shortLabel || this.values[i].label}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\t\tif (!this.viewMode)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\t\t\tthis.controlList[formattedValue] = item;\n\t\t\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item === undefined)\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-reminder-item'},\n\t\t\t\t\ttext: Reminder.getText(value)\n\t\t\t\t}));\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Dom.create('SPAN', {\n\t\t\t\t\t\tprops: {className: 'calendar-reminder-clear-icon'},\n\t\t\t\t\t\tevents: {click: function(){this.removeValue(value);}.bind(this)}\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tthis.selectedValues.push(value);\n\t\t\t\tthis.controlList[value] = item;\n\t\t\t\tthis.rawValuesMap.set(value, value);\n\t\t\t}\n\t\t}\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t\t}\n\n\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t{\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButton);\n\t\t}\n\t}\n\n\tstatic getText(value)\n\t{\n\t\tlet\n\t\t\ttempValue = value,\n\t\t\tdividers = [60, 24], //list of time dividers\n\t\t\tmessageCodes = ['EC_REMIND1_MIN_COUNT', 'EC_REMIND1_HOUR_COUNT', 'EC_REMIND1_DAY_COUNT'],\n\t\t\tresult = '';\n\n\t\tfor (let i = 0; i < messageCodes.length; i++)\n\t\t{\n\t\t\tif (tempValue < dividers[i] || i === dividers.length)\n\t\t\t{\n\t\t\t\tresult = Loc.getMessage(messageCodes[i]).toString();\n\t\t\t\tresult = result.replace('\\#COUNT\\#', tempValue.toString());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttempValue = Math.ceil(tempValue / dividers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tremoveValue(value)\n\t{\n\t\tif (this.controlList[value] && Type.isDomNode(this.controlList[value]))\n\t\t{\n\t\t\tDom.remove(this.controlList[value]);\n\t\t}\n\t\tthis.selectedValues = BX.util.deleteFromArray(this.selectedValues, BX.util.array_search(value, this.selectedValues));\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t}\n\n\tstatic getTimeValueList(mode = 30)\n\t{\n\t\tif (!Reminder.timeValueList)\n\t\t{\n\t\t\tReminder.timeValueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tReminder.timeValueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tif (mode <= 30)\n\t\t\t\t{\n\t\t\t\t\tReminder.timeValueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Reminder.timeValueList;\n\t}\n\n\tstatic formatValue(remindValue)\n\t{\n\t\tif (Type.isPlainObject(remindValue) && Type.isInteger(remindValue.before) && Type.isInteger(remindValue.time))\n\t\t{\n\t\t\treturn 'daybefore|' + remindValue.before + '|' + remindValue.time;\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && Type.isDate(remindValue.value))\n\t\t{\n\t\t\treturn 'date|' + Util.formatDateTime(remindValue.value);\n\t\t}\n\t\treturn remindValue.toString();\n\t}\n\n\thandleClick(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tlet remValue = target.getAttribute('data-bxc-value');\n\n\t\tif (this.selectedValues.includes(remValue))\n\t\t{\n\t\t\tthis.removeValue(remValue);\n\t\t}\n\t}\n\n\tstatic showCustomInputCalendar(e, input)\n\t{\n\t\tif (!Type.isDomNode(input) && e)\n\t\t{\n\t\t\tinput = e.target || e.srcElement;\n\t\t}\n\n\t\tif (Type.isDomNode(input) && input.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tBX.calendar({\n\t\t\t\tnode: input.parentNode,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tlet calendarPopup = BX.calendar.get().popup;\n\t\t\tif (calendarPopup)\n\t\t\t{\n\t\t\t\t// Apply hack for calendar z-index\n\t\t\t\tcalendarPopup.params.zIndex = 4200;\n\t\t\t\tcalendarPopup.popupContainer.style.zIndex = calendarPopup.params.zIndex;\n\t\t\t\tBX.removeCustomEvent(calendarPopup, 'onPopupClose', Reminder.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(calendarPopup, 'onPopupClose', Reminder.inputCalendarClosePopupHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\tstatic getReminderLabel(value)\n\t{\n\t\tlet label = '';\n\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time) && [0, 1, 2].includes(value.before))\n\t\t{\n\t\t\tlet time = Util.getTimeByInt(value.time);\n\n\t\t\tlabel = Loc.getMessage('EC_REMIND1_DAY_' + value.before + '_SHORT').replace('#TIME#', Util.formatTime(time.hour, time.min))\n\t\t}\n\t\treturn label;\n\t}\n\n\t// Used to scroll into view and highlight default item in time menu\n\tadjustSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustTimeSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustCalendarSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tlet layout = submenuPopup.bindElement;\n\t\t\t\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\n\t\t\t\t\tif (Type.isDomNode(textNode))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.clean(textNode);\n\t\t\t\t\t\ttextNode.innerHTML = Loc.getMessage(\"EC_REMIND1_CUSTOM\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustTimeSubmenuPopup(popup)\n\t{\n\t\tlet selectedMenuItem = popup.getContentContainer().querySelector('span[data-value=\"' + this.defaultReminderTime + '\"]');\n\t\tif (Type.isDomNode(selectedMenuItem))\n\t\t{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tpopup.getContentContainer().scrollTop = parseInt(selectedMenuItem.offsetTop) - 10;\n\t\t\t\tDom.addClass(selectedMenuItem, 'menu-popup-item-open');\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tadjustCalendarSubmenuPopup(popup)\n\t{\n\t\tlet layout = popup.bindElement;\n\n\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\t\tif (Type.isDomNode(textNode))\n\t\t{\n\t\t\tDom.clean(textNode);\n\t\t\tlet input = textNode.appendChild(Tag.render`<input id=\"inp-${Math.round(Math.random() * 100000)}\" type=\"text\" class=\"calendar-field calendar-field-datetime\" value=\"\" autocomplete=\"off\" placeholder=\"${Loc.getMessage('EC_REMIND1_CUSTOM_PLACEHOLDER')}\"/>`);\n\n\t\t\tlet calendarControl = BX.calendar.get();\n\n\t\t\t// Hacks for BX.calendar - it works as singleton and has troubles with using inside menupopups\n\t\t\t// We trying to reinitialize it everytime\n\t\t\tcalendarControl.popup = null;\n\t\t\tcalendarControl._current_layer = null;\n\t\t\tcalendarControl._layers = {};\n\n\t\t\tcalendarControl.Show({\n\t\t\t\tnode: input,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\n\t\t\tlet calendarPopup = calendarControl.popup;\n\t\t\tcalendarPopup.cacheable = false;\n\t\t\tif (calendarPopup && calendarPopup.popupContainer)\n\t\t\t{\n\t\t\t\tlet calendarWrap = calendarPopup.popupContainer.querySelector('.bx-calendar');\n\t\t\t\tif (Type.isDomNode(calendarWrap))\n\t\t\t\t{\n\t\t\t\t\tpopup.contentContainer.appendChild(calendarWrap);\n\t\t\t\t}\n\t\t\t\tcalendarPopup.close();\n\t\t\t\tMenuManager.destroy(calendarPopup.uniquePopupId);\n\t\t\t}\n\n\t\t\tEvent.bind(input, 'change', () => {\n\t\t\t\tlet\n\t\t\t\t\tvalue = input.value,\n\t\t\t\t\tdateValue = Util.parseDate(value);\n\n\t\t\t\tif (Type.isDate(dateValue))\n\t\t\t\t{\n\t\t\t\t\tthis.addValue({type: 'date', value: dateValue});\n\t\t\t\t\tthis.reminderMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t\t{\n\t\t\t\tthis.DOM.addButton.style.display = 'none';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t}\n\t}\n}\n","import {Tag, Type, Loc, Dom, Event, Text} from 'main.core';\n\nexport class Location\n{\n\tstatic locationList = [];\n\tstatic meetingRoomList = [];\n\n\tconstructor(params)\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'location-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrap\n\t\t};\n\n\t\tthis.disabled = !params.richLocationEnabled;\n\t\tthis.value = {type: '', text: '', value: ''};\n\t\tthis.inlineEditModeEnabled = params.inlineEditModeEnabled;\n\n\t\tthis.meetingRooms = params.iblockMeetingRoomList || [];\n\t\tLocation.setMeetingRoomList(params.iblockMeetingRoomList);\n\t\tLocation.setLocationList(params.locationList);\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.inputWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tthis.DOM.inlineEditLinkWrap = this.DOM.wrapNode.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-field-place-link\">${this.DOM.inlineEditLink = Tag.render`\n\t\t\t\t\t<span class=\"calendar-text-link\">${Loc.getMessage('EC_REMIND1_ADD')}</span>`}\n\t\t\t\t</div>`);\n\t\t\tthis.DOM.inputWrap.style.display = 'none';\n\t\t\tEvent.bind(this.DOM.inlineEditLinkWrap, 'click', this.displayInlineEditControls.bind(this));\n\t\t}\n\n\t\tif (this.disabled)\n\t\t{\n\t\t\tBX.addClass(this.DOM.wrapNode, 'locked');\n\t\t\tthis.DOM.inputWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-lock-icon'},\n\t\t\tevents: {\n\t\t\t\tclick: () => {\n\t\t\t\t\tB24.licenseInfoPopup.show('calendar_location', Loc.getMessage('EC_B24_LOCATION_LIMITATION_TITLE'), Loc.getMessage('EC_B24_LOCATION_LIMITATION'));\n\t\t\t\t}\n\t\t\t}\n\t\t\t}))\n\t\t}\n\n\t\tthis.DOM.input = this.DOM.inputWrap.appendChild(Dom.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tname: this.params.inputName || '',\n\t\t\t\tplaceholder: Loc.getMessage('EC_LOCATION_LABEL'),\n\t\t\t\ttype: 'text',\n\t\t\t\tautocomplete: this.disabled ? 'on' : 'off'\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'calendar-field calendar-field-select'\n\t\t\t}\n\t\t}));\n\t}\n\n\tsetValues()\n\t{\n\t\tlet\n\t\t\tmenuItemList = [],\n\t\t\tselectedIndex = false,\n\t\t\tmeetingRooms = Location.getMeetingRoomList(),\n\t\t\tlocationList = Location.getLocationList();\n\n\t\tif (Type.isArray(meetingRooms))\n\t\t{\n\t\t\tmeetingRooms.forEach(function(room)\n\t\t\t{\n\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tID: room.ID,\n\t\t\t\t\tlabel: BX.util.htmlspecialchars(room.NAME),\n\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\ttype: 'mr'\n\t\t\t\t});\n\n\t\t\t\tif (this.value.type === 'mr'\n\t\t\t\t\t&& parseInt(this.value.value) === room.ID)\n\t\t\t\t{\n\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (menuItemList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tif (locationList.length)\n\t\t\t{\n\t\t\t\tlocationList.forEach(function(room)\n\t\t\t\t{\n\t\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tID: room.ID,\n\t\t\t\t\t\tlabel: BX.util.htmlspecialchars(room.NAME),\n\t\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\t\ttype: 'calendar'\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.value.type === 'calendar'\n\t\t\t\t\t\t&& parseInt(this.value.value) === parseInt(room.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tlabel: Loc.getMessage('EC_LOCATION_MEETING_ROOM_SET'),\n\t\t\t\t\tcallback: this.editMeetingRooms.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tlabel: Loc.getMessage('EC_ADD_LOCATION'),\n\t\t\t\t\tcallback: this.editMeetingRooms.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.value)\n\t\t{\n\t\t\tthis.DOM.input.value = this.value.str || '';\n\t\t\tif (this.value.type && this.value.str === this.getTextLocation(this.value))\n\t\t\t{\n\t\t\t\tthis.DOM.input.value = Loc.getMessage('EC_LOCATION_404');\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectContol)\n\t\t{\n\t\t\tthis.selectContol.destroy();\n\t\t}\n\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tvalues: menuItemList,\n\t\t\tvalueIndex: selectedIndex,\n\t\t\tzIndex: this.zIndex,\n\t\t\tdisabled: this.disabled,\n\t\t\tonChangeCallback: BX.delegate(function()\n\t\t\t{\n\t\t\t\tlet i, value = this.DOM.input.value;\n\t\t\t\tthis.value = {text: value};\n\t\t\t\tfor (i = 0; i < menuItemList.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (menuItemList[i].labelRaw === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.value.type = menuItemList[i].type;\n\t\t\t\t\t\tthis.value.value = menuItemList[i].value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(this.params.onChangeCallback))\n\t\t\t\t{\n\t\t\t\t\tthis.params.onChangeCallback();\n\t\t\t\t}\n\t\t\t}, this)\n\t\t});\n\t}\n\n\teditMeetingRooms()\n\t{\n\t\tlet params = {};\n\t\tif (this.params.getControlContentCallback)\n\t\t{\n\t\t\tparams.wrap = this.params.getControlContentCallback();\n\t\t}\n\n\t\tif (!params.wrap)\n\t\t{\n\t\t\tparams.wrap = this.showEditMeetingRooms();\n\t\t}\n\n\t\tthis.buildLocationEditControl(params);\n\t}\n\n\tshowEditMeetingRooms()\n\t{\n\t\tif (this.editDialog)\n\t\t{\n\t\t\tthis.editDialog.destroy();\n\t\t}\n\n\t\tthis.editDialogContent = Dom.create('DIV', {props: {className: 'bxec-location-wrap'}});\n\t\tthis.editDialog = new BX.PopupWindow(this.id + '_popup', null,\n\t\t\t{\n\t\t\t\toverlay: {opacity: 10},\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tdraggable: true,\n\t\t\t\tbindOnResize: false,\n\t\t\t\ttitleBar: Loc.getMessage('EC_MEETING_ROOM_LIST_TITLE'),\n\t\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\t\tclassName: 'bxc-popup-window',\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\t\t\t\tevents: {click : BX.delegate(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.saveValues();\n\t\t\t\t\t\t\t\tif (this.editDialog)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.editDialog.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t}}),\n\n\t\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\t\tevents: {click : BX.delegate(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.editDialog)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.editDialog.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this)}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tcontent: this.editDialogContent,\n\t\t\t\tevents: {}\n\t\t\t});\n\n\t\tthis.editDialog.show();\n\t\treturn this.editDialogContent;\n\t}\n\n\tbuildLocationEditControl(params)\n\t{\n\t\tlet i;\n\n\t\tthis.locationEditControlShown = true;\n\t\tthis.editDialogWrap = params.wrap;\n\n\t\t// Display meeting room list\n\t\tthis.locationRoomList = [];\n\t\tthis.addNewButtonField = false;\n\t\tif (Type.isArray(Location.locationList))\n\t\t{\n\t\t\tLocation.locationList.forEach(function(room)\n\t\t\t{\n\t\t\t\tif (room.NAME !== '' && room.ID)\n\t\t\t\t{\n\t\t\t\t\tthis.locationRoomList.push({\n\t\t\t\t\t\tid: parseInt(room.ID),\n\t\t\t\t\t\tname: room.NAME\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tif (!this.locationRoomList.length)\n\t\t{\n\t\t\tthis.locationRoomList.push({\n\t\t\t\tid: 0,\n\t\t\t\tname: ''\n\t\t\t});\n\t\t}\n\n\t\tfor (i = 0; i < this.locationRoomList.length; i++)\n\t\t{\n\t\t\tthis.addRoomField(this.locationRoomList[i], params.wrap);\n\t\t}\n\n\t\t// Display add button\n\t\tthis.addNewButtonField = {\n\t\t\touterWrap: params.wrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-container-text'}}))\n\t\t};\n\t\tthis.addNewButtonField.innerWrap = this.addNewButtonField.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\tthis.addNewButtonField.innerCont = this.addNewButtonField.innerWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-text'},\n\t\t\thtml: '<span class=\"calendar-text-link\">' + Loc.getMessage('EC_MEETING_ROOM_ADD') + '</span>',\n\t\t\tevents: {\n\t\t\t\tclick: BX.delegate(function ()\n\t\t\t\t{\n\t\t\t\t\tlet lastItem = this.locationRoomList[this.locationRoomList.length - 1];\n\t\t\t\t\tif (lastItem.id || lastItem.deleted || BX.util.trim(lastItem.field.input.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.locationRoomList.push(this.addRoomField({id: 0}, params.wrap));\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\t\tparams.wrap.appendChild(this.addNewButtonField.outerWrap);\n\t}\n\n\taddRoomField(room)\n\t{\n\t\troom.field = {\n\t\t\touterWrap: this.editDialogWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-string'}}))\n\t\t};\n\t\troom.field.innerWrap = room.field.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\troom.field.innerWrap.style.paddingRight = '40px';\n\t\troom.field.input = room.field.innerWrap.appendChild(Dom.create('INPUT', {\n\t\t\tprops: {className: 'calendar-field calendar-field-string'},\n\t\t\tattrs: {\n\t\t\t\tvalue: room.name || '',\n\t\t\t\tplaceholder: Loc.getMessage('EC_MEETING_ROOM_PLACEHOLDER'),\n\t\t\t\ttype: 'text'\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tkeyup: BX.delegate(function(e)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(e.keyCode) === 13)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editRoom(room);\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\t\troom.field.delRoomEntry = room.field.innerWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: 'calendar-remove-filed'},\n\t\t\tevents: {\n\t\t\t\tclick: BX.delegate(function()\n\t\t\t\t{\n\t\t\t\t\tLocation.deleteField(room);\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\n\t\tif (this.addNewButtonField)\n\t\t{\n\t\t\tthis.editDialogWrap.appendChild(this.addNewButtonField.outerWrap);\n\t\t}\n\n\t\tif (!room.id)\n\t\t{\n\t\t\troom.field.input.focus();\n\t\t}\n\n\t\treturn room;\n\t}\n\n\teditRoom(room)\n\t{\n\t\tif (!this.locationEditControlShown)\n\t\t\treturn;\n\n\t\troom.field.input.value = BX.util.trim(room.field.input.value);\n\t\tif (!room.id)\n\t\t{\n\t\t\tif (room.field.input.value && BX.util.trim(room.field.input.value) !== BX.util.trim(room.name))\n\t\t\t{\n\t\t\t\troom.name = room.field.input.value;\n\t\t\t\tthis.locationRoomList.push(this.addRoomField({id: 0}));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (BX.util.trim(room.field.input.value) !== (room.name))\n\t\t\t{\n\t\t\t\troom.name = room.field.input.value;\n\t\t\t\troom.changed = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteField(room)\n\t{\n\t\tBX.remove(room.field.outerWrap, true);\n\t\troom.deleted = true;\n\t\troom.changed = true;\n\t}\n\n\tsaveValues()\n\t{\n\t\tlet i, locationList = [];\n\t\tfor (i = 0; i < this.locationRoomList.length; i++)\n\t\t{\n\t\t\tif (this.locationRoomList[i].field && this.locationRoomList[i].field.input)\n\t\t\t{\n\t\t\t\tif (this.locationRoomList[i].name !== this.locationRoomList[i].field.input.value && this.locationRoomList[i].id)\n\t\t\t\t{\n\t\t\t\t\tthis.locationRoomList[i].changed = true;\n\t\t\t\t}\n\n\t\t\t\tthis.locationRoomList[i].name = this.locationRoomList[i].field.input.value;\n\t\t\t}\n\n\t\t\tif ((!this.locationRoomList[i].deleted && this.locationRoomList[i].name) || this.locationRoomList[i].id)\n\t\t\t{\n\t\t\t\tlocationList.push({\n\t\t\t\t\tid: this.locationRoomList[i].id || 0,\n\t\t\t\t\tname: this.locationRoomList[i].name || '',\n\t\t\t\t\tchanged: (this.locationRoomList[i].changed || !this.locationRoomList[i].id) ? 'Y' : 'N',\n\t\t\t\t\tdeleted: (this.locationRoomList[i].deleted || !this.locationRoomList[i].name) ? 'Y' : 'N'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.saveLocationList', {\n\t\t\tdata: {\n\t\t\t\tlocationList: locationList\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tLocation.setLocationList(response.data.locationList);\n\t\t\t\t\tthis.setValues();\n\t\t\t\t},\n\t\t\t\t// Failure\n\t\t\t\t(response) => {\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\tthis.locationEditControlShown = false;\n\t}\n\n\tgetTextValue(value)\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\tvalue = this.value;\n\t\t}\n\n\t\tlet res = value.str || value.text || '';\n\t\tif (value && value.type === 'mr')\n\t\t{\n\t\t\tres = 'ECMR_' + value.value + (value.mrevid ? '_' + value.mrevid : '');\n\n\t\t}\n\t\telse if (value && value.type === 'calendar')\n\t\t{\n\t\t\tres = 'calendar_' + value.value + (value.room_event_id ? '_' + value.room_event_id : '');\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (Type.isPlainObject(value))\n\t\t{\n\t\t\tthis.value.text = value.text || '';\n\t\t\tthis.value.type = value.type || '';\n\t\t\tthis.value.value = value.value || '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value = Location.parseStringValue(value);\n\t\t}\n\n\t\tthis.setValues();\n\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tlet textLocation = this.getTextLocation(this.value);\n\t\t\tthis.DOM.inlineEditLink.innerHTML = Text.encode(textLocation || Loc.getMessage('EC_REMIND1_ADD'));\n\t\t}\n\t}\n\n\t// parseLocation\n\tstatic parseStringValue(str)\n\t{\n\t\tif (!Type.isString(str))\n\t\t{\n\t\t\tstr = '';\n\t\t}\n\n\t\tlet\n\t\t\tres = {\n\t\t\t\ttype : false,\n\t\t\t\tvalue : false,\n\t\t\t\tstr : str\n\t\t\t};\n\n\t\tif (str.substr(0, 5) === 'ECMR_')\n\t\t{\n\t\t\tres.type = 'mr';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.mrid = parseInt(value[1]);\n\t\t\t\t}\n\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.mrevid = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (str.substr(0, 9) === 'calendar_')\n\t\t{\n\t\t\tres.type = 'calendar';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.room_id = parseInt(value[1]);\n\t\t\t\t}\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.room_event_id = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tgetTextLocation(location)\n\t{\n\t\tlet\n\t\t\tvalue = Type.isPlainObject(location) ? location : Location.parseStringValue(location),\n\t\t\ti, str = value.str;\n\n\t\tif (Type.isArray(this.meetingRooms) && value.type === 'mr')\n\t\t{\n\t\t\tfor (i = 0; i < this.meetingRooms.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(this.meetingRooms[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = this.meetingRooms[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(Location.locationList) && value.type === 'calendar')\n\t\t{\n\t\t\tfor (i = 0; i < Location.locationList.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(Location.locationList[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = Location.locationList[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tstatic setLocationList(locationList)\n\t{\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tLocation.locationList = locationList;\n\t\t}\n\t}\n\n\tstatic getLocationList()\n\t{\n\t\treturn Location.locationList;\n\t}\n\n\tstatic setMeetingRoomList(meetingRoomList)\n\t{\n\t\tif (Type.isArray(meetingRoomList))\n\t\t{\n\t\t\tLocation.meetingRoomList = meetingRoomList;\n\t\t}\n\t}\n\n\tstatic getMeetingRoomList()\n\t{\n\t\treturn Location.meetingRoomList;\n\t}\n\n\tdisplayInlineEditControls()\n\t{\n\t\tthis.DOM.inlineEditLinkWrap.style.display = 'none';\n\t\tthis.DOM.inputWrap.style.display = '';\n\t}\n}","import {Type, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\n\nexport class UserSelector\n{\n\tconstructor(params = {})\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'user_selector_' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrapNode\n\t\t};\n\t\tthis.destinationInputName = params.inputName || 'EVENT_DESTINATION';\n\n\t\tif (Type.isArray(this.params.itemsSelected) && this.params.itemsSelected.length)\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(this.params.itemsSelected);\n\t\t}\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tlet id = this.id;\n\t\tthis.DOM.socnetDestinationWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'event-grid-dest-wrap'},\n\t\t\tevents: {\n\t\t\t\tclick : (e) => {\n\t\t\t\t\tBX.SocNetLogDestination.openDialog(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationItems = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: ''},\n\t\t\tevents: {\n\t\t\t\tclick : function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.SocNetLogDestination.deleteItem(targ.getAttribute('data-item-id'), targ.getAttribute('data-item-type'), id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouseover: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.addClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t},\n\t\t\t\tmouseout: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.removeClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationInputWrap = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {props: {className: 'feed-add-destination-input-box'}}));\n\t\tthis.socnetDestinationInput = this.socnetDestinationInputWrap.appendChild(\n\t\t\tDom.create('INPUT', {\n\t\t\t\tprops: {id: id + '-inp', className: 'feed-add-destination-inp'},\n\t\t\t\tattrs: {value: '', type: 'text'},\n\t\t\t\tevents: {\n\t\t\t\t\tkeydown : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tkeyup : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tthis.socnetDestinationLink = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\thtml: this.params.addLinkMessage || BX.message('EC_DESTINATION_ADD_USERS'),\n\t\t\tprops: {id: id + '-link', className: 'feed-add-destination-link'},\n\t\t\tevents: {\n\t\t\t\tkeydown : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tkeyup : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// if (this.params.itemsSelected && !this.checkItemsSelected(\n\t\t// \tthis.params.items,\n\t\t// \tthis.params.itemsLast,\n\t\t// \tthis.params.itemsSelected,\n\t\t// \tBX.proxy(this.init, this)\n\t\t// ))\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tif (!this.socnetDestinationInput || !this.DOM.socnetDestinationWrap || !this.params.items)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.params.selectGroups === false)\n\t\t{\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t\tthis.params.items.sonetgroups = {};\n\t\t}\n\n\t\tif(this.params.selectUsers === false)\n\t\t{\n\t\t\tthis.params.items.users = {};\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t}\n\n\t\tBX.SocNetLogDestination.init({\n\t\t\tname : this.id,\n\t\t\tsearchInput : this.socnetDestinationInput,\n\t\t\textranetUser :  false,\n\t\t\tuserSearchArea: 'I',\n\t\t\tbindMainPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tbindSearchPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tcallback : {\n\t\t\t\tselect : this.selectCallback.bind(this),\n\t\t\t\tunSelect : this.unSelectCallback.bind(this),\n\t\t\t\topenDialog : this.openDialogCallback.bind(this),\n\t\t\t\tcloseDialog : this.closeDialogCallback.bind(this),\n\t\t\t\topenSearch : this.openDialogCallback.bind(this),\n\t\t\t\tcloseSearch : ()=>{this.closeDialogCallback(true);}\n\t\t\t},\n\t\t\titems : this.params.items,\n\t\t\titemsLast : this.params.itemsLast,\n\t\t\titemsSelected : this.params.itemsSelected,\n\t\t\tdepartmentSelectDisable: this.params.selectGroups === false\n\t\t});\n\t}\n\n\t// checkItemsSelected(items, itemsLast, selected, callback)\n\t// {\n\t// \tlet codes = [], code;\n\t// \tfor (code in selected)\n\t// \t{\n\t// \t\tif (selected.hasOwnProperty(code))\n\t// \t\t{\n\t// \t\t\tif (selected[code] === 'users' && !items.users[code])\n\t// \t\t\t{\n\t// \t\t\t\tcodes.push(code);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t//\n\t// \tif (codes.length > 0)\n\t// \t{\n\t// \t\tlet loader = this.DOM.socnetDestinationWrap.appendChild(BX.adjust(Util.getLoader(40), {style: {height: '50px'}}));\n\t//\n\t//\n\t//\n\t//\n\t//\n\t// \t\tthis.calendar.request({\n\t// \t\t\ttype: 'get',\n\t// \t\t\tdata: {\n\t// \t\t\t\taction: 'get_destination_items',\n\t// \t\t\t\tcodes: codes\n\t// \t\t\t},\n\t// \t\t\thandler: BX.delegate(function(response)\n\t// \t\t\t{\n\t// \t\t\t\tif (loader)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tDom.remove(loader);\n\t// \t\t\t\t}\n\t//\n\t// \t\t\t\tthis.params.items = this.calendar.util.getSocnetDestinationConfig('items');\n\t// \t\t\t\tthis.params.itemsLast = this.calendar.util.getSocnetDestinationConfig('itemsLast');\n\t//\n\t// \t\t\t\tif (Type.isFunction(callback))\n\t// \t\t\t\t{\n\t// \t\t\t\t\tcallback();\n\t// \t\t\t\t}\n\t// \t\t\t}, this)\n\t// \t\t});\n\t// \t\treturn false;\n\t// \t}\n\t//\n\t// \treturn true;\n\t// }\n\n\tcloseAll()\n\t{\n\t\tif (top.BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\ttop.BX.SocNetLogDestination.closeDialog();\n\t\t}\n\t\ttop.BX.SocNetLogDestination.closeSearch();\n\t}\n\n\tselectCallback(item, type)\n\t{\n\t\tvar\n\t\t\ttype1 = type,\n\t\t\tprefix = 'S';\n\n\t\tif (type === 'sonetgroups')\n\t\t{\n\t\t\tprefix = 'SG';\n\t\t}\n\t\telse if (type === 'groups')\n\t\t{\n\t\t\tprefix = 'UA';\n\t\t\ttype1 = 'all-users';\n\t\t}\n\t\telse if (type === 'users')\n\t\t{\n\t\t\tprefix = 'U';\n\t\t}\n\t\telse if (type === 'department')\n\t\t{\n\t\t\tprefix = 'DR';\n\t\t}\n\n\t\tthis.socnetDestinationItems.appendChild(\n\t\t\tDom.create(\"span\", { attrs : {'data-id' : item.id }, props : {className : \"event-grid-dest event-grid-dest-\" + type1 }, children: [\n\t\t\t\t\tDom.create(\"input\", { attrs : {type : 'hidden', name : this.destinationInputName + '[' + prefix + '][]', value : item.id }}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"event-grid-dest-text\" }, html : item.name}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"feed-event-del-but\"}, attrs: {'data-item-id': item.id, 'data-item-type': type}})\n\t\t\t\t]})\n\t\t);\n\n\t\tBX.onCustomEvent('OnDestinationAddNewItem', [item]);\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\tunSelectCallback(item, type, search)\n\t{\n\t\tvar elements = BX.findChildren(this.socnetDestinationItems, {attribute: {'data-id': item.id}}, true);\n\t\tif (elements != null)\n\t\t{\n\t\t\tfor (var j = 0; j < elements.length; j++)\n\t\t\t{\n\t\t\t\tBX.remove(elements[j]);\n\t\t\t}\n\t\t}\n\n\t\tBX.onCustomEvent('OnDestinationUnselect');\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\topenDialogCallback()\n\t{\n\t\tif (top.BX.SocNetLogDestination.popupWindow)\n\t\t{\n\t\t\t// Fix zIndex for slider issues\n\t\t\ttop.BX.SocNetLogDestination.popupWindow.params.zIndex = this.zIndex;\n\t\t\ttop.BX.SocNetLogDestination.popupWindow.popupContainer.style.zIndex = this.zIndex;\n\t\t}\n\n\t\tif (top.BX.SocNetLogDestination.popupSearchWindow)\n\t\t{\n\t\t\t// Fix zIndex for slider issues\n\t\t\ttop.BX.SocNetLogDestination.popupSearchWindow.params.zIndex = this.zIndex;\n\t\t\ttop.BX.SocNetLogDestination.popupSearchWindow.popupContainer.style.zIndex = this.zIndex;\n\t\t}\n\n\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'inline-block');\n\t\tBX.style(this.socnetDestinationLink, 'display', 'none');\n\t\tBX.focus(this.socnetDestinationInput);\n\t}\n\n\tcloseDialogCallback(cleanInputValue)\n\t{\n\t\tif (!top.BX.SocNetLogDestination.isOpenSearch() && this.socnetDestinationInput.value.length <= 0)\n\t\t{\n\t\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'none');\n\t\t\tBX.style(this.socnetDestinationLink, 'display', 'inline-block');\n\t\t\tif (cleanInputValue === true)\n\t\t\t\tthis.socnetDestinationInput.value = '';\n\n\t\t\t// Disable backspace\n\t\t\tif (top.BX.SocNetLogDestination.backspaceDisable || top.BX.SocNetLogDestination.backspaceDisable != null)\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\n\t\t\tBX.bind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable = function(e)\n\t\t\t{\n\t\t\t\tif (e.keyCode === 8)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\t\t\t\ttop.BX.SocNetLogDestination.backspaceDisable = null;\n\t\t\t}, 5000);\n\t\t}\n\t}\n\n\tgetCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tcodes = [], i;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tcodes.push(inputsList[i].value);\n\t\t}\n\t\treturn codes;\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tvalues = [],\n\t\t\ti, code;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tvalues.push(inputsList[i].value);\n\t\t}\n\n\t\treturn this.convertAttendeesCodes(values);\n\t}\n\n\tconvertAttendeesCodes(values)\n\t{\n\t\tlet attendeesCodes = {};\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tvalues.forEach(function(code)\n\t\t\t{\n\t\t\t\tif (code.substr(0, 2) === 'DR')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"department\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'UA')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"groups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'SG')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"sonetgroups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 1) === 'U')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"users\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn attendeesCodes;\n\t}\n\n\tgetAttendeesCodesList(codes)\n\t{\n\t\tlet result = [];\n\t\tif (!codes)\n\t\t\tcodes = this.getAttendeesCodes();\n\t\tfor (let i in codes)\n\t\t{\n\t\t\tif (codes.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.socnetDestinationItems)\n\t\t{\n\t\t\tDom.clean(this.socnetDestinationItems);\n\t\t}\n\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(value);\n\t\t}\n\t\tthis.init();\n\t}\n}","import {Tag, Loc, Dom, Event, Type} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {MenuManager} from 'main.popup';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ColorSelector extends EventEmitter\n{\n\tLINE_MODE = 'line';\n\tSELECTOR_MODE = 'selector';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ColorSelector');\n\t\tthis.id = params.id || 'color-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.defaultColors = Util.getDefaultColorList();\n\t\tthis.colors = [];\n\t\tthis.zIndex = 3100;\n\t\tthis.mode =  params.mode || this.LINE_MODE;\n\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap\n\t\t};\n\t\tthis.create();\n\n\t\tthis.setViewMode(params.viewMode || false);\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tfor (let i = 0; i < this.defaultColors.length; i++)\n\t\t\t{\n\t\t\t\tthis.colors.push(\n\t\t\t\t{\n\t\t\t\t\tcolor: this.defaultColors[i],\n\t\t\t\t\tnode: this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\t\tattrs: {'data-bx-calendar-color': this.defaultColors[i]},\n\t\t\t\t\t\tstyle: {backgroundColor: this.defaultColors[i]},\n\t\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t\t}))\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.DOM.customColorNode = this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tstyle:\n\t\t\t\t\t{\n\t\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\t\twidth: 0\n\t\t\t\t\t},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}\n\t\t\t));\n\n\t\t\tthis.DOM.customColorLink = this.DOM.wrap.appendChild(Dom.create('LI', {\n\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item-more'},\n\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color-item-more-link\">' + Loc.getMessage('EC_COLOR') + '</span>',\n\t\t\t\tevents: {click: ()=>{\n\t\t\t\t\tif (!this.colorPickerPopup)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorPickerPopup = new BX.ColorPicker({\n\t\t\t\t\t\t\tbindElement: this.DOM.customColorLink,\n\t\t\t\t\t\t\tonColorSelected: this.setValue.bind(this),\n\t\t\t\t\t\t\tpopupOptions: {zIndex: this.zIndex}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis.colorPickerPopup.open();\n\t\t\t\t}}\n\t\t\t}));\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleColorClick.bind(this));\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE)\n\t\t{\n\t\t\tthis.DOM.colorIcon = this.DOM.wrap.appendChild(Tag.render`<div style=\"background-color: #000;\" class=\"calendar-field-select-icon\"></div>`);\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.openPopup.bind(this));\n\t\t}\n\t}\n\n\thandleColorClick(e)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet target = Util.findTargetNode(e.target || e.srcElement, this.DOM.wrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tlet value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tthis.setValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(color, emitChanges = true)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activeColor = color;\n\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tif (this.DOM.activeColorNode)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tif (!BX.util.in_array(this.activeColor, this.defaultColors) && this.activeColor)\n\t\t\t{\n\t\t\t\tthis.DOM.customColorNode.style.backgroundColor = this.activeColor;\n\t\t\t\tthis.DOM.customColorNode.style.width = '';\n\n\t\t\t\tthis.DOM.activeColorNode = this.DOM.customColorNode;\n\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.colors.length; i++)\n\t\t\t{\n\t\t\t\tif (this.colors[i].color === this.activeColor)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.activeColorNode = this.colors[i].node;\n\t\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE)\n\t\t{\n\t\t\tif (this.DOM.colorIcon)\n\t\t\t{\n\t\t\t\tthis.DOM.colorIcon.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t\tif (this.viewMode)\n\t\t\t{\n\t\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {value: this.activeColor}}));\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.activeColor;\n\t}\n\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.popup && this.popup.popupWindow && this.popup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.popup.close();\n\t\t}\n\n\t\tlet\n\t\t\ti, menuItems = [], icon;\n\n\t\t\tthis.defaultColors.forEach((color) => {\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\t\ttext: color,\n\t\t\t\t\t\t\tcolor: color,\n\t\t\t\t\t\t\tclassName: 'calendar-add-popup-color-menu-item',\n\t\t\t\t\t\t\tonclick: ((color) => {\n\t\t\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t\t\tthis.setValue(color);\n\t\t\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})(color)\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t});\n\n\t\tthis.popup = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.colorIcon,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tclassName: 'calendar-color-popup-wrap',\n\t\t\t\twidth: 162,\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 52,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.popup.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.popup.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\ticon = this.popup.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (Type.isDomNode(icon))\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.popup.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.popup.popupWindow.angle.element.style.left = '6px';\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.clean(this.DOM.wrap);\n\t\t\tthis.DOM.wrap.className = 'calendar-field-select-icon';\n\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Dom.removeClass(this.DOM.wrap, 'calendar-colorpicker-readonly');\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Text, Loc} from \"main.core\";\nimport \"ui.icons.b24\";\nimport {MenuManager} from \"main.popup\";\n\nexport class SectionSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'section-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.sectionList = params.sectionList;\n\t\tthis.sectionGroupList = params.sectionGroupList;\n\t\tthis.selectCallback = params.selectCallback;\n\t\tthis.openPopupCallback = params.openPopupCallback;\n\t\tthis.closePopupCallback = params.closePopupCallback;\n\t\tthis.getCurrentSection = params.getCurrentSection;\n\n\t\tthis.defaultCalendarType = params.defaultCalendarType;\n\t\tthis.defaultOwnerId = parseInt(params.defaultOwnerId);\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.mode = params.mode; // full|compact|textselect\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap\n\t\t};\n\n\t\tthis.create();\n\t\tthis.initEventHandlers();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap;\n\t\t\tthis.DOM.selectImageWrap = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-img\"></span>`);\n\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-name\">${Text.encode(Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle())}</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field calendar-field-select' + (this.mode === 'compact' ? ' calendar-field-tiny' : '')}\n\t\t\t}));\n\n\t\t\tthis.DOM.innerValue = this.DOM.select.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field-select-icon'},\n\t\t\t\tstyle: {backgroundColor : this.getCurrentColor()}\n\t\t\t}));\n\n\t\t\tif (this.mode === 'full')\n\t\t\t{\n\t\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Dom.create('SPAN', {text: this.getCurrentTitle()}));\n\t\t\t}\n\t\t}\n\t}\n\n\tinitEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.select, 'click', BX.delegate(this.openPopup, this));\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.sectionMenu && this.sectionMenu.popupWindow && this.sectionMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.sectionMenu.close();\n\t\t}\n\n\t\tconst submenuClass = 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label';\n\t\tconst menuItems = [];\n\t\tconst sectionIdList = [];\n\t\tconst sectionList = this.getSectionList();\n\t\tlet i;\n\n\t\tif (Type.isArray(this.sectionGroupList))\n\t\t{\n\t\t\tthis.sectionGroupList.forEach((sectionGroup) => {\n\t\t\t\tlet filteredList;\n\t\t\t\tif (sectionGroup.belongsToView)\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter(this.sectionBelongsToView, this);\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'user')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'user' && SectionSelector.getSectionOwner(section) === sectionGroup.ownerId;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'company')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'company_calendar' || SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfilteredList = filteredList.filter((section) => {\n\t\t\t\t\tconst id = parseInt(section.id || section.ID);\n\t\t\t\t\tif (sectionIdList.includes(id))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tsectionIdList.push(id);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tif (filteredList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\thtml: '<span>' + sectionGroup.title + '</span>',\n\t\t\t\t\t\tclassName: submenuClass\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < filteredList.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItems.push(this.getMenuItem(filteredList[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (i = 0; i < sectionList.length; i++)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.getMenuItem(sectionList[i]));\n\t\t\t}\n\t\t}\n\n\t\tlet offsetLeft = 0;\n\t\tif (this.mode === 'compact')\n\t\t{\n\t\t\toffsetLeft = 40;\n\t\t}\n\t\telse if(this.mode === 'textselect')\n\t\t{\n\t\t\toffsetLeft = 0;\n\t\t}\n\n\t\tthis.sectionMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.select,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: offsetLeft,\n\t\t\t\tangle: this.mode === 'compact'\n\t\t\t}\n\t\t);\n\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflow = \"auto\";\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.maxHeight = \"400px\";\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.sectionMenu.popupWindow.setWidth(this.DOM.select.offsetWidth - 2);\n\t\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflowX = \"hidden\";\n\t\t}\n\n\t\tthis.sectionMenu.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.sectionMenu.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.sectionMenu.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\tlet icon = this.sectionMenu.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.sectionMenu.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addClass(this.DOM.select, 'active');\n\n\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t{\n\t\t\tthis.openPopupCallback(this);\n\t\t}\n\n\t\tBX.addCustomEvent(this.sectionMenu.popupWindow, 'onPopupClose', BX.delegate(function()\n\t\t{\n\t\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t\t{\n\t\t\t\tthis.closePopupCallback();\n\t\t\t}\n\t\t\tBX.removeClass(this.DOM.select, 'active');\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.sectionMenu = null;\n\t\t}, this));\n\t}\n\n\tgetCurrentColor()\n\t{\n\t\treturn (this.getCurrentSection() || {}).color || false;\n\t}\n\n\tgetCurrentTitle()\n\t{\n\t\treturn (this.getCurrentSection() || {}).name || '';\n\t}\n\n\tgetSectionList()\n\t{\n\t\treturn this.sectionList.filter((section) => {\n\t\t\treturn (section.PERM && section.PERM.edit) || (Type.isFunction(section.canDo) && section.canDo('edit'));\n\t\t});\n\t}\n\n\tupdateSectionImageNode(section)\n\t{\n\t\tif (!Type.isElementNode(this.DOM.selectImageWrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (section === undefined)\n\t\t{\n\t\t\tsection = this.sectionList.find((section) => {\n\t\t\t\treturn parseInt(section.id) === parseInt(this.getCurrentSection().id);\n\t\t\t});\n\t\t}\n\n\t\tif (section && section.type)\n\t\t{\n\t\t\tconst imageSrc = SectionSelector.getSectionImage(section);\n\t\t\tlet imageNode;\n\t\t\tif (imageSrc)\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<img class=\"calendar-field-choice-calendar-img-value\" src=\"${imageSrc}\">`;\n\t\t\t}\n\t\t\telse if(section.type === 'group')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user-group\"><i></i></div>`;\n\t\t\t}\n\t\t\telse if(section.type === 'user')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user\"><i></i></div>`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-bitrix24\"><i></i></div>`;\n\t\t\t}\n\n\t\t\tDom.clean(this.DOM.selectImageWrap);\n\t\t\tthis.DOM.selectImageWrap.appendChild(imageNode);\n\t\t}\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.sectionMenu;\n\t}\n\n\tgetMenuItem(sectionItem)\n\t{\n\t\tlet _this = this;\n\t\treturn {\n\t\t\thtml: BX.util.htmlspecialchars(sectionItem.name || sectionItem.NAME),\n\t\t\tcolor: sectionItem.color || sectionItem.COLOR,\n\t\t\tclassName: 'calendar-add-popup-section-menu-item' + (this.mode === 'full' ? ' section-menu-item-full' : ''),\n\t\t\tonclick: (function (section)\n\t\t\t{\n\t\t\t\treturn () => {\n\t\t\t\t\tif (Type.isDomNode(_this.DOM.innerValue))\n\t\t\t\t\t{\n\t\t\t\t\t\t_this.DOM.innerValue.style.backgroundColor = section.color || sectionItem.COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.updateSectionImageNode(section);\n\t\t\t\t\tif (Type.isFunction(_this.selectCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!section.color && sectionItem.COLOR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.color = sectionItem.COLOR;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!section.id && sectionItem.ID)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.id = sectionItem.ID;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.selectCallback(section);\n\t\t\t\t\t}\n\t\t\t\t\t_this.sectionMenu.close();\n\t\t\t\t\t_this.updateValue();\n\t\t\t\t}\n\t\t\t})(sectionItem)\n\t\t}\n\t}\n\n\tsectionBelongsToView(section)\n\t{\n\t\treturn SectionSelector.getSectionType(section) === this.defaultCalendarType && SectionSelector.getSectionOwner(section) === this.defaultOwnerId;\n\t}\n\n\tstatic getSectionType(section)\n\t{\n\t\treturn section.type || section.CAL_TYPE;\n\t}\n\n\tstatic getSectionImage(section = {})\n\t{\n\t\treturn section.data ? section.data.IMAGE : (section.IMAGE || '');\n\t}\n\n\tstatic getSectionOwner(section)\n\t{\n\t\treturn parseInt(section.OWNER_ID || section.data.OWNER_ID)\n\t}\n\n\tupdateValue()\n\t{\n\t\tif (Type.isDomNode(this.DOM.innerValue))\n\t\t{\n\t\t\tthis.DOM.innerValue.style.backgroundColor = this.getCurrentColor();\n\t\t}\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\ttext: this.getCurrentTitle(),\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: this.getCurrentTitle()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse if (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.updateSectionImageNode();\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle()\n\t\t\t\t},\n\t\t\t\ttext: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle(),\n\t\t\t}));\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t}\n\t}\n}","import {Util} from \"calendar.util\";\n\nexport class RepeatSelector\n{\n\tconstructor(params)\n\t{\n\t\tlet formElements =  params.rruleType.form.elements;\n\n\t\tthis.getDate = params.getDate;\n\t\tthis.DOM = {\n\t\t\tformElements: formElements,\n\t\t\twrap: params.wrap,\n\t\t\trruleType: params.rruleType,\n\t\t\tinterval: formElements['EVENT_RRULE[INTERVAL]'],\n\t\t\trruleEndsOn: {\n\t\t\t\tnever: formElements['rrule_endson'][0],\n\t\t\t\tcount: formElements['rrule_endson'][1],\n\t\t\t\tuntil: formElements['rrule_endson'][2],\n\t\t\t},\n\t\t\tcount: formElements['EVENT_RRULE[COUNT]'],\n\t\t\tuntil: formElements['EVENT_RRULE[UNTIL]'],\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tBX.bind(this.DOM.rruleType, 'change', BX.delegate(function()\n\t\t{\n\t\t\tthis.changeType(this.DOM.rruleType.value);\n\t\t}, this));\n\n\t\tBX.bind(this.DOM.until, 'click', BX.proxy(function()\n\t\t{\n\t\t\tBX.calendar({node: this.DOM.until, field: this.DOM.until, bTime: false});\n\t\t\tBX.focus(this.DOM.until);\n\t\t\tthis.DOM.rruleEndsOn.until.checked = true;\n\t\t}, this));\n\n\t\tBX.bind(this.DOM.count, 'click', BX.proxy(function()\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = true;\n\t\t}, this));\n\t}\n\n\tchangeType(type)\n\t{\n\t\tthis.DOM.rruleType.value = type ? type.toUpperCase() : 'NONE';\n\t\tlet rruleType = this.DOM.rruleType.value.toLowerCase();\n\t\tthis.DOM.wrap.className = 'calendar-rrule-type-' + rruleType;\n\n\t\tif (rruleType === 'weekly' && BX.type.isFunction(this.getDate))\n\t\t{\n\t\t\tlet fromDate = this.getDate();\n\t\t\tif (BX.type.isDate(fromDate))\n\t\t\t{\n\t\t\t\tlet day = Util.getWeekDayByInd(fromDate.getDay());\n\t\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t\t{\n\t\t\t\t\tinput.checked = input.checked || input.value === day;\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(rrule = {})\n\t{\n\t\tthis.changeType(rrule.FREQ);\n\t\tthis.DOM.interval.value = rrule.INTERVAL || 1;\n\t\tif (rrule.COUNT)\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = 'checked';\n\t\t\tthis.DOM.count.value = rrule.COUNT;\n\t\t}\n\t\telse if(rrule['~UNTIL'])\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.until.checked = 'checked';\n\t\t\tthis.DOM.until.value = rrule['~UNTIL'];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.never.checked = 'checked';\n\t\t}\n\n\t\tif (BX.type.isPlainObject(rrule.BYDAY))\n\t\t{\n\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t{\n\t\t\t\tinput.checked = rrule.BYDAY.hasOwnProperty(input.value);\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.DOM.rruleType.value.toLowerCase();\n\t}\n}","export class SelectInput\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'bx-select-input-' + Math.round(Math.random() * 1000000);\n\t\tthis.values = params.values || false;\n\t\tthis.input = params.input;\n\n\t\tthis.defaultValue = params.defaultValue || '';\n\t\tthis.openTitle = params.openTitle || '';\n\t\tthis.className = params.className || '';\n\n\t\tthis.onChangeCallback = params.onChangeCallback || null;\n\t\tthis.zIndex = params.zIndex || 1200;\n\t\tthis.disabled = params.disabled;\n\t\tthis.minWidth = params.minWidth || 0;\n\n\t\tthis.setValue({\n\t\t\tvalue: params.value,\n\t\t\tvalueIndex: params.valueIndex\n\t\t});\n\n\t\tthis.curInd = false;\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.bind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.bind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tif (this.values)\n\t\t{\n\t\t\tBX.bind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\t\tBX.bind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\t\tBX.bind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\t\tBX.bind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\t\t}\n\t}\n\n\tsetValue(params)\n\t{\n\t\tthis.currentValue = {value: params.value};\n\t\tthis.currentValueIndex = params.valueIndex;\n\t\tif (this.currentValueIndex !== undefined && this.values[this.currentValueIndex])\n\t\t{\n\t\t\tthis.input.value = this.values[this.currentValueIndex].label;\n\t\t}\n\t}\n\n\tgetInputValue()\n\t{\n\t\treturn this.input.value;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.shown || this.disabled)\n\t\t\treturn;\n\n\t\tlet\n\t\t\tind = 0,\n\t\t\tj = 0,\n\t\t\tmenuItems = [],\n\t\t\ti, _this = this;\n\n\t\tfor (i = 0; i < this.values.length; i++)\n\t\t{\n\t\t\tif (this.values[i].delimiter)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.values[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.currentValue && this.values[i]\n\t\t\t\t\t&& this.values[i].value === this.currentValue.value)\n\t\t\t\t{\n\t\t\t\t\tind = j;\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push({\n\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\ttext: this.values[i].label,\n\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t_this.onChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t});\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\n\t\tthis.popupMenu = BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.input,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: -1\n\t\t\t}\n\t\t);\n\n\t\tthis.popupMenu.popupWindow.setWidth(Math.max(this.input.offsetWidth + 2, this.minWidth));\n\n\t\tlet menuContainer = this.popupMenu.layout.menuContainer;\n\t\tBX.addClass(this.popupMenu.layout.menuContainer, 'calendar-select-popup');\n\t\tthis.popupMenu.show();\n\n\t\tlet menuItem = this.popupMenu.menuItems[ind];\n\n\t\tif (menuItem && menuItem.layout)\n\t\t{\n\t\t\tmenuContainer.scrollTop = menuItem.layout.item.offsetTop - menuItem.layout.item.offsetHeight;\n\t\t}\n\n\t\tBX.addCustomEvent(this.popupMenu.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.shown = false;\n\t\t\tthis.popupMenu = null;\n\t\t}.bind(this));\n\n\t\tthis.input.select();\n\n\t\tthis.shown = true;\n\t}\n\n\tclosePopup()\n\t{\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n\n\tonFocus()\n\t{\n\t\tsetTimeout(function(){\n\t\t\tif (!this.shown)\n\t\t\t{\n\t\t\t\tthis.showPopup();\n\t\t\t}\n\t\t}.bind(this), 200);\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.shown)\n\t\t{\n\t\t\tthis.closePopup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showPopup();\n\t\t}\n\t}\n\n\tonBlur()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 200);\n\t}\n\n\tonKeyup()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 50);\n\t}\n\n\tonChange()\n\t{\n\t\tvar val = this.input.value;\n\t\tBX.onCustomEvent(this, 'onSelectInputChanged', [this, val]);\n\t\tif (BX.type.isFunction(this.onChangeCallback))\n\t\t{\n\t\t\tthis.onChangeCallback({value: val});\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.unbind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.unbind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tBX.unbind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\tBX.unbind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\tBX.unbind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\tBX.unbind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\n\t\tif (this.popupMenu)\n\t\t{\n\t\t\tthis.popupMenu.close();\n\t\t}\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n}\n\n\n\n","export class PopupDialog {\n\tconstructor(params = {})\n\t{\n\t\tthis.id = params.id || 'popup-dialog-' + Math.random();\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.DOM = {};\n\t\tthis.title = '';\n\t}\n\n\tcreate()\n\t{\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: this.getTitle(),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: this.getButtons(),\n\t\t\tcontent: this.getContent(),\n\t\t\tevents: {}\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\tthis.buttons = [];\n\t\treturn this.buttons;\n\t}\n\n\tshow(params)\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager} from 'main.popup';\n\nexport class ViewSelector extends EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\n\t\tif (params.currentViewMode)\n\t\t{\n\t\t\tthis.setViewMode(params.currentViewMode);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-selector\"></div>`;\n\t\tthis.DOM.selectorText = Tag.render`<div class=\"calendar-view-switcher-text\"></div>`;\n\t\tthis.DOM.selectorTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-inner\"></div>`);\n\t\tthis.DOM.wrap.appendChild(this.DOM.selectorText);\n\t\tthis.DOM.wrap.appendChild(Tag.render`<div class=\"calendar-view-switcher-dropdown\"></div>`);\n\t\tEvent.bind(this.DOM.wrap, 'click', this.showPopup.bind(this));\n\t\tthis.DOM.viewModeTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-mode-inner\" style=\"display: none;\"></div>`);\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tDom.adjust(this.DOM.selectorTextInner, {text: this.currentValue.text});\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\tif (this.currentViewMode)\n\t\t\t{\n\t\t\t\tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t}\n\t\t\tthis.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach(function(view)\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\t//text: view.text,\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = MenuManager.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.selectorText,\n\t\t\tthis.getMenuItems(),\n\t\t\t{\n\t\t\t\tclassName: \"calendar-view-switcher-popup\",\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: -3,\n\t\t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\t}\n\n\tclosePopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}\n\n\n\n","import {Type, Dom, Event, Tag, Loc} from 'main.core';\n//import {ViewSelector} from './viewselector';\nimport {EventEmitter} from 'main.core.events';\n\nexport class LineViewSelector extends  EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.LineViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.viewsMap = new WeakMap();\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-list\"></div>`;\n\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tthis.viewsMap.set(view, {\n\t\t\t\t\twrap: this.DOM.wrap.appendChild(Tag.render`<span \n\t\t\t\t\t\tclass=\"calendar-view-switcher-list-item\"\n\t\t\t\t\t\tonclick=\"${()=>{\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\"\n\t\t\t\t\t>${view.text}</span>`)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tlet viewData = this.viewsMap.get(this.currentValue);\n\t\t\tlet currentActiveWrap = this.DOM.wrap.querySelector('.calendar-view-switcher-list-item-active');\n\t\t\tif (Type.isDomNode(currentActiveWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(currentActiveWrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(viewData.wrap))\n\t\t\t{\n\t\t\t\tDom.addClass(viewData.wrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\t// if (this.currentViewMode)\n\t\t\t// {\n\t\t\t// \tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t// }\n\t\t\t//this.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\t// showPopup()\n\t// {\n\t// \tthis.closePopup();\n\t//\n\t// \tthis.menuPopup = MenuManager.create(\n\t// \t\tthis.popupId,\n\t// \t\tthis.DOM.selectorText,\n\t// \t\tthis.getMenuItems(),\n\t// \t\t{\n\t// \t\t\tclassName: \"calendar-view-switcher-popup\",\n\t// \t\t\tcloseByEsc : true,\n\t// \t\t\tautoHide : true,\n\t// \t\t\tzIndex: this.zIndex,\n\t// \t\t\toffsetTop: -3,\n\t// \t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t// \t\t\tangle: true,\n\t// \t\t\tcacheable: false\n\t// \t\t}\n\t// \t);\n\t//\n\t// \tthis.menuPopup.show();\n\t// }\n\t//\n\t// closePopup()\n\t// {\n\t// \tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t// \t{\n\t// \t\treturn this.menuPopup.close();\n\t// \t}\n\t// }\n}\n\n\n\n","import {Dom, Event, Loc, Type} from 'main.core';\n\nexport class AddButton extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.AddButton');\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'add-button-' + Math.round(Math.random() * 10000);\n\t\tthis.showTasks = params.showTasks;\n\n\t\tthis.addEntryHandler = Type.isFunction(params.addEntry) ? params.addEntry : null;\n\t\tthis.addTaskHandler = Type.isFunction(params.addTask) ? params.addTask : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.menuItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_ADD_EVENT'),\n\t\t\t\tonclick: this.addEntry.bind(this)\n\t\t\t}\n\t\t];\n\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.menuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ADD_TASK'),\n\t\t\t\tonclick: this.addTask.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tif (this.menuItems.length > 1)\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-split ui-btn-primary\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create(\"button\", {\n\t\t\t\t\t\tprops: {className: \"ui-btn-main\", type: \"button\"},\n\t\t\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.DOM.addButtonExtra = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-extra\"},\n\t\t\t\tevents: {click: this.showPopup.bind(this)}\n\t\t\t});\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButtonExtra)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"button\", {\n\t\t\t\tprops: {className: \"ui-btn ui-btn-primary\", type: \"button\"},\n\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetWrap()\n\t{\n\t\treturn this.DOM.wrap;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = BX.PopupMenu.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.addButtonExtra,\n\t\t\tthis.menuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\n\t\tBX.addCustomEvent(this.menuPopup.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.popupId);\n\t\t\tthis.menuPopup = null;\n\t\t\tthis.addBtnMenu = null;\n\t\t}.bind(this));\n\t}\n\n\taddEntry()\n\t{\n\t\tif (this.addEntryHandler)\n\t\t{\n\t\t\tthis.addEntryHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n\n\taddTask()\n\t{\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.addTaskHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}\n\n\n\n\n\n\n\n\n","import {Dom, Event, Loc, Type} from 'main.core';\nimport {Util} from \"calendar.util\";\n\nexport class MeetingStatusControl extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.MeetingStatusControl');\n\t\tthis.BX = Util.getBX();\n\n\t\tif (params.wrap && Type.isDomNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error(\"The argument \\\"params.wrap\\\" must be a DOM node.\");\n\t\t}\n\t\tthis.id = params.id || 'meeting-status-control-' + Math.round(Math.random() * 10000);\n\t\tthis.zIndex = 3100;\n\n\t\tthis.create();\n\n\t\tthis.status = params.currentStatus || null;\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.updateStatus();\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\t// this.DOM.selectorButton = this.DOM.wrap.appendChild(Dom.create(\"button\", {\n\t\t// \tprops: {className: \"webform-small-button webform-small-button-transparent webform-small-button-dropdown\"},\n\t\t// \tevents: {click: this.showPopup.bind(this)}\n\t\t// }));\n\t\t//\n\t\t// this.DOM.selectorButtonText = this.DOM.selectorButton.appendChild(Dom.create(\"button\", {\n\t\t// \tprops: {className: \"webform-small-button-text\"}\n\t\t// }));\n\t\t// this.DOM.selectorButtonIcon = this.DOM.selectorButton.appendChild(Dom.create(\"button\", {\n\t\t// \tprops: {className: \"webform-small-button-icon\"}\n\t\t// }));\n\n\t\tthis.acceptBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y'),\n\t\t\tclassName: 'ui-btn ui-btn-primary',\n\t\t\tevents: {click: this.accept.bind(this)}\n\t\t});\n\t\tthis.acceptBtn.renderTo(this.DOM.wrap);\n\n\t\tthis.declineBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_N'),\n\t\t\tclassName: 'ui-btn ui-btn-light-border',\n\t\t\tevents: {click: this.decline.bind(this)}\n\t\t});\n\t\tthis.declineBtn.renderTo(this.DOM.wrap);\n\n\t\t// this.DOM.buttonY = this.DOM.wrap.appendChild(Dom.create(\"button\", {\n\t\t// \tprops: {className: \"webform-small-button webform-small-button-accept\"},\n\t\t// \tevents: {click: this.accept.bind(this)},\n\t\t// \thtml: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y')\n\t\t// }));\n\t\t//\n\t\t// this.DOM.buttonN = this.DOM.wrap.appendChild(Dom.create(\"button\", {\n\t\t// \tprops: {className: \"webform-small-button webform-small-button-transparent\"},\n\t\t// \tevents: {click: this.decline.bind(this)},\n\t\t// \thtml: Loc.getMessage('EC_VIEW_DESIDE_BUT_N')\n\t\t// }));\n\t}\n\n\tupdateStatus()\n\t{\n\t\tif (this.status === 'H')\n\t\t{\n\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\tthis.declineBtn.setText(Loc.getMessage('EC_VIEW_DESIDE_BUT_OWNER_N'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.status === 'Y')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t\telse if (this.status === 'N')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = 'none';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\taccept()\n\t{\n\t\tthis.setStatus('Y');\n\t}\n\n\tdecline()\n\t{\n\t\tthis.setStatus('N');\n\t}\n\n\tsetStatus(value, emitEvent = true)\n\t{\n\t\tthis.status = value;\n\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\n\t\tif (emitEvent)\n\t\t{\n\t\t\tthis.emit('onSetStatus', new Event.BaseEvent({data: {status: value}}));\n\t\t}\n\n\t\tthis.updateStatus();\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmStatusDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_DECLINE_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_ONLY_THIS'),\n\t\t\tevents: {\n\t\t\t\tclick : function()\n\t\t\t\t{\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function()\n\t\t\t\t{\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_DECLINE_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmEditDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmEditDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EDIT_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : ()=>{\n\t\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","'use strict';\nimport {PopupDialog} from './popupdialog';\n\nexport class ConfirmDeleteDialog extends PopupDialog\n{\n\tconstructor(params = {})\n\t{\n\t\tsuper(params);\n\t\tthis.title = BX.message('EC_DEL_REC_EVENT');\n\t\tthis.entry = params.entry;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteThis();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteNext();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: BX.message('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function() {\n\t\t\t\t\t\tthis.entry.deleteAll();\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn [\n\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\ttext: BX.message('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t})\n\t\t];\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {TimeSelector} from \"./timeselector\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class DateTimeControl extends EventEmitter\n{\n\tDATE_INPUT_WIDTH = 110;\n\tTIME_INPUT_WIDTH = 70;\n\tzIndex = 4200;\n\n\tconstructor(uid, options = {showTimezone: true})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.DateTimeControl');\n\n\t\tthis.showTimezone = options.showTimezone;\n\t\tthis.inlineEditMode = !!options.inlineEditMode;\n\t\tthis.currentInlineEditMode = options.currentInlineEditMode || 'view';\n\n\t\tthis.UID = uid || 'date-time-' + Math.round(Math.random() * 100000);\n\n\t\tthis.DOM = {\n\t\t\touterWrap: options.outerWrap || null,\n\t\t\touterContent: options.outerContent || null\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t{\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\n\t\t\tthis.DOM.leftInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-left\"></div>`);\n\n\t\t\tthis.DOM.fromDate = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromDateText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.fromTime = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromTimeText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-between\" />`);\n\n\t\t\tthis.DOM.rightInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-right\"></div>`);\n\n\t\t\tthis.DOM.toTime = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toTimeText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.toDate = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>`);\n\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toDateText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.fromTime,\n\t\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t\t});\n\n\t\t\tthis.toTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.toTime,\n\t\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t\t});\n\n\t\t\tlet fullDayWrap = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-event-full-day\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.fullDay = fullDayWrap.appendChild(Tag.render`\n\t\t\t\t<input value=\"Y\" type=\"checkbox\" id=\"{this.UID}\"/>\n\t\t\t`);\n\t\t\tfullDayWrap.appendChild(Tag.render`<label for=\"{this.UID}\">${Loc.getMessage('EC_ALL_DAY')}</label>`);\n\t\t}\n\n\t\t//this.DOM.defTimezoneWrap = BX(this.UID + '_timezone_default_wrap');\n\t\t//this.DOM.defTimezone = BX(this.UID + '_timezone_default');\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\t// this.DOM.fromTz = BX(this.UID + '_timezone_from');\n\t\t\t// this.DOM.toTz = BX(this.UID + '_timezone_to');\n\t\t\t// this.DOM.tzButton = BX(this.UID + '_timezone_btn');\n\t\t\t// this.DOM.tzOuterCont = BX(this.UID + '_timezone_wrap');\n\t\t\t// this.DOM.tzCont = BX(this.UID + '_timezone_inner_wrap');\n\t\t\t// BX(this.UID + '_timezone_hint').title = BX.message('EC_EVENT_TZ_HINT');\n\t\t\t// BX(this.UID + '_timezone_default_hint').title = BX.message('EC_EVENT_TZ_DEF_HINT');\n\t\t}\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tsetValue(value = {})\n\t{\n\t\tthis.DOM.fromDate.value = Util.formatDate(value.from);\n\t\tthis.DOM.toDate.value = Util.formatDate(value.to);\n\n\t\tthis.lastDateValue = value.from;\n\n\t\tthis.fromTimeControl.setValue(value.from);\n\t\tthis.toTimeControl.setValue(value.to);\n\n\t\tthis.DOM.fromTime.value = Util.formatTime(value.from);\n\t\tthis.DOM.toTime.value = Util.formatTime(value.to);\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.DOM.fromDateText.innerHTML = Util.formatDateUsable(value.from, true, true);\n\t\t\tthis.DOM.toDateText.innerHTML = Util.formatDateUsable(value.to, true, true);\n\n\t\t\t// Hide right part if it's the same date\n\t\t\tthis.DOM.toDateText.style.display = this.DOM.fromDate.value === this.DOM.toDate.value ? 'none' : '';\n\t\t\tthis.DOM.fromTimeText.innerHTML = this.DOM.fromTime.value;\n\t\t\tthis.DOM.toTimeText.innerHTML = this.DOM.toTime.value;\n\t\t}\n\n\t\tif (value.fullDay !== undefined)\n\t\t{\n\t\t\tthis.DOM.fullDay.checked = value.fullDay;\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tvalue.timezoneFrom = value.timezoneFrom || value.timezoneName;\n\t\t\tvalue.timezoneTo = value.timezoneTo || value.timezoneName;\n\n\t\t\tif (value.timezoneFrom !== undefined && Type.isDomNode(this.DOM.fromTz))\n\t\t\t{\n\t\t\t\tthis.DOM.fromTz.value = value.timezoneFrom;\n\t\t\t}\n\t\t\tif(value.timezoneTo !== undefined && Type.isDomNode(this.DOM.toTz))\n\t\t\t{\n\t\t\t\tthis.DOM.toTz.value = value.timezoneTo;\n\t\t\t}\n\n\t\t\tif (value.timezoneName !== undefined\n\t\t\t\t&& (value.timezoneName !== value.timezoneFrom\n\t\t\t\t\t|| value.timezoneName !== value.timezoneTo))\n\t\t\t{\n\t\t\t\tthis.switchTimezone(true);\n\t\t\t}\n\t\t}\n\t\tthis.value = value;\n\n\t\tthis.handleFullDayChange();\n\t}\n\n\tgetValue()\n\t{\n\t\tlet value = {\n\t\t\tfullDay: this.DOM.fullDay.checked,\n\t\t\tfromDate: this.DOM.fromDate.value,\n\t\t\ttoDate: this.DOM.toDate.value,\n\t\t\tfromTime: this.DOM.fromTime.value,\n\t\t\ttoTime: this.DOM.toTime.value,\n\t\t\ttimezoneFrom: this.DOM.fromTz ? this.DOM.fromTz.value : this.value.timezoneFrom || this.value.timezoneName || null,\n\t\t\ttimezoneTo: this.DOM.toTz ? this.DOM.toTz.value : this.value.timezoneTo || this.value.timezoneName || null\n\t\t};\n\n\t\tvalue.from = Util.parseDate(value.fromDate);\n\t\tif (Type.isDate(value.from))\n\t\t{\n\t\t\tvalue.to = Util.parseDate(value.toDate);\n\t\t\tif (!Type.isDate(value.to))\n\t\t\t{\n\t\t\t\tvalue.to = value.from;\n\t\t\t}\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tvalue.from.setHours(0, 0, 0);\n\t\t\t\tvalue.to.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tfromTime = Util.parseTime(value.fromTime),\n\t\t\t\t\ttoTime = Util.parseTime(value.toTime) || fromTime;\n\n\t\t\t\tif (fromTime && toTime)\n\t\t\t\t{\n\t\t\t\t\tvalue.from.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t\tvalue.to.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.fromDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.fromDate, 'change', this.handleDateFromChange.bind(this));\n\n\t\tEvent.bind(this.DOM.toDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.toDate, 'change', this.handleDateToChange.bind(this));\n\n\t\tEvent.bind(this.DOM.fullDay, 'click', () => {\n\t\t\tthis.handleFullDayChange();\n\t\t\tthis.handleValueChange();\n\t\t});\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tEvent.bind(this.DOM.outerWrap, 'click', this.changeInlineEditMode.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.defTimezone))\n\t\t{\n\t\t\tEvent.bind(this.DOM.defTimezone, 'change', BX.delegate(function()\n\t\t\t{\n\t\t\t\t//this.calendar.util.setUserOption('timezoneName', this.DOM.defTimezone.value);\n\t\t\t\tif (this.bindFromToDefaultTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.fromTz.value = this.DOM.toTz.value = this.DOM.defTimezone.value;\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.tzButton))\n\t\t\t{\n\t\t\t\tEvent.bind(this.DOM.tzButton, 'click', this.switchTimezone.bind(this));\n\t\t\t}\n\n\t\t\tEvent.bind(this.DOM.fromTz, 'change', function()\n\t\t\t{\n\t\t\t\tif (this.bindTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTz.value = this.DOM.fromTz.value;\n\t\t\t\t}\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tEvent.bind(this.DOM.toTz, 'change', function()\n\t\t\t{\n\t\t\t\tthis.bindTimezones = false;\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tthis.bindTimezones = this.DOM.fromTz.value === this.DOM.toTz.value;\n\t\t\tthis.bindFromToDefaultTimezones = this.bindTimezones\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.toTz.value\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.defTimezone.value;\n\t\t}\n\t}\n\n\tstatic showInputCalendar(e)\n\t{\n\t\tconst zIndex = 4000;\n\t\tlet target = e.target || e.srcElement;\n\t\tif (Type.isDomNode(target) && target.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tBX.calendar({node: target.parentNode, field: target, bTime: false});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tif (BX.calendar.get().popup)\n\t\t\t{\n\t\t\t\tBX.removeCustomEvent(BX.calendar.get().popup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(BX.calendar.get().popup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t\tBX.calendar.get().popup.popupContainer.style.zIndex = zIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\thandleDateFromChange()\n\t{\n\t\tlet\n\t\t\tfromTime = Util.parseTime(this.DOM.fromTime.value),\n\t\t\ttoTime = Util.parseTime(this.DOM.toTime.value),\n\t\t\tfromDate = Util.parseDate(this.DOM.fromDate.value),\n\t\t\ttoDate = Util.parseDate(this.DOM.toDate.value);\n\n\t\tif (this.lastDateValue)\n\t\t{\n\t\t\tif (this.DOM.fullDay.checked && this.lastDateValue)\n\t\t\t{\n\t\t\t\tthis.lastDateValue.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (fromDate && fromTime)\n\t\t\t\t{\n\t\t\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t}\n\n\t\t\t\tif (toDate && toTime)\n\t\t\t\t{\n\t\t\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fromDate && this.lastDateValue)\n\t\t\t{\n\t\t\t\ttoDate = new Date(fromDate.getTime()\n\t\t\t\t\t+ ((toDate.getTime() - this.lastDateValue.getTime()) || 3600000));\n\n\t\t\t\tif (toDate)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toDate.value = Util.formatDate(toDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.lastDateValue = fromDate;\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeFromChange()\n\t{\n\t\tlet\n\t\t\tfromTime = Util.parseTime(this.DOM.fromTime.value),\n\t\t\ttoTime = Util.parseTime(this.DOM.toTime.value),\n\t\t\tfromDate = Util.parseDate(this.DOM.fromDate.value),\n\t\t\ttoDate = Util.parseDate(this.DOM.toDate.value);\n\n\t\tif (fromDate && fromTime)\n\t\t{\n\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t}\n\n\t\tif (toDate && toTime)\n\t\t{\n\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\t\t}\n\n\t\tif (this.lastDateValue)\n\t\t{\n\t\t\tlet newToDate = new Date(\n\t\t\t\tUtil.getTimeRounded(fromDate) +\n\t\t\t\tUtil.getTimeRounded(toDate)\n\t\t\t\t- Util.getTimeRounded(this.lastDateValue)\n\t\t\t);\n\t\t\tthis.DOM.toTime.value = Util.formatTime(newToDate);\n\t\t\tthis.DOM.toDate.value = Util.formatDate(newToDate);\n\t\t}\n\n\t\tthis.lastDateValue = fromDate;\n\t\tthis.handleValueChange();\n\t}\n\n\thandleDateToChange()\n\t{\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeToChange()\n\t{\n\t\tthis.handleValueChange();\n\t}\n\n\thandleFullDayChange()\n\t{\n\t\tlet fullDay = this.getFullDayValue();\n\n\t\tif (fullDay)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t}\n\n\thandleValueChange()\n\t{\n\t\tthis.emit('onChange', new BaseEvent({data: {value: this.getValue()}}));\n\t}\n\n\tgetFullDayValue()\n\t{\n\t\treturn !!this.DOM.fullDay.checked;\n\t}\n\n\tswitchTimezone(showTimezone)\n\t{\n\t\tif (!Type.isBoolean(showTimezone))\n\t\t{\n\t\t\tshowTimezone = BX.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\n\t\tif (showTimezone)\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tchangeInlineEditMode()\n\t{\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.setInlineEditMode('edit');\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode && this.currentInlineEditMode === 'edit')\n\t\t{\n\t\t\tthis.setInlineEditMode('view');\n\t\t}\n\t}\n\n\tsetInlineEditMode(currentInlineEditMode)\n\t{\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.currentInlineEditMode = currentInlineEditMode;\n\t\t\tif (this.currentInlineEditMode === 'edit')\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class BusyUsersDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.plural = params.users.length > 1;\n\n\t\tlet i, userNames = [];\n\t\tfor (i = 0; i < params.users.length; i++)\n\t\t{\n\t\t\tuserNames.push(params.users[i].DISPLAY_NAME);\n\t\t}\n\t\tuserNames = userNames.join(', ');\n\n\t\tlet content = BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-busy-users-content-wrap'},\n\t\t\thtml: '<div class=\"calendar-busy-users-content\">'\n\t\t\t\t+ BX.util.htmlspecialchars(this.plural ?\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_PLURAL').replace('#USER_LIST#', userNames)\n\t\t\t\t\t:\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_SINGLE').replace('#USER_NAME#', params.users[0].DISPLAY_NAME))\n\t\t\t\t+ '</div>'\n\t\t});\n\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_BUSY_USERS_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\t// buttons: [\n\t\t\t// \tnew BX.PopupWindowButtonLink({\n\t\t\t// \t\ttext: Loc.getMessage('EC_BUSY_USERS_CLOSE'),\n\t\t\t// \t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t// \t\tevents: {click : () => {\n\t\t\t// \t\t\t// if (this.simpleEntryPopup)\n\t\t\t// \t\t\t// \tthis.simpleEntryPopup.close();\n\t\t\t// \t\t\t//\n\t\t\t// \t\t\t// if (this.calendar.editSlider)\n\t\t\t// \t\t\t// \tthis.calendar.editSlider.close();\n\t\t\t//\n\t\t\t// \t\t\tthis.close();\n\t\t\t// \t\t}\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// ],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_BUSY_USERS_BACK2EDIT'),\n\t\t\tevents: {click : () => {this.close();}}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: this.plural ? Loc.getMessage('EC_BUSY_USERS_EXCLUDE_PLURAL') : Loc.getMessage('EC_BUSY_USERS_EXCLUDE_SINGLE'),\n\t\t\tevents: {click : () => {\n\t\t\t\tthis.emit('onSaveWithout');\n\t\t\t\tthis.close();\n\t\t\t}}\n\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Runtime, Tag, Loc, Text} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {Popup, MenuManager} from 'main.popup';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\n\nexport class UserPlannerSelector extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tstatic MAX_USER_COUNT = 8; // 8\n\tstatic MAX_USER_COUNT_DISPLAY = 10; // 10\n\tstatic PLANNER_WIDTH = 450;\n\tzIndex = 4200;\n\treadOnlyMode = true;\n\tmeetingNotifyValue = true;\n\tuserSelectorDialog = null;\n\tattendeesEntityList = [];\n\tinlineEditMode = UserPlannerSelector.VIEW_MODE;\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.UserPlannerSelector');\n\t\tthis.selectorId = params.id || 'user-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.BX = Util.getBX();\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap,\n\t\t\twrap: params.wrap,\n\t\t\tinformWrap: params.informWrap,\n\t\t\tmoreLink: params.outerWrap.querySelector('.calendar-members-more'),\n\t\t\tchangeLink: params.outerWrap.querySelector('.calendar-members-change-link'),\n\t\t\tattendeesLabel: params.outerWrap.querySelector('.calendar-attendees-label'),\n\t\t\tattendeesList: params.outerWrap.querySelector('.calendar-attendees-list'),\n\t\t\tuserSelectorWrap: params.outerWrap.querySelector('.calendar-user-selector-wrap'),\n\t\t\tplannerOuterWrap: params.plannerOuterWrap,\n\t\t\tchatLink: params.outerWrap.querySelector('.calendar-create-chat-link'),\n\t\t};\n\t\tthis.refreshPlanner = Runtime.debounce(this.refreshPlannerState, 100, this);\n\n\t\tif (Type.isBoolean(params.readOnlyMode))\n\t\t{\n\t\t\tthis.readOnlyMode = params.readOnlyMode;\n\t\t}\n\n\t\tthis.userId = params.userId;\n\t\tthis.type = params.type;\n\t\tthis.ownerId = params.ownerId;\n\t\tthis.zIndex = params.zIndex || this.zIndex;\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.DOM.changeLink && !this.isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.DOM.changeLink, 'click', () => {\n\t\t\t\tif (!this.userSelectorDialog)\n\t\t\t\t{\n\t\t\t\t\tthis.userSelectorDialog = new EntitySelectorDialog({\n\t\t\t\t\t\ttargetNode: this.DOM.changeLink,\n\t\t\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\t\t\tpreselectedItems: this.attendeesPreselectedItems,\n\t\t\t\t\t\tenableSearch: true,\n\t\t\t\t\t\tzIndex: this.zIndex + 10,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\t\t\t\t\temailUsers: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\t\t\toptions: { 'all-users': true }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tsearchTabOptions: {\n\t\t\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.userSelectorDialog.show();\n\t\t\t});\n\t\t}\n\n\t\tif (this.DOM.moreLink)\n\t\t{\n\t\t\tEvent.bind(this.DOM.moreLink, 'click', this.showMoreAttendeesPopup.bind(this));\n\t\t}\n\n\t\tif (this.DOM.chatLink)\n\t\t{\n\t\t\tEvent.bind(this.DOM.chatLink, 'click', ()=>{this.emit('onOpenChat');});\n\t\t}\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\twidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\tshowEntryName: false\n\t\t});\n\n\t\tEvent.bind(this.DOM.informWrap, 'click', () => {\n\t\t\tthis.setInformValue(!this.meetingNotifyValue);\n\t\t\tthis.emit('onNotifyChange');\n\t\t});\n\n\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\n\t\tthis.planner.subscribe('onDateChange', (event) => {this.emit('onDateChange', event);});\n\t}\n\n\tsetValue({attendeesEntityList, attendees, location, notify, viewMode, entryId})\n\t{\n\t\tthis.attendeesEntityList = Type.isArray(attendeesEntityList) ? attendeesEntityList : [];\n\t\tthis.attendeesPreselectedItems = this.attendeesEntityList.map((item) => {return [item.entityId, item.id]});\n\n\t\tthis.entryId = entryId;\n\t\tif (this.attendeesEntityList.length > 1 && !viewMode)\n\t\t{\n\t\t\tthis.showPlanner();\n\t\t}\n\n\t\tif (this.DOM.chatLink)\n\t\t{\n\t\t\tthis.DOM.chatLink.style.display = 'none';\n\t\t}\n\n\t\tthis.setEntityList(this.attendeesEntityList);\n\t\tthis.setInformValue(notify);\n\t\tthis.setLocationValue(location);\n\n\t\tif (Type.isArray(attendees))\n\t\t{\n\t\t\tthis.displayAttendees(attendees);\n\n\t\t\tif (window.location.host === 'cp.bitrix.ru'\n\t\t\t\t&& this.DOM.chatLink\n\t\t\t\t&& viewMode\n\t\t\t\t&& attendees.length > 1\n\t\t\t\t&& attendees.find((user)=>{return user.STATUS !== 'N' && parseInt(user.ID) === parseInt(this.userId);})\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.DOM.chatLink.style.display = '';\n\t\t\t}\n\t\t}\n\t\tthis.refreshPlanner();\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tthis.showPlanner();\n\t\tthis.setEntityList(this.userSelectorDialog.getSelectedItems().map((item) => {\n\t\t\treturn {\n\t\t\t\tentityId: item.entityId,\n\t\t\t\tid: item.id,\n\t\t\t\tentityType: item.entityType,\n\t\t\t}}));\n\n\t\tthis.refreshPlanner();\n\t\tthis.emit('onUserCodesChange');\n\t}\n\n\tgetEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetEntityList(selectorEntityList)\n\t{\n\t\tif (this.type === 'user' && this.userId !== this.ownerId)\n\t\t{\n\t\t\tselectorEntityList.push({entityId: 'user', id: this.ownerId});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselectorEntityList.push({entityId: 'user', id: this.userId});\n\t\t}\n\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this.readOnlyMode;\n\t}\n\n\tgetUserSelector()\n\t{\n\t\treturn BX.UI.SelectorManager.instances[this.selectorId];\n\t}\n\n\thandleAdditionalParams(params = {})\n\t{\n\t}\n\n\tshowUserSelectorLoader()\n\t{\n\n\t}\n\n\thideUserSelectorLoader()\n\t{\n\n\t}\n\n\tshowPlanner()\n\t{\n\t\tif (!this.isPlannerDisplayed())\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'user-selector-edit-mode');\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\t\t}\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tif (this.planner && this.planner.isShown())\n\t\t{\n\t\t\tlet dateTime = this.getDateTime();\n\t\t\tthis.loadPlannerData({\n\t\t\t\tentityList: this.getEntityList(),\n\t\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\tlocation: this.getLocationValue(),\n\t\t\t\tentryId: this.entryId\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.displayAttendees(\n\t\t\t\t\t\t(response.data.entries || [])\n\t\t\t\t\t\t\t.filter((item)=>{return item.type === 'user'})\n\t\t\t\t\t\t\t.map((item)=>{return{\n\t\t\t\t\t\t\t\tID: item.id,\n\t\t\t\t\t\t\t\tAVATAR: item.avatar,\n\t\t\t\t\t\t\t\tDISPLAY_NAME: item.name,\n\t\t\t\t\t\t\t\tEMAIL_USER: item.emailUser,\n\t\t\t\t\t\t\t\tSTATUS: (item.status || '').toUpperCase(),\n\t\t\t\t\t\t\t\tURL: item.url\n\t\t\t\t\t\t\t}})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t}\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: params.entryId || 0,\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tentityList: params.entityList || [],\n\t\t\t\t\tdateFrom: params.from || '',\n\t\t\t\t\tdateTo: params.to || '',\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tentries: params.entrieIds || false\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\tlet dateTime = this.getDateTime();\n\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\n\t\t});\n\t}\n\n\tsetDateTime(dateTime, updatePlaner = false)\n\t{\n\t\tthis.dateTime = dateTime;\n\n\t\tif (this.planner && updatePlaner)\n\t\t{\n\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t}\n\t}\n\n\tgetDateTime()\n\t{\n\t\treturn this.dateTime;\n\t}\n\n\tsetLocationValue(location)\n\t{\n\t\tthis.location = location;\n\t}\n\n\tgetLocationValue()\n\t{\n\t\treturn this.location;\n\t}\n\n\tdisplayAttendees(attendees = [])\n\t{\n\t\tDom.clean(this.DOM.attendeesList);\n\t\tthis.attendeeList = {\n\t\t\taccepted : attendees.filter((user) => {return ['H', 'Y'].includes(user.STATUS);}),\n\t\t\trequested : attendees.filter((user) => {return user.STATUS === 'Q' || user.STATUS === ''}),\n\t\t\tdeclined : attendees.filter((user) => {return user.STATUS === 'N'})\n\t\t};\n\n\t\tlet userLength = this.attendeeList.accepted.length;\n\t\tif (userLength > 0)\n\t\t{\n\t\t\tif (userLength > UserPlannerSelector.MAX_USER_COUNT_DISPLAY)\n\t\t\t{\n\t\t\t\tuserLength = UserPlannerSelector.MAX_USER_COUNT;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < userLength; i++)\n\t\t\t{\n\t\t\t\tthis.attendeeList.accepted[i].shown = true;\n\t\t\t\tthis.DOM.attendeesList.appendChild(UserPlannerSelector.getUserAvatarNode(this.attendeeList.accepted[i]));\n\t\t\t}\n\t\t}\n\n\t\tif (userLength > 1)\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_NUM')).replace('#COUNT#', `<span>(</span>${this.attendeeList.accepted.length}<span>)</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\t\t}\n\n\t\tif (userLength < attendees.length)\n\t\t{\n\t\t\tif (userLength === 1)\n\t\t\t{\n\t\t\t\tthis.DOM.moreLink.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_ALL_COUNT').replace('#COUNT#', attendees.length));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.moreLink.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_ALL'));\n\t\t\t}\n\t\t\tDom.show(this.DOM.moreLink);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.hide(this.DOM.moreLink);\n\t\t}\n\t}\n\n\tstatic getUserAvatarNode(user)\n\t{\n\t\tlet\n\t\t\timageNode,\n\t\t\timg = user.AVATAR || user.SMALL_AVATAR;\n\t\tif (!img || img === \"/bitrix/images/1.gif\")\n\t\t{\n\t\t\timageNode = Tag.render`<div title=\"${Text.encode(user.DISPLAY_NAME)}\" class=\"ui-icon ${(user.EMAIL_USER ? 'ui-icon-common-user-mail' : 'ui-icon-common-user')}\"><i></i></div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\timageNode = Tag.render`\n\t\t\t<img \n\t\t\t\ttitle=\"${Text.encode(user.DISPLAY_NAME)}\" \n\t\t\t\tclass=\"calendar-member\" \n\t\t\t\tid=\"simple_popup_${parseInt(user.ID)}\"\n\t\t\t\tsrc=\"${img}\"\n\t\t\t>`;\n\t\t}\n\t\treturn imageNode;\n\t}\n\n\tshowMoreAttendeesPopup()\n\t{\n\t\tif (this.morePopup)\n\t\t{\n\t\t\tthis.morePopup.destroy();\n\t\t}\n\n\t\tconst submenuClass = 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label';\n\t\tconst menuItems = [];\n\n\t\t[\n\t\t\t{\n\t\t\t\tcode: 'accepted', // Accepted\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Y_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'requested', // Still thinking about\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Q_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'declined', // Declined\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_N_NUM')\n\t\t\t},\n\t\t].forEach((group) => {\n\t\t\tlet groupUsers = this.attendeeList[group.code];\n\t\t\tif (groupUsers.length > 0)\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: '<span>' + group.title.replace('#COUNT#', groupUsers.length) + '</span>',\n\t\t\t\t\tclassName: submenuClass\n\t\t\t\t});\n\n\t\t\t\tgroupUsers.forEach((user) => {\n\t\t\t\t\tmenuItems.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: BX.util.htmlspecialchars(user.DISPLAY_NAME),\n\t\t\t\t\t\t\tdataset: {user: user},\n\t\t\t\t\t\t\tclassName: 'calendar-add-popup-user-menu-item',\n\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\tuser.URL,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloader: \"intranet:profile\",\n\t\t\t\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\t\t\t\t\tcontentClassName: \"bitrix24-profile-slider-content\",\n\t\t\t\t\t\t\t\t\t\twidth: 1100\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.morePopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.morePopup = MenuManager.create(\n\t\t\t'compact-event-form-attendees' + Math.round(Math.random() * 100000),\n\t\t\tthis.DOM.moreLink,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tclassName: 'calendar-popup-user-menu'\n\t\t\t}\n\t\t);\n\n\t\tthis.morePopup.show();\n\t\tthis.morePopup.menuItems.forEach((item) => {\n\t\t\tconst icon = item.layout.item.querySelector('.menu-popup-item-icon');\n\t\t\tif (Type.isPlainObject(item.dataset))\n\t\t\t{\n\t\t\t\ticon.appendChild(UserPlannerSelector.getUserAvatarNode(item.dataset.user))\n\t\t\t}\n\t\t});\n\t}\n\n\n\tsetInformValue(value)\n\t{\n\t\tif (Type.isBoolean(value))\n\t\t{\n\t\t\tconst DISABLED_CLASS = 'calendar-field-container-inform-off';\n\t\t\tthis.meetingNotifyValue = value;\n\t\t\tif (this.meetingNotifyValue)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_ON_TITLE');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_OFF_TITLE');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetInformValue(value)\n\t{\n\t\treturn this.meetingNotifyValue;\n\t}\n\n\tsetViewMode(readOnlyMode)\n\t{\n\t\tthis.readOnlyMode = readOnlyMode;\n\t\tif (this.readOnlyMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t}\n\n\tisPlannerDisplayed()\n\t{\n\t\treturn this.planner.isShown();\n\t}\n\n\thasExternalEmailUsers()\n\t{\n\t\treturn !!this.getEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tdestroySelector()\n\t{\n\t\tif (this.userSelectorDialog)\n\t\t{\n\t\t\tthis.userSelectorDialog.destroy();\n\t\t \tthis.userSelectorDialog = null;\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\n\nexport class ReinviteUserDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ReinviteUserDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'reinvite-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst content = Dom.create('DIV');\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_REINVITE_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'reinvite-popup-window',\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tnew BX.UI.Button({\n\t\t\ttext : Loc.getMessage('EC_REINVITE_YES'),\n\t\t\tclassName: \"ui-btn ui-btn-primary\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: true}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_REINVITE_NO'),\n\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: false}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Tag, Loc, Dom, Event, Type, Runtime} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {PopupManager} from 'main.popup';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nexport class EmailSelectorControl extends EventEmitter\n{\n\tDOM = {};\n\tCONFIRM_POPUP_ID = 'add_from_email';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailSelectorControl');\n\t\tthis.DOM.select = params.selectNode;\n\t\tthis.mailboxList = Type.isArray(params.mailboxList) ? params.mailboxList : [];\n\t\tthis.DOM.componentWrap = this.DOM.select.parentNode.appendChild(Tag.render`<div style=\"display: none;\"></div>`);\n\t\tthis.allowAddNewEmail = params.allowAddNewEmail;\n\t\tthis.checkValueDebounce = Runtime.debounce(this.checkValue, 50, this);\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.setSelectValues();\n\t\tEvent.bind(this.DOM.select, 'change', this.checkValueDebounce);\n\t\tEvent.bind(this.DOM.select, 'click', this.checkValueDebounce);\n\t}\n\n\tcheckValue()\n\t{\n\t\tif (this.DOM.select.value === 'add')\n\t\t{\n\t\t\tthis.showAdd();\n\t\t\tthis.setValue('');\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.DOM.select.value;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.mailboxList.length\n\t\t\t&& this.mailboxList.find((mailbox) => {return mailbox.email === value}))\n\t\t{\n\t\t\tthis.DOM.select.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select.value = '';\n\t\t}\n\t\tthis.emit('onSetValue', {\n\t\t\tvalue: this.DOM.select.value\n\t\t});\n\t}\n\n\tsetSelectValues()\n\t{\n\t\tDom.clean(this.DOM.select);\n\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_NO_VALUE'), ''));\n\t\tif (this.mailboxList.length)\n\t\t{\n\t\t\tthis.mailboxList.forEach((value) => {\n\t\t\t\tthis.DOM.select.options.add(new Option(value.formatted, value.email));\n\t\t\t}, this);\n\t\t}\n\n\t\tif (this.allowAddNewEmail)\n\t\t{\n\t\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_ADD_NEW'), 'add'));\n\t\t}\n\t}\n\n\tonClick(item)\n\t{\n\t\tthis.input.value = item.sender;\n\t\tthis.mailbox.textContent = item.sender;\n\t}\n\n\tshowAdd()\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\twindow.BXMainMailConfirm.showForm(this.onAdd.bind(this));\n\t\t}\n\t\tconst mainMailConfirmPopup = PopupManager.getPopupById(this.CONFIRM_POPUP_ID);\n\t\tif (mainMailConfirmPopup)\n\t\t{\n\t\t\tmainMailConfirmPopup.subscribe('onClose', ()=>{\n\t\t\t\tthis.reloadMailboxList();\n\t\t\t});\n\t\t}\n\t}\n\n\tonAdd(data)\n\t{\n\t\tthis.reloadMailboxList()\n\t\t\t.then(() => {\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.setValue(data.email);\n\t\t\t\t},0);\n\t\t\t});\n\t}\n\n\tgetMenuItem(item)\n\t{\n\t\treturn {\n\t\t\t'id': item.id,\n\t\t\t'text': BX.util.htmlspecialchars(item.sender),\n\t\t\t'onclick': this.onClick.bind(this, item)\n\t\t};\n\t}\n\n\tloadMailboxData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxData')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tBX.html(this.DOM.componentWrap, response.data.html);\n\t\t\t\t\t\tthis.mailboxList = response.data.additionalParams.mailboxList;\n\t\t\t\t\t\tthis.checkBXMainMailConfirmLoaded(resolve);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcheckBXMainMailConfirmLoaded(resolve)\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\tthis.setSelectValues();\n\t\t\tresolve();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(()=>{this.checkBXMainMailConfirmLoaded(resolve)}, 200);\n\t\t}\n\t}\n\n\treloadMailboxList()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxList')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.mailboxList = response.data.mailboxList;\n\t\t\t\t\t\tthis.setSelectValues();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n}","import {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class ConfirmedEmailDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tSLIDER_Z_INDEX = 4400;\n\tWIDTH = 400;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmedEmailDialog');\n\t\tthis.id = 'confirm-email-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-confirm-email-text\">${Loc.getMessage('EC_CONFIRMED_EMAIL_TEXT')}</div>\n\t\t\t<div class=\"calendar-confirm-email-text\"><a class=\"calendar-confirm-email-help-link\" href=\"javascript:void(0);\">${Loc.getMessage('EC_CONFIRMED_EMAIL_HELP_LINK')}</a></div>\n\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t<select class=\"calendar-field calendar-field-select ui-btn ui-btn ui-btn-light-border ui-btn-clock\"></select>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_CONFIRMED_EMAIL_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'confirmemail-popup-window',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_CONFIRMED_EMAIL_SEND'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ${BX.UI.Button.State.DISABLED}`,\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst userSettings = Util.getUserSettings();\n\t\t\t\t\t\t\tuserSettings.sendFromEmail = this.emailSelectorControl.getValue();\n\t\t\t\t\t\t\tUtil.setUserSettings(userSettings);\n\t\t\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'sendFromEmail', userSettings.sendFromEmail);\n\t\t\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendFromEmail: userSettings.sendFromEmail}}));\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tthis.DOM.processButton = this.dialog.buttons[0].button;\n\n\t\tthis.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\tDom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\tthis.DOM.select.disabled = true;\n\n\t\tthis.emailSelectorControl = new EmailSelectorControl({\n\t\t\tselectNode: this.DOM.select,\n\t\t\tallowAddNewEmail: true\n\t\t});\n\t\tEvent.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\tthis.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\n\t\tthis.emailSelectorControl.loadMailboxData()\n\t\t\t.then(()=> {\n\t\t\t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t\t\tthis.DOM.select.disabled = false;\n\t\t\t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t\t});\n\n\t\tthis.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\tEvent.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\thandleSelectChanges()\n\t{\n\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t{\n\t\t\tDom.removeClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t}\n\n\topenHelpSlider()\n\t{\n\t\tif(BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=12070142\", {zIndex: this.SLIDER_Z_INDEX});\n\t\t}\n\t}\n}","'use strict';\nimport {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class EmailLimitationDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tEXPAND_LICENSE_URL = '/settings/license_all.php';\n\tWIDTH = 480;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailLimitationDialog');\n\t\tthis.id = 'email-limitation-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst eventsAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst limit = Util.isEventWithEmailGuestAllowed();\n\t\tif (eventsAmount === 4)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_5');\n\t\t}\n\t\telse if(eventsAmount === 8)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_9');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_DENY');\n\t\t}\n\t\tthis.subText = Loc.getMessage('EC_EMAIL_LIMIT_SUBTEXT');\n\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-email-limit-text\">${this.text}</div>\n\t\t\t<div class=\"calendar-email-limit-subtext\">${this.subText}</div>\n\t\t</div>`;\n\n\t\tthis.dialog = this.getDialogPopup();\n\n\t\tthis.dialog.subscribe('onClose', ()=>{\n\t\t\tthis.emit('onClose');\n\t\t});\n\n\t\t// this.DOM.processButton = this.dialog.buttons[0].button;\n\t\t//\n\t\t// this.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\t// Dom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\t// this.DOM.select.disabled = true;\n\t\t//\n\t\t// this.emailSelectorControl = new EmailSelectorControl({\n\t\t// \tselectNode: this.DOM.select,\n\t\t// \tallowAddNewEmail: true\n\t\t// });\n\t\t// Event.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\t// this.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\t\t//\n\t\t// this.emailSelectorControl.loadMailboxData()\n\t\t// \t.then(()=> {\n\t\t// \t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t// \t\tthis.DOM.select.disabled = false;\n\t\t// \t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t// \t});\n\t\t//\n\t\t// this.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\t// Event.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tgetDialogPopup()\n\t{\n\t\treturn new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc: true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EMAIL_LIMIT_TITLE'),\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: 'email-limit-popup',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_EMAIL_LIMIT_EXPAND_PLAN'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ui-btn-icon-plan`,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.open(this.EXPAND_LICENSE_URL, '_blank');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Util.isEventWithEmailGuestAllowed() ? Loc.getMessage('EC_SEC_SLIDER_CLOSE') : Loc.getMessage('EC_EMAIL_LIMIT_SAVE_WITHOUT'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-link`,\n\t\t\t\t\tevents: {click: this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}"],"names":["TimeSelector","params","DOM","wrap","input","onChangeCallback","Type","isFunction","create","selectContol","BX","Calendar","Controls","SelectInput","zIndex","Z_INDEX","values","getValueList","minWidth","MIN_WIDTH","getInputValue","value","time","isDate","h","getHours","m","getMinutes","Util","parseTime","adaptedValue","adaptTimeValue","setValue","hour","Math","floor","min","formatTime","timeValue","parseInt","timeList","diff","ind","i","length","abs","valueList","push","label","Reminder","setEventNamespace","getValues","id","round","random","rawValuesMap","Map","viewMode","changeCallack","showPopupCallBack","hidePopupCallBack","selectedValues","bindEventHandlers","isElementNode","Dom","addClass","addButton","appendChild","Tag","render","Loc","getMessage","isDomNode","Event","bind","showPopup","handleClick","fullDayMode","concat","shortLabel","extendedMode","dataset","mode","daysBefore","defaultReminderTime","reminderList","emitChanges","isArray","forEach","addValue","selectedRawValues","get","_this","menuItems","item","util","in_array","menuItem","getTimeByInt","text","replace","objectMerge","type","items","getSubmenuTimeValues","onclick","before","defer","reminderMenu","close","MenuManager","closeByEsc","autoHide","offsetTop","offsetLeft","angle","cacheable","adjustSubmenuPopup","closeSubmenuPopup","EventEmitter","subscribe","popupWindow","unsubscribe","show","parentItem","parentItemMessage","getTimeValueList","e","parentMenuItem","getMenuItem","setText","formattedValue","formatValue","isPlainObject","includes","isInteger","getReminderLabel","formatDateUsable","controlList","set","undefined","props","className","getText","events","click","removeValue","emit","BaseEvent","data","remove","deleteFromArray","array_search","target","srcElement","remValue","getAttribute","event","submenuPopup","getTarget","Popup","test","getId","adjustTimeSubmenuPopup","adjustCalendarSubmenuPopup","layout","bindElement","textNode","querySelector","clean","innerHTML","popup","selectedMenuItem","getContentContainer","setTimeout","scrollTop","calendarControl","calendar","_current_layer","_layers","Show","node","formatDateTime","getUsableDateTime","Date","field","bTime","bHideTime","calendarPopup","popupContainer","calendarWrap","contentContainer","destroy","uniquePopupId","dateValue","parseDate","style","display","removeClass","tempValue","dividers","messageCodes","result","toString","ceil","timeValueList","remindValue","nodeName","toLowerCase","parentNode","onCustomEvent","window","removeCustomEvent","inputCalendarClosePopupHandler","addCustomEvent","Location","wrapNode","disabled","richLocationEnabled","inlineEditModeEnabled","meetingRooms","iblockMeetingRoomList","setMeetingRoomList","setLocationList","locationList","inputWrap","inlineEditLinkWrap","inlineEditLink","displayInlineEditControls","B24","licenseInfoPopup","attrs","name","inputName","placeholder","autocomplete","menuItemList","selectedIndex","getMeetingRoomList","getLocationList","room","ID","htmlspecialchars","NAME","labelRaw","delimiter","callback","editMeetingRooms","str","getTextLocation","valueIndex","delegate","getControlContentCallback","showEditMeetingRooms","buildLocationEditControl","editDialog","editDialogContent","PopupWindow","overlay","opacity","draggable","bindOnResize","titleBar","closeIcon","right","top","buttons","PopupWindowButton","saveValues","PopupWindowButtonLink","content","locationEditControlShown","editDialogWrap","locationRoomList","addNewButtonField","addRoomField","outerWrap","innerWrap","innerCont","html","lastItem","deleted","trim","paddingRight","keyup","keyCode","editRoom","delRoomEntry","deleteField","focus","changed","ajax","runAction","then","response","setValues","res","mrevid","room_event_id","parseStringValue","textLocation","Text","encode","location","isString","substr","split","isNaN","mrid","room_id","meetingRoomList","UserSelector","destinationInputName","itemsSelected","convertAttendeesCodes","socnetDestinationWrap","SocNetLogDestination","openDialog","socnetDestinationItems","targ","deleteItem","preventDefault","stopPropagation","mouseover","mouseout","socnetDestinationInputWrap","socnetDestinationInput","keydown","searchBeforeHandler","formName","inputId","searchHandler","linkId","sendAjax","socnetDestinationLink","addLinkMessage","message","init","selectGroups","groups","department","sonetgroups","selectUsers","users","searchInput","extranetUser","userSearchArea","bindMainPopup","bindSearchPopup","select","selectCallback","unSelect","unSelectCallback","openDialogCallback","closeDialog","closeDialogCallback","openSearch","closeSearch","itemsLast","departmentSelectDisable","isOpenDialog","type1","prefix","children","getSelectedCount","search","elements","findChildren","attribute","j","popupSearchWindow","cleanInputValue","isOpenSearch","backspaceDisable","unbind","inputsList","getElementsByTagName","codes","attendeesCodes","code","getAttendeesCodes","hasOwnProperty","ColorSelector","defaultColors","getDefaultColorList","colors","LINE_MODE","setViewMode","color","backgroundColor","customColorNode","width","customColorLink","colorPickerPopup","ColorPicker","onColorSelected","popupOptions","open","handleColorClick","SELECTOR_MODE","colorIcon","openPopup","findTargetNode","activeColor","activeColorNode","isShown","icon","element","left","SectionSelector","sectionList","sectionGroupList","openPopupCallback","closePopupCallback","getCurrentSection","defaultCalendarType","defaultOwnerId","initEventHandlers","selectImageWrap","selectInnerText","getCurrentTitle","innerValue","getCurrentColor","sectionMenu","submenuClass","sectionIdList","getSectionList","sectionGroup","filteredList","belongsToView","filter","sectionBelongsToView","section","getSectionType","getSectionOwner","ownerId","title","overflow","maxHeight","setWidth","offsetWidth","overflowX","PopupMenu","PERM","edit","canDo","find","imageSrc","getSectionImage","imageNode","sectionItem","COLOR","updateSectionImageNode","updateValue","adjust","CAL_TYPE","IMAGE","OWNER_ID","RepeatSelector","formElements","rruleType","form","getDate","interval","rruleEndsOn","never","count","until","changeType","proxy","checked","toUpperCase","fromDate","day","getWeekDayByInd","getDay","rrule","FREQ","INTERVAL","COUNT","BYDAY","defaultValue","openTitle","curInd","onClick","onFocus","onBlur","onKeyup","currentValue","currentValueIndex","shown","popupMenu","onChange","max","menuContainer","offsetHeight","closePopup","val","PopupDialog","dialog","getTitle","getButtons","getContent","ViewSelector","views","popupId","currentView","currentViewMode","selectorText","selectorTextInner","viewModeTextInner","created","view","hotkey","menuPopup","getMenuItems","LineViewSelector","viewsMap","WeakMap","viewData","currentActiveWrap","AddButton","showTasks","addEntryHandler","addEntry","addTaskHandler","addTask","addButtonExtra","addBtnMenu","MeetingStatusControl","getBX","Error","status","currentStatus","updateStatus","acceptBtn","UI","Button","accept","renderTo","declineBtn","decline","getContainer","setStatus","emitEvent","ConfirmStatusDialog","recursionMode","buttonNode","ConfirmEditDialog","ConfirmDeleteDialog","entry","deleteThis","deleteNext","deleteAll","DateTimeControl","uid","options","showTimezone","inlineEditMode","currentInlineEditMode","UID","outerContent","leftInnerWrap","DATE_INPUT_WIDTH","fromDateText","fromTime","TIME_INPUT_WIDTH","fromTimeText","rightInnerWrap","toTime","toTimeText","toDate","toDateText","fromTimeControl","handleTimeFromChange","toTimeControl","handleTimeToChange","fullDayWrap","fullDay","formatDate","from","to","lastDateValue","timezoneFrom","timezoneName","timezoneTo","fromTz","toTz","switchTimezone","handleFullDayChange","setHours","showInputCalendar","handleDateFromChange","handleDateToChange","handleValueChange","changeInlineEditMode","defTimezone","bindFromToDefaultTimezones","tzButton","bindTimezones","getTime","newToDate","getTimeRounded","getFullDayValue","dateTimeWrap","getValue","isBoolean","hasClass","tzCont","setInlineEditMode","BusyUsersDialog","plural","userNames","DISPLAY_NAME","join","UserPlannerSelector","VIEW_MODE","selectorId","informWrap","moreLink","changeLink","attendeesLabel","attendeesList","userSelectorWrap","plannerOuterWrap","chatLink","refreshPlanner","Runtime","debounce","refreshPlannerState","readOnlyMode","userId","isReadOnly","userSelectorDialog","EntitySelectorDialog","targetNode","context","preselectedItems","attendeesPreselectedItems","enableSearch","handleUserSelectorChanges","entities","inviteGuestLink","emailUsers","selectMode","searchTabOptions","stubOptions","subtitle","iconOpacity","arrow","showMoreAttendeesPopup","planner","Planner","PLANNER_WIDTH","showEntryName","setInformValue","meetingNotifyValue","attendeesEntityList","attendees","notify","entryId","map","entityId","showPlanner","setEntityList","setLocationValue","displayAttendees","host","user","STATUS","getSelectedItems","entityType","selectorEntityList","SelectorManager","instances","isPlannerDisplayed","showLoader","dateTime","getDateTime","loadPlannerData","entityList","getEntityList","getDayLength","timezone","getLocationValue","entries","AVATAR","avatar","EMAIL_USER","emailUser","URL","url","Promise","resolve","dateFrom","dateTo","entrieIds","hideLoader","update","accessibility","updateSelector","updatePlaner","attendeeList","accepted","requested","declined","userLength","MAX_USER_COUNT_DISPLAY","MAX_USER_COUNT","getUserAvatarNode","hide","morePopup","group","groupUsers","SidePanel","Instance","loader","allowChangeHistory","contentClassName","DISABLED_CLASS","img","SMALL_AVATAR","ReinviteUserDialog","sendInvitesAgain","EmailSelectorControl","selectNode","mailboxList","componentWrap","allowAddNewEmail","checkValueDebounce","checkValue","setSelectValues","showAdd","mailbox","email","add","Option","formatted","sender","textContent","BXMainMailConfirm","showForm","onAdd","mainMailConfirmPopup","PopupManager","getPopupById","CONFIRM_POPUP_ID","reloadMailboxList","additionalParams","checkBXMainMailConfirmLoaded","ConfirmedEmailDialog","WIDTH","State","DISABLED","userSettings","getUserSettings","sendFromEmail","emailSelectorControl","setUserSettings","userOptions","save","processButton","button","CLOCKING","handleSelectChanges","loadMailboxData","helpLinlk","openHelpSlider","Helper","SLIDER_Z_INDEX","EmailLimitationDialog","eventsAmount","getEventWithEmailGuestAmount","limit","isEventWithEmailGuestAllowed","subText","getDialogPopup","EXPAND_LICENSE_URL"],"mappings":";;;;;KAGaA,YAAb;CAKC,wBAAYC,MAAZ,EACA;CAAA;CAAA,iDALU,IAKV;CAAA,mDAJY,GAIZ;CACC,SAAKC,GAAL,GAAW;CACVC,MAAAA,IAAI,EAAEF,MAAM,CAACE,IADH;CAEVC,MAAAA,KAAK,EAAEH,MAAM,CAACG;CAFJ,KAAX;CAKA,SAAKC,gBAAL,GAAwBC,cAAI,CAACC,UAAL,CAAgBN,MAAM,CAACI,gBAAvB,IAA2CJ,MAAM,CAACI,gBAAlD,GAAqE,IAA7F;CACA,SAAKG,MAAL;CACA;;CAdF;CAAA;CAAA,6BAiBC;CAAA;;CACC,WAAKC,YAAL,GAAoB,IAAIC,EAAE,CAACC,QAAH,CAAYC,QAAZ,CAAqBC,WAAzB,CAAqC;CACxDT,QAAAA,KAAK,EAAE,KAAKF,GAAL,CAASE,KADwC;CAExDU,QAAAA,MAAM,EAAE,KAAKC,OAF2C;CAGxDC,QAAAA,MAAM,EAAEhB,YAAY,CAACiB,YAAb,EAHgD;CAIxDC,QAAAA,QAAQ,EAAE,KAAKC,SAJyC;CAKxDd,QAAAA,gBAAgB,EAAE,4BAAM;CACvB,cAAI,KAAI,CAACA,gBAAT,EACA;CACC,YAAA,KAAI,CAACA,gBAAL,CAAsB,KAAI,CAACI,YAAL,CAAkBW,aAAlB,EAAtB;CACA;CACD;CAVuD,OAArC,CAApB;CAYA;CA9BF;CAAA;CAAA,6BAwEUC,KAxEV,EAyEC;CACC,UAAIC,IAAJ;;CACA,UAAIhB,cAAI,CAACiB,MAAL,CAAYF,KAAZ,CAAJ,EACA;CACCC,QAAAA,IAAI,GAAG;CACNE,UAAAA,CAAC,EAAEH,KAAK,CAACI,QAAN,EADG;CAENC,UAAAA,CAAC,EAAEL,KAAK,CAACM,UAAN;CAFG,SAAP;CAIA,OAND,MAQA;CACCL,QAAAA,IAAI,GAAGM,kBAAI,CAACC,SAAL,CAAeR,KAAf,CAAP;CACA;;CAED,UAAMS,YAAY,GAAG9B,YAAY,CAAC+B,cAAb,CAA4BT,IAA5B,CAArB;CAEA,WAAKb,YAAL,CAAkBuB,QAAlB,CAA2B;CAACX,QAAAA,KAAK,EAAES,YAAY,CAACT;CAArB,OAA3B;CAEA,UAAIY,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWL,YAAY,CAACT,KAAb,GAAqB,EAAhC,CAAX;CACA,UAAIe,GAAG,GAAIN,YAAY,CAACT,KAAd,GAAuBY,IAAI,GAAG,EAAxC;CAEA,WAAK/B,GAAL,CAASE,KAAT,CAAeiB,KAAf,GAAuBO,kBAAI,CAACS,UAAL,CAAgBJ,IAAhB,EAAsBG,GAAtB,CAAvB;CACA;CA/FF;CAAA;CAAA,mCAgCuBE,SAhCvB,EAiCC;CACCA,MAAAA,SAAS,GAAGC,QAAQ,CAACD,SAAS,CAACd,CAAV,GAAc,EAAf,CAAR,GAA6Be,QAAQ,CAACD,SAAS,CAACZ,CAAX,CAAjD;CACA,UACCc,QAAQ,GAAGxC,YAAY,CAACiB,YAAb,EADZ;CAAA,UAECwB,IAAI,GAAG,KAAK,EAFb;CAAA,UAGCC,GAAG,GAAG,KAHP;CAAA,UAICC,CAJD;;CAMA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGH,QAAQ,CAACI,MAAzB,EAAiCD,CAAC,EAAlC,EACA;CACC,YAAIT,IAAI,CAACW,GAAL,CAASL,QAAQ,CAACG,CAAD,CAAR,CAAYtB,KAAZ,GAAoBiB,SAA7B,IAA0CG,IAA9C,EACA;CACCA,UAAAA,IAAI,GAAGP,IAAI,CAACW,GAAL,CAASL,QAAQ,CAACG,CAAD,CAAR,CAAYtB,KAAZ,GAAoBiB,SAA7B,CAAP;CACAI,UAAAA,GAAG,GAAGC,CAAN;;CACA,cAAIF,IAAI,IAAI,EAAZ,EACA;CACC;CACA;CACD;CACD;;CAED,aAAOD,QAAQ,CAACE,GAAG,IAAI,CAAR,CAAf;CACA;CAvDF;CAAA;CAAA,mCA0DC;CACC,UAAI,CAAC1C,YAAY,CAAC8C,SAAlB,EACA;CACC9C,QAAAA,YAAY,CAAC8C,SAAb,GAAyB,EAAzB;CACA,YAAIH,CAAJ;;CACA,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,EAAhB,EAAoBA,CAAC,EAArB,EACA;CACC3C,UAAAA,YAAY,CAAC8C,SAAb,CAAuBC,IAAvB,CAA4B;CAAC1B,YAAAA,KAAK,EAAEsB,CAAC,GAAG,EAAZ;CAAgBK,YAAAA,KAAK,EAAEpB,kBAAI,CAACS,UAAL,CAAgBM,CAAhB,EAAmB,CAAnB;CAAvB,WAA5B;CACA3C,UAAAA,YAAY,CAAC8C,SAAb,CAAuBC,IAAvB,CAA4B;CAAC1B,YAAAA,KAAK,EAAEsB,CAAC,GAAG,EAAJ,GAAS,EAAjB;CAAqBK,YAAAA,KAAK,EAAEpB,kBAAI,CAACS,UAAL,CAAgBM,CAAhB,EAAmB,EAAnB;CAA5B,WAA5B;CACA;CACD;;CACD,aAAO3C,YAAY,CAAC8C,SAApB;CACA;CAtEF;CAAA;CAAA;6BAAa9C,2BAGO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCDPiD,QAAb;CAAA;;CAG4B;CAQ3B,oBAAYhD,MAAZ,EACA;CAAA;;CAAA;CACC;CADD,mGATsB,GAStB;CAAA,2FARc,KAQd;CAAA,4FAPe,IAOf;CAAA,8FANiB,EAMjB;CAAA,2FALc,EAKd;CAAA,wFAJW,KAIX;CAAA,mFAHM,EAGN;;CAGC,WAAKiD,iBAAL,CAAuB,+BAAvB;;CACA,WAAKlC,MAAL,GAAc,OAAKmC,SAAL,EAAd;CAEA,WAAKC,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,cAAclB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAArC;CACA,WAAKxC,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,WAAKyC,YAAL,GAAoB,IAAIC,GAAJ,EAApB;CAEA,WAAKC,QAAL,GAAgBxD,MAAM,CAACwD,QAAP,KAAoB,IAApC;CACA,WAAKC,aAAL,GAAqBzD,MAAM,CAACyD,aAA5B;CACA,WAAKC,iBAAL,GAAyB1D,MAAM,CAAC0D,iBAAhC;CACA,WAAKC,iBAAL,GAAyB3D,MAAM,CAAC2D,iBAAhC;;CAEA,WAAKpD,MAAL,CAAYP,MAAZ;;CACA,WAAK+B,QAAL,CAAc/B,MAAM,CAAC4D,cAAP,IAAyB,EAAvC;;CACA,WAAKC,iBAAL;;CAjBD;CAkBC;;CA9BF;CAAA;CAAA,2BAgCQ7D,MAhCR,EAiCC;CACC,UAAIK,cAAI,CAACyD,aAAL,CAAmB9D,MAAM,CAACE,IAA1B,CAAJ,EACA;CACC,aAAKD,GAAL,CAASC,IAAT,GAAgBF,MAAM,CAACE,IAAvB;CACA;;CAED,UAAI,CAACG,cAAI,CAACyD,aAAL,CAAmB,KAAK7D,GAAL,CAASC,IAA5B,CAAL,EACA;CACC;CACA;;CAED6D,MAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASC,IAAtB,EAA4B,8BAA5B;;CAEA,UAAI,CAAC,KAAKsD,QAAV,EACA;CACC,aAAKvD,GAAL,CAASgE,SAAT,GAAqB,KAAKhE,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,oBAEwBC,aAAG,CAACC,UAAJ,CAAe,gBAAf,CAFxB,EAArB;CAOA;CACD;CAxDF;CAAA;CAAA,wCA2DC;CACC,UAAIjE,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASgE,SAAxB,CAAJ,EACA;CACCO,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASgE,SAApB,EAA+B,OAA/B,EAAwC,KAAKS,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAxC;CACA;;CAED,UAAIpE,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASC,IAAxB,CAAJ,EACA;CACCsE,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASC,IAApB,EAA0B,OAA1B,EAAmC,KAAKyE,WAAL,CAAiBF,IAAjB,CAAsB,IAAtB,CAAnC;CACA;CACD;CArEF;CAAA;CAAA,gCAwEC;CACC,UAAI1D,MAAM,GAAG,EAAb;;CAEA,UAAI,CAAC,KAAK6D,WAAV,EACA;CACC7D,QAAAA,MAAM,GAAGA,MAAM,CAAC8D,MAAP,CAAc,CACtB;CAACzD,UAAAA,KAAK,EAAE,CAAR;CAAW2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,cAAf,CAAlB;CAAkDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,oBAAf;CAA9D,SADsB,EAEtB;CAAClD,UAAAA,KAAK,EAAE,CAAR;CAAW2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,cAAf,CAAlB;CAAkDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,oBAAf;CAA9D,SAFsB,EAGtB;CAAClD,UAAAA,KAAK,EAAE,EAAR;CAAY2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,eAAf,CAAnB;CAAoDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,qBAAf;CAAhE,SAHsB,EAItB;CAAClD,UAAAA,KAAK,EAAE,EAAR;CAAY2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,eAAf,CAAnB;CAAoDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,qBAAf;CAAhE,SAJsB,EAKtB;CAAClD,UAAAA,KAAK,EAAE,EAAR;CAAY2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,eAAf,CAAnB;CAAoDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,qBAAf;CAAhE,SALsB,EAMtB;CAAClD,UAAAA,KAAK,EAAE,EAAR;CAAY2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,eAAf,CAAnB;CAAoDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,qBAAf;CAAhE,SANsB,EAOtB;CAAClD,UAAAA,KAAK,EAAE,EAAR;CAAY2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,eAAf,CAAnB;CAAoDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,qBAAf;CAAhE,SAPsB,EAQtB;CAAClD,UAAAA,KAAK,EAAE,GAAR;CAAa2B,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,gBAAf,CAApB;CAAsDQ,UAAAA,UAAU,EAAET,aAAG,CAACC,UAAJ,CAAe,sBAAf;CAAlE,SARsB;CAUtB;CAVsB,SAAd,CAAT;CAYA;;CAED,UAAI,KAAKS,YAAT,EACA;CACChE,QAAAA,MAAM,GAAGA,MAAM,CAAC8D,MAAP,CAAc,CACtB;CACC1B,UAAAA,EAAE,EAAE,iBADL;CAECJ,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAFR;CAGCU,UAAAA,OAAO,EAAE;CACRC,YAAAA,IAAI,EAAE,WADE;CAERC,YAAAA,UAAU,EAAE,CAFJ;CAGR7D,YAAAA,IAAI,EAAE,KAAK8D;CAHH;CAHV,SADsB,EAUtB;CACChC,UAAAA,EAAE,EAAE,iBADL;CAECJ,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAFR;CAGCU,UAAAA,OAAO,EAAE;CACRC,YAAAA,IAAI,EAAE,WADE;CAERC,YAAAA,UAAU,EAAE,CAFJ;CAGR7D,YAAAA,IAAI,EAAE,KAAK8D;CAHH;CAHV,SAVsB,EAmBtB;CACChC,UAAAA,EAAE,EAAE,iBADL;CAECJ,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAFR;CAGCU,UAAAA,OAAO,EAAE;CACRC,YAAAA,IAAI,EAAE,WADE;CAERC,YAAAA,UAAU,EAAE,CAFJ;CAGR7D,YAAAA,IAAI,EAAE,KAAK8D;CAHH;CAHV,SAnBsB,EA4BtB;CACChC,UAAAA,EAAE,EAAE,QADL;CAECJ,UAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAFR;CAGCU,UAAAA,OAAO,EAAE;CACRC,YAAAA,IAAI,EAAE;CADE;CAHV,SA5BsB,CAAd,CAAT;CAoCA;;CAED,aAAOlE,MAAP;CACA;CApIF;CAAA;CAAA,6BAsIUqE,YAtIV,EAuIC;CAAA;;CAAA,UADuBC,WACvB,uEADqC,IACrC;;CACC,UAAIhF,cAAI,CAACiF,OAAL,CAAaF,YAAb,CAAJ,EACA;CACCA,QAAAA,YAAY,CAACG,OAAb,CAAqB,UAACnE,KAAD,EAAW;CAAC,UAAA,MAAI,CAACoE,QAAL,CAAcpE,KAAd,EAAqBiE,WAArB;CAAkC,SAAnE,EAAqE,IAArE;CACA;CACD;CA5IF;CAAA;CAAA,wCA+IC;CACC,aAAO,KAAKzB,cAAZ;CACA;CAjJF;CAAA;CAAA,2CAoJC;CAAA;;CACC,UAAI6B,iBAAiB,GAAG,EAAxB;CACA,WAAK7B,cAAL,CAAoB2B,OAApB,CAA4B,UAACnE,KAAD,EAAW;CAEtCqE,QAAAA,iBAAiB,CAAC3C,IAAlB,CAAuB,MAAI,CAACQ,YAAL,CAAkBoC,GAAlB,CAAsBtE,KAAtB,KAAgCA,KAAvD;CACA,OAHD;CAIA,aAAOqE,iBAAP;CACA;CA3JF;CAAA;CAAA,mCA6JgBb,WA7JhB,EA8JC;CACC,UAAIA,WAAW,KAAK,KAAKA,WAAzB,EACA;CACC,aAAKA,WAAL,GAAmBA,WAAnB;CACA,aAAK7D,MAAL,GAAc,KAAKmC,SAAL,EAAd;CACA;CACD;CApKF;CAAA;CAAA,gCAuKC;CAAA;;CACC,UACCyC,KAAK,GAAG,IADT;CAAA,UAECC,SAAS,GAAG,EAFb;;CAIA,WAAK7E,MAAL,CAAYwE,OAAZ,CAAoB,UAACM,IAAD,EAAU;CAC7B,YAAIA,IAAI,CAACZ,IAAL,KAAc,WAAd,IACAY,IAAI,CAACZ,IAAL,KAAc,QADd,IAEA,CAACxE,EAAE,CAACqF,IAAH,CAAQC,QAAR,CAAiBF,IAAI,CAACzE,KAAtB,EAA6B,MAAI,CAACwC,cAAlC,CAFL,EAGA;CACC,cAAIoC,QAAQ,GAAG,EAAf;;CAEA,cAAIH,IAAI,CAACb,OAAL,IAAgBa,IAAI,CAACb,OAAL,CAAaC,IAAb,KAAsB,WAA1C,EACA;CACCe,YAAAA,QAAQ,CAAC7C,EAAT,GAAc0C,IAAI,CAAC1C,EAAnB;CACA,gBAAIgC,mBAAmB,GAAGxD,kBAAI,CAACsE,YAAL,CAAkB,MAAI,CAACd,mBAAvB,CAA1B;CAEAa,YAAAA,QAAQ,CAACE,IAAT,GAAgBL,IAAI,CAAC9C,KAAL,CAAWoD,OAAX,CAAmB,QAAnB,EAA6BxE,kBAAI,CAACS,UAAL,CAAgB+C,mBAAmB,CAACnD,IAApC,EAA0CmD,mBAAmB,CAAChD,GAA9D,CAA7B,CAAhB;CAEA6D,YAAAA,QAAQ,CAAChB,OAAT,GAAmBvE,EAAE,CAACqF,IAAH,CAAQM,WAAR,CAAoB;CACtCC,cAAAA,IAAI,EAAE,cADgC;CAEtCjF,cAAAA,KAAK,EAAE,MAAI,CAAC+D;CAF0B,aAApB,EAGhBU,IAAI,CAACb,OAHW,CAAnB;CAKAgB,YAAAA,QAAQ,CAACM,KAAT,GAAiB,MAAI,CAACC,oBAAL,CAA0BP,QAA1B,EAAoCH,IAAI,CAAC9C,KAAzC,CAAjB;;CAEAiD,YAAAA,QAAQ,CAACQ,OAAT,GAAoB,YACpB;CACC,qBAAO,YACP;CACCb,gBAAAA,KAAK,CAACH,QAAN,CAAe;CACdiB,kBAAAA,MAAM,EAAEZ,IAAI,CAACb,OAAL,CAAaE,UADP;CAEd7D,kBAAAA,IAAI,EAAEwE,IAAI,CAACb,OAAL,CAAa3D;CAFL,iBAAf;;CAKAZ,gBAAAA,EAAE,CAACiG,KAAH,CAAS,YAAU;CAACf,kBAAAA,KAAK,CAACgB,YAAN,CAAmBC,KAAnB;CAA4B,iBAAhD,EAAkDjB,KAAlD;CACA,eARD;CASA,aAXkB,EAAnB;CAYA,WA1BD,MA2BK,IAAIE,IAAI,CAACb,OAAL,IAAgBa,IAAI,CAACb,OAAL,CAAaC,IAAb,KAAsB,QAA1C,EACL;CACCe,YAAAA,QAAQ,CAAC7C,EAAT,GAAc,QAAd;CACA6C,YAAAA,QAAQ,CAACE,IAAT,GAAgBL,IAAI,CAAC9C,KAArB;CACAiD,YAAAA,QAAQ,CAACM,KAAT,GAAiB,CAAC;CAACnD,cAAAA,EAAE,EAAE,KAAL;CAAY+C,cAAAA,IAAI,EAAE;CAAlB,aAAD,CAAjB;CACA,WALI,MAOL;CACCF,YAAAA,QAAQ,CAACE,IAAT,GAAgBL,IAAI,CAAC9C,KAArB;;CACAiD,YAAAA,QAAQ,CAACQ,OAAT,GAAoB,UAAUpF,KAAV,EAAiB6D,IAAjB,EACpB;CACC,qBAAO,YAAM;CACZU,gBAAAA,KAAK,CAACH,QAAN,CAAepE,KAAf;;CACAuE,gBAAAA,KAAK,CAACgB,YAAN,CAAmBC,KAAnB;CACA,eAHD;CAIA,aANkB,CAMhBf,IAAI,CAACzE,KANW,EAMJyE,IAAI,CAACZ,IAND,CAAnB;CAOA;;CAEDW,UAAAA,SAAS,CAAC9C,IAAV,CAAekD,QAAf;CACA;CACD,OAtDD,EAsDG,IAtDH;CAwDA,WAAKW,YAAL,GAAoBE,sBAAW,CAACtG,MAAZ,CACnB,KAAK4C,EADc,EAEnB,KAAKlD,GAAL,CAASgE,SAFU,EAGnB2B,SAHmB,EAInB;CACCkB,QAAAA,UAAU,EAAG,IADd;CAECC,QAAAA,QAAQ,EAAG,IAFZ;CAGClG,QAAAA,MAAM,EAAE,KAAKA,MAHd;CAICmG,QAAAA,SAAS,EAAE,CAJZ;CAKCC,QAAAA,UAAU,EAAE,CALb;CAMCC,QAAAA,KAAK,EAAE,IANR;CAOCC,QAAAA,SAAS,EAAE;CAPZ,OAJmB,CAApB;CAeA,UAAIC,kBAAkB,GAAG,KAAKA,kBAAL,CAAwB3C,IAAxB,CAA6B,IAA7B,CAAzB;CACA,UAAI4C,iBAAiB,GAAG,KAAKA,iBAAL,CAAuB5C,IAAvB,CAA4B,IAA5B,CAAxB;CACA6C,MAAAA,6BAAY,CAACC,SAAb,CAAuB,sBAAvB,EAA+CH,kBAA/C;CACAE,MAAAA,6BAAY,CAACC,SAAb,CAAuB,uBAAvB,EAAgDF,iBAAhD;CAEA,WAAKV,YAAL,CAAkBa,WAAlB,CAA8BD,SAA9B,CAAwC,SAAxC,EAAmD,YAAM;CACxDD,QAAAA,6BAAY,CAACG,WAAb,CAAyB,sBAAzB,EAAiDL,kBAAjD;CACAE,QAAAA,6BAAY,CAACG,WAAb,CAAyB,uBAAzB,EAAkDJ,iBAAlD;CACA,OAHD;CAIA,WAAKV,YAAL,CAAkBe,IAAlB;CACA;CA7PF;CAAA;CAAA,yCA+PsBC,UA/PtB,EA+PkCC,iBA/PlC,EAgQC;CACC,UAAIhC,SAAS,GAAG,EAAhB;CACA5C,MAAAA,QAAQ,CAAC6E,gBAAT,CAA0B,EAA1B,EAA8BtC,OAA9B,CAAsC,UAASS,QAAT,EACtC;CACCJ,QAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdK,UAAAA,EAAE,EAAE,UAAU6C,QAAQ,CAAC5E,KADT;CAEd4D,UAAAA,OAAO,EAAE;CACR5D,YAAAA,KAAK,EAAE4E,QAAQ,CAAC5E,KADR;CAER8D,YAAAA,UAAU,EAAEyC,UAAU,CAAC3C,OAAX,CAAmBE;CAFvB,WAFK;CAMdgB,UAAAA,IAAI,EAAEF,QAAQ,CAACjD,KAND;CAOdyD,UAAAA,OAAO,EAAE,UAASsB,CAAT,EAAYjC,IAAZ,EACT;CACC,gBAAIxE,IAAI,GAAGM,kBAAI,CAACsE,YAAL,CAAkBJ,IAAI,CAACb,OAAL,CAAa5D,KAA/B,CAAX;CACA,gBAAI2G,cAAc,GAAG,KAAKpB,YAAL,CAAkBqB,WAAlB,CAA8BL,UAAU,CAACxE,EAAzC,CAArB;;CACA,gBAAI4E,cAAJ,EACA;CACCA,cAAAA,cAAc,CAACE,OAAf,CAAuBL,iBAAiB,CAACzB,OAAlB,CAA0B,QAA1B,EAAoCxE,kBAAI,CAACS,UAAL,CAAgBf,IAAI,CAACW,IAArB,EAA2BX,IAAI,CAACc,GAAhC,CAApC,CAAvB;CACA;;CAED,iBAAKqD,QAAL,CAAc;CACbnE,cAAAA,IAAI,EAAEwE,IAAI,CAACb,OAAL,CAAa5D,KADN;CAEbqF,cAAAA,MAAM,EAAEZ,IAAI,CAACb,OAAL,CAAaE;CAFR,aAAd;CAKAzE,YAAAA,EAAE,CAACiG,KAAH,CAAS,YAAU;CAAC,mBAAKC,YAAL,CAAkBC,KAAlB;CAA2B,aAA/C,EAAiD,IAAjD;CAEA,WAhBQ,CAgBPnC,IAhBO,CAgBF,IAhBE;CAPK,SAAf;CAyBA,OA3BD,EA2BG,IA3BH;CA4BA,aAAOmB,SAAP;CACA;CA/RF;CAAA;CAAA,6BAiSUxE,KAjSV,EAkSC;CAAA,UADgBiE,WAChB,uEAD8B,IAC9B;CACC,UACC3C,CADD;CAAA,UACImD,IADJ;CAAA,UAECqC,cAAc,GAAGlF,QAAQ,CAACmF,WAAT,CAAqB/G,KAArB,CAFlB;;CAIA,UAAIf,cAAI,CAAC+H,aAAL,CAAmBhH,KAAnB,KAA6B,CAAC,KAAKwC,cAAL,CAAoByE,QAApB,CAA6BH,cAA7B,CAAlC,EACA;CACC,YAAI7H,cAAI,CAACiI,SAAL,CAAelH,KAAK,CAACqF,MAArB,KAAgCpG,cAAI,CAACiI,SAAL,CAAelH,KAAK,CAACC,IAArB,CAApC,EACA;CACCwE,UAAAA,IAAI,GAAG,KAAK5F,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,qBAGFpB,QAAQ,CAACuF,gBAAT,CAA0BnH,KAA1B,CAHE,EAAP;;CAOA,cAAI,CAAC,KAAKoC,QAAV,EACA;CACCqC,YAAAA,IAAI,CAAC3B,WAAL,CAAiBC,aAAG,CAACC,MAArB,qBAAyF8D,cAAzF;CACA;CACD,SAbD,MAcK,IAAI9G,KAAK,CAACiF,IAAN,KAAe,MAAf,IAAyBhG,cAAI,CAACiB,MAAL,CAAYF,KAAK,CAACA,KAAlB,CAA7B,EACL;CACCyE,UAAAA,IAAI,GAAG,KAAK5F,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,qBAEHzC,kBAAI,CAAC6G,gBAAL,CAAsBpH,KAAK,CAACA,KAA5B,IAAqC,GAArC,GAA2CO,kBAAI,CAACS,UAAL,CAAgBhB,KAAK,CAACA,KAAtB,CAFxC,EAAP;;CAMA,cAAI,CAAC,KAAKoC,QAAV,EACA;CACCqC,YAAAA,IAAI,CAAC3B,WAAL,CAAiBC,aAAG,CAACC,MAArB,qBAAyF8D,cAAzF;CACA;CACD;;CAED,aAAKtE,cAAL,CAAoBd,IAApB,CAAyBoF,cAAzB;CACA,aAAKO,WAAL,CAAiBP,cAAjB,IAAmCrC,IAAnC;CACA,aAAKvC,YAAL,CAAkBoF,GAAlB,CAAsBR,cAAtB,EAAsC9G,KAAtC;CACA,OAjCD,MAkCK,IAAIA,KAAK,IAAI,CAAT,IAAc,CAAC,KAAKwC,cAAL,CAAoByE,QAApB,CAA6BH,cAA7B,CAAnB,EACL;CACC,aAAKxF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAK3B,MAAL,CAAY4B,MAA5B,EAAoCD,CAAC,EAArC,EACA;CACC,cAAI,KAAK3B,MAAL,CAAY2B,CAAZ,EAAetB,KAAf,KAAyBA,KAA7B,EACA;CACCyE,YAAAA,IAAI,GAAG,KAAK5F,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,qBAGH,KAAKrD,MAAL,CAAY2B,CAAZ,EAAeoC,UAAf,IAA6B,KAAK/D,MAAL,CAAY2B,CAAZ,EAAeK,KAHzC,EAAP;;CAOA,gBAAI,CAAC,KAAKS,QAAV,EACA;CACCqC,cAAAA,IAAI,CAAC3B,WAAL,CAAiBC,aAAG,CAACC,MAArB,qBAAyF8D,cAAzF;CACA;;CAED,iBAAKtE,cAAL,CAAoBd,IAApB,CAAyBoF,cAAzB;CACA,iBAAKO,WAAL,CAAiBP,cAAjB,IAAmCrC,IAAnC;CACA,iBAAKvC,YAAL,CAAkBoF,GAAlB,CAAsBR,cAAtB,EAAsC9G,KAAtC;CACA;CACA;CACD;;CAED,YAAIyE,IAAI,KAAK8C,SAAb,EACA;CACC9C,UAAAA,IAAI,GAAG,KAAK5F,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CACnDqI,YAAAA,KAAK,EAAE;CAACC,cAAAA,SAAS,EAAE;CAAZ,aAD4C;CAEnD3C,YAAAA,IAAI,EAAElD,QAAQ,CAAC8F,OAAT,CAAiB1H,KAAjB;CAF6C,WAAnB,CAA1B,CAAP;;CAKA,cAAI,CAAC,KAAKoC,QAAV,EACA;CACCqC,YAAAA,IAAI,CAAC3B,WAAL,CAAiBH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CACnCqI,cAAAA,KAAK,EAAE;CAACC,gBAAAA,SAAS,EAAE;CAAZ,eAD4B;CAEnCE,cAAAA,MAAM,EAAE;CAACC,gBAAAA,KAAK,EAAE,YAAU;CAAC,uBAAKC,WAAL,CAAiB7H,KAAjB;CAAyB,iBAApC,CAAqCqD,IAArC,CAA0C,IAA1C;CAAR;CAF2B,aAAnB,CAAjB;CAIA;;CAED,eAAKb,cAAL,CAAoBd,IAApB,CAAyB1B,KAAzB;CACA,eAAKqH,WAAL,CAAiBrH,KAAjB,IAA0ByE,IAA1B;CACA,eAAKvC,YAAL,CAAkBoF,GAAlB,CAAsBtH,KAAtB,EAA6BA,KAA7B;CACA;CACD;;CAED,UAAI,KAAKqC,aAAT,EACA;CACC,aAAKA,aAAL,CAAmB,KAAKG,cAAxB;CACA;;CAED,UAAIyB,WAAJ,EACA;CACC,aAAK6D,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,UAAAA,IAAI,EAAE;CAACrI,YAAAA,MAAM,EAAE,KAAK6C;CAAd;CAAP,SAAd,CAAtB;CACA;;CAED,UAAIvD,cAAI,CAACyD,aAAL,CAAmB,KAAK7D,GAAL,CAASgE,SAA5B,CAAJ,EACA;CACC,aAAKhE,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0B,KAAKjE,GAAL,CAASgE,SAAnC;CACA;CACD;CArYF;CAAA;CAAA,gCAgaa7C,KAhab,EAiaC;CACC,UAAI,KAAKqH,WAAL,CAAiBrH,KAAjB,KAA2Bf,cAAI,CAACkE,SAAL,CAAe,KAAKkE,WAAL,CAAiBrH,KAAjB,CAAf,CAA/B,EACA;CACC2C,QAAAA,aAAG,CAACsF,MAAJ,CAAW,KAAKZ,WAAL,CAAiBrH,KAAjB,CAAX;CACA;;CACD,WAAKwC,cAAL,GAAsBnD,EAAE,CAACqF,IAAH,CAAQwD,eAAR,CAAwB,KAAK1F,cAA7B,EAA6CnD,EAAE,CAACqF,IAAH,CAAQyD,YAAR,CAAqBnI,KAArB,EAA4B,KAAKwC,cAAjC,CAA7C,CAAtB;;CAEA,UAAI,KAAKH,aAAT,EACA;CACC,aAAKA,aAAL,CAAmB,KAAKG,cAAxB;CACA;;CAED,WAAKsF,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,QAAAA,IAAI,EAAE;CAACrI,UAAAA,MAAM,EAAE,KAAK6C;CAAd;CAAP,OAAd,CAAtB;CACA;CA9aF;CAAA;CAAA,gCA+cakE,CA/cb,EAgdC;CACC,UAAI0B,MAAM,GAAG1B,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAA3B;CACA,UAAIC,QAAQ,GAAGF,MAAM,CAACG,YAAP,CAAoB,gBAApB,CAAf;;CAEA,UAAI,KAAK/F,cAAL,CAAoByE,QAApB,CAA6BqB,QAA7B,CAAJ,EACA;CACC,aAAKT,WAAL,CAAiBS,QAAjB;CACA;CACD;CAxdF;CAAA;CAygBC;CAzgBD,uCA0gBoBE,KA1gBpB,EA2gBC;CACC,UAAIA,KAAK,YAAYT,0BAArB,EACA;CACC,YAAIU,YAAY,GAAGD,KAAK,CAACE,SAAN,EAAnB;;CAEA,YAAID,YAAY,YAAYE,gBAA5B,EACA;CACC,cAAI,8CAA8CC,IAA9C,CAAmDH,YAAY,CAACI,KAAb,EAAnD,CAAJ,EACA;CACC,iBAAKC,sBAAL,CAA4BL,YAA5B;CACA,WAHD,MAIK,IAAI,oCAAoCG,IAApC,CAAyCH,YAAY,CAACI,KAAb,EAAzC,CAAJ,EACL;CACC,iBAAKE,0BAAL,CAAgCN,YAAhC;CACA;CACD;CACD;CACD;CA5hBF;CAAA;CAAA,sCA8hBmBD,KA9hBnB,EA+hBC;CACC,UAAIA,KAAK,YAAYT,0BAArB,EACA;CACC,YAAIU,YAAY,GAAGD,KAAK,CAACE,SAAN,EAAnB;;CAEA,YAAID,YAAY,YAAYE,gBAA5B,EACA;CACC,cAAI,8CAA8CC,IAA9C,CAAmDH,YAAY,CAACI,KAAb,EAAnD,CAAJ,EACA,CADA,MAGK,IAAI,oCAAoCD,IAApC,CAAyCH,YAAY,CAACI,KAAb,EAAzC,CAAJ,EACL;CACC,gBAAIG,MAAM,GAAGP,YAAY,CAACQ,WAA1B;CACA,gBAAIC,QAAQ,GAAGF,MAAM,CAACG,aAAP,CAAqB,uBAArB,CAAf;;CAEA,gBAAIlK,cAAI,CAACkE,SAAL,CAAe+F,QAAf,CAAJ,EACA;CACCvG,cAAAA,aAAG,CAACyG,KAAJ,CAAUF,QAAV;CACAA,cAAAA,QAAQ,CAACG,SAAT,GAAqBpG,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAArB;CACA;CACD;CACD;CACD;CACD;CAtjBF;CAAA;CAAA,2CAwjBwBoG,KAxjBxB,EAyjBC;CACC,UAAIC,gBAAgB,GAAGD,KAAK,CAACE,mBAAN,GAA4BL,aAA5B,CAA0C,sBAAsB,KAAKpF,mBAA3B,GAAiD,IAA3F,CAAvB;;CACA,UAAI9E,cAAI,CAACkE,SAAL,CAAeoG,gBAAf,CAAJ,EACA;CACCE,QAAAA,UAAU,CAAC,YAAI;CACdH,UAAAA,KAAK,CAACE,mBAAN,GAA4BE,SAA5B,GAAwCxI,QAAQ,CAACqI,gBAAgB,CAAC3D,SAAlB,CAAR,GAAuC,EAA/E;CACAjD,UAAAA,aAAG,CAACC,QAAJ,CAAa2G,gBAAb,EAA+B,sBAA/B;CACA,SAHS,EAGP,EAHO,CAAV;CAIA;CACD;CAlkBF;CAAA;CAAA,+CAokB4BD,KApkB5B,EAqkBC;CAAA;;CACC,UAAIN,MAAM,GAAGM,KAAK,CAACL,WAAnB;CAEA,UAAIC,QAAQ,GAAGF,MAAM,CAACG,aAAP,CAAqB,uBAArB,CAAf;;CACA,UAAIlK,cAAI,CAACkE,SAAL,CAAe+F,QAAf,CAAJ,EACA;CACCvG,QAAAA,aAAG,CAACyG,KAAJ,CAAUF,QAAV;CACA,YAAInK,KAAK,GAAGmK,QAAQ,CAACpG,WAAT,CAAqBC,aAAG,CAACC,MAAzB,qBAAiDnC,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,MAA3B,CAAjD,EAA4LgB,aAAG,CAACC,UAAJ,CAAe,+BAAf,CAA5L,EAAZ;CAEA,YAAIyG,eAAe,GAAGtK,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,EAAtB,CAJD;CAOC;;CACAqF,QAAAA,eAAe,CAACL,KAAhB,GAAwB,IAAxB;CACAK,QAAAA,eAAe,CAACE,cAAhB,GAAiC,IAAjC;CACAF,QAAAA,eAAe,CAACG,OAAhB,GAA0B,EAA1B;CAEAH,QAAAA,eAAe,CAACI,IAAhB,CAAqB;CACpBC,UAAAA,IAAI,EAAEjL,KADc;CAEpBiB,UAAAA,KAAK,EAAEO,kBAAI,CAAC0J,cAAL,CAAoB1J,kBAAI,CAAC2J,iBAAL,CAAuB,IAAIC,IAAJ,EAAvB,CAApB,CAFa;CAGpBC,UAAAA,KAAK,EAAErL,KAHa;CAIpBsL,UAAAA,KAAK,EAAE,IAJa;CAKpBC,UAAAA,SAAS,EAAE;CALS,SAArB;CAQA,YAAIC,aAAa,GAAGZ,eAAe,CAACL,KAApC;CACAiB,QAAAA,aAAa,CAACxE,SAAd,GAA0B,KAA1B;;CACA,YAAIwE,aAAa,IAAIA,aAAa,CAACC,cAAnC,EACA;CACC,cAAIC,YAAY,GAAGF,aAAa,CAACC,cAAd,CAA6BrB,aAA7B,CAA2C,cAA3C,CAAnB;;CACA,cAAIlK,cAAI,CAACkE,SAAL,CAAesH,YAAf,CAAJ,EACA;CACCnB,YAAAA,KAAK,CAACoB,gBAAN,CAAuB5H,WAAvB,CAAmC2H,YAAnC;CACA;;CACDF,UAAAA,aAAa,CAAC/E,KAAd;CACAC,UAAAA,sBAAW,CAACkF,OAAZ,CAAoBJ,aAAa,CAACK,aAAlC;CACA;;CAEDxH,QAAAA,eAAK,CAACC,IAAN,CAAWtE,KAAX,EAAkB,QAAlB,EAA4B,YAAM;CACjC,cACCiB,KAAK,GAAGjB,KAAK,CAACiB,KADf;CAAA,cAEC6K,SAAS,GAAGtK,kBAAI,CAACuK,SAAL,CAAe9K,KAAf,CAFb;;CAIA,cAAIf,cAAI,CAACiB,MAAL,CAAY2K,SAAZ,CAAJ,EACA;CACC,YAAA,MAAI,CAACzG,QAAL,CAAc;CAACa,cAAAA,IAAI,EAAE,MAAP;CAAejF,cAAAA,KAAK,EAAE6K;CAAtB,aAAd;;CACA,YAAA,MAAI,CAACtF,YAAL,CAAkBC,KAAlB;CACA;CACD,SAVD;CAWA;CACD;CAvnBF;CAAA;CAAA,gCAynBapD,QAznBb,EA0nBC;CACC,WAAKA,QAAL,GAAgBA,QAAhB;;CAEA,UAAI,KAAKA,QAAT,EACA;CACCO,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASC,IAAtB,EAA4B,4BAA5B;;CACA,YAAIG,cAAI,CAACyD,aAAL,CAAmB,KAAK7D,GAAL,CAASgE,SAA5B,CAAJ,EACA;CACC,eAAKhE,GAAL,CAASgE,SAAT,CAAmBkI,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;CACA;CACD,OAPD,MASA;CACCrI,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASC,IAAzB,EAA+B,4BAA/B;CACA;CACD;CAzoBF;CAAA;CAAA,4BAuYgBkB,KAvYhB,EAwYC;CACC,UACCkL,SAAS,GAAGlL,KADb;CAAA,UAECmL,QAAQ,GAAG,CAAC,EAAD,EAAK,EAAL,CAFZ;CAAA;CAGCC,MAAAA,YAAY,GAAG,CAAC,sBAAD,EAAyB,uBAAzB,EAAkD,sBAAlD,CAHhB;CAAA,UAICC,MAAM,GAAG,EAJV;;CAMA,WAAK,IAAI/J,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8J,YAAY,CAAC7J,MAAjC,EAAyCD,CAAC,EAA1C,EACA;CACC,YAAI4J,SAAS,GAAGC,QAAQ,CAAC7J,CAAD,CAApB,IAA2BA,CAAC,KAAK6J,QAAQ,CAAC5J,MAA9C,EACA;CACC8J,UAAAA,MAAM,GAAGpI,aAAG,CAACC,UAAJ,CAAekI,YAAY,CAAC9J,CAAD,CAA3B,EAAgCgK,QAAhC,EAAT;CACAD,UAAAA,MAAM,GAAGA,MAAM,CAACtG,OAAP,CAAe,WAAf,EAA4BmG,SAAS,CAACI,QAAV,EAA5B,CAAT;CACA;CACA,SALD,MAOA;CACCJ,UAAAA,SAAS,GAAGrK,IAAI,CAAC0K,IAAL,CAAUL,SAAS,GAAGC,QAAQ,CAAC7J,CAAD,CAA9B,CAAZ;CACA;CACD;;CAED,aAAO+J,MAAP;CACA;CA9ZF;CAAA;CAAA,uCAibC;CAAA,UADwBxH,IACxB,uEAD+B,EAC/B;;CACC,UAAI,CAACjC,QAAQ,CAAC4J,aAAd,EACA;CACC5J,QAAAA,QAAQ,CAAC4J,aAAT,GAAyB,EAAzB;CACA,YAAIlK,CAAJ;;CACA,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,EAAhB,EAAoBA,CAAC,EAArB,EACA;CACCM,UAAAA,QAAQ,CAAC4J,aAAT,CAAuB9J,IAAvB,CAA4B;CAAC1B,YAAAA,KAAK,EAAEsB,CAAC,GAAG,EAAZ;CAAgBK,YAAAA,KAAK,EAAEpB,kBAAI,CAACS,UAAL,CAAgBM,CAAhB,EAAmB,CAAnB;CAAvB,WAA5B;;CACA,cAAIuC,IAAI,IAAI,EAAZ,EACA;CACCjC,YAAAA,QAAQ,CAAC4J,aAAT,CAAuB9J,IAAvB,CAA4B;CAAC1B,cAAAA,KAAK,EAAEsB,CAAC,GAAG,EAAJ,GAAS,EAAjB;CAAqBK,cAAAA,KAAK,EAAEpB,kBAAI,CAACS,UAAL,CAAgBM,CAAhB,EAAmB,EAAnB;CAA5B,aAA5B;CACA;CACD;CACD;;CACD,aAAOM,QAAQ,CAAC4J,aAAhB;CACA;CAhcF;CAAA;CAAA,gCAkcoBC,WAlcpB,EAmcC;CACC,UAAIxM,cAAI,CAAC+H,aAAL,CAAmByE,WAAnB,KAAmCxM,cAAI,CAACiI,SAAL,CAAeuE,WAAW,CAACpG,MAA3B,CAAnC,IAAyEpG,cAAI,CAACiI,SAAL,CAAeuE,WAAW,CAACxL,IAA3B,CAA7E,EACA;CACC,eAAO,eAAewL,WAAW,CAACpG,MAA3B,GAAoC,GAApC,GAA0CoG,WAAW,CAACxL,IAA7D;CACA,OAHD,MAIK,IAAIhB,cAAI,CAAC+H,aAAL,CAAmByE,WAAnB,KAAmCxM,cAAI,CAACiB,MAAL,CAAYuL,WAAW,CAACzL,KAAxB,CAAvC,EACL;CACC,eAAO,UAAUO,kBAAI,CAAC0J,cAAL,CAAoBwB,WAAW,CAACzL,KAAhC,CAAjB;CACA;;CACD,aAAOyL,WAAW,CAACH,QAAZ,EAAP;CACA;CA7cF;CAAA;CAAA,4CA0dgC5E,CA1dhC,EA0dmC3H,KA1dnC,EA2dC;CACC,UAAI,CAACE,cAAI,CAACkE,SAAL,CAAepE,KAAf,CAAD,IAA0B2H,CAA9B,EACA;CACC3H,QAAAA,KAAK,GAAG2H,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAAtB;CACA;;CAED,UAAIpJ,cAAI,CAACkE,SAAL,CAAepE,KAAf,KAAyBA,KAAK,CAAC2M,QAAN,CAAeC,WAAf,OAAiC,OAA9D,EACA;CACCtM,QAAAA,EAAE,CAACuK,QAAH,CAAY;CACXI,UAAAA,IAAI,EAAEjL,KAAK,CAAC6M,UADD;CAEX5L,UAAAA,KAAK,EAAEO,kBAAI,CAAC0J,cAAL,CAAoB1J,kBAAI,CAAC2J,iBAAL,CAAuB,IAAIC,IAAJ,EAAvB,CAApB,CAFI;CAGXC,UAAAA,KAAK,EAAErL,KAHI;CAIXsL,UAAAA,KAAK,EAAE,IAJI;CAKXC,UAAAA,SAAS,EAAE;CALA,SAAZ;CAOAjL,QAAAA,EAAE,CAACwM,aAAH,CAAiBC,MAAjB,EAAyB,kCAAzB;CAEA,YAAIvB,aAAa,GAAGlL,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,GAAkBgF,KAAtC;;CACA,YAAIiB,aAAJ,EACA;CACC;CACAA,UAAAA,aAAa,CAAC3L,MAAd,CAAqBa,MAArB,GAA8B,IAA9B;CACA8K,UAAAA,aAAa,CAACC,cAAd,CAA6BO,KAA7B,CAAmCtL,MAAnC,GAA4C8K,aAAa,CAAC3L,MAAd,CAAqBa,MAAjE;CACAJ,UAAAA,EAAE,CAAC0M,iBAAH,CAAqBxB,aAArB,EAAoC,cAApC,EAAoD3I,QAAQ,CAACoK,8BAA7D;CACA3M,UAAAA,EAAE,CAAC4M,cAAH,CAAkB1B,aAAlB,EAAiC,cAAjC,EAAiD3I,QAAQ,CAACoK,8BAA1D;CACA;CACD;CACD;CAtfF;CAAA;CAAA,mDAwfuCtF,CAxfvC,EAyfC;CACCrH,MAAAA,EAAE,CAACwM,aAAH,CAAiBC,MAAjB,EAAyB,mCAAzB;CACA;CA3fF;CAAA;CAAA,qCA6fyB9L,KA7fzB,EA8fC;CACC,UAAI2B,KAAK,GAAG,EAAZ;;CACA,UAAI1C,cAAI,CAACiI,SAAL,CAAelH,KAAK,CAACqF,MAArB,KAAgCpG,cAAI,CAACiI,SAAL,CAAelH,KAAK,CAACC,IAArB,CAAhC,IAA8D,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUgH,QAAV,CAAmBjH,KAAK,CAACqF,MAAzB,CAAlE,EACA;CACC,YAAIpF,IAAI,GAAGM,kBAAI,CAACsE,YAAL,CAAkB7E,KAAK,CAACC,IAAxB,CAAX;CAEA0B,QAAAA,KAAK,GAAGsB,aAAG,CAACC,UAAJ,CAAe,oBAAoBlD,KAAK,CAACqF,MAA1B,GAAmC,QAAlD,EAA4DN,OAA5D,CAAoE,QAApE,EAA8ExE,kBAAI,CAACS,UAAL,CAAgBf,IAAI,CAACW,IAArB,EAA2BX,IAAI,CAACc,GAAhC,CAA9E,CAAR;CACA;;CACD,aAAOY,KAAP;CACA;CAvgBF;CAAA;CAAA,EAA8BuE,6BAA9B;6BAAatE,2BAEW;;;;;;;;;;;;;;;;;;;;;KCLXsK,QAAb;CAKC,oBAAYtN,MAAZ,EACA;CAAA;CACC,SAAKA,MAAL,GAAcA,MAAd;CACA,SAAKmD,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,cAAclB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAArC;CACA,SAAKxC,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CAEA,SAAKZ,GAAL,GAAW;CACVsN,MAAAA,QAAQ,EAAEvN,MAAM,CAACE;CADP,KAAX;CAIA,SAAKsN,QAAL,GAAgB,CAACxN,MAAM,CAACyN,mBAAxB;CACA,SAAKrM,KAAL,GAAa;CAACiF,MAAAA,IAAI,EAAE,EAAP;CAAWH,MAAAA,IAAI,EAAE,EAAjB;CAAqB9E,MAAAA,KAAK,EAAE;CAA5B,KAAb;CACA,SAAKsM,qBAAL,GAA6B1N,MAAM,CAAC0N,qBAApC;CAEA,SAAKC,YAAL,GAAoB3N,MAAM,CAAC4N,qBAAP,IAAgC,EAApD;CACAN,IAAAA,QAAQ,CAACO,kBAAT,CAA4B7N,MAAM,CAAC4N,qBAAnC;CACAN,IAAAA,QAAQ,CAACQ,eAAT,CAAyB9N,MAAM,CAAC+N,YAAhC;CAEA,SAAKxN,MAAL;CACA;;CAxBF;CAAA;CAAA,6BA2BC;CACC,WAAKN,GAAL,CAAS+N,SAAT,GAAqB,KAAK/N,GAAL,CAASsN,QAAT,CAAkBrJ,WAAlB,CAA8BH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ;CAAR,OAAlB,CAA9B,CAArB;;CAEA,UAAI,KAAK6E,qBAAT,EACA;CACC,aAAKzN,GAAL,CAASgO,kBAAT,GAA8B,KAAKhO,GAAL,CAASsN,QAAT,CAAkBrJ,WAAlB,CAA8BC,aAAG,CAACC,MAAlC,sBACY,KAAKnE,GAAL,CAASiO,cAAT,GAA0B/J,aAAG,CAACC,MAA9B,uBACLC,aAAG,CAACC,UAAJ,CAAe,gBAAf,CADK,CADZ,EAA9B;CAIA,aAAKrE,GAAL,CAAS+N,SAAT,CAAmB7B,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;CACA5H,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASgO,kBAApB,EAAwC,OAAxC,EAAiD,KAAKE,yBAAL,CAA+B1J,IAA/B,CAAoC,IAApC,CAAjD;CACA;;CAED,UAAI,KAAK+I,QAAT,EACA;CACC/M,QAAAA,EAAE,CAACuD,QAAH,CAAY,KAAK/D,GAAL,CAASsN,QAArB,EAA+B,QAA/B;CACA,aAAKtN,GAAL,CAAS+N,SAAT,CAAmB9J,WAAnB,CAA+BH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CACjDqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WAD0C;CAEjDE,UAAAA,MAAM,EAAE;CACPC,YAAAA,KAAK,EAAE,iBAAM;CACZoF,cAAAA,GAAG,CAACC,gBAAJ,CAAqB3G,IAArB,CAA0B,mBAA1B,EAA+CrD,aAAG,CAACC,UAAJ,CAAe,kCAAf,CAA/C,EAAmGD,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAAnG;CACA;CAHM;CAFyC,SAAlB,CAA/B;CAQA;;CAED,WAAKrE,GAAL,CAASE,KAAT,GAAiB,KAAKF,GAAL,CAAS+N,SAAT,CAAmB9J,WAAnB,CAA+BH,aAAG,CAACxD,MAAJ,CAAW,OAAX,EAAoB;CACnE+N,QAAAA,KAAK,EAAE;CACNC,UAAAA,IAAI,EAAE,KAAKvO,MAAL,CAAYwO,SAAZ,IAAyB,EADzB;CAENC,UAAAA,WAAW,EAAEpK,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAFP;CAGN+B,UAAAA,IAAI,EAAE,MAHA;CAINqI,UAAAA,YAAY,EAAE,KAAKlB,QAAL,GAAgB,IAAhB,GAAuB;CAJ/B,SAD4D;CAOnE5E,QAAAA,KAAK,EAAE;CACNC,UAAAA,SAAS,EAAE;CADL;CAP4D,OAApB,CAA/B,CAAjB;CAWA;CAhEF;CAAA;CAAA,gCAmEC;CACC,UACC8F,YAAY,GAAG,EADhB;CAAA,UAECC,aAAa,GAAG,KAFjB;CAAA,UAGCjB,YAAY,GAAGL,QAAQ,CAACuB,kBAAT,EAHhB;CAAA,UAICd,YAAY,GAAGT,QAAQ,CAACwB,eAAT,EAJhB;;CAMA,UAAIzO,cAAI,CAACiF,OAAL,CAAaqI,YAAb,CAAJ,EACA;CACCA,QAAAA,YAAY,CAACpI,OAAb,CAAqB,UAASwJ,IAAT,EACrB;CACCA,UAAAA,IAAI,CAACC,EAAL,GAAU1M,QAAQ,CAACyM,IAAI,CAACC,EAAN,CAAlB;CACAL,UAAAA,YAAY,CAAC7L,IAAb,CAAkB;CACjBkM,YAAAA,EAAE,EAAED,IAAI,CAACC,EADQ;CAEjBjM,YAAAA,KAAK,EAAEtC,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyBF,IAAI,CAACG,IAA9B,CAFU;CAGjBC,YAAAA,QAAQ,EAAEJ,IAAI,CAACG,IAHE;CAIjB9N,YAAAA,KAAK,EAAE2N,IAAI,CAACC,EAJK;CAKjB3I,YAAAA,IAAI,EAAE;CALW,WAAlB;;CAQA,cAAI,KAAKjF,KAAL,CAAWiF,IAAX,KAAoB,IAApB,IACA/D,QAAQ,CAAC,KAAKlB,KAAL,CAAWA,KAAZ,CAAR,KAA+B2N,IAAI,CAACC,EADxC,EAEA;CACCJ,YAAAA,aAAa,GAAGD,YAAY,CAAChM,MAAb,GAAsB,CAAtC;CACA;CACD,SAhBD,EAgBG,IAhBH;;CAkBA,YAAIgM,YAAY,CAAChM,MAAb,GAAsB,CAA1B,EACA;CACCgM,UAAAA,YAAY,CAAC7L,IAAb,CAAkB;CAACsM,YAAAA,SAAS,EAAE;CAAZ,WAAlB;CACA;CACD;;CAED,UAAI/O,cAAI,CAACiF,OAAL,CAAayI,YAAb,CAAJ,EACA;CACC,YAAIA,YAAY,CAACpL,MAAjB,EACA;CACCoL,UAAAA,YAAY,CAACxI,OAAb,CAAqB,UAASwJ,IAAT,EACrB;CACCA,YAAAA,IAAI,CAACC,EAAL,GAAU1M,QAAQ,CAACyM,IAAI,CAACC,EAAN,CAAlB;CACAL,YAAAA,YAAY,CAAC7L,IAAb,CAAkB;CACjBkM,cAAAA,EAAE,EAAED,IAAI,CAACC,EADQ;CAEjBjM,cAAAA,KAAK,EAAEtC,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyBF,IAAI,CAACG,IAA9B,CAFU;CAGjBC,cAAAA,QAAQ,EAAEJ,IAAI,CAACG,IAHE;CAIjB9N,cAAAA,KAAK,EAAE2N,IAAI,CAACC,EAJK;CAKjB3I,cAAAA,IAAI,EAAE;CALW,aAAlB;;CAQA,gBAAI,KAAKjF,KAAL,CAAWiF,IAAX,KAAoB,UAApB,IACA/D,QAAQ,CAAC,KAAKlB,KAAL,CAAWA,KAAZ,CAAR,KAA+BkB,QAAQ,CAACyM,IAAI,CAACC,EAAN,CAD3C,EAEA;CACCJ,cAAAA,aAAa,GAAGD,YAAY,CAAChM,MAAb,GAAsB,CAAtC;CACA;CACD,WAhBD,EAgBG,IAhBH;CAkBAgM,UAAAA,YAAY,CAAC7L,IAAb,CAAkB;CAACsM,YAAAA,SAAS,EAAE;CAAZ,WAAlB;CACAT,UAAAA,YAAY,CAAC7L,IAAb,CAAkB;CACjBC,YAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,8BAAf,CADU;CAEjB+K,YAAAA,QAAQ,EAAE,KAAKC,gBAAL,CAAsB7K,IAAtB,CAA2B,IAA3B;CAFO,WAAlB;CAIA,SAzBD,MA2BA;CACCkK,UAAAA,YAAY,CAAC7L,IAAb,CAAkB;CACjBC,YAAAA,KAAK,EAAEsB,aAAG,CAACC,UAAJ,CAAe,iBAAf,CADU;CAEjB+K,YAAAA,QAAQ,EAAE,KAAKC,gBAAL,CAAsB7K,IAAtB,CAA2B,IAA3B;CAFO,WAAlB;CAIA;CACD;;CAED,UAAI,KAAKrD,KAAT,EACA;CACC,aAAKnB,GAAL,CAASE,KAAT,CAAeiB,KAAf,GAAuB,KAAKA,KAAL,CAAWmO,GAAX,IAAkB,EAAzC;;CACA,YAAI,KAAKnO,KAAL,CAAWiF,IAAX,IAAmB,KAAKjF,KAAL,CAAWmO,GAAX,KAAmB,KAAKC,eAAL,CAAqB,KAAKpO,KAA1B,CAA1C,EACA;CACC,eAAKnB,GAAL,CAASE,KAAT,CAAeiB,KAAf,GAAuBiD,aAAG,CAACC,UAAJ,CAAe,iBAAf,CAAvB;CACA;CACD;;CAED,UAAI,KAAK9D,YAAT,EACA;CACC,aAAKA,YAAL,CAAkBuL,OAAlB;CACA;;CAED,WAAKvL,YAAL,GAAoB,IAAIC,EAAE,CAACC,QAAH,CAAYC,QAAZ,CAAqBC,WAAzB,CAAqC;CACxDT,QAAAA,KAAK,EAAE,KAAKF,GAAL,CAASE,KADwC;CAExDY,QAAAA,MAAM,EAAE4N,YAFgD;CAGxDc,QAAAA,UAAU,EAAEb,aAH4C;CAIxD/N,QAAAA,MAAM,EAAE,KAAKA,MAJ2C;CAKxD2M,QAAAA,QAAQ,EAAE,KAAKA,QALyC;CAMxDpN,QAAAA,gBAAgB,EAAEK,EAAE,CAACiP,QAAH,CAAY,YAC9B;CACC,cAAIhN,CAAJ;CAAA,cAAOtB,KAAK,GAAG,KAAKnB,GAAL,CAASE,KAAT,CAAeiB,KAA9B;CACA,eAAKA,KAAL,GAAa;CAAC8E,YAAAA,IAAI,EAAE9E;CAAP,WAAb;;CACA,eAAKsB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiM,YAAY,CAAChM,MAA7B,EAAqCD,CAAC,EAAtC,EACA;CACC,gBAAIiM,YAAY,CAACjM,CAAD,CAAZ,CAAgByM,QAAhB,KAA6B/N,KAAjC,EACA;CACC,mBAAKA,KAAL,CAAWiF,IAAX,GAAkBsI,YAAY,CAACjM,CAAD,CAAZ,CAAgB2D,IAAlC;CACA,mBAAKjF,KAAL,CAAWA,KAAX,GAAmBuN,YAAY,CAACjM,CAAD,CAAZ,CAAgBtB,KAAnC;CACA;CACA;CACD;;CAED,cAAIf,cAAI,CAACC,UAAL,CAAgB,KAAKN,MAAL,CAAYI,gBAA5B,CAAJ,EACA;CACC,iBAAKJ,MAAL,CAAYI,gBAAZ;CACA;CACD,SAlBiB,EAkBf,IAlBe;CANsC,OAArC,CAApB;CA0BA;CAjLF;CAAA;CAAA,uCAoLC;CACC,UAAIJ,MAAM,GAAG,EAAb;;CACA,UAAI,KAAKA,MAAL,CAAY2P,yBAAhB,EACA;CACC3P,QAAAA,MAAM,CAACE,IAAP,GAAc,KAAKF,MAAL,CAAY2P,yBAAZ,EAAd;CACA;;CAED,UAAI,CAAC3P,MAAM,CAACE,IAAZ,EACA;CACCF,QAAAA,MAAM,CAACE,IAAP,GAAc,KAAK0P,oBAAL,EAAd;CACA;;CAED,WAAKC,wBAAL,CAA8B7P,MAA9B;CACA;CAjMF;CAAA;CAAA,2CAoMC;CACC,UAAI,KAAK8P,UAAT,EACA;CACC,aAAKA,UAAL,CAAgB/D,OAAhB;CACA;;CAED,WAAKgE,iBAAL,GAAyBhM,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ;CAAR,OAAlB,CAAzB;CACA,WAAKiH,UAAL,GAAkB,IAAIrP,EAAE,CAACuP,WAAP,CAAmB,KAAK7M,EAAL,GAAU,QAA7B,EAAuC,IAAvC,EACjB;CACC8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADV;CAECnJ,QAAAA,QAAQ,EAAE,IAFX;CAGCD,QAAAA,UAAU,EAAG,IAHd;CAICjG,QAAAA,MAAM,EAAE,KAAKA,MAJd;CAKCoG,QAAAA,UAAU,EAAE,CALb;CAMCD,QAAAA,SAAS,EAAE,CANZ;CAOCmJ,QAAAA,SAAS,EAAE,IAPZ;CAQCC,QAAAA,YAAY,EAAE,KARf;CASCC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,4BAAf,CATX;CAUCgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAVZ;CAWC3H,QAAAA,SAAS,EAAE,kBAXZ;CAYC4H,QAAAA,OAAO,EAAE,CACR,IAAIhQ,EAAE,CAACiQ,iBAAP,CAAyB;CACxBxK,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,oBAAf,CADkB;CAExByE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAGvI,EAAE,CAACiP,QAAH,CAAY,YAC5B;CACC,mBAAKiB,UAAL;;CACA,kBAAI,KAAKb,UAAT,EACA;CACC,qBAAKA,UAAL,CAAgBlJ,KAAhB;CACA;CACD,aAPe,EAOb,IAPa;CAAT;CAFgB,SAAzB,CADQ,EAaR,IAAInG,EAAE,CAACmQ,qBAAP,CAA6B;CAC5B1K,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADsB;CAE5BuE,UAAAA,SAAS,EAAE,iCAFiB;CAG5BE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAGvI,EAAE,CAACiP,QAAH,CAAY,YAC5B;CACC,kBAAI,KAAKI,UAAT,EACA;CACC,qBAAKA,UAAL,CAAgBlJ,KAAhB;CACA;CACD,aANe,EAMb,IANa;CAAT;CAHoB,SAA7B,CAbQ,CAZV;CAqCCiK,QAAAA,OAAO,EAAE,KAAKd,iBArCf;CAsCChH,QAAAA,MAAM,EAAE;CAtCT,OADiB,CAAlB;CA0CA,WAAK+G,UAAL,CAAgBpI,IAAhB;CACA,aAAO,KAAKqI,iBAAZ;CACA;CAvPF;CAAA;CAAA,6CAyP0B/P,MAzP1B,EA0PC;CACC,UAAI0C,CAAJ;CAEA,WAAKoO,wBAAL,GAAgC,IAAhC;CACA,WAAKC,cAAL,GAAsB/Q,MAAM,CAACE,IAA7B,CAJD;;CAOC,WAAK8Q,gBAAL,GAAwB,EAAxB;CACA,WAAKC,iBAAL,GAAyB,KAAzB;;CACA,UAAI5Q,cAAI,CAACiF,OAAL,CAAagI,QAAQ,CAACS,YAAtB,CAAJ,EACA;CACCT,QAAAA,QAAQ,CAACS,YAAT,CAAsBxI,OAAtB,CAA8B,UAASwJ,IAAT,EAC9B;CACC,cAAIA,IAAI,CAACG,IAAL,KAAc,EAAd,IAAoBH,IAAI,CAACC,EAA7B,EACA;CACC,iBAAKgC,gBAAL,CAAsBlO,IAAtB,CAA2B;CAC1BK,cAAAA,EAAE,EAAEb,QAAQ,CAACyM,IAAI,CAACC,EAAN,CADc;CAE1BT,cAAAA,IAAI,EAAEQ,IAAI,CAACG;CAFe,aAA3B;CAIA;CACD,SATD,EASG,IATH;CAUA;;CAED,UAAI,CAAC,KAAK8B,gBAAL,CAAsBrO,MAA3B,EACA;CACC,aAAKqO,gBAAL,CAAsBlO,IAAtB,CAA2B;CAC1BK,UAAAA,EAAE,EAAE,CADsB;CAE1BoL,UAAAA,IAAI,EAAE;CAFoB,SAA3B;CAIA;;CAED,WAAK7L,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKsO,gBAAL,CAAsBrO,MAAtC,EAA8CD,CAAC,EAA/C,EACA;CACC,aAAKwO,YAAL,CAAkB,KAAKF,gBAAL,CAAsBtO,CAAtB,CAAlB,EAA4C1C,MAAM,CAACE,IAAnD;CACA,OAlCF;;;CAqCC,WAAK+Q,iBAAL,GAAyB;CACxBE,QAAAA,SAAS,EAAEnR,MAAM,CAACE,IAAP,CAAYgE,WAAZ,CAAwBH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ;CAAR,SAAlB,CAAxB;CADa,OAAzB;CAGA,WAAKoI,iBAAL,CAAuBG,SAAvB,GAAmC,KAAKH,iBAAL,CAAuBE,SAAvB,CAAiCjN,WAAjC,CAA6CH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ;CAAR,OAAlB,CAA7C,CAAnC;CAEA,WAAKoI,iBAAL,CAAuBI,SAAvB,GAAmC,KAAKJ,iBAAL,CAAuBG,SAAvB,CAAiClN,WAAjC,CAA6CH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CACjGqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SAD0F;CAEjGyI,QAAAA,IAAI,EAAE,sCAAsCjN,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAAtC,GAA8E,SAFa;CAGjGyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAEvI,EAAE,CAACiP,QAAH,CAAY,YACnB;CACC,gBAAI6B,QAAQ,GAAG,KAAKP,gBAAL,CAAsB,KAAKA,gBAAL,CAAsBrO,MAAtB,GAA+B,CAArD,CAAf;;CACA,gBAAI4O,QAAQ,CAACpO,EAAT,IAAeoO,QAAQ,CAACC,OAAxB,IAAmC/Q,EAAE,CAACqF,IAAH,CAAQ2L,IAAR,CAAaF,QAAQ,CAAC/F,KAAT,CAAerL,KAAf,CAAqBiB,KAAlC,CAAvC,EACA;CACC,mBAAK4P,gBAAL,CAAsBlO,IAAtB,CAA2B,KAAKoO,YAAL,CAAkB;CAAC/N,gBAAAA,EAAE,EAAE;CAAL,eAAlB,EAA2BnD,MAAM,CAACE,IAAlC,CAA3B;CACA;CACD,WAPM,EAOJ,IAPI;CADA;CAHyF,OAAlB,CAA7C,CAAnC;CAcAF,MAAAA,MAAM,CAACE,IAAP,CAAYgE,WAAZ,CAAwB,KAAK+M,iBAAL,CAAuBE,SAA/C;CACA;CAnTF;CAAA;CAAA,iCAqTcpC,IArTd,EAsTC;CACCA,MAAAA,IAAI,CAACvD,KAAL,GAAa;CACZ2F,QAAAA,SAAS,EAAE,KAAKJ,cAAL,CAAoB7M,WAApB,CAAgCH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ;CAAR,SAAlB,CAAhC;CADC,OAAb;CAGAkG,MAAAA,IAAI,CAACvD,KAAL,CAAW4F,SAAX,GAAuBrC,IAAI,CAACvD,KAAL,CAAW2F,SAAX,CAAqBjN,WAArB,CAAiCH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAACqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ;CAAR,OAAlB,CAAjC,CAAvB;CAEAkG,MAAAA,IAAI,CAACvD,KAAL,CAAW4F,SAAX,CAAqBjF,KAArB,CAA2BuF,YAA3B,GAA0C,MAA1C;CACA3C,MAAAA,IAAI,CAACvD,KAAL,CAAWrL,KAAX,GAAmB4O,IAAI,CAACvD,KAAL,CAAW4F,SAAX,CAAqBlN,WAArB,CAAiCH,aAAG,CAACxD,MAAJ,CAAW,OAAX,EAAoB;CACvEqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SADgE;CAEvEyF,QAAAA,KAAK,EAAE;CACNlN,UAAAA,KAAK,EAAE2N,IAAI,CAACR,IAAL,IAAa,EADd;CAENE,UAAAA,WAAW,EAAEpK,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAFP;CAGN+B,UAAAA,IAAI,EAAE;CAHA,SAFgE;CAOvE0C,QAAAA,MAAM,EAAE;CACP4I,UAAAA,KAAK,EAAElR,EAAE,CAACiP,QAAH,CAAY,UAAS5H,CAAT,EACnB;CACC,gBAAIxF,QAAQ,CAACwF,CAAC,CAAC8J,OAAH,CAAR,KAAwB,EAA5B,EACA;CACC,mBAAKC,QAAL,CAAc9C,IAAd;CACA;CACD,WANM,EAMJ,IANI;CADA;CAP+D,OAApB,CAAjC,CAAnB;CAiBAA,MAAAA,IAAI,CAACvD,KAAL,CAAWsG,YAAX,GAA0B/C,IAAI,CAACvD,KAAL,CAAW4F,SAAX,CAAqBlN,WAArB,CAAiCH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAC7EqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SADsE;CAE7EE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAEvI,EAAE,CAACiP,QAAH,CAAY,YACnB;CACCpC,YAAAA,QAAQ,CAACyE,WAAT,CAAqBhD,IAArB;CACA,WAHM,EAGJ,IAHI;CADA;CAFqE,OAAnB,CAAjC,CAA1B;;CAUA,UAAI,KAAKkC,iBAAT,EACA;CACC,aAAKF,cAAL,CAAoB7M,WAApB,CAAgC,KAAK+M,iBAAL,CAAuBE,SAAvD;CACA;;CAED,UAAI,CAACpC,IAAI,CAAC5L,EAAV,EACA;CACC4L,QAAAA,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiB6R,KAAjB;CACA;;CAED,aAAOjD,IAAP;CACA;CAnWF;CAAA;CAAA,6BAqWUA,IArWV,EAsWC;CACC,UAAI,CAAC,KAAK+B,wBAAV,EACC;CAED/B,MAAAA,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAAjB,GAAyBX,EAAE,CAACqF,IAAH,CAAQ2L,IAAR,CAAa1C,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAA9B,CAAzB;;CACA,UAAI,CAAC2N,IAAI,CAAC5L,EAAV,EACA;CACC,YAAI4L,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAAjB,IAA0BX,EAAE,CAACqF,IAAH,CAAQ2L,IAAR,CAAa1C,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAA9B,MAAyCX,EAAE,CAACqF,IAAH,CAAQ2L,IAAR,CAAa1C,IAAI,CAACR,IAAlB,CAAvE,EACA;CACCQ,UAAAA,IAAI,CAACR,IAAL,GAAYQ,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAA7B;CACA,eAAK4P,gBAAL,CAAsBlO,IAAtB,CAA2B,KAAKoO,YAAL,CAAkB;CAAC/N,YAAAA,EAAE,EAAE;CAAL,WAAlB,CAA3B;CACA;CACD,OAPD,MASA;CACC,YAAI1C,EAAE,CAACqF,IAAH,CAAQ2L,IAAR,CAAa1C,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAA9B,MAA0C2N,IAAI,CAACR,IAAnD,EACA;CACCQ,UAAAA,IAAI,CAACR,IAAL,GAAYQ,IAAI,CAACvD,KAAL,CAAWrL,KAAX,CAAiBiB,KAA7B;CACA2N,UAAAA,IAAI,CAACkD,OAAL,GAAe,IAAf;CACA;CACD;CACD;CA3XF;CAAA;CAAA,iCAqYC;CAAA;;CACC,UAAIvP,CAAJ;CAAA,UAAOqL,YAAY,GAAG,EAAtB;;CACA,WAAKrL,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKsO,gBAAL,CAAsBrO,MAAtC,EAA8CD,CAAC,EAA/C,EACA;CACC,YAAI,KAAKsO,gBAAL,CAAsBtO,CAAtB,EAAyB8I,KAAzB,IAAkC,KAAKwF,gBAAL,CAAsBtO,CAAtB,EAAyB8I,KAAzB,CAA+BrL,KAArE,EACA;CACC,cAAI,KAAK6Q,gBAAL,CAAsBtO,CAAtB,EAAyB6L,IAAzB,KAAkC,KAAKyC,gBAAL,CAAsBtO,CAAtB,EAAyB8I,KAAzB,CAA+BrL,KAA/B,CAAqCiB,KAAvE,IAAgF,KAAK4P,gBAAL,CAAsBtO,CAAtB,EAAyBS,EAA7G,EACA;CACC,iBAAK6N,gBAAL,CAAsBtO,CAAtB,EAAyBuP,OAAzB,GAAmC,IAAnC;CACA;;CAED,eAAKjB,gBAAL,CAAsBtO,CAAtB,EAAyB6L,IAAzB,GAAgC,KAAKyC,gBAAL,CAAsBtO,CAAtB,EAAyB8I,KAAzB,CAA+BrL,KAA/B,CAAqCiB,KAArE;CACA;;CAED,YAAK,CAAC,KAAK4P,gBAAL,CAAsBtO,CAAtB,EAAyB8O,OAA1B,IAAqC,KAAKR,gBAAL,CAAsBtO,CAAtB,EAAyB6L,IAA/D,IAAwE,KAAKyC,gBAAL,CAAsBtO,CAAtB,EAAyBS,EAArG,EACA;CACC4K,UAAAA,YAAY,CAACjL,IAAb,CAAkB;CACjBK,YAAAA,EAAE,EAAE,KAAK6N,gBAAL,CAAsBtO,CAAtB,EAAyBS,EAAzB,IAA+B,CADlB;CAEjBoL,YAAAA,IAAI,EAAE,KAAKyC,gBAAL,CAAsBtO,CAAtB,EAAyB6L,IAAzB,IAAiC,EAFtB;CAGjB0D,YAAAA,OAAO,EAAG,KAAKjB,gBAAL,CAAsBtO,CAAtB,EAAyBuP,OAAzB,IAAoC,CAAC,KAAKjB,gBAAL,CAAsBtO,CAAtB,EAAyBS,EAA/D,GAAqE,GAArE,GAA2E,GAHnE;CAIjBqO,YAAAA,OAAO,EAAG,KAAKR,gBAAL,CAAsBtO,CAAtB,EAAyB8O,OAAzB,IAAoC,CAAC,KAAKR,gBAAL,CAAsBtO,CAAtB,EAAyB6L,IAA/D,GAAuE,GAAvE,GAA6E;CAJrE,WAAlB;CAMA;CACD;;CAED9N,MAAAA,EAAE,CAACyR,IAAH,CAAQC,SAAR,CAAkB,4CAAlB,EAAgE;CAC/D/I,QAAAA,IAAI,EAAE;CACL2E,UAAAA,YAAY,EAAEA;CADT;CADyD,OAAhE,EAKEqE,IALF;CAOE,gBAACC,QAAD,EAAc;CACb/E,QAAAA,QAAQ,CAACQ,eAAT,CAAyBuE,QAAQ,CAACjJ,IAAT,CAAc2E,YAAvC;;CACA,QAAA,KAAI,CAACuE,SAAL;CACA,OAVH;CAYE,gBAACD,QAAD,EAAc;CAEb,OAdH;CAgBA,WAAKvB,wBAAL,GAAgC,KAAhC;CACA;CA/aF;CAAA;CAAA,iCAibc1P,KAjbd,EAkbC;CACC,UAAI,CAACA,KAAL,EACA;CACCA,QAAAA,KAAK,GAAG,KAAKA,KAAb;CACA;;CAED,UAAImR,GAAG,GAAGnR,KAAK,CAACmO,GAAN,IAAanO,KAAK,CAAC8E,IAAnB,IAA2B,EAArC;;CACA,UAAI9E,KAAK,IAAIA,KAAK,CAACiF,IAAN,KAAe,IAA5B,EACA;CACCkM,QAAAA,GAAG,GAAG,UAAUnR,KAAK,CAACA,KAAhB,IAAyBA,KAAK,CAACoR,MAAN,GAAe,MAAMpR,KAAK,CAACoR,MAA3B,GAAoC,EAA7D,CAAN;CAEA,OAJD,MAKK,IAAIpR,KAAK,IAAIA,KAAK,CAACiF,IAAN,KAAe,UAA5B,EACL;CACCkM,QAAAA,GAAG,GAAG,cAAcnR,KAAK,CAACA,KAApB,IAA6BA,KAAK,CAACqR,aAAN,GAAsB,MAAMrR,KAAK,CAACqR,aAAlC,GAAkD,EAA/E,CAAN;CACA;;CACD,aAAOF,GAAP;CACA;CAncF;CAAA;CAAA,+BAscC;CACC,aAAO,KAAKnR,KAAZ;CACA;CAxcF;CAAA;CAAA,6BA0cUA,KA1cV,EA2cC;CACC,UAAIf,cAAI,CAAC+H,aAAL,CAAmBhH,KAAnB,CAAJ,EACA;CACC,aAAKA,KAAL,CAAW8E,IAAX,GAAkB9E,KAAK,CAAC8E,IAAN,IAAc,EAAhC;CACA,aAAK9E,KAAL,CAAWiF,IAAX,GAAkBjF,KAAK,CAACiF,IAAN,IAAc,EAAhC;CACA,aAAKjF,KAAL,CAAWA,KAAX,GAAmBA,KAAK,CAACA,KAAN,IAAe,EAAlC;CACA,OALD,MAOA;CACC,aAAKA,KAAL,GAAakM,QAAQ,CAACoF,gBAAT,CAA0BtR,KAA1B,CAAb;CACA;;CAED,WAAKkR,SAAL;;CAEA,UAAI,KAAK5E,qBAAT,EACA;CACC,YAAIiF,YAAY,GAAG,KAAKnD,eAAL,CAAqB,KAAKpO,KAA1B,CAAnB;CACA,aAAKnB,GAAL,CAASiO,cAAT,CAAwBzD,SAAxB,GAAoCmI,cAAI,CAACC,MAAL,CAAYF,YAAY,IAAItO,aAAG,CAACC,UAAJ,CAAe,gBAAf,CAA5B,CAApC;CACA;CACD,KA9dF;;CAAA;CAAA;CAAA,oCAohBiBwO,QAphBjB,EAqhBC;CACC,UACC1R,KAAK,GAAGf,cAAI,CAAC+H,aAAL,CAAmB0K,QAAnB,IAA+BA,QAA/B,GAA0CxF,QAAQ,CAACoF,gBAAT,CAA0BI,QAA1B,CADnD;CAAA,UAECpQ,CAFD;CAAA,UAEI6M,GAAG,GAAGnO,KAAK,CAACmO,GAFhB;;CAIA,UAAIlP,cAAI,CAACiF,OAAL,CAAa,KAAKqI,YAAlB,KAAmCvM,KAAK,CAACiF,IAAN,KAAe,IAAtD,EACA;CACC,aAAK3D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKiL,YAAL,CAAkBhL,MAAlC,EAA0CD,CAAC,EAA3C,EACA;CACC,cAAIJ,QAAQ,CAAClB,KAAK,CAACA,KAAP,CAAR,KAA0BkB,QAAQ,CAAC,KAAKqL,YAAL,CAAkBjL,CAAlB,EAAqBsM,EAAtB,CAAtC,EACA;CACCO,YAAAA,GAAG,GAAG,KAAK5B,YAAL,CAAkBjL,CAAlB,EAAqBwM,IAA3B;CACA;CACA;CACD;CACD;;CAED,UAAI7O,cAAI,CAACiF,OAAL,CAAagI,QAAQ,CAACS,YAAtB,KAAuC3M,KAAK,CAACiF,IAAN,KAAe,UAA1D,EACA;CACC,aAAK3D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4K,QAAQ,CAACS,YAAT,CAAsBpL,MAAtC,EAA8CD,CAAC,EAA/C,EACA;CACC,cAAIJ,QAAQ,CAAClB,KAAK,CAACA,KAAP,CAAR,KAA0BkB,QAAQ,CAACgL,QAAQ,CAACS,YAAT,CAAsBrL,CAAtB,EAAyBsM,EAA1B,CAAtC,EACA;CACCO,YAAAA,GAAG,GAAGjC,QAAQ,CAACS,YAAT,CAAsBrL,CAAtB,EAAyBwM,IAA/B;CACA;CACA;CACD;CACD;;CAED,aAAOK,GAAP;CACA;CAnjBF;CAAA;CAAA,gDAglBC;CACC,WAAKtP,GAAL,CAASgO,kBAAT,CAA4B9B,KAA5B,CAAkCC,OAAlC,GAA4C,MAA5C;CACA,WAAKnM,GAAL,CAAS+N,SAAT,CAAmB7B,KAAnB,CAAyBC,OAAzB,GAAmC,EAAnC;CACA;CAnlBF;CAAA;CAAA,gCA6XoB2C,IA7XpB,EA8XC;CACCtO,MAAAA,EAAE,CAAC4I,MAAH,CAAU0F,IAAI,CAACvD,KAAL,CAAW2F,SAArB,EAAgC,IAAhC;CACApC,MAAAA,IAAI,CAACyC,OAAL,GAAe,IAAf;CACAzC,MAAAA,IAAI,CAACkD,OAAL,GAAe,IAAf;CACA;CAlYF;CAAA;CAAA,qCAieyB1C,GAjezB,EAkeC;CACC,UAAI,CAAClP,cAAI,CAAC0S,QAAL,CAAcxD,GAAd,CAAL,EACA;CACCA,QAAAA,GAAG,GAAG,EAAN;CACA;;CAED,UACCgD,GAAG,GAAG;CACLlM,QAAAA,IAAI,EAAG,KADF;CAELjF,QAAAA,KAAK,EAAG,KAFH;CAGLmO,QAAAA,GAAG,EAAGA;CAHD,OADP;;CAOA,UAAIA,GAAG,CAACyD,MAAJ,CAAW,CAAX,EAAc,CAAd,MAAqB,OAAzB,EACA;CACCT,QAAAA,GAAG,CAAClM,IAAJ,GAAW,IAAX;CACA,YAAIjF,KAAK,GAAGmO,GAAG,CAAC0D,KAAJ,CAAU,GAAV,CAAZ;;CACA,YAAI7R,KAAK,CAACuB,MAAN,IAAgB,CAApB,EACA;CACC,cAAI,CAACuQ,KAAK,CAAC5Q,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAAT,CAAN,IAA8BkB,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,CAAvD,EACA;CACCmR,YAAAA,GAAG,CAACnR,KAAJ,GAAYmR,GAAG,CAACY,IAAJ,GAAW7Q,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAA/B;CACA;;CAED,cAAI,CAAC8R,KAAK,CAAC5Q,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAAT,CAAN,IAA8BkB,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,CAAvD,EACA;CACCmR,YAAAA,GAAG,CAACC,MAAJ,GAAalQ,QAAQ,CAAClB,KAAK,CAAC,CAAD,CAAN,CAArB;CACA;CACD;CACD,OAhBD,MAiBK,IAAImO,GAAG,CAACyD,MAAJ,CAAW,CAAX,EAAc,CAAd,MAAqB,WAAzB,EACL;CACCT,QAAAA,GAAG,CAAClM,IAAJ,GAAW,UAAX;;CACA,YAAIjF,MAAK,GAAGmO,GAAG,CAAC0D,KAAJ,CAAU,GAAV,CAAZ;;CACA,YAAI7R,MAAK,CAACuB,MAAN,IAAgB,CAApB,EACA;CACC,cAAI,CAACuQ,KAAK,CAAC5Q,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAAT,CAAN,IAA8BkB,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,CAAvD,EACA;CACCmR,YAAAA,GAAG,CAACnR,KAAJ,GAAYmR,GAAG,CAACa,OAAJ,GAAc9Q,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAAlC;CACA;;CACD,cAAI,CAAC8R,KAAK,CAAC5Q,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAAT,CAAN,IAA8BkB,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAAR,GAAqB,CAAvD,EACA;CACCmR,YAAAA,GAAG,CAACE,aAAJ,GAAoBnQ,QAAQ,CAAClB,MAAK,CAAC,CAAD,CAAN,CAA5B;CACA;CACD;CACD;;CAED,aAAOmR,GAAP;CACA;CAlhBF;CAAA;CAAA,oCAqjBwBxE,YArjBxB,EAsjBC;CACC,UAAI1N,cAAI,CAACiF,OAAL,CAAayI,YAAb,CAAJ,EACA;CACCT,QAAAA,QAAQ,CAACS,YAAT,GAAwBA,YAAxB;CACA;CACD;CA3jBF;CAAA;CAAA,sCA8jBC;CACC,aAAOT,QAAQ,CAACS,YAAhB;CACA;CAhkBF;CAAA;CAAA,uCAkkB2BsF,eAlkB3B,EAmkBC;CACC,UAAIhT,cAAI,CAACiF,OAAL,CAAa+N,eAAb,CAAJ,EACA;CACC/F,QAAAA,QAAQ,CAAC+F,eAAT,GAA2BA,eAA3B;CACA;CACD;CAxkBF;CAAA;CAAA,yCA2kBC;CACC,aAAO/F,QAAQ,CAAC+F,eAAhB;CACA;CA7kBF;CAAA;CAAA;6BAAa/F,0BAEU;6BAFVA,6BAGa;;KCFbgG,YAAb;CAEC,0BACA;CAAA,QADYtT,MACZ,uEADqB,EACrB;CAAA;CACC,SAAKA,MAAL,GAAcA,MAAd;CACA,SAAKmD,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,mBAAmBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAA1C;CACA,SAAKxC,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CAEA,SAAKZ,GAAL,GAAW;CACVsN,MAAAA,QAAQ,EAAEvN,MAAM,CAACuN;CADP,KAAX;CAGA,SAAKgG,oBAAL,GAA4BvT,MAAM,CAACwO,SAAP,IAAoB,mBAAhD;;CAEA,QAAInO,cAAI,CAACiF,OAAL,CAAa,KAAKtF,MAAL,CAAYwT,aAAzB,KAA2C,KAAKxT,MAAL,CAAYwT,aAAZ,CAA0B7Q,MAAzE,EACA;CACC,WAAK3C,MAAL,CAAYwT,aAAZ,GAA4B,KAAKC,qBAAL,CAA2B,KAAKzT,MAAL,CAAYwT,aAAvC,CAA5B;CACA;;CAED,SAAKjT,MAAL;CACA;;CAnBF;CAAA;CAAA,6BAsBC;CACC,UAAI4C,EAAE,GAAG,KAAKA,EAAd;CACA,WAAKlD,GAAL,CAASyT,qBAAT,GAAiC,KAAKzT,GAAL,CAASsN,QAAT,CAAkBrJ,WAAlB,CAA8BH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAChFqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SADyE;CAEhFE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,eAAClB,CAAD,EAAO;CACdrH,YAAAA,EAAE,CAACkT,oBAAH,CAAwBC,UAAxB,CAAmCzQ,EAAnC;CACA;CAHM;CAFwE,OAAlB,CAA9B,CAAjC;CASA,WAAK0Q,sBAAL,GAA8B,KAAK5T,GAAL,CAASyT,qBAAT,CAA+BxP,WAA/B,CAA2CH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAC3FqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SADoF;CAE3FE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,eAASlB,CAAT,EACR;CACC,gBAAIgM,IAAI,GAAGhM,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAAzB;;CACA,gBAAIqK,IAAI,CAACjL,SAAL,KAAmB,oBAAvB;CACA;CACC2H,gBAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BI,UAA5B,CAAuCD,IAAI,CAACnK,YAAL,CAAkB,cAAlB,CAAvC,EAA0EmK,IAAI,CAACnK,YAAL,CAAkB,gBAAlB,CAA1E,EAA+GxG,EAA/G;CACA2E,gBAAAA,CAAC,CAACkM,cAAF;CACAlM,gBAAAA,CAAC,CAACmM,eAAF;CACA;CACD,WAVM;CAWPC,UAAAA,SAAS,EAAE,mBAASpM,CAAT,EACX;CACC,gBAAIgM,IAAI,GAAGhM,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAAzB;CACA,gBAAIqK,IAAI,CAACjL,SAAL,KAAmB,oBAAvB;CACCpI,cAAAA,EAAE,CAACuD,QAAH,CAAY8P,IAAI,CAAC9G,UAAjB,EAA6B,uBAA7B;CACD,WAhBM;CAiBPmH,UAAAA,QAAQ,EAAE,kBAASrM,CAAT,EACV;CACC,gBAAIgM,IAAI,GAAGhM,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAAzB;CACA,gBAAIqK,IAAI,CAACjL,SAAL,KAAmB,oBAAvB;CACCpI,cAAAA,EAAE,CAAC4L,WAAH,CAAeyH,IAAI,CAAC9G,UAApB,EAAgC,uBAAhC;CACD;CAtBM;CAFmF,OAAnB,CAA3C,CAA9B;CA4BA,WAAKoH,0BAAL,GAAkC,KAAKnU,GAAL,CAASyT,qBAAT,CAA+BxP,WAA/B,CAA2CH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAACqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ;CAAR,OAAnB,CAA3C,CAAlC;CACA,WAAKwL,sBAAL,GAA8B,KAAKD,0BAAL,CAAgClQ,WAAhC,CAC7BH,aAAG,CAACxD,MAAJ,CAAW,OAAX,EAAoB;CACnBqI,QAAAA,KAAK,EAAE;CAACzF,UAAAA,EAAE,EAAEA,EAAE,GAAG,MAAV;CAAkB0F,UAAAA,SAAS,EAAE;CAA7B,SADY;CAEnByF,QAAAA,KAAK,EAAE;CAAClN,UAAAA,KAAK,EAAE,EAAR;CAAYiF,UAAAA,IAAI,EAAE;CAAlB,SAFY;CAGnB0C,QAAAA,MAAM,EAAE;CACPuL,UAAAA,OAAO,EAAG,iBAASxM,CAAT,EAAW;CACpB,mBAAO0I,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BY,mBAA5B,CAAgDzM,CAAhD,EAAmD;CACzD0M,cAAAA,QAAQ,EAAErR,EAD+C;CAEzDsR,cAAAA,OAAO,EAAEtR,EAAE,GAAG;CAF2C,aAAnD,CAAP;CAIA,WANM;CAOPwO,UAAAA,KAAK,EAAG,eAAS7J,CAAT,EAAW;CAClB,mBAAO0I,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4Be,aAA5B,CAA0C5M,CAA1C,EAA6C;CACnD0M,cAAAA,QAAQ,EAAErR,EADyC;CAEnDsR,cAAAA,OAAO,EAAEtR,EAAE,GAAG,MAFqC;CAGnDwR,cAAAA,MAAM,EAAE,0BAH2C;CAInDC,cAAAA,QAAQ,EAAE;CAJyC,aAA7C,CAAP;CAMA;CAdM;CAHW,OAApB,CAD6B,CAA9B;CAsBA,WAAKC,qBAAL,GAA6B,KAAK5U,GAAL,CAASyT,qBAAT,CAA+BxP,WAA/B,CAA2CH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAC1F+Q,QAAAA,IAAI,EAAE,KAAKtR,MAAL,CAAY8U,cAAZ,IAA8BrU,EAAE,CAACsU,OAAH,CAAW,0BAAX,CADsD;CAE1FnM,QAAAA,KAAK,EAAE;CAACzF,UAAAA,EAAE,EAAEA,EAAE,GAAG,OAAV;CAAmB0F,UAAAA,SAAS,EAAE;CAA9B,SAFmF;CAG1FE,QAAAA,MAAM,EAAE;CACPuL,UAAAA,OAAO,EAAG,iBAASxM,CAAT,EAAW;CACpB,mBAAO0I,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BY,mBAA5B,CAAgDzM,CAAhD,EAAmD;CACzD0M,cAAAA,QAAQ,EAAErR,EAD+C;CAEzDsR,cAAAA,OAAO,EAAEtR,EAAE,GAAG;CAF2C,aAAnD,CAAP;CAIA,WANM;CAOPwO,UAAAA,KAAK,EAAG,eAAS7J,CAAT,EAAW;CAClB,mBAAO0I,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4Be,aAA5B,CAA0C5M,CAA1C,EAA6C;CACnD0M,cAAAA,QAAQ,EAAErR,EADyC;CAEnDsR,cAAAA,OAAO,EAAEtR,EAAE,GAAG,MAFqC;CAGnDwR,cAAAA,MAAM,EAAE,0BAH2C;CAInDC,cAAAA,QAAQ,EAAE;CAJyC,aAA7C,CAAP;CAMA;CAdM;CAHkF,OAAnB,CAA3C,CAA7B,CA9DD;CAoFC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA,WAAKI,IAAL;CACA;CApHF;CAAA;CAAA,2BAuHC;CAAA;;CACC,UAAI,CAAC,KAAKX,sBAAN,IAAgC,CAAC,KAAKpU,GAAL,CAASyT,qBAA1C,IAAmE,CAAC,KAAK1T,MAAL,CAAYsG,KAApF,EACA;CACC;CACA;;CAED,UAAG,KAAKtG,MAAL,CAAYiV,YAAZ,KAA6B,KAAhC,EACA;CACC,aAAKjV,MAAL,CAAYsG,KAAZ,CAAkB4O,MAAlB,GAA2B,EAA3B;CACA,aAAKlV,MAAL,CAAYsG,KAAZ,CAAkB6O,UAAlB,GAA+B,EAA/B;CACA,aAAKnV,MAAL,CAAYsG,KAAZ,CAAkB8O,WAAlB,GAAgC,EAAhC;CACA;;CAED,UAAG,KAAKpV,MAAL,CAAYqV,WAAZ,KAA4B,KAA/B,EACA;CACC,aAAKrV,MAAL,CAAYsG,KAAZ,CAAkBgP,KAAlB,GAA0B,EAA1B;CACA,aAAKtV,MAAL,CAAYsG,KAAZ,CAAkB4O,MAAlB,GAA2B,EAA3B;CACA,aAAKlV,MAAL,CAAYsG,KAAZ,CAAkB6O,UAAlB,GAA+B,EAA/B;CACA;;CAED1U,MAAAA,EAAE,CAACkT,oBAAH,CAAwBqB,IAAxB,CAA6B;CAC5BzG,QAAAA,IAAI,EAAG,KAAKpL,EADgB;CAE5BoS,QAAAA,WAAW,EAAG,KAAKlB,sBAFS;CAG5BmB,QAAAA,YAAY,EAAI,KAHY;CAI5BC,QAAAA,cAAc,EAAE,GAJY;CAK5BC,QAAAA,aAAa,EAAG;CACftK,UAAAA,IAAI,EAAG,KAAKnL,GAAL,CAASyT,qBADD;CAEf1M,UAAAA,SAAS,EAAG,KAFG;CAGfC,UAAAA,UAAU,EAAE;CAHG,SALY;CAU5B0O,QAAAA,eAAe,EAAG;CACjBvK,UAAAA,IAAI,EAAG,KAAKnL,GAAL,CAASyT,qBADC;CAEjB1M,UAAAA,SAAS,EAAG,KAFK;CAGjBC,UAAAA,UAAU,EAAE;CAHK,SAVU;CAe5BoI,QAAAA,QAAQ,EAAG;CACVuG,UAAAA,MAAM,EAAG,KAAKC,cAAL,CAAoBpR,IAApB,CAAyB,IAAzB,CADC;CAEVqR,UAAAA,QAAQ,EAAG,KAAKC,gBAAL,CAAsBtR,IAAtB,CAA2B,IAA3B,CAFD;CAGVmP,UAAAA,UAAU,EAAG,KAAKoC,kBAAL,CAAwBvR,IAAxB,CAA6B,IAA7B,CAHH;CAIVwR,UAAAA,WAAW,EAAG,KAAKC,mBAAL,CAAyBzR,IAAzB,CAA8B,IAA9B,CAJJ;CAKV0R,UAAAA,UAAU,EAAG,KAAKH,kBAAL,CAAwBvR,IAAxB,CAA6B,IAA7B,CALH;CAMV2R,UAAAA,WAAW,EAAG,uBAAI;CAAC,YAAA,KAAI,CAACF,mBAAL,CAAyB,IAAzB;CAAgC;CANzC,SAfiB;CAuB5B5P,QAAAA,KAAK,EAAG,KAAKtG,MAAL,CAAYsG,KAvBQ;CAwB5B+P,QAAAA,SAAS,EAAG,KAAKrW,MAAL,CAAYqW,SAxBI;CAyB5B7C,QAAAA,aAAa,EAAG,KAAKxT,MAAL,CAAYwT,aAzBA;CA0B5B8C,QAAAA,uBAAuB,EAAE,KAAKtW,MAAL,CAAYiV,YAAZ,KAA6B;CA1B1B,OAA7B;CA4BA,KAvKF;CA0KC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAzND;CAAA;CAAA,+BA4NC;CACC,UAAIzE,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4B4C,YAA5B,EAAJ,EACA;CACC/F,QAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BsC,WAA5B;CACA;;CACDzF,MAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByC,WAA5B;CACA;CAlOF;CAAA;CAAA,mCAoOgBvQ,IApOhB,EAoOsBQ,IApOtB,EAqOC;CACC,UACCmQ,KAAK,GAAGnQ,IADT;CAAA,UAECoQ,MAAM,GAAG,GAFV;;CAIA,UAAIpQ,IAAI,KAAK,aAAb,EACA;CACCoQ,QAAAA,MAAM,GAAG,IAAT;CACA,OAHD,MAIK,IAAIpQ,IAAI,KAAK,QAAb,EACL;CACCoQ,QAAAA,MAAM,GAAG,IAAT;CACAD,QAAAA,KAAK,GAAG,WAAR;CACA,OAJI,MAKA,IAAInQ,IAAI,KAAK,OAAb,EACL;CACCoQ,QAAAA,MAAM,GAAG,GAAT;CACA,OAHI,MAIA,IAAIpQ,IAAI,KAAK,YAAb,EACL;CACCoQ,QAAAA,MAAM,GAAG,IAAT;CACA;;CAED,WAAK5C,sBAAL,CAA4B3P,WAA5B,CACCH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAAE+N,QAAAA,KAAK,EAAG;CAAC,qBAAYzI,IAAI,CAAC1C;CAAlB,SAAV;CAAkCyF,QAAAA,KAAK,EAAG;CAACC,UAAAA,SAAS,EAAG,qCAAqC2N;CAAlD,SAA1C;CAAqGE,QAAAA,QAAQ,EAAE,CAChI3S,aAAG,CAACxD,MAAJ,CAAW,OAAX,EAAoB;CAAE+N,UAAAA,KAAK,EAAG;CAACjI,YAAAA,IAAI,EAAG,QAAR;CAAkBkI,YAAAA,IAAI,EAAG,KAAKgF,oBAAL,GAA4B,GAA5B,GAAkCkD,MAAlC,GAA2C,KAApE;CAA2ErV,YAAAA,KAAK,EAAGyE,IAAI,CAAC1C;CAAxF;CAAV,SAApB,CADgI,EAEhIY,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAAEqI,UAAAA,KAAK,EAAG;CAACC,YAAAA,SAAS,EAAG;CAAb,WAAV;CAAiDyI,UAAAA,IAAI,EAAGzL,IAAI,CAAC0I;CAA7D,SAAnB,CAFgI,EAGhIxK,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAAEqI,UAAAA,KAAK,EAAG;CAACC,YAAAA,SAAS,EAAG;CAAb,WAAV;CAA8CyF,UAAAA,KAAK,EAAE;CAAC,4BAAgBzI,IAAI,CAAC1C,EAAtB;CAA0B,8BAAkBkD;CAA5C;CAArD,SAAnB,CAHgI;CAA/G,OAAnB,CADD;CAQA5F,MAAAA,EAAE,CAACwM,aAAH,CAAiB,yBAAjB,EAA4C,CAACpH,IAAD,CAA5C;CACA,WAAKwO,sBAAL,CAA4BjT,KAA5B,GAAoC,EAApC;CACA,WAAKyT,qBAAL,CAA2BpK,SAA3B,GAAuC,KAAKzK,MAAL,CAAY8U,cAAZ,KAA+BtE,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BgD,gBAA5B,CAA6C,KAAKxT,EAAlD,IAAwD,CAAxD,GAA4D1C,EAAE,CAACsU,OAAH,CAAW,yBAAX,CAA5D,GAAoGtU,EAAE,CAACsU,OAAH,CAAW,0BAAX,CAAnI,CAAvC;CACA;CAvQF;CAAA;CAAA,qCAyQkBlP,IAzQlB,EAyQwBQ,IAzQxB,EAyQ8BuQ,MAzQ9B,EA0QC;CACC,UAAIC,QAAQ,GAAGpW,EAAE,CAACqW,YAAH,CAAgB,KAAKjD,sBAArB,EAA6C;CAACkD,QAAAA,SAAS,EAAE;CAAC,qBAAWlR,IAAI,CAAC1C;CAAjB;CAAZ,OAA7C,EAAgF,IAAhF,CAAf;;CACA,UAAI0T,QAAQ,IAAI,IAAhB,EACA;CACC,aAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAAClU,MAA7B,EAAqCqU,CAAC,EAAtC,EACA;CACCvW,UAAAA,EAAE,CAAC4I,MAAH,CAAUwN,QAAQ,CAACG,CAAD,CAAlB;CACA;CACD;;CAEDvW,MAAAA,EAAE,CAACwM,aAAH,CAAiB,uBAAjB;CACA,WAAKoH,sBAAL,CAA4BjT,KAA5B,GAAoC,EAApC;CACA,WAAKyT,qBAAL,CAA2BpK,SAA3B,GAAuC,KAAKzK,MAAL,CAAY8U,cAAZ,KAA+BtE,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BgD,gBAA5B,CAA6C,KAAKxT,EAAlD,IAAwD,CAAxD,GAA4D1C,EAAE,CAACsU,OAAH,CAAW,yBAAX,CAA5D,GAAoGtU,EAAE,CAACsU,OAAH,CAAW,0BAAX,CAAnI,CAAvC;CACA;CAvRF;CAAA;CAAA,yCA0RC;CACC,UAAIvE,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BnM,WAAhC,EACA;CACC;CACAgJ,QAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BnM,WAA5B,CAAwCxH,MAAxC,CAA+Ca,MAA/C,GAAwD,KAAKA,MAA7D;CACA2P,QAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BnM,WAA5B,CAAwCoE,cAAxC,CAAuDO,KAAvD,CAA6DtL,MAA7D,GAAsE,KAAKA,MAA3E;CACA;;CAED,UAAI2P,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BsD,iBAAhC,EACA;CACC;CACAzG,QAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BsD,iBAA5B,CAA8CjX,MAA9C,CAAqDa,MAArD,GAA8D,KAAKA,MAAnE;CACA2P,QAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BsD,iBAA5B,CAA8CrL,cAA9C,CAA6DO,KAA7D,CAAmEtL,MAAnE,GAA4E,KAAKA,MAAjF;CACA;;CAEDJ,MAAAA,EAAE,CAAC0L,KAAH,CAAS,KAAKiI,0BAAd,EAA0C,SAA1C,EAAqD,cAArD;CACA3T,MAAAA,EAAE,CAAC0L,KAAH,CAAS,KAAK0I,qBAAd,EAAqC,SAArC,EAAgD,MAAhD;CACApU,MAAAA,EAAE,CAACuR,KAAH,CAAS,KAAKqC,sBAAd;CACA;CA5SF;CAAA;CAAA,wCA8SqB6C,eA9SrB,EA+SC;CACC,UAAI,CAAC1G,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4BwD,YAA5B,EAAD,IAA+C,KAAK9C,sBAAL,CAA4BjT,KAA5B,CAAkCuB,MAAlC,IAA4C,CAA/F,EACA;CACClC,QAAAA,EAAE,CAAC0L,KAAH,CAAS,KAAKiI,0BAAd,EAA0C,SAA1C,EAAqD,MAArD;CACA3T,QAAAA,EAAE,CAAC0L,KAAH,CAAS,KAAK0I,qBAAd,EAAqC,SAArC,EAAgD,cAAhD;CACA,YAAIqC,eAAe,KAAK,IAAxB,EACC,KAAK7C,sBAAL,CAA4BjT,KAA5B,GAAoC,EAApC,CAJF;;CAOC,YAAIoP,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAA5B,IAAgD5G,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAA5B,IAAgD,IAApG,EACC3W,EAAE,CAAC4W,MAAH,CAAUnK,MAAV,EAAkB,SAAlB,EAA6BsD,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAAzD;CAED3W,QAAAA,EAAE,CAACgE,IAAH,CAAQyI,MAAR,EAAgB,SAAhB,EAA2BsD,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAA5B,GAA+C,UAAStP,CAAT,EAC1E;CACC,cAAIA,CAAC,CAAC8J,OAAF,KAAc,CAAlB,EACA;CACC9J,YAAAA,CAAC,CAACkM,cAAF;CACA,mBAAO,KAAP;CACA;CACD,SAPD;CASAnJ,QAAAA,UAAU,CAAC,YACX;CACCpK,UAAAA,EAAE,CAAC4W,MAAH,CAAUnK,MAAV,EAAkB,SAAlB,EAA6BsD,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAAzD;CACA5G,UAAAA,GAAG,CAAC/P,EAAJ,CAAOkT,oBAAP,CAA4ByD,gBAA5B,GAA+C,IAA/C;CACA,SAJS,EAIP,IAJO,CAAV;CAKA;CACD;CA1UF;CAAA;CAAA,+BA6UC;CACC,UACCE,UAAU,GAAG,KAAKzD,sBAAL,CAA4B0D,oBAA5B,CAAiD,OAAjD,CADd;CAAA,UAECC,KAAK,GAAG,EAFT;CAAA,UAEa9U,CAFb;;CAIA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4U,UAAU,CAAC3U,MAA3B,EAAmCD,CAAC,EAApC,EACA;CACC8U,QAAAA,KAAK,CAAC1U,IAAN,CAAWwU,UAAU,CAAC5U,CAAD,CAAV,CAActB,KAAzB;CACA;;CACD,aAAOoW,KAAP;CACA;CAvVF;CAAA;CAAA,wCA0VC;CACC,UACCF,UAAU,GAAG,KAAKzD,sBAAL,CAA4B0D,oBAA5B,CAAiD,OAAjD,CADd;CAAA,UAECxW,MAAM,GAAG,EAFV;CAAA,UAGC2B,CAHD;;CAKA,WAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4U,UAAU,CAAC3U,MAA3B,EAAmCD,CAAC,EAApC,EACA;CACC3B,QAAAA,MAAM,CAAC+B,IAAP,CAAYwU,UAAU,CAAC5U,CAAD,CAAV,CAActB,KAA1B;CACA;;CAED,aAAO,KAAKqS,qBAAL,CAA2B1S,MAA3B,CAAP;CACA;CAtWF;CAAA;CAAA,0CAwWuBA,MAxWvB,EAyWC;CACC,UAAI0W,cAAc,GAAG,EAArB;;CACA,UAAIpX,cAAI,CAACiF,OAAL,CAAavE,MAAb,CAAJ,EACA;CACCA,QAAAA,MAAM,CAACwE,OAAP,CAAe,UAASmS,IAAT,EACf;CACC,cAAIA,IAAI,CAAC1E,MAAL,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EACA;CACCyE,YAAAA,cAAc,CAACC,IAAD,CAAd,GAAuB,YAAvB;CACA,WAHD,MAIK,IAAIA,IAAI,CAAC1E,MAAL,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EACL;CACCyE,YAAAA,cAAc,CAACC,IAAD,CAAd,GAAuB,QAAvB;CACA,WAHI,MAIA,IAAIA,IAAI,CAAC1E,MAAL,CAAY,CAAZ,EAAe,CAAf,MAAsB,IAA1B,EACL;CACCyE,YAAAA,cAAc,CAACC,IAAD,CAAd,GAAuB,aAAvB;CACA,WAHI,MAIA,IAAIA,IAAI,CAAC1E,MAAL,CAAY,CAAZ,EAAe,CAAf,MAAsB,GAA1B,EACL;CACCyE,YAAAA,cAAc,CAACC,IAAD,CAAd,GAAuB,OAAvB;CACA;CACD,SAlBD;CAmBA;;CAED,aAAOD,cAAP;CACA;CAnYF;CAAA;CAAA,0CAqYuBD,KArYvB,EAsYC;CACC,UAAI/K,MAAM,GAAG,EAAb;CACA,UAAI,CAAC+K,KAAL,EACCA,KAAK,GAAG,KAAKG,iBAAL,EAAR;;CACD,WAAK,IAAIjV,CAAT,IAAc8U,KAAd,EACA;CACC,YAAIA,KAAK,CAACI,cAAN,CAAqBlV,CAArB,CAAJ,EACA;CACC+J,UAAAA,MAAM,CAAC3J,IAAP,CAAYJ,CAAZ;CACA;CACD;;CACD,aAAO+J,MAAP;CACA;CAlZF;CAAA;CAAA,6BAoZUrL,KApZV,EAqZC;CACC,UAAI,KAAKyS,sBAAT,EACA;CACC9P,QAAAA,aAAG,CAACyG,KAAJ,CAAU,KAAKqJ,sBAAf;CACA;;CAED,UAAIxT,cAAI,CAACiF,OAAL,CAAalE,KAAb,CAAJ,EACA;CACC,aAAKpB,MAAL,CAAYwT,aAAZ,GAA4B,KAAKC,qBAAL,CAA2BrS,KAA3B,CAA5B;CACA;;CACD,WAAK4T,IAAL;CACA;CAhaF;CAAA;CAAA;;;;;;;;;;;KCEa6C,aAAb;CAAA;;CAKC,yBAAY7X,MAAZ,EACA;CAAA;;CAAA;CACC;CADD,wFAJY,MAIZ;CAAA,4FAHgB,UAGhB;;CAEC,UAAKiD,iBAAL,CAAuB,oCAAvB;;CACA,UAAKE,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,kBAAkBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAAzC;CACA,UAAKyU,aAAL,GAAqBnW,kBAAI,CAACoW,mBAAL,EAArB;CACA,UAAKC,MAAL,GAAc,EAAd;CACA,UAAKnX,MAAL,GAAc,IAAd;CACA,UAAKoE,IAAL,GAAajF,MAAM,CAACiF,IAAP,IAAe,MAAKgT,SAAjC;CAEA,UAAKhY,GAAL,GAAW;CACVC,MAAAA,IAAI,EAAEF,MAAM,CAACE;CADH,KAAX;;CAGA,UAAKK,MAAL;;CAEA,UAAK2X,WAAL,CAAiBlY,MAAM,CAACwD,QAAP,IAAmB,KAApC;;CAdD;CAeC;;CArBF;CAAA;CAAA,6BAwBC;CAAA;;CACC,UAAI,KAAKyB,IAAL,KAAc,KAAKgT,SAAvB,EACA;CACC,aAAK,IAAIvV,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKoV,aAAL,CAAmBnV,MAAvC,EAA+CD,CAAC,EAAhD,EACA;CACC,eAAKsV,MAAL,CAAYlV,IAAZ,CACA;CACCqV,YAAAA,KAAK,EAAE,KAAKL,aAAL,CAAmBpV,CAAnB,CADR;CAEC0I,YAAAA,IAAI,EAAE,KAAKnL,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BH,aAAG,CAACxD,MAAJ,CAAW,IAAX,EAChC;CACCqI,cAAAA,KAAK,EAAE;CAACC,gBAAAA,SAAS,EAAE;CAAZ,eADR;CAECyF,cAAAA,KAAK,EAAE;CAAC,0CAA0B,KAAKwJ,aAAL,CAAmBpV,CAAnB;CAA3B,eAFR;CAGCyJ,cAAAA,KAAK,EAAE;CAACiM,gBAAAA,eAAe,EAAE,KAAKN,aAAL,CAAmBpV,CAAnB;CAAlB,eAHR;CAIC4O,cAAAA,IAAI,EAAE;CAJP,aADgC,CAA1B;CAFP,WADA;CAWA;;CAED,aAAKrR,GAAL,CAASoY,eAAT,GAA2B,KAAKpY,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BH,aAAG,CAACxD,MAAJ,CAAW,IAAX,EACpD;CACCqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WADR;CAECsD,UAAAA,KAAK,EACL;CACCiM,YAAAA,eAAe,EAAE,aADlB;CAECE,YAAAA,KAAK,EAAE;CAFR,WAHD;CAOChH,UAAAA,IAAI,EAAE;CAPP,SADoD,CAA1B,CAA3B;CAYA,aAAKrR,GAAL,CAASsY,eAAT,GAA2B,KAAKtY,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BH,aAAG,CAACxD,MAAJ,CAAW,IAAX,EAAiB;CACrEqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WAD8D;CAErEyI,UAAAA,IAAI,EAAE,mEAAmEjN,aAAG,CAACC,UAAJ,CAAe,UAAf,CAAnE,GAAgG,SAFjC;CAGrEyE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAE,iBAAI;CACnB,kBAAI,CAAC,MAAI,CAACwP,gBAAV,EACA;CACC,gBAAA,MAAI,CAACA,gBAAL,GAAwB,IAAI/X,EAAE,CAACgY,WAAP,CAAmB;CAC1CpO,kBAAAA,WAAW,EAAE,MAAI,CAACpK,GAAL,CAASsY,eADoB;CAE1CG,kBAAAA,eAAe,EAAE,MAAI,CAAC3W,QAAL,CAAc0C,IAAd,CAAmB,MAAnB,CAFyB;CAG1CkU,kBAAAA,YAAY,EAAE;CAAC9X,oBAAAA,MAAM,EAAE,MAAI,CAACA;CAAd;CAH4B,iBAAnB,CAAxB;CAKA;;CACD,cAAA,MAAI,CAAC2X,gBAAL,CAAsBI,IAAtB;CACA;CAVO;CAH6D,SAAjB,CAA1B,CAA3B;CAeApU,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASC,IAApB,EAA0B,OAA1B,EAAmC,KAAK2Y,gBAAL,CAAsBpU,IAAtB,CAA2B,IAA3B,CAAnC;CACA,OA7CD,MA8CK,IAAI,KAAKQ,IAAL,KAAc,KAAK6T,aAAvB,EACL;CACC,aAAK7Y,GAAL,CAAS8Y,SAAT,GAAqB,KAAK9Y,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,sBAArB;CACAI,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASC,IAApB,EAA0B,OAA1B,EAAmC,KAAK8Y,SAAL,CAAevU,IAAf,CAAoB,IAApB,CAAnC;CACA;CACD;CA5EF;CAAA;CAAA,qCA8EkBqD,CA9ElB,EA+EC;CACC,UAAI,KAAKtE,QAAT,EACA;CACC;CACA;;CACD,UAAIgG,MAAM,GAAG7H,kBAAI,CAACsX,cAAL,CAAoBnR,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAAlC,EAA8C,KAAKxJ,GAAL,CAASC,IAAvD,CAAb;;CAEA,UAAIsJ,MAAM,IAAIA,MAAM,CAACG,YAArB,EACA;CACC,YAAIvI,KAAK,GAAGoI,MAAM,CAACG,YAAP,CAAoB,wBAApB,CAAZ;;CACA,YAAGvI,KAAK,KAAK,IAAb,EACA;CACC,eAAKW,QAAL,CAAcX,KAAd;CACA;CACD;CACD;CA9FF;CAAA;CAAA,6BAgGU+W,KAhGV,EAiGC;CAAA,UADgB9S,WAChB,uEAD8B,IAC9B;;CACC,UAAI,KAAK7B,QAAT,EACA;CACC;CACA;;CAED,WAAK0V,WAAL,GAAmBf,KAAnB;;CAEA,UAAI,KAAKlT,IAAL,KAAc,KAAKgT,SAAvB,EACA;CACC,YAAI,KAAKhY,GAAL,CAASkZ,eAAb,EACA;CACC1Y,UAAAA,EAAE,CAAC4L,WAAH,CAAe,KAAKpM,GAAL,CAASkZ,eAAxB,EAAyC,QAAzC;CACA;;CAED,YAAI,CAAC1Y,EAAE,CAACqF,IAAH,CAAQC,QAAR,CAAiB,KAAKmT,WAAtB,EAAmC,KAAKpB,aAAxC,CAAD,IAA2D,KAAKoB,WAApE,EACA;CACC,eAAKjZ,GAAL,CAASoY,eAAT,CAAyBlM,KAAzB,CAA+BiM,eAA/B,GAAiD,KAAKc,WAAtD;CACA,eAAKjZ,GAAL,CAASoY,eAAT,CAAyBlM,KAAzB,CAA+BmM,KAA/B,GAAuC,EAAvC;CAEA,eAAKrY,GAAL,CAASkZ,eAAT,GAA2B,KAAKlZ,GAAL,CAASoY,eAApC;CACA5X,UAAAA,EAAE,CAACuD,QAAH,CAAY,KAAK/D,GAAL,CAASkZ,eAArB,EAAsC,QAAtC;CACA;;CAED,YAAIzW,CAAJ;;CACA,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKsV,MAAL,CAAYrV,MAA5B,EAAoCD,CAAC,EAArC,EACA;CACC,cAAI,KAAKsV,MAAL,CAAYtV,CAAZ,EAAeyV,KAAf,KAAyB,KAAKe,WAAlC,EACA;CACC,iBAAKjZ,GAAL,CAASkZ,eAAT,GAA2B,KAAKnB,MAAL,CAAYtV,CAAZ,EAAe0I,IAA1C;CACA3K,YAAAA,EAAE,CAACuD,QAAH,CAAY,KAAK/D,GAAL,CAASkZ,eAArB,EAAsC,QAAtC;CACA;CACA;CACD;CACD,OA1BD,MA2BK,IAAI,KAAKlU,IAAL,KAAc,KAAK6T,aAAvB,EACL;CACC,YAAI,KAAK7Y,GAAL,CAAS8Y,SAAb,EACA;CACC,eAAK9Y,GAAL,CAAS8Y,SAAT,CAAmB5M,KAAnB,CAAyBiM,eAAzB,GAA2C,KAAKc,WAAhD;CACA;;CACD,YAAI,KAAK1V,QAAT,EACA;CACC,eAAKvD,GAAL,CAASC,IAAT,CAAciM,KAAd,CAAoBiM,eAApB,GAAsC,KAAKc,WAA3C;CACA;CACD;;CAED,UAAI7T,WAAJ,EACA;CACC,aAAK6D,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,UAAAA,IAAI,EAAE;CAAChI,YAAAA,KAAK,EAAE,KAAK8X;CAAb;CAAP,SAAd,CAAtB;CACA;CACD;CApJF;CAAA;CAAA,+BAuJC;CACC,aAAO,KAAKA,WAAZ;CACA;CAzJF;CAAA;CAAA,gCA6JC;CAAA;;CACC,UAAI,KAAK1V,QAAT,EACA;CACC;CACA;;CAED,UAAI,KAAKkH,KAAL,IAAc,KAAKA,KAAL,CAAWlD,WAAzB,IAAwC,KAAKkD,KAAL,CAAWlD,WAAX,CAAuB4R,OAAvB,EAA5C,EACA;CACC,eAAO,KAAK1O,KAAL,CAAW9D,KAAX,EAAP;CACA;;CAED,UACClE,CADD;CAAA,UACIkD,SAAS,GAAG,EADhB;CAAA,UACoByT,IADpB;CAGC,WAAKvB,aAAL,CAAmBvS,OAAnB,CAA2B,UAAC4S,KAAD,EAAW;CACpCvS,QAAAA,SAAS,CAAC9C,IAAV,CAAe;CACboD,UAAAA,IAAI,EAAEiS,KADO;CAEbA,UAAAA,KAAK,EAAEA,KAFM;CAGbtP,UAAAA,SAAS,EAAE,oCAHE;CAIbrC,UAAAA,OAAO,EAAG,UAAC2R,KAAD,EAAW;CACpB,mBAAO,YAAM;CACZ,cAAA,MAAI,CAACpW,QAAL,CAAcoW,KAAd;;CACA,cAAA,MAAI,CAACzN,KAAL,CAAW9D,KAAX;CACA,aAHD;CAIA,WALQ,CAKNuR,KALM;CAJI,SAAf;CAYD,OAbD;CAeD,WAAKzN,KAAL,GAAa7D,sBAAW,CAACtG,MAAZ,CACZ,KAAK4C,EADO,EAEZ,KAAKlD,GAAL,CAAS8Y,SAFG,EAGZnT,SAHY,EAIZ;CACCiD,QAAAA,SAAS,EAAE,2BADZ;CAECyP,QAAAA,KAAK,EAAE,GAFR;CAGCxR,QAAAA,UAAU,EAAG,IAHd;CAICC,QAAAA,QAAQ,EAAG,IAJZ;CAKClG,QAAAA,MAAM,EAAE,KAAKA,MALd;CAMCmG,QAAAA,SAAS,EAAE,CANZ;CAOCC,QAAAA,UAAU,EAAE,EAPb;CAQCC,QAAAA,KAAK,EAAE,IARR;CASCC,QAAAA,SAAS,EAAE;CATZ,OAJY,CAAb;CAiBA,WAAKuD,KAAL,CAAWhD,IAAX,GA9CD;;CAiDC,WAAKhF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAKgI,KAAL,CAAW9E,SAAX,CAAqBjD,MAArC,EAA6CD,CAAC,EAA9C,EACA;CACC,YAAI,KAAKgI,KAAL,CAAW9E,SAAX,CAAqBlD,CAArB,EAAwB0H,MAAxB,CAA+BvE,IAAnC,EACA;CACCwT,UAAAA,IAAI,GAAG,KAAK3O,KAAL,CAAW9E,SAAX,CAAqBlD,CAArB,EAAwB0H,MAAxB,CAA+BvE,IAA/B,CAAoC0E,aAApC,CAAkD,uBAAlD,CAAP;;CACA,cAAIlK,cAAI,CAACkE,SAAL,CAAe8U,IAAf,CAAJ,EACA;CACCA,YAAAA,IAAI,CAAClN,KAAL,CAAWiM,eAAX,GAA6B,KAAK1N,KAAL,CAAW9E,SAAX,CAAqBlD,CAArB,EAAwByV,KAArD;CACA;CACD;CACD;;CAED,WAAKzN,KAAL,CAAWlD,WAAX,CAAuBN,KAAvB,CAA6BoS,OAA7B,CAAqCnN,KAArC,CAA2CoN,IAA3C,GAAkD,KAAlD;CACA;CA3NF;CAAA;CAAA,gCA6Na/V,QA7Nb,EA8NC;CACC,WAAKA,QAAL,GAAgBA,QAAhB;;CACA,UAAI,KAAKA,QAAT,EACA;CACCO,QAAAA,aAAG,CAACyG,KAAJ,CAAU,KAAKvK,GAAL,CAASC,IAAnB;CACA,aAAKD,GAAL,CAASC,IAAT,CAAc2I,SAAd,GAA0B,4BAA1B;CACA,aAAK5I,GAAL,CAASC,IAAT,CAAciM,KAAd,CAAoBiM,eAApB,GAAsC,KAAKc,WAA3C;CACA,OALD;CAUA;CA1OF;CAAA;CAAA,EAAmC5R,6BAAnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCDakS,eAAb;CAEC,2BAAYxZ,MAAZ,EACA;CAAA;CACC,SAAKmD,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,oBAAoBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAA3C;CACA,SAAKoW,WAAL,GAAmBzZ,MAAM,CAACyZ,WAA1B;CACA,SAAKC,gBAAL,GAAwB1Z,MAAM,CAAC0Z,gBAA/B;CACA,SAAK7D,cAAL,GAAsB7V,MAAM,CAAC6V,cAA7B;CACA,SAAK8D,iBAAL,GAAyB3Z,MAAM,CAAC2Z,iBAAhC;CACA,SAAKC,kBAAL,GAA0B5Z,MAAM,CAAC4Z,kBAAjC;CACA,SAAKC,iBAAL,GAAyB7Z,MAAM,CAAC6Z,iBAAhC;CAEA,SAAKC,mBAAL,GAA2B9Z,MAAM,CAAC8Z,mBAAlC;CACA,SAAKC,cAAL,GAAsBzX,QAAQ,CAACtC,MAAM,CAAC+Z,cAAR,CAA9B;CAEA,SAAKlZ,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,SAAKoE,IAAL,GAAYjF,MAAM,CAACiF,IAAnB,CAbD;;CAcC,SAAKhF,GAAL,GAAW;CACVkR,MAAAA,SAAS,EAAEnR,MAAM,CAACmR;CADR,KAAX;CAIA,SAAK5Q,MAAL;CACA,SAAKyZ,iBAAL;CACA;;CAvBF;CAAA;CAAA,6BA0BC;CACC,UAAI,KAAK/U,IAAL,KAAc,YAAlB,EACA;CACC,aAAKhF,GAAL,CAAS2V,MAAT,GAAkB,KAAK3V,GAAL,CAASkR,SAA3B;CACA,aAAKlR,GAAL,CAASga,eAAT,GAA2B,KAAKha,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BC,aAAG,CAACC,MAAhC,sBAA3B;CAEA,aAAKnE,GAAL,CAASia,eAAT,GAA2B,KAAKja,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BC,aAAG,CAACC,MAAhC,uBAA2FwO,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,2BAAf,IAA8C,GAA9C,GAAoD,KAAK6V,eAAL,EAAhE,CAA3F,EAA3B;CACA,OAND,MAQA;CACC,aAAKla,GAAL,CAAS2V,MAAT,GAAkB,KAAK3V,GAAL,CAASkR,SAAT,CAAmBjN,WAAnB,CAA+BH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CAClEqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE,0CAA0C,KAAK5D,IAAL,KAAc,SAAd,GAA0B,sBAA1B,GAAmD,EAA7F;CAAZ;CAD2D,SAAlB,CAA/B,CAAlB;CAIA,aAAKhF,GAAL,CAASma,UAAT,GAAsB,KAAKna,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BH,aAAG,CAACxD,MAAJ,CAAW,KAAX,EAAkB;CACnEqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WAD4D;CAEnEsD,UAAAA,KAAK,EAAE;CAACiM,YAAAA,eAAe,EAAG,KAAKiC,eAAL;CAAnB;CAF4D,SAAlB,CAA5B,CAAtB;;CAKA,YAAI,KAAKpV,IAAL,KAAc,MAAlB,EACA;CACC,eAAKhF,GAAL,CAASia,eAAT,GAA2B,KAAKja,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BH,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAAC2F,YAAAA,IAAI,EAAE,KAAKiU,eAAL;CAAP,WAAnB,CAA5B,CAA3B;CACA;CACD;CACD;CAlDF;CAAA;CAAA,wCAqDC;CACC3V,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS2V,MAApB,EAA4B,OAA5B,EAAqCnV,EAAE,CAACiP,QAAH,CAAY,KAAKsJ,SAAjB,EAA4B,IAA5B,CAArC;CACA;CAvDF;CAAA;CAAA,gCA0DC;CAAA;;CACC,UAAI,KAAKxV,QAAT,EACA;CACC,eAAO,KAAP;CACA;;CAED,UAAI,KAAK8W,WAAL,IAAoB,KAAKA,WAAL,CAAiB9S,WAArC,IAAoD,KAAK8S,WAAL,CAAiB9S,WAAjB,CAA6B4R,OAA7B,EAAxD,EACA;CACC,eAAO,KAAKkB,WAAL,CAAiB1T,KAAjB,EAAP;CACA;;CAED,UAAM2T,YAAY,GAAG,oFAArB;CACA,UAAM3U,SAAS,GAAG,EAAlB;CACA,UAAM4U,aAAa,GAAG,EAAtB;CACA,UAAMf,WAAW,GAAG,KAAKgB,cAAL,EAApB;CACA,UAAI/X,CAAJ;;CAEA,UAAIrC,cAAI,CAACiF,OAAL,CAAa,KAAKoU,gBAAlB,CAAJ,EACA;CACC,aAAKA,gBAAL,CAAsBnU,OAAtB,CAA8B,UAACmV,YAAD,EAAkB;CAC/C,cAAIC,YAAJ;;CACA,cAAID,YAAY,CAACE,aAAjB,EACA;CACCD,YAAAA,YAAY,GAAGlB,WAAW,CAACoB,MAAZ,CAAmB,MAAI,CAACC,oBAAxB,EAA8C,MAA9C,CAAf;CACA,WAHD,MAIK,IAAIJ,YAAY,CAACrU,IAAb,KAAsB,MAA1B,EACL;CACCsU,YAAAA,YAAY,GAAGlB,WAAW,CAACoB,MAAZ,CAAmB,UAACE,OAAD,EAAa;CAC9C,qBAAOvB,eAAe,CAACwB,cAAhB,CAA+BD,OAA/B,MAA4C,MAA5C,IAAsDvB,eAAe,CAACyB,eAAhB,CAAgCF,OAAhC,MAA6CL,YAAY,CAACQ,OAAvH;CACA,aAFc,CAAf;CAGA,WALI,MAMA,IAAIR,YAAY,CAACrU,IAAb,KAAsB,SAA1B,EACL;CACCsU,YAAAA,YAAY,GAAGlB,WAAW,CAACoB,MAAZ,CAAmB,UAACE,OAAD,EAAa;CAC9C,qBAAOvB,eAAe,CAACwB,cAAhB,CAA+BD,OAA/B,MAA4C,kBAA5C,IAAkEvB,eAAe,CAACwB,cAAhB,CAA+BD,OAA/B,MAA4CL,YAAY,CAACrU,IAAlI;CACA,aAFc,CAAf;CAGA,WALI,MAOL;CACCsU,YAAAA,YAAY,GAAGlB,WAAW,CAACoB,MAAZ,CAAmB,UAACE,OAAD,EAAa;CAC9C,qBAAOvB,eAAe,CAACwB,cAAhB,CAA+BD,OAA/B,MAA4CL,YAAY,CAACrU,IAAhE;CACA,aAFc,CAAf;CAGA;;CAEDsU,UAAAA,YAAY,GAAGA,YAAY,CAACE,MAAb,CAAoB,UAACE,OAAD,EAAa;CAC/C,gBAAM5X,EAAE,GAAGb,QAAQ,CAACyY,OAAO,CAAC5X,EAAR,IAAc4X,OAAO,CAAC/L,EAAvB,CAAnB;CACA,gBAAIwL,aAAa,CAACnS,QAAd,CAAuBlF,EAAvB,CAAJ,EACC,OAAO,KAAP;CACDqX,YAAAA,aAAa,CAAC1X,IAAd,CAAmBK,EAAnB;CACA,mBAAO,IAAP;CACA,WANc,CAAf;;CAQA,cAAIwX,YAAY,CAAChY,MAAb,GAAsB,CAA1B,EACA;CACCiD,YAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdwO,cAAAA,IAAI,EAAE,WAAWoJ,YAAY,CAACS,KAAxB,GAAgC,SADxB;CAEdtS,cAAAA,SAAS,EAAE0R;CAFG,aAAf;;CAKA,iBAAK,IAAI7X,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGiY,YAAY,CAAChY,MAAjC,EAAyCD,EAAC,EAA1C,EACA;CACCkD,cAAAA,SAAS,CAAC9C,IAAV,CAAe,MAAI,CAACkF,WAAL,CAAiB2S,YAAY,CAACjY,EAAD,CAA7B,CAAf;CACA;CACD;CACD,SA7CD;CA8CA,OAhDD,MAkDA;CACC,aAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG+W,WAAW,CAAC9W,MAA5B,EAAoCD,CAAC,EAArC,EACA;CACCkD,UAAAA,SAAS,CAAC9C,IAAV,CAAe,KAAKkF,WAAL,CAAiByR,WAAW,CAAC/W,CAAD,CAA5B,CAAf;CACA;CACD;;CAED,UAAIuE,UAAU,GAAG,CAAjB;;CACA,UAAI,KAAKhC,IAAL,KAAc,SAAlB,EACA;CACCgC,QAAAA,UAAU,GAAG,EAAb;CACA,OAHD,MAIK,IAAG,KAAKhC,IAAL,KAAc,YAAjB,EACL;CACCgC,QAAAA,UAAU,GAAG,CAAb;CACA;;CAED,WAAKqT,WAAL,GAAmBzT,sBAAW,CAACtG,MAAZ,CAClB,KAAK4C,EADa,EAElB,KAAKlD,GAAL,CAAS2V,MAFS,EAGlBhQ,SAHkB,EAIlB;CACCkB,QAAAA,UAAU,EAAG,IADd;CAECC,QAAAA,QAAQ,EAAG,IAFZ;CAGClG,QAAAA,MAAM,EAAE,KAAKA,MAHd;CAICmG,QAAAA,SAAS,EAAE,CAJZ;CAKCC,QAAAA,UAAU,EAAEA,UALb;CAMCC,QAAAA,KAAK,EAAE,KAAKjC,IAAL,KAAc;CANtB,OAJkB,CAAnB;CAcA,WAAKqV,WAAL,CAAiB9S,WAAjB,CAA6BsE,gBAA7B,CAA8CK,KAA9C,CAAoDiP,QAApD,GAA+D,MAA/D;CACA,WAAKd,WAAL,CAAiB9S,WAAjB,CAA6BsE,gBAA7B,CAA8CK,KAA9C,CAAoDkP,SAApD,GAAgE,OAAhE;;CAEA,UAAI,KAAKpW,IAAL,KAAc,MAAlB,EACA;CACC,aAAKqV,WAAL,CAAiB9S,WAAjB,CAA6B8T,QAA7B,CAAsC,KAAKrb,GAAL,CAAS2V,MAAT,CAAgB2F,WAAhB,GAA8B,CAApE;CACA,aAAKjB,WAAL,CAAiB9S,WAAjB,CAA6BsE,gBAA7B,CAA8CK,KAA9C,CAAoDqP,SAApD,GAAgE,QAAhE;CACA;;CAED,WAAKlB,WAAL,CAAiB5S,IAAjB,GA3GD;;CA8GC,WAAKhF,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAK4X,WAAL,CAAiB1U,SAAjB,CAA2BjD,MAA3C,EAAmDD,CAAC,EAApD,EACA;CACC,YAAI,KAAK4X,WAAL,CAAiB1U,SAAjB,CAA2BlD,CAA3B,EAA8B0H,MAA9B,CAAqCvE,IAAzC,EACA;CACC,cAAIwT,IAAI,GAAG,KAAKiB,WAAL,CAAiB1U,SAAjB,CAA2BlD,CAA3B,EAA8B0H,MAA9B,CAAqCvE,IAArC,CAA0C0E,aAA1C,CAAwD,uBAAxD,CAAX;;CACA,cAAI8O,IAAJ,EACA;CACCA,YAAAA,IAAI,CAAClN,KAAL,CAAWiM,eAAX,GAA6B,KAAKkC,WAAL,CAAiB1U,SAAjB,CAA2BlD,CAA3B,EAA8ByV,KAA3D;CACA;CACD;CACD;;CAED1X,MAAAA,EAAE,CAACuD,QAAH,CAAY,KAAK/D,GAAL,CAAS2V,MAArB,EAA6B,QAA7B;;CAEA,UAAIvV,cAAI,CAACC,UAAL,CAAgB,KAAKqZ,iBAArB,CAAJ,EACA;CACC,aAAKA,iBAAL,CAAuB,IAAvB;CACA;;CAEDlZ,MAAAA,EAAE,CAAC4M,cAAH,CAAkB,KAAKiN,WAAL,CAAiB9S,WAAnC,EAAgD,cAAhD,EAAgE/G,EAAE,CAACiP,QAAH,CAAY,YAC5E;CACC,YAAIrP,cAAI,CAACC,UAAL,CAAgB,KAAKqZ,iBAArB,CAAJ,EACA;CACC,eAAKC,kBAAL;CACA;;CACDnZ,QAAAA,EAAE,CAAC4L,WAAH,CAAe,KAAKpM,GAAL,CAAS2V,MAAxB,EAAgC,QAAhC;CACAnV,QAAAA,EAAE,CAACgb,SAAH,CAAa1P,OAAb,CAAqB,KAAK5I,EAA1B;CACA,aAAKmX,WAAL,GAAmB,IAAnB;CACA,OAT+D,EAS7D,IAT6D,CAAhE;CAUA;CArMF;CAAA;CAAA,sCAwMC;CACC,aAAO,CAAC,KAAKT,iBAAL,MAA4B,EAA7B,EAAiC1B,KAAjC,IAA0C,KAAjD;CACA;CA1MF;CAAA;CAAA,sCA6MC;CACC,aAAO,CAAC,KAAK0B,iBAAL,MAA4B,EAA7B,EAAiCtL,IAAjC,IAAyC,EAAhD;CACA;CA/MF;CAAA;CAAA,qCAkNC;CACC,aAAO,KAAKkL,WAAL,CAAiBoB,MAAjB,CAAwB,UAACE,OAAD,EAAa;CAC3C,eAAQA,OAAO,CAACW,IAAR,IAAgBX,OAAO,CAACW,IAAR,CAAaC,IAA9B,IAAwCtb,cAAI,CAACC,UAAL,CAAgBya,OAAO,CAACa,KAAxB,KAAkCb,OAAO,CAACa,KAAR,CAAc,MAAd,CAAjF;CACA,OAFM,CAAP;CAGA;CAtNF;CAAA;CAAA,2CAwNwBb,OAxNxB,EAyNC;CAAA;;CACC,UAAI,CAAC1a,cAAI,CAACyD,aAAL,CAAmB,KAAK7D,GAAL,CAASga,eAA5B,CAAL,EACA;CACC;CACA;;CAED,UAAIc,OAAO,KAAKpS,SAAhB,EACA;CACCoS,QAAAA,OAAO,GAAG,KAAKtB,WAAL,CAAiBoC,IAAjB,CAAsB,UAACd,OAAD,EAAa;CAC5C,iBAAOzY,QAAQ,CAACyY,OAAO,CAAC5X,EAAT,CAAR,KAAyBb,QAAQ,CAAC,MAAI,CAACuX,iBAAL,GAAyB1W,EAA1B,CAAxC;CACA,SAFS,CAAV;CAGA;;CAED,UAAI4X,OAAO,IAAIA,OAAO,CAAC1U,IAAvB,EACA;CACC,YAAMyV,QAAQ,GAAGtC,eAAe,CAACuC,eAAhB,CAAgChB,OAAhC,CAAjB;CACA,YAAIiB,SAAJ;;CACA,YAAIF,QAAJ,EACA;CACCE,UAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,uBAA2E0X,QAA3E,CAAT;CACA,SAHD,MAIK,IAAGf,OAAO,CAAC1U,IAAR,KAAiB,OAApB,EACL;CACC2V,UAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,sBAAT;CACA,SAHI,MAIA,IAAG2W,OAAO,CAAC1U,IAAR,KAAiB,MAApB,EACL;CACC2V,UAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,sBAAT;CACA,SAHI,MAKL;CACC4X,UAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,sBAAT;CACA;;CAEDL,QAAAA,aAAG,CAACyG,KAAJ,CAAU,KAAKvK,GAAL,CAASga,eAAnB;CACA,aAAKha,GAAL,CAASga,eAAT,CAAyB/V,WAAzB,CAAqC8X,SAArC;CACA;CACD;CA9PF;CAAA;CAAA,+BAiQC;CACC,aAAO,KAAK1B,WAAZ;CACA;CAnQF;CAAA;CAAA,gCAqQa2B,WArQb,EAsQC;CACC,UAAItW,KAAK,GAAG,IAAZ;;CACA,aAAO;CACN2L,QAAAA,IAAI,EAAE7Q,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyBgN,WAAW,CAAC1N,IAAZ,IAAoB0N,WAAW,CAAC/M,IAAzD,CADA;CAENiJ,QAAAA,KAAK,EAAE8D,WAAW,CAAC9D,KAAZ,IAAqB8D,WAAW,CAACC,KAFlC;CAGNrT,QAAAA,SAAS,EAAE,0CAA0C,KAAK5D,IAAL,KAAc,MAAd,GAAuB,yBAAvB,GAAmD,EAA7F,CAHL;CAINuB,QAAAA,OAAO,EAAG,UAAUuU,OAAV,EACV;CACC,iBAAO,YAAM;CACZ,gBAAI1a,cAAI,CAACkE,SAAL,CAAeoB,KAAK,CAAC1F,GAAN,CAAUma,UAAzB,CAAJ,EACA;CACCzU,cAAAA,KAAK,CAAC1F,GAAN,CAAUma,UAAV,CAAqBjO,KAArB,CAA2BiM,eAA3B,GAA6C2C,OAAO,CAAC5C,KAAR,IAAiB8D,WAAW,CAACC,KAA1E;CACA;;CAEDvW,YAAAA,KAAK,CAACwW,sBAAN,CAA6BpB,OAA7B;;CACA,gBAAI1a,cAAI,CAACC,UAAL,CAAgBqF,KAAK,CAACkQ,cAAtB,CAAJ,EACA;CACC,kBAAI,CAACkF,OAAO,CAAC5C,KAAT,IAAkB8D,WAAW,CAACC,KAAlC,EACA;CACCnB,gBAAAA,OAAO,CAAC5C,KAAR,GAAgB8D,WAAW,CAACC,KAA5B;CACA;;CACD,kBAAI,CAACnB,OAAO,CAAC5X,EAAT,IAAe8Y,WAAW,CAACjN,EAA/B,EACA;CACC+L,gBAAAA,OAAO,CAAC5X,EAAR,GAAa8Y,WAAW,CAACjN,EAAzB;CACA;;CACDrJ,cAAAA,KAAK,CAACkQ,cAAN,CAAqBkF,OAArB;CACA;;CACDpV,YAAAA,KAAK,CAAC2U,WAAN,CAAkB1T,KAAlB;;CACAjB,YAAAA,KAAK,CAACyW,WAAN;CACA,WArBD;CAsBA,SAxBQ,CAwBNH,WAxBM;CAJH,OAAP;CA8BA;CAtSF;CAAA;CAAA,yCAwSsBlB,OAxStB,EAySC;CACC,aAAOvB,eAAe,CAACwB,cAAhB,CAA+BD,OAA/B,MAA4C,KAAKjB,mBAAjD,IAAwEN,eAAe,CAACyB,eAAhB,CAAgCF,OAAhC,MAA6C,KAAKhB,cAAjI;CACA;CA3SF;CAAA;CAAA,kCA6TC;CACC,UAAI1Z,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASma,UAAxB,CAAJ,EACA;CACC,aAAKna,GAAL,CAASma,UAAT,CAAoBjO,KAApB,CAA0BiM,eAA1B,GAA4C,KAAKiC,eAAL,EAA5C;CACA;;CAED,UAAI,KAAKpV,IAAL,KAAc,MAAlB,EACA;CACC,aAAKhF,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BH,aAAG,CAACsY,MAAJ,CAAW,KAAKpc,GAAL,CAASia,eAApB,EAAqC;CAChEhU,UAAAA,IAAI,EAAE,KAAKiU,eAAL,EAD0D;CAEhEvR,UAAAA,KAAK,EAAE;CACNuS,YAAAA,KAAK,EAAE,KAAKhB,eAAL;CADD;CAFyD,SAArC,CAA5B;CAMA,OARD,MASK,IAAI,KAAKlV,IAAL,KAAc,YAAlB,EACL;CACC,aAAKkX,sBAAL;CACA,aAAKlc,GAAL,CAAS2V,MAAT,CAAgB1R,WAAhB,CAA4BH,aAAG,CAACsY,MAAJ,CAAW,KAAKpc,GAAL,CAASia,eAApB,EAAqC;CAChEtR,UAAAA,KAAK,EAAE;CACNuS,YAAAA,KAAK,EAAE9W,aAAG,CAACC,UAAJ,CAAe,2BAAf,IAA8C,GAA9C,GAAoD,KAAK6V,eAAL;CADrD,WADyD;CAIhEjU,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,2BAAf,IAA8C,GAA9C,GAAoD,KAAK6V,eAAL;CAJM,SAArC,CAA5B;CAMA;CACD;CAtVF;CAAA;CAAA,gCAwVa3W,QAxVb,EAyVC;CACC,WAAKA,QAAL,GAAgBA,QAAhB;;CACA,UAAI,KAAKA,QAAT,EACA;CACCO,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,oCAAjC;CACA,OAHD,MAKA;CACCpN,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASkR,SAAzB,EAAoC,oCAApC;CACA;CACD;CAnWF;CAAA;CAAA,mCA6SuB4J,OA7SvB,EA8SC;CACC,aAAOA,OAAO,CAAC1U,IAAR,IAAgB0U,OAAO,CAACuB,QAA/B;CACA;CAhTF;CAAA;CAAA,sCAmTC;CAAA,UADuBvB,OACvB,uEADiC,EACjC;CACC,aAAOA,OAAO,CAAC3R,IAAR,GAAe2R,OAAO,CAAC3R,IAAR,CAAamT,KAA5B,GAAqCxB,OAAO,CAACwB,KAAR,IAAiB,EAA7D;CACA;CArTF;CAAA;CAAA,oCAuTwBxB,OAvTxB,EAwTC;CACC,aAAOzY,QAAQ,CAACyY,OAAO,CAACyB,QAAR,IAAoBzB,OAAO,CAAC3R,IAAR,CAAaoT,QAAlC,CAAf;CACA;CA1TF;CAAA;CAAA;;KCFaC,cAAb;CAEC,0BAAYzc,MAAZ,EACA;CAAA;CACC,QAAI0c,YAAY,GAAI1c,MAAM,CAAC2c,SAAP,CAAiBC,IAAjB,CAAsB/F,QAA1C;CAEA,SAAKgG,OAAL,GAAe7c,MAAM,CAAC6c,OAAtB;CACA,SAAK5c,GAAL,GAAW;CACVyc,MAAAA,YAAY,EAAEA,YADJ;CAEVxc,MAAAA,IAAI,EAAEF,MAAM,CAACE,IAFH;CAGVyc,MAAAA,SAAS,EAAE3c,MAAM,CAAC2c,SAHR;CAIVG,MAAAA,QAAQ,EAAEJ,YAAY,CAAC,uBAAD,CAJZ;CAKVK,MAAAA,WAAW,EAAE;CACZC,QAAAA,KAAK,EAAEN,YAAY,CAAC,cAAD,CAAZ,CAA6B,CAA7B,CADK;CAEZO,QAAAA,KAAK,EAAEP,YAAY,CAAC,cAAD,CAAZ,CAA6B,CAA7B,CAFK;CAGZQ,QAAAA,KAAK,EAAER,YAAY,CAAC,cAAD,CAAZ,CAA6B,CAA7B;CAHK,OALH;CAUVO,MAAAA,KAAK,EAAEP,YAAY,CAAC,oBAAD,CAVT;CAWVQ,MAAAA,KAAK,EAAER,YAAY,CAAC,oBAAD;CAXT,KAAX;CAcA,SAAKnc,MAAL;CACA;;CAtBF;CAAA;CAAA,6BAyBC;CACCE,MAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKxE,GAAL,CAAS0c,SAAjB,EAA4B,QAA5B,EAAsClc,EAAE,CAACiP,QAAH,CAAY,YAClD;CACC,aAAKyN,UAAL,CAAgB,KAAKld,GAAL,CAAS0c,SAAT,CAAmBvb,KAAnC;CACA,OAHqC,EAGnC,IAHmC,CAAtC;CAKAX,MAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKxE,GAAL,CAASid,KAAjB,EAAwB,OAAxB,EAAiCzc,EAAE,CAAC2c,KAAH,CAAS,YAC1C;CACC3c,QAAAA,EAAE,CAACuK,QAAH,CAAY;CAACI,UAAAA,IAAI,EAAE,KAAKnL,GAAL,CAASid,KAAhB;CAAuB1R,UAAAA,KAAK,EAAE,KAAKvL,GAAL,CAASid,KAAvC;CAA8CzR,UAAAA,KAAK,EAAE;CAArD,SAAZ;CACAhL,QAAAA,EAAE,CAACuR,KAAH,CAAS,KAAK/R,GAAL,CAASid,KAAlB;CACA,aAAKjd,GAAL,CAAS8c,WAAT,CAAqBG,KAArB,CAA2BG,OAA3B,GAAqC,IAArC;CACA,OALgC,EAK9B,IAL8B,CAAjC;CAOA5c,MAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKxE,GAAL,CAASgd,KAAjB,EAAwB,OAAxB,EAAiCxc,EAAE,CAAC2c,KAAH,CAAS,YAC1C;CACC,aAAKnd,GAAL,CAAS8c,WAAT,CAAqBE,KAArB,CAA2BI,OAA3B,GAAqC,IAArC;CACA,OAHgC,EAG9B,IAH8B,CAAjC;CAIA;CA1CF;CAAA;CAAA,+BA4CYhX,IA5CZ,EA6CC;CACC,WAAKpG,GAAL,CAAS0c,SAAT,CAAmBvb,KAAnB,GAA2BiF,IAAI,GAAGA,IAAI,CAACiX,WAAL,EAAH,GAAwB,MAAvD;CACA,UAAIX,SAAS,GAAG,KAAK1c,GAAL,CAAS0c,SAAT,CAAmBvb,KAAnB,CAAyB2L,WAAzB,EAAhB;CACA,WAAK9M,GAAL,CAASC,IAAT,CAAc2I,SAAd,GAA0B,yBAAyB8T,SAAnD;;CAEA,UAAIA,SAAS,KAAK,QAAd,IAA0Blc,EAAE,CAAC4F,IAAH,CAAQ/F,UAAR,CAAmB,KAAKuc,OAAxB,CAA9B,EACA;CACC,YAAIU,QAAQ,GAAG,KAAKV,OAAL,EAAf;;CACA,YAAIpc,EAAE,CAAC4F,IAAH,CAAQ/E,MAAR,CAAeic,QAAf,CAAJ,EACA;CACC,cAAIC,GAAG,GAAG7b,kBAAI,CAAC8b,eAAL,CAAqBF,QAAQ,CAACG,MAAT,EAArB,CAAV;CACA,eAAKzd,GAAL,CAASyc,YAAT,CAAsB,sBAAtB,EAA8CnX,OAA9C,CAAsD,UAASpF,KAAT,EACtD;CACCA,YAAAA,KAAK,CAACkd,OAAN,GAAgBld,KAAK,CAACkd,OAAN,IAAiBld,KAAK,CAACiB,KAAN,KAAgBoc,GAAjD;CACA,WAHD,EAGG,IAHH;CAIA;CACD;CACD;CA9DF;CAAA;CAAA,+BAiEC;CAAA,UADSG,KACT,uEADiB,EACjB;CACC,WAAKR,UAAL,CAAgBQ,KAAK,CAACC,IAAtB;CACA,WAAK3d,GAAL,CAAS6c,QAAT,CAAkB1b,KAAlB,GAA0Buc,KAAK,CAACE,QAAN,IAAkB,CAA5C;;CACA,UAAIF,KAAK,CAACG,KAAV,EACA;CACC,aAAK7d,GAAL,CAAS8c,WAAT,CAAqBE,KAArB,CAA2BI,OAA3B,GAAqC,SAArC;CACA,aAAKpd,GAAL,CAASgd,KAAT,CAAe7b,KAAf,GAAuBuc,KAAK,CAACG,KAA7B;CACA,OAJD,MAKK,IAAGH,KAAK,CAAC,QAAD,CAAR,EACL;CACC,aAAK1d,GAAL,CAAS8c,WAAT,CAAqBG,KAArB,CAA2BG,OAA3B,GAAqC,SAArC;CACA,aAAKpd,GAAL,CAASid,KAAT,CAAe9b,KAAf,GAAuBuc,KAAK,CAAC,QAAD,CAA5B;CACA,OAJI,MAML;CACC,aAAK1d,GAAL,CAAS8c,WAAT,CAAqBC,KAArB,CAA2BK,OAA3B,GAAqC,SAArC;CACA;;CAED,UAAI5c,EAAE,CAAC4F,IAAH,CAAQ+B,aAAR,CAAsBuV,KAAK,CAACI,KAA5B,CAAJ,EACA;CACC,aAAK9d,GAAL,CAASyc,YAAT,CAAsB,sBAAtB,EAA8CnX,OAA9C,CAAsD,UAASpF,KAAT,EACtD;CACCA,UAAAA,KAAK,CAACkd,OAAN,GAAgBM,KAAK,CAACI,KAAN,CAAYnG,cAAZ,CAA2BzX,KAAK,CAACiB,KAAjC,CAAhB;CACA,SAHD,EAGG,IAHH;CAIA;CACD;CA1FF;CAAA;CAAA,8BA6FC;CACC,aAAO,KAAKnB,GAAL,CAAS0c,SAAT,CAAmBvb,KAAnB,CAAyB2L,WAAzB,EAAP;CACA;CA/FF;CAAA;CAAA;;KCFanM,WAAb;CAEC,uBAAYZ,MAAZ,EACA;CAAA;CACC,SAAKmD,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,qBAAqBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,OAA3B,CAA5C;CACA,SAAKtC,MAAL,GAAcf,MAAM,CAACe,MAAP,IAAiB,KAA/B;CACA,SAAKZ,KAAL,GAAaH,MAAM,CAACG,KAApB;CAEA,SAAK6d,YAAL,GAAoBhe,MAAM,CAACge,YAAP,IAAuB,EAA3C;CACA,SAAKC,SAAL,GAAiBje,MAAM,CAACie,SAAP,IAAoB,EAArC;CACA,SAAKpV,SAAL,GAAiB7I,MAAM,CAAC6I,SAAP,IAAoB,EAArC;CAEA,SAAKzI,gBAAL,GAAwBJ,MAAM,CAACI,gBAAP,IAA2B,IAAnD;CACA,SAAKS,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,SAAK2M,QAAL,GAAgBxN,MAAM,CAACwN,QAAvB;CACA,SAAKvM,QAAL,GAAgBjB,MAAM,CAACiB,QAAP,IAAmB,CAAnC;CAEA,SAAKc,QAAL,CAAc;CACbX,MAAAA,KAAK,EAAEpB,MAAM,CAACoB,KADD;CAEbqO,MAAAA,UAAU,EAAEzP,MAAM,CAACyP;CAFN,KAAd;CAKA,SAAKyO,MAAL,GAAc,KAAd;CAEA,SAAKra,iBAAL;CACA;;CAzBF;CAAA;CAAA,wCA4BC;CACC,UAAI,KAAKzD,gBAAT,EACA;CACCK,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,QAApB,EAA8B,KAAKC,gBAAnC;CACAK,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,OAApB,EAA6B,KAAKC,gBAAlC;CACA;;CAED,UAAI,KAAKW,MAAT,EACA;CACCN,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,OAApB,EAA6BM,EAAE,CAAC2c,KAAH,CAAS,KAAKe,OAAd,EAAuB,IAAvB,CAA7B;CACA1d,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,OAApB,EAA6BM,EAAE,CAAC2c,KAAH,CAAS,KAAKgB,OAAd,EAAuB,IAAvB,CAA7B;CACA3d,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,MAApB,EAA4BM,EAAE,CAAC2c,KAAH,CAAS,KAAKiB,MAAd,EAAsB,IAAtB,CAA5B;CACA5d,QAAAA,EAAE,CAACgE,IAAH,CAAQ,KAAKtE,KAAb,EAAoB,OAApB,EAA6BM,EAAE,CAAC2c,KAAH,CAAS,KAAKkB,OAAd,EAAuB,IAAvB,CAA7B;CACA;CACD;CA1CF;CAAA;CAAA,6BA4CUte,MA5CV,EA6CC;CACC,WAAKue,YAAL,GAAoB;CAACnd,QAAAA,KAAK,EAAEpB,MAAM,CAACoB;CAAf,OAApB;CACA,WAAKod,iBAAL,GAAyBxe,MAAM,CAACyP,UAAhC;;CACA,UAAI,KAAK+O,iBAAL,KAA2B7V,SAA3B,IAAwC,KAAK5H,MAAL,CAAY,KAAKyd,iBAAjB,CAA5C,EACA;CACC,aAAKre,KAAL,CAAWiB,KAAX,GAAmB,KAAKL,MAAL,CAAY,KAAKyd,iBAAjB,EAAoCzb,KAAvD;CACA;CACD;CApDF;CAAA;CAAA,oCAuDC;CACC,aAAO,KAAK5C,KAAL,CAAWiB,KAAlB;CACA;CAzDF;CAAA;CAAA,gCA4DC;CACC,UAAI,KAAKqd,KAAL,IAAc,KAAKjR,QAAvB,EACC;;CAED,UACC/K,GAAG,GAAG,CADP;CAAA,UAECuU,CAAC,GAAG,CAFL;CAAA,UAGCpR,SAAS,GAAG,EAHb;CAAA,UAIClD,CAJD;CAAA,UAIIiD,KAAK,GAAG,IAJZ;;CAMA,WAAKjD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,KAAK3B,MAAL,CAAY4B,MAA5B,EAAoCD,CAAC,EAArC,EACA;CACC,YAAI,KAAK3B,MAAL,CAAY2B,CAAZ,EAAe0M,SAAnB,EACA;CACCxJ,UAAAA,SAAS,CAAC9C,IAAV,CAAe,KAAK/B,MAAL,CAAY2B,CAAZ,CAAf;CACA,SAHD,MAKA;CACC,cAAI,KAAK6b,YAAL,IAAqB,KAAKxd,MAAL,CAAY2B,CAAZ,CAArB,IACA,KAAK3B,MAAL,CAAY2B,CAAZ,EAAetB,KAAf,KAAyB,KAAKmd,YAAL,CAAkBnd,KAD/C,EAEA;CACCqB,YAAAA,GAAG,GAAGuU,CAAN;CACA;;CAEDpR,UAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdK,YAAAA,EAAE,EAAE,KAAKpC,MAAL,CAAY2B,CAAZ,EAAetB,KADL;CAEd8E,YAAAA,IAAI,EAAE,KAAKnF,MAAL,CAAY2B,CAAZ,EAAeK,KAFP;CAGdyD,YAAAA,OAAO,EAAE,KAAKzF,MAAL,CAAY2B,CAAZ,EAAe2M,QAAf,IAA4B,UAAUjO,KAAV,EAAiB2B,KAAjB,EACrC;CACC,qBAAO,YACP;CACC4C,gBAAAA,KAAK,CAACxF,KAAN,CAAYiB,KAAZ,GAAoB2B,KAApB;;CACA4C,gBAAAA,KAAK,CAAC+Y,SAAN,CAAgB9X,KAAhB;;CACAjB,gBAAAA,KAAK,CAACgZ,QAAN;CACA,eALD;CAMA,aARmC,CAQjC,KAAK5d,MAAL,CAAY2B,CAAZ,EAAetB,KARkB,EAQX,KAAKL,MAAL,CAAY2B,CAAZ,EAAeyM,QAAf,IAA2B,KAAKpO,MAAL,CAAY2B,CAAZ,EAAeK,KAR/B;CAHtB,WAAf;CAaAiU,UAAAA,CAAC;CACD;CACD;;CAED,WAAK0H,SAAL,GAAiBje,EAAE,CAACgb,SAAH,CAAalb,MAAb,CAChB,KAAK4C,EADW,EAEhB,KAAKhD,KAFW,EAGhByF,SAHgB,EAIhB;CACCkB,QAAAA,UAAU,EAAG,IADd;CAECC,QAAAA,QAAQ,EAAG,IAFZ;CAGClG,QAAAA,MAAM,EAAE,KAAKA,MAHd;CAICmG,QAAAA,SAAS,EAAE,CAJZ;CAKCC,QAAAA,UAAU,EAAE,CAAC;CALd,OAJgB,CAAjB;CAaA,WAAKyX,SAAL,CAAelX,WAAf,CAA2B8T,QAA3B,CAAoCrZ,IAAI,CAAC2c,GAAL,CAAS,KAAKze,KAAL,CAAWob,WAAX,GAAyB,CAAlC,EAAqC,KAAKta,QAA1C,CAApC;CAEA,UAAI4d,aAAa,GAAG,KAAKH,SAAL,CAAetU,MAAf,CAAsByU,aAA1C;CACApe,MAAAA,EAAE,CAACuD,QAAH,CAAY,KAAK0a,SAAL,CAAetU,MAAf,CAAsByU,aAAlC,EAAiD,uBAAjD;CACA,WAAKH,SAAL,CAAehX,IAAf;CAEA,UAAI1B,QAAQ,GAAG,KAAK0Y,SAAL,CAAe9Y,SAAf,CAAyBnD,GAAzB,CAAf;;CAEA,UAAIuD,QAAQ,IAAIA,QAAQ,CAACoE,MAAzB,EACA;CACCyU,QAAAA,aAAa,CAAC/T,SAAd,GAA0B9E,QAAQ,CAACoE,MAAT,CAAgBvE,IAAhB,CAAqBmB,SAArB,GAAiChB,QAAQ,CAACoE,MAAT,CAAgBvE,IAAhB,CAAqBiZ,YAAhF;CACA;;CAEDre,MAAAA,EAAE,CAAC4M,cAAH,CAAkB,KAAKqR,SAAL,CAAelX,WAAjC,EAA8C,cAA9C,EAA8D,YAC9D;CACC/G,QAAAA,EAAE,CAACgb,SAAH,CAAa1P,OAAb,CAAqB,KAAK5I,EAA1B;CACA,aAAKsb,KAAL,GAAa,KAAb;CACA,aAAKC,SAAL,GAAiB,IAAjB;CACA,OAL6D,CAK5Dja,IAL4D,CAKvD,IALuD,CAA9D;CAOA,WAAKtE,KAAL,CAAWyV,MAAX;CAEA,WAAK6I,KAAL,GAAa,IAAb;CACA;CAzIF;CAAA;CAAA,iCA4IC;CACChe,MAAAA,EAAE,CAACgb,SAAH,CAAa1P,OAAb,CAAqB,KAAK5I,EAA1B;CACA,WAAKub,SAAL,GAAiB,IAAjB;CACA,WAAKD,KAAL,GAAa,KAAb;CACA;CAhJF;CAAA;CAAA,8BAmJC;CACC5T,MAAAA,UAAU,CAAC,YAAU;CACpB,YAAI,CAAC,KAAK4T,KAAV,EACA;CACC,eAAK/Z,SAAL;CACA;CACD,OALU,CAKTD,IALS,CAKJ,IALI,CAAD,EAKI,GALJ,CAAV;CAMA;CA1JF;CAAA;CAAA,8BA6JC;CACC,UAAI,KAAKga,KAAT,EACA;CACC,aAAKM,UAAL;CACA,OAHD,MAKA;CACC,aAAKra,SAAL;CACA;CACD;CAtKF;CAAA;CAAA,6BAyKC;CACCmG,MAAAA,UAAU,CAACpK,EAAE,CAACiP,QAAH,CAAY,KAAKqP,UAAjB,EAA6B,IAA7B,CAAD,EAAqC,GAArC,CAAV;CACA;CA3KF;CAAA;CAAA,8BA8KC;CACClU,MAAAA,UAAU,CAACpK,EAAE,CAACiP,QAAH,CAAY,KAAKqP,UAAjB,EAA6B,IAA7B,CAAD,EAAqC,EAArC,CAAV;CACA;CAhLF;CAAA;CAAA,+BAmLC;CACC,UAAIC,GAAG,GAAG,KAAK7e,KAAL,CAAWiB,KAArB;CACAX,MAAAA,EAAE,CAACwM,aAAH,CAAiB,IAAjB,EAAuB,sBAAvB,EAA+C,CAAC,IAAD,EAAO+R,GAAP,CAA/C;;CACA,UAAIve,EAAE,CAAC4F,IAAH,CAAQ/F,UAAR,CAAmB,KAAKF,gBAAxB,CAAJ,EACA;CACC,aAAKA,gBAAL,CAAsB;CAACgB,UAAAA,KAAK,EAAE4d;CAAR,SAAtB;CACA;CACD;CA1LF;CAAA;CAAA,8BA6LC;CACC,UAAI,KAAK5e,gBAAT,EACA;CACCK,QAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,QAAtB,EAAgC,KAAKC,gBAArC;CACAK,QAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,OAAtB,EAA+B,KAAKC,gBAApC;CACA;;CAEDK,MAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,OAAtB,EAA+BM,EAAE,CAAC2c,KAAH,CAAS,KAAKe,OAAd,EAAuB,IAAvB,CAA/B;CACA1d,MAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,OAAtB,EAA+BM,EAAE,CAAC2c,KAAH,CAAS,KAAKgB,OAAd,EAAuB,IAAvB,CAA/B;CACA3d,MAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,MAAtB,EAA8BM,EAAE,CAAC2c,KAAH,CAAS,KAAKiB,MAAd,EAAsB,IAAtB,CAA9B;CACA5d,MAAAA,EAAE,CAAC4W,MAAH,CAAU,KAAKlX,KAAf,EAAsB,OAAtB,EAA+BM,EAAE,CAAC2c,KAAH,CAAS,KAAKkB,OAAd,EAAuB,IAAvB,CAA/B;;CAEA,UAAI,KAAKI,SAAT,EACA;CACC,aAAKA,SAAL,CAAe9X,KAAf;CACA;;CACDnG,MAAAA,EAAE,CAACgb,SAAH,CAAa1P,OAAb,CAAqB,KAAK5I,EAA1B;CACA,WAAKub,SAAL,GAAiB,IAAjB;CACA,WAAKD,KAAL,GAAa,KAAb;CACA;CAhNF;CAAA;CAAA;;KCAaQ,WAAb;CACC,yBACA;CAAA,QADYjf,MACZ,uEADqB,EACrB;CAAA;CACC,SAAKmD,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,kBAAkBlB,IAAI,CAACoB,MAAL,EAAzC;CACA,SAAKxC,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,SAAKZ,GAAL,GAAW,EAAX;CACA,SAAKkb,KAAL,GAAa,EAAb;CACA;;CAPF;CAAA;CAAA,6BAUC;CACC,WAAK+D,MAAL,GAAc,IAAIze,EAAE,CAACuP,WAAP,CAAmB,KAAK7M,EAAxB,EAA4B,IAA5B,EAAkC;CAC/C8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADsC;CAE/CnJ,QAAAA,QAAQ,EAAE,IAFqC;CAG/CD,QAAAA,UAAU,EAAG,IAHkC;CAI/CjG,QAAAA,MAAM,EAAE,KAAKA,MAJkC;CAK/CoG,QAAAA,UAAU,EAAE,CALmC;CAM/CD,QAAAA,SAAS,EAAE,CANoC;CAO/CmJ,QAAAA,SAAS,EAAE,IAPoC;CAQ/CC,QAAAA,YAAY,EAAE,KARiC;CAS/CC,QAAAA,QAAQ,EAAE,KAAK8O,QAAL,EATqC;CAU/C7O,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAVoC;CAW/C3H,QAAAA,SAAS,EAAE,kBAXoC;CAY/C4H,QAAAA,OAAO,EAAE,KAAK2O,UAAL,EAZsC;CAa/CvO,QAAAA,OAAO,EAAE,KAAKwO,UAAL,EAbsC;CAc/CtW,QAAAA,MAAM,EAAE;CAduC,OAAlC,CAAd;CAgBA;CA3BF;CAAA;CAAA,+BA8BC;CACC,aAAO,KAAKoS,KAAZ;CACA;CAhCF;CAAA;CAAA,iCAmCC;CACC,WAAKlb,GAAL,CAAS4Q,OAAT,GAAmBpQ,EAAE,CAACF,MAAH,CAAU,KAAV,CAAnB;CACA,aAAO,KAAKN,GAAL,CAAS4Q,OAAhB;CACA;CAtCF;CAAA;CAAA,iCAyCC;CACC,WAAKJ,OAAL,GAAe,EAAf;CACA,aAAO,KAAKA,OAAZ;CACA;CA5CF;CAAA;CAAA,yBA8CMzQ,MA9CN,EA+CC;CACC,UAAI,CAAC,KAAKkf,MAAV,EACA;CACC,aAAK3e,MAAL;CACA;;CACD,WAAK2e,MAAL,CAAYxX,IAAZ;CACA;CArDF;CAAA;CAAA,4BAwDC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CA7DF;CAAA;CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCIa0Y,YAAb;CAAA;;CAQC,0BACA;CAAA;;CAAA,QADYtf,MACZ,uEADqB,EACrB;CAAA;CACC;CADD,oFAPQ,EAOR;CAAA,sFANU,KAMV;CAAA,2FALe,IAKf;CAAA,8FAJkB,IAIlB;CAAA,kFAHM,EAGN;;CAEC,UAAKiD,iBAAL,CAAuB,mCAAvB;;CAEA,QAAI5C,cAAI,CAACiF,OAAL,CAAatF,MAAM,CAACuf,KAApB,CAAJ,EACA;CACC,YAAKA,KAAL,GAAavf,MAAM,CAACuf,KAApB;CACA;;CAED,UAAK1e,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,UAAK2e,OAAL,GAAexf,MAAM,CAACmD,EAAP,IAAa,mBAAmBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAA/C;;CACA,UAAK9C,MAAL;;CAEA,QAAIP,MAAM,CAACyf,WAAX,EACA;CACC,YAAK1d,QAAL,CAAc/B,MAAM,CAACyf,WAArB;CACA;;CAED,QAAIzf,MAAM,CAAC0f,eAAX,EACA;CACC,YAAKxH,WAAL,CAAiBlY,MAAM,CAAC0f,eAAxB;CACA;;CArBF;CAsBC;;CA/BF;CAAA;CAAA,6BAkCC;CACC,WAAKzf,GAAL,CAASC,IAAT,GAAgBiE,aAAG,CAACC,MAApB;CACA,WAAKnE,GAAL,CAAS0f,YAAT,GAAwBxb,aAAG,CAACC,MAA5B;CACA,WAAKnE,GAAL,CAAS2f,iBAAT,GAA6B,KAAK3f,GAAL,CAAS0f,YAAT,CAAsBzb,WAAtB,CAAkCC,aAAG,CAACC,MAAtC,uBAA7B;CACA,WAAKnE,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0B,KAAKjE,GAAL,CAAS0f,YAAnC;CACA,WAAK1f,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B;CACAI,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASC,IAApB,EAA0B,OAA1B,EAAmC,KAAKwE,SAAL,CAAeD,IAAf,CAAoB,IAApB,CAAnC;CACA,WAAKxE,GAAL,CAAS4f,iBAAT,GAA6B,KAAK5f,GAAL,CAAS0f,YAAT,CAAsBzb,WAAtB,CAAkCC,aAAG,CAACC,MAAtC,uBAA7B;CAEA,WAAK0b,OAAL,GAAe,IAAf;CACA;CA5CF;CAAA;CAAA,mCA+CC;CACC,UAAI,CAAC,KAAKA,OAAV,EACA;CACC,aAAKvf,MAAL;CACA;;CAED,aAAO,KAAKN,GAAL,CAASC,IAAhB;CACA;CAtDF;CAAA;CAAA,6BAwDUkB,KAxDV,EAyDC;CACC,WAAKmd,YAAL,GAAoB,KAAKgB,KAAL,CAAW1D,IAAX,CAAgB,UAASkE,IAAT,EACpC;CACC,eAAO3e,KAAK,CAACmN,IAAN,KAAewR,IAAI,CAACxR,IAA3B;CACA,OAHmB,EAGjB,IAHiB,CAApB;;CAKA,UAAI,KAAKgQ,YAAT,EACA;CACCxa,QAAAA,aAAG,CAACsY,MAAJ,CAAW,KAAKpc,GAAL,CAAS2f,iBAApB,EAAuC;CAAC1Z,UAAAA,IAAI,EAAE,KAAKqY,YAAL,CAAkBrY;CAAzB,SAAvC;CACA;CACD;CAnEF;CAAA;CAAA,gCAqEa9E,KArEb,EAsEC;CACC,UAAIA,KAAJ,EACA;CACC,aAAKse,eAAL,GAAuB,KAAKH,KAAL,CAAW1D,IAAX,CAAgB,UAASkE,IAAT,EACvC;CACC,iBAAO3e,KAAK,KAAK2e,IAAI,CAACxR,IAAf,IAAuBwR,IAAI,CAAC1Z,IAAL,KAAc,YAA5C;CACA,SAHsB,EAGpB,IAHoB,CAAvB;;CAKA,YAAI,KAAKqZ,eAAT,EACA;CACC3b,UAAAA,aAAG,CAACsY,MAAJ,CAAW,KAAKpc,GAAL,CAAS4f,iBAApB,EAAuC;CAAC3Z,YAAAA,IAAI,EAAE,MAAM,KAAKwZ,eAAL,CAAqBxZ,IAA3B,GAAkC;CAAzC,WAAvC;CACA;;CACD,aAAKjG,GAAL,CAAS4f,iBAAT,CAA2B1T,KAA3B,CAAiCC,OAAjC,GAA2C,KAAKsT,eAAL,GAAuB,EAAvB,GAA4B,OAAvE;CACA;CACD;CApFF;CAAA;CAAA,mCAuFC;CACC,UAAI9Z,SAAS,GAAG,EAAhB;CACA,WAAK2Z,KAAL,CAAWha,OAAX,CAAmB,UAASwa,IAAT,EACnB;CACC,YAAIA,IAAI,CAAC1Z,IAAL,KAAc,MAAlB,EACA;CACCT,UAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdwO,YAAAA,IAAI,EAAE,WAAWyO,IAAI,CAAC7Z,IAAhB,GAAuB,SAAvB,IAAoC6Z,IAAI,CAACC,MAAL,GAAc,wCAAwCD,IAAI,CAACC,MAA7C,GAAsD,SAApE,GAAgF,EAApH,CADQ;CAEd;CACAnX,YAAAA,SAAS,EAAE,KAAK0V,YAAL,CAAkBhQ,IAAlB,KAA2BwR,IAAI,CAACxR,IAAhC,GAAuC,wBAAvC,GAAkE,GAH/D;CAId/H,YAAAA,OAAO,EAAE,YAAU;CAClB,mBAAK0C,IAAL,CAAU,UAAV,EAAsB;CACrBqF,gBAAAA,IAAI,EAAEwR,IAAI,CAACxR,IADU;CAErBlI,gBAAAA,IAAI,EAAE0Z,IAAI,CAAC1Z,IAFU;CAGrBrB,gBAAAA,OAAO,EAAE+a,IAAI,CAAC/a;CAHO,eAAtB;CAKA,mBAAKib,SAAL,CAAerZ,KAAf;CACA,aAPQ,CAOPnC,IAPO,CAOF,IAPE;CAJK,WAAf;CAaA;CACD,OAlBD,EAkBG,IAlBH;;CAoBA,UAAImB,SAAS,CAACjD,MAAV,GAAmB,KAAK4c,KAAL,CAAW5c,MAAlC,EACA;CACCiD,QAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdwO,UAAAA,IAAI,EAAE,WAAWjN,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAAX,GAAoD,SAD5C;CAEduE,UAAAA,SAAS,EAAE;CAFG,SAAf;CAKA,aAAK0W,KAAL,CAAWha,OAAX,CAAmB,UAASwa,IAAT,EACnB;CACC,cAAIA,IAAI,CAAC1Z,IAAL,KAAc,YAAlB,EACA;CACCT,YAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdoD,cAAAA,IAAI,EAAE6Z,IAAI,CAAC7Z,IADG;CAEd2C,cAAAA,SAAS,EAAE,KAAK6W,eAAL,CAAqBnR,IAArB,KAA8BwR,IAAI,CAACxR,IAAnC,GAA0C,wBAA1C,GAAqE,GAFlE;CAGd/H,cAAAA,OAAO,EAAE,YAAU;CAClB,qBAAK0C,IAAL,CAAU,UAAV,EAAsB;CACrBqF,kBAAAA,IAAI,EAAEwR,IAAI,CAACxR,IADU;CAErBlI,kBAAAA,IAAI,EAAE0Z,IAAI,CAAC1Z,IAFU;CAGrBrB,kBAAAA,OAAO,EAAE+a,IAAI,CAAC/a;CAHO,iBAAtB;CAKA,qBAAKib,SAAL,CAAerZ,KAAf;CACA,eAPQ,CAOPnC,IAPO,CAOF,IAPE;CAHK,aAAf;CAYA;CACD,SAjBD,EAiBG,IAjBH;CAkBA;;CAED,aAAOmB,SAAP;CACA;CAzIF;CAAA;CAAA,gCA4IC;CACC,UAAI,KAAKqa,SAAL,IAAkB,KAAKA,SAAL,CAAezY,WAAjC,IAAgD,KAAKyY,SAAL,CAAezY,WAAf,CAA2B4R,OAA3B,EAApD,EACA;CACC,eAAO,KAAK6G,SAAL,CAAerZ,KAAf,EAAP;CACA;;CAED,WAAKqZ,SAAL,GAAiBpZ,sBAAW,CAACtG,MAAZ,CAChB,KAAKif,OADW,EAEhB,KAAKvf,GAAL,CAAS0f,YAFO,EAGhB,KAAKO,YAAL,EAHgB,EAIhB;CACCrX,QAAAA,SAAS,EAAE,8BADZ;CAEC/B,QAAAA,UAAU,EAAG,IAFd;CAGCC,QAAAA,QAAQ,EAAG,IAHZ;CAIClG,QAAAA,MAAM,EAAE,KAAKA,MAJd;CAKCmG,QAAAA,SAAS,EAAE,CAAC,CALb;CAMCC,QAAAA,UAAU,EAAE,KAAKhH,GAAL,CAAS0f,YAAT,CAAsBpE,WAAtB,GAAoC,CANjD;CAOCrU,QAAAA,KAAK,EAAE,IAPR;CAQCC,QAAAA,SAAS,EAAE;CARZ,OAJgB,CAAjB;CAgBA,WAAK8Y,SAAL,CAAevY,IAAf;CACA;CAnKF;CAAA;CAAA,iCAsKC;CACC,UAAI,KAAKuY,SAAL,IAAkB,KAAKA,SAAL,CAAezY,WAAjC,IAAgD,KAAKyY,SAAL,CAAezY,WAAf,CAA2B4R,OAA3B,EAApD,EACA;CACC,aAAK6G,SAAL,CAAerZ,KAAf;CACA;CACD;CA3KF;CAAA;CAAA,EAAkCU,6BAAlC;;;;;;;;;;;;;;;;;;;;;KCAa6Y,gBAAb;CAAA;;CAQC,8BACA;CAAA;;CAAA,QADYngB,MACZ,uEADqB,EACrB;CAAA;CACC;CADD,oFAPQ,EAOR;CAAA,sFANU,KAMV;CAAA,2FALe,IAKf;CAAA,8FAJkB,IAIlB;CAAA,kFAHM,EAGN;;CAEC,UAAKiD,iBAAL,CAAuB,uCAAvB;;CAEA,QAAI5C,cAAI,CAACiF,OAAL,CAAatF,MAAM,CAACuf,KAApB,CAAJ,EACA;CACC,YAAKA,KAAL,GAAavf,MAAM,CAACuf,KAApB;CACA;;CAED,UAAKa,QAAL,GAAgB,IAAIC,OAAJ,EAAhB;CAEA,UAAKxf,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,UAAK2e,OAAL,GAAexf,MAAM,CAACmD,EAAP,IAAa,mBAAmBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAA/C;;CACA,UAAK9C,MAAL;;CAEA,QAAIP,MAAM,CAACyf,WAAX,EACA;CACC,YAAK1d,QAAL,CAAc/B,MAAM,CAACyf,WAArB;CACA;;CAlBF;CAmBC;;CA5BF;CAAA;CAAA,6BA+BC;CAAA;;CACC,WAAKxf,GAAL,CAASC,IAAT,GAAgBiE,aAAG,CAACC,MAApB;CAEA,WAAKmb,KAAL,CAAWha,OAAX,CAAmB,UAACwa,IAAD,EACnB;CACC,YAAIA,IAAI,CAAC1Z,IAAL,KAAc,MAAlB,EACA;CACC,UAAA,MAAI,CAAC+Z,QAAL,CAAc1X,GAAd,CAAkBqX,IAAlB,EAAwB;CACvB7f,YAAAA,IAAI,EAAE,MAAI,CAACD,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0BC,aAAG,CAACC,MAA9B,uBAEM,YAAI;CACd,cAAA,MAAI,CAAC8E,IAAL,CAAU,UAAV,EAAsB;CACrBqF,gBAAAA,IAAI,EAAEwR,IAAI,CAACxR,IADU;CAErBlI,gBAAAA,IAAI,EAAE0Z,IAAI,CAAC1Z,IAFU;CAGrBrB,gBAAAA,OAAO,EAAE+a,IAAI,CAAC/a;CAHO,eAAtB;CAKD,aARK,EASH+a,IAAI,CAAC7Z,IATF;CADiB,WAAxB;CAYA;CACD,OAjBD;CAmBA,WAAK4Z,OAAL,GAAe,IAAf;CACA;CAtDF;CAAA;CAAA,mCAyDC;CACC,UAAI,CAAC,KAAKA,OAAV,EACA;CACC,aAAKvf,MAAL;CACA;;CAED,aAAO,KAAKN,GAAL,CAASC,IAAhB;CACA;CAhEF;CAAA;CAAA,6BAkEUkB,KAlEV,EAmEC;CACC,WAAKmd,YAAL,GAAoB,KAAKgB,KAAL,CAAW1D,IAAX,CAAgB,UAASkE,IAAT,EACpC;CACC,eAAO3e,KAAK,CAACmN,IAAN,KAAewR,IAAI,CAACxR,IAA3B;CACA,OAHmB,EAGjB,IAHiB,CAApB;;CAKA,UAAI,KAAKgQ,YAAT,EACA;CACC,YAAI+B,QAAQ,GAAG,KAAKF,QAAL,CAAc1a,GAAd,CAAkB,KAAK6Y,YAAvB,CAAf;CACA,YAAIgC,iBAAiB,GAAG,KAAKtgB,GAAL,CAASC,IAAT,CAAcqK,aAAd,CAA4B,0CAA5B,CAAxB;;CACA,YAAIlK,cAAI,CAACkE,SAAL,CAAegc,iBAAf,CAAJ,EACA;CACCxc,UAAAA,aAAG,CAACsI,WAAJ,CAAgBkU,iBAAhB,EAAmC,yCAAnC;CACA;;CAED,YAAIlgB,cAAI,CAACkE,SAAL,CAAe+b,QAAQ,CAACpgB,IAAxB,CAAJ,EACA;CACC6D,UAAAA,aAAG,CAACC,QAAJ,CAAasc,QAAQ,CAACpgB,IAAtB,EAA4B,yCAA5B;CACA;CACD;CACD;CAvFF;CAAA;CAAA,gCAyFakB,KAzFb,EA0FC;CACC,UAAIA,KAAJ,EACA;CACC,aAAKse,eAAL,GAAuB,KAAKH,KAAL,CAAW1D,IAAX,CAAgB,UAASkE,IAAT,EACvC;CACC,iBAAO3e,KAAK,KAAK2e,IAAI,CAACxR,IAAf,IAAuBwR,IAAI,CAAC1Z,IAAL,KAAc,YAA5C;CACA,SAHsB,EAGpB,IAHoB,CAAvB,CADD;CAOC;CACA;CACA;CACA;CACA;CACD;CAxGF;CAAA;CAAA,mCA2GC;CAAA;;CACC,UAAIT,SAAS,GAAG,EAAhB;CACA,WAAK2Z,KAAL,CAAWha,OAAX,CAAmB,UAACwa,IAAD,EACnB;CACC,YAAIA,IAAI,CAAC1Z,IAAL,KAAc,MAAlB,EACA;CACCT,UAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdwO,YAAAA,IAAI,EAAE,WAAWyO,IAAI,CAAC7Z,IAAhB,GAAuB,SAAvB,IAAoC6Z,IAAI,CAACC,MAAL,GAAc,wCAAwCD,IAAI,CAACC,MAA7C,GAAsD,SAApE,GAAgF,EAApH,CADQ;CAEdnX,YAAAA,SAAS,EAAE,MAAI,CAAC0V,YAAL,CAAkBhQ,IAAlB,KAA2BwR,IAAI,CAACxR,IAAhC,GAAuC,wBAAvC,GAAkE,GAF/D;CAGd/H,YAAAA,OAAO,EAAE,mBAAM;CACd,cAAA,MAAI,CAAC0C,IAAL,CAAU,UAAV,EAAsB;CACrBqF,gBAAAA,IAAI,EAAEwR,IAAI,CAACxR,IADU;CAErBlI,gBAAAA,IAAI,EAAE0Z,IAAI,CAAC1Z,IAFU;CAGrBrB,gBAAAA,OAAO,EAAE+a,IAAI,CAAC/a;CAHO,eAAtB;;CAKA,cAAA,MAAI,CAACib,SAAL,CAAerZ,KAAf;CACA;CAVa,WAAf;CAYA;CACD,OAjBD;;CAmBA,UAAIhB,SAAS,CAACjD,MAAV,GAAmB,KAAK4c,KAAL,CAAW5c,MAAlC,EACA;CACCiD,QAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdwO,UAAAA,IAAI,EAAE,WAAWjN,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAAX,GAAoD,SAD5C;CAEduE,UAAAA,SAAS,EAAE;CAFG,SAAf;CAKA,aAAK0W,KAAL,CAAWha,OAAX,CAAmB,UAASwa,IAAT,EACnB;CACC,cAAIA,IAAI,CAAC1Z,IAAL,KAAc,YAAlB,EACA;CACCT,YAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdoD,cAAAA,IAAI,EAAE6Z,IAAI,CAAC7Z,IADG;CAEd2C,cAAAA,SAAS,EAAE,KAAK6W,eAAL,CAAqBnR,IAArB,KAA8BwR,IAAI,CAACxR,IAAnC,GAA0C,wBAA1C,GAAqE,GAFlE;CAGd/H,cAAAA,OAAO,EAAE,YAAU;CAClB,qBAAK0C,IAAL,CAAU,UAAV,EAAsB;CACrBqF,kBAAAA,IAAI,EAAEwR,IAAI,CAACxR,IADU;CAErBlI,kBAAAA,IAAI,EAAE0Z,IAAI,CAAC1Z,IAFU;CAGrBrB,kBAAAA,OAAO,EAAE+a,IAAI,CAAC/a;CAHO,iBAAtB;CAKA,qBAAKib,SAAL,CAAerZ,KAAf;CACA,eAPQ,CAOPnC,IAPO,CAOF,IAPE;CAHK,aAAf;CAYA;CACD,SAjBD,EAiBG,IAjBH;CAkBA;;CAED,aAAOmB,SAAP;CACA,KA5JF;CA+JC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CA3LD;CAAA;CAAA,EAAuC0B,6BAAvC;;KCFakZ,SAAb;CAAA;;CAKC,uBACA;CAAA;;CAAA,QADYxgB,MACZ,uEADqB,EACrB;CAAA;CACC;CADD,wFAJY,KAIZ;CAAA,kFAHM,EAGN;;CAEC,UAAKiD,iBAAL,CAAuB,gCAAvB;;CACA,UAAKpC,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,IAA/B;CACA,UAAK2e,OAAL,GAAexf,MAAM,CAACmD,EAAP,IAAa,gBAAgBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAA5C;CACA,UAAKod,SAAL,GAAiBzgB,MAAM,CAACygB,SAAxB;CAEA,UAAKC,eAAL,GAAuBrgB,cAAI,CAACC,UAAL,CAAgBN,MAAM,CAAC2gB,QAAvB,IAAmC3gB,MAAM,CAAC2gB,QAA1C,GAAqD,IAA5E;CACA,UAAKC,cAAL,GAAsBvgB,cAAI,CAACC,UAAL,CAAgBN,MAAM,CAAC6gB,OAAvB,IAAkC7gB,MAAM,CAAC6gB,OAAzC,GAAmD,IAAzE;;CACA,UAAKtgB,MAAL;;CATD;CAUC;;CAhBF;CAAA;CAAA,6BAmBC;CACC,WAAKqF,SAAL,GAAiB,CAChB;CACCM,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,cAAf,CADP;CAECkC,QAAAA,OAAO,EAAE,KAAKma,QAAL,CAAclc,IAAd,CAAmB,IAAnB;CAFV,OADgB,CAAjB;;CAOA,UAAI,KAAKmc,cAAT,EACA;CACC,aAAKhb,SAAL,CAAe9C,IAAf,CAAoB;CACnBoD,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,aAAf,CADa;CAEnBkC,UAAAA,OAAO,EAAE,KAAKqa,OAAL,CAAapc,IAAb,CAAkB,IAAlB;CAFU,SAApB;CAIA;;CAED,UAAI,KAAKmB,SAAL,CAAejD,MAAf,GAAwB,CAA5B,EACA;CACC,aAAK1C,GAAL,CAASC,IAAT,GAAgB6D,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAClCqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WAD2B;CAElC6N,UAAAA,QAAQ,EAAE,CACT3S,aAAG,CAACxD,MAAJ,CAAW,QAAX,EAAqB;CACpBqI,YAAAA,KAAK,EAAE;CAACC,cAAAA,SAAS,EAAE,aAAZ;CAA2BxC,cAAAA,IAAI,EAAE;CAAjC,aADa;CAEpBiL,YAAAA,IAAI,EAAEjN,aAAG,CAACC,UAAJ,CAAe,QAAf,CAFc;CAGpByE,YAAAA,MAAM,EAAE;CAACC,cAAAA,KAAK,EAAE,KAAK2X,QAAL,CAAclc,IAAd,CAAmB,IAAnB;CAAR;CAHY,WAArB,CADS;CAFwB,SAAnB,CAAhB;CAWA,aAAKxE,GAAL,CAAS6gB,cAAT,GAA0B/c,aAAG,CAACxD,MAAJ,CAAW,MAAX,EAAmB;CAC5CqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE;CAAZ,WADqC;CAE5CE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAE,KAAKtE,SAAL,CAAeD,IAAf,CAAoB,IAApB;CAAR;CAFoC,SAAnB,CAA1B;CAIA,aAAKxE,GAAL,CAASC,IAAT,CAAcgE,WAAd,CAA0B,KAAKjE,GAAL,CAAS6gB,cAAnC;CACA,OAlBD,MAoBA;CACC,aAAK7gB,GAAL,CAASC,IAAT,GAAgB6D,aAAG,CAACxD,MAAJ,CAAW,QAAX,EAAqB;CACpCqI,UAAAA,KAAK,EAAE;CAACC,YAAAA,SAAS,EAAE,uBAAZ;CAAqCxC,YAAAA,IAAI,EAAE;CAA3C,WAD6B;CAEpCiL,UAAAA,IAAI,EAAEjN,aAAG,CAACC,UAAJ,CAAe,QAAf,CAF8B;CAGpCyE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAE,KAAK2X,QAAL,CAAclc,IAAd,CAAmB,IAAnB;CAAR;CAH4B,SAArB,CAAhB;CAKA;CACD;CA9DF;CAAA;CAAA,8BAiEC;CACC,aAAO,KAAKxE,GAAL,CAASC,IAAhB;CACA;CAnEF;CAAA;CAAA,gCAsEC;CACC,UAAI,KAAK+f,SAAL,IAAkB,KAAKA,SAAL,CAAezY,WAAjC,IAAgD,KAAKyY,SAAL,CAAezY,WAAf,CAA2B4R,OAA3B,EAApD,EACA;CACC,eAAO,KAAK6G,SAAL,CAAerZ,KAAf,EAAP;CACA;;CAED,WAAKqZ,SAAL,GAAiBxf,EAAE,CAACgb,SAAH,CAAalb,MAAb,CAChB,KAAKif,OADW,EAEhB,KAAKvf,GAAL,CAAS6gB,cAFO,EAGhB,KAAKlb,SAHW,EAIhB;CACCkB,QAAAA,UAAU,EAAG,IADd;CAECC,QAAAA,QAAQ,EAAG,IAFZ;CAGClG,QAAAA,MAAM,EAAE,KAAKA,MAHd;CAICmG,QAAAA,SAAS,EAAE,CAJZ;CAKCC,QAAAA,UAAU,EAAE,EALb;CAMCC,QAAAA,KAAK,EAAE;CANR,OAJgB,CAAjB;CAcA,WAAK+Y,SAAL,CAAevY,IAAf;CAEAjH,MAAAA,EAAE,CAAC4M,cAAH,CAAkB,KAAK4S,SAAL,CAAezY,WAAjC,EAA8C,cAA9C,EAA8D,YAC9D;CACC/G,QAAAA,EAAE,CAACgb,SAAH,CAAa1P,OAAb,CAAqB,KAAKyT,OAA1B;CACA,aAAKS,SAAL,GAAiB,IAAjB;CACA,aAAKc,UAAL,GAAkB,IAAlB;CACA,OAL6D,CAK5Dtc,IAL4D,CAKvD,IALuD,CAA9D;CAMA;CAlGF;CAAA;CAAA,+BAqGC;CACC,UAAI,KAAKic,eAAT,EACA;CACC,aAAKA,eAAL;CACA;;CAED,UAAI,KAAKT,SAAL,IAAkB,KAAKA,SAAL,CAAezY,WAAjC,IAAgD,KAAKyY,SAAL,CAAezY,WAAf,CAA2B4R,OAA3B,EAApD,EACA;CACC,aAAK6G,SAAL,CAAerZ,KAAf;CACA;CACD;CA/GF;CAAA;CAAA,8BAkHC;CACC,UAAI,KAAKga,cAAT,EACA;CACC,aAAKA,cAAL;CACA;;CAED,UAAI,KAAKX,SAAL,IAAkB,KAAKA,SAAL,CAAezY,WAAjC,IAAgD,KAAKyY,SAAL,CAAezY,WAAf,CAA2B4R,OAA3B,EAApD,EACA;CACC,aAAK6G,SAAL,CAAerZ,KAAf;CACA;CACD;CA5HF;CAAA;CAAA,EAA+BpC,eAAK,CAAC8C,YAArC;;KCCa0Z,oBAAb;CAAA;;CAKC,kCACA;CAAA;;CAAA,QADYhhB,MACZ,uEADqB,EACrB;CAAA;CACC;CADD,wFAJY,KAIZ;CAAA,kFAHM,EAGN;;CAEC,UAAKiD,iBAAL,CAAuB,2CAAvB;;CACA,UAAKxC,EAAL,GAAUkB,kBAAI,CAACsf,KAAL,EAAV;;CAEA,QAAIjhB,MAAM,CAACE,IAAP,IAAeG,cAAI,CAACkE,SAAL,CAAevE,MAAM,CAACE,IAAtB,CAAnB,EACA;CACC,YAAKD,GAAL,CAASC,IAAT,GAAgBF,MAAM,CAACE,IAAvB;CACA,KAHD,MAKA;CACC,YAAM,IAAIghB,KAAJ,CAAU,kDAAV,CAAN;CACA;;CACD,UAAK/d,EAAL,GAAUnD,MAAM,CAACmD,EAAP,IAAa,4BAA4BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAAnD;CACA,UAAKxC,MAAL,GAAc,IAAd;;CAEA,UAAKN,MAAL;;CAEA,UAAK4gB,MAAL,GAAcnhB,MAAM,CAACohB,aAAP,IAAwB,IAAtC;;CACA,QAAI,MAAKD,MAAT,EACA;CACC,YAAKE,YAAL;CACA;;CAtBF;CAuBC;;CA7BF;CAAA;CAAA,6BAgCC;CACC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CAEA,WAAKC,SAAL,GAAiB,IAAI7gB,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CACjCtb,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAD2B;CAEjCuE,QAAAA,SAAS,EAAE,uBAFsB;CAGjCE,QAAAA,MAAM,EAAE;CAACC,UAAAA,KAAK,EAAE,KAAKyY,MAAL,CAAYhd,IAAZ,CAAiB,IAAjB;CAAR;CAHyB,OAAjB,CAAjB;CAKA,WAAK6c,SAAL,CAAeI,QAAf,CAAwB,KAAKzhB,GAAL,CAASC,IAAjC;CAEA,WAAKyhB,UAAL,GAAkB,IAAIlhB,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAClCtb,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAD4B;CAElCuE,QAAAA,SAAS,EAAE,4BAFuB;CAGlCE,QAAAA,MAAM,EAAE;CAACC,UAAAA,KAAK,EAAE,KAAK4Y,OAAL,CAAand,IAAb,CAAkB,IAAlB;CAAR;CAH0B,OAAjB,CAAlB;CAKA,WAAKkd,UAAL,CAAgBD,QAAhB,CAAyB,KAAKzhB,GAAL,CAASC,IAAlC,EAzBD;CA4BC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CAtEF;CAAA;CAAA,mCAyEC;CACC,UAAI,KAAKihB,MAAL,KAAgB,GAApB,EACA;CACC,aAAKG,SAAL,CAAeO,YAAf,GAA8B1V,KAA9B,CAAoCC,OAApC,GAA8C,MAA9C;CACA,aAAKuV,UAAL,CAAgBE,YAAhB,GAA+B1V,KAA/B,CAAqCC,OAArC,GAA+C,EAA/C;CACA,aAAKuV,UAAL,CAAgB1Z,OAAhB,CAAwB5D,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAAxB;CACA,OALD,MAOA;CACC,YAAI,KAAK6c,MAAL,KAAgB,GAApB,EACA;CACC,eAAKG,SAAL,CAAeO,YAAf,GAA8B1V,KAA9B,CAAoCC,OAApC,GAA8C,MAA9C;CACA,eAAKuV,UAAL,CAAgBE,YAAhB,GAA+B1V,KAA/B,CAAqCC,OAArC,GAA+C,EAA/C;CACA,SAJD,MAKK,IAAI,KAAK+U,MAAL,KAAgB,GAApB,EACL;CACC,eAAKG,SAAL,CAAeO,YAAf,GAA8B1V,KAA9B,CAAoCC,OAApC,GAA8C,EAA9C;CACA,eAAKuV,UAAL,CAAgBE,YAAhB,GAA+B1V,KAA/B,CAAqCC,OAArC,GAA+C,MAA/C;CACA,SAJI,MAML;CACC,eAAKkV,SAAL,CAAeO,YAAf,GAA8B1V,KAA9B,CAAoCC,OAApC,GAA8C,EAA9C;CACA,eAAKuV,UAAL,CAAgBE,YAAhB,GAA+B1V,KAA/B,CAAqCC,OAArC,GAA+C,EAA/C;CACA;CACD;CACD;CAlGF;CAAA;CAAA,6BAqGC;CACC,WAAK0V,SAAL,CAAe,GAAf;CACA;CAvGF;CAAA;CAAA,8BA0GC;CACC,WAAKA,SAAL,CAAe,GAAf;CACA;CA5GF;CAAA;CAAA,8BA8GW1gB,KA9GX,EA+GC;CAAA,UADiB2gB,SACjB,uEAD6B,IAC7B;CACC,WAAKZ,MAAL,GAAc/f,KAAd;;CAEA,UAAI,KAAK6e,SAAT,EACA;CACC,aAAKA,SAAL,CAAerZ,KAAf;CACA;;CAED,UAAImb,SAAJ,EACA;CACC,aAAK7Y,IAAL,CAAU,aAAV,EAAyB,IAAI1E,eAAK,CAAC2E,SAAV,CAAoB;CAACC,UAAAA,IAAI,EAAE;CAAC+X,YAAAA,MAAM,EAAE/f;CAAT;CAAP,SAApB,CAAzB;CACA;;CAED,WAAKigB,YAAL;CACA;CA7HF;CAAA;CAAA,EAA0C7c,eAAK,CAAC8C,YAAhD;;KCAa0a,mBAAb;CAAA;;CAGC,iCACA;CAAA;;CAAA;CACC;CADD,kFAFM,EAEN;;CAEC,UAAK/e,iBAAL,CAAuB,0CAAvB;;CACA,UAAKpC,MAAL,GAAc,IAAd;CACA,UAAKsC,EAAL,GAAU,2BAA2BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAArC;CAJD;CAKC;;CATF;CAAA;CAAA,2BAYC;CACC,UAAIwN,OAAO,GAAG9M,aAAG,CAACxD,MAAJ,CAAW,KAAX,CAAd;CACA,WAAK2e,MAAL,GAAc,IAAIze,EAAE,CAACuP,WAAP,CAAmB,KAAK7M,EAAxB,EAA4B,IAA5B,EAAkC;CAC/C8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADsC;CAE/CnJ,QAAAA,QAAQ,EAAE,IAFqC;CAG/CD,QAAAA,UAAU,EAAG,IAHkC;CAI/CjG,QAAAA,MAAM,EAAE,KAAKA,MAJkC;CAK/CoG,QAAAA,UAAU,EAAE,CALmC;CAM/CD,QAAAA,SAAS,EAAE,CANoC;CAO/CmJ,QAAAA,SAAS,EAAE,IAPoC;CAQ/CC,QAAAA,YAAY,EAAE,KARiC;CAS/CC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,sBAAf,CATqC;CAU/CgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAVoC;CAW/C3H,QAAAA,SAAS,EAAE,kBAXoC;CAY/C4H,QAAAA,OAAO,EAAE,CACR,IAAIhQ,EAAE,CAACmQ,qBAAP,CAA6B;CAC5B1K,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADsB;CAE5BuE,UAAAA,SAAS,EAAE,iCAFiB;CAG5BE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAG,KAAKpC,KAAL,CAAWnC,IAAX,CAAgB,IAAhB;CAAT;CAHoB,SAA7B,CADQ,CAZsC;CAmB/CoM,QAAAA,OAAO,EAAEA,OAnBsC;CAoB/C9H,QAAAA,MAAM,EAAE;CApBuC,OAAlC,CAAd;CAuBA8H,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADsC;CAE5CyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YACR;CACC,iBAAKE,IAAL,CAAU,WAAV,EAAuB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAAvB;CACA,iBAAKrb,KAAL;CACA,WAJO,CAINnC,IAJM,CAID,IAJC;CADD;CAFoC,OAAzB,EASjByd,UATH;CAWArR,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,iBAAf,CADsC;CAE5CyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YACR;CACC,iBAAKE,IAAL,CAAU,WAAV,EAAuB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAAvB;CACA,iBAAKrb,KAAL;CACA,WAJO,CAINnC,IAJM,CAID,IAJC;CADD;CAFoC,OAAzB,EASjByd,UATH;CAWArR,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CACnB;CACCxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,gBAAf,CADP;CAECyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YACR;CACC,iBAAKE,IAAL,CAAU,WAAV,EAAuB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAAvB;CACA,iBAAKrb,KAAL;CACA,WAJO,CAINnC,IAJM,CAID,IAJC;CADD;CAFT,OADmB,EAUhByd,UAVJ;CAYA,WAAKhD,MAAL,CAAYxX,IAAZ;CACA;CAxEF;CAAA;CAAA,4BA2EC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CAhFF;CAAA;CAAA,EAAyCU,6BAAzC;;KCAa6a,iBAAb;CAAA;;CAGC,+BACA;CAAA;;CAAA;CACC;CADD,kFAFM,EAEN;;CAEC,UAAKlf,iBAAL,CAAuB,wCAAvB;;CACA,UAAKpC,MAAL,GAAc,IAAd;CACA,UAAKsC,EAAL,GAAU,2BAA2BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAArC;CAJD;CAKC;;CATF;CAAA;CAAA,2BAYC;CAAA;;CACC,UAAIwN,OAAO,GAAG9M,aAAG,CAACxD,MAAJ,CAAW,KAAX,CAAd;CACA,WAAK2e,MAAL,GAAc,IAAIze,EAAE,CAACuP,WAAP,CAAmB,KAAK7M,EAAxB,EAA4B,IAA5B,EAAkC;CAC/C8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADsC;CAE/CnJ,QAAAA,QAAQ,EAAE,IAFqC;CAG/CD,QAAAA,UAAU,EAAG,IAHkC;CAI/CjG,QAAAA,MAAM,EAAE,KAAKA,MAJkC;CAK/CoG,QAAAA,UAAU,EAAE,CALmC;CAM/CD,QAAAA,SAAS,EAAE,CANoC;CAO/CmJ,QAAAA,SAAS,EAAE,IAPoC;CAQ/CC,QAAAA,YAAY,EAAE,KARiC;CAS/CC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,mBAAf,CATqC;CAU/CgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAVoC;CAW/C3H,QAAAA,SAAS,EAAE,kBAXoC;CAY/C4H,QAAAA,OAAO,EAAE,CACR,IAAIhQ,EAAE,CAACmQ,qBAAP,CAA6B;CAC5B1K,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADsB;CAE5BuE,UAAAA,SAAS,EAAE,iCAFiB;CAG5BE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAG,KAAKpC,KAAL,CAAWnC,IAAX,CAAgB,IAAhB;CAAT;CAHoB,SAA7B,CADQ,CAZsC;CAmB/CoM,QAAAA,OAAO,EAAEA,OAnBsC;CAoB/C9H,QAAAA,MAAM,EAAE,EApBuC;CAqB/C5B,QAAAA,SAAS,EAAE;CArBoC,OAAlC,CAAd;CAwBA0J,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,2BAAf,CADsC;CAE5CyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAE,iBAAI;CACV,YAAA,MAAI,CAACE,IAAL,CAAU,QAAV,EAAoB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAApB;;CACA,YAAA,MAAI,CAACrb,KAAL;CACA;CAJM;CAFoC,OAAzB,EAQjBsb,UARH;CAUArR,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,gBAAf,CADsC;CAE5CyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAE,iBAAI;CACV,YAAA,MAAI,CAACE,IAAL,CAAU,QAAV,EAAoB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAApB;;CACA,YAAA,MAAI,CAACrb,KAAL;CACA;CAJM;CAFoC,OAAzB,EAQjBsb,UARH;CAUArR,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CACnB;CACCxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,eAAf,CADP;CAECyE,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,iBAAI;CACX,YAAA,MAAI,CAACE,IAAL,CAAU,QAAV,EAAoB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC6Y,gBAAAA,aAAa,EAAE;CAAhB;CAAP,aAAd,CAApB;;CACA,YAAA,MAAI,CAACrb,KAAL;CACA;CAJM;CAFT,OADmB,EAShBsb,UATJ;CAWA,WAAKhD,MAAL,CAAYxX,IAAZ;CACA;CAtEF;CAAA;CAAA,4BAyEC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CA9EF;CAAA;CAAA,EAAuCU,6BAAvC;;KCAa8a,mBAAb;CAAA;;CAEC,iCACA;CAAA;;CAAA,QADYpiB,MACZ,uEADqB,EACrB;CAAA;CACC,qHAAMA,MAAN;CACA,UAAKmb,KAAL,GAAa1a,EAAE,CAACsU,OAAH,CAAW,kBAAX,CAAb;CACA,UAAKsN,KAAL,GAAariB,MAAM,CAACqiB,KAApB;CAHD;CAIC;;CAPF;CAAA;CAAA,iCAUC;CACC,WAAKpiB,GAAL,CAAS4Q,OAAT,GAAmBpQ,EAAE,CAACF,MAAH,CAAU,KAAV,CAAnB;CAEA,WAAKN,GAAL,CAAS4Q,OAAT,CAAiB3M,WAAjB,CAA6B,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CACrDxK,QAAAA,IAAI,EAAEzF,EAAE,CAACsU,OAAH,CAAW,2BAAX,CAD+C;CAErDhM,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YAAW;CAClB,iBAAKqZ,KAAL,CAAWC,UAAX;CACA,iBAAK1b,KAAL;CACA,WAHO,CAGNnC,IAHM,CAGD,IAHC;CADD;CAF6C,OAAzB,EAQ1Byd,UARH;CAUA,WAAKjiB,GAAL,CAAS4Q,OAAT,CAAiB3M,WAAjB,CAA6B,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CACrDxK,QAAAA,IAAI,EAAEzF,EAAE,CAACsU,OAAH,CAAW,gBAAX,CAD+C;CAErDhM,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YAAW;CAClB,iBAAKqZ,KAAL,CAAWE,UAAX;CACA,iBAAK3b,KAAL;CACA,WAHO,CAGNnC,IAHM,CAGD,IAHC;CADD;CAF6C,OAAzB,EAQ1Byd,UARH;CAUA,WAAKjiB,GAAL,CAAS4Q,OAAT,CAAiB3M,WAAjB,CAA6B,IAAIzD,EAAE,CAACiQ,iBAAP,CAC5B;CACCxK,QAAAA,IAAI,EAAEzF,EAAE,CAACsU,OAAH,CAAW,eAAX,CADP;CAEChM,QAAAA,MAAM,EAAE;CACPC,UAAAA,KAAK,EAAG,YAAW;CAClB,iBAAKqZ,KAAL,CAAWG,SAAX;CACA,iBAAK5b,KAAL;CACA,WAHO,CAGNnC,IAHM,CAGD,IAHC;CADD;CAFT,OAD4B,EASzByd,UATJ;CAWA,aAAO,KAAKjiB,GAAL,CAAS4Q,OAAhB;CACA;CA7CF;CAAA;CAAA,iCAgDC;CACC,aAAO,CACN,IAAIpQ,EAAE,CAACmQ,qBAAP,CAA6B;CAC5B1K,QAAAA,IAAI,EAAEzF,EAAE,CAACsU,OAAH,CAAW,sBAAX,CADsB;CAE5BlM,QAAAA,SAAS,EAAE,iCAFiB;CAG5BE,QAAAA,MAAM,EAAE;CAACC,UAAAA,KAAK,EAAG,KAAKpC,KAAL,CAAWnC,IAAX,CAAgB,IAAhB;CAAT;CAHoB,OAA7B,CADM,CAAP;CAOA;CAxDF;CAAA;CAAA,EAAyCwa,WAAzC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KCGawD,eAAb;CAAA;;CAMC,2BAAYC,GAAZ,EACA;CAAA;;CAAA,QADiBC,OACjB,uEAD2B;CAACC,MAAAA,YAAY,EAAE;CAAf,KAC3B;CAAA;CACC;CADD,+FALmB,GAKnB;CAAA,+FAJmB,EAInB;CAAA,qFAHS,IAGT;;CAEC,UAAK3f,iBAAL,CAAuB,sCAAvB;;CAEA,UAAK2f,YAAL,GAAoBD,OAAO,CAACC,YAA5B;CACA,UAAKC,cAAL,GAAsB,CAAC,CAACF,OAAO,CAACE,cAAhC;CACA,UAAKC,qBAAL,GAA6BH,OAAO,CAACG,qBAAR,IAAiC,MAA9D;CAEA,UAAKC,GAAL,GAAWL,GAAG,IAAI,eAAezgB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,MAA3B,CAAjC;CAEA,UAAKpD,GAAL,GAAW;CACVkR,MAAAA,SAAS,EAAEwR,OAAO,CAACxR,SAAR,IAAqB,IADtB;CAEV6R,MAAAA,YAAY,EAAEL,OAAO,CAACK,YAAR,IAAwB;CAF5B,KAAX;;CAKA,UAAKziB,MAAL;;CAfD;CAgBC;;CAvBF;CAAA;CAAA,6BA0BC;CACC,UAAIF,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASkR,SAAxB,CAAJ,EACA;CACC,YAAI,KAAK0R,cAAT,EACA;CACC9e,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,oCAAjC;CACA;;CAED,aAAKlR,GAAL,CAASgjB,aAAT,GAAyB,KAAKhjB,GAAL,CAASkR,SAAT,CAAmBjN,WAAnB,CAA+BC,aAAG,CAACC,MAAnC,sBAAzB;CAEA,aAAKnE,GAAL,CAASsd,QAAT,GAAoB,KAAKtd,GAAL,CAASgjB,aAAT,CAAuB/e,WAAvB,CAAmCC,aAAG,CAACC,MAAvC,uBAC2F,KAAK8e,gBADhG,EAApB;;CAGA,YAAI,KAAKL,cAAT,EACA;CACC,eAAK5iB,GAAL,CAASkjB,YAAT,GAAwB,KAAKljB,GAAL,CAASgjB,aAAT,CAAuB/e,WAAvB,CAAmCC,aAAG,CAACC,MAAvC,uBAAxB;CACA;;CAED,aAAKnE,GAAL,CAASmjB,QAAT,GAAoB,KAAKnjB,GAAL,CAASgjB,aAAT,CAAuB/e,WAAvB,CAAmCC,aAAG,CAACC,MAAvC,uBACuF,KAAKif,gBAD5F,EAApB;;CAGA,YAAI,KAAKR,cAAT,EACA;CACC,eAAK5iB,GAAL,CAASqjB,YAAT,GAAwB,KAAKrjB,GAAL,CAASgjB,aAAT,CAAuB/e,WAAvB,CAAmCC,aAAG,CAACC,MAAvC,uBAAxB;CACA;;CAED,aAAKnE,GAAL,CAASkR,SAAT,CAAmBjN,WAAnB,CAA+BC,aAAG,CAACC,MAAnC;CAEA,aAAKnE,GAAL,CAASsjB,cAAT,GAA0B,KAAKtjB,GAAL,CAASkR,SAAT,CAAmBjN,WAAnB,CAA+BC,aAAG,CAACC,MAAnC,uBAA1B;CAEA,aAAKnE,GAAL,CAASujB,MAAT,GAAkB,KAAKvjB,GAAL,CAASsjB,cAAT,CAAwBrf,WAAxB,CAAoCC,aAAG,CAACC,MAAxC,uBACyF,KAAKif,gBAD9F,EAAlB;;CAGA,YAAI,KAAKR,cAAT,EACA;CACC,eAAK5iB,GAAL,CAASwjB,UAAT,GAAsB,KAAKxjB,GAAL,CAASsjB,cAAT,CAAwBrf,WAAxB,CAAoCC,aAAG,CAACC,MAAxC,qBAAtB;CACA;;CAED,aAAKnE,GAAL,CAASyjB,MAAT,GAAkB,KAAKzjB,GAAL,CAASsjB,cAAT,CAAwBrf,WAAxB,CAAoCC,aAAG,CAACC,MAAxC,sBAC6F,KAAK8e,gBADlG,EAAlB;;CAGA,YAAI,KAAKL,cAAT,EACA;CACC,eAAK5iB,GAAL,CAAS0jB,UAAT,GAAsB,KAAK1jB,GAAL,CAASsjB,cAAT,CAAwBrf,WAAxB,CAAoCC,aAAG,CAACC,MAAxC,sBAAtB;CACA;;CAED,aAAKwf,eAAL,GAAuB,IAAI7jB,YAAJ,CAAiB;CACvCI,UAAAA,KAAK,EAAE,KAAKF,GAAL,CAASmjB,QADuB;CAEvChjB,UAAAA,gBAAgB,EAAE,KAAKyjB,oBAAL,CAA0Bpf,IAA1B,CAA+B,IAA/B;CAFqB,SAAjB,CAAvB;CAKA,aAAKqf,aAAL,GAAqB,IAAI/jB,YAAJ,CAAiB;CACrCI,UAAAA,KAAK,EAAE,KAAKF,GAAL,CAASujB,MADqB;CAErCpjB,UAAAA,gBAAgB,EAAE,KAAK2jB,kBAAL,CAAwBtf,IAAxB,CAA6B,IAA7B;CAFmB,SAAjB,CAArB;CAKA,YAAIuf,WAAW,GAAG,KAAK/jB,GAAL,CAASkR,SAAT,CAAmBjN,WAAnB,CAA+BC,aAAG,CAACC,MAAnC,sBAAlB;CAGA,aAAKnE,GAAL,CAASgkB,OAAT,GAAmBD,WAAW,CAAC9f,WAAZ,CAAwBC,aAAG,CAACC,MAA5B,sBAAnB;CAGA4f,QAAAA,WAAW,CAAC9f,WAAZ,CAAwBC,aAAG,CAACC,MAA5B,sBAA6DC,aAAG,CAACC,UAAJ,CAAe,YAAf,CAA7D;CACA,OA/DF;CAkEC;;;CAEA,UAAI,KAAKse,YAAT,EACA;;CAUA,WAAK/e,iBAAL;CACA;CA1GF;CAAA;CAAA,+BA6GC;CAAA,UADSzC,KACT,uEADiB,EACjB;CACC,WAAKnB,GAAL,CAASsd,QAAT,CAAkBnc,KAAlB,GAA0BO,kBAAI,CAACuiB,UAAL,CAAgB9iB,KAAK,CAAC+iB,IAAtB,CAA1B;CACA,WAAKlkB,GAAL,CAASyjB,MAAT,CAAgBtiB,KAAhB,GAAwBO,kBAAI,CAACuiB,UAAL,CAAgB9iB,KAAK,CAACgjB,EAAtB,CAAxB;CAEA,WAAKC,aAAL,GAAqBjjB,KAAK,CAAC+iB,IAA3B;CAEA,WAAKP,eAAL,CAAqB7hB,QAArB,CAA8BX,KAAK,CAAC+iB,IAApC;CACA,WAAKL,aAAL,CAAmB/hB,QAAnB,CAA4BX,KAAK,CAACgjB,EAAlC;CAEA,WAAKnkB,GAAL,CAASmjB,QAAT,CAAkBhiB,KAAlB,GAA0BO,kBAAI,CAACS,UAAL,CAAgBhB,KAAK,CAAC+iB,IAAtB,CAA1B;CACA,WAAKlkB,GAAL,CAASujB,MAAT,CAAgBpiB,KAAhB,GAAwBO,kBAAI,CAACS,UAAL,CAAgBhB,KAAK,CAACgjB,EAAtB,CAAxB;;CAEA,UAAI,KAAKvB,cAAT,EACA;CACC,aAAK5iB,GAAL,CAASkjB,YAAT,CAAsB1Y,SAAtB,GAAkC9I,kBAAI,CAAC6G,gBAAL,CAAsBpH,KAAK,CAAC+iB,IAA5B,EAAkC,IAAlC,EAAwC,IAAxC,CAAlC;CACA,aAAKlkB,GAAL,CAAS0jB,UAAT,CAAoBlZ,SAApB,GAAgC9I,kBAAI,CAAC6G,gBAAL,CAAsBpH,KAAK,CAACgjB,EAA5B,EAAgC,IAAhC,EAAsC,IAAtC,CAAhC,CAFD;;CAKC,aAAKnkB,GAAL,CAAS0jB,UAAT,CAAoBxX,KAApB,CAA0BC,OAA1B,GAAoC,KAAKnM,GAAL,CAASsd,QAAT,CAAkBnc,KAAlB,KAA4B,KAAKnB,GAAL,CAASyjB,MAAT,CAAgBtiB,KAA5C,GAAoD,MAApD,GAA6D,EAAjG;CACA,aAAKnB,GAAL,CAASqjB,YAAT,CAAsB7Y,SAAtB,GAAkC,KAAKxK,GAAL,CAASmjB,QAAT,CAAkBhiB,KAApD;CACA,aAAKnB,GAAL,CAASwjB,UAAT,CAAoBhZ,SAApB,GAAgC,KAAKxK,GAAL,CAASujB,MAAT,CAAgBpiB,KAAhD;CACA;;CAED,UAAIA,KAAK,CAAC6iB,OAAN,KAAkBtb,SAAtB,EACA;CACC,aAAK1I,GAAL,CAASgkB,OAAT,CAAiB5G,OAAjB,GAA2Bjc,KAAK,CAAC6iB,OAAjC;CACA;;CAED,UAAI,KAAKrB,YAAT,EACA;CACCxhB,QAAAA,KAAK,CAACkjB,YAAN,GAAqBljB,KAAK,CAACkjB,YAAN,IAAsBljB,KAAK,CAACmjB,YAAjD;CACAnjB,QAAAA,KAAK,CAACojB,UAAN,GAAmBpjB,KAAK,CAACojB,UAAN,IAAoBpjB,KAAK,CAACmjB,YAA7C;;CAEA,YAAInjB,KAAK,CAACkjB,YAAN,KAAuB3b,SAAvB,IAAoCtI,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASwkB,MAAxB,CAAxC,EACA;CACC,eAAKxkB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAhB,GAAwBA,KAAK,CAACkjB,YAA9B;CACA;;CACD,YAAGljB,KAAK,CAACojB,UAAN,KAAqB7b,SAArB,IAAkCtI,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASykB,IAAxB,CAArC,EACA;CACC,eAAKzkB,GAAL,CAASykB,IAAT,CAActjB,KAAd,GAAsBA,KAAK,CAACojB,UAA5B;CACA;;CAED,YAAIpjB,KAAK,CAACmjB,YAAN,KAAuB5b,SAAvB,KACCvH,KAAK,CAACmjB,YAAN,KAAuBnjB,KAAK,CAACkjB,YAA7B,IACAljB,KAAK,CAACmjB,YAAN,KAAuBnjB,KAAK,CAACojB,UAF9B,CAAJ,EAGA;CACC,eAAKG,cAAL,CAAoB,IAApB;CACA;CACD;;CACD,WAAKvjB,KAAL,GAAaA,KAAb;CAEA,WAAKwjB,mBAAL;CACA;CAjKF;CAAA;CAAA,+BAoKC;CACC,UAAIxjB,KAAK,GAAG;CACX6iB,QAAAA,OAAO,EAAE,KAAKhkB,GAAL,CAASgkB,OAAT,CAAiB5G,OADf;CAEXE,QAAAA,QAAQ,EAAE,KAAKtd,GAAL,CAASsd,QAAT,CAAkBnc,KAFjB;CAGXsiB,QAAAA,MAAM,EAAE,KAAKzjB,GAAL,CAASyjB,MAAT,CAAgBtiB,KAHb;CAIXgiB,QAAAA,QAAQ,EAAE,KAAKnjB,GAAL,CAASmjB,QAAT,CAAkBhiB,KAJjB;CAKXoiB,QAAAA,MAAM,EAAE,KAAKvjB,GAAL,CAASujB,MAAT,CAAgBpiB,KALb;CAMXkjB,QAAAA,YAAY,EAAE,KAAKrkB,GAAL,CAASwkB,MAAT,GAAkB,KAAKxkB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAlC,GAA0C,KAAKA,KAAL,CAAWkjB,YAAX,IAA2B,KAAKljB,KAAL,CAAWmjB,YAAtC,IAAsD,IANnG;CAOXC,QAAAA,UAAU,EAAE,KAAKvkB,GAAL,CAASykB,IAAT,GAAgB,KAAKzkB,GAAL,CAASykB,IAAT,CAActjB,KAA9B,GAAsC,KAAKA,KAAL,CAAWojB,UAAX,IAAyB,KAAKpjB,KAAL,CAAWmjB,YAApC,IAAoD;CAP3F,OAAZ;CAUAnjB,MAAAA,KAAK,CAAC+iB,IAAN,GAAaxiB,kBAAI,CAACuK,SAAL,CAAe9K,KAAK,CAACmc,QAArB,CAAb;;CACA,UAAIld,cAAI,CAACiB,MAAL,CAAYF,KAAK,CAAC+iB,IAAlB,CAAJ,EACA;CACC/iB,QAAAA,KAAK,CAACgjB,EAAN,GAAWziB,kBAAI,CAACuK,SAAL,CAAe9K,KAAK,CAACsiB,MAArB,CAAX;;CACA,YAAI,CAACrjB,cAAI,CAACiB,MAAL,CAAYF,KAAK,CAACgjB,EAAlB,CAAL,EACA;CACChjB,UAAAA,KAAK,CAACgjB,EAAN,GAAWhjB,KAAK,CAAC+iB,IAAjB;CACA;;CAED,YAAI/iB,KAAK,CAAC6iB,OAAV,EACA;CACC7iB,UAAAA,KAAK,CAAC+iB,IAAN,CAAWU,QAAX,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B;CACAzjB,UAAAA,KAAK,CAACgjB,EAAN,CAASS,QAAT,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAxB;CACA,SAJD,MAMA;CACC,cACCzB,QAAQ,GAAGzhB,kBAAI,CAACC,SAAL,CAAeR,KAAK,CAACgiB,QAArB,CADZ;CAAA,cAECI,MAAM,GAAG7hB,kBAAI,CAACC,SAAL,CAAeR,KAAK,CAACoiB,MAArB,KAAgCJ,QAF1C;;CAIA,cAAIA,QAAQ,IAAII,MAAhB,EACA;CACCpiB,YAAAA,KAAK,CAAC+iB,IAAN,CAAWU,QAAX,CAAoBzB,QAAQ,CAAC7hB,CAA7B,EAAgC6hB,QAAQ,CAAC3hB,CAAzC,EAA4C,CAA5C;CACAL,YAAAA,KAAK,CAACgjB,EAAN,CAASS,QAAT,CAAkBrB,MAAM,CAACjiB,CAAzB,EAA4BiiB,MAAM,CAAC/hB,CAAnC,EAAsC,CAAtC;CACA;CACD;CACD;;CAED,aAAOL,KAAP;CACA;CA5MF;CAAA;CAAA,wCA+MC;CAAA;;CACCoD,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASsd,QAApB,EAA8B,OAA9B,EAAuCkF,eAAe,CAACqC,iBAAvD;CACAtgB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASsd,QAApB,EAA8B,QAA9B,EAAwC,KAAKwH,oBAAL,CAA0BtgB,IAA1B,CAA+B,IAA/B,CAAxC;CAEAD,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASyjB,MAApB,EAA4B,OAA5B,EAAqCjB,eAAe,CAACqC,iBAArD;CACAtgB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASyjB,MAApB,EAA4B,QAA5B,EAAsC,KAAKsB,kBAAL,CAAwBvgB,IAAxB,CAA6B,IAA7B,CAAtC;CAEAD,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASgkB,OAApB,EAA6B,OAA7B,EAAsC,YAAM;CAC3C,QAAA,MAAI,CAACW,mBAAL;;CACA,QAAA,MAAI,CAACK,iBAAL;CACA,OAHD;;CAKA,UAAI,KAAKpC,cAAT,EACA;CACCre,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASkR,SAApB,EAA+B,OAA/B,EAAwC,KAAK+T,oBAAL,CAA0BzgB,IAA1B,CAA+B,IAA/B,CAAxC;CACA;;CAED,UAAIpE,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASklB,WAAxB,CAAJ,EACA;CACC3gB,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASklB,WAApB,EAAiC,QAAjC,EAA2C1kB,EAAE,CAACiP,QAAH,CAAY,YACvD;CACC;CACA,cAAI,KAAK0V,0BAAT,EACA;CACC,iBAAKnlB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAhB,GAAwB,KAAKnB,GAAL,CAASykB,IAAT,CAActjB,KAAd,GAAsB,KAAKnB,GAAL,CAASklB,WAAT,CAAqB/jB,KAAnE;CACA;CACD,SAP0C,EAOxC,IAPwC,CAA3C;CAQA;;CAED,UAAI,KAAKwhB,YAAT,EACA;CACC,YAAIviB,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASolB,QAAxB,CAAJ,EACA;CACC7gB,UAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASolB,QAApB,EAA8B,OAA9B,EAAuC,KAAKV,cAAL,CAAoBlgB,IAApB,CAAyB,IAAzB,CAAvC;CACA;;CAEDD,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASwkB,MAApB,EAA4B,QAA5B,EAAsC,YACtC;CACC,cAAI,KAAKa,aAAT,EACA;CACC,iBAAKrlB,GAAL,CAASykB,IAAT,CAActjB,KAAd,GAAsB,KAAKnB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAtC;CACA;;CACD,eAAKgkB,0BAAL,GAAkC,KAAlC;CACA,SAPqC,CAOpC3gB,IAPoC,CAO/B,IAP+B,CAAtC;CASAD,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASykB,IAApB,EAA0B,QAA1B,EAAoC,YACpC;CACC,eAAKY,aAAL,GAAqB,KAArB;CACA,eAAKF,0BAAL,GAAkC,KAAlC;CACA,SAJmC,CAIlC3gB,IAJkC,CAI7B,IAJ6B,CAApC;CAMA,aAAK6gB,aAAL,GAAqB,KAAKrlB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAhB,KAA0B,KAAKnB,GAAL,CAASykB,IAAT,CAActjB,KAA7D;CACA,aAAKgkB,0BAAL,GAAkC,KAAKE,aAAL,IAC9B,KAAKrlB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAhB,KAA0B,KAAKnB,GAAL,CAASykB,IAAT,CAActjB,KADV,IAE9B,KAAKnB,GAAL,CAASwkB,MAAT,CAAgBrjB,KAAhB,KAA0B,KAAKnB,GAAL,CAASklB,WAAT,CAAqB/jB,KAFnD;CAGA;CACD;CAvQF;CAAA;CAAA,2CAiSC;CACC,UACCgiB,QAAQ,GAAGzhB,kBAAI,CAACC,SAAL,CAAe,KAAK3B,GAAL,CAASmjB,QAAT,CAAkBhiB,KAAjC,CADZ;CAAA,UAECoiB,MAAM,GAAG7hB,kBAAI,CAACC,SAAL,CAAe,KAAK3B,GAAL,CAASujB,MAAT,CAAgBpiB,KAA/B,CAFV;CAAA,UAGCmc,QAAQ,GAAG5b,kBAAI,CAACuK,SAAL,CAAe,KAAKjM,GAAL,CAASsd,QAAT,CAAkBnc,KAAjC,CAHZ;CAAA,UAICsiB,MAAM,GAAG/hB,kBAAI,CAACuK,SAAL,CAAe,KAAKjM,GAAL,CAASyjB,MAAT,CAAgBtiB,KAA/B,CAJV;;CAMA,UAAI,KAAKijB,aAAT,EACA;CACC,YAAI,KAAKpkB,GAAL,CAASgkB,OAAT,CAAiB5G,OAAjB,IAA4B,KAAKgH,aAArC,EACA;CACC,eAAKA,aAAL,CAAmBQ,QAAnB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC;CACA,SAHD,MAKA;CACC,cAAItH,QAAQ,IAAI6F,QAAhB,EACA;CACC7F,YAAAA,QAAQ,CAACsH,QAAT,CAAkBzB,QAAQ,CAAC7hB,CAA3B,EAA8B6hB,QAAQ,CAAC3hB,CAAvC,EAA0C,CAA1C;CACA;;CAED,cAAIiiB,MAAM,IAAIF,MAAd,EACA;CACCE,YAAAA,MAAM,CAACmB,QAAP,CAAgBrB,MAAM,CAACjiB,CAAvB,EAA0BiiB,MAAM,CAAC/hB,CAAjC,EAAoC,CAApC;CACA;CACD;;CAED,YAAI8b,QAAQ,IAAI,KAAK8G,aAArB,EACA;CACCX,UAAAA,MAAM,GAAG,IAAInY,IAAJ,CAASgS,QAAQ,CAACgI,OAAT,MACb7B,MAAM,CAAC6B,OAAP,KAAmB,KAAKlB,aAAL,CAAmBkB,OAAnB,EAApB,IAAqD,OADvC,CAAT,CAAT;;CAGA,cAAI7B,MAAJ,EACA;CACC,iBAAKzjB,GAAL,CAASyjB,MAAT,CAAgBtiB,KAAhB,GAAwBO,kBAAI,CAACuiB,UAAL,CAAgBR,MAAhB,CAAxB;CACA;CACD;CACD;;CACD,WAAKW,aAAL,GAAqB9G,QAArB;CAEA,WAAK0H,iBAAL;CACA;CAzUF;CAAA;CAAA,2CA4UC;CACC,UACC7B,QAAQ,GAAGzhB,kBAAI,CAACC,SAAL,CAAe,KAAK3B,GAAL,CAASmjB,QAAT,CAAkBhiB,KAAjC,CADZ;CAAA,UAECoiB,MAAM,GAAG7hB,kBAAI,CAACC,SAAL,CAAe,KAAK3B,GAAL,CAASujB,MAAT,CAAgBpiB,KAA/B,CAFV;CAAA,UAGCmc,QAAQ,GAAG5b,kBAAI,CAACuK,SAAL,CAAe,KAAKjM,GAAL,CAASsd,QAAT,CAAkBnc,KAAjC,CAHZ;CAAA,UAICsiB,MAAM,GAAG/hB,kBAAI,CAACuK,SAAL,CAAe,KAAKjM,GAAL,CAASyjB,MAAT,CAAgBtiB,KAA/B,CAJV;;CAMA,UAAImc,QAAQ,IAAI6F,QAAhB,EACA;CACC7F,QAAAA,QAAQ,CAACsH,QAAT,CAAkBzB,QAAQ,CAAC7hB,CAA3B,EAA8B6hB,QAAQ,CAAC3hB,CAAvC,EAA0C,CAA1C;CACA;;CAED,UAAIiiB,MAAM,IAAIF,MAAd,EACA;CACCE,QAAAA,MAAM,CAACmB,QAAP,CAAgBrB,MAAM,CAACjiB,CAAvB,EAA0BiiB,MAAM,CAAC/hB,CAAjC,EAAoC,CAApC;CACA;;CAED,UAAI,KAAK4iB,aAAT,EACA;CACC,YAAImB,SAAS,GAAG,IAAIja,IAAJ,CACf5J,kBAAI,CAAC8jB,cAAL,CAAoBlI,QAApB,IACA5b,kBAAI,CAAC8jB,cAAL,CAAoB/B,MAApB,CADA,GAEE/hB,kBAAI,CAAC8jB,cAAL,CAAoB,KAAKpB,aAAzB,CAHa,CAAhB;CAKA,aAAKpkB,GAAL,CAASujB,MAAT,CAAgBpiB,KAAhB,GAAwBO,kBAAI,CAACS,UAAL,CAAgBojB,SAAhB,CAAxB;CACA,aAAKvlB,GAAL,CAASyjB,MAAT,CAAgBtiB,KAAhB,GAAwBO,kBAAI,CAACuiB,UAAL,CAAgBsB,SAAhB,CAAxB;CACA;;CAED,WAAKnB,aAAL,GAAqB9G,QAArB;CACA,WAAK0H,iBAAL;CACA;CA1WF;CAAA;CAAA,yCA6WC;CACC,WAAKA,iBAAL;CACA;CA/WF;CAAA;CAAA,yCAkXC;CACC,WAAKA,iBAAL;CACA;CApXF;CAAA;CAAA,0CAuXC;CACC,UAAIhB,OAAO,GAAG,KAAKyB,eAAL,EAAd;;CAEA,UAAIzB,OAAJ,EACA;CACC,YAAI5jB,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAAS0lB,YAAxB,CAAJ,EACA;CACC5hB,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAAS0lB,YAAtB,EAAoC,0CAApC;CACA;;CAED,YAAItlB,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASkR,SAAxB,CAAJ,EACA;CACCpN,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,0CAAjC;CACA;CACD,OAXD,MAaA;CACC,YAAI9Q,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAAS0lB,YAAxB,CAAJ,EACA;CACC5hB,UAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAAS0lB,YAAzB,EAAuC,0CAAvC;CACA;;CACD,YAAItlB,cAAI,CAACkE,SAAL,CAAe,KAAKtE,GAAL,CAASkR,SAAxB,CAAJ,EACA;CACCpN,UAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASkR,SAAzB,EAAoC,0CAApC;CACA;CACD;CACD;CAjZF;CAAA;CAAA,wCAoZC;CACC,WAAKjI,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,QAAAA,IAAI,EAAE;CAAChI,UAAAA,KAAK,EAAE,KAAKwkB,QAAL;CAAR;CAAP,OAAd,CAAtB;CACA;CAtZF;CAAA;CAAA,sCAyZC;CACC,aAAO,CAAC,CAAC,KAAK3lB,GAAL,CAASgkB,OAAT,CAAiB5G,OAA1B;CACA;CA3ZF;CAAA;CAAA,mCA6ZgBuF,YA7ZhB,EA8ZC;CACC,UAAI,CAACviB,cAAI,CAACwlB,SAAL,CAAejD,YAAf,CAAL,EACA;CACCA,QAAAA,YAAY,GAAGniB,EAAE,CAACqlB,QAAH,CAAY,KAAK7lB,GAAL,CAAS8lB,MAArB,EAA6B,oCAA7B,CAAf;CACA;;CAED,UAAInD,YAAJ,EACA;CACC7e,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAAS8lB,MAAtB,EAA8B,kCAA9B;CACAhiB,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAAS8lB,MAAzB,EAAiC,oCAAjC;CACA,OAJD,MAMA;CACChiB,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAAS8lB,MAAtB,EAA8B,oCAA9B;CACAhiB,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAAS8lB,MAAzB,EAAiC,kCAAjC;CACA;CACD;CA9aF;CAAA;CAAA,2CAibC;CACC,UAAI,CAAC,KAAKviB,QAAV,EACA;CACC,aAAKwiB,iBAAL,CAAuB,MAAvB;CACA;CACD;CAtbF;CAAA;CAAA,gCAwbaxiB,QAxbb,EAybC;CACC,WAAKA,QAAL,GAAgBA,QAAhB;;CACA,UAAI,KAAKA,QAAL,IAAiB,KAAKsf,qBAAL,KAA+B,MAApD,EACA;CACC,aAAKkD,iBAAL,CAAuB,MAAvB;CACA;CACD;CA/bF;CAAA;CAAA,sCAicmBlD,qBAjcnB,EAkcC;CACC,UAAI,KAAKD,cAAT,EACA;CACC,aAAKC,qBAAL,GAA6BA,qBAA7B;;CACA,YAAI,KAAKA,qBAAL,KAA+B,MAAnC,EACA;CACC/e,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,oCAAjC;CACApN,UAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASkR,SAAzB,EAAoC,oCAApC;CACA,SAJD,MAMA;CACCpN,UAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASkR,SAAzB,EAAoC,oCAApC;CACApN,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,oCAAjC;CACA;CACD;CACD;CAjdF;CAAA;CAAA,sCAyQ0BrJ,CAzQ1B,EA0QC;CACC,UAAMjH,MAAM,GAAG,IAAf;CACA,UAAI2I,MAAM,GAAG1B,CAAC,CAAC0B,MAAF,IAAY1B,CAAC,CAAC2B,UAA3B;;CACA,UAAIpJ,cAAI,CAACkE,SAAL,CAAeiF,MAAf,KAA0BA,MAAM,CAACsD,QAAP,CAAgBC,WAAhB,OAAkC,OAAhE,EACA;CACCtM,QAAAA,EAAE,CAACuK,QAAH,CAAY;CAACI,UAAAA,IAAI,EAAE5B,MAAM,CAACwD,UAAd;CAA0BxB,UAAAA,KAAK,EAAEhC,MAAjC;CAAyCiC,UAAAA,KAAK,EAAE;CAAhD,SAAZ;CACAhL,QAAAA,EAAE,CAACwM,aAAH,CAAiBC,MAAjB,EAAyB,kCAAzB;;CAEA,YAAIzM,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,GAAkBgF,KAAtB,EACA;CACCjK,UAAAA,EAAE,CAAC0M,iBAAH,CAAqB1M,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,GAAkBgF,KAAvC,EAA8C,cAA9C,EAA8D+X,eAAe,CAACrV,8BAA9E;CACA3M,UAAAA,EAAE,CAAC4M,cAAH,CAAkB5M,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,GAAkBgF,KAApC,EAA2C,cAA3C,EAA2D+X,eAAe,CAACrV,8BAA3E;CACA3M,UAAAA,EAAE,CAACuK,QAAH,CAAYtF,GAAZ,GAAkBgF,KAAlB,CAAwBkB,cAAxB,CAAuCO,KAAvC,CAA6CtL,MAA7C,GAAsDA,MAAtD;CACA;CACD;CACD;CAzRF;CAAA;CAAA,mDA2RuCiH,CA3RvC,EA4RC;CACCrH,MAAAA,EAAE,CAACwM,aAAH,CAAiBC,MAAjB,EAAyB,mCAAzB;CACA;CA9RF;CAAA;CAAA,EAAqC5F,6BAArC;;KCHa2e,eAAb;CAAA;;CAGC,6BACA;CAAA;;CAAA;CACC;CADD,kFAFM,EAEN;;CAEC,UAAKhjB,iBAAL,CAAuB,0CAAvB;;CACA,UAAKpC,MAAL,GAAc,IAAd;CACA,UAAKsC,EAAL,GAAU,2BAA2BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAArC;CAJD;CAKC;;CATF;CAAA;CAAA,2BAYC;CAAA;;CAAA,UADKrD,MACL,uEADc,EACd;CACC,WAAKkmB,MAAL,GAAclmB,MAAM,CAACsV,KAAP,CAAa3S,MAAb,GAAsB,CAApC;CAEA,UAAID,CAAJ;CAAA,UAAOyjB,SAAS,GAAG,EAAnB;;CACA,WAAKzjB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG1C,MAAM,CAACsV,KAAP,CAAa3S,MAA7B,EAAqCD,CAAC,EAAtC,EACA;CACCyjB,QAAAA,SAAS,CAACrjB,IAAV,CAAe9C,MAAM,CAACsV,KAAP,CAAa5S,CAAb,EAAgB0jB,YAA/B;CACA;;CACDD,MAAAA,SAAS,GAAGA,SAAS,CAACE,IAAV,CAAe,IAAf,CAAZ;CAEA,UAAIxV,OAAO,GAAGpQ,EAAE,CAACF,MAAH,CAAU,KAAV,EAAiB;CAC9BqI,QAAAA,KAAK,EAAE;CAACC,UAAAA,SAAS,EAAE;CAAZ,SADuB;CAE9ByI,QAAAA,IAAI,EAAE,8CACH7Q,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyB,KAAKiX,MAAL,GAC1B7hB,aAAG,CAACC,UAAJ,CAAe,sBAAf,EAAuC6B,OAAvC,CAA+C,aAA/C,EAA8DggB,SAA9D,CAD0B,GAG1B9hB,aAAG,CAACC,UAAJ,CAAe,sBAAf,EAAuC6B,OAAvC,CAA+C,aAA/C,EAA8DnG,MAAM,CAACsV,KAAP,CAAa,CAAb,EAAgB8Q,YAA9E,CAHC,CADG,GAKH;CAP2B,OAAjB,CAAd;CAUA,WAAKlH,MAAL,GAAc,IAAIze,EAAE,CAACuP,WAAP,CAAmB,KAAK7M,EAAxB,EAA4B,IAA5B,EAAkC;CAC/C8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADsC;CAE/CnJ,QAAAA,QAAQ,EAAE,IAFqC;CAG/CD,QAAAA,UAAU,EAAG,IAHkC;CAI/CjG,QAAAA,MAAM,EAAE,KAAKA,MAJkC;CAK/CoG,QAAAA,UAAU,EAAE,CALmC;CAM/CD,QAAAA,SAAS,EAAE,CANoC;CAO/CmJ,QAAAA,SAAS,EAAE,IAPoC;CAQ/CC,QAAAA,YAAY,EAAE,KARiC;CAS/CC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,qBAAf,CATqC;CAU/CgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAVoC;CAW/C3H,QAAAA,SAAS,EAAE,kBAXoC;CAY/C;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACAgI,QAAAA,OAAO,EAAEA,OA5BsC;CA6B/C9H,QAAAA,MAAM,EAAE;CA7BuC,OAAlC,CAAd;CAgCA8H,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,yBAAf,CADsC;CAE5CyE,QAAAA,MAAM,EAAE;CAACC,UAAAA,KAAK,EAAG,iBAAM;CAAC,YAAA,MAAI,CAACpC,KAAL;CAAc;CAA9B;CAFoC,OAAzB,EAGjBsb,UAHH;CAKArR,MAAAA,OAAO,CAAC3M,WAAR,CAAoB,IAAIzD,EAAE,CAACiQ,iBAAP,CAAyB;CAC5CxK,QAAAA,IAAI,EAAE,KAAKggB,MAAL,GAAc7hB,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAAd,GAA+DD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CADzB;CAE5CyE,QAAAA,MAAM,EAAE;CAACC,UAAAA,KAAK,EAAG,iBAAM;CACtB,YAAA,MAAI,CAACE,IAAL,CAAU,eAAV;;CACA,YAAA,MAAI,CAACtC,KAAL;CACA;CAHO;CAFoC,OAAzB,EAMjBsb,UANH;CAQA,WAAKhD,MAAL,CAAYxX,IAAZ;CACA;CA9EF;CAAA;CAAA,4BAiFC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CAtFF;CAAA;CAAA,EAAqCU,6BAArC;;;;;;;;;;;;;;;;;;;;;KCIagf,mBAAb;CAAA;;CAI4B;CACS;CASpC,iCACA;CAAA;;CAAA,QADYtmB,MACZ,uEADqB,EACrB;CAAA;CACC;CADD,qFARS,IAQT;CAAA,2FAPe,IAOf;CAAA,iGANqB,IAMrB;CAAA,iGALqB,IAKrB;CAAA,kGAJsB,EAItB;CAAA,6FAHiBsmB,mBAAmB,CAACC,SAGrC;;CAEC,UAAKtjB,iBAAL,CAAuB,0CAAvB;;CACA,UAAKujB,UAAL,GAAkBxmB,MAAM,CAACmD,EAAP,IAAa,mBAAmBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAAlD;CACA,UAAK5C,EAAL,GAAUkB,kBAAI,CAACsf,KAAL,EAAV;CACA,UAAKhhB,GAAL,GAAW;CACVkR,MAAAA,SAAS,EAAEnR,MAAM,CAACmR,SADR;CAEVjR,MAAAA,IAAI,EAAEF,MAAM,CAACE,IAFH;CAGVumB,MAAAA,UAAU,EAAEzmB,MAAM,CAACymB,UAHT;CAIVC,MAAAA,QAAQ,EAAE1mB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,wBAA/B,CAJA;CAKVoc,MAAAA,UAAU,EAAE3mB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,+BAA/B,CALF;CAMVqc,MAAAA,cAAc,EAAE5mB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,2BAA/B,CANN;CAOVsc,MAAAA,aAAa,EAAE7mB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,0BAA/B,CAPL;CAQVuc,MAAAA,gBAAgB,EAAE9mB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,8BAA/B,CARR;CASVwc,MAAAA,gBAAgB,EAAE/mB,MAAM,CAAC+mB,gBATf;CAUVC,MAAAA,QAAQ,EAAEhnB,MAAM,CAACmR,SAAP,CAAiB5G,aAAjB,CAA+B,4BAA/B;CAVA,KAAX;CAYA,UAAK0c,cAAL,GAAsBC,iBAAO,CAACC,QAAR,CAAiB,MAAKC,mBAAtB,EAA2C,GAA3C,4CAAtB;;CAEA,QAAI/mB,cAAI,CAACwlB,SAAL,CAAe7lB,MAAM,CAACqnB,YAAtB,CAAJ,EACA;CACC,YAAKA,YAAL,GAAoBrnB,MAAM,CAACqnB,YAA3B;CACA;;CAED,UAAKC,MAAL,GAActnB,MAAM,CAACsnB,MAArB;CACA,UAAKjhB,IAAL,GAAYrG,MAAM,CAACqG,IAAnB;CACA,UAAK6U,OAAL,GAAelb,MAAM,CAACkb,OAAtB;CACA,UAAKra,MAAL,GAAcb,MAAM,CAACa,MAAP,IAAiB,MAAKA,MAApC;;CAEA,UAAKN,MAAL;;CA7BD;CA8BC;;CA7CF;CAAA;CAAA,6BAgDC;CAAA;;CACC,UAAI,KAAKN,GAAL,CAAS0mB,UAAT,IAAuB,CAAC,KAAKY,UAAL,EAA5B,EACA;CACC/iB,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS0mB,UAApB,EAAgC,OAAhC,EAAyC,YAAM;CAC9C,cAAI,CAAC,MAAI,CAACa,kBAAV,EACA;CACC,YAAA,MAAI,CAACA,kBAAL,GAA0B,IAAIC,wBAAJ,CAAyB;CAClDC,cAAAA,UAAU,EAAE,MAAI,CAACznB,GAAL,CAAS0mB,UAD6B;CAElDgB,cAAAA,OAAO,EAAE,UAFyC;CAGlDC,cAAAA,gBAAgB,EAAE,MAAI,CAACC,yBAH2B;CAIlDC,cAAAA,YAAY,EAAE,IAJoC;CAKlDjnB,cAAAA,MAAM,EAAE,MAAI,CAACA,MAAL,GAAc,EAL4B;CAMlDkI,cAAAA,MAAM,EAAE;CACP,iCAAiB,MAAI,CAACgf,yBAAL,CAA+BtjB,IAA/B,CAAoC,MAApC,CADV;CAEP,mCAAmB,MAAI,CAACsjB,yBAAL,CAA+BtjB,IAA/B,CAAoC,MAApC;CAFZ,eAN0C;CAUlDujB,cAAAA,QAAQ,EAAE,CACT;CACC7kB,gBAAAA,EAAE,EAAE,MADL;CAECwf,gBAAAA,OAAO,EAAE;CACRsF,kBAAAA,eAAe,EAAE,IADT;CAERC,kBAAAA,UAAU,EAAE;CAFJ;CAFV,eADS,EAQT;CACC/kB,gBAAAA,EAAE,EAAE;CADL,eARS,EAWT;CACCA,gBAAAA,EAAE,EAAE,YADL;CAECwf,gBAAAA,OAAO,EAAE;CAACwF,kBAAAA,UAAU,EAAE;CAAb;CAFV,eAXS,EAeT;CACChlB,gBAAAA,EAAE,EAAE,WADL;CAECwf,gBAAAA,OAAO,EAAE;CAAE,+BAAa;CAAf;CAFV,eAfS,CAVwC;CA8BlDyF,cAAAA,gBAAgB,EAAE;CACjBC,gBAAAA,WAAW,EAAE;CACZlN,kBAAAA,KAAK,EAAE9W,aAAG,CAACC,UAAJ,CAAe,0BAAf,CADK;CAEZgkB,kBAAAA,QAAQ,EAAEjkB,aAAG,CAACC,UAAJ,CAAe,6BAAf,CAFE;CAGZ+U,kBAAAA,IAAI,EAAE,0CAHM;CAIZkP,kBAAAA,WAAW,EAAE,GAJD;CAKZC,kBAAAA,KAAK,EAAE;CALK;CADI;CA9BgC,aAAzB,CAA1B;CAwCA;;CACD,UAAA,MAAI,CAAChB,kBAAL,CAAwB9f,IAAxB;CACA,SA7CD;CA8CA;;CAED,UAAI,KAAKzH,GAAL,CAASymB,QAAb,EACA;CACCliB,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASymB,QAApB,EAA8B,OAA9B,EAAuC,KAAK+B,sBAAL,CAA4BhkB,IAA5B,CAAiC,IAAjC,CAAvC;CACA;;CAED,UAAI,KAAKxE,GAAL,CAAS+mB,QAAb,EACA;CACCxiB,QAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS+mB,QAApB,EAA8B,OAA9B,EAAuC,YAAI;CAAC,UAAA,MAAI,CAAC9d,IAAL,CAAU,YAAV;CAAyB,SAArE;CACA;;CAED,WAAKwf,OAAL,GAAe,IAAIC,wBAAJ,CAAY;CAC1BzoB,QAAAA,IAAI,EAAE,KAAKD,GAAL,CAAS8mB,gBADW;CAE1B9lB,QAAAA,QAAQ,EAAEqlB,mBAAmB,CAACsC,aAFJ;CAG1BtQ,QAAAA,KAAK,EAAEgO,mBAAmB,CAACsC,aAHD;CAI1BC,QAAAA,aAAa,EAAE;CAJW,OAAZ,CAAf;CAOArkB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAASwmB,UAApB,EAAgC,OAAhC,EAAyC,YAAM;CAC9C,QAAA,MAAI,CAACqC,cAAL,CAAoB,CAAC,MAAI,CAACC,kBAA1B;;CACA,QAAA,MAAI,CAAC7f,IAAL,CAAU,gBAAV;CACA,OAHD;CAKA,WAAKjJ,GAAL,CAAS2mB,cAAT,CAAwBnc,SAAxB,GAAoCmI,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAAZ,CAApC;CAEA,WAAKokB,OAAL,CAAanhB,SAAb,CAAuB,cAAvB,EAAuC,UAACqC,KAAD,EAAW;CAAC,QAAA,MAAI,CAACV,IAAL,CAAU,cAAV,EAA0BU,KAA1B;CAAkC,OAArF;CACA;CA5HF;CAAA;CAAA,mCA+HC;CAAA;;CAAA,UADUof,mBACV,QADUA,mBACV;CAAA,UAD+BC,SAC/B,QAD+BA,SAC/B;CAAA,UAD0CnW,QAC1C,QAD0CA,QAC1C;CAAA,UADoDoW,MACpD,QADoDA,MACpD;CAAA,UAD4D1lB,QAC5D,QAD4DA,QAC5D;CAAA,UADsE2lB,OACtE,QADsEA,OACtE;CACC,WAAKH,mBAAL,GAA2B3oB,cAAI,CAACiF,OAAL,CAAa0jB,mBAAb,IAAoCA,mBAApC,GAA0D,EAArF;CACA,WAAKnB,yBAAL,GAAiC,KAAKmB,mBAAL,CAAyBI,GAAzB,CAA6B,UAACvjB,IAAD,EAAU;CAAC,eAAO,CAACA,IAAI,CAACwjB,QAAN,EAAgBxjB,IAAI,CAAC1C,EAArB,CAAP;CAAgC,OAAxE,CAAjC;CAEA,WAAKgmB,OAAL,GAAeA,OAAf;;CACA,UAAI,KAAKH,mBAAL,CAAyBrmB,MAAzB,GAAkC,CAAlC,IAAuC,CAACa,QAA5C,EACA;CACC,aAAK8lB,WAAL;CACA;;CAED,UAAI,KAAKrpB,GAAL,CAAS+mB,QAAb,EACA;CACC,aAAK/mB,GAAL,CAAS+mB,QAAT,CAAkB7a,KAAlB,CAAwBC,OAAxB,GAAkC,MAAlC;CACA;;CAED,WAAKmd,aAAL,CAAmB,KAAKP,mBAAxB;CACA,WAAKF,cAAL,CAAoBI,MAApB;CACA,WAAKM,gBAAL,CAAsB1W,QAAtB;;CAEA,UAAIzS,cAAI,CAACiF,OAAL,CAAa2jB,SAAb,CAAJ,EACA;CACC,aAAKQ,gBAAL,CAAsBR,SAAtB;;CAEA,YAAI/b,MAAM,CAAC4F,QAAP,CAAgB4W,IAAhB,KAAyB,cAAzB,IACA,KAAKzpB,GAAL,CAAS+mB,QADT,IAEAxjB,QAFA,IAGAylB,SAAS,CAACtmB,MAAV,GAAmB,CAHnB,IAIAsmB,SAAS,CAACpN,IAAV,CAAe,UAAC8N,IAAD,EAAQ;CAAC,iBAAOA,IAAI,CAACC,MAAL,KAAgB,GAAhB,IAAuBtnB,QAAQ,CAACqnB,IAAI,CAAC3a,EAAN,CAAR,KAAsB1M,QAAQ,CAAC,MAAI,CAACglB,MAAN,CAA5D;CAA2E,SAAnG,CAJJ,EAMA;CACC,eAAKrnB,GAAL,CAAS+mB,QAAT,CAAkB7a,KAAlB,CAAwBC,OAAxB,GAAkC,EAAlC;CACA;CACD;;CACD,WAAK6a,cAAL;CACA;CAjKF;CAAA;CAAA,gDAoKC;CACC,WAAKqC,WAAL;CACA,WAAKC,aAAL,CAAmB,KAAK/B,kBAAL,CAAwBqC,gBAAxB,GAA2CT,GAA3C,CAA+C,UAACvjB,IAAD,EAAU;CAC3E,eAAO;CACNwjB,UAAAA,QAAQ,EAAExjB,IAAI,CAACwjB,QADT;CAENlmB,UAAAA,EAAE,EAAE0C,IAAI,CAAC1C,EAFH;CAGN2mB,UAAAA,UAAU,EAAEjkB,IAAI,CAACikB;CAHX,SAAP;CAIE,OALgB,CAAnB;CAOA,WAAK7C,cAAL;CACA,WAAK/d,IAAL,CAAU,mBAAV;CACA;CA/KF;CAAA;CAAA,oCAkLC;CACC,aAAO,KAAK6gB,kBAAZ;CACA;CApLF;CAAA;CAAA,kCAsLeA,kBAtLf,EAuLC;CACC,UAAI,KAAK1jB,IAAL,KAAc,MAAd,IAAwB,KAAKihB,MAAL,KAAgB,KAAKpM,OAAjD,EACA;CACC6O,QAAAA,kBAAkB,CAACjnB,IAAnB,CAAwB;CAACumB,UAAAA,QAAQ,EAAE,MAAX;CAAmBlmB,UAAAA,EAAE,EAAE,KAAK+X;CAA5B,SAAxB;CACA,OAHD,MAKA;CACC6O,QAAAA,kBAAkB,CAACjnB,IAAnB,CAAwB;CAACumB,UAAAA,QAAQ,EAAE,MAAX;CAAmBlmB,UAAAA,EAAE,EAAE,KAAKmkB;CAA5B,SAAxB;CACA;;CAED,WAAKyC,kBAAL,GAA0BA,kBAA1B;CACA;CAlMF;CAAA;CAAA,iCAqMC;CACC,aAAO,KAAK1C,YAAZ;CACA;CAvMF;CAAA;CAAA,sCA0MC;CACC,aAAO5mB,EAAE,CAAC8gB,EAAH,CAAMyI,eAAN,CAAsBC,SAAtB,CAAgC,KAAKzD,UAArC,CAAP;CACA;CA5MF;CAAA;CAAA,6CA+MC;AAAA,CACC;CAhNF;CAAA;CAAA,6CAmNC;CAnND;CAAA;CAAA,6CAwNC;CAxND;CAAA;CAAA,kCA6NC;CACC,UAAI,CAAC,KAAK0D,kBAAL,EAAL,EACA;CACCnmB,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,yBAAjC;CACA,aAAKuX,OAAL,CAAahhB,IAAb;CACA,aAAKghB,OAAL,CAAayB,UAAb;CACA;CACD;CApOF;CAAA;CAAA,0CAuOC;CAAA;;CACC,UAAI,KAAKzB,OAAL,IAAgB,KAAKA,OAAL,CAAatP,OAAb,EAApB,EACA;CACC,YAAIgR,QAAQ,GAAG,KAAKC,WAAL,EAAf;CACA,aAAKC,eAAL,CAAqB;CACpBC,UAAAA,UAAU,EAAE,KAAKC,aAAL,EADQ;CAEpBrG,UAAAA,IAAI,EAAExiB,kBAAI,CAACuiB,UAAL,CAAgBkG,QAAQ,CAACjG,IAAT,CAAcoB,OAAd,KAA0B5jB,kBAAI,CAAC8oB,YAAL,KAAsB,CAAhE,CAFc;CAGpBrG,UAAAA,EAAE,EAAEziB,kBAAI,CAACuiB,UAAL,CAAgBkG,QAAQ,CAAChG,EAAT,CAAYmB,OAAZ,KAAwB5jB,kBAAI,CAAC8oB,YAAL,KAAsB,EAA9D,CAHgB;CAIpBC,UAAAA,QAAQ,EAAEN,QAAQ,CAAC9F,YAJC;CAKpBxR,UAAAA,QAAQ,EAAE,KAAK6X,gBAAL,EALU;CAMpBxB,UAAAA,OAAO,EAAE,KAAKA;CANM,SAArB,EAQE/W,IARF,CAQO,UAACC,QAAD,EAAc;CACnB,UAAA,MAAI,CAACoX,gBAAL,CACC,CAACpX,QAAQ,CAACjJ,IAAT,CAAcwhB,OAAd,IAAyB,EAA1B,EACE/P,MADF,CACS,UAAChV,IAAD,EAAQ;CAAC,mBAAOA,IAAI,CAACQ,IAAL,KAAc,MAArB;CAA4B,WAD9C,EAEE+iB,GAFF,CAEM,UAACvjB,IAAD,EAAQ;CAAC,mBAAM;CACnBmJ,cAAAA,EAAE,EAAEnJ,IAAI,CAAC1C,EADU;CAEnB0nB,cAAAA,MAAM,EAAEhlB,IAAI,CAACilB,MAFM;CAGnB1E,cAAAA,YAAY,EAAEvgB,IAAI,CAAC0I,IAHA;CAInBwc,cAAAA,UAAU,EAAEllB,IAAI,CAACmlB,SAJE;CAKnBpB,cAAAA,MAAM,EAAE,CAAC/jB,IAAI,CAACsb,MAAL,IAAe,EAAhB,EAAoB7D,WAApB,EALW;CAMnB2N,cAAAA,GAAG,EAAEplB,IAAI,CAACqlB;CANS,aAAN;CAOZ,WATH,CADD;CAYA,SArBF;CAsBA;CACD;CAlQF;CAAA;CAAA,sCAqQC;CAAA;;CAAA,UADgBlrB,MAChB,uEADyB,EACzB;CACC,WAAK0oB,OAAL,CAAayB,UAAb;CACA,aAAO,IAAIgB,OAAJ,CAAY,UAACC,OAAD,EAAa;CAC/B,QAAA,MAAI,CAAC3qB,EAAL,CAAQyR,IAAR,CAAaC,SAAb,CAAuB,yCAAvB,EAAkE;CACjE/I,UAAAA,IAAI,EAAE;CACL+f,YAAAA,OAAO,EAAEnpB,MAAM,CAACmpB,OAAP,IAAkB,CADtB;CAELjO,YAAAA,OAAO,EAAE,MAAI,CAACA,OAFT;CAGL7U,YAAAA,IAAI,EAAE,MAAI,CAACA,IAHN;CAILkkB,YAAAA,UAAU,EAAEvqB,MAAM,CAACuqB,UAAP,IAAqB,EAJ5B;CAKLc,YAAAA,QAAQ,EAAErrB,MAAM,CAACmkB,IAAP,IAAe,EALpB;CAMLmH,YAAAA,MAAM,EAAEtrB,MAAM,CAACokB,EAAP,IAAa,EANhB;CAOLsG,YAAAA,QAAQ,EAAE1qB,MAAM,CAAC0qB,QAAP,IAAmB,EAPxB;CAQL5X,YAAAA,QAAQ,EAAE9S,MAAM,CAAC8S,QAAP,IAAmB,EARxB;CASL8X,YAAAA,OAAO,EAAE5qB,MAAM,CAACurB,SAAP,IAAoB;CATxB;CAD2D,SAAlE,EAaEnZ,IAbF,CAaO,UAACC,QAAD,EAAc;CAClB,UAAA,MAAI,CAACqW,OAAL,CAAa8C,UAAb;;CACA,cAAIpB,QAAQ,GAAG,MAAI,CAACC,WAAL,EAAf;;CACA,UAAA,MAAI,CAAC3B,OAAL,CAAa+C,MAAb,CACCpZ,QAAQ,CAACjJ,IAAT,CAAcwhB,OADf,EAECvY,QAAQ,CAACjJ,IAAT,CAAcsiB,aAFf;;CAIA,UAAA,MAAI,CAAChD,OAAL,CAAaiD,cAAb,CAA4BvB,QAAQ,CAACjG,IAArC,EAA2CiG,QAAQ,CAAChG,EAApD,EAAwDgG,QAAQ,CAACnG,OAAjE;;CAEAmH,UAAAA,OAAO,CAAC/Y,QAAD,CAAP;CACA,SAvBH,EAwBE,UAACA,QAAD,EAAc;CAAC+Y,UAAAA,OAAO,CAAC/Y,QAAD,CAAP;CAAmB,SAxBpC;CA2BA,OA5BM,CAAP;CA6BA;CApSF;CAAA;CAAA,gCAsSa+X,QAtSb,EAuSC;CAAA,UADsBwB,YACtB,uEADqC,KACrC;CACC,WAAKxB,QAAL,GAAgBA,QAAhB;;CAEA,UAAI,KAAK1B,OAAL,IAAgBkD,YAApB,EACA;CACC,aAAKlD,OAAL,CAAaiD,cAAb,CAA4BvB,QAAQ,CAACjG,IAArC,EAA2CiG,QAAQ,CAAChG,EAApD,EAAwDgG,QAAQ,CAACnG,OAAjE;CACA;CACD;CA9SF;CAAA;CAAA,kCAiTC;CACC,aAAO,KAAKmG,QAAZ;CACA;CAnTF;CAAA;CAAA,qCAqTkBtX,QArTlB,EAsTC;CACC,WAAKA,QAAL,GAAgBA,QAAhB;CACA;CAxTF;CAAA;CAAA,uCA2TC;CACC,aAAO,KAAKA,QAAZ;CACA;CA7TF;CAAA;CAAA,uCAgUC;CAAA,UADiBmW,SACjB,uEAD6B,EAC7B;CACCllB,MAAAA,aAAG,CAACyG,KAAJ,CAAU,KAAKvK,GAAL,CAAS4mB,aAAnB;CACA,WAAKgF,YAAL,GAAoB;CACnBC,QAAAA,QAAQ,EAAG7C,SAAS,CAACpO,MAAV,CAAiB,UAAC8O,IAAD,EAAU;CAAC,iBAAO,CAAC,GAAD,EAAM,GAAN,EAAWthB,QAAX,CAAoBshB,IAAI,CAACC,MAAzB,CAAP;CAAyC,SAArE,CADQ;CAEnBmC,QAAAA,SAAS,EAAG9C,SAAS,CAACpO,MAAV,CAAiB,UAAC8O,IAAD,EAAU;CAAC,iBAAOA,IAAI,CAACC,MAAL,KAAgB,GAAhB,IAAuBD,IAAI,CAACC,MAAL,KAAgB,EAA9C;CAAiD,SAA7E,CAFO;CAGnBoC,QAAAA,QAAQ,EAAG/C,SAAS,CAACpO,MAAV,CAAiB,UAAC8O,IAAD,EAAU;CAAC,iBAAOA,IAAI,CAACC,MAAL,KAAgB,GAAvB;CAA2B,SAAvD;CAHQ,OAApB;CAMA,UAAIqC,UAAU,GAAG,KAAKJ,YAAL,CAAkBC,QAAlB,CAA2BnpB,MAA5C;;CACA,UAAIspB,UAAU,GAAG,CAAjB,EACA;CACC,YAAIA,UAAU,GAAG3F,mBAAmB,CAAC4F,sBAArC,EACA;CACCD,UAAAA,UAAU,GAAG3F,mBAAmB,CAAC6F,cAAjC;CACA;;CAED,aAAK,IAAIzpB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGupB,UAApB,EAAgCvpB,CAAC,EAAjC,EACA;CACC,eAAKmpB,YAAL,CAAkBC,QAAlB,CAA2BppB,CAA3B,EAA8B+b,KAA9B,GAAsC,IAAtC;CACA,eAAKxe,GAAL,CAAS4mB,aAAT,CAAuB3iB,WAAvB,CAAmCoiB,mBAAmB,CAAC8F,iBAApB,CAAsC,KAAKP,YAAL,CAAkBC,QAAlB,CAA2BppB,CAA3B,CAAtC,CAAnC;CACA;CACD;;CAED,UAAIupB,UAAU,GAAG,CAAjB,EACA;CACC,aAAKhsB,GAAL,CAAS2mB,cAAT,CAAwBnc,SAAxB,GAAoCmI,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAAZ,EAAsD6B,OAAtD,CAA8D,SAA9D,0BAA0F,KAAK0lB,YAAL,CAAkBC,QAAlB,CAA2BnpB,MAArH,oBAApC;CACA,OAHD,MAKA;CACC,aAAK1C,GAAL,CAAS2mB,cAAT,CAAwBnc,SAAxB,GAAoCmI,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAAZ,CAApC;CACA;;CAED,UAAI2nB,UAAU,GAAGhD,SAAS,CAACtmB,MAA3B,EACA;CACC,YAAIspB,UAAU,KAAK,CAAnB,EACA;CACC,eAAKhsB,GAAL,CAASymB,QAAT,CAAkBjc,SAAlB,GAA8BmI,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,wBAAf,EAAyC6B,OAAzC,CAAiD,SAAjD,EAA4D8iB,SAAS,CAACtmB,MAAtE,CAAZ,CAA9B;CACA,SAHD,MAKA;CACC,eAAK1C,GAAL,CAASymB,QAAT,CAAkBjc,SAAlB,GAA8BmI,cAAI,CAACC,MAAL,CAAYxO,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAAZ,CAA9B;CACA;;CACDP,QAAAA,aAAG,CAAC2D,IAAJ,CAAS,KAAKzH,GAAL,CAASymB,QAAlB;CACA,OAXD,MAaA;CACC3iB,QAAAA,aAAG,CAACsoB,IAAJ,CAAS,KAAKpsB,GAAL,CAASymB,QAAlB;CACA;CACD;CAhXF;CAAA;CAAA,6CAyYC;CAAA;;CACC,UAAI,KAAK4F,SAAT,EACA;CACC,aAAKA,SAAL,CAAevgB,OAAf;CACA;;CAED,UAAMwO,YAAY,GAAG,oFAArB;CACA,UAAM3U,SAAS,GAAG,EAAlB;CAEA,OACC;CACC8R,QAAAA,IAAI,EAAE,UADP;CACmB;CAClByD,QAAAA,KAAK,EAAE9W,aAAG,CAACC,UAAJ,CAAe,oBAAf;CAFR,OADD,EAKC;CACCoT,QAAAA,IAAI,EAAE,WADP;CACoB;CACnByD,QAAAA,KAAK,EAAE9W,aAAG,CAACC,UAAJ,CAAe,oBAAf;CAFR,OALD,EASC;CACCoT,QAAAA,IAAI,EAAE,UADP;CACmB;CAClByD,QAAAA,KAAK,EAAE9W,aAAG,CAACC,UAAJ,CAAe,oBAAf;CAFR,OATD,EAaEiB,OAbF,CAaU,UAACgnB,KAAD,EAAW;CACpB,YAAIC,UAAU,GAAG,MAAI,CAACX,YAAL,CAAkBU,KAAK,CAAC7U,IAAxB,CAAjB;;CACA,YAAI8U,UAAU,CAAC7pB,MAAX,GAAoB,CAAxB,EACA;CACCiD,UAAAA,SAAS,CAAC9C,IAAV,CAAe;CACdoD,YAAAA,IAAI,EAAE,WAAWqmB,KAAK,CAACpR,KAAN,CAAYhV,OAAZ,CAAoB,SAApB,EAA+BqmB,UAAU,CAAC7pB,MAA1C,CAAX,GAA+D,SADvD;CAEdkG,YAAAA,SAAS,EAAE0R;CAFG,WAAf;CAKAiS,UAAAA,UAAU,CAACjnB,OAAX,CAAmB,UAACokB,IAAD,EAAU;CAC5B/jB,YAAAA,SAAS,CAAC9C,IAAV,CACC;CACCoD,cAAAA,IAAI,EAAEzF,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyB0a,IAAI,CAACvD,YAA9B,CADP;CAECphB,cAAAA,OAAO,EAAE;CAAC2kB,gBAAAA,IAAI,EAAEA;CAAP,eAFV;CAGC9gB,cAAAA,SAAS,EAAE,mCAHZ;CAICrC,cAAAA,OAAO,EAAE,mBAAM;CACd/F,gBAAAA,EAAE,CAACgsB,SAAH,CAAaC,QAAb,CAAsB9T,IAAtB,CACC+Q,IAAI,CAACsB,GADN,EAEC;CACC0B,kBAAAA,MAAM,EAAE,kBADT;CAECxlB,kBAAAA,SAAS,EAAE,KAFZ;CAGCylB,kBAAAA,kBAAkB,EAAE,KAHrB;CAICC,kBAAAA,gBAAgB,EAAE,iCAJnB;CAKCvU,kBAAAA,KAAK,EAAE;CALR,iBAFD;;CAUA,gBAAA,MAAI,CAACgU,SAAL,CAAe1lB,KAAf;CACA;CAhBF,aADD;CAoBA,WArBD;CAsBA;CACD,OA7CD;CA+CA,WAAK0lB,SAAL,GAAiBzlB,sBAAW,CAACtG,MAAZ,CAChB,iCAAiC0B,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,MAA3B,CADjB,EAEhB,KAAKpD,GAAL,CAASymB,QAFO,EAGhB9gB,SAHgB,EAIhB;CACCkB,QAAAA,UAAU,EAAG,IADd;CAECC,QAAAA,QAAQ,EAAG,IAFZ;CAGClG,QAAAA,MAAM,EAAE,KAAKA,MAHd;CAICmG,QAAAA,SAAS,EAAE,CAJZ;CAKCC,QAAAA,UAAU,EAAE,EALb;CAMCC,QAAAA,KAAK,EAAE,IANR;CAOCC,QAAAA,SAAS,EAAE,KAPZ;CAQC0B,QAAAA,SAAS,EAAE;CARZ,OAJgB,CAAjB;CAgBA,WAAKyjB,SAAL,CAAe5kB,IAAf;CACA,WAAK4kB,SAAL,CAAe1mB,SAAf,CAAyBL,OAAzB,CAAiC,UAACM,IAAD,EAAU;CAC1C,YAAMwT,IAAI,GAAGxT,IAAI,CAACuE,MAAL,CAAYvE,IAAZ,CAAiB0E,aAAjB,CAA+B,uBAA/B,CAAb;;CACA,YAAIlK,cAAI,CAAC+H,aAAL,CAAmBvC,IAAI,CAACb,OAAxB,CAAJ,EACA;CACCqU,UAAAA,IAAI,CAACnV,WAAL,CAAiBoiB,mBAAmB,CAAC8F,iBAApB,CAAsCvmB,IAAI,CAACb,OAAL,CAAa2kB,IAAnD,CAAjB;CACA;CACD,OAND;CAOA;CAzdF;CAAA;CAAA,mCA4dgBvoB,KA5dhB,EA6dC;CACC,UAAIf,cAAI,CAACwlB,SAAL,CAAezkB,KAAf,CAAJ,EACA;CACC,YAAM0rB,cAAc,GAAG,qCAAvB;CACA,aAAK/D,kBAAL,GAA0B3nB,KAA1B;;CACA,YAAI,KAAK2nB,kBAAT,EACA;CACChlB,UAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASwmB,UAAzB,EAAqCqG,cAArC;CACA,eAAK7sB,GAAL,CAASwmB,UAAT,CAAoBtL,KAApB,GAA4B9W,aAAG,CAACC,UAAJ,CAAe,2BAAf,CAA5B;CACA,SAJD,MAMA;CACCP,UAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASwmB,UAAtB,EAAkCqG,cAAlC;CACA,eAAK7sB,GAAL,CAASwmB,UAAT,CAAoBtL,KAApB,GAA4B9W,aAAG,CAACC,UAAJ,CAAe,4BAAf,CAA5B;CACA;CACD;CACD;CA7eF;CAAA;CAAA,mCA+egBlD,KA/ehB,EAgfC;CACC,aAAO,KAAK2nB,kBAAZ;CACA;CAlfF;CAAA;CAAA,gCAofa1B,YApfb,EAqfC;CACC,WAAKA,YAAL,GAAoBA,YAApB;;CACA,UAAI,KAAKA,YAAT,EACA;CACCtjB,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASkR,SAAtB,EAAiC,gCAAjC;CACA,OAHD,MAKA;CACCpN,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASkR,SAAzB,EAAoC,gCAApC;CACA;CACD;CA/fF;CAAA;CAAA,yCAkgBC;CACC,aAAO,KAAKuX,OAAL,CAAatP,OAAb,EAAP;CACA;CApgBF;CAAA;CAAA,4CAugBC;CACC,aAAO,CAAC,CAAC,KAAKoR,aAAL,GAAqB3O,IAArB,CAA0B,UAAChW,IAAD,EAAU;CAAC,eAAOA,IAAI,CAACikB,UAAL,KAAoB,OAA3B;CAAoC,OAAzE,CAAT;CACA;CAzgBF;CAAA;CAAA,sCA4gBC;CACC,UAAI,KAAKtC,kBAAT,EACA;CACC,aAAKA,kBAAL,CAAwBzb,OAAxB;CACC,aAAKyb,kBAAL,GAA0B,IAA1B;CACD;CACD;CAlhBF;CAAA;CAAA,sCAkX0BmC,IAlX1B,EAmXC;CACC,UACC3N,SADD;CAAA,UAEC+Q,GAAG,GAAGpD,IAAI,CAACkB,MAAL,IAAelB,IAAI,CAACqD,YAF3B;;CAGA,UAAI,CAACD,GAAD,IAAQA,GAAG,KAAK,sBAApB,EACA;CACC/Q,QAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,sBAA4BwO,cAAI,CAACC,MAAL,CAAY8W,IAAI,CAACvD,YAAjB,CAA5B,EAA+EuD,IAAI,CAACoB,UAAL,GAAkB,0BAAlB,GAA+C,qBAA9H,CAAT;CACA,OAHD,MAKA;CACC/O,QAAAA,SAAS,GAAG7X,aAAG,CAACC,MAAP,uBAECwO,cAAI,CAACC,MAAL,CAAY8W,IAAI,CAACvD,YAAjB,CAFD,EAIW9jB,QAAQ,CAACqnB,IAAI,CAAC3a,EAAN,CAJnB,EAKD+d,GALC,CAAT;CAOA;;CACD,aAAO/Q,SAAP;CACA;CAtYF;CAAA;CAAA,EAAyC1U,6BAAzC;6BAAagf,kCAEO;6BAFPA,kCAGO;6BAHPA,uCAIY;6BAJZA,+CAKoB;6BALpBA,sCAMW;;KCTX2G,kBAAb;CAAA;;CAGC,gCACA;CAAA;;CAAA;CACC;CADD,kFAFM,EAEN;;CAEC,UAAKhqB,iBAAL,CAAuB,yCAAvB;;CACA,UAAKpC,MAAL,GAAc,IAAd;CACA,UAAKsC,EAAL,GAAU,qBAAqBlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAA/B;CAJD;CAKC;;CATF;CAAA;CAAA,2BAYC;CAAA;;CACC,UAAMwN,OAAO,GAAG9M,aAAG,CAACxD,MAAJ,CAAW,KAAX,CAAhB;CACA,WAAK2e,MAAL,GAAc,IAAInV,gBAAJ,CAAU,KAAK5G,EAAf,EAAmB,IAAnB,EAAyB;CACtC8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SAD6B;CAEtCnJ,QAAAA,QAAQ,EAAE,IAF4B;CAGtCD,QAAAA,UAAU,EAAG,IAHyB;CAItCjG,QAAAA,MAAM,EAAE,KAAKA,MAJyB;CAKtCoG,QAAAA,UAAU,EAAE,CAL0B;CAMtCD,QAAAA,SAAS,EAAE,CAN2B;CAOtCmJ,QAAAA,SAAS,EAAE,IAP2B;CAQtCC,QAAAA,YAAY,EAAE,KARwB;CAStCC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,mBAAf,CAT4B;CAUtCgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAV2B;CAWtC3H,QAAAA,SAAS,EAAE,uBAX2B;CAYtCgI,QAAAA,OAAO,EAAEA,OAZ6B;CAatC9H,QAAAA,MAAM,EAAE,EAb8B;CActC5B,QAAAA,SAAS,EAAE;CAd2B,OAAzB,CAAd;CAiBA,UAAI1G,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,QAAAA,IAAI,EAAG7B,aAAG,CAACC,UAAJ,CAAe,iBAAf,CADS;CAEhBuE,QAAAA,SAAS,EAAE,uBAFK;CAGhBE,QAAAA,MAAM,EAAG;CAACC,UAAAA,KAAK,EAAG,iBAAM;CACtB,YAAA,MAAI,CAACE,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC8jB,gBAAAA,gBAAgB,EAAE;CAAnB;CAAP,aAAd,CAAtB;;CACA,YAAA,MAAI,CAACtmB,KAAL;CACA;CAHO;CAHO,OAAjB,EAOG8a,QAPH,CAOY7Q,OAPZ;CASA,UAAIpQ,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,QAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,gBAAf,CADU;CAEhBuE,QAAAA,SAAS,EAAE,4BAFK;CAGhBE,QAAAA,MAAM,EAAG;CAACC,UAAAA,KAAK,EAAG,iBAAM;CACtB,YAAA,MAAI,CAACE,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,cAAAA,IAAI,EAAE;CAAC8jB,gBAAAA,gBAAgB,EAAE;CAAnB;CAAP,aAAd,CAAtB;;CACA,YAAA,MAAI,CAACtmB,KAAL;CACA;CAHO;CAHO,OAAjB,EAOG8a,QAPH,CAOY7Q,OAPZ;CAQA,WAAKqO,MAAL,CAAYxX,IAAZ;CACA;CAjDF;CAAA;CAAA,4BAoDC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CAzDF;CAAA;CAAA,EAAwCU,6BAAxC;;;;;;;;;;;KCAa6lB,oBAAb;CAAA;;CAKC,gCAAYntB,MAAZ,EACA;CAAA;;CAAA;CACC;CADD,kFAJM,EAIN;CAAA,+FAHmB,gBAGnB;;CAEC,UAAKiD,iBAAL,CAAuB,2CAAvB;;CACA,UAAKhD,GAAL,CAAS2V,MAAT,GAAkB5V,MAAM,CAACotB,UAAzB;CACA,UAAKC,WAAL,GAAmBhtB,cAAI,CAACiF,OAAL,CAAatF,MAAM,CAACqtB,WAApB,IAAmCrtB,MAAM,CAACqtB,WAA1C,GAAwD,EAA3E;CACA,UAAKptB,GAAL,CAASqtB,aAAT,GAAyB,MAAKrtB,GAAL,CAAS2V,MAAT,CAAgB5I,UAAhB,CAA2B9I,WAA3B,CAAuCC,aAAG,CAACC,MAA3C,sBAAzB;CACA,UAAKmpB,gBAAL,GAAwBvtB,MAAM,CAACutB,gBAA/B;CACA,UAAKC,kBAAL,GAA0BtG,iBAAO,CAACC,QAAR,CAAiB,MAAKsG,UAAtB,EAAkC,EAAlC,4CAA1B;;CACA,UAAKltB,MAAL;;CARD;CASC;;CAfF;CAAA;CAAA,6BAkBC;CACC,WAAKmtB,eAAL;CACAlpB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS2V,MAApB,EAA4B,QAA5B,EAAsC,KAAK4X,kBAA3C;CACAhpB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS2V,MAApB,EAA4B,OAA5B,EAAqC,KAAK4X,kBAA1C;CACA;CAtBF;CAAA;CAAA,iCAyBC;CACC,UAAI,KAAKvtB,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,KAA0B,KAA9B,EACA;CACC,aAAKusB,OAAL;CACA,aAAK5rB,QAAL,CAAc,EAAd;CACA;CACD;CA/BF;CAAA;CAAA,+BAkCC;CACC,aAAO,KAAK9B,GAAL,CAAS2V,MAAT,CAAgBxU,KAAvB;CACA;CApCF;CAAA;CAAA,6BAsCUA,KAtCV,EAuCC;CACC,UAAI,KAAKisB,WAAL,CAAiB1qB,MAAjB,IACA,KAAK0qB,WAAL,CAAiBxR,IAAjB,CAAsB,UAAC+R,OAAD,EAAa;CAAC,eAAOA,OAAO,CAACC,KAAR,KAAkBzsB,KAAzB;CAA+B,OAAnE,CADJ,EAEA;CACC,aAAKnB,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,GAAwBA,KAAxB;CACA,OAJD,MAMA;CACC,aAAKnB,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,GAAwB,EAAxB;CACA;;CACD,WAAK8H,IAAL,CAAU,YAAV,EAAwB;CACvB9H,QAAAA,KAAK,EAAE,KAAKnB,GAAL,CAAS2V,MAAT,CAAgBxU;CADA,OAAxB;CAGA;CApDF;CAAA;CAAA,sCAuDC;CAAA;;CACC2C,MAAAA,aAAG,CAACyG,KAAJ,CAAU,KAAKvK,GAAL,CAAS2V,MAAnB;CACA,WAAK3V,GAAL,CAAS2V,MAAT,CAAgB+M,OAAhB,CAAwBmL,GAAxB,CAA4B,IAAIC,MAAJ,CAAW1pB,aAAG,CAACC,UAAJ,CAAe,aAAf,CAAX,EAA0C,EAA1C,CAA5B;;CACA,UAAI,KAAK+oB,WAAL,CAAiB1qB,MAArB,EACA;CACC,aAAK0qB,WAAL,CAAiB9nB,OAAjB,CAAyB,UAACnE,KAAD,EAAW;CACnC,UAAA,MAAI,CAACnB,GAAL,CAAS2V,MAAT,CAAgB+M,OAAhB,CAAwBmL,GAAxB,CAA4B,IAAIC,MAAJ,CAAW3sB,KAAK,CAAC4sB,SAAjB,EAA4B5sB,KAAK,CAACysB,KAAlC,CAA5B;CACA,SAFD,EAEG,IAFH;CAGA;;CAED,UAAI,KAAKN,gBAAT,EACA;CACC,aAAKttB,GAAL,CAAS2V,MAAT,CAAgB+M,OAAhB,CAAwBmL,GAAxB,CAA4B,IAAIC,MAAJ,CAAW1pB,aAAG,CAACC,UAAJ,CAAe,YAAf,CAAX,EAAyC,KAAzC,CAA5B;CACA;CACD;CArEF;CAAA;CAAA,4BAuESuB,IAvET,EAwEC;CACC,WAAK1F,KAAL,CAAWiB,KAAX,GAAmByE,IAAI,CAACooB,MAAxB;CACA,WAAKL,OAAL,CAAaM,WAAb,GAA2BroB,IAAI,CAACooB,MAAhC;CACA;CA3EF;CAAA;CAAA,8BA8EC;CAAA;;CACC,UAAI/gB,MAAM,CAACihB,iBAAX,EACA;CACCjhB,QAAAA,MAAM,CAACihB,iBAAP,CAAyBC,QAAzB,CAAkC,KAAKC,KAAL,CAAW5pB,IAAX,CAAgB,IAAhB,CAAlC;CACA;;CACD,UAAM6pB,oBAAoB,GAAGC,uBAAY,CAACC,YAAb,CAA0B,KAAKC,gBAA/B,CAA7B;;CACA,UAAIH,oBAAJ,EACA;CACCA,QAAAA,oBAAoB,CAAC/mB,SAArB,CAA+B,SAA/B,EAA0C,YAAI;CAC7C,UAAA,MAAI,CAACmnB,iBAAL;CACA,SAFD;CAGA;CACD;CA1FF;CAAA;CAAA,0BA4FOtlB,IA5FP,EA6FC;CAAA;;CACC,WAAKslB,iBAAL,GACEtc,IADF,CACO,YAAM;CACXvH,QAAAA,UAAU,CAAC,YAAI;CACd,UAAA,MAAI,CAAC9I,QAAL,CAAcqH,IAAI,CAACykB,KAAnB;CACA,SAFS,EAER,CAFQ,CAAV;CAGA,OALF;CAMA;CApGF;CAAA;CAAA,gCAsGahoB,IAtGb,EAuGC;CACC,aAAO;CACN,cAAMA,IAAI,CAAC1C,EADL;CAEN,gBAAQ1C,EAAE,CAACqF,IAAH,CAAQmJ,gBAAR,CAAyBpJ,IAAI,CAACooB,MAA9B,CAFF;CAGN,mBAAW,KAAK9P,OAAL,CAAa1Z,IAAb,CAAkB,IAAlB,EAAwBoB,IAAxB;CAHL,OAAP;CAKA;CA7GF;CAAA;CAAA,sCAgHC;CAAA;;CACC,aAAO,IAAIslB,OAAJ,CAAY,UAACC,OAAD,EAAa;CAC/B3qB,QAAAA,EAAE,CAACyR,IAAH,CAAQC,SAAR,CAAkB,iDAAlB,EACEC,IADF,CAEE,UAACC,QAAD,EAAc;CACb5R,UAAAA,EAAE,CAAC6Q,IAAH,CAAQ,MAAI,CAACrR,GAAL,CAASqtB,aAAjB,EAAgCjb,QAAQ,CAACjJ,IAAT,CAAckI,IAA9C;CACA,UAAA,MAAI,CAAC+b,WAAL,GAAmBhb,QAAQ,CAACjJ,IAAT,CAAculB,gBAAd,CAA+BtB,WAAlD;;CACA,UAAA,MAAI,CAACuB,4BAAL,CAAkCxD,OAAlC;CACA,SANH;CAQA,OATM,CAAP;CAUA;CA3HF;CAAA;CAAA,iDA6H8BA,OA7H9B,EA8HC;CAAA;;CACC,UAAIle,MAAM,CAACihB,iBAAX,EACA;CACC,aAAKT,eAAL;CACAtC,QAAAA,OAAO;CACP,OAJD,MAMA;CACCvgB,QAAAA,UAAU,CAAC,YAAI;CAAC,UAAA,MAAI,CAAC+jB,4BAAL,CAAkCxD,OAAlC;CAA2C,SAAjD,EAAmD,GAAnD,CAAV;CACA;CACD;CAxIF;CAAA;CAAA,wCA2IC;CAAA;;CACC,aAAO,IAAID,OAAJ,CAAY,UAACC,OAAD,EAAa;CAC/B3qB,QAAAA,EAAE,CAACyR,IAAH,CAAQC,SAAR,CAAkB,iDAAlB,EACEC,IADF,CAEE,UAACC,QAAD,EAAc;CACb,UAAA,MAAI,CAACgb,WAAL,GAAmBhb,QAAQ,CAACjJ,IAAT,CAAcikB,WAAjC;;CACA,UAAA,MAAI,CAACK,eAAL;;CACAtC,UAAAA,OAAO;CACP,SANH;CAQA,OATM,CAAP;CAUA;CAtJF;CAAA;CAAA,EAA0C9jB,6BAA1C;;;;;;;;;;;KCEaunB,oBAAb;CAAA;;CAOC,kCACA;CAAA;;CAAA;CACC;CADD,sFANU,IAMV;CAAA,6FALiB,IAKjB;CAAA,oFAJQ,GAIR;CAAA,kFAFM,EAEN;;CAEC,UAAK5rB,iBAAL,CAAuB,2CAAvB;;CACA,UAAKE,EAAL,GAAU,0BAA0BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAApC;CAHD;CAIC;;CAZF;CAAA;CAAA,2BAeC;CAAA;;CACC,WAAKpD,GAAL,CAAS4Q,OAAT,GAAmB1M,aAAG,CAACC,MAAvB,sBAC4CC,aAAG,CAACC,UAAJ,CAAe,yBAAf,CAD5C,EAEmHD,aAAG,CAACC,UAAJ,CAAe,8BAAf,CAFnH;CAQA,WAAK4a,MAAL,GAAc,IAAInV,gBAAJ,CAAU,KAAK5G,EAAf,EAAmB,IAAnB,EAAyB;CACtC8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SAD6B;CAEtCnJ,QAAAA,QAAQ,EAAE,IAF4B;CAGtCuR,QAAAA,KAAK,EAAE,KAAKwW,KAH0B;CAItChoB,QAAAA,UAAU,EAAG,IAJyB;CAKtCjG,QAAAA,MAAM,EAAE,KAAKC,OALyB;CAMtCmG,QAAAA,UAAU,EAAE,CAN0B;CAOtCD,QAAAA,SAAS,EAAE,CAP2B;CAQtCmJ,QAAAA,SAAS,EAAE,IAR2B;CAStCC,QAAAA,YAAY,EAAE,KATwB;CAUtCC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,0BAAf,CAV4B;CAWtCgM,QAAAA,SAAS,EAAE;CAAEC,UAAAA,KAAK,EAAG,MAAV;CAAkBC,UAAAA,GAAG,EAAG;CAAxB,SAX2B;CAYtC3H,QAAAA,SAAS,EAAE,2BAZ2B;CAatCgI,QAAAA,OAAO,EAAE,KAAK5Q,GAAL,CAAS4Q,OAboB;CActC9H,QAAAA,MAAM,EAAE,EAd8B;CAetC5B,QAAAA,SAAS,EAAE,KAf2B;CAgBtCsJ,QAAAA,OAAO,EAAE,CACR,IAAIhQ,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,UAAAA,IAAI,EAAG7B,aAAG,CAACC,UAAJ,CAAe,yBAAf,CADS;CAEhBuE,UAAAA,SAAS,kCAA2BpI,EAAE,CAAC8gB,EAAH,CAAMC,MAAN,CAAauN,KAAb,CAAmBC,QAA9C,CAFO;CAGhBjmB,UAAAA,MAAM,EAAG;CAACC,YAAAA,KAAK,EAAG,iBAAM;CACvB,kBAAI,MAAI,CAAC/I,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,IAAyB,MAAI,CAACnB,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,KAA0B,KAAvD,EACA;CACC,oBAAM6tB,YAAY,GAAGttB,kBAAI,CAACutB,eAAL,EAArB;CACAD,gBAAAA,YAAY,CAACE,aAAb,GAA6B,MAAI,CAACC,oBAAL,CAA0BxJ,QAA1B,EAA7B;CACAjkB,gBAAAA,kBAAI,CAAC0tB,eAAL,CAAqBJ,YAArB;CACAxuB,gBAAAA,EAAE,CAAC6uB,WAAH,CAAeC,IAAf,CAAoB,UAApB,EAAgC,eAAhC,EAAiD,eAAjD,EAAkEN,YAAY,CAACE,aAA/E;;CACA,gBAAA,MAAI,CAACjmB,IAAL,CAAU,UAAV,EAAsB,IAAIC,0BAAJ,CAAc;CAACC,kBAAAA,IAAI,EAAE;CAAC+lB,oBAAAA,aAAa,EAAEF,YAAY,CAACE;CAA7B;CAAP,iBAAd,CAAtB;;CACA,gBAAA,MAAI,CAACvoB,KAAL;CACA;CACD;CAVQ;CAHO,SAAjB,CADQ,EAgBR,IAAInG,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,sBAAf,CADU;CAEhBuE,UAAAA,SAAS,EAAE,4BAFK;CAGhBE,UAAAA,MAAM,EAAG;CAACC,YAAAA,KAAK,EAAG,KAAKpC,KAAL,CAAWnC,IAAX,CAAgB,IAAhB;CAAT;CAHO,SAAjB,CAhBQ;CAhB6B,OAAzB,CAAd;CAwCA,WAAKxE,GAAL,CAASuvB,aAAT,GAAyB,KAAKtQ,MAAL,CAAYzO,OAAZ,CAAoB,CAApB,EAAuBgf,MAAhD;CAEA,WAAKxvB,GAAL,CAAS2V,MAAT,GAAkB,KAAK3V,GAAL,CAAS4Q,OAAT,CAAiBtG,aAAjB,CAA+B,8BAA/B,CAAlB;CACAxG,MAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAAS2V,MAAtB,EAA8BnV,EAAE,CAAC8gB,EAAH,CAAMC,MAAN,CAAauN,KAAb,CAAmBW,QAAjD;CACA,WAAKzvB,GAAL,CAAS2V,MAAT,CAAgBpI,QAAhB,GAA2B,IAA3B;CAEA,WAAK4hB,oBAAL,GAA4B,IAAIjC,sCAAJ,CAAyB;CACpDC,QAAAA,UAAU,EAAE,KAAKntB,GAAL,CAAS2V,MAD+B;CAEpD2X,QAAAA,gBAAgB,EAAE;CAFkC,OAAzB,CAA5B;CAIA/oB,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS2V,MAApB,EAA4B,QAA5B,EAAsC,KAAK+Z,mBAAL,CAAyBlrB,IAAzB,CAA8B,IAA9B,CAAtC;CACA,WAAK2qB,oBAAL,CAA0B7nB,SAA1B,CAAoC,YAApC,EAAkD,KAAKooB,mBAAL,CAAyBlrB,IAAzB,CAA8B,IAA9B,CAAlD;CAEA,WAAK2qB,oBAAL,CAA0BQ,eAA1B,GACExd,IADF,CACO,YAAK;CACV,QAAA,MAAI,CAACgd,oBAAL,CAA0BrtB,QAA1B,CAAmCJ,kBAAI,CAACutB,eAAL,GAAuBC,aAA1D;;CACA,QAAA,MAAI,CAAClvB,GAAL,CAAS2V,MAAT,CAAgBpI,QAAhB,GAA2B,KAA3B;CACA,QAAA,MAAI,CAACvN,GAAL,CAAS2V,MAAT,CAAgB/M,SAAhB,GAA4B,sCAA5B;CACA,OALF;CAOA,WAAK5I,GAAL,CAAS4vB,SAAT,GAAqB,KAAK5vB,GAAL,CAAS4Q,OAAT,CAAiBtG,aAAjB,CAA+B,mCAA/B,CAArB;CACA/F,MAAAA,eAAK,CAACC,IAAN,CAAW,KAAKxE,GAAL,CAAS4vB,SAApB,EAA+B,OAA/B,EAAwC,KAAKC,cAAL,CAAoBrrB,IAApB,CAAyB,IAAzB,CAAxC;CAEA,WAAKya,MAAL,CAAYxX,IAAZ;CACA;CAxFF;CAAA;CAAA,4BA2FC;CACC,UAAI,KAAKwX,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CAhGF;CAAA;CAAA,0CAmGC;CACC,UAAI,KAAK3G,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,IAAyB,KAAKnB,GAAL,CAAS2V,MAAT,CAAgBxU,KAAhB,KAA0B,KAAvD,EACA;CACC2C,QAAAA,aAAG,CAACsI,WAAJ,CAAgB,KAAKpM,GAAL,CAASuvB,aAAzB,EAAwC/uB,EAAE,CAAC8gB,EAAH,CAAMC,MAAN,CAAauN,KAAb,CAAmBC,QAA3D;CACA,OAHD,MAKA;CACCjrB,QAAAA,aAAG,CAACC,QAAJ,CAAa,KAAK/D,GAAL,CAASuvB,aAAtB,EAAqC/uB,EAAE,CAAC8gB,EAAH,CAAMC,MAAN,CAAauN,KAAb,CAAmBC,QAAxD;CACA;CACD;CA5GF;CAAA;CAAA,qCA+GC;CACC,UAAGvuB,EAAE,CAACsvB,MAAN,EACA;CACCtvB,QAAAA,EAAE,CAACsvB,MAAH,CAAUroB,IAAV,CAAe,+BAAf,EAAgD;CAAC7G,UAAAA,MAAM,EAAE,KAAKmvB;CAAd,SAAhD;CACA;CACD;CApHF;CAAA;CAAA,EAA0C1oB,6BAA1C;;;;;;;;;;;KCCa2oB,qBAAb;CAAA;;CAOC,mCACA;CAAA;;CAAA;CACC;CADD,sFANU,IAMV;CAAA,iGALqB,2BAKrB;CAAA,oFAJQ,GAIR;CAAA,kFAFM,EAEN;;CAEC,UAAKhtB,iBAAL,CAAuB,4CAAvB;;CACA,UAAKE,EAAL,GAAU,6BAA6BlB,IAAI,CAACmB,KAAL,CAAWnB,IAAI,CAACoB,MAAL,KAAgB,KAA3B,CAAvC;CAHD;CAIC;;CAZF;CAAA;CAAA,2BAeC;CAAA;;CACC,UAAM6sB,YAAY,GAAGvuB,kBAAI,CAACwuB,4BAAL,EAArB;CACA,UAAMC,KAAK,GAAGzuB,kBAAI,CAAC0uB,4BAAL,EAAd;;CACA,UAAIH,YAAY,KAAK,CAArB,EACA;CACC,aAAKhqB,IAAL,GAAY7B,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAAZ;CACA,OAHD,MAIK,IAAG4rB,YAAY,KAAK,CAApB,EACL;CACC,aAAKhqB,IAAL,GAAY7B,aAAG,CAACC,UAAJ,CAAe,kBAAf,CAAZ;CACA,OAHI,MAKL;CACC,aAAK4B,IAAL,GAAY7B,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAAZ;CACA;;CACD,WAAKgsB,OAAL,GAAejsB,aAAG,CAACC,UAAJ,CAAe,wBAAf,CAAf;CAEA,WAAKrE,GAAL,CAAS4Q,OAAT,GAAmB1M,aAAG,CAACC,MAAvB,sBAC0C,KAAK8B,IAD/C,EAE6C,KAAKoqB,OAFlD;CAKA,WAAKpR,MAAL,GAAc,KAAKqR,cAAL,EAAd;CAEA,WAAKrR,MAAL,CAAY3X,SAAZ,CAAsB,SAAtB,EAAiC,YAAI;CACpC,QAAA,MAAI,CAAC2B,IAAL,CAAU,SAAV;CACA,OAFD,EAxBD;CA6BC;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;CAEA,WAAKgW,MAAL,CAAYxX,IAAZ;CACA;CAnEF;CAAA;CAAA,qCAsEC;CAAA;;CACC,aAAO,IAAIqC,gBAAJ,CAAU,KAAK5G,EAAf,EAAmB,IAAnB,EAAyB;CAC/B8M,QAAAA,OAAO,EAAE;CAACC,UAAAA,OAAO,EAAE;CAAV,SADsB;CAE/BnJ,QAAAA,QAAQ,EAAE,IAFqB;CAG/BuR,QAAAA,KAAK,EAAE,KAAKwW,KAHmB;CAI/BhoB,QAAAA,UAAU,EAAE,IAJmB;CAK/BjG,QAAAA,MAAM,EAAE,KAAKC,OALkB;CAM/BmG,QAAAA,UAAU,EAAE,CANmB;CAO/BD,QAAAA,SAAS,EAAE,CAPoB;CAQ/BmJ,QAAAA,SAAS,EAAE,IARoB;CAS/BC,QAAAA,YAAY,EAAE,KATiB;CAU/BC,QAAAA,QAAQ,EAAEhM,aAAG,CAACC,UAAJ,CAAe,sBAAf,CAVqB;CAW/BgM,QAAAA,SAAS,EAAE;CAACC,UAAAA,KAAK,EAAE,MAAR;CAAgBC,UAAAA,GAAG,EAAE;CAArB,SAXoB;CAY/B3H,QAAAA,SAAS,EAAE,mBAZoB;CAa/BgI,QAAAA,OAAO,EAAE,KAAK5Q,GAAL,CAAS4Q,OAba;CAc/B9H,QAAAA,MAAM,EAAE,EAduB;CAe/B5B,QAAAA,SAAS,EAAE,KAfoB;CAgB/BsJ,QAAAA,OAAO,EAAE,CACR,IAAIhQ,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,UAAAA,IAAI,EAAE7B,aAAG,CAACC,UAAJ,CAAe,4BAAf,CADU;CAEhBuE,UAAAA,SAAS,0CAFO;CAGhBE,UAAAA,MAAM,EAAE;CACPC,YAAAA,KAAK,EAAE,iBACP;CACCkE,cAAAA,MAAM,CAAC0L,IAAP,CAAY,MAAI,CAAC4X,kBAAjB,EAAqC,QAArC;CACA;CAJM;CAHQ,SAAjB,CADQ,EAWR,IAAI/vB,EAAE,CAAC8gB,EAAH,CAAMC,MAAV,CAAiB;CAChBtb,UAAAA,IAAI,EAAEvE,kBAAI,CAAC0uB,4BAAL,KAAsChsB,aAAG,CAACC,UAAJ,CAAe,qBAAf,CAAtC,GAA8ED,aAAG,CAACC,UAAJ,CAAe,6BAAf,CADpE;CAEhBuE,UAAAA,SAAS,sBAFO;CAGhBE,UAAAA,MAAM,EAAE;CAACC,YAAAA,KAAK,EAAE,KAAKpC,KAAL,CAAWnC,IAAX,CAAgB,IAAhB;CAAR;CAHQ,SAAjB,CAXQ;CAhBsB,OAAzB,CAAP;CAkCA;CAzGF;CAAA;CAAA,4BA4GC;CACC,UAAI,KAAKya,MAAT,EACA;CACC,aAAKA,MAAL,CAAYtY,KAAZ;CACA;CACD;CAjHF;CAAA;CAAA,EAA2CU,6BAA3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}