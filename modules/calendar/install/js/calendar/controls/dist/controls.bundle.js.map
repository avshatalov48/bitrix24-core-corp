{"version":3,"file":"controls.bundle.js","sources":["../src/timeselector.js","../src/reminder.js","../src/location.js","../src/userselector.js","../src/colorselector.js","../src/sectionselector.js","../src/repeatselector.js","../src/selectinput.js","../src/popupdialog.js","../src/viewselector.js","../src/lineviewselector.js","../src/addbutton.js","../src/meetingstatuscontrol.js","../src/confirmstatusdialog.js","../src/confirmeditdialog.js","../src/confirmdeletedialog.js","../src/datetimecontrol.js","../src/busyusersdialog.js","../src/userplannerselector.js","../src/reinviteuserdialog.js","../src/emailselectorcontrol.js","../src/confirmedemaildialog.js","../src/emaillimitationdialog.js","../src/attendeeslist.js"],"sourcesContent":["import {Util} from 'calendar.util';\nimport {Type, Loc} from 'main.core';\n\nexport class TimeSelector {\n\tZ_INDEX = 4000;\n\tvalueList = [];\n\n\tconstructor(params)\n\t{\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap,\n\t\t\tinput: params.input\n\t\t};\n\n\t\tfor (let hour = 0; hour < 24; hour++)\n\t\t{\n\t\t\tthis.valueList.push({value: hour * 60, label: Util.formatTime(hour, 0)});\n\t\t\tthis.valueList.push({value: hour * 60 + 30, label: Util.formatTime(hour, 30)});\n\t\t}\n\n\t\tthis.onChangeCallback = Type.isFunction(params.onChangeCallback) ? params.onChangeCallback : null;\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\tvalues: this.valueList,\n\t\t\tonChangeCallback: (data) => {\n\t\t\t\tif (this.onChangeCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.onChangeCallback(this.selectContol.getInputValue(), data.dataValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thighlightValue(date)\n\t{\n\t\tthis.valueList.forEach(el => el.selected = false); // unselect previous time\n\n\t\tconst minutes = date.getHours() * 60 + date.getMinutes();\n\t\tthis.selectContol.setValue({value: minutes}); // this is needed for correct scroll\n\n\t\tlet selectedValue = this.valueList.find(el => el.value === minutes);\n\t\tif (!selectedValue)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tselectedValue.selected = true;\n\t\tthis.selectContol.setValueList(this.valueList);\n\t}\n\n\tupdateDurationHints(fromTime, toTime, fromDate, toDate)\n\t{\n\t\tconst parsedFromTime = Util.parseTime(fromTime);\n\t\tconst parsedToTime = Util.parseTime(toTime);\n\t\tconst parsedFromDate = Util.parseDate(fromDate);\n\t\tconst parsedToDate = Util.parseDate(toDate);\n\n\t\tconst fromMinutes = parsedFromTime.h * 60 + parsedFromTime.m;\n\t\tconst toMinutes = parsedToTime.h * 60 + parsedToTime.m;\n\t\tconst isSameDate = fromDate === toDate;\n\t\tconst iterateFrom = isSameDate ? this.approximate(fromMinutes + 15, 15) : 0;\n\t\tconst firstHour = this.approximate(fromMinutes + 60 + 15/2, 30);\n\n\t\tthis.valueList = [];\n\n\t\tif (fromDate === toDate)\n\t\t{\n\t\t\tthis.valueList.push(this.getValueElement(fromMinutes, fromMinutes, toMinutes, parsedFromDate, parsedToDate));\n\t\t}\n\n\t\tfor (let minute = iterateFrom; minute <= 24 * 60; minute += (isSameDate && minute < firstHour ? 15 : 30))\n\t\t{\n\t\t\tthis.valueList.push(this.getValueElement(fromMinutes, minute, toMinutes, parsedFromDate, parsedToDate));\n\t\t}\n\n\t\tthis.selectContol.setValueList(this.valueList);\n\t}\n\n\tgetValueElement(fromMinute, currentMinute, toMinute, fromDate, toDate)\n\t{\n\t\tconst hour = Math.floor(currentMinute / 60);\n\t\tconst min = currentMinute % 60;\n\t\tconst time = Util.formatTime(hour, min);\n\t\tconst durationHint = this.getStyledDurationHint(fromMinute, currentMinute, fromDate, toDate);\n\t\tconst selected = currentMinute === toMinute;\n\t\treturn {value: currentMinute, label: time, hint: durationHint, selected};\n\t}\n\n\tgetStyledDurationHint(fromMinute, currentMinute, fromDate, toDate)\n\t{\n\t\tconst durationHint = this.getDurationHint(fromMinute, currentMinute, fromDate, toDate);\n\t\tif (durationHint !== '')\n\t\t{\n\t\t\treturn`<div class=\"menu-popup-item-hint\">${durationHint}</div>`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetDurationHint(fromMinutes, toMinutes, fromDate, toDate)\n\t{\n\t\tconst from = new Date(fromDate.getTime() + fromMinutes * 60 * 1000);\n\t\tconst to = new Date(toDate.getTime() + toMinutes * 60 * 1000);\n\n\t\tconst diff = to.getTime() - from.getTime();\n\t\tconst diffDays = this.approximateFloor(diff / (1000 * 60 * 60 * 24), 1);\n\t\tconst diffHours = this.approximate(diff / (1000 * 60 * 60), 0.5);\n\t\tconst diffMinutes = this.approximate(diff / (1000 * 60), 1);\n\t\tconst diffMinutesApproximation = this.approximate(diffMinutes, 15);\n\n\t\tif (diffDays >= 1)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (diffMinutes >= 60)\n\t\t{\n\t\t\tconst approximationMark = diffMinutes !== diffMinutesApproximation ? '~' : '';\n\t\t\treturn `${approximationMark}${this.formatDecimal(diffHours)} ${Loc.getMessage('EC_HOUR_SHORT')}`;\n\t\t}\n\n\t\treturn `${this.formatDecimal(diffMinutes)} ${Loc.getMessage('EC_MINUTE_SHORT')}`;\n\t}\n\n\tformatDecimal(decimal)\n\t{\n\t\treturn `${decimal}`.replace('.', ',');\n\t}\n\n\tapproximateFloor(value, accuracy) {\n\t\treturn Math.floor(value / accuracy) * accuracy;\n\t}\n\n\tapproximate(value, accuracy) {\n\t\treturn Math.round(value / accuracy) * accuracy;\n\t}\n\n}","import {Loc, Type, Dom, Tag, Event} from \"main.core\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {MenuManager, Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\n\nexport class Reminder extends EventEmitter\n{\n\tstatic timeValueList = null;\n\tdefaultReminderTime = 540; // 9.00\n\tfullDayMode = false;\n\textendedMode = true;\n\tselectedValues = [];\n\tcontrolList = {};\n\tviewMode = false;\n\tDOM = {};\n\tchangedByUser = false;\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Calendar.Controls.Reminder');\n\t\tthis.values = this.getValues();\n\n\t\tthis.id = params.id || 'reminder-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.rawValuesMap = new Map();\n\n\t\tthis.viewMode = params.viewMode === true;\n\t\tthis.changeCallack = params.changeCallack;\n\t\tthis.showPopupCallBack = params.showPopupCallBack;\n\t\tthis.hidePopupCallBack = params.hidePopupCallBack;\n\n\t\tthis.create(params);\n\t\tthis.setValue(params.selectedValues || []);\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcreate(params)\n\t{\n\t\tif (Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\n\t\tif (!Type.isElementNode(this.DOM.wrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.DOM.wrap, 'calendar-notification-values');\n\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.DOM.addButton = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-notification-add-btn-wrap\">\n\t\t\t\t\t<span class=\"calendar-notification-text\">${Loc.getMessage('EC_REMIND1_ADD')}</span>\n\t\t\t\t\t<span class=\"calendar-notification-btn-container calendar-notification-btn-add\">\n\t\t\t\t\t\t<span class=\"calendar-notification-icon\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\t\t}\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (Type.isDomNode(this.DOM.addButton))\n\t\t{\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showPopup.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.wrap))\n\t\t{\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleClick.bind(this));\n\t\t}\n\t}\n\n\tgetValues()\n\t{\n\t\tlet values = [];\n\n\t\tif (!this.fullDayMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{value: 0, label: Loc.getMessage(\"EC_REMIND1_0\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_0\")},\n\t\t\t\t{value: 5, label: Loc.getMessage(\"EC_REMIND1_5\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_5\")},\n\t\t\t\t{value: 10, label: Loc.getMessage(\"EC_REMIND1_10\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_10\")},\n\t\t\t\t{value: 15, label: Loc.getMessage(\"EC_REMIND1_15\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_15\")},\n\t\t\t\t{value: 20, label: Loc.getMessage(\"EC_REMIND1_20\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_20\")},\n\t\t\t\t{value: 30, label: Loc.getMessage(\"EC_REMIND1_30\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_30\")},\n\t\t\t\t{value: 60, label: Loc.getMessage(\"EC_REMIND1_60\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_60\")},\n\t\t\t\t{value: 120, label: Loc.getMessage(\"EC_REMIND1_120\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_120\")}\n\t\t\t\t//{value: 1440, label: Loc.getMessage(\"EC_REMIND1_1440\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_1440\")},\n\t\t\t\t//{value: 2880, label: Loc.getMessage(\"EC_REMIND1_2880\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_2880\")}\n\t\t\t]);\n\t\t}\n\n\t\tif (this.extendedMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-0',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_0\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 0,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-1',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_1\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 1,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-2',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_2\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 2,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'custom',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_CUSTOM\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'custom'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tsetValue(reminderList, emitChanges = true, changedByUser = true)\n\t{\n\t\tthis.selectedValues.forEach((value) => {\n\t\t\tthis.removeValue(value, emitChanges);\n\t\t});\n\n\t\tif (Type.isArray(reminderList))\n\t\t{\n\t\t\treminderList.forEach((value) => {this.addValue(value, emitChanges, changedByUser)}, this);\n\t\t}\n\t}\n\n\tgetSelectedValues()\n\t{\n\t\treturn this.selectedValues;\n\t}\n\n\tgetSelectedRawValues()\n\t{\n\t\tlet selectedRawValues = [];\n\t\tthis.selectedValues.forEach((value) => {\n\n\t\t\tselectedRawValues.push(this.rawValuesMap.get(value) || value);\n\t\t});\n\t\treturn selectedRawValues;\n\t}\n\n\tsetFullDayMode(fullDayMode)\n\t{\n\t\tif (fullDayMode !== this.fullDayMode)\n\t\t{\n\t\t\tthis.fullDayMode = fullDayMode;\n\t\t\tthis.values = this.getValues();\n\t\t}\n\t}\n\n\tshowPopup(params = {})\n\t{\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tthis.values.forEach((item) => {\n\t\t\tif (item.mode === 'time-menu'\n\t\t\t\t|| item.mode === 'custom'\n\t\t\t\t|| !BX.util.in_array(item.value, this.selectedValues))\n\t\t\t{\n\t\t\t\tlet menuItem = {};\n\n\t\t\t\tif (item.dataset && item.dataset.mode === 'time-menu')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = item.id;\n\t\t\t\t\tlet defaultReminderTime = Util.getTimeByInt(this.defaultReminderTime);\n\n\t\t\t\t\tmenuItem.text = item.label.replace('#TIME#', Util.formatTime(defaultReminderTime.hour, defaultReminderTime.min));\n\n\t\t\t\t\tmenuItem.dataset = BX.util.objectMerge({\n\t\t\t\t\t\ttype: 'submenu-list',\n\t\t\t\t\t\tvalue: this.defaultReminderTime\n\t\t\t\t\t}, item.dataset);\n\n\t\t\t\t\tmenuItem.items = this.getSubmenuTimeValues(menuItem, item.label, params);\n\n\t\t\t\t\tmenuItem.onclick = (function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.addValue({\n\t\t\t\t\t\t\t\tbefore: item.dataset.daysBefore,\n\t\t\t\t\t\t\t\ttime: item.dataset.time\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.defer(function(){_this.reminderMenu.close();}, _this)();\n\t\t\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t\telse if (item.dataset && item.dataset.mode === 'custom')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = 'custom';\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.items = [{id: 'tmp', text: 'tmp'}];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.onclick = (function (value, mode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t_this.addValue(value);\n\t\t\t\t\t\t\t_this.reminderMenu.close();\n\t\t\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})(item.value, item.mode);\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push(menuItem);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.reminderMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tparams.bindTarget || this.DOM.addButton,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tlet adjustSubmenuPopup = this.adjustSubmenuPopup.bind(this);\n\t\tlet closeSubmenuPopup = this.closeSubmenuPopup.bind(this);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\n\t\tthis.reminderMenu.popupWindow.subscribe('onClose', () => {\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\t\t});\n\t\tthis.reminderMenu.show();\n\t}\n\n\tgetSubmenuTimeValues(parentItem, parentItemMessage, params)\n\t{\n\t\tlet menuItems = [];\n\t\tReminder.getTimeValueList(60).forEach(function(menuItem)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\tid: 'time-' + menuItem.value,\n\t\t\t\tdataset: {\n\t\t\t\t\tvalue: menuItem.value,\n\t\t\t\t\tdaysBefore: parentItem.dataset.daysBefore\n\t\t\t\t},\n\t\t\t\ttext: menuItem.label,\n\t\t\t\tonclick: function(e, item)\n\t\t\t\t{\n\t\t\t\t\tlet time = Util.getTimeByInt(item.dataset.value);\n\t\t\t\t\tlet parentMenuItem = this.reminderMenu.getMenuItem(parentItem.id);\n\t\t\t\t\tif (parentMenuItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tparentMenuItem.setText(parentItemMessage.replace('#TIME#', Util.formatTime(time.hour, time.min)));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addValue({\n\t\t\t\t\t\ttime: item.dataset.value,\n\t\t\t\t\t\tbefore: item.dataset.daysBefore\n\t\t\t\t\t});\n\n\t\t\t\t\tBX.defer(function(){this.reminderMenu.close();}, this)();\n\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t}\n\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}, this);\n\t\treturn menuItems;\n\t}\n\n\taddValue(value, emitChanges = true, changedByUser = true)\n\t{\n\t\tlet item;\n\t\tconst formattedValue = Reminder.formatValue(value);\n\n\t\tif (Type.isPlainObject(value) && value.count)\n\t\t{\n\t\t\tvalue = parseInt(formattedValue);\n\t\t}\n\n\t\tif (Type.isPlainObject(value) && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tif (Type.isInteger(parseInt(value.before)) && Type.isInteger(parseInt(value.time)))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${Reminder.getReminderLabel(value)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.type === 'date' && Type.isDate(value.value))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`<span class=\"calendar-reminder-item\">\n\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t${Util.formatDateUsable(value.value) + ' ' + Util.formatTime(value.value)}\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\tthis.controlList[formattedValue] = item;\n\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t}\n\t\telse if (parseInt(value) >= 0 && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tfor (let i = 0; i < this.values.length; i++)\n\t\t\t{\n\t\t\t\tif (this.values[i].value === parseInt(value))\n\t\t\t\t{\n\t\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${this.values[i].shortLabel || this.values[i].label}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\t\tif (!this.viewMode)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\t\t\tthis.controlList[formattedValue] = item;\n\t\t\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item === undefined)\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-reminder-item'},\n\t\t\t\t\ttext: Reminder.getText(value)\n\t\t\t\t}));\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Dom.create('SPAN', {\n\t\t\t\t\t\tprops: {className: 'calendar-reminder-clear-icon'},\n\t\t\t\t\t\tevents: {click: function(){this.removeValue(value);}.bind(this)}\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tthis.selectedValues.push(value);\n\t\t\t\tthis.controlList[value] = item;\n\t\t\t\tthis.rawValuesMap.set(value, value);\n\t\t\t}\n\t\t}\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t\t}\n\t\tthis.changedByUser = emitChanges && changedByUser;\n\n\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t{\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButton);\n\t\t}\n\t}\n\n\tremoveValue(value, emitChanges = true)\n\t{\n\t\tif (this.controlList[value] && Type.isDomNode(this.controlList[value]))\n\t\t{\n\t\t\tDom.remove(this.controlList[value]);\n\t\t}\n\t\tthis.selectedValues = BX.util.deleteFromArray(this.selectedValues, BX.util.array_search(value, this.selectedValues));\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t\t\tthis.changedByUser = true;\n\t\t}\n\t}\n\n\tstatic getTimeValueList(mode = 30)\n\t{\n\t\tif (!Reminder.timeValueList)\n\t\t{\n\t\t\tReminder.timeValueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tReminder.timeValueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tif (mode <= 30)\n\t\t\t\t{\n\t\t\t\t\tReminder.timeValueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Reminder.timeValueList;\n\t}\n\n\thandleClick(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tlet remValue = target.getAttribute('data-bxc-value');\n\n\t\tif (!Type.isNull(remValue) && this.selectedValues.includes(remValue))\n\t\t{\n\t\t\tthis.removeValue(remValue);\n\t\t}\n\n\t\tif (Dom.hasClass(target, 'calendar-reminder-item-title'))\n\t\t{\n\t\t\tthis.showPopup({\n\n\t\t\t\tbindTarget: target,\n\t\t\t\taddValueCallback: ()=>{\n\t\t\t\t\tconst removeIcon = target.parentNode.querySelector('.calendar-reminder-clear-icon');\n\t\t\t\t\tif (Type.isElementNode(removeIcon)\n\t\t\t\t\t\t&& !Type.isNull(removeIcon.getAttribute('data-bxc-value')))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.removeValue(removeIcon.getAttribute('data-bxc-value'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\tstatic getReminderLabel(value)\n\t{\n\t\tlet label = '';\n\t\tvalue.before = parseInt(value.before);\n\t\tvalue.time = parseInt(value.time);\n\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time) && [0, 1, 2].includes(value.before))\n\t\t{\n\t\t\tlet time = Util.getTimeByInt(value.time);\n\n\t\t\tlabel = Loc.getMessage('EC_REMIND1_DAY_' + value.before + '_SHORT').replace('#TIME#', Util.formatTime(time.hour, time.min))\n\t\t}\n\t\treturn label;\n\t}\n\n\t// Used to scroll into view and highlight default item in time menu\n\tadjustSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustTimeSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustCalendarSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tlet layout = submenuPopup.bindElement;\n\t\t\t\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\n\t\t\t\t\tif (Type.isDomNode(textNode))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.clean(textNode);\n\t\t\t\t\t\ttextNode.innerHTML = Loc.getMessage(\"EC_REMIND1_CUSTOM\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustTimeSubmenuPopup(popup)\n\t{\n\t\tlet selectedMenuItem = popup.getContentContainer().querySelector('span[data-value=\"' + this.defaultReminderTime + '\"]');\n\t\tif (Type.isDomNode(selectedMenuItem))\n\t\t{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tpopup.getContentContainer().scrollTop = parseInt(selectedMenuItem.offsetTop) - 10;\n\t\t\t\tDom.addClass(selectedMenuItem, 'menu-popup-item-open');\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tadjustCalendarSubmenuPopup(popup)\n\t{\n\t\tlet layout = popup.bindElement;\n\n\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\t\tif (Type.isDomNode(textNode))\n\t\t{\n\t\t\tDom.clean(textNode);\n\t\t\tconst input = textNode.appendChild(Tag.render`<input id=\"inp-${Math.round(Math.random() * 100000)}\" type=\"text\" class=\"calendar-field calendar-field-datetime\" value=\"\" autocomplete=\"off\" placeholder=\"${Loc.getMessage('EC_REMIND1_CUSTOM_PLACEHOLDER')}\"/>`);\n\t\t\tconst calendarControl = BX.calendar.get();\n\n\t\t\t// Hacks for BX.calendar - it works as singleton and has troubles with using inside menupopups\n\t\t\t// We trying to reinitialize it everytime\n\t\t\tif (calendarControl.popup)\n\t\t\t{\n\t\t\t\tcalendarControl.popup.destroy();\n\t\t\t\tcalendarControl.popup = null;\n\t\t\t\tcalendarControl._current_layer = null;\n\t\t\t\tcalendarControl._layers = {};\n\t\t\t}\n\t\t\tif (calendarControl.popup_month)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_month.destroy();\n\t\t\t\tcalendarControl.popup_month = null;\n\t\t\t}\n\t\t\tif (calendarControl.popup_year)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_year.destroy();\n\t\t\t\tcalendarControl.popup_year = null;\n\t\t\t}\n\t\t\t\n\n\t\t\tcalendarControl.Show({\n\t\t\t\tnode: input,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\n\t\t\tlet calendarPopup = calendarControl.popup;\n\t\t\tcalendarPopup.cacheable = false;\n\t\t\tif (calendarPopup && calendarPopup.popupContainer)\n\t\t\t{\n\t\t\t\tlet calendarWrap = calendarPopup.popupContainer.querySelector('.bx-calendar');\n\t\t\t\tif (Type.isDomNode(calendarWrap))\n\t\t\t\t{\n\t\t\t\t\tpopup.contentContainer.appendChild(calendarWrap);\n\t\t\t\t}\n\t\t\t\tcalendarPopup.close();\n\t\t\t\tMenuManager.destroy(calendarPopup.uniquePopupId);\n\t\t\t}\n\n\t\t\tEvent.bind(input, 'change', () => {\n\t\t\t\tlet\n\t\t\t\t\tvalue = input.value,\n\t\t\t\t\tdateValue = Util.parseDate(value);\n\n\t\t\t\tif (Type.isDate(dateValue))\n\t\t\t\t{\n\t\t\t\t\tthis.addValue({type: 'date', value: dateValue});\n\t\t\t\t\tthis.reminderMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t\t{\n\t\t\t\tthis.DOM.addButton.style.display = 'none';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t}\n\t}\n\n\twasChangedByUser()\n\t{\n\t\treturn this.changedByUser;\n\t}\n\n\tstatic getText(value)\n\t{\n\t\tlet\n\t\t\ttempValue = value,\n\t\t\tdividers = [60, 24], //list of time dividers\n\t\t\tmessageCodes = ['EC_REMIND1_MIN_COUNT', 'EC_REMIND1_HOUR_COUNT', 'EC_REMIND1_DAY_COUNT'],\n\t\t\tresult = '';\n\n\t\tfor (let i = 0; i < messageCodes.length; i++)\n\t\t{\n\t\t\tif (tempValue < dividers[i] || i === dividers.length)\n\t\t\t{\n\t\t\t\tresult = Loc.getMessage(messageCodes[i]).toString();\n\t\t\t\tresult = result.replace('\\#COUNT\\#', tempValue.toString());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttempValue = Math.ceil(tempValue / dividers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic formatValue(remindValue)\n\t{\n\t\tif (Type.isPlainObject(remindValue)\n\t\t\t&& Type.isInteger(parseInt(remindValue.before))\n\t\t\t&& Type.isInteger(parseInt(remindValue.time)))\n\t\t{\n\t\t\treturn 'daybefore|' + remindValue.before + '|' + remindValue.time;\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && Type.isDate(remindValue.value))\n\t\t{\n\t\t\treturn 'date|' + Util.formatDateTime(remindValue.value);\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && remindValue.type)\n\t\t{\n\t\t\tif (remindValue.type === 'min')\n\t\t\t{\n\t\t\t\treturn remindValue.count.toString();\n\t\t\t}\n\t\t\tif (remindValue.type === 'hour')\n\t\t\t{\n\t\t\t\treturn (parseInt(remindValue.count) * 60).toString();\n\t\t\t}\n\t\t\tif (remindValue.type === 'day')\n\t\t\t{\n\t\t\t\treturn (parseInt(remindValue.count) * 60 * 24).toString();\n\t\t\t}\n\t\t}\n\n\t\treturn remindValue.toString();\n\t}\n}\n","import { Tag, Type, Loc, Dom, Event, Text} from 'main.core';\nimport { RoomsManager, RoomsSection } from 'calendar.roomsmanager';\nimport { CategoryManager } from 'calendar.categorymanager';\nimport {EventEmitter} from 'main.core.events';\nimport { Util } from 'calendar.util';\n\nexport class Location\n{\n\tstatic locationList = [];\n\tstatic meetingRoomList = [];\n\tstatic currentRoomCapacity = 0;\n\tstatic accessibility = [];\n\tstatic DAY_LENGTH = 86400000;\n\tdatesRange = [];\n\tviewMode = false;\n\n\tconstructor(params)\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'location-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrap\n\t\t};\n\t\tthis.roomsManager = params.roomsManager || null;\n\t\tthis.locationAccess = params.locationAccess || false;\n\t\tthis.disabled = !params.richLocationEnabled;\n\t\tthis.value = {type: '', text: '', value: ''};\n\t\tthis.inlineEditModeEnabled = params.inlineEditModeEnabled;\n\t\tthis.meetingRooms = params.iblockMeetingRoomList || [];\n\t\tLocation.setMeetingRoomList(params.iblockMeetingRoomList);\n\t\tLocation.setLocationList(params.locationList);\n\t\tif (!this.disabled)\n\t\t{\n\t\t\tthis.default = this.setDefaultRoom(params.locationList) || '';\n\t\t}\n\t\tthis.create();\n\t\tthis.setViewMode(params.viewMode === true);\n\t\tthis.processValue();\n\t\tthis.setCategoryManager();\n\t\tthis.setValuesDebounced = BX.debounce(this.setValues.bind(this), 70);\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrapNode.style.display = 'flex';\n\t\tthis.DOM.inputWrap = this.DOM.wrapNode.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-field-block\"></div>\n\t\t`)\n\n\t\tthis.DOM.alertIconLocation = Tag.render`\n\t\t\t<div class=\"ui-alert-icon-danger calendar-location-alert-icon\" data-hint-no-icon=\"Y\" data-hint=\"${Loc.getMessage('EC_LOCATION_OVERFLOW')}\">\n\t\t\t<i></i>\n\t\t\t</div>\n\t\t`;\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tthis.DOM.inlineEditLinkWrap = this.DOM.wrapNode.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-field-place-link calendar-location-readonly\">${this.DOM.inlineEditLink = Tag.render`\n\t\t\t\t\t<span class=\"calendar-text-link\">${Loc.getMessage('EC_REMIND1_ADD')}</span>`}\n\t\t\t\t</div>`);\n\n\t\t\tthis.DOM.inputWrap.style.display = 'none';\n\n\t\t\tEvent.bind(\n\t\t\t\tthis.DOM.inlineEditLinkWrap, 'click', () => {\n\t\t\t\t\tthis.displayInlineEditControls();\n\t\t\t\t\tthis.selectContol.showPopup();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tthis.DOM.inputWrapInner = this.DOM.inputWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-event-location-input-wrap-inner\">\n\t\t\t\t</div>`\n\t\t);\n\n\t\tthis.DOM.input = this.DOM.inputWrapInner.appendChild(Dom.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tname: this.params.inputName || '',\n\t\t\t\tplaceholder: this.disabled\n\t\t\t\t\t? Loc.getMessage('EC_LOCATION_PLACEHOLDER_LOCKED')\n\t\t\t\t\t: Loc.getMessage('EC_LOCATION_PLACEHOLDER')\n\t\t\t\t,\n\t\t\t\ttype: 'text',\n\t\t\t\tautocomplete: this.disabled ? 'on' : 'off',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'calendar-field calendar-field-select'\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\tpaddingRight: 25 + 'px',\n\t\t\t\tminWidth: 300 + 'px',\n\t\t\t\tmaxWidth: 300 + 'px',\n\t\t\t}\n\t\t}));\n\n\t\tif (this.disabled)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrapNode, 'locked');\n\n\t\t\tthis.DOM.lockIcon = Tag.render`\n\t\t\t\t<div class=\"calendar-lock-icon\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.lockIcon, 'click', () => {\n\t\t\t\ttop.BX.UI.InfoHelper.show('limit_office_calendar_location');\n\t\t\t})\n\n\t\t\tDom.append(this.DOM.lockIcon, this.DOM.inputWrapInner);\n\t\t}\n\t}\n\n\tsetValues()\n\t{\n\t\tthis.addLocationRemoveButton();\n\n\t\tif (!this.categoryManagerFromDB)\n\t\t{\n\t\t\tthis.setValuesDebounced?.();\n\t\t\treturn;\n\t\t}\n\t\tthis.prohibitClick();\n\n\t\tlet\n\t\t\tmenuItemList = [],\n\t\t\tselectedIndex = false,\n\t\t\tmeetingRooms = Location.getMeetingRoomList(),\n\t\t\tlocationList = Location.getLocationList();\n\n\t\tconst roomList = this.createRoomList(locationList);\n\n\t\tthis.categoriesWithRooms = this?.categoryManagerFromDB?.getCategoriesWithRooms(roomList);\n\n\t\tif (Type.isArray(meetingRooms))\n\t\t{\n\t\t\tmeetingRooms.forEach(function(room)\n\t\t\t{\n\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tID: room.ID,\n\t\t\t\t\tlabel: room.NAME,\n\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\tcapacity: 0,\n\t\t\t\t\ttype: 'mr'\n\t\t\t\t});\n\n\t\t\t\tif (this.value.type === 'mr'\n\t\t\t\t\t&& parseInt(this.value.value) === room.ID)\n\t\t\t\t{\n\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (menuItemList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t}\n\t\t}\n\n\t\tconst pushRoomToItemList = (room) => {\n\t\t\troom.id = parseInt(room.id);\n\t\t\troom.location_id = parseInt(room.location_id);\n\t\t\tmenuItemList.push({\n\t\t\t\tID: room.id,\n\t\t\t\tLOCATION_ID: room.location_id,\n\t\t\t\tlabel: room.name,\n\t\t\t\tcapacity: parseInt(room.capacity) || 0,\n\t\t\t\tcolor: room.color,\n\t\t\t\treserved: room.reserved || false,\n\t\t\t\tlabelRaw: room.name,\n\t\t\t\tlabelCapacity: this.getCapacityMessage(room.capacity),\n\t\t\t\tvalue: room.id,\n\t\t\t\ttype: 'calendar'\n\t\t\t});\n\n\t\t\tif (this.value.type === 'calendar'\n\t\t\t\t&& parseInt(this.value.value) === parseInt(room.id))\n\t\t\t{\n\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t}\n\t\t};\n//TODO think about delimiter draw\n\t\tif (Type.isObject(this.categoriesWithRooms))\n\t\t{\n\t\t\tif (this.categoriesWithRooms.categories.length || this.categoriesWithRooms.default.length)\n\t\t\t{\n\t\t\t\tthis.categoriesWithRooms.categories.forEach((category) => {\n\t\t\t\t\tif(category.rooms.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItemList.push({text: category.name, delimiter: true});\n\t\t\t\t\t\tcategory.rooms.forEach((room) => pushRoomToItemList(room), this);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (this.categoriesWithRooms.default.length)\n\t\t\t\t{\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\ttext:\"\\0\",\n\t\t\t\t\t\tclassName: 'calendar-popup-window-delimiter-default-category',\n\t\t\t\t\t\tdelimiter: true,\n\t\t\t\t\t});\n\t\t\t\t\tthis.categoriesWithRooms.default.forEach((room) => pushRoomToItemList(room), this);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationAccess)\n\t\t\t\t{\n\t\t\t\t\tthis.loadRoomSlider();\n\t\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tlabel: Loc.getMessage('EC_LOCATION_MEETING_ROOM_SET'),\n\t\t\t\t\t\tcallback: this.openRoomsSlider.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.locationAccess)\n\t\t\t\t{\n\t\t\t\t\tthis.loadRoomSlider();\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tlabel: Loc.getMessage('EC_ADD_LOCATION'),\n\t\t\t\t\t\tcallback: this.openRoomsSlider.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectContol)\n\t\t{\n\t\t\tthis.selectContol.destroy();\n\t\t}\n\n\t\tlet disabledControl = this.disabled;\n\t\tif (!menuItemList.length)\n\t\t{\n\t\t\tdisabledControl = true;\n\t\t}\n\n\t\tthis.processValue();\n\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tvalues: menuItemList,\n\t\t\tvalueIndex: selectedIndex,\n\t\t\tzIndex: this.zIndex,\n\t\t\tdisabled: disabledControl,\n\t\t\tminWidth: 300,\n\t\t\tonChangeCallback: () => {\n\t\t\t\tEventEmitter.emit('Calendar.LocationControl.onValueChange');\n\t\t\t\tlet i, value = this.DOM.input.value;\n\t\t\t\tthis.value = {text: value};\n\t\t\t\tfor (i = 0; i < menuItemList.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (menuItemList[i].labelRaw === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.value.type = menuItemList[i].type;\n\t\t\t\t\t\tthis.value.value = menuItemList[i].value;\n\t\t\t\t\t\tLocation.setCurrentCapacity(menuItemList[i].capacity)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Type.isFunction(this.params.onChangeCallback))\n\t\t\t\t{\n\t\t\t\t\tthis.params.onChangeCallback();\n\t\t\t\t}\n\t\t\t\tif (this.value.text === '')\n\t\t\t\t{\n\t\t\t\t\tthis.removeLocationRemoveButton();\n\t\t\t\t}\n\t\t\t\tthis.addLocationRemoveButton();\n\t\t\t\tthis.allowClick();\n\t\t\t}\n\t\t});\n\t\tthis.allowClick();\n\t}\n\n\tprocessValue()\n\t{\n\t\tif (this.value)\n\t\t{\n\t\t\tthis.DOM.input.value = this.value.str || '';\n\t\t\tif (\n\t\t\t\tthis.value.type\n\t\t\t\t&& (\n\t\t\t\t\tthis.value.str === this.getTextLocation(this.value)\n\t\t\t\t\t|| this.getTextLocation(this.value) === Loc.getMessage('EC_LOCATION_EMPTY')\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.DOM.input.value = '';\n\t\t\t\tthis.value = '';\n\t\t\t}\n\t\t\tfor (const locationListElement of Location.locationList)\n\t\t\t{\n\t\t\t\tif (parseInt(locationListElement.ID) === this.value.room_id)\n\t\t\t\t{\n\t\t\t\t\tLocation.setCurrentCapacity(parseInt(locationListElement.CAPACITY));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValuesDebounce()\n\t{\n\t\tthis.setCategoryManager();\n\n\t\tthis.setValuesDebounced();\n\t}\n\n\tremoveValue()\n\t{\n\t\tthis.setValue(false, false);\n\t\tthis.selectContol.onChangeCallback();\n\t\tthis.removeLocationRemoveButton();\n\t}\n\n\tremoveLocationRemoveButton()\n\t{\n\t\tif (this.DOM.inputWrap.contains(this.DOM.removeLocationButton))\n\t\t{\n\t\t\tthis.DOM.inputWrap.removeChild(this.DOM.removeLocationButton);\n\t\t}\n\t\telse if (this.DOM.wrapNode.contains(this.DOM.removeLocationButton))\n\t\t{\n\t\t\tthis.DOM.wrapNode.removeChild(this.DOM.removeLocationButton);\n\t\t}\n\n\t\tthis.DOM.removeLocationButton = null;\n\t\tif(Type.isDomNode(this.DOM.inlineEditLink))\n\t\t{\n\t\t\tthis.displayInlineEditControls();\n\t\t}\n\t}\n\n\taddLocationRemoveButton()\n\t{\n\t\tlet wrap = this.DOM.inputWrap;\n\t\tif(this.DOM?.inlineEditLinkWrap?.style.display === '')\n\t\t{\n\t\t\twrap = this.DOM.wrapNode;\n\t\t}\n\n\t\tif(\n\t\t\t(this.value.value || this.value.str || this.value.text)\n\t\t\t&& !this.viewMode\n\t\t\t&& !this.DOM.removeLocationButton\n\t\t\t&& this.value.text !== ''\n\t\t)\n\t\t{\n\t\t\tthis.DOM.removeLocationButton = wrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-location-clear-btn-wrap calendar-location-readonly\">\n\t\t\t\t\t<span class=\"calendar-location-clear-btn-text\">${Loc.getMessage('EC_LOCATION_CLEAR_INPUT')}</span>\n\t\t\t\t</span>`\n\t\t\t);\n\t\t\tEvent.bind(this.DOM.removeLocationButton, 'click', this.removeValue.bind(this));\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrapNode, 'calendar-location-readonly')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrapNode, 'calendar-location-readonly')\n\t\t}\n\t}\n\n\taddCapacityAlert()\n\t{\n\t\tif (!Dom.hasClass(this.DOM.input, 'calendar-field-location-select-border'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.input, 'calendar-field-location-select-border');\n\t\t}\n\t\tif (Type.isDomNode(this.DOM.alertIconLocation))\n\t\t{\n\t\t\tUtil.initHintNode(this.DOM.alertIconLocation);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.inputWrapInner.after(this.DOM.alertIconLocation)\n\t\t}, 200);\n\t}\n\n\tremoveCapacityAlert()\n\t{\n\t\tif (Dom.hasClass(this.DOM.input, 'calendar-field-location-select-border'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.input, 'calendar-field-location-select-border');\n\t\t}\n\t\tif (this.DOM.alertIconLocation.parentNode === this.DOM.inputWrap)\n\t\t{\n\t\t\tDom.remove(this.DOM.alertIconLocation);\n\t\t}\n\t}\n\n\tgetCapacityMessage(capacity)\n\t{\n\t\tlet suffix;\n\t\tif (\n\t\t\t(capacity % 100 > 10)\n\t\t\t&& (capacity % 100 < 20)\n\t\t)\n\t\t{\n\t\t\tsuffix = 5;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = capacity % 10;\n\t\t}\n\t\treturn Loc.getMessage('EC_LOCATION_CAPACITY_' + suffix, {'#NUM#': capacity})\n\t}\n\n\tcheckLocationAccessibility(params)\n\t{\n\t\tthis.getLocationAccessibility(params.from, params.to)\n\t\t.then(()=> {\n\t\t\tlet eventTsFrom;\n\t\t\tlet eventTsTo;\n\t\t\tlet fromTs = params.from.getTime();\n\t\t\tlet toTs = params.to.getTime();\n\t\t\tif (params.fullDay)\n\t\t\t{\n\t\t\t\ttoTs += Location.DAY_LENGTH;\n\t\t\t}\n\n\t\t\tfor (const index in Location.locationList)\n\t\t\t{\n\t\t\t\tLocation.locationList[index].reserved = false;\n\t\t\t\tlet roomId = Location.locationList[index].ID;\n\t\t\t\tfor (const date of this.datesRange)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isUndefined(Location.accessibility[date][roomId]))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const event of Location.accessibility[date][roomId])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (parseInt(event.PARENT_ID) === parseInt(params.currentEventId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\teventTsFrom = Util.parseDate(event.DATE_FROM).getTime();\n\t\t\t\t\t\teventTsTo = Util.parseDate(event.DATE_TO).getTime();\n\t\t\t\t\t\tif (event.DT_SKIP_TIME !== 'Y')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teventTsFrom -= event['~USER_OFFSET_FROM'] * 1000;\n\t\t\t\t\t\t\teventTsTo -= event['~USER_OFFSET_TO'] * 1000;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teventTsTo += Location.DAY_LENGTH;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (eventTsFrom < toTs && eventTsTo > fromTs)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLocation.locationList[index].reserved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (Location.locationList[index].reserved)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setValuesDebounce();\n\t\t});\n\t}\n\n\tgetLocationAccessibility(from, to)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.datesRange = Location.getDatesRange(from, to);\n\t\t\tlet isCheckedAccessibility = true;\n\n\t\t\tfor (let date of this.datesRange)\n\t\t\t{\n\t\t\t\tif (Type.isUndefined(Location.accessibility[date]))\n\t\t\t\t{\n\t\t\t\t\tisCheckedAccessibility = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isCheckedAccessibility)\n\t\t\t{\n\t\t\t\tBX.ajax.runAction('calendar.api.locationajax.getLocationAccessibility', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdatesRange: this.datesRange,\n\t\t\t\t\t\tlocationList: Location.locationList,\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tfor (let date of this.datesRange)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLocation.accessibility[date] = response.data[date];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(Location.accessibility, this.datesRange);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(Location.accessibility, this.datesRange);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic handlePull(params)\n\t{\n\t\tif (!params.fields.DATE_FROM || !params.fields.DATE_TO)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet dateFrom = Util.parseDate(params.fields.DATE_FROM);\n\t\tlet dateTo = Util.parseDate(params.fields.DATE_TO);\n\t\tlet datesRange = Location.getDatesRange(dateFrom, dateTo);\n\n\t\tfor (let date of datesRange)\n\t\t{\n\t\t\tif (Location.accessibility[date])\n\t\t\t{\n\t\t\t\tdelete Location.accessibility[date];\n\t\t\t}\n\t\t}\n\t}\n\n\tloadRoomSlider()\n\t{\n\t\tthis.setRoomsManager();\n\t\tthis.setCategoryManager();\n\t}\n\n\topenRoomsSlider()\n\t{\n\t\tthis.getRoomsInterface()\n\t\t\t.then(function(RoomsInterface) {\n\t\t\t\tif (!this.roomsInterface)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsInterface = new RoomsInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: null,\n\t\t\t\t\t\t\treadonly: false,\n\t\t\t\t\t\t\troomsManager: this.roomsManagerFromDB,\n\t\t\t\t\t\t\tcategoryManager: this.categoryManagerFromDB,\n\t\t\t\t\t\t\tisConfigureList: true\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.roomsInterface.show();\n\t\t\t}.bind(this));\n\t}\n\n\tgetTextValue(value)\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\tvalue = this.value;\n\t\t}\n\n\t\tlet res = value.str || value.text || '';\n\t\tif (value && value.type === 'mr')\n\t\t{\n\t\t\tres = 'ECMR_' + value.value + (value.mrevid ? '_' + value.mrevid : '');\n\n\t\t}\n\t\telse if (value && value.type === 'calendar')\n\t\t{\n\t\t\tres = 'calendar_' + value.value + (value.room_event_id ? '_' + value.room_event_id : '');\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tsetValue(value, debounced = true)\n\t{\n\t\tif (Type.isPlainObject(value))\n\t\t{\n\t\t\tthis.value.text = value.text || '';\n\t\t\tthis.value.type = value.type || '';\n\t\t\tthis.value.value = value.value || '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value = Location.parseStringValue(value);\n\t\t}\n\n\t\tif (debounced)\n\t\t{\n\t\t\tthis.setValuesDebounce();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setValues();\n\t\t}\n\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tlet textLocation = this.getTextLocation(this.value);\n\t\t\tthis.DOM.inlineEditLink.innerHTML = Text.encode(textLocation || Loc.getMessage('EC_REMIND1_ADD'));\n\t\t\tif(textLocation)\n\t\t\t{\n\t\t\t\tthis.addLocationRemoveButton();\n\t\t\t}\n\t\t}\n\t}\n\n\t// parseLocation\n\tstatic parseStringValue(str)\n\t{\n\t\tif (!Type.isString(str))\n\t\t{\n\t\t\tstr = '';\n\t\t}\n\n\t\tlet\n\t\t\tres = {\n\t\t\t\ttype : false,\n\t\t\t\tvalue : false,\n\t\t\t\tstr : str\n\t\t\t};\n\n\t\tif (str.substr(0, 5) === 'ECMR_')\n\t\t{\n\t\t\tres.type = 'mr';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.mrid = parseInt(value[1]);\n\t\t\t\t}\n\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.mrevid = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (str.substr(0, 9) === 'calendar_')\n\t\t{\n\t\t\tres.type = 'calendar';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.room_id = parseInt(value[1]);\n\t\t\t\t}\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.room_event_id = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tgetTextLocation(location)\n\t{\n\t\tlet\n\t\t\tvalue = Type.isPlainObject(location) ? location : Location.parseStringValue(location),\n\t\t\ti, str = value.str;\n\n\t\tif (Type.isArray(this.meetingRooms) && value.type === 'mr')\n\t\t{\n\t\t\tstr = Loc.getMessage('EC_LOCATION_EMPTY');\n\t\t\tfor (i = 0; i < this.meetingRooms.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(this.meetingRooms[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = this.meetingRooms[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(Location.locationList) && value.type === 'calendar')\n\t\t{\n\t\t\tstr = Loc.getMessage('EC_LOCATION_EMPTY');\n\t\t\tfor (i = 0; i < Location.locationList.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(Location.locationList[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = Location.locationList[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tstatic setLocationList(locationList)\n\t{\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tLocation.locationList = locationList;\n\t\t\tthis.sortLocationList();\n\t\t}\n\t}\n\n\tstatic sortLocationList()\n\t{\n\t\tLocation.locationList.sort((a,b) => {\n\t\t\tif (a.NAME.toLowerCase() > b.NAME.toLowerCase())\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (a.NAME.toLowerCase() < b.NAME.toLowerCase())\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t})\n\t}\n\n\tstatic getLocationList()\n\t{\n\t\treturn Location.locationList;\n\t}\n\n\tstatic setMeetingRoomList(meetingRoomList)\n\t{\n\t\tif (Type.isArray(meetingRoomList))\n\t\t{\n\t\t\tLocation.meetingRoomList = meetingRoomList;\n\t\t}\n\t}\n\n\tstatic getMeetingRoomList()\n\t{\n\t\treturn Location.meetingRoomList;\n\t}\n\n\tstatic setLocationAccessibility(accessibility)\n\t{\n\t\tLocation.accessibility = accessibility;\n\t}\n\n\tstatic getLocationAccessibility()\n\t{\n\t\treturn Location.accessibility;\n\t}\n\n\tstatic setCurrentCapacity(capacity)\n\t{\n\t\tLocation.currentRoomCapacity = capacity;\n\t}\n\n\tstatic getCurrentCapacity()\n\t{\n\t\treturn Location.currentRoomCapacity || 0;\n\t}\n\n\tdisplayInlineEditControls()\n\t{\n\t\tthis.DOM.inlineEditLinkWrap.style.display = 'none';\n\t\tthis.DOM.inputWrap.style.display = '';\n\t\tthis.addLocationRemoveButton();\n\t}\n\n\tsetDefaultRoom(locationList)\n\t{\n\t\tif (this.roomsManager && !RoomsManager.isEmpty(locationList))\n\t\t{\n\t\t\tthis.activeRooms = this.roomsManager.getRoomsInfo().active;\n\t\t\tif (!RoomsManager.isEmpty(this.activeRooms))\n\t\t\t{\n\t\t\t\tconst activeRoomId = this.activeRooms[0];\n\t\t\t\tfor (const locationListElement of locationList)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(locationListElement.ID) === activeRoomId)\n\t\t\t\t\t{\n\t\t\t\t\t\tLocation.setCurrentCapacity(parseInt(locationListElement.CAPACITY));\n\t\t\t\t\t\treturn 'calendar_' + activeRoomId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(parseInt(locationList[0].CAPACITY));\n\t\t\t\treturn 'calendar_' + locationList[0].ID;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetRoomsInterface()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.rooms';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.Rooms.RoomsInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.Rooms.RoomsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.Rooms.RoomsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetRoomsManager()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.roomsmanager';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.RoomsManager)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.RoomsManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.RoomsManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetRoomsManagerData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.getRoomsManagerData')\n\t\t\t\t.then((response) => {\n\n\t\t\t\t\t\tthis.roomsManagerFromDB = new RoomsManager(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsections: response.data.sections,\n\t\t\t\t\t\t\t\trooms: response.data.rooms\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocationAccess: response.data.config.locationAccess,\n\t\t\t\t\t\t\t\thiddenSections: response.data.config.hiddenSections,\n\t\t\t\t\t\t\t\ttype: response.data.config.type,\n\t\t\t\t\t\t\t\townerId: response.data.config.ownerId,\n\t\t\t\t\t\t\t\tuserId: response.data.config.userId,\n\t\t\t\t\t\t\t\tnew_section_access: response.data.config.defaultSectionAccess,\n\t\t\t\t\t\t\t\tsectionAccessTasks: response.data.config.sectionAccessTasks,\n\t\t\t\t\t\t\t\tshowTasks: response.data.config.showTasks,\n\t\t\t\t\t\t\t\tlocationContext: this, //for updating list of locations in event creation menu\n\t\t\t\t\t\t\t\taccessNames: response.data.config.accessNames,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconsole.error('Extension not found');\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcreateRoomList(locationList)\n\t{\n\t\treturn locationList.map((location) => {\n\t\t\treturn new RoomsSection(location);\n\t\t});\n\t}\n\n\tsetRoomsManager()\n\t{\n\t\tif (!this.roomsManagerFromDB)\n\t\t{\n\t\t\tthis.getRoomsManager()\n\t\t\t\t.then(\n\t\t\t\t\tthis.getRoomsManagerData()\n\t\t\t\t);\n\t\t}\n\t}\n\n\tgetCategoryManager()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.categorymanager';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.CategoryManager)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.CategoryManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.CategoryManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetCategoryManagerData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.getCategoryManagerData')\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.categoryManagerFromDB = new CategoryManager(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcategories: response.data.categories,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tperm: response.data.permissions,\n\t\t\t\t\t\t\t\tlocationContext: this //for updating list of locations in event creation menu\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconsole.error('Extension not found');\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tsetCategoryManager()\n\t{\n\t\tif(!this.categoryManagerFromDB)\n\t\t{\n\t\t\tthis.getCategoryManager()\n\t\t\t\t.then(\n\t\t\t\t\tthis.getCategoryManagerData()\n\t\t\t\t);\n\t\t}\n\t}\n\n\tprohibitClick()\n\t{\n\t\tif (\n\t\t\tthis.DOM.inlineEditLinkWrap\n\t\t\t&& !Dom.hasClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly')\n\t\t)\n\t\t{\n\t\t\tDom.addClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly');\n\t\t}\n\t\tif (\n\t\t\tthis.DOM.removeLocationButton\n\t\t\t&& !Dom.hasClass(this.DOM.removeLocationButton, 'calendar-location-readonly')\n\t\t)\n\t\t{\n\t\t\tDom.addClass(this.DOM.removeLocationButton, 'calendar-location-readonly');\n\t\t}\n\t}\n\n\tallowClick()\n\t{\n\t\tif (\n\t\t\tthis.DOM.inlineEditLinkWrap\n\t\t\t&& Dom.hasClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly')\n\t\t)\n\t\t{\n\t\t\tDom.removeClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly');\n\t\t}\n\t\tif (\n\t\t\tthis.DOM.removeLocationButton\n\t\t\t&& Dom.hasClass(this.DOM.removeLocationButton, 'calendar-location-readonly')\n\t\t)\n\t\t{\n\t\t\tDom.removeClass(this.DOM.removeLocationButton, 'calendar-location-readonly');\n\t\t}\n\t}\n\n\tstatic getDateInFormat(date)\n\t{\n\t\treturn ('0' + date.getDate()).slice(-2) + '.'\n\t\t\t+ ('0' + (date.getMonth() + 1)).slice(-2) + '.'\n\t\t\t+ date.getFullYear()\n\t}\n\n\tstatic getDatesRange(from, to)\n\t{\n\t\tlet fromDate = new Date(from);\n\t\tlet toDate = new Date(to);\n\t\tlet startDate = fromDate.setHours(0, 0, 0, 0);\n\t\tlet finishDate = toDate.setHours(0, 0, 0, 0);\n\t\tlet result = [];\n\t\twhile (startDate <= finishDate)\n\t\t{\n\t\t\tresult.push(Location.getDateInFormat(new Date(startDate)));\n\t\t\tstartDate += Location.DAY_LENGTH;\n\t\t}\n\n\t\treturn result;\n\t}\n}","import {Type, Dom} from 'main.core';\nimport {Util} from 'calendar.util';\n\nexport class UserSelector\n{\n\tconstructor(params = {})\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'user_selector_' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrapNode\n\t\t};\n\t\tthis.destinationInputName = params.inputName || 'EVENT_DESTINATION';\n\n\t\tif (Type.isArray(this.params.itemsSelected) && this.params.itemsSelected.length)\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(this.params.itemsSelected);\n\t\t}\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tlet id = this.id;\n\t\tthis.DOM.socnetDestinationWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'event-grid-dest-wrap'},\n\t\t\tevents: {\n\t\t\t\tclick : (e) => {\n\t\t\t\t\tBX.SocNetLogDestination.openDialog(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationItems = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: ''},\n\t\t\tevents: {\n\t\t\t\tclick : function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.SocNetLogDestination.deleteItem(targ.getAttribute('data-item-id'), targ.getAttribute('data-item-type'), id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouseover: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.addClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t},\n\t\t\t\tmouseout: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.removeClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationInputWrap = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {props: {className: 'feed-add-destination-input-box'}}));\n\t\tthis.socnetDestinationInput = this.socnetDestinationInputWrap.appendChild(\n\t\t\tDom.create('INPUT', {\n\t\t\t\tprops: {id: id + '-inp', className: 'feed-add-destination-inp'},\n\t\t\t\tattrs: {value: '', type: 'text'},\n\t\t\t\tevents: {\n\t\t\t\t\tkeydown : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tkeyup : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tthis.socnetDestinationLink = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\thtml: this.params.addLinkMessage || BX.message('EC_DESTINATION_ADD_USERS'),\n\t\t\tprops: {id: id + '-link', className: 'feed-add-destination-link'},\n\t\t\tevents: {\n\t\t\t\tkeydown : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tkeyup : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// if (this.params.itemsSelected && !this.checkItemsSelected(\n\t\t// \tthis.params.items,\n\t\t// \tthis.params.itemsLast,\n\t\t// \tthis.params.itemsSelected,\n\t\t// \tBX.proxy(this.init, this)\n\t\t// ))\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tif (!this.socnetDestinationInput || !this.DOM.socnetDestinationWrap || !this.params.items)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.params.selectGroups === false)\n\t\t{\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t\tthis.params.items.sonetgroups = {};\n\t\t}\n\n\t\tif(this.params.selectUsers === false)\n\t\t{\n\t\t\tthis.params.items.users = {};\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t}\n\n\t\tBX.SocNetLogDestination.init({\n\t\t\tname : this.id,\n\t\t\tsearchInput : this.socnetDestinationInput,\n\t\t\textranetUser :  false,\n\t\t\tuserSearchArea: 'I',\n\t\t\tbindMainPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tbindSearchPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tcallback : {\n\t\t\t\tselect : this.selectCallback.bind(this),\n\t\t\t\tunSelect : this.unSelectCallback.bind(this),\n\t\t\t\topenDialog : this.openDialogCallback.bind(this),\n\t\t\t\tcloseDialog : this.closeDialogCallback.bind(this),\n\t\t\t\topenSearch : this.openDialogCallback.bind(this),\n\t\t\t\tcloseSearch : ()=>{this.closeDialogCallback(true);}\n\t\t\t},\n\t\t\titems : this.params.items,\n\t\t\titemsLast : this.params.itemsLast,\n\t\t\titemsSelected : this.params.itemsSelected,\n\t\t\tdepartmentSelectDisable: this.params.selectGroups === false\n\t\t});\n\t}\n\n\tcloseAll()\n\t{\n\t\tif (top.BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\ttop.BX.SocNetLogDestination.closeDialog();\n\t\t}\n\t\ttop.BX.SocNetLogDestination.closeSearch();\n\t}\n\n\tselectCallback(item, type)\n\t{\n\t\tvar\n\t\t\ttype1 = type,\n\t\t\tprefix = 'S';\n\n\t\tif (type === 'sonetgroups')\n\t\t{\n\t\t\tprefix = 'SG';\n\t\t}\n\t\telse if (type === 'groups')\n\t\t{\n\t\t\tprefix = 'UA';\n\t\t\ttype1 = 'all-users';\n\t\t}\n\t\telse if (type === 'users')\n\t\t{\n\t\t\tprefix = 'U';\n\t\t}\n\t\telse if (type === 'department')\n\t\t{\n\t\t\tprefix = 'DR';\n\t\t}\n\n\t\tthis.socnetDestinationItems.appendChild(\n\t\t\tDom.create(\"span\", { attrs : {'data-id' : item.id }, props : {className : \"event-grid-dest event-grid-dest-\" + type1 }, children: [\n\t\t\t\t\tDom.create(\"input\", { attrs : {type : 'hidden', name : this.destinationInputName + '[' + prefix + '][]', value : item.id }}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"event-grid-dest-text\" }, html : item.name}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"feed-event-del-but\"}, attrs: {'data-item-id': item.id, 'data-item-type': type}})\n\t\t\t\t]})\n\t\t);\n\n\t\tBX.onCustomEvent('OnDestinationAddNewItem', [item]);\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\tunSelectCallback(item, type, search)\n\t{\n\t\tvar elements = BX.findChildren(this.socnetDestinationItems, {attribute: {'data-id': item.id}}, true);\n\t\tif (elements != null)\n\t\t{\n\t\t\tfor (var j = 0; j < elements.length; j++)\n\t\t\t{\n\t\t\t\tBX.remove(elements[j]);\n\t\t\t}\n\t\t}\n\n\t\tBX.onCustomEvent('OnDestinationUnselect');\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\topenDialogCallback()\n\t{\n\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'inline-block');\n\t\tBX.style(this.socnetDestinationLink, 'display', 'none');\n\t\tBX.focus(this.socnetDestinationInput);\n\t}\n\n\tcloseDialogCallback(cleanInputValue)\n\t{\n\t\tif (!top.BX.SocNetLogDestination.isOpenSearch() && this.socnetDestinationInput.value.length <= 0)\n\t\t{\n\t\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'none');\n\t\t\tBX.style(this.socnetDestinationLink, 'display', 'inline-block');\n\t\t\tif (cleanInputValue === true)\n\t\t\t\tthis.socnetDestinationInput.value = '';\n\n\t\t\t// Disable backspace\n\t\t\tif (top.BX.SocNetLogDestination.backspaceDisable || top.BX.SocNetLogDestination.backspaceDisable != null)\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\n\t\t\tBX.bind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable = function(e)\n\t\t\t{\n\t\t\t\tif (e.keyCode === 8)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\t\t\t\ttop.BX.SocNetLogDestination.backspaceDisable = null;\n\t\t\t}, 5000);\n\t\t}\n\t}\n\n\tgetCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tcodes = [], i;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tcodes.push(inputsList[i].value);\n\t\t}\n\t\treturn codes;\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tvalues = [],\n\t\t\ti, code;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tvalues.push(inputsList[i].value);\n\t\t}\n\n\t\treturn this.convertAttendeesCodes(values);\n\t}\n\n\tconvertAttendeesCodes(values)\n\t{\n\t\tlet attendeesCodes = {};\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tvalues.forEach(function(code)\n\t\t\t{\n\t\t\t\tif (code.substr(0, 2) === 'DR')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"department\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'UA')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"groups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'SG')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"sonetgroups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 1) === 'U')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"users\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn attendeesCodes;\n\t}\n\n\tgetAttendeesCodesList(codes)\n\t{\n\t\tlet result = [];\n\t\tif (!codes)\n\t\t\tcodes = this.getAttendeesCodes();\n\t\tfor (let i in codes)\n\t\t{\n\t\t\tif (codes.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.socnetDestinationItems)\n\t\t{\n\t\t\tDom.clean(this.socnetDestinationItems);\n\t\t}\n\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(value);\n\t\t}\n\t\tthis.init();\n\t}\n}","import { Tag, Loc, Dom, Event, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { MenuManager } from 'main.popup';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class ColorSelector extends EventEmitter\n{\n\tLINE_MODE = 'line';\n\tSELECTOR_MODE = 'selector';\n\tVIEW_MODE = 'view';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ColorSelector');\n\t\tthis.id = params.id || 'color-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.defaultColors = Util.getDefaultColorList();\n\t\tthis.colors = [];\n\t\tthis.zIndex = 3100;\n\t\tthis.mode = params.mode || this.LINE_MODE;\n\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap\n\t\t};\n\t\tthis.create();\n\n\t\tthis.setViewMode(params.viewMode || false);\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tfor (let i = 0; i < this.defaultColors.length; i++)\n\t\t\t{\n\t\t\t\tthis.colors.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: this.defaultColors[i],\n\t\t\t\t\t\tnode: this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item' },\n\t\t\t\t\t\t\t\tattrs: { 'data-bx-calendar-color': this.defaultColors[i] },\n\t\t\t\t\t\t\t\tstyle: { backgroundColor: this.defaultColors[i] },\n\t\t\t\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.DOM.customColorNode = this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t{\n\t\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item' },\n\t\t\t\t\tstyle:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\t\t\twidth: 0\n\t\t\t\t\t\t},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}\n\t\t\t));\n\n\t\t\tthis.DOM.customColorLink = this.DOM.wrap.appendChild(Dom.create('LI', {\n\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item-more' },\n\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color-item-more-link\">' + Loc.getMessage('EC_COLOR') + '</span>',\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tif (!this.colorPickerPopup)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.colorPickerPopup = new BX.ColorPicker({\n\t\t\t\t\t\t\t\tbindElement: this.DOM.customColorLink,\n\t\t\t\t\t\t\t\tonColorSelected: this.setValue.bind(this),\n\t\t\t\t\t\t\t\tpopupOptions: { zIndex: this.zIndex }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.colorPickerPopup.open();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleColorClick.bind(this));\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE)\n\t\t{\n\t\t\tthis.DOM.colorIcon = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<div style=\"background-color: #000;\" class=\"calendar-field-select-icon\"></div>\n\t\t\t`);\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.openPopup.bind(this));\n\t\t}\n\t\telse if (this.mode === this.VIEW_MODE)\n\t\t{\n\t\t\tthis.DOM.colorIcon = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<div style=\"background-color: #000;\" class=\"calendar-field-select-icon\"></div>\n\t\t\t`);\n\t\t}\n\t}\n\n\thandleColorClick(e)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet target = Util.findTargetNode(e.target || e.srcElement, this.DOM.wrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tlet value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tthis.setValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(color, emitChanges = true)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activeColor = color;\n\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tif (this.DOM.activeColorNode)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tif (!BX.util.in_array(this.activeColor, this.defaultColors) && this.activeColor)\n\t\t\t{\n\t\t\t\tthis.DOM.customColorNode.style.backgroundColor = this.activeColor;\n\t\t\t\tthis.DOM.customColorNode.style.width = '';\n\n\t\t\t\tthis.DOM.activeColorNode = this.DOM.customColorNode;\n\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.colors.length; i++)\n\t\t\t{\n\t\t\t\tif (this.colors[i].color === this.activeColor)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.activeColorNode = this.colors[i].node;\n\t\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE || this.mode === this.VIEW_MODE)\n\t\t{\n\t\t\tif (this.DOM.colorIcon)\n\t\t\t{\n\t\t\t\tthis.DOM.colorIcon.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t\tif (this.viewMode)\n\t\t\t{\n\t\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({ data: { value: this.activeColor } }));\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.activeColor;\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.popup && this.popup.popupWindow && this.popup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.popup.close();\n\t\t}\n\n\t\tlet\n\t\t\ti, menuItems = [], icon;\n\n\t\tthis.defaultColors.forEach((color) => {\n\t\t\tmenuItems.push({\n\t\t\t\t\ttext: color,\n\t\t\t\t\tcolor: color,\n\t\t\t\t\tclassName: 'calendar-add-popup-color-menu-item',\n\t\t\t\t\tonclick: ((color) => {\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\tthis.setValue(color);\n\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t};\n\t\t\t\t\t})(color)\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tthis.popup = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.colorIcon,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tclassName: 'calendar-color-popup-wrap',\n\t\t\t\twidth: 162,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 52,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.popup.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.popup.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\ticon = this.popup.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (Type.isDomNode(icon))\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.popup.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.popup.popupWindow.angle.element.style.left = '6px';\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.clean(this.DOM.wrap);\n\t\t\tthis.DOM.wrap.className = 'calendar-field-select-icon';\n\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Dom.removeClass(this.DOM.wrap, 'calendar-colorpicker-readonly');\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Text, Loc} from \"main.core\";\nimport \"ui.icons.b24\";\nimport {MenuManager, MenuItem} from \"main.popup\";\n\nexport class SectionSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'section-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.sectionList = params.sectionList;\n\t\tthis.sectionGroupList = params.sectionGroupList;\n\t\tthis.selectCallback = params.selectCallback;\n\t\tthis.openPopupCallback = params.openPopupCallback;\n\t\tthis.closePopupCallback = params.closePopupCallback;\n\t\tthis.getCurrentSection = params.getCurrentSection;\n\n\t\tthis.defaultCalendarType = params.defaultCalendarType;\n\t\tthis.defaultOwnerId = parseInt(params.defaultOwnerId) || 0;\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.mode = params.mode; // full|compact|textselect\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap\n\t\t};\n\n\t\tthis.create();\n\t\tthis.initEventHandlers();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap;\n\t\t\tthis.DOM.selectImageWrap = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-img\"></span>`);\n\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-name\">${Text.encode(Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle())}</span>`);\n\t\t}\n\t\telse if(this.mode === 'location')\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap;\n\t\t\tthis.DOM.selectImageWrap = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-img\"></span>`);\n\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-name calendar-field-choice-calendar-name-location\">${Text.encode(Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle())}</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field calendar-field-select' + (this.mode === 'compact' ? ' calendar-field-tiny' : '')}\n\t\t\t}));\n\n\t\t\tthis.DOM.innerValue = this.DOM.select.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field-select-icon'},\n\t\t\t\tstyle: {backgroundColor : this.getCurrentColor()}\n\t\t\t}));\n\n\t\t\tif (this.mode === 'full')\n\t\t\t{\n\t\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Dom.create('SPAN', {text: this.getCurrentTitle()}));\n\t\t\t}\n\t\t}\n\t}\n\n\tinitEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.select, 'click', BX.delegate(this.openPopup, this));\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.sectionMenu && this.sectionMenu.popupWindow && this.sectionMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.sectionMenu.close();\n\t\t}\n\n\t\tconst menuItems = [];\n\t\tconst sectionIdList = [];\n\t\tconst sectionList = this.getSectionList();\n\t\tlet i;\n\n\t\tif (Type.isArray(this.sectionGroupList))\n\t\t{\n\t\t\tthis.sectionGroupList.forEach((sectionGroup) => {\n\t\t\t\tlet filteredList;\n\t\t\t\tif (sectionGroup.belongsToView)\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === this.defaultCalendarType\n\t\t\t\t\t\t\t&& SectionSelector.getSectionOwner(section) === this.defaultOwnerId;\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'user' || sectionGroup.type === 'location')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'user'\n\t\t\t\t\t\t\t&& SectionSelector.getSectionOwner(section) === sectionGroup.ownerId;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'company')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'company_calendar'\n\t\t\t\t\t\t\t|| SectionSelector.getSectionType(section) === 'calendar_company'\n\t\t\t\t\t\t\t|| SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfilteredList = filteredList.filter((section) => {\n\t\t\t\t\tconst id = parseInt(section.id || section.ID);\n\t\t\t\t\tif (sectionIdList.includes(id))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tsectionIdList.push(id);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tif (filteredList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push(\n\t\t\t\t\t\tnew MenuItem({\n\t\t\t\t\t\ttext: sectionGroup.title,\n\t\t\t\t\t\tdelimiter: true\n\t\t\t\t\t}));\n\n\t\t\t\t\tfor (let i = 0; i < filteredList.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItems.push(this.getMenuItem(filteredList[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (i = 0; i < sectionList.length; i++)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.getMenuItem(sectionList[i]));\n\t\t\t}\n\t\t}\n\n\t\tlet offsetLeft = 0;\n\t\tif (this.mode === 'compact')\n\t\t{\n\t\t\toffsetLeft = 40;\n\t\t}\n\t\telse if(this.mode === 'textselect' || this.mode === 'location')\n\t\t{\n\t\t\toffsetLeft = 0;\n\t\t}\n\n\t\tthis.sectionMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.select,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: offsetLeft,\n\t\t\t\tangle: this.mode === 'compact'\n\t\t\t}\n\t\t);\n\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflow = \"auto\";\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.maxHeight = \"400px\";\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.sectionMenu.popupWindow.setWidth(this.DOM.select.offsetWidth - 2);\n\t\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflowX = \"hidden\";\n\t\t}\n\n\t\tthis.sectionMenu.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.sectionMenu.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.sectionMenu.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\tlet icon = this.sectionMenu.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.sectionMenu.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addClass(this.DOM.select, 'active');\n\n\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t{\n\t\t\tthis.openPopupCallback(this);\n\t\t}\n\n\t\tBX.addCustomEvent(this.sectionMenu.popupWindow, 'onPopupClose', BX.delegate(function()\n\t\t{\n\t\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t\t{\n\t\t\t\tthis.closePopupCallback();\n\t\t\t}\n\t\t\tBX.removeClass(this.DOM.select, 'active');\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.sectionMenu = null;\n\t\t}, this));\n\t}\n\n\tgetCurrentColor()\n\t{\n\t\treturn (this.getCurrentSection() || {}).color || false;\n\t}\n\n\tgetCurrentTitle()\n\t{\n\t\treturn (this.getCurrentSection() || {}).name || '';\n\t}\n\n\tgetSectionList()\n\t{\n\t\treturn this.sectionList.filter((section) => {\n\t\t\treturn (section.PERM && section.PERM.edit) || (Type.isFunction(section.canDo) && section.canDo('edit'));\n\t\t});\n\t}\n\n\tupdateSectionImageNode(section)\n\t{\n\t\tif (!Type.isElementNode(this.DOM.selectImageWrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (section === undefined)\n\t\t{\n\t\t\tsection = this.sectionList.find((section) => {\n\t\t\t\treturn parseInt(section.id) === parseInt(this.getCurrentSection().id);\n\t\t\t});\n\t\t}\n\n\t\tif (section && section.type)\n\t\t{\n\t\t\tconst imageSrc = SectionSelector.getSectionImage(section);\n\t\t\tlet imageNode;\n\t\t\tif (imageSrc)\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<img class=\"calendar-field-choice-calendar-img-value\" src=\"${encodeURI(imageSrc)}\">`;\n\t\t\t}\n\t\t\telse if(section.type === 'group')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user-group\"><i></i></div>`;\n\t\t\t}\n\t\t\telse if(section.type === 'user')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user\"><i></i></div>`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-bitrix24\"><i></i></div>`;\n\t\t\t}\n\n\t\t\tDom.clean(this.DOM.selectImageWrap);\n\t\t\tthis.DOM.selectImageWrap.appendChild(imageNode);\n\t\t}\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.sectionMenu;\n\t}\n\n\tgetMenuItem(sectionItem)\n\t{\n\t\tlet _this = this;\n\t\treturn {\n\t\t\thtml: BX.util.htmlspecialchars(sectionItem.name || sectionItem.NAME),\n\t\t\tcolor: sectionItem.color || sectionItem.COLOR,\n\t\t\tclassName: 'calendar-add-popup-section-menu-item' + (this.mode === 'full' ? ' section-menu-item-full' : ''),\n\t\t\tonclick: (function (section)\n\t\t\t{\n\t\t\t\treturn () => {\n\t\t\t\t\tif (Type.isDomNode(_this.DOM.innerValue))\n\t\t\t\t\t{\n\t\t\t\t\t\t_this.DOM.innerValue.style.backgroundColor = section.color || sectionItem.COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.updateSectionImageNode(section);\n\t\t\t\t\tif (Type.isFunction(_this.selectCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!section.color && sectionItem.COLOR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.color = sectionItem.COLOR;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!section.id && sectionItem.ID)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.id = sectionItem.ID;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.selectCallback(section);\n\t\t\t\t\t}\n\t\t\t\t\t_this.sectionMenu.close();\n\t\t\t\t\t_this.updateValue();\n\t\t\t\t}\n\t\t\t})(sectionItem)\n\t\t}\n\t}\n\n\tstatic getSectionType(section)\n\t{\n\t\treturn section.type || section.CAL_TYPE;\n\t}\n\n\tstatic getSectionImage(section = {})\n\t{\n\t\treturn section.data ? section.data.IMAGE : (section.IMAGE || '');\n\t}\n\n\tstatic getSectionOwner(section)\n\t{\n\t\treturn parseInt(section.OWNER_ID || section.data.OWNER_ID)\n\t}\n\n\tupdateValue()\n\t{\n\t\tif (Type.isDomNode(this.DOM.innerValue))\n\t\t{\n\t\t\tthis.DOM.innerValue.style.backgroundColor = this.getCurrentColor();\n\t\t}\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\ttext: this.getCurrentTitle(),\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: this.getCurrentTitle()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse if (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.updateSectionImageNode();\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle()\n\t\t\t\t},\n\t\t\t\ttext: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle(),\n\t\t\t}));\n\t\t}\n\t\telse if(this.mode === 'location')\n\t\t{\n\t\t\tthis.updateSectionImageNode();\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle()\n\t\t\t\t},\n\t\t\t\ttext: Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle(),\n\t\t\t}));\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t\tif (this.DOM.outerWrap !== this.DOM.select)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.select, 'calendar-field-select');\n\t\t\t\tDom.addClass(this.DOM.select, 'calendar-section-selector-readonly');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t}\n\t}\n}\n","import { Util } from 'calendar.util';\nimport { DateTimeControl } from \"calendar.controls\";\n\nexport class RepeatSelector\n{\n\tconstructor(params)\n\t{\n\t\tlet formElements =  params.rruleType.form.elements;\n\n\t\tthis.getDate = params.getDate;\n\t\tthis.previousDate = null;\n\t\tthis.DOM = {\n\t\t\tformElements: formElements,\n\t\t\twrap: params.wrap,\n\t\t\trruleType: params.rruleType,\n\t\t\tinterval: formElements['EVENT_RRULE[INTERVAL]'],\n\t\t\trruleEndsOn: {\n\t\t\t\tnever: formElements['rrule_endson'][0],\n\t\t\t\tcount: formElements['rrule_endson'][1],\n\t\t\t\tuntil: formElements['rrule_endson'][2],\n\t\t\t},\n\t\t\tcount: formElements['EVENT_RRULE[COUNT]'],\n\t\t\tuntil: formElements['EVENT_RRULE[UNTIL]'],\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tBX.bind(this.DOM.rruleType, 'change', () => {\n\t\t\tthis.changeType(this.DOM.rruleType.value);\n\t\t});\n\n\t\tBX.bind(this.DOM.until, 'click', (e) => {\n\t\t\tDateTimeControl.showInputCalendar(e);\n\t\t\tthis.DOM.rruleEndsOn.until.checked = true;\n\t\t});\n\n\t\tBX.bind(this.DOM.count, 'click', () => {\n\t\t\tthis.DOM.rruleEndsOn.count.checked = true;\n\t\t});\n\t}\n\n\tchangeType(type)\n\t{\n\t\tthis.DOM.rruleType.value = type ? type.toUpperCase() : 'NONE';\n\t\tlet rruleType = this.DOM.rruleType.value.toLowerCase();\n\t\tthis.DOM.wrap.className = 'calendar-rrule-type-' + rruleType;\n\n\t\tif (rruleType === 'weekly' && BX.type.isFunction(this.getDate))\n\t\t{\n\t\t\tlet fromDate = this.getDate();\n\t\t\tif (BX.type.isDate(fromDate))\n\t\t\t{\n\t\t\t\tlet day = Util.getWeekDayByInd(fromDate.getDay());\n\t\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t\t{\n\t\t\t\t\tif (input.checked && this.previousDay === input.value && this.previousDay !== day)\n\t\t\t\t\t{\n\t\t\t\t\t\tinput.checked = false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tinput.checked = input.checked || input.value === day;\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t\t\n\t\t\t\tthis.previousDay = day;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(rrule = {})\n\t{\n\t\tthis.changeType(rrule.FREQ);\n\t\tthis.DOM.interval.value = rrule.INTERVAL || 1;\n\t\tif (rrule.COUNT)\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = 'checked';\n\t\t\tthis.DOM.count.value = rrule.COUNT;\n\t\t}\n\t\telse if(rrule['~UNTIL'])\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.until.checked = 'checked';\n\t\t\tthis.DOM.until.value = rrule['~UNTIL'];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.never.checked = 'checked';\n\t\t}\n\n\t\tif (BX.type.isPlainObject(rrule.BYDAY))\n\t\t{\n\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t{\n\t\t\t\tinput.checked = rrule.BYDAY.hasOwnProperty(input.value);\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.DOM.rruleType.value.toLowerCase();\n\t}\n}","import { Loc } from 'main.core';\nexport class SelectInput\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'bx-select-input-' + Math.round(Math.random() * 1000000);\n\t\tthis.values = params.values || false;\n\t\tthis.input = params.input;\n\n\t\tthis.defaultValue = params.defaultValue || '';\n\t\tthis.openTitle = params.openTitle || '';\n\t\tthis.className = params.className || '';\n\n\t\tthis.onChangeCallback = params.onChangeCallback || null;\n\t\tthis.zIndex = params.zIndex || 1200;\n\t\tthis.disabled = params.disabled;\n\n\t\tthis.setValue({\n\t\t\tvalue: params.value,\n\t\t\tvalueIndex: params.valueIndex\n\t\t});\n\n\t\tthis.curInd = false;\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.bind(this.input, 'change', this.onChangeCallback);\n\t\t\t// BX.bind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tif (this.values)\n\t\t{\n\t\t\tBX.bind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\t\tBX.bind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\t\tBX.bind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\t\tBX.bind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\t\t}\n\t}\n\n\tsetValue(params)\n\t{\n\t\tthis.currentValue = {value: params.value};\n\t\tthis.currentValueIndex = params.valueIndex;\n\t\tif (this.currentValueIndex !== undefined && this.values[this.currentValueIndex])\n\t\t{\n\t\t\tthis.input.value = this.values[this.currentValueIndex].label;\n\t\t}\n\t}\n\n\tsetValueList(valueList)\n\t{\n\t\tthis.values = valueList;\n\t}\n\n\tgetInputValue()\n\t{\n\t\treturn this.input.value;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.shown || this.disabled)\n\t\t\treturn;\n\n\t\tlet\n\t\t\tind = 0,\n\t\t\tj = 0,\n\t\t\tmenuItems = [],\n\t\t\ti, _this = this;\n\n\t\tfor (i = 0; i < this.values.length; i++)\n\t\t{\n\t\t\tif (this.values[i].delimiter)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.values[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.currentValue && this.values[i]\n\t\t\t\t\t&& i > 0\n\t\t\t\t\t&& this.currentValue.value >= this.values[i-1].value\n\t\t\t\t\t&& this.currentValue.value <= this.values[i].value)\n\t\t\t\t{\n\t\t\t\t\tind = j;\n\t\t\t\t}\n\n\t\t\t\tlet htmlTemp;\n\t\t\t\tif (this.values[i].reserved)\n\t\t\t\t{\n\t\t\t\t\thtmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title-with-status\">\n\t\t\t\t\t\t\t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"calendar-menu-item-status --red\">\n\t\t\t\t\t\t\t${Loc.getMessage('EC_LOCATION_RESERVED')}\n\t\t\t\t\t\t</span>`\n\t\t\t\t}\n\t\t\t\telse if (this.values[i].capacity)\n\t\t\t\t{\n\t\t\t\t\t htmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title-with-status\">\n\t\t\t\t\t    \t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t     \t</span>\n\t\t\t\t     \t<span class=\"calendar-menu-item-capacity\">\n\t\t\t\t\t    \t${BX.util.htmlspecialchars(this.values[i].labelCapacity)}\n\t\t\t\t    \t</span>`\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thtmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title\">\n\t\t\t\t\t\t\t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t\t\t</span>`\n\t\t\t\t}\n\n\t\t\t\tif(this.values[i].color)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\t\ttitle: this.values[i].label,\n\t\t\t\t\t\tclassName: \"menu-popup-display-flex calendar-location-popup-menu-item\",\n\t\t\t\t\t\thtml: htmlTemp,\n\t\t\t\t\t\tcolor: this.values[i].color,\n\t\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t\t_this.onChange();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst hint = this.values[i].hint ? ' ' + this.values[i].hint :  '';\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\t\thtml: this.values[i].label + hint,\n\t\t\t\t\t\ttitle: this.values[i].label,\n\t\t\t\t\t\tclassName: \"menu-popup-no-icon\" + (this.values[i].selected ? ' calendar-menu-popup-time-selected' : ''),\n\t\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t\t_this.onChange(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\n\t\tthis.popupMenu = BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.input,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: -1\n\t\t\t}\n\t\t);\n\n\t\tif (!BX.browser.IsFirefox())\n\t\t{\n\t\t\tthis.popupMenu.popupWindow.setMinWidth(this.input.offsetWidth + 2);\n\t\t}\n\n\t\tthis.popupMenu.popupWindow.setMaxWidth(300);\n\n\t\tlet menuContainer = this.popupMenu.layout.menuContainer;\n\t\tBX.addClass(this.popupMenu.layout.menuContainer, 'calendar-select-popup');\n\t\tthis.popupMenu.show();\n\n\t\tlet menuItem = this.popupMenu.menuItems[ind];\n\n\t\tif (menuItem && menuItem.layout)\n\t\t{\n\t\t\tmenuContainer.scrollTop = menuItem.layout.item.offsetTop - menuItem.layout.item.offsetHeight - 36 * 3;\n\t\t}\n\n\t\tlet popupMenuItems = this.popupMenu.menuItems;\n\n\t\tfor (i = 0; i < popupMenuItems.length; i++)\n\t\t{\n\t\t\tif (popupMenuItems[i].layout.item)\n\t\t\t{\n\t\t\t\tlet icon = popupMenuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = popupMenuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addCustomEvent(this.popupMenu.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.shown = false;\n\t\t\tthis.popupMenu = null;\n\t\t}.bind(this));\n\n\t\tthis.input.select();\n\n\t\tthis.shown = true;\n\t}\n\n\tclosePopup()\n\t{\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n\n\tonFocus()\n\t{\n\t\tsetTimeout(function(){\n\t\t\tif (!this.shown)\n\t\t\t{\n\t\t\t\tthis.showPopup();\n\t\t\t}\n\t\t}.bind(this), 200);\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.shown)\n\t\t{\n\t\t\tthis.closePopup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showPopup();\n\t\t}\n\t}\n\n\tonBlur()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 200);\n\t}\n\n\tonKeyup()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 50);\n\t}\n\n\tonChange(value)\n\t{\n\t\tvar inputValue = this.input.value;\n\t\tBX.onCustomEvent(this, 'onSelectInputChanged', [this, inputValue]);\n\t\tif (BX.type.isFunction(this.onChangeCallback))\n\t\t{\n\t\t\tthis.onChangeCallback({value: inputValue, dataValue: value});\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.unbind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.unbind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tBX.unbind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\tBX.unbind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\tBX.unbind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\tBX.unbind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\n\t\tif (this.popupMenu)\n\t\t{\n\t\t\tthis.popupMenu.close();\n\t\t}\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n}\n\n\n\n","export class PopupDialog {\n\tconstructor(params = {})\n\t{\n\t\tthis.id = params.id || 'popup-dialog-' + Math.random();\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.DOM = {};\n\t\tthis.title = '';\n\t}\n\n\tcreate()\n\t{\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: this.getTitle(),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: this.getButtons(),\n\t\t\tcontent: this.getContent(),\n\t\t\tevents: {}\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\tthis.buttons = [];\n\t\treturn this.buttons;\n\t}\n\n\tshow(params)\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager} from 'main.popup';\n\nexport class ViewSelector extends EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\n\t\tif (params.currentViewMode)\n\t\t{\n\t\t\tthis.setViewMode(params.currentViewMode);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-selector\"></div>`;\n\t\tthis.DOM.selectorText = Tag.render`<div class=\"calendar-view-switcher-text\"></div>`;\n\t\tthis.DOM.selectorTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-inner\"></div>`);\n\t\tthis.DOM.wrap.appendChild(this.DOM.selectorText);\n\t\tthis.DOM.wrap.appendChild(Tag.render`<div class=\"calendar-view-switcher-dropdown\"></div>`);\n\t\tEvent.bind(this.DOM.wrap, 'click', this.showPopup.bind(this));\n\t\tthis.DOM.viewModeTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-mode-inner\" style=\"display: none;\"></div>`);\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tDom.adjust(this.DOM.selectorTextInner, {text: this.currentValue.text});\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\tif (this.currentViewMode)\n\t\t\t{\n\t\t\t\tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t}\n\t\t\tthis.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach(function(view)\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\t//text: view.text,\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = MenuManager.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.selectorText,\n\t\t\tthis.getMenuItems(),\n\t\t\t{\n\t\t\t\tclassName: \"calendar-view-switcher-popup\",\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: -3,\n\t\t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\t}\n\n\tclosePopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tthis.DOM.wrap.style.display = '';\n\t}\n\n\thide()\n\t{\n\t\tthis.DOM.wrap.style.display = 'none';\n\t}\n}\n\n\n\n","import {Type, Dom, Event, Tag, Loc} from 'main.core';\n//import {ViewSelector} from './viewselector';\nimport {EventEmitter} from 'main.core.events';\n\nexport class LineViewSelector extends  EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.LineViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.viewsMap = new WeakMap();\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-list\"></div>`;\n\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tthis.viewsMap.set(view, {\n\t\t\t\t\twrap: this.DOM.wrap.appendChild(Tag.render`<span \n\t\t\t\t\t\tclass=\"calendar-view-switcher-list-item\"\n\t\t\t\t\t\tonclick=\"${()=>{\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\"\n\t\t\t\t\t>${view.text}</span>`)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tlet viewData = this.viewsMap.get(this.currentValue);\n\t\t\tlet currentActiveWrap = this.DOM.wrap.querySelector('.calendar-view-switcher-list-item-active');\n\t\t\tif (Type.isDomNode(currentActiveWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(currentActiveWrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(viewData.wrap))\n\t\t\t{\n\t\t\t\tDom.addClass(viewData.wrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\t// if (this.currentViewMode)\n\t\t\t// {\n\t\t\t// \tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t// }\n\t\t\t//this.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\t// showPopup()\n\t// {\n\t// \tthis.closePopup();\n\t//\n\t// \tthis.menuPopup = MenuManager.create(\n\t// \t\tthis.popupId,\n\t// \t\tthis.DOM.selectorText,\n\t// \t\tthis.getMenuItems(),\n\t// \t\t{\n\t// \t\t\tclassName: \"calendar-view-switcher-popup\",\n\t// \t\t\tcloseByEsc : true,\n\t// \t\t\tautoHide : true,\n\t// \t\t\tzIndex: this.zIndex,\n\t// \t\t\toffsetTop: -3,\n\t// \t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t// \t\t\tangle: true,\n\t// \t\t\tcacheable: false\n\t// \t\t}\n\t// \t);\n\t//\n\t// \tthis.menuPopup.show();\n\t// }\n\t//\n\t// closePopup()\n\t// {\n\t// \tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t// \t{\n\t// \t\treturn this.menuPopup.close();\n\t// \t}\n\t// }\n}\n\n\n\n","import {Dom, Loc, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class AddButton extends EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.AddButton');\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'add-button-' + Math.round(Math.random() * 10000);\n\t\tthis.showTasks = params.showTasks;\n\n\t\tthis.addEntryHandler = Type.isFunction(params.addEntry) ? params.addEntry : null;\n\t\tthis.addTaskHandler = Type.isFunction(params.addTask) ? params.addTask : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.menuItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_EVENT_BUTTON'),\n\t\t\t\tonclick: this.addEntry.bind(this)\n\t\t\t}\n\t\t];\n\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.menuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_TASK_BUTTON'),\n\t\t\t\tonclick: this.addTask.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tif (this.menuItems.length > 1)\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-split ui-btn-success\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create(\"button\", {\n\t\t\t\t\t\tprops: {className: \"ui-btn-main\", type: \"button\"},\n\t\t\t\t\t\thtml: Loc.getMessage('EC_CREATE'),\n\t\t\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.DOM.addButtonExtra = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-extra\"},\n\t\t\t\tevents: {click: this.showPopup.bind(this)}\n\t\t\t});\n\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButtonExtra)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"button\", {\n\t\t\t\tprops: {className: \"ui-btn ui-btn-success\", type: \"button\"},\n\t\t\t\thtml: Loc.getMessage('EC_CREATE'),\n\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t});\n\t\t}\n\t\tthis.DOM.wrap.setAttribute('data-role', 'addButton');\n\t}\n\n\tgetWrap()\n\t{\n\t\treturn this.DOM.wrap;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = BX.PopupMenu.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.addButtonExtra,\n\t\t\tthis.menuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\n\t\tBX.addCustomEvent(this.menuPopup.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.popupId);\n\t\t\tthis.menuPopup = null;\n\t\t\tthis.addBtnMenu = null;\n\t\t}.bind(this));\n\t}\n\n\taddEntry()\n\t{\n\t\tif (this.addEntryHandler)\n\t\t{\n\t\t\tthis.addEntryHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n\n\taddTask()\n\t{\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.addTaskHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}","import {Dom, Event, Loc, Type} from 'main.core';\nimport {Util} from 'calendar.util';\n\nexport class MeetingStatusControl extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.MeetingStatusControl');\n\t\tthis.BX = Util.getBX();\n\n\t\tif (params.wrap && Type.isDomNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error(\"The argument \\\"params.wrap\\\" must be a DOM node.\");\n\t\t}\n\t\tthis.id = params.id || 'meeting-status-control-' + Math.round(Math.random() * 10000);\n\t\tthis.zIndex = 3100;\n\n\t\tthis.create();\n\n\t\tthis.status = params.currentStatus || null;\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.updateStatus();\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.acceptBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y'),\n\t\t\tclassName: 'ui-btn ui-btn-primary',\n\t\t\tevents: {click: this.accept.bind(this)}\n\t\t});\n\t\tthis.acceptBtn.renderTo(this.DOM.wrap);\n\n\t\tthis.declineBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_N'),\n\t\t\tclassName: 'ui-btn ui-btn-light-border',\n\t\t\tevents: {click: this.decline.bind(this)}\n\t\t});\n\t\tthis.declineBtn.renderTo(this.DOM.wrap);\n\t}\n\n\tupdateStatus()\n\t{\n\t\tif (this.status === 'H')\n\t\t{\n\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\tthis.declineBtn.setText(Loc.getMessage('EC_VIEW_DESIDE_BUT_OWNER_N'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.status === 'Y')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t\telse if (this.status === 'N')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = 'none';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\taccept()\n\t{\n\t\tthis.setStatus('Y');\n\t}\n\n\tdecline()\n\t{\n\t\tthis.setStatus('N');\n\t}\n\n\tsetStatus(value, emitEvent = true)\n\t{\n\t\tthis.status = value;\n\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\n\t\tif (emitEvent)\n\t\t{\n\t\t\tthis.emit('onSetStatus', new Event.BaseEvent({data: {status: value}}));\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport { EntryManager } from 'calendar.entry';\nimport { EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmStatusDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_DECLINE_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_ONLY_THIS'),\n\t\t\tevents: {\n\t\t\t\tclick : () => {\n\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : () => {\n\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_DECLINE_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : () => {\n\t\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\tonDeclineHandler()\n\t{\n\t\tthis.close();\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (compactForm\n\t\t\t&& compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.close();\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmEditDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmEditDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-edit-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EDIT_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : ()=>{\n\t\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","'use strict';\nimport {PopupDialog} from './popupdialog';\n\nexport class ConfirmDeleteDialog extends PopupDialog\n{\n\tconstructor(params = {})\n\t{\n\t\tsuper(params);\n\t\tthis.title = BX.message('EC_DEL_REC_EVENT');\n\t\tthis.entry = params.entry;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteThis();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteNext();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: BX.message('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function() {\n\t\t\t\t\t\tthis.entry.deleteAll();\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn [\n\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\ttext: BX.message('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t})\n\t\t];\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {TimeSelector} from \"./timeselector\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class DateTimeControl extends EventEmitter\n{\n\tDATE_INPUT_WIDTH = 110;\n\tTIME_INPUT_WIDTH = 90;\n\tzIndex = 4200;\n\n\tfrom = null;\n\tto = null;\n\n\tconstructor(uid, options = {showTimezone: true})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.DateTimeControl');\n\n\t\tthis.showTimezone = options.showTimezone;\n\t\tthis.inlineEditMode = !!options.inlineEditMode;\n\t\tthis.currentInlineEditMode = options.currentInlineEditMode || 'view';\n\n\t\tthis.UID = uid || 'date-time-' + Math.round(Math.random() * 100000);\n\n\t\tthis.DOM = {\n\t\t\touterWrap: options.outerWrap || null,\n\t\t\touterContent: options.outerContent || null\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t{\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\n\t\t\tthis.DOM.leftInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-left\"></div>`);\n\n\t\t\tthis.DOM.fromDate = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromDateText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.fromTime = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px; max-width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromTimeText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.betweenSpacer = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-between\" />`);\n\n\t\t\tthis.DOM.rightInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-right\"></div>`);\n\n\t\t\tthis.DOM.toTime = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px; max-width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toTimeText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.toDate = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>`);\n\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toDateText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.fromTime,\n\t\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t\t});\n\n\t\t\tthis.toTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.toTime,\n\t\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t\t});\n\n\t\t\tlet fullDayWrap = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-event-full-day\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.fullDay = fullDayWrap.appendChild(Tag.render`\n\t\t\t\t<input value=\"Y\" type=\"checkbox\" id=\"{this.UID}\"/>\n\t\t\t`);\n\t\t\tfullDayWrap.appendChild(Tag.render`<label for=\"{this.UID}\">${Loc.getMessage('EC_ALL_DAY')}</label>`);\n\t\t}\n\n\t\t//this.DOM.defTimezoneWrap = BX(this.UID + '_timezone_default_wrap');\n\t\t//this.DOM.defTimezone = BX(this.UID + '_timezone_default');\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\t// this.DOM.fromTz = BX(this.UID + '_timezone_from');\n\t\t\t// this.DOM.toTz = BX(this.UID + '_timezone_to');\n\t\t\t// this.DOM.tzButton = BX(this.UID + '_timezone_btn');\n\t\t\t// this.DOM.tzOuterCont = BX(this.UID + '_timezone_wrap');\n\t\t\t// this.DOM.tzCont = BX(this.UID + '_timezone_inner_wrap');\n\t\t\t// BX(this.UID + '_timezone_hint').title = BX.message('EC_EVENT_TZ_HINT');\n\t\t\t// BX(this.UID + '_timezone_default_hint').title = BX.message('EC_EVENT_TZ_DEF_HINT');\n\t\t}\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tsetValue(value = {})\n\t{\n\t\tthis.DOM.fromDate.value = Util.formatDate(value.from);\n\t\tthis.DOM.toDate.value = Util.formatDate(value.to);\n\n\t\tthis.DOM.fromTime.value = Util.formatTime(value.from);\n\t\tthis.DOM.toTime.value = Util.formatTime(value.to);\n\n\t\tconst parsedFromTime = Util.parseTime(this.DOM.fromTime.value);\n\t\tconst parsedToTime = Util.parseTime(this.DOM.toTime.value);\n\t\tthis.fromMinutes = parsedFromTime.h * 60 + parsedFromTime.m;\n\t\tthis.toMinutes = parsedToTime.h * 60 + parsedToTime.m;\n\n\t\tthis.updateTimePeriod();\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.DOM.fromDateText.innerHTML = Util.formatDateUsable(value.from, true, true);\n\t\t\tthis.DOM.toDateText.innerHTML = Util.formatDateUsable(value.to, true, true);\n\n\t\t\t// Hide right part if it's the same date\n\t\t\tthis.DOM.toDateText.style.display = this.DOM.fromDate.value === this.DOM.toDate.value ? 'none' : '';\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tif (this.DOM.fromDate.value === this.DOM.toDate.value)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTimeText.innerHTML = Loc.getMessage('EC_ALL_DAY');\n\t\t\t\t\tthis.DOM.toTimeText.style.display = '';\n\t\t\t\t\tthis.DOM.fromTimeText.style.display = 'none';\n\t\t\t\t\tthis.DOM.fromTimeText.innerHTML = '';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.betweenSpacer.style.display = '';\n\t\t\t\t\tthis.DOM.fromTimeText.style.display = 'none';\n\t\t\t\t\tthis.DOM.toTimeText.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.fromTimeText.innerHTML = this.DOM.fromTime.value;\n\t\t\t\tthis.DOM.toTimeText.innerHTML = this.DOM.toTime.value;\n\t\t\t\tthis.DOM.betweenSpacer.style.display = '';\n\t\t\t\tthis.DOM.fromTimeText.style.display = '';\n\t\t\t\tthis.DOM.toTimeText.style.display = '';\n\t\t\t}\n\t\t}\n\n\t\tif (value.fullDay !== undefined)\n\t\t{\n\t\t\tthis.DOM.fullDay.checked = value.fullDay;\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tvalue.timezoneFrom = value.timezoneFrom || value.timezoneName;\n\t\t\tvalue.timezoneTo = value.timezoneTo || value.timezoneName;\n\n\t\t\tif (value.timezoneFrom !== undefined && Type.isDomNode(this.DOM.fromTz))\n\t\t\t{\n\t\t\t\tthis.DOM.fromTz.value = value.timezoneFrom;\n\t\t\t}\n\t\t\tif(value.timezoneTo !== undefined && Type.isDomNode(this.DOM.toTz))\n\t\t\t{\n\t\t\t\tthis.DOM.toTz.value = value.timezoneTo;\n\t\t\t}\n\n\t\t\tif (value.timezoneName !== undefined\n\t\t\t\t&& (value.timezoneName !== value.timezoneFrom\n\t\t\t\t\t|| value.timezoneName !== value.timezoneTo))\n\t\t\t{\n\t\t\t\tthis.switchTimezone(true);\n\t\t\t}\n\t\t}\n\t\tthis.value = value;\n\n\t\tthis.handleFullDayChange();\n\t}\n\n\tupdateTimePeriod()\n\t{\n\t\tthis.from = this.getFrom();\n\t\tthis.to = this.getTo();\n\t\tthis.fromTimeControl.highlightValue(this.from);\n\t\tthis.toTimeControl.highlightValue(this.to);\n\t\tthis.updateToTimeDurationHints();\n\t}\n\n\tgetFrom()\n\t{\n\t\treturn this.getDateWithTime(this.DOM.fromDate.value, this.fromMinutes);\n\t}\n\n\tgetTo()\n\t{\n\t\treturn this.getDateWithTime(this.DOM.toDate.value, this.toMinutes);\n\t}\n\n\tgetDateWithTime(date, minutes)\n\t{\n\t\tconst parsedDate = Util.parseDate(date);\n\t\tif (!parsedDate)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn new Date(parsedDate.getTime() + minutes * 60 * 1000);\n\t}\n\n\tgetValue()\n\t{\n\t\tlet value = {\n\t\t\tfullDay: this.DOM.fullDay.checked,\n\t\t\tfromDate: this.DOM.fromDate.value,\n\t\t\ttoDate: this.DOM.toDate.value,\n\t\t\tfromTime: this.DOM.fromTime.value,\n\t\t\ttoTime: this.DOM.toTime.value,\n\t\t\ttimezoneFrom: this.DOM.fromTz ? this.DOM.fromTz.value : (this.value.timezoneFrom || this.value.timezoneName || null),\n\t\t\ttimezoneTo: this.DOM.toTz ? this.DOM.toTz.value : (this.value.timezoneTo || this.value.timezoneName || null)\n\t\t};\n\n\t\tvalue.from = Util.parseDate(value.fromDate);\n\t\tif (Type.isDate(value.from))\n\t\t{\n\t\t\tvalue.to = Util.parseDate(value.toDate);\n\t\t\tif (!Type.isDate(value.to))\n\t\t\t{\n\t\t\t\tvalue.to = value.from;\n\t\t\t}\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tvalue.from.setHours(0, 0, 0);\n\t\t\t\tvalue.to.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tfromTime = Util.parseTime(value.fromTime),\n\t\t\t\t\ttoTime = Util.parseTime(value.toTime) || fromTime;\n\n\t\t\t\tif (fromTime && toTime)\n\t\t\t\t{\n\t\t\t\t\tvalue.from.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t\tvalue.to.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.fromDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.fromDate, 'change', this.handleDateFromChange.bind(this));\n\t\tEvent.bind(this.DOM.toDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.toDate, 'change', this.handleDateToChange.bind(this));\n\n\t\tEvent.bind(this.DOM.fromTime, 'input', this.handleTimeInput.bind(this));\n\t\tEvent.bind(this.DOM.toTime, 'input', this.handleTimeInput.bind(this));\n\n\t\tEvent.bind(this.DOM.fullDay, 'click', () => {\n\t\t\tthis.handleFullDayChange();\n\t\t\tthis.handleValueChange();\n\t\t});\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tEvent.bind(this.DOM.outerWrap, 'click', this.changeInlineEditMode.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.defTimezone))\n\t\t{\n\t\t\tEvent.bind(this.DOM.defTimezone, 'change', BX.delegate(function()\n\t\t\t{\n\t\t\t\t//this.calendar.util.setUserOption('timezoneName', this.DOM.defTimezone.value);\n\t\t\t\tif (this.bindFromToDefaultTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.fromTz.value = this.DOM.toTz.value = this.DOM.defTimezone.value;\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.tzButton))\n\t\t\t{\n\t\t\t\tEvent.bind(this.DOM.tzButton, 'click', this.switchTimezone.bind(this));\n\t\t\t}\n\n\t\t\tEvent.bind(this.DOM.fromTz, 'change', function()\n\t\t\t{\n\t\t\t\tif (this.bindTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTz.value = this.DOM.fromTz.value;\n\t\t\t\t}\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tEvent.bind(this.DOM.toTz, 'change', function()\n\t\t\t{\n\t\t\t\tthis.bindTimezones = false;\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tthis.bindTimezones = this.DOM.fromTz.value === this.DOM.toTz.value;\n\t\t\tthis.bindFromToDefaultTimezones = this.bindTimezones\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.toTz.value\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.defTimezone.value;\n\t\t}\n\t}\n\n\tstatic showInputCalendar(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tif (Type.isDomNode(target) && target.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tconst calendarControl = BX.calendar.get();\n\t\t\tif (calendarControl.popup)\n\t\t\t{\n\t\t\t\t// Workaround hack for BX.calendar - it works as singleton and we trying to reinit it\n\t\t\t\tcalendarControl.popup.destroy();\n\t\t\t\tcalendarControl.popup = null;\n\t\t\t\tcalendarControl._current_layer = null;\n\t\t\t\tcalendarControl._layers = {};\n\t\t\t}\n\t\t\tif (calendarControl.popup_month)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_month.destroy();\n\t\t\t\tcalendarControl.popup_month = null;\n\t\t\t}\n\t\t\tif (calendarControl.popup_year)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_year.destroy();\n\t\t\t\tcalendarControl.popup_year = null;\n\t\t\t}\n\t\t\tcalendarControl.Show({node: target.parentNode, field: target, bTime: false});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tconst calendarPopup = calendarControl.popup;\n\t\t\tif (calendarPopup)\n\t\t\t{\n\t\t\t\tBX.removeCustomEvent(calendarPopup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(calendarPopup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler()\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\thandleDateFromChange()\n\t{\n\t\tif (!this.getFrom())\n\t\t{\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(this.from.getTime());\n\t\t\treturn;\n\t\t}\n\t\tthis.DOM.fromDate.value = Util.formatDate(this.getFrom());\n\n\t\tconst difference = this.getFrom().getTime() - this.from.getTime();\n\n\t\tthis.DOM.toDate.value = Util.formatDate(this.to.getTime() + difference);\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleDateToChange()\n\t{\n\t\tif (!this.getTo())\n\t\t{\n\t\t\tthis.DOM.toDate.value = Util.formatDate(this.to.getTime());\n\t\t\treturn;\n\t\t}\n\t\tthis.DOM.toDate.value = Util.formatDate(this.getTo());\n\n\t\tconst difference = Math.abs(this.to.getTime() - this.getTo().getTime());\n\t\tconst yearDuration = 1000 * 60 * 60 * 24 * 300;\n\t\tif (difference > yearDuration)\n\t\t{\n\t\t\tconst duration = this.to.getTime() - this.from.getTime();\n\t\t\tconst toDate = Util.parseDate(this.DOM.toDate.value);\n\t\t\ttoDate.setHours(this.to.getHours(), this.to.getMinutes(), 0, 0);\n\t\t\tconst fromDate = new Date(toDate.getTime() - duration);\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(fromDate);\n\t\t}\n\n\t\tif (this.getTo() < this.getFrom())\n\t\t{\n\t\t\tthis.DOM.toDate.value = this.DOM.fromDate.value;\n\t\t\tthis.DOM.toTime.value = this.DOM.fromTime.value;\n\t\t\tthis.toMinutes = this.getMinutesFromFormattedTime(this.DOM.toTime.value);\n\t\t}\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeFromChange(inputValue, dataValue)\n\t{\n\t\tthis.handleTimeChange(this.DOM.fromTime);\n\n\t\tif (this.isIncorrectTimeValue(this.DOM.fromTime.value))\n\t\t{\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(this.from);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fromMinutes = dataValue ?? this.getMinutesFromFormattedTime(this.DOM.fromTime.value);\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(this.getFrom());\n\t\t}\n\n\t\tif (this.getTo())\n\t\t{\n\t\t\tconst difference = this.getFrom().getTime() - this.from.getTime();\n\t\t\tthis.toMinutes = this.toMinutes + difference / (60 * 1000);\n\t\t}\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeToChange(inputValue, dataValue)\n\t{\n\t\tthis.handleTimeChange(this.DOM.toTime);\n\n\t\tif (this.isIncorrectTimeValue(this.DOM.toTime.value))\n\t\t{\n\t\t\tthis.DOM.toTime.value = Util.formatTime(this.to);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.toMinutes = dataValue ?? this.getMinutesFromFormattedTime(this.DOM.toTime.value);\n\t\t\tthis.DOM.toTime.value = Util.formatTime(this.getTo());\n\t\t}\n\n\t\tif (this.getTo() < this.getFrom())\n\t\t{\n\t\t\tconst difference = this.getTo().getTime() - this.to.getTime();\n\t\t\tthis.fromMinutes = this.fromMinutes + difference / (60 * 1000);\n\t\t\tconst newFromDate = new Date(this.from.getTime() + difference);\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(newFromDate);\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(newFromDate);\n\t\t}\n\n\t\tthis.handleValueChange();\n\t}\n\n\tisIncorrectTimeValue(timeValue)\n\t{\n\t\tif (BX.isAmPmMode())\n\t\t{\n\t\t\treturn timeValue === '';\n\t\t}\n\t\treturn timeValue === '' || (timeValue[0] !== '0' && Util.parseTime(timeValue).h === 0);\n\t}\n\n\thandleTimeChange(timeSelector)\n\t{\n\t\tif (timeSelector.value === '')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet time = this.getMaskedTime(timeSelector.value);\n\t\ttime = this.beautifyTime(time);\n\t\tif (BX.isAmPmMode())\n\t\t{\n\t\t\tlet amPmSymbol = (timeSelector.value.toLowerCase().match(/[ap]/g) ?? []).pop();\n\t\t\tif (!amPmSymbol)\n\t\t\t{\n\t\t\t\tconst hour = parseInt(this.getMinutesAndHours(time).hours);\n\t\t\t\tif (8 <= hour && hour <= 11)\n\t\t\t\t{\n\t\t\t\t\tamPmSymbol = 'a';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tamPmSymbol = 'p';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (amPmSymbol === 'a')\n\t\t\t{\n\t\t\t\ttime += ' am';\n\t\t\t}\n\t\t\tif (amPmSymbol === 'p')\n\t\t\t{\n\t\t\t\ttime += ' pm';\n\t\t\t}\n\t\t}\n\t\ttimeSelector.value = time;\n\t}\n\n\thandleTimeInput(e)\n\t{\n\t\te.target.value = this.getMaskedTime(e.target.value, e.data, e.inputType === 'deleteContentBackward');\n\t}\n\n\tgetMaskedTime(value, key, backspace = false)\n\t{\n\t\tif (backspace)\n\t\t{\n\t\t\treturn value;\n\t\t}\n\n\t\tlet time = '';\n\t\tconst { hours, minutes } = this.getMinutesAndHours(value, key);\n\t\tif (hours && !minutes)\n\t\t{\n\t\t\ttime = `${hours}`;\n\t\t\tif (value.length - time.length === 1 || value.indexOf(':') !== -1)\n\t\t\t{\n\t\t\t\ttime += ':';\n\t\t\t}\n\t\t}\n\t\tif (hours && minutes)\n\t\t{\n\t\t\ttime = `${hours}:${minutes}`;\n\t\t}\n\n\t\tif (BX.isAmPmMode() && this.clearTimeString(time) !== '')\n\t\t{\n\t\t\tconst amPmSymbol = (value.toLowerCase().match(/[ap]/g) ?? []).pop();\n\t\t\tif (amPmSymbol === 'a')\n\t\t\t{\n\t\t\t\ttime = this.beautifyTime(time) + ' am';\n\t\t\t}\n\t\t\tif (amPmSymbol === 'p')\n\t\t\t{\n\t\t\t\ttime = this.beautifyTime(time) + ' pm';\n\t\t\t}\n\t\t}\n\n\t\treturn time;\n\t}\n\n\tgetMinutesAndHours(value, key)\n\t{\n\t\tlet time = this.clearTimeString(value,  key);\n\t\tlet hours, minutes;\n\t\tif (time.indexOf(':') !== -1)\n\t\t{\n\t\t\thours = time.match(/[\\d]*:/g)[0].slice(0, -1);\n\t\t\tminutes = time.match(/:[\\d]*/g)[0].slice(1);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst digits = (time.match(/\\d/g) ?? []).splice(0,4).map(d => parseInt(d));\n\t\t\tif (digits.length === 4 && digits[0] > this.getMaxHours() / 10)\n\t\t\t{\n\t\t\t\tdigits.pop();\n\t\t\t}\n\t\t\tif (digits.length === 1)\n\t\t\t{\n\t\t\t\thours = `${digits[0]}`;\n\t\t\t}\n\t\t\tif (digits.length === 2)\n\t\t\t{\n\t\t\t\thours = `${digits[0]}${digits[1]}`;\n\t\t\t\tif (parseInt(hours) > this.getMaxHours())\n\t\t\t\t{\n\t\t\t\t\thours = `${digits[0]}`;\n\t\t\t\t\tminutes = `${digits[1]}`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (digits.length === 3)\n\t\t\t{\n\t\t\t\tif (BX.isAmPmMode())\n\t\t\t\t{\n\t\t\t\t\tif (digits[0] >= 1)\n\t\t\t\t\t{\n\t\t\t\t\t\thours = `${digits[0]}`;\n\t\t\t\t\t\tminutes = `${digits[1]}${digits[2]}`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\thours = `${digits[0]}${digits[1]}`;\n\t\t\t\t\t\tminutes = `${digits[2]}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(`${digits[0]}${digits[1]}`) < 24)\n\t\t\t\t\t{\n\t\t\t\t\t\thours = `${digits[0]}${digits[1]}`;\n\t\t\t\t\t\tminutes = `${digits[2]}`;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\thours = `${digits[0]}`;\n\t\t\t\t\t\tminutes = `${digits[1]}${digits[2]}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (digits.length === 4)\n\t\t\t{\n\t\t\t\thours = `${digits[0]}${digits[1]}`;\n\t\t\t\tminutes = `${digits[2]}${digits[3]}`;\n\t\t\t}\n\t\t}\n\n\t\tif (hours)\n\t\t{\n\t\t\thours = this.formatHours(hours);\n\t\t}\n\t\tif (minutes)\n\t\t{\n\t\t\tminutes = this.formatMinutes(minutes);\n\t\t}\n\t\treturn { hours, minutes };\n\t}\n\n\tclearTimeString(str, key)\n\t{\n\t\tlet validatedTime = str.replace(/[ap]/g, '').replace(/\\D/g, ':'); // remove a and p and replace not digits to :\n\t\tvalidatedTime = validatedTime.replace(/:*/, ''); // remove everything before first digit\n\n\t\t// leave only first :\n\t\tconst firstColonIndex = validatedTime.indexOf(':');\n\t\tvalidatedTime = validatedTime.substr(0, firstColonIndex + 1) + validatedTime.slice(firstColonIndex + 1).replaceAll(':', '');\n\n\t\t// leave not more than 2 hour digits and 2 minute digits\n\t\tif (firstColonIndex !== -1)\n\t\t{\n\t\t\tconst hours = this.formatHours(validatedTime.match(/[\\d]*:/g)[0].slice(0, -1));\n\t\t\tconst minutes = validatedTime.match(/:[\\d]*/g)[0].slice(1).slice(0, 3);\n\t\t\tif (hours.length === 1 && minutes.length === 3 && !isNaN(parseInt(key)) && this.areTimeDigitsCorrect(`${hours}${minutes}`))\n\t\t\t{\n\t\t\t\treturn `${hours}${minutes}`;\n\t\t\t}\n\t\t\treturn `${hours}:${minutes}`;\n\t\t}\n\t\treturn validatedTime.slice(0, 4);\n\t}\n\n\tareTimeDigitsCorrect(time)\n\t{\n\t\tconst hh = time.slice(0, 2);\n\t\tconst mm = time.slice(2);\n\t\treturn this.formatHours(hh) === hh && this.formatMinutes(mm) === mm;\n\t}\n\n\tformatHours(str)\n\t{\n\t\tconst firstDigit = str[0];\n\t\tif (parseInt(firstDigit) > this.getMaxHours() / 10)\n\t\t{\n\t\t\treturn `0${firstDigit}`;\n\t\t}\n\t\tif (parseInt(str) <= this.getMaxHours())\n\t\t{\n\t\t\treturn `${firstDigit}${str[1] ?? ''}`;\n\t\t}\n\t\treturn `${firstDigit}`;\n\t}\n\n\tformatMinutes(str)\n\t{\n\t\tconst firstDigit = str[0];\n\t\tif (firstDigit >= 6)\n\t\t{\n\t\t\treturn `0${firstDigit}`;\n\t\t}\n\t\treturn `${firstDigit}${str[1] ?? ''}`;\n\t}\n\n\tbeautifyTime(time)\n\t{\n\t\tif (this.clearTimeString(time) === '')\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (time.indexOf(':') === -1)\n\t\t{\n\t\t\ttime += ':00';\n\t\t}\n\t\tif (time.indexOf(':') === time.length - 1)\n\t\t{\n\t\t\ttime += '00';\n\t\t}\n\n\t\tlet { hours, minutes } = this.getMinutesAndHours(time);\n\t\thours = `0${hours}`.slice(-2);\n\t\tminutes = `0${minutes}`.slice(-2);\n\n\t\treturn `${hours}:${minutes}`;\n\t}\n\n\tgetMaxHours()\n\t{\n\t\treturn BX.isAmPmMode() ? 12 : 24;\n\t}\n\n\thandleFullDayChange()\n\t{\n\t\tlet fullDay = this.getFullDayValue();\n\n\t\tif (fullDay)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t}\n\n\thandleValueChange()\n\t{\n\t\tthis.setValue({ from: this.getFrom(), to: this.getTo() });\n\t\tthis.emit('onChange', new BaseEvent({data: {value: this.getValue()}}));\n\t}\n\n\tupdateToTimeDurationHints()\n\t{\n\t\tthis.toTimeControl.updateDurationHints(\n\t\t\tthis.DOM.fromTime.value,\n\t\t\tthis.DOM.toTime.value,\n\t\t\tthis.DOM.fromDate.value,\n\t\t\tthis.DOM.toDate.value\n\t\t);\n\t}\n\n\tgetFullDayValue()\n\t{\n\t\treturn !!this.DOM.fullDay.checked;\n\t}\n\n\tgetMinutesFromFormattedTime(time)\n\t{\n\t\tconst parsedTime = Util.parseTime(time);\n\t\treturn parsedTime.h * 60 + parsedTime.m;\n\t}\n\n\tswitchTimezone(showTimezone)\n\t{\n\t\tif (!Type.isBoolean(showTimezone))\n\t\t{\n\t\t\tshowTimezone = BX.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\n\t\tif (showTimezone)\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tchangeInlineEditMode()\n\t{\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.setInlineEditMode('edit');\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode && this.currentInlineEditMode === 'edit')\n\t\t{\n\t\t\tthis.setInlineEditMode('view');\n\t\t}\n\t}\n\n\tsetInlineEditMode(currentInlineEditMode)\n\t{\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.currentInlineEditMode = currentInlineEditMode;\n\t\t\tif (this.currentInlineEditMode === 'edit')\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class BusyUsersDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'busy-user-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.plural = params.users.length > 1;\n\n\t\tlet i, userNames = [];\n\t\tfor (i = 0; i < params.users.length; i++)\n\t\t{\n\t\t\tuserNames.push(params.users[i].DISPLAY_NAME);\n\t\t}\n\t\tuserNames = userNames.join(', ');\n\n\t\tlet content = BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-busy-users-content-wrap'},\n\t\t\thtml: '<div class=\"calendar-busy-users-content\">'\n\t\t\t\t+ BX.util.htmlspecialchars(this.plural ?\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_PLURAL').replace('#USER_LIST#', userNames)\n\t\t\t\t\t:\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_SINGLE').replace('#USER_NAME#', params.users[0].DISPLAY_NAME))\n\t\t\t\t+ '</div>'\n\t\t});\n\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_BUSY_USERS_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\t// buttons: [\n\t\t\t// \tnew BX.PopupWindowButtonLink({\n\t\t\t// \t\ttext: Loc.getMessage('EC_BUSY_USERS_CLOSE'),\n\t\t\t// \t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t// \t\tevents: {click : () => {\n\t\t\t// \t\t\t// if (this.calendar.editSlider)\n\t\t\t// \t\t\t// \tthis.calendar.editSlider.close();\n\t\t\t//\n\t\t\t// \t\t\tthis.close();\n\t\t\t// \t\t}\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// ],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_BUSY_USERS_BACK2EDIT'),\n\t\t\tevents: {click : () => {this.close();}}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: this.plural ? Loc.getMessage('EC_BUSY_USERS_EXCLUDE_PLURAL') : Loc.getMessage('EC_BUSY_USERS_EXCLUDE_SINGLE'),\n\t\t\tevents: {click : () => {\n\t\t\t\tthis.emit('onSaveWithout');\n\t\t\t\tthis.close();\n\t\t\t}}\n\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Runtime, Tag, Loc, Text} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\nimport { ControlButton } from 'intranet.control-button';\nimport {AttendeesList} from \"calendar.controls\";\n\nexport class UserPlannerSelector extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tstatic MAX_USER_COUNT_DISPLAY = 8;\n\tstatic PLANNER_WIDTH = 550;\n\tzIndex = 4200;\n\treadOnlyMode = true;\n\tmeetingNotifyValue = true;\n\tuserSelectorDialog = null;\n\tattendeesEntityList = [];\n\tinlineEditMode = UserPlannerSelector.VIEW_MODE;\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\tREFRESH_PLANNER_DELAY = 500;\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.UserPlannerSelector');\n\t\tthis.selectorId = params.id || 'user-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.BX = Util.getBX();\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap,\n\t\t\twrap: params.wrap,\n\t\t\tinformWrap: params.informWrap,\n\t\t\tinformWrapText: params.informWrap.querySelector('.calendar-field-container-inform-text'),\n\t\t\tmoreLink: params.outerWrap.querySelector('.calendar-members-more'),\n\t\t\tchangeLink: params.outerWrap.querySelector('.calendar-members-change-link'),\n\t\t\tattendeesLabel: params.outerWrap.querySelector('.calendar-attendees-label'),\n\t\t\tattendeesList: params.outerWrap.querySelector('.calendar-attendees-list'),\n\t\t\tuserSelectorWrap: params.outerWrap.querySelector('.calendar-user-selector-wrap'),\n\t\t\tplannerOuterWrap: params.plannerOuterWrap,\n\t\t\tvideocallWrap: params.outerWrap.querySelector('.calendar-videocall-wrap'),\n\t\t\thideGuestsWrap: params.hideGuestsWrap,\n\t\t\thideGuestsIcon: params.hideGuestsWrap.querySelector('.calendar-hide-members-icon-hidden')\n\t\t};\n\t\tthis.refreshPlannerStateDebounce = Runtime.debounce(this.refreshPlannerState, this.REFRESH_PLANNER_DELAY, this);\n\n\t\tif (Type.isBoolean(params.readOnlyMode))\n\t\t{\n\t\t\tthis.readOnlyMode = params.readOnlyMode;\n\t\t}\n\n\t\tthis.userId = params.userId;\n\t\tthis.type = params.type;\n\t\tthis.ownerId = params.ownerId;\n\t\tthis.zIndex = params.zIndex || this.zIndex;\n\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\n\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.DOM.changeLink && !this.isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.DOM.changeLink, 'click', () => {\n\t\t\t\tif (!this.userSelectorDialog)\n\t\t\t\t{\n\t\t\t\t\tthis.userSelectorDialog = new EntitySelectorDialog({\n\t\t\t\t\t\ttargetNode: this.DOM.changeLink,\n\t\t\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\t\t\tpreselectedItems: this.attendeesPreselectedItems,\n\t\t\t\t\t\tenableSearch: true,\n\t\t\t\t\t\tzIndex: this.zIndex + 10,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\t\t\t\t\temailUsers: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\t\t\toptions: { 'all-users': true }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tsearchTabOptions: {\n\t\t\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.userSelectorDialog.show();\n\t\t\t});\n\t\t}\n\n\t\tif (this.DOM.moreLink)\n\t\t{\n\t\t\tEvent.bind(this.DOM.moreLink, 'click', this.showMoreAttendeesPopup.bind(this));\n\t\t}\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\twidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\tshowEntryName: false,\n\t\t\tlocked: !this.plannerFeatureEnabled,\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat\n\n\t\t});\n\n\t\tEvent.bind(this.DOM.informWrap, 'click', () => {\n\t\t\tthis.setInformValue(!this.meetingNotifyValue);\n\t\t\tthis.emit('onNotifyChange');\n\t\t});\n\n\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\n\t\tthis.planner.subscribe('onDateChange', (event) => {this.emit('onDateChange', event);});\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\n\t\tif (this.DOM.hideGuestsWrap && !this.isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.DOM.hideGuestsWrap, 'click', ()=>{\n\t\t\t\tthis.setHideGuestsValue(!this.hideGuests);\n\t\t\t});\n\t\t}\n\t}\n\n\tsetValue({attendeesEntityList, attendees, location, notify, hideGuests, viewMode, entry})\n\t{\n\t\tthis.attendeesEntityList = Type.isArray(attendeesEntityList) ? attendeesEntityList : [];\n\t\tthis.attendeesPreselectedItems = this.attendeesEntityList.map((item) => {return [item.entityId, item.id]});\n\n\t\tthis.entry = entry;\n\t\tthis.entryId = this.entry.id;\n\n\t\tthis.setEntityList(this.attendeesEntityList);\n\t\tthis.setInformValue(notify);\n\t\tthis.setLocationValue(location);\n\n\t\tif (Type.isArray(attendees))\n\t\t{\n\t\t\tthis.displayAttendees(attendees);\n\t\t}\n\t\tthis.refreshPlannerStateDebounce();\n\n\t\tlet dateTime = this.getDateTime();\n\t\tif (dateTime)\n\t\t{\n\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t}\n\n\t\tif (\n\t\t\tthis.entryId\n\t\t\t&& this.entry\n\t\t\t&& this.entry.data['PARENT_ID']\n\t\t\t&& (\n\t\t\t\tthis.entry.data['EVENT_TYPE'] === '#shared#'\n\t\t\t\t|| this.entry.data['EVENT_TYPE'] === '#shared_crm#'\n\t\t\t)\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tDom.clean(this.DOM.videocallWrap);\n\t\t\tDom.removeClass(this.DOM.videocallWrap, 'calendar-videocall-hidden');\n\n\t\t\tthis.conferenceButton = Tag.render`\n\t\t\t\t<div class=\"calendar-text-link --gray\">${Loc.getMessage('EC_CONFERENCE_START')}</div>\n\t\t\t`;\n\t\t\tEvent.bind(this.conferenceButton, 'click', this.handleVideoconferenceButtonClick.bind(this));\n\n\t\t\tDom.append(this.conferenceButton, this.DOM.videocallWrap);\n\t\t}\n\t\telse if (\n\t\t\tBX?.Intranet?.ControlButton\n\t\t\t&& this.DOM.videocallWrap\n\t\t\t&& this.entryId\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tDom.clean(this.DOM.videocallWrap);\n\t\t\tDom.removeClass(this.DOM.videocallWrap, 'calendar-videocall-hidden');\n\n\t\t\tthis.intranetControllButton = new ControlButton({\n\t\t\t\tcontainer: this.DOM.videocallWrap,\n\t\t\t\tentityType: 'calendar_event',\n\t\t\t\tentityId: this.entry.parentId,\n\t\t\t\tmainItem: 'chat',\n\t\t\t\tentityData: {\n\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from),\n\t\t\t\t\tparentId: this.entry.parentId\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tformType: 'compact'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// For testing purposes\n\t\t\tif (Type.isElementNode(this.intranetControllButton.button))\n\t\t\t{\n\t\t\t\tthis.intranetControllButton.button.setAttribute('data-role', 'videocallButton');\n\t\t\t}\n\t\t}\n\t\telse if(this.DOM.videocallWrap)\n\t\t{\n\t\t\tDom.addClass(this.DOM.videocallWrap, 'calendar-videocall-hidden');\n\t\t}\n\n\t\tthis.setHideGuestsValue(hideGuests);\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tthis.showPlanner();\n\t\tconst dateTime = this.getDateTime();\n\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\n\t\tthis.setEntityList(this.userSelectorDialog.getSelectedItems().map((item) => {\n\t\t\treturn {\n\t\t\t\tentityId: item.entityId,\n\t\t\t\tid: item.id,\n\t\t\t\tentityType: item.entityType,\n\t\t\t}}));\n\n\t\tthis.refreshPlannerStateDebounce();\n\t\tthis.emit('onUserCodesChange');\n\t}\n\n\tgetEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetEntityList(selectorEntityList)\n\t{\n\t\tif (this.type === 'user' && this.userId !== this.ownerId)\n\t\t{\n\t\t\tselectorEntityList.push({entityId: 'user', id: this.ownerId});\n\t\t}\n\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this.readOnlyMode;\n\t}\n\n\tgetUserSelector()\n\t{\n\t\treturn BX.UI.SelectorManager.instances[this.selectorId];\n\t}\n\n\tshowPlanner()\n\t{\n\t\tif (!this.isPlannerDisplayed())\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'user-selector-edit-mode');\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\t\t}\n\t}\n\n\tcheckBusyTime()\n\t{\n\t\tconst dateTime = this.getDateTime();\n\t\tconst entityList = this.getEntityList();\n\t\tthis.planner.updateScaleLimitsFromEntry(dateTime.from, dateTime.to);\n\n\t\tthis.runPlannerDataRequest({\n\t\t\tentityList: entityList,\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.getLocationValue(),\n\t\t\tentryId: this.entryId\n\t\t})\n\t\t\t.then((response) =>\n\t\t\t{\n\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t{\n\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t{\n\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.accessibility[this.ownerId]))\n\t\t\t\t{\n\t\t\t\t\tconst from = this.getDateTime().from;\n\t\t\t\t\tconst to = this.getDateTime().to;\n\t\t\t\t\tconst preparedData = this.preparedDataAccessibility(response.data.accessibility[this.ownerId]);\n\n\t\t\t\t\tif (!this.planner.currentFromDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.planner.currentFromDate = from;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.planner.currentToDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.planner.currentToDate = to;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst item = this.planner.checkTimePeriod(from, to, preparedData);\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isObject(item)\n\t\t\t\t\t\t&& Type.isArray(response.data.entries)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showPlanner();\n\t\t\t\t\t\tthis.planner.update(response.data.entries, response.data.accessibility);\n\t\t\t\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\tthis.displayAttendees(this.prepareAttendeesForDisplay(response.data.entries));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tprepareAttendeesForDisplay(attendees)\n\t{\n\t\treturn (attendees)\n\t\t\t.filter((item) =>\n\t\t\t{\n\t\t\t\treturn item.type === 'user';\n\t\t\t})\n\t\t\t.map((item) =>\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tID: item.id,\n\t\t\t\t\tAVATAR: item.avatar,\n\t\t\t\t\tDISPLAY_NAME: item.name,\n\t\t\t\t\tEMAIL_USER: item.emailUser,\n\t\t\t\t\tSHARING_USER: item.sharingUser,\n\t\t\t\t\tSTATUS: (item.status || '').toUpperCase(),\n\t\t\t\t\tURL: item.url\n\t\t\t\t};\n\t\t\t});\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tif (this.planner && this.planner.isShown())\n\t\t{\n\t\t\tlet dateTime = this.getDateTime();\n\t\t\tthis.loadPlannerData({\n\t\t\t\tentityList: this.getEntityList(),\n\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\tlocation: this.getLocationValue(),\n\t\t\t\tentryId: this.entryId,\n\t\t\t\tprevUserList: this.prevUserList\n\t\t\t});\n\t\t}\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.runPlannerDataRequest(params)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\tthis.loadedAccessibilityData\n\t\t\t\t\t);\n\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t\t(response) => {resolve(response);}\n\t\t\t);\n\t\t});\n\t}\n\n\trunPlannerDataRequest(params)\n\t{\n\t\treturn this.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\tdata: {\n\t\t\t\tentryId: params.entryId || 0,\n\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\townerId: this.ownerId,\n\t\t\t\ttype: this.type,\n\t\t\t\tentityList: params.entityList || [],\n\t\t\t\tdateFrom: Util.formatDate(this.planner.scaleDateFrom),\n\t\t\t\tdateTo: Util.formatDate(this.planner.scaleDateTo),\n\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\tlocation: params.location || '',\n\t\t\t\tentries: params.entrieIds || false,\n\t\t\t\tprevUserList: params.prevUserList || []\n\t\t\t}\n\t\t});\n\t}\n\n\tsetDateTime(dateTime, updatePlaner = false)\n\t{\n\t\tthis.dateTime = dateTime;\n\t\tthis.planner.currentFromDate = dateTime.from;\n\t\tthis.planner.currentToDate = dateTime.to;\n\t\tif (this.planner && updatePlaner)\n\t\t{\n\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t}\n\t\telse if (this.planner)\n\t\t{\n\t\t\tlet fromHours = parseInt(dateTime.from.getHours()) + Math.floor(dateTime.from.getMinutes() / 60);\n\t\t\tlet toHours = parseInt(dateTime.to.getHours()) + Math.floor(dateTime.to.getMinutes() / 60);\n\t\t\tif (\n\t\t\t\t(fromHours !== 0 && fromHours <= this.planner.shownScaleTimeFrom)\n\t\t\t\t|| (toHours !== 0  && toHours !== 23 && toHours + 1 >= this.planner.shownScaleTimeTo)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDateTime()\n\t{\n\t\treturn this.dateTime;\n\t}\n\n\tsetLocationValue(location)\n\t{\n\t\tthis.location = location;\n\t}\n\n\tgetLocationValue()\n\t{\n\t\treturn this.location;\n\t}\n\n\tdisplayAttendees(attendees = [])\n\t{\n\t\tDom.clean(this.DOM.attendeesList);\n\t\tthis.attendeeList = AttendeesList.sortAttendees(attendees);\n\t\tconst usersCount = this.attendeeList.accepted.length\n\t\t\t+ this.attendeeList.requested.length;\n\t\tthis.emit('onDisplayAttendees', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tusersCount: usersCount\n\t\t\t}\n\t\t}));\n\n\t\tconst userLength = Math.min(this.attendeeList.accepted.length, UserPlannerSelector.MAX_USER_COUNT_DISPLAY);\n\t\tif (userLength > 0)\n\t\t{\n\t\t\tfor (let i = 0; i < userLength; i++)\n\t\t\t{\n\t\t\t\tthis.attendeeList.accepted[i].shown = true;\n\t\t\t\tthis.DOM.attendeesList.appendChild(UserPlannerSelector.getUserAvatarNode(this.attendeeList.accepted[i]));\n\t\t\t}\n\t\t}\n\n\t\tif (userLength > 1)\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_NUM')).replace('#COUNT#', `<span>(</span>${this.attendeeList.accepted.length}<span>)</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\t\t}\n\n\t\tif (attendees.length > 1)\n\t\t{\n\t\t\tthis.DOM.moreLink.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_ALL_COUNT').replace('#COUNT#', attendees.length));\n\t\t\tDom.show(this.DOM.moreLink);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.hide(this.DOM.moreLink);\n\t\t}\n\n\t\tif (\n\t\t\tthis.hasExternalEmailUsers(attendees)\n\t\t\t&& this.isPlannerDisplayed()\n\t\t\t&& !this.isReadOnly()\n\t\t)\n\t\t{\n\t\t\tthis.showHideGuestsOption();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hideHideGuestsOption();\n\t\t}\n\t}\n\n\tstatic getUserAvatarNode(user)\n\t{\n\t\tlet\n\t\t\timageNode,\n\t\t\timg = user.AVATAR || user.SMALL_AVATAR;\n\t\tif (!img || img === \"/bitrix/images/1.gif\")\n\t\t{\n\t\t\tlet defaultAvatarClass = 'ui-icon-common-user';\n\t\t\tif (user.EMAIL_USER)\n\t\t\t{\n\t\t\t\tdefaultAvatarClass = 'ui-icon-common-user-mail';\n\t\t\t}\n\t\t\tif (user.SHARING_USER)\n\t\t\t{\n\t\t\t\tdefaultAvatarClass += ' ui-icon-common-user-sharing';\n\t\t\t}\n\t\t\timageNode = Tag.render`<div title=\"${Text.encode(user.DISPLAY_NAME)}\" class=\"ui-icon ${defaultAvatarClass}\"><i></i></div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\timageNode = Tag.render`\n\t\t\t<img\n\t\t\t\ttitle=\"${Text.encode(user.DISPLAY_NAME)}\"\n\t\t\t\tclass=\"calendar-member\"\n\t\t\t\tid=\"simple_popup_${parseInt(user.ID)}\"\n\t\t\t\tsrc=\"${encodeURI(img)}\"\n\t\t\t>`;\n\t\t}\n\t\treturn imageNode;\n\t}\n\n\tshowMoreAttendeesPopup()\n\t{\n\t\t(new AttendeesList(this.DOM.moreLink, this.attendeeList)).showPopup();\n\t}\n\n\tsetInformValue(value)\n\t{\n\t\tif (Type.isBoolean(value))\n\t\t{\n\t\t\tconst DISABLED_CLASS = 'calendar-field-container-inform-off';\n\t\t\tthis.meetingNotifyValue = value;\n\t\t\tif (this.meetingNotifyValue)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_ON_TITLE');\n\t\t\t\tthis.DOM.informWrapText.innerHTML = Loc.getMessage('EC_NOTIFY_OPTION');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_OFF_TITLE');\n\t\t\t\tthis.DOM.informWrapText.innerHTML = Loc.getMessage('EC_DONT_NOTIFY_OPTION');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetInformValue(value)\n\t{\n\t\treturn this.meetingNotifyValue;\n\t}\n\n\tsetViewMode(readOnlyMode)\n\t{\n\t\tthis.readOnlyMode = readOnlyMode;\n\t\tif (this.readOnlyMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t}\n\n\tisPlannerDisplayed()\n\t{\n\t\treturn this.planner.isShown();\n\t}\n\n\thasExternalEmailUsers(attendees = [])\n\t{\n\t\treturn !!attendees.find((item) => {return item.EMAIL_USER;})\n\t\t\t|| !!this.getEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.userSelectorDialog && this.userSelectorDialog.destroy)\n\t\t{\n\t\t\tthis.userSelectorDialog.destroy();\n\t\t \tthis.userSelectorDialog = null;\n\t\t}\n\n\t\tif (this.intranetControllButton && this.intranetControllButton.destroy)\n\t\t{\n\t\t\tthis.intranetControllButton.destroy();\n\t\t\tthis.intranetControllButton = null;\n\t\t}\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\n\t\tif (Type.isElementNode(this.DOM.hideGuestsIcon))\n\t\t{\n\t\t\tthis.DOM.hideGuestsIcon.className = this.hideGuests ? 'calendar-hide-members-icon-hidden' : 'calendar-hide-members-icon-visible'\n\t\t}\n\n\t\tconst hideGuestsText = this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-text');\n\t\tif (Type.isElementNode(hideGuestsText))\n\t\t{\n\t\t\thideGuestsText.innerHTML = this.hideGuests\n\t\t\t\t? Loc.getMessage('EC_HIDE_GUEST_NAMES')\n\t\t\t\t: Loc.getMessage('EC_SHOW_GUEST_NAMES');\n\t\t}\n\t}\n\n\tpreparedDataAccessibility(calendarEventsAccessibility)\n\t{\n\t\treturn calendarEventsAccessibility.map((item) => {\n\t\t\treturn Planner.prepareAccessibilityItem(item);\n\t\t});\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length && this.prevUserList.length)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => {\n\t\t\t\treturn !userIdList.includes(userId);\n\t\t\t});\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event && event.getData)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tconst dateTime = this.getDateTime();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getEntityList(),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.getLocationValue(),\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tfocusSelector: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\thandleVideoconferenceButtonClick()\n\t{\n\t\tthis.getConferenceChatId();\n\t}\n\n\tgetConferenceChatId()\n\t{\n\t\treturn this.BX.ajax.runAction('calendar.api.calendarajax.getConferenceChatId', {\n\t\t\tdata: {\n\t\t\t\teventId: this.entry.data['PARENT_ID'],\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tif (top.window.BXIM && response.data && response.data.chatId)\n\t\t\t\t{\n\t\t\t\t\ttop.BXIM.openMessenger('chat' + parseInt(response.data.chatId));\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\n\nexport class ReinviteUserDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ReinviteUserDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'reinvite-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst content = Dom.create('DIV');\n\t\tthis.close();\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_REINVITE_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'reinvite-popup-window',\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tnew BX.UI.Button({\n\t\t\ttext : Loc.getMessage('EC_REINVITE_YES'),\n\t\t\tclassName: \"ui-btn ui-btn-primary\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: true}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_REINVITE_NO'),\n\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: false}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Tag, Loc, Dom, Event, Type, Runtime} from 'main.core';\nimport {PopupManager} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nexport class EmailSelectorControl extends EventEmitter\n{\n\tDOM = {};\n\tCONFIRM_POPUP_ID = 'add_from_email';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailSelectorControl');\n\t\tthis.DOM.select = params.selectNode;\n\t\tthis.mailboxList = Type.isArray(params.mailboxList) ? params.mailboxList : [];\n\t\tthis.DOM.componentWrap = this.DOM.select.parentNode.appendChild(Tag.render`<div style=\"display: none;\"></div>`);\n\t\tthis.allowAddNewEmail = params.allowAddNewEmail;\n\t\tthis.checkValueDebounce = Runtime.debounce(this.checkValue, 50, this);\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.setSelectValues();\n\t\tEvent.bind(this.DOM.select, 'change', this.checkValueDebounce);\n\t\tEvent.bind(this.DOM.select, 'click', this.checkValueDebounce);\n\t}\n\n\tcheckValue()\n\t{\n\t\tif (this.DOM.select.value === 'add')\n\t\t{\n\t\t\tthis.showAdd();\n\t\t\tthis.setValue('');\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.DOM.select.value;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.mailboxList.length\n\t\t\t&& this.mailboxList.find((mailbox) => {return mailbox.email === value}))\n\t\t{\n\t\t\tthis.DOM.select.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select.value = '';\n\t\t}\n\t\tthis.emit('onSetValue', {\n\t\t\tvalue: this.DOM.select.value\n\t\t});\n\t}\n\n\tsetSelectValues()\n\t{\n\t\tDom.clean(this.DOM.select);\n\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_NO_VALUE'), ''));\n\t\tif (this.mailboxList.length)\n\t\t{\n\t\t\tthis.mailboxList.forEach((value) => {\n\t\t\t\tthis.DOM.select.options.add(new Option(value.formatted, value.email));\n\t\t\t}, this);\n\t\t}\n\n\t\tif (this.allowAddNewEmail)\n\t\t{\n\t\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_ADD_NEW'), 'add'));\n\t\t}\n\t}\n\n\tonClick(item)\n\t{\n\t\tthis.input.value = item.sender;\n\t\tthis.mailbox.textContent = item.sender;\n\t}\n\n\tshowAdd()\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\twindow.BXMainMailConfirm.showForm(this.onAdd.bind(this));\n\t\t}\n\t\tconst mainMailConfirmPopup = PopupManager.getPopupById(this.CONFIRM_POPUP_ID);\n\t\tif (mainMailConfirmPopup)\n\t\t{\n\t\t\tmainMailConfirmPopup.subscribe('onClose', ()=>{\n\t\t\t\tthis.reloadMailboxList();\n\t\t\t});\n\t\t}\n\t}\n\n\tonAdd(data)\n\t{\n\t\tthis.reloadMailboxList()\n\t\t\t.then(() => {\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.setValue(data.email);\n\t\t\t\t},0);\n\t\t\t});\n\t}\n\n\tgetMenuItem(item)\n\t{\n\t\treturn {\n\t\t\t'id': item.id,\n\t\t\t'text': BX.util.htmlspecialchars(item.sender),\n\t\t\t'onclick': this.onClick.bind(this, item)\n\t\t};\n\t}\n\n\tloadMailboxData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxData')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tBX.html(this.DOM.componentWrap, response.data.html);\n\t\t\t\t\t\tthis.mailboxList = response.data.additionalParams.mailboxList;\n\t\t\t\t\t\tthis.checkBXMainMailConfirmLoaded(resolve);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcheckBXMainMailConfirmLoaded(resolve)\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\tthis.setSelectValues();\n\t\t\tresolve();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(()=>{this.checkBXMainMailConfirmLoaded(resolve)}, 200);\n\t\t}\n\t}\n\n\treloadMailboxList()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxList')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.mailboxList = response.data.mailboxList;\n\t\t\t\t\t\tthis.setSelectValues();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n}","import {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class ConfirmedEmailDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tSLIDER_Z_INDEX = 4400;\n\tWIDTH = 400;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmedEmailDialog');\n\t\tthis.id = 'confirm-email-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-confirm-email-text\">${Loc.getMessage('EC_CONFIRMED_EMAIL_TEXT_1')}</div>\n\t\t\t<div class=\"calendar-confirm-email-text\"><a class=\"calendar-confirm-email-help-link\" href=\"javascript:void(0);\">${Loc.getMessage('EC_CONFIRMED_EMAIL_HELP_LINK')}</a></div>\n\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t<select class=\"calendar-field calendar-field-select ui-btn ui-btn ui-btn-light-border ui-btn-clock\"></select>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_CONFIRMED_EMAIL_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'confirmemail-popup-window',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_CONFIRMED_EMAIL_SEND'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ${BX.UI.Button.State.DISABLED}`,\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst userSettings = Util.getUserSettings();\n\t\t\t\t\t\t\tuserSettings.sendFromEmail = this.emailSelectorControl.getValue();\n\t\t\t\t\t\t\tUtil.setUserSettings(userSettings);\n\t\t\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'sendFromEmail', userSettings.sendFromEmail);\n\t\t\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendFromEmail: userSettings.sendFromEmail}}));\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tthis.DOM.processButton = this.dialog.buttons[0].button;\n\n\t\tthis.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\tDom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\tthis.DOM.select.disabled = true;\n\n\t\tthis.emailSelectorControl = new EmailSelectorControl({\n\t\t\tselectNode: this.DOM.select,\n\t\t\tallowAddNewEmail: true\n\t\t});\n\t\tEvent.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\tthis.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\n\t\tthis.emailSelectorControl.loadMailboxData()\n\t\t\t.then(()=> {\n\t\t\t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t\t\tthis.DOM.select.disabled = false;\n\t\t\t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t\t});\n\n\t\tthis.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\tEvent.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\thandleSelectChanges()\n\t{\n\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t{\n\t\t\tDom.removeClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t}\n\n\topenHelpSlider()\n\t{\n\t\tif(BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=12070142\", {zIndex: this.SLIDER_Z_INDEX});\n\t\t}\n\t}\n}","'use strict';\nimport {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class EmailLimitationDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tEXPAND_LICENSE_URL = '/settings/license_all.php';\n\tWIDTH = 480;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailLimitationDialog');\n\t\tthis.id = 'email-limitation-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst eventsAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst limit = Util.isEventWithEmailGuestAllowed();\n\t\tif (eventsAmount === 4)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_5');\n\t\t}\n\t\telse if(eventsAmount === 8)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_9');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_DENY');\n\t\t}\n\t\tthis.subText = Loc.getMessage('EC_EMAIL_LIMIT_SUBTEXT');\n\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-email-limit-text\">${this.text}</div>\n\t\t\t<div class=\"calendar-email-limit-subtext\">${this.subText}</div>\n\t\t</div>`;\n\n\t\tthis.dialog = this.getDialogPopup();\n\n\t\tthis.dialog.subscribe('onClose', ()=>{\n\t\t\tthis.emit('onClose');\n\t\t});\n\n\t\t// this.DOM.processButton = this.dialog.buttons[0].button;\n\t\t//\n\t\t// this.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\t// Dom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\t// this.DOM.select.disabled = true;\n\t\t//\n\t\t// this.emailSelectorControl = new EmailSelectorControl({\n\t\t// \tselectNode: this.DOM.select,\n\t\t// \tallowAddNewEmail: true\n\t\t// });\n\t\t// Event.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\t// this.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\t\t//\n\t\t// this.emailSelectorControl.loadMailboxData()\n\t\t// \t.then(()=> {\n\t\t// \t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t// \t\tthis.DOM.select.disabled = false;\n\t\t// \t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t// \t});\n\t\t//\n\t\t// this.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\t// Event.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tgetDialogPopup()\n\t{\n\t\treturn new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc: true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EMAIL_LIMIT_TITLE'),\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: 'email-limit-popup',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_EMAIL_LIMIT_EXPAND_PLAN'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ui-btn-icon-plan`,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.open(this.EXPAND_LICENSE_URL, '_blank');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Util.isEventWithEmailGuestAllowed() ? Loc.getMessage('EC_SEC_SLIDER_CLOSE') : Loc.getMessage('EC_EMAIL_LIMIT_SAVE_WITHOUT'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-link`,\n\t\t\t\t\tevents: {click: this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Loc, Type} from \"main.core\";\nimport {MenuManager, MenuItem} from \"main.popup\";\nimport {UserPlannerSelector} from \"calendar.controls\";\n\nexport class AttendeesList\n{\n\tconstructor(node, attendeesList = {})\n\t{\n\t\tthis.attendeesList = attendeesList;\n\t\tthis.node = node;\n\t}\n\n\tsetAttendeesList(attendeesList)\n\t{\n\t\tthis.attendeesList = attendeesList;\n\n\t\treturn this;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tconst menuItems = this.getMenuItems();\n\n\t\tthis.popup = this.getPopup(menuItems);\n\t\tthis.popup.show();\n\n\t\tthis.addAvatarToMenuItems();\n\t}\n\n\taddAvatarToMenuItems()\n\t{\n\t\tthis.popup.menuItems.forEach((item) =>\n\t\t{\n\t\t\tconst icon = item.layout.item.querySelector('.menu-popup-item-icon');\n\t\t\tif (Type.isPlainObject(item.dataset))\n\t\t\t{\n\t\t\t\ticon.appendChild(UserPlannerSelector.getUserAvatarNode(item.dataset.user))\n\t\t\t}\n\t\t});\n\t}\n\n\tgetPopup(menuItems)\n\t{\n\t\treturn MenuManager.create(\n\t\t\t'compact-event-form-attendees' + Math.round(Math.random() * 100000),\n\t\t\tthis.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tclassName: 'calendar-popup-user-menu'\n\t\t\t}\n\t\t);\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst menuItems = [];\n\t\t[\n\t\t\t{\n\t\t\t\tcode: 'accepted', // Accepted\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Y_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'requested', // Still thinking about\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Q_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'declined', // Declined\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_N_NUM')\n\t\t\t},\n\t\t].forEach((group) =>\n\t\t{\n\t\t\tlet groupUsers = this.attendeesList[group.code];\n\t\t\tif (groupUsers.length > 0)\n\t\t\t{\n\t\t\t\tmenuItems.push(new MenuItem({\n\t\t\t\t\ttext: group.title.replace('#COUNT#', groupUsers.length),\n\t\t\t\t\tdelimiter: true\n\t\t\t\t}))\n\n\t\t\t\tgroupUsers.forEach((user) =>\n\t\t\t\t{\n\t\t\t\t\tuser.toString = () =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn user.ID\n\t\t\t\t\t};\n\t\t\t\t\tmenuItems.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: BX.util.htmlspecialchars(user.DISPLAY_NAME),\n\t\t\t\t\t\t\tdataset: {user: user},\n\t\t\t\t\t\t\tclassName: 'calendar-add-popup-user-menu-item',\n\t\t\t\t\t\t\tonclick: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\tuser.URL,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloader: \"intranet:profile\",\n\t\t\t\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\t\t\t\t\tcontentClassName: \"bitrix24-profile-slider-content\",\n\t\t\t\t\t\t\t\t\t\twidth: 1100\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn menuItems;\n\t}\n\n\tstatic sortAttendees(attendees)\n\t{\n\t\treturn {\n\t\t\taccepted : attendees.filter((user) => {return ['H', 'Y'].includes(user.STATUS);}),\n\t\t\trequested : attendees.filter((user) => {return user.STATUS === 'Q' || user.STATUS === ''}),\n\t\t\tdeclined : attendees.filter((user) => {return user.STATUS === 'N'}),\n\t\t};\n\t}\n}"],"names":["TimeSelector","constructor","params","Z_INDEX","valueList","DOM","wrap","input","hour","push","value","label","Util","formatTime","onChangeCallback","Type","isFunction","selectContol","BX","Calendar","Controls","SelectInput","zIndex","values","data","getInputValue","dataValue","highlightValue","date","forEach","el","selected","minutes","getHours","getMinutes","setValue","selectedValue","find","setValueList","updateDurationHints","fromTime","toTime","fromDate","toDate","parsedFromTime","parseTime","parsedToTime","parsedFromDate","parseDate","parsedToDate","fromMinutes","h","m","toMinutes","isSameDate","iterateFrom","approximate","firstHour","getValueElement","minute","fromMinute","currentMinute","toMinute","Math","floor","min","time","durationHint","getStyledDurationHint","hint","getDurationHint","from","Date","getTime","to","diff","diffDays","approximateFloor","diffHours","diffMinutes","diffMinutesApproximation","approximationMark","formatDecimal","Loc","getMessage","decimal","replace","accuracy","round","Reminder","EventEmitter","defaultReminderTime","fullDayMode","extendedMode","selectedValues","controlList","viewMode","changedByUser","setEventNamespace","getValues","id","random","rawValuesMap","Map","changeCallack","showPopupCallBack","hidePopupCallBack","create","bindEventHandlers","isElementNode","Dom","addClass","addButton","appendChild","Tag","render","isDomNode","Event","bind","showPopup","handleClick","concat","shortLabel","dataset","mode","daysBefore","reminderList","emitChanges","removeValue","isArray","addValue","getSelectedValues","getSelectedRawValues","selectedRawValues","get","setFullDayMode","_this","menuItems","item","util","in_array","menuItem","getTimeByInt","text","objectMerge","type","items","getSubmenuTimeValues","onclick","before","defer","reminderMenu","close","addValueCallback","MenuManager","bindTarget","closeByEsc","autoHide","offsetTop","offsetLeft","angle","cacheable","adjustSubmenuPopup","closeSubmenuPopup","subscribe","popupWindow","unsubscribe","show","parentItem","parentItemMessage","getTimeValueList","e","parentMenuItem","getMenuItem","setText","formattedValue","formatValue","isPlainObject","count","parseInt","includes","isInteger","getReminderLabel","isDate","formatDateUsable","set","i","length","undefined","props","className","getText","events","click","emit","BaseEvent","remove","deleteFromArray","array_search","timeValueList","target","srcElement","remValue","getAttribute","isNull","hasClass","removeIcon","parentNode","querySelector","inputCalendarClosePopupHandler","onCustomEvent","window","event","submenuPopup","getTarget","Popup","test","getId","adjustTimeSubmenuPopup","adjustCalendarSubmenuPopup","layout","bindElement","textNode","clean","innerHTML","popup","selectedMenuItem","getContentContainer","setTimeout","scrollTop","calendarControl","calendar","destroy","_current_layer","_layers","popup_month","popup_year","Show","node","formatDateTime","getUsableDateTime","field","bTime","bHideTime","calendarPopup","popupContainer","calendarWrap","contentContainer","uniquePopupId","dateValue","setViewMode","style","display","removeClass","wasChangedByUser","tempValue","dividers","messageCodes","result","toString","ceil","remindValue","Location","datesRange","wrapNode","roomsManager","locationAccess","disabled","richLocationEnabled","inlineEditModeEnabled","meetingRooms","iblockMeetingRoomList","setMeetingRoomList","setLocationList","locationList","default","setDefaultRoom","processValue","setCategoryManager","setValuesDebounced","debounce","setValues","inputWrap","alertIconLocation","inlineEditLinkWrap","inlineEditLink","displayInlineEditControls","inputWrapInner","attrs","name","inputName","placeholder","autocomplete","paddingRight","minWidth","maxWidth","lockIcon","top","UI","InfoHelper","append","addLocationRemoveButton","categoryManagerFromDB","prohibitClick","menuItemList","selectedIndex","getMeetingRoomList","getLocationList","roomList","createRoomList","categoriesWithRooms","getCategoriesWithRooms","room","ID","NAME","labelRaw","capacity","delimiter","pushRoomToItemList","location_id","LOCATION_ID","color","reserved","labelCapacity","getCapacityMessage","isObject","categories","category","rooms","loadRoomSlider","callback","openRoomsSlider","disabledControl","valueIndex","setCurrentCapacity","removeLocationRemoveButton","allowClick","str","getTextLocation","locationListElement","room_id","CAPACITY","setValuesDebounce","contains","removeLocationButton","removeChild","addCapacityAlert","initHintNode","after","removeCapacityAlert","suffix","checkLocationAccessibility","getLocationAccessibility","then","eventTsFrom","eventTsTo","fromTs","toTs","fullDay","DAY_LENGTH","index","roomId","isUndefined","accessibility","PARENT_ID","currentEventId","DATE_FROM","DATE_TO","DT_SKIP_TIME","Promise","resolve","getDatesRange","isCheckedAccessibility","ajax","runAction","response","errors","handlePull","fields","dateFrom","dateTo","setRoomsManager","getRoomsInterface","RoomsInterface","roomsInterface","calendarContext","readonly","roomsManagerFromDB","categoryManager","isConfigureList","getTextValue","res","mrevid","room_event_id","getValue","debounced","parseStringValue","textLocation","Text","encode","isString","substr","split","isNaN","mrid","location","sortLocationList","sort","a","b","toLowerCase","meetingRoomList","setLocationAccessibility","currentRoomCapacity","getCurrentCapacity","RoomsManager","isEmpty","activeRooms","getRoomsInfo","active","activeRoomId","bx","getBX","extensionName","Runtime","loadExtension","Rooms","console","error","getRoomsManager","getRoomsManagerData","sections","config","hiddenSections","ownerId","userId","new_section_access","defaultSectionAccess","sectionAccessTasks","showTasks","locationContext","accessNames","map","RoomsSection","getCategoryManager","CategoryManager","getCategoryManagerData","perm","permissions","getDateInFormat","getDate","slice","getMonth","getFullYear","startDate","setHours","finishDate","UserSelector","destinationInputName","itemsSelected","convertAttendeesCodes","socnetDestinationWrap","SocNetLogDestination","openDialog","socnetDestinationItems","targ","deleteItem","preventDefault","stopPropagation","mouseover","mouseout","socnetDestinationInputWrap","socnetDestinationInput","keydown","searchBeforeHandler","formName","inputId","keyup","searchHandler","linkId","sendAjax","socnetDestinationLink","html","addLinkMessage","message","init","selectGroups","groups","department","sonetgroups","selectUsers","users","searchInput","extranetUser","userSearchArea","bindMainPopup","bindSearchPopup","select","selectCallback","unSelect","unSelectCallback","openDialogCallback","closeDialog","closeDialogCallback","openSearch","closeSearch","itemsLast","departmentSelectDisable","closeAll","isOpenDialog","type1","prefix","children","getSelectedCount","search","elements","findChildren","attribute","j","focus","cleanInputValue","isOpenSearch","backspaceDisable","unbind","keyCode","getCodes","inputsList","getElementsByTagName","codes","getAttendeesCodes","attendeesCodes","code","getAttendeesCodesList","hasOwnProperty","ColorSelector","LINE_MODE","SELECTOR_MODE","VIEW_MODE","defaultColors","getDefaultColorList","colors","backgroundColor","customColorNode","width","customColorLink","colorPickerPopup","ColorPicker","onColorSelected","popupOptions","open","handleColorClick","colorIcon","openPopup","findTargetNode","activeColor","activeColorNode","isShown","icon","element","left","SectionSelector","sectionList","sectionGroupList","openPopupCallback","closePopupCallback","getCurrentSection","defaultCalendarType","defaultOwnerId","outerWrap","initEventHandlers","selectImageWrap","selectInnerText","getCurrentTitle","innerValue","getCurrentColor","delegate","sectionMenu","sectionIdList","getSectionList","sectionGroup","filteredList","belongsToView","filter","section","getSectionType","getSectionOwner","MenuItem","title","overflow","maxHeight","setWidth","offsetWidth","overflowX","addCustomEvent","PopupMenu","PERM","edit","canDo","updateSectionImageNode","imageSrc","getSectionImage","imageNode","encodeURI","getPopup","sectionItem","htmlspecialchars","COLOR","updateValue","CAL_TYPE","IMAGE","OWNER_ID","adjust","RepeatSelector","formElements","rruleType","form","previousDate","interval","rruleEndsOn","never","until","changeType","DateTimeControl","showInputCalendar","checked","toUpperCase","day","getWeekDayByInd","getDay","previousDay","rrule","FREQ","INTERVAL","COUNT","BYDAY","getType","defaultValue","openTitle","curInd","proxy","onClick","onFocus","onBlur","onKeyup","currentValue","currentValueIndex","shown","ind","htmlTemp","popupMenu","onChange","browser","IsFirefox","setMinWidth","setMaxWidth","menuContainer","offsetHeight","popupMenuItems","closePopup","inputValue","PopupDialog","dialog","PopupWindow","overlay","opacity","draggable","bindOnResize","titleBar","getTitle","closeIcon","right","buttons","getButtons","content","getContent","ViewSelector","views","created","currentViewMode","popupId","currentView","selectorText","selectorTextInner","viewModeTextInner","getOuterWrap","view","getMenuItems","hotkey","menuPopup","hide","LineViewSelector","viewsMap","WeakMap","viewData","currentActiveWrap","AddButton","addEntryHandler","addEntry","addTaskHandler","addTask","addButtonExtra","setAttribute","getWrap","addBtnMenu","MeetingStatusControl","Error","status","currentStatus","updateStatus","acceptBtn","Button","accept","renderTo","declineBtn","decline","getContainer","setStatus","emitEvent","ConfirmStatusDialog","PopupWindowButtonLink","PopupWindowButton","onDeclineHandler","recursionMode","buttonNode","compactForm","EntryManager","getCompactViewForm","ConfirmEditDialog","ConfirmDeleteDialog","entry","deleteThis","deleteNext","deleteAll","_t","_t2","_t3","_t4","_t5","_t6","_t7","_t8","uid","options","showTimezone","DATE_INPUT_WIDTH","TIME_INPUT_WIDTH","inlineEditMode","currentInlineEditMode","UID","outerContent","leftInnerWrap","fromDateText","fromTimeText","betweenSpacer","rightInnerWrap","toTimeText","toDateText","fromTimeControl","handleTimeFromChange","toTimeControl","handleTimeToChange","fullDayWrap","formatDate","updateTimePeriod","timezoneFrom","timezoneName","timezoneTo","fromTz","toTz","switchTimezone","handleFullDayChange","getFrom","getTo","updateToTimeDurationHints","getDateWithTime","parsedDate","handleDateFromChange","handleDateToChange","handleTimeInput","handleValueChange","changeInlineEditMode","defTimezone","bindFromToDefaultTimezones","tzButton","bindTimezones","nodeName","removeCustomEvent","difference","abs","yearDuration","duration","getMinutesFromFormattedTime","handleTimeChange","isIncorrectTimeValue","newFromDate","timeValue","isAmPmMode","timeSelector","getMaskedTime","beautifyTime","amPmSymbol","match","pop","getMinutesAndHours","hours","inputType","key","backspace","indexOf","clearTimeString","digits","splice","d","getMaxHours","formatHours","formatMinutes","validatedTime","firstColonIndex","replaceAll","areTimeDigitsCorrect","hh","mm","firstDigit","getFullDayValue","dateTimeWrap","parsedTime","isBoolean","tzCont","setInlineEditMode","BusyUsersDialog","plural","userNames","DISPLAY_NAME","join","UserPlannerSelector","readOnlyMode","meetingNotifyValue","userSelectorDialog","attendeesEntityList","prevUserList","loadedAccessibilityData","REFRESH_PLANNER_DELAY","selectorId","informWrap","informWrapText","moreLink","changeLink","attendeesLabel","attendeesList","userSelectorWrap","plannerOuterWrap","videocallWrap","hideGuestsWrap","hideGuestsIcon","refreshPlannerStateDebounce","refreshPlannerState","dayOfWeekMonthFormat","plannerFeatureEnabled","isReadOnly","EntitySelectorDialog","targetNode","context","preselectedItems","attendeesPreselectedItems","enableSearch","handleUserSelectorChanges","entities","inviteGuestLink","emailUsers","selectMode","searchTabOptions","stubOptions","subtitle","iconOpacity","arrow","showMoreAttendeesPopup","planner","Planner","PLANNER_WIDTH","showEntryName","locked","setInformValue","handleExpandPlannerTimeline","setHideGuestsValue","hideGuests","attendees","notify","entityId","entryId","setEntityList","setLocationValue","displayAttendees","dateTime","getDateTime","updateSelector","getCurrentStatus","conferenceButton","handleVideoconferenceButtonClick","Intranet","ControlButton","intranetControllButton","container","entityType","parentId","mainItem","entityData","analyticsLabel","formType","button","showPlanner","getSelectedItems","getEntityList","selectorEntityList","getUserSelector","SelectorManager","instances","isPlannerDisplayed","showLoader","checkBusyTime","entityList","updateScaleLimitsFromEntry","runPlannerDataRequest","timezone","getLocationValue","entries","preparedData","preparedDataAccessibility","currentFromDate","currentToDate","checkTimePeriod","update","hideLoader","prepareAttendeesForDisplay","AVATAR","avatar","EMAIL_USER","emailUser","SHARING_USER","sharingUser","STATUS","URL","url","loadPlannerData","entryLocation","LOCATION","scaleDateFrom","scaleDateTo","entrieIds","setDateTime","updatePlaner","fromHours","toHours","shownScaleTimeFrom","shownScaleTimeTo","attendeeList","AttendeesList","sortAttendees","usersCount","accepted","requested","userLength","MAX_USER_COUNT_DISPLAY","getUserAvatarNode","hasExternalEmailUsers","showHideGuestsOption","hideHideGuestsOption","user","img","SMALL_AVATAR","defaultAvatarClass","DISABLED_CLASS","getInformValue","hideGuestsText","calendarEventsAccessibility","prepareAccessibilityItem","clearAccessibilityData","userIdList","getData","reload","focusSelector","getConferenceChatId","eventId","BXIM","chatId","openMessenger","alert","EDIT_MODE","ReinviteUserDialog","sendInvitesAgain","EmailSelectorControl","CONFIRM_POPUP_ID","selectNode","mailboxList","componentWrap","allowAddNewEmail","checkValueDebounce","checkValue","setSelectValues","showAdd","mailbox","email","add","Option","formatted","sender","textContent","BXMainMailConfirm","showForm","onAdd","mainMailConfirmPopup","PopupManager","getPopupById","reloadMailboxList","loadMailboxData","additionalParams","checkBXMainMailConfirmLoaded","ConfirmedEmailDialog","SLIDER_Z_INDEX","WIDTH","State","DISABLED","userSettings","getUserSettings","sendFromEmail","emailSelectorControl","setUserSettings","userOptions","save","processButton","CLOCKING","handleSelectChanges","helpLinlk","openHelpSlider","Helper","EmailLimitationDialog","EXPAND_LICENSE_URL","eventsAmount","getEventWithEmailGuestAmount","limit","isEventWithEmailGuestAllowed","subText","getDialogPopup","setAttendeesList","addAvatarToMenuItems","group","groupUsers","SidePanel","Instance","loader","allowChangeHistory","contentClassName","declined"],"mappings":"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"}