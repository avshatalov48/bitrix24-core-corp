{"version":3,"file":"controls.bundle.js","sources":["../src/timeselector.js","../src/reminder.js","../src/location.js","../src/userselector.js","../src/colorselector.js","../src/sectionselector.js","../src/repeatselector.js","../src/selectinput.js","../src/popupdialog.js","../src/viewselector.js","../src/lineviewselector.js","../src/addbutton.js","../src/meetingstatuscontrol.js","../src/confirmstatusdialog.js","../src/confirmeditdialog.js","../src/confirmdeletedialog.js","../src/datetimecontrol.js","../src/busyusersdialog.js","../src/userplannerselector.js","../src/reinviteuserdialog.js","../src/emailselectorcontrol.js","../src/confirmedemaildialog.js","../src/emaillimitationdialog.js","../src/attendeeslist.js"],"sourcesContent":["import {Util} from 'calendar.util';\nimport {Type, Loc} from 'main.core';\n\nexport class TimeSelector {\n\tZ_INDEX = 4000;\n\tvalueList = [];\n\n\tconstructor(params)\n\t{\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap,\n\t\t\tinput: params.input\n\t\t};\n\n\t\tfor (let hour = 0; hour < 24; hour++)\n\t\t{\n\t\t\tthis.valueList.push({value: hour * 60, label: Util.formatTime(hour, 0)});\n\t\t\tthis.valueList.push({value: hour * 60 + 30, label: Util.formatTime(hour, 30)});\n\t\t}\n\n\t\tthis.onChangeCallback = Type.isFunction(params.onChangeCallback) ? params.onChangeCallback : null;\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\tvalues: this.valueList,\n\t\t\tonChangeCallback: (data) => {\n\t\t\t\tif (this.onChangeCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.onChangeCallback(this.selectContol.getInputValue(), data.dataValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thighlightValue(date)\n\t{\n\t\tthis.valueList.forEach(el => el.selected = false); // unselect previous time\n\n\t\tconst minutes = date.getHours() * 60 + date.getMinutes();\n\t\tthis.selectContol.setValue({value: minutes}); // this is needed for correct scroll\n\n\t\tlet selectedValue = this.valueList.find(el => el.value === minutes);\n\t\tif (!selectedValue)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tselectedValue.selected = true;\n\t\tthis.selectContol.setValueList(this.valueList);\n\t}\n\n\tupdateDurationHints(fromTime, toTime, fromDate, toDate)\n\t{\n\t\tconst parsedFromTime = Util.parseTime(fromTime);\n\t\tconst parsedToTime = Util.parseTime(toTime);\n\t\tconst parsedFromDate = Util.parseDate(fromDate);\n\t\tconst parsedToDate = Util.parseDate(toDate);\n\n\t\tconst fromMinutes = parsedFromTime.h * 60 + parsedFromTime.m;\n\t\tconst toMinutes = parsedToTime.h * 60 + parsedToTime.m;\n\t\tconst isSameDate = fromDate === toDate;\n\t\tconst iterateFrom = isSameDate ? this.approximate(fromMinutes + 15, 15) : 0;\n\t\tconst firstHour = this.approximate(fromMinutes + 60 + 15/2, 30);\n\n\t\tthis.valueList = [];\n\n\t\tif (fromDate === toDate)\n\t\t{\n\t\t\tthis.valueList.push(this.getValueElement(fromMinutes, fromMinutes, toMinutes, parsedFromDate, parsedToDate));\n\t\t}\n\n\t\tfor (let minute = iterateFrom; minute <= 24 * 60; minute += (isSameDate && minute < firstHour ? 15 : 30))\n\t\t{\n\t\t\tthis.valueList.push(this.getValueElement(fromMinutes, minute, toMinutes, parsedFromDate, parsedToDate));\n\t\t}\n\n\t\tthis.selectContol.setValueList(this.valueList);\n\t}\n\n\tgetValueElement(fromMinute, currentMinute, toMinute, fromDate, toDate)\n\t{\n\t\tconst hour = Math.floor(currentMinute / 60);\n\t\tconst min = currentMinute % 60;\n\t\tconst time = Util.formatTime(hour, min);\n\t\tconst durationHint = this.getStyledDurationHint(fromMinute, currentMinute, fromDate, toDate);\n\t\tconst selected = currentMinute === toMinute;\n\t\treturn {value: currentMinute, label: time, hint: durationHint, selected};\n\t}\n\n\tgetStyledDurationHint(fromMinute, currentMinute, fromDate, toDate)\n\t{\n\t\tconst durationHint = this.getDurationHint(fromMinute, currentMinute, fromDate, toDate);\n\t\tif (durationHint !== '')\n\t\t{\n\t\t\treturn`<div class=\"menu-popup-item-hint\">${durationHint}</div>`;\n\t\t}\n\t\treturn '';\n\t}\n\n\tgetDurationHint(fromMinutes, toMinutes, fromDate, toDate)\n\t{\n\t\tconst from = new Date(fromDate.getTime() + fromMinutes * 60 * 1000);\n\t\tconst to = new Date(toDate.getTime() + toMinutes * 60 * 1000);\n\n\t\tconst diff = to.getTime() - from.getTime();\n\t\tconst diffDays = this.approximateFloor(diff / (1000 * 60 * 60 * 24), 1);\n\t\tconst diffHours = this.approximate(diff / (1000 * 60 * 60), 0.5);\n\t\tconst diffMinutes = this.approximate(diff / (1000 * 60), 1);\n\t\tconst diffMinutesApproximation = this.approximate(diffMinutes, 15);\n\n\t\tif (diffDays >= 1)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (diffMinutes >= 60)\n\t\t{\n\t\t\tconst approximationMark = diffMinutes !== diffMinutesApproximation ? '~' : '';\n\t\t\treturn `${approximationMark}${this.formatDecimal(diffHours)} ${Loc.getMessage('EC_HOUR_SHORT')}`;\n\t\t}\n\n\t\treturn `${this.formatDecimal(diffMinutes)} ${Loc.getMessage('EC_MINUTE_SHORT')}`;\n\t}\n\n\tformatDecimal(decimal)\n\t{\n\t\treturn `${decimal}`.replace('.', ',');\n\t}\n\n\tapproximateFloor(value, accuracy) {\n\t\treturn Math.floor(value / accuracy) * accuracy;\n\t}\n\n\tapproximate(value, accuracy) {\n\t\treturn Math.round(value / accuracy) * accuracy;\n\t}\n\n}","import {Loc, Type, Dom, Tag, Event} from \"main.core\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {MenuManager, Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\n\nexport class Reminder extends EventEmitter\n{\n\tstatic timeValueList = null;\n\tdefaultReminderTime = 540; // 9.00\n\tfullDayMode = false;\n\textendedMode = true;\n\tselectedValues = [];\n\tcontrolList = {};\n\tviewMode = false;\n\tDOM = {};\n\tchangedByUser = false;\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Calendar.Controls.Reminder');\n\t\tthis.values = this.getValues();\n\n\t\tthis.id = params.id || 'reminder-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.rawValuesMap = new Map();\n\n\t\tthis.viewMode = params.viewMode === true;\n\t\tthis.changeCallack = params.changeCallack;\n\t\tthis.showPopupCallBack = params.showPopupCallBack;\n\t\tthis.hidePopupCallBack = params.hidePopupCallBack;\n\n\t\tthis.create(params);\n\t\tthis.setValue(params.selectedValues || []);\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcreate(params)\n\t{\n\t\tif (Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\n\t\tif (!Type.isElementNode(this.DOM.wrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.addClass(this.DOM.wrap, 'calendar-notification-values');\n\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.DOM.addButton = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-notification-add-btn-wrap\">\n\t\t\t\t\t<span class=\"calendar-notification-text\">${Loc.getMessage('EC_REMIND1_ADD')}</span>\n\t\t\t\t\t<span class=\"calendar-notification-btn-container calendar-notification-btn-add\">\n\t\t\t\t\t\t<span class=\"calendar-notification-icon\"></span>\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\t\t}\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (Type.isDomNode(this.DOM.addButton))\n\t\t{\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showPopup.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.wrap))\n\t\t{\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleClick.bind(this));\n\t\t}\n\t}\n\n\tgetValues()\n\t{\n\t\tlet values = [];\n\n\t\tif (!this.fullDayMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{value: 0, label: Loc.getMessage(\"EC_REMIND1_0\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_0\")},\n\t\t\t\t{value: 5, label: Loc.getMessage(\"EC_REMIND1_5\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_5\")},\n\t\t\t\t{value: 10, label: Loc.getMessage(\"EC_REMIND1_10\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_10\")},\n\t\t\t\t{value: 15, label: Loc.getMessage(\"EC_REMIND1_15\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_15\")},\n\t\t\t\t{value: 20, label: Loc.getMessage(\"EC_REMIND1_20\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_20\")},\n\t\t\t\t{value: 30, label: Loc.getMessage(\"EC_REMIND1_30\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_30\")},\n\t\t\t\t{value: 60, label: Loc.getMessage(\"EC_REMIND1_60\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_60\")},\n\t\t\t\t{value: 120, label: Loc.getMessage(\"EC_REMIND1_120\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_120\")}\n\t\t\t\t//{value: 1440, label: Loc.getMessage(\"EC_REMIND1_1440\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_1440\")},\n\t\t\t\t//{value: 2880, label: Loc.getMessage(\"EC_REMIND1_2880\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_2880\")}\n\t\t\t]);\n\t\t}\n\n\t\tif (this.extendedMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-0',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_0\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 0,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-1',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_1\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 1,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-2',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_2\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 2,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'custom',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_CUSTOM\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'custom'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tsetValue(reminderList, emitChanges = true, changedByUser = true)\n\t{\n\t\tthis.selectedValues.forEach((value) => {\n\t\t\tthis.removeValue(value, emitChanges);\n\t\t});\n\n\t\tif (Type.isArray(reminderList))\n\t\t{\n\t\t\treminderList.forEach((value) => {this.addValue(value, emitChanges, changedByUser)}, this);\n\t\t}\n\t}\n\n\tgetSelectedValues()\n\t{\n\t\treturn this.selectedValues;\n\t}\n\n\tgetSelectedRawValues()\n\t{\n\t\tlet selectedRawValues = [];\n\t\tthis.selectedValues.forEach((value) => {\n\n\t\t\tselectedRawValues.push(this.rawValuesMap.get(value) || value);\n\t\t});\n\t\treturn selectedRawValues;\n\t}\n\n\tsetFullDayMode(fullDayMode)\n\t{\n\t\tif (fullDayMode !== this.fullDayMode)\n\t\t{\n\t\t\tthis.fullDayMode = fullDayMode;\n\t\t\tthis.values = this.getValues();\n\t\t}\n\t}\n\n\tshowPopup(params = {})\n\t{\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tthis.values.forEach((item) => {\n\t\t\tif (item.mode === 'time-menu'\n\t\t\t\t|| item.mode === 'custom'\n\t\t\t\t|| !BX.util.in_array(item.value, this.selectedValues))\n\t\t\t{\n\t\t\t\tlet menuItem = {};\n\n\t\t\t\tif (item.dataset && item.dataset.mode === 'time-menu')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = item.id;\n\t\t\t\t\tlet defaultReminderTime = Util.getTimeByInt(this.defaultReminderTime);\n\n\t\t\t\t\tmenuItem.text = item.label.replace('#TIME#', Util.formatTime(defaultReminderTime.hour, defaultReminderTime.min));\n\n\t\t\t\t\tmenuItem.dataset = BX.util.objectMerge({\n\t\t\t\t\t\ttype: 'submenu-list',\n\t\t\t\t\t\tvalue: this.defaultReminderTime\n\t\t\t\t\t}, item.dataset);\n\n\t\t\t\t\tmenuItem.items = this.getSubmenuTimeValues(menuItem, item.label, params);\n\n\t\t\t\t\tmenuItem.onclick = (function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.addValue({\n\t\t\t\t\t\t\t\tbefore: item.dataset.daysBefore,\n\t\t\t\t\t\t\t\ttime: item.dataset.time\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.defer(function(){_this.reminderMenu.close();}, _this)();\n\t\t\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t\telse if (item.dataset && item.dataset.mode === 'custom')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = 'custom';\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.items = [{id: 'tmp', text: 'tmp'}];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.onclick = (function (value, mode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t_this.addValue(value);\n\t\t\t\t\t\t\t_this.reminderMenu.close();\n\t\t\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})(item.value, item.mode);\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push(menuItem);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.reminderMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tparams.bindTarget || this.DOM.addButton,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tlet adjustSubmenuPopup = this.adjustSubmenuPopup.bind(this);\n\t\tlet closeSubmenuPopup = this.closeSubmenuPopup.bind(this);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\n\t\tthis.reminderMenu.popupWindow.subscribe('onClose', () => {\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\t\t});\n\t\tthis.reminderMenu.show();\n\t}\n\n\tgetSubmenuTimeValues(parentItem, parentItemMessage, params)\n\t{\n\t\tlet menuItems = [];\n\t\tReminder.getTimeValueList(60).forEach(function(menuItem)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\tid: 'time-' + menuItem.value,\n\t\t\t\tdataset: {\n\t\t\t\t\tvalue: menuItem.value,\n\t\t\t\t\tdaysBefore: parentItem.dataset.daysBefore\n\t\t\t\t},\n\t\t\t\ttext: menuItem.label,\n\t\t\t\tonclick: function(e, item)\n\t\t\t\t{\n\t\t\t\t\tlet time = Util.getTimeByInt(item.dataset.value);\n\t\t\t\t\tlet parentMenuItem = this.reminderMenu.getMenuItem(parentItem.id);\n\t\t\t\t\tif (parentMenuItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tparentMenuItem.setText(parentItemMessage.replace('#TIME#', Util.formatTime(time.hour, time.min)));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addValue({\n\t\t\t\t\t\ttime: item.dataset.value,\n\t\t\t\t\t\tbefore: item.dataset.daysBefore\n\t\t\t\t\t});\n\n\t\t\t\t\tBX.defer(function(){this.reminderMenu.close();}, this)();\n\t\t\t\t\tif (Type.isFunction(params.addValueCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tparams.addValueCallback();\n\t\t\t\t\t}\n\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}, this);\n\t\treturn menuItems;\n\t}\n\n\taddValue(value, emitChanges = true, changedByUser = true)\n\t{\n\t\tlet item;\n\t\tconst formattedValue = Reminder.formatValue(value);\n\n\t\tif (Type.isPlainObject(value) && value.count)\n\t\t{\n\t\t\tvalue = parseInt(formattedValue);\n\t\t}\n\n\t\tif (Type.isPlainObject(value) && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tif (Type.isInteger(parseInt(value.before)) && Type.isInteger(parseInt(value.time)))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${Reminder.getReminderLabel(value)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.type === 'date' && Type.isDate(value.value))\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`<span class=\"calendar-reminder-item\">\n\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t${Util.formatDateUsable(value.value) + ' ' + Util.formatTime(value.value)}\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\tthis.controlList[formattedValue] = item;\n\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t}\n\t\telse if (parseInt(value) >= 0 && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tfor (let i = 0; i < this.values.length; i++)\n\t\t\t{\n\t\t\t\tif (this.values[i].value === parseInt(value))\n\t\t\t\t{\n\t\t\t\t\titem = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${this.values[i].shortLabel || this.values[i].label}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\t\tif (!this.viewMode)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\t\t\tthis.controlList[formattedValue] = item;\n\t\t\t\t\tthis.rawValuesMap.set(formattedValue, value);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item === undefined)\n\t\t\t{\n\t\t\t\titem = this.DOM.wrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-reminder-item'},\n\t\t\t\t\ttext: Reminder.getText(value)\n\t\t\t\t}));\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Dom.create('SPAN', {\n\t\t\t\t\t\tprops: {className: 'calendar-reminder-clear-icon'},\n\t\t\t\t\t\tevents: {click: function(){this.removeValue(value);}.bind(this)}\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tthis.selectedValues.push(value);\n\t\t\t\tthis.controlList[value] = item;\n\t\t\t\tthis.rawValuesMap.set(value, value);\n\t\t\t}\n\t\t}\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t\t}\n\t\tthis.changedByUser = emitChanges && changedByUser;\n\n\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t{\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButton);\n\t\t}\n\t}\n\n\tremoveValue(value, emitChanges = true)\n\t{\n\t\tif (this.controlList[value] && Type.isDomNode(this.controlList[value]))\n\t\t{\n\t\t\tDom.remove(this.controlList[value]);\n\t\t}\n\t\tthis.selectedValues = BX.util.deleteFromArray(this.selectedValues, BX.util.array_search(value, this.selectedValues));\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t\t\tthis.changedByUser = true;\n\t\t}\n\t}\n\n\tstatic getTimeValueList(mode = 30)\n\t{\n\t\tif (!Reminder.timeValueList)\n\t\t{\n\t\t\tReminder.timeValueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tReminder.timeValueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tif (mode <= 30)\n\t\t\t\t{\n\t\t\t\t\tReminder.timeValueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Reminder.timeValueList;\n\t}\n\n\thandleClick(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tlet remValue = target.getAttribute('data-bxc-value');\n\n\t\tif (!Type.isNull(remValue) && this.selectedValues.includes(remValue))\n\t\t{\n\t\t\tthis.removeValue(remValue);\n\t\t}\n\n\t\tif (Dom.hasClass(target, 'calendar-reminder-item-title'))\n\t\t{\n\t\t\tthis.showPopup({\n\n\t\t\t\tbindTarget: target,\n\t\t\t\taddValueCallback: ()=>{\n\t\t\t\t\tconst removeIcon = target.parentNode.querySelector('.calendar-reminder-clear-icon');\n\t\t\t\t\tif (Type.isElementNode(removeIcon)\n\t\t\t\t\t\t&& !Type.isNull(removeIcon.getAttribute('data-bxc-value')))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.removeValue(removeIcon.getAttribute('data-bxc-value'));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\tstatic getReminderLabel(value)\n\t{\n\t\tlet label = '';\n\t\tvalue.before = parseInt(value.before);\n\t\tvalue.time = parseInt(value.time);\n\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time) && [0, 1, 2].includes(value.before))\n\t\t{\n\t\t\tlet time = Util.getTimeByInt(value.time);\n\n\t\t\tlabel = Loc.getMessage('EC_REMIND1_DAY_' + value.before + '_SHORT').replace('#TIME#', Util.formatTime(time.hour, time.min))\n\t\t}\n\t\treturn label;\n\t}\n\n\t// Used to scroll into view and highlight default item in time menu\n\tadjustSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustTimeSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustCalendarSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tlet layout = submenuPopup.bindElement;\n\t\t\t\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\n\t\t\t\t\tif (Type.isDomNode(textNode))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.clean(textNode);\n\t\t\t\t\t\ttextNode.innerHTML = Loc.getMessage(\"EC_REMIND1_CUSTOM\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustTimeSubmenuPopup(popup)\n\t{\n\t\tlet selectedMenuItem = popup.getContentContainer().querySelector('span[data-value=\"' + this.defaultReminderTime + '\"]');\n\t\tif (Type.isDomNode(selectedMenuItem))\n\t\t{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tpopup.getContentContainer().scrollTop = parseInt(selectedMenuItem.offsetTop) - 10;\n\t\t\t\tDom.addClass(selectedMenuItem, 'menu-popup-item-open');\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tadjustCalendarSubmenuPopup(popup)\n\t{\n\t\tlet layout = popup.bindElement;\n\n\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\t\tif (Type.isDomNode(textNode))\n\t\t{\n\t\t\tDom.clean(textNode);\n\t\t\tconst input = textNode.appendChild(Tag.render`<input id=\"inp-${Math.round(Math.random() * 100000)}\" type=\"text\" class=\"calendar-field calendar-field-datetime\" value=\"\" autocomplete=\"off\" placeholder=\"${Loc.getMessage('EC_REMIND1_CUSTOM_PLACEHOLDER')}\"/>`);\n\t\t\tconst calendarControl = BX.calendar.get();\n\n\t\t\t// Hacks for BX.calendar - it works as singleton and has troubles with using inside menupopups\n\t\t\t// We trying to reinitialize it everytime\n\t\t\tif (calendarControl.popup)\n\t\t\t{\n\t\t\t\tcalendarControl.popup.destroy();\n\t\t\t\tcalendarControl.popup = null;\n\t\t\t\tcalendarControl._current_layer = null;\n\t\t\t\tcalendarControl._layers = {};\n\t\t\t}\n\t\t\tif (calendarControl.popup_month)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_month.destroy();\n\t\t\t\tcalendarControl.popup_month = null;\n\t\t\t}\n\t\t\tif (calendarControl.popup_year)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_year.destroy();\n\t\t\t\tcalendarControl.popup_year = null;\n\t\t\t}\n\t\t\t\n\n\t\t\tcalendarControl.Show({\n\t\t\t\tnode: input,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\n\t\t\tlet calendarPopup = calendarControl.popup;\n\t\t\tcalendarPopup.cacheable = false;\n\t\t\tif (calendarPopup && calendarPopup.popupContainer)\n\t\t\t{\n\t\t\t\tlet calendarWrap = calendarPopup.popupContainer.querySelector('.bx-calendar');\n\t\t\t\tif (Type.isDomNode(calendarWrap))\n\t\t\t\t{\n\t\t\t\t\tpopup.contentContainer.appendChild(calendarWrap);\n\t\t\t\t}\n\t\t\t\tcalendarPopup.close();\n\t\t\t\tMenuManager.destroy(calendarPopup.uniquePopupId);\n\t\t\t}\n\n\t\t\tEvent.bind(input, 'change', () => {\n\t\t\t\tlet\n\t\t\t\t\tvalue = input.value,\n\t\t\t\t\tdateValue = Util.parseDate(value);\n\n\t\t\t\tif (Type.isDate(dateValue))\n\t\t\t\t{\n\t\t\t\t\tthis.addValue({type: 'date', value: dateValue});\n\t\t\t\t\tthis.reminderMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t\tif (Type.isElementNode(this.DOM.addButton))\n\t\t\t{\n\t\t\t\tthis.DOM.addButton.style.display = 'none';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrap, 'calendar-reminder-readonly');\n\t\t}\n\t}\n\n\twasChangedByUser()\n\t{\n\t\treturn this.changedByUser;\n\t}\n\n\tstatic getText(value)\n\t{\n\t\tlet\n\t\t\ttempValue = value,\n\t\t\tdividers = [60, 24], //list of time dividers\n\t\t\tmessageCodes = ['EC_REMIND1_MIN_COUNT', 'EC_REMIND1_HOUR_COUNT', 'EC_REMIND1_DAY_COUNT'],\n\t\t\tresult = '';\n\n\t\tfor (let i = 0; i < messageCodes.length; i++)\n\t\t{\n\t\t\tif (tempValue < dividers[i] || i === dividers.length)\n\t\t\t{\n\t\t\t\tresult = Loc.getMessage(messageCodes[i]).toString();\n\t\t\t\tresult = result.replace('\\#COUNT\\#', tempValue.toString());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttempValue = Math.ceil(tempValue / dividers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic formatValue(remindValue)\n\t{\n\t\tif (Type.isPlainObject(remindValue)\n\t\t\t&& Type.isInteger(parseInt(remindValue.before))\n\t\t\t&& Type.isInteger(parseInt(remindValue.time)))\n\t\t{\n\t\t\treturn 'daybefore|' + remindValue.before + '|' + remindValue.time;\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && Type.isDate(remindValue.value))\n\t\t{\n\t\t\treturn 'date|' + Util.formatDateTime(remindValue.value);\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && remindValue.type)\n\t\t{\n\t\t\tif (remindValue.type === 'min')\n\t\t\t{\n\t\t\t\treturn remindValue.count.toString();\n\t\t\t}\n\t\t\tif (remindValue.type === 'hour')\n\t\t\t{\n\t\t\t\treturn (parseInt(remindValue.count) * 60).toString();\n\t\t\t}\n\t\t\tif (remindValue.type === 'day')\n\t\t\t{\n\t\t\t\treturn (parseInt(remindValue.count) * 60 * 24).toString();\n\t\t\t}\n\t\t}\n\n\t\treturn remindValue.toString();\n\t}\n}\n","import { Tag, Type, Loc, Dom, Event, Text} from 'main.core';\nimport { RoomsManager, RoomsSection } from 'calendar.roomsmanager';\nimport { CategoryManager } from 'calendar.categorymanager';\nimport { Util } from 'calendar.util';\n\nexport class Location\n{\n\tstatic locationList = [];\n\tstatic meetingRoomList = [];\n\tstatic currentRoomCapacity = 0;\n\tstatic accessibility = [];\n\tstatic DAY_LENGTH = 86400000;\n\tdatesRange = [];\n\tviewMode = false;\n\n\tconstructor(params)\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'location-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrap\n\t\t};\n\t\tthis.roomsManager = params.roomsManager || null;\n\t\tthis.locationAccess = params.locationAccess || false;\n\t\tthis.disabled = !params.richLocationEnabled;\n\t\tthis.value = {type: '', text: '', value: ''};\n\t\tthis.inlineEditModeEnabled = params.inlineEditModeEnabled;\n\t\tthis.meetingRooms = params.iblockMeetingRoomList || [];\n\t\tLocation.setMeetingRoomList(params.iblockMeetingRoomList);\n\t\tLocation.setLocationList(params.locationList);\n\t\tif (!this.disabled)\n\t\t{\n\t\t\tthis.default = this.setDefaultRoom(params.locationList) || '';\n\t\t}\n\t\tthis.create();\n\t\tthis.setViewMode(params.viewMode === true);\n\t\tthis.processValue();\n\t\tthis.setCategoryManager();\n\t\tthis.setValuesDebounced = BX.debounce(this.setValues.bind(this), 70);\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrapNode.style.display = 'flex';\n\t\tthis.DOM.inputWrap = this.DOM.wrapNode.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-field-block\"></div>\n\t\t`)\n\n\t\tthis.DOM.alertIconLocation = Tag.render`\n\t\t\t<div class=\"ui-alert-icon-danger calendar-location-alert-icon\" data-hint-no-icon=\"Y\" data-hint=\"${Loc.getMessage('EC_LOCATION_OVERFLOW')}\">\n\t\t\t<i></i>\n\t\t\t</div>\n\t\t`;\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tthis.DOM.inlineEditLinkWrap = this.DOM.wrapNode.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-field-place-link calendar-location-readonly\">${this.DOM.inlineEditLink = Tag.render`\n\t\t\t\t\t<span class=\"calendar-text-link\">${Loc.getMessage('EC_REMIND1_ADD')}</span>`}\n\t\t\t\t</div>`);\n\t\t\tthis.DOM.inputWrap.style.display = 'none';\n\t\t\tEvent.bind(\n\t\t\t\tthis.DOM.inlineEditLinkWrap, 'click',\n\t\t\t\t() => {\n\t\t\t\t\tthis.displayInlineEditControls();\n\t\t\t\t\tthis.selectContol.showPopup();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (this.disabled)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrapNode, 'locked');\n\t\t\tthis.DOM.inputWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-lock-icon'},\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\ttop.BX.UI.InfoHelper.show('limit_office_calendar_location');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}))\n\t\t}\n\n\t\tthis.DOM.input = this.DOM.inputWrap.appendChild(Dom.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tname: this.params.inputName || '',\n\t\t\t\tplaceholder: this.disabled\n\t\t\t\t\t? Loc.getMessage('EC_LOCATION_PLACEHOLDER_LOCKED')\n\t\t\t\t\t: Loc.getMessage('EC_LOCATION_PLACEHOLDER')\n\t\t\t\t,\n\t\t\t\ttype: 'text',\n\t\t\t\tautocomplete: this.disabled ? 'on' : 'off',\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'calendar-field calendar-field-select'\n\t\t\t},\n\t\t\tstyle: {\n\t\t\t\tpaddingRight: 25 + 'px',\n\t\t\t\tmaxWidth: 300 + 'px',\n\t\t\t}\n\t\t}));\n\t}\n\n\tsetValues()\n\t{\n\t\tthis.addLocationRemoveButton();\n\n\t\tif (!this.categoryManagerFromDB)\n\t\t{\n\t\t\tthis.setValuesDebounced?.();\n\t\t\treturn;\n\t\t}\n\t\tthis.prohibitClick();\n\n\t\tlet\n\t\t\tmenuItemList = [],\n\t\t\tselectedIndex = false,\n\t\t\tmeetingRooms = Location.getMeetingRoomList(),\n\t\t\tlocationList = Location.getLocationList();\n\n\t\tconst roomList = this.createRoomList(locationList);\n\n\t\tthis.categoriesWithRooms = this?.categoryManagerFromDB?.getCategoriesWithRooms(roomList);\n\n\t\tif (Type.isArray(meetingRooms))\n\t\t{\n\t\t\tmeetingRooms.forEach(function(room)\n\t\t\t{\n\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tID: room.ID,\n\t\t\t\t\tlabel: room.NAME,\n\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\tcapacity: 0,\n\t\t\t\t\ttype: 'mr'\n\t\t\t\t});\n\n\t\t\t\tif (this.value.type === 'mr'\n\t\t\t\t\t&& parseInt(this.value.value) === room.ID)\n\t\t\t\t{\n\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (menuItemList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t}\n\t\t}\n\n\t\tconst pushRoomToItemList = (room) => {\n\t\t\troom.id = parseInt(room.id);\n\t\t\troom.location_id = parseInt(room.location_id);\n\t\t\tmenuItemList.push({\n\t\t\t\tID: room.id,\n\t\t\t\tLOCATION_ID: room.location_id,\n\t\t\t\tlabel: room.name,\n\t\t\t\tcapacity: parseInt(room.capacity) || 0,\n\t\t\t\tcolor: room.color,\n\t\t\t\treserved: room.reserved || false,\n\t\t\t\tlabelRaw: room.name,\n\t\t\t\tlabelCapacity: this.getCapacityMessage(room.capacity),\n\t\t\t\tvalue: room.id,\n\t\t\t\ttype: 'calendar'\n\t\t\t});\n\n\t\t\tif (this.value.type === 'calendar'\n\t\t\t\t&& parseInt(this.value.value) === parseInt(room.id))\n\t\t\t{\n\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t}\n\t\t};\n//TODO think about delimiter draw\n\t\tif (Type.isObject(this.categoriesWithRooms))\n\t\t{\n\t\t\tif (this.categoriesWithRooms.categories.length || this.categoriesWithRooms.default.length)\n\t\t\t{\n\t\t\t\tthis.categoriesWithRooms.categories.forEach((category) => {\n\t\t\t\t\tif(category.rooms.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItemList.push({text: category.name, delimiter: true});\n\t\t\t\t\t\tcategory.rooms.forEach((room) => pushRoomToItemList(room), this);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.categoriesWithRooms.default.length)\n\t\t\t\t{\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\ttext:\"\\0\",\n\t\t\t\t\t\tclassName: 'calendar-popup-window-delimiter-default-category',\n\t\t\t\t\t\tdelimiter: true,\n\t\t\t\t\t});\n\t\t\t\t\tthis.categoriesWithRooms.default.forEach((room) => pushRoomToItemList(room), this);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationAccess)\n\t\t\t\t{\n\t\t\t\t\tthis.loadRoomSlider();\n\t\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tlabel: Loc.getMessage('EC_LOCATION_MEETING_ROOM_SET'),\n\t\t\t\t\t\tcallback: this.openRoomsSlider.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.locationAccess)\n\t\t\t\t{\n\t\t\t\t\tthis.loadRoomSlider();\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tlabel: Loc.getMessage('EC_ADD_LOCATION'),\n\t\t\t\t\t\tcallback: this.openRoomsSlider.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectContol)\n\t\t{\n\t\t\tthis.selectContol.destroy();\n\t\t}\n\n\t\tthis.processValue();\n\n\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tvalues: menuItemList,\n\t\t\tvalueIndex: selectedIndex,\n\t\t\tzIndex: this.zIndex,\n\t\t\tdisabled: this.disabled,\n\t\t\tminWidth: 300,\n\t\t\tonChangeCallback: BX.delegate(function()\n\t\t\t{\n\t\t\t\tlet i, value = this.DOM.input.value;\n\t\t\t\tthis.value = {text: value};\n\t\t\t\tfor (i = 0; i < menuItemList.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (menuItemList[i].labelRaw === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.value.type = menuItemList[i].type;\n\t\t\t\t\t\tthis.value.value = menuItemList[i].value;\n\t\t\t\t\t\tLocation.setCurrentCapacity(menuItemList[i].capacity)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (Type.isFunction(this.params.onChangeCallback))\n\t\t\t\t{\n\t\t\t\t\tthis.params.onChangeCallback();\n\t\t\t\t}\n\t\t\t\tif (this.value.text === '')\n\t\t\t\t{\n\t\t\t\t\tthis.removeLocationRemoveButton();\n\t\t\t\t}\n\t\t\t\tthis.addLocationRemoveButton();\n\t\t\t\tthis.allowClick();\n\t\t\t}, this)\n\t\t});\n\t\tthis.allowClick();\n\t}\n\n\tprocessValue()\n\t{\n\t\tif (this.value)\n\t\t{\n\t\t\tthis.DOM.input.value = this.value.str || '';\n\t\t\tif (this.value.type &&\n\t\t\t\t(this.value.str === this.getTextLocation(this.value) ||\n\t\t\t\t\tthis.getTextLocation(this.value) === Loc.getMessage('EC_LOCATION_EMPTY')))\n\t\t\t{\n\t\t\t\tthis.DOM.input.value = '';\n\t\t\t\tthis.value = '';\n\t\t\t}\n\t\t\tfor (const locationListElement of Location.locationList)\n\t\t\t{\n\t\t\t\tif (parseInt(locationListElement.ID) === this.value.room_id)\n\t\t\t\t{\n\t\t\t\t\tLocation.setCurrentCapacity(parseInt(locationListElement.CAPACITY));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValuesDebounce()\n\t{\n\t\tthis.setCategoryManager();\n\n\t\tthis.setValuesDebounced();\n\t}\n\n\tremoveValue()\n\t{\n\t\tthis.setValue(false, false);\n\t\tthis.selectContol.onChangeCallback();\n\t\tthis.removeLocationRemoveButton();\n\t}\n\n\tremoveLocationRemoveButton()\n\t{\n\t\tif(this.DOM.inputWrap.contains(this.DOM.removeLocationButton))\n\t\t{\n\t\t\tthis.DOM.inputWrap.removeChild(this.DOM.removeLocationButton);\n\t\t}\n\t\telse if(this.DOM.wrapNode.contains(this.DOM.removeLocationButton))\n\t\t{\n\t\t\tthis.DOM.wrapNode.removeChild(this.DOM.removeLocationButton);\n\t\t}\n\n\t\tthis.DOM.removeLocationButton = null;\n\t\tif(Type.isDomNode(this.DOM.inlineEditLink))\n\t\t{\n\t\t\tthis.displayInlineEditControls();\n\t\t}\n\t}\n\n\taddLocationRemoveButton()\n\t{\n\t\tlet wrap = this.DOM.inputWrap;\n\t\tif(this.DOM?.inlineEditLinkWrap?.style.display === '')\n\t\t{\n\t\t\twrap = this.DOM.wrapNode;\n\t\t}\n\n\t\tif(\n\t\t\t(this.value.value || this.value.str || this.value.text)\n\t\t\t&& !this.viewMode\n\t\t\t&& !this.DOM.removeLocationButton\n\t\t\t&& this.value.text !== ''\n\t\t)\n\t\t{\n\t\t\tthis.DOM.removeLocationButton = wrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-location-clear-btn-wrap calendar-location-readonly\">\n\t\t\t\t\t<span class=\"calendar-location-clear-btn-text\">${Loc.getMessage('EC_LOCATION_CLEAR_INPUT')}</span>\n\t\t\t\t</span>`);\n\t\t\tEvent.bind(this.DOM.removeLocationButton, 'click', this.removeValue.bind(this));\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.wrapNode, 'calendar-location-readonly')\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.wrapNode, 'calendar-location-readonly')\n\t\t}\n\t}\n\n\taddCapacityAlert()\n\t{\n\t\tif (!Dom.hasClass(this.DOM.input, 'calendar-field-location-select-border'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.input, 'calendar-field-location-select-border');\n\t\t}\n\t\tif (Type.isDomNode(this.DOM.alertIconLocation))\n\t\t{\n\t\t\tUtil.initHintNode(this.DOM.alertIconLocation);\n\t\t}\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.input.after(this.DOM.alertIconLocation)\n\t\t}, 200);\n\t}\n\n\tremoveCapacityAlert()\n\t{\n\t\tif (Dom.hasClass(this.DOM.input, 'calendar-field-location-select-border'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.input, 'calendar-field-location-select-border');\n\t\t}\n\t\tif (this.DOM.alertIconLocation.parentNode === this.DOM.inputWrap)\n\t\t{\n\t\t\tthis.DOM.inputWrap.removeChild(this.DOM.alertIconLocation);\n\t\t}\n\t}\n\n\tgetCapacityMessage(capacity)\n\t{\n\t\tlet suffix;\n\t\tif ((capacity % 100 > 10) && (capacity % 100 < 20))\n\t\t{\n\t\t\tsuffix = 5;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsuffix = capacity % 10;\n\t\t}\n\t\treturn Loc.getMessage('EC_LOCATION_CAPACITY_' + suffix, {'#NUM#': capacity})\n\t}\n\t\n\tcheckLocationAccessibility(params)\n\t{\n\t\tthis.getLocationAccessibility(params.from, params.to)\n\t\t.then(()=> {\n\t\t\tlet eventTsFrom;\n\t\t\tlet eventTsTo;\n\t\t\tlet fromTs = params.from.getTime();\n\t\t\tlet toTs = params.to.getTime();\n\t\t\tif (params.fullDay)\n\t\t\t{\n\t\t\t\ttoTs += Location.DAY_LENGTH;\n\t\t\t}\n\t\t\t\n\t\t\tfor (const index in Location.locationList)\n\t\t\t{\n\t\t\t\tLocation.locationList[index].reserved = false;\n\t\t\t\tlet roomId = Location.locationList[index].ID;\n\t\t\t\tfor (const date of this.datesRange)\n\t\t\t\t{\n\t\t\t\t\tif (Type.isUndefined(Location.accessibility[date][roomId]))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tfor (const event of Location.accessibility[date][roomId])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (parseInt(event.PARENT_ID) === parseInt(params.currentEventId))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\teventTsFrom = Util.parseDate(event.DATE_FROM).getTime();\n\t\t\t\t\t\teventTsTo = Util.parseDate(event.DATE_TO).getTime();\n\t\t\t\t\t\tif (event.DT_SKIP_TIME !== 'Y')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teventTsFrom -= event['~USER_OFFSET_FROM'] * 1000;\n\t\t\t\t\t\t\teventTsTo -= event['~USER_OFFSET_TO'] * 1000;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\teventTsTo += Location.DAY_LENGTH;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (eventTsFrom < toTs && eventTsTo > fromTs)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLocation.locationList[index].reserved = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (Location.locationList[index].reserved)\n\t\t\t\t\t{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.setValuesDebounce();\n\t\t});\n\t}\n\t\n\tgetLocationAccessibility(from, to)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.datesRange = Location.getDatesRange(from, to);\n\t\t\tlet isCheckedAccessibility = true;\n\t\t\t\n\t\t\tfor (let date of this.datesRange)\n\t\t\t{\n\t\t\t\tif (Type.isUndefined(Location.accessibility[date]))\n\t\t\t\t{\n\t\t\t\t\tisCheckedAccessibility = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif (!isCheckedAccessibility)\n\t\t\t{\n\t\t\t\tBX.ajax.runAction('calendar.api.locationajax.getLocationAccessibility', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdatesRange: this.datesRange,\n\t\t\t\t\t\tlocationList: Location.locationList,\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tfor (let date of this.datesRange)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tLocation.accessibility[date] = response.data[date];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(Location.accessibility, this.datesRange);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(Location.accessibility, this.datesRange);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstatic handlePull(params)\n\t{\n\t\tif (!params.fields.DATE_FROM || !params.fields.DATE_TO)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet dateFrom = Util.parseDate(params.fields.DATE_FROM);\n\t\tlet dateTo = Util.parseDate(params.fields.DATE_TO);\n\t\tlet datesRange = Location.getDatesRange(dateFrom, dateTo);\n\t\t\n\t\tfor (let date of datesRange)\n\t\t{\n\t\t\tif (Location.accessibility[date])\n\t\t\t{\n\t\t\t\tdelete Location.accessibility[date];\n\t\t\t}\n\t\t}\n\t}\n\t\n\tloadRoomSlider()\n\t{\n\t\tthis.setRoomsManager();\n\t\tthis.setCategoryManager();\n\t}\n\t\n\topenRoomsSlider()\n\t{\n\t\tthis.getRoomsInterface()\n\t\t\t.then(function(RoomsInterface) {\n\t\t\t\tif (!this.roomsInterface)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsInterface = new RoomsInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: null,\n\t\t\t\t\t\t\treadonly: false,\n\t\t\t\t\t\t\troomsManager: this.roomsManagerFromDB,\n\t\t\t\t\t\t\tcategoryManager: this.categoryManagerFromDB,\n\t\t\t\t\t\t\tisConfigureList: true\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.roomsInterface.show();\n\t\t\t}.bind(this));\n\t}\n\n\tgetTextValue(value)\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\tvalue = this.value;\n\t\t}\n\n\t\tlet res = value.str || value.text || '';\n\t\tif (value && value.type === 'mr')\n\t\t{\n\t\t\tres = 'ECMR_' + value.value + (value.mrevid ? '_' + value.mrevid : '');\n\n\t\t}\n\t\telse if (value && value.type === 'calendar')\n\t\t{\n\t\t\tres = 'calendar_' + value.value + (value.room_event_id ? '_' + value.room_event_id : '');\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tsetValue(value, debounced = true)\n\t{\n\t\tif (Type.isPlainObject(value))\n\t\t{\n\t\t\tthis.value.text = value.text || '';\n\t\t\tthis.value.type = value.type || '';\n\t\t\tthis.value.value = value.value || '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value = Location.parseStringValue(value);\n\t\t}\n\n\t\tif (debounced)\n\t\t{\n\t\t\tthis.setValuesDebounce();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setValues();\n\t\t}\n\n\t\tif (this.inlineEditModeEnabled)\n\t\t{\n\t\t\tlet textLocation = this.getTextLocation(this.value);\n\t\t\tthis.DOM.inlineEditLink.innerHTML = Text.encode(textLocation || Loc.getMessage('EC_REMIND1_ADD'));\n\t\t\tif(textLocation)\n\t\t\t{\n\t\t\t\tthis.addLocationRemoveButton();\n\t\t\t}\n\t\t}\n\t}\n\n\t// parseLocation\n\tstatic parseStringValue(str)\n\t{\n\t\tif (!Type.isString(str))\n\t\t{\n\t\t\tstr = '';\n\t\t}\n\n\t\tlet\n\t\t\tres = {\n\t\t\t\ttype : false,\n\t\t\t\tvalue : false,\n\t\t\t\tstr : str\n\t\t\t};\n\n\t\tif (str.substr(0, 5) === 'ECMR_')\n\t\t{\n\t\t\tres.type = 'mr';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.mrid = parseInt(value[1]);\n\t\t\t\t}\n\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.mrevid = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (str.substr(0, 9) === 'calendar_')\n\t\t{\n\t\t\tres.type = 'calendar';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.room_id = parseInt(value[1]);\n\t\t\t\t}\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.room_event_id = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tgetTextLocation(location)\n\t{\n\t\tlet\n\t\t\tvalue = Type.isPlainObject(location) ? location : Location.parseStringValue(location),\n\t\t\ti, str = value.str;\n\n\t\tif (Type.isArray(this.meetingRooms) && value.type === 'mr')\n\t\t{\n\t\t\tstr = Loc.getMessage('EC_LOCATION_EMPTY');\n\t\t\tfor (i = 0; i < this.meetingRooms.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(this.meetingRooms[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = this.meetingRooms[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(Location.locationList) && value.type === 'calendar')\n\t\t{\n\t\t\tstr = Loc.getMessage('EC_LOCATION_EMPTY');\n\t\t\tfor (i = 0; i < Location.locationList.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(Location.locationList[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = Location.locationList[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tstatic setLocationList(locationList)\n\t{\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tLocation.locationList = locationList;\n\t\t\tthis.sortLocationList();\n\t\t}\n\t}\n\n\tstatic sortLocationList()\n\t{\n\t\tLocation.locationList.sort((a,b) => {\n\t\t\tif (a.NAME.toLowerCase() > b.NAME.toLowerCase())\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\tif (a.NAME.toLowerCase() < b.NAME.toLowerCase())\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t\treturn 0;\n\t\t})\n\t}\n\n\tstatic getLocationList()\n\t{\n\t\treturn Location.locationList;\n\t}\n\n\tstatic setMeetingRoomList(meetingRoomList)\n\t{\n\t\tif (Type.isArray(meetingRoomList))\n\t\t{\n\t\t\tLocation.meetingRoomList = meetingRoomList;\n\t\t}\n\t}\n\t\n\tstatic getMeetingRoomList()\n\t{\n\t\treturn Location.meetingRoomList;\n\t}\n\t\n\tstatic setLocationAccessibility(accessibility)\n\t{\n\t\tLocation.accessibility = accessibility;\n\t}\n\t\n\tstatic getLocationAccessibility()\n\t{\n\t\treturn Location.accessibility;\n\t}\n\t\n\tstatic setCurrentCapacity(capacity)\n\t{\n\t\tLocation.currentRoomCapacity = capacity;\n\t}\n\n\tstatic getCurrentCapacity()\n\t{\n\t\treturn Location.currentRoomCapacity || 0;\n\t}\n\t\n\tdisplayInlineEditControls()\n\t{\n\t\tthis.DOM.inlineEditLinkWrap.style.display = 'none';\n\t\tthis.DOM.inputWrap.style.display = '';\n\t\tthis.addLocationRemoveButton();\n\t}\n\n\tsetDefaultRoom(locationList)\n\t{\n\t\tif (this.roomsManager && !RoomsManager.isEmpty(locationList))\n\t\t{\n\t\t\tthis.activeRooms = this.roomsManager.getRoomsInfo().active;\n\t\t\tif (!RoomsManager.isEmpty(this.activeRooms))\n\t\t\t{\n\t\t\t\tconst activeRoomId = this.activeRooms[0];\n\t\t\t\tfor (const locationListElement of locationList)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(locationListElement.ID) === activeRoomId)\n\t\t\t\t\t{\n\t\t\t\t\t\tLocation.setCurrentCapacity(parseInt(locationListElement.CAPACITY));\n\t\t\t\t\t\treturn 'calendar_' + activeRoomId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(parseInt(locationList[0].CAPACITY));\n\t\t\t\treturn 'calendar_' + locationList[0].ID;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetRoomsInterface()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.rooms';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.Rooms.RoomsInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.Rooms.RoomsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.Rooms.RoomsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetRoomsManager()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.roomsmanager';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.RoomsManager)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.RoomsManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.RoomsManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetRoomsManagerData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.getRoomsManagerData')\n\t\t\t\t.then((response) => {\n\n\t\t\t\t\t\tthis.roomsManagerFromDB = new RoomsManager(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tsections: response.data.sections,\n\t\t\t\t\t\t\t\trooms: response.data.rooms\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlocationAccess: response.data.config.locationAccess,\n\t\t\t\t\t\t\t\thiddenSections: response.data.config.hiddenSections,\n\t\t\t\t\t\t\t\ttype: response.data.config.type,\n\t\t\t\t\t\t\t\townerId: response.data.config.ownerId,\n\t\t\t\t\t\t\t\tuserId: response.data.config.userId,\n\t\t\t\t\t\t\t\tnew_section_access: response.data.config.defaultSectionAccess,\n\t\t\t\t\t\t\t\tsectionAccessTasks: response.data.config.sectionAccessTasks,\n\t\t\t\t\t\t\t\tshowTasks: response.data.config.showTasks,\n\t\t\t\t\t\t\t\tlocationContext: this //for updating list of locations in event creation menu\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconsole.error('Extension not found');\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcreateRoomList(locationList)\n\t{\n\t\treturn locationList.map((location) => {\n\t\t\treturn new RoomsSection(location);\n\t\t});\n\t}\n\n\tsetRoomsManager()\n\t{\n\t\tif (!this.roomsManagerFromDB)\n\t\t{\n\t\t\tthis.getRoomsManager()\n\t\t\t\t.then(\n\t\t\t\t\tthis.getRoomsManagerData()\n\t\t\t\t);\n\t\t}\n\t}\n\n\tgetCategoryManager()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tconst extensionName = 'calendar.categorymanager';\n\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t.then(() =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (bx.Calendar.CategoryManager)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.CategoryManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error('Extension ' + extensionName + ' not found');\n\t\t\t\t\t\t\tresolve(bx.Calendar.CategoryManager);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tgetCategoryManagerData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.locationajax.getCategoryManagerData')\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.categoryManagerFromDB = new CategoryManager(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcategories: response.data.categories,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tperm: response.data.permissions,\n\t\t\t\t\t\t\t\tlocationContext: this //for updating list of locations in event creation menu\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t// Failure\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconsole.error('Extension not found');\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tsetCategoryManager()\n\t{\n\t\tif(!this.categoryManagerFromDB)\n\t\t{\n\t\t\tthis.getCategoryManager()\n\t\t\t\t.then(\n\t\t\t\t\tthis.getCategoryManagerData()\n\t\t\t\t);\n\t\t}\n\t}\n\n\tprohibitClick()\n\t{\n\t\tif(this.DOM.inlineEditLinkWrap && !Dom.hasClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly');\n\t\t}\n\t\tif(this.DOM.removeLocationButton && !Dom.hasClass(this.DOM.removeLocationButton, 'calendar-location-readonly'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.removeLocationButton, 'calendar-location-readonly');\n\t\t}\n\t}\n\n\tallowClick()\n\t{\n\t\tif(this.DOM.inlineEditLinkWrap && Dom.hasClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.inlineEditLinkWrap, 'calendar-location-readonly');\n\t\t}\n\t\tif(this.DOM.removeLocationButton && Dom.hasClass(this.DOM.removeLocationButton, 'calendar-location-readonly'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.removeLocationButton, 'calendar-location-readonly');\n\t\t}\n\t}\n\n\tstatic getDateInFormat(date)\n\t{\n\t\treturn ('0' + date.getDate()).slice(-2) + '.'\n\t\t\t+ ('0' + (date.getMonth() + 1)).slice(-2) + '.'\n\t\t\t+ date.getFullYear()\n\t}\n\t\n\tstatic getDatesRange(from, to)\n\t{\n\t\tlet fromDate = new Date(from);\n\t\tlet toDate = new Date(to);\n\t\tlet startDate = fromDate.setHours(0, 0, 0, 0);\n\t\tlet finishDate = toDate.setHours(0, 0, 0, 0);\n\t\tlet result = [];\n\t\twhile (startDate <= finishDate)\n\t\t{\n\t\t\tresult.push(Location.getDateInFormat(new Date(startDate)));\n\t\t\tstartDate += Location.DAY_LENGTH;\n\t\t}\n\t\t\n\t\treturn result;\n\t}\n}","import {Type, Dom} from 'main.core';\nimport {Util} from 'calendar.util';\n\nexport class UserSelector\n{\n\tconstructor(params = {})\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'user_selector_' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrapNode\n\t\t};\n\t\tthis.destinationInputName = params.inputName || 'EVENT_DESTINATION';\n\n\t\tif (Type.isArray(this.params.itemsSelected) && this.params.itemsSelected.length)\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(this.params.itemsSelected);\n\t\t}\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tlet id = this.id;\n\t\tthis.DOM.socnetDestinationWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'event-grid-dest-wrap'},\n\t\t\tevents: {\n\t\t\t\tclick : (e) => {\n\t\t\t\t\tBX.SocNetLogDestination.openDialog(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationItems = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: ''},\n\t\t\tevents: {\n\t\t\t\tclick : function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.SocNetLogDestination.deleteItem(targ.getAttribute('data-item-id'), targ.getAttribute('data-item-type'), id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouseover: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.addClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t},\n\t\t\t\tmouseout: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.removeClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationInputWrap = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {props: {className: 'feed-add-destination-input-box'}}));\n\t\tthis.socnetDestinationInput = this.socnetDestinationInputWrap.appendChild(\n\t\t\tDom.create('INPUT', {\n\t\t\t\tprops: {id: id + '-inp', className: 'feed-add-destination-inp'},\n\t\t\t\tattrs: {value: '', type: 'text'},\n\t\t\t\tevents: {\n\t\t\t\t\tkeydown : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tkeyup : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tthis.socnetDestinationLink = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\thtml: this.params.addLinkMessage || BX.message('EC_DESTINATION_ADD_USERS'),\n\t\t\tprops: {id: id + '-link', className: 'feed-add-destination-link'},\n\t\t\tevents: {\n\t\t\t\tkeydown : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tkeyup : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// if (this.params.itemsSelected && !this.checkItemsSelected(\n\t\t// \tthis.params.items,\n\t\t// \tthis.params.itemsLast,\n\t\t// \tthis.params.itemsSelected,\n\t\t// \tBX.proxy(this.init, this)\n\t\t// ))\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tif (!this.socnetDestinationInput || !this.DOM.socnetDestinationWrap || !this.params.items)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.params.selectGroups === false)\n\t\t{\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t\tthis.params.items.sonetgroups = {};\n\t\t}\n\n\t\tif(this.params.selectUsers === false)\n\t\t{\n\t\t\tthis.params.items.users = {};\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t}\n\n\t\tBX.SocNetLogDestination.init({\n\t\t\tname : this.id,\n\t\t\tsearchInput : this.socnetDestinationInput,\n\t\t\textranetUser :  false,\n\t\t\tuserSearchArea: 'I',\n\t\t\tbindMainPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tbindSearchPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tcallback : {\n\t\t\t\tselect : this.selectCallback.bind(this),\n\t\t\t\tunSelect : this.unSelectCallback.bind(this),\n\t\t\t\topenDialog : this.openDialogCallback.bind(this),\n\t\t\t\tcloseDialog : this.closeDialogCallback.bind(this),\n\t\t\t\topenSearch : this.openDialogCallback.bind(this),\n\t\t\t\tcloseSearch : ()=>{this.closeDialogCallback(true);}\n\t\t\t},\n\t\t\titems : this.params.items,\n\t\t\titemsLast : this.params.itemsLast,\n\t\t\titemsSelected : this.params.itemsSelected,\n\t\t\tdepartmentSelectDisable: this.params.selectGroups === false\n\t\t});\n\t}\n\n\tcloseAll()\n\t{\n\t\tif (top.BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\ttop.BX.SocNetLogDestination.closeDialog();\n\t\t}\n\t\ttop.BX.SocNetLogDestination.closeSearch();\n\t}\n\n\tselectCallback(item, type)\n\t{\n\t\tvar\n\t\t\ttype1 = type,\n\t\t\tprefix = 'S';\n\n\t\tif (type === 'sonetgroups')\n\t\t{\n\t\t\tprefix = 'SG';\n\t\t}\n\t\telse if (type === 'groups')\n\t\t{\n\t\t\tprefix = 'UA';\n\t\t\ttype1 = 'all-users';\n\t\t}\n\t\telse if (type === 'users')\n\t\t{\n\t\t\tprefix = 'U';\n\t\t}\n\t\telse if (type === 'department')\n\t\t{\n\t\t\tprefix = 'DR';\n\t\t}\n\n\t\tthis.socnetDestinationItems.appendChild(\n\t\t\tDom.create(\"span\", { attrs : {'data-id' : item.id }, props : {className : \"event-grid-dest event-grid-dest-\" + type1 }, children: [\n\t\t\t\t\tDom.create(\"input\", { attrs : {type : 'hidden', name : this.destinationInputName + '[' + prefix + '][]', value : item.id }}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"event-grid-dest-text\" }, html : item.name}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"feed-event-del-but\"}, attrs: {'data-item-id': item.id, 'data-item-type': type}})\n\t\t\t\t]})\n\t\t);\n\n\t\tBX.onCustomEvent('OnDestinationAddNewItem', [item]);\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\tunSelectCallback(item, type, search)\n\t{\n\t\tvar elements = BX.findChildren(this.socnetDestinationItems, {attribute: {'data-id': item.id}}, true);\n\t\tif (elements != null)\n\t\t{\n\t\t\tfor (var j = 0; j < elements.length; j++)\n\t\t\t{\n\t\t\t\tBX.remove(elements[j]);\n\t\t\t}\n\t\t}\n\n\t\tBX.onCustomEvent('OnDestinationUnselect');\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\topenDialogCallback()\n\t{\n\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'inline-block');\n\t\tBX.style(this.socnetDestinationLink, 'display', 'none');\n\t\tBX.focus(this.socnetDestinationInput);\n\t}\n\n\tcloseDialogCallback(cleanInputValue)\n\t{\n\t\tif (!top.BX.SocNetLogDestination.isOpenSearch() && this.socnetDestinationInput.value.length <= 0)\n\t\t{\n\t\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'none');\n\t\t\tBX.style(this.socnetDestinationLink, 'display', 'inline-block');\n\t\t\tif (cleanInputValue === true)\n\t\t\t\tthis.socnetDestinationInput.value = '';\n\n\t\t\t// Disable backspace\n\t\t\tif (top.BX.SocNetLogDestination.backspaceDisable || top.BX.SocNetLogDestination.backspaceDisable != null)\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\n\t\t\tBX.bind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable = function(e)\n\t\t\t{\n\t\t\t\tif (e.keyCode === 8)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\t\t\t\ttop.BX.SocNetLogDestination.backspaceDisable = null;\n\t\t\t}, 5000);\n\t\t}\n\t}\n\n\tgetCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tcodes = [], i;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tcodes.push(inputsList[i].value);\n\t\t}\n\t\treturn codes;\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tvalues = [],\n\t\t\ti, code;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tvalues.push(inputsList[i].value);\n\t\t}\n\n\t\treturn this.convertAttendeesCodes(values);\n\t}\n\n\tconvertAttendeesCodes(values)\n\t{\n\t\tlet attendeesCodes = {};\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tvalues.forEach(function(code)\n\t\t\t{\n\t\t\t\tif (code.substr(0, 2) === 'DR')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"department\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'UA')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"groups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'SG')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"sonetgroups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 1) === 'U')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"users\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn attendeesCodes;\n\t}\n\n\tgetAttendeesCodesList(codes)\n\t{\n\t\tlet result = [];\n\t\tif (!codes)\n\t\t\tcodes = this.getAttendeesCodes();\n\t\tfor (let i in codes)\n\t\t{\n\t\t\tif (codes.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.socnetDestinationItems)\n\t\t{\n\t\t\tDom.clean(this.socnetDestinationItems);\n\t\t}\n\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(value);\n\t\t}\n\t\tthis.init();\n\t}\n}","import { Tag, Loc, Dom, Event, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { MenuManager } from 'main.popup';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nexport class ColorSelector extends EventEmitter\n{\n\tLINE_MODE = 'line';\n\tSELECTOR_MODE = 'selector';\n\tVIEW_MODE = 'view';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ColorSelector');\n\t\tthis.id = params.id || 'color-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.defaultColors = Util.getDefaultColorList();\n\t\tthis.colors = [];\n\t\tthis.zIndex = 3100;\n\t\tthis.mode = params.mode || this.LINE_MODE;\n\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap\n\t\t};\n\t\tthis.create();\n\n\t\tthis.setViewMode(params.viewMode || false);\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tfor (let i = 0; i < this.defaultColors.length; i++)\n\t\t\t{\n\t\t\t\tthis.colors.push(\n\t\t\t\t\t{\n\t\t\t\t\t\tcolor: this.defaultColors[i],\n\t\t\t\t\t\tnode: this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item' },\n\t\t\t\t\t\t\t\tattrs: { 'data-bx-calendar-color': this.defaultColors[i] },\n\t\t\t\t\t\t\t\tstyle: { backgroundColor: this.defaultColors[i] },\n\t\t\t\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t\t\t\t}))\n\t\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.DOM.customColorNode = this.DOM.wrap.appendChild(Dom.create('LI',\n\t\t\t\t{\n\t\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item' },\n\t\t\t\t\tstyle:\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\t\t\twidth: 0\n\t\t\t\t\t\t},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}\n\t\t\t));\n\n\t\t\tthis.DOM.customColorLink = this.DOM.wrap.appendChild(Dom.create('LI', {\n\t\t\t\tprops: { className: 'calendar-field-colorpicker-color-item-more' },\n\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color-item-more-link\">' + Loc.getMessage('EC_COLOR') + '</span>',\n\t\t\t\tevents: {\n\t\t\t\t\tclick: () => {\n\t\t\t\t\t\tif (!this.colorPickerPopup)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.colorPickerPopup = new BX.ColorPicker({\n\t\t\t\t\t\t\t\tbindElement: this.DOM.customColorLink,\n\t\t\t\t\t\t\t\tonColorSelected: this.setValue.bind(this),\n\t\t\t\t\t\t\t\tpopupOptions: { zIndex: this.zIndex }\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.colorPickerPopup.open();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.handleColorClick.bind(this));\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE)\n\t\t{\n\t\t\tthis.DOM.colorIcon = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<div style=\"background-color: #000;\" class=\"calendar-field-select-icon\"></div>\n\t\t\t`);\n\t\t\tEvent.bind(this.DOM.wrap, 'click', this.openPopup.bind(this));\n\t\t}\n\t\telse if (this.mode === this.VIEW_MODE)\n\t\t{\n\t\t\tthis.DOM.colorIcon = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t<div style=\"background-color: #000;\" class=\"calendar-field-select-icon\"></div>\n\t\t\t`);\n\t\t}\n\t}\n\n\thandleColorClick(e)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet target = Util.findTargetNode(e.target || e.srcElement, this.DOM.wrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tlet value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tthis.setValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(color, emitChanges = true)\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.activeColor = color;\n\n\t\tif (this.mode === this.LINE_MODE)\n\t\t{\n\t\t\tif (this.DOM.activeColorNode)\n\t\t\t{\n\t\t\t\tBX.removeClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tif (!BX.util.in_array(this.activeColor, this.defaultColors) && this.activeColor)\n\t\t\t{\n\t\t\t\tthis.DOM.customColorNode.style.backgroundColor = this.activeColor;\n\t\t\t\tthis.DOM.customColorNode.style.width = '';\n\n\t\t\t\tthis.DOM.activeColorNode = this.DOM.customColorNode;\n\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t}\n\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < this.colors.length; i++)\n\t\t\t{\n\t\t\t\tif (this.colors[i].color === this.activeColor)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.activeColorNode = this.colors[i].node;\n\t\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (this.mode === this.SELECTOR_MODE || this.mode === this.VIEW_MODE)\n\t\t{\n\t\t\tif (this.DOM.colorIcon)\n\t\t\t{\n\t\t\t\tthis.DOM.colorIcon.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t\tif (this.viewMode)\n\t\t\t{\n\t\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t\t}\n\t\t}\n\n\t\tif (emitChanges)\n\t\t{\n\t\t\tthis.emit('onChange', new BaseEvent({ data: { value: this.activeColor } }));\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.activeColor;\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.popup && this.popup.popupWindow && this.popup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.popup.close();\n\t\t}\n\n\t\tlet\n\t\t\ti, menuItems = [], icon;\n\n\t\tthis.defaultColors.forEach((color) => {\n\t\t\tmenuItems.push({\n\t\t\t\t\ttext: color,\n\t\t\t\t\tcolor: color,\n\t\t\t\t\tclassName: 'calendar-add-popup-color-menu-item',\n\t\t\t\t\tonclick: ((color) => {\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\tthis.setValue(color);\n\t\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t\t};\n\t\t\t\t\t})(color)\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\tthis.popup = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.colorIcon,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tclassName: 'calendar-color-popup-wrap',\n\t\t\t\twidth: 162,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 52,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.popup.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.popup.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.popup.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\ticon = this.popup.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (Type.isDomNode(icon))\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.popup.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.popup.popupWindow.angle.element.style.left = '6px';\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.clean(this.DOM.wrap);\n\t\t\tthis.DOM.wrap.className = 'calendar-field-select-icon';\n\t\t\tthis.DOM.wrap.style.backgroundColor = this.activeColor;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t//Dom.removeClass(this.DOM.wrap, 'calendar-colorpicker-readonly');\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Text, Loc} from \"main.core\";\nimport \"ui.icons.b24\";\nimport {MenuManager, MenuItem} from \"main.popup\";\n\nexport class SectionSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'section-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.sectionList = params.sectionList;\n\t\tthis.sectionGroupList = params.sectionGroupList;\n\t\tthis.selectCallback = params.selectCallback;\n\t\tthis.openPopupCallback = params.openPopupCallback;\n\t\tthis.closePopupCallback = params.closePopupCallback;\n\t\tthis.getCurrentSection = params.getCurrentSection;\n\n\t\tthis.defaultCalendarType = params.defaultCalendarType;\n\t\tthis.defaultOwnerId = parseInt(params.defaultOwnerId) || 0;\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.mode = params.mode; // full|compact|textselect\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap\n\t\t};\n\n\t\tthis.create();\n\t\tthis.initEventHandlers();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap;\n\t\t\tthis.DOM.selectImageWrap = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-img\"></span>`);\n\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-name\">${Text.encode(Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle())}</span>`);\n\t\t}\n\t\telse if(this.mode === 'location')\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap;\n\t\t\tthis.DOM.selectImageWrap = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-img\"></span>`);\n\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Tag.render`<span class=\"calendar-field-choice-calendar-name calendar-field-choice-calendar-name-location\">${Text.encode(Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle())}</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field calendar-field-select' + (this.mode === 'compact' ? ' calendar-field-tiny' : '')}\n\t\t\t}));\n\n\t\t\tthis.DOM.innerValue = this.DOM.select.appendChild(Dom.create('DIV', {\n\t\t\t\tprops: {className: 'calendar-field-select-icon'},\n\t\t\t\tstyle: {backgroundColor : this.getCurrentColor()}\n\t\t\t}));\n\n\t\t\tif (this.mode === 'full')\n\t\t\t{\n\t\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Dom.create('SPAN', {text: this.getCurrentTitle()}));\n\t\t\t}\n\t\t}\n\t}\n\n\tinitEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.select, 'click', BX.delegate(this.openPopup, this));\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.viewMode)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.sectionMenu && this.sectionMenu.popupWindow && this.sectionMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.sectionMenu.close();\n\t\t}\n\n\t\tconst menuItems = [];\n\t\tconst sectionIdList = [];\n\t\tconst sectionList = this.getSectionList();\n\t\tlet i;\n\n\t\tif (Type.isArray(this.sectionGroupList))\n\t\t{\n\t\t\tthis.sectionGroupList.forEach((sectionGroup) => {\n\t\t\t\tlet filteredList;\n\t\t\t\tif (sectionGroup.belongsToView)\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === this.defaultCalendarType\n\t\t\t\t\t\t\t&& SectionSelector.getSectionOwner(section) === this.defaultOwnerId;\n\t\t\t\t\t}, this);\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'user' || sectionGroup.type === 'location')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'user'\n\t\t\t\t\t\t\t&& SectionSelector.getSectionOwner(section) === sectionGroup.ownerId;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'company')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'company_calendar'\n\t\t\t\t\t\t\t|| SectionSelector.getSectionType(section) === 'calendar_company'\n\t\t\t\t\t\t\t|| SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfilteredList = sectionList.filter((section) => {\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tfilteredList = filteredList.filter((section) => {\n\t\t\t\t\tconst id = parseInt(section.id || section.ID);\n\t\t\t\t\tif (sectionIdList.includes(id))\n\t\t\t\t\t\treturn false;\n\t\t\t\t\tsectionIdList.push(id);\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\n\t\t\t\tif (filteredList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push(\n\t\t\t\t\t\tnew MenuItem({\n\t\t\t\t\t\ttext: sectionGroup.title,\n\t\t\t\t\t\tdelimiter: true\n\t\t\t\t\t}));\n\n\t\t\t\t\tfor (let i = 0; i < filteredList.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItems.push(this.getMenuItem(filteredList[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (i = 0; i < sectionList.length; i++)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.getMenuItem(sectionList[i]));\n\t\t\t}\n\t\t}\n\n\t\tlet offsetLeft = 0;\n\t\tif (this.mode === 'compact')\n\t\t{\n\t\t\toffsetLeft = 40;\n\t\t}\n\t\telse if(this.mode === 'textselect' || this.mode === 'location')\n\t\t{\n\t\t\toffsetLeft = 0;\n\t\t}\n\n\t\tthis.sectionMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.select,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: offsetLeft,\n\t\t\t\tangle: this.mode === 'compact'\n\t\t\t}\n\t\t);\n\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflow = \"auto\";\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.maxHeight = \"400px\";\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.sectionMenu.popupWindow.setWidth(this.DOM.select.offsetWidth - 2);\n\t\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflowX = \"hidden\";\n\t\t}\n\n\t\tthis.sectionMenu.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.sectionMenu.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.sectionMenu.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\tlet icon = this.sectionMenu.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.sectionMenu.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addClass(this.DOM.select, 'active');\n\n\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t{\n\t\t\tthis.openPopupCallback(this);\n\t\t}\n\n\t\tBX.addCustomEvent(this.sectionMenu.popupWindow, 'onPopupClose', BX.delegate(function()\n\t\t{\n\t\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t\t{\n\t\t\t\tthis.closePopupCallback();\n\t\t\t}\n\t\t\tBX.removeClass(this.DOM.select, 'active');\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.sectionMenu = null;\n\t\t}, this));\n\t}\n\n\tgetCurrentColor()\n\t{\n\t\treturn (this.getCurrentSection() || {}).color || false;\n\t}\n\n\tgetCurrentTitle()\n\t{\n\t\treturn (this.getCurrentSection() || {}).name || '';\n\t}\n\n\tgetSectionList()\n\t{\n\t\treturn this.sectionList.filter((section) => {\n\t\t\treturn (section.PERM && section.PERM.edit) || (Type.isFunction(section.canDo) && section.canDo('edit'));\n\t\t});\n\t}\n\n\tupdateSectionImageNode(section)\n\t{\n\t\tif (!Type.isElementNode(this.DOM.selectImageWrap))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (section === undefined)\n\t\t{\n\t\t\tsection = this.sectionList.find((section) => {\n\t\t\t\treturn parseInt(section.id) === parseInt(this.getCurrentSection().id);\n\t\t\t});\n\t\t}\n\n\t\tif (section && section.type)\n\t\t{\n\t\t\tconst imageSrc = SectionSelector.getSectionImage(section);\n\t\t\tlet imageNode;\n\t\t\tif (imageSrc)\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<img class=\"calendar-field-choice-calendar-img-value\" src=\"${imageSrc}\">`;\n\t\t\t}\n\t\t\telse if(section.type === 'group')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user-group\"><i></i></div>`;\n\t\t\t}\n\t\t\telse if(section.type === 'user')\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-user\"><i></i></div>`;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\timageNode = Tag.render`<div class=\"ui-icon ui-icon-common-bitrix24\"><i></i></div>`;\n\t\t\t}\n\n\t\t\tDom.clean(this.DOM.selectImageWrap);\n\t\t\tthis.DOM.selectImageWrap.appendChild(imageNode);\n\t\t}\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.sectionMenu;\n\t}\n\n\tgetMenuItem(sectionItem)\n\t{\n\t\tlet _this = this;\n\t\treturn {\n\t\t\thtml: BX.util.htmlspecialchars(sectionItem.name || sectionItem.NAME),\n\t\t\tcolor: sectionItem.color || sectionItem.COLOR,\n\t\t\tclassName: 'calendar-add-popup-section-menu-item' + (this.mode === 'full' ? ' section-menu-item-full' : ''),\n\t\t\tonclick: (function (section)\n\t\t\t{\n\t\t\t\treturn () => {\n\t\t\t\t\tif (Type.isDomNode(_this.DOM.innerValue))\n\t\t\t\t\t{\n\t\t\t\t\t\t_this.DOM.innerValue.style.backgroundColor = section.color || sectionItem.COLOR;\n\t\t\t\t\t}\n\n\t\t\t\t\t_this.updateSectionImageNode(section);\n\t\t\t\t\tif (Type.isFunction(_this.selectCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!section.color && sectionItem.COLOR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.color = sectionItem.COLOR;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!section.id && sectionItem.ID)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsection.id = sectionItem.ID;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t_this.selectCallback(section);\n\t\t\t\t\t}\n\t\t\t\t\t_this.sectionMenu.close();\n\t\t\t\t\t_this.updateValue();\n\t\t\t\t}\n\t\t\t})(sectionItem)\n\t\t}\n\t}\n\n\tstatic getSectionType(section)\n\t{\n\t\treturn section.type || section.CAL_TYPE;\n\t}\n\n\tstatic getSectionImage(section = {})\n\t{\n\t\treturn section.data ? section.data.IMAGE : (section.IMAGE || '');\n\t}\n\n\tstatic getSectionOwner(section)\n\t{\n\t\treturn parseInt(section.OWNER_ID || section.data.OWNER_ID)\n\t}\n\n\tupdateValue()\n\t{\n\t\tif (Type.isDomNode(this.DOM.innerValue))\n\t\t{\n\t\t\tthis.DOM.innerValue.style.backgroundColor = this.getCurrentColor();\n\t\t}\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\ttext: this.getCurrentTitle(),\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: this.getCurrentTitle()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse if (this.mode === 'textselect')\n\t\t{\n\t\t\tthis.updateSectionImageNode();\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle()\n\t\t\t\t},\n\t\t\t\ttext: Loc.getMessage('EC_CALENDAR_SECTION_TITLE') + ' ' + this.getCurrentTitle(),\n\t\t\t}));\n\t\t}\n\t\telse if(this.mode === 'location')\n\t\t{\n\t\t\tthis.updateSectionImageNode();\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {\n\t\t\t\tprops: {\n\t\t\t\t\ttitle: Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle()\n\t\t\t\t},\n\t\t\t\ttext: Loc.getMessage('EC_CALENDAR_LOCATION_TITLE') + ' ' + this.getCurrentTitle(),\n\t\t\t}));\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t\tif (this.DOM.outerWrap !== this.DOM.select)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.select, 'calendar-field-select');\n\t\t\t\tDom.addClass(this.DOM.select, 'calendar-section-selector-readonly');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-section-selector-readonly');\n\t\t}\n\t}\n}\n","import { Util } from 'calendar.util';\nimport { DateTimeControl } from \"calendar.controls\";\n\nexport class RepeatSelector\n{\n\tconstructor(params)\n\t{\n\t\tlet formElements =  params.rruleType.form.elements;\n\n\t\tthis.getDate = params.getDate;\n\t\tthis.previousDate = null;\n\t\tthis.DOM = {\n\t\t\tformElements: formElements,\n\t\t\twrap: params.wrap,\n\t\t\trruleType: params.rruleType,\n\t\t\tinterval: formElements['EVENT_RRULE[INTERVAL]'],\n\t\t\trruleEndsOn: {\n\t\t\t\tnever: formElements['rrule_endson'][0],\n\t\t\t\tcount: formElements['rrule_endson'][1],\n\t\t\t\tuntil: formElements['rrule_endson'][2],\n\t\t\t},\n\t\t\tcount: formElements['EVENT_RRULE[COUNT]'],\n\t\t\tuntil: formElements['EVENT_RRULE[UNTIL]'],\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tBX.bind(this.DOM.rruleType, 'change', () => {\n\t\t\tthis.changeType(this.DOM.rruleType.value);\n\t\t});\n\n\t\tBX.bind(this.DOM.until, 'click', (e) => {\n\t\t\tDateTimeControl.showInputCalendar(e);\n\t\t\tthis.DOM.rruleEndsOn.until.checked = true;\n\t\t});\n\n\t\tBX.bind(this.DOM.count, 'click', () => {\n\t\t\tthis.DOM.rruleEndsOn.count.checked = true;\n\t\t});\n\t}\n\n\tchangeType(type)\n\t{\n\t\tthis.DOM.rruleType.value = type ? type.toUpperCase() : 'NONE';\n\t\tlet rruleType = this.DOM.rruleType.value.toLowerCase();\n\t\tthis.DOM.wrap.className = 'calendar-rrule-type-' + rruleType;\n\n\t\tif (rruleType === 'weekly' && BX.type.isFunction(this.getDate))\n\t\t{\n\t\t\tlet fromDate = this.getDate();\n\t\t\tif (BX.type.isDate(fromDate))\n\t\t\t{\n\t\t\t\tlet day = Util.getWeekDayByInd(fromDate.getDay());\n\t\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t\t{\n\t\t\t\t\tif (input.checked && this.previousDay === input.value && this.previousDay !== day)\n\t\t\t\t\t{\n\t\t\t\t\t\tinput.checked = false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tinput.checked = input.checked || input.value === day;\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t\t\n\t\t\t\tthis.previousDay = day;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(rrule = {})\n\t{\n\t\tthis.changeType(rrule.FREQ);\n\t\tthis.DOM.interval.value = rrule.INTERVAL || 1;\n\t\tif (rrule.COUNT)\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = 'checked';\n\t\t\tthis.DOM.count.value = rrule.COUNT;\n\t\t}\n\t\telse if(rrule['~UNTIL'])\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.until.checked = 'checked';\n\t\t\tthis.DOM.until.value = rrule['~UNTIL'];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.never.checked = 'checked';\n\t\t}\n\n\t\tif (BX.type.isPlainObject(rrule.BYDAY))\n\t\t{\n\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t{\n\t\t\t\tinput.checked = rrule.BYDAY.hasOwnProperty(input.value);\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.DOM.rruleType.value.toLowerCase();\n\t}\n}","import { Loc } from 'main.core';\nexport class SelectInput\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'bx-select-input-' + Math.round(Math.random() * 1000000);\n\t\tthis.values = params.values || false;\n\t\tthis.input = params.input;\n\n\t\tthis.defaultValue = params.defaultValue || '';\n\t\tthis.openTitle = params.openTitle || '';\n\t\tthis.className = params.className || '';\n\n\t\tthis.onChangeCallback = params.onChangeCallback || null;\n\t\tthis.zIndex = params.zIndex || 1200;\n\t\tthis.disabled = params.disabled;\n\n\t\tthis.setValue({\n\t\t\tvalue: params.value,\n\t\t\tvalueIndex: params.valueIndex\n\t\t});\n\n\t\tthis.curInd = false;\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.bind(this.input, 'change', this.onChangeCallback);\n\t\t\t// BX.bind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tif (this.values)\n\t\t{\n\t\t\tBX.bind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\t\tBX.bind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\t\tBX.bind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\t\tBX.bind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\t\t}\n\t}\n\n\tsetValue(params)\n\t{\n\t\tthis.currentValue = {value: params.value};\n\t\tthis.currentValueIndex = params.valueIndex;\n\t\tif (this.currentValueIndex !== undefined && this.values[this.currentValueIndex])\n\t\t{\n\t\t\tthis.input.value = this.values[this.currentValueIndex].label;\n\t\t}\n\t}\n\n\tsetValueList(valueList)\n\t{\n\t\tthis.values = valueList;\n\t}\n\n\tgetInputValue()\n\t{\n\t\treturn this.input.value;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.shown || this.disabled)\n\t\t\treturn;\n\n\t\tlet\n\t\t\tind = 0,\n\t\t\tj = 0,\n\t\t\tmenuItems = [],\n\t\t\ti, _this = this;\n\n\t\tfor (i = 0; i < this.values.length; i++)\n\t\t{\n\t\t\tif (this.values[i].delimiter)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.values[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.currentValue && this.values[i]\n\t\t\t\t\t&& i > 0\n\t\t\t\t\t&& this.currentValue.value >= this.values[i-1].value\n\t\t\t\t\t&& this.currentValue.value <= this.values[i].value)\n\t\t\t\t{\n\t\t\t\t\tind = j;\n\t\t\t\t}\n\n\t\t\t\tlet htmlTemp;\n\t\t\t\tif (this.values[i].reserved)\n\t\t\t\t{\n\t\t\t\t\thtmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title-with-status\">\n\t\t\t\t\t\t\t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"calendar-menu-item-status --red\">\n\t\t\t\t\t\t\t${Loc.getMessage('EC_LOCATION_RESERVED')}\n\t\t\t\t\t\t</span>`\n\t\t\t\t}\n\t\t\t\telse if (this.values[i].capacity)\n\t\t\t\t{\n\t\t\t\t\t htmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title-with-status\">\n\t\t\t\t\t    \t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t     \t</span>\n\t\t\t\t     \t<span class=\"calendar-menu-item-capacity\">\n\t\t\t\t\t    \t${BX.util.htmlspecialchars(this.values[i].labelCapacity)}\n\t\t\t\t    \t</span>`\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thtmlTemp = `\n\t\t\t\t\t\t<span class=\"calendar-menu-item-title\">\n\t\t\t\t\t\t\t${BX.util.htmlspecialchars(this.values[i].label)}\n\t\t\t\t\t\t</span>`\n\t\t\t\t}\n\n\t\t\t\tif(this.values[i].color)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\t\ttitle: this.values[i].label,\n\t\t\t\t\t\tclassName: \"menu-popup-display-flex calendar-location-popup-menu-item\",\n\t\t\t\t\t\thtml: htmlTemp,\n\t\t\t\t\t\tcolor: this.values[i].color,\n\t\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function () {\n\t\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t\t_this.onChange();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst hint = this.values[i].hint ? ' ' + this.values[i].hint :  '';\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\t\thtml: this.values[i].label + hint,\n\t\t\t\t\t\ttitle: this.values[i].label,\n\t\t\t\t\t\tclassName: \"menu-popup-no-icon\" + (this.values[i].selected ? ' calendar-menu-popup-time-selected' : ''),\n\t\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t\t_this.onChange(value);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\n\t\tthis.popupMenu = BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.input,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: -1\n\t\t\t}\n\t\t);\n\n\t\tif (!BX.browser.IsFirefox())\n\t\t{\n\t\t\tthis.popupMenu.popupWindow.setMinWidth(this.input.offsetWidth + 2);\n\t\t}\n\n\t\tthis.popupMenu.popupWindow.setMaxWidth(300);\n\n\t\tlet menuContainer = this.popupMenu.layout.menuContainer;\n\t\tBX.addClass(this.popupMenu.layout.menuContainer, 'calendar-select-popup');\n\t\tthis.popupMenu.show();\n\n\t\tlet menuItem = this.popupMenu.menuItems[ind];\n\n\t\tif (menuItem && menuItem.layout)\n\t\t{\n\t\t\tmenuContainer.scrollTop = menuItem.layout.item.offsetTop - menuItem.layout.item.offsetHeight - 36 * 3;\n\t\t}\n\n\t\tlet popupMenuItems = this.popupMenu.menuItems;\n\n\t\tfor (i = 0; i < popupMenuItems.length; i++)\n\t\t{\n\t\t\tif (popupMenuItems[i].layout.item)\n\t\t\t{\n\t\t\t\tlet icon = popupMenuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = popupMenuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addCustomEvent(this.popupMenu.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.shown = false;\n\t\t\tthis.popupMenu = null;\n\t\t}.bind(this));\n\n\t\tthis.input.select();\n\n\t\tthis.shown = true;\n\t}\n\n\tclosePopup()\n\t{\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n\n\tonFocus()\n\t{\n\t\tsetTimeout(function(){\n\t\t\tif (!this.shown)\n\t\t\t{\n\t\t\t\tthis.showPopup();\n\t\t\t}\n\t\t}.bind(this), 200);\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.shown)\n\t\t{\n\t\t\tthis.closePopup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showPopup();\n\t\t}\n\t}\n\n\tonBlur()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 200);\n\t}\n\n\tonKeyup()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 50);\n\t}\n\n\tonChange(value)\n\t{\n\t\tvar inputValue = this.input.value;\n\t\tBX.onCustomEvent(this, 'onSelectInputChanged', [this, inputValue]);\n\t\tif (BX.type.isFunction(this.onChangeCallback))\n\t\t{\n\t\t\tthis.onChangeCallback({value: inputValue, dataValue: value});\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.unbind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.unbind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tBX.unbind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\tBX.unbind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\tBX.unbind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\tBX.unbind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\n\t\tif (this.popupMenu)\n\t\t{\n\t\t\tthis.popupMenu.close();\n\t\t}\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n}\n\n\n\n","export class PopupDialog {\n\tconstructor(params = {})\n\t{\n\t\tthis.id = params.id || 'popup-dialog-' + Math.random();\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.DOM = {};\n\t\tthis.title = '';\n\t}\n\n\tcreate()\n\t{\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: this.getTitle(),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: this.getButtons(),\n\t\t\tcontent: this.getContent(),\n\t\t\tevents: {}\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\tthis.buttons = [];\n\t\treturn this.buttons;\n\t}\n\n\tshow(params)\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager} from 'main.popup';\n\nexport class ViewSelector extends EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\n\t\tif (params.currentViewMode)\n\t\t{\n\t\t\tthis.setViewMode(params.currentViewMode);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-selector\"></div>`;\n\t\tthis.DOM.selectorText = Tag.render`<div class=\"calendar-view-switcher-text\"></div>`;\n\t\tthis.DOM.selectorTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-inner\"></div>`);\n\t\tthis.DOM.wrap.appendChild(this.DOM.selectorText);\n\t\tthis.DOM.wrap.appendChild(Tag.render`<div class=\"calendar-view-switcher-dropdown\"></div>`);\n\t\tEvent.bind(this.DOM.wrap, 'click', this.showPopup.bind(this));\n\t\tthis.DOM.viewModeTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-mode-inner\" style=\"display: none;\"></div>`);\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tDom.adjust(this.DOM.selectorTextInner, {text: this.currentValue.text});\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\tif (this.currentViewMode)\n\t\t\t{\n\t\t\t\tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t}\n\t\t\tthis.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach(function(view)\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\t//text: view.text,\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = MenuManager.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.selectorText,\n\t\t\tthis.getMenuItems(),\n\t\t\t{\n\t\t\t\tclassName: \"calendar-view-switcher-popup\",\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: -3,\n\t\t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\t}\n\n\tclosePopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}\n\n\n\n","import {Type, Dom, Event, Tag, Loc} from 'main.core';\n//import {ViewSelector} from './viewselector';\nimport {EventEmitter} from 'main.core.events';\n\nexport class LineViewSelector extends  EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.LineViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.viewsMap = new WeakMap();\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-list\"></div>`;\n\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tthis.viewsMap.set(view, {\n\t\t\t\t\twrap: this.DOM.wrap.appendChild(Tag.render`<span \n\t\t\t\t\t\tclass=\"calendar-view-switcher-list-item\"\n\t\t\t\t\t\tonclick=\"${()=>{\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\"\n\t\t\t\t\t>${view.text}</span>`)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tlet viewData = this.viewsMap.get(this.currentValue);\n\t\t\tlet currentActiveWrap = this.DOM.wrap.querySelector('.calendar-view-switcher-list-item-active');\n\t\t\tif (Type.isDomNode(currentActiveWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(currentActiveWrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(viewData.wrap))\n\t\t\t{\n\t\t\t\tDom.addClass(viewData.wrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\t// if (this.currentViewMode)\n\t\t\t// {\n\t\t\t// \tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t// }\n\t\t\t//this.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\thtml: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\thtml: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\t// showPopup()\n\t// {\n\t// \tthis.closePopup();\n\t//\n\t// \tthis.menuPopup = MenuManager.create(\n\t// \t\tthis.popupId,\n\t// \t\tthis.DOM.selectorText,\n\t// \t\tthis.getMenuItems(),\n\t// \t\t{\n\t// \t\t\tclassName: \"calendar-view-switcher-popup\",\n\t// \t\t\tcloseByEsc : true,\n\t// \t\t\tautoHide : true,\n\t// \t\t\tzIndex: this.zIndex,\n\t// \t\t\toffsetTop: -3,\n\t// \t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t// \t\t\tangle: true,\n\t// \t\t\tcacheable: false\n\t// \t\t}\n\t// \t);\n\t//\n\t// \tthis.menuPopup.show();\n\t// }\n\t//\n\t// closePopup()\n\t// {\n\t// \tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t// \t{\n\t// \t\treturn this.menuPopup.close();\n\t// \t}\n\t// }\n}\n\n\n\n","import {Dom, Loc, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class AddButton extends EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.AddButton');\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'add-button-' + Math.round(Math.random() * 10000);\n\t\tthis.showTasks = params.showTasks;\n\n\t\tthis.addEntryHandler = Type.isFunction(params.addEntry) ? params.addEntry : null;\n\t\tthis.addTaskHandler = Type.isFunction(params.addTask) ? params.addTask : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.menuItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_ADD_EVENT'),\n\t\t\t\tonclick: this.addEntry.bind(this)\n\t\t\t}\n\t\t];\n\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.menuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ADD_TASK'),\n\t\t\t\tonclick: this.addTask.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tif (this.menuItems.length > 1)\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-split ui-btn-success\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create(\"button\", {\n\t\t\t\t\t\tprops: {className: \"ui-btn-main\", type: \"button\"},\n\t\t\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.DOM.addButtonExtra = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-extra\"},\n\t\t\t\tevents: {click: this.showPopup.bind(this)}\n\t\t\t});\n\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButtonExtra)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"button\", {\n\t\t\t\tprops: {className: \"ui-btn ui-btn-success\", type: \"button\"},\n\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t});\n\t\t}\n\t\tthis.DOM.wrap.setAttribute('data-role', 'addButton');\n\t}\n\n\tgetWrap()\n\t{\n\t\treturn this.DOM.wrap;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = BX.PopupMenu.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.addButtonExtra,\n\t\t\tthis.menuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\n\t\tBX.addCustomEvent(this.menuPopup.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.popupId);\n\t\t\tthis.menuPopup = null;\n\t\t\tthis.addBtnMenu = null;\n\t\t}.bind(this));\n\t}\n\n\taddEntry()\n\t{\n\t\tif (this.addEntryHandler)\n\t\t{\n\t\t\tthis.addEntryHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n\n\taddTask()\n\t{\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.addTaskHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}","import {Dom, Event, Loc, Type} from 'main.core';\nimport {Util} from 'calendar.util';\n\nexport class MeetingStatusControl extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.MeetingStatusControl');\n\t\tthis.BX = Util.getBX();\n\n\t\tif (params.wrap && Type.isDomNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error(\"The argument \\\"params.wrap\\\" must be a DOM node.\");\n\t\t}\n\t\tthis.id = params.id || 'meeting-status-control-' + Math.round(Math.random() * 10000);\n\t\tthis.zIndex = 3100;\n\n\t\tthis.create();\n\n\t\tthis.status = params.currentStatus || null;\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.updateStatus();\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.acceptBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y'),\n\t\t\tclassName: 'ui-btn ui-btn-primary',\n\t\t\tevents: {click: this.accept.bind(this)}\n\t\t});\n\t\tthis.acceptBtn.renderTo(this.DOM.wrap);\n\n\t\tthis.declineBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_N'),\n\t\t\tclassName: 'ui-btn ui-btn-light-border',\n\t\t\tevents: {click: this.decline.bind(this)}\n\t\t});\n\t\tthis.declineBtn.renderTo(this.DOM.wrap);\n\t}\n\n\tupdateStatus()\n\t{\n\t\tif (this.status === 'H')\n\t\t{\n\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\tthis.declineBtn.setText(Loc.getMessage('EC_VIEW_DESIDE_BUT_OWNER_N'));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.status === 'Y')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = 'none';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t\telse if (this.status === 'N')\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = 'none';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.acceptBtn.getContainer().style.display = '';\n\t\t\t\tthis.declineBtn.getContainer().style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\taccept()\n\t{\n\t\tthis.setStatus('Y');\n\t}\n\n\tdecline()\n\t{\n\t\tthis.setStatus('N');\n\t}\n\n\tsetStatus(value, emitEvent = true)\n\t{\n\t\tthis.status = value;\n\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\n\t\tif (emitEvent)\n\t\t{\n\t\t\tthis.emit('onSetStatus', new Event.BaseEvent({data: {status: value}}));\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport { EntryManager } from 'calendar.entry';\nimport { EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmStatusDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_DECLINE_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_ONLY_THIS'),\n\t\t\tevents: {\n\t\t\t\tclick : () => {\n\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : () => {\n\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_DECLINE_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : () => {\n\t\t\t\t\t\tthis.onDeclineHandler();\n\t\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\tonDeclineHandler()\n\t{\n\t\tthis.close();\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (compactForm\n\t\t\t&& compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.close();\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmEditDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmEditDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-edit-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EDIT_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : ()=>{\n\t\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","'use strict';\nimport {PopupDialog} from './popupdialog';\n\nexport class ConfirmDeleteDialog extends PopupDialog\n{\n\tconstructor(params = {})\n\t{\n\t\tsuper(params);\n\t\tthis.title = BX.message('EC_DEL_REC_EVENT');\n\t\tthis.entry = params.entry;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteThis();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteNext();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: BX.message('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function() {\n\t\t\t\t\t\tthis.entry.deleteAll();\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn [\n\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\ttext: BX.message('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t})\n\t\t];\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {TimeSelector} from \"./timeselector\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class DateTimeControl extends EventEmitter\n{\n\tDATE_INPUT_WIDTH = 110;\n\tTIME_INPUT_WIDTH = 90;\n\tzIndex = 4200;\n\n\tfrom = null;\n\tto = null;\n\n\tconstructor(uid, options = {showTimezone: true})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.DateTimeControl');\n\n\t\tthis.showTimezone = options.showTimezone;\n\t\tthis.inlineEditMode = !!options.inlineEditMode;\n\t\tthis.currentInlineEditMode = options.currentInlineEditMode || 'view';\n\n\t\tthis.UID = uid || 'date-time-' + Math.round(Math.random() * 100000);\n\n\t\tthis.DOM = {\n\t\t\touterWrap: options.outerWrap || null,\n\t\t\touterContent: options.outerContent || null\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t{\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\n\t\t\tthis.DOM.leftInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-left\"></div>`);\n\n\t\t\tthis.DOM.fromDate = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromDateText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.fromTime = this.DOM.leftInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px; max-width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.fromTimeText = this.DOM.leftInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.betweenSpacer = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-between\" />`);\n\n\t\t\tthis.DOM.rightInnerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-right\"></div>`);\n\n\t\t\tthis.DOM.toTime = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-time\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.TIME_INPUT_WIDTH}px; max-width: ${this.TIME_INPUT_WIDTH}px;\"/>\n\t\t\t`);\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toTimeText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-time\"></span>`);\n\t\t\t}\n\n\t\t\tthis.DOM.toDate = this.DOM.rightInnerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: ${this.DATE_INPUT_WIDTH}px;\"/>`);\n\n\t\t\tif (this.inlineEditMode)\n\t\t\t{\n\t\t\t\tthis.DOM.toDateText = this.DOM.rightInnerWrap.appendChild(Tag.render`<span class=\"calendar-field-value calendar-field-value-date\"></span>`);\n\t\t\t}\n\n\t\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.fromTime,\n\t\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t\t});\n\n\t\t\tthis.toTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.toTime,\n\t\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t\t});\n\n\t\t\tlet fullDayWrap = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-event-full-day\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.fullDay = fullDayWrap.appendChild(Tag.render`\n\t\t\t\t<input value=\"Y\" type=\"checkbox\" id=\"{this.UID}\"/>\n\t\t\t`);\n\t\t\tfullDayWrap.appendChild(Tag.render`<label for=\"{this.UID}\">${Loc.getMessage('EC_ALL_DAY')}</label>`);\n\t\t}\n\n\t\t//this.DOM.defTimezoneWrap = BX(this.UID + '_timezone_default_wrap');\n\t\t//this.DOM.defTimezone = BX(this.UID + '_timezone_default');\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\t// this.DOM.fromTz = BX(this.UID + '_timezone_from');\n\t\t\t// this.DOM.toTz = BX(this.UID + '_timezone_to');\n\t\t\t// this.DOM.tzButton = BX(this.UID + '_timezone_btn');\n\t\t\t// this.DOM.tzOuterCont = BX(this.UID + '_timezone_wrap');\n\t\t\t// this.DOM.tzCont = BX(this.UID + '_timezone_inner_wrap');\n\t\t\t// BX(this.UID + '_timezone_hint').title = BX.message('EC_EVENT_TZ_HINT');\n\t\t\t// BX(this.UID + '_timezone_default_hint').title = BX.message('EC_EVENT_TZ_DEF_HINT');\n\t\t}\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tsetValue(value = {})\n\t{\n\t\tthis.DOM.fromDate.value = Util.formatDate(value.from);\n\t\tthis.DOM.toDate.value = Util.formatDate(value.to);\n\n\t\tthis.DOM.fromTime.value = Util.formatTime(value.from);\n\t\tthis.DOM.toTime.value = Util.formatTime(value.to);\n\n\t\tconst parsedFromTime = Util.parseTime(this.DOM.fromTime.value);\n\t\tconst parsedToTime = Util.parseTime(this.DOM.toTime.value);\n\t\tthis.fromMinutes = parsedFromTime.h * 60 + parsedFromTime.m;\n\t\tthis.toMinutes = parsedToTime.h * 60 + parsedToTime.m;\n\n\t\tthis.updateTimePeriod();\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.DOM.fromDateText.innerHTML = Util.formatDateUsable(value.from, true, true);\n\t\t\tthis.DOM.toDateText.innerHTML = Util.formatDateUsable(value.to, true, true);\n\n\t\t\t// Hide right part if it's the same date\n\t\t\tthis.DOM.toDateText.style.display = this.DOM.fromDate.value === this.DOM.toDate.value ? 'none' : '';\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tif (this.DOM.fromDate.value === this.DOM.toDate.value)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTimeText.innerHTML = Loc.getMessage('EC_ALL_DAY');\n\t\t\t\t\tthis.DOM.toTimeText.style.display = '';\n\t\t\t\t\tthis.DOM.fromTimeText.style.display = 'none';\n\t\t\t\t\tthis.DOM.fromTimeText.innerHTML = '';\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.betweenSpacer.style.display = '';\n\t\t\t\t\tthis.DOM.fromTimeText.style.display = 'none';\n\t\t\t\t\tthis.DOM.toTimeText.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.fromTimeText.innerHTML = this.DOM.fromTime.value;\n\t\t\t\tthis.DOM.toTimeText.innerHTML = this.DOM.toTime.value;\n\t\t\t\tthis.DOM.betweenSpacer.style.display = '';\n\t\t\t\tthis.DOM.fromTimeText.style.display = '';\n\t\t\t\tthis.DOM.toTimeText.style.display = '';\n\t\t\t}\n\t\t}\n\n\t\tif (value.fullDay !== undefined)\n\t\t{\n\t\t\tthis.DOM.fullDay.checked = value.fullDay;\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tvalue.timezoneFrom = value.timezoneFrom || value.timezoneName;\n\t\t\tvalue.timezoneTo = value.timezoneTo || value.timezoneName;\n\n\t\t\tif (value.timezoneFrom !== undefined && Type.isDomNode(this.DOM.fromTz))\n\t\t\t{\n\t\t\t\tthis.DOM.fromTz.value = value.timezoneFrom;\n\t\t\t}\n\t\t\tif(value.timezoneTo !== undefined && Type.isDomNode(this.DOM.toTz))\n\t\t\t{\n\t\t\t\tthis.DOM.toTz.value = value.timezoneTo;\n\t\t\t}\n\n\t\t\tif (value.timezoneName !== undefined\n\t\t\t\t&& (value.timezoneName !== value.timezoneFrom\n\t\t\t\t\t|| value.timezoneName !== value.timezoneTo))\n\t\t\t{\n\t\t\t\tthis.switchTimezone(true);\n\t\t\t}\n\t\t}\n\t\tthis.value = value;\n\n\t\tthis.handleFullDayChange();\n\t}\n\n\tupdateTimePeriod()\n\t{\n\t\tthis.from = this.getFrom();\n\t\tthis.to = this.getTo();\n\t\tthis.fromTimeControl.highlightValue(this.from);\n\t\tthis.toTimeControl.highlightValue(this.to);\n\t\tthis.updateToTimeDurationHints();\n\t}\n\n\tgetFrom()\n\t{\n\t\treturn this.getDateWithTime(this.DOM.fromDate.value, this.fromMinutes);\n\t}\n\n\tgetTo()\n\t{\n\t\treturn this.getDateWithTime(this.DOM.toDate.value, this.toMinutes);\n\t}\n\n\tgetDateWithTime(date, minutes)\n\t{\n\t\tconst parsedDate = Util.parseDate(date);\n\t\tif (!parsedDate)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn new Date(parsedDate.getTime() + minutes * 60 * 1000);\n\t}\n\n\tgetValue()\n\t{\n\t\tlet value = {\n\t\t\tfullDay: this.DOM.fullDay.checked,\n\t\t\tfromDate: this.DOM.fromDate.value,\n\t\t\ttoDate: this.DOM.toDate.value,\n\t\t\tfromTime: this.DOM.fromTime.value,\n\t\t\ttoTime: this.DOM.toTime.value,\n\t\t\ttimezoneFrom: this.DOM.fromTz ? this.DOM.fromTz.value : (this.value.timezoneFrom || this.value.timezoneName || null),\n\t\t\ttimezoneTo: this.DOM.toTz ? this.DOM.toTz.value : (this.value.timezoneTo || this.value.timezoneName || null)\n\t\t};\n\n\t\tvalue.from = Util.parseDate(value.fromDate);\n\t\tif (Type.isDate(value.from))\n\t\t{\n\t\t\tvalue.to = Util.parseDate(value.toDate);\n\t\t\tif (!Type.isDate(value.to))\n\t\t\t{\n\t\t\t\tvalue.to = value.from;\n\t\t\t}\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tvalue.from.setHours(0, 0, 0);\n\t\t\t\tvalue.to.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tfromTime = Util.parseTime(value.fromTime),\n\t\t\t\t\ttoTime = Util.parseTime(value.toTime) || fromTime;\n\n\t\t\t\tif (fromTime && toTime)\n\t\t\t\t{\n\t\t\t\t\tvalue.from.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t\tvalue.to.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.fromDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.fromDate, 'change', this.handleDateFromChange.bind(this));\n\n\t\tEvent.bind(this.DOM.toDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.toDate, 'change', this.handleDateToChange.bind(this));\n\n\t\tEvent.bind(this.DOM.fullDay, 'click', () => {\n\t\t\tthis.handleFullDayChange();\n\t\t\tthis.handleValueChange();\n\t\t});\n\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tEvent.bind(this.DOM.outerWrap, 'click', this.changeInlineEditMode.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.defTimezone))\n\t\t{\n\t\t\tEvent.bind(this.DOM.defTimezone, 'change', BX.delegate(function()\n\t\t\t{\n\t\t\t\t//this.calendar.util.setUserOption('timezoneName', this.DOM.defTimezone.value);\n\t\t\t\tif (this.bindFromToDefaultTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.fromTz.value = this.DOM.toTz.value = this.DOM.defTimezone.value;\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.tzButton))\n\t\t\t{\n\t\t\t\tEvent.bind(this.DOM.tzButton, 'click', this.switchTimezone.bind(this));\n\t\t\t}\n\n\t\t\tEvent.bind(this.DOM.fromTz, 'change', function()\n\t\t\t{\n\t\t\t\tif (this.bindTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTz.value = this.DOM.fromTz.value;\n\t\t\t\t}\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tEvent.bind(this.DOM.toTz, 'change', function()\n\t\t\t{\n\t\t\t\tthis.bindTimezones = false;\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tthis.bindTimezones = this.DOM.fromTz.value === this.DOM.toTz.value;\n\t\t\tthis.bindFromToDefaultTimezones = this.bindTimezones\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.toTz.value\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.defTimezone.value;\n\t\t}\n\t}\n\n\tstatic showInputCalendar(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tif (Type.isDomNode(target) && target.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tconst calendarControl = BX.calendar.get();\n\t\t\tif (calendarControl.popup)\n\t\t\t{\n\t\t\t\t// Workaround hack for BX.calendar - it works as singleton and we trying to reinit it\n\t\t\t\tcalendarControl.popup.destroy();\n\t\t\t\tcalendarControl.popup = null;\n\t\t\t\tcalendarControl._current_layer = null;\n\t\t\t\tcalendarControl._layers = {};\n\t\t\t}\n\t\t\tif (calendarControl.popup_month)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_month.destroy();\n\t\t\t\tcalendarControl.popup_month = null;\n\t\t\t}\n\t\t\tif (calendarControl.popup_year)\n\t\t\t{\n\t\t\t\tcalendarControl.popup_year.destroy();\n\t\t\t\tcalendarControl.popup_year = null;\n\t\t\t}\n\t\t\tcalendarControl.Show({node: target.parentNode, field: target, bTime: false});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tconst calendarPopup = calendarControl.popup;\n\t\t\tif (calendarPopup)\n\t\t\t{\n\t\t\t\tBX.removeCustomEvent(calendarPopup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(calendarPopup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler()\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\thandleDateFromChange()\n\t{\n\t\tif (!this.getFrom())\n\t\t{\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(this.from.getTime());\n\t\t\treturn;\n\t\t}\n\t\tthis.DOM.fromDate.value = Util.formatDate(this.getFrom());\n\n\t\tconst difference = this.getFrom().getTime() - this.from.getTime();\n\t\tconst yearDuration = 1000 * 60 * 60 * 24 * 365;\n\t\tif (Math.abs(difference) > yearDuration)\n\t\t{\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(this.from.getTime());\n\t\t\treturn;\n\t\t}\n\n\t\tthis.DOM.toDate.value = Util.formatDate(this.to.getTime() + difference);\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleDateToChange()\n\t{\n\t\tif (!this.getTo())\n\t\t{\n\t\t\tthis.DOM.toDate.value = Util.formatDate(this.to.getTime());\n\t\t\treturn;\n\t\t}\n\t\tthis.DOM.toDate.value = Util.formatDate(this.getTo());\n\n\t\tconst difference = Math.abs(this.to.getTime() - this.getTo().getTime());\n\t\tconst yearDuration = 1000 * 60 * 60 * 24 * 365;\n\t\tif (difference > yearDuration)\n\t\t{\n\t\t\tthis.DOM.toDate.value = Util.formatDate(this.to.getTime());\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.getTo() < this.getFrom())\n\t\t{\n\t\t\tthis.DOM.toDate.value = this.DOM.fromDate.value;\n\t\t\tthis.DOM.toTime.value = this.DOM.fromTime.value;\n\t\t\tthis.toMinutes = this.getMinutesFromFormattedTime(this.DOM.toTime.value);\n\t\t}\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeFromChange(inputValue, dataValue)\n\t{\n\t\tif (this.isIncorrectTimeValue(inputValue))\n\t\t{\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(this.from);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.fromMinutes = dataValue ?? this.getMinutesFromFormattedTime(inputValue);\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(this.getFrom());\n\t\t}\n\n\t\tif (this.getTo())\n\t\t{\n\t\t\tconst difference = this.getFrom().getTime() - this.from.getTime();\n\t\t\tthis.toMinutes = this.toMinutes + difference / (60 * 1000);\n\t\t}\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeToChange(inputValue, dataValue)\n\t{\n\t\tif (this.isIncorrectTimeValue(inputValue))\n\t\t{\n\t\t\tthis.DOM.toTime.value = Util.formatTime(this.to);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.toMinutes = dataValue ?? this.getMinutesFromFormattedTime(inputValue);\n\t\t\tthis.DOM.toTime.value = Util.formatTime(this.getTo());\n\t\t}\n\n\t\tif (this.getTo() < this.getFrom())\n\t\t{\n\t\t\tconst difference = this.getTo().getTime() - this.to.getTime();\n\t\t\tthis.fromMinutes = this.fromMinutes + difference / (60 * 1000);\n\t\t\tconst newFromDate = new Date(this.from.getTime() + difference);\n\t\t\tthis.DOM.fromTime.value = Util.formatTime(newFromDate);\n\t\t\tthis.DOM.fromDate.value = Util.formatDate(newFromDate);\n\t\t}\n\n\t\tthis.handleValueChange();\n\t}\n\n\tisIncorrectTimeValue(timeValue)\n\t{\n\t\tif (BX.isAmPmMode())\n\t\t{\n\t\t\treturn timeValue === '';\n\t\t}\n\t\treturn timeValue === '' || (timeValue[0] !== '0' && Util.parseTime(timeValue).h === 0);\n\t}\n\n\thandleFullDayChange()\n\t{\n\t\tlet fullDay = this.getFullDayValue();\n\n\t\tif (fullDay)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.dateTimeWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-options-item-datetime-hide-time');\n\t\t\t}\n\t\t}\n\t}\n\n\thandleValueChange()\n\t{\n\t\tthis.setValue({ from: this.getFrom(), to: this.getTo() });\n\t\tthis.emit('onChange', new BaseEvent({data: {value: this.getValue()}}));\n\t}\n\n\tupdateToTimeDurationHints()\n\t{\n\t\tthis.toTimeControl.updateDurationHints(\n\t\t\tthis.DOM.fromTime.value,\n\t\t\tthis.DOM.toTime.value,\n\t\t\tthis.DOM.fromDate.value,\n\t\t\tthis.DOM.toDate.value\n\t\t);\n\t}\n\n\tgetFullDayValue()\n\t{\n\t\treturn !!this.DOM.fullDay.checked;\n\t}\n\n\tgetMinutesFromFormattedTime(time)\n\t{\n\t\tconst parsedTime = Util.parseTime(time);\n\t\treturn parsedTime.h * 60 + parsedTime.m;\n\t}\n\n\tswitchTimezone(showTimezone)\n\t{\n\t\tif (!Type.isBoolean(showTimezone))\n\t\t{\n\t\t\tshowTimezone = BX.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\n\t\tif (showTimezone)\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tchangeInlineEditMode()\n\t{\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tthis.setInlineEditMode('edit');\n\t\t}\n\t}\n\n\tsetViewMode(viewMode)\n\t{\n\t\tthis.viewMode = viewMode;\n\t\tif (this.viewMode && this.currentInlineEditMode === 'edit')\n\t\t{\n\t\t\tthis.setInlineEditMode('view');\n\t\t}\n\t}\n\n\tsetInlineEditMode(currentInlineEditMode)\n\t{\n\t\tif (this.inlineEditMode)\n\t\t{\n\t\t\tthis.currentInlineEditMode = currentInlineEditMode;\n\t\t\tif (this.currentInlineEditMode === 'edit')\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-edit');\n\t\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-datetime-inline-mode-view');\n\t\t\t}\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class BusyUsersDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'busy-user-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.plural = params.users.length > 1;\n\n\t\tlet i, userNames = [];\n\t\tfor (i = 0; i < params.users.length; i++)\n\t\t{\n\t\t\tuserNames.push(params.users[i].DISPLAY_NAME);\n\t\t}\n\t\tuserNames = userNames.join(', ');\n\n\t\tlet content = BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-busy-users-content-wrap'},\n\t\t\thtml: '<div class=\"calendar-busy-users-content\">'\n\t\t\t\t+ BX.util.htmlspecialchars(this.plural ?\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_PLURAL').replace('#USER_LIST#', userNames)\n\t\t\t\t\t:\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_SINGLE').replace('#USER_NAME#', params.users[0].DISPLAY_NAME))\n\t\t\t\t+ '</div>'\n\t\t});\n\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_BUSY_USERS_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\t// buttons: [\n\t\t\t// \tnew BX.PopupWindowButtonLink({\n\t\t\t// \t\ttext: Loc.getMessage('EC_BUSY_USERS_CLOSE'),\n\t\t\t// \t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t// \t\tevents: {click : () => {\n\t\t\t// \t\t\t// if (this.calendar.editSlider)\n\t\t\t// \t\t\t// \tthis.calendar.editSlider.close();\n\t\t\t//\n\t\t\t// \t\t\tthis.close();\n\t\t\t// \t\t}\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// ],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_BUSY_USERS_BACK2EDIT'),\n\t\t\tevents: {click : () => {this.close();}}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: this.plural ? Loc.getMessage('EC_BUSY_USERS_EXCLUDE_PLURAL') : Loc.getMessage('EC_BUSY_USERS_EXCLUDE_SINGLE'),\n\t\t\tevents: {click : () => {\n\t\t\t\tthis.emit('onSaveWithout');\n\t\t\t\tthis.close();\n\t\t\t}}\n\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Runtime, Tag, Loc, Text} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {Popup, MenuManager} from 'main.popup';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\nimport { ControlButton } from 'intranet.control-button';\nimport {AttendeesList, Location} from \"calendar.controls\";\n\nexport class UserPlannerSelector extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tstatic MAX_USER_COUNT = 8; // 8\n\tstatic MAX_USER_COUNT_DISPLAY = 10; // 10\n\tstatic PLANNER_WIDTH = 500;\n\tzIndex = 4200;\n\treadOnlyMode = true;\n\tmeetingNotifyValue = true;\n\tuserSelectorDialog = null;\n\tattendeesEntityList = [];\n\tinlineEditMode = UserPlannerSelector.VIEW_MODE;\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\tREFRESH_PLANNER_DELAY = 500;\n\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.UserPlannerSelector');\n\t\tthis.selectorId = params.id || 'user-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.BX = Util.getBX();\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap,\n\t\t\twrap: params.wrap,\n\t\t\tinformWrap: params.informWrap,\n\t\t\tinformWrapText: params.informWrap.querySelector('.calendar-field-container-inform-text'),\n\t\t\tmoreLink: params.outerWrap.querySelector('.calendar-members-more'),\n\t\t\tchangeLink: params.outerWrap.querySelector('.calendar-members-change-link'),\n\t\t\tattendeesLabel: params.outerWrap.querySelector('.calendar-attendees-label'),\n\t\t\tattendeesList: params.outerWrap.querySelector('.calendar-attendees-list'),\n\t\t\tuserSelectorWrap: params.outerWrap.querySelector('.calendar-user-selector-wrap'),\n\t\t\tplannerOuterWrap: params.plannerOuterWrap,\n\t\t\tvideocallWrap: params.outerWrap.querySelector('.calendar-videocall-wrap'),\n\t\t\thideGuestsWrap: params.hideGuestsWrap,\n\t\t\thideGuestsIcon: params.hideGuestsWrap.querySelector('.calendar-hide-members-icon-hidden')\n\t\t};\n\t\tthis.refreshPlannerStateDebounce = Runtime.debounce(this.refreshPlannerState, this.REFRESH_PLANNER_DELAY, this);\n\n\t\tif (Type.isBoolean(params.readOnlyMode))\n\t\t{\n\t\t\tthis.readOnlyMode = params.readOnlyMode;\n\t\t}\n\n\t\tthis.userId = params.userId;\n\t\tthis.type = params.type;\n\t\tthis.ownerId = params.ownerId;\n\t\tthis.zIndex = params.zIndex || this.zIndex;\n\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\n\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (this.DOM.changeLink && !this.isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.DOM.changeLink, 'click', () => {\n\t\t\t\tif (!this.userSelectorDialog)\n\t\t\t\t{\n\t\t\t\t\tthis.userSelectorDialog = new EntitySelectorDialog({\n\t\t\t\t\t\ttargetNode: this.DOM.changeLink,\n\t\t\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\t\t\tpreselectedItems: this.attendeesPreselectedItems,\n\t\t\t\t\t\tenableSearch: true,\n\t\t\t\t\t\tzIndex: this.zIndex + 10,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\t\t\t\t\temailUsers: true,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'project'\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\t\t\toptions: { 'all-users': true }\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tsearchTabOptions: {\n\t\t\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.userSelectorDialog.show();\n\t\t\t});\n\t\t}\n\n\t\tif (this.DOM.moreLink)\n\t\t{\n\t\t\tEvent.bind(this.DOM.moreLink, 'click', this.showMoreAttendeesPopup.bind(this));\n\t\t}\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\twidth: UserPlannerSelector.PLANNER_WIDTH,\n\t\t\tshowEntryName: false,\n\t\t\tlocked: !this.plannerFeatureEnabled,\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat\n\n\t\t});\n\n\t\tEvent.bind(this.DOM.informWrap, 'click', () => {\n\t\t\tthis.setInformValue(!this.meetingNotifyValue);\n\t\t\tthis.emit('onNotifyChange');\n\t\t});\n\n\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\n\t\tthis.planner.subscribe('onDateChange', (event) => {this.emit('onDateChange', event);});\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\n\t\tif (this.DOM.hideGuestsWrap && !this.isReadOnly())\n\t\t{\n\t\t\tEvent.bind(this.DOM.hideGuestsWrap, 'click', ()=>{\n\t\t\t\tthis.setHideGuestsValue(!this.hideGuests);\n\t\t\t});\n\t\t}\n\t}\n\n\tsetValue({attendeesEntityList, attendees, location, notify, hideGuests, viewMode, entry})\n\t{\n\t\tthis.attendeesEntityList = Type.isArray(attendeesEntityList) ? attendeesEntityList : [];\n\t\tthis.attendeesPreselectedItems = this.attendeesEntityList.map((item) => {return [item.entityId, item.id]});\n\n\t\tthis.entry = entry;\n\t\tthis.entryId = this.entry.id;\n\t\tif (this.attendeesEntityList.length > 1 && !viewMode)\n\t\t{\n\t\t\tthis.showPlanner();\n\t\t}\n\n\t\tthis.setEntityList(this.attendeesEntityList);\n\t\tthis.setInformValue(notify);\n\t\tthis.setLocationValue(location);\n\n\t\tif (Type.isArray(attendees))\n\t\t{\n\t\t\tthis.displayAttendees(attendees);\n\t\t}\n\t\tthis.refreshPlannerStateDebounce();\n\n\t\tif (\n\t\t\tBX?.Intranet?.ControlButton\n\t\t\t&& this.DOM.videocallWrap\n\t\t\t&& this.entryId\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tDom.clean(this.DOM.videocallWrap);\n\t\t\tDom.removeClass(this.DOM.videocallWrap, 'calendar-videocall-hidden');\n\n\t\t\tthis.intranetControllButton = new ControlButton({\n\t\t\t\tcontainer: this.DOM.videocallWrap,\n\t\t\t\tentityType: 'calendar_event',\n\t\t\t\tentityId: this.entry.parentId,\n\t\t\t\tmainItem: 'chat',\n\t\t\t\tentityData: {\n\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from),\n\t\t\t\t\tparentId: this.entry.parentId\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tformType: 'compact'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// For testing purposes\n\t\t\tif (Type.isElementNode(this.intranetControllButton.button))\n\t\t\t{\n\t\t\t\tthis.intranetControllButton.button.setAttribute('data-role', 'videocallButton');\n\t\t\t}\n\t\t}\n\t\telse if(this.DOM.videocallWrap)\n\t\t{\n\t\t\tDom.addClass(this.DOM.videocallWrap, 'calendar-videocall-hidden');\n\t\t}\n\n\t\tthis.setHideGuestsValue(hideGuests);\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tthis.showPlanner();\n\t\tconst dateTime = this.getDateTime();\n\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\n\t\tthis.setEntityList(this.userSelectorDialog.getSelectedItems().map((item) => {\n\t\t\treturn {\n\t\t\t\tentityId: item.entityId,\n\t\t\t\tid: item.id,\n\t\t\t\tentityType: item.entityType,\n\t\t\t}}));\n\n\t\tthis.refreshPlannerStateDebounce();\n\t\tthis.emit('onUserCodesChange');\n\t}\n\n\tgetEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetEntityList(selectorEntityList)\n\t{\n\t\tif (this.type === 'user' && this.userId !== this.ownerId)\n\t\t{\n\t\t\tselectorEntityList.push({entityId: 'user', id: this.ownerId});\n\t\t}\n\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\tisReadOnly()\n\t{\n\t\treturn this.readOnlyMode;\n\t}\n\n\tgetUserSelector()\n\t{\n\t\treturn BX.UI.SelectorManager.instances[this.selectorId];\n\t}\n\n\tshowPlanner()\n\t{\n\t\tif (!this.isPlannerDisplayed())\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'user-selector-edit-mode');\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\t\t}\n\t}\n\n\tcheckBusyTime()\n\t{\n\t\tconst dateTime = this.getDateTime();\n\t\tconst entityList = this.getEntityList();\n\n\t\tthis.runPlannerDataRequest({\n\t\t\tentityList: entityList,\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.getLocationValue(),\n\t\t\tentryId: this.entryId\n\t\t})\n\t\t\t.then((response) =>\n\t\t\t{\n\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t{\n\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t{\n\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.accessibility[this.ownerId]))\n\t\t\t\t{\n\t\t\t\t\tconst from = this.getDateTime().from;\n\t\t\t\t\tconst to = this.getDateTime().to;\n\t\t\t\t\tconst preparedData = this.preparedDataAccessibility(response.data.accessibility[this.ownerId]);\n\n\t\t\t\t\tif (!this.planner.currentFromDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.planner.currentFromDate = from;\n\t\t\t\t\t}\n\t\t\t\t\tif (!this.planner.currentToDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.planner.currentToDate = to;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst item = this.planner.checkTimePeriod(from, to, preparedData);\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isObject(item)\n\t\t\t\t\t\t&& Type.isArray(response.data.entries)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showPlanner();\n\t\t\t\t\t\tthis.planner.update(response.data.entries, response.data.accessibility);\n\t\t\t\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\tthis.displayAttendees(this.prepareAttendeesForDisplay(response.data.entries));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t}\n\n\tprepareAttendeesForDisplay(attendees)\n\t{\n\t\treturn (attendees)\n\t\t\t.filter((item) =>\n\t\t\t{\n\t\t\t\treturn item.type === 'user';\n\t\t\t})\n\t\t\t.map((item) =>\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tID: item.id,\n\t\t\t\t\tAVATAR: item.avatar,\n\t\t\t\t\tDISPLAY_NAME: item.name,\n\t\t\t\t\tEMAIL_USER: item.emailUser,\n\t\t\t\t\tSTATUS: (item.status || '').toUpperCase(),\n\t\t\t\t\tURL: item.url\n\t\t\t\t};\n\t\t\t});\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tif (this.planner && this.planner.isShown())\n\t\t{\n\t\t\tlet dateTime = this.getDateTime();\n\t\t\tthis.loadPlannerData({\n\t\t\t\tentityList: this.getEntityList(),\n\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\tlocation: this.getLocationValue(),\n\t\t\t\tentryId: this.entryId,\n\t\t\t\tprevUserList: this.prevUserList\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.displayAttendees(this.prepareAttendeesForDisplay(response.data.entries || []));\n\t\t\t\t});\n\t\t}\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.runPlannerDataRequest(params)\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\tthis.loadedAccessibilityData\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\t\t});\n\t}\n\n\trunPlannerDataRequest(params)\n\t{\n\t\tlet dateTime = this.getDateTime();\n\t\tthis.planner.updateSelector(\n\t\t\tdateTime.from,\n\t\t\tdateTime.to,\n\t\t\tdateTime.fullDay,\n\t\t\t{\n\t\t\t\tfocus: false\n\t\t\t}\n\t\t);\n\t\treturn this.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\tdata: {\n\t\t\t\tentryId: params.entryId || 0,\n\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\townerId: this.ownerId,\n\t\t\t\ttype: this.type,\n\t\t\t\tentityList: params.entityList || [],\n\t\t\t\tdateFrom: Util.formatDate(this.planner.scaleDateFrom),\n\t\t\t\tdateTo: Util.formatDate(this.planner.scaleDateTo),\n\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\tlocation: params.location || '',\n\t\t\t\tentries: params.entrieIds || false,\n\t\t\t\tprevUserList: params.prevUserList || []\n\t\t\t}\n\t\t});\n\t}\n\n\tsetDateTime(dateTime, updatePlaner = false)\n\t{\n\t\tthis.dateTime = dateTime;\n\t\tif (this.planner && updatePlaner)\n\t\t{\n\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t}\n\t\telse if (this.planner)\n\t\t{\n\t\t\tlet fromHours = parseInt(dateTime.from.getHours()) + Math.floor(dateTime.from.getMinutes() / 60);\n\t\t\tlet toHours = parseInt(dateTime.to.getHours()) + Math.floor(dateTime.to.getMinutes() / 60);\n\t\t\tif (\n\t\t\t\t(fromHours !== 0 && fromHours <= this.planner.shownScaleTimeFrom)\n\t\t\t\t|| (toHours !== 0  && toHours !== 23 && toHours + 1 >= this.planner.shownScaleTimeTo)\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.planner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetDateTime()\n\t{\n\t\treturn this.dateTime;\n\t}\n\n\tsetLocationValue(location)\n\t{\n\t\tthis.location = location;\n\t}\n\n\tgetLocationValue()\n\t{\n\t\treturn this.location;\n\t}\n\n\tdisplayAttendees(attendees = [])\n\t{\n\t\tDom.clean(this.DOM.attendeesList);\n\t\tthis.attendeeList = AttendeesList.sortAttendees(attendees);\n\t\tconst usersCount = this.attendeeList.accepted.length\n\t\t\t+ this.attendeeList.requested.length;\n\t\tthis.emit('onDisplayAttendees', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tusersCount: usersCount\n\t\t\t}\n\t\t}));\n\n\t\tlet userLength = this.attendeeList.accepted.length;\n\t\tif (userLength > 0)\n\t\t{\n\t\t\tif (userLength > UserPlannerSelector.MAX_USER_COUNT_DISPLAY)\n\t\t\t{\n\t\t\t\tuserLength = UserPlannerSelector.MAX_USER_COUNT;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < userLength; i++)\n\t\t\t{\n\t\t\t\tthis.attendeeList.accepted[i].shown = true;\n\t\t\t\tthis.DOM.attendeesList.appendChild(UserPlannerSelector.getUserAvatarNode(this.attendeeList.accepted[i]));\n\t\t\t}\n\t\t}\n\n\t\tif (userLength > 1)\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_NUM')).replace('#COUNT#', `<span>(</span>${this.attendeeList.accepted.length}<span>)</span>`);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.attendeesLabel.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_LABEL_ONE'));\n\t\t}\n\n\t\tif (userLength < attendees.length)\n\t\t{\n\t\t\tthis.DOM.moreLink.innerHTML = Text.encode(Loc.getMessage('EC_ATTENDEES_ALL_COUNT').replace('#COUNT#', attendees.length));\n\t\t\tDom.show(this.DOM.moreLink);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.hide(this.DOM.moreLink);\n\t\t}\n\n\t\tif (\n\t\t\tthis.hasExternalEmailUsers(attendees)\n\t\t\t&& this.isPlannerDisplayed()\n\t\t\t&& !this.isReadOnly()\n\t\t)\n\t\t{\n\t\t\tthis.showHideGuestsOption();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hideHideGuestsOption();\n\t\t}\n\t}\n\n\tstatic getUserAvatarNode(user)\n\t{\n\t\tlet\n\t\t\timageNode,\n\t\t\timg = user.AVATAR || user.SMALL_AVATAR;\n\t\tif (!img || img === \"/bitrix/images/1.gif\")\n\t\t{\n\t\t\timageNode = Tag.render`<div title=\"${Text.encode(user.DISPLAY_NAME)}\" class=\"ui-icon ${(user.EMAIL_USER ? 'ui-icon-common-user-mail' : 'ui-icon-common-user')}\"><i></i></div>`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\timageNode = Tag.render`\n\t\t\t<img\n\t\t\t\ttitle=\"${Text.encode(user.DISPLAY_NAME)}\"\n\t\t\t\tclass=\"calendar-member\"\n\t\t\t\tid=\"simple_popup_${parseInt(user.ID)}\"\n\t\t\t\tsrc=\"${img}\"\n\t\t\t>`;\n\t\t}\n\t\treturn imageNode;\n\t}\n\n\tshowMoreAttendeesPopup()\n\t{\n\t\t(new AttendeesList(this.DOM.moreLink, this.attendeeList)).showPopup();\n\t}\n\n\tsetInformValue(value)\n\t{\n\t\tif (Type.isBoolean(value))\n\t\t{\n\t\t\tconst DISABLED_CLASS = 'calendar-field-container-inform-off';\n\t\t\tthis.meetingNotifyValue = value;\n\t\t\tif (this.meetingNotifyValue)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_ON_TITLE');\n\t\t\t\tthis.DOM.informWrapText.innerHTML = Loc.getMessage('EC_NOTIFY_OPTION');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.informWrap, DISABLED_CLASS);\n\t\t\t\tthis.DOM.informWrap.title = Loc.getMessage('EC_NOTIFY_OPTION_OFF_TITLE');\n\t\t\t\tthis.DOM.informWrapText.innerHTML = Loc.getMessage('EC_DONT_NOTIFY_OPTION');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetInformValue(value)\n\t{\n\t\treturn this.meetingNotifyValue;\n\t}\n\n\tsetViewMode(readOnlyMode)\n\t{\n\t\tthis.readOnlyMode = readOnlyMode;\n\t\tif (this.readOnlyMode)\n\t\t{\n\t\t\tDom.addClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-userselector-readonly');\n\t\t}\n\t}\n\n\tisPlannerDisplayed()\n\t{\n\t\treturn this.planner.isShown();\n\t}\n\n\thasExternalEmailUsers(attendees = [])\n\t{\n\t\treturn !!attendees.find((item) => {return item.EMAIL_USER;})\n\t\t\t|| !!this.getEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.userSelectorDialog && this.userSelectorDialog.destroy)\n\t\t{\n\t\t\tthis.userSelectorDialog.destroy();\n\t\t \tthis.userSelectorDialog = null;\n\t\t}\n\n\t\tif (this.intranetControllButton && this.intranetControllButton.destroy)\n\t\t{\n\t\t\tthis.intranetControllButton.destroy();\n\t\t\tthis.intranetControllButton = null;\n\t\t}\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\n\t\tif (Type.isElementNode(this.DOM.hideGuestsIcon))\n\t\t{\n\t\t\tthis.DOM.hideGuestsIcon.className = this.hideGuests ? 'calendar-hide-members-icon-hidden' : 'calendar-hide-members-icon-visible'\n\t\t}\n\n\t\tconst hideGuestsText = this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-text');\n\t\tif (Type.isElementNode(hideGuestsText))\n\t\t{\n\t\t\thideGuestsText.innerHTML = this.hideGuests\n\t\t\t\t? Loc.getMessage('EC_HIDE_GUEST_NAMES')\n\t\t\t\t: Loc.getMessage('EC_SHOW_GUEST_NAMES');\n\t\t}\n\t}\n\n\tpreparedDataAccessibility(calendarEventsAccessibility)\n\t{\n\t\treturn calendarEventsAccessibility.map((item) => {\n\t\t\treturn Planner.prepareAccessibilityItem(item);\n\t\t});\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length && this.prevUserList.length)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => {\n\t\t\t\treturn !userIdList.includes(userId);\n\t\t\t});\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event && event.getData)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tconst dateTime = this.getDateTime();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getEntityList(),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.getLocationValue(),\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tfocusSelector: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\n\nexport class ReinviteUserDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ReinviteUserDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'reinvite-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst content = Dom.create('DIV');\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_REINVITE_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'reinvite-popup-window',\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tnew BX.UI.Button({\n\t\t\ttext : Loc.getMessage('EC_REINVITE_YES'),\n\t\t\tclassName: \"ui-btn ui-btn-primary\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: true}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_REINVITE_NO'),\n\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\tevents : {click : () => {\n\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendInvitesAgain: false}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}}\n\t\t}).renderTo(content);\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Tag, Loc, Dom, Event, Type, Runtime} from 'main.core';\nimport {PopupManager} from 'main.popup';\nimport {EventEmitter} from 'main.core.events';\nexport class EmailSelectorControl extends EventEmitter\n{\n\tDOM = {};\n\tCONFIRM_POPUP_ID = 'add_from_email';\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailSelectorControl');\n\t\tthis.DOM.select = params.selectNode;\n\t\tthis.mailboxList = Type.isArray(params.mailboxList) ? params.mailboxList : [];\n\t\tthis.DOM.componentWrap = this.DOM.select.parentNode.appendChild(Tag.render`<div style=\"display: none;\"></div>`);\n\t\tthis.allowAddNewEmail = params.allowAddNewEmail;\n\t\tthis.checkValueDebounce = Runtime.debounce(this.checkValue, 50, this);\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.setSelectValues();\n\t\tEvent.bind(this.DOM.select, 'change', this.checkValueDebounce);\n\t\tEvent.bind(this.DOM.select, 'click', this.checkValueDebounce);\n\t}\n\n\tcheckValue()\n\t{\n\t\tif (this.DOM.select.value === 'add')\n\t\t{\n\t\t\tthis.showAdd();\n\t\t\tthis.setValue('');\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.DOM.select.value;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.mailboxList.length\n\t\t\t&& this.mailboxList.find((mailbox) => {return mailbox.email === value}))\n\t\t{\n\t\t\tthis.DOM.select.value = value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.select.value = '';\n\t\t}\n\t\tthis.emit('onSetValue', {\n\t\t\tvalue: this.DOM.select.value\n\t\t});\n\t}\n\n\tsetSelectValues()\n\t{\n\t\tDom.clean(this.DOM.select);\n\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_NO_VALUE'), ''));\n\t\tif (this.mailboxList.length)\n\t\t{\n\t\t\tthis.mailboxList.forEach((value) => {\n\t\t\t\tthis.DOM.select.options.add(new Option(value.formatted, value.email));\n\t\t\t}, this);\n\t\t}\n\n\t\tif (this.allowAddNewEmail)\n\t\t{\n\t\t\tthis.DOM.select.options.add(new Option(Loc.getMessage('EC_ADD_NEW'), 'add'));\n\t\t}\n\t}\n\n\tonClick(item)\n\t{\n\t\tthis.input.value = item.sender;\n\t\tthis.mailbox.textContent = item.sender;\n\t}\n\n\tshowAdd()\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\twindow.BXMainMailConfirm.showForm(this.onAdd.bind(this));\n\t\t}\n\t\tconst mainMailConfirmPopup = PopupManager.getPopupById(this.CONFIRM_POPUP_ID);\n\t\tif (mainMailConfirmPopup)\n\t\t{\n\t\t\tmainMailConfirmPopup.subscribe('onClose', ()=>{\n\t\t\t\tthis.reloadMailboxList();\n\t\t\t});\n\t\t}\n\t}\n\n\tonAdd(data)\n\t{\n\t\tthis.reloadMailboxList()\n\t\t\t.then(() => {\n\t\t\t\tsetTimeout(()=>{\n\t\t\t\t\tthis.setValue(data.email);\n\t\t\t\t},0);\n\t\t\t});\n\t}\n\n\tgetMenuItem(item)\n\t{\n\t\treturn {\n\t\t\t'id': item.id,\n\t\t\t'text': BX.util.htmlspecialchars(item.sender),\n\t\t\t'onclick': this.onClick.bind(this, item)\n\t\t};\n\t}\n\n\tloadMailboxData()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxData')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tBX.html(this.DOM.componentWrap, response.data.html);\n\t\t\t\t\t\tthis.mailboxList = response.data.additionalParams.mailboxList;\n\t\t\t\t\t\tthis.checkBXMainMailConfirmLoaded(resolve);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n\n\tcheckBXMainMailConfirmLoaded(resolve)\n\t{\n\t\tif (window.BXMainMailConfirm)\n\t\t{\n\t\t\tthis.setSelectValues();\n\t\t\tresolve();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(()=>{this.checkBXMainMailConfirmLoaded(resolve)}, 200);\n\t\t}\n\t}\n\n\treloadMailboxList()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.getAllowedMailboxList')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.mailboxList = response.data.mailboxList;\n\t\t\t\t\t\tthis.setSelectValues();\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t});\n\t}\n}","import {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class ConfirmedEmailDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tSLIDER_Z_INDEX = 4400;\n\tWIDTH = 400;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmedEmailDialog');\n\t\tthis.id = 'confirm-email-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-confirm-email-text\">${Loc.getMessage('EC_CONFIRMED_EMAIL_TEXT_1')}</div>\n\t\t\t<div class=\"calendar-confirm-email-text\"><a class=\"calendar-confirm-email-help-link\" href=\"javascript:void(0);\">${Loc.getMessage('EC_CONFIRMED_EMAIL_HELP_LINK')}</a></div>\n\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t<select class=\"calendar-field calendar-field-select ui-btn ui-btn ui-btn-light-border ui-btn-clock\"></select>\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.dialog = new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_CONFIRMED_EMAIL_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'confirmemail-popup-window',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_CONFIRMED_EMAIL_SEND'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ${BX.UI.Button.State.DISABLED}`,\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst userSettings = Util.getUserSettings();\n\t\t\t\t\t\t\tuserSettings.sendFromEmail = this.emailSelectorControl.getValue();\n\t\t\t\t\t\t\tUtil.setUserSettings(userSettings);\n\t\t\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'sendFromEmail', userSettings.sendFromEmail);\n\t\t\t\t\t\t\tthis.emit('onSelect', new BaseEvent({data: {sendFromEmail: userSettings.sendFromEmail}}));\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"ui-btn ui-btn-light-border\",\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tthis.DOM.processButton = this.dialog.buttons[0].button;\n\n\t\tthis.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\tDom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\tthis.DOM.select.disabled = true;\n\n\t\tthis.emailSelectorControl = new EmailSelectorControl({\n\t\t\tselectNode: this.DOM.select,\n\t\t\tallowAddNewEmail: true\n\t\t});\n\t\tEvent.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\tthis.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\n\t\tthis.emailSelectorControl.loadMailboxData()\n\t\t\t.then(()=> {\n\t\t\t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t\t\tthis.DOM.select.disabled = false;\n\t\t\t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t\t});\n\n\t\tthis.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\tEvent.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n\n\thandleSelectChanges()\n\t{\n\t\tif (this.DOM.select.value && this.DOM.select.value !== 'add')\n\t\t{\n\t\t\tDom.removeClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.processButton, BX.UI.Button.State.DISABLED);\n\t\t}\n\t}\n\n\topenHelpSlider()\n\t{\n\t\tif(BX.Helper)\n\t\t{\n\t\t\tBX.Helper.show(\"redirect=detail&code=12070142\", {zIndex: this.SLIDER_Z_INDEX});\n\t\t}\n\t}\n}","'use strict';\nimport {Tag, Dom, Loc, Event} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Popup} from 'main.popup';\nimport {EmailSelectorControl} from 'calendar.controls';\nimport {Util} from 'calendar.util';\n\nexport class EmailLimitationDialog extends EventEmitter\n{\n\tZ_INDEX = 3200;\n\tEXPAND_LICENSE_URL = '/settings/license_all.php';\n\tWIDTH = 480;\n\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.EmailLimitationDialog');\n\t\tthis.id = 'email-limitation-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tconst eventsAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst limit = Util.isEventWithEmailGuestAllowed();\n\t\tif (eventsAmount === 4)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_5');\n\t\t}\n\t\telse if(eventsAmount === 8)\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_9');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.text = Loc.getMessage('EC_EMAIL_LIMIT_DENY');\n\t\t}\n\t\tthis.subText = Loc.getMessage('EC_EMAIL_LIMIT_SUBTEXT');\n\n\t\tthis.DOM.content = Tag.render`<div>\n\t\t\t<div class=\"calendar-email-limit-text\">${this.text}</div>\n\t\t\t<div class=\"calendar-email-limit-subtext\">${this.subText}</div>\n\t\t</div>`;\n\n\t\tthis.dialog = this.getDialogPopup();\n\n\t\tthis.dialog.subscribe('onClose', ()=>{\n\t\t\tthis.emit('onClose');\n\t\t});\n\n\t\t// this.DOM.processButton = this.dialog.buttons[0].button;\n\t\t//\n\t\t// this.DOM.select = this.DOM.content.querySelector('select.calendar-field-select');\n\t\t// Dom.addClass(this.DOM.select, BX.UI.Button.State.CLOCKING);\n\t\t// this.DOM.select.disabled = true;\n\t\t//\n\t\t// this.emailSelectorControl = new EmailSelectorControl({\n\t\t// \tselectNode: this.DOM.select,\n\t\t// \tallowAddNewEmail: true\n\t\t// });\n\t\t// Event.bind(this.DOM.select, 'change', this.handleSelectChanges.bind(this));\n\t\t// this.emailSelectorControl.subscribe('onSetValue', this.handleSelectChanges.bind(this));\n\t\t//\n\t\t// this.emailSelectorControl.loadMailboxData()\n\t\t// \t.then(()=> {\n\t\t// \t\tthis.emailSelectorControl.setValue(Util.getUserSettings().sendFromEmail);\n\t\t// \t\tthis.DOM.select.disabled = false;\n\t\t// \t\tthis.DOM.select.className = 'calendar-field calendar-field-select';\n\t\t// \t});\n\t\t//\n\t\t// this.DOM.helpLinlk = this.DOM.content.querySelector('.calendar-confirm-email-help-link');\n\t\t// Event.bind(this.DOM.helpLinlk, 'click', this.openHelpSlider.bind(this));\n\n\t\tthis.dialog.show();\n\t}\n\n\tgetDialogPopup()\n\t{\n\t\treturn new Popup(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\twidth: this.WIDTH,\n\t\t\tcloseByEsc: true,\n\t\t\tzIndex: this.Z_INDEX,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EMAIL_LIMIT_TITLE'),\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: 'email-limit-popup',\n\t\t\tcontent: this.DOM.content,\n\t\t\tevents: {},\n\t\t\tcacheable: false,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_EMAIL_LIMIT_EXPAND_PLAN'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-primary ui-btn-icon-plan`,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.open(this.EXPAND_LICENSE_URL, '_blank');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Util.isEventWithEmailGuestAllowed() ? Loc.getMessage('EC_SEC_SLIDER_CLOSE') : Loc.getMessage('EC_EMAIL_LIMIT_SAVE_WITHOUT'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-link`,\n\t\t\t\t\tevents: {click: this.close.bind(this)}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Loc, Type} from \"main.core\";\nimport {MenuManager, MenuItem} from \"main.popup\";\nimport {UserPlannerSelector} from \"calendar.controls\";\n\nexport class AttendeesList\n{\n\tconstructor(node, attendeesList = {})\n\t{\n\t\tthis.attendeesList = attendeesList;\n\t\tthis.node = node;\n\t}\n\n\tsetAttendeesList(attendeesList)\n\t{\n\t\tthis.attendeesList = attendeesList;\n\n\t\treturn this;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tconst menuItems = this.getMenuItems();\n\n\t\tthis.popup = this.getPopup(menuItems);\n\t\tthis.popup.show();\n\n\t\tthis.addAvatarToMenuItems();\n\t}\n\n\taddAvatarToMenuItems()\n\t{\n\t\tthis.popup.menuItems.forEach((item) =>\n\t\t{\n\t\t\tconst icon = item.layout.item.querySelector('.menu-popup-item-icon');\n\t\t\tif (Type.isPlainObject(item.dataset))\n\t\t\t{\n\t\t\t\ticon.appendChild(UserPlannerSelector.getUserAvatarNode(item.dataset.user))\n\t\t\t}\n\t\t});\n\t}\n\n\tgetPopup(menuItems)\n\t{\n\t\treturn MenuManager.create(\n\t\t\t'compact-event-form-attendees' + Math.round(Math.random() * 100000),\n\t\t\tthis.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false,\n\t\t\t\tclassName: 'calendar-popup-user-menu'\n\t\t\t}\n\t\t);\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst menuItems = [];\n\t\t[\n\t\t\t{\n\t\t\t\tcode: 'accepted', // Accepted\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Y_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'requested', // Still thinking about\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_Q_NUM')\n\t\t\t},\n\t\t\t{\n\t\t\t\tcode: 'declined', // Declined\n\t\t\t\ttitle: Loc.getMessage('EC_ATTENDEES_N_NUM')\n\t\t\t},\n\t\t].forEach((group) =>\n\t\t{\n\t\t\tlet groupUsers = this.attendeesList[group.code];\n\t\t\tif (groupUsers.length > 0)\n\t\t\t{\n\t\t\t\tmenuItems.push(new MenuItem({\n\t\t\t\t\ttext: group.title.replace('#COUNT#', groupUsers.length),\n\t\t\t\t\tdelimiter: true\n\t\t\t\t}))\n\n\t\t\t\tgroupUsers.forEach((user) =>\n\t\t\t\t{\n\t\t\t\t\tuser.toString = () =>\n\t\t\t\t\t{\n\t\t\t\t\t\treturn user.ID\n\t\t\t\t\t};\n\t\t\t\t\tmenuItems.push(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: BX.util.htmlspecialchars(user.DISPLAY_NAME),\n\t\t\t\t\t\t\tdataset: {user: user},\n\t\t\t\t\t\t\tclassName: 'calendar-add-popup-user-menu-item',\n\t\t\t\t\t\t\tonclick: () =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\tuser.URL,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tloader: \"intranet:profile\",\n\t\t\t\t\t\t\t\t\t\tcacheable: false,\n\t\t\t\t\t\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t\t\t\t\t\t\tcontentClassName: \"bitrix24-profile-slider-content\",\n\t\t\t\t\t\t\t\t\t\twidth: 1100\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis.morePopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn menuItems;\n\t}\n\n\tstatic sortAttendees(attendees)\n\t{\n\t\treturn {\n\t\t\taccepted : attendees.filter((user) => {return ['H', 'Y'].includes(user.STATUS);}),\n\t\t\trequested : attendees.filter((user) => {return user.STATUS === 'Q' || user.STATUS === ''}),\n\t\t\tdeclined : attendees.filter((user) => {return user.STATUS === 'N'}),\n\t\t};\n\t}\n}"],"names":["TimeSelector","constructor","params","Z_INDEX","valueList","DOM","wrap","input","hour","push","value","label","Util","formatTime","onChangeCallback","Type","isFunction","selectContol","BX","Calendar","Controls","SelectInput","zIndex","values","data","getInputValue","dataValue","highlightValue","date","forEach","el","selected","minutes","getHours","getMinutes","setValue","selectedValue","find","setValueList","updateDurationHints","fromTime","toTime","fromDate","toDate","parsedFromTime","parseTime","parsedToTime","parsedFromDate","parseDate","parsedToDate","fromMinutes","h","m","toMinutes","isSameDate","iterateFrom","approximate","firstHour","getValueElement","minute","fromMinute","currentMinute","toMinute","Math","floor","min","time","durationHint","getStyledDurationHint","hint","getDurationHint","from","Date","getTime","to","diff","diffDays","approximateFloor","diffHours","diffMinutes","diffMinutesApproximation","approximationMark","formatDecimal","Loc","getMessage","decimal","replace","accuracy","round","Reminder","EventEmitter","defaultReminderTime","fullDayMode","extendedMode","selectedValues","controlList","viewMode","changedByUser","setEventNamespace","getValues","id","random","rawValuesMap","Map","changeCallack","showPopupCallBack","hidePopupCallBack","create","bindEventHandlers","isElementNode","Dom","addClass","addButton","appendChild","Tag","render","isDomNode","Event","bind","showPopup","handleClick","concat","shortLabel","dataset","mode","daysBefore","reminderList","emitChanges","removeValue","isArray","addValue","getSelectedValues","getSelectedRawValues","selectedRawValues","get","setFullDayMode","_this","menuItems","item","util","in_array","menuItem","getTimeByInt","text","objectMerge","type","items","getSubmenuTimeValues","onclick","before","defer","reminderMenu","close","addValueCallback","MenuManager","bindTarget","closeByEsc","autoHide","offsetTop","offsetLeft","angle","cacheable","adjustSubmenuPopup","closeSubmenuPopup","subscribe","popupWindow","unsubscribe","show","parentItem","parentItemMessage","getTimeValueList","e","parentMenuItem","getMenuItem","setText","formattedValue","formatValue","isPlainObject","count","parseInt","includes","isInteger","getReminderLabel","isDate","formatDateUsable","set","i","length","undefined","props","className","getText","events","click","emit","BaseEvent","remove","deleteFromArray","array_search","timeValueList","target","srcElement","remValue","getAttribute","isNull","hasClass","removeIcon","parentNode","querySelector","inputCalendarClosePopupHandler","onCustomEvent","window","event","submenuPopup","getTarget","Popup","test","getId","adjustTimeSubmenuPopup","adjustCalendarSubmenuPopup","layout","bindElement","textNode","clean","innerHTML","popup","selectedMenuItem","getContentContainer","setTimeout","scrollTop","calendarControl","calendar","destroy","_current_layer","_layers","popup_month","popup_year","Show","node","formatDateTime","getUsableDateTime","field","bTime","bHideTime","calendarPopup","popupContainer","calendarWrap","contentContainer","uniquePopupId","dateValue","setViewMode","style","display","removeClass","wasChangedByUser","tempValue","dividers","messageCodes","result","toString","ceil","remindValue","Location","datesRange","wrapNode","roomsManager","locationAccess","disabled","richLocationEnabled","inlineEditModeEnabled","meetingRooms","iblockMeetingRoomList","setMeetingRoomList","setLocationList","locationList","default","setDefaultRoom","processValue","setCategoryManager","setValuesDebounced","debounce","setValues","inputWrap","alertIconLocation","inlineEditLinkWrap","inlineEditLink","displayInlineEditControls","top","UI","InfoHelper","attrs","name","inputName","placeholder","autocomplete","paddingRight","maxWidth","addLocationRemoveButton","categoryManagerFromDB","prohibitClick","menuItemList","selectedIndex","getMeetingRoomList","getLocationList","roomList","createRoomList","categoriesWithRooms","getCategoriesWithRooms","room","ID","NAME","labelRaw","capacity","delimiter","pushRoomToItemList","location_id","LOCATION_ID","color","reserved","labelCapacity","getCapacityMessage","isObject","categories","category","rooms","loadRoomSlider","callback","openRoomsSlider","valueIndex","minWidth","delegate","setCurrentCapacity","removeLocationRemoveButton","allowClick","str","getTextLocation","locationListElement","room_id","CAPACITY","setValuesDebounce","contains","removeLocationButton","removeChild","addCapacityAlert","initHintNode","after","removeCapacityAlert","suffix","checkLocationAccessibility","getLocationAccessibility","then","eventTsFrom","eventTsTo","fromTs","toTs","fullDay","DAY_LENGTH","index","roomId","isUndefined","accessibility","PARENT_ID","currentEventId","DATE_FROM","DATE_TO","DT_SKIP_TIME","Promise","resolve","getDatesRange","isCheckedAccessibility","ajax","runAction","response","errors","handlePull","fields","dateFrom","dateTo","setRoomsManager","getRoomsInterface","RoomsInterface","roomsInterface","calendarContext","readonly","roomsManagerFromDB","categoryManager","isConfigureList","getTextValue","res","mrevid","room_event_id","getValue","debounced","parseStringValue","textLocation","Text","encode","isString","substr","split","isNaN","mrid","location","sortLocationList","sort","a","b","toLowerCase","meetingRoomList","setLocationAccessibility","currentRoomCapacity","getCurrentCapacity","RoomsManager","isEmpty","activeRooms","getRoomsInfo","active","activeRoomId","bx","getBX","extensionName","Runtime","loadExtension","Rooms","console","error","getRoomsManager","getRoomsManagerData","sections","config","hiddenSections","ownerId","userId","new_section_access","defaultSectionAccess","sectionAccessTasks","showTasks","locationContext","map","RoomsSection","getCategoryManager","CategoryManager","getCategoryManagerData","perm","permissions","getDateInFormat","getDate","slice","getMonth","getFullYear","startDate","setHours","finishDate","UserSelector","destinationInputName","itemsSelected","convertAttendeesCodes","socnetDestinationWrap","SocNetLogDestination","openDialog","socnetDestinationItems","targ","deleteItem","preventDefault","stopPropagation","mouseover","mouseout","socnetDestinationInputWrap","socnetDestinationInput","keydown","searchBeforeHandler","formName","inputId","keyup","searchHandler","linkId","sendAjax","socnetDestinationLink","html","addLinkMessage","message","init","selectGroups","groups","department","sonetgroups","selectUsers","users","searchInput","extranetUser","userSearchArea","bindMainPopup","bindSearchPopup","select","selectCallback","unSelect","unSelectCallback","openDialogCallback","closeDialog","closeDialogCallback","openSearch","closeSearch","itemsLast","departmentSelectDisable","closeAll","isOpenDialog","type1","prefix","children","getSelectedCount","search","elements","findChildren","attribute","j","focus","cleanInputValue","isOpenSearch","backspaceDisable","unbind","keyCode","getCodes","inputsList","getElementsByTagName","codes","getAttendeesCodes","attendeesCodes","code","getAttendeesCodesList","hasOwnProperty","ColorSelector","LINE_MODE","SELECTOR_MODE","VIEW_MODE","defaultColors","getDefaultColorList","colors","backgroundColor","customColorNode","width","customColorLink","colorPickerPopup","ColorPicker","onColorSelected","popupOptions","open","handleColorClick","colorIcon","openPopup","findTargetNode","activeColor","activeColorNode","isShown","icon","element","left","SectionSelector","sectionList","sectionGroupList","openPopupCallback","closePopupCallback","getCurrentSection","defaultCalendarType","defaultOwnerId","outerWrap","initEventHandlers","selectImageWrap","selectInnerText","getCurrentTitle","innerValue","getCurrentColor","sectionMenu","sectionIdList","getSectionList","sectionGroup","filteredList","belongsToView","filter","section","getSectionType","getSectionOwner","MenuItem","title","overflow","maxHeight","setWidth","offsetWidth","overflowX","addCustomEvent","PopupMenu","PERM","edit","canDo","updateSectionImageNode","imageSrc","getSectionImage","imageNode","getPopup","sectionItem","htmlspecialchars","COLOR","updateValue","CAL_TYPE","IMAGE","OWNER_ID","adjust","RepeatSelector","formElements","rruleType","form","previousDate","interval","rruleEndsOn","never","until","changeType","DateTimeControl","showInputCalendar","checked","toUpperCase","day","getWeekDayByInd","getDay","previousDay","rrule","FREQ","INTERVAL","COUNT","BYDAY","getType","defaultValue","openTitle","curInd","proxy","onClick","onFocus","onBlur","onKeyup","currentValue","currentValueIndex","shown","ind","htmlTemp","popupMenu","onChange","browser","IsFirefox","setMinWidth","setMaxWidth","menuContainer","offsetHeight","popupMenuItems","closePopup","inputValue","PopupDialog","dialog","PopupWindow","overlay","opacity","draggable","bindOnResize","titleBar","getTitle","closeIcon","right","buttons","getButtons","content","getContent","ViewSelector","views","created","currentViewMode","popupId","currentView","selectorText","selectorTextInner","viewModeTextInner","getOuterWrap","view","getMenuItems","hotkey","menuPopup","LineViewSelector","viewsMap","WeakMap","viewData","currentActiveWrap","AddButton","addEntryHandler","addEntry","addTaskHandler","addTask","addButtonExtra","setAttribute","getWrap","addBtnMenu","MeetingStatusControl","Error","status","currentStatus","updateStatus","acceptBtn","Button","accept","renderTo","declineBtn","decline","getContainer","setStatus","emitEvent","ConfirmStatusDialog","PopupWindowButtonLink","PopupWindowButton","onDeclineHandler","recursionMode","buttonNode","compactForm","EntryManager","getCompactViewForm","ConfirmEditDialog","ConfirmDeleteDialog","entry","deleteThis","deleteNext","deleteAll","uid","options","showTimezone","DATE_INPUT_WIDTH","TIME_INPUT_WIDTH","inlineEditMode","currentInlineEditMode","UID","outerContent","leftInnerWrap","fromDateText","fromTimeText","betweenSpacer","rightInnerWrap","toTimeText","toDateText","fromTimeControl","handleTimeFromChange","toTimeControl","handleTimeToChange","fullDayWrap","formatDate","updateTimePeriod","timezoneFrom","timezoneName","timezoneTo","fromTz","toTz","switchTimezone","handleFullDayChange","getFrom","getTo","updateToTimeDurationHints","getDateWithTime","parsedDate","handleDateFromChange","handleDateToChange","handleValueChange","changeInlineEditMode","defTimezone","bindFromToDefaultTimezones","tzButton","bindTimezones","nodeName","removeCustomEvent","difference","yearDuration","abs","getMinutesFromFormattedTime","isIncorrectTimeValue","newFromDate","timeValue","isAmPmMode","getFullDayValue","dateTimeWrap","parsedTime","isBoolean","tzCont","setInlineEditMode","BusyUsersDialog","plural","userNames","DISPLAY_NAME","join","UserPlannerSelector","readOnlyMode","meetingNotifyValue","userSelectorDialog","attendeesEntityList","prevUserList","loadedAccessibilityData","REFRESH_PLANNER_DELAY","selectorId","informWrap","informWrapText","moreLink","changeLink","attendeesLabel","attendeesList","userSelectorWrap","plannerOuterWrap","videocallWrap","hideGuestsWrap","hideGuestsIcon","refreshPlannerStateDebounce","refreshPlannerState","dayOfWeekMonthFormat","plannerFeatureEnabled","isReadOnly","EntitySelectorDialog","targetNode","context","preselectedItems","attendeesPreselectedItems","enableSearch","handleUserSelectorChanges","entities","inviteGuestLink","emailUsers","selectMode","searchTabOptions","stubOptions","subtitle","iconOpacity","arrow","showMoreAttendeesPopup","planner","Planner","PLANNER_WIDTH","showEntryName","locked","setInformValue","handleExpandPlannerTimeline","setHideGuestsValue","hideGuests","attendees","notify","entityId","entryId","showPlanner","setEntityList","setLocationValue","displayAttendees","Intranet","ControlButton","getCurrentStatus","intranetControllButton","container","entityType","parentId","mainItem","entityData","analyticsLabel","formType","button","dateTime","getDateTime","updateSelector","getSelectedItems","getEntityList","selectorEntityList","getUserSelector","SelectorManager","instances","isPlannerDisplayed","showLoader","checkBusyTime","entityList","runPlannerDataRequest","timezone","getLocationValue","entries","preparedData","preparedDataAccessibility","currentFromDate","currentToDate","checkTimePeriod","update","hideLoader","prepareAttendeesForDisplay","AVATAR","avatar","EMAIL_USER","emailUser","STATUS","URL","url","loadPlannerData","entryLocation","LOCATION","scaleDateFrom","scaleDateTo","entrieIds","setDateTime","updatePlaner","fromHours","toHours","shownScaleTimeFrom","shownScaleTimeTo","attendeeList","AttendeesList","sortAttendees","usersCount","accepted","requested","userLength","MAX_USER_COUNT_DISPLAY","MAX_USER_COUNT","getUserAvatarNode","hide","hasExternalEmailUsers","showHideGuestsOption","hideHideGuestsOption","user","img","SMALL_AVATAR","DISABLED_CLASS","getInformValue","hideGuestsText","calendarEventsAccessibility","prepareAccessibilityItem","clearAccessibilityData","userIdList","getData","reload","focusSelector","EDIT_MODE","ReinviteUserDialog","sendInvitesAgain","EmailSelectorControl","CONFIRM_POPUP_ID","selectNode","mailboxList","componentWrap","allowAddNewEmail","checkValueDebounce","checkValue","setSelectValues","showAdd","mailbox","email","add","Option","formatted","sender","textContent","BXMainMailConfirm","showForm","onAdd","mainMailConfirmPopup","PopupManager","getPopupById","reloadMailboxList","loadMailboxData","additionalParams","checkBXMainMailConfirmLoaded","ConfirmedEmailDialog","SLIDER_Z_INDEX","WIDTH","State","DISABLED","userSettings","getUserSettings","sendFromEmail","emailSelectorControl","setUserSettings","userOptions","save","processButton","CLOCKING","handleSelectChanges","helpLinlk","openHelpSlider","Helper","EmailLimitationDialog","EXPAND_LICENSE_URL","eventsAmount","getEventWithEmailGuestAmount","limit","isEventWithEmailGuestAllowed","subText","getDialogPopup","setAttendeesList","addAvatarToMenuItems","group","groupUsers","SidePanel","Instance","loader","allowChangeHistory","contentClassName","morePopup","declined"],"mappings":"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"}