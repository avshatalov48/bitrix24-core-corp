{"version":3,"file":"controls.bundle.js","sources":["../src/timeselector.js","../src/reminder.js","../src/location.js","../src/userselector.js","../src/colorselector.js","../src/sectionselector.js","../src/repeatselector.js","../src/selectinput.js","../src/popupdialog.js","../src/viewselector.js","../src/lineviewselector.js","../src/addbutton.js","../src/meetingstatuscontrol.js","../src/confirmstatusdialog.js","../src/confirmeditdialog.js","../src/confirmdeletedialog.js","../src/datetimecontrol.js","../src/busyusersdialog.js"],"sourcesContent":["import {Util} from \"calendar.util\";\n\nexport class TimeSelector {\n\tstatic valueList = null;\n\n\tconstructor(params)\n\t{\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap,\n\t\t\tinput: params.input\n\t\t};\n\n\t\tthis.onChangeCallback = BX.type.isFunction(params.onChangeCallback) ? params.onChangeCallback : null;\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tzIndex: 4000,\n\t\t\tvalues: TimeSelector.getValueList(),\n\t\t\tonChangeCallback: function()\n\t\t\t{\n\t\t\t\tif (this.onChangeCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.onChangeCallback(this.selectContol.getInputValue());\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t});\n\t}\n\n\tstatic adaptTimeValue(timeValue)\n\t{\n\t\ttimeValue = parseInt(timeValue.h * 60) + parseInt(timeValue.m);\n\t\tlet\n\t\t\ttimeList = TimeSelector.getValueList(),\n\t\t\tdiff = 24 * 60,\n\t\t\tind = false,\n\t\t\ti;\n\n\t\tfor (i = 0; i < timeList.length; i++)\n\t\t{\n\t\t\tif (Math.abs(timeList[i].value - timeValue) < diff)\n\t\t\t{\n\t\t\t\tdiff = Math.abs(timeList[i].value - timeValue);\n\t\t\t\tind = i;\n\t\t\t\tif (diff <= 15)\n\t\t\t\t{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn timeList[ind || 0];\n\t}\n\n\tstatic getValueList()\n\t{\n\t\tif (!TimeSelector.valueList)\n\t\t{\n\t\t\tTimeSelector.valueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tTimeSelector.valueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tTimeSelector.valueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t}\n\t\t}\n\t\treturn TimeSelector.valueList;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tlet time;\n\t\tif (BX.type.isDate(value))\n\t\t{\n\t\t\ttime = {\n\t\t\t\th: value.getHours(),\n\t\t\t\tm: value.getMinutes()\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttime = Util.parseTime(value);\n\t\t}\n\n\t\tlet adaptedValue = TimeSelector.adaptTimeValue(time);\n\n\t\tthis.selectContol.setValue({value: adaptedValue.value});\n\n\t\tlet hour = Math.floor(adaptedValue.value / 60);\n\t\tlet min = (adaptedValue.value) - hour * 60;\n\n\t\tthis.DOM.input.value = Util.formatTime(hour, min);\n\t}\n}","import {Loc, Type, Dom, Tag, Event} from \"main.core\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {MenuManager, Popup} from 'main.popup';\nimport {Util} from \"calendar.util\";\n\nexport class Reminder extends EventEmitter\n{\n\tstatic timeValueList = null;\n\tdefaultReminderTime = 540; // 9.00\n\tfullDayMode = false;\n\textendedMode = true;\n\tselectedValues = [];\n\tcontrolList = {};\n\tviewMode = false;\n\tDOM = {};\n\n\tconstructor(params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Calendar.Controls.Reminder');\n\t\tthis.values = this.getValues();\n\n\t\tthis.id = params.id || 'reminder-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3200;\n\n\t\tthis.viewMode = params.viewMode === true;\n\t\tthis.changeCallack = params.changeCallack;\n\t\tthis.showPopupCallBack = params.showPopupCallBack;\n\t\tthis.hidePopupCallBack = params.hidePopupCallBack;\n\n\t\tthis.create(params);\n\t\tthis.setValue(params.selectedValues || []);\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcreate(params)\n\t{\n\t\tif (Type.isDomNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\n\t\tif (Type.isDomNode(params.valuesContainerNode))\n\t\t{\n\t\t\tthis.DOM.valuesWrap = params.valuesContainerNode;\n\t\t}\n\t\telse if (this.DOM.wrap)\n\t\t{\n\t\t\tthis.DOM.valuesWrap = this.DOM.wrap.appendChild(Tag.render`<span class=\"calendar-notification-values\"></span>`);\n\t\t}\n\n\t\tif (!this.viewMode)\n\t\t{\n\t\t\tif (Type.isDomNode(params.addButtonNode))\n\t\t\t{\n\t\t\t\tthis.DOM.addButton = params.addButtonNode;\n\t\t\t}\n\t\t\telse if (this.DOM.wrap)\n\t\t\t{\n\t\t\t\tthis.DOM.addButton = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-notification-add-btn-wrap\">\n\t\t\t\t\t\t<span class=\"calendar-notification-text\">${Loc.getMessage('EC_REMIND1_ADD')}</span>\n\t\t\t\t\t\t<span class=\"calendar-notification-btn-container calendar-notification-btn-add\">\n\t\t\t\t\t\t\t<span class=\"calendar-notification-icon\"></span>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\t\t\t}\n\t\t}\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (Type.isDomNode(this.DOM.addButton))\n\t\t{\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showPopup.bind(this));\n\t\t}\n\n\t\tif (Type.isDomNode(this.DOM.valuesWrap))\n\t\t{\n\t\t\tEvent.bind(this.DOM.valuesWrap, 'click', this.handleClick.bind(this));\n\t\t}\n\t}\n\n\tgetValues()\n\t{\n\t\tlet values = [];\n\n\t\tif (!this.fullDayMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{value: 0, label: Loc.getMessage(\"EC_REMIND1_0\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_0\")},\n\t\t\t\t{value: 5, label: Loc.getMessage(\"EC_REMIND1_5\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_5\")},\n\t\t\t\t{value: 10, label: Loc.getMessage(\"EC_REMIND1_10\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_10\")},\n\t\t\t\t{value: 15, label: Loc.getMessage(\"EC_REMIND1_15\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_15\")},\n\t\t\t\t{value: 20, label: Loc.getMessage(\"EC_REMIND1_20\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_20\")},\n\t\t\t\t{value: 30, label: Loc.getMessage(\"EC_REMIND1_30\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_30\")},\n\t\t\t\t{value: 60, label: Loc.getMessage(\"EC_REMIND1_60\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_60\")},\n\t\t\t\t{value: 120, label: Loc.getMessage(\"EC_REMIND1_120\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_120\")}\n\t\t\t\t//{value: 1440, label: Loc.getMessage(\"EC_REMIND1_1440\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_1440\")},\n\t\t\t\t//{value: 2880, label: Loc.getMessage(\"EC_REMIND1_2880\"), shortLabel: Loc.getMessage(\"EC_REMIND1_SHORT_2880\")}\n\t\t\t]);\n\t\t}\n\n\t\tif (this.extendedMode)\n\t\t{\n\t\t\tvalues = values.concat([\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-0',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_0\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 0,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-1',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_1\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 1,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'time-menu-day-2',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_DAY_2\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'time-menu',\n\t\t\t\t\t\tdaysBefore: 2,\n\t\t\t\t\t\ttime: this.defaultReminderTime\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'custom',\n\t\t\t\t\tlabel: Loc.getMessage(\"EC_REMIND1_CUSTOM\"),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\tmode: 'custom'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\n\t\treturn values;\n\t}\n\n\tsetValue(reminderList)\n\t{\n\t\tif (Type.isArray(reminderList))\n\t\t{\n\t\t\treminderList.forEach(this.addValue, this);\n\t\t}\n\n\t\t//this.selectedValues\n\t}\n\n\tsetFullDayMode(fullDayMode)\n\t{\n\t\tif (fullDayMode !== this.fullDayMode)\n\t\t{\n\t\t\tthis.fullDayMode = fullDayMode;\n\t\t\tthis.values = this.getValues();\n\t\t}\n\t}\n\n\tshowPopup()\n\t{\n\t\tlet\n\t\t\t_this = this,\n\t\t\tmenuItems = [];\n\n\t\tthis.values.forEach((item) => {\n\t\t\tif (item.mode === 'time-menu'\n\t\t\t\t|| item.mode === 'custom'\n\t\t\t\t|| !BX.util.in_array(item.value, this.selectedValues))\n\t\t\t{\n\t\t\t\tlet menuItem = {};\n\n\t\t\t\tif (item.dataset && item.dataset.mode === 'time-menu')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = item.id;\n\t\t\t\t\tlet defaultReminderTime = Util.getTimeByInt(this.defaultReminderTime);\n\n\t\t\t\t\tmenuItem.text = item.label.replace('#TIME#', Util.formatTime(defaultReminderTime.hour, defaultReminderTime.min));\n\n\t\t\t\t\tmenuItem.dataset = BX.util.objectMerge({\n\t\t\t\t\t\ttype: 'submenu-list',\n\t\t\t\t\t\tvalue: this.defaultReminderTime\n\t\t\t\t\t}, item.dataset);\n\n\t\t\t\t\tmenuItem.items = this.getSubmenuTimeValues(menuItem, item.label);\n\n\t\t\t\t\tmenuItem.onclick = (function ()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.addValue({\n\t\t\t\t\t\t\t\tbefore: item.dataset.daysBefore,\n\t\t\t\t\t\t\t\ttime: item.dataset.time\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tBX.defer(function(){_this.reminderMenu.close();}, _this)();\n\t\t\t\t\t\t}\n\t\t\t\t\t})();\n\t\t\t\t}\n\t\t\t\telse if (item.dataset && item.dataset.mode === 'custom')\n\t\t\t\t{\n\t\t\t\t\tmenuItem.id = 'custom';\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.items = [{id: 'tmp', text: 'tmp'}];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tmenuItem.text = item.label;\n\t\t\t\t\tmenuItem.onclick = (function (value, mode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn () => {\n\t\t\t\t\t\t\t_this.addValue(value);\n\t\t\t\t\t\t\t_this.reminderMenu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t})(item.value, item.mode);\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push(menuItem);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis.reminderMenu = MenuManager.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.addButton,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tlet adjustSubmenuPopup = this.adjustSubmenuPopup.bind(this);\n\t\tlet closeSubmenuPopup = this.closeSubmenuPopup.bind(this);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\n\t\tthis.reminderMenu.popupWindow.subscribe('onClose', () => {\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onShow', adjustSubmenuPopup);\n\t\t\tEventEmitter.unsubscribe('BX.Main.Popup:onClose', closeSubmenuPopup);\n\t\t});\n\t\tthis.reminderMenu.show();\n\t}\n\n\tgetSubmenuTimeValues(parentItem, parentItemMessage)\n\t{\n\t\tlet menuItems = [];\n\t\tReminder.getTimeValueList(60).forEach(function(menuItem)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\tid: 'time-' + menuItem.value,\n\t\t\t\tdataset: {\n\t\t\t\t\tvalue: menuItem.value,\n\t\t\t\t\tdaysBefore: parentItem.dataset.daysBefore\n\t\t\t\t},\n\t\t\t\ttext: menuItem.label,\n\t\t\t\tonclick: function(e, item)\n\t\t\t\t{\n\t\t\t\t\tlet time = Util.getTimeByInt(item.dataset.value);\n\t\t\t\t\tlet parentMenuItem = this.reminderMenu.getMenuItem(parentItem.id);\n\t\t\t\t\tif (parentMenuItem)\n\t\t\t\t\t{\n\t\t\t\t\t\tparentMenuItem.setText(parentItemMessage.replace('#TIME#', Util.formatTime(time.hour, time.min)));\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.addValue({\n\t\t\t\t\t\ttime: item.dataset.value,\n\t\t\t\t\t\tbefore: item.dataset.daysBefore\n\t\t\t\t\t});\n\n\t\t\t\t\tBX.defer(function(){this.reminderMenu.close();}, this)();\n\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}, this);\n\t\treturn menuItems;\n\t}\n\n\taddValue(value)\n\t{\n\t\tlet\n\t\t\ti, item,\n\t\t\tformattedValue = Reminder.formatValue(value);\n\n\t\tif (Type.isPlainObject(value) && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time))\n\t\t\t{\n\t\t\t\titem = this.DOM.valuesWrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${Reminder.getReminderLabel(value)}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.type === 'date' && Type.isDate(value.value))\n\t\t\t{\n\t\t\t\titem = this.DOM.valuesWrap.appendChild(Tag.render`<span class=\"calendar-reminder-item\">\n\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t${Util.formatDateUsable(value.value) + ' ' + Util.formatTime(value.value)}\n\t\t\t\t\t</span>\n\t\t\t\t</span>`);\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\tthis.controlList[formattedValue] = item;\n\t\t}\n\t\telse if (value >= 0 && !this.selectedValues.includes(formattedValue))\n\t\t{\n\t\t\tfor (i = 0; i < this.values.length; i++)\n\t\t\t{\n\t\t\t\tif (this.values[i].value === value)\n\t\t\t\t{\n\t\t\t\t\titem = this.DOM.valuesWrap.appendChild(Tag.render`\n\t\t\t\t\t<span class=\"calendar-reminder-item\">\n\t\t\t\t\t\t<span class=\"calendar-reminder-item-title\">\n\t\t\t\t\t\t\t${this.values[i].shortLabel || this.values[i].label}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</span>`);\n\n\t\t\t\t\tif (!this.viewMode)\n\t\t\t\t\t{\n\t\t\t\t\t\titem.appendChild(Tag.render`<span class=\"calendar-reminder-clear-icon\" data-bxc-value=\"${formattedValue}\"/>`);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.selectedValues.push(formattedValue);\n\t\t\t\t\tthis.controlList[formattedValue] = item;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (item === undefined)\n\t\t\t{\n\t\t\t\titem = this.DOM.valuesWrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-reminder-item'},\n\t\t\t\t\ttext: Reminder.getText(value)\n\t\t\t\t}));\n\n\t\t\t\tif (!this.viewMode)\n\t\t\t\t{\n\t\t\t\t\titem.appendChild(Dom.create('SPAN', {\n\t\t\t\t\t\tprops: {className: 'calendar-reminder-clear-icon'},\n\t\t\t\t\t\tevents: {click: function(){this.removeValue(value);}.bind(this)}\n\t\t\t\t\t}));\n\t\t\t\t}\n\n\t\t\t\tthis.selectedValues.push(value);\n\t\t\t\tthis.controlList[value] = item;\n\t\t\t}\n\t\t}\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t}\n\n\tstatic getText(value)\n\t{\n\t\tlet\n\t\t\ttempValue = value,\n\t\t\tdividers = [60, 24], //list of time dividers\n\t\t\tmessageCodes = ['EC_REMIND1_MIN_COUNT', 'EC_REMIND1_HOUR_COUNT', 'EC_REMIND1_DAY_COUNT'],\n\t\t\tresult = '';\n\n\t\tfor (let i = 0; i < messageCodes.length; i++)\n\t\t{\n\t\t\tif (tempValue < dividers[i] || i === dividers.length)\n\t\t\t{\n\t\t\t\tresult = Loc.getMessage(messageCodes[i]).toString();\n\t\t\t\tresult = result.replace('\\#COUNT\\#', tempValue.toString());\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttempValue = Math.ceil(tempValue / dividers[i]);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tremoveValue(value)\n\t{\n\t\tif (this.controlList[value] && Type.isDomNode(this.controlList[value]))\n\t\t{\n\t\t\tDom.remove(this.controlList[value]);\n\t\t}\n\t\tthis.selectedValues = BX.util.deleteFromArray(this.selectedValues, BX.util.array_search(value, this.selectedValues));\n\n\t\tif (!this.selectedValues.length)\n\t\t{\n\t\t\t//this.DOM.valuesWrap.appendChild(Dom.create('SPAN', {props: {className: ''}, text: ' ' +\n\t\t\t// Loc.getMessage('EC_REMIND1_NO')}));\n\t\t}\n\n\t\tif (this.changeCallack)\n\t\t{\n\t\t\tthis.changeCallack(this.selectedValues);\n\t\t}\n\n\t\tthis.emit('onChange', new BaseEvent({data: {values: this.selectedValues}}));\n\t}\n\n\tstatic getTimeValueList(mode = 30)\n\t{\n\t\tif (!Reminder.timeValueList)\n\t\t{\n\t\t\tReminder.timeValueList = [];\n\t\t\tlet i;\n\t\t\tfor (i = 0; i < 24; i++)\n\t\t\t{\n\t\t\t\tReminder.timeValueList.push({value: i * 60, label: Util.formatTime(i, 0)});\n\t\t\t\tif (mode <= 30)\n\t\t\t\t{\n\t\t\t\t\tReminder.timeValueList.push({value: i * 60 + 30, label: Util.formatTime(i, 30)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn Reminder.timeValueList;\n\t}\n\n\tstatic formatValue(remindValue)\n\t{\n\t\tif (Type.isPlainObject(remindValue) && Type.isInteger(remindValue.before) && Type.isInteger(remindValue.time))\n\t\t{\n\t\t\treturn 'daybefore|' + remindValue.before + '|' + remindValue.time;\n\t\t}\n\t\telse if (Type.isPlainObject(remindValue) && Type.isDate(remindValue.value))\n\t\t{\n\t\t\treturn 'date|' + Util.formatDateTime(remindValue.value);\n\t\t}\n\t\treturn remindValue.toString();\n\t}\n\n\thandleClick(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tlet remValue = target.getAttribute('data-bxc-value');\n\n\t\tif (this.selectedValues.includes(remValue))\n\t\t{\n\t\t\tthis.removeValue(remValue);\n\t\t}\n\t}\n\n\tstatic showCustomInputCalendar(e, input)\n\t{\n\t\tif (!Type.isDomNode(input) && e)\n\t\t{\n\t\t\tinput = e.target || e.srcElement;\n\t\t}\n\n\t\tif (Type.isDomNode(input) && input.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tBX.calendar({\n\t\t\t\tnode: input.parentNode,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tlet calendarPopup = BX.calendar.get().popup;\n\t\t\tif (calendarPopup)\n\t\t\t{\n\t\t\t\t// Apply hack for calendar z-index\n\t\t\t\tcalendarPopup.params.zIndex = 4200;\n\t\t\t\tcalendarPopup.popupContainer.style.zIndex = calendarPopup.params.zIndex;\n\t\t\t\tBX.removeCustomEvent(calendarPopup, 'onPopupClose', Reminder.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(calendarPopup, 'onPopupClose', Reminder.inputCalendarClosePopupHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\tstatic getReminderLabel(value)\n\t{\n\t\tlet label = '';\n\t\tif (Type.isInteger(value.before) && Type.isInteger(value.time) && [0, 1, 2].includes(value.before))\n\t\t{\n\t\t\tlet time = Util.getTimeByInt(value.time);\n\n\t\t\tlabel = Loc.getMessage('EC_REMIND1_DAY_' + value.before + '_SHORT').replace('#TIME#', Util.formatTime(time.hour, time.min))\n\t\t}\n\t\treturn label;\n\t}\n\n\t// Used to scroll into view and highlight default item in time menu\n\tadjustSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustTimeSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tthis.adjustCalendarSubmenuPopup(submenuPopup);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcloseSubmenuPopup(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet submenuPopup = event.getTarget();\n\n\t\t\tif (submenuPopup instanceof Popup)\n\t\t\t{\n\t\t\t\tif (/^menu-popup-popup-submenu-time-menu-day-\\d$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse if (/^menu-popup-popup-submenu-custom$/.test(submenuPopup.getId()))\n\t\t\t\t{\n\t\t\t\t\tlet layout = submenuPopup.bindElement;\n\t\t\t\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\n\t\t\t\t\tif (Type.isDomNode(textNode))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.clean(textNode);\n\t\t\t\t\t\ttextNode.innerHTML = Loc.getMessage(\"EC_REMIND1_CUSTOM\");\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tadjustTimeSubmenuPopup(popup)\n\t{\n\t\tlet selectedMenuItem = popup.getContentContainer().querySelector('span[data-value=\"' + this.defaultReminderTime + '\"]');\n\t\tif (Type.isDomNode(selectedMenuItem))\n\t\t{\n\t\t\tsetTimeout(()=>{\n\t\t\t\tpopup.getContentContainer().scrollTop = parseInt(selectedMenuItem.offsetTop) - 10;\n\t\t\t\tDom.addClass(selectedMenuItem, 'menu-popup-item-open');\n\t\t\t}, 50);\n\t\t}\n\t}\n\n\tadjustCalendarSubmenuPopup(popup)\n\t{\n\t\tlet layout = popup.bindElement;\n\n\t\tlet textNode = layout.querySelector('.menu-popup-item-text');\n\t\tif (Type.isDomNode(textNode))\n\t\t{\n\t\t\tDom.clean(textNode);\n\t\t\tlet input = textNode.appendChild(Tag.render`<input id=\"inp-${Math.round(Math.random() * 100000)}\" type=\"text\" class=\"calendar-field calendar-field-datetime\" value=\"\" autocomplete=\"off\" placeholder=\"${Loc.getMessage('EC_REMIND1_CUSTOM_PLACEHOLDER')}\"/>`);\n\n\t\t\tlet calendarControl = BX.calendar.get();\n\n\t\t\t// Hacks for BX.calendar - it works as singleton and has troubles with using inside menupopups\n\t\t\t// We trying to reinitialize it everytime\n\t\t\tcalendarControl.popup = null;\n\t\t\tcalendarControl._current_layer = null;\n\t\t\tcalendarControl._layers = {};\n\n\t\t\tcalendarControl.Show({\n\t\t\t\tnode: input,\n\t\t\t\tvalue: Util.formatDateTime(Util.getUsableDateTime(new Date())),\n\t\t\t\tfield: input,\n\t\t\t\tbTime: true,\n\t\t\t\tbHideTime: false\n\t\t\t});\n\n\t\t\tlet calendarPopup = calendarControl.popup;\n\t\t\tcalendarPopup.cacheable = false;\n\t\t\tif (calendarPopup && calendarPopup.popupContainer)\n\t\t\t{\n\t\t\t\tlet calendarWrap = calendarPopup.popupContainer.querySelector('.bx-calendar');\n\t\t\t\tif (Type.isDomNode(calendarWrap))\n\t\t\t\t{\n\t\t\t\t\tpopup.contentContainer.appendChild(calendarWrap);\n\t\t\t\t}\n\t\t\t\tcalendarPopup.close();\n\t\t\t\tMenuManager.destroy(calendarPopup.uniquePopupId);\n\t\t\t}\n\n\t\t\tEvent.bind(input, 'change', () => {\n\t\t\t\tlet\n\t\t\t\t\tvalue = input.value,\n\t\t\t\t\tdateValue = Util.parseDate(value);\n\n\t\t\t\tif (Type.isDate(dateValue))\n\t\t\t\t{\n\t\t\t\t\tthis.addValue({type: 'date', value: dateValue});\n\t\t\t\t\tthis.reminderMenu.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n","import {Type, Loc, Dom} from 'main.core';\n\nexport class Location\n{\n\tstatic locationList = [];\n\tstatic meetingRoomList = [];\n\n\tconstructor(params)\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'location-' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrap\n\t\t};\n\n\t\tthis.disabled = !params.richLocationEnabled;\n\t\tthis.value = {type: '', text: '', value: ''};\n\n\t\tthis.meetingRooms = params.iblockMeetingRoomList || [];\n\t\tLocation.setMeetingRoomList(params.iblockMeetingRoomList);\n\t\tLocation.setLocationList(params.locationList);\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.inputWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\tif (this.disabled)\n\t\t{\n\t\t\tBX.addClass(this.DOM.wrapNode, 'locked');\n\t\t\tthis.DOM.inputWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-lock-icon'},\n\t\t\tevents: {\n\t\t\t\tclick: function()\n\t\t\t\t{\n\t\t\t\t\tB24.licenseInfoPopup.show('calendar_location', Loc.getMessage('EC_B24_LOCATION_LIMITATION_TITLE'), Loc.getMessage('EC_B24_LOCATION_LIMITATION'));\n\t\t\t\t}\n\t\t\t}\n\t\t\t}))\n\t\t}\n\n\t\tthis.DOM.input = this.DOM.inputWrap.appendChild(Dom.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tname: this.params.inputName || '',\n\t\t\t\tplaceholder: Loc.getMessage('EC_LOCATION_LABEL'),\n\t\t\t\ttype: 'text',\n\t\t\t\tautocomplete: this.disabled ? 'on' : 'off'\n\t\t\t},\n\t\t\tprops: {\n\t\t\t\tclassName: 'calendar-field calendar-field-select'\n\t\t\t}\n\t\t}));\n\t}\n\n\tsetValues()\n\t{\n\t\tlet\n\t\t\tmenuItemList = [],\n\t\t\tselectedIndex = false,\n\t\t\tmeetingRooms = Location.getMeetingRoomList(),\n\t\t\tlocationList = Location.getLocationList();\n\n\t\tif (Type.isArray(meetingRooms))\n\t\t{\n\t\t\tmeetingRooms.forEach(function(room)\n\t\t\t{\n\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tID: room.ID,\n\t\t\t\t\tlabel: BX.util.htmlspecialchars(room.NAME),\n\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\ttype: 'mr'\n\t\t\t\t});\n\n\t\t\t\tif (this.value.type === 'mr'\n\t\t\t\t\t&& parseInt(this.value.value) === room.ID)\n\t\t\t\t{\n\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tif (menuItemList.length > 0)\n\t\t\t{\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tif (locationList.length)\n\t\t\t{\n\t\t\t\tlocationList.forEach(function(room)\n\t\t\t\t{\n\t\t\t\t\troom.ID = parseInt(room.ID);\n\t\t\t\t\tmenuItemList.push({\n\t\t\t\t\t\tID: room.ID,\n\t\t\t\t\t\tlabel: BX.util.htmlspecialchars(room.NAME),\n\t\t\t\t\t\tlabelRaw: room.NAME,\n\t\t\t\t\t\tvalue: room.ID,\n\t\t\t\t\t\ttype: 'calendar'\n\t\t\t\t\t});\n\n\t\t\t\t\tif (this.value.type === 'calendar'\n\t\t\t\t\t\t&& parseInt(this.value.value) === parseInt(room.ID))\n\t\t\t\t\t{\n\t\t\t\t\t\tselectedIndex = menuItemList.length - 1;\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\n\t\t\t\tmenuItemList.push({delimiter: true});\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tlabel: Loc.getMessage('EC_LOCATION_MEETING_ROOM_SET'),\n\t\t\t\t\tcallback: this.editMeetingRooms.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmenuItemList.push({\n\t\t\t\t\tlabel: Loc.getMessage('EC_ADD_LOCATION'),\n\t\t\t\t\tcallback: this.editMeetingRooms.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.value)\n\t\t{\n\t\t\tthis.DOM.input.value = this.value.str || '';\n\t\t\tif (this.value.type && this.value.str === this.getTextLocation(this.value))\n\t\t\t{\n\t\t\t\tthis.DOM.input.value = Loc.getMessage('EC_LOCATION_404');\n\t\t\t}\n\t\t}\n\n\t\tif (this.selectContol)\n\t\t{\n\t\t\tthis.selectContol.destroy();\n\t\t}\n\n\t\tthis.selectContol = new BX.Calendar.Controls.SelectInput({\n\t\t\tinput: this.DOM.input,\n\t\t\tvalues: menuItemList,\n\t\t\tvalueIndex: selectedIndex,\n\t\t\tzIndex: this.zIndex,\n\t\t\tdisabled: this.disabled,\n\t\t\tonChangeCallback: BX.delegate(function()\n\t\t\t{\n\t\t\t\tlet i, value = this.DOM.input.value;\n\t\t\t\tthis.value = {text: value};\n\t\t\t\tfor (i = 0; i < menuItemList.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (menuItemList[i].labelRaw === value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.value.type = menuItemList[i].type;\n\t\t\t\t\t\tthis.value.value = menuItemList[i].value;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isFunction(this.params.onChangeCallback))\n\t\t\t\t{\n\t\t\t\t\tthis.params.onChangeCallback();\n\t\t\t\t}\n\t\t\t}, this)\n\t\t});\n\t}\n\n\teditMeetingRooms()\n\t{\n\t\tlet params = {};\n\t\tif (this.params.getControlContentCallback)\n\t\t{\n\t\t\tparams.wrap = this.params.getControlContentCallback();\n\t\t}\n\n\t\tif (!params.wrap)\n\t\t{\n\t\t\tparams.wrap = this.showEditMeetingRooms();\n\t\t}\n\n\t\tthis.buildLocationEditControl(params);\n\t}\n\n\tshowEditMeetingRooms()\n\t{\n\t\tif (this.editDialog)\n\t\t{\n\t\t\tthis.editDialog.destroy();\n\t\t}\n\n\t\tthis.editDialogContent = Dom.create('DIV', {props: {className: 'bxec-location-wrap'}});\n\t\tthis.editDialog = new BX.PopupWindow(this.id + '_popup', null,\n\t\t\t{\n\t\t\t\toverlay: {opacity: 10},\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\toffsetTop: 0,\n\t\t\t\tdraggable: true,\n\t\t\t\tbindOnResize: false,\n\t\t\t\ttitleBar: Loc.getMessage('EC_MEETING_ROOM_LIST_TITLE'),\n\t\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\t\tclassName: 'bxc-popup-window',\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\t\t\t\tevents: {click : BX.delegate(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.saveValues();\n\t\t\t\t\t\t\t\tif (this.editDialog)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.editDialog.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this)\n\t\t\t\t\t\t}}),\n\n\t\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\t\tevents: {click : BX.delegate(function()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (this.editDialog)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.editDialog.close();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}, this)}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t\tcontent: this.editDialogContent,\n\t\t\t\tevents: {}\n\t\t\t});\n\n\t\tthis.editDialog.show();\n\t\treturn this.editDialogContent;\n\t}\n\n\tbuildLocationEditControl(params)\n\t{\n\t\tlet i;\n\n\t\tthis.locationEditControlShown = true;\n\t\tthis.editDialogWrap = params.wrap;\n\n\t\t// Display meeting room list\n\t\tthis.locationRoomList = [];\n\t\tthis.addNewButtonField = false;\n\t\tif (Type.isArray(Location.locationList))\n\t\t{\n\t\t\tLocation.locationList.forEach(function(room)\n\t\t\t{\n\t\t\t\tif (room.NAME !== '' && room.ID)\n\t\t\t\t{\n\t\t\t\t\tthis.locationRoomList.push({\n\t\t\t\t\t\tid: parseInt(room.ID),\n\t\t\t\t\t\tname: room.NAME\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tif (!this.locationRoomList.length)\n\t\t{\n\t\t\tthis.locationRoomList.push({\n\t\t\t\tid: 0,\n\t\t\t\tname: ''\n\t\t\t});\n\t\t}\n\n\t\tfor (i = 0; i < this.locationRoomList.length; i++)\n\t\t{\n\t\t\tthis.addRoomField(this.locationRoomList[i], params.wrap);\n\t\t}\n\n\t\t// Display add button\n\t\tthis.addNewButtonField = {\n\t\t\touterWrap: params.wrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-container-text'}}))\n\t\t};\n\t\tthis.addNewButtonField.innerWrap = this.addNewButtonField.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\tthis.addNewButtonField.innerCont = this.addNewButtonField.innerWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-text'},\n\t\t\thtml: '<span class=\"calendar-text-link\">' + Loc.getMessage('EC_MEETING_ROOM_ADD') + '</span>',\n\t\t\tevents: {\n\t\t\t\tclick: BX.delegate(function ()\n\t\t\t\t{\n\t\t\t\t\tlet lastItem = this.locationRoomList[this.locationRoomList.length - 1];\n\t\t\t\t\tif (lastItem.id || lastItem.deleted || BX.util.trim(lastItem.field.input.value))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.locationRoomList.push(this.addRoomField({id: 0}, params.wrap));\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\t\tparams.wrap.appendChild(this.addNewButtonField.outerWrap);\n\t}\n\n\taddRoomField(room)\n\t{\n\t\troom.field = {\n\t\t\touterWrap: this.editDialogWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-string'}}))\n\t\t};\n\t\troom.field.innerWrap = room.field.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\troom.field.innerWrap.style.paddingRight = '40px';\n\t\troom.field.input = room.field.innerWrap.appendChild(Dom.create('INPUT', {\n\t\t\tprops: {className: 'calendar-field calendar-field-string'},\n\t\t\tattrs: {\n\t\t\t\tvalue: room.name || '',\n\t\t\t\tplaceholder: Loc.getMessage('EC_MEETING_ROOM_PLACEHOLDER'),\n\t\t\t\ttype: 'text'\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tkeyup: BX.delegate(function(e)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(e.keyCode) === 13)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editRoom(room);\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\t\troom.field.delRoomEntry = room.field.innerWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: 'calendar-remove-filed'},\n\t\t\tevents: {\n\t\t\t\tclick: BX.delegate(function()\n\t\t\t\t{\n\t\t\t\t\tLocation.deleteField(room);\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}));\n\n\t\tif (this.addNewButtonField)\n\t\t{\n\t\t\tthis.editDialogWrap.appendChild(this.addNewButtonField.outerWrap);\n\t\t}\n\n\t\tif (!room.id)\n\t\t{\n\t\t\troom.field.input.focus();\n\t\t}\n\n\t\treturn room;\n\t}\n\n\teditRoom(room)\n\t{\n\t\tif (!this.locationEditControlShown)\n\t\t\treturn;\n\n\t\troom.field.input.value = BX.util.trim(room.field.input.value);\n\t\tif (!room.id)\n\t\t{\n\t\t\tif (room.field.input.value && BX.util.trim(room.field.input.value) !== BX.util.trim(room.name))\n\t\t\t{\n\t\t\t\troom.name = room.field.input.value;\n\t\t\t\tthis.locationRoomList.push(this.addRoomField({id: 0}));\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (BX.util.trim(room.field.input.value) !== (room.name))\n\t\t\t{\n\t\t\t\troom.name = room.field.input.value;\n\t\t\t\troom.changed = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteField(room)\n\t{\n\t\tBX.remove(room.field.outerWrap, true);\n\t\troom.deleted = true;\n\t\troom.changed = true;\n\t}\n\n\tsaveValues()\n\t{\n\t\tlet i, locationList = [];\n\t\tfor (i = 0; i < this.locationRoomList.length; i++)\n\t\t{\n\t\t\tif (this.locationRoomList[i].field && this.locationRoomList[i].field.input)\n\t\t\t{\n\t\t\t\tif (this.locationRoomList[i].name !== this.locationRoomList[i].field.input.value && this.locationRoomList[i].id)\n\t\t\t\t{\n\t\t\t\t\tthis.locationRoomList[i].changed = true;\n\t\t\t\t}\n\n\t\t\t\tthis.locationRoomList[i].name = this.locationRoomList[i].field.input.value;\n\t\t\t}\n\n\t\t\tif ((!this.locationRoomList[i].deleted && this.locationRoomList[i].name) || this.locationRoomList[i].id)\n\t\t\t{\n\t\t\t\tlocationList.push({\n\t\t\t\t\tid: this.locationRoomList[i].id || 0,\n\t\t\t\t\tname: this.locationRoomList[i].name || '',\n\t\t\t\t\tchanged: (this.locationRoomList[i].changed || !this.locationRoomList[i].id) ? 'Y' : 'N',\n\t\t\t\t\tdeleted: (this.locationRoomList[i].deleted || !this.locationRoomList[i].name) ? 'Y' : 'N'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.saveLocationList', {\n\t\t\tdata: {\n\t\t\t\tlocationList: locationList\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\tBX.delegate(function(response)\n\t\t\t\t{\n\t\t\t\t\tLocation.setLocationList(response.data.locationList);\n\t\t\t\t\tthis.setValues();\n\t\t\t\t}, this),\n\t\t\t\t// Failure\n\t\t\t\tBX.delegate(function (response)\n\t\t\t\t{\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}, this)\n\t\t\t);\n\t\tthis.locationEditControlShown = false;\n\t}\n\n\tgetTextValue(value)\n\t{\n\t\tif (!value)\n\t\t{\n\t\t\tvalue = this.value;\n\t\t}\n\n\t\tlet res = value.str || value.text || '';\n\t\tif (value && value.type === 'mr')\n\t\t{\n\t\t\tres = 'ECMR_' + value.value + (value.mrevid ? '_' + value.mrevid : '');\n\n\t\t}\n\t\telse if (value && value.type === 'calendar')\n\t\t{\n\t\t\tres = 'calendar_' + value.value + (value.room_event_id ? '_' + value.room_event_id : '');\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.value;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (Type.isPlainObject(value))\n\t\t{\n\t\t\tthis.value.text = value.text || '';\n\t\t\tthis.value.type = value.type || '';\n\t\t\tthis.value.value = value.value || '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value = Location.parseStringValue(value);\n\t\t}\n\n\t\tthis.setValues();\n\t}\n\n\t// parseLocation\n\tstatic parseStringValue(str)\n\t{\n\t\tif (!Type.isString(str))\n\t\t{\n\t\t\tstr = '';\n\t\t}\n\n\t\tlet\n\t\t\tres = {\n\t\t\t\ttype : false,\n\t\t\t\tvalue : false,\n\t\t\t\tstr : str\n\t\t\t};\n\n\t\tif (str.substr(0, 5) === 'ECMR_')\n\t\t{\n\t\t\tres.type = 'mr';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.mrid = parseInt(value[1]);\n\t\t\t\t}\n\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.mrevid = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (str.substr(0, 9) === 'calendar_')\n\t\t{\n\t\t\tres.type = 'calendar';\n\t\t\tlet value = str.split('_');\n\t\t\tif (value.length >= 2)\n\t\t\t{\n\t\t\t\tif (!isNaN(parseInt(value[1])) && parseInt(value[1]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.value = res.room_id = parseInt(value[1]);\n\t\t\t\t}\n\t\t\t\tif (!isNaN(parseInt(value[2])) && parseInt(value[2]) > 0)\n\t\t\t\t{\n\t\t\t\t\tres.room_event_id = parseInt(value[2]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tgetTextLocation(location)\n\t{\n\t\tlet\n\t\t\tvalue = Type.isPlainObject(location) ? location : Location.parseStringValue(location),\n\t\t\ti, str = value.str;\n\n\t\tif (Type.isArray(this.meetingRooms) && value.type === 'mr')\n\t\t{\n\t\t\tfor (i = 0; i < this.meetingRooms.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(this.meetingRooms[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = this.meetingRooms[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isArray(Location.locationList) && value.type === 'calendar')\n\t\t{\n\t\t\tfor (i = 0; i < Location.locationList.length; i++)\n\t\t\t{\n\t\t\t\tif (parseInt(value.value) === parseInt(Location.locationList[i].ID))\n\t\t\t\t{\n\t\t\t\t\tstr = Location.locationList[i].NAME;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn str;\n\t}\n\n\tstatic setLocationList(locationList)\n\t{\n\t\tif (Type.isArray(locationList))\n\t\t{\n\t\t\tLocation.locationList = locationList;\n\t\t}\n\t}\n\n\tstatic getLocationList()\n\t{\n\t\treturn Location.locationList;\n\t}\n\n\tstatic setMeetingRoomList(meetingRoomList)\n\t{\n\t\tif (Type.isArray(meetingRoomList))\n\t\t{\n\t\t\tLocation.meetingRoomList = meetingRoomList;\n\t\t}\n\t}\n\n\tstatic getMeetingRoomList()\n\t{\n\t\treturn Location.meetingRoomList;\n\t}\n}","import {Type, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\n\nexport class UserSelector\n{\n\tconstructor(params = {})\n\t{\n\t\tthis.params = params;\n\t\tthis.id = params.id || 'user_selector_' + Math.round(Math.random() * 1000000);\n\t\tthis.zIndex = params.zIndex || 3100;\n\n\t\tthis.DOM = {\n\t\t\twrapNode: params.wrapNode\n\t\t};\n\t\tthis.destinationInputName = params.inputName || 'EVENT_DESTINATION';\n\n\t\tif (Type.isArray(this.params.itemsSelected) && this.params.itemsSelected.length)\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(this.params.itemsSelected);\n\t\t}\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tlet id = this.id;\n\t\tthis.DOM.socnetDestinationWrap = this.DOM.wrapNode.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'event-grid-dest-wrap'},\n\t\t\tevents: {\n\t\t\t\tclick : (e) => {\n\t\t\t\t\tBX.SocNetLogDestination.openDialog(id);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationItems = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: {className: ''},\n\t\t\tevents: {\n\t\t\t\tclick : function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t{\n\t\t\t\t\t\ttop.BX.SocNetLogDestination.deleteItem(targ.getAttribute('data-item-id'), targ.getAttribute('data-item-type'), id);\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmouseover: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.addClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t},\n\t\t\t\tmouseout: function(e)\n\t\t\t\t{\n\t\t\t\t\tvar targ = e.target || e.srcElement;\n\t\t\t\t\tif (targ.className === 'feed-event-del-but') // Delete button\n\t\t\t\t\t\tBX.removeClass(targ.parentNode, 'event-grid-dest-hover');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.socnetDestinationInputWrap = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {props: {className: 'feed-add-destination-input-box'}}));\n\t\tthis.socnetDestinationInput = this.socnetDestinationInputWrap.appendChild(\n\t\t\tDom.create('INPUT', {\n\t\t\t\tprops: {id: id + '-inp', className: 'feed-add-destination-inp'},\n\t\t\t\tattrs: {value: '', type: 'text'},\n\t\t\t\tevents: {\n\t\t\t\t\tkeydown : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tkeyup : function(e){\n\t\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t\tthis.socnetDestinationLink = this.DOM.socnetDestinationWrap.appendChild(Dom.create('SPAN', {\n\t\t\thtml: this.params.addLinkMessage || BX.message('EC_DESTINATION_ADD_USERS'),\n\t\t\tprops: {id: id + '-link', className: 'feed-add-destination-link'},\n\t\t\tevents: {\n\t\t\t\tkeydown : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchBeforeHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp'\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tkeyup : function(e){\n\t\t\t\t\treturn top.BX.SocNetLogDestination.searchHandler(e, {\n\t\t\t\t\t\tformName: id,\n\t\t\t\t\t\tinputId: id + '-inp',\n\t\t\t\t\t\tlinkId: 'event-grid-dest-add-link',\n\t\t\t\t\t\tsendAjax: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\t// if (this.params.itemsSelected && !this.checkItemsSelected(\n\t\t// \tthis.params.items,\n\t\t// \tthis.params.itemsLast,\n\t\t// \tthis.params.itemsSelected,\n\t\t// \tBX.proxy(this.init, this)\n\t\t// ))\n\t\t// {\n\t\t// \treturn;\n\t\t// }\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tif (!this.socnetDestinationInput || !this.DOM.socnetDestinationWrap || !this.params.items)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.params.selectGroups === false)\n\t\t{\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t\tthis.params.items.sonetgroups = {};\n\t\t}\n\n\t\tif(this.params.selectUsers === false)\n\t\t{\n\t\t\tthis.params.items.users = {};\n\t\t\tthis.params.items.groups = {};\n\t\t\tthis.params.items.department = {};\n\t\t}\n\n\t\tBX.SocNetLogDestination.init({\n\t\t\tname : this.id,\n\t\t\tsearchInput : this.socnetDestinationInput,\n\t\t\textranetUser :  false,\n\t\t\tuserSearchArea: 'I',\n\t\t\tbindMainPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tbindSearchPopup : {\n\t\t\t\tnode : this.DOM.socnetDestinationWrap,\n\t\t\t\toffsetTop : '5px',\n\t\t\t\toffsetLeft: '15px'\n\t\t\t},\n\t\t\tcallback : {\n\t\t\t\tselect : this.selectCallback.bind(this),\n\t\t\t\tunSelect : this.unSelectCallback.bind(this),\n\t\t\t\topenDialog : this.openDialogCallback.bind(this),\n\t\t\t\tcloseDialog : this.closeDialogCallback.bind(this),\n\t\t\t\topenSearch : this.openDialogCallback.bind(this),\n\t\t\t\tcloseSearch : ()=>{this.closeDialogCallback(true);}\n\t\t\t},\n\t\t\titems : this.params.items,\n\t\t\titemsLast : this.params.itemsLast,\n\t\t\titemsSelected : this.params.itemsSelected,\n\t\t\tdepartmentSelectDisable: this.params.selectGroups === false\n\t\t});\n\t}\n\n\t// checkItemsSelected(items, itemsLast, selected, callback)\n\t// {\n\t// \tlet codes = [], code;\n\t// \tfor (code in selected)\n\t// \t{\n\t// \t\tif (selected.hasOwnProperty(code))\n\t// \t\t{\n\t// \t\t\tif (selected[code] === 'users' && !items.users[code])\n\t// \t\t\t{\n\t// \t\t\t\tcodes.push(code);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t//\n\t// \tif (codes.length > 0)\n\t// \t{\n\t// \t\tlet loader = this.DOM.socnetDestinationWrap.appendChild(BX.adjust(Util.getLoader(40), {style: {height: '50px'}}));\n\t//\n\t//\n\t//\n\t//\n\t//\n\t// \t\tthis.calendar.request({\n\t// \t\t\ttype: 'get',\n\t// \t\t\tdata: {\n\t// \t\t\t\taction: 'get_destination_items',\n\t// \t\t\t\tcodes: codes\n\t// \t\t\t},\n\t// \t\t\thandler: BX.delegate(function(response)\n\t// \t\t\t{\n\t// \t\t\t\tif (loader)\n\t// \t\t\t\t{\n\t// \t\t\t\t\tDom.remove(loader);\n\t// \t\t\t\t}\n\t//\n\t// \t\t\t\tthis.params.items = this.calendar.util.getSocnetDestinationConfig('items');\n\t// \t\t\t\tthis.params.itemsLast = this.calendar.util.getSocnetDestinationConfig('itemsLast');\n\t//\n\t// \t\t\t\tif (Type.isFunction(callback))\n\t// \t\t\t\t{\n\t// \t\t\t\t\tcallback();\n\t// \t\t\t\t}\n\t// \t\t\t}, this)\n\t// \t\t});\n\t// \t\treturn false;\n\t// \t}\n\t//\n\t// \treturn true;\n\t// }\n\n\tcloseAll()\n\t{\n\t\tif (top.BX.SocNetLogDestination.isOpenDialog())\n\t\t{\n\t\t\ttop.BX.SocNetLogDestination.closeDialog();\n\t\t}\n\t\ttop.BX.SocNetLogDestination.closeSearch();\n\t}\n\n\tselectCallback(item, type)\n\t{\n\t\tvar\n\t\t\ttype1 = type,\n\t\t\tprefix = 'S';\n\n\t\tif (type === 'sonetgroups')\n\t\t{\n\t\t\tprefix = 'SG';\n\t\t}\n\t\telse if (type === 'groups')\n\t\t{\n\t\t\tprefix = 'UA';\n\t\t\ttype1 = 'all-users';\n\t\t}\n\t\telse if (type === 'users')\n\t\t{\n\t\t\tprefix = 'U';\n\t\t}\n\t\telse if (type === 'department')\n\t\t{\n\t\t\tprefix = 'DR';\n\t\t}\n\n\t\tthis.socnetDestinationItems.appendChild(\n\t\t\tDom.create(\"span\", { attrs : {'data-id' : item.id }, props : {className : \"event-grid-dest event-grid-dest-\" + type1 }, children: [\n\t\t\t\t\tDom.create(\"input\", { attrs : {type : 'hidden', name : this.destinationInputName + '[' + prefix + '][]', value : item.id }}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"event-grid-dest-text\" }, html : item.name}),\n\t\t\t\t\tDom.create(\"span\", { props : {className : \"feed-event-del-but\"}, attrs: {'data-item-id': item.id, 'data-item-type': type}})\n\t\t\t\t]})\n\t\t);\n\n\t\tBX.onCustomEvent('OnDestinationAddNewItem', [item]);\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\tunSelectCallback(item, type, search)\n\t{\n\t\tvar elements = BX.findChildren(this.socnetDestinationItems, {attribute: {'data-id': item.id}}, true);\n\t\tif (elements != null)\n\t\t{\n\t\t\tfor (var j = 0; j < elements.length; j++)\n\t\t\t{\n\t\t\t\tBX.remove(elements[j]);\n\t\t\t}\n\t\t}\n\n\t\tBX.onCustomEvent('OnDestinationUnselect');\n\t\tthis.socnetDestinationInput.value = '';\n\t\tthis.socnetDestinationLink.innerHTML = this.params.addLinkMessage || (top.BX.SocNetLogDestination.getSelectedCount(this.id) > 0 ? BX.message('EC_DESTINATION_ADD_MORE') : BX.message('EC_DESTINATION_ADD_USERS'));\n\t}\n\n\topenDialogCallback()\n\t{\n\t\tif (top.BX.SocNetLogDestination.popupWindow)\n\t\t{\n\t\t\t// Fix zIndex for slider issues\n\t\t\ttop.BX.SocNetLogDestination.popupWindow.params.zIndex = this.zIndex;\n\t\t\ttop.BX.SocNetLogDestination.popupWindow.popupContainer.style.zIndex = this.zIndex;\n\t\t}\n\n\t\tif (top.BX.SocNetLogDestination.popupSearchWindow)\n\t\t{\n\t\t\t// Fix zIndex for slider issues\n\t\t\ttop.BX.SocNetLogDestination.popupSearchWindow.params.zIndex = this.zIndex;\n\t\t\ttop.BX.SocNetLogDestination.popupSearchWindow.popupContainer.style.zIndex = this.zIndex;\n\t\t}\n\n\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'inline-block');\n\t\tBX.style(this.socnetDestinationLink, 'display', 'none');\n\t\tBX.focus(this.socnetDestinationInput);\n\t}\n\n\tcloseDialogCallback(cleanInputValue)\n\t{\n\t\tif (!top.BX.SocNetLogDestination.isOpenSearch() && this.socnetDestinationInput.value.length <= 0)\n\t\t{\n\t\t\tBX.style(this.socnetDestinationInputWrap, 'display', 'none');\n\t\t\tBX.style(this.socnetDestinationLink, 'display', 'inline-block');\n\t\t\tif (cleanInputValue === true)\n\t\t\t\tthis.socnetDestinationInput.value = '';\n\n\t\t\t// Disable backspace\n\t\t\tif (top.BX.SocNetLogDestination.backspaceDisable || top.BX.SocNetLogDestination.backspaceDisable != null)\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\n\t\t\tBX.bind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable = function(e)\n\t\t\t{\n\t\t\t\tif (e.keyCode === 8)\n\t\t\t\t{\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tBX.unbind(window, 'keydown', top.BX.SocNetLogDestination.backspaceDisable);\n\t\t\t\ttop.BX.SocNetLogDestination.backspaceDisable = null;\n\t\t\t}, 5000);\n\t\t}\n\t}\n\n\tgetCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tcodes = [], i;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tcodes.push(inputsList[i].value);\n\t\t}\n\t\treturn codes;\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\tvar\n\t\t\tinputsList = this.socnetDestinationItems.getElementsByTagName('INPUT'),\n\t\t\tvalues = [],\n\t\t\ti, code;\n\n\t\tfor (i = 0; i < inputsList.length; i++)\n\t\t{\n\t\t\tvalues.push(inputsList[i].value);\n\t\t}\n\n\t\treturn this.convertAttendeesCodes(values);\n\t}\n\n\tconvertAttendeesCodes(values)\n\t{\n\t\tlet attendeesCodes = {};\n\t\tif (Type.isArray(values))\n\t\t{\n\t\t\tvalues.forEach(function(code)\n\t\t\t{\n\t\t\t\tif (code.substr(0, 2) === 'DR')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"department\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'UA')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"groups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 2) === 'SG')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"sonetgroups\";\n\t\t\t\t}\n\t\t\t\telse if (code.substr(0, 1) === 'U')\n\t\t\t\t{\n\t\t\t\t\tattendeesCodes[code] = \"users\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn attendeesCodes;\n\t}\n\n\tgetAttendeesCodesList(codes)\n\t{\n\t\tlet result = [];\n\t\tif (!codes)\n\t\t\tcodes = this.getAttendeesCodes();\n\t\tfor (let i in codes)\n\t\t{\n\t\t\tif (codes.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tresult.push(i);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tif (this.socnetDestinationItems)\n\t\t{\n\t\t\tDom.clean(this.socnetDestinationItems);\n\t\t}\n\n\t\tif (Type.isArray(value))\n\t\t{\n\t\t\tthis.params.itemsSelected = this.convertAttendeesCodes(value);\n\t\t}\n\t\tthis.init();\n\t}\n}","import {Util} from \"calendar.util\";\n\nexport class ColorSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.defaultColors = Util.getDefaultColorList();\n\t\tthis.colors = [];\n\t\tthis.zIndex = 3100;\n\t\tthis.DOM = {\n\t\t\twrap: params.wrap\n\t\t};\n\t\tthis.create();\n\t\tthis.bindEventHandlers();\n\t}\n\n\tcreate()\n\t{\n\t\tfor (let i = 0; i < this.defaultColors.length; i++)\n\t\t{\n\t\t\tthis.colors.push(\n\t\t\t{\n\t\t\t\tcolor: this.defaultColors[i],\n\t\t\t\tnode: this.DOM.wrap.appendChild(BX.create('LI',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tattrs: {'data-bx-calendar-color': this.defaultColors[i]},\n\t\t\t\t\tstyle: {backgroundColor: this.defaultColors[i]},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}))\n\t\t\t});\n\t\t}\n\n\t\tthis.DOM.customColorNode = this.DOM.wrap.appendChild(BX.create('LI',\n\t\t\t{\n\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\tstyle:\n\t\t\t\t{\n\t\t\t\t\tbackgroundColor: 'transparent',\n\t\t\t\t\twidth: 0\n\t\t\t\t},\n\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t}\n\t\t));\n\n\t\tthis.DOM.customColorLink = this.DOM.wrap.appendChild(BX.create('LI', {\n\t\t\tprops: {className: 'calendar-field-colorpicker-color-item-more'},\n\t\t\thtml: '<span class=\"calendar-field-colorpicker-color-item-more-link\">' + BX.message('EC_COLOR') + '</span>',\n\t\t\tevents: {click: BX.delegate(function(){\n\t\t\t\t\tif (!this.colorPickerPopup)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorPickerPopup = new BX.ColorPicker({\n\t\t\t\t\t\t\tbindElement: this.DOM.customColorLink,\n\t\t\t\t\t\t\tonColorSelected: BX.proxy(this.setValue, this),\n\t\t\t\t\t\t\tpopupOptions: {zIndex: this.zIndex}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tthis.colorPickerPopup.open();\n\t\t\t\t}, this)}\n\t\t}));\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tBX.bind(this.DOM.wrap, 'click', BX.proxy(this.handleColorClick, this));\n\t}\n\n\thandleColorClick(e)\n\t{\n\t\tlet target = Util.findTargetNode(e.target || e.srcElement, this.DOM.wrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tlet value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tthis.setValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(color)\n\t{\n\t\tthis.activeColor = color;\n\n\t\tif (this.DOM.activeColorNode)\n\t\t{\n\t\t\tBX.removeClass(this.DOM.activeColorNode, 'active');\n\t\t}\n\n\t\tif (!BX.util.in_array(this.activeColor, this.defaultColors) && this.activeColor)\n\t\t{\n\t\t\tthis.DOM.customColorNode.style.backgroundColor = this.activeColor;\n\t\t\tthis.DOM.customColorNode.style.width = '';\n\n\t\t\tthis.DOM.activeColorNode = this.DOM.customColorNode;\n\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t}\n\n\t\tlet i;\n\t\tfor (i = 0; i < this.colors.length; i++)\n\t\t{\n\t\t\tif (this.colors[i].color === this.activeColor)\n\t\t\t{\n\t\t\t\tthis.DOM.activeColorNode = this.colors[i].node;\n\t\t\t\tBX.addClass(this.DOM.activeColorNode, 'active');\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.activeColor;\n\t}\n}","import {Type, Dom, Event} from \"main.core\";\n\nexport class SectionSelector\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'section-select-' + Math.round(Math.random() * 1000000);\n\t\tthis.sectionList = params.sectionList;\n\t\tthis.sectionGroupList = params.sectionGroupList;\n\t\tthis.selectCallback = params.selectCallback;\n\t\tthis.openPopupCallback = params.openPopupCallback;\n\t\tthis.closePopupCallback = params.closePopupCallback;\n\t\tthis.getCurrentSection = params.getCurrentSection;\n\n\t\tthis.defaultCalendarType = params.defaultCalendarType;\n\t\tthis.defaultOwnerId = parseInt(params.defaultOwnerId);\n\n\t\tthis.zIndex = params.zIndex || 3100;\n\t\tthis.mode = params.mode;\n\t\tthis.DOM = {\n\t\t\touterWrap: params.outerWrap\n\t\t};\n\n\t\tthis.create();\n\t\tthis.initEventHandlers();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.select = this.DOM.outerWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-field calendar-field-select' + (this.mode === 'compact' ? ' calendar-field-tiny' : '')}\n\t\t}));\n\n\t\tthis.DOM.innerValue = this.DOM.select.appendChild(Dom.create('DIV', {\n\t\t\tprops: {className: 'calendar-field-select-icon'},\n\t\t\tstyle: {backgroundColor : this.getCurrentColor()}\n\t\t}));\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.DOM.selectInnerText = this.DOM.select.appendChild(Dom.create('SPAN', {text: this.getCurrentTitle()}));\n\t\t}\n\t}\n\n\tinitEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.select, 'click', BX.delegate(this.openPopup, this));\n\t}\n\n\topenPopup()\n\t{\n\t\tif (this.sectionMenu && this.sectionMenu.popupWindow && this.sectionMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.sectionMenu.close();\n\t\t}\n\n\t\tlet\n\t\t\tsubmenuClass = 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label',\n\t\t\ti, menuItems = [], icon;\n\n\t\tif (Type.isArray(this.sectionGroupList))\n\t\t{\n\t\t\tthis.sectionGroupList.forEach(function(sectionGroup)\n\t\t\t{\n\t\t\t\tlet filteredList = [], i;\n\t\t\t\tif (sectionGroup.belongsToView)\n\t\t\t\t{\n\t\t\t\t\tfilteredList = this.sectionList.filter(this.sectionBelongsToView, this);\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'user')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = this.sectionList.filter(function(section){\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'user' && SectionSelector.getSectionOwner(section) === sectionGroup.ownerId;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if (sectionGroup.type === 'company')\n\t\t\t\t{\n\t\t\t\t\tfilteredList = this.sectionList.filter(function(section){\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === 'company_calendar' || SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfilteredList = this.sectionList.filter(function(section){\n\t\t\t\t\t\treturn SectionSelector.getSectionType(section) === sectionGroup.type;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (filteredList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: '<span>' + sectionGroup.title + '</span>',\n\t\t\t\t\t\tclassName: submenuClass\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (i = 0; i < filteredList.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenuItems.push(this.getMenuItem(filteredList[i]));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tfor (i = 0; i < this.sectionList.length; i++)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.getMenuItem(this.sectionList[i]));\n\t\t\t}\n\t\t}\n\n\t\tthis.sectionMenu = BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.select,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: this.mode === 'compact' ? 40 : 0,\n\t\t\t\tangle: this.mode === 'compact'\n\t\t\t}\n\t\t);\n\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflow = \"auto\";\n\t\tthis.sectionMenu.popupWindow.contentContainer.style.maxHeight = \"400px\";\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.sectionMenu.popupWindow.setWidth(this.DOM.select.offsetWidth - 2);\n\t\t\tthis.sectionMenu.popupWindow.contentContainer.style.overflowX = \"hidden\";\n\t\t}\n\n\t\tthis.sectionMenu.show();\n\n\t\t// Paint round icons for section menu\n\t\tfor (i = 0; i < this.sectionMenu.menuItems.length; i++)\n\t\t{\n\t\t\tif (this.sectionMenu.menuItems[i].layout.item)\n\t\t\t{\n\t\t\t\ticon = this.sectionMenu.menuItems[i].layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tif (icon)\n\t\t\t\t{\n\t\t\t\t\ticon.style.backgroundColor = this.sectionMenu.menuItems[i].color;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tBX.addClass(this.DOM.select, 'active');\n\n\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t{\n\t\t\tthis.openPopupCallback(this);\n\t\t}\n\n\t\tBX.addCustomEvent(this.sectionMenu.popupWindow, 'onPopupClose', BX.delegate(function()\n\t\t{\n\t\t\tif (Type.isFunction(this.openPopupCallback))\n\t\t\t{\n\t\t\t\tthis.closePopupCallback();\n\t\t\t}\n\t\t\tBX.removeClass(this.DOM.select, 'active');\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.sectionMenu = null;\n\t\t}, this));\n\t}\n\n\tgetCurrentColor()\n\t{\n\t\treturn (this.getCurrentSection() || {}).color || false;\n\t}\n\n\tgetCurrentTitle()\n\t{\n\t\treturn (this.getCurrentSection() || {}).name || '';\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.sectionMenu;\n\t}\n\n\tgetMenuItem(sectionItem)\n\t{\n\t\tlet _this = this;\n\t\treturn {\n\t\t\ttext: BX.util.htmlspecialchars(sectionItem.name || sectionItem.NAME),\n\t\t\tcolor: sectionItem.color || sectionItem.COLOR,\n\t\t\tclassName: 'calendar-add-popup-section-menu-item',\n\t\t\tonclick: (function (section)\n\t\t\t{\n\t\t\t\treturn function ()\n\t\t\t\t{\n\t\t\t\t\t_this.DOM.innerValue.style.backgroundColor = section.color || sectionItem.COLOR;\n\t\t\t\t\tif (_this.DOM.selectInnerText)\n\t\t\t\t\t{\n\t\t\t\t\t\t_this.DOM.selectInnerText.innerHTML = BX.util.htmlspecialchars(section.name || section.NAME);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isFunction(_this.selectCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tsection.color = section.color || sectionItem.COLOR;\n\t\t\t\t\t\tsection.id = parseInt(section.id || sectionItem.ID);\n\t\t\t\t\t\t_this.selectCallback(section);\n\t\t\t\t\t}\n\t\t\t\t\t_this.sectionMenu.close();\n\t\t\t\t}\n\t\t\t})(sectionItem)\n\t\t}\n\t}\n\n\tsectionBelongsToView(section)\n\t{\n\t\treturn SectionSelector.getSectionType(section) === this.defaultCalendarType && SectionSelector.getSectionOwner(section) === this.defaultOwnerId;\n\t}\n\n\tstatic getSectionType(section)\n\t{\n\t\treturn section.type || section.CAL_TYPE;\n\t}\n\n\tstatic getSectionOwner(section)\n\t{\n\t\treturn parseInt(section.OWNER_ID || section.data.OWNER_ID)\n\t}\n\n\tupdateValue()\n\t{\n\t\tthis.DOM.innerValue.style.backgroundColor = this.getCurrentColor();\n\n\t\tif (this.mode === 'full')\n\t\t{\n\t\t\tthis.DOM.select.appendChild(Dom.adjust(this.DOM.selectInnerText, {text: this.getCurrentTitle()}));\n\t\t}\n\t}\n}","import {Util} from \"calendar.util\";\n\nexport class RepeatSelector\n{\n\tconstructor(params)\n\t{\n\t\tlet formElements =  params.rruleType.form.elements;\n\n\t\tthis.getDate = params.getDate;\n\t\tthis.DOM = {\n\t\t\tformElements: formElements,\n\t\t\twrap: params.wrap,\n\t\t\trruleType: params.rruleType,\n\t\t\tinterval: formElements['EVENT_RRULE[INTERVAL]'],\n\t\t\trruleEndsOn: {\n\t\t\t\tnever: formElements['rrule_endson'][0],\n\t\t\t\tcount: formElements['rrule_endson'][1],\n\t\t\t\tuntil: formElements['rrule_endson'][2],\n\t\t\t},\n\t\t\tcount: formElements['EVENT_RRULE[COUNT]'],\n\t\t\tuntil: formElements['EVENT_RRULE[UNTIL]'],\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tBX.bind(this.DOM.rruleType, 'change', BX.delegate(function()\n\t\t{\n\t\t\tthis.changeType(this.DOM.rruleType.value);\n\t\t}, this));\n\n\t\tBX.bind(this.DOM.until, 'click', BX.proxy(function()\n\t\t{\n\t\t\tBX.calendar({node: this.DOM.until, field: this.DOM.until, bTime: false});\n\t\t\tBX.focus(this.DOM.until);\n\t\t\tthis.DOM.rruleEndsOn.until.checked = true;\n\t\t}, this));\n\n\t\tBX.bind(this.DOM.count, 'click', BX.proxy(function()\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = true;\n\t\t}, this));\n\t}\n\n\tchangeType(type)\n\t{\n\t\tthis.DOM.rruleType.value = type ? type.toUpperCase() : 'NONE';\n\t\tlet rruleType = this.DOM.rruleType.value.toLowerCase();\n\t\tthis.DOM.wrap.className = 'calendar-rrule-type-' + rruleType;\n\n\t\tif (rruleType === 'weekly' && BX.type.isFunction(this.getDate))\n\t\t{\n\t\t\tlet fromDate = this.getDate();\n\t\t\tif (BX.type.isDate(fromDate))\n\t\t\t{\n\t\t\t\tlet day = Util.getWeekDayByInd(fromDate.getDay());\n\t\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t\t{\n\t\t\t\t\tinput.checked = input.checked || input.value === day;\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValue(rrule = {})\n\t{\n\t\tthis.changeType(rrule.FREQ);\n\t\tthis.DOM.interval.value = rrule.INTERVAL || 1;\n\t\tif (rrule.COUNT)\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.count.checked = 'checked';\n\t\t\tthis.DOM.count.value = rrule.COUNT;\n\t\t}\n\t\telse if(rrule['~UNTIL'])\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.until.checked = 'checked';\n\t\t\tthis.DOM.until.value = rrule['~UNTIL'];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.rruleEndsOn.never.checked = 'checked';\n\t\t}\n\n\t\tif (BX.type.isPlainObject(rrule.BYDAY))\n\t\t{\n\t\t\tthis.DOM.formElements['EVENT_RRULE[BYDAY][]'].forEach(function(input)\n\t\t\t{\n\t\t\t\tinput.checked = rrule.BYDAY.hasOwnProperty(input.value);\n\t\t\t}, this)\n\t\t}\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.DOM.rruleType.value.toLowerCase();\n\t}\n}","export class SelectInput\n{\n\tconstructor(params)\n\t{\n\t\tthis.id = params.id || 'bx-select-input-' + Math.round(Math.random() * 1000000);\n\t\tthis.values = params.values || false;\n\t\tthis.input = params.input;\n\n\t\tthis.defaultValue = params.defaultValue || '';\n\t\tthis.openTitle = params.openTitle || '';\n\t\tthis.className = params.className || '';\n\n\t\tthis.onChangeCallback = params.onChangeCallback || null;\n\t\tthis.zIndex = params.zIndex || 1200;\n\t\tthis.disabled = params.disabled;\n\n\t\tthis.setValue({\n\t\t\tvalue: params.value,\n\t\t\tvalueIndex: params.valueIndex\n\t\t});\n\n\t\tthis.curInd = false;\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.bind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.bind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tif (this.values)\n\t\t{\n\t\t\tBX.bind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\t\tBX.bind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\t\tBX.bind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\t\tBX.bind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\t\t}\n\t}\n\n\tsetValue(params)\n\t{\n\t\tthis.currentValue = {value: params.value};\n\t\tthis.currentValueIndex = params.valueIndex;\n\t\tif (this.currentValueIndex !== undefined && this.values[this.currentValueIndex])\n\t\t{\n\t\t\tthis.input.value = this.values[this.currentValueIndex].label;\n\t\t}\n\t}\n\n\tgetInputValue()\n\t{\n\t\treturn this.input.value;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.shown || this.disabled)\n\t\t\treturn;\n\n\t\tlet\n\t\t\tind = 0,\n\t\t\tj = 0,\n\t\t\tmenuItems = [],\n\t\t\ti, _this = this;\n\n\t\tfor (i = 0; i < this.values.length; i++)\n\t\t{\n\t\t\tif (this.values[i].delimiter)\n\t\t\t{\n\t\t\t\tmenuItems.push(this.values[i]);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (this.currentValue && this.values[i]\n\t\t\t\t\t&& this.values[i].value === this.currentValue.value)\n\t\t\t\t{\n\t\t\t\t\tind = j;\n\t\t\t\t}\n\n\t\t\t\tmenuItems.push({\n\t\t\t\t\tid: this.values[i].value,\n\t\t\t\t\ttext: this.values[i].label,\n\t\t\t\t\tonclick: this.values[i].callback || (function (value, label)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t_this.input.value = label;\n\t\t\t\t\t\t\t_this.popupMenu.close();\n\t\t\t\t\t\t\t_this.onChange();\n\t\t\t\t\t\t}\n\t\t\t\t\t})(this.values[i].value, this.values[i].labelRaw || this.values[i].label)\n\t\t\t\t});\n\t\t\t\tj++;\n\t\t\t}\n\t\t}\n\n\t\tthis.popupMenu = BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.input,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: -1\n\t\t\t}\n\t\t);\n\t\tthis.popupMenu.popupWindow.setWidth(this.input.offsetWidth + 2);\n\n\t\tlet menuContainer = this.popupMenu.layout.menuContainer;\n\t\tBX.addClass(this.popupMenu.layout.menuContainer, 'calendar-select-popup');\n\t\tthis.popupMenu.show();\n\n\t\tlet menuItem = this.popupMenu.menuItems[ind];\n\n\t\tif (menuItem && menuItem.layout)\n\t\t{\n\t\t\tmenuContainer.scrollTop = menuItem.layout.item.offsetTop - menuItem.layout.item.offsetHeight;\n\t\t}\n\n\t\tBX.addCustomEvent(this.popupMenu.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.id);\n\t\t\tthis.shown = false;\n\t\t\tthis.popupMenu = null;\n\t\t}.bind(this));\n\n\t\tthis.input.select();\n\n\t\tthis.shown = true;\n\t}\n\n\tclosePopup()\n\t{\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n\n\tonFocus()\n\t{\n\t\tsetTimeout(function(){\n\t\t\tif (!this.shown)\n\t\t\t{\n\t\t\t\tthis.showPopup();\n\t\t\t}\n\t\t}.bind(this), 200);\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.shown)\n\t\t{\n\t\t\tthis.closePopup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showPopup();\n\t\t}\n\t}\n\n\tonBlur()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 200);\n\t}\n\n\tonKeyup()\n\t{\n\t\tsetTimeout(BX.delegate(this.closePopup, this), 50);\n\t}\n\n\tonChange()\n\t{\n\t\tvar val = this.input.value;\n\t\tBX.onCustomEvent(this, 'onSelectInputChanged', [this, val]);\n\t\tif (BX.type.isFunction(this.onChangeCallback))\n\t\t{\n\t\t\tthis.onChangeCallback({value: val});\n\t\t}\n\t}\n\n\tdestroy()\n\t{\n\t\tif (this.onChangeCallback)\n\t\t{\n\t\t\tBX.unbind(this.input, 'change', this.onChangeCallback);\n\t\t\tBX.unbind(this.input, 'keyup', this.onChangeCallback);\n\t\t}\n\n\t\tBX.unbind(this.input, 'click', BX.proxy(this.onClick, this));\n\t\tBX.unbind(this.input, 'focus', BX.proxy(this.onFocus, this));\n\t\tBX.unbind(this.input, 'blur', BX.proxy(this.onBlur, this));\n\t\tBX.unbind(this.input, 'keyup', BX.proxy(this.onKeyup, this));\n\n\t\tif (this.popupMenu)\n\t\t{\n\t\t\tthis.popupMenu.close();\n\t\t}\n\t\tBX.PopupMenu.destroy(this.id);\n\t\tthis.popupMenu = null;\n\t\tthis.shown = false;\n\t}\n}\n\n\n\n","export class PopupDialog {\n\tconstructor(params = {})\n\t{\n\t\tthis.id = params.id || 'popup-dialog-' + Math.random();\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.DOM = {};\n\t\tthis.title = '';\n\t}\n\n\tcreate()\n\t{\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: this.getTitle(),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: this.getButtons(),\n\t\t\tcontent: this.getContent(),\n\t\t\tevents: {}\n\t\t});\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\tthis.buttons = [];\n\t\treturn this.buttons;\n\t}\n\n\tshow(params)\n\t{\n\t\tif (!this.dialog)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Type, Dom, Event, Tag, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {MenuManager} from 'main.popup';\n\nexport class ViewSelector extends EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\n\t\tif (params.currentViewMode)\n\t\t{\n\t\t\tthis.setViewMode(params.currentViewMode);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-selector\"></div>`;\n\t\tthis.DOM.selectorText = Tag.render`<div class=\"calendar-view-switcher-text\"></div>`;\n\t\tthis.DOM.selectorTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-inner\"></div>`);\n\t\tthis.DOM.wrap.appendChild(this.DOM.selectorText);\n\t\tthis.DOM.wrap.appendChild(Tag.render`<div class=\"calendar-view-switcher-dropdown\"></div>`);\n\t\tEvent.bind(this.DOM.wrap, 'click', this.showPopup.bind(this));\n\t\tthis.DOM.viewModeTextInner = this.DOM.selectorText.appendChild(Tag.render`<div class=\"calendar-view-switcher-text-mode-inner\" style=\"display: none;\"></div>`);\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tDom.adjust(this.DOM.selectorTextInner, {text: this.currentValue.text});\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\tif (this.currentViewMode)\n\t\t\t{\n\t\t\t\tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t}\n\t\t\tthis.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach(function(view)\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\t//text: view.text,\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t});\n\t\t\t}\n\t\t}, this);\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = MenuManager.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.selectorText,\n\t\t\tthis.getMenuItems(),\n\t\t\t{\n\t\t\t\tclassName: \"calendar-view-switcher-popup\",\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: -3,\n\t\t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\t}\n\n\tclosePopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}\n\n\n\n","import {Type, Dom, Event, Tag, Loc} from 'main.core';\n//import {ViewSelector} from './viewselector';\nimport {EventEmitter} from 'main.core.events';\n\nexport class LineViewSelector extends  EventEmitter\n{\n\tviews = [];\n\tcreated = false;\n\tcurrentValue = null;\n\tcurrentViewMode = null;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.LineViewSelector');\n\n\t\tif (Type.isArray(params.views))\n\t\t{\n\t\t\tthis.views = params.views;\n\t\t}\n\n\t\tthis.viewsMap = new WeakMap();\n\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'view-selector-' + Math.round(Math.random() * 10000);\n\t\tthis.create();\n\n\t\tif (params.currentView)\n\t\t{\n\t\t\tthis.setValue(params.currentView);\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-view-switcher-list\"></div>`;\n\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tthis.viewsMap.set(view, {\n\t\t\t\t\twrap: this.DOM.wrap.appendChild(Tag.render`<span \n\t\t\t\t\t\tclass=\"calendar-view-switcher-list-item\"\n\t\t\t\t\t\tonclick=\"${()=>{\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}}\"\n\t\t\t\t\t>${view.text}</span>`)\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tthis.created = true;\n\t}\n\n\tgetOuterWrap()\n\t{\n\t\tif (!this.created)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.currentValue = this.views.find(function(view)\n\t\t{\n\t\t\treturn value.name === view.name;\n\t\t}, this);\n\n\t\tif (this.currentValue)\n\t\t{\n\t\t\tlet viewData = this.viewsMap.get(this.currentValue);\n\t\t\tlet currentActiveWrap = this.DOM.wrap.querySelector('.calendar-view-switcher-list-item-active');\n\t\t\tif (Type.isDomNode(currentActiveWrap))\n\t\t\t{\n\t\t\t\tDom.removeClass(currentActiveWrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(viewData.wrap))\n\t\t\t{\n\t\t\t\tDom.addClass(viewData.wrap, 'calendar-view-switcher-list-item-active');\n\t\t\t}\n\t\t}\n\t}\n\n\tsetViewMode(value)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tthis.currentViewMode = this.views.find(function(view)\n\t\t\t{\n\t\t\t\treturn value === view.name && view.type === 'additional';\n\t\t\t}, this);\n\n\t\t\t// if (this.currentViewMode)\n\t\t\t// {\n\t\t\t// \tDom.adjust(this.DOM.viewModeTextInner, {text: '(' + this.currentViewMode.text + ')'});\n\t\t\t// }\n\t\t\t//this.DOM.viewModeTextInner.style.display = this.currentViewMode ? '' : 'block';\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tlet menuItems = [];\n\t\tthis.views.forEach((view) =>\n\t\t{\n\t\t\tif (view.type === 'base')\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: '<span>' + view.text + '</span>' + (view.hotkey ? '<span class=\"calendar-item-hotkey\">' + view.hotkey + '</span>' : ''),\n\t\t\t\t\tclassName: this.currentValue.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (menuItems.length < this.views.length)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: '<span>' + Loc.getMessage('EC_VIEW_MODE_SHOW_BY') + '</span>',\n\t\t\t\tclassName: 'main-buttons-submenu-separator main-buttons-submenu-item main-buttons-hidden-label'\n\t\t\t});\n\n\t\t\tthis.views.forEach(function(view)\n\t\t\t{\n\t\t\t\tif (view.type === 'additional')\n\t\t\t\t{\n\t\t\t\t\tmenuItems.push({\n\t\t\t\t\t\ttext: view.text,\n\t\t\t\t\t\tclassName: this.currentViewMode.name === view.name ? 'menu-popup-item-accept' : ' ',\n\t\t\t\t\t\tonclick: function(){\n\t\t\t\t\t\t\tthis.emit('onChange', {\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttype: view.type,\n\t\t\t\t\t\t\t\tdataset: view.dataset\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.menuPopup.close();\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\t// showPopup()\n\t// {\n\t// \tthis.closePopup();\n\t//\n\t// \tthis.menuPopup = MenuManager.create(\n\t// \t\tthis.popupId,\n\t// \t\tthis.DOM.selectorText,\n\t// \t\tthis.getMenuItems(),\n\t// \t\t{\n\t// \t\t\tclassName: \"calendar-view-switcher-popup\",\n\t// \t\t\tcloseByEsc : true,\n\t// \t\t\tautoHide : true,\n\t// \t\t\tzIndex: this.zIndex,\n\t// \t\t\toffsetTop: -3,\n\t// \t\t\toffsetLeft: this.DOM.selectorText.offsetWidth - 6,\n\t// \t\t\tangle: true,\n\t// \t\t\tcacheable: false\n\t// \t\t}\n\t// \t);\n\t//\n\t// \tthis.menuPopup.show();\n\t// }\n\t//\n\t// closePopup()\n\t// {\n\t// \tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t// \t{\n\t// \t\treturn this.menuPopup.close();\n\t// \t}\n\t// }\n}\n\n\n\n","import {Dom, Event, Loc, Type} from 'main.core';\n\nexport class AddButton extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.AddButton');\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'add-button-' + Math.round(Math.random() * 10000);\n\t\tthis.showTasks = params.showTasks;\n\n\t\tthis.addEntryHandler = Type.isFunction(params.addEntry) ? params.addEntry : null;\n\t\tthis.addTaskHandler = Type.isFunction(params.addTask) ? params.addTask : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.menuItems = [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_ADD_EVENT'),\n\t\t\t\tonclick: this.addEntry.bind(this)\n\t\t\t}\n\t\t];\n\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.menuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ADD_TASK'),\n\t\t\t\tonclick: this.addTask.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tif (this.menuItems.length > 1)\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-split ui-btn-primary\"},\n\t\t\t\tchildren: [\n\t\t\t\t\tDom.create(\"button\", {\n\t\t\t\t\t\tprops: {className: \"ui-btn-main\", type: \"button\"},\n\t\t\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\n\t\t\tthis.DOM.addButtonExtra = Dom.create(\"span\", {\n\t\t\t\tprops: {className: \"ui-btn-extra\"},\n\t\t\t\tevents: {click: this.showPopup.bind(this)}\n\t\t\t});\n\t\t\tthis.DOM.wrap.appendChild(this.DOM.addButtonExtra)\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.wrap = Dom.create(\"button\", {\n\t\t\t\tprops: {className: \"ui-btn ui-btn-primary\", type: \"button\"},\n\t\t\t\thtml: Loc.getMessage('EC_ADD'),\n\t\t\t\tevents: {click: this.addEntry.bind(this)}\n\t\t\t});\n\t\t}\n\t}\n\n\tgetWrap()\n\t{\n\t\treturn this.DOM.wrap;\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tthis.menuPopup = BX.PopupMenu.create(\n\t\t\tthis.popupId,\n\t\t\tthis.DOM.addButtonExtra,\n\t\t\tthis.menuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\n\t\tBX.addCustomEvent(this.menuPopup.popupWindow, 'onPopupClose', function()\n\t\t{\n\t\t\tBX.PopupMenu.destroy(this.popupId);\n\t\t\tthis.menuPopup = null;\n\t\t\tthis.addBtnMenu = null;\n\t\t}.bind(this));\n\t}\n\n\taddEntry()\n\t{\n\t\tif (this.addEntryHandler)\n\t\t{\n\t\t\tthis.addEntryHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n\n\taddTask()\n\t{\n\t\tif (this.addTaskHandler)\n\t\t{\n\t\t\tthis.addTaskHandler();\n\t\t}\n\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\t}\n}\n\n\n\n\n\n\n\n\n","import {Dom, Event, Loc, Type} from 'main.core';\nimport {Util} from \"calendar.util\";\n\nexport class MeetingStatusControl extends Event.EventEmitter\n{\n\tshowTasks = false;\n\tDOM = {};\n\n\tconstructor(params = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.MeetingStatusControl');\n\t\tthis.BX = Util.getBX();\n\n\t\tif (params.wrap && Type.isDomNode(params.wrap))\n\t\t{\n\t\t\tthis.DOM.wrap = params.wrap;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthrow new Error(\"The argument \\\"params.wrap\\\" must be a DOM node.\");\n\t\t}\n\t\tthis.id = params.id || 'meeting-status-control-' + Math.round(Math.random() * 10000);\n\t\tthis.zIndex = 3100;\n\n\t\tthis.create();\n\n\t\tthis.status = params.currentStatus || null;\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.updateStatus();\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.selectorButton = this.DOM.wrap.appendChild(Dom.create(\"SPAN\", {\n\t\t\tprops: {className: \"webform-small-button webform-small-button-transparent webform-small-button-dropdown\"},\n\t\t\tevents: {click: this.showPopup.bind(this)}\n\t\t}));\n\n\t\tthis.DOM.selectorButtonText = this.DOM.selectorButton.appendChild(Dom.create(\"SPAN\", {\n\t\t\tprops: {className: \"webform-small-button-text\"}\n\t\t}));\n\t\tthis.DOM.selectorButtonIcon = this.DOM.selectorButton.appendChild(Dom.create(\"SPAN\", {\n\t\t\tprops: {className: \"webform-small-button-icon\"}\n\t\t}));\n\n\t\tthis.DOM.buttonY = this.DOM.wrap.appendChild(Dom.create(\"SPAN\", {\n\t\t\tprops: {className: \"webform-small-button webform-small-button-accept\"},\n\t\t\tevents: {click: this.accept.bind(this)},\n\t\t\thtml: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y')\n\t\t}));\n\t\t// this.buttonI = this.DOM.wrap.appendChild(Dom.create(\"SPAN\", {\n\t\t// \tprops: {className: \"webform-small-button webform-small-button-transparent\"},\n\t\t// \tstyle: {display: 'none'},\n\t\t// \tevents: {click: BX.proxy(function(){this.setStatus('I');}, this)},\n\t\t// \thtml: Loc.getMessage('EC_VIEW_DESIDE_BUT_I')\n\t\t// }));\n\n\t\tthis.DOM.buttonN = this.DOM.wrap.appendChild(Dom.create(\"SPAN\", {\n\t\t\tprops: {className: \"webform-small-button webform-small-button-transparent\"},\n\t\t\tevents: {click: this.decline.bind(this)},\n\t\t\thtml: Loc.getMessage('EC_VIEW_DESIDE_BUT_N')\n\t\t}));\n\t}\n\n\tupdateStatus()\n\t{\n\t\tif (this.status === 'Q')\n\t\t{\n\t\t\tthis.DOM.selectorButton.style.display = 'none';\n\t\t\tthis.DOM.buttonY.style.display = '';\n\t\t\tthis.DOM.buttonN.style.display = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.selectorButton.style.display = '';\n\t\t\tthis.DOM.selectorButtonText.innerHTML = Loc.getMessage('EC_VIEW_STATUS_BUT_' + this.status);\n\n\t\t\tthis.DOM.buttonY.style.display = 'none';\n\t\t\t//this.DOM.buttonI.style.display = 'none';\n\t\t\tthis.DOM.buttonN.style.display = 'none';\n\t\t}\n\t}\n\n\taccept()\n\t{\n\t\tthis.setStatus('Y');\n\t}\n\n\tdecline()\n\t{\n\t\tthis.setStatus('N');\n\t}\n\n\tsetStatus(value)\n\t{\n\t\tthis.status = value;\n\t\tif (this.menuPopup)\n\t\t{\n\t\t\tthis.menuPopup.close();\n\t\t}\n\n\t\tlet res = true;\n\t\tif (Type.isFunction(this.changeStatusCallback))\n\t\t{\n\t\t\tres = this.changeStatusCallback(this.status);\n\t\t}\n\n\t\tthis.emit('onSetStatus', new Event.BaseEvent({data: {status: value}}));\n\n\t\tif (res)\n\t\t{\n\t\t\tthis.updateStatus();\n\t\t}\n\t}\n\n\tshowPopup()\n\t{\n\t\tif (this.menuPopup && this.menuPopup.popupWindow && this.menuPopup.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.menuPopup.close();\n\t\t}\n\n\t\tlet menuItems;\n\n\t\tif (this.status === 'Y' || this.status === 'H')\n\t\t{\n\t\t\tmenuItems = [\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_N'),\n\t\t\t\t\tonclick: this.decline.bind(this)\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\telse if(this.status === 'N')\n\t\t{\n\t\t\tmenuItems = [\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y'),\n\t\t\t\t\tonclick: this.accept.bind(this)\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\t\telse if(this.status === 'I')\n\t\t{\n\t\t\tmenuItems =[\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_Y'),\n\t\t\t\t\tonclick: this.accept.bind(this)\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: Loc.getMessage('EC_VIEW_DESIDE_BUT_N'),\n\t\t\t\t\tonclick: this.decline.bind(this)\n\t\t\t\t}\n\t\t\t];\n\t\t}\n\n\t\tthis.menuPopup = this.BX.PopupMenu.create(\n\t\t\tthis.id,\n\t\t\tthis.DOM.selectorButtonIcon,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 15,\n\t\t\t\toffsetLeft: 5,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.menuPopup.show();\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmStatusDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_DECLINE_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_ONLY_THIS'),\n\t\t\tevents: {\n\t\t\t\tclick : function()\n\t\t\t\t{\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_DECLINE_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function()\n\t\t\t\t{\n\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_DECLINE_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('onDecline', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class ConfirmEditDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmEditDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow()\n\t{\n\t\tlet content = Dom.create('DIV');\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_EDIT_REC_EVENT'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\tbuttons: [\n\t\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tcontent: content,\n\t\t\tevents: {},\n\t\t\tcacheable: false\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'this'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick: ()=>{\n\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'next'}}));\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : ()=>{\n\t\t\t\t\t\tthis.emit('onEdit', new BaseEvent({data: {recursionMode: 'all'}}));\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}","'use strict';\nimport {PopupDialog} from './popupdialog';\n\nexport class ConfirmDeleteDialog extends PopupDialog\n{\n\tconstructor(params = {})\n\t{\n\t\tsuper(params);\n\t\tthis.title = BX.message('EC_DEL_REC_EVENT');\n\t\tthis.entry = params.entry;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.DOM.content = BX.create('DIV');\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_ONLY_THIS_EVENT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteThis();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: BX.message('EC_REC_EV_NEXT'),\n\t\t\tevents: {\n\t\t\t\tclick : function() {\n\t\t\t\t\tthis.entry.deleteNext();\n\t\t\t\t\tthis.close();\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}).buttonNode);\n\n\t\tthis.DOM.content.appendChild(new BX.PopupWindowButton(\n\t\t\t{\n\t\t\t\ttext: BX.message('EC_REC_EV_ALL'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick : function() {\n\t\t\t\t\t\tthis.entry.deleteAll();\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t}.bind(this)\n\t\t\t\t}\n\t\t\t}).buttonNode);\n\n\t\treturn this.DOM.content;\n\t}\n\n\tgetButtons()\n\t{\n\t\treturn [\n\t\t\tnew BX.PopupWindowButtonLink({\n\t\t\t\ttext: BX.message('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t\tevents: {click : this.close.bind(this)}\n\t\t\t})\n\t\t];\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag} from 'main.core';\nimport {Util} from 'calendar.util';\nimport {TimeSelector} from \"./timeselector\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class DateTimeControl extends EventEmitter\n{\n\tconstructor(uid, options = {showTimezone: true})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.DateTimeControl');\n\n\t\tthis.showTimezone = options.showTimezone;\n\n\t\tthis.UID = uid || 'date-time-' + Math.round(Math.random() * 100000);\n\n\t\tthis.DOM = {\n\t\t\touterWrap: options.outerWrap || null,\n\t\t\touterContent: options.outerContent || null\n\t\t};\n\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tif (Type.isDomNode(this.DOM.outerWrap))\n\t\t{\n\t\t\tthis.DOM.fromDate = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: 120px;\"/>\n\t\t\t`);\n\n\t\t\tthis.DOM.fromTime = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime-menu\" value=\"\" type=\"text\" autocomplete=\"off\"/>\n\t\t\t`);\n\n\t\t\tthis.DOM.outerWrap.appendChild(Tag.render`<div class=\"calendar-field-block calendar-field-block-between\" />`);\n\n\t\t\tthis.DOM.toTime = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime-menu\" value=\"\" type=\"text\" autocomplete=\"off\"/>\n\t\t\t`);\n\n\t\t\tthis.DOM.toDate = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<input class=\"calendar-field calendar-field-datetime\" value=\"\" type=\"text\" autocomplete=\"off\" style=\"width: 120px;\"/>\n\t\t\t`);\n\n\t\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.fromTime,\n\t\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t\t});\n\n\t\t\tthis.toTimeControl = new TimeSelector({\n\t\t\t\tinput: this.DOM.toTime,\n\t\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t\t});\n\n\t\t\tlet fullDayWrap = this.DOM.outerWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"calendar-event-full-day\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.fullDay = fullDayWrap.appendChild(Tag.render`\n\t\t\t\t<input value=\"Y\" type=\"checkbox\" id=\"{this.UID}\"/>\n\t\t\t`);\n\t\t\tfullDayWrap.appendChild(Tag.render`<label for=\"{this.UID}\">${Loc.getMessage('EC_ALL_DAY')}</label>`);\n\t\t}\n\n\t\t//this.DOM.defTimezoneWrap = BX(this.UID + '_timezone_default_wrap');\n\t\t//this.DOM.defTimezone = BX(this.UID + '_timezone_default');\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\t// this.DOM.fromTz = BX(this.UID + '_timezone_from');\n\t\t\t// this.DOM.toTz = BX(this.UID + '_timezone_to');\n\t\t\t// this.DOM.tzButton = BX(this.UID + '_timezone_btn');\n\t\t\t// this.DOM.tzOuterCont = BX(this.UID + '_timezone_wrap');\n\t\t\t// this.DOM.tzCont = BX(this.UID + '_timezone_inner_wrap');\n\t\t\t// BX(this.UID + '_timezone_hint').title = BX.message('EC_EVENT_TZ_HINT');\n\t\t\t// BX(this.UID + '_timezone_default_hint').title = BX.message('EC_EVENT_TZ_DEF_HINT');\n\t\t}\n\n\t\tthis.bindEventHandlers();\n\t}\n\n\tsetValue(value = {})\n\t{\n\t\tthis.DOM.fromDate.value = Util.formatDate(value.from);\n\t\tthis.DOM.toDate.value = Util.formatDate(value.to);\n\n\t\tthis.lastDateValue = value.from;\n\n\t\tthis.fromTimeControl.setValue(value.from);\n\t\tthis.toTimeControl.setValue(value.to);\n\n\t\tthis.DOM.fromTime.value = Util.formatTime(value.from);\n\t\tthis.DOM.toTime.value = Util.formatTime(value.to);\n\n\t\tif (value.fullDay !== undefined)\n\t\t{\n\t\t\tthis.DOM.fullDay.checked = value.fullDay;\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tvalue.timezoneFrom = value.timezoneFrom || value.timezoneName;\n\t\t\tvalue.timezoneTo = value.timezoneTo || value.timezoneName;\n\n\t\t\tif (value.timezoneFrom !== undefined && Type.isDomNode(this.DOM.fromTz))\n\t\t\t{\n\t\t\t\tthis.DOM.fromTz.value = value.timezoneFrom;\n\t\t\t}\n\t\t\tif(value.timezoneTo !== undefined && Type.isDomNode(this.DOM.toTz))\n\t\t\t{\n\t\t\t\tthis.DOM.toTz.value = value.timezoneTo;\n\t\t\t}\n\n\t\t\tif (value.timezoneName !== undefined\n\t\t\t\t&& (value.timezoneName !== value.timezoneFrom\n\t\t\t\t\t|| value.timezoneName !== value.timezoneTo))\n\t\t\t{\n\t\t\t\tthis.switchTimezone(true);\n\t\t\t}\n\t\t}\n\n\t\tthis.handleFullDayChange();\n\t}\n\n\tgetValue()\n\t{\n\t\tlet value = {\n\t\t\tfullDay: this.DOM.fullDay.checked,\n\t\t\tfromDate: this.DOM.fromDate.value,\n\t\t\ttoDate: this.DOM.toDate.value,\n\t\t\tfromTime: this.DOM.fromTime.value,\n\t\t\ttoTime: this.DOM.toTime.value,\n\t\t\ttimezoneFrom: this.DOM.fromTz ? this.DOM.fromTz.value : null,\n\t\t\ttimezoneTo: this.DOM.toTz ? this.DOM.toTz.value : null\n\t\t};\n\n\t\tvalue.from = Util.parseDate(value.fromDate);\n\t\tif (Type.isDate(value.from))\n\t\t{\n\t\t\tvalue.to = Util.parseDate(value.toDate);\n\t\t\tif (!Type.isDate(value.to))\n\t\t\t{\n\t\t\t\tvalue.to = value.from;\n\t\t\t}\n\n\t\t\tif (value.fullDay)\n\t\t\t{\n\t\t\t\tvalue.from.setHours(0, 0, 0);\n\t\t\t\tvalue.to.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet\n\t\t\t\t\tfromTime = Util.parseTime(value.fromTime),\n\t\t\t\t\ttoTime = Util.parseTime(value.toTime) || fromTime;\n\n\t\t\t\tif (fromTime && toTime)\n\t\t\t\t{\n\t\t\t\t\tvalue.from.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t\tvalue.to.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(this.DOM.fromDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.fromDate, 'change', this.handleDateFromChange.bind(this));\n\n\t\tEvent.bind(this.DOM.toDate, 'click', DateTimeControl.showInputCalendar);\n\t\tEvent.bind(this.DOM.toDate, 'change', this.handleDateToChange.bind(this));\n\n\t\tEvent.bind(this.DOM.fullDay, 'click', this.handleFullDayChange.bind(this));\n\n\n\t\tif (Type.isDomNode(this.DOM.defTimezone))\n\t\t{\n\t\t\tEvent.bind(this.DOM.defTimezone, 'change', BX.delegate(function()\n\t\t\t{\n\t\t\t\t//this.calendar.util.setUserOption('timezoneName', this.DOM.defTimezone.value);\n\t\t\t\tif (this.bindFromToDefaultTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.fromTz.value = this.DOM.toTz.value = this.DOM.defTimezone.value;\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}\n\n\t\tif (this.showTimezone)\n\t\t{\n\t\t\tif (Type.isDomNode(this.DOM.tzButton))\n\t\t\t{\n\t\t\t\tEvent.bind(this.DOM.tzButton, 'click', this.switchTimezone.bind(this));\n\t\t\t}\n\n\t\t\tEvent.bind(this.DOM.fromTz, 'change', function()\n\t\t\t{\n\t\t\t\tif (this.bindTimezones)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toTz.value = this.DOM.fromTz.value;\n\t\t\t\t}\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tEvent.bind(this.DOM.toTz, 'change', function()\n\t\t\t{\n\t\t\t\tthis.bindTimezones = false;\n\t\t\t\tthis.bindFromToDefaultTimezones = false;\n\t\t\t}.bind(this));\n\n\t\t\tthis.bindTimezones = this.DOM.fromTz.value === this.DOM.toTz.value;\n\t\t\tthis.bindFromToDefaultTimezones = this.bindTimezones\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.toTz.value\n\t\t\t\t&& this.DOM.fromTz.value === this.DOM.defTimezone.value;\n\t\t}\n\t}\n\n\tstatic showInputCalendar(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tif (Type.isDomNode(target) && target.nodeName.toLowerCase() === 'input')\n\t\t{\n\t\t\tBX.calendar({node: target.parentNode, field: target, bTime: false});\n\t\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupShown');\n\n\t\t\tif (BX.calendar.get().popup)\n\t\t\t{\n\t\t\t\tBX.removeCustomEvent(BX.calendar.get().popup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t\tBX.addCustomEvent(BX.calendar.get().popup, 'onPopupClose', DateTimeControl.inputCalendarClosePopupHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic inputCalendarClosePopupHandler(e)\n\t{\n\t\tBX.onCustomEvent(window, 'onCalendarControlChildPopupClosed');\n\t}\n\n\thandleDateFromChange()\n\t{\n\t\tlet\n\t\t\tfromTime = Util.parseTime(this.DOM.fromTime.value),\n\t\t\ttoTime = Util.parseTime(this.DOM.toTime.value),\n\t\t\tfromDate = Util.parseDate(this.DOM.fromDate.value),\n\t\t\ttoDate = Util.parseDate(this.DOM.toDate.value);\n\n\t\tif (this.lastDateValue)\n\t\t{\n\t\t\tif (this.DOM.fullDay.checked && this.lastDateValue)\n\t\t\t{\n\t\t\t\tthis.lastDateValue.setHours(0, 0, 0);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (fromDate && fromTime)\n\t\t\t\t{\n\t\t\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\t}\n\n\t\t\t\tif (toDate && toTime)\n\t\t\t\t{\n\t\t\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (fromDate && this.lastDateValue)\n\t\t\t{\n\t\t\t\ttoDate = new Date(fromDate.getTime()\n\t\t\t\t\t+ ((toDate.getTime() - this.lastDateValue.getTime()) || 3600000));\n\n\t\t\t\tif (toDate)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.toDate.value = Util.formatDate(toDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.lastDateValue = fromDate;\n\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeFromChange()\n\t{\n\t\tlet\n\t\t\tfromTime = Util.parseTime(this.DOM.fromTime.value),\n\t\t\ttoTime = Util.parseTime(this.DOM.toTime.value),\n\t\t\tfromDate = Util.parseDate(this.DOM.fromDate.value),\n\t\t\ttoDate = Util.parseDate(this.DOM.toDate.value);\n\n\t\tif (fromDate && fromTime)\n\t\t{\n\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t}\n\n\t\tif (toDate && toTime)\n\t\t{\n\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\t\t}\n\n\t\tif (this.lastDateValue)\n\t\t{\n\t\t\tlet newToDate = new Date(\n\t\t\t\tUtil.getTimeRounded(fromDate) +\n\t\t\t\tUtil.getTimeRounded(toDate)\n\t\t\t\t- Util.getTimeRounded(this.lastDateValue)\n\t\t\t);\n\t\t\tthis.DOM.toTime.value = Util.formatTime(newToDate);\n\t\t\tthis.DOM.toDate.value = Util.formatDate(newToDate);\n\t\t}\n\n\t\tthis.lastDateValue = fromDate;\n\t\tthis.handleValueChange();\n\t}\n\n\thandleDateToChange()\n\t{\n\t\tthis.handleValueChange();\n\t}\n\n\thandleTimeToChange()\n\t{\n\t\tthis.handleValueChange();\n\t}\n\n\thandleFullDayChange()\n\t{\n\t\tlet fullDay = this.getFullDayValue();\n\n\t\t// if (fullDay && this.calendar.util.getUserOption('timezoneName')\n\t\t// \t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t// {\n\t\t// \tthis.DOM.fromTz.value = this.DOM.toTz.value = this.DOM.defTimezone.value = this.calendar.util.getUserOption('timezoneName');\n\t\t// }\n\n\t\tif (fullDay)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\tthis.handleValueChange();\n\t}\n\n\thandleValueChange()\n\t{\n\t\tthis.emit('onChange', new BaseEvent({data: {value: this.getValue()}}));\n\t}\n\n\tgetFullDayValue()\n\t{\n\t\treturn !!this.DOM.fullDay.checked;\n\t}\n\n\tswitchTimezone(showTimezone)\n\t{\n\t\tif (!Type.isBoolean(showTimezone))\n\t\t{\n\t\t\tshowTimezone = BX.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\n\t\tif (showTimezone)\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n}","import {Dom, Loc} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\n\nexport class BusyUsersDialog extends EventEmitter\n{\n\tDOM = {};\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Controls.ConfirmStatusDialog');\n\t\tthis.zIndex = 3200;\n\t\tthis.id = 'confirm-status-dialog-' + Math.round(Math.random() * 10000);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.plural = params.users.length > 1;\n\n\t\tlet i, userNames = [];\n\t\tfor (i = 0; i < params.users.length; i++)\n\t\t{\n\t\t\tuserNames.push(params.users[i].DISPLAY_NAME);\n\t\t}\n\t\tuserNames = userNames.join(', ');\n\n\t\tlet content = BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-busy-users-content-wrap'},\n\t\t\thtml: '<div class=\"calendar-busy-users-content\">'\n\t\t\t\t+ BX.util.htmlspecialchars(this.plural ?\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_PLURAL').replace('#USER_LIST#', userNames)\n\t\t\t\t\t:\n\t\t\t\t\tLoc.getMessage('EC_BUSY_USERS_SINGLE').replace('#USER_NAME#', params.users[0].DISPLAY_NAME))\n\t\t\t\t+ '</div>'\n\t\t});\n\n\t\tthis.dialog = new BX.PopupWindow(this.id, null, {\n\t\t\toverlay: {opacity: 10},\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc : true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetLeft: 0,\n\t\t\toffsetTop: 0,\n\t\t\tdraggable: true,\n\t\t\tbindOnResize: false,\n\t\t\ttitleBar: Loc.getMessage('EC_BUSY_USERS_TITLE'),\n\t\t\tcloseIcon: { right : \"12px\", top : \"10px\"},\n\t\t\tclassName: 'bxc-popup-window',\n\t\t\t// buttons: [\n\t\t\t// \tnew BX.PopupWindowButtonLink({\n\t\t\t// \t\ttext: Loc.getMessage('EC_BUSY_USERS_CLOSE'),\n\t\t\t// \t\tclassName: \"popup-window-button-link-cancel\",\n\t\t\t// \t\tevents: {click : () => {\n\t\t\t// \t\t\t// if (this.simpleEntryPopup)\n\t\t\t// \t\t\t// \tthis.simpleEntryPopup.close();\n\t\t\t// \t\t\t//\n\t\t\t// \t\t\t// if (this.calendar.editSlider)\n\t\t\t// \t\t\t// \tthis.calendar.editSlider.close();\n\t\t\t//\n\t\t\t// \t\t\tthis.close();\n\t\t\t// \t\t}\n\t\t\t// \t\t}\n\t\t\t// \t})\n\t\t\t// ],\n\t\t\tcontent: content,\n\t\t\tevents: {}\n\t\t});\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: Loc.getMessage('EC_BUSY_USERS_BACK2EDIT'),\n\t\t\tevents: {click : () => {this.close();}}\n\t\t}).buttonNode);\n\n\t\tcontent.appendChild(new BX.PopupWindowButton({\n\t\t\ttext: this.plural ? Loc.getMessage('EC_BUSY_USERS_EXCLUDE_PLURAL') : Loc.getMessage('EC_BUSY_USERS_EXCLUDE_SINGLE'),\n\t\t\tevents: {click : () => {\n\t\t\t\tthis.emit('onSaveWithout');\n\t\t\t\tthis.close();\n\t\t\t}}\n\t\t}).buttonNode);\n\n\t\tthis.dialog.show();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.dialog)\n\t\t{\n\t\t\tthis.dialog.close();\n\t\t}\n\t}\n}"],"names":["TimeSelector","params","DOM","wrap","input","onChangeCallback","BX","type","isFunction","create","selectContol","Calendar","Controls","SelectInput","zIndex","values","getValueList","getInputValue","bind","value","time","isDate","h","getHours","m","getMinutes","Util","parseTime","adaptedValue","adaptTimeValue","setValue","hour","Math","floor","min","formatTime","timeValue","parseInt","timeList","diff","ind","i","length","abs","valueList","push","label","Reminder","setEventNamespace","getValues","id","round","random","viewMode","changeCallack","showPopupCallBack","hidePopupCallBack","selectedValues","bindEventHandlers","Type","isDomNode","valuesContainerNode","valuesWrap","appendChild","Tag","render","addButtonNode","addButton","Loc","getMessage","Event","showPopup","handleClick","fullDayMode","concat","shortLabel","extendedMode","dataset","mode","daysBefore","defaultReminderTime","reminderList","isArray","forEach","addValue","_this","menuItems","item","util","in_array","menuItem","getTimeByInt","text","replace","objectMerge","items","getSubmenuTimeValues","onclick","before","defer","reminderMenu","close","MenuManager","closeByEsc","autoHide","offsetTop","offsetLeft","angle","cacheable","adjustSubmenuPopup","closeSubmenuPopup","EventEmitter","subscribe","popupWindow","unsubscribe","show","parentItem","parentItemMessage","getTimeValueList","e","parentMenuItem","getMenuItem","setText","formattedValue","formatValue","isPlainObject","includes","isInteger","getReminderLabel","formatDateUsable","controlList","undefined","Dom","props","className","getText","events","click","removeValue","emit","BaseEvent","data","remove","deleteFromArray","array_search","target","srcElement","remValue","getAttribute","event","submenuPopup","getTarget","Popup","test","getId","adjustTimeSubmenuPopup","adjustCalendarSubmenuPopup","layout","bindElement","textNode","querySelector","clean","innerHTML","popup","selectedMenuItem","getContentContainer","setTimeout","scrollTop","addClass","calendarControl","calendar","get","_current_layer","_layers","Show","node","formatDateTime","getUsableDateTime","Date","field","bTime","bHideTime","calendarPopup","popupContainer","calendarWrap","contentContainer","destroy","uniquePopupId","dateValue","parseDate","tempValue","dividers","messageCodes","result","toString","ceil","timeValueList","remindValue","nodeName","toLowerCase","parentNode","onCustomEvent","window","style","removeCustomEvent","inputCalendarClosePopupHandler","addCustomEvent","Location","wrapNode","disabled","richLocationEnabled","meetingRooms","iblockMeetingRoomList","setMeetingRoomList","setLocationList","locationList","inputWrap","B24","licenseInfoPopup","attrs","name","inputName","placeholder","autocomplete","menuItemList","selectedIndex","getMeetingRoomList","getLocationList","room","ID","htmlspecialchars","NAME","labelRaw","delimiter","callback","editMeetingRooms","str","getTextLocation","valueIndex","delegate","getControlContentCallback","showEditMeetingRooms","buildLocationEditControl","editDialog","editDialogContent","PopupWindow","overlay","opacity","draggable","bindOnResize","titleBar","closeIcon","right","top","buttons","PopupWindowButton","saveValues","PopupWindowButtonLink","content","locationEditControlShown","editDialogWrap","locationRoomList","addNewButtonField","addRoomField","outerWrap","innerWrap","innerCont","html","lastItem","deleted","trim","paddingRight","keyup","keyCode","editRoom","delRoomEntry","deleteField","focus","changed","ajax","runAction","then","response","setValues","res","mrevid","room_event_id","parseStringValue","location","isString","substr","split","isNaN","mrid","room_id","meetingRoomList","UserSelector","destinationInputName","itemsSelected","convertAttendeesCodes","socnetDestinationWrap","SocNetLogDestination","openDialog","socnetDestinationItems","targ","deleteItem","preventDefault","stopPropagation","mouseover","mouseout","removeClass","socnetDestinationInputWrap","socnetDestinationInput","keydown","searchBeforeHandler","formName","inputId","searchHandler","linkId","sendAjax","socnetDestinationLink","addLinkMessage","message","init","selectGroups","groups","department","sonetgroups","selectUsers","users","searchInput","extranetUser","userSearchArea","bindMainPopup","bindSearchPopup","select","selectCallback","unSelect","unSelectCallback","openDialogCallback","closeDialog","closeDialogCallback","openSearch","closeSearch","itemsLast","departmentSelectDisable","isOpenDialog","type1","prefix","children","getSelectedCount","search","elements","findChildren","attribute","j","popupSearchWindow","cleanInputValue","isOpenSearch","backspaceDisable","unbind","inputsList","getElementsByTagName","codes","attendeesCodes","code","getAttendeesCodes","hasOwnProperty","ColorSelector","defaultColors","getDefaultColorList","colors","color","backgroundColor","customColorNode","width","customColorLink","colorPickerPopup","ColorPicker","onColorSelected","proxy","popupOptions","open","handleColorClick","findTargetNode","activeColor","activeColorNode","SectionSelector","sectionList","sectionGroupList","openPopupCallback","closePopupCallback","getCurrentSection","defaultCalendarType","defaultOwnerId","initEventHandlers","innerValue","getCurrentColor","selectInnerText","getCurrentTitle","openPopup","sectionMenu","isShown","submenuClass","icon","sectionGroup","filteredList","belongsToView","filter","sectionBelongsToView","section","getSectionType","getSectionOwner","ownerId","title","PopupMenu","overflow","maxHeight","setWidth","offsetWidth","overflowX","sectionItem","COLOR","adjust","CAL_TYPE","OWNER_ID","RepeatSelector","formElements","rruleType","form","getDate","interval","rruleEndsOn","never","count","until","changeType","checked","toUpperCase","fromDate","day","getWeekDayByInd","getDay","rrule","FREQ","INTERVAL","COUNT","BYDAY","defaultValue","openTitle","curInd","onClick","onFocus","onBlur","onKeyup","currentValue","currentValueIndex","shown","popupMenu","onChange","menuContainer","offsetHeight","closePopup","val","PopupDialog","dialog","getTitle","getButtons","getContent","ViewSelector","views","popupId","currentView","currentViewMode","setViewMode","selectorText","selectorTextInner","viewModeTextInner","created","find","view","display","hotkey","menuPopup","getMenuItems","LineViewSelector","viewsMap","WeakMap","set","viewData","currentActiveWrap","AddButton","showTasks","addEntryHandler","addEntry","addTaskHandler","addTask","addButtonExtra","addBtnMenu","MeetingStatusControl","getBX","Error","status","currentStatus","updateStatus","selectorButton","selectorButtonText","selectorButtonIcon","buttonY","accept","buttonN","decline","setStatus","changeStatusCallback","ConfirmStatusDialog","recursionMode","buttonNode","ConfirmEditDialog","ConfirmDeleteDialog","entry","deleteThis","deleteNext","deleteAll","DateTimeControl","uid","options","showTimezone","UID","outerContent","fromTime","toTime","toDate","fromTimeControl","handleTimeFromChange","toTimeControl","handleTimeToChange","fullDayWrap","fullDay","formatDate","from","to","lastDateValue","timezoneFrom","timezoneName","timezoneTo","fromTz","toTz","switchTimezone","handleFullDayChange","setHours","showInputCalendar","handleDateFromChange","handleDateToChange","defTimezone","bindFromToDefaultTimezones","tzButton","bindTimezones","getTime","handleValueChange","newToDate","getTimeRounded","getFullDayValue","dateTimeWrap","getValue","isBoolean","hasClass","tzCont","BusyUsersDialog","plural","userNames","DISPLAY_NAME","join"],"mappings":"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"}