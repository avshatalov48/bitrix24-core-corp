{"version":3,"file":"eventeditform.bundle.js","sources":["../src/sliderdatetimecontrol.js","../src/eventeditform.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Dom} from 'main.core';\nimport {DateTimeControl, TimeSelector} from 'calendar.controls';\n\nexport class SliderDateTimeControl extends DateTimeControl\n{\n\tcreate()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_container`);\n\t\tthis.DOM.fromDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_from`);\n\t\tthis.DOM.toDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_to`);\n\t\tthis.DOM.fromTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_from`);\n\t\tthis.DOM.toTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_to`);\n\n\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.fromTime,\n\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t});\n\n\t\tthis.toTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.toTime,\n\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t});\n\n\t\tthis.DOM.fullDay = this.DOM.outerContent.querySelector(`#${this.UID}_date_full_day`);\n\t\tthis.DOM.defTimezoneWrap = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_wrap`);\n\t\tthis.DOM.defTimezone = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default`);\n\n\t\tthis.DOM.fromTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_from`);\n\t\tthis.DOM.toTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_to`);\n\t\tthis.DOM.tzButton = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_btn`);\n\t\tthis.DOM.tzOuterCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_wrap`);\n\t\tthis.DOM.tzCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_inner_wrap`);\n\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_hint`).title = Loc.getMessage('EC_EVENT_TZ_HINT');\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_hint`).title = Loc.getMessage('EC_EVENT_TZ_DEF_HINT');\n\n\t\tthis.prepareModel();\n\t\tthis.bindEventHandlers();\n\t}\n\n\tprepareModel()\n\t{\n\t\tDom.adjust(this.DOM.fromDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.fromTime, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toTime, {props: {autocomplete: 'off'}});\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag, Runtime} from 'main.core';\nimport {SliderDateTimeControl} from './sliderdatetimecontrol.js';\nimport {SectionSelector, Reminder, ColorSelector, Location, RepeatSelector, BusyUsersDialog} from 'calendar.controls';\nimport {Util} from 'calendar.util';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {SectionManager} from \"calendar.sectionmanager\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {TagSelector as EntityTagSelector} from 'ui.entity-selector';\nimport { RoomsManager } from 'calendar.roomsmanager';\n\nexport class EventEditForm\n{\n\tDOM = {};\n\tuid = null;\n\tsliderId = \"calendar:edit-entry-slider\";\n\tzIndex = 3100;\n\tdenyClose = false;\n\tformType = 'slider_main';\n\tSTATE = {READY: 1, REQUEST: 2, ERROR: 3};\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tuserSettings = {};\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.name = options.name || 'eventeditform';\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.locationAccess = options.locationAccess || false;\n\t\tthis.locationCapacity = options.locationCapacity || 0;\n\t\tthis.dayOfWeekMonthFormat = options.dayOfWeekMonthFormat || false;\n\t\tthis.roomsManager = options.roomsManager || null;\n\t\tthis.userId = options.userId || parseInt(Loc.getMessage('USER_ID'));\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.entryId = parseInt(options.entryId) || null;\n\t\tthis.entry = options.entry || null;\n\t\tthis.formDataValue = options.formDataValue || {};\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Calendar.EventEditForm');\n\t\tthis.BX = Util.getBX();\n\t\tthis.context = Util.getCalendarContext() ?? options.calendarContext;\n\n\t\tthis.formSettings = {\n\t\t\tpinnedFields : {}\n\t\t};\n\t\tif (!this.ownerId && this.type === 'user')\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\n\t\tif (Type.isDate(options.entryDateFrom) && !this.formDataValue.from)\n\t\t{\n\t\t\tthis.formDataValue.from = options.entryDateFrom;\n\t\t\tthis.formDataValue.to = new Date(options.entryDateFrom.getTime() + 3600);\n\t\t}\n\n\t\tthis.participantsEntityList = Type.isArray(options.participantsEntityList)\n\t\t\t? options.participantsEntityList\n\t\t\t: [];\n\n\t\tthis.participantsSelectorEntityList = Type.isArray(options.participantsSelectorEntityList)\n\t\t\t? options.participantsSelectorEntityList\n\t\t\t: [];\n\n\t\tif (options.entryName && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.name = options.entryName;\n\t\t}\n\t\tif (options.entryDescription && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.description = options.entryDescription;\n\t\t}\n\n\t\tthis.refreshPlanner = Runtime.debounce(this.refreshPlannerState, 100, this);\n\t\tthis.state = this.STATE.READY;\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.handlePullBind = this.handlePull.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.sliderId = slider.getUrl();\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.onLoadSlider.bind(this));\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\t\tthis.setCurrentEntry(this.entry || null);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setCurrentEntry(params.entry);\n\t\tif (params.formType)\n\t\t{\n\t\t\tthis.formType = params.formType;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullBind);\n\n\t\t// region 'protection from closing slider by accident'\n\t\tthis.mouseUpNodeCheck = null;\n\n\t\tEvent.bind(document, 'mousedown', (e)=>{this.mousedownTarget = e.target || e.srcElement;});\n\t\tEvent.bind(document, 'mouseup', (e)=>{\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (this.mousedownTarget !== target)\n\t\t\t{\n\t\t\t\tthis.mouseUpNodeCheck = false;\n\t\t\t}\n\t\t\tsetTimeout(()=>{this.mouseUpNodeCheck = null;}, 0);\n\t\t});\n\t\t// endregion\n\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupShown\", this.BX.proxy(this.denySliderClose, this));\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupClosed\", this.BX.proxy(this.allowSliderClose, this));\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t\tthis.sliderId = this.slider.getUrl();\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(this.slider.layout.content, this.slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\t\tthis.setFormValues();\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.checkDenyClose())\n\t\t{\n\t\t\tthis.state = this.STATE.READY;\n\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t}\n\t}\n\n\tsave(options = {})\n\t{\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (!this.entry.id\n\t\t\t&& this.hasExternalEmailUsers()\n\t\t\t&& Util.checkEmailLimitationPopup()\n\t\t\t&& !options.emailLimitationDialogShown)\n\t\t{\n\t\t\tEntryManager.showEmailLimitationDialog({\n\t\t\t\tcallback: () => {\n\t\t\t\t\toptions.emailLimitationDialogShown = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.userSettings.sendFromEmail && this.hasExternalEmailUsers())\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (params.sendFromEmail)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userSettings.sendFromEmail = params.sendFromEmail;\n\t\t\t\t\t}\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.entry.id && this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section', 'notify']).length > 0)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tthis.save({\n\t\t\t\t\t\trecursionMode: (this.entry.isFirstInstance() && params.recursionMode === 'next')\n\t\t\t\t\t\t\t? 'all'\n\t\t\t\t\t\t\t: params.recursionMode,\n\t\t\t\t\t\tconfirmed: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.entry.id\n\t\t\t&& this.entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& this.getFormDataChanges().includes('date&time')\n\t\t\t&& this.entry.getAttendees().find((item) => {return item.STATUS === 'N';})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tDom.addClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\tDom.addClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.DOM.form.id.value = this.entry.id || 0;\n\n\t\t// Location\n\t\tthis.DOM.form.location.value = this.locationSelector.getTextValue();\n\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.SaveContent();\n\t\t}\n\n\t\tlet section = this.getCurrentSection();\n\t\tif (section)\n\t\t{\n\t\t\t// Color\n\t\t\tif (section.COLOR.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t\t{\n\t\t\t\tthis.DOM.form.color.value = this.colorSelector.getValue();\n\t\t\t}\n\t\t\t// this.BX.userOptions.save('calendar', 'user_settings', 'lastUsedSection', parseInt(section.ID));\n\t\t}\n\n\t\tthis.DOM.form.current_date_from.value = options.recursionMode ? Util.formatDate(this.entry.from) : '';\n\t\tthis.DOM.form.rec_edit_mode.value = options.recursionMode || '';\n\n\t\tif (options.sendInvitesAgain !== undefined)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(Tag.render`<input name=\"sendInvitesAgain\" type=\"hidden\" value=\"${options.sendInvitesAgain ? 'Y' : 'N'}\">`);\n\t\t}\n\n\t\tif (!this.DOM.form.requestUid)\n\t\t{\n\t\t\tthis.DOM.requestUid = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input name=\"requestUid\" type=\"hidden\">`\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.meeting_host)\n\t\t{\n\t\t\tthis.DOM.meeting_host = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"meeting_host\" value=\"${this.entry.data.MEETING_HOST || '0'}\">`\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.chat_id)\n\t\t{\n\t\t\tthis.DOM.chat_id = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"chat_id\" value=\"${this.entry.data.MEETING ? this.entry.data.MEETING.CHAT_ID : 0}\">`\n\t\t\t)\n\t\t}\n\n\t\tthis.DOM.requestUid.value = Util.registerRequestId();\n\n\t\t// Save attendees from userSelector\n\t\tconst attendeesEntityList = this.getUserSelectorEntityList();\n\t\tDom.clean(this.DOM.userSelectorValueWarp);\n\t\tattendeesEntityList.forEach((entity, index) => {\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][entityId]\" value=\"${entity.entityId}\">\n\t\t\t`);\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][id]\" value=\"${entity.id}\">\n\t\t\t`);\n\t\t});\n\n\t\tlet checkCurrentUsersAccessibility = !this.entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (!checkCurrentUsersAccessibility\n\t\t\t&& this.getFormDataChanges().includes('codes'))\n\t\t{\n\t\t\tconst previousAttendeesList = this.entry.getAttendeesEntityList();\n\t\t\tattendeesEntityList.forEach(entity => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& parseInt(entity.id) === parseInt(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"newAttendeesList[]\" value=\"${parseInt(entity.id)}\">\n\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t<input type=\"hidden\" name=\"checkCurrentUsersAccessibility\" value=\"${checkCurrentUsersAccessibility ? 'Y' : 'N'}\">\n\t\t`);\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', {\n\t\t\tdata: new FormData(this.DOM.form),\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: this.entry.id ? 'edit_event' : 'create_event',\n\t\t\t\tformType: 'full',\n\t\t\t\temailGuests: this.hasExternalEmailUsers() ? 'Y' : 'N',\n\t\t\t\tmarkView: Util.getCurrentView() || 'outside',\n\t\t\t\tmarkCrm: this.DOM.form['UF_CRM_CAL_EVENT[]'] && this.DOM.form['UF_CRM_CAL_EVENT[]'].value ? 'Y' : 'N',\n\t\t\t\tmarkRrule: this.repeatSelector.getType(),\n\t\t\t\tmarkMeeting: this.entry.isMeeting() ? 'Y' : 'N',\n\t\t\t\tmarkType: this.type\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\t\tif (this.isLocationCalendar)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(\n\t\t\t\t\t\tLocation.parseStringValue(this.DOM.form.location.value).room_id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// unset section from hidden\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section && this.context && this.context.sectionManager)\n\t\t\t\t{\n\t\t\t\t\tthis.unsetHiddenSection(section, this.context.sectionManager);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tthis.allowSliderClose();\n\t\t\t\tthis.close();\n\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\n\t\t\t\tif (response.data.entryId)\n\t\t\t\t{\n\t\t\t\t\tif (this.entry.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (response.data.countEventWithEmailGuestAmount)\n\t\t\t\t{\n\t\t\t\t\tUtil.setEventWithEmailGuestAmount(response.data.countEventWithEmailGuestAmount);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.eventList)\n\t\t\t\t\t&& response.data.eventList.length\n\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t&& response.data.eventList[0].REMIND.length\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\tresponse.data.eventList[0].DT_SKIP_TIME === 'Y' ? 'fullDay' : 'withTime',\n\t\t\t\t\t\tresponse.data.eventList[0].REMIND\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('onSave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tEventEmitter.emit('BX.Calendar:onEntrySave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsliderId: this.sliderId,\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t{\n\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\tlet errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (error.code !== \"edit_entry_user_busy\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t{\n\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t}\n\t\t);\n\n\t\treturn true;\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tlet\n\t\t\tusers = [],\n\t\t\tuserIds = [];\n\n\t\tfor (let id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.DOM.form.exclude_users.value = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({users: users});\n\t}\n\n\tclientSideCheck()\n\t{\n\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tif (this.checkDenyClose())\n\t\t\t{\n\t\t\t\tevent.denyAction();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider::onClose\", this.sliderOnClose);\n\t\t\t\tif (this.attendeesSelector)\n\t\t\t\t \tthis.attendeesSelector.closeAll();\n\n\t\t\t\tthis.destroy(event);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUninstall', [{plannerId: this.plannerId}]);\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tif (Location)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\t\t\tUtil.closeAllPopups();\n\t\t\tthis.planner = null;\n\t\t\tthis.opened = false;\n\t\t\tUtil.clearPlannerWatches();\n\t\t}\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\tlet promise = new this.BX.Promise();\n\n\t\tlet entry = this.getCurrentEntry();\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getEditEventSlider', {\n\t\t\tdata: {\n\t\t\t\tevent_id: this.entryId || entry.id,\n\t\t\t\tdate_from: entry ? Util.formatDate(entry.from) : '',\n\t\t\t\tform_type: this.formType,\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId,\n\t\t\t\tentityList: this.participantsEntityList,\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet html = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.updateEntryData(params.entry, {\n\t\t\t\t\t\t\tuserSettings: this.userSettings\n\t\t\t\t\t\t});\n\t\t\t\t\t\tentry = this.getCurrentEntry();\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.editorId = params.editorId;\n\t\t\t\t\t\tthis.formSettings = this.getSettings(params.formSettings || []);\n\n\t\t\t\t\t\tlet attendeesEntityList = this.formDataValue.attendeesEntityList\n\t\t\t\t\t\t\t|| params.attendeesEntityList\n\t\t\t\t\t\t\t|| [];\n\n\t\t\t\t\t\tif (!entry.id && this.participantsEntityList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList = this.participantsEntityList;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isArray(attendeesEntityList))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList.forEach((item) => {\n\t\t\t\t\t\t\t\tif (item.entityId === 'user' && params.userIndex[item.id])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titem.entityType = params.userIndex[item.id].EMAIL_USER ? 'email' : 'employee';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUserSelectorEntityList(attendeesEntityList);\n\n\t\t\t\t\t\tthis.attendeesPreselectedItems = this.getUserSelectorEntityList().map((item) => {return [item.entityId, item.id]});\n\t\t\t\t\t\tthis.setUserSettings(params.userSettings);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestAmount(params.countEventWithEmailGuestAmount);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestLimit(params.eventWithEmailGuestLimit);\n\t\t\t\t\t\tthis.handleSections(params.sections, params.trackingUsersList);\n\t\t\t\t\t\tthis.handleLocationData(params.locationFeatureEnabled, params.locationList, params.iblockMeetingRoomList);\n\t\t\t\t\t\tthis.locationAccess = params.locationAccess;\n\t\t\t\t\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\t\t\t\t\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!entry.id && !entry.sectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setCurrentEntry();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst key = this.type + this.ownerId;\n\t\t\t\t\t\tif (this.userSettings.defaultSections && this.userSettings.defaultSections[key])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSectionManager.setNewEntrySectionId(this.userSettings.defaultSections[key]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpromise.fulfill(html);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\treturn promise;\n\t}\n\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonsWrap = this.DOM.content.querySelector('.calendar-form-buttons-fixed');\n\t\tthis.DOM.saveBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_save`);\n\t\tthis.DOM.closeBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_close`);\n\t\tEvent.bind(this.DOM.saveBtn, 'click', this.save.bind(this));\n\t\tEvent.bind(this.DOM.closeBtn, 'click', this.close.bind(this));\n\n\t\tthis.initFormFieldManager(uid);\n\t\tthis.initDateTimeControl(uid);\n\t\tthis.initNameControl(uid);\n\t\tthis.initEditorControl(uid);\n\t\tthis.initAttendeesControl();\n\t\tthis.initPlanner(uid);\n\t\tthis.initReminderControl(uid);\n\t\tthis.initSectionSelector(uid);\n\t\tthis.initLocationControl(uid);\n\t\tthis.initRepeatRuleControl(uid);\n\t\tthis.initColorControl(uid);\n\t\tthis.initCrmUfControl(uid);\n\t\tthis.initAdditionalControls(uid);\n\n\t\tthis.checkLastItemBorder();\n\n\t\tif (this.DOM.buttonsWrap)\n\t\t{\n\t\t\tBX.ZIndexManager.register(this.DOM.buttonsWrap);\n\t\t}\n\t}\n\n\tupdateEntryData(entryData, options = {})\n\t{\n\t\tif (this.entry instanceof Entry)\n\t\t{\n\t\t\tlet userSettings = options.userSettings || {};\n\n\t\t\tif (Type.isPlainObject(entryData))\n\t\t\t{\n\t\t\t\tthis.entry.prepareData(entryData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.entry.getTimezoneFrom() || this.entry.getTimezoneTo())\n\t\t\t\t{\n\t\t\t\t\tthis.entry.setTimezone(userSettings.timezoneName || userSettings.timezoneDefaultName || null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSections(sections, trackingUsersList)\n\t{\n\t\tthis.sections = sections;\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(sections))\n\t\t{\n\t\t\tsections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.entry.id)\n\t\t{\n\t\t\tthis.getSectionsForEditEvent(this.sections, section);\n\t\t}\n\t}\n\n\thandleLocationData(locationFeatureEnabled, locationList, iblockMeetingRoomList)\n\t{\n\t\tthis.locationFeatureEnabled = !!locationFeatureEnabled;\n\t\tthis.locationList = Type.isArray(locationList)\n\t\t\t? locationList.filter(locationItem => {return locationItem.PERM.view_full})\n\t\t\t: [];\n\t\tthis.iblockMeetingRoomList = iblockMeetingRoomList || [];\n\n\t\tLocation.setLocationList(locationList);\n\t\tLocation.setMeetingRoomList(iblockMeetingRoomList);\n\t}\n\n\tsetUserSettings(userSettings)\n\t{\n\t\tthis.userSettings = userSettings;\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\tsetFormValues()\n\t{\n\t\tlet entry = this.entry;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay) ? this.formDataValue.fullDay : entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName\n\t\t});\n\n\t\tthis.DOM.entryName.value = this.formDataValue.name || entry.getName();\n\n\t\t// Section\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.formDataValue.section)\n\t\t{\n\t\t\tentry.sectionId = parseInt(this.formDataValue.section);\n\t\t}\n\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\n\t\tif (!this.fieldIsPinned('section'))\n\t\t{\n\t\t\tif (\n\t\t\t\tsection['CAL_TYPE'] !== this.type\n\t\t\t\t|| section['CAL_TYPE'] === this.type\n\t\t\t\t&& parseInt(section['OWNER_ID']) !== this.ownerId\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\t\t}\n\n\t\tif (this.isSyncSection(section) && entry.id)\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(true);\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(this.formDataValue.color || entry.getColor() || section.COLOR);\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(\n\t\t\tthis.formDataValue.reminder || entry.getReminders(),\n\t\t\ttrue,\n\t\t\tfalse\n\t\t);\n\n\t\t// Recursion\n\t\tthis.repeatSelector.setValue(this.formDataValue.rrule || entry.getRrule());\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis.DOM.accessibilityInput.value = entry.accessibility;\n\t\t}\n\n\t\t// Location\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.setValue(this.formDataValue.location\n\t\t\t\t|| this.locationSelector.default || entry.getLocation(), false);\n\n\t\t\tthis.locationSelector.checkLocationAccessibility({\n\t\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay)\n\t\t\t\t\t? this.formDataValue.fullDay\n\t\t\t\t\t: entry.fullDay,\n\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t})\n\t\t}\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify)\n\t\t{\n\t\t\tif (this.formDataValue.meetingNotify !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.formDataValue.meetingNotify;\n\t\t\t}\n\t\t\tif (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.entry.data.MEETING.NOTIFY;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.hide_guests)\n\t\t{\n\t\t\tif (this.formDataValue.hideGuests !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.formDataValue.hideGuests === 'Y';\n\t\t\t}\n\t\t\telse if (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.entry.data.MEETING.HIDE_GUESTS;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.allow_invite)\n\t\t{\n\t\t\tif (this.entry.data)\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.data.MEETING && this.entry.data.MEETING.ALLOW_INVITE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.allowInvite;\n\t\t\t}\n\t\t}\n\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t}).then(()=>{\n\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t{\n\t\t\t\tthis.showHideGuestsOption();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t}\n\t\t});\n\t}\n\n\tswitchFullDay(value)\n\t{\n\t\tvalue = !!this.DOM.fullDay.checked;\n\t\tif (value && Type.isString(this.userSettings.timezoneName)\n\t\t\t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t{\n\t\t\tthis.DOM.fromTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.toTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.defTimezone.value = this.userSettings.timezoneName;\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\n\t\tif (this.remindersControl)\n\t\t{\n\t\t\tthis.remindersControl.setFullDayMode(value);\n\t\t}\n\n\t\tthis.refreshPlanner();\n\t}\n\n\tswitchTimezone()\n\t{\n\t\tif (Dom.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tinitFormFieldManager(uid)\n\t{\n\t\tthis.DOM.mainBlock = this.DOM.content.querySelector(`#${uid}_main_block_wrap`);\n\t\tthis.DOM.additionalBlockWrap = this.DOM.content.querySelector(`#${uid}_additional_block_wrap`);\n\t\tthis.DOM.additionalBlock = this.DOM.content.querySelector(`#${uid}_additional_block`);\n\t\tthis.DOM.pinnedNamesWrap = this.DOM.content.querySelector(`#${uid}_additional_pinned_names`);\n\t\tthis.DOM.additionalSwitch = this.DOM.content.querySelector(`#${uid}_additional_switch`);\n\n\n\t\tif (this.isLocationCalendar && !this.fieldIsPinned('location'))\n\t\t{\n\t\t\tthis.pinField('location');\n\t\t}\n\n\t\tEvent.bind(this.DOM.additionalSwitch, 'click', () => {\n\t\t\tDom.toggleClass(this.DOM.additionalSwitch, 'opened');\n\t\t\tDom.toggleClass(this.DOM.additionalBlock, 'invisible');\n\t\t});\n\n\t\tEvent.bind(this.DOM.formWrap, 'click', (e) => {\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (target && target.getAttribute && target.getAttribute('data-bx-fixfield'))\n\t\t\t{\n\t\t\t\tlet fieldName = target.getAttribute('data-bx-fixfield');\n\t\t\t\tif (!this.fieldIsPinned(fieldName))\n\t\t\t\t{\n\t\t\t\t\tthis.pinField(fieldName);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unPinField(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitDateTimeControl(uid)\n\t{\n\t\tthis.dateTimeControl = new SliderDateTimeControl(uid, {\n\t\t\tshowTimezone: true,\n\t\t\touterContent: this.DOM.content\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tlet value = event.getData().value;\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (!this.entry.id && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(\n\t\t\t\t\t\t\tdefaultReminders,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.planner)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(value.from, value.to, value.fullDay);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: value.from,\n\t\t\t\t\t\t\tto: value.to,\n\t\t\t\t\t\t\tfullDay: value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitNameControl(uid)\n\t{\n\t\tthis.DOM.entryName = this.DOM.content.querySelector(`#${uid}_entry_name`);\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.entryName.focus();\n\t\t\tthis.DOM.entryName.select();\n\t\t}, 500);\n\t}\n\n\tinitReminderControl(uid)\n\t{\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.reminderWrap = this.DOM.content.querySelector(`#${uid}_reminder`);\n\t\tthis.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.reminderWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) =>\n\t\t{\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tDom.clean(this.DOM.reminderInputsWrap);\n\t\t\t\tthis.reminderValues.forEach((value) => {\n\t\t\t\t\tthis.DOM.reminderInputsWrap.appendChild(Dom.create('INPUT', {\n\t\t\t\t\t\tprops: {name: 'reminder[]', type: 'hidden'},\n\t\t\t\t\t\tattrs: {value: value}}));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitSectionSelector(uid)\n\t{\n\t\tthis.DOM.sectionInput = this.DOM.content.querySelector(`#${uid}_section`);\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.content.querySelector(`#${uid}_section_wrap`),\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type || 'user',\n\t\t\t\townerId: this.ownerId || this.userId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t}),\n\t\t\tmode: 'full',\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: () => {\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.ID,\n\t\t\t\t\t\tname: section.NAME,\n\t\t\t\t\t\tcolor: section.COLOR\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.sectionInput.value = sectionValue.id;\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.entry.setSectionId(sectionValue.id);\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(\n\t\t\t\t\t\tsectionValue.id,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarType: this.type,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tsections: this.sections\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitEditorControl(uid)\n\t{\n\t\tif (!window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\treturn setTimeout(BX.delegate(this.initEditorControl, this), 50);\n\t\t}\n\n\t\tthis.editor = null;\n\t\tif (window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\tthis.editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (\n\t\t\t!this.editor\n\t\t\t&& top[\"BXHtmlEditor\"]\n\t\t\t&& top[\"BXHtmlEditor\"] !== window[\"BXHtmlEditor\"]\n\t\t)\n\t\t{\n\t\t\tthis.editor = top[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (this.editor && this.editor.IsShown())\n\t\t{\n\t\t\tthis.customizeHtmlEditor();\n\n\t\t\tif (this.formDataValue.description)\n\t\t\t{\n\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.addCustomEvent(window[\"BXHtmlEditor\"], 'OnEditorCreated', function (editor)\n\t\t\t{\n\t\t\t\tif (editor.id === this.editorId)\n\t\t\t\t{\n\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\tthis.customizeHtmlEditor();\n\n\t\t\t\t\tif (this.formDataValue.description)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcustomizeHtmlEditor()\n\t{\n\t\tlet editor = this.editor;\n\t\tif (editor.toolbar && editor.toolbar.controls && editor.toolbar.controls.spoiler)\n\t\t{\n\t\t\tDom.remove(editor.toolbar.controls.spoiler.pCont);\n\t\t}\n\t}\n\n\tinitLocationControl(uid)\n\t{\n\t\tthis.DOM.locationWrap = this.DOM.content.querySelector(`#${uid}_location_wrap`);\n\t\tthis.DOM.locationInput = this.DOM.content.querySelector(`#${uid}_location`);\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\tinputName: 'lo_cation', // don't use 'location' word here mantis:107863\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList,\n\t\t\t\tonChangeCallback: this.refreshPlanner\n\t\t\t}\n\t\t);\n\t}\n\n\tinitRepeatRuleControl(uid)\n\t{\n\t\tthis.DOM.rruleWrap = this.DOM.content.querySelector(`#${uid}_rrule_wrap`);\n\t\tthis.repeatSelector = new RepeatSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.rruleWrap,\n\t\t\t\trruleType: this.DOM.content.querySelector(`#${uid}_rrule_type`),\n\t\t\t\tgetDate: function() {return this.dateTimeControl.getValue().from;}.bind(this)\n\t\t\t}\n\t\t);\n\n\t\tthis.dateTimeControl.subscribe('onChange', ()=>{\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.planner.subscribe('onDateChange', () => {\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\n\tinitAttendeesControl()\n\t{\n\t\tthis.DOM.userSelectorWrap = this.DOM.content.querySelector('.calendar-attendees-selector-wrap');\n\t\tthis.DOM.userSelectorValueWarp = this.DOM.userSelectorWrap.appendChild(Tag.render`<div></div>`);\n\n\t\tthis.userTagSelector = new EntityTagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.attendeesPreselectedItems || [],\n\t\t\t\tzIndex: this.slider.zIndex,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: this.getParticipantsSelectorEntityList(),\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.DOM.userSelectorWrap);\n\t\tthis.DOM.hideGuestsWrap = this.DOM.content.querySelector('.calendar-hide-members-wrap');\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tif (this.planner)\n\t\t{\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\n\t\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\t\tthis.setUserSelectorEntityList(selectedItems.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityType: item.entityType\n\t\t\t\t}}));\n\t\t\tthis.refreshPlanner();\n\t\t}\n\t}\n\n\thasExternalEmailUsers()\n\t{\n\t\treturn !!this.getUserSelectorEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\t}\n\n\tinitPlanner(uid)\n\t{\n\t\tthis.DOM.plannerOuterWrap = this.DOM.content.querySelector(`#${uid}_planner_outer_wrap`);\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerOuterWrap.offsetWidth),\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat,\n\t\t\tlocked: !this.plannerFeatureEnabled\n\t\t});\n\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\t\tthis.planner.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tthis.planner.updateSelector(\n\t\t\tdateTime.from,\n\t\t\tdateTime.to,\n\t\t\tdateTime.fullDay,\n\t\t\t{\n\t\t\t\tfocus: params.focusSelector !== false\n\t\t\t}\n\t\t);\n\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tentityList: params.entityList || [],\n\t\t\t\t\tdateFrom: Util.formatDate(this.planner.scaleDateFrom),\n\t\t\t\t\tdateTo: Util.formatDate(this.planner.scaleDateTo),\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tprevUserList: this.prevUserList\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (this.planner)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\tthis.loadedAccessibilityData\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\t\t});\n\t}\n\n\n\tinitAdditionalControls(uid)\n\t{\n\t\tthis.DOM.accessibilityInput = this.DOM.content.querySelector(`#${uid}_accessibility`);\n\t\tthis.DOM.privateEventCheckbox = this.DOM.content.querySelector(`#${uid}_private`);\n\t\tthis.DOM.importantEventCheckbox = this.DOM.content.querySelector(`#${uid}_important`);\n\t}\n\n\tinitColorControl(uid)\n\t{\n\t\tthis.DOM.colorWrap = this.DOM.content.querySelector(`#${uid}_color_selector_wrap`);\n\t\tthis.colorSelector = new ColorSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.colorWrap\n\t\t\t}\n\t\t);\n\t}\n\n\tinitCrmUfControl(uid)\n\t{\n\t\tthis.DOM.crmUfWrap = BX(uid + '-uf-crm-wrap');\n\n\t\tif (this.DOM.crmUfWrap)\n\t\t{\n\t\t\tlet entry = this.getCurrentEntry();\n\t\t\tlet loader = this.DOM.crmUfWrap.appendChild(Dom.adjust(Util.getLoader(50), {style: {height: '40px', width: '40px'}}));\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCrmUserfield', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tevent_id: (entry && entry.id) ? entry.id : 0\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t// Success\n\t\t\t\t\tfunction(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isDomNode(this.DOM.crmUfWrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.html(this.DOM.crmUfWrap, response.data.html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t// Failure\n\t\t\t\t\tfunction (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(loader);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);\n\t\t\t}.bind(this), 800);\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcheckDenyClose()\n\t{\n\t\t// pending request\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if closing of slider was caused during selection.\n\t\tif (!Type.isNull(this.mouseUpNodeCheck))\n\t\t{\n\t\t\treturn !this.mouseUpNodeCheck;\n\t\t}\n\n\t\t// if (top.BX(this.id + '_time_from_div') && top.BX(this.id + '_time_from_div').style.display !== 'none')\n\t\t// \treturn true;\n\t\t//\n\t\t// if (top.BX(this.id + '_time_to_div') && top.BX(this.id + '_time_to_div').style.display !== 'none')\n\t\t// \treturn true;\n\n\t\treturn this.denyClose;\n\t}\n\n\tsetCurrentEntry(entry = null, userIndex = null)\n\t{\n\t\tthis.entry = EntryManager.getEntryInstance(entry, userIndex, {type: this.type, ownerId: this.ownerId});\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet\n\t\t\tsection = false,\n\t\t\tsectionId = this.getCurrentSectionId();\n\n\t\tif (\n\t\t\tsectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined\n\t\t)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet\n\t\t\tsection = 0,\n\t\t\tentry = this.getCurrentEntry();\n\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tsection = parseInt(entry.sectionId);\n\t\t}\n\n\t\tif (!section)\n\t\t{\n\t\t\tif (this.type === 'location')\n\t\t\t{\n\t\t\t\tsection = RoomsManager.getNewEntrySectionId();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsection = SectionManager.getNewEntrySectionId();\n\n\t\t\t}\n\t\t\tif (!this.sectionIndex[section])\n\t\t\t{\n\t\t\t\tsection = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!section && this.sections[0])\n\t\t{\n\t\t\tsection = parseInt(this.sections[0].ID);\n\t\t}\n\t\treturn section;\n\t}\n\n\tpinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHoldersAdditional[fieldName],\n\t\t\tnewField = placeHolders[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){Dom.addClass(field, 'calendar-hide-field');}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\n\t\t\t\t\twhile(this.DOM.descriptionAdditionalWrap.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewField.appendChild(this.DOM.descriptionAdditionalWrap.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.display = 'none';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tunPinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHolders[fieldName],\n\t\t\tnewField = placeHoldersAdditional[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile(field.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.descriptionAdditionalWrap.appendChild(field.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewField.style.display = '';\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tfieldIsPinned(fieldName)\n\t{\n\t\treturn this.pinnedFieldsIndex[fieldName];\n\t}\n\n\tgetPlaceholders()\n\t{\n\t\tif (!this.placeHolders)\n\t\t{\n\t\t\tthis.placeHolders = {};\n\t\t\tthis.placeHoldersAdditional = {};\n\n\t\t\tlet\n\t\t\t\ti,\n\t\t\t\tfieldId,\n\t\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-additional-placeholder');\n\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHoldersAdditional[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-placeholder');\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHolders[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [this.placeHolders, this.placeHoldersAdditional];\n\t}\n\n\tgetSettings(settings)\n\t{\n\t\tthis.pinnedFieldsIndex = {};\n\t\tlet i, pinnedFields = [];\n\n\t\tfor (i in settings.pinnedFields)\n\t\t{\n\t\t\tif (settings.pinnedFields.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tpinnedFields.push(settings.pinnedFields[i]);\n\t\t\t\tthis.pinnedFieldsIndex[settings.pinnedFields[i]] = true;\n\t\t\t}\n\t\t}\n\t\tsettings.pinnedFields = pinnedFields;\n\t\treturn settings;\n\t}\n\n\tsaveSettings()\n\t{\n\t\tlet fieldName, pinnedFields = [];\n\n\t\tfor (fieldName in this.pinnedFieldsIndex)\n\t\t{\n\t\t\tif (this.pinnedFieldsIndex.hasOwnProperty(fieldName) && this.pinnedFieldsIndex[fieldName])\n\t\t\t{\n\t\t\t\tpinnedFields.push(fieldName);\n\t\t\t}\n\t\t}\n\n\t\tthis.formSettings.pinnedFields = pinnedFields;\n\t\tthis.BX.userOptions.save('calendar', this.formType, 'pinnedFields', pinnedFields);\n\t}\n\n\tupdateAdditionalBlockState(timeout)\n\t{\n\t\tif (timeout !== false)\n\t\t{\n\t\t\tif (this.updateAdditionalBlockTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.updateAdditionalBlockTimeout);\n\t\t\t\tthis.updateAdditionalBlockTimeout = null;\n\t\t\t}\n\t\t\tthis.updateAdditionalBlockTimeout = setTimeout(() => {this.updateAdditionalBlockState(false)}, 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet i, names = this.DOM.additionalBlock.getElementsByClassName('js-calendar-field-name');\n\t\t\tDom.clean(this.DOM.pinnedNamesWrap);\n\t\t\tfor (i = 0; i < names.length; i++)\n\t\t\t{\n\t\t\t\tthis.DOM.pinnedNamesWrap.appendChild(Dom.create(\"SPAN\", {props: {className: 'calendar-additional-alt-promo-text'}, html: names[i].innerHTML}));\n\t\t\t}\n\n\t\t\tif (!names.length)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\n\t\t\tthis.checkLastItemBorder();\n\t\t}\n\t}\n\n\tcheckLastItemBorder()\n\t{\n\t\tlet\n\t\t\tnoBorderClass = 'no-border',\n\t\t\ti, nodes;\n\n\t\tnodes = this.DOM.mainBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\n\t\tnodes = this.DOM.additionalBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue({\n\t\t\t\tfrom: data.dateFrom,\n\t\t\t\tto: data.dateTo\n\t\t\t});\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: data.dateFrom,\n\t\t\t\t\t\tto: data.dateTo,\n\t\t\t\t\t\tfullDay: data.fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (this.planner)\n\t\t\t{\n\t\t\t\tlet fromHours = parseInt(data.dateFrom.getHours()) + Math.floor(data.dateFrom.getMinutes() / 60);\n\t\t\t\tlet toHours = parseInt(data.dateTo.getHours()) + Math.floor(data.dateTo.getMinutes() / 60);\n\t\t\t\tif (\n\t\t\t\t\t(fromHours !== 0 && fromHours <= this.planner.shownScaleTimeFrom)\n\t\t\t\t\t|| (toHours !== 0 && toHours !== 23 && toHours + 1 >= this.planner.shownScaleTimeTo)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(data.dateFrom, data.dateTo, data.fullDay);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tthis.prevUserList = [];\n\t\t\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\t\tfrom: Util.formatDate(data.dateFrom),\n\t\t\t\t\tto: Util.formatDate(data.dateTo),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\t\tfocusSelector: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUserSelectorEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetUserSelectorEntityList(selectorEntityList)\n\t{\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tif (this.locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(this.locationCapacity);\n\t\t\t\tthis.locationCapacity = 0;\n\t\t\t}\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined)\n\t\t\t{\n\t\t\t\tif (locationCapacity)\n\t\t\t\t{\n\t\t\t\t\tlocationCapacity = 0;\n\t\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif ((e.ctrlKey || e.metaKey) && !e.altKey && e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\tif (error.code === \"edit_entry_location_busy\")\n\t\t\t\t{\n\t\t\t\t\treturn Util.showFieldError(error.message, this.DOM.locationWrap, {clearTimeout: 10000});\n\t\t\t\t}\n\t\t\t\terrorText += error.message + \"\\n\";\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tconst entry = this.entry;\n\t\tlet fields = [];\n\n\t\t// Name\n\t\tif (!excludes.includes('name')\n\t\t\t&& entry.name !== this.DOM.form.name.value)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Description\n\t\tif (!excludes.includes('description')\n\t\t\t&& entry.getDescription() !== this.DOM.form.desc.value)\n\t\t{\n\t\t\tfields.push('description');\n\t\t}\n\n\t\t// Location\n\t\tif (!excludes.includes('location')\n\t\t\t&&\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.entry.getLocation()))\n\t\t\t!==\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (!excludes.includes('date&time')\n\t\t\t&&\n\t\t\t(entry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()))\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Section\n\t\tif (!excludes.includes('section')\n\t\t\t&&\n\t\t\tparseInt(entry.sectionId) !== parseInt(this.DOM.sectionInput.value))\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (!excludes.includes('codes')\n\t\t\t&&\n\t\t\tthis.getUserSelectorEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t\t!==\n\t\t\tentry.getAttendeesEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tgetUserCodes()\n\t{\n\t\tconst\n\t\t\tcodes = [],\n\t\t\tvaluesInput = this.DOM.attendeesWrap.querySelectorAll('input[name=\"EVENT_DESTINATION[]\"]');\n\n\t\tfor (let i = 0; i < valuesInput.length; i++)\n\t\t{\n\t\t\tif (!codes.includes(valuesInput[i].value))\n\t\t\t{\n\t\t\t\tcodes.push(valuesInput[i].value);\n\t\t\t}\n\t\t}\n\t\treturn codes;\n\t}\n\n\thandlePull(event: BaseEvent): void\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\n\t\tconst params = Type.isObjectLike(data[1]) ? data[1] : {};\n\n\t\tswitch(command)\n\t\t{\n\t\t\tcase 'edit_event':\n\t\t\tcase 'delete_event':\n\t\t\tcase 'set_meeting_status':\n\t\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES: [];\n\t\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t\t{\n\t\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t\t}\n\t\t\t\tthis.clearAccessibilityData(userIdList);\n\n\t\t\t\tthis.refreshPlannerState();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length && this.prevUserList.length)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => {\n\t\t\t\treturn !userIdList.includes(userId);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetParticipantsSelectorEntityList()\n\t{\n\t\tif (this.participantsSelectorEntityList && this.participantsSelectorEntityList.length)\n\t\t{\n\t\t\treturn this.participantsSelectorEntityList;\n\t\t}\n\n\t\tlet entityList = [\n\t\t\t{\n\t\t\t\tid: 'user',\n\t\t\t\toptions: {\n\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\temailUsers: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'project'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'department',\n\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'meta-user',\n\t\t\t\toptions: { 'all-users': true }\n\t\t\t}\n\t\t];\n\n\t\tif (this.attendeesPreselectedItems)\n\t\t{\n\t\t\tlet projectRole = null;\n\n\t\t\tthis.attendeesPreselectedItems\n\t\t\t\t.forEach((item) => {\n\t\t\t\t\tconst type = item[0];\n\t\t\t\t\tconst role = item[1];\n\t\t\t\t\tif (type === 'project-roles')\n\t\t\t\t\t{\n\t\t\t\t\t\tprojectRole = role;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tif (projectRole)\n\t\t\t{\n\t\t\t\tentityList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-roles',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprojectId: projectRole.split('_')[0]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn entityList;\n\t}\n\n\tisSyncSection(section)\n\t{\n\t\treturn section.EXTERNAL_TYPE === 'icloud'\n\t\t\t|| section.EXTERNAL_TYPE === 'google'\n\t\t\t|| section.EXTERNAL_TYPE === 'office365'\n\t\t\t|| (section.connectionLinks && section.connectionLinks.length)\n\t\t;\n\t}\n\n\tgetSectionsForEditEvent(sections, currentSection)\n\t{\n\t\tconst result = [];\n\t\tconst currentType = currentSection.CAL_TYPE;\n\t\tresult.push(currentSection);\n\n\t\tsections.forEach((section) => {\n\t\t\tif (!this.isSyncSection(section) && section.CAL_TYPE === currentType)\n\t\t\t{\n\t\t\t\tresult.push(section);\n\t\t\t}\n\t\t});\n\n\t\tthis.sections = result;\n\t\tthis.sectionIndex = [];\n\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\t}\n\n\tunsetHiddenSection(section, sectionManager)\n\t{\n\t\tconst sectId = parseInt(section.ID);\n\t\tif (!sectionManager.sectionIsShown(sectId))\n\t\t{\n\t\t\tlet hiddenSections = sectionManager.getHiddenSections();\n\t\t\thiddenSections = hiddenSections.filter((sectionId) => {return sectionId !==sectId;}, this);\n\t\t\tsectionManager.setHiddenSections(hiddenSections);\n\t\t\tsectionManager.saveHiddenSections();\n\t\t}\n\t}\n}"],"names":["SliderDateTimeControl","DateTimeControl","create","DOM","dateTimeWrap","outerContent","querySelector","UID","fromDate","toDate","fromTime","toTime","fromTimeControl","TimeSelector","input","onChangeCallback","handleTimeFromChange","bind","toTimeControl","handleTimeToChange","fullDay","defTimezoneWrap","defTimezone","fromTz","toTz","tzButton","tzOuterCont","tzCont","title","Loc","getMessage","prepareModel","bindEventHandlers","Dom","adjust","props","autocomplete","EventEditForm","constructor","options","uid","sliderId","zIndex","denyClose","formType","STATE","READY","REQUEST","ERROR","sections","sectionIndex","trackingUsersList","userSettings","prevUserList","loadedAccessibilityData","name","type","isLocationCalendar","locationAccess","locationCapacity","dayOfWeekMonthFormat","roomsManager","userId","parseInt","ownerId","entryId","entry","formDataValue","emitter","EventEmitter","setEventNamespace","BX","Util","getBX","context","getCalendarContext","calendarContext","formSettings","pinnedFields","Type","isDate","entryDateFrom","from","to","Date","getTime","participantsEntityList","isArray","participantsSelectorEntityList","entryName","entryDescription","description","refreshPlanner","Runtime","debounce","refreshPlannerState","state","sliderOnClose","hide","handlePullBind","handlePull","keyHandlerBind","keyHandler","initInSlider","slider","promiseResolve","getUrl","addCustomEvent","onLoadSlider","destroy","setCurrentEntry","createContent","then","html","isFunction","opened","show","params","SidePanel","Instance","open","contentCallback","label","text","bgColor","events","onClose","onCloseComplete","onLoad","isOpened","Event","document","subscribe","mouseUpNodeCheck","e","mousedownTarget","target","srcElement","setTimeout","window","proxy","denySliderClose","allowSliderClose","event","getSlider","content","layout","getData","get","initControls","setFormValues","close","checkDenyClose","save","isPlainObject","id","hasExternalEmailUsers","checkEmailLimitationPopup","emailLimitationDialogShown","EntryManager","showEmailLimitationDialog","callback","sendFromEmail","showConfirmedEmailDialog","isRecursive","confirmed","getFormDataChanges","length","showConfirmEditDialog","recursionMode","isFirstInstance","isMeeting","sendInvitesAgain","undefined","includes","getAttendees","find","item","STATUS","showReInviteUsersDialog","addClass","saveBtn","UI","Button","State","CLOCKING","closeBtn","DISABLED","form","value","location","locationSelector","getTextValue","editor","SaveContent","section","getCurrentSection","COLOR","toLowerCase","colorSelector","getValue","color","current_date_from","formatDate","rec_edit_mode","appendChild","Tag","render","requestUid","meeting_host","data","MEETING_HOST","chat_id","MEETING","CHAT_ID","registerRequestId","attendeesEntityList","getUserSelectorEntityList","clean","userSelectorValueWarp","forEach","entity","index","entityId","checkCurrentUsersAccessibility","previousAttendeesList","getAttendeesEntityList","ajax","runAction","FormData","analyticsLabel","calendarAction","emailGuests","markView","getCurrentView","markCrm","markRrule","repeatSelector","getType","markMeeting","markType","response","unsetHiddenRoom","Location","parseStringValue","room_id","sectionManager","unsetHiddenSection","removeClass","showEditEntryNotification","showNewEntryNotification","countEventWithEmailGuestAmount","setEventWithEmailGuestAmount","eventList","REMIND","setNewEntryReminders","DT_SKIP_TIME","emit","BaseEvent","responseData","busyUsersList","handleBusyUsersError","errors","error","code","push","showError","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","exclude_users","join","clientSideCheck","denyAction","removeCustomEvent","attendeesSelector","closeAll","getSliderPage","onCustomEvent","plannerId","unbind","unsubscribe","setCurrentCapacity","closeAllPopups","planner","clearPlannerWatches","promise","Promise","getCurrentEntry","event_id","date_from","form_type","entityList","isOpen","util","trim","set","additionalParams","updateEntryData","uniqueId","editorId","getSettings","userIndex","entityType","EMAIL_USER","setUserSelectorEntityList","attendeesPreselectedItems","map","setUserSettings","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","handleSections","handleLocationData","locationFeatureEnabled","locationList","iblockMeetingRoomList","plannerFeatureEnabled","lock","sectionId","key","defaultSections","SectionManager","setNewEntrySectionId","fulfill","formWrap","buttonsWrap","initFormFieldManager","initDateTimeControl","initNameControl","initEditorControl","initAttendeesControl","initPlanner","initReminderControl","initSectionSelector","initLocationControl","initRepeatRuleControl","initColorControl","initCrmUfControl","initAdditionalControls","checkLastItemBorder","ZIndexManager","register","entryData","Entry","prepareData","getTimezoneFrom","getTimezoneTo","setTimezone","timezoneName","timezoneDefaultName","ind","ID","getSectionsForEditEvent","filter","locationItem","PERM","view_full","setLocationList","setMeetingRoomList","dateTimeControl","setValue","isBoolean","timezoneFrom","timezoneTo","getName","sectionInput","getCurrentSectionId","sectionSelector","updateValue","fieldIsPinned","pinField","isSyncSection","setViewMode","getColor","remindersControl","reminder","getReminders","rrule","getRrule","accessibilityInput","accessibility","default","getLocation","checkLocationAccessibility","currentEventId","privateEventCheckbox","checked","private","importantEventCheckbox","important","meeting_notify","meetingNotify","NOTIFY","hide_guests","hideGuests","HIDE_GUESTS","allow_invite","ALLOW_INVITE","allowInvite","loadPlannerData","getDayLength","timezone","showHideGuestsOption","hideHideGuestsOption","switchFullDay","isString","setFullDayMode","switchTimezone","hasClass","mainBlock","additionalBlockWrap","additionalBlock","pinnedNamesWrap","additionalSwitch","toggleClass","getAttribute","fieldName","unPinField","showTimezone","wasChangedByUser","defaultReminders","getNewEntryReminders","updateSelector","focus","select","reminderValues","reminderWrap","reminderInputsWrap","Reminder","wrap","values","attrs","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","getSectionGroupList","mode","NAME","selectCallback","sectionValue","setSectionId","saveDefaultSectionId","calendarType","delegate","Get","top","IsShown","customizeHtmlEditor","SetContent","toolbar","controls","spoiler","remove","pCont","locationWrap","locationInput","inputName","richLocationEnabled","rruleWrap","RepeatSelector","rruleType","getDate","changeType","userSelectorWrap","userTagSelector","EntityTagSelector","dialogOptions","preselectedItems","handleUserSelectorChanges","entities","getParticipantsSelectorEntityList","searchTabOptions","stubOptions","subtitle","icon","iconOpacity","arrow","renderTo","hideGuestsWrap","showLoader","selectedItems","getDialog","getSelectedItems","style","display","initHintNode","setHideGuestsValue","plannerOuterWrap","Planner","minWidth","offsetWidth","locked","handlePlannerSelectorChanges","handleExpandPlannerTimeline","checkLocationForm","dateTime","focusSelector","resolve","entryLocation","LOCATION","dateFrom","scaleDateFrom","dateTo","scaleDateTo","entries","hideLoader","update","colorWrap","ColorSelector","crmUfWrap","loader","getLoader","height","width","isDomNode","isNull","getEntryInstance","registerEntrySlider","RoomsManager","getNewEntrySectionId","placeHolders","placeHoldersAdditional","getPlaceholders","field","newField","fieldHeight","offsetHeight","descriptionAdditionalWrap","firstChild","pinnedFieldsIndex","CheckAndReInit","saveSettings","updateAdditionalBlockState","i","fieldId","nodes","querySelectorAll","settings","userOptions","timeout","updateAdditionalBlockTimeout","clearTimeout","names","getElementsByClassName","className","innerHTML","noBorderClass","fromHours","getHours","Math","floor","getMinutes","toHours","shownScaleTimeFrom","shownScaleTimeTo","reload","selectorEntityList","usersCount","getCurrentCapacity","addCapacityAlert","removeCapacityAlert","plannerIsShown","plannerWrap","ctrlKey","metaKey","altKey","keyCode","getKeyCode","errorList","errorText","showFieldError","message","alert","excludes","fields","getDescription","desc","getTextLocation","isFullDay","toString","formDataChanged","getUserCodes","codes","valuesInput","attendeesWrap","command","isObjectLike","userIdList","ATTENDEES","eventOwner","CAL_TYPE","OWNER_ID","CREATED_BY","clearAccessibilityData","inviteGuestLink","emailUsers","selectMode","projectRole","role","projectId","split","dynamicLoad","EXTERNAL_TYPE","connectionLinks","currentSection","result","currentType","sectId","sectionIsShown","hiddenSections","getHiddenSections","setHiddenSections","saveHiddenSections"],"mappings":"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"}