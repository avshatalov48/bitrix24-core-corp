{"version":3,"file":"eventeditform.bundle.js","sources":["../src/sliderdatetimecontrol.js","../src/eventeditform.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Dom} from 'main.core';\nimport {DateTimeControl, TimeSelector} from 'calendar.controls';\n\nexport class SliderDateTimeControl extends DateTimeControl\n{\n\tcreate()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_container`);\n\t\tthis.DOM.fromDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_from`);\n\t\tthis.DOM.toDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_to`);\n\t\tthis.DOM.fromTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_from`);\n\t\tthis.DOM.toTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_to`);\n\n\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.fromTime,\n\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t});\n\n\t\tthis.toTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.toTime,\n\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t});\n\n\t\tthis.DOM.fullDay = this.DOM.outerContent.querySelector(`#${this.UID}_date_full_day`);\n\t\tthis.DOM.defTimezoneWrap = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_wrap`);\n\t\tthis.DOM.defTimezone = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default`);\n\n\t\tthis.DOM.fromTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_from`);\n\t\tthis.DOM.toTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_to`);\n\t\tthis.DOM.tzButton = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_btn`);\n\t\tthis.DOM.tzOuterCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_wrap`);\n\t\tthis.DOM.tzCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_inner_wrap`);\n\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_hint`).title = Loc.getMessage('EC_EVENT_TZ_HINT');\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_hint`).title = Loc.getMessage('EC_EVENT_TZ_DEF_HINT');\n\n\t\tthis.prepareModel();\n\t\tthis.bindEventHandlers();\n\t}\n\n\tprepareModel()\n\t{\n\t\tDom.adjust(this.DOM.fromDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.fromTime, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toTime, {props: {autocomplete: 'off'}});\n\t}\n}","\"use strict\";\n\nimport {Type, Event, Loc, Dom, Browser, Tag} from 'main.core';\nimport {SliderDateTimeControl} from './sliderdatetimecontrol.js';\nimport {SectionSelector, Reminder, ColorSelector, Location, RepeatSelector, UserSelector, BusyUsersDialog} from 'calendar.controls';\nimport {Util} from \"calendar.util\";\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {CalendarSectionManager} from \"calendar.calendarsection\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\n\nexport class EventEditForm\n{\n\tDOM = {};\n\tplanner = null;\n\tuid = null;\n\tsliderId = \"calendar:edit-entry-slider\";\n\tzIndex = 3100;\n\tdenyClose = false;\n\tformType = 'slider_main';\n\tSTATE = {READY: 1, REQUEST: 2, ERROR: 3};\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tuserSettings = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.name = options.name || 'eventeditform';\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.userId = options.userId || parseInt(Loc.getMessage('USER_ID'));\n\t\tthis.entryId = parseInt(options.entryId);\n\t\tthis.entry = options.entry || null;\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Calendar.EventEditForm');\n\t\tthis.BX = Util.getBX();\n\t\tthis.formSettings = {\n\t\t\tpinnedFields : {}\n\t\t};\n\t\tif (!this.ownerId && this.type === 'user')\n\t\t{\n\t\t\tthis.ownerId = parseInt(Loc.getMessage('USER_ID'));\n\t\t}\n\n\t\tthis.state = this.STATE.READY;\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.sliderId = slider.getUrl();\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.onLoadSlider.bind(this));\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\t\tthis.setCurrentEntry(this.entry || null);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setCurrentEntry(params.entry);\n\t\tif (params.formType)\n\t\t{\n\t\t\tthis.formType = params.formType;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t\tEvent.bind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\n\t\t// region 'protection from closing slider by accident'\n\t\tthis.mouseUpNodeCheck = null;\n\n\t\tEvent.bind(document, 'mousedown', (e)=>{this.mousedownTarget = e.target || e.srcElement;});\n\t\tEvent.bind(document, 'mouseup', (e)=>{\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (this.mousedownTarget !== target)\n\t\t\t{\n\t\t\t\tthis.mouseUpNodeCheck = false;\n\t\t\t}\n\t\t\tsetTimeout(()=>{this.mouseUpNodeCheck = null;}, 0);\n\t\t});\n\t\t// endregion\n\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupShown\", this.BX.proxy(this.denySliderClose, this));\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupClosed\", this.BX.proxy(this.allowSliderClose, this));\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tlet slider = event.getSlider();\n\t\tthis.DOM.content = slider.layout.content;\n\t\tthis.sliderId = slider.getUrl();\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\n\t\tthis.setFormValues();\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.checkDenyClose())\n\t\t{\n\t\t\tthis.state = this.STATE.READY;\n\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t}\n\t}\n\n\tsave(options = {})\n\t{\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t\treturn;\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (this.entry.id && this.entry.isRecursive()\n\t\t\t&& !options.confirmed && this.checkForSignificantChanges())\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tthis.save({\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tconfirmed: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tDom.addClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\tDom.addClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\tthis.DOM.form.id.value = this.entry.id || 0;\n\n\t\t// Location\n\t\tthis.DOM.form.location.value = this.locationSelector.getTextValue();\n\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.SaveContent();\n\t\t}\n\n\t\tlet section = this.getCurrentSection();\n\t\tif (section)\n\t\t{\n\t\t\t// Color\n\t\t\tif (section.COLOR.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t\t{\n\t\t\t\tthis.DOM.form.color.value = this.colorSelector.getValue();\n\t\t\t}\n\t\t\tthis.BX.userOptions.save('calendar', 'user_settings', 'lastUsedSection', parseInt(section.ID));\n\t\t}\n\n\t\tthis.DOM.form.current_date_from.value = options.recursionMode ? Util.formatDate(this.entry.from) : '';\n\t\tthis.DOM.form.rec_edit_mode.value = options.recursionMode || '';\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.editEntry', {\n\t\t\tdata: new FormData(this.DOM.form)\n\t\t}).then((response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tif (response.data.entryId)\n\t\t\t\t{\n\t\t\t\t\tif (this.entry.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('onSave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t{\n\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\tlet errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (error.code !== \"edit_entry_user_busy\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t{\n\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t}\n\t\t);\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tlet\n\t\t\tusers = [],\n\t\t\tuserIds = [];\n\n\t\tfor (let id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.DOM.form.exclude_users.value = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({users: users});\n\t}\n\n\tclientSideCheck()\n\t{\n\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tif (this.checkDenyClose())\n\t\t\t{\n\t\t\t\tevent.denyAction();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider::onClose\", this.sliderOnClose);\n\t\t\t\tif (this.attendeesSelector)\n\t\t\t\t \tthis.attendeesSelector.closeAll();\n\n\t\t\t\tthis.destroy(event);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\t// if (window.LHEPostForm && window.LHEPostForm.unsetHandler && LHEPostForm.getHandler(this.editorId))\n\t\t\t// {\n\t\t\t// \twindow.LHEPostForm.unsetHandler(this.editorId);\n\t\t\t// }\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUninstall', [{plannerId: this.plannerId}]);\n\t\t\tthis.BX.removeCustomEvent('OnDestinationAddNewItem', this.BX.proxy(this.checkPlannerState, this));\n\t\t\tthis.BX.removeCustomEvent('OnDestinationUnselect', this.BX.proxy(this.checkPlannerState, this));\n\t\t\t//this.BX.removeCustomEvent('OnCalendarPlannerSelectorChanged',\n\t\t\t// this.BX.proxy(this.onCalendarPlannerSelectorChanged, this));\n\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\n\t\t\t//this.BX.removeCustomEvent(\"SidePanel.Slider:onCloseComplete\", this.BX.proxy(this.destroy, this));\n\t\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\n\t\t\t//if (this.attendeesSelector)\n\t\t\t//\tthis.attendeesSelector.closeAll();\n\n\t\t\t//this.calendar.enableKeyHandler();\n\t\t\tEvent.unbind(document, \"click\", Util.applyHacksForPopupzIndex);\n\n\t\t\tthis.planner = null;\n\t\t\tthis.opened = false;\n\t\t}\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\tlet promise = new this.BX.Promise();\n\n\t\tlet entry = this.getCurrentEntry();\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getEditEventSlider', {\n\t\t\tdata: {\n\t\t\t\tevent_id: this.entryId || entry.id,\n\t\t\t\tdate_from: entry ? Util.formatDate(entry.from) : '',\n\t\t\t\tform_type: this.formType,\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet html = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.editorId = params.editorId;\n\t\t\t\t\t\tthis.lastUsedSection = params.lastSection;\n\t\t\t\t\t\tthis.socnetDestination = params.socnetDestination || {};\n\t\t\t\t\t\tthis.formSettings = this.getSettings(params.formSettings || []);\n\t\t\t\t\t\tthis.setUserSettings(params.userSettings);\n\t\t\t\t\t\tthis.handleSections(params.sections, params.trackingUsersList);\n\t\t\t\t\t\tthis.handleLocationData(params.locationFeatureEnabled, params.locationList, params.iblockMeetingRoomList);\n\n\t\t\t\t\t\tif (!entry.id && !entry.sectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setCurrentEntry();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.updateEntryData(params.entry, {\n\t\t\t\t\t\t\tuserSettings: this.userSettings\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tpromise.fulfill(html);\n\n\t\t\t\t\t\tif (window.top.BX !== window.BX)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t// TODO: Dirty Hack! Must get rid of it\n\t\t\t\t\t\t\twindow.top.BX.loadCSS([\n\t\t\t\t\t\t\t\t'/bitrix/components/bitrix/calendar.grid/templates/.default/style.css',\n\t\t\t\t\t\t\t\t'/bitrix/js/calendar/new/calendar.css',\n\t\t\t\t\t\t\t\t'/bitrix/js/calendar/cal-style.css'\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t// if (window[\"BXHtmlEditor\"])\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\t\t\t// \tif (editor)\n\t\t\t\t\t\t// \t{\n\t\t\t\t\t\t// \t\teditor.Destroy();\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// Failure\n\t\t\t\t(response)=>{\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\treturn promise;\n\t}\n\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\n\t\tthis.DOM.saveBtn = this.DOM.content.querySelector(`#${uid}_save`);\n\t\tthis.DOM.closeBtn = this.DOM.content.querySelector(`#${uid}_close`);\n\t\tEvent.bind(this.DOM.saveBtn, 'click', this.save.bind(this));\n\t\tEvent.bind(this.DOM.closeBtn, 'click', this.close.bind(this));\n\t\tthis.DOM.content.querySelector(`#${uid}_save_cmd`).innerHTML = Browser.isMac() ? '(Cmd+Enter)' : '(Ctrl+Enter)';\n\n\t\tthis.initFormFieldManager(uid);\n\t\tthis.initDateTimeControl(uid);\n\t\tthis.initNameControl(uid);\n\t\tthis.initEditorControl(uid);\n\t\tthis.initAttendeesControl(uid);\n\t\tthis.initPlanner(uid);\n\t\tthis.initReminderControl(uid);\n\t\tthis.initSectionSelector(uid);\n\t\tthis.initLocationControl(uid);\n\t\tthis.initRepeatRuleControl(uid);\n\t\tthis.initColorControl(uid);\n\t\tthis.initCrmUfControl(uid);\n\t\tthis.initAdditionalControls(uid);\n\n\t\tthis.checkLastItemBorder();\n\t}\n\n\tupdateEntryData(entryData, options = {})\n\t{\n\t\tif (this.entry instanceof Entry)\n\t\t{\n\t\t\tlet userSettings = options.userSettings || {};\n\n\t\t\tif (Type.isPlainObject(entryData))\n\t\t\t{\n\t\t\t\tthis.entry.prepareData(entryData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.entry.getTimezoneFrom() || this.entry.getTimezoneTo())\n\t\t\t\t{\n\t\t\t\t\tthis.entry.setTimezone(userSettings.timezoneName || userSettings.timezoneDefaultName || null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSections(sections, trackingUsersList)\n\t{\n\t\tthis.sections = sections;\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(sections))\n\t\t{\n\t\t\tsections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\t}\n\n\thandleLocationData(locationFeatureEnabled, locationList, iblockMeetingRoomList)\n\t{\n\t\tthis.locationFeatureEnabled = !!locationFeatureEnabled;\n\t\tthis.locationList = locationList || [];\n\t\tthis.iblockMeetingRoomList = iblockMeetingRoomList || [];\n\n\t\tLocation.setLocationList(locationList);\n\t\tLocation.setMeetingRoomList(iblockMeetingRoomList);\n\t}\n\n\tsetUserSettings(userSettings)\n\t{\n\t\tthis.userSettings = userSettings;\n\t}\n\n\tsetFormValues()\n\t{\n\t\tlet entry = this.entry;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: entry.from,\n\t\t\tto: entry.to,\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName\n\t\t});\n\n\t\tthis.DOM.entryName.value = entry.getName();\n\n\t\t// Section\n\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\n\t\tif (!this.fieldIsPinned('section'))\n\t\t{\n\t\t\tlet currentSection = this.getCurrentSection();\n\t\t\tif (currentSection['CAL_TYPE'] !== this.type || currentSection['CAL_TYPE'] === this.type && parseInt(currentSection['OWNER_ID']) !== this.ownerId)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || this.getCurrentSection().COLOR);\n\n\t\t// Reminders\n\t\tthis.reminderControl.setValue(entry.getReminders());\n\n\t\t// Recursion\n\t\tthis.repeatSelector.setValue(entry.getRrule());\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis.DOM.accessibilityInput.value = entry.accessibility;\n\t\t}\n\n\t\t// Location\n\t\tthis.locationSelector.setValue(entry.getLocation());\n\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.userSelector)\n\t\t{\n\t\t\tthis.userSelector.setValue(entry.getAttendeesCodes());\n\t\t}\n\n\t\tthis.loadPlannerData({\n\t\t\tcodes: entry.getAttendeesCodes(),\n\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tswitchFullDay(value)\n\t{\n\t\tvalue = !!this.DOM.fullDay.checked;\n\t\tif (value && Type.isString(this.userSettings.timezoneName)\n\t\t\t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t{\n\t\t\tthis.DOM.fromTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.toTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.defTimezone.value = this.userSettings.timezoneName;\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\n\t\tif(this.reminderControl)\n\t\t{\n\t\t\tthis.reminderControl.setFullDayMode(value);\n\t\t}\n\n\t\tthis.refreshPlannerState();\n\t}\n\n\tswitchTimezone()\n\t{\n\t\tif (Dom.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tinitFormFieldManager(uid)\n\t{\n\t\tthis.DOM.mainBlock = this.DOM.content.querySelector(`#${uid}_main_block_wrap`);\n\t\tthis.DOM.additionalBlockWrap = this.DOM.content.querySelector(`#${uid}_additional_block_wrap`);\n\t\tthis.DOM.additionalBlock = this.DOM.content.querySelector(`#${uid}_additional_block`);\n\t\tthis.DOM.pinnedNamesWrap = this.DOM.content.querySelector(`#${uid}_additional_pinned_names`);\n\t\tthis.DOM.additionalSwitch = this.DOM.content.querySelector(`#${uid}_additional_switch`);\n\n\t\tEvent.bind(this.DOM.additionalSwitch, 'click', () => {\n\t\t\tDom.toggleClass(this.DOM.additionalSwitch, 'opened');\n\t\t\tDom.toggleClass(this.DOM.additionalBlock, 'invisible');\n\t\t});\n\n\t\tEvent.bind(this.DOM.formWrap, 'click', (e) => {\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (target && target.getAttribute && target.getAttribute('data-bx-fixfield'))\n\t\t\t{\n\t\t\t\tlet fieldName = target.getAttribute('data-bx-fixfield');\n\t\t\t\tif (!this.fieldIsPinned(fieldName))\n\t\t\t\t{\n\t\t\t\t\tthis.pinField(fieldName);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unPinField(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitDateTimeControl(uid)\n\t{\n\t\tthis.dateTimeControl = new SliderDateTimeControl(uid, {\n\t\t\tshowTimezone: true,\n\t\t\touterContent: this.DOM.content\n\t\t});\n\t}\n\n\tinitNameControl(uid)\n\t{\n\t\tthis.DOM.entryName = this.DOM.content.querySelector(`#${uid}_entry_name`);\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.entryName.focus();\n\t\t\tthis.DOM.entryName.select();\n\t\t}, 500);\n\t}\n\n\tinitReminderControl(uid)\n\t{\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.reminderWrap = this.DOM.content.querySelector(`#${uid}_reminder`);\n\t\tthis.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\n\t\tthis.reminderControl = new Reminder({\n\t\t\twrap: this.DOM.reminderWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t\t// showPopupCallBack: function()\n\t\t\t// {\n\t\t\t// \t//_this.denySliderClose();\n\t\t\t// },\n\t\t\t// hidePopupCallBack: function()\n\t\t\t// {\n\t\t\t// \t//_this.allowSliderClose();\n\t\t\t// }\n\t\t});\n\n\t\tthis.reminderControl.subscribe('onChange', (event) =>\n\t\t{\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tDom.clean(this.DOM.reminderInputsWrap);\n\t\t\t\tthis.reminderValues.forEach((value) => {\n\t\t\t\t\tthis.DOM.reminderInputsWrap.appendChild(Dom.create('INPUT', {\n\t\t\t\t\t\tprops: {name: 'reminder[]', type: 'hidden'},\n\t\t\t\t\t\tattrs: {value: value}}));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.dateTimeControl)\n\t\t{\n\t\t\tthis.dateTimeControl.subscribe('onChange', function (event)\n\t\t\t{\n\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tlet value = event.getData().value;\n\t\t\t\t\tthis.reminderControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (this.newPlanner)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.newPlanner.updateSelector(value.from, value.to, value.fullDay);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tinitSectionSelector(uid)\n\t{\n\t\tthis.DOM.sectionInput = this.DOM.content.querySelector(`#${uid}_section`);\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.content.querySelector(`#${uid}_section_wrap`),\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: CalendarSectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type || 'user',\n\t\t\t\townerId: this.ownerId || this.userId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t}),\n\t\t\tmode: 'full',\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: ()=>{\n\t\t\t\tlet section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.ID,\n\t\t\t\t\t\tname: section.NAME,\n\t\t\t\t\t\tcolor: section.COLOR\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) =>{\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\t//this.BX.userOptions.save('calendar', 'user_settings', 'lastUsedSection', sectionValue.id);\n\t\t\t\t\tthis.DOM.sectionInput.value = sectionValue.id;\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.entry.setSectionId(sectionValue.id);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitEditorControl(uid)\n\t{\n\t\tif (!window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\treturn setTimeout(BX.delegate(this.initEditorControl, this), 50);\n\t\t}\n\n\t\tthis.editor = null;\n\t\tif (window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\tthis.editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (!this.editor && top[\"BXHtmlEditor\"] !== window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\tthis.editor = top[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (this.editor && this.editor.IsShown())\n\t\t{\n\t\t\tthis.customizeHtmlEditor();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.addCustomEvent(window[\"BXHtmlEditor\"], 'OnEditorCreated', function (editor)\n\t\t\t{\n\t\t\t\tif (editor.id === this.editorId)\n\t\t\t\t{\n\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\tthis.customizeHtmlEditor();\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcustomizeHtmlEditor()\n\t{\n\t\tlet editor = this.editor;\n\t\tif (editor.toolbar && editor.toolbar.controls && editor.toolbar.controls.spoiler)\n\t\t{\n\t\t\tDom.remove(editor.toolbar.controls.spoiler.pCont);\n\t\t}\n\t}\n\n\tinitLocationControl(uid)\n\t{\n\t\tthis.DOM.locationWrap = this.DOM.content.querySelector(`#${uid}_location_wrap`);\n\t\tthis.DOM.locationInput = this.DOM.content.querySelector(`#${uid}_location`);\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\tinputName: 'lo_cation', // don't use 'location' word here mantis:107863\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\tlocationList: this.locationList,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList,\n\t\t\t\tonChangeCallback: this.checkPlannerState.bind(this)\n\t\t\t}\n\t\t);\n\t}\n\n\tinitRepeatRuleControl(uid)\n\t{\n\t\tthis.DOM.rruleWrap = this.DOM.content.querySelector(`#${uid}_rrule_wrap`);\n\t\tthis.repeatSelector = new RepeatSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.rruleWrap,\n\t\t\t\trruleType: this.DOM.content.querySelector(`#${uid}_rrule_type`),\n\t\t\t\tgetDate: function() {return this.dateTimeControl.getValue().from;}.bind(this)\n\t\t\t}\n\t\t);\n\n\t\tthis.dateTimeControl.subscribe('onChange', ()=>{\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\t}\n\n\tinitAttendeesControl(uid)\n\t{\n\t\t// return;\n\t\t// if (!this.calendar.util.isMeetingsEnabled())\n\t\t// {\n\t\t// \tDom.remove(this.DOM.formWrap.querySelector('.calendar-options-item-destination'));\n\t\t// \tDom.remove(this.DOM.formWrap.querySelector('.calendar-options-item-planner'));\n\t\t// \treturn;\n\t\t// }\n\t\tthis.DOM.attendeesWrap = this.DOM.content.querySelector(`#${uid}_attendees_wrap`);\n\t\tthis.DOM.plannerWrap = this.DOM.content.querySelector(`#${uid}_planner_wrap`);\n\t\tthis.DOM.attendeesTitle = this.DOM.content.querySelector(`#${uid}_attendees_title_wrap`);\n\t\tthis.plannerId = uid + '_slider_planner';\n\n\t\t// let attendeesCodes = null;\n\t\t// if (this.entry.id)\n\t\t// {\n\t\t// \tthis.DOM.attendeesCodesInput = BX(this.id + '_attendees_codes');\n\t\t// \tif (this.DOM.attendeesCodesInput && this.DOM.attendeesCodesInput.value)\n\t\t// \t{\n\t\t// \t\tthis.attendeesCodes = this.DOM.attendeesCodesInput.value.split(',');\n\t\t// \t}\n\t\t// }\n\t\t//\n\t\t// if (!this.attendeesCodes)\n\t\t// {\n\t\t// \tthis.attendeesCodes = this.entry.getAttendeesCodes ? this.entry.getAttendeesCodes() : (this.entry.attendeesCodes || false);\n\t\t// }\n\n\t\tthis.userSelector = new UserSelector(\n\t\t\t{\n\t\t\t\twrapNode: this.DOM.attendeesWrap,\n\t\t\t\titems: this.getUserSelectorConfig('items'),\n\t\t\t\titemsSelected: this.getUserSelectorConfig('itemsSelected'),\n\t\t\t\titemsLast: this.getUserSelectorConfig('itemsLast')\n\t\t\t}\n\t\t);\n\n\t\t// this.attendees = this.entry.attendees || [this.calendar.currentUser];\n\t\t// this.attendeesIndex = {};\n\t\t// this.attendees.forEach(function(userId){this.attendeesIndex[userId] = true;}, this);\n\t\t// this.attendeesCodes = null;\n\t\t// if (this.entry.id)\n\t\t// {\n\t\t// \tthis.DOM.attendeesCodesInput = BX(this.id + '_attendees_codes');\n\t\t// \tif (this.DOM.attendeesCodesInput && this.DOM.attendeesCodesInput.value)\n\t\t// \t{\n\t\t// \t\tthis.attendeesCodes = this.DOM.attendeesCodesInput.value.split(',');\n\t\t// \t}\n\t\t// }\n\t\t//\n\t\t// if (!this.attendeesCodes)\n\t\t// {\n\t\t// \tthis.attendeesCodes = this.entry.getAttendeesCodes ? this.entry.getAttendeesCodes() : (this.entry.attendeesCodes || false);\n\t\t// }\n\n\t\tthis.DOM.plannerWrap = this.DOM.content.querySelector(`#${uid}_planner_wrap1`);\n\t\tthis.DOM.attendeesTitle = this.DOM.content.querySelector(`#${uid}_attendees_title_wrap`);\n\t\tthis.plannerId = uid + '_slider_planner';\n\n\t\tsetTimeout(()=> {\n\t\t\tthis.BX.addCustomEvent('OnDestinationAddNewItem', this.checkPlannerState.bind(this));\n\t\t\tthis.BX.addCustomEvent('OnDestinationUnselect', this.checkPlannerState.bind(this));\n\t\t}, 100);\n\t\t//BX.addCustomEvent('OnCalendarPlannerSelectorChanged', BX.proxy(this.onCalendarPlannerSelectorChanged, this));\n\t\t//BX.addCustomEvent('OnCalendarPlannerUpdated', BX.proxy(this.onCalendarPlannerUpdatedHandler, this));\n\n\t\tthis.DOM.moreOuterWrap = BX(this.id + '_more_outer_wrap');\n\n\t\t//this.DOM.moreLink = BX.adjust(BX(this.id + '_more'), {events: {click: BX.delegate(function(){BX.toggleClass(this.DOM.moreWrap, 'collapse');}, this)}});\n\t\t//this.DOM.moreWrap = BX(this.id + '_more_wrap');\n\n\t\tif (this.DOM.form.allow_invite)\n\t\t{\n\t\t\tif (this.entry.data)\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.data.MEETING && this.entry.data.MEETING.ALLOW_INVITE;\n\t\t\telse\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.allowInvite;\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify)\n\t\t{\n\t\t\tif (this.entry.data && this.entry.data.MEETING)\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.entry.data.MEETING.NOTIFY;\n\t\t\telse\n\t\t\t\tthis.DOM.form.meeting_notify.checked = true; // default value\n\t\t}\n\n\t\tthis.dateTimeControl.subscribe('onChange', function (event)\n\t\t{\n\t\t\t// TODO: we don't need to do additional request here. Need to check it\n\t\t\t//this.checkPlannerState();\n\t\t}.bind(this));\n\t}\n\n\tinitPlanner(uid)\n\t{\n\t\tthis.DOM.plannerOuterWrap = this.DOM.content.querySelector(`#${uid}_planner_outer_wrap`);\n\n\t\tthis.newPlanner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerOuterWrap.offsetWidth),\n\t\t});\n\n\t\tthis.newPlanner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\n\n\t\tthis.newPlanner.show();\n\t\tthis.newPlanner.showLoader();\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.newPlanner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\tcodes: params.codes || [],\n\t\t\t\t\tdateFrom: params.from || '',\n\t\t\t\t\tdateTo: params.to || '',\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tentries: params.entrieIds || false\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.newPlanner.hideLoader();\n\n\t\t\t\t\t\tlet\n\t\t\t\t\t\t\tattendees = [],\n\t\t\t\t\t\t\tattendeesIndex = {},\n\t\t\t\t\t\t\tentries = response.data.entries;\n\n\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\tif (entry.type === 'user')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tattendees.push({\n\t\t\t\t\t\t\t\t\t\tid: entry.id,\n\t\t\t\t\t\t\t\t\t\tname: entry.name,\n\t\t\t\t\t\t\t\t\t\tavatar: entry.avatar,\n\t\t\t\t\t\t\t\t\t\tsmallAvatar: entry.smallAvatar || entry.avatar,\n\t\t\t\t\t\t\t\t\t\turl: entry.url\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\t\t\t\t\tthis.newPlanner.update(\n\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.newPlanner.updateSelector(dateTime.from, dateTime.to, dateTime.fullDay);\n\n\t\t\t\t\t\t// let\n\t\t\t\t\t\t// \ti,\n\t\t\t\t\t\t// \tattendees = [],\n\t\t\t\t\t\t// \tattendeesIndex = {},\n\t\t\t\t\t\t// \tupdateAttendeesControl = false,\n\t\t\t\t\t\t// \tentries = response.data.entries,\n\t\t\t\t\t\t// \taccessibility = response.data.accessibility,\n\t\t\t\t\t\t// \tshowPlanner = !!(params.entries || (entries && entries.length > 0));\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// if (Type.isArray(entries))\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tfor (i = 0; i < entries.length; i++)\n\t\t\t\t\t\t// \t{\n\t\t\t\t\t\t// \t\tif (entries[i].type === 'user')\n\t\t\t\t\t\t// \t\t{\n\t\t\t\t\t\t// \t\t\tattendees.push({\n\t\t\t\t\t\t// \t\t\t\tid: entries[i].id,\n\t\t\t\t\t\t// \t\t\t\tname: entries[i].name,\n\t\t\t\t\t\t// \t\t\t\tavatar: entries[i].avatar,\n\t\t\t\t\t\t// \t\t\t\tsmallAvatar: entries[i].smallAvatar || entries[i].avatar,\n\t\t\t\t\t\t// \t\t\t\turl: entries[i].url\n\t\t\t\t\t\t// \t\t\t});\n\t\t\t\t\t\t// \t\t\tattendeesIndex[entries[i].id] = true;\n\t\t\t\t\t\t// \t\t}\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// }\n\n\t\t\t\t\t\tresolve(response);\n\n\t\t\t\t\t\t// // Show first time or refresh it state\n\t\t\t\t\t\t// if (showPlanner)\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tlet refreshParams = {};\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// \tif (params.entries)\n\t\t\t\t\t\t// \t{\n\t\t\t\t\t\t// \t\tentries = params.entries;\n\t\t\t\t\t\t// \t\trefreshParams.scaleFrom = params.from;\n\t\t\t\t\t\t// \t\trefreshParams.scaleTo = params.to;\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// \trefreshParams.loadedDataFrom = params.from;\n\t\t\t\t\t\t// \trefreshParams.loadedDataTo = params.to;\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// \trefreshParams.data = {\n\t\t\t\t\t\t// \t\tentries: entries,\n\t\t\t\t\t\t// \t\taccessibility: accessibility\n\t\t\t\t\t\t// \t};\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// \trefreshParams.focusSelector = params.focusSelector === undefined ? false : params.focusSelector;\n\t\t\t\t\t\t// \tthis.refreshPlanner(refreshParams);\n\t\t\t\t\t\t// }\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\n\t\t});\n\t}\n\n\n\tinitAdditionalControls(uid)\n\t{\n\t\tthis.DOM.accessibilityInput = this.DOM.content.querySelector(`#${uid}_accessibility`);\n\t\tthis.DOM.privateEventCheckbox = this.DOM.content.querySelector(`#${uid}_private`);\n\t\tthis.DOM.importantEventCheckbox = this.DOM.content.querySelector(`#${uid}_important`);\n\t}\n\n\tinitColorControl(uid)\n\t{\n\t\tthis.DOM.colorWrap = this.DOM.content.querySelector(`#${uid}_color_selector_wrap`);\n\t\tthis.colorSelector = new ColorSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.colorWrap\n\t\t\t}\n\t\t);\n\t}\n\n\tinitCrmUfControl(uid)\n\t{\n\t\tthis.DOM.crmUfWrap = BX(uid + '-uf-crm-wrap');\n\n\t\tif (this.DOM.crmUfWrap)\n\t\t{\n\t\t\tlet entry = this.getCurrentEntry();\n\t\t\tlet loader = this.DOM.crmUfWrap.appendChild(Dom.adjust(Util.getLoader(50), {style: {height: '40px', width: '40px'}}));\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCrmUserfield', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tevent_id: (entry && entry.id) ? entry.id : 0\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t// Success\n\t\t\t\t\tfunction(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isDomNode(this.DOM.crmUfWrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.html(this.DOM.crmUfWrap, response.data.html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t// Failure\n\t\t\t\t\tfunction (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(loader);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);\n\t\t\t}.bind(this), 800);\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcheckDenyClose()\n\t{\n\t\t// pending request\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if closing of slider was caused during selection.\n\t\tif (!Type.isNull(this.mouseUpNodeCheck))\n\t\t{\n\t\t\treturn !this.mouseUpNodeCheck;\n\t\t}\n\n\t\t// if (top.BX(this.id + '_time_from_div') && top.BX(this.id + '_time_from_div').style.display !== 'none')\n\t\t// \treturn true;\n\t\t//\n\t\t// if (top.BX(this.id + '_time_to_div') && top.BX(this.id + '_time_to_div').style.display !== 'none')\n\t\t// \treturn true;\n\n\t\treturn this.denyClose;\n\t}\n\n\tsetCurrentEntry(entry = null, userIndex = null)\n\t{\n\t\tthis.entry = EntryManager.getEntryInstance(entry, userIndex);\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet\n\t\t\tsection = false,\n\t\t\tsectionId = this.getCurrentSectionId();\n\n\t\tif (sectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet\n\t\t\tsection = 0,\n\t\t\tentry = this.getCurrentEntry();\n\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tsection = parseInt(entry.sectionId);\n\t\t}\n\n\t\tif (!section && this.lastUsedSection && this.sections[this.sectionIndex[parseInt(this.lastUsedSection)]])\n\t\t{\n\t\t\tsection = parseInt(this.lastUsedSection);\n\t\t}\n\n\t\tif (!section && this.sections[0])\n\t\t{\n\t\t\tsection = parseInt(this.sections[0].ID);\n\t\t}\n\t\treturn section;\n\t}\n\n\tgetUserSelectorConfig(key)\n\t{\n\t\tlet userSelectorConfig;\n\t\tif (key === 'items')\n\t\t{\n\t\t\tuserSelectorConfig = {\n\t\t\t\tusers: this.socnetDestination.USERS || {},\n\t\t\t\tgroups: this.socnetDestination.EXTRANET_USER === 'Y'\n\t\t\t\t|| this.socnetDestination.DENY_TOALL ? {} :\n\t\t\t\t\t{UA: {id: 'UA', name: this.socnetDestination.DEPARTMENT ? Loc.getMessage('EC_SOCNET_DESTINATION_4') : Loc.getMessage('EC_SOCNET_DESTINATION_3')}},\n\t\t\t\tsonetgroups: this.socnetDestination.SONETGROUPS || {},\n\t\t\t\tdepartment: this.socnetDestination.DEPARTMENT || {},\n\t\t\t\tdepartmentRelation: this.socnetDestination.DEPARTMENT_RELATION || {}\n\t\t\t};\n\t\t}\n\t\telse if (key === 'itemsLast' && this.socnetDestination.LAST)\n\t\t{\n\t\t\tuserSelectorConfig = {\n\t\t\t\tusers: this.socnetDestination.LAST.USERS || {},\n\t\t\t\tgroups: this.socnetDestination.EXTRANET_USER === 'Y' ? {} : {UA: true},\n\t\t\t\tsonetgroups: this.socnetDestination.LAST.SONETGROUPS || {},\n\t\t\t\tdepartment: this.socnetDestination.LAST.DEPARTMENT || {}\n\t\t\t};\n\t\t}\n\t\telse if (key === 'itemsSelected')\n\t\t{\n\t\t\tuserSelectorConfig = this.socnetDestination.SELECTED || {};\n\t\t}\n\n\t\treturn userSelectorConfig;\n\t}\n\n\tsetUserSelectorConfig(socnetDestination)\n\t{\n\t\tthis.socnetDestination = socnetDestination;\n\t}\n\n\tpinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHoldersAdditional[fieldName],\n\t\t\tnewField = placeHolders[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){Dom.addClass(field, 'calendar-hide-field');}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\n\t\t\t\t\twhile(this.DOM.descriptionAdditionalWrap.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewField.appendChild(this.DOM.descriptionAdditionalWrap.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.display = 'none';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tunPinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHolders[fieldName],\n\t\t\tnewField = placeHoldersAdditional[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile(field.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.descriptionAdditionalWrap.appendChild(field.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewField.style.display = '';\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tfieldIsPinned(fieldName)\n\t{\n\t\treturn this.pinnedFieldsIndex[fieldName];\n\t}\n\n\tgetPlaceholders()\n\t{\n\t\tif (!this.placeHolders)\n\t\t{\n\t\t\tthis.placeHolders = {};\n\t\t\tthis.placeHoldersAdditional = {};\n\n\t\t\tlet\n\t\t\t\ti,\n\t\t\t\tfieldId,\n\t\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-additional-placeholder');\n\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHoldersAdditional[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-placeholder');\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHolders[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [this.placeHolders, this.placeHoldersAdditional];\n\t}\n\n\tgetSettings(settings)\n\t{\n\t\tthis.pinnedFieldsIndex = {};\n\t\tlet i, pinnedFields = [];\n\n\t\tfor (i in settings.pinnedFields)\n\t\t{\n\t\t\tif (settings.pinnedFields.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tpinnedFields.push(settings.pinnedFields[i]);\n\t\t\t\tthis.pinnedFieldsIndex[settings.pinnedFields[i]] = true;\n\t\t\t}\n\t\t}\n\t\tsettings.pinnedFields = pinnedFields;\n\t\treturn settings;\n\t}\n\n\tsaveSettings()\n\t{\n\t\tlet fieldName, pinnedFields = [];\n\n\t\tfor (fieldName in this.pinnedFieldsIndex)\n\t\t{\n\t\t\tif (this.pinnedFieldsIndex.hasOwnProperty(fieldName) && this.pinnedFieldsIndex[fieldName])\n\t\t\t{\n\t\t\t\tpinnedFields.push(fieldName);\n\t\t\t}\n\t\t}\n\n\t\tthis.formSettings.pinnedFields = pinnedFields;\n\t\tthis.BX.userOptions.save('calendar', this.formType, 'pinnedFields', pinnedFields);\n\t}\n\n\tupdateAdditionalBlockState(timeout)\n\t{\n\t\tif (timeout !== false)\n\t\t{\n\t\t\tif (this.updateAdditionalBlockTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.updateAdditionalBlockTimeout);\n\t\t\t\tthis.updateAdditionalBlockTimeout = null;\n\t\t\t}\n\t\t\tthis.updateAdditionalBlockTimeout = setTimeout(() => {this.updateAdditionalBlockState(false)}, 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet i, names = this.DOM.additionalBlock.getElementsByClassName('js-calendar-field-name');\n\t\t\tDom.clean(this.DOM.pinnedNamesWrap);\n\t\t\tfor (i = 0; i < names.length; i++)\n\t\t\t{\n\t\t\t\tthis.DOM.pinnedNamesWrap.appendChild(Dom.create(\"SPAN\", {props: {className: 'calendar-additional-alt-promo-text'}, html: names[i].innerHTML}));\n\t\t\t}\n\n\t\t\tif (!names.length)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\n\t\t\tthis.checkLastItemBorder();\n\t\t}\n\t}\n\n\tcheckLastItemBorder()\n\t{\n\t\tlet\n\t\t\tnoBorderClass = 'no-border',\n\t\t\ti, nodes;\n\n\t\tnodes = this.DOM.mainBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\n\t\tnodes = this.DOM.additionalBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue({\n\t\t\t\tfrom: data.dateFrom,\n\t\t\t\tto: data.dateTo\n\t\t\t});\n\t\t\t//this.checkLocationAccessibility();\n\t\t}\n\t}\n\n\t// onCalendarPlannerSelectorChanged(params)\n\t// {\n\t// \tif (params.plannerId === this.plannerId)\n\t// \t{\n\t// \t\tif (!this.planner)\n\t// \t\t{\n\t// \t\t\tthis.planner = params.planner;\n\t// \t\t}\n\t//\n\t// \t\t// Date time\n\t// \t\tthis.dateTimeControl.setValue({\n\t// \t\t\tfrom: params.dateFrom,\n\t// \t\t\tto: params.dateTo\n\t// \t\t});\n\t// \t\t//this.checkLocationAccessibility();\n\t// \t}\n\t// }\n\n\t// onCalendarPlannerUpdatedHandler(planner, params)\n\t// {\n\t// \tif (!this.planner)\n\t// \t{\n\t// \t\tthis.planner = planner;\n\t// \t\t//this.checkLocationAccessibility();\n\t// \t}\n\t// }\n\n\tcheckPlannerState()\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tthis.loadPlannerData({\n\t\t\tcodes: this.userSelector.getCodes(),\n\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tupdatePlanner(params)\n\t{\n\t\tif (!params)\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\t//let currentEntryLocation = this.calendar.util.parseLocation(this.entry.location);\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\tdata: {\n\t\t\t\tentry_id: this.entry.id || 0,\n\t\t\t\tcodes: params.codes || [],\n\t\t\t\tdate_from: params.from || '',\n\t\t\t\tdate_to: params.to || '',\n\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\tlocation: params.location || '',\n\t\t\t\t//roomEventId: currentEntryLocation ? (currentEntryLocation.room_event_id || currentEntryLocation.mrevid ||\n\t\t\t\t// false) : false,\n\t\t\t\tentries: params.entrieIds || false,\n\t\t\t\t//add_cur_user_to_list: this.calendar.util.userIsOwner() ? 'Y' : 'N'\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\tfunction(response)\n\t\t\t\t{\n\t\t\t\t\tlet\n\t\t\t\t\t\ti,\n\t\t\t\t\t\tattendees = [],\n\t\t\t\t\t\tattendeesIndex = {},\n\t\t\t\t\t\tupdateAttendeesControl = false,\n\t\t\t\t\t\tentries = response.data.entries,\n\t\t\t\t\t\taccessibility = response.data.accessibility,\n\t\t\t\t\t\tshowPlanner = !!(params.entries || (entries && entries.length > 0));\n\n\t\t\t\t\tif (Type.isArray(entries))\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (i = 0; i < entries.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (entries[i].type === 'user')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tattendees.push({\n\t\t\t\t\t\t\t\t\tid: entries[i].id,\n\t\t\t\t\t\t\t\t\tname: entries[i].name,\n\t\t\t\t\t\t\t\t\tavatar: entries[i].avatar,\n\t\t\t\t\t\t\t\t\tsmallAvatar: entries[i].smallAvatar || entries[i].avatar,\n\t\t\t\t\t\t\t\t\turl: entries[i].url\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tattendeesIndex[entries[i].id] = true;\n\n\t\t\t\t\t\t\t\t// if (!_this.attendeesIndex[response.entries[i].id])\n\t\t\t\t\t\t\t\t// \tupdateAttendeesControl = true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// if (!updateAttendeesControl)\n\t\t\t\t\t// {\n\t\t\t\t\t// \tfor (let id in _this.attendeesIndex)\n\t\t\t\t\t// \t{\n\t\t\t\t\t// \t\tif (this.attendeesIndex.hasOwnProperty(id) && !attendeesIndex[id])\n\t\t\t\t\t// \t\t{\n\t\t\t\t\t// \t\t\tupdateAttendeesControl = true;\n\t\t\t\t\t// \t\t\tbreak;\n\t\t\t\t\t// \t\t}\n\t\t\t\t\t// \t}\n\t\t\t\t\t// }\n\n\t\t\t\t\t// Show first time or refresh it state\n\t\t\t\t\tif (showPlanner)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet refreshParams = {};\n\n\t\t\t\t\t\tif (params.entries)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentries = params.entries;\n\t\t\t\t\t\t\trefreshParams.scaleFrom = params.from;\n\t\t\t\t\t\t\trefreshParams.scaleTo = params.to;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trefreshParams.loadedDataFrom = params.from;\n\t\t\t\t\t\trefreshParams.loadedDataTo = params.to;\n\n\t\t\t\t\t\trefreshParams.data = {\n\t\t\t\t\t\t\tentries: entries,\n\t\t\t\t\t\t\taccessibility: accessibility\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\trefreshParams.focusSelector = params.focusSelector === undefined ? false : params.focusSelector;\n\t\t\t\t\t\tthis.refreshPlanner(refreshParams);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this),\n\t\t\t\t// Failure\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t}\n\n\trefreshPlanner(params = {})\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\n\t\t//this.plannerData = params.data;\n\t\tlet\n\t\t\tfrom = dateTime.from,\n\t\t\tto = dateTime.to,\n\t\t\tconfig = {},\n\t\t\tscaleFrom, scaleTo;\n\n\t\tif (Type.isDate(from) && Type.isDate(to) &&\n\t\t\tfrom.getTime() <= to.getTime())\n\t\t{\n\t\t\tDom.addClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t\t\tif (!this.plannerIsShown() && params.show || params.focusSelector === undefined)\n\t\t\t{\n\t\t\t\tparams.focusSelector = true;\n\t\t\t}\n\n\t\t\tif (dateTime.fullDay)\n\t\t\t{\n\t\t\t\tscaleFrom = params.scaleFrom || new Date(from.getTime() - Util.getDayLength() * 3);\n\t\t\t\tscaleTo = params.scaleTo || new Date(scaleFrom.getTime() + Util.getDayLength() * 10);\n\n\t\t\t\tconfig.scaleType = '1day';\n\t\t\t\tconfig.scaleDateFrom = scaleFrom;\n\t\t\t\tconfig.scaleDateTo = scaleTo;\n\t\t\t\tconfig.adjustCellWidth = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconfig.changeFromFullDay = {\n\t\t\t\t\tscaleType: '1hour',\n\t\t\t\t\ttimelineCellWidth: 40\n\t\t\t\t};\n\t\t\t\t//config.shownScaleTimeFrom = parseInt(this.calendar.util.getWorkTime().start);\n\t\t\t\t//config.shownScaleTimeTo = parseInt(this.calendar.util.getWorkTime().end);\n\t\t\t}\n\t\t\tconfig.entriesListWidth = this.DOM.attendeesTitle.offsetWidth + 16;\n\t\t\tconfig.width = this.DOM.plannerWrap.offsetWidth;\n\n\t\t\tif (this.DOM.moreOuterWrap)\n\t\t\t{\n\t\t\t\tthis.DOM.moreOuterWrap.style.paddingLeft = config.entriesListWidth + 'px';\n\t\t\t}\n\n\t\t\t// RRULE\n\t\t\tlet RRULE = false;\n\t\t\t// if (this.DOM.rruleType.value !== 'NONE' && false)\n\t\t\t// {\n\t\t\t// \tRRULE = {\n\t\t\t// \t\tFREQ: this.RepeatSelect.value,\n\t\t\t// \t\tINTERVAL: this.RepeatCount.value,\n\t\t\t// \t\tUNTIL: this.RepeatDiapTo.value\n\t\t\t// \t};\n\t\t\t//\n\t\t\t// \tif (RRULE.UNTIL == EC_MESS.NoLimits)\n\t\t\t// \t\tRRULE.UNTIL = '';\n\t\t\t//\n\t\t\t// \tif (RRULE.FREQ == 'WEEKLY')\n\t\t\t// \t{\n\t\t\t// \t\tRRULE.WEEK_DAYS = [];\n\t\t\t// \t\tfor (i = 0; i < 7; i++)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tif (this.RepeatWeekDaysCh[i].checked)\n\t\t\t// \t\t\t{\n\t\t\t// \t\t\t\tRRULE.WEEK_DAYS.push(this.RepeatWeekDaysCh[i].value);\n\t\t\t// \t\t\t}\n\t\t\t// \t\t}\n\t\t\t//\n\t\t\t// \t\tif (!RRULE.WEEK_DAYS.length)\n\t\t\t// \t\t{\n\t\t\t// \t\t\tRRULE = false;\n\t\t\t// \t\t}\n\t\t\t// \t}\n\t\t\t// }\n\n\t\t\t//this.checkLocationAccessibility();\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUpdate', [\n\t\t\t\t{\n\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\tconfig: config,\n\t\t\t\t\tfocusSelector: params.focusSelector,\n\t\t\t\t\tselector: {\n\t\t\t\t\t\tfrom: from,\n\t\t\t\t\t\tto: to,\n\t\t\t\t\t\tfullDay: dateTime.fullDay,\n\t\t\t\t\t\tRRULE: RRULE,\n\t\t\t\t\t\tanimation: true,\n\t\t\t\t\t\tupdateScaleLimits: true\n\t\t\t\t\t},\n\t\t\t\t\tdata: params.data || false,\n\t\t\t\t\tloadedDataFrom: params.loadedDataFrom,\n\t\t\t\t\tloadedDataTo: params.loadedDataTo,\n\t\t\t\t\tshow: true\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\n\tkeyHandler(e)\n\t{\n\t\tif((e.ctrlKey || e.metaKey) && !e.altKey && e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\tif (error.code === \"edit_entry_location_busy\")\n\t\t\t\t{\n\t\t\t\t\treturn Util.showFieldError(error.message, this.DOM.locationWrap, {clearTimeout: 10000});\n\t\t\t\t}\n\t\t\t\terrorText += error.message + \"\\n\";\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\tcheckForSignificantChanges()\n\t{\n\t\treturn true;\n\t\tlet res = false;\n\n\t\t// Name\n\t\tif (!res && this.entry.name !== this.DOM.form.name.value)\n\t\t\tres = true;\n\n\t\t// Description\n\t\tif (!res && this.descriptionValue !== this.DOM.form.desc.value)\n\t\t\tres = true;\n\n\t\t// Location\n\t\tif (!res && this.entry.data.LOCATION !== this.DOM.form.lo_cation.value)\n\t\t\tres = true;\n\n\t\t// Date & time\n\t\tif (!res && this.entry.isFullDay() != this.DOM.form.skip_time.checked)\n\t\t\tres = true;\n\n\t\tif (!res)\n\t\t{\n\t\t\tlet\n\t\t\t\tfrom = BX.parseDate(this.entry.data.DATE_FROM),\n\t\t\t\tto = new Date(from.getTime() + (this.entry.data.DT_LENGTH - (this.entry.isFullDay() ? 1 : 0)) * 1000);\n\n\t\t\tif (Math.abs(from.getTime() - this.fromDate.getTime()) > 1000\n\t\t\t\t|| Math.abs(to.getTime() - this.toDate.getTime()) > 1000)\n\t\t\t\tres = true;\n\n\t\t\tif (!res && !this.entry.isFullDay()\n\t\t\t\t&& (this.entry.data.TZ_FROM !== this.DOM.form.tz_from.value\n\t\t\t\t\t|| this.entry.data.TZ_TO !== this.DOM.form.tz_to.value))\n\t\t\t{\n\t\t\t\tres = true;\n\t\t\t}\n\t\t}\n\n\t\t// Attendees\n\t\tif (!res && this.plannerData && false)\n\t\t{\n\t\t\tlet i, attendeesInd = {}, count = 0;\n\t\t\tif (this.entry.isMeeting())\n\t\t\t{\n\t\t\t\tlet attendeeList = this.entry.getAttendees();\n\n\n\t\t\t\tfor (i in attendeeList)\n\t\t\t\t{\n\t\t\t\t\tif (attendeeList.hasOwnProperty(i) && attendeeList[i]['ID'])\n\t\t\t\t\t{\n\t\t\t\t\t\tattendeesInd[attendeeList[i]['ID']] = true;\n\t\t\t\t\t\tcount++\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if we have new attendees\n\t\t\tfor (i in this.plannerData.entries)\n\t\t\t{\n\t\t\t\tif (this.plannerData.entries.hasOwnProperty(i) && this.plannerData.entries[i].type == 'user' && this.plannerData.entries[i].id)\n\t\t\t\t{\n\t\t\t\t\tif (attendeesInd[this.plannerData.entries[i].id])\n\t\t\t\t\t{\n\t\t\t\t\t\tattendeesInd[this.plannerData.entries[i].id] = '+';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tres = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check if we have all old attendees\n\t\t\tif (!res && attendeesInd)\n\t\t\t{\n\t\t\t\tfor (i in attendeesInd)\n\t\t\t\t{\n\t\t\t\t\tif (attendeesInd.hasOwnProperty(i) && attendeesInd[i] !== '+')\n\t\t\t\t\t{\n\t\t\t\t\t\tres = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Recurtion\n\t\t//if (!res && (this.oEvent.RRULE.FREQ != this.RepeatSelect.value))\n\t\t//\tres = true;\n\t\t//\n\t\t//if (!res && (this.oEvent.RRULE.INTERVAL != this.RepeatCount.value))\n\t\t//\tres = true;\n\t\t//\n\t\t//if (!res && this.oEvent.RRULE.FREQ == 'WEEKLY' && this.oEvent.RRULE.BYDAY)\n\t\t//{\n\t\t//\tlet BYDAY = [];\n\t\t//\tfor (i in this.oEvent.RRULE.BYDAY)\n\t\t//\t{\n\t\t//\t\tif (this.oEvent.RRULE.BYDAY.hasOwnProperty(i))\n\t\t//\t\t{\n\t\t//\t\t\tBYDAY.push(this.oEvent.RRULE.BYDAY[i]);\n\t\t//\t\t}\n\t\t//\t}\n\t\t//\tif (BYDAY.join(',') != top.BX('event-rrule-byday' + this.id).value)\n\t\t//\t\tres = true;\n\t\t//}\n\n\t\treturn res;\n\t}\n}"],"names":["SliderDateTimeControl","DOM","dateTimeWrap","outerContent","querySelector","UID","fromDate","toDate","fromTime","toTime","fromTimeControl","TimeSelector","input","onChangeCallback","handleTimeFromChange","bind","toTimeControl","handleTimeToChange","fullDay","defTimezoneWrap","defTimezone","fromTz","toTz","tzButton","tzOuterCont","tzCont","title","Loc","getMessage","prepareModel","bindEventHandlers","Dom","adjust","props","autocomplete","DateTimeControl","EventEditForm","options","READY","REQUEST","ERROR","name","type","ownerId","userId","parseInt","entryId","entry","emitter","EventEmitter","setEventNamespace","BX","Util","getBX","formSettings","pinnedFields","state","STATE","sliderOnClose","hide","slider","promiseResolve","sliderId","getUrl","addCustomEvent","onLoadSlider","destroy","setCurrentEntry","createContent","then","html","Type","isFunction","opened","params","formType","SidePanel","Instance","open","contentCallback","label","text","bgColor","events","onClose","onCloseComplete","onLoad","keyHandlerBind","keyHandler","Event","document","applyHacksForPopupzIndex","mouseUpNodeCheck","e","mousedownTarget","target","srcElement","setTimeout","window","proxy","denySliderClose","allowSliderClose","event","getSlider","content","layout","getData","get","initControls","uid","setFormValues","checkDenyClose","close","isPlainObject","id","isRecursive","confirmed","checkForSignificantChanges","EntryManager","showConfirmEditDialog","callback","save","recursionMode","addClass","saveBtn","UI","Button","State","CLOCKING","closeBtn","DISABLED","form","value","location","locationSelector","getTextValue","editor","SaveContent","section","getCurrentSection","COLOR","toLowerCase","colorSelector","getValue","color","userOptions","ID","current_date_from","formatDate","from","rec_edit_mode","ajax","runAction","data","FormData","response","removeClass","showEditEntryNotification","showNewEntryNotification","emit","BaseEvent","responseData","busyUsersList","handleBusyUsersError","errors","forEach","error","code","push","length","showError","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","subscribe","exclude_users","join","show","denyAction","removeCustomEvent","attendeesSelector","closeAll","getSliderPage","onCustomEvent","plannerId","checkPlannerState","unbind","planner","promise","Promise","getCurrentEntry","event_id","date_from","form_type","isOpen","util","trim","set","additionalParams","uniqueId","editorId","lastUsedSection","lastSection","socnetDestination","getSettings","setUserSettings","userSettings","handleSections","sections","trackingUsersList","handleLocationData","locationFeatureEnabled","locationList","iblockMeetingRoomList","sectionId","updateEntryData","fulfill","top","loadCSS","formWrap","innerHTML","Browser","isMac","initFormFieldManager","initDateTimeControl","initNameControl","initEditorControl","initAttendeesControl","initPlanner","initReminderControl","initSectionSelector","initLocationControl","initRepeatRuleControl","initColorControl","initCrmUfControl","initAdditionalControls","checkLastItemBorder","entryData","Entry","prepareData","getTimezoneFrom","getTimezoneTo","setTimezone","timezoneName","timezoneDefaultName","sectionIndex","isArray","ind","Location","setLocationList","setMeetingRoomList","dateTimeControl","setValue","to","timezoneFrom","timezoneTo","entryName","getName","sectionInput","getCurrentSectionId","sectionSelector","updateValue","fieldIsPinned","currentSection","pinField","getColor","reminderControl","getReminders","repeatSelector","getRrule","accessibilityInput","accessibility","getLocation","privateEventCheckbox","checked","private","importantEventCheckbox","important","userSelector","getAttendeesCodes","loadPlannerData","codes","getTime","getDayLength","timezone","isString","setFullDayMode","refreshPlannerState","hasClass","mainBlock","additionalBlockWrap","additionalBlock","pinnedNamesWrap","additionalSwitch","toggleClass","getAttribute","fieldName","unPinField","showTimezone","focus","select","reminderValues","reminderWrap","reminderInputsWrap","appendChild","Tag","render","Reminder","wrap","zIndex","values","clean","create","attrs","newPlanner","updateSelector","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","CalendarSectionManager","getSectionGroupList","mode","NAME","selectCallback","sectionValue","setSectionId","delegate","Get","IsShown","customizeHtmlEditor","toolbar","controls","spoiler","remove","pCont","locationWrap","locationInput","inputName","richLocationEnabled","rruleWrap","RepeatSelector","rruleType","getDate","getType","changeType","attendeesWrap","plannerWrap","attendeesTitle","UserSelector","wrapNode","items","getUserSelectorConfig","itemsSelected","itemsLast","moreOuterWrap","allow_invite","MEETING","ALLOW_INVITE","allowInvite","meeting_notify","NOTIFY","plannerOuterWrap","Planner","minWidth","offsetWidth","handlePlannerSelectorChanges","showLoader","resolve","dateFrom","dateTo","entries","entrieIds","hideLoader","attendees","attendeesIndex","avatar","smallAvatar","url","dateTime","update","colorWrap","ColorSelector","crmUfWrap","loader","getLoader","style","height","width","isDomNode","denyClose","isNull","userIndex","getEntryInstance","undefined","key","userSelectorConfig","USERS","groups","EXTRANET_USER","DENY_TOALL","UA","DEPARTMENT","sonetgroups","SONETGROUPS","department","departmentRelation","DEPARTMENT_RELATION","LAST","SELECTED","getPlaceholders","placeHolders","placeHoldersAdditional","field","newField","fieldHeight","offsetHeight","descriptionAdditionalWrap","firstChild","display","pinnedFieldsIndex","CheckAndReInit","saveSettings","updateAdditionalBlockState","i","fieldId","nodes","querySelectorAll","settings","timeout","updateAdditionalBlockTimeout","clearTimeout","names","getElementsByClassName","className","noBorderClass","getCodes","entry_id","date_to","updateAttendeesControl","showPlanner","refreshParams","scaleFrom","scaleTo","loadedDataFrom","loadedDataTo","focusSelector","refreshPlanner","config","isDate","plannerIsShown","Date","scaleType","scaleDateFrom","scaleDateTo","adjustCellWidth","changeFromFullDay","timelineCellWidth","entriesListWidth","paddingLeft","RRULE","selector","animation","updateScaleLimits","ctrlKey","metaKey","altKey","keyCode","getKeyCode","errorList","errorText","showFieldError","message","alert","res","descriptionValue","desc","LOCATION","lo_cation","isFullDay","skip_time","parseDate","DATE_FROM","DT_LENGTH","Math","abs","TZ_FROM","tz_from","TZ_TO","tz_to","plannerData","attendeesInd","isMeeting","attendeeList","getAttendees","count"],"mappings":"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"}