{"version":3,"file":"eventeditform.bundle.js","sources":["../src/sliderdatetimecontrol.js","../src/eventeditform.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Dom} from 'main.core';\nimport {DateTimeControl, TimeSelector} from 'calendar.controls';\n\nexport class SliderDateTimeControl extends DateTimeControl\n{\n\tcreate()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_container`);\n\t\tthis.DOM.fromDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_from`);\n\t\tthis.DOM.toDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_to`);\n\t\tthis.DOM.fromTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_from`);\n\t\tthis.DOM.toTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_to`);\n\n\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.fromTime,\n\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t});\n\n\t\tthis.toTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.toTime,\n\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t});\n\n\t\tthis.DOM.fullDay = this.DOM.outerContent.querySelector(`#${this.UID}_date_full_day`);\n\t\tthis.DOM.defTimezoneWrap = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_wrap`);\n\t\tthis.DOM.defTimezone = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default`);\n\n\t\tthis.DOM.fromTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_from`);\n\t\tthis.DOM.toTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_to`);\n\t\tthis.DOM.tzButton = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_btn`);\n\t\tthis.DOM.tzOuterCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_wrap`);\n\t\tthis.DOM.tzCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_inner_wrap`);\n\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_hint`).title = Loc.getMessage('EC_EVENT_TZ_HINT');\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_hint`).title = Loc.getMessage('EC_EVENT_TZ_DEF_HINT');\n\n\t\tthis.prepareModel();\n\t\tthis.bindEventHandlers();\n\n\t\tif (BX.isAmPmMode())\n\t\t{\n\t\t\tthis.DOM.fromTime.style.minWidth = '8em';\n\t\t\tthis.DOM.toTime.style.minWidth = '8em';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.fromTime.style.minWidth = '6em';\n\t\t\tthis.DOM.toTime.style.minWidth = '6em';\n\t\t}\n\t}\n\n\tprepareModel()\n\t{\n\t\tDom.adjust(this.DOM.fromDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.fromTime, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toTime, {props: {autocomplete: 'off'}});\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag, Runtime} from 'main.core';\nimport {SliderDateTimeControl} from './sliderdatetimecontrol.js';\nimport {SectionSelector, Reminder, ColorSelector, Location, RepeatSelector, BusyUsersDialog} from 'calendar.controls';\nimport {Util} from 'calendar.util';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {SectionManager} from \"calendar.sectionmanager\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {TagSelector as EntityTagSelector} from 'ui.entity-selector';\nimport { RoomsManager } from 'calendar.roomsmanager';\n\nexport class EventEditForm\n{\n\tDOM = {};\n\tuid = null;\n\tsliderId = \"calendar:edit-entry-slider\";\n\tzIndex = 3100;\n\tdenyClose = false;\n\tformType = 'slider_main';\n\tSTATE = {READY: 1, REQUEST: 2, ERROR: 3};\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tuserSettings = {};\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.name = options.name || 'eventeditform';\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.locationAccess = options.locationAccess || false;\n\t\tthis.locationCapacity = options.locationCapacity || 0;\n\t\tthis.dayOfWeekMonthFormat = options.dayOfWeekMonthFormat || false;\n\t\tthis.roomsManager = options.roomsManager || null;\n\t\tthis.userId = options.userId || parseInt(Loc.getMessage('USER_ID'));\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.entryId = parseInt(options.entryId) || null;\n\t\tthis.entry = options.entry || null;\n\t\tthis.formDataValue = options.formDataValue || {};\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Calendar.EventEditForm');\n\t\tthis.BX = Util.getBX();\n\t\tthis.context = Util.getCalendarContext() ?? options.calendarContext;\n\t\tif (!Util.getCalendarContext())\n\t\t{\n\t\t\tUtil.setCalendarContext(this.context)\n\t\t}\n\n\t\tthis.formSettings = {\n\t\t\tpinnedFields : {}\n\t\t};\n\t\tif (!this.ownerId && this.type === 'user')\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\n\t\tif (Type.isDate(options.entryDateFrom) && !this.formDataValue.from)\n\t\t{\n\t\t\tthis.formDataValue.from = options.entryDateFrom;\n\t\t\tthis.formDataValue.to = new Date(options.entryDateFrom.getTime() + 3600);\n\t\t}\n\n\t\tthis.participantsEntityList = Type.isArray(options.participantsEntityList)\n\t\t\t? options.participantsEntityList\n\t\t\t: [];\n\n\t\tthis.participantsSelectorEntityList = Type.isArray(options.participantsSelectorEntityList)\n\t\t\t? options.participantsSelectorEntityList\n\t\t\t: [];\n\n\t\tif (options.entryName && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.name = options.entryName;\n\t\t}\n\t\tif (options.entryDescription && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.description = options.entryDescription;\n\t\t}\n\n\t\tthis.refreshPlanner = Runtime.debounce(this.refreshPlannerState, 100, this);\n\t\tthis.state = this.STATE.READY;\n\t\tthis.doShowConfirmPopup = true;\n\t\tthis.sliderOnClose = this.hideWithConfirm.bind(this);\n\t\tthis.handlePullBind = this.handlePull.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\n\t\tthis.lastUsedSaveOptions = {};\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.sliderId = slider.getUrl();\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.onLoadSlider.bind(this));\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\t\tthis.setCurrentEntry(this.entry || null);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setCurrentEntry(params.entry);\n\t\tif (params.formType)\n\t\t{\n\t\t\tthis.formType = params.formType;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullBind);\n\n\t\t// region 'protection from closing slider by accident'\n\t\tthis.mouseUpNodeCheck = null;\n\n\t\tEvent.bind(document, 'mousedown', (e)=>{this.mousedownTarget = e.target || e.srcElement;});\n\t\tEvent.bind(document, 'mouseup', (e)=>{\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (this.mousedownTarget !== target)\n\t\t\t{\n\t\t\t\tthis.mouseUpNodeCheck = false;\n\t\t\t}\n\t\t\tsetTimeout(()=>{this.mouseUpNodeCheck = null;}, 0);\n\t\t});\n\t\t// endregion\n\n\t\tEventEmitter.subscribe('Calendar.LocationControl.onValueChange', () => {\n\t\t\tif (this.locationBusyAlert)\n\t\t\t{\n\t\t\t\tDom.remove(this.locationBusyAlert);\n\t\t\t\tthis.locationBusyAlert = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupShown\", this.BX.proxy(this.denySliderClose, this));\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupClosed\", this.BX.proxy(this.allowSliderClose, this));\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t\tthis.sliderId = this.slider.getUrl();\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(this.slider.layout.content, this.slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\t\tthis.setFormValues();\n\n\t\tEvent.bind(this.DOM.content, 'wheel', () => this.highlightFieldScrollAnimation?.stop());\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.checkDenyClose())\n\t\t{\n\t\t\tthis.state = this.STATE.READY;\n\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t}\n\t}\n\n\tsave(options = {})\n\t{\n\t\tif (\n\t\t\tthis.state === this.STATE.REQUEST\n\t\t\t|| this.DOM.locationRepeatBusyErrorPopup\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (\n\t\t\t!this.entry.id\n\t\t\t&& this.hasExternalEmailUsers()\n\t\t\t&& Util.checkEmailLimitationPopup()\n\t\t\t&& !options.emailLimitationDialogShown\n\t\t)\n\t\t{\n\t\t\tEntryManager.showEmailLimitationDialog({\n\t\t\t\tcallback: () => {\n\t\t\t\t\toptions.emailLimitationDialogShown = true;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.userSettings.sendFromEmail && this.hasExternalEmailUsers())\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (params.sendFromEmail)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userSettings.sendFromEmail = params.sendFromEmail;\n\t\t\t\t\t}\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section', 'notify']).length > 0\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.recursionMode =\n\t\t\t\t\t\t(this.entry.isFirstInstance() && params.recursionMode === 'next')\n\t\t\t\t\t\t? 'all'\n\t\t\t\t\t\t: params.recursionMode\n\t\t\t\t\t;\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& this.getFormDataChanges().includes('date&time')\n\t\t\t&& this.entry.getAttendees().find((item) => {return item.STATUS === 'N';})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.lastUsedSaveOptions = options;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.entry.id\n\t\t\t&& this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges().includes('section')\n\t\t)\n\t\t{\n\t\t\toptions.recursionMode = this.entry.isFirstInstance() ? 'all' : 'next';\n\t\t}\n\n\t\tDom.addClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\tDom.addClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.DOM.form.id.value = this.entry.id || 0;\n\n\t\t// Location\n\t\tthis.DOM.form.location.value = this.locationSelector.getTextValue();\n\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.SaveContent();\n\t\t}\n\n\t\tlet section = this.getCurrentSection();\n\t\tif (section)\n\t\t{\n\t\t\t// Color\n\t\t\tif (section.COLOR.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t\t{\n\t\t\t\tthis.DOM.form.color.value = this.colorSelector.getValue();\n\t\t\t}\n\t\t\t// this.BX.userOptions.save('calendar', 'user_settings', 'lastUsedSection', parseInt(section.ID));\n\t\t}\n\n\t\tif (options.recursionMode)\n\t\t{\n\t\t\tthis.DOM.form.current_date_from.value = Util.formatDate(this.entry.from);\n\t\t\tthis.DOM.form.rec_edit_mode.value = options.recursionMode;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.form.current_date_from.value = null;\n\t\t\tthis.DOM.form.rec_edit_mode.value = null;\n\t\t}\n\n\t\tif (options.sendInvitesAgain !== undefined)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(Tag.render`<input name=\"sendInvitesAgain\" type=\"hidden\" value=\"${options.sendInvitesAgain ? 'Y' : 'N'}\">`);\n\t\t}\n\n\t\tif (!this.DOM.form.requestUid)\n\t\t{\n\t\t\tthis.DOM.requestUid = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input name=\"requestUid\" type=\"hidden\">`\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.meeting_host)\n\t\t{\n\t\t\tthis.DOM.meeting_host = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"meeting_host\" value=\"${this.entry.data.MEETING_HOST || '0'}\">`\n\t\t\t);\n\t\t}\n\n\t\tif (!this.DOM.form.chat_id)\n\t\t{\n\t\t\tthis.DOM.chat_id = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"chat_id\" value=\"${this.entry.data.MEETING ? this.entry.data.MEETING.CHAT_ID : 0}\">`\n\t\t\t)\n\t\t}\n\n\t\tthis.DOM.requestUid.value = Util.registerRequestId();\n\n\t\t// Save attendees from userSelector\n\t\tconst attendeesEntityList = this.getUserSelectorEntityList();\n\t\tDom.clean(this.DOM.userSelectorValueWarp);\n\t\tattendeesEntityList.forEach((entity, index) => {\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][entityId]\" value=\"${entity.entityId}\">\n\t\t\t`);\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][id]\" value=\"${entity.id}\">\n\t\t\t`);\n\t\t});\n\n\t\tlet checkCurrentUsersAccessibility = !this.entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (!checkCurrentUsersAccessibility\n\t\t\t&& this.getFormDataChanges().includes('codes'))\n\t\t{\n\t\t\tconst previousAttendeesList = this.entry.getAttendeesEntityList();\n\t\t\tattendeesEntityList.forEach(entity => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& parseInt(entity.id) === parseInt(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"newAttendeesList[]\" value=\"${parseInt(entity.id)}\">\n\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t<input type=\"hidden\" name=\"checkCurrentUsersAccessibility\" value=\"${checkCurrentUsersAccessibility ? 'Y' : 'N'}\">\n\t\t`);\n\t\tthis.DOM.form.doCheckOccupancy.value = options.doCheckOccupancy || 'Y';\n\t\tconst data = new FormData(this.DOM.form);\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', {\n\t\t\tdata: data,\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: this.isCreateForm() ? 'create_event' :'edit_event',\n\t\t\t\tformType: 'full',\n\t\t\t\temailGuests: this.hasExternalEmailUsers() ? 'Y' : 'N',\n\t\t\t\tmarkView: Util.getCurrentView() || 'outside',\n\t\t\t\tmarkCrm: this.DOM.form?.['UF_CRM_CAL_EVENT[]'] && this.DOM.form['UF_CRM_CAL_EVENT[]'].value ? 'Y' : 'N',\n\t\t\t\tmarkRrule: this.repeatSelector?.getType(),\n\t\t\t\tmarkMeeting: this.entry.isMeeting() ? 'Y' : 'N',\n\t\t\t\tmarkType: this.type\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\t\tif (this.isLocationCalendar)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(\n\t\t\t\t\t\tLocation.parseStringValue(this.DOM.form.location.value).room_id\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// unset section from hidden\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section && this.context && this.context.sectionManager)\n\t\t\t\t{\n\t\t\t\t\tthis.unsetHiddenSection(section, this.context.sectionManager);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tthis.allowSliderClose();\n\t\t\t\tthis.doShowConfirmPopup = false;\n\t\t\t\tthis.close();\n\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\n\t\t\t\tif (response.data.entryId)\n\t\t\t\t{\n\t\t\t\t\tif (this.entry.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (response.data.countEventWithEmailGuestAmount)\n\t\t\t\t{\n\t\t\t\t\tUtil.setEventWithEmailGuestAmount(response.data.countEventWithEmailGuestAmount);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.eventList)\n\t\t\t\t\t&& response.data.eventList.length\n\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t&& response.data.eventList[0].REMIND.length\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\tresponse.data.eventList[0].DT_SKIP_TIME === 'Y' ? 'fullDay' : 'withTime',\n\t\t\t\t\t\tresponse.data.eventList[0].REMIND\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('onSave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tEventEmitter.emit('BX.Calendar:onEntrySave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsliderId: this.sliderId,\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t{\n\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\tlet errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (error.code !== \"edit_entry_user_busy\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t{\n\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t}\n\t\t);\n\n\t\treturn true;\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tlet\n\t\t\tusers = [],\n\t\t\tuserIds = [];\n\n\t\tfor (let id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.DOM.form.exclude_users.value = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({users: users});\n\t}\n\n\tclientSideCheck()\n\t{\n\n\t}\n\n\thideWithConfirm(event)\n\t{\n\t\tif (!(event && event.getSlider && event.getSlider().getUrl() === this.sliderId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tUtil.closeAllPopups();\n\n\t\tif (this.checkDenyClose())\n\t\t{\n\t\t\tevent.denyAction();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.needToShowConfirmPopup())\n\t\t{\n\t\t\tevent.denyAction();\n\t\t\tconst message = this.isCreateForm() ? Loc.getMessage('EC_CLOSE_CREATE_FORM_CONFIRM_QUESTION') : Loc.getMessage('EC_CLOSE_EDIT_FORM_CONFIRM_QUESTION');\n\t\t\tUtil.showConfirmPopup(this.hide.bind(this), message, {\n\t\t\t\tokCaption: Loc.getMessage('EC_CLOSE_EDIT_FORM_CONFIRM_OK'),\n\t\t\t\tminWidth: 350,\n\t\t\t\tmaxWidth: 350,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\t}\n\t}\n\n\thide()\n\t{\n\t\tthis.doShowConfirmPopup = false;\n\t\tthis.slider.close();\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUninstall', [{plannerId: this.plannerId}]);\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tif (Location)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\t\t\tUtil.closeAllPopups();\n\t\t\tthis.planner = null;\n\t\t\tthis.opened = false;\n\t\t\tUtil.clearPlannerWatches();\n\t\t}\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\tlet promise = new this.BX.Promise();\n\n\t\tlet entry = this.getCurrentEntry();\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getEditEventSlider', {\n\t\t\tdata: {\n\t\t\t\tevent_id: this.entryId || entry.id,\n\t\t\t\tdate_from: entry ? Util.formatDate(entry.from) : '',\n\t\t\t\tform_type: this.formType,\n\t\t\t\ttype: entry.data['CAL_TYPE'] ?? this.type,\n\t\t\t\townerId: entry.data['OWNER_ID'] ?? this.ownerId,\n\t\t\t\tentityList: this.participantsEntityList,\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet html = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.updateEntryData(params.entry, {\n\t\t\t\t\t\t\tuserSettings: this.userSettings,\n\t\t\t\t\t\t\tmeetSection: params.meetSection,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tentry = this.getCurrentEntry();\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.editorId = params.editorId;\n\t\t\t\t\t\tthis.formSettings = this.getSettings(params.formSettings || []);\n\n\t\t\t\t\t\tlet attendeesEntityList = this.formDataValue.attendeesEntityList\n\t\t\t\t\t\t\t|| params.attendeesEntityList\n\t\t\t\t\t\t\t|| [];\n\n\t\t\t\t\t\tif (!entry.id && this.participantsEntityList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList = this.participantsEntityList;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isArray(attendeesEntityList))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList.forEach((item) => {\n\t\t\t\t\t\t\t\tif (item.entityId === 'user' && params.userIndex[item.id])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titem.entityType = params.userIndex[item.id].EMAIL_USER ? 'email' : 'employee';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUserSelectorEntityList(attendeesEntityList);\n\n\t\t\t\t\t\tthis.attendeesPreselectedItems = this.getUserSelectorEntityList().map((item) => {return [item.entityId, item.id]});\n\t\t\t\t\t\tthis.setUserSettings(params.userSettings);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestAmount(params.countEventWithEmailGuestAmount);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestLimit(params.eventWithEmailGuestLimit);\n\t\t\t\t\t\tthis.handleSections(params.sections, params.trackingUsersList);\n\t\t\t\t\t\tthis.handleLocationData(params.locationFeatureEnabled, params.locationList, params.iblockMeetingRoomList);\n\t\t\t\t\t\tthis.locationAccess = params.locationAccess;\n\t\t\t\t\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\t\t\t\t\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!entry.id && !entry.sectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setCurrentEntry();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.userSettings.meetSection && this.type ==='user')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSectionManager.setNewEntrySectionId(this.userSettings.meetSection);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpromise.fulfill(html);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\treturn promise;\n\t}\n\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonsWrap = this.DOM.content.querySelector('.calendar-form-buttons-fixed');\n\t\tthis.DOM.saveBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_save`);\n\t\tthis.DOM.closeBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_close`);\n\t\tEvent.bind(this.DOM.saveBtn, 'click', this.save.bind(this));\n\t\tEvent.bind(this.DOM.closeBtn, 'click', this.close.bind(this));\n\n\t\tthis.initFormFieldManager(uid);\n\t\tthis.initDateTimeControl(uid);\n\t\tthis.initNameControl(uid);\n\t\tthis.initEditorControl(uid);\n\t\tthis.initAttendeesControl();\n\t\tthis.initPlanner(uid);\n\t\tthis.initReminderControl(uid);\n\t\tthis.initSectionSelector(uid);\n\t\tthis.initLocationControl(uid);\n\t\tthis.initRepeatRuleControl(uid);\n\t\tthis.initColorControl(uid);\n\t\tthis.initCrmUfControl(uid);\n\t\tthis.initAdditionalControls(uid);\n\n\t\tthis.checkLastItemBorder();\n\n\t\tif (this.DOM.buttonsWrap)\n\t\t{\n\t\t\tBX.ZIndexManager.register(this.DOM.buttonsWrap);\n\t\t}\n\t}\n\n\tupdateEntryData(entryData, options = {})\n\t{\n\t\tif (this.entry instanceof Entry)\n\t\t{\n\t\t\tlet userSettings = options.userSettings || {};\n\n\t\t\tif (Type.isPlainObject(entryData))\n\t\t\t{\n\t\t\t\tthis.entry.prepareData(entryData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.entry.getTimezoneFrom() || this.entry.getTimezoneTo())\n\t\t\t\t{\n\t\t\t\t\tthis.entry.setTimezone(userSettings.timezoneName || userSettings.timezoneDefaultName || null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!this.entry.id\n\t\t\t\t&& options.meetSection\n\t\t\t\t&& this.type === Entry.CAL_TYPES['user']\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.entry.setSectionId(options.meetSection)\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSections(sections, trackingUsersList)\n\t{\n\t\tthis.sections = sections;\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(sections))\n\t\t{\n\t\t\tsections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.entry.id)\n\t\t{\n\t\t\tthis.getSectionsForEditEvent(this.sections, section);\n\t\t}\n\t}\n\n\thandleLocationData(locationFeatureEnabled, locationList, iblockMeetingRoomList)\n\t{\n\t\tthis.locationFeatureEnabled = !!locationFeatureEnabled;\n\t\tthis.locationList = Type.isArray(locationList)\n\t\t\t? locationList.filter(locationItem => {return locationItem.PERM.view_full})\n\t\t\t: [];\n\t\tthis.iblockMeetingRoomList = iblockMeetingRoomList || [];\n\n\t\tLocation.setLocationList(locationList);\n\t\tLocation.setMeetingRoomList(iblockMeetingRoomList);\n\t}\n\n\tsetUserSettings(userSettings)\n\t{\n\t\tthis.userSettings = userSettings;\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\tsetFormValues()\n\t{\n\t\tlet entry = this.entry;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay) ? this.formDataValue.fullDay : entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName\n\t\t});\n\n\t\tconst entryName = this.formDataValue.name || entry.getName();\n\t\tthis.DOM.entryName.value = entryName;\n\t\tthis.DOM.entryName.title = entryName;\n\t\tEvent.bind(this.DOM.entryName, 'keyup', this.updateEventNameInputTitle.bind(this));\n\t\tEvent.bind(this.DOM.entryName, 'change', this.updateEventNameInputTitle.bind(this));\n\n\t\t// Section\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.formDataValue.section)\n\t\t{\n\t\t\tentry.sectionId = parseInt(this.formDataValue.section);\n\t\t}\n\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\tthis.initialSectionId = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\n\t\tif (!this.fieldIsPinned('section'))\n\t\t{\n\t\t\tif (\n\t\t\t\tsection['CAL_TYPE'] !== this.type\n\t\t\t\t|| section['CAL_TYPE'] === this.type\n\t\t\t\t&& parseInt(section['OWNER_ID']) !== this.ownerId\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\t\t}\n\n\t\tif (this.isSyncSection(section) && entry.id)\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(true);\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(this.formDataValue.color || entry.getColor() || section.COLOR);\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(\n\t\t\tthis.formDataValue.reminder || entry.getReminders(),\n\t\t\ttrue,\n\t\t\tfalse\n\t\t);\n\n\t\t// Recursion\n\t\tthis.repeatSelector?.setValue(this.formDataValue.rrule || entry.getRrule());\n\t\tthis.initialRrule = this.getFormRrule();\n\n\t\tif (entry.hasRecurrenceId())\n\t\t{\n\t\t\tthis.repeatSelector?.setViewMode(entry.getRRuleDescription());\n\t\t}\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis.DOM.accessibilityInput.value = entry.accessibility;\n\t\t}\n\n\t\t// Location\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.setValue(this.formDataValue.location\n\t\t\t\t|| this.locationSelector.default || entry.getLocation(), false);\n\n\t\t\tthis.locationSelector.checkLocationAccessibility({\n\t\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay)\n\t\t\t\t\t? this.formDataValue.fullDay\n\t\t\t\t\t: entry.fullDay,\n\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t})\n\t\t}\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify)\n\t\t{\n\t\t\tif (this.formDataValue.meetingNotify !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.formDataValue.meetingNotify;\n\t\t\t}\n\t\t\tif (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.entry.data.MEETING.NOTIFY;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.hide_guests)\n\t\t{\n\t\t\tif (this.formDataValue.hideGuests !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.formDataValue.hideGuests === 'Y';\n\t\t\t}\n\t\t\telse if (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.entry.data.MEETING.HIDE_GUESTS;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.allow_invite)\n\t\t{\n\t\t\tif (this.entry.data)\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.data.MEETING && this.entry.data.MEETING.ALLOW_INVITE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.allowInvite;\n\t\t\t}\n\t\t}\n\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tconst needToLoadAdditional = this.planner.isNeedToExpandTimeline(dateTime.from, dateTime.to);\n\n\t\tthis.planner.updateSelector(\n\t\t\tdateTime.from,\n\t\t\tdateTime.to,\n\t\t\tdateTime.fullDay,\n\t\t\t{\n\t\t\t\tfocus: true\n\t\t\t}\n\t\t);\n\n\t\tif (!needToLoadAdditional)\n\t\t{\n\t\t\tthis.loadPlannerData({\n\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t\t});\n\t\t}\n\t}\n\n\tupdateEventNameInputTitle()\n\t{\n\t\tif (this.isTitleOverflowing())\n\t\t{\n\t\t\tthis.DOM.entryName.title = this.DOM.entryName.value;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.entryName.title = '';\n\t\t}\n\t}\n\n\tisTitleOverflowing()\n\t{\n\t\tconst el = this.DOM.entryName;\n\t\treturn el.clientWidth < el.scrollWidth || el.clientHeight < el.scrollHeight;\n\t}\n\n\tswitchFullDay(value)\n\t{\n\t\tvalue = !!this.DOM.fullDay.checked;\n\t\tif (value && Type.isString(this.userSettings.timezoneName)\n\t\t\t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t{\n\t\t\tthis.DOM.fromTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.toTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.defTimezone.value = this.userSettings.timezoneName;\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\n\t\tif (this.remindersControl)\n\t\t{\n\t\t\tthis.remindersControl.setFullDayMode(value);\n\t\t}\n\n\t\tthis.refreshPlanner();\n\t}\n\n\tswitchTimezone()\n\t{\n\t\tif (Dom.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tinitFormFieldManager(uid)\n\t{\n\t\tthis.DOM.mainBlock = this.DOM.content.querySelector(`#${uid}_main_block_wrap`);\n\t\tthis.DOM.additionalBlockWrap = this.DOM.content.querySelector(`#${uid}_additional_block_wrap`);\n\t\tthis.DOM.additionalBlock = this.DOM.content.querySelector(`#${uid}_additional_block`);\n\t\tthis.DOM.pinnedNamesWrap = this.DOM.content.querySelector(`#${uid}_additional_pinned_names`);\n\t\tthis.DOM.additionalSwitch = this.DOM.content.querySelector(`#${uid}_additional_switch`);\n\n\n\t\tif (this.isLocationCalendar && !this.fieldIsPinned('location'))\n\t\t{\n\t\t\tthis.pinField('location');\n\t\t}\n\n\t\tEvent.bind(this.DOM.additionalSwitch, 'click', () => {\n\t\t\tDom.toggleClass(this.DOM.additionalSwitch, 'opened');\n\t\t\tDom.toggleClass(this.DOM.additionalBlock, 'invisible');\n\t\t});\n\n\t\tEvent.bind(this.DOM.formWrap, 'click', (e) => {\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (target && target.getAttribute && target.getAttribute('data-bx-fixfield'))\n\t\t\t{\n\t\t\t\tlet fieldName = target.getAttribute('data-bx-fixfield');\n\t\t\t\tif (!this.fieldIsPinned(fieldName))\n\t\t\t\t{\n\t\t\t\t\tthis.pinField(fieldName);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unPinField(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst fieldButtons = document.querySelectorAll('[data-bx-field-id]');\n\t\tthis.bindAdditionalFieldButtons(fieldButtons);\n\t}\n\n\tinitDateTimeControl(uid)\n\t{\n\t\tthis.dateTimeControl = new SliderDateTimeControl(uid, {\n\t\t\tshowTimezone: true,\n\t\t\touterContent: this.DOM.content\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tlet value = event.getData().value;\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (!this.entry.id && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(\n\t\t\t\t\t\t\tdefaultReminders,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.planner)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(value.from, value.to, value.fullDay);\n\t\t\t\t}\n\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: value.from,\n\t\t\t\t\t\t\tto: value.to,\n\t\t\t\t\t\t\tfullDay: value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitNameControl(uid)\n\t{\n\t\tthis.DOM.entryName = this.DOM.content.querySelector(`#${uid}_entry_name`);\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.entryName.focus();\n\t\t\tthis.DOM.entryName.select();\n\t\t}, 500);\n\n\t\tlet isInputFocus = false;\n\n\t\tEvent.bind(this.DOM.entryName, 'focusout', ()=> {\n\t\t\tif (this.DOM.entryName.scrollWidth > this.DOM.entryName.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\t}\n\t\t\tisInputFocus = false;\n\t\t});\n\n\t\tEvent.bind(this.DOM.entryName, 'focus', ()=> {\n\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\tisInputFocus = true;\n\t\t});\n\n\t\tEvent.bind(this.DOM.entryName, 'scroll', ()=> {\n\t\t\tif (\n\t\t\t\tthis.DOM.entryName.scrollWidth > this.DOM.entryName.offsetWidth\n\t\t\t\t&& Math.ceil(this.DOM.entryName.offsetWidth + this.DOM.entryName.scrollLeft) < this.DOM.entryName.scrollWidth\n\t\t\t\t&& !isInputFocus\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.add('--show');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.getTitleFade(uid).classList.remove('--show');\n\t\t\t}\n\t\t});\n\n\t}\n\n\tgetTitleFade(uid)\n\t{\n\t\tif (!this.DOM.entryNameFade)\n\t\t{\n\t\t\tthis.DOM.entryNameFade = this.DOM.content.querySelector(`#${uid}_input_fade`);\n\t\t}\n\n\t\treturn this.DOM.entryNameFade;\n\t}\n\n\tinitReminderControl(uid)\n\t{\n\t\tconst reminderWrap = this.DOM.content.querySelector(`#${uid}_reminder`);\n\t\tif (!reminderWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.reminderWrap = reminderWrap;\n\t\tthis.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.reminderWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) =>\n\t\t{\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tDom.clean(this.DOM.reminderInputsWrap);\n\t\t\t\tthis.reminderValues.forEach((value) => {\n\t\t\t\t\tthis.DOM.reminderInputsWrap.appendChild(Dom.create('INPUT', {\n\t\t\t\t\t\tprops: {name: 'reminder[]', type: 'hidden'},\n\t\t\t\t\t\tattrs: {value: value}}));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitSectionSelector(uid)\n\t{\n\t\tthis.DOM.sectionInput = this.DOM.content.querySelector(`#${uid}_section`);\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.content.querySelector(`#${uid}_section_wrap`),\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type || 'user',\n\t\t\t\townerId: this.ownerId || this.userId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t}),\n\t\t\tmode: 'full',\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: () => {\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.ID,\n\t\t\t\t\t\tname: section.NAME,\n\t\t\t\t\t\tcolor: section.COLOR\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.sectionInput.value = sectionValue.id;\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.entry.setSectionId(sectionValue.id);\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(\n\t\t\t\t\t\tsectionValue.id,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarType: this.type,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tsections: this.sections\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitEditorControl(uid)\n\t{\n\t\tif (!window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\treturn setTimeout(BX.delegate(this.initEditorControl, this), 50);\n\t\t}\n\n\t\tthis.editor = null;\n\t\tif (window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\tthis.editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (\n\t\t\t!this.editor\n\t\t\t&& top[\"BXHtmlEditor\"]\n\t\t\t&& top[\"BXHtmlEditor\"] !== window[\"BXHtmlEditor\"]\n\t\t)\n\t\t{\n\t\t\tthis.editor = top[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (this.editor && this.editor.IsShown())\n\t\t{\n\t\t\tthis.customizeHtmlEditor();\n\n\t\t\tif (this.formDataValue.description)\n\t\t\t{\n\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.addCustomEvent(window[\"BXHtmlEditor\"], 'OnEditorCreated', function (editor)\n\t\t\t{\n\t\t\t\tif (editor.id === this.editorId)\n\t\t\t\t{\n\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\tthis.customizeHtmlEditor();\n\n\t\t\t\t\tif (this.formDataValue.description)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcustomizeHtmlEditor()\n\t{\n\t\tlet editor = this.editor;\n\t\tif (editor.toolbar && editor.toolbar.controls && editor.toolbar.controls.spoiler)\n\t\t{\n\t\t\tDom.remove(editor.toolbar.controls.spoiler.pCont);\n\t\t}\n\t}\n\n\tinitLocationControl(uid)\n\t{\n\t\tthis.DOM.locationWrap = this.DOM.content.querySelector(`#${uid}_location_wrap`);\n\t\tthis.DOM.locationInput = this.DOM.content.querySelector(`#${uid}_location`);\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\tinputName: 'lo_cation', // don't use 'location' word here mantis:107863\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList,\n\t\t\t\tonChangeCallback: this.refreshPlanner\n\t\t\t}\n\t\t);\n\t}\n\n\tinitRepeatRuleControl(uid)\n\t{\n\t\tconst rruleWrap = this.DOM.content.querySelector(`#${uid}_rrule_wrap`);\n\t\tif (!rruleWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.DOM.rruleWrap = rruleWrap;\n\t\tthis.repeatSelector = new RepeatSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.rruleWrap,\n\t\t\t\trruleType: this.DOM.content.querySelector(`#${uid}_rrule_type`),\n\t\t\t\tgetDate: function() {return this.dateTimeControl.getValue().from;}.bind(this)\n\t\t\t}\n\t\t);\n\n\t\tthis.dateTimeControl.subscribe('onChange', ()=>{\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\n\t\tthis.planner.subscribe('onDateChange', () => {\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\n\t}\n\n\tinitAttendeesControl()\n\t{\n\t\tthis.DOM.userSelectorWrap = this.DOM.content.querySelector('.calendar-attendees-selector-wrap');\n\t\tthis.DOM.userSelectorValueWarp = this.DOM.userSelectorWrap.appendChild(Tag.render`<div></div>`);\n\n\t\tthis.userTagSelector = new EntityTagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.attendeesPreselectedItems || [],\n\t\t\t\tzIndex: this.slider.zIndex,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: this.getParticipantsSelectorEntityList(),\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.DOM.userSelectorWrap);\n\t\tthis.DOM.hideGuestsWrap = this.DOM.content.querySelector('.calendar-hide-members-wrap');\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tif (this.planner)\n\t\t{\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\n\t\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\t\tthis.setUserSelectorEntityList(selectedItems.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityType: item.entityType\n\t\t\t\t}}));\n\t\t\tthis.refreshPlanner();\n\t\t}\n\t}\n\n\thasExternalEmailUsers()\n\t{\n\t\treturn !!this.getUserSelectorEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\t}\n\n\tinitPlanner(uid)\n\t{\n\t\tthis.DOM.plannerOuterWrap = this.DOM.content.querySelector(`#${uid}_planner_outer_wrap`);\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerOuterWrap.offsetWidth),\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat,\n\t\t\tlocked: !this.plannerFeatureEnabled\n\t\t});\n\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\t\tthis.planner.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\thostId: this.entry.data.MEETING_HOST || null,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tentityList: params.entityList || [],\n\t\t\t\t\tdateFrom: Util.formatDate(this.planner.scaleDateFrom),\n\t\t\t\t\tdateTo: Util.formatDate(this.planner.scaleDateTo),\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tprevUserList: this.prevUserList\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (this.planner)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\tthis.loadedAccessibilityData\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\t\t});\n\t}\n\n\n\tinitAdditionalControls(uid)\n\t{\n\t\tthis.DOM.accessibilityInput = this.DOM.content.querySelector(`#${uid}_accessibility`);\n\t\tthis.DOM.privateEventCheckbox = this.DOM.content.querySelector(`#${uid}_private`);\n\t\tthis.DOM.importantEventCheckbox = this.DOM.content.querySelector(`#${uid}_important`);\n\t}\n\n\tinitColorControl(uid)\n\t{\n\t\tthis.DOM.colorWrap = this.DOM.content.querySelector(`#${uid}_color_selector_wrap`);\n\t\tthis.colorSelector = new ColorSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.colorWrap\n\t\t\t}\n\t\t);\n\t}\n\n\tinitCrmUfControl(uid)\n\t{\n\t\tconst crmUfWrap = BX(uid + '-uf-crm-wrap');\n\t\tif (!crmUfWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.DOM.crmUfWrap = crmUfWrap;\n\n\t\tif (this.DOM.crmUfWrap)\n\t\t{\n\t\t\tlet entry = this.getCurrentEntry();\n\t\t\tlet loader = this.DOM.crmUfWrap.appendChild(Dom.adjust(Util.getLoader(50), {style: {height: '40px', width: '40px'}}));\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCrmUserfield', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tevent_id: (entry && entry.id) ? entry.id : 0\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t// Success\n\t\t\t\t\tfunction(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isDomNode(this.DOM.crmUfWrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.html(this.DOM.crmUfWrap, response.data.html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t// Failure\n\t\t\t\t\tfunction (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(loader);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);\n\t\t\t}.bind(this), 800);\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcheckDenyClose()\n\t{\n\t\t// pending request\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if closing of slider was caused during selection.\n\t\tif (!Type.isNull(this.mouseUpNodeCheck))\n\t\t{\n\t\t\treturn !this.mouseUpNodeCheck;\n\t\t}\n\n\t\t// if (top.BX(this.id + '_time_from_div') && top.BX(this.id + '_time_from_div').style.display !== 'none')\n\t\t// \treturn true;\n\t\t//\n\t\t// if (top.BX(this.id + '_time_to_div') && top.BX(this.id + '_time_to_div').style.display !== 'none')\n\t\t// \treturn true;\n\n\t\treturn this.denyClose;\n\t}\n\n\tneedToShowConfirmPopup()\n\t{\n\t\treturn this.doShowConfirmPopup && this.formDataChanged();\n\t}\n\n\tsetCurrentEntry(entry = null, userIndex = null)\n\t{\n\t\tthis.entry = EntryManager.getEntryInstance(entry, userIndex, {type: this.type, ownerId: this.ownerId});\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet\n\t\t\tsection = false,\n\t\t\tsectionId = this.getCurrentSectionId();\n\n\t\tif (\n\t\t\tsectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined\n\t\t)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet\n\t\t\tsection = 0,\n\t\t\tentry = this.getCurrentEntry();\n\n\t\tif (entry instanceof Entry && this.sections[this.sectionIndex[entry.sectionId]])\n\t\t{\n\t\t\tsection = parseInt(entry.sectionId);\n\t\t}\n\n\t\tif (!section)\n\t\t{\n\t\t\tif (this.type === 'location')\n\t\t\t{\n\t\t\t\tsection = RoomsManager.getNewEntrySectionId();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsection = SectionManager.getNewEntrySectionId(this.type, this.ownerId);\n\n\t\t\t}\n\t\t\tif (!this.sectionIndex[section])\n\t\t\t{\n\t\t\t\tsection = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!section && this.sections[0])\n\t\t{\n\t\t\tsection = parseInt(this.sections[0].ID);\n\t\t}\n\t\treturn section;\n\t}\n\n\tpinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHoldersAdditional[fieldName],\n\t\t\tnewField = placeHolders[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){Dom.addClass(field, 'calendar-hide-field');}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\n\t\t\t\t\twhile(this.DOM.descriptionAdditionalWrap.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewField.appendChild(this.DOM.descriptionAdditionalWrap.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.display = 'none';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tunPinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHolders[fieldName],\n\t\t\tnewField = placeHoldersAdditional[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile(field.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.descriptionAdditionalWrap.appendChild(field.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewField.style.display = '';\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tfieldIsPinned(fieldName)\n\t{\n\t\treturn this.pinnedFieldsIndex[fieldName];\n\t}\n\n\tgetPlaceholders()\n\t{\n\t\tif (!this.placeHolders)\n\t\t{\n\t\t\tthis.placeHolders = {};\n\t\t\tthis.placeHoldersAdditional = {};\n\n\t\t\tlet\n\t\t\t\ti,\n\t\t\t\tfieldId,\n\t\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-additional-placeholder');\n\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHoldersAdditional[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-placeholder');\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHolders[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [this.placeHolders, this.placeHoldersAdditional];\n\t}\n\n\tgetSettings(settings)\n\t{\n\t\tthis.pinnedFieldsIndex = {};\n\t\tlet i, pinnedFields = [];\n\n\t\tfor (i in settings.pinnedFields)\n\t\t{\n\t\t\tif (settings.pinnedFields.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tpinnedFields.push(settings.pinnedFields[i]);\n\t\t\t\tthis.pinnedFieldsIndex[settings.pinnedFields[i]] = true;\n\t\t\t}\n\t\t}\n\t\tsettings.pinnedFields = pinnedFields;\n\t\treturn settings;\n\t}\n\n\tsaveSettings()\n\t{\n\t\tlet fieldName, pinnedFields = [];\n\n\t\tfor (fieldName in this.pinnedFieldsIndex)\n\t\t{\n\t\t\tif (this.pinnedFieldsIndex.hasOwnProperty(fieldName) && this.pinnedFieldsIndex[fieldName])\n\t\t\t{\n\t\t\t\tpinnedFields.push(fieldName);\n\t\t\t}\n\t\t}\n\n\t\tthis.formSettings.pinnedFields = pinnedFields;\n\t\tthis.BX.userOptions.save('calendar', this.formType, 'pinnedFields', pinnedFields);\n\t}\n\n\tupdateAdditionalBlockState(timeout)\n\t{\n\t\tif (timeout !== false)\n\t\t{\n\t\t\tif (this.updateAdditionalBlockTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.updateAdditionalBlockTimeout);\n\t\t\t\tthis.updateAdditionalBlockTimeout = null;\n\t\t\t}\n\t\t\tthis.updateAdditionalBlockTimeout = setTimeout(() => {this.updateAdditionalBlockState(false)}, 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.clean(this.DOM.pinnedNamesWrap);\n\t\t\tconst additionalFields = [...this.DOM.additionalBlock.querySelectorAll('.calendar-field-additional-placeholder[data-bx-block-placeholer]')]\n\t\t\t\t.filter(field => field.innerText !== '' && field.style.display !== 'none');\n\t\t\tconst fieldButtons = additionalFields.map(field => Dom.create('SPAN', {\n\t\t\t\tattrs: {\n\t\t\t\t\t'data-bx-field-id': field.getAttribute('data-bx-block-placeholer'),\n\t\t\t\t},\n\t\t\t\tprops: {\n\t\t\t\t\tclassName: 'calendar-additional-alt-promo-text',\n\t\t\t\t},\n\t\t\t\thtml: field.querySelector('.js-calendar-field-name').innerText,\n\t\t\t}));\n\t\t\tthis.DOM.pinnedNamesWrap.append(...fieldButtons);\n\t\t\tthis.bindAdditionalFieldButtons(fieldButtons);\n\n\t\t\tif (!fieldButtons.length)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\n\t\t\tthis.checkLastItemBorder();\n\t\t}\n\t}\n\n\tbindAdditionalFieldButtons(fieldButtons)\n\t{\n\t\tfor (const fieldButton of fieldButtons)\n\t\t{\n\t\t\tEvent.bind(fieldButton, 'click', (event) => {\n\t\t\t\tconst fieldId = fieldButton.getAttribute('data-bx-field-id');\n\t\t\t\tconst fieldWrap = document.querySelector(`.calendar-openable-block [data-bx-block-placeholer=${fieldId}]`);\n\t\t\t\tthis.highlightField(fieldWrap);\n\n\t\t\t\tif (this.isAdditionalBlockOpened())\n\t\t\t\t{\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\thighlightField(fieldWrap)\n\t{\n\t\tDom.addClass(fieldWrap, 'calendar-field-highlighted');\n\n\t\tconst fieldAbsoluteTop = this.DOM.content.scrollTop + fieldWrap.getBoundingClientRect().top;\n\t\tthis.highlightFieldScrollAnimation = new BX.easing({\n\t\t\tduration: 400,\n\t\t\tstart: {\n\t\t\t\tscroll: this.DOM.content.scrollTop,\n\t\t\t},\n\t\t\tfinish: {\n\t\t\t\tscroll: fieldAbsoluteTop,\n\t\t\t},\n\t\t\ttransition: BX.easing.makeEaseOut(BX.easing.transitions.quart),\n\t\t\tstep: (state) =>\n\t\t\t{\n\t\t\t\tthis.DOM.content.scrollTop = state.scroll;\n\t\t\t},\n\t\t\tcomplete: () => {}\n\t\t});\n\t\tthis.highlightFieldScrollAnimation.animate();\n\n\t\tclearTimeout(fieldWrap.highlightTimeout);\n\t\tfieldWrap.highlightTimeout = setTimeout(() => BX.Dom.removeClass(fieldWrap, 'calendar-field-highlighted'), 2500);\n\t}\n\n\tisAdditionalBlockOpened()\n\t{\n\t\treturn Dom.hasClass(this.DOM.additionalSwitch, 'opened');\n\t}\n\n\tcheckLastItemBorder()\n\t{\n\t\tlet\n\t\t\tnoBorderClass = 'no-border',\n\t\t\ti, nodes;\n\n\t\tnodes = this.DOM.mainBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\n\t\tnodes = this.DOM.additionalBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue({\n\t\t\t\tfrom: data.dateFrom,\n\t\t\t\tto: data.dateTo\n\t\t\t});\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: data.dateFrom,\n\t\t\t\t\t\tto: data.dateTo,\n\t\t\t\t\t\tfullDay: data.fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t}\n\n\t\t\tif (this.planner)\n\t\t\t{\n\t\t\t\tlet fromHours = parseInt(data.dateFrom.getHours()) + Math.floor(data.dateFrom.getMinutes() / 60);\n\t\t\t\tlet toHours = parseInt(data.dateTo.getHours()) + Math.floor(data.dateTo.getMinutes() / 60);\n\t\t\t\tif (\n\t\t\t\t\t(fromHours !== 0 && fromHours <= this.planner.shownScaleTimeFrom)\n\t\t\t\t\t|| (toHours !== 0 && toHours !== 23 && toHours + 1 >= this.planner.shownScaleTimeTo)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(data.dateFrom, data.dateTo, data.fullDay);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tthis.prevUserList = [];\n\t\t\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\t\tfrom: Util.formatDate(data.dateFrom),\n\t\t\t\t\tto: Util.formatDate(data.dateTo),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\t\tfocusSelector: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUserSelectorEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetUserSelectorEntityList(selectorEntityList)\n\t{\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tif (this.locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(this.locationCapacity);\n\t\t\t\tthis.locationCapacity = 0;\n\t\t\t}\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined)\n\t\t\t{\n\t\t\t\tif (locationCapacity)\n\t\t\t\t{\n\t\t\t\t\tlocationCapacity = 0;\n\t\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (\n\t\t\t(e.ctrlKey || e.metaKey)\n\t\t\t&& !e.altKey\n\t\t\t&& e.keyCode === Util.getKeyCode('enter')\n\t\t\t&& this.checkTopSlider()\n\t\t\t&& !this.isAdditionalPopupShown()\n\t\t)\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tisAdditionalPopupShown(): boolean\n\t{\n\t\treturn this.DOM.locationRepeatBusyErrorPopup?.getPopupWindow()?.isShown();\n\t}\n\n\tcheckTopSlider()\n\t{\n\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\n\t\treturn slider && slider.options.type === 'calendar:slider';\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\tif (error.code === \"edit_entry_location_busy\" || error.code === \"edit_entry_location_busy_recurrence\")\n\t\t\t\t{\n\t\t\t\t\tthis.locationBusyAlert = Util.showFieldError(error.message, this.DOM.locationWrap, {clearTimeout: 10000});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse if (error.code === \"edit_entry_location_repeat_busy\")\n\t\t\t\t{\n\t\t\t\t\tthis.showLocationRepeatBusyErrorPopup(error.message);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\terrorText += error.message + \"\\n\";\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\tshowLocationRepeatBusyErrorPopup(message)\n\t{\n\t\tif (!this.DOM.locationRepeatBusyErrorPopup)\n\t\t{\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup = EntryManager.getLocationRepeatBusyErrorPopup({\n\t\t\t\tmessage,\n\t\t\t\tonYesCallback: () => {\n\t\t\t\t\tif (Type.isDomNode(this.locationBusyAlert))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.locationBusyAlert);\n\t\t\t\t\t\tthis.locationBusyAlert = null;\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastUsedSaveOptions.doCheckOccupancy = 'N';\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t\tthis.save(this.lastUsedSaveOptions);\n\t\t\t\t\tthis.lastUsedSaveOptions = {};\n\t\t\t\t},\n\t\t\t\tonCancelCallback: () => {\n\t\t\t\t\tthis.lastUsedSaveOptions = {};\n\t\t\t\t\tthis.DOM.locationRepeatBusyErrorPopup.close();\n\t\t\t\t},\n\t\t\t\tonPopupCloseCallback: () => {\n\t\t\t\t\tdelete this.DOM.locationRepeatBusyErrorPopup;\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.DOM.locationRepeatBusyErrorPopup.show();\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tconst entry = this.entry;\n\t\tlet fields = [];\n\n\t\t// Name\n\t\tif (!excludes.includes('name')\n\t\t\t&& entry.name !== this.DOM.form.name.value)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Description\n\t\tif (!excludes.includes('description')\n\t\t\t&& entry.getDescription() !== this.DOM.form.desc.value)\n\t\t{\n\t\t\tfields.push('description');\n\t\t}\n\n\t\t// Location\n\t\tif (!excludes.includes('location')\n\t\t\t&&\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.entry.getLocation()))\n\t\t\t!==\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (!excludes.includes('date&time')\n\t\t\t&&\n\t\t\t(entry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()))\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Section\n\t\tif (!excludes.includes('section')\n\t\t\t&&\n\t\t\tparseInt(this.initialSectionId) !== parseInt(this.DOM.sectionInput.value))\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (!excludes.includes('codes')\n\t\t\t&&\n\t\t\tthis.getUserSelectorEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t\t!==\n\t\t\tentry.getAttendeesEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\tif (this.wasRruleChanged())\n\t\t{\n\t\t\tfields.push('rrule');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\twasRruleChanged()\n\t{\n\t\treturn JSON.stringify(this.getFormRrule()) !== JSON.stringify(this.initialRrule) && !this.entry.hasRecurrenceId();\n\t}\n\n\tgetFormRrule()\n\t{\n\t\tconst formData = new FormData(this.DOM.form);\n\t\tconst endsOn = formData.get('rrule_endson');\n\t\tconst FREQ = formData.get('EVENT_RRULE[FREQ]');\n\t\tlet INTERVAL = parseInt(formData.get('EVENT_RRULE[INTERVAL]'));\n\t\tlet COUNT = null;\n\t\tlet UNTIL = null;\n\t\tlet BYDAY = null;\n\n\t\tif (endsOn === 'count')\n\t\t{\n\t\t\tCOUNT = parseInt(formData.get('EVENT_RRULE[COUNT]'));\n\t\t}\n\n\t\tif (endsOn === 'until')\n\t\t{\n\t\t\tUNTIL = formData.get('EVENT_RRULE[UNTIL]');\n\t\t}\n\n\t\tif (FREQ === 'NONE')\n\t\t{\n\t\t\tINTERVAL = COUNT = UNTIL = null;\n\t\t}\n\n\t\tif (FREQ === 'WEEKLY')\n\t\t{\n\t\t\tBYDAY = formData.getAll('EVENT_RRULE[BYDAY][]');\n\t\t}\n\n\t\treturn { FREQ, INTERVAL, COUNT, UNTIL, BYDAY };\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tgetUserCodes()\n\t{\n\t\tconst\n\t\t\tcodes = [],\n\t\t\tvaluesInput = this.DOM.attendeesWrap.querySelectorAll('input[name=\"EVENT_DESTINATION[]\"]');\n\n\t\tfor (let i = 0; i < valuesInput.length; i++)\n\t\t{\n\t\t\tif (!codes.includes(valuesInput[i].value))\n\t\t\t{\n\t\t\t\tcodes.push(valuesInput[i].value);\n\t\t\t}\n\t\t}\n\t\treturn codes;\n\t}\n\n\thandlePull(event: BaseEvent): void\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\n\t\tconst params = Type.isObjectLike(data[1]) ? data[1] : {};\n\n\t\tswitch(command)\n\t\t{\n\t\t\tcase 'edit_event':\n\t\t\tcase 'delete_event':\n\t\t\tcase 'set_meeting_status':\n\t\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES: [];\n\t\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t\t{\n\t\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t\t}\n\t\t\t\tthis.clearAccessibilityData(userIdList);\n\n\t\t\t\tthis.refreshPlannerState();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length && this.prevUserList.length)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => {\n\t\t\t\treturn !userIdList.includes(userId);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetParticipantsSelectorEntityList()\n\t{\n\t\tif (this.participantsSelectorEntityList && this.participantsSelectorEntityList.length)\n\t\t{\n\t\t\treturn this.participantsSelectorEntityList;\n\t\t}\n\n\t\tlet entityList = [\n\t\t\t{\n\t\t\t\tid: 'user',\n\t\t\t\toptions: {\n\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\temailUsers: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'project'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'department',\n\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'meta-user',\n\t\t\t\toptions: { 'all-users': true }\n\t\t\t}\n\t\t];\n\n\t\tif (this.attendeesPreselectedItems)\n\t\t{\n\t\t\tlet projectRole = null;\n\n\t\t\tthis.attendeesPreselectedItems\n\t\t\t\t.forEach((item) => {\n\t\t\t\t\tconst type = item[0];\n\t\t\t\t\tconst role = item[1];\n\t\t\t\t\tif (type === 'project-roles')\n\t\t\t\t\t{\n\t\t\t\t\t\tprojectRole = role;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tif (projectRole)\n\t\t\t{\n\t\t\t\tentityList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-roles',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprojectId: projectRole.split('_')[0]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn entityList;\n\t}\n\n\tisSyncSection(section)\n\t{\n\t\treturn section.EXTERNAL_TYPE === 'icloud'\n\t\t\t|| section.EXTERNAL_TYPE === 'google'\n\t\t\t|| section.EXTERNAL_TYPE === 'office365'\n\t\t\t|| (section.connectionLinks && section.connectionLinks.length)\n\t\t;\n\t}\n\n\tgetSectionsForEditEvent(sections, currentSection)\n\t{\n\t\tconst result = [];\n\t\tconst currentType = currentSection.CAL_TYPE;\n\t\tresult.push(currentSection);\n\n\t\tsections.forEach((section) => {\n\t\t\tif (!this.isSyncSection(section) && section.CAL_TYPE === currentType)\n\t\t\t{\n\t\t\t\tresult.push(section);\n\t\t\t}\n\t\t});\n\n\t\tthis.sections = result;\n\t\tthis.sectionIndex = [];\n\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\t}\n\n\tunsetHiddenSection(section, sectionManager)\n\t{\n\t\tconst sectId = parseInt(section.ID);\n\t\tif (!sectionManager.sectionIsShown(sectId))\n\t\t{\n\t\t\tlet hiddenSections = sectionManager.getHiddenSections();\n\t\t\thiddenSections = hiddenSections.filter((sectionId) => {return sectionId !==sectId;}, this);\n\t\t\tsectionManager.setHiddenSections(hiddenSections);\n\t\t\tsectionManager.saveHiddenSections();\n\t\t}\n\t}\n\n\tisCreateForm()\n\t{\n\t\treturn !this.isEditForm();\n\t}\n\n\tisEditForm()\n\t{\n\t\treturn parseInt(this.entry.id) > 0;\n\t}\n}"],"names":["SliderDateTimeControl","DateTimeControl","create","DOM","dateTimeWrap","outerContent","querySelector","UID","fromDate","toDate","fromTime","toTime","fromTimeControl","TimeSelector","input","onChangeCallback","handleTimeFromChange","bind","toTimeControl","handleTimeToChange","fullDay","defTimezoneWrap","defTimezone","fromTz","toTz","tzButton","tzOuterCont","tzCont","title","Loc","getMessage","prepareModel","bindEventHandlers","BX","isAmPmMode","style","minWidth","Dom","adjust","props","autocomplete","EventEditForm","constructor","options","uid","sliderId","zIndex","denyClose","formType","STATE","READY","REQUEST","ERROR","sections","sectionIndex","trackingUsersList","userSettings","prevUserList","loadedAccessibilityData","name","type","isLocationCalendar","locationAccess","locationCapacity","dayOfWeekMonthFormat","roomsManager","userId","parseInt","ownerId","entryId","entry","formDataValue","emitter","EventEmitter","setEventNamespace","Util","getBX","context","getCalendarContext","calendarContext","setCalendarContext","formSettings","pinnedFields","Type","isDate","entryDateFrom","from","to","Date","getTime","participantsEntityList","isArray","participantsSelectorEntityList","entryName","entryDescription","description","refreshPlanner","Runtime","debounce","refreshPlannerState","state","doShowConfirmPopup","sliderOnClose","hideWithConfirm","handlePullBind","handlePull","keyHandlerBind","keyHandler","lastUsedSaveOptions","initInSlider","slider","promiseResolve","getUrl","addCustomEvent","onLoadSlider","destroy","setCurrentEntry","createContent","then","html","isFunction","opened","show","params","SidePanel","Instance","open","contentCallback","label","text","bgColor","events","onClose","onCloseComplete","onLoad","isOpened","Event","document","subscribe","mouseUpNodeCheck","e","mousedownTarget","target","srcElement","setTimeout","locationBusyAlert","remove","window","proxy","denySliderClose","allowSliderClose","event","getSlider","content","layout","getData","get","initControls","setFormValues","highlightFieldScrollAnimation","stop","close","checkDenyClose","save","locationRepeatBusyErrorPopup","isPlainObject","id","hasExternalEmailUsers","checkEmailLimitationPopup","emailLimitationDialogShown","EntryManager","showEmailLimitationDialog","callback","sendFromEmail","showConfirmedEmailDialog","isRecursive","confirmed","getFormDataChanges","length","showConfirmEditDialog","recursionMode","isFirstInstance","isMeeting","sendInvitesAgain","undefined","includes","getAttendees","find","item","STATUS","showReInviteUsersDialog","addClass","saveBtn","UI","Button","State","CLOCKING","closeBtn","DISABLED","form","value","location","locationSelector","getTextValue","editor","SaveContent","section","getCurrentSection","COLOR","toLowerCase","colorSelector","getValue","color","current_date_from","formatDate","rec_edit_mode","appendChild","Tag","render","requestUid","meeting_host","data","MEETING_HOST","chat_id","MEETING","CHAT_ID","registerRequestId","attendeesEntityList","getUserSelectorEntityList","clean","userSelectorValueWarp","forEach","entity","index","entityId","checkCurrentUsersAccessibility","previousAttendeesList","getAttendeesEntityList","doCheckOccupancy","FormData","ajax","runAction","analyticsLabel","calendarAction","isCreateForm","emailGuests","markView","getCurrentView","markCrm","markRrule","repeatSelector","getType","markMeeting","markType","response","unsetHiddenRoom","Location","parseStringValue","room_id","sectionManager","unsetHiddenSection","removeClass","showEditEntryNotification","showNewEntryNotification","countEventWithEmailGuestAmount","setEventWithEmailGuestAmount","eventList","REMIND","setNewEntryReminders","DT_SKIP_TIME","emit","BaseEvent","responseData","busyUsersList","handleBusyUsersError","errors","error","code","push","showError","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","exclude_users","join","clientSideCheck","closeAllPopups","denyAction","needToShowConfirmPopup","message","showConfirmPopup","hide","okCaption","maxWidth","removeCustomEvent","getSliderPage","onCustomEvent","plannerId","unbind","unsubscribe","setCurrentCapacity","planner","clearPlannerWatches","promise","Promise","getCurrentEntry","event_id","date_from","form_type","entityList","isOpen","util","trim","set","additionalParams","updateEntryData","meetSection","uniqueId","editorId","getSettings","userIndex","entityType","EMAIL_USER","setUserSelectorEntityList","attendeesPreselectedItems","map","setUserSettings","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","handleSections","handleLocationData","locationFeatureEnabled","locationList","iblockMeetingRoomList","plannerFeatureEnabled","lock","sectionId","SectionManager","setNewEntrySectionId","fulfill","formWrap","buttonsWrap","initFormFieldManager","initDateTimeControl","initNameControl","initEditorControl","initAttendeesControl","initPlanner","initReminderControl","initSectionSelector","initLocationControl","initRepeatRuleControl","initColorControl","initCrmUfControl","initAdditionalControls","checkLastItemBorder","ZIndexManager","register","entryData","Entry","prepareData","getTimezoneFrom","getTimezoneTo","setTimezone","timezoneName","timezoneDefaultName","CAL_TYPES","setSectionId","ind","ID","getSectionsForEditEvent","filter","locationItem","PERM","view_full","setLocationList","setMeetingRoomList","dateTimeControl","setValue","isBoolean","timezoneFrom","timezoneTo","getName","updateEventNameInputTitle","sectionInput","getCurrentSectionId","initialSectionId","sectionSelector","updateValue","fieldIsPinned","pinField","isSyncSection","setViewMode","getColor","remindersControl","reminder","getReminders","rrule","getRrule","initialRrule","getFormRrule","hasRecurrenceId","getRRuleDescription","accessibilityInput","accessibility","default","getLocation","checkLocationAccessibility","currentEventId","privateEventCheckbox","checked","private","importantEventCheckbox","important","meeting_notify","meetingNotify","NOTIFY","hide_guests","hideGuests","HIDE_GUESTS","allow_invite","ALLOW_INVITE","allowInvite","dateTime","needToLoadAdditional","isNeedToExpandTimeline","updateSelector","focus","loadPlannerData","getDayLength","timezone","isTitleOverflowing","el","clientWidth","scrollWidth","clientHeight","scrollHeight","switchFullDay","isString","setFullDayMode","switchTimezone","hasClass","mainBlock","additionalBlockWrap","additionalBlock","pinnedNamesWrap","additionalSwitch","toggleClass","getAttribute","fieldName","unPinField","fieldButtons","querySelectorAll","bindAdditionalFieldButtons","showTimezone","wasChangedByUser","defaultReminders","getNewEntryReminders","select","isInputFocus","offsetWidth","getTitleFade","classList","add","Math","ceil","scrollLeft","entryNameFade","reminderWrap","reminderValues","reminderInputsWrap","Reminder","wrap","values","attrs","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","getSectionGroupList","mode","NAME","selectCallback","sectionValue","saveDefaultSectionId","calendarType","delegate","Get","top","IsShown","customizeHtmlEditor","SetContent","toolbar","controls","spoiler","pCont","locationWrap","locationInput","inputName","richLocationEnabled","rruleWrap","RepeatSelector","rruleType","getDate","changeType","userSelectorWrap","userTagSelector","EntityTagSelector","dialogOptions","preselectedItems","handleUserSelectorChanges","entities","getParticipantsSelectorEntityList","searchTabOptions","stubOptions","subtitle","icon","iconOpacity","arrow","renderTo","hideGuestsWrap","showLoader","selectedItems","getDialog","getSelectedItems","showHideGuestsOption","display","initHintNode","hideHideGuestsOption","setHideGuestsValue","plannerOuterWrap","Planner","locked","handlePlannerSelectorChanges","handleExpandPlannerTimeline","checkLocationForm","resolve","entryLocation","LOCATION","hostId","dateFrom","scaleDateFrom","dateTo","scaleDateTo","entries","hideLoader","update","colorWrap","ColorSelector","crmUfWrap","loader","getLoader","height","width","isDomNode","isNull","formDataChanged","getEntryInstance","registerEntrySlider","RoomsManager","getNewEntrySectionId","placeHolders","placeHoldersAdditional","getPlaceholders","field","newField","fieldHeight","offsetHeight","descriptionAdditionalWrap","firstChild","pinnedFieldsIndex","CheckAndReInit","saveSettings","updateAdditionalBlockState","i","fieldId","nodes","settings","userOptions","timeout","updateAdditionalBlockTimeout","clearTimeout","additionalFields","innerText","className","append","fieldButton","fieldWrap","highlightField","isAdditionalBlockOpened","stopPropagation","fieldAbsoluteTop","scrollTop","getBoundingClientRect","easing","duration","start","scroll","finish","transition","makeEaseOut","transitions","quart","step","complete","animate","highlightTimeout","noBorderClass","fromHours","getHours","floor","getMinutes","toHours","shownScaleTimeFrom","shownScaleTimeTo","reload","focusSelector","selectorEntityList","usersCount","getCurrentCapacity","addCapacityAlert","removeCapacityAlert","plannerIsShown","plannerWrap","ctrlKey","metaKey","altKey","keyCode","getKeyCode","checkTopSlider","isAdditionalPopupShown","getPopupWindow","isShown","getTopSlider","errorList","errorText","showFieldError","showLocationRepeatBusyErrorPopup","alert","getLocationRepeatBusyErrorPopup","onYesCallback","onCancelCallback","onPopupCloseCallback","excludes","fields","getDescription","desc","getTextLocation","isFullDay","toString","wasRruleChanged","JSON","stringify","formData","endsOn","FREQ","INTERVAL","COUNT","UNTIL","BYDAY","getAll","getUserCodes","codes","valuesInput","attendeesWrap","command","isObjectLike","userIdList","ATTENDEES","eventOwner","CAL_TYPE","OWNER_ID","CREATED_BY","clearAccessibilityData","inviteGuestLink","emailUsers","selectMode","projectRole","role","projectId","split","dynamicLoad","EXTERNAL_TYPE","connectionLinks","currentSection","result","currentType","sectId","sectionIsShown","hiddenSections","getHiddenSections","setHiddenSections","saveHiddenSections","isEditForm"],"mappings":"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"}