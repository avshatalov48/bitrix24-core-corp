{"version":3,"file":"eventeditform.bundle.js","sources":["../src/sliderdatetimecontrol.js","../src/eventeditform.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Dom} from 'main.core';\nimport {DateTimeControl, TimeSelector} from 'calendar.controls';\n\nexport class SliderDateTimeControl extends DateTimeControl\n{\n\tcreate()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.outerContent.querySelector(`#${this.UID}_datetime_container`);\n\t\tthis.DOM.fromDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_from`);\n\t\tthis.DOM.toDate = this.DOM.outerContent.querySelector(`#${this.UID}_date_to`);\n\t\tthis.DOM.fromTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_from`);\n\t\tthis.DOM.toTime = this.DOM.outerContent.querySelector(`#${this.UID}_time_to`);\n\n\t\tthis.fromTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.fromTime,\n\t\t\tonChangeCallback: this.handleTimeFromChange.bind(this)\n\t\t});\n\n\t\tthis.toTimeControl = new TimeSelector({\n\t\t\tinput: this.DOM.toTime,\n\t\t\tonChangeCallback: this.handleTimeToChange.bind(this)\n\t\t});\n\n\t\tthis.DOM.fullDay = this.DOM.outerContent.querySelector(`#${this.UID}_date_full_day`);\n\t\tthis.DOM.defTimezoneWrap = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_wrap`);\n\t\tthis.DOM.defTimezone = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_default`);\n\n\t\tthis.DOM.fromTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_from`);\n\t\tthis.DOM.toTz = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_to`);\n\t\tthis.DOM.tzButton = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_btn`);\n\t\tthis.DOM.tzOuterCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_wrap`);\n\t\tthis.DOM.tzCont = this.DOM.outerContent.querySelector(`#${this.UID}_timezone_inner_wrap`);\n\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_hint`).title = Loc.getMessage('EC_EVENT_TZ_HINT');\n\t\tthis.DOM.outerContent.querySelector(`#${this.UID}_timezone_default_hint`).title = Loc.getMessage('EC_EVENT_TZ_DEF_HINT');\n\n\t\tthis.prepareModel();\n\t\tthis.bindEventHandlers();\n\t}\n\n\tprepareModel()\n\t{\n\t\tDom.adjust(this.DOM.fromDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toDate, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.fromTime, {props: {autocomplete: 'off'}});\n\t\tDom.adjust(this.DOM.toTime, {props: {autocomplete: 'off'}});\n\t}\n}","\"use strict\";\nimport {Type, Event, Loc, Dom, Tag, Runtime} from 'main.core';\nimport {SliderDateTimeControl} from './sliderdatetimecontrol.js';\nimport {SectionSelector, Reminder, ColorSelector, Location, RepeatSelector, BusyUsersDialog} from 'calendar.controls';\nimport {Util} from 'calendar.util';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {SectionManager} from \"calendar.sectionmanager\";\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Planner} from \"calendar.planner\";\nimport {TagSelector as EntityTagSelector} from 'ui.entity-selector';\nimport {MobileSyncBanner} from 'calendar.sync.interface';\nimport { RoomsManager } from 'calendar.roomsmanager';\n\nexport class EventEditForm\n{\n\tDOM = {};\n\tuid = null;\n\tsliderId = \"calendar:edit-entry-slider\";\n\tzIndex = 3100;\n\tdenyClose = false;\n\tformType = 'slider_main';\n\tSTATE = {READY: 1, REQUEST: 2, ERROR: 3};\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tuserSettings = {};\n\tprevUserList = [];\n\tloadedAccessibilityData = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.name = options.name || 'eventeditform';\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.locationAccess = options.locationAccess || false;\n\t\tthis.locationCapacity = options.locationCapacity || 0;\n\t\tthis.dayOfWeekMonthFormat = options.dayOfWeekMonthFormat || false;\n\t\tthis.roomsManager = options.roomsManager || null;\n\t\tthis.userId = options.userId || parseInt(Loc.getMessage('USER_ID'));\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.entryId = parseInt(options.entryId) || null;\n\t\tthis.entry = options.entry || null;\n\t\tthis.formDataValue = options.formDataValue || {};\n\t\tthis.emitter = new EventEmitter();\n\t\tthis.emitter.setEventNamespace('BX.Calendar.EventEditForm');\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.formSettings = {\n\t\t\tpinnedFields : {}\n\t\t};\n\t\tif (!this.ownerId && this.type === 'user')\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\n\t\tif (Type.isDate(options.entryDateFrom) && !this.formDataValue.from)\n\t\t{\n\t\t\tthis.formDataValue.from = options.entryDateFrom;\n\t\t\tthis.formDataValue.to = new Date(options.entryDateFrom.getTime() + 3600);\n\t\t}\n\n\t\tthis.participantsEntityList = Type.isArray(options.participantsEntityList)\n\t\t\t? options.participantsEntityList\n\t\t\t: [];\n\n\t\tthis.participantsSelectorEntityList = Type.isArray(options.participantsSelectorEntityList)\n\t\t\t? options.participantsSelectorEntityList\n\t\t\t: [];\n\n\t\tif (options.entryName && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.name = options.entryName;\n\t\t}\n\t\tif (options.entryDescription && !this.entryId)\n\t\t{\n\t\t\tthis.formDataValue.description = options.entryDescription;\n\t\t}\n\n\t\tthis.refreshPlanner = Runtime.debounce(this.refreshPlannerState, 100, this);\n\t\tthis.state = this.STATE.READY;\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.handlePullBind = this.handlePull.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.sliderId = slider.getUrl();\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.onLoadSlider.bind(this));\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\t\tthis.setCurrentEntry(this.entry || null);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setCurrentEntry(params.entry);\n\t\tif (params.formType)\n\t\t{\n\t\t\tthis.formType = params.formType;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this)\n\t\t\t}\n\t\t});\n\n\t\tthis.opened = true;\n\t\tthis.bindEventHandlers();\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tbindEventHandlers()\n\t{\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullBind);\n\n\t\t// region 'protection from closing slider by accident'\n\t\tthis.mouseUpNodeCheck = null;\n\n\t\tEvent.bind(document, 'mousedown', (e)=>{this.mousedownTarget = e.target || e.srcElement;});\n\t\tEvent.bind(document, 'mouseup', (e)=>{\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (this.mousedownTarget !== target)\n\t\t\t{\n\t\t\t\tthis.mouseUpNodeCheck = false;\n\t\t\t}\n\t\t\tsetTimeout(()=>{this.mouseUpNodeCheck = null;}, 0);\n\t\t});\n\t\t// endregion\n\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupShown\", this.BX.proxy(this.denySliderClose, this));\n\t\tthis.BX.addCustomEvent(window, \"onCalendarControlChildPopupClosed\", this.BX.proxy(this.allowSliderClose, this));\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t\tthis.sliderId = this.slider.getUrl();\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(this.slider.layout.content, this.slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\t\tthis.setFormValues();\n\t}\n\n\tclose()\n\t{\n\t\tif (!this.checkDenyClose())\n\t\t{\n\t\t\tthis.state = this.STATE.READY;\n\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t}\n\t}\n\n\tsave(options = {})\n\t{\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (!this.entry.id\n\t\t\t&& this.hasExternalEmailUsers()\n\t\t\t&& Util.checkEmailLimitationPopup()\n\t\t\t&& !options.emailLimitationDialogShown)\n\t\t{\n\t\t\tEntryManager.showEmailLimitationDialog({\n\t\t\t\tcallback: () => {\n\t\t\t\t\toptions.emailLimitationDialogShown = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.userSettings.sendFromEmail && this.hasExternalEmailUsers())\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tif (params.sendFromEmail)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userSettings.sendFromEmail = params.sendFromEmail;\n\t\t\t\t\t}\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.entry.id && this.entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section', 'notify']).length > 0)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tthis.save({\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tconfirmed: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.entry.id\n\t\t\t&& this.entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& this.getFormDataChanges().includes('date&time')\n\t\t\t&& this.entry.getAttendees().find((item) => {return item.STATUS === 'N';})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tDom.addClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\tDom.addClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.DOM.form.id.value = this.entry.id || 0;\n\n\t\t// Location\n\t\tthis.DOM.form.location.value = this.locationSelector.getTextValue();\n\n\t\tif (this.editor)\n\t\t{\n\t\t\tthis.editor.SaveContent();\n\t\t}\n\n\t\tlet section = this.getCurrentSection();\n\t\tif (section)\n\t\t{\n\t\t\t// Color\n\t\t\tif (section.COLOR.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t\t{\n\t\t\t\tthis.DOM.form.color.value = this.colorSelector.getValue();\n\t\t\t}\n\t\t\t// this.BX.userOptions.save('calendar', 'user_settings', 'lastUsedSection', parseInt(section.ID));\n\t\t}\n\n\t\tthis.DOM.form.current_date_from.value = options.recursionMode ? Util.formatDate(this.entry.from) : '';\n\t\tthis.DOM.form.rec_edit_mode.value = options.recursionMode || '';\n\n\t\tif (options.sendInvitesAgain !== undefined)\n\t\t{\n\t\t\tthis.DOM.form.appendChild(Tag.render`<input name=\"sendInvitesAgain\" type=\"hidden\" value=\"${options.sendInvitesAgain ? 'Y' : 'N'}\">`);\n\t\t}\n\n\t\tif (!this.DOM.form.requestUid)\n\t\t{\n\t\t\tthis.DOM.requestUid = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input name=\"requestUid\" type=\"hidden\">`\n\t\t\t);\n\t\t}\n\t\t\n\t\tif (!this.DOM.form.meeting_host)\n\t\t{\n\t\t\tthis.DOM.meeting_host = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"meeting_host\" value=\"${this.entry.data.MEETING_HOST || '0'}\">`\n\t\t\t);\n\t\t}\n\t\t\n\t\tif (!this.DOM.form.chat_id)\n\t\t{\n\t\t\tthis.DOM.chat_id = this.DOM.form.appendChild(\n\t\t\t\tTag.render`<input type=\"hidden\" name=\"chat_id\" value=\"${this.entry.data.MEETING ? this.entry.data.MEETING.CHAT_ID : 0}\">`\n\t\t\t)\n\t\t}\n\t\t\n\t\tthis.DOM.requestUid.value = Util.registerRequestId();\n\n\t\t// Save attendees from userSelector\n\t\tconst attendeesEntityList = this.getUserSelectorEntityList();\n\t\tDom.clean(this.DOM.userSelectorValueWarp);\n\t\tattendeesEntityList.forEach((entity, index) => {\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][entityId]\" value=\"${entity.entityId}\">\n\t\t\t`);\n\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t<input type=\"hidden\" name=\"attendeesEntityList[${index}][id]\" value=\"${entity.id}\">\n\t\t\t`);\n\t\t});\n\n\t\tlet checkCurrentUsersAccessibility = !this.entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (!checkCurrentUsersAccessibility\n\t\t\t&& this.getFormDataChanges().includes('codes'))\n\t\t{\n\t\t\tconst previousAttendeesList = this.entry.getAttendeesEntityList();\n\t\t\tattendeesEntityList.forEach(entity => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& parseInt(entity.id) === parseInt(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t\t\t\t\t<input type=\"hidden\" name=\"newAttendeesList[]\" value=\"${parseInt(entity.id)}\">\n\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.DOM.userSelectorValueWarp.appendChild(Tag.render`\n\t\t\t<input type=\"hidden\" name=\"checkCurrentUsersAccessibility\" value=\"${checkCurrentUsersAccessibility ? 'Y' : 'N'}\">\n\t\t`);\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', {\n\t\t\tdata: new FormData(this.DOM.form),\n\t\t\tanalyticsLabel: {\n\t\t\t\tcalendarAction: this.entry.id ? 'edit_event' : 'create_event',\n\t\t\t\tformType: 'full',\n\t\t\t\temailGuests: this.hasExternalEmailUsers() ? 'Y' : 'N',\n\t\t\t\tmarkView: Util.getCurrentView() || 'outside',\n\t\t\t\tmarkCrm: this.DOM.form['UF_CRM_CAL_EVENT[]'] && this.DOM.form['UF_CRM_CAL_EVENT[]'].value ? 'Y' : 'N',\n\t\t\t\tmarkRrule: this.repeatSelector.getType(),\n\t\t\t\tmarkMeeting: this.entry.isMeeting() ? 'Y' : 'N',\n\t\t\t\tmarkType: this.type\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\t\tif (this.isLocationCalendar)\n\t\t\t\t{\n\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(\n\t\t\t\t\t\tLocation.parseStringValue(this.DOM.form.location.value).room_id\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tthis.allowSliderClose();\n\t\t\t\tthis.close();\n\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\n\t\t\t\tif (response.data.entryId)\n\t\t\t\t{\n\t\t\t\t\tif (this.entry.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (response.data.displayMobileBanner)\n\t\t\t\t{\n\t\t\t\t\tnew MobileSyncBanner().showInPopup();\n\t\t\t\t}\n\n\t\t\t\tif (response.data.countEventWithEmailGuestAmount)\n\t\t\t\t{\n\t\t\t\t\tUtil.setEventWithEmailGuestAmount(response.data.countEventWithEmailGuestAmount);\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(response.data.eventList)\n\t\t\t\t\t&& response.data.eventList.length\n\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t&& response.data.eventList[0].REMIND.length\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\tresponse.data.eventList[0].DT_SKIP_TIME === 'Y' ? 'fullDay' : 'withTime',\n\t\t\t\t\t\tresponse.data.eventList[0].REMIND\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.emitter.emit('onSave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\n\t\t\t\tEventEmitter.emit('BX.Calendar:onEntrySave', new BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsliderId: this.sliderId,\n\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\toptions: options\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tDom.removeClass(this.DOM.saveBtn, this.BX.UI.Button.State.CLOCKING);\n\t\t\t\tDom.removeClass(this.DOM.closeBtn, this.BX.UI.Button.State.DISABLED);\n\n\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t{\n\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\tlet errors = [];\n\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\tif (error.code !== \"edit_entry_user_busy\")\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t}\n\n\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t{\n\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t}\n\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t}\n\t\t);\n\n\t\treturn true;\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tlet\n\t\t\tusers = [],\n\t\t\tuserIds = [];\n\n\t\tfor (let id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.DOM.form.exclude_users.value = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({users: users});\n\t}\n\n\tclientSideCheck()\n\t{\n\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tif (this.checkDenyClose())\n\t\t\t{\n\t\t\t\tevent.denyAction();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider::onClose\", this.sliderOnClose);\n\t\t\t\tif (this.attendeesSelector)\n\t\t\t\t \tthis.attendeesSelector.closeAll();\n\n\t\t\t\tthis.destroy(event);\n\t\t\t}\n\t\t}\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoUninstall', [{plannerId: this.plannerId}]);\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tif (Location)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t}\n\t\t\tUtil.closeAllPopups();\n\t\t\tthis.planner = null;\n\t\t\tthis.opened = false;\n\t\t\tUtil.clearPlannerWatches();\n\t\t}\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\tlet promise = new this.BX.Promise();\n\n\t\tlet entry = this.getCurrentEntry();\n\n\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getEditEventSlider', {\n\t\t\tdata: {\n\t\t\t\tevent_id: this.entryId || entry.id,\n\t\t\t\tdate_from: entry ? Util.formatDate(entry.from) : '',\n\t\t\t\tform_type: this.formType,\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId,\n\t\t\t\tentityList: this.participantsEntityList,\n\t\t\t}\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet html = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.editorId = params.editorId;\n\t\t\t\t\t\tthis.formSettings = this.getSettings(params.formSettings || []);\n\n\t\t\t\t\t\tlet attendeesEntityList = this.formDataValue.attendeesEntityList\n\t\t\t\t\t\t\t|| params.attendeesEntityList\n\t\t\t\t\t\t\t|| [];\n\n\t\t\t\t\t\tif (!entry.id && this.participantsEntityList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList = this.participantsEntityList;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isArray(attendeesEntityList))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tattendeesEntityList.forEach((item) => {\n\t\t\t\t\t\t\t\tif (item.entityId === 'user' && params.userIndex[item.id])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\titem.entityType = params.userIndex[item.id].EMAIL_USER ? 'email' : 'employee';\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.setUserSelectorEntityList(attendeesEntityList);\n\n\t\t\t\t\t\tthis.attendeesPreselectedItems = this.getUserSelectorEntityList().map((item) => {return [item.entityId, item.id]});\n\t\t\t\t\t\tthis.setUserSettings(params.userSettings);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestAmount(params.countEventWithEmailGuestAmount);\n\t\t\t\t\t\tUtil.setEventWithEmailGuestLimit(params.eventWithEmailGuestLimit);\n\t\t\t\t\t\tthis.handleSections(params.sections, params.trackingUsersList);\n\t\t\t\t\t\tthis.handleLocationData(params.locationFeatureEnabled, params.locationList, params.iblockMeetingRoomList);\n\t\t\t\t\t\tthis.locationAccess = params.locationAccess;\n\t\t\t\t\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\t\t\t\t\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!entry.id && !entry.sectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setCurrentEntry();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.updateEntryData(params.entry, {\n\t\t\t\t\t\t\tuserSettings: this.userSettings\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst key = this.type + this.ownerId;\n\t\t\t\t\t\tif (this.userSettings.defaultSections && this.userSettings.defaultSections[key])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tSectionManager.setNewEntrySectionId(this.userSettings.defaultSections[key]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpromise.fulfill(html);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\t//this.calendar.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\treturn promise;\n\t}\n\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonsWrap = this.DOM.content.querySelector('.calendar-form-buttons-fixed');\n\t\tthis.DOM.saveBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_save`);\n\t\tthis.DOM.closeBtn = this.DOM.buttonsWrap.querySelector(`#${uid}_close`);\n\t\tEvent.bind(this.DOM.saveBtn, 'click', this.save.bind(this));\n\t\tEvent.bind(this.DOM.closeBtn, 'click', this.close.bind(this));\n\n\t\tthis.initFormFieldManager(uid);\n\t\tthis.initDateTimeControl(uid);\n\t\tthis.initNameControl(uid);\n\t\tthis.initEditorControl(uid);\n\t\tthis.initAttendeesControl();\n\t\tthis.initPlanner(uid);\n\t\tthis.initReminderControl(uid);\n\t\tthis.initSectionSelector(uid);\n\t\tthis.initLocationControl(uid);\n\t\tthis.initRepeatRuleControl(uid);\n\t\tthis.initColorControl(uid);\n\t\tthis.initCrmUfControl(uid);\n\t\tthis.initAdditionalControls(uid);\n\n\t\tthis.checkLastItemBorder();\n\n\t\tif (this.DOM.buttonsWrap)\n\t\t{\n\t\t\tBX.ZIndexManager.register(this.DOM.buttonsWrap);\n\t\t}\n\t}\n\n\tupdateEntryData(entryData, options = {})\n\t{\n\t\tif (this.entry instanceof Entry)\n\t\t{\n\t\t\tlet userSettings = options.userSettings || {};\n\n\t\t\tif (Type.isPlainObject(entryData))\n\t\t\t{\n\t\t\t\tthis.entry.prepareData(entryData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.entry.getTimezoneFrom() || this.entry.getTimezoneTo())\n\t\t\t\t{\n\t\t\t\t\tthis.entry.setTimezone(userSettings.timezoneName || userSettings.timezoneDefaultName || null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\thandleSections(sections, trackingUsersList)\n\t{\n\t\tthis.sections = sections;\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(sections))\n\t\t{\n\t\t\tsections.forEach((value, ind) => {this.sectionIndex[parseInt(value.ID)] = ind;}, this);\n\t\t}\n\t}\n\n\thandleLocationData(locationFeatureEnabled, locationList, iblockMeetingRoomList)\n\t{\n\t\tthis.locationFeatureEnabled = !!locationFeatureEnabled;\n\t\tthis.locationList = locationList || [];\n\t\tthis.iblockMeetingRoomList = iblockMeetingRoomList || [];\n\n\t\tLocation.setLocationList(locationList);\n\t\tLocation.setMeetingRoomList(iblockMeetingRoomList);\n\t}\n\n\tsetUserSettings(userSettings)\n\t{\n\t\tthis.userSettings = userSettings;\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\tsetFormValues()\n\t{\n\t\tlet entry = this.entry;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay) ? this.formDataValue.fullDay : entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName\n\t\t});\n\n\t\tthis.DOM.entryName.value = this.formDataValue.name || entry.getName();\n\n\t\t// Section\n\t\tif (this.formDataValue.section)\n\t\t{\n\t\t\tentry.sectionId = parseInt(this.formDataValue.section);\n\t\t}\n\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\n\t\tif (!this.fieldIsPinned('section'))\n\t\t{\n\t\t\tlet currentSection = this.getCurrentSection();\n\t\t\tif (currentSection['CAL_TYPE'] !== this.type || currentSection['CAL_TYPE'] === this.type && parseInt(currentSection['OWNER_ID']) !== this.ownerId)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(this.formDataValue.color || entry.getColor() || this.getCurrentSection().COLOR);\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(\n\t\t\tthis.formDataValue.reminder || entry.getReminders(),\n\t\t\ttrue,\n\t\t\tfalse\n\t\t);\n\n\t\t// Recursion\n\t\tthis.repeatSelector.setValue(this.formDataValue.rrule || entry.getRrule());\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis.DOM.accessibilityInput.value = entry.accessibility;\n\t\t}\n\n\t\t// Location\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.setValue(this.formDataValue.location\n\t\t\t\t|| this.locationSelector.default || entry.getLocation());\n\t\t\t\n\t\t\tthis.locationSelector.checkLocationAccessibility({\n\t\t\t\tfrom: this.formDataValue.from || entry.from,\n\t\t\t\tto: this.formDataValue.to || entry.to,\n\t\t\t\tfullDay: Type.isBoolean(this.formDataValue.fullDay)\n\t\t\t\t\t? this.formDataValue.fullDay\n\t\t\t\t\t: entry.fullDay,\n\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t})\n\t\t}\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.DOM.form.meeting_notify)\n\t\t{\n\t\t\tif (this.formDataValue.meetingNotify !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.formDataValue.meetingNotify;\n\t\t\t}\n\t\t\tif (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = this.entry.data.MEETING.NOTIFY;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.meeting_notify.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.hide_guests)\n\t\t{\n\t\t\tif (this.formDataValue.hideGuests !== undefined)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.formDataValue.hideGuests === 'Y';\n\t\t\t}\n\t\t\telse if (this.entry.data && this.entry.data.MEETING)\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = this.entry.data.MEETING.HIDE_GUESTS;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.hide_guests.checked = true; // default value\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.form.allow_invite)\n\t\t{\n\t\t\tif (this.entry.data)\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.data.MEETING && this.entry.data.MEETING.ALLOW_INVITE;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.form.allow_invite.checked = this.entry.allowInvite;\n\t\t\t}\n\t\t}\n\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t}).then(()=>{\n\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t{\n\t\t\t\tthis.showHideGuestsOption();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t}\n\t\t});\n\t}\n\n\tswitchFullDay(value)\n\t{\n\t\tvalue = !!this.DOM.fullDay.checked;\n\t\tif (value && Type.isString(this.userSettings.timezoneName)\n\t\t\t&& (!this.DOM.fromTz.value || !this.DOM.toTz.value))\n\t\t{\n\t\t\tthis.DOM.fromTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.toTz.value = this.userSettings.timezoneName;\n\t\t\tthis.DOM.defTimezone.value = this.userSettings.timezoneName;\n\t\t}\n\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.DOM.dateTimeWrap, 'calendar-options-item-datetime-hide-time');\n\t\t}\n\n\t\tif (this.remindersControl)\n\t\t{\n\t\t\tthis.remindersControl.setFullDayMode(value);\n\t\t}\n\n\t\tthis.refreshPlanner();\n\t}\n\n\tswitchTimezone()\n\t{\n\t\tif (Dom.hasClass(this.DOM.tzCont, 'calendar-options-timezone-collapse'))\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.tzCont, 'calendar-options-timezone-collapse');\n\t\t\tDom.removeClass(this.DOM.tzCont, 'calendar-options-timezone-expand');\n\t\t}\n\t}\n\n\tinitFormFieldManager(uid)\n\t{\n\t\tthis.DOM.mainBlock = this.DOM.content.querySelector(`#${uid}_main_block_wrap`);\n\t\tthis.DOM.additionalBlockWrap = this.DOM.content.querySelector(`#${uid}_additional_block_wrap`);\n\t\tthis.DOM.additionalBlock = this.DOM.content.querySelector(`#${uid}_additional_block`);\n\t\tthis.DOM.pinnedNamesWrap = this.DOM.content.querySelector(`#${uid}_additional_pinned_names`);\n\t\tthis.DOM.additionalSwitch = this.DOM.content.querySelector(`#${uid}_additional_switch`);\n\n\n\t\tif (this.isLocationCalendar && !this.fieldIsPinned('location'))\n\t\t{\n\t\t\tthis.pinField('location');\n\t\t}\n\n\t\tEvent.bind(this.DOM.additionalSwitch, 'click', () => {\n\t\t\tDom.toggleClass(this.DOM.additionalSwitch, 'opened');\n\t\t\tDom.toggleClass(this.DOM.additionalBlock, 'invisible');\n\t\t});\n\n\t\tEvent.bind(this.DOM.formWrap, 'click', (e) => {\n\t\t\tlet target = e.target || e.srcElement;\n\t\t\tif (target && target.getAttribute && target.getAttribute('data-bx-fixfield'))\n\t\t\t{\n\t\t\t\tlet fieldName = target.getAttribute('data-bx-fixfield');\n\t\t\t\tif (!this.fieldIsPinned(fieldName))\n\t\t\t\t{\n\t\t\t\t\tthis.pinField(fieldName);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.unPinField(fieldName);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitDateTimeControl(uid)\n\t{\n\t\tthis.dateTimeControl = new SliderDateTimeControl(uid, {\n\t\t\tshowTimezone: true,\n\t\t\touterContent: this.DOM.content\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tlet value = event.getData().value;\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (!this.entry.id && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(\n\t\t\t\t\t\t\tdefaultReminders,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.planner)\n\t\t\t\t{\n\t\t\t\t\tthis.planner.updateSelector(value.from, value.to, value.fullDay);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: value.from,\n\t\t\t\t\t\t\tto: value.to,\n\t\t\t\t\t\t\tfullDay: value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitNameControl(uid)\n\t{\n\t\tthis.DOM.entryName = this.DOM.content.querySelector(`#${uid}_entry_name`);\n\t\tsetTimeout(() => {\n\t\t\tthis.DOM.entryName.focus();\n\t\t\tthis.DOM.entryName.select();\n\t\t}, 500);\n\t}\n\n\tinitReminderControl(uid)\n\t{\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.reminderWrap = this.DOM.content.querySelector(`#${uid}_reminder`);\n\t\tthis.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.reminderWrap,\n\t\t\tzIndex: this.zIndex,\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) =>\n\t\t{\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tDom.clean(this.DOM.reminderInputsWrap);\n\t\t\t\tthis.reminderValues.forEach((value) => {\n\t\t\t\t\tthis.DOM.reminderInputsWrap.appendChild(Dom.create('INPUT', {\n\t\t\t\t\t\tprops: {name: 'reminder[]', type: 'hidden'},\n\t\t\t\t\t\tattrs: {value: value}}));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitSectionSelector(uid)\n\t{\n\t\tthis.DOM.sectionInput = this.DOM.content.querySelector(`#${uid}_section`);\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.content.querySelector(`#${uid}_section_wrap`),\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type || 'user',\n\t\t\t\townerId: this.ownerId || this.userId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t}),\n\t\t\tmode: 'full',\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: ()=>{\n\t\t\t\tlet section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.ID,\n\t\t\t\t\t\tname: section.NAME,\n\t\t\t\t\t\tcolor: section.COLOR\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.sectionInput.value = sectionValue.id;\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.entry.setSectionId(sectionValue.id);\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(\n\t\t\t\t\t\tsectionValue.id,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarType: this.type,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tsections: this.sections\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinitEditorControl(uid)\n\t{\n\t\tif (!window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\treturn setTimeout(BX.delegate(this.initEditorControl, this), 50);\n\t\t}\n\n\t\tthis.editor = null;\n\t\tif (window[\"BXHtmlEditor\"])\n\t\t{\n\t\t\tthis.editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (\n\t\t\t!this.editor\n\t\t\t&& top[\"BXHtmlEditor\"]\n\t\t\t&& top[\"BXHtmlEditor\"] !== window[\"BXHtmlEditor\"]\n\t\t)\n\t\t{\n\t\t\tthis.editor = top[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t}\n\n\t\tif (this.editor && this.editor.IsShown())\n\t\t{\n\t\t\tthis.customizeHtmlEditor();\n\n\t\t\tif (this.formDataValue.description)\n\t\t\t{\n\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.addCustomEvent(window[\"BXHtmlEditor\"], 'OnEditorCreated', function (editor)\n\t\t\t{\n\t\t\t\tif (editor.id === this.editorId)\n\t\t\t\t{\n\t\t\t\t\tthis.editor = editor;\n\t\t\t\t\tthis.customizeHtmlEditor();\n\n\t\t\t\t\tif (this.formDataValue.description)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.editor.SetContent(this.formDataValue.description);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tcustomizeHtmlEditor()\n\t{\n\t\tlet editor = this.editor;\n\t\tif (editor.toolbar && editor.toolbar.controls && editor.toolbar.controls.spoiler)\n\t\t{\n\t\t\tDom.remove(editor.toolbar.controls.spoiler.pCont);\n\t\t}\n\t}\n\n\tinitLocationControl(uid)\n\t{\n\t\tthis.DOM.locationWrap = this.DOM.content.querySelector(`#${uid}_location_wrap`);\n\t\tthis.DOM.locationInput = this.DOM.content.querySelector(`#${uid}_location`);\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\tinputName: 'lo_cation', // don't use 'location' word here mantis:107863\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList,\n\t\t\t\tonChangeCallback: this.refreshPlanner\n\t\t\t}\n\t\t);\n\t}\n\n\tinitRepeatRuleControl(uid)\n\t{\n\t\tthis.DOM.rruleWrap = this.DOM.content.querySelector(`#${uid}_rrule_wrap`);\n\t\tthis.repeatSelector = new RepeatSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.rruleWrap,\n\t\t\t\trruleType: this.DOM.content.querySelector(`#${uid}_rrule_type`),\n\t\t\t\tgetDate: function() {return this.dateTimeControl.getValue().from;}.bind(this)\n\t\t\t}\n\t\t);\n\n\t\tthis.dateTimeControl.subscribe('onChange', ()=>{\n\t\t\tif (this.repeatSelector.getType() === 'weekly')\n\t\t\t{\n\t\t\t\tthis.repeatSelector.changeType(this.repeatSelector.getType());\n\t\t\t}\n\t\t});\n\t}\n\n\tinitAttendeesControl()\n\t{\n\t\tthis.DOM.userSelectorWrap = this.DOM.content.querySelector('.calendar-attendees-selector-wrap');\n\t\tthis.DOM.userSelectorValueWarp = this.DOM.userSelectorWrap.appendChild(Tag.render`<div></div>`);\n\n\t\tthis.userTagSelector = new EntityTagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.attendeesPreselectedItems || [],\n\t\t\t\tzIndex: this.slider.zIndex,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: this.getParticipantsSelectorEntityList(),\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_USER_DIALOG_404_TITLE'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('EC_USER_DIALOG_404_SUBTITLE'),\n\t\t\t\t\t\ticon: '/bitrix/images/calendar/search-email.svg',\n\t\t\t\t\t\ticonOpacity: 100,\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.DOM.userSelectorWrap);\n\t\tthis.DOM.hideGuestsWrap = this.DOM.content.querySelector('.calendar-hide-members-wrap');\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tif (this.planner)\n\t\t{\n\t\t\tthis.planner.show();\n\t\t\tthis.planner.showLoader();\n\n\t\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\t\tthis.setUserSelectorEntityList(selectedItems.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tentityId: item.entityId,\n\t\t\t\t\tid: item.id,\n\t\t\t\t\tentityType: item.entityType\n\t\t\t\t}}));\n\t\t\tthis.refreshPlanner();\n\t\t}\n\t}\n\n\thasExternalEmailUsers()\n\t{\n\t\treturn !!this.getUserSelectorEntityList().find((item) => {return item.entityType === 'email';});\n\t}\n\n\tshowHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = '';\n\t\tUtil.initHintNode(this.DOM.hideGuestsWrap.querySelector('.calendar-hide-members-helper'));\n\t}\n\n\thideHideGuestsOption()\n\t{\n\t\tthis.DOM.hideGuestsWrap.style.display = 'none';\n\t}\n\n\tsetHideGuestsValue(hideGuests = true)\n\t{\n\t\tthis.hideGuests = hideGuests;\n\t}\n\n\tinitPlanner(uid)\n\t{\n\t\tthis.DOM.plannerOuterWrap = this.DOM.content.querySelector(`#${uid}_planner_outer_wrap`);\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerOuterWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerOuterWrap.offsetWidth),\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat,\n\t\t\tlocked: !this.plannerFeatureEnabled\n\t\t});\n\n\t\tthis.planner.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.planner.subscribe('onExpandTimeline', this.handleExpandPlannerTimeline.bind(this));\n\t\tthis.planner.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\t}\n\n\tloadPlannerData(params = {})\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\ttype: this.type,\n\t\t\t\t\tentityList: params.entityList || [],\n\t\t\t\t\tdateFrom: params.from || '',\n\t\t\t\t\tdateTo: params.to || '',\n\t\t\t\t\ttimezone: params.timezone || '',\n\t\t\t\t\tlocation: params.location || '',\n\t\t\t\t\tprevUserList: this.prevUserList\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tif (this.planner)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfor (let id in response.data.accessibility)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (response.data.accessibility.hasOwnProperty(id))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.loadedAccessibilityData[id] = response.data.accessibility[id];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (Type.isArray(response.data.entries))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tresponse.data.entries.forEach((entry) => {\n\t\t\t\t\t\t\t\t\tif (entry.type === 'user' && !this.prevUserList.includes(parseInt(entry.id)))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.prevUserList.push(parseInt(entry.id));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\tthis.loadedAccessibilityData\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.planner.updateSelector(\n\t\t\t\t\t\t\t\tdateTime.from,\n\t\t\t\t\t\t\t\tdateTime.to,\n\t\t\t\t\t\t\t\tdateTime.fullDay,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfocus: params.focusSelector !== false\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.hasExternalEmailUsers())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.showHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.hideHideGuestsOption();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\t\t});\n\t}\n\n\n\tinitAdditionalControls(uid)\n\t{\n\t\tthis.DOM.accessibilityInput = this.DOM.content.querySelector(`#${uid}_accessibility`);\n\t\tthis.DOM.privateEventCheckbox = this.DOM.content.querySelector(`#${uid}_private`);\n\t\tthis.DOM.importantEventCheckbox = this.DOM.content.querySelector(`#${uid}_important`);\n\t}\n\n\tinitColorControl(uid)\n\t{\n\t\tthis.DOM.colorWrap = this.DOM.content.querySelector(`#${uid}_color_selector_wrap`);\n\t\tthis.colorSelector = new ColorSelector(\n\t\t\t{\n\t\t\t\twrap: this.DOM.colorWrap\n\t\t\t}\n\t\t);\n\t}\n\n\tinitCrmUfControl(uid)\n\t{\n\t\tthis.DOM.crmUfWrap = BX(uid + '-uf-crm-wrap');\n\n\t\tif (this.DOM.crmUfWrap)\n\t\t{\n\t\t\tlet entry = this.getCurrentEntry();\n\t\t\tlet loader = this.DOM.crmUfWrap.appendChild(Dom.adjust(Util.getLoader(50), {style: {height: '40px', width: '40px'}}));\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCrmUserfield', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tevent_id: (entry && entry.id) ? entry.id : 0\n\t\t\t\t\t}\n\t\t\t\t}).then(\n\t\t\t\t\t// Success\n\t\t\t\t\tfunction(response)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (Type.isDomNode(this.DOM.crmUfWrap))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.BX.html(this.DOM.crmUfWrap, response.data.html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this),\n\t\t\t\t\t// Failure\n\t\t\t\t\tfunction (response)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(loader);\n\t\t\t\t\t}.bind(this)\n\t\t\t\t);\n\t\t\t}.bind(this), 800);\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcheckDenyClose()\n\t{\n\t\t// pending request\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\t// Check if closing of slider was caused during selection.\n\t\tif (!Type.isNull(this.mouseUpNodeCheck))\n\t\t{\n\t\t\treturn !this.mouseUpNodeCheck;\n\t\t}\n\n\t\t// if (top.BX(this.id + '_time_from_div') && top.BX(this.id + '_time_from_div').style.display !== 'none')\n\t\t// \treturn true;\n\t\t//\n\t\t// if (top.BX(this.id + '_time_to_div') && top.BX(this.id + '_time_to_div').style.display !== 'none')\n\t\t// \treturn true;\n\n\t\treturn this.denyClose;\n\t}\n\n\tsetCurrentEntry(entry = null, userIndex = null)\n\t{\n\t\tthis.entry = EntryManager.getEntryInstance(entry, userIndex, {type: this.type, ownerId: this.ownerId});\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet\n\t\t\tsection = false,\n\t\t\tsectionId = this.getCurrentSectionId();\n\n\t\tif (sectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet\n\t\t\tsection = 0,\n\t\t\tentry = this.getCurrentEntry();\n\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tsection = parseInt(entry.sectionId);\n\t\t}\n\n\t\tif (!section)\n\t\t{\n\t\t\tif (this.type === 'location')\n\t\t\t{\n\t\t\t\tsection = RoomsManager.getNewEntrySectionId();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tsection = SectionManager.getNewEntrySectionId();\n\n\t\t\t}\n\t\t\tif (!this.sectionIndex[section])\n\t\t\t{\n\t\t\t\tsection = null;\n\t\t\t}\n\t\t}\n\n\t\tif (!section && this.sections[0])\n\t\t{\n\t\t\tsection = parseInt(this.sections[0].ID);\n\t\t}\n\t\treturn section;\n\t}\n\n\tpinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHoldersAdditional[fieldName],\n\t\t\tnewField = placeHolders[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){Dom.addClass(field, 'calendar-hide-field');}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\n\t\t\t\t\twhile(this.DOM.descriptionAdditionalWrap.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewField.appendChild(this.DOM.descriptionAdditionalWrap.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.display = 'none';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 500);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = true;\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}, 300);\n\t\t}\n\t}\n\n\tunPinField(fieldName)\n\t{\n\t\tlet [placeHolders, placeHoldersAdditional] = this.getPlaceholders();\n\t\tlet\n\t\t\tfield = placeHolders[fieldName],\n\t\t\tnewField = placeHoldersAdditional[fieldName],\n\t\t\tfieldHeight = field.offsetHeight;\n\n\t\tfield.style.height = fieldHeight + 'px';\n\t\tsetTimeout(function(){\n\t\t\tDom.addClass(field, 'calendar-hide-field');\n\t\t}, 0);\n\t\tnewField.style.height = '0';\n\n\t\tif (fieldName === 'description')\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\tif (!this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.descriptionAdditionalWrap = this.DOM.additionalBlock.querySelector('.calendar-info-panel-description');\n\t\t\t\t}\n\n\t\t\t\tif (this.DOM.descriptionAdditionalWrap)\n\t\t\t\t{\n\t\t\t\t\twhile(field.firstChild)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.DOM.descriptionAdditionalWrap.appendChild(field.firstChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tnewField.style.display = '';\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}.bind(this), 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tlet editor = window[\"BXHtmlEditor\"].Get(this.editorId);\n\t\t\t\tif (editor)\n\t\t\t\t{\n\t\t\t\t\teditor.CheckAndReInit();\n\t\t\t\t}\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(function(){\n\t\t\t\twhile(field.firstChild)\n\t\t\t\t{\n\t\t\t\t\tnewField.appendChild(field.firstChild);\n\t\t\t\t}\n\t\t\t\tnewField.style.height = fieldHeight + 'px';\n\t\t\t}, 200);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.removeClass(field, 'calendar-hide-field');\n\t\t\t\tfield.style.height = '';\n\t\t\t\tnewField.style.height = '';\n\t\t\t\tthis.pinnedFieldsIndex[fieldName] = false;\n\n\t\t\t\tthis.saveSettings();\n\t\t\t\tthis.updateAdditionalBlockState();\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tfieldIsPinned(fieldName)\n\t{\n\t\treturn this.pinnedFieldsIndex[fieldName];\n\t}\n\n\tgetPlaceholders()\n\t{\n\t\tif (!this.placeHolders)\n\t\t{\n\t\t\tthis.placeHolders = {};\n\t\t\tthis.placeHoldersAdditional = {};\n\n\t\t\tlet\n\t\t\t\ti,\n\t\t\t\tfieldId,\n\t\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-additional-placeholder');\n\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHoldersAdditional[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnodes = this.DOM.formWrap.querySelectorAll('.calendar-field-placeholder');\n\t\t\tfor (i = 0; i < nodes.length; i++)\n\t\t\t{\n\t\t\t\tfieldId = nodes[i].getAttribute('data-bx-block-placeholer');\n\t\t\t\tif (fieldId)\n\t\t\t\t{\n\t\t\t\t\tthis.placeHolders[fieldId] = nodes[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [this.placeHolders, this.placeHoldersAdditional];\n\t}\n\n\tgetSettings(settings)\n\t{\n\t\tthis.pinnedFieldsIndex = {};\n\t\tlet i, pinnedFields = [];\n\n\t\tfor (i in settings.pinnedFields)\n\t\t{\n\t\t\tif (settings.pinnedFields.hasOwnProperty(i))\n\t\t\t{\n\t\t\t\tpinnedFields.push(settings.pinnedFields[i]);\n\t\t\t\tthis.pinnedFieldsIndex[settings.pinnedFields[i]] = true;\n\t\t\t}\n\t\t}\n\t\tsettings.pinnedFields = pinnedFields;\n\t\treturn settings;\n\t}\n\n\tsaveSettings()\n\t{\n\t\tlet fieldName, pinnedFields = [];\n\n\t\tfor (fieldName in this.pinnedFieldsIndex)\n\t\t{\n\t\t\tif (this.pinnedFieldsIndex.hasOwnProperty(fieldName) && this.pinnedFieldsIndex[fieldName])\n\t\t\t{\n\t\t\t\tpinnedFields.push(fieldName);\n\t\t\t}\n\t\t}\n\n\t\tthis.formSettings.pinnedFields = pinnedFields;\n\t\tthis.BX.userOptions.save('calendar', this.formType, 'pinnedFields', pinnedFields);\n\t}\n\n\tupdateAdditionalBlockState(timeout)\n\t{\n\t\tif (timeout !== false)\n\t\t{\n\t\t\tif (this.updateAdditionalBlockTimeout)\n\t\t\t{\n\t\t\t\tclearTimeout(this.updateAdditionalBlockTimeout);\n\t\t\t\tthis.updateAdditionalBlockTimeout = null;\n\t\t\t}\n\t\t\tthis.updateAdditionalBlockTimeout = setTimeout(() => {this.updateAdditionalBlockState(false)}, 300);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet i, names = this.DOM.additionalBlock.getElementsByClassName('js-calendar-field-name');\n\t\t\tDom.clean(this.DOM.pinnedNamesWrap);\n\t\t\tfor (i = 0; i < names.length; i++)\n\t\t\t{\n\t\t\t\tthis.DOM.pinnedNamesWrap.appendChild(Dom.create(\"SPAN\", {props: {className: 'calendar-additional-alt-promo-text'}, html: names[i].innerHTML}));\n\t\t\t}\n\n\t\t\tif (!names.length)\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\t\t\telse if (Dom.hasClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.additionalBlockWrap, 'calendar-additional-block-hidden');\n\t\t\t}\n\n\t\t\tthis.checkLastItemBorder();\n\t\t}\n\t}\n\n\tcheckLastItemBorder()\n\t{\n\t\tlet\n\t\t\tnoBorderClass = 'no-border',\n\t\t\ti, nodes;\n\n\t\tnodes = this.DOM.mainBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\n\t\tnodes = this.DOM.additionalBlock.querySelectorAll('.calendar-options-item-border');\n\t\tfor (i = 0; i < nodes.length; i++)\n\t\t{\n\t\t\tif (i === nodes.length - 1)\n\t\t\t{\n\t\t\t\tDom.addClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(nodes[i], noBorderClass);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue({\n\t\t\t\tfrom: data.dateFrom,\n\t\t\t\tto: data.dateTo\n\t\t\t});\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: data.dateFrom,\n\t\t\t\t\t\tto: data.dateTo,\n\t\t\t\t\t\tfullDay: data.fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.id,\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t}\n\n\thandleExpandPlannerTimeline(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tlet data = event.getData();\n\t\t\tif (data.reload)\n\t\t\t{\n\t\t\t\tthis.prevUserList = [];\n\t\t\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\t\t\tthis.loadPlannerData({\n\t\t\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\t\t\tfrom: Util.formatDate(data.dateFrom),\n\t\t\t\t\tto: Util.formatDate(data.dateTo),\n\t\t\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\t\tfocusSelector: false\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUserSelectorEntityList()\n\t{\n\t\treturn this.selectorEntityList;\n\t}\n\n\tsetUserSelectorEntityList(selectorEntityList)\n\t{\n\t\tthis.selectorEntityList = selectorEntityList;\n\t}\n\n\trefreshPlannerState()\n\t{\n\t\tlet dateTime = this.dateTimeControl.getValue();\n\t\tthis.loadPlannerData({\n\t\t\tentityList: this.getUserSelectorEntityList(),\n\t\t\tfrom: Util.formatDate(dateTime.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(dateTime.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: dateTime.timezoneFrom,\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tif (this.locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tLocation.setCurrentCapacity(this.locationCapacity);\n\t\t\t\tthis.locationCapacity = 0;\n\t\t\t}\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined)\n\t\t\t{\n\t\t\t\tif (locationCapacity)\n\t\t\t\t{\n\t\t\t\t\tlocationCapacity = 0;\n\t\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif ((e.ctrlKey || e.metaKey) && !e.altKey && e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\tif (error.code === \"edit_entry_location_busy\")\n\t\t\t\t{\n\t\t\t\t\treturn Util.showFieldError(error.message, this.DOM.locationWrap, {clearTimeout: 10000});\n\t\t\t\t}\n\t\t\t\terrorText += error.message + \"\\n\";\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tconst entry = this.entry;\n\t\tlet fields = [];\n\n\t\t// Name\n\t\tif (!excludes.includes('name')\n\t\t\t&& entry.name !== this.DOM.form.name.value)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Description\n\t\t// if (!excludes.includes('name')\n\t\t// \t&& this.descriptionValue !== this.DOM.form.desc.value)\n\t\t// {\n\t\t// \tfields.push('description');\n\t\t// }\n\n\t\t// Location\n\t\tif (!excludes.includes('location')\n\t\t\t&&\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.entry.getLocation()))\n\t\t\t!==\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (!excludes.includes('date&time')\n\t\t\t&&\n\t\t\t(entry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()))\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Section\n\t\tif (!excludes.includes('section')\n\t\t\t&&\n\t\t\tparseInt(entry.sectionId) !== parseInt(this.DOM.sectionInput.value))\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (!excludes.includes('codes')\n\t\t\t&&\n\t\t\tthis.getUserSelectorEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t\t!==\n\t\t\tentry.getAttendeesEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tgetUserCodes()\n\t{\n\t\tconst\n\t\t\tcodes = [],\n\t\t\tvaluesInput = this.DOM.attendeesWrap.querySelectorAll('input[name=\"EVENT_DESTINATION[]\"]');\n\n\t\tfor (let i = 0; i < valuesInput.length; i++)\n\t\t{\n\t\t\tif (!codes.includes(valuesInput[i].value))\n\t\t\t{\n\t\t\t\tcodes.push(valuesInput[i].value);\n\t\t\t}\n\t\t}\n\t\treturn codes;\n\t}\n\n\thandlePull(event: BaseEvent): void\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\n\t\tconst params = Type.isObjectLike(data[1]) ? data[1] : {};\n\n\t\tswitch(command)\n\t\t{\n\t\t\tcase 'edit_event':\n\t\t\tcase 'delete_event':\n\t\t\tcase 'set_meeting_status':\n\t\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES: [];\n\t\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t\t{\n\t\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t\t}\n\t\t\t\tthis.clearAccessibilityData(userIdList);\n\n\t\t\t\tthis.refreshPlannerState();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tclearAccessibilityData(userIdList: Object): void\n\t{\n\t\tif (Type.isArray(userIdList) && userIdList.length && this.prevUserList.length)\n\t\t{\n\t\t\tthis.prevUserList = this.prevUserList.filter((userId) => {\n\t\t\t\treturn !userIdList.includes(userId);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetParticipantsSelectorEntityList()\n\t{\n\t\tif (this.participantsSelectorEntityList && this.participantsSelectorEntityList.length)\n\t\t{\n\t\t\treturn this.participantsSelectorEntityList;\n\t\t}\n\n\t\tlet entityList = [\n\t\t\t{\n\t\t\t\tid: 'user',\n\t\t\t\toptions: {\n\t\t\t\t\tinviteGuestLink: true,\n\t\t\t\t\temailUsers: true,\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'project'\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'department',\n\t\t\t\toptions: {selectMode: 'usersAndDepartments'}\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: 'meta-user',\n\t\t\t\toptions: { 'all-users': true }\n\t\t\t}\n\t\t];\n\n\t\tif (this.attendeesPreselectedItems)\n\t\t{\n\t\t\tlet projectRole = null;\n\n\t\t\tthis.attendeesPreselectedItems\n\t\t\t\t.forEach((item) => {\n\t\t\t\t\tconst type = item[0];\n\t\t\t\t\tconst role = item[1];\n\t\t\t\t\tif (type === 'project-roles')\n\t\t\t\t\t{\n\t\t\t\t\t\tprojectRole = role;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t;\n\n\t\t\tif (projectRole)\n\t\t\t{\n\t\t\t\tentityList = [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-roles',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tprojectId: projectRole.split('_')[0]\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdynamicLoad: true\n\t\t\t\t\t}\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn entityList;\n\t}\n}\n"],"names":["SliderDateTimeControl","DOM","dateTimeWrap","outerContent","querySelector","UID","fromDate","toDate","fromTime","toTime","fromTimeControl","TimeSelector","input","onChangeCallback","handleTimeFromChange","bind","toTimeControl","handleTimeToChange","fullDay","defTimezoneWrap","defTimezone","fromTz","toTz","tzButton","tzOuterCont","tzCont","title","Loc","getMessage","prepareModel","bindEventHandlers","Dom","adjust","props","autocomplete","DateTimeControl","EventEditForm","options","READY","REQUEST","ERROR","name","type","isLocationCalendar","locationAccess","locationCapacity","dayOfWeekMonthFormat","roomsManager","userId","parseInt","ownerId","entryId","entry","formDataValue","emitter","EventEmitter","setEventNamespace","BX","Util","getBX","formSettings","pinnedFields","Type","isDate","entryDateFrom","from","to","Date","getTime","participantsEntityList","isArray","participantsSelectorEntityList","entryName","entryDescription","description","refreshPlanner","Runtime","debounce","refreshPlannerState","state","STATE","sliderOnClose","hide","handlePullBind","handlePull","keyHandlerBind","keyHandler","slider","promiseResolve","sliderId","getUrl","addCustomEvent","onLoadSlider","destroy","setCurrentEntry","createContent","then","html","isFunction","opened","params","formType","SidePanel","Instance","open","contentCallback","label","text","bgColor","events","onClose","onCloseComplete","onLoad","Event","document","subscribe","mouseUpNodeCheck","e","mousedownTarget","target","srcElement","setTimeout","window","proxy","denySliderClose","allowSliderClose","event","getSlider","content","layout","getData","get","initControls","uid","setFormValues","checkDenyClose","close","isPlainObject","id","hasExternalEmailUsers","checkEmailLimitationPopup","emailLimitationDialogShown","EntryManager","showEmailLimitationDialog","callback","save","userSettings","sendFromEmail","showConfirmedEmailDialog","isRecursive","confirmed","getFormDataChanges","length","showConfirmEditDialog","recursionMode","isMeeting","sendInvitesAgain","undefined","includes","getAttendees","find","item","STATUS","showReInviteUsersDialog","addClass","saveBtn","UI","Button","State","CLOCKING","closeBtn","DISABLED","form","value","location","locationSelector","getTextValue","editor","SaveContent","section","getCurrentSection","COLOR","toLowerCase","colorSelector","getValue","color","current_date_from","formatDate","rec_edit_mode","appendChild","Tag","render","requestUid","meeting_host","data","MEETING_HOST","chat_id","MEETING","CHAT_ID","registerRequestId","attendeesEntityList","getUserSelectorEntityList","clean","userSelectorValueWarp","forEach","entity","index","entityId","checkCurrentUsersAccessibility","previousAttendeesList","getAttendeesEntityList","ajax","runAction","FormData","analyticsLabel","calendarAction","emailGuests","markView","getCurrentView","markCrm","markRrule","repeatSelector","getType","markMeeting","markType","response","unsetHiddenRoom","Location","parseStringValue","room_id","removeClass","showEditEntryNotification","showNewEntryNotification","displayMobileBanner","MobileSyncBanner","showInPopup","countEventWithEmailGuestAmount","setEventWithEmailGuestAmount","eventList","REMIND","setNewEntryReminders","DT_SKIP_TIME","emit","BaseEvent","responseData","busyUsersList","handleBusyUsersError","errors","error","code","push","showError","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","exclude_users","join","show","denyAction","removeCustomEvent","attendeesSelector","closeAll","getSliderPage","onCustomEvent","plannerId","unbind","unsubscribe","setCurrentCapacity","closeAllPopups","planner","clearPlannerWatches","promise","Promise","getCurrentEntry","event_id","date_from","form_type","entityList","isOpen","util","trim","set","additionalParams","uniqueId","editorId","getSettings","userIndex","entityType","EMAIL_USER","setUserSelectorEntityList","attendeesPreselectedItems","map","setUserSettings","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","handleSections","sections","trackingUsersList","handleLocationData","locationFeatureEnabled","locationList","iblockMeetingRoomList","plannerFeatureEnabled","lock","sectionId","updateEntryData","key","defaultSections","SectionManager","setNewEntrySectionId","fulfill","formWrap","buttonsWrap","initFormFieldManager","initDateTimeControl","initNameControl","initEditorControl","initAttendeesControl","initPlanner","initReminderControl","initSectionSelector","initLocationControl","initRepeatRuleControl","initColorControl","initCrmUfControl","initAdditionalControls","checkLastItemBorder","ZIndexManager","register","entryData","Entry","prepareData","getTimezoneFrom","getTimezoneTo","setTimezone","timezoneName","timezoneDefaultName","sectionIndex","ind","ID","setLocationList","setMeetingRoomList","dateTimeControl","setValue","isBoolean","timezoneFrom","timezoneTo","getName","sectionInput","getCurrentSectionId","sectionSelector","updateValue","fieldIsPinned","currentSection","pinField","getColor","remindersControl","reminder","getReminders","rrule","getRrule","accessibilityInput","accessibility","getLocation","checkLocationAccessibility","currentEventId","privateEventCheckbox","checked","importantEventCheckbox","important","meeting_notify","meetingNotify","NOTIFY","hide_guests","hideGuests","HIDE_GUESTS","allow_invite","ALLOW_INVITE","allowInvite","loadPlannerData","getDayLength","timezone","showHideGuestsOption","hideHideGuestsOption","isString","setFullDayMode","hasClass","mainBlock","additionalBlockWrap","additionalBlock","pinnedNamesWrap","additionalSwitch","toggleClass","getAttribute","fieldName","unPinField","showTimezone","wasChangedByUser","defaultReminders","getNewEntryReminders","updateSelector","focus","select","reminderValues","reminderWrap","reminderInputsWrap","Reminder","wrap","zIndex","values","create","attrs","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","getSectionGroupList","mode","NAME","selectCallback","sectionValue","setSectionId","saveDefaultSectionId","calendarType","delegate","Get","top","IsShown","customizeHtmlEditor","SetContent","toolbar","controls","spoiler","remove","pCont","locationWrap","locationInput","inputName","richLocationEnabled","rruleWrap","RepeatSelector","rruleType","getDate","changeType","userSelectorWrap","userTagSelector","EntityTagSelector","dialogOptions","context","preselectedItems","handleUserSelectorChanges","entities","getParticipantsSelectorEntityList","searchTabOptions","stubOptions","subtitle","icon","iconOpacity","arrow","renderTo","hideGuestsWrap","showLoader","selectedItems","getDialog","getSelectedItems","style","display","initHintNode","plannerOuterWrap","Planner","minWidth","offsetWidth","locked","handlePlannerSelectorChanges","handleExpandPlannerTimeline","checkLocationForm","resolve","entryLocation","LOCATION","dateFrom","dateTo","prevUserList","loadedAccessibilityData","entries","hideLoader","dateTime","update","focusSelector","colorWrap","ColorSelector","crmUfWrap","loader","getLoader","height","width","isDomNode","denyClose","isNull","getEntryInstance","registerEntrySlider","RoomsManager","getNewEntrySectionId","getPlaceholders","placeHolders","placeHoldersAdditional","field","newField","fieldHeight","offsetHeight","descriptionAdditionalWrap","firstChild","pinnedFieldsIndex","CheckAndReInit","saveSettings","updateAdditionalBlockState","i","fieldId","nodes","querySelectorAll","settings","userOptions","timeout","updateAdditionalBlockTimeout","clearTimeout","names","getElementsByClassName","className","innerHTML","noBorderClass","reload","selectorEntityList","usersCount","getCurrentCapacity","addCapacityAlert","removeCapacityAlert","plannerWrap","ctrlKey","metaKey","altKey","keyCode","getKeyCode","errorList","errorText","showFieldError","message","alert","excludes","fields","getTextLocation","isFullDay","toString","codes","valuesInput","attendeesWrap","command","isObjectLike","userIdList","ATTENDEES","eventOwner","CAL_TYPE","OWNER_ID","CREATED_BY","clearAccessibilityData","filter","inviteGuestLink","emailUsers","selectMode","projectRole","role","projectId","split","dynamicLoad"],"mappings":"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"}