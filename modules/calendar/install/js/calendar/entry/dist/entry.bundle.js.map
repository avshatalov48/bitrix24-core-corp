{"version":3,"file":"entry.bundle.js","sources":["../src/entrymanager.js","../src/entry.js"],"sourcesContent":["import {Entry} from \"calendar.entry\";\nimport {CalendarSectionManager} from \"calendar.calendarsection\";\nimport {Util} from \"calendar.util\";\nimport {Loc, Type, Event} from \"main.core\";\nimport {EventEmitter} from 'main.core.events';\nimport {ConfirmStatusDialog, ConfirmEditDialog, ReinviteUserDialog, ConfirmedEmailDialog, EmailLimitationDialog} from \"calendar.controls\";\nimport {CompactEventForm} from \"calendar.compacteventform\";\n\n\nexport class EntryManager {\n\tstatic newEntryName = '';\n\tstatic userIndex = {};\n\n\tstatic getNewEntry(options)\n\t{\n\t\tconst newEntryData = {};\n\t\tconst dateTime = EntryManager.getNewEntryTime(new Date());\n\t\tconst userSettings = Util.getUserSettings();\n\t\tconst userId = Util.getCurrentUserId();\n\n\t\tnewEntryData.ID = null;\n\t\tnewEntryData.NAME = EntryManager.getNewEntryName();\n\t\tnewEntryData.dateFrom = dateTime.from;\n\t\tnewEntryData.dateTo = dateTime.to;\n\t\tnewEntryData.SECT_ID = CalendarSectionManager.getNewEntrySectionId();\n\t\tnewEntryData.REMIND = [{type: 'min', count: 15}];\n\n\t\tnewEntryData.attendeesEntityList = [{entityId: 'user', id: userId}];\n\t\tnewEntryData.ATTENDEE_LIST = [{id: Util.getCurrentUserId(), status: \"H\"}];\n\n\t\tif (options.type === 'user' && userId !== options.ownerId)\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'user', id: options.ownerId});\n\t\t\tnewEntryData.ATTENDEE_LIST = [\n\t\t\t\t{id: options.ownerId, status: \"H\"},\n\t\t\t\t{id: Util.getCurrentUserId(), status: \"Y\"}\n\t\t\t];\n\t\t}\n\t\telse if (options.type === 'group')\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'project', id: options.ownerId});\n\t\t}\n\n\t\tnewEntryData.TZ_FROM = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\t\tnewEntryData.TZ_TO = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\n\t\treturn new Entry({data: newEntryData});\n\t}\n\n\tstatic getNewEntryTime(date, duration)\n\t{\n\t\tdate = Util.getUsableDateTime(date);\n\t\treturn {\n\t\t\tfrom : date,\n\t\t\tto : new Date(date.getTime() + (duration || 3600) * 1000)\n\t\t}\n\t}\n\n\tstatic getNewEntryName()\n\t{\n\t\treturn EntryManager.newEntryName || Loc.getMessage('CALENDAR_DEFAULT_ENTRY_NAME');\n\t}\n\n\tstatic setNewEntryName(newEntryName)\n\t{\n\t\tEntryManager.newEntryName = newEntryName;\n\t}\n\n\tstatic showEditEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_SAVE_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showNewEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_NEW_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic openEditSlider(options = {})\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t{\n\t\t\tnew bx.Calendar.SliderLoader(\n\t\t\t\toptions.entry ? 'EDIT' + options.entry.id : 'NEW',\n\t\t\t\t{\n\t\t\t\t\tentry: options.entry || null,\n\t\t\t\t\ttype: options.type,\n\t\t\t\t\townerId: options.ownerId,\n\t\t\t\t\tuserId: options.userId,\n\t\t\t\t\tformDataValue: options.formDataValue || null\n\t\t\t\t}\n\t\t\t).show();\n\t\t}\n\t}\n\n\tstatic openViewSlider(eventId = null, options = {})\n\t{\n\t\tif (!Type.isNull(eventId))\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t\t{\n\t\t\t\tnew bx.Calendar.SliderLoader(eventId, {\n\t\t\t\t\tentryDateFrom: options.from,\n\t\t\t\t\ttimezoneOffset: options.timezoneOffset\n\t\t\t\t}).show();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteEntry(entry)\n\t{\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\tif (Util.getBX().SidePanel.Instance)\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().SidePanel.Instance.close();\n\t\t\t\t}\n\t\t\t});\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:delete', (optins = {})=> {\n\t\t\t\tconst calendar = Util.getCalendarContext();\n\t\t\t\tif (calendar)\n\t\t\t\t{\n\t\t\t\t\tcalendar.reload();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().reload();\n\t\t\t\t}\n\t\t\t});\n\t\t\tentry.delete();\n\t\t}\n\t}\n\n\tstatic setMeetingStatus(entry, status, params = {})\n\t{\n\t\treturn new Promise(resolve => {\n\t\t\tif (!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.recursionMode = params.recursionMode || false;\n\n\t\t\tif (status === 'N' && !params.confirmed)\n\t\t\t{\n\t\t\t\tif (entry.isRecursive())\n\t\t\t\t{\n\t\t\t\t\tthis.showConfirmStatusDialog(entry);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\telse if (!confirm(Loc.getMessage('EC_DECLINE_MEETING_CONFIRM')))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.setMeetingStatus', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: entry.id,\n\t\t\t\t\tentryParentId: entry.parentId,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\tcurrentDateDrom: Util.formatDate(entry.from)\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.Event.EventEmitter.emit(\n\t\t\t\t\t\t'BX.Calendar.Entry:onChangeMeetingStatus',\n\t\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\t\t\tcurrentDateDrom: entry.from\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tif (entry instanceof Entry)\n\t\t\t\t\t{\n\t\t\t\t\t\tentry.setCurrentStatus(status);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tcurrentDateDrom: entry.from\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tstatic showConfirmStatusDialog(entry)\n\t{\n\t\tif (!this.confirmDeclineDialog)\n\t\t{\n\t\t\tthis.confirmDeclineDialog = new ConfirmStatusDialog();\n\t\t}\n\n\t\tthis.confirmDeclineDialog.show();\n\t\tthis.confirmDeclineDialog.unsubscribeAll('onDecline');\n\t\tthis.confirmDeclineDialog.subscribe('onDecline', function(event)\n\t\t{\n\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t{\n\t\t\t\tEntryManager.setMeetingStatus(\n\t\t\t\t\tentry,\n\t\t\t\t\t'N',\n\t\t\t\t\t{recursionMode: event.getData().recursionMode, confirmed: true}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showConfirmEditDialog(options)\n\t{\n\t\tif (!this.confirmEditDialog)\n\t\t{\n\t\t\tthis.confirmEditDialog = new ConfirmEditDialog();\n\t\t}\n\t\tthis.confirmEditDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmEditDialog.unsubscribeAll('onEdit');\n\t\t\tthis.confirmEditDialog.subscribe('onEdit', function(event)\n\t\t\t{\n\t\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReInviteUsersDialog(options)\n\t{\n\t\tif (!this.reinviteUsersDialog)\n\t\t{\n\t\t\tthis.reinviteUsersDialog = new ReinviteUserDialog();\n\t\t}\n\t\tthis.reinviteUsersDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.reinviteUsersDialog.unsubscribeAll('onSelect');\n\t\t\tthis.reinviteUsersDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showConfirmedEmailDialog(options = {})\n\t{\n\t\tif (!this.confirmedEmailDialog)\n\t\t{\n\t\t\tthis.confirmedEmailDialog = new ConfirmedEmailDialog();\n\t\t}\n\t\tthis.confirmedEmailDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmedEmailDialog.unsubscribeAll('onSelect');\n\t\t\tthis.confirmedEmailDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showEmailLimitationDialog(options = {})\n\t{\n\t\tconst confirmedEmailDialog = new EmailLimitationDialog();\n\t\tconfirmedEmailDialog.subscribe('onClose', ()=>{\n\t\t\tif (Type.isFunction(options.callback))\n\t\t\t{\n\t\t\t\toptions.callback();\n\t\t\t}\n\t\t});\n\t\tconfirmedEmailDialog.show();\n\t}\n\n\tstatic getCompactViewForm(create = true)\n\t{\n\t\tif (!EntryManager.compactEntryForm && create)\n\t\t{\n\t\t\tEntryManager.compactEntryForm = new CompactEventForm();\n\t\t}\n\n\t\treturn EntryManager.compactEntryForm;\n\t}\n\n\tstatic openCompactViewForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInViewMode(options);\n\t\t}\n\t}\n\n\tstatic openCompactEditForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInEditMode(options);\n\t\t}\n\t}\n\n\tstatic getEntryInstance(entry, userIndex, options = {})\n\t{\n\t\tlet entryInstance = null;\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tentryInstance = entry;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isObject(entry) && Type.isObject(entry.data))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry.data, userIndex: userIndex});\n\t\t\t}\n\t\t\telse if (Type.isObject(entry))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry, userIndex: userIndex});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentryInstance = EntryManager.getNewEntry(options);\n\t\t\t}\n\t\t}\n\n\t\treturn entryInstance;\n\t}\n\n\tstatic getUserIndex(options = {})\n\t{\n\t\treturn EntryManager.userIndex\n\t}\n\n\tstatic setUserIndex(userIndex)\n\t{\n\t\tEntryManager.userIndex = userIndex;\n\t}\n\n\n\tstatic openChatForEntry({entryId, entry})\n\t{\n\t\tif (window.BXIM && entry && entry.data.MEETING && parseInt(entry.data.MEETING.CHAT_ID))\n\t\t{\n\t\t\tBXIM.openMessenger('chat' + parseInt(entry.data.MEETING.CHAT_ID));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.createEventChat', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: entryId\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\t\tif (window.BXIM && response.data && response.data.chatId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tBXIM.openMessenger('chat' + response.data.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n}\n","import {ConfirmDeleteDialog} from \"calendar.controls\";\nimport {Util} from \"calendar.util\";\nimport {EntryManager} from \"./entrymanager\";\nimport {Type} from 'main.core';\n\nexport {EntryManager};\n\nexport class Entry\n{\n\tFULL_DAY_LENGTH = 86400;\n\tconstructor(options = {})\n\t{\n\t\tthis.prepareData(options.data);\n\t\tthis.parts = [];\n\n\t\tif (options.userIndex)\n\t\t{\n\t\t\tthis.setUserIndex(options.userIndex);\n\t\t}\n\t\t//this.uid = this.calendar.entryController.getUniqueId(data, this);\n\t}\n\n\tprepareData(data)\n\t{\n\t\tthis.data = data;\n\t\tthis.id = this.data.ID || 0;\n\n\t\tif (!this.data.DT_SKIP_TIME)\n\t\t{\n\t\t\tthis.data.DT_SKIP_TIME = this.data.SKIP_TIME ? 'Y' : 'N';\n\t\t}\n\n\t\tthis.fullDay = this.data.DT_SKIP_TIME === 'Y';\n\t\tthis.parentId = this.data.PARENT_ID || 0;\n\t\tthis.accessibility = this.data.ACCESSIBILITY || 'busy';\n\t\tthis.important = this.data.IMPORTANCE === 'high';\n\t\tthis.private = !!this.data.PRIVATE_EVENT;\n\t\tthis.setSectionId(this.data.SECT_ID);\n\t\tthis.name = this.data.NAME;\n\n\t\tthis.userTimezoneOffsetFrom = parseInt(this.data['~USER_OFFSET_FROM']) || 0;\n\t\tthis.userTimezoneOffsetTo = parseInt(this.data['~USER_OFFSET_TO']) || this.userTimezoneOffsetFrom;\n\n\t\tif (!this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.data.DURATION || 0;\n\t\t}\n\t\tif (this.fullDay && !this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.FULL_DAY_LENGTH;\n\t\t}\n\n\t\tif (!Type.isString(this.data.DATE_FROM) && !Type.isString(this.data.DATE_TO)\n\t\t\t&& Type.isDate(this.data.dateFrom) && Type.isDate(this.data.dateTo))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom;\n\t\t\tthis.to = this.data.dateTo;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\tthis.to = new Date(this.from.getTime() + (this.data.DT_LENGTH - (this.fullDay ? 1 : 0)) * 1000);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isTask())\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\tthis.to = BX.parseDate(this.data.DATE_TO) || this.from;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\t// if (this.data.DT_SKIP_TIME !== \"Y\")\n\t\t\t\t// {\n\t\t\t\t// \tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\t// }\n\t\t\t\tthis.to = new Date(this.from.getTime() + (this.data.DT_LENGTH - (this.fullDay ? 1 : 0)) * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (this.fullDay)\n\t\t{\n\t\t\tthis.from.setHours(0, 0, 0, 0);\n\t\t\tthis.to.setHours(0, 0, 0, 0);\n\t\t}\n\n\t\tif (!this.data.ATTENDEES_CODES && !this.isTask())\n\t\t{\n\t\t\tif (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.OWNER_ID];\n\t\t\t}\n\t\t\telse if (this.data.CREATED_BY)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.CREATED_BY];\n\t\t\t}\n\t\t}\n\n\t\tthis.startDayCode = this.from;\n\t\tthis.endDayCode = this.to;\n\n\t\tif (!Type.isArray(this.data.REMIND) && Type.isArray(this.data.remind))\n\t\t{\n\t\t\tthis.data.REMIND = [];\n\t\t\tthis.data.remind.forEach(function(value)\n\t\t\t{\n\t\t\t\tthis.data.REMIND.push({type: 'min', count: value});\n\t\t\t}, this);\n\t\t\tdelete this.data.remind;\n\t\t}\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\treturn this.data.ATTENDEES_CODES || [];\n\t}\n\n\tgetAttendeesEntityList()\n\t{\n\t\treturn this.data.attendeesEntityList || [];\n\t}\n\n\tgetAttendees()\n\t{\n\t\tif (!this.attendeeList && Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t{\n\t\t\tthis.attendeeList = [];\n\t\t\tconst userIndex = this.getUserIndex();\n\t\t\tthis.data['ATTENDEE_LIST'].forEach((user) => {\n\t\t\t\tif (userIndex[user.id])\n\t\t\t\t{\n\t\t\t\t\tlet attendee = BX.clone(userIndex[user.id]);\n\t\t\t\t\tattendee.STATUS = user.status;\n\t\t\t\t\tattendee.ENTRY_ID = user.entryId || false;\n\t\t\t\t\tthis.attendeeList.push(attendee);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn this.attendeeList || [];\n\t}\n\n\tsetUserIndex(userIndex)\n\t{\n\t\tthis.userIndex = userIndex;\n\t}\n\n\tgetUserIndex()\n\t{\n\t\treturn this.userIndex || EntryManager.getUserIndex();\n\t}\n\n\tcleanParts()\n\t{\n\t\tthis.parts = [];\n\t}\n\n\tstartPart(part)\n\t{\n\t\tpart.partIndex = this.parts.length;\n\t\tthis.parts.push(part);\n\t\treturn this.parts[part.partIndex];\n\t}\n\n\tregisterPartNode(part, params)\n\t{\n\t\tpart.params = params;\n\t}\n\n\tcheckPartIsRegistered(part)\n\t{\n\t\treturn Type.isPlainObject(part.params);\n\t}\n\n\tgetPart(partIndex)\n\t{\n\t\treturn this.parts[partIndex] || false;\n\t}\n\n\tgetWrap(partIndex)\n\t{\n\t\treturn this.parts[partIndex || 0].params.wrapNode;\n\t}\n\n\tgetSectionName()\n\t{\n\t\t//return this.calendar.sectionController.getSection(this.sectionId).name || '';\n\t}\n\n\tgetDescription(callback)\n\t{\n\t\tif (this.data.DESCRIPTION && this.data['~DESCRIPTION'] && Type.isFunction(callback))\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tcallback(this.data['~DESCRIPTION']);\n\t\t\t}.bind(this), 50);\n\t\t}\n\t}\n\n\tapplyViewRange(viewRange)\n\t{\n\t\tlet\n\t\t\tviewRangeStart = viewRange.start.getTime(),\n\t\t\tviewRangeEnd = viewRange.end.getTime(),\n\t\t\tfromTime = this.from.getTime(),\n\t\t\ttoTime = this.to.getTime();\n\n\t\tif (toTime < viewRangeStart || fromTime > viewRangeEnd)\n\t\t\treturn false;\n\n\t\tif (fromTime < viewRangeStart)\n\t\t{\n\t\t\tthis.displayFrom = viewRange.start;\n\t\t\tthis.startDayCode = this.displayFrom;\n\t\t}\n\n\t\tif (toTime > viewRangeEnd)\n\t\t{\n\t\t\tthis.displayTo = viewRange.end;\n\t\t\tthis.endDayCode = this.displayTo;\n\t\t}\n\t\treturn true;\n\t}\n\n\tisPersonal()\n\t{\n\t\t//return (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID == this.calendar.util.userId);\n\t}\n\n\tisMeeting()\n\t{\n\t\treturn !!this.data.IS_MEETING;\n\t}\n\n\tisResourcebooking()\n\t{\n\t\treturn this.data.EVENT_TYPE === '#resourcebooking#';\n\t}\n\n\tisTask()\n\t{\n\t\treturn this.data['~TYPE'] === 'tasks';\n\t}\n\n\tisFullDay()\n\t{\n\t\treturn this.fullDay;\n\t}\n\n\tisLongWithTime()\n\t{\n\t\treturn !this.fullDay && Util.getDayCode(this.from) !== Util.getDayCode(this.to);\n\t}\n\n\tisExpired()\n\t{\n\t\treturn this.to.getTime() < new Date().getTime();\n\t}\n\n\thasEmailAttendees()\n\t{\n\t\tif (this.emailAttendeesCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t{\n\t\t\t\tlet user = this.data['ATTENDEE_LIST'][i];\n\t\t\t\tif ((user.status === 'Y' || user.status === 'Q')\n\t\t\t\t\t&& userIndex[user.id]\n\t\t\t\t\t&& userIndex[user.id].EMAIL_USER\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.emailAttendeesCache = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.emailAttendeesCache;\n\t}\n\n\townerIsEmailUser()\n\t{\n\t\tif (this.ownerIsEmailUserCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tthis.ownerIsEmailUserCache = userIndex[parseInt(this.data.MEETING_HOST)]\n\t\t\t\t&& userIndex[parseInt(this.data.MEETING_HOST)].EMAIL_USER;\n\t\t}\n\t\treturn this.ownerIsEmailUserCache;\n\t}\n\n\tisSelected()\n\t{\n\t\treturn !!this.selected;\n\t}\n\n\tisCrm()\n\t{\n\t\treturn !!this.data.UF_CRM_CAL_EVENT;\n\t}\n\n\tisFirstReccurentEntry()\n\t{\n\t\treturn (this.data.DATE_FROM_TS_UTC === Math.floor(BX.parseDate(this.data['~DATE_FROM']).getTime() / 1000) * 1000\n\t\t\t||\n\t\t\tBX.parseDate(this.data['DATE_FROM']).getTime() === BX.parseDate(this.data['~DATE_FROM']).getTime()\n\t\t) && !this.data.RECURRENCE_ID;\n\t}\n\n\tisRecursive()\n\t{\n\t\treturn !!this.data.RRULE;\n\t}\n\n\tgetMeetingHost()\n\t{\n\t\treturn parseInt(this.data.MEETING_HOST);\n\t}\n\n\tgetMeetingNotify()\n\t{\n\t\treturn this.data.MEETING.NOTIFY;\n\t}\n\n\tgetRrule()\n\t{\n\t\treturn this.data.RRULE;\n\t}\n\n\tgetRRuleDescription()\n\t{\n\t\treturn this.data['~RRULE_DESCRIPTION'];\n\t}\n\n\thasRecurrenceId()\n\t{\n\t\treturn this.data.RECURRENCE_ID;\n\t}\n\n\twasEverRecursive()\n\t{\n\t\treturn this.data.RRULE || this.data.RECURRENCE_ID;\n\t}\n\n\tdeselect()\n\t{\n\t\tthis.selected = false;\n\t}\n\n\tselect()\n\t{\n\t\tthis.selected = true;\n\t}\n\n\tdeleteParts()\n\t{\n\t\tif (Type.isArray(this.parts))\n\t\t{\n\t\t\tthis.parts.forEach(function(part){\n\t\t\t\tif (part.params)\n\t\t\t\t{\n\t\t\t\t\tif (part.params.wrapNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tpart.params.wrapNode.style.opacity = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.parts.forEach(function(part){\n\t\t\t\t\tif (part.params)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (part.params.wrapNode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.remove(part.params.wrapNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tgetUniqueId()\n\t{\n\t\tlet sid = this.data.PARENT_ID || this.data.PARENT_ID;\n\t\tif (this.isRecursive())\n\t\t\tsid += '|' + this.data.DT_FROM_TS;\n\n\t\tif (this.data['~TYPE'] === 'tasks')\n\t\t\tsid += '|' + 'task';\n\n\t\treturn sid;\n\t}\n\n\tgetCurrentStatus()\n\t{\n\t\tlet\n\t\t\tuserId = Util.getCurrentUserId(),\n\t\t\tstatus = false,\n\t\t\ti, user;\n\n\t\tif (this.isMeeting())\n\t\t{\n\t\t\tif (userId === parseInt(this.data.CREATED_BY))\n\t\t\t{\n\t\t\t\tstatus = this.data.MEETING_STATUS || 'Q';\n\t\t\t}\n\t\t\telse if (userId === parseInt(this.data.MEETING_HOST))\n\t\t\t{\n\t\t\t\tstatus = 'H';\n\t\t\t\t//status = this.data.MEETING_STATUS || 'H';\n\t\t\t}\n\t\t\telse if (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tuser = this.data['ATTENDEE_LIST'][i];\n\t\t\t\t\tif (parseInt(user.id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus = user.status;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Util.getMeetingStatusList().includes(status) ? status : false;\n\t}\n\n\tsetCurrentStatus(status)\n\t{\n\t\tif (this.isMeeting() && Util.getMeetingStatusList().includes(status))\n\t\t{\n\t\t\tthis.data.MEETING_STATUS = status;\n\n\t\t\tconst userId = Util.getCurrentUserId();\n\t\t\tif (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(this.data['ATTENDEE_LIST'][i].id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.data['ATTENDEE_LIST'][i].status = status;\n\t\t\t\t\t\tthis.attendeeList = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetReminders()\n\t{\n\t\tlet res = [];\n\t\tif (this.data && this.data.REMIND)\n\t\t{\n\t\t\tthis.data.REMIND.forEach(function (remind)\n\t\t\t{\n\t\t\t\tswitch(remind.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'min':\n\t\t\t\t\t\tres.push(remind.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hour':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60 * 24);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'daybefore':\n\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (!Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tremind.value = Util.parseDate(remind.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetLengthInDays()\n\t{\n\t\tlet\n\t\t\tfrom = new Date(this.from.getFullYear(), this.from.getMonth(), this.from.getDate(), 0, 0, 0),\n\t\t\tto = new Date(this.to.getFullYear(), this.to.getMonth(), this.to.getDate(), 0, 0, 0);\n\n\t\treturn Math.round((to.getTime() - from.getTime()) / Util.getDayLength()) + 1;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.name || this.defaultNewName;\n\t}\n\n\tgetColor()\n\t{\n\t\treturn this.data.COLOR;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.data.CAL_TYPE;\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn this.data.OWNER_ID;\n\t}\n\n\tdelete(params)\n\t{\n\t\tparams = Type.isPlainObject(params) ? params : {};\n\t\tlet recursionMode = params.recursionMode || false;\n\n\t\tif (this.wasEverRecursive() && !params.confirmed)\n\t\t{\n\t\t\treturn this.showConfirmDeleteDialog({entry: this});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!params.confirmed\n\t\t\t\t&& !confirm(BX.message('EC_DELETE_EVENT_CONFIRM'))\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Broadcast event\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tthis.deleteParts();\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.deleteCalendarEntry', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\trecursionMode: params.recursionMode || false\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tdeleteThis()\n\t{\n\t\tlet recursionMode = 'this';\n\t\tif (this.isRecursive())\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.excludeRecursionDate', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\texcludeDate: this.data.DATE_FROM\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t// Success\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t\telse if (this.hasRecurrenceId())\n\t\t{\n\t\t\tthis.delete({confirmed: true, recursionMode: 'this'});\n\t\t}\n\t}\n\n\tdeleteNext()\n\t{\n\t\tlet recursionMode = 'next';\n\t\tif (this.isRecursive() && this.isFirstReccurentEntry())\n\t\t{\n\t\t\tthis.deleteAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.changeRecurciveEntryUntil', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\tuntilDate: Util.formatDate(this.from.getTime() - Util.getDayLength())\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t// Success\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tdeleteAll()\n\t{\n\t\treturn this.delete({confirmed: true, recursionMode: 'all'});\n\t}\n\n\tshowConfirmDeleteDialog(params)\n\t{\n\t\tif (!this.confirmDeleteDialog)\n\t\t{\n\t\t\tthis.confirmDeleteDialog = new ConfirmDeleteDialog({entry: params.entry});\n\t\t}\n\t\tthis.confirmDeleteDialog.show();\n\t}\n\n\tsave()\n\t{\n\t}\n\n\tgetLocation()\n\t{\n\t\treturn this.data.LOCATION;\n\t}\n\n\tsetTimezone(timezoneFrom, timezoneTo = null)\n\t{\n\t\tif(Type.isString(timezoneFrom))\n\t\t{\n\t\t\tthis.data.TZ_FROM = timezoneFrom;\n\t\t\tif (Type.isNull(timezoneTo))\n\t\t\t{\n\t\t\t\tthis.data.TZ_TO = timezoneFrom;\n\t\t\t}\n\t\t}\n\t\tif(Type.isString(timezoneTo))\n\t\t{\n\t\t\tthis.data.TZ_TO = timezoneTo;\n\t\t}\n\t}\n\n\tgetTimezoneFrom()\n\t{\n\t\treturn this.data.TZ_FROM || '';\n\t}\n\n\tgetTimezoneTo()\n\t{\n\t\treturn this.data.TZ_TO || '';\n\t}\n\n\tsetSectionId(value)\n\t{\n\t\tthis.data.SECT_ID = this.sectionId = this.isTask() ? 'tasks' : parseInt(value);\n\t}\n\n\tsetDateTimeValue({from, to})\n\t{\n\t\tif (Type.isDate(from) && Type.isDate(to))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom = from;\n\t\t\tthis.to = this.data.dateTo = to;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDateTime(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDateTime(this.to.getTime());\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["EntryManager","options","newEntryData","dateTime","getNewEntryTime","Date","userSettings","Util","getUserSettings","userId","getCurrentUserId","ID","NAME","getNewEntryName","dateFrom","from","dateTo","to","SECT_ID","CalendarSectionManager","getNewEntrySectionId","REMIND","type","count","attendeesEntityList","entityId","id","ATTENDEE_LIST","status","ownerId","push","TZ_FROM","timezoneName","timezoneDefaultName","TZ_TO","Entry","data","date","duration","getUsableDateTime","getTime","newEntryName","Loc","getMessage","entryId","showNotification","title","events","click","event","balloon","action","openViewSlider","close","bx","getBX","Calendar","SliderLoader","entry","formDataValue","show","eventId","Type","isNull","entryDateFrom","timezoneOffset","EventEmitter","subscribe","SidePanel","Instance","calendar","getCalendarContext","reload","delete","params","Promise","resolve","isPlainObject","recursionMode","confirmed","isRecursive","showConfirmStatusDialog","confirm","BX","ajax","runAction","entryParentId","parentId","currentDateDrom","formatDate","then","response","Event","emit","BaseEvent","setCurrentStatus","confirmDeclineDialog","ConfirmStatusDialog","unsubscribeAll","setMeetingStatus","getData","confirmEditDialog","ConfirmEditDialog","isFunction","callback","reinviteUsersDialog","ReinviteUserDialog","confirmedEmailDialog","ConfirmedEmailDialog","EmailLimitationDialog","create","compactEntryForm","CompactEventForm","compactForm","getCompactViewForm","isShown","closeCallback","showInViewMode","showInEditMode","userIndex","entryInstance","isObject","getNewEntry","window","BXIM","MEETING","parseInt","CHAT_ID","openMessenger","chatId","prepareData","parts","setUserIndex","DT_SKIP_TIME","SKIP_TIME","fullDay","PARENT_ID","accessibility","ACCESSIBILITY","important","IMPORTANCE","private","PRIVATE_EVENT","setSectionId","name","userTimezoneOffsetFrom","userTimezoneOffsetTo","DT_LENGTH","DURATION","FULL_DAY_LENGTH","isString","DATE_FROM","DATE_TO","isDate","Math","round","isTask","parseDate","setHours","ATTENDEES_CODES","CAL_TYPE","OWNER_ID","CREATED_BY","startDayCode","endDayCode","isArray","remind","forEach","value","attendeeList","getUserIndex","user","attendee","clone","STATUS","ENTRY_ID","part","partIndex","length","wrapNode","DESCRIPTION","setTimeout","bind","viewRange","viewRangeStart","start","viewRangeEnd","end","fromTime","toTime","displayFrom","displayTo","IS_MEETING","EVENT_TYPE","getDayCode","emailAttendeesCache","undefined","i","EMAIL_USER","ownerIsEmailUserCache","MEETING_HOST","selected","UF_CRM_CAL_EVENT","DATE_FROM_TS_UTC","floor","RECURRENCE_ID","RRULE","NOTIFY","style","opacity","remove","sid","DT_FROM_TS","isMeeting","MEETING_STATUS","getMeetingStatusList","includes","res","getFullYear","getMonth","getDate","getDayLength","defaultNewName","COLOR","wasEverRecursive","showConfirmDeleteDialog","message","onCustomEvent","deleteParts","excludeDate","hasRecurrenceId","isFirstReccurentEntry","deleteAll","untilDate","confirmDeleteDialog","ConfirmDeleteDialog","LOCATION","timezoneFrom","timezoneTo","sectionId","formatDateTime"],"mappings":"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"}