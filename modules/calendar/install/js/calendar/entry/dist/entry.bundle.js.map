{"version":3,"file":"entry.bundle.js","sources":["../src/entrymanager.js","../src/entry.js"],"sourcesContent":["import { Entry } from 'calendar.entry';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { Util } from 'calendar.util';\nimport { Event, Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { CompactEventForm } from 'calendar.compacteventform';\nimport 'ui.notification';\nimport { EventViewForm } from 'calendar.eventviewform';\nimport { RoomsManager } from 'calendar.roomsmanager';\n\nexport class EntryManager {\n\tstatic newEntryName = '';\n\tstatic userIndex = {};\n\tstatic delayedActionList = [];\n\tstatic DELETE_DELAY_TIMEOUT = 4000;\n\tstatic slidersMap = new WeakMap();\n\n\tstatic getNewEntry(options)\n\t{\n\t\tconst newEntryData = {};\n\t\tconst dateTime = EntryManager.getNewEntryTime(new Date());\n\t\tconst userSettings = Util.getUserSettings();\n\t\tconst userId = Util.getCurrentUserId();\n\n\t\tnewEntryData.ID = null;\n\t\tnewEntryData.NAME = EntryManager.getNewEntryName();\n\t\tnewEntryData.dateFrom = dateTime.from;\n\t\tnewEntryData.dateTo = dateTime.to;\n\t\tif(options.type === 'location')\n\t\t{\n\t\t\tnewEntryData.SECT_ID = RoomsManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewEntryData.SECT_ID = SectionManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\tnewEntryData.REMIND = EntryManager.getNewEntryReminders();\n\n\t\tnewEntryData.attendeesEntityList = [{entityId: 'user', id: userId}];\n\t\tnewEntryData.ATTENDEE_LIST = [{id: Util.getCurrentUserId(), status: \"H\"}];\n\n\t\tif (options.type === 'user' && userId !== options.ownerId)\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'user', id: options.ownerId});\n\t\t\tnewEntryData.ATTENDEE_LIST = [\n\t\t\t\t{id: options.ownerId, status: \"H\"},\n\t\t\t\t{id: Util.getCurrentUserId(), status: \"Y\"}\n\t\t\t];\n\t\t}\n\t\telse if (options.type === 'group')\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'project', id: options.ownerId});\n\t\t}\n\n\t\tnewEntryData.TZ_FROM = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\t\tnewEntryData.TZ_TO = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\n\t\treturn new Entry({data: newEntryData});\n\t}\n\n\tstatic getNewEntryTime(date, duration)\n\t{\n\t\tdate = Util.getUsableDateTime(date);\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst displayedViewRange = calendarContext.getDisplayedViewRange();\n\t\t\tif (Type.isDate(displayedViewRange?.start))\n\t\t\t{\n\t\t\t\tconst dateTime = date.getTime();\n\t\t\t\tif (\n\t\t\t\t\tdateTime < displayedViewRange.start.getTime()\n\t\t\t\t\t|| dateTime > displayedViewRange.end.getTime()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tdate = Util.getUsableDateTime(displayedViewRange.start);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tfrom : date,\n\t\t\tto : new Date(date.getTime() + (duration || 3600) * 1000)\n\t\t}\n\t}\n\n\tstatic getNewEntryName()\n\t{\n\t\treturn EntryManager.newEntryName || Loc.getMessage('CALENDAR_DEFAULT_ENTRY_NAME');\n\t}\n\n\tstatic setNewEntryName(newEntryName)\n\t{\n\t\tEntryManager.newEntryName = newEntryName;\n\t}\n\n\tstatic showEditEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_SAVE_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showNewEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_NEW_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event, balloon, action) => {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showDeleteEntryNotification(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tid: 'calendar' + entry.getUniqueId(),\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_DELETE_EVENT_NOTIFICATION'),\n\t\t\t\tactions: [{\n\t\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\tentry.cancelDelete();\n\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic closeDeleteNotificationBalloon(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tconst balloon = BX.UI.Notification.Center.getBalloonById('calendar' + entry.getUniqueId());\n\t\t\tif (balloon)\n\t\t\t{\n\t\t\t\tballoon.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic openEditSlider(options = {})\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t{\n\t\t\tnew bx.Calendar.SliderLoader(\n\t\t\t\toptions.entry ? 'EDIT' + options.entry.id : 'NEW',\n\t\t\t\t{\n\t\t\t\t\tentry: options.entry || null,\n\t\t\t\t\ttype: options.type,\n\t\t\t\t\tisLocationCalendar: options.isLocationCalendar || false,\n\t\t\t\t\troomsManager: options.roomsManager || null,\n\t\t\t\t\tlocationAccess: options.locationAccess || false,\n\t\t\t\t\tdayOfWeekMonthFormat: options.dayOfWeekMonthFormat || false,\n\t\t\t\t\tlocationCapacity: options.locationCapacity || 0,\n\t\t\t\t\townerId: options.ownerId,\n\t\t\t\t\tuserId: options.userId,\n\t\t\t\t\tformDataValue: options.formDataValue || null\n\t\t\t\t}\n\t\t\t).show();\n\t\t}\n\t}\n\n\tstatic openViewSlider(eventId = null, options = {})\n\t{\n\t\tif (!Type.isNull(eventId))\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t\t{\n\t\t\t\tnew bx.Calendar.SliderLoader(eventId, {\n\t\t\t\t\tentryDateFrom: options.from,\n\t\t\t\t\ttimezoneOffset: options.timezoneOffset,\n\t\t\t\t\tdayOfWeekMonthFormat: options.dayOfWeekMonthFormat || false,\n\t\t\t\t\tcalendarContext: options.calendarContext || null,\n\t\t\t\t}).show();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteEntry(entry, calendarContext = null)\n\t{\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\t\tconst beforeDeleteHandler = () => {\n\t\t\t\tif (slider && slider.options.type === 'calendar:slider')\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().SidePanel.Instance.close();\n\t\t\t\t}\n\t\t\t};\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\n\t\t\tconst deleteHandler = () => {\n\t\t\t\tconst calendar = Util.getCalendarContext();\n\t\t\t\tif (!calendar && !calendarContext)\n\t\t\t\t{\n\t\t\t\t\treturn Util.getBX().reload();\n\t\t\t\t}\n\n\t\t\t\tif (calendar)\n\t\t\t\t{\n\t\t\t\t\tcalendar.reload();\n\t\t\t\t}\n\t\t\t\telse if (calendarContext)\n\t\t\t\t{\n\t\t\t\t\tcalendarContext.reload();\n\t\t\t\t}\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:delete', deleteHandler);\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:delete', deleteHandler);\n\n\t\t\tentry.delete();\n\t\t}\n\t}\n\n\tstatic setMeetingStatus(entry, status, params = {})\n\t{\n\t\treturn new Promise(resolve => {\n\t\t\tif (!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.recursionMode = params.recursionMode || false;\n\n\t\t\tif (status === 'N' && !params.confirmed)\n\t\t\t{\n\t\t\t\tif (entry.isRecursive())\n\t\t\t\t{\n\t\t\t\t\tthis.showConfirmStatusDialog(entry, resolve);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.setMeetingStatus', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: entry.id,\n\t\t\t\t\tentryParentId: entry.parentId,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\tcurrentDateFrom: Util.formatDate(entry.from)\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.Event.EventEmitter.emit(\n\t\t\t\t\t\t'BX.Calendar.Entry:onChangeMeetingStatus',\n\t\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\t\t\tcurrentDateFrom: entry.from,\n\t\t\t\t\t\t\t\tcounters: response.data.counters\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tif (entry instanceof Entry)\n\t\t\t\t\t{\n\t\t\t\t\t\tentry.setCurrentStatus(status);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tcurrentDateFrom: entry.from\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tstatic showConfirmStatusDialog(entry, resolvePromiseCallback = null)\n\t{\n\t\tif (!this.confirmDeclineDialog)\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tthis.confirmDeclineDialog = new bx.Calendar.Controls.ConfirmStatusDialog();\n\t\t}\n\n\t\tthis.confirmDeclineDialog.show();\n\t\tthis.confirmDeclineDialog.unsubscribeAll('onDecline');\n\t\tthis.confirmDeclineDialog.subscribe('onDecline', function(event)\n\t\t{\n\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t{\n\t\t\t\tEntryManager.setMeetingStatus(\n\t\t\t\t\tentry,\n\t\t\t\t\t'N',\n\t\t\t\t\t{recursionMode: event.getData().recursionMode, confirmed: true}\n\t\t\t\t).then(() => {\n\t\t\t\t\tif (Type.isFunction(resolvePromiseCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tresolvePromiseCallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showConfirmEditDialog(options)\n\t{\n\t\tif (!this.confirmEditDialog)\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tthis.confirmEditDialog = new bx.Calendar.Controls.ConfirmEditDialog();\n\t\t}\n\t\tthis.confirmEditDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmEditDialog.unsubscribeAll('onEdit');\n\t\t\tthis.confirmEditDialog.subscribe('onEdit', (event) => {\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReInviteUsersDialog(options)\n\t{\n\t\tif (!this.reinviteUsersDialog)\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tthis.reinviteUsersDialog = new bx.Calendar.Controls.ReinviteUserDialog();\n\t\t}\n\t\tthis.reinviteUsersDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.reinviteUsersDialog.unsubscribeAll('onSelect');\n\t\t\tthis.reinviteUsersDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showConfirmedEmailDialog(options = {})\n\t{\n\t\tif (!this.confirmedEmailDialog)\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tthis.confirmedEmailDialog = new bx.Calendar.Controls.ConfirmedEmailDialog();\n\t\t}\n\t\tthis.confirmedEmailDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmedEmailDialog.unsubscribeAll('onSelect');\n\t\t\tthis.confirmedEmailDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showEmailLimitationDialog(options = {})\n\t{\n\t\tif (!this.limitationEmailDialog)\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tthis.limitationEmailDialog = new bx.Calendar.Controls.EmailLimitationDialog();\n\t\t}\n\t\tthis.limitationEmailDialog.subscribe('onClose', ()=>{\n\t\t\tif (Type.isFunction(options.callback))\n\t\t\t{\n\t\t\t\toptions.callback();\n\t\t\t}\n\t\t});\n\t\tthis.limitationEmailDialog.show();\n\t}\n\n\tstatic getCompactViewForm(create = true)\n\t{\n\t\tif (!EntryManager.compactEntryForm && create)\n\t\t{\n\t\t\tEntryManager.compactEntryForm = new CompactEventForm();\n\t\t}\n\n\t\treturn EntryManager.compactEntryForm;\n\t}\n\n\tstatic openCompactViewForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInViewMode(options);\n\t\t}\n\t}\n\n\tstatic openCompactEditForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInEditMode(options);\n\t\t}\n\t}\n\n\tstatic getEntryInstance(entry, userIndex, options = {})\n\t{\n\t\tlet entryInstance = null;\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tentryInstance = entry;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isObject(entry) && Type.isObject(entry.data))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry.data, userIndex: userIndex});\n\t\t\t}\n\t\t\telse if (Type.isObject(entry))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry, userIndex: userIndex});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentryInstance = EntryManager.getNewEntry(options);\n\t\t\t}\n\t\t}\n\n\t\treturn entryInstance;\n\t}\n\n\tstatic getUserIndex(options = {})\n\t{\n\t\treturn EntryManager.userIndex\n\t}\n\n\tstatic setUserIndex(userIndex)\n\t{\n\t\tEntryManager.userIndex = userIndex;\n\t}\n\n\thandlePullChanges(params)\n\t{\n\t\tif (!BX.Calendar.Util.checkRequestId(params.requestUid))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (compactForm\n\t\t\t&& compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.handlePull(params);\n\t\t}\n\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tconst data = EntryManager.slidersMap.get(slider);\n\t\t\tif (\n\t\t\t\tdata\n\t\t\t\t&& data.entry\n\t\t\t\t&& data.entry.parentId === parseInt(params?.fields?.PARENT_ID)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (params.command === 'delete_event'\n\t\t\t\t\t&& data.entry.getType() === params?.fields?.CAL_TYPE\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tslider.close();\n\t\t\t\t}\n\t\t\t\telse if (data.control instanceof EventViewForm)\n\t\t\t\t{\n\t\t\t\t\tdata.control.reloadSliderDebounce(params);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (params.command === 'set_meeting_status')\n\t\t{\n\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t}\n\t\telse if (params.command === 'delete_event' || params.command === 'edit_event')\n\t\t{\n\t\t\tif (\n\t\t\t\t!params.fields\n\t\t\t\t||\n\t\t\t\t(params?.fields?.IS_MEETING && params?.fields?.MEETING_STATUS === 'Q')\n\t\t\t)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t\t}\n\t\t\t\n\t\t\tif (params?.fields?.CAL_TYPE === 'location' && top.BX.Calendar?.Controls?.Location)\n\t\t\t{\n\t\t\t\ttop.BX.Calendar.Controls.Location.handlePull(params);\n\t\t\t}\n\t\t}\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tconst entrySectionId = parseInt(params?.fields?.SECTION_ID);\n\t\tlet sectionDisplayed = Type.isArray(params.sections)\n\t\t\t&& params.sections.find(section => {\n\t\t\t\treturn section.id === entrySectionId && section.isShown();\n\t\t\t});\n\n\t\tlet loadedEntry = params?.fields\n\t\t\t? EntryManager.getEntryInstance(\n\t\t\t\tcalendarContext.getView().getEntryById(EntryManager.getEntryUniqueId(params.fields)),\n\t\t\t)\n\t\t\t: null;\n\n\t\tif ((sectionDisplayed || loadedEntry) && calendarContext)\n\t\t{\n\t\t\tcalendarContext.reloadDebounce();\n\t\t}\n\t}\n\n\tstatic registerDeleteTimeout(params)\n\t{\n\t\tEntryManager.delayedActionList.push(params);\n\t}\n\n\tstatic unregisterDeleteTimeout({action, data})\n\t{\n\t\tEntryManager.delayedActionList = EntryManager.delayedActionList.filter((item) => {\n\t\t\treturn item.action !== action\n\t\t\t\t|| item.data.entryId !== data.entryId\n\t\t\t\t|| item.data.recursionMode !== data.recursionMode\n\t\t\t\t|| item.data.excludeDate !== data.excludeDate;\n\t\t});\n\t}\n\n\tstatic doDelayedActions()\n\t{\n\t\tlet requestList = [];\n\t\treturn new Promise(resolve => {\n\t\t\tif(!EntryManager.delayedActionList.length)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tEntryManager.delayedActionList.forEach(({action, data, params}) => {\n\n\t\t\t\tconst requestUid = parseInt(data.requestUid);\n\t\t\t\trequestList.push(data.requestUid);\n\n\t\t\t\tif (params.entry)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.closeDeleteNotificationBalloon(params.entry);\n\t\t\t\t}\n\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t`calendar.api.calendarajax.${action}`,\n\t\t\t\t\t{data: data}\n\t\t\t\t).then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tType.isFunction(params.callback)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparams.callback();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tEntryManager.unregisterDeleteTimeout({action, data, params});\n\t\t\t});\n\n\n\n\n\t\t});\n\n\t}\n\n\tstatic getEntryUniqueId(entryData, entry)\n\t{\n\t\tlet sid = entryData.PARENT_ID || entryData.ID;\n\t\tif (entryData.RRULE)\n\t\t{\n\t\t\tsid += '|' + (entry ? Util.formatDate(entry.from) : Util.formatDate(BX.parseDate(entryData.DATE_FROM)));\n\t\t}\n\n\t\tif (entryData['~TYPE'] === 'tasks')\n\t\t{\n\t\t\tsid += '|' + 'task';\n\t\t}\n\t\treturn sid;\n\t}\n\n\tstatic registerEntrySlider(entry, control)\n\t{\n\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\tif (slider)\n\t\t{\n\t\t\tEntryManager.slidersMap.set(slider, {entry, control});\n\t\t}\n\t}\n\n\tstatic getNewEntryReminders(type = 'withTime')\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders)\n\t\t\t&& Type.isArray(userSettings.defaultReminders[type])\n\t\t\t&& userSettings.defaultReminders[type].length)\n\t\t{\n\t\t\treturn userSettings.defaultReminders[type];\n\t\t}\n\n\t\treturn type === 'withTime'\n\t\t\t? [{type: 'min', count: 15}]\n\t\t\t: [{type: 'daybefore', before: 0, time: 480}];\n\t}\n\n\tstatic setNewEntryReminders(type = 'withTime', reminders)\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders))\n\t\t{\n\t\t\tuserSettings.defaultReminders[type] = reminders;\n\t\t}\n\t\tUtil.setUserSettings(userSettings);\n\t}\n}\n","import {ConfirmDeleteDialog} from \"calendar.controls\";\nimport {Util} from 'calendar.util';\nimport {EntryManager} from \"./entrymanager\";\nimport { Type, Dom } from 'main.core';\n\nexport {EntryManager};\n\nexport class Entry\n{\n\tFULL_DAY_LENGTH = 86400;\n\tconstructor(options = {})\n\t{\n\t\tthis.prepareData(options.data);\n\t\tthis.parts = [];\n\n\t\tif (options.userIndex)\n\t\t{\n\t\t\tthis.setUserIndex(options.userIndex);\n\t\t}\n\n\t\tthis.delayTimeoutMap = new Map();\n\t}\n\n\tprepareData(data)\n\t{\n\t\tthis.data = data;\n\t\t// this.id = this.data.ID || 0;\n\t\tthis.id = parseInt(this.data.ID || 0);\n\t\tthis.parentId = parseInt(this.data.PARENT_ID || 0);\n\n\t\tif (!this.data.DT_SKIP_TIME)\n\t\t{\n\t\t\tthis.data.DT_SKIP_TIME = this.data.SKIP_TIME ? 'Y' : 'N';\n\t\t}\n\n\t\tthis.fullDay = this.data.DT_SKIP_TIME === 'Y';\n\t\tthis.accessibility = this.data.ACCESSIBILITY || 'busy';\n\t\tthis.important = this.data.IMPORTANCE === 'high';\n\t\tthis.private = !!this.data.PRIVATE_EVENT;\n\t\tthis.setSectionId(this.data.SECT_ID);\n\t\tthis.name = this.data.NAME;\n\n\t\tthis.userTimezoneOffsetFrom = parseInt(this.data['~USER_OFFSET_FROM']) || 0;\n\t\tthis.userTimezoneOffsetTo = parseInt(this.data['~USER_OFFSET_TO']) || this.userTimezoneOffsetFrom;\n\n\t\tif (!this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.data.DURATION || 0;\n\t\t}\n\t\tif (this.fullDay && !this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.FULL_DAY_LENGTH;\n\t\t}\n\n\t\tif (!Type.isString(this.data.DATE_FROM) && !Type.isString(this.data.DATE_TO)\n\t\t\t&& Type.isDate(this.data.dateFrom) && Type.isDate(this.data.dateTo))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom;\n\t\t\tthis.to = this.data.dateTo;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\tthis.to = new Date(this.from.getTime() + (this.data.DT_LENGTH - (this.fullDay ? 1 : 0)) * 1000);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isTask())\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\tthis.to = BX.parseDate(this.data.DATE_TO) || this.from;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\t// if (this.data.DT_SKIP_TIME !== \"Y\")\n\t\t\t\t// {\n\t\t\t\t// \tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\t// }\n\t\t\t\tthis.to = new Date(this.from.getTime() + (this.data.DT_LENGTH - (this.fullDay ? 1 : 0)) * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (this.fullDay)\n\t\t{\n\t\t\tthis.from.setHours(0, 0, 0, 0);\n\t\t\tthis.to.setHours(0, 0, 0, 0);\n\t\t}\n\n\t\tif (!this.data.ATTENDEES_CODES && !this.isTask())\n\t\t{\n\t\t\tif (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.OWNER_ID];\n\t\t\t}\n\t\t\telse if (this.data.CREATED_BY)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.CREATED_BY];\n\t\t\t}\n\t\t}\n\n\t\tthis.startDayCode = this.from;\n\t\tthis.endDayCode = this.to;\n\n\t\tif (!Type.isArray(this.data.REMIND) && Type.isArray(this.data.remind))\n\t\t{\n\t\t\tthis.data.REMIND = [];\n\t\t\tthis.data.remind.forEach(function(value)\n\t\t\t{\n\t\t\t\tthis.data.REMIND.push({type: 'min', count: value});\n\t\t\t}, this);\n\t\t\tdelete this.data.remind;\n\t\t}\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\treturn this.data.ATTENDEES_CODES || [];\n\t}\n\n\tgetAttendeesEntityList()\n\t{\n\t\treturn this.data.attendeesEntityList || [];\n\t}\n\n\tgetAttendees()\n\t{\n\t\tif (!this.attendeeList)\n\t\t{\n\t\t\tthis.attendeeList = [];\n\t\t\tif (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tconst userIndex = this.getUserIndex();\n\t\t\t\tthis.data['ATTENDEE_LIST'].forEach((user) => {\n\t\t\t\t\tif (userIndex[user.id])\n\t\t\t\t\t{\n\t\t\t\t\t\tlet attendee = BX.clone(userIndex[user.id]);\n\t\t\t\t\t\tattendee.STATUS = user.status;\n\t\t\t\t\t\tattendee.ENTRY_ID = user.entryId || false;\n\t\t\t\t\t\tthis.attendeeList.push(attendee);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.attendeeList;\n\t}\n\n\tsetUserIndex(userIndex)\n\t{\n\t\tthis.userIndex = userIndex;\n\t}\n\n\tgetUserIndex()\n\t{\n\t\treturn this.userIndex || EntryManager.getUserIndex();\n\t}\n\n\tcleanParts()\n\t{\n\t\tthis.parts = [];\n\t}\n\n\tstartPart(part)\n\t{\n\t\tpart.partIndex = this.parts.length;\n\t\tthis.parts.push(part);\n\t\treturn this.parts[part.partIndex];\n\t}\n\n\tregisterPartNode(part, params)\n\t{\n\t\tpart.params = params;\n\t}\n\n\tcheckPartIsRegistered(part)\n\t{\n\t\treturn Type.isPlainObject(part.params);\n\t}\n\n\tgetPart(partIndex)\n\t{\n\t\treturn this.parts[partIndex] || false;\n\t}\n\n\tgetWrap(partIndex)\n\t{\n\t\treturn this.parts[partIndex || 0].params.wrapNode;\n\t}\n\n\tgetSectionName()\n\t{\n\t\t//return this.calendar.sectionController.getSection(this.sectionId).name || '';\n\t}\n\n\tgetDescription()\n\t{\n\t\treturn this.data.DESCRIPTION || '';\n\t}\n\n\tapplyViewRange(viewRange)\n\t{\n\t\tlet\n\t\t\tviewRangeStart = viewRange.start.getTime(),\n\t\t\tviewRangeEnd = viewRange.end.getTime(),\n\t\t\tfromTime = this.from.getTime(),\n\t\t\ttoTime = this.to.getTime();\n\n\t\tif (toTime < viewRangeStart || fromTime > viewRangeEnd)\n\t\t\treturn false;\n\n\t\tif (fromTime < viewRangeStart)\n\t\t{\n\t\t\tthis.displayFrom = viewRange.start;\n\t\t\tthis.startDayCode = this.displayFrom;\n\t\t}\n\n\t\tif (toTime > viewRangeEnd)\n\t\t{\n\t\t\tthis.displayTo = viewRange.end;\n\t\t\tthis.endDayCode = this.displayTo;\n\t\t}\n\t\treturn true;\n\t}\n\n\tisPersonal()\n\t{\n\t\t//return (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID == this.calendar.util.userId);\n\t}\n\n\tisMeeting()\n\t{\n\t\treturn !!this.data.IS_MEETING;\n\t}\n\n\tisResourcebooking()\n\t{\n\t\treturn this.data.EVENT_TYPE === '#resourcebooking#';\n\t}\n\n\tisTask()\n\t{\n\t\treturn this.data['~TYPE'] === 'tasks';\n\t}\n\n\tisLocation()\n\t{\n\t\treturn this.getType() === 'location';\n\t}\n\n\tisFullDay()\n\t{\n\t\treturn this.fullDay;\n\t}\n\n\tisLongWithTime()\n\t{\n\t\treturn !this.fullDay && Util.getDayCode(this.from) !== Util.getDayCode(this.to);\n\t}\n\n\tisExpired()\n\t{\n\t\treturn this.to.getTime() < new Date().getTime();\n\t}\n\n\thasEmailAttendees()\n\t{\n\t\tif (this.emailAttendeesCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t{\n\t\t\t\tlet user = this.data['ATTENDEE_LIST'][i];\n\t\t\t\tif ((user.status === 'Y' || user.status === 'Q')\n\t\t\t\t\t&& userIndex[user.id]\n\t\t\t\t\t&& userIndex[user.id].EMAIL_USER\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.emailAttendeesCache = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.emailAttendeesCache;\n\t}\n\n\townerIsEmailUser()\n\t{\n\t\tif (this.ownerIsEmailUserCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tthis.ownerIsEmailUserCache = userIndex[parseInt(this.data.MEETING_HOST)]\n\t\t\t\t&& userIndex[parseInt(this.data.MEETING_HOST)].EMAIL_USER;\n\t\t}\n\t\treturn this.ownerIsEmailUserCache;\n\t}\n\n\tisSelected()\n\t{\n\t\treturn !!this.selected;\n\t}\n\n\tisCrm()\n\t{\n\t\treturn !!this.data.UF_CRM_CAL_EVENT;\n\t}\n\n\tisFirstReccurentEntry()\n\t{\n\t\treturn (this.data.DATE_FROM_TS_UTC === Math.floor(BX.parseDate(this.data['~DATE_FROM']).getTime() / 1000) * 1000\n\t\t\t||\n\t\t\tBX.parseDate(this.data['DATE_FROM']).getTime() === BX.parseDate(this.data['~DATE_FROM']).getTime()\n\t\t) && !this.data.RECURRENCE_ID;\n\t}\n\n\tisRecursive()\n\t{\n\t\treturn !!this.data.RRULE;\n\t}\n\n\tgetMeetingHost()\n\t{\n\t\treturn parseInt(this.data.MEETING_HOST);\n\t}\n\n\tgetMeetingNotify()\n\t{\n\t\treturn this.data.MEETING.NOTIFY;\n\t}\n\n\tgetHideGuests()\n\t{\n\t\treturn this.data.MEETING && BX.Type.isBoolean(this.data.MEETING.HIDE_GUESTS)\n\t\t\t? this.data.MEETING.HIDE_GUESTS\n\t\t\t: true;\n\t}\n\n\tgetRrule()\n\t{\n\t\treturn this.data.RRULE;\n\t}\n\n\tgetRRuleDescription()\n\t{\n\t\treturn this.data['~RRULE_DESCRIPTION'];\n\t}\n\n\thasRecurrenceId()\n\t{\n\t\treturn this.data.RECURRENCE_ID;\n\t}\n\n\twasEverRecursive()\n\t{\n\t\treturn this.data.RRULE || this.data.RECURRENCE_ID;\n\t}\n\n\tdeselect()\n\t{\n\t\tthis.selected = false;\n\t}\n\n\tselect()\n\t{\n\t\tthis.selected = true;\n\t}\n\n\tdeleteParts(recursionMode)\n\t{\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst wrap = calendarContext.getView().getContainer();\n\n\t\t\tif (recursionMode === 'all')\n\t\t\t{\n\t\t\t\tcalendarContext.getView().entries.forEach((entry) => {\n\t\t\t\t\tif (parseInt(entry.id) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === parseInt(this.data.RECURRENCE_ID)\n\t\t\t\t\t\t|| parseInt(entry.id) === parseInt(this.data.RECURRENCE_ID)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst entryPart = wrap.querySelector('div[data-bx-calendar-entry=\"' + entry.uid + '\"]');\n\t\t\t\t\t\tif (entryPart)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (recursionMode === 'next')\n\t\t\t{\n\t\t\t\tcalendarContext.getView().entries.forEach((entry) => {\n\t\t\t\t\tif ((parseInt(entry.id) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === parseInt(this.data.RECURRENCE_ID)\n\t\t\t\t\t\t|| parseInt(entry.id) === parseInt(this.data.RECURRENCE_ID))\n\t\t\t\t\t\t&& entry.from.getTime() > this.from.getTime()\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst entryPart = wrap.querySelector('div[data-bx-calendar-entry=\"' + entry.uid + '\"]');\n\t\t\t\t\t\tif (entryPart)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (recursionMode === 'this' || !recursionMode)\n\t\t\t{\n\t\t\t\tconst parts = wrap.querySelectorAll('div[data-bx-calendar-entry=\"' + this.getUniqueId() + '\"]');\n\t\t\t\tparts.forEach((entryPart)=>{\n\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUniqueId()\n\t{\n\t\treturn EntryManager.getEntryUniqueId(this.data, this);\n\t}\n\n\tgetCurrentStatus()\n\t{\n\t\tlet\n\t\t\tuserId = Util.getCurrentUserId(),\n\t\t\tstatus = false,\n\t\t\ti, user;\n\n\t\tif (this.isMeeting())\n\t\t{\n\t\t\tif (userId === parseInt(this.data.CREATED_BY))\n\t\t\t{\n\t\t\t\tstatus = this.data.MEETING_STATUS || 'Q';\n\t\t\t}\n\t\t\telse if (userId === parseInt(this.data.MEETING_HOST))\n\t\t\t{\n\t\t\t\tstatus = 'H';\n\t\t\t\t//status = this.data.MEETING_STATUS || 'H';\n\t\t\t}\n\t\t\telse if (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tuser = this.data['ATTENDEE_LIST'][i];\n\t\t\t\t\tif (parseInt(user.id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus = user.status;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (userId === parseInt(this.data.CREATED_BY))\n\t\t{\n\t\t\tstatus = this.data.MEETING_STATUS || 'H';\n\t\t}\n\n\t\treturn Util.getMeetingStatusList().includes(status) ? status : false;\n\t}\n\n\tsetCurrentStatus(status)\n\t{\n\t\tif (this.isMeeting() && Util.getMeetingStatusList().includes(status))\n\t\t{\n\t\t\tthis.data.MEETING_STATUS = status;\n\n\t\t\tconst userId = Util.getCurrentUserId();\n\t\t\tif (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(this.data['ATTENDEE_LIST'][i].id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.data['ATTENDEE_LIST'][i].status = status;\n\t\t\t\t\t\tthis.attendeeList = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetReminders()\n\t{\n\t\tlet res = [];\n\t\tif (this.data && this.data.REMIND)\n\t\t{\n\t\t\tthis.data.REMIND.forEach(function (remind)\n\t\t\t{\n\t\t\t\tswitch(remind.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'min':\n\t\t\t\t\t\tres.push(remind.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hour':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60 * 24);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'daybefore':\n\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (!Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tremind.value = Util.parseDate(remind.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetLengthInDays()\n\t{\n\t\tlet\n\t\t\tfrom = new Date(this.from.getFullYear(), this.from.getMonth(), this.from.getDate(), 0, 0, 0),\n\t\t\tto = new Date(this.to.getFullYear(), this.to.getMonth(), this.to.getDate(), 0, 0, 0);\n\n\t\treturn Math.round((to.getTime() - from.getTime()) / Util.getDayLength()) + 1;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.name || this.defaultNewName;\n\t}\n\n\tgetColor()\n\t{\n\t\treturn this.data.COLOR;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.data.CAL_TYPE;\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn this.data.OWNER_ID;\n\t}\n\n\tdelete(params)\n\t{\n\t\tparams = Type.isPlainObject(params) ? params : {};\n\t\tlet recursionMode = params.recursionMode || false;\n\n\t\tif (this.wasEverRecursive() && !params.confirmed)\n\t\t{\n\t\t\treturn this.showConfirmDeleteDialog({entry: this});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Broadcast event\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst action = 'deleteCalendarEntry';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.id,\n\t\t\t\trecursionMode: params.recursionMode || false,\n\t\t\t\trequestUid: Util.registerRequestId(),\n\t\t\t};\n\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t}\n\n\tdeleteThis()\n\t{\n\t\tlet recursionMode = 'this';\n\t\tif (this.isRecursive())\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst action = 'excludeRecursionDate';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.id,\n\t\t\t\trecursionMode: recursionMode,\n\t\t\t\texcludeDate: this.data.DATE_FROM,\n\t\t\t};\n\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [data]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t\telse if (this.hasRecurrenceId())\n\t\t{\n\t\t\tthis.delete({confirmed: true, recursionMode: 'this'});\n\t\t}\n\t}\n\n\tdeleteNext()\n\t{\n\t\tlet recursionMode = 'next';\n\t\tif (this.isRecursive() && this.isFirstReccurentEntry())\n\t\t{\n\t\t\tthis.deleteAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst calendarContext = Util.getCalendarContext();\n\t\t\tif (calendarContext)\n\t\t\t{\n\n\t\t\t}\n\n\t\t\tconst action = 'changeRecurciveEntryUntil';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.id,\n\t\t\t\trecursionMode: recursionMode,\n\t\t\t\tuntilDate: Util.formatDate(this.from.getTime() - Util.getDayLength()),\n\t\t\t};\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [data]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t}\n\n\tdeleteAll()\n\t{\n\t\treturn this.delete({confirmed: true, recursionMode: 'all'});\n\t}\n\n\tcancelDelete()\n\t{\n\t\tif (this.deleteTimeout)\n\t\t{\n\t\t\tconst deleteTimeoutData = this.delayTimeoutMap.get(this.deleteTimeout);\n\t\t\tif (deleteTimeoutData)\n\t\t\t{\n\t\t\t\tEntryManager.unregisterDeleteTimeout(deleteTimeoutData);\n\t\t\t\tthis.delayTimeoutMap.delete(this.delayTimeoutMap);\n\t\t\t}\n\t\t\tclearTimeout(this.deleteTimeout);\n\t\t\tthis.deleteTimeout = null;\n\t\t}\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext.reload();\n\t\t}\n\t}\n\n\tshowConfirmDeleteDialog(params)\n\t{\n\t\tif (!this.confirmDeleteDialog)\n\t\t{\n\t\t\tthis.confirmDeleteDialog = new (window.BX || window.top.BX).Calendar.Controls\n\t\t\t\t.ConfirmDeleteDialog({entry: params.entry});\n\t\t}\n\t\tthis.confirmDeleteDialog.show();\n\t}\n\n\tsave()\n\t{\n\t}\n\n\tgetLocation()\n\t{\n\t\treturn this.data.LOCATION;\n\t}\n\n\tsetTimezone(timezoneFrom, timezoneTo = null)\n\t{\n\t\tif(Type.isString(timezoneFrom))\n\t\t{\n\t\t\tthis.data.TZ_FROM = timezoneFrom;\n\t\t\tif (Type.isNull(timezoneTo))\n\t\t\t{\n\t\t\t\tthis.data.TZ_TO = timezoneFrom;\n\t\t\t}\n\t\t}\n\t\tif(Type.isString(timezoneTo))\n\t\t{\n\t\t\tthis.data.TZ_TO = timezoneTo;\n\t\t}\n\t}\n\n\tgetTimezoneFrom()\n\t{\n\t\treturn this.data.TZ_FROM || '';\n\t}\n\n\tgetTimezoneTo()\n\t{\n\t\treturn this.data.TZ_TO || '';\n\t}\n\n\tsetSectionId(value)\n\t{\n\t\tthis.data.SECT_ID = this.sectionId = this.isTask() ? 'tasks' : parseInt(value);\n\t}\n\n\tsetDateTimeValue({from, to})\n\t{\n\t\tif (Type.isDate(from) && Type.isDate(to))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom = from;\n\t\t\tthis.to = this.data.dateTo = to;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDateTime(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDateTime(this.to.getTime());\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["EntryManager","params","BX","Calendar","Util","checkRequestId","requestUid","compactForm","getCompactViewForm","isShown","handlePull","SidePanel","Instance","getOpenSliders","forEach","slider","data","slidersMap","get","entry","parentId","parseInt","fields","PARENT_ID","command","getType","CAL_TYPE","close","control","EventViewForm","reloadSliderDebounce","top","Event","EventEmitter","emit","IS_MEETING","MEETING_STATUS","Controls","Location","calendarContext","getCalendarContext","entrySectionId","SECTION_ID","sectionDisplayed","Type","isArray","sections","find","section","id","loadedEntry","getEntryInstance","getView","getEntryById","getEntryUniqueId","reloadDebounce","options","newEntryData","dateTime","getNewEntryTime","Date","userSettings","getUserSettings","userId","getCurrentUserId","ID","NAME","getNewEntryName","dateFrom","from","dateTo","to","type","SECT_ID","RoomsManager","getNewEntrySectionId","ownerId","SectionManager","REMIND","getNewEntryReminders","attendeesEntityList","entityId","ATTENDEE_LIST","status","push","TZ_FROM","timezoneName","timezoneDefaultName","TZ_TO","Entry","date","duration","getUsableDateTime","displayedViewRange","getDisplayedViewRange","isDate","start","getTime","end","newEntryName","Loc","getMessage","entryId","showNotification","title","events","click","event","balloon","action","openViewSlider","UI","Notification","Center","notify","getUniqueId","content","actions","cancelDelete","getBalloonById","bx","getBX","SliderLoader","isLocationCalendar","roomsManager","locationAccess","dayOfWeekMonthFormat","locationCapacity","formDataValue","show","eventId","isNull","entryDateFrom","timezoneOffset","getTopSlider","beforeDeleteHandler","subscribe","deleteHandler","calendar","reload","unsubscribe","Promise","resolve","isPlainObject","recursionMode","confirmed","isRecursive","showConfirmStatusDialog","ajax","runAction","entryParentId","currentDateFrom","formatDate","then","response","BaseEvent","counters","setCurrentStatus","resolvePromiseCallback","confirmDeclineDialog","ConfirmStatusDialog","unsubscribeAll","isFunction","getData","setMeetingStatus","confirmEditDialog","ConfirmEditDialog","callback","reinviteUsersDialog","ReinviteUserDialog","confirmedEmailDialog","ConfirmedEmailDialog","limitationEmailDialog","EmailLimitationDialog","create","compactEntryForm","CompactEventForm","closeCallback","showInViewMode","showInEditMode","userIndex","entryInstance","isObject","getNewEntry","delayedActionList","filter","item","excludeDate","requestList","length","closeDeleteNotificationBalloon","uid","unregisterDeleteTimeout","entryData","sid","RRULE","parseDate","DATE_FROM","set","isObjectLike","defaultReminders","count","before","time","reminders","setUserSettings","WeakMap","prepareData","parts","setUserIndex","delayTimeoutMap","Map","DT_SKIP_TIME","SKIP_TIME","fullDay","accessibility","ACCESSIBILITY","important","IMPORTANCE","PRIVATE_EVENT","setSectionId","name","userTimezoneOffsetFrom","userTimezoneOffsetTo","DT_LENGTH","DURATION","FULL_DAY_LENGTH","isString","DATE_TO","Math","round","isTask","setHours","ATTENDEES_CODES","OWNER_ID","CREATED_BY","startDayCode","endDayCode","remind","value","attendeeList","getUserIndex","user","attendee","clone","STATUS","ENTRY_ID","part","partIndex","wrapNode","DESCRIPTION","viewRange","viewRangeStart","viewRangeEnd","fromTime","toTime","displayFrom","displayTo","EVENT_TYPE","getDayCode","emailAttendeesCache","undefined","i","EMAIL_USER","ownerIsEmailUserCache","MEETING_HOST","selected","UF_CRM_CAL_EVENT","DATE_FROM_TS_UTC","floor","RECURRENCE_ID","MEETING","NOTIFY","isBoolean","HIDE_GUESTS","wrap","getContainer","entries","entryPart","querySelector","style","opacity","setTimeout","display","querySelectorAll","isMeeting","getMeetingStatusList","includes","res","getFullYear","getMonth","getDate","getDayLength","defaultNewName","COLOR","wasEverRecursive","showConfirmDeleteDialog","onCustomEvent","showDeleteEntryNotification","deleteParts","registerRequestId","registerDeleteTimeout","deleteTimeout","doDelayedActions","DELETE_DELAY_TIMEOUT","hasRecurrenceId","isFirstReccurentEntry","deleteAll","untilDate","deleteTimeoutData","clearTimeout","confirmDeleteDialog","window","ConfirmDeleteDialog","LOCATION","timezoneFrom","timezoneTo","sectionId","formatDateTime"],"mappings":"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"}