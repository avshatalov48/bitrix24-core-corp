{"version":3,"file":"entry.bundle.js","sources":["../src/entrymanager.js","../src/entry.js"],"sourcesContent":["import {Entry} from \"calendar.entry\";\nimport {CalendarSectionManager} from \"calendar.calendarsection\";\nimport {Util} from \"calendar.util\";\nimport {Loc, Type, Event} from \"main.core\";\nimport {ConfirmStatusDialog, ConfirmEditDialog} from \"calendar.controls\";\nimport {CompactEventForm} from \"calendar.compacteventform\";\n\nexport class EntryManager {\n\tstatic newEntryName = '';\n\n\tstatic getNewEntry(options)\n\t{\n\t\tlet newEntryData = {};\n\t\tlet dateTime = EntryManager.getNewEntryTime(new Date());\n\n\t\tnewEntryData.ID = null;\n\t\tnewEntryData.NAME = EntryManager.getNewEntryName();\n\t\tnewEntryData.dateFrom = dateTime.from;\n\t\tnewEntryData.dateTo = dateTime.to;\n\t\tnewEntryData.SECT_ID = CalendarSectionManager.getNewEntrySectionId();\n\t\tnewEntryData.REMIND = [{type: 'min', count: 15}];\n\t\tnewEntryData.ATTENDEES_CODES = ['U' + Util.getCurrentUserId()];\n\t\t//newEntryData.TIMEZONE_FROM = userSettings.timezoneName || userSettings.timezoneDefaultName || null;\n\n\t\treturn new Entry({data: newEntryData});\n\t}\n\n\tstatic getNewEntryTime(date, duration)\n\t{\n\t\tdate = Util.getUsableDateTime(date);\n\t\treturn {\n\t\t\tfrom : date,\n\t\t\tto : new Date(date.getTime() + (duration || 3600) * 1000)\n\t\t}\n\t}\n\n\tstatic getNewEntryName()\n\t{\n\t\treturn EntryManager.newEntryName || Loc.getMessage('CALENDAR_DEFAULT_ENTRY_NAME');\n\t}\n\n\tstatic setNewEntryName(newEntryName)\n\t{\n\t\tEntryManager.newEntryName = newEntryName;\n\t}\n\n\tstatic showEditEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_SAVE_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showNewEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_NEW_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic openEditSlider(options = {})\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t{\n\t\t\tnew bx.Calendar.SliderLoader(\n\t\t\t\toptions.entry ? 'EDIT' + options.entry.id : 'NEW',\n\t\t\t\t{\n\t\t\t\t\tentry: options.entry || null,\n\t\t\t\t\ttype: options.type,\n\t\t\t\t\townerId: options.ownerId,\n\t\t\t\t\tuserId: options.userId\n\t\t\t\t}\n\t\t\t).show();\n\t\t}\n\t}\n\n\tstatic openViewSlider(eventId = null, options = {})\n\t{\n\t\tif (!Type.isNull(eventId))\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t\t{\n\t\t\t\tnew bx.Calendar.SliderLoader(eventId, {\n\t\t\t\t\tentryDateFrom: options.from,\n\t\t\t\t\ttimezoneOffset: options.timezoneOffset\n\t\t\t\t}).show();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteEntry(entry)\n\t{\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tBX.addCustomEvent('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\tif (Util.getBX().SidePanel.Instance)\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().SidePanel.Instance.close();\n\t\t\t\t}\n\t\t\t});\n\t\t\tBX.addCustomEvent('BX.Calendar.Entry:delete', ()=>{\n\t\t\t\tUtil.getBX().reload();\n\t\t\t});\n\t\t\tentry.delete();\n\t\t}\n\t}\n\n\tstatic setMeetingStatus(entry, status, params = {})\n\t{\n\t\tif (!Type.isPlainObject(params))\n\t\t{\n\t\t\tparams = {};\n\t\t}\n\t\tparams.recursionMode = params.recursionMode || false;\n\n\t\tif (status === 'N' && !params.confirmed)\n\t\t{\n\t\t\tif (entry.isRecursive())\n\t\t\t{\n\t\t\t\tthis.showConfirmStatusDialog(entry);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\telse if (!confirm(Loc.getMessage('EC_DECLINE_MEETING_CONFIRM')))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setMeetingStatus', {\n\t\t\tdata: {\n\t\t\t\tentryId: entry.id,\n\t\t\t\tentryParentId: entry.parentId,\n\t\t\t\tstatus: status,\n\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\tcurrentDateDrom: Util.formatDate(entry.from)\n\t\t\t}\n\t\t}).then(\n\t\t\tfunction (response)\n\t\t\t{\n\t\t\t\tBX.Event.EventEmitter.emit(\n\t\t\t\t\t'BX.Calendar.Entry:onChangeMeetingStatus',\n\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\t\tcurrentDateDrom: entry.from\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}.bind(this)\n\t\t);\n\t}\n\n\tstatic showConfirmStatusDialog(entry)\n\t{\n\t\tif (!this.confirmDeclineDialog)\n\t\t{\n\t\t\tthis.confirmDeclineDialog = new ConfirmStatusDialog();\n\t\t}\n\n\t\tthis.confirmDeclineDialog.show();\n\t\tthis.confirmDeclineDialog.unsubscribeAll('onDecline');\n\t\tthis.confirmDeclineDialog.subscribe('onDecline', function(event)\n\t\t{\n\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t{\n\t\t\t\tEntryManager.setMeetingStatus(\n\t\t\t\t\tentry,\n\t\t\t\t\t'N',\n\t\t\t\t\t{recursionMode: event.getData().recursionMode, confirmed: true}\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showConfirmEditDialog(options)\n\t{\n\t\tif (!this.confirmEditDialog)\n\t\t{\n\t\t\tthis.confirmEditDialog = new ConfirmEditDialog();\n\t\t}\n\t\tthis.confirmEditDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmEditDialog.unsubscribeAll('onEdit');\n\t\t\tthis.confirmEditDialog.subscribe('onEdit', function(event)\n\t\t\t{\n\t\t\t\tif (event instanceof Event.BaseEvent)\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic getCompactViewForm()\n\t{\n\t\tif (!EntryManager.compactEntryForm)\n\t\t{\n\t\t\tEntryManager.compactEntryForm = new CompactEventForm();\n\t\t}\n\t\treturn EntryManager.compactEntryForm;\n\t}\n\n\tstatic openCompactViewForm(options = {})\n\t{\n\t\tEntryManager.getCompactViewForm().showInViewMode(options);\n\t}\n\n\tstatic openCompactEditForm(options = {})\n\t{\n\t\tEntryManager.getCompactViewForm().showInEditMode(options);\n\t}\n\n\tstatic getEntryInstance(entry, userIndex)\n\t{\n\t\tlet entryInstance = null;\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tentryInstance = entry;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isObject(entry) && Type.isObject(entry.data))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry.data, userIndex: userIndex});\n\t\t\t}\n\t\t\telse if (Type.isObject(entry))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry, userIndex: userIndex});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentryInstance = EntryManager.getNewEntry();\n\t\t\t}\n\t\t}\n\n\t\treturn entryInstance;\n\t}\n}","import {ConfirmDeleteDialog} from \"calendar.controls\";\nimport {Util} from \"calendar.util\";\nimport {EntryManager} from \"./entrymanager\";\nimport {Type} from 'main.core';\n\nexport {EntryManager};\n\nexport class Entry\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.prepareData(options.data);\n\t\tthis.parts = [];\n\n\t\tif (options.userIndex)\n\t\t{\n\t\t\tthis.setUserIndex(options.userIndex);\n\t\t}\n\t\t//this.uid = this.calendar.entryController.getUniqueId(data, this);\n\t}\n\n\tprepareData(data)\n\t{\n\t\tthis.data = data;\n\t\tthis.id = this.data.ID || 0;\n\n\t\tif (!this.data.DT_SKIP_TIME)\n\t\t{\n\t\t\tthis.data.DT_SKIP_TIME = this.data.SKIP_TIME ? 'Y' : 'N';\n\t\t}\n\n\t\tthis.fullDay = this.data.DT_SKIP_TIME === 'Y';\n\t\tthis.parentId = this.data.PARENT_ID || 0;\n\t\tthis.accessibility = this.data.ACCESSIBILITY || 'busy';\n\t\tthis.important = this.data.IMPORTANCE === 'high';\n\t\tthis.private = !!this.data.PRIVATE_EVENT;\n\t\tthis.setSectionId(this.data.SECT_ID);\n\t\tthis.name = this.data.NAME;\n\n\t\tif (!this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.data.DURATION || 0;\n\t\t}\n\t\tif (this.fullDay && !this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = 86400;\n\t\t}\n\n\t\tif (!Type.isString(this.data.DATE_FROM) && !Type.isString(this.data.DATE_TO)\n\t\t\t&& Type.isDate(this.data.dateFrom) && Type.isDate(this.data.dateTo))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom;\n\t\t\tthis.to = this.data.dateTo;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDateTime(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDateTime(this.to.getTime());\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isTask())\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\tthis.to = BX.parseDate(this.data.DATE_TO) || this.from;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\t// if (this.data.DT_SKIP_TIME !== \"Y\")\n\t\t\t\t// {\n\t\t\t\t// \tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\t// }\n\t\t\t\tthis.to = new Date(this.from.getTime() + (this.data.DT_LENGTH - (this.fullDay ? 1 : 0)) * 1000);\n\t\t\t}\n\t\t}\n\n\t\tif (this.fullDay)\n\t\t{\n\t\t\tthis.from.setHours(0, 0, 0, 0);\n\t\t\tthis.to.setHours(0, 0, 0, 0);\n\t\t}\n\n\t\tif (!this.data.ATTENDEES_CODES && !this.isTask())\n\t\t{\n\t\t\tif (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.OWNER_ID];\n\t\t\t}\n\t\t\telse if (this.data.CREATED_BY)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.CREATED_BY];\n\t\t\t}\n\t\t}\n\n\t\tthis.startDayCode = this.from;\n\t\tthis.endDayCode = this.to;\n\n\t\tif (!Type.isArray(this.data.REMIND) && Type.isArray(this.data.remind))\n\t\t{\n\t\t\tthis.data.REMIND = [];\n\t\t\tthis.data.remind.forEach(function(value)\n\t\t\t{\n\t\t\t\tthis.data.REMIND.push({type: 'min', count: value});\n\t\t\t}, this);\n\t\t\tdelete this.data.remind;\n\t\t}\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\treturn this.data.ATTENDEES_CODES;\n\t}\n\n\tgetAttendees(userIndex = {})\n\t{\n\t\tif (!this.attendeeList && Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t{\n\t\t\tthis.attendeeList = [];\n\t\t\tlet userIndex = this.getUserIndex();\n\t\t\tthis.data['ATTENDEE_LIST'].forEach(function(user)\n\t\t\t{\n\t\t\t\tif (userIndex[user.id])\n\t\t\t\t{\n\t\t\t\t\tlet attendee = BX.clone(userIndex[user.id]);\n\t\t\t\t\tattendee.STATUS = user.status;\n\t\t\t\t\tattendee.ENTRY_ID = user.entryId;\n\t\t\t\t\tthis.attendeeList.push(attendee);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t\treturn this.attendeeList || [];\n\t}\n\n\tsetUserIndex(userIndex)\n\t{\n\t\tthis.userIndex = userIndex;\n\t}\n\n\tgetUserIndex()\n\t{\n\t\t//let userIndex = this.calendar.entryController.getUserIndex();\n\t\treturn this.userIndex;\n\t}\n\n\tcleanParts()\n\t{\n\t\tthis.parts = [];\n\t}\n\n\tstartPart(part)\n\t{\n\t\tpart.partIndex = this.parts.length;\n\t\tthis.parts.push(part);\n\t\treturn this.parts[part.partIndex];\n\t}\n\n\tregisterPartNode(part, params)\n\t{\n\t\tpart.params = params;\n\t}\n\n\tcheckPartIsRegistered(part)\n\t{\n\t\treturn Type.isPlainObject(part.params);\n\t}\n\n\tgetPart(partIndex)\n\t{\n\t\treturn this.parts[partIndex] || false;\n\t}\n\n\tgetWrap(partIndex)\n\t{\n\t\treturn this.parts[partIndex || 0].params.wrapNode;\n\t}\n\n\tgetSectionName()\n\t{\n\t\t//return this.calendar.sectionController.getSection(this.sectionId).name || '';\n\t}\n\n\tgetDescription(callback)\n\t{\n\t\tif (this.data.DESCRIPTION && this.data['~DESCRIPTION'] && Type.isFunction(callback))\n\t\t{\n\t\t\tsetTimeout(function()\n\t\t\t{\n\t\t\t\tcallback(this.data['~DESCRIPTION']);\n\t\t\t}.bind(this), 50);\n\t\t}\n\t}\n\n\tapplyViewRange(viewRange)\n\t{\n\t\tlet\n\t\t\tviewRangeStart = viewRange.start.getTime(),\n\t\t\tviewRangeEnd = viewRange.end.getTime(),\n\t\t\tfromTime = this.from.getTime(),\n\t\t\ttoTime = this.to.getTime();\n\n\t\tif (toTime < viewRangeStart || fromTime > viewRangeEnd)\n\t\t\treturn false;\n\n\t\tif (fromTime < viewRangeStart)\n\t\t{\n\t\t\tthis.displayFrom = viewRange.start;\n\t\t\tthis.startDayCode = this.displayFrom;\n\t\t}\n\n\t\tif (toTime > viewRangeEnd)\n\t\t{\n\t\t\tthis.displayTo = viewRange.end;\n\t\t\tthis.endDayCode = this.displayTo;\n\t\t}\n\t\treturn true;\n\t}\n\n\tisPersonal()\n\t{\n\t\t//return (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID == this.calendar.util.userId);\n\t}\n\n\tisMeeting()\n\t{\n\t\treturn !!this.data.IS_MEETING;\n\t}\n\n\tisResourcebooking()\n\t{\n\t\treturn this.data.EVENT_TYPE === '#resourcebooking#';\n\t}\n\n\tisTask()\n\t{\n\t\treturn this.data['~TYPE'] === 'tasks';\n\t}\n\n\tisFullDay()\n\t{\n\t\treturn this.fullDay;\n\t}\n\n\tisLongWithTime()\n\t{\n\t\treturn !this.fullDay && Util.getDayCode(this.from) !== Util.getDayCode(this.to);\n\t}\n\n\tisExpired()\n\t{\n\t\treturn this.to.getTime() < new Date().getTime();\n\t}\n\n\tisExternal()\n\t{\n\t\treturn false;\n\t}\n\n\tisSelected()\n\t{\n\t\treturn !!this.selected;\n\t}\n\n\tisCrm()\n\t{\n\t\treturn !!this.data.UF_CRM_CAL_EVENT;\n\t}\n\n\tisFirstReccurentEntry()\n\t{\n\t\treturn (this.data.DATE_FROM_TS_UTC === Math.floor(BX.parseDate(this.data['~DATE_FROM']).getTime() / 1000) * 1000\n\t\t\t||\n\t\t\tBX.parseDate(this.data['DATE_FROM']).getTime() === BX.parseDate(this.data['~DATE_FROM']).getTime()\n\t\t) && !this.data.RECURRENCE_ID;\n\t}\n\n\tisRecursive()\n\t{\n\t\treturn !!this.data.RRULE;\n\t}\n\n\tgetMeetingHost()\n\t{\n\t\treturn parseInt(this.data.MEETING_HOST);\n\t}\n\n\tgetRrule()\n\t{\n\t\treturn this.data.RRULE;\n\t}\n\n\thasRecurrenceId()\n\t{\n\t\treturn this.data.RECURRENCE_ID;\n\t}\n\n\twasEverRecursive()\n\t{\n\t\treturn this.data.RRULE || this.data.RECURRENCE_ID;\n\t}\n\n\tdeselect()\n\t{\n\t\tthis.selected = false;\n\t}\n\n\tselect()\n\t{\n\t\tthis.selected = true;\n\t}\n\n\tdeleteParts()\n\t{\n\t\tif (Type.isArray(this.parts))\n\t\t{\n\t\t\tthis.parts.forEach(function(part){\n\t\t\t\tif (part.params)\n\t\t\t\t{\n\t\t\t\t\tif (part.params.wrapNode)\n\t\t\t\t\t{\n\t\t\t\t\t\tpart.params.wrapNode.style.opacity = 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tthis.parts.forEach(function(part){\n\t\t\t\t\tif (part.params)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (part.params.wrapNode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.remove(part.params.wrapNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}.bind(this), 300);\n\t\t}\n\t}\n\n\tgetUniqueId()\n\t{\n\t\tlet sid = this.data.PARENT_ID || this.data.PARENT_ID;\n\t\tif (this.isRecursive())\n\t\t\tsid += '|' + this.data.DT_FROM_TS;\n\n\t\tif (this.data['~TYPE'] === 'tasks')\n\t\t\tsid += '|' + 'task';\n\n\t\treturn sid;\n\t}\n\n\tgetCurrentStatus()\n\t{\n\t\tlet\n\t\t\tuserId = Util.getCurrentUserId(),\n\t\t\tstatus = false,\n\t\t\ti, user;\n\n\t\tif (this.isMeeting())\n\t\t{\n\t\t\tif (userId === parseInt(this.data.CREATED_BY)\n\t\t\t\t||\n\t\t\t\tuserId === parseInt(this.data.MEETING_HOST)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstatus = this.data.MEETING_STATUS;\n\t\t\t}\n\t\t\telse if (userId === parseInt(this.data.MEETING_HOST))\n\t\t\t{\n\t\t\t\tstatus = this.data.MEETING_STATUS;\n\t\t\t}\n\t\t\telse if (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tuser = this.data['ATTENDEE_LIST'][i];\n\t\t\t\t\tif (parseInt(this.data['ATTENDEE_LIST'][i].id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus = this.data['ATTENDEE_LIST'][i].status;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn status || 'Q';\n\t}\n\n\tgetReminders()\n\t{\n\t\tlet res = [];\n\t\tif (this.data && this.data.REMIND)\n\t\t{\n\t\t\tthis.data.REMIND.forEach(function (remind)\n\t\t\t{\n\t\t\t\tswitch(remind.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'min':\n\t\t\t\t\t\tres.push(remind.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hour':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60 * 24);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'daybefore':\n\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (!Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tremind.value = Util.parseDate(remind.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetLengthInDays()\n\t{\n\t\tlet\n\t\t\tfrom = new Date(this.from.getFullYear(), this.from.getMonth(), this.from.getDate(), 0, 0, 0),\n\t\t\tto = new Date(this.to.getFullYear(), this.to.getMonth(), this.to.getDate(), 0, 0, 0);\n\n\t\treturn Math.round((to.getTime() - from.getTime()) / Util.getDayLength()) + 1;\n\t}\n\n\tgetName()\n\t{\n\t\treturn this.name || this.defaultNewName;\n\t}\n\n\tgetColor()\n\t{\n\t\treturn this.data.COLOR;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.data.CAL_TYPE;\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn this.data.OWNER_ID;\n\t}\n\n\tdelete(params)\n\t{\n\t\tparams = Type.isPlainObject(params) ? params : {};\n\t\tlet recursionMode = params.recursionMode || false;\n\n\t\tif (this.wasEverRecursive() && !params.confirmed)\n\t\t{\n\t\t\treturn this.showConfirmDeleteDialog({entry: this});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!params.confirmed\n\t\t\t\t&& !confirm(BX.message('EC_DELETE_EVENT_CONFIRM'))\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Broadcast event\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tthis.deleteParts();\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.deleteCalendarEntry', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\trecursionMode: params.recursionMode || false\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tdeleteThis()\n\t{\n\t\tlet recursionMode = 'this';\n\t\tif (this.isRecursive())\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.excludeRecursionDate', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\texcludeDate: this.data.DATE_FROM\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t// Success\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t\telse if (this.hasRecurrenceId())\n\t\t{\n\t\t\tthis.delete({confirmed: true, recursionMode: 'this'});\n\t\t}\n\t}\n\n\tdeleteNext()\n\t{\n\t\tlet recursionMode = 'next';\n\t\tif (this.isRecursive() && this.isFirstReccurentEntry())\n\t\t{\n\t\t\tthis.deleteAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.changeRecurciveEntryUntil', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.id,\n\t\t\t\t\tuntilDate: Util.formatDate(this.from.getTime() - Util.getDayLength())\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t// Success\n\t\t\t\tfunction (response)\n\t\t\t\t{\n\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tdeleteAll()\n\t{\n\t\treturn this.delete({confirmed: true, recursionMode: 'all'});\n\t}\n\n\tshowConfirmDeleteDialog(params)\n\t{\n\t\tif (!this.confirmDeleteDialog)\n\t\t{\n\t\t\tthis.confirmDeleteDialog = new ConfirmDeleteDialog({entry: params.entry});\n\t\t}\n\t\tthis.confirmDeleteDialog.show();\n\t}\n\n\tsave()\n\t{\n\t}\n\n\tgetLocation()\n\t{\n\t\treturn this.data.LOCATION;\n\t}\n\n\tsetTimezone(timezoneFrom, timezoneTo = null)\n\t{\n\t\tif(Type.isString(timezoneFrom))\n\t\t{\n\t\t\tthis.data.TZ_FROM = timezoneFrom;\n\t\t\tif (Type.isNull(timezoneTo))\n\t\t\t{\n\t\t\t\tthis.data.TZ_TO = timezoneFrom;\n\t\t\t}\n\t\t}\n\t\tif(Type.isString(timezoneTo))\n\t\t{\n\t\t\tthis.data.TZ_TO = timezoneTo;\n\t\t}\n\t}\n\n\tgetTimezoneFrom()\n\t{\n\t\treturn this.data.TZ_FROM;\n\t}\n\n\tgetTimezoneTo()\n\t{\n\t\treturn this.data.TZ_TO;\n\t}\n\n\tsetSectionId(value)\n\t{\n\t\tthis.data.SECT_ID = this.sectionId = this.isTask() ? 'tasks' : parseInt(value);\n\t}\n}"],"names":["EntryManager","options","newEntryData","dateTime","getNewEntryTime","Date","ID","NAME","getNewEntryName","dateFrom","from","dateTo","to","SECT_ID","CalendarSectionManager","getNewEntrySectionId","REMIND","type","count","ATTENDEES_CODES","Util","getCurrentUserId","Entry","data","date","duration","getUsableDateTime","getTime","newEntryName","Loc","getMessage","entryId","showNotification","title","events","click","event","balloon","action","openViewSlider","close","bx","getBX","Calendar","SliderLoader","entry","id","ownerId","userId","show","eventId","Type","isNull","entryDateFrom","timezoneOffset","BX","addCustomEvent","SidePanel","Instance","reload","delete","status","params","isPlainObject","recursionMode","confirmed","isRecursive","showConfirmStatusDialog","confirm","ajax","runAction","entryParentId","parentId","currentDateDrom","formatDate","then","response","Event","EventEmitter","emit","BaseEvent","bind","confirmDeclineDialog","ConfirmStatusDialog","unsubscribeAll","subscribe","setMeetingStatus","getData","confirmEditDialog","ConfirmEditDialog","isFunction","callback","compactEntryForm","CompactEventForm","getCompactViewForm","showInViewMode","showInEditMode","userIndex","entryInstance","isObject","getNewEntry","prepareData","parts","setUserIndex","DT_SKIP_TIME","SKIP_TIME","fullDay","PARENT_ID","accessibility","ACCESSIBILITY","important","IMPORTANCE","private","PRIVATE_EVENT","setSectionId","name","DT_LENGTH","DURATION","isString","DATE_FROM","DATE_TO","isDate","Math","round","formatDateTime","isTask","parseDate","setHours","CAL_TYPE","OWNER_ID","CREATED_BY","startDayCode","endDayCode","isArray","remind","forEach","value","push","attendeeList","getUserIndex","user","attendee","clone","STATUS","ENTRY_ID","part","partIndex","length","wrapNode","DESCRIPTION","setTimeout","viewRange","viewRangeStart","start","viewRangeEnd","end","fromTime","toTime","displayFrom","displayTo","IS_MEETING","EVENT_TYPE","getDayCode","selected","UF_CRM_CAL_EVENT","DATE_FROM_TS_UTC","floor","RECURRENCE_ID","RRULE","parseInt","MEETING_HOST","style","opacity","remove","sid","DT_FROM_TS","i","isMeeting","MEETING_STATUS","res","getFullYear","getMonth","getDate","getDayLength","defaultNewName","COLOR","wasEverRecursive","showConfirmDeleteDialog","message","onCustomEvent","deleteParts","excludeDate","hasRecurrenceId","isFirstReccurentEntry","deleteAll","untilDate","confirmDeleteDialog","ConfirmDeleteDialog","LOCATION","timezoneFrom","timezoneTo","TZ_FROM","TZ_TO","sectionId"],"mappings":"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"}