{"version":3,"file":"eventviewform.bundle.js","sources":["../src/user-avatar.js","../src/view-event-slider.js","../src/eventviewform.js"],"sourcesContent":["export const UserAvatar = {\n\tname: 'UserAvatar',\n\tprops: {\n\t\tavatarSize: Number,\n\t\tuser: Object,\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"calendar-slider-sidebar-user-block-item\">\n\t\t\t<div class=\"ui-icon ui-icon-common-user ui-icon-common-user-sharing\" :style=\"'width:' + avatarSize + 'px'\"\n\t\t\t\t v-if=\"user.SHARING_USER\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t\t<div class=\"ui-icon ui-icon-common-user-mail\" :style=\"'width:' + avatarSize + 'px'\"\n\t\t\t\t v-else-if=\"user.EMAIL_USER\">\n\t\t\t\t<i></i>\n\t\t\t</div>\n\t\t\t<span v-else>\n\t\t\t\t<img :src=\"encodeURI(user.AVATAR)\" :width=\"avatarSize\" :height=\"avatarSize\" v-if=\"user.AVATAR && user.AVATAR !== '/bitrix/images/1.gif'\"/>\n\t\t\t\t<div class=\"ui-icon ui-icon-common-user\" :style=\"'width:' + avatarSize + 'px'\" v-else>\n\t\t\t\t\t<i></i>\n\t\t\t\t</div>\n\t\t\t</span>\n\t\t</div>\n\t`\n}","\"use strict\";\n\nimport { Util } from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport { Runtime, Event } from 'main.core';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { UserAvatar\t} from './user-avatar';\n\nexport const ViewEventSlider = {\n\tname: 'ViewEventSlider',\n\tprops: ['params', 'reloadPlannerCallback', 'showUserListPopupCallback'],\n\tcomponents: {\n\t\tUserAvatar,\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tid: this.params.id,\n\t\t\teventId: parseInt(this.params.eventId),\n\t\t\tname: this.params.name,\n\t\t\tdescription: this.params.description,\n\t\t\ttimezoneHint: this.params.timezoneHint,\n\t\t\ttimezone: this.params.userTimezone,\n\t\t\tfromToHtml: this.params.fromToHtml,\n\t\t\tisMeeting: this.params.isMeeting,\n\t\t\tmeetingHost: this.params.meetingHost,\n\t\t\tmeetingHostDisplayName: this.params.meetingHostDisplayName,\n\t\t\tmeetingHostWorkPosition: this.params.meetingHostWorkPosition,\n\t\t\tavatarSize: this.params.avatarSize,\n\t\t\tattendees: this.params.attendees,\n\t\t\tuserList: {y : [], i: [], q: [], n: []},\n\t\t\tcurUserStatus: this.params.curUserStatus,\n\t\t\tmeetingCreatorUrl: this.params.meetingCreatorUrl,\n\t\t\tmeetingCreatorDisplayName: this.params.meetingCreatorDisplayName,\n\t\t\tisRemind: this.params.isRemind,\n\t\t\tisWebdavEvent: this.params.isWebdavEvent,\n\t\t\tisCrmEvent: this.params.isCrmEvent,\n\t\t\tisHighImportance: this.params.isHighImportance,\n\t\t\tisRrule: this.params.isRrule,\n\t\t\trruleDescription: this.params.rruleDescription,\n\t\t\tdetailFilesTemplate: this.params.detailFilesTemplate,\n\t\t\taccessibility: this.params.accessibility,\n\t\t\tisIntranetEnabled: this.params.isIntranetEnabled,\n\t\t\tisPrivate: this.params.isPrivate,\n\t\t\tlocation: this.params.location,\n\t\t\tcanEditCalendar: this.params.canEditCalendar,\n\t\t\tshowComments: this.params.showComments,\n\t\t\tfilesView: this.getComponentHTML(this.params.filesView),\n\t\t\tcrmView: this.getComponentHTML(this.params.crmView),\n\t\t\tentry: new Entry({data: this.params.entry, userIndex: this.params.userIndex}),\n\t\t\tisInvited: false,\n\n\t\t\tupdateParamsDebounce: Runtime.debounce(this.updateParams, 500, this),\n\t\t\thasPulls: false,\n\t\t\tbackgroundPullEvent: null,\n\t\t}\n\t},\n\tcreated()\n\t{\n\t\tthis.isInvited = this.entry.isInvited();\n\t},\n\tmounted()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tthis.updateUserList();\n\t\t\tif (this.showComments)\n\t\t\t{\n\t\t\t\tthis.loadCommentsView();\n\t\t\t}\n\t\t\tif (this.isWebdavEvent)\n\t\t\t{\n\t\t\t\tthis.executeScripts(this.$refs.filesView);\n\t\t\t}\n\t\t\tEvent.bind(document, 'visibilitychange', this.handleBackgroundPulls);\n\t\t}\n\t},\n\tbeforeMount()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullEvent);\n\t\t\tEventEmitter.subscribe(`MeetingStatusControl_${this.id}:onSetStatus`, this.handleStatusUpdate);\n\t\t}\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.params.eventExists)\n\t\t{\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullEvent);\n\t\t\tEventEmitter.unsubscribe(`MeetingStatusControl_${this.id}:onSetStatus`, this.handleStatusUpdate);\n\t\t}\n\t},\n\tmethods: {\n\t\tgetComponentHTML(json)\n\t\t{\n\t\t\tif (!json)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn JSON.parse(json).data.html;\n\t\t},\n\t\tloadCommentsView()\n\t\t{\n\t\t\tBX.ajax.runAction('calendar.api.calendareventviewform.getCommentsView', {\n\t\t\t\tdata: {\n\t\t\t\t\tsignedEvent: this.params.signedEvent,\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tconst commentsElement = document.createElement('div');\n\t\t\t\tcommentsElement.innerHTML = response.data.html;\n\t\t\t\tthis.$refs.commentsView.appendChild(commentsElement);\n\t\t\t\tthis.executeScripts(this.$refs.commentsView);\n\t\t\t});\n\t\t},\n\t\texecuteScripts(element)\n\t\t{\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t//run scripts\n\t\t\tconst scripts = element.querySelectorAll('script');\n\t\t\tfor (const script of scripts)\n\t\t\t{\n\t\t\t\tconst s = document.createElement('script');\n\t\t\t\ts.innerHTML = script.innerHTML;\n\t\t\t\tscript.parentNode.appendChild(s);\n\t\t\t\tscript.remove();\n\t\t\t}\n\t\t\t//remove script elements\n\t\t\t// element.querySelectorAll('script').forEach(e => e.remove());\n\t\t},\n\t\tupdateUserList()\n\t\t{\n\t\t\tthis.userList = {y : [], i: [], q: [], n: []};\n\t\t\tif (this.entry.isMeeting())\n\t\t\t{\n\t\t\t\tthis.entry.getAttendees().forEach(function(user) {\n\t\t\t\t\tif (user.STATUS === 'H')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userList.y.push(user);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.userList[user.STATUS.toLowerCase()])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userList[user.STATUS.toLowerCase()].push(user);\n\t\t\t\t\t}\n\t\t\t\t}, this);\n\t\t\t}\n\t\t},\n\t\treloadPlanner()\n\t\t{\n\t\t\tconst plannerData = {\n\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\t\townerId: 0,\n\t\t\t\thostId: this.entry.getMeetingHost(),\n\t\t\t\ttype: 'user',\n\t\t\t\tentityList: this.entry.getAttendeesEntityList(),\n\t\t\t\tdateFrom: Util.formatDate(this.entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\tdateTo: Util.formatDate(this.entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\ttimezone: this.timezone,\n\t\t\t\tlocation: this.entry.getLocation(),\n\t\t\t\tentry: this.entry\n\t\t\t};\n\t\t\tthis.reloadPlannerCallback(plannerData);\n\t\t},\n\t\thandleBackgroundPulls()\n\t\t{\n\t\t\tif (this.hasPulls)\n\t\t\t{\n\t\t\t\tthis.updateParamsDebounce(this.backgroundPullEvent);\n\t\t\t\tthis.hasPulls = false;\n\t\t\t}\n\t\t},\n\t\thandleStatusUpdate(event)\n\t\t{\n\t\t\tthis.entry.data.MEETING_STATUS = event.getData().status;\n\t\t\tthis.isInvited = this.entry.isInvited();\n\t\t},\n\t\thandlePullEvent(event: BaseEvent)\n\t\t{\n\t\t\tif (event.data[0] === \"refresh_sync_status\")\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (event.data[1].fields.CAL_TYPE === 'location')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// debounce all pull events except location\n\t\t\t// update only when page is active\n\t\t\tif (BX.Calendar.Util.documentIsDisplayingNow())\n\t\t\t{\n\t\t\t\tthis.updateParamsDebounce(event);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hasPulls = true;\n\t\t\t\tthis.backgroundPullEvent = event;\n\t\t\t}\n\t\t},\n\t\tupdateParams(event: BaseEvent)\n\t\t{\n\t\t\tif (parseInt(event.data[1].fields.PARENT_ID) !== parseInt(this.params.parentId))\n\t\t\t{\n\t\t\t\tthis.reloadPlanner();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst pullData = event.data[1].fields;\n\n\t\t\tthis.name = pullData.NAME;\n\t\t\tthis.accessibility = pullData.ACCESSIBILITY;\n\n\t\t\tBX.ajax.runAction('calendar.api.calendareventviewform.getCalendarViewSliderParams', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.eventId,\n\t\t\t\t\tdateFrom: Util.formatDate(pullData.DATE_FROM),\n\t\t\t\t\ttimezoneOffset: pullData.TZ_OFFSET_FROM\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tconst newData = response.data;\n\n\t\t\t\tthis.description = newData.description;\n\t\t\t\tthis.isMeeting = newData.isMeeting;\n\t\t\t\tthis.timezone = newData.userTimezone;\n\t\t\t\tthis.timezoneHint = newData.timezoneHint;\n\t\t\t\tthis.fromToHtml = newData.fromToHtml;\n\t\t\t\tthis.meetingHost = newData.meetingHost;\n\t\t\t\tthis.meetingHostDisplayName = newData.meetingHostDisplayName;\n\t\t\t\tthis.meetingHostWorkPosition = newData.meetingHostWorkPosition;\n\t\t\t\tthis.avatarSize = newData.avatarSize;\n\t\t\t\tthis.attendees = newData.attendees;\n\t\t\t\tthis.meetingCreatorUrl = newData.meetingCreatorUrl;\n\t\t\t\tthis.meetingCreatorDisplayName = newData.meetingCreatorDisplayName;\n\t\t\t\tthis.isRemind = newData.isRemind;\n\t\t\t\tthis.isWebdavEvent = newData.isWebdavEvent;\n\t\t\t\tthis.isCrmEvent = newData.isCrmEvent;\n\t\t\t\tthis.isHighImportance = newData.isHighImportance;\n\t\t\t\tthis.isRrule = newData.isRrule;\n\t\t\t\tthis.rruleDescription = newData.rruleDescription;\n\t\t\t\tthis.detailFilesTemplate = newData.detailFilesTemplate;\n\t\t\t\tthis.isIntranetEnabled = newData.isIntranetEnabled;\n\t\t\t\tthis.isPrivate = newData.isPrivate;\n\t\t\t\tthis.location = newData.location;\n\t\t\t\tthis.canEditCalendar = newData.canEditCalendar;\n\t\t\t\tthis.showComments = newData.showComments;\n\t\t\t\tthis.filesView = this.getComponentHTML(newData.filesView);\n\t\t\t\tif (this.filesView)\n\t\t\t\t{\n\t\t\t\t\t//wait for div element created\n\t\t\t\t\tsetTimeout(() => {this.executeScripts(this.$refs.filesView)}, 1000);\n\t\t\t\t}\n\t\t\t\tthis.crmView = this.getComponentHTML(newData.crmView);\n\t\t\t\tthis.entry = new Entry({data: newData.entry, userIndex: newData.userIndex});\n\n\t\t\t\tthis.updateUserList();\n\t\t\t\tthis.reloadPlanner();\n\t\t\t});\n\t\t},\n\t\thighlightChange(element)\n\t\t{\n\t\t\tif (!element)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst savedOpacity = element.style.opacity;\n\t\t\tconst savedTransition = element.style.transition;\n\t\t\telement.style.opacity = '0.2';\n\t\t\tsetTimeout(() => {\n\t\t\t\telement.style.transition = '1s';\n\t\t\t\telement.style.opacity = savedOpacity;\n\t\t\t\tsetTimeout(() => { element.style.transition = savedTransition; }, 1000);\n\t\t\t}, 100);\n\t\t}\n\t},\n\twatch: {\n\t\tname: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightName); } },\n\t\tfromToHtml: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightFromTo); } },\n\t\tdescription: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightDescription); } },\n\t\tcrmView: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightCrmView); } },\n\t\tlocation: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightLocation); } },\n\t\taccessibility: { handler(newValue, oldValue) { this.highlightChange(this.$refs.highlightAccessibility); } },\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-alert ui-alert-danger ui-alert-icon-danger ui-alert-text-center\" v-if=\"!params.eventExists\">\n\t\t\t<span class=\"ui-alert-message\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_EVENT_NOT_FOUND')}}</span>\n\t\t</div>\n\t\t<div class=\"calendar-slider-calendar-wrap\" v-else>\n\t\t\t<div class=\"calendar-slider-header\">\n\t\t\t\t<div class=\"calendar-head-area\">\n\t\t\t\t\t<div class=\"calendar-head-area-inner\">\n\t\t\t\t\t\t<div class=\"calendar-head-area-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-event-invite-counter calendar-event-invite-counter-big\" v-if=\"isInvited\">1</span>\n\t\t\t\t\t\t\t<span :id=\"id + '_title'\" class=\"calendar-head-area-title-name\" ref=\"highlightName\">{{name}}</span>\n\t\t\t\t\t\t\t<span :id=\"id + '_copy_url_btn'\" class=\"calendar-page-link-btn\" :title=\"$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COPY_LINK')\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"calendar-slider-workarea\">\n\t\t\t\t<div class=\"calendar-slider-sidebar\">\n\t\t\t\t\t<div :id=\"id + '_time_wrap'\" class=\"calendar-slider-sidebar-head\" :title=\"timezoneHint\" ref=\"highlightFromTo\">\n\t\t\t\t\t\t<div :id=\"id + '_time_inner_wrap'\" class=\"calendar-slider-sidebar-head-title\">{{fromToHtml}}\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-head-timezone\" :title=\"timezoneHint\" v-if=\"timezoneHint\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-head-timezone-icon\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div :id=\"id + '_sidebar_inner'\" class=\"calendar-slider-sidebar-inner\">\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-videocall\" style=\"display: none;\"></div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout calendar-slider-sidebar-user\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-top calendar-slider-sidebar-user-top calendar-slider-sidebar-border-bottom\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-left-side\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-name\">\n\t\t\t\t\t\t\t\t\t\t<span v-if=\"isMeeting\">{{$Bitrix.Loc.getMessage('EC_VIEW_ATTENDEES_TITLE')}}</span>\n\t\t\t\t\t\t\t\t\t\t<span v-else>{{$Bitrix.Loc.getMessage('EC_VIEW_HOST')}}</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-right-side\" :id=\"id + '_add_link'\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-property calendar-slider-sidebar-link-user\">\n\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_ATTENDEES_ADD')}}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-main\">\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block\">\n\t\t\t\t\t\t\t\t<div v-if=\"isMeeting\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\">\n\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"meetingHost\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-top\"></div>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container\" v-for=\"att in attendees.y.slice(0,10)\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\" v-if=\"meetingHost.ID != att.ID\">\n\t\t\t\t\t\t\t\t\t\t\t<a :href=\"att.URL\">\n\t\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"att\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row calendar-slider-sidebar-border-bottom\" v-if=\"meetingCreatorUrl\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_CREATED_BY')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-value\">\n\t\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingCreatorUrl\" class=\"calendar-slider-sidebar-user-info-name\">{{meetingCreatorDisplayName}}</a>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card\" v-else>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\">\n\t\t\t\t\t\t\t\t\t\t\t<UserAvatar :user=\"meetingHost\" :avatarSize=\"avatarSize\"/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-icon-bottom\"></div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info\">\n\t\t\t\t\t\t\t\t\t\t<a :href=\"meetingHost.URL\" class=\"calendar-slider-sidebar-user-info-name\">{{meetingHostDisplayName}}</a>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info-status\" v-if=\"meetingHostWorkPosition\">{{meetingHostWorkPosition}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social calendar-slider-sidebar-border-bottom\" v-if=\"isMeeting\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-left\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesY\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesY, userList.y)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.y.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_Y')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesQ\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesQ, userList.q)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.q.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_Q')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-right\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" style=\"visibility: hidden;\" ref=\"attendeesI\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesI, userList.i)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.i.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_I')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-social-item\" ref=\"attendeesN\"\n\t\t\t\t\t\t\t\t\t\t @click=\"showUserListPopupCallback($refs.attendeesN, userList.n)\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-number\">\n\t\t\t\t\t\t\t\t\t\t\t{{attendees.n.length}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-user-social-name calendar-slider-sidebar-color-grey-opacity\">\n\t\t\t\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('EC_VIEW_STATUS_TITLE_N')}}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-layout-main calendar-slider-sidebar-border-bottom calendar-slider-sidebar-remind\" v-if=\"isRemind\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_REMINDERS')}}:</div>\n\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-remind-link calendar-slider-sidebar-string-value\" :id=\"id + '_add_reminder_link'\" style=\"display: none;\">\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-remind-link-name\">{{$Bitrix.Loc.getMessage('EC_VIEW_REMINDER_ADD')}}</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-remind-wrap\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-row calendar-slider-sidebar-border-bottom\" v-if=\"isRrule\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-name\">{{$Bitrix.Loc.getMessage('EC_T_REPEAT')}}:</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-string-value\">{{rruleDescription}}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-slider-sidebar-copy\" style=\"display: none;\">\n\t\t\t\t\t\t<span class=\"calendar-slider-sidebar-copy-link\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COPY_LINK')}}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-slider-content\">\n\t\t\t\t\t<div class=\"calendar-slider-detail calendar-slider-detail-panel\">\n\t\t\t\t\t\t<div class=\"calendar-slider-detail-info\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-header\">\n\t\t\t\t\t\t\t\t<div id=\"calendar-slider-detail-important-button\" class=\"calendar-slider-info-panel-important mutable\" v-if=\"isHighImportance\">\n\t\t\t\t\t\t\t\t\t<span class=\"if-not-no\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_IMPORTANT_EVENT')}}</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-subtitle-status\" style=\"visibility: hidden\">\n\t\t\t\t\t\t\t\t\t#calendar-slider-detail-subtitle-status#\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-slider-detail-status-below-name\"></span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-content\">\n\t\t\t\t\t\t\t\t<div id=\"calendar-slider-detail-description\" class=\"calendar-slider-detail-description\" v-if=\"description\"\n\t\t\t\t\t\t\t\t\t ref=\"highlightDescription\" v-html=\"description\">\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-files\" :id=\"id + '_' + eventId + '_files_wrap'\" v-if=\"isWebdavEvent\">\n\t\t\t\t\t\t\t\t\t<div v-html=\"filesView\" ref=\"filesView\"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-timeline hidden\" :id=\"id + '_view_planner_wrap'\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-view-planner-wrap\"></div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"isCrmEvent\" ref=\"highlightCrmView\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_CRM_TITLE')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value calendar-slider-detail-option-crm\">\n\t\t\t\t\t\t\t\t\t\t\t<div v-html=\"crmView\"></div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"accessibility && isIntranetEnabled\" ref=\"highlightAccessibility\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_ACCESSIBILITY_TITLE')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">{{$Bitrix.Loc.getMessage('EC_ACCESSIBILITY_' + accessibility.toUpperCase())}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-block\" v-if=\"isPrivate && isIntranetEnabled\">\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-name\">{{$Bitrix.Loc.getMessage('EC_EDDIV_SPECIAL_NOTES')}}:</div>\n\t\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">{{$Bitrix.Loc.getMessage('EC_PRIVATE_EVENT')}}</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place\" v-if=\"location\" ref=\"highlightLocation\">\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place-title\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_LOCATION')}}</div>\n\t\t\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-place-name\">{{location}}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"calendar-slider-detail-buttons\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-slider-view-buttonset calendar-slider-view-button-more-right\">\n\t\t\t\t\t\t\t\t\t<div :id=\"id + '_buttonset'\" class=\"calendar-slider-view-buttonset-inner\">\n\t\t\t\t\t\t\t\t\t\t<input type=\"hidden\" :id=\"id + '_current_status'\" :value=\"curUserStatus\"/>\n\t\t\t\t\t\t\t\t\t\t<span :id=\"id + '_status_buttonset'\"></span>\n\n\t\t\t\t\t\t\t\t\t\t<div v-if=\"canEditCalendar\">\n\t\t\t\t\t\t\t\t\t\t\t<button :id=\"id + '_but_edit'\" class=\"ui-btn ui-btn-light-border\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_EDIT')}}</button>\n\t\t\t\t\t\t\t\t\t\t\t<button :id=\"id + '_but_del'\" class=\"ui-btn ui-btn-light-border\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_DEL')}}</button>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class=\"calendar-slider-comments\" v-if=\"showComments\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-comments-title\">{{$Bitrix.Loc.getMessage('EC_VIEW_SLIDER_COMMENTS')}}</div>\n\t\t\t\t\t\t\t<div class=\"calendar-slider-comments-main\" :id=\"id + 'comments-cont'\" style=\"opacity: 1;\">\n\t\t\t\t\t\t\t\t<div ref=\"commentsView\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","\"use strict\";\n\nimport { Util } from 'calendar.util';\nimport { Type, Event, Loc, Dom, Runtime, Text, Tag } from 'main.core';\nimport { Entry, EntryManager } from 'calendar.entry';\nimport { MeetingStatusControl } from 'calendar.controls';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Planner } from 'calendar.planner';\nimport { ControlButton } from 'intranet.control-button';\nimport { BitrixVue } from 'ui.vue3';\nimport { ViewEventSlider } from './view-event-slider';\nimport { CalendarSection } from 'calendar.sectionmanager';\n\nexport class EventViewForm {\n\tpermissions = {};\n\tname = 'eventviewform';\n\tuid = null;\n\tDOM = {};\n\tRELOAD_REQUESTED = 'RELOAD_REQUESTED';\n\tRELOAD_FINISHED = 'RELOAD_FINISHED';\n\treloadStatus = null;\n\tentityChanged = false;\n\tLOAD_DELAY = 500;\n\tapp = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId || 0;\n\t\tthis.userId = options.userId || 0;\n\t\tthis.zIndex = 3100;\n\t\tthis.entryId = options.entryId || null;\n\t\tthis.calendarContext = options.calendarContext || null;\n\t\tthis.entryDateFrom = options.entryDateFrom || null;\n\t\tthis.timezoneOffset = options.timezoneOffset || null;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.sliderOnLoad = this.onLoadSlider.bind(this);\n\t\tthis.showUserListPopupBind = this.showUserListPopup.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t\tthis.destroyBind = this.destroy.bind(this);\n\n\t\tthis.loadPlannerDataDebounce = Runtime.debounce(this.loadPlannerData, this.LOAD_DELAY, this);\n\n\t\tthis.pullEventList = new Set();\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.slider = slider;\n\t\tEventEmitter.subscribe(slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tEventEmitter.subscribe(slider, \"SidePanel.Slider:onCloseComplete\", this.destroyBind);\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tdestroy()\n\t{\n\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onCloseComplete\", this.destroyBind);\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\n\t\tif (this.app)\n\t\t{\n\t\t\tthis.app.unmount();\n\t\t}\n\n\t\tif (this.intranetControllButton && this.intranetControllButton.destroy)\n\t\t{\n\t\t\tthis.intranetControllButton.destroy();\n\t\t}\n\n\t\tUtil.closeAllPopups();\n\t\tthis.opened = false;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst data = event.getData();\n\t\tconst slider = data[0]?.slider;\n\n\t\tthis.DOM.content = slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get(\"sliderContent\"));\n\t\tif (!Type.isNull(this.uid))\n\t\t{\n\t\t\tthis.initControls(this.uid);\n\t\t}\n\n\t\tthis.reloadStatus = this.RELOAD_FINISHED;\n\t}\n\n\tloadComponentAssets(json)\n\t{\n\t\tif (!json)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tlet assets = JSON.parse(json).data.assets;\n\t\tlet promise = new Promise(function(resolve, reject) {\n\t\t\tlet css = assets.css;\n\t\t\tBX.load(css, function() {\n\t\t\t\tBX.loadScript(assets.js, resolve);\n\t\t\t});\n\t\t});\n\t\tpromise.then(function() {\n\t\t\tlet strings = assets.string;\n\t\t\tlet stringAsset = strings.join('\\n');\n\t\t\tBX.html(document.head, stringAsset, { useAdjacentHTML: true });\n\t\t});\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendareventviewform.getCalendarViewSliderParams', {\n\t\t\t\tanalyticsLabel: {calendarAction: 'view_event', formType: 'full'},\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tdateFrom: Util.formatDate(this.entryDateFrom),\n\t\t\t\t\ttimezoneOffset: this.timezoneOffset\n\t\t\t\t}\n\t\t\t}).then(response => {\n\t\t\t\tconst viewEventSliderRoot = document.createElement('div');\n\n\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t{\n\t\t\t\t\tlet params = response.data;\n\t\t\t\t\tparams.eventExists = !!(params.entry.ID);\n\n\t\t\t\t\t//load components' css and js\n\t\t\t\t\tif (params.filesView)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadComponentAssets(params.filesView);\n\t\t\t\t\t}\n\t\t\t\t\tif (params.crmView)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadComponentAssets(params.crmView);\n\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendareventviewform.getCrmView', {\n\t\t\t\t\t\t\tdata: { signedEvent: params.signedEvent }\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t//set vue component to slider\n\t\t\t\t\tthis.app = BitrixVue.createApp(ViewEventSlider, {\n\t\t\t\t\t\tparams: params,\n\t\t\t\t\t\treloadPlannerCallback: this.loadPlannerDataDebounce,\n\t\t\t\t\t\tshowUserListPopupCallback: this.showUserListPopupBind,\n\t\t\t\t\t});\n\t\t\t\t\tthis.app.mount(viewEventSliderRoot);\n\n\t\t\t\t\tslider.sliderContent = viewEventSliderRoot;\n\n\t\t\t\t\t//set local params\n\t\t\t\t\tthis.userId = params.userId;\n\t\t\t\t\tthis.uid = params.id;\n\t\t\t\t\tthis.entryUrl = params.entryUrl;\n\t\t\t\t\tthis.userTimezone = params.userTimezone;\n\t\t\t\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat;\n\t\t\t\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\t\t\t\t\tif (this.planner && !this.plannerFeatureEnabled)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.planner.lock();\n\t\t\t\t\t}\n\t\t\t\t\tthis.handleEntryData(params.entry, params.userIndex, params.section);\n\t\t\t\t}\n\n\t\t\t\tresolve(viewEventSliderRoot);\n\t\t\t},\n\t\t\tresponse => {\n\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t{\n\t\t\t\t\tslider.getData().set(\n\t\t\t\t\t\t\"sliderContent\",\n\t\t\t\t\t\t'<div class=\"calendar-slider-alert\">'\n\t\t\t\t\t\t+ '<div class=\"calendar-slider-alert-inner\">'\n\t\t\t\t\t\t+ '<div class=\"calendar-slider-alert-img\"></div>'\n\t\t\t\t\t\t+ '<h1 class=\"calendar-slider-alert-text\">' + Text.encode(response.errors[0].message) + '</h1>'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t\t+ '</div>'\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.displayError(response.errors);\n\t\t\t\tresolve(response);\n\t\t\t})\n\t\t});\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.buttonSet = this.DOM.content.querySelector(`#${uid}_buttonset`);\n\t\tthis.DOM.editButton = this.DOM.content.querySelector(`#${uid}_but_edit`);\n\t\tthis.DOM.delButton = this.DOM.content.querySelector(`#${uid}_but_del`);\n\t\tthis.DOM.sidebarInner = this.DOM.content.querySelector(`#${uid}_sidebar_inner`);\n\n\t\tif (this.DOM.buttonSet)\n\t\t{\n\t\t\tthis.initPlannerControl(uid);\n\t\t}\n\n\t\tconst innerTimeWrap = this.DOM.content.querySelector(`#${uid}_time_inner_wrap`);\n\t\tif (Type.isElementNode(innerTimeWrap) && innerTimeWrap.offsetHeight > 50)\n\t\t{\n\t\t\tDom.addClass(this.DOM.content.querySelector(`#${uid}_time_wrap`), 'calendar-slider-sidebar-head-long-time');\n\t\t}\n\n\t\tif (this.canDo(this.entry, 'edit') && this.DOM.editButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.editButton, 'click', () => {\n\t\t\t\tthis.BX.SidePanel.Instance.close(false, function ()\n\t\t\t\t{\n\t\t\t\t\tEntryManager.openEditSlider({\n\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\tuserId: this.userId\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.editButton);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\t// Reminder\n\t\t\tthis.DOM.reminderWrap = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-remind-wrap');\n\t\t\tif (Type.isDomNode(this.DOM.reminderWrap))\n\t\t\t{\n\t\t\t\tDom.clean(this.DOM.reminderWrap);\n\t\t\t\tlet viewMode = !this.canDo(this.entry, 'edit')\n\t\t\t\t\t&& this.entry.getCurrentStatus() === false;\n\n\t\t\t\tthis.reminderControl = new this.BX.Calendar.Controls.Reminder({\n\t\t\t\t\twrap: this.DOM.reminderWrap,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tviewMode: viewMode\n\t\t\t\t});\n\t\t\t\tthis.reminderControl.setValue(this.entry.getReminders());\n\n\t\t\t\tif (!viewMode)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderControl.subscribe('onChange', (event) => {\n\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\treminders: this.reminderValues\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\t\tif (this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tEvent.bind(this.DOM.delButton, 'click', ()=>{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry, this.calendarContext);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.delButton);\n\t\t}\n\n\t\tthis.BX.viewElementBind(\n\t\t\tuid + '_' + this.entry.id + '_files_wrap',\n\t\t\t{\n\t\t\t\tshowTitle: true\n\t\t\t},\n\t\t\tfunction(node)\n\t\t\t{\n\t\t\t\treturn Type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t}\n\t\t);\n\n\t\tif (this.entry && this.entry.isMeeting())\n\t\t{\n\t\t\tthis.initAcceptMeetingControl(uid);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tthis.DOM.copyButton = this.DOM.content.querySelector(`#${uid}_copy_url_btn`);\n\t\tif (this.DOM.copyButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.copyButton, 'click', this.copyEventUrl.bind(this));\n\t\t}\n\n\t\t// Init \"Videocall\" control\n\t\tthis.DOM.videoCall = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-videocall');\n\t\tDom.clean(this.DOM.videoCall);\n\t\tif (\n\t\t\tType.isElementNode(this.DOM.videoCall)\n\t\t\t&& this.entry\n\t\t\t&& this.entry.data['PARENT_ID']\n\t\t\t&& this.entry.data['EVENT_TYPE'] === '#shared#'\n\t\t)\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = '';\n\t\t\tthis.conferenceButton = Tag.render`\n\t\t\t\t<div class=\"ui-btn-split ui-btn-icon-camera-blue intranet-control-btn ui-btn-light-border ui-btn-icon-inline\" style=\"width: 100%\">\n\t\t\t\t\t<button class=\"ui-btn-main calendar-slider-conference-button\">\n\t\t\t\t\t\t${Loc.getMessage('EC_CALENDAR_CONFERENCE')}\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tEvent.bind(this.conferenceButton, 'click', this.handleConferenceButtonClick.bind(this));\n\n\t\t\tDom.append(this.conferenceButton, this.DOM.videoCall);\n\t\t}\n\t\telse if (\n\t\t\tBX?.Intranet?.ControlButton\n\t\t\t&& Type.isElementNode(this.DOM.videoCall)\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = '';\n\t\t\tthis.intranetControllButton = new ControlButton({\n\t\t\t\tcontainer: this.DOM.videoCall,\n\t\t\t\tentityType: 'calendar_event',\n\t\t\t\tentityId: this.entry.parentId,\n\t\t\t\tentityData: {\n\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from),\n\t\t\t\t\tparentId: this.entry.parentId\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tformType: 'full'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = 'none';\n\t\t}\n\t}\n\n\thandleEntryData(entryData, userIndex, sectionData)\n\t{\n\t\tthis.entry = new Entry({data: entryData, userIndex: userIndex});\n\t\tthis.section = new CalendarSection(sectionData);\n\n\t\tif (Type.isPlainObject(sectionData))\n\t\t{\n\t\t\tthis.permissions = sectionData.PERM;\n\t\t}\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tinitPlannerControl(uid)\n\t{\n\t\tthis.plannerId = uid + '_view_slider_planner';\n\t\tthis.DOM.plannerWrapOuter = this.DOM.content.querySelector(`.calendar-slider-detail-timeline`);\n\t\tthis.DOM.plannerWrap = this.DOM.plannerWrapOuter.querySelector(`.calendar-view-planner-wrap`);\n\t\tDom.clean(this.DOM.plannerWrap);\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerWrap.offsetWidth),\n\t\t\tsolidStatus: true,\n\t\t\treadonly: true,\n\t\t\tlocked: !this.plannerFeatureEnabled,\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat\n\t\t});\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.DOM.plannerWrapOuter)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.plannerWrapOuter, 'hidden');\n\t\t\t}\n\t\t}, 500);\n\n\t\tconst plannerData = {\n\t\t\tentryId: this.entry.id || 0,\n\t\t\tentryLocation: this.entry.data.LOCATION || '',\n\t\t\townerId: this.ownerId,\n\t\t\thostId: this.entry.getMeetingHost(),\n\t\t\ttype: this.type,\n\t\t\tentityList: this.entry.getAttendeesEntityList(),\n\t\t\tdateFrom: Util.formatDate(this.entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tdateTo: Util.formatDate(this.entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: this.userTimezone,\n\t\t\tlocation: this.entry.getLocation(),\n\t\t\tentry: this.entry\n\t\t};\n\n\t\tthis.loadPlannerDataDebounce(plannerData);\n\t}\n\n\tshowUserListPopup(node, userList)\n\t{\n\t\tif (this.userListPopup)\n\t\t{\n\t\t\tthis.userListPopup.close();\n\t\t}\n\n\t\tif (userList && userList.length)\n\t\t{\n\t\t\tthis.DOM.userListPopupWrap = this.BX.create('DIV', {props: {className: 'calendar-user-list-popup-block'}});\n\t\t\tuserList.forEach(function (user)\n\t\t\t{\n\t\t\t\tlet userAvatar = `\n\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user\"  style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t<i></i>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tif (user.AVATAR && user.AVATAR !== '/bitrix/images/1.gif')\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `<img src=\"${user.AVATAR}\" width=\"34\" height=\"34\">`;\n\t\t\t\t}\n\t\t\t\tif (user.EMAIL_USER)\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon ui-icon-common-user-mail\" style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\tif (user.SHARING_USER)\n\t\t\t\t{\n\t\t\t\t\tuserAvatar = `\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-user ui-icon-common-user-sharing\" style=\"width: 34px; height: 34px;\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t}\n\n\t\t\t\tconst userWrap = Tag.render`\n\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card\">\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-avatar\">\n\t\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-block-item\">\n\t\t\t\t\t\t\t\t${userAvatar}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-slider-sidebar-user-info\">\n\t\t\t\t\t\t\t<a href=\"${user.URL ? user.URL : '#'}\" class=\"calendar-slider-sidebar-user-info-name\">${user.DISPLAY_NAME}</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t\t\tthis.DOM.userListPopupWrap.append(userWrap);\n\t\t\t}, this);\n\n\t\t\tthis.userListPopup = this.BX.PopupWindowManager.create(\"user-list-popup-\" + Math.random(), node, {\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.DOM.userListPopupWrap,\n\t\t\t\tclassName: 'calendar-user-list-popup',\n\t\t\t\tzIndex: 4000\n\t\t\t});\n\n\t\t\tthis.userListPopup.setAngle({offset: 36});\n\t\t\tthis.userListPopup.show();\n\t\t\tthis.BX.addCustomEvent(this.userListPopup, 'onPopupClose', ()=>{this.userListPopup.destroy();});\n\t\t}\n\t}\n\n\tinitAcceptMeetingControl(uid)\n\t{\n\t\tthis.DOM.statusButtonset = this.DOM.content.querySelector(`#${uid}_status_buttonset`);\n\t\tthis.DOM.statusButtonset.style.marginRight = '12px';\n\n\t\tif (this.entry.getCurrentStatus() === 'H' || this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tDom.remove(this.DOM.statusButtonset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.statusControl = new MeetingStatusControl(\n\t\t\t{\n\t\t\t\twrap: this.DOM.statusButtonset,\n\t\t\t\tcurrentStatus: this.DOM.content.querySelector(`#${uid}_current_status`).value || this.entry.getCurrentStatus()\n\t\t\t});\n\n\t\t\tthis.statusControl.subscribe('onSetStatus', (event) => {\n\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, event.getData().status)\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tthis.statusControl.setStatus(this.entry.getCurrentStatus(), false);\n\t\t\t\t\t\t\tthis.statusControl.updateStatus();\n\t\t\t\t\t\t\tEventEmitter.emit(`MeetingStatusControl_${uid}:onSetStatus`, event);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcopyEventUrl()\n\t{\n\t\tif(!this.entryUrl || !this.BX.clipboard.copy(this.entryUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\tlet popup = new this.BX.PopupWindow(\n\t\t\t'calendar_clipboard_copy',\n\t\t\tthis.DOM.copyButton,\n\t\t\t{\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_TIP_TEMPLATE_LINK_COPIED'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tcachable: false\n\t\t\t}\n\t\t);\n\t\tpopup.show();\n\n\t\tlet timeoutId;\n\t\twhile(timeoutId = this.timeoutIds.pop())\n\t\t{\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t\tthis.timeoutIds.push(setTimeout(function(){popup.close();}, 1500));\n\t}\n\n\tdisplayError(errors = [])\n\t{\n\t\t//errors\n\t}\n\n\tcanDo(entry, action)\n\t{\n\t\tif ((action === 'edit' || action === 'delete'))\n\t\t{\n\t\t\tif (entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.section.canDo('edit');\n\t\t}\n\n\t\tif ((action === 'view'))\n\t\t{\n\t\t\treturn this.permissions.view_full;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tloadPlannerData(plannerData)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\tdata: plannerData\n\t\t\t}).then((response) => {\n\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t);\n\n\t\t\t\t\tthis.planner.updateSelector(\n\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\tplannerData.entry.from,\n\t\t\t\t\t\t\tplannerData.entry.userTimezoneOffsetFrom,\n\t\t\t\t\t\t\tplannerData.entry.fullDay),\n\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\tplannerData.entry.to,\n\t\t\t\t\t\t\tplannerData.entry.userTimezoneOffsetTo,\n\t\t\t\t\t\t\tplannerData.entry.fullDay\n\t\t\t\t\t\t),\n\t\t\t\t\t\tplannerData.entry.fullDay\n\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t\t(response) => {resolve(response);}\n\t\t\t);\n\t\t});\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(\n\t\t\t(\n\t\t\t\te.keyCode === Util.getKeyCode('delete')\n\t\t\t\t// || e.keyCode === Util.getKeyCode('backspace')\n\t\t\t)\n\t\t\t&& this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tconst target = event.target || event.srcElement;\n\t\t\tconst tagName = Type.isElementNode(target) ? target.tagName.toLowerCase() : null;\n\t\t\tif (tagName && !['input', 'textarea'].includes(tagName))\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\t\tthis.BX.SidePanel.Instance.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry, this.calendarContext);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleEntityChanges()\n\t{\n\t\tthis.entityChanged = true;\n\t}\n\n\thandleConferenceButtonClick()\n\t{\n\t\tif (this.conferenceButton)\n\t\t{\n\t\t\tDom.addClass(this.conferenceButton, 'ui-btn-wait');\n\t\t}\n\n\t\tthis.getConferenceChatId();\n\n\t\tif (this.conferenceButton)\n\t\t{\n\t\t\tDom.removeClass(this.conferenceButton, 'ui-btn-wait');\n\t\t}\n\t}\n\n\tgetConferenceChatId()\n\t{\n\t\treturn this.BX.ajax.runAction('calendar.api.calendarajax.getConferenceChatId', {\n\t\t\tdata: {\n\t\t\t\teventId: this.entry.data['PARENT_ID'],\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tif (top.window.BXIM && response.data && response.data.chatId)\n\t\t\t\t{\n\t\t\t\t\ttop.BXIM.openMessenger('chat' + parseInt(response.data.chatId));\n\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\talert(Loc.getMessage('EC_CONFERENCE_ERROR'));\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t);\n\t}\n}\n"],"names":["UserAvatar","name","props","avatarSize","Number","user","Object","template","ViewEventSlider","components","data","id","params","eventId","parseInt","description","timezoneHint","timezone","userTimezone","fromToHtml","isMeeting","meetingHost","meetingHostDisplayName","meetingHostWorkPosition","attendees","userList","y","i","q","n","curUserStatus","meetingCreatorUrl","meetingCreatorDisplayName","isRemind","isWebdavEvent","isCrmEvent","isHighImportance","isRrule","rruleDescription","detailFilesTemplate","accessibility","isIntranetEnabled","isPrivate","location","canEditCalendar","showComments","filesView","getComponentHTML","crmView","entry","Entry","userIndex","isInvited","updateParamsDebounce","Runtime","debounce","updateParams","hasPulls","backgroundPullEvent","created","mounted","eventExists","updateUserList","loadCommentsView","executeScripts","$refs","Event","bind","document","handleBackgroundPulls","beforeMount","EventEmitter","subscribe","handlePullEvent","handleStatusUpdate","beforeUnmount","unsubscribe","methods","json","JSON","parse","html","BX","ajax","runAction","signedEvent","then","response","commentsElement","createElement","innerHTML","commentsView","appendChild","element","scripts","querySelectorAll","script","s","parentNode","remove","getAttendees","forEach","STATUS","push","toLowerCase","reloadPlanner","plannerData","entryId","entryLocation","LOCATION","ownerId","hostId","getMeetingHost","type","entityList","getAttendeesEntityList","dateFrom","Util","formatDate","from","getTime","getDayLength","dateTo","to","getLocation","reloadPlannerCallback","event","MEETING_STATUS","getData","status","fields","CAL_TYPE","Calendar","documentIsDisplayingNow","PARENT_ID","parentId","pullData","NAME","ACCESSIBILITY","DATE_FROM","timezoneOffset","TZ_OFFSET_FROM","newData","setTimeout","highlightChange","savedOpacity","style","opacity","savedTransition","transition","watch","handler","newValue","oldValue","highlightName","highlightFromTo","highlightDescription","highlightCrmView","highlightLocation","highlightAccessibility","EventViewForm","constructor","options","permissions","uid","DOM","RELOAD_REQUESTED","RELOAD_FINISHED","reloadStatus","entityChanged","LOAD_DELAY","app","userId","zIndex","calendarContext","entryDateFrom","getBX","sliderOnLoad","onLoadSlider","showUserListPopupBind","showUserListPopup","keyHandlerBind","keyHandler","destroyBind","destroy","loadPlannerDataDebounce","loadPlannerData","pullEventList","Set","initInSlider","slider","promiseResolve","createContent","Type","isFunction","opened","isOpened","unbind","unmount","intranetControllButton","closeAllPopups","BaseEvent","content","layout","get","isNull","initControls","loadComponentAssets","assets","promise","Promise","resolve","reject","css","load","loadScript","js","strings","string","stringAsset","join","head","useAdjacentHTML","analyticsLabel","calendarAction","formType","viewEventSliderRoot","isOpen","ID","BitrixVue","createApp","showUserListPopupCallback","mount","sliderContent","entryUrl","dayOfWeekMonthFormat","plannerFeatureEnabled","planner","lock","handleEntryData","section","errors","length","set","Text","encode","message","displayError","title","querySelector","buttonSet","editButton","delButton","sidebarInner","initPlannerControl","innerTimeWrap","isElementNode","offsetHeight","Dom","addClass","canDo","SidePanel","Instance","close","EntryManager","openEditSlider","reminderWrap","isDomNode","clean","viewMode","getCurrentStatus","reminderControl","Controls","Reminder","wrap","setValue","getReminders","handleEntityChanges","reminderValues","values","reminders","items","removeClass","subscribeOnce","deleteEntry","viewElementBind","showTitle","node","getAttribute","initAcceptMeetingControl","copyButton","copyEventUrl","videoCall","display","conferenceButton","Tag","render","Loc","getMessage","handleConferenceButtonClick","append","Intranet","ControlButton","container","entityType","entityId","entityData","entryData","sectionData","CalendarSection","isPlainObject","PERM","registerEntrySlider","plannerId","plannerWrapOuter","plannerWrap","Planner","minWidth","offsetWidth","solidStatus","readonly","locked","show","showLoader","userListPopup","userListPopupWrap","create","className","userAvatar","AVATAR","EMAIL_USER","SHARING_USER","userWrap","URL","DISPLAY_NAME","PopupWindowManager","Math","random","autoHide","closeByEsc","offsetTop","offsetLeft","resizable","lightShadow","setAngle","offset","addCustomEvent","statusButtonset","marginRight","statusControl","MeetingStatusControl","currentStatus","value","setMeetingStatus","setStatus","updateStatus","emit","clipboard","copy","timeoutIds","popup","PopupWindow","darkMode","angle","cachable","timeoutId","pop","clearTimeout","action","isResourcebooking","view_full","plannerIsShown","hasClass","hideLoader","update","entries","updateSelector","adjustDateForTimezoneOffset","userTimezoneOffsetFrom","fullDay","userTimezoneOffsetTo","e","keyCode","getKeyCode","target","srcElement","tagName","includes","getConferenceChatId","top","window","BXIM","chatId","openMessenger","alert"],"mappings":"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"}