{"version":3,"file":"eventviewform.bundle.js","sources":["../src/eventviewform.js"],"sourcesContent":["\"use strict\";\n\nimport { Util } from 'calendar.util';\nimport { Type, Event, Loc, Tag, Dom, Runtime } from 'main.core';\nimport { Entry, EntryManager } from 'calendar.entry';\nimport { MeetingStatusControl, Reminder } from 'calendar.controls';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { Planner } from 'calendar.planner';\nimport { ControlButton } from 'intranet.control-button';\n\nexport class EventViewForm {\n\tpermissions = {};\n\tname = 'eventviewform';\n\tuid = null;\n\tDOM = {};\n\tRELOAD_REQUESTED = 'RELOAD_REQUESTED';\n\tRELOAD_FINISHED = 'RELOAD_FINISHED';\n\treloadStatus = null;\n\tentityChanged = false;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId || 0;\n\t\tthis.userId = options.userId || 0;\n\t\tthis.zIndex = 3100;\n\t\tthis.entryId = options.entryId || null;\n\t\tthis.entryDateFrom = options.entryDateFrom || null;\n\t\tthis.timezoneOffset = options.timezoneOffset || null;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.sliderOnLoad = this.onLoadSlider.bind(this);\n\t\tthis.handlePullBind = this.handlePull.bind(this);\n\t\tthis.keyHandlerBind = this.keyHandler.bind(this);\n\t\tthis.destroyBind = this.destroy.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.slider = slider;\n\t\tEventEmitter.subscribe(slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tEventEmitter.subscribe(slider, \"SidePanel.Slider:onCloseComplete\", this.destroyBind);\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBind);\n\t\tEventEmitter.subscribe('onPullEvent-calendar', this.handlePullBind);\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\tdestroy()\n\t{\n\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onCloseComplete\", this.destroyBind);\n\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\n\t\tif (this.intranetControllButton && this.intranetControllButton.destroy)\n\t\t{\n\t\t\tthis.intranetControllButton.destroy();\n\t\t}\n\n\t\t// this.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\tUtil.closeAllPopups();\n\t\tthis.opened = false;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst data = event.getData();\n\t\tconst slider = data[0]?.slider;\n\n\t\tthis.DOM.content = slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get(\"sliderContent\"));\n\t\tif (!Type.isNull(this.uid))\n\t\t{\n\t\t\tthis.initControls(this.uid);\n\t\t}\n\n\t\tthis.reloadStatus = this.RELOAD_FINISHED;\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getViewEventSlider', {\n\t\t\t\tanalyticsLabel: {calendarAction: 'view_event', formType: 'full'},\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tdateFrom: Util.formatDate(this.entryDateFrom),\n\t\t\t\t\ttimezoneOffset: this.timezoneOffset\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\t\tlet html = '';\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.userId = params.userId;\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.entryUrl = params.entryUrl;\n\t\t\t\t\t\tthis.userTimezone = params.userTimezone;\n\t\t\t\t\t\tthis.handleEntryData(params.entry, params.userIndex, params.section);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(html);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.displayError(response.errors);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.buttonSet = this.DOM.content.querySelector(`#${uid}_buttonset`);\n\t\tthis.DOM.editButton = this.DOM.content.querySelector(`#${uid}_but_edit`);\n\t\tthis.DOM.delButton = this.DOM.content.querySelector(`#${uid}_but_del`);\n\t\tthis.DOM.sidebarInner = this.DOM.content.querySelector(`#${uid}_sidebar_inner`);\n\n\t\tif (this.DOM.buttonSet)\n\t\t{\n\t\t\tthis.initPlannerControl(uid);\n\t\t\tthis.initUserListControl(uid);\n\t\t}\n\n\t\tconst innerTimeWrap = this.DOM.content.querySelector(`#${uid}_time_inner_wrap`);\n\t\tif (Type.isElementNode(innerTimeWrap) && innerTimeWrap.offsetHeight > 50)\n\t\t{\n\t\t\tDom.addClass(this.DOM.content.querySelector(`#${uid}_time_wrap`), 'calendar-slider-sidebar-head-long-time');\n\t\t}\n\n\t\tif (this.canDo(this.entry, 'edit') && this.DOM.editButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.editButton, 'click', () => {\n\t\t\t\tthis.BX.SidePanel.Instance.close(false, function ()\n\t\t\t\t{\n\t\t\t\t\tEntryManager.openEditSlider({\n\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\tuserId: this.userId\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.editButton);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\t// Reminder\n\t\t\tthis.DOM.reminderWrap = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-remind-wrap');\n\t\t\tif (Type.isDomNode(this.DOM.reminderWrap))\n\t\t\t{\n\t\t\t\tlet viewMode = !this.canDo(this.entry, 'edit')\n\t\t\t\t\t&& this.entry.getCurrentStatus() === false;\n\n\t\t\t\tthis.reminderControl = new this.BX.Calendar.Controls.Reminder({\n\t\t\t\t\twrap: this.DOM.reminderWrap,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tviewMode: viewMode\n\t\t\t\t});\n\t\t\t\tthis.reminderControl.setValue(this.entry.getReminders());\n\n\t\t\t\tif (!viewMode)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderControl.subscribe('onChange', (event) => {\n\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\treminders: this.reminderValues\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\t\tif (this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tEvent.bind(this.DOM.delButton, 'click', ()=>{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\t\tthis.BX.SidePanel.Instance.hide();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.delButton);\n\t\t}\n\n\t\tthis.BX.viewElementBind(\n\t\t\tuid + '_' + this.entry.id + '_files_wrap',\n\t\t\t{\n\t\t\t\tshowTitle: true\n\t\t\t},\n\t\t\tfunction(node)\n\t\t\t{\n\t\t\t\treturn Type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t}\n\t\t);\n\n\t\tif (this.entry && this.entry.isMeeting())\n\t\t{\n\t\t\tthis.initAcceptMeetingControl(uid);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tthis.DOM.copyButton = this.DOM.content.querySelector(`#${uid}_copy_url_btn`);\n\t\tif (this.DOM.copyButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.copyButton, 'click', this.copyEventUrl.bind(this));\n\t\t}\n\n\t\t// Init \"Videocall\" control\n\t\tthis.DOM.videoCall = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-videocall');\n\t\tif (\n\t\t\tBX?.Intranet?.ControlButton\n\t\t\t&& Type.isElementNode(this.DOM.videoCall)\n\t\t\t&& this.entry.getCurrentStatus() !== false\n\t\t)\n\t\t{\n\t\t\tthis.DOM.videoCall.style.display = '';\n\t\t\tthis.intranetControllButton = new ControlButton({\n\t\t\t\tcontainer: this.DOM.videoCall,\n\t\t\t\tentityType: 'calendar_event',\n\t\t\t\tentityId: this.entry.id,\n\t\t\t\tentityData: {\n\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from),\n\t\t\t\t\tparentId: this.entry.parentId\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tformType: 'full'\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\thandleEntryData(entryData, userIndex, sectionData)\n\t{\n\t\tthis.entry = new Entry({data: entryData, userIndex: userIndex});\n\n\t\tif (Type.isPlainObject(sectionData))\n\t\t{\n\t\t\tthis.permissions = sectionData.PERM;\n\t\t}\n\n\t\tEntryManager.registerEntrySlider(this.entry, this);\n\t}\n\n\tinitPlannerControl(uid)\n\t{\n\t\tthis.plannerId = uid + '_view_slider_planner';\n\t\tthis.DOM.plannerWrapOuter = this.DOM.content.querySelector(`.calendar-slider-detail-timeline`);\n\t\tthis.DOM.plannerWrap = this.DOM.plannerWrapOuter.querySelector(`.calendar-view-planner-wrap`);\n\n\t\tthis.planner = new Planner({\n\t\t\twrap: this.DOM.plannerWrap,\n\t\t\tminWidth: parseInt(this.DOM.plannerWrap.offsetWidth),\n\t\t\tsolidStatus: true,\n\t\t\treadonly: true\n\t\t});\n\n\t\tthis.planner.show();\n\t\tthis.planner.showLoader();\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.DOM.plannerWrapOuter)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.plannerWrapOuter, 'hidden');\n\t\t\t}\n\t\t}, 500);\n\n\t\tthis.loadPlannerData().then(()=>{});\n\t}\n\n\tinitUserListControl(uid)\n\t{\n\t\tlet userList = {y : [], i: [], q: [], n: []};\n\n\t\tif (this.entry.isMeeting())\n\t\t{\n\t\t\tthis.entry.getAttendees().forEach(function(user)\n\t\t\t{\n\t\t\t\tif (user.STATUS === 'H')\n\t\t\t\t{\n\t\t\t\t\tuserList.y.push(user);\n\t\t\t\t}\n\t\t\t\telse if (userList[user.STATUS.toLowerCase()])\n\t\t\t\t{\n\t\t\t\t\tuserList[user.STATUS.toLowerCase()].push(user);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tthis.DOM.attendeesListY = this.DOM.content.querySelector(`#${uid}_attendees_y`);\n\t\tthis.DOM.attendeesListN = this.DOM.content.querySelector(`#${uid}_attendees_n`);\n\t\tthis.DOM.attendeesListQ = this.DOM.content.querySelector(`#${uid}_attendees_q`);\n\t\tthis.DOM.attendeesListI = this.DOM.content.querySelector(`#${uid}_attendees_i`);\n\n\t\tEvent.bind(this.DOM.attendeesListY, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListY, userList.y);});\n\t\tEvent.bind(this.DOM.attendeesListN, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListN, userList.n);});\n\t\tEvent.bind(this.DOM.attendeesListQ, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListQ, userList.q);});\n\t\tEvent.bind(this.DOM.attendeesListI, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListI, userList.i);});\n\t}\n\n\tshowUserListPopup(node, userList)\n\t{\n\t\tif (this.userListPopup)\n\t\t{\n\t\t\tthis.userListPopup.close();\n\t\t}\n\n\t\tif (userList && userList.length)\n\t\t{\n\t\t\tthis.DOM.userListPopupWrap = this.BX.create('DIV', {props: {className: 'calendar-user-list-popup-block'}});\n\t\t\tuserList.forEach(function (user)\n\t\t\t{\n\t\t\t\tlet userWrap = this.DOM.userListPopupWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card'}}));\n\n\t\t\t\tuserWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-avatar'}}))\n\t\t\t\t\t.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-item'}}))\n\t\t\t\t\t.appendChild(this.BX.create('IMG', {props: {width: 34, height: 34, src: user.AVATAR}}));\n\n\t\t\t\tif (user.EMAIL_USER)\n\t\t\t\t{\n\t\t\t\t\tuserWrap.appendChild(this.BX.create(\"DIV\", {props: {className: 'calendar-slider-sidebar-user-info'}}))\n\t\t\t\t\t\t.appendChild(this.BX.create(\"span\", {\n\t\t\t\t\t\t\ttext: user.DISPLAY_NAME\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuserWrap.appendChild(this.BX.create(\"DIV\", {props: {className: 'calendar-slider-sidebar-user-info'}}))\n\t\t\t\t\t\t.appendChild(this.BX.create(\"A\", {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\thref: user.URL ? user.URL : '#', className: 'calendar-slider-sidebar-user-info-name'\n\t\t\t\t\t\t\t}, text: user.DISPLAY_NAME\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.userListPopup = this.BX.PopupWindowManager.create(\"user-list-popup-\" + Math.random(), node, {\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.DOM.userListPopupWrap,\n\t\t\t\tclassName: 'calendar-user-list-popup',\n\t\t\t\tzIndex: 4000\n\t\t\t});\n\n\t\t\tthis.userListPopup.setAngle({offset: 36});\n\t\t\tthis.userListPopup.show();\n\t\t\tthis.BX.addCustomEvent(this.userListPopup, 'onPopupClose', ()=>{this.userListPopup.destroy();});\n\t\t}\n\t}\n\n\tinitAcceptMeetingControl(uid)\n\t{\n\t\tthis.DOM.statusButtonset = this.DOM.content.querySelector(`#${uid}_status_buttonset`);\n\t\tthis.DOM.statusButtonset.style.marginRight = '12px';\n\n\t\tif (this.entry.getCurrentStatus() === 'H' || this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tDom.remove(this.DOM.statusButtonset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.statusControl = new MeetingStatusControl(\n\t\t\t{\n\t\t\t\twrap: this.DOM.statusButtonset,\n\t\t\t\tcurrentStatus: this.DOM.content.querySelector(`#${uid}_current_status`).value || this.entry.getCurrentStatus()\n\t\t\t});\n\n\t\t\tthis.statusControl.subscribe('onSetStatus', (event) => {\n\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.handleEntityChanges();\n\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, event.getData().status)\n\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\tthis.statusControl.setStatus(this.entry.getCurrentStatus(), false);\n\t\t\t\t\t\t\t\tthis.statusControl.updateStatus();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tcopyEventUrl()\n\t{\n\t\tif(!this.entryUrl || !this.BX.clipboard.copy(this.entryUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\tlet popup = new this.BX.PopupWindow(\n\t\t\t'calendar_clipboard_copy',\n\t\t\tthis.DOM.copyButton,\n\t\t\t{\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_TIP_TEMPLATE_LINK_COPIED'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tcachable: false\n\t\t\t}\n\t\t);\n\t\tpopup.show();\n\n\t\tlet timeoutId;\n\t\twhile(timeoutId = this.timeoutIds.pop())\n\t\t{\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t\tthis.timeoutIds.push(setTimeout(function(){popup.close();}, 1500));\n\t}\n\n\tdisplayError(errors = [])\n\t{\n\t\t//errors\n\t}\n\n\tcanDo(entry, action)\n\t{\n\t\tif ((action === 'edit' || action === 'delete'))\n\t\t{\n\t\t\tif (entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.permissions.edit;\n\t\t}\n\n\t\tif ((action === 'view'))\n\t\t{\n\t\t\treturn this.permissions.view_full;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.DOM.plannerWrap && Dom.hasClass(this.DOM.plannerWrap, 'calendar-edit-planner-wrap-shown');\n\t}\n\n\tloadPlannerData()\n\t{\n\t\tthis.planner.showLoader();\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tentryId: this.entry.id || 0,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\thostId: this.entry.getMeetingHost(),\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\tentityList: this.entry.getAttendeesEntityList(),\n\t\t\t\t\t\tdateFrom: Util.formatDate(this.entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\t\t\t\tdateTo: Util.formatDate(this.entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\t\t\t\ttimezone: this.userTimezone,\n\t\t\t\t\t\tlocation: this.entry.getLocation(),\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\t\tthis.planner.hideLoader();\n\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.planner.updateSelector(\n\t\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\t\tthis.entry.from,\n\t\t\t\t\t\t\t\tthis.entry.userTimezoneOffsetFrom,\n\t\t\t\t\t\t\t\tthis.entry.fullDay),\n\t\t\t\t\t\t\tUtil.adjustDateForTimezoneOffset(\n\t\t\t\t\t\t\t\tthis.entry.to,\n\t\t\t\t\t\t\t\tthis.entry.userTimezoneOffsetTo,\n\t\t\t\t\t\t\t\tthis.entry.fullDay\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tthis.entry.fullDay\n\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {resolve(response);}\n\t\t\t\t);\n\n\t\t});\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(\n\t\t\t(\n\t\t\t\te.keyCode === Util.getKeyCode('delete')\n\t\t\t\t// || e.keyCode === Util.getKeyCode('backspace')\n\t\t\t)\n\t\t\t&& this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tconst target = event.target || event.srcElement;\n\t\t\tconst tagName = Type.isElementNode(target) ? target.tagName.toLowerCase() : null;\n\t\t\tif (tagName && !['input', 'textarea'].includes(tagName))\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', ()=>{\n\t\t\t\t\tthis.BX.SidePanel.Instance.hide();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePull(event: BaseEvent): void\n\t{\n\t\tif (!event instanceof BaseEvent)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst data = event.getData();\n\t\tconst command = data[0];\n\t\tswitch(command)\n\t\t{\n\t\t\tcase 'edit_event':\n\t\t\tcase 'delete_event':\n\t\t\tcase 'set_meeting_status':\n\t\t\t\tconst calendarContext = Util.getCalendarContext();\n\t\t\t\tif (calendarContext)\n\t\t\t\t{\n\t\t\t\t\tif (this.planner && this.reloadStatus === this.RELOAD_FINISHED)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.loadPlannerData().then(()=>{});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.reloadSlider();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\thandleEntityChanges()\n\t{\n\t\tthis.entityChanged = true;\n\t}\n\n\treloadSlider()\n\t{\n\t\tif (this.reloadStatus === this.RELOAD_FINISHED)\n\t\t{\n\t\t\t// Protection from reloading same page during changes (status or reminder)\n\t\t\tif (this.entityChanged)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.entityChanged = false;\n\t\t\t\t}, 500);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\t\tEventEmitter.unsubscribe(this.slider, \"SidePanel.Slider:onCloseComplete\", this.destroyBind);\n\t\t\tEventEmitter.unsubscribe('onPullEvent-calendar', this.handlePullBind);\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBind);\n\n\t\t\tthis.reloadStatus = this.RELOAD_REQUESTED;\n\n\t\t\tthis.slider.reload();\n\t\t}\n\t}\n}"],"names":["EventViewForm","options","type","ownerId","userId","zIndex","entryId","entryDateFrom","timezoneOffset","BX","Util","getBX","sliderOnLoad","onLoadSlider","bind","handlePullBind","handlePull","keyHandlerBind","keyHandler","destroyBind","destroy","slider","promiseResolve","EventEmitter","subscribe","Event","document","createContent","then","html","Type","isFunction","opened","unsubscribe","unbind","intranetControllButton","closeAllPopups","event","BaseEvent","data","getData","DOM","content","layout","get","isNull","uid","initControls","reloadStatus","RELOAD_FINISHED","Promise","resolve","ajax","runAction","analyticsLabel","calendarAction","formType","dateFrom","formatDate","response","isOpen","util","trim","set","params","additionalParams","uniqueId","entryUrl","userTimezone","handleEntryData","entry","userIndex","section","displayError","errors","title","querySelector","buttonSet","editButton","delButton","sidebarInner","initPlannerControl","initUserListControl","innerTimeWrap","isElementNode","offsetHeight","Dom","addClass","canDo","SidePanel","Instance","close","EntryManager","openEditSlider","remove","reminderWrap","isDomNode","viewMode","getCurrentStatus","reminderControl","Calendar","Controls","Reminder","wrap","setValue","getReminders","handleEntityChanges","reminderValues","values","id","reminders","items","querySelectorAll","length","removeClass","subscribeOnce","hide","deleteEntry","viewElementBind","showTitle","node","getAttribute","isMeeting","initAcceptMeetingControl","copyButton","copyEventUrl","videoCall","Intranet","ControlButton","style","display","container","entityType","entityId","entityData","from","parentId","entryData","sectionData","Entry","isPlainObject","permissions","PERM","registerEntrySlider","plannerId","plannerWrapOuter","plannerWrap","planner","Planner","minWidth","parseInt","offsetWidth","solidStatus","readonly","show","showLoader","setTimeout","loadPlannerData","userList","y","i","q","n","getAttendees","forEach","user","STATUS","push","toLowerCase","attendeesListY","attendeesListN","attendeesListQ","attendeesListI","showUserListPopup","userListPopup","userListPopupWrap","create","props","className","userWrap","appendChild","width","height","src","AVATAR","EMAIL_USER","text","DISPLAY_NAME","href","URL","PopupWindowManager","Math","random","autoHide","closeByEsc","offsetTop","offsetLeft","resizable","lightShadow","setAngle","offset","addCustomEvent","statusButtonset","marginRight","statusControl","MeetingStatusControl","currentStatus","value","setMeetingStatus","status","setStatus","updateStatus","clipboard","copy","timeoutIds","popup","PopupWindow","Loc","getMessage","darkMode","angle","cachable","timeoutId","pop","clearTimeout","action","isResourcebooking","edit","view_full","hasClass","hostId","getMeetingHost","entityList","getAttendeesEntityList","getTime","getDayLength","dateTo","to","timezone","location","getLocation","hideLoader","update","entries","accessibility","updateSelector","adjustDateForTimezoneOffset","userTimezoneOffsetFrom","fullDay","userTimezoneOffsetTo","e","keyCode","getKeyCode","target","srcElement","tagName","includes","command","calendarContext","getCalendarContext","reloadSlider","entityChanged","RELOAD_REQUESTED","reload"],"mappings":"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"}