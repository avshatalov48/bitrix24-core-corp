{"version":3,"file":"eventviewform.bundle.js","sources":["../src/eventviewform.js"],"sourcesContent":["\"use strict\";\n\nimport {Util} from \"calendar.util\";\nimport {Type, Event, Loc, Tag, Dom} from 'main.core';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {MeetingStatusControl, Reminder} from \"calendar.controls\";\nimport {BaseEvent} from 'main.core.events';\n\nexport class EventViewForm {\n\tpermissions = {};\n\tname = 'eventviewform';\n\tuid = null;\n\tDOM = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId || 0;\n\t\tthis.userId = options.userId || 0;\n\t\tthis.sliderId = \"calendar:view-entry-slider\";\n\t\tthis.zIndex = 3100;\n\t\tthis.entryId = options.entryId || null;\n\t\tthis.entryDateFrom = options.entryDateFrom || null;\n\t\tthis.timezoneOffset = options.timezoneOffset || null;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.sliderOnLoad = this.onLoadSlider.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onCloseComplete\", this.BX.proxy(this.destroy, this));\n\n\t\t//this.BX.removeCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t}\n\n\tshow(params = {})\n\t{\n\t\tif (params.entryId)\n\t\t{\n\t\t\tthis.entryId = params.entryId;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.sliderOnLoad\n\t\t\t}\n\t\t});\n\t\tthis.opened = true;\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider::onClose\", this.sliderOnClose);\n\t\t}\n\t}\n\n\tdestroy(event)\n\t{\n\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider:onCloseComplete\", this.BX.proxy(this.destroy, this));\n\t\tEvent.unbind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\tUtil.closeAllPopups();\n\t\tthis.opened = false;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tlet slider = event.getSlider();\n\t\tthis.DOM.content = slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getViewEventSlider', {\n\t\t\t\tanalyticsLabel: {calendarAction: 'view_event', formType: 'full'},\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tdateFrom: Util.formatDate(this.entryDateFrom),\n\t\t\t\t\ttimezoneOffset: this.timezoneOffset\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\t\tlet html = '';\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.userId = params.userId;\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.entryUrl = params.entryUrl;\n\t\t\t\t\t\tthis.handleEntryData(params.entry, params.userIndex, params.section);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(html);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.displayError(response.errors);\n\t\t\t\t\tresolve(response);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonSet = this.DOM.content.querySelector(`#${uid}_buttonset`);\n\t\tthis.DOM.editButton = this.DOM.content.querySelector(`#${uid}_but_edit`);\n\t\tthis.DOM.delButton = this.DOM.content.querySelector(`#${uid}_but_del`);\n\t\tthis.DOM.sidebarInner = this.DOM.content.querySelector(`#${uid}_sidebar_inner`);\n\t\tthis.DOM.chatLink = this.DOM.content.querySelector(`#${uid}_but_chat`);\n\n\t\tif (this.DOM.chatLink)\n\t\t{\n\t\t\tEvent.bind(this.DOM.chatLink, 'click', () => {\n\t\t\t\tEntryManager.openChatForEntry({\n\t\t\t\t\tentryId: this.entry.parentId,\n\t\t\t\t\tentry: this.entry\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tif (this.DOM.buttonSet)\n\t\t{\n\t\t\tthis.initPlannerControl(uid);\n\t\t\tthis.initUserListControl(uid);\n\t\t}\n\n\t\tif (this.DOM.content.querySelector(`#${uid}_time_inner_wrap`).offsetHeight > 50)\n\t\t{\n\t\t\tthis.BX.addClass(this.DOM.content.querySelector(`#${uid}_time_wrap`), 'calendar-slider-sidebar-head-long-time');\n\t\t}\n\n\t\tif (this.canDo(this.entry, 'edit') && this.DOM.editButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.editButton, 'click', () => {\n\t\t\t\tthis.BX.SidePanel.Instance.close(false, function ()\n\t\t\t\t{\n\t\t\t\t\tEntryManager.openEditSlider({\n\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\tuserId: this.userId\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.editButton);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\t// Reminder\n\t\t\tthis.DOM.reminderWrap = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-remind-wrap');\n\t\t\tif (Type.isDomNode(this.DOM.reminderWrap))\n\t\t\t{\n\t\t\t\tlet viewMode = !this.canDo(this.entry, 'edit')\n\t\t\t\t\t&& this.entry.getCurrentStatus() === false;\n\n\t\t\t\tthis.reminderControl = new Reminder({\n\t\t\t\t\twrap: this.DOM.reminderWrap,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tviewMode: viewMode\n\t\t\t\t});\n\t\t\t\tthis.reminderControl.setValue(this.entry.getReminders());\n\n\t\t\t\tif (!viewMode)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderControl.subscribe('onChange', function (event) {\n\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\treminders: this.reminderValues\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\t\t//this.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\t\tif (this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tEvent.bind(this.DOM.delButton, 'click', ()=>{\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.delButton);\n\t\t}\n\n\t\tthis.BX.viewElementBind(\n\t\t\tuid + '_' + this.entry.id + '_files_wrap',\n\t\t\t{\n\t\t\t\tshowTitle: true\n\t\t\t},\n\t\t\tfunction(node)\n\t\t\t{\n\t\t\t\treturn Type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t}\n\t\t);\n\n\t\tif (this.entry && this.entry.isMeeting())\n\t\t{\n\t\t\tthis.initAcceptMeetingControl(uid);\n\n\t\t\tconst attendees = this.entry.getAttendees();\n\t\t\tif (Type.isArray(attendees))\n\t\t\t{\n\t\t\t\tif (window.location.host === 'cp.bitrix.ru'\n\t\t\t\t\t&& this.DOM.chatLink\n\t\t\t\t\t&& attendees.length > 1\n\t\t\t\t\t&& attendees.find((user)=>{return user.STATUS !== 'N' && parseInt(user.ID) === parseInt(this.userId);})\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.chatLink.style.display = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tthis.DOM.copyButton = this.DOM.content.querySelector(`#${uid}_copy_url_btn`);\n\t\tif (this.DOM.copyButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.copyButton, 'click', this.copyEventUrl.bind(this));\n\t\t}\n\n\t\tEvent.unbind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t\tEvent.bind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t}\n\n\thandleEntryData(entryData, userIndex, sectionData)\n\t{\n\t\tthis.entry = new Entry({data: entryData, userIndex: userIndex});\n\n\t\tif (Type.isPlainObject(sectionData))\n\t\t{\n\t\t\tthis.permissions = sectionData.PERM;\n\t\t}\n\t}\n\n\tinitPlannerControl(uid)\n\t{\n\t\tthis.plannerId = uid + '_view_slider_planner';\n\t\tthis.DOM.plannerWrap = this.DOM.content.querySelector(`#${uid}_view_planner_wrap`);\n\n\t\tsetTimeout(function()\n\t\t{\n\t\t\tif (this.DOM.plannerWrap)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(this.DOM.plannerWrap, 'hidden');\n\t\t\t}\n\t\t}.bind(this), 500);\n\n\t\tsetTimeout(()=>{\n\t\t\tif (this.DOM.plannerWrap && this.DOM.plannerWrap.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoResize', [\n\t\t\t\t\t{\n\t\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\t\ttimeoutCheck: true,\n\t\t\t\t\t\twidth: this.DOM.plannerWrap.offsetWidth\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t}, 200);\n\n\t\tEvent.bind(window, 'resize', ()=>{\n\t\t\tif (this.DOM.plannerWrap && this.DOM.plannerWrap.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoResize', [\n\t\t\t\t\t{\n\t\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\t\ttimeoutCheck: true,\n\t\t\t\t\t\twidth: this.DOM.plannerWrap.offsetWidth\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\t}\n\n\tinitUserListControl(uid)\n\t{\n\t\tlet userList = {y : [], i: [], q: [], n: []};\n\n\t\tif (this.entry.isMeeting())\n\t\t{\n\t\t\tthis.entry.getAttendees().forEach(function(user)\n\t\t\t{\n\t\t\t\tif (user.STATUS === 'H')\n\t\t\t\t{\n\t\t\t\t\tuserList.y.push(user);\n\t\t\t\t}\n\t\t\t\telse if (userList[user.STATUS.toLowerCase()])\n\t\t\t\t{\n\t\t\t\t\tuserList[user.STATUS.toLowerCase()].push(user);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tthis.DOM.attendeesListY = this.DOM.content.querySelector(`#${uid}_attendees_y`);\n\t\tthis.DOM.attendeesListN = this.DOM.content.querySelector(`#${uid}_attendees_n`);\n\t\tthis.DOM.attendeesListQ = this.DOM.content.querySelector(`#${uid}_attendees_q`);\n\t\tthis.DOM.attendeesListI = this.DOM.content.querySelector(`#${uid}_attendees_i`);\n\n\t\tEvent.bind(this.DOM.attendeesListY, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListY, userList.y);});\n\t\tEvent.bind(this.DOM.attendeesListN, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListN, userList.n);});\n\t\tEvent.bind(this.DOM.attendeesListQ, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListQ, userList.q);});\n\t\tEvent.bind(this.DOM.attendeesListI, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListI, userList.i);});\n\t}\n\n\tshowUserListPopup(node, userList)\n\t{\n\t\tif (this.userListPopup)\n\t\t{\n\t\t\tthis.userListPopup.close();\n\t\t}\n\n\t\tif (userList && userList.length)\n\t\t{\n\t\t\tthis.DOM.userListPopupWrap = this.BX.create('DIV', {props: {className: 'calendar-user-list-popup-block'}});\n\t\t\tuserList.forEach(function (user)\n\t\t\t{\n\t\t\t\tlet userWrap = this.DOM.userListPopupWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card'}}));\n\n\t\t\t\tuserWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-avatar'}}))\n\t\t\t\t\t.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-item'}}))\n\t\t\t\t\t.appendChild(this.BX.create('IMG', {props: {width: 34, height: 34, src: user.AVATAR}}));\n\n\t\t\t\tif (user.EMAIL_USER)\n\t\t\t\t{\n\t\t\t\t\tuserWrap.appendChild(this.BX.create(\"DIV\", {props: {className: 'calendar-slider-sidebar-user-info'}}))\n\t\t\t\t\t\t.appendChild(this.BX.create(\"span\", {\n\t\t\t\t\t\t\ttext: user.DISPLAY_NAME\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuserWrap.appendChild(this.BX.create(\"DIV\", {props: {className: 'calendar-slider-sidebar-user-info'}}))\n\t\t\t\t\t\t.appendChild(this.BX.create(\"A\", {\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\thref: user.URL ? user.URL : '#', className: 'calendar-slider-sidebar-user-info-name'\n\t\t\t\t\t\t\t}, text: user.DISPLAY_NAME\n\t\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.userListPopup = this.BX.PopupWindowManager.create(\"user-list-popup-\" + Math.random(), node, {\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.DOM.userListPopupWrap,\n\t\t\t\tclassName: 'calendar-user-list-popup',\n\t\t\t\tzIndex: 4000\n\t\t\t});\n\n\t\t\tthis.userListPopup.setAngle({offset: 36});\n\t\t\tthis.userListPopup.show();\n\t\t\tthis.BX.addCustomEvent(this.userListPopup, 'onPopupClose', ()=>{this.userListPopup.destroy();});\n\t\t}\n\t}\n\n\tinitAcceptMeetingControl(uid)\n\t{\n\t\tthis.DOM.statusButtonset = this.DOM.content.querySelector(`#${uid}_status_buttonset`);\n\t\tthis.DOM.statusButtonset.style.marginRight = '12px';\n\n\t\tif (this.entry.getCurrentStatus() === 'H' || this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tDom.remove(this.DOM.statusButtonset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.statusControl = new MeetingStatusControl(\n\t\t\t{\n\t\t\t\twrap: this.DOM.statusButtonset,\n\t\t\t\tcurrentStatus: this.DOM.content.querySelector(`#${uid}_current_status`).value || this.entry.getCurrentStatus()\n\t\t\t});\n\n\t\t\tthis.statusControl.subscribe('onSetStatus', function(event)\n\t\t\t\t{\n\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst result = EntryManager.setMeetingStatus(this.entry, event.getData().status);\n\t\t\t\t\t\tif (!result)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.statusControl.setStatus(this.entry.getCurrentStatus(), false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tcopyEventUrl()\n\t{\n\t\tif(!this.entryUrl || !this.BX.clipboard.copy(this.entryUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\tlet popup = new this.BX.PopupWindow(\n\t\t\t'calendar_clipboard_copy',\n\t\t\tthis.DOM.copyButton,\n\t\t\t{\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_TIP_TEMPLATE_LINK_COPIED'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tcachable: false\n\t\t\t}\n\t\t);\n\t\tpopup.show();\n\n\t\tlet timeoutId;\n\t\twhile(timeoutId = this.timeoutIds.pop())\n\t\t{\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t\tthis.timeoutIds.push(setTimeout(function(){popup.close();}, 1500));\n\t}\n\n\tdisplayError(errors = [])\n\t{\n\t\t//errors\n\t}\n\n\tcanDo(entry, action)\n\t{\n\t\tif ((action === 'edit' || action === 'delete'))\n\t\t{\n\t\t\t// if ((entry.isMeeting() && entry.id !== entry.parentId)\n\t\t\t// \t|| entry.isResourcebooking())\n\t\t\t// {\n\t\t\t// \treturn false;\n\t\t\t// }\n\n\t\t\treturn this.permissions.edit;\n\t\t}\n\n\t\tif ((action === 'view'))\n\t\t{\n\t\t\treturn this.permissions.view_full;\n\t\t}\n\n\t\treturn false;\n\t}\n}"],"names":["EventViewForm","options","type","ownerId","userId","sliderId","zIndex","entryId","entryDateFrom","timezoneOffset","BX","Util","getBX","sliderOnClose","hide","bind","sliderOnLoad","onLoadSlider","slider","promiseResolve","addCustomEvent","proxy","destroy","createContent","then","html","Type","isFunction","opened","params","SidePanel","Instance","open","contentCallback","label","text","Loc","getMessage","bgColor","events","onClose","onCloseComplete","onLoad","event","getSliderPage","getUrl","removeCustomEvent","Event","unbind","document","applyHacksForPopupzIndex","closeAllPopups","getSlider","DOM","content","layout","getData","get","initControls","uid","Promise","resolve","ajax","runAction","analyticsLabel","calendarAction","formType","data","dateFrom","formatDate","response","isOpen","util","trim","set","additionalParams","uniqueId","entryUrl","handleEntryData","entry","userIndex","section","displayError","errors","title","querySelector","formWrap","form","buttonSet","editButton","delButton","sidebarInner","chatLink","EntryManager","openChatForEntry","parentId","initPlannerControl","initUserListControl","offsetHeight","addClass","canDo","close","openEditSlider","remove","reminderWrap","isDomNode","viewMode","getCurrentStatus","reminderControl","Reminder","wrap","setValue","getReminders","subscribe","BaseEvent","reminderValues","values","id","reminders","items","querySelectorAll","length","removeClass","deleteEntry","viewElementBind","showTitle","node","isElementNode","getAttribute","isMeeting","initAcceptMeetingControl","attendees","getAttendees","isArray","window","location","host","find","user","STATUS","parseInt","ID","style","display","copyButton","copyEventUrl","entryData","sectionData","Entry","isPlainObject","permissions","PERM","plannerId","plannerWrap","setTimeout","offsetWidth","onCustomEvent","timeoutCheck","width","userList","y","i","q","n","forEach","push","toLowerCase","attendeesListY","attendeesListN","attendeesListQ","attendeesListI","showUserListPopup","userListPopup","userListPopupWrap","create","props","className","userWrap","appendChild","height","src","AVATAR","EMAIL_USER","DISPLAY_NAME","href","URL","PopupWindowManager","Math","random","autoHide","closeByEsc","offsetTop","offsetLeft","resizable","lightShadow","setAngle","offset","show","statusButtonset","marginRight","Dom","statusControl","MeetingStatusControl","currentStatus","value","result","setMeetingStatus","status","setStatus","clipboard","copy","timeoutIds","popup","PopupWindow","darkMode","angle","cachable","timeoutId","pop","clearTimeout","action","edit","view_full"],"mappings":"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"}