{"version":3,"file":"eventviewform.bundle.js","sources":["../src/eventviewform.js"],"sourcesContent":["\"use strict\";\n\nimport {Util} from \"calendar.util\";\nimport {Type, Event, Loc, Tag, Dom} from 'main.core';\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {MeetingStatusControl, Reminder} from \"calendar.controls\";\nimport {BaseEvent} from 'main.core.events';\n//import {Section} from \"calendar.section\";\n\nexport class EventViewForm {\n\tpermissions = {};\n\tname = 'eventviewform';\n\tuid = null;\n\tDOM = {};\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId || 0;\n\t\tthis.userId = options.userId || 0;\n\t\tthis.sliderId = \"calendar:view-entry-slider\";\n\t\tthis.zIndex = 3100;\n\t\tthis.entryId = options.entryId || null;\n\t\tthis.entryDateFrom = options.entryDateFrom || null;\n\t\tthis.timezoneOffset = options.timezoneOffset || null;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.sliderOnLoad = this.onLoadSlider.bind(this);\n\t}\n\n\tinitInSlider(slider, promiseResolve)\n\t{\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onLoad\", this.sliderOnLoad);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onClose\", this.sliderOnClose);\n\t\tthis.BX.addCustomEvent(slider, \"SidePanel.Slider:onCloseComplete\", this.BX.proxy(this.destroy, this));\n\n\t\t//this.BX.removeCustomEvent(slider, \"SidePanel.Slider:onBeforeCloseComplete\", this.destroy.bind(this));\n\n\t\tthis.createContent(slider).then(function(html)\n\t\t\t{\n\t\t\t\tif (Type.isFunction(promiseResolve))\n\t\t\t\t{\n\t\t\t\t\tpromiseResolve(html);\n\t\t\t\t}\n\t\t\t}.bind(this)\n\t\t);\n\n\t\tthis.opened = true;\n\t}\n\n\tshow(params = {})\n\t{\n\t\tif (params.entryId)\n\t\t{\n\t\t\tthis.entryId = params.entryId;\n\t\t}\n\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonClose: this.sliderOnClose,\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.sliderOnLoad\n\t\t\t}\n\t\t});\n\t\tthis.opened = true;\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.opened;\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSliderPage && event.getSliderPage().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider::onClose\", this.sliderOnClose);\n\t\t}\n\t}\n\n\tdestroy(event)\n\t{\n\t\tthis.BX.removeCustomEvent(\"SidePanel.Slider:onCloseComplete\", this.BX.proxy(this.destroy, this));\n\t\tEvent.unbind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t\tthis.BX.SidePanel.Instance.destroy(this.sliderId);\n\t\tUtil.closeAllPopups();\n\t\tthis.opened = false;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tlet slider = event.getSlider();\n\t\tthis.DOM.content = slider.layout.content;\n\n\t\t// Used to execute javasctipt and attach CSS from ajax responce\n\t\tthis.BX.html(slider.layout.content, slider.getData().get(\"sliderContent\"));\n\t\tthis.initControls(this.uid);\n\t\tthis.setFormValues();\n\t}\n\n\tcreateContent(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getViewEventSlider', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\tdateFrom: Util.formatDate(this.entryDateFrom),\n\t\t\t\t\ttimezoneOffset: this.timezoneOffset\n\t\t\t\t}\n\t\t\t}).then(function(response)\n\t\t\t\t{\n\t\t\t\t\tlet html = '';\n\t\t\t\t\tif ((Type.isFunction(slider.isOpen) && slider.isOpen()) || slider.isOpen === true)\n\t\t\t\t\t{\n\t\t\t\t\t\thtml = this.BX.util.trim(response.data.html);\n\t\t\t\t\t\tslider.getData().set(\"sliderContent\", html);\n\t\t\t\t\t\tlet params = response.data.additionalParams;\n\n\t\t\t\t\t\tthis.uid = params.uniqueId;\n\t\t\t\t\t\tthis.entryUrl = params.entryUrl;\n\t\t\t\t\t\tthis.handleEntryData(params.entry, params.userIndex, params.section);\n\t\t\t\t\t}\n\t\t\t\t\tresolve(html);\n\t\t\t\t}.bind(this),\n\t\t\t\tfunction (response) {\n\n\t\t\t\t\tthis.displayError(response.errors);\n\t\t\t\t\tresolve(response);\n\t\t\t\t}.bind(this));\n\t\t});\n\t}\n\n\tinitControls(uid)\n\t{\n\t\tthis.DOM.title = this.DOM.content.querySelector(`#${uid}_title`);\n\t\tthis.DOM.formWrap = this.DOM.content.querySelector(`#${uid}_form_wrap`);\n\t\tthis.DOM.form = this.DOM.content.querySelector(`#${uid}_form`);\n\t\tthis.DOM.buttonSet = this.DOM.content.querySelector(`#${uid}_buttonset`);\n\t\tthis.DOM.editButton = this.DOM.content.querySelector(`#${uid}_but_edit`);\n\t\tthis.DOM.delButton = this.DOM.content.querySelector(`#${uid}_but_del`);\n\t\tthis.DOM.sidebarInner = this.DOM.content.querySelector(`#${uid}_sidebar_inner`);\n\n\t\tif (this.DOM.buttonSet)\n\t\t{\n\t\t\tthis.initPlannerControl(uid);\n\t\t\tthis.initUserListControl(uid);\n\t\t}\n\n\t\tif (this.DOM.content.querySelector(`#${uid}_time_inner_wrap`).offsetHeight > 50)\n\t\t{\n\t\t\tthis.BX.addClass(this.DOM.content.querySelector(`#${uid}_time_wrap`), 'calendar-slider-sidebar-head-long-time');\n\t\t}\n\n\t\tif (this.canDo(this.entry, 'edit') && this.DOM.editButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.editButton, 'click', () => {\n\t\t\t\tthis.BX.SidePanel.Instance.close(false, function ()\n\t\t\t\t{\n\t\t\t\t\tEntryManager.openEditSlider({\n\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\tuserId: this.userId\n\t\t\t\t\t});\n\t\t\t\t}.bind(this));\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.editButton);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\t// Reminder\n\t\t\tthis.DOM.reminderWrap = this.DOM.sidebarInner.querySelector('.calendar-slider-sidebar-remind-wrap');\n\t\t\tif (Type.isDomNode(this.DOM.reminderWrap))\n\t\t\t{\n\t\t\t\tlet viewMode = !this.canDo(this.entry, 'edit')\n\t\t\t\t\t&& this.entry.getCurrentStatus() === false;\n\n\t\t\t\tthis.reminderControl = new Reminder({\n\t\t\t\t\twrap: this.DOM.reminderWrap,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tviewMode: viewMode\n\t\t\t\t});\n\t\t\t\tthis.reminderControl.setValue(this.entry.getReminders());\n\n\t\t\t\tif (!viewMode)\n\t\t\t\t{\n\t\t\t\t\tthis.reminderControl.subscribe('onChange', function (event) {\n\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\treminders: this.reminderValues\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}).then(\n\t\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\t\tfunction(response)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t}.bind(this),\n\t\t\t\t\t\t\t\t// Failure\n\t\t\t\t\t\t\t\tfunction (response)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\t\t//this.DOM.reminderInputsWrap = this.DOM.reminderWrap.appendChild(Tag.render`<span></span>`);\n\t\tif (this.canDo(this.entry, 'delete'))\n\t\t{\n\t\t\tEvent.bind(this.DOM.delButton, 'click', function ()\n\t\t\t{\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t}.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.BX.remove(this.DOM.delButton);\n\t\t}\n\n\t\tthis.BX.viewElementBind(\n\t\t\tuid + '_' + this.entry.id + '_files_wrap',\n\t\t\t{\n\t\t\t\tshowTitle: true\n\t\t\t},\n\t\t\tfunction(node)\n\t\t\t{\n\t\t\t\treturn Type.isElementNode(node) && (node.getAttribute('data-bx-viewer') || node.getAttribute('data-bx-image'));\n\t\t\t}\n\t\t);\n\n\t\tif (this.entry && this.entry.isMeeting())\n\t\t{\n\t\t\tthis.initAcceptMeetingControl(uid);\n\t\t}\n\n\t\tif (this.DOM.sidebarInner)\n\t\t{\n\t\t\tlet items = this.DOM.sidebarInner.querySelectorAll('.calendar-slider-sidebar-border-bottom');\n\t\t\tif (items.length >= 2)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(items[items.length - 1], 'calendar-slider-sidebar-border-bottom');\n\t\t\t}\n\t\t}\n\n\t\tthis.DOM.copyButton = this.DOM.content.querySelector(`#${uid}_copy_url_btn`);\n\t\tif (this.DOM.copyButton)\n\t\t{\n\t\t\tEvent.bind(this.DOM.copyButton, 'click', this.copyEventUrl.bind(this));\n\t\t}\n\n\t\tEvent.unbind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t\tEvent.bind(document, \"click\", Util.applyHacksForPopupzIndex);\n\t}\n\n\tsetFormValues()\n\t{\n\n\t}\n\n\thandleEntryData(entryData, userIndex, sectionData)\n\t{\n\t\tthis.entry = new Entry({data: entryData, userIndex: userIndex});\n\n\t\tif (Type.isPlainObject(sectionData))\n\t\t{\n\t\t\tthis.permissions = sectionData.PERM;\n\t\t}\n\t}\n\n\tinitPlannerControl(uid)\n\t{\n\t\tthis.plannerId = uid + '_view_slider_planner';\n\t\tthis.DOM.plannerWrap = this.DOM.content.querySelector(`#${uid}_view_planner_wrap`);\n\n\t\tsetTimeout(function()\n\t\t{\n\t\t\tif (this.DOM.plannerWrap)\n\t\t\t{\n\t\t\t\tthis.BX.removeClass(this.DOM.plannerWrap, 'hidden');\n\t\t\t}\n\t\t}.bind(this), 500);\n\n\t\tsetTimeout(()=>{\n\t\t\tif (this.DOM.plannerWrap && this.DOM.plannerWrap.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoResize', [\n\t\t\t\t\t{\n\t\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\t\ttimeoutCheck: true,\n\t\t\t\t\t\twidth: this.DOM.plannerWrap.offsetWidth\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t}, 200);\n\n\t\tEvent.bind(window, 'resize', ()=>{\n\t\t\tif (this.DOM.plannerWrap && this.DOM.plannerWrap.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.BX.onCustomEvent('OnCalendarPlannerDoResize', [\n\t\t\t\t\t{\n\t\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\t\ttimeoutCheck: true,\n\t\t\t\t\t\twidth: this.DOM.plannerWrap.offsetWidth\n\t\t\t\t\t}\n\t\t\t\t]);\n\t\t\t}\n\t\t});\n\t}\n\n\tinitUserListControl(uid)\n\t{\n\t\tlet userList = {y : [], i: [], q: [], n: []};\n\n\t\tif (this.entry.isMeeting())\n\t\t{\n\t\t\tthis.entry.getAttendees().forEach(function(user)\n\t\t\t{\n\t\t\t\tif (user.STATUS === 'H')\n\t\t\t\t{\n\t\t\t\t\tuserList.y.push(user);\n\t\t\t\t}\n\t\t\t\telse if (userList[user.STATUS.toLowerCase()])\n\t\t\t\t{\n\t\t\t\t\tuserList[user.STATUS.toLowerCase()].push(user);\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tthis.DOM.attendeesListY = this.DOM.content.querySelector(`#${uid}_attendees_y`);\n\t\tthis.DOM.attendeesListN = this.DOM.content.querySelector(`#${uid}_attendees_n`);\n\t\tthis.DOM.attendeesListQ = this.DOM.content.querySelector(`#${uid}_attendees_q`);\n\t\tthis.DOM.attendeesListI = this.DOM.content.querySelector(`#${uid}_attendees_i`);\n\n\t\tEvent.bind(this.DOM.attendeesListY, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListY, userList.y);});\n\t\tEvent.bind(this.DOM.attendeesListN, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListN, userList.n);});\n\t\tEvent.bind(this.DOM.attendeesListQ, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListQ, userList.q);});\n\t\tEvent.bind(this.DOM.attendeesListI, 'click', ()=>{this.showUserListPopup(this.DOM.attendeesListI, userList.i);});\n\t}\n\n\tshowUserListPopup(node, userList)\n\t{\n\t\tif (this.userListPopup)\n\t\t{\n\t\t\tthis.userListPopup.close();\n\t\t}\n\n\t\tif (userList && userList.length)\n\t\t{\n\t\t\tthis.DOM.userListPopupWrap = this.BX.create('DIV', {props: {className: 'calendar-user-list-popup-block'}});\n\t\t\tuserList.forEach(function (user)\n\t\t\t{\n\t\t\t\tlet userWrap = this.DOM.userListPopupWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card'}}));\n\n\t\t\t\tuserWrap.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-avatar'}}))\n\t\t\t\t\t.appendChild(this.BX.create('DIV', {props: {className: 'calendar-slider-sidebar-user-block-item'}}))\n\t\t\t\t\t.appendChild(this.BX.create('IMG', {props: {width: 34, height: 34, src: user.AVATAR}}));\n\n\t\t\t\tuserWrap.appendChild(this.BX.create(\"DIV\", {props: {className: 'calendar-slider-sidebar-user-info'}}))\n\t\t\t\t\t.appendChild(this.BX.create(\"A\", {\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\thref: user.URL ? user.URL : '#', className: 'calendar-slider-sidebar-user-info-name'\n\t\t\t\t\t\t}, text: user.DISPLAY_NAME\n\t\t\t\t\t}));\n\t\t\t}, this);\n\n\t\t\tthis.userListPopup = this.BX.PopupWindowManager.create(\"user-list-popup-\" + Math.random(), node, {\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\twidth: 220,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.DOM.userListPopupWrap,\n\t\t\t\tclassName: 'calendar-user-list-popup',\n\t\t\t\tzIndex: 4000\n\t\t\t});\n\n\t\t\tthis.userListPopup.setAngle({offset: 36});\n\t\t\tthis.userListPopup.show();\n\t\t\tthis.BX.addCustomEvent(this.userListPopup, 'onPopupClose', ()=>{this.userListPopup.destroy();});\n\t\t}\n\t}\n\n\tinitAcceptMeetingControl(uid)\n\t{\n\t\tthis.DOM.statusButtonset = this.DOM.content.querySelector(`#${uid}_status_buttonset`);\n\t\tif (this.entry.getCurrentStatus() === 'H')\n\t\t{\n\t\t\tDom.remove(this.DOM.statusButtonset);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setStatus = new MeetingStatusControl(\n\t\t\t{\n\t\t\t\twrap: this.DOM.statusButtonset,\n\t\t\t\tcurrentStatus: this.DOM.content.querySelector(`#${uid}_current_status`).value || this.entry.getCurrentStatus()\n\t\t\t});\n\n\t\t\tthis.setStatus.subscribe('onSetStatus', function(event)\n\t\t\t\t{\n\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet data = event.getData();\n\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, data.status);\n\t\t\t\t\t}\n\t\t\t\t}.bind(this)\n\t\t\t);\n\t\t}\n\t}\n\n\tcopyEventUrl()\n\t{\n\t\tif(!this.entryUrl || !this.BX.clipboard.copy(this.entryUrl))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\tlet popup = new this.BX.PopupWindow(\n\t\t\t'calendar_clipboard_copy',\n\t\t\tthis.DOM.copyButton,\n\t\t\t{\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_TIP_TEMPLATE_LINK_COPIED'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tcachable: false\n\t\t\t}\n\t\t);\n\t\tpopup.show();\n\n\t\tlet timeoutId;\n\t\twhile(timeoutId = this.timeoutIds.pop())\n\t\t{\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t\tthis.timeoutIds.push(setTimeout(function(){popup.close();}, 1500));\n\t}\n\n\tdisplayError(errors = [])\n\t{\n\t\t//errors\n\t}\n\n\tcanDo(entry, action)\n\t{\n\t\tif ((action === 'edit' || action === 'delete'))\n\t\t{\n\t\t\tif ((entry.isMeeting() && entry.id !== entry.parentId)\n\t\t\t\t|| entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.permissions.edit;\n\t\t}\n\n\t\tif ((action === 'view'))\n\t\t{\n\t\t\treturn this.permissions.view_full;\n\t\t}\n\n\t\treturn false;\n\t}\n}"],"names":["EventViewForm","options","type","ownerId","userId","sliderId","zIndex","entryId","entryDateFrom","timezoneOffset","BX","Util","getBX","sliderOnClose","hide","bind","sliderOnLoad","onLoadSlider","slider","promiseResolve","addCustomEvent","proxy","destroy","createContent","then","html","Type","isFunction","opened","params","SidePanel","Instance","open","contentCallback","label","text","Loc","getMessage","bgColor","events","onClose","onCloseComplete","onLoad","event","getSliderPage","getUrl","removeCustomEvent","Event","unbind","document","applyHacksForPopupzIndex","closeAllPopups","getSlider","DOM","content","layout","getData","get","initControls","uid","setFormValues","Promise","resolve","ajax","runAction","data","dateFrom","formatDate","response","isOpen","util","trim","set","additionalParams","uniqueId","entryUrl","handleEntryData","entry","userIndex","section","displayError","errors","title","querySelector","formWrap","form","buttonSet","editButton","delButton","sidebarInner","initPlannerControl","initUserListControl","offsetHeight","addClass","canDo","close","EntryManager","openEditSlider","remove","reminderWrap","isDomNode","viewMode","getCurrentStatus","reminderControl","Reminder","wrap","setValue","getReminders","subscribe","BaseEvent","reminderValues","values","id","reminders","items","querySelectorAll","length","removeClass","deleteEntry","viewElementBind","showTitle","node","isElementNode","getAttribute","isMeeting","initAcceptMeetingControl","copyButton","copyEventUrl","entryData","sectionData","Entry","isPlainObject","permissions","PERM","plannerId","plannerWrap","setTimeout","offsetWidth","onCustomEvent","timeoutCheck","width","window","userList","y","i","q","n","getAttendees","forEach","user","STATUS","push","toLowerCase","attendeesListY","attendeesListN","attendeesListQ","attendeesListI","showUserListPopup","userListPopup","userListPopupWrap","create","props","className","userWrap","appendChild","height","src","AVATAR","href","URL","DISPLAY_NAME","PopupWindowManager","Math","random","autoHide","closeByEsc","offsetTop","offsetLeft","resizable","lightShadow","setAngle","offset","show","statusButtonset","Dom","setStatus","MeetingStatusControl","currentStatus","value","setMeetingStatus","status","clipboard","copy","timeoutIds","popup","PopupWindow","darkMode","angle","cachable","timeoutId","pop","clearTimeout","action","parentId","isResourcebooking","edit","view_full"],"mappings":"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"}