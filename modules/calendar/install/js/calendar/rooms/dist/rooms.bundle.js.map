{"version":3,"file":"rooms.bundle.js","sources":["../src/reservebutton.js","../../sectioninterface/src/editform.js","../src/editformroom.js","../src/editformcategory.js","../src/roomsinterface.js"],"sourcesContent":["import { Type, Dom, Loc } from 'main.core';\nimport { AddButton } from 'calendar.controls';\n\nexport class ReserveButton extends AddButton\n{\n\tconstructor(params = {})\n\t{\n\t\tsuper(params);\n\t\tthis.setEventNamespace('BX.Calendar.Rooms.ReserveButton');\n\t\tthis.zIndex = params.zIndex || 3200;\n\t\tthis.popupId = params.id || 'add-button-' + Math.round(Math.random() * 10000);\n\t\tthis.showTasks = params.showTasks;\n\n\t\tthis.addEntryHandler = Type.isFunction(params.addEntry) ? params.addEntry : null;\n\t\tthis.addTaskHandler = Type.isFunction(params.addTask) ? params.addTask : null;\n\t\tthis.create();\n\t}\n\n\tcreate()\n\t{\n\t\tthis.DOM.wrap = Dom.create('button', {\n\t\t\tprops: { className: 'ui-btn ui-btn-success', type: 'button' },\n\t\t\thtml: Loc.getMessage('EC_RESERVE'),\n\t\t\tevents: { click: this.addEntry.bind(this) }\n\t\t});\n\t}\n}","import { Runtime, Dom, Event, Loc, Text, Type, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {EventEmitter} from 'main.core.events';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\n\n\nexport class EditForm extends EventEmitter\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface.EditForm');\n\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.sectionAccessTasks = options.sectionAccessTasks;\n\t\tthis.sectionManager = options.sectionManager;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.section = params.section;\n\t\tthis.create();\n\t\tthis.showAccess = params.showAccess !== false;\n\t\tthis.allowChangeName = params.allowChangeName !== false;\n\t\tif (this.showAccess)\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = '';\n\t\t\tthis.DOM.accessWrap.style.display = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = 'none';\n\t\t\tthis.DOM.accessWrap.style.display = 'none';\n\t\t}\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tif (params.section)\n\t\t{\n\t\t\tif (params.section.color)\n\t\t\t{\n\t\t\t\tthis.setColor(params.section.color);\n\t\t\t}\n\n\t\t\tthis.setAccess(params.section.access || params.section.data.ACCESS || {});\n\n\t\t\tif (params.section.name)\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.value = params.section.name;\n\t\t\t}\n\t\t}\n\n\t\tif (this.allowChangeName)\n\t\t{\n\t\t\tBX.focus(this.DOM.sectionTitleInput);\n\t\t\tif (this.DOM.sectionTitleInput.value !== '')\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.select();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.sectionTitleInput, '--disabled');\n\t\t\tthis.DOM.sectionTitleInput.disabled = true;\n\t\t}\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tthis.isOpenedState = false;\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tthis.wrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\n\t\tif (this.wrap)\n\t\t{\n\t\t\tDom.clean(this.wrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.wrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-form-content'}}));\n\t\t}\n\n\t\tthis.DOM.formFieldsWrap = this.wrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(\n\t\t\t\tDom.create(\n\t\t\t\t\t'DIV',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content-block'}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t// Title\n\t\tthis.DOM.sectionTitleInput = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-container calendar-field-container-string'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}))\n\t\t\t.appendChild(Dom.create('INPUT', {\n\t\t\t\tattrs: {type: 'text', placeholder: Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')},\n\t\t\t\tprops: {className: 'calendar-field calendar-field-string'}\n\t\t\t}));\n\n\t\tthis.DOM.optionsWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-new-calendar-options-container'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.initSectionColorSelector();\n\n\t\tthis.initAccessController();\n\n\t\t// Buttons\n\t\tthis.buttonsWrap = this.DOM.formFieldsWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-btn-container'}}));\n\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: {click: this.save.bind(this)}\n\t\t});\n\t\tthis.saveBtn.renderTo(this.buttonsWrap);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {click: this.checkClose.bind(this)}\n\t\t}).renderTo(this.buttonsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckClose()\n\t{\n\t\tthis.close();\n\t}\n\n\tsave()\n\t{\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.sectionManager.saveSection(\n\t\t\tthis.DOM.sectionTitleInput.value,\n\t\t\tthis.color,\n\t\t\tthis.access,\n\t\t\t{section: this.section}\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tinitSectionColorSelector()\n\t{\n\t\tthis.DOM.colorContWrap = this.DOM.optionsWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_COLOR')\n\t\t}));\n\t\tthis.colorIcon = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-selected' }\n\t\t}));\n\t\tthis.colorChangeLink = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-change' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_CHANGE')\n\t\t}));\n\t\t\n\t\tEvent.bind(this.colorIcon, 'click', this.showSimplePicker.bind(this));\n\t\tEvent.bind(this.colorChangeLink, 'click', this.showSimplePicker.bind(this));\n\t}\n\n\tshowSimplePicker(value)\n\t{\n\t\tconst colors = Runtime.clone(Util.getDefaultColorList(), true);\n\t\tconst innerCont = Dom.create(\n\t\t\t'DIV',\n\t\t\t{\n\t\t\t\tprops: {className: 'calendar-simple-color-wrap calendar-field-container-colorpicker-square'}\n\t\t\t}\n\t\t);\n\t\tconst colorWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\t\tevents: {click: BX.delegate(this.simplePickerClick, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLinkWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link-wrap'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLink = moreLinkWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'SPAN',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link'},\n\t\t\t\t\thtml: Loc.getMessage('EC_COLOR'),\n\t\t\t\t\tevents: {click: BX.delegate(this.showFullPicker, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.simplePickerColorWrap = colorWrap;\n\t\tthis.colors = [];\n\n\t\tif (!colors.includes(this.color))\n\t\t{\n\t\t\tcolors.push(this.color);\n\t\t}\n\n\t\tfor (let i = 0; i < colors.length; i++)\n\t\t{\n\t\t\tthis.colors.push({\n\t\t\t\tcolor: colors[i],\n\t\t\t\tnode: colorWrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tstyle: {backgroundColor: colors[i]},\n\t\t\t\t\tattrs: {'data-bx-calendar-color': colors[i]},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}))\n\t\t\t});\n\t\t}\n\n\t\tthis.lastActiveNode = this.colors[BX.util.array_search(this.color, colors) || 0].node;\n\t\tDom.addClass(this.lastActiveNode, 'active');\n\n\t\tthis.simpleColorPopup = BX.PopupWindowManager.create(\n\t\t\t\"simple-color-popup-\" + Util.getRandomInt(),\n\t\t\tthis.colorIcon,\n\t\t\t{\n\t\t\t\t//zIndex: this.zIndex,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: innerCont,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.simpleColorPopup.setAngle({offset: 10});\n\t\tthis.simpleColorPopup.show(true);\n\t}\n\n\tsimplePickerClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tconst value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tif (this.lastActiveNode)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.lastActiveNode, 'active');\n\t\t\t\t}\n\n\t\t\t\tDom.addClass(target, 'active');\n\t\t\t\tthis.lastActiveNode = target;\n\t\t\t\tthis.setColor(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFullPicker()\n\t{\n\t\tif (this.simpleColorPopup)\n\t\t{\n\t\t\tthis.simpleColorPopup.close();\n\t\t}\n\n\t\tif (!this.fullColorPicker)\n\t\t{\n\t\t\tthis.fullColorPicker = new BX.ColorPicker({\n\t\t\t\tbindElement: this.colorIcon,\n\t\t\t\tonColorSelected: BX.delegate(function(color){\n\t\t\t\t\tthis.setColor(color);\n\t\t\t\t}, this),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupClose:BX.delegate(function(){\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.fullColorPicker.open();\n\t}\n\n\tsetColor(value)\n\t{\n\t\tthis.colorIcon.style.backgroundColor = value;\n\t\tthis.color = value;\n\t}\n\n\tsetAccess(value)\n\t{\n\t\tlet rowsCount = 0;\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\trowsCount++;\n\t\t\t}\n\t\t}\n\t\tthis.accessRowsCount = rowsCount;\n\t\tthis.access = value;\n\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tthis.insertAccessRow(Util.getAccessName(code), code, value[code]);\n\t\t\t}\n\t\t}\n\t\tthis.checkAccessTableHeight();\n\t}\n\n\tinitAccessController()\n\t{\n\t\tthis.buildAccessController();\n\t\tif (this.sectionManager && this.sectionManager.calendarType === 'group')\n\t\t{\n\t\t\tthis.initDialogGroup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initDialogStandard();\n\t\t}\n\t\tthis.initAccessSelectorPopup();\n\t}\n\n\tinitAccessSelectorPopup()\n\t{\n\t\tEvent.bind(this.DOM.accessWrap, 'click', (e) => {\n\t\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\t\tif (Type.isElementNode(target))\n\t\t\t{\n\t\t\t\tif (target.getAttribute('data-bx-calendar-access-selector') !== null)\n\t\t\t\t{\n\t\t\t\t\t// show selector\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-selector');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAccessSelectorPopup({\n\t\t\t\t\t\t\t\tnode: this.accessControls[code].removeIcon,\n\t\t\t\t\t\t\t\tsetValueCallback: (value) => {\n\t\t\t\t\t\t\t\t\tif (this.accessTasks[value] && this.accessControls[code])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.accessControls[code].valueNode.innerHTML =\n\t\t\t\t\t\t\t\t\t\t\tText.encode(this.accessTasks[value].title);\n\t\t\t\t\t\t\t\t\t\tthis.access[code] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target.getAttribute('data-bx-calendar-access-remove') !== null)\n\t\t\t\t{\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-remove');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.accessControls[code].rowNode);\n\t\t\t\t\t\tthis.accessControls[code] = null;\n\t\t\t\t\t\tdelete this.access[code];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tbuildAccessController()\n\t{\n\t\tthis.DOM.accessLink = this.DOM.optionsWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-new-calendar-option-more\">${Loc.getMessage('EC_SEC_SLIDER_ACCESS')}</div>`,\n\t\t);\n\n\t\tthis.DOM.accessWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-access-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-access-inner-wrap\">\n\t\t\t\t\t\t${this.DOM.accessTable = Tag.render`\n\t\t\t\t\t\t\t<table class=\"calendar-section-slider-access-table\"></table>\n\t\t\t\t\t\t`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-list-slider-new-calendar-options-container\">\n\t\t\t\t\t\t${this.DOM.accessButton = Tag.render`\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-new-calendar-option-add\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ACCESS_ADD')}\n\t\t\t\t\t\t\t</span>`\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`,\n\t\t);\n\n\t\tthis.accessControls = {};\n\t\tthis.accessTasks = this.sectionAccessTasks;\n\n\t\tEvent.bind(this.DOM.accessLink, 'click', () => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\tthis.checkAccessTableHeight();\n\t\t});\n\t}\n\n\tinitDialogStandard()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\tinitDialogGroup()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttabs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'groupAccess',\n\t\t\t\t\t\ttitle: this.sectionManager.ownerName,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'A',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_ADMIN'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'E',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MODERATORS'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'K',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MEMBERS'),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\thandleEntitySelectorChanges()\n\t{\n\t\tconst entityList = this.entitySelectorDialog.getSelectedItems();\n\t\tthis.entitySelectorDialog.hide();\n\t\tif (Type.isArray(entityList))\n\t\t{\n\t\t\tentityList.forEach((entity) => {\n\t\t\t\tlet title;\n\t\t\t\tif (entity.entityId === 'group')\n\t\t\t\t{\n\t\t\t\t\ttitle = this.sectionManager.ownerName + ': ' + entity.title.text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = entity.title.text;\n\t\t\t\t}\n\t\t\t\tconst code = Util.convertEntityToAccessCode(entity);\n\t\t\t\tUtil.setAccessName(code, title);\n\t\t\t\tthis.insertAccessRow(title, code);\n\t\t\t});\n\t\t}\n\n\t\tRuntime.debounce(() => {\n\t\t\tthis.entitySelectorDialog.destroy();\n\t\t}, 400)();\n\t}\n\n\t// todo: refactor it\n\tinsertAccessRow(title, code, value)\n\t{\n\t\tif (!this.accessControls[code])\n\t\t{\n\t\t\tif (value === undefined)\n\t\t\t{\n\t\t\t\tfor(let taskId in this.sectionAccessTasks)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.sectionAccessTasks.hasOwnProperty(taskId)\n\t\t\t\t\t\t&& this.sectionAccessTasks[taskId].name === 'calendar_view'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = taskId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst\n\t\t\t\trowNode = Dom.adjust(this.DOM.accessTable.insertRow(-1), {props : {className: 'calendar-section-slider-access-table-row'}}),\n\t\t\t\ttitleNode = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\thtml: '<span class=\"calendar-section-slider-access-title\">' + Text.encode(title) + ':</span>'}),\n\t\t\t\tvalueCell = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-selector': code}\n\t\t\t\t}),\n\t\t\t\tselectNode = valueCell.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-container'}\n\t\t\t\t})),\n\t\t\t\tvalueNode = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\ttext: this.accessTasks[value] ? this.accessTasks[value].title : '',\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-value'}\n\t\t\t\t})),\n\t\t\t\tremoveIcon = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-remove'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-remove': code}\n\t\t\t\t}));\n\n\t\t\tthis.access[code] = value;\n\n\t\t\tthis.accessControls[code] = {\n\t\t\t\trowNode: rowNode,\n\t\t\t\ttitleNode: titleNode,\n\t\t\t\tvalueNode: valueNode,\n\t\t\t\tremoveIcon: removeIcon\n\t\t\t};\n\t\t}\n\t}\n\n\tcheckAccessTableHeight()\n\t{\n\t\tif (this.checkTableTimeout)\n\t\t{\n\t\t\tthis.checkTableTimeout = clearTimeout(this.checkTableTimeout);\n\t\t}\n\n\t\tthis.checkTableTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tif (this.DOM.accessWrap.offsetHeight - this.DOM.accessTable.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.accessWrap.style.maxHeight = parseInt(this.DOM.accessTable.offsetHeight) + 100 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.accessWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tshowAccessSelectorPopup(params)\n\t{\n\t\tif (\n\t\t\tthis.accessPopupMenu\n\t\t\t&& this.accessPopupMenu.popupWindow\n\t\t\t&& this.accessPopupMenu.popupWindow.isShown()\n\t\t)\n\t\t{\n\t\t\treturn this.accessPopupMenu.close();\n\t\t}\n\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tfor(let taskId in this.accessTasks)\n\t\t{\n\t\t\tif (this.accessTasks.hasOwnProperty(taskId))\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.accessTasks[taskId].title,\n\t\t\t\t\t\tonclick: (function (value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.setValueCallback(value);\n\t\t\t\t\t\t\t\t_this.accessPopupMenu.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(taskId)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.accessPopupMenu = this.BX.PopupMenu.create(\n\t\t\t'section-access-popup' + Util.randomInt(),\n\t\t\tparams.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\toffsetTop: -5,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.accessPopupMenu.show();\n\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Tag, Dom, Loc, Event} from 'main.core';\nimport { EditForm } from '../../sectioninterface/src/editform';\nimport { Util } from 'calendar.util';\nimport { SectionSelector } from 'calendar.controls';\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class EditFormRoom extends EditForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Calendar.Rooms.EditFormRoom');\n\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.roomsManager = options.roomsManager;\n\t\tthis.categoryManager = options.categoryManager;\n\t\tthis.capacityNumbers = [3, 5, 7, 10, 25];\n\t\tthis.zIndex = options.zIndex || 3100;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t\tthis.freezeButtonsCallback = options.freezeButtonsCallback;\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setParams(params);\n\t\tthis.create();\n\t\tif (this.showAccess)\n\t\t{\n\t\t\tDom.style(this.DOM.accessLink, 'display', null);\n\t\t\tDom.style(this.DOM.accessWrap, 'display', null);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.DOM.accessLink, 'display', 'none');\n\t\t\tDom.style(this.DOM.accessWrap, 'display', 'none');\n\t\t}\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tif (this.room)\n\t\t{\n\t\t\tthis.setInputValues(this.room);\n\t\t}\n\n\t\tthis.setFocusOnInput();\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tsetParams(params)\n\t{\n\t\tthis.actionType = params.actionType;\n\t\tthis.room = params.room;\n\t\tthis.showAccess = params.showAccess !== false;\n\t}\n\n\tsetInputValues(room)\n\t{\n\t\tif (room.color)\n\t\t{\n\t\t\tthis.setColor(room.color);\n\t\t}\n\n\t\tthis.setAccess(room.access || room.data.ACCESS || {});\n\n\t\tif (room.name)\n\t\t{\n\t\t\tthis.DOM.roomsTitleInput.value = room.name;\n\t\t}\n\n\t\tif (this.room.capacity)\n\t\t{\n\t\t\tthis.DOM.roomsCapacityInput.value = room.capacity;\n\t\t}\n\t}\n\n\tsetFocusOnInput()\n\t{\n\t\tBX.focus(this.DOM.roomsTitleInput);\n\t\tif (this.DOM.roomsTitleInput.value !== '')\n\t\t{\n\t\t\tthis.DOM.roomsTitleInput.select();\n\t\t}\n\t}\n\n\tcreate()\n\t{\n\t\tthis.wrap = this.getSliderContentWrap();\n\t\tthis.DOM.formFieldsWrap = this.getFormFieldsWrap(this.wrap);\n\n\t\tthis.DOM.roomsTitleInput = this.createTitleInput(this.DOM.formFieldsWrap);\n\t\tthis.DOM.roomsCapacityInput = this.createCapacityInput(this.DOM.formFieldsWrap);\n\t\tthis.DOM.categorySelect = this.DOM.formFieldsWrap.appendChild(this.renderCategorySelector());\n\n\t\tthis.createBottomOptions(this.DOM.formFieldsWrap);\n\t\tthis.createButtons(this.DOM.formFieldsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tgetSliderContentWrap()\n\t{\n\t\tlet sliderContentWrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\t\tif (sliderContentWrap)\n\t\t{\n\t\t\tDom.clean(sliderContentWrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsliderContentWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-form-content\"></div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\treturn sliderContentWrap;\n\t}\n\n\tgetFormFieldsWrap(wrap)\n\t{\n\t\treturn wrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\"></div>\n\t\t\t`\n\t\t\t)\n\t\t\t.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\"></div>\n\t\t\t`\n\t\t\t);\n\t}\n\n\tcreateTitleInput(wrap)\n\t{\n\t\treturn wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-field-container calendar-field-container-string\">\n\t\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"${Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')}\" \n\t\t\t\t\t\t\tclass=\"calendar-field calendar-field-string\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`)\n\t\t.querySelector('.calendar-field')\n\t\t;\n\t}\n\n\tcreateCapacityInput(wrap)\n\t{\n\t\treturn wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-field-container calendar-field-container-string\">\n\t\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t\t<div class =\"calendar-list-slider-card-widget-title\" style=\"margin-bottom: 0\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_SECTION_CAPACITY')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<input type=\"number\" class=\"calendar-field calendar-field-number\" placeholder=\"0\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`)\n\t\t.querySelector('.calendar-field')\n\t\t;\n\t}\n\n\trenderCategorySelector()\n\t{\n\t\tconst categorySelector = this.renderCategorySelectorWrap();\n\n\t\tthis.categoryTagSelector = this.createCategoryTagSelector();\n\n\t\tthis.categoryTagSelector.renderTo(categorySelector.querySelector('.calendar-list-slider-card-widget-title'));\n\t\tif(this.categoryTagSelector.isRendered())\n\t\t{\n\t\t\tthis.onAfterCategorySelectorRender();\n\t\t}\n\n\t\treturn categorySelector;\n\t}\n\n\trenderCategorySelectorWrap()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"calendar-field-container calendar-field-container-string\">\n\t\t\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t\t\t<div class =\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ROOM_CATEGORY')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateCategoryTagSelector()\n\t{\n\t\tlet preparedCategories = [];\n\t\tpreparedCategories = this.prepareCategoriesForDialog(this.categoryManager.getCategories());\n\n\t\tthis.selectedCategory = null;\n\t\tif(this.room && this.room.categoryId)\n\t\t{\n\t\t\tthis.selectedCategory = this.prepareCategoriesForDialog([\n\t\t\t\tthis.categoryManager.getCategory(this.room.categoryId)\n\t\t\t]);\n\t\t}\n\n\t\treturn new TagSelector({\n\t\t\tplaceholder: Loc.getMessage('EC_SEC_SLIDER_CATEGORY_SELECTOR_PLACEHOLDER'),\n\t\t\ttextBoxWidth:320,\n\t\t\tmultiple: false,\n\t\t\tevents: {\n\t\t\t\tonTagAdd: () => {\n\t\t\t\t\tconst itemsContainer = this.categoryTagSelector.getItemsContainer();\n\t\t\t\t\tDom.addClass(\n\t\t\t\t\t\titemsContainer,\n\t\t\t\t\t\t'calendar-room-form-category-selector-container-with-change-button',\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tonTagRemove: () => {\n\t\t\t\t\tconst itemsContainer = this.categoryTagSelector.getItemsContainer();\n\t\t\t\t\tDom.removeClass(\n\t\t\t\t\t\titemsContainer,\n\t\t\t\t\t\t'calendar-room-form-category-selector-container-with-change-button',\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR_CONTEXT',\n\t\t\t\twidth: 315,\n\t\t\t\theight: 280,\n\t\t\t\tcompactView: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\tdropdownMode: true,\n\t\t\t\ttabs: [\n\t\t\t\t\t{ id: 'category', title: 'categories', itemOrder: { title: 'asc' }, icon: 'none'},\n\t\t\t\t],\n\t\t\t\titems: preparedCategories,\n\t\t\t\tselectedItems: this.selectedCategory,\n\t\t\t},\n\t\t});\n\t}\n\n\tonAfterCategorySelectorRender()\n\t{\n\t\t//make avatar containers in input smaller and hide tab icon\n\t\tDom.addClass(this.categoryTagSelector.getDialog().getContainer(),'calendar-room-form-category-selector-dialog');\n\n\t\t//make entity selector input style similar to other inputs in room slider\n\t\tDom.addClass(this.categoryTagSelector.getOuterContainer(), 'calendar-field-tag-selector-outer-container');\n\t\tDom.addClass(this.categoryTagSelector.getTextBox(), 'calendar-field-tag-selector-text-box');\n\t\tif(this.selectedCategory !== null)\n\t\t{\n\t\t\tconst itemsContainer = this.categoryTagSelector.getItemsContainer();\n\t\t\tDom.addClass(itemsContainer, 'calendar-room-form-category-selector-container-with-change-button');\n\t\t}\n\t}\n\n\tcreateBottomOptions(wrap)\n\t{\n\t\tthis.DOM.optionsWrap = wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t<div class=\"calendar-list-slider-new-calendar-options-container\"></div>`\n\t\t);\n\n\t\tthis.initSectionColorSelector();\n\n\t\tthis.initAccessController();\n\t}\n\n\tcreateButtons(wrap)\n\t{\n\t\tthis.buttonsWrap = wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-btn-container\"></div>\n\t\t\t`\n\t\t);\n\n\t\tif (this.actionType === 'createRoom')\n\t\t{\n\t\t\tthis.renderCreateButton(this.buttonsWrap);\n\t\t}\n\t\telse if (this.actionType === 'updateRoom')\n\t\t{\n\t\t\tthis.renderUpdateButton(this.buttonsWrap);\n\t\t}\n\n\t\tthis.renderCancelButton(this.buttonsWrap);\n\t}\n\n\trenderCreateButton(wrap)\n\t{\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: { click: this.createRoom.bind(this) }\n\t\t});\n\t\tthis.saveBtn.renderTo(wrap);\n\t}\n\n\trenderUpdateButton(wrap)\n\t{\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: { click: this.updateRoom.bind(this) }\n\t\t});\n\t\tthis.saveBtn.renderTo(wrap);\n\t}\n\n\trenderCancelButton(wrap)\n\t{\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: { click: this.checkClose.bind(this) }\n\t\t}).renderTo(wrap);\n\t}\n\n\tcreateRoom()\n\t{\n\t\tif(this.freezeButtonsCallback)\n\t\t{\n\t\t\tthis.freezeButtonsCallback();\n\t\t}\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.roomsManager.createRoom({\n\t\t\t\tname: this.DOM.roomsTitleInput.value,\n\t\t\t\tcapacity: this.DOM.roomsCapacityInput.value,\n\t\t\t\tcolor: this.color,\n\t\t\t\taccess: this.access,\n\t\t\t\tcategoryId: this.getSelectedCategory(),\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tinitAccessController()\n\t{\n\t\tthis.buildAccessController();\n\t\tthis.initDialogStandard();\n\t\tthis.initAccessSelectorPopup();\n\t}\n\n\tupdateRoom()\n\t{\n\t\tif(this.freezeButtonsCallback)\n\t\t{\n\t\t\tthis.freezeButtonsCallback();\n\t\t}\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.roomsManager.updateRoom({\n\t\t\t\tid: this.room.id,\n\t\t\t\tlocation_id: this.room.location_id,\n\t\t\t\tname: this.DOM.roomsTitleInput.value,\n\t\t\t\tcapacity: this.DOM.roomsCapacityInput.value,\n\t\t\t\tcolor: this.color,\n\t\t\t\taccess: this.access,\n\t\t\t\tcategoryId: this.getSelectedCategory(),\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (this.categoryTagSelector.getDialog().isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('enter') && this.actionType === 'createRoom')\n\t\t{\n\t\t\tthis.createRoom();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('enter') && this.actionType === 'updateRoom')\n\t\t{\n\t\t\tthis.updateRoom();\n\t\t}\n\t}\n\n\tprepareCategoriesForDialog(categories)\n\t{\n\t\treturn categories.map((category) => {\n\t\t\treturn {\n\t\t\t\tid: category.id,\n\t\t\t\tentityId: 'category',\n\t\t\t\ttitle: category.name,\n\t\t\t\ttabs: 'category',\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSelectedCategory()\n\t{\n\t\tconst item = this.categoryTagSelector.getDialog().getSelectedItems()[0];\n\n\t\treturn item ? item.id : null;\n\t}\n}","import { Tag, Dom, Loc, Event} from 'main.core';\nimport { EditForm } from '../../sectioninterface/src/editform';\nimport { Util } from 'calendar.util';\nimport { Dialog, TagSelector } from 'ui.entity-selector';\n\nexport class EditFormCategory extends EditForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Calendar.Rooms.EditFormCategory');\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.categoryManager = options.categoryManager;\n\t\tthis.zIndex = options.zIndex || 3100;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t\tthis.preparedSelectedRooms = [];\n\t\tthis.freezeButtonsCallback = options.freezeButtonsCallback;\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.setParams(params);\n\n\t\tif(this.category && this.category.rooms)\n\t\t{\n\t\t\tthis.preparedSelectedRooms = this.prepareRoomsForDialog(this.category.rooms);\n\t\t}\n\n\t\tthis.create();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tif (this.category)\n\t\t{\n\t\t\tthis.setInputValues(this.category);\n\t\t}\n\n\t\tthis.setFocusOnInput();\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tsetParams(params)\n\t{\n\t\tthis.actionType = params.actionType;\n\t\tthis.category = params.category;\n\t}\n\n\tsetInputValues()\n\t{\n\t\tif(this.category.name)\n\t\t{\n\t\t\tthis.DOM.categoryTitleInput.value = this.category.name;\n\t\t}\n\t}\n\n\tsetFocusOnInput()\n\t{\n\t\tBX.focus(this.DOM.categoryTitleInput);\n\t\tif (this.DOM.categoryTitleInput.value !== '')\n\t\t{\n\t\t\tthis.DOM.categoryTitleInput.select();\n\t\t}\n\t}\n\n\tcreate(params)\n\t{\n\t\tthis.wrap = this.getSliderContentWrap();\n\t\tthis.DOM.formFieldsWrap = this.getFormFieldsWrap(this.wrap);\n\n\t\tthis.DOM.categoryTitleInput = this.createTitleInput(this.DOM.formFieldsWrap);\n\t\tthis.DOM.locationSelector = this.DOM.formFieldsWrap.appendChild(this.renderRoomSelector());\n\t\tthis.createButtons(this.DOM.formFieldsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tgetSliderContentWrap()\n\t{\n\t\tlet sliderContentWrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\t\tif (sliderContentWrap)\n\t\t{\n\t\t\tDom.clean(sliderContentWrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsliderContentWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-form-content\"></div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\n\t\treturn sliderContentWrap;\n\t}\n\n\tgetFormFieldsWrap(wrap)\n\t{\n\t\treturn wrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\"></div>\n\t\t\t`\n\t\t\t)\n\t\t\t.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\"></div>\n\t\t\t`\n\t\t);\n\t}\n\n\tcreateTitleInput(wrap)\n\t{\n\t\treturn wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-field-container calendar-field-container-string\">\n\t\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t\t<input type=\"text\" placeholder=\"${Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')}\" \n\t\t\t\t\t\t\tclass=\"calendar-field calendar-field-string\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`)\n\t\t.querySelector('.calendar-field')\n\t\t;\n\t}\n\n\trenderRoomSelector()\n\t{\n\t\tconst roomSelector = this.renderRoomSelectorWrap();\n\n\t\tthis.roomTagSelector = this.createRoomTagSelector();\n\n\t\tthis.roomTagSelector.renderTo(roomSelector.querySelector('.calendar-list-slider-card-widget-title'));\n\t\tif(this.roomTagSelector.isRendered())\n\t\t{\n\t\t\tthis.onAfterRoomSelectorRender();\n\t\t}\n\n\t\treturn roomSelector;\n\t}\n\n\trenderRoomSelectorWrap()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-field-container calendar-field-container-string\">\n\t\t\t\t\t<div class=\"calendar-field-block\" >\n\t\t\t\t\t\t<div class =\"calendar-list-slider-card-widget-title\" style=\"border: none\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ROOM_SELECTOR')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateRoomTagSelector()\n\t{\n\t\treturn new TagSelector({\n\t\t\tplaceholder: Loc.getMessage('EC_SEC_SLIDER_ROOM_SELECTOR_PLACEHOLDER'),\n\t\t\ttextBoxWidth:320,\n\t\t\tdialogOptions: {\n\t\t\t\tcontext: 'CALENDAR_CONTEXT',\n\t\t\t\twidth: 315,\n\t\t\t\theight: 280,\n\t\t\t\tcompactView: true,\n\t\t\t\tshowAvatars: true,\n\t\t\t\tdropdownMode: true,\n\t\t\t\tpreload: true,\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'room',\n\t\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\t\tfilters: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: 'calendar.roomFilter',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tselectedItems: this.preparedSelectedRooms,\n\t\t\t\ttabs: [\n\t\t\t\t\t{ id: 'room', title: 'rooms', itemOrder: { title: 'asc' }, icon: 'none'},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\t}\n\n\tonAfterRoomSelectorRender()\n\t{\n\t\t//make avatar containers in input smaller and hide tab icon\n\t\tDom.addClass(this.roomTagSelector.getDialog().getContainer(), 'calendar-category-form-room-selector-dialog');\n\t\tDom.addClass(this.roomTagSelector.getContainer(), 'calendar-category-form-room-tag-selector');\n\n\t\t//make entity selector input style similar to other inputs in room slider\n\t\tDom.addClass(this.roomTagSelector.getOuterContainer(), 'calendar-field-tag-selector-outer-container');\n\t\tDom.addClass(this.roomTagSelector.getTextBox(), 'calendar-field-tag-selector-text-box');\n\t}\n\n\tcreateButtons(wrap)\n\t{\n\t\tthis.buttonsWrap = wrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-btn-container\"></div>\n\t\t\t`\n\t\t);\n\n\t\tif (this.actionType === 'createCategory')\n\t\t{\n\t\t\tthis.renderCreateButton(this.buttonsWrap);\n\t\t}\n\t\telse if (this.actionType === 'updateCategory')\n\t\t{\n\t\t\tthis.renderUpdateButton(this.buttonsWrap);\n\t\t}\n\n\t\tthis.renderCancelButton(this.buttonsWrap);\n\t}\n\n\trenderCreateButton(wrap)\n\t{\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: { click: this.createCategory.bind(this) }\n\t\t});\n\t\tthis.saveBtn.renderTo(wrap);\n\t}\n\n\trenderUpdateButton(wrap)\n\t{\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: { click: this.updateCategory.bind(this) }\n\t\t});\n\t\tthis.saveBtn.renderTo(wrap);\n\t}\n\n\trenderCancelButton(wrap)\n\t{\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: { click: this.checkClose.bind(this) }\n\t\t}).renderTo(wrap);\n\t}\n\n\tcreateCategory()\n\t{\n\t\tif(this.freezeButtonsCallback)\n\t\t{\n\t\t\tthis.freezeButtonsCallback();\n\t\t}\n\t\tthis.saveBtn.setWaiting(true);\n\t\tconst selectedRooms = this.getSelectedRooms();\n\t\tthis.categoryManager.createCategory({\n\t\t\t\tname: this.DOM.categoryTitleInput.value,\n\t\t\t\trooms: selectedRooms,\n\t\t})\n\t\t.then(() => {\n\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\tthis.close();\n\t\t});\n\t}\n\n\tupdateCategory()\n\t{\n\t\tif(this.freezeButtonsCallback)\n\t\t{\n\t\t\tthis.freezeButtonsCallback();\n\t\t}\n\t\tconst newSelectedRooms = this.prepareRoomsBeforeUpdate(this.getSelectedRooms());\n\t\tconst oldSelectedRooms = this.prepareRoomsBeforeUpdate(this.preparedSelectedRooms);\n\n\t\tconst toAddCategory = newSelectedRooms.filter(x => !oldSelectedRooms.includes(x));\n\t\tconst toRemoveCategory = oldSelectedRooms.filter(x => !newSelectedRooms.includes(x));\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.categoryManager.updateCategory({\n\t\t\ttoAddCategory,\n\t\t\ttoRemoveCategory,\n\t\t\tid: this.category.id,\n\t\t\tname: this.DOM.categoryTitleInput.value,\n\t\t})\n\t\t.then(() => {\n\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\tthis.close();\n\t\t});\n\t}\n\n\tgetSelectedRooms()\n\t{\n\t\tconst items = this.roomTagSelector.getDialog().getSelectedItems();\n\t\tconst rooms = [];\n\t\titems.map(item => rooms.push(item.id));\n\n\t\treturn rooms;\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (this.roomTagSelector.getDialog().isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tif (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('enter') && this.actionType === 'createCategory')\n\t\t{\n\t\t\tthis.createCategory();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('enter') && this.actionType === 'updateCategory')\n\t\t{\n\t\t\tthis.updateCategory();\n\t\t}\n\t}\n\n\tprepareRoomsForDialog(rooms)\n\t{\n\t\treturn rooms.map((room) => {\n\t\t\treturn {\n\t\t\t\tid: room.id,\n\t\t\t\tentityId: 'room',\n\t\t\t\ttitle: room.name,\n\t\t\t\tavatarOptions: {\n\t\t\t\t\t'bgColor': room.color,\n\t\t\t\t\t'bgSize': '22px',\n\t\t\t\t\t'bgImage': 'none',\n\t\t\t\t},\n\t\t\t\ttabs: 'room',\n\t\t\t}\n\t\t});\n\t}\n\n\tprepareRoomsBeforeUpdate(rooms)\n\t{\n\t\tif(!rooms)\n\t\t{\n\t\t\treturn  [];\n\t\t}\n\n\t\treturn rooms.map((room) => {\n\t\t\tif(room.id)\n\t\t\t{\n\t\t\t\treturn parseInt(room.id, 10);\n\t\t\t}\n\n\t\t\treturn parseInt(room, 10);\n\t\t});\n\t}\n}","import { Type, Dom, Loc, Tag, Event, Text } from 'main.core';\nimport { SectionInterface } from 'calendar.sectioninterface';\nimport { Util } from 'calendar.util';\nimport { EditFormRoom } from './editformroom';\nimport { EditFormCategory } from './editformcategory';\n\nexport class RoomsInterface extends SectionInterface\n{\n\tSLIDER_WIDTH = 400;\n\tSLIDER_DURATION = 80;\n\tsliderId = \"calendar:rooms-slider\";\n\tCATEGORY_ROOMS_SHOWN_ALL = 0;\n\tCATEGORY_ROOMS_SHOWN_SOME = 1;\n\tCATEGORY_ROOMS_SHOWN_NONE = 2;\n\n\tconstructor({ calendarContext, readonly, roomsManager, categoryManager, isConfigureList = false })\n\t{\n\t\tsuper({ calendarContext, readonly, roomsManager });\n\t\tthis.setEventNamespace('BX.Calendar.RoomsInterface');\n\t\tthis.roomsManager = roomsManager;\n\t\tthis.categoryManager = categoryManager;\n\t\tthis.isConfigureList = isConfigureList;\n\t\tthis.calendarContext = calendarContext;\n\t\tthis.readonly = readonly;\n\t\tthis.BX = Util.getBX();\n\t\tthis.sliderOnClose = this.hide.bind(this);\n\t\tthis.deleteRoomHandlerBinded = this.deleteRoomHandler.bind(this);\n\t\tthis.refreshRoomsBinded = this.refreshRooms.bind(this);\n\t\tthis.refreshCategoriesBinded = this.refreshCategories.bind(this);\n\t\tif (this.calendarContext !== null)\n\t\t{\n\t\t\tif (this.calendarContext.util.config.accessNames)\n\t\t\t{\n\t\t\t\tUtil.setAccessNames(this.calendarContext?.util?.config?.accessNames);\n\t\t\t}\n\t\t}\n\t\tthis.setRoomsFromManager();\n\t\tthis.setCategoriesFromManager();\n\t}\n\n\taddEventEmitterSubscriptions()\n\t{\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:create',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:update',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:delete',\n\t\t\tthis.deleteRoomHandlerBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:pull-create',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:pull-update',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms:pull-delete',\n\t\t\tthis.deleteRoomHandlerBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:create',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:update',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:delete',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-create',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-update',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-delete',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t}\n\n\tdestroyEventEmitterSubscriptions()\n\t{\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:create',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:update',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:delete',\n\t\t\tthis.deleteRoomHandlerBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:pull-create',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:pull-update',\n\t\t\tthis.refreshRoomsBinded\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms:pull-delete',\n\t\t\tthis.deleteRoomHandlerBinded\n\t\t);\n\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:create',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:update',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:delete',\n\t\t\tthis.refreshCategoriesBinded\n\t\t);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-create',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-update',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Rooms.Categories:pull-delete',\n\t\t\tthis.refreshCategoriesBinded,\n\t\t);\n\t}\n\n\tcreateContent()\n\t{\n\t\tthis.DOM.outerWrap = this.renderOuterWrap();\n\t\tthis.DOM.titleWrap = this.DOM.outerWrap.appendChild(this.renderTitleWrap());\n\n\t\tif (!this.readonly)\n\t\t{\n\t\t\t// #1. Controls\n\t\t\tthis.DOM.addButton = this.DOM.titleWrap.appendChild(this.renderAddButton());\n\n\t\t\t// #2. Forms\n\t\t\tthis.DOM.roomFormWrap = this.DOM.outerWrap.appendChild(this.renderRoomFormWrap());\n\t\t}\n\t\tthis.createRoomBlocks();\n\n\t\treturn this.DOM.outerWrap;\n\t}\n\n\trenderOuterWrap()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-wrap\"></div>\n\t\t\t`\n\t\t;\n\t}\n\n\trenderTitleWrap()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-title-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-title\">${Loc.getMessage('EC_SECTION_ROOMS')}</div>\n\t\t\t\t</div>\n\t\t\t`\n\t\t;\n\t}\n\n\trenderAddButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-btn-split ui-btn-light-border\" style=\"margin-right: 0\">\n\t\t\t\t\t<span class=\"ui-btn-main\" onclick=\"${this.showEditRoomForm.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('EC_ADD')}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span id = \"add-menu-button\" class=\"ui-btn-menu\" onclick=\"${this.showAddMenu.bind(this)}\"></span>\n\t\t\t\t</span>\n\t\t`;\n\t}\n\n\trenderRoomFormWrap()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">${Loc.getMessage('EC_SEC_SLIDER_NEW_ROOM')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\tshowAddMenu(): void\n\t{\n\t\tconst menuButtons = this.createAddMenuButtons();\n\n\t\tif (menuButtons && menuButtons.length > 0)\n\t\t{\n\t\t\tthis.addRoomMenu = this.createAddMenu(menuButtons);\n\t\t\tthis.addRoomMenu.popupWindow.show();\n\t\t\tthis.addRoomMenu.popupWindow.subscribe('onClose', () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t}\n\n\tcreateAddMenuButtons()\n\t{\n\t\tconst menuButtons = [];\n\n\t\tmenuButtons.push({\n\t\t\ttext: Loc.getMessage('EC_ADD_LOCATION'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.addRoomMenu.close();\n\t\t\t\tthis.showEditRoomForm();\n\t\t\t},\n\t\t});\n\t\tmenuButtons.push({\n\t\t\ttext: Loc.getMessage('EC_ADD_CATEGORY'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.addRoomMenu.close();\n\t\t\t\tthis.showEditCategoryForm();\n\t\t\t},\n\t\t});\n\n\t\treturn menuButtons;\n\t}\n\n\tcreateAddMenu(menuButtons)\n\t{\n\t\tconst params = {\n\t\t\toffsetLeft: 20,\n\t\t\tcloseByEsc: true,\n\t\t\tangle: {\n\t\t\t\tposition: 'top'\n\t\t\t},\n\t\t\tautoHide: true,\n\t\t\toffsetTop: 0,\n\t\t\tcacheable: false\n\t\t};\n\n\t\treturn new BX.PopupMenuWindow(\n\t\t\t'add-menu-form-' + Util.getRandomInt(),\n\t\t\tBX(\"add-menu-button\"),\n\t\t\tmenuButtons,\n\t\t\tparams\n\t\t);\n\t}\n\n\tcreateRoomBlocks()\n\t{\n\t\tthis.setBlocksWrap();\n\n\t\tif (Type.isArray(this.rooms) || Type.isObject(this.categories))\n\t\t{\n\t\t\tthis.categories['categories'].forEach((category) => {\n\t\t\t\tif(category.rooms.length !== 0)\n\t\t\t\t{\n\t\t\t\t\tthis.createCategoryBlock(category, this.createBlockWrap(this.DOM.blocksWrap));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(this.categories['default'].length > 0)\n\t\t\t{\n\t\t\t\tlet defaultBlockWrap = this.createBlockWrap(this.DOM.blocksWrap);\n\t\t\t\tthis.categories['default'].forEach(room => this.createRoomBlock(room, defaultBlockWrap));\n\t\t\t}\n\n\t\t\tthis.categories['categories'].forEach((category) => {\n\t\t\t\tif(category.rooms.length === 0 && this.categoryManager.canDo('edit'))\n\t\t\t\t{\n\t\t\t\t\tthis.createCategoryBlock(category, this.createBlockWrap(this.DOM.blocksWrap));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.isFrozen())\n\t\t{\n\t\t\tthis.unfreezeButtons();\n\t\t}\n\t}\n\n\tsetRoomsFromManager()\n\t{\n\t\tthis.rooms = this.roomsManager.getRooms()\n\t\t\t.filter(function(room) {\n\t\t\t\treturn room.belongsToView() || room.isPseudo();\n\t\t\t})\n\t\t;\n\t}\n\n\tsetCategoriesFromManager()\n\t{\n\t\tthis.categories = this.categoryManager.getCategoriesWithRooms(this.rooms);\n\t}\n\n\tsetBlocksWrap()\n\t{\n\t\tif (this.DOM.blocksWrap)\n\t\t{\n\t\t\tDom.clean(this.DOM.blocksWrap);\n\t\t\tDom.adjust(this.DOM.blocksWrap, {\n\t\t\t\tprops: { className: '' }\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.blocksWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div></div>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n\n\tshowEditRoomForm(params = {})\n\t{\n\t\tif (typeof params.actionType === 'undefined')\n\t\t{\n\t\t\tparams.actionType = 'createRoom';\n\t\t}\n\t\tthis.closeForms();\n\t\tconst formTitleNode = this.DOM.roomFormWrap.querySelector('.calendar-list-slider-card-widget-title-text');\n\n\t\tthis.editSectionForm = new EditFormRoom({\n\t\t\twrap: this.DOM.roomFormWrap,\n\t\t\tsectionAccessTasks: this.roomsManager.getSectionAccessTasks(),\n\t\t\troomsManager: this.roomsManager,\n\t\t\tcategoryManager: this.categoryManager,\n\t\t\tfreezeButtonsCallback: this.freezeButtons.bind(this),\n\t\t\tcloseCallback: () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t}\n\t\t});\n\n\t\tlet showAccess = true;\n\t\tif (params.room && params.room.id)\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION_ROOM');\n\t\t\tshowAccess = params.room.canDo('access');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_NEW_ROOM');\n\t\t}\n\n\t\tthis.editSectionForm.show({\n\t\t\tshowAccess,\n\t\t\troom: params.room || {\n\t\t\t\tcolor: Util.getRandomColor(),\n\t\t\t\taccess: this.roomsManager.getDefaultSectionAccess()\n\t\t\t},\n\t\t\tactionType: params.actionType\n\t\t});\n\n\t\tthis.denySliderClose();\n\t}\n\n\tshowEditCategoryForm(params = {})\n\t{\n\t\tif (typeof params.actionType === 'undefined')\n\t\t{\n\t\t\tparams.actionType = 'createCategory';\n\t\t}\n\n\t\tthis.closeForms();\n\t\tconst formTitleNode = this.DOM.roomFormWrap.querySelector('.calendar-list-slider-card-widget-title-text');\n\n\t\tthis.editSectionForm = new EditFormCategory({\n\t\t\twrap: this.DOM.roomFormWrap,\n\t\t\tsectionAccessTasks: this.roomsManager.getSectionAccessTasks(),\n\t\t\tcategoryManager: this.categoryManager,\n\t\t\tfreezeButtonsCallback: this.freezeButtons.bind(this),\n\t\t\tcloseCallback: () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t}\n\t\t});\n\n\t\tif (params.category && params.category.id)\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_ROOM_CATEGORY');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_NEW_CATEGORY');\n\t\t}\n\n\t\tthis.editSectionForm.show({\n\t\t\tcategory: params.category || {},\n\t\t\tactionType: params.actionType\n\t\t});\n\n\t\tthis.denySliderClose();\n\t}\n\n\tshowRoomMenu(room, menuItemNode)\n\t{\n\t\tconst itemNode = menuItemNode.closest('[data-bx-calendar-section]')\n\t\t\t|| menuItemNode.closest('[ data-bx-calendar-section-without-action]')\n\t\t;\n\n\t\tif (Type.isElementNode(itemNode))\n\t\t{\n\t\t\tDom.addClass(itemNode, 'active');\n\t\t}\n\n\t\tconst menuItems = this.createRoomMenuButtons(room);\n\n\t\tif (menuItems && menuItems.length > 0)\n\t\t{\n\t\t\tthis.roomActionMenu = this.createRoomMenu(menuItems, menuItemNode);\n\n\t\t\tthis.roomActionMenu.show();\n\t\t\tthis.roomActionMenu.popupWindow.subscribe('onClose', () => {\n\t\t\t\tif (Type.isElementNode(itemNode))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(itemNode, 'active');\n\t\t\t\t}\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(itemNode, 'active');\n\t\t}\n\t}\n\n\tcreateRoomMenuButtons(room)\n\t{\n\t\tconst menuItems = [];\n\n\t\tif (room.canDo('view_time') && !this.isConfigureList)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_LEAVE_ONE_ROOM'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roomActionMenu.close();\n\t\t\t\t\tthis.showOnlyOneSection(room, this.roomsManager.rooms);\n\t\t\t\t\tthis.updateAllCategoriesCheckboxState();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!this.readonly && room.canDo('edit_section'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roomActionMenu.close();\n\t\t\t\t\tthis.showEditRoomForm({ room: room, actionType: 'updateRoom' });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (room.canDo('edit_section') && room.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_DELETE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.roomActionMenu.close();\n\t\t\t\t\tthis.deleteRoom(room);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tcreateRoomMenu(menuItems, menuItemNode)\n\t{\n\t\tconst params = {\n\t\t\tcloseByEsc: true,\n\t\t\tautoHide: true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 9,\n\t\t\tangle: true,\n\t\t\tcacheable: false,\n\t\t};\n\n\t\treturn top.BX.PopupMenu.create(\n\t\t\t'section-menu-' + Util.getRandomInt(),\n\t\t\tmenuItemNode,\n\t\t\tmenuItems,\n\t\t\tparams\n\t\t);\n\t}\n\n\trefreshRooms()\n\t{\n\t\tthis.setRoomsFromManager();\n\t\tthis.setCategoriesFromManager();\n\t\tthis.createRoomBlocks();\n\t}\n\n\trefreshCategories()\n\t{\n\t\tthis.roomsManager.reloadRoomsFromDatabase().then(this.refreshRoomsBinded);\n\t}\n\n\tcreateBlockWrap(wrap)\n\t{\n\t\tconst listWrap =\n\t\t\twrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-category-widget\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t\t\t<ul class=\"calendar-list-slider-container\"></ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t)\n\t\t\t.querySelector('.calendar-list-slider-container')\n\t\t;\n\t\tEvent.bind(listWrap, 'click', this.roomClickHandler.bind(this));\n\n\t\treturn listWrap;\n\t}\n\n\tcreateCategoryBlock(category, listWrap)\n\t{\n\t\tif (!category.DOM)\n\t\t{\n\t\t\tcategory.DOM = {};\n\t\t}\n\n\t\tcategory.DOM.item = listWrap.appendChild(this.renderCategoryBlockWrap(category));\n\n\t\tconst categoryRooms = this.categoryManager.getCategoryRooms(category, this.rooms);\n\t\tif(!this.isConfigureList && categoryRooms.length)\n\t\t{\n\t\t\tcategory.setCheckboxStatus(this.determineCategoryCheckboxStatus(category, categoryRooms));\n\t\t\tcategory.DOM.checkbox =\n\t\t\t\tcategory.DOM.item.appendChild(this.renderCategoryBlockCheckbox(category, categoryRooms))\n\t\t\t;\n\t\t}\n\n\t\tcategory.DOM.title = category.DOM.item.appendChild(this.renderCategoryBlockTitle(category));\n\n\t\tif(this.categoryManager.canDo('edit') || category.rooms.length > 0)\n\t\t{\n\t\t\tcategory.DOM.actionCont = category.DOM.item.appendChild(this.renderCategoryBlockActionsContainer(category));\n\t\t}\n\n\t\tthis.createCategoryBlockContent(category, listWrap);\n\t\treturn category;\n\t}\n\n\trenderCategoryBlockWrap(category)\n\t{\n\t\tif (this.isConfigureList)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item-category\"\n\t\t\t\t\t\tdata-bx-calendar-category-without-action=\"${category.id}\"\n\t\t\t\t\t>\n\t\t\t\t\t</li>\n\t\t\t\t`\n\t\t\t;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item-category\" data-bx-calendar-category=\"${category.id}\"></li>\n\t\t`;\n\t}\n\n\trenderCategoryBlockCheckbox(category)\n\t{\n\t\tlet checkboxStyle = '';\n\t\tif(category.checkboxStatus === this.CATEGORY_ROOMS_SHOWN_ALL)\n\t\t{\n\t\t\tcheckboxStyle = 'calendar-list-slider-item-checkbox-checked';\n\t\t}\n\t\telse if(category.checkboxStatus === this.CATEGORY_ROOMS_SHOWN_SOME)\n\t\t{\n\t\t\tcheckboxStyle = 'calendar-list-slider-item-checkbox-indeterminate';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"calendar-title-checkbox calendar-list-slider-item-checkbox\n\t\t\t\t\t\t${checkboxStyle}\" style=\"background-color: #a5abb2\"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCategoryBlockActionsContainer(category)\n\t{\n\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-item-actions-container\n\t\t\t\t\tcalendar-list-slider-item-context-menu-category-wrap\" \n\t\t\t\t\t\tdata-bx-calendar-category-menu=\"${category.id}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"calendar-list-slider-item-context-menu\n\t\t\t\t\t\t\tcalendar-list-slider-item-context-menu-category\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderCategoryBlockTitle(category)\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-widget-title-text calendar-list-slider-item-category-text\" \n\t\t\t\t\ttitle=\"${Text.encode(category.name)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(category.name)}\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreateCategoryBlockContent(category, wrap)\n\t{\n\t\tif(category.rooms.length)\n\t\t{\n\t\t\tcategory.rooms.forEach((room) => this.createRoomBlock(room, wrap));\n\t\t}\n\t\telse\n\t\t{\n\t\t\twrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-card-widget-title-text\">${Loc.getMessage('EC_CATEGORY_EMPTY')}</li>\n\t\t\t\t`\n\t\t\t);\n\t\t}\n\t}\n\n\tcreateRoomBlock(room, listWrap)\n\t{\n\t\tif (!room.DOM)\n\t\t{\n\t\t\troom.DOM = {};\n\t\t}\n\n\t\troom.DOM.item = listWrap.appendChild(this.renderRoomBlockWrap(room))\n\t\troom.DOM.checkbox = room.DOM.item.appendChild(this.renderRoomBlockCheckbox(room));\n\t\troom.DOM.title = room.DOM.item.appendChild(this.renderRoomBlockTitle(room));\n\t\troom.DOM.actionCont = room.DOM.item.appendChild(this.renderRoomBlockActionsContainer(room));\n\n\t\treturn room;\n\t}\n\n\trenderRoomBlockWrap(room)\n\t{\n\t\tif (this.isConfigureList)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item\"  data-bx-calendar-section-without-action=\"${room.id}\"></li>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${room.id}\"></li>\n\t\t`;\n\t}\n\n\trenderRoomBlockCheckbox(room)\n\t{\n\t\tif (this.isConfigureList)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class=\"calendar-field-select-icon\" style=\"background-color: ${room.color}\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-item-checkbox \n\t\t\t\t\t${room.isShown() ? 'calendar-list-slider-item-checkbox-checked' : ''}\" \n\t\t\t\t\tstyle=\"background-color: ${room.color}\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderRoomBlockTitle(room)\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-item-name\" title=\"${Text.encode(room.name)}\">\n\t\t\t\t\t${Text.encode(room.name)}\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderRoomBlockActionsContainer(room)\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-item-actions-container\" data-bx-calendar-section-menu=\"${room.id}\">\n\t\t\t\t\t<span class=\"calendar-list-slider-item-context-menu\"></span>\n\t\t\t\t</div>\n\t\t`;\n\t}\n\n\troomClickHandler(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tif (target.getAttribute('data-bx-calendar-category') !== null)\n\t\t\t{\n\t\t\t\tconst category = this.categoryManager.getCategory(\n\t\t\t\t\tparseInt(target.getAttribute('data-bx-calendar-category'), 10)\n\t\t\t\t);\n\t\t\t\tif(category && category.rooms.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.switchCategory(category, this.rooms);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (target.getAttribute('data-bx-calendar-category-menu') !== null)\n\t\t\t{\n\t\t\t\tlet categoryId = target.getAttribute('data-bx-calendar-category-menu');\n\t\t\t\tthis.showCategoryMenu(this.categoryManager.getCategory(categoryId), target);\n\t\t\t}\n\t\t\telse if (target.getAttribute('data-bx-calendar-section-menu') !== null)\n\t\t\t{\n\t\t\t\tlet roomId = target.getAttribute('data-bx-calendar-section-menu');\n\t\t\t\tthis.showRoomMenu(this.roomsManager.getRoom(roomId), target);\n\t\t\t}\n\t\t\telse if (target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tlet roomId = target.getAttribute('data-bx-calendar-section');\n\t\t\t\tconst room = this.roomsManager.getRoom(roomId);\n\t\t\t\tthis.switchSection(room);\n\t\t\t\tthis.updateCategoryCheckboxState(this.categoryManager.getCategory(room.categoryId));\n\t\t\t}\n\t\t}\n\t}\n\n\tsetRoomsForCategory(categoryId)\n\t{\n\t\tthis.categoryManager.unsetCategoryRooms(categoryId);\n\n\t\tconst rooms = this.roomsManager.getRooms();\n\t\tconst categoryManager = this.categoryManager;\n\n\t\trooms.forEach(function(room){\n\t\t\tif(room.categoryId === categoryId)\n\t\t\t{\n\t\t\t\tcategoryManager.getCategory(categoryId).addRoom(room)\n\t\t\t}\n\t\t},this);\n\t}\n\n\tshowOnlyOneCategory(category, sections)\n\t{\n\t\tfor (let curSection of sections)\n\t\t{\n\t\t\tif (curSection.categoryId === category.id)\n\t\t\t{\n\t\t\t\tthis.switchOnSection(curSection);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.switchOffSection(curSection);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateAllCategoriesCheckboxState();\n\n\t\tthis.calendarContext.reload();\n\t}\n\n\tshowCategoryMenu(category, menuItemNode)\n\t{\n\t\tthis.setRoomsForCategory(category.id);\n\n\t\tconst menuItems = this.createCategoryMenuButtons(category);\n\n\t\tif (menuItems && menuItems.length > 0)\n\t\t{\n\t\t\tthis.categoryActionMenu = this.createCategoryMenu(menuItems, menuItemNode);\n\n\t\t\tthis.categoryActionMenu.show();\n\t\t\tthis.categoryActionMenu.popupWindow.subscribe('onClose', () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t}\n\n\tcreateCategoryMenuButtons(category)\n\t{\n\t\tconst menuItems = [];\n\n\t\tif (this.categoryManager.canDo('view') && !this.isConfigureList && category.rooms.length > 0)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_LEAVE_ONE_ROOM'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.categoryActionMenu.close();\n\t\t\t\t\tthis.showOnlyOneCategory(category, this.roomsManager.rooms);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (!this.readonly && this.categoryManager.canDo('edit'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.categoryActionMenu.close();\n\t\t\t\t\tthis.showEditCategoryForm({ category: category, actionType: 'updateCategory' });\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif (this.categoryManager.canDo('edit'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_DELETE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.categoryActionMenu.close();\n\t\t\t\t\tthis.freezeButtons();\n\t\t\t\t\tthis.categoryManager.deleteCategory(category.id, this.unfreezeButtons.bind(this));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn menuItems;\n\t}\n\n\tcreateCategoryMenu(menuItems, menuItemNode)\n\t{\n\t\tconst params = {\n\t\t\tcloseByEsc: true,\n\t\t\tautoHide: true,\n\t\t\tzIndex: this.zIndex,\n\t\t\toffsetTop: 0,\n\t\t\toffsetLeft: 9,\n\t\t\tangle: true,\n\t\t\tcacheable: false,\n\t\t};\n\n\t\treturn top.BX.PopupMenu.create(\n\t\t\t'category-menu-' + Util.getRandomInt(),\n\t\t\tmenuItemNode,\n\t\t\tmenuItems,\n\t\t\tparams,\n\t\t);\n\t}\n\n\tfindCheckBoxNodes(id)\n\t{\n\t\treturn this.DOM.blocksWrap.querySelectorAll(\n\t\t\t'.calendar-list-slider-item[data-bx-calendar-section=\\''\n\t\t\t+ id\n\t\t\t+ '\\'] .calendar-list-slider-item-checkbox'\n\t\t);\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t\tBX.removeCustomEvent('SidePanel.Slider:onCloseComplete', BX.proxy(this.destroy, this));\n\t\t\tBX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tdelete this.DOM.blocksWrap;\n\n\t\t\tif (this.roomActionMenu)\n\t\t\t{\n\t\t\t\tthis.roomActionMenu.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tdeleteRoomHandler(event)\n\t{\n\t\tif (event && event instanceof Util.getBX().Event.BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst deleteID = parseInt(data.id);\n\n\t\t\tthis.rooms.forEach((room, index) => {\n\t\t\t\tif (parseInt(room.id) === deleteID && room.DOM && room.DOM.item)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(room.DOM.item, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.clean(room.DOM.item, true);\n\t\t\t\t\t\tthis.rooms.splice(index, 1);\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\t\t\t}, this);\n\n\t\t\tthis.closeForms();\n\t\t}\n\t\tthis.refreshRooms();\n\t}\n\n\tdeleteRoom(room)\n\t{\n\t\tthis.roomsManager.deleteRoom(\n\t\t\troom.id,\n\t\t\troom.location_id\n\t\t);\n\t}\n\n\tfreezeButtons()\n\t{\n\t\tDom.addClass(this.DOM.outerWrap, 'calendar-content-locked');\n\t}\n\n\tunfreezeButtons()\n\t{\n\t\tDom.removeClass(this.DOM.outerWrap, 'calendar-content-locked');\n\t}\n\n\tisFrozen()\n\t{\n\t\treturn Dom.hasClass(this.DOM.outerWrap, 'calendar-content-locked');\n\t}\n\n\tupdateCategoryCheckboxState(category)\n\t{\n\t\tif(!category)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst updatedCategoryCheckboxStatus = this.determineCategoryCheckboxStatus(category, this.roomsManager.rooms);\n\n\t\tif(category.checkboxStatus !== updatedCategoryCheckboxStatus)\n\t\t{\n\t\t\tcategory.setCheckboxStatus(updatedCategoryCheckboxStatus);\n\t\t\tthis.setCategoryCheckboxState(this.findCategoryCheckBoxNode(category.id), updatedCategoryCheckboxStatus);\n\t\t}\n\t}\n\n\tdetermineCategoryCheckboxStatus(category, rooms)\n\t{\n\t\tlet hasEnabled = false;\n\t\tlet hasDisabled = false;\n\n\t\trooms.forEach((room) => {\n\t\t\tif(room.categoryId === category.id)\n\t\t\t{\n\t\t\t\tif(room.isShown() && !hasEnabled)\n\t\t\t\t{\n\t\t\t\t\thasEnabled = true;\n\t\t\t\t}\n\n\t\t\t\tif(!room.isShown() && !hasDisabled)\n\t\t\t\t{\n\t\t\t\t\thasDisabled = true;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(hasEnabled && hasDisabled)\n\t\t{\n\t\t\treturn this.CATEGORY_ROOMS_SHOWN_SOME;\n\t\t}\n\n\t\tif(hasEnabled)\n\t\t{\n\t\t\treturn this.CATEGORY_ROOMS_SHOWN_ALL;\n\t\t}\n\n\t\treturn this.CATEGORY_ROOMS_SHOWN_NONE;\n\t}\n\n\tswitchCategory(category, rooms)\n\t{\n\t\tconst checkboxNode = this.findCategoryCheckBoxNode(category.id);\n\n\t\tswitch (category.checkboxStatus)\n\t\t{\n\t\t\tcase this.CATEGORY_ROOMS_SHOWN_SOME:\n\t\t\tcase this.CATEGORY_ROOMS_SHOWN_NONE:\n\t\t\t\tthis.switchOnCategoryRooms(category.id, rooms);\n\t\t\t\tthis.setCategoryCheckboxState(checkboxNode, this.CATEGORY_ROOMS_SHOWN_ALL);\n\t\t\t\tcategory.setCheckboxStatus(this.CATEGORY_ROOMS_SHOWN_ALL);\n\t\t\t\tbreak;\n\t\t\tcase this.CATEGORY_ROOMS_SHOWN_ALL:\n\t\t\t\tthis.switchOffCategoryRooms(category.id, rooms);\n\t\t\t\tthis.setCategoryCheckboxState(checkboxNode, this.CATEGORY_ROOMS_SHOWN_NONE);\n\t\t\t\tcategory.setCheckboxStatus(this.CATEGORY_ROOMS_SHOWN_NONE);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.calendarContext.reload();\n\t}\n\n\tsetCategoryCheckboxState(checkboxNode, checkboxStatus)\n\t{\n\t\tDom.removeClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\tDom.removeClass(checkboxNode, 'calendar-list-slider-item-checkbox-indeterminate');\n\n\t\tswitch (checkboxStatus)\n\t\t{\n\t\t\tcase this.CATEGORY_ROOMS_SHOWN_SOME:\n\t\t\t\tDom.addClass(checkboxNode, 'calendar-list-slider-item-checkbox-indeterminate');\n\t\t\t\tbreak;\n\t\t\tcase this.CATEGORY_ROOMS_SHOWN_ALL:\n\t\t\t\tDom.addClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfindCategoryCheckBoxNode(id)\n\t{\n\t\treturn this.DOM.outerWrap.querySelector(\n\t\t\t'.calendar-list-slider-item-category[data-bx-calendar-category=\\''\n\t\t\t+ id\n\t\t\t+ '\\'] .calendar-list-slider-item-checkbox'\n\t\t);\n\t}\n\n\tswitchOnCategoryRooms(categoryId, rooms)\n\t{\n\t\trooms.forEach((room) =>{\n\t\t\tif(room.categoryId === categoryId && !room.isShown())\n\t\t\t{\n\t\t\t\tthis.switchOnSection(room);\n\t\t\t}\n\t\t});\n\t}\n\n\tswitchOffCategoryRooms(categoryId, rooms)\n\t{\n\t\trooms.forEach((room) =>{\n\t\t\tif(room.categoryId === categoryId && room.isShown())\n\t\t\t{\n\t\t\t\tthis.switchOffSection(room);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateAllCategoriesCheckboxState()\n\t{\n\t\tthis.categoryManager.getCategories().forEach(category => this.updateCategoryCheckboxState(category));\n\t}\n}"],"names":["ReserveButton","AddButton","constructor","params","setEventNamespace","zIndex","popupId","id","Math","round","random","showTasks","addEntryHandler","Type","isFunction","addEntry","addTaskHandler","addTask","create","DOM","wrap","Dom","props","className","type","html","Loc","getMessage","events","click","bind","EditForm","EventEmitter","options","isCreated","outerWrap","sectionAccessTasks","sectionManager","closeCallback","BX","Util","getBX","keyHandlerBinded","keyHandler","show","section","showAccess","allowChangeName","accessLink","style","display","accessWrap","Event","document","addClass","color","setColor","setAccess","access","data","ACCESS","name","sectionTitleInput","value","focus","select","disabled","isOpenedState","close","unbind","removeClass","isOpened","querySelector","clean","appendChild","formFieldsWrap","attrs","placeholder","optionsWrap","initSectionColorSelector","initAccessController","buttonsWrap","saveBtn","UI","Button","text","save","renderTo","checkClose","e","keyCode","getKeyCode","setWaiting","saveSection","then","colorContWrap","colorIcon","colorChangeLink","showSimplePicker","colors","Runtime","clone","getDefaultColorList","innerCont","colorWrap","delegate","simplePickerClick","moreLinkWrap","moreLink","showFullPicker","simplePickerColorWrap","includes","push","i","length","node","backgroundColor","lastActiveNode","util","array_search","simpleColorPopup","PopupWindowManager","getRandomInt","autoHide","closeByEsc","offsetTop","offsetLeft","lightShadow","content","cacheable","setAngle","offset","target","findTargetNode","srcElement","isElementNode","getAttribute","fullColorPicker","ColorPicker","bindElement","onColorSelected","popupOptions","onPopupClose","open","rowsCount","code","hasOwnProperty","accessRowsCount","insertAccessRow","getAccessName","checkAccessTableHeight","buildAccessController","calendarType","initDialogGroup","initDialogStandard","initAccessSelectorPopup","accessControls","showAccessSelectorPopup","removeIcon","setValueCallback","accessTasks","valueNode","innerHTML","Text","encode","title","remove","rowNode","Tag","render","accessTable","accessButton","hasClass","entitySelectorDialog","EntitySelectorDialog","targetNode","context","preselectedItems","enableSearch","handleEntitySelectorChanges","targetContainer","body","entities","selectMode","tabs","ownerName","items","ownerId","entityId","entityList","getSelectedItems","hide","isArray","forEach","entity","convertEntityToAccessCode","setAccessName","debounce","destroy","undefined","taskId","adjust","insertRow","titleNode","insertCell","valueCell","selectNode","checkTableTimeout","clearTimeout","setTimeout","offsetHeight","maxHeight","parseInt","accessPopupMenu","popupWindow","isShown","_this","menuItems","onclick","PopupMenu","randomInt","angle","EditFormRoom","roomsManager","categoryManager","capacityNumbers","freezeButtonsCallback","setParams","room","setInputValues","setFocusOnInput","actionType","roomsTitleInput","capacity","roomsCapacityInput","getSliderContentWrap","getFormFieldsWrap","createTitleInput","createCapacityInput","categorySelect","renderCategorySelector","createBottomOptions","createButtons","sliderContentWrap","categorySelector","renderCategorySelectorWrap","categoryTagSelector","createCategoryTagSelector","isRendered","onAfterCategorySelectorRender","preparedCategories","prepareCategoriesForDialog","getCategories","selectedCategory","categoryId","getCategory","TagSelector","textBoxWidth","multiple","onTagAdd","itemsContainer","getItemsContainer","onTagRemove","dialogOptions","width","height","compactView","showAvatars","dropdownMode","itemOrder","icon","selectedItems","getDialog","getContainer","getOuterContainer","getTextBox","renderCreateButton","renderUpdateButton","renderCancelButton","createRoom","updateRoom","getSelectedCategory","location_id","isOpen","categories","map","category","item","EditFormCategory","preparedSelectedRooms","rooms","prepareRoomsForDialog","categoryTitleInput","locationSelector","renderRoomSelector","roomSelector","renderRoomSelectorWrap","roomTagSelector","createRoomTagSelector","onAfterRoomSelectorRender","preload","dynamicLoad","filters","createCategory","updateCategory","selectedRooms","getSelectedRooms","newSelectedRooms","prepareRoomsBeforeUpdate","oldSelectedRooms","toAddCategory","filter","x","toRemoveCategory","avatarOptions","RoomsInterface","SectionInterface","calendarContext","readonly","isConfigureList","SLIDER_WIDTH","SLIDER_DURATION","sliderId","CATEGORY_ROOMS_SHOWN_ALL","CATEGORY_ROOMS_SHOWN_SOME","CATEGORY_ROOMS_SHOWN_NONE","sliderOnClose","deleteRoomHandlerBinded","deleteRoomHandler","refreshRoomsBinded","refreshRooms","refreshCategoriesBinded","refreshCategories","config","accessNames","setAccessNames","setRoomsFromManager","setCategoriesFromManager","addEventEmitterSubscriptions","subscribe","destroyEventEmitterSubscriptions","unsubscribe","createContent","renderOuterWrap","titleWrap","renderTitleWrap","addButton","renderAddButton","roomFormWrap","renderRoomFormWrap","createRoomBlocks","showEditRoomForm","showAddMenu","menuButtons","createAddMenuButtons","addRoomMenu","createAddMenu","allowSliderClose","denySliderClose","showEditCategoryForm","position","PopupMenuWindow","setBlocksWrap","isObject","createCategoryBlock","createBlockWrap","blocksWrap","defaultBlockWrap","createRoomBlock","canDo","isFrozen","unfreezeButtons","getRooms","belongsToView","isPseudo","getCategoriesWithRooms","closeForms","formTitleNode","editSectionForm","getSectionAccessTasks","freezeButtons","getRandomColor","getDefaultSectionAccess","showRoomMenu","menuItemNode","itemNode","closest","createRoomMenuButtons","roomActionMenu","createRoomMenu","showOnlyOneSection","updateAllCategoriesCheckboxState","deleteRoom","top","reloadRoomsFromDatabase","listWrap","roomClickHandler","renderCategoryBlockWrap","categoryRooms","getCategoryRooms","setCheckboxStatus","determineCategoryCheckboxStatus","checkbox","renderCategoryBlockCheckbox","renderCategoryBlockTitle","actionCont","renderCategoryBlockActionsContainer","createCategoryBlockContent","checkboxStyle","checkboxStatus","renderRoomBlockWrap","renderRoomBlockCheckbox","renderRoomBlockTitle","renderRoomBlockActionsContainer","switchCategory","showCategoryMenu","roomId","getRoom","switchSection","updateCategoryCheckboxState","setRoomsForCategory","unsetCategoryRooms","addRoom","showOnlyOneCategory","sections","curSection","switchOnSection","switchOffSection","reload","createCategoryMenuButtons","categoryActionMenu","createCategoryMenu","deleteCategory","findCheckBoxNodes","querySelectorAll","event","getSlider","getUrl","removeCustomEvent","proxy","SidePanel","Instance","BaseEvent","getData","deleteID","index","splice","updatedCategoryCheckboxStatus","setCategoryCheckboxState","findCategoryCheckBoxNode","hasEnabled","hasDisabled","checkboxNode","switchOnCategoryRooms","switchOffCategoryRooms"],"mappings":"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"}