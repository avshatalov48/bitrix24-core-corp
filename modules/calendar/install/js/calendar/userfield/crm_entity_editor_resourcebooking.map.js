{"version":3,"sources":["crm_entity_editor_resourcebooking.js"],"names":["BX","namespace","initCalendarEntityEditorUserFieldConfigurator","Calendar","UserField","EntityEditorUserFieldConfigurator","superclass","constructor","apply","this","extend","Crm","create","id","settings","self","initialize","prototype","layout","options","params","_hasLayout","type","isPlainObject","_mode","EntityEditorMode","view","getBitrix24Limitation","callback","delegate","limit","RESOURCE_LIMIT","_field","fieldInfo","getFieldInfo","getDefaultUserfieldSettings","displayCallback","_wrapper","props","className","_innerWrapper","appendChild","fieldSettings","SETTINGS","resourceList","selectedResourceList","isNew","title","getMessage","manager","_editor","getUserFieldManager","label","getTitle","getDefaultFieldLabel","_typeId","_labelInput","attrs","value","children","text","message","ResourceBooking","ModeSelector","useResources","USE_RESOURCES","useUsers","USE_USERS","showUsers","hide","userList","show","showResources","showResourcesAndUsers","getOuterWrap","optionWrapper","resourcesWrap","resourcesTitleWrap","resourcesListWrap","resourcesListLowControls","RESOURCES","isArray","SECTIONS","forEach","resource","push","ID","NAME","CAL_TYPE","SELECTED_RESOURCES","ResourceListSelector","shown","editMode","outerWrap","listWrap","controlsWrap","values","checkLimitCallback","proxy","checkResourceCountLimit","checkLimitCallbackForNew","checkResourceCountLimitForNewEntries","userSelectorWrap","usersTitleWrap","usersListWrap","itemsSelected","SELECTED_USERS","user","parseInt","UserSelector","wrapNode","socnetDestination","getSocnetDestination","datetimeOptionsWrap","datetimeOptionsInnerWrap","_fulldayCheckBox","checked","FULL_DAY","_servicesCheckBox","USE_SERVICES","events","click","serviceList","ServiceList","outerCont","onFullClearHandler","getFullDayValue","additionaOptionsWrap","_isRequiredCheckBox","isRequired","_showAlwaysCheckBox","prop","getBoolean","_settings","checkOptionFlag","EntityEditorControlOptions","showAlways","_overbookingCheckBox","ALLOW_OVERBOOKING","onSaveButtonClick","onCancelButtonClick","registerLayout","ajax","runAction","data","then","response","isFunction","createUserListControl","UserListSelector","_isLocked","getTotalResourceCount","showLimitationPopup","typeId","mandatory","multiple","isShown","getSelectedValues","getDeletedValues","getAttendeesCodesList","code","substr","SERVICE_LIST","getValues","onCustomEvent","result","length","addCustomEvent","window"],"mappings":"CAAC,WAEA,aACAA,GAAGC,UAAU,yBAEb,SAASC,IAERF,GAAGG,SAASC,UAAUC,kCAAoC,WAEzDL,GAAGG,SAASC,UAAUC,kCAAkCC,WAAWC,YAAYC,MAAMC,OAEtFT,GAAGU,OAAOV,GAAGG,SAASC,UAAUC,kCAAmCL,GAAGW,IAAIN,mCAE1EL,GAAGG,SAASC,UAAUC,kCAAkCO,OAAS,SAASC,EAAIC,GAE7E,IAAIC,EAAO,IAAIf,GAAGG,SAASC,UAAUC,kCACrCU,EAAKC,WAAWH,EAAIC,GACpB,OAAOC,GAGRf,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUC,OAAS,SAASC,EAASC,GAE5F,GAAGX,KAAKY,WACR,CACC,OAED,IAAIrB,GAAGsB,KAAKC,cAAcH,GAC1B,CACCA,KAGD,GAAGX,KAAKe,QAAUxB,GAAGW,IAAIc,iBAAiBC,KAC1C,CACC,KAAM,sFAGPjB,KAAKkB,uBACJC,SAAU5B,GAAG6B,SAAS,SAASC,GAE9BrB,KAAKsB,eAAiBD,GACpBrB,QAGJ,GAAGA,KAAKuB,OACR,CACCvB,KAAKwB,UAAYxB,KAAKuB,OAAOE,oBAEzB,IAAKd,EAAON,SACjB,CACC,OAAOL,KAAK0B,6BACXC,gBAAiBpC,GAAG6B,SAAS,SAASf,GAErCL,KAAKS,OAAOC,GAAUL,SAAUA,KAC9BL,QAILA,KAAK4B,SAAWrC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,mCACrD9B,KAAK+B,cAAgB/B,KAAK4B,SACxBI,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,+CACjDE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,gDAEnD,IACCG,EAAgBjC,KAAKwB,UAAYxB,KAAKwB,UAAUU,SAAWvB,EAAON,SAClE8B,KACAC,KACAC,EAAQrC,KAAKuB,SAAW,KACxBe,EAAQtC,KAAKuC,WAAW,cACxBC,EAAUxC,KAAKyC,QAAQC,sBACvBC,EAAQ3C,KAAKuB,OAASvB,KAAKuB,OAAOqB,WAAaJ,EAAQK,qBAAqB7C,KAAK8C,SAElF9C,KAAKsB,eAAiBW,EAAcX,gBAAkB,EAGtDtB,KAAK+C,YAAcxD,GAAGY,OAAO,SAE3B6C,OAEClB,UAAW,kCACXjB,KAAM,OACNoC,MAAON,KAKV3C,KAAK+B,cAAcC,YAClBzC,GAAGY,OACF,OAEC0B,OAASC,UAAW,uCACpBoB,UAGE3D,GAAGY,OACF,OAEC0B,OAASC,UAAW,yCACpBoB,UACC3D,GAAGY,OACF,QAEC6C,OAASlB,UAAW,8CACpBqB,KAAMb,OAOX/C,GAAGY,OACF,OAEC0B,OAASC,UAAW,6CACpBoB,UAAYlD,KAAK+C,eAInBxD,GAAGY,OAAO,MAAQ0B,OAASC,UAAW,8BAQ3C9B,KAAK+B,cAAcC,YAClBzC,GAAGY,OACF,OAEC0B,OAASC,UAAW,uCACpBoB,UAEE3D,GAAGY,OACF,QAEC0B,OAAQC,UAAW,kDACnBqB,KAAM5D,GAAG6D,QAAQ,+BAGnB,IAAI7D,GAAGG,SAASC,UAAU0D,gBAAgBC,cACzCC,aAActB,EAAcuB,eAAiB,IAC7CC,SAAUxB,EAAcyB,WAAa,IACrCC,UAAWpE,GAAG6B,SAAS,WACtBpB,KAAKmC,aAAayB,OAClB5D,KAAK6D,SAASC,QACZ9D,MACH+D,cAAexE,GAAG6B,SAAS,WAC1BpB,KAAKmC,aAAa2B,OAClB9D,KAAK6D,SAASD,QACZ5D,MACHgE,sBAAuBzE,GAAG6B,SAAS,WAClCpB,KAAKmC,aAAa2B,OAClB9D,KAAK6D,SAASC,QACZ9D,QACDiE,mBAOR,IAAIC,EAAgBlE,KAAK+B,cAAcC,YAAYzC,GAAGY,OACrD,OAEC0B,OAASC,UAAW,0CAKtB9B,KAAKmE,cAAgBD,EAAclC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAASC,UAAW,8GAErF9B,KAAKoE,mBAAqBpE,KAAKmE,cAC7BnC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,gDACjDE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,kDAAmDqB,KAAM5D,GAAG6D,QAAQ,oDAAsD,OAE7KpD,KAAKqE,kBAAoBrE,KAAKmE,cAAcnC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,sGAE7F9B,KAAKsE,yBAA2BtE,KAAKmE,cAAcnC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,gDAEpG,GAAIG,EAAcsC,WACdhF,GAAGsB,KAAKC,cAAcmB,EAAcsC,UAAU,cAC9ChF,GAAGsB,KAAK2D,QAAQvC,EAAcsC,UAAU,YAAYE,UACxD,CACCxC,EAAcsC,UAAU,YAAYE,SAASC,QAAQ,SAASC,GAE7DxC,EAAayC,MACZxE,GAAIuE,EAASE,GACbvC,MAAOqC,EAASG,KAChBjE,KAAM8D,EAASI,aAKlB,GAAIxF,GAAGsB,KAAK2D,QAAQvC,EAAc+C,oBAClC,CACC/C,EAAc+C,mBAAmBN,QAAQ,SAASC,GAEjDvC,EAAqBwC,MACpBxE,GAAIuE,EAASvE,GACbS,KAAM8D,EAAS9D,SAKlBb,KAAKmC,aAAe,IAAI5C,GAAGG,SAASC,UAAU0D,gBAAgB4B,sBAC7DC,MAAOjD,EAAcuB,eAAiB,IACtC2B,SAAU,KACVC,UAAWpF,KAAKmE,cAChBkB,SAAUrF,KAAKqE,kBACfiB,aAActF,KAAKsE,yBACnBiB,OAAQnD,EACRD,aAAcA,EACdqD,mBAAoBjG,GAAGkG,MAAMzF,KAAK0F,wBAAyB1F,MAC3D2F,yBAA0BpG,GAAGkG,MAAMzF,KAAK4F,qCAAsC5F,QAK/EA,KAAK6F,iBAAmB3B,EAAclC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAASC,UAAW,8GAExF9B,KAAK8F,eAAiB9F,KAAK6F,iBACzB7D,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,gDACjDE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,kDAAmDqB,KAAM5D,GAAG6D,QAAQ,iDAAmD,OAE1KpD,KAAK+F,cAAgB/F,KAAK6F,iBAAiB7D,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,kDAE5F,IAAIkE,KACJ,GAAIzG,GAAGsB,KAAK2D,QAAQvC,EAAcgE,gBAClC,CACChE,EAAcgE,eAAevB,QAAQ,SAASwB,GAE7CF,EAAcpB,KAAK,IAAMuB,SAASD,MAIpClG,KAAK6D,SAAW,IAAItE,GAAGG,SAASC,UAAU0D,gBAAgB+C,cACzDlB,MAAOjD,EAAcyB,WAAa,IAClC0B,UAAWpF,KAAK6F,iBAChBQ,SAAUrG,KAAK+F,cACfO,kBAAmB/G,GAAGG,SAASC,UAAU0D,gBAAgBkD,uBACzDP,cAAeA,EACfR,mBAAoBjG,GAAGkG,MAAMzF,KAAK0F,wBAAyB1F,QAK5DkE,EAAclC,YACbzC,GAAGY,OAAO,MAAQ0B,OAASC,UAAW,2BAGvC9B,KAAKwG,oBAAsBtC,EAAclC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAASC,UAAW,8GAE3F9B,KAAKwG,oBAAoBxE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,gDAAgDE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,kDAAmDqB,KAAM5D,GAAG6D,QAAQ,2CAA6C,OAE5RpD,KAAKyG,yBAA2BzG,KAAKwG,oBAAoBxE,YAAYzC,GAAGY,OAAO,OAAQ0B,OAAQC,UAAW,kDAI1G9B,KAAK0G,iBAAmBnH,GAAGY,OAC1B,SAEC0B,OAAShB,KAAM,WAAY8F,QAAS1E,EAAc2E,UAAY,OAIhE5G,KAAKyG,yBAAyBzE,YAC7BzC,GAAGY,OACF,SAEC0B,OAAQC,UAAW,8CACnBoB,UAEElD,KAAK0G,iBACLnH,GAAGY,OAAO,QAAUgD,KAAM5D,GAAG6D,QAAQ,qCAQ1CpD,KAAK6G,kBAAoBtH,GAAGY,OAC3B,SAEC0B,OACChB,KAAM,WACN8F,QAAS1E,EAAc6E,cAAgB,KAExCC,QACCC,MAAQzH,GAAG6B,SAAS,WACnB,GAAIpB,KAAKiH,YACT,CACCjH,KAAKiH,YAAYnD,KAAK9D,KAAK6G,kBAAkBF,WAE5C3G,SAKNA,KAAKyG,yBAAyBzE,YAC7BzC,GAAGY,OACF,SAEC0B,OAAQC,UAAW,8CACnBoB,UAEElD,KAAK6G,kBACLtH,GAAGY,OAAO,QAAUgD,KAAM5D,GAAG6D,QAAQ,yCAM1CpD,KAAKiH,YAAc,IAAI1H,GAAGG,SAASC,UAAU0D,gBAAgB6D,aAC5DC,UAAWnH,KAAKyG,yBAChBW,mBAAoB7H,GAAGkG,MAAM,WAE5BzF,KAAK6G,kBAAkBF,QAAU,OAC/B3G,MACHiC,cAAeA,EACfoF,gBAAiB9H,GAAGkG,MAAM,WAAW,OAAOzF,KAAK0G,iBAAiBC,SAAU3G,QAG7EkE,EAAclC,YACbzC,GAAGY,OAAO,MAAQ0B,OAASC,UAAW,2BAIvC9B,KAAKsH,qBAAuBpD,EAAclC,YAAYzC,GAAGY,OAAO,OAAQ0B,OAASC,UAAW,kDAE5F9B,KAAKuH,oBAAsBhI,GAAGY,OAC7B,SACE0B,OAAShB,KAAM,WAAY8F,QAAS3G,KAAKuB,QAAUvB,KAAKuB,OAAOiG,gBAGlExH,KAAKsH,qBAAqBtF,YACzBzC,GAAGY,OACF,SAEC0B,OAAQC,UAAW,8CACnBoB,UAEElD,KAAKuH,oBACLhI,GAAGY,OAAO,QAAUgD,KAAMnD,KAAKuC,WAAW,yBAQ/CvC,KAAKyH,oBAAsBlI,GAAGY,OAAO,SAAW0B,OAAShB,KAAM,cAC/D,GAAGwB,EACH,CACCrC,KAAKyH,oBAAoBd,QAAUpH,GAAGmI,KAAKC,WAAW3H,KAAK4H,UAAW,aAAc,UAGrF,CACC5H,KAAKyH,oBAAoBd,QAAU3G,KAAKuB,OAAOsG,gBAC9CtI,GAAGW,IAAI4H,2BAA2BC,YAGpC/H,KAAKsH,qBAAqBtF,YACzBzC,GAAGY,OACF,SAEC0B,OAAQC,UAAW,8CACnBoB,UAEElD,KAAKyH,oBACLlI,GAAGY,OAAO,QAAUgD,KAAMnD,KAAKuC,WAAW,oBAQ/CvC,KAAKgI,qBAAuBzI,GAAGY,OAC9B,SACE0B,OAAShB,KAAM,WAAY8F,QAAS1E,EAAcgG,mBAAqB,OAG1EjI,KAAKsH,qBAAqBtF,YACzBzC,GAAGY,OACF,SAEC0B,OAAQC,UAAW,8CACnBoB,UAEElD,KAAKgI,qBACLzI,GAAGY,OAAO,QAAUgD,KAAM5D,GAAG6D,QAAQ,wCAO1CpD,KAAK+B,cAAcC,YAClBzC,GAAGY,OACF,OAEC0B,OACCC,UAAW,qDAEZoB,UACC3D,GAAGY,OAAO,MAAQ0B,OAASC,UAAW,0BACtCvC,GAAGY,OACF,UAEC0B,OAAQhB,KAAM,SAAUiB,UAAW,mCACnCqB,KAAM5D,GAAG6D,QAAQ,mBACjB2D,QAAWC,MAAOzH,GAAG6B,SAASpB,KAAKkI,kBAAmBlI,SAGxDT,GAAGY,OACF,UAEC0B,OAAQhB,KAAM,SAAUiB,UAAW,wCACnCqB,KAAM5D,GAAG6D,QAAQ,qBACjB2D,QAAWC,MAAOzH,GAAG6B,SAASpB,KAAKmI,oBAAqBnI,aAQ9DA,KAAKiC,cAAgBA,EACrBjC,KAAKoI,eAAe1H,GACpBV,KAAKY,WAAa,MAGnBrB,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUkB,4BAA8B,SAASf,GAExGpB,GAAG8I,KAAKC,UAAU,gEACjBC,UACEC,KAAK,SAAUC,GAEhB,GAAI9H,GAAUpB,GAAGsB,KAAK6H,WAAW/H,EAAOgB,iBACxC,CACChB,EAAOgB,gBAAgB8G,EAASF,QAGlC,SAAUE,OAUZlJ,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUU,sBAAwB,SAASP,GAElGpB,GAAG8I,KAAKC,UAAU,0DACjBC,UACEC,KAAK,SAAUC,GAEhB,GAAI9H,GAAUpB,GAAGsB,KAAK6H,WAAW/H,EAAOQ,UACxC,CACCR,EAAOQ,SAASsH,EAASF,QAG3B,SAAUE,OAUZlJ,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUmI,sBAAwB,SAAShI,GAElG,OAAO,IAAIpB,GAAGG,SAASC,UAAU0D,gBAAgBuF,iBAAiBjI,IAGnEpB,GAAGG,SAASC,UAAUC,kCAAkCY,UAAU0H,kBAAoB,WAErF,GAAGlI,KAAK6I,UACR,CACC,OAGD,GAAI7I,KAAKsB,eAAiB,GAAKtB,KAAK8I,wBAA0B9I,KAAKsB,eACnE,CACC/B,GAAGG,SAASC,UAAU0D,gBAAgB0F,sBACtC,OAGD,IAAIpI,GAEHqI,OAAQhJ,KAAK8C,QACbH,MAAO3C,KAAK+C,YAAYE,MACxBgG,UAAWjJ,KAAKuH,oBAAoBZ,QACpCoB,WAAY/H,KAAKyH,oBAAoBd,QACrCuC,SAAU,MAGX,GAAGlJ,KAAKuB,OACR,CACCZ,EAAO,SAAWX,KAAKuB,OAGxBvB,KAAKiC,cAAcuB,cAAgBxD,KAAKmC,aAAagH,UAAY,IAAM,IACvEnJ,KAAKiC,cAAcyB,UAAY1D,KAAK6D,SAASsF,UAAY,IAAM,IAE/D,GAAInJ,KAAKiC,eACL1C,GAAGsB,KAAKC,cAAcd,KAAKiC,cAAcsC,YACzChF,GAAGsB,KAAKC,cAAcd,KAAKiC,cAAcsC,UAAU,aACvD,CACCvE,KAAKiC,cAAc+C,sBAEnBhF,KAAKmC,aAAaiH,oBAAoB1E,QAAQ,SAASzB,GAEtDjD,KAAKiC,cAAc+C,mBAAmBJ,KAAK3B,IACzCjD,MAEHA,KAAKmC,aAAakH,mBAAmB3E,QAAQ,SAASzB,GAErDjD,KAAKiC,cAAc+C,mBAAmBJ,KAAK3B,IACzCjD,MAIJ,GAAIA,KAAKiC,eAAiBjC,KAAK6D,SAC/B,CACC7D,KAAKiC,cAAcgE,gBAAkB,GACrCjG,KAAK6D,SAASyF,wBAAwB5E,QAAQ,SAAS6E,GAEtD,GAAIA,EAAKC,OAAO,EAAG,IAAM,IACzB,CACCxJ,KAAKiC,cAAcgE,eAAerB,KAAKuB,SAASoD,EAAKC,OAAO,OAE3DxJ,MAGJA,KAAKiC,cAAc6E,aAAe9G,KAAK6G,kBAAkBF,QAAU,IAAM,IACzE3G,KAAKiC,cAAcwH,gBACnB,GAAIzJ,KAAK6G,kBAAkBF,SAAW3G,KAAKiH,YAC3C,CACCjH,KAAKiC,cAAcwH,aAAezJ,KAAKiH,YAAYyC,YAGpD1J,KAAKiC,cAAc2E,SAAW5G,KAAK0G,iBAAiBC,QAAU,IAAM,IACpE3G,KAAKiC,cAAcgG,kBAAoBjI,KAAKgI,qBAAqBrB,QAAU,IAAM,IAEjFhG,EAAO,YAAcX,KAAKiC,cAE1B1C,GAAGoK,cAAc3J,KAAM,UAAYA,KAAMW,KAG1CpB,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUsI,sBAAwB,WAEzF,IAAIc,EAAS,EAEb,GAAI5J,KAAKiC,cACT,CACC,GAAI1C,GAAGsB,KAAKC,cAAcd,KAAKiC,cAAcsC,YACzChF,GAAGsB,KAAKC,cAAcd,KAAKiC,cAAcsC,UAAUI,WACnDpF,GAAGsB,KAAK2D,QAAQxE,KAAKiC,cAAcsC,UAAUI,SAASF,UAE1D,CACCmF,GAAU5J,KAAKiC,cAAcsC,UAAUI,SAASF,SAASoF,OAG1DD,GAAU5J,KAAKmC,aAAakH,mBAAmBQ,OAE/C7J,KAAKmC,aAAaiH,oBAAoB1E,QAAQ,SAASzB,GAEtD,IAAKA,EAAM7C,IAAM6C,EAAMX,QAAU,GACjC,CACCsH,MAEC5J,MAEH,GAAIA,KAAK6D,SACT,CACC+F,GAAU5J,KAAK6D,SAASyF,wBAAwBO,QAGlD,OAAOD,GAIRrK,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUoF,qCAAuC,WAExG,OAAO5F,KAAKsB,gBAAkB,GAAKtB,KAAK8I,wBAA0B9I,KAAKsB,gBAGxE/B,GAAGG,SAASC,UAAUC,kCAAkCY,UAAUkF,wBAA0B,WAE3F,OAAO1F,KAAKsB,gBAAkB,GAAKtB,KAAK8I,yBAA2B9I,KAAKsB,gBAI1E,IAAI/B,GAAGW,YAAcX,GAAGW,IAAIN,oCAAsC,YAClE,CACCL,GAAGuK,eAAeC,OAAQ,oDAAqDtK,OAGhF,CACCA,MA7lBD","file":""}