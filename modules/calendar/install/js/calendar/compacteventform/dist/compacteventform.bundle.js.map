{"version":3,"file":"compacteventform.bundle.js","sources":["../src/compacteventform.js"],"sourcesContent":["// @flow\nimport {Type, Tag, Loc, Dom, Event} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\nimport {DateTimeControl, Reminder} from \"calendar.controls\";\nimport {Entry, EntryManager} from \"calendar.entry\";\n\nexport class CompactEventForm extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tzIndex = 1100;\n\twidth = 550;\n\tDOM = {};\n\tmode;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.CompactEventForm');\n\t\tthis.userId = options.userId || Util.getCurrentUserId();\n\t\tthis.type = options.type || 'user';\n\t\tthis.ownerId = options.ownerId || this.userId;\n\t}\n\n\tshow(mode = '', params ={})\n\t{\n\t\treturn;\n\t\tthis.setParams(params);\n\t\tthis.setMode(mode);\n\n\t\tthis.popupId = 'compact-event-form-' + Math.round(Math.random() * 100000);\n\t\tthis.popup = new Popup(this.popupId,\n\t\t\tparams.bindNode,\n\t\t\t{\n\t\t\t\twidth: this.width,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttitleBar: true,\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tclassName: 'calendar-simple-view-popup',\n\t\t\t\tcacheable: false,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tbuttons: this.getButtons()\n\t\t\t});\n\n\t\t// Small hack to use transparent titlebar to drag&drop popup\n\t\tDom.addClass(this.popup.titleBar, 'calendar-add-popup-titlebar');\n\t\tDom.removeClass(this.popup.popupContainer, 'popup-window-with-titlebar');\n\t\tDom.removeClass(this.popup.closeIcon, 'popup-window-titlebar-close-icon');\n\t\t//Dom.addClass(this.popup.contentContainer, 'calendar-view-popup-wrap');\n\n\t\tthis.prepareData().then(() => {\n\t\t\tthis.hideLoader();\n\t\t\tthis.setFormValues();\n\t\t});\n\n\t\tthis.popup.show();\n\t}\n\n\tgetPopupContent()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-compact-event-form\"></div>`;\n\n\t\t// Title\n\t\tthis.createTitleControl();\n\n\t\t// Color selector\n\t\tthis.createColorControl();\n\n\t\t// Section selector\n\t\tthis.createSectionControl();\n\n\t\t// Date-time selector\n\t\tthis.createDateTimeControl();\n\n\t\t// User selector\n\t\tthis.createUserSelectorControl();\n\n\t\t// Planner\n\t\tthis.createPlannerControl();\n\n\t\t// Location\n\t\tthis.createLocationControl();\n\n\t\t// Reminders\n\t\tthis.createRemindersControl();\n\n\t\t//this.DOM.loader = this.DOM.wrap.appendChild(Util.getLoader(50));\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tsetFormValues()\n\t{\n\t\tlet entry = this.entry;\n\n\t\tthis.DOM.titleInput.value = entry.getName();\n\n\t\treturn;\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: entry.from,\n\t\t\tto: entry.to,\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName\n\t\t});\n\n\n\t\t// Section\n\t\tthis.DOM.sectionInput.value = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\n\t\tif (!this.fieldIsPinned('section'))\n\t\t{\n\t\t\tlet currentSection = this.getCurrentSection();\n\t\t\tif (currentSection['CAL_TYPE'] !== this.type || currentSection['CAL_TYPE'] === this.type && parseInt(currentSection['OWNER_ID']) !== this.ownerId)\n\t\t\t{\n\t\t\t\tthis.pinField('section');\n\t\t\t}\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || this.getCurrentSection().COLOR);\n\n\t\t// Reminders\n\t\tthis.reminderControl.setValue(entry.getReminders());\n\n\t\t// Recursion\n\t\tthis.repeatSelector.setValue(entry.getRrule());\n\n\t\t// accessibility\n\t\tif (this.DOM.accessibilityInput)\n\t\t{\n\t\t\tthis.DOM.accessibilityInput.value = entry.accessibility;\n\t\t}\n\n\t\t// Location\n\t\tthis.locationSelector.setValue(entry.getLocation());\n\n\t\t// Private\n\t\tif (this.DOM.privateEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.privateEventCheckbox.checked = entry.private;\n\t\t}\n\n\t\t// Importance\n\t\tif (this.DOM.importantEventCheckbox)\n\t\t{\n\t\t\tthis.DOM.importantEventCheckbox.checked = entry.important;\n\t\t}\n\n\t\tif (this.userSelector)\n\t\t{\n\t\t\tthis.userSelector.setValue(entry.getAttendeesCodes());\n\t\t}\n\n\t\tthis.loadPlannerData({\n\t\t\tcodes: entry.getAttendeesCodes(),\n\t\t\tfrom: Util.formatDate(entry.from.getTime() - Util.getDayLength() * 3),\n\t\t\tto: Util.formatDate(entry.to.getTime() + Util.getDayLength() * 10),\n\t\t\ttimezone: entry.getTimezoneFrom(),\n\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t});\n\t}\n\n\tgetButtons()\n\t{\n\t\tlet buttons = [];\n\n\n\t\tlet mode = this.getMode();\n\n\t\tif (mode === CompactEventForm.EDIT_MODE)\n\t\t{\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_SAVE') + ' (Enter)',\n\t\t\t\t\tclassName: \"popup-window-button-accept\",\n\t\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tif (!this.isNewEntry() && this.canDo('delete'))\n\t\t\t{\n\t\t\t\tbuttons.push(\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_DELETE')\n\t\t\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\telse if(mode === CompactEventForm.VIEW_MODE_MODE)\n\t\t{\n\t\t\tbuttons.push(\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_OPEN')\n\t\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tif (!this.isNewEntry() && this.canDo('edit'))\n\t\t\t{\n\t\t\t\tbuttons.push(\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_EDIT')\n\t\t\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (!this.isNewEntry() && this.canDo('delete'))\n\t\t\t{\n\t\t\t\tbuttons.push(\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_DELETE')\n\t\t\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tbuttons.push(\n\t\t\tnew BX.UI.Button({\n\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_CANCEL')\n\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t})\n\t\t);\n\n\t\tbuttons.push(\n\t\t\tnew BX.UI.Button({\n\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_FULL_FORM')\n\t\t\t\t//events : {click : this.save.bind(this)}\n\t\t\t})\n\t\t);\n\n\t\treturn buttons;\n\t}\n\n\thideLoader()\n\t{\n\t\tif (Type.isDomNode(this.DOM.loader))\n\t\t{\n\t\t\tDom.remove(this.DOM.loader);\n\t\t\tthis.DOM.loader = null;\n\t\t}\n\t}\n\n\tshowInEditMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.EDIT_MODE, params);\n\t}\n\n\tshowInViewMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.VIEW_MODE, params);\n\t}\n\n\tsetMode(mode)\n\t{\n\t\tif (mode === 'edit' || mode === 'view')\n\t\t{\n\t\t\tthis.mode = mode;\n\t\t}\n\t}\n\n\tgetMode()\n\t{\n\t\treturn this.mode;\n\t}\n\n\tsetParams(params = {})\n\t{\n\t\tthis.userId = params.userId || Util.getCurrentUserId();\n\t\tthis.type = params.type || 'user';\n\t\tthis.ownerId = params.ownerId || this.userId;\n\t\tthis.entry = EntryManager.getEntryInstance(params.entry, params.userIndex);\n\t}\n\n\tprepareData(params = {})\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\t// if (params.clearCache)\n\t\t\t// {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tresolve();\n\t\t\t\t}, 0);\n\n\t\t\t\t// BX.ajax.runAction('calendar.api.calendarajax.getTimezoneList')\n\t\t\t\t// \t.then(function (response)\n\t\t\t\t// \t{\n\t\t\t\t// \t\tresolve();\n\t\t\t\t// \t}.bind(this),\n\t\t\t\t// \tfunction (response)\n\t\t\t\t// \t{\n\t\t\t\t// \t\tresolve(response);\n\t\t\t\t// \t}.bind(this));\n\t\t\t// }\n\t\t\t// else\n\t\t\t// {\n\t\t\t// \tresolve();\n\t\t\t// }\n\t\t});\n\t}\n\n\tcreateTitleControl()\n\t{\n\t\tthis.DOM.titleInput = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t<input class=\"calendar-field calendar-field-string\" \n\t\t\t\tvalue=\"\" \n\t\t\t\tplaceholder=\"${Loc.getMessage('EC_ENTRY_NAME')}\" \n\t\t\t\ttype=\"text\" \n\t\t\t/>\n\t\t`);\n\n\t\t// keyup: BX.proxy(this.entryNameChanged, this),\n\t\t// blur: BX.proxy(this.entryNameChanged, this),\n\t\t// change: BX.proxy(this.entryNameChanged, this)\n\t}\n\n\tcreateColorControl()\n\t{\n\n\t}\n\n\tcreateSectionControl()\n\t{\n\n\t}\n\n\tcreateDateTimeControl()\n\t{\n\t\tthis.DOM.dateTimeWrap = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-datetime\" style=\"display: flex;\"/>\n\t\t`);\n\n\t\tthis.dateTimeSelector = new DateTimeControl(null, {\n\t\t\tshowTimezone: false,\n\t\t\touterWrap: this.DOM.dateTimeWrap\n\t\t});\n\t}\n\n\tcreateUserSelectorControl()\n\t{\n\n\t}\n\n\tcreatePlannerControl()\n\t{\n\t\treturn;\n\t\tthis.plannerId = this.calendar.id + '-simple-planner';\n\t\tthis.plannerShown = false;\n\t\tthis.plannerWrap = this.secondSlide.appendChild(BX.create('DIV', {props: {className:'calendar-add-popup-planner-wrap'}}));\n\n\t\tBX.addCustomEvent('OnDestinationAddNewItem', BX.proxy(this.checkPlannerState, this));\n\t\tBX.addCustomEvent('OnDestinationUnselect', BX.proxy(this.checkPlannerState, this));\n\t\tBX.addCustomEvent('OnDestinationUnselect', BX.proxy(this.clearSecondSlideHeight, this));\n\t\tBX.addCustomEvent('OnCalendarPlannerSelectorChanged', BX.proxy(this.onCalendarPlannerSelectorChanged, this));\n\n\t\tif (!this.requestPlanner)\n\t\t{\n\t\t\tthis.requestPlanner = true;\n\t\t\tBX.ajax.get(this.calendar.util.getActionUrl(), {\n\t\t\t\t\taction: 'get_planner',\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\tbx_event_calendar_request: 'Y',\n\t\t\t\t\treqId: Math.round(Math.random() * 1000000),\n\t\t\t\t\tplanner_id: this.plannerId\n\t\t\t\t},\n\t\t\t\tBX.delegate(function (html)\n\t\t\t\t{\n\t\t\t\t\tif (this.loader)\n\t\t\t\t\t\tBX.remove(this.loader);\n\n\t\t\t\t\thtml = BX.util.trim(html);\n\t\t\t\t\tthis.plannerWrap.innerHTML = html;\n\t\t\t\t\tthis.requestPlanner = false;\n\t\t\t\t\tthis.checkPlannerState();\n\t\t\t\t}, this)\n\t\t\t);\n\t\t}\n\t}\n\n\tcreateLocationControl()\n\t{\n\t}\n\n\tcreateRemindersControl()\n\t{\n\t\t//this.reminderValues = [];\n\t\tthis.DOM.remindersWrap = this.DOM.wrap.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-container-text\">${Loc.getMessage('EC_REMIND_LABEL')}:</div>\n\t\t`);\n\n\t\tthis.remindersControl = new Reminder({\n\t\t\tvaluesContainerNode: this.DOM.remindersWrap.appendChild(Tag.render`<span></span>`),\n\t\t\taddButtonNode: this.DOM.remindersWrap.appendChild(Tag.render`<span class=\"calendar-notification-btn-container calendar-notification-btn-add\"><span class=\"calendar-notification-icon\"></span></span>`)\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', function (event)\n\t\t{\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\t//this.reminderValues = event.getData().values;\n\t\t\t}\n\t\t});\n\t}\n\n\tisNewEntry()\n\t{\n\t\treturn true;\n\t}\n\n\tcanDo(action)\n\t{\n\t\t// if ((action === 'edit' || action === 'delete'))\n\t\t// {\n\t\t// \tif ((entry.isMeeting() && entry.id !== entry.parentId)\n\t\t// \t\t|| entry.isResourcebooking())\n\t\t// \t{\n\t\t// \t\treturn false;\n\t\t// \t}\n\t\t//\n\t\t// \treturn this.permissions.edit;\n\t\t// }\n\t\t//\n\t\t// if ((action === 'view'))\n\t\t// {\n\t\t// \treturn this.permissions.view_full;\n\t\t// }\n\t\treturn true;\n\t}\n\n\n\n\n\n\n\n\n\n\n\t// Legacy simple edit form\n\tshowEdit(params)\n\t{\n\t\tthis.params = params;\n\t\tthis.entryTime = params.entryTime;\n\t\tthis.attendees = [];\n\t\tthis.attendeesCodesList = false;\n\t\tthis.attendeesIndex = {};\n\t\tthis.attendeesCodes = {};\n\t\tthis.allowInvite = true;\n\t\tthis.notify = true;\n\t\tthis.secondSlideIsOpened = false;\n\t\tthis.checkDataBeforeCloseMode = true;\n\t\tthis.displayed = false;\n\n\t\tif (this.calendar.ownerUser)\n\t\t{\n\t\t\tthis.attendees.push(this.calendar.ownerUser);\n\t\t\tthis.attendeesIndex[this.calendar.ownerUser.id] = true;\n\t\t\tthis.attendeesCodes['U' + this.calendar.ownerUser.id] = 'users';\n\t\t}\n\n\t\tthis.attendees.push(this.calendar.currentUser);\n\t\tthis.attendeesIndex[this.calendar.currentUser.id] = true;\n\t\tthis.attendeesCodes['U' + this.calendar.currentUser.id] = 'users';\n\n\t\tthis.initiateAttendees = [];\n\t\tthis.attendees.forEach(function(user){this.initiateAttendees.push(user.id);}, this);\n\n\t\t// Check angle position\n\t\tvar\n\t\t\tanglePosition,\n\t\t\toffsetLeft,\n\t\t\toffsetTop = -152,\n\t\t\tPOPUP_WIDTH = 390,\n\t\t\tPOPUP_HEIGHT = 420,\n\t\t\tANGLE_WIDTH = 8,\n\t\t\tnodePos = BX.pos(params.entryNode),\n\t\t\twindowSize = BX.GetWindowSize();\n\n\t\tif (nodePos.right + POPUP_WIDTH + ANGLE_WIDTH < windowSize.innerWidth)\n\t\t{\n\t\t\tanglePosition = 'left';\n\t\t\toffsetLeft = nodePos.width + ANGLE_WIDTH;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tanglePosition = 'right';\n\t\t\toffsetLeft = -POPUP_WIDTH - ANGLE_WIDTH;\n\t\t}\n\n\t\tif (windowSize.scrollTop + windowSize.innerHeight - (nodePos.bottom + POPUP_HEIGHT + offsetTop) < -35)\n\t\t{\n\t\t\tanglePosition = false;\n\t\t}\n\n\t\tvar popup = new BX.PopupWindow(this.calendar.id + \"-simple-add-popup\",\n\t\t\tparams.bindNode || params.entryNode,\n\t\t\t{\n\t\t\t\toffsetTop: offsetTop,\n\t\t\t\toffsetLeft: offsetLeft,\n\t\t\t\tcloseIcon: true,\n\t\t\t\twidth: POPUP_WIDTH,\n\t\t\t\ttitleBar: true,\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: this.createContent(),\n\t\t\t\toverlay: {\n\t\t\t\t\topacity: 1\n\t\t\t\t},\n\t\t\t\tbuttons : [\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext : BX.message('JS_CORE_WINDOW_SAVE') + ' (ENTER)',\n\t\t\t\t\t\tclassName : \"popup-window-button-accept\",\n\t\t\t\t\t\tevents : {click : BX.delegate(this.save, this)}\n\t\t\t\t\t}),\n\t\t\t\t\tnew BX.PopupWindowButton({\n\t\t\t\t\t\ttext : BX.message('JS_CORE_WINDOW_CANCEL'),\n\t\t\t\t\t\tevents : {click : BX.delegate(this.close, this)}\n\t\t\t\t\t})\n\t\t\t\t]\n\t\t\t});\n\n\t\tif (anglePosition !== false)\n\t\t{\n\t\t\tpopup.setAngle({\n\t\t\t\toffset: 130,\n\t\t\t\tposition: anglePosition\n\t\t\t});\n\t\t}\n\n\t\t// Small hack to use transparent titlebar to drag&drop popup\n\t\tBX.addClass(popup.titleBar, 'calendar-add-popup-titlebar');\n\t\tBX.removeClass(popup.popupContainer, 'popup-window-with-titlebar');\n\t\tBX.removeClass(popup.closeIcon, 'popup-window-titlebar-close-icon');\n\n\t\tpopup.show(true);\n\t\tthis.popup = popup;\n\n\t\tif (popup.overlay && popup.overlay.element)\n\t\t{\n\t\t\tthis.overlay = popup.overlay.element;\n\t\t\tBX.addClass(popup.overlay.element, 'calendar-popup-overlay');\n\t\t\tsetTimeout(BX.delegate(function()\n\t\t\t{\n\t\t\t\tBX.addClass(popup.overlay.element, 'calendar-popup-overlay-dark');\n\t\t\t\tpopup.overlay = null;\n\t\t\t}, this), 1);\n\t\t}\n\n\t\tthis.popupButtonsContainer = popup.buttonsContainer;\n\t\tBX.addClass(popup.contentContainer, 'calendar-add-popup-wrap');\n\n\t\tpopup.popupContainer.style.minHeight = (popup.popupContainer.offsetHeight - 20) + 'px';\n\n\t\tthis.nameField.input.focus();\n\t\tthis.nameField.input.select();\n\n\t\tBX.bind(document, 'keydown', BX.proxy(this.keyHandler, this));\n\t\tBX.addCustomEvent(popup, 'onPopupClose', BX.proxy(this.close, this));\n\t\tBX.bind(this.overlay, 'click', BX.proxy(this.close, this));\n\n\t\tthis.calendar.disableKeyHandler();\n\t\tsetTimeout(BX.delegate(function(){this.calendar.disableKeyHandler();}, this), 100);\n\t\tthis.displayed = true;\n\t}\n\n\tsave(params)\n\t{\n\t\tparams = params || {};\n\n\t\t// check users accessibility\n\t\tif (params.checkBusyUsers !== false && this.calendar.util.isMeetingsEnabled())\n\t\t{\n\t\t\tvar busyUsers = this.getBusyUserList();\n\t\t\tif (busyUsers && busyUsers.length > 0)\n\t\t\t{\n\t\t\t\tif (!this.busyUsersDialog)\n\t\t\t\t\tthis.busyUsersDialog = new window.BXEventCalendar.BusyUsersDialog(this.calendar);\n\n\t\t\t\tthis.busyUsersDialog.show({\n\t\t\t\t\tusers: busyUsers,\n\t\t\t\t\tsaveCallback: BX.delegate(function()\n\t\t\t\t\t{\n\t\t\t\t\t\tvar i, userIds = [];\n\t\t\t\t\t\tfor (i = 0; i < busyUsers.length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tuserIds.push(busyUsers[i].id);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.excludeUsers = userIds.join(',');\n\t\t\t\t\t\tparams.checkBusyUsers = false;\n\t\t\t\t\t\tthis.save(params);\n\t\t\t\t\t}, this)\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (this.params.section.id)\n\t\t{\n\t\t\tvar section = this.calendar.sectionController.getSection(this.params.section.id);\n\t\t\tif (section)\n\t\t\t{\n\t\t\t\tsection.show();\n\t\t\t}\n\t\t}\n\n\t\tthis.calendar.entryController.saveEntry(this.getPopupData());\n\t\tif (BX.type.isFunction(this.params.saveCallback))\n\t\t{\n\t\t\tthis.params.saveCallback();\n\t\t}\n\n\t\tthis.checkDataBeforeCloseMode = false;\n\t\tthis.close();\n\t}\n\n\tclose()\n\t{\n\t\tif (this.checkDataBeforeCloseMode && !this.checkBeforeClose() && !confirm(BX.message('EC_SAVE_ENTRY_CONFIRM')))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.calendar.enableKeyHandler();\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tBX.removeCustomEvent(this.popup, 'onPopupClose', BX.proxy(this.close, this));\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tif (this.overlay)\n\t\t{\n\t\t\tBX.removeClass(this.overlay, 'calendar-popup-overlay-dark');\n\t\t\tsetTimeout(BX.delegate(function(){BX.remove(this.overlay);}, this), 300);\n\t\t}\n\n\t\tBX.removeCustomEvent('OnDestinationAddNewItem', BX.proxy(this.checkPlannerState, this));\n\t\tBX.removeCustomEvent('OnDestinationUnselect', BX.proxy(this.checkPlannerState, this));\n\t\tBX.removeCustomEvent('OnDestinationUnselect', BX.proxy(this.clearSecondSlideHeight, this));\n\t\tBX.removeCustomEvent('OnCalendarPlannerSelectorChanged', BX.proxy(this.onCalendarPlannerSelectorChanged, this));\n\t\tif (this.plannerId)\n\t\t{\n\t\t\tBX.onCustomEvent('OnCalendarPlannerDoUninstall', [{plannerId: this.plannerId}]);\n\t\t}\n\n\t\tif (BX.type.isFunction(this.params.closeCallback))\n\t\t{\n\t\t\tthis.params.closeCallback();\n\t\t}\n\n\t\tBX.unbind(document, 'keydown', BX.proxy(this.keyHandler, this));\n\t\tBX.unbind(this.overlay, 'click', BX.proxy(this.close, this));\n\n\t\tthis.displayed = false;\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.displayed;\n\t}\n\n\tcouldBeClosedByEsc()\n\t{\n\t\treturn !((this.dateTimeField.fromTime && this.dateTimeField.fromTime.shown) // from popup\n\t\t\t|| (this.dateTimeField.toTime && this.dateTimeField.toTime.shown) // to popup\n\t\t\t|| this.secondSlideIsOpened // second slider\n\t\t\t|| (this.reminderField && this.reminderField.reminder && this.reminderField.reminder.reminderMenu)\n\t\t\t|| (this.sectionSelector && this.sectionSelector.sectionMenu)\n\t\t\t|| (this.locationSelector && this.locationSelector.selectContol && this.locationSelector.selectContol.popupMenu)\n\t\t\t|| BX.PopupWindowManager.getCurrentPopup()\n\t\t);\n\t}\n\n\t// getPopupData()\n\t// {\n\t// \tvar attendees = [];\n\t// \tthis.attendees.forEach(function(user){attendees.push(user.id);});\n\t//\n\t// \tvar\n\t// \t\tfromTime = BX.Calendar.Util.parseTime(this.dateTimeField.fromTimeInput.value),\n\t// \t\ttoTime = BX.Calendar.Util.parseTime(this.dateTimeField.toTimeInput.value),\n\t// \t\tfromDate = new Date(this.entryTime.from.getTime()),\n\t// \t\ttoDate = new Date(this.entryTime.from.getTime());\n\t//\n\t// \tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t// \ttoDate.setHours(toTime.h, toTime.m, 0);\n\t//\n\t// \tif (!this.attendeesCodesList && this.attendeesCodes)\n\t// \t{\n\t// \t\tthis.attendeesCodesList = [];\n\t// \t\tfor (var i in this.attendeesCodes)\n\t// \t\t{\n\t// \t\t\tif (this.attendeesCodes.hasOwnProperty(i))\n\t// \t\t\t{\n\t// \t\t\t\tthis.attendeesCodesList.push(i);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t//\n\t// \treturn {\n\t// \t\tname: this.nameField.input.value,\n\t// \t\tfrom: fromDate,\n\t// \t\tto: toDate,\n\t// \t\tdateFrom: this.calendar.util.formatDateTime(fromDate),\n\t// \t\tdateTo: this.calendar.util.formatDateTime(toDate),\n\t// \t\tdefaultTz: this.timezoneField && this.timezoneField.select ? this.timezoneField.select.value : this.calendar.util.getUserOption('timezoneName'),\n\t// \t\tsection: this.params.section.id,\n\t// \t\tlocation: this.locationSelector.getTextValue(),\n\t// \t\tlocationValue: this.locationSelector.getValue(),\n\t// \t\tremind: this.reminderValues || false,\n\t// \t\tattendees: attendees,\n\t// \t\tattendeesCodes: this.attendeesCodes,\n\t// \t\tattendeesCodesList: this.attendeesCodesList,\n\t// \t\tmeetingNotify: this.notify,\n\t// \t\tallowInvite:  this.allowInvite,\n\t// \t\texcludeUsers: this.excludeUsers || ''\n\t// \t};\n\t// }\n\n\t// getEntry ()\n\t// {\n\t// \tlet data = this.getPopupData();\n\t// \tlet entryData = {\n\t// \t\tID: null,\n\t// \t\tNAME: data.name,\n\t// \t\tdateFrom: data.from,\n\t// \t\tdateTo: data.to,\n\t// \t\tTZ_FROM: data.defaultTz,\n\t// \t\tTZ_TO: data.defaultTz,\n\t// \t\tSECT_ID: parseInt(data.section),\n\t// \t\tLOCATION: data.location,\n\t// \t\tATTENDEES_CODES: data.attendeesCodesList,\n\t// \t\tremind: data.remind\n\t// \t};\n\t//\n\t// \treturn new BX.Calendar.Entry({data: entryData});\n\t// }\n\n\tcreateContent()\n\t{\n\t\tthis.mainSlide = BX.create('DIV', {props: {className: 'calendar-add-popup-main-slide'}});\n\t\tthis.secondSlide = false;\n\n\t\t// Entry name\n\n\n\t\t// Section select\n\t\tthis.createSectionSelector();\n\n\t\t// Date & time\n\t\tthis.createDateTimeField();\n\n\t\t// Reminder\n\t\tthis.createReminderField();\n\n\t\t// Location\n\t\tthis.createlocationField();\n\n\t\t// Attendees\n\t\tif (this.calendar.util.isMeetingsEnabled())\n\t\t{\n\t\t\tthis.createPlannerField();\n\t\t}\n\n\t\tthis.fullFormField = this.createField('container-text', this.mainSlide);\n\t\tthis.fullFormField.link = this.fullFormField.innerWrap.appendChild(BX.create('SPAN', {\n\t\t\tprops: {className: 'calendar-text-link'},\n\t\t\ttext: BX.message('EC_FULL_FORM_LABEL'),\n\t\t\tevents: {click : function()\n\t\t\t\t{\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tif (BX.type.isFunction(this.params.fullFormCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.params.fullFormCallback();\n\t\t\t\t\t}\n\t\t\t\t}.bind(this)\n\t\t\t}\n\t\t}));\n\n\t\tthis.mainSlide.appendChild(BX.create('HR', {props: {className: 'calendar-filed-separator'}}));\n\n\t\tthis.sliderContainer = BX.create('DIV', {\n\t\t\tprops: {\n\t\t\t\tclassName: \"calendar-add-popup-slider-container\"\n\t\t\t},\n\t\t\tchildren : [this.mainSlide]\n\t\t});\n\n\t\treturn this.sliderContainer;\n\t}\n\n\tprepareSecondSlide(params)\n\t{\n\t\tthis.closeSecondSlideCallback = params.closeCallback || null;\n\t\tif (this.secondSlide)\n\t\t{\n\t\t\tBX.cleanNode(this.secondSlide);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.secondSlide = this.sliderContainer.appendChild(BX.create('DIV', {props: {className: 'calendar-add-popup-second-slide'}}));\n\t\t}\n\n\t\tthis.backButton = this.secondSlide\n\t\t\t.appendChild(BX.create('DIV', {props: {className: 'calendar-add-popup-second-slide-header'}}))\n\t\t\t.appendChild(BX.create('SPAN', {props: {className: 'calendar-add-popup-second-slide-back-btn'}, html: BX.message('EC_SIMPLE_FORM_BACK')}));\n\n\t\tBX.bind(this.backButton, 'click', BX.proxy(this.closeSecondSlide, this));\n\t\tBX.bind(document, \"keyup\", BX.proxy(this.secondSlideEscHandler, this));\n\n\t\tthis.popupButtonsContainer.style.display = 'none';\n\t\tthis.resizeSecondSlide();\n\n\t\tsetTimeout(BX.delegate(function(){BX.addClass(this.popup.contentContainer, 'calendar-add-popup-wrap-second-tab-active');}, this), 0);\n\n\t\tthis.secondSlideIsOpened = true;\n\t}\n\n\tsecondSlideEscHandler(e)\n\t{\n\t\tif(e.keyCode === this.calendar.util.KEY_CODES['escape'])\n\t\t{\n\t\t\tthis.closeSecondSlide()\n\t\t}\n\t}\n\n\tcloseSecondSlide()\n\t{\n\t\tif(this.closeSecondSlideCallback)\n\t\t{\n\t\t\tthis.closeSecondSlideCallback();\n\t\t}\n\n\t\tBX.unbind(document, \"keyup\", BX.proxy(this.secondSlideEscHandler, this));\n\t\tBX.removeClass(this.popup.contentContainer, 'calendar-add-popup-wrap-second-tab-active');\n\n\t\tthis.popupButtonsContainer.style.display = '';\n\t\tthis.clearSecondSlideHeight();\n\t\tif (this.resizeTimeout)\n\t\t{\n\t\t\tthis.resizeTimeout = clearTimeout(this.resizeTimeout);\n\t\t}\n\t\tBX.cleanNode(this.secondSlide);\n\t\tthis.secondSlideIsOpened = false;\n\t}\n\n\tresizeSecondSlide()\n\t{\n\t\tif (this.secondSlide)\n\t\t{\n\t\t\tvar height = this.secondSlide.scrollHeight;\n\t\t\tif (height != parseInt(this.popup.contentContainer.style.minHeight))\n\t\t\t{\n\t\t\t\tthis.secondSlide.style.minHeight = height + 'px';\n\t\t\t\tthis.sliderContainer.style.minHeight = height + 'px';\n\t\t\t}\n\t\t\tthis.resizeTimeout = setTimeout(BX.proxy(this.resizeSecondSlide, this), 100);\n\t\t}\n\t}\n\n\tclearSecondSlideHeight()\n\t{\n\t\tif (this.secondSlide)\n\t\t\tthis.secondSlide.style.minHeight = '';\n\t\tif (this.sliderContainer)\n\t\t\tthis.sliderContainer.style.minHeight = '';\n\t}\n\n\tcreateField(type, parentNode)\n\t{\n\t\tif (!type)\n\t\t\ttype = 'string';\n\n\t\tvar\n\t\t\touterWrap = BX.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-' + type}}),\n\t\t\tinnerWrap = outerWrap.appendChild(BX.create('DIV', {props: {className: 'calendar-field-block'}}));\n\n\t\tif (parentNode)\n\t\t\tparentNode.appendChild(outerWrap);\n\n\t\treturn {\n\t\t\touterWrap: outerWrap,\n\t\t\tinnerWrap: innerWrap\n\t\t};\n\t}\n\n\tcreateSectionSelector()\n\t{\n\t\tthis.sectionSelector = new window.BXEventCalendar.SectionSelector({\n\t\t\touterWrap: this.nameField.innerWrap,\n\t\t\tsectionList: this.calendar.sectionController.getSectionListForEdit(),\n\t\t\tsectionGroupList: this.calendar.sectionController.getSectionGroupList(),\n\t\t\tmode: 'compact',\n\t\t\tgetCurrentSection: BX.delegate(function() {\n\t\t\t\treturn this.params.section;\n\t\t\t}, this),\n\t\t\tselectCallback: BX.delegate(function(section) {\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\tthis.params.section = this.calendar.sectionController.getSection(section.id);\n\t\t\t\t\t//this.calendar.util.setUserOption('lastUsedSection', section.id);\n\t\t\t\t\tif (BX.type.isFunction(this.params.changeSectionCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.params.changeSectionCallback(section);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, this),\n\t\t\topenPopupCallback: BX.delegate(function() {\n\t\t\t\tthis.popup.setAutoHide(false);\n\t\t\t}, this),\n\t\t\tclosePopupCallback: BX.delegate(function() {\n\t\t\t\tthis.popup.setAutoHide(true);\n\t\t\t}, this)\n\t\t});\n\t}\n\n\tcreateDateTimeField()\n\t{\n\t\tvar _this = this;\n\t\tthis.initiateTimeFrom = this.calendar.util.formatTime(this.entryTime.from.getHours(), this.entryTime.from.getMinutes());\n\t\tthis.initiateTimeTo = this.calendar.util.formatTime(this.entryTime.to.getHours(), this.entryTime.to.getMinutes());\n\n\t\tthis.dateTimeField = {\n\t\t\touterWrap: this.mainSlide.appendChild(BX.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-datetime'}}))\n\t\t};\n\n\t\tthis.dateTimeField.dateWrap = this.dateTimeField.outerWrap.appendChild(BX.create('DIV', {props: {className: 'calendar-field-block calendar-field-block-prefix'}, text: this.calendar.util.formatDateUsable(this.entryTime.from, false)}));\n\n\t\tthis.dateTimeField.fromTimeInputWrap = this.dateTimeField.outerWrap.appendChild(BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-field-block calendar-field-block-left'\n\t\t\t}}));\n\n\t\tthis.dateTimeField.fromTimeInput = this.dateTimeField.fromTimeInputWrap.appendChild(BX.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tvalue: this.initiateTimeFrom,\n\t\t\t\tplaceholder: BX.message('EC_TIME_FROM_PLACEHOLDER'),\n\t\t\t\ttype: 'text'\n\t\t\t},\n\t\t\tprops: {className: 'calendar-field calendar-field-datetime-menu'\n\t\t\t}}));\n\t\tthis._fromDateValue = this.entryTime.from;\n\n\t\tthis.dateTimeField.outerWrap.appendChild(BX.create('DIV', {props: {className: 'calendar-field-block calendar-field-block-between'}}));\n\n\t\tthis.dateTimeField.toTimeInputWrap = this.dateTimeField.outerWrap.appendChild(BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-field-block calendar-field-block-right'\n\t\t\t}}));\n\n\t\tthis.dateTimeField.toTimeInput = this.dateTimeField.toTimeInputWrap.appendChild(BX.create('INPUT', {\n\t\t\tattrs: {\n\t\t\t\tvalue: this.initiateTimeTo,\n\t\t\t\tplaceholder: BX.message('EC_TIME_TO_PLACEHOLDER'),\n\t\t\t\ttype: 'text'\n\t\t\t},\n\t\t\tprops: {className: 'calendar-field calendar-field-datetime-menu'\n\t\t\t}}));\n\n\t\tthis.dateTimeField.fromTime = new window.BXEventCalendar.SelectInput({\n\t\t\tinput: this.dateTimeField.fromTimeInput,\n\t\t\tvalue: this.calendar.util.adaptTimeValue(_this.calendar.util.parseTime(_this.dateTimeField.fromTimeInput.value)),\n\t\t\tvalues: this.calendar.util.getSimpleTimeList(),\n\t\t\tonChangeCallback: BX.proxy(function()\n\t\t\t{\n\t\t\t\tvar\n\t\t\t\t\tfromTime = this.calendar.util.parseTime(this.dateTimeField.fromTimeInput.value),\n\t\t\t\t\ttoTime = this.calendar.util.parseTime(this.dateTimeField.toTimeInput.value),\n\t\t\t\t\tfromDate = new Date(this.entryTime.from.getTime()),\n\t\t\t\t\ttoDate = new Date(this.entryTime.from.getTime());\n\n\t\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\n\t\t\t\tif (this._fromDateValue)\n\t\t\t\t{\n\t\t\t\t\tthis.entryTime.to = new Date(fromDate.getTime() + ((toDate.getTime() - this._fromDateValue.getTime()) || 3600000));\n\t\t\t\t\tthis.dateTimeField.toTimeInput.value = this.calendar.util.formatTime(this.entryTime.to.getHours(), this.entryTime.to.getMinutes());\n\t\t\t\t}\n\n\t\t\t\tthis.entryTime.from = fromDate;\n\t\t\t\tthis._fromDateValue = fromDate;\n\n\t\t\t\tif (this.params.timeNode)\n\t\t\t\t{\n\t\t\t\t\tthis.params.timeNode.innerHTML = this.calendar.util.formatTime(fromTime.h, fromTime.m);\n\t\t\t\t}\n\n\t\t\t\tif (BX.type.isFunction(this.params.changeTimeCallback))\n\t\t\t\t{\n\t\t\t\t\tthis.params.changeTimeCallback(fromTime, toTime);\n\t\t\t\t}\n\t\t\t}, this)\n\t\t});\n\n\t\tthis.dateTimeField.toTime = new window.BXEventCalendar.SelectInput({\n\t\t\tinput: this.dateTimeField.toTimeInput,\n\t\t\tvalue: this.calendar.util.adaptTimeValue(this.calendar.util.parseTime(this.dateTimeField.toTimeInput.value)),\n\t\t\tvalues: this.calendar.util.getSimpleTimeList()\n\t\t});\n\n\t\t// Default timezone\n\t\tif (!this.calendar.util.getUserOption('timezoneName'))\n\t\t{\n\t\t\tthis.timezoneField = this.createField('container-string', this.mainSlide);\n\t\t\tthis.timezoneField.innerWrap.appendChild(BX.create('LABEL', {props: {className: 'calendar-timezone-label'}, text: BX.message('EC_ASK_TZ')}));\n\t\t\tthis.timezoneField.select = this.timezoneField.innerWrap.appendChild(\n\t\t\t\tBX.create('SELECT', {\n\t\t\t\t\tprops: {className: 'calendar-field calendar-field-select'},\n\t\t\t\t\tevents : {change : function() {\n\t\t\t\t\t\t\t_this.calendar.util.setUserOption('timezoneName', _this.timezoneField.select.value);\n\t\t\t\t\t\t}}\n\t\t\t\t}));\n\t\t\tvar timezone_id, timezoneList = this.calendar.util.getTimezoneList();\n\t\t\tfor (timezone_id in timezoneList)\n\t\t\t{\n\t\t\t\tif (timezoneList.hasOwnProperty(timezone_id))\n\t\t\t\t\tthis.timezoneField.select.options.add(new Option(timezoneList[timezone_id].title, timezone_id, false, false));\n\t\t\t}\n\n\t\t\tthis.timezoneField.select.value = this.calendar.util.getUserOption('timezoneDefaultName') || '';\n\t\t\tthis.timezoneField.innerWrap.appendChild(BX.create('SPAN', {props: {\n\t\t\t\t\ttitle: BX.message('EC_EVENT_TZ_DEF_HINT'),\n\t\t\t\t\tclassName: 'calendar-event-quest'},\n\t\t\t\thtml: '?'\n\t\t\t}));\n\n\t\t\tBX.addClass(this.timezoneField.innerWrap, 'calendar-field-timezone');\n\t\t}\n\t}\n\n\tsetDateTimeValues(fromDate, toDate)\n\t{\n\t\tif (fromDate && toDate && this.dateTimeField && this.dateTimeField.dateWrap)\n\t\t{\n\t\t\tthis.dateTimeField.dateWrap.innerHTML = this.calendar.util.formatDateUsable(fromDate);\n\t\t\tthis.dateTimeField.fromTimeInput.value = this.calendar.util.formatTime(fromDate.getHours(), fromDate.getMinutes());\n\t\t\tthis.dateTimeField.toTimeInput.value = this.calendar.util.formatTime(toDate.getHours(), toDate.getMinutes());\n\n\t\t\tthis.entryTime.from = fromDate;\n\t\t\tthis.entryTime.to = toDate;\n\t\t\tthis._fromDateValue = fromDate;\n\n\t\t\tif (this.params.timeNode)\n\t\t\t\tthis.params.timeNode.innerHTML = this.dateTimeField.fromTimeInput.value;\n\t\t}\n\t}\n\n\tcreateReminderField()\n\t{\n\n\t}\n\n\tcreatelocationField()\n\t{\n\t\tthis.locationField = {\n\t\t\touterWrap: this.mainSlide.appendChild(BX.create('DIV', {props: {className: 'calendar-field-container calendar-field-container-select'}}))\n\t\t};\n\n\t\tthis.locationSelector = new window.BXEventCalendar.LocationSelector(\n\t\t\tthis.calendar.id + '-simple-slider-location',\n\t\t\t{\n\t\t\t\tvalue: this.entry ? this.entry.location : '',\n\t\t\t\twrapNode: this.locationField.outerWrap,\n\t\t\t\tgetControlContentCallback: BX.delegate(function()\n\t\t\t\t{\n\t\t\t\t\tthis.prepareSecondSlide({\n\t\t\t\t\t\tcloseCallback : BX.proxy(this.locationSelector.saveValues, this.locationSelector)\n\t\t\t\t\t});\n\t\t\t\t\tthis.secondSlide.appendChild(BX.create('DIV', {\n\t\t\t\t\t\tprops: {className: 'calendar-title-text'},\n\t\t\t\t\t\ttext: BX.message('EC_MEETING_ROOM_LIST_TITLE')\n\t\t\t\t\t}));\n\t\t\t\t\treturn this.secondSlide;\n\t\t\t\t}, this)\n\t\t\t}, this.calendar);\n\t}\n\n\tcreatePlannerField()\n\t{\n\t\tthis.plannerField = this.createField('container-members', this.mainSlide);\n\t\tthis.plannerField.innerWrapAttendeesWrap = this.plannerField.innerWrap.appendChild(BX.create('DIV', {props: {className: 'calendar-members-selected'}, html: '<span>' + BX.message('EC_ATTENDEES_LABEL') + ':</span>'}));\n\n\t\tthis.plannerField.currentAttendeesWrap = this.plannerField.innerWrapAttendeesWrap.appendChild(BX.create('SPAN', {props: {className: 'calendar-attendees-list'}}));\n\t\tthis.showAttendees();\n\n\t\tthis.plannerField.plannerLink = this.plannerField.innerWrapAttendeesWrap.appendChild(BX.create('SPAN', {\n\t\t\tprops: {className: 'calendar-members-change-link'},\n\t\t\thtml: BX.message('EC_ATTENDEES_EDIT'),\n\t\t\tevents: {\n\t\t\t\tclick: BX.delegate(this.showPlannerSlide, this)\n\t\t\t}\n\t\t}));\n\t}\n\n\tshowAttendees()\n\t{\n\t\tBX.cleanNode(this.plannerField.currentAttendeesWrap);\n\n\t\tvar\n\t\t\ti,\n\t\t\tuser,\n\t\t\tMAX_USER_COUNT = 3,\n\t\t\tuserLength = this.attendees.length,\n\t\t\tMAX_USER_COUNT_DISPLAY = 5;\n\n\t\tif (userLength > 0)\n\t\t{\n\t\t\tif (userLength > MAX_USER_COUNT_DISPLAY)\n\t\t\t{\n\t\t\t\tuserLength = MAX_USER_COUNT;\n\t\t\t}\n\n\t\t\tfor (i = 0; i < userLength; i++)\n\t\t\t{\n\t\t\t\tuser = this.attendees[i] || {};\n\t\t\t\tthis.plannerField.currentAttendeesWrap.appendChild(BX.create(\"IMG\", {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tid: 'simple_popup_' + user.id,\n\t\t\t\t\t\tsrc: user.smallAvatar || '',\n\t\t\t\t\t\t'bx-tooltip-user-id': user.id\n\t\t\t\t\t},\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tclassName: 'calendar-member'\n\t\t\t\t\t}}));\n\t\t\t}\n\n\t\t\tif (userLength < this.attendees.length)\n\t\t\t{\n\t\t\t\tthis.plannerField.currentAttendeesWrap.appendChild(BX.create(\"SPAN\", {\n\t\t\t\t\ttext: BX.message('EC_ATTENDEES_MORE').replace('#COUNT#', this.attendees.length - userLength)\n\t\t\t\t}));\n\t\t\t}\n\t\t}\n\t}\n\n\tshowPlannerSlide()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.setAutoHide(false);\n\t\t}\n\t\tthis.prepareSecondSlide({\n\t\t\tcloseCallback : BX.proxy(this.hidePlannerSlide, this)\n\t\t});\n\n\t\t// Attendees selector\n\t\tthis.attendeesSelector = new window.BXEventCalendar.DestinationSelector(this.calendar.id + '-simple-popup-destination',\n\t\t\t{\n\t\t\t\twrapNode: this.secondSlide,\n\t\t\t\titemsSelected : this.attendeesCodes || this.calendar.util.getSocnetDestinationConfig('itemsSelected'),\n\t\t\t\tcalendar: this.calendar\n\t\t\t});\n\n\t\tthis.loader = BX.adjust(this.calendar.util.getLoader(), {style: {height: '180px'}});\n\t\tthis.secondSlide.appendChild(this.loader);\n\n\t\t// Prepare planner control and connected stuff\n\t\tthis.initPlannerControl();\n\n\t\tthis.meetingOptionsWrap = this.secondSlide.appendChild(BX.create('DIV', {\n\t\t\tprops: {className: 'calendar-add-popup-meeting-options-wrap'},\n\t\t\tstyle: {display: 'none'}\n\t\t}));\n\n\t\t//this.allowInviteField = this.createField('container-checkbox', this.meetingOptionsWrap);\n\t\t//this.allowInviteField.label = this.allowInviteField.innerWrap.appendChild(BX.create('LABEL', {props: {className: 'calendar-field-checkbox-label'}, html: BX.message('EC_ALLOW_INVITE_LABEL')}));\n\t\t//this.allowInviteField.checkbox = this.allowInviteField.label.appendChild(BX.create('INPUT', {attrs: {type: 'checkbox'}, props: {className: 'calendar-field-checkbox'}}));\n\t\t//this.allowInviteField.checkbox.checked = this.allowInvite;\n\n\t\tthis.notifyField = this.createField('container-checkbox', this.meetingOptionsWrap);\n\t\tthis.notifyField.label = this.notifyField.innerWrap.appendChild(BX.create('LABEL', {props: {className: 'calendar-field-checkbox-label'}, html: BX.message('EC_NOTIFY_STATUS_LABEL')}));\n\t\tthis.notifyField.checkbox = this.notifyField.label.appendChild(BX.create('INPUT', {attrs: {type: 'checkbox'}, props: {className: 'calendar-field-checkbox'}}));\n\t\tthis.notifyField.checkbox.checked = this.notify;\n\t}\n\n\thidePlannerSlide()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.setAutoHide(true);\n\t\t}\n\n\t\tif (this.allowInviteField)\n\t\t{\n\t\t\tthis.allowInvite = !!this.allowInviteField.checkbox.checked;\n\t\t}\n\n\t\tif (this.notifyField)\n\t\t{\n\t\t\tthis.notify = !!this.notifyField.checkbox.checked;\n\t\t}\n\n\t\tthis.destroyDestinationControls();\n\t}\n\n\tentryNameChanged()\n\t{\n\t\tvar value = this.nameField.input.value || BX.message('EC_ENTRY_NAME');\n\t\tif (this.params.nameNode)\n\t\t{\n\t\t\tthis.params.nameNode.innerHTML = BX.util.htmlspecialchars(value);\n\t\t}\n\n\t\tif (BX.type.isFunction(this.params.changeNameCallback))\n\t\t{\n\t\t\tthis.params.changeNameCallback(value);\n\t\t}\n\t}\n\n\tinitPlannerControl()\n\t{\n\n\t}\n\n\tonCalendarPlannerSelectorChanged(params)\n\t{\n\t\tif (this.calendar.util.getDayCode(this.entryTime.from) !== this.calendar.util.getDayCode(params.dateFrom)\n\t\t\t&& this.params.changeDateCallback\n\t\t)\n\t\t{\n\t\t\tthis.params.changeDateCallback(params.dateFrom);\n\t\t\tif (this.popup.angle)\n\t\t\t{\n\t\t\t\tthis.popup.setAngle(false);\n\t\t\t}\n\t\t}\n\t\tthis.setDateTimeValues(params.dateFrom, params.dateTo);\n\t}\n\n\tdestroyDestinationControls()\n\t{\n\t\tif (BX.SocNetLogDestination)\n\t\t{\n\t\t\tif (BX.SocNetLogDestination.isOpenDialog())\n\t\t\t\tBX.SocNetLogDestination.closeDialog();\n\n\t\t\tif (BX.SocNetLogDestination.popupWindow)\n\t\t\t\tBX.SocNetLogDestination.popupWindow.close();\n\n\t\t\tBX.SocNetLogDestination.closeSearch();\n\t\t}\n\n\t\tBX.removeCustomEvent('OnDestinationAddNewItem', BX.proxy(this.checkPlannerState, this));\n\t\tBX.removeCustomEvent('OnDestinationUnselect', BX.proxy(this.checkPlannerState, this));\n\t\tBX.removeCustomEvent('OnDestinationUnselect', BX.proxy(this.clearSecondSlideHeight, this));\n\t\tBX.removeCustomEvent('OnCalendarPlannerSelectorChanged', BX.proxy(this.onCalendarPlannerSelectorChanged, this));\n\t}\n\n\tplannerIsShown()\n\t{\n\t\treturn this.plannerWrap && BX.hasClass(this.plannerWrap, 'calendar-add-popup-show-planner');\n\t}\n\n\tcheckPlannerState()\n\t{\n\t\tvar\n\t\t\tparams = {\n\t\t\t\tcodes: this.attendeesSelector.getCodes(),\n\t\t\t\tfrom: this.calendar.util.formatDate(this.entryTime.from.getTime() - this.calendar.util.dayLength * 3),\n\t\t\t\tto: this.calendar.util.formatDate(this.entryTime.from.getTime() + this.calendar.util.dayLength * 10),\n\t\t\t\tlocation: this.locationSelector.getTextValue()\n\t\t\t};\n\n\t\tthis.attendeesCodes = this.attendeesSelector.getAttendeesCodes();\n\t\tthis.attendeesCodesList = this.attendeesSelector.getAttendeesCodesList(this.attendeesCodes);\n\t\tthis.updatePlanner(params);\n\t}\n\n\tupdatePlanner(params)\n\t{\n\t\tif (!params)\n\t\t\tparams = {};\n\n\t\tthis.plannerLoadedlocation = params.location || '';\n\t\tvar\n\t\t\t_this = this,\n\t\t\tcurEventId = 0;\n\n\t\tthis.calendar.request({\n\t\t\tdata: {\n\t\t\t\taction: 'update_planner',\n\t\t\t\tcodes: params.codes || [],\n\t\t\t\tcur_event_id: curEventId,\n\t\t\t\tdate_from: params.dateFrom || params.from || '',\n\t\t\t\tdate_to: params.dateTo || params.to || '',\n\t\t\t\ttimezone: this.timezoneField && this.timezoneField.select ? this.timezoneField.select.value : this.calendar.util.getUserOption('timezoneName'),\n\t\t\t\tlocation: this.plannerLoadedlocation,\n\t\t\t\t//roomEventId: params.roomEventId || '',\n\t\t\t\tentries: params.entrieIds || false,\n\t\t\t\tadd_cur_user_to_list: 'N'\n\t\t\t},\n\t\t\thandler: function(response)\n\t\t\t{\n\t\t\t\tvar\n\t\t\t\t\ti, attendees = [],\n\t\t\t\t\tattendeesIndex = {},\n\t\t\t\t\tupdateAttendeesControl = false,\n\t\t\t\t\tshowPlanner = !!(params.entries || (response.entries && response.entries.length > 0));\n\n\t\t\t\tfor (i = 0; i < response.entries.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (response.entries[i].type === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tattendees.push({\n\t\t\t\t\t\t\tid: response.entries[i].id,\n\t\t\t\t\t\t\tname: response.entries[i].name,\n\t\t\t\t\t\t\tavatar: response.entries[i].avatar,\n\t\t\t\t\t\t\tsmallAvatar: response.entries[i].smallAvatar || response.entries[i].avatar,\n\t\t\t\t\t\t\turl: response.entries[i].url\n\t\t\t\t\t\t});\n\t\t\t\t\t\tattendeesIndex[response.entries[i].id] = true;\n\n\t\t\t\t\t\tif (!_this.attendeesIndex[response.entries[i].id])\n\t\t\t\t\t\t\tupdateAttendeesControl = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!updateAttendeesControl)\n\t\t\t\t{\n\t\t\t\t\tfor (var id in _this.attendeesIndex)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (_this.attendeesIndex.hasOwnProperty(id) && !attendeesIndex[id])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tupdateAttendeesControl = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (updateAttendeesControl)\n\t\t\t\t{\n\t\t\t\t\t_this.attendees = attendees;\n\t\t\t\t\t_this.showAttendees();\n\t\t\t\t}\n\n\t\t\t\t// Show first time or refresh it state\n\t\t\t\tif (showPlanner)\n\t\t\t\t{\n\t\t\t\t\tvar refreshParams = {\n\t\t\t\t\t\tshow: showPlanner && !_this.plannerIsShown()\n\t\t\t\t\t};\n\n\t\t\t\t\tif (params.entries)\n\t\t\t\t\t{\n\t\t\t\t\t\tresponse.entries = params.entries;\n\t\t\t\t\t\trefreshParams.scaleFrom = params.from;\n\t\t\t\t\t\trefreshParams.scaleTo = params.to;\n\t\t\t\t\t}\n\n\t\t\t\t\trefreshParams.loadedDataFrom = params.from;\n\t\t\t\t\trefreshParams.loadedDataTo = params.to;\n\n\t\t\t\t\trefreshParams.data = {\n\t\t\t\t\t\tentries: response.entries,\n\t\t\t\t\t\taccessibility: response.accessibility\n\t\t\t\t\t};\n\n\t\t\t\t\trefreshParams.focusSelector = params.focusSelector == undefined ? false : params.focusSelector;\n\t\t\t\t\t_this.refreshPlannerState(refreshParams);\n\t\t\t\t}\n\t\t\t\telse if (!showPlanner && _this.plannerIsShown()) // Hide\n\t\t\t\t{\n\t\t\t\t\t_this.hidePlanner();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trefreshPlannerState(params)\n\t{\n\t\tif (!params || typeof params !== 'object')\n\t\t\tparams = {};\n\n\t\tthis.plannerData = params.data;\n\n\t\tvar\n\t\t\tworkTime = this.calendar.util.getWorkTime(),\n\t\t\tconfig = {\n\t\t\t\tchangeFromFullDay: {\n\t\t\t\t\tscaleType: '1hour',\n\t\t\t\t\ttimelineCellWidth: 40\n\t\t\t\t},\n\t\t\t\tshownScaleTimeFrom: workTime.start,\n\t\t\t\tshownScaleTimeTo: workTime.end,\n\t\t\t\twidth: this.plannerWrap.offsetWidth || 400,\n\t\t\t\tminWidth: this.plannerWrap.offsetWidth || 400,\n\t\t\t\tentriesListWidth: 50,\n\t\t\t\tshowEntiesHeader: false,\n\t\t\t\tshowEntryName: false\n\t\t\t},\n\t\t\tplannerShown = this.plannerIsShown();\n\n\t\tif (params.focusSelector == undefined)\n\t\t{\n\t\t\tparams.focusSelector = true;\n\t\t}\n\n\t\tif (!plannerShown && !params.data)\n\t\t{\n\t\t\tthis.checkPlannerState();\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Show planner cont\n\t\t\tif (params.show)\n\t\t\t{\n\t\t\t\tBX.addClass(this.plannerWrap, 'calendar-add-popup-show-planner');\n\t\t\t\tthis.meetingOptionsWrap.style.display = '';\n\t\t\t\tif (!plannerShown && params.show)\n\t\t\t\t{\n\t\t\t\t\tparams.focusSelector = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar\n\t\t\t\tfromTime = this.calendar.util.parseTime(this.dateTimeField.fromTimeInput.value),\n\t\t\t\ttoTime = this.calendar.util.parseTime(this.dateTimeField.toTimeInput.value),\n\t\t\t\tfromDate = new Date(this.entryTime.from.getTime()),\n\t\t\t\ttoDate = new Date(this.entryTime.from.getTime());\n\n\t\t\tfromDate.setHours(fromTime.h, fromTime.m, 0);\n\t\t\ttoDate.setHours(toTime.h, toTime.m, 0);\n\n\t\t\tBX.onCustomEvent('OnCalendarPlannerDoUpdate', [\n\t\t\t\t{\n\t\t\t\t\tplannerId: this.plannerId,\n\t\t\t\t\tconfig: config,\n\t\t\t\t\tfocusSelector: params.focusSelector,\n\t\t\t\t\tselector: {\n\t\t\t\t\t\tfrom: fromDate,\n\t\t\t\t\t\tto: toDate,\n\t\t\t\t\t\tfullDay: false,\n\t\t\t\t\t\tanimation: true,\n\t\t\t\t\t\tupdateScaleLimits: true\n\t\t\t\t\t},\n\t\t\t\t\tdata: params.data || false,\n\t\t\t\t\tloadedDataFrom: params.loadedDataFrom,\n\t\t\t\t\tloadedDataTo: params.loadedDataTo,\n\t\t\t\t\tshow: !!params.show\n\t\t\t\t}\n\t\t\t]);\n\t\t}\n\t}\n\n\tgetBusyUserList()\n\t{\n\t\tvar i, busyUsers = [];\n\t\tif (this.plannerData)\n\t\t{\n\t\t\tfor (i in this.plannerData.entries)\n\t\t\t{\n\t\t\t\tif (this.plannerData.entries.hasOwnProperty(i) &&\n\t\t\t\t\tthis.plannerData.entries[i].id &&\n\t\t\t\t\tthis.plannerData.entries[i].status !== 'h' &&\n\t\t\t\t\tparseInt(this.plannerData.entries[i].strictStatus) &&\n\t\t\t\t\t!this.plannerData.entries[i].currentStatus\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tbusyUsers.push(this.plannerData.entries[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn busyUsers;\n\t}\n\n\thidePlanner()\n\t{\n\t\tthis.meetingOptionsWrap.style.display = 'none';\n\t\tthis.plannerWrap.style.opacity = 0;\n\t\tthis.plannerWrap.style.height = 0;\n\t\tthis.plannerWrap.style.overflow = 'hidden';\n\t\tBX.removeClass(this.plannerWrap, 'calendar-add-popup-show-planner');\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === this.calendar.util.KEY_CODES['enter'])\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t\telse if(e.keyCode === this.calendar.util.KEY_CODES['escape'] && this.couldBeClosedByEsc())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\tcheckBeforeClose()\n\t{\n\t\tvar popupData = this.getPopupData();\n\t\treturn !(this.params.entryName !== popupData.name\n\t\t\t|| popupData.location\n\t\t\t|| this.initiateAttendees.join(',') !== popupData.attendees.join(',')\n\t\t\t|| this.initiateTimeFrom !== this.dateTimeField.fromTimeInput.value\n\t\t\t|| this.initiateTimeTo !== this.dateTimeField.toTimeInput.value\n\t\t);\n\t}\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"names":["CompactEventForm","options","setEventNamespace","userId","Util","getCurrentUserId","type","ownerId","mode","params","setParams","setMode","popupId","Math","round","random","popup","Popup","bindNode","width","zIndex","autoHide","closeByEsc","offsetTop","offsetLeft","closeIcon","titleBar","draggable","resizable","lightShadow","className","cacheable","content","getPopupContent","buttons","getButtons","Dom","addClass","removeClass","popupContainer","prepareData","then","hideLoader","setFormValues","show","DOM","wrap","Tag","render","createTitleControl","createColorControl","createSectionControl","createDateTimeControl","createUserSelectorControl","createPlannerControl","createLocationControl","createRemindersControl","entry","titleInput","value","getName","dateTimeControl","setValue","from","to","fullDay","timezoneFrom","getTimezoneFrom","timezoneTo","getTimezoneTo","timezoneName","userSettings","sectionInput","getCurrentSectionId","sectionSelector","updateValue","fieldIsPinned","currentSection","getCurrentSection","parseInt","pinField","colorSelector","getColor","COLOR","reminderControl","getReminders","repeatSelector","getRrule","accessibilityInput","accessibility","locationSelector","getLocation","privateEventCheckbox","checked","private","importantEventCheckbox","important","userSelector","getAttendeesCodes","loadPlannerData","codes","formatDate","getTime","getDayLength","timezone","location","getTextValue","getMode","EDIT_MODE","push","BX","UI","Button","text","Loc","getMessage","isNewEntry","canDo","VIEW_MODE_MODE","Type","isDomNode","loader","remove","VIEW_MODE","EntryManager","getEntryInstance","userIndex","Promise","resolve","setTimeout","appendChild","dateTimeWrap","dateTimeSelector","DateTimeControl","showTimezone","outerWrap","plannerId","calendar","id","plannerShown","plannerWrap","secondSlide","create","props","addCustomEvent","proxy","checkPlannerState","clearSecondSlideHeight","onCalendarPlannerSelectorChanged","requestPlanner","ajax","get","util","getActionUrl","action","sessid","bitrix_sessid","bx_event_calendar_request","reqId","planner_id","delegate","html","trim","innerHTML","remindersWrap","remindersControl","Reminder","valuesContainerNode","addButtonNode","subscribe","event","entryTime","attendees","attendeesCodesList","attendeesIndex","attendeesCodes","allowInvite","notify","secondSlideIsOpened","checkDataBeforeCloseMode","displayed","ownerUser","currentUser","initiateAttendees","forEach","user","anglePosition","POPUP_WIDTH","POPUP_HEIGHT","ANGLE_WIDTH","nodePos","pos","entryNode","windowSize","GetWindowSize","right","innerWidth","scrollTop","innerHeight","bottom","PopupWindow","createContent","overlay","opacity","PopupWindowButton","message","events","click","save","close","setAngle","offset","position","element","popupButtonsContainer","buttonsContainer","contentContainer","style","minHeight","offsetHeight","nameField","input","focus","select","bind","document","keyHandler","disableKeyHandler","checkBusyUsers","isMeetingsEnabled","busyUsers","getBusyUserList","length","busyUsersDialog","window","BXEventCalendar","BusyUsersDialog","users","saveCallback","i","userIds","excludeUsers","join","section","sectionController","getSection","entryController","saveEntry","getPopupData","isFunction","checkBeforeClose","confirm","enableKeyHandler","removeCustomEvent","destroy","onCustomEvent","closeCallback","unbind","dateTimeField","fromTime","shown","toTime","reminderField","reminder","reminderMenu","sectionMenu","selectContol","popupMenu","PopupWindowManager","getCurrentPopup","mainSlide","createSectionSelector","createDateTimeField","createReminderField","createlocationField","createPlannerField","fullFormField","createField","link","innerWrap","fullFormCallback","sliderContainer","children","closeSecondSlideCallback","cleanNode","backButton","closeSecondSlide","secondSlideEscHandler","display","resizeSecondSlide","e","keyCode","KEY_CODES","resizeTimeout","clearTimeout","height","scrollHeight","parentNode","SectionSelector","sectionList","getSectionListForEdit","sectionGroupList","getSectionGroupList","selectCallback","changeSectionCallback","openPopupCallback","setAutoHide","closePopupCallback","_this","initiateTimeFrom","formatTime","getHours","getMinutes","initiateTimeTo","dateWrap","formatDateUsable","fromTimeInputWrap","fromTimeInput","attrs","placeholder","_fromDateValue","toTimeInputWrap","toTimeInput","SelectInput","adaptTimeValue","parseTime","values","getSimpleTimeList","onChangeCallback","fromDate","Date","toDate","setHours","h","m","timeNode","changeTimeCallback","getUserOption","timezoneField","change","setUserOption","timezone_id","timezoneList","getTimezoneList","hasOwnProperty","add","Option","title","locationField","LocationSelector","wrapNode","getControlContentCallback","prepareSecondSlide","saveValues","plannerField","innerWrapAttendeesWrap","currentAttendeesWrap","showAttendees","plannerLink","showPlannerSlide","MAX_USER_COUNT","userLength","MAX_USER_COUNT_DISPLAY","src","smallAvatar","replace","hidePlannerSlide","attendeesSelector","DestinationSelector","itemsSelected","getSocnetDestinationConfig","adjust","getLoader","initPlannerControl","meetingOptionsWrap","notifyField","label","checkbox","allowInviteField","destroyDestinationControls","nameNode","htmlspecialchars","changeNameCallback","getDayCode","dateFrom","changeDateCallback","angle","setDateTimeValues","dateTo","SocNetLogDestination","isOpenDialog","closeDialog","popupWindow","closeSearch","hasClass","getCodes","dayLength","getAttendeesCodesList","updatePlanner","plannerLoadedlocation","curEventId","request","data","cur_event_id","date_from","date_to","entries","entrieIds","add_cur_user_to_list","handler","response","updateAttendeesControl","showPlanner","name","avatar","url","refreshParams","plannerIsShown","scaleFrom","scaleTo","loadedDataFrom","loadedDataTo","focusSelector","undefined","refreshPlannerState","hidePlanner","plannerData","workTime","getWorkTime","config","changeFromFullDay","scaleType","timelineCellWidth","shownScaleTimeFrom","start","shownScaleTimeTo","end","offsetWidth","minWidth","entriesListWidth","showEntiesHeader","showEntryName","selector","animation","updateScaleLimits","status","strictStatus","currentStatus","overflow","couldBeClosedByEsc","popupData","entryName","EventEmitter"],"mappings":"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"}