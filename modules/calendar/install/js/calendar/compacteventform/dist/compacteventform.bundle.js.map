{"version":3,"file":"compacteventform.bundle.js","sources":["../src/compacteventform.js"],"sourcesContent":["// @flow\nimport {Type, Tag, Loc, Dom, Event, Runtime, Text} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Util} from 'calendar.util';\nimport {Popup, PopupManager} from 'main.popup';\nimport {\n\tDateTimeControl,\n\tLocation,\n\tReminder,\n\tSectionSelector,\n\tUserPlannerSelector,\n\tColorSelector,\n\tBusyUsersDialog\n} from \"calendar.controls\";\nimport {Entry, EntryManager} from \"calendar.entry\";\nimport {SectionManager} from \"calendar.sectionmanager\";\n\nexport class CompactEventForm extends EventEmitter\n{\n\tstatic VIEW_MODE = 'view';\n\tstatic EDIT_MODE = 'edit';\n\tstatic USER_URL = '/company/personal/user/#USER_ID#/';\n\tSTATE = {READY: 1, REQUEST: 2, ERROR: 3};\n\tzIndex = 1200;\n\tZ_INDEX_OFFSET = -1000;\n\tuserSettings = '';\n\tDOM = {};\n\tmode;\n\tdisplayed = false;\n\tsections = [];\n\tsectionIndex = {};\n\ttrackingUsersList = [];\n\tcheckDataBeforeCloseMode = true;\n\tCHECK_CHANGES_DELAY = 500;\n\tRELOAD_DATA_DELAY = 500;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.CompactEventForm');\n\t\tthis.userId = options.userId || Util.getCurrentUserId();\n\t\tthis.type = options.type || 'user';\n\t\tthis.isLocationCalendar = options.isLocationCalendar || false;\n\t\tthis.calendarContext = options.calendarContext || null;\n\t\tthis.ownerId = options.ownerId || this.userId;\n\t\tthis.BX = Util.getBX();\n\n\t\tthis.checkForChangesDebounce = Runtime.debounce(this.checkForChanges, this.CHECK_CHANGES_DELAY, this);\n\t\tthis.reloadEntryDataDebounce = Runtime.debounce(this.reloadEntryData, this.RELOAD_DATA_DELAY, this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\t}\n\n\tshow(mode = CompactEventForm.EDIT_MODE, params ={})\n\t{\n\t\tthis.setParams(params);\n\t\tthis.setMode(mode);\n\n\t\tthis.state = this.STATE.READY;\n\n\t\tthis.popupId = 'compact-event-form-' + Math.round(Math.random() * 100000);\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tthis.popup = this.getPopup(params);\n\n\t\t// Small hack to use transparent titlebar to drag&drop popup\n\t\tDom.addClass(this.popup.titleBar, 'calendar-add-popup-titlebar');\n\t\tDom.removeClass(this.popup.popupContainer, 'popup-window-with-titlebar');\n\t\tDom.removeClass(this.popup.closeIcon, 'popup-window-titlebar-close-icon');\n\t\tEvent.bind(document, \"mousedown\", this.outsideMouseDownClose);\n\t\tEvent.bind(document, \"mouseup\", this.checkOutsideClickClose);\n\t\tEvent.bind(document, \"keydown\", this.keyHandler);\n\t\tEvent.bind(this.popup.popupContainer, 'transitionend', () => {Dom.removeClass(this.popup.popupContainer, 'calendar-simple-view-popup-show');});\n\n\t\t// Fulfill previous deletions to avoid data inconsistency\n\t\tif (this.getMode() === CompactEventForm.EDIT_MODE)\n\t\t{\n\t\t\tEntryManager.doDelayedActions();\n\t\t}\n\n\t\tthis.prepareData()\n\t\t\t.then(() => {\n\t\t\t\tif (this.checkLocationView())\n\t\t\t\t{\n\t\t\t\t\tthis.setFormValuesLocation();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setFormValues();\n\t\t\t\t}\n\n\t\t\t\tthis.popup.show();\n\n\t\t\t\tthis.checkDataBeforeCloseMode = true;\n\t\t\t\tif (this.canDo('edit') && this.DOM.titleInput && mode === CompactEventForm.EDIT_MODE)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.titleInput.focus();\n\t\t\t\t\tthis.DOM.titleInput.select();\n\t\t\t\t}\n\n\t\t\t\tthis.displayed = true;\n\n\t\t\t\tif (this.getMode() === CompactEventForm.VIEW_MODE)\n\t\t\t\t{\n\t\t\t\t\tUtil.sendAnalyticLabel({calendarAction: 'view_event', formType: 'compact'});\n\t\t\t\t\tthis.popup.getButtons()[0].button.focus();\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t\t\t&& !this.userPlannerSelector.isPlannerDisplayed()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.userPlannerSelector.checkBusyTime()\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tcheckLocationView()\n\t{\n\t\treturn this.getMode() === CompactEventForm.VIEW_MODE && this.type === 'location'\n\t}\n\n\tgetPopup(params)\n\t{\n\t\treturn new Popup(this.popupId,\n\t\t\tparams.bindNode,\n\t\t\t{\n\t\t\t\tzIndex: this.zIndex + this.Z_INDEX_OFFSET,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttitleBar: true,\n\t\t\t\tdraggable: true,\n\t\t\t\tresizable: false,\n\t\t\t\tlightShadow: true,\n\t\t\t\tclassName: 'calendar-simple-view-popup calendar-simple-view-popup-show',\n\t\t\t\tcacheable: false,\n\t\t\t\tcontent: this.checkLocationView()\n\t\t\t\t\t? this.getPopupContentLocation()\n\t\t\t\t\t: this.getPopupContentCalendar(),\n\t\t\t\tbuttons: this.getButtons(),\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t\t},\n\t\t\t});\n\t}\n\n\tisShown()\n\t{\n\t\treturn this.displayed;\n\t}\n\n\tclose()\n\t{\n\t\tif (\n\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& this.formDataChanged()\n\t\t\t&& this.checkDataBeforeCloseMode\n\t\t\t&& !confirm(Loc.getMessage('EC_SAVE_ENTRY_CONFIRM'))\n\t\t)\n\t\t{\n\t\t\t// Workaround to prevent form closing even if user don't want to and presses \"cancel\" in confirm\n\t\t\tif (this.popup)\n\t\t\t{\n\t\t\t\tthis.popup.destroyed = true;\n\t\t\t\tsetTimeout(() => {this.popup.destroyed = false;}, 0);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tthis.displayed = false;\n\t\tthis.emit('onClose');\n\t\tEvent.unbind(document, \"mousedown\", this.outsideMouseDownClose);\n\t\tEvent.unbind(document, \"mouseup\", this.checkOutsideClickClose);\n\t\tEvent.unbind(document, \"keydown\", this.keyHandler);\n\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tthis.userPlannerSelector.destroy();\n\t\t}\n\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\n\t\tif (Location)\n\t\t{\n\t\t\tLocation.setCurrentCapacity(0);\n\t\t}\n\t\tUtil.clearPlannerWatches();\n\t\tUtil.closeAllPopups();\n\t}\n\n\tgetPopupContentCalendar()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-add-popup-wrap\">\n\t\t\t${this.DOM.titleOuterWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-string-select\">\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t${this.getTitleControl()}\n\t\t\t\t\t${this.getColorControl()}\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t\t<div class=\"calendar-field-container calendar-field-container-choice\">\n\t\t\t\t${this.getSectionControl('textselect')}\n\t\t\t</div>\n\n\t\t\t${this.getDateTimeControl()}\n\n\t\t\t${this.getUserPlannerSelector()}\n\n\t\t\t<div class=\"calendar-field-container calendar-field-container-info\">\n\t\t\t\t${this.getTypeInfoControl()}\n\n\t\t\t\t\t${this.getLocationControl()}\n\n\t\t\t\t${this.DOM.remindersOuterWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_REMIND_LABEL')}:</div>\n\t\t\t\t\t${this.createRemindersControl()}\n\t\t\t\t</div>`}\n\t\t\t\t${this.getRRuleInfoControl()}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tgetPopupContentLocation()\n\t{\n\t\tthis.DOM.wrap = Tag.render`<div class=\"calendar-add-popup-wrap\">\n\t\t\t${this.DOM.titleOuterWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-container calendar-field-container-string-select\">\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t${this.getTitleControlLocation()}\n\t\t\t\t\t${this.getColorControlsLocationView()}\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t\t<div class=\"calendar-field-container calendar-field-container-choice\">\n\t\t\t\t${this.getSectionControl('location')}\n\t\t\t</div>\n\t\t\t${this.getDateTimeControl()}\n\t\t\t\n\t\t</div>`;\n\t\tif (this.entry.id !== this.entry.parentId)\n\t\t{\n\t\t\tthis.DOM.wrap.appendChild(Tag.render`\n\t\t\t\t${this.getHostControl()}\n\t\t\t`);\n\t\t}\n\n\t\treturn this.DOM.wrap;\n\t}\n\n\tgetButtons()\n\t{\n\t\tlet buttons = [];\n\t\tconst mode = this.getMode();\n\n\t\tif (mode === CompactEventForm.EDIT_MODE)\n\t\t{\n\t\t\tconst saveBtn = new BX.UI.Button({\n\t\t\t\tname: 'save',\n\t\t\t\ttext : (this.isNewEntry()\n\t\t\t\t\t? Loc.getMessage('CALENDAR_EVENT_DO_ADD')\n\t\t\t\t\t: Loc.getMessage('CALENDAR_EVENT_DO_SAVE')),\n\t\t\t\tclassName: \"ui-btn ui-btn-primary\",\n\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}}\n\t\t\t});\n\t\t\tsaveBtn.button.setAttribute('data-role', 'saveButton');\n\t\t\tbuttons.push(saveBtn);\n\n\n\t\t\tconst closeBtn = new BX.UI.Button({\n\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_CANCEL'),\n\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\tif (this.isNewEntry())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setFormValues();\n\n\t\t\t\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.userPlannerSelector.destroy();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.setMode(CompactEventForm.VIEW_MODE);\n\t\t\t\t\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t});\n\t\t\tcloseBtn.button.setAttribute('data-role', 'closeButton');\n\t\t\tbuttons.push(closeBtn);\n\n\t\t\tconst fullFormBtn = new BX.UI.Button({\n\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_FULL_FORM'),\n\t\t\t\tclassName: \"ui-btn calendar-full-form-btn\",\n\t\t\t\tevents : {click : this.editEntryInSlider.bind(this)}\n\t\t\t});\n\t\t\tfullFormBtn.button.setAttribute('data-role', 'fullForm');\n\t\t\tbuttons.push(fullFormBtn);\n\t\t}\n\t\telse if (mode === CompactEventForm.VIEW_MODE)\n\t\t{\n\t\t\tif (this.entry.isMeeting() && this.entry.getCurrentStatus() === 'Q')\n\t\t\t{\n\t\t\t\tconst acceptBtn = new BX.UI.Button({\n\t\t\t\t\tclassName: \"ui-btn ui-btn-primary\",\n\t\t\t\t\ttext : Loc.getMessage('EC_DESIDE_BUT_Y'),\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'Y')\n\t\t\t\t\t\t\t\t.then(this.refreshMeetingStatus.bind(this));\n\t\t\t\t\t\t}}\n\t\t\t\t});\n\t\t\t\tacceptBtn.button.setAttribute('data-role', 'accept');\n\t\t\t\tbuttons.push(acceptBtn);\n\n\t\t\t\tconst declineBtn = new BX.UI.Button({\n\t\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\t\ttext : Loc.getMessage('EC_DESIDE_BUT_N'),\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'N')\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.isShown())\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t});\n\t\t\t\tdeclineBtn.button.setAttribute('data-role', 'decline');\n\t\t\t\tbuttons.push(declineBtn);\n\t\t\t}\n\n\t\t\tif (this.checkLocationView())\n\t\t\t{\n\t\t\t\tif (this.entry.id !== this.entry.parentId)\n\t\t\t\t{\n\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\tclassName: `ui-btn ${this.entry.isMeeting() && this.entry.getCurrentStatus() === 'Q' ? 'ui-btn-link' : 'ui-btn-primary'}`,\n\t\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_OPEN_PARENT'),\n\t\t\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\t\t\t\tBX.Calendar.EntryManager.openViewSlider(\n\t\t\t\t\t\t\t\t\t\tthis.entry.parentId,\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\t\t\tfrom: this.entry.from,\n\t\t\t\t\t\t\t\t\t\t\ttimezoneOffset: this.entry && this.entry.data ? this.entry.data.TZ_OFFSET_FROM : null\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tif(this.canDo('release'))\n\t\t\t\t\t{\n\t\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\t\tname: 'release',\n\t\t\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_RELEASE'),\n\t\t\t\t\t\t\t\tclassName: 'ui-btn ui-btn-light-border',\n\t\t\t\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\t\t\t\t\tthis.releaseLocation();\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\tclassName: `ui-btn ui-btn-disabled`,\n\t\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_UPDATE_PROGRESS'),\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst openBtn = new BX.UI.Button({\n\t\t\t\t\tclassName: `ui-btn ${this.entry.isMeeting() && this.entry.getCurrentStatus() === 'Q' ? 'ui-btn-link' : 'ui-btn-primary'}`,\n\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_OPEN'),\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\t\tBX.Calendar.EntryManager.openViewSlider(\n\t\t\t\t\t\t\t\tthis.entry.id,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\t\t\t\tcalendarContext: this.calendarContext,\n\t\t\t\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\t\t\tfrom: this.entry.from,\n\t\t\t\t\t\t\t\t\ttimezoneOffset: this.entry && this.entry.data ? this.entry.data.TZ_OFFSET_FROM : null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t}}\n\t\t\t\t});\n\t\t\t\topenBtn.button.setAttribute('data-role', 'openButton');\n\t\t\t\tbuttons.push(openBtn);\n\t\t\t}\n\n\t\t\tif (this.entry.isMeeting() && this.entry.getCurrentStatus() === 'N')\n\t\t\t{\n\t\t\t\tconst acceptBtn = new BX.UI.Button({\n\t\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\t\ttext : Loc.getMessage('EC_DESIDE_BUT_Y'),\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'Y')\n\t\t\t\t\t\t\t\t.then(this.refreshMeetingStatus.bind(this));\n\t\t\t\t\t\t}}\n\t\t\t\t});\n\t\t\t\tacceptBtn.button.setAttribute('data-role', 'accept');\n\t\t\t\tbuttons.push(acceptBtn);\n\t\t\t}\n\n\t\t\tif (this.entry.isMeeting() && this.entry.getCurrentStatus() === 'Y')\n\t\t\t{\n\t\t\t\tconst declineBtn = new BX.UI.Button({\n\t\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\t\ttext : Loc.getMessage('EC_DESIDE_BUT_N'),\n\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\tEntryManager.setMeetingStatus(this.entry, 'N')\n\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\tif (this.isShown())\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}}\n\t\t\t\t});\n\t\t\t\tdeclineBtn.button.setAttribute('data-role', 'decline');\n\t\t\t\tbuttons.push(declineBtn);\n\t\t\t}\n\n\t\t\tif (!this.isNewEntry() && this.canDo('edit') && this.type !== 'location')\n\t\t\t{\n\t\t\t\tbuttons.push(\n\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_EDIT'),\n\t\t\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\t\t\tevents : {click : this.editEntryInSlider.bind(this)}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t!this.isNewEntry()\n\t\t\t\t&& this.canDo('delete')\n\t\t\t\t&& this.entry.getCurrentStatus() === 'H'\n\t\t\t\t&& !this.checkLocationView()\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (!this.entry.isMeeting()\n\t\t\t\t\t|| !this.entry.getCurrentStatus()\n\t\t\t\t\t|| this.entry.getCurrentStatus() === 'H')\n\t\t\t\t{\n\t\t\t\t\tbuttons.push(\n\t\t\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\t\t\ttext : Loc.getMessage('CALENDAR_EVENT_DO_DELETE'),\n\t\t\t\t\t\t\tclassName: \"ui-btn ui-btn-link\",\n\t\t\t\t\t\t\tevents : {click : () => {\n\t\t\t\t\t\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\t\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\tEntryManager.deleteEntry(this.entry);\n\n\t\t\t\t\t\t\t\t\tif (!this.entry.wasEverRecursive())\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (buttons.length > 2)\n\t\t{\n\t\t\tbuttons[1].button.className = \"ui-btn ui-btn-light-border\";\n\t\t}\n\n\t\treturn buttons;\n\t}\n\n\tfreezePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.buttons.forEach((button) => {\n\t\t\t\tif (button?.options?.name === 'save')\n\t\t\t\t{\n\t\t\t\t\tbutton.setClocking(true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tunfreezePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.buttons.forEach((button) => {\n\t\t\t\tbutton.setClocking(false);\n\t\t\t\tbutton.setDisabled(false);\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshMeetingStatus()\n\t{\n\t\tthis.emit('doRefresh');\n\t\tthis.popup.setButtons(this.getButtons());\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tthis.userPlannerSelector.displayAttendees(this.entry.getAttendees());\n\t\t}\n\t}\n\n\thideLoader()\n\t{\n\t\tif (Type.isDomNode(this.DOM.loader))\n\t\t{\n\t\t\tDom.remove(this.DOM.loader);\n\t\t\tthis.DOM.loader = null;\n\t\t}\n\t}\n\n\tshowInEditMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.EDIT_MODE, params);\n\t}\n\n\tshowInViewMode(params = {})\n\t{\n\t\treturn this.show(CompactEventForm.VIEW_MODE, params);\n\t}\n\n\tsetMode(mode)\n\t{\n\t\tif (mode === 'edit' || mode === 'view')\n\t\t{\n\t\t\tthis.mode = mode;\n\t\t}\n\t}\n\n\tgetMode()\n\t{\n\t\treturn this.mode;\n\t}\n\n\tcheckForChanges()\n\t{\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.VIEW_MODE\n\t\t\t&& this.formDataChanged()\n\t\t)\n\t\t{\n\t\t\tthis.setMode(CompactEventForm.EDIT_MODE);\n\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t}\n\t\telse if (\n\t\t\t!this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& !this.formDataChanged()\n\t\t)\n\t\t{\n\t\t\tthis.setMode(CompactEventForm.VIEW_MODE);\n\t\t\tthis.popup.setButtons(this.getButtons());\n\t\t}\n\t\tthis.emitOnChange();\n\t}\n\n\tcheckLocationForm(event)\n\t{\n\t\tif (event && event instanceof BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst usersCount = data.usersCount;\n\n\t\t\tlet locationCapacity = Location.getCurrentCapacity() || 0;\n\n\t\t\tif (this.locationSelector.value.type === undefined)\n\t\t\t{\n\t\t\t\tif (locationCapacity)\n\t\t\t\t{\n\t\t\t\t\tlocationCapacity = 0;\n\t\t\t\t\tLocation.setCurrentCapacity(0);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (locationCapacity < usersCount && locationCapacity !== 0)\n\t\t\t{\n\t\t\t\tthis.locationSelector.addCapacityAlert();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.locationSelector.removeCapacityAlert();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFormDataChanges(excludes = [])\n\t{\n\t\tconst entry = this.entry;\n\t\tlet fields = [];\n\n\t\t// Name\n\t\tif (!excludes.includes('name') && entry.name !== this.DOM.titleInput.value)\n\t\t{\n\t\t\tfields.push('name');\n\t\t}\n\n\t\t// Location\n\t\tif (\n\t\t\t!excludes.includes('location')\n\t\t\t&&\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(entry.getLocation()))\n\t\t\t!==\n\t\t\tthis.locationSelector.getTextLocation(Location.parseStringValue(this.locationSelector.getTextValue()))\n\t\t)\n\t\t{\n\t\t\tfields.push('location');\n\t\t}\n\n\t\t// Date + time\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tif (\n\t\t\t!excludes.includes('date&time')\n\t\t\t&&\n\t\t\t(entry.isFullDay() !== dateTime.fullDay\n\t\t\t\t|| dateTime.from.toString() !== entry.from.toString()\n\t\t\t\t|| dateTime.to.toString() !== entry.to.toString()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tfields.push('date&time');\n\t\t}\n\n\t\t// Notify\n\t\tif (\n\t\t\t!excludes.includes('notify')\n\t\t\t&& (!entry.isMeeting() || entry.getMeetingNotify()) !== this.userPlannerSelector.getInformValue()\n\t\t)\n\t\t{\n\t\t\tfields.push('notify');\n\t\t}\n\n\t\t// Section\n\t\tif (!excludes.includes('section') && parseInt(entry.sectionId) !== parseInt(this.sectionValue))\n\t\t{\n\t\t\tfields.push('section');\n\t\t}\n\n\t\t// Access codes\n\t\tif (\n\t\t\t!excludes.includes('codes')\n\t\t\t&&\n\t\t\tthis.userPlannerSelector.getEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t\t!==\n\t\t\tentry.getAttendeesEntityList().map((item)=>{return item.entityId + ':' + item.id}).join('|')\n\t\t)\n\t\t{\n\t\t\tfields.push('codes');\n\t\t}\n\n\t\treturn fields;\n\t}\n\n\tformDataChanged()\n\t{\n\t\treturn this.getFormDataChanges().length > 0;\n\t}\n\n\tsetParams(params = {})\n\t{\n\t\tthis.userId = params.userId || Util.getCurrentUserId();\n\t\tthis.type = params.type || 'user';\n\t\tthis.isLocationCalendar = params.isLocationCalendar || false;\n\t\tthis.locationAccess = params.locationAccess || false;\n\t\tthis.dayOfWeekMonthFormat = params.dayOfWeekMonthFormat || false;\n\t\tthis.calendarContext = params.calendarContext || null;\n\t\tthis.ownerId = params.ownerId ? params.ownerId : 0;\n\t\tif (this.type === 'user' && !this.ownerId)\n\t\t{\n\t\t\tthis.ownerId = this.userId;\n\t\t}\n\t\tthis.entry = EntryManager.getEntryInstance(params.entry, params.userIndex, {type: this.type, ownerId: this.ownerId});\n\t\tthis.sectionValue = null;\n\n\t\tif (\n\t\t\t!this.entry.id\n\t\t\t&& Type.isPlainObject(params.entryTime)\n\t\t\t&& Type.isDate(params.entryTime.from)\n\t\t\t&& Type.isDate(params.entryTime.to)\n\t\t)\n\t\t{\n\t\t\tthis.entry.setDateTimeValue(params.entryTime);\n\t\t}\n\n\t\tif (Type.isPlainObject(params.userSettings))\n\t\t{\n\t\t\tthis.userSettings = params.userSettings;\n\t\t}\n\n\t\tthis.locationFeatureEnabled = !!params.locationFeatureEnabled;\n\t\tthis.locationList = Type.isArray(params.locationList)\n\t\t\t? params.locationList.filter(locationItem => {return locationItem.PERM.view_full})\n\t\t\t: [];\n\n\t\tthis.roomsManager = params.roomsManager || null;\n\t\tthis.iblockMeetingRoomList = params.iblockMeetingRoomList || [];\n\n\t\tthis.plannerFeatureEnabled = !!params.plannerFeatureEnabled;\n\n\t\tthis.setSections(params.sections, params.trackingUserList)\n\t}\n\n\tsetSections(sections, trackingUsersList = [])\n\t{\n\t\tthis.sections = sections;\n\t\tthis.sectionIndex = {};\n\t\tthis.trackingUsersList = trackingUsersList || [];\n\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {\n\t\t\t\tconst id = parseInt(value.ID || value.id);\n\t\t\t\tif (id > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.sectionIndex[id] = ind;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\n\t\tconst section = this.getCurrentSection();\n\t\tif (this.entry.id)\n\t\t{\n\t\t\tthis.getSectionsForEditEvent(this.sections, section);\n\t\t}\n\t}\n\n\tprepareData(params = {})\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst section = this.getCurrentSection();\n\t\t\tif (section && section.canDo)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.getCompactFormData', {\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\tloadSectionId: this.entry.sectionId\n\t\t\t\t\t}\n\t\t\t\t}).then((response) => {\n\t\t\t\t\tif (response && response.data && response.data.section)\n\t\t\t\t\t{\n\t\t\t\t\t\t// todo: refactor this part to new Section entities\n\t\t\t\t\t\tthis.sections.push(new window.BXEventCalendar.Section(Util.getCalendarContext(), response.data.section));\n\t\t\t\t\t\tthis.setSections(this.sections);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tgetTitleControl()\n\t{\n\t\tthis.DOM.titleInput = Tag.render`\n\t\t\t<input class=\"calendar-field calendar-field-string\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tplaceholder=\"${Loc.getMessage('EC_ENTRY_NAME')}\"\n\t\t\t\ttype=\"text\"\n\t\t\t/>\n\t\t`;\n\n\t\tEvent.bind(this.DOM.titleInput, 'keyup', this.checkForChangesDebounce);\n\t\tEvent.bind(this.DOM.titleInput, 'change', this.checkForChangesDebounce);\n\n\t\treturn this.DOM.titleInput;\n\t}\n\n\tgetTitleControlLocation()\n\t{\n\t\tthis.DOM.titleInput = Tag.render`\n\t\t\t<input class=\"calendar-field calendar-field-string\"\n\t\t\t\tvalue=\"\"\n\t\t\t\tplaceholder=\"${Loc.getMessage('EC_ENTRY_NAME')}\"\n\t\t\t\ttype=\"text\"\n\t\t\t\treadonly\n\t\t\t/>\n\t\t`;\n\n\t\treturn this.DOM.titleInput;\n\t}\n\n\tgetHostControl()\n\t{\n\t\tconst userId = this.entry.data.CREATED_BY;\n\t\tconst userUrl = CompactEventForm.USER_URL.replace('#USER_ID#', userId);\n\t\tconst userAvatar = this.BX.Calendar.EntryManager.userIndex[userId]\n\t\t\t? this.BX.Calendar.EntryManager.userIndex[userId].AVATAR\n\t\t\t: ''\n\t\t;\n\n\t\tthis.DOM.hostBar = Tag.render`\n\t\t\t<div class=\"calendar-slider-detail-option-without-border\">\n\t\t\t\t<div class=\"calendar-slider-detail-option-block\">\n\t\t\t\t\t<div class=\"calendar-field-value\">\n\t\t\t\t\t\t${Loc.getMessage('EC_HOST') + ': '}\n\t\t\t\t\t</div>\n\t\t\t\t\t<span class=\"calendar-field-location-host-img\">\n\t\t\t\t\t\t<a href=\"${userUrl}\">\n\t\t\t\t\t\t\t<img class=\"calendar-field-location-host-img-value\" src=\"${userAvatar}\" alt=\"\">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div class=\"calendar-slider-detail-option-value\">\n\t\t\t\t\t\t<a href=\"${userUrl}\" class=\"calendar-slider-sidebar-user-info-name calendar-slider-sidebar-user-info-name-padding\">${BX.util.htmlspecialchars(this.entry.name)}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.DOM.hostBar;\n\t}\n\n\tgetColorControl()\n\t{\n\t\tthis.DOM.colorSelect = Tag.render`<div class=\"calendar-field calendar-field-select calendar-field-tiny\"></div>`;\n\t\tthis.colorSelector = new ColorSelector({\n\t\t\twrap: this.DOM.colorSelect,\n\t\t\tmode: 'selector'\n\t\t});\n\n\t\tthis.colorSelector.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tconst color = event.getData().value;\n\t\t\t\tif (\n\t\t\t\t\t!this.isNewEntry()\n\t\t\t\t\t&& (this.canDo('edit') || this.entry.getCurrentStatus() !== false)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateColor', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tcolor: color\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.entry.data.COLOR = color;\n\n\t\t\t\t\tthis.emit('doRefresh');\n\t\t\t\t\tthis.emitOnChange();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\n\t\treturn this.DOM.colorSelect;\n\t}\n\n\tgetColorControlsLocationView()\n\t{\n\t\tthis.DOM.colorSelect = Tag.render`<div class=\"calendar-field calendar-field-select calendar-colorpicker-readonly calendar-field-tiny\"></div>`;\n\t\tthis.colorSelector = new ColorSelector({\n\t\t\twrap: this.DOM.colorSelect,\n\t\t\tmode: 'view'\n\t\t});\n\t\treturn this.DOM.colorSelect;\n\t}\n\n\tgetSectionControl(mode)\n\t{\n\t\tthis.DOM.sectionSelectWrap = Tag.render`<div class=\"calendar-field-choice-calendar\"></div>`;\n\t\tthis.sectionSelector = new SectionSelector({\n\t\t\touterWrap: this.DOM.sectionSelectWrap,\n\t\t\tdefaultCalendarType: this.type,\n\t\t\tdefaultOwnerId: this.ownerId,\n\t\t\tsectionList: this.sections,\n\t\t\tsectionGroupList: SectionManager.getSectionGroupList({\n\t\t\t\ttype: this.type,\n\t\t\t\townerId: this.ownerId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\ttrackingUsersList: this.trackingUsersList,\n\t\t\t}),\n\t\t\tmode: mode,\n\t\t\tzIndex: this.zIndex,\n\t\t\tgetCurrentSection: () => {\n\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\tif (section)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: section.id,\n\t\t\t\t\t\tname: section.name,\n\t\t\t\t\t\tcolor: section.color\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tselectCallback: (sectionValue) => {\n\t\t\t\tif (sectionValue)\n\t\t\t\t{\n\t\t\t\t\tif (this.colorSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.colorSelector.setValue(sectionValue.color);\n\t\t\t\t\t}\n\t\t\t\t\tthis.sectionValue = sectionValue.id;\n\t\t\t\t\tthis.checkForChangesDebounce();\n\n\t\t\t\t\tSectionManager.saveDefaultSectionId(this.sectionValue);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.sectionSelectWrap;\n\t}\n\n\tgetDateTimeControl()\n\t{\n\t\tthis.DOM.dateTimeWrap = Tag.render`<div class=\"calendar-field-container calendar-field-container-datetime\"></div>`;\n\n\t\tthis.dateTimeControl = new DateTimeControl(null, {\n\t\t\tshowTimezone: false,\n\t\t\touterWrap: this.DOM.dateTimeWrap,\n\t\t\tinlineEditMode: true\n\t\t});\n\n\t\tthis.dateTimeControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tlet value = event.getData().value;\n\t\t\t\tif (this.remindersControl)\n\t\t\t\t{\n\t\t\t\t\tthis.remindersControl.setFullDayMode(value.fullDay);\n\n\t\t\t\t\tif (this.isNewEntry() && !this.remindersControl.wasChangedByUser())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst defaultReminders = EntryManager.getNewEntryReminders(\n\t\t\t\t\t\t\tvalue.fullDay ? 'fullDay' : 'withTime'\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis.remindersControl.setValue(defaultReminders, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t{\n\t\t\t\t\tif (!this.userPlannerSelector.isPlannerDisplayed())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t\t\t}\n\t\t\t\t\tthis.userPlannerSelector.setLocationValue(this.locationSelector.getTextValue());\n\t\t\t\t\tthis.userPlannerSelector.setDateTime(value, true);\n\t\t\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t\t\t}\n\n\t\t\t\tif (this.locationSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfrom: event.getData().value.from,\n\t\t\t\t\t\t\tto: event.getData().value.to,\n\t\t\t\t\t\t\tfullDay: event.getData().value.fullDay,\n\t\t\t\t\t\t\tcurrentEventId: this.entry.id\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t}\n\n\t\t\t\tthis.checkForChangesDebounce();\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.dateTimeWrap;\n\t}\n\n\tgetUserPlannerSelector()\n\t{\n\t\tthis.DOM.userPlannerSelectorOuterWrap = Tag.render`<div>\n\t\t\t<div class=\"calendar-field-container calendar-field-container-members\">\n\t\t\t\t${this.DOM.userSelectorWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-block\">\n\t\t\t\t\t<div class=\"calendar-members-selected\">\n\t\t\t\t\t\t<span class=\"calendar-attendees-label\"></span>\n\t\t\t\t\t\t<span class=\"calendar-attendees-list\"></span>\n\t\t\t\t\t\t<span class=\"calendar-members-more\">${Loc.getMessage('EC_ATTENDEES_MORE')}</span>\n\t\t\t\t\t\t<span class=\"calendar-members-change-link\">${Loc.getMessage('EC_SEC_SLIDER_CHANGE')}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`}\n\t\t\t\t<span class=\"calendar-videocall-wrap calendar-videocall-hidden\"></span>\n\t\t\t\t${this.DOM.informWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-field-container-inform\">\n\t\t\t\t\t<span class=\"calendar-field-container-inform-text\">${Loc.getMessage('EC_NOTIFY_OPTION')}</span>\n\t\t\t\t</div>`}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-user-selector-wrap\"></div>\n\t\t\t<div class=\"calendar-add-popup-planner-wrap calendar-add-popup-show-planner\">\n\t\t\t\t${this.DOM.plannerOuterWrap = Tag.render`\n\t\t\t\t<div class=\"calendar-planner-wrapper\" style=\"height: 0\">\n\t\t\t\t</div>`}\n\t\t\t</div>\n\t\t\t${this.DOM.hideGuestsWrap = Tag.render`\n\t\t\t<div class=\"calendar-hide-members-container\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-hide-members-container-inner\">\n\t\t\t\t\t<div class=\"calendar-hide-members-icon-hidden\"></div>\n\t\t\t\t\t<div class=\"calendar-hide-members-text\">${Loc.getMessage('EC_HIDE_GUEST_NAMES')}</div>\n\t\t\t\t\t<span class=\"calendar-hide-members-helper\" data-hint=\"${Loc.getMessage('EC_HIDE_GUEST_NAMES_HINT')}\"></span>\n\t\t\t\t</div>\n\t\t\t</div>`}\n\t\t<div>`;\n\n\t\tthis.userPlannerSelector = new UserPlannerSelector({\n\t\t\touterWrap: this.DOM.userPlannerSelectorOuterWrap,\n\t\t\twrap: this.DOM.userSelectorWrap,\n\t\t\tinformWrap: this.DOM.informWrap,\n\t\t\tplannerOuterWrap: this.DOM.plannerOuterWrap,\n\t\t\thideGuestsWrap: this.DOM.hideGuestsWrap,\n\t\t\treadOnlyMode: false,\n\t\t\tuserId: this.userId,\n\t\t\ttype: this.type,\n\t\t\townerId: this.ownerId,\n\t\t\tzIndex: this.zIndex + 10,\n\t\t\tplannerFeatureEnabled: this.plannerFeatureEnabled,\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat\n\t\t});\n\n\t\tthis.userPlannerSelector.subscribe('onDateChange', this.handlePlannerSelectorChanges.bind(this));\n\t\tthis.userPlannerSelector.subscribe('onNotifyChange', this.checkForChangesDebounce);\n\t\tthis.userPlannerSelector.subscribe('onUserCodesChange', this.checkForChangesDebounce);\n\n\t\treturn this.DOM.userPlannerSelectorOuterWrap;\n\t}\n\n\tgetLocationControl()\n\t{\n\t\tthis.DOM.locationWrap = Tag.render`<div class=\"calendar-field-place\"></div>`;\n\t\tthis.DOM.locationOuterWrap = Tag.render`<div class=\"calendar-field-block\">\n\t\t\t<div class=\"calendar-field-title calendar-field-title-align-top\">${Loc.getMessage('EC_LOCATION_LABEL')}:</div>\n\t\t\t${this.DOM.locationWrap}\n\t\t</div>`;\n\n\t\tthis.locationSelector = new Location(\n\t\t\t{\n\t\t\t\twrap: this.DOM.locationWrap,\n\t\t\t\trichLocationEnabled: this.locationFeatureEnabled,\n\t\t\t\tlocationList: this.locationList || [],\n\t\t\t\troomsManager: this.roomsManager || null,\n\t\t\t\tlocationAccess: this.locationAccess || false,\n\t\t\t\tiblockMeetingRoomList: this.iblockMeetingRoomList || [],\n\t\t\t\tinlineEditModeEnabled: !this.isLocationCalendar,\n\t\t\t\tonChangeCallback: () => {\n\t\t\t\t\tif (this.userPlannerSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.userPlannerSelector.setLocationValue(this.locationSelector.getTextValue());\n\t\t\t\t\t\tif (this.locationSelector.getValue().type !== undefined\n\t\t\t\t\t\t\t&& !this.userPlannerSelector.isPlannerDisplayed())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t\t\t\t}\n\t\t\t\t\tthis.checkForChangesDebounce();\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\n\t\tif (this.userPlannerSelector)\n\t\t{\n\t\t\tthis.userPlannerSelector.subscribe('onDisplayAttendees', this.checkLocationForm.bind(this));\n\t\t}\n\n\t\treturn this.DOM.locationOuterWrap;\n\t}\n\n\tcreateRemindersControl()\n\t{\n\t\tthis.reminderValues = [];\n\t\tthis.DOM.remindersWrap = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.remindersControl = new Reminder({\n\t\t\twrap: this.DOM.remindersWrap,\n\t\t\tzIndex: this.zIndex\n\t\t});\n\n\t\tthis.remindersControl.subscribe('onChange', (event) => {\n\t\t\tif (event instanceof BaseEvent)\n\t\t\t{\n\t\t\t\tthis.reminderValues = event.getData().values;\n\t\t\t\tif (!this.isNewEntry()\n\t\t\t\t\t&& (this.canDo('edit')\n\t\t\t\t\t\t|| this.entry.getCurrentStatus() !== false))\n\t\t\t\t{\n\t\t\t\t\tthis.BX.ajax.runAction('calendar.api.calendarajax.updateReminders', {\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tentryId: this.entry.id,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\treminders: this.reminderValues\n\t\t\t\t\t\t}\n\t\t\t\t\t}).then((response) => {\n\t\t\t\t\t\tthis.entry.data.REMIND = response.data.REMIND;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this.DOM.remindersWrap;\n\t}\n\n\tgetTypeInfoControl()\n\t{\n\t\tthis.DOM.typeInfoTitle = Tag.render`<div class=\"calendar-field-title\"></div>`;\n\t\tthis.DOM.typeInfoLink = Tag.render`<div class=\"calendar-field-link\"></div>`;\n\n\t\tthis.DOM.typeInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t${this.DOM.typeInfoTitle}\n\t\t\t\t${this.DOM.typeInfoLink}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.DOM.typeInfoWrap;\n\t}\n\n\tgetRRuleInfoControl()\n\t{\n\t\tthis.DOM.rruleInfo = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.DOM.rruleInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_REPEAT')}:</div>\n\t\t\t\t${this.DOM.rruleInfo}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.DOM.rruleInfoWrap;\n\t}\n\n\tgetTimezoneInfoControl()\n\t{\n\t\tthis.DOM.timezoneInfo = Tag.render`<div class=\"calendar-text\"></div>`;\n\t\tthis.DOM.timezoneInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-field-block\" style=\"display: none\">\n\t\t\t\t<div class=\"calendar-field-title\">${Loc.getMessage('EC_TIMEZONE')}:</div>\n\t\t\t\t${this.DOM.timezoneInfo}\n\t\t\t</div>\n\t\t`;\n\t\treturn this.DOM.timezoneInfoWrap;\n\t}\n\n\tisNewEntry()\n\t{\n\t\treturn !this.entry.id;\n\t}\n\n\tcanDo(action)\n\t{\n\t\tconst section = this.getCurrentSection();\n\n\t\tif (action === 'edit' || action === 'delete')\n\t\t{\n\t\t\tif ((this.entry.isMeeting() && this.entry.id !== this.entry.parentId))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.entry.isResourcebooking())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn section.canDo('edit');\n\t\t}\n\n\t\tif (action === 'view')\n\t\t{\n\t\t\treturn section.canDo('view_time');\n\t\t}\n\n\t\tif (action === 'viewFull')\n\t\t{\n\t\t\treturn section.canDo('view_full');\n\t\t}\n\n\t\tif(action === 'release')\n\t\t{\n\t\t\treturn section.canDo('access');\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetFormValues()\n\t{\n\t\tconst entry = this.entry;\n\t\tconst section = this.getCurrentSection();\n\t\tconst readOnly = !this.canDo('edit');\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: Util.adjustDateForTimezoneOffset(entry.from, entry.userTimezoneOffsetFrom, entry.fullDay),\n\t\t\tto: Util.adjustDateForTimezoneOffset(entry.to, entry.userTimezoneOffsetTo, entry.fullDay),\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName,\n\t\t});\n\t\tthis.dateTimeControl.setInlineEditMode(this.isNewEntry() ? 'edit' : 'view');\n\t\tthis.dateTimeControl.setViewMode(readOnly);\n\n\t\t// Title\n\t\tthis.DOM.titleInput.value = entry.getName();\n\n\t\tif (readOnly)\n\t\t{\n\t\t\tif (this.entry.getCurrentStatus() === false)\n\t\t\t{\n\t\t\t\tthis.DOM.titleInput.type = 'hidden'; // Hide input\n\t\t\t\t// Add label instead\n\t\t\t\tthis.DOM.titleLabel = this.DOM.titleInput.parentNode.insertBefore(Tag.render`<span class=\"calendar-field calendar-field-string\">${Text.encode(entry.getName())}</span>`, this.DOM.titleInput);\n\t\t\t\tDom.addClass(this.DOM.titleOuterWrap, 'calendar-field-container-view');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.titleInput.disabled = true;\n\t\t\t}\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || section.color, false);\n\t\tthis.colorSelector.setViewMode(readOnly && this.entry.getCurrentStatus() === false);\n\n\t\t// Section\n\t\tthis.sectionValue = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\t\tif (this.isSyncSection(section) && entry.id)\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(true);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.sectionSelector.setViewMode(readOnly);\n\t\t}\n\n\t\t// Reminders\n\t\tthis.remindersControl.setValue(entry.getReminders(), false);\n\t\tthis.remindersControl.setViewMode(readOnly && this.entry.getCurrentStatus() === false);\n\t\tif (readOnly && this.entry.getCurrentStatus() === false)\n\t\t{\n\t\t\tthis.DOM.remindersOuterWrap.style.display = 'none';\n\t\t}\n\n\t\t// Recurcion\n\t\tif (entry.isRecursive())\n\t\t{\n\t\t\tthis.DOM.rruleInfoWrap.style = '';\n\t\t\tDom.adjust(this.DOM.rruleInfo, {text: entry.getRRuleDescription()});\n\t\t}\n\n\t\t// Location\n\t\tlet location = entry.getLocation();\n\t\tif (readOnly && !location)\n\t\t{\n\t\t\tthis.DOM.locationOuterWrap.style.display = 'none';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.locationSelector.setViewMode(readOnly);\n\t\t\tif (this.isLocationCalendar)\n\t\t\t{\n\t\t\t\tthis.locationSelector.setValue(this.locationSelector.default);\n\t\t\t\tlocation = this.locationSelector.default;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.locationOuterWrap.style.display = '';\n\t\t\t\tthis.locationSelector.setValue(entry.getLocation());\n\t\t\t}\n\t\t}\n\t\tif (this.locationSelector)\n\t\t{\n\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t{\n\t\t\t\t\tfrom: this.dateTimeControl.getValue().from,\n\t\t\t\t\tto: this.dateTimeControl.getValue().to,\n\t\t\t\t\tfullDay: this.dateTimeControl.getValue().fullDay,\n\t\t\t\t\tcurrentEventId: this.entry.id\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\t//User Planner Selector\n\t\tif (\n\t\t\tthis.userPlannerSelector\n\t\t\t&& (this.canDo('viewFull') || entry.getCurrentStatus() !== false)\n\t\t)\n\t\t{\n\t\t\tthis.userPlannerSelector.setValue({\n\t\t\t\tattendeesEntityList: entry.getAttendeesEntityList(),\n\t\t\t\tlocation: location,\n\t\t\t\tattendees: entry.getAttendees(),\n\t\t\t\tnotify: !entry.isMeeting() || entry.getMeetingNotify(),\n\t\t\t\tviewMode: this.getMode() === CompactEventForm.VIEW_MODE,\n\t\t\t\tentry: entry,\n\t\t\t\thideGuests: entry.getHideGuests()\n\t\t\t});\n\t\t\tthis.userPlannerSelector.setDateTime(this.dateTimeControl.getValue());\n\t\t\tthis.userPlannerSelector.setViewMode(readOnly);\n\t\t\tif (this.isLocationCalendar)\n\t\t\t{\n\t\t\t\tthis.userPlannerSelector.showPlanner();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.remove(this.DOM.userPlannerSelectorOuterWrap);\n\t\t}\n\n\t\tlet hideInfoContainer = true;\n\t\tthis.DOM.infoContainer = this.DOM.wrap.querySelector('.calendar-field-container-info');\n\t\tfor(let i = 0; i <= this.DOM.infoContainer.childNodes.length; i++)\n\t\t{\n\t\t\tif (\n\t\t\t\tType.isElementNode(this.DOM.infoContainer.childNodes[i])\n\t\t\t\t&& this.DOM.infoContainer.childNodes[i].style.display !== 'none'\n\t\t\t)\n\t\t\t{\n\t\t\t\thideInfoContainer = false;\n\t\t\t}\n\t\t}\n\t\tif (hideInfoContainer)\n\t\t{\n\t\t\tthis.DOM.infoContainer.style.display = 'none';\n\t\t}\n\t}\n\n\tsetFormValuesLocation()\n\t{\n\t\tlet\n\t\t\tentry = this.entry,\n\t\t\tsection = this.getCurrentSection(),\n\t\t\treadOnly = true;\n\n\t\t// Date time\n\t\tthis.dateTimeControl.setValue({\n\t\t\tfrom: Util.adjustDateForTimezoneOffset(entry.from, entry.userTimezoneOffsetFrom, entry.fullDay),\n\t\t\tto: Util.adjustDateForTimezoneOffset(entry.to, entry.userTimezoneOffsetTo, entry.fullDay),\n\t\t\tfullDay: entry.fullDay,\n\t\t\ttimezoneFrom: entry.getTimezoneFrom() || '',\n\t\t\ttimezoneTo: entry.getTimezoneTo() || '',\n\t\t\ttimezoneName: this.userSettings.timezoneName,\n\t\t});\n\t\tthis.dateTimeControl.setInlineEditMode(this.isNewEntry() ? 'edit' : 'view');\n\t\tthis.dateTimeControl.setViewMode(readOnly);\n\n\t\t// Title\n\t\tif (this.entry.id !== this.entry.parentId)\n\t\t{\n\t\t\tthis.DOM.titleInput.value = section.name\n\t\t\t\t+ ': ' + BX.util.htmlspecialchars(entry.getName());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.titleInput.value = Loc.getMessage('CALENDAR_UPDATE');\n\t\t}\n\n\t\t// Color\n\t\tthis.colorSelector.setValue(entry.getColor() || section.color, false);\n\t\tthis.colorSelector.setViewMode(!readOnly);\n\n\t\t// Section\n\t\tthis.sectionValue = this.getCurrentSectionId();\n\t\tthis.sectionSelector.updateValue();\n\t\tthis.sectionSelector.setViewMode(readOnly);\n\t}\n\n\tsave(options = {}): boolean\n\t{\n\t\tif (this.state === this.STATE.REQUEST)\n\t\t\treturn false;\n\n\t\tconst entry = this.getCurrentEntry();\n\t\toptions = Type.isPlainObject(options) ? options : {};\n\n\t\tif (this.isNewEntry()\n\t\t\t&& this.userPlannerSelector.hasExternalEmailUsers()\n\t\t\t&& Util.checkEmailLimitationPopup()\n\t\t\t&& !options.emailLimitationDialogShown)\n\t\t{\n\t\t\tEntryManager.showEmailLimitationDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.emailLimitationDialogShown = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.userSettings.sendFromEmail\n\t\t\t&& this.userPlannerSelector.hasExternalEmailUsers())\n\t\t{\n\t\t\tEntryManager.showConfirmedEmailDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.isNewEntry()\n\t\t\t&& entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t\t&& this.getFormDataChanges(['section', 'notify']).length > 0)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.recursionMode = (entry.isFirstInstance() && params.recursionMode === 'next')\n\t\t\t\t\t\t? 'all'\n\t\t\t\t\t\t: params.recursionMode;\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.isNewEntry()\n\t\t\t&& entry.isMeeting()\n\t\t\t&& options.sendInvitesAgain === undefined\n\t\t\t&& this.getFormDataChanges().includes('date&time')\n\t\t\t&& entry.getAttendees().find((item) => {return item.STATUS === 'N';})\n\t\t)\n\t\t{\n\t\t\tEntryManager.showReInviteUsersDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.sendInvitesAgain = params.sendInvitesAgain;\n\t\t\t\t\tthis.save(options);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tconst data = {\n\t\t\tid: entry.id,\n\t\t\tsection: this.sectionValue,\n\t\t\tname: this.DOM.titleInput.value,\n\t\t\tdesc: entry.getDescription(),\n\t\t\treminder: this.remindersControl.getSelectedValues(),\n\t\t\tdate_from: dateTime.fromDate,\n\t\t\tdate_to: dateTime.toDate,\n\t\t\tskip_time: dateTime.fullDay ? 'Y' : 'N',\n\t\t\ttime_from: Util.formatTime(Util.adjustDateForTimezoneOffset(dateTime.from, -entry.userTimezoneOffsetFrom, dateTime.fullDay)),\n\t\t\ttime_to: Util.formatTime(Util.adjustDateForTimezoneOffset(dateTime.to, -entry.userTimezoneOffsetTo, dateTime.fullDay)),\n\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\ttz_from: entry.getTimezoneFrom(),\n\t\t\ttz_to: entry.getTimezoneTo(),\n\t\t\tmeeting_notify: this.userPlannerSelector.getInformValue() ? 'Y' : 'N',\n\t\t\tmeeting_host: entry.data.MEETING_HOST || '0',\n\t\t\tchat_id: entry.data.MEETING\n\t\t\t\t? entry.data.MEETING.CHAT_ID\n\t\t\t\t: 0,\n\t\t\texclude_users: this.excludeUsers || [],\n\t\t\tattendeesEntityList: this.userPlannerSelector.getEntityList(),\n\t\t\tsendInvitesAgain: options.sendInvitesAgain ? 'Y' : 'N',\n\t\t\thide_guests: this.userPlannerSelector.hideGuests ? 'Y' : 'N',\n\t\t\trequestUid: BX.Calendar.Util.registerRequestId(),\n\t\t\tprivate_event: entry.isPrivate() ? 'Y' : 'N'\n\t\t};\n\n\t\tlet checkCurrentUsersAccessibility = !entry.id || this.checkCurrentUsersAccessibility();\n\t\tif (!checkCurrentUsersAccessibility\n\t\t\t&& this.getFormDataChanges().includes('codes'))\n\t\t{\n\t\t\tconst previousAttendeesList = entry.getAttendeesEntityList();\n\t\t\tconst newAttendeesList = [];\n\t\t\tdata.attendeesEntityList.forEach(entity => {\n\t\t\t\tif (!previousAttendeesList.find((item) => {\n\t\t\t\t\treturn entity.entityId === item.entityId\n\t\t\t\t\t\t&& parseInt(entity.id) === parseInt(item.id);\n\t\t\t\t}))\n\t\t\t\t{\n\t\t\t\t\tif (entity.entityId === 'user')\n\t\t\t\t\t{\n\t\t\t\t\t\tnewAttendeesList.push(entity.id);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcheckCurrentUsersAccessibility = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdata.newAttendeesList = newAttendeesList;\n\t\t}\n\t\tdata.checkCurrentUsersAccessibility = checkCurrentUsersAccessibility ? 'Y' : 'N';\n\n\t\tif (entry.id && entry.isRecursive())\n\t\t{\n\t\t\tdata.EVENT_RRULE = entry.data.RRULE;\n\t\t}\n\n\t\tif (options.recursionMode)\n\t\t{\n\t\t\tdata.rec_edit_mode = options.recursionMode;\n\t\t\tdata.current_date_from = Util.formatDate(entry.from);\n\t\t}\n\n\t\tif (this.getCurrentSection().color.toLowerCase() !== this.colorSelector.getValue().toLowerCase())\n\t\t{\n\t\t\tdata.color = this.colorSelector.getValue();\n\t\t}\n\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.freezePopup();\n\t\tthis.BX.ajax.runAction('calendar.api.calendarentryajax.editEntry', {\n\t\t\t\tdata: data,\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcalendarAction: this.isNewEntry() ? 'create_event' : 'edit_event',\n\t\t\t\t\tformType: 'compact',\n\t\t\t\t\temailGuests: this.userPlannerSelector.hasExternalEmailUsers() ? 'Y' : 'N',\n\t\t\t\t\tmarkView: Util.getCurrentView() || 'outside',\n\t\t\t\t\tmarkCrm: 'N',\n\t\t\t\t\tmarkRrule: 'NONE',\n\t\t\t\t\tmarkMeeting: this.entry.isMeeting() ? 'Y' : 'N',\n\t\t\t\t\tmarkType: this.type\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\t\tif (this.isLocationCalendar && this.roomsManager)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.roomsManager.unsetHiddenRoom(Location.parseStringValue(data.location).room_id);\n\t\t\t\t\t}\n\n\t\t\t\t\t// unset section from hidden\n\t\t\t\t\tconst section = this.getCurrentSection();\n\t\t\t\t\tif (section && !section.isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tsection.show();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.unfreezePopup();\n\t\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\t\tif (response.data.entryId)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (entry.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEntryManager.showEditEntryNotification(response.data.entryId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEntryManager.showNewEntryNotification(response.data.entryId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.emit('onSave', new BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tresponseData: response.data,\n\t\t\t\t\t\t\toptions: options\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t\tthis.close();\n\n\t\t\t\t\tif (response.data.countEventWithEmailGuestAmount)\n\t\t\t\t\t{\n\t\t\t\t\t\tUtil.setEventWithEmailGuestAmount(response.data.countEventWithEmailGuestAmount);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Type.isArray(response.data.eventList)\n\t\t\t\t\t\t&& response.data.eventList.length\n\t\t\t\t\t\t&& response.data.eventList[0].REMIND\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tEntryManager.setNewEntryReminders(\n\t\t\t\t\t\t\tdateTime.fullDay ? 'fullDay' : 'withTime',\n\t\t\t\t\t\t\tresponse.data.eventList[0].REMIND\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.unfreezePopup();\n\t\t\t\t\tif (response.data && Type.isPlainObject(response.data.busyUsersList))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.handleBusyUsersError(response.data.busyUsersList);\n\n\t\t\t\t\t\tlet errors = [];\n\t\t\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\t\t\tif (error.code !== \"edit_entry_user_busy\")\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tresponse.errors = errors;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (response.errors && response.errors.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showError(response.errors);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t\t}\n\t\t\t);\n\n\t\treturn true;\n\t}\n\n\thandleBusyUsersError(busyUsers)\n\t{\n\t\tlet\n\t\t\tusers = [],\n\t\t\tuserIds = [];\n\n\t\tfor (let id in busyUsers)\n\t\t{\n\t\t\tif (busyUsers.hasOwnProperty(id))\n\t\t\t{\n\t\t\t\tusers.push(busyUsers[id]);\n\t\t\t\tuserIds.push(id);\n\t\t\t}\n\t\t}\n\n\t\tthis.busyUsersDialog = new BusyUsersDialog();\n\t\tthis.busyUsersDialog.subscribe('onSaveWithout', () => {\n\t\t\tthis.excludeUsers = userIds.join(',');\n\t\t\tthis.save();\n\t\t});\n\n\t\tthis.busyUsersDialog.show({users: users});\n\t}\n\n\thandleKeyPress(e)\n\t{\n\t\tif (\n\t\t\tthis.getMode() === CompactEventForm.EDIT_MODE\n\t\t\t&& e.keyCode === Util.getKeyCode('enter')\n\t\t\t&& (e.ctrlKey || e.metaKey) && !e.altKey\n\t\t)\n\t\t{\n\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\tthis.save();\n\t\t}\n\t\telse if (\n\t\t\tthis.checkTopSlider()\n\t\t\t&& e.keyCode === Util.getKeyCode('escape')\n\t\t\t&& this.couldBeClosedByEsc()\n\t\t)\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse if (\n\t\t\te.keyCode === Util.getKeyCode('delete')\n\t\t\t&& !this.isNewEntry()\n\t\t\t&& this.canDo('delete')\n\t\t)\n\t\t{\n\t\t\tconst target = event.target || event.srcElement;\n\t\t\tconst tagName = Type.isElementNode(target) ? target.tagName.toLowerCase() : null;\n\t\t\tif (tagName && !['input', 'textarea'].includes(tagName))\n\t\t\t{\n\t\t\t\tEventEmitter.subscribeOnce('BX.Calendar.Entry:beforeDelete', () => {\n\t\t\t\t\tthis.checkDataBeforeCloseMode = false;\n\t\t\t\t\tthis.close();\n\t\t\t\t});\n\t\t\t\tEntryManager.deleteEntry(this.entry);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetCurrentEntry()\n\t{\n\t\treturn this.entry;\n\t}\n\n\tgetCurrentSection()\n\t{\n\t\tlet section = false;\n\t\tconst sectionId = this.getCurrentSectionId();\n\n\t\tif (\n\t\t\tsectionId\n\t\t\t&& this.sectionIndex[sectionId] !== undefined\n\t\t\t&& this.sections[this.sectionIndex[sectionId]] !== undefined)\n\t\t{\n\t\t\tsection = this.sections[this.sectionIndex[sectionId]];\n\t\t}\n\t\treturn section;\n\t}\n\n\tgetCurrentSectionId()\n\t{\n\t\tlet sectionId = 0;\n\t\tif (this.sectionValue)\n\t\t{\n\t\t\tsectionId = this.sectionValue;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst entry = this.getCurrentEntry();\n\t\t\tif (entry instanceof Entry)\n\t\t\t{\n\t\t\t\tsectionId = parseInt(entry.sectionId);\n\t\t\t}\n\n\t\t\t// TODO: refactor - don't take first section\n\t\t\tif (!sectionId && this.sections[0])\n\t\t\t{\n\t\t\t\tsectionId = parseInt(this.sections[0].id);\n\t\t\t}\n\t\t}\n\t\treturn sectionId;\n\t}\n\n\thandlePlannerSelectorChanges(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst dateTimeValue = this.dateTimeControl.getValue();\n\t\t\tdateTimeValue.from = event.getData().dateFrom;\n\t\t\tdateTimeValue.to = event.getData().dateTo;\n\t\t\t// Date time\n\t\t\tthis.dateTimeControl.setValue(dateTimeValue);\n\t\t\tthis.userPlannerSelector.setDateTime(this.dateTimeControl.getValue());\n\n\t\t\tif (this.locationSelector)\n\t\t\t{\n\t\t\t\tthis.locationSelector.checkLocationAccessibility(\n\t\t\t\t\t{\n\t\t\t\t\t\tfrom: event.getData().dateFrom,\n\t\t\t\t\t\tto: event.getData().dateTo,\n\t\t\t\t\t\tfullDay: event.getData().fullDay,\n\t\t\t\t\t\tcurrentEventId: this.entry.id\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t}\n\t\t\tthis.checkForChangesDebounce();\n\t\t}\n\t}\n\n\teditEntryInSlider()\n\t{\n\t\tthis.checkDataBeforeCloseMode = false;\n\t\tconst dateTime = this.dateTimeControl.getValue();\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tBX.Calendar.EntryManager.openEditSlider({\n\t\t\tcalendarContext: calendarContext,\n\t\t\tentry: this.entry,\n\t\t\ttype: this.type,\n\t\t\tisLocationCalendar: this.isLocationCalendar,\n\t\t\tlocationAccess: this.locationAccess,\n\t\t\tdayOfWeekMonthFormat: this.dayOfWeekMonthFormat,\n\t\t\troomsManager: this.roomsManager,\n\t\t\tlocationCapacity: Location.getCurrentCapacity(), // for location component\n\t\t\townerId: this.ownerId,\n\t\t\tuserId: this.userId,\n\t\t\tformDataValue: {\n\t\t\t\tsection: this.sectionValue,\n\t\t\t\tname: this.DOM.titleInput.value,\n\t\t\t\treminder: this.remindersControl.getSelectedRawValues(),\n\t\t\t\tcolor: this.colorSelector.getValue(),\n\t\t\t\tfrom: Util.adjustDateForTimezoneOffset(dateTime.from, -this.entry.userTimezoneOffsetFrom, dateTime.fullDay),\n\t\t\t\tto: Util.adjustDateForTimezoneOffset(dateTime.to, -this.entry.userTimezoneOffsetTo, dateTime.fullDay),\n\t\t\t\tfullDay: dateTime.fullDay,\n\t\t\t\tlocation: this.locationSelector.getTextValue(),\n\t\t\t\tmeetingNotify: this.userPlannerSelector.getInformValue() ? 'Y' : 'N',\n\t\t\t\thideGuests: this.userPlannerSelector.hideGuests ? 'Y' : 'N',\n\t\t\t\tattendeesEntityList: this.userPlannerSelector.getEntityList()\n\t\t\t}\n\t\t});\n\t\tthis.close();\n\t}\n\n\toutsideMouseDownClose(event)\n\t{\n\t\tif (this.checkTopSlider())\n\t\t{\n\t\t\tlet target = event.target || event.srcElement;\n\t\t\tthis.outsideMouseDown = !target.closest('div.popup-window');\n\t\t}\n\t}\n\n\tcheckTopSlider()\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n\n\tcheckOutsideClickClose(event)\n\t{\n\t\tlet target = event.target || event.srcElement;\n\t\tthis.outsideMouseUp = !target.closest('div.popup-window');\n\t\tif (this.couldBeClosedByEsc()\n\t\t\t&& this.outsideMouseDown\n\t\t\t&& this.outsideMouseUp\n\t\t\t&& (this.getMode() === CompactEventForm.VIEW_MODE\n\t\t\t\t|| !this.formDataChanged()\n\t\t\t\t|| this.isNewEntry())\n\t\t)\n\t\t{\n\t\t\tsetTimeout(this.close.bind(this), 0);\n\t\t}\n\t}\n\n\tcouldBeClosedByEsc()\n\t{\n\t\treturn !PopupManager._popups.find((popup)=>{return popup && popup.getId() !== this.popupId && popup.isShown();});\n\t}\n\n\temitOnChange()\n\t{\n\t\tthis.emit('onChange', new BaseEvent({\n\t\t\tdata: {\n\t\t\t\tform: this,\n\t\t\t\tentry: this.entry\n\t\t\t}\n\t\t}));\n\t}\n\n\tshowError(errorList)\n\t{\n\t\tlet errorText = '';\n\n\t\tif (Type.isArray(errorList))\n\t\t{\n\t\t\terrorList.forEach((error) => {\n\t\t\t\terrorText += error.message + \"\\n\";\n\t\t\t});\n\t\t}\n\n\t\tif (errorText !== '')\n\t\t{\n\t\t\talert(errorText);\n\t\t}\n\t}\n\n\treloadEntryData()\n\t{\n\t\tif (this.isShown()\n\t\t\t&& !this.isNewEntry()\n\t\t\t&& this.getMode() === CompactEventForm.VIEW_MODE)\n\t\t{\n\t\t\tconst calendar = Util.getCalendarContext();\n\t\t\tif (calendar)\n\t\t\t{\n\t\t\t\tconst entry = EntryManager.getEntryInstance(\n\t\t\t\t\tcalendar.getView().getEntryById(this.entry.getUniqueId())\n\t\t\t\t);\n\n\t\t\t\tif (entry && entry.getUniqueId())\n\t\t\t\t{\n\t\t\t\t\tthis.entry = entry;\n\t\t\t\t\tthis.setFormValues();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tcheckCurrentUsersAccessibility()\n\t{\n\t\treturn this.getFormDataChanges().includes('date&time');\n\t}\n\n\thandlePull(params)\n\t{\n\t\tif (this.userPlannerSelector\n\t\t\t&& this.userPlannerSelector?.planner?.isShown())\n\t\t{\n\t\t\tconst userIdList = Type.isArray(params?.fields?.ATTENDEES) ? params.fields.ATTENDEES: [];\n\t\t\tconst eventOwner = params?.fields?.CAL_TYPE === 'user'\n\t\t\t\t? parseInt(params?.fields?.OWNER_ID)\n\t\t\t\t: parseInt(params?.fields?.CREATED_BY);\n\t\t\tif (!userIdList.includes(eventOwner))\n\t\t\t{\n\t\t\t\tuserIdList.push(eventOwner);\n\t\t\t}\n\t\t\tthis.userPlannerSelector.clearAccessibilityData(userIdList);\n\n\t\t\tthis.userPlannerSelector.refreshPlannerStateDebounce();\n\t\t}\n\n\t\tconst entry = this.getCurrentEntry();\n\t\tif (\n\t\t\t!this.isNewEntry()\n\t\t\t&& entry\n\t\t\t&& entry.parentId === parseInt(params?.fields?.PARENT_ID)\n\t\t)\n\t\t{\n\t\t\tif (params.command === 'delete_event'\n\t\t\t\t&& entry.getType() === params?.fields?.CAL_TYPE)\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst onEntryListReloadHandler = () => {\n\t\t\t\t\tthis.reloadEntryDataDebounce();\n\t\t\t\t\tBX.Event.EventEmitter.unsubscribe('BX.Calendar:onEntryListReload', onEntryListReloadHandler);\n\t\t\t\t};\n\t\t\t\tBX.Event.EventEmitter.subscribe('BX.Calendar:onEntryListReload', onEntryListReloadHandler);\n\t\t\t}\n\t\t}\n\t}\n\n\tisSyncSection(section)\n\t{\n\t\treturn section.isGoogle()\n\t\t\t|| section.isIcloud()\n\t\t\t|| section.isOffice365()\n\t\t\t|| section.isCalDav()\n\t\t\t|| section.hasConnection()\n\t\t;\n\t}\n\n\tgetSectionsForEditEvent(sections, currentSection)\n\t{\n\t\tconst result = [];\n\t\tconst currentType = currentSection.type;\n\t\tresult.push(currentSection);\n\n\t\tsections.forEach((section) => {\n\t\t\tif (!this.isSyncSection(section) && section.type === currentType)\n\t\t\t{\n\t\t\t\tresult.push(section);\n\t\t\t}\n\t\t});\n\n\t\tthis.sections = result;\n\t\tthis.sectionIndex = [];\n\t\tif (Type.isArray(this.sections))\n\t\t{\n\t\t\tthis.sections.forEach((value, ind) => {\n\t\t\t\tconst id = parseInt(value.ID || value.id);\n\t\t\t\tif (id > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.sectionIndex[id] = ind;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t}\n\t}\n\n\treleaseLocation(options = {})\n\t{\n\t\tconst entry = this.getCurrentEntry();\n\n\t\tif (entry.id && entry.isRecursive()\n\t\t\t&& !options.confirmed\n\t\t)\n\t\t{\n\t\t\tEntryManager.showConfirmEditDialog({\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\toptions.confirmed = true;\n\t\t\t\t\tthis.releaseLocation({\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tconfirmed: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tif(!options.recursionMode)\n\t\t{\n\t\t\toptions.recursionMode = '';\n\t\t}\n\n\t\tthis.state = this.STATE.REQUEST;\n\n\t\tthis.freezePopup();\n\n\t\tthis.BX.ajax.runAction('calendar.api.locationajax.cancelBooking', {\n\t\t\tdata:{\n\t\t\t\tparent_event_id: entry.parentId,\n\t\t\t\trecursion_mode: options.recursionMode,\n\t\t\t\tsection_id: entry.sectionId,\n\t\t\t\tcurrent_event_date_from: entry.data.DATE_FROM,\n\t\t\t\tcurrent_event_date_to: entry.data.DATE_TO,\n\t\t\t\towner_id: entry.data.CREATED_BY,\n\t\t\t}\n\t\t})\n\t\t.then((response) => {\n\t\t\t\tthis.unfreezePopup();\n\t\t\t\tthis.state = this.STATE.READY;\n\t\t\t\tEntryManager.showReleaseLocationNotification();\n\t\t\t\tthis.calendarContext.reloadDebounce();\n\t\t\t\tthis.close();\n\t\t\t},\n\t\t\t(response) => {\n\t\t\t\tthis.unfreezePopup();\n\t\t\t\tthis.state = this.STATE.ERROR;\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn true;\n\t}\n}"],"names":["CompactEventForm","EventEmitter","constructor","options","STATE","READY","REQUEST","ERROR","zIndex","Z_INDEX_OFFSET","userSettings","DOM","displayed","sections","sectionIndex","trackingUsersList","checkDataBeforeCloseMode","CHECK_CHANGES_DELAY","RELOAD_DATA_DELAY","setEventNamespace","userId","Util","getCurrentUserId","type","isLocationCalendar","calendarContext","ownerId","BX","getBX","checkForChangesDebounce","Runtime","debounce","checkForChanges","reloadEntryDataDebounce","reloadEntryData","checkOutsideClickClose","bind","outsideMouseDownClose","keyHandler","handleKeyPress","show","mode","EDIT_MODE","params","setParams","setMode","state","popupId","Math","round","random","popup","destroy","getPopup","Dom","addClass","titleBar","removeClass","popupContainer","closeIcon","Event","document","getMode","EntryManager","doDelayedActions","prepareData","then","checkLocationView","setFormValuesLocation","setFormValues","canDo","titleInput","focus","select","VIEW_MODE","sendAnalyticLabel","calendarAction","formType","getButtons","button","userPlannerSelector","isPlannerDisplayed","checkBusyTime","Popup","bindNode","closeByEsc","offsetTop","offsetLeft","draggable","resizable","lightShadow","className","cacheable","content","getPopupContentLocation","getPopupContentCalendar","buttons","events","onPopupClose","close","isShown","formDataChanged","confirm","Loc","getMessage","destroyed","setTimeout","emit","unbind","Location","setCurrentCapacity","clearPlannerWatches","closeAllPopups","wrap","Tag","render","titleOuterWrap","getTitleControl","getColorControl","getSectionControl","getDateTimeControl","getUserPlannerSelector","getTypeInfoControl","getLocationControl","remindersOuterWrap","createRemindersControl","getRRuleInfoControl","getTitleControlLocation","getColorControlsLocationView","entry","id","parentId","appendChild","getHostControl","saveBtn","UI","Button","name","text","isNewEntry","click","save","setAttribute","push","closeBtn","setButtons","fullFormBtn","editEntryInSlider","isMeeting","getCurrentStatus","acceptBtn","setMeetingStatus","refreshMeetingStatus","declineBtn","Calendar","openViewSlider","from","timezoneOffset","data","TZ_OFFSET_FROM","releaseLocation","openBtn","subscribeOnce","deleteEntry","wasEverRecursive","length","freezePopup","forEach","setClocking","setDisabled","unfreezePopup","displayAttendees","getAttendees","hideLoader","Type","isDomNode","loader","remove","showInEditMode","showInViewMode","emitOnChange","checkLocationForm","event","BaseEvent","getData","usersCount","locationCapacity","getCurrentCapacity","locationSelector","value","undefined","addCapacityAlert","removeCapacityAlert","getFormDataChanges","excludes","fields","includes","getTextLocation","parseStringValue","getLocation","getTextValue","dateTime","dateTimeControl","getValue","isFullDay","fullDay","toString","to","getMeetingNotify","getInformValue","parseInt","sectionId","sectionValue","getEntityList","map","item","entityId","join","getAttendeesEntityList","locationAccess","dayOfWeekMonthFormat","getEntryInstance","userIndex","isPlainObject","entryTime","isDate","setDateTimeValue","locationFeatureEnabled","locationList","isArray","filter","locationItem","PERM","view_full","roomsManager","iblockMeetingRoomList","plannerFeatureEnabled","setSections","trackingUserList","ind","ID","section","getCurrentSection","getSectionsForEditEvent","Promise","resolve","ajax","runAction","entryId","loadSectionId","response","window","BXEventCalendar","Section","getCalendarContext","CREATED_BY","userUrl","USER_URL","replace","userAvatar","AVATAR","hostBar","util","htmlspecialchars","colorSelect","colorSelector","ColorSelector","subscribe","color","COLOR","sectionSelectWrap","sectionSelector","SectionSelector","outerWrap","defaultCalendarType","defaultOwnerId","sectionList","sectionGroupList","SectionManager","getSectionGroupList","selectCallback","setValue","saveDefaultSectionId","dateTimeWrap","DateTimeControl","showTimezone","inlineEditMode","remindersControl","setFullDayMode","wasChangedByUser","defaultReminders","getNewEntryReminders","showPlanner","setLocationValue","setDateTime","refreshPlannerStateDebounce","checkLocationAccessibility","currentEventId","userPlannerSelectorOuterWrap","userSelectorWrap","informWrap","plannerOuterWrap","hideGuestsWrap","UserPlannerSelector","readOnlyMode","handlePlannerSelectorChanges","locationWrap","locationOuterWrap","richLocationEnabled","inlineEditModeEnabled","onChangeCallback","reminderValues","remindersWrap","Reminder","values","reminders","REMIND","typeInfoTitle","typeInfoLink","typeInfoWrap","rruleInfo","rruleInfoWrap","getTimezoneInfoControl","timezoneInfo","timezoneInfoWrap","action","isResourcebooking","readOnly","adjustDateForTimezoneOffset","userTimezoneOffsetFrom","userTimezoneOffsetTo","timezoneFrom","getTimezoneFrom","timezoneTo","getTimezoneTo","timezoneName","setInlineEditMode","setViewMode","getName","titleLabel","parentNode","insertBefore","Text","encode","disabled","getColor","getCurrentSectionId","updateValue","isSyncSection","getReminders","style","display","isRecursive","adjust","getRRuleDescription","location","default","attendeesEntityList","attendees","notify","viewMode","hideGuests","getHideGuests","hideInfoContainer","infoContainer","querySelector","i","childNodes","isElementNode","getCurrentEntry","hasExternalEmailUsers","checkEmailLimitationPopup","emailLimitationDialogShown","showEmailLimitationDialog","callback","sendFromEmail","showConfirmedEmailDialog","confirmed","showConfirmEditDialog","recursionMode","isFirstInstance","sendInvitesAgain","find","STATUS","showReInviteUsersDialog","desc","getDescription","reminder","getSelectedValues","date_from","fromDate","date_to","toDate","skip_time","time_from","formatTime","time_to","tz_from","tz_to","meeting_notify","meeting_host","MEETING_HOST","chat_id","MEETING","CHAT_ID","exclude_users","excludeUsers","hide_guests","requestUid","registerRequestId","private_event","isPrivate","checkCurrentUsersAccessibility","previousAttendeesList","newAttendeesList","entity","EVENT_RRULE","RRULE","rec_edit_mode","current_date_from","formatDate","toLowerCase","analyticsLabel","emailGuests","markView","getCurrentView","markCrm","markRrule","markMeeting","markType","unsetHiddenRoom","room_id","showEditEntryNotification","showNewEntryNotification","responseData","countEventWithEmailGuestAmount","setEventWithEmailGuestAmount","eventList","setNewEntryReminders","busyUsersList","handleBusyUsersError","errors","error","code","showError","busyUsers","users","userIds","hasOwnProperty","busyUsersDialog","BusyUsersDialog","e","keyCode","getKeyCode","ctrlKey","metaKey","altKey","checkTopSlider","couldBeClosedByEsc","target","srcElement","tagName","Entry","dateTimeValue","dateFrom","dateTo","openEditSlider","formDataValue","getSelectedRawValues","meetingNotify","outsideMouseDown","closest","SidePanel","Instance","getTopSlider","outsideMouseUp","PopupManager","_popups","getId","form","errorList","errorText","message","alert","calendar","getView","getEntryById","getUniqueId","handlePull","planner","userIdList","ATTENDEES","eventOwner","CAL_TYPE","OWNER_ID","clearAccessibilityData","PARENT_ID","command","getType","onEntryListReloadHandler","unsubscribe","isGoogle","isIcloud","isOffice365","isCalDav","hasConnection","currentSection","result","currentType","parent_event_id","recursion_mode","section_id","current_event_date_from","DATE_FROM","current_event_date_to","DATE_TO","owner_id","showReleaseLocationNotification","reloadDebounce"],"mappings":"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"}