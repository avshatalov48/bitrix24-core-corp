function LearningJSRightsAccess(e,i,t,r,s,a,n){this.id=e;this.arSelected=i;this.variable_name=t;this.table_id=r;this.href_id=s;this.sSelect=a;this.arHighLight=n;BX.ready(BX.delegate(this.Init,this))}LearningJSRightsAccess.prototype.Init=function(){BX.bind(BX(this.href_id),"click",BX.delegate(this.Add,this));var e=BX(this.variable_name+"_heading");if(e)BX.bind(e,"dblclick",BX.delegate(this.ShowInfo,this));BX.Access.Init(this.arHighLight);BX.Access.SetSelected(this.arSelected,this.variable_name)};LearningJSRightsAccess.prototype.Add=function(){BX.Access.ShowForm({callback:BX.delegate(this.InsertRights,this),bind:this.variable_name})};LearningJSRightsAccess.prototype.InsertRights=function(e){var i=BX(this.table_id);for(var t in e){for(var r in e[t]){var s=BX.Access.GetProviderName(t);var a=i.rows.length;var n=i.insertRow(a-1);n.style.marginTop="5px;";n.vAlign="top";n.insertCell(-1);n.insertCell(-1);n.cells[0].align="right";var l="";if(s.length>0){l=s+" "}l=l+BX.Text.encode(e[t][r].name);n.cells[0].innerHTML='<div style="padding-top:8px;"><span class="access-delete" style="position:relative; top:1px; margin-right:3px;"  onclick="LearningJSRightsAccess.DeleteRow(this, \''+r+"', '"+this.variable_name+"')\">&nbsp;</span>"+l+":&nbsp;"+'<input type="hidden" name="'+this.variable_name+'[][GROUP_CODE]" value="'+r+'"></div>';n.cells[1].align="left";n.cells[1].innerHTML='<div style="padding-top: 8px; min-width:720px;"><span title="'+BX.message("langApplyTitle")+'" id="overwrite_'+r+'"></span>'+this.sSelect+"</div>";var h=BX.findChildren(i,{class:this.variable_name+"_row_for_"+r},true);if(h)for(var c=0;c<h.length;c++)h[c].className+=" iblock-strike-out"}}};LearningJSRightsAccess.DeleteRow=function(e,i,t){var r=BX.findParent(e,{tag:"tr"});var s=BX.findParent(r,{tag:"table"});var a=BX.findChildren(s,{class:t+"_row_for_"+i+" iblock-strike-out"},true);if(a)for(var n=0;n<a.length;n++)a[n].className=t+"_row_for_"+i;r.parentNode.removeChild(r);BX.Access.DeleteSelected(i,t)};function addNewRow(e,i){var t=document.getElementById(e);var r=t.rows.length;if(i==null)i=-2;var s=t.rows[r+i].cells[0].innerHTML;var a=t.insertRow(r+i+1);var n=a.insertCell(0);var l=0;while(true){var h=s.indexOf("[n",l);if(h<0)break;var c=s.indexOf("]",h);if(c<0)break;var v=parseInt(s.substr(h+2,c-h));s=s.substr(0,h)+"[n"+ ++v+"]"+s.substr(c+1);l=h+1}var l=0;while(true){var h=s.indexOf("__n",l);if(h<0)break;var c=s.indexOf("_",h+2);if(c<0)break;var v=parseInt(s.substr(h+3,c-h));s=s.substr(0,h)+"__n"+ ++v+"_"+s.substr(c+1);l=c+1}var l=0;while(true){var h=s.indexOf("__N",l);if(h<0)break;var c=s.indexOf("__",h+2);if(c<0)break;var v=parseInt(s.substr(h+3,c-h));s=s.substr(0,h)+"__N"+ ++v+"__"+s.substr(c+2);l=c+2}var l=0;while(true){var h=s.indexOf("xxn",l);if(h<0)break;var c=s.indexOf("xx",h+2);if(c<0)break;var v=parseInt(s.substr(h+3,c-h));s=s.substr(0,h)+"xxn"+ ++v+"xx"+s.substr(c+2);l=c+2}var l=0;while(true){var h=s.indexOf("%5Bn",l);if(h<0)break;var c=s.indexOf("%5D",h+3);if(c<0)break;var v=parseInt(s.substr(h+4,c-h));s=s.substr(0,h)+"%5Bn"+ ++v+"%5D"+s.substr(c+3);l=c+3}n.innerHTML=s;var d=new RegExp("<"+"script"+">[^\0]*?<"+"/"+"script"+">","ig");var o=s.match(d);if(o){for(var f=0;f<o.length;f++){if(o[f]!=""){var h=o[f].substring(8,o[f].length-9);jsUtils.EvalGlobal(h)}}}setTimeout(function(){var e=BX.findChildren(n,{tag:/^(input|select|textarea)$/i});if(e&&e.length>0){for(var i=0,t=e.length;i<t;i++){if(e[i].form&&e[i].form.BXAUTOSAVE)e[i].form.BXAUTOSAVE.RegisterInput(e[i]);else break}}},10)}
//# sourceMappingURL=rights_edit.map.js