jn.define("crm/stage-list/item",((e,t,n)=>{const{Haptics:s}=e("haptics");const{dragButton:i}=e("crm/assets/common");const o={PROCESS:"P",SUCCESS:"S",FAILED:"F"};const l=5;const r=22;const a=9;const h=70;class g extends LayoutComponent{constructor(e){super(e);this.initStageProps(e);this.onSelectedStage=this.handlerOnSelectedStage.bind(this)}componentWillReceiveProps(e){this.initStageProps(e)}initStageProps(e){this.showTunnels=BX.prop.get(e,"showTunnels",false);this.showTotal=BX.prop.get(e,"showTotal",false);this.showCount=BX.prop.get(e,"showCount",false);this.showCounters=BX.prop.get(e,"showCounters",false);this.showAllStagesItem=BX.prop.get(e,"showAllStagesItem",false)}handlerOnSelectedStage(){if(!this.enableStageSelect()){return}s.impactLight();const{onSelectedStage:e,stage:t}=this.props;if(typeof e==="function"){e(t)}}isReadOnly(){return BX.prop.getBoolean(this.props,"readOnly",false)}enableStageSelect(){return BX.prop.getBoolean(this.props,"enableStageSelect",false)}canMoveStages(){return BX.prop.getBoolean(this.props,"canMoveStages",true)}renderBadgeContainer(){const{indexContainer:e,indexText:t,dragButton:n,allStagesIcon:s}=d;const{stage:l}=this.props;if(l.semantics&&l.semantics!==o.PROCESS){return this.renderFinalBadge()}let r=null;if(l.id){r=Text({style:t,numberOfLines:1,ellipsize:"end",text:String(l.index)})}else if(this.showAllStagesItem){r=Image({style:s,svg:{content:p.allStagesBadge}})}return View({style:e},!this.isReadOnly()&&this.canMoveStages()&&Image({style:n,svg:{content:i}}),r)}renderFinalBadge(){return View({style:{width:60,height:26,justifyContent:"center",marginTop:23,alignItems:"center"}},Image({style:{width:this.props.stage.semantics===o.SUCCESS?14:18,height:this.props.stage.semantics===o.SUCCESS?16:17},resizeMode:"contain",svg:{content:this.props.stage.semantics===o.SUCCESS?p.successStageFlagIcon:p.failedStageFlagIcon}}))}renderContent(e){const t=!e.id||this.isReadOnly();return View({style:d.content(e.showContentBorder)},View({style:d.stageView(this.hasTunnels(e))},new Crm.StageStep({stage:e,showTotal:this.showTotal,showCount:this.showCount,showCounters:this.showCounters,showAllStagesItem:this.showAllStagesItem}),this.showTunnels?this.renderTunnels(e):null),this.renderEditButton(t))}hasTunnels(e){return this.showTunnels&&e.tunnels!==0}renderEditButton(e=false){if(e){return View({style:d.editButtonContainer})}return View({style:{justifyContent:"center",alignItems:"center",...d.editButtonContainer},onClick:()=>{const{key:e,type:t,index:n,...s}=this.props.stage;this.handlerOnOpenStageDetail(s)}},Image({style:d.editButtonIcon,svg:{content:p.editButtonIcon}}))}handlerOnOpenStageDetail(e){const{onOpenStageDetail:t}=this.props;if(typeof t==="function"){t(e)}}renderTunnels(e){if(e.tunnels===0){return null}const t=e.tunnels.map(((e,t)=>this.renderTunnel(e,t)));return View({style:d.tunnelsContainer},...t)}renderTunnel(e,t){return View({style:d.tunnelWrapper(t)},View({style:{paddingBottom:6,paddingLeft:t!==0?4:0}},Image({style:d.tunnelVector(t),svg:{content:t===0?p.tunnelFirstVector:p.tunnelVector}})),View({style:d.tunnelContentContainer},new Crm.Tunnel({...e})))}render(){const{stage:e}=this.props;return View({style:d.wrapper(this.isStageEnabled()),onClick:this.enableStageSelect()&&this.isStageEnabled()&&this.onSelectedStage},this.renderBadgeContainer(),this.renderContent(e))}isStageEnabled(){return BX.prop.getBoolean(this.props,"enabled",true)}}const d={wrapper:e=>({flexDirection:"row",backgroundColor:"#fff",opacity:e?1:.52,minHeight:h}),indexContainer:{justifyContent:"center",alignItems:"center",alignSelf:"flex-start",flexDirection:"row",maxWidth:60,width:"100%",marginTop:25},dragButton:{width:6,height:14,marginRight:9},indexText:{color:"#b8bfc9",fontWeight:"500",fontSize:14,flexWrap:"no-wrap"},allStagesIcon:{margin:4,width:16,height:12},content:e=>({borderBottomWidth:e?1:0,borderBottomColor:"#e6e6e6",flexDirection:"row",flexGrow:2,alignItems:"center"}),stageView:e=>({flexDirection:"column",flexGrow:2,paddingTop:11,paddingBottom:e?17:11}),editButtonContainer:{width:46,height:37,marginLeft:6,marginRight:9,alignSelf:"flex-start",marginTop:17},editButtonIcon:{width:14,height:14},tunnelsContainer:{marginLeft:6,marginTop:-8},tunnelWrapper:e=>({flexDirection:"row",height:e!==0?r+a:r+l,marginTop:e!==0?-a:0}),tunnelContentContainer:{marginLeft:6,flex:1,alignSelf:"flex-end"},tunnelVector:e=>({width:e===0?12:8,height:e===0?21:23})};const p={tunnelFirstVector:`<svg width="12" height="21" viewBox="0 0 12 21" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="12" height="21"/><circle cx="5" cy="5" r="3.75" fill="#CBCED2" stroke="white" stroke-width="1.5"/><path d="M5 5V11.5625V17C5 18.6569 6.34315 20 8 20H11" stroke="#CBCED2" stroke-width="1.5" stroke-linecap="round"/></svg>`,tunnelVector:`<svg width="8" height="23" viewBox="0 0 8 23" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="8" height="23" fill="none"/><path d="M1 -7V20C1 21.1046 1.89543 22 3 22H7" stroke="#CBCED2" stroke-width="1.5" stroke-linecap="round"/></svg>`,editButtonIcon:`<svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.4" fill-rule="evenodd" clip-rule="evenodd" d="M11.5505 0.708708C11.9426 0.31773 12.5779 0.319865 12.9674 0.71347L14.2992 2.05937C14.6867 2.45089 14.6846 3.08201 14.2945 3.47092L5.28648 12.4522L2.54781 9.68469L11.5505 0.708708ZM0.00953897 14.6436C-0.0163586 14.7416 0.0113888 14.8452 0.0816823 14.9173C0.153826 14.9894 0.257416 15.0172 0.355457 14.9894L3.41693 14.1646L0.834563 11.5831L0.00953897 14.6436Z" fill="#767C87"/></svg>`,successStageFlagIcon:`<svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.0644531 0.19812V15.7924H2.6635V10.5943H13.926L10.659 5.39621L13.926 0.19812H0.0644531Z" fill="#9DCF00"/></svg>`,failedStageFlagIcon:`<svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M0.332031 0.19812V15.7924H2.93107V10.5943H5.66641C5.95968 7.45074 8.39145 4.92814 11.4925 4.49569L14.1936 0.19812H0.332031Z" fill="#FF514A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.4407 16.2967C15.2366 16.2967 17.5031 14.0302 17.5031 11.2343C17.5031 8.43843 15.2366 6.17192 12.4407 6.17192C9.6448 6.17192 7.37829 8.43843 7.37829 11.2343C7.37829 14.0302 9.6448 16.2967 12.4407 16.2967ZM15.3766 13.1918L14.3979 14.1705L12.4404 12.2131L10.483 14.1705L9.50422 13.1918L11.4617 11.2343L9.50422 9.27686L10.483 8.29813L12.4404 10.2556L14.3979 8.29813L15.3766 9.27686L13.4192 11.2343L15.3766 13.1918Z" fill="#FF514A"/></svg>`,allStagesBadge:`<svg width="16" height="12" viewBox="0 0 16 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2 0H0V2H2V0Z" fill="#CED4DA"/><path d="M16 0H4V2H16V0Z" fill="#CED4DA"/><path d="M4 10H16V12H4V10Z" fill="#CED4DA"/><path d="M2 10H0V12H2V10Z" fill="#CED4DA"/><path d="M4 5H16V7H4V5Z" fill="#CED4DA"/><path d="M2 5H0V7H2V5Z" fill="#CED4DA"/></svg>`};n.exports={StageListItem:g,TUNNEL_HEIGHT:r,MIN_STAGE_HEIGHT:h,FIRST_TUNNEL_ADDITIONAL_HEIGHT:l}}));
//# sourceMappingURL=extension.map.js