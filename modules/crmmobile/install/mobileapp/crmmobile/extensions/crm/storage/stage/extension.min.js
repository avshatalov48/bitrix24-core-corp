jn.define("crm/storage/stage",((t,e,s)=>{const{get:a}=t("utils/object");const{StageAjax:r}=t("crm/ajax");const{CategoryStorage:o}=t("crm/storage/category");class g extends o.constructor{getAjax(){return r}createStage(t,e,s){return new Promise(((r,o)=>{this.getAjax().create(t,e,s).then((s=>{if(s.errors&&s.errors.length){o(s);return}const{data:g}=s;const n=this.getPathToCategoryList(t);this.clearTtlValue(n);const c=this.getPathToCategory(t,e);this.clearTtlValue(c);let i="processStages";if(g.semantics==="S"){i="successStages"}else if(g.semantics==="F"){i="failedStages"}const h=this.getDataValue(c,[]);const l=a(h,i,[]);l.push(g);this.updateDataInStorage(c,h);r(g)}))}))}updateStage(t,e,s){return new Promise(((a,r)=>{this.getAjax().update(t,s).then((s=>{if(s.errors&&s.errors.length){r(s);return}const o=this.getPathToCategory(t,e);this.clearTtlValue(o);const g=this.getPathToCategoryList(t);this.clearTtlValue(g);a()}))}))}deleteStage(t,e,s){return new Promise(((a,r)=>{this.getAjax().delete(t,s).then((s=>{if(s.errors&&s.errors.length){r(s);return}const o=this.getPathToCategory(t,e);this.clearTtlValue(o);const g=this.getPathToCategoryList(t);this.clearTtlValue(g);a()}))}))}}s.exports={StageStorage:new g}}));
//# sourceMappingURL=extension.map.js