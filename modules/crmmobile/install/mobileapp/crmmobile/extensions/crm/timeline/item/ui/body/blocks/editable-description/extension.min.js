jn.define("crm/timeline/item/ui/body/blocks/editable-description",((t,e,i)=>{const{Loc:o}=t("loc");const{TimelineItemBodyBlock:s}=t("crm/timeline/item/ui/body/blocks/base");const{TimelineTextEditor:n}=t("crm/timeline/ui/text-editor");const{transparent:d}=t("utils/color");class r extends s{constructor(...t){super(...t);this.state={text:this.props.text,expanded:false}}componentWillReceiveProps(t){this.state.text=t.text}render(){return View({},View({style:{paddingBottom:15,paddingTop:this.state.text.length?14:30,paddingLeft:16,paddingRight:30,borderWidth:1,borderColor:d("#000000",.1),borderRadius:12,maxHeight:this.state.expanded?"auto":200},onClick:()=>this.toggleExpanded(),onLongClick:()=>this.openEditor()},this.renderEditIcon(),Text({text:this.state.text,ellipsize:"end",style:{fontSize:14,fontWeight:"400",color:"#333333"}})))}renderEditIcon(){if(this.isReadonly){return null}return View({onClick:()=>this.openEditor(),style:{position:"absolute",right:0,top:3,paddingHorizontal:16,paddingVertical:14}},Image({svg:{content:`<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9.32707 0.776367L11.24 2.70943L3.75675 10.1725L1.84382 8.23948L9.32707 0.776367ZM0.769358 11.0047C0.751269 11.0732 0.77065 11.1455 0.819749 11.1959C0.870141 11.2463 0.942497 11.2657 1.01098 11.2463L3.14937 10.6702L1.34563 8.86699L0.769358 11.0047Z" fill="black" fill-opacity="0.2"/></svg>`},style:{width:12,height:12}}))}openEditor(){if(this.isReadonly){return}n.open({title:o.getMessage("M_CRM_TIMELINE_BLOCK_EDITABLE_TEXT_TITLE2"),text:this.state.text,required:true,onSave:t=>this.onSave(t)})}toggleExpanded(){this.setState({expanded:!this.state.expanded})}onSave(t){t=t.trim();this.setState({text:t},(()=>{if(this.props.saveAction){const{actionParams:t}=this.props.saveAction;t.value=this.state.text;this.emitAction({...this.props.saveAction,actionParams:t})}}))}}i.exports={TimelineItemBodyEditableDescriptionBlock:r}}));
//# sourceMappingURL=extension.map.js