jn.define("crm/timeline/item/ui/body/blocks/editable-description/editor",((e,t,i)=>{const{Loc:s}=e("loc");const{Toolbar:o,ToolbarButton:n}=e("crm/timeline/ui/toolbar");const{Textarea:r}=e("crm/timeline/ui/textarea");const{WidgetHeaderButton:l}=e("crm/timeline/ui/widget-header-button");class a extends LayoutComponent{constructor(e){super(e);this.state={text:e.text};this.layout=e.layout;this.textInputRef=null;this.createButtonRef=null;this.saveButton=new l({widget:this.layout,text:s.getMessage("M_CRM_TIMELINE_SAVE"),loadingText:s.getMessage("M_CRM_TIMELINE_SAVING"),disabled:!this.isSaveAllowed(),onClick:()=>this.save()})}componentDidMount(){this.focus()}focus(){if(this.textInputRef){this.textInputRef.focus()}}render(){return View({style:{flexDirection:"column"},resizableByKeyboard:true},this.renderTextField(),this.renderClearIcon())}renderTextField(){return View({style:{flexGrow:1,paddingRight:48}},r({ref:e=>this.textInputRef=e,text:this.state.text,placeholder:s.getMessage("M_CRM_TIMELINE_TYPE_SOMETHING"),onChange:e=>{this.state.text=e;this.refreshSaveButton()}}))}renderClearIcon(){return View({onClick:()=>this.setState({text:""},(()=>this.focus())),style:{position:"absolute",top:14,right:6,width:42,height:42,flexDirection:"row",justifyContent:"center",alignItems:"center"}},Image({svg:{content:`<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 18C13.9706 18 18 13.9706 18 9C18 4.02944 13.9706 0 9 0C4.02944 0 0 4.02944 0 9C0 13.9706 4.02944 18 9 18ZM13 11.8873L10.1127 9L13 6.11272L11.8873 5L9 7.88728L6.11272 5L5 6.11272L7.88728 9L5 11.8873L6.11272 13L9 10.1127L11.8873 13L13 11.8873Z" fill="#D5D7DB"/></svg>`},style:{width:18,height:18}}))}renderToolbar(){return o({right:()=>new n({ref:e=>this.createButtonRef=e,text:s.getMessage("M_CRM_TIMELINE_SAVE"),loadingText:s.getMessage("M_CRM_TIMELINE_SAVING"),disabled:!this.isSaveAllowed(),onClick:()=>this.save()})})}isSaveAllowed(){return this.state.text.length}refreshSaveButton(){if(this.isSaveAllowed()){this.saveButton.enable()}else{this.saveButton.disable()}}save(){if(this.props.onSave){this.props.onSave(this.state.text)}return this.close()}close(){return new Promise((e=>{if(this.layout){this.layout.close()}e()}))}}i.exports={TimelineItemBodyTextEditor:a}}));
//# sourceMappingURL=editor.map.js