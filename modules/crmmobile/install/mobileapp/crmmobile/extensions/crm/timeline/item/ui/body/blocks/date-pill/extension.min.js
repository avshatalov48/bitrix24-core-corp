jn.define("crm/timeline/item/ui/body/blocks/date-pill",((e,t,o)=>{const{TimelineItemBodyBlock:i}=e("crm/timeline/item/ui/body/blocks/base");const{Moment:s}=e("utils/date");const{datetime:n,shortTime:a,dayShortMonth:m,mediumDate:r}=e("utils/date/formats");const{Loc:l}=e("loc");class c extends i{constructor(...e){super(...e);this.state={moment:s.createFromTimestamp(this.props.value)}}componentWillReceiveProps(e){this.state.moment=s.createFromTimestamp(e.value)}get moment(){return this.state.moment}render(){return View({style:{flexDirection:"row",justifyContent:"flex-start"},onClick:()=>{if(this.props.action&&!this.isReadonly){this.openDatePicker()}}},View({style:{backgroundColor:this.model.isScheduled||this.model.isPinned?"#FFE9BE":"#F1F4F6",borderRadius:64,paddingHorizontal:8,paddingVertical:4,flexDirection:"row",alignItems:"center"}},Text({text:this.formatDate(),style:{fontSize:12,fontWeight:"600",color:"#6A737F"}}),this.props.action&&!this.isReadonly&&Image({svg:{content:`<svg width="10" height="6" viewBox="0 0 10 6" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.3065 0.753906L5.66572 3.39469L5.00042 4.04969L4.34773 3.39469L1.70695 0.753906L0.775096 1.68576L5.00669 5.91735L9.23828 1.68576L8.3065 0.753906Z" fill="#6A737F"/></svg>`},style:{marginLeft:4,width:10,height:6}})))}formatDate(){let e;if(this.moment.isYesterday){e=l.getMessage("CRM_TIMELINE_HISTORY_YESTERDAY").toLocaleLowerCase(env.languageId)}else if(this.moment.isToday){e=l.getMessage("CRM_TIMELINE_HISTORY_TODAY").toLocaleLowerCase(env.languageId)}else if(this.moment.isTomorrow){e=l.getMessage("CRM_TIMELINE_HISTORY_TOMORROW").toLocaleLowerCase(env.languageId)}else{let t=this.moment.format("EE");if(env.languageId==="ru"){t=t.toLocaleLowerCase(env.languageId)}const o=this.moment.inThisYear?m():r();e=`${t}, ${this.moment.format(o)}`}const t=this.moment.format(a()).toLocaleLowerCase(env.languageId);return this.props.withTime?`${e}, ${t}`:e}openDatePicker(){dialogs.showDatePicker({type:this.props.withTime?"datetime":"date",value:this.moment.date.getTime()},((e,t)=>{if(t){const e=new s(t);this.setState({moment:e},(()=>{this.onAction(e)}))}}))}onAction(e){if(this.props.action){const{actionParams:t}=this.props.action;t.value=e.format(n());this.emitAction({...this.props.action,actionParams:t})}}}o.exports={TimelineItemBodyDatePillBlock:c}}));
//# sourceMappingURL=extension.map.js