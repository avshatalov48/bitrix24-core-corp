jn.define("crm/timeline/item/ui/context-menu",((e,t,n)=>{const{TimelineButtonVisibilityFilter:i,TimelineButtonSorter:s}=e("crm/timeline/item/ui/styles");const{clone:o}=e("utils/object");const m=()=>{};class r{constructor({items:e=[],onAction:t=m,isReadonly:n=false}){this.menuInstance=null;this.isReadonly=n;this.items=this.prepareItems(e);this.onAction=t}prepareItems(e=[]){return o(e).filter((e=>i(e,this.isReadonly)&&e.title!=="")).sort(s).map((e=>{if(e.menu&&e.menu.items){e.menu=this.prepareItems(Object.values(e.menu.items))}return e}))}hasItems(){return this.items.length>0}open(){return this.openItems(this.items)}openItems(e){this.menuInstance=new ContextMenu({actions:this.prepareActions(e),params:{showCancelButton:true,showActionLoader:false}});void this.menuInstance.show()}prepareActions(e=[]){return e.map((e=>({id:Random.getString(4),title:e.title,subTitle:"",onClickCallback:()=>{this.menuInstance.close((()=>{if(e.menu){if(e.menu.length){this.openItems(e.menu)}return}this.onItemClick(e.action)}));return Promise.resolve({closeMenu:false})}})))}onItemClick(e){if(this.onAction){this.onAction(e)}}}n.exports={TimelineItemContextMenu:r}}));
//# sourceMappingURL=extension.map.js