jn.define("crm/timeline/item/ui/icon",((t,e,i)=>{const{stringify:o}=t("utils/string");const{Haptics:s}=t("haptics");const{TimelineItemIconLogo:n}=t("crm/timeline/item/ui/icon/logo");const a={DANGER:"#FF5752",SUCCESS:"#9DCF00",get(t){t=o(t).toUpperCase();return this[t]||this.DANGER}};class r extends LayoutComponent{constructor(t){super(t);this.state={play:false,isLoading:false,isLoaded:false};this.itemScopeEventBus=this.props.itemScopeEventBus}get additionalIcon(){return BX.prop.getObject(this.props,"additionalIcon",null)}componentDidMount(){if(this.props.hasPlayer){this.itemScopeEventBus.on("AudioPlayer::onPlay",(({duration:t,currentTime:e,speed:i})=>{this.setState({play:true,isLoading:false,isLoaded:true},(()=>{if(t){return this.props.onAction({type:"jsEvent",value:"Call::OpenToolBar",actionParams:{play:true,duration:t,currentTime:e,speed:i,uid:this.itemScopeEventBus.getUid()}})}}))}));this.itemScopeEventBus.on("AudioPlayer::onPause",(()=>{this.setState({play:false})}));this.itemScopeEventBus.on("AudioPlayer::onFinish",(()=>{this.setState({play:false})}))}}render(){const{action:t,onAction:e,counterType:i}=this.props;return View({style:{paddingTop:12,paddingLeft:12,paddingBottom:12},onClick:()=>{if(this.props.hasPlayer){s.impactLight();if(!this.state.isLoading){this.setState({isLoading:true})}}this.itemScopeEventBus.emit("onTimelineIconClicked",[]);return e&&t&&e(t)}},View({style:{width:80,height:80,borderRadius:12,backgroundColor:"#E5F9FF"}},this.renderIcon()),i&&p({color:a.get(i),text:"1"}))}renderIcon(){return new n({...this.props.logo,hasPlayer:this.props.hasPlayer,play:this.state.play,isLoading:this.state.isLoading,isLoaded:this.state.isLoaded})}}function p({color:t,text:e}){return View({style:{position:"absolute",left:8,top:9,backgroundColor:t,paddingTop:2,paddingBottom:2,paddingLeft:6,paddingRight:6,borderRadius:44}},Text({text:String(e),style:{color:"#ffffff",fontSize:12,fontWeight:"500"}}))}i.exports={TimelineItemIcon:r}}));
//# sourceMappingURL=extension.map.js