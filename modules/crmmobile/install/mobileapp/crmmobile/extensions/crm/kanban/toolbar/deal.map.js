{"version":3,"sources":["deal.js"],"names":["jn","define","require","exports","module","isEqual","mergeImmutable","NavigationLoader","StageToolbar","CategoryStorage","CategoryCountersStoreManager","MAX_FORMATTED_SUM","PLUS_ONE_ACTION","MINUS_ONE_ACTION","DealToolbar","LayoutComponent","constructor","props","super","this","stages","columns","state","category","getCategoryByProps","categoryCounters","getCategoryCounters","activeStageId","showValues","stageToolbarRef","clickToolbarHandler","handleToolbarClick","bind","onItemMovedHandler","handleOnItemMoved","onItemDeletedHandler","handleOnItemDeleted","onItemUpdatedHandler","handleOnItemUpdated","onSimpleListRefreshHandler","handleOnSimpleListRefresh","updateCountersHandler","updateCounters","blinkItem","BX","prop","getFunction","toolbarRef","force","filter","entityTypeId","filterParams","CATEGORY_ID","categoryId","getCategory","clearCaches","getStages","newState","setState","componentWillReceiveProps","newProps","componentDidMount","subscribeStoreEvents","setEventId","subscribeOnChange","reloadCategory","subscribeOnLoading","status","setLoading","markReady","addCustomEvent","layout","enableNavigationBarBorder","subscribe","componentWillUnmount","removeCustomEvent","unsubscribe","params","oldAmount","oldItem","data","price","amount","item","columnId","addToStageCounters","oldColumnId","removeFromStageCounters","id","addCount","modifyCountersByColumnId","removeCount","action","count","Error","stage","getStageByStatusId","stageCounters","getCountersByStageId","total","updateStageCounters","reload","changeCategory","needReloadColumn","reloadColumn","handleSelectorClick","getActiveStageId","useCache","processStages","successStages","failedStages","stageId","updateStage","getActiveStage","length","getStage","find","getFirstStage","statusId","getCountersById","getFormattedMoneyText","money","Math","floor","message","formattedAmount","getActiveStageTotalMoney","currentStage","round","reduce","sum","parseFloat","getCurrency","counters","currency","getColumns","size","Map","map","set","updateCurrentColumnId","changeColumn","Promise","resolve","getAdditionalParamsForItem","onChange","changeItemStage","getStyles","defaultStyles","getObject","getTotalMoney","Money","render","styles","currencyText","formattedCurrency","View","style","rootWrapper","onClick","Shadow","shadow","mainWrapper","toolbarWrapper","ref","showAllStages","onStageSelect","stageParams","showTotal","showCount","showCounters","showAllStagesItem","renderStageCountFiller","renderFiller","useRenderStageCountFiller","moneyWrapper","Text","moneyTitle","text","ellipsize","numberOfLines","renderFormattedMoney","width","height","marginTop","Application","getPlatform","Image","svg","content","position","left","right","top","color","radius","offset","y","inset","borderBottomLeftRadius","borderBottomRightRadius","flexDirection","paddingHorizontal","paddingTop","backgroundColor","justifyContent","alignItems","flex","paddingRight","fontSize","fontWeight","marginBottom"],"mappings":"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","file":"deal.map.js"}