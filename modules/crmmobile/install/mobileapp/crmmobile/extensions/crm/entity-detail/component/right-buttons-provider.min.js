jn.define("crm/entity-detail/component/right-buttons-provider",((t,e,n)=>{const{contacts:o}=t("native/contacts");const{NotifyManager:i}=t("notify-manager");const{get:s,isEmpty:r,mergeImmutable:a}=t("utils/object");const{stringify:c}=t("utils/string");const{isNil:l}=t("utils/type");const{getEntityMessage:m}=t("crm/loc");const{TypeId:d}=t("crm/type");const C=(t,e)=>{const{entityTypeId:n}=e.getComponentParams();if(e.hasEntityModel()&&e.isNewEntity()&&(n===d.Contact||n===d.Company)&&Application.getApiVersion()>=45){t=[{id:"importContactList",badgeCode:"import_from_contact_list",svg:{content:w},callback:p(e)},...t]}return t};let u;const p=t=>{if(!u){u=()=>h(t)}return u};const h=t=>{dialogs.showContactList({singleChoose:true}).then((e=>f(t,e)))};const f=(t,e)=>{const n=e[0]||null;if(!n){return}i.showLoadingIndicator();o.getData(n.id).then((([e])=>{const n=t.tabRefMap.get("main");if(n){const o=s(n,"state.result.editor",null);const r=s(o,"ENTITY_DATA",null);if(o&&r){const n=a(r,g(t.getEntityTypeId(),e));const s=t.reload([{id:"main",result:{editor:{...o,ENTITY_DATA:n}}}]);s.then((()=>{t.markChanged();i.hideLoadingIndicator(true,m("M_CRM_ENTITY_ACTION_IMPORT_SUCCESS",t.getEntityTypeId()),1e3)}))}}})).catch((t=>{i.hideLoadingIndicator(false);console.error(t)}))};const g=(t,e)=>{if(t===d.Contact){return y(e)}if(t===d.Company){return N(e)}return{}};const y=t=>{const{firstName:e,secondName:n,middleName:o,jobTitle:i,birthday:s,emails:r,urls:a,phoneNumbers:c,im:l}=E(t);const m={};m.NAME=e;m.LAST_NAME=n;m.SECOND_NAME=o;m.POST=i;if(s!==undefined){m.BIRTHDATE=s}m.EMAIL=r;m.WEB=a;m.PHONE=c;m.IM=l;return m};const N=t=>{const{displayName:e,emails:n,urls:o,phoneNumbers:i,im:s}=E(t);const r={};r.TITLE=e;r.EMAIL=n;r.WEB=o;r.PHONE=i;r.IM=s;return r};const E=t=>{const{displayName:e,firstName:n,secondName:o,middleName:i,jobTitle:s,birthday:a,emails:m,urls:d,phoneNumbers:C,socialProfiles:u,im:p}=t;const h={};h.displayName=c(e).trim();h.firstName=c(n).trim();h.secondName=c(o).trim();h.middleName=c(i).trim();h.jobTitle=c(s).trim();if(!l(a)){h.birthday=Math.round(a/1e3)}h.emails=!r(m)?T(m):[];h.phoneNumbers=!r(C)?b(C):[];h.im=!r(p)?A(p):[];const f=I(d,u);h.urls=!r(f)?f:[];return h};const T=t=>{const e=["work","home"];return v(t,e)};const b=t=>{const e=["mobile","home","work"];t=t.map((({value:t,type:e})=>({value:t==="main"?"work":t,type:e})));return v(t,e)};const A=t=>{const e=["facebook","icq","jabber","msn","skype"];return v(t,e)};const I=(t,e)=>{let n=[];if(!r(t)){n=M(t)}if(!r(e)){n=[...n,...L(e)]}return n};const M=t=>{const e=["work","home"];return v(t,e)};const L=t=>{const e=["facebook","twitter"];return v(t,e)};const v=(t,e=[])=>t.map((({value:t,type:n})=>({id:"n"+Math.round(Math.random()*1e3),value:{VALUE:c(t).trim(),VALUE_TYPE:e.includes(n)?n.toUpperCase():"OTHER"}}))).filter((({value:{VALUE:t}})=>t!==""));const w='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.0392 19.5052C15.6625 18.8472 15.4471 18.0849 15.4471 17.2723C15.4471 16.1258 15.8759 15.0794 16.5819 14.2847C16.472 14.2522 16.3583 14.2209 16.2407 14.191C15.6441 14.0277 15.0769 13.7744 14.5594 13.4402C14.4463 13.3767 14.4635 12.7902 14.4635 12.7902L13.8963 12.7055C13.8963 12.6579 13.8478 11.9546 13.8478 11.9546C14.5264 11.7308 14.4566 10.4103 14.4566 10.4103C14.8876 10.645 15.1683 9.60004 15.1683 9.60004C15.678 8.14826 14.9144 8.23605 14.9144 8.23605C15.048 7.34977 15.048 6.44903 14.9144 5.56275C14.5749 2.62273 9.46361 3.42087 10.0697 4.38107C8.57584 4.11097 8.91671 7.44736 8.91671 7.44736L9.24072 8.31134C8.79162 8.59728 8.87981 8.92543 8.97833 9.292C9.0194 9.44481 9.06227 9.60431 9.06874 9.77021C9.10004 10.6028 9.61909 10.4303 9.61909 10.4303C9.65107 11.8044 10.3414 11.9833 10.3414 11.9833C10.4711 12.8463 10.3903 12.6994 10.3903 12.6994L9.77593 12.7723C9.78425 12.9686 9.76796 13.1651 9.72743 13.3574C9.37051 13.5136 9.15199 13.6379 8.93563 13.7609C8.71414 13.8868 8.49492 14.0115 8.13178 14.1677C6.74492 14.7643 5.23767 15.5402 4.96972 16.5848C4.8729 16.9622 4.77855 17.5003 4.69752 18.0337C4.65657 18.3033 4.80572 18.566 5.06013 18.6642C6.99328 19.4102 9.19793 19.854 11.544 19.9043H12.4419C13.6874 19.8776 14.893 19.74 16.0392 19.5052ZM17.2115 16.8227C17.0225 16.6337 17.1563 16.3105 17.4236 16.3105H19.5V12.6274C19.5 11.5229 18.6045 10.6274 17.5 10.6274H17.3C17.1343 10.6274 17 10.4931 17 10.3274V8.92744C17 8.76176 17.1343 8.62744 17.3 8.62744H17.5C19.7091 8.62744 21.5 10.4183 21.5 12.6274V16.3105H23.5242C23.7915 16.3105 23.9254 16.6337 23.7364 16.8227L20.6861 19.873C20.5689 19.9902 20.379 19.9902 20.2618 19.873L17.2115 16.8227Z" fill="#A8ADB4"/></svg>';n.exports={rightButtonsProvider:C}}));
//# sourceMappingURL=right-buttons-provider.map.js