jn.define("crm/communication/floating-button",((t,n,e)=>{const{Haptics:i}=t("haptics");const o=t("assets/communication");const{connections:s,isExistContacts:c}=t("communication/connection");const{CommunicationMenu:r}=t("communication/menu");const{isEmpty:a,isEqual:u}=t("utils/object");const l="CommunicationFloatingButton";const h=108;const m=26;const C={ENABLED:"#378EE7",DISABLED:"#D5D7DB"};class d extends LayoutComponent{constructor(t={}){super(t);this.buttonRef=null;this.state={canConnections:s.map((t=>({[t]:false})))};this.communicationMenu=null;this.onClick=this.handleOnClick.bind(this)}isVibrationEnabled(){return BX.prop.getBoolean(this.props,"vibrationEnabled",true)}render(){const{main:t,shadowView:n}=f;return View({ref:t=>this.buttonRef=t,safeArea:{bottom:true,top:true,left:true,right:true},testId:l,style:t(this.getCenterPosition()),onClick:this.onClick},View({style:n(this.isConnections())},...this.getCommunicationIcons()))}show(){const t=this.buttonRef?0:200;setTimeout((()=>{if(this.buttonRef){this.buttonRef.animate({duration:500,bottom:22})}else{this.show()}}),t)}getCenterPosition(){if(!device){return"50%"}const t=device.screen.width/2;const n=h/2;return t-n}getCommunicationIcons(){return s.map((t=>{const n=o[t];const e=this.state.canConnections[t]?C.ENABLED:C.DISABLED;return Image({style:f.icon,svg:{content:n(e)}})}))}handleOnClick(){if(!this.isConnections()){return null}this.communicationMenu.show()}isConnections(){return Object.values(this.state.canConnections).some(Boolean)}getExistConnections(){return s.reduce(((t,n)=>{const e=c(this.value,n);return{...t,[n]:e}}),{})}vibrate(){if(this.isVibrationEnabled()){i.impactLight()}}createMenu(t,n){return new Promise((e=>{if(a(t)){e();return}const{canConnections:i}=this.state;this.value=t;this.communicationMenu=this.createCommunicationMenu(t,n);const o=this.getExistConnections();if(!u(o,i)){this.setState({canConnections:o},(()=>e()))}else{return e()}}))}createCommunicationMenu(t,n){if(a(t)){return null}return new r({value:t,ownerInfo:n,connections:s})}}const f={main:t=>({display:"flex",width:h,position:"absolute",left:t,bottom:-100,justifyContent:"center",alignItems:"center"}),shadowView:t=>({height:40,width:108,paddingHorizontal:8,borderRadius:40,borderColor:t?"#2FC6F6":C.DISABLED,backgroundColor:"#F4FCFE",borderWidth:1,flexShrink:2,justifyContent:"space-evenly",alignItems:"center",flexDirection:"row"}),icon:{width:m,height:m}};e.exports={CommunicationFloatingButton:d}}));
//# sourceMappingURL=extension.map.js