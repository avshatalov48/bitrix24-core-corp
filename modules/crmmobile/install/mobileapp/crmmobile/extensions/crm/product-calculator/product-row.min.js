jn.define("crm/product-calculator/product-row",((t,e,i)=>{const{mergeImmutable:s,clone:r,get:n}=t("utils/object");const{DiscountType:u}=t("crm/product-calculator/discount-type");const c=2;const o={QUANTITY:1,PRICE:0,PRICE_EXCLUSIVE:0,PRICE_NETTO:0,PRICE_BRUTTO:0,CUSTOMIZED:"N",DISCOUNT_TYPE_ID:u.UNDEFINED,DISCOUNT_RATE:0,DISCOUNT_SUM:0,DISCOUNT_ROW:0,TAX_INCLUDED:"N",TAX_RATE:0,TAX_SUM:0,SUM:0};class T{constructor(t={},e){this.fields=s(o,t);this.calculator=e}getPricePrecision(){return this.calculator.getPricePrecision()}getCommonPrecision(){return this.calculator.getCommonPrecision()}getQuantityPrecision(){return this.calculator.getQuantityPrecision()}getFields(){return r(this.fields)}setField(t,e){e=this.validateValue(t,e);this.fields[t]=e}validateValue(t,e){const i=["PRICE","PRICE_EXCLUSIVE","PRICE_NETTO","PRICE_BRUTTO","DISCOUNT_SUM","DISCOUNT_ROW","TAX_SUM","SUM"];if(t==="DISCOUNT_TYPE_ID"){e=e===u.PERCENTAGE||e===u.MONETARY?e:u.UNDEFINED}else if(t==="QUANTITY"){e=T.round(e,this.getQuantityPrecision())}else if(t==="CUSTOMIZED"||t==="TAX_INCLUDED"){e=e==="Y"?"Y":"N"}else if(t==="TAX_RATE"){e=e===null?null:T.round(e,this.getCommonPrecision())}else if(t==="DISCOUNT_RATE"){e=T.round(e,this.getCommonPrecision())}else if(i.includes(t)){e=T.round(e,this.getPricePrecision())}return e}static round(t,e=c){const i=Math.pow(10,e);return Math.round(t*i)/i}getBasePrice(){return n(this.fields,"BASE_PRICE",0)}getPrice(){return n(this.fields,"PRICE",0)}getPriceExclusive(){return n(this.fields,"PRICE_EXCLUSIVE",0)}getPriceNetto(){return n(this.fields,"PRICE_NETTO",0)}getPriceBrutto(){return n(this.fields,"PRICE_BRUTTO",0)}getQuantity(){return n(this.fields,"QUANTITY",1)}getDiscountType(){return n(this.fields,"DISCOUNT_TYPE_ID",u.UNDEFINED)}isDiscountUndefined(){return this.getDiscountType()===u.UNDEFINED}isDiscountPercentage(){return this.getDiscountType()===u.PERCENTAGE}isDiscountMonetary(){return this.getDiscountType()===u.MONETARY}isDiscountHandmade(){return this.isDiscountPercentage()||this.isDiscountMonetary()}getDiscountRate(){return n(this.fields,"DISCOUNT_RATE",0)}getDiscountSum(){return n(this.fields,"DISCOUNT_SUM",0)}getDiscountRow(){return n(this.fields,"DISCOUNT_ROW",0)}isEmptyDiscount(){if(this.isDiscountPercentage()){return this.getDiscountRate()===0}if(this.isDiscountMonetary()){return this.getDiscountSum()===0}return this.isDiscountUndefined()}getTaxIncluded(){return n(this.fields,"TAX_INCLUDED","N")}isTaxIncluded(){return this.getTaxIncluded()==="Y"}getTaxRate(){return n(this.fields,"TAX_RATE",0)}getTaxSum(){return n(this.fields,"TAX_SUM",0)}getSum(){return n(this.fields,"SUM",0)}}i.exports={ProductRow:T}}));
//# sourceMappingURL=product-row.map.js