jn.define("crm/required-fields",((e,t,s)=>{const{Haptics:n}=e("haptics");const{RequiredFieldsBackdrop:i}=e("crm/required-fields/required-backdrop");const o="CRM_FIELD_ERROR_REQUIRED";class a{static show(e){const t=new a(e);t.showRequiredFields()}static getRequiredFields(e){return e.filter((({code:e})=>e===o)).map((({customData:e})=>e.fieldName))}static hasRequiredFields(e){const t=this.getRequiredFields(e);return Boolean(t.length)}constructor(e){this.props=e;this.onCancelEvent=this.handleOnCancelEvent.bind(this);this.onSaveFieldsValue=this.saveFieldsValue.bind(this)}showRequiredFields(){const{errors:e,params:t}=this.props;const s=a.getRequiredFields(e);return BX.ajax.runAction("crmmobile.EntityDetails.getRequiredFields",{json:{...t,fieldCodes:s}}).then((({data:e})=>this.showComponent(e,s.length))).catch((e=>this.showErrors(e)))}getMediumPositionPercent(e){return Math.min((e+2)*10,85)}showComponent(e,t){n.notifyWarning();PageManager.openWidget("layout",{modal:true,backdrop:{swipeAllowed:false,horizontalSwipeAllowed:false,shouldResizeContent:true,swipeContentAllowed:false,navigationBarColor:"#eef2f4"},onReady:t=>{t.showComponent(new i({layout:t,editorData:e,onClose:this.onCancelEvent,onSave:this.onSaveFieldsValue}))}})}saveFieldsValue(e){const{params:t,action:s}=this.props;if(!t.entityId||s==="save"){this.handleOnSave(e);return}BX.ajax.runAction("crmmobile.EntityDetails.update",{json:{...t,data:e}}).then((()=>this.handleOnSave(e))).catch((e=>this.showErrors(e)))}handleOnSave(e){const{onSave:t}=this.props;if(typeof t==="function"){t({value:e})}}showErrors({errors:e}){this.handleOnCancelEvent();ErrorNotifier.showErrors(e)}handleOnCancelEvent(){const{onCancel:e}=this.props;if(e){e()}}}s.exports={RequiredFields:a}}));
//# sourceMappingURL=extension.map.js