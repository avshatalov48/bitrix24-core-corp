(function(){BX.namespace("BX.Call.AI");BX.Call.AI.Tabs={tabsList:[],tabButtons:[],taskButtons:[],meetingButtons:[],mensionElements:[],userListAppInstance:null,init:function(){this.tabsList=document.getElementsByClassName("bx-call-component-call-ai__tab-content");this.hideAllTabs();this.initEvents();this.initAudioPlayer();this.initUserList()},onTabClick:function(t){const e=t.target.dataset.tabId;this.hideAllTabs();for(let t=0;t<this.tabButtons.length;t++){this.tabButtons[t].className=this.tabButtons[t].className.replace(" --active-button","")}document.getElementById(e).style.display="flex";t.currentTarget.className+=" --active-button"},hideAllTabs:function(){for(let t=0;t<this.tabsList.length;t++){this.tabsList[t].style.display="none"}},onCreateTaskClick:function(t){const{userId:e,description:n,auditors:s}=t.target.dataset;const a=`/company/personal/user/${e}/tasks/task/edit/0/`;BX.SidePanel.Instance.open(a,{requestMethod:"post",requestParams:{AUDITORS:s,DESCRIPTION:n,RESPONSIBLE_ID:e},cacheable:false})},onCreateMeetingClick:function(t){const{meetingDescription:e,meetingId:n,meetingIdType:s}=t.target.dataset;new(window.top.BX||window.BX).Calendar.SliderLoader(0,{entryDescription:e,sliderId:n,type:s}).show()},initEvents:function(){this.tabButtons=document.getElementsByClassName("bx-call-component-call-ai__tab-header-button");for(let t=0;t<this.tabButtons.length;t++){this.tabButtons[t].addEventListener("click",this.onTabClick.bind(this))}if(this.tabButtons.length){this.tabButtons[0].click()}this.taskButtons=document.getElementsByClassName("bx-call-component-call-ai__task-button");for(let t=0;t<this.taskButtons.length;t++){this.taskButtons[t].addEventListener("click",this.onCreateTaskClick.bind(this))}this.meetingButtons=document.getElementsByClassName("bx-call-component-call-ai__meetings-button");for(let t=0;t<this.meetingButtons.length;t++){this.meetingButtons[t].addEventListener("click",this.onCreateMeetingClick.bind(this))}this.mensionElements=document.getElementsByClassName("bx-call-component-call-ai__user-mention");for(let t=0;t<this.mensionElements.length;t++){this.mensionElements[t].addEventListener("click",this.clickMension.bind(this))}const t=document.getElementsByClassName("bx-call-component-call-ai__disclaimer-link");t[0].addEventListener("click",this.clickDisclaimer.bind(this))},initAudioPlayer:function(){const t=BX.Vue3.BitrixVue;const e=document.getElementsByClassName("bx-call-component-call-ai__call-audio-record");if(!e.length){return}const{audioSrc:n}=e[0].dataset;if(!n){return}t.createApp({components:{AudioPlayer:BX.Call.Component.Elements.AudioPlayer},data(){return{audioSrc:n}},template:`\n\t\t\t\t\t<AudioPlayer :src="audioSrc" />\n\t\t\t\t`}).mount(".bx-call-component-call-ai__call-audio-record")},initUserList:function(){const t=BX.Vue3.BitrixVue;const e=document.getElementsByClassName("bx-call-component-call-ai-page__title-users-container");const{callId:n}=e[0].dataset;if(!n){return}t.createApp({components:{UserList:BX.Call.Component.UserList},data(){return{isLoadingUsers:true,callId:n,usersData:[]}},created(){BX.ajax.runComponentAction("bitrix:call.ai","getUsers",{mode:"ajax",data:{callId:n}}).then((t=>{this.isLoadingUsers=false;this.usersData=Object.values(t.data.users)})).catch((t=>{this.isLoadingUsers=false}))},template:`\n\t\t\t\t\t<UserList :loading="isLoadingUsers" :usersData="usersData" />\n\t\t\t\t`}).mount(".bx-call-component-call-ai-page__title-users-container")},clickMension:function(t){const{userId:e}=t.target.dataset;if(!e){return}BX.Messenger.Public.openChat(e)},clickDisclaimer:function(){const t=top.BX.UI.InfoHelper;const e="20412666";if(!t){return}if(t.isOpen()){t.close()}t.show(e)}};document.addEventListener("DOMContentLoaded",(()=>{BX.Call.AI.Tabs.init()}))})();
//# sourceMappingURL=script.map.js