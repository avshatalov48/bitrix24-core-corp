this.BX=this.BX||{};this.BX.Call=this.BX.Call||{};(function(e,a,t,l,c){"use strict";const o=Object.freeze({clickScreenshare:"click_screenshare",startScreenshare:"start_screenshare",finishScreenshare:"finish_screenshare",connect:"connect",startCall:"start_call",reconnect:"reconnect",addUser:"add_user",disconnect:"disconnect",finishCall:"finish_call",clickRecord:"click_record",recordStart:"record_start",recordStop:"record_stop",clickAnswer:"click_answer",clickDeny:"click_deny",cameraOn:"camera_on",cameraOff:"camera_off",micOn:"mic_on",micOff:"mic_off",clickUserFrame:"click_user_frame",handOn:"hand_on",clickChat:"click_chat",click:"click",create:"create",edit:"edit",save:"save",upload:"upload",openResume:"open_resume",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",aiRecordStart:"ai_record_start",aiOn:"ai_on",aiOff:"ai_off",openTab:"open_tab",clickCreateEvent:"click_create_event",clickCreateTask:"click_create_task",viewPopup:"view_popup",viewNotification:"view_notification",clickTimeCode:"click_timecode",playRecord:"play_record"});const i=Object.freeze({im:"im",ai:"ai"});const n=Object.freeze({call:"call",callDocs:"call_docs",messenger:"messenger",callsOperations:"calls_operations",callFollowup:"call_followup"});const s=Object.freeze({private:"private",group:"group",videoconf:"videoconf",resume:"resume",doc:"doc",presentation:"presentation",sheet:"sheet",privateCall:"private",groupCall:"group",aiOn:"ai_on",turnOnAi:"turn_on_ai"});const r=Object.freeze({callWindow:"call_window",callPopup:"call_popup",chatList:"chat_list",chatWindow:"chat_window",callMessage:"call_message",callFollowup:"call_followup"});const d=Object.freeze({finishButton:"finish_button",contextMenu:"context_menu",window:"window"});const p=Object.freeze({answerButton:"answer_button",joinButton:"join_button",videocall:"videocall",audiocall:"audiocall",recordButton:"record_button",disconnectButton:"disconnect_button",finishForAllButton:"finish_for_all_button",videoButton:"video_button",audioButton:"audio_button",startButton:"start_button",initialBanner:"initial_banner",startMessage:"start_message",finishMessage:"finish_message"});const _=Object.freeze({success:"success",decline:"decline",busy:"busy",noAnswer:"no_answer",quit:"quit",lastUserLeft:"last_user_left",finishedForAll:"finished_for_all",privateToGroup:"private_to_group",errorAgreement:"error_agreement",errorLimitBaas:"error_limit_baas",errorB24:"error_b24"});const u=Object.freeze({videoOn:"video_on",videoOff:"video_off",micOn:"mic_on",micOff:"mic_off"});const y=Object.freeze({aiOn:"ai_on",aiOff:"ai_off"});class m{onAIRecordStart(e){const a={AI_UNAVAILABLE_ERROR:_.errorB24,AI_SETTINGS_ERROR:_.errorB24,AI_AGREEMENT_ERROR:_.errorAgreement,AI_NOT_ENOUGH_BAAS_ERROR:_.errorLimitBaas};const t={tool:i.ai,category:n.callsOperations,event:o.aiRecordStart,type:e.callType,c_section:r.callFollowup,p5:`callId_${e.callId}`};if(e!=null&&e.userCount){t.p3=`userCount_${e.userCount}`}t.status=e!=null&&e.errorCode?a[e.errorCode]:_.success;l.sendData(t)}onAIRecordStatusChanged(e){l.sendData({tool:i.im,category:n.call,event:e.isAIOn?o.aiOn:o.aiOff,type:e.callType,status:e!=null&&e.error?`error_${e.error}`:_.success,p5:`callId_${e.callId}`})}onOpenFollowUpTab(e){l.sendData({tool:i.im,category:n.callFollowup,event:o.openTab,type:e.tabName,p5:`callId_${e.callId}`})}onFollowUpCreateEventClick(e){l.sendData({tool:i.im,category:n.callFollowup,event:o.clickCreateEvent,p5:`callId_${e.callId}`})}onFollowUpCreateTaskClick(e){l.sendData({tool:i.im,category:n.callFollowup,event:o.clickCreateTask,p5:`callId_${e.callId}`})}onAIRestrictionsPopupShow(e){l.sendData({tool:i.im,category:n.call,event:o.viewPopup,type:e.popupType,p5:`callId_${e.callId}`})}onCopilotNotifyShow(e){l.sendData({tool:i.im,category:n.call,event:o.viewNotification,type:e.isCopilotActive?s.aiOn:s.turnOnAi,p5:`callId_${e.callId}`})}onAIRecordTimeCodeClick(e){l.sendData({tool:i.im,category:n.callFollowup,event:o.clickTimeCode,p5:`callId_${e.callId}`})}onAIPlayRecord(e){l.sendData({tool:i.im,category:n.callFollowup,event:o.playRecord,p5:`callId_${e.callId}`})}}var v=babelHelpers.classPrivateFieldLooseKey("instance");var f=babelHelpers.classPrivateFieldLooseKey("screenShareStarted");var h=babelHelpers.classPrivateFieldLooseKey("recordStarted");var I=babelHelpers.classPrivateFieldLooseKey("getCallElementParam");var C=babelHelpers.classPrivateFieldLooseKey("getCallTypeParam");class b{constructor(){Object.defineProperty(this,C,{value:O});Object.defineProperty(this,I,{value:g});this.copilot=new m;Object.defineProperty(this,f,{writable:true,value:false});Object.defineProperty(this,h,{writable:true,value:false})}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,v)[v]){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=new this}return babelHelpers.classPrivateFieldLooseBase(this,v)[v]}onScreenShareBtnClick({callId:e,callType:a}){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]){return}l.sendData({tool:i.im,category:n.call,event:o.clickScreenshare,type:a,c_section:r.callWindow,p5:`callId_${e}`})}onScreenShareStarted({callId:e,callType:a}){babelHelpers.classPrivateFieldLooseBase(this,f)[f]=true;l.sendData({tool:i.im,category:n.call,event:o.startScreenshare,type:a,c_section:r.callWindow,p5:`callId_${e}`})}onScreenShareStopped({callId:e,callType:a,status:t,screenShareLength:c}){if(!babelHelpers.classPrivateFieldLooseBase(this,f)[f]){return}babelHelpers.classPrivateFieldLooseBase(this,f)[f]=false;l.sendData({tool:i.im,category:n.call,event:o.finishScreenshare,type:a,c_section:r.callWindow,status:t,p1:`shareLength_${c}`,p5:`callId_${e}`})}onAnswerConference(e){l.sendData({tool:i.im,category:n.call,event:o.clickAnswer,type:s.videoconf,c_section:r.callPopup,p5:`callId_${e.callId}`})}onDeclineConference(e){l.sendData({tool:i.im,category:n.call,event:o.clickDeny,type:s.videoconf,c_section:r.callPopup,p5:`callId_${e.callId}`})}onStartVideoconf(e){l.sendData({tool:i.im,category:n.call,event:o.startCall,type:s.videoconf,c_element:e.withVideo?p.videoButton:p.audioButton,status:e.status,p1:e.mediaParams.video?u.videoOn:u.videoOff,p2:e.mediaParams.audio?u.micOn:u.micOff,p3:e.isCopilotActive?y.aiOn:y.aiOff,p5:`callId_${e.callId}`})}onJoinVideoconf(e){l.sendData({tool:i.im,category:n.call,event:o.connect,type:s.videoconf,c_element:e.withVideo?p.videoButton:p.audioButton,status:e.status,p1:e.mediaParams.video?u.videoOn:u.videoOff,p2:e.mediaParams.audio?u.micOn:u.micOff,p5:`callId_${e.callId}`})}onStartCall(e){const c={tool:i.im,category:n.call,event:o.startCall,type:e.callType,status:e.status,p1:e.mediaParams.video?u.videoOn:u.videoOff,p2:e.mediaParams.audio?u.micOn:u.micOff,p3:e.isCopilotActive?y.aiOn:y.aiOff,p5:`callId_${e.callId}`};if(e.associatedEntity.advanced.chatType===a.ChatType.collab){c.p4=t.getCollabId(this.normalizeChatId(e.associatedEntity.id))}l.sendData(c)}onJoinCall(e){const c={tool:i.im,category:n.call,event:o.connect,type:e.callType,status:e.status,p3:t.getUserType(),p5:`callId_${e.callId}`};if(e.section){c.c_section=e.section}if(e.element){c.c_element=e.element}if(e.mediaParams){c.p1=e.mediaParams.video?u.videoOn:u.videoOff;c.p2=e.mediaParams.audio?u.micOn:u.micOff}if(e.associatedEntity.advanced.chatType===a.ChatType.collab){const a=e.associatedEntity.advanced.entityId;c.p4=`collabId_${a}`}l.sendData(c)}onReconnect(e){l.sendData({tool:i.im,category:n.call,event:o.reconnect,type:e.callType,c_section:r.callWindow,status:e.status,p4:`attemptNumber_${e.reconnectionEventCount}`,p5:`callId_${e.callId}`})}onInviteUser(e){l.sendData({tool:i.im,category:n.call,event:o.addUser,type:e.callType,c_section:r.callWindow,p4:`chatId_${this.normalizeChatId(e.chatId)}`,p5:`callId_${e.callId}`})}onDisconnectCall(e){l.sendData({tool:i.im,category:n.call,event:o.disconnect,type:e.callType,c_section:r.callWindow,c_sub_section:e.subSection,status:_.quit,p1:e.mediaParams.video?u.videoOn:u.videoOff,p2:e.mediaParams.audio?u.micOn:u.micOff,p5:`callId_${e.callId}`})}onFinishCall(e){l.sendData({tool:i.im,category:n.call,event:o.finishCall,type:e.callType,c_section:r.callWindow,status:e.status,p1:`callLength_${e.callLength}`,p3:`maxUserCount_${e.callUsersCount}`,p4:`chatId_${this.normalizeChatId(e.chatId)}`,p5:`callId_${e.callId}`})}onRecordBtnClick(e){if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]){return}l.sendData({tool:i.im,category:n.call,event:o.clickRecord,type:e.callType,c_section:r.callWindow,c_element:p.recordButton,p5:`callId_${e.callId}`})}onRecordStart(e){if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]){return}babelHelpers.classPrivateFieldLooseBase(this,h)[h]=true;l.sendData({tool:i.im,category:n.call,event:o.recordStart,type:e.callType,c_section:r.callWindow,status:_.success,p5:`callId_${e.callId}`})}onRecordStop(e){if(!babelHelpers.classPrivateFieldLooseBase(this,h)[h]){return}babelHelpers.classPrivateFieldLooseBase(this,h)[h]=false;l.sendData({tool:i.im,category:n.call,event:o.recordStop,type:e.callType,c_section:r.callWindow,c_sub_section:e.subSection,c_element:e.element,p1:`recordLength_${e==null?void 0:e.recordTime}`,p5:`callId_${e.callId}`})}onToggleCamera(e){l.sendData({tool:i.im,category:n.call,event:e.video?o.cameraOn:o.cameraOff,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onToggleMicrophone(e){l.sendData({tool:i.im,category:n.call,event:e.muted?o.micOff:o.micOn,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onClickUser(e){l.sendData({tool:i.im,category:n.call,event:o.clickUserFrame,type:e.callType,c_section:r.callWindow,c_sub_section:e.layout.toLowerCase(),p5:`callId_${e.callId}`})}onFloorRequest(e){l.sendData({tool:i.im,category:n.call,event:o.handOn,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onShowChat(e){l.sendData({tool:i.im,category:n.call,event:o.clickChat,type:e.callType,c_section:r.callWindow,p5:`callId_${e.callId}`})}onDocumentBtnClick(e){l.sendData({tool:i.im,category:n.callDocs,event:o.click,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentCreate(e){l.sendData({tool:i.im,category:n.callDocs,event:o.create,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentClose(e){l.sendData({tool:i.im,category:n.callDocs,event:o.save,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onDocumentUpload(e){l.sendData({tool:i.im,category:n.callDocs,event:o.upload,type:e.type,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}onLastResumeOpen(e){l.sendData({tool:i.im,category:n.callDocs,event:o.openResume,p4:`callType_${e.callType}`,p5:`callId_${e.callId}`})}normalizeChatId(e){if(!e){return 0}if(e.includes("chat")){e=e.replace("chat","")}return e}onChatHeaderStartCallClick(e){const c={tool:i.im,category:n.messenger,event:o.clickCallButton,c_section:r.chatWindow,c_sub_section:d.window,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);c.c_element=babelHelpers.classPrivateFieldLooseBase(this,I)[I](e.callType);if(e.dialog.type===a.ChatType.collab){c.p4=t.getCollabId(e.dialog.chatId)}l.sendData(c)}onContextMenuStartCallClick(e){const c={tool:i.im,category:n.messenger,event:o.clickCallButton,c_section:r.chatWindow,c_sub_section:d.contextMenu,p5:`chatId_${e.context.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.context.type);c.c_element=babelHelpers.classPrivateFieldLooseBase(this,I)[I](e.callType);if(e.context.type===a.ChatType.collab){c.p4=t.getCollabId(e.context.chatId)}l.sendData(c)}onStartConferenceClick(e){l.sendData({tool:i.im,category:n.call,event:o.clickStartConf,type:s.videoconf,c_section:r.chatWindow,c_element:p.startButton,p5:`chatId_${e.chatId}`})}onChatCreationMessageStartCallClick(e){l.sendData({tool:i.im,category:n.messenger,event:o.clickCallButton,type:s.groupCall,c_section:r.chatWindow,c_sub_section:d.window,c_element:p.initialBanner,p5:`chatId_${e.chatId}`})}onRecentStartCallClick(e){l.sendData({tool:i.im,category:n.messenger,event:o.clickCallButton,type:e.isGroupChat?s.groupCall:s.privateCall,c_section:r.chatList,c_sub_section:d.contextMenu,c_element:p.videocall,p5:`chatId_${e.chatId}`})}onChatStartConferenceClick(e){l.sendData({tool:i.im,category:n.call,event:o.clickStartConf,type:s.videoconf,c_section:r.chatWindow,c_element:p.initialBanner,p5:`chatId_${e.chatId}`})}onJoinConferenceClick(e){l.sendData({tool:i.im,category:n.call,event:o.clickJoin,type:s.videoconf,c_section:r.chatList,p5:`callId_${e.callId}`})}onStartCallMessageClick(e){const c={tool:i.im,category:n.messenger,event:o.clickCallButton,c_section:r.callMessage,c_element:p.startMessage,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);if(e.dialog.type===a.ChatType.collab){c.p4=t.getCollabId(e.dialog.chatId)}l.sendData(c)}onFinishCallMessageClick(e){const c={tool:i.im,category:n.messenger,event:o.clickCallButton,c_section:r.callMessage,c_element:p.finishMessage,p5:`chatId_${e.dialog.chatId}`};c.type=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e.dialog.type);if(e.dialog.type===a.ChatType.collab){c.p4=t.getCollabId(e.dialog.chatId)}l.sendData(c)}}function g(e){return e===c.CallTypes.video.id?p.videocall:p.audiocall}function O(e){return e===a.ChatType.user?s.private:s.group}Object.defineProperty(b,v,{writable:true,value:void 0});b.AnalyticsType=s;b.AnalyticsStatus=_;b.AnalyticsSection=r;b.AnalyticsElement=p;b.AnalyticsSubSection=d;e.Analytics=b})(this.BX.Call.Lib=this.BX.Call.Lib||{},BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Call.Const);
//# sourceMappingURL=analytics.bundle.map.js