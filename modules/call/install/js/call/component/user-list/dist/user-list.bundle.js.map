{"version":3,"file":"user-list.bundle.js","sources":["../src/user-list.js"],"sourcesContent":["import { CallLoader } from 'call.component.elements';\nimport { UserListPopup } from 'call.component.user-list-popup';\n\nimport './css/user-list.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const UserList = {\n\tname: 'UserList',\n\tcomponents: { CallLoader, UserListPopup },\n\tprops:\n\t{\n\t\tusersData: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tloading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\thasError: false,\n\t\t\tisLoadingUsers: false,\n\t\t\tshowPopup: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tisLoading(): boolean\n\t\t{\n\t\t\treturn this.loading || this.isLoadingUsers;\n\t\t},\n\t\tdisplayedUsers()\n\t\t{\n\t\t\tconst maxDisplayCount = 5;\n\t\t\tconst usersToShow = this.usersData.slice(0, maxDisplayCount);\n\t\t\tconst remainingCount = this.usersData.length - maxDisplayCount;\n\n\t\t\tif (remainingCount > 0) {\n\t\t\t\tusersToShow.push({ remainingCount });\n\t\t\t}\n\n\t\t\treturn usersToShow;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tbackgroundStyle(user): {backgroundColor: string}\n\t\t{\n\t\t\treturn {\n\t\t\t\tbackgroundColor: user.color,\n\t\t\t};\n\t\t},\n\t\tshowUsersPopup()\n\t\t{\n\t\t\tthis.showPopup = true;\n\t\t},\n\t\tonClosePopup()\n\t\t{\n\t\t\tthis.showPopup = false;\n\t\t}\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-call-user-list-component bx-call-user-list-component-scope\" ref=\"users-popup-bind\" @click=\"showUsersPopup\">\n\t\t\t<template v-if=\"!isLoading && !hasError\">\n\t\t\t\t<div  v-for=\"user in displayedUsers\" :key=\"user.id || 'remaining'\" class=\"bx-call-user-list-component__user-item\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tv-if=\"user.avatar\"\n\t\t\t\t\t\t:src=\"encodeURI(user.avatar)\"\n\t\t\t\t\t\t:alt=\"user.name\"\n\t\t\t\t\t\tclass=\"bx-call-user-list-component__user-avatar\"\n\t\t\t\t\t\tdraggable=\"false\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-else-if=\"user.name\" class=\"bx-call-user-list-component__user-avatar --icon\" :style=\"backgroundStyle(user)\"></div>\n\n\t\t\t\t\t<div v-else class=\"bx-call-user-list-component__user-avatar --more\">\n\t\t\t\t\t\t+{{ user.remainingCount }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\n\t\t\t<UserListPopup\n\t\t\t\tv-if=\"showPopup\"\n\t\t\t\t:bindElement=\"$refs['users-popup-bind']\"\n\t\t\t\t:loading=\"isLoading\"\n\t\t\t\t:usersData=\"usersData\"\n\t\t\t\t@close=\"onClosePopup\"\n\t\t\t/>\n\t\t\t<CallLoader v-else-if=\"isLoading\" :isLight=\"true\" />\n\t\t</div>\n\t`,\n};\n"],"names":["UserList","name","components","CallLoader","UserListPopup","props","usersData","type","Array","required","loading","Boolean","default","data","hasError","isLoadingUsers","showPopup","computed","isLoading","displayedUsers","maxDisplayCount","usersToShow","slice","remainingCount","length","push","methods","backgroundStyle","user","backgroundColor","color","showUsersPopup","onClosePopup","template"],"mappings":";;;;;;CAOA;AACA,OAAaA,QAAQ,GAAG;GACvBC,IAAI,EAAE,UAAU;GAChBC,UAAU,EAAE;iBAAEC,kCAAU;oBAAEC;IAAe;GACzCC,KAAK,EACL;KACCC,SAAS,EAAE;OACVC,IAAI,EAAEC,KAAK;OACXC,QAAQ,EAAE;MACV;KACDC,OAAO,EAAE;OACRH,IAAI,EAAEI,OAAO;OACbF,QAAQ,EAAE,KAAK;OACfG,OAAO,EAAE;;IAEV;GACDC,IAAI,GACJ;KACC,OAAO;OACNC,QAAQ,EAAE,KAAK;OACfC,cAAc,EAAE,KAAK;OACrBC,SAAS,EAAE;MACX;IACD;GACDC,QAAQ,EAAE;KACTC,SAAS,GACT;OACC,OAAO,IAAI,CAACR,OAAO,IAAI,IAAI,CAACK,cAAc;MAC1C;KACDI,cAAc,GACd;OACC,MAAMC,eAAe,GAAG,CAAC;OACzB,MAAMC,WAAW,GAAG,IAAI,CAACf,SAAS,CAACgB,KAAK,CAAC,CAAC,EAAEF,eAAe,CAAC;OAC5D,MAAMG,cAAc,GAAG,IAAI,CAACjB,SAAS,CAACkB,MAAM,GAAGJ,eAAe;OAE9D,IAAIG,cAAc,GAAG,CAAC,EAAE;SACvBF,WAAW,CAACI,IAAI,CAAC;WAAEF;UAAgB,CAAC;;OAGrC,OAAOF,WAAW;;IAEnB;GACDK,OAAO,EACP;KACCC,eAAe,CAACC,IAAI,EACpB;OACC,OAAO;SACNC,eAAe,EAAED,IAAI,CAACE;QACtB;MACD;KACDC,cAAc,GACd;OACC,IAAI,CAACf,SAAS,GAAG,IAAI;MACrB;KACDgB,YAAY,GACZ;OACC,IAAI,CAAChB,SAAS,GAAG,KAAK;;IAEvB;GACDiB,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BZ,CAAC;;;;;;;;"}