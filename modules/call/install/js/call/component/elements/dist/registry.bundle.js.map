{"version":3,"file":"registry.bundle.js","sources":["../src/popup/popup.js","../src/loader/loader.js","../src/audioplayer/audioplayer.js"],"sourcesContent":["import { Popup, PopupManager, PopupOptions } from 'main.popup';\nimport { Type } from 'main.core';\n\nconst POPUP_CONTAINER_PREFIX = '#popup-window-content-';\nconst POPUP_BORDER_RADIUS = '10px';\n\n// @vue/component\nexport const CallPopupContainer = {\n\tname: 'CallPopupContainer',\n\tprops:\n\t{\n\t\tid: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tconfig: {\n\t\t\ttype: Object,\n\t\t\trequired: false,\n\t\t\tdefault() {\n\t\t\t\treturn {};\n\t\t\t},\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tpopupContainer(): string\n\t\t{\n\t\t\treturn `${POPUP_CONTAINER_PREFIX}${this.id}`;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.instance = this.getPopupInstance();\n\t\tthis.instance.show();\n\t},\n\tmounted()\n\t{\n\t\tthis.instance.adjustPosition({\n\t\t\tforceBindPosition: true,\n\t\t\tposition: this.getPopupConfig().bindOptions.position\n\t\t});\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closePopup();\n\t},\n\tmethods:\n\t{\n\t\tgetPopupInstance(): Popup\n\t\t{\n\t\t\tif (!this.instance)\n\t\t\t{\n\t\t\t\tPopupManager.getPopupById(this.id)?.destroy();\n\n\t\t\t\tthis.instance = new Popup(this.getPopupConfig());\n\t\t\t}\n\n\t\t\treturn this.instance;\n\t\t},\n\t\tgetDefaultConfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tid: this.id,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'bottom',\n\t\t\t\t},\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tclassName: 'bx-call__scope',\n\t\t\t\tcacheable: false,\n\t\t\t\tcloseIcon: false,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tanimation: 'fading',\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: this.closePopup.bind(this),\n\t\t\t\t\tonPopupDestroy: this.closePopup.bind(this),\n\t\t\t\t},\n\t\t\t\tcontentBorderRadius: POPUP_BORDER_RADIUS,\n\t\t\t};\n\t\t},\n\t\tgetPopupConfig(): Object\n\t\t{\n\t\t\tconst defaultConfig = this.getDefaultConfig();\n\t\t\tconst { className = '', offsetTop = defaultConfig.offsetTop, bindOptions = {} } = this.config;\n\n\t\t\tconst combinedClassName = `${defaultConfig.className} ${className}`.trim();\n\t\t\tconst adjustedOffsetTop = (bindOptions.position === 'top' && Type.isNumber(offsetTop))\n\t\t\t\t? offsetTop - 10\n\t\t\t\t: offsetTop;\n\n\t\t\treturn {\n\t\t\t\t...defaultConfig,\n\t\t\t\t...this.config,\n\t\t\t\tclassName: combinedClassName,\n\t\t\t\toffsetTop: adjustedOffsetTop\n\t\t\t};\n\t\t},\n\t\tclosePopup()\n\t\t{\n\t\t\tthis.$emit('close');\n\t\t\tthis.instance.destroy();\n\t\t\tthis.instance = null;\n\t\t},\n\t\tenableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(true);\n\t\t},\n\t\tdisableAutoHide()\n\t\t{\n\t\t\tthis.getPopupInstance().setAutoHide(false);\n\t\t},\n\t\tadjustPosition()\n\t\t{\n\t\t\tthis.getPopupInstance().adjustPosition({\n\t\t\t\tforceBindPosition: true,\n\t\t\t\tposition: this.getPopupConfig().bindOptions.position\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Teleport :to=\"popupContainer\">\n\t\t\t<slot\n\t\t\t\t:adjustPosition=\"adjustPosition\"\n\t\t\t\t:enableAutoHide=\"enableAutoHide\"\n\t\t\t\t:disableAutoHide=\"disableAutoHide\"\n\t\t\t></slot>\n\t\t</Teleport>\n\t`,\n};\n","import { Loader } from 'ui.loader';\nimport './loader.css';\n\nconst LOADER_SIZE = 'xs';\nconst LOADER_TYPE = 'BULLET';\n\n// @vue/component\nexport const CallLoader = {\n\tname: 'CallLoader',\n\tprops:\n\t{\n\t\tisLight: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tcomputed: {\n\t\tloaderStyle(): boolean\n\t\t{\n\t\t\treturn this.isLight ? 'rgba(255, 255, 255, 0.24)' : '';\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.loader = new Loader({\n\t\t\ttarget: this.$refs['call-loader'],\n\t\t\ttype: LOADER_TYPE,\n\t\t\tsize: LOADER_SIZE,\n\t\t\tcolor: this.loaderStyle,\n\t\t});\n\t\tthis.loader.render();\n\t\tthis.loader.show();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.loader.hide();\n\t\tthis.loader = null;\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-call-elements-loader__container\" ref=\"call-loader\"></div>\n\t`,\n};\n","import { BitrixVue } from 'ui.vue3';\nimport { AudioPlayer as UIAudioPlayer, AudioPlayerState } from 'ui.vue3.components.audioplayer';\nimport { Dom, bind, unbind, Type } from 'main.core';\n\nimport './audioplayer.css';\n\nconst defaultPlaybackRateValues = [0.5, 0.7, 1.0, 1.2, 1.5, 1.7, 2.0];\n// @vue/component\nexport const AudioPlayer = BitrixVue.cloneComponent(UIAudioPlayer, {\n\tname: 'AudioPlayer',\n\tcomponents: { },\n\tprops: {\n\t\tcontext: {\n\t\t\trequired: false,\n\t\t\tdefault: window,\n\t\t},\n\t\tplaybackRateValues: {\n\t\t\ttype: Array,\n\t\t\trequired: false,\n\t\t\tdefault: () => defaultPlaybackRateValues,\n\t\t},\n\t\tisShowPlaybackRateMenu: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\tanalyticsCallback: {\n\t\t\ttype: Function,\n\t\t\trequired: false,\n\t\t\tdefault: () => {},\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\t...this.parentData(),\n\t\t\tplaybackRate: defaultPlaybackRateValues[2],\n\t\t\tisSeeking: true,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tprogressPosition()\n\t\t{\n\t\t\treturn { width: `${this.progressInPixel}px` };\n\t\t},\n\t\tseekPosition(): string\n\t\t{\n\t\t\tconst minSeekWidth = 20;\n\t\t\tconst seekWidth = this.$refs.seek?.offsetWidth ?? minSeekWidth;\n\n\t\t\treturn this.progressInPixel\n\t\t\t\t? `left: ${this.progressInPixel - (seekWidth / 2)}px;`\n\t\t\t\t: `left: ${this.progressInPixel - 2}px`;\n\t\t},\n\t\tplaybackRateMenuItems(): Array\n\t\t{\n\t\t\treturn this.playbackRateValues.map((rate) => {\n\t\t\t\treturn this.createPlaybackRateMenuItem({\n\t\t\t\t\ttext: this.getPlaybackRateOptionText(rate),\n\t\t\t\t\trate,\n\t\t\t\t\tisActive: rate === this.playbackRate,\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tformatTimeCurrent(): string\n\t\t{\n\t\t\treturn this.formatTime(this.timeCurrent);\n\t\t},\n\t\tformatTimeTotal(): string\n\t\t{\n\t\t\treturn this.formatTime(this.timeTotal);\n\t\t},\n\t},\n\tmethods: {\n\t\tchoosePlaybackTime(seconds)\n\t\t{\n\t\t\tif (!this.source())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.source().currentTime = seconds;\n\t\t\tthis.audioEventRouter('timeupdate');\n\n\t\t\tif (this.state !== AudioPlayerState.play)\n\t\t\t{\n\t\t\t\tthis.clickToButton();\n\t\t\t}\n\t\t},\n\t\tstartSeeking(event): void\n\t\t{\n\t\t\tthis.isSeeking = true;\n\t\t\tconst { clientX } = event;\n\n\t\t\tif (this.source())\n\t\t\t{\n\t\t\t\tthis.source().pause();\n\n\t\t\t\tbind(this.context.document, 'mouseup', this.finishSeeking);\n\t\t\t\tbind(this.context.document, 'mousemove', this.seeking);\n\n\t\t\t\tthis.setSeekByCursor(clientX);\n\t\t\t}\n\t\t},\n\t\tseeking(event): void\n\t\t{\n\t\t\tif (!this.isSeeking)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst { clientX } = event;\n\t\t\tconst { left, right, width } = Dom.getPosition(timeline);\n\n\t\t\tthis.seek = Math.max(0, Math.min(clientX - left, width - 1));\n\n\t\t\tthis.setPosition();\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tfinishSeeking(): void\n\t\t{\n\t\t\tthis.isSeeking = false;\n\t\t\tthis.setPosition();\n\t\t\tif (this.source())\n\t\t\t{\n\t\t\t\tthis.source().play();\n\n\t\t\t\tunbind(this.context.document, 'mouseup', this.finishSeeking);\n\t\t\t\tunbind(this.context.document, 'mousemove', this.seeking);\n\t\t\t}\n\t\t},\n\t\tsetPosition(): void\n\t\t{\n\t\t\tif (!this.loaded)\n\t\t\t{\n\t\t\t\tthis.loadFile(true);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst pixelPerPercent = this.$refs.track.offsetWidth / 100;\n\t\t\tthis.setProgress(this.seek / pixelPerPercent, this.seek);\n\t\t\tthis.source().currentTime = this.timeTotal / 100 * this.progress;\n\t\t},\n\t\tsetProgress(percent, pixel = -1): void\n\t\t{\n\t\t\tthis.progress = Number.isNaN(percent) ? 0 : percent;\n\t\t\tthis.progressInPixel = pixel > 0 ? pixel : Math.round(this.$refs.track.offsetWidth / 100 * percent);\n\t\t},\n\t\tsetSeekByCursor(x: number): void\n\t\t{\n\t\t\tconst timeline = this.$refs.track;\n\t\t\tconst { left, width } = Dom.getPosition(timeline);\n\n\t\t\tthis.seek = Math.max(0, Math.min(x - left, width));\n\t\t},\n\t\tshowPlaybackRateMenu(): void {\n\t\t\tif (this.menu && this.menu.getPopupWindow().isShown()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { BX } = this.context;\n\t\t\tconst bindElement = this.$refs.playbackRateButtonContainer;\n\n\t\t\tthis.menu = new BX.Main.Menu({\n\t\t\t\tid: `bx-call-audio-player-${this.id}`,\n\t\t\t\tclassName: 'bx-call-audio-player__playback-speed-menu_scope',\n\t\t\t\twidth: 100,\n\t\t\t\tbindElement,\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tconst { width: btnContainerWidth } = Dom.getPosition(bindElement);\n\t\t\t\t\t\tconst popupWindow = this.menu.getPopupWindow();\n\n\t\t\t\t\t\tpopupWindow.setOffset({ offsetLeft: btnContainerWidth / 2 });\n\t\t\t\t\t\tpopupWindow.adjustPosition();\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tthis.menu.destroy();\n\t\t\t\t\t\tthis.menu = null;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tangle: { position: 'top' },\n\t\t\t\toffsetLeft: 0,\n\t\t\t\titems: this.playbackRateMenuItems,\n\t\t\t});\n\n\t\t\tthis.menu.show();\n\t\t},\n\t\tgetPlaybackRateOptionText(rate: number): string\n\t\t{\n\t\t\treturn Type.isFloat(rate) ? `${rate}x` : `${rate}.0x`;\n\t\t},\n\t\tcreatePlaybackRateMenuItem({ rate = 1, text = '', isActive = false } = {}): Object\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext,\n\t\t\t\tclassName: `bx-call-audio-player__playback-speed-menu-item ${isActive ? 'menu-popup-item-accept-sm' : ''}`,\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.changePlaybackRate(rate);\n\t\t\t\t\titem.menuWindow.popupWindow.close();\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tchangePlaybackRate(playbackRate: number): void\n\t\t{\n\t\t\tthis.playbackRate = playbackRate;\n\t\t\tif (this.$refs?.source?.playbackRate)\n\t\t\t{\n\t\t\t\tthis.$refs.source.playbackRate = playbackRate;\n\t\t\t}\n\t\t},\n\t\tonClickControlButton()\n\t\t{\n\t\t\tif (this.state !== AudioPlayerState.play)\n\t\t\t{\n\t\t\t\tthis.analyticsCallback();\n\t\t\t}\n\n\t\t\tthis.clickToButton();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"bx-call-audio-player__container bx-call-audio-player__scope\" \n\t\t\tref=\"body\"\n\t\t>\n\t\t\t<div class=\"bx-call-audio-player__control-container\">\n\t\t\t\t<button :class=\"['bx-call-audio-player__control-button', {\n\t\t\t\t\t'bx-call-audio-player__control-loader': loading,\n\t\t\t\t\t'bx-call-audio-player__control-play': !loading && state !== State.play,\n\t\t\t\t\t'bx-call-audio-player__control-pause': !loading && state === State.play,\n\t\t\t\t}]\" @click=\"onClickControlButton\"></button>\n\t\t\t</div>\n\t\t\t<div class=\"bx-call-audio-player__timeline-container\">\n\t\t\t\t<div class=\"bx-call-audio-player__track-container\" @mousedown=\"startSeeking\" ref=\"track\">\n\t\t\t\t\t<div class=\"bx-call-audio-player__track-mask\">\n\t\t\t\t\t\t<div v-for=\"n in 7\" :key=\"n\" class=\"bx-call-audio-player__track-mask-separator\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-call-audio-player__track-mask --active\" :style=\"progressPosition\"></div>\n\t\t\t\t\t<div class=\"bx-call-audio-player__track-seek\" @mousedown=\"startSeeking\" :style=\"seekPosition\">\n\t\t\t\t\t\t<div ref=\"seek\" class=\"bx-call-audio-player__track-seek-icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-call-audio-player__timer-container\">\n\t\t\t\t\t<span>{{formatTimeCurrent}}</span>\n\t\t\t\t\t<span>{{formatTimeTotal}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div\n\t\t\t\t@click=\"showPlaybackRateMenu\"\n\t\t\t\tref=\"playbackRateButtonContainer\"\n\t\t\t\tclass=\"bx-call-audio-player__playback-speed-menu-container\"\n\t\t\t\tstyle=\"user-select: none;\"\n\t\t\t>\n\t\t\t\t{{ getPlaybackRateOptionText(playbackRate) }}\n\t\t\t</div>\n\t\t\t<audio \n\t\t\t\tv-if=\"src\" \n\t\t\t\t:src=\"src\" \n\t\t\t\tclass=\"bx-call-audio-player__audio-source\" \n\t\t\t\tref=\"source\" \n\t\t\t\t:preload=\"preload\"\n\t\t\t\t@abort=\"audioEventRouter('abort', $event)\"\n\t\t\t\t@error=\"audioEventRouter('error', $event)\"\n\t\t\t\t@suspend=\"audioEventRouter('suspend', $event)\"\n\t\t\t\t@canplay=\"audioEventRouter('canplay', $event)\"\n\t\t\t\t@canplaythrough=\"audioEventRouter('canplaythrough', $event)\"\n\t\t\t\t@durationchange=\"audioEventRouter('durationchange', $event)\"\n\t\t\t\t@loadeddata=\"audioEventRouter('loadeddata', $event)\"\n\t\t\t\t@loadedmetadata=\"audioEventRouter('loadedmetadata', $event)\"\n\t\t\t\t@timeupdate=\"audioEventRouter('timeupdate', $event)\"\n\t\t\t\t@play=\"audioEventRouter('play', $event)\"\n\t\t\t\t@playing=\"audioEventRouter('playing', $event)\"\n\t\t\t\t@pause=\"audioEventRouter('pause', $event)\"\n\t\t\t></audio>\n\t\t</div>\n\t`,\n});\n"],"names":["POPUP_CONTAINER_PREFIX","POPUP_BORDER_RADIUS","CallPopupContainer","name","props","id","type","String","required","config","Object","default","emits","computed","popupContainer","created","instance","getPopupInstance","show","mounted","adjustPosition","forceBindPosition","position","getPopupConfig","bindOptions","beforeUnmount","closePopup","methods","PopupManager","getPopupById","destroy","Popup","getDefaultConfig","offsetTop","offsetLeft","className","cacheable","closeIcon","autoHide","closeByEsc","animation","events","onPopupClose","bind","onPopupDestroy","contentBorderRadius","defaultConfig","combinedClassName","trim","adjustedOffsetTop","Type","isNumber","$emit","enableAutoHide","setAutoHide","disableAutoHide","template","LOADER_SIZE","LOADER_TYPE","CallLoader","isLight","Boolean","loaderStyle","loader","Loader","target","$refs","size","color","render","hide","defaultPlaybackRateValues","AudioPlayer","BitrixVue","cloneComponent","UIAudioPlayer","components","context","window","playbackRateValues","Array","isShowPlaybackRateMenu","analyticsCallback","Function","data","parentData","playbackRate","isSeeking","progressPosition","width","progressInPixel","seekPosition","minSeekWidth","seekWidth","seek","offsetWidth","playbackRateMenuItems","map","rate","createPlaybackRateMenuItem","text","getPlaybackRateOptionText","isActive","formatTimeCurrent","formatTime","timeCurrent","formatTimeTotal","timeTotal","choosePlaybackTime","seconds","source","currentTime","audioEventRouter","state","AudioPlayerState","play","clickToButton","startSeeking","event","clientX","pause","document","finishSeeking","seeking","setSeekByCursor","timeline","track","left","right","Dom","getPosition","Math","max","min","setPosition","preventDefault","unbind","loaded","loadFile","pixelPerPercent","setProgress","progress","percent","pixel","Number","isNaN","round","x","showPlaybackRateMenu","menu","getPopupWindow","isShown","BX","bindElement","playbackRateButtonContainer","Main","Menu","onPopupShow","btnContainerWidth","popupWindow","setOffset","angle","items","isFloat","onclick","item","changePlaybackRate","menuWindow","close","onClickControlButton"],"mappings":"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"}