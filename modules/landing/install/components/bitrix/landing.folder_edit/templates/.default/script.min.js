this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,t){"use strict";function a(e,t){l(e,t);t.add(e)}function i(e,t,a){l(e,t);t.set(e,a)}function l(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function s(e,t,a){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return a}var r=new WeakMap;var n=new WeakMap;var b=new WeakMap;var v=new WeakMap;var d=new WeakMap;var c=new WeakMap;var h=new WeakMap;var u=new WeakMap;var p=new WeakMap;var o=new WeakMap;var P=new WeakMap;var F=new WeakMap;var w=new WeakMap;var H=new WeakMap;var I=new WeakMap;var G=new WeakMap;var S=new WeakMap;var A=new WeakMap;var k=new WeakMap;var L=new WeakSet;var E=new WeakSet;var D=new WeakSet;var M=new WeakSet;var T=new WeakSet;var f=new WeakSet;var g=function e(l){babelHelpers.classCallCheck(this,e);a(this,f);a(this,T);a(this,M);a(this,D);a(this,E);a(this,L);i(this,r,{writable:true,value:void 0});i(this,n,{writable:true,value:void 0});i(this,b,{writable:true,value:void 0});i(this,v,{writable:true,value:void 0});i(this,d,{writable:true,value:void 0});i(this,c,{writable:true,value:void 0});i(this,h,{writable:true,value:void 0});i(this,u,{writable:true,value:void 0});i(this,p,{writable:true,value:void 0});i(this,o,{writable:true,value:void 0});i(this,P,{writable:true,value:void 0});i(this,F,{writable:true,value:void 0});i(this,w,{writable:true,value:void 0});i(this,H,{writable:true,value:void 0});i(this,I,{writable:true,value:void 0});i(this,G,{writable:true,value:void 0});i(this,S,{writable:true,value:void 0});i(this,A,{writable:true,value:void 0});i(this,k,{writable:true,value:"/bitrix/services/main/ajax.php?action=landing.api.landing.getById&landingId=#id#"});babelHelpers.classPrivateFieldSet(this,r,l.siteId);babelHelpers.classPrivateFieldSet(this,n,l.siteType);babelHelpers.classPrivateFieldSet(this,b,l.folderId);babelHelpers.classPrivateFieldSet(this,v,l.selectorCreateIndex);babelHelpers.classPrivateFieldSet(this,d,l.selectorIndexMetaBlock);babelHelpers.classPrivateFieldSet(this,c,l.selectorSelect);babelHelpers.classPrivateFieldSet(this,h,l.selectorPageLink);babelHelpers.classPrivateFieldSet(this,u,l.selectorFieldId);babelHelpers.classPrivateFieldSet(this,p,l.selectorPreviewBlock);babelHelpers.classPrivateFieldSet(this,o,l.selectorPreviewTitle);babelHelpers.classPrivateFieldSet(this,P,l.selectorPreviewDescription);babelHelpers.classPrivateFieldSet(this,F,l.selectorPreviewPicture);babelHelpers.classPrivateFieldSet(this,w,l.selectorPreviewSrcPicture);babelHelpers.classPrivateFieldSet(this,H,l.selectorPreviewPictureWrapper);babelHelpers.classPrivateFieldSet(this,I,l.pathToLandingEdit);babelHelpers.classPrivateFieldSet(this,G,l.pathToLandingCreate);s(this,L,W).call(this);s(this,E,B).call(this);t.Event.bind(babelHelpers.classPrivateFieldGet(this,c),"click",s(this,M,_).bind(this));if(babelHelpers.classPrivateFieldGet(this,v)){t.Event.bind(babelHelpers.classPrivateFieldGet(this,v),"click",s(this,T,y).bind(this))}};function W(){babelHelpers.classPrivateFieldSet(this,S,new BX.Landing.UI.Field.LinkURL({title:null,content:null,allowedTypes:[BX.Landing.UI.Field.LinkURL.TYPE_PAGE],options:{siteId:babelHelpers.classPrivateFieldGet(this,r),currentSiteOnly:true,disableAddPage:true,landingId:-1,filter:{ID:babelHelpers.classPrivateFieldGet(this,r),"=TYPE":babelHelpers.classPrivateFieldGet(this,n)},filterLanding:{FOLDER_ID:babelHelpers.classPrivateFieldGet(this,b)}},onInput:s(this,D,O).bind(this)}))}function B(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,w)){return}babelHelpers.classPrivateFieldSet(this,A,new BX.Landing.UI.Field.Image({id:"folderPicture",disableLink:true,disableAltField:true,allowClear:true,content:{src:babelHelpers.classPrivateFieldGet(this,w).getAttribute("value"),id:babelHelpers.classPrivateFieldGet(this,F).getAttribute("value")},uploadParams:{action:"Site::uploadFile",id:babelHelpers.classPrivateFieldGet(this,r)},dimensions:{width:1200,height:1200}}));t.Dom.clean(babelHelpers.classPrivateFieldGet(this,H));t.Dom.append(babelHelpers.classPrivateFieldGet(this,A)["layout"],babelHelpers.classPrivateFieldGet(this,H));babelHelpers.classPrivateFieldGet(this,A)["layout"].addEventListener("input",function(){var t=babelHelpers.classPrivateFieldGet(e,A).getValue();babelHelpers.classPrivateFieldGet(e,F).setAttribute("value",t["id2x"])})}function O(e){var t=babelHelpers.classPrivateFieldGet(this,S).getValue().substr(8);var a=babelHelpers.classPrivateFieldGet(this,I).replace("#landing_edit#",t);babelHelpers.classPrivateFieldGet(this,h).text=e;babelHelpers.classPrivateFieldGet(this,h).setAttribute("href",a);babelHelpers.classPrivateFieldGet(this,u).setAttribute("value",t);s(this,f,C).call(this,t)}function _(){babelHelpers.classPrivateFieldGet(this,S).onSelectButtonClick()}function y(e){BX.SidePanel.Instance.open(babelHelpers.classPrivateFieldGet(this,G),{allowChangeHistory:false,events:{onClose:function e(){window.location.reload()}}});BX.PreventDefault(e)}function C(e){var t=this;babelHelpers.classPrivateFieldGet(this,p).style.display="block";babelHelpers.classPrivateFieldGet(this,d).style.display="flex";BX.ajax({url:babelHelpers.classPrivateFieldGet(this,k).replace("#id#",e),method:"GET",dataType:"json",onsuccess:function e(a){var i=a.data;if(!i["ADDITIONAL_FIELDS"]){return}var l=i["ADDITIONAL_FIELDS"]["METAOG_TITLE"]||i["TITLE"];var s=i["ADDITIONAL_FIELDS"]["METAOG_DESCRIPTION"]||i["DESCRIPTION"]||"";babelHelpers.classPrivateFieldGet(t,o).setAttribute("value",l);babelHelpers.classPrivateFieldGet(t,P).setAttribute("value",s);babelHelpers.classPrivateFieldGet(t,F).setAttribute("value","");babelHelpers.classPrivateFieldGet(t,F).setAttribute("value",i["ADDITIONAL_FIELDS"]["~METAOG_IMAGE"]||"");babelHelpers.classPrivateFieldGet(t,w).setAttribute("value",i["ADDITIONAL_FIELDS"]["METAOG_IMAGE"]||"");babelHelpers.classPrivateFieldGet(t,A).setValue({src:i["ADDITIONAL_FIELDS"]["METAOG_IMAGE"]||"",id:i["ADDITIONAL_FIELDS"]["~METAOG_IMAGE"]||-1})}})}e.FolderEdit=g})(this.BX.Landing.Component=this.BX.Landing.Component||{},BX);
//# sourceMappingURL=script.map.js