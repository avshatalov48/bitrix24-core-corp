{"version":3,"file":"script.js","sources":["src/js/landing.pub.top.panel.js"],"sourcesContent":["import {Event, Cache, Dom, Type} from 'main.core';\nimport {SliderHacks} from 'landing.sliderhacks';\n\nconst onEditButtonClick = Symbol('onEditButtonClick');\n\nexport class TopPanel\n{\n\tconstructor()\n\t{\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis[onEditButtonClick] = this[onEditButtonClick].bind(this);\n\n\t\tEvent.bind(this.getEditButton(), 'click', this[onEditButtonClick]);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn document.querySelector('.landing-pub-top-panel');\n\t\t});\n\t}\n\n\tgetEditButton(): HTMLAnchorElement\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-pub-top-panel-edit-button');\n\t\t});\n\t}\n\n\t[onEditButtonClick](event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst href = Dom.attr(event.currentTarget, 'href');\n\n\t\tif (Type.isString(href) && href !== '')\n\t\t{\n\t\t\tthis.openSlider(href);\n\t\t}\n\t}\n\n\topenSlider(url)\n\t{\n\t\tBX.SidePanel.Instance.open(url, {\n\t\t\tcacheable: false,\n\t\t\tcustomLeftBoundary: 240,\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonClose() {\n\t\t\t\t\tvoid SliderHacks.reloadSlider(window.location.toString());\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n}"],"names":["onEditButtonClick","Symbol","TopPanel","cache","Cache","MemoryCache","bind","Event","getEditButton","remember","document","querySelector","getLayout","event","preventDefault","href","Dom","attr","currentTarget","Type","isString","openSlider","url","BX","SidePanel","Instance","open","cacheable","customLeftBoundary","allowChangeHistory","events","onClose","SliderHacks","reloadSlider","window","location","toString"],"mappings":";;;;;CAGA,IAAMA,iBAAiB,GAAGC,MAAM,CAAC,mBAAD,CAAhC;KAEaC,QAAb;CAAA;CAAA;CAEC,sBACA;CAAA;CACC,SAAKC,KAAL,GAAa,IAAIC,eAAK,CAACC,WAAV,EAAb;CACA,SAAKL,iBAAL,IAA0B,KAAKA,iBAAL,EAAwBM,IAAxB,CAA6B,IAA7B,CAA1B;CAEAC,IAAAA,eAAK,CAACD,IAAN,CAAW,KAAKE,aAAL,EAAX,EAAiC,OAAjC,EAA0C,KAAKR,iBAAL,CAA1C;CACA;;CARF;CAAA;CAAA,gCAWC;CACC,aAAO,KAAKG,KAAL,CAAWM,QAAX,CAAoB,QAApB,EAA8B,YAAM;CAC1C,eAAOC,QAAQ,CAACC,aAAT,CAAuB,wBAAvB,CAAP;CACA,OAFM,CAAP;CAGA;CAfF;CAAA;CAAA,oCAkBC;CAAA;;CACC,aAAO,KAAKR,KAAL,CAAWM,QAAX,CAAoB,YAApB,EAAkC,YAAM;CAC9C,eAAO,KAAI,CAACG,SAAL,GAAiBD,aAAjB,CAA+B,oCAA/B,CAAP;CACA,OAFM,CAAP;CAGA;CAtBF;CAAA,SAwBEX,iBAxBF;CAAA,0BAwBqBa,KAxBrB,EAyBC;CACCA,MAAAA,KAAK,CAACC,cAAN;CAEA,UAAMC,IAAI,GAAGC,aAAG,CAACC,IAAJ,CAASJ,KAAK,CAACK,aAAf,EAA8B,MAA9B,CAAb;;CAEA,UAAIC,cAAI,CAACC,QAAL,CAAcL,IAAd,KAAuBA,IAAI,KAAK,EAApC,EACA;CACC,aAAKM,UAAL,CAAgBN,IAAhB;CACA;CACD;CAlCF;CAAA;CAAA,+BAoCYO,GApCZ,EAqCC;CACCC,MAAAA,EAAE,CAACC,SAAH,CAAaC,QAAb,CAAsBC,IAAtB,CAA2BJ,GAA3B,EAAgC;CAC/BK,QAAAA,SAAS,EAAE,KADoB;CAE/BC,QAAAA,kBAAkB,EAAE,GAFW;CAG/BC,QAAAA,kBAAkB,EAAE,KAHW;CAI/BC,QAAAA,MAAM,EAAE;CACPC,UAAAA,OADO,qBACG;CACT,iBAAKC,+BAAW,CAACC,YAAZ,CAAyBC,MAAM,CAACC,QAAP,CAAgBC,QAAhB,EAAzB,CAAL;CACA;CAHM;CAJuB,OAAhC;CAUA;CAhDF;CAAA;CAAA;;;;;;;;"}