var landingAjaxSend=false;var scriptIsLoaded=false;BX.ready(function(){var n=BX("landing-create-folder");var e=BX("landing-recycle-bin");if(scriptIsLoaded){return}scriptIsLoaded=true;BX.bind(e,"click",function(){var n=BX.Main.filterManager.getById(landingFilterId),e=n.getApi(),t=n.getFilterFieldsValues();if(t.DELETED==="Y"){t.DELETED=""}else{t.DELETED="Y"}e.setFields(t);e.apply()});BX.addCustomEvent("BX.Main.Filter:apply",function(){if(landingAjaxSend){return}landingAjaxSend=true;var n=BX("workarea-content");var e=BX.create("div",{attrs:{className:"landing-filter-loading"}});document.body.appendChild(e);var t=new BX.Loader({size:130,color:"#bfc3c8"});t.show(e);BX.ajax({method:"POST",dataType:"html",url:landingAjaxPath,onsuccess:function(i){landingAjaxSend=false;t.hide();e.classList.add("landing-filter-loading-hide");n.innerHTML=i}})});BX.bind(n,"click",function(){if(BX.hasClass(n,"ui-btn-disabled")){return}var e=BX.create("input",{props:{type:"text",className:"landing-filter-folder-input"}});BX.focus(e);BX.Landing.UI.Tool.ActionDialog.getInstance().show({title:n.getAttribute("title"),content:e,confirm:BX.data(n,"action")}).then(function(){BX.ajax({url:"/bitrix/tools/landing/ajax.php?action=Landing::add&folder=Y",method:"POST",data:{data:{fields:{TITLE:e.value,FOLDER:"Y",SITE_ID:BX.data(n,"siteId")}},sessid:BX.message("bitrix_sessid")},dataType:"json",onsuccess:function(e){if(typeof e.type!=="undefined"&&typeof e.result!=="undefined"){if(e.type==="error"){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();t.show({content:e.result[0].error_description,confirm:"OK",type:"alert"}).then(function(){BX.fireEvent(n,"click")})}else{var i=BX.util.add_url_param(window.location.href,{folderId:e.result});window.location.href=i}}}})},function(n){})});var t=function(n){if(!Array.isArray(landingSettingsButtons)){return}var e=top.location.toString();var t={onClose:function(){if(window["landingSettingsSaved"]===true){top.location=e}if(BX.PopupMenu.getCurrentMenu()){BX.PopupMenu.getCurrentMenu().close()}}};if(landingSettingsButtons.length===1){BX.SidePanel.Instance.open(landingSettingsButtons[0]["href"],{allowChangeHistory:false,events:t})}else{for(var i=0,a=landingSettingsButtons.length;i<a;i++){landingSettingsButtons[i]["onclick"]=function(n,e){BX.SidePanel.Instance.open(e.href,{allowChangeHistory:false,events:t});BX.PreventDefault(n)}}var l=BX.PopupMenu.getMenuById("landing-menu-settings")||new BX.Landing.UI.Tool.Menu({id:"landing-menu-settings",bindElement:n.currentTarget,autoHide:true,zIndex:1200,offsetLeft:20,angle:true,closeByEsc:true,items:landingSettingsButtons});l.show()}BX.PreventDefault(n)};if(BX("landing-menu-settings")){BX("landing-menu-settings").addEventListener("click",BX.proxy(t,BX("landing-menu-settings")))}var i=function(n){if(BX.hasClass(BX("landing-create-element"),"ui-btn-disabled")){BX.PreventDefault(n);return}var e=BX.PopupMenu.getMenuById("landing-menu-action")||new BX.Landing.UI.Tool.Menu({id:"landing-menu-action",bindElement:n.currentTarget,autoHide:true,zIndex:1200,offsetLeft:20,angle:true,closeByEsc:true,items:landingCreateButtons||[]});e.show();BX.PreventDefault(n)};if(BX("landing-menu-actions")){BX("landing-menu-actions").addEventListener("click",BX.proxy(i,BX("landing-menu-actions")))}});
//# sourceMappingURL=script.map.js