var landingAjaxSend=false;var scriptIsLoaded=false;BX.ready(function(){var e=BX("landing-create-folder");var n=BX("landing-recycle-bin");if(scriptIsLoaded){return}scriptIsLoaded=true;BX.bind(n,"click",function(){var e=BX.Main.filterManager.getById(landingFilterId),n=e.getApi(),t=e.getFilterFieldsValues();if(t.DELETED==="Y"){t.DELETED=""}else{t.DELETED="Y"}n.setFields(t);n.apply()});var t=function(){if(landingAjaxSend){return}landingAjaxSend=true;var e=BX("workarea-content");var n=BX.create("div",{attrs:{className:"landing-filter-loading"}});document.body.appendChild(n);var t=new BX.Loader({size:130,color:"#bfc3c8"});t.show(n);BX.ajax({method:"POST",dataType:"html",url:landingAjaxPath,onsuccess:function(a){landingAjaxSend=false;t.hide();n.classList.add("landing-filter-loading-hide");e.innerHTML=a}})};BX.addCustomEvent("BX.Main.Filter:apply",BX.delegate(t));BX.addCustomEvent("BX.Landing.Filter:apply",BX.delegate(t));if(e){BX.bind(e,"click",function(){if(BX.hasClass(e,"ui-btn-disabled")){return}var n=BX.create("input",{props:{type:"text",className:"landing-filter-folder-input"}});BX.focus(n);BX.Landing.UI.Tool.ActionDialog.getInstance().show({title:e.getAttribute("title"),content:n,confirm:BX.data(e,"action")}).then(function(){BX.ajax({url:"/bitrix/tools/landing/ajax.php?"+""+"action=Landing::add&folder=Y&"+"type="+BX.data(e,"type"),method:"POST",data:{data:{fields:{TITLE:n.value,FOLDER:"Y",SITE_ID:BX.data(e,"siteId")}},sessid:BX.message("bitrix_sessid")},dataType:"json",onsuccess:function(n){if(typeof n.type!=="undefined"&&typeof n.result!=="undefined"){if(n.type==="error"){var t=BX.Landing.UI.Tool.ActionDialog.getInstance();t.show({content:n.result[0].error_description,confirm:"OK",type:"alert"}).then(function(){BX.fireEvent(e,"click")})}else{var a=BX.util.add_url_param(window.location.href,{folderId:n.result});window.location.href=a}}}})},function(e){})})}var a=function(e){if(!Array.isArray(landingSettingsButtons)){return}var n=top.location.toString();var t={onClose:function(){if(window["landingSettingsSaved"]===true){top.location=n}if(BX.PopupMenu.getCurrentMenu()){BX.PopupMenu.getCurrentMenu().close()}}};if(landingSettingsButtons.length===1){BX.SidePanel.Instance.open(landingSettingsButtons[0]["href"],{allowChangeHistory:false,events:t})}else{for(var a=0,i=landingSettingsButtons.length;a<i;a++){landingSettingsButtons[a]["onclick"]=function(e,n){BX.SidePanel.Instance.open(n.href,{allowChangeHistory:false,events:t});BX.PreventDefault(e)}}var r=BX.PopupMenu.getMenuById("landing-menu-settings")||BX.Main.MenuManager.create({id:"landing-menu-settings",bindElement:e.currentTarget,autoHide:true,zIndex:1200,offsetLeft:20,angle:true,closeByEsc:true,items:landingSettingsButtons});r.show()}BX.PreventDefault(e)};if(BX("landing-menu-settings")){BX("landing-menu-settings").addEventListener("click",BX.proxy(a,BX("landing-menu-settings")))}var i=function(e){if(BX.hasClass(BX("landing-create-element"),"ui-btn-disabled")){BX.PreventDefault(e);return}var n=BX.PopupMenu.getMenuById("landing-menu-action")||BX.Main.MenuManager.create({id:"landing-menu-action",bindElement:e.currentTarget,autoHide:true,zIndex:1200,offsetLeft:20,angle:true,closeByEsc:true,items:landingCreateButtons||[]});n.show();BX.PreventDefault(e)};if(BX("landing-menu-actions")){BX("landing-menu-actions").addEventListener("click",BX.proxy(i,BX("landing-menu-actions")))}});
//# sourceMappingURL=script.map.js