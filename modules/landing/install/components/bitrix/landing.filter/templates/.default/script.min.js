var landingAjaxSend=false;var scriptIsLoaded=false;BX.ready(function(){var e=BX("landing-create-folder");var n=BX("landing-recycle-bin");if(scriptIsLoaded){return}scriptIsLoaded=true;BX.bind(n,"click",function(){var e=BX.Main.filterManager.getById(landingFilterId),n=e.getApi(),a=e.getFilterFieldsValues();if(a.DELETED==="Y"){a.DELETED=""}else{a.DELETED="Y"}n.setFields(a);n.apply()});BX.addCustomEvent("BX.Main.Filter:apply",function(){if(landingAjaxSend){return}landingAjaxSend=true;var e=BX("workarea-content");var n=BX.create("div",{attrs:{className:"landing-filter-loading"}});document.body.appendChild(n);var a=new BX.Loader({size:130,color:"#bfc3c8"});a.show(n);BX.ajax({method:"POST",dataType:"html",url:landingAjaxPath,onsuccess:function(t){landingAjaxSend=false;a.hide();n.classList.add("landing-filter-loading-hide");e.innerHTML=t}})});BX.bind(e,"click",function(){if(BX.hasClass(e,"ui-btn-disabled")){return}var n=BX.create("input",{props:{type:"text",className:"landing-filter-folder-input"}});BX.focus(n);BX.Landing.UI.Tool.ActionDialog.getInstance().show({title:e.getAttribute("title"),content:n,confirm:BX.data(e,"action")}).then(function(){BX.ajax({url:"/bitrix/tools/landing/ajax.php?action=Landing::add&folder=Y",method:"POST",data:{data:{fields:{TITLE:n.value,FOLDER:"Y",SITE_ID:BX.data(e,"siteId")}},sessid:BX.message("bitrix_sessid")},dataType:"json",onsuccess:function(n){if(typeof n.type!=="undefined"&&typeof n.result!=="undefined"){if(n.type==="error"){var a=BX.Landing.UI.Tool.ActionDialog.getInstance();a.show({content:n.result[0].error_description,confirm:"OK",type:"alert"}).then(function(){BX.fireEvent(e,"click")})}else{var t=BX.util.add_url_param(window.location.href,{folderId:n.result});window.location.href=t}}}})},function(e){})})});
//# sourceMappingURL=script.map.js