(function(){"use strict";BX.namespace("BX.Landing.OnscrollAnimationHelper");if(BX.browser.IsMobile()){return}BX.Landing.OnscrollAnimationHelper.observer=new IntersectionObserver(c);BX.Landing.OnscrollAnimationHelper.animatedMap=new WeakMap;var n=BX.Landing.Utils.addClass;var e=BX.Landing.Utils.removeClass;var i=BX.Landing.Utils.hasClass;var a=BX.Landing.Utils.style;var o=BX.Landing.Utils.isPlainObject;var t=BX.Type.isArray;var l=BX.Landing.Utils.onAnimationEnd;var r=BX.Landing.Utils.slice;var d=BX.Landing.Utils.onCustomEvent;var s;d("BX.Landing.Block:init",(function(n){s=Date.now();if(BX.hasClass(n.block,"landing-designer-block-mode")){return}var e=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n.block);e.forEach((function(n){m(n);BX.Landing.OnscrollAnimationHelper.observer.observe(n)}))}));d("BX.Landing.UI.Panel.URLList:show",(function(n){var e=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n);e.forEach((function(n){m(n);BX.Landing.OnscrollAnimationHelper.observer.observe(n)}))}));d("BX.Landing.Block:updateStyle",(function(n){if(o(n.data)&&t(n.data.affect)&&t(n.node)){const e=n.data.affect.some((function(n){return n===BX.Landing.OnscrollAnimationHelper.PROP}));if(e){const e=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n.block);e.forEach((e=>{if(n.node.indexOf(e)!==-1){BX.Landing.OnscrollAnimationHelper.animatedMap.delete(e);m(e);BX.Landing.OnscrollAnimationHelper.animateElement(e)}}))}}}));BX.Landing.OnscrollAnimationHelper.SELECTOR=".js-animation:not(.animation-none)";BX.Landing.OnscrollAnimationHelper.PROP="animation-name";BX.Landing.OnscrollAnimationHelper.ANIMATIONS=["bounce","flash","pulse","rubberBand","shake","headShake","swing","tada","wobble","jello","bounceIn","bounceInDown","bounceInLeft","bounceInRight","bounceInUp","fadeIn","fadeInDown","fadeInDownBig","fadeInLeft","fadeInLeftBig","fadeInRight","fadeInRightBig","fadeInUp","fadeInUpBig","flip","flipInX","flipInY","lightSpeedIn","rotateIn","rotateInDownLeft","rotateInDownRight","rotateInUpLeft","rotateInUpRight","rollIn","zoomIn","zoomToIn","zoomInDown","zoomInLeft","zoomInRight","zoomInUp","slideInDown","slideInLeft","slideInRight","slideInUp"];BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements=function(n){return r(n.querySelectorAll(BX.Landing.OnscrollAnimationHelper.SELECTOR)).filter((n=>{for(const e of BX.Landing.OnscrollAnimationHelper.ANIMATIONS){if(i(n,e)){return true}}return false}))};function m(n){void a(n,{"animation-duration":"1000ms","animation-name":"none","animation-play-state":"paused"})}function c(n){n.forEach((function(n){if(n.isIntersecting){BX.Landing.OnscrollAnimationHelper.animateElement(n.target)}}))}BX.Landing.OnscrollAnimationHelper.animateElement=function(n){if(!BX.Landing.OnscrollAnimationHelper.animatedMap.has(n)){return f(n).then((function(){BX.Landing.OnscrollAnimationHelper.animatedMap.set(n,true);void a(n,{"animation-name":"none"});e(n,"animated");if(i(n,"modified")){e(n,"modified")}}))}return Promise.resolve()};function f(e){if(window.performance.timing.domContentLoadedEventStart-window.performance.timing.domLoading>400&&window.performance.timing.domComplete===0&&BX.Landing.getMode()!=="edit"){n(e,"modified")}n(e,"animated");void a(e,{"animation-name":"","animation-play-state":"running"});return l(e)}})();
//# sourceMappingURL=onscroll-animation_init.map.js