{"version":3,"file":"link.bundle.js","sources":["../src/link.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {PanelLink} from 'landing.ui.panel.link';\n\nexport class Link extends Node\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\n\t\tthis.trim = BX.Landing.Utils.trim;\n\t\tthis.isPlainObject = BX.Landing.Utils.isPlainObject;\n\t\tthis.isString = BX.Landing.Utils.isString;\n\t\tthis.textToPlaceholders = BX.Landing.Utils.textToPlaceholders;\n\t\tthis.create = BX.Landing.Utils.create;\n\t\tthis.escapeText = BX.Landing.Utils.escapeText;\n\t\tthis.decodeDataValue = BX.Landing.Utils.decodeDataValue;\n\n\t\tBX.Landing.Block.Node.apply(this, arguments);\n\t\tthis.type = \"link\";\n\n\t\tif (!this.isGrouped())\n\t\t{\n\t\t\tthis.node.addEventListener(\"click\", this.onClick.bind(this));\n\t\t}\n\n\t\tif (this.isAllowInlineEdit())\n\t\t{\n\t\t\tthis.node.setAttribute(\"title\", BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_LINK_NODE\"));\n\t\t}\n\t}\n\n\tonContentUpdate()\n\t{\n\t\tvar blockId = this.getBlock().id;\n\n\t\tclearTimeout(this.contentEditTimeout);\n\t\tthis.contentEditTimeout = setTimeout(function() {\n\t\t\tBX.Landing.History.getInstance().push(\n\t\t\t\tnew BX.Landing.History.Entry({\n\t\t\t\t\tblock: blockId,\n\t\t\t\t\tselector: this.selector,\n\t\t\t\t\tcommand: \"editLink\",\n\t\t\t\t\tundo: this.startValue,\n\t\t\t\t\tredo: this.getValue()\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.startValue = null;\n\t\t}.bind(this), 400);\n\n\t\tthis.getField().setValue(this.getValue());\n\t}\n\n\tisMenuMode()\n\t{\n\t\treturn this.manifest.menuMode === true;\n\t}\n\n\t/**\n\t * Handles click event\n\t * @param {MouseEvent} event\n\t */\n\tonClick()\n\t{\n\t\tevent.preventDefault();\n\n\t\tif (!this.isMenuMode())\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t}\n\n\t\tif (this.isAllowInlineEdit())\n\t\t{\n\t\t\tBX.Landing.UI.Button.FontAction.hideAll();\n\t\t\tBX.Landing.UI.Button.ColorAction.hideAll();\n\n\t\t\tif (!BX.Landing.UI.Panel.StylePanel.getInstance().isShown())\n\t\t\t{\n\t\t\t\tconst link = new PanelLink;\n\t\t\t\tlink.getInstance().show(this);\n\t\t\t\tBX.Landing.UI.Panel.Link.getInstance().show(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Checks that button is prevented\n\t * @return {boolean}\n\t */\n\tisPrevented()\n\t{\n\t\treturn this.getValue().target === \"_popup\";\n\t}\n\n\t/**\n\t * Sets node value\n\t * @param data\n\t * @param {?boolean} [preventSave = false]\n\t * @param {?boolean} [preventHistory = false]\n\t */\n\tsetValue(data, preventSave, preventHistory)\n\t{\n\t\tthis.startValue = this.startValue || this.getValue();\n\n\t\tthis.preventSave(preventSave);\n\n\t\tif (!this.containsImage() && this.isAllowInlineEdit())\n\t\t{\n\t\t\tvar field = this.getField(true).hrefInput;\n\n\t\t\tif (this.isString(data.text) && data.text.includes(\"{{name}}\"))\n\t\t\t{\n\t\t\t\tfield.getPlaceholderData(data.href)\n\t\t\t\t\t.then(function(placeholdersData) {\n\t\t\t\t\t\tthis.node.innerHTML = data.text.replace(\n\t\t\t\t\t\t\tnew RegExp(\"{{name}}\"),\n\t\t\t\t\t\t\t\"<span data-placeholder=\\\"name\\\">\"+placeholdersData.name+\"</span>\"\n\t\t\t\t\t\t);\n\t\t\t\t\t}.bind(this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (!this.getField().containsHtml() && !this.manifest.skipContent)\n\t\t\t\t{\n\t\t\t\t\tthis.node.innerHTML = this.escapeText(data.text);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.node.setAttribute(\"href\", this.decodeDataValue(data.href));\n\t\tthis.node.setAttribute(\"target\", this.escapeText(data.target));\n\n\t\tif (\"attrs\" in data)\n\t\t{\n\t\t\tfor (var attr in data.attrs)\n\t\t\t{\n\t\t\t\tif (data.attrs.hasOwnProperty(attr))\n\t\t\t\t{\n\t\t\t\t\tthis.node.setAttribute(attr, data.attrs[attr]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.node.removeAttribute(\"data-url\");\n\t\t\tthis.node.removeAttribute(\"data-embed\");\n\t\t}\n\n\t\tthis.onChange();\n\n\t\tif (!preventHistory)\n\t\t{\n\t\t\tthis.onContentUpdate();\n\t\t}\n\t}\n\n\t/**\n\t * Checks that this node contains image node\n\t * @return {boolean}\n\t */\n\tcontainsImage()\n\t{\n\t\treturn !!this.node.firstElementChild && this.node.firstElementChild.tagName === \"IMG\";\n\t}\n\n\t/**\n\t * Gets node value\n\t * @return {{text: string, href: string|*, target: string|*}}\n\t */\n\tgetValue()\n\t{\n\t\tvar value = {\n\t\t\ttext: this.textToPlaceholders(this.trim(this.node.innerHTML)),\n\t\t\thref: this.trim(this.node.getAttribute(\"href\")),\n\t\t\ttarget: this.trim(this.node.getAttribute(\"target\") || \"_self\")\n\t\t};\n\n\t\tif (this.node.getAttribute(\"data-url\"))\n\t\t{\n\t\t\tvalue.attrs = {\n\t\t\t\t\"data-url\": this.trim(this.node.getAttribute(\"data-url\"))\n\t\t\t};\n\t\t}\n\n\t\tif (this.node.getAttribute(\"data-dynamic\"))\n\t\t{\n\t\t\tif (!this.isPlainObject(value.attrs))\n\t\t\t{\n\t\t\t\tvalue.attrs = {};\n\t\t\t}\n\n\t\t\tvalue.attrs[\"data-dynamic\"] = this.node.getAttribute(\"data-dynamic\");\n\t\t}\n\n\t\tif (this.manifest.skipContent)\n\t\t{\n\t\t\tvalue['skipContent'] = true;\n\t\t\tdelete value.text;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t/**\n\t * Gets field\n\t * @param {boolean} [preventAdjustValue = false]\n\t * @return {BX.Landing.UI.Field.BaseField}\n\t */\n\tgetField(preventAdjustValue)\n\t{\n\t\tvar value = this.getValue();\n\t\tvalue.text = this.textToPlaceholders(this.create(\"div\", {html: value.text}).innerHTML);\n\n\t\tif (!this.field)\n\t\t{\n\t\t\tvar allowedTypes = [\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_BLOCK,\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_PAGE,\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_CRM_FORM,\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_CRM_PHONE\n\t\t\t];\n\n\t\t\tif (BX.Landing.Main.getInstance().options.params.type === BX.Landing.Main.TYPE_STORE)\n\t\t\t{\n\t\t\t\tallowedTypes.push(BX.Landing.UI.Field.LinkUrl.TYPE_CATALOG);\n\t\t\t}\n\n\t\t\tif (BX.Landing.Main.getInstance().options.features.includes('diskFile'))\n\t\t\t{\n\t\t\t\tallowedTypes.push(BX.Landing.UI.Field.LinkUrl.TYPE_DISK_FILE);\n\t\t\t}\n\n\t\t\tthis.field = new BX.Landing.UI.Field.Link({\n\t\t\t\ttitle: this.manifest.name,\n\t\t\t\tselector: this.selector,\n\t\t\t\tskipContent: this.manifest.skipContent,\n\t\t\t\tcontent: value,\n\t\t\t\toptions: {\n\t\t\t\t\tsiteId: BX.Landing.Main.getInstance().options.site_id,\n\t\t\t\t\tlandingId: BX.Landing.Main.getInstance().id\n\t\t\t\t},\n\t\t\t\tallowedTypes: allowedTypes\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (!preventAdjustValue)\n\t\t\t{\n\t\t\t\tthis.field.setValue(value);\n\t\t\t\tthis.field.content = value;\n\t\t\t\tthis.field.hrefInput.content = value.href;\n\t\t\t\tthis.field.hrefInput.makeDisplayedHrefValue();\n\t\t\t\tthis.field.hrefInput.setHrefTypeSwitcherValue(\n\t\t\t\t\tthis.field.hrefInput.getHrefStringType()\n\t\t\t\t);\n\t\t\t\tthis.field.hrefInput.removeHrefTypeFromHrefString();\n\t\t\t}\n\t\t}\n\n\t\treturn this.field;\n\t}\n}"],"names":["Link","Node","constructor","options","trim","BX","Landing","Utils","isPlainObject","isString","textToPlaceholders","create","escapeText","decodeDataValue","Block","apply","arguments","type","isGrouped","node","addEventListener","onClick","bind","isAllowInlineEdit","setAttribute","Loc","getMessage","onContentUpdate","blockId","getBlock","id","clearTimeout","contentEditTimeout","setTimeout","History","getInstance","push","Entry","block","selector","command","undo","startValue","redo","getValue","getField","setValue","isMenuMode","manifest","menuMode","event","preventDefault","stopPropagation","UI","Button","FontAction","hideAll","ColorAction","Panel","StylePanel","isShown","link","PanelLink","show","isPrevented","target","data","preventSave","preventHistory","containsImage","field","hrefInput","text","includes","getPlaceholderData","href","then","placeholdersData","innerHTML","replace","RegExp","name","containsHtml","skipContent","attr","attrs","hasOwnProperty","removeAttribute","onChange","firstElementChild","tagName","value","getAttribute","preventAdjustValue","html","allowedTypes","Field","LinkUrl","TYPE_BLOCK","TYPE_PAGE","TYPE_CRM_FORM","TYPE_CRM_PHONE","Main","params","TYPE_STORE","TYPE_CATALOG","features","TYPE_DISK_FILE","title","content","siteId","site_id","landingId","makeDisplayedHrefValue","setHrefTypeSwitcherValue","getHrefStringType","removeHrefTypeFromHrefString"],"mappings":"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"}