this.BX=this.BX||{};(function(e){"use strict";const t=BX.Landing.Utils.isFunction;const n=BX.Landing.Utils.isString;const i=BX.Landing.Utils.isPlainObject;const s=BX.Landing.Utils.isArray;const o=BX.Landing.Utils.bind;const r=BX.Landing.Utils.proxy;const a=BX.Landing.Utils.data;class l{constructor(e){this.node=e.node;this.manifest=i(e.manifest)?e.manifest:{};this.selector=n(e.selector)?e.selector:"";this.onChangeHandler=t(e.onChange)?e.onChange:function(){};this.onDesignShow=t(e.onDesignShow)?e.onDesignShow:function(){};this.changeOptionsHandler=t(e.onChangeOptions)?e.onChangeOptions:function(){};this.onDocumentClick=r(this.onDocumentClick,this);this.onDocumentKeydown=r(this.onDocumentKeydown,this);o(document,"click",this.onDocumentClick);o(document,"keydown",this.onDocumentKeydown);Object.freeze(this.manifest);this.node.dataset.selector=this.selector;if(this.isAllowInlineEdit()){this.onAllowInlineEdit()}}onDocumentClick(e){}onDocumentKeydown(e){if(e.keyCode===27){this.onEscapePress()}}onEscapePress(){}getField(){throw new Error("Must be implemented by subclass")}showEditor(){}hideEditor(){}onAllowInlineEdit(){}isAllowInlineEdit(){return this.manifest.allowInlineEdit!==false}isGrouped(){return typeof this.manifest.group==="string"&&this.manifest.group.length>0}setValue(e,t,n){throw new Error("Must be implemented by subclass")}getValue(){throw new Error("Must be implemented by subclass")}getAdditionalValue(){if(i(this.manifest.extend)&&s(this.manifest.extend.attrs)){return this.manifest.extend.attrs.reduce(((e,t)=>(e[t]=a(this.node,t),e)),{})}return{}}onChange(e){this.onChangeHandler.apply(null,[this,e])}getIndex(){let e=parseInt(this.selector.split("@")[1],10);e=e===e?e:0;return e}preventSave(e){this.isSavePreventedValue=e}isSavePrevented(){return!!this.isSavePreventedValue}getBlock(){return BX.Landing.PageObject.getBlocks().getByChildNode(this.node)}preparePseudoUrl(e){let t=false;if(!(e.href==="#"&&e.target==="")){t=true}if(e.href==="selectActions:"){e.href="";e.enabled=false;t=true}if(e.href.startsWith("product:")){e.target="_self";t=true}if(e.enabled!==false&&(e.href===""||e.href==="#")){e.enabled=false;t=true}if(e.target===""){e.target="_blank";t=true}if(t===true){return e}return null}}BX.Landing.Node=l;BX.Landing.Node.storage=[];e.Node=l})(this.BX.Landing=this.BX.Landing||{});
//# sourceMappingURL=node.bundle.map.js