(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.data;BX.Landing.Block.Node.Embed=function(e){BX.Landing.Block.Node.apply(this,arguments);this.type="embed";this.onAttributeChangeHandler=e.onAttributeChange||function(){};this.lastValue=this.getValue()};BX.Landing.Block.Node.Embed.prototype={constructor:BX.Landing.Block.Node.Embed,__proto__:BX.Landing.Block.Node.prototype,onChange:function(){this.lastValue=this.getValue();this.onAttributeChangeHandler(this);this.onChangeHandler(this)},isChanged:function(){return JSON.stringify(this.getValue())!==JSON.stringify(this.lastValue)},getValue:function(){return{src:this.node.src?this.node.src:e(this.node,"data-src"),source:e(this.node,"data-source"),preview:e(this.node,"data-preview")}},setValue:function(t,n,i){if(this.node.src){this.node.src=t.src}else{e(this.node,"data-src",t.src)}e(this.node,"data-source",t.source);if(t.preview){e(this.node,"data-preview",t.preview);this.node.style.backgroundImage='url("'+t.preview+'")'}if(this.isChanged()){if(!i){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editEmbed",undo:this.lastValue,redo:this.getValue()}))}this.onChange()}},getField:function(){return new BX.Landing.UI.Field.Embed({title:this.manifest.name,selector:this.selector,content:this.getValue()})}}})();
//# sourceMappingURL=embed.map.js