{"version":3,"file":"text.bundle.js","sources":["../src/text.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {Node} from 'landing.node';\n\nexport class Text extends Node\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.escapeText = BX.Landing.Utils.escapeText;\n\t\tthis.headerTagMatcher = BX.Landing.Utils.Matchers.headerTag;\n\t\tthis.changeTagName = BX.Landing.Utils.changeTagName;\n\t\tthis.textToPlaceholders = BX.Landing.Utils.textToPlaceholders;\n\n\t\tBX.Runtime.loadExtension('landing.node.text.tableeditor');\n\t\tBX.Landing.Block.Node.apply(this, arguments);\n\n\t\tthis.type = \"text\";\n\t\tthis.tableBaseFontSize = '22';\n\n\t\tthis.onClick = this.onClick.bind(this);\n\t\tthis.onPaste = this.onPaste.bind(this);\n\t\tthis.onDrop = this.onDrop.bind(this);\n\t\tthis.onInput = this.onInput.bind(this);\n\t\tthis.onKeyDown = this.onKeyDown.bind(this);\n\t\tthis.onMousedown = this.onMousedown.bind(this);\n\t\tthis.onMouseup = this.onMouseup.bind(this);\n\n\t\t// Bind on node events\n\t\tthis.node.addEventListener(\"mousedown\", this.onMousedown);\n\t\tthis.node.addEventListener(\"click\", this.onClick);\n\t\tthis.node.addEventListener(\"paste\", this.onPaste);\n\t\tthis.node.addEventListener(\"drop\", this.onDrop);\n\t\tthis.node.addEventListener(\"input\", this.onInput);\n\t\tthis.node.addEventListener(\"keydown\", this.onKeyDown);\n\n\t\tdocument.addEventListener(\"mouseup\", this.onMouseup);\n\t}\n\n\tstatic currentNode = [];\n\n\t/**\n\t * Handles allow inline edit event\n\t */\n\tonAllowInlineEdit()\n\t{\n\t\t// Show title \"Click to edit\" for node\n\t\tthis.node.setAttribute(\"title\", this.escapeText(BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_TEXT_NODE\")));\n\t}\n\n\t/**\n\t * Handles change event\n\t * @param {boolean} [preventAdjustPosition]\n\t * @param {boolean} [preventHistory]\n\t */\n\tonChange(preventAdjustPosition, preventHistory)\n\t{\n\t\tthis.superClass.onChange.call(this, arguments);\n\t\tif (!preventAdjustPosition)\n\t\t{\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().adjustPosition(this.node);\n\t\t}\n\t\tif (!preventHistory)\n\t\t{\n\t\t\t// todo: old or new extention use?\n\t\t\tBX.Landing.History.getInstance().push();\n\t\t}\n\t}\n\n\tonKeyDown()\n\t{\n\t\tif (event.code === 'Backspace')\n\t\t{\n\t\t\tthis.onBackspaceDown(event);\n\t\t}\n\t\tthis.onInput(event);\n\t}\n\n\tonInput(event)\n\t{\n\t\tclearTimeout(this.inputTimeout);\n\n\t\tvar key = event.keyCode || event.which;\n\n\t\tif (!(key === 90 && (top.window.navigator.userAgent.match(/win/i) ? event.ctrlKey : event.metaKey)))\n\t\t{\n\t\t\tthis.inputTimeout = setTimeout(function() {\n\t\t\t\tif (this.lastValue !== this.getValue())\n\t\t\t\t{\n\t\t\t\t\tthis.onChange(true);\n\t\t\t\t\tthis.lastValue = this.getValue();\n\t\t\t\t}\n\t\t\t}.bind(this), 400);\n\t\t}\n\n\t\tif (this.isTable(event))\n\t\t{\n\t\t\tvar tableFontSize = parseInt(window.getComputedStyle(event.srcElement).getPropertyValue('font-size'));\n\t\t\tif (event.srcElement.textContent === ''\n\t\t\t\t&& event.srcElement.classList.contains('landing-table-td')\n\t\t\t\t&& tableFontSize < this.tableBaseFontSize)\n\t\t\t{\n\t\t\t\tevent.srcElement.classList.add('landing-table-td-height');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tevent.srcElement.classList.remove('landing-table-td-height');\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Handles escape press event\n\t */\n\tonEscapePress()\n\t{\n\t\t// Hide editor by press on Escape button\n\t\tif (this.isEditable())\n\t\t{\n\t\t\tif (this === BX.Landing.Block.Node.Text.currentNode)\n\t\t\t{\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\n\t\t\tthis.disableEdit();\n\t\t}\n\t}\n\n\t/**\n\t * Handles drop event on this node\n\t *\n\t * @param {DragEvent} event\n\t */\n\tonDrop(event)\n\t{\n\t\t// Prevents drag and drop any content into editor area\n\t\tevent.preventDefault();\n\t}\n\n\t/**\n\t * Handles paste event on this node\n\t *\n\t * @param {ClipboardEvent} event\n\t * @param {function} event.preventDefault\n\t * @param {object} event.clipboardData\n\t */\n\tonPaste(event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tif (event.clipboardData && event.clipboardData.getData)\n\t\t{\n\t\t\tvar sourceText = event.clipboardData.getData(\"text/plain\");\n\t\t\tvar encodedText = BX.Text.encode(sourceText);\n\t\t\tvar formattedHtml = encodedText.replace(new RegExp('\\n', 'g'), \"<br>\");\n\t\t\tdocument.execCommand(\"insertHTML\", false, formattedHtml);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// ie11\n\t\t\tvar text = window.clipboardData.getData(\"text\");\n\t\t\tdocument.execCommand(\"paste\", true, BX.Text.encode(text));\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\t/**\n\t * Handles click on document\n\t */\n\tonDocumentClick(event)\n\t{\n\t\tif (this.isEditable() && !this.fromNode)\n\t\t{\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\tthis.disableEdit();\n\t\t}\n\n\t\tthis.fromNode = false;\n\t}\n\n\tonMousedown(event)\n\t{\n\t\tif (!this.manifest.group)\n\t\t{\n\t\t\tthis.fromNode = true;\n\n\t\t\tif (this.manifest.allowInlineEdit !== false &&\n\t\t\t\tBX.Landing.Main.getInstance().isControlsEnabled())\n\t\t\t{\n\t\t\t\tevent.stopPropagation();\n\t\t\t\tthis.enableEdit();\n\t\t\t\tif (this.isTable(event))\n\t\t\t\t{\n\t\t\t\t\tthis.disableEdit();\n\t\t\t\t\tBX.Landing.Block.Node.Text.currentNode.node.querySelectorAll('.landing-table-container')\n\t\t\t\t\t\t.forEach(function(table) {\n\t\t\t\t\t\t\tif (!table.hasAttribute('table-prepare'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.Landing.Block.Node.Text.prototype.prepareNewTable(table);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\tvar tableFontSize = parseInt(window.getComputedStyle(event.srcElement).getPropertyValue('font-size'));\n\t\t\t\t\tif (event.srcElement.textContent === ''\n\t\t\t\t\t\t&& event.srcElement.classList.contains('landing-table-td')\n\t\t\t\t\t\t&& tableFontSize < this.tableBaseFontSize)\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.srcElement.classList.add('landing-table-td-height');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tevent.srcElement.classList.remove('landing-table-td-height');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (!this.manifest.textOnly && !BX.Landing.UI.Panel.StylePanel.getInstance().isShown())\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(this.node, null, this.buttons);\n\t\t\t\t\t}\n\t\t\t\t\tif (BX.Landing.Block.Node.Text.nodeTableContainerList)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.Block.Node.Text.nodeTableContainerList.forEach(function(tableContainer) {\n\t\t\t\t\t\t\ttableContainer.tableEditor.unselect(tableContainer.tableEditor);\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tBX.Landing.UI.Tool.ColorPicker.hideAll();\n\t\t\t}\n\n\t\t\trequestAnimationFrame(function() {\n\t\t\t\tif (event.target.nodeName === \"A\" ||\n\t\t\t\t\tevent.target.parentElement.nodeName === \"A\")\n\t\t\t\t{\n\t\t\t\t\tvar range = document.createRange();\n\t\t\t\t\trange.selectNode(event.target);\n\t\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tonMouseup()\n\t{\n\t\tsetTimeout(function() {\n\t\t\tthis.fromNode = false;\n\t\t}.bind(this), 10);\n\t}\n\n\t/**\n\t * Click on field - switch edit mode.\n\t */\n\tonClick(event)\n\t{\n\t\tif (this.isTable(event))\n\t\t{\n\t\t\tthis.addTableButtons(event);\n\t\t}\n\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\t\tthis.fromNode = false;\n\n\t\tif (event.target.nodeName === \"A\" ||\n\t\t\tevent.target.parentElement.nodeName === \"A\")\n\t\t{\n\t\t\tvar range = document.createRange();\n\t\t\trange.selectNode(event.target);\n\t\t\twindow.getSelection().removeAllRanges();\n\t\t\twindow.getSelection().addRange(range);\n\t\t}\n\t}\n\n\t/**\n\t * Checks that is editable\n\t * @return {boolean}\n\t */\n\tisEditable()\n\t{\n\t\treturn this.node.isContentEditable;\n\t}\n\n\t/**\n\t * Enables edit mode\n\t */\n\tenableEdit()\n\t{\n\t\tvar currentNode = BX.Landing.Block.Node.Text.currentNode;\n\t\tif (currentNode)\n\t\t{\n\t\t\tvar node = BX.Landing.Block.Node.Text.currentNode.node;\n\t\t\tvar nodeTableContainerList = node.querySelectorAll('.landing-table-container');\n\t\t\tif (nodeTableContainerList.length > 0)\n\t\t\t{\n\t\t\t\tnodeTableContainerList.forEach(function(nodeTableContainer) {\n\t\t\t\t\tif (!nodeTableContainer.tableEditor)\n\t\t\t\t\t{\n\t\t\t\t\t\tnodeTableContainer.tableEditor = new BX.Landing.Node.Text.TableEditor.default(nodeTableContainer);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tBX.Landing.Block.Node.Text.nodeTableContainerList = nodeTableContainerList;\n\t\t\t}\n\t\t}\n\n\t\tif (!this.isEditable() && !BX.Landing.UI.Panel.StylePanel.getInstance().isShown())\n\t\t{\n\t\t\tif (this !== BX.Landing.Block.Node.Text.currentNode && BX.Landing.Block.Node.Text.currentNode !== null)\n\t\t\t{\n\t\t\t\tBX.Landing.Block.Node.Text.currentNode.disableEdit();\n\t\t\t}\n\n\t\t\tBX.Landing.Block.Node.Text.currentNode = this;\n\n\t\t\tthis.buttons = [];\n\t\t\tthis.buttons.push(this.getDesignButton());\n\n\t\t\tif (this.isHeader())\n\t\t\t{\n\t\t\t\tthis.buttons.push(this.getChangeTagButton());\n\t\t\t\tthis.getChangeTagButton().onChangeHandler = this.onChangeTag.bind(this);\n\t\t\t}\n\n\t\t\tthis.lastValue = this.getValue();\n\t\t\tthis.node.contentEditable = true;\n\n\t\t\tthis.node.setAttribute(\"title\", \"\");\n\t\t}\n\t}\n\n\t/**\n\t * Gets design button for editor\n\t * @return {BX.Landing.UI.Button.Design}\n\t */\n\tgetDesignButton()\n\t{\n\t\tif (!this.designButton)\n\t\t{\n\t\t\tthis.designButton = new BX.Landing.UI.Button.Design(\"design\", {\n\t\t\t\thtml: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_DESIGN\"),\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_DESIGN\")},\n\t\t\t\tonClick: function() {\n\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t\t\tthis.disableEdit();\n\t\t\t\t\tthis.onDesignShow(this.manifest.code);\n\t\t\t\t}.bind(this)\n\t\t\t});\n\t\t}\n\n\t\treturn this.designButton;\n\t}\n\n\t/**\n\t * Disables edit mode\n\t */\n\tdisableEdit()\n\t{\n\t\tif (this.isEditable())\n\t\t{\n\t\t\tthis.node.contentEditable = false;\n\n\t\t\tif (this.lastValue !== this.getValue())\n\t\t\t{\n\t\t\t\tthis.onChange();\n\t\t\t\tthis.lastValue = this.getValue();\n\t\t\t}\n\n\t\t\tif (this.isAllowInlineEdit())\n\t\t\t{\n\t\t\t\tthis.node.setAttribute(\"title\", this.escapeText(BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_TEXT_NODE\")));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets form field\n\t * @return {BX.Landing.UI.Field.Text}\n\t */\n\tgetField()\n\t{\n\t\tif (!this.field)\n\t\t{\n\t\t\tthis.field = new BX.Landing.UI.Field.Text({\n\t\t\t\tselector: this.selector,\n\t\t\t\ttitle: this.manifest.name,\n\t\t\t\tcontent: this.node.innerHTML,\n\t\t\t\ttextOnly: this.manifest.textOnly,\n\t\t\t\tbind: this.node\n\t\t\t});\n\n\t\t\tif (this.isHeader())\n\t\t\t{\n\t\t\t\tthis.field.changeTagButton = this.getChangeTagButton();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.field.setValue(this.node.innerHTML);\n\t\t\tthis.field.content = this.node.innerHTML;\n\t\t}\n\n\t\treturn this.field;\n\t}\n\n\t/**\n\t * Sets node value\n\t * @param value\n\t * @param {?boolean} [preventSave = false]\n\t * @param {?boolean} [preventHistory = false]\n\t */\n\tsetValue(value, preventSave, preventHistory)\n\t{\n\t\tthis.preventSave(preventSave);\n\t\tthis.lastValue = this.isSavePrevented() ? this.getValue() : this.lastValue;\n\t\tthis.node.innerHTML = value;\n\t\tthis.onChange(false, preventHistory);\n\t}\n\n\t/**\n\t * Gets node value\n\t * @return {string}\n\t */\n\tgetValue()\n\t{\n\t\tif (this.node.querySelector('.landing-table-container') !== null)\n\t\t{\n\t\t\tvar node = this.node.cloneNode(true);\n\t\t\tthis.prepareTable(node);\n\t\t\treturn this.textToPlaceholders(node.innerHTML);\n\t\t}\n\t\treturn this.textToPlaceholders(this.node.innerHTML);\n\t}\n\n\t/**\n\t * Checks that this node is header\n\t * @return {boolean}\n\t */\n\tisHeader()\n\t{\n\t\treturn this.headerTagMatcher.test(this.node.nodeName);\n\t}\n\n\t/**\n\t * Checks that this node is table\n\t * @return {boolean}\n\t */\n\tisTable(event)\n\t{\n\t\tvar nodeIsTable = false;\n\t\tif (BX.Landing.Block.Node.Text.currentNode && event)\n\t\t{\n\t\t\tBX.Landing.Block.Node.Text.currentNode.node.querySelectorAll('.landing-table-container')\n\t\t\t\t.forEach(function(table) {\n\t\t\t\t\tif (table.contains(event.srcElement))\n\t\t\t\t\t{\n\t\t\t\t\t\tnodeIsTable = true;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\t\treturn nodeIsTable;\n\t}\n\n\t/**\n\t * Delete br tags in new table and add flag after this\n\t */\n\tprepareNewTable()\n\t{\n\t\ttable.querySelectorAll('br').forEach(function(tdTag) {\n\t\t\ttdTag.remove();\n\t\t})\n\t\ttable.setAttribute('table-prepare', 'true');\n\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t}\n\n\taddTableButtons(event)\n\t{\n\t\tvar buttons = [];\n\t\tvar neededButtons = [];\n\t\tvar setTd = [];\n\t\tvar tableButtons = this.getTableButtons();\n\t\tvar tableAlignButtons = [tableButtons[0], tableButtons[1], tableButtons[2], tableButtons[3]];\n\t\tvar node = BX.Landing.Block.Node.Text.currentNode.node;\n\t\tvar table = null;\n\t\tvar isCell = false;\n\t\tvar isButtonAddRow = false;\n\t\tvar isButtonAddCol = false;\n\t\tvar isNeedTablePanel = true;\n\t\tif (event.srcElement.classList.contains('landing-table')\n\t\t\t|| event.srcElement.classList.contains('landing-table-col-dnd'))\n\t\t{\n\t\t\tisNeedTablePanel = false;\n\t\t}\n\t\tif (event.srcElement.classList.contains('landing-table-row-add'))\n\t\t{\n\t\t\tisButtonAddRow = true;\n\t\t}\n\t\tif (event.srcElement.classList.contains('landing-table-col-add'))\n\t\t{\n\t\t\tisButtonAddCol = true;\n\t\t}\n\t\tvar hideButtons = [];\n\t\tvar nodeTableList = node.querySelectorAll('.landing-table');\n\t\tif (nodeTableList.length > 0)\n\t\t{\n\t\t\tnodeTableList.forEach(function(nodeTable) {\n\t\t\t\tif (nodeTable.contains(event.srcElement))\n\t\t\t\t{\n\t\t\t\t\ttable = nodeTable;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\ttableButtons.forEach(function(tableButton){\n\t\t\ttableButton['options']['srcElement'] = event.srcElement;\n\t\t\ttableButton['options']['node'] = node;\n\t\t\ttableButton['options']['table'] = table;\n\t\t})\n\n\t\tif (event.srcElement.classList.contains('landing-table-row-dnd'))\n\t\t{\n\t\t\tsetTd = event.srcElement.parentNode.children;\n\t\t\tsetTd = Array.from(setTd);\n\t\t\tif (this.getAmountTableRows(table) > 1)\n\t\t\t{\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5, 6];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5];\n\t\t\t}\n\t\t\tneededButtons.forEach(function(neededButon) {\n\t\t\t\ttableButtons[neededButon]['options']['target'] = 'row';\n\t\t\t\ttableButtons[neededButon]['options']['setTd'] = setTd;\n\t\t\t\tbuttons.push(tableButtons[neededButon]);\n\t\t\t})\n\t\t}\n\n\t\tif (event.srcElement.parentNode.classList.contains('landing-table-col-dnd'))\n\t\t{\n\t\t\tvar childNodes = event.srcElement.parentElement.parentElement.childNodes;\n\t\t\tvar childNodesArray = Array.from(childNodes);\n\t\t\tvar childNodesArrayPrepare = [];\n\t\t\tchildNodesArray.forEach(function(childNode) {\n\t\t\t\tif (childNode.nodeType === 1)\n\t\t\t\t{\n\t\t\t\t\tchildNodesArrayPrepare.push(childNode);\n\t\t\t\t}\n\t\t\t})\n\t\t\tvar neededPosition = childNodesArrayPrepare.indexOf(event.srcElement.parentElement);\n\t\t\tvar rows = event.srcElement.parentElement.parentElement.parentElement.childNodes;\n\t\t\trows.forEach(function(row) {\n\t\t\t\tif (row.nodeType === 1)\n\t\t\t\t{\n\t\t\t\t\tvar rowChildPrepare = [];\n\t\t\t\t\trow.childNodes.forEach(function(rowChildNode) {\n\t\t\t\t\t\tif (rowChildNode.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trowChildPrepare.push(rowChildNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tif (rowChildPrepare[neededPosition])\n\t\t\t\t\t{\n\t\t\t\t\t\tsetTd.push(rowChildPrepare[neededPosition]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tif (this.getAmountTableCols(table) > 1)\n\t\t\t{\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5, 7];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5];\n\t\t\t}\n\t\t\tneededButtons.forEach(function(neededButon) {\n\t\t\t\ttableButtons[neededButon]['options']['target'] = 'col';\n\t\t\t\ttableButtons[neededButon]['options']['setTd'] = setTd;\n\t\t\t\tbuttons.push(tableButtons[neededButon]);\n\t\t\t})\n\t\t}\n\n\t\tif (event.srcElement.classList.contains('landing-table-th-select-all'))\n\t\t{\n\t\t\tvar isSelectedAll;\n\t\t\tif (event.srcElement.classList.contains('landing-table-th-select-all-selected'))\n\t\t\t{\n\t\t\t\tisSelectedAll = true;\n\t\t\t\tvar rows = event.srcElement.parentElement.parentElement.childNodes;\n\t\t\t\trows.forEach(function(row) {\n\t\t\t\t\trow.childNodes.forEach(function(th) {\n\t\t\t\t\t\tsetTd.push(th);\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\tneededButtons = [0, 1, 2, 3, 4, 5, 8, 9, 10];\n\t\t\t\tneededButtons.forEach(function(neededButon) {\n\t\t\t\t\ttableButtons[neededButon]['options']['target'] = 'table';\n\t\t\t\t\ttableButtons[neededButon]['options']['setTd'] = setTd;\n\t\t\t\t\tbuttons.push(tableButtons[neededButon]);\n\t\t\t\t})\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tisSelectedAll = false;\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\t\t}\n\n\t\tif (event.srcElement.classList.contains('landing-table-td'))\n\t\t{\n\t\t\tsetTd.push(event.srcElement);\n\t\t\tneededButtons = [3, 2, 1, 0];\n\t\t\tneededButtons.forEach(function(neededButon) {\n\t\t\t\ttableButtons[neededButon]['options']['target'] = 'cell';\n\t\t\t\ttableButtons[neededButon]['options']['setTd'] = setTd;\n\t\t\t\ttableButtons[neededButon].insertAfter = 'strikeThrough';\n\t\t\t\tbuttons.push(tableButtons[neededButon]);\n\t\t\t})\n\t\t\tisCell = true;\n\t\t\thideButtons = ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull', 'createTable', 'pasteTable'];\n\t\t}\n\n\t\tvar activeAlignButtonId;\n\t\tvar setActiveAlignButtonId = [];\n\t\tsetTd.forEach(function(th) {\n\t\t\tif (th.nodeType === 1)\n\t\t\t{\n\t\t\t\tactiveAlignButtonId = undefined;\n\t\t\t\tif (th.classList.contains('text-left'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignLeft';\n\t\t\t\t}\n\t\t\t\tif (th.classList.contains('text-center'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignCenter';\n\t\t\t\t}\n\t\t\t\tif (th.classList.contains('text-right'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignRight';\n\t\t\t\t}\n\t\t\t\tif (th.classList.contains('text-justify'))\n\t\t\t\t{\n\t\t\t\t\tactiveAlignButtonId = 'alignJustify';\n\t\t\t\t}\n\t\t\t\tsetActiveAlignButtonId.push(activeAlignButtonId);\n\t\t\t}\n\t\t})\n\t\tvar count = 0;\n\t\tvar isIdentical = true;\n\t\twhile (count < setActiveAlignButtonId.length && isIdentical) {\n\t\t\tif (count > 0)\n\t\t\t{\n\t\t\t\tif (setActiveAlignButtonId[count] !== setActiveAlignButtonId[count - 1])\n\t\t\t\t{\n\t\t\t\t\tisIdentical = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcount++;\n\t\t}\n\t\tif (isIdentical)\n\t\t{\n\t\t\tactiveAlignButtonId = setActiveAlignButtonId[0];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tactiveAlignButtonId = undefined;\n\t\t}\n\t\tif (activeAlignButtonId)\n\t\t{\n\t\t\ttableAlignButtons.forEach(function(tableAlignButton) {\n\t\t\t\tif (tableAlignButton.id === activeAlignButtonId)\n\t\t\t\t{\n\t\t\t\t\ttableAlignButton.layout.classList.add('landing-ui-active');\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tif (buttons[0] && buttons[1] && buttons[2] && buttons[3])\n\t\t{\n\t\t\tbuttons[0]['options']['alignButtons'] = tableAlignButtons;\n\t\t\tbuttons[1]['options']['alignButtons'] = tableAlignButtons;\n\t\t\tbuttons[2]['options']['alignButtons'] = tableAlignButtons;\n\t\t\tbuttons[3]['options']['alignButtons'] = tableAlignButtons;\n\t\t}\n\n\t\tif (!this.manifest.textOnly)\n\t\t{\n\t\t\tif (isNeedTablePanel)\n\t\t\t{\n\t\t\t\tif (!isButtonAddRow && !isButtonAddCol && table)\n\t\t\t\t{\n\t\t\t\t\tif (!isCell)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (isSelectedAll === false)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(table.parentNode, null, buttons, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tisSelectedAll = true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().show(table.parentNode, null, buttons, true, hideButtons);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Gets change tag button\n\t * @return {BX.Landing.UI.Button.ChangeTag}\n\t */\n\tgetChangeTagButton()\n\t{\n\t\tif (!this.changeTagButton)\n\t\t{\n\t\t\tthis.changeTagButton = new BX.Landing.UI.Button.ChangeTag(\"changeTag\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-\"+this.node.nodeName.toLowerCase()+\"\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_CHANGE_TAG\")},\n\t\t\t\tonChange: this.onChangeTag.bind(this)\n\t\t\t});\n\t\t}\n\n\t\tthis.changeTagButton.insertAfter = \"unlink\";\n\n\t\tthis.changeTagButton.activateItem(this.node.nodeName);\n\n\t\treturn this.changeTagButton;\n\t}\n\n\tgetTableButtons()\n\t{\n\t\tthis.buttons = [];\n\t\tthis.buttons.push(\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\"alignLeft\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-left\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_LEFT\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\"alignCenter\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-center\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_CENTER\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\"alignRight\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-right\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_RIGHT\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.AlignTable(\"alignJustify\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-justify\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_JUSTIFY\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.ColorAction(\"tableTextColor\", {\n\t\t\t\ttext: BX.Landing.Loc.getMessage(\"EDITOR_ACTION_SET_FORE_COLOR\"),\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_COLOR\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.ColorAction(\"tableBgColor\", {\n\t\t\t\thtml: \"<i class=\\\"landing-ui-icon-editor-fill-color\\\"></i>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_CELL_BG\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.DeleteElementTable(\"deleteRow\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-delete\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_DELETE_ROW_TABLE\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.DeleteElementTable(\"deleteCol\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-delete\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_DELETE_COL_TABLE\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.StyleTable(\"styleTable\", {\n\t\t\t\thtml: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_STYLE\")\n\t\t\t\t\t+ \"<i class=\\\"fas fa-chevron-down g-ml-8\\\"></i>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_STYLE\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.CopyTable(\"copyTable\", {\n\t\t\t\ttext: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_COPY\"),\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_COPY\")},\n\t\t\t}),\n\t\t\tnew BX.Landing.UI.Button.DeleteTable(\"deleteTable\", {\n\t\t\t\thtml: \"<span class=\\\"landing-ui-icon-editor-delete\\\"></span>\",\n\t\t\t\tattrs: {title: BX.Landing.Loc.getMessage(\"LANDING_TITLE_OF_EDITOR_ACTION_TABLE_DELETE\")},\n\t\t\t})\n\t\t);\n\t\treturn this.buttons;\n\t}\n\n\t/**\n\t * Handles change tag event\n\t * @param value\n\t */\n\tonChangeTag(value)\n\t{\n\t\tthis.node = this.changeTagName(this.node, value);\n\n\t\tthis.node.addEventListener(\"mousedown\", this.onMousedown);\n\t\tthis.node.addEventListener(\"click\", this.onClick);\n\t\tthis.node.addEventListener(\"paste\", this.onPaste);\n\t\tthis.node.addEventListener(\"drop\", this.onDrop);\n\t\tthis.node.addEventListener(\"input\", this.onInput);\n\t\tthis.node.addEventListener(\"keydown\", this.onInput);\n\n\t\tif (!this.getField().isEditable())\n\t\t{\n\t\t\tthis.disableEdit();\n\t\t\tthis.enableEdit();\n\t\t}\n\n\t\tvar data = {};\n\t\tdata[this.selector] = value;\n\t\tthis.changeOptionsHandler(data);\n\t}\n\n\tgetAmountTableCols(table)\n\t{\n\t\treturn table.querySelectorAll('.landing-table-col-dnd').length;\n\t}\n\n\tgetAmountTableRows(table)\n\t{\n\t\treturn table.querySelectorAll('.landing-table-row-dnd').length;\n\t}\n\n\tprepareTable(node)\n\t{\n\t\tvar setClassesForRemove = [\n\t\t\t'table-selected-all',\n\t\t\t'landing-table-th-select-all-selected',\n\t\t\t'landing-table-cell-selected',\n\t\t\t'landing-table-row-selected',\n\t\t\t'landing-table-th-selected',\n\t\t\t'landing-table-th-selected-cell',\n\t\t\t'landing-table-th-selected-top',\n\t\t\t'landing-table-th-selected-x',\n\t\t\t'landing-table-tr-selected-left',\n\t\t\t'landing-table-tr-selected-y',\n\t\t\t'landing-table-col-selected',\n\t\t\t'landing-table-tr-selected',\n\t\t\t'table-selected-all-right',\n\t\t\t'table-selected-all-bottom',\n\t\t];\n\t\tsetClassesForRemove.forEach(function(className) {\n\t\t\tnode.querySelectorAll('.' + className).forEach(function(element){\n\t\t\t\telement.classList.remove(className);\n\t\t\t})\n\t\t})\n\t\treturn node;\n\t}\n\n\tonBackspaceDown()\n\t{\n\t\tvar selection = window.getSelection();\n\t\tvar position = selection.getRangeAt(0).startOffset;\n\t\tif (position === 0)\n\t\t{\n\t\t\tvar focusNode = selection.focusNode;\n\t\t\tif (!BX.Type.isNil(focusNode) && focusNode.nodeType !== 3)\n\t\t\t{\n\t\t\t\tif (focusNode.firstChild.nodeType === 3 && focusNode.firstChild.firstChild.nodeType === 3)\n\t\t\t\t{\n\t\t\t\t\tfocusNode = focusNode.firstChild.firstChild;\n\t\t\t\t}\n\t\t\t\telse if (focusNode.firstChild.nodeType !== 3)\n\t\t\t\t{\n\t\t\t\t\tfocusNode = focusNode.firstChild;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfocusNode = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (focusNode)\n\t\t\t{\n\t\t\t\tvar focusNodeParent = focusNode.parentNode;\n\t\t\t\tvar allowedNodeName = ['BLOCKQUOTE', 'UL'];\n\t\t\t\tif (focusNodeParent && allowedNodeName.includes(focusNodeParent.nodeName))\n\t\t\t\t{\n\t\t\t\t\tvar focusNodeContainer = document.createElement('div');\n\t\t\t\t\tfocusNodeContainer.append(focusNode);\n\t\t\t\t\tfocusNodeParent.append(focusNodeContainer);\n\t\t\t\t}\n\t\t\t\tvar contentNode = focusNode.parentNode.parentNode;\n\t\t\t\twhile (contentNode && !allowedNodeName.includes(contentNode.nodeName))\n\t\t\t\t{\n\t\t\t\t\tcontentNode = contentNode.parentNode;\n\t\t\t\t}\n\t\t\t\tif (contentNode && contentNode.childNodes.length === 1)\n\t\t\t\t{\n\t\t\t\t\tcontentNode.after(focusNode.parentNode);\n\t\t\t\t\tcontentNode.remove();\n\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}"],"names":["Text","Node","constructor","escapeText","BX","Landing","Utils","headerTagMatcher","Matchers","headerTag","changeTagName","textToPlaceholders","Runtime","loadExtension","Block","apply","arguments","type","tableBaseFontSize","onClick","bind","onPaste","onDrop","onInput","onKeyDown","onMousedown","onMouseup","node","addEventListener","document","onAllowInlineEdit","setAttribute","Loc","getMessage","onChange","preventAdjustPosition","preventHistory","superClass","call","UI","Panel","EditorPanel","getInstance","adjustPosition","History","push","event","code","onBackspaceDown","clearTimeout","inputTimeout","key","keyCode","which","top","window","navigator","userAgent","match","ctrlKey","metaKey","setTimeout","lastValue","getValue","isTable","tableFontSize","parseInt","getComputedStyle","srcElement","getPropertyValue","textContent","classList","contains","add","remove","onEscapePress","isEditable","currentNode","hide","disableEdit","preventDefault","clipboardData","getData","sourceText","encodedText","encode","formattedHtml","replace","RegExp","execCommand","text","onDocumentClick","fromNode","manifest","group","allowInlineEdit","Main","isControlsEnabled","stopPropagation","enableEdit","querySelectorAll","forEach","table","hasAttribute","prototype","prepareNewTable","textOnly","StylePanel","isShown","show","buttons","nodeTableContainerList","tableContainer","tableEditor","unselect","Tool","ColorPicker","hideAll","requestAnimationFrame","target","nodeName","parentElement","range","createRange","selectNode","getSelection","removeAllRanges","addRange","addTableButtons","isContentEditable","length","nodeTableContainer","TableEditor","default","getDesignButton","isHeader","getChangeTagButton","onChangeHandler","onChangeTag","contentEditable","designButton","Button","Design","html","attrs","title","onDesignShow","isAllowInlineEdit","getField","field","Field","selector","name","content","innerHTML","changeTagButton","setValue","value","preventSave","isSavePrevented","querySelector","cloneNode","prepareTable","test","nodeIsTable","tdTag","neededButtons","setTd","tableButtons","getTableButtons","tableAlignButtons","isCell","isButtonAddRow","isButtonAddCol","isNeedTablePanel","hideButtons","nodeTableList","nodeTable","tableButton","parentNode","children","Array","from","getAmountTableRows","neededButon","childNodes","childNodesArray","childNodesArrayPrepare","childNode","nodeType","neededPosition","indexOf","rows","row","rowChildPrepare","rowChildNode","getAmountTableCols","isSelectedAll","th","insertAfter","activeAlignButtonId","setActiveAlignButtonId","undefined","count","isIdentical","tableAlignButton","id","layout","ChangeTag","toLowerCase","activateItem","AlignTable","ColorAction","DeleteElementTable","StyleTable","CopyTable","DeleteTable","data","changeOptionsHandler","setClassesForRemove","className","element","selection","position","getRangeAt","startOffset","focusNode","Type","isNil","firstChild","focusNodeParent","allowedNodeName","includes","focusNodeContainer","createElement","append","contentNode","after"],"mappings":"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"}