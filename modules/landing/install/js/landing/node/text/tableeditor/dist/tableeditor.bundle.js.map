{"version":3,"file":"tableeditor.bundle.js","sources":["../src/tableeditor.js"],"sourcesContent":["import './css/style.css';\nimport { Draggable } from 'ui.draganddrop.draggable';\nimport { Event } from 'main.core';\n\nexport default class TableEditor\n{\n\tconstructor(node: HTMLElement)\n\t{\n\t\tthis.node = node;\n\t\tthis.tBody = this.node.getElementsByTagName('tbody')[0];\n\t\tthis.table = node.querySelector('.landing-table');\n\t\tthis.addTitles(this.node);\n\t\tthis.enableEditCells(this.table);\n\t\tthis.dragAndDropRows(this);\n\t\tthis.dragAndDropCols(this);\n\t\tthis.resizeColumn(this);\n\t\tthis.buildLines(this);\n\t\tthis.addRow(this);\n\t\tthis.addCol(this);\n\t\tthis.onUnselect(this);\n\t\tthis.unselect(this);\n\t\tthis.selectAll(this);\n\t\tthis.selectRow(this);\n\t\tthis.selectCol(this);\n\t\tthis.onCopyTable(this);\n\t\tthis.onDeleteElementTable(this);\n\t\tthis.onShowPopupMenu(this);\n\t}\n\n\taddTitles(tableNode)\n\t{\n\t\tif (!tableNode.hasAttribute('title-added'))\n\t\t{\n\t\t\ttableNode.title = '';\n\t\t\ttableNode.querySelector('.landing-table-th-select-all').title = BX.Landing.Utils.escapeText(\n\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_SELECT_TABLE\")\n\t\t\t);\n\t\t\ttableNode.querySelectorAll('.landing-table-div-col-dnd').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_DND_COLS\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.querySelectorAll('.landing-table-col-resize').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_RESIZE_COLS\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.querySelectorAll('.landing-table-col-add').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_BUTTON_ADD_COL\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.querySelectorAll('.landing-table-row-dnd').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_DND_ROWS\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.querySelectorAll('.landing-table-row-add').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_BUTTON_ADD_ROW\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.querySelectorAll('.landing-table-td').forEach(function(element) {\n\t\t\t\telement.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_BUTTON_CHANGE_TEXT\")\n\t\t\t\t);\n\t\t\t})\n\t\t\ttableNode.setAttribute('title-added', 'true');\n\t\t}\n\t}\n\n\tunselect(tableEditor, isSelectAll = false)\n\t{\n\t\tif (!isSelectAll)\n\t\t{\n\t\t\ttableEditor.table.classList.remove('table-selected-all');\n\t\t\tthis.removeClasses(tableEditor.table, 'landing-table-th-select-all-selected');\n\t\t\tthis.removeClasses(tableEditor.table, 'landing-table-cell-selected');\n\t\t}\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-row-selected');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-th-selected');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-th-selected-cell');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-th-selected-top');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-th-selected-x');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-tr-selected-left');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-tr-selected-y');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-col-selected');\n\t\tthis.removeClasses(tableEditor.table, 'landing-table-tr-selected');\n\t\tthis.removeClasses(tableEditor.table, 'table-selected-all-right');\n\t\tthis.removeClasses(tableEditor.table, 'table-selected-all-bottom');\n\t}\n\n\tonUnselect(tableEditor)\n\t{\n\t\tEvent.bind(tableEditor.table, 'click', () => {\n\t\t\tconst classList = ['landing-table-th-select-all', 'landing-table-row-dnd', 'landing-table-row-add'];\n\t\t\tlet isContains = [...event.target.classList].some(className => classList.includes(className));\n\t\t\tif (!isContains)\n\t\t\t{\n\t\t\t\tconst classListChild = ['landing-table-col-dnd'];\n\t\t\t\tisContains = [...event.target.parentElement.classList].some(className => classListChild.includes(className));\n\t\t\t\tif (!isContains)\n\t\t\t\t{\n\t\t\t\t\ttableEditor.unselect(tableEditor);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tselectAll(tableEditor)\n\t{\n\t\tlet thTech = tableEditor.table.querySelector('.landing-table-th-select-all');\n\t\tEvent.bind(thTech, 'click', () => {\n\t\t\tlet isSelectedTable = false;\n\t\t\tif (tableEditor.table.classList.contains('table-selected-all'))\n\t\t\t{\n\t\t\t\tisSelectedTable = true;\n\t\t\t}\n\t\t\ttableEditor.unselect(tableEditor, true);\n\t\t\tlet setRows = tableEditor.table.querySelectorAll('.landing-table-tr');\n\t\t\tlet count = 0;\n\t\t\tsetRows.forEach(function(row){\n\t\t\t\tlet setTh = row.childNodes;\n\t\t\t\tlet index = 0;\n\t\t\t\tlet lastThIndex = 0;\n\t\t\t\trow.childNodes.forEach(function(cell) {\n\t\t\t\t\tif (cell.nodeType === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastThIndex = index;\n\t\t\t\t\t}\n\t\t\t\t\tindex++;\n\t\t\t\t})\n\t\t\t\tif (count > 0)\n\t\t\t\t{\n\t\t\t\t\tlet lastTh = setTh[lastThIndex];\n\t\t\t\t\tif (isSelectedTable)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastTh.classList.remove('table-selected-all-right');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlastTh.classList.add('table-selected-all-right');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcount++;\n\t\t\t\tif (count === setRows.length)\n\t\t\t\t{\n\t\t\t\t\tsetTh.forEach(function(th) {\n\t\t\t\t\t\tif (th.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (isSelectedTable)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tth.classList.remove('table-selected-all-bottom');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tth.classList.add('table-selected-all-bottom');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t\tthTech.classList.toggle('landing-table-th-select-all-selected');\n\t\t\ttableEditor.table.classList.toggle('table-selected-all');\n\t\t\ttableEditor.table.querySelectorAll('.landing-table-col-dnd').forEach(function(thDnd){\n\t\t\t\tthDnd.classList.toggle('landing-table-cell-selected');\n\t\t\t})\n\t\t\ttableEditor.table.querySelectorAll('.landing-table-row-dnd').forEach(function(trDnd){\n\t\t\t\ttrDnd.classList.toggle('landing-table-cell-selected');\n\t\t\t})\n\t\t});\n\t}\n\n\tselectRow(tableEditor, neededPosition = null)\n\t{\n\t\tlet setTrDnd = tableEditor.table.querySelectorAll('.landing-table-row-dnd');\n\t\tif (neededPosition !== null)\n\t\t{\n\t\t\tvar newSetTrDnd = [];\n\t\t\tnewSetTrDnd[0] = setTrDnd[neededPosition];\n\t\t\tsetTrDnd = newSetTrDnd;\n\t\t}\n\t\tsetTrDnd.forEach(function(trDnd){\n\t\t\tEvent.bind(trDnd, 'click', () => {\n\t\t\t\tif (!event.srcElement.classList.contains('landing-table-row-add'))\n\t\t\t\t{\n\t\t\t\t\ttableEditor.unselect(tableEditor);\n\t\t\t\t\tlet setTh = trDnd.parentElement.childNodes;\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\tsetTh.forEach(function(th){\n\t\t\t\t\t\tif (th.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (count === 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tth.classList.add('landing-table-tr-selected-left');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (count >= 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tth.classList.add('landing-table-tr-selected-y');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\ttrDnd.parentElement.classList.add('landing-table-row-selected');\n\t\t\t\t\ttableEditor.tBody.classList.add('landing-table-tr-selected');\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tselectCol(tableEditor, neededPosition = null)\n\t{\n\t\tlet setThDnd = tableEditor.table.querySelectorAll('.landing-table-col-dnd');\n\t\tif (neededPosition !== null)\n\t\t{\n\t\t\tvar newSetTrDnd = [];\n\t\t\tnewSetTrDnd[0] = setThDnd[neededPosition];\n\t\t\tsetThDnd = newSetTrDnd;\n\t\t}\n\t\tsetThDnd.forEach(function(thDnd){\n\t\t\tEvent.bind(thDnd, 'click', () => {\n\t\t\t\tif (!event.srcElement.classList.contains('landing-table-col-add')\n\t\t\t\t\t&& !event.srcElement.classList.contains('landing-table-col-resize'))\n\t\t\t\t{\n\t\t\t\t\ttableEditor.unselect(tableEditor);\n\t\t\t\t\tlet cellIndex = thDnd.cellIndex;\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\ttableEditor.tBody.childNodes.forEach(function(tr) {\n\t\t\t\t\t\tif (tr.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet countNode = 0;\n\t\t\t\t\t\t\tlet nodeCount = 0;\n\t\t\t\t\t\t\tlet needNodePosition = 0;\n\t\t\t\t\t\t\ttr.childNodes.forEach(function(trChild) {\n\t\t\t\t\t\t\t\tif (trChild.nodeType === 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (cellIndex === nodeCount)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tneedNodePosition = countNode;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tnodeCount++\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcountNode++;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (count === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttr.classList.add('landing-table-col-selected');\n\t\t\t\t\t\t\t\ttr.childNodes[needNodePosition].classList.add('landing-table-th-selected-cell');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (count === 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttr.childNodes[needNodePosition].classList.add('landing-table-th-selected-top');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (count >= 1)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttr.childNodes[needNodePosition].classList.add('landing-table-th-selected-x');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t\ttr.childNodes[needNodePosition].classList.add('landing-table-th-selected');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t})\n\t}\n\n\tbuildLines(tableEditor)\n\t{\n\t\tif (tableEditor.node)\n\t\t{\n\t\t\tlet width = tableEditor.node.querySelector('.landing-table').getBoundingClientRect().width;\n\t\t\tlet height = tableEditor.node.querySelector('.landing-table').getBoundingClientRect().height;\n\t\t\tconst offset = 5;\n\t\t\tlet linesX = document.querySelectorAll('.landing-table-row-add-line');\n\t\t\tlinesX.forEach(function(lineX) {\n\t\t\t\tlineX.style.width = width + offset + \"px\";\n\t\t\t});\n\t\t\tlet linesY = document.querySelectorAll('.landing-table-col-add-line');\n\t\t\tlinesY.forEach(function(lineY) {\n\t\t\t\tlineY.style.height = height + offset + \"px\";\n\t\t\t});\n\t\t}\n\t}\n\n\tgetButtonsAddRow(node)\n\t{\n\t\treturn node.querySelectorAll('.landing-table-row-add');\n\t}\n\n\taddRow(tableEditor, neededPosition = null)\n\t{\n\t\tlet buttons = tableEditor.getButtonsAddRow(tableEditor.node);\n\t\tif (neededPosition !== null)\n\t\t{\n\t\t\tlet button = buttons[neededPosition];\n\t\t\tbuttons = [];\n\t\t\tbuttons[0] = button;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbuttons = Array.prototype.slice.call(buttons,0);\n\t\t}\n\t\tbuttons = Array.prototype.slice.call(buttons,0);\n\t\tbuttons.forEach(function(button){\n\t\t\tEvent.bind(button, 'click', () => {\n\t\t\t\tlet selectedCell = tableEditor.table.querySelector('.landing-table-th-selected-cell');\n\t\t\t\tlet selectedCellPos = 0;\n\t\t\t\tlet nodeCount = 0;\n\t\t\t\tif (selectedCell)\n\t\t\t\t{\n\t\t\t\t\tselectedCell.parentNode.childNodes.forEach(function(node) {\n\t\t\t\t\t\tif (selectedCellPos === 0 && node === selectedCell)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselectedCellPos = nodeCount;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (node.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnodeCount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tlet trDnd = document.createElement('th');\n\t\t\t\ttrDnd.classList.add('landing-table-th', 'landing-table-row-dnd');\n\t\t\t\tif (tableEditor.table.classList.contains('table-selected-all'))\n\t\t\t\t{\n\t\t\t\t\ttrDnd.classList.add('landing-table-cell-selected');\n\t\t\t\t}\n\t\t\t\tlet row = button.parentNode.parentNode;\n\t\t\t\tlet neededPosition = [...row.parentNode.children].indexOf(button.parentNode.parentNode)\n\t\t\t\tlet count = 0;\n\t\t\t\tlet lastElementPosition = 0;\n\t\t\t\ttableEditor.tBody.childNodes.forEach(function(element) {\n\t\t\t\t\tif (element.nodeType === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastElementPosition = count;\n\t\t\t\t\t}\n\t\t\t\t\tcount++;\n\t\t\t\t})\n\t\t\t\tlet tr = tableEditor.tBody.childNodes[lastElementPosition];\n\t\t\t\tlet newTd = document.createElement('td');\n\t\t\t\tnewTd.classList.add('landing-table-th', 'landing-table-td');\n\t\t\t\tnewTd.style.width = '50px';\n\t\t\t\tlet table = tableEditor.node.querySelector('.landing-table');\n\t\t\t\tif (table.hasAttribute('bg-color'))\n\t\t\t\t{\n\t\t\t\t\tnewTd.style.backgroundColor = table.getAttribute('bg-color');\n\t\t\t\t}\n\t\t\t\tif (table.hasAttribute('text-color'))\n\t\t\t\t{\n\t\t\t\t\tnewTd.style.color = table.getAttribute('text-color');\n\t\t\t\t}\n\t\t\t\tlet newTr = document.createElement('tr');\n\t\t\t\tnewTr.classList.add('landing-table-tr');\n\t\t\t\ttrDnd.title = BX.Landing.Utils.escapeText(BX.Landing.Loc.getMessage(\"LANDING_TABLE_DND_ROWS\"));\n\t\t\t\ttrDnd.style.width = '16px';\n\t\t\t\tlet divAddRow = document.createElement('div');\n\t\t\t\tdivAddRow.classList.add('landing-table-row-add');\n\t\t\t\tdivAddRow.title = BX.Landing.Utils.escapeText(BX.Landing.Loc.getMessage(\"LANDING_TABLE_BUTTON_ADD_COL\"));\n\t\t\t\tlet divLineX = document.createElement('div');\n\t\t\t\tdivLineX.classList.add('landing-table-row-add-line');\n\t\t\t\tlet divRowDnd = document.createElement('div');\n\t\t\t\tdivRowDnd.classList.add('landing-table-div-row-dnd');\n\t\t\t\tdivAddRow.appendChild(divLineX);\n\t\t\t\ttrDnd.appendChild(divAddRow);\n\t\t\t\ttrDnd.appendChild(divRowDnd);\n\t\t\t\tif (tr)\n\t\t\t\t{\n\t\t\t\t\tconst count = tr.children.length;\n\t\t\t\t\tlet setTd = [];\n\t\t\t\t\tbutton.parentNode.parentNode.childNodes.forEach(function(item) {\n\t\t\t\t\t\tif (item.nodeType == 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetTd.push(item);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\tfor (let i = 0; i < count; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet newTdCloned = newTd.cloneNode(true);\n\t\t\t\t\t\tif (i === selectedCellPos)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTdCloned.classList.add('landing-table-th-selected', 'landing-table-th-selected-x');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (i === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTr.appendChild(trDnd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewTdCloned.style.width = setTd[i].style.width;\n\t\t\t\t\t\t\tnewTdCloned.style.height = setTd[i].style.height;\n\t\t\t\t\t\t\tnewTr.appendChild(newTdCloned);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbutton.parentNode.parentNode.parentNode.insertBefore(newTr, button.parentNode.parentNode.nextSibling);\n\t\t\t\ttableEditor.buildLines(tableEditor);\n\t\t\t\ttableEditor.enableEditCells(tableEditor.node);\n\t\t\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t\t\t\ttableEditor.selectRow(tableEditor, neededPosition);\n\t\t\t\ttableEditor.addRow(tableEditor, neededPosition);\n\t\t\t\ttableEditor.unselect(tableEditor);\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t});\n\t\t})\n\t}\n\n\tgetButtonsAddCol(node)\n\t{\n\t\treturn node.querySelectorAll('.landing-table-col-add');\n\t}\n\n\taddCol(tableEditor, neededPosition = null)\n\t{\n\t\tlet buttons = tableEditor.getButtonsAddCol(tableEditor.node);\n\t\tif (neededPosition !== null)\n\t\t{\n\t\t\t// todo: is ok?\n\t\t\tlet button = buttons[neededPosition];\n\t\t\tbuttons = [];\n\t\t\tbuttons[0] = button;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tbuttons = Array.prototype.slice.call(buttons,0);\n\t\t}\n\t\tbuttons.forEach(function(button){\n\t\t\tEvent.bind(button, 'click', () => {\n\t\t\t\tlet selectedRow = tableEditor.table.querySelector('.landing-table-row-selected');\n\t\t\t\tlet selectedRowPos = 0;\n\t\t\t\tlet countNode = 0;\n\t\t\t\tif (selectedRow)\n\t\t\t\t{\n\t\t\t\t\tselectedRow.parentNode.childNodes.forEach(function(node) {\n\t\t\t\t\t\tif (node === selectedRow && selectedRowPos === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tselectedRowPos = countNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (node.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcountNode++;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tlet newThFirst;\n\t\t\t\tlet newThFirstCloned;\n\t\t\t\tnewThFirst = document.createElement('th');\n\t\t\t\tnewThFirst.classList.add('landing-table-th', 'landing-table-col-dnd');\n\t\t\t\tnewThFirst.style.width = '50px';\n\t\t\t\tif (tableEditor.table.classList.contains('table-selected-all'))\n\t\t\t\t{\n\t\t\t\t\tnewThFirst.classList.add('landing-table-cell-selected');\n\t\t\t\t}\n\t\t\t\tlet row = button.parentNode.parentNode;\n\t\t\t\tlet neededPosition = [...row.children].indexOf(button.parentNode)\n\t\t\t\tif (tableEditor.tBody.childNodes.length > 0)\n\t\t\t\t{\n\t\t\t\t\tlet count = 0;\n\t\t\t\t\ttableEditor.tBody.childNodes.forEach(function(element) {\n\t\t\t\t\t\tif (element.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewThFirstCloned = newThFirst.cloneNode(true);\n\t\t\t\t\t\t\tlet divColumnDnd = document.createElement('div');\n\t\t\t\t\t\t\tdivColumnDnd.classList.add('landing-table-div-col-dnd');\n\t\t\t\t\t\t\tdivColumnDnd.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_DND_COLS\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlet divColumnResize = document.createElement('div');\n\t\t\t\t\t\t\tdivColumnResize.classList.add('landing-table-col-resize');\n\t\t\t\t\t\t\tdivColumnResize.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_RESIZE_COLS\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlet divAddColHere = document.createElement('div');\n\t\t\t\t\t\t\tdivAddColHere.classList.add('landing-table-col-add');\n\t\t\t\t\t\t\tdivAddColHere.title = BX.Landing.Utils.escapeText(\n\t\t\t\t\t\t\t\tBX.Landing.Loc.getMessage(\"LANDING_TABLE_BUTTON_ADD_COL\")\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlet divLineY = document.createElement('div');\n\t\t\t\t\t\t\tdivLineY.classList.add('landing-table-col-add-line');\n\t\t\t\t\t\t\tdivAddColHere.appendChild(divLineY);\n\t\t\t\t\t\t\tnewThFirstCloned.appendChild(divColumnDnd);\n\t\t\t\t\t\t\tnewThFirstCloned.appendChild(divColumnResize);\n\t\t\t\t\t\t\tnewThFirstCloned.appendChild(divAddColHere);\n\t\t\t\t\t\t\tlet newTd = document.createElement('td');\n\t\t\t\t\t\t\tnewTd.classList.add('landing-table-th', 'landing-table-td');\n\t\t\t\t\t\t\tnewTd.style.width = '50px';\n\t\t\t\t\t\t\tlet table = tableEditor.node.querySelector('.landing-table');\n\t\t\t\t\t\t\tif (table.hasAttribute('bg-color'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnewTd.style.backgroundColor = table.getAttribute('bg-color');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (table.hasAttribute('text-color'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnewTd.style.color = table.getAttribute('text-color');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (selectedRowPos > 0 && selectedRowPos === count)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnewTd.classList.add('landing-table-tr-selected-y');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlet countChild = 0;\n\t\t\t\t\t\t\tlet countNodes = 0;\n\t\t\t\t\t\t\tlet newNeededPosition = 0;\n\t\t\t\t\t\t\telement.childNodes.forEach(function(node) {\n\t\t\t\t\t\t\t\tif (node.nodeType === 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (countNodes === neededPosition)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tnewNeededPosition = countChild;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tcountNodes++;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcountChild++;\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (count === 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement.childNodes[newNeededPosition].parentNode.insertBefore(\n\t\t\t\t\t\t\t\t\tnewThFirstCloned,\n\t\t\t\t\t\t\t\t\telement.childNodes[newNeededPosition].nextSibling\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\telement.childNodes[newNeededPosition].parentNode.insertBefore(\n\t\t\t\t\t\t\t\t\tnewTd,\n\t\t\t\t\t\t\t\t\telement.childNodes[newNeededPosition].nextSibling\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\ttableEditor.buildLines(tableEditor);\n\t\t\t\ttableEditor.enableEditCells(tableEditor.node);\n\t\t\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t\t\t\ttableEditor.selectCol(tableEditor, neededPosition);\n\t\t\t\ttableEditor.addCol(tableEditor, neededPosition);\n\t\t\t\ttableEditor.unselect(tableEditor);\n\t\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t\t});\n\t\t})\n\t}\n\n\tdragAndDropRows(tableEditor)\n\t{\n\t\tthis.draggableRows = new Draggable({\n\t\t\tcontainer: tableEditor.tBody,\n\t\t\tdraggable: '.landing-table-tr',\n\t\t\tdragElement: '.landing-table-row-dnd',\n\t\t\ttype: Draggable.HEADLESS,\n\t\t});\n\n\t\tlet rows = [];\n\t\tlet setRowPositionsY;\n\t\tlet setRowHeights;\n\t\tlet currentPositionRow;\n\t\tlet newPositionRow = 0;\n\t\tlet draggableRowOffsetY;\n\t\tlet tablePositionLeft;\n\t\tlet tablePositionTop;\n\t\tlet currentPositionRowX;\n\t\tlet currentPositionRowY;\n\t\tlet cloneRow;\n\t\tlet originalSource;\n\n\t\tthis.draggableRows\n\t\t\t.subscribe('start', (event) => {\n\t\t\t\toriginalSource = this.draggableRows.dragStartEvent.data.originalSource;\n\t\t\t\ttablePositionLeft = tableEditor.tBody.getBoundingClientRect().left;\n\t\t\t\ttablePositionTop = tableEditor.tBody.getBoundingClientRect().top;\n\t\t\t\tsetRowPositionsY = [];\n\t\t\t\tsetRowHeights = [];\n\t\t\t\tdraggableRowOffsetY = 0;\n\t\t\t\tcurrentPositionRow = event.getData().sourceIndex;\n\t\t\t\trows = tableEditor.tBody.querySelectorAll('.landing-table-tr');\n\t\t\t\trows.forEach(function(row) {\n\t\t\t\t\tsetRowPositionsY.push(row.getBoundingClientRect().y);\n\t\t\t\t\tsetRowHeights.push(row.getBoundingClientRect().height);\n\t\t\t\t});\n\t\t\t\tcurrentPositionRowX = rows[currentPositionRow].getBoundingClientRect().x;\n\t\t\t\tcurrentPositionRowY = rows[currentPositionRow].getBoundingClientRect().y;\n\t\t\t\tcloneRow = document.createElement('tr');\n\t\t\t\tcloneRow.classList.add('landing-table-tr-draggable');\n\t\t\t\trows[currentPositionRow].childNodes.forEach(function(node) {\n\t\t\t\t\tcloneRow.append(node.cloneNode(true));\n\t\t\t\t})\n\t\t\t\tif (rows[currentPositionRow].classList.contains('landing-table-row-selected'))\n\t\t\t\t{\n\t\t\t\t\tcloneRow.classList.add('landing-table-row-selected');\n\t\t\t\t}\n\t\t\t\tlet indexFirstNode;\n\t\t\t\tlet count = 0;\n\t\t\t\twhile (!indexFirstNode)\n\t\t\t\t{\n\t\t\t\t\tif (rows[currentPositionRow].childNodes[count].nodeType === 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tindexFirstNode = count;\n\t\t\t\t\t}\n\t\t\t\t\tcount++;\n\t\t\t\t}\n\t\t\t\tcloneRow.childNodes[indexFirstNode].style.borderRadius = getComputedStyle(rows[currentPositionRow].childNodes[indexFirstNode]).borderRadius;\n\t\t\t})\n\t\t\t.subscribe('move', (event) => {\n\t\t\t\tif (!originalSource.classList.contains('landing-table-row-add'))\n\t\t\t\t{\n\t\t\t\t\ttableEditor.tBody.classList.add(\"landing-table-draggable\");\n\t\t\t\t\trows[currentPositionRow].classList.add('landing-table-tr-taken');\n\t\t\t\t\tdraggableRowOffsetY = event.getData().offsetY;\n\t\t\t\t\ttableEditor.tBody.append(cloneRow);\n\t\t\t\t\tcloneRow.style.position = `absolute`;\n\t\t\t\t\tcloneRow.style.top = currentPositionRowY - tablePositionTop + draggableRowOffsetY - 0.5 + 'px';\n\t\t\t\t\tcloneRow.style.left = currentPositionRowX - tablePositionLeft - 0.5 + 'px';\n\t\t\t\t\tif (draggableRowOffsetY > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tcloneRow.style.transform = 'rotate(-1deg)';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tcloneRow.style.transform = 'rotate(1deg)';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.subscribe('end', () => {\n\t\t\t\tcloneRow.remove();\n\t\t\t\trows[currentPositionRow].classList.remove('landing-table-tr-taken');\n\t\t\t\trows[currentPositionRow].style = '';\n\t\t\t\tlet newDraggableRowPositionY = currentPositionRowY + draggableRowOffsetY;\n\t\t\t\tlet newDraggableRowPositionBottomY = newDraggableRowPositionY + rows[currentPositionRow].getBoundingClientRect().height;\n\t\t\t\tif (draggableRowOffsetY < 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let i = 0; i < setRowPositionsY.length; i++) {\n\t\t\t\t\t\tlet transitivePositionY = setRowPositionsY[i];\n\t\t\t\t\t\tif (i === currentPositionRow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransitivePositionY = setRowPositionsY[i] - (setRowHeights[i - 1] / 2);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (newDraggableRowPositionY >= transitivePositionY)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewPositionRow = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (draggableRowOffsetY === 0)\n\t\t\t\t{\n\t\t\t\t\tnewPositionRow = currentPositionRow;\n\t\t\t\t}\n\t\t\t\tif (draggableRowOffsetY > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let i = 0; i < setRowPositionsY.length; i++) {\n\t\t\t\t\t\tlet transitivePositionY = setRowPositionsY[i] + (setRowHeights[i] / 2);\n\t\t\t\t\t\tif (i === currentPositionRow)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttransitivePositionY = setRowPositionsY[i];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (newDraggableRowPositionBottomY >= transitivePositionY)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tnewPositionRow = i;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t//draggable row can only be in the 1 position, 0 position for technical row\n\t\t\t\tif (newPositionRow === 0)\n\t\t\t\t{\n\t\t\t\t\tnewPositionRow++;\n\t\t\t\t}\n\t\t\t\t//need to move\n\t\t\t\tif (currentPositionRow !== newPositionRow)\n\t\t\t\t{\n\t\t\t\t\tlet referenceNode = null;\n\t\t\t\t\tlet referenceNodeNext = null;\n\t\t\t\t\tif (rows[newPositionRow])\n\t\t\t\t\t{\n\t\t\t\t\t\treferenceNode = rows[newPositionRow];\n\t\t\t\t\t\treferenceNodeNext = referenceNode.nextSibling;\n\t\t\t\t\t\twhile(referenceNodeNext && referenceNodeNext.nodeType !== 1) {\n\t\t\t\t\t\t\treferenceNodeNext = referenceNodeNext.nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (currentPositionRow > newPositionRow)\n\t\t\t\t\t{\n\t\t\t\t\t\ttableEditor.tBody.insertBefore(rows[currentPositionRow], referenceNode);\n\t\t\t\t\t}\n\t\t\t\t\tif (currentPositionRow < newPositionRow)\n\t\t\t\t\t{\n\t\t\t\t\t\ttableEditor.tBody.insertBefore(rows[currentPositionRow], referenceNodeNext);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttableEditor.tBody.classList.remove(\"landing-table-draggable\");\n\t\t\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t\t\t})\n\t}\n\n\tdragAndDropCols(tableEditor)\n\t{\n\t\tthis.draggableCols = new Draggable({\n\t\t\tcontainer: tableEditor.tBody,\n\t\t\tdraggable: '.landing-table-div-col-dnd',\n\t\t\ttype: Draggable.HEADLESS,\n\t\t});\n\n\t\tlet currentPositionCol;\n\t\tlet newPositionCol = 0;\n\t\tlet draggableColOffsetX;\n\t\tlet draggableColOffsetY;\n\t\tlet setColCells = [];\n\t\tlet setColPositionsX;\n\t\tlet setColWidths;\n\t\tlet setRows;\n\t\tlet tablePositionLeft;\n\t\tlet currentPositionColX;\n\t\tlet setColCellsStyles;\n\t\tlet draggableCol;\n\n\t\tthis.draggableCols\n\t\t\t.subscribe('start', (event) => {\n\t\t\t\ttablePositionLeft = tableEditor.tBody.getBoundingClientRect().left;\n\t\t\t\tsetColPositionsX = [];\n\t\t\t\tsetColWidths = [];\n\t\t\t\tsetColCellsStyles = [];\n\t\t\t\tdraggableColOffsetX = 0;\n\t\t\t\tdraggableColOffsetY = 0;\n\t\t\t\tcurrentPositionCol = event.getData().originalSource.parentNode.cellIndex;\n\t\t\t\tif (currentPositionCol)\n\t\t\t\t{\n\t\t\t\t\tsetColCells = [...tableEditor.tBody.querySelectorAll('.landing-table-tr')].map((row) => {\n\t\t\t\t\t\treturn row.children[currentPositionCol];\n\t\t\t\t\t});\n\t\t\t\t\tsetRows = tableEditor.tBody.querySelectorAll('.landing-table-tr');\n\t\t\t\t\tlet thListOfFirstRow = setRows[0].childNodes;\n\t\t\t\t\tthListOfFirstRow.forEach(function(thOfFirstRow) {\n\t\t\t\t\t\tif (thOfFirstRow.nodeType === 1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsetColPositionsX.push(thOfFirstRow.getBoundingClientRect().x);\n\t\t\t\t\t\t\tsetColWidths.push(thOfFirstRow.getBoundingClientRect().width);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tcurrentPositionColX = setColCells[0].getBoundingClientRect().x;\n\t\t\t\tdraggableCol = document.createElement('div');\n\t\t\t\tsetColCells.forEach(function(cell) {\n\t\t\t\t\tsetColCellsStyles.push(cell.getAttribute('style'));\n\t\t\t\t\tdraggableCol.append(cell.cloneNode(true));\n\t\t\t\t\tdraggableCol.lastChild.style.borderRadius = getComputedStyle(cell).borderRadius;\n\t\t\t\t\tdraggableCol.lastChild.style.height = cell.getBoundingClientRect().height + 'px';\n\t\t\t\t\tdraggableCol.lastChild.style.width = cell.getBoundingClientRect().width + 'px';\n\t\t\t\t})\n\t\t\t\tdraggableCol.hidden = true;\n\t\t\t\tdraggableCol.classList.add('landing-table-col-draggable');\n\t\t\t\ttableEditor.tBody.append(draggableCol);\n\t\t\t})\n\t\t\t.subscribe('move', (event) => {\n\t\t\t\ttableEditor.tBody.classList.add(\"landing-table-draggable\");\n\t\t\t\tsetColCells.forEach((cell) => {\n\t\t\t\t\tcell.classList.add('landing-table-col-taken');\n\t\t\t\t});\n\t\t\t\tdraggableColOffsetX = event.getData().offsetX;\n\t\t\t\tdraggableColOffsetY = event.getData().offsetY;\n\t\t\t\tdraggableCol.hidden = false;\n\t\t\t\tdraggableCol.style.position = `absolute`;\n\t\t\t\tdraggableCol.style.left = currentPositionColX - tablePositionLeft + draggableColOffsetX + 'px';\n\t\t\t\tdraggableCol.style.top = 0 + 'px';\n\t\t\t\tif (draggableColOffsetX < 0)\n\t\t\t\t{\n\t\t\t\t\tdraggableCol.style.transform = 'rotate(-1deg)';\n\t\t\t\t}\n\t\t\t\tif (draggableColOffsetX > 0)\n\t\t\t\t{\n\t\t\t\t\tdraggableCol.style.transform = 'rotate(1deg)';\n\t\t\t\t}\n\t\t\t})\n\t\t\t.subscribe('end', () => {\n\t\t\t\tdraggableCol.remove();\n\t\t\t\tsetColCells.forEach((cell) => {\n\t\t\t\t\tcell.hidden = false;\n\t\t\t\t});\n\t\t\t\tif (currentPositionCol)\n\t\t\t\t{\n\t\t\t\t\tlet newDraggableColPositionX = setColPositionsX[currentPositionCol] + draggableColOffsetX;\n\t\t\t\t\tlet newDraggableColPositionRightX = setColPositionsX[currentPositionCol] + draggableColOffsetX + setColCells[0].getBoundingClientRect().width;\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\tsetColCells.forEach((cell) => {\n\t\t\t\t\t\tcell.style = setColCellsStyles[i];\n\t\t\t\t\t\tcell.classList.remove('landing-table-col-taken');\n\t\t\t\t\t\ti++;\n\t\t\t\t\t});\n\t\t\t\t\tif (draggableColOffsetX < 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let i = 0; i < setColPositionsX.length; i++) {\n\t\t\t\t\t\t\tlet transitivePositionX = setColPositionsX[i];\n\t\t\t\t\t\t\tif (i > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransitivePositionX = setColPositionsX[i] - (setColWidths[i - 1] / 2);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (newDraggableColPositionX > transitivePositionX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnewPositionCol = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (draggableColOffsetX === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPositionCol = currentPositionCol;\n\t\t\t\t\t}\n\t\t\t\t\tif (draggableColOffsetX > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (let i = 0; i < setColPositionsX.length; i++) {\n\t\t\t\t\t\t\tlet transitivePositionX = setColPositionsX[i] + (setColWidths[i] / 2);\n\t\t\t\t\t\t\tif (i === currentPositionCol)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttransitivePositionX = setColPositionsX[i];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (newDraggableColPositionRightX > transitivePositionX)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tnewPositionCol = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t//draggable col can only be in the 1 position, 0 position for technical\n\t\t\t\t\tif (newPositionCol === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewPositionCol++;\n\t\t\t\t\t}\n\t\t\t\t\tif (currentPositionCol !== newPositionCol)\n\t\t\t\t\t{\n\t\t\t\t\t\tsetRows.forEach(function(row) {\n\t\t\t\t\t\t\tlet childCells = [];\n\t\t\t\t\t\t\trow.childNodes.forEach(function(th) {\n\t\t\t\t\t\t\t\tif (th.nodeType === 1)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tchildCells.push(th);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tlet referenceNode = null;\n\t\t\t\t\t\t\tlet referenceNodeNext = null;\n\t\t\t\t\t\t\tif (childCells[newPositionCol])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treferenceNode = childCells[newPositionCol];\n\t\t\t\t\t\t\t\treferenceNodeNext = referenceNode.nextSibling;\n\t\t\t\t\t\t\t\twhile(referenceNodeNext && referenceNodeNext.nodeType !== 1) {\n\t\t\t\t\t\t\t\t\treferenceNodeNext = referenceNodeNext.nextSibling;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (currentPositionCol > newPositionCol)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trow.insertBefore(childCells[currentPositionCol], referenceNode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (currentPositionCol < newPositionCol)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\trow.insertBefore(childCells[currentPositionCol], referenceNodeNext);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\ttableEditor.tBody.classList.remove(\"landing-table-draggable\");\n\t\t\t\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tresizeColumn(tableEditor)\n\t{\n\t\tlet tbody = this.tBody;\n\t\tthis.resizeElement = new Draggable({\n\t\t\tcontainer: tbody,\n\t\t\tdraggable: '.landing-table-col-resize',\n\t\t\ttype: Draggable.HEADLESS,\n\t\t});\n\n\t\tlet thWidth;\n\t\tlet setTh;\n\n\t\tthis.resizeElement\n\t\t\t.subscribe('start', (event) => {\n\t\t\t\tsetTh = [];\n\t\t\t\tconst th = event.getData().draggable.parentNode;\n\t\t\t\tthWidth = th.getBoundingClientRect().width;\n\t\t\t\tconst currentPosition = th.cellIndex;\n\t\t\t\tconst setTr = tbody.querySelectorAll('.landing-table-tr');\n\t\t\t\tsetTr.forEach(function(tr) {\n\t\t\t\t\tsetTh.push(tr.children[currentPosition]);\n\t\t\t\t})\n\t\t\t})\n\t\t\t.subscribe('move', (event) => {\n\t\t\t\tconst offsetX = event.getData().offsetX;\n\t\t\t\tconst thNewWidth = thWidth + offsetX;\n\t\t\t\tsetTh.forEach(function(th) {\n\t\t\t\t\tBX.Dom.style(th, 'width', `${thNewWidth}px`);\n\t\t\t\t})\n\t\t\t})\n\t\t\t.subscribe('end', () => {\n\t\t\t\tlet tBodyWidth = tbody.getBoundingClientRect().width;\n\t\t\t\tlet tableContainerWidth = tbody.parentElement.parentElement.getBoundingClientRect().width;\n\t\t\t\tif (tableContainerWidth > tBodyWidth)\n\t\t\t\t{\n\t\t\t\t\ttbody.parentElement.parentElement.classList.add('landing-table-scroll-hidden');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttbody.parentElement.parentElement.classList.remove('landing-table-scroll-hidden');\n\t\t\t\t}\n\t\t\t\ttableEditor.buildLines(tableEditor);\n\t\t\t\tBX.Landing.Block.Node.Text.currentNode.onChange(true);\n\t\t\t})\n\t}\n\n\tenableEditCells(table)\n\t{\n\t\tlet thContentList = table.querySelectorAll('.landing-table-td');\n\t\tthContentList.forEach(function(td) {\n\t\t\ttd.setAttribute('contenteditable', 'true');\n\t\t})\n\t}\n\n\tremoveClasses(element, className)\n\t{\n\t\tlet setElements = element.querySelectorAll('.' + className)\n\t\tsetElements.forEach(function(element){\n\t\t\telement.classList.remove(className);\n\t\t})\n\t}\n\n\tonCopyTable(tableEditor)\n\t{\n\t\tBX.Event.EventEmitter.subscribe('BX.Landing.TableEditor:onCopyTable', ()=> {\n\t\t\ttableEditor.unselect(tableEditor);\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t});\n\t}\n\n\tonShowPopupMenu(tableEditor)\n\t{\n\t\tBX.Event.EventEmitter.subscribe('BX.Landing.PopupMenuWindow:onShow', ()=> {\n\t\t\ttableEditor.unselect(tableEditor);\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t});\n\t}\n\n\tonDeleteElementTable(tableEditor)\n\t{\n\t\tBX.Event.EventEmitter.subscribe('BX.Landing.TableEditor:onDeleteElementTable', ()=> {\n\t\t\ttableEditor.buildLines(tableEditor);\n\t\t});\n\t}\n}"],"names":["TableEditor","node","tBody","getElementsByTagName","table","querySelector","addTitles","enableEditCells","dragAndDropRows","dragAndDropCols","resizeColumn","buildLines","addRow","addCol","onUnselect","unselect","selectAll","selectRow","selectCol","onCopyTable","onDeleteElementTable","onShowPopupMenu","tableNode","hasAttribute","title","BX","Landing","Utils","escapeText","Loc","getMessage","querySelectorAll","forEach","element","setAttribute","tableEditor","isSelectAll","classList","remove","removeClasses","Event","bind","isContains","event","target","some","className","includes","classListChild","parentElement","thTech","isSelectedTable","contains","setRows","count","row","setTh","childNodes","index","lastThIndex","cell","nodeType","lastTh","add","length","th","toggle","thDnd","trDnd","neededPosition","setTrDnd","newSetTrDnd","srcElement","setThDnd","cellIndex","tr","countNode","nodeCount","needNodePosition","trChild","width","getBoundingClientRect","height","offset","linesX","document","lineX","style","linesY","lineY","buttons","getButtonsAddRow","button","Array","prototype","slice","call","selectedCell","selectedCellPos","parentNode","createElement","children","indexOf","lastElementPosition","newTd","backgroundColor","getAttribute","color","newTr","divAddRow","divLineX","divRowDnd","appendChild","setTd","item","push","i","newTdCloned","cloneNode","insertBefore","nextSibling","Block","Node","Text","currentNode","onChange","UI","Panel","EditorPanel","getInstance","hide","getButtonsAddCol","selectedRow","selectedRowPos","newThFirst","newThFirstCloned","divColumnDnd","divColumnResize","divAddColHere","divLineY","countChild","countNodes","newNeededPosition","draggableRows","Draggable","container","draggable","dragElement","type","HEADLESS","rows","setRowPositionsY","setRowHeights","currentPositionRow","newPositionRow","draggableRowOffsetY","tablePositionLeft","tablePositionTop","currentPositionRowX","currentPositionRowY","cloneRow","originalSource","subscribe","dragStartEvent","data","left","top","getData","sourceIndex","y","x","append","indexFirstNode","borderRadius","getComputedStyle","offsetY","position","transform","newDraggableRowPositionY","newDraggableRowPositionBottomY","transitivePositionY","referenceNode","referenceNodeNext","draggableCols","currentPositionCol","newPositionCol","draggableColOffsetX","draggableColOffsetY","setColCells","setColPositionsX","setColWidths","currentPositionColX","setColCellsStyles","draggableCol","map","thListOfFirstRow","thOfFirstRow","lastChild","hidden","offsetX","newDraggableColPositionX","newDraggableColPositionRightX","transitivePositionX","childCells","tbody","resizeElement","thWidth","currentPosition","setTr","thNewWidth","Dom","tBodyWidth","tableContainerWidth","thContentList","td","setElements","EventEmitter"],"mappings":";;;;;;;KAIqBA;CAEpB,uBAAYC,IAAZ,EACA;CAAA;CACC,SAAKA,IAAL,GAAYA,IAAZ;CACA,SAAKC,KAAL,GAAa,KAAKD,IAAL,CAAUE,oBAAV,CAA+B,OAA/B,EAAwC,CAAxC,CAAb;CACA,SAAKC,KAAL,GAAaH,IAAI,CAACI,aAAL,CAAmB,gBAAnB,CAAb;CACA,SAAKC,SAAL,CAAe,KAAKL,IAApB;CACA,SAAKM,eAAL,CAAqB,KAAKH,KAA1B;CACA,SAAKI,eAAL,CAAqB,IAArB;CACA,SAAKC,eAAL,CAAqB,IAArB;CACA,SAAKC,YAAL,CAAkB,IAAlB;CACA,SAAKC,UAAL,CAAgB,IAAhB;CACA,SAAKC,MAAL,CAAY,IAAZ;CACA,SAAKC,MAAL,CAAY,IAAZ;CACA,SAAKC,UAAL,CAAgB,IAAhB;CACA,SAAKC,QAAL,CAAc,IAAd;CACA,SAAKC,SAAL,CAAe,IAAf;CACA,SAAKC,SAAL,CAAe,IAAf;CACA,SAAKC,SAAL,CAAe,IAAf;CACA,SAAKC,WAAL,CAAiB,IAAjB;CACA,SAAKC,oBAAL,CAA0B,IAA1B;CACA,SAAKC,eAAL,CAAqB,IAArB;CACA;;;;+BAESC,WACV;CACC,UAAI,CAACA,SAAS,CAACC,YAAV,CAAuB,aAAvB,CAAL,EACA;CACCD,QAAAA,SAAS,CAACE,KAAV,GAAkB,EAAlB;CACAF,QAAAA,SAAS,CAACjB,aAAV,CAAwB,8BAAxB,EAAwDmB,KAAxD,GAAgEC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CAC/DH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,4BAA1B,CAD+D,CAAhE;CAGAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,4BAA3B,EAAyDC,OAAzD,CAAiE,UAASC,OAAT,EAAkB;CAClFA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,wBAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,2BAA3B,EAAwDC,OAAxD,CAAgE,UAASC,OAAT,EAAkB;CACjFA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,2BAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,wBAA3B,EAAqDC,OAArD,CAA6D,UAASC,OAAT,EAAkB;CAC9EA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,8BAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,wBAA3B,EAAqDC,OAArD,CAA6D,UAASC,OAAT,EAAkB;CAC9EA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,wBAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,wBAA3B,EAAqDC,OAArD,CAA6D,UAASC,OAAT,EAAkB;CAC9EA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,8BAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACS,gBAAV,CAA2B,mBAA3B,EAAgDC,OAAhD,CAAwD,UAASC,OAAT,EAAkB;CACzEA,UAAAA,OAAO,CAACT,KAAR,GAAgBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACfH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,kCAA1B,CADe,CAAhB;CAGA,SAJD;CAKAR,QAAAA,SAAS,CAACY,YAAV,CAAuB,aAAvB,EAAsC,MAAtC;CACA;CACD;;;8BAEQC,aACT;CAAA,UADsBC,WACtB,uEADoC,KACpC;;CACC,UAAI,CAACA,WAAL,EACA;CACCD,QAAAA,WAAW,CAAC/B,KAAZ,CAAkBiC,SAAlB,CAA4BC,MAA5B,CAAmC,oBAAnC;CACA,aAAKC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,sCAAtC;CACA,aAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,6BAAtC;CACA;;CACD,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,4BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,2BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,gCAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,+BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,6BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,gCAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,6BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,4BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,2BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,0BAAtC;CACA,WAAKmC,aAAL,CAAmBJ,WAAW,CAAC/B,KAA/B,EAAsC,2BAAtC;CACA;;;gCAEU+B,aACX;CACCK,MAAAA,eAAK,CAACC,IAAN,CAAWN,WAAW,CAAC/B,KAAvB,EAA8B,OAA9B,EAAuC,YAAM;CAC5C,YAAMiC,SAAS,GAAG,CAAC,6BAAD,EAAgC,uBAAhC,EAAyD,uBAAzD,CAAlB;CACA,YAAIK,UAAU,GAAG,+BAAIC,KAAK,CAACC,MAAN,CAAaP,SAAjB,EAA4BQ,IAA5B,CAAiC,UAAAC,SAAS;CAAA,iBAAIT,SAAS,CAACU,QAAV,CAAmBD,SAAnB,CAAJ;CAAA,SAA1C,CAAjB;;CACA,YAAI,CAACJ,UAAL,EACA;CACC,cAAMM,cAAc,GAAG,CAAC,uBAAD,CAAvB;CACAN,UAAAA,UAAU,GAAG,+BAAIC,KAAK,CAACC,MAAN,CAAaK,aAAb,CAA2BZ,SAA/B,EAA0CQ,IAA1C,CAA+C,UAAAC,SAAS;CAAA,mBAAIE,cAAc,CAACD,QAAf,CAAwBD,SAAxB,CAAJ;CAAA,WAAxD,CAAb;;CACA,cAAI,CAACJ,UAAL,EACA;CACCP,YAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACA;CACD;CACD,OAZD;CAaA;;;+BAESA,aACV;CACC,UAAIe,MAAM,GAAGf,WAAW,CAAC/B,KAAZ,CAAkBC,aAAlB,CAAgC,8BAAhC,CAAb;CACAmC,MAAAA,eAAK,CAACC,IAAN,CAAWS,MAAX,EAAmB,OAAnB,EAA4B,YAAM;CACjC,YAAIC,eAAe,GAAG,KAAtB;;CACA,YAAIhB,WAAW,CAAC/B,KAAZ,CAAkBiC,SAAlB,CAA4Be,QAA5B,CAAqC,oBAArC,CAAJ,EACA;CACCD,UAAAA,eAAe,GAAG,IAAlB;CACA;;CACDhB,QAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB,EAAkC,IAAlC;CACA,YAAIkB,OAAO,GAAGlB,WAAW,CAAC/B,KAAZ,CAAkB2B,gBAAlB,CAAmC,mBAAnC,CAAd;CACA,YAAIuB,KAAK,GAAG,CAAZ;CACAD,QAAAA,OAAO,CAACrB,OAAR,CAAgB,UAASuB,GAAT,EAAa;CAC5B,cAAIC,KAAK,GAAGD,GAAG,CAACE,UAAhB;CACA,cAAIC,KAAK,GAAG,CAAZ;CACA,cAAIC,WAAW,GAAG,CAAlB;CACAJ,UAAAA,GAAG,CAACE,UAAJ,CAAezB,OAAf,CAAuB,UAAS4B,IAAT,EAAe;CACrC,gBAAIA,IAAI,CAACC,QAAL,KAAkB,CAAtB,EACA;CACCF,cAAAA,WAAW,GAAGD,KAAd;CACA;;CACDA,YAAAA,KAAK;CACL,WAND;;CAOA,cAAIJ,KAAK,GAAG,CAAZ,EACA;CACC,gBAAIQ,MAAM,GAAGN,KAAK,CAACG,WAAD,CAAlB;;CACA,gBAAIR,eAAJ,EACA;CACCW,cAAAA,MAAM,CAACzB,SAAP,CAAiBC,MAAjB,CAAwB,0BAAxB;CACA,aAHD,MAKA;CACCwB,cAAAA,MAAM,CAACzB,SAAP,CAAiB0B,GAAjB,CAAqB,0BAArB;CACA;CACD;;CACDT,UAAAA,KAAK;;CACL,cAAIA,KAAK,KAAKD,OAAO,CAACW,MAAtB,EACA;CACCR,YAAAA,KAAK,CAACxB,OAAN,CAAc,UAASiC,EAAT,EAAa;CAC1B,kBAAIA,EAAE,CAACJ,QAAH,KAAgB,CAApB,EACA;CACC,oBAAIV,eAAJ,EACA;CACCc,kBAAAA,EAAE,CAAC5B,SAAH,CAAaC,MAAb,CAAoB,2BAApB;CACA,iBAHD,MAKA;CACC2B,kBAAAA,EAAE,CAAC5B,SAAH,CAAa0B,GAAb,CAAiB,2BAAjB;CACA;CACD;CACD,aAZD;CAaA;CACD,SAxCD;CAyCAb,QAAAA,MAAM,CAACb,SAAP,CAAiB6B,MAAjB,CAAwB,sCAAxB;CACA/B,QAAAA,WAAW,CAAC/B,KAAZ,CAAkBiC,SAAlB,CAA4B6B,MAA5B,CAAmC,oBAAnC;CACA/B,QAAAA,WAAW,CAAC/B,KAAZ,CAAkB2B,gBAAlB,CAAmC,wBAAnC,EAA6DC,OAA7D,CAAqE,UAASmC,KAAT,EAAe;CACnFA,UAAAA,KAAK,CAAC9B,SAAN,CAAgB6B,MAAhB,CAAuB,6BAAvB;CACA,SAFD;CAGA/B,QAAAA,WAAW,CAAC/B,KAAZ,CAAkB2B,gBAAlB,CAAmC,wBAAnC,EAA6DC,OAA7D,CAAqE,UAASoC,KAAT,EAAe;CACnFA,UAAAA,KAAK,CAAC/B,SAAN,CAAgB6B,MAAhB,CAAuB,6BAAvB;CACA,SAFD;CAGA,OA1DD;CA2DA;;;+BAES/B,aACV;CAAA,UADuBkC,cACvB,uEADwC,IACxC;CACC,UAAIC,QAAQ,GAAGnC,WAAW,CAAC/B,KAAZ,CAAkB2B,gBAAlB,CAAmC,wBAAnC,CAAf;;CACA,UAAIsC,cAAc,KAAK,IAAvB,EACA;CACC,YAAIE,WAAW,GAAG,EAAlB;CACAA,QAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBD,QAAQ,CAACD,cAAD,CAAzB;CACAC,QAAAA,QAAQ,GAAGC,WAAX;CACA;;CACDD,MAAAA,QAAQ,CAACtC,OAAT,CAAiB,UAASoC,KAAT,EAAe;CAC/B5B,QAAAA,eAAK,CAACC,IAAN,CAAW2B,KAAX,EAAkB,OAAlB,EAA2B,YAAM;CAChC,cAAI,CAACzB,KAAK,CAAC6B,UAAN,CAAiBnC,SAAjB,CAA2Be,QAA3B,CAAoC,uBAApC,CAAL,EACA;CACCjB,YAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACA,gBAAIqB,KAAK,GAAGY,KAAK,CAACnB,aAAN,CAAoBQ,UAAhC;CACA,gBAAIH,KAAK,GAAG,CAAZ;CACAE,YAAAA,KAAK,CAACxB,OAAN,CAAc,UAASiC,EAAT,EAAY;CACzB,kBAAIA,EAAE,CAACJ,QAAH,KAAgB,CAApB,EACA;CACC,oBAAIP,KAAK,KAAK,CAAd,EACA;CACCW,kBAAAA,EAAE,CAAC5B,SAAH,CAAa0B,GAAb,CAAiB,gCAAjB;CACA;;CACD,oBAAIT,KAAK,IAAI,CAAb,EACA;CACCW,kBAAAA,EAAE,CAAC5B,SAAH,CAAa0B,GAAb,CAAiB,6BAAjB;CACA;;CACDT,gBAAAA,KAAK;CACL;CACD,aAbD;CAcAc,YAAAA,KAAK,CAACnB,aAAN,CAAoBZ,SAApB,CAA8B0B,GAA9B,CAAkC,4BAAlC;CACA5B,YAAAA,WAAW,CAACjC,KAAZ,CAAkBmC,SAAlB,CAA4B0B,GAA5B,CAAgC,2BAAhC;CACA;CACD,SAvBD;CAwBA,OAzBD;CA0BA;;;+BAES5B,aACV;CAAA,UADuBkC,cACvB,uEADwC,IACxC;CACC,UAAII,QAAQ,GAAGtC,WAAW,CAAC/B,KAAZ,CAAkB2B,gBAAlB,CAAmC,wBAAnC,CAAf;;CACA,UAAIsC,cAAc,KAAK,IAAvB,EACA;CACC,YAAIE,WAAW,GAAG,EAAlB;CACAA,QAAAA,WAAW,CAAC,CAAD,CAAX,GAAiBE,QAAQ,CAACJ,cAAD,CAAzB;CACAI,QAAAA,QAAQ,GAAGF,WAAX;CACA;;CACDE,MAAAA,QAAQ,CAACzC,OAAT,CAAiB,UAASmC,KAAT,EAAe;CAC/B3B,QAAAA,eAAK,CAACC,IAAN,CAAW0B,KAAX,EAAkB,OAAlB,EAA2B,YAAM;CAChC,cAAI,CAACxB,KAAK,CAAC6B,UAAN,CAAiBnC,SAAjB,CAA2Be,QAA3B,CAAoC,uBAApC,CAAD,IACA,CAACT,KAAK,CAAC6B,UAAN,CAAiBnC,SAAjB,CAA2Be,QAA3B,CAAoC,0BAApC,CADL,EAEA;CACCjB,YAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACA,gBAAIuC,SAAS,GAAGP,KAAK,CAACO,SAAtB;CACA,gBAAIpB,KAAK,GAAG,CAAZ;CACAnB,YAAAA,WAAW,CAACjC,KAAZ,CAAkBuD,UAAlB,CAA6BzB,OAA7B,CAAqC,UAAS2C,EAAT,EAAa;CACjD,kBAAIA,EAAE,CAACd,QAAH,KAAgB,CAApB,EACA;CACC,oBAAIe,SAAS,GAAG,CAAhB;CACA,oBAAIC,SAAS,GAAG,CAAhB;CACA,oBAAIC,gBAAgB,GAAG,CAAvB;CACAH,gBAAAA,EAAE,CAAClB,UAAH,CAAczB,OAAd,CAAsB,UAAS+C,OAAT,EAAkB;CACvC,sBAAIA,OAAO,CAAClB,QAAR,KAAqB,CAAzB,EACA;CACC,wBAAIa,SAAS,KAAKG,SAAlB,EACA;CACCC,sBAAAA,gBAAgB,GAAGF,SAAnB;CACA;;CACDC,oBAAAA,SAAS;CACT;;CACDD,kBAAAA,SAAS;CACT,iBAVD;;CAWA,oBAAItB,KAAK,KAAK,CAAd,EACA;CACCqB,kBAAAA,EAAE,CAACtC,SAAH,CAAa0B,GAAb,CAAiB,4BAAjB;CACAY,kBAAAA,EAAE,CAAClB,UAAH,CAAcqB,gBAAd,EAAgCzC,SAAhC,CAA0C0B,GAA1C,CAA8C,gCAA9C;CACA;;CACD,oBAAIT,KAAK,KAAK,CAAd,EACA;CACCqB,kBAAAA,EAAE,CAAClB,UAAH,CAAcqB,gBAAd,EAAgCzC,SAAhC,CAA0C0B,GAA1C,CAA8C,+BAA9C;CACA;;CACD,oBAAIT,KAAK,IAAI,CAAb,EACA;CACCqB,kBAAAA,EAAE,CAAClB,UAAH,CAAcqB,gBAAd,EAAgCzC,SAAhC,CAA0C0B,GAA1C,CAA8C,6BAA9C;CACA;;CACDT,gBAAAA,KAAK;CACLqB,gBAAAA,EAAE,CAAClB,UAAH,CAAcqB,gBAAd,EAAgCzC,SAAhC,CAA0C0B,GAA1C,CAA8C,2BAA9C;CACA;CACD,aAjCD;CAkCA;CACD,SA1CD;CA2CA,OA5CD;CA6CA;;;gCAEU5B,aACX;CACC,UAAIA,WAAW,CAAClC,IAAhB,EACA;CACC,YAAI+E,KAAK,GAAG7C,WAAW,CAAClC,IAAZ,CAAiBI,aAAjB,CAA+B,gBAA/B,EAAiD4E,qBAAjD,GAAyED,KAArF;CACA,YAAIE,MAAM,GAAG/C,WAAW,CAAClC,IAAZ,CAAiBI,aAAjB,CAA+B,gBAA/B,EAAiD4E,qBAAjD,GAAyEC,MAAtF;CACA,YAAMC,MAAM,GAAG,CAAf;CACA,YAAIC,MAAM,GAAGC,QAAQ,CAACtD,gBAAT,CAA0B,6BAA1B,CAAb;CACAqD,QAAAA,MAAM,CAACpD,OAAP,CAAe,UAASsD,KAAT,EAAgB;CAC9BA,UAAAA,KAAK,CAACC,KAAN,CAAYP,KAAZ,GAAoBA,KAAK,GAAGG,MAAR,GAAiB,IAArC;CACA,SAFD;CAGA,YAAIK,MAAM,GAAGH,QAAQ,CAACtD,gBAAT,CAA0B,6BAA1B,CAAb;CACAyD,QAAAA,MAAM,CAACxD,OAAP,CAAe,UAASyD,KAAT,EAAgB;CAC9BA,UAAAA,KAAK,CAACF,KAAN,CAAYL,MAAZ,GAAqBA,MAAM,GAAGC,MAAT,GAAkB,IAAvC;CACA,SAFD;CAGA;CACD;;;sCAEgBlF,MACjB;CACC,aAAOA,IAAI,CAAC8B,gBAAL,CAAsB,wBAAtB,CAAP;CACA;;;4BAEMI,aACP;CAAA,UADoBkC,cACpB,uEADqC,IACrC;CACC,UAAIqB,OAAO,GAAGvD,WAAW,CAACwD,gBAAZ,CAA6BxD,WAAW,CAAClC,IAAzC,CAAd;;CACA,UAAIoE,cAAc,KAAK,IAAvB,EACA;CACC,YAAIuB,MAAM,GAAGF,OAAO,CAACrB,cAAD,CAApB;CACAqB,QAAAA,OAAO,GAAG,EAAV;CACAA,QAAAA,OAAO,CAAC,CAAD,CAAP,GAAaE,MAAb;CACA,OALD,MAOA;CACCF,QAAAA,OAAO,GAAGG,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BN,OAA3B,EAAmC,CAAnC,CAAV;CACA;;CACDA,MAAAA,OAAO,GAAGG,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BN,OAA3B,EAAmC,CAAnC,CAAV;CACAA,MAAAA,OAAO,CAAC1D,OAAR,CAAgB,UAAS4D,MAAT,EAAgB;CAC/BpD,QAAAA,eAAK,CAACC,IAAN,CAAWmD,MAAX,EAAmB,OAAnB,EAA4B,YAAM;CACjC,cAAIK,YAAY,GAAG9D,WAAW,CAAC/B,KAAZ,CAAkBC,aAAlB,CAAgC,iCAAhC,CAAnB;CACA,cAAI6F,eAAe,GAAG,CAAtB;CACA,cAAIrB,SAAS,GAAG,CAAhB;;CACA,cAAIoB,YAAJ,EACA;CACCA,YAAAA,YAAY,CAACE,UAAb,CAAwB1C,UAAxB,CAAmCzB,OAAnC,CAA2C,UAAS/B,IAAT,EAAe;CACzD,kBAAIiG,eAAe,KAAK,CAApB,IAAyBjG,IAAI,KAAKgG,YAAtC,EACA;CACCC,gBAAAA,eAAe,GAAGrB,SAAlB;CACA;;CACD,kBAAI5E,IAAI,CAAC4D,QAAL,KAAkB,CAAtB,EACA;CACCgB,gBAAAA,SAAS;CACT;CACD,aATD;CAUA;;CACD,cAAIT,KAAK,GAAGiB,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAZ;CACAhC,UAAAA,KAAK,CAAC/B,SAAN,CAAgB0B,GAAhB,CAAoB,kBAApB,EAAwC,uBAAxC;;CACA,cAAI5B,WAAW,CAAC/B,KAAZ,CAAkBiC,SAAlB,CAA4Be,QAA5B,CAAqC,oBAArC,CAAJ,EACA;CACCgB,YAAAA,KAAK,CAAC/B,SAAN,CAAgB0B,GAAhB,CAAoB,6BAApB;CACA;;CACD,cAAIR,GAAG,GAAGqC,MAAM,CAACO,UAAP,CAAkBA,UAA5B;CACA,cAAI9B,cAAc,GAAG,+BAAId,GAAG,CAAC4C,UAAJ,CAAeE,QAAnB,EAA6BC,OAA7B,CAAqCV,MAAM,CAACO,UAAP,CAAkBA,UAAvD,CAArB;CACA,cAAI7C,KAAK,GAAG,CAAZ;CACA,cAAIiD,mBAAmB,GAAG,CAA1B;CACApE,UAAAA,WAAW,CAACjC,KAAZ,CAAkBuD,UAAlB,CAA6BzB,OAA7B,CAAqC,UAASC,OAAT,EAAkB;CACtD,gBAAIA,OAAO,CAAC4B,QAAR,KAAqB,CAAzB,EACA;CACC0C,cAAAA,mBAAmB,GAAGjD,KAAtB;CACA;;CACDA,YAAAA,KAAK;CACL,WAND;CAOA,cAAIqB,EAAE,GAAGxC,WAAW,CAACjC,KAAZ,CAAkBuD,UAAlB,CAA6B8C,mBAA7B,CAAT;CACA,cAAIC,KAAK,GAAGnB,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAZ;CACAI,UAAAA,KAAK,CAACnE,SAAN,CAAgB0B,GAAhB,CAAoB,kBAApB,EAAwC,kBAAxC;CACAyC,UAAAA,KAAK,CAACjB,KAAN,CAAYP,KAAZ,GAAoB,MAApB;CACA,cAAI5E,KAAK,GAAG+B,WAAW,CAAClC,IAAZ,CAAiBI,aAAjB,CAA+B,gBAA/B,CAAZ;;CACA,cAAID,KAAK,CAACmB,YAAN,CAAmB,UAAnB,CAAJ,EACA;CACCiF,YAAAA,KAAK,CAACjB,KAAN,CAAYkB,eAAZ,GAA8BrG,KAAK,CAACsG,YAAN,CAAmB,UAAnB,CAA9B;CACA;;CACD,cAAItG,KAAK,CAACmB,YAAN,CAAmB,YAAnB,CAAJ,EACA;CACCiF,YAAAA,KAAK,CAACjB,KAAN,CAAYoB,KAAZ,GAAoBvG,KAAK,CAACsG,YAAN,CAAmB,YAAnB,CAApB;CACA;;CACD,cAAIE,KAAK,GAAGvB,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAZ;CACAQ,UAAAA,KAAK,CAACvE,SAAN,CAAgB0B,GAAhB,CAAoB,kBAApB;CACAK,UAAAA,KAAK,CAAC5C,KAAN,GAAcC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CAA4BH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,wBAA1B,CAA5B,CAAd;CACAsC,UAAAA,KAAK,CAACmB,KAAN,CAAYP,KAAZ,GAAoB,MAApB;CACA,cAAI6B,SAAS,GAAGxB,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAhB;CACAS,UAAAA,SAAS,CAACxE,SAAV,CAAoB0B,GAApB,CAAwB,uBAAxB;CACA8C,UAAAA,SAAS,CAACrF,KAAV,GAAkBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CAA4BH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,8BAA1B,CAA5B,CAAlB;CACA,cAAIgF,QAAQ,GAAGzB,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAf;CACAU,UAAAA,QAAQ,CAACzE,SAAT,CAAmB0B,GAAnB,CAAuB,4BAAvB;CACA,cAAIgD,SAAS,GAAG1B,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAhB;CACAW,UAAAA,SAAS,CAAC1E,SAAV,CAAoB0B,GAApB,CAAwB,2BAAxB;CACA8C,UAAAA,SAAS,CAACG,WAAV,CAAsBF,QAAtB;CACA1C,UAAAA,KAAK,CAAC4C,WAAN,CAAkBH,SAAlB;CACAzC,UAAAA,KAAK,CAAC4C,WAAN,CAAkBD,SAAlB;;CACA,cAAIpC,EAAJ,EACA;CACC,gBAAMrB,MAAK,GAAGqB,EAAE,CAAC0B,QAAH,CAAYrC,MAA1B;CACA,gBAAIiD,KAAK,GAAG,EAAZ;CACArB,YAAAA,MAAM,CAACO,UAAP,CAAkBA,UAAlB,CAA6B1C,UAA7B,CAAwCzB,OAAxC,CAAgD,UAASkF,IAAT,EAAe;CAC9D,kBAAIA,IAAI,CAACrD,QAAL,IAAiB,CAArB,EACA;CACCoD,gBAAAA,KAAK,CAACE,IAAN,CAAWD,IAAX;CACA;CACD,aALD;;CAMA,iBAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9D,MAApB,EAA2B8D,CAAC,EAA5B,EACA;CACC,kBAAIC,WAAW,GAAGb,KAAK,CAACc,SAAN,CAAgB,IAAhB,CAAlB;;CACA,kBAAIF,CAAC,KAAKlB,eAAV,EACA;CACCmB,gBAAAA,WAAW,CAAChF,SAAZ,CAAsB0B,GAAtB,CAA0B,2BAA1B,EAAuD,6BAAvD;CACA;;CACD,kBAAIqD,CAAC,KAAK,CAAV,EACA;CACCR,gBAAAA,KAAK,CAACI,WAAN,CAAkB5C,KAAlB;CACA,eAHD,MAKA;CACCiD,gBAAAA,WAAW,CAAC9B,KAAZ,CAAkBP,KAAlB,GAA0BiC,KAAK,CAACG,CAAD,CAAL,CAAS7B,KAAT,CAAeP,KAAzC;CACAqC,gBAAAA,WAAW,CAAC9B,KAAZ,CAAkBL,MAAlB,GAA2B+B,KAAK,CAACG,CAAD,CAAL,CAAS7B,KAAT,CAAeL,MAA1C;CACA0B,gBAAAA,KAAK,CAACI,WAAN,CAAkBK,WAAlB;CACA;CACD;CACD;;CACDzB,UAAAA,MAAM,CAACO,UAAP,CAAkBA,UAAlB,CAA6BA,UAA7B,CAAwCoB,YAAxC,CAAqDX,KAArD,EAA4DhB,MAAM,CAACO,UAAP,CAAkBA,UAAlB,CAA6BqB,WAAzF;CACArF,UAAAA,WAAW,CAACxB,UAAZ,CAAuBwB,WAAvB;CACAA,UAAAA,WAAW,CAAC5B,eAAZ,CAA4B4B,WAAW,CAAClC,IAAxC;CACAwB,UAAAA,EAAE,CAACC,OAAH,CAAW+F,KAAX,CAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,WAA3B,CAAuCC,QAAvC,CAAgD,IAAhD;CACA1F,UAAAA,WAAW,CAAClB,SAAZ,CAAsBkB,WAAtB,EAAmCkC,cAAnC;CACAlC,UAAAA,WAAW,CAACvB,MAAZ,CAAmBuB,WAAnB,EAAgCkC,cAAhC;CACAlC,UAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACAV,UAAAA,EAAE,CAACC,OAAH,CAAWoG,EAAX,CAAcC,KAAd,CAAoBC,WAApB,CAAgCC,WAAhC,GAA8CC,IAA9C;CACA,SAlGD;CAmGA,OApGD;CAqGA;;;sCAEgBjI,MACjB;CACC,aAAOA,IAAI,CAAC8B,gBAAL,CAAsB,wBAAtB,CAAP;CACA;;;4BAEMI,aACP;CAAA,UADoBkC,cACpB,uEADqC,IACrC;CACC,UAAIqB,OAAO,GAAGvD,WAAW,CAACgG,gBAAZ,CAA6BhG,WAAW,CAAClC,IAAzC,CAAd;;CACA,UAAIoE,cAAc,KAAK,IAAvB,EACA;CACC;CACA,YAAIuB,MAAM,GAAGF,OAAO,CAACrB,cAAD,CAApB;CACAqB,QAAAA,OAAO,GAAG,EAAV;CACAA,QAAAA,OAAO,CAAC,CAAD,CAAP,GAAaE,MAAb;CACA,OAND,MAQA;CACCF,QAAAA,OAAO,GAAGG,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BN,OAA3B,EAAmC,CAAnC,CAAV;CACA;;CACDA,MAAAA,OAAO,CAAC1D,OAAR,CAAgB,UAAS4D,MAAT,EAAgB;CAC/BpD,QAAAA,eAAK,CAACC,IAAN,CAAWmD,MAAX,EAAmB,OAAnB,EAA4B,YAAM;CACjC,cAAIwC,WAAW,GAAGjG,WAAW,CAAC/B,KAAZ,CAAkBC,aAAlB,CAAgC,6BAAhC,CAAlB;CACA,cAAIgI,cAAc,GAAG,CAArB;CACA,cAAIzD,SAAS,GAAG,CAAhB;;CACA,cAAIwD,WAAJ,EACA;CACCA,YAAAA,WAAW,CAACjC,UAAZ,CAAuB1C,UAAvB,CAAkCzB,OAAlC,CAA0C,UAAS/B,IAAT,EAAe;CACxD,kBAAIA,IAAI,KAAKmI,WAAT,IAAwBC,cAAc,KAAK,CAA/C,EACA;CACCA,gBAAAA,cAAc,GAAGzD,SAAjB;CACA;;CACD,kBAAI3E,IAAI,CAAC4D,QAAL,KAAkB,CAAtB,EACA;CACCe,gBAAAA,SAAS;CACT;CACD,aATD;CAUA;;CACD,cAAI0D,UAAJ;CACA,cAAIC,gBAAJ;CACAD,UAAAA,UAAU,GAAGjD,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAb;CACAkC,UAAAA,UAAU,CAACjG,SAAX,CAAqB0B,GAArB,CAAyB,kBAAzB,EAA6C,uBAA7C;CACAuE,UAAAA,UAAU,CAAC/C,KAAX,CAAiBP,KAAjB,GAAyB,MAAzB;;CACA,cAAI7C,WAAW,CAAC/B,KAAZ,CAAkBiC,SAAlB,CAA4Be,QAA5B,CAAqC,oBAArC,CAAJ,EACA;CACCkF,YAAAA,UAAU,CAACjG,SAAX,CAAqB0B,GAArB,CAAyB,6BAAzB;CACA;;CACD,cAAIR,GAAG,GAAGqC,MAAM,CAACO,UAAP,CAAkBA,UAA5B;CACA,cAAI9B,cAAc,GAAG,+BAAId,GAAG,CAAC8C,QAAR,EAAkBC,OAAlB,CAA0BV,MAAM,CAACO,UAAjC,CAArB;;CACA,cAAIhE,WAAW,CAACjC,KAAZ,CAAkBuD,UAAlB,CAA6BO,MAA7B,GAAsC,CAA1C,EACA;CACC,gBAAIV,KAAK,GAAG,CAAZ;CACAnB,YAAAA,WAAW,CAACjC,KAAZ,CAAkBuD,UAAlB,CAA6BzB,OAA7B,CAAqC,UAASC,OAAT,EAAkB;CACtD,kBAAIA,OAAO,CAAC4B,QAAR,KAAqB,CAAzB,EACA;CACC0E,gBAAAA,gBAAgB,GAAGD,UAAU,CAAChB,SAAX,CAAqB,IAArB,CAAnB;CACA,oBAAIkB,YAAY,GAAGnD,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAnB;CACAoC,gBAAAA,YAAY,CAACnG,SAAb,CAAuB0B,GAAvB,CAA2B,2BAA3B;CACAyE,gBAAAA,YAAY,CAAChH,KAAb,GAAqBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACpBH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,wBAA1B,CADoB,CAArB;CAGA,oBAAI2G,eAAe,GAAGpD,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAtB;CACAqC,gBAAAA,eAAe,CAACpG,SAAhB,CAA0B0B,GAA1B,CAA8B,0BAA9B;CACA0E,gBAAAA,eAAe,CAACjH,KAAhB,GAAwBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACvBH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,2BAA1B,CADuB,CAAxB;CAGA,oBAAI4G,aAAa,GAAGrD,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAApB;CACAsC,gBAAAA,aAAa,CAACrG,SAAd,CAAwB0B,GAAxB,CAA4B,uBAA5B;CACA2E,gBAAAA,aAAa,CAAClH,KAAd,GAAsBC,EAAE,CAACC,OAAH,CAAWC,KAAX,CAAiBC,UAAjB,CACrBH,EAAE,CAACC,OAAH,CAAWG,GAAX,CAAeC,UAAf,CAA0B,8BAA1B,CADqB,CAAtB;CAGA,oBAAI6G,QAAQ,GAAGtD,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAf;CACAuC,gBAAAA,QAAQ,CAACtG,SAAT,CAAmB0B,GAAnB,CAAuB,4BAAvB;CACA2E,gBAAAA,aAAa,CAAC1B,WAAd,CAA0B2B,QAA1B;CACAJ,gBAAAA,gBAAgB,CAACvB,WAAjB,CAA6BwB,YAA7B;CACAD,gBAAAA,gBAAgB,CAACvB,WAAjB,CAA6ByB,eAA7B;CACAF,gBAAAA,gBAAgB,CAACvB,WAAjB,CAA6B0B,aAA7B;CACA,oBAAIlC,KAAK,GAAGnB,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAZ;CACAI,gBAAAA,KAAK,CAACnE,SAAN,CAAgB0B,GAAhB,CAAoB,kBAApB,EAAwC,kBAAxC;CACAyC,gBAAAA,KAAK,CAACjB,KAAN,CAAYP,KAAZ,GAAoB,MAApB;CACA,oBAAI5E,KAAK,GAAG+B,WAAW,CAAClC,IAAZ,CAAiBI,aAAjB,CAA+B,gBAA/B,CAAZ;;CACA,oBAAID,KAAK,CAACmB,YAAN,CAAmB,UAAnB,CAAJ,EACA;CACCiF,kBAAAA,KAAK,CAACjB,KAAN,CAAYkB,eAAZ,GAA8BrG,KAAK,CAACsG,YAAN,CAAmB,UAAnB,CAA9B;CACA;;CACD,oBAAItG,KAAK,CAACmB,YAAN,CAAmB,YAAnB,CAAJ,EACA;CACCiF,kBAAAA,KAAK,CAACjB,KAAN,CAAYoB,KAAZ,GAAoBvG,KAAK,CAACsG,YAAN,CAAmB,YAAnB,CAApB;CACA;;CACD,oBAAI2B,cAAc,GAAG,CAAjB,IAAsBA,cAAc,KAAK/E,KAA7C,EACA;CACCkD,kBAAAA,KAAK,CAACnE,SAAN,CAAgB0B,GAAhB,CAAoB,6BAApB;CACA;;CACD,oBAAI6E,UAAU,GAAG,CAAjB;CACA,oBAAIC,UAAU,GAAG,CAAjB;CACA,oBAAIC,iBAAiB,GAAG,CAAxB;CACA7G,gBAAAA,OAAO,CAACwB,UAAR,CAAmBzB,OAAnB,CAA2B,UAAS/B,IAAT,EAAe;CACzC,sBAAIA,IAAI,CAAC4D,QAAL,KAAkB,CAAtB,EACA;CACC,wBAAIgF,UAAU,KAAKxE,cAAnB,EACA;CACCyE,sBAAAA,iBAAiB,GAAGF,UAApB;CACA;;CACDC,oBAAAA,UAAU;CACV;;CACDD,kBAAAA,UAAU;CACV,iBAVD;;CAWA,oBAAItF,KAAK,KAAK,CAAd,EACA;CACCrB,kBAAAA,OAAO,CAACwB,UAAR,CAAmBqF,iBAAnB,EAAsC3C,UAAtC,CAAiDoB,YAAjD,CACCgB,gBADD,EAECtG,OAAO,CAACwB,UAAR,CAAmBqF,iBAAnB,EAAsCtB,WAFvC;CAIA,iBAND,MAQA;CACCvF,kBAAAA,OAAO,CAACwB,UAAR,CAAmBqF,iBAAnB,EAAsC3C,UAAtC,CAAiDoB,YAAjD,CACCf,KADD,EAECvE,OAAO,CAACwB,UAAR,CAAmBqF,iBAAnB,EAAsCtB,WAFvC;CAIA;;CACDlE,gBAAAA,KAAK;CACL;CACD,aAvED;CAwEA;;CACDnB,UAAAA,WAAW,CAACxB,UAAZ,CAAuBwB,WAAvB;CACAA,UAAAA,WAAW,CAAC5B,eAAZ,CAA4B4B,WAAW,CAAClC,IAAxC;CACAwB,UAAAA,EAAE,CAACC,OAAH,CAAW+F,KAAX,CAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,WAA3B,CAAuCC,QAAvC,CAAgD,IAAhD;CACA1F,UAAAA,WAAW,CAACjB,SAAZ,CAAsBiB,WAAtB,EAAmCkC,cAAnC;CACAlC,UAAAA,WAAW,CAACtB,MAAZ,CAAmBsB,WAAnB,EAAgCkC,cAAhC;CACAlC,UAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACAV,UAAAA,EAAE,CAACC,OAAH,CAAWoG,EAAX,CAAcC,KAAd,CAAoBC,WAApB,CAAgCC,WAAhC,GAA8CC,IAA9C;CACA,SA/GD;CAgHA,OAjHD;CAkHA;;;qCAEe/F,aAChB;CAAA;;CACC,WAAK4G,aAAL,GAAqB,IAAIC,kCAAJ,CAAc;CAClCC,QAAAA,SAAS,EAAE9G,WAAW,CAACjC,KADW;CAElCgJ,QAAAA,SAAS,EAAE,mBAFuB;CAGlCC,QAAAA,WAAW,EAAE,wBAHqB;CAIlCC,QAAAA,IAAI,EAAEJ,kCAAS,CAACK;CAJkB,OAAd,CAArB;CAOA,UAAIC,IAAI,GAAG,EAAX;CACA,UAAIC,gBAAJ;CACA,UAAIC,aAAJ;CACA,UAAIC,kBAAJ;CACA,UAAIC,cAAc,GAAG,CAArB;CACA,UAAIC,mBAAJ;CACA,UAAIC,iBAAJ;CACA,UAAIC,gBAAJ;CACA,UAAIC,mBAAJ;CACA,UAAIC,mBAAJ;CACA,UAAIC,QAAJ;CACA,UAAIC,cAAJ;CAEA,WAAKlB,aAAL,CACEmB,SADF,CACY,OADZ,EACqB,UAACvH,KAAD,EAAW;CAC9BsH,QAAAA,cAAc,GAAG,KAAI,CAAClB,aAAL,CAAmBoB,cAAnB,CAAkCC,IAAlC,CAAuCH,cAAxD;CACAL,QAAAA,iBAAiB,GAAGzH,WAAW,CAACjC,KAAZ,CAAkB+E,qBAAlB,GAA0CoF,IAA9D;CACAR,QAAAA,gBAAgB,GAAG1H,WAAW,CAACjC,KAAZ,CAAkB+E,qBAAlB,GAA0CqF,GAA7D;CACAf,QAAAA,gBAAgB,GAAG,EAAnB;CACAC,QAAAA,aAAa,GAAG,EAAhB;CACAG,QAAAA,mBAAmB,GAAG,CAAtB;CACAF,QAAAA,kBAAkB,GAAG9G,KAAK,CAAC4H,OAAN,GAAgBC,WAArC;CACAlB,QAAAA,IAAI,GAAGnH,WAAW,CAACjC,KAAZ,CAAkB6B,gBAAlB,CAAmC,mBAAnC,CAAP;CACAuH,QAAAA,IAAI,CAACtH,OAAL,CAAa,UAASuB,GAAT,EAAc;CAC1BgG,UAAAA,gBAAgB,CAACpC,IAAjB,CAAsB5D,GAAG,CAAC0B,qBAAJ,GAA4BwF,CAAlD;CACAjB,UAAAA,aAAa,CAACrC,IAAd,CAAmB5D,GAAG,CAAC0B,qBAAJ,GAA4BC,MAA/C;CACA,SAHD;CAIA4E,QAAAA,mBAAmB,GAAGR,IAAI,CAACG,kBAAD,CAAJ,CAAyBxE,qBAAzB,GAAiDyF,CAAvE;CACAX,QAAAA,mBAAmB,GAAGT,IAAI,CAACG,kBAAD,CAAJ,CAAyBxE,qBAAzB,GAAiDwF,CAAvE;CACAT,QAAAA,QAAQ,GAAG3E,QAAQ,CAACe,aAAT,CAAuB,IAAvB,CAAX;CACA4D,QAAAA,QAAQ,CAAC3H,SAAT,CAAmB0B,GAAnB,CAAuB,4BAAvB;CACAuF,QAAAA,IAAI,CAACG,kBAAD,CAAJ,CAAyBhG,UAAzB,CAAoCzB,OAApC,CAA4C,UAAS/B,IAAT,EAAe;CAC1D+J,UAAAA,QAAQ,CAACW,MAAT,CAAgB1K,IAAI,CAACqH,SAAL,CAAe,IAAf,CAAhB;CACA,SAFD;;CAGA,YAAIgC,IAAI,CAACG,kBAAD,CAAJ,CAAyBpH,SAAzB,CAAmCe,QAAnC,CAA4C,4BAA5C,CAAJ,EACA;CACC4G,UAAAA,QAAQ,CAAC3H,SAAT,CAAmB0B,GAAnB,CAAuB,4BAAvB;CACA;;CACD,YAAI6G,cAAJ;CACA,YAAItH,KAAK,GAAG,CAAZ;;CACA,eAAO,CAACsH,cAAR,EACA;CACC,cAAItB,IAAI,CAACG,kBAAD,CAAJ,CAAyBhG,UAAzB,CAAoCH,KAApC,EAA2CO,QAA3C,KAAwD,CAA5D,EACA;CACC+G,YAAAA,cAAc,GAAGtH,KAAjB;CACA;;CACDA,UAAAA,KAAK;CACL;;CACD0G,QAAAA,QAAQ,CAACvG,UAAT,CAAoBmH,cAApB,EAAoCrF,KAApC,CAA0CsF,YAA1C,GAAyDC,gBAAgB,CAACxB,IAAI,CAACG,kBAAD,CAAJ,CAAyBhG,UAAzB,CAAoCmH,cAApC,CAAD,CAAhB,CAAsEC,YAA/H;CACA,OApCF,EAqCEX,SArCF,CAqCY,MArCZ,EAqCoB,UAACvH,KAAD,EAAW;CAC7B,YAAI,CAACsH,cAAc,CAAC5H,SAAf,CAAyBe,QAAzB,CAAkC,uBAAlC,CAAL,EACA;CACCjB,UAAAA,WAAW,CAACjC,KAAZ,CAAkBmC,SAAlB,CAA4B0B,GAA5B,CAAgC,yBAAhC;CACAuF,UAAAA,IAAI,CAACG,kBAAD,CAAJ,CAAyBpH,SAAzB,CAAmC0B,GAAnC,CAAuC,wBAAvC;CACA4F,UAAAA,mBAAmB,GAAGhH,KAAK,CAAC4H,OAAN,GAAgBQ,OAAtC;CACA5I,UAAAA,WAAW,CAACjC,KAAZ,CAAkByK,MAAlB,CAAyBX,QAAzB;CACAA,UAAAA,QAAQ,CAACzE,KAAT,CAAeyF,QAAf;CACAhB,UAAAA,QAAQ,CAACzE,KAAT,CAAe+E,GAAf,GAAqBP,mBAAmB,GAAGF,gBAAtB,GAAyCF,mBAAzC,GAA+D,GAA/D,GAAqE,IAA1F;CACAK,UAAAA,QAAQ,CAACzE,KAAT,CAAe8E,IAAf,GAAsBP,mBAAmB,GAAGF,iBAAtB,GAA0C,GAA1C,GAAgD,IAAtE;;CACA,cAAID,mBAAmB,GAAG,CAA1B,EACA;CACCK,YAAAA,QAAQ,CAACzE,KAAT,CAAe0F,SAAf,GAA2B,eAA3B;CACA,WAHD,MAKA;CACCjB,YAAAA,QAAQ,CAACzE,KAAT,CAAe0F,SAAf,GAA2B,cAA3B;CACA;CACD;CACD,OAxDF,EAyDEf,SAzDF,CAyDY,KAzDZ,EAyDmB,YAAM;CACvBF,QAAAA,QAAQ,CAAC1H,MAAT;CACAgH,QAAAA,IAAI,CAACG,kBAAD,CAAJ,CAAyBpH,SAAzB,CAAmCC,MAAnC,CAA0C,wBAA1C;CACAgH,QAAAA,IAAI,CAACG,kBAAD,CAAJ,CAAyBlE,KAAzB,GAAiC,EAAjC;CACA,YAAI2F,wBAAwB,GAAGnB,mBAAmB,GAAGJ,mBAArD;CACA,YAAIwB,8BAA8B,GAAGD,wBAAwB,GAAG5B,IAAI,CAACG,kBAAD,CAAJ,CAAyBxE,qBAAzB,GAAiDC,MAAjH;;CACA,YAAIyE,mBAAmB,GAAG,CAA1B,EACA;CACC,eAAK,IAAIvC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmC,gBAAgB,CAACvF,MAArC,EAA6CoD,CAAC,EAA9C,EAAkD;CACjD,gBAAIgE,mBAAmB,GAAG7B,gBAAgB,CAACnC,CAAD,CAA1C;;CACA,gBAAIA,CAAC,KAAKqC,kBAAV,EACA;CACC2B,cAAAA,mBAAmB,GAAG7B,gBAAgB,CAACnC,CAAD,CAAhB,GAAuBoC,aAAa,CAACpC,CAAC,GAAG,CAAL,CAAb,GAAuB,CAApE;CACA;;CACD,gBAAI8D,wBAAwB,IAAIE,mBAAhC,EACA;CACC1B,cAAAA,cAAc,GAAGtC,CAAjB;CACA;CACD;CACD;;CACD,YAAIuC,mBAAmB,KAAK,CAA5B,EACA;CACCD,UAAAA,cAAc,GAAGD,kBAAjB;CACA;;CACD,YAAIE,mBAAmB,GAAG,CAA1B,EACA;CACC,eAAK,IAAIvC,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGmC,gBAAgB,CAACvF,MAArC,EAA6CoD,EAAC,EAA9C,EAAkD;CACjD,gBAAIgE,oBAAmB,GAAG7B,gBAAgB,CAACnC,EAAD,CAAhB,GAAuBoC,aAAa,CAACpC,EAAD,CAAb,GAAmB,CAApE;;CACA,gBAAIA,EAAC,KAAKqC,kBAAV,EACA;CACC2B,cAAAA,oBAAmB,GAAG7B,gBAAgB,CAACnC,EAAD,CAAtC;CACA;;CACD,gBAAI+D,8BAA8B,IAAIC,oBAAtC,EACA;CACC1B,cAAAA,cAAc,GAAGtC,EAAjB;CACA;CACD;CACD,SArCsB;;;CAuCvB,YAAIsC,cAAc,KAAK,CAAvB,EACA;CACCA,UAAAA,cAAc;CACd,SA1CsB;;;CA4CvB,YAAID,kBAAkB,KAAKC,cAA3B,EACA;CACC,cAAI2B,aAAa,GAAG,IAApB;CACA,cAAIC,iBAAiB,GAAG,IAAxB;;CACA,cAAIhC,IAAI,CAACI,cAAD,CAAR,EACA;CACC2B,YAAAA,aAAa,GAAG/B,IAAI,CAACI,cAAD,CAApB;CACA4B,YAAAA,iBAAiB,GAAGD,aAAa,CAAC7D,WAAlC;;CACA,mBAAM8D,iBAAiB,IAAIA,iBAAiB,CAACzH,QAAlB,KAA+B,CAA1D,EAA6D;CAC5DyH,cAAAA,iBAAiB,GAAGA,iBAAiB,CAAC9D,WAAtC;CACA;CACD;;CACD,cAAIiC,kBAAkB,GAAGC,cAAzB,EACA;CACCvH,YAAAA,WAAW,CAACjC,KAAZ,CAAkBqH,YAAlB,CAA+B+B,IAAI,CAACG,kBAAD,CAAnC,EAAyD4B,aAAzD;CACA;;CACD,cAAI5B,kBAAkB,GAAGC,cAAzB,EACA;CACCvH,YAAAA,WAAW,CAACjC,KAAZ,CAAkBqH,YAAlB,CAA+B+B,IAAI,CAACG,kBAAD,CAAnC,EAAyD6B,iBAAzD;CACA;CACD;;CACDnJ,QAAAA,WAAW,CAACjC,KAAZ,CAAkBmC,SAAlB,CAA4BC,MAA5B,CAAmC,yBAAnC;CACAb,QAAAA,EAAE,CAACC,OAAH,CAAW+F,KAAX,CAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,WAA3B,CAAuCC,QAAvC,CAAgD,IAAhD;CACA,OA5HF;CA6HA;;;qCAEe1F,aAChB;CACC,WAAKoJ,aAAL,GAAqB,IAAIvC,kCAAJ,CAAc;CAClCC,QAAAA,SAAS,EAAE9G,WAAW,CAACjC,KADW;CAElCgJ,QAAAA,SAAS,EAAE,4BAFuB;CAGlCE,QAAAA,IAAI,EAAEJ,kCAAS,CAACK;CAHkB,OAAd,CAArB;CAMA,UAAImC,kBAAJ;CACA,UAAIC,cAAc,GAAG,CAArB;CACA,UAAIC,mBAAJ;CACA,UAAIC,mBAAJ;CACA,UAAIC,WAAW,GAAG,EAAlB;CACA,UAAIC,gBAAJ;CACA,UAAIC,YAAJ;CACA,UAAIzI,OAAJ;CACA,UAAIuG,iBAAJ;CACA,UAAImC,mBAAJ;CACA,UAAIC,iBAAJ;CACA,UAAIC,YAAJ;CAEA,WAAKV,aAAL,CACErB,SADF,CACY,OADZ,EACqB,UAACvH,KAAD,EAAW;CAC9BiH,QAAAA,iBAAiB,GAAGzH,WAAW,CAACjC,KAAZ,CAAkB+E,qBAAlB,GAA0CoF,IAA9D;CACAwB,QAAAA,gBAAgB,GAAG,EAAnB;CACAC,QAAAA,YAAY,GAAG,EAAf;CACAE,QAAAA,iBAAiB,GAAG,EAApB;CACAN,QAAAA,mBAAmB,GAAG,CAAtB;CACAC,QAAAA,mBAAmB,GAAG,CAAtB;CACAH,QAAAA,kBAAkB,GAAG7I,KAAK,CAAC4H,OAAN,GAAgBN,cAAhB,CAA+B9D,UAA/B,CAA0CzB,SAA/D;;CACA,YAAI8G,kBAAJ,EACA;CACCI,UAAAA,WAAW,GAAG,+BAAIzJ,WAAW,CAACjC,KAAZ,CAAkB6B,gBAAlB,CAAmC,mBAAnC,CAAJ,EAA6DmK,GAA7D,CAAiE,UAAC3I,GAAD,EAAS;CACvF,mBAAOA,GAAG,CAAC8C,QAAJ,CAAamF,kBAAb,CAAP;CACA,WAFa,CAAd;CAGAnI,UAAAA,OAAO,GAAGlB,WAAW,CAACjC,KAAZ,CAAkB6B,gBAAlB,CAAmC,mBAAnC,CAAV;CACA,cAAIoK,gBAAgB,GAAG9I,OAAO,CAAC,CAAD,CAAP,CAAWI,UAAlC;CACA0I,UAAAA,gBAAgB,CAACnK,OAAjB,CAAyB,UAASoK,YAAT,EAAuB;CAC/C,gBAAIA,YAAY,CAACvI,QAAb,KAA0B,CAA9B,EACA;CACCgI,cAAAA,gBAAgB,CAAC1E,IAAjB,CAAsBiF,YAAY,CAACnH,qBAAb,GAAqCyF,CAA3D;CACAoB,cAAAA,YAAY,CAAC3E,IAAb,CAAkBiF,YAAY,CAACnH,qBAAb,GAAqCD,KAAvD;CACA;CACD,WAND;CAOA;;CACD+G,QAAAA,mBAAmB,GAAGH,WAAW,CAAC,CAAD,CAAX,CAAe3G,qBAAf,GAAuCyF,CAA7D;CACAuB,QAAAA,YAAY,GAAG5G,QAAQ,CAACe,aAAT,CAAuB,KAAvB,CAAf;CACAwF,QAAAA,WAAW,CAAC5J,OAAZ,CAAoB,UAAS4B,IAAT,EAAe;CAClCoI,UAAAA,iBAAiB,CAAC7E,IAAlB,CAAuBvD,IAAI,CAAC8C,YAAL,CAAkB,OAAlB,CAAvB;CACAuF,UAAAA,YAAY,CAACtB,MAAb,CAAoB/G,IAAI,CAAC0D,SAAL,CAAe,IAAf,CAApB;CACA2E,UAAAA,YAAY,CAACI,SAAb,CAAuB9G,KAAvB,CAA6BsF,YAA7B,GAA4CC,gBAAgB,CAAClH,IAAD,CAAhB,CAAuBiH,YAAnE;CACAoB,UAAAA,YAAY,CAACI,SAAb,CAAuB9G,KAAvB,CAA6BL,MAA7B,GAAsCtB,IAAI,CAACqB,qBAAL,GAA6BC,MAA7B,GAAsC,IAA5E;CACA+G,UAAAA,YAAY,CAACI,SAAb,CAAuB9G,KAAvB,CAA6BP,KAA7B,GAAqCpB,IAAI,CAACqB,qBAAL,GAA6BD,KAA7B,GAAqC,IAA1E;CACA,SAND;CAOAiH,QAAAA,YAAY,CAACK,MAAb,GAAsB,IAAtB;CACAL,QAAAA,YAAY,CAAC5J,SAAb,CAAuB0B,GAAvB,CAA2B,6BAA3B;CACA5B,QAAAA,WAAW,CAACjC,KAAZ,CAAkByK,MAAlB,CAAyBsB,YAAzB;CACA,OApCF,EAqCE/B,SArCF,CAqCY,MArCZ,EAqCoB,UAACvH,KAAD,EAAW;CAC7BR,QAAAA,WAAW,CAACjC,KAAZ,CAAkBmC,SAAlB,CAA4B0B,GAA5B,CAAgC,yBAAhC;CACA6H,QAAAA,WAAW,CAAC5J,OAAZ,CAAoB,UAAC4B,IAAD,EAAU;CAC7BA,UAAAA,IAAI,CAACvB,SAAL,CAAe0B,GAAf,CAAmB,yBAAnB;CACA,SAFD;CAGA2H,QAAAA,mBAAmB,GAAG/I,KAAK,CAAC4H,OAAN,GAAgBgC,OAAtC;CACAZ,QAAAA,mBAAmB,GAAGhJ,KAAK,CAAC4H,OAAN,GAAgBQ,OAAtC;CACAkB,QAAAA,YAAY,CAACK,MAAb,GAAsB,KAAtB;CACAL,QAAAA,YAAY,CAAC1G,KAAb,CAAmByF,QAAnB;CACAiB,QAAAA,YAAY,CAAC1G,KAAb,CAAmB8E,IAAnB,GAA0B0B,mBAAmB,GAAGnC,iBAAtB,GAA0C8B,mBAA1C,GAAgE,IAA1F;CACAO,QAAAA,YAAY,CAAC1G,KAAb,CAAmB+E,GAAnB,GAAyB,IAAI,IAA7B;;CACA,YAAIoB,mBAAmB,GAAG,CAA1B,EACA;CACCO,UAAAA,YAAY,CAAC1G,KAAb,CAAmB0F,SAAnB,GAA+B,eAA/B;CACA;;CACD,YAAIS,mBAAmB,GAAG,CAA1B,EACA;CACCO,UAAAA,YAAY,CAAC1G,KAAb,CAAmB0F,SAAnB,GAA+B,cAA/B;CACA;CACD,OAxDF,EAyDEf,SAzDF,CAyDY,KAzDZ,EAyDmB,YAAM;CACvB+B,QAAAA,YAAY,CAAC3J,MAAb;CACAsJ,QAAAA,WAAW,CAAC5J,OAAZ,CAAoB,UAAC4B,IAAD,EAAU;CAC7BA,UAAAA,IAAI,CAAC0I,MAAL,GAAc,KAAd;CACA,SAFD;;CAGA,YAAId,kBAAJ,EACA;CACC,cAAIgB,wBAAwB,GAAGX,gBAAgB,CAACL,kBAAD,CAAhB,GAAuCE,mBAAtE;CACA,cAAIe,6BAA6B,GAAGZ,gBAAgB,CAACL,kBAAD,CAAhB,GAAuCE,mBAAvC,GAA6DE,WAAW,CAAC,CAAD,CAAX,CAAe3G,qBAAf,GAAuCD,KAAxI;CACA,cAAIoC,CAAC,GAAG,CAAR;CACAwE,UAAAA,WAAW,CAAC5J,OAAZ,CAAoB,UAAC4B,IAAD,EAAU;CAC7BA,YAAAA,IAAI,CAAC2B,KAAL,GAAayG,iBAAiB,CAAC5E,CAAD,CAA9B;CACAxD,YAAAA,IAAI,CAACvB,SAAL,CAAeC,MAAf,CAAsB,yBAAtB;CACA8E,YAAAA,CAAC;CACD,WAJD;;CAKA,cAAIsE,mBAAmB,GAAG,CAA1B,EACA;CACC,iBAAK,IAAItE,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGyE,gBAAgB,CAAC7H,MAArC,EAA6CoD,GAAC,EAA9C,EAAkD;CACjD,kBAAIsF,mBAAmB,GAAGb,gBAAgB,CAACzE,GAAD,CAA1C;;CACA,kBAAIA,GAAC,GAAG,CAAR,EACA;CACCsF,gBAAAA,mBAAmB,GAAGb,gBAAgB,CAACzE,GAAD,CAAhB,GAAuB0E,YAAY,CAAC1E,GAAC,GAAG,CAAL,CAAZ,GAAsB,CAAnE;CACA;;CACD,kBAAIoF,wBAAwB,GAAGE,mBAA/B,EACA;CACCjB,gBAAAA,cAAc,GAAGrE,GAAjB;CACA;CACD;CACD;;CACD,cAAIsE,mBAAmB,KAAK,CAA5B,EACA;CACCD,YAAAA,cAAc,GAAGD,kBAAjB;CACA;;CACD,cAAIE,mBAAmB,GAAG,CAA1B,EACA;CACC,iBAAK,IAAItE,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGyE,gBAAgB,CAAC7H,MAArC,EAA6CoD,GAAC,EAA9C,EAAkD;CACjD,kBAAIsF,oBAAmB,GAAGb,gBAAgB,CAACzE,GAAD,CAAhB,GAAuB0E,YAAY,CAAC1E,GAAD,CAAZ,GAAkB,CAAnE;;CACA,kBAAIA,GAAC,KAAKoE,kBAAV,EACA;CACCkB,gBAAAA,oBAAmB,GAAGb,gBAAgB,CAACzE,GAAD,CAAtC;CACA;;CACD,kBAAIqF,6BAA6B,GAAGC,oBAApC,EACA;CACCjB,gBAAAA,cAAc,GAAGrE,GAAjB;CACA;CACD;CACD,WAxCF;;;CA0CC,cAAIqE,cAAc,KAAK,CAAvB,EACA;CACCA,YAAAA,cAAc;CACd;;CACD,cAAID,kBAAkB,KAAKC,cAA3B,EACA;CACCpI,YAAAA,OAAO,CAACrB,OAAR,CAAgB,UAASuB,GAAT,EAAc;CAC7B,kBAAIoJ,UAAU,GAAG,EAAjB;CACApJ,cAAAA,GAAG,CAACE,UAAJ,CAAezB,OAAf,CAAuB,UAASiC,EAAT,EAAa;CACnC,oBAAIA,EAAE,CAACJ,QAAH,KAAgB,CAApB,EACA;CACC8I,kBAAAA,UAAU,CAACxF,IAAX,CAAgBlD,EAAhB;CACA;CACD,eALD;CAMA,kBAAIoH,aAAa,GAAG,IAApB;CACA,kBAAIC,iBAAiB,GAAG,IAAxB;;CACA,kBAAIqB,UAAU,CAAClB,cAAD,CAAd,EACA;CACCJ,gBAAAA,aAAa,GAAGsB,UAAU,CAAClB,cAAD,CAA1B;CACAH,gBAAAA,iBAAiB,GAAGD,aAAa,CAAC7D,WAAlC;;CACA,uBAAM8D,iBAAiB,IAAIA,iBAAiB,CAACzH,QAAlB,KAA+B,CAA1D,EAA6D;CAC5DyH,kBAAAA,iBAAiB,GAAGA,iBAAiB,CAAC9D,WAAtC;CACA;CACD;;CACD,kBAAIgE,kBAAkB,GAAGC,cAAzB,EACA;CACClI,gBAAAA,GAAG,CAACgE,YAAJ,CAAiBoF,UAAU,CAACnB,kBAAD,CAA3B,EAAiDH,aAAjD;CACA;;CACD,kBAAIG,kBAAkB,GAAGC,cAAzB,EACA;CACClI,gBAAAA,GAAG,CAACgE,YAAJ,CAAiBoF,UAAU,CAACnB,kBAAD,CAA3B,EAAiDF,iBAAjD;CACA;CACD,aA1BD;CA2BA;;CACDnJ,UAAAA,WAAW,CAACjC,KAAZ,CAAkBmC,SAAlB,CAA4BC,MAA5B,CAAmC,yBAAnC;CACAb,UAAAA,EAAE,CAACC,OAAH,CAAW+F,KAAX,CAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,WAA3B,CAAuCC,QAAvC,CAAgD,IAAhD;CACA;CACD,OA9IF;CA+IA;;;kCAEY1F,aACb;CACC,UAAIyK,KAAK,GAAG,KAAK1M,KAAjB;CACA,WAAK2M,aAAL,GAAqB,IAAI7D,kCAAJ,CAAc;CAClCC,QAAAA,SAAS,EAAE2D,KADuB;CAElC1D,QAAAA,SAAS,EAAE,2BAFuB;CAGlCE,QAAAA,IAAI,EAAEJ,kCAAS,CAACK;CAHkB,OAAd,CAArB;CAMA,UAAIyD,OAAJ;CACA,UAAItJ,KAAJ;CAEA,WAAKqJ,aAAL,CACE3C,SADF,CACY,OADZ,EACqB,UAACvH,KAAD,EAAW;CAC9Ba,QAAAA,KAAK,GAAG,EAAR;CACA,YAAMS,EAAE,GAAGtB,KAAK,CAAC4H,OAAN,GAAgBrB,SAAhB,CAA0B/C,UAArC;CACA2G,QAAAA,OAAO,GAAG7I,EAAE,CAACgB,qBAAH,GAA2BD,KAArC;CACA,YAAM+H,eAAe,GAAG9I,EAAE,CAACS,SAA3B;CACA,YAAMsI,KAAK,GAAGJ,KAAK,CAAC7K,gBAAN,CAAuB,mBAAvB,CAAd;CACAiL,QAAAA,KAAK,CAAChL,OAAN,CAAc,UAAS2C,EAAT,EAAa;CAC1BnB,UAAAA,KAAK,CAAC2D,IAAN,CAAWxC,EAAE,CAAC0B,QAAH,CAAY0G,eAAZ,CAAX;CACA,SAFD;CAGA,OAVF,EAWE7C,SAXF,CAWY,MAXZ,EAWoB,UAACvH,KAAD,EAAW;CAC7B,YAAM4J,OAAO,GAAG5J,KAAK,CAAC4H,OAAN,GAAgBgC,OAAhC;CACA,YAAMU,UAAU,GAAGH,OAAO,GAAGP,OAA7B;CACA/I,QAAAA,KAAK,CAACxB,OAAN,CAAc,UAASiC,EAAT,EAAa;CAC1BxC,UAAAA,EAAE,CAACyL,GAAH,CAAO3H,KAAP,CAAatB,EAAb,EAAiB,OAAjB,YAA6BgJ,UAA7B;CACA,SAFD;CAGA,OAjBF,EAkBE/C,SAlBF,CAkBY,KAlBZ,EAkBmB,YAAM;CACvB,YAAIiD,UAAU,GAAGP,KAAK,CAAC3H,qBAAN,GAA8BD,KAA/C;CACA,YAAIoI,mBAAmB,GAAGR,KAAK,CAAC3J,aAAN,CAAoBA,aAApB,CAAkCgC,qBAAlC,GAA0DD,KAApF;;CACA,YAAIoI,mBAAmB,GAAGD,UAA1B,EACA;CACCP,UAAAA,KAAK,CAAC3J,aAAN,CAAoBA,aAApB,CAAkCZ,SAAlC,CAA4C0B,GAA5C,CAAgD,6BAAhD;CACA,SAHD,MAKA;CACC6I,UAAAA,KAAK,CAAC3J,aAAN,CAAoBA,aAApB,CAAkCZ,SAAlC,CAA4CC,MAA5C,CAAmD,6BAAnD;CACA;;CACDH,QAAAA,WAAW,CAACxB,UAAZ,CAAuBwB,WAAvB;CACAV,QAAAA,EAAE,CAACC,OAAH,CAAW+F,KAAX,CAAiBC,IAAjB,CAAsBC,IAAtB,CAA2BC,WAA3B,CAAuCC,QAAvC,CAAgD,IAAhD;CACA,OA/BF;CAgCA;;;qCAEezH,OAChB;CACC,UAAIiN,aAAa,GAAGjN,KAAK,CAAC2B,gBAAN,CAAuB,mBAAvB,CAApB;CACAsL,MAAAA,aAAa,CAACrL,OAAd,CAAsB,UAASsL,EAAT,EAAa;CAClCA,QAAAA,EAAE,CAACpL,YAAH,CAAgB,iBAAhB,EAAmC,MAAnC;CACA,OAFD;CAGA;;;mCAEaD,SAASa,WACvB;CACC,UAAIyK,WAAW,GAAGtL,OAAO,CAACF,gBAAR,CAAyB,MAAMe,SAA/B,CAAlB;CACAyK,MAAAA,WAAW,CAACvL,OAAZ,CAAoB,UAASC,OAAT,EAAiB;CACpCA,QAAAA,OAAO,CAACI,SAAR,CAAkBC,MAAlB,CAAyBQ,SAAzB;CACA,OAFD;CAGA;;;iCAEWX,aACZ;CACCV,MAAAA,EAAE,CAACe,KAAH,CAASgL,YAAT,CAAsBtD,SAAtB,CAAgC,oCAAhC,EAAsE,YAAK;CAC1E/H,QAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACAV,QAAAA,EAAE,CAACC,OAAH,CAAWoG,EAAX,CAAcC,KAAd,CAAoBC,WAApB,CAAgCC,WAAhC,GAA8CC,IAA9C;CACA,OAHD;CAIA;;;qCAEe/F,aAChB;CACCV,MAAAA,EAAE,CAACe,KAAH,CAASgL,YAAT,CAAsBtD,SAAtB,CAAgC,mCAAhC,EAAqE,YAAK;CACzE/H,QAAAA,WAAW,CAACpB,QAAZ,CAAqBoB,WAArB;CACAV,QAAAA,EAAE,CAACC,OAAH,CAAWoG,EAAX,CAAcC,KAAd,CAAoBC,WAApB,CAAgCC,WAAhC,GAA8CC,IAA9C;CACA,OAHD;CAIA;;;0CAEoB/F,aACrB;CACCV,MAAAA,EAAE,CAACe,KAAH,CAASgL,YAAT,CAAsBtD,SAAtB,CAAgC,6CAAhC,EAA+E,YAAK;CACnF/H,QAAAA,WAAW,CAACxB,UAAZ,CAAuBwB,WAAvB;CACA,OAFD;CAGA;;;;;;;;;;;"}