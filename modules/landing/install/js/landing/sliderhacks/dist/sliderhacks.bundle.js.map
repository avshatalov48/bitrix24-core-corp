{"version":3,"file":"sliderhacks.bundle.js","sources":["../src/sliderhacks.js"],"sourcesContent":["import {Dom, Event, Runtime, Tag, Cache, Uri, Type} from 'main.core';\nimport {Loader} from 'main.loader';\n\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing\n */\nexport class SliderHacks\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tstatic getContentArea(): HTMLElement\n\t{\n\t\treturn SliderHacks.cache.remember('contentArea', () => {\n\t\t\treturn document.querySelector('.landing-main');\n\t\t});\n\t}\n\n\tstatic getContentLoader(): Loader\n\t{\n\t\treturn SliderHacks.cache.remember('contentLoader', () => {\n\t\t\tconst wrapper = Tag.render`<div class=\"landing-content-loader\"></div>`;\n\t\t\tconst loader = new Loader({\n\t\t\t\ttarget: wrapper,\n\t\t\t});\n\n\t\t\tloader.show();\n\n\t\t\treturn wrapper;\n\t\t});\n\t}\n\n\tstatic showContentLoader()\n\t{\n\t\tconst contentArea = SliderHacks.getContentArea();\n\t\tconst contentLoader = SliderHacks.getContentLoader();\n\t\tDom.style(contentArea, 'position', 'relative');\n\t\tDom.append(contentLoader, contentArea);\n\t}\n\n\tstatic hideContentLoader()\n\t{\n\t\tDom.style(SliderHacks.getContentArea(), 'position', null);\n\t\tDom.remove(SliderHacks.getContentLoader());\n\t}\n\n\tstatic reloadSlider(url: string, context): Promise<any>\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(context || window);\n\n\t\t\tif (slider)\n\t\t\t{\n\t\t\t\tSliderHacks.showContentLoader();\n\n\t\t\t\tconst srcFrame = slider.getFrame();\n\t\t\t\tconst frame = Runtime.clone(srcFrame);\n\n\t\t\t\tframe.src = Uri.addParam(url, {IFRAME: 'Y'});\n\t\t\t\tslider.iframe = frame;\n\n\t\t\t\tDom.style(frame, {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\topacity: 0,\n\t\t\t\t\tleft: 0,\n\t\t\t\t\ttransition: '200ms opacity ease',\n\t\t\t\t});\n\t\t\t\tDom.insertAfter(frame, srcFrame);\n\n\t\t\t\tEvent.bind(frame, 'load', (event) => {\n\t\t\t\t\tif (Type.isFunction(slider.handleFrameLoad))\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.handleFrameLoad(event);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.error('SliderHacks: slider.handleFrameLoad is not a function');\n\t\t\t\t\t}\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.style(frame, 'opacity', null);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tDom.remove(srcFrame);\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t}, 200);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n}"],"names":["SliderHacks","cache","remember","document","querySelector","wrapper","Tag","render","loader","Loader","target","show","contentArea","getContentArea","contentLoader","getContentLoader","Dom","style","append","remove","url","context","Promise","resolve","slider","BX","SidePanel","Instance","getSliderByWindow","window","showContentLoader","srcFrame","getFrame","frame","Runtime","clone","src","Uri","addParam","IFRAME","iframe","position","opacity","left","transition","insertAfter","Event","bind","event","Type","isFunction","handleFrameLoad","console","error","setTimeout","Cache","MemoryCache"],"mappings":"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"}