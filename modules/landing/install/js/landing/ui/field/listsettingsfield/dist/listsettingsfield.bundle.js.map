{"version":3,"file":"listsettingsfield.bundle.js","sources":["../src/internal/list-item.js","../src/listsettingsfield.js"],"sourcesContent":["import {BaseField} from 'landing.ui.field.basefield';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {Tag} from 'main.core';\n\nimport './css/style.css';\n\nexport type ListItemOptions = {\n\tid: string,\n\tlabel: string,\n\tvalue: any,\n\tchecked: boolean,\n};\n\nexport class ListItem extends BaseField\n{\n\tconstructor(options: ListItemOptions)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ListSettingsField.ListItem');\n\n\t\tthis.setValue(options);\n\t}\n\n\tgetTextField(): TextField\n\t{\n\t\treturn this.cache.remember('textField', () => {\n\t\t\treturn new TextField({\n\t\t\t\tselector: 'label',\n\t\t\t\ttextOnly: true,\n\t\t\t\tonChange: this.onTextChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tonTextChange()\n\t{\n\t\tthis.emit('onChange');\n\t}\n\n\tcreateInput(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-list-settings-item-container\">\n\t\t\t\t\t${this.getTextField().getLayout()}\n\t\t\t\t\t${this.getCheckboxField().getLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCheckboxField(): BX.Landing.UI.Field.Checkbox\n\t{\n\t\treturn this.cache.remember('checkbox', () => {\n\t\t\treturn new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tcompact: true,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: '',\n\t\t\t\t\t\tvalue: this.options.value,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tonChange: this.onCheckboxChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tonCheckboxChange()\n\t{\n\t\tthis.emit('onChange');\n\t\tthis.adjustState();\n\t}\n\n\tadjustState()\n\t{\n\t\tconst checkboxField = this.getCheckboxField();\n\t\tconst textField = this.getTextField();\n\n\t\tif (checkboxField.getValue().length > 0)\n\t\t{\n\t\t\ttextField.enable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttextField.disable();\n\t\t}\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.getTextField().setValue(value.name);\n\t\tthis.getCheckboxField().setValue([value.checked ? value.value : '']);\n\t\tthis.adjustState();\n\t}\n\n\tgetValue(): {text: string, checked: boolean}\n\t{\n\t\treturn {\n\t\t\tlabel: this.getTextField().getValue(),\n\t\t\tvalue: this.options.value,\n\t\t\tchecked: this.getCheckboxField().getValue().length > 0,\n\t\t};\n\t}\n}","import {Dom, Tag} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {ListItem} from './internal/list-item';\n\ntype ListSettingsFieldItemOptions = {\n\tlabel: string,\n\tvalue: any,\n\tchecked: boolean,\n};\n\n/**\n * @memberOf BX.Landing.UI.Field\n */\nexport class ListSettingsField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper({...options, textOnly: true});\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ListSettingsField');\n\n\t\tthis.onChange = this.onChange.bind(this);\n\t\tthis.items = [];\n\n\t\tthis.options.items.forEach((item) => {\n\t\t\tthis.addItem(item);\n\t\t});\n\t}\n\n\tcreateInput(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-list-settings\"></div>\n\t\t`;\n\t}\n\n\taddItem(options: ListSettingsFieldItemOptions)\n\t{\n\t\tconst item = new ListItem(options);\n\t\titem.subscribe('onChange', this.onChange);\n\t\tDom.append(item.getLayout(), this.input);\n\t\tthis.items.push(item);\n\t}\n\n\tonChange()\n\t{\n\t\tthis.emit('onChange');\n\t}\n\n\tgetValue(): Array<{name: string, value: any}>\n\t{\n\t\treturn this.items\n\t\t\t.map((item) => {\n\t\t\t\treturn item.getValue();\n\t\t\t})\n\t\t\t.filter((item) => {\n\t\t\t\treturn item.checked;\n\t\t\t});\n\t}\n}"],"names":["ListItem","options","setEventNamespace","setValue","cache","remember","TextField","selector","textOnly","onChange","onTextChange","bind","emit","Tag","render","getTextField","getLayout","getCheckboxField","BX","Landing","UI","Field","Checkbox","compact","items","name","value","onCheckboxChange","adjustState","checkboxField","textField","getValue","length","enable","disable","checked","label","BaseField","ListSettingsField","forEach","item","addItem","subscribe","Dom","append","input","push","map","filter"],"mappings":"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"}