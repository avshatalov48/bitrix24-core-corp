{"version":3,"file":"textareafield.bundle.js","sources":["../src/textareafield.js"],"sourcesContent":["import {Dom, Event, Tag, Text, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport './css/style.css';\n\nexport class TextareaField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tDom.addClass(this.layout, 'landing-ui-field-textarea');\n\n\t\tthis.onContentChange = this.onContentChange.bind(this);\n\t\tthis.onMousewheel = this.onMousewheel.bind(this);\n\n\t\tEvent.bind(this.input, 'input', this.onContentChange);\n\t\tEvent.bind(this.input, 'keydown', this.onContentChange);\n\t\tEvent.bind(this.input, 'mousewheel', this.onMousewheel);\n\n\t\tthis.input.value = Text.encode(this.content);\n\n\t\tif (Type.isNumber(this.options.height))\n\t\t{\n\t\t\tDom.style(this.input, 'min-height', `${this.options.height}px`);\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tthis.adjustHeight();\n\t\t}, 20);\n\t}\n\n\tcreateInput()\n\t{\n\t\treturn Tag.render`\n\t\t\t<textarea class=\"landing-ui-field-input\">${this.content}</textarea>\n\t\t`;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonMousewheel(event)\n\t{\n\t\tevent.stopPropagation();\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonPaste()\n\t{\n\t\t// Prevent BX.Landing.UI.Field.BaseField.onPaste\n\t}\n\n\tonContentChange()\n\t{\n\t\tthis.adjustHeight();\n\t\tthis.onValueChangeHandler(this);\n\t}\n\n\tadjustHeight()\n\t{\n\t\tthis.input.style.height = '0px';\n\t\tthis.input.style.height = `${Math.min(this.input.scrollHeight, 180)}px`;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.input.value;\n\t}\n}"],"names":["TextareaField","options","Dom","addClass","layout","onContentChange","bind","onMousewheel","Event","input","value","Text","encode","content","Type","isNumber","height","style","setTimeout","adjustHeight","Tag","render","event","stopPropagation","onValueChangeHandler","Math","min","scrollHeight","BaseField"],"mappings":";;;;;;;KAKaA,aAAb;CAAA;;CAEC,yBAAYC,OAAZ,EACA;CAAA;;CAAA;CACC,+GAAMA,OAAN;CACAC,IAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKC,MAAlB,EAA0B,2BAA1B;CAEA,UAAKC,eAAL,GAAuB,MAAKA,eAAL,CAAqBC,IAArB,2CAAvB;CACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,2CAApB;CAEAE,IAAAA,eAAK,CAACF,IAAN,CAAW,MAAKG,KAAhB,EAAuB,OAAvB,EAAgC,MAAKJ,eAArC;CACAG,IAAAA,eAAK,CAACF,IAAN,CAAW,MAAKG,KAAhB,EAAuB,SAAvB,EAAkC,MAAKJ,eAAvC;CACAG,IAAAA,eAAK,CAACF,IAAN,CAAW,MAAKG,KAAhB,EAAuB,YAAvB,EAAqC,MAAKF,YAA1C;CAEA,UAAKE,KAAL,CAAWC,KAAX,GAAmBC,cAAI,CAACC,MAAL,CAAY,MAAKC,OAAjB,CAAnB;;CAEA,QAAIC,cAAI,CAACC,QAAL,CAAc,MAAKd,OAAL,CAAae,MAA3B,CAAJ,EACA;CACCd,MAAAA,aAAG,CAACe,KAAJ,CAAU,MAAKR,KAAf,EAAsB,YAAtB,YAAuC,MAAKR,OAAL,CAAae,MAApD;CACA;;CAEDE,IAAAA,UAAU,CAAC,YAAM;CAChB,YAAKC,YAAL;CACA,KAFS,EAEP,EAFO,CAAV;CAlBD;CAqBC;;CAxBF;CAAA;CAAA,kCA2BC;CACC,aAAOC,aAAG,CAACC,MAAX,0JAC4C,KAAKR,OADjD;CAGA,KA/BF;;CAAA;CAAA;CAAA,iCAkCcS,KAlCd,EAmCC;CACCA,MAAAA,KAAK,CAACC,eAAN;CACA,KArCF;;CAAA;CAAA;CAAA,8BAyCC;CAEC;CA3CF;CAAA;CAAA,sCA8CC;CACC,WAAKJ,YAAL;CACA,WAAKK,oBAAL,CAA0B,IAA1B;CACA;CAjDF;CAAA;CAAA,mCAoDC;CACC,WAAKf,KAAL,CAAWQ,KAAX,CAAiBD,MAAjB,GAA0B,KAA1B;CACA,WAAKP,KAAL,CAAWQ,KAAX,CAAiBD,MAAjB,aAA6BS,IAAI,CAACC,GAAL,CAAS,KAAKjB,KAAL,CAAWkB,YAApB,EAAkC,GAAlC,CAA7B;CACA;CAvDF;CAAA;CAAA,+BA0DC;CACC,aAAO,KAAKlB,KAAL,CAAWC,KAAlB;CACA;CA5DF;CAAA;CAAA,EAAmCkB,oCAAnC;;;;;;;;"}