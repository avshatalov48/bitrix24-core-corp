{"version":3,"file":"colorpickerfield.bundle.js","sources":["../src/internal/opacity/opacity.js","../src/colorpickerfield.js"],"sourcesContent":["import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Cache, Dom, Tag, Text} from 'main.core';\nimport {Draggable} from 'ui.draganddrop.draggable';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\nimport {Loc} from 'landing.loc';\nimport {PageObject} from 'landing.pageobject';\n\nimport './css/opacity.css';\n\nexport default class Opacity extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Opacity');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\t\tthis.options = {...options};\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\n\t\t// @fixme: Add 'context' parameter for Draggable\n\t\tthis.draggable = new window.top.BX.UI.DragAndDrop.Draggable({\n\t\t\tcontainer: this.getLayout(),\n\t\t\tdraggable: '.landing-ui-field-color-opacity-picker',\n\t\t\ttype: Draggable.HEADLESS,\n\t\t});\n\n\t\tthis.draggable.subscribe('start', this.onPickerDragStart);\n\t\tthis.draggable.subscribe('move', this.onPickerDragMove);\n\t\tthis.draggable.subscribe('end', this.onPickerDragEnd);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity\">\n\t\t\t\t\t${this.getPicker()}\n\t\t\t\t\t${this.getColorLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-color\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetColorLayoutWidth(): number\n\t{\n\t\treturn this.cache.remember('colorLayoutWidth', () => {\n\t\t\treturn this.getColorLayout().getBoundingClientRect().width - 6;\n\t\t});\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-field-color-opacity-picker\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_COLORPICKER_FIELD_CHANGE_COLOR_OPACITY')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetValue(): number\n\t{\n\t\tconst pickerLeft = Text.toNumber(Dom.style(this.getPicker(), 'left'));\n\t\tconst layoutWidth = Text.toNumber(this.getLayout().getBoundingClientRect().width);\n\n\t\treturn (1 - (pickerLeft / layoutWidth).toFixed(1));\n\t}\n\n\tsetValue({parsedColor, skipOpacity = false})\n\t{\n\t\tconst from = `rgba(${[parsedColor.slice(0, 3), 100].join(', ')})`;\n\t\tconst to = `rgba(${[parsedColor.slice(0, 3), 0].join(', ')})`;\n\n\t\tDom.style(this.getColorLayout(), {\n\t\t\tbackground: `linear-gradient(to right, ${from} 0%, ${to} 100%)`,\n\t\t});\n\n\t\tif (!skipOpacity)\n\t\t{\n\t\t\tconst opacity = parsedColor[3] || 0;\n\t\t\tconst leftPercent = (100 - (opacity * 100));\n\n\t\t\tDom.style(this.getPicker(), {\n\t\t\t\tleft: `calc(${leftPercent}% - ${leftPercent === 100 ? '6px' : '0px'})`,\n\t\t\t});\n\t\t}\n\t}\n\n\tonPickerDragStart()\n\t{\n\t\tthis.cache.set('pickerStartPos', {\n\t\t\tleft: Text.toNumber(Dom.style(this.getPicker(), 'left')),\n\t\t});\n\n\t\tconst wrapper = PageObject\n\t\t\t.getRootWindow()\n\t\t\t.document\n\t\t\t.querySelector('.landing-ui-view-wrapper');\n\n\t\tDom.style(wrapper, 'pointer-events', 'none');\n\t}\n\n\tonPickerDragMove(event: BaseEvent)\n\t{\n\t\tconst {offsetX} = event.getData();\n\t\tconst {left} = this.cache.get('pickerStartPos');\n\n\t\tconst leftPos = Math.min(Math.max(left + offsetX, 0), this.getColorLayoutWidth());\n\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\n\t\tthis.emit('onChange');\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tconst wrapper = PageObject\n\t\t\t.getRootWindow()\n\t\t\t.document\n\t\t\t.querySelector('.landing-ui-view-wrapper');\n\n\t\tDom.style(wrapper, 'pointer-events', null);\n\t}\n}","import {Dom, Tag, Text, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Loc} from 'landing.loc';\nimport Opacity from './internal/opacity/opacity';\n\nimport './css/style.css';\n\nexport class ColorPickerField extends BaseField\n{\n\tstatic id: number = 0;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ColorPickerField');\n\t\tthis.setLayoutClass('landing-ui-field-colorpicker');\n\n\t\tDom.append(this.getColorLayout(), this.input);\n\n\t\tthis.setValue(this.options.value);\n\t}\n\n\tgetUid(): string\n\t{\n\t\treturn this.cache.remember('uid', () => {\n\t\t\tColorPickerField.id += 1;\n\t\t\treturn `${Text.getRandom()}${ColorPickerField.id}`;\n\t\t});\n\t}\n\n\tgetColorLabelInner()\n\t{\n\t\treturn this.cache.remember('colorLabelInner', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"landing-ui-field-colorpicker-label-inner\"></span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetColorLabel(): HTMLElement\n\t{\n\t\treturn this.cache.remember('colorLabel', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<label \n\t\t\t\t\tclass=\"landing-ui-field-colorpicker-label\"\n\t\t\t\t\tfor=\"${this.getUid()}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_COLORPICKER_FIELD_CHANGE_COLOR_TITLE')}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getColorLabelInner()}\n\t\t\t\t</label>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetColorInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('colorInput', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<input \n\t\t\t\t\ttype=\"color\" \n\t\t\t\t\tclass=\"landing-ui-field-colorpicker-input\"\n\t\t\t\t\tid=\"${this.getUid()}\"\n\t\t\t\t\toninput=\"${this.onInputChange.bind(this)}\"\n\t\t\t\t\tonchange=\"${this.onInputChange.bind(this)}\"\n\t\t\t\t>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonInputChange()\n\t{\n\t\tthis.setValue(this.getColorInput().value, false, true);\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-colorpicker-layout\">\n\t\t\t\t\t${this.getColorLabel()}\n\t\t\t\t\t${this.getColorInput()}\n\t\t\t\t\t${this.getOpacityField().getLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOpacityField(): BX.Landing.UI.Field.Range\n\t{\n\t\treturn this.cache.remember('opacityField', () => {\n\t\t\treturn new Opacity({\n\t\t\t\tonChange: () => {\n\t\t\t\t\tconst parsedValue = ColorPickerField.parseHex(this.getColorInput().value);\n\t\t\t\t\tparsedValue[3] = this.getOpacityField().getValue();\n\t\t\t\t\tDom.style(this.getColorLabelInner(), {\n\t\t\t\t\t\tbackgroundColor: ColorPickerField.toRgba(...parsedValue),\n\t\t\t\t\t});\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\t// return this.cache.remember('opacityField', () => {\n\t\t// \tconst createOpacityItems = () => {\n\t\t// \t\treturn Array.from({length: 101}, (item, index) => {\n\t\t// \t\t\treturn {name: `${index}%`, value: `${(100 - index) / 100}`};\n\t\t// \t\t});\n\t\t// \t};\n\t\t//\n\t\t// \treturn new window.top.BX.Landing.UI.Field.Range({\n\t\t// \t\ttitle: Loc.getMessage('LANDING_COLORPICKER_FIELD_OPACITY_TITLE'),\n\t\t// \t\titems: createOpacityItems(),\n\t\t// \t\tonChange: () => {\n\t\t// \t\t\tthis.emit('onChange');\n\t\t// \t\t},\n\t\t// \t});\n\t\t// });\n\t}\n\n\tstatic prepareHex(hex: string): string\n\t{\n\t\tif (Type.isStringFilled(hex))\n\t\t{\n\t\t\tconst preparedHex = hex.replace('#', '');\n\t\t\tif (preparedHex.length === 3)\n\t\t\t{\n\t\t\t\treturn `#${preparedHex.split('').reduce((acc, item) => {\n\t\t\t\t\treturn `${acc}${item}${item}`;\n\t\t\t\t}, '')}`;\n\t\t\t}\n\t\t}\n\n\t\treturn hex;\n\t}\n\n\tstatic parseHex(hex)\n\t{\n\t\thex = ColorPickerField.fillHex(hex);\n\t\tlet parts = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})?$/i.exec(hex);\n\t\tif (!parts)\n\t\t{\n\t\t\tparts = [0, 0, 0, 1];\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparts = [\n\t\t\t\tparseInt(parts[1], 16),\n\t\t\t\tparseInt(parts[2], 16),\n\t\t\t\tparseInt(parts[3], 16),\n\t\t\t\tparseInt(100 * (parseInt(parts[4] || 'ff', 16) / 255)) / 100,\n\t\t\t];\n\t\t}\n\n\t\treturn parts;\n\t}\n\n\tstatic fillHex(hex, fillAlpha)\n\t{\n\t\tif (hex.length === 4 || (fillAlpha && hex.length === 5))\n\t\t{\n\t\t\thex = hex.replace(/([a-f0-9])/gi, '$1$1');\n\t\t}\n\n\t\tif (fillAlpha && hex.length === 7)\n\t\t{\n\t\t\thex += 'ff';\n\t\t}\n\n\t\treturn hex;\n\t}\n\n\tstatic toHex(...args)\n\t{\n\t\targs[3] = typeof args[3] === 'undefined' ? 1 : args[3];\n\t\targs[3] = parseInt(255 * args[3]);\n\n\t\treturn `#${args.map((part) => {\n\t\t\tpart = part.toString(16);\n\t\t\treturn part.length === 1 ? `0${part}` : part;\n\t\t}).join('')}`;\n\t}\n\n\tstatic hexToRgba(hex)\n\t{\n\t\treturn `rgba(${this.parseHex(hex).join(', ')})`;\n\t}\n\n\tstatic toRgba(...args)\n\t{\n\t\treturn `rgba(${args.join(', ')})`;\n\t}\n\n\tsetValue(value: string, preventEvent = false, skipOpacity = false)\n\t{\n\t\tconst parsedValue = ColorPickerField.parseHex(value);\n\t\tconst hex = ColorPickerField.toHex(...parsedValue);\n\n\t\tif (value.length === 7)\n\t\t{\n\t\t\tparsedValue[3] = this.getOpacityField().getValue();\n\t\t}\n\n\t\tDom.style(this.getColorLabelInner(), {\n\t\t\tbackgroundColor: ColorPickerField.toRgba(parsedValue),\n\t\t});\n\n\t\tthis.getColorInput().value = hex.slice(0, 7);\n\t\tthis.getOpacityField().setValue({\n\t\t\tparsedColor: parsedValue,\n\t\t\tskipOpacity,\n\t\t});\n\n\t\tif (!preventEvent)\n\t\t{\n\t\t\tthis.emit('onChange');\n\t\t}\n\t}\n\n\tgetValue(): string\n\t{\n\t\tconst parsedHex = ColorPickerField.parseHex(this.getColorInput().value);\n\t\tparsedHex[3] = this.getOpacityField().getValue();\n\n\t\treturn ColorPickerField.toHex(...parsedHex);\n\t}\n}"],"names":["Opacity","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","cache","Cache","MemoryCache","onPickerDragStart","bind","onPickerDragMove","onPickerDragEnd","draggable","window","top","BX","UI","DragAndDrop","Draggable","container","getLayout","type","HEADLESS","subscribe","remember","Tag","render","getPicker","getColorLayout","getBoundingClientRect","width","Loc","getMessage","pickerLeft","Text","toNumber","Dom","style","layoutWidth","toFixed","parsedColor","skipOpacity","from","slice","join","to","background","opacity","leftPercent","left","set","wrapper","PageObject","getRootWindow","document","querySelector","event","getData","offsetX","get","leftPos","Math","min","max","getColorLayoutWidth","emit","EventEmitter","ColorPickerField","setLayoutClass","append","input","setValue","value","id","getRandom","getUid","getColorLabelInner","onInputChange","getColorInput","getColorLabel","getOpacityField","onChange","parsedValue","parseHex","getValue","backgroundColor","toRgba","preventEvent","hex","toHex","length","parsedHex","Type","isStringFilled","preparedHex","replace","split","reduce","acc","item","fillHex","parts","exec","parseInt","fillAlpha","args","map","part","toString","BaseField"],"mappings":"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"}