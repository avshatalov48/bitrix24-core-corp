{"version":3,"file":"linkurl.bundle.js","sources":["../src/linkurl.js"],"sourcesContent":["import { Text } from 'landing.ui.field.textfield';\nimport { Dom, Event, Tag, Type } from 'main.core';\nimport { Dialog } from 'ui.entity-selector';\n\nimport 'ui.fonts.opensans';\nimport 'ui.design-tokens';\n\nimport './css/style.css';\n\nexport class LinkUrl extends Text\n{\n\tstatic TYPE_BLOCK = \"block\";\n\tstatic TYPE_PAGE = \"landing\";\n\tstatic TYPE_CRM_FORM = \"crmFormPopup\";\n\tstatic TYPE_CRM_PHONE = \"crmPhone\";\n\tstatic TYPE_SYSTEM = \"system\";\n\tstatic TYPE_CATALOG = \"catalog\";\n\tstatic TYPE_CATALOG_ELEMENT = \"element\";\n\tstatic TYPE_CATALOG_SECTION = \"section\";\n\tstatic TYPE_DISK_FILE = \"diskFile\";\n\tstatic TYPE_USER = \"user\";\n\n\tstatic TYPE_HREF_START = \"selectActions:\";\n\tstatic TYPE_HREF_PAGE = \"page:\";\n\tstatic TYPE_HREF_BLOCK = \"block:\";\n\tstatic TYPE_HREF_CRM_FORM = \"form:\";\n\tstatic TYPE_HREF_PRODUCT = \"product:\";\n\tstatic TYPE_HREF_TEL = \"tel:\";\n\tstatic TYPE_HREF_SMS = \"sms:\";\n\tstatic TYPE_HREF_MAILTO = \"mailto:\";\n\tstatic TYPE_HREF_SKYPE = \"skype:\";\n\tstatic TYPE_HREF_LINK = \"\";\n\tstatic TYPE_HREF_FILE = \"file:\";\n\tstatic TYPE_HREF_USER = \"user:\";\n\tstatic DELETE_TYPE_HREF = \"deleteTypeHref\";\n\n\tconstructor(data)\n\t{\n\t\tsuper(data);\n\n\t\t/**\n\t\t * Href value matchers\n\t\t */\n\t\tthis.matchers = {\n\t\t\tcatalogElement: new RegExp(\"^(product:)?#catalogElement([0-9]+)\"),\n\t\t\tcatalogSection: new RegExp(\"^(product:)?#catalogSection([0-9]+)\"),\n\t\t\tcatalog: new RegExp(\"^#Section([0-9]+)\"),\n\t\t\telement: new RegExp(\"^#Element([0-9]+)\"),\n\t\t\tblock: new RegExp(\"^(block:)?#block([0-9]+)\"),\n\t\t\tpage: new RegExp(\"^(page:)?#landing([0-9]+)\"),\n\t\t\tcrmForm: new RegExp(\"^(form:)?#crmFormPopup([0-9]+)\"),\n\t\t\tcrmPhone: new RegExp(\"^(tel:)?#crmPhone([0-9]+)\"),\n\t\t\tdiskFile: new RegExp(\"^(file:)?#diskFile([0-9]+)\"),\n\t\t\tuser: new RegExp(\"^(user:)?#user([0-9]+)\"),\n\t\t\tsystem: new RegExp(\"^#system_[a-z_-]+\"),\n\t\t\tpageOld: new RegExp(\"^#landing([0-9]+)\"),\n\t\t};\n\n\t\tthis.typePostfix = {\n\t\t\tskype: '?chat',\n\t\t};\n\t\tthis.typeHrefs = {\n\t\t\tpage: LinkUrl.TYPE_HREF_PAGE,\n\t\t\tblock: LinkUrl.TYPE_HREF_BLOCK,\n\t\t\tform: LinkUrl.TYPE_HREF_CRM_FORM,\n\t\t\tproduct: LinkUrl.TYPE_HREF_PRODUCT,\n\t\t\tfile: LinkUrl.TYPE_HREF_FILE,\n\t\t\tstart: LinkUrl.TYPE_HREF_START,\n\t\t\tuser: LinkUrl.TYPE_HREF_USER,\n\t\t};\n\n\t\tDom.addClass(this.layout, \"landing-ui-field-link-url\");\n\t\tthis.requestOptions = data.options || {};\n\t\tthis.disableBlocks = Type.isBoolean(data.disableBlocks) ? data.disableBlocks : false;\n\t\tthis.disallowType = Type.isBoolean(data.disallowType) ? data.disallowType : false;\n\t\tthis.iblocks = Type.isArray(data.iblocks) ? data.iblocks : null;\n\t\tthis.allowedTypes = Type.isArray(data.allowedTypes) ? data.allowedTypes : [LinkUrl.TYPE_BLOCK, LinkUrl.TYPE_PAGE];\n\t\tif (this.allowedTypes.length === 1)\n\t\t{\n\t\t\tthis.constantType = this.allowedTypes[0];\n\t\t\tthis.constantTypeData = data.typeData;\n\t\t}\n\t\tthis.allowedCatalogEntityTypes = Type.isArray(data.allowedCatalogEntityTypes) ? data.allowedCatalogEntityTypes : null;\n\t\tthis.onInitHandler = Type.isFunction(data.onInit) ? data.onInit : (function() {});\n\t\tthis.onNewPageHandler = Type.isFunction(data.onNewPage) ? data.onNewPage : (function() {});\n\t\tthis.enableAreas = data.enableAreas;\n\t\tthis.customPlaceholder = data.customPlaceholder;\n\t\tthis.detailPageMode = data.detailPageMode === true;\n\t\tthis.sourceField = data.sourceField;\n\t\tthis.currentPageOnly = data.currentPageOnly;\n\t\tthis.panelTitle = data.panelTitle;\n\n\t\tthis.onListShow = this.onListShow.bind(this, this.requestOptions);\n\t\tthis.onTypeChange = this.onTypeChange.bind(this);\n\t\tthis.onListItemClick = this.onListItemClick.bind(this);\n\n\t\tthis.popup = null;\n\t\tthis.dynamic = null;\n\t\tthis.value = null;\n\n\t\tthis.hrefTypeSwithcer = this.createTypeSwitcher();\n\t\tthis.hrefTypeSwithcerValue = this.getHrefStringType();\n\t\tthis.grid = this.createGridLayout();\n\t\tthis.gridLeftCell = this.grid.querySelector(\"[class*=\\\"left\\\"]\");\n\t\tthis.gridCenterCell = this.grid.querySelector(\"[class*=\\\"center\\\"]\");\n\t\tthis.gridRightCell = this.grid.querySelector(\"[class*=\\\"right\\\"]\");\n\n\t\tDom.remove(this.hrefTypeSwithcer.header);\n\t\tDom.append(this.hrefTypeSwithcer.layout, this.gridLeftCell);\n\t\tif (this.getHrefStringType() === LinkUrl.TYPE_HREF_START)\n\t\t{\n\t\t\tthis.gridCenterCell.hidden = true;\n\t\t\tthis.gridRightCell.hidden = true;\n\t\t}\n\t\tDom.append(this.input, this.gridCenterCell);\n\t\tDom.append(this.grid, this.layout);\n\n\t\tif (data.settingMode)\n\t\t{\n\t\t\tDom.addClass(this.gridCenterCell, \"setting-mode\");\n\t\t}\n\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\tthis.rightData = this.getRightData();\n\t\t\tif (this.rightData.button)\n\t\t\t{\n\t\t\t\tconst button = this.createCenterCellButton(this.rightData.button);\n\t\t\t\tDom.append(button.layout, this.gridCenterCell);\n\t\t\t}\n\t\t\tthis.contentEditable = false;\n\t\t}\n\n\t\tthis.hrefTypeSwithcer.subscribe('onChange', () => {\n\t\t\tthis.rightData = this.getRightData();\n\t\t\tthis.input.hidden = this.rightData.hideInput === true;\n\t\t\tthis.gridCenterCell.hidden = false;\n\t\t\tthis.gridRightCell.hidden = false;\n\t\t\tlet button;\n\t\t\tif (this.rightData.button)\n\t\t\t{\n\t\t\t\tbutton = this.createCenterCellButton(this.rightData.button);\n\t\t\t}\n\t\t\tthis.emit('buildCenter',\n\t\t\t\t{\n\t\t\t\t\tbutton: button,\n\t\t\t\t});\n\t\t\tthis.emit('selectAction',\n\t\t\t\t{\n\t\t\t\t\threfStringType: this.getHrefStringType(),\n\t\t\t\t\tright: this.rightData,\n\t\t\t\t});\n\t\t\tif (this.hrefTypeSwithcer.getValue() === LinkUrl.DELETE_TYPE_HREF)\n\t\t\t{\n\t\t\t\tthis.deleteTypeHref();\n\t\t\t}\n\n\t\t\t//clear input when type is changed\n\t\t\tif (this.hrefTypeSwithcerValue !== this.hrefTypeSwithcer.getValue())\n\t\t\t{\n\t\t\t\tthis.input.innerHTML = '';\n\t\t\t\tthis.setValue(\"\");\n\t\t\t\tthis.hrefTypeSwithcerValue = this.hrefTypeSwithcer.getValue();\n\t\t\t}\n\n\t\t\tconst typeData = this.getTypeData(this.hrefTypeSwithcer.getValue());\n\t\t\tthis.setEditPrevented(false);\n\t\t\tthis.contentEditable = typeData.contentEditable;\n\t\t});\n\n\t\tconst type = this.getHrefStringType();\n\t\tthis.setHrefPlaceholderByType(type);\n\t\tthis.setHrefTypeSwitcherValue(type);\n\t\tthis.removeHrefTypeFromHrefString();\n\t\tthis.makeDisplayedHrefValue();\n\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\tif (this.content === '')\n\t\t\t{\n\t\t\t\tthis.input.innerText = '';\n\t\t\t\tDom.addClass(this.input, \"landing-ui-field-input-empty\");\n\t\t\t}\n\t\t}\n\n\t\tif (this.disallowType)\n\t\t{\n\t\t\tDom.addClass(this.gridLeftCell, \"grid-dissallow\");\n\t\t}\n\t}\n\n\t/**\n\t * Sets iblocks list\n\t * @param {{name: string, value: int|string}[]} iblocks\n\t */\n\tsetIblocks(iblocks)\n\t{\n\t\tthis.iblocks = Type.isArray(iblocks) ? iblocks : null;\n\t}\n\n\tcreateCenterCellButton(data)\n\t{\n\t\tlet actionClick;\n\t\tif (data.hasOwnProperty('action'))\n\t\t{\n\t\t\tactionClick = this.onListShow.bind(this, data.action);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tactionClick = data.onclick;\n\t\t}\n\t\tconst buttonClasses = `landing-ui-button-grid-center-cell ${data.className || ''}`;\n\t\treturn new BX.Landing.UI.Button.BaseButton(\"center_cell_button\", {\n\t\t\tclassName: buttonClasses,\n\t\t\ttext: data.text,\n\t\t\tonClick: actionClick\n\t\t});\n\t}\n\n\t/**\n\t * Makes displayed value placeholder\n\t */\n\tmakeDisplayedHrefValue()\n\t{\n\t\tconst hrefValue = this.getValue();\n\t\tlet placeholderType = this.getPlaceholderType();\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\tplaceholderType = this.constantType;\n\t\t}\n\t\tlet valuePromise;\n\n\t\tswitch (placeholderType)\n\t\t{\n\t\t\tcase LinkUrl.TYPE_BLOCK:\n\t\t\t\tvaluePromise = this.getBlockData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_PAGE:\n\t\t\tcase LinkUrl.TYPE_HREF_PAGE:\n\t\t\t\tvaluePromise = this.getPageData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CRM_FORM:\n\t\t\t\tvaluePromise = this.getCrmFormData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CRM_PHONE:\n\t\t\t\tvaluePromise = this.getCrmPhoneData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG_ELEMENT:\n\t\t\t\tvaluePromise = this.getCatalogElementData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG_SECTION:\n\t\t\t\tvaluePromise = this.getCatalogSectionData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_DISK_FILE:\n\t\t\t\tvaluePromise = this.getDiskFileData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_USER:\n\t\t\t\tvaluePromise = this.getUserData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_SYSTEM:\n\t\t\t\tvaluePromise = this.getSystemPage(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG:\n\t\t\t\tvaluePromise = this.getCatalog(hrefValue);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (valuePromise)\n\t\t{\n\t\t\tvaluePromise\n\t\t\t\t.then(BX.Landing.Utils.proxy(this.createPlaceholder, this))\n\t\t\t\t.then(function(data) {\n\t\t\t\t\tthis.setValue(data, true);\n\t\t\t\t\tif (!this.inited)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.inited = true;\n\t\t\t\t\t\tthis.onInitHandler();\n\t\t\t\t\t}\n\t\t\t\t\treturn data;\n\t\t\t\t}.bind(this))\n\t\t\t\t.catch(function() {});\n\t\t}\n\t}\n\n\t/**\n\t * Gets placeholder data\n\t * @param {string} [hrefValue]\n\t * @return {Promise<Object>}\n\t */\n\tgetPlaceholderData(hrefValue)\n\t{\n\t\threfValue = hrefValue || this.getValue();\n\t\tconst placeholderType = this.getPlaceholderType(hrefValue);\n\t\tlet valuePromise = Promise.resolve({});\n\n\t\tswitch (placeholderType)\n\t\t{\n\t\t\tcase LinkUrl.TYPE_BLOCK:\n\t\t\t\tvaluePromise = this.getBlockData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_PAGE:\n\t\t\t\tvaluePromise = this.getPageData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG_ELEMENT:\n\t\t\t\tvaluePromise = this.getCatalogElementData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG_SECTION:\n\t\t\t\tvaluePromise = this.getCatalogSectionData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_DISK_FILE:\n\t\t\t\tvaluePromise = this.getDiskFileData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_USER:\n\t\t\t\tvaluePromise = this.getUserData(hrefValue);\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_SYSTEM:\n\t\t\t\tvaluePromise = this.getSystemPage(hrefValue);\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn valuePromise;\n\t}\n\n\t/**\n\t * Removes type prefix from href value\n\t */\n\tremoveHrefTypeFromHrefString()\n\t{\n\t\tconst clearHref = this.getValue()\n\t\t\t.replace(new RegExp(this.getHrefStringType(), \"g\"), \"\");\n\t\tthis.setValue(clearHref, true);\n\t}\n\n\t/**\n\t * Sets type switcher value\n\t * @param type\n\t */\n\tsetHrefTypeSwitcherValue(type)\n\t{\n\t\tif (type === LinkUrl.TYPE_HREF_START)\n\t\t{\n\t\t\tthis.gridCenterCell.hidden = true;\n\t\t\tthis.gridRightCell.hidden = true;\n\t\t\tthis.emit('deleteAction');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.gridCenterCell.hidden = false;\n\t\t\tthis.gridRightCell.hidden = false;\n\t\t}\n\t\tthis.hrefTypeSwithcer.setValue(type);\n\t}\n\n\t/**\n\t * Gets selected href type (From type switcher)\n\t * @return {string}\n\t */\n\tgetSelectedHrefType()\n\t{\n\t\treturn this.hrefTypeSwithcer.getValue();\n\t}\n\n\tgetRightData()\n\t{\n\t\tlet type = this.hrefTypeSwithcer.getValue();\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\ttype = this.constantType;\n\t\t}\n\t\tconst data = this.getTypeData(type);\n\t\tconst title = this.getRightTitle(data);\n\t\tconst items = this.getRightItems(data);\n\t\tconst button = this.getRightButton(data);\n\t\tconst hideInput = this.getRightHideInput(data);\n\t\tconst idPopup = '';\n\t\treturn {\n\t\t\ttitle,\n\t\t\titems,\n\t\t\thideInput,\n\t\t\tbutton,\n\t\t\tidPopup,\n\t\t};\n\t}\n\n\tgetRightTitle(data)\n\t{\n\t\treturn data.title;\n\t}\n\n\tgetRightItems(data)\n\t{\n\t\treturn data.items;\n\t}\n\n\tgetRightHideInput(data)\n\t{\n\t\treturn data.hideInput;\n\t}\n\n\tgetRightButton(data)\n\t{\n\t\treturn data.button;\n\t}\n\n\tgetTypeData(type)\n\t{\n\t\tif (!Type.isUndefined(this.constantTypeData))\n\t\t{\n\t\t\treturn this.constantTypeData;\n\t\t}\n\n\t\tconst data = {};\n\t\tconst buttonClasses = 'fa fa-chevron-right';\n\t\tswitch (type)\n\t\t{\n\t\t\tcase LinkUrl.TYPE_HREF_PAGE:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_PAGE\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_self\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_SELF\"),\n\t\t\t\t\t\"_blank\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_BLANK\"),\n\t\t\t\t\t\"_popup\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_POPUP\"),\n\t\t\t\t};\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'action': LinkUrl.TYPE_PAGE,\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_BLOCK:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_BLOCK\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_self\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_SELF\"),\n\t\t\t\t\t\"_blank\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_BLANK\"),\n\t\t\t\t\t\"_popup\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_POPUP\"),\n\t\t\t\t};\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'action': LinkUrl.TYPE_BLOCK,\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_CRM_FORM:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_CRM_FORM\");\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'action': LinkUrl.TYPE_CRM_FORM,\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_PRODUCT:\n\t\t\tcase LinkUrl.TYPE_CATALOG:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_PRODUCT\");\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'action': LinkUrl.TYPE_CATALOG_SECTION,\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_TEL:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_TEL\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_blank\": '',\n\t\t\t\t};\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'action': LinkUrl.TYPE_CRM_PHONE,\n\t\t\t\t};\n\t\t\t\tdata.contentEditable = true;\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.needValidate = 'phone';\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_SMS:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_SMS\");\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.needValidate = 'phone';\n\t\t\t\tdata.contentEditable = true;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_SKYPE:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_SKYPE\");\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.needValidate = 'skype';\n\t\t\t\tdata.contentEditable = true;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_MAILTO:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_MAILTO\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_blank\": \"\",\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.needValidate = 'mail';\n\t\t\t\tdata.contentEditable = true;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_LINK:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_LINK\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_self\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_SELF\"),\n\t\t\t\t\t\"_blank\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_BLANK\"),\n\t\t\t\t\t\"_popup\": BX.Landing.Loc.getMessage(\"FIELD_LINK_TARGET_POPUP\"),\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = true;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_FILE:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_FILE\");\n\t\t\t\tdata.items =  {\n\t\t\t\t\t\"_blank\": '',\n\t\t\t\t};\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'onclick': this.onDiskFileShow.bind(this),\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_USER:\n\t\t\t\tdata.title = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_TITLE_USER\");\n\t\t\t\tdata.button = {\n\t\t\t\t\t'className': buttonClasses,\n\t\t\t\t\t'text': '',\n\t\t\t\t\t'onclick': this.onUserListShow.bind(this),\n\t\t\t\t};\n\t\t\t\tdata.hideInput = false;\n\t\t\t\tdata.contentEditable = false;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t/**\n\t * Get link type\n\t * @return {string}\n\t */\n\tgetHrefStringType()\n\t{\n\t\tconst segment = this.getValueText();\n\t\tlet type = LinkUrl.TYPE_HREF_START;\n\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\treturn this.constantType;\n\t\t}\n\n\t\tconst foundHrefStringType = this.matchHrefStringType(segment);\n\t\tif (foundHrefStringType !== null)\n\t\t{\n\t\t\treturn foundHrefStringType\n\t\t}\n\n\t\t//for blocks with default href=\"#\"\n\t\tif (segment === '#')\n\t\t{\n\t\t\treturn type;\n\t\t}\n\n\t\tconst setHrefTypes = [\n\t\t\tLinkUrl.TYPE_HREF_START,\n\t\t\tLinkUrl.TYPE_HREF_PAGE,\n\t\t\tLinkUrl.TYPE_HREF_BLOCK,\n\t\t\tLinkUrl.TYPE_HREF_CRM_FORM,\n\t\t\tLinkUrl.TYPE_HREF_PRODUCT,\n\t\t\tLinkUrl.TYPE_HREF_TEL,\n\t\t\tLinkUrl.TYPE_HREF_SMS,\n\t\t\tLinkUrl.TYPE_HREF_MAILTO,\n\t\t\tLinkUrl.TYPE_HREF_SKYPE,\n\t\t\tLinkUrl.TYPE_HREF_FILE,\n\t\t\tLinkUrl.TYPE_HREF_USER,\n\t\t];\n\n\t\tconst isFindHrefType = setHrefTypes.some(function(hrefType) {\n\t\t\treturn segment.includes(hrefType);\n\t\t});\n\t\tif (segment !== '' && segment !== '#' && !isFindHrefType)\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_LINK;\n\t\t}\n\n\t\tconst segmentType = BX.Landing.Utils.join(segment.split(\":\")[0], \":\");\n\t\tif (segment.length !== segmentType.length)\n\t\t{\n\t\t\tswitch (segmentType)\n\t\t\t{\n\t\t\t\tcase LinkUrl.TYPE_HREF_PAGE:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_PAGE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_BLOCK:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_BLOCK;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_CRM_FORM:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_CRM_FORM;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_PRODUCT:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_PRODUCT;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_TEL:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_TEL;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_SMS:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_SMS;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_SKYPE:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_SKYPE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_MAILTO:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_MAILTO;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_LINK:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_LINK;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_FILE:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_FILE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_USER:\n\t\t\t\t\ttype = LinkUrl.TYPE_HREF_USER;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn type;\n\t}\n\n\t/**\n\t * Match type href for old values\n\t * @param {string} value\n\t */\n\tmatchHrefStringType(value)\n\t{\n\t\tif (this.matchers.catalogElement.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_PRODUCT;\n\t\t}\n\t\tif (this.matchers.catalogSection.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_PRODUCT;\n\t\t}\n\t\tif (this.matchers.block.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_BLOCK;\n\t\t}\n\t\tif (this.matchers.pageOld.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_PAGE;\n\t\t}\n\t\tif (this.matchers.crmForm.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_CRM_FORM;\n\t\t}\n\t\tif (this.matchers.crmPhone.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_TEL;\n\t\t}\n\t\tif (this.matchers.diskFile.test(value))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_HREF_FILE;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Sets placeholder by href type\n\t * @param {string} type\n\t */\n\tsetHrefPlaceholderByType(type)\n\t{\n\t\tlet placeholder = this.placeholder;\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase LinkUrl.TYPE_HREF_PAGE:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_PAGE\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_BLOCK:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_BLOCK\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_CRM_FORM:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_CRM\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_LINK:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_PLACEHOLDER_URL\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_TEL:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_PLACEHOLDER_PHONE\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_SKYPE:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_PLACEHOLDER_SKYPE\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_SMS:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_PLACEHOLDER_PHONE\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_MAILTO:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_PLACEHOLDER_EMAIL\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_FILE:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_FILE\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_USER:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_USER\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_HREF_PRODUCT:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_PRODUCT\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_CATALOG:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_CATALOG\");\n\t\t\t\tbreak;\n\t\t\tcase LinkUrl.TYPE_PAGE:\n\t\t\t\tplaceholder = BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_BUTTON_PAGE_SHORT\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tDom.attr(this.input, \"data-placeholder\", placeholder);\n\t}\n\n\t/**\n\t * Gets placeholder type\n\t * @param {string} [hrefValue]\n\t * @return {string}\n\t */\n\tgetPlaceholderType(hrefValue)\n\t{\n\t\threfValue = hrefValue || this.getValue();\n\n\t\tif (this.matchers.block.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_BLOCK;\n\t\t}\n\n\t\tif (this.matchers.page.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_PAGE;\n\t\t}\n\n\t\tif (this.matchers.crmForm.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_CRM_FORM;\n\t\t}\n\n\t\tif (this.matchers.crmPhone.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_CRM_PHONE;\n\t\t}\n\n\t\tif (this.matchers.catalogElement.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_CATALOG_ELEMENT;\n\t\t}\n\n\t\tif (this.matchers.catalogSection.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_CATALOG_SECTION;\n\t\t}\n\n\t\tif (this.matchers.diskFile.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_DISK_FILE;\n\t\t}\n\n\t\tif (this.matchers.user.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_USER;\n\t\t}\n\n\t\tif (this.matchers.system.test(hrefValue))\n\t\t{\n\t\t\treturn LinkUrl.TYPE_SYSTEM;\n\t\t}\n\n\t\treturn LinkUrl.TYPE_HREF_LINK;\n\t}\n\n\t/**\n\t * Checks that this field contains url placeholder\n\t * @return {boolean}\n\t */\n\tcontainsPlaceholder()\n\t{\n\t\treturn this.input.innerHTML.indexOf(\"span\") !== -1;\n\t}\n\n\t/**\n\t * Creates field grid layout\n\t * @return {Element}\n\t */\n\tcreateGridLayout()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\\\"landing-ui-field-link-url-grid --landing-ui-field-link-url__scope\\\">\n\t\t\t\t<div class=\\\"landing-ui-field-link-url-grid-left\\\"></div>\n\t\t\t\t\t<div class=\\\"landing-ui-field-link-url-grid-center\\\"></div>\n\t\t\t\t<div class=\\\"landing-ui-field-link-url-grid-right\\\"></div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tonSelectHrefButtonClick()\n\t{\n\t\tthis.popupActions.show();\n\t}\n\n\t/**\n\t * Creates type switcher dropdown\n\t * @return {BX.Landing.UI.Field.Dropdown}\n\t */\n\tcreateTypeSwitcher()\n\t{\n\t\t//type = PAGE || STORE || KNOWLEDGE\n\t\tconst type = BX.Landing.Env.getInstance().getType();\n\t\tconst items = [\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_SELECT\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_START,\n\t\t\t\thidden: true,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_PAGE\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_PAGE,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--b24',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_BLOCK\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_BLOCK,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--b24',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_CRM\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_CRM_FORM,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--crm',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_PRODUCT\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_PRODUCT,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--product',\n\t\t\t\ttype: 'STORE',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdelimiter: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_PHONE\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_TEL,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--phone',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_SMS\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_SMS,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--sms',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_EMAIL\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_MAILTO,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--mailto',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_SKYPE\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_SKYPE,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--skype',\n\t\t\t},\n\t\t\t{\n\t\t\t\tdelimiter: true\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_LINK\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_LINK,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--link',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_FILE_MSGVER_1\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_FILE,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--file',\n\t\t\t\ttype: ['KNOWLEDGE', 'GROUP'],\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_USER\"),\n\t\t\t\tvalue: LinkUrl.TYPE_HREF_USER,\n\t\t\t\tclassName: 'landing-ui-field-link-url-select-action-item fas landing-ui-field-link-url-icon--user',\n\t\t\t\ttype: 'KNOWLEDGE',\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_DELETE_ACTION\"),\n\t\t\t\tvalue: LinkUrl.DELETE_TYPE_HREF,\n\t\t\t\tclassName: 'landing-ui-field-link-url-delete-action-item fas',\n\t\t\t},\n\t\t];\n\t\tlet setItems = [];\n\t\titems.forEach(function(item) {\n\t\t\tif (\n\t\t\t\t!item.hasOwnProperty('type')\n\t\t\t\t|| item.type === type\n\t\t\t\t|| Type.isArray(item.type) && item.type.includes(type)\n\t\t\t)\n\t\t\t{\n\t\t\t\tsetItems.push(item);\n\t\t\t}\n\t\t})\n\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\tif (this.constantType === LinkUrl.TYPE_CATALOG)\n\t\t\t{\n\t\t\t\tsetItems = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_SELECT_CATALOG\"),\n\t\t\t\t\t\tvalue: this.constantType,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t\tif (this.constantType === LinkUrl.TYPE_PAGE)\n\t\t\t{\n\t\t\t\tsetItems = [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: BX.Landing.Loc.getMessage(\"LANDING_LINK_URL_ACTION_SELECT_PAGE\"),\n\t\t\t\t\t\tvalue: this.constantType,\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\titems: setItems,\n\t\t\tonValueChange: this.onTypeChange,\n\t\t\tmaxHeight: 1000,\n\t\t\tclassName: 'landing-ui-field-link-url-dropdown-href-type',\n\t\t\tclassForTextNode: 'landing-ui-field-input-text',\n\t\t});\n\t}\n\n\t/**\n\t * Handles link type change event\n\t * @param {BX.Landing.UI.Field.Dropdown} field\n\t */\n\tonTypeChange(field)\n\t{\n\t\tconst type = field.getValue();\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase LinkUrl.TYPE_HREF_START:\n\t\t\tcase LinkUrl.TYPE_HREF_PAGE:\n\t\t\tcase LinkUrl.TYPE_HREF_BLOCK:\n\t\t\tcase LinkUrl.TYPE_HREF_CRM_FORM:\n\t\t\tcase LinkUrl.TYPE_HREF_PRODUCT:\n\t\t\tcase LinkUrl.TYPE_HREF_LINK:\n\t\t\tcase LinkUrl.TYPE_HREF_TEL:\n\t\t\tcase LinkUrl.TYPE_HREF_SMS:\n\t\t\tcase LinkUrl.TYPE_HREF_SKYPE:\n\t\t\tcase LinkUrl.TYPE_HREF_MAILTO:\n\t\t\tcase LinkUrl.TYPE_HREF_FILE:\n\t\t\tcase LinkUrl.TYPE_HREF_USER:\n\t\t}\n\n\t\tthis.setHrefPlaceholderByType(type);\n\t}\n\n\t/**\n\t * Gets block data\n\t * @param {string} block - (#block123)\n\t * @return {Promise<T>}\n\t */\n\tgetBlockData(block)\n\t{\n\t\tconst blockId = block.match(/\\d+/)[0];\n\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t.getBlock({blockId: blockId})\n\t\t\t.then(function(result) {\n\t\t\t\treturn (result.type = \"block\"), result;\n\t\t\t});\n\t}\n\n\t/**\n\t * Gets page data\n\t * @param {string} page - (#landing123)\n\t */\n\tgetPageData(page)\n\t{\n\t\tconst match = page.match(/\\d+/);\n\t\tif (match !== null)\n\t\t{\n\t\t\tconst pageId = match[0];\n\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t.getLanding({landingId: pageId})\n\t\t\t\t.then(function(landing) {\n\t\t\t\t\tif (!landing)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (BX.Text.toNumber(pageId) === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.onNewPageHandler();\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\ttype: \"landing\",\n\t\t\t\t\t\t\t\tid: 0,\n\t\t\t\t\t\t\t\tname: BX.Landing.Loc.getMessage('LANDING_LINK_PLACEHOLDER_NEW_PAGE'),\n\t\t\t\t\t\t\t\tsiteId: BX.Landing.Main.getInstance().options.site_id\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: \"landing\",\n\t\t\t\t\t\tid: landing.ID,\n\t\t\t\t\t\tname: landing.TITLE,\n\t\t\t\t\t\tsiteId: landing.SITE_ID\n\t\t\t\t\t};\n\t\t\t\t}.bind(this));\n\t\t}\n\t}\n\n\tgetCrmFormData(value)\n\t{\n\t\tconst formId = value.match(/\\d+/)[0];\n\n\t\treturn BX.Landing.Backend\n\t\t\t.getInstance()\n\t\t\t.action(\"Form::getList\")\n\t\t\t.then(function(result) {\n\t\t\t\tconst form = result.find(function(item) {\n\t\t\t\t\treturn String(item.ID) === String(formId);\n\t\t\t\t});\n\n\t\t\t\tif (form)\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: \"crmFormPopup\",\n\t\t\t\t\t\tid: form.ID,\n\t\t\t\t\t\tname: form.NAME\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}.bind(this));\n\t}\n\n\tgetCrmPhoneData(value)\n\t{\n\t\treturn new Promise(function(resolve) {\n\t\t\tconst phoneId = value.replace('tel:', '').replace('#crmPhone', '');\n\t\t\tconst item = BX.Landing.Env\n\t\t\t\t.getInstance()\n\t\t\t\t.getOptions()\n\t\t\t\t.references\n\t\t\t\t.find(function(item) {\n\t\t\t\t\treturn String(item.value) === String(phoneId);\n\t\t\t\t});\n\n\t\t\tif (item)\n\t\t\t{\n\t\t\t\tresolve({\n\t\t\t\t\ttype: \"crmPhone\",\n\t\t\t\t\tid: item.value,\n\t\t\t\t\tname: item.text\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(null);\n\t\t\t}\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Gets system page data\n\t * @param {string} page - (#system_([a-z]))\n\t */\n\tgetSystemPage(page)\n\t{\n\t\treturn this.cache.remember(page, function() {\n\t\t\tconst systemCode = this.content.replace(\"#system_\", \"\");\n\t\t\tconst systemPages = BX.Landing.Main.getInstance().options.syspages;\n\n\t\t\tif (systemCode in systemPages)\n\t\t\t{\n\t\t\t\treturn Promise.resolve({\n\t\t\t\t\ttype: \"system\",\n\t\t\t\t\tid: \"_\" + systemCode,\n\t\t\t\t\tname: systemPages[systemCode].name\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn Promise.reject();\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Gets catalog element data\n\t * @param {string} element\n\t */\n\tgetCatalogElementData(element)\n\t{\n\t\treturn this.cache.remember(element, function() {\n\t\t\tlet elementId = element.match(this.matchers.catalogElement)[2];\n\t\t\tif (!Type.isString(elementId))\n\t\t\t{\n\t\t\t\telementId = element.match(this.matchers.catalogElement)[1];\n\t\t\t}\n\t\t\tconst requestBody = {elementId: elementId};\n\n\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t.action(\"Utils::getCatalogElement\", requestBody);\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Gets catalog section data\n\t * @param {string} section\n\t */\n\tgetCatalogSectionData(section)\n\t{\n\t\treturn this.cache.remember(section, function() {\n\t\t\tlet sectionId = section.match(this.matchers.catalogSection)[2];\n\t\t\tif (!Type.isString(sectionId))\n\t\t\t{\n\t\t\t\tsectionId = element.match(this.matchers.catalogSection)[1];\n\t\t\t}\n\t\t\tconst requestBody = {sectionId: sectionId};\n\n\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t.action(\"Utils::getCatalogSection\", requestBody);\n\t\t}.bind(this));\n\t}\n\n\tgetCatalog(section)\n\t{\n\t\tif (\n\t\t\tsection === '={$sectionId}'\n\t\t\t|| section === 'selectActions:'\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this.cache.remember(section, function() {\n\t\t\tlet matchRes;\n\t\t\tlet id;\n\t\t\tlet type;\n\t\t\tmatchRes = section.match(this.matchers.catalog);\n\t\t\tif (matchRes === null)\n\t\t\t{\n\t\t\t\tmatchRes = section.match(this.matchers.element);\n\t\t\t\tif (matchRes !== null)\n\t\t\t\t{\n\t\t\t\t\ttype = 'Element';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttype = 'Section';\n\t\t\t}\n\t\t\tif (matchRes)\n\t\t\t{\n\t\t\t\tid = matchRes[1];\n\t\t\t}\n\n\t\t\tlet requestBody = null;\n\t\t\tif (type === 'Section')\n\t\t\t{\n\t\t\t\trequestBody = {sectionId: id};\n\t\t\t}\n\t\t\tif (type === 'Element')\n\t\t\t{\n\t\t\t\trequestBody = {elementId: id};\n\t\t\t}\n\t\t\tif (requestBody === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst action = 'Utils::getCatalog' + type;\n\n\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t.action(action, requestBody);\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Gets disk file data.\n\t * @param {string} diskFile\n\t */\n\tgetDiskFileData(diskFile)\n\t{\n\t\treturn this.cache.remember(diskFile, function() {\n\t\t\tconst fileId = diskFile.replace(\"file:\", \"\").replace(\"#diskFile\", \"\");\n\n\t\t\treturn BX.Landing.Backend\n\t\t\t\t.getInstance()\n\t\t\t\t.action(\"Block::getFileDisk\", {fileId: fileId})\n\t\t\t\t.then(function(result) {\n\t\t\t\t\tif (result)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttype: LinkUrl.TYPE_DISK_FILE,\n\t\t\t\t\t\t\tid: result.ID,\n\t\t\t\t\t\t\tname: result.NAME\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}.bind(this));\n\t\t}.bind(this));\n\t}\n\n\t/**\n\t * Gets user data.\n\t * @param {string} userData\n\t */\n\tgetUserData(userData)\n\t{\n\t\tconst userId = userData.replace(\"user:\", \"\").replace(\"#user\", \"\");\n\t\treturn new Promise(function(resolve) {\n\t\t\tBX.ajax({\n\t\t\t\turl: '/bitrix/services/main/ajax.php?action=landing.api.user.getUserNameById',\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdataType: 'json',\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: userId\n\t\t\t\t},\n\t\t\t\tonsuccess: function(result) {\n\t\t\t\t\tconst response = {\n\t\t\t\t\t\ttype: LinkUrl.TYPE_USER,\n\t\t\t\t\t\tid: userId,\n\t\t\t\t\t\tname: result.data\n\t\t\t\t\t};\n\t\t\t\t\tresolve(response);\n\t\t\t\t},\n\t\t\t});\n\t\t}.bind(this));\n\t}\n\n\tdeleteTypeHref()\n\t{\n\t\tthis.gridCenterCell.hidden = true;\n\t\tthis.gridRightCell.hidden = true;\n\t\tthis.setHrefTypeSwitcherValue(LinkUrl.TYPE_HREF_START);\n\t\tthis.setHrefPlaceholderByType(LinkUrl.TYPE_HREF_START);\n\t\tthis.emit('deleteAction');\n\t}\n\n\tonSelectButtonClick()\n\t{\n\t\tif (this.allowedTypes.length === 1)\n\t\t{\n\t\t\tthis.onListShow(this.allowedTypes[0]);\n\t\t}\n\t}\n\n\tonListShow(options, type)\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tif (\n\t\t\ttype === LinkUrl.TYPE_CATALOG_SECTION\n\t\t\t|| type === LinkUrl.TYPE_CATALOG\n\t\t)\n\t\t{\n\t\t\tlet iblocks = this.iblocks;\n\n\t\t\tif (!Type.isArray(iblocks))\n\t\t\t{\n\t\t\t\tiblocks = BX.Landing.Main.getInstance().options.iblocks;\n\t\t\t}\n\n\t\t\tvoid BX.Landing.UI.Panel.Catalog.getInstance()\n\t\t\t\t.show(iblocks, this.allowedCatalogEntityTypes)\n\t\t\t\t.then(this.onListItemClick);\n\n\t\t\treturn;\n\t\t}\n\n\t\toptions.enableAreas = this.enableAreas;\n\t\toptions.dynamicMode = true;\n\t\toptions.currentPageOnly = this.currentPageOnly;\n\t\toptions.panelTitle = this.panelTitle;\n\n\t\tif (this.detailPageMode)\n\t\t{\n\t\t\toptions.source = this.sourceField.getValue().source;\n\t\t\tvoid BX.Landing.UI.Panel.DetailPage.getInstance()\n\t\t\t\t.show(options)\n\t\t\t\t.then(this.onListItemClick);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst panel = BX.Landing.UI.Panel.URLList.getInstance();\n\n\t\t\tvoid panel\n\t\t\t\t.show(type, options)\n\t\t\t\t.then(this.onListItemClick);\n\t\t}\n\t}\n\n\tonDiskFileShow()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.close();\n\t\t}\n\n\t\tparent.BX.Landing.Connector.Disk.openDialog({\n\t\t\tonSelect: (fileId) => {\n\t\t\t\tthis.getDiskFileData(\"#diskFile\" + fileId)\n\t\t\t\t\t.then(function(data)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setValue(this.createPlaceholder(data), true);\n\t\t\t\t\t}.bind(this))\n\t\t\t\tthis.setHrefTypeSwitcherValue(LinkUrl.TYPE_HREF_FILE);\n\t\t\t}\n\t\t});\n\t}\n\n\tonUserListShow()\n\t{\n\t\tthis.dialog = new Dialog({\n\t\t\ttargetNode: this.input,\n\t\t\tenableSearch: true,\n\t\t\tcontext: 'MY_MODULE_CONTEXT',\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: LinkUrl.TYPE_USER,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'department',\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': this.onSelectUser.bind(this)\n\t\t\t},\n\t\t\tmultiple: false,\n\t\t\tpopupOptions: {\n\t\t\t\ttargetContainer: parent.document.body,\n\t\t\t},\n\t\t});\n\t\tthis.dialog.show();\n\t}\n\n\tonSelectUser()\n\t{\n\t\tconst selectedItem = this.dialog.getSelectedItems()[0];\n\t\tconst item = {\n\t\t\t'name': selectedItem.title.text,\n\t\t\t'type': LinkUrl.TYPE_USER,\n\t\t\t'id': selectedItem.id,\n\t\t};\n\t\tthis.setValue(this.createPlaceholder(item));\n\t\tBX.Landing.Utils.fireEvent(this.layout, \"input\");\n\t\tthis.setHrefTypeSwitcherValue(item.type + ':');\n\t}\n\n\t/**\n\t * Checks that edit mode is prevented\n\t * @return {boolean}\n\t */\n\tisEditPrevented()\n\t{\n\t\tif (!Type.isBoolean(this.editPrevented))\n\t\t{\n\t\t\tthis.editPrevented = this.containsPlaceholder();\n\t\t}\n\n\t\treturn this.editPrevented;\n\t}\n\n\t/**\n\t * Sets edit prevented value\n\t * @param {boolean} value\n\t */\n\tsetEditPrevented(value)\n\t{\n\t\tthis.editPrevented = value;\n\t}\n\n\t/**\n\t * Enables edit\n\t */\n\tenableEdit()\n\t{\n\t\tif (!this.isEditPrevented())\n\t\t{\n\t\t\tBX.Landing.UI.Field.Text.prototype.enableEdit.apply(this);\n\t\t}\n\t}\n\n\t/**\n\t * Creates internal url placeholder\n\t * @param {{[type]: string, [id]: string|number, name: string, [url]: string, [image]: string, [subType]: string, [chain]: string[]}} options\n\t * @returns {Element}\n\t */\n\tcreatePlaceholder(options)\n\t{\n\t\tDom.addClass(this.gridCenterCell, \"--not-empty\");\n\t\tif (Type.isString(options))\n\t\t{\n\t\t\treturn options;\n\t\t}\n\n\t\tconst placeholder = Tag.render`\n\t\t\t<span class=\\\"landing-ui-field-url-placeholder\\\">\n\t\t\t\t<span class=\\\"landing-ui-field-url-placeholder-preview\\\"></span>\n\t\t\t\t<span class=\\\"landing-ui-field-url-placeholder-text\\\">\n\t\t\t\t\t${BX.Landing.Utils.encodeDataValue(options.name)}\n\t\t\t\t</span>\n\t\t\t\t<span class=\\\"landing-ui-field-url-placeholder-delete\\\"></span>\n\t\t\t</span>\n\t\t`;\n\n\t\tconst placeholderRemove = placeholder\n\t\t\t.querySelector(\"[class*=\\\"delete\\\"]\");\n\t\tEvent.bind(placeholderRemove, \"click\", this.onPlaceholderRemoveClick.bind(this));\n\n\n\t\tif (options.type === LinkUrl.TYPE_CATALOG)\n\t\t{\n\t\t\toptions.chain.push(options.name);\n\t\t\tconst title = BX.Landing.Utils.join(options.name, \"\\n\", options.chain.join(' / '));\n\n\t\t\tDom.attr(placeholder, {\n\t\t\t\t\"data-dynamic\": {\n\t\t\t\t\ttype: BX.Landing.Utils.join(LinkUrl.TYPE_CATALOG, BX.Landing.Utils.capitalize(options.subType)),\n\t\t\t\t\tvalue: options.id\n\t\t\t\t},\n\t\t\t\t\"data-placeholder\": BX.Landing.Utils.join(\"#\", options.type, BX.Landing.Utils.capitalize(options.subType), options.id),\n\t\t\t\t\"data-url\": BX.Landing.Utils.join(\"#\", options.type, BX.Landing.Utils.capitalize(options.subType), options.id)\n\t\t\t});\n\n\t\t\tplaceholder.setAttribute(\"title\", title);\n\n\t\t\treturn placeholder;\n\t\t}\n\n\t\tBX.Landing.Utils.attr(placeholder, {\n\t\t\t\"data-placeholder\": BX.Landing.Utils.join(\"#\", options.type, options.id),\n\t\t\t\"data-url\": BX.Landing.Utils.join(\"#\", options.type, options.id)\n\t\t});\n\n\t\tplaceholder.setAttribute(\"title\", options.name);\n\n\t\treturn placeholder;\n\t}\n\n\t/**\n\t * Handles click event on placeholder remove button\n\t * @param event\n\t */\n\tonPlaceholderRemoveClick(event)\n\t{\n\t\tDom.removeClass(this.gridCenterCell, \"--not-empty\");\n\t\tthis.setEditPrevented(false);\n\t\tthis.enableEdit();\n\t\tDom.remove(event.target.parentNode);\n\t\tthis.setValue(\"\");\n\t\tBX.Landing.Utils.fireEvent(this.layout, \"input\");\n\t\tthis.onInputHandler(this.input.innerText);\n\t}\n\n\t/**\n\t * Handles click event on catalog panel item\n\t * @param {object} item\n\t */\n\tonListItemClick(item)\n\t{\n\t\tlet resultPromise = Promise.resolve(item);\n\n\t\tif (item.type === \"block\")\n\t\t{\n\t\t\tresultPromise = this.getBlockData(\"#block\" + item.id);\n\t\t}\n\n\t\tresultPromise.then(function(item) {\n\t\t\tthis.setValue(this.createPlaceholder(item));\n\t\t\tBX.Landing.Utils.fireEvent(this.layout, \"input\");\n\t\t\tthis.setHrefTypeSwitcherValue(item.type + ':');\n\t\t}.bind(this));\n\t}\n\n\tgetNewLabel()\n\t{\n\t\tif (!this.newLabel)\n\t\t{\n\t\t\tthis.newLabel = Dom.create({\n\t\t\t\ttag: 'div',\n\t\t\t\tprops: {className: 'landing-ui-field-link-new-label'},\n\t\t\t\ttext: BX.Landing.Loc.getMessage('LANDING_LINK_NEW_PAGE_LABEL')\n\t\t\t});\n\t\t}\n\n\t\treturn this.newLabel;\n\t}\n\n\tshowNewLabel()\n\t{\n\t\tBX.Dom.style(this.gridCenterCell, {\n\t\t\tposition: 'relative',\n\t\t\toverflow: 'visible',\n\t\t});\n\t\tBX.Dom.append(this.getNewLabel(), this.gridCenterCell);\n\t}\n\n\thideNewLabel()\n\t{\n\t\tBX.Dom.style(this.gridCenterCell, 'overflow', null);\n\t\tBX.Dom.remove(this.getNewLabel());\n\t}\n\n\t/**\n\t * Sets value\n\t * @param {object|string} value\n\t * @param {boolean} [preventEvent] - Prevents onChange event\n\t */\n\tsetValue(value, preventEvent)\n\t{\n\t\tif (Type.isObject(value) && !Type.isNil(value))\n\t\t{\n\t\t\tthis.disableEdit();\n\t\t\tthis.setEditPrevented(true);\n\t\t\tthis.input.innerHTML = \"\";\n\t\t\tDom.append(value, this.input);\n\t\t\tconst dataSet = value['dataset'];\n\t\t\tthis.value = dataSet.placeholder;\n\t\t\tthis.dynamic = dataSet.dynamic;\n\n\t\t\tif (this.value === '#landing0')\n\t\t\t{\n\t\t\t\tthis.showNewLabel();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hideNewLabel();\n\t\t\t}\n\n\t\t\tif (!preventEvent)\n\t\t\t{\n\t\t\t\tthis.onInputHandler(this.input.innerText);\n\t\t\t}\n\t\t}\n\t\telse if (!Type.isNil(value))\n\t\t{\n\t\t\tthis.setEditPrevented(false);\n\t\t\tthis.input.innerText = this.getInputInnerText(value);\n\t\t\tthis.value = null;\n\t\t\tthis.dynamic = null;\n\t\t\tthis.hideNewLabel();\n\t\t}\n\n\t\tif (!preventEvent)\n\t\t{\n\t\t\tif (Type.isString(this.value))\n\t\t\t{\n\t\t\t\tthis.getPlaceholderData(this.value)\n\t\t\t\t\t.then(function(data) {\n\t\t\t\t\t\tthis.onValueChangeHandler(data);\n\t\t\t\t\t}.bind(this))\n\t\t\t\t\t.catch(function() {\n\n\t\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.onValueChangeHandler(null);\n\t\t}\n\t}\n\n\t/**\n\t * Gets dynamic data\n\t * @return {?object}\n\t */\n\tgetDynamic()\n\t{\n\t\treturn this.dynamic;\n\t}\n\n\t/**\n\t * Gets value\n\t * @return {string}\n\t */\n\tgetValue()\n\t{\n\t\tlet valueText = this.value ? this.value : this.input.innerText;\n\t\tconst selectedHrefType = this.getSelectedHrefType();\n\n\t\tthis.validateValue(valueText);\n\t\tthis.prepareInputField(this.hrefTypeSwithcer.getValue(), valueText);\n\n\t\tif (valueText === '')\n\t\t{\n\t\t\tif (selectedHrefType === 'catalog')\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\treturn LinkUrl.TYPE_HREF_START;\n\t\t}\n\n\t\tif (\n\t\t\tselectedHrefType === LinkUrl.TYPE_HREF_SKYPE\n\t\t\t&& !valueText.includes(this.typePostfix.skype)\n\t\t)\n\t\t{\n\t\t\tvalueText = valueText + this.typePostfix.skype;\n\t\t}\n\n\t\tif (valueText.startsWith(selectedHrefType))\n\t\t{\n\t\t\treturn valueText;\n\t\t}\n\n\t\tif (!Type.isUndefined(this.constantType))\n\t\t{\n\t\t\tif (this.constantType === LinkUrl.TYPE_CATALOG)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tthis.matchers.catalogElement.test(valueText)\n\t\t\t\t\t|| this.matchers.catalogSection.test(valueText)\n\t\t\t\t\t|| this.matchers.catalog.test(valueText)\n\t\t\t\t\t|| this.matchers.element.test(valueText)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn valueText;\n\t\t\t\t}\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tif (this.constantType === LinkUrl.TYPE_PAGE)\n\t\t\t{\n\t\t\t\treturn LinkUrl.TYPE_HREF_PAGE + valueText;\n\t\t\t}\n\t\t}\n\n\t\treturn selectedHrefType + valueText;\n\t}\n\n\t/**\n\t * Gets value text\n\t * @return {string}\n\t */\n\tgetValueText()\n\t{\n\t\treturn this.value ? this.value : this.input.innerText;\n\t}\n\n\tvalidateValue(value)\n\t{\n\t\tif (value.indexOf(':') !== -1)\n\t\t{\n\t\t\tvalue = value.slice(value.indexOf(':') + 1);\n\t\t}\n\t\tconst setRegs = [];\n\t\tsetRegs['phoneExtended'] = /(^[\\d+][\\d-]{4,14}\\d$)|#crmPhone\\d+/;\n\t\tsetRegs['phone'] = /^[\\d+][\\d-]{4,14}\\d$/;\n\t\tsetRegs['mail'] = /^\\S+@\\S+[.]\\S+$/i;\n\t\tsetRegs['skype'] = /^[a-z\\d-.:]{6,32}$/i;\n\t\tconst type = this.hrefTypeSwithcer.getValue();\n\t\tconst data = this.getTypeData(type);\n\t\tlet readyToSave = true;\n\t\tif (data.needValidate)\n\t\t{\n\t\t\tlet reg;\n\t\t\tswitch (type)\n\t\t\t{\n\t\t\t\tcase LinkUrl.TYPE_HREF_TEL:\n\t\t\t\t\treg = setRegs['phoneExtended'];\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_SMS:\n\t\t\t\t\treg = setRegs['phone'];\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_MAILTO:\n\t\t\t\t\treg = setRegs['mail'];\n\t\t\t\t\tbreak;\n\t\t\t\tcase LinkUrl.TYPE_HREF_SKYPE:\n\t\t\t\t\treg = setRegs['skype'];\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (reg)\n\t\t\t{\n\t\t\t\tif (value.length > 0)\n\t\t\t\t{\n\t\t\t\t\tconst isValid = reg.test(value);\n\t\t\t\t\tif (isValid)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-incorrect\");\n\t\t\t\t\t\tDom.addClass(this.gridCenterCell, \"--validate-correct\");\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-correct\");\n\t\t\t\t\t\tDom.addClass(this.gridCenterCell, \"--validate-incorrect\");\n\t\t\t\t\t\treadyToSave = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-correct\");\n\t\t\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-incorrect\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-correct\");\n\t\t\tDom.removeClass(this.gridCenterCell, \"--validate-incorrect\");\n\t\t}\n\t\tthis.emit('readyToSave',\n\t\t\t{\n\t\t\t\treadyToSave: readyToSave,\n\t\t\t});\n\t}\n\n\tprepareInputField(hrefType, inputValue)\n\t{\n\t\t//if empty field\n\t\tconst allowedHrefTypes = [\n\t\t\tLinkUrl.TYPE_HREF_PAGE,\n\t\t\tLinkUrl.TYPE_HREF_BLOCK,\n\t\t\tLinkUrl.TYPE_HREF_CRM_FORM,\n\t\t\tLinkUrl.TYPE_HREF_FILE,\n\t\t\tLinkUrl.TYPE_HREF_USER,\n\t\t\tLinkUrl.TYPE_HREF_PRODUCT,\n\t\t\tLinkUrl.TYPE_CATALOG,\n\t\t\tLinkUrl.TYPE_PAGE,\n\t\t];\n\t\tif (inputValue === '' && allowedHrefTypes.includes(hrefType))\n\t\t{\n\t\t\tDom.addClass(this.input, \"landing-ui-field-input-empty\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.input, \"landing-ui-field-input-empty\");\n\t\t}\n\t}\n\n\tgetInputInnerText(value)\n\t{\n\t\treturn this.prepareInputInnerText(value.toString().trim());\n\t}\n\n\tprepareInputInnerText(value)\n\t{\n\t\tif (\n\t\t\tthis.getSelectedHrefType() === LinkUrl.TYPE_HREF_SKYPE\n\t\t\t&& value.includes(this.typePostfix.skype)\n\t\t)\n\t\t{\n\t\t\tvalue = value.replace(this.typePostfix.skype, '');\n\t\t}\n\t\treturn value;\n\t}\n}\n"],"names":["LinkUrl","Text","constructor","data","matchers","catalogElement","RegExp","catalogSection","catalog","element","block","page","crmForm","crmPhone","diskFile","user","system","pageOld","typePostfix","skype","typeHrefs","TYPE_HREF_PAGE","TYPE_HREF_BLOCK","form","TYPE_HREF_CRM_FORM","product","TYPE_HREF_PRODUCT","file","TYPE_HREF_FILE","start","TYPE_HREF_START","TYPE_HREF_USER","Dom","addClass","layout","requestOptions","options","disableBlocks","Type","isBoolean","disallowType","iblocks","isArray","allowedTypes","TYPE_BLOCK","TYPE_PAGE","length","constantType","constantTypeData","typeData","allowedCatalogEntityTypes","onInitHandler","isFunction","onInit","onNewPageHandler","onNewPage","enableAreas","customPlaceholder","detailPageMode","sourceField","currentPageOnly","panelTitle","onListShow","bind","onTypeChange","onListItemClick","popup","dynamic","value","hrefTypeSwithcer","createTypeSwitcher","hrefTypeSwithcerValue","getHrefStringType","grid","createGridLayout","gridLeftCell","querySelector","gridCenterCell","gridRightCell","remove","header","append","hidden","input","settingMode","isUndefined","rightData","getRightData","button","createCenterCellButton","contentEditable","subscribe","hideInput","emit","hrefStringType","right","getValue","DELETE_TYPE_HREF","deleteTypeHref","innerHTML","setValue","getTypeData","setEditPrevented","type","setHrefPlaceholderByType","setHrefTypeSwitcherValue","removeHrefTypeFromHrefString","makeDisplayedHrefValue","content","innerText","setIblocks","actionClick","hasOwnProperty","action","onclick","buttonClasses","className","BX","Landing","UI","Button","BaseButton","text","onClick","hrefValue","placeholderType","getPlaceholderType","valuePromise","getBlockData","getPageData","TYPE_CRM_FORM","getCrmFormData","TYPE_CRM_PHONE","getCrmPhoneData","TYPE_CATALOG_ELEMENT","getCatalogElementData","TYPE_CATALOG_SECTION","getCatalogSectionData","TYPE_DISK_FILE","getDiskFileData","TYPE_USER","getUserData","TYPE_SYSTEM","getSystemPage","TYPE_CATALOG","getCatalog","then","Utils","proxy","createPlaceholder","inited","catch","getPlaceholderData","Promise","resolve","clearHref","replace","getSelectedHrefType","title","getRightTitle","items","getRightItems","getRightButton","getRightHideInput","idPopup","Loc","getMessage","TYPE_HREF_TEL","needValidate","TYPE_HREF_SMS","TYPE_HREF_SKYPE","TYPE_HREF_MAILTO","TYPE_HREF_LINK","onDiskFileShow","onUserListShow","segment","getValueText","foundHrefStringType","matchHrefStringType","setHrefTypes","isFindHrefType","some","hrefType","includes","segmentType","join","split","test","placeholder","attr","containsPlaceholder","indexOf","Tag","render","onSelectHrefButtonClick","popupActions","show","Env","getInstance","getType","name","delimiter","setItems","forEach","item","push","Field","Dropdown","onValueChange","maxHeight","classForTextNode","field","blockId","match","Backend","getBlock","result","pageId","getLanding","landingId","landing","toNumber","id","siteId","Main","site_id","ID","TITLE","SITE_ID","formId","find","String","NAME","phoneId","getOptions","references","cache","remember","systemCode","systemPages","syspages","reject","elementId","isString","requestBody","section","sectionId","matchRes","fileId","userData","userId","ajax","url","method","dataType","onsuccess","response","onSelectButtonClick","close","Panel","Catalog","dynamicMode","source","DetailPage","panel","URLList","parent","Connector","Disk","openDialog","onSelect","dialog","Dialog","targetNode","enableSearch","context","entities","events","onSelectUser","multiple","popupOptions","targetContainer","document","body","selectedItem","getSelectedItems","fireEvent","isEditPrevented","editPrevented","enableEdit","prototype","apply","encodeDataValue","placeholderRemove","Event","onPlaceholderRemoveClick","chain","capitalize","subType","setAttribute","event","removeClass","target","parentNode","onInputHandler","resultPromise","getNewLabel","newLabel","create","tag","props","showNewLabel","style","position","overflow","hideNewLabel","preventEvent","isObject","isNil","disableEdit","dataSet","getInputInnerText","onValueChangeHandler","getDynamic","valueText","selectedHrefType","validateValue","prepareInputField","startsWith","slice","setRegs","readyToSave","reg","isValid","inputValue","allowedHrefTypes","prepareInputInnerText","toString","trim"],"mappings":"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"}