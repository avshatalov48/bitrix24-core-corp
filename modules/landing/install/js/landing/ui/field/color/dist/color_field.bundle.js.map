{"version":3,"file":"color_field.bundle.js","sources":["../src/internal/is-rgb-string.js","../src/internal/is-hex.js","../src/internal/is-hsl-string.js","../src/internal/hex-to-rgb.js","../src/internal/rgb-to-hsl.js","../src/internal/hex-to-hsl.js","../src/internal/rgb-to-hex.js","../src/internal/hsl-to-rgb.js","../src/internal/hsl-to-hex.js","../src/internal/rgb-string-to-hsl.js","../src/internal/hsl-string-to-hsl.js","../src/internal/css-var.js","../src/types/color_value_options.js","../src/color_value.js","../src/processor/base_processor.js","../src/control/base_control/base_control.js","../src/control/hex/hex.js","../src/control/spectrum/spectrum.js","../src/layout/recent/recent.js","../src/control/colorpicker/colorpicker.js","../src/layout/primary/primary.js","../src/internal/regexp.js","../src/internal/is-gradient-string.js","../src/gradient_value.js","../src/layout/preset/types/preset-options.js","../src/layout/preset/generator.js","../src/layout/preset/preset.js","../src/layout/preset/preset_collection.js","../src/layout/reset/reset.js","../src/control/color_set/color_set.js","../src/control/opacity/opacity.js","../src/layout/tabs/tabs.js","../src/layout/zeroing/zeroing.js","../src/processor/color.js","../src/processor/color_hover.js","../src/control/gradient/gradient.js","../src/processor/bg_color.js","../src/internal/is-bg-image-string.js","../src/bg_image_value.js","../src/control/image/image.js","../src/internal/rgba-string-to-rgb-string.js","../src/processor/bg.js","../src/processor/border_color.js","../src/processor/border_color_hover.js","../src/processor/bg_color_hover.js","../src/processor/bg_color_after.js","../src/processor/bg_color_before.js","../src/processor/navbar_color.js","../src/processor/navbar_color_hover.js","../src/processor/navbar_color_fix_moment.js","../src/processor/navbar_color_fix_moment_hover.js","../src/processor/navbar_bg.js","../src/processor/navbar_bg_hover.js","../src/processor/border_color-top.js","../src/processor/fill_color.js","../src/processor/fill_color_second.js","../src/processor/button_color.js","../src/processor/navbar_collapse_bg.js","../src/color_field.js"],"sourcesContent":["export const matcher = /^rgba? ?\\((\\d{1,3})[, ]+(\\d{1,3})[, ]+(\\d{1,3})([, ]+([\\d\\.]{1,5}))?\\)$/i;\n\nexport default function isRgbString(rgbString: string): boolean\n{\n\treturn !!rgbString.match(matcher);\n}\n","export const matcherHex = /^#([\\da-f]{3}){1,2}$/i;\n\nexport default function isHex(hex: string)\n{\n\treturn !!hex.trim().match(matcherHex);\n}","export const matcherHsl = /^hsla?\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%(, ?([\\d .]+))?\\)/i;\n\nexport default function isHslString(hsla: string)\n{\n\treturn !!hsla.trim().match(matcherHsl);\n}","export default function hexToRgb(hex: string)\n{\n\tif (hex.length === 4)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[1]}`, 16);\n\t\tconst g = parseInt(`0x${hex[2]}${hex[2]}`, 16);\n\t\tconst b = parseInt(`0x${hex[3]}${hex[3]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\tif (hex.length === 7)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[2]}`, 16);\n\t\tconst g = parseInt(`0x${hex[3]}${hex[4]}`, 16);\n\t\tconst b = parseInt(`0x${hex[5]}${hex[6]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\treturn {r: 255, g: 255, b: 255};\n}","export default function rgbToHsla(\n\trgb: {r: number, g: number, b: number, a?: number}\n): {h: number, s: number, l: number, a: number}\n{\n\tconst r = rgb.r / 255;\n\tconst g = rgb.g / 255;\n\tconst b = rgb.b / 255;\n\n\tconst max = Math.max(r, g, b);\n\tconst min = Math.min(r, g, b);\n\tlet h, s, l = (max + min) / 2;\n\t// let l = h;\n\t// let s;\n\n\tif (max === min)\n\t{\n\t\th = s = 0;\n\t}\n\telse\n\t{\n\t\tconst d = max - min;\n\t\ts = l > 0.5\n\t\t\t? d / (2 - max - min)\n\t\t\t: d / (max + min);\n\n\t\tswitch (max)\n\t\t{\n\t\t\tcase r:\n\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\tbreak;\n\t\t\tcase g:\n\t\t\t\th = (b - r) / d + 2;\n\t\t\t\tbreak;\n\t\t\tcase b:\n\t\t\t\th = (r - g) / d + 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\th *= 0.6;\n\t}\n\n\treturn {\n\t\th: Math.round(h * 100),\n\t\ts: Math.round(s * 100),\n\t\tl: Math.round(l * 100),\n\t\ta: ('a' in rgb) ? rgb.a : 1,\n\t};\n}\n\n// \tconst v = Math.max(r, g, b);\n// \tconst diff = v - Math.min(r, g, b);\n// \tconst diffc = (c) => {\n// \t\treturn (v - c) / 6 / diff + 1 / 2;\n// \t};\n//\n// \tif (diff === 0)\n// \t{\n// \t\th = 0;\n// \t\ts = 0;\n// \t}\n// \telse\n// \t{\n// \t\ts = diff / v;\n// \t\trdif = diffc(r);\n// \t\tgdif = diffc(g);\n// \t\tbdif = diffc(b);\n//\n// \t\tif (r === v)\n// \t\t{\n// \t\t\th = bdif - gdif;\n// \t\t}\n// \t\telse if (g === v)\n// \t\t{\n// \t\t\th = (1 / 3) + rdif - bdif;\n// \t\t}\n// \t\telse if (b === v)\n// \t\t{\n// \t\t\th = (2 / 3) + gdif - rdif;\n// \t\t}\n//\n// \t\tif (h < 0)\n// \t\t{\n// \t\t\th += 1;\n// \t\t}\n// \t\telse if (h > 1)\n// \t\t{\n// \t\t\th -= 1;\n// \t\t}\n// \t}\n//\n// \treturn {\n// \t\th: h * 360,\n// \t\ts: s * 100,\n// \t\tl: v * 100,\n// \t\ta: rgb.a || 1,\n// \t};\n// }","import hexToRgb from './hex-to-rgb';\nimport rgbToHsla from './rgb-to-hsl';\n\nexport default function hexToHsl(hex: string): {h: number, s: number, l: number, a: number}\n{\n\tconst rgb = hexToRgb(hex.trim());\n\n\treturn rgbToHsla(rgb);\n}","export default function rgbToHex(rgb: {r: number, g: number, b: number}): string\n{\n\tlet r = rgb.r.toString(16);\n\tlet g = rgb.g.toString(16);\n\tlet b = rgb.b.toString(16);\n\n\tif (r.length === 1)\n\t{\n\t\tr = \"0\" + r;\n\t}\n\tif (g.length === 1)\n\t{\n\t\tg = \"0\" + g;\n\t}\n\tif (b.length === 1)\n\t{\n\t\tb = \"0\" + b;\n\t}\n\n\treturn \"#\" + r + g + b;\n}","export default function hslToRgb(hsl: {h: number, s: number, l: number}): {r: number, g: number, b: number}\n{\n\t// todo: a little not equal with reverce conversion :-/\n\t// todo: f.e. hsl(73.53.50) it 166,195,60 and #a5c33c,\n\t// todo: but in reverse #a5c33c => 165,195,60\n\t// todo: because we save ColorValue in hsl can be some differences\n\tconst h = hsl.h;\n\tconst s = hsl.s / 100;\n\tconst l = hsl.l / 100;\n\n\tlet c = (1 - Math.abs(2 * l - 1)) * s;\n\tlet x = c * (1 - Math.abs((h / 60) % 2 - 1));\n\tlet m = l - c / 2;\n\tlet r = 0;\n\tlet g = 0;\n\tlet b = 0;\n\n\tif (0 <= h && h < 60)\n\t{\n\t\tr = c;\n\t\tg = x;\n\t\tb = 0;\n\t}\n\telse if (60 <= h && h < 120)\n\t{\n\t\tr = x;\n\t\tg = c;\n\t\tb = 0;\n\t}\n\telse if (120 <= h && h < 180)\n\t{\n\t\tr = 0;\n\t\tg = c;\n\t\tb = x;\n\t}\n\telse if (180 <= h && h < 240)\n\t{\n\t\tr = 0;\n\t\tg = x;\n\t\tb = c;\n\t}\n\telse if (240 <= h && h < 300)\n\t{\n\t\tr = x;\n\t\tg = 0;\n\t\tb = c;\n\t}\n\telse if (300 <= h && h < 360)\n\t{\n\t\tr = c;\n\t\tg = 0;\n\t\tb = x;\n\t}\n\tr = Math.round((r + m) * 255);\n\tg = Math.round((g + m) * 255);\n\tb = Math.round((b + m) * 255);\n\n\treturn {r: r, g: g, b: b};\n}","import rgbToHex from './rgb-to-hex';\nimport hslToRgb from './hsl-to-rgb';\n\nexport default function hslToHex(hsl: {h: number, s: number, l: number}): string\n{\n\tconst rgb = hslToRgb(hsl);\n\n\treturn rgbToHex(rgb);\n}","import {Text} from 'main.core';\nimport rgbToHsla from '../internal/rgb-to-hsl';\nimport {matcher} from './is-rgb-string';\n\nexport default function rgbStringToHsla(rgbString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = rgbString.trim().match(matcher);\n\tif (matches.length > 0)\n\t{\n\t\treturn rgbToHsla({\n\t\t\tr: Text.toNumber(matches[1]),\n\t\t\tg: Text.toNumber(matches[2]),\n\t\t\tb: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t});\n\t}\n}","import {Text} from 'main.core';\nimport {matcherHsl} from './is-hsl-string';\n\nexport default function hslStringToHsl(hslString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = hslString.trim().match(matcherHsl);\n\tif (matches && matches.length > 0)\n\t{\n\t\treturn {\n\t\t\th: Text.toNumber(matches[1]),\n\t\t\ts: Text.toNumber(matches[2]),\n\t\t\tl: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t};\n\t}\n}","const matcher = /^(var\\()?((--[\\w\\d-]*?)(-opacity_([\\d_]+)?)?)\\)?$/i;\n\nexport function isCssVar(css: string): boolean\n{\n\treturn !!css.trim().match(matcher);\n}\n\ntype cssVar = {\n\tfull: string,\n\tname: string,\n\topacity: number,\n};\n\nexport function parseCssVar(css: string): ?cssVar\n{\n\tconst matches = css.trim().match(matcher);\n\tif (!!matches)\n\t{\n\t\tconst cssVar = {\n\t\t\tfull: matches[2],\n\t\t\tname: matches[3],\n\t\t};\n\n\t\tif (matches[3])\n\t\t{\n\t\t\tconst cssVarWithOpacity = '--primary-opacity-0_';\n\t\t\tconst cssVarWithOpacity0 = '--primary-opacity-0';\n\t\t\tif (matches[3].startsWith(cssVarWithOpacity0) && !matches[3].startsWith(cssVarWithOpacity))\n\t\t\t{\n\t\t\t\tcssVar.opacity = 0;\n\t\t\t}\n\t\t\tif (matches[3].startsWith(cssVarWithOpacity))\n\t\t\t{\n\t\t\t\tlet newOpacity = matches[3].substr(cssVarWithOpacity.length);\n\t\t\t\tif (newOpacity.length === 1 && newOpacity !== 0)\n\t\t\t\t{\n\t\t\t\t\tnewOpacity = newOpacity / 10;\n\t\t\t\t}\n\t\t\t\tif (newOpacity.length === 2)\n\t\t\t\t{\n\t\t\t\t\tnewOpacity = newOpacity / 100;\n\t\t\t\t}\n\t\t\t\tcssVar.opacity = newOpacity;\n\t\t\t}\n\t\t}\n\t\tif(matches[5])\n\t\t{\n\t\t\tcssVar.opacity = +parseFloat(matches[5].replace('_', '.')).toFixed(1);\n\t\t}\n\n\t\treturn cssVar;\n\t}\n\n\treturn null;\n}\n","import ColorValue from \"../color_value\";\n\nexport type ColorValueOptions = {\n\th?: number,\n\ts?: number,\n\tl?: number,\n\ta?: number,\n};\nexport const defaultColorValueOptions: ColorValueOptions = {\n\th: 205,\n\ts: 1,\n\tl: 50,\n\ta: 1,\n};\n\nexport type GradientValueOptions = {\n\tfrom: ColorValue,\n\tto: ColorValue,\n\tangle: number,\n\ttype: 'linear' | 'radial'\n};\n\nexport type BgImageValueOptions = {\n\turl: ?string,\n\turl2x: ?string,\n\tfileId: ?number,\n\tfileId2x: ?number,\n\tsize: 'cover' | 'auto',\n\tattachment: 'scroll' | 'fixed',\n\toverlay: ?ColorValue,\n};\nexport const defaultBgImageSize = 'cover';\nexport const defaultBgImageAttachment = 'scroll';\nexport const defaultOverlay = null;\nexport const defaultBgImageValueOptions: BgImageValueOptions = {\n\turl: null,\n\tsize: defaultBgImageSize,\n\tattachment: defaultBgImageAttachment,\n\toverlay: defaultOverlay,\n};\n","import {Dom, Type} from 'main.core';\n\nimport isRgbString from './internal/is-rgb-string';\nimport isHex from './internal/is-hex';\nimport isHslString from './internal/is-hsl-string';\nimport hexToHsl from './internal/hex-to-hsl';\nimport hslToHex from './internal/hsl-to-hex';\nimport rgbStringToHsla from './internal/rgb-string-to-hsl';\nimport hslStringToHsl from './internal/hsl-string-to-hsl';\nimport {isCssVar, parseCssVar} from \"./internal/css-var\";\nimport {ColorValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nexport default class ColorValue implements IColorValue\n{\n\tvalue: ColorValueOptions;\n\t/**\n\t * For preserve differences between hsl->rgb and rgb->hsl conversions we can save hex\n\t * @type {?string}\n\t */\n\thex: ?string;\n\t/**\n\t * if set css variable value - save them in '--var-name' format\n\t * @type {?string}\n\t */\n\tcssVar: ?string;\n\n\tconstructor(value: ColorValueOptions | ColorValue | string)\n\t{\n\t\tthis.value = defaultColorValueOptions;\n\t\tthis.hex = null;\n\t\tthis.cssVar = null;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\tif (this.hex)\n\t\t{\n\t\t\treturn this.getHex() + '_' + this.getOpacity();\n\t\t}\n\t\tconst {h, s, l} = this.getHsl();\n\t\treturn `${h}-${s}-${l}-${this.getOpacity()}`;\n\t}\n\n\tsetValue(value: ColorValueOptions | ColorValue | string): ColorValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tthis.value = value.getHsla();\n\t\t\t\tthis.cssVar = value.getCssVar();\n\t\t\t\tthis.hex = value.getHexOriginal();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\tif (isHslString(value))\n\t\t\t{\n\t\t\t\tthis.value = hslStringToHsl(value);\n\t\t\t}\n\t\t\telse if (isHex(value))\n\t\t\t{\n\t\t\t\tthis.value = {...hexToHsl(value), a: defaultColorValueOptions.a};\n\t\t\t\tthis.hex = value;\n\t\t\t}\n\t\t\telse if (isRgbString(value))\n\t\t\t{\n\t\t\t\tthis.value = rgbStringToHsla(value);\n\t\t\t}\n\t\t\telse if (isCssVar(value))\n\t\t\t{\n\t\t\t\tconst cssVar = parseCssVar(value);\n\t\t\t\tconst cssPrimaryVarName = '--primary';\n\t\t\t\tif (cssVar !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.cssVar = cssVar.name;\n\t\t\t\t\tif ('opacity' in cssVar)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.cssVar = cssPrimaryVarName;\n\t\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\t\tthis.setOpacity(cssVar.opacity);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.value.h = Math.round(this.value.h);\n\t\tthis.value.s = Math.round(this.value.s);\n\t\tthis.value.l = Math.round(this.value.l);\n\t\tthis.value.a = this.value.a.toFixed(2);\n\t\tconst offsetFromCorrectValue = Math.round((this.value.a * 100) % 5);\n\t\tif (offsetFromCorrectValue < 3)\n\t\t{\n\t\t\tthis.value.a = (this.value.a * 100 - offsetFromCorrectValue) / 100;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.value.a = (this.value.a * 100 - offsetFromCorrectValue + 5) / 100;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): ColorValue\n\t{\n\t\tthis.setValue({a: opacity});\n\n\t\treturn this;\n\t}\n\n\tlighten(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.min(this.value.l + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdarken(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.max(this.value.l - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tsaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.min(this.value.s + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdesaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.max(this.value.s - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tadjustHue(degree: number): ColorValue\n\t{\n\t\tthis.value.h = (this.value.h + degree) % 360;\n\n\t\treturn this;\n\t}\n\n\tgetHsl(): {h: number, s: number, l: number}\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t};\n\t}\n\n\tgetHsla(): ColorValueOptions\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t\ta: this.value.a,\n\t\t};\n\t}\n\n\t/**\n\t * Return original hex-string or convert value to hex (w.o. alpha)\n\t * @returns {string}\n\t */\n\tgetHex(): string\n\t{\n\t\treturn this.hex || hslToHex(this.value);\n\t}\n\n\t/**\n\t * Return hex only if value created from hex-string\n\t */\n\tgetHexOriginal(): string\n\t{\n\t\treturn this.hex;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn this.value.a ?? defaultColorValueOptions.a;\n\t}\n\n\tgetCssVar(): ?string\n\t{\n\t\treturn this.cssVar;\n\t}\n\n\t/**\n\t * Get style string for set inline css var.\n\t * Set hsla value or primary css var with opacity in format --var-name-opacity_12_3\n\t * @returns {string}\n\t */\n\tgetStyleString(): string\n\t{\n\t\tif (this.cssVar === null)\n\t\t{\n\t\t\tif (this.hex && this.getOpacity() === defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\treturn this.hex\n\t\t\t}\n\n\t\t\tconst {h, s, l, a} = this.value;\n\n\t\t\treturn `hsla(${h}, ${s}%, ${l}%, ${a})`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fullCssVar = this.cssVar;\n\t\t\tif (this.value.a !== defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\tfullCssVar = fullCssVar + '-opacity-' + String(this.value.a).replace('.', '_');\n\t\t\t}\n\t\t\treturn `var(${fullCssVar})`;\n\t\t}\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\tconst {h, s, l} = this.value;\n\n\t\treturn `linear-gradient(to right, hsla(${h}, ${s}%, ${l}%, 0) 0%, hsla(${h}, ${s}%, ${l}%, 1) 100%)`;\n\t}\n\n\tstatic compare(color1: ColorValue, color2: ColorValue): boolean\n\t{\n\t\treturn color1.getHsla().h === color2.getHsla().h\n\t\t\t&& color1.getHsla().s === color2.getHsla().s\n\t\t\t&& color1.getHsla().l === color2.getHsla().l\n\t\t\t&& color1.getHsla().a === color2.getHsla().a\n\t\t\t&& color1.cssVar === color2.cssVar;\n\t}\n\n\tstatic getMedian(color1: ColorValue, color2: ColorValue): ColorValue\n\t{\n\t\treturn new ColorValue({\n\t\t\th: (color1.getHsla().h + color2.getHsla().h) / 2,\n\t\t\ts: (color1.getHsla().s + color2.getHsla().s) / 2,\n\t\t\tl: (color1.getHsla().l + color2.getHsla().l) / 2,\n\t\t\ta: (color1.getHsla().a + color2.getHsla().a) / 2,\n\t\t});\n\t}\n\n\t/**\n\t * Special formula for contrast. Not only color invert!\n\t * @returns {string}\n\t */\n\tgetContrast(): ColorValue\n\t{\n\t\tlet k = 60;\n\t\t// math h range to 0-2pi radian and add modifier by sinus\n\t\tlet rad = this.getHsl().h * Math.PI / 180;\n\t\tk += (Math.sin(rad) * 10) + 5;\t// 10 & 5 is approximate coefficients\n\t\t// lighten by started light\n\t\tlet deltaL = k - (45 * this.getHsl().l / 100);\n\n\t\treturn new ColorValue(this.value).setValue({l: (this.getHsl().l + deltaL) % 100});\n\t}\n\n\t/**\n\t * Special formula for lighten, good for dark and light colors\n\t */\n\tgetLighten(): ColorValue\n\t{\n\t\tlet {h, s, l} = this.getHsl();\n\n\t\tif (s > 0)\n\t\t{\n\t\t\ts += (l - 50) / 100 * 60;\n\t\t\ts = Math.min(100, Math.max(0, l));\n\t\t}\n\n\t\tl += 10 + 20 * l / 100;\n\t\tl = Math.min(100, l);\n\n\t\treturn new ColorValue({h, s, l});\n\t}\n}\n","import {Tag, Cache, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport ColorValue from '../color_value';\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class BaseProcessor extends EventEmitter\n{\n\tvariableName: string | [string];\n\tclassName: string;\n\tproperty: string | [string];\n\toptions: [];\n\tpseudoClass: ?string;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.property = 'color';\n\t\tthis.options = options;\n\t\tthis.pseudoClass = null;\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BaseProcessor');\n\t}\n\n\tgetProperty(): [string]\n\t{\n\t\treturn Type.isArray(this.property)\n\t\t\t? this.property\n\t\t\t: [this.property];\n\t}\n\n\tgetVariableName(): [string]\n\t{\n\t\treturn Type.isArray(this.variableName)\n\t\t\t? this.variableName\n\t\t\t: [this.variableName];\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn Type.isNull(value);\n\t}\n\n\tgetNullValue(): IColorValue\n\t{\n\t\treturn new ColorValue;\n\t}\n\n\tgetPseudoClass(): ?string\n\t{\n\t\treturn this.pseudoClass;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`<div>Base processor</div>`;\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\treturn [this.className];\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (Type.isNull(this.getValue()))\n\t\t{\n\t\t\treturn {[this.getVariableName()]: null};\n\t\t}\n\n\t\treturn {[this.getVariableName()]: this.getValue().getStyleString()};\n\t}\n\n\t/**\n\t * Set value by new format\n\t * @param value {string: string}\n\t */\n\tsetProcessorValue(value: {string: string})\n\t{\n\t\t// Just get last css variable\n\t\tconst processorProperty = this.getVariableName()[this.getVariableName().length - 1];\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value[processorProperty]);\n\t}\n\n\t/**\n\t * Set old-type value by computedStyle\n\t * @param value {string: string} | null\n\t */\n\tsetDefaultValue(value: {string: string} | null)\n\t{\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tconst inlineProperty = this.getProperty()[this.getProperty().length - 1];\n\t\t\tif (inlineProperty in value)\n\t\t\t{\n\t\t\t\tthis.setValue(value[inlineProperty]);\n\t\t\t\tthis.cache.delete('value');\n\t\t\t\tthis.unsetActive();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.setValue(null);\n\t\tthis.cache.set('value', null);\n\t}\n\n\tsetValue(value: string | {string: string} | null)\n\t{\n\t}\n\n\tonReset()\n\t{\n\t\tthis.emit('onReset');\n\t}\n\n\tunsetActive()\n\t{\n\t}\n\n\tonChange()\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange');\n\t}\n\n\tdefineActiveControl(items, currentNode)\n\t{\n\t}\n\n\tsetActiveControl(controlName)\n\t{\n\t}\n\n\tprepareProcessorValue(processorValue, defaultValue, data)\n\t{\n\t\treturn processorValue;\n\t}\n}","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Cache, Dom, Tag} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport {IColorValue} from '../../types/i_color_value';\n\nimport './css/base_control.css';\n\nexport default class BaseControl extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: ?{})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-base-control\">\n\t\t\t\tBase control\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue();\n\t\t});\n\t}\n\n\tisNeedSetValue(value): boolean\n\t{\n\t\treturn value !== this.getValue();\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.cache.set('value', value);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n}\n","import {Dom, Event, Runtime, Tag} from 'main.core';\nimport isHex from '../../internal/is-hex';\nimport ColorValue from \"../../color_value\";\n\nimport './css/hex.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {BaseEvent} from 'main.core.events';\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Hex extends BaseControl\n{\n\tstatic +DEFAULT_TEXT: string = '#HEX';\n\tstatic +DEFAULT_COLOR: string = '#000000';\n\tstatic +DEFAULT_BG: string = '#eeeeee';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Hex');\n\t\tthis.previewMode = false;\n\n\t\tthis.onInput = Runtime.debounce(this.onInput.bind(this), 300);\n\t\tthis.onButtonClick = this.onButtonClick.bind(this);\n\t}\n\n\tsetPreviewMode(preview: boolean)\n\t{\n\t\tthis.previewMode = !!preview;\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\t// todo: add Enter click handler\n\t\t\tEvent.bind(this.getInput(), 'input', this.onInput);\n\t\t\tEvent.bind(this.getButton(), 'click', this.onButtonClick);\n\t\t}\n\n\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-hex\">\n\t\t\t\t${this.getInput()}\n\t\t\t\t${this.getButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('input', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`<div class=\"landing-ui-field-color-hex-preview\">${Hex.DEFAULT_TEXT}</div>`\n\t\t\t\t: Tag.render`<input type=\"text\" name=\"hexInput\" value=\"${Hex.DEFAULT_TEXT}\" class=\"landing-ui-field-color-hex-input\">`;\n\t\t});\n\t}\n\n\tgetButton(): SVGElement\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M7.108 0l1.588 1.604L2.486 7.8.896 6.194 7.108 0zM.006 8.49a.166.166 0 00.041.158.161.161 0 00.16.042l1.774-.478L.484 6.715.006 8.49z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`\n\t\t\t\t: Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"12\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M4.27 8.551L.763 5.304 2.2 3.902l2.07 1.846L9.836.533l1.439 1.402z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`;\n\t\t});\n\t}\n\n\tonInput(): void\n\t{\n\t\tlet value = this.getInput().value.replace(/[^\\da-f]/gi, '');\n\t\tvalue = value.substring(0, 6);\n\t\tthis.getInput().value = '#' + value.toLowerCase();\n\n\t\tthis.onChange();\n\t}\n\n\tonButtonClick(): void\n\t{\n\t\tthis.onChange();\n\t\tthis.emit('onButtonClick', {color: this.getValue()});\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tconst color = (this.getInput().value.length === 7 && isHex(this.getInput().value))\n\t\t\t? new ColorValue(this.getInput().value)\n\t\t\t: null;\n\t\tthis.setValue(color);\n\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: color});\n\t}\n\n\tadjustColors(textColor: string, bgColor: string)\n\t{\n\t\tDom.style(this.getInput(), 'background-color', bgColor);\n\t\tDom.style(this.getInput(), 'color', textColor);\n\t\tDom.style(this.getButton().querySelector('path'), 'fill', textColor);\n\t}\n\n\tfocus(): void\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\tif (this.getValue() === null)\n\t\t\t{\n\t\t\t\tthis.getInput().value = '#';\n\t\t\t}\n\t\t\tthis.getInput().focus();\n\t\t}\n\t}\n\n\tunFocus(): void\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\tthis.getInput().blur();\n\t\t}\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn (this.getInput().value === Hex.DEFAULT_TEXT)\n\t\t\t\t? null\n\t\t\t\t: new ColorValue(this.getInput().value);\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\t// todo: set checking in always controls?\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value !== null)\n\t\t\t{\n\t\t\t\tthis.adjustColors(value.getContrast().getHex(), value.getHex());\n\t\t\t\tthis.setActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\t\t\t\tthis.unsetActive();\n\t\t\t}\n\n\t\t\tif (this.previewMode)\n\t\t\t{\n\t\t\t\tthis.getInput().innerText = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t\t}\n\t\t\telse if (PageObject.getRootWindow().document.activeElement !== this.getInput())\n\t\t\t{\n\t\t\t\tthis.getInput().value = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Event, Tag, Text} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport './css/spectrum.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Spectrum extends BaseControl\n{\n\tstatic DEFAULT_SATURATION: number = 100;\n\tstatic HUE_RANGE: number = 375;\n\tstatic HUE_RANGE_GRAY_THRESHOLD: number = 360;\n\tstatic HUE_RANGE_GRAY_MIDDLE: number = 367;\n\tstatic HIDE_CLASS: string = 'hidden';\n\n\t// todo: debug, del method, change calls, change css\n\tstatic getDefaultSaturation()\n\t{\n\t\tconst global = window.top.document.location.saturation;\n\t\tconst urlParam = (new URL(window.top.document.location)).searchParams.get('saturation');\n\t\tconst saturation = global || urlParam || Spectrum.DEFAULT_SATURATION;\n\n\t\twindow.top.document.body.style.setProperty('--saturation', saturation + '%');\n\n\t\treturn parseInt(saturation);\n\t}\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Spectrum');\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\t\tthis.scrollContext = options.contentRoot;\n\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-spectrum\">\n\t\t\t\t${this.getPicker()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-spectrum-picker\"></div>`;\n\t\t});\n\t}\n\n\tgetPickerPos(): {x: number, y: number}\n\t{\n\t\treturn {\n\t\t\tx: Text.toNumber(Dom.style(this.getPicker(), 'left')),\n\t\t\ty: Text.toNumber(Dom.style(this.getPicker(), 'top')),\n\t\t};\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\t\tthis.onScroll();\n\t\tthis.showPicker();\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX, event.pageY);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\tonScroll()\n\t{\n\t\tthis.cache.delete('layoutSize');\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\theight: layoutRect.height,\n\t\t\t\ttop: layoutRect.top,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\n\t * Set picker by absolut page coords\n\t * @param x\n\t * @param y\n\t */\n\tsetPickerPos(x: number, y: number)\n\t{\n\t\tconst {width, height, top, left} = this.getLayoutRect();\n\n\t\tlet leftToSet = Math.min(Math.max((x - left), 0), width);\n\t\tleftToSet = (leftToSet > width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_THRESHOLD)\n\t\t\t? width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_MIDDLE\n\t\t\t: leftToSet\n\t\t;\n\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftToSet}px`,\n\t\t\ttop: `${Math.min(Math.max((y - top), 0), height)}px`,\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (Dom.hasClass(this.getPicker(), Spectrum.HIDE_CLASS))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst layoutWidth = this.getLayout().getBoundingClientRect().width;\n\t\t\tconst h = (this.getPickerPos().x / layoutWidth) * Spectrum.HUE_RANGE;\n\t\t\tconst layoutHeight = this.getLayout().getBoundingClientRect().height;\n\t\t\tconst l = (1 - this.getPickerPos().y / layoutHeight) * 100;\n\n\t\t\tif (isNaN(h) || isNaN(l))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new ColorValue({\n\t\t\t\th: Math.min(h, Spectrum.HUE_RANGE_GRAY_THRESHOLD),\n\t\t\t\ts: (h >= Spectrum.HUE_RANGE_GRAY_THRESHOLD) ? 0 : Spectrum.getDefaultSaturation(),\n\t\t\t\tl: l,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif ((value !== null) && Spectrum.isSpectrumValue(value))\n\t\t{\n\t\t\t// in first set value we can't match bounding client rect (layout not render). Then, use percents\n\t\t\tconst {h, s, l} = value.getHsl();\n\n\t\t\tconst left = (s === 0)\n\t\t\t\t? Spectrum.HUE_RANGE_GRAY_MIDDLE / Spectrum.HUE_RANGE * 100\n\t\t\t\t: h / Spectrum.HUE_RANGE * 100;\n\t\t\tDom.style(this.getPicker(), 'left', `${left}%`);\n\n\t\t\tconst top = 100 - l;\n\t\t\tDom.style(this.getPicker(), 'top', `${top}%`);\n\n\t\t\tthis.showPicker();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePicker();\n\t\t}\n\t}\n\n\thidePicker()\n\t{\n\t\tDom.addClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tshowPicker()\n\t{\n\t\tDom.removeClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn (this.getValue() !== null) && Spectrum.isSpectrumValue(this.getValue());\n\t}\n\n\tstatic isSpectrumValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null)\n\t\t\t&& (\n\t\t\t\tvalue.getHsl().s === Spectrum.getDefaultSaturation()\n\t\t\t\t|| value.getHsl().s === 0\n\t\t\t);\n\t}\n}\n","import {Cache, Event, Tag, Dom, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Backend} from 'landing.backend';\n\nimport isHex from '../../internal/is-hex';\nimport './css/recent.css';\n\nexport default class Recent extends EventEmitter\n{\n\tstatic +USER_OPTION_NAME = 'color_field_recent_colors';\n\tstatic +MAX_ITEMS = 6;\n\n\tstatic items: [] = [];\n\tstatic itemsLoaded: boolean = false;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Recent');\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\tthis.initItems();\n\n\t\treturn this.getLayoutContainer();\n\t}\n\n\tgetLayoutContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-recent\"></div>`;\n\t\t});\n\t}\n\n\tinitItems()\n\t{\n\t\tif (Recent.itemsLoaded)\n\t\t{\n\t\t\tthis.buildItemsLayout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBackend.getInstance()\n\t\t\t\t.action(\"Utils::getUserOption\", {name: Recent.USER_OPTION_NAME})\n\t\t\t\t.then(result => {\n\t\t\t\t\tif (result && Type.isString(result.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tRecent.items = [];\n\t\t\t\t\t\tresult.items.split(',').forEach(item => {\n\t\t\t\t\t\t\tif (isHex((item)) && Recent.items.length < Recent.MAX_ITEMS)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tRecent.items.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tRecent.itemsLoaded = true;\n\n\t\t\t\t\t\tthis.buildItemsLayout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t// todo: what if ajax error?\n\t\t}\n\t}\n\n\tbuildItemsLayout(): Recent\n\t{\n\t\tDom.clean(this.getLayoutContainer());\n\t\tRecent.items.forEach(item => {\n\t\t\tif (isHex(item))\n\t\t\t{\n\t\t\t\tlet itemLayout = Tag.render`<div \n\t\t\t\t\tclass=\"landing-ui-field-color-recent-item\" \n\t\t\t\t\tstyle=\"background:${item}\"\n\t\t\t\t\tdata-value=\"${item}\"\n\t\t\t\t></div>`;\n\t\t\t\tEvent.bind(itemLayout, 'click', () => this.onItemClick(event));\n\t\t\t\tDom.append(itemLayout, this.getLayoutContainer());\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.emit('onChange', {hex: event.currentTarget.dataset.value});\n\t}\n\n\taddItem(hex: string): Recent\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tlet pos = Recent.items.indexOf(hex);\n\t\t\tif (pos !== -1)\n\t\t\t{\n\t\t\t\tRecent.items.splice(pos, 1);\n\t\t\t}\n\t\t\tRecent.items.unshift(hex);\n\t\t\tif (Recent.items.length > Recent.MAX_ITEMS)\n\t\t\t{\n\t\t\t\tRecent.items.splice(Recent.MAX_ITEMS);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout();\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsaveItems(): Recent\n\t{\n\t\tif (Recent.items.length > 0)\n\t\t{\n\t\t\tBX.userOptions.save('landing', Recent.USER_OPTION_NAME, 'items', Recent.items);\n\t\t}\n\n\t\treturn this;\n\t}\n}","import {Event, Tag, Text, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\n\nimport Hex from '../hex/hex';\nimport ColorValue from \"../../color_value\";\nimport BaseControl from \"../base_control/base_control\";\nimport Spectrum from \"../spectrum/spectrum\";\nimport Recent from '../../layout/recent/recent';\n\nimport './css/colorpicker.css';\n\nexport default class Colorpicker extends BaseControl\n{\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Colorpicker');\n\t\tthis.popupId = 'colorpicker_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.hexPreview = new Hex();\n\t\tthis.hexPreview.setPreviewMode(true);\n\t\tEvent.bind(this.hexPreview.getLayout(), 'click', this.onPopupOpenClick.bind(this));\n\n\t\t// popup\n\t\tthis.hex = new Hex();\n\t\tthis.hex.subscribe('onChange', this.onHexChange.bind(this));\n\t\tthis.hex.subscribe('onButtonClick', this.onSelectClick.bind(this));\n\n\t\tthis.spectrum = new Spectrum(options);\n\t\tthis.spectrum.subscribe('onChange', this.onSpectrumChange.bind(this));\n\n\t\tthis.recent = new Recent();\n\t\tthis.recent.subscribe('onChange', this.onRecentChange.bind(this));\n\n\t\tEvent.bind(this.getCancelButton(), 'click', this.onCancelClick.bind(this));\n\t\tEvent.bind(this.getSelectButton(), 'click', this.onSelectClick.bind(this));\n\t\t// end popup\n\n\t\tthis.previously = this.getValue();\n\t}\n\n\tonSelectClick(event: ?BaseEvent)\n\t{\n\t\tconst value = (event instanceof BaseEvent) ? event.getData().color : this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tthis.recent.addItem(this.getValue().getHex());\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorpicker\">\n\t\t\t\t${this.hexPreview.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-popup-head\">\n\t\t\t\t\t${this.recent.getLayout()}\n\t\t\t\t\t${this.hex.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.spectrum.getLayout()}\n\t\t\t\t<div class=\"landing-ui-field-color-popup-footer\">\n\t\t\t\t\t${this.getSelectButton()}\n\t\t\t\t\t${this.getCancelButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetSelectButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('selectButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-primary\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_SELECT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCancelButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('cancelButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-light-border\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_CANCEL')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHexPreviewObject(): Hex\n\t{\n\t\treturn this.hexPreview;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-spectrum-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.hexPreview.getLayout(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 14,\n\t\t\t\twidth: 260,\n\t\t\t\toffsetTop: -37,\n\t\t\t\toffsetLeft: -180,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.spectrum.getValue();\n\t\t});\n\t}\n\n\tonHexChange(event: BaseEvent)\n\t{\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonSpectrumChange(event: BaseEvent)\n\t{\n\t\tthis.hex.unFocus();\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonRecentChange(event: BaseEvent)\n\t{\n\t\tconst recentColor = new ColorValue(event.getData().hex);\n\t\tthis.setValue(recentColor);\n\t\tthis.onChange(new BaseEvent({data: {color: recentColor}}));\n\t}\n\n\tonCancelClick()\n\t{\n\t\tthis.setValue(this.previously);\n\t\tthis.getPopup().close();\n\t\tthis.onChange(new BaseEvent({data: {color: this.getValue()}}));\n\t}\n\n\tonPopupOpenClick()\n\t{\n\t\tthis.recent.buildItemsLayout();\n\t\tthis.previously = this.getValue();\n\t\tthis.getPopup().show();\n\t\tif (this.getPopup().isShown())\n\t\t{\n\t\t\tthis.hex.focus();\n\t\t}\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.spectrum.setValue(value);\n\t\t\tthis.hex.setValue(value);\n\t\t\tthis.hexPreview.setValue(value);\n\t\t}\n\t\tthis.setActivity(value);\n\t}\n\n\tsetActivity(value: ?ColorValue)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (this.spectrum.isActive())\n\t\t\t{\n\t\t\t\tthis.hex.unsetActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hex.setActive();\n\t\t\t}\n\t\t\tthis.hexPreview.setActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.hex.unsetActive();\n\t\tthis.hexPreview.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.hex.isActive() || this.hexPreview.isActive();\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Dom, Loc} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\n\nimport 'ui.fonts.opensans';\nimport './css/primary.css';\n\nexport default class Primary extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\tstatic CSS_VAR: string = '--primary';\n\n\t// todo: layout or control?\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Primary');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-primary\">\n\t\t\t\t\t<i class=\"landing-ui-field-color-primary-preview\"></i>\n\t\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRIMARY_TITLE')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue(Primary.CSS_VAR);\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.setActive();\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisPrimaryValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null) && (this.getValue().getCssVar() === value.getCssVar());\n\t}\n}\n","export function regexpWoStartEnd(regexp: RegExp): RegExp\n{\n\treturn new RegExp(regexpToString(regexp));\n}\n\nexport function regexpToString(regexp: RegExp): string\n{\n\treturn regexp.source.replace(/(^\\^)|(\\$$)/g, '');\n}","import {matcherHex} from \"./is-hex\";\nimport {regexpToString} from \"./regexp\";\n\nexport const matcherGradient = /^(linear|radial)-gradient\\(.*\\)$/i;\nexport const matcherGradientAngle = /^(linear|radial)-gradient\\(.*?((\\d)+deg).*?\\)$/ig;\nconst hexMatcher = regexpToString(matcherHex);\nexport const matcherGradientColors = new RegExp(\n\t'((rgba|hsla)?\\\\([\\\\d% .,]+\\\\)|transparent|' + hexMatcher + ')+', 'ig'\n);\n// todo: whooooouuuu, is so not-good\n\n// todo: add hex greaident match\n\n// todo: for tests\n// \"linear-gradient(45deg, rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"linear-gradient(45deg, #123321 0%, #543asdbd 100%)\"\n// \"linear-gradient(rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"radial-gradient(circle farthest-side, rgb(34, 148, 215), rgb(39, 82, 150))\"\n\nexport default function isGradientString(rgbString: string): boolean\n{\n\treturn !!rgbString.trim().match(matcherGradient);\n}","import {Type, Text} from 'main.core';\n\nimport {GradientValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport ColorValue from \"./color_value\";\nimport {IColorValue} from './types/i_color_value';\nimport Primary from './layout/primary/primary';\n\nimport isGradientString, {\n\tmatcherGradient,\n\tmatcherGradientAngle,\n\tmatcherGradientColors,\n} from './internal/is-gradient-string';\n\nexport default class GradientValue implements IColorValue\n{\n\tstatic TYPE_RADIAL = 'radial';\n\tstatic TYPE_LINEAR = 'linear';\n\tstatic DEFAULT_ANGLE = 180;\n\tstatic DEFAULT_TYPE = 'linear';\n\n\tvalue: GradientValueOptions;\n\n\tconstructor(value: GradientValueOptions | GradientValue | string)\n\t{\n\t\tthis.value = {\n\t\t\tfrom: new ColorValue('#ffffff'),\n\t\t\tto: new ColorValue(Primary.CSS_VAR),\n\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t};\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.value.from.getName() + '_' + this.value.to.getName() + '_' + this.getAngle() + '_' + this.getType();\n\t}\n\n\t// todo: parse grad string?\n\tsetValue(value: GradientValueOptions | GradientValue | string): GradientValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.value.from = new ColorValue(value.getFrom());\n\t\t\t\tthis.value.to = new ColorValue(value.getTo());\n\t\t\t\tthis.value.angle = value.getAngle();\n\t\t\t\tthis.value.type = value.getType();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif ('from' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.from = new ColorValue(value.from);\n\t\t\t\t}\n\t\t\t\tif ('to' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.to = new ColorValue(value.to);\n\t\t\t\t}\n\t\t\t\tif ('angle' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.angle = Text.toNumber(value.angle);\n\t\t\t\t}\n\t\t\t\tif ('type' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.type = value.type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse if (Type.isString(value) && isGradientString(value))\n\t\t{\n\t\t\tthis.parseGradientString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): GradientValue\n\t{\n\t\tthis.value.from.setOpacity(opacity);\n\t\tthis.value.to.setOpacity(opacity);\n\n\t\treturn this;\n\t}\n\n\tparseGradientString(value: string): viod\n\t{\n\t\tconst typeMatches = value.trim().match(matcherGradient);\n\t\tif (!!typeMatches)\n\t\t{\n\t\t\tthis.setValue({type: typeMatches[1]});\n\t\t}\n\n\t\tconst angleMatches = value.trim().match(matcherGradientAngle);\n\t\tif (!!angleMatches)\n\t\t{\n\t\t\tthis.setValue({angle: angleMatches[2]});\n\t\t}\n\n\n\t\tconst colorMatches = value.trim().match(matcherGradientColors);\n\t\tif (colorMatches && colorMatches.length > 0)\n\t\t{\n\t\t\tthis.setValue({from: new ColorValue(colorMatches[0])});\n\t\t\tthis.setValue({to: new ColorValue(colorMatches[colorMatches.length - 1])});\n\t\t}\n\t}\n\n\tgetFrom(): ColorValue\n\t{\n\t\treturn this.value.from;\n\t}\n\n\tgetTo(): ColorValue\n\t{\n\t\treturn this.value.to;\n\t}\n\n\tgetAngle(): number\n\t{\n\t\treturn this.value.angle;\n\t}\n\n\tsetAngle(angle: number)\n\t{\n\t\tif (Type.isNumber(angle))\n\t\t{\n\t\t\tthis.value.angle = Math.min(Math.max(angle, 0), 360);\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.value.type;\n\t}\n\n\tsetType(type: string)\n\t{\n\t\tif (type === GradientValue.TYPE_RADIAL || type === GradientValue.TYPE_LINEAR)\n\t\t{\n\t\t\tthis.value.type = type;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn (this.value.from.getOpacity() + this.value.to.getOpacity()) / 2 ?? defaultColorValueOptions.a;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tconst angle = this.value.angle;\n\t\tconst type = this.value.type;\n\t\tconst fromString = this.value.from.getStyleString();\n\t\tconst toString = this.value.to.getStyleString();\n\n\t\treturn type === 'linear'\n\t\t\t? `linear-gradient(${angle}deg, ${fromString} 0%, ${toString} 100%)`\n\t\t\t: `radial-gradient(circle farthest-side at 50% 50%, ${fromString} 0%, ${toString} 100%)`;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\treturn `radial-gradient(at top left, ${this.value.from.getHex()}, transparent)`\n\t\t\t+ `, radial-gradient(at bottom left, ${this.value.to.getHex()}, transparent)`\n\t}\n\n\tstatic compare(value1: GradientValue, value2: GradientValue, full:boolean = true): boolean\n\t{\n\t\tconst base = (\n\t\t\t\tColorValue.compare(value1.getFrom(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getTo(), value2.getTo())\n\t\t\t) || (\n\t\t\t\tColorValue.compare(value1.getTo(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getFrom(), value2.getTo())\n\t\t\t);\n\t\tconst ext = full\n\t\t\t? (value1.getAngle() === value2.getAngle() && value1.getType() === value2.getType())\n\t\t\t: true;\n\n\t\treturn  base && ext;\n\t}\n}\n","import ColorValue from '../../../color_value';\nimport GradientValue from '../../../gradient_value';\n\nexport type PresetOptions = {\n\tid?: string,\n\ttype?: 'color' | 'gradient',\n\titems: [ColorValue | GradientValue],\n};\n\nexport const defaultType = 'color';\nexport const gradientType = 'gradient';","import {Cache, Dom} from 'main.core';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, gradientType} from './types/preset-options';\nimport hexToHsl from '../../internal/hex-to-hsl';\n\nexport default class Generator\n{\n\tstatic BITRIX_COLOR: string = '#2fc6f6';\n\n\tstatic cache = new Cache.MemoryCache();\n\tstatic defaultPresets: [] = [\n\t\t{\n\t\t\tid: 'agency',\n\t\t\titems: [\n\t\t\t\t'#ff6366', '#40191a', '#803233', '#bf4b4d', '#e65a5c', '#ffc1c2',\n\t\t\t\t'#363643', '#57dca3', '#ee76ba', '#ffa864', '#eaeaec', '#fadbdc',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'accounting',\n\t\t\titems: [\n\t\t\t\t'#a5c33c', '#384215', '#6f8228', '#8fa834', '#b0cf40', '#dae6ae',\n\t\t\t\t'#4c4c4c', '#5d84e6', '#cd506b', '#fe6466', '#dfdfdf', '#e9f0cf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'app',\n\t\t\titems: [\n\t\t\t\t'#4fd2c2', '#1f524c', '#379187', '#46b8aa', '#54dece', '#c8f1ec',\n\t\t\t\t'#6639b6', '#e81c62', '#9a69ca', '#6279d8', '#ffc337', '#e9faf8',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'architecture',\n\t\t\titems: [\n\t\t\t\t'#c94645', '#4a1919', '#8a2f2f', '#b03c3c', '#d64949', '#eec3c3',\n\t\t\t\t'#363643', '#446d90', '#a13773', '#c98145', '#eaeaec', '#f9e8e7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'business',\n\t\t\titems: [\n\t\t\t\t'#3949a0', '#232c61', '#313e87', '#3e4fad', '#556ced', '#d8d7dc',\n\t\t\t\t'#14122c', '#1d1937', '#a03949', '#2f295a', '#c87014', '#f4f4f5',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'charity',\n\t\t\titems: [\n\t\t\t\t'#f5f219', '#f58419', '#f5cc19', '#a8e32a', '#f9f76a', '#fcfbb6',\n\t\t\t\t'#000000', '#262e37', '#74797f', '#e569b1', '#edeef0', '#fefedf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'construction',\n\t\t\titems: [\n\t\t\t\t'#f7b70b', '#382a02', '#785905', '#b88907', '#dea509', '#fdf1d1',\n\t\t\t\t'#111111', '#a3a3a3', '#f7410b', '#f70b4b', '#d6dde9', '#fef9ea',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'consulting',\n\t\t\titems: [\n\t\t\t\t'#21a79b', '#38afa5', '#14665f', '#1c8c83', '#30f2e2', '#a9ddd9',\n\t\t\t\t'#ec4672', '#58d400', '#f0ac00', '#2d6faf', '#2da721', '#e6f5f4',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'corporate',\n\t\t\titems: [\n\t\t\t\t'#6ab8ee', '#31556e', '#4e86ad', '#5fa3d4', '#70c1fa', '#d2e9f8',\n\t\t\t\t'#36e2c0', '#ffaa3c', '#ee6a76', '#ffa468', '#5feb99', '#ebf4fb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'courses',\n\t\t\titems: [\n\t\t\t\t'#6bda95', '#2c593d', '#4b9969', '#5ebf83', '#70e69d', '#c2f0d3',\n\t\t\t\t'#31556e', '#ff947d', '#738ed3', '#f791ab', '#ffb67d', '#e2f8eb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'event',\n\t\t\titems: [\n\t\t\t\t'#f73859', '#380d14', '#781c2b', '#b82a42', '#de334f', '#fdbbc6',\n\t\t\t\t'#151726', '#ffb553', '#30d59b', '#b265e0', '#edeef0', '#ffeaed',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'gym',\n\t\t\titems: [\n\t\t\t\t'#6b7de0', '#2f3661', '#4d5aa1', '#5f6fc7', '#7284ed', '#e4e8fa',\n\t\t\t\t'#333333', '#ffd367', '#a37fe8', '#e06b7d', '#6dc1e0', '#f4f6fd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'lawyer',\n\t\t\titems: [\n\t\t\t\t'#e74c3c', '#69231b', '#a8382c', '#cf4536', '#f55240', '#f9d0cb',\n\t\t\t\t'#4e4353', '#5a505e', '#e7863c', '#38a27f', '#e2e1e3', '#fdeeec',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'photography',\n\t\t\titems: [\n\t\t\t\t'#f7a700', '#382600', '#785200', '#b87d00', '#de9800', '#fde8ba',\n\t\t\t\t'#333333', '#0b5aa0', '#e93d18', '#06c4ed', '#3672a8', '#fff6e3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'restaurant',\n\t\t\titems: [\n\t\t\t\t'#e6125d', '#660829', '#a60d43', '#cc1052', '#f21361', '#facfde',\n\t\t\t\t'#0eb88e', '#00946f', '#e04292', '#9b12e6', '#bfde00', '#fef2f6',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'shipping',\n\t\t\titems: [\n\t\t\t\t'#ff0000', '#400000', '#800000', '#bf0000', '#e60000', '#ffb4b4',\n\t\t\t\t'#333333', '#ff822a', '#d63986', '#00ac6b', '#ffb800', '#fff3f3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'spa',\n\t\t\titems: [\n\t\t\t\t'#9dba04', '#313b01', '#667a02', '#86a103', '#a6c704', '#e4ecb9',\n\t\t\t\t'#ba7c04', '#cf54bb', '#049dba', '#1d7094', '#eead2f', '#f2f6dd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'travel',\n\t\t\titems: [\n\t\t\t\t'#ee4136', '#6e1f19', '#ad3128', '#d43c31', '#fa4639', '#fef1f0',\n\t\t\t\t'#31353e', '#3e434d', '#ee8036', '#428abc', '#eaebec', '#c3c4c7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'wedding',\n\t\t\titems: [\n\t\t\t\t'#d65779', '#572431', '#963e55', '#bd4d6b', '#e35d81', '#f7dfe5',\n\t\t\t\t'#af58a7', '#6bc34b', '#ec8c60', '#50a098', '#57b9d6', '#fdf4f6',\n\t\t\t],\n\t\t},\n\t];\n\n\tstatic getDefaultPresets(): PresetOptions[]\n\t{\n\t\treturn Generator.cache.remember('default', () => {\n\t\t\tconst presets = [];\n\t\t\tGenerator.defaultPresets.forEach(preset => {\n\t\t\t\tpresets.push({\n\t\t\t\t\tid: preset.id,\n\t\t\t\t\ttype: 'color',\n\t\t\t\t\titems: preset.items.map(item => new ColorValue(hexToHsl(item))),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn presets;\n\t\t});\n\t}\n\n\tstatic getPrimaryColorPreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('primary', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'defaultPrimary',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst primary = new ColorValue(Dom.style(document.documentElement, '--primary').trim());\n\t\t\tpreset.items.push(new ColorValue(primary));\n\n\t\t\tif (primary.getHsl().s <= 10)\n\t\t\t{\n\t\t\t\tconst lBeforeCount = (primary.getHsl().l > 50)\n\t\t\t\t\t? Math.ceil(primary.getHsl().l / 100 * 5)\n\t\t\t\t\t: Math.floor(primary.getHsl().l / 100 * 5);\n\t\t\t\tconst lAfterCount = 5 - lBeforeCount;\n\t\t\t\tconst deltaLBefore = primary.getHsl().l / (lBeforeCount + 1);\n\t\t\t\tconst deltaLAfter = (100 - primary.getHsl().l) / (lAfterCount + 1);\n\t\t\t\tfor (let i = 1; i <= lBeforeCount; i++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).darken(deltaLBefore * i));\n\t\t\t\t}\n\t\t\t\tfor (let ii = 1; ii <= lAfterCount; ii++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).lighten(deltaLAfter * ii));\n\t\t\t\t}\n\n\t\t\t\tconst deltaBitrixL = 15;\n\t\t\t\tconst deltaBitrixS = 15;\n\t\t\t\tconst bitrixColor = new ColorValue(Generator.BITRIX_COLOR);\n\t\t\t\tpreset.items[6] = new ColorValue(bitrixColor);\n\n\t\t\t\tpreset.items[7] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tpreset.items[8] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tbitrixColor.lighten(deltaBitrixL * 2).desaturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[9] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tpreset.items[10] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tbitrixColor.darken(deltaBitrixL * 2).saturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[11] = new ColorValue(bitrixColor).adjustHue(180);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst deltaL = (90 - primary.getHsl().l) / 3;\n\t\t\t\tconst deltaL2 = (primary.getHsl().l - 10) / 3;\n\t\t\t\tconst deltaS = (90 - primary.getHsl().s) / 3;\n\t\t\t\tconst deltaS2 = (primary.getHsl().s - 10) / 3;\n\n\t\t\t\tpreset.items[1] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[2] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[3] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tprimary.lighten(deltaL2 * 3).desaturate(deltaS * 3);\n\n\t\t\t\tpreset.items[4] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[5] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[11] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tprimary.saturate(deltaS2 * 3).darken(deltaL * 3);\n\n\t\t\t\tpreset.items[7] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[8] = new ColorValue(primary.adjustHue(-80));\n\t\t\t\tpreset.items[9] = new ColorValue(primary.adjustHue(180));\n\t\t\t\tpreset.items[6] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[10] = new ColorValue(primary.adjustHue(40));\n\t\t\t}\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getBlackAndWhitePreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('blackAndWhite', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'blackAndWhite',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst start = new ColorValue('#ffffff');\n\n\t\t\tpreset.items.push(new ColorValue(start));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.28)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(14.32)));\n\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getGradientByColorOptions(options: PresetOptions): PresetOptions\n\t{\n\t\tconst items = [];\n\t\tconst pairs = [\n\t\t\t[1, 2],\n\t\t\t[1, 4],\n\t\t\t[5, 12],\n\t\t\t[1, 8],\n\t\t\t[8, 9],\n\t\t\t[1, 9],\n\t\t\t[10, 7],\n\t\t\t[7, 11],\n\t\t];\n\t\tpairs.forEach(pair => {\n\t\t\titems.push(new GradientValue({\n\t\t\t\tfrom: new ColorValue(options.items[pair[0] - 1]),\n\t\t\t\tto: new ColorValue(options.items[pair[1] - 1]),\n\t\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t\t}));\n\t\t});\n\n\t\treturn {\n\t\t\ttype: gradientType,\n\t\t\titems: items,\n\t\t};\n\t}\n}\n","import {Tag, Dom, Event, Type, Cache} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, defaultType, gradientType} from './types/preset-options';\nimport Generator from './generator';\n\nimport './css/preset.css';\n\nexport default class Preset extends EventEmitter\n{\n\tid: string;\n\ttype: 'color' | 'gradient';\n\titems: [ColorValue | GradientValue];\n\tactiveItem: string | IColorValue | null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: PresetOptions)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Preset');\n\n\t\tthis.id = options.id;\n\t\tthis.type = options.type || defaultType;\n\t\tthis.items = options.items;\n\t\tthis.activeItem = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetGradientPreset(): Preset\n\t{\n\t\tconst options = (this.type === gradientType)\n\t\t\t? {type: gradientType, items: this.items}\n\t\t\t: Generator.getGradientByColorOptions({items: this.items});\n\n\t\treturn new Preset(options);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-preset\">\n\t\t\t\t\t${this.items.map((item) => {\n\t\t\t\t\t\treturn this.getItemLayout(item.getName());\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemLayout(name: string): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(name, () => {\n\t\t\tconst color = this.getItemByName(name);\n\t\t\tconst style = Type.isString(color) ? color : color.getStyleString();\n\t\t\tconst item = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"landing-ui-field-color-preset-item\"\n\t\t\t\t\tstyle=\"background: ${style}\"\n\t\t\t\t\tdata-name=\"${name}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t\tEvent.bind(item, 'click', this.onItemClick.bind(this));\n\n\t\t\treturn item;\n\t\t});\n\t}\n\n\tgetItemByName(name: string): string | IColorValue | null\n\t{\n\t\treturn this.items.find(item => name === item.getName()) || null;\n\t}\n\n\tisPresetValue(value: ColorValue | GradientValue | null): boolean\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this.items.some(item => {\n\t\t\tif (item instanceof ColorValue && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\treturn ColorValue.compare(item, new ColorValue(value).setOpacity(1));\n\t\t\t}\n\t\t\telse if (item instanceof GradientValue && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\treturn GradientValue.compare(item, value, false);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.setActiveItem(event.currentTarget.dataset.name);\n\n\t\tlet value = null;\n\t\tif (this.activeItem !== null)\n\t\t{\n\t\t\tvalue = this.activeItem instanceof GradientValue\n\t\t\t\t? new GradientValue(this.activeItem)\n\t\t\t\t: new ColorValue(this.activeItem);\n\t\t}\n\n\t\tthis.emit('onChange', {color: value});\n\t}\n\n\tsetActiveItem(name: string)\n\t{\n\t\tthis.activeItem = this.getItemByName(name);\n\n\t\tthis.items.forEach((item) => {\n\t\t\tconst itemName = item.getName();\n\t\t\tif (name === itemName)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetActiveValue(value: ColorValue | GradientValue | null)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew GradientValue(value)\n\t\t\t\t\t\t.setAngle(GradientValue.DEFAULT_ANGLE)\n\t\t\t\t\t\t.setType(GradientValue.DEFAULT_TYPE)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew ColorValue(value)\n\t\t\t\t\t\t.setOpacity(1)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.items.forEach(item => {\n\t\t\tDom.removeClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.items.some(item => {\n\t\t\treturn Dom.hasClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n}","import 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport {Tag, Text, Dom, Event, Type, Cache, Loc} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Popup, PopupManager} from 'main.popup';\n\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport Generator from \"./generator\";\n\nimport './css/preset_collection.css';\nimport {PresetOptions} from \"./types/preset-options\";\nimport Preset from \"./preset\";\n\nexport default class PresetCollection extends EventEmitter\n{\n\tstatic globalActiveId: number | string | null = null;\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\tpresets: {\n\t\t[id: string]: PresetOptions\n\t} = {};\n\tactiveId: number | string | null = null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.PresetCollection');\n\t\tthis.popupId = 'presets-popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.onPresetClick = this.onPresetClick.bind(this);\n\t\tEvent.bind(this.getOpenButton(), 'click', () => {\n\t\t\tthis.getPopup().toggle();\n\t\t});\n\t\tthis.onPresetChangeGlobal = this.onPresetChangeGlobal.bind(this);\n\t\tEventEmitter.subscribe('BX.Landing.UI.Field.Color.PresetCollection:onChange', this.onPresetChangeGlobal);\n\t}\n\n\taddDefaultPresets()\n\t{\n\t\tthis.addPreset(Generator.getPrimaryColorPreset());\n\t\tGenerator.getDefaultPresets().map((item) => {\n\t\t\tthis.addPreset(item);\n\t\t});\n\t}\n\n\taddPreset(options: PresetOptions)\n\t{\n\t\tthis.cache.delete('popupLayout');\n\t\tif (!Object.keys(this.presets).length || !(options.id in this.presets))\n\t\t{\n\t\t\tthis.presets[options.id] = options;\n\t\t}\n\t}\n\n\tgetGlobalActiveId(): number | string | null\n\t{\n\t\treturn PresetCollection.globalActiveId;\n\t}\n\n\tgetActiveId(): number | string\n\t{\n\t\treturn this.getGlobalActiveId() || this.getDefaultPreset().getId();\n\t}\n\n\tgetActivePreset(): Preset\n\t{\n\t\treturn this.getPresetById(this.getActiveId());\n\t}\n\n\tgetDefaultPreset(): ?Preset\n\t{\n\t\treturn Object.keys(this.presets).length\n\t\t\t? this.getPresetById(Object.keys(this.presets)[0])\n\t\t\t: null;\n\t}\n\n\tgetPresetById(id: number | string): ?Preset\n\t{\n\t\tif (id in this.presets)\n\t\t{\n\t\t\treturn this.cache.remember(id, () => new Preset(this.presets[id]));\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetPresetByItemValue(value: ColorValue | GradientValue | null): ?Preset\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (let id in this.presets)\n\t\t{\n\t\t\tconst preset = this.getPresetById(id);\n\t\t\tif (preset && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tif (preset.isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (preset && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tif (preset.getGradientPreset().isPresetValue(value))\n\t\t\t\t{\n\t\t\t\t\treturn preset;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-left\">\n\t\t\t\t\t\t<span class=\"landing-ui-field-color-presets-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_TITLE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-right\">${this.getOpenButton()}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOpenButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('openButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-presets-open\">\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE')}\n\t\t\t</span>`;\n\t\t});\n\t}\n\n\tgetTitleContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleContainer', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-presets-left');\n\t\t});\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\t// todo: bind to event target? or need button\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'presets-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getOpenButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\twidth: 280,\n\t\t\t\toffsetLeft: -200,\n\t\t\t\tcontent: this.getPopupLayout(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupLayout', () => {\n\t\t\tconst layouts = Tag.render`<div class=\"landing-ui-field-color-presets-popup\">\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-title\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE_COLORS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-inner\"></div>\n\t\t\t</div>`;\n\t\t\tconst innerLayouts = layouts.querySelector('.landing-ui-field-color-presets-popup-inner');\n\t\t\tfor (const presetId in this.presets)\n\t\t\t{\n\t\t\t\tconst layout = this.getPresetLayout(presetId);\n\t\t\t\tif (presetId === this.getActiveId())\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(layout, PresetCollection.ACTIVE_CLASS);\n\t\t\t\t\tthis.activeId = presetId;\n\t\t\t\t}\n\t\t\t\tEvent.bind(layout, 'click', this.onPresetClick);\n\t\t\t\tDom.append(layout, innerLayouts);\n\t\t\t}\n\n\t\t\treturn layouts;\n\t\t});\n\t}\n\n\tgetPresetLayout(presetId: string | number): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(presetId + 'layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets-preset\" data-id=\"${presetId}\">\n\t\t\t\t\t${\n\t\t\t\t\t\tthis.presets[presetId].items.map((item) => {\n\t\t\t\t\t\t\treturn Tag.render`<div\n\t\t\t\t\t\t\t\tclass=\"landing-ui-field-color-presets-preset-item\"\n\t\t\t\t\t\t\t\tstyle=\"background: ${Type.isString(item) ? item : item.getStyleString()}\"\n\t\t\t\t\t\t\t></div>`;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonPresetClick(event: MouseEvent)\n\t{\n\t\tthis.getPopup().close();\n\t\tthis.setActiveItem(event.currentTarget.dataset.id);\n\t\tthis.emit('onChange', {presetId: this.getActiveId()});\n\t}\n\n\tonPresetChangeGlobal(event: BaseEvent)\n\t{\n\t\tif (event.getData().presetId !== this.activeId)\n\t\t{\n\t\t\tthis.setActiveItem(event.getData().presetId);\n\t\t\tthis.emit('onChange', event);\n\t\t}\n\t}\n\n\tsetActiveItem(presetId: string)\n\n\t{\n\t\tif (\n\t\t\tpresetId !== null\n\t\t\t&& presetId !== this.activeId\n\t\t)\n\t\t{\n\t\t\tPresetCollection.globalActiveId = presetId;\n\t\t\tthis.activeId = presetId;\n\t\t\tfor (const id in this.presets)\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\tif (id === presetId)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tfor (const presetId in this.presets)\n\t\t{\n\t\t\tDom.removeClass(this.getPresetLayout(presetId), PresetCollection.ACTIVE_CLASS);\n\t\t}\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc, Text} from 'main.core';\n\nimport './css/reset.css';\n\nexport default class Reset extends EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Reset');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\n\t\tconst hint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: options.contentRoot,\n\t\t\t\tpadding: 0,\n\t\t\t}\n\t\t});\n\t\thint.init(this.getLayout());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-reset-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-reset\"\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('LANDING_FIELD_COLOR-RESET_HINT_2')}\"\n\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onReset');\n\t}\n}\n","import {Dom, Tag} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BaseControl from '../base_control/base_control';\nimport ColorValue from \"../../color_value\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport Reset from '../../layout/reset/reset';\n\nimport Generator from '../../layout/preset/generator';\nimport './css/color_set.css';\n\nexport default class ColorSet extends BaseControl\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.ColorSet');\n\n\t\tthis.reset = new Reset(options);\n\t\tthis.reset.subscribe('onReset', () => {\n\t\t\tthis.emit('onReset');\n\t\t});\n\n\t\tthis.blackAndWhitePreset = new Preset(Generator.getBlackAndWhitePreset());\n\t\tthis.blackAndWhitePreset.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tthis.colorpicker = new Colorpicker(options);\n\t\tthis.colorpicker.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\n\t\t\tconst color = event.getData().color;\n\t\t\tif (this.preset.isPresetValue(color))\n\t\t\t{\n\t\t\t\tthis.preset.setActiveValue(color);\n\t\t\t\tthis.colorpicker.unsetActive();\n\t\t\t}\n\t\t\telse if (this.blackAndWhitePreset.isPresetValue(color))\n\t\t\t{\n\t\t\t\tthis.blackAndWhitePreset.setActiveValue(color);\n\t\t\t\tthis.colorpicker.unsetActive();\n\t\t\t}\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.presets = new PresetCollection(options);\n\t\tthis.presets.subscribe('onChange', (event) => {\n\t\t\tthis.setPreset(this.presets.getPresetById(event.getData().presetId));\n\t\t});\n\t\tthis.presets.addDefaultPresets();\n\t\tconst preset = this.presets.getActivePreset();\n\t\tif (preset)\n\t\t{\n\t\t\tthis.setPreset(preset);\n\t\t}\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tDom.append(this.reset.getLayout(), this.presets.getTitleContainer());\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorset\">\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-top\">\n\t\t\t\t\t${this.presets.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-bottom\">\n\t\t\t\t\t${this.blackAndWhitePreset.getLayout()}\n\t\t\t\t\t${this.colorpicker.getLayout()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-colorset-title');\n\t\t});\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-colorset-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tif (this.getValue() !== null && this.preset.isPresetValue(this.getValue()))\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.preset.setActiveValue(this.getValue());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.colorpicker.setValue(this.getValue());\n\t\t}\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\n\t\tthis.emit('onPresetChange', {preset: preset});\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetPresetsCollection(): ?PresetCollection\n\t{\n\t\treturn this.presets;\n\t}\n\n\tonPresetItemChange(event: BaseEvent)\n\t{\n\t\tthis.colorpicker.setValue(event.getData().color);\n\t\tthis.colorpicker.unsetActive();\n\t\tthis.onChange(event);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.set('value', event.getData().color);\n\t\tthis.emit('onChange', event);\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.colorpicker.getValue();\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t\tthis.colorpicker.setValue(value);\n\n\t\t\tconst activePreset =\n\t\t\t\tthis.presets.getGlobalActiveId()\n\t\t\t\t\t? this.presets.getPresetById(this.presets.getGlobalActiveId())\n\t\t\t\t\t: this.presets.getPresetByItemValue(value);\n\t\t\tif (activePreset !== null)\n\t\t\t{\n\t\t\t\tthis.setPreset(activePreset);\n\t\t\t\tthis.presets.setActiveItem(activePreset.getId());\n\t\t\t}\n\n\t\t\tif (value !== null && this.blackAndWhitePreset.isPresetValue(value))\n\t\t\t{\n\t\t\t\tthis.unsetActive();\n\t\t\t\tthis.blackAndWhitePreset.setActiveValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.blackAndWhitePreset.unsetActive();\n\t\tthis.colorpicker.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.preset.isActive() || this.blackAndWhitePreset.isActive() || this.colorpicker.isActive();\n\t}\n}\n","import 'ui.design-tokens';\n\nimport {Dom, Event, Tag, Text, Type} from 'main.core';\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from \"../../color_value\";\nimport './css/opacity.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Opacity extends BaseControl\n{\n\tstatic +DEFAULT_COLOR: string = '#cccccc';\n\tstatic +DEFAULT_OPACITY: string = 1;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Opacity');\n\n\t\tthis.defaultOpacity = (Type.isObject(options) && Reflect.has(options, 'defaultOpacity'))\n\t\t\t? options.defaultOpacity\n\t\t\t: Opacity.DEFAULT_OPACITY;\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.layout = this.getLayout();\n\t\tthis.pickerControl = this.layout .querySelector('.landing-ui-field-color-opacity');\n\t\tthis.rangeControl = this.layout .querySelector('.landing-ui-field-color-opacity-range-output');\n\t\tthis.arrowsUp = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-arrows-up');\n\t\tthis.arrowsDown = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-arrows-down');\n\t\tthis.rangeInput = this.rangeControl.querySelector('.landing-ui-field-color-opacity-range-output-input');\n\t\tEvent.bind(this.arrowsUp, 'click', this.onArrowClick.bind(this, 'up'));\n\t\tEvent.bind(this.arrowsDown, 'click', this.onArrowClick.bind(this, 'down'));\n\t\tEvent.bind(this.pickerControl, 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tconst defaultOpacityValue = this.defaultOpacity * 100;\n\t\tconst layout = Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-opacity-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-opacity\">\n\t\t\t\t\t${this.getPicker()}\n\t\t\t\t\t${this.getColorLayout()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output\">\n\t\t\t\t\t<div \n\t\t\t\t\t\tclass=\"landing-ui-field-color-opacity-range-output-input\"\n\t\t\t\t\t\ttitle=\"${defaultOpacityValue}\">\n\t\t\t\t\t\t${defaultOpacityValue}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows-up\"></div>\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-range-output-arrows-down\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\tthis.setPickerPosByOpacity(this.defaultOpacity);\n\n\t\treturn layout;\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX);\n\t\tthis.onChange();\n\t\tthis.onRangeControlChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\t/**\n\t * Set picker by absolute page coords\n\t * @param x\n\t */\n\tsetPickerPos(x: number)\n\t{\n\t\tconst leftPos = Math.max(Math.min((x - this.getLayoutRect().left), this.getLayoutRect().width), 0);\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t}\n\n\tsetPickerPosByOpacity(opacity: number)\n\t{\n\t\topacity = Math.min(1, Math.max(0, opacity));\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${(opacity * 100)}%`,\n\t\t});\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.pickerControl.getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-color\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item-circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t});\n\t}\n\n\tgetDefaultValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('default', () => {\n\t\t\treturn new ColorValue(Opacity.DEFAULT_COLOR).setOpacity(this.defaultOpacity);\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst pickerLeft = Text.toNumber(Dom.style(this.getPicker(), 'left'));\n\t\t\tconst layoutWidth = Text.toNumber(this.pickerControl.getBoundingClientRect().width);\n\t\t\treturn this.getDefaultValue().setOpacity(pickerLeft / layoutWidth);\n\t\t});\n\t}\n\n\tsetValue(value: ?IColorValue)\n\t{\n\t\tconst valueToSet = (!Type.isNull(value)) ? value : this.getDefaultValue();\n\t\tsuper.setValue(valueToSet);\n\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: valueToSet.getStyleStringForOpacity()});\n\t\t\tthis.setPickerPosByOpacity(valueToSet.getOpacity());\n\t\t\tthis.onRangeControlChange();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getColorLayout(), {background: 'none'});\n\t\t}\n\t}\n\n\tonRangeControlChange()\n\t{\n\t\tconst opacity = parseInt((this.getValue().getOpacity()) * 100);\n\t\tthis.rangeInput.title = opacity;\n\t\tthis.rangeInput.innerHTML = opacity;\n\t}\n\n\tonArrowClick(arrowName)\n\t{\n\t\tlet newOpacityInputValue;\n\t\tconst opacity = this.getValue().getOpacity();\n\t\tconst opacityInputValue = parseInt(opacity * 100);\n\t\tif (arrowName === 'up')\n\t\t{\n\t\t\tif (opacityInputValue < 100)\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = (opacityInputValue + 5) / 100;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = opacityInputValue / 100;\n\t\t\t}\n\t\t}\n\t\tif (arrowName === 'down')\n\t\t{\n\t\t\tif (opacityInputValue > 0)\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = (opacityInputValue - 5) / 100;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tnewOpacityInputValue = opacityInputValue / 100;\n\t\t\t}\n\t\t}\n\t\tthis.rangeInput.title = parseInt(newOpacityInputValue * 100);\n\t\tthis.rangeInput.innerHTML = parseInt(newOpacityInputValue * 100);\n\t\tconst width = this.pickerControl.getBoundingClientRect().width;\n\t\tconst leftPos = width - (width * (1 - newOpacityInputValue));\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t\tthis.onChange();\n\t}\n}\n","import 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport {Cache, Dom, Event, Tag, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport BaseControl from '../../control/base_control/base_control';\n\nimport './css/tabs.css';\n\nexport default class Tabs extends EventEmitter\n{\n\ttabs: Tab[];\n\tmultiple: boolean;\n\tisBig: boolean;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Tabs');\n\n\t\tthis.tabs = [];\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.multiple = true;\n\t\tthis.isBig = false;\n\n\t\tthis.onToggle = this.onToggle.bind(this);\n\t}\n\n\tsetMultiple(multiple: boolean): Tabs\n\t{\n\t\tthis.multiple = multiple;\n\n\t\treturn this;\n\t}\n\n\tsetBig(big: boolean): Tabs\n\t{\n\t\tthis.isBig = big;\n\t\tthis.multiple = false;\n\n\t\treturn this;\n\t}\n\n\tappendTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) ? items : [items],\n\t\t});\n\t\tthis.tabs.push(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tprependTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) || [items],\n\t\t});\n\t\tthis.tabs.unshift(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tbindEvents(tab)\n\t{\n\t\ttab.subscribe('onToggle', this.onToggle);\n\t\ttab.subscribe('onShow', this.onToggle);\n\t\ttab.subscribe('onHide', this.onToggle);\n\t}\n\n\tonToggle(event: BaseEvent)\n\t{\n\t\tthis.emit('onToggle', event);\n\t}\n\n\tshowTab(id): Tabs\n\t{\n\t\tif (!this.multiple)\n\t\t{\n\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\ttab.hide();\n\t\t\t});\n\t\t}\n\n\t\tconst tab = this.getTabById(id);\n\t\tif (tab)\n\t\t{\n\t\t\ttab.show();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetTabById(id: string): Tab\n\t{\n\t\treturn this.tabs.find((tab) => {\n\t\t\treturn tab.id === id;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst additional = this.isBig ? ' landing-ui-field-color-tabs--big' : '';\n\t\t\tconst layout = Tag.render`<div class=\"landing-ui-field-color-tabs${additional}\"></div>`;\n\n\t\t\tif (this.isBig)\n\t\t\t{\n\t\t\t\tconst head = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-head landing-ui-field-color-tabs-head--big\"></div>\n\t\t\t\t`;\n\t\t\t\tconst content = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-content landing-ui-field-color-tabs-content--big\"></div>\n\t\t\t\t`;\n\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tDom.append(tab.getTitle(), head);\n\t\t\t\t\tDom.append(tab.getLayout(), content);\n\t\t\t\t});\n\n\t\t\t\tDom.append(head, layout);\n\t\t\t\tDom.append(content, layout);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tconst tabLayout = Tag.render`<div class=\"landing-ui-field-color-tabs-tab\">\n\t\t\t\t\t\t${tab.getTitle()}${tab.getLayout()}\n\t\t\t\t\t</div>`;\n\t\t\t\t\tDom.append(tabLayout, layout);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// events\n\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\tEvent.bind(tab.getTitle(), 'click', () => {\n\t\t\t\t\tif (!this.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\t\t\t\ttab.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttab.toggle();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn layout;\n\t\t});\n\t}\n}\n\nexport type TabOptions = {\n\tid: string,\n\ttitle: string,\n\titems: BaseControl[]\n}\n\nexport class Tab extends EventEmitter\n{\n\tid: string;\n\ttitle: string;\n\titems: BaseControl[];\n\n\tstatic SHOW_CLASS: string = 'show';\n\n\tconstructor(options: TabOptions)\n\t{\n\t\tsuper();\n\n\t\tthis.id = options.id;\n\t\tthis.title = options.title;\n\t\tthis.items = options.items;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler\">\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-icon\"></span>\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-name\">${this.title}</span>\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-tabs-tab-content\">\n\t\t\t\t\t${this.items.map(item => item.getLayout())}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\ttoggle(): Tab\n\t{\n\t\tDom.toggleClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.toggleClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onToggle', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\tshow(): Tab\n\t{\n\t\tDom.addClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.addClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onShow', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\thide(): Tab\n\t{\n\t\tDom.removeClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.removeClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onHide', {tab: this.title});\n\n\t\treturn this;\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc, Dom} from 'main.core';\n\nimport './css/zeroing.css';\n\nexport default class Zeroing extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Zeroing');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\tlet textCode = 'LANDING_FIELD_COLOR-ZEROING_TITLE_2';\n\t\tif (this.options)\n\t\t{\n\t\t\tif (this.options.textCode)\n\t\t\t{\n\t\t\t\ttextCode = this.options.textCode;\n\t\t\t}\n\t\t}\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-zeroing\">\n\t\t\t\t<div class=\"landing-ui-field-color-zeroing-preview\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-zeroing-state\"></div>\n\t\t\t\t</div>\n\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t${Loc.getMessage(textCode)}\n\t\t\t\t</span>\n\t\t\t</div>`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onChange', {color: null});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Zeroing.ACTIVE_CLASS);\n\t}\n}\n","import {Tag, Loc, Dom, Type} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport BaseProcessor from './base_processor';\nimport ColorSet from \"../control/color_set/color_set\";\nimport Opacity from \"../control/opacity/opacity\";\nimport Tabs from '../layout/tabs/tabs';\nimport Primary from '../layout/primary/primary';\n\nimport ColorValue from \"../color_value\";\nimport {IColorValue} from '../types/i_color_value';\nimport Zeroing from '../layout/zeroing/zeroing';\n\nexport default class Color extends BaseProcessor\n{\n\tstatic PRIMARY_VAR: string = 'var(--primary)';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Color');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color';\n\t\tthis.className = 'g-color';\n\n\t\tthis.colorSet = new ColorSet(options);\n\t\tthis.colorSet.subscribe('onChange', this.onColorSetChange.bind(this));\n\t\tthis.colorSet.subscribe('onReset', this.onReset.bind(this));\n\n\t\tthis.opacity = new Opacity();\n\t\tthis.opacity.subscribe('onChange', this.onOpacityChange.bind(this));\n\n\t\tthis.zeroing = new Zeroing();\n\t\tthis.zeroing.subscribe('onChange', this.onZeroingChange.bind(this));\n\n\t\tthis.primary = new Primary();\n\t\tthis.primary.subscribe('onChange', this.onPrimaryChange.bind(this));\n\n\t\tthis.tabs = new Tabs().appendTab('Opacity', Loc.getMessage('LANDING_FIELD_COLOR-TAB_OPACITY'), this.opacity);\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn (\n\t\t\tvalue === null\n\t\t\t|| value === 'none'\n\t\t\t|| value === 'rgba(0, 0, 0, 0)'\n\t\t);\n\t}\n\n\tgetNullValue()\n\t{\n\t\treturn new ColorValue('rgba(0, 0, 0, 0)');\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.colorSet.getLayout()}\n\t\t\t\t${this.primary.getLayout()}\n\t\t\t\t${this.zeroing.getLayout()}\n\t\t\t\t${this.tabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.primary.unsetActive();\n\t\tthis.zeroing.unsetActive();\n\n\t\tconst color = event.getData().color;\n\t\tif (color !== null)\n\t\t{\n\t\t\tcolor.setOpacity(this.opacity.getValue().getOpacity());\n\t\t}\n\t\tthis.opacity.setValue(color);\n\n\t\tthis.onChange();\n\t}\n\n\tonOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.setValue(event.getData().color);\n\t\tthis.onColorSetChange(event);\n\n\t\tthis.colorSet.unsetActive();\n\t\tthis.zeroing.unsetActive();\n\t\tthis.primary.setActive();\n\t}\n\n\tonZeroingChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t\tthis.zeroing.setActive();\n\t\tthis.setValue(event.getData().color);\n\t\t// todo: need reload computed props and reinit\n\t\tthis.onChange(event);\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tconst valueObj = (value !== null) ? new ColorValue(value) : null;\n\n\t\tthis.colorSet.setValue(valueObj);\n\t\tthis.opacity.setValue(valueObj);\n\n\t\t// todo: what about opacity in primary?\n\t\tif (this.primary.isPrimaryValue(valueObj))\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t}\n\n\t\tif (value !== null && valueObj.getOpacity() < 1)\n\t\t{\n\t\t\tthis.tabs.showTab('Opacity');\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst value = this.primary.isActive() ? this.primary.getValue() : this.colorSet.getValue();\n\n\t\t\treturn (value === null)\n\t\t\t\t? null\n\t\t\t\t: value.setOpacity(this.opacity.getValue().getOpacity());\n\t\t});\n\t}\n\n\tsetDefaultValue(value: {string: string} | null)\n\t{\n\t\tthis.zeroing.setActive();\n\t\tif (!Type.isNull(value))\n\t\t{\n\t\t\tthis.colorSet.colorpicker.hex.setActive();\n\t\t}\n\t\tsuper.setDefaultValue(value);\n\t}\n\n\tonReset()\n\t{\n\t\tthis.zeroing.unsetActive();\n\t\tsuper.onReset();\n\t}\n\n\tsetActiveControl(controlName)\n\t{\n\t\tif (controlName === 'primary')\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t}\n\t\tif (controlName === 'hex')\n\t\t{\n\t\t\tthis.colorSet.colorpicker.hexPreview.setActive();\n\t\t}\n\t}\n\n\tdefineActiveControl(items, styleNode)\n\t{\n\t\tif (!Type.isUndefined(styleNode))\n\t\t{\n\t\t\tlet oldClass;\n\t\t\tlet activeControl;\n\t\t\tconst node = styleNode.getNode();\n\t\t\tif (node.length > 0)\n\t\t\t{\n\t\t\t\titems.forEach((item) => {\n\t\t\t\t\tif (Dom.hasClass(node[0], item.value))\n\t\t\t\t\t{\n\t\t\t\t\t\toldClass = item.value;\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tif (oldClass)\n\t\t\t\t{\n\t\t\t\t\tconst reg = /g-[a-z]+-[a-z0-9-]+/i;\n\t\t\t\t\tconst found = oldClass.match(reg);\n\t\t\t\t\tif (found)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst reg = /primary/i;\n\t\t\t\t\t\tconst found = oldClass.match(reg);\n\t\t\t\t\t\tthis.zeroing.unsetActive();\n\t\t\t\t\t\tif (found)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveControl = 'primary';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactiveControl = 'hex';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (activeControl)\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveControl(activeControl);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n","import Color from './color';\n\nexport default class ColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color-hover';\n\t\tthis.className = 'g-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import {Event, Tag, Text, Dom, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\nimport BaseControl from \"../base_control/base_control\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\n\nimport 'ui.fonts.opensans';\nimport './css/gradient.css';\nimport GradientValue from \"../../gradient_value\";\nimport ColorValue from '../../color_value';\n\nexport default class Gradient extends BaseControl\n{\n\tstatic DISABLE_CLASS = 'disable';\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tpreset: ?Preset;\n\tcolorpickerFrom: Colorpicker;\n\tcolorpickerTo: Colorpicker;\n\n\t+ROTATE_STEP = 45;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Gradient');\n\t\tthis.popupId = 'gradient_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.colorpickerFrom = new Colorpicker(options);\n\t\tthis.colorpickerFrom.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(event.getData().color, null);\n\t\t});\n\n\t\tthis.colorpickerTo = new Colorpicker(options);\n\t\tthis.colorpickerTo.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(null, event.getData().color);\n\t\t});\n\n\t\tEvent.bind(this.getPopupButton(), 'click', this.onPopupOpen.bind(this));\n\t\tEvent.bind(this.getRotateButton(), 'click', this.onRotate.bind(this));\n\t\tEvent.bind(this.getSwitchTypeButton(), 'click', this.onSwitchType.bind(this));\n\t\tEvent.bind(this.getSwapButton(), 'click', this.onSwap.bind(this));\n\n\t\tthis.preset = null;\n\t}\n\n\tonColorChange(fromValue: ?ColorValue, toValue: ?ColorValue)\n\t{\n\t\tif (fromValue === null && toValue === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst valueToSet = this.getValue() || new GradientValue();\n\t\tconst fromValueToSet = fromValue || valueToSet.getFrom() || (new GradientValue()).getFrom();\n\t\tconst toValueToSet = toValue || valueToSet.getTo() || (new GradientValue()).getTo();\n\t\tvalueToSet.setValue({\n\t\t\tfrom: fromValueToSet,\n\t\t\tto: toValueToSet,\n\t\t});\n\n\t\tthis.setValue(valueToSet);\n\t\tthis.preset.unsetActive();\n\t\tthis.onChange();\n\t}\n\n\tonPopupOpen()\n\t{\n\t\tthis.getPopup().toggle();\n\t}\n\n\tonRotate(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tangle: ((value.getAngle() + this.ROTATE_STEP) % 360),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwitchType(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_RADIAL});\n\t\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_LINEAR});\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t}\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwap(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tto: value.getFrom(),\n\t\t\t\tfrom: value.getTo(),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tstatic disableButton(button: HTMLDivElement)\n\t{\n\t\tDom.addClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic enableButton(button: HTMLDivElement)\n\t{\n\t\tDom.removeClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic isButtonEnable(button: HTMLDivElement)\n\t{\n\t\treturn !Dom.hasClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tcorrectColorpickerColors()\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst angle = value.getAngle();\n\t\t\tconst hexFrom = this.colorpickerFrom.getHexPreviewObject();\n\t\t\tconst hexTo = this.colorpickerTo.getHexPreviewObject();\n\t\t\tconst colorFrom = value.getFrom();\n\t\t\tconst colorTo = value.getTo();\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tif (angle === 270 || angle === 90)\n\t\t\t\t{\n\t\t\t\t\tconst median = ColorValue.getMedian(colorFrom, colorTo).getContrast().getHex();\n\t\t\t\t\thexFrom.adjustColors(median, 'transparent');\n\t\t\t\t\thexTo.adjustColors(median, 'transparent');\n\t\t\t\t}\n\t\t\t\telse if (angle >= 135 && angle <= 225)\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-gradient-preset-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getPopupButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: {offset: -5},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 7,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-preset-popup-container\">\n\t\t\t\t\t${this.getRotateButton()}\n\t\t\t\t\t${this.getSwapButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tif (this.preset)\n\t\t{\n\t\t\tDom.clean(this.getPresetContainer());\n\t\t\tDom.append(this.preset.getLayout(), this.getPresetContainer());\n\t\t}\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-gradient\">\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-from\">${this.colorpickerFrom.getLayout()}</div>\n\t\t\t\t\t${this.getPopupButton()}\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-to\">${this.colorpickerTo.getLayout()}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-switch-type-container\">\n\t\t\t\t\t${this.getSwitchTypeButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContainerLayout(): HTMLDivElement\n\t{\n\t\t// todo: do better after change vyorstka\n\t\treturn this.getLayout().querySelector('.landing-ui-field-color-gradient-container');\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-gradient-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tgetPopupButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-gradient-open-popup\"></span>`;\n\t\t});\n\t}\n\n\tgetSwitchTypeButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('switchTypeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-switch-type\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWITCH_TYPE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetRotateButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('rotateButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-rotate\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_ROTATE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetSwapButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('swapButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-swap\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWAP')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.setValue(event.getData().color);\n\t\t\tthis.unsetColorpickerActive();\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetValue(): ?GradientValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (\n\t\t\t\tthis.colorpickerFrom.getValue() === null\n\t\t\t\t|| this.colorpickerTo.getValue() === null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet rotate = this.getRotateButton().dataset.rotate;\n\t\t\trotate = rotate ? Text.toNumber(rotate) : 0;\n\t\t\tconst type = this.getSwitchTypeButton().dataset.type || GradientValue.TYPE_LINEAR;\n\n\t\t\treturn new GradientValue({\n\t\t\t\tfrom: this.colorpickerFrom.getValue(),\n\t\t\t\tto: this.colorpickerTo.getValue(),\n\t\t\t\tangle: rotate,\n\t\t\t\ttype: type,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?GradientValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.colorpickerFrom.setValue(null);\n\t\t\tthis.colorpickerTo.setValue(null);\n\n\t\t\tthis.unsetActive();\n\n\t\t\tDom.style(this.getContainerLayout(), 'background', (new GradientValue).getStyleString());\n\n\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\tGradient.disableButton(this.getSwitchTypeButton());\n\t\t\tGradient.disableButton(this.getSwapButton());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// todo: how set default type and rotation?\n\t\t\tthis.colorpickerFrom.setValue(value.getFrom());\n\t\t\tthis.colorpickerTo.setValue(value.getTo());\n\t\t\tthis.correctColorpickerColors();\n\n\t\t\tthis.getRotateButton().dataset.rotate = value.getAngle();\n\t\t\tthis.getSwitchTypeButton().dataset.type = value.getType();\n\n\t\t\tDom.style(this.getRotateButton(), 'transform', `rotate(${value.getAngle()}deg)`);\n\t\t\tDom.style(this.getContainerLayout(), 'background', this.getValue().getStyleString());\n\n\t\t\tGradient.enableButton(this.getSwitchTypeButton());\n\t\t\tGradient.enableButton(this.getSwapButton());\n\t\t\tif (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\tGradient.disableButton(this.getRotateButton())\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_LINEAR');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_RADIAL');\n\t\t\t}\n\n\t\t\tthis.setActive();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {gradient: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tconst value = this.getValue();\n\t\tif (this.preset.isPresetValue(value))\n\t\t{\n\t\t\tthis.preset.setActiveValue(value);\n\t\t\tthis.unsetColorpickerActive();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.setColorpickerActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.unsetColorpickerActive();\n\t}\n\n\tsetColorpickerActive(): void\n\t{\n\t\tDom.addClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n\n\tunsetColorpickerActive(): void\n\t{\n\t\tthis.colorpickerFrom.unsetActive();\n\t\tthis.colorpickerTo.unsetActive();\n\t\tDom.removeClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n}\n","import {Type, Loc} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport isHex from '../internal/is-hex';\nimport isRgbString from '../internal/is-rgb-string';\nimport isHslString from '../internal/is-hsl-string';\nimport isGradientString from '../internal/is-gradient-string';\nimport {isCssVar} from '../internal/css-var';\n\nimport Color from \"./color\";\nimport Gradient from \"../control/gradient/gradient\";\nimport Preset from '../layout/preset/preset';\n\nimport GradientValue from \"../gradient_value\";\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\n\nexport default class BgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColor');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg';\n\t\tthis.className = 'g-bg';\n\n\t\tthis.activeControl = null;\n\n\t\tthis.gradient = new Gradient(options);\n\t\tthis.gradient.subscribe('onChange', this.onGradientChange.bind(this));\n\t\tthis.tabs.prependTab('Gradient', Loc.getMessage('LANDING_FIELD_COLOR-TAB_GRADIENT'), this.gradient);\n\n\t\tthis.setGradientPreset(this.colorSet.getPreset());\n\t\tthis.colorSet.subscribe('onPresetChange', (event) => {\n\t\t\tthis.setGradientPreset(event.getData().preset);\n\t\t});\n\n\t\tthis.tabs.subscribe('onToggle', this.onTabsToggle.bind(this));\n\t}\n\n\tsetGradientPreset(preset: Preset)\n\t{\n\t\tconst gradientPreset = preset.getGradientPreset();\n\t\tthis.gradient.setPreset(gradientPreset);\n\t\tgradientPreset.subscribe('onChange', () => {\n\t\t\tthis.activeControl = this.gradient;\n\t\t\tthis.onChange();\n\t\t});\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null && value instanceof GradientValue)\n\t\t{\n\t\t\tif (this.gradient.getPreset().isPresetValue(value))\n\t\t\t{\n\t\t\t\tthis.colorSet.getPreset().unsetActive();\n\t\t\t\tthis.gradient.getPreset().setActiveValue(value);\n\t\t\t\tthis.gradient.unsetColorpickerActive();\n\t\t\t}\n\t\t}\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.colorSet;\n\t\tthis.gradient.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.gradient;\n\t\tthis.colorSet.unsetActive();\n\n\t\tconst gradValue = event.getData().gradient;\n\t\tif (gradValue !== null)\n\t\t{\n\t\t\tthis.opacity.setValue(\n\t\t\t\tgradValue.setOpacity(this.opacity.getValue().getOpacity()),\n\t\t\t);\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonTabsToggle()\n\t{\n\t\tthis.gradient.getPopup().close();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.gradient.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tthis.colorSet.setValue(null);\n\t\tthis.gradient.setValue(null);\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = null;\n\n\t\tif (Type.isNil(value))\n\t\t{\n\t\t\t// todo: set NULL for gradient or opacity?\n\t\t}\n\t\telse if (\n\t\t\tisRgbString(value)\n\t\t\t|| isHex(value)\n\t\t\t|| isHslString(value)\n\t\t\t|| isCssVar(value)\n\t\t)\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.activeControl = this.colorSet;\n\t\t}\n\t\telse if (isGradientString(value))\n\t\t{\n\t\t\tthis.activeControl = this.gradient;\n\n\t\t\tconst gradientValue = new GradientValue(value);\n\t\t\tthis.gradient.setValue(gradientValue);\n\t\t\tthis.opacity.setValue(gradientValue);\n\n\t\t\tconst presets = this.colorSet.getPresetsCollection();\n\t\t\tconst activePreset = presets.getGlobalActiveId()\n\t\t\t\t? presets.getPresetById(presets.getGlobalActiveId())\n\t\t\t\t: presets.getPresetByItemValue(gradientValue);\n\t\t\tif (activePreset !== null && activePreset !== this.colorSet.getPreset())\n\t\t\t{\n\t\t\t\tthis.colorSet.setPreset(activePreset);\n\t\t\t\tthis.setGradientPreset(activePreset);\n\t\t\t}\n\n\t\t\tthis.tabs.showTab('Gradient');\n\t\t\tif (gradientValue.getOpacity() < 1)\n\t\t\t{\n\t\t\t\tthis.tabs.showTab('Opacity');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.activeControl === this.gradient)\n\t\t\t{\n\t\t\t\tconst gradValue = this.gradient.getValue();\n\t\t\t\treturn (gradValue === null)\n\t\t\t\t\t? gradValue\n\t\t\t\t\t: gradValue.setOpacity(this.opacity.getValue().getOpacity());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n}\n","import {matcherGradient} from './is-gradient-string';\nimport {regexpToString} from './regexp';\n\nexport const matcherBgImage = /url\\(['\"]?([^ '\"]*)['\"]?\\)([\\w \\/]*)/i;\n\nexport default function isBgImageString(bgImage: string)\n{\n\tif (!!bgImage.trim().match(matcherBgImage))\n\t{\n\t\treturn true;\n\t}\n\n\treturn !!bgImage.trim().match(getMatcherWithOverlay());\n}\n\nfunction getMatcherWithOverlay(): RegExp\n{\n\tconst matcherBgString = regexpToString(matcherBgImage);\n\tconst matcherGradientString = regexpToString(matcherGradient);\n\treturn new RegExp(`^${matcherGradientString},${matcherBgString}`);\n}\n\n","import {Type, Loc} from 'main.core';\n\nimport {\n\tBgImageValueOptions,\n\tdefaultBgImageValueOptions,\n\tdefaultBgImageSize,\n\tdefaultBgImageAttachment,\n} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nimport isBgImageString, {matcherBgImage} from './internal/is-bg-image-string';\nimport {matcherGradient, matcherGradientColors} from './internal/is-gradient-string';\nimport {regexpWoStartEnd} from './internal/regexp';\n\nimport ColorValue from './color_value';\n\nexport default class BgImageValue implements IColorValue\n{\n\tvalue: BgImageValueOptions;\n\n\tconstructor(value: BgImageValueOptions | BgImageValue | string)\n\t{\n\t\t// todo: add 2x, file ids\n\t\tthis.value = defaultBgImageValueOptions;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn `\n\t\t\t${this.value.url.replace(/[^\\w\\d]/g, '')}_${this.value.size}_${this.value.attachment}\n\t\t`;\n\t}\n\n\tsetValue(value: BgImageValueOptions | BgImageValue | string): BgImageValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof BgImageValue)\n\t\t\t{\n\t\t\t\t// todo: add 2x and file IDs\n\t\t\t\tthis.value.url = value.getUrl();\n\t\t\t\tthis.value.url2x = value.getUrl2x();\n\t\t\t\tthis.value.fileId = value.getFileId();\n\t\t\t\tthis.value.fileId2x = value.getFileId2x();\n\t\t\t\tthis.value.size = value.getSize();\n\t\t\t\tthis.value.attachment = value.getAttachment();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value) && isBgImageString(value))\n\t\t{\n\t\t\tthis.parseBgString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tparseBgString(string: string): void\n\t{\n\t\t// todo: check matcher for 2x\n\t\tconst options = defaultBgImageValueOptions;\n\n\t\tconst matchesBg = string.trim().match(regexpWoStartEnd(matcherBgImage));\n\t\tif (!!matchesBg)\n\t\t{\n\t\t\toptions.url = matchesBg[1];\n\n\t\t\toptions.size = matchesBg[2].indexOf('auto') === -1\n\t\t\t\t? defaultBgImageSize\n\t\t\t\t: 'auto'\n\t\t\t;\n\n\t\t\toptions.attachment = matchesBg[2].indexOf('fixed') === -1\n\t\t\t\t? defaultBgImageAttachment\n\t\t\t\t: 'fixed'\n\t\t\t;\n\t\t}\n\n\t\tconst matchesOverlay = string.trim().match(regexpWoStartEnd(matcherGradientColors));\n\t\tif(!!string.trim().match(regexpWoStartEnd(matcherGradient)) && !!matchesOverlay)\n\t\t{\n\t\t\toptions.overlay = new ColorValue(matchesOverlay[0]);\n\t\t}\n\n\t\tthis.setValue(options);\n\t}\n\n\tsetOpacity(opacity: number): BgImageValue\n\t{\n\t\t// todo: what for image?\n\n\t\treturn this;\n\t}\n\n\tsetUrl(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url: value});\n\t\treturn this;\n\t}\n\n\tsetUrl2x(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url2x: value});\n\t\treturn this;\n\t}\n\n\tsetFileId(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId: value});\n\t\treturn this;\n\t}\n\n\tsetFileId2x(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId2x: value});\n\t\treturn this;\n\t}\n\n\tsetSize(value: 'cover' | 'auto'): BgImageValue\n\t{\n\t\tthis.setValue({size: value});\n\t\treturn this;\n\t}\n\n\tsetAttachment(value: 'scroll' | 'fixed'): BgImageValue\n\t{\n\t\tthis.setValue({attachment: value});\n\t\treturn this;\n\t}\n\n\tsetOverlay(value: ColorValue)\n\t{\n\t\tthis.setValue({overlay: value});\n\t\treturn this;\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.value.url;\n\t}\n\n\tgetUrl2x(): ?string\n\t{\n\t\treturn this.value.url2x;\n\t}\n\n\tgetFileId(): number\n\t{\n\t\treturn this.value.fileId;\n\t}\n\n\tgetFileId2x(): ?number\n\t{\n\t\treturn this.value.fileId2x;\n\t}\n\n\tgetSize(): 'cover' | 'auto'\n\t{\n\t\treturn this.value.size;\n\t}\n\n\tgetAttachment(needBool: boolean = false): string | boolean\n\t{\n\t\treturn needBool\n\t\t\t? this.value.attachment === 'fixed'\n\t\t\t: this.value.attachment;\n\t}\n\n\tgetOverlay(): ColorValue\n\t{\n\t\treturn this.value.overlay;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn 1;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tlet style = '';\n\t\tif (this.value.overlay !== null)\n\t\t{\n\t\t\tstyle = `linear-gradient(${this.value.overlay.getStyleString()},${this.value.overlay.getStyleString()})`;\n\t\t}\n\n\t\t// todo: what if url is null\n\t\tconst {url, url2x, size, attachment} = this.value;\n\t\tconst endString = `center / ${size} ${attachment}`;\n\t\tif (url !== null)\n\t\t{\n\t\t\tstyle = style.length ? (style + ',') : '';\n\t\t\tif(url2x !== null)\n\t\t\t{\n\t\t\t\tstyle += `-webkit-image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t\tstyle += `image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t}\n\t\t\tstyle += `url('${url}') ${endString}`;\n\t\t}\n\n\t\treturn style;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn '';\n\t}\n\n\tstatic getSizeItemsForButtons(): []\n\t{\n\t\treturn [\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_COVER'), value: 'cover'},\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_MOSAIC'), value: 'auto'},\n\t\t];\n\t}\n\n\tstatic getAttachmentValueByBool(value: boolean): string\n\t{\n\t\treturn value ? 'fixed' : 'scroll';\n\t}\n}\n","import 'ui.design-tokens';\n\nimport {BaseEvent} from 'main.core.events';\nimport {Dom, Tag, Type, Loc, Text} from 'main.core';\nimport {Image as ImageField} from 'landing.ui.field.image';\nimport {Backend} from 'landing.backend';\nimport {PageObject} from 'landing.pageobject';\nimport BaseControl from \"../base_control/base_control\";\nimport BgImageValue from '../../bg_image_value';\nimport './css/image.css';\n\nexport default class Image extends BaseControl\n{\n\t// todo: move to type\n\toptions: {\n\t\tblock: BX.Landing.Block,\n\t\tstyleNode: BX.Landing.UI.Style,\n\t\tcontentRoot: ?HTMLDivElement,\n\t\tselector: string,\n\t};\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Image');\n\t\tthis.options = options;\n\n\t\tthis.imgField = new ImageField({\n\t\t\tid: 'landing_ui_color_image_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-image',\n\t\t\tcontextType: ImageField.CONTEXT_TYPE_STYLE,\n\t\t\tcompactMode: true,\n\t\t\tdisableLink: true,\n\t\t\tdisableAltField: true,\n\t\t\tallowClear: true,\n\t\t\tdimensions: {width: 1920},\n\t\t\tuploadParams: {\n\t\t\t\taction: \"Block::uploadFile\",\n\t\t\t\tblock: this.options.block.id,\n\t\t\t},\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\t\tthis.imgField.subscribe('change', this.onImageChange.bind(this));\n\n\t\tthis.sizeField = new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'landing_ui_color_image_size_' + Text.getRandom().toLowerCase(),\n\t\t\ttitle: Loc.getMessage('LANDING_FIELD_COLOR-BG_SIZE_TITLE'),\n\t\t\tclassName: 'landing-ui-field-color-image-size',\n\t\t\titems: BgImageValue.getSizeItemsForButtons(),\n\t\t\tonChange: this.onSizeChange.bind(this),\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\n\t\tthis.attachmentField = new BX.Landing.UI.Field.Checkbox({\n\t\t\tid: 'landing_ui_color_image_attach_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-attachment',\n\t\t\tmultiple: false,\n\t\t\tcompact: true,\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_FIXED'), value: true},\n\t\t\t],\n\t\t\tonChange: this.onAttachmentChange.bind(this),\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-image\">\n\t\t\t\t${this.imgField.getLayout()}\n\t\t\t\t${this.sizeField.getLayout()}\n\t\t\t\t${this.attachmentField.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonImageChange(event: BaseEvent)\n\t{\n\t\tconst value = this.getValue() || new BgImageValue();\n\t\tif (event.getData().value.src)\n\t\t{\n\t\t\tvalue.setUrl(event.getData().value.src);\n\t\t\tvalue.setFileId(event.getData().value.id);\n\t\t\tif (event.getData().value.src2x)\n\t\t\t{\n\t\t\t\tvalue.setUrl2x(event.getData().value.src2x);\n\t\t\t\tvalue.setFileId2x(event.getData().value.id2x);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tvalue.setUrl(null);\n\t\t\tvalue.setFileId(null);\n\t\t\tvalue.setUrl2x(null);\n\t\t\tvalue.setFileId2x(null);\n\t\t}\n\n\t\tthis.setValue(value);\n\t\tthis.onChange();\n\n\t\tthis.saveNode(value);\n\t}\n\n\tsaveNode(value: BgImageValue)\n\t{\n\t\tconst style = this.options.styleNode;\n\t\tconst block = this.options.block;\n\n\t\tlet selector;\n\t\tif (\n\t\t\tstyle.selector === block.selector\n\t\t\t|| style.selector === block.makeAbsoluteSelector(block.selector)\n\t\t)\n\t\t{\n\t\t\tselector = '#wrapper';\n\t\t}\n\t\telse if (!style.isSelectGroup())\n\t\t{\n\t\t\tselector = BX.Landing.Utils.join(\n\t\t\t\tstyle.selector.split(\"@\")[0],\n\t\t\t\t\"@\",\n\t\t\t\tstyle.getElementIndex(style.getNode()[0])\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselector = style.selector.split(\"@\")[0];\n\t\t}\n\n\t\tconst data = {[selector]: {}};\n\t\tdata[selector].id = value.getFileId() || -1;\n\t\tdata[selector].id2x = value.getFileId2x() || -1;\n\n\t\tBackend.getInstance()\n\t\t\t.action(\n\t\t\t\t\"Landing\\\\Block::updateNodes\",\n\t\t\t\t{\n\t\t\t\t\tblock: this.options.block.id,\n\t\t\t\t\tdata: data,\n\t\t\t\t},\n\t\t\t)\n\t}\n\n\tonSizeChange(size: string)\n\t{\n\t\tif (Type.isString(size))\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setSize(size);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonAttachmentChange(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setAttachment(\n\t\t\t\tBgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()),\n\t\t\t);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {data: {image: this.getValue()}});\n\t}\n\n\tgetValue(): ?BgImageValue\n\t{\n\t\t// todo: get size and attachement from controls\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst imgValue = this.imgField.getValue();\n\t\t\tconst url = imgValue.src;\n\t\t\tif (url === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst value = new BgImageValue({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfileId: imgValue.id,\n\t\t\t\t});\n\t\t\t\tif (imgValue.src2x)\n\t\t\t\t{\n\t\t\t\t\tvalue.setUrl2x(imgValue.src2x);\n\t\t\t\t\tvalue.setFileId2x(imgValue.fileId2x);\n\t\t\t\t}\n\t\t\t\tconst size = this.sizeField.getValue();\n\t\t\t\tif (size !== null)\n\t\t\t\t{\n\t\t\t\t\tvalue.setSize(size);\n\t\t\t\t}\n\n\t\t\t\tvalue.setAttachment(BgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()));\n\n\t\t\t\t// todo: set overlay\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetValue(value: ?BgImageValue)\n\t{\n\t\tif (this.isNeedSetValue(value))\n\t\t{\n\t\t\t// todo: can delete prev image\n\t\t\tsuper.setValue(value);\n\n\t\t\tif (value === null)\n\t\t\t{\n\t\t\t\tthis.imgField.setValue({src: ''}, true);\n\t\t\t\t// todo: what set size and attachement?\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (value.getUrl() !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.setActive();\n\t\t\t\t}\n\n\t\t\t\tconst imgFieldValue = {\n\t\t\t\t\ttype: 'image',\n\t\t\t\t\tsrc: value.getUrl(),\n\t\t\t\t\tid: value.getFileId(),\n\t\t\t\t};\n\t\t\t\tif (value.getUrl2x())\n\t\t\t\t{\n\t\t\t\t\timgFieldValue.src2x = value.getUrl2x();\n\t\t\t\t\timgFieldValue.id2x = value.getFileId2x();\n\t\t\t\t}\n\t\t\t\tthis.imgField.setValue(imgFieldValue, true);\n\t\t\t\tthis.sizeField.setValue(value.getSize(), true);\n\t\t\t\tthis.attachmentField.setValue([value.getAttachment(true)]);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n}\n","export default function rgbaStringToRgbString(str: string): string | null\n{\n\tconst regRgba = /\\d{1,3}(\\.\\d+)?/g;\n\tconst rgba = str.match(regRgba);\n\tconst r = rgba[0] ? rgba[0] : null;\n\tconst g = rgba[1] ? rgba[1] : null;\n\tconst b = rgba[2] ? rgba[2] : null;\n\tif (r === null || g === null || b === null)\n\t{\n\t\treturn null;\n\t}\n\treturn createRgbString(r, g, b);\n}\n\nfunction createRgbString(r, g, b): string\n{\n\treturn 'rgb(' + r + ',' + g + ','+ b + ')';\n}","import {Tag, Type, Loc, Dom} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BgColor from './bg_color';\nimport Image from '../control/image/image';\nimport ColorSet from '../control/color_set/color_set';\n\nimport ColorValue from \"../color_value\";\nimport BgImageValue from '../bg_image_value';\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\nimport Tabs from '../layout/tabs/tabs';\nimport GradientValue from '../gradient_value';\nimport Primary from '../layout/primary/primary';\nimport Zeroing from '../layout/zeroing/zeroing';\nimport {defaultBgImageSize, defaultBgImageAttachment} from \"../types/color_value_options\";\nimport rgbaStringToRgbString from '../internal/rgba-string-to-rgb-string';\n\nexport default class Bg extends BgColor\n{\n\tstatic BG_URL_VAR: string = '--bg-url';\n\tstatic BG_URL_2X_VAR: string = '--bg-url-2x';\n\tstatic BG_OVERLAY_VAR: string = '--bg-overlay';\n\tstatic BG_SIZE_VAR: string = '--bg-size';\n\tstatic BG_ATTACHMENT_VAR: string = '--bg-attachment';\n\tstatic BG_IMAGE: string = 'background-image';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Bg');\n\t\tthis.styleNode = options.styleNode;\n\t\tthis.parentVariableName = this.variableName;\n\t\tthis.variableName = [\n\t\t\tthis.parentVariableName,\n\t\t\tBg.BG_URL_VAR,\n\t\t\tBg.BG_URL_2X_VAR,\n\t\t\tBg.BG_OVERLAY_VAR,\n\t\t\tBg.BG_SIZE_VAR,\n\t\t\tBg.BG_ATTACHMENT_VAR,\n\t\t\tBg.BG_IMAGE,\n\t\t];\n\t\tthis.parentClassName = this.className;\n\t\tthis.className = 'g-bg-image';\n\n\t\tthis.image = new Image(options);\n\t\tthis.image.subscribe('onChange', this.onImageChange.bind(this));\n\n\t\tthis.overlay = new ColorSet(options);\n\t\tthis.overlay.subscribe('onChange', this.onOverlayColorChange.bind(this));\n\t\tthis.overlayOpacity = new Opacity({defaultOpacity: 0.5});\n\t\tthis.overlayOpacity.subscribe('onChange', this.onOverlayOpacityChange.bind(this));\n\t\tthis.overlayPrimary = new Primary();\n\t\tthis.overlayPrimary.subscribe('onChange', this.onOverlayPrimaryChange.bind(this));\n\t\tconst overlayZeroingOptions= {};\n\t\toverlayZeroingOptions.textCode = 'LANDING_FIELD_COLOR_OVERLAY_ZEROING_TITLE_2';\n\t\tthis.overlayZeroing = new Zeroing(overlayZeroingOptions);\n\t\tthis.overlayZeroing.subscribe('onChange', this.overlayZeroingChange.bind(this));\n\n\t\tthis.imageTabs = new Tabs().appendTab(\n\t\t\t'Overlay',\n\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_OVERLAY'),\n\t\t\t[this.overlay, this.overlayPrimary, this.overlayZeroing, this.overlayOpacity],\n\t\t);\n\n\t\tthis.bigTabs = new Tabs()\n\t\t\t.setBig(true)\n\t\t\t.appendTab(\n\t\t\t\t'Color',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_COLOR'),\n\t\t\t\t[this.colorSet, this.primary, this.zeroing, this.tabs],\n\t\t\t)\n\t\t\t.appendTab(\n\t\t\t\t'Image',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_IMAGE'),\n\t\t\t\t[this.image, this.imageTabs],\n\t\t\t);\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.bigTabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tthis.overlay.unsetActive();\n\n\t\tsuper.onGradientChange(event);\n\t}\n\n\tonImageChange()\n\t{\n\t\t// todo: can drop image from b_landing_file after change\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = this.image;\n\t\tthis.image.setActive();\n\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayChange(event: BaseEvent)\n\t{\n\t\tconst overlayValue = event.getData().color;\n\t\tif (overlayValue !== null)\n\t\t{\n\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t}\n\t\tthis.overlayOpacity.setValue(overlayValue);\n\n\t\tconst imageValue = this.image.getValue();\n\t\tif (imageValue !== null)\n\t\t{\n\t\t\tthis.image.setValue(imageValue.setOverlay(overlayValue));\n\t\t\tthis.activeControl = this.image;\n\t\t\tthis.image.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t\tthis.gradient.unsetActive();\n\t\t}\n\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.modifyStyleNode(this.styleNode);\n\t}\n\n\tonOverlayColorChange(event: BaseEvent)\n\t{\n\t\tthis.overlayPrimary.unsetActive();\n\t\tthis.overlayZeroing.unsetActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\tonOverlayPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.overlay.unsetActive();\n\t\tthis.overlayZeroing.unsetActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\toverlayZeroingChange(event: BaseEvent)\n\t{\n\t\tthis.overlay.unsetActive();\n\t\tthis.overlayPrimary.unsetActive();\n\t\tthis.overlayZeroing.setActive();\n\t\tthis.onOverlayChange(event);\n\t}\n\n\tunsetActive()\n\t{\n\t\tsuper.unsetActive();\n\t\tthis.image.unsetActive();\n\t}\n\n\t/**\n\t * Set value by new format\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.setValue(value);\n\t}\n\n\tsetValue(value: {string: string} | string | null): void\n\t{\n\t\tthis.image.setValue(null);\n\t\tthis.bigTabs.showTab('Color');\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (Type.isString(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (this.parentVariableName in value && Type.isString(value[this.parentVariableName]))\n\t\t{\n\t\t\tsuper.setValue(value[this.parentVariableName]);\n\t\t}\n\t\telse if (Type.isObject(value))\n\t\t{\n\t\t\t// todo: super.setValue null?\n\t\t\tconst bgValue = new BgImageValue();\n\t\t\tif (Bg.BG_URL_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl(value[Bg.BG_URL_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_URL_2X_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl2x(value[Bg.BG_URL_2X_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_SIZE_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setSize(value[Bg.BG_SIZE_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_ATTACHMENT_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setAttachment(value[Bg.BG_ATTACHMENT_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setOverlay(new ColorValue(value[Bg.BG_OVERLAY_VAR]));\n\t\t\t}\n\t\t\tthis.image.setValue(bgValue);\n\t\t\tthis.bigTabs.showTab('Image');\n\t\t\tthis.activeControl = this.image;\n\n\t\t\tthis.imageTabs.showTab('Overlay');\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tconst overlayValue = new ColorValue(value[Bg.BG_OVERLAY_VAR]);\n\t\t\t\tthis.overlay.setValue(overlayValue);\n\t\t\t\tthis.overlayOpacity.setValue(overlayValue);\n\t\t\t\tif (value[Bg.BG_OVERLAY_VAR].startsWith('var(--primary') || value['isPrimaryBasedColor'] === true)\n\t\t\t\t{\n\t\t\t\t\tthis.overlayPrimary.setActive();\n\t\t\t\t\tthis.overlay.unsetActive();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.overlayZeroing.setActive();\n\t\t\t}\n\t\t}\n\t}\n\n\t// todo: create base value instead interface. In this case can return ALL types, color, grad, bg\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === this.image)\n\t\t\t{\n\t\t\t\tconst imageValue = this.image.getValue();\n\t\t\t\tlet overlayValue;\n\t\t\t\tlet isActive = false;\n\t\t\t\tif (this.overlay.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = this.overlay.getValue();\n\t\t\t\t\tisActive = true;\n\t\t\t\t}\n\t\t\t\tif (this.overlayPrimary.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = this.overlayPrimary.getValue();\n\t\t\t\t\tisActive = true;\n\t\t\t\t}\n\t\t\t\tif (this.overlayZeroing.isActive())\n\t\t\t\t{\n\t\t\t\t\toverlayValue = null;\n\t\t\t\t}\n\t\t\t\tif (imageValue !== null && overlayValue !== null && isActive)\n\t\t\t\t{\n\t\t\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t\t\t\timageValue.setOverlay(overlayValue);\n\t\t\t\t}\n\n\t\t\t\treturn imageValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value === null || value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\treturn [this.parentClassName];\n\t\t}\n\n\t\treturn [this.className];\n\t}\n\n\t// todo: what about fileid?\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\t// todo: not null, but what?\n\t\t\treturn {\n\t\t\t\t[this.parentVariableName]: null,\n\t\t\t\t[Bg.BG_URL_VAR]: null,\n\t\t\t\t[Bg.BG_URL_2X_VAR]: null,\n\t\t\t\t[Bg.BG_OVERLAY_VAR]: null,\n\t\t\t\t[Bg.BG_SIZE_VAR]: null,\n\t\t\t\t[Bg.BG_ATTACHMENT_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tlet color = null;\n\t\tlet image = null;\n\t\tlet image2x = null;\n\t\tlet overlay = null;\n\t\tlet size = null;\n\t\tlet attachment = null;\n\t\tconst backgroundImage = '';\n\t\tif (value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\t// todo: need change class if not a image?\n\t\t\tcolor = value.getStyleString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\timage = value.getUrl() ? `url('${value.getUrl()}')` : '';\n\t\t\timage2x = value.getUrl2x() ? `url('${value.getUrl2x()}')` : '';\n\t\t\toverlay = value.getOverlay() ? value.getOverlay().getStyleString() : 'rgba(0, 0, 0, 0)';\n\t\t\tsize = value.getSize();\n\t\t\tattachment = value.getAttachment();\n\t\t}\n\n\t\treturn {\n\t\t\t[this.parentVariableName]: color,\n\t\t\t[Bg.BG_URL_VAR]: image,\n\t\t\t[Bg.BG_URL_2X_VAR]: image2x ? image2x : image,\n\t\t\t[Bg.BG_OVERLAY_VAR]: overlay,\n\t\t\t[Bg.BG_SIZE_VAR]: size,\n\t\t\t[Bg.BG_ATTACHMENT_VAR]: attachment,\n\t\t\t[Bg.BG_IMAGE]: backgroundImage,\n\t\t};\n\t}\n\n\tmodifyStyleNode(styleNode)\n\t{\n\t\tDom.style(styleNode.getNode()[0], Bg.BG_IMAGE, '');\n\t\tthis.onChange();\n\t}\n\n\tprepareProcessorValue(processorValue, defaultValue)\n\t{\n\t\tif (defaultValue && defaultValue.hasOwnProperty(Bg.BG_IMAGE))\n\t\t{\n\t\t\tconst regUrl = /url\\(/i;\n\t\t\tconst searchUrl = defaultValue[Bg.BG_IMAGE].match(regUrl);\n\t\t\tif (searchUrl !== null)\n\t\t\t{\n\t\t\t\tprocessorValue[Bg.BG_IMAGE] = '';\n\t\t\t\tprocessorValue[Bg.BG_SIZE_VAR] = defaultBgImageSize;\n\t\t\t\tprocessorValue[Bg.BG_ATTACHMENT_VAR] = defaultBgImageAttachment;\n\t\t\t\tconst regUrl = /image-set\\(url\\(/i;\n\t\t\t\tconst searchUrl = defaultValue[Bg.BG_IMAGE].match(regUrl);\n\t\t\t\tif (searchUrl !== null)\n\t\t\t\t{\n\t\t\t\t\tconst regSearchUrl = /\"(https?:\\/)?\\/[\\S]*\"/gi;\n\t\t\t\t\tconst search = defaultValue[Bg.BG_IMAGE].match(regSearchUrl);\n\t\t\t\t\tif (search)\n\t\t\t\t\t{\n\t\t\t\t\t\tprocessorValue[Bg.BG_URL_VAR] = search[0].replaceAll('\"', '');\n\t\t\t\t\t\tif (search.length === 2)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = search[1].replaceAll('\"', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = search[0].replaceAll('\"', '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tprocessorValue[Bg.BG_URL_VAR] = defaultValue[Bg.BG_IMAGE];\n\t\t\t\t\tprocessorValue[Bg.BG_URL_2X_VAR] = defaultValue[Bg.BG_IMAGE];\n\t\t\t\t}\n\t\t\t\tconst computedStyleNode = getComputedStyle(this.styleNode.getNode()[0], ':after');\n\t\t\t\tprocessorValue[Bg.BG_OVERLAY_VAR] = computedStyleNode.backgroundColor;\n\t\t\t\tconst currentColorRgb = rgbaStringToRgbString(computedStyleNode.backgroundColor);\n\t\t\t\tconst primaryColorRgb = rgbaStringToRgbString(computedStyleNode.getPropertyValue('--primary-opacity-0'));\n\t\t\t\tif (\n\t\t\t\t\tcurrentColorRgb !== null\n\t\t\t\t\t&& primaryColorRgb !== null\n\t\t\t\t\t&& currentColorRgb === primaryColorRgb\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tprocessorValue['isPrimaryBasedColor'] = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn processorValue;\n\t}\n}\n","import Color from \"./color\";\n\nexport default class BorderColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColor');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color';\n\t\tthis.className = 'g-border-color';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorHover');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color--hover';\n\t\tthis.className = 'g-border-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nexport default class BgColorHover extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorHover');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg-hover';\n\t\tthis.className = 'g-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nimport ColorValue from '../color_value';\n\nexport default class BgColorAfter extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorAfter');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--after';\n\t\tthis.className = 'g-bg--after';\n\t\tthis.pseudoClass = ':after';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import BgColor from './bg_color';\nimport ColorValue from '../color_value';\n\nexport default class BgColorBefore extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorBefore');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--before';\n\t\tthis.className = 'g-bg--before';\n\t\tthis.pseudoClass = ':before';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import Color from './color';\n\nexport default class NavbarColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColor');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color';\n\t\tthis.className = 'u-navbar-color';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--hover';\n\t\tthis.className = 'u-navbar-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMoment extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMoment');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment';\n\t\tthis.className = 'u-navbar-color--fix-moment';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMomentHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMomentHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment--hover';\n\t\tthis.className = 'u-navbar-color--fix-moment--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color';\n\t\tthis.className = 'u-navbar-bg';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColorHover');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color--hover';\n\t\tthis.className = 'u-navbar-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorTop extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorTop');\n\t\tthis.property = 'border-top-color';\n\t\tthis.variableName = '--border-color-top';\n\t\tthis.className = 'g-border-color-top';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColor');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':before';\n\t\tthis.variableName = '--fill-first';\n\t\tthis.className = 'g-fill-first';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColorSecond extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColorSecond');\n\t\tthis.property = 'fill';\n\t\tthis.pseudoClass = ':after';\n\t\tthis.variableName = '--fill-second';\n\t\tthis.className = 'g-fill-second';\n\t}\n}","import Color from \"./color\";\nimport ColorValue from '../color_value';\n\nexport default class ButtonColor extends Color\n{\n\tstatic COLOR_CONTRAST_VAR: string = '--button-color-contrast';\n\tstatic COLOR_HOVER_VAR: string = '--button-color-hover';\n\tstatic COLOR_LIGHT_VAR: string = '--button-color-light';\n\tstatic COLOR_VAR: string = '--button-color';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ButtonColor');\n\t\tthis.property = 'background-color';\n\t\t// order is important! Base variable must be last. Hack :-/\n\t\tthis.variableName = [\n\t\t\tButtonColor.COLOR_CONTRAST_VAR,\n\t\t\tButtonColor.COLOR_HOVER_VAR,\n\t\t\tButtonColor.COLOR_LIGHT_VAR,\n\t\t\tButtonColor.COLOR_VAR,\n\t\t];\n\t\tthis.className = 'g-button-color';  //todo: ?\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {\n\t\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_HOVER_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tconst valueContrast = value.getContrast().lighten(10);\n\t\tconst valueHover = new ColorValue(value).lighten(10);\n\t\tconst valueLight = value.getLighten();\n\n\t\treturn {\n\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: valueContrast.getStyleString(),\n\t\t\t[ButtonColor.COLOR_HOVER_VAR]: valueHover.getStyleString(),\n\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: valueLight.getStyleString(),\n\t\t\t[ButtonColor.COLOR_VAR]: value.getStyleString(),\n\t\t};\n\t}\n}","import Color from './color';\n\nexport default class NavbarCollapseBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarCollapseBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-collapse-bg-color';\n\t\tthis.className = 'u-navbar-collapse-bg';\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport BaseProcessor from './processor/base_processor';\nimport Color from './processor/color';\nimport ColorHover from './processor/color_hover';\nimport Bg from './processor/bg';\nimport BorderColor from './processor/border_color';\nimport BorderColorHover from './processor/border_color_hover';\nimport BgColor from './processor/bg_color';\nimport BgColorHover from './processor/bg_color_hover';\nimport BgColorAfter from './processor/bg_color_after';\nimport BgColorBefore from './processor/bg_color_before';\nimport NavbarColor from './processor/navbar_color';\nimport NavbarColorHover from './processor/navbar_color_hover';\nimport NavbarColorFixMoment from './processor/navbar_color_fix_moment';\nimport NavbarColorFixMomentHover from './processor/navbar_color_fix_moment_hover';\nimport NavbarBgColor from './processor/navbar_bg';\nimport NavbarBgColorHover from './processor/navbar_bg_hover';\nimport BorderColorTop from './processor/border_color-top';\nimport FillColor from './processor/fill_color';\nimport FillColorSecond from './processor/fill_color_second';\nimport ButtonColor from './processor/button_color';\nimport {IColorValue} from './types/i_color_value';\nimport NavbarCollapseBgColor from './processor/navbar_collapse_bg';\n\nexport class ColorField extends BaseField\n{\n\tprocessor: BaseProcessor;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.items = ('items' in options && options.items) ? options.items : [];\n\t\tthis.postfix = (typeof options.postfix === 'string') ? options.postfix : '';\n\t\tthis.frame = (typeof options.frame === 'object') ? options.frame : null;\n\t\tconst processorOptions = {\n\t\t\tblock: options.block,\n\t\t\tstyleNode: options.styleNode,\n\t\t\tselector: options.selector,\n\t\t\tcontentRoot: this.contentRoot,\n\t\t};\n\n\t\tthis.changeHandler = (typeof options.onChange === \"function\") ? options.onChange : (() => {});\n\t\tthis.resetHandler = (typeof options.onReset === \"function\") ? options.onReset : (function () {});\n\n\t\t// todo: rename \"subtype\"\n\t\tswitch (options.subtype)\n\t\t{\n\t\t\tcase 'color':\n\t\t\t\tthis.processor = new Color(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'color-hover':\n\t\t\t\tthis.processor = new ColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg':\n\t\t\t\tthis.processor = new Bg(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color':\n\t\t\t\tthis.processor = new BgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-hover':\n\t\t\t\tthis.processor = new BgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-after':\n\t\t\t\tthis.processor = new BgColorAfter(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-before':\n\t\t\t\tthis.processor = new BgColorBefore(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color':\n\t\t\t\tthis.processor = new BorderColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-hover':\n\t\t\t\tthis.processor = new BorderColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-top':\n\t\t\t\tthis.processor = new BorderColorTop(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color':\n\t\t\t\tthis.processor = new NavbarColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-hover':\n\t\t\t\tthis.processor = new NavbarColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment':\n\t\t\t\tthis.processor = new NavbarColorFixMoment(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment-hover':\n\t\t\t\tthis.processor = new NavbarColorFixMomentHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color':\n\t\t\t\tthis.processor = new NavbarBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color-hover':\n\t\t\t\tthis.processor = new NavbarBgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-collapse-bg-color':\n\t\t\t\tthis.processor = new NavbarCollapseBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color':\n\t\t\t\tthis.processor = new FillColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color-second':\n\t\t\t\tthis.processor = new FillColorSecond(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'button-color':\n\t\t\t\tthis.processor = new ButtonColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.property = this.processor.getProperty()[this.processor.getProperty().length - 1];\n\t\tthis.processor.getClassName().forEach(\n\t\t\titem => this.items.push({name: item, value: item}),\n\t\t);\n\n\t\t// todo: what a input?\n\t\tDom.remove(this.input);\n\t\tthis.layout.classList.add(\"landing-ui-field-color\");\n\t\tDom.append(this.processor.getLayout(), this.layout);\n\n\t\tthis.processor.subscribe('onChange', this.onChange.bind(this));\n\t\tthis.processor.subscribe('onReset', this.onReset.bind(this));\n\t}\n\n\tgetInlineProperties(): [string]\n\t{\n\t\treturn this.processor.getVariableName();\n\t}\n\n\tprepareInlineProperties(props): [string]\n\t{\n\t\tprops.push('background-image');\n\t\treturn props;\n\t}\n\n\tgetComputedProperties(): [string]\n\t{\n\t\treturn this.processor.getProperty();\n\t}\n\n\tgetPseudoElement(): ?string\n\t{\n\t\treturn this.processor.getPseudoClass();\n\t}\n\n\tonChange()\n\t{\n\t\tthis.changeHandler(\n\t\t\t{\n\t\t\t\tclassName: this.processor.getClassName(),\n\t\t\t\tstyle: this.processor.getStyle(),\n\t\t\t},\n\t\t\tthis.items,\n\t\t\tthis.postfix,\n\t\t\tthis.property,\n\t\t);\n\n\t\tthis.emit('onChange');\n\t}\n\n\tonReset()\n\t{\n\t\tthis.resetHandler(this.items, this.postfix, this.property);\n\t}\n\n\tgetValue(): IColorValue\n\t{\n\t\treturn this.processor.getValue() || this.processor.getNullValue();\n\t}\n\n\tsetValue(value: {string: ?string})\n\t{\n\t\tlet processorValue = null;\n\t\t// now for multiple properties get just last value. Maybe, need object-like values\n\t\tthis.prepareInlineProperties(this.getInlineProperties()).forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(processorValue))\n\t\t\t\t{\n\t\t\t\t\tprocessorValue = {};\n\t\t\t\t}\n\t\t\t\tprocessorValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tlet defaultValue = null;\n\t\tthis.getComputedProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(defaultValue))\n\t\t\t\t{\n\t\t\t\t\tdefaultValue = {};\n\t\t\t\t}\n\t\t\t\tdefaultValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tprocessorValue = this.processor.prepareProcessorValue(processorValue, defaultValue);\n\t\tif (processorValue !== null)\n\t\t{\n\t\t\tthis.processor.setProcessorValue(processorValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.processor.setDefaultValue(defaultValue);\n\t\t\tthis.processor.defineActiveControl(this.items, this.data.styleNode);\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\t// todo: now not work with \"group select\", can use just any node from elements. If group - need forEach\n\t\tconst value = this.data.styleNode.getValue(true);\n\t\tthis.setValue(value.style);\n\t}\n}"],"names":["matcher","isRgbString","rgbString","match","matcherHex","isHex","hex","trim","matcherHsl","isHslString","hsla","hexToRgb","length","r","parseInt","g","b","rgbToHsla","rgb","max","Math","min","h","s","l","d","round","a","hexToHsl","rgbToHex","toString","hslToRgb","hsl","c","abs","x","m","hslToHex","rgbStringToHsla","matches","Text","toNumber","hslStringToHsl","hslString","isCssVar","css","parseCssVar","cssVar","full","name","cssVarWithOpacity","cssVarWithOpacity0","startsWith","opacity","newOpacity","substr","parseFloat","replace","toFixed","defaultColorValueOptions","defaultBgImageSize","defaultBgImageAttachment","defaultOverlay","defaultBgImageValueOptions","url","size","attachment","overlay","ColorValue","constructor","value","setValue","getName","getHex","getOpacity","getHsl","Type","isObject","getHsla","getCssVar","getHexOriginal","isString","cssPrimaryVarName","Dom","style","document","documentElement","setOpacity","offsetFromCorrectValue","lighten","percent","darken","saturate","desaturate","adjustHue","degree","getStyleString","fullCssVar","String","getStyleStringForOpacity","compare","color1","color2","getMedian","getContrast","k","rad","PI","sin","deltaL","getLighten","BaseProcessor","EventEmitter","options","cache","Cache","MemoryCache","property","pseudoClass","setEventNamespace","getProperty","isArray","getVariableName","variableName","isNullValue","isNull","getNullValue","getPseudoClass","getLayout","remember","buildLayout","Tag","render","getClassName","className","getValue","getStyle","setProcessorValue","processorProperty","delete","setDefaultValue","inlineProperty","unsetActive","set","onReset","emit","onChange","defineActiveControl","items","currentNode","setActiveControl","controlName","prepareProcessorValue","processorValue","defaultValue","data","BaseControl","isNeedSetValue","event","color","setActive","addClass","ACTIVE_CLASS","removeClass","isActive","hasClass","Hex","previewMode","onInput","Runtime","debounce","bind","onButtonClick","setPreviewMode","preview","Event","getInput","getButton","adjustColors","DEFAULT_COLOR","DEFAULT_BG","DEFAULT_TEXT","substring","toLowerCase","textColor","bgColor","querySelector","focus","unFocus","blur","innerText","PageObject","getRootWindow","activeElement","Spectrum","getDefaultSaturation","global","window","top","location","saturation","urlParam","URL","searchParams","get","DEFAULT_SATURATION","body","setProperty","onPickerDragStart","onPickerDragMove","onPickerDragEnd","onScroll","scrollContext","contentRoot","getPicker","getPickerPos","y","ctrlKey","metaKey","button","showPicker","target","setPickerPos","pageX","pageY","unbind","getLayoutRect","layoutRect","getBoundingClientRect","width","height","left","leftToSet","HUE_RANGE","HUE_RANGE_GRAY_THRESHOLD","HUE_RANGE_GRAY_MIDDLE","HIDE_CLASS","layoutWidth","layoutHeight","isNaN","isSpectrumValue","hidePicker","Recent","initItems","getLayoutContainer","itemsLoaded","buildItemsLayout","Backend","getInstance","action","USER_OPTION_NAME","then","result","split","forEach","item","MAX_ITEMS","push","clean","itemLayout","onItemClick","append","currentTarget","dataset","addItem","pos","indexOf","splice","unshift","saveItems","BX","userOptions","save","Colorpicker","popupId","getRandom","popupTargetContainer","hexPreview","onPopupOpenClick","subscribe","onHexChange","onSelectClick","spectrum","onSpectrumChange","recent","onRecentChange","getCancelButton","onCancelClick","getSelectButton","previously","BaseEvent","getData","getPopup","close","getPopupContent","Loc","getMessage","getHexPreviewObject","PopupManager","create","id","autoHide","bindElement","bindOptions","forceTop","forceLeft","padding","contentPadding","offsetTop","offsetLeft","content","closeByEsc","targetContainer","recentColor","show","isShown","setActivity","Primary","onClick","CSS_VAR","isPrimaryValue","regexpWoStartEnd","regexp","RegExp","regexpToString","source","matcherGradient","matcherGradientAngle","hexMatcher","matcherGradientColors","isGradientString","GradientValue","from","to","angle","DEFAULT_ANGLE","type","DEFAULT_TYPE","getAngle","getType","getFrom","getTo","parseGradientString","typeMatches","angleMatches","colorMatches","setAngle","isNumber","setType","TYPE_RADIAL","TYPE_LINEAR","fromString","value1","value2","base","ext","defaultType","gradientType","Generator","getDefaultPresets","presets","defaultPresets","preset","map","getPrimaryColorPreset","primary","lBeforeCount","ceil","floor","lAfterCount","deltaLBefore","deltaLAfter","i","ii","deltaBitrixL","deltaBitrixS","bitrixColor","BITRIX_COLOR","deltaL2","deltaS","deltaS2","getBlackAndWhitePreset","start","getGradientByColorOptions","pairs","pair","Preset","activeItem","getId","getGradientPreset","getItemLayout","getItemByName","find","isPresetValue","some","setActiveItem","itemName","setActiveValue","PresetCollection","activeId","onPresetClick","getOpenButton","toggle","onPresetChangeGlobal","addDefaultPresets","addPreset","Object","keys","getGlobalActiveId","globalActiveId","getActiveId","getDefaultPreset","getActivePreset","getPresetById","getPresetByItemValue","getTitleContainer","getPopupLayout","layouts","innerLayouts","presetId","layout","getPresetLayout","Reset","hint","UI","Hint","createInstance","popupParameters","init","ColorSet","reset","blackAndWhitePreset","onPresetItemChange","colorpicker","setPreset","getPresetContainer","getTitleLayout","getPreset","getPresetsCollection","activePreset","Opacity","defaultOpacity","Reflect","has","DEFAULT_OPACITY","pickerControl","rangeControl","arrowsUp","arrowsDown","rangeInput","onArrowClick","defaultOpacityValue","getColorLayout","setPickerPosByOpacity","onRangeControlChange","leftPos","getDefaultValue","pickerLeft","valueToSet","background","title","innerHTML","arrowName","newOpacityInputValue","opacityInputValue","Tabs","tabs","multiple","isBig","onToggle","setMultiple","setBig","big","appendTab","tab","Tab","bindEvents","prependTab","showTab","hide","getTabById","additional","head","getTitle","tabLayout","toggleClass","SHOW_CLASS","Zeroing","textCode","Color","colorSet","onColorSetChange","onOpacityChange","zeroing","onZeroingChange","onPrimaryChange","valueObj","styleNode","isUndefined","oldClass","activeControl","node","getNode","reg","found","PRIMARY_VAR","ColorHover","Gradient","ROTATE_STEP","colorpickerFrom","onColorChange","colorpickerTo","getPopupButton","onPopupOpen","getRotateButton","onRotate","getSwitchTypeButton","onSwitchType","getSwapButton","onSwap","fromValue","toValue","fromValueToSet","toValueToSet","isButtonEnable","disableButton","enableButton","DISABLE_CLASS","correctColorpickerColors","hexFrom","hexTo","colorFrom","colorTo","median","offset","getContainerLayout","unsetColorpickerActive","rotate","gradient","setColorpickerActive","BgColor","onGradientChange","setGradientPreset","onTabsToggle","gradientPreset","gradValue","onOverlayOpacityChange","isNil","gradientValue","matcherBgImage","isBgImageString","bgImage","getMatcherWithOverlay","matcherBgString","matcherGradientString","BgImageValue","getUrl","url2x","getUrl2x","fileId","getFileId","fileId2x","getFileId2x","getSize","getAttachment","parseBgString","string","matchesBg","matchesOverlay","setUrl","setUrl2x","setFileId","setFileId2x","setSize","setAttachment","setOverlay","needBool","getOverlay","endString","getSizeItemsForButtons","getAttachmentValueByBool","Image","imgField","ImageField","contextType","CONTEXT_TYPE_STYLE","compactMode","disableLink","disableAltField","allowClear","dimensions","uploadParams","block","onImageChange","sizeField","Landing","Field","Dropdown","onSizeChange","attachmentField","Checkbox","compact","onAttachmentChange","src","src2x","id2x","saveNode","selector","makeAbsoluteSelector","isSelectGroup","Utils","join","getElementIndex","image","imgValue","imgFieldValue","rgbaStringToRgbString","str","regRgba","rgba","createRgbString","Bg","parentVariableName","BG_URL_VAR","BG_URL_2X_VAR","BG_OVERLAY_VAR","BG_SIZE_VAR","BG_ATTACHMENT_VAR","BG_IMAGE","parentClassName","onOverlayColorChange","overlayOpacity","overlayPrimary","onOverlayPrimaryChange","overlayZeroingOptions","overlayZeroing","overlayZeroingChange","imageTabs","bigTabs","modifyStyleNode","onOverlayChange","overlayValue","imageValue","bgValue","image2x","backgroundImage","hasOwnProperty","regUrl","searchUrl","regSearchUrl","search","replaceAll","computedStyleNode","getComputedStyle","backgroundColor","currentColorRgb","primaryColorRgb","getPropertyValue","BorderColor","BorderColorHover","BgColorHover","BgColorAfter","opacityValue","BgColorBefore","NavbarColor","NavbarColorHover","NavbarColorFixMoment","NavbarColorFixMomentHover","NavbarBgColor","NavbarBgColorHover","BorderColorTop","FillColor","FillColorSecond","ButtonColor","COLOR_CONTRAST_VAR","COLOR_HOVER_VAR","COLOR_LIGHT_VAR","COLOR_VAR","valueContrast","valueHover","valueLight","NavbarCollapseBgColor","ColorField","BaseField","postfix","frame","processorOptions","changeHandler","resetHandler","subtype","processor","remove","input","classList","add","getInlineProperties","prepareInlineProperties","props","getComputedProperties","getPseudoElement","prop","onFrameLoad"],"mappings":"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"}