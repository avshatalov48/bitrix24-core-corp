{"version":3,"file":"color_field.bundle.js","sources":["../src/processor/base_processor.js","../src/internal/is-rgb-string.js","../src/internal/is-hex.js","../src/internal/is-hsl-string.js","../src/internal/hex-to-rgb.js","../src/internal/rgb-to-hsl.js","../src/internal/hex-to-hsl.js","../src/internal/rgb-to-hex.js","../src/internal/hsl-to-rgb.js","../src/internal/hsl-to-hex.js","../src/internal/rgb-string-to-hsl.js","../src/internal/hsl-string-to-hsl.js","../src/internal/css-var.js","../src/types/color_value_options.js","../src/color_value.js","../src/control/base_control/base_control.js","../src/control/hex/hex.js","../src/control/spectrum/spectrum.js","../src/layout/recent/recent.js","../src/control/colorpicker/colorpicker.js","../src/layout/primary/primary.js","../src/internal/regexp.js","../src/internal/is-gradient-string.js","../src/gradient_value.js","../src/layout/preset/types/preset-options.js","../src/layout/preset/generator.js","../src/layout/preset/preset.js","../src/layout/preset/preset_collection.js","../src/layout/reset/reset.js","../src/layout/zeroing/zeroing.js","../src/control/color_set/color_set.js","../src/control/opacity/opacity.js","../src/layout/tabs/tabs.js","../src/processor/color.js","../src/processor/color_hover.js","../src/control/gradient/gradient.js","../src/processor/bg_color.js","../src/internal/is-bg-image-string.js","../src/bg_image_value.js","../src/control/image/image.js","../src/processor/bg.js","../src/processor/border_color.js","../src/processor/border_color_hover.js","../src/processor/bg_color_hover.js","../src/processor/bg_color_after.js","../src/processor/bg_color_before.js","../src/processor/navbar_color.js","../src/processor/navbar_color_hover.js","../src/processor/navbar_color_fix_moment.js","../src/processor/navbar_color_fix_moment_hover.js","../src/processor/navbar_bg.js","../src/processor/navbar_bg_hover.js","../src/processor/border_color-top.js","../src/processor/fill_color.js","../src/processor/fill_color_second.js","../src/processor/button_color.js","../src/processor/navbar_collapse_bg.js","../src/color_field.js"],"sourcesContent":["import {Tag, Cache, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class BaseProcessor extends EventEmitter\n{\n\tvariableName: string | [string];\n\tclassName: string;\n\tproperty: string | [string];\n\toptions: [];\n\tpseudoClass: ?string;\n\n\tconstructor(options: {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.property = 'color';\n\t\tthis.options = options;\n\t\tthis.pseudoClass = null;\n\t}\n\n\tgetProperty(): [string]\n\t{\n\t\treturn Type.isArray(this.property)\n\t\t\t? this.property\n\t\t\t: [this.property];\n\t}\n\n\tgetVariableName(): [string]\n\t{\n\t\treturn Type.isArray(this.variableName)\n\t\t\t? this.variableName\n\t\t\t: [this.variableName];\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn value === null;\n\t}\n\n\tgetPseudoClass(): ?string\n\t{\n\t\treturn this.pseudoClass;\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`<div>Base processor</div>`;\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\treturn [this.className];\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {[this.getVariableName()]: null};\n\t\t}\n\n\t\treturn {[this.getVariableName()]: this.getValue().getStyleString()};\n\t}\n\n\t/**\n\t * Set value by new format\n\t * @param value {string: string}\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\t// Just get last css variable\n\t\tconst processorProperty = this.getVariableName()[this.getVariableName().length - 1];\n\t\tthis.setValue(value[processorProperty]);\n\t}\n\n\t/**\n\t * Set old-type value by computedStyle\n\t * @param value {string: string} | null\n\t */\n\tsetDefaultValue(value: {string: string} | null): void\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst inlineProperty = this.getProperty()[this.getProperty().length - 1];\n\t\t\tif (inlineProperty in value)\n\t\t\t{\n\t\t\t\tthis.setValue(value[inlineProperty]);\n\t\t\t\tthis.unsetActive();\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.setValue(null);\n\t}\n\n\tsetValue(value: string | {string: string} | null): void\n\t{\n\t}\n\n\tonReset()\n\t{\n\t\tthis.emit('onReset');\n\t}\n\n\tunsetActive()\n\t{\n\t}\n\n\tonChange()\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange');\n\t}\n}","export const matcher = /^rgba? ?\\((\\d{1,3})[, ]+(\\d{1,3})[, ]+(\\d{1,3})([, ]+([\\d\\.]{1,5}))?\\)$/i;\n\nexport default function isRgbString(rgbString: string): boolean\n{\n\treturn !!rgbString.match(matcher);\n}\n","export const matcherHex = /^#([\\da-f]{3}){1,2}$/i;\n\nexport default function isHex(hex: string)\n{\n\treturn !!hex.trim().match(matcherHex);\n}","export const matcherHsl = /^hsla?\\((\\d{1,3}), ?(\\d{1,3})%, ?(\\d{1,3})%(, ?([\\d .]+))?\\)/i;\n\nexport default function isHslString(hsla: string)\n{\n\treturn !!hsla.trim().match(matcherHsl);\n}","export default function hexToRgb(hex: string)\n{\n\tif (hex.length === 4)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[1]}`, 16);\n\t\tconst g = parseInt(`0x${hex[2]}${hex[2]}`, 16);\n\t\tconst b = parseInt(`0x${hex[3]}${hex[3]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\tif (hex.length === 7)\n\t{\n\t\tconst r = parseInt(`0x${hex[1]}${hex[2]}`, 16);\n\t\tconst g = parseInt(`0x${hex[3]}${hex[4]}`, 16);\n\t\tconst b = parseInt(`0x${hex[5]}${hex[6]}`, 16);\n\n\t\treturn {r, g, b};\n\t}\n\n\treturn {r: 255, g: 255, b: 255};\n}","export default function rgbToHsla(\n\trgb: {r: number, g: number, b: number, a?: number}\n): {h: number, s: number, l: number, a: number}\n{\n\tconst r = rgb.r / 255;\n\tconst g = rgb.g / 255;\n\tconst b = rgb.b / 255;\n\n\tconst max = Math.max(r, g, b);\n\tconst min = Math.min(r, g, b);\n\tlet h, s, l = (max + min) / 2;\n\t// let l = h;\n\t// let s;\n\n\tif (max === min)\n\t{\n\t\th = s = 0;\n\t}\n\telse\n\t{\n\t\tconst d = max - min;\n\t\ts = l > 0.5\n\t\t\t? d / (2 - max - min)\n\t\t\t: d / (max + min);\n\n\t\tswitch (max)\n\t\t{\n\t\t\tcase r:\n\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\tbreak;\n\t\t\tcase g:\n\t\t\t\th = (b - r) / d + 2;\n\t\t\t\tbreak;\n\t\t\tcase b:\n\t\t\t\th = (r - g) / d + 4;\n\t\t\t\tbreak;\n\t\t}\n\n\t\th *= 0.6;\n\t}\n\n\treturn {\n\t\th: Math.round(h * 100),\n\t\ts: Math.round(s * 100),\n\t\tl: Math.round(l * 100),\n\t\ta: ('a' in rgb) ? rgb.a : 1,\n\t};\n}\n\n// \tconst v = Math.max(r, g, b);\n// \tconst diff = v - Math.min(r, g, b);\n// \tconst diffc = (c) => {\n// \t\treturn (v - c) / 6 / diff + 1 / 2;\n// \t};\n//\n// \tif (diff === 0)\n// \t{\n// \t\th = 0;\n// \t\ts = 0;\n// \t}\n// \telse\n// \t{\n// \t\ts = diff / v;\n// \t\trdif = diffc(r);\n// \t\tgdif = diffc(g);\n// \t\tbdif = diffc(b);\n//\n// \t\tif (r === v)\n// \t\t{\n// \t\t\th = bdif - gdif;\n// \t\t}\n// \t\telse if (g === v)\n// \t\t{\n// \t\t\th = (1 / 3) + rdif - bdif;\n// \t\t}\n// \t\telse if (b === v)\n// \t\t{\n// \t\t\th = (2 / 3) + gdif - rdif;\n// \t\t}\n//\n// \t\tif (h < 0)\n// \t\t{\n// \t\t\th += 1;\n// \t\t}\n// \t\telse if (h > 1)\n// \t\t{\n// \t\t\th -= 1;\n// \t\t}\n// \t}\n//\n// \treturn {\n// \t\th: h * 360,\n// \t\ts: s * 100,\n// \t\tl: v * 100,\n// \t\ta: rgb.a || 1,\n// \t};\n// }","import hexToRgb from './hex-to-rgb';\nimport rgbToHsla from './rgb-to-hsl';\n\nexport default function hexToHsl(hex: string): {h: number, s: number, l: number, a: number}\n{\n\tconst rgb = hexToRgb(hex.trim());\n\n\treturn rgbToHsla(rgb);\n}","export default function rgbToHex(rgb: {r: number, g: number, b: number}): string\n{\n\tlet r = rgb.r.toString(16);\n\tlet g = rgb.g.toString(16);\n\tlet b = rgb.b.toString(16);\n\n\tif (r.length === 1)\n\t{\n\t\tr = \"0\" + r;\n\t}\n\tif (g.length === 1)\n\t{\n\t\tg = \"0\" + g;\n\t}\n\tif (b.length === 1)\n\t{\n\t\tb = \"0\" + b;\n\t}\n\n\treturn \"#\" + r + g + b;\n}","export default function hslToRgb(hsl: {h: number, s: number, l: number}): {r: number, g: number, b: number}\n{\n\t// todo: a little not equal with reverce conversion :-/\n\t// todo: f.e. hsl(73.53.50) it 166,195,60 and #a5c33c,\n\t// todo: but in reverse #a5c33c => 165,195,60\n\t// todo: because we save ColorValue in hsl can be some differences\n\tconst h = hsl.h;\n\tconst s = hsl.s / 100;\n\tconst l = hsl.l / 100;\n\n\tlet c = (1 - Math.abs(2 * l - 1)) * s;\n\tlet x = c * (1 - Math.abs((h / 60) % 2 - 1));\n\tlet m = l - c / 2;\n\tlet r = 0;\n\tlet g = 0;\n\tlet b = 0;\n\n\tif (0 <= h && h < 60)\n\t{\n\t\tr = c;\n\t\tg = x;\n\t\tb = 0;\n\t}\n\telse if (60 <= h && h < 120)\n\t{\n\t\tr = x;\n\t\tg = c;\n\t\tb = 0;\n\t}\n\telse if (120 <= h && h < 180)\n\t{\n\t\tr = 0;\n\t\tg = c;\n\t\tb = x;\n\t}\n\telse if (180 <= h && h < 240)\n\t{\n\t\tr = 0;\n\t\tg = x;\n\t\tb = c;\n\t}\n\telse if (240 <= h && h < 300)\n\t{\n\t\tr = x;\n\t\tg = 0;\n\t\tb = c;\n\t}\n\telse if (300 <= h && h < 360)\n\t{\n\t\tr = c;\n\t\tg = 0;\n\t\tb = x;\n\t}\n\tr = Math.round((r + m) * 255);\n\tg = Math.round((g + m) * 255);\n\tb = Math.round((b + m) * 255);\n\n\treturn {r: r, g: g, b: b};\n}","import rgbToHex from './rgb-to-hex';\nimport hslToRgb from './hsl-to-rgb';\n\nexport default function hslToHex(hsl: {h: number, s: number, l: number}): string\n{\n\tconst rgb = hslToRgb(hsl);\n\n\treturn rgbToHex(rgb);\n}","import {Text} from 'main.core';\nimport rgbToHsla from '../internal/rgb-to-hsl';\nimport {matcher} from './is-rgb-string';\n\nexport default function rgbStringToHsla(rgbString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = rgbString.trim().match(matcher);\n\tif (matches.length > 0)\n\t{\n\t\treturn rgbToHsla({\n\t\t\tr: Text.toNumber(matches[1]),\n\t\t\tg: Text.toNumber(matches[2]),\n\t\t\tb: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t});\n\t}\n}","import {Text} from 'main.core';\nimport {matcherHsl} from './is-hsl-string';\n\nexport default function hslStringToHsl(hslString: string): { h: number, s: number, l: number, a: number}\n{\n\tlet matches = hslString.trim().match(matcherHsl);\n\tif (matches && matches.length > 0)\n\t{\n\t\treturn {\n\t\t\th: Text.toNumber(matches[1]),\n\t\t\ts: Text.toNumber(matches[2]),\n\t\t\tl: Text.toNumber(matches[3]),\n\t\t\ta: matches[5] ? Text.toNumber(matches[5]) : 1,\n\t\t};\n\t}\n}","const matcher = /^(var\\()?((--[\\w\\d-]*?)(-opacity_([\\d_]+)?)?)\\)?$/i;\n\nexport function isCssVar(css: string): boolean\n{\n\treturn !!css.trim().match(matcher);\n}\n\ntype cssVar = {\n\tfull: string,\n\tname: string,\n\topacity: number,\n};\n\nexport function parseCssVar(css: string): ?cssVar\n{\n\tconst matches = css.trim().match(matcher);\n\tif (!!matches)\n\t{\n\t\tconst cssVar = {\n\t\t\tfull: matches[2],\n\t\t\tname: matches[3],\n\t\t};\n\n\t\tif(matches[5])\n\t\t{\n\t\t\tcssVar.opacity = +parseFloat(matches[5].replace('_', '.')).toFixed(1);\n\t\t}\n\n\t\treturn cssVar;\n\t}\n\n\treturn null;\n}\n","import ColorValue from \"../color_value\";\n\nexport type ColorValueOptions = {\n\th?: number,\n\ts?: number,\n\tl?: number,\n\ta?: number,\n};\nexport const defaultColorValueOptions: ColorValueOptions = {\n\th: 205,\n\ts: 1,\n\tl: 50,\n\ta: 1,\n};\n\nexport type GradientValueOptions = {\n\tfrom: ColorValue,\n\tto: ColorValue,\n\tangle: number,\n\ttype: 'linear' | 'radial'\n};\n\nexport type BgImageValueOptions = {\n\turl: ?string,\n\turl2x: ?string,\n\tfileId: ?number,\n\tfileId2x: ?number,\n\tsize: 'cover' | 'auto',\n\tattachment: 'scroll' | 'fixed',\n\toverlay: ?ColorValue,\n};\nexport const defaultBgImageSize = 'cover';\nexport const defaultBgImageAttachment = 'scroll';\nexport const defaultOverlay = null;\nexport const defaultBgImageValueOptions: BgImageValueOptions = {\n\turl: null,\n\tsize: defaultBgImageSize,\n\tattachment: defaultBgImageAttachment,\n\toverlay: defaultOverlay,\n};\n","import {Dom, Type} from 'main.core';\n\nimport isRgbString from './internal/is-rgb-string';\nimport isHex from './internal/is-hex';\nimport isHslString from './internal/is-hsl-string';\nimport hexToHsl from './internal/hex-to-hsl';\nimport hslToHex from './internal/hsl-to-hex';\nimport rgbStringToHsla from './internal/rgb-string-to-hsl';\nimport hslStringToHsl from './internal/hsl-string-to-hsl';\nimport {isCssVar, parseCssVar} from \"./internal/css-var\";\nimport {ColorValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nexport default class ColorValue implements IColorValue\n{\n\tvalue: ColorValueOptions;\n\t/**\n\t * For preserve differences between hsl->rgb and rgb->hsl conversions we can save hex\n\t * @type {?string}\n\t */\n\thex: ?string;\n\t/**\n\t * if set css variable value - save them in '--var-name' format\n\t * @type {?string}\n\t */\n\tcssVar: ?string;\n\n\tconstructor(value: ColorValueOptions | ColorValue | string)\n\t{\n\t\tthis.value = defaultColorValueOptions;\n\t\tthis.hex = null;\n\t\tthis.cssVar = null;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\tif (this.hex)\n\t\t{\n\t\t\treturn this.getHex() + '_' + this.getOpacity();\n\t\t}\n\t\tconst {h, s, l} = this.getHsl();\n\t\treturn `${h}-${s}-${l}-${this.getOpacity()}`;\n\t}\n\n\tsetValue(value: ColorValueOptions | ColorValue | string): ColorValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof ColorValue)\n\t\t\t{\n\t\t\t\tthis.value = value.getHsla();\n\t\t\t\tthis.cssVar = value.getCssVar();\n\t\t\t\tthis.hex = value.getHexOriginal();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value))\n\t\t{\n\t\t\tif (isHslString(value))\n\t\t\t{\n\t\t\t\tthis.value = hslStringToHsl(value);\n\t\t\t}\n\t\t\telse if (isHex(value))\n\t\t\t{\n\t\t\t\tthis.value = {...hexToHsl(value), a: defaultColorValueOptions.a};\n\t\t\t\tthis.hex = value;\n\t\t\t}\n\t\t\telse if (isRgbString(value))\n\t\t\t{\n\t\t\t\tthis.value = rgbStringToHsla(value);\n\t\t\t}\n\t\t\telse if (isCssVar(value))\n\t\t\t{\n\t\t\t\t// todo: what about opacity in primary?\n\t\t\t\tconst cssVar = parseCssVar(value);\n\t\t\t\tif (cssVar !== null)\n\t\t\t\t{\n\t\t\t\t\tthis.cssVar = cssVar.name;\n\t\t\t\t\tthis.setValue(Dom.style(document.documentElement, this.cssVar));\n\t\t\t\t\tif (cssVar.opacity)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setOpacity(cssVar.opacity);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.value.h = Math.round(this.value.h);\n\t\tthis.value.s = Math.round(this.value.s);\n\t\tthis.value.l = Math.round(this.value.l);\n\t\tthis.value.a = +this.value.a.toFixed(1);\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): ColorValue\n\t{\n\t\tthis.setValue({a: opacity});\n\n\t\treturn this;\n\t}\n\n\tlighten(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.min(this.value.l + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdarken(percent: number): ColorValue\n\t{\n\t\tthis.value.l = Math.max(this.value.l - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tsaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.min(this.value.s + percent, 100);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tdesaturate(percent: number): ColorValue\n\t{\n\t\tthis.value.s = Math.max(this.value.s - percent, 0);\n\t\tthis.hex = null;\n\n\t\treturn this;\n\t}\n\n\tadjustHue(degree: number): ColorValue\n\t{\n\t\tthis.value.h = (this.value.h + degree) % 360;\n\n\t\treturn this;\n\t}\n\n\tgetHsl(): {h: number, s: number, l: number}\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t};\n\t}\n\n\tgetHsla(): ColorValueOptions\n\t{\n\t\treturn {\n\t\t\th: this.value.h,\n\t\t\ts: this.value.s,\n\t\t\tl: this.value.l,\n\t\t\ta: this.value.a,\n\t\t};\n\t}\n\n\t/**\n\t * Return original hex-string or convert value to hex (w.o. alpha)\n\t * @returns {string}\n\t */\n\tgetHex(): string\n\t{\n\t\treturn this.hex || hslToHex(this.value);\n\t}\n\n\t/**\n\t * Return hex only if value created from hex-string\n\t */\n\tgetHexOriginal(): string\n\t{\n\t\treturn this.hex;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn this.value.a ?? defaultColorValueOptions.a;\n\t}\n\n\tgetCssVar(): ?string\n\t{\n\t\treturn this.cssVar;\n\t}\n\n\t/**\n\t * Get style string for set inline css var.\n\t * Set hsla value or primary css var with opacity in format --var-name-opacity_12_3\n\t * @returns {string}\n\t */\n\tgetStyleString(): string\n\t{\n\t\tif (this.cssVar === null)\n\t\t{\n\t\t\tif (this.hex && this.getOpacity() === defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\treturn this.hex\n\t\t\t}\n\n\t\t\tconst {h, s, l, a} = this.value;\n\n\t\t\treturn `hsla(${h}, ${s}%, ${l}%, ${a})`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tlet fullCssVar = this.cssVar;\n\t\t\tif (this.value.a !== defaultColorValueOptions.a)\n\t\t\t{\n\t\t\t\tfullCssVar = fullCssVar + '-opacity-' + String(this.value.a).replace('.', '_');\n\t\t\t}\n\t\t\treturn `var(${fullCssVar})`;\n\t\t}\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\tconst {h, s, l} = this.value;\n\n\t\treturn `linear-gradient(to right, hsla(${h}, ${s}%, ${l}%, 1) 0%, hsla(${h}, ${s}%, ${l}%, 0) 100%)`;\n\t}\n\n\tstatic compare(color1: ColorValue, color2: ColorValue): boolean\n\t{\n\t\treturn color1.getHsla().h === color2.getHsla().h\n\t\t\t&& color1.getHsla().s === color2.getHsla().s\n\t\t\t&& color1.getHsla().l === color2.getHsla().l\n\t\t\t&& color1.getHsla().a === color2.getHsla().a\n\t\t\t&& color1.cssVar === color2.cssVar;\n\t}\n\n\tstatic getMedian(color1: ColorValue, color2: ColorValue): ColorValue\n\t{\n\t\treturn new ColorValue({\n\t\t\th: (color1.getHsla().h + color2.getHsla().h) / 2,\n\t\t\ts: (color1.getHsla().s + color2.getHsla().s) / 2,\n\t\t\tl: (color1.getHsla().l + color2.getHsla().l) / 2,\n\t\t\ta: (color1.getHsla().a + color2.getHsla().a) / 2,\n\t\t});\n\t}\n\n\t/**\n\t * Special formula for contrast. Not only color invert!\n\t * @returns {string}\n\t */\n\tgetContrast(): ColorValue\n\t{\n\t\tlet k = 60;\n\t\t// math h range to 0-2pi radian and add modifier by sinus\n\t\tlet rad = this.getHsl().h * Math.PI / 180;\n\t\tk += (Math.sin(rad) * 10) + 5;\t// 10 & 5 is approximate coefficients\n\t\t// lighten by started light\n\t\tlet deltaL = k - (45 * this.getHsl().l / 100);\n\n\t\treturn new ColorValue(this.value).setValue({l: (this.getHsl().l + deltaL) % 100});\n\t}\n\n\t/**\n\t * Special formula for lighten, good for dark and light colors\n\t */\n\tgetLighten(): ColorValue\n\t{\n\t\tlet {h, s, l} = this.getHsl();\n\n\t\tif (s > 0)\n\t\t{\n\t\t\ts += (l - 50) / 100 * 60;\n\t\t\ts = Math.min(100, Math.max(0, l));\n\t\t}\n\n\t\tl += 10 + 20 * l / 100;\n\t\tl = Math.min(100, l);\n\n\t\treturn new ColorValue({h, s, l});\n\t}\n}\n","import {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Cache, Dom, Tag} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport {IColorValue} from '../../types/i_color_value';\n\nimport './css/base_control.css';\n\nexport default class BaseControl extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: ?{})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn this.buildLayout();\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-base-control\">\n\t\t\t\tBase control\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue();\n\t\t});\n\t}\n\n\tsetValue(value)\n\t{\n\t\tthis.cache.set('value', value);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', event);\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), BaseControl.ACTIVE_CLASS);\n\t}\n}\n","import {Dom, Event, Tag} from 'main.core';\nimport isHex from '../../internal/is-hex';\nimport ColorValue from \"../../color_value\";\n\nimport './css/hex.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {BaseEvent} from 'main.core.events';\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Hex extends BaseControl\n{\n\tstatic +DEFAULT_TEXT: string = '#HEX';\n\tstatic +DEFAULT_COLOR: string = '#000000';\n\tstatic +DEFAULT_BG: string = '#eeeeee';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Hex');\n\t\tthis.previewMode = false;\n\n\t\tthis.onInput = this.onInput.bind(this);\n\t\tthis.onButtonClick = this.onButtonClick.bind(this);\n\t}\n\n\tsetPreviewMode(preview: boolean)\n\t{\n\t\tthis.previewMode = !!preview;\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\t// todo: add Enter click handler\n\t\t\tEvent.bind(this.getInput(), 'input', this.onInput);\n\t\t\tEvent.bind(this.getButton(), 'click', this.onButtonClick);\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-hex\">\n\t\t\t\t${this.getInput()}\n\t\t\t\t${this.getButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetInput(): HTMLInputElement\n\t{\n\t\treturn this.cache.remember('input', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`<div class=\"landing-ui-field-color-hex-preview\"></div>`\n\t\t\t\t: Tag.render`<input type=\"text\" name=\"hexInput\" value=\"\" class=\"landing-ui-field-color-hex-input\">`;\n\t\t});\n\t}\n\n\tgetButton(): SVGElement\n\t{\n\t\treturn this.cache.remember('editButton', () => {\n\t\t\treturn this.previewMode\n\t\t\t\t? Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"9\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M7.108 0l1.588 1.604L2.486 7.8.896 6.194 7.108 0zM.006 8.49a.166.166 0 00.041.158.161.161 0 00.16.042l1.774-.478L.484 6.715.006 8.49z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`\n\t\t\t\t: Tag.render`\n\t\t\t\t\t<svg class=\"landing-ui-field-color-hex-preview-btn\" width=\"12\" height=\"9\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M4.27 8.551L.763 5.304 2.2 3.902l2.07 1.846L9.836.533l1.439 1.402z\"\n\t\t\t\t\t\t\tfill=\"#525C69\"\n\t\t\t\t\t\t\tfill-rule=\"evenodd\"/>\n\t\t\t\t\t</svg>`;\n\t\t});\n\t}\n\n\tonInput(): void\n\t{\n\t\tlet value = this.getInput().value.replace(/[^\\da-f]/gi, '');\n\t\tvalue = value.substring(0, 6);\n\t\tthis.getInput().value = '#' + value.toLowerCase();\n\n\t\tthis.onChange();\n\t}\n\n\tonButtonClick(): void\n\t{\n\t\tthis.onChange();\n\t\tthis.emit('onButtonClick', {color: this.getValue()});\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tconst color = (this.getInput().value.length === 7 && isHex(this.getInput().value))\n\t\t\t? new ColorValue(this.getInput().value)\n\t\t\t: null;\n\t\tthis.setValue(color);\n\n\t\tthis.emit('onChange', {color: color});\n\t}\n\n\tadjustColors(textColor: string, bgColor: string)\n\t{\n\t\tDom.style(this.getInput(), 'background-color', bgColor);\n\t\tDom.style(this.getInput(), 'color', textColor);\n\t\tDom.style(this.getButton().querySelector('path'), 'fill', textColor);\n\t}\n\n\tfocus(): void\n\t{\n\t\tif (!this.previewMode)\n\t\t{\n\t\t\tif (this.getValue() === null)\n\t\t\t{\n\t\t\t\tthis.getInput().value = '#';\n\t\t\t}\n\t\t\tthis.getInput().focus();\n\t\t}\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn (this.getInput().value === Hex.DEFAULT_TEXT)\n\t\t\t\t? null\n\t\t\t\t: new ColorValue(this.getInput().value);\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif (value !== null)\n\t\t{\n\t\t\tthis.adjustColors(value.getContrast().getHex(), value.getHex());\n\t\t\tthis.setActive();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.adjustColors(Hex.DEFAULT_COLOR, Hex.DEFAULT_BG);\n\t\t\tthis.unsetActive();\n\t\t}\n\n\t\tif (this.previewMode)\n\t\t{\n\t\t\tthis.getInput().innerText = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t}\n\t\telse if (PageObject.getRootWindow().document.activeElement !== this.getInput())\n\t\t{\n\t\t\tthis.getInput().value = (value !== null) ? value.getHex() : Hex.DEFAULT_TEXT;\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getInput(), Hex.ACTIVE_CLASS);\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Event, Tag, Text} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\nimport './css/spectrum.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Spectrum extends BaseControl\n{\n\tstatic DEFAULT_SATURATION: number = 100;\n\tstatic HUE_RANGE: number = 375;\n\tstatic HUE_RANGE_GRAY_THRESHOLD: number = 360;\n\tstatic HUE_RANGE_GRAY_MIDDLE: number = 367;\n\tstatic HIDE_CLASS: string = 'hidden';\n\n\t// todo: debug, del method, change calls, change css\n\tstatic getDefaultSaturation()\n\t{\n\t\tconst global = window.top.document.location.saturation;\n\t\tconst urlParam = (new URL(window.top.document.location)).searchParams.get('saturation');\n\t\tconst saturation = global || urlParam || Spectrum.DEFAULT_SATURATION;\n\n\t\twindow.top.document.body.style.setProperty('--saturation', saturation + '%');\n\n\t\treturn parseInt(saturation);\n\t}\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Spectrum');\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tthis.onScroll = this.onScroll.bind(this);\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\t\tthis.scrollContext = options.contentRoot;\n\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-spectrum\">\n\t\t\t\t${this.getPicker()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-spectrum-picker\"></div>`;\n\t\t});\n\t}\n\n\tgetPickerPos(): {x: number, y: number}\n\t{\n\t\treturn {\n\t\t\tx: Text.toNumber(Dom.style(this.getPicker(), 'left')),\n\t\t\ty: Text.toNumber(Dom.style(this.getPicker(), 'top')),\n\t\t};\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\t\tthis.onScroll();\n\t\tthis.showPicker();\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX, event.pageY);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.scrollContext, 'scroll', this.onScroll);\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\tonScroll()\n\t{\n\t\tthis.cache.delete('layoutSize');\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\theight: layoutRect.height,\n\t\t\t\ttop: layoutRect.top,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\t/**\n\t * Set picker by absolut page coords\n\t * @param x\n\t * @param y\n\t */\n\tsetPickerPos(x: number, y: number)\n\t{\n\t\tconst {width, height, top, left} = this.getLayoutRect();\n\n\t\tlet leftToSet = Math.min(Math.max((x - left), 0), width);\n\t\tleftToSet = (leftToSet > width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_THRESHOLD)\n\t\t\t? width / Spectrum.HUE_RANGE * Spectrum.HUE_RANGE_GRAY_MIDDLE\n\t\t\t: leftToSet\n\t\t;\n\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftToSet}px`,\n\t\t\ttop: `${Math.min(Math.max((y - top), 0), height)}px`,\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (Dom.hasClass(this.getPicker(), Spectrum.HIDE_CLASS))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst layoutWidth = this.getLayout().getBoundingClientRect().width;\n\t\t\tconst h = (this.getPickerPos().x / layoutWidth) * Spectrum.HUE_RANGE;\n\t\t\tconst layoutHeight = this.getLayout().getBoundingClientRect().height;\n\t\t\tconst l = (1 - this.getPickerPos().y / layoutHeight) * 100;\n\n\t\t\tif (isNaN(h) || isNaN(l))\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn new ColorValue({\n\t\t\t\th: Math.min(h, Spectrum.HUE_RANGE_GRAY_THRESHOLD),\n\t\t\t\ts: (h >= Spectrum.HUE_RANGE_GRAY_THRESHOLD) ? 0 : Spectrum.getDefaultSaturation(),\n\t\t\t\tl: l,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif ((value !== null) && Spectrum.isSpectrumValue(value))\n\t\t{\n\t\t\t// in first set value we can't match bounding client rect (layout not render). Then, use percents\n\t\t\tconst {h, s, l} = value.getHsl();\n\n\t\t\tconst left = (s === 0)\n\t\t\t\t? Spectrum.HUE_RANGE_GRAY_MIDDLE / Spectrum.HUE_RANGE * 100\n\t\t\t\t: h / Spectrum.HUE_RANGE * 100;\n\t\t\tDom.style(this.getPicker(), 'left', `${left}%`);\n\n\t\t\tconst top = 100 - l;\n\t\t\tDom.style(this.getPicker(), 'top', `${top}%`);\n\n\t\t\tthis.showPicker();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.hidePicker();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\thidePicker()\n\t{\n\t\tDom.addClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tshowPicker()\n\t{\n\t\tDom.removeClass(this.getPicker(), Spectrum.HIDE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn (this.getValue() !== null) && Spectrum.isSpectrumValue(this.getValue());\n\t}\n\n\tstatic isSpectrumValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null)\n\t\t\t&& (\n\t\t\t\tvalue.getHsl().s === Spectrum.getDefaultSaturation()\n\t\t\t\t|| value.getHsl().s === 0\n\t\t\t);\n\t}\n}\n","import {Cache, Event, Tag, Dom, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {Backend} from 'landing.backend';\n\nimport isHex from '../../internal/is-hex';\nimport './css/recent.css';\n\nexport default class Recent extends EventEmitter\n{\n\tstatic +USER_OPTION_NAME = 'color_field_recent_colors';\n\tstatic +MAX_ITEMS = 6;\n\n\tstatic items: [] = [];\n\tstatic itemsLoaded: boolean = false;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\tthis.initItems();\n\n\t\treturn this.getLayoutContainer();\n\t}\n\n\tgetLayoutContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-recent\"></div>`;\n\t\t});\n\t}\n\n\tinitItems()\n\t{\n\t\tif (Recent.itemsLoaded)\n\t\t{\n\t\t\tthis.buildItemsLayout();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBackend.getInstance()\n\t\t\t\t.action(\"Utils::getUserOption\", {name: Recent.USER_OPTION_NAME})\n\t\t\t\t.then(result => {\n\t\t\t\t\tif (result && Type.isString(result.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tRecent.items = [];\n\t\t\t\t\t\tresult.items.split(',').forEach(item => {\n\t\t\t\t\t\t\tif (isHex((item)) && Recent.items.length < Recent.MAX_ITEMS)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tRecent.items.push(item);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tRecent.itemsLoaded = true;\n\n\t\t\t\t\t\tthis.buildItemsLayout();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t// todo: what if ajax error?\n\t\t}\n\t}\n\n\tbuildItemsLayout(): Recent\n\t{\n\t\tDom.clean(this.getLayoutContainer());\n\t\tRecent.items.forEach(item => {\n\t\t\tif (isHex(item))\n\t\t\t{\n\t\t\t\tlet itemLayout = Tag.render`<div \n\t\t\t\t\tclass=\"landing-ui-field-color-recent-item\" \n\t\t\t\t\tstyle=\"background:${item}\"\n\t\t\t\t\tdata-value=\"${item}\"\n\t\t\t\t></div>`;\n\t\t\t\tEvent.bind(itemLayout, 'click', () => this.onItemClick(event));\n\t\t\t\tDom.append(itemLayout, this.getLayoutContainer());\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.emit('onChange', {hex: event.currentTarget.dataset.value});\n\t}\n\n\taddItem(hex: string): Recent\n\t{\n\t\tif (isHex(hex))\n\t\t{\n\t\t\tlet pos = Recent.items.indexOf(hex);\n\t\t\tif (pos !== -1)\n\t\t\t{\n\t\t\t\tRecent.items.splice(pos, 1);\n\t\t\t}\n\t\t\tRecent.items.unshift(hex);\n\t\t\tif (Recent.items.length > Recent.MAX_ITEMS)\n\t\t\t{\n\t\t\t\tRecent.items.splice(Recent.MAX_ITEMS);\n\t\t\t}\n\n\t\t\tthis.buildItemsLayout();\n\t\t\tthis.saveItems();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsaveItems(): Recent\n\t{\n\t\tif (Recent.items.length > 0)\n\t\t{\n\t\t\tBX.userOptions.save('landing', Recent.USER_OPTION_NAME, 'items', Recent.items);\n\t\t}\n\n\t\treturn this;\n\t}\n}","import {Event, Tag, Text, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\n\nimport Hex from '../hex/hex';\nimport ColorValue from \"../../color_value\";\nimport BaseControl from \"../base_control/base_control\";\nimport Spectrum from \"../spectrum/spectrum\";\nimport Recent from '../../layout/recent/recent';\n\nimport './css/colorpicker.css';\n\nexport default class Colorpicker extends BaseControl\n{\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Colorpicker');\n\t\tthis.popupId = 'colorpicker_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.hexPreview = new Hex();\n\t\tthis.hexPreview.setPreviewMode(true);\n\t\tEvent.bind(this.hexPreview.getLayout(), 'click', () => {\n\t\t\tthis.recent.buildItemsLayout();\n\t\t\tthis.previously = this.getValue();\n\t\t\tthis.getPopup().show();\n\t\t\tif (this.getPopup().isShown())\n\t\t\t{\n\t\t\t\tthis.hex.focus();\n\t\t\t}\n\t\t});\n\n\t\t// popup\n\t\tthis.hex = new Hex();\n\t\tthis.hex.subscribe('onChange', this.onHexChange.bind(this));\n\t\tthis.hex.subscribe('onButtonClick', this.onSelectClick.bind(this));\n\n\t\tthis.spectrum = new Spectrum(options);\n\t\tthis.spectrum.subscribe('onChange', this.onSpectrumChange.bind(this));\n\n\t\tthis.recent = new Recent();\n\t\tthis.recent.subscribe('onChange', this.onRecentChange.bind(this));\n\n\t\tEvent.bind(this.getCancelButton(), 'click', this.onCancelClick.bind(this));\n\t\tEvent.bind(this.getSelectButton(), 'click', this.onSelectClick.bind(this));\n\t\t// end popup\n\n\t\tthis.previously = this.getValue();\n\t}\n\n\tonHexChange(event: BaseEvent)\n\t{\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonSpectrumChange(event: BaseEvent)\n\t{\n\t\tthis.setValue(event.getData().color);\n\t\tthis.onChange(event);\n\t}\n\n\tonRecentChange(event: BaseEvent)\n\t{\n\t\tconst recentColor = new ColorValue(event.getData().hex);\n\t\tthis.setValue(recentColor);\n\t\tthis.onChange(new BaseEvent({data: {color: recentColor}}));\n\t}\n\n\tonCancelClick()\n\t{\n\t\tthis.setValue(this.previously);\n\t\tthis.getPopup().close();\n\t\tthis.onChange(new BaseEvent({data: {color: this.getValue()}}));\n\t}\n\n\tonSelectClick(event: ?BaseEvent)\n\t{\n\t\tconst value = (event instanceof BaseEvent) ? event.getData().color : this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tthis.recent.addItem(this.getValue().getHex());\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorpicker\">\n\t\t\t\t${this.hexPreview.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-popup-container\">\n\t\t\t\t<div class=\"landing-ui-field-color-popup-head\">\n\t\t\t\t\t${this.recent.getLayout()}\n\t\t\t\t\t${this.hex.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.spectrum.getLayout()}\n\t\t\t\t<div class=\"landing-ui-field-color-popup-footer\">\n\t\t\t\t\t${this.getSelectButton()}\n\t\t\t\t\t${this.getCancelButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetSelectButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('selectButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-primary\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_SELECT')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCancelButton(): HTMLButtonElement\n\t{\n\t\treturn this.cache.remember('cancelButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-xs ui-btn-light-border\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-BUTTON_CANCEL')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHexPreviewObject(): Hex\n\t{\n\t\treturn this.hexPreview;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-spectrum-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.hexPreview.getLayout(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 14,\n\t\t\t\twidth: 260,\n\t\t\t\toffsetTop: -37,\n\t\t\t\toffsetLeft: -180,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.spectrum.getValue();\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tthis.spectrum.setValue(value);\n\t\tthis.hex.setValue(value);\n\t\tthis.hexPreview.setValue(value);\n\n\t\tthis.setActivity(value);\n\t}\n\n\tsetActivity(value: ?ColorValue)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (this.spectrum.isActive())\n\t\t\t{\n\t\t\t\tthis.hex.unsetActive();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hex.setActive();\n\t\t\t}\n\t\t\tthis.hexPreview.setActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.hex.unsetActive();\n\t\tthis.hexPreview.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.hex.isActive() || this.hexPreview.isActive();\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Dom, Loc} from 'main.core';\n\nimport ColorValue from \"../../color_value\";\n\nimport './css/primary.css';\n\nexport default class Primary extends EventEmitter\n{\n\tstatic ACTIVE_CLASS: string = 'active';\n\tstatic CSS_VAR: string = '--primary';\n\n\t// todo: layout or control?\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Primary');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-primary\">\n\t\t\t\t\t<i class=\"landing-ui-field-color-primary-preview\"></i>\n\t\t\t\t\t<span class=\"landing-ui-field-color-primary-text\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRIMARY_TITLE')}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn new ColorValue(Primary.CSS_VAR);\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.setActive();\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n\n\tsetActive()\n\t{\n\t\tDom.addClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tunsetActive()\n\t{\n\t\tDom.removeClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), Primary.ACTIVE_CLASS);\n\t}\n\n\tisPrimaryValue(value: ColorValue): boolean\n\t{\n\t\treturn (value !== null) && (this.getValue().getCssVar() === value.getCssVar());\n\t}\n}\n","export function regexpWoStartEnd(regexp: RegExp): RegExp\n{\n\treturn new RegExp(regexpToString(regexp));\n}\n\nexport function regexpToString(regexp: RegExp): string\n{\n\treturn regexp.source.replace(/(^\\^)|(\\$$)/g, '');\n}","import {matcherHex} from \"./is-hex\";\nimport {regexpToString} from \"./regexp\";\n\nexport const matcherGradient = /^(linear|radial)-gradient\\(.*\\)$/i;\nexport const matcherGradientAngle = /^(linear|radial)-gradient\\(.*?((\\d)+deg).*?\\)$/ig;\nconst hexMatcher = regexpToString(matcherHex);\nexport const matcherGradientColors = new RegExp(\n\t'((rgba|hsla)?\\\\([\\\\d% .,]+\\\\)|transparent|' + hexMatcher + ')+', 'ig'\n);\n// todo: whooooouuuu, is so not-good\n\n// todo: add hex greaident match\n\n// todo: for tests\n// \"linear-gradient(45deg, rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"linear-gradient(45deg, #123321 0%, #543asdbd 100%)\"\n// \"linear-gradient(rgb(71, 155, 255) 0%, rgb(0, 207, 78) 100%)\"\n// \"radial-gradient(circle farthest-side, rgb(34, 148, 215), rgb(39, 82, 150))\"\n\nexport default function isGradientString(rgbString: string): boolean\n{\n\treturn !!rgbString.trim().match(matcherGradient);\n}","import {Type, Text} from 'main.core';\n\nimport {GradientValueOptions, defaultColorValueOptions} from \"./types/color_value_options\";\nimport ColorValue from \"./color_value\";\nimport {IColorValue} from './types/i_color_value';\nimport Primary from './layout/primary/primary';\n\nimport isGradientString, {\n\tmatcherGradient,\n\tmatcherGradientAngle,\n\tmatcherGradientColors,\n} from './internal/is-gradient-string';\n\nexport default class GradientValue implements IColorValue\n{\n\tstatic TYPE_RADIAL = 'radial';\n\tstatic TYPE_LINEAR = 'linear';\n\tstatic DEFAULT_ANGLE = 180;\n\tstatic DEFAULT_TYPE = 'linear';\n\n\tvalue: GradientValueOptions;\n\n\tconstructor(value: GradientValueOptions | GradientValue | string)\n\t{\n\t\tthis.value = {\n\t\t\tfrom: new ColorValue('#ffffff'),\n\t\t\tto: new ColorValue(Primary.CSS_VAR),\n\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t};\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.value.from.getName() + '_' + this.value.to.getName() + '_' + this.getAngle() + '_' + this.getType();\n\t}\n\n\t// todo: parse grad string?\n\tsetValue(value: GradientValueOptions | GradientValue | string): GradientValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.value.from = new ColorValue(value.getFrom());\n\t\t\t\tthis.value.to = new ColorValue(value.getTo());\n\t\t\t\tthis.value.angle = value.getAngle();\n\t\t\t\tthis.value.type = value.getType();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif ('from' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.from = new ColorValue(value.from);\n\t\t\t\t}\n\t\t\t\tif ('to' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.to = new ColorValue(value.to);\n\t\t\t\t}\n\t\t\t\tif ('angle' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.angle = Text.toNumber(value.angle);\n\t\t\t\t}\n\t\t\t\tif ('type' in value)\n\t\t\t\t{\n\t\t\t\t\tthis.value.type = value.type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\telse if (Type.isString(value) && isGradientString(value))\n\t\t{\n\t\t\tthis.parseGradientString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tsetOpacity(opacity: number): GradientValue\n\t{\n\t\tthis.value.from.setOpacity(opacity);\n\t\tthis.value.to.setOpacity(opacity);\n\n\t\treturn this;\n\t}\n\n\tparseGradientString(value: string): viod\n\t{\n\t\tconst typeMatches = value.trim().match(matcherGradient);\n\t\tif (!!typeMatches)\n\t\t{\n\t\t\tthis.setValue({type: typeMatches[1]});\n\t\t}\n\n\t\tconst angleMatches = value.trim().match(matcherGradientAngle);\n\t\tif (!!angleMatches)\n\t\t{\n\t\t\tthis.setValue({angle: angleMatches[2]});\n\t\t}\n\n\n\t\tconst colorMatches = value.trim().match(matcherGradientColors);\n\t\tif (colorMatches && colorMatches.length > 0)\n\t\t{\n\t\t\tthis.setValue({from: new ColorValue(colorMatches[0])});\n\t\t\tthis.setValue({to: new ColorValue(colorMatches[colorMatches.length - 1])});\n\t\t}\n\t}\n\n\tgetFrom(): ColorValue\n\t{\n\t\treturn this.value.from;\n\t}\n\n\tgetTo(): ColorValue\n\t{\n\t\treturn this.value.to;\n\t}\n\n\tgetAngle(): number\n\t{\n\t\treturn this.value.angle;\n\t}\n\n\tsetAngle(angle: number)\n\t{\n\t\tif (Type.isNumber(angle))\n\t\t{\n\t\t\tthis.value.angle = Math.min(Math.max(angle, 0), 360);\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.value.type;\n\t}\n\n\tsetType(type: string)\n\t{\n\t\tif (type === GradientValue.TYPE_RADIAL || type === GradientValue.TYPE_LINEAR)\n\t\t{\n\t\t\tthis.value.type = type;\n\t\t}\n\t\treturn this;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\treturn (this.value.from.getOpacity() + this.value.to.getOpacity()) / 2 ?? defaultColorValueOptions.a;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tconst angle = this.value.angle;\n\t\tconst type = this.value.type;\n\t\tconst fromString = this.value.from.getStyleString();\n\t\tconst toString = this.value.to.getStyleString();\n\n\t\treturn type === 'linear'\n\t\t\t? `linear-gradient(${angle}deg, ${fromString} 0%, ${toString} 100%)`\n\t\t\t: `radial-gradient(circle farthest-side at 50% 50%, ${fromString} 0%, ${toString} 100%)`;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\treturn `radial-gradient(at top left, ${this.value.from.getHex()}, transparent)`\n\t\t\t+ `, radial-gradient(at bottom left, ${this.value.to.getHex()}, transparent)`\n\t}\n\n\tstatic compare(value1: GradientValue, value2: GradientValue, full:boolean = true): boolean\n\t{\n\t\tconst base = (\n\t\t\t\tColorValue.compare(value1.getFrom(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getTo(), value2.getTo())\n\t\t\t) || (\n\t\t\t\tColorValue.compare(value1.getTo(), value2.getFrom())\n\t\t\t\t&& ColorValue.compare(value1.getFrom(), value2.getTo())\n\t\t\t);\n\t\tconst ext = full\n\t\t\t? (value1.getAngle() === value2.getAngle() && value1.getType() === value2.getType())\n\t\t\t: true;\n\n\t\treturn  base && ext;\n\t}\n}\n","import ColorValue from '../../../color_value';\nimport GradientValue from '../../../gradient_value';\n\nexport type PresetOptions = {\n\tid?: string,\n\ttype?: 'color' | 'gradient',\n\titems: [ColorValue | GradientValue],\n};\n\nexport const defaultType = 'color';\nexport const gradientType = 'gradient';","import {Cache, Dom} from 'main.core';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, gradientType} from './types/preset-options';\nimport hexToHsl from '../../internal/hex-to-hsl';\n\nexport default class Generator\n{\n\tstatic BITRIX_COLOR: string = '#2fc6f6';\n\n\tstatic cache = new Cache.MemoryCache();\n\tstatic defaultPresets: [] = [\n\t\t{\n\t\t\tid: 'agency',\n\t\t\titems: [\n\t\t\t\t'#ff6366', '#40191a', '#803233', '#bf4b4d', '#e65a5c', '#ffc1c2',\n\t\t\t\t'#363643', '#57dca3', '#ee76ba', '#ffa864', '#eaeaec', '#fadbdc',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'accounting',\n\t\t\titems: [\n\t\t\t\t'#a5c33c', '#384215', '#6f8228', '#8fa834', '#b0cf40', '#dae6ae',\n\t\t\t\t'#4c4c4c', '#5d84e6', '#cd506b', '#fe6466', '#dfdfdf', '#e9f0cf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'app',\n\t\t\titems: [\n\t\t\t\t'#4fd2c2', '#1f524c', '#379187', '#46b8aa', '#54dece', '#c8f1ec',\n\t\t\t\t'#6639b6', '#e81c62', '#9a69ca', '#6279d8', '#ffc337', '#e9faf8',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'architecture',\n\t\t\titems: [\n\t\t\t\t'#c94645', '#4a1919', '#8a2f2f', '#b03c3c', '#d64949', '#eec3c3',\n\t\t\t\t'#363643', '#446d90', '#a13773', '#c98145', '#eaeaec', '#f9e8e7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'business',\n\t\t\titems: [\n\t\t\t\t'#3949a0', '#232c61', '#313e87', '#3e4fad', '#556ced', '#d8d7dc',\n\t\t\t\t'#14122c', '#1d1937', '#a03949', '#2f295a', '#c87014', '#f4f4f5',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'charity',\n\t\t\titems: [\n\t\t\t\t'#f5f219', '#f58419', '#f5cc19', '#a8e32a', '#f9f76a', '#fcfbb6',\n\t\t\t\t'#000000', '#262e37', '#74797f', '#e569b1', '#edeef0', '#fefedf',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'construction',\n\t\t\titems: [\n\t\t\t\t'#f7b70b', '#382a02', '#785905', '#b88907', '#dea509', '#fdf1d1',\n\t\t\t\t'#111111', '#a3a3a3', '#f7410b', '#f70b4b', '#d6dde9', '#fef9ea',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'consulting',\n\t\t\titems: [\n\t\t\t\t'#21a79b', '#38afa5', '#14665f', '#1c8c83', '#30f2e2', '#a9ddd9',\n\t\t\t\t'#ec4672', '#58d400', '#f0ac00', '#2d6faf', '#2da721', '#e6f5f4',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'corporate',\n\t\t\titems: [\n\t\t\t\t'#6ab8ee', '#31556e', '#4e86ad', '#5fa3d4', '#70c1fa', '#d2e9f8',\n\t\t\t\t'#36e2c0', '#ffaa3c', '#ee6a76', '#ffa468', '#5feb99', '#ebf4fb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'courses',\n\t\t\titems: [\n\t\t\t\t'#6bda95', '#2c593d', '#4b9969', '#5ebf83', '#70e69d', '#c2f0d3',\n\t\t\t\t'#31556e', '#ff947d', '#738ed3', '#f791ab', '#ffb67d', '#e2f8eb',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'event',\n\t\t\titems: [\n\t\t\t\t'#f73859', '#380d14', '#781c2b', '#b82a42', '#de334f', '#fdbbc6',\n\t\t\t\t'#151726', '#ffb553', '#30d59b', '#b265e0', '#edeef0', '#ffeaed',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'gym',\n\t\t\titems: [\n\t\t\t\t'#6b7de0', '#2f3661', '#4d5aa1', '#5f6fc7', '#7284ed', '#e4e8fa',\n\t\t\t\t'#333333', '#ffd367', '#a37fe8', '#e06b7d', '#6dc1e0', '#f4f6fd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'lawyer',\n\t\t\titems: [\n\t\t\t\t'#e74c3c', '#69231b', '#a8382c', '#cf4536', '#f55240', '#f9d0cb',\n\t\t\t\t'#4e4353', '#5a505e', '#e7863c', '#38a27f', '#e2e1e3', '#fdeeec',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'photography',\n\t\t\titems: [\n\t\t\t\t'#f7a700', '#382600', '#785200', '#b87d00', '#de9800', '#fde8ba',\n\t\t\t\t'#333333', '#0b5aa0', '#e93d18', '#06c4ed', '#3672a8', '#fff6e3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'restaurant',\n\t\t\titems: [\n\t\t\t\t'#e6125d', '#660829', '#a60d43', '#cc1052', '#f21361', '#facfde',\n\t\t\t\t'#0eb88e', '#00946f', '#e04292', '#9b12e6', '#bfde00', '#fef2f6',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'shipping',\n\t\t\titems: [\n\t\t\t\t'#ff0000', '#400000', '#800000', '#bf0000', '#e60000', '#ffb4b4',\n\t\t\t\t'#333333', '#ff822a', '#d63986', '#00ac6b', '#ffb800', '#fff3f3',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'spa',\n\t\t\titems: [\n\t\t\t\t'#9dba04', '#313b01', '#667a02', '#86a103', '#a6c704', '#e4ecb9',\n\t\t\t\t'#ba7c04', '#cf54bb', '#049dba', '#1d7094', '#eead2f', '#f2f6dd',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'travel',\n\t\t\titems: [\n\t\t\t\t'#ee4136', '#6e1f19', '#ad3128', '#d43c31', '#fa4639', '#fef1f0',\n\t\t\t\t'#31353e', '#3e434d', '#ee8036', '#428abc', '#eaebec', '#c3c4c7',\n\t\t\t],\n\t\t},\n\t\t{\n\t\t\tid: 'wedding',\n\t\t\titems: [\n\t\t\t\t'#d65779', '#572431', '#963e55', '#bd4d6b', '#e35d81', '#f7dfe5',\n\t\t\t\t'#af58a7', '#6bc34b', '#ec8c60', '#50a098', '#57b9d6', '#fdf4f6',\n\t\t\t],\n\t\t},\n\t];\n\n\tstatic getDefaultPresets(): PresetOptions[]\n\t{\n\t\treturn Generator.cache.remember('default', () => {\n\t\t\tconst presets = [];\n\t\t\tGenerator.defaultPresets.forEach(preset => {\n\t\t\t\tpresets.push({\n\t\t\t\t\tid: preset.id,\n\t\t\t\t\ttype: 'color',\n\t\t\t\t\titems: preset.items.map(item => new ColorValue(hexToHsl(item))),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn presets;\n\t\t});\n\t}\n\n\tstatic getPrimaryColorPreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('primary', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'defaultPrimary',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst primary = new ColorValue(Dom.style(document.documentElement, '--primary').trim());\n\t\t\tpreset.items.push(new ColorValue(primary));\n\n\t\t\tif (primary.getHsl().s <= 10)\n\t\t\t{\n\t\t\t\tconst lBeforeCount = (primary.getHsl().l > 50)\n\t\t\t\t\t? Math.ceil(primary.getHsl().l / 100 * 5)\n\t\t\t\t\t: Math.floor(primary.getHsl().l / 100 * 5);\n\t\t\t\tconst lAfterCount = 5 - lBeforeCount;\n\t\t\t\tconst deltaLBefore = primary.getHsl().l / (lBeforeCount + 1);\n\t\t\t\tconst deltaLAfter = (100 - primary.getHsl().l) / (lAfterCount + 1);\n\t\t\t\tfor (let i = 1; i <= lBeforeCount; i++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).darken(deltaLBefore * i));\n\t\t\t\t}\n\t\t\t\tfor (let ii = 1; ii <= lAfterCount; ii++)\n\t\t\t\t{\n\t\t\t\t\tpreset.items.push(new ColorValue(primary).lighten(deltaLAfter * ii));\n\t\t\t\t}\n\n\t\t\t\tconst deltaBitrixL = 15;\n\t\t\t\tconst deltaBitrixS = 15;\n\t\t\t\tconst bitrixColor = new ColorValue(Generator.BITRIX_COLOR);\n\t\t\t\tpreset.items[6] = new ColorValue(bitrixColor);\n\n\t\t\t\tpreset.items[7] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tpreset.items[8] = new ColorValue(bitrixColor.darken(deltaBitrixL).saturate(deltaBitrixS));\n\t\t\t\tbitrixColor.lighten(deltaBitrixL * 2).desaturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[9] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tpreset.items[10] = new ColorValue(bitrixColor.lighten(deltaBitrixL).desaturate(deltaBitrixS));\n\t\t\t\tbitrixColor.darken(deltaBitrixL * 2).saturate(deltaBitrixS * 2);\n\n\t\t\t\tpreset.items[11] = new ColorValue(bitrixColor).adjustHue(180);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst deltaL = (90 - primary.getHsl().l) / 3;\n\t\t\t\tconst deltaL2 = (primary.getHsl().l - 10) / 3;\n\t\t\t\tconst deltaS = (90 - primary.getHsl().s) / 3;\n\t\t\t\tconst deltaS2 = (primary.getHsl().s - 10) / 3;\n\n\t\t\t\tpreset.items[1] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[2] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tpreset.items[3] = new ColorValue(primary.darken(deltaL2).saturate(deltaS));\n\t\t\t\tprimary.lighten(deltaL2 * 3).desaturate(deltaS * 3);\n\n\t\t\t\tpreset.items[4] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[5] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tpreset.items[11] = new ColorValue(primary.desaturate(deltaS2).lighten(deltaL));\n\t\t\t\tprimary.saturate(deltaS2 * 3).darken(deltaL * 3);\n\n\t\t\t\tpreset.items[7] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[8] = new ColorValue(primary.adjustHue(-80));\n\t\t\t\tpreset.items[9] = new ColorValue(primary.adjustHue(180));\n\t\t\t\tpreset.items[6] = new ColorValue(primary.adjustHue(40));\n\t\t\t\tpreset.items[10] = new ColorValue(primary.adjustHue(40));\n\t\t\t}\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getBlackAndWhitePreset(): PresetOptions\n\t{\n\t\treturn this.cache.remember('blackAndWhite', () => {\n\t\t\tconst preset = {\n\t\t\t\tid: 'blackAndWhite',\n\t\t\t\titems: [],\n\t\t\t};\n\t\t\tconst start = new ColorValue('#ffffff');\n\n\t\t\tpreset.items.push(new ColorValue(start));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.66)));\n\t\t\tpreset.items.push(new ColorValue(start.darken(16.7)));\n\n\t\t\treturn preset;\n\t\t});\n\t}\n\n\tstatic getGradientByColorOptions(options: PresetOptions): PresetOptions\n\t{\n\t\tconst items = [];\n\t\tconst pairs = [\n\t\t\t[1, 2],\n\t\t\t[1, 4],\n\t\t\t[5, 12],\n\t\t\t[1, 8],\n\t\t\t[8, 9],\n\t\t\t[1, 9],\n\t\t\t[10, 7],\n\t\t\t[7, 11],\n\t\t];\n\t\tpairs.forEach(pair => {\n\t\t\titems.push(new GradientValue({\n\t\t\t\tfrom: new ColorValue(options.items[pair[0] - 1]),\n\t\t\t\tto: new ColorValue(options.items[pair[1] - 1]),\n\t\t\t\tangle: GradientValue.DEFAULT_ANGLE,\n\t\t\t\ttype: GradientValue.DEFAULT_TYPE,\n\t\t\t}));\n\t\t});\n\n\t\treturn {\n\t\t\ttype: gradientType,\n\t\t\titems: items,\n\t\t};\n\t}\n}\n","import {Tag, Dom, Event, Type, Cache} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport {PresetOptions, defaultType, gradientType} from './types/preset-options';\nimport Generator from './generator';\n\nimport './css/preset.css';\n\nexport default class Preset extends EventEmitter\n{\n\tid: string;\n\ttype: 'color' | 'gradient';\n\titems: [ColorValue | GradientValue];\n\tactiveItem: string | IColorValue | null;\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options: PresetOptions)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Preset');\n\n\t\tthis.id = options.id;\n\t\tthis.type = options.type || defaultType;\n\t\tthis.items = options.items;\n\t\tthis.activeItem = null;\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetGradientPreset(): Preset\n\t{\n\t\tconst options = (this.type === gradientType)\n\t\t\t? {type: gradientType, items: this.items}\n\t\t\t: Generator.getGradientByColorOptions({items: this.items});\n\n\t\treturn new Preset(options);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-preset\">\n\t\t\t\t\t${this.items.map((item) => {\n\t\t\t\t\t\treturn this.getItemLayout(item.getName());\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetItemLayout(name: string): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(name, () => {\n\t\t\tconst color = this.getItemByName(name);\n\t\t\tconst style = Type.isString(color) ? color : color.getStyleString();\n\t\t\tconst item = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"landing-ui-field-color-preset-item\"\n\t\t\t\t\tstyle=\"background: ${style}\"\n\t\t\t\t\tdata-name=\"${name}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t\tEvent.bind(item, 'click', this.onItemClick.bind(this));\n\n\t\t\treturn item;\n\t\t});\n\t}\n\n\tgetItemByName(name: string): string | IColorValue | null\n\t{\n\t\treturn this.items.find(item => name === item.getName()) || null;\n\t}\n\n\tisPresetValue(value: ColorValue | GradientValue | null): boolean\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn this.items.some(item => {\n\t\t\tif (item instanceof ColorValue && value instanceof ColorValue)\n\t\t\t{\n\t\t\t\treturn ColorValue.compare(item, value);\n\t\t\t}\n\t\t\telse if (item instanceof GradientValue && value instanceof GradientValue)\n\t\t\t{\n\t\t\t\treturn GradientValue.compare(item, value, false);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tthis.setActiveItem(event.currentTarget.dataset.name);\n\n\t\tlet value = null;\n\t\tif (this.activeItem !== null)\n\t\t{\n\t\t\tvalue = this.activeItem instanceof GradientValue\n\t\t\t\t? new GradientValue(this.activeItem)\n\t\t\t\t: new ColorValue(this.activeItem);\n\t\t}\n\n\t\tthis.emit('onChange', {color: value});\n\t}\n\n\tsetActiveItem(name: string)\n\t{\n\t\tthis.activeItem = this.getItemByName(name);\n\n\t\tthis.items.forEach((item) => {\n\t\t\tconst itemName = item.getName();\n\t\t\tif (name === itemName)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(this.getItemLayout(itemName), Preset.ACTIVE_CLASS);\n\t\t\t}\n\t\t});\n\t}\n\n\tsetActiveValue(value: ColorValue | GradientValue | null)\n\t{\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value instanceof GradientValue)\n\t\t\t{\n\t\t\t\tthis.setActiveItem(\n\t\t\t\t\tnew GradientValue(value)\n\t\t\t\t\t\t.setAngle(GradientValue.DEFAULT_ANGLE)\n\t\t\t\t\t\t.setType(GradientValue.DEFAULT_TYPE)\n\t\t\t\t\t\t.getName()\n\t\t\t\t);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.setActiveItem(value.getName());\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.items.forEach(item => {\n\t\t\tDom.removeClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.items.some(item => {\n\t\t\treturn Dom.hasClass(this.getItemLayout(item.getName()), Preset.ACTIVE_CLASS);\n\t\t});\n\t}\n}","import {Tag, Text, Dom, Event, Type, Cache, Loc} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {Popup, PopupManager} from 'main.popup';\n\nimport ColorValue from '../../color_value';\nimport GradientValue from '../../gradient_value';\nimport Generator from \"./generator\";\nimport './css/preset_collection.css';\nimport {PresetOptions} from \"./types/preset-options\";\nimport Preset from \"./preset\";\n\nexport default class PresetCollection extends EventEmitter\n{\n\tstatic activeId: string = null;\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\tpresets: {\n\t\t[id: string]: PresetOptions\n\t};\n\n\tstatic ACTIVE_CLASS: string = 'active';\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.PresetCollection');\n\t\tthis.popupId = 'presets-popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\t\tthis.presets = {};\n\n\t\tthis.onPresetClick = this.onPresetClick.bind(this);\n\t\tEvent.bind(this.getOpenButton(), 'click', () => {\n\t\t\tthis.getPopup().toggle();\n\t\t});\n\t}\n\n\taddDefaultPresets()\n\t{\n\t\tthis.addPreset(Generator.getPrimaryColorPreset());\n\t\tGenerator.getDefaultPresets().map((item) => {\n\t\t\tthis.addPreset(item);\n\t\t});\n\t}\n\n\taddPreset(options: PresetOptions)\n\t{\n\t\tthis.cache.delete('popupLayout');\n\t\tif (!Object.keys(this.presets).length || !(options.id in this.presets))\n\t\t{\n\t\t\tthis.presets[options.id] = options;\n\t\t}\n\t}\n\n\tgetActivePreset(): ?Preset\n\t{\n\t\treturn this.getActiveId() ? this.getPresetById(this.getActiveId()) : null;\n\t}\n\n\tgetDefaultPreset(): ?Preset\n\t{\n\t\treturn Object.keys(this.presets).length\n\t\t\t? this.getPresetById(Object.keys(this.presets)[0])\n\t\t\t: null;\n\t}\n\n\tgetActiveId(): number | string | null\n\t{\n\t\treturn PresetCollection.activeId;\n\t}\n\n\tgetPresetById(id: number | string): ?Preset\n\t{\n\t\tif (id in this.presets)\n\t\t{\n\t\t\treturn this.cache.remember(id, () => new Preset(this.presets[id]));\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tgetPresetByItemValue(value: ColorValue | GradientValue | null): ?Preset\n\t{\n\t\tif (value === null)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (let id in this.presets)\n\t\t{\n\t\t\tif (this.getPresetById(id) && this.getPresetById(id).isPresetValue(value))\n\t\t\t{\n\t\t\t\treturn this.getPresetById(id);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-left\">\n\t\t\t\t\t\t<span class=\"landing-ui-field-color-presets-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_TITLE')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-field-color-presets-right\">${this.getOpenButton()}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOpenButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('openButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-presets-open\">\n\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE')}\n\t\t\t</span>`;\n\t\t});\n\t}\n\n\tgetTitleContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleContainer', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-presets-left');\n\t\t});\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\t// todo: bind to event target? or need button\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'presets-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getOpenButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\twidth: 280,\n\t\t\t\toffsetLeft: -200,\n\t\t\t\tcontent: this.getPopupLayout(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupLayout', () => {\n\t\t\tconst layouts = Tag.render`<div class=\"landing-ui-field-color-presets-popup\">\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-title\">\n\t\t\t\t\t${Loc.getMessage('LANDING_FIELD_COLOR-PRESETS_MORE_COLORS')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-presets-popup-inner\"></div>\n\t\t\t</div>`;\n\t\t\tconst innerLayouts = layouts.querySelector('.landing-ui-field-color-presets-popup-inner');\n\t\t\tfor (const presetId in this.presets)\n\t\t\t{\n\t\t\t\tconst layout = this.getPresetLayout(presetId);\n\t\t\t\tif (presetId === this.getActiveId())\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(layout, PresetCollection.ACTIVE_CLASS);\n\t\t\t\t}\n\t\t\t\tEvent.bind(layout, 'click', this.onPresetClick);\n\t\t\t\tDom.append(layout, innerLayouts);\n\t\t\t}\n\n\t\t\treturn layouts;\n\t\t});\n\t}\n\n\tgetPresetLayout(presetId: string | number): HTMLDivElement\n\t{\n\t\treturn this.cache.remember(presetId + 'layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-presets-preset\" data-id=\"${presetId}\">\n\t\t\t\t\t${\n\t\t\t\t\t\tthis.presets[presetId].items.map((item) => {\n\t\t\t\t\t\t\treturn Tag.render`<div\n\t\t\t\t\t\t\t\tclass=\"landing-ui-field-color-presets-preset-item\"\n\t\t\t\t\t\t\t\tstyle=\"background: ${Type.isString(item) ? item : item.getStyleString()}\"\n\t\t\t\t\t\t\t></div>`;\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonPresetClick(event: MouseEvent)\n\t{\n\t\tthis.getPopup().close();\n\t\tthis.setActiveItem(event.currentTarget.dataset.id);\n\t\tthis.emit('onChange', {preset: this.getActivePreset()});\n\t}\n\n\tsetActiveItem(presetId: string)\n\t{\n\t\tPresetCollection.activeId = presetId;\n\t\tfor (const id in this.presets)\n\t\t{\n\t\t\tDom.removeClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\tif (id === presetId)\n\t\t\t{\n\t\t\t\tDom.addClass(this.getPresetLayout(id), PresetCollection.ACTIVE_CLASS);\n\t\t\t}\n\t\t}\n\t}\n\n\tunsetActive()\n\t{\n\t\tfor (const presetId in this.presets)\n\t\t{\n\t\t\tDom.removeClass(this.getPresetLayout(presetId), PresetCollection.ACTIVE_CLASS);\n\t\t}\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event, Loc, Text} from 'main.core';\n\nimport './css/reset.css';\n\nexport default class Reset extends EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Reset');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\n\t\tconst hint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\ttargetContainer: options.contentRoot,\n\t\t\t\tpadding: 0,\n\t\t\t}\n\t\t});\n\t\thint.init(this.getLayout());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-reset-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-reset\"\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('LANDING_FIELD_COLOR-RESET_HINT')}\"\n\t\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onReset');\n\t}\n}\n","import {EventEmitter} from 'main.core.events';\nimport {Cache, Tag, Event} from 'main.core';\n\nimport './css/zeroing.css';\n\nexport default class Zeroing extends EventEmitter\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Transparent');\n\t\tEvent.bind(this.getLayout(), 'click', () => this.onClick());\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-preset-item landing-ui-field-color-transparent\"></div>`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.emit('onChange', {color: null});\n\t}\n}\n","import {Dom, Tag} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BaseControl from '../base_control/base_control';\nimport ColorValue from \"../../color_value\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\nimport PresetCollection from '../../layout/preset/preset_collection';\nimport Reset from '../../layout/reset/reset';\nimport Zeroing from '../../layout/zeroing/zeroing';\n\nimport Generator from '../../layout/preset/generator';\nimport './css/color_set.css';\n\nexport default class ColorSet extends BaseControl\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.ColorSet');\n\n\t\tthis.reset = new Reset(options);\n\t\tthis.reset.subscribe('onReset', () => {\n\t\t\tthis.emit('onReset');\n\t\t});\n\n\t\tthis.zeroing = new Zeroing();\n\t\tthis.zeroing.subscribe('onChange', (event) => {\n\t\t\tthis.unsetActive();\n\t\t\tthis.setValue(event.getData().color);\n\t\t\t// todo: need reload computed props and reinit\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.blackAndWhitePreset = new Preset(Generator.getBlackAndWhitePreset());\n\t\tthis.blackAndWhitePreset.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tthis.colorpicker = new Colorpicker(options);\n\t\tthis.colorpicker.subscribe('onChange', (event) => {\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tthis.presets = new PresetCollection(options);\n\t\tthis.presets.subscribe('onChange', (event) => {\n\t\t\tthis.setPreset(event.getData().preset);\n\t\t});\n\t\tthis.presets.addDefaultPresets();\n\t\tconst preset = this.presets.getActivePreset() || this.presets.getDefaultPreset();\n\t\tif (preset)\n\t\t{\n\t\t\tthis.setPreset(preset);\n\t\t\t// todo: what if not preset?\n\t\t}\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tDom.append(this.reset.getLayout(), this.presets.getTitleContainer());\n\t\tDom.prepend(this.zeroing.getLayout(), this.blackAndWhitePreset.getLayout());\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-colorset\">\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-top\">\n\t\t\t\t\t${this.presets.getLayout()}\n\t\t\t\t</div>\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-colorset-bottom\">\n\t\t\t\t\t${this.blackAndWhitePreset.getLayout()}\n\t\t\t\t\t${this.colorpicker.getLayout()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn this.getLayout().querySelector('.landing-ui-field-color-colorset-title');\n\t\t});\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-colorset-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.unsetActive();\n\t\tif (this.getValue() !== null && this.preset.isPresetValue(this.getValue()))\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.preset.setActiveValue(this.getValue());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.colorpicker.setValue(this.getValue());\n\t\t}\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.blackAndWhitePreset.unsetActive();\n\t\t\tthis.onPresetItemChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\n\t\tthis.emit('onPresetChange', {preset: preset});\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tonPresetItemChange(event: BaseEvent)\n\t{\n\t\tthis.colorpicker.setValue(event.getData().color);\n\t\tthis.colorpicker.unsetActive();\n\t\tthis.onChange(event);\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.set('value', event.getData().color);\n\t\tthis.emit('onChange', event);\n\t}\n\n\tgetValue(): ?ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\treturn this.colorpicker.getValue();\n\t\t});\n\t}\n\n\tsetValue(value: ?ColorValue)\n\t{\n\t\tsuper.setValue(value);\n\t\tthis.colorpicker.setValue(value);\n\n\t\tconst activePreset =\n\t\t\tthis.presets.getActiveId()\n\t\t\t\t? this.presets.getPresetById(this.presets.getActiveId())\n\t\t\t\t: this.presets.getPresetByItemValue(value);\n\t\tif (activePreset !== null)\n\t\t{\n\t\t\tthis.setPreset(activePreset);\n\t\t\tthis.presets.setActiveItem(activePreset.getId());\n\t\t}\n\t\tif (value !== null && this.blackAndWhitePreset.isPresetValue(value))\n\t\t{\n\t\t\tthis.unsetActive();\n\t\t\tthis.blackAndWhitePreset.setActiveValue(value);\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.blackAndWhitePreset.unsetActive();\n\t\tthis.colorpicker.unsetActive();\n\t}\n\n\tisActive(): boolean\n\t{\n\t\treturn this.preset.isActive() || this.blackAndWhitePreset.isActive() || this.colorpicker.isActive();\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Event, Tag, Text} from 'main.core';\n\nimport {IColorValue} from '../../types/i_color_value';\nimport ColorValue from \"../../color_value\";\nimport './css/opacity.css';\nimport BaseControl from \"../base_control/base_control\";\nimport {PageObject} from 'landing.pageobject';\n\nexport default class Opacity extends BaseControl\n{\n\tstatic +DEFAULT_COLOR: string = '#cccccc';\n\tstatic +PICKER_WIDTH: string = '#cccccc';\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Opacity');\n\n\t\tthis.document = PageObject.getRootWindow().document;\n\n\t\tthis.onPickerDragStart = this.onPickerDragStart.bind(this);\n\t\tthis.onPickerDragMove = this.onPickerDragMove.bind(this);\n\t\tthis.onPickerDragEnd = this.onPickerDragEnd.bind(this);\n\t\tEvent.bind(this.getLayout(), 'mousedown', this.onPickerDragStart);\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-opacity\">\n\t\t\t\t${this.getPicker()}\n\t\t\t\t${this.getColorLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonPickerDragStart(event: MouseEvent)\n\t{\n\t\tif (event.ctrlKey || event.metaKey || event.button)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tEvent.bind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.bind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.addClass(this.document.body, 'landing-ui-field-color-draggable');\n\n\t\tthis.onPickerDragMove(event);\n\t}\n\n\tonPickerDragMove(event: MouseEvent)\n\t{\n\t\tif (event.target === this.getPicker())\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.setPickerPos(event.pageX);\n\t\tthis.onChange();\n\t}\n\n\tonPickerDragEnd()\n\t{\n\t\tEvent.unbind(this.document, 'mousemove', this.onPickerDragMove);\n\t\tEvent.unbind(this.document, 'mouseup', this.onPickerDragEnd);\n\n\t\tDom.removeClass(this.document.body, 'landing-ui-field-color-draggable');\n\t}\n\n\t/**\n\t * Set picker by absolute page coords\n\t * @param x\n\t */\n\tsetPickerPos(x: number)\n\t{\n\t\tconst leftPos = Math.max(Math.min((x - this.getLayoutRect().left), this.getLayoutRect().width), 0);\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${leftPos}px`,\n\t\t});\n\t}\n\n\tgetLayoutRect(): {}\n\t{\n\t\treturn this.cache.remember('layoutSize', () => {\n\t\t\tconst layoutRect = this.getLayout().getBoundingClientRect();\n\t\t\treturn {\n\t\t\t\twidth: layoutRect.width,\n\t\t\t\tleft: layoutRect.left,\n\t\t\t};\n\t\t});\n\t}\n\n\tgetColorLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('colorLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-color\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetPicker(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('picker', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item\">\n\t\t\t\t\t\t<div class=\"landing-ui-field-color-opacity-picker-item-circle\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>`;\n\t\t});\n\t}\n\n\tgetDefaultValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('default', () => {\n\t\t\treturn new ColorValue(Opacity.DEFAULT_COLOR);\n\t\t});\n\t}\n\n\tgetValue(): ColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst pickerLeft = Text.toNumber(Dom.style(this.getPicker(), 'left'));\n\t\t\tconst layoutWidth = Text.toNumber(this.getLayout().getBoundingClientRect().width);\n\n\t\t\treturn this.getDefaultValue().setOpacity((1 - pickerLeft / layoutWidth));\n\t\t});\n\t}\n\n\tsetValue(value: ?IColorValue)\n\t{\n\t\tconst valueToSet = (value !== null) ? value : this.getDefaultValue();\n\t\tsuper.setValue(valueToSet);\n\n\t\tDom.style(this.getColorLayout(), {background: valueToSet.getStyleStringForOpacity()});\n\t\tDom.style(this.getPicker(), {\n\t\t\tleft: `${100 - (valueToSet.getOpacity() * 100)}%`,\n\t\t});\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.cache.delete('value');\n\t\tthis.emit('onChange', {color: this.getValue()});\n\t}\n}\n","import {Cache, Dom, Event, Tag, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\n\nimport BaseControl from '../../control/base_control/base_control';\nimport './css/tabs.css';\n\nexport default class Tabs extends EventEmitter\n{\n\ttabs: Tab[];\n\tmultiple: boolean;\n\tisBig: boolean;\n\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.tabs = [];\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.multiple = true;\n\t\tthis.isBig = false;\n\n\t\tthis.onToggle = this.onToggle.bind(this);\n\t}\n\n\tsetMultiple(multiple: boolean): Tabs\n\t{\n\t\tthis.multiple = multiple;\n\n\t\treturn this;\n\t}\n\n\tsetBig(big: boolean): Tabs\n\t{\n\t\tthis.isBig = big;\n\t\tthis.multiple = false;\n\n\t\treturn this;\n\t}\n\n\tappendTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) ? items : [items],\n\t\t});\n\t\tthis.tabs.push(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tprependTab(id: string, title: string, items: BaseControl | Tab | [BaseControl | Tab]): Tabs\n\t{\n\t\tconst tab = new Tab({\n\t\t\tid: id,\n\t\t\ttitle: title,\n\t\t\titems: Type.isArray(items) || [items],\n\t\t});\n\t\tthis.tabs.unshift(tab);\n\t\tthis.bindEvents(tab);\n\t\tthis.cache.delete('layout');\n\n\t\treturn this;\n\t}\n\n\tbindEvents(tab)\n\t{\n\t\ttab.subscribe('onToggle', this.onToggle);\n\t\ttab.subscribe('onShow', this.onToggle);\n\t\ttab.subscribe('onHide', this.onToggle);\n\t}\n\n\tonToggle(event: BaseEvent)\n\t{\n\t\tthis.emit('onToggle', event);\n\t}\n\n\tshowTab(id): Tabs\n\t{\n\t\tif (!this.multiple)\n\t\t{\n\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\ttab.hide();\n\t\t\t});\n\t\t}\n\n\t\tconst tab = this.getTabById(id);\n\t\tif (tab)\n\t\t{\n\t\t\ttab.show();\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetTabById(id: string): Tab\n\t{\n\t\treturn this.tabs.find((tab) => {\n\t\t\treturn tab.id === id;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\tconst additional = this.isBig ? ' landing-ui-field-color-tabs--big' : '';\n\t\t\tconst layout = Tag.render`<div class=\"landing-ui-field-color-tabs${additional}\"></div>`;\n\n\t\t\tif (this.isBig)\n\t\t\t{\n\t\t\t\tconst head = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-head landing-ui-field-color-tabs-head--big\"></div>\n\t\t\t\t`;\n\t\t\t\tconst content = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-color-tabs-content landing-ui-field-color-tabs-content--big\"></div>\n\t\t\t\t`;\n\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tDom.append(tab.getTitle(), head);\n\t\t\t\t\tDom.append(tab.getLayout(), content);\n\t\t\t\t});\n\n\t\t\t\tDom.append(head, layout);\n\t\t\t\tDom.append(content, layout);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\t\tconst tabLayout = Tag.render`<div class=\"landing-ui-field-color-tabs-tab\">\n\t\t\t\t\t\t${tab.getTitle()}${tab.getLayout()}\n\t\t\t\t\t</div>`;\n\t\t\t\t\tDom.append(tabLayout, layout);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// events\n\t\t\tthis.tabs.forEach(tab => {\n\t\t\t\tEvent.bind(tab.getTitle(), 'click', () => {\n\t\t\t\t\tif (!this.multiple)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.tabs.forEach((tab) => {\n\t\t\t\t\t\t\ttab.hide();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttab.toggle();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn layout;\n\t\t});\n\t}\n}\n\nexport type TabOptions = {\n\tid: string,\n\ttitle: string,\n\titems: BaseControl[]\n}\n\nexport class Tab extends EventEmitter\n{\n\tid: string;\n\ttitle: string;\n\titems: BaseControl[];\n\n\tstatic SHOW_CLASS: string = 'show';\n\n\tconstructor(options: TabOptions)\n\t{\n\t\tsuper();\n\n\t\tthis.id = options.id;\n\t\tthis.title = options.title;\n\t\tthis.items = options.items;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.id;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler\">\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-icon\"></span>\n\t\t\t\t\t<span class=\"landing-ui-field-color-tabs-tab-toggler-name\">${this.title}</span>\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-tabs-tab-content\">\n\t\t\t\t\t${this.items.map(item => item.getLayout())}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\ttoggle(): Tab\n\t{\n\t\tDom.toggleClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.toggleClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onToggle', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\tshow(): Tab\n\t{\n\t\tDom.addClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.addClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onShow', {tab: this.title});\n\n\t\treturn this;\n\t}\n\n\thide(): Tab\n\t{\n\t\tDom.removeClass(this.getLayout(), Tab.SHOW_CLASS);\n\t\tDom.removeClass(this.getTitle(), Tab.SHOW_CLASS);\n\t\tthis.emit('onHide', {tab: this.title});\n\n\t\treturn this;\n\t}\n}\n","import {Tag, Loc} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\n\nimport BaseProcessor from './base_processor';\nimport ColorSet from \"../control/color_set/color_set\";\nimport Opacity from \"../control/opacity/opacity\";\nimport Tabs from '../layout/tabs/tabs';\nimport Primary from '../layout/primary/primary';\n\nimport ColorValue from \"../color_value\";\nimport {IColorValue} from '../types/i_color_value';\n\nexport default class Color extends BaseProcessor\n{\n\tstatic PRIMARY_VAR: string = 'var(--primary)';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Color');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color';\n\t\tthis.className = 'g-color';\n\n\t\tthis.colorSet = new ColorSet(options);\n\t\tthis.colorSet.subscribe('onChange', this.onColorSetChange.bind(this));\n\t\tthis.colorSet.subscribe('onReset', this.onReset.bind(this));\n\n\t\tthis.opacity = new Opacity();\n\t\tthis.opacity.subscribe('onChange', this.onOpacityChange.bind(this));\n\n\t\tthis.primary = new Primary();\n\t\tthis.primary.subscribe('onChange', this.onPrimaryChange.bind(this));\n\n\t\tthis.tabs = new Tabs().appendTab('Opacity', Loc.getMessage('LANDING_FIELD_COLOR-TAB_OPACITY'), this.opacity);\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\t// todo: check different browsers\n\t\treturn (\n\t\t\tvalue === null\n\t\t\t|| value === 'none'\n\t\t\t|| value === 'rgba(0, 0, 0, 0)'\n\t\t);\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.colorSet.getLayout()}\n\t\t\t\t${this.primary.getLayout()}\n\t\t\t\t${this.tabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.primary.unsetActive();\n\n\t\tconst color = event.getData().color;\n\t\tif (color !== null)\n\t\t{\n\t\t\tcolor.setOpacity(this.opacity.getValue().getOpacity());\n\t\t\tthis.opacity.setValue(color);\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonPrimaryChange(event: BaseEvent)\n\t{\n\t\tthis.colorSet.setValue(event.getData().color);\n\t\tthis.onColorSetChange(event);\n\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.setActive();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tconst valueObj = (value !== null) ? new ColorValue(value) : null;\n\n\t\tthis.colorSet.setValue(valueObj);\n\t\tthis.opacity.setValue(valueObj);\n\n\t\t// todo: what about opacity in primary?\n\t\tif (this.primary.isPrimaryValue(valueObj))\n\t\t{\n\t\t\tthis.primary.setActive();\n\t\t\tthis.colorSet.unsetActive();\n\t\t}\n\n\t\tif (value !== null && valueObj.getOpacity() < 1)\n\t\t{\n\t\t\tthis.tabs.showTab('Opacity');\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst value = this.primary.isActive() ? this.primary.getValue() : this.colorSet.getValue();\n\n\t\t\treturn (value === null)\n\t\t\t\t? null\n\t\t\t\t: value.setOpacity(this.opacity.getValue().getOpacity());\n\t\t});\n\t}\n}\n","import Color from './color';\n\nexport default class ColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--color-hover';\n\t\tthis.className = 'g-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import {Event, Tag, Text, Dom, Loc} from 'main.core';\nimport {Popup, PopupManager} from 'main.popup';\nimport {BaseEvent} from \"main.core.events\";\nimport BaseControl from \"../base_control/base_control\";\nimport Colorpicker from \"../colorpicker/colorpicker\";\nimport Preset from '../../layout/preset/preset';\n\nimport './css/gradient.css';\nimport GradientValue from \"../../gradient_value\";\nimport ColorValue from '../../color_value';\n\nexport default class Gradient extends BaseControl\n{\n\tstatic DISABLE_CLASS = 'disable';\n\n\tpopupId: string;\n\tpopupTargetContainer: ?HTMLElement;\n\n\tpreset: ?Preset;\n\tcolorpickerFrom: Colorpicker;\n\tcolorpickerTo: Colorpicker;\n\n\t+ROTATE_STEP = 45;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Gradient');\n\t\tthis.popupId = 'gradient_popup_' + Text.getRandom();\n\t\tthis.popupTargetContainer = options.contentRoot;\n\n\t\tthis.colorpickerFrom = new Colorpicker(options);\n\t\tthis.colorpickerFrom.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(event.getData().color, null);\n\t\t});\n\n\t\tthis.colorpickerTo = new Colorpicker(options);\n\t\tthis.colorpickerTo.subscribe('onChange', (event) => {\n\t\t\tthis.onColorChange(null, event.getData().color);\n\t\t});\n\n\t\tEvent.bind(this.getPopupButton(), 'click', this.onPopupOpen.bind(this));\n\t\tEvent.bind(this.getRotateButton(), 'click', this.onRotate.bind(this));\n\t\tEvent.bind(this.getSwitchTypeButton(), 'click', this.onSwitchType.bind(this));\n\t\tEvent.bind(this.getSwapButton(), 'click', this.onSwap.bind(this));\n\n\t\tthis.preset = null;\n\t}\n\n\tonColorChange(fromValue: ?ColorValue, toValue: ?ColorValue)\n\t{\n\t\tif (fromValue === null && toValue === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst valueToSet = this.getValue() || new GradientValue();\n\t\tconst fromValueToSet = fromValue || valueToSet.getFrom() || (new GradientValue()).getFrom();\n\t\tconst toValueToSet = toValue || valueToSet.getTo() || (new GradientValue()).getTo();\n\t\tvalueToSet.setValue({\n\t\t\tfrom: fromValueToSet,\n\t\t\tto: toValueToSet,\n\t\t});\n\n\t\tthis.setValue(valueToSet);\n\t\tthis.preset.unsetActive();\n\t\tthis.onChange();\n\t}\n\n\tonPopupOpen()\n\t{\n\t\tthis.getPopup().toggle();\n\t}\n\n\tonRotate(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tangle: ((value.getAngle() + this.ROTATE_STEP) % 360),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwitchType(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_RADIAL});\n\t\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvalue.setValue({type: GradientValue.TYPE_LINEAR});\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t}\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tonSwap(event: MouseEvent)\n\t{\n\t\t// todo: not set colorpicker active\n\t\tif (!Gradient.isButtonEnable(event.target))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tvalue.setValue({\n\t\t\t\tto: value.getFrom(),\n\t\t\t\tfrom: value.getTo(),\n\t\t\t});\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange();\n\t\t}\n\t\tthis.getPopup().close();\n\t}\n\n\tstatic disableButton(button: HTMLDivElement)\n\t{\n\t\tDom.addClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic enableButton(button: HTMLDivElement)\n\t{\n\t\tDom.removeClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tstatic isButtonEnable(button: HTMLDivElement)\n\t{\n\t\treturn !Dom.hasClass(button, Gradient.DISABLE_CLASS);\n\t}\n\n\tcorrectColorpickerColors()\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value !== null)\n\t\t{\n\t\t\tconst angle = value.getAngle();\n\t\t\tconst hexFrom = this.colorpickerFrom.getHexPreviewObject();\n\t\t\tconst hexTo = this.colorpickerTo.getHexPreviewObject();\n\t\t\tconst colorFrom = value.getFrom();\n\t\t\tconst colorTo = value.getTo();\n\t\t\tif (value.getType() === GradientValue.TYPE_LINEAR)\n\t\t\t{\n\t\t\t\tif (angle === 270 || angle === 90)\n\t\t\t\t{\n\t\t\t\t\tconst median = ColorValue.getMedian(colorFrom, colorTo).getContrast().getHex();\n\t\t\t\t\thexFrom.adjustColors(median, 'transparent');\n\t\t\t\t\thexTo.adjustColors(median, 'transparent');\n\t\t\t\t}\n\t\t\t\telse if (angle >= 135 && angle <= 225)\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\t\thexTo.adjustColors(colorFrom.getContrast().getHex(), 'transparent');\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\thexFrom.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t\thexTo.adjustColors(colorTo.getContrast().getHex(), 'transparent');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\treturn this.cache.remember('popup', () => {\n\t\t\treturn PopupManager.create({\n\t\t\t\tid: this.popupId,\n\t\t\t\tclassName: 'landing-ui-field-color-gradient-preset-popup',\n\t\t\t\tautoHide: true,\n\t\t\t\tbindElement: this.getPopupButton(),\n\t\t\t\tbindOptions: {\n\t\t\t\t\tforceTop: true,\n\t\t\t\t\tforceLeft: true,\n\t\t\t\t},\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: {offset: -5},\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 7,\n\t\t\t\tcontent: this.getPopupContent(),\n\t\t\t\tcloseByEsc: true,\n\t\t\t\ttargetContainer: this.popupTargetContainer,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetPopupContent(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-preset-popup-container\">\n\t\t\t\t\t${this.getRotateButton()}\n\t\t\t\t\t${this.getSwapButton()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\tif (this.preset)\n\t\t{\n\t\t\tDom.clean(this.getPresetContainer());\n\t\t\tDom.append(this.preset.getLayout(), this.getPresetContainer());\n\t\t}\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-gradient\">\n\t\t\t\t${this.getPresetContainer()}\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-container\">\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-from\">${this.colorpickerFrom.getLayout()}</div>\n\t\t\t\t\t${this.getPopupButton()}\n\t\t\t\t\t<div class=\"landing-ui-field-color-gradient-to\">${this.colorpickerTo.getLayout()}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-field-color-gradient-switch-type-container\">\n\t\t\t\t\t${this.getSwitchTypeButton()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContainerLayout(): HTMLDivElement\n\t{\n\t\t// todo: do better after change vyorstka\n\t\treturn this.getLayout().querySelector('.landing-ui-field-color-gradient-container');\n\t}\n\n\tgetPresetContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('presetContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-color-gradient-preset-container\"></div>`;\n\t\t});\n\t}\n\n\tgetPopupButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('popupButton', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-field-color-gradient-open-popup\"></span>`;\n\t\t});\n\t}\n\n\tgetSwitchTypeButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('switchTypeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-switch-type\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWITCH_TYPE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetRotateButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('rotateButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-rotate\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_ROTATE')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tgetSwapButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('swapButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span\n\t\t\t\t\tclass=\"landing-ui-field-color-gradient-swap\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_SWAP')}\"\n\t\t\t\t></span>`;\n\t\t});\n\t}\n\n\tsetPreset(preset: Preset)\n\t{\n\t\tthis.preset = preset;\n\t\tthis.preset.subscribe('onChange', (event) => {\n\t\t\tthis.setValue(event.getData().color);\n\t\t\tthis.unsetColorpickerActive();\n\t\t\tthis.onChange(event);\n\t\t});\n\n\t\tDom.clean(this.getPresetContainer());\n\t\tDom.append(preset.getLayout(), this.getPresetContainer());\n\t}\n\n\tgetPreset(): ?Preset\n\t{\n\t\treturn this.preset;\n\t}\n\n\tgetValue(): ?GradientValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (\n\t\t\t\tthis.colorpickerFrom.getValue() === null\n\t\t\t\t|| this.colorpickerTo.getValue() === null\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet rotate = this.getRotateButton().dataset.rotate;\n\t\t\trotate = rotate ? Text.toNumber(rotate) : 0;\n\t\t\tconst type = this.getSwitchTypeButton().dataset.type || GradientValue.TYPE_LINEAR;\n\n\t\t\treturn new GradientValue({\n\t\t\t\tfrom: this.colorpickerFrom.getValue(),\n\t\t\t\tto: this.colorpickerTo.getValue(),\n\t\t\t\tangle: rotate,\n\t\t\t\ttype: type,\n\t\t\t});\n\t\t});\n\t}\n\n\tsetValue(value: ?GradientValue)\n\t{\n\t\tsuper.setValue(value);\n\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.colorpickerFrom.setValue(null);\n\t\t\tthis.colorpickerTo.setValue(null);\n\n\t\t\tthis.unsetActive();\n\n\t\t\tDom.style(this.getContainerLayout(), 'background', (new GradientValue).getStyleString());\n\n\t\t\tGradient.disableButton(this.getRotateButton());\n\t\t\tGradient.disableButton(this.getSwitchTypeButton());\n\t\t\tGradient.disableButton(this.getSwapButton());\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// todo: how set default type and rotation?\n\t\t\tthis.colorpickerFrom.setValue(value.getFrom());\n\t\t\tthis.colorpickerTo.setValue(value.getTo());\n\t\t\tthis.correctColorpickerColors();\n\n\t\t\tthis.getRotateButton().dataset.rotate = value.getAngle();\n\t\t\tthis.getSwitchTypeButton().dataset.type = value.getType();\n\n\t\t\tDom.style(this.getRotateButton(), 'transform', `rotate(${value.getAngle()}deg)`);\n\t\t\tDom.style(this.getContainerLayout(), 'background', this.getValue().getStyleString());\n\n\t\t\tGradient.enableButton(this.getSwitchTypeButton());\n\t\t\tGradient.enableButton(this.getSwapButton());\n\t\t\tif (value.getType() === GradientValue.TYPE_RADIAL)\n\t\t\t{\n\t\t\t\tGradient.disableButton(this.getRotateButton())\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_LINEAR');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tGradient.enableButton(this.getRotateButton());\n\t\t\t\tthis.getSwitchTypeButton().innerText = Loc.getMessage('LANDING_FIELD_COLOR-GRADIENT_DO_RADIAL');\n\t\t\t}\n\n\t\t\tthis.setActive();\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\tthis.emit('onChange', {gradient: this.getValue()});\n\t}\n\n\tsetActive(): void\n\t{\n\t\tconst value = this.getValue();\n\t\tif (this.preset.isPresetValue(value))\n\t\t{\n\t\t\tthis.preset.setActiveValue(value);\n\t\t\tthis.unsetColorpickerActive();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.preset.unsetActive();\n\t\t\tthis.setColorpickerActive();\n\t\t}\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tthis.preset.unsetActive();\n\t\tthis.unsetColorpickerActive();\n\t}\n\n\tsetColorpickerActive(): void\n\t{\n\t\tDom.addClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n\n\tunsetColorpickerActive(): void\n\t{\n\t\tthis.colorpickerFrom.unsetActive();\n\t\tthis.colorpickerTo.unsetActive();\n\t\tDom.removeClass(this.getContainerLayout(), Gradient.ACTIVE_CLASS);\n\t}\n}\n","import {Type, Loc} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport isHex from '../internal/is-hex';\nimport isRgbString from '../internal/is-rgb-string';\nimport isHslString from '../internal/is-hsl-string';\nimport isGradientString from '../internal/is-gradient-string';\nimport {isCssVar} from '../internal/css-var';\n\nimport Color from \"./color\";\nimport Gradient from \"../control/gradient/gradient\";\nimport Preset from '../layout/preset/preset';\n\nimport GradientValue from \"../gradient_value\";\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\n\nexport default class BgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColor');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg';\n\t\tthis.className = 'g-bg';\n\n\t\tthis.activeControl = null;\n\n\t\tthis.gradient = new Gradient(options);\n\t\tthis.gradient.subscribe('onChange', this.onGradientChange.bind(this));\n\t\tthis.tabs.prependTab('Gradient', Loc.getMessage('LANDING_FIELD_COLOR-TAB_GRADIENT'), this.gradient);\n\n\t\tthis.setGradientPreset(this.colorSet.getPreset());\n\t\tthis.colorSet.subscribe('onPresetChange', (event) => {\n\t\t\tthis.setGradientPreset(event.getData().preset);\n\t\t});\n\n\t\tthis.tabs.subscribe('onToggle', this.onTabsToggle.bind(this));\n\t}\n\n\tisNullValue(value: ?string): boolean\n\t{\n\t\treturn (\n\t\t\tvalue === null\n\t\t\t|| value === 'none'\n\t\t\t|| value === 'rgba(0, 0, 0, 0)'\n\t\t);\n\t}\n\n\tsetGradientPreset(preset: Preset)\n\t{\n\t\tconst gradientPreset = preset.getGradientPreset();\n\t\tthis.gradient.setPreset(gradientPreset);\n\t\tgradientPreset.subscribe('onChange', () => {\n\t\t\tthis.activeControl = this.gradient;\n\t\t\tthis.onChange();\n\t\t});\n\n\t\tconst value = this.getValue();\n\t\tif (value !== null && value instanceof GradientValue)\n\t\t{\n\t\t\tconsole.log(\"bg grad value\", value);\n\t\t\tif (this.gradient.getPreset().isPresetValue(value))\n\t\t\t{\n\t\t\t\tthis.colorSet.getPreset().unsetActive();\n\t\t\t\t// todo: unset active color preset\n\t\t\t\tthis.gradient.getPreset().setActiveValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.colorSet;\n\t\tthis.gradient.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.activeControl = this.gradient;\n\t\tthis.colorSet.unsetActive();\n\n\t\tconst gradValue = event.getData().gradient;\n\t\tif (gradValue !== null)\n\t\t{\n\t\t\tthis.opacity.setValue(\n\t\t\t\tgradValue.setOpacity(this.opacity.getValue().getOpacity()),\n\t\t\t);\n\t\t}\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tonTabsToggle()\n\t{\n\t\tthis.gradient.getPopup().close();\n\t}\n\n\tunsetActive()\n\t{\n\t\tthis.colorSet.unsetActive();\n\t\tthis.gradient.unsetActive();\n\t\tthis.primary.unsetActive();\n\t}\n\n\tsetValue(value: ?string): void\n\t{\n\t\tthis.colorSet.setValue(null);\t// todo: need? what set default?\n\t\tthis.gradient.setValue(null);\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = null;\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\t// todo: set NULL for gradient or opacity?\n\t\t}\n\t\telse if (\n\t\t\tisRgbString(value)\n\t\t\t|| isHex(value)\n\t\t\t|| isHslString(value)\n\t\t\t|| isCssVar(value)\n\t\t)\n\t\t{\n\t\t\tsuper.setValue(value);\n\n\t\t\tthis.activeControl = this.colorSet;\n\t\t}\n\t\telse if (isGradientString(value))\n\t\t{\n\t\t\tconst gradientValue = new GradientValue(value);\n\t\t\tthis.gradient.setValue(gradientValue);\n\t\t\tthis.opacity.setValue(gradientValue);\n\n\t\t\tthis.tabs.showTab('Gradient');\n\t\t\tif (gradientValue.getOpacity() < 1)\n\t\t\t{\n\t\t\t\tthis.tabs.showTab('Opacity');\n\t\t\t}\n\n\t\t\tthis.activeControl = this.gradient;\n\t\t\t// todo: set default value for colorset (from preset?) and unset active for them\n\t\t}\n\t}\n\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse if (this.activeControl === this.gradient)\n\t\t\t{\n\t\t\t\tconst gradValue = this.gradient.getValue();\n\t\t\t\treturn (gradValue === null)\n\t\t\t\t\t? gradValue\n\t\t\t\t\t: gradValue.setOpacity(this.opacity.getValue().getOpacity());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n}\n","import {matcherGradient} from './is-gradient-string';\nimport {regexpToString} from './regexp';\n\nexport const matcherBgImage = /url\\(['\"]?([^ '\"]*)['\"]?\\)([\\w \\/]*)/i;\n\nexport default function isBgImageString(bgImage: string)\n{\n\tif (!!bgImage.trim().match(matcherBgImage))\n\t{\n\t\treturn true;\n\t}\n\n\treturn !!bgImage.trim().match(getMatcherWithOverlay());\n}\n\nfunction getMatcherWithOverlay(): RegExp\n{\n\tconst matcherBgString = regexpToString(matcherBgImage);\n\tconst matcherGradientString = regexpToString(matcherGradient);\n\treturn new RegExp(`^${matcherGradientString},${matcherBgString}`);\n}\n\n","import {Type, Loc} from 'main.core';\n\nimport {\n\tBgImageValueOptions,\n\tdefaultBgImageValueOptions,\n\tdefaultBgImageSize,\n\tdefaultBgImageAttachment,\n} from \"./types/color_value_options\";\nimport {IColorValue} from './types/i_color_value';\n\nimport isBgImageString, {matcherBgImage} from './internal/is-bg-image-string';\nimport {matcherGradient, matcherGradientColors} from './internal/is-gradient-string';\nimport {regexpWoStartEnd} from './internal/regexp';\n\nimport ColorValue from './color_value';\n\nexport default class BgImageValue implements IColorValue\n{\n\tvalue: BgImageValueOptions;\n\n\tconstructor(value: BgImageValueOptions | BgImageValue | string)\n\t{\n\t\t// todo: add 2x, file ids\n\t\tthis.value = defaultBgImageValueOptions;\n\t\tthis.setValue(value);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn `\n\t\t\t${this.value.url.replace(/[^\\w\\d]/g, '')}_${this.value.size}_${this.value.attachment}\n\t\t`;\n\t}\n\n\tsetValue(value: BgImageValueOptions | BgImageValue | string): BgImageValue\n\t{\n\t\tif (Type.isObject(value))\n\t\t{\n\t\t\tif (value instanceof BgImageValue)\n\t\t\t{\n\t\t\t\t// todo: add 2x and file IDs\n\t\t\t\tthis.value.url = value.getUrl();\n\t\t\t\tthis.value.url2x = value.getUrl2x();\n\t\t\t\tthis.value.fileId = value.getFileId();\n\t\t\t\tthis.value.fileId2x = value.getFileId2x();\n\t\t\t\tthis.value.size = value.getSize();\n\t\t\t\tthis.value.attachment = value.getAttachment();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.value = {...this.value, ...value};\n\t\t\t}\n\t\t}\n\n\t\tif (Type.isString(value) && isBgImageString(value))\n\t\t{\n\t\t\tthis.parseBgString(value);\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tparseBgString(string: string): void\n\t{\n\t\t// todo: check matcher for 2x\n\t\tconst options = defaultBgImageValueOptions;\n\n\t\tconst matchesBg = string.trim().match(regexpWoStartEnd(matcherBgImage));\n\t\tif (!!matchesBg)\n\t\t{\n\t\t\toptions.url = matchesBg[1];\n\n\t\t\toptions.size = matchesBg[2].indexOf('auto') === -1\n\t\t\t\t? defaultBgImageSize\n\t\t\t\t: 'auto'\n\t\t\t;\n\n\t\t\toptions.attachment = matchesBg[2].indexOf('fixed') === -1\n\t\t\t\t? defaultBgImageAttachment\n\t\t\t\t: 'fixed'\n\t\t\t;\n\t\t}\n\n\t\tconst matchesOverlay = string.trim().match(regexpWoStartEnd(matcherGradientColors));\n\t\tif(!!string.trim().match(regexpWoStartEnd(matcherGradient)) && !!matchesOverlay)\n\t\t{\n\t\t\toptions.overlay = new ColorValue(matchesOverlay[0]);\n\t\t}\n\n\t\tthis.setValue(options);\n\t}\n\n\tsetOpacity(opacity: number): BgImageValue\n\t{\n\t\t// todo: what for image?\n\n\t\treturn this;\n\t}\n\n\tsetUrl(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url: value});\n\t\treturn this;\n\t}\n\n\tsetUrl2x(value: string): BgImageValue\n\t{\n\t\tthis.setValue({url2x: value});\n\t\treturn this;\n\t}\n\n\tsetFileId(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId: value});\n\t\treturn this;\n\t}\n\n\tsetFileId2x(value: number): BgImageValue\n\t{\n\t\tthis.setValue({fileId2x: value});\n\t\treturn this;\n\t}\n\n\tsetSize(value: 'cover' | 'auto'): BgImageValue\n\t{\n\t\tthis.setValue({size: value});\n\t\treturn this;\n\t}\n\n\tsetAttachment(value: 'scroll' | 'fixed'): BgImageValue\n\t{\n\t\tthis.setValue({attachment: value});\n\t\treturn this;\n\t}\n\n\tsetOverlay(value: ColorValue)\n\t{\n\t\tthis.setValue({overlay: value});\n\t}\n\n\tgetUrl(): string\n\t{\n\t\treturn this.value.url;\n\t}\n\n\tgetUrl2x(): ?string\n\t{\n\t\treturn this.value.url2x;\n\t}\n\n\tgetFileId(): number\n\t{\n\t\treturn this.value.fileId;\n\t}\n\n\tgetFileId2x(): ?number\n\t{\n\t\treturn this.value.fileId2x;\n\t}\n\n\tgetSize(): 'cover' | 'auto'\n\t{\n\t\treturn this.value.size;\n\t}\n\n\tgetAttachment(needBool: boolean = false): string | boolean\n\t{\n\t\treturn needBool\n\t\t\t? this.value.attachment === 'fixed'\n\t\t\t: this.value.attachment;\n\t}\n\n\tgetOverlay(): ColorValue\n\t{\n\t\treturn this.value.overlay;\n\t}\n\n\tgetOpacity(): number\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn 1;\n\t}\n\n\tgetStyleString(): string\n\t{\n\t\tlet style = '';\n\t\tif (this.value.overlay !== null)\n\t\t{\n\t\t\tstyle = `linear-gradient(${this.value.overlay.getStyleString()},${this.value.overlay.getStyleString()})`;\n\t\t}\n\n\t\t// todo: what if url is null\n\t\tconst {url, url2x, size, attachment} = this.value;\n\t\tconst endString = `center / ${size} ${attachment}`;\n\t\tif (url !== null)\n\t\t{\n\t\t\tstyle = style.length ? (style + ',') : '';\n\t\t\tif(url2x !== null)\n\t\t\t{\n\t\t\t\tstyle += `-webkit-image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t\tstyle += `image-set(url('${url}') 1x, url('${url2x}') 2x) ${endString},`;\n\t\t\t}\n\t\t\tstyle += `url('${url}') ${endString}`;\n\t\t}\n\n\t\treturn style;\n\t}\n\n\tgetStyleStringForOpacity(): string\n\t{\n\t\t// todo: how image can have opacity?\n\t\treturn '';\n\t}\n\n\tstatic getSizeItemsForButtons(): []\n\t{\n\t\treturn [\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_COVER'), value: 'cover'},\n\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_MOSAIC'), value: 'auto'},\n\t\t];\n\t}\n\n\tstatic getAttachmentValueByBool(value: boolean): string\n\t{\n\t\treturn value ? 'fixed' : 'scroll';\n\t}\n}\n","import {BaseEvent} from 'main.core.events';\nimport {Dom, Tag, Type, Loc, Text} from 'main.core';\n\nimport {Backend} from 'landing.backend';\nimport {PageObject} from 'landing.pageobject';\nimport BaseControl from \"../base_control/base_control\";\nimport BgImageValue from '../../bg_image_value';\nimport './css/image.css';\n\nexport default class Image extends BaseControl\n{\n\toptions: {\n\t\tblock: BX.Landing.Block,\n\t\tstyleNode: BX.Landing.UI.Style,\n\t\tcontentRoot: ?HTMLDivElement,\n\t\tselector: string,\n\t};\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Color.Image');\n\t\tthis.options = options;\n\n\t\t// todo: set dimensions from block\n\t\tconst rootWindow = PageObject.getRootWindow();\n\t\tthis.imgField = new rootWindow.BX.Landing.UI.Field.Image({\n\t\t\tid: 'landing_ui_color_image_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-image',\n\t\t\tcompactMode: true,\n\t\t\tdisableLink: true,\n\t\t\t// selector: options.selector,\n\t\t\tdisableAltField: true,\n\t\t\tallowClear: true,\n\t\t\tdimensions: {width: 1920},\n\t\t\tuploadParams: {\n\t\t\t\taction: \"Block::uploadFile\",\n\t\t\t\tblock: this.options.block.id,\n\t\t\t},\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\t\tthis.imgField.subscribe('change', this.onImageChange.bind(this));\n\n\t\tthis.sizeField = new BX.Landing.UI.Field.Dropdown({\n\t\t\t// todo: need commented fields?\n\t\t\tid: 'landing_ui_color_image_size_' + Text.getRandom().toLowerCase(),\n\t\t\t// title: 'size field title',\n\t\t\t// description: 'ButtonGroup size description',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELD_COLOR-BG_SIZE_TITLE'),\n\t\t\tclassName: 'landing-ui-field-color-image-size',\n\t\t\t// selector: this.options.selector,\n\t\t\titems: BgImageValue.getSizeItemsForButtons(),\n\t\t\tonChange: this.onSizeChange.bind(this),\n\t\t\tcontentRoot: this.options.contentRoot,\n\t\t});\n\n\t\tthis.attachmentField = new BX.Landing.UI.Field.Checkbox({\n\t\t\t// todo: need commented fields?\n\t\t\tid: 'landing_ui_color_image_attach_' + Text.getRandom().toLowerCase(),\n\t\t\tclassName: 'landing-ui-field-color-image-attachment',\n\t\t\t// title: 'attachement field title',\n\t\t\t// description: 'ButtonGroup size description',\n\t\t\tmultiple: false,\n\t\t\tcompact: true,\n\t\t\t// selector: options.selector,\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELD_COLOR-BG_FIXED'), value: true},\n\t\t\t],\n\t\t\tonChange: this.onAttachmentChange.bind(this),\n\t\t});\n\t}\n\n\tbuildLayout(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-image\">\n\t\t\t\t${this.imgField.getLayout()}\n\t\t\t\t${this.sizeField.getLayout()}\n\t\t\t\t${this.attachmentField.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonImageChange(event: BaseEvent)\n\t{\n\t\tconst value = this.getValue() || new BgImageValue();\n\t\tvalue.setUrl(event.getData().value.src);\n\t\tvalue.setFileId(event.getData().value.id);\n\t\tif (event.getData().value.src2x)\n\t\t{\n\t\t\tvalue.setUrl2x(event.getData().value.src2x);\n\t\t\tvalue.setFileId2x(event.getData().value.id2x);\n\t\t}\n\t\tthis.setValue(value);\n\t\tthis.onChange(new BaseEvent({data: {image: value}}));\n\n\t\tthis.saveNode(value);\n\t}\n\n\tsaveNode(value: BgImageValue)\n\t{\n\t\tconst style = this.options.styleNode;\n\t\tconst block = this.options.block;\n\n\t\tlet selector = style.selector;\n\t\tif (\n\t\t\tstyle.selector === block.selector\n\t\t\t|| style.selector === block.makeAbsoluteSelector(block.selector)\n\t\t)\n\t\t{\n\t\t\tselector = '#wrapper';\n\t\t}\n\t\telse if (!style.isSelectGroup())\n\t\t{\n\t\t\tselector = BX.Landing.Utils.join(\n\t\t\t\tstyle.selector.split(\"@\")[0],\n\t\t\t\t\"@\",\n\t\t\t\tstyle.getElementIndex(style.getNode()[0])\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tselector = style.selector.split(\"@\")[0];\n\t\t}\n\n\t\tconst data = {[selector]: {}};\n\t\tif (value.getFileId())\n\t\t{\n\t\t\tdata[selector].id = value.getFileId();\n\t\t}\n\t\tif (value.getFileId2x())\n\t\t{\n\t\t\tdata[selector].id2x = value.getFileId2x();\n\t\t}\n\n\t\tBackend.getInstance()\n\t\t\t.action(\n\t\t\t\t\"Landing\\\\Block::updateNodes\",\n\t\t\t\t{\n\t\t\t\t\tblock: this.options.block.id,\n\t\t\t\t\tdata: data,\n\t\t\t\t},\n\t\t\t)\n\t}\n\n\tonSizeChange(size: string)\n\t{\n\t\tif (Type.isString(size))\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setSize(size);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange(new BaseEvent({data: {image: value}}));\n\t\t}\n\t}\n\n\tonAttachmentChange(event)\n\t{\n\t\tif (event instanceof BaseEvent)\n\t\t{\n\t\t\tconst value = this.getValue() || new BgImageValue();\n\t\t\tvalue.setAttachment(\n\t\t\t\tBgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()),\n\t\t\t);\n\t\t\tthis.setValue(value);\n\t\t\tthis.onChange(new BaseEvent({data: {image: value}}));\n\t\t}\n\t}\n\n\tonChange(event: ?BaseEvent)\n\t{\n\t\t// todo: can call parent?\n\t\t// if not image - null\n\t\tthis.emit('onChange', event);\n\t}\n\n\tgetValue(): ?BgImageValue\n\t{\n\t\t// todo: get size and attachement from controls\n\t\treturn this.cache.remember('value', () => {\n\t\t\tconst imgValue = this.imgField.getValue();\n\t\t\tconst url = imgValue.src;\n\t\t\tif (url === null)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst value = new BgImageValue({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfileId: imgValue.id,\n\t\t\t\t});\n\t\t\t\tif (imgValue.src2x)\n\t\t\t\t{\n\t\t\t\t\tvalue.setUrl2x(imgValue.src2x);\n\t\t\t\t\tvalue.setFileId2x(imgValue.fileId2x);\n\t\t\t\t}\n\t\t\t\tconst size = this.sizeField.getValue();\n\t\t\t\tif (size !== null)\n\t\t\t\t{\n\t\t\t\t\tvalue.setSize(size);\n\t\t\t\t}\n\n\t\t\t\tvalue.setAttachment(BgImageValue.getAttachmentValueByBool(this.attachmentField.getValue()));\n\n\t\t\t\t// todo: set overlay\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\n\tsetValue(value: ?BgImageValue)\n\t{\n\t\t// todo: can delete prev image\n\t\tsuper.setValue(value);\n\n\t\tif (value === null)\n\t\t{\n\t\t\tthis.imgField.setValue({src: ''}, true);\n\t\t\t// todo: what set size and attachement?\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (value.getUrl() !== null)\n\t\t\t{\n\t\t\t\tthis.setActive();\n\t\t\t}\n\n\t\t\tconst imgFieldValue = {\n\t\t\t\ttype: 'image',\n\t\t\t\tsrc: value.getUrl(),\n\t\t\t\tid: value.getFileId(),\n\t\t\t};\n\t\t\tif (value.getUrl2x())\n\t\t\t{\n\t\t\t\timgFieldValue.src2x = value.getUrl2x();\n\t\t\t\timgFieldValue.id2x = value.getFileId2x();\n\t\t\t}\n\t\t\tthis.imgField.setValue(imgFieldValue, true);\n\t\t\tthis.sizeField.setValue(value.getSize(), true);\n\t\t\tthis.attachmentField.setValue([value.getAttachment(true)]);\n\t\t}\n\t}\n\n\tsetActive(): void\n\t{\n\t\tDom.addClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n\n\tunsetActive(): void\n\t{\n\t\tDom.removeClass(this.imgField.getLayout(), Image.ACTIVE_CLASS);\n\t}\n}\n","import {Tag, Type, Loc} from 'main.core';\nimport {BaseEvent} from \"main.core.events\";\n\nimport BgColor from './bg_color';\nimport Image from '../control/image/image';\nimport ColorSet from '../control/color_set/color_set';\n\nimport ColorValue from \"../color_value\";\nimport BgImageValue from '../bg_image_value';\nimport {IColorValue} from '../types/i_color_value';\nimport Opacity from '../control/opacity/opacity';\nimport Tabs from '../layout/tabs/tabs';\nimport GradientValue from '../gradient_value';\n\nexport default class Bg extends BgColor\n{\n\tstatic BG_URL_VAR: string = '--bg-url';\n\tstatic BG_URL_2X_VAR: string = '--bg-url-2x';\n\tstatic BG_OVERLAY_VAR: string = '--bg-overlay';\n\tstatic BG_SIZE_VAR: string = '--bg-size';\n\tstatic BG_ATTACHMENT_VAR: string = '--bg-attachment';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.Bg');\n\t\tthis.parentVariableName = this.variableName;\n\t\tthis.variableName = [\n\t\t\tthis.parentVariableName,\n\t\t\tBg.BG_URL_VAR,\n\t\t\tBg.BG_URL_2X_VAR,\n\t\t\tBg.BG_OVERLAY_VAR,\n\t\t\tBg.BG_SIZE_VAR,\n\t\t\tBg.BG_ATTACHMENT_VAR,\n\t\t];\n\t\tthis.parentClassName = this.className;\n\t\tthis.className = 'g-bg-image';\n\n\t\tthis.image = new Image(options);\n\t\tthis.image.subscribe('onChange', this.onImageChange.bind(this));\n\n\t\tthis.overlay = new ColorSet(options);\n\t\tthis.overlay.subscribe('onChange', this.onOverlayChange.bind(this));\n\t\tthis.overlayOpacity = new Opacity();\n\t\tthis.overlayOpacity.setValue(new ColorValue().setOpacity(0.5));\n\t\tthis.overlayOpacity.subscribe('onChange', this.onOverlayOpacityChange.bind(this));\n\n\t\tthis.imageTabs = new Tabs().appendTab(\n\t\t\t'Overlay',\n\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_OVERLAY'),\n\t\t\t[this.overlay, this.overlayOpacity],\n\t\t);\n\n\t\tthis.bigTabs = new Tabs()\n\t\t\t.setBig(true)\n\t\t\t.appendTab(\n\t\t\t\t'Color',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_COLOR'),\n\t\t\t\t[this.colorSet, this.primary, this.tabs],\n\t\t\t)\n\t\t\t.appendTab(\n\t\t\t\t'Image',\n\t\t\t\tLoc.getMessage('LANDING_FIELD_COLOR-BG_IMAGE'),\n\t\t\t\t[this.image, this.imageTabs],\n\t\t\t);\n\t}\n\n\tbuildLayout(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-field-color-color\">\n\t\t\t\t${this.bigTabs.getLayout()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonColorSetChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\n\t\tsuper.onColorSetChange(event);\n\t}\n\n\tonGradientChange(event: BaseEvent)\n\t{\n\t\tthis.image.unsetActive();\n\t\tsuper.onGradientChange(event);\n\t}\n\n\tonImageChange()\n\t{\n\t\t// todo: can drop image from b_landing_file after change\n\t\tthis.unsetActive();\n\n\t\tthis.activeControl = this.image;\n\t\tthis.image.setActive();\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayChange(event: BaseEvent)\n\t{\n\t\tconst color = event.getData().color;\n\t\tcolor.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\tthis.overlayOpacity.setValue(color);\n\n\t\tthis.onChange();\n\t}\n\n\tonOverlayOpacityChange()\n\t{\n\t\tthis.onChange();\n\t}\n\n\tunsetActive()\n\t{\n\t\tsuper.unsetActive();\n\t\tthis.image.unsetActive();\n\t\t// todo: unset overlay?\n\t}\n\n\t/**\n\t * Set value by new format\n\t */\n\tsetProcessorValue(value: {string: string}): void\n\t{\n\t\t// Just get last css variable\n\t\tthis.setValue(value);\n\t}\n\n\tsetValue(value: {string: string} | string | null): void\n\t{\n\t\tthis.image.setValue(null);\n\t\tthis.bigTabs.showTab('Color');\n\n\t\tif (Type.isNull(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (Type.isString(value))\n\t\t{\n\t\t\tsuper.setValue(value);\n\t\t}\n\t\telse if (this.parentVariableName in value && Type.isString(value[this.parentVariableName]))\n\t\t{\n\t\t\tsuper.setValue(value[this.parentVariableName]);\n\t\t}\n\t\telse if (Type.isObject(value))\n\t\t{\n\t\t\t// todo: super.setValue null?\n\t\t\tconst bgValue = new BgImageValue();\n\t\t\tif (Bg.BG_URL_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl(value[Bg.BG_URL_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_URL_2X_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setUrl2x(value[Bg.BG_URL_2X_VAR].replace(/url\\([\"']/i, '').replace(/['\"]\\)/i, ''));\n\t\t\t}\n\t\t\tif (Bg.BG_SIZE_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setSize(value[Bg.BG_SIZE_VAR]);\n\t\t\t}\n\t\t\tif (Bg.BG_ATTACHMENT_VAR in value)\n\t\t\t{\n\t\t\t\tbgValue.setAttachment(value[Bg.BG_ATTACHMENT_VAR]);\n\t\t\t}\n\n\t\t\tthis.image.setValue(bgValue);\n\t\t\tthis.bigTabs.showTab('Image');\n\t\t\tthis.activeControl = this.image;\n\n\t\t\tif (Bg.BG_OVERLAY_VAR in value)\n\t\t\t{\n\t\t\t\tconst overlayValue = new ColorValue(value[Bg.BG_OVERLAY_VAR]);\n\t\t\t\tthis.overlay.setValue(overlayValue);\n\t\t\t\tthis.overlayOpacity.setValue(overlayValue);\n\t\t\t\tthis.imageTabs.showTab('Overlay');\n\t\t\t}\n\t\t}\n\t}\n\n\t// todo: create base value instead interface. In this case can return ALL types, color, grad, bg\n\tgetValue(): ?IColorValue\n\t{\n\t\treturn this.cache.remember('value', () => {\n\t\t\tif (this.activeControl === this.image)\n\t\t\t{\n\t\t\t\tconst imageValue = this.image.getValue();\n\t\t\t\tconst overlayValue = this.overlay.getValue();\n\t\t\t\tif (imageValue !== null && this.overlay.isActive() && overlayValue !== null)\n\t\t\t\t{\n\t\t\t\t\toverlayValue.setOpacity(this.overlayOpacity.getValue().getOpacity());\n\t\t\t\t\timageValue.setOverlay(overlayValue);\n\t\t\t\t}\n\n\t\t\t\treturn imageValue;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn super.getValue();\n\t\t\t}\n\t\t});\n\t}\n\n\tgetClassName(): [string]\n\t{\n\t\tconst value = this.getValue();\n\t\tif (value === null || value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\treturn [this.parentClassName];\n\t\t}\n\n\t\treturn [this.className];\n\t}\n\n\t// todo: what about fileid?\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\t// todo: not null, but what?\n\t\t\treturn {\n\t\t\t\t[this.parentVariableName]: null,\n\t\t\t\t[Bg.BG_URL_VAR]: null,\n\t\t\t\t[Bg.BG_URL_2X_VAR]: null,\n\t\t\t\t[Bg.BG_OVERLAY_VAR]: null,\n\t\t\t\t[Bg.BG_SIZE_VAR]: null,\n\t\t\t\t[Bg.BG_ATTACHMENT_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tlet color = null;\n\t\tlet image = null;\n\t\tlet image2x = null;\n\t\tlet overlay = null;\n\t\t// let size = 'cover';\n\t\tlet size = null;\n\t\t// let attachment = 'scroll';\n\t\tlet attachment = null;\n\t\tif (value instanceof ColorValue || value instanceof GradientValue)\n\t\t{\n\t\t\t// todo: need change class if not a image?\n\t\t\tcolor = value.getStyleString();\n\t\t}\n\t\telse\n\t\t{\n\t\t\timage = `url('${value.getUrl()}')`;\n\t\t\timage2x = `url('${value.getUrl2x()}')`;\n\t\t\toverlay = value.getOverlay() ? value.getOverlay().getStyleString() : 'transparent';\n\t\t\tsize = value.getSize();\n\t\t\tattachment = value.getAttachment();\n\t\t}\n\n\t\treturn {\n\t\t\t[this.parentVariableName]: color,\n\t\t\t[Bg.BG_URL_VAR]: image,\n\t\t\t[Bg.BG_URL_2X_VAR]: image2x,\n\t\t\t[Bg.BG_OVERLAY_VAR]: overlay,\n\t\t\t[Bg.BG_SIZE_VAR]: size,\n\t\t\t[Bg.BG_ATTACHMENT_VAR]: attachment,\n\t\t};\n\t}\n}\n","import Color from \"./color\";\n\nexport default class BorderColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColor');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color';\n\t\tthis.className = 'g-border-color';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorHover');\n\t\tthis.property = 'border-color';\n\t\tthis.variableName = '--border-color--hover';\n\t\tthis.className = 'g-border-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nexport default class BgColorHover extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorHover');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg-hover';\n\t\tthis.className = 'g-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import BgColor from './bg_color';\n\nimport ColorValue from '../color_value';\n\nexport default class BgColorAfter extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorAfter');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--after';\n\t\tthis.className = 'g-bg--after';\n\t\tthis.pseudoClass = ':after';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import BgColor from './bg_color';\nimport ColorValue from '../color_value';\n\nexport default class BgColorBefore extends BgColor\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BgColorBefore');\n\t\tthis.property = ['background-image', 'background-color'];\n\t\tthis.variableName = '--bg--before';\n\t\tthis.className = 'g-bg--before';\n\t\tthis.pseudoClass = ':before';\n\n\t\tconst opacityValue = this.getValue() || new ColorValue();\n\t\tthis.opacity.setValue(opacityValue.setOpacity(0.5));\n\t\tthis.tabs.showTab('Opacity');\n\t}\n}\n","import Color from './color';\n\nexport default class NavbarColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColor');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color';\n\t\tthis.className = 'u-navbar-color';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--hover';\n\t\tthis.className = 'u-navbar-color--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMoment extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMoment');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment';\n\t\tthis.className = 'u-navbar-color--fix-moment';\n\t}\n}","import Color from './color';\n\nexport default class NavbarColorFixMomentHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarColorFixMomentHover');\n\t\tthis.property = 'color';\n\t\tthis.variableName = '--navbar-color--fix-moment--hover';\n\t\tthis.className = 'u-navbar-color--fix-moment--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color';\n\t\tthis.className = 'u-navbar-bg';\n\t}\n}","import Color from './color';\n\nexport default class NavbarBgColorHover extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarBgColorHover');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-bg-color--hover';\n\t\tthis.className = 'u-navbar-bg--hover';\n\t\tthis.pseudoClass = ':hover';\n\t}\n}","import Color from \"./color\";\n\nexport default class BorderColorTop extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.BorderColorTop');\n\t\tthis.property = 'border-top-color';\n\t\tthis.variableName = '--border-color-top';\n\t\tthis.className = 'g-border-color-top';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColor');\n\t\tthis.property = 'fill';\n\t\tthis.variableName = '--fill-first';\n\t\tthis.className = 'g-fill-first';\n\t}\n}","import Color from \"./color\";\n\nexport default class FillColorSecond extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.FillColorSecond');\n\t\tthis.property = 'fill';\n\t\tthis.variableName = '--fill-second';\n\t\tthis.className = 'g-fill-second';\n\t}\n}","import Color from \"./color\";\nimport ColorValue from '../color_value';\n\nexport default class ButtonColor extends Color\n{\n\tstatic COLOR_CONTRAST_VAR: string = '--button-color-contrast';\n\tstatic COLOR_HOVER_VAR: string = '--button-color-hover';\n\tstatic COLOR_LIGHT_VAR: string = '--button-color-light';\n\tstatic COLOR_VAR: string = '--button-color';\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.ButtonColor');\n\t\tthis.property = 'background-color';\n\t\t// order is important! Base variable must be last. Hack :-/\n\t\tthis.variableName = [\n\t\t\tButtonColor.COLOR_CONTRAST_VAR,\n\t\t\tButtonColor.COLOR_HOVER_VAR,\n\t\t\tButtonColor.COLOR_LIGHT_VAR,\n\t\t\tButtonColor.COLOR_VAR,\n\t\t];\n\t\tthis.className = 'g-button-color';  //todo: ?\n\t}\n\n\tgetStyle(): {string: ?string}\n\t{\n\t\tif (this.getValue() === null)\n\t\t{\n\t\t\treturn {\n\t\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_HOVER_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: null,\n\t\t\t\t[ButtonColor.COLOR_VAR]: null,\n\t\t\t};\n\t\t}\n\n\t\tconst value = this.getValue();\n\t\tconst valueContrast = value.getContrast().lighten(10);\n\t\tconst valueHover = new ColorValue(value).lighten(10);\n\t\tconst valueLight = value.getLighten();\n\n\t\treturn {\n\t\t\t[ButtonColor.COLOR_CONTRAST_VAR]: valueContrast.getStyleString(),\n\t\t\t[ButtonColor.COLOR_HOVER_VAR]: valueHover.getStyleString(),\n\t\t\t[ButtonColor.COLOR_LIGHT_VAR]: valueLight.getStyleString(),\n\t\t\t[ButtonColor.COLOR_VAR]: value.getStyleString(),\n\t\t};\n\t}\n}","import Color from './color';\n\nexport default class NavbarCollapseBgColor extends Color\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.Processor.NavbarCollapseBgColor');\n\t\tthis.property = 'background-color';\n\t\tthis.variableName = '--navbar-collapse-bg-color';\n\t\tthis.className = 'u-navbar-collapse-bg';\n\t}\n}","import {Dom, Type} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport BaseProcessor from './processor/base_processor';\nimport Color from './processor/color';\nimport ColorHover from './processor/color_hover';\nimport Bg from './processor/bg';\nimport BorderColor from './processor/border_color';\nimport BorderColorHover from './processor/border_color_hover';\nimport BgColor from './processor/bg_color';\nimport BgColorHover from './processor/bg_color_hover';\nimport BgColorAfter from './processor/bg_color_after';\nimport BgColorBefore from './processor/bg_color_before';\nimport NavbarColor from './processor/navbar_color';\nimport NavbarColorHover from './processor/navbar_color_hover';\nimport NavbarColorFixMoment from './processor/navbar_color_fix_moment';\nimport NavbarColorFixMomentHover from './processor/navbar_color_fix_moment_hover';\nimport NavbarBgColor from './processor/navbar_bg';\nimport NavbarBgColorHover from './processor/navbar_bg_hover';\nimport BorderColorTop from './processor/border_color-top';\nimport FillColor from './processor/fill_color';\nimport FillColorSecond from './processor/fill_color_second';\nimport ButtonColor from './processor/button_color';\nimport {IColorValue} from './types/i_color_value';\nimport NavbarCollapseBgColor from './processor/navbar_collapse_bg';\n\nexport class ColorField extends BaseField\n{\n\tprocessor: BaseProcessor;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.items = ('items' in options && options.items) ? options.items : [];\n\t\tthis.postfix = (typeof options.postfix === 'string') ? options.postfix : '';\n\t\tthis.frame = (typeof options.frame === 'object') ? options.frame : null;\n\t\tconst processorOptions = {\n\t\t\tblock: options.block,\n\t\t\tstyleNode: options.styleNode,\n\t\t\tselector: options.selector,\n\t\t\tcontentRoot: this.contentRoot,\n\t\t};\n\n\t\tthis.changeHandler = (typeof options.onChange === \"function\") ? options.onChange : (() => {});\n\t\tthis.resetHandler = (typeof options.onReset === \"function\") ? options.onReset : (function () {});\n\n\t\t// todo: rename \"subtype\"\n\t\tswitch (options.subtype)\n\t\t{\n\t\t\tcase 'color':\n\t\t\t\tthis.processor = new Color(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'color-hover':\n\t\t\t\tthis.processor = new ColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg':\n\t\t\t\tthis.processor = new Bg(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color':\n\t\t\t\tthis.processor = new BgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-hover':\n\t\t\t\tthis.processor = new BgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-after':\n\t\t\t\tthis.processor = new BgColorAfter(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'bg-color-before':\n\t\t\t\tthis.processor = new BgColorBefore(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color':\n\t\t\t\tthis.processor = new BorderColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-hover':\n\t\t\t\tthis.processor = new BorderColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'border-color-top':\n\t\t\t\tthis.processor = new BorderColorTop(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color':\n\t\t\t\tthis.processor = new NavbarColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-hover':\n\t\t\t\tthis.processor = new NavbarColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment':\n\t\t\t\tthis.processor = new NavbarColorFixMoment(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-color-fix-moment-hover':\n\t\t\t\tthis.processor = new NavbarColorFixMomentHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color':\n\t\t\t\tthis.processor = new NavbarBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-bg-color-hover':\n\t\t\t\tthis.processor = new NavbarBgColorHover(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'navbar-collapse-bg-color':\n\t\t\t\tthis.processor = new NavbarCollapseBgColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color':\n\t\t\t\tthis.processor = new FillColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'fill-color-second':\n\t\t\t\tthis.processor = new FillColorSecond(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tcase 'button-color':\n\t\t\t\tthis.processor = new ButtonColor(processorOptions);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.property = this.processor.getProperty()[this.processor.getProperty().length - 1];\n\t\tthis.processor.getClassName().forEach(\n\t\t\titem => this.items.push({name: item, value: item}),\n\t\t);\n\n\t\t// todo: what a input?\n\t\tDom.remove(this.input);\n\t\tthis.layout.classList.add(\"landing-ui-field-color\");\n\t\tDom.append(this.processor.getLayout(), this.layout);\n\n\t\tthis.processor.subscribe('onChange', this.onChange.bind(this));\n\t\tthis.processor.subscribe('onReset', this.onReset.bind(this));\n\t}\n\n\tgetInlineProperties(): [string]\n\t{\n\t\treturn this.processor.getVariableName();\n\t}\n\n\tgetComputedProperties(): [string]\n\t{\n\t\treturn this.processor.getProperty();\n\t}\n\n\tgetPseudoElement(): ?string\n\t{\n\t\treturn this.processor.getPseudoClass();\n\t}\n\n\tonChange()\n\t{\n\t\tthis.changeHandler(\n\t\t\t{\n\t\t\t\tclassName: this.processor.getClassName(),\n\t\t\t\tstyle: this.processor.getStyle(),\n\t\t\t},\n\t\t\tthis.items,\n\t\t\tthis.postfix,\n\t\t\tthis.property,\n\t\t);\n\t}\n\n\tonReset()\n\t{\n\t\tthis.resetHandler(this.items, this.postfix, this.property);\n\t}\n\n\t// todo: what a value must return? hsla? string?\n\tgetValue(): ?IColorValue\n\t{\n\t\t// todo: need convert processor value to obj? add toObj method to values\n\t\treturn this.processor.getValue();\n\t}\n\n\tsetValue(value: {string: ?string})\n\t{\n\t\tlet processorValue = null;\n\t\t// now for multiple properties get just last value. Maybe, need object-like values\n\t\tthis.getInlineProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(processorValue))\n\t\t\t\t{\n\t\t\t\t\tprocessorValue = {};\n\t\t\t\t}\n\t\t\t\tprocessorValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tlet defaultValue = null;\n\t\tthis.getComputedProperties().forEach(prop => {\n\t\t\tif (prop in value && !this.processor.isNullValue(value[prop]))\n\t\t\t{\n\t\t\t\tif (!Type.isObject(defaultValue))\n\t\t\t\t{\n\t\t\t\t\tdefaultValue = {};\n\t\t\t\t}\n\t\t\t\tdefaultValue[prop] = value[prop];\n\t\t\t}\n\t\t});\n\n\t\tif (processorValue !== null)\n\t\t{\n\t\t\tthis.processor.setProcessorValue(processorValue);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.processor.setDefaultValue(defaultValue);\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\t// todo: now not work with \"group select\", can use just any node from elements. If group - need forEach\n\n\t\tconst value = this.data.styleNode.getValue(true);\n\t\tthis.setValue(value.style);\n\t}\n}"],"names":["BaseProcessor","options","cache","Cache","MemoryCache","property","pseudoClass","Type","isArray","variableName","value","remember","buildLayout","Tag","render","className","getValue","getVariableName","getStyleString","processorProperty","length","setValue","inlineProperty","getProperty","unsetActive","emit","delete","EventEmitter","matcher","isRgbString","rgbString","match","matcherHex","isHex","hex","trim","matcherHsl","isHslString","hsla","hexToRgb","r","parseInt","g","b","rgbToHsla","rgb","max","Math","min","h","s","l","d","round","a","hexToHsl","rgbToHex","toString","hslToRgb","hsl","c","abs","x","m","hslToHex","rgbStringToHsla","matches","Text","toNumber","hslStringToHsl","hslString","isCssVar","css","parseCssVar","cssVar","full","name","opacity","parseFloat","replace","toFixed","defaultColorValueOptions","defaultBgImageSize","defaultBgImageAttachment","defaultOverlay","defaultBgImageValueOptions","url","size","attachment","overlay","ColorValue","getHex","getOpacity","getHsl","isObject","getHsla","getCssVar","getHexOriginal","isString","Dom","style","document","documentElement","setOpacity","percent","degree","fullCssVar","String","k","rad","PI","sin","deltaL","color1","color2","BaseControl","set","event","addClass","getLayout","ACTIVE_CLASS","removeClass","hasClass","Hex","setEventNamespace","previewMode","onInput","bind","onButtonClick","preview","Event","getInput","getButton","substring","toLowerCase","onChange","color","textColor","bgColor","querySelector","focus","DEFAULT_TEXT","adjustColors","getContrast","setActive","DEFAULT_COLOR","DEFAULT_BG","innerText","PageObject","getRootWindow","activeElement","Spectrum","global","window","top","location","saturation","urlParam","URL","searchParams","get","DEFAULT_SATURATION","body","setProperty","onPickerDragStart","onPickerDragMove","onPickerDragEnd","onScroll","scrollContext","contentRoot","getPicker","y","ctrlKey","metaKey","button","showPicker","target","setPickerPos","pageX","pageY","unbind","layoutRect","getBoundingClientRect","width","height","left","getLayoutRect","leftToSet","HUE_RANGE","HUE_RANGE_GRAY_THRESHOLD","HUE_RANGE_GRAY_MIDDLE","HIDE_CLASS","layoutWidth","getPickerPos","layoutHeight","isNaN","getDefaultSaturation","isSpectrumValue","hidePicker","Recent","initItems","getLayoutContainer","itemsLoaded","buildItemsLayout","Backend","getInstance","action","USER_OPTION_NAME","then","result","items","split","forEach","item","MAX_ITEMS","push","clean","itemLayout","onItemClick","append","currentTarget","dataset","pos","indexOf","splice","unshift","saveItems","BX","userOptions","save","Colorpicker","popupId","getRandom","popupTargetContainer","hexPreview","setPreviewMode","recent","previously","getPopup","show","isShown","subscribe","onHexChange","onSelectClick","spectrum","onSpectrumChange","onRecentChange","getCancelButton","onCancelClick","getSelectButton","getData","recentColor","BaseEvent","data","close","addItem","Loc","getMessage","PopupManager","create","id","autoHide","bindElement","bindOptions","forceTop","forceLeft","padding","contentPadding","offsetTop","offsetLeft","content","getPopupContent","closeByEsc","targetContainer","setActivity","isActive","Primary","onClick","CSS_VAR","regexpWoStartEnd","regexp","RegExp","regexpToString","source","matcherGradient","matcherGradientAngle","hexMatcher","matcherGradientColors","isGradientString","GradientValue","from","to","angle","DEFAULT_ANGLE","type","DEFAULT_TYPE","getName","getAngle","getType","getFrom","getTo","parseGradientString","typeMatches","angleMatches","colorMatches","isNumber","TYPE_RADIAL","TYPE_LINEAR","fromString","value1","value2","base","compare","ext","defaultType","gradientType","Generator","presets","defaultPresets","preset","map","primary","lBeforeCount","ceil","floor","lAfterCount","deltaLBefore","deltaLAfter","i","darken","ii","lighten","deltaBitrixL","deltaBitrixS","bitrixColor","BITRIX_COLOR","saturate","desaturate","adjustHue","deltaL2","deltaS","deltaS2","start","pairs","pair","Preset","activeItem","getGradientByColorOptions","getItemLayout","getItemByName","find","some","setActiveItem","itemName","setAngle","setType","PresetCollection","onPresetClick","getOpenButton","toggle","addPreset","getPrimaryColorPreset","getDefaultPresets","Object","keys","getActiveId","getPresetById","activeId","isPresetValue","getPopupLayout","layouts","innerLayouts","presetId","layout","getPresetLayout","getActivePreset","Reset","hint","UI","Hint","createInstance","popupParameters","init","Zeroing","ColorSet","reset","zeroing","blackAndWhitePreset","getBlackAndWhitePreset","onPresetItemChange","colorpicker","setPreset","addDefaultPresets","getDefaultPreset","getTitleContainer","prepend","getPresetContainer","setActiveValue","activePreset","getPresetByItemValue","getId","Opacity","getColorLayout","leftPos","pickerLeft","getDefaultValue","valueToSet","background","getStyleStringForOpacity","Tabs","tabs","multiple","isBig","onToggle","big","title","tab","Tab","bindEvents","hide","getTabById","additional","head","getTitle","tabLayout","toggleClass","SHOW_CLASS","Color","colorSet","onColorSetChange","onReset","onOpacityChange","onPrimaryChange","appendTab","valueObj","isPrimaryValue","showTab","ColorHover","Gradient","colorpickerFrom","onColorChange","colorpickerTo","getPopupButton","onPopupOpen","getRotateButton","onRotate","getSwitchTypeButton","onSwitchType","getSwapButton","onSwap","fromValue","toValue","fromValueToSet","toValueToSet","isButtonEnable","ROTATE_STEP","disableButton","enableButton","hexFrom","getHexPreviewObject","hexTo","colorFrom","colorTo","median","getMedian","offset","unsetColorpickerActive","rotate","getContainerLayout","correctColorpickerColors","gradient","setColorpickerActive","DISABLE_CLASS","BgColor","activeControl","onGradientChange","prependTab","setGradientPreset","getPreset","onTabsToggle","gradientPreset","getGradientPreset","console","log","gradValue","isNull","gradientValue","matcherBgImage","isBgImageString","bgImage","getMatcherWithOverlay","matcherBgString","matcherGradientString","BgImageValue","getUrl","url2x","getUrl2x","fileId","getFileId","fileId2x","getFileId2x","getSize","getAttachment","parseBgString","string","matchesBg","matchesOverlay","needBool","endString","Image","rootWindow","imgField","Landing","Field","compactMode","disableLink","disableAltField","allowClear","dimensions","uploadParams","block","onImageChange","sizeField","Dropdown","getSizeItemsForButtons","onSizeChange","attachmentField","Checkbox","compact","onAttachmentChange","setUrl","src","setFileId","src2x","setUrl2x","setFileId2x","id2x","image","saveNode","styleNode","selector","makeAbsoluteSelector","isSelectGroup","Utils","join","getElementIndex","getNode","setSize","setAttachment","getAttachmentValueByBool","imgValue","imgFieldValue","Bg","parentVariableName","BG_URL_VAR","BG_URL_2X_VAR","BG_OVERLAY_VAR","BG_SIZE_VAR","BG_ATTACHMENT_VAR","parentClassName","onOverlayChange","overlayOpacity","onOverlayOpacityChange","imageTabs","bigTabs","setBig","bgValue","overlayValue","imageValue","setOverlay","image2x","getOverlay","BorderColor","BorderColorHover","BgColorHover","BgColorAfter","opacityValue","BgColorBefore","NavbarColor","NavbarColorHover","NavbarColorFixMoment","NavbarColorFixMomentHover","NavbarBgColor","NavbarBgColorHover","BorderColorTop","FillColor","FillColorSecond","ButtonColor","COLOR_CONTRAST_VAR","COLOR_HOVER_VAR","COLOR_LIGHT_VAR","COLOR_VAR","valueContrast","valueHover","valueLight","getLighten","NavbarCollapseBgColor","ColorField","postfix","frame","processorOptions","changeHandler","resetHandler","subtype","processor","getClassName","remove","input","classList","add","getPseudoClass","getStyle","processorValue","getInlineProperties","prop","isNullValue","defaultValue","getComputedProperties","setProcessorValue","setDefaultValue","BaseField"],"mappings":"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"}