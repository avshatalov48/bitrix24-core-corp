(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.bind;var e=BX.Landing.Utils.fireCustomEvent;var t=BX.Landing.Utils.getQueryParams;var n=BX.Landing.Utils.remove;var r=BX.Landing.Utils.create;BX.Landing.UI.Field.Embed=function(e){e.textOnly=true;var t=e.content;e.content=t.source||t.src;e.placeholder=BX.Landing.Loc.getMessage("LANDING_EMBED_FIELD_PLACEHOLDER");e.description="<span class='landing-ui-anchor-preview'>"+BX.Landing.Loc.getMessage("LANDING_EMBED_FIELD_DESCRIPTION")+"</span>";BX.Landing.UI.Field.Text.apply(this,arguments);this.onInputInput=this.onInputInput.bind(this);i(this.input,"input",this.onInputInput);this.hiddenInput=r("input",{props:{type:"hidden",value:t.src||this.input.innerText}});this.error=BX.Landing.UI.Field.BaseField.createDescription(BX.Landing.Loc.getMessage("LANDING_EMBED_ERROR_WRONG_SOURCE_TEXT"));BX.Dom.addClass(this.error,"landing-ui-error");BX.Dom.style(this.description,"margin-bottom","0px");this.adjustForm()};BX.Landing.UI.Field.Embed.prototype={constructor:BX.Landing.UI.Field.Embed,__proto__:BX.Landing.UI.Field.Text.prototype,onInputInput:function(){var i=this.getValue();this.adjustForm(true);this.onInputHandler(i);this.onValueChangeHandler(this);var e=new BX.Event.BaseEvent({data:{value:i},compatData:[i]});this.emit("change",e)},isEmbedUrl:function(i){return BX.Landing.Utils.Matchers.youtube.test(i)||BX.Landing.Utils.Matchers.vimeo.test(i)||BX.Landing.Utils.Matchers.vine.test(i)||BX.Landing.Utils.Matchers.facebookVideos.test(i)},getValue:function(){return{src:this.mediaService?this.mediaService.getEmbedURL():this.input.innerText,preview:this.mediaService?this.mediaService.getEmbedPreview():"",source:this.input.innerText}},adjustForm:function(i){var e=String(this.input.innerText).trim();this.hideError();if(this.isEmbedUrl(e)){var r=new BX.Landing.MediaService.Factory;if(this.mediaService&&this.mediaService.form){n(this.mediaService.form.layout)}this.mediaService=r.create(e,!i?t(this.hiddenInput.value):{});if(this.mediaService){var s=this.mediaService.getSettingsForm();if(s){this.layout.appendChild(s.layout)}}}else{if(this.mediaService){n(this.mediaService.form.layout)}if(BX.Type.isStringFilled(e)){this.showError()}}},showError:function(){BX.Dom.append(this.error,this.layout);BX.Dom.style(this.description,"margin-bottom",null)},hideError:function(){BX.Dom.remove(this.error);BX.Dom.style(this.description,"margin-bottom","0px")}}})();
//# sourceMappingURL=embed_field.map.js