{"version":3,"file":"fieldslistfield.bundle.js","sources":["../src/fieldslistfield.js"],"sourcesContent":["import {BaseField} from 'landing.ui.field.basefield';\nimport {Loc} from 'landing.loc';\nimport {Dom, Runtime, Tag, Text, Type} from 'main.core';\nimport {Draggable} from 'ui.draganddrop.draggable';\nimport {FieldsPanel} from 'landing.ui.panel.fieldspanel';\nimport {ListItem} from 'landing.ui.component.listitem';\nimport {ActionPanel} from 'landing.ui.component.actionpanel';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {BaseEvent} from 'main.core.events';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {FormClient} from 'crm.form.client';\nimport {ListSettingsField} from 'landing.ui.field.listsettingsfield';\nimport {SeparatorPanel} from 'landing.ui.panel.separatorpanel';\nimport {PageObject} from 'landing.pageobject';\nimport {Loader} from 'main.loader';\nimport type {ListItemOptions} from 'landing.ui.component.listitem';\nimport {ProductField} from 'landing.ui.field.productfield';\nimport 'calendar.resourcebookinguserfield';\nimport 'socnetlogdest';\nimport 'ui.hint';\n\nimport './css/style.css';\nimport {IconButton} from 'landing.ui.component.iconbutton';\n\nexport class FieldsListField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.FieldsListField');\n\t\tthis.setLayoutClass('landing-ui-field-fields-list');\n\n\t\tthis.onSelectFieldButtonClick = this.onSelectFieldButtonClick.bind(this);\n\t\tthis.onSelectProductsButtonClick = this.onSelectProductsButtonClick.bind(this);\n\t\tthis.onSelectSeparatorButtonClick = this.onSelectSeparatorButtonClick.bind(this);\n\t\tthis.onItemRemove = this.onItemRemove.bind(this);\n\t\tthis.onItemEdit = this.onItemEdit.bind(this);\n\t\tthis.onDragEnd = this.onDragEnd.bind(this);\n\t\tthis.onFormChange = this.onFormChange.bind(this);\n\n\t\tthis.items = [];\n\n\t\tthis.options.items.forEach((itemOptions) => {\n\t\t\tthis.addItem(itemOptions);\n\t\t});\n\n\t\tthis.actionPanel = new ActionPanel({\n\t\t\trenderTo: this.layout,\n\t\t\tleft: [\n\t\t\t\t{\n\t\t\t\t\tid: 'selectField',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_ADD_FIELD_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectFieldButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t\tright: [\n\t\t\t\t{\n\t\t\t\t\tid: 'addProducts',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_PRODUCTS_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectProductsButtonClick,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'selectSeparator',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_SEPARATOR_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectSeparatorButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.draggable = new Draggable({\n\t\t\tcontext: window.parent,\n\t\t\tcontainer: this.getListContainer(),\n\t\t\tdraggable: '.landing-ui-component-list-item',\n\t\t\tdragElement: '.landing-ui-button-icon-drag',\n\t\t\ttype: Draggable.MOVE,\n\t\t\toffset: {\n\t\t\t\ty: -62,\n\t\t\t},\n\t\t});\n\n\t\tthis.draggable.subscribe('end', this.onDragEnd);\n\t}\n\n\tcreateInput(): HTMLDivElement\n\t{\n\t\treturn this.getListContainer();\n\t}\n\n\tgetCrmFieldById(id: string)\n\t{\n\t\treturn Object.values(this.options.crmFields)\n\t\t\t.reduce((acc, category) => {\n\t\t\t\treturn [...acc, ...category.FIELDS];\n\t\t\t}, [])\n\t\t\t.find((currentField) => {\n\t\t\t\treturn currentField.name === id;\n\t\t\t});\n\t}\n\n\tgetCrmFieldCategoryById(id: string)\n\t{\n\t\treturn this.options.crmFields[id];\n\t}\n\n\taddItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.push(item);\n\t\t\t\tDom.append(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tprependItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.unshift(item);\n\t\t\t\tDom.prepend(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tinsertItemAfterIndex(itemOptions, index)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.splice((index + 1), 0, item);\n\t\t\t\tDom.insertAfter(item.getLayout(), this.getListContainer().childNodes[index]);\n\t\t\t});\n\t}\n\n\tstatic isSeparator(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\treturn (\n\t\t\t\tfieldId.startsWith('hr')\n\t\t\t\t|| fieldId.startsWith('section')\n\t\t\t\t|| fieldId.startsWith('page')\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getSeparatorTitle(fieldId: ?string): string\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('hr'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_SOLID_LINE');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('section'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_HEADER');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('page'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_PAGE');\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_SEPARATOR_TITLE');\n\t}\n\n\tisFieldAvailable(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn Type.isPlainObject(\n\t\t\t\tthis.getCrmFieldById(fieldId),\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetFieldItemTitle(fieldId: ?string): string\n\t{\n\t\tif (this.isFieldAvailable(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE');\n\t\t\t}\n\n\t\t\tconst crmField = this.getCrmFieldById(fieldId);\n\t\t\tconst crmFieldCategory = this.getCrmFieldCategoryById(crmField.entity_name);\n\n\t\t\treturn `${crmField.caption} Â· ${crmFieldCategory.CAPTION}`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tcreateResourceBookingFieldController(options: {[key: string]: any})\n\t{\n\t\tif (options.type === 'resourcebooking')\n\t\t{\n\t\t\tconst root = PageObject.getRootWindow();\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\treturn root.BX.Calendar.ResourcebookingUserfield.initCrmFormFieldController({\n\t\t\t\tfield: {\n\t\t\t\t\t...options,\n\t\t\t\t\tdict: crmField,\n\t\t\t\t\tnode: Tag.render`<div><div class=\"crm-webform-resourcebooking-wrap\"></div></div>`,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateItem(\n\t\toptions: {\n\t\t\tid: string,\n\t\t\tlabel: string,\n\t\t\tdescription: string,\n\t\t\tcontent?: any,\n\t\t\ttype?: any,\n\t\t\tseparatorTitle?: any,\n\t\t},\n\t): Promise<ListItem>\n\t{\n\t\tconst listItemOptions: ListItemOptions = {\n\t\t\tid: options.id,\n\t\t\ttype: options.type ? options.type : '',\n\t\t\tcontent: options.content,\n\t\t\tsourceOptions: {...options},\n\t\t\tdraggable: true,\n\t\t\tremovable: true,\n\t\t\tonRemove: this.onItemRemove,\n\t\t\tonEdit: this.onItemEdit,\n\t\t\tonFormChange: this.onFormChange,\n\t\t\tform: this.createFieldSettingsForm(options),\n\t\t};\n\n\t\tif (!FieldsListField.isSeparator(options.id))\n\t\t{\n\t\t\tif (this.isFieldAvailable(options.id))\n\t\t\t{\n\t\t\t\tlistItemOptions.title = this.getFieldItemTitle(options.id);\n\n\t\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\t\tlistItemOptions.description = options.label || (crmField ? crmField.caption : '');\n\t\t\t\tlistItemOptions.editable = true;\n\t\t\t\tlistItemOptions.isSeparator = false;\n\t\t\t\tlistItemOptions.fieldController = this.createResourceBookingFieldController(options);\n\n\n\t\t\t\tif (options.editing.supportAutocomplete)\n\t\t\t\t{\n\t\t\t\t\tconst autocompleteButton = new IconButton({\n\t\t\t\t\t\tid: 'autocomplete',\n\t\t\t\t\t\ttype: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn IconButton.Types.user1Active;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn IconButton.Types.user1;\n\t\t\t\t\t\t})(),\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_ENABLED');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_DISABLED');\n\t\t\t\t\t\t})(),\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.form.subscribe('onChange', (event: BaseEvent) => {\n\t\t\t\t\t\tif (event.getTarget().serialize().autocomplete)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1Active);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.actions = [\n\t\t\t\t\t\tautocompleteButton,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\t\tif (listItemOptions.fieldController)\n\t\t\t\t{\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tif (Type.isFunction(listItemOptions.fieldController.subscribe))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlistItemOptions.fieldController.subscribe('afterInit', (event) => {\n\t\t\t\t\t\t\t\toptions.booking.settings_data = event.getData().settings.data;\n\t\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(listItem);\n\t\t\t}\n\n\t\t\tlistItemOptions.editable = false;\n\t\t\tlistItemOptions.isSeparator = false;\n\t\t\tlistItemOptions.title = '';\n\t\t\tlistItemOptions.description = Loc.getMessage('LANDING_FIELDS_ITEM_FIELD_UNAVAILABLE');\n\t\t\tlistItemOptions.error = true;\n\n\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\treturn Promise.resolve(listItem);\n\t\t}\n\n\t\tlistItemOptions.isSeparator = true;\n\t\tlistItemOptions.editable = !String(options.id).startsWith('hr_');\n\t\tlistItemOptions.title = FieldsListField.getSeparatorTitle(options.id);\n\n\t\tif (Type.isString(options.label))\n\t\t{\n\t\t\tlistItemOptions.description = options.label;\n\t\t}\n\t\telse if (String(options.id).startsWith('hr_'))\n\t\t{\n\t\t\tlistItemOptions.description = FieldsListField.getSeparatorTitle(options.id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\tif (Type.isPlainObject(crmField) && Type.isString(crmField.caption))\n\t\t\t{\n\t\t\t\tlistItemOptions.description = crmField.caption;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlistItemOptions.description = '';\n\t\t\t}\n\t\t}\n\n\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\treturn Promise.resolve(listItem);\n\t}\n\n\tcreateCustomPriceDropdown(field)\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'customPrice',\n\t\t\tselector: 'customPrice',\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE_NOT_SELECTED'), value: null},\n\t\t\t\t...(field.items.map((item) => {\n\t\t\t\t\treturn {name: item.label, value: item.value};\n\t\t\t\t})),\n\t\t\t],\n\t\t\tcontent: field.items.reduce((acc, item) => {\n\t\t\t\tif (item.changeablePrice && acc === null)\n\t\t\t\t{\n\t\t\t\t\treturn item.value;\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, null),\n\t\t});\n\t}\n\n\tcreateProductDefaultValueDropdown(field)\n\t{\n\t\tconst defaultValueField = new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'productDefaultValue',\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\n\t\tif (field.items.length > 0)\n\t\t{\n\t\t\tdefaultValueField.enable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdefaultValueField.disable();\n\t\t}\n\n\t\treturn defaultValueField;\n\t}\n\n\tcreateDefaultValueField(field): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tcreateFieldSettingsForm(field)\n\t{\n\t\tconst fields = [];\n\t\tconst form = new FormSettingsForm({\n\t\t\tserializeModifier(value) {\n\t\t\t\tconst modifiedValue = {...value};\n\t\t\t\tif (Reflect.has(value, 'label'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.label = Text.decode(value.label);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'required'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.required = value.required.includes('required');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'multiple'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.multiple = value.multiple.includes('multiple');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'bigPic'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.bigPic = value.bigPic.includes('bigPic');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(value.items))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = modifiedValue.items.map((item) => {\n\t\t\t\t\t\titem.selected = (value.value === item.value);\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'products'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = Runtime.clone(value.products);\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(modifiedValue.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\t\titem.selected = (String(value.value) === String(item.value));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.catalog = Runtime.clone(value.products);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'valueType'))\n\t\t\t\t{\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing.editable))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing.editable = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.editable.valueType = value.valueType;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.useCustomPrice))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\titem.changeablePrice = (\n\t\t\t\t\t\t\tvalue.useCustomPrice.includes('useCustomPrice')\n\t\t\t\t\t\t\t&& String(item.value) === String(value.customPrice)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tdelete modifiedValue.customPrice;\n\t\t\t\t\tdelete modifiedValue.useCustomPrice;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.autocomplete))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.autocomplete = value.autocomplete.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(value.contentTypes))\n\t\t\t\t{\n\t\t\t\t\tif (value.contentTypes.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.contentTypes = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn modifiedValue;\n\t\t\t},\n\t\t});\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew ProductField({\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE2'),\n\t\t\t\t\tselector: 'products',\n\t\t\t\t\titems: field.editing.catalog || [],\n\t\t\t\t\tiblockId: this.options.dictionary.catalog.id,\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tconst oldCustomPrice = form.fields.get('customPrice');\n\t\t\t\t\t\tconst newCustomPrice = this.createCustomPriceDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\t\t\t\treturn item.changeablePrice;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPriceField = form.fields.get('useCustomPrice');\n\n\t\t\t\t\t\tif (useCustomPrice || useCustomPriceField.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', 'none');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewCustomPrice.setValue(oldCustomPrice.getValue());\n\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldCustomPrice,\n\t\t\t\t\t\t\tnewCustomPrice,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst oldDefaultValue = form.fields.get('productDefaultValue');\n\t\t\t\t\t\tconst newDefaultValue = this.createProductDefaultValueDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldDefaultValue,\n\t\t\t\t\t\t\tnewDefaultValue,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasLabel)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'label',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LABEL_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.label,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeRequired)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'required',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_REQUIRED_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'required',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.required ? ['required'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeMultiple)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'multiple',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MULTIPLE_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'multiple',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.multiple ? ['multiple'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasStringDefaultValue)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'value',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DEFAULT_VALUE_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.value,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'bigPic',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_SHOW_BIG_PICTURE'),\n\t\t\t\t\t\t\tvalue: 'bigPic',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.bigPic ? ['bigPic'] : [],\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\treturn item.changeablePrice;\n\t\t\t});\n\n\t\t\tconst customPriceField = this.createCustomPriceDropdown(field);\n\t\t\tif (useCustomPrice)\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t}\n\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tid: 'useCustomPrice',\n\t\t\t\t\tselector: 'useCustomPrice',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE'),\n\t\t\t\t\t\t\tvalue: 'useCustomPrice',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: useCustomPrice ? ['useCustomPrice'] : [],\n\t\t\t\t\tonChange: (checkbox) => {\n\t\t\t\t\t\tif (checkbox instanceof BaseField)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst customPriceField = form.fields.get('customPrice');\n\t\t\t\t\t\t\tif (checkbox.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tfields.push(customPriceField);\n\n\t\t\tfields.push(this.createProductDefaultValueDropdown(field));\n\t\t}\n\n\t\tif (['list', 'radio'].includes(field.type) && field.editing.items.length > 0)\n\t\t{\n\t\t\tconst defaultValueField = this.createDefaultValueField(field);\n\t\t\tconst listSettingsField = new ListSettingsField({\n\t\t\t\tselector: 'items',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_SETTINGS_TITLE'),\n\t\t\t\titems: (() => {\n\t\t\t\t\treturn field.editing.items.map((item) => {\n\t\t\t\t\t\tconst selectedItem = field.items.find((currentItem) => {\n\t\t\t\t\t\t\treturn String(currentItem.value) === String(item.id);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst checked = !!selectedItem;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: checked ? selectedItem.label : item.value,\n\t\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\t\tchecked,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t})(),\n\t\t\t});\n\n\t\t\tlistSettingsField.subscribe('onChange', () => {\n\t\t\t\tconst currentDefaultValueField = form.fields.find((item) => {\n\t\t\t\t\treturn item.selector === 'value';\n\t\t\t\t});\n\t\t\t\tform.replaceField(\n\t\t\t\t\tcurrentDefaultValueField,\n\t\t\t\t\tthis.createDefaultValueField({\n\t\t\t\t\t\t...field,\n\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\tvalue: currentDefaultValueField.getValue(),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tfields.push(listSettingsField);\n\t\t\tfields.push(defaultValueField);\n\t\t}\n\n\t\tif (\n\t\t\tType.isPlainObject(field.editing)\n\t\t\t&& Type.isArrayFilled(field.editing.valueTypes)\n\t\t)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Dropdown({\n\t\t\t\t\tselector: 'valueType',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_VALUE_TYPE'),\n\t\t\t\t\tcontent: field.editing.editable.valueType,\n\t\t\t\t\titems: field.editing.valueTypes.map((item) => {\n\t\t\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tfield.type === 'file'\n\t\t\t&& Type.isArrayFilled(this.options.dictionary.contentTypes)\n\t\t)\n\t\t{\n\t\t\tconst adjustContentTypesField = (value) => {\n\t\t\t\tif (value.includes('any'))\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tif (Dom.attr(input, 'value') === 'any')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.addClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst selectedContentTypes = Type.isArrayFilled(field.contentTypes) ? field.contentTypes : ['any'];\n\t\t\tlet lastValue = selectedContentTypes;\n\t\t\tconst contentTypesField = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'contentTypes',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_FILE_TYPE'),\n\t\t\t\tvalue: selectedContentTypes,\n\t\t\t\titems: [\n\t\t\t\t\t(() => {\n\t\t\t\t\t\tif (Loc.hasMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'),\n\t\t\t\t\t\t\t\tvalue: 'any',\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})(),\n\t\t\t\t\t...this.options.dictionary.contentTypes.map((item) => {\n\t\t\t\t\t\tconst hint = item.hint\n\t\t\t\t\t\t\t? `<span class=\"ui-hint\" data-hint=\"${Text.encode(item.hint)}\"></span>`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtml: `<span style=\"display: flex; align-items: center;\">${Text.encode(item.name)} ${hint}</span>`,\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tvalue: item.id\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\tonValueChange: () => {\n\t\t\t\t\tconst value = contentTypesField.getValue();\n\n\t\t\t\t\tif (value.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (lastValue.includes('any'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(value.filter((item) => item !== 'any'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(['any']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlastValue = contentTypesField.getValue();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tBX.UI.Hint.init(contentTypesField.getLayout());\n\t\t\tfields.push(contentTypesField);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportAutocomplete) === true)\n\t\t{\n\t\t\tfields.push(new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'autocomplete',\n\t\t\t\tcompact: true,\n\t\t\t\tmultiple: false,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'),\n\t\t\t\t\t\thtml: Text.encode(Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'))\n\t\t\t\t\t\t\t+ `<span \n\t\t\t\t\t\t\t\t\tclass=\"landing-ui-form-help\" \n\t\t\t\t\t\t\t\t\tstyle=\"margin: 0 0 0 5px;\"\n\t\t\t\t\t\t\t\t\tonclick=\"top.BX.Helper.show('redirect=detail&code=14611764'); return false;\"\n\t\t\t\t\t\t\t\t><a href=\"javascript: void();\"></a></span>`\n\t\t\t\t\t\t,\n\t\t\t\t\t\tvalue: 'autocomplete',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tvalue: field.autocomplete ? ['autocomplete'] : false,\n\t\t\t}));\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.hasHint) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'hint',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_FIELD_HINT_TITLE'),\n\t\t\t\t\tcontent: field.hint,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportHintOnFocus) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'hintOnFocus',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_HINT_ON_FOCUS'),\n\t\t\t\t\t\t\tvalue: 'hintOnFocus',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.hintOnFocus ? ['hintOnFocus'] : false,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tfields.forEach((currentField) => {\n\t\t\tform.addField(currentField);\n\t\t});\n\n\t\treturn form;\n\t}\n\n\tgetListContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('listContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-fields-list-container\"></div>`;\n\t\t});\n\t}\n\n\tonSelectFieldButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tFieldsPanel\n\t\t\t.getInstance({\n\t\t\t\tisLeadEnabled: this.options.isLeadEnabled,\n\t\t\t})\n\t\t\t.show({\n\t\t\t\tdisabledFields: this.items.map((item) => item.options.id),\n\t\t\t})\n\t\t\t.then((selectedFields) => {\n\t\t\t\tif (Type.isArrayFilled(selectedFields))\n\t\t\t\t{\n\t\t\t\t\tthis.options.crmFields = FieldsPanel.getInstance().getOriginalCrmFields();\n\t\t\t\t\tthis.onFieldsSelect(selectedFields);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tonFieldsSelect(selectedFields: Array<string>)\n\t{\n\t\tconst preparingOptions = {\n\t\t\tfields: selectedFields.map((fieldId) => {\n\t\t\t\treturn {name: fieldId};\n\t\t\t}),\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tresult.data.fields.map((field) => {\n\t\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t});\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.items.map((item) => {\n\t\t\treturn item.getValue();\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonSelectProductsButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst preparingOptions = {\n\t\t\tfields: [\n\t\t\t\t{type: 'product'},\n\t\t\t],\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient\n\t\t\t.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\tconst promises = result.data.fields.map((field) => {\n\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t});\n\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonSelectSeparatorButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tSeparatorPanel.getInstance()\n\t\t\t.show()\n\t\t\t.then((separator) => {\n\t\t\t\tconst fields = [separator];\n\n\t\t\t\tif (\n\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tfields.push({...fields[0]});\n\t\t\t\t}\n\n\t\t\t\tvoid this.showLoader();\n\n\t\t\t\tFormClient.getInstance()\n\t\t\t\t\t.prepareOptions(this.options.formOptions, {fields})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\t\t\tlet separatorPromise = Promise.resolve();\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields[0].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 1);\n\t\t\t\t\t\t\tresult.data.fields[1].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 2);\n\n\t\t\t\t\t\t\tseparatorPromise = Promise.all([\n\t\t\t\t\t\t\t\tthis.prependItem(result.data.fields[0]),\n\t\t\t\t\t\t\t\tthis.insertItemAfterIndex(result.data.fields[1], 1),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields.forEach((field) => {\n\t\t\t\t\t\t\t\tconst [type] = field.id.split('_');\n\t\t\t\t\t\t\t\tconst count = this.items.filter((item) => {\n\t\t\t\t\t\t\t\t\treturn item.options.id.startsWith(type);\n\t\t\t\t\t\t\t\t}).length;\n\n\t\t\t\t\t\t\t\tif (type === 'page')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'section')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_SECTION_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'hr')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_LINE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tseparatorPromise = this.addItem(field);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseparatorPromise.then(() => {\n\t\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonItemRemove(event: BaseEvent)\n\t{\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== event.getTarget();\n\t\t});\n\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tonItemEdit(event: BaseEvent)\n\t{\n\t\tconst {options} = event.getTarget();\n\t\tif (options.fieldController)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\toptions.fieldController.showSettingsPopup();\n\t\t\tsetTimeout(() => {\n\t\t\t\toptions.fieldController.settingsPopup.subscribeOnce('onClose', () => {\n\t\t\t\t\toptions.sourceOptions.booking.settings_data = options.fieldController.getSettings().data;\n\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tconst {settings_data} = options.sourceOptions.booking;\n\t\t\t\t\tObject.keys(settings_data).forEach((key) => {\n\t\t\t\t\t\tif (Type.isArray(settings_data[key].value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsettings_data[key].value = settings_data[key].value.join('|');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tonFormChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\n\t\tconst target = event.getTarget();\n\t\tconst value = target.getValue();\n\n\t\ttarget.setDescription(value.label);\n\t}\n\n\tonDragEnd()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.items = [...this.getListContainer().children].map((itemNode) => {\n\t\t\t\tconst itemNodeId = Dom.attr(itemNode, 'data-id');\n\t\t\t\treturn this.items.find((item) => {\n\t\t\t\t\treturn item.options.id === itemNodeId;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t});\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 50,\n\t\t\t\tmode: 'inline',\n\t\t\t\toffset: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tleft: '225px',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tconst container = this.getListContainer();\n\t\tDom.append(loader.layout, container);\n\t\treturn loader.show(container);\n\t}\n\n\thideLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tDom.remove(loader.layout);\n\t\treturn loader.hide();\n\t}\n}"],"names":["FieldsListField","options","setEventNamespace","setLayoutClass","onSelectFieldButtonClick","bind","onSelectProductsButtonClick","onSelectSeparatorButtonClick","onItemRemove","onItemEdit","onDragEnd","onFormChange","items","forEach","itemOptions","addItem","actionPanel","ActionPanel","renderTo","layout","left","id","text","Loc","getMessage","onClick","right","draggable","Draggable","context","window","parent","container","getListContainer","dragElement","type","MOVE","offset","y","subscribe","Object","values","crmFields","reduce","acc","category","FIELDS","find","currentField","name","createItem","then","item","push","Dom","append","getLayout","unshift","prepend","index","splice","insertAfter","childNodes","fieldId","Type","isStringFilled","startsWith","isPlainObject","getCrmFieldById","isFieldAvailable","crmField","crmFieldCategory","getCrmFieldCategoryById","entity_name","caption","CAPTION","root","PageObject","getRootWindow","BX","Calendar","ResourcebookingUserfield","initCrmFormFieldController","field","dict","node","Tag","render","listItemOptions","content","sourceOptions","removable","onRemove","onEdit","form","createFieldSettingsForm","isSeparator","title","getFieldItemTitle","description","label","editable","fieldController","createResourceBookingFieldController","editing","supportAutocomplete","autocompleteButton","IconButton","autocomplete","Types","user1Active","user1","style","opacity","cursor","event","getTarget","serialize","setType","actions","listItem","ListItem","Promise","resolve","isFunction","booking","settings_data","getData","settings","data","error","String","getSeparatorTitle","isString","Landing","UI","Field","Dropdown","selector","value","map","changeablePrice","defaultValueField","length","enable","disable","fields","FormSettingsForm","serializeModifier","modifiedValue","Reflect","has","Text","decode","required","includes","multiple","bigPic","isArrayFilled","selected","Runtime","clone","products","catalog","valueType","isArray","useCustomPrice","customPrice","contentTypes","ProductField","iblockId","dictionary","onChange","oldCustomPrice","get","newCustomPrice","createCustomPriceDropdown","some","useCustomPriceField","getValue","setValue","replaceField","oldDefaultValue","newDefaultValue","createProductDefaultValueDropdown","hasLabel","TextField","textOnly","canBeRequired","Checkbox","compact","canBeMultiple","hasStringDefaultValue","customPriceField","checkbox","BaseField","createDefaultValueField","listSettingsField","ListSettingsField","selectedItem","currentItem","checked","currentDefaultValueField","valueTypes","selectedContentTypes","lastValue","contentTypesField","hasMessage","undefined","hint","encode","html","onValueChange","filter","Hint","init","toBoolean","hasHint","supportHintOnFocus","hintOnFocus","addField","cache","remember","preventDefault","FieldsPanel","getInstance","isLeadEnabled","show","disabledFields","selectedFields","getOriginalCrmFields","onFieldsSelect","preparingOptions","showLoader","FormClient","prepareOptions","formOptions","result","hideLoader","all","emit","skipPrepare","promises","SeparatorPanel","separator","separatorPromise","replace","prependItem","insertItemAfterIndex","split","count","showSettingsPopup","setTimeout","settingsPopup","subscribeOnce","getSettings","keys","key","join","target","setDescription","children","itemNode","itemNodeId","attr","Loader","size","mode","top","loader","getLoader","remove","hide"],"mappings":"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"}