{"version":3,"file":"datetimefield.bundle.js","sources":["../src/datetimefield.js"],"sourcesContent":["import {Type, Event} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Loc} from 'landing.loc';\n\nexport class DateTimeField extends BaseField\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper({\n\t\t\t...options,\n\t\t\tcontent: options.content || options.value || '',\n\t\t\ttextOnly: true,\n\t\t});\n\n\t\tEvent.bind(this.input, 'click', this.onInputClick.bind(this));\n\t}\n\n\tgetFormat(): string\n\t{\n\t\treturn BX.date.convertBitrixFormat(\n\t\t\tLoc.getMessage(this.options.time ? 'FORMAT_DATETIME' : 'FORMAT_DATE'),\n\t\t);\n\t}\n\n\tshowDatepicker()\n\t{\n\t\tthis.getContext().BX.calendar({\n\t\t\tnode: this.input,\n\t\t\tfield: this.input,\n\t\t\tbTime: this.options.time,\n\t\t\tvalue: BX.date.format(this.getFormat(), this.getValue() || (new Date())),\n\t\t\tbHideTime: !this.options.time,\n\t\t\tcallback_after: (date) => {\n\t\t\t\tthis.setValue(BX.date.format(this.getFormat(), date));\n\t\t\t},\n\t\t});\n\t}\n\n\tsetValue(value: string)\n\t{\n\t\tsuper.setValue(value);\n\t\tthis.emit('onChange');\n\t}\n\n\tonInputClick()\n\t{\n\t\tthis.showDatepicker();\n\t}\n}"],"names":["DateTimeField","options","content","value","textOnly","Event","bind","input","onInputClick","BX","date","convertBitrixFormat","Loc","getMessage","time","getContext","calendar","node","field","bTime","format","getFormat","getValue","Date","bHideTime","callback_after","setValue","emit","showDatepicker","BaseField"],"mappings":";;;;;;KAIaA,aAAb;CAAA;;CAEC,2BACA;CAAA;;CAAA,QADYC,OACZ,uEADsB,EACtB;CAAA;CACC,6IACIA,OADJ;CAECC,MAAAA,OAAO,EAAED,OAAO,CAACC,OAAR,IAAmBD,OAAO,CAACE,KAA3B,IAAoC,EAF9C;CAGCC,MAAAA,QAAQ,EAAE;CAHX;CAMAC,IAAAA,eAAK,CAACC,IAAN,CAAW,MAAKC,KAAhB,EAAuB,OAAvB,EAAgC,MAAKC,YAAL,CAAkBF,IAAlB,2CAAhC;CAPD;CAQC;;CAXF;CAAA;CAAA,gCAcC;CACC,aAAOG,EAAE,CAACC,IAAH,CAAQC,mBAAR,CACNC,eAAG,CAACC,UAAJ,CAAe,KAAKZ,OAAL,CAAaa,IAAb,GAAoB,iBAApB,GAAwC,aAAvD,CADM,CAAP;CAGA;CAlBF;CAAA;CAAA,qCAqBC;CAAA;;CACC,WAAKC,UAAL,GAAkBN,EAAlB,CAAqBO,QAArB,CAA8B;CAC7BC,QAAAA,IAAI,EAAE,KAAKV,KADkB;CAE7BW,QAAAA,KAAK,EAAE,KAAKX,KAFiB;CAG7BY,QAAAA,KAAK,EAAE,KAAKlB,OAAL,CAAaa,IAHS;CAI7BX,QAAAA,KAAK,EAAEM,EAAE,CAACC,IAAH,CAAQU,MAAR,CAAe,KAAKC,SAAL,EAAf,EAAiC,KAAKC,QAAL,MAAoB,IAAIC,IAAJ,EAArD,CAJsB;CAK7BC,QAAAA,SAAS,EAAE,CAAC,KAAKvB,OAAL,CAAaa,IALI;CAM7BW,QAAAA,cAAc,EAAE,wBAACf,IAAD,EAAU;CACzB,UAAA,MAAI,CAACgB,QAAL,CAAcjB,EAAE,CAACC,IAAH,CAAQU,MAAR,CAAe,MAAI,CAACC,SAAL,EAAf,EAAiCX,IAAjC,CAAd;CACA;CAR4B,OAA9B;CAUA;CAhCF;CAAA;CAAA,6BAkCUP,KAlCV,EAmCC;CACC,0GAAeA,KAAf;CACA,WAAKwB,IAAL,CAAU,UAAV;CACA;CAtCF;CAAA;CAAA,mCAyCC;CACC,WAAKC,cAAL;CACA;CA3CF;CAAA;CAAA,EAAmCC,oCAAnC;;;;;;;;"}