this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.Ui=this.BX.Landing.Ui||{};(function(e,t,i,s,n,a,o){"use strict";var r=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));i.setEventNamespace("BX.Landing.UI.Field.ProductField");i.setLayoutClass("landing-ui-field-product");i.onBasketChange=i.onBasketChange.bind(babelHelpers.assertThisInitialized(i));a.Dom.append(i.getProductSelector().wrapper,i.input);i.setProducts(i.options.items);var s=n.PageObject.getRootWindow();s.BX.Event.EventEmitter.subscribe(i.getProductSelector(),"ProductForm:onBasketChange",i.onBasketChange);return i}babelHelpers.createClass(t,[{key:"setProducts",value:function e(t){this.cache.set("products",a.Runtime.clone(t))}},{key:"getProducts",value:function e(){return this.cache.get("products")||[]}},{key:"onBasketChange",value:function e(t){var i=t.getData();this.setProducts(i.basket);this.emit("onChange",{skipPrepare:true})}},{key:"getValue",value:function e(){return this.getProducts().reduce(function(e,t){if(!a.Type.isNil(t.fields.productId)){e.push({label:t.fields.name,changeablePrice:false,discount:t.fields.discount,pics:[],price:t.fields.price,quantity:[],selected:false,value:t.fields.productId})}return e},[])}},{key:"getProductSelector",value:function e(){var t=this;return this.cache.remember("productSelector",function(){var e=n.PageObject.getRootWindow();return new e.BX.Catalog.ProductForm({iblockId:t.options.iblockId,showResults:false,allowedDiscountTypes:[s.DiscountType.MONETARY],buttonsPosition:"BOTTOM",newItemPosition:"BOTTOM",basket:t.options.items})})}}]);return t}(t.BaseField);e.ProductField=r})(this.BX.Landing.Ui.Field=this.BX.Landing.Ui.Field||{},BX.Landing.UI.Field,BX.Catalog,BX.Catalog,BX.Landing,BX,BX.Event);
//# sourceMappingURL=productfield.bundle.map.js