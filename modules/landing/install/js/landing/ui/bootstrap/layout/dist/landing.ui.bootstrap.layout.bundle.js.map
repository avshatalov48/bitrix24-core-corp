{"version":3,"file":"landing.ui.bootstrap.layout.bundle.js","sources":["../src/ui/layout.js","../src/layout.js"],"sourcesContent":["import { Tag } from 'main.core';\n\ntype workGridOptions = {\n\trowNumber: number,\n\trowsNumber: number,\n\tcols: Array<number>,\n\tonNewRowClick: () => {},\n\tonRemoveRowClick: () => {},\n\tonIncColClick: () => {},\n\tonNewColClick: () => {}\n};\n\nexport class LayoutUI\n{\n\n\tstatic getWrapper(): HTMLDivElement\n\t{\n\t\treturn Tag.render`<div class=\"landing-bootstrap-layout-wrapper\"></div>`;\n\t}\n\n\tstatic getModeSelector(currentSize: string, onChangeView: () => {}): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-bootstrap-layout-switcher\">\n\t\t\t\t${['md', 'sm', 'xs'].map(size => {\n\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t<span onclick=\"${() => onChangeView ? onChangeView(size) : {}}\" class=\"${currentSize === size ? 'active' : ''}\">${size}</span>\n\t\t\t\t\t`;\n\t\t\t\t})}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tstatic getBackground(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-bootstrap-layout-background container\">\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t${[...(new Array(12))].map(() => {\n\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t<div class=\"col grid-item\">\n\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\t\t\t\t})}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tstatic getHoverColMenu(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-bootstrap-layout-wrapper-col-menu\">\n\t\t\t\t<div data-command=\"remove\">x</div>\n\t\t\t\t<div data-command=\"decrease\">&larr;</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tstatic getWorkGrid(options: workGridOptions): HTMLDivElement\n\t{\n\t\tlet nums = 0;\n\t\tconst rowNumber = parseInt(options.rowNumber);\n\t\tconst {\n\t\t\trowsNumber,\n\t\t\tcols,\n\t\t\tonNewRowClick,\n\t\t\tonRemoveRowClick,\n\t\t\tonIncColClick,\n\t\t\tonNewColClick\n\t\t} = options;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-bootstrap-layout-work container\">\n\t\t\t\t<div class=\"row\">\n\t\t\t\t\t${rowsNumber <= 1 ? '' :\n\t\t\t\t\tTag.render`\n\t\t\t\t\t\t<div class=\"landing-bootstrap-layout-remove-row\" onclick=\"${() => onRemoveRowClick ? onRemoveRowClick(rowNumber) : {}}\">\n\t\t\t\t\t\t\t-\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`}\n\t\t\t\t\t${Tag.render`\n\t\t\t\t\t\t<div class=\"landing-bootstrap-layout-add-row\" onclick=\"${() => onNewRowClick ? onNewRowClick(rowNumber) : {}}\">\n\t\t\t\t\t\t\t+\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`}\n\t\t\t\t\t${cols.map((col, i) => {\n\t\t\t\t\t\tnums += col > 0 ? col : 1;\n\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t<div class=\"${col > 0 ? `col-${col}` : 'col'} grid-item\" onclick=\"${() => onIncColClick ? onIncColClick(rowNumber, i) : {}}\">\n\t\t\t\t\t\t\t\t<div data-ready=\"true\" data-rowNumber=\"${rowNumber}\" data-colNumber=\"${i}\">${col}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`;\n\t\t\t\t\t})}\n\t\t\t\t\t${nums >= 12 ? '' :\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<div class=\"col-1 grid-item grid-item-last\" onclick=\"${() => onNewColClick ? onNewColClick(rowNumber) : {}}\">\n\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tstatic getResult(matrix): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"container\">\n\t\t\t\t${matrix.map(row => {\n\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t<div class=\"row ${row['classes'] ? row['classes'] : ''}\">\n\t\t\t\t\t\t\t${row['cols'].map((col, i) => {\n\t\t\t\t\t\t\t\tconst classes = col.classes ? col.classes.split(' ') : [];\n\t\t\t\t\t\t\t\tObject.keys(col.sizes).map(size => {\n\t\t\t\t\t\t\t\t\tconst colValue = (size === 'xs') ? `col-${col.sizes[size]}` : `col-${size}-${col.sizes[size]}`;\n\t\t\t\t\t\t\t\t\tif (!classes.includes(colValue))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tclasses.push(colValue);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn Tag.render`\n\t\t\t\t\t\t\t\t\t<div class=\"${classes.join(' ')}\">\n\t\t\t\t\t\t\t\t\t\t${col.content ? col.content : '<div class=\"test-height\"></div>'}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\t\t\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t})}\n\t\t\t</div>\n\t\t`;\n\t}\n}","import { Dom, Event } from 'main.core';\nimport { LayoutUI } from './ui/layout';\n\nimport './layout.css';\n\ntype LayoutParamsType = {\n\tresult: HTMLElement\n};\n\nexport class Layout\n{\n\tresult: HTMLElement;\n\twrapper: HTMLElement;\n\tcontainer: HTMLElement;\n\tcolMenu: HTMLElement;\n\tcurrentSize: string = 'md';\n\t// @todo: all attrs too\n\tgridMatrix = [];\n\n\tconstructor(container: HTMLElement, params: LayoutParamsType)\n\t{\n\t\tthis.container = container;\n\t\tthis.colMenu = LayoutUI.getHoverColMenu();\n\n\t\tif (params)\n\t\t{\n\t\t\tthis.result = params.result || null;\n\t\t}\n\n\t\tthis.onChangeView = this.onChangeView.bind(this);\n\t\tthis.onNewRowClick = this.onNewRowClick.bind(this);\n\t\tthis.onRemoveRowClick = this.onRemoveRowClick.bind(this);\n\t\tthis.onIncColClick = this.onIncColClick.bind(this);\n\t\tthis.onNewColClick = this.onNewColClick.bind(this);\n\n\t\tEvent.bind(this.container, 'mouseover', (e) => {\n\t\t\tthis.onMouseOver(e);\n\t\t});\n\t\tEvent.bind(this.container, 'mouseout', (e) => {\n\t\t\tthis.onMouseOut(e);\n\t\t});\n\t\tEvent.bind(this.colMenu, 'click', (e) => {\n\t\t\tthis.onColMenuClick(e);\n\t\t});\n\n\t\tthis.loadMatrix();\n\t\tthis.drawMatrix();\n\t}\n\n\tgetResult(): HTMLDivElement\n\t{\n\t\treturn LayoutUI.getResult(this.gridMatrix);\n\t}\n\n\tgetColsInRow(rowNumber: number): Array<number>\n\t{\n\t\tconst cols = [];\n\n\t\tif (this.gridMatrix[rowNumber])\n\t\t{\n\t\t\tthis.gridMatrix[rowNumber].cols.map(colItem => {\n\t\t\t\tcols.push(colItem.sizes[this.currentSize] ? colItem.sizes[this.currentSize] : 0);\n\t\t\t});\n\t\t}\n\n\t\treturn cols;\n\t}\n\n\tgetSumInRow(rowNumber: number): number\n\t{\n\t\treturn this.getColsInRow(rowNumber).reduce((sum, x) => sum + x);\n\t}\n\n\tfillZero(rowNumber: number)\n\t{\n\t\tconst cols = this.getColsInRow(rowNumber);\n\t\tif (cols[0] <= 0)\n\t\t{\n\t\t\tconst rowLength = this.gridMatrix[rowNumber]['cols'].length;\n\t\t\tconst newCol = parseInt(12 / rowLength);\n\t\t\tthis.gridMatrix[rowNumber]['cols'].map(colItem => {\n\t\t\t\tcolItem.sizes[this.currentSize] = newCol;\n\t\t\t});\n\t\t}\n\t}\n\n\tquerySelectorAll(node, regex, attribute) {\n\t\tconst output = [];\n\t\tfor (let element of node.querySelectorAll(`[${attribute}]`))\n\t\t{\n\t\t\tif (regex.test(element.getAttribute(attribute)))\n\t\t\t{\n\t\t\t\toutput.push(element);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\tloadMatrix()\n\t{\n\t\t// @todo: all attrs too\n\t\tthis.gridMatrix = [];\n\t\tif (this.result)\n\t\t{\n\t\t\t[...this.result.querySelectorAll('.row')].map(row => {\n\t\t\t\tconst cols = [];\n\t\t\t\t[...this.querySelectorAll(row, /col[a-z-]*[\\d]+/, 'class')].map(col => {\n\t\t\t\t\tconst newCol = {sizes: {}};\n\t\t\t\t\tconst classes = col.getAttribute('class');\n\t\t\t\t\tconst found1 = classes.match(/col-([a-z]+)-([\\d]+)/g);\n\t\t\t\t\tconst found2 = classes.match(/col-([\\d]+)/g);\n\t\t\t\t\tif (found1)\n\t\t\t\t\t{\n\t\t\t\t\t\tfound1.map(f => {\n\t\t\t\t\t\t\tnewCol.sizes[f.split('-')[1]] = parseInt(f.split('-')[2]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (found2)\n\t\t\t\t\t{\n\t\t\t\t\t\tfound2.map(f => {\n\t\t\t\t\t\t\tnewCol.sizes['xs'] = parseInt(f.split('-')[1]);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (found1 || found2)\n\t\t\t\t\t{\n\t\t\t\t\t\tnewCol['content'] = col.innerHTML;\n\t\t\t\t\t\tnewCol['classes'] = col.getAttribute('class').replace(/col[a-z-]*[\\d]+/g, '');\n\t\t\t\t\t\tcols.push(newCol);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.gridMatrix.push({\n\t\t\t\t\tclasses: row.getAttribute('class') || null,\n\t\t\t\t\tcols\n\t\t\t\t});\n\t\t\t});\n\t\t\tconsole.log(this.gridMatrix);\n\t\t}\n\t}\n\n\tdrawMatrix()\n\t{\n\t\tDom.clean(this.container);\n\t\tthis.container.appendChild(this.colMenu);\n\n\t\tconst rowsNumber = this.gridMatrix.length;\n\n\t\tthis.container.appendChild(LayoutUI.getModeSelector(this.currentSize, this.onChangeView));\n\n\t\tObject.keys(this.gridMatrix).map(rowNumber => {\n\t\t\tconst wrapper = LayoutUI.getWrapper();\n\t\t\tconst cols = this.getColsInRow(rowNumber);\n\n\t\t\twrapper.appendChild(LayoutUI.getBackground());\n\t\t\twrapper.appendChild(LayoutUI.getWorkGrid({\n\t\t\t\trowNumber,\n\t\t\t\trowsNumber,\n\t\t\t\tcols,\n\t\t\t\tonNewRowClick: this.onNewRowClick,\n\t\t\t\tonRemoveRowClick: this.onRemoveRowClick,\n\t\t\t\tonIncColClick: this.onIncColClick,\n\t\t\t\tonNewColClick: this.onNewColClick\n\t\t\t}));\n\t\t\tthis.container.appendChild(wrapper);\n\t\t});\n\n\t\tif (this.result)\n\t\t{\n\t\t\tDom.clean(this.result);\n\t\t\tthis.result.appendChild(this.getResult());\n\t\t}\n\t}\n\n\tonChangeView(size: string)\n\t{\n\t\tthis.currentSize = size;\n\t\tthis.drawMatrix();\n\t}\n\n\tonRemoveRowClick(rowNumber: number)\n\t{\n\t\tthis.gridMatrix = this.gridMatrix.filter((item, number) => number !== rowNumber);\n\t\tthis.drawMatrix();\n\t}\n\n\tonNewRowClick(rowNumber: number)\n\t{\n\t\tif (this.gridMatrix[rowNumber])\n\t\t{\n\t\t\tconst sizes = {};\n\t\t\tsizes[this.currentSize] = 1;\n\t\t\tconst newRow = {\n\t\t\t\tclasses: null,\n\t\t\t\tcols: [{sizes}]\n\t\t\t}\n\t\t\tthis.gridMatrix.splice(rowNumber + 1, 0, newRow);\n\t\t}\n\t\tthis.drawMatrix();\n\t}\n\n\tonIncColClick(rowNumber: number, colNumber: number)\n\t{\n\t\tthis.fillZero(rowNumber);\n\t\tif (this.getSumInRow(rowNumber) < 12)\n\t\t{\n\t\t\tthis.gridMatrix[rowNumber]['cols'][colNumber]['sizes'][this.currentSize]++;\n\t\t}\n\t\tthis.drawMatrix();\n\t}\n\n\tonDecColClick(rowNumber: number, colNumber: number)\n\t{\n\t\tthis.fillZero(rowNumber);\n\t\tif (this.gridMatrix[rowNumber])\n\t\t{\n\t\t\tif (this.gridMatrix[rowNumber]['cols'][colNumber]['sizes'][this.currentSize] > 1) {\n\t\t\t\tthis.gridMatrix[rowNumber]['cols'][colNumber]['sizes'][this.currentSize]--;\n\t\t\t} else {\n\t\t\t\tthis.onRemoveColClick(rowNumber, colNumber);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.drawMatrix();\n\t}\n\n\tonNewColClick(rowNumber: number)\n\t{\n\t\tthis.fillZero(rowNumber);\n\t\tif (this.gridMatrix[rowNumber])\n\t\t{\n\t\t\tconst sizes = {};\n\t\t\tsizes[this.currentSize] = 1;\n\t\t\tthis.gridMatrix[rowNumber]['cols'].push({sizes});\n\t\t}\n\t\tthis.drawMatrix();\n\t}\n\n\tonRemoveColClick(rowNumber: number, colNumber: number)\n\t{\n\t\tthis.fillZero(rowNumber);\n\t\tif (this.gridMatrix[rowNumber])\n\t\t{\n\t\t\tthis.gridMatrix[rowNumber]['cols'] = this.gridMatrix[rowNumber]['cols'].filter(\n\t\t\t\t(item, number) => number !== colNumber\n\t\t\t);\n\t\t}\n\t\tthis.drawMatrix();\n\t}\n\n\tshowColMenu()\n\t{\n\t\tthis.colMenu.style.display = 'block';\n\t}\n\n\thideColMenu()\n\t{\n\t\tthis.colMenu.style.display = 'none';\n\t}\n\n\tonMouseOver(event)\n\t{\n\t\tlet element = null;\n\n\t\tevent.path.map(el => {\n\t\t\tif (!(el && el.nodeType === Node.ELEMENT_NODE))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (el.getAttribute('data-ready'))\n\t\t\t{\n\t\t\t\telement = el;\n\t\t\t}\n\t\t});\n\n\t\tif (element)\n\t\t{\n\t\t\tconst clientRect = event.target.getBoundingClientRect();\n\t\t\tthis.showColMenu();\n\t\t\tthis.colMenu.setAttribute('data-rowNumber', element.getAttribute('data-rowNumber'))\n\t\t\tthis.colMenu.setAttribute('data-colNumber', element.getAttribute('data-colNumber'))\n\t\t\tDom.style(\n\t\t\t\tthis.colMenu,\n\t\t\t\t{\n\t\t\t\t\ttop: clientRect.top + window.scrollY + 'px',\n\t\t\t\t\tleft: clientRect.left + clientRect.width + window.scrollX - 20 + 'px'\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\n\tonMouseOut(event)\n\t{\n\t\tif (!event.target.getAttribute('data-ready'))\n\t\t{\n\t\t\tthis.hideColMenu();\n\t\t}\n\t}\n\n\tonColMenuClick(event)\n\t{\n\t\tconst command = event.target.getAttribute('data-command');\n\t\tif (command === 'decrease') {\n\t\t\tthis.onDecColClick(\n\t\t\t\tparseInt(event.target.parentNode.getAttribute('data-rowNumber')),\n\t\t\t\tparseInt(event.target.parentNode.getAttribute('data-colNumber'))\n\t\t\t);\n\t\t} else {\n\t\t\tthis.onRemoveColClick(\n\t\t\t\tparseInt(event.target.parentNode.getAttribute('data-rowNumber')),\n\t\t\t\tparseInt(event.target.parentNode.getAttribute('data-colNumber'))\n\t\t\t);\n\t\t}\n\t\tthis.hideColMenu();\n\t}\n}"],"names":["LayoutUI","Tag","render","currentSize","onChangeView","map","size","Array","options","nums","rowNumber","parseInt","rowsNumber","cols","onNewRowClick","onRemoveRowClick","onIncColClick","onNewColClick","col","i","matrix","row","classes","split","Object","keys","sizes","colValue","includes","push","join","content","Layout","container","params","colMenu","getHoverColMenu","result","bind","Event","e","onMouseOver","onMouseOut","onColMenuClick","loadMatrix","drawMatrix","getResult","gridMatrix","colItem","getColsInRow","reduce","sum","x","rowLength","length","newCol","node","regex","attribute","output","querySelectorAll","element","test","getAttribute","found1","match","found2","f","innerHTML","replace","console","log","Dom","clean","appendChild","getModeSelector","wrapper","getWrapper","getBackground","getWorkGrid","filter","item","number","newRow","splice","colNumber","fillZero","getSumInRow","onRemoveColClick","style","display","event","path","el","nodeType","Node","ELEMENT_NODE","clientRect","target","getBoundingClientRect","showColMenu","setAttribute","top","window","scrollY","left","width","scrollX","hideColMenu","command","onDecColClick","parentNode"],"mappings":"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"}