{"version":3,"file":"link.bundle.js","sources":["../src/link.js"],"sourcesContent":["import {Type} from 'main.core';\nimport {Content} from 'landing.ui.panel.content';\n\nexport class Link extends Content\n{\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.instance = null;\n\n\t\tthis.attr = BX.Landing.Utils.attr;\n\t\tthis.join = BX.Landing.Utils.join;\n\t\tthis.random = BX.Landing.Utils.random;\n\t\tthis.setTextContent = BX.Landing.Utils.setTextContent;\n\t\tthis.isPlainObject = BX.Landing.Utils.isPlainObject;\n\t\tthis.isString = BX.Landing.Utils.isString;\n\t\tthis.textToPlaceholders = BX.Landing.Utils.textToPlaceholders;\n\t\tthis.findParent = BX.Landing.Utils.findParent;\n\t\tthis.escapeText = BX.Landing.Utils.escapeText;\n\n\t\tBX.Landing.UI.Panel.Content.apply(this, arguments);\n\t\tthis.layout.classList.add(\"landing-ui-panel-link\");\n\t\tthis.overlay.classList.add(\"landing-ui-panel-link\");\n\n\t\tthis.appendFooterButton(\n\t\t\tnew BX.Landing.UI.Button.BaseButton(\"save_block_content\", {\n\t\t\t\ttext: BX.Landing.Loc.getMessage(\"BLOCK_SAVE\"),\n\t\t\t\tonClick: this.save.bind(this),\n\t\t\t\tclassName: \"landing-ui-button-content-save\"\n\t\t\t})\n\t\t);\n\t\tthis.appendFooterButton(\n\t\t\tnew BX.Landing.UI.Button.BaseButton(\"cancel_block_content\", {\n\t\t\t\ttext: BX.Landing.Loc.getMessage(\"BLOCK_CANCEL\"),\n\t\t\t\tonClick: this.hide.bind(this),\n\t\t\t\tclassName: \"landing-ui-button-content-cancel\"\n\t\t\t})\n\t\t);\n\n\t\tdocument.body.appendChild(this.layout);\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new BX.Landing.UI.Panel.Link(\"link_panel\", {\n\t\t\t\ttitle: BX.Landing.Loc.getMessage(\"LANDING_EDIT_LINK\")\n\t\t\t});\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tshow(node)\n\t{\n\t\tvar form;\n\n\t\tthis.title.innerHTML = BX.Landing.Loc.getMessage(\"LANDING_EDIT_LINK\");\n\n\t\tif (!!node && node instanceof BX.Landing.Node.Link)\n\t\t{\n\t\t\tthis.node = node;\n\t\t\tform = new BX.Landing.UI.Form.BaseForm({title: this.node.manifest.name});\n\t\t\tthis.field = this.node.getField();\n\t\t\tform.addField(this.field);\n\n\t\t\tthis.clear();\n\t\t\tthis.appendForm(form);\n\t\t\tBX.Landing.UI.Panel.Content.show.call(this);\n\t\t\tBX.Landing.UI.Panel.EditorPanel.getInstance().hide();\n\t\t}\n\n\t\tif (!!node && (node instanceof BX.Landing.Node.Text || node instanceof BX.Landing.UI.Field.Text))\n\t\t{\n\t\t\tthis.range = document.getSelection().getRangeAt(0);\n\t\t\tthis.node = node;\n\t\t\tthis.textField = BX.Landing.UI.Field.BaseField.currentField;\n\n\t\t\tif (!!this.textField && this.textField.isEditable())\n\t\t\t{\n\t\t\t\tthis.node = this.textField;\n\t\t\t}\n\n\t\t\tvar link = this.range.cloneContents().querySelector(\"a\");\n\n\t\t\tif (!link)\n\t\t\t{\n\t\t\t\tlink = this.findParent(this.range.startContainer, {tagName: \"A\"});\n\t\t\t}\n\n\t\t\tvar href = \"\";\n\t\t\tvar target = \"\";\n\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\thref = link.getAttribute(\"href\");\n\t\t\t\ttarget = link.getAttribute(\"target\") || \"_self\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.title.innerHTML = BX.Landing.Loc.getMessage(\"LANDING_CREATE_LINK\");\n\t\t\t}\n\n\t\t\tform = new BX.Landing.UI.Form.BaseForm({title: \"\"});\n\t\t\tBX.remove(form.header);\n\n\t\t\tvar allowedTypes = [\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_BLOCK,\n\t\t\t\tBX.Landing.UI.Field.LinkUrl.TYPE_PAGE\n\t\t\t];\n\n\t\t\tif (BX.Landing.Main.getInstance().options.params.type === 'STORE')\n\t\t\t{\n\t\t\t\tallowedTypes.push(BX.Landing.UI.Field.LinkUrl.TYPE_CATALOG);\n\t\t\t}\n\n\t\t\tthis.field = new BX.Landing.UI.Field.Link({\n\t\t\t\ttitle: BX.Landing.Loc.getMessage(\"FIELD_LINK_TEXT_LABEL\"),\n\t\t\t\tcontent: {\n\t\t\t\t\ttext: this.textToPlaceholders(this.escapeText(link ? link.innerText : this.range.toString())),\n\t\t\t\t\thref: this.escapeText(href),\n\t\t\t\t\ttarget: this.escapeText(target)\n\t\t\t\t},\n\t\t\t\toptions: {\n\t\t\t\t\tsiteId: BX.Landing.Main.getInstance().options.site_id,\n\t\t\t\t\tlandingId: BX.Landing.Main.getInstance().id,\n\t\t\t\t\tfilter: {\n\t\t\t\t\t\t'=TYPE': BX.Landing.Main.getInstance().options.params.type\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tallowedTypes: allowedTypes\n\t\t\t});\n\t\t\tform.addField(this.field);\n\n\t\t\tthis.clear();\n\t\t\tthis.appendForm(form);\n\t\t\tBX.Landing.UI.Panel.Content.show.call(this);\n\t\t}\n\t}\n\n\tsave()\n\t{\n\t\tif (this.field.isChanged())\n\t\t{\n\t\t\tif (!!this.node && this.node instanceof BX.Landing.Node.Link)\n\t\t\t{\n\t\t\t\tthis.node.setValue(this.field.getValue());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tvar value = this.field.getValue();\n\t\t\t\tdocument.getSelection().removeAllRanges();\n\t\t\t\tdocument.getSelection().addRange(this.range);\n\t\t\t\tthis.node.enableEdit();\n\n\t\t\t\tvar tmpHref = this.escapeText(this.join(value.href, this.random()));\n\t\t\t\tvar selection = document.getSelection();\n\n\t\t\t\tdocument.execCommand(\"createLink\", false, tmpHref);\n\n\t\t\t\tvar link = selection.anchorNode\n\t\t\t\t\t.parentElement\n\t\t\t\t\t.parentElement\n\t\t\t\t\t.parentElement\n\t\t\t\t\t.querySelector(this.join(\"[href=\\\"\", tmpHref, \"\\\"]\"));\n\n\t\t\t\tif (link)\n\t\t\t\t{\n\t\t\t\t\tthis.attr(link, \"href\", value.href);\n\t\t\t\t\tthis.attr(link, \"target\", value.target);\n\n\t\t\t\t\tif (this.isString(value.text))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (value.text.includes(\"{{name}}\"))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.field.hrefInput.getPlaceholderData(value.href)\n\t\t\t\t\t\t\t\t.then(function(placeholdersData) {\n\t\t\t\t\t\t\t\t\tlink.innerHTML = value.text.replace(\n\t\t\t\t\t\t\t\t\t\tnew RegExp(\"{{name}}\"),\n\t\t\t\t\t\t\t\t\t\t\"<span data-placeholder=\\\"name\\\">\"+placeholdersData.name+\"</span>\"\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setTextContent(link, value.text);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.isPlainObject(value.attrs))\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.attr(link, value.attrs);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.hide();\n\t}\n}"],"names":["Link","Content","constructor","instance","attr","BX","Landing","Utils","join","random","setTextContent","isPlainObject","isString","textToPlaceholders","findParent","escapeText","UI","Panel","apply","arguments","layout","classList","add","overlay","appendFooterButton","Button","BaseButton","text","Loc","getMessage","onClick","save","bind","className","hide","document","body","appendChild","getInstance","title","show","node","form","innerHTML","Node","Form","BaseForm","manifest","name","field","getField","addField","clear","appendForm","call","EditorPanel","Text","Field","range","getSelection","getRangeAt","textField","BaseField","currentField","isEditable","link","cloneContents","querySelector","startContainer","tagName","href","target","getAttribute","remove","header","allowedTypes","LinkUrl","TYPE_BLOCK","TYPE_PAGE","Main","options","params","type","push","TYPE_CATALOG","content","innerText","toString","siteId","site_id","landingId","id","filter","isChanged","setValue","getValue","value","removeAllRanges","addRange","enableEdit","tmpHref","selection","execCommand","anchorNode","parentElement","includes","hrefInput","getPlaceholderData","then","placeholdersData","replace","RegExp","attrs"],"mappings":"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"}