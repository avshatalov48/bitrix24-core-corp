{"version":3,"sources":["editor_panel.js"],"names":["BX","namespace","proxy","Landing","Utils","getSelectedElement","UI","Panel","EditorPanel","BaseButtonPanel","apply","this","arguments","layout","classList","add","position","currentElement","makeDraggable","registerBaseActions","appendToBody","rect","getBoundingClientRect","instance","getInstance","scrollHandler","target","onShow","node","onScroll","bind","document","addEventListener","onKeydown","window","passive","err","onHide","removeEventListener","event","which","nodeName","preventDefault","range","getSelection","getRangeAt","br","create","deleteContents","insertNode","createRange","setStartAfter","collapse","sel","removeAllRanges","addRange","setTimeout","adjustPosition","editor","dragButton","Button","EditorAction","html","attrs","title","message","onbxdrag","onDrag","onbxdragstop","onDragEnd","jsDD","registerObject","prependButton","offsetCalculates","offsetLeft","offsetTop","x","y","pos","current_node","Math","max","abs","left","top","DOM","write","remove","style","addButton","onClick","adjustButtonsState","CreateLink","ColorAction","text","lastPosition","adjustAbsolutePosition","force","nodeRect","width","height","bottom","pageYOffset","innerWidth","hideButtonsPopups","body","appendChild","mouseTarget","onMousedown","preventClick","onMouseUp","stopPropagation","closePopup","button","popup","close","menu","buttons","forEach","additionalButtons","Tool","ColorPicker","hideAll","prototype","constructor","__proto__","show","element","insertAfter","prevSibling","querySelector","isShown","onCustomEvent","call","hide","getAction","value","key","get","requestAnimationFrame","format","getFormat","bold","italic","underline","strike","align","getComputedStyle","getPropertyValue","includes","match","closest","isFixed"],"mappings":"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","file":"editor_panel.map.js"}