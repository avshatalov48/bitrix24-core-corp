{"version":3,"sources":["editor_panel.js"],"names":["BX","namespace","proxy","Landing","Utils","getSelectedElement","UI","Panel","EditorPanel","BaseButtonPanel","apply","this","arguments","layout","classList","add","position","currentElement","makeDraggable","registerBaseActions","appendToBody","rect","getBoundingClientRect","instance","getInstance","scrollHandler","target","onShow","node","onScroll","bind","document","addEventListener","onKeydown","window","passive","err","onHide","removeEventListener","event","which","nodeName","preventDefault","shiftKey","execCommand","metaKey","range","getSelection","getRangeAt","br","create","deleteContents","insertNode","createRange","setStartAfter","collapse","sel","removeAllRanges","addRange","setTimeout","adjustPosition","editor","dragButton","Button","EditorAction","html","attrs","title","Loc","getMessage","onbxdrag","onDrag","onbxdragstop","onDragEnd","jsDD","registerObject","prependButton","offsetCalculates","offsetLeft","offsetTop","x","y","pos","current_node","Math","max","abs","left","top","closest","PageObject","getEditorWindow","scrollY","DOM","write","remove","style","addButton","onClick","adjustButtonsState","CreateLink","rights","Env","getOptions","includes","CreatePage","ColorAction","text","TextBackgroundAction","lastPosition","adjustAbsolutePosition","force","nodeRect","width","height","bodyContent","bottom","innerHeight","pageYOffset","innerWidth","hideButtonsPopups","body","appendChild","mouseTarget","onMousedown","preventClick","onMouseUp","stopPropagation","closePopup","button","popup","close","menu","buttons","forEach","additionalButtons","Tool","ColorPicker","hideAll","prototype","constructor","__proto__","show","element","insertAfter","prevSibling","querySelector","isShown","onCustomEvent","call","hide","getAction","value","key","get","requestAnimationFrame","format","getFormat","bold","italic","underline","strike","align","getComputedStyle","getPropertyValue","match","isFixed"],"mappings":"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","file":"editor_panel.map.js"}