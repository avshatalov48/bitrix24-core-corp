{"version":3,"file":"createpage.bundle.js","sources":["../src/createpage.js"],"sourcesContent":["import {Dom, Cache, Tag, Type, Text, Event} from 'main.core';\nimport {Loader} from 'main.loader';\nimport {Content} from 'landing.ui.panel.content';\nimport {Loc} from 'landing.loc';\nimport {Backend} from 'landing.backend';\nimport {Env} from 'landing.env';\nimport {SliderHacks} from 'landing.sliderhacks';\nimport 'translit';\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class CreatePage extends Content\n{\n\tstatic getInstance(): CreatePage\n\t{\n\t\tif (!CreatePage.instance)\n\t\t{\n\t\t\tCreatePage.instance = new CreatePage('landing_create_page_panel', {\n\t\t\t\ttitle: Loc.getMessage('LANDING_CREATE_PAGE_PANEL_TITLE'),\n\t\t\t});\n\t\t}\n\n\t\treturn CreatePage.instance;\n\t}\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(id, data)\n\t{\n\t\tsuper(id, data);\n\n\t\tDom.addClass(this.layout, 'landing-ui-panel-create-page');\n\t\tDom.addClass(this.overlay, 'landing-ui-panel-create-page');\n\n\t\tthis.appendFooterButton(\n\t\t\tnew BX.Landing.UI.Button.BaseButton('save_block_content', {\n\t\t\t\ttext: BX.Landing.Loc.getMessage('BLOCK_SAVE'),\n\t\t\t\tonClick: this.onSave.bind(this),\n\t\t\t\tclassName: 'landing-ui-button-content-save',\n\t\t\t}),\n\t\t);\n\n\t\tthis.appendFooterButton(\n\t\t\tnew BX.Landing.UI.Button.BaseButton('cancel_block_content', {\n\t\t\t\ttext: BX.Landing.Loc.getMessage('BLOCK_CANCEL'),\n\t\t\t\tonClick: this.hide.bind(this),\n\t\t\t\tclassName: 'landing-ui-button-content-cancel',\n\t\t\t}),\n\t\t);\n\n\t\tthis.renderTo(document.body);\n\t}\n\n\tgetTitleField(): BX.Landing.UI.Field.Text\n\t{\n\t\treturn this.cache.remember('titleField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Text({\n\t\t\t\ttitle: Loc.getMessage('LANDING_CREATE_PAGE_PANEL_FIELD_PAGE_TITLE'),\n\t\t\t\ttextOnly: true,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCodeField(): BX.Landing.UI.Field.Text\n\t{\n\t\treturn this.cache.remember('codeField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Text({\n\t\t\t\ttitle: Loc.getMessage('LANDING_CREATE_PAGE_PANEL_FIELD_PAGE_CODE'),\n\t\t\t\ttextOnly: true,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetForm(): BX.Landing.UI.Form.BaseForm\n\t{\n\t\treturn this.cache.remember('form', () => {\n\t\t\treturn new BX.Landing.UI.Form.BaseForm({\n\t\t\t\tfields: [\n\t\t\t\t\tthis.getTitleField(),\n\t\t\t\t\tthis.getCodeField(),\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tshow({title = ''} = {}): Promise<any>\n\t{\n\t\tDom.style(this.footer, 'display', null);\n\n\t\tthis.range = document.getSelection().getRangeAt(0);\n\t\tthis.node = (() => {\n\t\t\tif (BX.Landing.Block.Node.Text.currentNode.isEditable())\n\t\t\t{\n\t\t\t\treturn BX.Landing.Block.Node.Text.currentNode;\n\t\t\t}\n\n\t\t\treturn BX.Landing.UI.Field.Text.currentField;\n\t\t})();\n\n\t\tconst capitalizedTitle = title.replace(/^\\w/, c => c.toUpperCase());\n\t\tthis.getTitleField().setValue(capitalizedTitle);\n\n\t\tconst translitedTitle = BX.translit(title, {\n\t\t\tchange_case: 'L',\n\t\t\treplace_space: '-',\n\t\t\treplace_other: '',\n\t\t});\n\t\tthis.getCodeField().setValue(translitedTitle);\n\n\t\tthis.clear();\n\t\tthis.appendForm(this.getForm());\n\n\t\treturn super.show();\n\t}\n\n\tgetSuccessMessage(id)\n\t{\n\t\tconst envOptions = Env.getInstance().getOptions();\n\t\tconst urlMask = envOptions.params.sef_url.landing_view;\n\t\tconst siteId = envOptions.site_id;\n\n\t\tconst editLink = urlMask\n\t\t\t.replace('#site_show#', siteId)\n\t\t\t.replace('#landing_edit#', id);\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-panel-create-page-success\">\n\t\t\t\t<div class=\"landing-ui-panel-create-page-success-header\">\n\t\t\t\t\t${Loc.getMessage('LANDING_CREATE_PAGE_PANEL_SUCCESS_MESSAGE_TITLE')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"landing-ui-panel-create-page-actions\">\n\t\t\t\t\t<a href=\"${editLink}\" target=\"_blank\">${Loc.getMessage('LANDING_CONTENT_PANEL_TITLE')}</a> &nbsp;\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetFailMessage()\n\t{\n\t\treturn this.cache.remember('failMessage', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-panel-create-page-fail\">\n\t\t\t\t\t<div class=\"landing-ui-panel-create-page-fail-header\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_CREATE_PAGE_PANEL_FAIL_MESSAGE_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonSave()\n\t{\n\t\tconst backend = Backend.getInstance();\n\t\tconst title = this.getTitleField().getValue();\n\t\tconst code = BX.translit(\n\t\t\tthis.getCodeField().getValue(),\n\t\t\t{\n\t\t\t\tchange_case: 'L',\n\t\t\t\treplace_space: '-',\n\t\t\t\treplace_other: '',\n\t\t\t},\n\t\t);\n\t\tconst {folder_id: folderId} = Env.getInstance().getOptions();\n\t\tconst loader = new Loader();\n\n\t\tthis.clear();\n\t\tloader.show(this.body);\n\n\t\tvoid backend\n\t\t\t.createPage({title, code, folderId})\n\t\t\t.then((result) => {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => resolve(result), 500);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then((result) => {\n\t\t\t\tloader.hide();\n\n\t\t\t\tif (Type.isNumber(result))\n\t\t\t\t{\n\t\t\t\t\tconst successMessage = this.getSuccessMessage(result);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tEnv.getInstance().getType() === 'KNOWLEDGE'\n\t\t\t\t\t\t|| Env.getInstance().getType() === 'GROUP'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst link = successMessage.querySelector('a');\n\t\t\t\t\t\tif (link)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tEvent.bind(link, 'click', (event) => {\n\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\tvoid SliderHacks.reloadSlider(link.href, window.parent);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(successMessage, this.content);\n\n\t\t\t\t\tconst value = {\n\t\t\t\t\t\thref: `#landing${result}`,\n\t\t\t\t\t};\n\t\t\t\t\tdocument.getSelection().removeAllRanges();\n\t\t\t\t\tdocument.getSelection().addRange(this.range);\n\t\t\t\t\tthis.node.enableEdit();\n\n\t\t\t\t\tconst tmpHref = Text.encode(`${value.href}${Text.getRandom()}`);\n\t\t\t\t\tconst selection = document.getSelection();\n\n\t\t\t\t\tdocument.execCommand('createLink', false, tmpHref);\n\n\t\t\t\t\tconst link = selection.anchorNode\n\t\t\t\t\t\t.parentElement\n\t\t\t\t\t\t.parentElement\n\t\t\t\t\t\t.parentElement\n\t\t\t\t\t\t.querySelector(`[href=\"${tmpHref}\"]`);\n\n\t\t\t\t\tif (link)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.attr(link, 'href', value.href);\n\t\t\t\t\t\tDom.attr(link, 'target', value.target);\n\n\t\t\t\t\t\tif (Type.isString(value.text))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlink.innerText = value.text;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isPlainObject(value.attrs))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.attr(link, value.attrs);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.style(this.footer, 'display', 'none');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.append(this.getFailMessage(), this.content);\n\t\t\t\t}\n\t\t\t});\n\t}\n}"],"names":["CreatePage","instance","title","Loc","getMessage","id","data","Cache","MemoryCache","Dom","addClass","layout","overlay","appendFooterButton","BX","Landing","UI","Button","BaseButton","text","onClick","onSave","bind","className","hide","renderTo","document","body","cache","remember","Field","Text","textOnly","Form","BaseForm","fields","getTitleField","getCodeField","style","footer","range","getSelection","getRangeAt","node","Block","Node","currentNode","isEditable","currentField","capitalizedTitle","replace","c","toUpperCase","setValue","translitedTitle","translit","change_case","replace_space","replace_other","clear","appendForm","getForm","envOptions","Env","getInstance","getOptions","urlMask","params","sef_url","landing_view","siteId","site_id","editLink","Tag","render","backend","Backend","getValue","code","folderId","folder_id","loader","Loader","show","createPage","then","result","Promise","resolve","setTimeout","Type","isNumber","successMessage","getSuccessMessage","getType","link","querySelector","Event","event","preventDefault","SliderHacks","reloadSlider","href","window","parent","append","content","value","removeAllRanges","addRange","enableEdit","tmpHref","encode","getRandom","selection","execCommand","anchorNode","parentElement","attr","target","isString","innerText","isPlainObject","attrs","getFailMessage","Content"],"mappings":"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"}