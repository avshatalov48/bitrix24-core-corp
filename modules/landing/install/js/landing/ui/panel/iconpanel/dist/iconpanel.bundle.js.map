{"version":3,"file":"iconpanel.bundle.js","sources":["../src/iconpanel.js"],"sourcesContent":["import {Content} from 'landing.ui.panel.content';\nimport {SidebarButton} from 'landing.ui.button.sidebarbutton';\nimport {Loc} from 'landing.loc';\nimport {Cache, Dom, Runtime, Tag, Type} from 'main.core';\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class IconPanel extends Content\n{\n\tconstructor(...args)\n\t{\n\t\tsuper(...args);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.IconPanel');\n\t\tthis.setTitle(Loc.getMessage('LANDING_ICONS_SLIDER_TITLE'));\n\n\t\tDom.addClass(this.layout, 'landing-ui-panel-icon');\n\t\tDom.addClass(this.overlay, 'landing-ui-panel-icon');\n\n\t\tDom.attr(this.layout, 'hidden', true);\n\t\tDom.attr(this.overlay, 'hidden', true);\n\n\t\tthis.resolver = () => {};\n\n\t\tDom.append(this.layout, document.body);\n\t}\n\n\tstatic getInstance(): IconPanel\n\t{\n\t\tif (!IconPanel.instance)\n\t\t{\n\t\t\tIconPanel.instance = new IconPanel();\n\t\t}\n\n\t\treturn IconPanel.instance;\n\t}\n\n\tstatic cache = new Cache.MemoryCache();\n\n\tstatic getLibraries(): Promise<[{[key: string]: any}]>\n\t{\n\t\treturn IconPanel.cache.remember('libraries', () => {\n\t\t\treturn Runtime\n\t\t\t\t.loadExtension([\n\t\t\t\t\t'landing.icon.fontawesome',\n\t\t\t\t\t'landing.icon.etlineicons',\n\t\t\t\t\t'landing.icon.hsicons',\n\t\t\t\t\t'landing.icon.simpleline',\n\t\t\t\t\t'landing.icon.simplelinepro1',\n\t\t\t\t\t'landing.icon.simplelinepro2',\n\t\t\t\t])\n\t\t\t\t.then(Object.values);\n\t\t});\n\t}\n\n\tmakeLayout()\n\t{\n\t\tif (Type.isStringFilled(this.content.innerHTML))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach(({id, name: text, categories}) => {\n\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\n\t\t\t\t\tcategories.forEach((category) => {\n\t\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\t\tid: category.id,\n\t\t\t\t\t\t\t\ttext: category.name,\n\t\t\t\t\t\t\t\tonClick: this.onCategoryChange.bind(this, category.id),\n\t\t\t\t\t\t\t\tchild: true,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tthis.onCategoryChange(libraries[0].categories[0].id);\n\t\t\t});\n\t}\n\n\tonCategoryChange(id: string)\n\t{\n\t\tthis.content.innerHTML = '';\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach((library) => {\n\t\t\t\t\tlibrary.categories.forEach((category) => {\n\t\t\t\t\t\tif (id === category.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst map = new Map();\n\n\t\t\t\t\t\t\tconst categoryCard = new BX.Landing.UI.Card.BaseCard({\n\t\t\t\t\t\t\t\ttitle: category.name,\n\t\t\t\t\t\t\t\tclassName: 'landing-ui-card-icons',\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tcategory.items.forEach((item) => {\n\t\t\t\t\t\t\t\tconst icon = Tag.render`\n\t\t\t\t\t\t\t\t\t<span class=\"${item}\" onclick=\"${this.onChange.bind(this, item)}\"></span>\n\t\t\t\t\t\t\t\t`;\n\t\t\t\t\t\t\t\tconst iconLayout = Tag.render`\n\t\t\t\t\t\t\t\t\t<div class=\"landing-ui-card landing-ui-card-icon\">\n\t\t\t\t\t\t\t\t\t\t${icon}\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`;\n\n\t\t\t\t\t\t\t\tDom.append(iconLayout, categoryCard.body);\n\n\t\t\t\t\t\t\t\tconst styles = getComputedStyle(icon, ':before');\n\n\t\t\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\t\t\tconst content = styles.getPropertyValue('content');\n\t\t\t\t\t\t\t\t\tif (map.has(content))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ticonLayout.hidden = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tmap.set(content, true);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.appendCard(categoryCard);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonChange(icon: string)\n\t{\n\t\tthis.resolver(icon);\n\t\tvoid this.hide();\n\t}\n\n\tshow(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.resolver = resolve;\n\t\t\tthis.makeLayout();\n\t\t\tvoid super.show();\n\t\t});\n\t}\n}"],"names":["IconPanel","args","setEventNamespace","setTitle","Loc","getMessage","Dom","addClass","layout","overlay","attr","resolver","append","document","body","Type","isStringFilled","content","innerHTML","getLibraries","then","libraries","forEach","id","text","name","categories","appendSidebarButton","SidebarButton","category","onClick","onCategoryChange","bind","child","library","map","Map","categoryCard","BX","Landing","UI","Card","BaseCard","title","className","items","item","icon","Tag","render","onChange","iconLayout","styles","getComputedStyle","requestAnimationFrame","getPropertyValue","has","hidden","set","appendCard","hide","Promise","resolve","makeLayout","instance","cache","remember","Runtime","loadExtension","Object","values","Content","Cache","MemoryCache"],"mappings":"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"}