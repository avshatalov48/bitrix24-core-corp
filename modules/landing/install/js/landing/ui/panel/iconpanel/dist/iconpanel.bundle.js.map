{"version":3,"file":"iconpanel.bundle.js","sources":["../src/iconpanel.js"],"sourcesContent":["import {Content} from 'landing.ui.panel.content';\nimport {SidebarButton} from 'landing.ui.button.sidebarbutton';\nimport {IconListCard} from 'landing.ui.card.iconlistcard';\nimport {BaseButton} from 'landing.ui.button.basebutton';\nimport {TextField} from 'landing.ui.field.textfield';\n\nimport {Loc} from 'landing.loc';\nimport {Cache, Dom, Runtime, Type, Tag} from 'main.core';\n\nimport 'ui.fonts.opensans';\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class IconPanel extends Content\n{\n\tresolver: function;\n\ticonList: IconListCard;\n\tsearchField: TextField;\n\tdictionary: Object = null;\n\tdefaultCategory: string;\n\n\tstatic SUPPORTED_LANG = ['en', 'ru', 'de'];\n\tstatic DEFAULT_LANG = 'en';\n\n\tconstructor(...args)\n\t{\n\t\tsuper(...args);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.IconPanel');\n\t\tthis.setTitle(Loc.getMessage('LANDING_ICONS_SLIDER_TITLE'));\n\n\t\tDom.addClass(this.layout, 'landing-ui-panel-icon');\n\t\tDom.addClass(this.overlay, 'landing-ui-panel-icon');\n\n\t\tDom.attr(this.layout, 'hidden', true);\n\t\tDom.attr(this.overlay, 'hidden', true);\n\n\t\tthis.resolver = () => {};\n\t\tthis.iconList = null;\n\n\t\tthis.search = Runtime.debounce(this.search, 500).bind(this);\n\t\t// todo: add lupa icon after\n\t\tthis.searchField = new TextField({\n\t\t\tclassName: 'landing-ui-panel-icon-search',\n\t\t\tplaceholder: Loc.getMessage('LANDING_ICON_PANEL_INPUT_PLACEHOLDER'),\n\t\t\ttextOnly: true,\n\t\t\tonInput: this.search,\n\t\t});\n\n\t\tDom.append(this.layout, document.body);\n\n\t\tthis.initDictionary();\n\t}\n\n\tstatic getInstance(): IconPanel\n\t{\n\t\tif (!IconPanel.instance)\n\t\t{\n\t\t\tIconPanel.instance = new IconPanel();\n\t\t}\n\n\t\treturn IconPanel.instance;\n\t}\n\n\tstatic cache = new Cache.MemoryCache();\n\n\tstatic getLibraries(): Promise<[{[key: string]: any}]>\n\t{\n\t\treturn IconPanel.cache.remember('libraries', () => {\n\t\t\treturn Runtime\n\t\t\t\t.loadExtension([\n\t\t\t\t\t'landing.icon.fontawesome',\n\t\t\t\t\t'landing.icon.fontawesome6_brands',\n\t\t\t\t\t'landing.icon.fontawesome6_1',\n\t\t\t\t\t'landing.icon.fontawesome6_2',\n\t\t\t\t\t'landing.icon.fontawesome6_3',\n\t\t\t\t\t'landing.icon.etlineicons',\n\t\t\t\t\t'landing.icon.hsicons',\n\t\t\t\t\t'landing.icon.simpleline',\n\t\t\t\t\t'landing.icon.simplelinepro1',\n\t\t\t\t\t'landing.icon.simplelinepro2',\n\t\t\t\t])\n\t\t\t\t.then(Object.values);\n\t\t});\n\t}\n\n\t/**\n\t * Requests current lang dictionary from backend.\n\t */\n\tinitDictionary()\n\t{\n\t\tif (this.dictionary === null)\n\t\t{\n\t\t\tthis.dictionary = {};\n\t\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\n\t\t\t// available for 'ru' and 'de' languages only\n\t\t\tif (lang !== 'ru' && lang !== 'de')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tBX.ajax.loadJSON('/bitrix/js/landing/dicdata/' + lang + '.json', dictionary => {\n\t\t\t\t[...Object.keys(dictionary)].map(key => {\n\t\t\t\t\tdictionary[key].toLowerCase().split(' ').map(word => {\n\t\t\t\t\t\tif (word)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.dictionary[word] = key;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * Returns translated word from loaded dictionary.\n\t *\n\t * @param {string} word Word to translate.\n\t * @returns {null|string}\n\t */\n\ttranslateWord(word: string): ?string\n\t{\n\t\tif (this?.dictionary[word])\n\t\t{\n\t\t\treturn this.dictionary[word];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tselectDefaultCategory()\n\t{\n\t\t// todo: init current category and icon?\n\t\tif (this.defaultCategory)\n\t\t{\n\t\t\tthis.onCategoryChange(this.defaultCategory);\n\t\t}\n\t}\n\n\tmakeLayout()\n\t{\n\t\tif (Type.isStringFilled(this.content.innerHTML))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(this.searchField.getLayout(), this.sidebar);\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach(({id, name: text, active, categories}) => {\n\t\t\t\t\tif (active === false)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.defaultCategory)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.defaultCategory = categories[0].id;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\ttext,\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\n\t\t\t\t\tcategories.forEach((category) => {\n\t\t\t\t\t\tthis.appendSidebarButton(\n\t\t\t\t\t\t\tnew SidebarButton({\n\t\t\t\t\t\t\t\tid: category.id,\n\t\t\t\t\t\t\t\ttext: category.name,\n\t\t\t\t\t\t\t\tonClick: this.onCategoryChange.bind(this, category.id),\n\t\t\t\t\t\t\t\tchild: true,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tthis.selectDefaultCategory();\n\t\t\t});\n\n\t\t// bottom buttons\n\t\tthis.appendFooterButton(\n\t\t\tnew BaseButton(\"save_icon\", {\n\t\t\t\ttext: Loc.getMessage(\"LANDING_ICON_PANEL_BUTTON_CHOOSE\"),\n\t\t\t\tonClick: () => {\n\t\t\t\t\tif (this.iconList.getActiveIcon())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.resolver({\n\t\t\t\t\t\t\ticonOptions: this.iconList.getActiveOptions(),\n\t\t\t\t\t\t\ticonClassName: this.iconList.getActiveIcon(),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tvoid this.hide();\n\t\t\t\t},\n\t\t\t\tclassName: \"landing-ui-button-content-save\"\n\t\t\t})\n\t\t);\n\t\tthis.appendFooterButton(\n\t\t\tnew BaseButton(\"cancel_icon\", {\n\t\t\t\ttext: Loc.getMessage(\"LANDING_ICON_PANEL_BUTTON_CANCEL\"),\n\t\t\t\tonClick: this.hide.bind(this),\n\t\t\t\tclassName: \"landing-ui-button-content-cancel\"\n\t\t\t})\n\t\t);\n\t}\n\n\tfillIconsList(items: [], title: string)\n\t{\n\t\tthis.iconList = new IconListCard();\n\t\tthis.iconList.setTitle(title);\n\n\t\titems.forEach((item) => {\n\t\t\tif (Type.isObject(item))\n\t\t\t{\n\t\t\t\tconst iconOptions = {\n\t\t\t\t\toptions: item.options ? item.options : {},\n\t\t\t\t\tdefaultOption: item.defaultOption ? item.defaultOption : '',\n\t\t\t\t}\n\n\t\t\t\tthis.iconList.addItem(item.className, iconOptions);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.iconList.addItem(item);\n\t\t\t}\n\t\t});\n\n\t\tthis.appendCard(this.iconList);\n\t}\n\n\tonCategoryChange(id: string)\n\t{\n\t\tthis.content.innerHTML = '';\n\n\t\tif (this.sidebarButtons.getActive())\n\t\t{\n\t\t\tthis.sidebarButtons.getActive().deactivate();\n\t\t}\n\t\tthis.sidebarButtons.get(id).activate();\n\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tlibraries.forEach((library) => {\n\t\t\t\t\tif (library.active === false)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlibrary.categories.forEach((category) => {\n\t\t\t\t\t\tif (id === category.id)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.fillIconsList(category.items, category.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\tsearch(query: string)\n\t{\n\t\t// todo: replaces ',' to space\n\t\t// mega optimization!\n\t\tif (query.trim().length < 2)\n\t\t{\n\t\t\tthis.selectDefaultCategory();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.content.innerHTML = '';\n\t\tif (this.sidebarButtons.getActive())\n\t\t{\n\t\t\tthis.sidebarButtons.getActive().deactivate();\n\t\t}\n\n\t\t// todo: need loader?\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then((libraries) => {\n\t\t\t\tconst result = [];\n\t\t\t\t// todo: can set language_id to collator?\n\t\t\t\tconst collator = new Intl.Collator(undefined, {\n\t\t\t\t\tusage: 'search',\n\t\t\t\t\tsensitivity: 'base',\n\t\t\t\t\tignorePunctuation: true,\n\t\t\t\t});\n\t\t\t\tconst preparedQuery = query.toLowerCase().trim().split(' ');\n\t\t\t\tif (preparedQuery.length === 0)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tlibraries.forEach((library) => {\n\t\t\t\t\tif (library.active === false)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlibrary.categories.forEach((category) => {\n\t\t\t\t\t\tcategory.items.forEach((item) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isObject(item)\n\t\t\t\t\t\t\t\t&& item.keywords\n\t\t\t\t\t\t\t\t&& item.keywords !== ''\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst isFind = preparedQuery.some((queryWord) => {\n\t\t\t\t\t\t\t\t\tconst queryWordTranslated = this.translateWord(queryWord);\n\t\t\t\t\t\t\t\t\treturn item.keywords.split(' ').find(word => {\n\t\t\t\t\t\t\t\t\t\treturn collator.compare(queryWord, word) === 0\n\t\t\t\t\t\t\t\t\t\t\t|| (collator.compare(queryWordTranslated, word) === 0)\n\t\t\t\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (isFind)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tresult.push(item);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// print\n\t\t\t\tconst title = Loc.getMessage('LANDING_ICON_PANEL_TITLE_RESULT').replace(\n\t\t\t\t\t'@query@',\n\t\t\t\t\tquery.trim()\n\t\t\t\t);\n\t\t\t\tif (result.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.fillIconsList(result, title);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet notFoundMessage;\n\n\t\t\t\t\tthis.iconList = new IconListCard();\n\t\t\t\t\tthis.iconList.setTitle(title);\n\n\t\t\t\t\tif (!/^[a-zA-Z0-9]+$/.test(query))\n\t\t\t\t\t{\n\t\t\t\t\t\t// another screen for trying English\n\t\t\t\t\t\tnotFoundMessage = this.getNotFoundMessage();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tnotFoundMessage = this.getNotFoundMessage();\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(notFoundMessage, this.iconList.getBody());\n\t\t\t\t\tthis.appendCard(this.iconList);\n\t\t\t\t}\n\n\t\t\t\t// dbg\n\t\t\t\t//const dateEnd = new Date();\n\t\t\t\t//console.log('search at query\"', query, '\"was end at____', dateEnd.getSeconds(), dateEnd.getMilliseconds());\n\t\t\t});\n\t}\n\n\tgetNotFoundMessage(): HTMLElement\n\t{\n\t\t// todo: remove unnecessary phrases for diff langs\n\t\treturn IconPanel.cache.remember('notFoundMsg', () => {\n\t\t\tlet textMsgId, imageClass;\n\t\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\t\t\tif (lang === IconPanel.DEFAULT_LANG)\n\t\t\t{\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_DEFAULT';\n\t\t\t\timageClass = '--not_found';\n\t\t\t}\n\t\t\telse if (IconPanel.SUPPORTED_LANG.indexOf(lang) !== -1)\n\t\t\t{\n\t\t\t\t// todo: correct phrases\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_SUPPORTED';\n\t\t\t\timageClass = '--not_found';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttextMsgId = 'LANDING_ICON_PANEL_NOT_FOUND_INCORRECT';\n\t\t\t\timageClass = '--incorrect_lang';\n\t\t\t}\n\n\t\t\treturn Tag.render`<div class=\"landing-ui-panel-icon-not-found\">\n\t\t\t\t<div class=\"landing-ui-panel-icon-not-found-image ${imageClass}\"></div>\n\t\t\t\t<div class=\"landing-ui-panel-icon-not-found-title\">\n\t\t\t\t\t${Loc.getMessage(textMsgId)}\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t\t});\n\t}\n\n\tshow(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.resolver = resolve;\n\t\t\tthis.makeLayout();\n\t\t\tvoid super.show();\n\t\t});\n\t}\n}"],"names":["IconPanel","args","setEventNamespace","setTitle","Loc","getMessage","Dom","addClass","layout","overlay","attr","resolver","iconList","search","Runtime","debounce","bind","searchField","TextField","className","placeholder","textOnly","onInput","append","document","body","initDictionary","dictionary","lang","BX","ajax","loadJSON","Object","keys","map","key","toLowerCase","split","word","defaultCategory","onCategoryChange","Type","isStringFilled","content","innerHTML","getLayout","sidebar","getLibraries","then","libraries","forEach","id","text","name","active","categories","appendSidebarButton","SidebarButton","category","onClick","child","selectDefaultCategory","appendFooterButton","BaseButton","getActiveIcon","iconOptions","getActiveOptions","iconClassName","hide","items","title","IconListCard","item","isObject","options","defaultOption","addItem","appendCard","sidebarButtons","getActive","deactivate","get","activate","library","fillIconsList","query","trim","length","result","collator","Intl","Collator","undefined","usage","sensitivity","ignorePunctuation","preparedQuery","keywords","isFind","some","queryWord","queryWordTranslated","translateWord","find","compare","push","replace","notFoundMessage","test","getNotFoundMessage","getBody","cache","remember","textMsgId","imageClass","DEFAULT_LANG","SUPPORTED_LANG","indexOf","Tag","render","Promise","resolve","makeLayout","instance","loadExtension","values","Content","Cache","MemoryCache"],"mappings":"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"}