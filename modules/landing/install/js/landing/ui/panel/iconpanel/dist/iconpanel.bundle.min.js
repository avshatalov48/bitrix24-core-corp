this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,n,t,i,a,o,s,r){"use strict";var c;var l=function(e){babelHelpers.inherits(n,e);function n(){var e;var t;babelHelpers.classCallCheck(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++){a[c]=arguments[c]}t=babelHelpers.possibleConstructorReturn(this,(e=babelHelpers.getPrototypeOf(n)).call.apply(e,[this].concat(a)));t.setEventNamespace("BX.Landing.UI.Panel.IconPanel");t.setTitle(s.Loc.getMessage("LANDING_ICONS_SLIDER_TITLE"));r.Dom.addClass(t.layout,"landing-ui-panel-icon");r.Dom.addClass(t.overlay,"landing-ui-panel-icon");r.Dom.attr(t.layout,"hidden",true);r.Dom.attr(t.overlay,"hidden",true);t.resolver=function(){};t.iconList=null;t.search=r.Runtime.debounce(t.search,500).bind(babelHelpers.assertThisInitialized(t));t.searchField=new o.TextField({className:"landing-ui-panel-icon-search",placeholder:"search...",textOnly:true,onInput:t.search});r.Dom.append(t.layout,document.body);return t}babelHelpers.createClass(n,[{key:"makeLayout",value:function e(){var i=this;if(r.Type.isStringFilled(this.content.innerHTML)){return}r.Dom.append(this.searchField.getLayout(),this.sidebar);n.getLibraries().then((function(e){var n=null;e.forEach((function(e){var a=e.id,o=e.name,s=e.active,r=e.categories;if(s===false){return}if(!n){n=r[0].id}i.appendSidebarButton(new t.SidebarButton({id:a,text:o}));r.forEach((function(e){i.appendSidebarButton(new t.SidebarButton({id:e.id,text:e.name,onClick:i.onCategoryChange.bind(i,e.id),child:true}))}))}));if(n){i.onCategoryChange(n)}}));this.appendFooterButton(new a.BaseButton("save_icon",{text:s.Loc.getMessage("LANDING_ICON_PANEL_BUTTON_CHOOSE"),onClick:function e(){if(i.iconList.getActiveIcon()){i.resolver({iconOptions:i.iconList.getActiveOptions(),iconClassName:i.iconList.getActiveIcon()})}void i.hide()},className:"landing-ui-button-content-save"}));this.appendFooterButton(new a.BaseButton("cancel_icon",{text:s.Loc.getMessage("LANDING_ICON_PANEL_BUTTON_CANCEL"),onClick:this.hide.bind(this),className:"landing-ui-button-content-cancel"}))}},{key:"fillIconsList",value:function e(n,t){var a=this;this.iconList=new i.IconListCard;this.iconList.setTitle(t);n.forEach((function(e){if(r.Type.isObject(e)){var n={options:e.options?e.options:{},defaultOption:e.defaultOption?e.defaultOption:""};a.iconList.addItem(e.className,n)}else{a.iconList.addItem(e)}}));this.appendCard(this.iconList)}},{key:"onCategoryChange",value:function e(t){var i=this;this.content.innerHTML="";if(this.sidebarButtons.getActive()){this.sidebarButtons.getActive().deactivate()}this.sidebarButtons.get(t).activate();n.getLibraries().then((function(e){e.forEach((function(e){if(e.active===false){return}e.categories.forEach((function(e){if(t===e.id){i.fillIconsList(e.items,e.name)}}))}))}))}},{key:"search",value:function e(t){var a=this;if(t.trim().length<2){return}var o=new Date;console.log('search at query "',t,'"was started at',o.getSeconds(),o.getMilliseconds());this.content.innerHTML="";if(this.sidebarButtons.getActive()){this.sidebarButtons.getActive().deactivate()}n.getLibraries().then((function(e){var n=[];var o=new Intl.Collator(undefined,{usage:"search",sensitivity:"base",ignorePunctuation:true});var s=t.toLowerCase().trim().split(" ");if(s.length===0){return}e.forEach((function(e){if(e.active===false){return}e.categories.forEach((function(e){e.items.forEach((function(e){if(r.Type.isObject(e)&&e.keywords&&e.keywords!==""){var t=s.every((function(n){return e.keywords.split(" ").find((function(e){return o.compare(n,e)===0}))}));if(t){n.push(e)}}}))}))}));var c='Search result "'+t.trim()+'"';if(n.length>0){a.fillIconsList(n,c)}else{a.iconList=new i.IconListCard;a.iconList.setTitle(c);r.Dom.append(a.getNotFoundMessage(),a.iconList.getBody());a.appendCard(a.iconList)}var l=new Date;console.log('search at query"',t,'"was end at____',l.getSeconds(),l.getMilliseconds())}))}},{key:"getNotFoundMessage",value:function e(){return n.cache.remember("notFoundMsg",(function(){var e,t;var i=s.Loc.getMessage("LANGUAGE_ID");if(i===n.DEFAULT_LANG){e="LANDING_ICON_PANEL_NOT_FOUND_EN";t="--en"}else if(n.SUPPORTED_LANG.indexOf(s.Loc.getMessage("LANGUAGE_ID"))!==-1){e="LANDING_ICON_PANEL_NOT_FOUND_EN";t="--not_found"}else{e="LANDING_ICON_PANEL_NOT_FOUND_OTHER";t="--incorrect_lang"}return r.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['<div class="landing-ui-panel-icon-not-found">\n\t\t\t\t<div class="landing-ui-panel-icon-not-found-image ','"></div>\n\t\t\t\t<div class="landing-ui-panel-icon-not-found-title">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>"])),t,s.Loc.getMessage(e))}))}},{key:"show",value:function e(){var t=this;return new Promise((function(e){t.resolver=e;t.makeLayout();void babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"show",t).call(t)}))}}],[{key:"getInstance",value:function e(){if(!n.instance){n.instance=new n}return n.instance}},{key:"getLibraries",value:function e(){return n.cache.remember("libraries",(function(){return r.Runtime.loadExtension(["landing.icon.fontawesome","landing.icon.fontawesome6_brands","landing.icon.fontawesome6_1","landing.icon.fontawesome6_2","landing.icon.fontawesome6_3","landing.icon.etlineicons","landing.icon.hsicons","landing.icon.simpleline","landing.icon.simplelinepro1","landing.icon.simplelinepro2"]).then(Object.values)}))}}]);return n}(n.Content);babelHelpers.defineProperty(l,"SUPPORTED_LANG",["en","ru"]);babelHelpers.defineProperty(l,"DEFAULT_LANG","en");babelHelpers.defineProperty(l,"cache",new r.Cache.MemoryCache);e.IconPanel=l})(this.BX.Landing.UI.Panel=this.BX.Landing.UI.Panel||{},BX.Landing.UI.Panel,BX.Landing.UI.Button,BX.Landing.UI.Card,BX.Landing.UI.Button,BX.Landing.UI.Field,BX.Landing,BX);
//# sourceMappingURL=iconpanel.bundle.map.js