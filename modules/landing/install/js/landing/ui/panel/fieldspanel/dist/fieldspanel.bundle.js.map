{"version":3,"file":"fieldspanel.bundle.js","sources":["../src/fieldspanel.js"],"sourcesContent":["import {Cache, Dom, Runtime, Type} from 'main.core';\nimport {Content} from 'landing.ui.panel.content';\nimport {Loader} from 'main.loader';\nimport {Backend} from 'landing.backend';\nimport {PageObject} from 'landing.pageobject';\nimport {SidebarButton} from 'landing.ui.button.sidebarbutton';\nimport {Loc} from 'landing.loc';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {BaseButton} from 'landing.ui.button.basebutton';\n\nimport './css/style.css';\n\ntype CrmField = {\n\ttype: 'list' | 'string' | 'checkbox' | 'date' | 'text' | 'typed_string' | 'file',\n\tentity_field_name: string,\n\tentity_name: string,\n\tname: string,\n\tcaption: string,\n\tmultiple: boolean,\n\trequired: boolean,\n\thidden: boolean,\n\titems: Array<{ID: any, VALUE: any}>,\n};\n\ntype CrmFieldsList = {\n\t[categoryId: string]: {\n\t\tCAPTION: string,\n\t\tFIELDS: Array<CrmField>\n\t},\n};\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class FieldsPanel extends Content\n{\n\tstatic getInstance(options): FieldsPanel\n\t{\n\t\tconst rootWindow = PageObject.getRootWindow();\n\t\tconst rootWindowPanel = rootWindow.BX.Landing.UI.Panel.FieldsPanel;\n\t\tif (!rootWindowPanel.instance && !FieldsPanel.instance)\n\t\t{\n\t\t\trootWindowPanel.instance = new FieldsPanel(options);\n\t\t}\n\n\t\tconst instance = (rootWindowPanel.instance || FieldsPanel.instance);\n\t\tinstance.options = options;\n\n\t\treturn instance;\n\t}\n\n\tadjustActionsPanels = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FieldsPanel');\n\t\tthis.setLayoutClass('landing-ui-panel-fields');\n\t\tthis.setOverlayClass('landing-ui-panel-fields-overlay');\n\t\tthis.setTitle(Loc.getMessage('LANDING_FIELDS_PANEL_TITLE'));\n\n\t\tthis.onSaveClick = this.onSaveClick.bind(this);\n\t\tthis.onCancelClick = this.onCancelClick.bind(this);\n\n\t\tthis.options = options;\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tDom.append(this.layout, this.getViewContainer());\n\t\tDom.append(this.overlay, this.getViewContainer());\n\n\t\tthis.showLoader();\n\t\tthis.loadPromise = this.load()\n\t\t\t.then(() => {\n\t\t\t\tthis.hideLoader();\n\n\t\t\t\tObject.entries(this.getCrmFields())\n\t\t\t\t\t.forEach(([categoryId, category]) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tcategoryId !== 'CATALOG'\n\t\t\t\t\t\t\t&& categoryId !== 'ACTIVITY'\n\t\t\t\t\t\t\t&& categoryId !== 'INVOICE'\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isPlainObject(options)\n\t\t\t\t\t\t\t\t&& Type.isBoolean(options.isLeadEnabled)\n\t\t\t\t\t\t\t\t&& !options.isLeadEnabled\n\t\t\t\t\t\t\t\t&& categoryId === 'LEAD'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst button = new SidebarButton({\n\t\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\t\ttext: category.CAPTION,\n\t\t\t\t\t\t\t\tchild: true,\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tthis.onSidebarButtonClick(button);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.appendSidebarButton(button);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tthis.sidebarButtons[0].getLayout().click();\n\n\t\t\t\tthis.appendFooterButton(\n\t\t\t\t\tnew BaseButton('save_settings', {\n\t\t\t\t\t\ttext: Loc.getMessage('BLOCK_SAVE'),\n\t\t\t\t\t\tonClick: this.onSaveClick,\n\t\t\t\t\t\tclassName: 'landing-ui-button-content-save',\n\t\t\t\t\t\tattrs: {title: Loc.getMessage('LANDING_TITLE_OF_SLIDER_SAVE')},\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\t\tthis.appendFooterButton(\n\t\t\t\t\tnew BaseButton('cancel_settings', {\n\t\t\t\t\t\ttext: Loc.getMessage('BLOCK_CANCEL'),\n\t\t\t\t\t\tonClick: this.onCancelClick,\n\t\t\t\t\t\tclassName: 'landing-ui-button-content-cancel',\n\t\t\t\t\t\tattrs: {title: Loc.getMessage('LANDING_TITLE_OF_SLIDER_CANCEL')},\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\t}\n\n\tshow(options = {}): Promise<any>\n\t{\n\t\tthis.disabledFields = [];\n\n\t\tif (Type.isArrayFilled(options.disabledFields))\n\t\t{\n\t\t\tthis.disabledFields = options.disabledFields;\n\t\t}\n\n\t\tthis.loadPromise\n\t\t\t.then(() => {\n\t\t\t\tif (Type.isArray(options.allowedTypes))\n\t\t\t\t{\n\t\t\t\t\tthis.originalCrmFields = this.getCrmFields();\n\t\t\t\t\tconst crmFields = Runtime.clone(this.originalCrmFields);\n\t\t\t\t\tconst preparedCrmFields = Object.entries(crmFields)\n\t\t\t\t\t\t.reduce((acc, [categoryId, category]) => {\n\t\t\t\t\t\t\tconst filteredFields = category.FIELDS.filter((field) => {\n\t\t\t\t\t\t\t\treturn options.allowedTypes.includes(field.type);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (Type.isArrayFilled(filteredFields))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tacc[categoryId] = {\n\t\t\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t\t\tFIELDS: filteredFields,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t}, {});\n\n\t\t\t\t\tthis.setCrmFields(preparedCrmFields);\n\t\t\t\t}\n\n\t\t\t\tthis.sidebarButtons.forEach((button) => {\n\t\t\t\t\tDom.show(button.layout);\n\t\t\t\t});\n\n\t\t\t\tif (options.isLeadEnabled === false)\n\t\t\t\t{\n\t\t\t\t\tconst leadButton = this.sidebarButtons.get('LEAD');\n\t\t\t\t\tif (leadButton)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.hide(leadButton.layout);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(options.allowedCategories))\n\t\t\t\t{\n\t\t\t\t\tthis.sidebarButtons.forEach((button) => {\n\t\t\t\t\t\tif (!options.allowedCategories.includes(button.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.hide(button.layout);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this.sidebarButtons.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.resetState();\n\t\t\t\t\tthis.sidebarButtons[0].getLayout().click();\n\t\t\t\t}\n\t\t\t});\n\n\t\tvoid super.show(options);\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.promiseResolver = resolve;\n\t\t});\n\t}\n\n\thide()\n\t{\n\t\tif (Type.isArrayFilled(this.originalCrmFields))\n\t\t{\n\t\t\tthis.setCrmFields(this.originalCrmFields);\n\t\t\tdelete this.originalCrmFields;\n\t\t}\n\n\t\treturn super.hide();\n\t}\n\n\tonSaveClick()\n\t{\n\t\tconst selectedFields = Object.values(this.getState())\n\t\t\t.reduce((acc, fields) => {\n\t\t\t\treturn [...acc, ...fields];\n\t\t\t}, []);\n\n\t\tthis.promiseResolver(selectedFields);\n\t\tvoid this.hide();\n\t\tthis.resetState();\n\t}\n\n\tonCancelClick()\n\t{\n\t\tvoid this.hide();\n\t\tthis.resetState();\n\t}\n\n\tgetViewContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('viewContainer', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn rootWindow.document.querySelector('.landing-ui-view-container');\n\t\t});\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\ttarget: this.body,\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader()\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader()\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tload(): Promise<any>\n\t{\n\t\treturn Backend.getInstance()\n\t\t\t.action('Form::getCrmFields')\n\t\t\t.then((result) => {\n\t\t\t\tthis.setCrmFields(result);\n\t\t\t});\n\t}\n\n\tsetCrmFields(fields)\n\t{\n\t\tthis.cache.set('fields', fields);\n\t}\n\n\tgetCrmFields(): CrmFieldsList\n\t{\n\t\treturn this.cache.get('fields') || {};\n\t}\n\n\tsetState(state: {[categoryId: string]: Array<string>})\n\t{\n\t\tthis.cache.set('state', state);\n\t}\n\n\tgetState(): {[categoryId: string]: Array<string>}\n\t{\n\t\treturn this.cache.get('state') || {};\n\t}\n\n\tresetState()\n\t{\n\t\tthis.cache.delete('state');\n\t}\n\n\tonSidebarButtonClick(button: SidebarButton)\n\t{\n\t\tconst activeButton = this.sidebarButtons.getActive();\n\t\tif (activeButton)\n\t\t{\n\t\t\tactiveButton.deactivate();\n\t\t}\n\n\t\tbutton.activate();\n\n\t\tconst crmFields = this.getCrmFields();\n\t\tif (Reflect.has(crmFields, button.id))\n\t\t{\n\t\t\tthis.clearContent();\n\n\t\t\tconst fields = crmFields[button.id].FIELDS;\n\t\t\tconst form = new FormSettingsForm({\n\t\t\t\tfields: [\n\t\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\t\titems: fields.map((field) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: field.caption,\n\t\t\t\t\t\t\t\tvalue: field.name,\n\t\t\t\t\t\t\t\tdisabled: this.disabledFields.includes(field.name),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tvalue: this.getState()[button.id] || [],\n\t\t\t\t\t\tonValueChange: (checkbox) => {\n\t\t\t\t\t\t\tconst state = {...this.getState()};\n\t\t\t\t\t\t\tstate[button.id] = checkbox.getValue();\n\t\t\t\t\t\t\tthis.setState(state);\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tthis.appendForm(form);\n\t\t}\n\t}\n}"],"names":["FieldsPanel","options","rootWindow","PageObject","getRootWindow","rootWindowPanel","BX","Landing","UI","Panel","instance","setEventNamespace","setLayoutClass","setOverlayClass","setTitle","Loc","getMessage","onSaveClick","bind","onCancelClick","cache","Cache","MemoryCache","Dom","append","layout","getViewContainer","overlay","showLoader","loadPromise","load","then","hideLoader","Object","entries","getCrmFields","forEach","categoryId","category","Type","isPlainObject","isBoolean","isLeadEnabled","button","SidebarButton","id","text","CAPTION","child","onClick","onSidebarButtonClick","appendSidebarButton","sidebarButtons","getLayout","click","appendFooterButton","BaseButton","className","attrs","title","disabledFields","isArrayFilled","isArray","allowedTypes","originalCrmFields","crmFields","Runtime","clone","preparedCrmFields","reduce","acc","filteredFields","FIELDS","filter","field","includes","type","setCrmFields","show","leadButton","get","hide","allowedCategories","length","resetState","Promise","resolve","promiseResolver","selectedFields","values","getState","fields","remember","document","querySelector","Loader","target","body","getLoader","Backend","getInstance","action","result","set","state","delete","activeButton","getActive","deactivate","activate","Reflect","has","clearContent","form","FormSettingsForm","Field","Checkbox","items","map","name","caption","value","disabled","onValueChange","checkbox","getValue","setState","appendForm","Content"],"mappings":"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"}