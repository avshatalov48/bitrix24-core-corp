{"version":3,"file":"fieldspanel.bundle.js","sources":["../src/fieldspanel.js"],"sourcesContent":["import {Cache, Dom, Runtime, Type} from 'main.core';\nimport {Content} from 'landing.ui.panel.content';\nimport {Loader} from 'main.loader';\nimport {Backend} from 'landing.backend';\nimport {PageObject} from 'landing.pageobject';\nimport {SidebarButton} from 'landing.ui.button.sidebarbutton';\nimport {Loc} from 'landing.loc';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {BaseButton} from 'landing.ui.button.basebutton';\n\nimport './css/style.css';\n\ntype CrmField = {\n\ttype: 'list' | 'string' | 'checkbox' | 'date' | 'text' | 'typed_string' | 'file',\n\tentity_field_name: string,\n\tentity_name: string,\n\tname: string,\n\tcaption: string,\n\tmultiple: boolean,\n\trequired: boolean,\n\thidden: boolean,\n\titems: Array<{ID: any, VALUE: any}>,\n};\n\ntype CrmFieldsList = {\n\t[categoryId: string]: {\n\t\tCAPTION: string,\n\t\tFIELDS: Array<CrmField>\n\t},\n};\n\n/**\n * @memberOf BX.Landing.UI.Panel\n */\nexport class FieldsPanel extends Content\n{\n\tstatic getInstance(options): FieldsPanel\n\t{\n\t\tconst rootWindow = PageObject.getRootWindow();\n\t\tconst rootWindowPanel = rootWindow.BX.Landing.UI.Panel.FieldsPanel;\n\t\tif (!rootWindowPanel.instance && !FieldsPanel.instance)\n\t\t{\n\t\t\trootWindowPanel.instance = new FieldsPanel(options);\n\t\t}\n\n\t\tconst instance = (rootWindowPanel.instance || FieldsPanel.instance);\n\t\tinstance.options = options;\n\n\t\treturn instance;\n\t}\n\n\tadjustActionsPanels = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FieldsPanel');\n\t\tthis.setLayoutClass('landing-ui-panel-fields');\n\t\tthis.setOverlayClass('landing-ui-panel-fields-overlay');\n\t\tthis.setTitle(Loc.getMessage('LANDING_FIELDS_PANEL_TITLE'));\n\n\t\tthis.onSaveClick = this.onSaveClick.bind(this);\n\t\tthis.onCancelClick = this.onCancelClick.bind(this);\n\n\t\tthis.options = options;\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tDom.append(this.layout, this.getViewContainer());\n\t\tDom.append(this.overlay, this.getViewContainer());\n\n\t\tthis.showLoader();\n\t\tthis.loadPromise = this.load()\n\t\t\t.then(() => {\n\t\t\t\tthis.hideLoader();\n\n\t\t\t\tObject.entries(this.getCrmFields())\n\t\t\t\t\t.forEach(([categoryId, category]) => {\n\t\t\t\t\t\tif (categoryId !== 'CATALOG' && categoryId !== 'ACTIVITY')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tType.isPlainObject(options)\n\t\t\t\t\t\t\t\t&& Type.isBoolean(options.isLeadEnabled)\n\t\t\t\t\t\t\t\t&& !options.isLeadEnabled\n\t\t\t\t\t\t\t\t&& categoryId === 'LEAD'\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst button = new SidebarButton({\n\t\t\t\t\t\t\t\tid: categoryId,\n\t\t\t\t\t\t\t\ttext: category.CAPTION,\n\t\t\t\t\t\t\t\tchild: true,\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tthis.onSidebarButtonClick(button);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tthis.appendSidebarButton(button);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tthis.sidebarButtons[0].getLayout().click();\n\n\t\t\t\tthis.appendFooterButton(\n\t\t\t\t\tnew BaseButton('save_settings', {\n\t\t\t\t\t\ttext: Loc.getMessage('BLOCK_SAVE'),\n\t\t\t\t\t\tonClick: this.onSaveClick,\n\t\t\t\t\t\tclassName: 'landing-ui-button-content-save',\n\t\t\t\t\t\tattrs: {title: Loc.getMessage('LANDING_TITLE_OF_SLIDER_SAVE')},\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\t\tthis.appendFooterButton(\n\t\t\t\t\tnew BaseButton('cancel_settings', {\n\t\t\t\t\t\ttext: Loc.getMessage('BLOCK_CANCEL'),\n\t\t\t\t\t\tonClick: this.onCancelClick,\n\t\t\t\t\t\tclassName: 'landing-ui-button-content-cancel',\n\t\t\t\t\t\tattrs: {title: Loc.getMessage('LANDING_TITLE_OF_SLIDER_CANCEL')},\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\t}\n\n\tshow(options = {}): Promise<any>\n\t{\n\t\tthis.disabledFields = [];\n\n\t\tif (Type.isArrayFilled(options.disabledFields))\n\t\t{\n\t\t\tthis.disabledFields = options.disabledFields;\n\t\t}\n\n\t\tif (options.isLeadEnabled === false)\n\t\t{\n\t\t\tconst leadButton = this.sidebarButtons.get('LEAD');\n\t\t\tif (leadButton)\n\t\t\t{\n\t\t\t\tDom.hide(leadButton.layout);\n\t\t\t}\n\t\t}\n\n\t\tthis.loadPromise\n\t\t\t.then(() => {\n\t\t\t\tif (Type.isArray(options.allowedTypes))\n\t\t\t\t{\n\t\t\t\t\tthis.originalCrmFields = this.getCrmFields();\n\t\t\t\t\tconst crmFields = Runtime.clone(this.originalCrmFields);\n\t\t\t\t\tconst preparedCrmFields = Object.entries(crmFields)\n\t\t\t\t\t\t.reduce((acc, [categoryId, category]) => {\n\t\t\t\t\t\t\tconst filteredFields = category.FIELDS.filter((field) => {\n\t\t\t\t\t\t\t\treturn options.allowedTypes.includes(field.type);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (Type.isArrayFilled(filteredFields))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tacc[categoryId] = {\n\t\t\t\t\t\t\t\t\t...category,\n\t\t\t\t\t\t\t\t\tFIELDS: filteredFields,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn acc;\n\t\t\t\t\t\t}, {});\n\n\t\t\t\t\tthis.setCrmFields(preparedCrmFields);\n\t\t\t\t}\n\n\t\t\t\tif (this.sidebarButtons.length > 0)\n\t\t\t\t{\n\t\t\t\t\tthis.resetState();\n\t\t\t\t\tthis.sidebarButtons[0].getLayout().click();\n\t\t\t\t}\n\t\t\t});\n\n\t\tvoid super.show(options);\n\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.promiseResolver = resolve;\n\t\t});\n\t}\n\n\thide()\n\t{\n\t\tif (Type.isArrayFilled(this.originalCrmFields))\n\t\t{\n\t\t\tthis.setCrmFields(this.originalCrmFields);\n\t\t\tdelete this.originalCrmFields;\n\t\t}\n\n\t\treturn super.hide();\n\t}\n\n\tonSaveClick()\n\t{\n\t\tconst selectedFields = Object.values(this.getState())\n\t\t\t.reduce((acc, fields) => {\n\t\t\t\treturn [...acc, ...fields];\n\t\t\t}, []);\n\n\t\tthis.promiseResolver(selectedFields);\n\t\tvoid this.hide();\n\t\tthis.resetState();\n\t}\n\n\tonCancelClick()\n\t{\n\t\tvoid this.hide();\n\t\tthis.resetState();\n\t}\n\n\tgetViewContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('viewContainer', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn rootWindow.document.querySelector('.landing-ui-view-container');\n\t\t});\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\ttarget: this.body,\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader()\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader()\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tload(): Promise<any>\n\t{\n\t\treturn Backend.getInstance()\n\t\t\t.action('Form::getCrmFields')\n\t\t\t.then((result) => {\n\t\t\t\tthis.setCrmFields(result);\n\t\t\t});\n\t}\n\n\tsetCrmFields(fields)\n\t{\n\t\tthis.cache.set('fields', fields);\n\t}\n\n\tgetCrmFields(): CrmFieldsList\n\t{\n\t\treturn this.cache.get('fields') || {};\n\t}\n\n\tsetState(state: {[categoryId: string]: Array<string>})\n\t{\n\t\tthis.cache.set('state', state);\n\t}\n\n\tgetState(): {[categoryId: string]: Array<string>}\n\t{\n\t\treturn this.cache.get('state') || {};\n\t}\n\n\tresetState()\n\t{\n\t\tthis.cache.delete('state');\n\t}\n\n\tonSidebarButtonClick(button: SidebarButton)\n\t{\n\t\tconst activeButton = this.sidebarButtons.getActive();\n\t\tif (activeButton)\n\t\t{\n\t\t\tactiveButton.deactivate();\n\t\t}\n\n\t\tbutton.activate();\n\n\t\tconst crmFields = this.getCrmFields();\n\t\tif (Reflect.has(crmFields, button.id))\n\t\t{\n\t\t\tthis.clearContent();\n\n\t\t\tconst fields = crmFields[button.id].FIELDS;\n\t\t\tconst form = new FormSettingsForm({\n\t\t\t\tfields: [\n\t\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\t\titems: fields.map((field) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: field.caption,\n\t\t\t\t\t\t\t\tvalue: field.name,\n\t\t\t\t\t\t\t\tdisabled: this.disabledFields.includes(field.name),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tvalue: this.getState()[button.id] || [],\n\t\t\t\t\t\tonValueChange: (checkbox) => {\n\t\t\t\t\t\t\tconst state = {...this.getState()};\n\t\t\t\t\t\t\tstate[button.id] = checkbox.getValue();\n\t\t\t\t\t\t\tthis.setState(state);\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t});\n\n\t\t\tthis.appendForm(form);\n\t\t}\n\t}\n}"],"names":["FieldsPanel","options","rootWindow","PageObject","getRootWindow","rootWindowPanel","BX","Landing","UI","Panel","instance","setEventNamespace","setLayoutClass","setOverlayClass","setTitle","Loc","getMessage","onSaveClick","bind","onCancelClick","cache","Cache","MemoryCache","Dom","append","layout","getViewContainer","overlay","showLoader","loadPromise","load","then","hideLoader","Object","entries","getCrmFields","forEach","categoryId","category","Type","isPlainObject","isBoolean","isLeadEnabled","button","SidebarButton","id","text","CAPTION","child","onClick","onSidebarButtonClick","appendSidebarButton","sidebarButtons","getLayout","click","appendFooterButton","BaseButton","className","attrs","title","disabledFields","isArrayFilled","leadButton","get","hide","isArray","allowedTypes","originalCrmFields","crmFields","Runtime","clone","preparedCrmFields","reduce","acc","filteredFields","FIELDS","filter","field","includes","type","setCrmFields","length","resetState","Promise","resolve","promiseResolver","selectedFields","values","getState","fields","remember","document","querySelector","Loader","target","body","getLoader","show","Backend","getInstance","action","result","set","state","delete","activeButton","getActive","deactivate","activate","Reflect","has","clearContent","form","FormSettingsForm","Field","Checkbox","items","map","name","caption","value","disabled","onValueChange","checkbox","getValue","setState","appendForm","Content"],"mappings":"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"}