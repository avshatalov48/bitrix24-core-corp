this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,t,n,i,r,a,s,o,l,c,u,d,p,g,h,b){"use strict";var v,f;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){function e(t){babelHelpers.classCallCheck(this,e);this.options=C({},t);this.cache=new u.Cache.MemoryCache}babelHelpers.createClass(e,[{key:"setPresets",value:function e(t){this.presets=t;var n=this.getListContainer();u.Dom.clean(n);this.presets.forEach((function(e){u.Dom.append(e.getLayout(),n)}))}},{key:"getListContainer",value:function e(){return this.cache.remember("listContainer",(function(){return u.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-presets-category-list"></div>\n\t\t\t'])))}))}},{key:"getLayout",value:function e(){var t=this;return this.cache.remember("layout",(function(){return u.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-presets-category">\n\t\t\t\t\t<div class="landing-ui-presets-category-title">',"</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),t.options.title,t.getListContainer())}))}}]);return e}();var k,L,P,B,O;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w={disabled:false,soon:false};var D=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));n.setEventNamespace("BX.Landing.UI.Panel.BasePresetPanel.Preset");n.options=H(H({},w),e);n.cache=new u.Cache.MemoryCache;return n}babelHelpers.createClass(t,[{key:"getTextCrop",value:function e(){var t=this;return this.cache.remember("textCrop",(function(){return new o.TextCrop({rows:2,target:t.getDescriptionNode()})}))}},{key:"getIconNode",value:function e(){var t=this;return this.cache.remember("iconNode",(function(){return u.Tag.render(k||(k=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div\n\t\t\t\t\tclass="landing-ui-panel-preset-icon"\n\t\t\t\t\tstyle="background-image: url(','?v2)"\n\t\t\t\t></div>\n\t\t\t'])),t.options.icon)}))}},{key:"getTitleNode",value:function e(){var t=this;return this.cache.remember("titleNode",(function(){return u.Tag.render(L||(L=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div\n\t\t\t\t\tclass="landing-ui-panel-preset-text-title"\n\t\t\t\t\ttitle="','"\n\t\t\t\t>',"</div>\n\t\t\t"])),u.Text.encode(t.options.title),t.options.title)}))}},{key:"getDescriptionNode",value:function e(){var t=this;return this.cache.remember("descriptionNode",(function(){return u.Tag.render(P||(P=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div\n\t\t\t\t\tclass="landing-ui-panel-preset-text-description"\n\t\t\t\t\ttitle="','"\n\t\t\t\t>',"</div>\n\t\t\t"])),u.Text.encode(t.options.description),t.options.description)}))}},{key:"activate",value:function e(){u.Dom.addClass(this.getLayout(),"landing-ui-panel-preset-active")}},{key:"deactivate",value:function e(){u.Dom.removeClass(this.getLayout(),"landing-ui-panel-preset-active")}},{key:"isActive",value:function e(){return u.Dom.hasClass(this.getLayout(),"landing-ui-panel-preset-active")}},{key:"getSoonLabel",value:function e(){return this.cache.remember("soonLabel",(function(){return u.Tag.render(B||(B=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-preset-soon-label">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),s.Loc.getMessage("LANDING_UI_BASE_PRESET_PANEL_SOON_LABEL"))}))}},{key:"getLayout",value:function e(){var t=this;return this.cache.remember("layout",(function(){var e=function e(n){n.preventDefault();if(t.options.openable){t.activate()}t.emit("onClick")};var n=t.options.active?" landing-ui-panel-preset-active":"";var i=t.options.disabled?" landing-ui-disabled":"";return u.Tag.render(O||(O=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-preset',"",'" onclick="','">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="landing-ui-panel-preset-text">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),n,i,e,u.Type.isStringFilled(t.options.icon)?t.getIconNode():"",u.Type.isStringFilled(t.options.title)?t.getTitleNode():"",u.Type.isStringFilled(t.options.description)?t.getDescriptionNode():"",t.options.soon?t.getSoonLabel():"")}))}}]);return t}(c.EventEmitter);var E;function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j=function(e){babelHelpers.inherits(t,e);function t(e){var n;babelHelpers.classCallCheck(this,t);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));n.setEventNamespace("BX.Landing.UI.Panel.FormSettingsPanel.ContentWrapper");n.options=I({},e);n.cache=new u.Cache.MemoryCache;n.items=new h.BaseCollection;n.onChange=n.onChange.bind(babelHelpers.assertThisInitialized(n));return n}babelHelpers.createClass(t,[{key:"addItem",value:function e(t){if(!this.items.includes(t)){this.items.add(t);t.subscribe("onChange",this.onChange)}u.Dom.append(t.getLayout(),this.getLayout())}},{key:"insertBefore",value:function e(t,n){if(!this.items.includes(t)){this.items.add(t);t.subscribe("onChange",this.onChange)}u.Dom.insertBefore(t.getLayout(),n.getLayout())}},{key:"getLayout",value:function e(){return this.cache.remember("wrapper",(function(){return u.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(['<div class="landing-ui-panel-form-settings-content-wrapper"></div>'])))}))}},{key:"getValue",value:function e(){var t=this.items.reduce((function(e,t){if(t instanceof b.BaseForm&&t.getLayout().parentElement){return I(I({},e),t.serialize())}return e}),{});return this.valueReducer(t)}},{key:"valueReducer",value:function e(t){return t}},{key:"onChange",value:function e(t){this.emit("onChange",t.getData())}},{key:"clear",value:function e(){u.Dom.clean(this.getLayout())}}]);return t}(c.EventEmitter);var X,N,F;var M=function(e){babelHelpers.inherits(t,e);function t(){var e;babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));e.setEventNamespace("BX.Landing.UI.Panel.BasePresetPanel");u.Dom.addClass(e.layout,"landing-ui-panel-base-preset");u.Dom.addClass(e.overlay,"landing-ui-panel-base-preset-overlay");e.cache=new u.Cache.MemoryCache;e.onSidebarButtonClick=e.onSidebarButtonClick.bind(babelHelpers.assertThisInitialized(e));e.onSaveClick=e.onSaveClick.bind(babelHelpers.assertThisInitialized(e));e.onCancelClick=e.onCancelClick.bind(babelHelpers.assertThisInitialized(e));e.onPresetFieldClick=e.onPresetFieldClick.bind(babelHelpers.assertThisInitialized(e));e.onPresetClick=e.onPresetClick.bind(babelHelpers.assertThisInitialized(e));e.onChange=e.onChange.bind(babelHelpers.assertThisInitialized(e));e.appendFooterButton(e.getSaveButton());e.appendFooterButton(e.getCancelButton());u.Dom.append(e.getHeaderControlsContainer(),e.header);return e}babelHelpers.createClass(t,[{key:"enableToggleMode",value:function e(){this.cache.set("toggleMode",true);this.renderTo(this.getViewContainer())}},{key:"isToggleModeEnabled",value:function e(){return this.cache.get("toggleMode")===true}},{key:"disableOverlay",value:function e(){u.Dom.addClass(this.overlay,"landing-ui-panel-base-preset-disable-overlay")}},{key:"getViewContainer",value:function e(){return this.cache.remember("viewContainer",(function(){var e=r.PageObject.getRootWindow();return e.document.querySelector(".landing-ui-view-container")}))}},{key:"getViewWrapper",value:function e(){var t=this;return this.cache.remember("viewWrapper",(function(){return t.getViewContainer().querySelector(".landing-ui-view-wrapper")}))}},{key:"getSaveButton",value:function e(){var t=this;return this.cache.remember("saveButton",(function(){var e=new n.BaseButton("save_settings",{text:s.Loc.getMessage("BLOCK_SAVE"),onClick:t.onSaveClick,className:"ui-btn ui-btn-success",attrs:{title:s.Loc.getMessage("LANDING_TITLE_OF_SLIDER_SAVE")}});u.Dom.removeClass(e.layout,"landing-ui-button");return e}))}},{key:"onSaveClick",value:function e(){}},{key:"getCancelButton",value:function e(){var t=this;return this.cache.remember("cancelButton",(function(){return new n.BaseButton("cancel_settings",{text:s.Loc.getMessage("BLOCK_CANCEL"),onClick:t.onCancelClick,className:"landing-ui-button-content-cancel",attrs:{title:s.Loc.getMessage("LANDING_TITLE_OF_SLIDER_CANCEL")}})}))}},{key:"onCancelClick",value:function e(){}},{key:"appendSidebarButton",value:function e(n){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"appendSidebarButton",this).call(this,n)}},{key:"onSidebarButtonClick",value:function e(t){var n=this;var i=this.sidebarButtons.getActive();if(i){i.deactivate()}t.getTarget().activate();u.Dom.addClass(this.content,"landing-ui-panel-base-preset-fade");this.showContentLoader();void this.getContent(t.getTarget().id).then((function(e){if(e){setTimeout((function(){u.Dom.removeClass(n.content,"landing-ui-panel-base-preset-fade");n.clearContent();n.hideContentLoader();e.subscribe("onChange",n.onChange);u.Dom.append(e.getLayout(),n.content)}),300)}else{u.Dom.removeClass(n.content,"landing-ui-panel-base-preset-fade");n.clearContent();n.hideContentLoader()}}))}},{key:"onChange",value:function e(t){}},{key:"getContent",value:function e(t){throw new Error("Must be implemented in child class")}},{key:"getHeaderControlsContainer",value:function e(){var t=this;return this.cache.remember("headerControlsContainer",(function(){return u.Tag.render(X||(X=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-base-preset-header-controls">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"])),t.getLeftHeaderControls(),t.getRightHeaderControls())}))}},{key:"getRightHeaderControls",value:function e(){return this.cache.remember("rightHeaderControls",(function(){return u.Tag.render(N||(N=babelHelpers.taggedTemplateLiteral(['<div class="landing-ui-panel-base-preset-header-controls-right"></div>'])))}))}},{key:"getLeftHeaderControls",value:function e(){var t=this;return this.cache.remember("leftHeaderControls",(function(){return u.Tag.render(F||(F=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-base-preset-header-controls-left">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),t.getPresetField().getNode())}))}},{key:"getPresetField",value:function e(){var t=this;return this.cache.remember("presetField",(function(){return new i.PresetField({events:{onClick:t.onPresetFieldClick}})}))}},{key:"show",value:function e(n){if(this.isToggleModeEnabled()){var i=BX.Landing.UI.Panel.ContentEdit;if(i.showedPanel){i.showedPanel.hide()}var r=this.getViewWrapper();u.Dom.style(r,"transition","400ms margin ease");setTimeout((function(){u.Dom.style(r,"margin-left","880px")}))}return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"show",this).call(this,n)}},{key:"hide",value:function e(){var n=this;var i=this.getViewWrapper();if(this.isToggleModeEnabled()){u.Dom.style(i,"margin-left",null)}return babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"hide",this).call(this).then((function(){if(n.isToggleModeEnabled()){u.Dom.style(i,"transition",null)}}))}},{key:"enableTransparentMode",value:function e(){u.Dom.addClass(this.layout,"landing-ui-panel-mode-transparent")}},{key:"disableTransparentMode",value:function e(){u.Dom.removeClass(this.layout,"landing-ui-panel-mode-transparent")}},{key:"setCategories",value:function e(t){this.cache.set("categories",t);this.cache["delete"]("renderedPresets")}},{key:"getCategories",value:function e(){return this.cache.get("categories")}},{key:"setPresets",value:function e(t){var n=this;t.forEach((function(e){e.unsubscribe("onClick",n.onPresetClick);e.subscribe("onClick",n.onPresetClick)}));this.cache.set("presets",t);this.cache["delete"]("renderedPresets")}},{key:"getPresets",value:function e(){return this.cache.get("presets")}},{key:"setSidebarButtons",value:function e(t){var n=this;t.forEach((function(e){e.subscribe("onClick",n.onSidebarButtonClick)}));this.cache.set("sidebarButtons",t)}},{key:"getSidebarButtons",value:function e(){return this.cache.get("sidebarButtons")}},{key:"onPresetFieldClick",value:function e(){var t=this;this.clear();this.enableTransparentMode();this.getCategories().forEach((function(e){var n=t.getPresets().filter((function(t){return t.options.category===e.options.id}));e.setPresets(n);u.Dom.append(e.getLayout(),t.content);t.getPresets().forEach((function(e){e.getTextCrop().init()}))}))}},{key:"onPresetClick",value:function e(t){this.disableTransparentMode();this.applyPreset(t.getTarget())}},{key:"activatePreset",value:function e(t){var n=this.getPresets().find((function(e){return e.options.id===t}));var i=this.getPresetField();i.setLinkText(n.options.title);i.setIcon(n.options.icon);n.activate()}},{key:"applyPreset",value:function e(t){var n=this;this.clear();var i=this.getPresetField();i.setLinkText(t.options.title);i.setIcon(t.options.icon);var r=this.getSidebarButtons().filter((function(e){return t.options.items.includes(e.id)}));r.forEach((function(e){e.deactivate();n.appendSidebarButton(e)}));if(u.Type.isStringFilled(t.options.defaultSection)){var a=r.find((function(e){return e.id===t.options.defaultSection}));if(a){a.activate();a.layout.click()}}else{var s=babelHelpers.slicedToArray(r,1),o=s[0];o.activate();o.layout.click()}}},{key:"getContentLoader",value:function e(){var t=this;return this.cache.remember("contentLoader",(function(){return new l.Loader({target:t.body,offset:{left:"130px"}})}))}},{key:"showContentLoader",value:function e(){void this.getContentLoader().show()}},{key:"hideContentLoader",value:function e(){void this.getContentLoader().hide()}}]);return t}(t.Content);e.BasePresetPanel=M;e.PresetCategory=m;e.Preset=D;e.ContentWrapper=j})(this.BX.Landing.UI.Panel=this.BX.Landing.UI.Panel||{},BX.Landing.UI.Panel,BX.Landing.UI.Button,BX.Landing.UI.Field,BX.Landing,BX.Landing.UI.Button,BX.Landing,BX.UI,BX,BX.Event,BX,BX.Landing.UI.Card,BX.Landing.UI.Card,BX.Landing.UI.Form,BX.Landing.Collection,BX.Landing.UI.Form);
//# sourceMappingURL=basepresetpanel.bundle.map.js