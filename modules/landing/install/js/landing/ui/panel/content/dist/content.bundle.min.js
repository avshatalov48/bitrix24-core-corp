this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,t,n){"use strict";function a(e){var t=e.deltaX;var a=-1*e.deltaY;if(n.Type.isUndefined(t)||n.Type.isUndefined(a)){t=-1*e.wheelDeltaX/6;a=e.wheelDeltaY/6}if(e.deltaMode===1){t*=10;a*=10}if(Number.isNaN(t)&&Number.isNaN(a)){t=0;a=e.wheelDelta}return{x:t,y:a}}function i(e){var t=300;return Math.min(400/500*e,t)}function o(e,t){return new Promise((function(a){var o=0;var s=0;if(t){var l=20;var r=Math.max(parseInt(n.Dom.style(t,"margin-top")),l);var u=e.scrollTop;if(!(e instanceof HTMLIFrameElement)){o=t.offsetTop-(e.offsetTop||0)-r}else{u=e.contentWindow.scrollY;o=BX.pos(t).top-r-100}s=i(Math.abs(o-u));var d=Math.max(u,0);var c=Math.max(o,0);if(d!==c){new BX.easing({duration:s,start:{scrollTop:d},finish:{scrollTop:c},step:function t(n){if(!(e instanceof HTMLIFrameElement)){e.scrollTop=n.scrollTop}else{e.contentWindow.scrollTo(0,Math.max(n.scrollTop,0))}}}).animate();setTimeout(a,s)}else{a()}}else{a()}}))}function s(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-content-subtitle">',"</div>\n\t\t\t"]);s=function t(){return e};return e}function l(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-footer"></div>\n\t\t']);l=function t(){return e};return e}function r(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-body-content"></div>\n\t\t']);r=function t(){return e};return e}function u(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-body-sidebar"></div>\n\t\t']);u=function t(){return e};return e}function d(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-body"></div>\n\t\t']);d=function t(){return e};return e}function c(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-title"></div>\n\t\t']);c=function t(){return e};return e}function h(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-header"></div>\n\t\t']);h=function t(){return e};return e}function v(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-overlay landing-ui-hide" data-is-shown="false" hidden></div>\n\t\t']);v=function t(){return e};return e}var f=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"createOverlay",value:function e(){return n.Tag.render(v())}},{key:"createHeader",value:function e(){return n.Tag.render(h())}},{key:"createTitle",value:function e(){return n.Tag.render(c())}},{key:"createBody",value:function e(){return n.Tag.render(d())}},{key:"createSidebar",value:function e(){return n.Tag.render(u())}},{key:"createContent",value:function e(){return n.Tag.render(r())}},{key:"createFooter",value:function e(){return n.Tag.render(l())}},{key:"calculateTransitionDuration",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return i(t)}},{key:"scrollTo",value:function e(t,n){return o(t,n)}},{key:"getDeltaFromEvent",value:function e(t){return a(t)}}]);function t(e){var a;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,i));babelHelpers.defineProperty(babelHelpers.assertThisInitialized(a),"adjustActionsPanels",true);n.Dom.addClass(a.layout,"landing-ui-panel-content");a.data=Object.freeze(i);a.overlay=t.createOverlay();a.header=t.createHeader();a.title=t.createTitle();a.body=t.createBody();a.footer=t.createFooter();a.sidebar=t.createSidebar();a.content=t.createContent();a.closeButton=new BX.Landing.UI.Button.BaseButton("close",{className:"landing-ui-panel-content-close",onClick:function e(){void a.hide();a.emit("onCancel")},attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_CLOSE")}});a.forms=new BX.Landing.UI.Collection.FormCollection;a.buttons=new BX.Landing.UI.Collection.ButtonCollection;a.sidebarButtons=new BX.Landing.UI.Collection.ButtonCollection;a.wheelEventName=n.Type.isNil(window.onwheel)?window.onwheel:window.onmousewheel;a.onMouseWheel=a.onMouseWheel.bind(babelHelpers.assertThisInitialized(a));a.onMouseEnter=a.onMouseEnter.bind(babelHelpers.assertThisInitialized(a));a.onMouseLeave=a.onMouseLeave.bind(babelHelpers.assertThisInitialized(a));n.Dom.removeClass(a.layout,"landing-ui-hide");n.Dom.addClass(a.overlay,"landing-ui-hide");n.Dom.append(a.sidebar,a.body);n.Dom.append(a.content,a.body);n.Dom.append(a.header,a.layout);n.Dom.append(a.title,a.header);n.Dom.append(a.body,a.layout);n.Dom.append(a.footer,a.layout);n.Dom.append(a.closeButton.layout,a.layout);if(n.Type.isString(i.className)){n.Dom.addClass(a.layout,[i.className,"".concat(i.className,"-overlay")])}if(n.Type.isString(i.subTitle)&&i.subTitle!==""){a.subTitle=n.Tag.render(s(),i.subTitle);n.Dom.append(a.subTitle,a.header);n.Dom.addClass(a.layout,"landing-ui-panel-content-with-subtitle")}if(a.data.showFromRight===true){a.setLayoutClass("landing-ui-panel-show-from-right")}a.init();n.Event.bind(window.top,"keydown",a.onKeyDown.bind(babelHelpers.assertThisInitialized(a)));BX.Landing.PageObject.getEditorWindow();if(a.data.scrollAnimation){a.scrollObserver=new IntersectionObserver(a.onIntersecting.bind(babelHelpers.assertThisInitialized(a)))}a.checkReadyToSave=a.checkReadyToSave.bind(babelHelpers.assertThisInitialized(a));return a}babelHelpers.createClass(t,[{key:"init",value:function e(){var t=this;n.Dom.append(this.overlay,document.body);n.Event.bind(this.overlay,"click",(function(){t.emit("onCancel");void t.hide()}));n.Event.bind(this.layout,"mouseenter",this.onMouseEnter);n.Event.bind(this.layout,"mouseleave",this.onMouseLeave);n.Event.bind(this.content,"mouseenter",this.onMouseEnter);n.Event.bind(this.content,"mouseleave",this.onMouseLeave);n.Event.bind(this.sidebar,"mouseenter",this.onMouseEnter);n.Event.bind(this.sidebar,"mouseleave",this.onMouseLeave);n.Event.bind(this.header,"mouseenter",this.onMouseEnter);n.Event.bind(this.header,"mouseleave",this.onMouseLeave);n.Event.bind(this.footer,"mouseenter",this.onMouseEnter);n.Event.bind(this.footer,"mouseleave",this.onMouseLeave);if("title"in this.data){this.setTitle(this.data.title)}if("footer"in this.data){if(n.Type.isArray(this.data.footer)){this.data.footer.forEach((function(e){if(e instanceof BX.Landing.UI.Button.BaseButton){t.appendFooterButton(e)}if(n.Type.isDomNode(e)){n.Dom.append(e,t.footer)}}))}}}},{key:"onIntersecting",value:function e(t){t.forEach((function(e){if(e.isIntersecting){n.Dom.removeClass(e.target,"landing-ui-is-not-visible");n.Dom.addClass(e.target,"landing-ui-is-visible")}else{n.Dom.addClass(e.target,"landing-ui-is-not-visible");n.Dom.removeClass(e.target,"landing-ui-is-visible")}}))}},{key:"onKeyDown",value:function e(t){if(t.keyCode===27){this.emit("onCancel");void this.hide()}}},{key:"onMouseEnter",value:function e(t){t.stopPropagation();n.Event.bind(this.layout,this.wheelEventName,this.onMouseWheel);n.Event.bind(this.layout,"touchmove",this.onMouseWheel);if(this.sidebar.contains(t.target)||this.content.contains(t.target)||this.header.contains(t.target)||this.footer.contains(t.target)||this.right&&this.right.contains(t.target)){this.scrollTarget=t.currentTarget}}},{key:"onMouseLeave",value:function e(t){t.stopPropagation();BX.unbind(this.layout,this.wheelEventName,this.onMouseWheel);BX.unbind(this.layout,"touchmove",this.onMouseWheel)}},{key:"onMouseWheel",value:function e(n){var a=this;n.preventDefault();n.stopPropagation();var i=t.getDeltaFromEvent(n);var o=this.scrollTarget.scrollTop;requestAnimationFrame((function(){a.scrollTarget.scrollTop=o-i.y}))}},{key:"scrollTo",value:function e(n){void t.scrollTo(this.content,n)}},{key:"isShown",value:function e(){return this.state==="shown"}},{key:"shouldAdjustActionsPanels",value:function e(){return this.adjustActionsPanels}},{key:"show",value:function e(t){var a=this;if(!this.isShown()){if(this.shouldAdjustActionsPanels()){n.Dom.addClass(document.body,"landing-ui-hide-action-panels")}void BX.Landing.Utils.Show(this.overlay);return BX.Landing.Utils.Show(this.layout).then((function(){a.state="shown"}))}return Promise.resolve(true)}},{key:"hide",value:function e(){var t=this;if(this.isShown()){if(this.shouldAdjustActionsPanels()){n.Dom.removeClass(document.body,"landing-ui-hide-action-panels")}void BX.Landing.Utils.Hide(this.overlay);return BX.Landing.Utils.Hide(this.layout).then((function(){t.state="hidden"}))}return Promise.resolve(true)}},{key:"appendForm",value:function e(t){this.forms.add(t);n.Dom.append(t.getNode(),this.content)}},{key:"appendCard",value:function e(t){if(this.data.scrollAnimation){n.Dom.addClass(t.layout,"landing-ui-is-not-visible");this.scrollObserver.observe(t.layout)}n.Dom.append(t.layout,this.content)}},{key:"clear",value:function e(){this.clearContent();this.clearSidebar();this.forms.clear()}},{key:"clearContent",value:function e(){n.Dom.clean(this.content)}},{key:"clearSidebar",value:function e(){n.Dom.clean(this.sidebar)}},{key:"setTitle",value:function e(t){this.title.innerHTML=t}},{key:"appendFooterButton",value:function e(t){this.buttons.add(t);n.Dom.append(t.layout,this.footer)}},{key:"appendSidebarButton",value:function e(t){this.sidebarButtons.add(t);n.Dom.append(t.layout,this.sidebar)}},{key:"setOverlayClass",value:function e(t){n.Dom.addClass(this.overlay,t)}},{key:"renderTo",value:function e(a){babelHelpers.get(babelHelpers.getPrototypeOf(t.prototype),"renderTo",this).call(this,a);n.Dom.append(this.overlay,a)}},{key:"checkReadyToSave",value:function e(){var t=this;var n=true;this.forms.forEach((function(e){e.fields.forEach((function(e){if(e.readyToSave===false){n=false}if(!e.getListeners("onChangeReadyToSave").has(t.checkReadyToSave)){e.subscribe("onChangeReadyToSave",t.checkReadyToSave)}}))}));n?this.enableSave():this.disableSave()}},{key:"disableSave",value:function e(){var t=this.buttons.get("save_block_content");if(t){t.disable()}}},{key:"enableSave",value:function e(){var t=this.buttons.get("save_block_content");if(t){t.enable()}}}]);return t}(t.BasePanel);e.Content=f})(this.BX.Landing.UI.Panel=this.BX.Landing.UI.Panel||{},BX.Landing.UI.Panel,BX);
//# sourceMappingURL=content.bundle.map.js