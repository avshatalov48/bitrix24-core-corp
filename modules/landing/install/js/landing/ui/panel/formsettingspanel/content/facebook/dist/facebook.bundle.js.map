{"version":3,"file":"facebook.bundle.js","sources":["../src/facebook.js"],"sourcesContent":["import {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc} from 'landing.loc';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {type FormOptions} from 'crm.form.type';\nimport {MessageCard} from 'landing.ui.card.messagecard';\nimport {Integration} from 'crm.form.integration';\n\nexport default class FacebookContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.FacebookContent');\n\n\t\tthis.addItem(\n\t\t\tnew HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_SIDEBAR_BUTTON_FACEBOOK'),\n\t\t\t}),\n\t\t);\n\n\t\tif (!this.options.dictionary.integration.canUse)\n\t\t{\n\t\t\tthis.addItem(\n\t\t\t\tnew MessageCard({\n\t\t\t\t\theader: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_HEADER'),\n\t\t\t\t\tdescription: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_FB_TEXT'),\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcloseable: false,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttonCard = new BaseCard();\n\t\tDom.style(buttonCard.getLayout(), {\n\t\t\tpadding: 0,\n\t\t\tmargin: 0,\n\t\t});\n\n\t\tconst integration = new Integration({\n\t\t\ttype: 'facebook',\n\t\t\tform: this.options.formOptions,\n\t\t\tfields: this.options.crmFields,\n\t\t\tdictionary: this.options.dictionary,\n\t\t});\n\t\tintegration.subscribe('change', this.onChange.bind(this));\n\t\tDom.append(\n\t\t\tintegration.render(),\n\t\t\tbuttonCard.getBody()\n\t\t);\n\t\tthis.addItem(buttonCard);\n\t}\n\n\tprepareButtonText(formOptions: FormOptions)\n\t{\n\t\tconst enabled = formOptions.integration.cases.some((item) => {\n\t\t\treturn item.providerCode === 'facebook';\n\t\t});\n\n\t\tif (enabled)\n\t\t{\n\t\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_FACEBOOK_BUTTON_ENABLED');\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_FACEBOOK_BUTTON');\n\t}\n\n\tvalueReducer(value: {[key: string]: any}): {[key: string]: any}\n\t{\n\t\treturn {\n\t\t\tintegration: this.options.formOptions.integration,\n\t\t};\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: false});\n\t}\n\n\tgetData()\n\t{\n\t\treturn this.options.formOptions.integration.cases.filter(data => data.providerCode === 'facebook')[0] || null;\n\t}\n}"],"names":["FacebookContent","options","setEventNamespace","addItem","HeaderCard","title","Loc","getMessage","dictionary","integration","canUse","MessageCard","header","description","angle","closeable","buttonCard","BaseCard","Dom","style","getLayout","padding","margin","Integration","type","form","formOptions","fields","crmFields","subscribe","onChange","bind","append","render","getBody","enabled","cases","some","item","providerCode","value","event","emit","skipPrepare","filter","data","ContentWrapper"],"mappings":";;;;;;;;KAUqBA;;;GAEpB,yBAAYC,OAAZ,EACA;KAAA;;KAAA;KACC,6GAAMA,OAAN;;KACA,MAAKC,iBAAL,CAAuB,uDAAvB;;KAEA,MAAKC,OAAL,CACC,IAAIC,qCAAJ,CAAe;OACdC,KAAK,EAAEC,eAAG,CAACC,UAAJ,CAAe,iCAAf;MADR,CADD;;KAMA,IAAI,CAAC,MAAKN,OAAL,CAAaO,UAAb,CAAwBC,WAAxB,CAAoCC,MAAzC,EACA;OACC,MAAKP,OAAL,CACC,IAAIQ,uCAAJ,CAAgB;SACfC,MAAM,EAAEN,eAAG,CAACC,UAAJ,CAAe,uDAAf,CADO;SAEfM,WAAW,EAAEP,eAAG,CAACC,UAAJ,CAAe,wDAAf,CAFE;SAGfO,KAAK,EAAE,KAHQ;SAIfC,SAAS,EAAE;QAJZ,CADD;;OASA;;;KAGD,IAAMC,UAAU,GAAG,IAAIC,iCAAJ,EAAnB;KACAC,aAAG,CAACC,KAAJ,CAAUH,UAAU,CAACI,SAAX,EAAV,EAAkC;OACjCC,OAAO,EAAE,CADwB;OAEjCC,MAAM,EAAE;MAFT;KAKA,IAAMb,WAAW,GAAG,IAAIc,gCAAJ,CAAgB;OACnCC,IAAI,EAAE,UAD6B;OAEnCC,IAAI,EAAE,MAAKxB,OAAL,CAAayB,WAFgB;OAGnCC,MAAM,EAAE,MAAK1B,OAAL,CAAa2B,SAHc;OAInCpB,UAAU,EAAE,MAAKP,OAAL,CAAaO;MAJN,CAApB;KAMAC,WAAW,CAACoB,SAAZ,CAAsB,QAAtB,EAAgC,MAAKC,QAAL,CAAcC,IAAd,2CAAhC;KACAb,aAAG,CAACc,MAAJ,CACCvB,WAAW,CAACwB,MAAZ,EADD,EAECjB,UAAU,CAACkB,OAAX,EAFD;;KAIA,MAAK/B,OAAL,CAAaa,UAAb;;KAzCD;;;;;uCA4CkBU,aAClB;OACC,IAAMS,OAAO,GAAGT,WAAW,CAACjB,WAAZ,CAAwB2B,KAAxB,CAA8BC,IAA9B,CAAmC,UAACC,IAAD,EAAU;SAC5D,OAAOA,IAAI,CAACC,YAAL,KAAsB,UAA7B;QADe,CAAhB;;OAIA,IAAIJ,OAAJ,EACA;SACC,OAAO7B,eAAG,CAACC,UAAJ,CAAe,+CAAf,CAAP;;;OAGD,OAAOD,eAAG,CAACC,UAAJ,CAAe,uCAAf,CAAP;;;;kCAGYiC,OACb;OACC,OAAO;SACN/B,WAAW,EAAE,KAAKR,OAAL,CAAayB,WAAb,CAAyBjB;QADvC;;;;8BAKQgC,OACT;OACC,KAAKC,IAAL,CAAU,UAAV,EAAsB;SAACC,WAAW,EAAE;QAApC;;;;+BAID;OACC,OAAO,KAAK1C,OAAL,CAAayB,WAAb,CAAyBjB,WAAzB,CAAqC2B,KAArC,CAA2CQ,MAA3C,CAAkD,UAAAC,IAAI;SAAA,OAAIA,IAAI,CAACN,YAAL,KAAsB,UAA1B;QAAtD,EAA4F,CAA5F,KAAkG,IAAzG;;;;GA3E2CO;;;;;;;;"}