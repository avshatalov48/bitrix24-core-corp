{"version":3,"file":"actions.bundle.js","sources":["../src/internal/action-pages/action-pages.js","../src/images/type1.svg","../src/images/type2.svg","../src/images/type3.svg","../src/internal/action-pages/refill-action-pages.js","../src/actions.js"],"sourcesContent":["import 'ui.design-tokens';\n\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\n\nexport class ActionPagesField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ActionPagesField');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\t\tthis.setLayoutClass('landing-ui-field-action-pages');\n\n\t\tDom.append(this.getSuccess(), this.input);\n\t\tDom.append(this.getFailure(), this.input);\n\n\t\tEvent.bind(document, 'click', this.onDocumentClick.bind(this));\n\t\tEvent.bind(window.top.document, 'click', this.onDocumentClick.bind(this));\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" \n\t\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailure(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('failure', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'failure',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_FAILURE_PAGE_TITLE'),\n\t\t\t\ttext: this.options.failureText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowFailure');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSuccessText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetFailureText(): string\n\t{\n\t\treturn this.getFailure()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type1.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type2.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type3.svg\"","import {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {ActionPagesField} from \"./action-pages\";\n\nexport class RefillActionPagesField extends ActionPagesField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn RefillActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tbuttonCaption: this.options.buttonCaption,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst buttonInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-button');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(buttonInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tbuttonCaption: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tconst buttonContainer = inner.querySelector(`.${classPrefix}-button`);\n\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tDom.attr(buttonContainer, 'contenteditable', !buttonContainer.isContentEditable);\n\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\tlet buttonTag = '';\n\t\tif (options.type === 'success')\n\t\t{\n\t\t\tconst buttonCaption = Text.encode(options.buttonCaption)\n\t\t\t\t|| Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION');\n\n\t\t\tbuttonTag = Tag.render`\n\t\t\t\t<div class=\"${classPrefix}-button\" onclick=\"${onEditorClick}\" \n\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t${buttonCaption}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" onfocus=\"${onFocus}\" onblur=\"${onBlur}\"  \n\t\t\t\t\t\toninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t${buttonTag}\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetButtonCaptionText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t.querySelector('.landing-ui-field-action-pages-page-button')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tbuttonCaption: this.getButtonCaptionText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","import {Dom, Text, Type} from 'main.core';\nimport {Loc} from 'landing.loc';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {RadioButtonField} from 'landing.ui.field.radiobuttonfield';\nimport {BaseEvent} from 'main.core.events';\nimport {PresetField} from 'landing.ui.field.presetfield';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {ActionPagesField} from './internal/action-pages/action-pages';\nimport {MessageCard} from 'landing.ui.card.messagecard';\n\nimport type1Icon from './images/type1.svg';\nimport type2Icon from './images/type2.svg';\nimport type3Icon from './images/type3.svg';\n\nimport './css/style.css';\nimport {RefillActionPagesField} from \"./internal/action-pages/refill-action-pages\";\n\nexport default class ActionsContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.ActionsContent');\n\n\t\tDom.addClass(this.getLayout(), 'landing-ui-actions-content-wrapper');\n\n\t\tthis.addItem(this.getHeader());\n\n\t\tthis.addItem(this.getTypeButtons());\n\n\t\tif (this.options.form)\n\t\t{\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t}\n\n\t\tconst onBlur = () => {\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t};\n\n\t\tconst showFailure =  (event: BaseEvent) => {\n\t\t\tconst show = event.data.show || null\n\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\tthis.options.form.stateText = this.options.formOptions.result.failure.text;\n\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\tthis.options.form.error = this.options.form.sent;\n\t\t};\n\n\t\tthis.getActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\n\t\tthis.getRefillActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\n\t\t\t\tthis.options.form.stateButton.text = this.options.formOptions.result.refill\n\t\t\t\t\t&& this.options.formOptions.result.refill.active\n\t\t\t\t\t? this.options.formOptions.result.refill.caption\n\t\t\t\t\t: '';\n\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\n\t\t\t\tif (!Type.isFunction(this.options.form.stateButton.handler))\n\t\t\t\t{\n\t\t\t\t\tthis.options.form.stateButton.handler = ()=>{};\n\t\t\t\t}\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\t}\n\n\tgetHeader(): HeaderCard\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn new HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TITLE'),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetMessage(type: string): MessageCard\n\t{\n\t\treturn new MessageCard({\n\t\t\tid: 'actionsMessage' + type,\n\t\t\theader: Loc.getMessage('LANDING_ACTIONS_MESSAGE_HEADER_' + type),\n\t\t\tdescription: Loc.getMessage('LANDING_ACTIONS_MESSAGE_DESCRIPTION_' + type),\n\t\t\trestoreState: true,\n\t\t});\n\n\t}\n\n\tgetTypeButtons(): RadioButtonField\n\t{\n\t\treturn this.cache.remember('typeButtons', () => {\n\t\t\treturn new RadioButtonField({\n\t\t\t\tselectable: true,\n\t\t\t\tvalue: (() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.options.formOptions.result.refill.active\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type3';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isStringFilled(this.options.formOptions.result.success.url)\n\t\t\t\t\t\t|| Type.isStringFilled(this.options.formOptions.result.failure.url)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type2';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 'type1';\n\t\t\t\t})(),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type1',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_1'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type2',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_2'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type3',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_3'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type3',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tonChange: this.onTypeChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCheckbox()\n\t{\n\t\treturn this.cache.remember('checkbox', () => {\n\t\t\treturn new BX.Landing.UI.Field.Checkbox({\n\t\t\t\titems: [\n\t\t\t\t\t{name: Loc.getMessage('LANDING_FORM_ACTIONS_CHECKBOX_TITLE'), value: true},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTypeDropdown(): PresetField\n\t{\n\t\treturn this.cache.remember('typeDropdown', () => {\n\t\t\tconst field = new PresetField({\n\t\t\t\tevents: {\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\tthis.addItem(this.getHeader());\n\t\t\t\t\t\tthis.addItem(this.getTypeButtons());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tfield.setTitle(Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_DROPDOWN_TITLE'));\n\t\t\tfield.setIcon(type1Icon);\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetSuccessLinkField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('successLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_SUCCESS_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.success.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailureLinkField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('failureLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_FAILURE_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.failure.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillCaptionField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('refillCaptionFill', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION_FIELD_TITLE'),\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.refill.caption || Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION'),\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDelayField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('delayField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'redirectDelay',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_TITLE'),\n\t\t\t\tcontent: this.options.formOptions.result.redirectDelay,\n\t\t\t\titems: Array.from({length: 11}, (item, index) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: `${index} ${Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_ITEM')}`,\n\t\t\t\t\t\tvalue: (index),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t});\n\t\t});\n\t}\n\n\tonChange()\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tgetActionPages()\n\t{\n\t\treturn this.cache.remember('actionPages', () => {\n\t\t\treturn new ActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillActionPages()\n\t{\n\t\treturn this.cache.remember('refillActionPages', () => {\n\t\t\treturn new RefillActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tbuttonCaption: this.options.formOptions.result.refill.caption,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tonTypeChange(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst typeDropdown = this.getTypeDropdown();\n\n\t\tthis.clear();\n\n\t\tthis.addItem(this.getHeader());\n\t\tthis.addItem(this.getMessage(data.item.id))\n\n\t\tthis.addItem(typeDropdown);\n\n\t\ttypeDropdown.setLinkText(data.item.title.replace(/&nbsp;/, ' '));\n\n\t\tif (data.item.id === 'type1')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type1Icon);\n\t\t\tthis.addItem(this.getActionPages());\n\t\t}\n\n\t\tif (data.item.id === 'type2')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type2Icon);\n\t\t\tthis.addItem(this.getSuccessLinkField());\n\t\t\tthis.addItem(this.getFailureLinkField());\n\t\t\tthis.addItem(this.getDelayField());\n\t\t}\n\n\t\tif (data.item.id === 'type3')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type3Icon);\n\t\t\tthis.addItem(this.getRefillActionPages());\n\t\t}\n\n\t}\n\n\tgetValue(): {[p: string]: any}\n\t{\n\t\tconst useRefill =  this.getTypeButtons().getValue() === 'type3';\n\t\tconst actionPagesValue = !useRefill\n\t\t\t? this.getActionPages().getValue()\n\t\t\t: this.getRefillActionPages().getValue();\n\t\tconst useRedirect = this.getTypeButtons().getValue() === 'type2';\n\n\t\treturn {\n\t\t\tresult: {\n\t\t\t\tsuccess: {\n\t\t\t\t\ttext: actionPagesValue.success,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getSuccessLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tfailure: {\n\t\t\t\t\ttext: actionPagesValue.failure,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getFailureLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tredirectDelay: this.getDelayField().getValue(),\n\t\t\t\trefill: {\n\t\t\t\t\tactive: useRefill,\n\t\t\t\t\tcaption: useRefill ? actionPagesValue.buttonCaption : ''\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}"],"names":["ActionPagesField","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","setLayoutClass","Dom","append","getSuccess","input","getFailure","Event","bind","document","onDocumentClick","window","top","successInput","querySelector","failureInput","attr","cache","remember","createPageBlock","type","title","Loc","getMessage","text","successText","onFocus","emit","BaseEvent","data","show","onInput","onShowClick","onBlur","failureText","innerText","success","getSuccessText","failure","getFailureText","classPrefix","onEditClick","event","preventDefault","stopPropagation","inner","currentTarget","closest","textContainer","isContentEditable","Type","isFunction","onEditorClick","onViewClick","Tag","render","Text","encode","BaseField","RefillActionPagesField","buttonCaption","buttonInput","getButtonCaptionText","buttonContainer","buttonTag","ActionsContent","addClass","getLayout","addItem","getHeader","getTypeButtons","form","sent","error","showFailure","formOptions","result","getValue","stateText","getActionPages","subscribe","getRefillActionPages","stateButton","refill","active","caption","handler","HeaderCard","MessageCard","id","header","description","restoreState","RadioButtonField","selectable","value","isStringFilled","url","items","icon","onChange","onTypeChange","BX","Landing","UI","Field","Checkbox","name","field","PresetField","events","onClick","clear","setTitle","setIcon","type1Icon","TextField","placeholder","textOnly","content","Dropdown","selector","redirectDelay","Array","from","length","item","index","skipPrepare","getData","typeDropdown","getTypeDropdown","setLinkText","replace","type2Icon","getSuccessLinkField","getFailureLinkField","getDelayField","type3Icon","useRefill","actionPagesValue","useRedirect","decode","ContentWrapper"],"mappings":"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"}