{"version":3,"file":"actions.bundle.js","sources":["../src/internal/action-pages/action-pages.js","../src/images/type1.svg","../src/images/type2.svg","../src/images/type3.svg","../src/internal/action-pages/refill-action-pages.js","../src/actions.js"],"sourcesContent":["import 'ui.design-tokens';\n\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\n\nexport class ActionPagesField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ActionPagesField');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\t\tthis.setLayoutClass('landing-ui-field-action-pages');\n\n\t\tDom.append(this.getSuccess(), this.input);\n\t\tDom.append(this.getFailure(), this.input);\n\n\t\tEvent.bind(document, 'click', this.onDocumentClick.bind(this));\n\t\tEvent.bind(window.top.document, 'click', this.onDocumentClick.bind(this));\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" \n\t\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailure(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('failure', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'failure',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_FAILURE_PAGE_TITLE'),\n\t\t\t\ttext: this.options.failureText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowFailure');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSuccessText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetFailureText(): string\n\t{\n\t\treturn this.getFailure()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type1.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type2.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type3.svg\"","import {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {ActionPagesField} from \"./action-pages\";\n\nexport class RefillActionPagesField extends ActionPagesField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn RefillActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tbuttonCaption: this.options.buttonCaption,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst buttonInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-button');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(buttonInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tbuttonCaption: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tconst buttonContainer = inner.querySelector(`.${classPrefix}-button`);\n\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tDom.attr(buttonContainer, 'contenteditable', !buttonContainer.isContentEditable);\n\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\tlet buttonTag = '';\n\t\tif (options.type === 'success')\n\t\t{\n\t\t\tconst buttonCaption = Text.encode(options.buttonCaption)\n\t\t\t\t|| Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION');\n\n\t\t\tbuttonTag = Tag.render`\n\t\t\t\t<div class=\"${classPrefix}-button\" onclick=\"${onEditorClick}\" \n\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t${buttonCaption}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" onfocus=\"${onFocus}\" onblur=\"${onBlur}\"  \n\t\t\t\t\t\toninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t${buttonTag}\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetButtonCaptionText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t.querySelector('.landing-ui-field-action-pages-page-button')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tbuttonCaption: this.getButtonCaptionText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","import {Dom, Text, Type} from 'main.core';\nimport {Loc} from 'landing.loc';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {RadioButtonField} from 'landing.ui.field.radiobuttonfield';\nimport {BaseEvent} from 'main.core.events';\nimport {PresetField} from 'landing.ui.field.presetfield';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {ActionPagesField} from './internal/action-pages/action-pages';\nimport {MessageCard} from 'landing.ui.card.messagecard';\n\nimport type1Icon from './images/type1.svg';\nimport type2Icon from './images/type2.svg';\nimport type3Icon from './images/type3.svg';\n\nimport './css/style.css';\nimport {RefillActionPagesField} from \"./internal/action-pages/refill-action-pages\";\n\nexport default class ActionsContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.ActionsContent');\n\n\t\tDom.addClass(this.getLayout(), 'landing-ui-actions-content-wrapper');\n\n\t\tthis.addItem(this.getHeader());\n\n\t\tthis.addItem(this.getTypeButtons());\n\n\t\tif (this.options.form)\n\t\t{\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t}\n\n\t\tconst onBlur = () => {\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t};\n\n\t\tconst showFailure =  (event: BaseEvent) => {\n\t\t\tconst show = event.data.show || null\n\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\tthis.options.form.stateText = this.options.formOptions.result.failure.text;\n\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\tthis.options.form.error = this.options.form.sent;\n\t\t};\n\n\t\tthis.getActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\n\t\tthis.getRefillActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\n\t\t\t\tthis.options.form.stateButton.text = this.options.formOptions.result.refill\n\t\t\t\t\t&& this.options.formOptions.result.refill.active\n\t\t\t\t\t? this.options.formOptions.result.refill.caption\n\t\t\t\t\t: '';\n\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\n\t\t\t\tif (!Type.isFunction(this.options.form.stateButton.handler))\n\t\t\t\t{\n\t\t\t\t\tthis.options.form.stateButton.handler = ()=>{};\n\t\t\t\t}\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\t}\n\n\tgetHeader(): HeaderCard\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn new HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TITLE'),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetMessage(type: string): MessageCard\n\t{\n\t\treturn new MessageCard({\n\t\t\tid: 'actionsMessage' + type,\n\t\t\theader: Loc.getMessage('LANDING_ACTIONS_MESSAGE_HEADER_' + type),\n\t\t\tdescription: Loc.getMessage('LANDING_ACTIONS_MESSAGE_DESCRIPTION_' + type),\n\t\t\trestoreState: true,\n\t\t});\n\n\t}\n\n\tgetTypeButtons(): RadioButtonField\n\t{\n\t\treturn this.cache.remember('typeButtons', () => {\n\t\t\treturn new RadioButtonField({\n\t\t\t\tselectable: true,\n\t\t\t\tvalue: (() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.options.formOptions.result.refill.active\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type3';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isStringFilled(this.options.formOptions.result.success.url)\n\t\t\t\t\t\t|| Type.isStringFilled(this.options.formOptions.result.failure.url)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type2';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 'type1';\n\t\t\t\t})(),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type1',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_1'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type2',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_2'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type3',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_3'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type3',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tonChange: this.onTypeChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCheckbox()\n\t{\n\t\treturn this.cache.remember('checkbox', () => {\n\t\t\treturn new BX.Landing.UI.Field.Checkbox({\n\t\t\t\titems: [\n\t\t\t\t\t{name: Loc.getMessage('LANDING_FORM_ACTIONS_CHECKBOX_TITLE'), value: true},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTypeDropdown(): PresetField\n\t{\n\t\treturn this.cache.remember('typeDropdown', () => {\n\t\t\tconst field = new PresetField({\n\t\t\t\tevents: {\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\tthis.addItem(this.getHeader());\n\t\t\t\t\t\tthis.addItem(this.getTypeButtons());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tfield.setTitle(Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_DROPDOWN_TITLE'));\n\t\t\tfield.setIcon(type1Icon);\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetSuccessLinkField(): BX.Landing.UI.Field.LinkUrl\n\t{\n\t\treturn this.cache.remember('successLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_SUCCESS_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.success.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailureLinkField(): BX.Landing.UI.Field.LinkUrl\n\t{\n\t\treturn this.cache.remember('failureLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_FAILURE_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.failure.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillCaptionField(): BX.Landing.UI.Field.LinkUrl\n\t{\n\t\treturn this.cache.remember('refillCaptionFill', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION_FIELD_TITLE'),\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.refill.caption || Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION'),\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDelayField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('delayField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'redirectDelay',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_TITLE'),\n\t\t\t\tcontent: this.options.formOptions.result.redirectDelay,\n\t\t\t\titems: Array.from({length: 11}, (item, index) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: `${index} ${Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_ITEM')}`,\n\t\t\t\t\t\tvalue: (index),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t});\n\t\t});\n\t}\n\n\tonChange()\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tgetActionPages()\n\t{\n\t\treturn this.cache.remember('actionPages', () => {\n\t\t\treturn new ActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillActionPages()\n\t{\n\t\treturn this.cache.remember('refillActionPages', () => {\n\t\t\treturn new RefillActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tbuttonCaption: this.options.formOptions.result.refill.caption,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tonTypeChange(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst typeDropdown = this.getTypeDropdown();\n\n\t\tthis.clear();\n\n\t\tthis.addItem(this.getHeader());\n\t\tthis.addItem(this.getMessage(data.item.id))\n\n\t\tthis.addItem(typeDropdown);\n\n\t\ttypeDropdown.setLinkText(data.item.title.replace(/&nbsp;/, ' '));\n\n\t\tif (data.item.id === 'type1')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type1Icon);\n\t\t\tthis.addItem(this.getActionPages());\n\t\t}\n\n\t\tif (data.item.id === 'type2')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type2Icon);\n\t\t\tthis.addItem(this.getSuccessLinkField());\n\t\t\tthis.addItem(this.getFailureLinkField());\n\t\t\tthis.addItem(this.getDelayField());\n\t\t}\n\n\t\tif (data.item.id === 'type3')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type3Icon);\n\t\t\tthis.addItem(this.getRefillActionPages());\n\t\t}\n\n\t}\n\n\tgetValue(): {[p: string]: any}\n\t{\n\t\tconst useRefill =  this.getTypeButtons().getValue() === 'type3';\n\t\tconst actionPagesValue = !useRefill\n\t\t\t? this.getActionPages().getValue()\n\t\t\t: this.getRefillActionPages().getValue();\n\t\tconst useRedirect = this.getTypeButtons().getValue() === 'type2';\n\n\t\treturn {\n\t\t\tresult: {\n\t\t\t\tsuccess: {\n\t\t\t\t\ttext: actionPagesValue.success,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getSuccessLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tfailure: {\n\t\t\t\t\ttext: actionPagesValue.failure,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getFailureLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tredirectDelay: this.getDelayField().getValue(),\n\t\t\t\trefill: {\n\t\t\t\t\tactive: useRefill,\n\t\t\t\t\tcaption: useRefill ? actionPagesValue.buttonCaption : ''\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}"],"names":["ActionPagesField","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","setLayoutClass","Dom","append","getSuccess","input","getFailure","Event","bind","document","onDocumentClick","window","top","successInput","querySelector","failureInput","attr","cache","remember","createPageBlock","type","title","Loc","getMessage","text","successText","onFocus","emit","BaseEvent","data","show","onInput","onShowClick","onBlur","failureText","innerText","success","getSuccessText","failure","getFailureText","classPrefix","onEditClick","event","preventDefault","stopPropagation","inner","currentTarget","closest","textContainer","isContentEditable","Type","isFunction","onEditorClick","onViewClick","Tag","render","Text","encode","BaseField","RefillActionPagesField","buttonCaption","buttonInput","getButtonCaptionText","buttonContainer","buttonTag","ActionsContent","addClass","getLayout","addItem","getHeader","getTypeButtons","form","sent","error","showFailure","formOptions","result","getValue","stateText","getActionPages","subscribe","getRefillActionPages","stateButton","refill","active","caption","handler","HeaderCard","MessageCard","id","header","description","restoreState","RadioButtonField","selectable","value","isStringFilled","url","items","icon","onChange","onTypeChange","BX","Landing","UI","Field","Checkbox","name","field","PresetField","events","onClick","clear","setTitle","setIcon","type1Icon","TextField","placeholder","textOnly","content","Dropdown","selector","redirectDelay","Array","from","length","item","index","skipPrepare","getData","typeDropdown","getTypeDropdown","setLinkText","replace","type2Icon","getSuccessLinkField","getFailureLinkField","getDelayField","type3Icon","useRefill","actionPagesValue","useRedirect","decode","ContentWrapper"],"mappings":"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"}