{"version":3,"file":"actions.bundle.js","sources":["../src/internal/action-pages/action-pages.js","../src/images/type1.svg","../src/images/type2.svg","../src/images/type3.svg","../src/internal/action-pages/refill-action-pages.js","../src/actions.js"],"sourcesContent":["import {BaseField} from 'landing.ui.field.basefield';\nimport {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\n\nexport class ActionPagesField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.ActionPagesField');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\t\tthis.setLayoutClass('landing-ui-field-action-pages');\n\n\t\tDom.append(this.getSuccess(), this.input);\n\t\tDom.append(this.getFailure(), this.input);\n\n\t\tEvent.bind(document, 'click', this.onDocumentClick.bind(this));\n\t\tEvent.bind(window.top.document, 'click', this.onDocumentClick.bind(this));\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" \n\t\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailure(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('failure', () => {\n\t\t\treturn ActionPagesField.createPageBlock({\n\t\t\t\ttype: 'failure',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_FAILURE_PAGE_TITLE'),\n\t\t\t\ttext: this.options.failureText,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowFailure', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowFailure');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSuccessText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetFailureText(): string\n\t{\n\t\treturn this.getFailure()\n\t\t\t.querySelector('.landing-ui-field-action-pages-page-text')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type1.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type2.svg\"","export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/actions/dist/images/type3.svg\"","import {Dom, Tag, Type, Event, Text} from 'main.core';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\nimport {ActionPagesField} from \"./action-pages\";\n\nexport class RefillActionPagesField extends ActionPagesField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetSuccess(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('success', () => {\n\t\t\treturn RefillActionPagesField.createPageBlock({\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_SUCCESS_PAGE_TITLE'),\n\t\t\t\ttext: this.options.successText,\n\t\t\t\tbuttonCaption: this.options.buttonCaption,\n\t\t\t\tonFocus: () => {\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonInput: () => {\n\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\tthis.emit('onShowSuccess', new Event.BaseEvent({data: {show: true}}));\n\t\t\t\t},\n\t\t\t\tonShowClick: () => {\n\t\t\t\t\tthis.emit('onShowSuccess');\n\t\t\t\t},\n\t\t\t\tonBlur: () => {\n\t\t\t\t\tthis.emit('onBlur');\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tonDocumentClick()\n\t{\n\t\tconst successInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-text');\n\t\tconst buttonInput = this.getSuccess().querySelector('.landing-ui-field-action-pages-page-button');\n\t\tconst failureInput = this.getFailure().querySelector('.landing-ui-field-action-pages-page-text');\n\n\t\tDom.attr(successInput, 'contenteditable', null);\n\t\tDom.attr(buttonInput, 'contenteditable', null);\n\t\tDom.attr(failureInput, 'contenteditable', null);\n\t}\n\n\tstatic createPageBlock(\n\t\toptions: {\n\t\t\ttype: 'success' | 'failure',\n\t\t\ttitle: string,\n\t\t\ttext: string,\n\t\t\tbuttonCaption: string,\n\t\t\tonShowClick: (event: MouseEvent) => void,\n\t\t\tonEditClick: (event: MouseEvent) => void,\n\t\t\tonBlur: (event: Event) => void,\n\t\t\tonFocus: (event: Event) => void,\n\t\t},\n\t): HTMLDivElement\n\t{\n\t\tconst classPrefix = 'landing-ui-field-action-pages-page';\n\n\t\tconst onEditClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tconst inner = event.currentTarget.closest(`.${classPrefix}-inner`);\n\t\t\tconst textContainer = inner.querySelector(`.${classPrefix}-text`);\n\t\t\tconst buttonContainer = inner.querySelector(`.${classPrefix}-button`);\n\n\t\t\tDom.attr(textContainer, 'contenteditable', !textContainer.isContentEditable);\n\t\t\tDom.attr(buttonContainer, 'contenteditable', !buttonContainer.isContentEditable);\n\n\t\t\tif (Type.isFunction(options.onEditClick))\n\t\t\t{\n\t\t\t\toptions.onEditClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onEditorClick = (event) => {\n\t\t\tevent.stopPropagation();\n\t\t};\n\n\t\tconst onViewClick = (event: MouseEvent) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onShowClick))\n\t\t\t{\n\t\t\t\toptions.onShowClick(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onBlur))\n\t\t\t{\n\t\t\t\toptions.onBlur(event);\n\t\t\t}\n\t\t};\n\n\t\tconst onFocus = (event: Event) => {\n\t\t\tevent.preventDefault();\n\t\t\tif (Type.isFunction(options.onFocus))\n\t\t\t{\n\t\t\t\toptions.onFocus(event);\n\t\t\t}\n\t\t};\n\n\t\tlet buttonTag = '';\n\t\tif (options.type === 'success')\n\t\t{\n\t\t\tconst buttonCaption = Text.encode(options.buttonCaption)\n\t\t\t\t|| Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION');\n\n\t\t\tbuttonTag = Tag.render`\n\t\t\t\t<div class=\"${classPrefix}-button\" onclick=\"${onEditorClick}\" \n\t\t\t\t\tonfocus=\"${onFocus}\" onblur=\"${onBlur}\" oninput=\"${options.onInput}\">\n\t\t\t\t\t${buttonCaption}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"${classPrefix} ${classPrefix}-${options.type}\">\n\t\t\t\t<div class=\"${classPrefix}-title\">\n\t\t\t\t\t${options.title}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${classPrefix}-inner\">\n\t\t\t\t\t<div class=\"${classPrefix}-header\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-header-view\" onclick=\"${onViewClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_SHOW')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"${classPrefix}-icon\"></div>\n\t\t\t\t\t<div class=\"${classPrefix}-text\" onclick=\"${onEditorClick}\" onfocus=\"${onFocus}\" onblur=\"${onBlur}\"  \n\t\t\t\t\t\toninput=\"${options.onInput}\">\n\t\t\t\t\t\t${Text.encode(options.text)}\n\t\t\t\t\t</div>\n\t\t\t\t\t${buttonTag}\n\t\t\t\t\t<div class=\"${classPrefix}-footer\">\n\t\t\t\t\t\t<span class=\"${classPrefix}-footer-edit\" onclick=\"${onEditClick}\">\n\t\t\t\t\t\t\t${Loc.getMessage('LANDING_FORM_ACTIONS_EDIT_PAGE_EDIT')}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetButtonCaptionText(): string\n\t{\n\t\treturn this.getSuccess()\n\t\t.querySelector('.landing-ui-field-action-pages-page-button')\n\t\t\t.innerText;\n\t}\n\n\tgetValue()\n\t{\n\t\treturn {\n\t\t\tsuccess: this.getSuccessText(),\n\t\t\tbuttonCaption: this.getButtonCaptionText(),\n\t\t\tfailure: this.getFailureText(),\n\t\t};\n\t}\n}","import {Dom, Text, Type} from 'main.core';\nimport {Loc} from 'landing.loc';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {RadioButtonField} from 'landing.ui.field.radiobuttonfield';\nimport {BaseEvent} from 'main.core.events';\nimport {PresetField} from 'landing.ui.field.presetfield';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {ActionPagesField} from './internal/action-pages/action-pages';\nimport {MessageCard} from 'landing.ui.card.messagecard';\n\nimport type1Icon from './images/type1.svg';\nimport type2Icon from './images/type2.svg';\nimport type3Icon from './images/type3.svg';\n\nimport './css/style.css';\nimport {RefillActionPagesField} from \"./internal/action-pages/refill-action-pages\";\n\nexport default class ActionsContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.ActionsContent');\n\n\t\tDom.addClass(this.getLayout(), 'landing-ui-actions-content-wrapper');\n\n\t\tthis.addItem(this.getHeader());\n\n\t\tthis.addItem(this.getTypeButtons());\n\n\t\tif (this.options.form)\n\t\t{\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t}\n\n\t\tconst onBlur = () => {\n\t\t\tthis.options.form.sent = false;\n\t\t\tthis.options.form.error = false;\n\t\t};\n\n\t\tconst showFailure =  (event: BaseEvent) => {\n\t\t\tconst show = event.data.show || null\n\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\tthis.options.form.stateText = this.options.formOptions.result.failure.text;\n\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\tthis.options.form.error = this.options.form.sent;\n\t\t};\n\n\t\tthis.getActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\n\t\tthis.getRefillActionPages()\n\t\t\t.subscribe('onShowSuccess', (event: BaseEvent) => {\n\t\t\t\tconst show = event.data.show || null\n\t\t\t\tthis.options.formOptions.result = this.getValue().result;\n\t\t\t\tthis.options.form.stateText = this.options.formOptions.result.success.text;\n\n\t\t\t\tthis.options.form.stateButton.text = this.options.formOptions.result.refill\n\t\t\t\t\t&& this.options.formOptions.result.refill.active\n\t\t\t\t\t? this.options.formOptions.result.refill.caption\n\t\t\t\t\t: '';\n\n\t\t\t\tthis.options.form.sent = show === null ? !this.options.form.sent : show;\n\t\t\t\tthis.options.form.error = false;\n\n\t\t\t\tif (!Type.isFunction(this.options.form.stateButton.handler))\n\t\t\t\t{\n\t\t\t\t\tthis.options.form.stateButton.handler = ()=>{};\n\t\t\t\t}\n\t\t\t})\n\t\t\t.subscribe('onShowFailure', showFailure)\n\t\t\t.subscribe('onBlur', onBlur)\n\t\t;\n\t}\n\n\tgetHeader(): HeaderCard\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn new HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TITLE'),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetMessage(type: string): MessageCard\n\t{\n\t\treturn new MessageCard({\n\t\t\tid: 'actionsMessage' + type,\n\t\t\theader: Loc.getMessage('LANDING_ACTIONS_MESSAGE_HEADER_' + type),\n\t\t\tdescription: Loc.getMessage('LANDING_ACTIONS_MESSAGE_DESCRIPTION_' + type),\n\t\t\trestoreState: true,\n\t\t});\n\n\t}\n\n\tgetTypeButtons(): RadioButtonField\n\t{\n\t\treturn this.cache.remember('typeButtons', () => {\n\t\t\treturn new RadioButtonField({\n\t\t\t\tselectable: true,\n\t\t\t\tvalue: (() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.options.formOptions.result.refill.active\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type3';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tType.isStringFilled(this.options.formOptions.result.success.url)\n\t\t\t\t\t\t|| Type.isStringFilled(this.options.formOptions.result.failure.url)\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn 'type2';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 'type1';\n\t\t\t\t})(),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type1',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_1'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type1',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type2',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_2'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type2',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'type3',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_3'),\n\t\t\t\t\t\ticon: 'landing-ui-form-actions-type3',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tonChange: this.onTypeChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCheckbox()\n\t{\n\t\treturn this.cache.remember('checkbox', () => {\n\t\t\treturn new BX.Landing.UI.Field.Checkbox({\n\t\t\t\titems: [\n\t\t\t\t\t{name: Loc.getMessage('LANDING_FORM_ACTIONS_CHECKBOX_TITLE'), value: true},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetTypeDropdown(): PresetField\n\t{\n\t\treturn this.cache.remember('typeDropdown', () => {\n\t\t\tconst field = new PresetField({\n\t\t\t\tevents: {\n\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\tthis.addItem(this.getHeader());\n\t\t\t\t\t\tthis.addItem(this.getTypeButtons());\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t\tfield.setTitle(Loc.getMessage('LANDING_FORM_ACTIONS_TYPE_DROPDOWN_TITLE'));\n\t\t\tfield.setIcon(type1Icon);\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetSuccessLinkField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('successLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_SUCCESS_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.success.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFailureLinkField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('failureLinkField', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_FAILURE_FIELD_TITLE'),\n\t\t\t\tplaceholder: 'http://',\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.failure.url,\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillCaptionField(): BX.Landing.UI.Field.LinkURL\n\t{\n\t\treturn this.cache.remember('refillCaptionFill', () => {\n\t\t\treturn new TextField({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION_FIELD_TITLE'),\n\t\t\t\ttextOnly: true,\n\t\t\t\tcontent: this.options.formOptions.result.refill.caption || Loc.getMessage('LANDING_FORM_ACTIONS_REFILL_CAPTION'),\n\t\t\t\tonInput: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDelayField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('delayField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'redirectDelay',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_TITLE'),\n\t\t\t\tcontent: this.options.formOptions.result.redirectDelay,\n\t\t\t\titems: Array.from({length: 11}, (item, index) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: `${index} ${Loc.getMessage('LANDING_FORM_ACTIONS_DELAY_ITEM')}`,\n\t\t\t\t\t\tvalue: (index),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t});\n\t\t});\n\t}\n\n\tonChange()\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tgetActionPages()\n\t{\n\t\treturn this.cache.remember('actionPages', () => {\n\t\t\treturn new ActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetRefillActionPages()\n\t{\n\t\treturn this.cache.remember('refillActionPages', () => {\n\t\t\treturn new RefillActionPagesField({\n\t\t\t\tsuccessText: this.options.formOptions.result.success.text,\n\t\t\t\tbuttonCaption: this.options.formOptions.result.refill.caption,\n\t\t\t\tfailureText: this.options.formOptions.result.failure.text,\n\t\t\t\tonChange: this.onChange.bind(this),\n\t\t\t});\n\t\t});\n\t}\n\n\tonTypeChange(event: BaseEvent)\n\t{\n\t\tconst data = event.getData();\n\t\tconst typeDropdown = this.getTypeDropdown();\n\n\t\tthis.clear();\n\n\t\tthis.addItem(this.getHeader());\n\t\tthis.addItem(this.getMessage(data.item.id))\n\n\t\tthis.addItem(typeDropdown);\n\n\t\ttypeDropdown.setLinkText(data.item.title.replace(/&nbsp;/, ' '));\n\n\t\tif (data.item.id === 'type1')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type1Icon);\n\t\t\tthis.addItem(this.getActionPages());\n\t\t}\n\n\t\tif (data.item.id === 'type2')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type2Icon);\n\t\t\tthis.addItem(this.getSuccessLinkField());\n\t\t\tthis.addItem(this.getFailureLinkField());\n\t\t\tthis.addItem(this.getDelayField());\n\t\t}\n\n\t\tif (data.item.id === 'type3')\n\t\t{\n\t\t\ttypeDropdown.setIcon(type3Icon);\n\t\t\tthis.addItem(this.getRefillActionPages());\n\t\t}\n\n\t}\n\n\tgetValue(): {[p: string]: any}\n\t{\n\t\tconst useRefill =  this.getTypeButtons().getValue() === 'type3';\n\t\tconst actionPagesValue = !useRefill\n\t\t\t? this.getActionPages().getValue()\n\t\t\t: this.getRefillActionPages().getValue();\n\t\tconst useRedirect = this.getTypeButtons().getValue() === 'type2';\n\n\t\treturn {\n\t\t\tresult: {\n\t\t\t\tsuccess: {\n\t\t\t\t\ttext: actionPagesValue.success,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getSuccessLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tfailure: {\n\t\t\t\t\ttext: actionPagesValue.failure,\n\t\t\t\t\turl: useRedirect ? Text.decode(this.getFailureLinkField().getValue()) : '',\n\t\t\t\t},\n\t\t\t\tredirectDelay: this.getDelayField().getValue(),\n\t\t\t\trefill: {\n\t\t\t\t\tactive: useRefill,\n\t\t\t\t\tcaption: useRefill ? actionPagesValue.buttonCaption : ''\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t}\n}"],"names":["ActionPagesField","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","setLayoutClass","Dom","append","getSuccess","input","getFailure","Event","bind","document","onDocumentClick","window","top","successInput","querySelector","failureInput","attr","cache","remember","createPageBlock","type","title","Loc","getMessage","text","successText","onFocus","emit","BaseEvent","data","show","onInput","onShowClick","onBlur","failureText","innerText","success","getSuccessText","failure","getFailureText","classPrefix","onEditClick","event","preventDefault","stopPropagation","inner","currentTarget","closest","textContainer","isContentEditable","Type","isFunction","onEditorClick","onViewClick","Tag","render","Text","encode","BaseField","RefillActionPagesField","buttonCaption","buttonInput","getButtonCaptionText","buttonContainer","buttonTag","ActionsContent","addClass","getLayout","addItem","getHeader","getTypeButtons","form","sent","error","showFailure","formOptions","result","getValue","stateText","getActionPages","subscribe","getRefillActionPages","stateButton","refill","active","caption","handler","HeaderCard","MessageCard","id","header","description","restoreState","RadioButtonField","selectable","value","isStringFilled","url","items","icon","onChange","onTypeChange","BX","Landing","UI","Field","Checkbox","name","field","PresetField","events","onClick","clear","setTitle","setIcon","type1Icon","TextField","placeholder","textOnly","content","Dropdown","selector","redirectDelay","Array","from","length","item","index","skipPrepare","getData","typeDropdown","getTypeDropdown","setLinkText","replace","type2Icon","getSuccessLinkField","getFailureLinkField","getDelayField","type3Icon","useRefill","actionPagesValue","useRedirect","decode","ContentWrapper"],"mappings":"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"}