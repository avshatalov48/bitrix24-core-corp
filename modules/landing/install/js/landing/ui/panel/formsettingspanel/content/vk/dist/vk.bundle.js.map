{"version":3,"file":"vk.bundle.js","sources":["../src/vk.js"],"sourcesContent":["import {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc} from 'landing.loc';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {type FormOptions} from 'crm.form.type';\nimport {MessageCard} from 'landing.ui.card.messagecard';\nimport {Integration} from 'crm.form.integration';\n\nexport default class VkContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.VkContent');\n\n\t\tthis.addItem(\n\t\t\tnew HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_SIDEBAR_BUTTON_VK'),\n\t\t\t}),\n\t\t);\n\n\t\tif (!this.options.dictionary.integration.canUse)\n\t\t{\n\t\t\tthis.addItem(\n\t\t\t\tnew MessageCard({\n\t\t\t\t\theader: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_HEADER'),\n\t\t\t\t\tdescription: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_VK_TEXT'),\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcloseable: false,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttonCard = new BaseCard();\n\t\tDom.style(buttonCard.getLayout(), {\n\t\t\tpadding: 0,\n\t\t\tmargin: 0,\n\t\t});\n\n\t\tconst integration = new Integration({\n\t\t\ttype: 'vkontakte',\n\t\t\tform: this.options.formOptions,\n\t\t\tfields: this.options.crmFields,\n\t\t\tdictionary: this.options.dictionary,\n\t\t});\n\t\tintegration.subscribe('change', this.onChange.bind(this));\n\t\tDom.append(\n\t\t\tintegration.render(),\n\t\t\tbuttonCard.getBody()\n\t\t);\n\t\tthis.addItem(buttonCard);\n\t}\n\n\tprepareButtonText(formOptions: FormOptions)\n\t{\n\t\tconst enabled = formOptions.integration.cases.some((item) => {\n\t\t\treturn item.providerCode === 'vkontakte';\n\t\t});\n\n\t\tif (enabled)\n\t\t{\n\t\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_VK_BUTTON_ENABLED');\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_VK_BUTTON');\n\t}\n\n\tvalueReducer(value: {[key: string]: any}): {[key: string]: any}\n\t{\n\t\treturn {\n\t\t\tintegration: this.options.formOptions.integration,\n\t\t};\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: false});\n\t}\n\n\tgetData()\n\t{\n\t\treturn this.options.formOptions.integration.cases.filter(data => data.providerCode === 'vkontakte')[0] || null;\n\t}\n}"],"names":["VkContent","options","setEventNamespace","addItem","HeaderCard","title","Loc","getMessage","dictionary","integration","canUse","MessageCard","header","description","angle","closeable","buttonCard","BaseCard","Dom","style","getLayout","padding","margin","Integration","type","form","formOptions","fields","crmFields","subscribe","onChange","bind","append","render","getBody","enabled","cases","some","item","providerCode","value","event","emit","skipPrepare","filter","data","ContentWrapper"],"mappings":";;;;;;;;KAUqBA,SAAS;GAAA;GAE7B,mBAAYC,OAAO,EACnB;KAAA;KAAA;KACC,uGAAMA,OAAO;KACb,MAAKC,iBAAiB,CAAC,iDAAiD,CAAC;KAEzE,MAAKC,OAAO,CACX,IAAIC,qCAAU,CAAC;OACdC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,2BAA2B;MACjD,CAAC,CACF;KAED,IAAI,CAAC,MAAKN,OAAO,CAACO,UAAU,CAACC,WAAW,CAACC,MAAM,EAC/C;OACC,MAAKP,OAAO,CACX,IAAIQ,uCAAW,CAAC;SACfC,MAAM,EAAEN,eAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC;SAC/EM,WAAW,EAAEP,eAAG,CAACC,UAAU,CAAC,wDAAwD,CAAC;SACrFO,KAAK,EAAE,KAAK;SACZC,SAAS,EAAE;QACX,CAAC,CACF;OAED;;KAGD,IAAMC,UAAU,GAAG,IAAIC,iCAAQ,EAAE;KACjCC,aAAG,CAACC,KAAK,CAACH,UAAU,CAACI,SAAS,EAAE,EAAE;OACjCC,OAAO,EAAE,CAAC;OACVC,MAAM,EAAE;MACR,CAAC;KAEF,IAAMb,WAAW,GAAG,IAAIc,gCAAW,CAAC;OACnCC,IAAI,EAAE,WAAW;OACjBC,IAAI,EAAE,MAAKxB,OAAO,CAACyB,WAAW;OAC9BC,MAAM,EAAE,MAAK1B,OAAO,CAAC2B,SAAS;OAC9BpB,UAAU,EAAE,MAAKP,OAAO,CAACO;MACzB,CAAC;KACFC,WAAW,CAACoB,SAAS,CAAC,QAAQ,EAAE,MAAKC,QAAQ,CAACC,IAAI,2CAAM,CAAC;KACzDb,aAAG,CAACc,MAAM,CACTvB,WAAW,CAACwB,MAAM,EAAE,EACpBjB,UAAU,CAACkB,OAAO,EAAE,CACpB;KACD,MAAK/B,OAAO,CAACa,UAAU,CAAC;KAAC;;GACzB;KAAA;KAAA,kCAEiBU,WAAwB,EAC1C;OACC,IAAMS,OAAO,GAAGT,WAAW,CAACjB,WAAW,CAAC2B,KAAK,CAACC,IAAI,CAAC,UAACC,IAAI,EAAK;SAC5D,OAAOA,IAAI,CAACC,YAAY,KAAK,WAAW;QACxC,CAAC;OAEF,IAAIJ,OAAO,EACX;SACC,OAAO7B,eAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;;OAGjE,OAAOD,eAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;;;KACxD;KAAA,6BAEYiC,KAA2B,EACxC;OACC,OAAO;SACN/B,WAAW,EAAE,IAAI,CAACR,OAAO,CAACyB,WAAW,CAACjB;QACtC;;;KACD;KAAA,yBAEQgC,KAAgB,EACzB;OACC,IAAI,CAACC,IAAI,CAAC,UAAU,EAAE;SAACC,WAAW,EAAE;QAAM,CAAC;;;KAC3C;KAAA,0BAGD;OACC,OAAO,IAAI,CAAC1C,OAAO,CAACyB,WAAW,CAACjB,WAAW,CAAC2B,KAAK,CAACQ,MAAM,CAAC,UAAAC,IAAI;SAAA,OAAIA,IAAI,CAACN,YAAY,KAAK,WAAW;SAAC,CAAC,CAAC,CAAC,IAAI,IAAI;;;GAC9G;CAAA,EA5EqCO,+CAAc;;;;;;;;"}