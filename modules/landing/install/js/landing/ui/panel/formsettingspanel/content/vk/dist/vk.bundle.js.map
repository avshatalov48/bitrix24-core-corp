{"version":3,"file":"vk.bundle.js","sources":["../src/vk.js"],"sourcesContent":["import {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc} from 'landing.loc';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Dom} from 'main.core';\nimport {BaseEvent} from 'main.core.events';\nimport {type FormOptions} from 'crm.form.type';\nimport {MessageCard} from 'landing.ui.card.messagecard';\nimport {Integration} from 'crm.form.integration';\n\nexport default class VkContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.VkContent');\n\n\t\tthis.addItem(\n\t\t\tnew HeaderCard({\n\t\t\t\ttitle: Loc.getMessage('LANDING_SIDEBAR_BUTTON_VK'),\n\t\t\t}),\n\t\t);\n\n\t\tif (!this.options.dictionary.integration.canUse)\n\t\t{\n\t\t\tthis.addItem(\n\t\t\t\tnew MessageCard({\n\t\t\t\t\theader: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_HEADER'),\n\t\t\t\t\tdescription: Loc.getMessage('LANDING_CRM_FORM_INTEGRATION_SEO_NOT_INSTALLED_VK_TEXT'),\n\t\t\t\t\tangle: false,\n\t\t\t\t\tcloseable: false,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst buttonCard = new BaseCard();\n\t\tDom.style(buttonCard.getLayout(), {\n\t\t\tpadding: 0,\n\t\t\tmargin: 0,\n\t\t});\n\n\t\tconst integration = new Integration({\n\t\t\ttype: 'vkontakte',\n\t\t\tform: this.options.formOptions,\n\t\t\tfields: this.options.crmFields,\n\t\t\tdictionary: this.options.dictionary,\n\t\t});\n\t\tintegration.subscribe('change', this.onChange.bind(this));\n\t\tDom.append(\n\t\t\tintegration.render(),\n\t\t\tbuttonCard.getBody()\n\t\t);\n\t\tthis.addItem(buttonCard);\n\t}\n\n\tprepareButtonText(formOptions: FormOptions)\n\t{\n\t\tconst enabled = formOptions.integration.cases.some((item) => {\n\t\t\treturn item.providerCode === 'vkontakte';\n\t\t});\n\n\t\tif (enabled)\n\t\t{\n\t\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_VK_BUTTON_ENABLED');\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FORM_SETTINGS_VK_BUTTON');\n\t}\n\n\tvalueReducer(value: {[key: string]: any}): {[key: string]: any}\n\t{\n\t\treturn {\n\t\t\tintegration: this.options.formOptions.integration,\n\t\t};\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: false});\n\t}\n\n\tgetData()\n\t{\n\t\treturn this.options.formOptions.integration.cases.filter(data => data.providerCode === 'vkontakte')[0] || null;\n\t}\n}"],"names":["VkContent","options","setEventNamespace","addItem","HeaderCard","title","Loc","getMessage","dictionary","integration","canUse","MessageCard","header","description","angle","closeable","buttonCard","BaseCard","Dom","style","getLayout","padding","margin","Integration","type","form","formOptions","fields","crmFields","subscribe","onChange","bind","append","render","getBody","enabled","cases","some","item","providerCode","value","event","emit","skipPrepare","filter","data","ContentWrapper"],"mappings":";;;;;;;;KAUqBA;;;CAEpB,qBAAYC,OAAZ,EACA;CAAA;;CAAA;CACC,2GAAMA,OAAN;;CACA,UAAKC,iBAAL,CAAuB,iDAAvB;;CAEA,UAAKC,OAAL,CACC,IAAIC,qCAAJ,CAAe;CACdC,MAAAA,KAAK,EAAEC,eAAG,CAACC,UAAJ,CAAe,2BAAf;CADO,KAAf,CADD;;CAMA,QAAI,CAAC,MAAKN,OAAL,CAAaO,UAAb,CAAwBC,WAAxB,CAAoCC,MAAzC,EACA;CACC,YAAKP,OAAL,CACC,IAAIQ,uCAAJ,CAAgB;CACfC,QAAAA,MAAM,EAAEN,eAAG,CAACC,UAAJ,CAAe,uDAAf,CADO;CAEfM,QAAAA,WAAW,EAAEP,eAAG,CAACC,UAAJ,CAAe,wDAAf,CAFE;CAGfO,QAAAA,KAAK,EAAE,KAHQ;CAIfC,QAAAA,SAAS,EAAE;CAJI,OAAhB,CADD;;CASA;CACA;;CAED,QAAMC,UAAU,GAAG,IAAIC,iCAAJ,EAAnB;CACAC,IAAAA,aAAG,CAACC,KAAJ,CAAUH,UAAU,CAACI,SAAX,EAAV,EAAkC;CACjCC,MAAAA,OAAO,EAAE,CADwB;CAEjCC,MAAAA,MAAM,EAAE;CAFyB,KAAlC;CAKA,QAAMb,WAAW,GAAG,IAAIc,gCAAJ,CAAgB;CACnCC,MAAAA,IAAI,EAAE,WAD6B;CAEnCC,MAAAA,IAAI,EAAE,MAAKxB,OAAL,CAAayB,WAFgB;CAGnCC,MAAAA,MAAM,EAAE,MAAK1B,OAAL,CAAa2B,SAHc;CAInCpB,MAAAA,UAAU,EAAE,MAAKP,OAAL,CAAaO;CAJU,KAAhB,CAApB;CAMAC,IAAAA,WAAW,CAACoB,SAAZ,CAAsB,QAAtB,EAAgC,MAAKC,QAAL,CAAcC,IAAd,2CAAhC;CACAb,IAAAA,aAAG,CAACc,MAAJ,CACCvB,WAAW,CAACwB,MAAZ,EADD,EAECjB,UAAU,CAACkB,OAAX,EAFD;;CAIA,UAAK/B,OAAL,CAAaa,UAAb;;CAzCD;CA0CC;;;;uCAEiBU,aAClB;CACC,UAAMS,OAAO,GAAGT,WAAW,CAACjB,WAAZ,CAAwB2B,KAAxB,CAA8BC,IAA9B,CAAmC,UAACC,IAAD,EAAU;CAC5D,eAAOA,IAAI,CAACC,YAAL,KAAsB,WAA7B;CACA,OAFe,CAAhB;;CAIA,UAAIJ,OAAJ,EACA;CACC,eAAO7B,eAAG,CAACC,UAAJ,CAAe,yCAAf,CAAP;CACA;;CAED,aAAOD,eAAG,CAACC,UAAJ,CAAe,iCAAf,CAAP;CACA;;;kCAEYiC,OACb;CACC,aAAO;CACN/B,QAAAA,WAAW,EAAE,KAAKR,OAAL,CAAayB,WAAb,CAAyBjB;CADhC,OAAP;CAGA;;;8BAEQgC,OACT;CACC,WAAKC,IAAL,CAAU,UAAV,EAAsB;CAACC,QAAAA,WAAW,EAAE;CAAd,OAAtB;CACA;;;+BAGD;CACC,aAAO,KAAK1C,OAAL,CAAayB,WAAb,CAAyBjB,WAAzB,CAAqC2B,KAArC,CAA2CQ,MAA3C,CAAkD,UAAAC,IAAI;CAAA,eAAIA,IAAI,CAACN,YAAL,KAAsB,WAA1B;CAAA,OAAtD,EAA6F,CAA7F,KAAmG,IAA1G;CACA;;;GA5EqCO;;;;;;;;"}