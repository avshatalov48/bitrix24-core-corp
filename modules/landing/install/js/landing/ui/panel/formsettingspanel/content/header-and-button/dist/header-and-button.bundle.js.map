{"version":3,"file":"header-and-button.bundle.js","sources":["../src/images/header-and-buttons-message-icon.svg","../src/header-and-button.js"],"sourcesContent":["export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/header-and-button/dist/images/header-and-buttons-message-icon.svg\"","import {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc, Reflection, Type} from 'main.core';\nimport {MessageCard} from 'landing.ui.card.messagecard';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {VariablesField} from 'landing.ui.field.variablesfield';\nimport {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport 'helper';\nimport headerAndButtonsIcon from './images/header-and-buttons-message-icon.svg';\n\nexport default class HeaderAndButtonContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.HeaderAndButtonContent');\n\n\t\tconst header = new HeaderCard({\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_TITLE'),\n\t\t});\n\n\t\tconst message = new MessageCard({\n\t\t\tid: 'headerAndButtonMessage',\n\t\t\ticon: headerAndButtonsIcon,\n\t\t\theader: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_MESSAGE_HEADER'),\n\t\t\tdescription: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_MESSAGE_DESCRIPTION_2'),\n\t\t\trestoreState: true,\n\t\t\tmore: () => {\n\t\t\t\tconst helper = Reflection.getClass('top.BX.Helper');\n\t\t\t\tif (helper)\n\t\t\t\t{\n\t\t\t\t\tBX.Helper.show('redirect=detail&code=12802786');\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tconst headersForm = new FormSettingsForm({\n\t\t\tid: 'headers',\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_TITLE'),\n\t\t\tfields: [\n\t\t\t\tnew VariablesField({\n\t\t\t\t\tselector: 'title',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HEADER_FIELD_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.title,\n\t\t\t\t\tvariables: this.getPersonalizationVariables(),\n\t\t\t\t}),\n\t\t\t\tnew VariablesField({\n\t\t\t\t\tselector: 'desc',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_SUBHEADER_FIELD_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.desc,\n\t\t\t\t\tvariables: this.getPersonalizationVariables(),\n\t\t\t\t}),\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'hideDesc',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'hideDesc',\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HIDE_SUBHEADER_FIELD_TITLE'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tvalue: 'hideSeparator',\n\t\t\t\t\t\t// \tname: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HIDE_SEPARATOR_FIELD_TITLE'),\n\t\t\t\t\t\t// },\n\t\t\t\t\t],\n\t\t\t\t\tcompact: true,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tconst buttonsForm = new FormSettingsForm({\n\t\t\tid: 'buttons',\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_BUTTONS_FORM_TITLE'),\n\t\t\tfields: [\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'buttonCaption',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_BUTTONS_FORM_SEND_BUTTON_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.buttonCaption,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tthis.addItem(header);\n\t\tthis.addItem(message);\n\t\tthis.addItem(headersForm);\n\t\tthis.addItem(buttonsForm);\n\t}\n\n\tgetPersonalizationVariables(): Array<{name: string, value: string}>\n\t{\n\t\treturn this.cache.remember('personalizationVariables', () => {\n\t\t\treturn this.options.dictionary.personalization.list.map((item) => {\n\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t});\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tvalueReducer(sourceValue: {[p: string]: any}): {[p: string]: any}\n\t{\n\t\tconst value = Object.entries(sourceValue).reduce((acc, [key, value]) => {\n\t\t\tif (key === 'hideDesc')\n\t\t\t{\n\t\t\t\tif (value.includes(key))\n\t\t\t\t{\n\t\t\t\t\tacc.desc = '';\n\t\t\t\t}\n\n\t\t\t\tdelete acc.hideDesc;\n\t\t\t}\n\n\t\t\tif (key === 'useSign')\n\t\t\t{\n\t\t\t\tacc.useSign = value.includes('useSign');\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {...sourceValue});\n\n\t\tif (!this.items[2].getSwitch().getValue())\n\t\t{\n\t\t\tvalue.title = '';\n\t\t\tvalue.desc = '';\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {...event.getData(), skipPrepare: true});\n\t}\n}"],"names":["HeaderAndButtonContent","options","setEventNamespace","header","HeaderCard","title","Loc","getMessage","message","MessageCard","id","icon","headerAndButtonsIcon","description","restoreState","more","helper","Reflection","getClass","BX","Helper","show","headersForm","FormSettingsForm","fields","VariablesField","selector","textOnly","content","formOptions","data","variables","getPersonalizationVariables","desc","Landing","UI","Field","Checkbox","items","value","name","compact","buttonsForm","TextField","buttonCaption","addItem","cache","remember","dictionary","personalization","list","map","item","sourceValue","Object","entries","reduce","acc","key","includes","hideDesc","useSign","getSwitch","getValue","event","emit","getData","skipPrepare","ContentWrapper"],"mappings":"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"}