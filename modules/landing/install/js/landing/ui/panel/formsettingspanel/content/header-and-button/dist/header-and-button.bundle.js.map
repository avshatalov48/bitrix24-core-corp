{"version":3,"file":"header-and-button.bundle.js","sources":["../src/images/header-and-buttons-message-icon.svg","../src/header-and-button.js"],"sourcesContent":["export default \"/bitrix/js/landing/ui/panel/formsettingspanel/content/header-and-button/dist/images/header-and-buttons-message-icon.svg\"","import {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc, Reflection, Type} from 'main.core';\nimport {MessageCard} from 'landing.ui.card.messagecard';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {VariablesField} from 'landing.ui.field.variablesfield';\nimport {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport 'helper';\nimport headerAndButtonsIcon from './images/header-and-buttons-message-icon.svg';\n\nexport default class HeaderAndButtonContent extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.HeaderAndButtonContent');\n\n\t\tconst header = new HeaderCard({\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_TITLE'),\n\t\t});\n\n\t\tconst message = new MessageCard({\n\t\t\tid: 'headerAndButtonMessage',\n\t\t\ticon: headerAndButtonsIcon,\n\t\t\theader: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_MESSAGE_HEADER'),\n\t\t\tdescription: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_MESSAGE_DESCRIPTION_2'),\n\t\t\trestoreState: true,\n\t\t\tmore: () => {\n\t\t\t\tconst helper = Reflection.getClass('top.BX.Helper');\n\t\t\t\tif (helper)\n\t\t\t\t{\n\t\t\t\t\tBX.Helper.show('redirect=detail&code=12802786');\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tconst headersForm = new FormSettingsForm({\n\t\t\tid: 'headers',\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_TITLE'),\n\t\t\tfields: [\n\t\t\t\tnew VariablesField({\n\t\t\t\t\tselector: 'title',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HEADER_FIELD_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.title,\n\t\t\t\t\tvariables: this.getPersonalizationVariables(),\n\t\t\t\t}),\n\t\t\t\tnew VariablesField({\n\t\t\t\t\tselector: 'desc',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_SUBHEADER_FIELD_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.desc,\n\t\t\t\t\tvariables: this.getPersonalizationVariables(),\n\t\t\t\t}),\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'hideDesc',\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvalue: 'hideDesc',\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HIDE_SUBHEADER_FIELD_TITLE'),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t// {\n\t\t\t\t\t\t// \tvalue: 'hideSeparator',\n\t\t\t\t\t\t// \tname: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_HEADERS_FORM_HIDE_SEPARATOR_FIELD_TITLE'),\n\t\t\t\t\t\t// },\n\t\t\t\t\t],\n\t\t\t\t\tcompact: true,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tconst buttonsForm = new FormSettingsForm({\n\t\t\tid: 'buttons',\n\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_BUTTONS_FORM_TITLE'),\n\t\t\tfields: [\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'buttonCaption',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_HEADER_AND_BUTTONS_BUTTONS_FORM_SEND_BUTTON_TITLE'),\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t\tcontent: this.options.formOptions.data.buttonCaption,\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tthis.addItem(header);\n\t\tthis.addItem(message);\n\t\tthis.addItem(headersForm);\n\t\tthis.addItem(buttonsForm);\n\t}\n\n\tgetPersonalizationVariables(): Array<{name: string, value: string}>\n\t{\n\t\treturn this.cache.remember('personalizationVariables', () => {\n\t\t\treturn this.options.dictionary.personalization.list.map((item) => {\n\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t});\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tvalueReducer(sourceValue: {[p: string]: any}): {[p: string]: any}\n\t{\n\t\tconst value = Object.entries(sourceValue).reduce((acc, [key, value]) => {\n\t\t\tif (key === 'hideDesc')\n\t\t\t{\n\t\t\t\tif (value.includes(key))\n\t\t\t\t{\n\t\t\t\t\tacc.desc = '';\n\t\t\t\t}\n\n\t\t\t\tdelete acc.hideDesc;\n\t\t\t}\n\n\t\t\tif (key === 'useSign')\n\t\t\t{\n\t\t\t\tacc.useSign = value.includes('useSign');\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {...sourceValue});\n\n\t\tif (!this.items[2].getSwitch().getValue())\n\t\t{\n\t\t\tvalue.title = '';\n\t\t\tvalue.desc = '';\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {...event.getData(), skipPrepare: true});\n\t}\n}"],"names":["HeaderAndButtonContent","options","setEventNamespace","header","HeaderCard","title","Loc","getMessage","message","MessageCard","id","icon","headerAndButtonsIcon","description","restoreState","more","helper","Reflection","getClass","BX","Helper","show","headersForm","FormSettingsForm","fields","VariablesField","selector","textOnly","content","formOptions","data","variables","getPersonalizationVariables","desc","Landing","UI","Field","Checkbox","items","value","name","compact","buttonsForm","TextField","buttonCaption","addItem","cache","remember","dictionary","personalization","list","map","item","sourceValue","Object","entries","reduce","acc","key","includes","hideDesc","useSign","getSwitch","getValue","event","emit","getData","skipPrepare","ContentWrapper"],"mappings":"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"}