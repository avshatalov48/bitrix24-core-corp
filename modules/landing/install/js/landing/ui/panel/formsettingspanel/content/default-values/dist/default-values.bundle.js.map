{"version":3,"file":"default-values.bundle.js","sources":["../src/default-values.js"],"sourcesContent":["import {ContentWrapper} from 'landing.ui.panel.basepresetpanel';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {DefaultValueField} from 'landing.ui.field.defaultvaluefield';\nimport {HeaderCard} from 'landing.ui.card.headercard';\nimport {Loc} from 'landing.loc';\nimport {Dom, Type} from 'main.core';\nimport {MessageCard} from 'landing.ui.card.messagecard';\n\nimport './css/style.css';\n\nexport default class DefaultValues extends ContentWrapper\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Panel.FormSettingsPanel.DefaultValues');\n\n\t\tconst header = new HeaderCard({\n\t\t\ttitle: Loc.getMessage('LANDING_FORM_SETTINGS_DEFAULT_VALUE_TITLE'),\n\t\t});\n\n\t\tconst message = new MessageCard({\n\t\t\tid: 'defaultValueMessage',\n\t\t\theader: Loc.getMessage('LANDING_FORM_SETTINGS_DEFAULT_VALUE_MESSAGE_TITLE'),\n\t\t\tdescription: Loc.getMessage('LANDING_FORM_SETTINGS_DEFAULT_VALUE_MESSAGE_DESCRIPTION'),\n\t\t\trestoreState: true,\n\t\t});\n\n\t\tconst fieldsForm = new FormSettingsForm({\n\t\t\tfields: [\n\t\t\t\tnew DefaultValueField({\n\t\t\t\t\tselector: 'presetFields',\n\t\t\t\t\tisLeadEnabled: this.options.isLeadEnabled,\n\t\t\t\t\tpersonalizationVariables: this.getPersonalizationVariables(),\n\t\t\t\t\tformOptions: {\n\t\t\t\t\t\t...this.options.formOptions,\n\t\t\t\t\t},\n\t\t\t\t\tcrmFields: {\n\t\t\t\t\t\t...this.options.crmFields,\n\t\t\t\t\t},\n\t\t\t\t\tdictionary: {\n\t\t\t\t\t\t...this.options.dictionary,\n\t\t\t\t\t},\n\t\t\t\t\titems: [\n\t\t\t\t\t\t...this.options.formOptions.presetFields,\n\t\t\t\t\t],\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\n\t\tif (!message.isShown())\n\t\t{\n\t\t\tfieldsForm.setOffsetTop(-36);\n\t\t}\n\n\t\tmessage.subscribe('onClose', () => {\n\t\t\tfieldsForm.setOffsetTop(-36);\n\t\t});\n\n\t\tthis.addItem(header);\n\t\tthis.addItem(message);\n\t\tthis.addItem(fieldsForm);\n\t}\n\n\tgetPersonalizationVariables(): Array<{name: string, value: string}>\n\t{\n\t\treturn this.cache.remember('personalizationVariables', () => {\n\t\t\tconst {properties} = this.options.dictionary;\n\t\t\tif (Type.isPlainObject(properties) && Type.isArrayFilled(properties.list))\n\t\t\t{\n\t\t\t\treturn properties.list.map((item) => {\n\t\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn [];\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\tconst layout = super.getLayout();\n\t\tDom.addClass(layout, 'landing-ui-default-fields-values');\n\n\t\treturn layout;\n\t}\n\n\tonChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {...event.getData(), skipPrepare: true});\n\t}\n}"],"names":["DefaultValues","options","setEventNamespace","header","HeaderCard","title","Loc","getMessage","message","MessageCard","id","description","restoreState","fieldsForm","FormSettingsForm","fields","DefaultValueField","selector","isLeadEnabled","personalizationVariables","getPersonalizationVariables","formOptions","crmFields","dictionary","items","presetFields","isShown","setOffsetTop","subscribe","addItem","cache","remember","properties","Type","isPlainObject","isArrayFilled","list","map","item","name","value","layout","Dom","addClass","event","emit","getData","skipPrepare","ContentWrapper"],"mappings":";;;;;;;;KAUqBA;;;CAEpB,yBAAYC,OAAZ,EACA;CAAA;;CAAA;CACC,+GAAMA,OAAN;;CACA,UAAKC,iBAAL,CAAuB,qDAAvB;;CAEA,QAAMC,MAAM,GAAG,IAAIC,qCAAJ,CAAe;CAC7BC,MAAAA,KAAK,EAAEC,eAAG,CAACC,UAAJ,CAAe,2CAAf;CADsB,KAAf,CAAf;CAIA,QAAMC,OAAO,GAAG,IAAIC,uCAAJ,CAAgB;CAC/BC,MAAAA,EAAE,EAAE,qBAD2B;CAE/BP,MAAAA,MAAM,EAAEG,eAAG,CAACC,UAAJ,CAAe,mDAAf,CAFuB;CAG/BI,MAAAA,WAAW,EAAEL,eAAG,CAACC,UAAJ,CAAe,yDAAf,CAHkB;CAI/BK,MAAAA,YAAY,EAAE;CAJiB,KAAhB,CAAhB;CAOA,QAAMC,UAAU,GAAG,IAAIC,iDAAJ,CAAqB;CACvCC,MAAAA,MAAM,EAAE,CACP,IAAIC,oDAAJ,CAAsB;CACrBC,QAAAA,QAAQ,EAAE,cADW;CAErBC,QAAAA,aAAa,EAAE,MAAKjB,OAAL,CAAaiB,aAFP;CAGrBC,QAAAA,wBAAwB,EAAE,MAAKC,2BAAL,EAHL;CAIrBC,QAAAA,WAAW,gCACP,MAAKpB,OAAL,CAAaoB,WADN,CAJU;CAOrBC,QAAAA,SAAS,gCACL,MAAKrB,OAAL,CAAaqB,SADR,CAPY;CAUrBC,QAAAA,UAAU,gCACN,MAAKtB,OAAL,CAAasB,UADP,CAVW;CAarBC,QAAAA,KAAK,iCACD,MAAKvB,OAAL,CAAaoB,WAAb,CAAyBI,YADxB;CAbgB,OAAtB,CADO;CAD+B,KAArB,CAAnB;;CAsBA,QAAI,CAACjB,OAAO,CAACkB,OAAR,EAAL,EACA;CACCb,MAAAA,UAAU,CAACc,YAAX,CAAwB,CAAC,EAAzB;CACA;;CAEDnB,IAAAA,OAAO,CAACoB,SAAR,CAAkB,SAAlB,EAA6B,YAAM;CAClCf,MAAAA,UAAU,CAACc,YAAX,CAAwB,CAAC,EAAzB;CACA,KAFD;;CAIA,UAAKE,OAAL,CAAa1B,MAAb;;CACA,UAAK0B,OAAL,CAAarB,OAAb;;CACA,UAAKqB,OAAL,CAAahB,UAAb;;CAhDD;CAiDC;;;;mDAGD;CAAA;;CACC,aAAO,KAAKiB,KAAL,CAAWC,QAAX,CAAoB,0BAApB,EAAgD,YAAM;CAC5D,YAAOC,UAAP,GAAqB,MAAI,CAAC/B,OAAL,CAAasB,UAAlC,CAAOS,UAAP;;CACA,YAAIC,cAAI,CAACC,aAAL,CAAmBF,UAAnB,KAAkCC,cAAI,CAACE,aAAL,CAAmBH,UAAU,CAACI,IAA9B,CAAtC,EACA;CACC,iBAAOJ,UAAU,CAACI,IAAX,CAAgBC,GAAhB,CAAoB,UAACC,IAAD,EAAU;CACpC,mBAAO;CAACC,cAAAA,IAAI,EAAED,IAAI,CAACC,IAAZ;CAAkBC,cAAAA,KAAK,EAAEF,IAAI,CAAC5B;CAA9B,aAAP;CACA,WAFM,CAAP;CAGA;;CAED,eAAO,EAAP;CACA,OAVM,CAAP;CAWA;;;iCAGD;CACC,UAAM+B,MAAM,uGAAZ;CACAC,MAAAA,aAAG,CAACC,QAAJ,CAAaF,MAAb,EAAqB,kCAArB;CAEA,aAAOA,MAAP;CACA;;;8BAEQG,OACT;CACC,WAAKC,IAAL,CAAU,UAAV,gCAA0BD,KAAK,CAACE,OAAN,EAA1B;CAA2CC,QAAAA,WAAW,EAAE;CAAxD;CACA;;;GAhFyCC;;;;;;;;"}