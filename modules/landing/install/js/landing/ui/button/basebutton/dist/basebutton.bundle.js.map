{"version":3,"file":"basebutton.bundle.js","sources":["../src/internal/default-options.js","../src/basebutton.js"],"sourcesContent":["import {Text} from 'main.core';\n\nconst defaultOptions = {\n\tid: Text.getRandom(),\n\ttext: '',\n\thtml: '',\n\tonClick: () => {},\n\tattrs: {},\n\tdisabled: false,\n\tclassName: null,\n};\n\nexport default defaultOptions;","import {Type, Cache, Tag, Text, Dom, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport type BaseButtonOptions from './types/button-options';\nimport defaultOptions from './internal/default-options';\n\nimport './css/base_button.css';\n\n/**\n * @memberOf BX.Landing.UI.Button\n */\nexport class BaseButton extends EventEmitter\n{\n\tid: string;\n\toptions: {[key: string]: any};\n\tlayout: HTMLElement;\n\tcache: Cache.MemoryCache;\n\n\tconstructor(id, options: BaseButtonOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Button.BaseButton');\n\n\t\tconst compatOptions = (() => {\n\t\t\tif (Type.isPlainObject(options))\n\t\t\t{\n\t\t\t\treturn options;\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(id))\n\t\t\t{\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\treturn {};\n\t\t})();\n\n\t\tconst compatId = (() => {\n\t\t\tif (Type.isStringFilled(id))\n\t\t\t{\n\t\t\t\treturn id;\n\t\t\t}\n\n\t\t\tif (Type.isStringFilled(compatOptions.id))\n\t\t\t{\n\t\t\t\treturn compatOptions.id;\n\t\t\t}\n\n\t\t\treturn Text.getRandom();\n\t\t})();\n\n\t\tthis.options = {...defaultOptions, ...compatOptions};\n\t\tthis.id = compatId;\n\n\t\tthis.cache = new Cache.MemoryCache();\n\t\tthis.layout = this.getLayout();\n\n\t\tif (Type.isStringFilled(this.options.html))\n\t\t{\n\t\t\tthis.setHtml(this.options.html);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setText(this.options.text);\n\t\t}\n\n\t\tif (Type.isFunction(this.options.onClick))\n\t\t{\n\t\t\tEvent.bind(this.getLayout(), 'click', this.options.onClick);\n\t\t}\n\n\t\tif (Type.isPlainObject(this.options.attrs))\n\t\t{\n\t\t\tDom.attr(this.getLayout(), this.options.attrs);\n\t\t}\n\n\t\tif (Type.isArray(this.options.className))\n\t\t{\n\t\t\tthis.options.className.forEach(this.layout.classList.add, this.layout.classList);\n\t\t}\n\n\t\tif (Type.isString(this.options.className) && !!this.options.className)\n\t\t{\n\t\t\tthis.layout.classList.add(this.options.className);\n\t\t}\n\n\t\tif (this.options.active)\n\t\t{\n\t\t\tthis.activate();\n\t\t}\n\n\t\tif (this.options.disabled)\n\t\t{\n\t\t\tthis.disable();\n\t\t}\n\n\t\tEvent.bind(this.getLayout(), 'click', (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.emit('onClick');\n\t\t});\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<button \n\t\t\t\t\tclass=\"landing-ui-button\" \n\t\t\t\t\ttype=\"button\"\n\t\t\t\t\tdata-id=\"${this.id}\"\n\t\t\t\t>${this.getTextLayout()}</button>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTextLayout(): HTMLSpanElement\n\t{\n\t\treturn this.cache.remember('textLayout', () => {\n\t\t\treturn Tag.render`<span class=\"landing-ui-button-text\"></span>`;\n\t\t});\n\t}\n\n\tsetHtml(html: string)\n\t{\n\t\tthis.getTextLayout().innerHTML = html;\n\t}\n\n\tsetText(text: string)\n\t{\n\t\tthis.getTextLayout().innerHTML = Text.encode(text);\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\ton(event, handler, context)\n\t{\n\t\tif (Type.isString(event) && Type.isFunction(handler))\n\t\t{\n\t\t\tEvent.bind(this.layout, event, BX.proxy(handler, context));\n\t\t}\n\t}\n\n\tsetAttributes(attrs)\n\t{\n\t\tDom.attr(this.layout, attrs);\n\t}\n\n\tsetAttribute(key, value)\n\t{\n\t\tDom.attr(this.layout, key, value);\n\t}\n\n\tdisable()\n\t{\n\t\tDom.addClass(this.layout, 'landing-ui-disable');\n\t}\n\n\tenable()\n\t{\n\t\tDom.removeClass(this.layout, 'landing-ui-disable');\n\t\tDom.attr(this.layout, 'disabled', null);\n\t}\n\n\tisEnabled()\n\t{\n\t\treturn !Dom.hasClass(this.layout, 'landing-ui-disable');\n\t}\n\n\tshow()\n\t{\n\t\treturn BX.Landing.Utils.show(this.layout);\n\t}\n\n\thide()\n\t{\n\t\treturn BX.Landing.Utils.hide(this.layout);\n\t}\n\n\tactivate()\n\t{\n\t\tDom.addClass(this.layout, 'landing-ui-active');\n\t}\n\n\tdeactivate()\n\t{\n\t\tDom.removeClass(this.layout, 'landing-ui-active');\n\t}\n\n\tisActive()\n\t{\n\t\treturn Dom.hasClass(this.layout, 'landing-ui-active');\n\t}\n}"],"names":["defaultOptions","id","Text","getRandom","text","html","onClick","attrs","disabled","className","BaseButton","options","setEventNamespace","compatOptions","Type","isPlainObject","compatId","isStringFilled","cache","Cache","MemoryCache","layout","getLayout","setHtml","setText","isFunction","Event","bind","Dom","attr","isArray","forEach","classList","add","isString","active","activate","disable","event","preventDefault","emit","remember","Tag","render","getTextLayout","innerHTML","encode","handler","context","BX","proxy","key","value","addClass","removeClass","hasClass","Landing","Utils","show","hide","EventEmitter"],"mappings":"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"}