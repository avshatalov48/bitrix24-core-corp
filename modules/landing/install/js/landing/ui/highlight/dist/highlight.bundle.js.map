{"version":3,"file":"highlight.bundle.js","sources":["../src/highlight.js"],"sourcesContent":["import {Dom, Runtime, Type} from 'main.core';\nimport {PageObject} from 'landing.pageobject';\n\n/**\n * Implements interface for works with highlights\n * Implements singleton pattern\n * @memberOf BX.Landing.UI\n */\nexport class Highlight\n{\n\tconstructor()\n\t{\n\t\tthis.layout = Dom.create('div');\n\n\t\tDom.style(this.layout, {\n\t\t\tposition: 'absolute',\n\t\t\tborder: '2px #fe541e dashed',\n\t\t\ttop: 0,\n\t\t\tleft: 0,\n\t\t\tright: 0,\n\t\t\tbottom: 0,\n\t\t\t'z-index': 9999,\n\t\t\topacity: '.4',\n\t\t\t'pointer-events': 'none',\n\t\t\ttransform: 'translateZ(0)',\n\t\t});\n\t}\n\n\tstatic getInstance()\n\t{\n\t\tif (!Highlight.instance)\n\t\t{\n\t\t\tHighlight.instance = new Highlight();\n\t\t}\n\n\t\treturn Highlight.instance;\n\t}\n\n\tstatic highlightsStore = null;\n\tstatic get highlights()\n\t{\n\t\tif (!Highlight.highlightsStore)\n\t\t{\n\t\t\tHighlight.highlightsStore = new BX.Landing.Collection.BaseCollection();\n\t\t}\n\n\t\treturn Highlight.highlightsStore;\n\t}\n\n\t/**\n\t * Shows highlight for node\n\t * @param {HTMLElement|HTMLElement[]} node\n\t * @param {object} [rect]\n\t */\n\tshow(node, rect)\n\t{\n\t\tthis.hide();\n\t\tif (Type.isArray(node))\n\t\t{\n\t\t\tnode.forEach((element) => {\n\t\t\t\tthis.highlightNode(element);\n\t\t\t});\n\t\t}\n\t\telse if (Type.isDomNode(node))\n\t\t{\n\t\t\tthis.highlightNode(node, rect);\n\t\t}\n\t}\n\n\t/**\n\t * Hides highlight for all nodes\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\thide()\n\t{\n\t\tHighlight.highlights.forEach((item) => {\n\t\t\tBX.DOM.write(() => {\n\t\t\t\tDom.remove(item.highlight);\n\t\t\t\titem.node.style.position = '';\n\t\t\t\titem.node.style.userSelect = '';\n\t\t\t\titem.node.style.cursor = '';\n\t\t\t});\n\t\t});\n\n\t\tHighlight.highlights.clear();\n\t}\n\n\t/**\n\t * @private\n\t * @param node\n\t * @param {object} rect\n\t */\n\thighlightNode(node, rect)\n\t{\n\t\tconst highlight = Runtime.clone(this.layout);\n\n\t\tif (rect)\n\t\t{\n\t\t\tBX.DOM.write(() => {\n\t\t\t\tDom.style(highlight, {\n\t\t\t\t\tposition: 'fixed',\n\t\t\t\t\twidth: `${rect.width}px`,\n\t\t\t\t\theight: `${rect.height}px`,\n\t\t\t\t\ttop: `${rect.top}px`,\n\t\t\t\t\tleft: `${rect.left}px`,\n\t\t\t\t\tright: `${rect.right}px`,\n\t\t\t\t\tbottom: `${rect.bottom}px`,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tPageObject.getInstance().view().then((frame) => {\n\t\t\t\tBX.DOM.write(() => {\n\t\t\t\t\tDom.append(highlight, frame.contentDocument.body);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.DOM.write(() => {\n\t\t\t\tDom.append(highlight, node);\n\t\t\t});\n\t\t}\n\n\t\tBX.DOM.write(() => {\n\t\t\tDom.style(node, {\n\t\t\t\tposition: 'relative',\n\t\t\t\tuserSelect: 'none',\n\t\t\t\tcursor: 'pointer',\n\t\t\t});\n\t\t});\n\n\t\tHighlight.highlights.add({node, highlight});\n\t}\n}"],"names":["Highlight","layout","Dom","create","style","position","border","top","left","right","bottom","opacity","transform","node","rect","hide","Type","isArray","forEach","element","highlightNode","isDomNode","highlights","item","BX","DOM","write","remove","highlight","userSelect","cursor","clear","Runtime","clone","width","height","PageObject","getInstance","view","then","frame","append","contentDocument","body","add","instance","highlightsStore","Landing","Collection","BaseCollection"],"mappings":"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"}