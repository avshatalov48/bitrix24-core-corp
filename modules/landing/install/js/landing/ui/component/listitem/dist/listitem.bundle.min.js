this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(t,e,n,i,o,a,s){"use strict";function r(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div \n\t\t\t\t\tclass="landing-ui-component-list-item" \n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tdata-type="','"\n\t\t\t\t\tdata-style="','"\n\t\t\t\t>\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t"]);r=function e(){return t};return t}function u(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-component-list-item-body"></div>\n\t\t\t']);u=function e(){return t};return t}function l(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-component-list-item-header">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="landing-ui-component-list-item-text">\n\t\t\t\t\t\t',"\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="landing-ui-component-list-item-actions">\n\t\t\t\t\t\t<div class="landing-ui-component-list-item-actions-custom">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"]);l=function e(){return t};return t}function c(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-component-list-item-text-description">',"</div>\n\t\t\t"]);c=function e(){return t};return t}function p(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-component-list-item-text-title">',"</div>\n\t\t\t"]);p=function e(){return t};return t}var d=function(t){babelHelpers.inherits(o,t);function o(t){var n;babelHelpers.classCallCheck(this,o);n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(o).call(this));n.setEventNamespace("BX.Landing.UI.Component.ListItem");n.subscribeFromOptions(s.fetchEventsFromOptions(t));n.onEditButtonClick=n.onEditButtonClick.bind(babelHelpers.assertThisInitialized(n));n.onRemoveButtonClick=n.onRemoveButtonClick.bind(babelHelpers.assertThisInitialized(n));n.onFormChange=n.onFormChange.bind(babelHelpers.assertThisInitialized(n));n.options=babelHelpers.objectSpread({},t);n.cache=new e.Cache.MemoryCache;if(e.Type.isDomNode(n.options.appendTo)){n.appendTo(n.options.appendTo)}else if(e.Type.isDomNode(n.options.prependTo)){n.prependTo(n.options.prependTo)}if(e.Type.isArrayFilled(n.options.actions)){n.setActionsButtons(babelHelpers.toConsumableArray(n.options.actions))}if(n.options.error){e.Dom.addClass(n.getLayout(),"landing-ui-error")}return n}babelHelpers.createClass(o,[{key:"setActionsButtons",value:function t(e){this.cache.set("actionsButtons",e)}},{key:"getActionsButtons",value:function t(){return this.cache.get("actionsButtons",[])}},{key:"appendTo",value:function t(n){e.Dom.append(this.getLayout(),n)}},{key:"prependTo",value:function t(n){e.Dom.prepend(this.getLayout(),n)}},{key:"getDragButtonLayout",value:function t(){return this.cache.remember("dragButtonLayout",function(){var t=new a.IconButton({type:a.IconButton.Types.drag,title:i.Loc.getMessage("LANDING_UI_COMPONENT_LIST_ITEM_DRAG_TITLE"),style:{position:"absolute",left:"1px",width:"8px"}});return t.getLayout()})}},{key:"getTitleLayout",value:function t(){var n=this;return this.cache.remember("titleLayout",function(){return e.Tag.render(p(),e.Text.encode(n.options.title))})}},{key:"setTitle",value:function t(e){this.getTitleLayout().textContent=e}},{key:"getTitle",value:function t(){return this.getTitleLayout().innerText}},{key:"getDescriptionLayout",value:function t(){var n=this;return this.cache.remember("descriptionLayout",function(){return e.Tag.render(c(),e.Text.encode(n.options.description))})}},{key:"setDescription",value:function t(e){this.getDescriptionLayout().textContent=e}},{key:"getDescription",value:function t(){return this.getDescriptionLayout().innerText}},{key:"getEditButtonLayout",value:function t(){var e=this;return this.cache.remember("editButtonLayout",function(){var t=new a.IconButton({type:a.IconButton.Types.edit,onClick:e.onEditButtonClick,title:i.Loc.getMessage("LANDING_UI_COMPONENT_LIST_ITEM_EDIT_TITLE")});return t.getLayout()})}},{key:"onEditButtonClick",value:function t(e){e.preventDefault();var i=new n.BaseEvent;this.emit("onEdit",i);if(!i.isDefaultPrevented()){if(!this.isOpened()){this.open()}else{this.close()}}}},{key:"getRemoveButtonLayout",value:function t(){var e=this;return this.cache.remember("removeButtonLayout",function(){var t=new a.IconButton({type:a.IconButton.Types.remove,onClick:e.onRemoveButtonClick,title:i.Loc.getMessage("LANDING_UI_COMPONENT_LIST_ITEM_REMOVE_TITLE")});return t.getLayout()})}},{key:"onRemoveButtonClick",value:function t(n){n.preventDefault();e.Dom.remove(this.getLayout());this.emit("onRemove")}},{key:"getHeaderLayout",value:function t(){var n=this;return this.cache.remember("headerLayout",function(){return e.Tag.render(l(),n.options.draggable?n.getDragButtonLayout():"",n.getTitleLayout(),n.getDescriptionLayout(),n.getActionsButtons().map(function(t){return t.getLayout()}),n.options.editable?n.getEditButtonLayout():"",n.options.removable?n.getRemoveButtonLayout():"")})}},{key:"getBodyLayout",value:function t(){return this.cache.remember("bodyLayout",function(){return e.Tag.render(u())})}},{key:"getLayout",value:function t(){var n=this;return this.cache.remember("layout",function(){return e.Tag.render(r(),n.options.id,n.options.type,n.options.isSeparator?"separator":"item",n.getHeaderLayout(),n.getBodyLayout())})}},{key:"open",value:function t(){e.Dom.addClass(this.getLayout(),"landing-ui-component-list-item-opened");if(!e.Type.isStringFilled(this.getBodyLayout().innerHTML)){if(this.options.form){e.Dom.append(this.options.form.getLayout(),this.getBodyLayout());this.options.form.subscribe("onChange",this.onFormChange)}}}},{key:"isOpened",value:function t(){return e.Dom.hasClass(this.getLayout(),"landing-ui-component-list-item-opened")}},{key:"close",value:function t(){e.Dom.removeClass(this.getLayout(),"landing-ui-component-list-item-opened")}},{key:"onFormChange",value:function t(){this.emit("onFormChange")}},{key:"setId",value:function t(n){e.Dom.attr(this.getLayout(),"data-id",n)}},{key:"getId",value:function t(){return e.Dom.attr(this.getLayout(),"data-id")}},{key:"getValue",value:function t(){var n={name:this.options.id};if(e.Type.isStringFilled(this.options.type)){n.type=this.options.type}if(this.options.form){var i=this.options.form.serialize();Object.assign(n,i)}if(this.options.content){n.content=this.options.content}if(this.options.sourceOptions){var o=e.Runtime.clone(this.options.sourceOptions);Object.entries(o).forEach(function(t){var i=babelHelpers.slicedToArray(t,2),a=i[0],s=i[1];if(e.Type.isArray(s)&&e.Type.isArray(n[a])){delete o[a]}});return e.Runtime.merge(o,n)}return n}}]);return o}(n.EventEmitter);t.ListItem=d})(this.BX.Landing.UI.Component=this.BX.Landing.UI.Component||{},BX,BX.Event,BX.Landing,BX.Landing.UI.Form,BX.Landing.UI.Component,BX.Landing.UI.Component);
//# sourceMappingURL=listitem.bundle.map.js