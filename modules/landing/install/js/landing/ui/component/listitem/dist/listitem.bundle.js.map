{"version":3,"file":"listitem.bundle.js","sources":["../src/listitem.js"],"sourcesContent":["import 'ui.design-tokens';\n\nimport {Cache, Dom, Runtime, Tag, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Loc} from 'landing.loc';\nimport {BaseForm} from 'landing.ui.form.baseform';\nimport {IconButton} from 'landing.ui.component.iconbutton';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\n\nimport './css/style.css';\n\nexport type ListItemOptions = {\n\tid: string,\n\ttype: string,\n\ttitle?: string,\n\tdescription?: string,\n\tdraggable?: boolean,\n\teditable?: boolean,\n\tremovable?: boolean,\n\tactions?: Array<IconButton>,\n\tonEdit?: (BaseEvent) => {},\n\tonRemove?: (BaseEvent) => {},\n\tonFormChange?: (BaseEvent) => {},\n\tappendTo?: HTMLElement,\n\tprependTo?: HTMLElement,\n\tform?: BaseForm,\n\tsourceOptions?: {[key: string]: any},\n\tisSeparator?: boolean,\n\terror?: boolean,\n};\n\nexport class ListItem extends EventEmitter\n{\n\tconstructor(options: ListItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Component.ListItem');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\n\t\tthis.onEditButtonClick = this.onEditButtonClick.bind(this);\n\t\tthis.onRemoveButtonClick = this.onRemoveButtonClick.bind(this);\n\t\tthis.onFormChange = this.onFormChange.bind(this);\n\n\t\tthis.options = {...options};\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tif (Type.isDomNode(this.options.appendTo))\n\t\t{\n\t\t\tthis.appendTo(this.options.appendTo);\n\t\t}\n\t\telse if (Type.isDomNode(this.options.prependTo))\n\t\t{\n\t\t\tthis.prependTo(this.options.prependTo);\n\t\t}\n\n\t\tif (Type.isArrayFilled(this.options.actions))\n\t\t{\n\t\t\tthis.setActionsButtons([...this.options.actions]);\n\t\t}\n\n\t\tif (this.options.error)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'landing-ui-error');\n\t\t}\n\t}\n\n\tsetActionsButtons(actionsButtons: Array<IconButton>)\n\t{\n\t\tthis.cache.set('actionsButtons', actionsButtons);\n\t}\n\n\tgetActionsButtons(): Array<IconButton>\n\t{\n\t\treturn this.cache.get('actionsButtons', []);\n\t}\n\n\tappendTo(target: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), target);\n\t}\n\n\tprependTo(target: HTMLElement)\n\t{\n\t\tDom.prepend(this.getLayout(), target);\n\t}\n\n\tgetDragButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('dragButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.drag,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_DRAG_TITLE'),\n\t\t\t\tstyle: {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '1px',\n\t\t\t\t\twidth: '8px',\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-text-title\">${Text.encode(this.options.title)}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetTitle(title: string)\n\t{\n\t\tthis.getTitleLayout().textContent = title;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.getTitleLayout().innerText;\n\t}\n\n\tgetDescriptionLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('descriptionLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-text-description\">${Text.encode(this.options.description)}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetDescription(description: string)\n\t{\n\t\tthis.getDescriptionLayout().textContent = description;\n\t}\n\n\tgetDescription(): string\n\t{\n\t\treturn this.getDescriptionLayout().innerText;\n\t}\n\n\tgetEditButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('editButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.edit,\n\t\t\t\tonClick: this.onEditButtonClick,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_EDIT_TITLE'),\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tonEditButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst editEvent = new BaseEvent();\n\t\tthis.emit('onEdit', editEvent);\n\n\t\tif (!editEvent.isDefaultPrevented())\n\t\t{\n\t\t\tif (!this.isOpened())\n\t\t\t{\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRemoveButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('removeButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.remove,\n\t\t\t\tonClick: this.onRemoveButtonClick,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_REMOVE_TITLE'),\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tonRemoveButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tDom.remove(this.getLayout());\n\t\tthis.emit('onRemove');\n\t}\n\n\tgetHeaderLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('headerLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-header\">\n\t\t\t\t\t${this.options.draggable ? this.getDragButtonLayout() : ''}\n\t\t\t\t\t<div class=\"landing-ui-component-list-item-text\">\n\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t\t${this.getDescriptionLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-component-list-item-actions\">\n\t\t\t\t\t\t<div class=\"landing-ui-component-list-item-actions-custom\">\n\t\t\t\t\t\t\t${this.getActionsButtons().map((button) => button.getLayout())}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.options.editable ? this.getEditButtonLayout() : ''}\n\t\t\t\t\t\t${this.options.removable ? this.getRemoveButtonLayout() : ''}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetBodyLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('bodyLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-body\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-component-list-item\" \n\t\t\t\t\tdata-id=\"${this.options.id}\"\n\t\t\t\t\tdata-type=\"${this.options.type}\"\n\t\t\t\t\tdata-style=\"${this.options.isSeparator ? 'separator' : 'item'}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getHeaderLayout()}\n\t\t\t\t\t${this.getBodyLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\topen()\n\t{\n\t\tDom.addClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\n\t\tif (!Type.isStringFilled(this.getBodyLayout().innerHTML))\n\t\t{\n\t\t\tif (this.options.form)\n\t\t\t{\n\t\t\t\tDom.append(this.options.form.getLayout(), this.getBodyLayout());\n\t\t\t\tthis.options.form.subscribe('onChange', this.onFormChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tisOpened(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\t}\n\n\tclose()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\t}\n\n\tonFormChange()\n\t{\n\t\tthis.emit('onFormChange');\n\t}\n\n\tsetId(id: string | number)\n\t{\n\t\tDom.attr(this.getLayout(), 'data-id', id);\n\t}\n\n\tgetId(): string | number\n\t{\n\t\treturn Dom.attr(this.getLayout(), 'data-id');\n\t}\n\n\tgetValue()\n\t{\n\t\tconst value = {\n\t\t\tname: this.options.id,\n\t\t};\n\n\t\tif (Type.isStringFilled(this.options.type))\n\t\t{\n\t\t\tvalue.type = this.options.type;\n\t\t}\n\n\t\tif (this.options.form)\n\t\t{\n\t\t\tconst formValue = this.options.form.serialize();\n\t\t\tObject.assign(value, formValue);\n\t\t}\n\n\t\tif (this.options.content)\n\t\t{\n\t\t\tvalue.content = this.options.content;\n\t\t}\n\n\t\tif (this.options.sourceOptions)\n\t\t{\n\t\t\tconst sourceOptions = Runtime.clone(this.options.sourceOptions);\n\n\t\t\tObject.entries(sourceOptions).forEach(([key, propValue]) => {\n\t\t\t\tif (Type.isArray(propValue) && Type.isArray(value[key]))\n\t\t\t\t{\n\t\t\t\t\tdelete sourceOptions[key];\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn Runtime.merge(sourceOptions, value);\n\t\t}\n\n\t\treturn value;\n\t}\n}"],"names":["ListItem","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","onEditButtonClick","bind","onRemoveButtonClick","onFormChange","cache","Cache","MemoryCache","Type","isDomNode","appendTo","prependTo","isArrayFilled","actions","setActionsButtons","error","Dom","addClass","getLayout","actionsButtons","set","get","target","append","prepend","remember","button","IconButton","type","Types","drag","title","Loc","getMessage","style","position","left","width","Tag","render","Text","encode","getTitleLayout","textContent","innerText","description","getDescriptionLayout","edit","onClick","event","preventDefault","editEvent","BaseEvent","emit","isDefaultPrevented","isOpened","open","close","remove","draggable","getDragButtonLayout","getActionsButtons","map","editable","getEditButtonLayout","removable","getRemoveButtonLayout","id","isSeparator","getHeaderLayout","getBodyLayout","isStringFilled","innerHTML","form","subscribe","hasClass","removeClass","attr","value","name","formValue","serialize","Object","assign","content","sourceOptions","Runtime","clone","entries","forEach","key","propValue","isArray","merge","EventEmitter"],"mappings":"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"}