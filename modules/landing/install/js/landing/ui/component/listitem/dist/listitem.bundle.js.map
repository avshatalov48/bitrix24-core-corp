{"version":3,"file":"listitem.bundle.js","sources":["../src/internal/fetch-events-from-options.js","../src/listitem.js"],"sourcesContent":["import {Type} from 'main.core';\n\ntype Events = {\n\t[eventName: string]: () => any,\n};\n\ntype Options = {\n\t[key: string]: any,\n};\n\nexport default function fetchEventsFromOptions(options: Options): Events\n{\n\tif (Type.isPlainObject(options))\n\t{\n\t\treturn Object.entries(options).reduce((acc, [key, value]) => {\n\t\t\tif (\n\t\t\t\tType.isString(key)\n\t\t\t\t&& key.startsWith('on')\n\t\t\t\t&& Type.isFunction(value)\n\t\t\t)\n\t\t\t{\n\t\t\t\tacc[key] = value;\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {});\n\t}\n\n\treturn {};\n}","import {Cache, Dom, Runtime, Tag, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {Loc} from 'landing.loc';\nimport {BaseForm} from 'landing.ui.form.baseform';\nimport {IconButton} from 'landing.ui.component.iconbutton';\nimport fetchEventsFromOptions from './internal/fetch-events-from-options';\n\nimport './css/style.css';\n\nexport type ListItemOptions = {\n\tid: string,\n\ttype: string,\n\ttitle?: string,\n\tdescription?: string,\n\tdraggable?: boolean,\n\teditable?: boolean,\n\tremovable?: boolean,\n\tonEdit?: (BaseEvent) => {},\n\tonRemove?: (BaseEvent) => {},\n\tonFormChange?: (BaseEvent) => {},\n\tappendTo?: HTMLElement,\n\tprependTo?: HTMLElement,\n\tform?: BaseForm,\n\tsourceOptions?: {[key: string]: any},\n\tisSeparator?: boolean,\n\terror?: boolean,\n};\n\nexport class ListItem extends EventEmitter\n{\n\tconstructor(options: ListItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Component.ListItem');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\n\t\tthis.onEditButtonClick = this.onEditButtonClick.bind(this);\n\t\tthis.onRemoveButtonClick = this.onRemoveButtonClick.bind(this);\n\t\tthis.onFormChange = this.onFormChange.bind(this);\n\n\t\tthis.options = {...options};\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tif (Type.isDomNode(this.options.appendTo))\n\t\t{\n\t\t\tthis.appendTo(this.options.appendTo);\n\t\t}\n\t\telse if (Type.isDomNode(this.options.prependTo))\n\t\t{\n\t\t\tthis.prependTo(this.options.prependTo);\n\t\t}\n\n\t\tif (this.options.error)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'landing-ui-error');\n\t\t}\n\t}\n\n\tappendTo(target: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), target);\n\t}\n\n\tprependTo(target: HTMLElement)\n\t{\n\t\tDom.prepend(this.getLayout(), target);\n\t}\n\n\tgetDragButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('dragButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.drag,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_DRAG_TITLE'),\n\t\t\t\tstyle: {\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\tleft: '1px',\n\t\t\t\t\twidth: '8px',\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('titleLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-text-title\">${Text.encode(this.options.title)}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetTitle(title: string)\n\t{\n\t\tthis.getTitleLayout().textContent = title;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn this.getTitleLayout().innerText;\n\t}\n\n\tgetDescriptionLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('descriptionLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-text-description\">${Text.encode(this.options.description)}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetDescription(description: string)\n\t{\n\t\tthis.getDescriptionLayout().textContent = description;\n\t}\n\n\tgetDescription(): string\n\t{\n\t\treturn this.getDescriptionLayout().innerText;\n\t}\n\n\tgetEditButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('editButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.edit,\n\t\t\t\tonClick: this.onEditButtonClick,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_EDIT_TITLE'),\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tonEditButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst editEvent = new BaseEvent();\n\t\tthis.emit('onEdit', editEvent);\n\n\t\tif (!editEvent.isDefaultPrevented())\n\t\t{\n\t\t\tif (!this.isOpened())\n\t\t\t{\n\t\t\t\tthis.open();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tgetRemoveButtonLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('removeButtonLayout', () => {\n\t\t\tconst button = new IconButton({\n\t\t\t\ttype: IconButton.Types.remove,\n\t\t\t\tonClick: this.onRemoveButtonClick,\n\t\t\t\ttitle: Loc.getMessage('LANDING_UI_COMPONENT_LIST_ITEM_REMOVE_TITLE'),\n\t\t\t});\n\n\t\t\treturn button.getLayout();\n\t\t});\n\t}\n\n\tonRemoveButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tDom.remove(this.getLayout());\n\t\tthis.emit('onRemove');\n\t}\n\n\tgetHeaderLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('headerLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-header\">\n\t\t\t\t\t${this.options.draggable ? this.getDragButtonLayout() : ''}\n\t\t\t\t\t<div class=\"landing-ui-component-list-item-text\">\n\t\t\t\t\t\t${this.getTitleLayout()}\n\t\t\t\t\t\t${this.getDescriptionLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"landing-ui-component-list-item-actions\">\n\t\t\t\t\t\t${this.options.editable ? this.getEditButtonLayout() : ''}\n\t\t\t\t\t\t${this.options.removable ? this.getRemoveButtonLayout() : ''}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetBodyLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('bodyLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-component-list-item-body\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-component-list-item\" \n\t\t\t\t\tdata-id=\"${this.options.id}\"\n\t\t\t\t\tdata-type=\"${this.options.type}\"\n\t\t\t\t\tdata-style=\"${this.options.isSeparator ? 'separator' : 'item'}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getHeaderLayout()}\n\t\t\t\t\t${this.getBodyLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\topen()\n\t{\n\t\tDom.addClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\n\t\tif (!Type.isStringFilled(this.getBodyLayout().innerHTML))\n\t\t{\n\t\t\tif (this.options.form)\n\t\t\t{\n\t\t\t\tDom.append(this.options.form.getLayout(), this.getBodyLayout());\n\t\t\t\tthis.options.form.subscribe('onChange', this.onFormChange);\n\t\t\t}\n\t\t}\n\t}\n\n\tisOpened(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\t}\n\n\tclose()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'landing-ui-component-list-item-opened');\n\t}\n\n\tonFormChange()\n\t{\n\t\tthis.emit('onFormChange');\n\t}\n\n\tsetId(id: string | number)\n\t{\n\t\tDom.attr(this.getLayout(), 'data-id', id);\n\t}\n\n\tgetId(): string | number\n\t{\n\t\treturn Dom.attr(this.getLayout(), 'data-id');\n\t}\n\n\tgetValue()\n\t{\n\t\tconst value = {\n\t\t\tname: this.options.id,\n\t\t};\n\n\t\tif (Type.isStringFilled(this.options.type))\n\t\t{\n\t\t\tvalue.type = this.options.type;\n\t\t}\n\n\t\tif (this.options.form)\n\t\t{\n\t\t\tconst formValue = this.options.form.serialize();\n\t\t\tObject.assign(value, formValue);\n\t\t}\n\n\t\tif (this.options.content)\n\t\t{\n\t\t\tvalue.content = this.options.content;\n\t\t}\n\n\t\tif (this.options.sourceOptions)\n\t\t{\n\t\t\tconst sourceOptions = Runtime.clone(this.options.sourceOptions);\n\t\t\tif (\n\t\t\t\tType.isArray(this.options.sourceOptions.items)\n\t\t\t\t&& Type.isArray(value.items)\n\t\t\t)\n\t\t\t{\n\t\t\t\tdelete sourceOptions.items;\n\t\t\t}\n\n\t\t\treturn Runtime.merge(sourceOptions, value);\n\t\t}\n\n\t\treturn value;\n\t}\n}"],"names":["fetchEventsFromOptions","options","Type","isPlainObject","Object","entries","reduce","acc","key","value","isString","startsWith","isFunction","ListItem","setEventNamespace","subscribeFromOptions","onEditButtonClick","bind","onRemoveButtonClick","onFormChange","cache","Cache","MemoryCache","isDomNode","appendTo","prependTo","error","Dom","addClass","getLayout","target","append","prepend","remember","button","IconButton","type","Types","drag","title","Loc","getMessage","style","position","left","width","Tag","render","Text","encode","getTitleLayout","textContent","innerText","description","getDescriptionLayout","edit","onClick","event","preventDefault","editEvent","BaseEvent","emit","isDefaultPrevented","isOpened","open","close","remove","draggable","getDragButtonLayout","editable","getEditButtonLayout","removable","getRemoveButtonLayout","id","isSeparator","getHeaderLayout","getBodyLayout","isStringFilled","innerHTML","form","subscribe","hasClass","removeClass","attr","name","formValue","serialize","assign","content","sourceOptions","Runtime","clone","isArray","items","merge","EventEmitter"],"mappings":"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"}