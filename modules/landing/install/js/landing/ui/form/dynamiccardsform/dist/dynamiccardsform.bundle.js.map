{"version":3,"file":"dynamiccardsform.bundle.js","sources":["../src/dynamiccardsform.js"],"sourcesContent":["import {Dom, Type} from 'main.core';\nimport {BaseForm} from 'landing.ui.form.baseform';\nimport {Env} from 'landing.env';\nimport {SourceField} from 'landing.ui.field.sourcefield';\nimport {Loc} from 'landing.loc';\nimport {Main} from 'landing.main';\n\n/**\n * @memberOf BX.Landing.UI.Form\n */\nexport class DynamicCardsForm extends BaseForm\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.type = options.type;\n\t\tthis.code = options.code;\n\t\tthis.presets = options.presets;\n\t\tthis.sync = options.sync;\n\t\tthis.forms = options.forms;\n\t\tthis.id = `${this.code.replace('.', '')}-${BX.Landing.Utils.random()}`;\n\t\tthis.onSourceChangeHandler = options.onSourceChange;\n\t\tthis.dynamicParams = options.dynamicParams;\n\t\tthis.settingFieldsSelectors = [\n\t\t\t'source',\n\t\t\t'pagesCount',\n\t\t\t'detailPage',\n\t\t\t'useSef',\n\t\t];\n\n\t\tthis.sourceField = this.createSourceField();\n\t\tthis.pagesField = this.createPagesField();\n\n\t\tthis.addField(this.sourceField);\n\t\tthis.addField(this.pagesField);\n\n\t\tthis.detailPageGroup = new BX.Landing.UI.Card.DynamicFieldsGroup({\n\t\t\titems: [this.createLinkField()],\n\t\t});\n\n\t\tthis.addCard(\n\t\t\tthis.detailPageGroup,\n\t\t);\n\t}\n\n\tstatic getSources()\n\t{\n\t\treturn Env.getInstance().getOptions().sources;\n\t}\n\n\tstatic getSourceItems()\n\t{\n\t\treturn DynamicCardsForm.getSources()\n\t\t\t.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.name,\n\t\t\t\t\tvalue: item.id,\n\t\t\t\t\turl: item.url ? item.url.filter : '',\n\t\t\t\t\tfilter: item.filter,\n\t\t\t\t\tsort: {\n\t\t\t\t\t\titems: item.sort.map((sortItem) => {\n\t\t\t\t\t\t\treturn {name: sortItem.name, value: sortItem.id};\n\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t\tsettings: item.settings,\n\t\t\t\t};\n\t\t\t});\n\t}\n\n\tstatic isReference(value): boolean\n\t{\n\t\tconst sources = DynamicCardsForm.getSources();\n\t\tif (Type.isArray(sources))\n\t\t{\n\t\t\treturn sources.some((source) => {\n\t\t\t\tif (Type.isArray(source.references))\n\t\t\t\t{\n\t\t\t\t\treturn source.references.some((reference) => {\n\t\t\t\t\t\treturn reference.id === value;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tcreateSourceField(): SourceField\n\t{\n\t\tconst sourceItems = DynamicCardsForm.getSourceItems();\n\t\tconst [firstItem] = sourceItems;\n\t\tconst value = {\n\t\t\tsource: firstItem.value,\n\t\t\tfilter: firstItem.filter,\n\t\t};\n\n\t\tif (\n\t\t\tType.isPlainObject(this.dynamicParams)\n\t\t\t&& Type.isPlainObject(this.dynamicParams.settings)\n\t\t\t&& Type.isPlainObject(this.dynamicParams.settings.source)\n\t\t)\n\t\t{\n\t\t\tvalue.source = this.dynamicParams.settings.source.source;\n\t\t\tvalue.filter = this.dynamicParams.settings.source.filter;\n\t\t\tvalue.sort = this.dynamicParams.settings.source.sort;\n\t\t}\n\n\t\treturn new SourceField({\n\t\t\tselector: 'source',\n\t\t\ttitle: Loc.getMessage('LANDING_CARDS__SOURCE_FIELD_TITLE'),\n\t\t\titems: sourceItems,\n\t\t\tvalue,\n\t\t\tonValueChange: (field) => {\n\t\t\t\tconst fieldValue = field.getValue();\n\t\t\t\tconst source = DynamicCardsForm.getSources().find((item) => {\n\t\t\t\t\treturn item.id === fieldValue.source;\n\t\t\t\t});\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!this.sourceField.isDetailPageAllowed())\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.style(this.detailPageGroup.layout, 'display', 'none');\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.style(this.detailPageGroup.layout, 'display', null);\n\t\t\t\t\t}\n\t\t\t\t\tthis.onSourceChangeHandler(source);\n\t\t\t\t}, 0);\n\t\t\t},\n\t\t});\n\t}\n\n\tcreatePagesField(): BX.Landing.UI.Field.Pages\n\t{\n\t\treturn new BX.Landing.UI.Field.Pages({\n\t\t\tselector: 'pagesCount',\n\t\t\ttitle: Loc.getMessage('LANDING_CARDS__PAGES_FIELD_TITLE'),\n\t\t\tvalue: this.dynamicParams.settings.pagesCount,\n\t\t});\n\t}\n\n\tcreateLinkField(): BX.Landing.UI.Field.Link\n\t{\n\t\tlet content = {\n\t\t\ttext: '',\n\t\t\thref: '',\n\t\t};\n\n\t\tif (\n\t\t\tType.isPlainObject(this.dynamicParams)\n\t\t\t&& Type.isPlainObject(this.dynamicParams.settings)\n\t\t\t&& Type.isPlainObject(this.dynamicParams.settings.detailPage)\n\t\t)\n\t\t{\n\t\t\tcontent = this.dynamicParams.settings.detailPage;\n\t\t}\n\n\t\treturn new BX.Landing.UI.Field.Link({\n\t\t\tselector: 'detailPage',\n\t\t\ttitle: Loc.getMessage('LANDING_CARDS__DETAIL_PAGE_FIELD_TITLE'),\n\t\t\ttextOnly: true,\n\t\t\tdisableCustomURL: true,\n\t\t\tdisableBlocks: true,\n\t\t\tdisallowType: true,\n\t\t\tallowedTypes: [\n\t\t\t\tBX.Landing.UI.Field.LinkURL.TYPE_PAGE,\n\t\t\t],\n\t\t\tdetailPageMode: true,\n\t\t\tsourceField: this.fields.find((field) => {\n\t\t\t\treturn field.selector === 'source';\n\t\t\t}),\n\t\t\toptions: {\n\t\t\t\tsiteId: Env.getInstance().getOptions().site_id,\n\t\t\t\tlandingId: Main.getInstance().id,\n\t\t\t\tfilter: {\n\t\t\t\t\t'=TYPE': Env.getInstance().getOptions().params.type,\n\t\t\t\t},\n\t\t\t},\n\t\t\tcontent,\n\t\t});\n\t}\n\n\tserialize(): {[key: string]: any}\n\t{\n\t\tconst isDetailPageAllowed = this.sourceField.isDetailPageAllowed();\n\n\t\treturn this.fields.reduce((acc, field) => {\n\t\t\tif (field.selector === 'detailPage' && !isDetailPageAllowed)\n\t\t\t{\n\t\t\t\treturn acc;\n\t\t\t}\n\n\t\t\tconst value = field.getValue();\n\n\t\t\tif (this.settingFieldsSelectors.includes(field.selector))\n\t\t\t{\n\t\t\t\tif (field.selector === 'source')\n\t\t\t\t{\n\t\t\t\t\tacc.source = value.source;\n\t\t\t\t}\n\n\t\t\t\tacc.settings[field.selector] = value;\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tvalue === '@hide'\n\t\t\t\t|| (Type.isPlainObject(value) && value.id === '@hide')\n\t\t\t)\n\t\t\t{\n\t\t\t\tacc.references[field.selector] = '@hide';\n\n\t\t\t\tif (Dom.hasClass(field.layout, 'landing-ui-field-dynamic-dropdown'))\n\t\t\t\t{\n\t\t\t\t\tacc.stubs[field.selector] = '';\n\t\t\t\t}\n\t\t\t\telse if (Dom.hasClass(field.layout, 'landing-ui-field-dynamic-image'))\n\t\t\t\t{\n\t\t\t\t\tacc.stubs[field.selector] = {\n\t\t\t\t\t\tid: -1,\n\t\t\t\t\t\tsrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAP',\n\t\t\t\t\t\talt: '',\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\tif (\n\t\t\t\tDynamicCardsForm.isReference(value)\n\t\t\t\t\t|| (\n\t\t\t\t\t\tType.isPlainObject(value)\n\t\t\t\t\t\t&& Type.isString(value.id)\n\t\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (DynamicCardsForm.isReference(value))\n\t\t\t\t{\n\t\t\t\t\tacc.references[field.selector] = {id: value};\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tacc.references[field.selector] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tacc.stubs[field.selector] = value;\n\t\t\t}\n\n\t\t\treturn acc;\n\t\t}, {settings: {}, references: {}, stubs: {}});\n\t}\n}"],"names":["DynamicCardsForm","options","type","code","presets","sync","forms","id","replace","BX","Landing","Utils","random","onSourceChangeHandler","onSourceChange","dynamicParams","settingFieldsSelectors","sourceField","createSourceField","pagesField","createPagesField","addField","detailPageGroup","UI","Card","DynamicFieldsGroup","items","createLinkField","addCard","sourceItems","getSourceItems","firstItem","value","source","filter","Type","isPlainObject","settings","sort","SourceField","selector","title","Loc","getMessage","onValueChange","field","fieldValue","getValue","getSources","find","item","setTimeout","isDetailPageAllowed","Dom","style","layout","Field","Pages","pagesCount","content","text","href","detailPage","Link","textOnly","disableCustomURL","disableBlocks","disallowType","allowedTypes","LinkURL","TYPE_PAGE","detailPageMode","fields","siteId","Env","getInstance","getOptions","site_id","landingId","Main","params","reduce","acc","includes","references","hasClass","stubs","src","alt","isReference","isString","sources","map","name","url","sortItem","isArray","some","reference","BaseForm"],"mappings":"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"}