{"version":3,"file":"cardform.bundle.js","sources":["../src/cardform.js"],"sourcesContent":["import {Dom, Runtime, Tag, Type} from 'main.core';\nimport {BaseForm} from 'landing.ui.form.baseform';\n\nimport './css/card_form.css';\n\n/**\n * @memberOf BX.Landing.UI.Form\n */\nexport class CardForm extends BaseForm\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Form.CardForm');\n\t\tDom.addClass(this.layout, 'landing-ui-form-card');\n\n\t\tthis.onItemClick = Runtime.throttle(this.onItemClick, 200, this);\n\t\tthis.onRemoveItemClick = this.onRemoveItemClick.bind(this);\n\n\t\tthis.wrapper = this.getWrapper();\n\n\t\tthis.labelBindings = options.labelBindings;\n\t\tthis.preset = options.preset;\n\t\t[, this.oldIndex] = this.selector.split('@');\n\t}\n\n\tgetWrapper(): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"landing-ui-form-cards-item\">\n\t\t\t\t<div class=\"landing-ui-form-cards-item-inner\">\n\t\t\t\t\t<div class=\"landing-ui-form-card-item-header\" onclick=\"${this.onItemClick}\">\n\t\t\t\t\t\t<div class=\"landing-ui-form-card-item-header-left\">\n\t\t\t\t\t\t\t<div class=\"landing-ui-form-card-item-header-left-inner\">\n\t\t\t\t\t\t\t\t<span class=\"landing-ui-form-card-item-header-drag landing-ui-drag\"></span>\n\t\t\t\t\t\t\t\t<span class=\"landing-ui-form-card-item-header-title\">${this.label}</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"landing-ui-form-card-item-header-edit\">\n\t\t\t\t\t\t\t\t<span class=\"fa fa-pencil\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"landing-ui-form-card-item-header-right\">\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tclass=\"landing-ui-form-card-item-header-remove\"\n\t\t\t\t\t\t\t\tonclick=\"${this.onRemoveItemClick}\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<span class=\"fa fa-remove\"></span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getNode()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonItemClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tif (Type.isDomNode(event.currentTarget))\n\t\t{\n\t\t\tconst target = event.currentTarget.closest('.landing-ui-form-cards-item');\n\t\t\tif (!Dom.hasClass(target, 'landing-ui-form-cards-item-expand'))\n\t\t\t{\n\t\t\t\tDom.addClass(target, 'landing-ui-form-cards-item-expand');\n\n\t\t\t\tBX.Landing.Utils.onTransitionEnd(target).then(() => {\n\t\t\t\t\tDom.style(target, {\n\t\t\t\t\t\toverflow: 'visible',\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tDom.style(target, {\n\t\t\t\t\theight: 'auto',\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(target, 'landing-ui-form-cards-item-expand');\n\t\t\t\tDom.style(target, null);\n\t\t\t}\n\t\t}\n\t}\n\n\tonRemoveItemClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (!this.getLayout().closest('.landing-ui-disallow-remove'))\n\t\t{\n\t\t\tDom.remove(this.wrapper);\n\t\t\tthis.emit('onRemove');\n\t\t}\n\t}\n\n\tserialize(): {[key: string]: any}\n\t{\n\t\treturn this.fields\n\t\t\t.reduce((res, field) => {\n\t\t\t\tconst [index] = field.selector.split('@');\n\t\t\t\tres[index] = field.getValue();\n\t\t\t\treturn res;\n\t\t\t}, {});\n\t}\n\n\tgetPreset()\n\t{\n\t\treturn this.preset || null;\n\t}\n}"],"names":["CardForm","options","setEventNamespace","Dom","addClass","layout","onItemClick","Runtime","throttle","onRemoveItemClick","bind","wrapper","getWrapper","labelBindings","preset","selector","split","oldIndex","Tag","render","label","getNode","event","preventDefault","Type","isDomNode","currentTarget","target","closest","hasClass","BX","Landing","Utils","onTransitionEnd","then","style","overflow","height","removeClass","stopPropagation","getLayout","remove","emit","fields","reduce","res","field","index","getValue","BaseForm"],"mappings":"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"}