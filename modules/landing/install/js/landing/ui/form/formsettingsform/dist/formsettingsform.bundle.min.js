this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,t,n,i,o,r,a){"use strict";var s;function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){babelHelpers.inherits(n,e);function n(e){var i;babelHelpers.classCallCheck(this,n);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(n).call(this,c({opened:true},e)));i.setEventNamespace("BX.Landing.UI.Form.FormSettingsForm");i.subscribeFromOptions(a.fetchEventsFromOptions(e));t.Dom.addClass(i.layout,"landing-ui-form-form-settings");i.onFieldChange=i.onFieldChange.bind(babelHelpers.assertThisInitialized(i));i.onSwitchChange=i.onSwitchChange.bind(babelHelpers.assertThisInitialized(i));i.cache=new t.Cache.MemoryCache;if(i.options.toggleable){i.onSwitchChange(i.options.opened);if(!i.options.toggleableType||i.options.toggleableType===n.ToggleableType.Switch){i.getSwitch().setValue(i.options.opened);t.Dom.prepend(i.getSwitch().getNode(),i.header)}if(i.options.toggleableType===n.ToggleableType.Link){t.Dom.clean(i.header);t.Dom.append(i.getLink().getLayout(),i.header)}}if(t.Type.isPlainObject(i.options.help)){t.Dom.append(i.getHelp(i.options.help),i.footer)}return i}babelHelpers.createClass(n,[{key:"getHelp",value:function e(n){return this.cache.remember("help",(function(){return t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-form-help">\n\t\t\t\t\t<a href="','" target="_blank">',"</a>\n\t\t\t\t</div>\n\t\t\t"])),n.href,n.text)}))}},{key:"addField",value:function e(i){if(t.Type.isFunction(i.subscribe)){i.subscribe("onChange",this.onFieldChange.bind(this))}babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"addField",this).call(this,i)}},{key:"replaceField",value:function e(i,o){if(t.Type.isFunction(o.subscribe)){o.subscribe("onChange",this.onFieldChange.bind(this))}babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"replaceField",this).call(this,i,o)}},{key:"onFieldChange",value:function e(t){this.emit("onChange",t.getData())}},{key:"getSwitch",value:function e(){var t=this;return this.cache.remember("switch",(function(){var e=new i.SmallSwitch({value:t.options.opened});e.subscribe("onChange",(function(e){t.onSwitchChange(e.getTarget().getValue())}));return e}))}},{key:"getLink",value:function e(){var n=this;return this.cache.remember("link",(function(){return new r.Link({text:n.options.title,color:r.Link.Colors.Grey,onClick:function e(){n.onSwitchChange(t.Dom.style(n.body,"display")==="none")}})}))}},{key:"onSwitchChange",value:function e(n){if(!n){this.cache.set("isOpened",false);t.Dom.style(this.body,"display","none");t.Dom.style(this.layout,"margin-bottom","20px")}else{this.cache.set("isOpened",true);t.Dom.style(this.body,"display",null);t.Dom.style(this.layout,"margin-bottom",null)}this.emit("onChange")}},{key:"isOpened",value:function e(){return t.Text.toBoolean(this.cache.get("isOpened"))}},{key:"setOffsetTop",value:function e(n){t.Dom.style(this.getLayout(),"margin-top","".concat(n,"px"))}},{key:"clear",value:function e(){this.fields.forEach((function(e){if(t.Type.isFunction(e.getLayout)){t.Dom.remove(e.getLayout())}else{t.Dom.remove(e.layout)}e.unsubscribeAll("onChange")}));this.fields.clear()}}]);return n}(n.BaseForm);babelHelpers.defineProperty(h,"ToggleableType",{Link:"link",Switch:"switch"});e.FormSettingsForm=h})(this.BX.Landing.UI.Form=this.BX.Landing.UI.Form||{},BX,BX.Landing.UI.Form,BX.Landing.UI.Field,BX.Event,BX.Landing.UI.Component,BX.Landing.UI.Component);
//# sourceMappingURL=formsettingsform.bundle.map.js