this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,t,n,i,o,a,s){"use strict";function l(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-form-help">\n\t\t\t\t\t<a href="','" target="_blank">',"</a>\n\t\t\t\t</div>\n\t\t\t"]);l=function t(){return e};return e}var r=function(e){babelHelpers.inherits(n,e);function n(e){var i;babelHelpers.classCallCheck(this,n);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(n).call(this,babelHelpers.objectSpread({opened:true},e)));i.setEventNamespace("BX.Landing.UI.Form.FormSettingsForm");i.subscribeFromOptions(s.fetchEventsFromOptions(e));t.Dom.addClass(i.layout,"landing-ui-form-form-settings");i.onFieldChange=i.onFieldChange.bind(babelHelpers.assertThisInitialized(i));i.onSwitchChange=i.onSwitchChange.bind(babelHelpers.assertThisInitialized(i));i.cache=new t.Cache.MemoryCache;if(i.options.toggleable){i.onSwitchChange(i.options.opened);if(!i.options.toggleableType||i.options.toggleableType===n.ToggleableType.Switch){i.getSwitch().setValue(i.options.opened);t.Dom.prepend(i.getSwitch().getNode(),i.header)}if(i.options.toggleableType===n.ToggleableType.Link){t.Dom.clean(i.header);t.Dom.append(i.getLink().getLayout(),i.header)}}if(t.Type.isPlainObject(i.options.help)){t.Dom.append(i.getHelp(i.options.help),i.footer)}return i}babelHelpers.createClass(n,[{key:"getHelp",value:function e(n){return this.cache.remember("help",function(){return t.Tag.render(l(),n.href,n.text)})}},{key:"addField",value:function e(i){if(t.Type.isFunction(i.subscribe)){i.subscribe("onChange",this.onFieldChange.bind(this))}babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"addField",this).call(this,i)}},{key:"replaceField",value:function e(i,o){if(t.Type.isFunction(o.subscribe)){o.subscribe("onChange",this.onFieldChange.bind(this))}babelHelpers.get(babelHelpers.getPrototypeOf(n.prototype),"replaceField",this).call(this,i,o)}},{key:"onFieldChange",value:function e(t){this.emit("onChange",t.getData())}},{key:"getSwitch",value:function e(){var t=this;return this.cache.remember("switch",function(){var e=new i.SmallSwitch({value:t.options.opened});e.subscribe("onChange",function(e){t.onSwitchChange(e.getTarget().getValue())});return e})}},{key:"getLink",value:function e(){var n=this;return this.cache.remember("link",function(){return new a.Link({text:n.options.title,color:a.Link.Colors.Grey,onClick:function e(){n.onSwitchChange(t.Dom.style(n.body,"display")==="none")}})})}},{key:"onSwitchChange",value:function e(n){if(!n){this.cache.set("isOpened",false);t.Dom.style(this.body,"display","none");t.Dom.style(this.layout,"margin-bottom","20px")}else{this.cache.set("isOpened",true);t.Dom.style(this.body,"display",null);t.Dom.style(this.layout,"margin-bottom",null)}this.emit("onChange")}},{key:"isOpened",value:function e(){return t.Text.toBoolean(this.cache.get("isOpened"))}},{key:"setOffsetTop",value:function e(n){t.Dom.style(this.getLayout(),"margin-top","".concat(n,"px"))}},{key:"clear",value:function e(){this.fields.forEach(function(e){if(t.Type.isFunction(e.getLayout)){t.Dom.remove(e.getLayout())}else{t.Dom.remove(e.layout)}e.unsubscribeAll("onChange")});this.fields.clear()}}]);return n}(n.BaseForm);babelHelpers.defineProperty(r,"ToggleableType",{Link:"link",Switch:"switch"});e.FormSettingsForm=r})(this.BX.Landing.UI.Form=this.BX.Landing.UI.Form||{},BX,BX.Landing.UI.Form,BX.Landing.UI.Field,BX.Event,BX.Landing.UI.Component,BX.Landing.UI.Component);
//# sourceMappingURL=formsettingsform.bundle.map.js