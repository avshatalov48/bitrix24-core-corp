{"version":3,"file":"styleform.bundle.js","sources":["../src/styleform.js"],"sourcesContent":["import {Dom, Event} from 'main.core';\nimport {BaseForm} from 'landing.ui.form.baseform';\nimport {Highlight} from 'landing.ui.highlight';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport './css/style_form.css';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\n\n/**\n * @memberOf BX.Landing.UI.Form\n */\nexport class StyleForm extends BaseForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Form.StyleForm');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\n\t\tDom.addClass(this.layout, 'landing-ui-form-style');\n\t\tthis.iframe = 'iframe' in options ? options.iframe : null;\n\t\tthis.node = 'node' in options ? options.node : null;\n\t\tthis.selector = 'selector' in options ? options.selector : null;\n\n\t\tthis.onHeaderEnter = this.onHeaderEnter.bind(this);\n\t\tthis.onHeaderLeave = this.onHeaderLeave.bind(this);\n\t\tthis.onHeaderClick = this.onHeaderClick.bind(this);\n\n\t\tEvent.bind(this.header, 'click', this.onHeaderClick);\n\t\tEvent.bind(this.header, 'mouseenter', this.onHeaderEnter);\n\t\tEvent.bind(this.header, 'mouseleave', this.onHeaderLeave);\n\n\t\tif (this.type === 'attrs')\n\t\t{\n\t\t\tDom.addClass(this.header, 'landing-ui-static');\n\t\t}\n\n\t\tif (this.iframe)\n\t\t{\n\t\t\tthis.onFrameLoad();\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\tif (!this.node)\n\t\t{\n\t\t\tthis.node = [...this.iframe.document.querySelectorAll(this.selector)];\n\t\t}\n\t}\n\n\tonHeaderEnter()\n\t{\n\t\tHighlight.getInstance().show(this.node);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonHeaderLeave()\n\t{\n\t\tHighlight.getInstance().hide();\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonHeaderClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\taddField(field: BaseField)\n\t{\n\t\tif (field)\n\t\t{\n\t\t\tfield.subscribe('onChange', this.onChange.bind(this));\n\t\t\tthis.fields.add(field);\n\t\t\tthis.body.appendChild(field.layout);\n\t\t}\n\t}\n\n\tonChange()\n\t{\n\t\tthis.emit('onChange');\n\t}\n}"],"names":["StyleForm","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","Dom","addClass","layout","iframe","node","selector","onHeaderEnter","bind","onHeaderLeave","onHeaderClick","Event","header","type","onFrameLoad","document","querySelectorAll","Highlight","getInstance","show","hide","event","preventDefault","field","subscribe","onChange","fields","add","body","appendChild","emit","BaseForm"],"mappings":";;;;;;CAQA;;;;AAGA,KAAaA,SAAb;CAAA;;CAEC,uBACA;CAAA;;CAAA,QADYC,OACZ,uEADsB,EACtB;CAAA;CACC,2GAAMA,OAAN;;CACA,UAAKC,iBAAL,CAAuB,8BAAvB;;CACA,UAAKC,oBAAL,CAA0BC,oDAAsB,CAACH,OAAD,CAAhD;;CAEAI,IAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKC,MAAlB,EAA0B,uBAA1B;CACA,UAAKC,MAAL,GAAc,YAAYP,OAAZ,GAAsBA,OAAO,CAACO,MAA9B,GAAuC,IAArD;CACA,UAAKC,IAAL,GAAY,UAAUR,OAAV,GAAoBA,OAAO,CAACQ,IAA5B,GAAmC,IAA/C;CACA,UAAKC,QAAL,GAAgB,cAAcT,OAAd,GAAwBA,OAAO,CAACS,QAAhC,GAA2C,IAA3D;CAEA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBC,IAAnB,2CAArB;CACA,UAAKC,aAAL,GAAqB,MAAKA,aAAL,CAAmBD,IAAnB,2CAArB;CACA,UAAKE,aAAL,GAAqB,MAAKA,aAAL,CAAmBF,IAAnB,2CAArB;CAEAG,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKI,MAAhB,EAAwB,OAAxB,EAAiC,MAAKF,aAAtC;CACAC,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKI,MAAhB,EAAwB,YAAxB,EAAsC,MAAKL,aAA3C;CACAI,IAAAA,eAAK,CAACH,IAAN,CAAW,MAAKI,MAAhB,EAAwB,YAAxB,EAAsC,MAAKH,aAA3C;;CAEA,QAAI,MAAKI,IAAL,KAAc,OAAlB,EACA;CACCZ,MAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKU,MAAlB,EAA0B,mBAA1B;CACA;;CAED,QAAI,MAAKR,MAAT,EACA;CACC,YAAKU,WAAL;CACA;;CA1BF;CA2BC;;CA9BF;CAAA;CAAA,kCAiCC;CACC,UAAI,CAAC,KAAKT,IAAV,EACA;CACC,aAAKA,IAAL,kCAAgB,KAAKD,MAAL,CAAYW,QAAZ,CAAqBC,gBAArB,CAAsC,KAAKV,QAA3C,CAAhB;CACA;CACD;CAtCF;CAAA;CAAA,oCAyCC;CACCW,MAAAA,8BAAS,CAACC,WAAV,GAAwBC,IAAxB,CAA6B,KAAKd,IAAlC;CACA,KA3CF;;CAAA;CAAA;CAAA,oCA+CC;CACCY,MAAAA,8BAAS,CAACC,WAAV,GAAwBE,IAAxB;CACA,KAjDF;;CAAA;CAAA;CAAA,kCAoDeC,KApDf,EAqDC;CACCA,MAAAA,KAAK,CAACC,cAAN;CACA;CAvDF;CAAA;CAAA,6BAyDUC,KAzDV,EA0DC;CACC,UAAIA,KAAJ,EACA;CACCA,QAAAA,KAAK,CAACC,SAAN,CAAgB,UAAhB,EAA4B,KAAKC,QAAL,CAAcjB,IAAd,CAAmB,IAAnB,CAA5B;CACA,aAAKkB,MAAL,CAAYC,GAAZ,CAAgBJ,KAAhB;CACA,aAAKK,IAAL,CAAUC,WAAV,CAAsBN,KAAK,CAACpB,MAA5B;CACA;CACD;CAjEF;CAAA;CAAA,+BAoEC;CACC,WAAK2B,IAAL,CAAU,UAAV;CACA;CAtEF;CAAA;CAAA,EAA+BC,iCAA/B;;;;;;;;"}