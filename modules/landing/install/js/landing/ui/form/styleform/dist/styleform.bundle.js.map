{"version":3,"file":"styleform.bundle.js","sources":["../src/styleform.js"],"sourcesContent":["import { Dom, Event, Type } from 'main.core';\nimport {BaseForm} from 'landing.ui.form.baseform';\nimport {Highlight} from 'landing.ui.highlight';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport './css/style_form.css';\nimport {fetchEventsFromOptions} from 'landing.ui.component.internal';\nimport 'ui.design-tokens';\n\n/**\n * @memberOf BX.Landing.UI.Form\n */\nexport class StyleForm extends BaseForm\n{\n\t#styleFields: Map;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Form.StyleForm');\n\t\tthis.subscribeFromOptions(fetchEventsFromOptions(options));\n\n\t\tDom.addClass(this.layout, 'landing-ui-form-style');\n\t\tthis.iframe = 'iframe' in options ? options.iframe : null;\n\t\tthis.node = 'node' in options ? options.node : null;\n\t\tthis.selector = 'selector' in options ? options.selector : null;\n\t\tthis.#styleFields = new Map();\n\n\t\tthis.onHeaderEnter = this.onHeaderEnter.bind(this);\n\t\tthis.onHeaderLeave = this.onHeaderLeave.bind(this);\n\t\tthis.onHeaderClick = this.onHeaderClick.bind(this);\n\n\t\tEvent.bind(this.header, 'click', this.onHeaderClick);\n\t\tEvent.bind(this.header, 'mouseenter', this.onHeaderEnter);\n\t\tEvent.bind(this.header, 'mouseleave', this.onHeaderLeave);\n\n\t\tif (this.type === 'attrs')\n\t\t{\n\t\t\tDom.addClass(this.header, 'landing-ui-static');\n\t\t}\n\n\t\tif (this.iframe)\n\t\t{\n\t\t\tthis.onFrameLoad();\n\t\t}\n\t}\n\n\tonFrameLoad()\n\t{\n\t\tif (!this.node)\n\t\t{\n\t\t\tthis.node = [...this.iframe.document.querySelectorAll(this.selector)];\n\t\t}\n\t}\n\n\tonHeaderEnter()\n\t{\n\t\tHighlight.getInstance().show(this.node);\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonHeaderLeave()\n\t{\n\t\tHighlight.getInstance().hide();\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonHeaderClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t}\n\n\taddField(field: BaseField)\n\t{\n\t\tif (field)\n\t\t{\n\t\t\tconst attrKey = field?.data?.attrKey;\n\n\t\t\tfield.subscribe('onChange', this.onChange.bind(this));\n\t\t\tfield.subscribe('onInit', this.onInit.bind(this));\n\n\t\t\tthis.fields.add(field);\n\t\t\tthis.body.appendChild(field.layout);\n\n\t\t\tif (attrKey)\n\t\t\t{\n\t\t\t\tthis.#styleFields.set(attrKey, field.getLayout());\n\t\t\t}\n\t\t}\n\t}\n\n\tonChange(event)\n\t{\n\t\tthis.#toggleLinkedFields(event.getData());\n\t\tthis.emit('onChange');\n\t}\n\n\tonInit(event)\n\t{\n\t\tthis.#toggleLinkedFields(event.getData());\n\t\tthis.emit('onInit');\n\t}\n\n\t#toggleLinkedFields(fieldData: Object)\n\t{\n\t\t// hide linked fields\n\t\tif (fieldData.hide && Type.isArray(fieldData.hide))\n\t\t{\n\t\t\tfieldData.hide.map(attr => {\n\t\t\t\tconst layout = this.#styleFields.get(attr);\n\t\t\t\tif (layout)\n\t\t\t\t{\n\t\t\t\t\tlayout.style.display = 'none';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// show linked fields\n\t\tif (fieldData.show && Type.isArray(fieldData.show))\n\t\t{\n\t\t\tfieldData.show.map(attr => {\n\t\t\t\tconst layout = this.#styleFields.get(attr);\n\t\t\t\tif (layout)\n\t\t\t\t{\n\t\t\t\t\tlayout.style.display = 'block';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n"],"names":["StyleForm","options","setEventNamespace","subscribeFromOptions","fetchEventsFromOptions","Dom","addClass","layout","iframe","node","selector","Map","onHeaderEnter","bind","onHeaderLeave","onHeaderClick","Event","header","type","onFrameLoad","document","querySelectorAll","Highlight","getInstance","show","hide","event","preventDefault","field","attrKey","data","subscribe","onChange","onInit","fields","add","body","appendChild","set","getLayout","getData","emit","BaseForm","fieldData","Type","isArray","map","attr","get","style","display"],"mappings":"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"}