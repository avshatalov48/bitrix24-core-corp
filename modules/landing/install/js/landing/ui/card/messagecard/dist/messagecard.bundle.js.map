{"version":3,"file":"messagecard.bundle.js","sources":["../src/messagecard.js"],"sourcesContent":["import {Cache, Dom, Tag, Type} from 'main.core';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\n\nexport class MessageCard extends BaseCard\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Card.MessageCard');\n\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message');\n\n\t\tthis.onCloseClick = this.onCloseClick.bind(this);\n\n\t\tif (this.options.angle === false)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message-without-angle');\n\t\t}\n\n\t\tif (Type.isStringFilled(this.options.icon))\n\t\t{\n\t\t\tDom.append(this.getIcon(), this.getHeader());\n\t\t}\n\n\t\tDom.append(this.getTitle(), this.getHeader());\n\t\tDom.append(this.getDescription(), this.getBody());\n\n\t\tif (this.options.closeable !== false)\n\t\t{\n\t\t\tDom.append(this.getCloseButton(), this.getLayout());\n\t\t}\n\n\t\tif (this.options.hideActions !== true)\n\t\t{\n\t\t\tDom.append(this.getActionsContainer(), this.getLayout());\n\t\t}\n\n\t\tif (this.isAllowRestoreState())\n\t\t{\n\t\t\tconst state = MessageCard.cache.get(this.options.id, {shown: true});\n\t\t\tif (state.shown)\n\t\t\t{\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisAllowRestoreState(): boolean\n\t{\n\t\treturn this.options.restoreState && this.options.id;\n\t}\n\n\tgetIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-icon\" style=\"background-image: url(${this.options.icon})\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-title\">${this.options.header}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-description\">${this.options.description}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-card-message-close-button\" \n\t\t\t\t\tonclick=\"${this.onCloseClick}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonCloseClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.hide();\n\t\tthis.emit('onClose');\n\t\tMessageCard.cache.set(this.options.id, {shown: false});\n\t}\n\n\tgetActionsContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-actions\">\n\t\t\t\t\t${this.getCloseLink()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseLink(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeLink', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-message-close-link\" onclick=\"${this.onCloseClick}\">\n\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n}"],"names":["MessageCard","options","setEventNamespace","Dom","addClass","getLayout","onCloseClick","bind","angle","Type","isStringFilled","icon","append","getIcon","getHeader","getTitle","getDescription","getBody","closeable","getCloseButton","hideActions","getActionsContainer","isAllowRestoreState","state","cache","get","id","shown","show","hide","restoreState","remember","Tag","render","header","description","Loc","getMessage","event","preventDefault","emit","set","getCloseLink","onClickHandler","BaseCard","Cache","MemoryCache"],"mappings":"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"}