{"version":3,"file":"messagecard.bundle.js","sources":["../src/messagecard.js"],"sourcesContent":["import {Cache, Dom, Tag, Text, Type} from 'main.core';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\n\nconst CONTEXT_WARNING = 'warning';\n\nexport class MessageCard extends BaseCard\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\tcontext?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t\tmore?: string | () => {},\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Card.MessageCard');\n\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message');\n\n\t\tthis.onCloseClick = this.onCloseClick.bind(this);\n\n\t\tif (Type.isStringFilled(this.options.context))\n\t\t{\n\t\t\tswitch (this.options.context)\n\t\t\t{\n\t\t\t\tcase CONTEXT_WARNING:\n\t\t\t\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message-context-warning');\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.options.angle === false)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message-without-angle');\n\t\t}\n\n\t\tif (Type.isStringFilled(this.options.icon))\n\t\t{\n\t\t\tDom.append(this.getIcon(), this.getHeader());\n\t\t}\n\n\t\tDom.append(this.getTitle(), this.getHeader());\n\t\tDom.append(this.getDescription(), this.getBody());\n\n\t\tif (this.options.closeable !== false)\n\t\t{\n\t\t\tDom.append(this.getCloseButton(), this.getLayout());\n\t\t}\n\n\t\tif (this.options.hideActions !== true || this.options.more)\n\t\t{\n\t\t\tDom.append(this.getActionsContainer(), this.getLayout());\n\t\t}\n\n\t\tif (this.isAllowRestoreState())\n\t\t{\n\t\t\tconst state = MessageCard.cache.get(this.options.id, {shown: true});\n\t\t\tif (state.shown)\n\t\t\t{\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisAllowRestoreState(): boolean\n\t{\n\t\treturn this.options.restoreState && this.options.id;\n\t}\n\n\tgetIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-icon\" style=\"background-image: url(${this.options.icon})\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-title\">${this.options.header}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-description\">${this.options.description}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-card-message-close-button\" \n\t\t\t\t\tonclick=\"${this.onCloseClick}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonCloseClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.hide();\n\t\tthis.emit('onClose');\n\t\tMessageCard.cache.set(this.options.id, {shown: false});\n\t}\n\n\tgetActionsContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-actions\">\n\t\t\t\t\t${this.options.closeable !== false ? this.getCloseLink() : ''}\n\t\t\t\t\t${this.options.more ? this.getReedMoreLink() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseLink(): HTMLSpanElement\n\t{\n\t\treturn this.cache.remember('closeLink', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-message-close-link\" onclick=\"${this.onCloseClick}\">\n\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetReedMoreLink(): HTMLSpanElement\n\t{\n\t\treturn this.cache.remember('readMoreButton', () => {\n\t\t\tif (Type.isStringFilled(this.options.more))\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<a href=\"${Text.encode(this.options.more)}\" target=\"_blank\" class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-read-more-link\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_READ_MORE')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-read-more-link\" onclick=\"${this.options.more}\">\n\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_READ_MORE')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n}"],"names":["CONTEXT_WARNING","MessageCard","options","setEventNamespace","Dom","addClass","getLayout","onCloseClick","bind","Type","isStringFilled","context","angle","icon","append","getIcon","getHeader","getTitle","getDescription","getBody","closeable","getCloseButton","hideActions","more","getActionsContainer","isAllowRestoreState","state","cache","get","id","shown","show","hide","restoreState","remember","Tag","render","header","description","Loc","getMessage","event","preventDefault","emit","set","getCloseLink","getReedMoreLink","Text","encode","onClickHandler","BaseCard","Cache","MemoryCache"],"mappings":";;;;;;;CAMA,IAAMA,eAAe,GAAG,SAAxB;AAEA,KAAaC,WAAb;CAAA;;CAIC,uBACCC,OADD,EAcA;CAAA;;CAAA;CACC,6GAAMA,OAAN;;CACA,UAAKC,iBAAL,CAAuB,gCAAvB;;CACAC,IAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKC,SAAL,EAAb,EAA+B,yBAA/B;CAEA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,2CAApB;;CAEA,QAAIC,cAAI,CAACC,cAAL,CAAoB,MAAKR,OAAL,CAAaS,OAAjC,CAAJ,EACA;CACC,cAAQ,MAAKT,OAAL,CAAaS,OAArB;CAEC,aAAKX,eAAL;CACCI,UAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKC,SAAL,EAAb,EAA+B,yCAA/B;CACA;CAJF;CAMA;;CAED,QAAI,MAAKJ,OAAL,CAAaU,KAAb,KAAuB,KAA3B,EACA;CACCR,MAAAA,aAAG,CAACC,QAAJ,CAAa,MAAKC,SAAL,EAAb,EAA+B,uCAA/B;CACA;;CAED,QAAIG,cAAI,CAACC,cAAL,CAAoB,MAAKR,OAAL,CAAaW,IAAjC,CAAJ,EACA;CACCT,MAAAA,aAAG,CAACU,MAAJ,CAAW,MAAKC,OAAL,EAAX,EAA2B,MAAKC,SAAL,EAA3B;CACA;;CAEDZ,IAAAA,aAAG,CAACU,MAAJ,CAAW,MAAKG,QAAL,EAAX,EAA4B,MAAKD,SAAL,EAA5B;CACAZ,IAAAA,aAAG,CAACU,MAAJ,CAAW,MAAKI,cAAL,EAAX,EAAkC,MAAKC,OAAL,EAAlC;;CAEA,QAAI,MAAKjB,OAAL,CAAakB,SAAb,KAA2B,KAA/B,EACA;CACChB,MAAAA,aAAG,CAACU,MAAJ,CAAW,MAAKO,cAAL,EAAX,EAAkC,MAAKf,SAAL,EAAlC;CACA;;CAED,QAAI,MAAKJ,OAAL,CAAaoB,WAAb,KAA6B,IAA7B,IAAqC,MAAKpB,OAAL,CAAaqB,IAAtD,EACA;CACCnB,MAAAA,aAAG,CAACU,MAAJ,CAAW,MAAKU,mBAAL,EAAX,EAAuC,MAAKlB,SAAL,EAAvC;CACA;;CAED,QAAI,MAAKmB,mBAAL,EAAJ,EACA;CACC,UAAMC,KAAK,GAAGzB,WAAW,CAAC0B,KAAZ,CAAkBC,GAAlB,CAAsB,MAAK1B,OAAL,CAAa2B,EAAnC,EAAuC;CAACC,QAAAA,KAAK,EAAE;CAAR,OAAvC,CAAd;;CACA,UAAIJ,KAAK,CAACI,KAAV,EACA;CACC,cAAKC,IAAL;CACA,OAHD,MAKA;CACC,cAAKC,IAAL;CACA;CACD;;CAnDF;CAoDC;;CAtEF;CAAA;CAAA,0CAyEC;CACC,aAAO,KAAK9B,OAAL,CAAa+B,YAAb,IAA6B,KAAK/B,OAAL,CAAa2B,EAAjD;CACA;CA3EF;CAAA;CAAA,8BA8EC;CAAA;;CACC,aAAO,KAAKF,KAAL,CAAWO,QAAX,CAAoB,MAApB,EAA4B,YAAM;CACxC,eAAOC,aAAG,CAACC,MAAX,4LAC0E,MAAI,CAAClC,OAAL,CAAaW,IADvF;CAGA,OAJM,CAAP;CAKA;CApFF;CAAA;CAAA,+BAuFC;CAAA;;CACC,aAAO,KAAKc,KAAL,CAAWO,QAAX,CAAoB,OAApB,EAA6B,YAAM;CACzC,eAAOC,aAAG,CAACC,MAAX,6JAC8C,MAAI,CAAClC,OAAL,CAAamC,MAD3D;CAGA,OAJM,CAAP;CAKA;CA7FF;CAAA;CAAA,qCAgGC;CAAA;;CACC,aAAO,KAAKV,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,eAAOC,aAAG,CAACC,MAAX,mKACoD,MAAI,CAAClC,OAAL,CAAaoC,WADjE;CAGA,OAJM,CAAP;CAKA;CAtGF;CAAA;CAAA,qCAyGC;CAAA;;CACC,aAAO,KAAKX,KAAL,CAAWO,QAAX,CAAoB,aAApB,EAAmC,YAAM;CAC/C,eAAOC,aAAG,CAACC,MAAX,6OAGa,MAAI,CAAC7B,YAHlB,EAIWgC,eAAG,CAACC,UAAJ,CAAe,2BAAf,CAJX;CAOA,OARM,CAAP;CASA;CAnHF;CAAA;CAAA,iCAqHcC,KArHd,EAsHC;CACCA,MAAAA,KAAK,CAACC,cAAN;CACA,WAAKV,IAAL;CACA,WAAKW,IAAL,CAAU,SAAV;CACA1C,MAAAA,WAAW,CAAC0B,KAAZ,CAAkBiB,GAAlB,CAAsB,KAAK1C,OAAL,CAAa2B,EAAnC,EAAuC;CAACC,QAAAA,KAAK,EAAE;CAAR,OAAvC;CACA;CA3HF;CAAA;CAAA,0CA8HC;CAAA;;CACC,aAAO,KAAKH,KAAL,CAAWO,QAAX,CAAoB,kBAApB,EAAwC,YAAM;CACpD,eAAOC,aAAG,CAACC,MAAX,qMAEI,MAAI,CAAClC,OAAL,CAAakB,SAAb,KAA2B,KAA3B,GAAmC,MAAI,CAACyB,YAAL,EAAnC,GAAyD,EAF7D,EAGI,MAAI,CAAC3C,OAAL,CAAaqB,IAAb,GAAoB,MAAI,CAACuB,eAAL,EAApB,GAA6C,EAHjD;CAMA,OAPM,CAAP;CAQA;CAvIF;CAAA;CAAA,mCA0IC;CAAA;;CACC,aAAO,KAAKnB,KAAL,CAAWO,QAAX,CAAoB,WAApB,EAAiC,YAAM;CAC7C,eAAOC,aAAG,CAACC,MAAX,oPACsG,MAAI,CAAC7B,YAD3G,EAEIgC,eAAG,CAACC,UAAJ,CAAe,2BAAf,CAFJ;CAKA,OANM,CAAP;CAOA;CAlJF;CAAA;CAAA,sCAqJC;CAAA;;CACC,aAAO,KAAKb,KAAL,CAAWO,QAAX,CAAoB,gBAApB,EAAsC,YAAM;CAClD,YAAIzB,cAAI,CAACC,cAAL,CAAoB,MAAI,CAACR,OAAL,CAAaqB,IAAjC,CAAJ,EACA;CACC,iBAAOY,aAAG,CAACC,MAAX,iQACYW,cAAI,CAACC,MAAL,CAAY,MAAI,CAAC9C,OAAL,CAAaqB,IAAzB,CADZ,EAEIgB,eAAG,CAACC,UAAJ,CAAe,gCAAf,CAFJ;CAKA;;CAED,eAAOL,aAAG,CAACC,MAAX,gPACkG,MAAI,CAAClC,OAAL,CAAaqB,IAD/G,EAEIgB,eAAG,CAACC,UAAJ,CAAe,gCAAf,CAFJ;CAKA,OAfM,CAAP;CAgBA;CAtKF;CAAA;CAAA,8BAyKC;CACC,WAAKS,cAAL,CAAoB,IAApB;CACA,WAAKN,IAAL,CAAU,SAAV;CACA;CA5KF;CAAA;CAAA,EAAiCO,iCAAjC;6BAAajD,sBAEG,IAAIkD,eAAK,CAACC,WAAV;;;;;;;;"}