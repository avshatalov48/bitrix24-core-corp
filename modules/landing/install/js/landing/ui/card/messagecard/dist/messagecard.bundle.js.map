{"version":3,"file":"messagecard.bundle.js","sources":["../src/messagecard.js"],"sourcesContent":["import {Cache, Dom, Tag, Text, Type} from 'main.core';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Loc} from 'landing.loc';\n\nimport './css/style.css';\n\nexport class MessageCard extends BaseCard\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t\tmore?: string | () => {},\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Card.MessageCard');\n\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message');\n\n\t\tthis.onCloseClick = this.onCloseClick.bind(this);\n\n\t\tif (this.options.angle === false)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'landing-ui-card-message-without-angle');\n\t\t}\n\n\t\tif (Type.isStringFilled(this.options.icon))\n\t\t{\n\t\t\tDom.append(this.getIcon(), this.getHeader());\n\t\t}\n\n\t\tDom.append(this.getTitle(), this.getHeader());\n\t\tDom.append(this.getDescription(), this.getBody());\n\n\t\tif (this.options.closeable !== false)\n\t\t{\n\t\t\tDom.append(this.getCloseButton(), this.getLayout());\n\t\t}\n\n\t\tif (this.options.hideActions !== true || this.options.more)\n\t\t{\n\t\t\tDom.append(this.getActionsContainer(), this.getLayout());\n\t\t}\n\n\t\tif (this.isAllowRestoreState())\n\t\t{\n\t\t\tconst state = MessageCard.cache.get(this.options.id, {shown: true});\n\t\t\tif (state.shown)\n\t\t\t{\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisAllowRestoreState(): boolean\n\t{\n\t\treturn this.options.restoreState && this.options.id;\n\t}\n\n\tgetIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-icon\" style=\"background-image: url(${this.options.icon})\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-title\">${this.options.header}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-description\">${this.options.description}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"landing-ui-card-message-close-button\" \n\t\t\t\t\tonclick=\"${this.onCloseClick}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonCloseClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.hide();\n\t\tthis.emit('onClose');\n\t\tMessageCard.cache.set(this.options.id, {shown: false});\n\t}\n\n\tgetActionsContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionsContainer', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card-message-actions\">\n\t\t\t\t\t${this.options.closeable !== false ? this.getCloseLink() : ''}\n\t\t\t\t\t${this.options.more ? this.getReedMoreLink() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseLink(): HTMLSpanElement\n\t{\n\t\treturn this.cache.remember('closeLink', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-message-close-link\" onclick=\"${this.onCloseClick}\">\n\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_HIDE')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetReedMoreLink(): HTMLSpanElement\n\t{\n\t\treturn this.cache.remember('readMoreButton', () => {\n\t\t\tif (Type.isStringFilled(this.options.more))\n\t\t\t{\n\t\t\t\treturn Tag.render`\n\t\t\t\t\t<a href=\"${Text.encode(this.options.more)}\" target=\"_blank\" class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-read-more-link\">\n\t\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_READ_MORE')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t}\n\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"ui-link ui-link-secondary ui-link-dashed landing-ui-card-read-more-link\" onclick=\"${this.options.more}\">\n\t\t\t\t\t${Loc.getMessage('LANDING_MESSAGE_CARD_READ_MORE')}\n\t\t\t\t</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n}"],"names":["MessageCard","options","setEventNamespace","Dom","addClass","getLayout","onCloseClick","bind","angle","Type","isStringFilled","icon","append","getIcon","getHeader","getTitle","getDescription","getBody","closeable","getCloseButton","hideActions","more","getActionsContainer","isAllowRestoreState","state","cache","get","id","shown","show","hide","restoreState","remember","Tag","render","header","description","Loc","getMessage","event","preventDefault","emit","set","getCloseLink","getReedMoreLink","Text","encode","onClickHandler","BaseCard","Cache","MemoryCache"],"mappings":"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"}