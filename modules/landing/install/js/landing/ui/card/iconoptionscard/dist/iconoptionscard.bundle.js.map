{"version":3,"file":"iconoptionscard.bundle.js","sources":["../src/iconoptionscard.js"],"sourcesContent":["import {Dom, Event, Tag, Type} from 'main.core';\nimport {BaseCard} from 'landing.ui.card.basecard';\nimport {Loc} from 'landing.loc';\n\nimport 'ui.fonts.opensans';\nimport './css/style.css';\nimport {IconPanel} from 'landing.ui.panel.iconpanel';\n\n/**\n * @memberOf BX.Landing.UI.Card\n */\nexport class IconOptionsCard extends BaseCard\n{\n\toptions: [string] = [];\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.UI.Card.IconOptionsCard');\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () =>\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-card landing-ui-card-icon-options --hide\">\n\t\t\t\t\t<div class=\"landing-ui-card-icon-options-title\">${Loc.getMessage('LANDING_ICONS_CHANGE_STYLE')}</div>\n\t\t\t\t\t<div class=\"landing-ui-card-icon-options-items\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetOptionsLayout(): HTMLElement\n\t{\n\t\treturn this.getLayout().querySelector('.landing-ui-card-icon-options-items');\n\t}\n\n\tgetOptions(): [string]\n\t{\n\t\treturn this.options;\n\t}\n\n\tsetOptions(options: [], activeOption: string)\n\t{\n\t\tif (options.length > 0)\n\t\t{\n\t\t\tthis.options = options;\n\t\t\tDom.clean(this.getOptionsLayout());\n\t\t\tDom.removeClass(this.getLayout(), '--hide');\n\t\t\toptions.forEach(option =>\n\t\t\t{\n\t\t\t\tconst isActive = (option === activeOption) ? ' --active' : '';\n\t\t\t\tconst optionLayout = Tag.render`<span class=\"${option}${isActive}\"></span>`;\n\n\t\t\t\tEvent.bind(optionLayout, 'click', this.onOptionClick.bind(this, option));\n\n\t\t\t\tDom.append(optionLayout, this.getOptionsLayout());\n\t\t\t});\n\t\t}\n\t}\n\n\tonOptionClick(option)\n\t{\n\t\tthis.getOptionsLayout().querySelectorAll('span').forEach(optionItem => {\n\t\t\tDom.removeClass(optionItem, '--active');\n\t\t\tif (Dom.hasClass(optionItem, option))\n\t\t\t{\n\t\t\t\tDom.addClass(optionItem, '--active')\n\t\t\t}\n\t\t});\n\n\t\tthis.emit('onChange', {option: option});\n\t}\n\n\tsetOptionsByItem(classList: [])\n\t{\n\t\tIconPanel\n\t\t\t.getLibraries()\n\t\t\t.then(libraries => {\n\t\t\t\tif (classList.length > 0)\n\t\t\t\t{\n\t\t\t\t\tconst iconOptions = new Set();\n\t\t\t\t\tlet iconOptionActive;\n\n\t\t\t\t\tlibraries.forEach(library =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlibrary.categories.forEach(category =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcategory.items.forEach(item =>\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (Type.isObject(item))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst foundedOptions = item.options.filter(option =>\n\t\t\t\t\t\t\t\t\t\tclassList.every(iconClass => option.split(' ').includes(iconClass))\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (foundedOptions.length > 0)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\titem.options.forEach(option => {iconOptions.add(option)});\n\t\t\t\t\t\t\t\t\t\ticonOptionActive = foundedOptions[0];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\tclassList.every(iconClass => item.split(' ').includes(iconClass))\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ticonOptions.add(item);\n\t\t\t\t\t\t\t\t\t\ticonOptionActive = item;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\n\t\t\t\t\tif (iconOptions.size > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setOptions([...iconOptions], iconOptionActive);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n}\n"],"names":["IconOptionsCard","setEventNamespace","cache","remember","Tag","render","Loc","getMessage","getLayout","querySelector","options","activeOption","length","Dom","clean","getOptionsLayout","removeClass","forEach","option","isActive","optionLayout","Event","bind","onOptionClick","append","querySelectorAll","optionItem","hasClass","addClass","emit","classList","IconPanel","getLibraries","then","libraries","iconOptions","Set","iconOptionActive","library","categories","category","items","item","Type","isObject","foundedOptions","filter","every","iconClass","split","includes","add","size","setOptions","BaseCard"],"mappings":"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"}