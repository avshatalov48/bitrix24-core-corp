(function(){"use strict";BX.namespace("BX.Landing.UI");var e=BX.Landing.Utils.isString;BX.Landing.UI.Style=function(e){this.node="node"in e?e.node:null;this.id="id"in e?e.id:null;this.selector="selector"in e?e.selector:null;this.relativeSelector="relativeSelector"?e.relativeSelector:null;this.clickHandler="onClick"in e?e.onClick:function(){};this.iframe="iframe"in e?e.iframe:null;this.affects=new BX.Landing.Collection.BaseCollection;this.inlineProperties=[];this.computedProperties=[];this.pseudoElement=null;this.onFrameLoad()};BX.Landing.UI.Style.prototype={onFrameLoad:function(){if(this.node){this.node=BX.type.isArray(this.node)?this.node:[this.node]}else{this.node=this.getNode(true)}this.currentTarget=this.node[0];this.node.forEach(function(e){e.addEventListener("click",this.onClick.bind(this));e.addEventListener("mouseover",this.onMouseEnter.bind(this));e.addEventListener("mouseleave",this.onMouseLeave.bind(this))},this);this.value=this.getValue()},getNode:function(e){var t=[].slice.call(this.iframe.document.querySelectorAll(this.relativeSelector));if(this.isSelectGroup()||e){return t}return this.currentTarget?[t[this.getElementIndex(this.currentTarget)]]:[]},getTargetElement:function(){return this.currentTarget},getElementIndex:function(e){return[].indexOf.call(this.getNode(true),e)},onClick:function(e){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){e.preventDefault();e.stopPropagation();this.currentTarget=e.currentTarget;this.clickHandler()}},onMouseEnter:function(e){e.preventDefault();e.stopPropagation();this.highlight(e.currentTarget)},onMouseLeave:function(e){e.preventDefault();e.stopPropagation();this.unHighlight();var t=BX.type.isArray(this.node)&&this.node.length?this.node[0]:this.node;BX.fireEvent(t.parentNode,"mouseenter")},isSelectGroup:function(){return window.localStorage.getItem("selectGroup")==="true"},highlight:function(e){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){if(this.isSelectGroup()){e=this.node}BX.Landing.UI.Highlight.getInstance().show(e)}},unHighlight:function(){BX.Landing.UI.Highlight.getInstance().hide()},isChanged:function(){return JSON.stringify(this.value)!==JSON.stringify(this.getValue())},setInlineProperty:function(e){if(!BX.Type.isArray(e)){e=[e]}e.forEach(function(e){if(this.inlineProperties.indexOf(e)===-1){this.inlineProperties.push(e)}},this)},setComputedProperty:function(e){if(!BX.Type.isArray(e)){e=[e]}e.forEach(function(e){if(this.computedProperties.indexOf(e)===-1){this.computedProperties.push(e)}},this)},setPseudoElement:function(e){this.pseudoElement=e},setValue:function(e,t,i,n,s){this.lastValue=this.lastValue||this.getValue();if(!e){return}n=!!n?n:"";if(n.length){if(n!=="background-image"){this.affects.add(n)}}if(BX.type.isObjectLike(e)){if("from"in e&&"to"in e){e.from+="-min";e.to+="-max"}if(!("style"in e)){var r=Object.keys(e);e=r.map(function(t){return e[t]})}}else{e=[e]}this.getNode().forEach(function(i){if(BX.type.isArray(e)){this.setValueClass(i,e,t,n)}if(BX.type.isObjectLike(e)){if("style"in e){this.setValueStyle(i,e.style)}if("className"in e&&BX.type.isArray(e.className)){this.setValueClass(i,e.className,t,n)}}if(n){if(n!=="background-image"){[].slice.call(i.querySelectorAll("*")).forEach(function(e){e.style[n]=null;if(n==="color"){e.removeAttribute("color")}})}}if(s){s.items.forEach(function(e){i.classList.remove(e.value)})}},this)},setValueClass:function(e,t,i,n){if(BX.type.isArray(i)){e.style[n]=null;t.forEach(function(n){i.forEach(function(i){if(t.indexOf(i.value)===-1&&t.indexOf(i.value+"-min")===-1&&t.indexOf(i.value+"-max")===-1){e.classList.remove(i.value);e.classList.remove(i.value+"-min");e.classList.remove(i.value+"-max")}});e.classList.add(n)})}},setValueStyle:function(e,t){this.inlineProperties.forEach(function(i){if(i in t){e.style.setProperty(i,t[i])}})},getValue:function(e){var t=this.getNode().length?this.getNode()[0]:null;if(t){var i={};var n=false;if(this.inlineProperties.length){var s=t.style;this.inlineProperties.forEach(function(e){i[e]=s.getPropertyValue(e).trim()||null;n=n||!!i[e]})}if(!!e&&this.computedProperties.length&&!n){this.computedProperties.forEach(function(e){i[e]=getComputedStyle(t,this.pseudoElement).getPropertyValue(e)||null}.bind(this))}}return{classList:t?t.className.split(" "):[],affect:this.affects.toArray(),style:i||{}}},getValueForHistory:function(){var e={className:"",style:""};if(this.node[0]){e.className=this.node[0].className;e.style=this.node[0].style.cssText}return e}}})();
//# sourceMappingURL=style_node.map.js