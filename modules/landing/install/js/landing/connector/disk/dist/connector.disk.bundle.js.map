{"version":3,"file":"connector.disk.bundle.js","sources":["../src/disk.js"],"sourcesContent":["\ntype OpenDialogOptions = {\n\tonSelect: () => {},\n};\n\nexport class Disk\n{\n\tstatic openDialog({onSelect}: OpenDialogOptions)\n\t{\n\t\tconst urlSelect = '/bitrix/tools/disk/uf.php?action=selectFile&dialog2=Y&SITE_ID=' + BX.message('SITE_ID');\n\t\tconst dialogName = 'LandingDiskFile';\n\n\t\tBX.ajax.get(urlSelect, 'multiselect=N&dialogName=' + dialogName,\n\t\t\tBX.delegate(function() {\n\t\t\t\tsetTimeout(BX.delegate(function() {\n\t\t\t\t\tBX.DiskFileDialog.obElementBindPopup[dialogName].overlay = {\n\t\t\t\t\t\tbackgroundColor: '#cdcdcd',\n\t\t\t\t\t\topacity: '.1'\n\t\t\t\t\t};\n\t\t\t\t\tBX.DiskFileDialog.obCallback[dialogName] = {\n\t\t\t\t\t\tsaveButton: function(tab, path, selected)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst selectedItem = selected[Object.keys(selected)[0]];\n\t\t\t\t\t\t\tif (!selectedItem)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlet fileId = selectedItem.id;\n\t\t\t\t\t\t\tif (fileId[0] === 'n')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tfileId = fileId.substring(1);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (onSelect)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tonSelect(fileId);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}.bind(this)\n\t\t\t\t\t};\n\t\t\t\t\tBX.DiskFileDialog.openDialog(dialogName);\n\t\t\t\t}, this), 10);\n\t\t\t}, this)\n\t\t);\n\t}\n}\n"],"names":["Disk","onSelect","urlSelect","BX","message","dialogName","ajax","get","delegate","setTimeout","DiskFileDialog","obElementBindPopup","overlay","backgroundColor","opacity","obCallback","saveButton","tab","path","selected","selectedItem","Object","keys","fileId","id","substring","bind","openDialog"],"mappings":";;;;;KAKaA,IAAb;CAAA;CAAA;CAAA;;CAAA;CAAA;CAAA,qCAGC;CAAA,UADmBC,QACnB,QADmBA,QACnB;CACC,UAAMC,SAAS,GAAG,mEAAmEC,EAAE,CAACC,OAAH,CAAW,SAAX,CAArF;CACA,UAAMC,UAAU,GAAG,iBAAnB;CAEAF,MAAAA,EAAE,CAACG,IAAH,CAAQC,GAAR,CAAYL,SAAZ,EAAuB,8BAA8BG,UAArD,EACCF,EAAE,CAACK,QAAH,CAAY,YAAW;CACtBC,QAAAA,UAAU,CAACN,EAAE,CAACK,QAAH,CAAY,YAAW;CACjCL,UAAAA,EAAE,CAACO,cAAH,CAAkBC,kBAAlB,CAAqCN,UAArC,EAAiDO,OAAjD,GAA2D;CAC1DC,YAAAA,eAAe,EAAE,SADyC;CAE1DC,YAAAA,OAAO,EAAE;CAFiD,WAA3D;CAIAX,UAAAA,EAAE,CAACO,cAAH,CAAkBK,UAAlB,CAA6BV,UAA7B,IAA2C;CAC1CW,YAAAA,UAAU,EAAE,UAASC,GAAT,EAAcC,IAAd,EAAoBC,QAApB,EACZ;CACC,kBAAMC,YAAY,GAAGD,QAAQ,CAACE,MAAM,CAACC,IAAP,CAAYH,QAAZ,EAAsB,CAAtB,CAAD,CAA7B;;CACA,kBAAI,CAACC,YAAL,EACA;CACC;CACA;;CAED,kBAAIG,MAAM,GAAGH,YAAY,CAACI,EAA1B;;CACA,kBAAID,MAAM,CAAC,CAAD,CAAN,KAAc,GAAlB,EACA;CACCA,gBAAAA,MAAM,GAAGA,MAAM,CAACE,SAAP,CAAiB,CAAjB,CAAT;CACA;;CAED,kBAAIxB,QAAJ,EACA;CACCA,gBAAAA,QAAQ,CAACsB,MAAD,CAAR;CACA;CAED,aAnBW,CAmBVG,IAnBU,CAmBL,IAnBK;CAD8B,WAA3C;CAsBAvB,UAAAA,EAAE,CAACO,cAAH,CAAkBiB,UAAlB,CAA6BtB,UAA7B;CACA,SA5BU,EA4BR,IA5BQ,CAAD,EA4BA,EA5BA,CAAV;CA6BA,OA9BD,EA8BG,IA9BH,CADD;CAiCA;CAxCF;CAAA;CAAA;;;;;;;;"}