this.BX=this.BX||{};(function(t,e,n,i,r,a){"use strict";function o(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<li style="padding-left: ','px" class="landing-site-selector-item landing-site-selector-item-lower" data-explorer-depth="','" data-explorer-folderId="','" onclick="','">\n\t\t\t\t<span class="ui-icon ui-icon-file-folder"><i></i></span>\n\t\t\t\t<span class="landing-site-selector-item-value"> \n\t\t\t\t\t',"\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t"]);o=function e(){return t};return t}function s(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<li class="landing-site-selector-item" data-explorer-depth="0" data-explorer-siteId="','" onclick="','">\n\t\t\t\t\t\t\t<span class="ui-icon ui-icon-file-folder"><i></i></span>\n\t\t\t\t\t\t\t<span class="landing-site-selector-item-value">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"]);s=function e(){return t};return t}function l(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<ul class="landing-site-selector-list">\n\t\t\t\t',"\n\t\t\t</ul>\n\t\t"]);l=function e(){return t};return t}function c(){var t=babelHelpers.taggedTemplateLiteral(['<div class="landing-explorer-loader">\n\t\t\t<div class="main-ui-loader">\n\t\t\t\t<svg class="main-ui-loader-svg" viewBox="25 25 50 50">\n\t\t\t\t\t<circle class="main-ui-loader-svg-circle" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>']);c=function e(){return t};return t}var d=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getLoader",value:function t(){return a.Tag.render(c())}},{key:"getActionButton",value:function t(e,n){return new BX.UI.Button({id:"landing-explorer-action",size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.SUCCESS,text:e,events:{click:n}})}},{key:"getCancelButton",value:function t(e){return new BX.UI.Button({id:"landing-explorer-cancel",size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LINK,text:a.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_CANCEL"),events:{click:e}})}},{key:"getSiteList",value:function t(e,n){return a.Tag.render(l(),e.map(function(t){return a.Tag.render(s(),t.ID,function(){return n(t.ID)},a.Text.encode(t.TITLE))}))}},{key:"getFolderItem",value:function t(e,n,i){return a.Tag.render(o(),30*n,n,e.ID,function(){return i(e.ID)},a.Text.encode(e.TITLE))}}]);return t}();function u(t,e,n){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n}var p=new WeakSet;var h=new WeakSet;var v=new WeakSet;var f=new WeakSet;var g=new WeakSet;var I=new WeakSet;var m=new WeakSet;var B=new WeakSet;var T=new WeakSet;var L=function(){function t(e){babelHelpers.classCallCheck(this,t);T.add(this);B.add(this);m.add(this);I.add(this);g.add(this);f.add(this);v.add(this);h.add(this);p.add(this);babelHelpers.defineProperty(this,"popupWindow",null);this.type=e.type;this.currentSiteId=e.siteId;this.currentFolderId=e.folderId;if(e.startBreadCrumbs){this.startBreadCrumbs=e.startBreadCrumbs}this.popupWindow=this.getPopupWindow()}babelHelpers.createClass(t,[{key:"getPopupWindow",value:function t(){if(this.popupWindow===null){this.popupWindow=new i.Popup({bindElement:null,className:"ui-message-box landing-explorer--copy-page",content:null,titleBar:"&nbsp;",overlay:{opacity:30},closeIcon:false,contentBackground:"transparent",padding:0})}return this.popupWindow}},{key:"open",value:function t(){this.popupWindow.setContent(d.getLoader());this.popupWindow.show()}},{key:"errorAlert",value:function t(e){r.MessageBox.alert(e[0].error_description,n.Loc.getMessage("LANDING_EXT_EXPLORER_ALERT_TITLE"))}},{key:"setTitle",value:function t(e,i){this.popupWindow.setTitleBar(n.Loc.getMessage("LANDING_EXT_EXPLORER_TITLE_"+e.toUpperCase()).replace("#title#",i))}},{key:"setButtons",value:function t(i,r){var a=this;var o=r.toUpperCase();var s=null;var l=null;this.popupWindow.setButtons([d.getActionButton(r==="moveFolder"?n.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_MOVE"):n.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_"+o),function(){switch(r){case"copy":s="Landing::copy";l={lid:i,toSiteId:a.currentSiteId,toFolderId:a.currentFolderId};break;case"move":s="Landing::move";l={lid:i,toSiteId:a.currentSiteId,toFolderId:a.currentFolderId};break;case"moveFolder":s="Site::moveFolder";l={folderId:i,toFolderId:a.currentFolderId};break}e.Backend.getInstance().action(s,l,{site_id:a.currentSiteId,type:a.type},a.popupWindow.setContent(d.getLoader())).then(function(){a.popupWindow.setContent(d.getLoader());window.location.reload()}).catch(function(t){a.errorAlert(t.result);return Promise.reject(t)})}),d.getCancelButton(function(){a.popupWindow.close()})])}},{key:"copy",value:function t(e){this.setTitle("copy",e.TITLE);this.setButtons(e.ID,"copy");this.open();u(this,h,k).call(this)}},{key:"move",value:function t(e){this.setTitle("move",e.TITLE);this.setButtons(e.ID,"move");this.open();u(this,h,k).call(this)}},{key:"moveFolder",value:function t(e){this.setTitle("move",e.TITLE);this.setButtons(e.ID,"moveFolder");this.open();u(this,h,k).call(this)}}]);return t}();var y=function t(e){var n=this;if(this.startBreadCrumbs[e]){u(this,v,w).call(this,this.currentSiteId,this.startBreadCrumbs[e].PARENT_ID,function(){if(n.startBreadCrumbs[e+1]){u(n,p,t).call(n,e+1)}else{u(n,g,E).call(n,n.startBreadCrumbs[e].ID)}})}};var k=function t(){var n=this;e.Backend.getInstance().action("Site::getList",{params:{filter:{"=TYPE":this.type,"=SPECIAL":"N"},order:{DATE_MODIFY:"desc"}}},{type:this.type}).then(function(t){n.popupWindow.setContent(d.getSiteList(t,u(n,f,b).bind(n)));n.popupWindow.adjustPosition();u(n,T,D).call(n,n.currentSiteId);if(n.startBreadCrumbs.length>0){u(n,I,S).call(n,n.currentSiteId);u(n,p,y).call(n,0)}else{u(n,f,b).call(n,n.currentSiteId)}})};var w=function t(n,i,r){var o=this;e.Backend.getInstance().action("Site::getFolders",{siteId:n,filter:{PARENT_ID:i?i:0}},{site_id:n,type:this.type}).then(function(t){if(t.length<=0){return}var e=i>0?u(o,m,C).call(o,i):u(o,I,S).call(o,n);t.reverse().map(function(t){var n=document.querySelector('.landing-site-selector-item[data-explorer-folderId="'+t.ID+'"]');if(!n){var i=parseInt(a.Dom.attr(e,"data-explorer-depth"))+1;a.Dom.insertAfter(d.getFolderItem(t,i,u(o,g,E).bind(o)),e)}});if(r){r()}})};var b=function t(e){this.currentFolderId=0;u(this,I,S).call(this,e);u(this,v,w).call(this,e)};var E=function t(e){u(this,m,C).call(this,e);u(this,v,w).call(this,this.currentSiteId,e)};var S=function t(e){this.currentSiteId=e;return u(this,B,_).call(this,e,"siteId")};var C=function t(e){this.currentFolderId=e;return u(this,B,_).call(this,e,"folderId")};var _=function t(e,n){var i=document.querySelector(".landing-site-selector-item-selected");var r=document.querySelector(".landing-site-selector-item[data-explorer-"+n+'="'+e+'"]');if(i){a.Dom.removeClass(i,"landing-site-selector-item-selected")}if(r){a.Dom.addClass(r,"landing-site-selector-item-selected")}return r};var D=function t(e){var n=document.querySelector('[data-explorer-siteId="'+e+'"]');if(n){n.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}};t.Explorer=L})(this.BX.Landing=this.BX.Landing||{},BX.Landing,BX.Landing,BX.Main,BX.UI.Dialogs,BX);
//# sourceMappingURL=explorer.bundle.map.js