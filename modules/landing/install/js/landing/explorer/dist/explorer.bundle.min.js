this.BX=this.BX||{};(function(t,e,n,i,r,s){"use strict";var o,a,l,c;var d=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getLoader",value:function t(){return s.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['<div class="landing-explorer-loader">\n\t\t\t<div class="main-ui-loader">\n\t\t\t\t<svg class="main-ui-loader-svg" viewBox="25 25 50 50">\n\t\t\t\t\t<circle class="main-ui-loader-svg-circle" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t</div>'])))}},{key:"getActionButton",value:function t(e,n){return new BX.UI.Button({id:"landing-explorer-action",size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.SUCCESS,text:e,events:{click:n}})}},{key:"getCancelButton",value:function t(e){return new BX.UI.Button({id:"landing-explorer-cancel",size:BX.UI.Button.Size.MEDIUM,color:BX.UI.Button.Color.LINK,text:s.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_CANCEL"),events:{click:e}})}},{key:"getSiteList",value:function t(e,n){return s.Tag.render(a||(a=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<ul class="landing-site-selector-list">\n\t\t\t\t',"\n\t\t\t</ul>\n\t\t"])),e.map((function(t){return s.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<li class="landing-site-selector-item" data-explorer-depth="0" data-explorer-siteId="','" onclick="','">\n\t\t\t\t\t\t\t<span class="ui-icon ui-icon-file-folder"><i></i></span>\n\t\t\t\t\t\t\t<span class="landing-site-selector-item-value">\n\t\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t"])),t.ID,(function(){return n(t.ID)}),s.Text.encode(t.TITLE))})))}},{key:"getFolderItem",value:function t(e,n,i){return s.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<li style="padding-left: ','px" class="landing-site-selector-item landing-site-selector-item-lower" data-explorer-depth="','" data-explorer-folderId="','" onclick="','">\n\t\t\t\t<span class="ui-icon ui-icon-file-folder"><i></i></span>\n\t\t\t\t<span class="landing-site-selector-item-value"> \n\t\t\t\t\t',"\n\t\t\t\t</span>\n\t\t\t</li>\n\t\t"])),30*n,n,e.ID,(function(){return i(e.ID)}),s.Text.encode(e.TITLE))}}]);return t}();function u(t,e){p(t,e);e.add(t)}function p(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(t,e,n){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return n}var g=new WeakSet;var f=new WeakSet;var I=new WeakSet;var v=new WeakSet;var m=new WeakSet;var B=new WeakSet;var T=new WeakSet;var L=new WeakSet;var w=new WeakSet;var y=function(){function t(e){babelHelpers.classCallCheck(this,t);u(this,w);u(this,L);u(this,T);u(this,B);u(this,m);u(this,v);u(this,I);u(this,f);u(this,g);babelHelpers.defineProperty(this,"popupWindow",null);this.type=e.type;this.currentSiteId=e.siteId;this.currentFolderId=e.folderId;if(e.startBreadCrumbs){this.startBreadCrumbs=e.startBreadCrumbs}this.popupWindow=this.getPopupWindow()}babelHelpers.createClass(t,[{key:"getPopupWindow",value:function t(){if(this.popupWindow===null){this.popupWindow=new i.Popup({bindElement:null,className:"ui-message-box landing-explorer--copy-page",content:null,titleBar:"&nbsp;",overlay:{opacity:30},closeIcon:false,contentBackground:"transparent",padding:0})}return this.popupWindow}},{key:"open",value:function t(){this.popupWindow.setContent(d.getLoader());this.popupWindow.show()}},{key:"errorAlert",value:function t(e){var i=this;r.MessageBox.alert(e[0].error_description,n.Loc.getMessage("LANDING_EXT_EXPLORER_ALERT_TITLE"),(function(t,e){e.setWaiting(false);t.close();i.popupWindow.close()}))}},{key:"setTitle",value:function t(e,i){this.popupWindow.setTitleBar(n.Loc.getMessage("LANDING_EXT_EXPLORER_TITLE_"+e.toUpperCase()).replace("#title#",i))}},{key:"setButtons",value:function t(i,r){var s=this;var o=r.toUpperCase();var a=null;var l=null;this.popupWindow.setButtons([d.getActionButton(r==="moveFolder"?n.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_MOVE"):n.Loc.getMessage("LANDING_EXT_EXPLORER_BUTTON_"+o),(function(){switch(r){case"copy":a="Landing::copy";l={lid:i,toSiteId:s.currentSiteId,toFolderId:s.currentFolderId,skipSystem:true};break;case"move":a="Landing::move";l={lid:i,toSiteId:s.currentSiteId,toFolderId:s.currentFolderId};break;case"moveFolder":a="Site::moveFolder";l={folderId:i,toFolderId:s.currentFolderId};break}e.Backend.getInstance().action(a,l,{site_id:s.currentSiteId,type:s.type}).then((function(){s.popupWindow.setContent(d.getLoader())})).then((function(){setTimeout((function(){window.location.reload()}),500)}))["catch"]((function(t){s.errorAlert(t.result);return Promise.reject(t)}))})),d.getCancelButton((function(){s.popupWindow.close()}))])}},{key:"copy",value:function t(e){this.setTitle("copy",e.TITLE);this.setButtons(e.ID,"copy");this.open();h(this,f,b).call(this)}},{key:"move",value:function t(e){this.setTitle("move",e.TITLE);this.setButtons(e.ID,"move");this.open();h(this,f,b).call(this)}},{key:"moveFolder",value:function t(e){this.setTitle("move",e.TITLE);this.setButtons(e.ID,"moveFolder");this.open();h(this,f,b).call(this)}}]);return t}();function k(t){var e=this;if(this.startBreadCrumbs[t]){h(this,I,E).call(this,this.currentSiteId,this.startBreadCrumbs[t].PARENT_ID,(function(){if(e.startBreadCrumbs[t+1]){h(e,g,k).call(e,t+1)}else{h(e,m,C).call(e,e.startBreadCrumbs[t].ID)}}))}}function b(){var t=this;e.Backend.getInstance().action("Site::getList",{params:{filter:{"=TYPE":this.type,"=SPECIAL":"N"},order:{DATE_MODIFY:"desc"}}},{type:this.type}).then((function(e){t.popupWindow.setContent(d.getSiteList(e,h(t,v,S).bind(t)));t.popupWindow.adjustPosition();h(t,w,X).call(t,t.currentSiteId);if(t.startBreadCrumbs.length>0){h(t,B,W).call(t,t.currentSiteId);h(t,g,k).call(t,0)}else{h(t,v,S).call(t,t.currentSiteId)}}))}function E(t,n,i){var r=this;e.Backend.getInstance().action("Site::getFolders",{siteId:t,filter:{PARENT_ID:n?n:0}},{site_id:t,type:this.type}).then((function(e){if(e.length<=0){return}var o=n>0?h(r,T,_).call(r,n):h(r,B,W).call(r,t);e.reverse().map((function(t){var e=document.querySelector('.landing-site-selector-item[data-explorer-folderId="'+t.ID+'"]');if(!e){var n=parseInt(s.Dom.attr(o,"data-explorer-depth"))+1;s.Dom.insertAfter(d.getFolderItem(t,n,h(r,m,C).bind(r)),o)}}));if(i){i()}}))}function S(t){this.currentFolderId=0;h(this,B,W).call(this,t);h(this,I,E).call(this,t)}function C(t){h(this,T,_).call(this,t);h(this,I,E).call(this,this.currentSiteId,t)}function W(t){this.currentSiteId=t;return h(this,L,D).call(this,t,"siteId")}function _(t){this.currentFolderId=t;return h(this,L,D).call(this,t,"folderId")}function D(t,e){var n=document.querySelector(".landing-site-selector-item-selected");var i=document.querySelector(".landing-site-selector-item[data-explorer-"+e+'="'+t+'"]');if(n){s.Dom.removeClass(n,"landing-site-selector-item-selected")}if(i){s.Dom.addClass(i,"landing-site-selector-item-selected")}return i}function X(t){var e=document.querySelector('[data-explorer-siteId="'+t+'"]');if(e){e.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})}}t.Explorer=y})(this.BX.Landing=this.BX.Landing||{},BX.Landing,BX.Landing,BX.Main,BX.UI.Dialogs,BX);
//# sourceMappingURL=explorer.bundle.map.js