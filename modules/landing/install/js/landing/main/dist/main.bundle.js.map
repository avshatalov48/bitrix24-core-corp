{"version":3,"file":"main.bundle.js","sources":["../src/internal/has-block.js","../src/internal/has-create-button.js","../src/internal/on-animation-end.js","../src/internal/is-empty.js","../src/main.js"],"sourcesContent":["/**\n * Checks that element contains block\n * @param {HTMLElement} element\n * @return {boolean}\n */\nexport default function hasBlock(element: HTMLElement): boolean\n{\n\treturn !!element && !!element.querySelector('.block-wrapper');\n}","/**\n * Checks that element contains \"Add new Block\" button\n * @param {HTMLElement} element\n * @return {boolean}\n */\nexport default function hasCreateButton(element: HTMLElement): boolean\n{\n\treturn !!element && !!element.querySelector('button[data-id=\"insert_first_block\"]');\n}","import {Event} from 'main.core';\n\nexport default function onAnimationEnd(element: HTMLElement, animationName: string)\n{\n\treturn new Promise(((resolve) => {\n\t\tconst onAnimationEndListener = (event) => {\n\t\t\tif (!animationName || (event.animationName === animationName))\n\t\t\t{\n\t\t\t\tresolve(event);\n\t\t\t\tEvent.bind(element, 'animationend', onAnimationEndListener);\n\t\t\t}\n\t\t};\n\n\t\tEvent.bind(element, 'animationend', onAnimationEndListener);\n\t}));\n}","import {Type} from 'main.core';\n\nexport default function isEmpty(value): boolean\n{\n\tif (Type.isNil(value))\n\t{\n\t\treturn true;\n\t}\n\n\tif (Type.isArrayLike(value))\n\t{\n\t\treturn !value.length;\n\t}\n\n\tif (Type.isObject(value))\n\t{\n\t\treturn Object.keys(value).length <= 0;\n\t}\n\n\treturn true;\n}","import {Event, Type, Dom, Cache, Tag, Text} from 'main.core';\nimport {Env} from 'landing.env';\nimport {Loc} from 'landing.loc';\nimport {Content} from 'landing.ui.panel.content';\nimport {SliderHacks} from 'landing.sliderhacks';\nimport {PageObject} from 'landing.pageobject';\nimport hasBlock from './internal/has-block';\nimport hasCreateButton from './internal/has-create-button';\nimport onAnimationEnd from './internal/on-animation-end';\nimport isEmpty from './internal/is-empty';\n\nconst LANG_RU = 'ru';\nconst LANG_BY = 'by';\nconst LANG_KZ = 'kz';\nconst LANG_LA = 'la';\nconst LANG_DE = 'de';\nconst LANG_BR = 'br';\nconst LANG_UA = 'ua';\n\nBX.Landing.getMode = () => 'edit';\n\n/**\n * @memberOf BX.Landing\n */\nexport class Main extends Event.EventEmitter\n{\n\tstatic TYPE_PAGE = 'PAGE';\n\tstatic TYPE_STORE = 'STORE';\n\n\tstatic getMode()\n\t{\n\t\treturn 'edit';\n\t}\n\n\tstatic createInstance(id: number)\n\t{\n\t\tconst rootWindow = BX.Landing.PageObject.getRootWindow();\n\t\trootWindow.BX.Landing.Main.instance = new BX.Landing.Main(id);\n\t}\n\n\tstatic getInstance(): Main\n\t{\n\t\tconst rootWindow = BX.Landing.PageObject.getRootWindow();\n\t\trootWindow.BX.Reflection.namespace('BX.Landing.Main');\n\t\tif (rootWindow.BX.Landing.Main.instance)\n\t\t{\n\t\t\treturn rootWindow.BX.Landing.Main.instance;\n\t\t}\n\n\t\trootWindow.BX.Landing.Main.instance = new Main(-1);\n\n\t\treturn rootWindow.BX.Landing.Main.instance;\n\t}\n\n\tconstructor(id: number)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.Main');\n\n\t\tconst options = Env.getInstance().getOptions();\n\n\t\tthis.id = id;\n\t\tthis.options = Object.freeze(options);\n\t\tthis.blocksPanel = null;\n\t\tthis.currentBlock = null;\n\t\tthis.loadedDeps = {};\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tthis.onSliderFormLoaded = this.onSliderFormLoaded.bind(this);\n\t\tthis.onBlockDelete = this.onBlockDelete.bind(this);\n\n\t\tBX.addCustomEvent('Landing.Block:onAfterDelete', this.onBlockDelete);\n\n\t\tthis.adjustEmptyAreas();\n\n\t\tif (this.options.blocks)\n\t\t{\n\t\t\tif (!this.blocksPanel)\n\t\t\t{\n\t\t\t\tthis.blocksPanel = this.createBlocksPanel();\n\t\t\t\tthis.onBlocksListCategoryChange(this.options.default_section);\n\t\t\t\tthis.blocksPanel.layout.hidden = true;\n\t\t\t\tDom.append(this.blocksPanel.layout, document.body);\n\t\t\t}\n\n\t\t\tthis.blocksPanel.content.hidden = false;\n\t\t}\n\n\t\tBX.Landing.UI.Panel.StatusPanel.setLastModified(options.lastModified);\n\t\tBX.Landing.UI.Panel.StatusPanel.getInstance().show();\n\t}\n\n\thideBlocksPanel()\n\t{\n\t\tif (this.blocksPanel)\n\t\t{\n\t\t\treturn this.blocksPanel.hide();\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\tgetLayoutAreas(): Array<HTMLElement>\n\t{\n\t\treturn this.cache.remember('layoutAreas', () => {\n\t\t\treturn [\n\t\t\t\t...document.body.querySelectorAll('.landing-header'),\n\t\t\t\t...document.body.querySelectorAll('.landing-sidebar'),\n\t\t\t\t...document.body.querySelectorAll('.landing-main'),\n\t\t\t\t...document.body.querySelectorAll('.landing-footer'),\n\t\t\t];\n\t\t});\n\t}\n\n\t/**\n\t * Creates insert block button\n\t * @param {HTMLElement} area\n\t * @return {BX.Landing.UI.Button.Plus}\n\t */\n\tcreateInsertBlockButton(area: HTMLElement)\n\t{\n\t\tconst button = new BX.Landing.UI.Button.Plus('insert_first_block', {\n\t\t\ttext: Loc.getMessage('ACTION_BUTTON_CREATE'),\n\t\t});\n\n\t\tbutton.on('click', this.showBlocksPanel.bind(this, null, area, button));\n\t\tbutton.on('mouseover', this.onCreateButtonMouseover.bind(this, area, button));\n\t\tbutton.on('mouseout', this.onCreateButtonMouseout.bind(this, area, button));\n\n\t\treturn button;\n\t}\n\n\tonCreateButtonMouseover(area: HTMLElement, button)\n\t{\n\t\tif (\n\t\t\tDom.hasClass(area, 'landing-header')\n\t\t\t|| Dom.hasClass(area, 'landing-footer')\n\t\t)\n\t\t{\n\t\t\tconst areas = this.getLayoutAreas();\n\n\t\t\tif (areas.length > 1)\n\t\t\t{\n\t\t\t\tconst createText = Loc.getMessage('ACTION_BUTTON_CREATE');\n\n\t\t\t\tif (Dom.hasClass(area, 'landing-main'))\n\t\t\t\t{\n\t\t\t\t\tbutton.setText(\n\t\t\t\t\t\t`${createText} ${Loc.getMessage('LANDING_ADD_BLOCK_TO_MAIN')}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (Dom.hasClass(area, 'landing-header'))\n\t\t\t\t{\n\t\t\t\t\tbutton.setText(\n\t\t\t\t\t\t`${createText} ${Loc.getMessage('LANDING_ADD_BLOCK_TO_HEADER')}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (Dom.hasClass(area, 'landing-sidebar'))\n\t\t\t\t{\n\t\t\t\t\tbutton.setText(\n\t\t\t\t\t\t`${createText} ${Loc.getMessage('LANDING_ADD_BLOCK_TO_SIDEBAR')}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (Dom.hasClass(area, 'landing-footer'))\n\t\t\t\t{\n\t\t\t\t\tbutton.setText(\n\t\t\t\t\t\t`${createText} ${Loc.getMessage('LANDING_ADD_BLOCK_TO_FOOTER')}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tclearTimeout(this.fadeTimeout);\n\t\t\t\tthis.fadeTimeout = setTimeout(() => {\n\t\t\t\t\tDom.addClass(area, 'landing-area-highlight');\n\n\t\t\t\t\tareas\n\t\t\t\t\t\t.filter((currentArea) => currentArea !== area)\n\t\t\t\t\t\t.forEach((currentArea) => {\n\t\t\t\t\t\t\tDom.addClass(currentArea, 'landing-area-fade');\n\t\t\t\t\t\t});\n\t\t\t\t}, 400);\n\t\t\t}\n\t\t}\n\t}\n\n\tonCreateButtonMouseout(area, button)\n\t{\n\t\tclearTimeout(this.fadeTimeout);\n\n\t\tif (Dom.hasClass(area, 'landing-header')\n\t\t\t|| Dom.hasClass(area, 'landing-footer'))\n\t\t{\n\t\t\tconst areas = this.getLayoutAreas();\n\n\t\t\tif (areas.length > 1)\n\t\t\t{\n\t\t\t\tbutton.setText(Loc.getMessage('ACTION_BUTTON_CREATE'));\n\t\t\t\tareas.forEach((currentArea) => {\n\t\t\t\t\tDom.removeClass(currentArea, 'landing-area-highlight');\n\t\t\t\t\tDom.removeClass(currentArea, 'landing-area-fade');\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tinitEmptyArea(area: HTMLElement)\n\t{\n\t\tif (area)\n\t\t{\n\t\t\tarea.innerHTML = '';\n\t\t\tDom.append(this.createInsertBlockButton(area).layout, area);\n\t\t\tDom.addClass(area, 'landing-empty');\n\t\t}\n\t}\n\n\n\t// eslint-disable-next-line class-methods-use-this\n\tdestroyEmptyArea(area: HTMLElement)\n\t{\n\t\tif (area)\n\t\t{\n\t\t\tconst button = area.querySelector('button[data-id=\"insert_first_block\"]');\n\n\t\t\tif (button)\n\t\t\t{\n\t\t\t\tDom.remove(button);\n\t\t\t}\n\n\t\t\tDom.removeClass(area, 'landing-empty');\n\t\t}\n\t}\n\n\n\t/**\n\t * Adjusts areas\n\t */\n\tadjustEmptyAreas()\n\t{\n\t\tthis.getLayoutAreas()\n\t\t\t.filter((area) => {\n\t\t\t\treturn hasBlock(area) && hasCreateButton(area);\n\t\t\t})\n\t\t\t.forEach(this.destroyEmptyArea, this);\n\n\t\tthis.getLayoutAreas()\n\t\t\t.filter((area) => {\n\t\t\t\treturn !hasBlock(area) && !hasCreateButton(area);\n\t\t\t})\n\t\t\t.forEach(this.initEmptyArea, this);\n\n\t\tconst main = document.body.querySelector('main.landing-edit-mode');\n\t\tconst isAllEmpty = !this.getLayoutAreas().some(hasBlock);\n\n\t\tif (main)\n\t\t{\n\t\t\tif (isAllEmpty)\n\t\t\t{\n\t\t\t\tDom.addClass(main, 'landing-empty');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tDom.removeClass(main, 'landing-empty');\n\t\t}\n\t}\n\n\n\t/**\n\t * Enables landing controls\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tenableControls()\n\t{\n\t\tDom.removeClass(document.body, 'landing-ui-hide-controls');\n\t}\n\n\n\t/**\n\t * Disables landing controls\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tdisableControls()\n\t{\n\t\tDom.addClass(document.body, 'landing-ui-hide-controls');\n\t}\n\n\n\t/**\n\t * Checks that landing controls is enabled\n\t * @return {boolean}\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tisControlsEnabled()\n\t{\n\t\treturn !Dom.hasClass(document.body, 'landing-ui-hide-controls');\n\t}\n\n\n\t/**\n\t * Appends block\n\t * @param {addBlockResponse} data\n\t * @param {boolean} [withoutAnimation]\n\t * @returns {HTMLElement}\n\t */\n\tappendBlock(data, withoutAnimation)\n\t{\n\t\tconst block = Tag.render`${data.content}`;\n\t\tblock.id = `block${data.id}`;\n\n\t\tif (!withoutAnimation)\n\t\t{\n\t\t\tDom.addClass(block, 'landing-ui-show');\n\t\t\tonAnimationEnd(block, 'showBlock').then(() => {\n\t\t\t\tDom.removeClass(block, 'landing-ui-show');\n\t\t\t});\n\t\t}\n\n\t\tthis.insertToBlocksFlow(block);\n\n\t\treturn block;\n\t}\n\n\n\t/**\n\t * Shows blocks list panel\n\t * @param {BX.Landing.Block} block\n\t * @param {HTMLElement} [area]\n\t * @param [button]\n\t */\n\tshowBlocksPanel(block, area, button)\n\t{\n\t\tthis.currentBlock = block;\n\t\tthis.currentArea = area;\n\t\tthis.blocksPanel.show();\n\n\t\tthis.disableAddBlockButtons();\n\n\t\tif (!!area && !!button)\n\t\t{\n\t\t\tthis.onCreateButtonMouseout(area, button);\n\t\t}\n\t}\n\n\tdisableAddBlockButtons()\n\t{\n\t\tPageObject.getBlocks().forEach((block) => {\n\t\t\tconst panel = block.panels.get('create_action');\n\t\t\tif (panel)\n\t\t\t{\n\t\t\t\tconst button = panel.buttons.get('insert_after');\n\t\t\t\tif (button)\n\t\t\t\t{\n\t\t\t\t\tbutton.disable();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tenableAddBlockButtons()\n\t{\n\t\tPageObject.getBlocks().forEach((block) => {\n\t\t\tconst panel = block.panels.get('create_action');\n\t\t\tif (panel)\n\t\t\t{\n\t\t\t\tconst button = panel.buttons.get('insert_after');\n\t\t\t\tif (button)\n\t\t\t\t{\n\t\t\t\t\tbutton.enable();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Creates blocks list panel\n\t * @returns {BX.Landing.UI.Panel.Content}\n\t */\n\tcreateBlocksPanel()\n\t{\n\t\tconst {blocks} = this.options;\n\t\tconst categories = Object.keys(blocks);\n\n\t\tconst panel = new Content('blocks_panel', {\n\t\t\ttitle: Loc.getMessage('LANDING_CONTENT_BLOCKS_TITLE'),\n\t\t\tclassName: 'landing-ui-panel-block-list',\n\t\t\tscrollAnimation: true,\n\t\t});\n\n\t\tpanel.subscribe('onCancel', () => {\n\t\t\tthis.enableAddBlockButtons();\n\t\t});\n\n\t\tcategories.forEach((categoryId) => {\n\t\t\tconst hasItems = !isEmpty(blocks[categoryId].items);\n\t\t\tconst isPopular = categoryId === 'popular';\n\t\t\tconst isSeparator = blocks[categoryId].separator;\n\n\t\t\tif ((hasItems && !isPopular) || isSeparator)\n\t\t\t{\n\t\t\t\tpanel.appendSidebarButton(\n\t\t\t\t\tthis.createBlockPanelSidebarButton(categoryId, blocks[categoryId]),\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tpanel.appendSidebarButton(\n\t\t\tnew BX.Landing.UI.Button.SidebarButton('feedback_button', {\n\t\t\t\tclassName: 'landing-ui-button-sidebar-feedback',\n\t\t\t\ttext: Loc.getMessage('LANDING_BLOCKS_LIST_FEEDBACK_BUTTON'),\n\t\t\t\tonClick: this.showFeedbackForm.bind(this),\n\t\t\t}),\n\t\t);\n\n\t\treturn panel;\n\t}\n\n\n\t/**\n\t * Shows feedback form\n\t * @param data\n\t */\n\tshowSliderFeedbackForm(data = {})\n\t{\n\t\tif (!this.sliderFeedbackInited)\n\t\t{\n\t\t\tthis.sliderFeedbackInited = true;\n\t\t\tthis.sliderFeedback = new Content('slider_feedback', {\n\t\t\t\ttitle: Loc.getMessage('LANDING_PANEL_FEEDBACK_TITLE'),\n\t\t\t\tclassName: 'landing-ui-panel-feedback',\n\t\t\t});\n\t\t\tDom.append(this.sliderFeedback.layout, document.body);\n\t\t\tthis.sliderFormLoader = new BX.Loader({target: this.sliderFeedback.content});\n\t\t\tthis.sliderFormLoader.show();\n\t\t\tthis.initFeedbackForm();\n\t\t}\n\n\t\tdata.bitrix24 = this.options.server_name;\n\t\tdata.siteId = this.options.site_id;\n\t\tdata.siteUrl = this.options.url;\n\t\tdata.siteTemplate = this.options.xml_id;\n\t\tdata.productType = this.options.productType || 'Undefined';\n\t\tdata.typeproduct = (() => {\n\t\t\tif (this.options.params.type === 'GROUP')\n\t\t\t{\n\t\t\t\treturn 'KNOWLEDGE_GROUP';\n\t\t\t}\n\n\t\t\treturn this.options.params.type;\n\t\t})();\n\n\t\tconst form = this.getFeedbackFormOptions();\n\n\t\twindow.b24formFeedBack({\n\t\t\tid: form.id,\n\t\t\tlang: form.lang,\n\t\t\tsec: form.sec,\n\t\t\ttype: 'slider_inline',\n\t\t\tnode: this.sliderFeedback.content,\n\t\t\thandlers: {\n\t\t\t\tload: this.onSliderFormLoaded.bind(this),\n\t\t\t},\n\t\t\tpresets: Type.isPlainObject(data) ? data : {},\n\t\t});\n\n\t\tthis.sliderFeedback.show();\n\t}\n\n\n\t/**\n\t * Gets feedback form options\n\t * @return {{id: string, sec: string, lang: string}}\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tgetFeedbackFormOptions()\n\t{\n\t\tconst currentLanguage = Loc.getMessage('LANGUAGE_ID');\n\t\tlet options = {id: '16', sec: '3h483y', lang: 'en'};\n\n\t\tswitch (currentLanguage)\n\t\t{\n\t\t\tcase LANG_RU:\n\t\t\tcase LANG_BY:\n\t\t\tcase LANG_KZ:\n\t\t\t\toptions = {id: '8', sec: 'x80yjw', lang: 'ru'};\n\t\t\t\tbreak;\n\t\t\tcase LANG_LA:\n\t\t\t\toptions = {id: '14', sec: 'wu561i', lang: 'la'};\n\t\t\t\tbreak;\n\t\t\tcase LANG_DE:\n\t\t\t\toptions = {id: '10', sec: 'eraz2q', lang: 'de'};\n\t\t\t\tbreak;\n\t\t\tcase LANG_BR:\n\t\t\t\toptions = {id: '12', sec: 'r6wvge', lang: 'br'};\n\t\t\t\tbreak;\n\t\t\tcase LANG_UA:\n\t\t\t\toptions = {id: '18', sec: 'd9e09o', lang: 'ua'};\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn options;\n\t}\n\n\n\t/**\n\t * Handles feedback loaded event\n\t */\n\tonSliderFormLoaded()\n\t{\n\t\tthis.sliderFormLoader.hide();\n\t}\n\n\n\t/**\n\t * Shows feedback form for blocks list panel\n\t */\n\tshowFeedbackForm()\n\t{\n\t\tthis.showSliderFeedbackForm({target: 'blocksList'});\n\t}\n\n\n\t/**\n\t * Initialises feedback form\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tinitFeedbackForm()\n\t{\n\t\t((w, d, u, b) => {\n\t\t\tw.Bitrix24FormObject = b; w[b] = w[b] || function() {\n\t\t\t\t// eslint-disable-next-line prefer-rest-params\n\t\t\t\targuments[0].ref = u;\n\t\t\t\t// eslint-disable-next-line prefer-rest-params\n\t\t\t\t(w[b].forms = w[b].forms || []).push(arguments[0]);\n\t\t\t};\n\t\t\tif (w[b].forms) return;\n\t\t\tconst s = d.createElement('script');\n\t\t\tconst r = 1 * new Date(); s.async = 1; s.src = `${u}?${r}`;\n\t\t\tconst h = d.getElementsByTagName('script')[0]; h.parentNode.insertBefore(s, h);\n\t\t})(window, document, 'https://landing.bitrix24.ru/bitrix/js/crm/form_loader.js', 'b24formFeedBack');\n\t}\n\n\n\t/**\n\t * Creates blocks list panel sidebar button\n\t * @param {string} category\n\t * @param {object} options\n\t * @returns {BX.Landing.UI.Button.SidebarButton}\n\t */\n\tcreateBlockPanelSidebarButton(category, options)\n\t{\n\t\treturn new BX.Landing.UI.Button.SidebarButton(category, {\n\t\t\ttext: options.name,\n\t\t\tchild: !options.separator,\n\t\t\tclassName: options.new ? 'landing-ui-new-section' : '',\n\t\t\tonClick: this.onBlocksListCategoryChange.bind(this, category),\n\t\t});\n\t}\n\n\n\t/**\n\t * Handles event on blocks list category change\n\t * @param {string} category - Category id\n\t */\n\tonBlocksListCategoryChange(category)\n\t{\n\t\tthis.blocksPanel.content.hidden = false;\n\n\t\tthis.blocksPanel.sidebarButtons.forEach((button) => {\n\t\t\tconst action = button.id === category ? 'add' : 'remove';\n\t\t\tbutton.layout.classList[action]('landing-ui-active');\n\t\t});\n\n\t\tthis.blocksPanel.content.innerHTML = '';\n\n\t\tif (category === 'last')\n\t\t{\n\t\t\tif (!this.lastBlocks)\n\t\t\t{\n\t\t\t\tthis.lastBlocks = Object.keys(this.options.blocks.last.items);\n\t\t\t}\n\n\t\t\tthis.lastBlocks = [...new Set(this.lastBlocks)];\n\n\t\t\tthis.lastBlocks.forEach((blockKey) => {\n\t\t\t\tconst block = this.getBlockFromRepository(blockKey);\n\t\t\t\tthis.blocksPanel.appendCard(this.createBlockCard(blockKey, block));\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tObject.keys(this.options.blocks[category].items).forEach((blockKey) => {\n\t\t\tconst block = this.options.blocks[category].items[blockKey];\n\t\t\tthis.blocksPanel.appendCard(this.createBlockCard(blockKey, block));\n\t\t});\n\n\t\tif (this.blocksPanel.content.scrollTop)\n\t\t{\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tthis.blocksPanel.content.scrollTop = 0;\n\t\t\t});\n\t\t}\n\t}\n\n\t// eslint-disable-next-line consistent-return\n\tgetBlockFromRepository(code)\n\t{\n\t\tconst {blocks} = this.options;\n\t\tconst categories = Object.keys(blocks);\n\t\tconst category = categories.find((categoryId) => {\n\t\t\treturn code in blocks[categoryId].items;\n\t\t});\n\n\t\tif (category)\n\t\t{\n\t\t\treturn blocks[category].items[code];\n\t\t}\n\t}\n\n\n\t/**\n\t * Handles copy block event\n\t * @param {BX.Landing.Block} block\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tonCopyBlock(block)\n\t{\n\t\twindow.localStorage.landingBlockId = block.id;\n\t\twindow.localStorage.landingBlockName = block.manifest.block.name;\n\t\twindow.localStorage.landingBlockAction = 'copy';\n\n\t\ttry\n\t\t{\n\t\t\twindow.localStorage.requiredUserAction = JSON.stringify(\n\t\t\t\tblock.requiredUserActionOptions,\n\t\t\t);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\twindow.localStorage.requiredUserAction = '';\n\t\t}\n\t}\n\n\n\t/**\n\t * Handles cut block event\n\t * @param {BX.Landing.Block} block\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tonCutBlock(block)\n\t{\n\t\twindow.localStorage.landingBlockId = block.id;\n\t\twindow.localStorage.landingBlockName = block.manifest.block.name;\n\t\twindow.localStorage.landingBlockAction = 'cut';\n\n\t\ttry\n\t\t{\n\t\t\twindow.localStorage.requiredUserAction = JSON.stringify(\n\t\t\t\tblock.requiredUserActionOptions,\n\t\t\t);\n\t\t}\n\t\tcatch (err)\n\t\t{\n\t\t\twindow.localStorage.requiredUserAction = '';\n\t\t}\n\n\t\tBX.Landing.PageObject.getBlocks().remove(block);\n\t\tDom.remove(block.node);\n\t\tBX.onCustomEvent('Landing.Block:onAfterDelete', [block]);\n\t}\n\n\n\t/**\n\t * Handles paste block event\n\t * @param {BX.Landing.Block} block\n\t */\n\tonPasteBlock(block)\n\t{\n\t\tif (window.localStorage.landingBlockId)\n\t\t{\n\t\t\tlet action = 'Landing::copyBlock';\n\n\t\t\tif (window.localStorage.landingBlockAction === 'cut')\n\t\t\t{\n\t\t\t\taction = 'Landing::moveBlock';\n\t\t\t}\n\n\t\t\tconst requestBody = {};\n\n\t\t\trequestBody[action] = {\n\t\t\t\taction,\n\t\t\t\tdata: {\n\t\t\t\t\tlid: block.lid || BX.Landing.Main.getInstance().id,\n\t\t\t\t\tblock: window.localStorage.landingBlockId,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\tAFTER_ID: block.id,\n\t\t\t\t\t\tRETURN_CONTENT: 'Y',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\tBX.Landing.Backend.getInstance()\n\t\t\t\t.batch(action, requestBody, {action})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tthis.currentBlock = block;\n\t\t\t\t\treturn this.addBlock(res[action].result.content);\n\t\t\t\t});\n\t\t}\n\t}\n\n\n\t/**\n\t * Adds block from server response\n\t * @param {addBlockResponse} res\n\t * @param {boolean} [preventHistory = false]\n\t * @param {boolean} [withoutAnimation = false]\n\t * @return {Promise<T>}\n\t */\n\taddBlock(res, preventHistory, withoutAnimation)\n\t{\n\t\tif (this.lastBlocks)\n\t\t{\n\t\t\tthis.lastBlocks.unshift(res.manifest.code);\n\t\t}\n\n\t\tconst self = this;\n\t\tconst block = this.appendBlock(res, withoutAnimation);\n\n\t\treturn this.loadBlockDeps(res)\n\t\t\t.then((blockRes) => {\n\t\t\t\tif (!Type.isBoolean(preventHistory) || preventHistory === false)\n\t\t\t\t{\n\t\t\t\t\tlet lid = null;\n\t\t\t\t\tlet id = null;\n\n\t\t\t\t\tif (self.currentBlock)\n\t\t\t\t\t{\n\t\t\t\t\t\tlid = self.currentBlock.lid;\n\t\t\t\t\t\tid = self.currentBlock.id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (self.currentArea)\n\t\t\t\t\t{\n\t\t\t\t\t\tlid = Dom.attr(self.currentArea, 'data-landing');\n\t\t\t\t\t\tid = Dom.attr(self.currentArea, 'data-site');\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add history entry\n\t\t\t\t\tBX.Landing.History.getInstance().push(\n\t\t\t\t\t\tnew BX.Landing.History.Entry({\n\t\t\t\t\t\t\tblock: blockRes.id,\n\t\t\t\t\t\t\tselector: `#block${blockRes.id}`,\n\t\t\t\t\t\t\tcommand: 'addBlock',\n\t\t\t\t\t\t\tundo: '',\n\t\t\t\t\t\t\tredo: {\n\t\t\t\t\t\t\t\tcurrentBlock: id,\n\t\t\t\t\t\t\t\tlid,\n\t\t\t\t\t\t\t\tcode: blockRes.manifest.code,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tself.currentBlock = null;\n\t\t\t\tself.currentArea = null;\n\n\t\t\t\tconst blockId = parseInt(res.id);\n\t\t\t\tconst oldBlock = BX.Landing.PageObject.getBlocks().get(blockId);\n\n\t\t\t\tif (oldBlock)\n\t\t\t\t{\n\t\t\t\t\tDom.remove(oldBlock.node);\n\t\t\t\t\tBX.Landing.PageObject.getBlocks().remove(oldBlock);\n\t\t\t\t}\n\n\t\t\t\t// Init block entity\n\t\t\t\tvoid new BX.Landing.Block(block, {\n\t\t\t\t\tid: blockId,\n\t\t\t\t\trequiredUserAction: res.requiredUserAction,\n\t\t\t\t\tmanifest: res.manifest,\n\t\t\t\t\taccess: res.access,\n\t\t\t\t\tactive: Text.toBoolean(res.active),\n\t\t\t\t\tanchor: res.anchor,\n\t\t\t\t\tdynamicParams: res.dynamicParams,\n\t\t\t\t});\n\n\t\t\t\treturn self.runBlockScripts(res)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\treturn block;\n\t\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.warn(err);\n\t\t\t});\n\t}\n\n\n\t/**\n\t * Handles edd block event\n\t * @param {string} blockCode\n\t * @param {*} [restoreId]\n\t * @param {?boolean} [preventHistory = false]\n\t * @return {Promise<BX.Landing.Block>}\n\t */\n\tonAddBlock(blockCode, restoreId, preventHistory)\n\t{\n\t\tconst id = Text.toNumber(restoreId);\n\n\t\tthis.hideBlocksPanel();\n\n\t\treturn this.showBlockLoader()\n\t\t\t.then(this.loadBlock(blockCode, id))\n\t\t\t.then((res) => {\n\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tresolve(res);\n\t\t\t\t\t}, 500);\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then((res) => {\n\t\t\t\tconst p = this.addBlock(res, preventHistory);\n\t\t\t\tthis.adjustEmptyAreas();\n\t\t\t\tvoid this.hideBlockLoader();\n\t\t\t\tthis.enableAddBlockButtons();\n\t\t\t\treturn p;\n\t\t\t});\n\t}\n\n\n\t/**\n\t * Inserts element to blocks flow.\n\t * Element can be inserted after current block or after last block\n\t * @param {HTMLElement} element\n\t */\n\tinsertToBlocksFlow(element)\n\t{\n\t\tconst insertAfterCurrentBlock = (\n\t\t\tthis.currentBlock\n\t\t\t&& this.currentBlock.node\n\t\t\t&& this.currentBlock.node.parentNode\n\t\t);\n\n\t\tif (insertAfterCurrentBlock)\n\t\t{\n\t\t\tDom.insertAfter(element, this.currentBlock.node);\n\t\t\treturn;\n\t\t}\n\n\t\tDom.prepend(element, this.currentArea);\n\t}\n\n\n\t/**\n\t * Gets block loader\n\t * @return {HTMLElement}\n\t */\n\tgetBlockLoader()\n\t{\n\t\tif (!this.blockLoader)\n\t\t{\n\t\t\tthis.blockLoader = new BX.Loader({size: 60});\n\t\t\tthis.blockLoaderContainer = Dom.create('div', {\n\t\t\t\tprops: {className: 'landing-block-loader-container'},\n\t\t\t\tchildren: [this.blockLoader.layout],\n\t\t\t});\n\t\t}\n\n\t\treturn this.blockLoaderContainer;\n\t}\n\n\n\t/**\n\t * Shows block loader\n\t * @return {Function}\n\t */\n\tshowBlockLoader()\n\t{\n\t\tthis.insertToBlocksFlow(this.getBlockLoader());\n\t\tthis.blockLoader.show();\n\t\treturn Promise.resolve();\n\t}\n\n\n\t/**\n\t * Hides block loader\n\t * @return {Function}\n\t */\n\thideBlockLoader()\n\t{\n\t\tDom.remove(this.getBlockLoader());\n\t\tthis.blockLoader = null;\n\t\treturn Promise.resolve();\n\t}\n\n\n\t/**\n\t * Loads block dependencies\n\t * @param {addBlockResponse} data\n\t * @returns {Promise<addBlockResponse>}\n\t */\n\tloadBlockDeps(data)\n\t{\n\t\tconst ext = BX.processHTML(data.content_ext);\n\n\t\tif (BX.type.isArray(ext.SCRIPT))\n\t\t{\n\t\t\text.SCRIPT = ext.SCRIPT.filter((item) => {\n\t\t\t\treturn !item.isInternal;\n\t\t\t});\n\t\t}\n\n\t\tlet loadedScripts = 0;\n\t\tconst scriptsCount = (data.js.length + ext.SCRIPT.length + ext.STYLE.length + data.css.length);\n\t\tlet resPromise = null;\n\n\t\tif (!this.loadedDeps[data.manifest.code] && scriptsCount > 0)\n\t\t{\n\t\t\tresPromise = new Promise(((resolve) => {\n\t\t\t\tfunction onLoad()\n\t\t\t\t{\n\t\t\t\t\tloadedScripts += 1;\n\n\t\t\t\t\tif (loadedScripts === scriptsCount)\n\t\t\t\t\t{\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (scriptsCount > loadedScripts)\n\t\t\t\t{\n\t\t\t\t\t// Load extensions files\n\t\t\t\t\text.SCRIPT.forEach((item) => {\n\t\t\t\t\t\tif (!item.isInternal)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tBX.loadScript(item.JS, onLoad);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\text.STYLE.forEach((item) => {\n\t\t\t\t\t\tBX.loadScript(item, onLoad);\n\t\t\t\t\t});\n\n\t\t\t\t\t// Load block files\n\t\t\t\t\tdata.css.forEach((item) => {\n\t\t\t\t\t\tBX.loadScript(item, onLoad);\n\t\t\t\t\t});\n\n\t\t\t\t\tdata.js.forEach((item) => {\n\t\t\t\t\t\tBX.loadScript(item, onLoad);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tonLoad();\n\t\t\t\t}\n\n\t\t\t\tthis.loadedDeps[data.manifest.code] = true;\n\t\t\t}));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresPromise = Promise.resolve(data);\n\t\t}\n\n\t\treturn resPromise;\n\t}\n\n\n\t/**\n\t * Executes block scripts\n\t * @param data\n\t * @return {Promise}\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\trunBlockScripts(data)\n\t{\n\t\treturn new Promise(((resolve) => {\n\t\t\tconst scripts = BX.processHTML(data.content).SCRIPT;\n\n\t\t\tif (scripts.length)\n\t\t\t{\n\t\t\t\tBX.ajax.processScripts(scripts, undefined, () => {\n\t\t\t\t\tresolve(data);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresolve(data);\n\t\t\t}\n\t\t}));\n\t}\n\n\n\t/**\n\t * Load new block from server\n\t * @param {string} blockCode\n\t * @param {int} [restoreId]\n\t * @returns {Function}\n\t */\n\tloadBlock(blockCode, restoreId)\n\t{\n\t\treturn () => {\n\t\t\tlet lid = this.id;\n\t\t\tlet siteId = this.options.site_id;\n\n\t\t\tif (this.currentBlock)\n\t\t\t{\n\t\t\t\tlid = this.currentBlock.lid;\n\t\t\t\tsiteId = this.currentBlock.siteId;\n\t\t\t}\n\n\t\t\tif (this.currentArea)\n\t\t\t{\n\t\t\t\tlid = Dom.attr(this.currentArea, 'data-landing');\n\t\t\t\tsiteId = Dom.attr(this.currentArea, 'data-site');\n\t\t\t}\n\n\t\t\tlet requestBody = {\n\t\t\t\tlid,\n\t\t\t\tsiteId,\n\t\t\t};\n\n\t\t\tconst fields = {\n\t\t\t\tACTIVE: 'Y',\n\t\t\t\tCODE: blockCode,\n\t\t\t\tAFTER_ID: this.currentBlock ? this.currentBlock.id : 0,\n\t\t\t\tRETURN_CONTENT: 'Y',\n\t\t\t};\n\n\t\t\tif (!restoreId)\n\t\t\t{\n\t\t\t\trequestBody.fields = fields;\n\t\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t\t.action('Landing::addBlock', requestBody, {code: blockCode});\n\t\t\t}\n\n\t\t\trequestBody = {\n\t\t\t\tundeleete: {\n\t\t\t\t\taction: 'Landing::markUndeletedBlock',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tlid,\n\t\t\t\t\t\tblock: restoreId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tgetContent: {\n\t\t\t\t\taction: 'Block::getContent',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tblock: restoreId,\n\t\t\t\t\t\tlid,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\teditMode: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn BX.Landing.Backend.getInstance()\n\t\t\t\t.batch('Landing::addBlock', requestBody, {code: blockCode})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tres.getContent.result.id = restoreId;\n\t\t\t\t\treturn res.getContent.result;\n\t\t\t\t});\n\t\t};\n\t}\n\n\n\t/**\n\t * Creates block preview card\n\t * @param {string} blockKey - Block key (folder name)\n\t * @param {{name: string, [preview]: ?string, [new]: ?boolean}} block - Object with block data\n\t * @param {string} [mode]\n\t * @returns {BX.Landing.UI.Card.BlockPreviewCard}\n\t */\n\tcreateBlockCard(blockKey, block, mode)\n\t{\n\t\treturn new BX.Landing.UI.Card.BlockPreviewCard({\n\t\t\ttitle: block.name,\n\t\t\timage: block.preview,\n\t\t\tcode: blockKey,\n\t\t\tmode,\n\t\t\tisNew: block.new === true,\n\t\t\tonClick: this.onAddBlock.bind(this, blockKey),\n\t\t});\n\t}\n\n\n\t/**\n\t * Handles block delete event\n\t */\n\tonBlockDelete(block)\n\t{\n\t\tif (!block.parent.querySelector('.block-wrapper'))\n\t\t{\n\t\t\tthis.adjustEmptyAreas();\n\t\t}\n\t}\n\n\n\t/**\n\t * Shows page overlay\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\tshowOverlay()\n\t{\n\t\tconst main = document.querySelector('main.landing-edit-mode');\n\t\tif (main)\n\t\t{\n\t\t\tDom.addClass(main, 'landing-ui-overlay');\n\t\t}\n\t}\n\n\n\t/**\n\t * Hides page overlay\n\t */\n\t// eslint-disable-next-line class-methods-use-this\n\thideOverlay()\n\t{\n\t\tconst main = document.querySelector('main.landing-edit-mode');\n\t\tif (main)\n\t\t{\n\t\t\tDom.removeClass(main, 'landing-ui-overlay');\n\t\t}\n\t}\n\n\treloadSlider(url: string): Promise<any>\n\t{\n\t\treturn SliderHacks.reloadSlider(url, window.parent);\n\t}\n}"],"names":["hasBlock","element","querySelector","hasCreateButton","onAnimationEnd","animationName","Promise","resolve","onAnimationEndListener","event","Event","bind","isEmpty","value","Type","isNil","isArrayLike","length","isObject","Object","keys","LANG_RU","LANG_BY","LANG_KZ","LANG_LA","LANG_DE","LANG_BR","LANG_UA","BX","Landing","getMode","Main","id","rootWindow","PageObject","getRootWindow","instance","Reflection","namespace","setEventNamespace","options","Env","getInstance","getOptions","freeze","blocksPanel","currentBlock","loadedDeps","cache","Cache","MemoryCache","onSliderFormLoaded","onBlockDelete","addCustomEvent","adjustEmptyAreas","blocks","createBlocksPanel","onBlocksListCategoryChange","default_section","layout","hidden","Dom","append","document","body","content","UI","Panel","StatusPanel","setLastModified","lastModified","show","hide","remember","querySelectorAll","area","button","Button","Plus","text","Loc","getMessage","on","showBlocksPanel","onCreateButtonMouseover","onCreateButtonMouseout","hasClass","areas","getLayoutAreas","createText","setText","clearTimeout","fadeTimeout","setTimeout","addClass","filter","currentArea","forEach","removeClass","innerHTML","createInsertBlockButton","remove","destroyEmptyArea","initEmptyArea","main","isAllEmpty","some","data","withoutAnimation","block","Tag","render","then","insertToBlocksFlow","disableAddBlockButtons","getBlocks","panel","panels","get","buttons","disable","enable","categories","Content","title","className","scrollAnimation","subscribe","enableAddBlockButtons","categoryId","hasItems","items","isPopular","isSeparator","separator","appendSidebarButton","createBlockPanelSidebarButton","SidebarButton","onClick","showFeedbackForm","sliderFeedbackInited","sliderFeedback","sliderFormLoader","Loader","target","initFeedbackForm","bitrix24","server_name","siteId","site_id","siteUrl","url","siteTemplate","xml_id","productType","typeproduct","params","type","form","getFeedbackFormOptions","window","b24formFeedBack","lang","sec","node","handlers","load","presets","isPlainObject","currentLanguage","showSliderFeedbackForm","w","d","u","b","Bitrix24FormObject","arguments","ref","forms","push","s","createElement","r","Date","async","src","h","getElementsByTagName","parentNode","insertBefore","category","name","child","new","sidebarButtons","action","classList","lastBlocks","last","Set","blockKey","getBlockFromRepository","appendCard","createBlockCard","scrollTop","requestAnimationFrame","code","find","localStorage","landingBlockId","landingBlockName","manifest","landingBlockAction","requiredUserAction","JSON","stringify","requiredUserActionOptions","err","onCustomEvent","requestBody","lid","AFTER_ID","RETURN_CONTENT","Backend","batch","res","addBlock","result","preventHistory","unshift","self","appendBlock","loadBlockDeps","blockRes","isBoolean","attr","History","Entry","selector","command","undo","redo","blockId","parseInt","oldBlock","Block","access","active","Text","toBoolean","anchor","dynamicParams","runBlockScripts","catch","console","warn","blockCode","restoreId","toNumber","hideBlocksPanel","showBlockLoader","loadBlock","p","hideBlockLoader","insertAfterCurrentBlock","insertAfter","prepend","blockLoader","size","blockLoaderContainer","create","props","children","getBlockLoader","ext","processHTML","content_ext","isArray","SCRIPT","item","isInternal","loadedScripts","scriptsCount","js","STYLE","css","resPromise","onLoad","loadScript","JS","scripts","ajax","processScripts","undefined","fields","ACTIVE","CODE","undeleete","getContent","editMode","mode","Card","BlockPreviewCard","image","preview","isNew","onAddBlock","parent","SliderHacks","reloadSlider","EventEmitter"],"mappings":"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"}