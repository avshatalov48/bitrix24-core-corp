{"version":3,"file":"colorpickertheme.bundle.js","sources":["../src/colorpickertheme.js"],"sourcesContent":["import './css/style.css';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\n/**\n * ColorPicker for Theme site.\n */\nexport class ColorPickerTheme extends EventEmitter\n{\n\tstatic DEFAULT_COLOR_PICKER_COLOR = '#f25a8f';\n\tstatic MATCH_HEX = /#?([0-9A-F]{3}){1,2}$/i;\n\n\tconstructor(node: HTMLElement, allColors, currentColor)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.ColorPickerTheme');\n\n\t\tthis.element = node;\n\t\tthis.input = this.element.firstElementChild;\n\t\tthis.allColors = allColors;\n\t\tthis.currentColor = currentColor;\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.setMetric();\n\t\tconst color = this.initPreviewColor();\n\t\tconst active = this.isActive();\n\n\t\tthis.element.style.backgroundColor = color;\n\t\tthis.element.dataset.value = color;\n\t\tthis.element.classList.add('landing-colorpicker-theme');\n\t\tif (active)\n\t\t{\n\t\t\tthis.input.setAttribute('value', color);\n\t\t\tthis.element.classList.add('active');\n\t\t}\n\n\t\tthis.colorPicker = new BX.ColorPicker({\n\t\t\tbindElement: this.element,\n\t\t\tpopupOptions: { angle: false, offsetTop: 5 },\n\t\t\tonColorSelected: this.onColorSelected.bind(this),\n\t\t\tcolors: this.getGridColors(),\n\t\t\tselectedColor: this.getSelectedColor()\n\t\t});\n\n\t\tBX.bind(this.element, 'click', this.open.bind(this));\n\t}\n\n\tsetMetric(): void\n\t{\n\t\tthis.metrika = null;\n\t\tif (typeof BX.Landing.Metrika !== 'undefined')\n\t\t{\n\t\t\tthis.metrika = new BX.Landing.Metrika();\n\t\t}\n\t}\n\n\tinitPreviewColor(): string\n\t{\n\t\tlet color;\n\n\t\tif (this.currentColor)\n\t\t{\n\t\t\tif (this.isHex(this.currentColor))\n\t\t\t{\n\t\t\t\tcolor = (this.isBaseColor())\n\t\t\t\t\t? ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR\n\t\t\t\t\t: this.currentColor;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tcolor = ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcolor = ColorPickerTheme.DEFAULT_COLOR_PICKER_COLOR;\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tisActive(): boolean\n\t{\n\t\tif (!this.isHex(this.currentColor))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\treturn !this.isBaseColor();\n\t}\n\n\tisBaseColor(): boolean\n\t{\n\t\treturn this.allColors.includes(this.currentColor);\n\t}\n\n\tgetSelectedColor(): string\n\t{\n\t\tlet color;\n\t\tif (this.element.dataset.value)\n\t\t{\n\t\t\tcolor = this.element.dataset.value;\n\t\t}\n\t\tcolor = this.prepareColor(color);\n\t\tif (!this.isHex(color))\n\t\t{\n\t\t\tcolor = '';\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tonColorSelected(color): void\n\t{\n\t\tthis.element.classList.add('ui-colorpicker-selected');\n\t\tthis.element.dataset.value = color.substr(1);\n\t\tthis.element.style.backgroundColor = color;\n\n\t\tconst event = new BaseEvent([{\n\t\t\t\tcolor: color,\n\t\t\t \tnode: this.element,\n\t\t\t }]);\n\t\tthis.emit('onSelectColor', event);\n\n\t\tthis.input.setAttribute('value', color);\n\n\t\tthis.sendMetric(color);\n\t}\n\n\tsendMetric(color): void\n\t{\n\t\tif (this.metrika)\n\t\t{\n\t\t\tthis.metrika.sendLabel(\n\t\t\t\tnull,\n\t\t\t\t'Color::CustomSet',\n\t\t\t\tcolor.substr(1)\n\t\t\t);\n\t\t}\n\t}\n\n\topen(): void\n\t{\n\t\tthis.colorPicker.open();\n\t}\n\n\tgetGridColors()\n\t{\n\t\treturn [\n\t\t\t['#f4f5fb', '#d2d6ef', '#b0b8e3', '#8f99d6', '#6d7bca', '#4b5cbe', '#3e4fac'],\n\t\t\t['#eaecfb', '#d5daf6', '#c0c7f2', '#abb5ed', '#96a2e9', '#8190e4', '#7888e2'],\n\t\t\t['#e8f4fc', '#d1e9fa', '#badef7', '#a3d3f5', '#8cc8f2', '#75bdf0', '#6cb8ef'],\n\t\t\t['#ebfaf8', '#caf1ed', '#aeeae3', '#9ae5dc', '#85e0d5', '#71dace', '#5dd5c7'],\n\t\t\t['#eafbf9', '#c8f4f0', '#aaeee8', '#90e9e2', '#5ddfd4', '#2ad5c7', '#26c0b3'],\n\t\t\t['#ebfaf0', '#d6f5e2', '#c2f0d3', '#adebc5', '#99e6b6', '#85e0a8', '#70db99'],\n\t\t\t['#f6f9eb', '#e8efcc', '#dbe7b1', '#d1e09a', '#c4d77e', '#b8cf63', '#a9c544'],\n\t\t\t['#fafee6', '#f3febe', '#edfd9b', '#e8fc82', '#d0e859', '#b5d31d', '#a7c804'],\n\t\t\t['#fefee6', '#fdfcce', '#fcfbb6', '#fbf993', '#f9f771', '#f7f445', '#f6f223'],\n\t\t\t['#fef8e6', '#fdf1ce', '#fdeab5', '#fce092', '#fbd570', '#f9c943', '#f8bc16'],\n\t\t\t['#fde9e8', '#fbd3d0', '#f9bdb9', '#f7a7a1', '#f5918a', '#f27269', '#ee463a'],\n\t\t\t['#f9ebeb', '#f4d7d7', '#eec4c4', '#e8b0b0', '#e29c9c', '#d77575', '#ca4949'],\n\t\t\t['#fceae8', '#f9d6d2', '#f7c1bb', '#f4aca4', '#f1978e', '#ee8377', '#e75140'],\n\t\t\t['#ffe6e6', '#ffd1d2', '#ffc2c3', '#ffa9aa', '#fe9496', '#fe8082', '#fe6769'],\n\t\t\t['#fee8e7', '#fdd2ce', '#fcbbb6', '#fba59d', '#fa8e85', '#f9786c', '#f75445'],\n\t\t\t['#ffe5e5', '#fcc', '#ffb3b3', '#f99', '#ff8080', '#f66', '#ff0a0a'],\n\t\t\t['#fee7ea', '#fdced6', '#fcb6c1', '#fb9dad', '#fa8598', '#f96c84', '#f73b5a'],\n\t\t\t['#fde7ef', '#fbd0df', '#f9b8cf', '#f7a1bf', '#f580a9', '#f25a8f', '#ec135f'],\n\t\t\t['#faeaef', '#f5d6de', '#f0c1ce', '#ebadbd', '#e698ad', '#e1849d', '#d75b7c'],\n\t\t\t['#f2f2f2', '#dedede', '#ccc', '#b3b3b3', '#999', '#666', '#404040']\n\t\t].map(function(item, index, arr) {\n\t\t\treturn arr.map(function(row) {\n\t\t\t\treturn row[index];\n\t\t\t});\n\t\t});\n\t}\n\n\tprepareColor(color): string\n\t{\n\t\tif (color[0] !== '#')\n\t\t{\n\t\t\tcolor = '#' + color;\n\t\t}\n\n\t\treturn color;\n\t}\n\n\tisHex(color): boolean\n\t{\n\t\tlet isCorrect = false;\n\t\tif (color.length === 4 || color.length === 7)\n\t\t{\n\t\t\tif (color.match(ColorPickerTheme.MATCH_HEX))\n\t\t\t{\n\t\t\t\tisCorrect = true;\n\t\t\t}\n\t\t}\n\n\t\treturn isCorrect;\n\t}\n}"],"names":["ColorPickerTheme","node","allColors","currentColor","setEventNamespace","element","input","firstElementChild","init","setMetric","color","initPreviewColor","active","isActive","style","backgroundColor","dataset","value","classList","add","setAttribute","colorPicker","BX","ColorPicker","bindElement","popupOptions","angle","offsetTop","onColorSelected","bind","colors","getGridColors","selectedColor","getSelectedColor","open","metrika","Landing","Metrika","isHex","isBaseColor","DEFAULT_COLOR_PICKER_COLOR","includes","prepareColor","substr","event","BaseEvent","emit","sendMetric","sendLabel","map","item","index","arr","row","isCorrect","length","match","MATCH_HEX","EventEmitter"],"mappings":"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"}