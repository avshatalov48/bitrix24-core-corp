this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(t,e){"use strict";var n=function(){function t(e){babelHelpers.classCallCheck(this,t);this.node=e;return this}babelHelpers.createClass(t,[{key:"setParent",value:function t(e){this.parent=e;return this}},{key:"setDefaultValue",value:function t(e){this.defaultValue=e;return this}},{key:"setChangeHandler",value:function t(n){e.Event.bind(this.node,"change",n)}},{key:"setClickHandler",value:function t(n){e.Event.bind(this.node,"click",n)}},{key:"getValue",value:function t(){return this.parent&&this.parent.getValue()!==true?this.defaultValue:this.getValueInternal()}},{key:"getValueInternal",value:function t(){return this.node}}]);return t}();function s(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Roboto+Slab:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Alegreya+Sans:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=Cormorant+Infant:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=PT+Sans+Caption:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link\n\t\t\t\t\trel="stylesheet"\n\t\t\t\t\thref="https://fonts.googleapis.com/css?family=PT+Sans+Narrow:300,400,500,600,700,900"\n\t\t\t\t>\n\t\t\t\t<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:300,400,500,600,700,900">\n\t\t\t\t<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lobster:300,400,500,600,700,900">\n\t\t\t</div>\n\t\t']);s=function e(){return t};return t}function o(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-design-preview-wrap">\n\t\t\t\t<div class="landing-design-preview">\n\t\t\t\t\t<h2 class="landing-design-preview-title">','</h2>\n\t\t\t\t\t<h4 class="landing-design-preview-subtitle">','</h4>\n\t\t\t\t\t<p class="landing-design-preview-text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</p>\n\t\t\t\t\t<p class="landing-design-preview-text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</p>\n\t\t\t\t\t<div class="">\n\t\t\t\t\t\t<a href="#" class="landing-design-preview-button">',"</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"]);o=function e(){return t};return t}var i=function(){function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var s=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};babelHelpers.classCallCheck(this,t);this.form=e;this.phrase=s;this.initControls(n);this.initLayout();this.applyStyles();this.onApplyStyles=this.applyStyles.bind(this)}babelHelpers.createClass(t,[{key:"initLayout",value:function n(){var s=this;this.layout=t.createLayout(this.phrase);this.fonts=t.loadFonts();this.styleNode=document.createElement("style");e.Dom.append(this.styleNode,this.layout);e.Dom.append(this.layout,this.form);e.Dom.append(this.fonts,this.form);var o={threshold:1};var i=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){if(!s.hasOwnProperty("defaultIntersecting")){s.defaultIntersecting=true}if(s.defaultIntersecting){s.unFixElement()}}else{if(!s.hasOwnProperty("defaultIntersecting")){s.defaultIntersecting=false}if(s.defaultIntersecting){s.fixElement()}}})},o);var a=document.querySelector(".landing-design-preview-wrap");i.observe(a)}},{key:"initControls",value:function t(e){this.controls={};for(var s in e){if(!e.hasOwnProperty(s)){continue}for(var o in e[s]){if(!e[s].hasOwnProperty(o)){continue}if(!this.controls[s]){this.controls[s]={}}var i=new n(e[s][o]["control"]);i.setChangeHandler(this.applyStyles.bind(this));if(s==="theme"&&o!=="use"){i.setClickHandler(this.applyStyles.bind(this))}if(s==="background"&&o==="picture"){i.setClickHandler(this.applyStyles.bind(this))}this.controls[s][o]=i}}for(var a in this.controls){if(!this.controls.hasOwnProperty(a)){continue}for(var r in this.controls[a]){if(!this.controls[a].hasOwnProperty(r)){continue}if(r!=="use"&&this.controls[a]["use"]){this.controls[a][r].setParent(this.controls[a]["use"]);if(e[a][r]["defaultValue"]){this.controls[a][r].setDefaultValue(e[a][r]["defaultValue"])}}}}BX.addCustomEvent("BX.Landing.ColorPicker:onSelectColor",this.onApplyStyles.bind(this));BX.addCustomEvent("BX.Landing.ColorPicker:onClearColorPicker",this.onApplyStyles.bind(this));BX.addCustomEvent("BX.Landing.UI.Field.Image:onChangeImage",this.onApplyStyles.bind(this))}},{key:"generateSelectorStart",value:function t(e){return"."+e+" {"}},{key:"generateSelectorEnd",value:function t(e){return e+" }"}},{key:"getCSSPart1",value:function t(e){var n;var s=BX("set-colors");var o=BX("colorpicker-theme");var i=s.querySelector(".active");var a=o.classList.contains("active");if(i){n=i.dataset.value}if(a){n=o.dataset.value}if(n[0]!=="#"){n="#"+n}if(this.controls.theme.use.node){if(this.controls.theme.use.node.checked===false){n=this.controls.theme.corporateColor.defaultValue}}e+="--design-preview-primary: ".concat(n,";");return e}},{key:"getCSSPart2",value:function e(n){var s=this.controls.typo.textColor.node.value;var o=this.convertFont(this.controls.typo.textFont.node.value);var i=this.convertFont(this.controls.typo.hFont.node.value);var a=Math.round(this.controls.typo.textSize.node.value*t.DEFAULT_FONT_SIZE)+"px";var r=this.controls.typo.textWeight.node.value;var l=this.controls.typo.textLineHeight.node.value;var c=this.controls.typo.hColor.node.value;var u=this.controls.typo.hWeight.node.value;if(this.controls.typo.use.node){if(this.controls.typo.use.node.checked===false){s=this.controls.typo.textColor.defaultValue;o=this.convertFont(this.controls.typo.textFont.defaultValue);i=this.convertFont(this.controls.typo.hFont.defaultValue);a=Math.round(this.controls.typo.textSize.defaultValue*t.DEFAULT_FONT_SIZE)+"px";r=this.controls.typo.textWeight.defaultValue;l=this.controls.typo.textLineHeight.defaultValue;c=this.controls.typo.hColor.defaultValue;u=this.controls.typo.hWeight.defaultValue}}n+="--design-preview-color: ".concat(s,";");n+="--design-preview-font: ".concat(o,";");n+="--design-preview-font-size: ".concat(a,";");n+="--design-preview-font-weight: ".concat(r,";");n+="--design-preview-line-height: ".concat(l,";");if(c){n+="--design-preview-color-h: ".concat(c,";")}else{n+="--design-preview-color-h: ".concat(s,";")}if(u){n+="--design-preview-font-weight-h: ".concat(u,";")}else{n+="--design-preview-font-weight-h: ".concat(r,";")}if(this.controls.typo.hFont.node.value){n+="--design-preview-font-h: ".concat(i,";")}else{n+="--design-preview-font-h: ".concat(o,";")}return n}},{key:"getCSSPart3",value:function t(e){var n=this.controls.background.color.node.value;var s=BX("landing-form-background-field");var o=s.getElementsByClassName("landing-ui-field-image-hidden");var i=o[0].getAttribute("src");var a=this.controls.background.position.node.value;if(this.controls.background.use.node.checked===true){e+="--design-preview-bg: ".concat(n,";")}else{i="";if(this.controls.background.useSite){if(this.controls.background.useSite.defaultValue==="Y"){n=this.controls.background.color.defaultValue;i=this.controls.background.picture.defaultValue;a=this.controls.background.position.defaultValue;e+="--design-preview-bg: ".concat(n,";")}}}if(this.controls.background.position){if(a==="center"){e+="background-image: url(".concat(i,");");e+="background-attachment: scroll;";e+="background-position: center;";e+="background-repeat: no-repeat;";e+="background-size: cover;"}if(a==="repeat"){e+="background-image: url(".concat(i,");");e+="background-attachment: scroll;";e+="background-position: center;";e+="background-repeat: repeat;";e+="background-size: 50%;"}if(a==="center_repeat_y"){e+="background-image: url(".concat(i,");");e+="background-attachment: scroll;";e+="background-position: top;";e+="background-repeat: repeat-y;";e+="background-size: 100%;"}}return e}},{key:"generateCss",value:function t(){var e;e=this.generateSelectorStart("landing-design-preview");e=this.getCSSPart1(e);e=this.getCSSPart2(e);e=this.getCSSPart3(e);e=this.generateSelectorEnd(e);return e}},{key:"onApplyStyles",value:function t(){this.applyStyles()}},{key:"applyStyles",value:function t(){this.styleNode.innerHTML=this.generateCss()}},{key:"convertFont",value:function t(e){switch(e){case"g-font-open-sans":e='"Open Sans", Helvetica, Arial, sans-serif';break;case"g-font-roboto":e='"Roboto", Arial, sans-serif';break;case"g-font-roboto-slab":e='"Roboto Slab", Helvetica, Arial, sans-serif';break;case"g-font-montserrat":e='"Montserrat", Arial, sans-serif';break;case"g-font-alegreya-sans":e='"Alegreya Sans", sans-serif';break;case"g-font-cormorant-infant":e='"Cormorant Infant", serif';break;case"g-font-pt-sans-caption":e='"PT Sans Caption", sans-serif';break;case"g-font-pt-sans-narrow":e='"PT Sans Narrow", sans-serif';break;case"g-font-pt-sans":e='"PT Sans", sans-serif';break;case"g-font-lobster":e='"Lobster", cursive';break;default:e='"Montserrat", Arial, sans-serif'}return e}},{key:"fixElement",value:function t(){var e=20;var n=document.querySelector(".landing-design-form");var s=n.getBoundingClientRect();var o=document.querySelector(".landing-design-preview");var i=o.getBoundingClientRect();var a=document.body.clientWidth;var r=a-s.right+e;var l=25;var c=document.querySelector(".landing-design-preview-wrap");var u=c.getBoundingClientRect();var h=u.width-l*2;if(s.height>i.height){var d;d="position: fixed; ";d+="top: 20px; ";d+="margin-top: 0; ";d+="right: "+r+"px;";d+="max-width: "+h+"px;";o.setAttribute("style",d)}}},{key:"unFixElement",value:function t(){var e=document.querySelector(".landing-design-preview");e.setAttribute("style","")}}],[{key:"createLayout",value:function t(n){return e.Tag.render(o(),n.title,n.subtitle,n.text1,n.text2,n.button)}},{key:"loadFonts",value:function t(){return e.Tag.render(s())}}]);return t}();babelHelpers.defineProperty(i,"DEFAULT_FONT_SIZE",14);t.DesignPreview=i})(this.BX.Landing.SettingsForm=this.BX.Landing.SettingsForm||{},BX);
//# sourceMappingURL=designpreview.bundle.map.js