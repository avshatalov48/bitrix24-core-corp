this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e,t,n,o,s,i,a){"use strict";let l=e=>e,c,r;var p=babelHelpers.classPrivateFieldLooseKey("cache");class d extends n.EventEmitter{constructor(e={}){super();Object.defineProperty(this,p,{writable:true,value:new t.Cache.MemoryCache});this.setEventNamespace("BX.Landing.Form.SharePopup");this.subscribeFromOptions(e.events);this.setOptions(e);console.log(a.PageObject.getEditorWindow().document);t.Event.bind(a.PageObject.getEditorWindow().document,"click",(()=>{console.log("click");this.hide()}))}setOptions(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p].set("options",{...e})}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].get("options",{})}getPopup(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].remember("popup",(()=>new o.Popup({id:`form-share-popup-${t.Text.getRandom()}`,bindElement:this.getOptions().bindElement,content:this.getContent(),className:"landing-form-share-popup",width:410,autoHide:true,closeByEsc:true,noAllPaddings:true,angle:{position:"top",offset:115},minWidth:410,contentBackground:"transparent",background:"#E9EAED"})))}getContent(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].remember("content",(()=>t.Tag.render(c||(c=l`
				<div class="landing-form-share-popup-content">
					${0}
					${0}
					${0}
				</div>
			`),this.getShareBlock(),this.getCommunicationBlock(),this.getHelpBlock())))}getShareBlock(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].remember("shareBlock",(()=>this.createContentBlock({type:"share",title:t.Loc.getMessage("LANDING_FORM_SHARE__SHARE_TITLE"),link:{label:t.Loc.getMessage("LANDING_FORM_SHARE__SHARE_LINK_LABEL"),onClick:()=>{}},action:{label:t.Loc.getMessage("LANDING_FORM_SHARE__SHARE_ACTION_LABEL"),onClick:()=>{this.showEmbedPanel();this.hide()}}})))}showEmbedPanel(){const{formEditorData:e}=s.Env.getInstance().getOptions();if(t.Type.isPlainObject(e)&&t.Type.isPlainObject(e.formOptions)){const{id:t}=e.formOptions;i.Embed.open(t)}}showWidgetPanel(){const e=t.Reflection.getClass("BX.SidePanel.Instance");e.open(`/crm/button/`,{allowChangeHistory:false,cacheable:false})}getCommunicationBlock(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].remember("communicationBlock",(()=>this.createContentBlock({type:"communication",title:t.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_TITLE"),link:{label:t.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_LINK_LABEL"),onClick:()=>{}},action:{label:t.Loc.getMessage("LANDING_FORM_SHARE__COMMUNICATION_ACTION_LABEL"),onClick:()=>{this.showWidgetPanel()}}})))}getHelpBlock(){return babelHelpers.classPrivateFieldLooseBase(this,p)[p].remember("helpBlock",(()=>this.createContentBlock({type:"help",title:t.Loc.getMessage("LANDING_FORM_SHARE__HELP_TITLE"),link:{label:t.Loc.getMessage("LANDING_FORM_SHARE__HELP_LINK_LABEL"),onClick:()=>{}},action:{label:t.Loc.getMessage("LANDING_FORM_SHARE__HELP_ACTION_LABEL"),onClick:()=>{}}})))}createContentBlock(e){return t.Tag.render(r||(r=l`
				<div class="landing-form-share-popup-content-block" data-type="${0}">
					<div class="landing-form-share-popup-content-block-icon"></div>
					<div class="landing-form-share-popup-content-block-text">
						<div class="landing-form-share-popup-content-block-text-title">
							${0}
						</div>
						<div 
							class="landing-form-share-popup-content-block-text-link"
							onclick="${0}"
						>
							${0}
						</div>
					</div>
					<div class="landing-form-share-popup-content-block-action">
						<span 
							class="ui-btn ui-btn-xs ui-btn-round ui-btn-no-caps ui-btn-light-border"
							onclick="${0}"
						>${0}</span>
					</div>
				</div>
			`),t.Text.encode(e.type),t.Text.encode(e.title),e.link.onClick,t.Text.encode(e.link.label),e.action.onClick,t.Text.encode(e.action.label))}show(e){const n=this.getPopup();if(t.Type.isPlainObject(e)){if(t.Type.isDomNode(e.bindElement)){n.setBindElement(e.bindElement)}}n.show()}hide(){this.getPopup().close()}}e.SharePopup=d})(this.BX.Landing.Form=this.BX.Landing.Form||{},BX,BX.Event,BX.Main,BX.Landing,BX.Crm.Form,BX.Landing);
//# sourceMappingURL=share-popup.bundle.map.js