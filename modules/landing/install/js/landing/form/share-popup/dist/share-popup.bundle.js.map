{"version":3,"file":"share-popup.bundle.js","sources":["../src/share-popup.js"],"sourcesContent":["import {Cache, Reflection, Type} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\nimport {FeaturesPopup} from 'landing.features-popup';\nimport {Loc} from 'landing.loc';\nimport {PageObject} from 'landing.pageobject';\nimport {Env} from 'landing.env';\nimport {Embed} from 'crm.form.embed';\nimport 'ui.feedback.form';\n\nimport './css/style.css';\n\n/**\n * @memberOf BX.Landing.Form\n */\nexport class SharePopup extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.Form.SharePopup');\n\t\tthis.subscribeFromOptions(options.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options)\n\t{\n\t\tthis.#cache.set('options', {...options});\n\t}\n\n\tgetOptions(): {[key: string]: any}\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#getFeaturesPopup(): FeaturesPopup\n\t{\n\t\treturn this.#cache.remember('featuresPopup', () => {\n\t\t\treturn new FeaturesPopup({\n\t\t\t\tbindElement: this.getOptions().bindElement,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'share',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_SHARE__SHARE_TITLE'),\n\t\t\t\t\t\ttheme: FeaturesPopup.Themes.Highlight,\n\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\tclassName: 'landing-form-features-share-icon',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlink: {\n\t\t\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_SHARE__SHARE_LINK_LABEL'),\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tif (!Type.isNil(BX.Helper))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Helper.show('redirect=detail&code=13003062');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactionButton: {\n\t\t\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_SHARE__SHARE_ACTION_LABEL'),\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst editorWindow = PageObject.getEditorWindow();\n\t\t\t\t\t\t\t\tconst {formEditorData} = editorWindow.BX.Landing.Env.getInstance().getOptions();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tType.isPlainObject(formEditorData)\n\t\t\t\t\t\t\t\t\t&& Type.isPlainObject(formEditorData.formOptions)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tEmbed.openSlider(formEditorData.formOptions.id);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'communication',\n\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_SHARE__COMMUNICATION_TITLE'),\n\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\tclassName: 'landing-form-features-communication-icon',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlink: {\n\t\t\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_SHARE__COMMUNICATION_LINK_LABEL'),\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tif (!Type.isNil(BX.Helper))\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tBX.Helper.show('redirect=detail&code=6986667');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\tactionButton: {\n\t\t\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_SHARE__COMMUNICATION_ACTION_LABEL'),\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst {landingParams} = PageObject.getRootWindow();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t!Type.isNil(landingParams)\n\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(landingParams.PAGE_URL_LANDING_SETTINGS)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\t\t\t\t\t\t\t\tif (!Type.isNil(SidePanel))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tSidePanel.Instance.open(\n\t\t\t\t\t\t\t\t\t\t\t`${landingParams['PAGE_URL_LANDING_SETTINGS']}#b24widget`,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'help',\n\t\t\t\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_SHARE__HELP_TITLE'),\n\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\tclassName: 'landing-form-features-help-icon',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlink: {\n\t\t\t\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_SHARE__HELP_LINK_LABEL'),\n\t\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\t\tconst Feedback = Reflection.getClass('BX.UI.Feedback');\n\t\t\t\t\t\t\t\t\tif (!Type.isNil(Feedback))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tFeedback.Form.open({\n\t\t\t\t\t\t\t\t\t\t\tid: 'form-editor-feedback-form',\n\t\t\t\t\t\t\t\t\t\t\tportalUri: 'https://bitrix24.team',\n\t\t\t\t\t\t\t\t\t\t\tforms: [\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1847, lang: 'ru', sec: 'bbih83', zones: ['ru']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1852, lang: 'kz', sec: 'dtw568', zones: ['kz']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1851, lang: 'by', sec: 'nnz05i', zones: ['by']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1855, lang: 'en', sec: '6lxt2y', zones: ['en', 'eu', 'in', 'uk']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1856, lang: 'de', sec: '574psk', zones: ['de']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1857, lang: 'la', sec: '9tlqqk', zones: ['es', 'mx', 'co']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1858, lang: 'br', sec: '9ptdnu', zones: ['com.br']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1859, lang: 'pl', sec: 'aynrqw', zones: ['pl']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1860, lang: 'fr', sec: 'ld3bh8', zones: ['fr']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1861, lang: 'it', sec: '1rlv2j', zones: ['it']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1862, lang: 'vn', sec: '5m169k', zones: ['vn']},\n\t\t\t\t\t\t\t\t\t\t\t\t{id: 1863, lang: 'tr', sec: '2mc2tg', zones: ['com.tr']},\n\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\tdefaultForm: {id: 1855, lang: 'en', sec: '6lxt2y'}\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: 'settings',\n\t\t\t\t\t\t\ticon: {\n\t\t\t\t\t\t\t\tclassName: 'landing-form-features-settings-icon',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonClick: () => {\n\t\t\t\t\t\t\t\tconst {landingParams} = PageObject.getRootWindow();\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t!Type.isNil(landingParams)\n\t\t\t\t\t\t\t\t\t&& Type.isStringFilled(landingParams.PAGE_URL_LANDING_SETTINGS)\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\t\t\t\t\t\t\t\tif (!Type.isNil(SidePanel))\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tSidePanel.Instance.open(landingParams['PAGE_URL_LANDING_SETTINGS']);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.#getFeaturesPopup().show();\n\t}\n\n\thide()\n\t{\n\t\tthis.#getFeaturesPopup().hide();\n\t}\n}"],"names":["SharePopup","EventEmitter","constructor","options","Cache","MemoryCache","setEventNamespace","subscribeFromOptions","events","setOptions","set","getOptions","get","show","hide","remember","FeaturesPopup","bindElement","items","id","title","Loc","getMessage","theme","Themes","Highlight","icon","className","link","label","onClick","Type","isNil","BX","Helper","actionButton","editorWindow","PageObject","getEditorWindow","formEditorData","Landing","Env","getInstance","isPlainObject","formOptions","Embed","openSlider","landingParams","getRootWindow","isStringFilled","PAGE_URL_LANDING_SETTINGS","SidePanel","Reflection","getClass","Instance","open","Feedback","Form","portalUri","forms","lang","sec","zones","defaultForm"],"mappings":"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"}