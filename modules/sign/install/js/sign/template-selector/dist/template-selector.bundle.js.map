{"version":3,"file":"template-selector.bundle.js","sources":["../src/backend/backend.js","../src/list-item/loading-status/loading-status.js","../src/list-item/list-item.js","../src/template-selector.js"],"sourcesContent":["import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Cache, ajax} from 'main.core';\n\ntype BackendOptions = {\n\tevents: {\n\t\t[eventName: string]: (event: BaseEvent) => void,\n\t},\n};\n\nexport default class Backend extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: BackendOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.TemplateSelector.Backend');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: BackendOptions)\n\t{\n\t\tthis.#cache.set('options', {...options});\n\t}\n\n\tgetOptions(): BackendOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#request(action: string): Promise<any, Error>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax\n\t\t\t\t.runAction(`sign.blank.${action}`)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresolve(result);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tgetTemplatesList(): Promise<Array<any>, Error>\n\t{\n\t\treturn this.#request('list');\n\t}\n}","import {Cache, Tag, Dom, Type} from 'main.core';\nimport {Loader} from 'main.loader';\n\nimport './css/style.css';\n\nexport class LoadingStatus\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor({targetContainer}: {targetContainer: HTMLElement})\n\t{\n\t\tif (Type.isDomNode(targetContainer))\n\t\t{\n\t\t\tDom.append(this.getLayout(), targetContainer);\n\t\t}\n\t}\n\n\t#getLoader(): Loader\n\t{\n\t\treturn this.#cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 60,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('loaderContainer', () => {\n\t\t\tconst layout = Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-loader\">\n\t\t\t\t\t${this.#getProgressLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tvoid this.#getLoader().show(layout);\n\n\t\t\treturn layout;\n\t\t});\n\t}\n\n\t#getProgressLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('progressLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-loader-progress\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tDom.addClass(this.getLayout(), 'sign-template-selector-list-item-loader-show');\n\t}\n\n\thide()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'sign-template-selector-list-item-loader-show');\n\t}\n\n\tupdateStatus(value: string | number)\n\t{\n\t\tthis.#getProgressLayout().textContent = `${value}%`;\n\t}\n}","import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Tag, Dom, Text, Type, Cache, Loc} from 'main.core';\nimport {LoadingStatus} from './loading-status/loading-status';\n\nimport './css/style.css';\n\ntype ListItemOptions = {\n\tid: string | number,\n\ticonClass?: string,\n\ttitle?: string,\n\tdescription?: string,\n\ticonBackground?: 'blue',\n\tselected?: boolean,\n\tevents?: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n\ttargetContainer?: HTMLElement,\n\teditable?: boolean,\n\tloading?: boolean,\n};\n\nexport default class ListItem extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: ListItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.TemplateSelector.ListItem');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.setOptions(options);\n\t\tthis.setSelected(options?.selected);\n\t\tthis.setLoading(options?.loading);\n\n\t\tif (Type.isDomNode(options?.targetContainer))\n\t\t{\n\t\t\tthis.appendTo(options?.targetContainer);\n\t\t}\n\t}\n\n\tsetOptions(options: ListItemOptions)\n\t{\n\t\tthis.#cache.set('options', {...options});\n\t}\n\n\tgetOptions(): ListItemOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tsetLoading(value: boolean)\n\t{\n\t\tthis.#cache.set('loading', value);\n\t\tif (value)\n\t\t{\n\t\t\tthis.getLoadingStatus().show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLoadingStatus().hide();\n\t\t}\n\t}\n\n\tupdateStatus(value: number | string)\n\t{\n\t\tthis.getLoadingStatus().updateStatus(value);\n\t}\n\n\tgetLoading(): boolean\n\t{\n\t\treturn this.#cache.get('loading', false);\n\t}\n\n\thasTitle(): boolean\n\t{\n\t\treturn Type.isStringFilled(this.getOptions()?.title);\n\t}\n\n\thasDescription(): boolean\n\t{\n\t\treturn Type.isStringFilled(this.getOptions()?.description);\n\t}\n\n\tgetIconLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('iconLayout', () => {\n\t\t\tconst {iconClass = '', iconBackground} = this.getOptions();\n\t\t\tconst additionalClass = (() => {\n\t\t\t\tif (Type.isStringFilled(iconBackground))\n\t\t\t\t{\n\t\t\t\t\treturn ` sign-template-selector-list-item-icon-${Text.encode(iconBackground)}`;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-icon${additionalClass}\">\n\t\t\t\t\t<div class=\"sign-template-selector-list-item-icon-wrapper\">\n\t\t\t\t\t\t<div class=\"${iconClass}\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('titleLayout', () => {\n\t\t\tconst {title = ''} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-text-title\">\n\t\t\t\t\t${Text.encode(title)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescriptionLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('descriptionLayout', () => {\n\t\t\tconst {description = ''} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-text-description\">\n\t\t\t\t\t${Text.encode(description)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTextLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('textLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-text\">\n\t\t\t\t\t${this.hasTitle() ? this.getTitleLayout() : ''}\n\t\t\t\t\t${this.hasDescription() ? this.getDescriptionLayout(): ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetAdditionalTextLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('additionalTextLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-list-item-additional-text\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonEditClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tthis.emit('onEditClick');\n\t}\n\n\tgetEditButton(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('editButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"sign-template-selector-list-item-edit-button\"\n\t\t\t\t\tonclick=\"${this.onEditClick.bind(this)}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('SIGN_TEMPLATE_SELECTOR_EDIT_BUTTON_TITLE')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.emit('onClick');\n\t}\n\n\tgetLoadingStatus(): LoadingStatus\n\t{\n\t\treturn this.#cache.remember('loadingStatus', () => {\n\t\t\treturn new LoadingStatus({\n\t\t\t\ttargetContainer: this.getLayout(),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst {title = '', editable} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"sign-template-selector-list-item\" \n\t\t\t\t\ttitle=\"${Text.encode(title)}\"\n\t\t\t\t\tonclick=\"${this.onClick.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getIconLayout()}\n\t\t\t\t\t${this.getTextLayout()}\n\t\t\t\t\t${editable ? this.getEditButton() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetSelected(value: boolean)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'sign-template-selector-list-item-selected');\n\t\t\tthis.emit('onSelect');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getLayout(), 'sign-template-selector-list-item-selected');\n\t\t}\n\t}\n\n\tappendTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), targetContainer);\n\t}\n\n\tprependTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.prepend(this.getLayout(), targetContainer);\n\t}\n\n\tgetId(): string | number\n\t{\n\t\treturn this.getOptions().id;\n\t}\n}","import {Cache, Tag, Dom, Loc, Type, Reflection, Runtime} from 'main.core';\nimport {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Layout} from 'ui.sidepanel.layout';\nimport {Loader} from 'main.loader';\nimport {Uploader, UploaderOptions} from 'ui.uploader.core';\nimport 'sidepanel';\nimport Backend from './backend/backend';\nimport ListItem from './list-item/list-item';\n\nimport './css/style.css';\n\ntype TemplateSelectorOptions = {\n\tupload?: {\n\t\tenabled?: boolean,\n\t},\n\ttemplatesList?: {\n\t\teditable?: boolean,\n\t},\n\tuploaderOptions?: UploaderOptions,\n\tstate?: {\n\t\tselectedTemplateId?: string | number,\n\t},\n\tevents?: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n};\n\n/**\n * @namespace BX.Sign\n */\nexport class TemplateSelector extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: TemplateSelectorOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.TemplateSelector');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.#setOptions(options);\n\n\t\tthis.#cache.remember('fileUploader', () => {\n\t\t\treturn new Uploader({\n\t\t\t\tcontroller: 'ui.dev.fileUploader.testUploaderController',\n\t\t\t\tcontrollerOptions: {\n\t\t\t\t\taction: 'createByFiles',\n\t\t\t\t},\n\t\t\t\tbrowseElement: this.getUploadItems().map((item: ListItem) => {\n\t\t\t\t\treturn item.getLayout();\n\t\t\t\t}),\n\t\t\t\tacceptedFileTypes: ['.jpg', '.jpeg', '.png', '.pdf', '.doc', '.docx', '.rtf'],\n\t\t\t\tmultiple: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'File:onAdd': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {file} = event.getData();\n\t\t\t\t\t\tconst newTemplate = new ListItem({\n\t\t\t\t\t\t\tid: file.id,\n\t\t\t\t\t\t\ttitle: file.clientPreview.name,\n\t\t\t\t\t\t\ticonClass: 'ui-icon sign-template-selector-last-templates-list-item-icon-image',\n\t\t\t\t\t\t\ticonBackground: 'blue',\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClick: this.#onLastTemplatesListItemClick.bind(this),\n\t\t\t\t\t\t\t\tonEditClick: this.#onLastTemplatesListItemEditClick.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\teditable: true,\n\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.#getLastTemplatesItems().unshift(newTemplate);\n\t\t\t\t\t\tthis.#resetSelected();\n\n\t\t\t\t\t\tnewTemplate.prependTo(this.getLastTemplatesListLayout());\n\t\t\t\t\t},\n\t\t\t\t\t'File:onUploadProgress': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {progress} = event.getData();\n\t\t\t\t\t\tconst newTemplate = this.#getLastTemplatesItems()[0];\n\t\t\t\t\t\tnewTemplate.updateStatus(progress);\n\t\t\t\t\t},\n\t\t\t\t\t'File:onUploadComplete': () => {\n\t\t\t\t\t\tconst timeoutID = setTimeout(() => {\n\t\t\t\t\t\t\tconst newTemplate = this.#getLastTemplatesItems()[0];\n\t\t\t\t\t\t\tnewTemplate.getLoadingStatus().hide();\n\t\t\t\t\t\t\tnewTemplate.setSelected(true);\n\t\t\t\t\t\t\tclearTimeout(timeoutID);\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#setOptions(options: TemplateSelectorOptions)\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\t#getOptions(): TemplateSelectorOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tgetBackend(): Backend\n\t{\n\t\treturn this.#cache.remember('backend', () => {\n\t\t\treturn new Backend({\n\t\t\t\tevents: {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tthis.emit('onError', {error});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFileUploader(): Uploader\n\t{\n\t\treturn this.#cache.get('fileUploader');\n\t}\n\n\tgetUploadItems(): Array<ListItem>\n\t{\n\t\treturn this.#cache.remember('uploadItems', () => {\n\t\t\treturn [\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'image',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-img',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_IMAGE_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_IMAGE_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'pdf',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-pdf',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_PDF_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_PDF_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'doc',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-doc',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_DOC_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_DOC_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t];\n\t\t});\n\t}\n\n\tgetLastTemplatesListLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('lastTemplatesListLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-last-templates-list\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetUploadLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('uploadLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector-upload\">\n\t\t\t\t\t<div class=\"sign-template-selector-upload-title\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_TEMPLATE_SELECTOR_UPLOAD_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-template-selector-upload-list\">\n\t\t\t\t\t\t${this.getUploadItems().map((item) => item.getLayout())}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst options: TemplateSelectorOptions = this.#getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-template-selector\">\n\t\t\t\t\t${options?.upload?.enabled !== false ? this.getUploadLayout() : ''}\n\t\t\t\t\t<div class=\"sign-template-selector-last-templates\">\n\t\t\t\t\t\t<div class=\"sign-template-selector-last-templates-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('SIGN_TEMPLATE_SELECTOR_LAST_TEMPLATES_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getLastTemplatesListLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#getLoader(): Loader\n\t{\n\t\treturn this.#cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\ttarget: this.getLastTemplatesListLayout(),\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader()\n\t{\n\t\tvoid this.#getLoader().show(this.getLastTemplatesListLayout());\n\t}\n\n\thideLoader()\n\t{\n\t\tvoid this.#getLoader().hide();\n\t}\n\n\t#resetSelected()\n\t{\n\t\tthis.#getLastTemplatesItems().forEach((listItem) => {\n\t\t\tlistItem.setSelected(false);\n\t\t});\n\t}\n\n\t#onLastTemplatesListItemClick(event: BaseEvent)\n\t{\n\t\tthis.#resetSelected();\n\n\t\tconst targetItem: ListItem = event.getTarget();\n\t\ttargetItem.setSelected(true);\n\t}\n\n\t#onLastTemplatesListItemEditClick(event: BaseEvent)\n\t{\n\t\tconst target: ListItem = event.getTarget();\n\t\tconst documentId = target.getId();\n\n\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\tif (!Type.isNil(SidePanel))\n\t\t{\n\t\t\tSidePanel.Instance.open(\n\t\t\t\t`/sign/edit/${documentId}/`,\n\t\t\t\t{\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\t#onLastTemplatesListItemSelect()\n\t{\n\t\tthis.#enableSaveButton();\n\t}\n\n\t#setLastTemplatesItems(items: Array<ListItem>)\n\t{\n\t\tthis.#cache.set('lastTemplatesItems', [...items]);\n\t}\n\n\t#getLastTemplatesItems(): Array<ListItem>\n\t{\n\t\treturn this.#cache.get('lastTemplatesItems');\n\t}\n\n\t#cleanLastTemplatesListLayout()\n\t{\n\t\tDom.clean(this.getLastTemplatesListLayout());\n\t}\n\n\t#disableSaveButton()\n\t{\n\t\tconst saveButton = this.#getSaveButton();\n\t\tif (saveButton)\n\t\t{\n\t\t\tsaveButton.setDisabled(true);\n\t\t}\n\t}\n\n\t#enableSaveButton()\n\t{\n\t\tconst saveButton = this.#getSaveButton();\n\t\tif (saveButton)\n\t\t{\n\t\t\tsaveButton.setDisabled(false);\n\t\t}\n\t}\n\n\tdrawList(): Promise<any>\n\t{\n\t\tthis.#cleanLastTemplatesListLayout();\n\t\tthis.showLoader();\n\t\tthis.#disableSaveButton();\n\n\t\tthis.getBackend()\n\t\t\t.getTemplatesList()\n\t\t\t.then(({data}) => {\n\t\t\t\tthis.hideLoader();\n\n\t\t\t\tconst options: TemplateSelectorOptions = this.#getOptions();\n\n\t\t\t\tthis.#setLastTemplatesItems(\n\t\t\t\t\tdata.map((blank) => {\n\t\t\t\t\t\treturn new ListItem({\n\t\t\t\t\t\t\tid: blank.ID,\n\t\t\t\t\t\t\ttitle: blank.TITLE,\n\t\t\t\t\t\t\ticonClass: 'ui-icon sign-template-selector-last-templates-list-item-icon-image',\n\t\t\t\t\t\t\ticonBackground: 'blue',\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClick: this.#onLastTemplatesListItemClick.bind(this),\n\t\t\t\t\t\t\t\tonEditClick: this.#onLastTemplatesListItemEditClick.bind(this),\n\t\t\t\t\t\t\t\tonSelect: this.#onLastTemplatesListItemSelect.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttargetContainer: this.getLastTemplatesListLayout(),\n\t\t\t\t\t\t\teditable: options?.templatesList?.editable,\n\t\t\t\t\t\t});\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\t}\n\n\trenderTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), targetContainer);\n\t\tvoid this.drawList();\n\t}\n\n\t#setSaveButton(button)\n\t{\n\t\tthis.#cache.set('saveButton', button);\n\t}\n\n\t#getSaveButton(): any\n\t{\n\t\treturn this.#cache.get('saveButton');\n\t}\n\n\topenSlider()\n\t{\n\t\tvoid this.drawList();\n\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\tif (!Type.isNil(SidePanel))\n\t\t{\n\t\t\tSidePanel.Instance.open('template-selector', {\n\t\t\t\twidth: 628,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['sign.template-selector'],\n\t\t\t\t\t\ttitle: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_SLIDER_TITLE'),\n\t\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\t\treturn this.getLayout();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({cancelButton, SaveButton}) => {\n\t\t\t\t\t\t\tthis.#setSaveButton(\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('SIGN_TEMPLATE_SELECTOR_SLIDER_SELECT_TEMPLATE_BUTTON_LABEL'),\n\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\tthis.emit('onSelect');\n\t\t\t\t\t\t\t\t\t\tSidePanel.Instance.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.#disableSaveButton();\n\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tthis.#getSaveButton(),\n\t\t\t\t\t\t\t\tcancelButton,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n}"],"names":["Backend","EventEmitter","constructor","options","Cache","MemoryCache","setEventNamespace","subscribeFromOptions","events","setOptions","set","getOptions","get","getTemplatesList","action","Promise","resolve","reject","ajax","runAction","then","result","catch","error","LoadingStatus","targetContainer","Type","isDomNode","Dom","append","getLayout","remember","layout","Tag","render","show","addClass","hide","removeClass","updateStatus","value","textContent","Loader","size","ListItem","setSelected","selected","setLoading","loading","appendTo","getLoadingStatus","getLoading","hasTitle","isStringFilled","title","hasDescription","description","getIconLayout","iconClass","iconBackground","additionalClass","Text","encode","getTitleLayout","getDescriptionLayout","getTextLayout","getAdditionalTextLayout","onEditClick","event","preventDefault","emit","getEditButton","bind","Loc","getMessage","onClick","editable","prependTo","prepend","getId","id","TemplateSelector","Uploader","controller","controllerOptions","browseElement","getUploadItems","map","item","acceptedFileTypes","multiple","file","getData","newTemplate","clientPreview","name","unshift","getLastTemplatesListLayout","progress","timeoutID","setTimeout","clearTimeout","getBackend","onError","getFileUploader","getUploadLayout","upload","enabled","showLoader","hideLoader","drawList","data","blank","ID","TITLE","onSelect","templatesList","renderTo","openSlider","SidePanel","Reflection","getClass","isNil","Instance","open","width","contentCallback","Layout","createContent","extensions","content","buttons","cancelButton","SaveButton","text","onclick","close","target","forEach","listItem","targetItem","getTarget","documentId","allowChangeHistory","items","clean","saveButton","setDisabled","button"],"mappings":"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"}