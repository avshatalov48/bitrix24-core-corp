{"version":3,"file":"blank-selector.bundle.js","sources":["../src/backend/backend.js","../src/list-item/loading-status/loading-status.js","../src/list-item/list-item.js","../src/blank-selector/blank-selector.js","../src/blank-field/blank-field.js"],"sourcesContent":["import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Cache, ajax, Type} from 'main.core';\n\ntype BackendOptions = {\n\tevents: {\n\t\t[eventName: string]: (event: BaseEvent) => void,\n\t},\n};\n\nexport default class Backend extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: BackendOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.BlankSelector.Backend');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.setOptions(options);\n\t}\n\n\tsetOptions(options: BackendOptions)\n\t{\n\t\tthis.#cache.set('options', {...options});\n\t}\n\n\tgetOptions(): BackendOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#request(action: string, data: any = {}): Promise<any, Error>\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tajax\n\t\t\t\t.runAction(`sign.api.blank.${action}`, {data})\n\t\t\t\t.then((result) => {\n\t\t\t\t\tresolve(result);\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\treject(error);\n\t\t\t\t});\n\t\t});\n\t}\n\n\tgetBlanksList(options: {countPerPage: number, page: number}): Promise<Array<any>, Error>\n\t{\n\t\treturn this.#request('list', Type.isPlainObject(options) ? options : {});\n\t}\n\n\tgetBlankById(id: number | string): Promise<any>\n\t{\n\t\treturn this.#request('getById', {id});\n\t}\n}","import {Cache, Tag, Dom, Type} from 'main.core';\nimport {Loader} from 'main.loader';\n\nimport './css/style.css';\n\nexport class LoadingStatus\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor({targetContainer}: {targetContainer: HTMLElement})\n\t{\n\t\tif (Type.isDomNode(targetContainer))\n\t\t{\n\t\t\tDom.append(this.getLayout(), targetContainer);\n\t\t}\n\t}\n\n\t#getLoader(): Loader\n\t{\n\t\treturn this.#cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 60,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('loaderContainer', () => {\n\t\t\tconst layout = Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-loader\">\n\t\t\t\t\t${this.#getProgressLayout()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tvoid this.#getLoader().show(layout);\n\n\t\t\treturn layout;\n\t\t});\n\t}\n\n\t#getProgressLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('progressLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-loader-progress\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tDom.addClass(this.getLayout(), 'sign-blank-selector-list-item-loader-show');\n\t}\n\n\thide()\n\t{\n\t\tDom.removeClass(this.getLayout(), 'sign-blank-selector-list-item-loader-show');\n\t}\n\n\tupdateStatus(value: string | number)\n\t{\n\t\tthis.#getProgressLayout().textContent = `${value}%`;\n\t}\n}","import {EventEmitter, BaseEvent} from 'main.core.events';\nimport {Tag, Dom, Text, Type, Cache, Loc} from 'main.core';\nimport {LoadingStatus} from './loading-status/loading-status';\n\nimport './css/style.css';\n\ntype ListItemOptions = {\n\tid: string | number,\n\ticonClass?: string,\n\ttitle?: string,\n\tdata?: any,\n\tdescription?: string,\n\ticonBackground?: 'blue',\n\tselected?: boolean,\n\tevents?: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n\ttargetContainer?: HTMLElement,\n\teditable?: boolean,\n\tloading?: boolean,\n};\n\nexport default class ListItem extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: ListItemOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.BlankSelector.ListItem');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.setOptions(options);\n\t\tthis.setSelected(options?.selected);\n\t\tthis.setLoading(options?.loading);\n\n\t\tif (Type.isDomNode(options?.targetContainer))\n\t\t{\n\t\t\tthis.appendTo(options?.targetContainer);\n\t\t}\n\t}\n\n\tsetOptions(options: ListItemOptions)\n\t{\n\t\tthis.#cache.set('options', {...options});\n\t}\n\n\tgetOptions(): ListItemOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tsetLoading(value: boolean)\n\t{\n\t\tthis.#cache.set('loading', value);\n\t\tif (value)\n\t\t{\n\t\t\tthis.getLoadingStatus().show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLoadingStatus().hide();\n\t\t}\n\t}\n\n\tupdateStatus(value: number | string)\n\t{\n\t\tthis.getLoadingStatus().updateStatus(value);\n\t}\n\n\tgetLoading(): boolean\n\t{\n\t\treturn this.#cache.get('loading', false);\n\t}\n\n\thasTitle(): boolean\n\t{\n\t\treturn Type.isStringFilled(this.getOptions()?.title);\n\t}\n\n\thasDescription(): boolean\n\t{\n\t\treturn Type.isStringFilled(this.getOptions()?.description);\n\t}\n\n\tgetIconLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('iconLayout', () => {\n\t\t\tconst {iconClass = '', iconBackground} = this.getOptions();\n\t\t\tconst additionalClass = (() => {\n\t\t\t\tif (Type.isStringFilled(iconBackground))\n\t\t\t\t{\n\t\t\t\t\treturn ` sign-blank-selector-list-item-icon-${Text.encode(iconBackground)}`;\n\t\t\t\t}\n\n\t\t\t\treturn '';\n\t\t\t})();\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-icon${additionalClass}\">\n\t\t\t\t\t<div class=\"sign-blank-selector-list-item-icon-wrapper\">\n\t\t\t\t\t\t<div class=\"${iconClass}\">\n\t\t\t\t\t\t\t<i></i>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitleLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('titleLayout', () => {\n\t\t\tconst {title = ''} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-text-title\">\n\t\t\t\t\t${Text.encode(title)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescriptionLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('descriptionLayout', () => {\n\t\t\tconst {description = ''} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-text-description\">\n\t\t\t\t\t${Text.encode(description)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTextLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('textLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-text\">\n\t\t\t\t\t${this.hasTitle() ? this.getTitleLayout() : ''}\n\t\t\t\t\t${this.hasDescription() ? this.getDescriptionLayout(): ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetAdditionalTextLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('additionalTextLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-list-item-additional-text\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonEditClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tthis.emit('onEditClick');\n\t}\n\n\tgetEditButton(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('editButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sign-blank-selector-list-item-edit-button\"\n\t\t\t\t\tonclick=\"${this.onEditClick.bind(this)}\"\n\t\t\t\t\ttitle=\"${Loc.getMessage('SIGN_BLANK_SELECTOR_EDIT_BUTTON_TITLE')}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.emit('onClick');\n\t}\n\n\tgetLoadingStatus(): LoadingStatus\n\t{\n\t\treturn this.#cache.remember('loadingStatus', () => {\n\t\t\treturn new LoadingStatus({\n\t\t\t\ttargetContainer: this.getLayout(),\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst {title = '', editable} = this.getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tclass=\"sign-blank-selector-list-item\"\n\t\t\t\t\ttitle=\"${Text.encode(title)}\"\n\t\t\t\t\tonclick=\"${this.onClick.bind(this)}\"\n\t\t\t\t>\n\t\t\t\t\t${this.getIconLayout()}\n\t\t\t\t\t${this.getTextLayout()}\n\t\t\t\t\t${editable ? this.getEditButton() : ''}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetSelected(value: boolean)\n\t{\n\t\tif (value)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'sign-blank-selector-list-item-selected');\n\t\t\tthis.emit('onSelect');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(this.getLayout(), 'sign-blank-selector-list-item-selected');\n\t\t}\n\t}\n\n\tisSelected(): boolean\n\t{\n\t\treturn Dom.hasClass(this.getLayout(), 'sign-blank-selector-list-item-selected');\n\t}\n\n\tappendTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), targetContainer);\n\t}\n\n\tprependTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.prepend(this.getLayout(), targetContainer);\n\t}\n\n\tgetId(): string | number\n\t{\n\t\treturn this.getOptions().id;\n\t}\n\n\tgetData(): any\n\t{\n\t\treturn this.getOptions().data;\n\t}\n}","import { Cache, Tag, Dom, Loc, Type, Reflection, Text } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { Layout } from 'ui.sidepanel.layout';\nimport { Loader } from 'main.loader';\nimport { Uploader, UploaderOptions } from 'ui.uploader.core';\nimport { Button } from 'ui.buttons';\nimport 'sidepanel';\nimport Backend from '../backend/backend';\nimport ListItem from '../list-item/list-item';\n\nimport './css/style.css';\n\nexport type BlankSelectorOptions = {\n\tupload?: {\n\t\tenabled?: boolean,\n\t},\n\tblanksList?: {\n\t\teditable?: boolean,\n\t},\n\tuploaderOptions?: UploaderOptions,\n\tstate?: {\n\t\tselectedBlankId?: string | number,\n\t},\n\tevents?: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n};\n\n/**\n * @namespace BX.Sign\n */\nexport default class BlankSelector extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: BlankSelectorOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.TemplateSelector');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.#setOptions(options);\n\n\t\tthis.#cache.remember('fileUploader', () => {\n\t\t\treturn new Uploader({\n\t\t\t\tcontroller: 'ui.dev.fileUploader.testUploaderController',\n\t\t\t\tcontrollerOptions: {\n\t\t\t\t\taction: 'createByFiles',\n\t\t\t\t},\n\t\t\t\tbrowseElement: this.getUploadItems().map((item: ListItem) => {\n\t\t\t\t\treturn item.getLayout();\n\t\t\t\t}),\n\t\t\t\tacceptedFileTypes: ['.jpg', '.jpeg', '.png', '.pdf', '.doc', '.docx', '.rtf', '.odt'],\n\t\t\t\tmultiple: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'File:onAdd': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {file} = event.getData();\n\t\t\t\t\t\tconst newBlank = new ListItem({\n\t\t\t\t\t\t\tid: file.id,\n\t\t\t\t\t\t\ttitle: file.clientPreview.name,\n\t\t\t\t\t\t\ticonClass: 'ui-icon sign-blank-selector-last-blanks-list-item-icon-image',\n\t\t\t\t\t\t\ticonBackground: 'blue',\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClick: this.#onLastBlanksListItemClick.bind(this),\n\t\t\t\t\t\t\t\tonEditClick: this.#onLastBlanksListItemEditClick.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\teditable: true,\n\t\t\t\t\t\t\tloading: true,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.#getLastBlanksItems().unshift(newBlank);\n\t\t\t\t\t\tthis.#resetSelected();\n\n\t\t\t\t\t\tnewBlank.prependTo(this.getLastBlanksListLayout());\n\t\t\t\t\t},\n\t\t\t\t\t'File:onUploadProgress': (event: BaseEvent) => {\n\t\t\t\t\t\tconst {progress} = event.getData();\n\t\t\t\t\t\tconst newBlank = this.#getLastBlanksItems()[0];\n\t\t\t\t\t\tnewBlank.updateStatus(progress);\n\t\t\t\t\t},\n\t\t\t\t\t'File:onUploadComplete': () => {\n\t\t\t\t\t\tconst timeoutID = setTimeout(() => {\n\t\t\t\t\t\t\tconst newBlank = this.#getLastBlanksItems()[0];\n\t\t\t\t\t\t\tnewBlank.getLoadingStatus().hide();\n\t\t\t\t\t\t\tnewBlank.setSelected(true);\n\t\t\t\t\t\t\tclearTimeout(timeoutID);\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#setOptions(options: BlankSelectorOptions)\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\t#getOptions(): BlankSelectorOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\tgetBackend(): Backend\n\t{\n\t\treturn this.#cache.remember('backend', () => {\n\t\t\treturn new Backend({\n\t\t\t\tevents: {\n\t\t\t\t\tonError: (error) => {\n\t\t\t\t\t\tthis.emit('onError', {error});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetFileUploader(): Uploader\n\t{\n\t\treturn this.#cache.get('fileUploader');\n\t}\n\n\tgetUploadItems(): Array<ListItem>\n\t{\n\t\treturn this.#cache.remember('uploadItems', () => {\n\t\t\treturn [\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'image',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-img',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_IMAGE_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_IMAGE_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'pdf',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-pdf',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_PDF_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_PDF_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t\tnew ListItem({\n\t\t\t\t\tid: 'doc',\n\t\t\t\t\ticonClass: 'ui-icon ui-icon-file-doc',\n\t\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_DOC_TITLE'),\n\t\t\t\t\tdescription: Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_DOC_DESCRIPTION'),\n\t\t\t\t}),\n\t\t\t];\n\t\t});\n\t}\n\n\tgetLastBlanksListLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('lastTemplatesListLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-last-blanks-list\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetUploadLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('uploadLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-upload\">\n\t\t\t\t\t<div class=\"sign-blank-selector-upload-title\">\n\t\t\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_UPLOAD_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-blank-selector-upload-list\">\n\t\t\t\t\t\t${this.getUploadItems().map((item) => item.getLayout())}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst options: BlankSelectorOptions = this.#getOptions();\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector\">\n\t\t\t\t\t${options?.upload?.enabled !== false ? this.getUploadLayout() : ''}\n\t\t\t\t\t<div class=\"sign-blank-selector-last-blanks\">\n\t\t\t\t\t\t<div class=\"sign-blank-selector-last-blanks-title\">\n\t\t\t\t\t\t\t${Loc.getMessage('SIGN_BLANK_SELECTOR_LAST_BLANKS_TITLE')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getLastBlanksListLayout()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"sign-blank-selector-footer\">\n\t\t\t\t\t\t${this.#getLoadMoreButton().render()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\t#setCurrentPageNumber(page: number): number\n\t{\n\t\treturn this.#cache.set('currentPageNumber', page);\n\t}\n\n\t#getCurrentPageNumber(): number\n\t{\n\t\treturn this.#cache.get('currentPageNumber', 1);\n\t}\n\n\t#getLoadMoreButton(): Button\n\t{\n\t\treturn this.#cache.remember('loadMoreButton', () => {\n\t\t\treturn new Button({\n\t\t\t\ttext: Loc.getMessage('SIGN_BLANK_SELECTOR_LOAD_MORE_BUTTON_LABEL'),\n\t\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\t\tsize: Button.Size.LARGE,\n\t\t\t\tonclick: (button: Button) => {\n\t\t\t\t\tconst currentPageNumber = this.#getCurrentPageNumber();\n\t\t\t\t\tthis.#setCurrentPageNumber(currentPageNumber + 1);\n\t\t\t\t\tbutton.setWaiting(true);\n\t\t\t\t\tthis.#loadPage(currentPageNumber).then((data) => {\n\t\t\t\t\t\tbutton.setWaiting(false);\n\t\t\t\t\t\tif (!Type.isArrayFilled(data))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbutton.setDisabled(true);\n\t\t\t\t\t\t\tbutton.setText(Loc.getMessage('SIGN_BLANK_SELECTOR_LOAD_MORE_BUTTON_ALL_LOADED_LABEL'));\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#getLoader(): Loader\n\t{\n\t\treturn this.#cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\ttarget: this.getLastBlanksListLayout(),\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader()\n\t{\n\t\tvoid this.#getLoader().show(this.getLastBlanksListLayout());\n\t}\n\n\thideLoader()\n\t{\n\t\tvoid this.#getLoader().hide();\n\t}\n\n\t#resetSelected()\n\t{\n\t\tthis.#getLastBlanksItems().forEach((listItem) => {\n\t\t\tlistItem.setSelected(false);\n\t\t});\n\t}\n\n\t#onLastBlanksListItemClick(event: BaseEvent)\n\t{\n\t\tthis.#resetSelected();\n\n\t\tconst targetItem: ListItem = event.getTarget();\n\t\ttargetItem.setSelected(true);\n\t}\n\n\t#onLastBlanksListItemEditClick(event: BaseEvent)\n\t{\n\t\tconst target: ListItem = event.getTarget();\n\t\tconst documentId = target.getId();\n\n\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\tif (!Type.isNil(SidePanel))\n\t\t{\n\t\t\tSidePanel.Instance.open(\n\t\t\t\t`/sign/edit/${documentId}/`,\n\t\t\t\t{\n\t\t\t\t\tallowChangeHistory: false,\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n\n\t#onLastBlanksListItemSelect()\n\t{\n\t\tthis.#enableSaveButton();\n\t}\n\n\t#setLastBlanksItems(items: Array<ListItem>)\n\t{\n\t\tthis.#cache.set('lastBlanksItems', [...items]);\n\t}\n\n\t#getLastBlanksItems(): Array<ListItem>\n\t{\n\t\treturn this.#cache.get('lastBlanksItems', []);\n\t}\n\n\t#cleanLastBlanksListLayout()\n\t{\n\t\tDom.clean(this.getLastBlanksListLayout());\n\t}\n\n\t#disableSaveButton()\n\t{\n\t\tconst saveButton = this.#getSaveButton();\n\t\tif (saveButton)\n\t\t{\n\t\t\tsaveButton.setDisabled(true);\n\t\t}\n\t}\n\n\t#enableSaveButton()\n\t{\n\t\tconst saveButton = this.#getSaveButton();\n\t\tif (saveButton)\n\t\t{\n\t\t\tsaveButton.setDisabled(false);\n\t\t}\n\t}\n\n\t#loadPage(page = 1): Promise<Array<any>>\n\t{\n\t\treturn this.getBackend()\n\t\t\t.getBlanksList({page, countPerPage: 12})\n\t\t\t.then(({data}) => {\n\t\t\t\tthis.hideLoader();\n\n\t\t\t\tconst options: BlankSelectorOptions = this.#getOptions();\n\n\t\t\t\tthis.#setLastBlanksItems([\n\t\t\t\t\t...this.#getLastBlanksItems(),\n\t\t\t\t\t...data.map((blank) => {\n\t\t\t\t\t\treturn new ListItem({\n\t\t\t\t\t\t\tid: blank.ID,\n\t\t\t\t\t\t\ttitle: blank.TITLE,\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tid: blank.ID,\n\t\t\t\t\t\t\t\ttitle: blank.TITLE,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ticonClass: 'ui-icon sign-blank-selector-last-blanks-list-item-icon-image',\n\t\t\t\t\t\t\ticonBackground: 'blue',\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tonClick: this.#onLastBlanksListItemClick.bind(this),\n\t\t\t\t\t\t\t\tonEditClick: this.#onLastBlanksListItemEditClick.bind(this),\n\t\t\t\t\t\t\t\tonSelect: this.#onLastBlanksListItemSelect.bind(this),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttargetContainer: this.getLastBlanksListLayout(),\n\t\t\t\t\t\t\teditable: options?.blanksList?.editable,\n\t\t\t\t\t\t\tselected: String(options?.state?.selectedBlankId) === String(blank.ID),\n\t\t\t\t\t\t});\n\t\t\t\t\t}),\n\t\t\t\t]);\n\n\t\t\t\treturn data;\n\t\t\t});\n\t}\n\n\tdrawList(): Promise<any>\n\t{\n\t\tthis.#setCurrentPageNumber(1);\n\t\tthis.#cleanLastBlanksListLayout();\n\t\tthis.showLoader();\n\t\tthis.#disableSaveButton();\n\t\tvoid this.#loadPage();\n\t\tconst moreButton = this.#getLoadMoreButton();\n\t\tmoreButton.setDisabled(false);\n\t\tmoreButton.setText(Loc.getMessage('SIGN_BLANK_SELECTOR_LOAD_MORE_BUTTON_LABEL'));\n\t}\n\n\trenderTo(targetContainer: HTMLElement)\n\t{\n\t\tDom.append(this.getLayout(), targetContainer);\n\t\tvoid this.drawList();\n\t}\n\n\t#setSaveButton(button)\n\t{\n\t\tthis.#cache.set('saveButton', button);\n\t}\n\n\t#getSaveButton(): any\n\t{\n\t\treturn this.#cache.get('saveButton');\n\t}\n\n\tgetSelectedItem(): ?ListItem\n\t{\n\t\treturn this.#getLastBlanksItems().find((item: ListItem) => {\n\t\t\treturn item.isSelected();\n\t\t});\n\t}\n\n\topenSlider()\n\t{\n\t\tvoid this.drawList();\n\t\tconst SidePanel: BX.SidePanel = Reflection.getClass('BX.SidePanel');\n\t\tif (!Type.isNil(SidePanel))\n\t\t{\n\t\t\tSidePanel.Instance.open('blank-selector', {\n\t\t\t\twidth: 628,\n\t\t\t\tcacheable: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: () => {\n\t\t\t\t\t\tthis.emit('onCancel');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\textensions: ['sign.blank-selector'],\n\t\t\t\t\t\ttitle: Loc.getMessage('SIGN_BLANK_SELECTOR_SLIDER_TITLE'),\n\t\t\t\t\t\tcontent: () => {\n\t\t\t\t\t\t\treturn this.getLayout();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tbuttons: ({ cancelButton, SaveButton }) => {\n\t\t\t\t\t\t\tthis.#setSaveButton(\n\t\t\t\t\t\t\t\tnew SaveButton({\n\t\t\t\t\t\t\t\t\ttext: Loc.getMessage('SIGN_BLANK_SELECTOR_SLIDER_SELECT_BLANK_BUTTON_LABEL'),\n\t\t\t\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\t\t\t\tthis.emit('onSelect', this.getSelectedItem().getData());\n\t\t\t\t\t\t\t\t\t\tSidePanel.Instance.close();\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tthis.#disableSaveButton();\n\n\t\t\t\t\t\t\treturn [\n\t\t\t\t\t\t\t\tthis.#getSaveButton(),\n\t\t\t\t\t\t\t\tcancelButton,\n\t\t\t\t\t\t\t];\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n}\n","import { Cache, Tag, Dom, Type, Loc, Text } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport BlankSelector, { BlankSelectorOptions } from '../blank-selector/blank-selector';\nimport Backend from '../backend/backend';\n\ntype BlankFieldOptions = {\n\ttargetContainer?: HTMLDivElement,\n\tselectorOptions?: BlankSelectorOptions,\n\tdata?: {\n\t\tblankId?: number | string,\n\t},\n\tevents?: {\n\t\t[key: string]: (event: BaseEvent) => void,\n\t},\n};\n\n/**\n * @namespace BX.Sign\n */\nexport default class BlankField extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(options: BlankFieldOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.BlankSelector.BlankField');\n\t\tthis.subscribeFromOptions(options?.events);\n\t\tthis.#setOptions(options);\n\n\t\tif (Type.isDomNode(options?.targetContainer))\n\t\t{\n\t\t\tthis.renderTo(options.targetContainer);\n\t\t}\n\n\t\tif (Type.isStringFilled(options?.data?.blankId) || Type.isNumber(options?.data?.blankId))\n\t\t{\n\t\t\tthis.#getBackend()\n\t\t\t\t.getBlankById(options.data.blankId)\n\t\t\t\t.then((result) => {\n\t\t\t\t\tthis.#getTagSelector().addTag({\n\t\t\t\t\t\tid: result.data.id,\n\t\t\t\t\t\ttitle: result.data.title,\n\t\t\t\t\t\tentityId: 'blank',\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t}\n\n\t#setOptions(options: BlankFieldOptions)\n\t{\n\t\tthis.#cache.set('options', options);\n\t}\n\n\t#getOptions(): BlankFieldOptions\n\t{\n\t\treturn this.#cache.get('options', {});\n\t}\n\n\t#getBackend(): Backend\n\t{\n\t\treturn this.#cache.remember('backend', () => {\n\t\t\treturn new Backend();\n\t\t});\n\t}\n\n\t#getBlankSelector(): BlankSelector\n\t{\n\t\treturn this.#cache.remember('blankSelector', () => {\n\t\t\treturn new BlankSelector({\n\t\t\t\t...(this.#getOptions().selectorOptions || {}),\n\t\t\t\tevents: {\n\t\t\t\t\tonSelect: (event: BaseEvent) => {\n\t\t\t\t\t\tconst data = event.getData();\n\t\t\t\t\t\tthis.#getTagSelector().addTag({\n\t\t\t\t\t\t\tid: data.id,\n\t\t\t\t\t\t\ttitle: data.title,\n\t\t\t\t\t\t\tentityId: 'blank',\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.emit('onSelect', data);\n\t\t\t\t\t},\n\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\tconst tagSelector: TagSelector = this.#getTagSelector();\n\t\t\t\t\t\tif (tagSelector.getTags().length === 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttagSelector.showAddButton();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t#getTagSelector(): TagSelector\n\t{\n\t\treturn this.#cache.remember('tagSelector', () => {\n\t\t\treturn new TagSelector({\n\t\t\t\tid: Text.getRandom(),\n\t\t\t\tmultiple: false,\n\t\t\t\tshowTextBox: false,\n\t\t\t\taddButtonCaption: Loc.getMessage('SIGN_BLANK_SELECTOR_FIELD_ADD_BUTTON_LABEL'),\n\t\t\t\ttagMaxWidth: 500,\n\t\t\t\tevents: {\n\t\t\t\t\tonAddButtonClick: () => {\n\t\t\t\t\t\tthis.#getBlankSelector().openSlider();\n\t\t\t\t\t\tthis.#getTagSelector().hideTextBox();\n\t\t\t\t\t},\n\t\t\t\t\tonAfterTagRemove: () => {\n\t\t\t\t\t\tthis.#getTagSelector().hideTextBox();\n\t\t\t\t\t\tthis.#getTagSelector().showAddButton();\n\t\t\t\t\t\tthis.emit('onRemove');\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.#cache.remember('layout', () => {\n\t\t\tconst layout = Tag.render`\n\t\t\t\t<div class=\"sign-blank-selector-field\">\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.#getTagSelector().renderTo(layout);\n\n\t\t\treturn layout;\n\t\t});\n\t}\n\n\trenderTo(targetContainer: HTMLElement)\n\t{\n\t\tif (Type.isDomNode(targetContainer))\n\t\t{\n\t\t\tDom.append(this.getLayout(), targetContainer);\n\t\t}\n\t}\n}\n"],"names":["Backend","EventEmitter","constructor","options","Cache","MemoryCache","setEventNamespace","subscribeFromOptions","events","setOptions","set","getOptions","get","getBlanksList","Type","isPlainObject","getBlankById","id","action","data","Promise","resolve","reject","ajax","runAction","then","result","catch","error","LoadingStatus","targetContainer","isDomNode","Dom","append","getLayout","remember","layout","Tag","render","show","addClass","hide","removeClass","updateStatus","value","textContent","Loader","size","ListItem","setSelected","selected","setLoading","loading","appendTo","getLoadingStatus","getLoading","hasTitle","isStringFilled","title","hasDescription","description","getIconLayout","iconClass","iconBackground","additionalClass","Text","encode","getTitleLayout","getDescriptionLayout","getTextLayout","getAdditionalTextLayout","onEditClick","event","preventDefault","emit","getEditButton","bind","Loc","getMessage","onClick","editable","isSelected","hasClass","prependTo","prepend","getId","getData","BlankSelector","Uploader","controller","controllerOptions","browseElement","getUploadItems","map","item","acceptedFileTypes","multiple","file","newBlank","clientPreview","name","unshift","getLastBlanksListLayout","progress","timeoutID","setTimeout","clearTimeout","getBackend","onError","getFileUploader","getUploadLayout","upload","enabled","showLoader","hideLoader","drawList","moreButton","setDisabled","setText","renderTo","getSelectedItem","find","openSlider","SidePanel","Reflection","getClass","isNil","Instance","open","width","cacheable","onClose","contentCallback","Layout","createContent","extensions","content","buttons","cancelButton","SaveButton","text","onclick","close","page","Button","color","Color","LIGHT_BORDER","Size","LARGE","button","currentPageNumber","setWaiting","isArrayFilled","target","forEach","listItem","targetItem","getTarget","documentId","allowChangeHistory","items","clean","saveButton","countPerPage","blank","ID","TITLE","onSelect","blanksList","String","state","selectedBlankId","BlankField","blankId","isNumber","addTag","entityId","selectorOptions","onCancel","tagSelector","getTags","length","showAddButton","TagSelector","getRandom","showTextBox","addButtonCaption","tagMaxWidth","onAddButtonClick","hideTextBox","onAfterTagRemove"],"mappings":"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"}