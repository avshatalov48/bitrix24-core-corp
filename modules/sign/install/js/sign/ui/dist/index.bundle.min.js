this.BX=this.BX||{};(function(e,n,t,i){"use strict";var o=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"bindSimpleMenu",value:function o(s){var u=s.bindElement,r=s.items,a=s.actionHandler,p=s.currentValue;var l=[];var c=s.menuId||"menu-"+Math.random();var m=null;if(e.simpleMenu[c]){return}if(n.Type.isArray(r)){r.map((function(n){l.push({text:n,className:p===parseInt(n)?"sign-popupmenu-item --sign-popupmenu-active":"sign-popupmenu-item",onclick:function o(s){a(n);t.MenuManager.getMenuById(c).close();i.EventEmitter.emit(BX.findParent(u,{className:"sign-document__block-wrapper"}),"BX.Sign:setFontSize",{menuId:c,fontSize:parseInt(n)});var r=e.simpleMenu[c].getPopupWindow().getPopupContainer();if(r){var p=r.querySelector(".--sign-popupmenu-active");if(p){p.classList.remove("--sign-popupmenu-active")}}var l=s.target.closest(".sign-popupmenu-item");if(l){m=l;m.classList.add("--sign-popupmenu-active")}}})}))}else{babelHelpers.toConsumableArray(Object.keys(r)).map((function(e){l.push({html:r[e],onclick:function n(){a(e);t.MenuManager.getMenuById(c).close()}})}))}var g=document.body.querySelector('[data-role="sign-editor__content"]');var v=function n(){e.simpleMenu[c].close()};e.simpleMenu[c]=t.MenuManager.create({id:c,bindElement:u,items:l,autoHide:true,offsetLeft:-35,events:{onClose:function e(){if(g){n.Event.unbind(g,"scroll",v)}i.EventEmitter.unsubscribe("BX.Sign:resizeStart",v);i.EventEmitter.unsubscribe("BX.Sign:moveStart",v)},onShow:function e(){if(g){n.Event.bind(g,"scroll",v)}i.EventEmitter.subscribe("BX.Sign:moveStart",v);i.EventEmitter.subscribe("BX.Sign:resizeStart",v)},onPopupShow:function n(){if(!m){var t=e.simpleMenu[c].getPopupWindow().getPopupContainer();m=t.querySelector(".--sign-popupmenu-active")}if(m){var i=e.simpleMenu[c].getPopupWindow().getContentContainer();var o=i.offsetHeight;var s=m.offsetTop;s=s+m.offsetHeight/2-o/2;i.scrollTop=s}}}});n.Event.bind(u,"click",(function(){var n=u.getBoundingClientRect();var t=233;var i=window.innerHeight-n.top-n.height*2;e.simpleMenu[c].popupWindow.setMaxHeight(i<t?i:t);e.simpleMenu[c].show()}))}}]);return e}();babelHelpers.defineProperty(o,"simpleMenu",{});e.UI=o})(this.BX.Sign=this.BX.Sign||{},BX,BX.Main,BX.Event);
//# sourceMappingURL=index.bundle.map.js