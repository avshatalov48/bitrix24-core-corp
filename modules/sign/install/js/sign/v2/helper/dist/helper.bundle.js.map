{"version":3,"file":"helper.bundle.js","sources":["../src/helpdesk.js","../src/link.js","../src/hint.js","../src/sign-settings-item-counter.js"],"sourcesContent":["import { Event, Tag } from 'main.core';\n\nimport './style.css';\n\nconst defaultHelpdeskTag = 'helpdesklink';\nconst defaultRedirectValue = 'detail';\n\nexport class Helpdesk\n{\n\tstatic defaultRedirectValue = defaultRedirectValue;\n\n\tstatic show(code: string, redirect: string = defaultRedirectValue): void\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\tconst redirectLink = Tag.safe`${redirect}`;\n\t\t\tconst helpdeskCode = Tag.safe`${code}`;\n\n\t\t\ttop.BX.Helper.show(`redirect=${redirectLink}&code=${helpdeskCode}`);\n\t\t}\n\t}\n\n\tstatic bindHandler(element: HTMLElement, code: string, redirect: string = defaultRedirectValue): void\n\t{\n\t\tEvent.bind(element, 'click', (event) => {\n\t\t\tthis.show(code, redirect);\n\t\t\tevent.preventDefault();\n\t\t});\n\t}\n\n\tstatic replaceLink(\n\t\ttext: string,\n\t\tcode: string,\n\t\tredirect: string = defaultRedirectValue,\n\t\textraClasses: Array<string> = [],\n\t): string\n\t{\n\t\treturn text\n\t\t\t.replace(\n\t\t\t\t`[${defaultHelpdeskTag}]`,\n\t\t\t\t`\n\t\t\t\t\t<a class=\"sign-v2e-helper__link ${extraClasses.join(' ')}\"\n\t\t\t\t\t\thref=\"javascript:top.BX.Helper.show('redirect=${Tag.safe`${redirect}`}&code=${Tag.safe`${code}`}');\"\n\t\t\t\t\t>\n\t\t\t\t`,\n\t\t\t)\n\t\t\t.replace(`[/${defaultHelpdeskTag}]`, '</a>')\n\t\t;\n\t}\n}\n","import { Uri } from 'main.core';\n\nimport './style.css';\n\nexport class Link\n{\n\tstatic replaceInLoc(text: string, link: Uri, linkTag: string = 'link'): string\n\t{\n\t\treturn text\n\t\t\t.replace(\n\t\t\t\t`[${linkTag}]`,\n\t\t\t\t`\n\t\t\t\t\t<a class=\"sign-v2e-helper__link\" \n\t\t\t\t\t\thref=\"${link}\"\n\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t>\n\t\t\t\t`,\n\t\t\t)\n\t\t\t.replace(`[/${linkTag}]`, '</a>')\n\t\t;\n\t}\n}\n","import { Reflection, Dom } from 'main.core';\nimport { type PopupOptions } from 'main.popup';\nimport './style.css';\n\nexport class Hint\n{\n\tstatic create(dom: HTMLElement, popupParameters: PopupOptions = {}): BX.UI.Hint\n\t{\n\t\tconst popupHint = Reflection.getClass('BX.UI.Hint').createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\tautoHide: true,\n\t\t\t\t...popupParameters,\n\t\t\t},\n\t\t});\n\t\tpopupHint.init(dom);\n\t\tDom.addClass(dom, '--with-sign-hint');\n\n\t\treturn popupHint;\n\t}\n}\n","import { Dom, Tag } from 'main.core';\n\nexport class SignSettingsItemCounter\n{\n\tstatic numerate(layout: HTMLElement): void\n\t{\n\t\tconst layoutItems = [...layout.children].filter((child) => {\n\t\t\treturn Dom.hasClass(child, 'sign-b2e-settings__item');\n\t\t});\n\t\tconst hasCounter = layoutItems.some((node) => {\n\t\t\treturn Dom.hasClass(node.firstElementChild, 'sign-b2e-settings__counter');\n\t\t});\n\t\tif (hasCounter)\n\t\t{\n\t\t\tdocument.documentElement.scrollTop = 0;\n\n\t\t\treturn;\n\t\t}\n\n\t\tlayoutItems.forEach((node, index) => {\n\t\t\tconst connectionNode = index === layoutItems.length - 1\n\t\t\t\t? Tag.render`<span class=\"sign-b2e-settings__counter_connect\">`\n\t\t\t\t: null;\n\t\t\tconst counter = Tag.render`\n\t\t\t\t<div class=\"sign-b2e-settings__counter\">\n\t\t\t\t\t<span class=\"sign-b2e-settings__counter_num\" data-num=\"${index + 1}\"></span>\n\t\t\t\t\t${connectionNode}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.prepend(counter, node);\n\t\t\tdocument.documentElement.scrollTop = 0;\n\t\t});\n\t}\n}\n"],"names":["defaultHelpdeskTag","defaultRedirectValue","Helpdesk","show","code","redirect","top","BX","Helper","redirectLink","Tag","safe","helpdeskCode","bindHandler","element","Event","bind","event","preventDefault","replaceLink","text","extraClasses","replace","join","Link","replaceInLoc","link","linkTag","Hint","create","dom","popupParameters","popupHint","Reflection","getClass","createInstance","autoHide","init","Dom","addClass","SignSettingsItemCounter","numerate","layout","layoutItems","children","filter","child","hasClass","hasCounter","some","node","firstElementChild","document","documentElement","scrollTop","forEach","index","connectionNode","length","render","counter","prepend"],"mappings":";;;;;;;;;;;AAAA,CAIA,MAAMA,kBAAkB,GAAG,cAAc;CACzC,MAAMC,oBAAoB,GAAG,QAAQ;AAErC,CAAO,MAAMC,QAAQ,CACrB;GAGC,OAAOC,IAAI,CAACC,IAAY,EAAEC,QAAgB,GAAGJ,oBAAoB,EACjE;KACC,IAAIK,GAAG,CAACC,EAAE,CAACC,MAAM,EACjB;OACC,MAAMC,YAAY,GAAGC,aAAG,CAACC,IAAI,cAAC,IAAW,KAATN,QAAQ,CAAE;OAC1C,MAAMO,YAAY,GAAGF,aAAG,CAACC,IAAI,gBAAC,IAAO,KAALP,IAAI,CAAE;OAEtCE,GAAG,CAACC,EAAE,CAACC,MAAM,CAACL,IAAI,CAAE,YAAWM,YAAa,SAAQG,YAAa,EAAC,CAAC;;;GAIrE,OAAOC,WAAW,CAACC,OAAoB,EAAEV,IAAY,EAAEC,QAAgB,GAAGJ,oBAAoB,EAC9F;KACCc,eAAK,CAACC,IAAI,CAACF,OAAO,EAAE,OAAO,EAAGG,KAAK,IAAK;OACvC,IAAI,CAACd,IAAI,CAACC,IAAI,EAAEC,QAAQ,CAAC;OACzBY,KAAK,CAACC,cAAc,EAAE;MACtB,CAAC;;GAGH,OAAOC,WAAW,CACjBC,IAAY,EACZhB,IAAY,EACZC,QAAgB,GAAGJ,oBAAoB,EACvCoB,YAA2B,GAAG,EAAE,EAEjC;KACC,OAAOD,IAAI,CACTE,OAAO,CACN,IAAGtB,kBAAmB,GAAE,EACxB;uCACkCqB,YAAY,CAACE,IAAI,CAAC,GAAG,CAAE;sDACRb,aAAG,CAACC,IAAI,gBAAC,IAAW,KAATN,QAAQ,CAAG,SAAQK,aAAG,CAACC,IAAI,gBAAC,IAAO,KAALP,IAAI,CAAG;;KAEjG,CACD,CACAkB,OAAO,CAAE,KAAItB,kBAAmB,GAAE,EAAE,MAAM,CAAC;;CAG/C;CA1CaE,QAAQ,CAEbD,oBAAoB,GAAGA,oBAAoB;;CCL5C,MAAMuB,IAAI,CACjB;GACC,OAAOC,YAAY,CAACL,IAAY,EAAEM,IAAS,EAAEC,OAAe,GAAG,MAAM,EACrE;KACC,OAAOP,IAAI,CACTE,OAAO,CACN,IAAGK,OAAQ,GAAE,EACb;;cAESD,IAAK;;;KAGd,CACD,CACAJ,OAAO,CAAE,KAAIK,OAAQ,GAAE,EAAE,MAAM,CAAC;;CAGpC;;CCjBO,MAAMC,IAAI,CACjB;GACC,OAAOC,MAAM,CAACC,GAAgB,EAAEC,eAA6B,GAAG,EAAE,EAClE;KACC,MAAMC,SAAS,GAAGC,oBAAU,CAACC,QAAQ,CAAC,YAAY,CAAC,CAACC,cAAc,CAAC;OAClEJ,eAAe,EAAE;SAChBK,QAAQ,EAAE,IAAI;SACd,GAAGL;;MAEJ,CAAC;KACFC,SAAS,CAACK,IAAI,CAACP,GAAG,CAAC;KACnBQ,aAAG,CAACC,QAAQ,CAACT,GAAG,EAAE,kBAAkB,CAAC;KAErC,OAAOE,SAAS;;CAElB;;;;;ACnBA,CAEO,MAAMQ,uBAAuB,CACpC;GACC,OAAOC,QAAQ,CAACC,MAAmB,EACnC;KACC,MAAMC,WAAW,GAAG,CAAC,GAAGD,MAAM,CAACE,QAAQ,CAAC,CAACC,MAAM,CAAEC,KAAK,IAAK;OAC1D,OAAOR,aAAG,CAACS,QAAQ,CAACD,KAAK,EAAE,yBAAyB,CAAC;MACrD,CAAC;KACF,MAAME,UAAU,GAAGL,WAAW,CAACM,IAAI,CAAEC,IAAI,IAAK;OAC7C,OAAOZ,aAAG,CAACS,QAAQ,CAACG,IAAI,CAACC,iBAAiB,EAAE,4BAA4B,CAAC;MACzE,CAAC;KACF,IAAIH,UAAU,EACd;OACCI,QAAQ,CAACC,eAAe,CAACC,SAAS,GAAG,CAAC;OAEtC;;KAGDX,WAAW,CAACY,OAAO,CAAC,CAACL,IAAI,EAAEM,KAAK,KAAK;OACpC,MAAMC,cAAc,GAAGD,KAAK,KAAKb,WAAW,CAACe,MAAM,GAAG,CAAC,GACpDhD,aAAG,CAACiD,MAAM,oBAAC,mDAAiD,KAC5D,IAAI;OACP,MAAMC,OAAO,GAAGlD,aAAG,CAACiD,MAAM,sBAAC;;8DAE8B,CAAY;OACnE,CAAiB;;IAEnB,GAH2DH,KAAK,GAAG,CAAC,EAChEC,cAAc,CAEjB;OACDnB,aAAG,CAACuB,OAAO,CAACD,OAAO,EAAEV,IAAI,CAAC;OAC1BE,QAAQ,CAACC,eAAe,CAACC,SAAS,GAAG,CAAC;MACtC,CAAC;;CAEJ;;;;;;;;;;;"}