this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,l,i){"use strict";let a=e=>e,t,r,o,n;var c=babelHelpers.classPrivateFieldLooseKey("ui");var b=babelHelpers.classPrivateFieldLooseKey("fields");var d=babelHelpers.classPrivateFieldLooseKey("inputByFieldCodeMap");var p=babelHelpers.classPrivateFieldLooseKey("chosenField");var v=babelHelpers.classPrivateFieldLooseKey("preselectedFieldName");var h=babelHelpers.classPrivateFieldLooseKey("loadAvailableFields");var P=babelHelpers.classPrivateFieldLooseKey("render");var F=babelHelpers.classPrivateFieldLooseKey("fillList");var L=babelHelpers.classPrivateFieldLooseKey("chooseField");class B extends l.EventEmitter{constructor(e){super();Object.defineProperty(this,L,{value:g});Object.defineProperty(this,F,{value:H});Object.defineProperty(this,P,{value:u});Object.defineProperty(this,h,{value:f});Object.defineProperty(this,c,{writable:true,value:{container:HTMLDivElement=null,fieldList:HTMLDivElement=null}});Object.defineProperty(this,b,{writable:true,value:[]});Object.defineProperty(this,d,{writable:true,value:new Map});Object.defineProperty(this,p,{writable:true,value:null});Object.defineProperty(this,v,{writable:true,value:null});this.setEventNamespace("BX.Sign.V2.B2e.ProfileFieldSelector");if(s.Type.isStringFilled(e==null?void 0:e.preselectedFieldName)){babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e.preselectedFieldName}}getFieldCaptionByName(e){const l=babelHelpers.classPrivateFieldLooseBase(this,b)[b].find((s=>s.name===e));if(!s.Type.isObject(l)){return""}return s.Type.isStringFilled(l==null?void 0:l.caption)?l.caption:""}open(){const e=this;BX.SidePanel.Instance.open("sign.b2e:profile-field-selector",{width:700,cacheable:false,events:{onCloseComplete:()=>{e.emit("onSliderCloseComplete",{field:babelHelpers.classPrivateFieldLooseBase(e,p)[p]})}},contentCallback:()=>i.Layout.createContent({extensions:["ui.forms"],title:s.Loc.getMessage("SIGN_V2_B2E_PROFILE_FIELD_SELECTOR_TITLE"),design:{section:true},content(){return babelHelpers.classPrivateFieldLooseBase(e,h)[h]()},buttons({SaveButton:e,closeButton:l}){return[new e({text:s.Loc.getMessage("SIGN_V2_B2E_PROFILE_FIELD_SELECTOR_CHOOSE_BUTTON"),onclick:()=>{BX.SidePanel.Instance.close()}}),l]}})})}}function f(){if(babelHelpers.classPrivateFieldLooseBase(this,b)[b].length>0){return Promise.resolve(babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}return new Promise((e=>{BX.ajax.runAction("sign.api_v1.b2e.fields.getAvailableProfileFields",{json:{}}).then((l=>{if(s.Type.isObject(l.data.fields)){babelHelpers.classPrivateFieldLooseBase(this,b)[b]=l.data.fields;babelHelpers.classPrivateFieldLooseBase(this,F)[F]()}e(babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}),(s=>{e(babelHelpers.classPrivateFieldLooseBase(this,P)[P]())}))}))}function u(){if(babelHelpers.classPrivateFieldLooseBase(this,c)[c].container){return babelHelpers.classPrivateFieldLooseBase(this,c)[c].container}babelHelpers.classPrivateFieldLooseBase(this,c)[c].fieldList=s.Tag.render(t||(t=a`
			<div class="sign-b2e-profile-fields-selector-fields-list"></div>
		`));babelHelpers.classPrivateFieldLooseBase(this,c)[c].container=s.Tag.render(r||(r=a`
			<div class="sign-b2e-profile-fields-selector">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,c)[c].fieldList);babelHelpers.classPrivateFieldLooseBase(this,F)[F]();const e=babelHelpers.classPrivateFieldLooseBase(this,b)[b].find((e=>e.name===babelHelpers.classPrivateFieldLooseBase(this,v)[v]));if(s.Type.isObject(e)){babelHelpers.classPrivateFieldLooseBase(this,L)[L](e)}return babelHelpers.classPrivateFieldLooseBase(this,c)[c].container}function H(){babelHelpers.classPrivateFieldLooseBase(this,b)[b].forEach((e=>{const l=s.Tag.render(o||(o=a`
				<input type="radio" class="ui-ctl-element">
			`));s.Event.bind(l,"click",(()=>{babelHelpers.classPrivateFieldLooseBase(this,L)[L](e)}));const i=s.Tag.render(n||(n=a`
				<div class="sign-b2e-profile-field-selector">
					<label class="ui-ctl ui-ctl-checkbox sign-b2e-profile-field-selector-checkbox">
						${0}
						<div class="ui-ctl-label-text">${0}</div>
					</label>
				</div>
			`),l,e.caption);babelHelpers.classPrivateFieldLooseBase(this,d)[d].set(e.name,l);s.Dom.append(i,babelHelpers.classPrivateFieldLooseBase(this,c)[c].fieldList)}))}function g(e){if(!s.Type.isNull(babelHelpers.classPrivateFieldLooseBase(this,p)[p])){if(babelHelpers.classPrivateFieldLooseBase(this,d)[d].has(babelHelpers.classPrivateFieldLooseBase(this,p)[p].name)){const e=babelHelpers.classPrivateFieldLooseBase(this,d)[d].get(babelHelpers.classPrivateFieldLooseBase(this,p)[p].name);e.checked=false}}babelHelpers.classPrivateFieldLooseBase(this,p)[p]=e;if(babelHelpers.classPrivateFieldLooseBase(this,d)[d].has(babelHelpers.classPrivateFieldLooseBase(this,p)[p].name)){const e=babelHelpers.classPrivateFieldLooseBase(this,d)[d].get(babelHelpers.classPrivateFieldLooseBase(this,p)[p].name);e.checked=true}}e.ProfileFieldSelector=B})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Event,BX.UI.SidePanel);
//# sourceMappingURL=profile-field-selector.bundle.map.js