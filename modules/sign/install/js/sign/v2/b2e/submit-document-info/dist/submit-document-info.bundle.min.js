this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,i,t,a,l,r,o){"use strict";let n=e=>e,c,d,b,u,v,p,m,g,_,f;function P(e){return new Promise((s=>{setTimeout(s,e)}))}var h=babelHelpers.classPrivateFieldLooseKey("layoutCache");var y=babelHelpers.classPrivateFieldLooseKey("options");var L=babelHelpers.classPrivateFieldLooseKey("api");var B=babelHelpers.classPrivateFieldLooseKey("getCompanyLayout");var F=babelHelpers.classPrivateFieldLooseKey("getProgressLayout");var S=babelHelpers.classPrivateFieldLooseKey("showProgress");var H=babelHelpers.classPrivateFieldLooseKey("hideProgress");var T=babelHelpers.classPrivateFieldLooseKey("onProgressClosePageBtnClick");var O=babelHelpers.classPrivateFieldLooseKey("openSigningSliderAndCloseCurrent");var I=babelHelpers.classPrivateFieldLooseKey("getFieldsLayout");var M=babelHelpers.classPrivateFieldLooseKey("getOrCreateFieldLayout");var C=babelHelpers.classPrivateFieldLooseKey("getFieldLayoutCallback");var $=babelHelpers.classPrivateFieldLooseKey("onDateFieldClick");var N=babelHelpers.classPrivateFieldLooseKey("formatDateToUserFormat");class D{constructor(e){Object.defineProperty(this,N,{value:x});Object.defineProperty(this,$,{value:k});Object.defineProperty(this,C,{value:G});Object.defineProperty(this,M,{value:A});Object.defineProperty(this,I,{value:R});Object.defineProperty(this,O,{value:K});Object.defineProperty(this,T,{value:j});Object.defineProperty(this,H,{value:U});Object.defineProperty(this,S,{value:E});Object.defineProperty(this,F,{value:w});Object.defineProperty(this,B,{value:X});Object.defineProperty(this,h,{writable:true,value:new i.MemoryCache});Object.defineProperty(this,y,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:new l.Api});babelHelpers.classPrivateFieldLooseBase(this,y)[y]=e}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h].remember("layout",(()=>{babelHelpers.classPrivateFieldLooseBase(this,H)[H]();return s.Tag.render(c||(c=n`
					<div class="sign-b2e-submit-document-info">
						<h1 class="sign-b2e-settings__header">${0}</h1>
						<div class="sign-b2e-settings__item">
							<p class="sign-b2e-settings__item_title">
								${0}
							</p>
							${0}
						</div>
						<div class="sign-b2e-settings__item">
							<p class="sign-b2e-settings__item_title">
								${0}
							</p>
							${0}
						</div>
						${0}
					</div>
				`),s.Loc.getMessage("SIGN_START_PROCESS_HEAD"),s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_COMPANY"),babelHelpers.classPrivateFieldLooseBase(this,B)[B](),s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_INFO_DESCRIPTION"),babelHelpers.classPrivateFieldLooseBase(this,I)[I](),babelHelpers.classPrivateFieldLooseBase(this,F)[F]())}))}async sendForSign(){var e;const{employeeMember:s}=await babelHelpers.classPrivateFieldLooseBase(this,L)[L].template.send(babelHelpers.classPrivateFieldLooseBase(this,y)[y].template.uid);const{uid:i,id:a}=s;const r=BX.SidePanel.Instance.getTopSlider();babelHelpers.classPrivateFieldLooseBase(this,S)[S]();let n=true;let c=true;const d=new o.SignLink({memberId:a});t.EventEmitter.subscribe("SidePanel.Slider:onCloseStart",(()=>{n=false;c=false}));(e=BX.PULL)==null?void 0:e.subscribe({moduleId:"sign",command:"memberInvitedToSign",callback:async e=>{if(e.member.id!==a&&n&&c){return}n=false;c=false;await babelHelpers.classPrivateFieldLooseBase(this,O)[O](d,r)}});do{await P(5e3);if(!c){return true}const{status:e}=await babelHelpers.classPrivateFieldLooseBase(this,L)[L].getMember(i);if(e===l.MemberStatus.ready||e===l.MemberStatus.stoppableReady){n=false}}while(n);if(c){await babelHelpers.classPrivateFieldLooseBase(this,O)[O](d,r)}return true}}function X(){const{name:e,taxId:i}=babelHelpers.classPrivateFieldLooseBase(this,y)[y].company;return s.Tag.render(d||(d=n`
			<div class="sign-b2e-submit-document-info__company">
				<div class="sign-b2e-submit-document-info__company_summary">
					<p class="sign-b2e-submit-document-info__company_name">
						${0}
					</p>
					<p class="sign-b2e-submit-document-info__company_tax">
						${0}
					</p>
				</div>
			</div>
		`),e,s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_COMPANY_TAX",{"#TAX_ID#":i}))}function w(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h].remember("progressLayout",(()=>s.Tag.render(b||(b=n`
				<div class="sign-b2e-submit-document-info__progress">
					<div class="sign-b2e-submit-document-info__progress_icon"></div>
					<h2 class="sign-b2e-submit-document-info__progress_head">
						${0}
					</h2>
					<p class="sign-b2e-submit-document-info__progress_description">
						${0}
					</p>
					<button
						class="ui-btn ui-btn-round ui-btn-light-border"
						onclick="${0}"
					>
						${0}
					</button>
				</div>
			`),s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_INFO_PROGRESS_HEAD"),s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_INFO_PROGRESS_DESCRIPTION"),(()=>babelHelpers.classPrivateFieldLooseBase(this,T)[T]()),s.Loc.getMessage("SIGN_SUBMIT_DOCUMENT_INFO_PROGRESS_CLOSE"))))}function E(){s.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F](),"--hidden")}function U(){s.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F](),"--hidden")}function j(){BX.SidePanel.Instance.close()}async function K(e,i){await e.preloadData();if(s.Type.isNull(i)){e.openSlider({events:{}})}else{i.close(false,(()=>e.openSlider({events:{}})))}}function R(){return babelHelpers.classPrivateFieldLooseBase(this,y)[y].fields.map((e=>babelHelpers.classPrivateFieldLooseBase(this,M)[M](e)))}function A(e){return babelHelpers.classPrivateFieldLooseBase(this,h)[h].remember(`fieldLayout.${e.uid}`,(()=>{const i=babelHelpers.classPrivateFieldLooseBase(this,C)[C](e);if(s.Type.isNull(i)){throw new TypeError(`Unknown field type: ${e.type}`)}return i(e)}))}function G(e){var i;const t=new Date;const a=s.Tag.render(u||(u=n`
			<span class="sign-b2e-submit-document-info__label">
				${0}
			</span>
		`),e.name);const l={date:()=>s.Tag.render(v||(v=n`
				<div class="sign-b2e-submit-document-info__field">
					${0}
					<div class="ui-ctl ui-ctl-after-icon ui-ctl-date" onclick="${0}">
						<div class="ui-ctl-after ui-ctl-icon-calendar"></div>
						<div class="ui-ctl-element sign-b2e-submit-document-info__field-date__value">${0}</div>
					</div>
				</div>
			`),a,(()=>babelHelpers.classPrivateFieldLooseBase(this,$)[$](e)),babelHelpers.classPrivateFieldLooseBase(this,N)[N](t)),string:()=>s.Tag.render(p||(p=n`
				<div class="sign-b2e-submit-document-info__field">
					${0}
					<div class="ui-ctl ui-ctl-textbox">
						<input type="text" class="ui-ctl-element">
					</div>
				</div>
			`),a),list:()=>s.Tag.render(m||(m=n`
				<div class="sign-b2e-submit-document-info__field">
					${0}
					<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown">
						<div class="ui-ctl-after ui-ctl-icon-angle"></div>
						<select class="ui-ctl-element">
							${0}
						</select>
					</div>
				</div>
			`),a,e.items.map((e=>s.Tag.render(g||(g=n`
								<option value="${0}">${0}</option>
							`),e.code,e.label)))),number:()=>s.Tag.render(_||(_=n`
				<div class="sign-b2e-submit-document-info__field">
					${0}
					<div class="ui-ctl ui-ctl-textbox">
						<input type="number" class="ui-ctl-element">
					</div>
				</div>
			`),a)};const r=()=>s.Tag.render(f||(f=n`<div></div>`));return(i=l[e.type])!=null?i:r}function k(e){BX.calendar({node:babelHelpers.classPrivateFieldLooseBase(this,M)[M](e),field:babelHelpers.classPrivateFieldLooseBase(this,M)[M](e),bTime:false,callback_after:s=>{const i=babelHelpers.classPrivateFieldLooseBase(this,M)[M](e).querySelector(".sign-b2e-submit-document-info__field-date__value");if(i){i.textContent=babelHelpers.classPrivateFieldLooseBase(this,N)[N](s)}}})}function x(e){return a.DateTimeFormat.format(a.DateTimeFormat.getFormat("FORMAT_DATE"),e)}e.SubmitDocumentInfo=D})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Cache,BX.Event,BX.Main,BX.Sign.V2,BX,BX.Sign.V2.B2e);
//# sourceMappingURL=submit-document-info.bundle.map.js