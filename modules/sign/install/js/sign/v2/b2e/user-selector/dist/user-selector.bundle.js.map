{"version":3,"file":"user-selector.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport type { UserSelectorOptions } from './type';\n\nconst userEntityTypeId = 'user';\n\nexport const UserSelectorEvent = Object.freeze({\n\tonShow: 'onShow',\n\tonHide: 'onHide',\n\tonItemSelect: 'onItemSelect',\n\tonItemDeselect: 'onItemDeselect',\n});\n\nexport class UserSelector extends EventEmitter\n{\n\t#container: HTMLElement = null;\n\n\t#dialog: Dialog = null;\n\n\tconstructor(options: UserSelectorOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Sign.V2.B2e.UserSelector');\n\t\tthis.#container = options.container;\n\t\tthis.#dialog = new Dialog({\n\t\t\twidth: 425,\n\t\t\theight: 363,\n\t\t\tmultiple: options.multiple ?? true,\n\t\t\ttargetNode: this.#container,\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: userEntityTypeId,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tintranetUsersOnly: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tpreselectedItems: options.preselectedIds?.map((id) => [userEntityTypeId, id]),\n\t\t\thideOnDeselect: true,\n\t\t\tevents: {\n\t\t\t\tonHide: (event) => this.emit(UserSelectorEvent.onHide, {\n\t\t\t\t\titems: this.#dialog.getSelectedItems(),\n\t\t\t\t}),\n\t\t\t\t'Item:onSelect': (event) => this.emit(UserSelectorEvent.onItemSelect, {\n\t\t\t\t\titems: this.#dialog.getSelectedItems(),\n\t\t\t\t}),\n\t\t\t\t'Item:onDeselect': (event) => this.emit(UserSelectorEvent.onItemSelect, {\n\t\t\t\t\titems: this.#dialog.getSelectedItems(),\n\t\t\t\t}),\n\t\t\t},\n\t\t});\n\t}\n\n\ttoggle(): void\n\t{\n\t\tthis.getDialog().show();\n\t}\n\n\tgetDialog(): Dialog\n\t{\n\t\treturn this.#dialog;\n\t}\n}\n"],"names":["userEntityTypeId","UserSelectorEvent","Object","freeze","onShow","onHide","onItemSelect","onItemDeselect","UserSelector","EventEmitter","constructor","options","setEventNamespace","container","Dialog","width","height","multiple","targetNode","entities","id","intranetUsersOnly","dropdownMode","enableSearch","preselectedItems","preselectedIds","map","hideOnDeselect","events","event","emit","items","getSelectedItems","toggle","getDialog","show"],"mappings":";;;;;;CAIA,MAAMA,gBAAgB,GAAG,MAAM;AAE/B,OAAaC,iBAAiB,GAAGC,MAAM,CAACC,MAAM,CAAC;GAC9CC,MAAM,EAAE,QAAQ;GAChBC,MAAM,EAAE,QAAQ;GAChBC,YAAY,EAAE,cAAc;GAC5BC,cAAc,EAAE;CACjB,CAAC,CAAC;CAAC;CAAA;AAEH,CAAO,MAAMC,YAAY,SAASC,6BAAY,CAC9C;GAKCC,WAAW,CAACC,OAA4B,EACxC;KAAA;KACC,KAAK,EAAE;KAAC;OAAA;OAAA,OANiB;;KAAI;OAAA;OAAA,OAEZ;;KAKjB,IAAI,CAACC,iBAAiB,CAAC,6BAA6B,CAAC;KACrD,4CAAI,4BAAcD,OAAO,CAACE,SAAS;KACnC,4CAAI,sBAAW,IAAIC,wBAAM,CAAC;OACzBC,KAAK,EAAE,GAAG;OACVC,MAAM,EAAE,GAAG;OACXC,QAAQ,uBAAEN,OAAO,CAACM,QAAQ,gCAAI,IAAI;OAClCC,UAAU,0CAAE,IAAI,yBAAW;OAC3BC,QAAQ,EAAE,CACT;SACCC,EAAE,EAAEpB,gBAAgB;SACpBW,OAAO,EAAE;WACRU,iBAAiB,EAAE;;QAEpB,CACD;OACDC,YAAY,EAAE,IAAI;OAClBC,YAAY,EAAE,IAAI;OAClBC,gBAAgB,2BAAEb,OAAO,CAACc,cAAc,qBAAtB,sBAAwBC,GAAG,CAAEN,EAAE,IAAK,CAACpB,gBAAgB,EAAEoB,EAAE,CAAC,CAAC;OAC7EO,cAAc,EAAE,IAAI;OACpBC,MAAM,EAAE;SACPvB,MAAM,EAAGwB,KAAK,IAAK,IAAI,CAACC,IAAI,CAAC7B,iBAAiB,CAACI,MAAM,EAAE;WACtD0B,KAAK,EAAE,4CAAI,oBAASC,gBAAgB;UACpC,CAAC;SACF,eAAe,EAAGH,KAAK,IAAK,IAAI,CAACC,IAAI,CAAC7B,iBAAiB,CAACK,YAAY,EAAE;WACrEyB,KAAK,EAAE,4CAAI,oBAASC,gBAAgB;UACpC,CAAC;SACF,iBAAiB,EAAGH,KAAK,IAAK,IAAI,CAACC,IAAI,CAAC7B,iBAAiB,CAACK,YAAY,EAAE;WACvEyB,KAAK,EAAE,4CAAI,oBAASC,gBAAgB;UACpC;;MAEF,CAAC;;GAGHC,MAAM,GACN;KACC,IAAI,CAACC,SAAS,EAAE,CAACC,IAAI,EAAE;;GAGxBD,SAAS,GACT;KACC,+CAAO,IAAI;;CAEb;;;;;;;;;"}