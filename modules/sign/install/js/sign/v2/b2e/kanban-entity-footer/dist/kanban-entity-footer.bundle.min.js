this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,i,l,a,t){"use strict";const r="sign";const o="edit";const n="review";const c="preview";const b="modify";const d="cancel";const v="process";var p=babelHelpers.classPrivateFieldLooseKey("buttons");var u=babelHelpers.classPrivateFieldLooseKey("isUserCanSign");var P=babelHelpers.classPrivateFieldLooseKey("isUserCanEdit");var L=babelHelpers.classPrivateFieldLooseKey("isUserCanReview");var B=babelHelpers.classPrivateFieldLooseKey("isUserCanCancel");var h=babelHelpers.classPrivateFieldLooseKey("isUserCanModify");var f=babelHelpers.classPrivateFieldLooseKey("isUserCanPreview");var F=babelHelpers.classPrivateFieldLooseKey("isUserCanProcess");var y=babelHelpers.classPrivateFieldLooseKey("memberId");var g=babelHelpers.classPrivateFieldLooseKey("documentUid");var m=babelHelpers.classPrivateFieldLooseKey("entityId");var H=babelHelpers.classPrivateFieldLooseKey("onBeforeAsideCreate");var O=babelHelpers.classPrivateFieldLooseKey("onBeforeFooterCreate");var E=babelHelpers.classPrivateFieldLooseKey("setData");var I=babelHelpers.classPrivateFieldLooseKey("createLastActivityBlock");var T=babelHelpers.classPrivateFieldLooseKey("createButtonsBlock");var _=babelHelpers.classPrivateFieldLooseKey("createButton");var C=babelHelpers.classPrivateFieldLooseKey("signShow");var K=babelHelpers.classPrivateFieldLooseKey("signCancel");var N=babelHelpers.classPrivateFieldLooseKey("modifyDocument");var w=babelHelpers.classPrivateFieldLooseKey("previewDocument");var S=babelHelpers.classPrivateFieldLooseKey("showDocumentProcess");class D{constructor(){Object.defineProperty(this,S,{value:W});Object.defineProperty(this,w,{value:V});Object.defineProperty(this,N,{value:G});Object.defineProperty(this,K,{value:k});Object.defineProperty(this,C,{value:Y});Object.defineProperty(this,_,{value:M});Object.defineProperty(this,T,{value:X});Object.defineProperty(this,I,{value:U});Object.defineProperty(this,E,{value:R});Object.defineProperty(this,O,{value:A});Object.defineProperty(this,H,{value:j});Object.defineProperty(this,p,{writable:true,value:{sign:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_SIGN_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-pencil","sign-b2e-sign-document"]},edit:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_EDIT_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-pencil","sign-b2e-edit-document"]},review:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_REVIEW_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-pencil","sign-b2e-review-document"]},cancel:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_CANCEL_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-cancel","sign-b2e-cancel-document"]},preview:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_PREVIEW_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-view","sign-b2e-preview-document"]},modify:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_MODIFY_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-fill","sign-b2e-modify-document"]},process:{title:s.Loc.getMessage("SIGN_KANBAN_ENTITY_FOOTER_PROCESS_TITLE"),classes:["sign-b2e-ui-icon","sign-b2e-ui-icon-fill","sign-b2e-process-document"]}}});Object.defineProperty(this,u,{writable:true,value:false});Object.defineProperty(this,P,{writable:true,value:false});Object.defineProperty(this,L,{writable:true,value:false});Object.defineProperty(this,B,{writable:true,value:false});Object.defineProperty(this,h,{writable:true,value:false});Object.defineProperty(this,f,{writable:true,value:false});Object.defineProperty(this,F,{writable:true,value:false});Object.defineProperty(this,y,{writable:true,value:0});Object.defineProperty(this,g,{writable:true,value:""});Object.defineProperty(this,m,{writable:true,value:0})}init(){i.EventEmitter.subscribe("BX.Crm.Kanban.Item::onBeforeFooterCreate",(e=>babelHelpers.classPrivateFieldLooseBase(this,O)[O](e)));i.EventEmitter.subscribe("BX.Crm.Kanban.Item::onBeforeAsideCreate",(e=>babelHelpers.classPrivateFieldLooseBase(this,H)[H](e)))}}function j(e){const s=e.getData();s.elements=[]}function A(e){const s=e.getData();babelHelpers.classPrivateFieldLooseBase(this,E)[E](s.item.data);s.elements=[];s.elements.push({id:"lastActivityBlockItem",node:babelHelpers.classPrivateFieldLooseBase(this,I)[I](s.item.lastActivityTime,s.item.lastActivityBy)},{id:"buttonsBlock",node:babelHelpers.classPrivateFieldLooseBase(this,T)[T]()})}function R(e){var s,i,l,a,t,r,o,n,c,b;babelHelpers.classPrivateFieldLooseBase(this,u)[u]=(s=e==null?void 0:e.isUserCanSign)!=null?s:false;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=(i=e==null?void 0:e.isUserCanReview)!=null?i:false;babelHelpers.classPrivateFieldLooseBase(this,P)[P]=(l=e==null?void 0:e.isUserCanEdit)!=null?l:false;babelHelpers.classPrivateFieldLooseBase(this,h)[h]=(a=e==null?void 0:e.isUserCanModify)!=null?a:false;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=(t=e==null?void 0:e.isUserCanPreview)!=null?t:false;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=(r=e==null?void 0:e.isUserCanCancel)!=null?r:false;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=(o=e==null?void 0:e.isUserCanProcess)!=null?o:false;babelHelpers.classPrivateFieldLooseBase(this,g)[g]=(n=e==null?void 0:e.documentUid)!=null?n:"";babelHelpers.classPrivateFieldLooseBase(this,m)[m]=(c=e==null?void 0:e.entityId)!=null?c:"";babelHelpers.classPrivateFieldLooseBase(this,y)[y]=(b=e==null?void 0:e.memberId)!=null?b:0}function U(e,i){const l=s.Dom.create("div");s.Dom.addClass(l,"crm-kanban-item-last-activity");s.Dom.append(e,l);s.Dom.append(i,l);return l}function X(){const e=s.Dom.create("div");s.Dom.addClass(e,"sign-b2e-buttons-block");let i="";if(babelHelpers.classPrivateFieldLooseBase(this,u)[u]){i=r}else if(babelHelpers.classPrivateFieldLooseBase(this,P)[P]){i=o}else if(babelHelpers.classPrivateFieldLooseBase(this,L)[L]){i=n}let l=false;if(i&&babelHelpers.classPrivateFieldLooseBase(this,y)[y]>0){const a=babelHelpers.classPrivateFieldLooseBase(this,y)[y];const t=babelHelpers.classPrivateFieldLooseBase(this,_)[_](i,(()=>babelHelpers.classPrivateFieldLooseBase(this,C)[C](a)));s.Dom.append(t,e);l=true}if(babelHelpers.classPrivateFieldLooseBase(this,B)[B]&&babelHelpers.classPrivateFieldLooseBase(this,g)[g]){const i=babelHelpers.classPrivateFieldLooseBase(this,g)[g];const a=babelHelpers.classPrivateFieldLooseBase(this,_)[_](d,(()=>babelHelpers.classPrivateFieldLooseBase(this,K)[K](i)));s.Dom.append(a,e);l=true}const a=babelHelpers.classPrivateFieldLooseBase(this,m)[m];if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]&&a){const i=babelHelpers.classPrivateFieldLooseBase(this,_)[_](b,(()=>babelHelpers.classPrivateFieldLooseBase(this,N)[N](a)));s.Dom.append(i,e);l=true}if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]&&a){if(l===true){const i=s.Dom.create("div");s.Dom.addClass(i,"sign-b2e-ui-button-delimiter");s.Dom.append(i,e)}const i=babelHelpers.classPrivateFieldLooseBase(this,_)[_](c,(()=>babelHelpers.classPrivateFieldLooseBase(this,w)[w](a)));s.Dom.append(i,e)}if(babelHelpers.classPrivateFieldLooseBase(this,F)[F]&&a){const i=babelHelpers.classPrivateFieldLooseBase(this,_)[_](v,(()=>babelHelpers.classPrivateFieldLooseBase(this,S)[S](a)));s.Dom.append(i,e)}return e}function M(e,i){const l=s.Dom.create("div");s.Event.bind(l,"click",(e=>{i();e.stopPropagation()}));s.Dom.addClass(l,babelHelpers.classPrivateFieldLooseBase(this,p)[p][e].classes);s.Dom.attr(l,"title",babelHelpers.classPrivateFieldLooseBase(this,p)[p][e].title);return l}function Y(e){const s=new a.SignLink({memberId:e});s.openSlider()}function k(e){const s=new l.SignCancellation;s.cancelWithConfirm(e)}function G(e){return t.Router.openSlider(`/sign/b2e/doc/0/?docId=${e}&stepId=changePartner&noRedirect=Y`)}function V(e){return t.Router.openSlider(`/sign/b2e/preview/0/?docId=${e}&noRedirect=Y`)}function W(e){return t.Router.openSlider(`/bitrix/components/bitrix/sign.document.list/slider.php?type=document&entity_id=${e}&apply_filter=N`)}e.KanbanEntityFooter=D})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Event,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Crm);
//# sourceMappingURL=kanban-entity-footer.bundle.map.js