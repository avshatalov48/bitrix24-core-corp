this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,t,s,o){"use strict";var i=babelHelpers.classPrivateFieldLooseKey("isCancellationInProgress");class n{constructor(){Object.defineProperty(this,i,{writable:true,value:false})}cancelWithConfirm(e){if(babelHelpers.classPrivateFieldLooseBase(this,i)[i]){return}const t=new o.MessageBox({title:s.Loc.getMessage("SIGN_CANCELLATION_ITEM_SIGNING_CANCEL_DIALOG_TITLE"),message:s.Loc.getMessage("SIGN_CANCELLATION_ITEM_SIGNING_CANCEL_DIALOG_TEXT"),modal:true});const n=new BX.UI.Button({text:s.Loc.getMessage("SIGN_CANCELLATION_ITEM_SIGNING_CANCEL_DIALOG_YES_BUTTON_TEXT"),color:BX.UI.Button.Color.DANGER,onclick:s=>{if(babelHelpers.classPrivateFieldLooseBase(this,i)[i]===true){return}babelHelpers.classPrivateFieldLooseBase(this,i)[i]=true;s.setState(BX.UI.Button.State.WAITING);void this.cancelSigningProcess(e).finally((()=>{babelHelpers.classPrivateFieldLooseBase(this,i)[i]=false;t.close()}))}});const a=new BX.UI.Button({text:s.Loc.getMessage("SIGN_CANCELLATION_ITEM_SIGNING_CANCEL_DIALOG_NO_BUTTON_TEXT"),color:BX.UI.Button.Color.LIGHT_BORDER,onclick:()=>{t.close()}});t.setButtons([n,a]);t.show()}cancelSigningProcess(e){return new Promise(((o,i)=>{s.ajax.runAction("sign.api_v1.document.signing.stop",{json:{uid:e},preparePost:false}).then((e=>{t.UI.Notification.Center.notify({content:s.Loc.getMessage("SIGN_CANCELLATION_ITEM_SIGNING_CANCEL_SUCCESS"),autoHideDelay:5e3});o(e)}),(e=>{e.errors.forEach((e=>{t.UI.Notification.Center.notify({content:e.message,autoHideDelay:5e3})}));i(e.errors)})).catch((()=>{i()}))}))}}e.SignCancellation=n})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX,BX.UI.Dialogs);
//# sourceMappingURL=sign-cancellation.bundle.map.js