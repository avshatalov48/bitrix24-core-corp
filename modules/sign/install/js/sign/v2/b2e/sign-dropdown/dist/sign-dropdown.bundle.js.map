{"version":3,"file":"sign-dropdown.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { Tag, Dom } from 'main.core';\nimport { Dialog, type ItemOptions } from 'ui.entity-selector';\nimport './style.css';\n\nexport type { ItemOptions };\n\nexport class SignDropdown\n{\n\t#dom: HTMLElement;\n\t#selector: Dialog;\n\t#selectedItemId: string = '';\n\n\tconstructor(dialogOptions = {})\n\t{\n\t\tconst { className, withCaption } = dialogOptions;\n\t\tconst titleNode = withCaption\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"sign-b2e-dropdown__text\">\n\t\t\t\t\t<span class=\"sign-b2e-dropdown__text_title\"></span>\n\t\t\t\t\t<span class=\"sign-b2e-dropdown__text_caption\"></span>\n\t\t\t\t</div>\n\t\t\t`\n\t\t\t: Tag.render`<span class=\"sign-b2e-dropdown__text\"></span>`;\n\t\tthis.#dom = Tag.render`\n\t\t\t<div\n\t\t\t\tclass=\"sign-b2e-dropdown\"\n\t\t\t\tonclick=\"${() => {\n\t\t\t\t\tthis.#selector.show();\n\t\t\t\t}}\"\n\t\t\t>\n\t\t\t\t${titleNode}\n\t\t\t\t<span class=\"sign-b2e-dropdown__btn\"></span>\n\t\t\t</div>\n\t\t`;\n\t\tthis.#selector = new Dialog({\n\t\t\ttargetNode: this.#dom,\n\t\t\twidth: 500,\n\t\t\theight: 350,\n\t\t\tshowAvatars: false,\n\t\t\tdropdownMode: true,\n\t\t\tmultiple: false,\n\t\t\tenableSearch: true,\n\t\t\thideOnSelect: true,\n\t\t\tevents: {\n\t\t\t\t'Item:OnSelect': ({ data }) => this.#onSelect(data.item),\n\t\t\t},\n\t\t\t...dialogOptions,\n\t\t});\n\t\tif (className)\n\t\t{\n\t\t\tconst container = this.#selector.getContainer();\n\t\t\tDom.addClass(container, className);\n\t\t}\n\t}\n\n\taddItem(item: ItemOptions): void\n\t{\n\t\tthis.#selector.addItem(item);\n\t}\n\n\tselectItem(id: string): void\n\t{\n\t\tconst items = this.#selector.getItems();\n\t\tconst foundItem = items.find((item) => item.id === id);\n\t\tif (!foundItem)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfoundItem.select();\n\t}\n\n\tgetLayout(): HTMLElement\n\t{\n\t\treturn this.#dom;\n\t}\n\n\tgetSelectedId(): string\n\t{\n\t\treturn this.#selectedItemId;\n\t}\n\n\t#onSelect(item: ItemOptions): void\n\t{\n\t\tthis.#selectedItemId = item.id;\n\t\tconst { title, caption } = item;\n\t\tconst { firstElementChild: titleNode } = this.#dom;\n\t\tif (!caption)\n\t\t{\n\t\t\ttitleNode.textContent = title;\n\t\t\ttitleNode.title = title;\n\n\t\t\treturn;\n\t\t}\n\n\t\ttitleNode.title = `${title} ${caption}`;\n\t\ttitleNode.firstElementChild.textContent = title;\n\t\ttitleNode.lastElementChild.textContent = caption;\n\t}\n}\n"],"names":["SignDropdown","constructor","dialogOptions","className","withCaption","titleNode","Tag","render","show","Dialog","targetNode","width","height","showAvatars","dropdownMode","multiple","enableSearch","hideOnSelect","events","data","item","container","getContainer","Dom","addClass","addItem","selectItem","id","items","getItems","foundItem","find","select","getLayout","getSelectedId","title","caption","firstElementChild","textContent","lastElementChild"],"mappings":";;;;;;;;;;;AAAA,CAEqB;CAAA;CAAA;CAAA;AAIrB,CAAO,MAAMA,YAAY,CACzB;GAKCC,WAAW,CAACC,aAAa,GAAG,EAAE,EAC9B;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAH0B;;KAIzB,MAAM;OAAEC,SAAS;OAAEC;MAAa,GAAGF,aAAa;KAChD,MAAMG,UAAS,GAAGD,WAAW,GAC1BE,aAAG,CAACC,MAAM,cAAC;;;;;IAKb,KACED,aAAG,CAACC,MAAM,gBAAC,+CAA6C,EAAC;KAC5D,4CAAI,gBAAQD,aAAG,CAACC,MAAM,gBAAC;;;eAGZ,CAEP;;MAEF,CAAY;;;GAGd,GAPa,MAAM;OAChB,4CAAI,wBAAWC,IAAI,EAAE;MACrB,EAECH,UAAS,CAGZ;KACD,4CAAI,0BAAa,IAAII,wBAAM,CAAC;OAC3BC,UAAU,0CAAE,IAAI,aAAK;OACrBC,KAAK,EAAE,GAAG;OACVC,MAAM,EAAE,GAAG;OACXC,WAAW,EAAE,KAAK;OAClBC,YAAY,EAAE,IAAI;OAClBC,QAAQ,EAAE,KAAK;OACfC,YAAY,EAAE,IAAI;OAClBC,YAAY,EAAE,IAAI;OAClBC,MAAM,EAAE;SACP,eAAe,EAAE,CAAC;WAAEC;UAAM,6CAAK,IAAI,wBAAWA,IAAI,CAACC,IAAI;QACvD;OACD,GAAGlB;MACH,CAAC;KACF,IAAIC,SAAS,EACb;OACC,MAAMkB,SAAS,GAAG,4CAAI,wBAAWC,YAAY,EAAE;OAC/CC,aAAG,CAACC,QAAQ,CAACH,SAAS,EAAElB,SAAS,CAAC;;;GAIpCsB,OAAO,CAACL,IAAiB,EACzB;KACC,4CAAI,wBAAWK,OAAO,CAACL,IAAI,CAAC;;GAG7BM,UAAU,CAACC,EAAU,EACrB;KACC,MAAMC,KAAK,GAAG,4CAAI,wBAAWC,QAAQ,EAAE;KACvC,MAAMC,SAAS,GAAGF,KAAK,CAACG,IAAI,CAAEX,IAAI,IAAKA,IAAI,CAACO,EAAE,KAAKA,EAAE,CAAC;KACtD,IAAI,CAACG,SAAS,EACd;OACC;;KAGDA,SAAS,CAACE,MAAM,EAAE;;GAGnBC,SAAS,GACT;KACC,+CAAO,IAAI;;GAGZC,aAAa,GACb;KACC,+CAAO,IAAI;;CAoBb;CAAC,oBAjBUd,IAAiB,EAC3B;GACC,4CAAI,sCAAmBA,IAAI,CAACO,EAAE;GAC9B,MAAM;KAAEQ,KAAK;KAAEC;IAAS,GAAGhB,IAAI;GAC/B,MAAM;KAAEiB,iBAAiB,EAAEhC;IAAW,2CAAG,IAAI,aAAK;GAClD,IAAI,CAAC+B,OAAO,EACZ;KACC/B,SAAS,CAACiC,WAAW,GAAGH,KAAK;KAC7B9B,SAAS,CAAC8B,KAAK,GAAGA,KAAK;KAEvB;;GAGD9B,SAAS,CAAC8B,KAAK,GAAI,GAAEA,KAAM,IAAGC,OAAQ,EAAC;GACvC/B,SAAS,CAACgC,iBAAiB,CAACC,WAAW,GAAGH,KAAK;GAC/C9B,SAAS,CAACkC,gBAAgB,CAACD,WAAW,GAAGF,OAAO;CACjD;;;;;;;;"}