this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,a,l){"use strict";let i=e=>e,t,r,o,n,c,b,d,v,p,h,B,L,u,P;const H="/bitrix/js/socialnetwork/entity-selector/src/images/default-user.svg";const F=Object.freeze({WhoCanBeRepresentative:"19740734"});var g=babelHelpers.classPrivateFieldLooseKey("userSelector");var m=babelHelpers.classPrivateFieldLooseKey("description");var f=babelHelpers.classPrivateFieldLooseKey("ui");var T=babelHelpers.classPrivateFieldLooseKey("data");var E=babelHelpers.classPrivateFieldLooseKey("setInfoState");var S=babelHelpers.classPrivateFieldLooseKey("setEmptyState");var y=babelHelpers.classPrivateFieldLooseKey("bindEvents");var I=babelHelpers.classPrivateFieldLooseKey("onChangeButtonClickHandler");var X=babelHelpers.classPrivateFieldLooseKey("showItem");var _=babelHelpers.classPrivateFieldLooseKey("onSelectorItemSelectedHandler");var $=babelHelpers.classPrivateFieldLooseKey("refreshView");class D{constructor(e={}){var l;Object.defineProperty(this,$,{value:w});Object.defineProperty(this,_,{value:N});Object.defineProperty(this,X,{value:x});Object.defineProperty(this,I,{value:j});Object.defineProperty(this,y,{value:R});Object.defineProperty(this,S,{value:O});Object.defineProperty(this,E,{value:M});Object.defineProperty(this,g,{writable:true,value:null});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:{container:HTMLDivElement=null,info:{container:HTMLDivElement=null,avatar:HTMLImageElement=null,title:{container:HTMLDivElement=null,name:HTMLDivElement=null,position:HTMLDivElement=null}},changeBtn:{container:HTMLDivElement=null,element:HTMLSpanElement=null},select:{container:HTMLDivElement=null,text:HTMLSpanElement=null,button:HTMLButtonElement=null},description:HTMLParagraphElement=null}});Object.defineProperty(this,T,{writable:true,value:{id:null,name:null,position:null,avatarLink:null}});babelHelpers.classPrivateFieldLooseBase(this,T)[T].id=s.Type.isInteger(e.userId)?e.userId:null;babelHelpers.classPrivateFieldLooseBase(this,m)[m]=e.description;babelHelpers.classPrivateFieldLooseBase(this,g)[g]=new a.UserSelector({multiple:false,context:(l=e.context)!=null?l:"sign_b2e_representative_selector"});babelHelpers.classPrivateFieldLooseBase(this,f)[f].container=this.getLayout()}getLayout(){if(babelHelpers.classPrivateFieldLooseBase(this,f)[f].container){return babelHelpers.classPrivateFieldLooseBase(this,f)[f].container}babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.name=s.Tag.render(t||(t=i`
			<div class="sign-document-b2e-representative-info-user-name"></div>
		`));babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.position=s.Tag.render(r||(r=i`
			<div class="sign-document-b2e-representative-info-user-pos"></div>
		`));babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.avatar=s.Tag.render(o||(o=i`
			<img src="${0}">
		`),H);babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.container=s.Tag.render(n||(n=i`
			<div class="sign-document-b2e-representative-info-user-title">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.name,babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.position);babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.text=s.Tag.render(c||(c=i`
			<span class="sign-document-b2e-representative-select-text">${0}</span>
		`),s.Loc.getMessage("SIGN_PARTIES_REPRESENTATIVE_SELECT_TEXT"));babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.button=s.Tag.render(b||(b=i`
			<button class="ui-btn ui-btn-success ui-btn-xs ui-btn-round">
				${0}
			</button>
		`),s.Loc.getMessage("SIGN_PARTIES_REPRESENTATIVE_SELECT_BUTTON"));babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.container=s.Tag.render(d||(d=i`
			<div class="sign-document-b2e-representative-select">
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.text,babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.button);babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.element=s.Tag.render(v||(v=i`
			<span class="sign-document-b2e-representative-change-btn"></span>
		`));babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.container=s.Tag.render(p||(p=i`
			<div class="sign-document-b2e-representative-change">
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.element);babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.container=s.Tag.render(h||(h=i`
			<div class="sign-document-b2e-representative-info">
				<div class="sign-document-b2e-representative-info-user-photo">
					${0}
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.avatar,babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.container);const e=babelHelpers.classPrivateFieldLooseBase(this,m)[m]?s.Tag.render(B||(B=i`<p class="sign-document-b2e-representative__info_paragraph">${0}</p>`),babelHelpers.classPrivateFieldLooseBase(this,m)[m]):s.Tag.render(L||(L=i`
				<span>
					${0}
				</span>
			`),l.Helpdesk.replaceLink(s.Loc.getMessage("SIGN_PARTIES_REPRESENTATIVE_INFO"),F.WhoCanBeRepresentative));babelHelpers.classPrivateFieldLooseBase(this,f)[f].description=s.Tag.render(u||(u=i`
			<div class="sign-document-b2e-representative__info">
				${0}
			</div>
		`),e);babelHelpers.classPrivateFieldLooseBase(this,f)[f].container=s.Tag.render(P||(P=i`
			<div>
				<div class="sign-document-b2e-representative__selector">
					${0}
					${0}
					${0}
				</div>
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.container,babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.container,babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.container,babelHelpers.classPrivateFieldLooseBase(this,f)[f].description);babelHelpers.classPrivateFieldLooseBase(this,S)[S]();babelHelpers.classPrivateFieldLooseBase(this,y)[y]();return babelHelpers.classPrivateFieldLooseBase(this,f)[f].container}formatSelectButton(e){babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.button.className=`ui-btn ${e}`}format(e,s){babelHelpers.classPrivateFieldLooseBase(this,f)[f][e].className=s}validate(){const e=s.Type.isInteger(this.getRepresentativeId())&&this.getRepresentativeId()>0;if(e){s.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,f)[f].container.firstElementChild,"--invalid")}else{s.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,f)[f].container.firstElementChild,"--invalid")}return e}load(e){const s=babelHelpers.classPrivateFieldLooseBase(this,g)[g].getDialog();s.subscribeOnce("onLoad",(()=>{const a=s.items.get("user");const l=a.get(`${e}`);l.select();babelHelpers.classPrivateFieldLooseBase(this,X)[X](l)}));s.load()}getRepresentativeId(){return babelHelpers.classPrivateFieldLooseBase(this,T)[T].id}onSelectorItemDeselectedHandler(e){babelHelpers.classPrivateFieldLooseBase(this,T)[T].id=null;babelHelpers.classPrivateFieldLooseBase(this,_)[_](e)}}function M(){babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.container.style.display="flex";BX.show(babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.container);BX.show(babelHelpers.classPrivateFieldLooseBase(this,f)[f].description);BX.hide(babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.container)}function O(){BX.hide(babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.container);BX.hide(babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.container);BX.hide(babelHelpers.classPrivateFieldLooseBase(this,f)[f].description);BX.show(babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.container)}function R(){BX.bind(babelHelpers.classPrivateFieldLooseBase(this,f)[f].changeBtn.element,"click",(()=>babelHelpers.classPrivateFieldLooseBase(this,I)[I]()));BX.bind(babelHelpers.classPrivateFieldLooseBase(this,f)[f].select.button,"click",(()=>babelHelpers.classPrivateFieldLooseBase(this,I)[I]()));babelHelpers.classPrivateFieldLooseBase(this,g)[g].subscribe(a.UserSelectorEvent.onItemSelect,(e=>babelHelpers.classPrivateFieldLooseBase(this,_)[_](e)));babelHelpers.classPrivateFieldLooseBase(this,g)[g].subscribe(a.UserSelectorEvent.onItemDeselect,(e=>this.onSelectorItemDeselectedHandler(e)))}function j(){babelHelpers.classPrivateFieldLooseBase(this,g)[g].getDialog().setTargetNode(babelHelpers.classPrivateFieldLooseBase(this,f)[f].container.firstElementChild);babelHelpers.classPrivateFieldLooseBase(this,g)[g].toggle()}function x(e){var a,l,i,t,r;babelHelpers.classPrivateFieldLooseBase(this,T)[T].id=e.id;if(!s.Type.isInteger(babelHelpers.classPrivateFieldLooseBase(this,T)[T].id)||babelHelpers.classPrivateFieldLooseBase(this,T)[T].id<=0){return}const o=(a=(l=e.customData)==null?void 0:l.get("name"))!=null?a:"";const n=(i=(t=e.customData)==null?void 0:t.get("lastName"))!=null?i:"";babelHelpers.classPrivateFieldLooseBase(this,T)[T].name=s.Type.isStringFilled(o)?o:"";if(s.Type.isStringFilled(n)){if(s.Type.isStringFilled(o)){babelHelpers.classPrivateFieldLooseBase(this,T)[T].name+=" "}babelHelpers.classPrivateFieldLooseBase(this,T)[T].name+=n}if(!s.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,T)[T].name)){var c,b;babelHelpers.classPrivateFieldLooseBase(this,T)[T].name=(c=(b=e.customData)==null?void 0:b.get("login"))!=null?c:""}babelHelpers.classPrivateFieldLooseBase(this,T)[T].position=((r=e.customData)==null?void 0:r.get("position"))||"";babelHelpers.classPrivateFieldLooseBase(this,T)[T].avatarLink=(e==null?void 0:e.avatar)||H;babelHelpers.classPrivateFieldLooseBase(this,$)[$]()}function N(e){var s;if(!(e!=null&&(s=e.data)!=null&&s.items)||e.data.items.length===0){babelHelpers.classPrivateFieldLooseBase(this,T)[T].id=null;babelHelpers.classPrivateFieldLooseBase(this,S)[S]();return}const a=e.data.items[0];babelHelpers.classPrivateFieldLooseBase(this,X)[X](a)}function w(){var e,a,l;babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.name.innerText=s.Text.encode((e=babelHelpers.classPrivateFieldLooseBase(this,T)[T])==null?void 0:e.name);babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.title.position.innerText=s.Text.encode((a=babelHelpers.classPrivateFieldLooseBase(this,T)[T])==null?void 0:a.position);babelHelpers.classPrivateFieldLooseBase(this,f)[f].info.avatar.src=(l=babelHelpers.classPrivateFieldLooseBase(this,T)[T])==null?void 0:l.avatarLink;babelHelpers.classPrivateFieldLooseBase(this,E)[E]()}e.RepresentativeSelector=D})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Sign.V2.B2e,BX.Sign.V2);
//# sourceMappingURL=representative-selector.bundle.map.js