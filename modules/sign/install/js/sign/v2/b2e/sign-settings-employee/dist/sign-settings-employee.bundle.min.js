this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,t,a,i,l,r,o,n,c){"use strict";var d="/bitrix/js/sign/v2/b2e/sign-settings-employee/dist/images/no-templates-state-image.svg";let b=e=>e,p,v,g;const u="23174934";var P=babelHelpers.classPrivateFieldLooseKey("cache");var L=babelHelpers.classPrivateFieldLooseKey("containerId");var _=babelHelpers.classPrivateFieldLooseKey("wizard");var S=babelHelpers.classPrivateFieldLooseKey("startProcess");var B=babelHelpers.classPrivateFieldLooseKey("stepsContext");var h=babelHelpers.classPrivateFieldLooseKey("analytics");var m=babelHelpers.classPrivateFieldLooseKey("createHead");var y=babelHelpers.classPrivateFieldLooseKey("getStartProcessStep");var H=babelHelpers.classPrivateFieldLooseKey("getSubmitDocumentInfoStep");var T=babelHelpers.classPrivateFieldLooseKey("getStepsMetadata");var F=babelHelpers.classPrivateFieldLooseKey("getLayout");var E=babelHelpers.classPrivateFieldLooseKey("getZeroTemplatesEmptyState");var f=babelHelpers.classPrivateFieldLooseKey("enableNoStepMode");var I=babelHelpers.classPrivateFieldLooseKey("disableNoStepMode");var O=babelHelpers.classPrivateFieldLooseKey("subscribeOnEvents");class N{constructor(e="",l={}){Object.defineProperty(this,O,{value:U});Object.defineProperty(this,I,{value:A});Object.defineProperty(this,f,{value:K});Object.defineProperty(this,E,{value:j});Object.defineProperty(this,F,{value:G});Object.defineProperty(this,T,{value:C});Object.defineProperty(this,H,{value:X});Object.defineProperty(this,y,{value:w});Object.defineProperty(this,m,{value:M});Object.defineProperty(this,P,{writable:true,value:new t.MemoryCache});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,_,{writable:true,value:void 0});Object.defineProperty(this,S,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:{}});Object.defineProperty(this,h,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e;const r=BX.SidePanel.Instance.getTopSlider();babelHelpers.classPrivateFieldLooseBase(this,S)[S]=new i.StartProcess;babelHelpers.classPrivateFieldLooseBase(this,_)[_]=new o.Wizard(babelHelpers.classPrivateFieldLooseBase(this,T)[T](this),{back:{className:"ui-btn-light-border"},next:{className:"ui-btn-success"},complete:{className:"ui-btn-success",title:s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_COMPLETE_TITLE"),onComplete:()=>r==null?void 0:r.close()},swapButtons:true});babelHelpers.classPrivateFieldLooseBase(this,h)[h]=new a.Analytics({contextOptions:l});babelHelpers.classPrivateFieldLooseBase(this,O)[O]()}async render(){const e=document.getElementById(babelHelpers.classPrivateFieldLooseBase(this,L)[L]);if(e===null){return}this.renderToContainer(e)}async renderToContainer(e){if(s.Type.isNull(e)){return}const t=new n.Loader({target:e});void t.show();const a=await babelHelpers.classPrivateFieldLooseBase(this,S)[S].getTemplates();if(a.length===0){babelHelpers.classPrivateFieldLooseBase(this,h)[h].send({event:"show_empty_state",c_element:"create_button"});s.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,E)[E](),e);void t.hide();return}void t.hide();s.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,F)[F](),e);babelHelpers.classPrivateFieldLooseBase(this,_)[_].moveOnStep(0);babelHelpers.classPrivateFieldLooseBase(this,h)[h].send({event:"click_create_document",c_element:"create_button"})}clearCache(){babelHelpers.classPrivateFieldLooseBase(this,S)[S].resetCache();babelHelpers.classPrivateFieldLooseBase(this,B)[B]={}}}function M(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P].remember("headLayout",(()=>{const{root:e,titleHelp:t}=s.Tag.render(p||(p=b`
				<div class="sign-settings__head">
					<div>
						<p class="sign-settings__head_title">
							${0}
						</p>
						<p class="sign-settings__head_title --sub">
							<span>${0}</span>
							<a ref="titleHelp" class="sign-settings__head_title-help">
								${0}
							</a>
						</p>
					</div>
				</div>
			`),s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_TITLE"),s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_TITLE_SUB"),s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_TITLE_SUB_HELP"));r.Helpdesk.bindHandler(t,"23052076");return e}))}function w(e){const t=babelHelpers.classPrivateFieldLooseBase(e,S)[S];return{get content(){if(s.Type.isUndefined(babelHelpers.classPrivateFieldLooseBase(e,B)[B].selectedTemplateUid)){babelHelpers.classPrivateFieldLooseBase(e,_)[_].toggleBtnActiveState("next",true);if(s.Type.isStringFilled(t.getSelectedTemplateUid())){babelHelpers.classPrivateFieldLooseBase(e,_)[_].toggleBtnActiveState("next",false)}else{t.subscribe(t.events.onProcessTypeSelect,(()=>babelHelpers.classPrivateFieldLooseBase(e,_)[_].toggleBtnActiveState("next",false)))}}const a=t.getLayout();r.SignSettingsItemCounter.numerate(a);babelHelpers.classPrivateFieldLooseBase(e,I)[I]();return a},title:s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_START_PROCESS"),beforeCompletion:async()=>{babelHelpers.classPrivateFieldLooseBase(this,B)[B].selectedTemplateUid=t.getSelectedTemplateUid();babelHelpers.classPrivateFieldLooseBase(this,B)[B].templatesList=await t.getTemplates();babelHelpers.classPrivateFieldLooseBase(this,B)[B].fields=(await t.getFields(babelHelpers.classPrivateFieldLooseBase(this,B)[B].selectedTemplateUid)).fields}}}function X(e){let t=null;return{get content(){const s=babelHelpers.classPrivateFieldLooseBase(e,B)[B].templatesList.find((s=>s.uid===babelHelpers.classPrivateFieldLooseBase(e,B)[B].selectedTemplateUid));t=new l.SubmitDocumentInfo({template:{uid:s.uid,title:s.title},company:s.company,fields:babelHelpers.classPrivateFieldLooseBase(e,B)[B].fields});const a=t.getLayout();if(babelHelpers.classPrivateFieldLooseBase(e,B)[B].fields.length>0){r.SignSettingsItemCounter.numerate(a)}else{babelHelpers.classPrivateFieldLooseBase(e,f)[f]()}return a},title:s.Loc.getMessage("SIGN_SETTINGS_EMPLOYEE_SUBMIT_INFO"),beforeCompletion:async()=>{t.subscribeOnce(t.events.documentSendedSuccessFully,(e=>{const s=e.getData().document;babelHelpers.classPrivateFieldLooseBase(this,h)[h].sendWithProviderTypeAndDocId({event:"sent_document_to_sign",c_element:"create_button",status:"success"},s.id,s.providerCode)}));let e=false;try{e=await t.sendForSign()}catch(s){console.error(s);e=false;babelHelpers.classPrivateFieldLooseBase(this,h)[h].send({event:"sent_document_to_sign",c_element:"create_button",status:"error"})}return e}}}function C(e){return{startProcess:babelHelpers.classPrivateFieldLooseBase(this,y)[y](e),submitDocumentInfo:babelHelpers.classPrivateFieldLooseBase(this,H)[H](e)}}function G(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P].remember("headLayout",(()=>s.Tag.render(v||(v=b`
				<div class="sign-settings__scope sign-settings --b2e --employee">
					<div class="sign-settings__sidebar">
						${0}
						${0}
					</div>
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,m)[m](),babelHelpers.classPrivateFieldLooseBase(this,_)[_].getLayout())))}function j(){return s.Tag.render(g||(g=b`
			<div class="sign-settings__scope sign-settings --b2e --employee">
				<div class="sign-settings__sidebar">
					<div class="sign-settings__empty-state">
						<div class="sign-settings__empty-state_icon">
							<img src="${0}" alt="${0}">
						</div>
						<p class="sign-settings__empty-state_title">
							${0}
						</p>
						<p class="sign-settings__empty-state_text">
							${0}
						</p>
					</div>
				</div>
			</div>
		`),d,s.Loc.getMessage("SIGN_SETTINGS_EMPTY_STATE_ICON_ALT"),s.Loc.getMessage("SIGN_SETTINGS_EMPTY_STATE_TITLE"),r.Helpdesk.replaceLink(s.Loc.getMessage("SIGN_SETTINGS_EMPTY_STATE_DESCRIPTION"),u,r.Helpdesk.defaultRedirectValue,["sign-settings__empty-state_link"]))}function K(){s.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F](),"no-step-mode")}function A(){s.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F](),"no-step-mode")}function U(){c.EventEmitter.subscribe("BX.Sign.SignSettingsEmployee:onBeforeTemplateSend",(()=>{babelHelpers.classPrivateFieldLooseBase(this,_)[_].toggleBtnActiveState("back",true)}));c.EventEmitter.subscribe("BX.Sign.SignSettingsEmployee:onAfterTemplateSend",(()=>{babelHelpers.classPrivateFieldLooseBase(this,_)[_].toggleBtnActiveState("back",false)}))}e.B2EEmployeeSignSettings=N})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX,BX.Cache,BX.Sign.V2,BX.Sign.V2.B2e,BX.Sign.V2.B2e,BX.Sign.V2,BX.Ui,BX,BX.Event);
//# sourceMappingURL=sign-settings-employee.bundle.map.js