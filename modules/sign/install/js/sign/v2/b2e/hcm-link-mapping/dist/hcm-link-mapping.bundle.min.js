this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};(function(e,s,a,i,l,r,t){"use strict";const o=Object.freeze({User:"user",Company:"company"});var c=babelHelpers.classPrivateFieldLooseKey("api");var n=babelHelpers.classPrivateFieldLooseKey("ui");var b=babelHelpers.classPrivateFieldLooseKey("userDialog");var d=babelHelpers.classPrivateFieldLooseKey("loader");var v=babelHelpers.classPrivateFieldLooseKey("data");var p=babelHelpers.classPrivateFieldLooseKey("viewData");var h=babelHelpers.classPrivateFieldLooseKey("loadCompany");var P=babelHelpers.classPrivateFieldLooseKey("loadUser");var L=babelHelpers.classPrivateFieldLooseKey("load");var H=babelHelpers.classPrivateFieldLooseKey("refreshView");var u=babelHelpers.classPrivateFieldLooseKey("getLoader");var y=babelHelpers.classPrivateFieldLooseKey("hideLoader");var F=babelHelpers.classPrivateFieldLooseKey("showLoader");let B=e=>e,g,m,f,w,_;const k=6;const K="/bitrix/js/socialnetwork/entity-selector/src/images/default-user.svg";var I=babelHelpers.classPrivateFieldLooseKey("api");var M=babelHelpers.classPrivateFieldLooseKey("documentUid");var E=babelHelpers.classPrivateFieldLooseKey("integrationId");var S=babelHelpers.classPrivateFieldLooseKey("employeeIds");var N=babelHelpers.classPrivateFieldLooseKey("participantsIds");var O=babelHelpers.classPrivateFieldLooseKey("container");var T=babelHelpers.classPrivateFieldLooseKey("usersPreviewContainer");var X=babelHelpers.classPrivateFieldLooseKey("enabled");var U=babelHelpers.classPrivateFieldLooseKey("openMapper");var j=babelHelpers.classPrivateFieldLooseKey("loadUsersAvatarMap");var C=babelHelpers.classPrivateFieldLooseKey("updateUsersPreview");var D=babelHelpers.classPrivateFieldLooseKey("getUsersPreviewContainer");class V extends s.EventEmitter{constructor(e){super();Object.defineProperty(this,D,{value:x});Object.defineProperty(this,C,{value:A});Object.defineProperty(this,j,{value:$});Object.defineProperty(this,U,{value:G});Object.defineProperty(this,I,{writable:true,value:void 0});Object.defineProperty(this,M,{writable:true,value:null});Object.defineProperty(this,E,{writable:true,value:null});Object.defineProperty(this,S,{writable:true,value:[]});Object.defineProperty(this,N,{writable:true,value:[]});Object.defineProperty(this,O,{writable:true,value:null});Object.defineProperty(this,T,{writable:true,value:null});Object.defineProperty(this,X,{writable:true,value:false});babelHelpers.classPrivateFieldLooseBase(this,I)[I]=e.api;this.setEventNamespace("BX.Sign.V2.B2e.HcmLinkMapping");babelHelpers.classPrivateFieldLooseBase(this,O)[O]=this.render()}render(){if(babelHelpers.classPrivateFieldLooseBase(this,O)[O]){return babelHelpers.classPrivateFieldLooseBase(this,O)[O]}const{root:e,syncButton:s}=i.Tag.render(g||(g=B`
			<div class="sign-b2e-hcm-link-party-checker-container --orange">
				<div class="sign-b2e-hcm-link-party-checker-wrapper">
					<div class="sign-b2e-hcm-link-party-checker-wrapper-part --left">
						<div class="sign-b2e-hcm-link-party-checker-title">
							${0}
						</div>
						<div class="sign-b2e-hcm-link-party-checker-description">
							${0}
						</div>
					</div>
					<div class="sign-b2e-hcm-link-party-checker-wrapper-part --right">
						${0}
						<div class="sign-b2e-hcm-link-party-checker__action-button" ref="syncButton">
							${0}
						</div>
					</div>
				</div>
			</div>
		`),i.Loc.getMessage("SIGN_V2_B2E_HCM_LINK_MAPPING_TITLE"),i.Loc.getMessage("SIGN_V2_B2E_HCM_LINK_MAPPING_TEXT"),babelHelpers.classPrivateFieldLooseBase(this,D)[D](),i.Loc.getMessage("SIGN_V2_B2E_HCM_LINK_MAPPING_SYNC_BUTTON"));i.Event.bind(s,"click",(()=>babelHelpers.classPrivateFieldLooseBase(this,U)[U]()));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=e;this.hide();return babelHelpers.classPrivateFieldLooseBase(this,O)[O]}setEnabled(e){babelHelpers.classPrivateFieldLooseBase(this,X)[X]=e}setDocumentUid(e){babelHelpers.classPrivateFieldLooseBase(this,M)[M]=e}async check(){if(!i.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,M)[M])){return true}const{integrationId:e,userIds:s,allUserIds:a}=await babelHelpers.classPrivateFieldLooseBase(this,I)[I].checkNotMappedMembersHrIntegration(babelHelpers.classPrivateFieldLooseBase(this,M)[M]);babelHelpers.classPrivateFieldLooseBase(this,N)[N]=a;babelHelpers.classPrivateFieldLooseBase(this,S)[S]=s;babelHelpers.classPrivateFieldLooseBase(this,E)[E]=e;if(babelHelpers.classPrivateFieldLooseBase(this,S)[S].length>0){await babelHelpers.classPrivateFieldLooseBase(this,C)[C]()}return!i.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,S)[S])}hide(){i.Dom.hide(babelHelpers.classPrivateFieldLooseBase(this,O)[O])}show(){i.Dom.show(babelHelpers.classPrivateFieldLooseBase(this,O)[O])}}function G(){a.Mapper.openSlider({companyId:babelHelpers.classPrivateFieldLooseBase(this,E)[E],userIds:new Set(babelHelpers.classPrivateFieldLooseBase(this,N)[N]),mode:a.Mapper.MODE_DIRECT},{onCloseHandler:()=>{this.emit("update")}})}function $(e){return new Promise((s=>{const a=new r.Dialog({entities:[{id:o.User}],events:{onLoad:e=>{const i=a.getSelectedItems();const l=new Map;i.forEach((e=>{l.set(Number(e.id),e.avatar)}));s(l)}},preselectedItems:e.map((e=>["user",e]))});a.load()}))}async function A(){const e=babelHelpers.classPrivateFieldLooseBase(this,S)[S].length;const s=babelHelpers.classPrivateFieldLooseBase(this,S)[S].slice(0,k);const a=await babelHelpers.classPrivateFieldLooseBase(this,j)[j](s);i.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,D)[D]());const l=i.Tag.render(m||(m=B`
			<div class="sign-b2e-hcm-link-party-checker-users-avatar-container"></div>
		`));s.forEach((e=>{var s;const r=(s=a.get(e))!=null?s:K;const t=i.Tag.render(f||(f=B`
				<div class="sign-b2e-hcm-link-party-checker-user-preview --orange">
					<img src="${0}">
				</div>
			`),r);i.Dom.append(t,l)}));i.Dom.append(l,babelHelpers.classPrivateFieldLooseBase(this,D)[D]());const r=e-k;if(r>0){const e=i.Tag.render(w||(w=B`
				<div class="sign-b2e-hcm-link-party-checker-users-preview-counter">
					${0}
				</div>
			`),i.Loc.getMessage("SIGN_V2_B2E_HCM_LINK_EMPLOYEE_USERS_COUNT_PLUS",{"#COUNT#":r}));i.Dom.append(e,babelHelpers.classPrivateFieldLooseBase(this,D)[D]())}}function x(){if(!babelHelpers.classPrivateFieldLooseBase(this,T)[T]){babelHelpers.classPrivateFieldLooseBase(this,T)[T]=i.Tag.render(_||(_=B`
				<div class="sign-b2e-hcm-link-party-checker-users-preview-container"></div>
			`))}return babelHelpers.classPrivateFieldLooseBase(this,T)[T]}e.HcmLinkMapping=V})(this.BX.Sign.V2.B2e=this.BX.Sign.V2.B2e||{},BX.Event,BX.Humanresources.Hcmlink,BX,BX,BX.UI.EntitySelector,BX.Sign.V2);
//# sourceMappingURL=hcm-link-mapping.bundle.map.js