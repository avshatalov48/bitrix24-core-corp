this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};this.BX.Sign.V2=this.BX.Sign.V2||{};this.BX.Sign.V2.Grid=this.BX.Sign.V2.Grid||{};(function(e,t,s,i,o,a){"use strict";var n=babelHelpers.classPrivateFieldLooseKey("analytics");var l=babelHelpers.classPrivateFieldLooseKey("api");var c=babelHelpers.classPrivateFieldLooseKey("changeVisibility");var r=babelHelpers.classPrivateFieldLooseKey("sendActionStateAnalytics");var d=babelHelpers.classPrivateFieldLooseKey("downloadStringLikeFile");class _{constructor(){Object.defineProperty(this,d,{value:g});Object.defineProperty(this,r,{value:L});Object.defineProperty(this,c,{value:E});Object.defineProperty(this,n,{writable:true,value:new s.Analytics});Object.defineProperty(this,l,{writable:true,value:new i.Api})}async deleteTemplate(e){const s=document.createElement("div");s.innerHTML=t.Loc.getMessage("SIGN_TEMPLATE_DELETE_CONFIRMATION_MESSAGE");t.Dom.style(s,"margin-top","5%");t.Dom.style(s,"color","#535c69");o.MessageBox.show({title:t.Loc.getMessage("SIGN_TEMPLATE_DELETE_CONFIRMATION_TITLE"),message:s.outerHTML,modal:true,buttons:[new BX.UI.Button({text:t.Loc.getMessage("SIGN_TEMPLATE_GRID_DELETE_POPUP_YES"),color:BX.UI.Button.Color.PRIMARY,onclick:async s=>{try{const s=babelHelpers.classPrivateFieldLooseBase(this,l)[l];await s.deleteTemplate(e);window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_DELETE_HINT_SUCCESS")})}catch{window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_DELETE_HINT_FAIL")})}await this.reload();s.getContext().close()}}),new BX.UI.Button({text:t.Loc.getMessage("SIGN_TEMPLATE_GRID_DELETE_POPUP_NO"),color:BX.UI.Button.Color.LINK,onclick:e=>{e.getContext().close()}})]})}async renderSwitcher(e,s,i,o){const n=document.getElementById(`switcher_b2e_template_grid_${e}`);const l=new a.Switcher({node:n,checked:s,size:a.SwitcherSize.medium,disabled:i,handlers:{toggled:async()=>{l.setLoading(true);const t=l.isChecked();const s=t?"visible":"invisible";try{await babelHelpers.classPrivateFieldLooseBase(this,c)[c](e,s)}catch{l.setLoading(false);l.check(!t,false)}finally{babelHelpers.classPrivateFieldLooseBase(this,r)[r](t,e);l.setLoading(false)}}}});if(!i){return}const d=o?t.Loc.getMessage("SIGN_TEMPLATE_BLOCKED_SWITCHER_HINT"):t.Loc.getMessage("SIGN_TEMPLATE_BLOCKED_SWITCHER_HINT_NO_ACCESS");n.setAttribute("title",d)}reload(){t.Event.ready((()=>{var e;const s=(e=BX.Main.gridManager.getById("SIGN_B2E_EMPLOYEE_TEMPLATE_LIST_GRID"))==null?void 0:e.instance;if(t.Type.isObject(s)){s.reload()}}))}reloadAfterSliderClose(e){BX.Event.EventEmitter.subscribe("SidePanel.Slider:onCloseComplete",(async s=>{const i="/sign/b2e/doc/0/";const o=s.getData()[0].getSlider().getUrl();const a=new t.Uri(o);const n=a.getPath();if(o===e||n.startsWith(i)||o==="sign-settings-template-created"){await this.reload()}}))}async exportBlank(e){try{const{json:s,filename:i}=await babelHelpers.classPrivateFieldLooseBase(this,l)[l].template.exportBlank(e);const o="application/json";babelHelpers.classPrivateFieldLooseBase(this,d)[d](s,i,o);window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_EXPORT_BLANK_SUCCESS")})}catch(e){console.error(e);window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_EXPORT_BLANK_FAILURE")})}}async copyTemplate(e){try{await babelHelpers.classPrivateFieldLooseBase(this,l)[l].copyTemplate(e);await this.reload();window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_COPY_HINT_SUCCESS")})}catch(e){console.error("Error copying template:",e);window.top.BX.UI.Notification.Center.notify({content:t.Loc.getMessage("SIGN_TEMPLATE_GRID_COPY_HINT_FAIL")})}}}function E(e,t){const s=babelHelpers.classPrivateFieldLooseBase(this,l)[l];return s.changeTemplateVisibility(e,t)}function L(e,t){babelHelpers.classPrivateFieldLooseBase(this,n)[n].send({category:"templates",event:"turn_on_off_template",type:"manual",c_section:"sign",c_sub_section:"templates",c_element:e?"on":"off",p5:`templateid_${t}`})}function g(e,s,i){const o=new Blob([e],{type:i});const a=window.URL.createObjectURL(o);const n=document.createElement("a");t.Dom.style(n,"display","none");n.href=a;n.download=s;t.Dom.append(n,document.body);n.click();window.URL.revokeObjectURL(a);t.Dom.remove(n)}e.Templates=_})(this.BX.Sign.V2.Grid.B2e=this.BX.Sign.V2.Grid.B2e||{},BX,BX.Sign.V2,BX.Sign.V2,BX.UI.Dialogs,BX.UI);
//# sourceMappingURL=index.bundle.map.js