this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,t,l,a,i,r,o,n,d,c,b,v){"use strict";let p=e=>e,h,L;var P=babelHelpers.classPrivateFieldLooseKey("layout");var u=babelHelpers.classPrivateFieldLooseKey("props");var B=babelHelpers.classPrivateFieldLooseKey("titleNode");var F=babelHelpers.classPrivateFieldLooseKey("descriptionNode");var g=babelHelpers.classPrivateFieldLooseKey("createListItem");class H{constructor(e){Object.defineProperty(this,g,{value:y});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,B)[B]=d.Tag.render(h||(h=p`
			<span class="sign-blank-selector__list_item-title"></span>
		`));babelHelpers.classPrivateFieldLooseBase(this,F)[F]=d.Tag.render(L||(L=p`
			<span class="sign-blank-selector__list_item-info"></span>
		`));this.setProps(e);babelHelpers.classPrivateFieldLooseBase(this,P)[P]=babelHelpers.classPrivateFieldLooseBase(this,g)[g]()}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,P)[P]}setTitle(e=""){babelHelpers.classPrivateFieldLooseBase(this,B)[B].textContent=e;babelHelpers.classPrivateFieldLooseBase(this,B)[B].title=e;this.setProps({...this.getProps(),title:e})}setDescription(e=""){babelHelpers.classPrivateFieldLooseBase(this,F)[F].textContent=e;babelHelpers.classPrivateFieldLooseBase(this,F)[F].title=e;this.setProps({...this.getProps(),description:e})}getProps(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]}setProps(e){babelHelpers.classPrivateFieldLooseBase(this,u)[u]=e}}function y(){const{title:e,description:s,modifier:t}=this.getProps();this.setTitle(e);this.setDescription(s);return d.Dom.create("div",{attrs:{className:`sign-blank-selector__list_item --${t}`},children:[babelHelpers.classPrivateFieldLooseBase(this,B)[B],babelHelpers.classPrivateFieldLooseBase(this,F)[F]]})}let f=e=>e,m,_,S,E;var T=babelHelpers.classPrivateFieldLooseKey("placeholder");var O=babelHelpers.classPrivateFieldLooseKey("preview");var k=babelHelpers.classPrivateFieldLooseKey("loader");class w extends H{constructor(e){super({...e,modifier:"blank"});Object.defineProperty(this,T,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});Object.defineProperty(this,k,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,T)[T]=d.Tag.render(m||(m=f`<div class="sign-blank-selector__list_item-status"></div>`));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=d.Tag.render(_||(_=f`
			<div class="sign-blank-selector__list_item-preview" hidden>
				<img
					onload="${0}"
				/>
			</div>
		`),(()=>{babelHelpers.classPrivateFieldLooseBase(this,O)[O].hidden=false;babelHelpers.classPrivateFieldLooseBase(this,T)[T].hidden=true}));babelHelpers.classPrivateFieldLooseBase(this,k)[k]=new o.Loader({size:30,target:babelHelpers.classPrivateFieldLooseBase(this,T)[T]});const s=this.getLayout();d.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,T)[T],s);d.Dom.prepend(babelHelpers.classPrivateFieldLooseBase(this,O)[O],s)}setAvatarWithDescription(e,s){this.setDescription(e);this.setProps({...this.getProps(),userAvatarUrl:s});const t=s?d.Tag.render(S||(S=f`
				<img class="sign-blank-selector__list_item-info-avatar" src="${0}" />
			`),s):d.Tag.render(E||(E=f`
				<span class="sign-blank-selector__list_item-info-avatar ui-icon ui-icon-common-user">
					<i></i>
				</span>
			`));const{lastElementChild:l}=this.getLayout();d.Dom.prepend(t,l)}select(){d.Dom.addClass(this.getLayout(),"--active")}deselect(){d.Dom.removeClass(this.getLayout(),"--active");this.getLayout().blur()}remove(){d.Dom.remove(this.getLayout())}setId(e){this.getLayout().dataset.id=e}setReady(e){if(!e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].show();return}const s=this.getLayout();s.tabIndex="0";babelHelpers.classPrivateFieldLooseBase(this,k)[k].hide();d.Dom.addClass(s,"--loaded")}setPreview(e){if(e){babelHelpers.classPrivateFieldLooseBase(this,O)[O].firstElementChild.src=e}}}let C=e=>e,I;var K=babelHelpers.classPrivateFieldLooseKey("cache");var D=babelHelpers.classPrivateFieldLooseKey("setOptions");var N=babelHelpers.classPrivateFieldLooseKey("getOptions");var A=babelHelpers.classPrivateFieldLooseKey("getApi");var j=babelHelpers.classPrivateFieldLooseKey("getBlankSelector");var R=babelHelpers.classPrivateFieldLooseKey("getTagSelector");var U=babelHelpers.classPrivateFieldLooseKey("resetBlankSelector");class M extends c.EventEmitter{constructor(e){var s;super();Object.defineProperty(this,U,{value:V});Object.defineProperty(this,R,{value:W});Object.defineProperty(this,j,{value:G});Object.defineProperty(this,A,{value:$});Object.defineProperty(this,N,{value:X});Object.defineProperty(this,D,{value:x});Object.defineProperty(this,K,{writable:true,value:new d.Cache.MemoryCache});this.setEventNamespace("BX.Sign.BlankSelector.BlankField");this.subscribeFromOptions(e==null?void 0:e.events);babelHelpers.classPrivateFieldLooseBase(this,D)[D](e);const t=e==null?void 0:(s=e.data)==null?void 0:s.blankId;if(d.Type.isStringFilled(t)||d.Type.isNumber(t)){babelHelpers.classPrivateFieldLooseBase(this,A)[A]().getBlankById(e.data.blankId).then((({id:e,title:s})=>{babelHelpers.classPrivateFieldLooseBase(this,R)[R]().addTag({id:e,title:s,entityId:"blank"})}))}}getLayout(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("layout",(()=>{const e=d.Tag.render(I||(I=C`
				<div class="sign-blank-selector-field">
				</div>
			`));babelHelpers.classPrivateFieldLooseBase(this,R)[R]().renderTo(e);return e}))}renderTo(e){if(d.Type.isDomNode(e)){d.Dom.append(this.getLayout(),e)}}}function x(e){babelHelpers.classPrivateFieldLooseBase(this,K)[K].set("options",e)}function X(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].get("options",{})}function $(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("api",(()=>new b.Api))}function G(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("blankSelector",(()=>new we({...babelHelpers.classPrivateFieldLooseBase(this,N)[N]().selectorOptions,events:{toggleSelection:e=>{const{id:s,title:t,selected:l}=e.getData();const a=babelHelpers.classPrivateFieldLooseBase(this,R)[R]();if(l){a.addTag({id:s,title:t,entityId:"blank"});a.showAddButton();this.emit("onSelect",e);return}if(a.getTags().length===0){a.showAddButton()}this.emit("onCancel")},onSliderClose:()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,R)[R]();if(e.getTags().length===0){e.showAddButton()}babelHelpers.classPrivateFieldLooseBase(this,U)[U]()}}})))}function W(){return babelHelpers.classPrivateFieldLooseBase(this,K)[K].remember("tagSelector",(()=>new v.TagSelector({id:d.Text.getRandom(),multiple:false,showTextBox:false,addButtonCaption:d.Loc.getMessage("SIGN_BLANK_SELECTOR_FIELD_ADD_BUTTON_LABEL"),tagMaxWidth:500,events:{onAddButtonClick:()=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j]().openInSlider();babelHelpers.classPrivateFieldLooseBase(this,R)[R]().hideTextBox()},onAfterTagRemove:()=>{babelHelpers.classPrivateFieldLooseBase(this,R)[R]().hideTextBox();babelHelpers.classPrivateFieldLooseBase(this,R)[R]().showAddButton();this.emit("onRemove")}}})))}function V(){babelHelpers.classPrivateFieldLooseBase(this,K)[K].delete("blankSelector")}let z=e=>e,Y,q,J,Q,Z,ee;const se={controller:"sign.upload.blankUploadController",acceptedFileTypes:[".jpg",".jpeg",".png",".pdf",".doc",".docx",".rtf",".odt"],multiple:true,autoUpload:false,maxFileSize:50*1024*1024,maxFileCount:100,imageMaxFileSize:10*1024*1024,maxTotalFileSize:50*1024*1024};const te={id:"qwerty",padding:20,offsetLeft:40,offsetTop:-12,angle:true,darkMode:true,width:300,autoHide:true,cacheable:false,bindOptions:{position:"bottom"}};var le=babelHelpers.classPrivateFieldLooseKey("cache");var ae=babelHelpers.classPrivateFieldLooseKey("blanks");var ie=babelHelpers.classPrivateFieldLooseKey("tileWidget");var re=babelHelpers.classPrivateFieldLooseKey("tileWidgetContainer");var oe=babelHelpers.classPrivateFieldLooseKey("uploadButtonsContainer");var ne=babelHelpers.classPrivateFieldLooseKey("relatedTarget");var de=babelHelpers.classPrivateFieldLooseKey("blanksContainer");var ce=babelHelpers.classPrivateFieldLooseKey("page");var be=babelHelpers.classPrivateFieldLooseKey("loadMoreButton");var ve=babelHelpers.classPrivateFieldLooseKey("api");var pe=babelHelpers.classPrivateFieldLooseKey("config");var he=babelHelpers.classPrivateFieldLooseKey("checkForFilesValid");var Le=babelHelpers.classPrivateFieldLooseKey("onFileBeforeAdd");var Pe=babelHelpers.classPrivateFieldLooseKey("getImagesLimit");var ue=babelHelpers.classPrivateFieldLooseKey("onFileAdd");var Be=babelHelpers.classPrivateFieldLooseKey("onFileRemove");var Fe=babelHelpers.classPrivateFieldLooseKey("onUploadStart");var ge=babelHelpers.classPrivateFieldLooseKey("toggleTileVisibility");var He=babelHelpers.classPrivateFieldLooseKey("createUploadButtons");var ye=babelHelpers.classPrivateFieldLooseKey("resumeUploading");var fe=babelHelpers.classPrivateFieldLooseKey("loadBlanks");var me=babelHelpers.classPrivateFieldLooseKey("setupBlank");var _e=babelHelpers.classPrivateFieldLooseKey("normalizeTitle");var Se=babelHelpers.classPrivateFieldLooseKey("addBlank");var Ee=babelHelpers.classPrivateFieldLooseKey("setSaveButtonIntoSlider");var Te=babelHelpers.classPrivateFieldLooseKey("disableSaveButtonIntoSlider");var Oe=babelHelpers.classPrivateFieldLooseKey("enableSaveButtonIntoSlider");var ke=babelHelpers.classPrivateFieldLooseKey("getSaveButtonIntoSlider");class we extends c.EventEmitter{constructor(e){var s;super();Object.defineProperty(this,ke,{value:ze});Object.defineProperty(this,Oe,{value:Ve});Object.defineProperty(this,Te,{value:We});Object.defineProperty(this,Ee,{value:Ge});Object.defineProperty(this,Se,{value:$e});Object.defineProperty(this,_e,{value:Xe});Object.defineProperty(this,me,{value:xe});Object.defineProperty(this,fe,{value:Me});Object.defineProperty(this,ye,{value:Ue});Object.defineProperty(this,He,{value:Re});Object.defineProperty(this,ge,{value:je});Object.defineProperty(this,Fe,{value:Ae});Object.defineProperty(this,Be,{value:Ne});Object.defineProperty(this,ue,{value:De});Object.defineProperty(this,Pe,{value:Ke});Object.defineProperty(this,Le,{value:Ie});Object.defineProperty(this,he,{value:Ce});Object.defineProperty(this,le,{writable:true,value:new d.Cache.MemoryCache});Object.defineProperty(this,ae,{writable:true,value:void 0});Object.defineProperty(this,ie,{writable:true,value:void 0});Object.defineProperty(this,re,{writable:true,value:void 0});Object.defineProperty(this,oe,{writable:true,value:void 0});Object.defineProperty(this,ne,{writable:true,value:void 0});Object.defineProperty(this,de,{writable:true,value:void 0});Object.defineProperty(this,ce,{writable:true,value:void 0});Object.defineProperty(this,be,{writable:true,value:void 0});Object.defineProperty(this,ve,{writable:true,value:void 0});Object.defineProperty(this,pe,{writable:true,value:void 0});this.setEventNamespace("BX.Sign.V2.BlankSelector");this.subscribeFromOptions((s=e==null?void 0:e.events)!=null?s:{});babelHelpers.classPrivateFieldLooseBase(this,pe)[pe]=e;this.selectedBlankId=0;babelHelpers.classPrivateFieldLooseBase(this,ae)[ae]=new Map;babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=0;const t=babelHelpers.classPrivateFieldLooseBase(this,He)[He]();const l=d.Tag.render(Y||(Y=z`
			<label class="sign-blank-selector__list_drag-area-label">
				${0}
			</label>
		`),d.Loc.getMessage("SIGN_BLANK_SELECTOR_DRAG_AREA"));const a={slots:{afterDropArea:{computed:{title:()=>d.Loc.getMessage("SIGN_BLANK_SELECTOR_CLEAR_ALL")},methods:{clear:()=>{this.clearFiles({removeFromServer:false})}},template:`\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tclass="sign-blank-selector__tile-widget_clear-btn"\n\t\t\t\t\t\t\t:title="title"\n\t\t\t\t\t\t\t@click="clear()"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t`}}};babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]=d.Tag.render(q||(q=z`
			<div class="sign-blank-selector__list --with-buttons">
				${0}
				${0}
			</div>
		`),t,l);babelHelpers.classPrivateFieldLooseBase(this,ie)[ie]=new i.TileWidget({...se,...e.uploaderOptions,dropElement:babelHelpers.classPrivateFieldLooseBase(this,oe)[oe],browseElement:[...t,l],events:{[r.UploaderEvent.BEFORE_FILES_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,Le)[Le](e),[r.UploaderEvent.FILE_ADD]:e=>babelHelpers.classPrivateFieldLooseBase(this,ue)[ue](e),[r.UploaderEvent.FILE_REMOVE]:e=>babelHelpers.classPrivateFieldLooseBase(this,Be)[Be](e),[r.UploaderEvent.UPLOAD_START]:e=>babelHelpers.classPrivateFieldLooseBase(this,Fe)[Fe](e)}},a);babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=null;d.Event.bind(document,"mousedown",(e=>{babelHelpers.classPrivateFieldLooseBase(this,ne)[ne]=e.target}));babelHelpers.classPrivateFieldLooseBase(this,de)[de]=d.Tag.render(J||(J=z`
			<div
				class="sign-blank-selector__list"
				onfocusin="${0}"
				onclick="${0}"
			></div>
		`),(({target:e})=>{this.selectBlank(Number(e.dataset.id))}),(({target:e,ctrlKey:s,metaKey:t})=>{if(s||t){this.resetSelectedBlank(Number(e.dataset.id),babelHelpers.classPrivateFieldLooseBase(this,ne)[ne])}}));babelHelpers.classPrivateFieldLooseBase(this,re)[re]=d.Tag.render(Q||(Q=z`
			<div class="sign-blank-selector__tile-widget"></div>
		`));babelHelpers.classPrivateFieldLooseBase(this,be)[be]=d.Tag.render(Z||(Z=z`
			<div class="sign-blank-selector__load-more --hidden">
				<span onclick="${0}">
					${0}
				</span>
			</div>
		`),(()=>babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]+1)),d.Loc.getMessage("SIGN_BLANK_SELECTOR_LOAD_MORE"));babelHelpers.classPrivateFieldLooseBase(this,ve)[ve]=new b.Api}async createBlankFromOuterUploaderFiles(e){if(e.length===0){return}const s=e.at(0);const t=new w({title:s.getName()});t.setReady(false);d.Dom.prepend(t.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,de)[de]);try{var a;const s=e.map((e=>e.getServerFileId()));const i=await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].createBlank(s,(a=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].type)!=null?a:null,l.isTemplateMode(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].documentMode));babelHelpers.classPrivateFieldLooseBase(this,me)[me]({...i,userName:d.Loc.getMessage("SIGN_BLANK_SELECTOR_CREATED_MYSELF")},t);return i.id}catch(e){t==null?void 0:t.remove==null?void 0:t.remove();console.log(e);throw e}}async createBlank(){const e=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();const s=e.getFiles();if(s.length===0){return}const[t]=s;await babelHelpers.classPrivateFieldLooseBase(this,ye)[ye]();const a=t.getCustomData(t.getId());try{var i;const e=s.map((e=>e.getServerFileId()));const t=await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].createBlank(e,(i=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].type)!=null?i:null,l.isTemplateMode(babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].documentMode));babelHelpers.classPrivateFieldLooseBase(this,me)[me]({...t,userName:d.Loc.getMessage("SIGN_BLANK_SELECTOR_CREATED_MYSELF")},a);return t.id}catch(e){a.remove();throw e}}resetSelectedBlank(){const e=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(this.selectedBlankId);e==null?void 0:e.deselect();this.selectedBlankId=0;if(e){this.emit("toggleSelection",{selected:false})}babelHelpers.classPrivateFieldLooseBase(this,Oe)[Oe]()}async modifyBlankTitle(e,s){let t=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e);if(!t){await this.loadBlankById(e);t=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e)}t.setTitle(s)}hasBlank(e){return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].has(e)}getBlank(e){return babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e)}async loadBlankById(e){const s=await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].getBlankById(e);if(!this.hasBlank(e)){const e=new w({title:s.title});babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](s,e)}}async selectBlank(e){if(e!==this.selectedBlankId){this.resetSelectedBlank()}this.selectedBlankId=e;babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](false);let s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e);if(!s){await this.loadBlankById(e);s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e)}const{title:t}=s.getProps();s.select();this.emit("toggleSelection",{id:e,selected:true,title:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](t)})}deleteBlank(e){const s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e);if(s){babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].delete(e);s.remove()}}clearFiles(e){const s=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();s.removeFiles(e)}isFilesReadyForUpload(){if(babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader().getFiles().length===0){return false}return babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader().getFiles().every((e=>e.getErrors().length<=0))}getLayout(){var e;babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].renderTo(babelHelpers.classPrivateFieldLooseBase(this,re)[re]);babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](false);const s=(e=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].canUploadNewBlank)!=null?e:true;const t=d.Tag.render(ee||(ee=z`
			<div class="sign-blank-selector">
				${0}
				${0}
				<p class="sign-blank-selector__templates_title">
					${0}
				</p>
				${0}
				${0}
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,re)[re],s?babelHelpers.classPrivateFieldLooseBase(this,oe)[oe]:"",d.Loc.getMessage("SIGN_BLANK_SELECTOR_RECENT_TEMPLATES_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,de)[de],babelHelpers.classPrivateFieldLooseBase(this,be)[be]);if(babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]===0){babelHelpers.classPrivateFieldLooseBase(this,fe)[fe](1)}return t}openInSlider(){const e=d.Reflection.getClass("BX.SidePanel");if(!d.Type.isNil(e)){e.Instance.open("v2-blank-selector",{width:628,cacheable:false,events:{onClose:()=>{this.emit("onSliderClose")}},contentCallback:()=>a.Layout.createContent({extensions:["sign.v2.blank-selector"],title:d.Loc.getMessage("SIGN_BLANK_SELECTOR_SLIDER_TITLE"),content:()=>this.getLayout(),buttons:({cancelButton:s,SaveButton:t})=>{babelHelpers.classPrivateFieldLooseBase(this,Ee)[Ee](new t({text:d.Loc.getMessage("SIGN_BLANK_SELECTOR_SLIDER_SELECT_BLANK_BUTTON_LABEL"),onclick:()=>{e.Instance.close()}}));babelHelpers.classPrivateFieldLooseBase(this,Te)[Te]();return[babelHelpers.classPrivateFieldLooseBase(this,ke)[ke](),s]}})})}}disableSelectedBlank(e){const s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e);if(s){d.Dom.addClass(s.getLayout(),"--disabled")}}enableSelectedBlank(e){const s=babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].get(e);if(s){d.Dom.removeClass(s.getLayout(),"--disabled")}}}function Ce(e){const s=e=>e.getType().includes("image/");const t=e.every((e=>s(e)));const l=e.every((e=>se.acceptedFileTypes.includes(`.${e.getExtension()}`)));if(!l||e.length>1&&!t){return false}const a=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();const i=a.getFiles();const r=i.length;const o=babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]();if(r===0&&e.length===1){return true}const n=i.every((e=>s(e)));return t&&n&&o-r>=e.length}function Ie(e){const{files:s}=e.getData();const l=babelHelpers.classPrivateFieldLooseBase(this,he)[he](s);if(l){return}let a=babelHelpers.classPrivateFieldLooseBase(this,oe)[oe].firstElementChild;if(d.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe],"--hidden")){const{$refs:{container:e}}=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getRootComponent();a=e.firstElementChild}const i=new t.Popup({...te,bindElement:a,content:d.Loc.getMessage("SIGN_BLANK_SELECTOR_UPLOAD_HINT",{"%imageCountLimit%":babelHelpers.classPrivateFieldLooseBase(this,Pe)[Pe]()})});i.show();e.preventDefault()}function Ke(){var e,s,t,l;return d.Type.isInteger(parseInt((e=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe])==null?void 0:(s=e.uploaderOptions)==null?void 0:s.maxFileCount,10))?(t=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe])==null?void 0:(l=t.uploaderOptions)==null?void 0:l.maxFileCount:se.maxFileCount}function De(e){const s=e.data.file.getName();babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](true);this.resetSelectedBlank();this.emit("addFile",{title:babelHelpers.classPrivateFieldLooseBase(this,_e)[_e](s)})}function Ne(e){this.emit("removeFile");const s=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();const t=s.getFiles();if(t.length===0){babelHelpers.classPrivateFieldLooseBase(this,ge)[ge](false);this.emit("clearFiles")}}function Ae(){const e=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();const[s]=e.getFiles();const t=s.getName();const l=s.getId();const a=new w({title:t});a.setReady(false);d.Dom.prepend(a.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,de)[de]);s.setCustomData(l,a)}function je(e){const s="--hidden";if(e){d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,re)[re],s);d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe],s);return}d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,re)[re],s);d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,oe)[oe],s);this.clearFiles({removeFromServer:false})}function Re(){const e={img:{title:d.Loc.getMessage("SIGN_BLANK_SELECTOR_CREATE_NEW_PIC"),description:"jpeg, png"},pdf:{title:d.Loc.getMessage("SIGN_BLANK_SELECTOR_NEW_PDF"),description:"Adobe Acrobat"},doc:{title:d.Loc.getMessage("SIGN_BLANK_SELECTOR_NEW_DOC"),description:"doc, docx"}};const s=Object.entries(e);return s.map((([e,{title:s,description:t}])=>{const l=new H({title:s,description:t,modifier:e});return l.getLayout()}))}async function Ue(){const e=babelHelpers.classPrivateFieldLooseBase(this,ie)[ie].getUploader();const s=e.getFiles();e.setMaxParallelUploads(s.length);const t=new Promise((s=>{e.subscribeOnce("onUploadComplete",s)}));e.start();await t}async function Me(e){const s=new o.Loader({target:babelHelpers.classPrivateFieldLooseBase(this,de)[de],size:80,mode:"custom"});s.show();try{var t;const s=3;const l=await babelHelpers.classPrivateFieldLooseBase(this,ve)[ve].loadBlanks(e,(t=babelHelpers.classPrivateFieldLooseBase(this,pe)[pe].type)!=null?t:null,s);if(l.length<s){d.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,be)[be],"--hidden")}else{d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,be)[be],"--hidden")}if(l.length>0){l.forEach((e=>{if(this.hasBlank(e.id)){return}const{title:s}=e;const t=new w({title:s});babelHelpers.classPrivateFieldLooseBase(this,Se)[Se](e,t)}));babelHelpers.classPrivateFieldLooseBase(this,ce)[ce]=e}}catch{d.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,be)[be],"--hidden")}s.destroy()}function xe(e,t){const{id:l,previewUrl:a,userAvatarUrl:i,userName:r,dateCreate:o}=e;const n=o?new Date(o):new Date;const d=`${r}, ${s.DateTimeFormat.format("j M. Y",n)}`;t.setId(l);t.setReady(true);t.setPreview(a);t.setAvatarWithDescription(d,i);babelHelpers.classPrivateFieldLooseBase(this,ae)[ae].set(l,t)}function Xe(e){const s=se.acceptedFileTypes.find((s=>e.endsWith(s)));if(!s){return e}const t=e.lastIndexOf(s);return e.slice(0,t)}function $e(e,s){babelHelpers.classPrivateFieldLooseBase(this,me)[me](e,s);d.Dom.append(s.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,de)[de])}function Ge(e){babelHelpers.classPrivateFieldLooseBase(this,le)[le].set("saveButton",e)}function We(){const e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]();e==null?void 0:e.setDisabled(true)}function Ve(){const e=babelHelpers.classPrivateFieldLooseBase(this,ke)[ke]();e==null?void 0:e.setDisabled(false)}function ze(){return babelHelpers.classPrivateFieldLooseBase(this,le)[le].get("saveButton")}e.BlankField=M;e.ListItem=H;e.BlankSelector=we})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX.Main,BX.Main,BX.Sign.V2,BX.UI.SidePanel,BX.UI.Uploader,BX.UI.Uploader,BX,BX,BX,BX.Event,BX.Sign.V2,BX.UI.EntitySelector);
//# sourceMappingURL=blank-selector.bundle.map.js