this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,t,s,i){"use strict";var a=babelHelpers.classPrivateFieldLooseKey("filter");class l{constructor(e){Object.defineProperty(this,a,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,a)[a]=BX.Main.filterManager.getById(e.filterId)}toggleField(e,t){const s=babelHelpers.classPrivateFieldLooseBase(this,a)[a].getFieldByName(e);if(!i.Type.isPlainObject(s)||s===null){return false}const l=t.split("_");const r=s.ITEMS.filter((e=>l.includes(e.VALUE))).map((e=>e.VALUE));if(r.length===0){return false}babelHelpers.classPrivateFieldLooseBase(this,a)[a].getApi().extendFilter({[e]:{...r}});return true}getFilterRows(){return babelHelpers.classPrivateFieldLooseBase(this,a)[a].getFilterFieldsValues()}deactivate(){babelHelpers.classPrivateFieldLooseBase(this,a)[a].getApi().setFields({});babelHelpers.classPrivateFieldLooseBase(this,a)[a].getApi().apply()}}var r=babelHelpers.classPrivateFieldLooseKey("filter");var o=babelHelpers.classPrivateFieldLooseKey("onActivateItem");var n=babelHelpers.classPrivateFieldLooseKey("onDeactivateItem");var c=babelHelpers.classPrivateFieldLooseKey("processItemSelection");var b=babelHelpers.classPrivateFieldLooseKey("getFieldData");var d=babelHelpers.classPrivateFieldLooseKey("isAllDeactivated");var v=babelHelpers.classPrivateFieldLooseKey("onFilterApply");class p extends s.CounterPanel{constructor(e){super({target:e.target,items:p.getCounterItems(e.items),multiselect:false,title:e.title});Object.defineProperty(this,v,{value:B});Object.defineProperty(this,d,{value:F});Object.defineProperty(this,b,{value:P});Object.defineProperty(this,c,{value:f});Object.defineProperty(this,n,{value:h});Object.defineProperty(this,o,{value:u});Object.defineProperty(this,r,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,r)[r]=new l({filterId:e.filterId});this.active=false;t.EventEmitter.subscribe("BX.UI.CounterPanel.Item:activate",babelHelpers.classPrivateFieldLooseBase(this,o)[o].bind(this));t.EventEmitter.subscribe("BX.UI.CounterPanel.Item:deactivate",babelHelpers.classPrivateFieldLooseBase(this,n)[n].bind(this));t.EventEmitter.subscribe("BX.Main.Filter:apply",babelHelpers.classPrivateFieldLooseBase(this,v)[v].bind(this))}static getCounterItems(e){return e.map((e=>({id:e.id,title:e.title,value:Number.parseInt(e.value,10),isRestricted:e.isRestricted,color:e.color==="THEME"?"GRAY":e.color,hideValue:e.hideValue||false})))}}function u(e){const{name:t,value:s}=babelHelpers.classPrivateFieldLooseBase(this,b)[b](e.getData());if(!babelHelpers.classPrivateFieldLooseBase(this,c)[c](t,s)){e.preventDefault()}}function h(e){if(babelHelpers.classPrivateFieldLooseBase(this,d)[d]()){babelHelpers.classPrivateFieldLooseBase(this,r)[r].deactivate()}}function f(e,t){babelHelpers.classPrivateFieldLooseBase(this,r)[r].toggleField(e,t);return true}function P(e){const t=e.id.split("__");return{name:t[0].toUpperCase(),value:t[1].toUpperCase()}}function F(){return this.getItems().every((e=>!e.isActive))}function B(){let e="";const t=babelHelpers.classPrivateFieldLooseBase(this,r)[r].getFilterRows();const s=new Set(this.items.map((e=>e.id.toLowerCase())));const a=Object.entries(t).find((t=>{if(!i.Type.isPlainObject(t[1])){return false}const a=Object.values(t[1]);const l=[t[0],a.join("_")];e=l.join("__").toLowerCase();return s.has(e)}));this.getItems().forEach((t=>{t.deactivate(false);if(a&&t.id.toLowerCase()===e){t.activate(false)}}))}e.DocumentCounter=p})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX.Event,BX.UI,BX);
//# sourceMappingURL=document-counter.bundle.map.js