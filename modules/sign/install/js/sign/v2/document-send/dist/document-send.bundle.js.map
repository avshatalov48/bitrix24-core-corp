{"version":3,"file":"document-send.bundle.js","sources":["../src/document-send.js"],"sourcesContent":["import { Api } from 'sign.v2.api';\nimport { Event } from 'main.core';\n\ntype DocumentSendOptions = {};\n\nexport class DocumentSend extends Event.EventEmitter\n{\n\t#api: Api;\n\n\tconstructor(options: DocumentSendOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('bx:sign:v2:documentsend');\n\t\tthis.#api = new Api();\n\t}\n\n\tloadStatus(memberIds: Array<number>): Promise\n\t{\n\t\tif (memberIds.length > 0)\n\t\t{\n\t\t\treturn this.#api.memberLoadReadyForMessageStatus(memberIds)\n\t\t\t\t.then((response) => {\n\t\t\t\t\tconst readyMembers = response?.readyMembers ?? [];\n\t\t\t\t\tthis.#fireEvent(readyMembers);\n\n\t\t\t\t\treturn readyMembers;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\n\t\tthis.#fireEvent([]);\n\n\t\treturn Promise.resolve([]);\n\t}\n\n\tsend(memberIds: Array<number>): Promise\n\t{\n\t\tif (memberIds.length > 0)\n\t\t{\n\t\t\treturn this.#api.memberResendMessage(memberIds);\n\t\t}\n\n\t\treturn Promise.reject(new Error('empty members'));\n\t}\n\n\t#fireEvent(readyMembers: Array<number>): void\n\t{\n\t\tthis.emit('ready', new Event.BaseEvent({\n\t\t\tdata: {\n\t\t\t\treadyMembers,\n\t\t\t},\n\t\t}));\n\t}\n}\n"],"names":["DocumentSend","Event","EventEmitter","constructor","options","setEventNamespace","Api","loadStatus","memberIds","length","memberLoadReadyForMessageStatus","then","response","readyMembers","Promise","resolve","send","memberResendMessage","reject","Error","emit","BaseEvent","data"],"mappings":";;;;;;CACkC;CAAA;AAIlC,CAAO,MAAMA,YAAY,SAASC,eAAK,CAACC,YAAY,CACpD;GAGCC,WAAW,CAACC,OAA4B,GAAG,EAAE,EAC7C;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;OAAA;;KACR,IAAI,CAACC,iBAAiB,CAAC,yBAAyB,CAAC;KACjD,4CAAI,gBAAQ,IAAIC,eAAG,EAAE;;GAGtBC,UAAU,CAACC,SAAwB,EACnC;KACC,IAAIA,SAAS,CAACC,MAAM,GAAG,CAAC,EACxB;OACC,OAAO,4CAAI,cAAMC,+BAA+B,CAACF,SAAS,CAAC,CACzDG,IAAI,CAAEC,QAAQ,IAAK;SAAA;SACnB,MAAMC,YAAY,4BAAGD,QAAQ,oBAARA,QAAQ,CAAEC,YAAY,oCAAI,EAAE;SACjD,4CAAI,0BAAYA,YAAY;SAE5B,OAAOA,YAAY;QACnB,CAAC;;KAIJ,4CAAI,0BAAY,EAAE;KAElB,OAAOC,OAAO,CAACC,OAAO,CAAC,EAAE,CAAC;;GAG3BC,IAAI,CAACR,SAAwB,EAC7B;KACC,IAAIA,SAAS,CAACC,MAAM,GAAG,CAAC,EACxB;OACC,OAAO,4CAAI,cAAMQ,mBAAmB,CAACT,SAAS,CAAC;;KAGhD,OAAOM,OAAO,CAACI,MAAM,CAAC,IAAIC,KAAK,CAAC,eAAe,CAAC,CAAC;;CAWnD;CAAC,qBARWN,YAA2B,EACtC;GACC,IAAI,CAACO,IAAI,CAAC,OAAO,EAAE,IAAInB,eAAK,CAACoB,SAAS,CAAC;KACtCC,IAAI,EAAE;OACLT;;IAED,CAAC,CAAC;CACJ;;;;;;;;"}