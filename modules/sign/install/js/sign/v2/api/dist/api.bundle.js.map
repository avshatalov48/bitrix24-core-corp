{"version":3,"file":"api.bundle.js","sources":["../src/request.js","../src/template/template-api.js","../src/type.js","../src/index.js"],"sourcesContent":["import { ajax, Loc, Text } from 'main.core';\nimport { UI } from 'ui.notification';\nimport { StubNotAvailable, StubType, StubLinkType } from 'ui.sidepanel-content';\n\nexport async function request(\n\tmethod: string,\n\tendpoint: string,\n\tdata: ?Object,\n\tnotifyError: ?boolean = true,\n): Promise<Object>\n{\n\tconst config = { method };\n\tif (method === 'POST')\n\t{\n\t\tObject.assign(config, { data }, {\n\t\t\tpreparePost: false,\n\t\t\theaders: [\n\t\t\t\t{\n\t\t\t\t\tname: 'Content-Type',\n\t\t\t\t\tvalue: 'application/json',\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\ttry\n\t{\n\t\tconst response = await ajax.runAction(endpoint, config);\n\t\tif (response.errors?.length > 0)\n\t\t{\n\t\t\tthrow new Error(response.errors[0].message);\n\t\t}\n\n\t\treturn response.data;\n\t}\n\tcatch (ex)\n\t{\n\t\tif (!notifyError)\n\t\t{\n\t\t\treturn ex;\n\t\t}\n\n\t\tconst { message = `Error in ${endpoint}`, errors = [] } = ex;\n\t\tconst errorCode = errors[0]?.code ?? '';\n\n\t\tif (errorCode === 'SIGN_CLIENT_CONNECTION_ERROR')\n\t\t{\n\t\t\tconst stub = new StubNotAvailable({\n\t\t\t\ttitle: Loc.getMessage('SIGN_JS_V2_API_ERROR_CLIENT_CONNECTION_TITLE'),\n\t\t\t\tdesc: Loc.getMessage('SIGN_JS_V2_API_ERROR_CLIENT_CONNECTION_DESC'),\n\t\t\t\ttype: StubType.noConnection,\n\t\t\t\tlink: {\n\t\t\t\t\ttext: Loc.getMessage('SIGN_JS_V2_API_ERROR_CLIENT_CONNECTION_LINK_TEXT'),\n\t\t\t\t\tvalue: '18740976',\n\t\t\t\t\ttype: StubLinkType.helpdesk,\n\t\t\t\t},\n\t\t\t});\n\t\t\tstub.openSlider();\n\n\t\t\tthrow ex;\n\t\t}\n\n\t\tif (errorCode === 'LICENSE_LIMITATIONS')\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show('limit_office_e_signature_box');\n\n\t\t\tthrow ex;\n\t\t}\n\n\t\tif (errorCode === 'SIGN_DOCUMENT_INCORRECT_STATUS')\n\t\t{\n\t\t\tconst stub = new StubNotAvailable({\n\t\t\t\ttitle: Loc.getMessage('SIGN_DOCUMENT_INCORRECT_STATUS_STUB_TITLE'),\n\t\t\t\tdesc: Loc.getMessage('SIGN_DOCUMENT_INCORRECT_STATUS_STUB_DESC'),\n\t\t\t\ttype: StubType.notAvailable,\n\t\t\t});\n\t\t\tstub.openSlider();\n\n\t\t\t//close previous slider (with editor)\n\t\t\tconst slider = BX.SidePanel.Instance.getTopSlider();\n\t\t\tconst onSliderCloseHandler = (e: BX.SidePanel.Event): void => {\n\t\t\t\tif (slider !== e.getSlider())\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\twindow.top.BX.removeCustomEvent(\n\t\t\t\t\tslider.getWindow(),\n\t\t\t\t\t'SidePanel.Slider:onClose',\n\t\t\t\t\tonSliderCloseHandler,\n\t\t\t\t);\n\n\t\t\t\tconst sliders = window.top.BX.SidePanel.Instance.getOpenSliders();\n\t\t\t\tfor (let i = sliders.length - 2; i >= 0; i--)\n\t\t\t\t{\n\t\t\t\t\tif (sliders[i].getUrl().startsWith('/sign/doc/'))\n\t\t\t\t\t{\n\t\t\t\t\t\tsliders[i].close();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\twindow.top.BX.addCustomEvent(slider.getWindow(), 'SidePanel.Slider:onClose', onSliderCloseHandler);\n\n\t\t\tthrow ex;\n\t\t}\n\n\t\tif (errorCode === 'B2E_RESTRICTED_ON_TARIFF' || errorCode === 'B2E_SIGNERS_LIMIT_REACHED_ON_TARIFF')\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show('limit_office_e_signature');\n\n\t\t\tthrow ex;\n\t\t}\n\n\t\tconst content = errors[0]?.message ?? message;\n\t\tUI.Notification.Center.notify({\n\t\t\tcontent: Text.encode(content),\n\t\t\tautoHideDelay: 4000,\n\t\t});\n\n\t\tthrow ex;\n\t}\n}\n\nexport function post(endpoint: string, data: Object | null = null, notifyError: boolean = true): Promise<Object>\n{\n\treturn request('POST', endpoint, data, notifyError);\n}\n","import { post } from '../request';\nimport type { Template } from './type';\n\nexport type { Template };\n\nexport class TemplateApi\n{\n\tgetList(): Promise<Template[]>\n\t{\n\t\treturn post('sign.api_v1.b2e.document.template.list');\n\t}\n\n\tcompleteTemplate(templateUid: string): Promise<void>\n\t{\n\t\treturn post('sign.api_v1.b2e.document.template.complete', { uid: templateUid });\n\t}\n\n\tsend(templateUid: string): Promise<{ employeeMember: { id: number, uid: string } }>\n\t{\n\t\treturn post('sign.api_v1.b2e.document.template.send', { uid: templateUid });\n\t}\n}\n","export type LoadedDocumentData = {\n\tblankId: number;\n\tentityId: number;\n\tentityType: string;\n\tentityTypeId: number;\n\tid: number;\n\tinitiator: string;\n\tlangId: string;\n\tparties: number;\n\tresultFileId: number;\n\tscenario: string;\n\tstatus: string;\n\ttitle: string;\n\tuid: string;\n\tversion: number;\n};\nexport type Communication = {\n\tID: number;\n\tTYPE: 'EMAIL' | 'PHONE';\n\tVALUE: string;\n\tVALUE_TYPE: string;\n};\nexport type BlockData = {\n\ttext?: string;\n\tfield?: string;\n\thasFields?: boolean;\n\tpresetId?: number;\n\t__view?: { crmNumeratorUrl?: string; base64?: string; };\n\tfileId?: number;\n};\ntype BlockSettings = {\n\tpositon: {\n\t\ttop: string;\n\t\tleft: string;\n\t\twidth: string;\n\t\twidthPx: number;\n\t\theight: string;\n\t\theightPx: number;\n\t},\n\tstyle: { [$Keys<CSSStyleDeclaration>]: string; }\n};\nexport type LoadedBlock = {\n\tcode: string;\n\tdata: BlockData;\n\tid: number;\n\tparty: number;\n\ttype: string;\n\tposition: BlockSettings['position'];\n\tstyle: BlockSettings['style'];\n};\n\nexport type Role = 'assignee' | 'signer' | 'editor' | 'reviewer';\nexport const MemberRole: $ReadOnly<{ [key: Role]: Role }> = Object.freeze({\n\tassignee: 'assignee',\n\tsigner: 'signer',\n\teditor: 'editor',\n\treviewer: 'reviewer',\n});\n\nexport type SetupMember = {\n\tentityType: string;\n\tentityId: number;\n\tparty: number;\n\trole?: Role;\n};\nexport type MemberStatusType = 'done' | 'wait' | 'ready' | 'refused' | 'stopped' | 'stoppable_ready' | 'processing';\nexport const MemberStatus: Readonly<Record<string, MemberStatusType>> = Object.freeze({\n\tdone: 'done',\n\twait: 'wait',\n\tready: 'ready',\n\trefused: 'refused',\n\tstopped: 'stopped',\n\tstoppableReady: 'stoppable_ready',\n\tprocessing: 'processing',\n});\n","import { post } from './request';\nimport { TemplateApi } from './template/template-api';\nimport type { BlockData, Communication, LoadedBlock, LoadedDocumentData, MemberStatusType } from './type';\nimport { SetupMember } from './type';\n\nexport * from './type';\nexport * from './template/type';\n\nexport class Api\n{\n\ttemplate: TemplateApi = new TemplateApi();\n\n\t#post(endpoint: string, data: Object | null = null, notifyError: boolean = true): $Call<typeof post>\n\t{\n\t\treturn post(endpoint, data, notifyError);\n\t}\n\n\tregister(blankId: string, scenarioType: string | null = null, asTemplate: boolean = false): Promise<{\n\t\tuid: string,\n\t\ttemplateUid: string | null\n\t}>\n\t{\n\t\treturn this.#post('sign.api_v1.document.register', { blankId, scenarioType, asTemplate });\n\t}\n\n\tupload(uid: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.upload', { uid });\n\t}\n\n\tgetPages(uid: string): Promise<Array<{ url: string; }>>\n\t{\n\t\treturn this.#post('sign.api_v1.document.pages.list', { uid }, false);\n\t}\n\n\tloadBlanks(page: number, scenario: string | null = null): Promise<Array<{ title: string; id: number }>>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.list', { page, scenario });\n\t}\n\n\tcreateBlank(files: Array<string>, scenario: string | null = null, forTemplate: boolean = false): Promise<{ id: number; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.create', { files, scenario, forTemplate });\n\t}\n\n\tsaveBlank(documentUid: string, blocks: []): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.block.save', { documentUid, blocks }, false);\n\t}\n\n\tloadBlocksData(documentUid: string, blocks: []): Promise<BlockData>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.block.loadData', { documentUid, blocks });\n\t}\n\n\tchangeDocument(uid: string, blankId: number): Promise<{ uid: string; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.changeBlank', { uid, blankId });\n\t}\n\n\tchangeDocumentLanguages(uid: string, lang: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.changeDocumentLanguages', { uid, lang });\n\t}\n\n\tchangeRegionDocumentType(uid: string, type: string): Promise<{ status: string; data: []; errors: string[]; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyRegionDocumentType', { uid, type });\n\t}\n\n\tchangeExternalId(uid: string, id: string): Promise<{ status: string; data: []; errors: string[]; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyExternalId', { uid, id });\n\t}\n\n\tchangeExternalDate(uid: string, externalDate: string): Promise<{ status: string; data: []; errors: string[]; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyExternalDate', { uid, externalDate });\n\t}\n\n\tloadDocument(uid: string): Promise<LoadedDocumentData>\n\t{\n\t\treturn this.#post('sign.api_v1.document.load', { uid });\n\t}\n\n\tconfigureDocument(uid: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.configure', { uid });\n\t}\n\n\tloadBlocksByDocument(documentUid: string): Promise<Array<LoadedBlock>>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.block.loadByDocument', {\n\t\t\tdocumentUid,\n\t\t});\n\t}\n\n\tstartSigning(uid: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.signing.start', { uid });\n\t}\n\n\taddMember(\n\t\tdocumentUid: string,\n\t\tentityType: string,\n\t\tentityId: number,\n\t\tparty: number,\n\t\tpresetId: number,\n\t): Promise<{ uid: string; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.add', {\n\t\t\tdocumentUid,\n\t\t\tentityType,\n\t\t\tentityId,\n\t\t\tparty,\n\t\t\tpresetId,\n\t\t});\n\t}\n\n\tremoveMember(uid: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.remove', { uid });\n\t}\n\n\tloadMembers(documentUid: string): Promise<Array<{ entityId: number; uid: string; }>>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.load', { documentUid });\n\t}\n\n\tmodifyCommunicationChannel(\n\t\tuid: string,\n\t\tchannelType: string,\n\t\tchannelValue: string,\n\t): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.modifyCommunicationChannel', {\n\t\t\tuid,\n\t\t\tchannelType,\n\t\t\tchannelValue,\n\t\t});\n\t}\n\n\tloadCommunications(uid: String): Promise<Array<Communication>>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.loadCommunications', { uid });\n\t}\n\n\tmodifyTitle(uid: string, title: string): Promise<{ blankTitle: string }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyTitle', {\n\t\t\tuid,\n\t\t\ttitle,\n\t\t});\n\t}\n\n\tmodifyInitiator(uid: string, initiator: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyInitiator', {\n\t\t\tuid,\n\t\t\tinitiator,\n\t\t});\n\t}\n\n\tmodifyLanguageId(uid: string, langId: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyLangId', {\n\t\t\tuid,\n\t\t\tlangId,\n\t\t});\n\t}\n\n\tmodifyReminderTypeForMemberRole(documentUid: string, memberRole: string, reminderType: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.b2e.member.reminder.set', {\n\t\t\tdocumentUid,\n\t\t\tmemberRole,\n\t\t\ttype: reminderType,\n\t\t});\n\t}\n\n\tloadLanguages(): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.loadLanguage');\n\t}\n\n\trefreshEntityNumber(documentUid: string): Promise<[]>\n\t{\n\t\treturn this.#post('sign.api_v1.document.refreshEntityNumber', {\n\t\t\tdocumentUid,\n\t\t});\n\t}\n\n\tchangeDomain(): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.portal.changeDomain');\n\t}\n\n\tloadRestrictions(): Promise<{ smsAllowed: boolean; }>\n\t{\n\t\treturn this.#post('sign.api_v1.portal.hasRestrictions');\n\t}\n\n\tsaveStamp(memberUid: String, fileId: string): Promise<{ id: number; srcUri: string; }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.saveStamp', {\n\t\t\tmemberUid, fileId,\n\t\t});\n\t}\n\n\tsetupB2eParties(\n\t\tdocumentUid: string,\n\t\trepresentativeId: number,\n\t\tmembers: Array<SetupMember>,\n\t): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.setupB2eParties', {\n\t\t\tdocumentUid, representativeId, members,\n\t\t});\n\t}\n\n\tupdateChannelTypeToB2eMembers(\n\t\tmembersUids: Array<string>,\n\t\tchannelType: string,\n\t): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.b2e.member.communication.updateMembersChannelType', {\n\t\t\tmembers: membersUids,\n\t\t\tchannelType,\n\t\t});\n\t}\n\n\tloadB2eCompanyList(): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.integration.crm.b2ecompany.list');\n\t}\n\n\tmodifyB2eCompany(documentUid: string, companyUid: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyCompany', {\n\t\t\tdocumentUid, companyUid,\n\t\t});\n\t}\n\n\tmodifyB2eDocumentScheme(uid: string, scheme: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.modifyScheme', {\n\t\t\tuid, scheme,\n\t\t});\n\t}\n\n\tloadB2eAvaialbleSchemes(documentUid: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.b2e.scheme.load', {\n\t\t\tdocumentUid,\n\t\t});\n\t}\n\n\tdeleteB2eCompany(id: string): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.integration.crm.b2ecompany.delete', {\n\t\t\tid,\n\t\t});\n\t}\n\n\tgetLinkForSigning(memberId: number, notifyError: boolean = true): Promise<{\n\t\turi: string,\n\t\trequireBrowser: boolean,\n\t\tmobileAllowed: boolean,\n\t\temployeeData: Object\n\t}>\n\t{\n\t\treturn this.#post('sign.api_v1.b2e.member.link.getLinkForSigning', {\n\t\t\tmemberId,\n\t\t}, notifyError);\n\t}\n\n\tmemberLoadReadyForMessageStatus(memberIds: Array<number>): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.send.getMembersForResend', {\n\t\t\tmemberIds,\n\t\t});\n\t}\n\n\tmemberResendMessage(memberIds: Array<number>): Promise\n\t{\n\t\treturn this.#post('sign.api_v1.document.send.resendMessage', {\n\t\t\tmemberIds,\n\t\t});\n\t}\n\n\tgetBlankById(id: number): Promise<{ id: number, title: string, scenario: string }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.blank.getById', { id });\n\t}\n\n\tregisterB2eCompany(\n\t\tproviderCode: string,\n\t\ttaxId: string,\n\t\tcompanyId: string,\n\t\texternalProviderId: ?string,\n\t): Promise<{ id: number }>\n\t{\n\t\treturn this.#post('sign.api_v1.integration.crm.b2ecompany.register', {\n\t\t\tproviderCode, taxId, companyId, externalProviderId\n\t\t});\n\t}\n\n\tsetDecisionToSesB2eAgreement(): Promise<{ decision: string }>\n\t{\n\t\treturn this.#post('sign.api_v1.b2e.member.communication.setAgreementDecision', {});\n\t}\n\n\tcreateDocumentChat(chatType: number, documentId: number, isEntityId: boolean): Promise<{ chatId: number }>\n\t{\n\t\treturn this.#post('sign.api_v1.integration.im.groupChat.createDocumentChat', {\n\t\t\tchatType, documentId, isEntityId,\n\t\t});\n\t}\n\n\tgetDocumentFillAndStartProgress(uid: string): Promise<{ completed: boolean, progress: Number }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.getFillAndStartProgress', { uid });\n\t}\n\n\tgetMember(uid: string): Promise<{ id: number, uid: string, status: MemberStatusType }>\n\t{\n\t\treturn this.#post('sign.api_v1.document.member.get', { uid });\n\t}\n}\n"],"names":["request","method","endpoint","data","notifyError","config","Object","assign","preparePost","headers","name","value","response","ajax","runAction","errors","length","Error","message","ex","errorCode","code","stub","StubNotAvailable","title","Loc","getMessage","desc","type","StubType","noConnection","link","text","StubLinkType","helpdesk","openSlider","top","BX","UI","InfoHelper","show","notAvailable","slider","SidePanel","Instance","getTopSlider","onSliderCloseHandler","e","getSlider","window","removeCustomEvent","getWindow","sliders","getOpenSliders","i","getUrl","startsWith","close","addCustomEvent","content","Notification","Center","notify","Text","encode","autoHideDelay","post","TemplateApi","getList","completeTemplate","templateUid","uid","send","MemberRole","freeze","assignee","signer","editor","reviewer","MemberStatus","done","wait","ready","refused","stopped","stoppableReady","processing","Api","template","register","blankId","scenarioType","asTemplate","upload","getPages","loadBlanks","page","scenario","createBlank","files","forTemplate","saveBlank","documentUid","blocks","loadBlocksData","changeDocument","changeDocumentLanguages","lang","changeRegionDocumentType","changeExternalId","id","changeExternalDate","externalDate","loadDocument","configureDocument","loadBlocksByDocument","startSigning","addMember","entityType","entityId","party","presetId","removeMember","loadMembers","modifyCommunicationChannel","channelType","channelValue","loadCommunications","modifyTitle","modifyInitiator","initiator","modifyLanguageId","langId","modifyReminderTypeForMemberRole","memberRole","reminderType","loadLanguages","refreshEntityNumber","changeDomain","loadRestrictions","saveStamp","memberUid","fileId","setupB2eParties","representativeId","members","updateChannelTypeToB2eMembers","membersUids","loadB2eCompanyList","modifyB2eCompany","companyUid","modifyB2eDocumentScheme","scheme","loadB2eAvaialbleSchemes","deleteB2eCompany","getLinkForSigning","memberId","memberLoadReadyForMessageStatus","memberIds","memberResendMessage","getBlankById","registerB2eCompany","providerCode","taxId","companyId","externalProviderId","setDecisionToSesB2eAgreement","createDocumentChat","chatType","documentId","isEntityId","getDocumentFillAndStartProgress","getMember"],"mappings":"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"}