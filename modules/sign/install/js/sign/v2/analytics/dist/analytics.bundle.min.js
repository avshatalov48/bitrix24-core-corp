this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,i,t,a){"use strict";var r=babelHelpers.classPrivateFieldLooseKey("options");class l{constructor(e={}){Object.defineProperty(this,r,{writable:true,value:{}});babelHelpers.classPrivateFieldLooseBase(this,r)[r]=e}update(e){babelHelpers.classPrivateFieldLooseBase(this,r)[r]={...babelHelpers.classPrivateFieldLooseBase(this,r)[r],...e}}getOptions(){return babelHelpers.classPrivateFieldLooseBase(this,r)[r]}}var o=babelHelpers.classPrivateFieldLooseKey("documentUidToIdCache");var n=babelHelpers.classPrivateFieldLooseKey("context");var d=babelHelpers.classPrivateFieldLooseKey("api");var c=babelHelpers.classPrivateFieldLooseKey("loadDocumentIdByUid");var b=babelHelpers.classPrivateFieldLooseKey("sendWithProviderType");var p=babelHelpers.classPrivateFieldLooseKey("convertProviderCodeToP1IntegrationType");class v{constructor(e={}){var s;Object.defineProperty(this,p,{value:P});Object.defineProperty(this,b,{value:h});Object.defineProperty(this,c,{value:u});Object.defineProperty(this,o,{writable:true,value:{}});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:new t.Api});babelHelpers.classPrivateFieldLooseBase(this,n)[n]=new l((s=e.contextOptions)!=null?s:{})}send(e){a.sendData({...babelHelpers.classPrivateFieldLooseBase(this,n)[n].getOptions(),...e,tool:"sign"})}setContext(e){babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e}getContext(){return babelHelpers.classPrivateFieldLooseBase(this,n)[n]}sendWithProviderTypeAndDocId(e,s,i){void babelHelpers.classPrivateFieldLooseBase(this,b)[b](e,s,i)}sendWithDocId(e,i){if(s.Type.isNumber(i)){this.send({...e,p5:`docId_${i}`});return}(async()=>{const s=await babelHelpers.classPrivateFieldLooseBase(this,c)[c](i);this.send({...e,p5:`docId_${s}`})})()}}async function u(e){if(s.Type.isNumber(babelHelpers.classPrivateFieldLooseBase(this,o)[o][e])){return babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]}const i=await babelHelpers.classPrivateFieldLooseBase(this,d)[d].loadDocument(e);if(i){babelHelpers.classPrivateFieldLooseBase(this,o)[o][e]=i.id;return i.id}return null}async function h(e,i,t){var a;let r=s.Type.isNumber(i)?i:(a=babelHelpers.classPrivateFieldLooseBase(this,o)[o][i])!=null?a:null;let l=t;if(s.Type.isNull(r)||s.Type.isUndefined(t)){const e=s.Type.isString(i)?await babelHelpers.classPrivateFieldLooseBase(this,d)[d].loadDocument(i):await babelHelpers.classPrivateFieldLooseBase(this,d)[d].loadDocumentById(i);if(!e){console.warn("Document not found by identifier",i);return}r=e.id;l=e.providerCode}this.send({...e,p1:babelHelpers.classPrivateFieldLooseBase(this,p)[p](l),p5:`docId_${r}`})}function P(e){switch(e){case i.ProviderCode.sesRu:case i.ProviderCode.sesCom:return"integration_bitrix24KEDO";case i.ProviderCode.goskey:return"integration_Goskluch";case i.ProviderCode.external:return"integration_external";default:return"integration_N"}}e.Context=l;e.Analytics=v})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX,BX.Sign,BX.Sign.V2,BX.UI.Analytics);
//# sourceMappingURL=analytics.bundle.map.js