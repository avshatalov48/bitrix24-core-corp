this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,s,t,l,a){"use strict";let i=e=>e,o,r;class c extends t.EventEmitter{constructor(e){super();this.setEventNamespace("BX.Sign.V2.ListItem");this.props=e}createListItem(e={}){const{events:s={},children:t=[]}=e;const{title:a,description:c="",modifier:d}=this.props;const n=l.Tag.render(o||(o=i`
			<span
				class="sign-document__list_item-title"
				title="${0}"
			>
				${0}
			</span>
		`),a,a);const b=l.Tag.render(r||(r=i`
			<span class="sign-document__list_item-info">
				${0}
			</span>
		`),c);return l.Dom.create("div",{attrs:{className:`sign-document__list_item --${d}`},events:s,children:[...t,n,b]})}getLayout(){if(!this.layout){this.layout=this.createListItem()}return this.layout}}let d=e=>e,n;var b=babelHelpers.classPrivateFieldLooseKey("statusNode");var p=babelHelpers.classPrivateFieldLooseKey("loader");class v extends c{constructor(e){super(e);Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,b)[b]=l.Tag.render(n||(n=d`
			<div class="sign-document__list_item-status">
				<span class="sign-document__list_item-progress">0%</span>
			</div>
		`));babelHelpers.classPrivateFieldLooseBase(this,p)[p]=new a.Loader({size:30,target:babelHelpers.classPrivateFieldLooseBase(this,b)[b]})}createListItem(){return super.createListItem({events:{focusin:()=>this.select(),focusout:({relatedTarget:e})=>this.deselect(e)},children:[babelHelpers.classPrivateFieldLooseBase(this,b)[b]]})}select(){l.Dom.addClass(this.layout,"--active");this.emit("toggleSelection",{selected:true})}deselect(e){l.Dom.removeClass(this.layout,"--active");this.emit("toggleSelection",{selected:false,relatedTarget:e})}updateLoadingStatus(e){babelHelpers.classPrivateFieldLooseBase(this,p)[p].show();babelHelpers.classPrivateFieldLooseBase(this,b)[b].firstElementChild.textContent=`${e}%`}completeLoading(){const e=this.getLayout();e.tabIndex="0";babelHelpers.classPrivateFieldLooseBase(this,p)[p].hide();l.Dom.addClass(e,"--loaded")}}let u=e=>e,h,g;const L={controller:"ui.dev.fileUploader.testUploaderController",controllerOptions:{action:"createByFiles"},acceptedFileTypes:[".jpg",".jpeg",".png",".pdf",".doc",".docx",".rtf"],multiple:true};var P=babelHelpers.classPrivateFieldLooseKey("selectedFileId");var F=babelHelpers.classPrivateFieldLooseKey("uploader");var m=babelHelpers.classPrivateFieldLooseKey("uploadButtons");var B=babelHelpers.classPrivateFieldLooseKey("templates");var H=babelHelpers.classPrivateFieldLooseKey("templatesNode");var f=babelHelpers.classPrivateFieldLooseKey("onAdd");var y=babelHelpers.classPrivateFieldLooseKey("onUploadProgress");var _=babelHelpers.classPrivateFieldLooseKey("onUploadComplete");var E=babelHelpers.classPrivateFieldLooseKey("onToggleSelection");var T=babelHelpers.classPrivateFieldLooseKey("createUploadButtons");var O=babelHelpers.classPrivateFieldLooseKey("waitForConnect");var S=babelHelpers.classPrivateFieldLooseKey("resetSelectedTemplate");class C extends t.EventEmitter{constructor(){super();Object.defineProperty(this,S,{value:K});Object.defineProperty(this,O,{value:U});Object.defineProperty(this,T,{value:w});Object.defineProperty(this,E,{value:j});Object.defineProperty(this,_,{value:N});Object.defineProperty(this,y,{value:I});Object.defineProperty(this,f,{value:D});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,B,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});this.setEventNamespace("BX.Sign.V2.DocumentSelector");babelHelpers.classPrivateFieldLooseBase(this,P)[P]="";babelHelpers.classPrivateFieldLooseBase(this,m)[m]=babelHelpers.classPrivateFieldLooseBase(this,T)[T]();babelHelpers.classPrivateFieldLooseBase(this,F)[F]=new s.Uploader({...L,browseElement:babelHelpers.classPrivateFieldLooseBase(this,m)[m],events:{"File:onAdd":e=>babelHelpers.classPrivateFieldLooseBase(this,f)[f](e),"File:onUploadProgress":e=>babelHelpers.classPrivateFieldLooseBase(this,y)[y](e),"File:onUploadComplete":e=>babelHelpers.classPrivateFieldLooseBase(this,_)[_](e)}});babelHelpers.classPrivateFieldLooseBase(this,B)[B]=new Map;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=l.Tag.render(h||(h=u`
			<div class="sign-document__list"></div>
		`))}selectTemplate(e){const s=babelHelpers.classPrivateFieldLooseBase(this,B)[B].get(e);s.select()}render(){babelHelpers.classPrivateFieldLooseBase(this,B)[B].forEach((e=>{l.Dom.append(e.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,H)[H])}));babelHelpers.classPrivateFieldLooseBase(this,O)[O](babelHelpers.classPrivateFieldLooseBase(this,H)[H]);return l.Tag.render(g||(g=u`
			<div class="sign-document">
				<p class="sign-document__add-title">
					${0}
				</p>
				<div class="sign-document__list">${0}</div>
				<p class="sign-document__templates_title">
					${0}
				</p>
				${0}
			</div>
		`),l.Loc.getMessage("SIGN_DOCUMENT_ADD_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,m)[m],l.Loc.getMessage("SIGN_DOCUMENT_RECENT_TEMPLATES_TITLE"),babelHelpers.classPrivateFieldLooseBase(this,H)[H])}}function D(e){const{file:s}=e.getData();const t=s.getName();const a=s.getId();const i=new v({title:t,modifier:"blank"});i.subscribe("toggleSelection",(({data:e})=>{babelHelpers.classPrivateFieldLooseBase(this,E)[E](a,e)}));babelHelpers.classPrivateFieldLooseBase(this,B)[B].set(a,i);l.Dom.append(i.getLayout(),babelHelpers.classPrivateFieldLooseBase(this,H)[H])}function I(e){const{progress:s,file:t}=e.getData();const l=t.getId();const a=babelHelpers.classPrivateFieldLooseBase(this,B)[B].get(l);a.updateLoadingStatus(s)}function N(e){setTimeout((()=>{const{progress:s,file:t}=e.getData();const l=t.getId();const a=babelHelpers.classPrivateFieldLooseBase(this,B)[B].get(l);a.completeLoading()}),1e3)}function j(e,s){const{relatedTarget:t,selected:l}=s;if(l){babelHelpers.classPrivateFieldLooseBase(this,S)[S](e);babelHelpers.classPrivateFieldLooseBase(this,P)[P]=e}else{babelHelpers.classPrivateFieldLooseBase(this,P)[P]=""}this.emit("toggleSelection",{fileId:e,relatedTarget:t,selected:l})}function w(){const e={img:{title:l.Loc.getMessage("SIGN_DOCUMENT_CREATE_NEW_PIC"),description:"jpeg, png"},pdf:{title:l.Loc.getMessage("SIGN_DOCUMENT_NEW_PDF"),description:"Adobe Acrobat"},doc:{title:l.Loc.getMessage("SIGN_DOCUMENT_CREATE_NEW_DOC"),description:"Microsoft Word"}};const s=Object.entries(e);return s.map((([e,{title:s,description:t}])=>new c({title:s,description:t,modifier:e}).getLayout()))}function U(e){const s=new MutationObserver((()=>{if(e.isConnected){const e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].get(babelHelpers.classPrivateFieldLooseBase(this,P)[P]);e==null?void 0:e.getLayout().focus();s.disconnect()}}));s.observe(document.body,{childList:true,subtree:true})}function K(e){if(e!==babelHelpers.classPrivateFieldLooseBase(this,P)[P]){const e=babelHelpers.classPrivateFieldLooseBase(this,B)[B].get(babelHelpers.classPrivateFieldLooseBase(this,P)[P]);e==null?void 0:e.deselect()}}e.DocumentSelector=C})(this.BX.Sign.V2=this.BX.Sign.V2||{},BX.UI.Uploader,BX.Event,BX,BX);
//# sourceMappingURL=document-selector.bundle.map.js