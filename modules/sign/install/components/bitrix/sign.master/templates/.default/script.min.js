this.BX=this.BX||{};this.BX.Sign=this.BX.Sign||{};(function(e,t,n,i,a,o){"use strict";var r,s,l,c,u,d,m,v,g,p,f,h,b,y,T,_;function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){babelHelpers.defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(){function e(t){var n=this;babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"readonly",true);babelHelpers.defineProperty(this,"imageIndex",0);babelHelpers.defineProperty(this,"imageTotal",0);babelHelpers.defineProperty(this,"blockTagCollection",[]);babelHelpers.defineProperty(this,"currentZoomValue",100);babelHelpers.defineProperty(this,"firstRender",false);this.containerTag=document.querySelector('[data-role="sign-master__preview"]');if(!this.containerTag){return}this.imageCollection=t.items;this.blockCollection=t.blocks;this.imageTotal=this.imageCollection.length;if(a.Type.isBoolean(t.readonly)){this.readonly=t.readonly}if(this.imageCollection.length>0){this.buildPreview()}else if(t.documentHash){var i=setInterval((function(){BX.Sign.Backend.controller({command:"document.getLayout",postData:{documentHash:t.documentHash}}).then((function(e){var t=e===null||e===void 0?void 0:e.layout;if(a.Type.isArray(t)&&t.length>0){n.imageCollection=t;n.imageTotal=n.imageCollection.length;n.buildPreview();clearInterval(i)}}))}),2e3)}}babelHelpers.createClass(e,[{key:"getBottomContainer",value:function e(){if(!this.bottomContainer){this.bottomContainer=a.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-master__preview-container_bottom"></div>\n\t\t\t'])))}return this.bottomContainer}},{key:"buildPreview",value:function e(){a.Dom.clean(this.containerTag);a.Dom.append(this.buildImage(this.imageCollection[0]),this.containerTag);a.Dom.append(this.buildNavigation(),this.getBottomContainer());a.Dom.append(this.buildZoom(),this.getBottomContainer());a.Dom.append(this.getBottomContainer(),this.containerTag)}},{key:"drawBlock",value:function e(t){if(t.text){var n=t.text;return a.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['<div class="sign-master__block">',"</div>"])),a.Text.encode(n))}else if(t.base64){var i="data:image;base64,"+t.base64;var o="background: url(".concat(i,") no-repeat top; background-size: cover;");return a.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(['<div class="sign-master__block" style="','"></div>'])),o)}return a.Tag.render(c||(c=babelHelpers.taggedTemplateLiteral(['<div class="sign-master__block"></div>'])))}},{key:"drawBlocks",value:function e(t){var n=this;var i=[];this.blockCollection.map((function(e){if(t===parseInt(e.position.page)){var o=n.drawBlock(e.data);var r=a.Type.isArray(e.style)||a.Type.isPlainObject(e.style)?k({},e.style):{};r.top=e.position.top+"%";r.left=e.position.left+"%";r.width=e.position.width+14+"%";r.height=e.position.height+14+"%";a.Dom.style(o,r);i.push(o)}}));setTimeout((function(){babelHelpers.toConsumableArray(document.querySelectorAll(".sign-master__block")).map((function(e){return a.Dom.remove(e)}));i.map((function(e){n.imageTagContainer.appendChild(e)}))}),0)}},{key:"buildImageTag",value:function e(){var t=this;var n=this.imageCollection[this.imageIndex];if(!n){return}this.imageTag=a.Tag.render(u||(u=babelHelpers.taggedTemplateLiteral(['<img src="','" alt="','" class="sign-master__preview-image">'])),n.path,n.name);this.imageTagContainer=a.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['<div class="sign-master__preview-container_image"></div>'])));this.imageTag.onload=function(){N.unLockContent();a.Dom.clean(t.imageTagContainer);a.Dom.append(t.imageTag,t.imageTagContainer);t.drawBlocks(t.imageIndex+1)}}},{key:"buildImage",value:function e(){if(!this.imageTagWrapper){this.buildImageTag();this.imageTagWrapper=a.Tag.render(m||(m=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-master__preview-container">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),this.imageTagContainer)}return this.imageTagWrapper}},{key:"onPrevClick",value:function e(){if(this.imageIndex>0){this.imageIndex--;this.btnNextTag.classList.remove("--disabled")}if(this.imageIndex===0){this.btnPrevTag.classList.add("--disabled")}this.navigationTag.classList.add("--lock");this.buildImageTag();this.buildNavigation()}},{key:"onNextClick",value:function e(){if(this.imageIndex<this.imageTotal-1){this.imageIndex++;this.btnPrevTag.classList.remove("--disabled")}if(this.imageIndex===this.imageTotal-1){this.btnNextTag.classList.add("--disabled")}this.navigationTag.classList.add("--lock");this.buildImageTag();this.buildNavigation()}},{key:"buildNavigation",value:function e(){if(!this.navigationTag){this.btnPrevTag=a.Tag.render(v||(v=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span class="sign-master__preview-nav--btn --prev --disabled" onclick="','"></span>\n\t\t\t'])),this.onPrevClick.bind(this));this.btnNextTag=a.Tag.render(g||(g=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span class="sign-master__preview-nav--btn --next" onclick="','"></span>\n\t\t\t'])),this.onNextClick.bind(this));this.navigationTag=a.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="sign-master__preview-nav">\n\t\t\t\t\t','\n\t\t\t\t\t<div class="sign-master__preview-nav--info">\n\t\t\t\t\t\t<div class="sign-master__preview-nav--info-dark">\n\t\t\t\t\t\t\t',' \n\t\t\t\t\t\t\t<span class="sign-master__preview-nav--current">0</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span>/</span>\n\t\t\t\t\t\t<span class="sign-master__preview-nav--total">0</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t"])),this.btnPrevTag,a.Loc.getMessage("SIGN_CMP_MASTER_TPL_PREVIEW_PAGE"),this.btnNextTag)}this.navigationTag.querySelector(".sign-master__preview-nav--current").innerHTML=this.imageIndex+1;this.navigationTag.querySelector(".sign-master__preview-nav--total").innerHTML=this.imageTotal;a.Dom.removeClass(this.navigationTag.querySelector(".sign-master__preview-nav--prev"),"sign-master__preview-nav--active");a.Dom.removeClass(this.navigationTag.querySelector(".sign-master__preview-nav--next"),"sign-master__preview-nav--active");if(this.imageIndex>0){a.Dom.addClass(this.navigationTag.querySelector(".sign-master__preview-nav--prev"),"sign-master__preview-nav--active")}if(this.imageIndex<this.imageTotal-1){a.Dom.addClass(this.navigationTag.querySelector(".sign-master__preview-nav--next"),"sign-master__preview-nav--active")}return this.navigationTag}},{key:"onZoomClick",value:function e(){var t=this.imageCollection[this.imageIndex];if(!t){return}console.log("image path to show: ",t.path)}},{key:"adjustZoomStatus",value:function e(){this.zoomValue=this.defaultZoomValue/100*this.currentZoomValue;this.imageTagContainer.style.setProperty("zoom",this.zoomValue+"%");this.zoomLayout.value.innerText=this.currentZoomValue;switch(true){case this.currentZoomValue>100:this.imageTagWrapper.classList.add("--scroll");break;default:this.imageTagWrapper.classList.remove("--scroll")}switch(true){case this.currentZoomValue===100:this.imageTagContainer.style.setProperty("left",0);this.imageTagContainer.style.setProperty("top",0);this.zoomLayout.minus.classList.add("--hold");break;case this.currentZoomValue===200:this.zoomLayout.plus.classList.add("--hold");break;case this.currentZoomValue===25:this.zoomLayout.minus.classList.add("--hold");break;default:this.zoomLayout.plus.classList.remove("--hold");this.zoomLayout.minus.classList.remove("--hold")}}},{key:"zoomPlus",value:function e(){if(this.imageTag){this.currentZoomValue+=25;this.adjustZoomStatus()}}},{key:"zoomMinus",value:function e(){if(this.imageTag){this.currentZoomValue-=25;this.adjustZoomStatus()}}},{key:"buildZoom",value:function e(){this.zoomLayout={value:a.Tag.render(f||(f=babelHelpers.taggedTemplateLiteral(['<span class="sign-master__preview-zoom-value">',"</span>"])),this.currentZoomValue),minus:a.Tag.render(h||(h=babelHelpers.taggedTemplateLiteral(['<span class="sign-master__preview-zoom_control --minus" onclick="','"></span>'])),this.zoomMinus.bind(this)),plus:a.Tag.render(b||(b=babelHelpers.taggedTemplateLiteral(['<span class="sign-master__preview-zoom_control --plus" onclick="','"></span>'])),this.zoomPlus.bind(this))};return this.zoomLayout.container=a.Tag.render(y||(y=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span class="sign-master__preview-zoom">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</span>\n\t\t"])),this.zoomLayout.minus,this.zoomLayout.value,this.zoomLayout.plus)}},{key:"onRemoveClick",value:function e(){var t=this.imageCollection[this.imageIndex];if(!t){return}}},{key:"buildRemoveButton",value:function e(){if(this.readonly){return a.Tag.render(T||(T=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span class="sign-master__preview-remove --readonly" title="','" >\n\t\t\t\t\t',"\n\t\t\t\t</span>\n\t\t\t"])),a.Loc.getMessage("SIGN_CMP_MASTER_TPL_PREVIEW_REMOVE_ALERT"),a.Loc.getMessage("SIGN_CMP_MASTER_TPL_PREVIEW_REMOVE"))}else{return a.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<span class="sign-master__preview-remove" onclick="','">\n\t\t\t\t\t',"\n\t\t\t\t</span>\n\t\t\t"])),this.onRemoveClick.bind(this),a.Loc.getMessage("SIGN_CMP_MASTER_TPL_PREVIEW_REMOVE"))}}}]);return e}();function L(e,t,n){M(e,t);w(n,"get");return S(e,n)}function w(e,t){if(e===undefined){throw new TypeError("attempted to "+t+" private static field before its declaration")}}function S(e,t){if(t.get){return t.get.call(e)}return t.value}function I(e,t,n){M(e,t);return n}function M(e,t){if(e!==t){throw new TypeError("Private static access of wrong provenance")}}var B=a.Reflection.namespace("BX.Crm.EntityEditor");var N=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"nextStepHandler",value:function t(n,i,a){if(!n||!i||!a){return}var o=document.querySelector(n);var r=document.querySelector(i);var s=document.querySelectorAll(a);var l=null;var c=null;var u=function t(n){if(n){n.onchange=function(){if(n.value!==""){if(c){c.classList.add("--active")}e.unLockNavigation()}if(n.value===""){if(c){c.classList.remove("--active")}e.lockNavigation()}}}};u(o);u(r);var d=function t(n){s[n].addEventListener("click",(function(){o.value=null;r.value=null;e.lockNavigation();if(l){l.checked=false}if(c){c.classList.remove("--active")}c=s[n];l=s[n].querySelector('[type="radio"]');if(l){l.checked=true;c.classList.add("--active");e.unLockNavigation()}}))};for(var m=0;m<s.length;m++){d(m)}}},{key:"loadFileHandler",value:function t(n){var i=document.querySelectorAll(n);var a=document.querySelector('[data-action="inputFile"]');var o=document.querySelector('[data-action="inputFileMulti"]');var r=a?a.closest("form"):null;if(!i||!a||!r){return}babelHelpers.toConsumableArray(i).map((function(t){t.addEventListener("click",(function(n){if(t.getAttribute("data-multiple")==="Y"&&o){a=o}a.addEventListener("change",(function(t){if(t.target.files.length>10){var n=document.getElementById("sign-master__too_many_pics");if(n){n.style.display="block"}window.scrollTo({top:0,left:0,behavior:"smooth"});return}var i=document.querySelector("[data-master-next-step-button]")?document.querySelector("[data-master-next-step-button]"):null;e.lockNavigation(i);e.lockContent();r.submit()}));a.click();n.preventDefault()}))}))}},{key:"selectBlankHandler",value:function e(t){babelHelpers.toConsumableArray(t).map((function(e){e.addEventListener("click",(function(){e.closest("form").submit()}))}))}},{key:"loadCrmEntityEditor",value:function t(i){var o=this;I(e,e,P).call(e).addEventListener("click",e.onNextBtnClickAtPartnerStep);e.adjustLockNavigation(I(e,e,P).call(e),I(e,e,D).call(e));BX.addCustomEvent("BX.Sign.Preview:firstImageIsLoaded",e.onPreviewFirstImageIsLoadedInPartnerStep);e.reloadCrmElementsList();var r=document.querySelector('[data-action="changePartner"]');var s=document.querySelector('[name="initiatorName"]');e.lockNavigation();var l=new BX.Loader({target:i.container});l.show();BX.ajax.runAction("crm.api.item.getEditor",{data:{id:i.id,entityTypeId:i.entityTypeId,guid:i.guid,stageId:i.stageId,categoryId:i.categoryId,params:{ENABLE_PAGE_TITLE_CONTROLS:false,ENABLE_MODE_TOGGLE:true,IS_EMBEDDED:"N",forceDefaultConfig:"Y",enableSingleSectionCombining:"N"}}}).then((function(t){var n;l.destroy();L(e,e,x).crmItemEditor=true;if(L(e,e,x).preview){e.unLockNavigation();var o=I(e,e,P).call(e);if(o){o.title=""}}if(!(t!==null&&t!==void 0&&(n=t.data)!==null&&n!==void 0&&n.html)){return}a.Runtime.html(i.container,t.data.html).then((function(){var t=e.getEditor(i.guid);if(!t){return}var n=t.getControlById("MYCOMPANY_ID");if(n){var o=t.getControlById("myCompany");if(n.hasCompanies()){if(o){t.switchControlMode(o,BX.UI.EntityEditorMode.view)}}else if(o){o.enableToggling(false)}n.isRequired=function(){return true};n.switchToSingleEditMode_prev=n.switchToSingleEditMode;n.switchToSingleEditMode=function(e){if(o&&o.getMode()===BX.UI.EntityEditorMode.view){t.switchControlMode(o,BX.UI.EntityEditorMode.edit)}n.switchToSingleEditMode_prev(e)}}var r=t.getControlById("client");var s=t.getControlById("CLIENT");if(s){if(s.hasContacts()){if(r){t.switchControlMode(r,BX.UI.EntityEditorMode.view)}}else{if(r){r.enableToggling(false)}a.Dom.remove(s._addContactButton)}s.isRequired=function(){return true};if(s._contactSearchBoxes[0]){s._contactSearchBoxes[0]._isRequired=true}s.switchToSingleEditMode_prev=s.switchToSingleEditMode;s.switchToSingleEditMode=function(e){if(r&&r.getMode()===BX.UI.EntityEditorMode.view){t.switchControlMode(r,BX.UI.EntityEditorMode.edit)}s.switchToSingleEditMode_prev(e)};s.layout_prev=s.layout;s.layout=function(e){s.layout_prev(e);setTimeout((function(){a.Dom.remove(s._addContactButton)}),10)}}}))}))["catch"]((function(e){console.log("error",e)}));var c=r?r.closest("form"):null;if(!r||!c){return}r.addEventListener("click",(function(t){t.preventDefault();e.hideErrors();var n=function t(n){if(l){l.destroy()}e.unLockNavigation();e.unLockContent();e.showError(n)};if(s&&s.value.trim()===""){n(a.Loc.getMessage("SIGN_CMP_MASTER_TPL_ERROR_WRONG_INITIATOR"))}else if(e.checkFilledContacts(i)){BX.Crm.EntityEditor.getDefault().save()}else{n(a.Loc.getMessage("SIGN_CMP_MASTER_TPL_ERROR_WRONG_CONTACTS_NUMBER"))}}));BX.addCustomEvent(window,"BX.Crm.EntityEditor:onFailedValidation",(function(t){e.unLockNavigation();e.unLockContent()}));BX.addCustomEvent(window,"onCrmEntityUpdateError",(function(t){e.unLockNavigation();e.unLockContent()}));BX.addCustomEvent(window,"BX.Crm.EntityEditor:onEntitySaveFailure",(function(t){e.unLockNavigation();e.unLockContent();if(t.errors){n.UI.Notification.Center.notify({content:t.errors.join(", ")})}}));BX.addCustomEvent(window,"onCrmEntityUpdate",(function(t){e.reloadCrmElementsList();var n=t.entityData;if(!(n!==null&&n!==void 0&&n.CONTACT_ID)){e.unLockNavigation();e.unLockContent()}if(n!==null&&n!==void 0&&n.CONTACT_ID){BX.Sign.Backend.controller({command:"internal.document.assignMembers",postData:{documentId:i.documentId}}).then((function(){e.openEditor(i.documentEditorUrl,c)}))["catch"]((function(t){e.unLockNavigation();e.unLockContent();o.showError(t.errors[0].message,t.errors[0].customData)}))}}))}},{key:"showInfoHelperSlider",value:function t(n){e.lockContent();e.lockNavigation();var i=BX.SidePanel.Instance.getTopSlider();var a=top.BX.UI.InfoHelper;a.show(n);top.BX.addCustomEvent(a.getSlider(),"SidePanel.Slider:onCloseComplete",(function(){return i===null||i===void 0?void 0:i.close()}))}},{key:"saveTitle",value:function e(t){var n=document.querySelector('[data-action="saveTitle"]');var i=document.querySelector('[data-action="cancel"]');var o=document.querySelector('[data-param="saveTitleValue"]');var r=document.querySelector('[data-wrapper="title"]');var s=document.querySelector('[data-wrapper="inputWrapper"]');var l=document.querySelector('[data-wrapper="edit"]');var c=document.querySelector('[data-wrapper="titleEditor"]');if(l&&c){l.addEventListener("click",(function(){a.Dom.addClass(c,"--edit")}))}if(n&&o){o.addEventListener("keydown",(function(t){if(t.code.toLowerCase()==="escape"){a.Dom.removeClass(c,"--edit");o.value=r.innerText;t.stopPropagation()}if(t.code.toLowerCase()==="enter"){e();t.stopPropagation();t.preventDefault()}}));i.addEventListener("click",(function(){a.Dom.removeClass(c,"--edit");o.value=r.innerText}));n.addEventListener("click",(function(){return e()}));var e=function e(){a.Dom.addClass(n,"ui-btn-wait");a.Dom.addClass(s,"ui-ctl-disabled");var i=o.value;BX.Sign.Backend.controller({command:"document.setTitle",postData:{documentId:t,title:i}}).then((function(e){if(e&&r){r.innerHTML=BX.Text.encode(i)}a.Dom.removeClass(n,"ui-btn-wait");a.Dom.removeClass(s,"ui-ctl-disabled");a.Dom.removeClass(c,"--edit")}))["catch"]((function(){}))}}}},{key:"adjustLockNavigation",value:function t(n,i){n=n||null;i=i||null;if(n){n.addEventListener("click",(function(){e.lockContent();e.lockNavigation(n,i)}))}if(i){i.addEventListener("click",(function(){e.lockContent();e.lockNavigation(i,n)}))}}},{key:"lockNavigation",value:function e(t,n){if(t){t.classList.add("ui-btn-wait");t.classList.add("ui-btn-disabled")}if(n){n.classList.add("ui-btn-disabled")}var i=function e(t){t.classList.add("ui-btn-disabled")};if(!t){var a=document.querySelector("[data-master-next-step-button]");a?i(a):null}if(!n){var o=document.querySelector("[data-master-prev-step-button]");o?i(o):null}}},{key:"unLockNavigation",value:function e(){var t=document.querySelector("[data-master-next-step-button]");var n=document.querySelector("[data-master-prev-step-button]");if(t){t.classList.remove("ui-btn-wait");t.classList.remove("ui-btn-disabled")}if(n){n.classList.remove("ui-btn-wait");n.classList.remove("ui-btn-disabled")}}},{key:"lockContent",value:function e(){var t=document.querySelector('[data-role="sign-master__content"]');if(t){t.classList.add("--lock")}}},{key:"unLockContent",value:function e(){var t=document.querySelector('[data-role="sign-master__content"]');if(t){t.classList.remove("--lock")}}},{key:"checkFilledContacts",value:function t(n){var i=true;if(Number(n.contactsCount)<=0){return i}var a=e.getEditor(n.guid);if(!a){return i}var o=a.getControlById("CLIENT");if(!o){return i}var r=a.getControlById("MYCOMPANY_ID");if(!r){return i}var s=o._contactInfos.length()+(r.hasCompanies()?1:0);if(s<n.contactsCount){i=false}return i}},{key:"getEditor",value:function e(t){if(B){return B.get(t)}return null}},{key:"openEditor",value:function e(t,n){if(typeof BX.SidePanel!=="undefined"&&typeof BX.SidePanel.Instance!=="undefined"){BX.SidePanel.Instance.open(t,{data:{bxSignEditorAllSaved:true},events:{onClose:function e(t){if(t.getSlider().getData().get("bxSignEditorAllSaved")===true){if(n){n.submit()}else{window.location.reload()}}else{t.denyAction()}}},width:1200,cacheable:false,allowChangeHistory:false})}}},{key:"initMuteCheckbox",value:function e(t,n,i){if(!i){return}babelHelpers.toConsumableArray(t).map((function(e){a.Event.bind(e,"click",(function(){var t=e.closest(n).querySelectorAll("["+i+'="1"]');babelHelpers.toConsumableArray(t).map((function(t){t.hidden=e.checked}))}))}))}},{key:"initCommunicationsSelector",value:function e(n){var o=n.containers,r=n.attrMemberIdName,s=n.attrMemberUrlName,l=n.communications,c=n.smsAllowed,u=n.smsNotAllowedCallback;Array.from(o).map((function(e){var n=parseInt(e.getAttribute(r));var i=e.getAttribute(s);var o=l[n].length?l[n]:[];var d;var m="sign-member-communications-"+n;var v=e.querySelector("input");var g=e.querySelector(".sign-master__send-member--communications-arrow span");var p=[];var f=function e(){return BX.SidePanel.Instance.open(i,{cacheable:false,allowChangeHistory:false,events:{onClose:function e(){window.location.reload();if(d){d.close()}}}})};o.map((function(e){p.push({text:e.value,onclick:function n(){if(e.type==="PHONE"&&!c){u()}else{v.setAttribute("value",e.type+"|"+e.value);g.innerText=e.value;g.parentNode.setAttribute("title",e.value)}t.MenuManager.getMenuById(m).close()}})}));if(p.length<=0){a.Event.bind(e,"click",(function(){f()}));return}p.push({text:a.Loc.getMessage("SIGN_CMP_MASTER_TPL_MEMBER_NEW_COMMUNICATION"),onclick:function e(){f()}});d=t.MenuManager.create({id:m,bindElement:e,items:p});a.Event.bind(e,"click",(function(){d.show()}))}));var d=new i.Guide({steps:[{target:document.querySelector(".sign-master__send-member--communications"),title:a.Loc.getMessage("SIGN_CMP_MASTER_TPL_TOUR_STEP_SEND_MEMBER_COMMUNICATION_TITLE"),text:a.Loc.getMessage("SIGN_CMP_MASTER_TPL_TOUR_STEP_SEND_MEMBER_COMMUNICATION_TEXT"),position:"right"}],id:"sign-tour-guide-onboarding-master-member-communication",autoSave:true,simpleMode:true});d.startOnce()}},{key:"showPreview",value:function e(t){new E(t)}},{key:"showError",value:function e(t,n){var i=document.querySelector('[data-role="sign-error-container"]');if(i){a.Dom.style(i.parentNode,"display","block");i.innerHTML=BX.util.htmlspecialchars(t);if(n!==null&&n!==void 0&&n.href){var o=BX.util.htmlspecialchars(n.href);var r='<a href="'+o+'" target="_blank">';var s="</a>";var l=BX.util.htmlspecialchars(n.button);i.innerHTML+=" "+l.replace("#LINK_START#",r).replace("#LINK_END#",s)}window.scrollTo({top:0,left:0,behavior:"smooth"})}}},{key:"hideErrors",value:function e(){var t=document.querySelector('[data-role="sign-error-container"]');if(t){t.parentNode.style.display="none";t.innerText=""}}},{key:"reloadCrmElementsList",value:function e(){var t,n,i,a,o,r,s,l,c,u;(t=top.BX)===null||t===void 0?void 0:(n=t.CRM)===null||n===void 0?void 0:(i=n.Kanban)===null||i===void 0?void 0:(a=i.Grid)===null||a===void 0?void 0:(o=a.getInstance())===null||o===void 0?void 0:o.reload();(r=top.BX)===null||r===void 0?void 0:(s=r.Main)===null||s===void 0?void 0:(l=s.gridManager)===null||l===void 0?void 0:(c=l.data[0])===null||c===void 0?void 0:(u=c.instance)===null||u===void 0?void 0:u.reload()}},{key:"onPreviewFirstImageIsLoadedInPartnerStep",value:function t(){L(e,e,x).preview=true;if(L(e,e,x).crmItemEditor){e.unLockNavigation();var n=I(e,e,P).call(e);if(n){n.title=""}}}},{key:"onNextBtnClickAtPartnerStep",value:function t(n){if(!L(e,e,x).preview||!L(e,e,x).crmItemEditor){n.stopImmediatePropagation()}}}]);return e}();function P(){return document.querySelector("[data-master-next-step-button]")}function D(){return document.querySelector("[data-master-prev-step-button]")}var x={writable:true,value:{preview:false,crmItemEditor:false}};e.Master=N})(this.BX.Sign.Component=this.BX.Sign.Component||{},BX.Main,BX,BX.Sign.Tour,BX,BX.Sign);
//# sourceMappingURL=script.map.js