{"version":3,"file":"listener.bundle.js","sources":["../src/listener.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\nexport class Listener extends EventEmitter\n{\n\t#command: string;\n\t#handlerCommand: function;\n\t#listeningState: boolean = false;\n\n\tconstructor(command: string, handlerCommand: function)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Rest.Listener');\n\t\tthis.#command = command;\n\t\tthis.#handlerCommand = handlerCommand;\n\t}\n\n\tlisten(): void\n\t{\n\t\tif (this.#listeningState)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.PULL.subscribe({\n\t\t\ttype: BX.PullClient.SubscriptionType.Server,\n\t\t\tmoduleId: 'rest',\n\t\t\tcallback: (data) => {\n\t\t\t\tthis.#handleCommand(data);\n\t\t\t}\n\t\t});\n\t\tthis.#listeningState = true;\n\t}\n\n\t#handleCommand(data): void\n\t{\n\t\tif (data.command === this.#command)\n\t\t{\n\t\t\tthis.emit('pull');\n\t\t\tthis.#handlerCommand(data);\n\t\t}\n\t}\n}"],"names":["Listener","command","handlerCommand","setEventNamespace","BX","PULL","subscribe","type","PullClient","SubscriptionType","Server","moduleId","callback","data","EventEmitter","emit"],"mappings":";;;;;;;;;AAAA,CAAgD;CAAA;CAAA;CAAA;AAEhD,KAAaA,QAAQ;GAAA;GAMpB,kBAAYC,OAAe,EAAEC,cAAwB,EACrD;KAAA;KAAA;KACC;KAAQ;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAJkB;;KAK1B,MAAKC,iBAAiB,CAAC,kBAAkB,CAAC;KAC1C,uFAAgBF,OAAO;KACvB,8FAAuBC,cAAc;KAAC;;GACtC;KAAA;KAAA,yBAGD;OAAA;OACC,sCAAI,IAAI,oBACR;SACC;;OAGDE,EAAE,CAACC,IAAI,CAACC,SAAS,CAAC;SACjBC,IAAI,EAAEH,EAAE,CAACI,UAAU,CAACC,gBAAgB,CAACC,MAAM;SAC3CC,QAAQ,EAAE,MAAM;SAChBC,QAAQ,EAAE,kBAACC,IAAI,EAAK;WACnB,6BAAI,wCAAJ,MAAI,EAAgBA,IAAI;;QAEzB,CAAC;OACF,sCAAI,mBAAmB,IAAI;;;GAC3B;CAAA,EA7B4BC,6BAAY;CAuCzC,yBAReD,IAAI,EACnB;GACC,IAAIA,IAAI,CAACZ,OAAO,uCAAK,IAAI,WAAS,EAClC;KACC,IAAI,CAACc,IAAI,CAAC,MAAM,CAAC;KACjB,sCAAI,wBAAJ,IAAI,EAAiBF,IAAI;;CAE3B;;;;;;;;"}