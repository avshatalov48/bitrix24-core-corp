{"version":3,"file":"form-constructor.bundle.js","sources":["../src/fields/base-field.js","../src/fields/dropdown-list.js","../src/fields/input.js","../src/form-constructor.js"],"sourcesContent":["import { Type, Text } from 'main.core';\nimport type { FieldConfig } from '../types';\nimport { EventEmitter } from 'main.core.events';\n\nexport class BaseField extends EventEmitter\n{\n\toptions: FieldConfig;\n\treadySave: boolean;\n\tvalue: any;\n\n\tconstructor(options: FieldConfig)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Rest.EInvoice.Field');\n\t\tthis.options = options;\n\t\tthis.value = this.options.value ?? null;\n\t\tthis.readySave = !(Type.isNil(this.value) || this.value === '');\n\t\tthis.options.id = Type.isStringFilled(this.options.id) ? this.options.id : Text.getRandom(8);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.options.id;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.options.name;\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tisReadySave(): boolean\n\t{\n\t\treturn this.readySave;\n\t}\n\n\tgetValue(): any\n\t{\n\t\treturn this.value;\n\t}\n}","import { Dom, Tag, Type, Event } from 'main.core';\nimport type { FieldConfig } from '../types';\nimport { BaseField } from './base-field';\n\nexport class DropdownList extends BaseField\n{\n\tconstructor(options: FieldConfig)\n\t{\n\t\tsuper(options);\n\t\tthis.readySave = true;\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown\">\n\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (Type.isArray(this.options.items))\n\t\t{\n\t\t\tconst itemsWrapper = Tag.render`\n\t\t\t\t<select class=\"ui-ctl-element\" id=\"${this.getId()}\" />\n\t\t\t`;\n\t\t\tthis.options.items.forEach((item) => {\n\t\t\t\tconst itemElement = Tag.render`\n\t\t\t\t\t<option value=\"${item.value}\">${item.name}</option>\n\t\t\t\t`;\n\n\t\t\t\tif (this.options.value === item.value)\n\t\t\t\t{\n\t\t\t\t\tDom.attr(itemElement, {\n\t\t\t\t\t\tselected: true,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tDom.append(itemElement, itemsWrapper);\n\t\t\t});\n\t\t\t// this.value = this.options.items[0].value ?? null;\n\t\t\tDom.append(itemsWrapper, wrapper);\n\n\t\t\tif (this.options.hasOwnProperty('updateForm') && this.options.updateForm)\n\t\t\t{\n\t\t\t\tEvent.bind(itemsWrapper, 'change', (event) => {\n\t\t\t\t\tthis.value = event.target.value;\n\t\t\t\t\tthis.emit('onFieldChange', {\n\t\t\t\t\t\ttarget: event.target,\n\t\t\t\t\t\tfield: this\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn wrapper;\n\t}\n}\n","import { Dom, Tag, Event, Type } from 'main.core';\nimport { BaseField } from './base-field';\n\nexport class Input extends BaseField\n{\n\t#errorBlock: HTMLElement;\n\n\tgetContent(): HTMLElement\n\t{\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"ui-ctl-container\"/>\n\t\t`;\n\n\t\tif (this.options.label)\n\t\t{\n\t\t\tconst inputTitle = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-top\">\n\t\t\t\t\t<div class=\"ui-ctl-title\">${this.options.label}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(inputTitle, wrapper);\n\t\t}\n\n\t\tconst input = Tag.render`\n\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox\">\n\t\t\t\t\t<input type=\"text\" id=\"${this.getId()}\" class=\"ui-ctl-element\">\n\t\t\t\t</div>\n\t\t`;\n\t\tconst inputElement = input.querySelector('input');\n\n\t\tif (this.options.placeholder)\n\t\t{\n\t\t\tDom.attr(inputElement, {\n\t\t\t\tplaceholder: this.options.placeholder,\n\t\t\t});\n\t\t}\n\n\t\tif (this.options.value)\n\t\t{\n\t\t\tDom.attr(inputElement, {\n\t\t\t\tvalue: this.options.value,\n\t\t\t});\n\t\t}\n\n\t\tEvent.bind(inputElement, 'input', (event) => {\n\t\t\tDom.hide(this.#getErrorBlock());\n\n\t\t\tif (Dom.hasClass(wrapper, 'ui-ctl-warning'))\n\t\t\t{\n\t\t\t\tDom.removeClass(wrapper, 'ui-ctl-warning');\n\t\t\t}\n\n\t\t\tif (Type.isNil(event.target.value) || event.target.value === '')\n\t\t\t{\n\t\t\t\tthis.emit('onUnreadySave');\n\t\t\t\tthis.readySave = false;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.emit('onReadySave');\n\t\t\t\tthis.readySave = true;\n\t\t\t}\n\n\t\t\tthis.value = event.target.value;\n\t\t});\n\n\t\tDom.append(input, wrapper);\n\t\tDom.append(this.#getErrorBlock(), wrapper);\n\t\tDom.hide(this.#getErrorBlock());\n\t\tthis.subscribe('error', (event) => {\n\t\t\tconst messages = event.data.messages;\n\t\t\tthis.#getErrorBlock().innerHTML = Type.isArray(messages) ? messages.join('<br>') : messages;\n\t\t\tDom.show(this.#getErrorBlock());\n\n\t\t\tif (!Dom.hasClass(wrapper, 'ui-ctl-warning'))\n\t\t\t{\n\t\t\t\tDom.addClass(wrapper, 'ui-ctl-warning');\n\t\t\t}\n\t\t});\n\n\t\treturn wrapper;\n\t}\n\n\t#getErrorBlock(): HTMLElement\n\t{\n\t\tif (!this.#errorBlock)\n\t\t{\n\t\t\tthis.#errorBlock = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-bottom bitrix-einvoice-error-block\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.#errorBlock;\n\t}\n}\n","import { Dom, Tag, ajax, Type, Text, Loc } from 'main.core';\nimport { StepByStep } from 'ui.stepbystep';\nimport { DropdownList } from './fields/dropdown-list';\nimport { Input } from './fields/input';\nimport { BaseField } from './fields/base-field';\nimport type { SettingsEInvoiceOptions, StepEInvoiceSettingsConfig } from './types';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport class FormConstructor extends EventEmitter\n{\n\t#options: SettingsEInvoiceOptions;\n\t#fields: Array<BaseField>;\n\t#stepByStep: StepByStep;\n\n\tconstructor(options: SettingsEInvoiceOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Rest.EInvoice');\n\t\tif (!Type.isArray(options.steps))\n\t\t{\n\t\t\tthrow new Error('Unexpected property type  \"steps\", expected type array');\n\t\t}\n\t\tthis.#options = options;\n\t\tthis.#fields = [];\n\n\t\tthis.#stepByStep = new StepByStep({\n\t\t\tcontent: this.#getContentConfig(),\n\t\t});\n\t}\n\n\tgetFields()\n\t{\n\t\treturn this.#fields;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn this.#stepByStep.getContentWrapper();\n\t}\n\n\trenderTo(target: HTMLElement)\n\t{\n\t\tthis.#stepByStep.target = target;\n\t\tthis.#stepByStep.init();\n\t}\n\n\t#getContentConfig(): Object\n\t{\n\t\tconst contentConfig = [];\n\n\t\tthis.#options.steps.forEach((item) => {\n\t\t\tconst stepConfig = {\n\t\t\t\thtml: [{\n\t\t\t\t\tbackgroundColor: '#ffffff',\n\t\t\t\t}],\n\t\t\t};\n\n\t\t\tif (item.title)\n\t\t\t{\n\t\t\t\tstepConfig.html[0].header = {\n\t\t\t\t\ttitle: item.title,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tstepConfig.html[0].node = this.#getStepContent(item);\n\t\t\tcontentConfig.push(stepConfig);\n\t\t});\n\n\t\treturn contentConfig;\n\t}\n\n\t#getStepContent(stepConfig: StepEInvoiceSettingsConfig): HTMLElement\n\t{\n\t\tconst wrapper = Tag.render`\n\t\t\t<div class=\"bitrix-einvoice-settings-step__wrapper\"></div>\n\t\t`;\n\n\t\tif (stepConfig.description)\n\t\t{\n\t\t\tconst description = Tag.render`\n\t\t\t\t<div class=\"bitrix-einvoice-settings-step__description\">${stepConfig.description}</div>\n\t\t\t`;\n\t\t\tDom.append(description, wrapper);\n\t\t}\n\n\t\tif (stepConfig.fields)\n\t\t{\n\t\t\tstepConfig.fields.forEach((fieldConfig, index) => {\n\t\t\t\tlet field;\n\n\t\t\t\tswitch (fieldConfig.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'input':\n\t\t\t\t\t\tfield = new Input(fieldConfig);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'dropdown-list':\n\t\t\t\t\t\tfield = new DropdownList(fieldConfig);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error('Incorrect field type');\n\t\t\t\t}\n\n\t\t\t\tif (field instanceof BaseField)\n\t\t\t\t{\n\t\t\t\t\tfield.subscribe('onReadySave', () => {\n\t\t\t\t\t\tthis.emit('onReadySave');\n\t\t\t\t\t});\n\t\t\t\t\tfield.subscribe('onUnreadySave', () => {\n\t\t\t\t\t\tthis.emit('onUnreadySave');\n\t\t\t\t\t});\n\t\t\t\t\tfield.subscribe('onFieldChange', (event) => {\n\t\t\t\t\t\tthis.emit('onFieldChange', event);\n\t\t\t\t\t});\n\t\t\t\t\tthis.#fields.push(field);\n\t\t\t\t\tconst fieldContent = field.getContent();\n\t\t\t\t\tDom.append(fieldContent, wrapper);\n\n\t\t\t\t\tif (index > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.style(fieldContent, 'margin-top', '12px');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (stepConfig.link && stepConfig.link.url.startsWith('https://'))\n\t\t{\n\t\t\tconst linkArticle = Tag.render`\n\t\t\t\t<div class=\"bitrix-einvoice-settings-step-wrapper-link\">\n\t\t\t\t\t<a href=\"${stepConfig.link.url}\" class=\"bitrix-einvoice-settings-step__link\">${Text.encode(stepConfig.link.name)}</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tDom.append(linkArticle, wrapper);\n\t\t}\n\n\t\treturn wrapper;\n\t}\n\n\tgetFormData(): Object\n\t{\n\t\tlet result = {};\n\n\t\tthis.#fields.forEach((field) => {\n\t\t\tif (field.isReadySave())\n\t\t\t{\n\t\t\t\tresult[field.getName()] = field.getValue();\n\t\t\t}\n\t\t});\n\n\t\treturn result\n\t}\n\n\t/*\n\terrors = {\n\t\tfieldName: ['error message']\n\t}\n\t */\n\tshowFieldErrors(errors: Object): void\n\t{\n\t\tfor (const [fieldName, messages] of Object.entries(errors)) {\n\t\t\tthis.#fields.forEach((field) => {\n\t\t\t\tif (field.getName() === fieldName)\n\t\t\t\t{\n\t\t\t\t\tfield.emit('error', new BaseEvent({\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tmessages: messages,\n\t\t\t\t\t\t},\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tshowTextInBalloon(text: string):  void\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tid: 'einvoice-error-save-settings',\n\t\t\tcontent: Tag.render`\n\t\t\t\t\t\t<div class=\"bitrix-einvoice-settings-notification-wrapper\">\n\t\t\t\t\t\t\t<span class=\"ui-icon-set --warning\"></span>\n\t\t\t\t\t\t\t${text}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,\n\t\t\tautoHideDelay: 5000,\n\t\t});\n\t}\n}"],"names":["BaseField","options","setEventNamespace","value","readySave","Type","isNil","id","isStringFilled","Text","getRandom","name","Error","EventEmitter","DropdownList","wrapper","Tag","render","isArray","items","itemsWrapper","getId","forEach","item","itemElement","Dom","attr","selected","append","hasOwnProperty","updateForm","Event","bind","event","target","emit","field","Input","label","inputTitle","input","inputElement","querySelector","placeholder","hide","hasClass","removeClass","subscribe","messages","data","innerHTML","join","show","addClass","FormConstructor","_classPrivateMethodInitSpec","_classPrivateFieldInitSpec","steps","StepByStep","content","getContentWrapper","init","result","isReadySave","getName","getValue","errors","fieldName","BaseEvent","Object","entries","text","BX","UI","Notification","Center","notify","autoHideDelay","contentConfig","stepConfig","html","backgroundColor","title","header","node","push","description","fields","fieldConfig","index","type","fieldContent","getContent","style","link","url","startsWith","linkArticle","encode"],"mappings":"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"}