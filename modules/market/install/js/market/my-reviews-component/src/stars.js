export const Stars = {
	emits: ['changeRating'],
	props: ['rating', 'editable'],
	data() {
		return {
			editedRating: 0,
		};
	},
	computed: {
		getAppRating: function () {
			return this.editable ? this.editedRating : this.rating;
		},
	},
	mounted: function() {
		this.editedRating = this.rating;
	},
	methods: {
		isActiveStar: function (currentStar, rating) {
			return currentStar <= parseInt(rating, 10);
		},
		ratingClick: function (rating) {
			if (!this.editable) {
				return;
			}

			this.editedRating = rating;

			this.$emit('changeRating', rating);
		},
	},
	template: `
		<div class="market-detail__feedback-item_stars-container --popup-feedback">
			<svg class="market-rating__app-rating_star"
				 :class="{'--active': isActiveStar(1, getAppRating), '--pointer': editable}"
				 @click="ratingClick(1)"
				 width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M5.53505 1.17539C5.70176 0.753947 6.29824 0.753947 6.46495 1.17539L7.55466 3.93021C7.62451 4.1068 7.78837 4.22857 7.97761 4.24452L10.8494 4.4866C11.2857 4.52338 11.4673 5.06336 11.142 5.35636L8.91785 7.35965C8.78333 7.48081 8.72481 7.66523 8.76486 7.84179L9.43787 10.8084C9.53688 11.2448 9.05662 11.5815 8.68007 11.3397L6.27019 9.79201C6.10558 9.68629 5.89442 9.68629 5.72981 9.79201L3.31993 11.3397C2.94338 11.5815 2.46312 11.2448 2.56213 10.8084L3.23514 7.84179C3.27519 7.66523 3.21667 7.48081 3.08215 7.35965L0.857969 5.35636C0.532663 5.06336 0.714337 4.52338 1.15059 4.4866L4.02239 4.24452C4.21163 4.22857 4.37549 4.1068 4.44534 3.93021L5.53505 1.17539Z"/>
			</svg>
			<svg class="market-rating__app-rating_star"
				 :class="{'--active': isActiveStar(2, getAppRating), '--pointer': editable}"
				 @click="ratingClick(2)"
				 width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M5.53505 1.17539C5.70176 0.753947 6.29824 0.753947 6.46495 1.17539L7.55466 3.93021C7.62451 4.1068 7.78837 4.22857 7.97761 4.24452L10.8494 4.4866C11.2857 4.52338 11.4673 5.06336 11.142 5.35636L8.91785 7.35965C8.78333 7.48081 8.72481 7.66523 8.76486 7.84179L9.43787 10.8084C9.53688 11.2448 9.05662 11.5815 8.68007 11.3397L6.27019 9.79201C6.10558 9.68629 5.89442 9.68629 5.72981 9.79201L3.31993 11.3397C2.94338 11.5815 2.46312 11.2448 2.56213 10.8084L3.23514 7.84179C3.27519 7.66523 3.21667 7.48081 3.08215 7.35965L0.857969 5.35636C0.532663 5.06336 0.714337 4.52338 1.15059 4.4866L4.02239 4.24452C4.21163 4.22857 4.37549 4.1068 4.44534 3.93021L5.53505 1.17539Z"/>
			</svg>
			<svg class="market-rating__app-rating_star"
				 :class="{'--active': isActiveStar(3, getAppRating), '--pointer': editable}"
				 @click="ratingClick(3)"
				 width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M5.53505 1.17539C5.70176 0.753947 6.29824 0.753947 6.46495 1.17539L7.55466 3.93021C7.62451 4.1068 7.78837 4.22857 7.97761 4.24452L10.8494 4.4866C11.2857 4.52338 11.4673 5.06336 11.142 5.35636L8.91785 7.35965C8.78333 7.48081 8.72481 7.66523 8.76486 7.84179L9.43787 10.8084C9.53688 11.2448 9.05662 11.5815 8.68007 11.3397L6.27019 9.79201C6.10558 9.68629 5.89442 9.68629 5.72981 9.79201L3.31993 11.3397C2.94338 11.5815 2.46312 11.2448 2.56213 10.8084L3.23514 7.84179C3.27519 7.66523 3.21667 7.48081 3.08215 7.35965L0.857969 5.35636C0.532663 5.06336 0.714337 4.52338 1.15059 4.4866L4.02239 4.24452C4.21163 4.22857 4.37549 4.1068 4.44534 3.93021L5.53505 1.17539Z"/>
			</svg>
			<svg class="market-rating__app-rating_star "
				 :class="{'--active': isActiveStar(4, getAppRating), '--pointer': editable}"
				 @click="ratingClick(4)"
				 width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M5.53505 1.17539C5.70176 0.753947 6.29824 0.753947 6.46495 1.17539L7.55466 3.93021C7.62451 4.1068 7.78837 4.22857 7.97761 4.24452L10.8494 4.4866C11.2857 4.52338 11.4673 5.06336 11.142 5.35636L8.91785 7.35965C8.78333 7.48081 8.72481 7.66523 8.76486 7.84179L9.43787 10.8084C9.53688 11.2448 9.05662 11.5815 8.68007 11.3397L6.27019 9.79201C6.10558 9.68629 5.89442 9.68629 5.72981 9.79201L3.31993 11.3397C2.94338 11.5815 2.46312 11.2448 2.56213 10.8084L3.23514 7.84179C3.27519 7.66523 3.21667 7.48081 3.08215 7.35965L0.857969 5.35636C0.532663 5.06336 0.714337 4.52338 1.15059 4.4866L4.02239 4.24452C4.21163 4.22857 4.37549 4.1068 4.44534 3.93021L5.53505 1.17539Z"/>
			</svg>
			<svg class="market-rating__app-rating_star"
				 :class="{'--active': isActiveStar(5, getAppRating), '--pointer': editable}"
				 @click="ratingClick(5)"
				 width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
				<path d="M5.53505 1.17539C5.70176 0.753947 6.29824 0.753947 6.46495 1.17539L7.55466 3.93021C7.62451 4.1068 7.78837 4.22857 7.97761 4.24452L10.8494 4.4866C11.2857 4.52338 11.4673 5.06336 11.142 5.35636L8.91785 7.35965C8.78333 7.48081 8.72481 7.66523 8.76486 7.84179L9.43787 10.8084C9.53688 11.2448 9.05662 11.5815 8.68007 11.3397L6.27019 9.79201C6.10558 9.68629 5.89442 9.68629 5.72981 9.79201L3.31993 11.3397C2.94338 11.5815 2.46312 11.2448 2.56213 10.8084L3.23514 7.84179C3.27519 7.66523 3.21667 7.48081 3.08215 7.35965L0.857969 5.35636C0.532663 5.06336 0.714337 4.52338 1.15059 4.4866L4.02239 4.24452C4.21163 4.22857 4.37549 4.1068 4.44534 3.93021L5.53505 1.17539Z"/>
			</svg>
		</div>
	`,
}