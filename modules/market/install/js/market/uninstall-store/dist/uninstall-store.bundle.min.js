this.BX=this.BX||{};(function(e,t,n){"use strict";const i=t.defineStore("market-uninstall",{state:()=>({uninstallConfirmShown:false,appCode:"",uninstallNodes:{},popupDelete:null,refreshUri:""}),actions:{setNodesInfo(e,t){this.uninstallNodes[e]=t},deleteApp:function(e,t,n){this.refreshUri=n!=null?n:"";if(this.uninstallConfirmShown){return}if(!!t&&t.length>0){this.appCode=t}if(this.appCode.length<=0){return}this.uninstallConfirmShown=true;this.showUninstallConfirmPopup()},showUninstallConfirmPopup:function(){this.popupDelete=new BX.PopupWindow("market_delete_confirm_popup_"+this.appCode,null,{content:this.uninstallNodes[this.appCode],closeByEsc:true,closeIcon:false,events:{onPopupClose:()=>{this.uninstallConfirmShown=false;this.popupDelete.destroy()}},buttons:[new BX.PopupWindowButton({text:BX.message("MARKET_APPLICATION_JS_DELETE"),className:"popup-window-button-decline",events:{click:()=>this.uninstallApp()}}),new BX.PopupWindowButtonLink({text:BX.message("JS_CORE_WINDOW_CANCEL"),className:"popup-window-button-link-cancel",events:{click:()=>{this.uninstallConfirmShown=false;this.popupDelete.close();this.popupDelete.destroy();this.popupDelete=null}}})]});this.popupDelete.show()},uninstallApp:function(){BX.ajax.runAction("market.Application.uninstall",{data:{code:this.appCode,clean:this.uninstallNodes[this.appCode].querySelector('[name="delete-data"]').checked?"Y":"N"},analyticsLabel:{code:this.appCode,viewMode:this.refreshUri?"list":"detail"},method:"POST"}).then((e=>{let t=e.data;if(t.error){this.popupDelete.setContent('<div class="market_delete_confirm"><div class="market_delete_confirm_text">'+t.error+"</div></div>");this.popupDelete.setButtons([new BX.PopupWindowButtonLink({text:BX.message("JS_CORE_WINDOW_CLOSE"),className:"popup-window-button-link-cancel",events:{click:function(){this.popupWindow.close()}}})]);this.popupDelete.adjustPosition()}else{this.popupDelete.close();this.uninstallConfirmShown=false;if(!!t.sliderUrl){BX.SidePanel.Instance.open(t.sliderUrl)}else{if(this.refreshUri){n.EventEmitter.emit("market:refreshUri",{refreshUri:this.refreshUri,skeleton:"list"});return}let e=BX.SidePanel.Instance.getTopSlider();if(e){e.reload()}else{window.location.reload()}}}}))}}});e.marketUninstallState=i})(this.BX.Market=this.BX.Market||{},BX.Vue3.Pinia,BX.Event);
//# sourceMappingURL=uninstall-store.bundle.map.js