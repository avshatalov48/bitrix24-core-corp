(()=>{const{TelegramConnectorManager:e}=jn.require("imconnector/connectors/telegram");const{NotificationServiceConsent:t}=jn.require("imconnector/consents/notification-service");const{CompleteButton:n}=jn.require("imconnector/lib/ui/buttons/complete");class o extends LayoutComponent{constructor(t){super(t);this.manager=new e}render(){return View({style:{flexDirection:"column"}},View({style:{marginTop:15,flexDirection:"row",alignItems:"space-between",width:"100%",justifyContent:"space-evenly"}},Button({style:{minWidth:80,borderWidth:1,borderColor:"#000"},text:"registration + edit",onClick:()=>this.openRegistryWidget()}),Button({style:{minWidth:80,borderWidth:1,borderColor:"#000"},text:"registration + send",onClick:()=>this.openRegistrationPlusSendWidget()})))}openRegistrationPlusSendWidget(){this.manager.openRegistrar(this.props.layout).then((e=>{this.openSendingComponent(e)}))}openRegistryWidget(){this.manager.openEditor(this.props.layout)}openSendingComponent(e){this.props.layout.openWidget("layout",{backdrop:{hideNavigationBar:true,mediumPositionPercent:60,onlyMediumPosition:true},onReady:t=>{t.showComponent(this.view=new i({connectorSettings:e,layoutWidget:t}))}})}}BX.onViewLoaded((()=>{layout.showComponent(new o({layout:layout}))}));class i extends LayoutComponent{render(){return View({style:{justifyContent:"center",alignItems:"center",flexDirection:"column"}},Text({text:"send SMS message"}),n({withoutIcon:true,text:"Send",borderRadius:20,width:165,height:42,onClick:()=>{this.send()}}))}sendMessage(e){console.log(e);if(e){BX.rest.callMethod("imopenlines.Message.send",{lineId:this.props.connectorSettings.id,connectorId:"telegrambot"},(e=>console.log(e.answer)))}}send(){const e=new t;e.isApproved().then((t=>{if(!t){e.open((e=>this.sendMessage(e)),this.props.layoutWidget);return}this.sendMessage(t)}))}}})();
//# sourceMappingURL=component.map.js