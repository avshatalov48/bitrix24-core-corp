(function(){"use strict";BX.namespace("BX.Landing.OnscrollAnimationHelper");if(BX.browser.IsMobile()){return}BX.Landing.OnscrollAnimationHelper.observer=new IntersectionObserver(m);BX.Landing.OnscrollAnimationHelper.animatedMap=new WeakMap;var n=BX.Landing.Utils.addClass;var i=BX.Landing.Utils.removeClass;var e=BX.Landing.Utils.hasClass;var a=BX.Landing.Utils.style;var t=BX.Landing.Utils.isPlainObject;var o=BX.Landing.Utils.onAnimationEnd;var r=BX.Landing.Utils.slice;var l=BX.Landing.Utils.onCustomEvent;var s;l("BX.Landing.Block:init",(function(n){s=Date.now();if(BX.hasClass(n.block,"landing-designer-block-mode")){return}var i=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n.block);i.forEach((function(n){d(n);BX.Landing.OnscrollAnimationHelper.observer.observe(n)}))}));l("BX.Landing.UI.Panel.URLList:show",(function(n){var i=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n);i.forEach((function(n){d(n);BX.Landing.OnscrollAnimationHelper.observer.observe(n)}))}));l("BX.Landing.Block:updateStyle",(function(n){if(t(n.data)&&t(n.data.affect)){var i=n.data.affect.some((function(n){return n==="animation-name"}));if(i){var e=BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements(n.block);e.forEach((function(n){d(n);observer.observe(n)}))}}}));BX.Landing.OnscrollAnimationHelper.selector=".js-animation";BX.Landing.OnscrollAnimationHelper.getBlockAnimatedElements=function(n){return r(n.querySelectorAll(BX.Landing.OnscrollAnimationHelper.selector))};function d(n){void a(n,{"animation-duration":"1000ms","animation-name":"none","animation-play-state":"paused"})}function m(n){n.forEach((function(n){if(n.isIntersecting){BX.Landing.OnscrollAnimationHelper.animateElement(n.target)}}))}BX.Landing.OnscrollAnimationHelper.animateElement=function(n){if(!BX.Landing.OnscrollAnimationHelper.animatedMap.has(n)){return c(n).then((function(){BX.Landing.OnscrollAnimationHelper.animatedMap.set(n,true);void a(n,{"animation-name":"none"});i(n,"animated");if(e(n,"modified")){i(n,"modified")}}))}return Promise.resolve()};function c(i){if(window.performance.timing.domContentLoadedEventStart-window.performance.timing.domLoading>400&&window.performance.timing.domComplete===0&&!document.querySelector("main.landing-edit-mode")){n(i,"modified")}n(i,"animated");void a(i,{"animation-name":"","animation-play-state":"running"});return o(i)}})();
//# sourceMappingURL=onscroll-animation_init.map.js